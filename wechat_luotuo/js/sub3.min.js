"use strict";!function(i){var n,t,e,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=i.strongest_marry||(i.strongest_marry={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16790136,this.GetCoupleBestRankReply),this.subscribe(16790137,this.GetCoupleBestGuessListReply),this.subscribe(16790138,this.CoupleBestGuessReply),this.subscribe(16790139,this.CoupleBestChooseSkillReply),this.subscribe(16790140,this.UpdateCoupleBestRoundInfo),this.subscribe(16790141,this.UpdateCoupleBestIncome),this.subscribe(16790142,this.UpdateCoupleBestMapInfo),this.subscribe(16790143,this.UpdateCoupleBestMapPace),this.subscribe(16790144,this.UpdateCoupleBestMapSkill),this.subscribe(16777382,this.UseSkillReply),GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),GlobalData.dispatcher.on("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this,this.updateCopyState),GlobalData.dispatcher.on("MARRY_INFO_UPDATE",this,this.ReqCoupleBestRoundInfo),this.GetCoupleBestGuessList(),this.ReqCoupleBestRoundInfo()},o.prototype.updateCopyState=function(t){t&&51===t[0]&&this.ReqCoupleBestRoundInfo()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(901==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(901))return void n.StrongestMarryModel.instance.setRP()},o.prototype.CoupleBestEnter=function(){this.publish(2109167,null)},o.prototype.ReqCoupleBestRoundInfo=function(){this.publish(9437587,null)},o.prototype.GetCoupleBestRank=function(){this.publish(4195808,null)},o.prototype.GetCoupleBestGuessList=function(){this.publish(9437584,null)},o.prototype.CoupleBestGuess=function(t){this.publish(9437585,[t])},o.prototype.CoupleBestChooseSkill=function(t){this.publish(9437586,[t])},o.prototype.UseSkill=function(t){this.publish(5242899,[t])},o.prototype.UseSkillReply=function(t){CommonUtil.noticeError(t[0],"成功使用技能")},o.prototype.CoupleBestGuessReply=function(t){CommonUtil.noticeError(t[0],"竞猜成功"),o.instance.GetCoupleBestGuessList()},o.prototype.GetCoupleBestRankReply=function(t){n.StrongestMarryModel.instance.GetCoupleBestRankReply(t)},o.prototype.GetCoupleBestGuessListReply=function(t){n.StrongestMarryModel.instance.GetCoupleBestGuessListReply(t)},o.prototype.CoupleBestChooseSkillReply=function(t){n.StrongestMarryModel.instance.CoupleBestChooseSkillReply(t)},o.prototype.UpdateCoupleBestRoundInfo=function(t){n.StrongestMarryModel.instance.UpdateCoupleBestRoundInfo(t)},o.prototype.UpdateCoupleBestIncome=function(t){n.StrongestMarryModel.instance.UpdateCoupleBestIncome(t)},o.prototype.UpdateCoupleBestMapInfo=function(t){n.StrongestMarryModel.instance.UpdateCoupleBestMapInfo(t)},o.prototype.UpdateCoupleBestMapPace=function(t){n.StrongestMarryModel.instance.UpdateCoupleBestMapPace(t)},o.prototype.UpdateCoupleBestMapSkill=function(t){n.StrongestMarryModel.instance.UpdateCoupleBestMapSkill(t)},s=o,n.StrongestMarryCtrl=s}(modules=(modules=window.modules)||{}),function(i){var n,t,e,s;function o(){return t.call(this)||this}n=i.nether_world||(i.nether_world={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16791531,this.GetZhanhunCopyPersonRankReply).subscribe(16791532,this.GetZhanhunCopyWarbandRankReply).subscribe(16791534,this.ZhanhunCopySceneReady).subscribe(16791530,this.GetZhanhunCopyInfoReply).subscribe(16791535,this.UpdateZhanhunCopyInfo).subscribe(16791533,this.ZhanhunCopyFinishLevel),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetZhanhunCopyInfo(),o.instance.GetZhanhunCopyWarbandRank()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(918==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(918))return void n.NetherWorldModel.instance.setRP()},o.prototype.GetZhanhunCopyPersonRank=function(){console.log("【 战魂神殿 】 获取战魂神殿个人排名 请求....................."),this.publish(4196304,null)},o.prototype.GetZhanhunCopyWarbandRank=function(){console.log("【 战魂神殿 】 获取战魂神殿战队排名 请求....................."),this.publish(4196305,null)},o.prototype.GetZhanhunCopyInfo=function(){console.log("【 战魂神殿 】 获取战魂神殿信息 请求....................."),this.publish(2110266,null)},o.prototype.GetZhanhunCopyPersonRankReply=function(t){console.log("【 战魂神殿 】 获取战魂神殿个人排名返回..............",t),n.NetherWorldModel.instance.GetZhanhunCopyPersonRankReply(t)},o.prototype.GetZhanhunCopyWarbandRankReply=function(t){console.log("【 战魂神殿 】 获取战魂神殿战队排名返回..............",t),n.NetherWorldModel.instance.GetZhanhunCopyWarbandRankReply(t)},o.prototype.GetZhanhunCopyInfoReply=function(t){console.log("【 战魂神殿 】 获取战魂神殿信息 返回..............",t),n.NetherWorldModel.instance.GetZhanhunCopyInfoReply(t)},o.prototype.UpdateZhanhunCopyInfo=function(t){console.log("【 战魂神殿 】 战魂神殿队员信息 返回..............",t),n.NetherWorldModel.instance.UpdateZhanhunCopyInfo(t)},o.prototype.ZhanhunCopyFinishLevel=function(t){console.log("【 战魂神殿 】结算层数..............",t),n.NetherWorldModel.instance.doneWave=t[0],n.NetherWorldModel.instance.doneWave<n.NetherWorldModel.instance.maxLevelNum&&WindowManager.instance.open(987)},o.prototype.ZhanhunCopySceneReady=function(t){console.log("【 战魂神殿 】第几层..............",t),n.NetherWorldModel.instance.currLv=t[0],GlobalData.dispatcher.event("EMPTY_SCENE_READY"),WindowManager.instance.open(119,4)},s=o,n.NetherWorldCtrl=s}(modules=modules||{}),function(e){var i,t,n,s;function o(){return null!==t&&t.apply(this,arguments)||this}i=e.soul_war||(e.soul_war={}),n=e.core.BaseCtrl,t=n,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16791426,this.onGetZhanhunInfoReply),this.subscribe(16777476,this.onUpdateZhanhun),this.subscribe(16791427,this.onZhanhunNhAddLevelReply),this.subscribe(16791428,this.onUpdateZhanhunNhInfo),this.subscribe(16791433,this.onZhanhunNhSkillUpReply),this.subscribe(16791434,this.onUpdateZhanhunNhSkills),this.subscribe(16791435,this.onZhanhunSkillUpReply),this.subscribe(16791438,this.onUpdateFightZhanhun),this.subscribe(16791437,this.onSetFightZhanhunReply),this.subscribe(16791436,this.onUpdateZhanhunInfo),this.subscribe(16791429,this.onZhanhunAddLevelReply),this.subscribe(16791430,this.onZhanhunLhAddLevelReply),this.subscribe(16791432,this.onZhanhunLhFastLevelReply),this.subscribe(16791431,this.onUpdateZhanhunLhInfo),this.onGlobal("BAG_UPDATE",this.bagHandler),this.publish(2110162,null)},o.prototype.bagHandler=function(t){0===t&&(i.SoulWarModel.instance.checkNingHunRp(),i.SoulWarModel.instance.checkZhanhunRp())},o.prototype.onUpdateZhanhun=function(t){var e=GameCenter.instance.getRole(t[0]);e&&e.publish("updateZhanhun",t,!1)},o.prototype.onGetZhanhunInfoReply=function(t){i.SoulWarModel.instance.setNingHunLvl(t[0][0]),i.SoulWarModel.instance.setNingHunProgress(t[0][1]),i.SoulWarModel.instance.setNingHunSkill(t[0][2]),i.SoulWarModel.instance.setFightZhanhunId(t[3]),i.SoulWarModel.instance.setZhanhunList(t[1]),i.SoulWarModel.instance.checkNingHunRp(),i.SoulWarModel.instance.checkZhanhunRp()},o.prototype.onZhanhunNhAddLevelReply=function(t){t[0]},o.prototype.ninghunLvlUp=function(){this.publish(2110163,null)},o.prototype.onUpdateZhanhunNhInfo=function(t){i.SoulWarModel.instance.setNingHunLvl(t[0]),i.SoulWarModel.instance.setNingHunProgress(t[1]),GlobalData.dispatcher.event("UPDATE_ZHANHUN_NINGHUN_INFO"),i.SoulWarModel.instance.checkNingHunRp()},o.prototype.onZhanhunNhSkillUpReply=function(t){t[0]},o.prototype.ZhanhunNhSkillUp=function(t){this.publish(2110167,[t])},o.prototype.onUpdateZhanhunNhSkills=function(t){i.SoulWarModel.instance.setNingHunSkill(t[0]),GlobalData.dispatcher.event("UPDATE_ZHANHUN_NINGHUN_SKILL_INFO"),i.SoulWarModel.instance.checkNingHunRp()},o.prototype.onZhanhunSkillUpReply=function(t){t[0]},o.prototype.ZhanhunSkillUp=function(t,e){this.publish(2110168,[t,e])},o.prototype.onSetFightZhanhunReply=function(t){t[0]},o.prototype.SetFightZhanhun=function(t){this.publish(2110169,[t])},o.prototype.onUpdateFightZhanhun=function(t){i.SoulWarModel.instance.setFightZhanhunId(t[0]),GlobalData.dispatcher.event("UPDATE_FIGHT_ZHANHUN_INFO")},o.prototype.onZhanhunAddLevelReply=function(t){0==t[0]&&(0==this._zhanhunLvl?WindowManager.instance.openDialog(92,[this._zhanhunId,14]):e.effect.SuccessEffectCtrl.instance.play("assets/others/tx_jinjiechengong7.png"))},o.prototype.ZhanhunAddLevel=function(t){this._zhanhunId=t,this._zhanhunLvl=i.SoulWarModel.instance.getZhanhunOrderById(t),this.publish(2110164,[t])},o.prototype.onUpdateZhanhunInfo=function(t){i.SoulWarModel.instance.setZhanhun(t[0]),GlobalData.dispatcher.event("UPDATE_ZHANHUN_INFO"),i.SoulWarModel.instance.checkZhanhunRp()},o.prototype.onZhanhunLhAddLevelReply=function(t){t[0]},o.prototype.ZhanhunLhAddLevel=function(t){this.publish(2110165,[t])},o.prototype.onZhanhunLhFastLevelReply=function(t){t[0]},o.prototype.ZhanhunLhFastLevel=function(t){this.publish(2110166,[t])},o.prototype.onUpdateZhanhunLhInfo=function(t){i.SoulWarModel.instance.setZhanhunLhData(t[0],t[1]),GlobalData.dispatcher.event("UPDATE_LIANHUN_INFO"),i.SoulWarModel.instance.checkZhanhunRp()},s=o,i.SoulWarCtrl=s}(modules=modules||{}),function(i){var n,t,e,s;function o(){return t.call(this)||this}n=i.team_warfare||(i.team_warfare={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16788948,this.WarbandWarBossHurtDrawInfoReply).subscribe(16788949,this.WarbandWarBossHurtDrawReply).subscribe(16788950,this.WarbandWarWorshipReply).subscribe(16788952,this.WarbandWarPersonRankReply).subscribe(16788955,this.UpdateWarbandWarInfoList).subscribe(16788956,this.WarbandWarKingShowReply).subscribe(16788953,this.WarbandWarWarbandRankReply).subscribe(16788954,this.UpdateWarbandWarRoundInfo).subscribe(16788957,this.GetWarbandWarGuessListReply).subscribe(16788958,this.ReqWarbandWarGuessReply).subscribe(16788951,this.UpdateWarbandWarBossHurt).subscribe(16788960,this.UpdateWarbandWarGatherList).subscribe(16777384,this.UpdateGatherOcc).subscribe(16788959,this.WarbandWarCopyMatchInfo).subscribe(16788962,this.WarbandWarAchieveInfoReply).subscribe(16788963,this.WarbandWarAchieveDrawReply).subscribe(16788961,this.UpdateWarbandWarCoin).subscribe(16788964,this.WarbandWarCopyJudge).subscribe(16777383,this.GatherPutDownReply).subscribe(16788965,this.WarbandWarWorshipTimes).subscribe(16788966,this.UpdateWarbandWarGuess).subscribe(16788967,this.AddWarbandWarScore).onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType).onGlobal("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this.getall).onGlobal("WARBAND_INFO_UPDATE",this.getall),o.instance.WarbandWarBossHurtDrawInfo(),o.instance.WarbandWarInfoList(),o.instance.WarbandWarKingShow(),o.instance.GetWarbandWarGuessList(1),o.instance.GetWarbandWarGuessList(2),o.instance.GetWarbandWarGuessList(3),o.instance.WarbandWarAchieveInfo(),o.instance.ReqWarbandWarWorshipTimes(),o.instance.WarbandWarWarbandRank()},o.prototype.getall=function(){o.instance.WarbandWarBossHurtDrawInfo(),o.instance.WarbandWarInfoList()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(939==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(939))return void n.TeamWarfareModel.instance.setRPAll()},o.prototype.ReqWarbandWarWorshipTimes=function(){this.publish(2108077,null)},o.prototype.WarbandWarAchieveDraw=function(t){this.publish(2108076,[t])},o.prototype.WarbandWarAchieveInfo=function(){this.publish(2108075,null)},o.prototype.ReqWarbandWarEnter=function(){this.publish(2108074,null)},o.prototype.GatherPutDown=function(){this.publish(5242900,null)},o.prototype.GetWarbandWarInfo=function(){},o.prototype.WarbandWarInfoList=function(){this.publish(4195419,null)},o.prototype.WarbandWarBossHurtDrawInfo=function(){this.publish(2108071,null)},o.prototype.WarbandWarBossHurtDraw=function(t){this.publish(2108072,[t])},o.prototype.WarbandWarKingShow=function(){this.publish(4195420,null)},o.prototype.WarbandWarWorship=function(){this.publish(2108073,null)},o.prototype.WarbandWarPersonRank=function(){this.publish(4195418,null)},o.prototype.WarbandWarWarbandRank=function(){this.publish(4195422,null)},o.prototype.GetWarbandWarGuessList=function(t){this.publish(4195421,[t])},o.prototype.ReqWarbandWarGuess=function(t,e){this.publish(9437684,[t,e])},o.prototype.WarbandWarBossHurtDrawReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},o.prototype.WarbandWarWorshipReply=function(t){CommonUtil.noticeError(t[0],"膜拜成功")},o.prototype.ReqWarbandWarGuessReply=function(t){CommonUtil.noticeError(t[0],"竞猜成功")},o.prototype.UpdateWarbandWarGuess=function(t){var e=t[0];GlobalData.dispatcher.event("REQ_WARBAND_WARGUESS_REPLY",[e])},o.prototype.GatherPutDownReply=function(t){CommonUtil.noticeError(t[0],"交付成功，增加战队积分")},o.prototype.WarbandWarAchieveDrawReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},o.prototype.WarbandWarBossHurtDrawInfoReply=function(t){n.TeamWarfareModel.instance.WarbandWarBossHurtDrawInfoReply(t)},o.prototype.UpdateWarbandWarBossHurt=function(t){n.TeamWarfareModel.instance.UpdateWarbandWarBossHurt(t)},o.prototype.UpdateWarbandWarInfoList=function(t){n.TeamWarfareModel.instance.UpdateWarbandWarInfoList(t)},o.prototype.WarbandWarKingShowReply=function(t){n.TeamWarfareModel.instance.WarbandWarKingShowReply(t)},o.prototype.WarbandWarPersonRankReply=function(t){n.TeamWarfareModel.instance.WarbandWarPersonRankReply(t)},o.prototype.WarbandWarWarbandRankReply=function(t){n.TeamWarfareModel.instance.WarbandWarWarbandRankReply(t)},o.prototype.UpdateWarbandWarRoundInfo=function(t){n.TeamWarfareModel.instance.UpdateWarbandWarRoundInfo(t)},o.prototype.GetWarbandWarGuessListReply=function(t){n.TeamWarfareModel.instance.GetWarbandWarGuessListReply(t)},o.prototype.UpdateWarbandWarGatherList=function(t){n.TeamWarfareModel.instance.UpdateWarbandWarGatherList(t)},o.prototype.UpdateGatherOcc=function(t){n.TeamWarfareModel.instance.UpdateGatherOcc(t)},o.prototype.WarbandWarCopyMatchInfo=function(t){n.TeamWarfareModel.instance.WarbandWarCopyMatchInfo(t)},o.prototype.UpdateWarbandWarCoin=function(t){n.TeamWarfareModel.instance.UpdateWarbandWarCoin(t)},o.prototype.UpdateJoinAward=function(t){n.TeamWarfareModel.instance.UpdateJoinAward(t)},o.prototype.WarbandWarAchieveInfoReply=function(t){n.TeamWarfareModel.instance.WarbandWarAchieveInfoReply(t)},o.prototype.WarbandWarCopyJudge=function(t){4401===i.scene.SceneModel.instance.enterScene[0]&&(WindowManager.instance.open(1417,t),i.player.PlayerModel.instance.selectTarget(0,-1))},o.prototype.WarbandWarWorshipTimes=function(t){n.TeamWarfareModel.instance.WarbandWarWorshipTimes(t)},o.prototype.AddWarbandWarScore=function(t){n.TeamWarfareModel.instance.AddWarbandWarScore(t[0])},s=o,n.TeamWarfareCtrl=s}(modules=modules||{}),function(t){var c,e,i,u,n;function s(){return null!==e&&e.apply(this,arguments)||this}c=t.weekCard||(t.weekCard={}),i=t.core.BaseCtrl,u=t.config.WeekCardCfg,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.publish(2110762,null),this.subscribe(16792026,this.getWeekCardInfoReply,this),this.subscribe(16792027,this.updateWeekCardKillBoss,this),this.subscribe(16792028,this.updateWeekCardEndTime,this),this.subscribe(16792029,this.drawWeekCardAwardReply,this)},s.prototype.getCardAward=function(t){this.publish(2110763,[t])},s.prototype.reqInfo=function(){this.publish(2110762,null)},s.prototype.drawWeekCardAwardReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.getWeekCardInfoReply=function(t){c.WeekCardModel.instance.weekLv=t[0],c.WeekCardModel.instance.killBossTime=t[2];for(var e=t[4],i=c.WeekCardModel.instance.weekLv,n=Math.max(i,1),s=[],o=0,a=e.length;o<a;o++){var r=(p=e[o])[0];(h=u.instance.getTaskInfo(n,r))||console.error("找不到配置：周卡的任务id:"+r+"、周卡的等级:"+n),s[h[5]]=p}for(var l=1;l<=1;l++)if(!s[l]){var h,p=[(h=u.instance.getFirstTaskInfo(l,n))[1],0];s[h[5]]=p}c.WeekCardModel.instance.tasks=s,c.WeekCardModel.instance.weekVipExp=t[1],c.WeekCardModel.instance.vipEndTimeStamp=t[3],c.WeekCardModel.instance.weekStatTime=t[5],c.WeekCardModel.instance.updateRP(),GlobalData.dispatcher.event("WEEK_CARD_UPDATE_INFO")},s.prototype.updateWeekCardEndTime=function(t){c.WeekCardModel.instance.vipEndTimeStamp=t[0],GlobalData.dispatcher.event("WEEK_CARD_UPDATE_INFO")},s.prototype.updateWeekCardKillBoss=function(t){c.WeekCardModel.instance.killBossTime=t[0],c.WeekCardModel.instance.updateRP(),GlobalData.dispatcher.event("WEEK_CARD_UPDATE_INFO")},n=s,c.WeekCardCtrl=n}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.space_travel_continuous_pay||(e.space_travel_continuous_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(933==t[e]&&s.instance.getFuncIsOpen(933))return void i.SpaceTravelContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log("立冬 连续充值 领取奖励 请求...............:   "+t),Channel.instance.publish(2106270,[e.festival.FestivalModel.instance.SpaceTravelType,t])},o=a,i.SpaceTravelContinuousPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.space_travel_single_pay||(e.space_travel_single_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(934==t[e]&&s.instance.getFuncIsOpen(934))return void i.SpaceTravelSinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 太空之旅 单笔充值 领取奖励 请求...............:   "+t),Channel.instance.publish(2106267,[e.festival.FestivalModel.instance.SpaceTravelType,t])},o=a,i.SpaceTravelSinglePayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.space_travel_treasure||(t.space_travel_treasure={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),GlobalData.dispatcher.on("BAG_UPDATE",this,this.setRP),i.SpaceTravelTreasureModel.instance,this.getNationalXunbaoRank(),this.GetNationalXunbaoScoreList(),this.GetNationalXunbaoScoreAndState()},a.prototype.setRP=function(){i.SpaceTravelTreasureModel.instance.setRP()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(928==t[e]&&s.instance.getFuncIsOpen(928))return void i.SpaceTravelTreasureModel.instance.setRP()},a.prototype.GetNationalXunbaoScoreAndState=function(){Channel.instance.publish(4194808,[i.SpaceTravelTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoBroadcastRecords=function(){Channel.instance.publish(4194807,[i.SpaceTravelTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoScoreList=function(){Channel.instance.publish(4194806,[i.SpaceTravelTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoRank=function(){Channel.instance.publish(4194804,[i.SpaceTravelTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoScoreAward=function(){Channel.instance.publish(4194805,[i.SpaceTravelTreasureModel.instance.festivalType])},a.prototype.festivalNationalXunbao=function(t){Channel.instance.publish(2106273,[i.SpaceTravelTreasureModel.instance.festivalType,t])},o=a,i.SpaceTravelTreasureCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.space_travel_cumulate_pay||(e.space_travel_cumulate_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(935==t[e]&&s.instance.getFuncIsOpen(935))return void i.SpaceTravelCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log(" 立冬 累计充值 领取奖励 请求...............:   "+t),Channel.instance.publish(2106268,[e.festival.FestivalModel.instance.SpaceTravelType,t])},o=a,i.SpaceTravelCumulatePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.space_travel_seven_days_consume||(e.space_travel_seven_days_consume={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(937==t[e]&&s.instance.getFuncIsOpen(937))return void i.SpaceTravelSevenDaysConsumeModel.instance.setRP()},a.prototype.DrawFestCostTotal=function(t){console.log(" 立冬 七日消费 领取奖励 请求...............:   "+t),Channel.instance.publish(2106272,[e.festival.FestivalModel.instance.SpaceTravelType,t])},o=a,i.SpaceTravelSevenDaysConsumeCtrl=o}(modules=modules||{}),function(i){var n,t,e,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=i.welfare_place||(i.welfare_place={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16791626,this.getBlessedLandCopyInfoReply),this.subscribe(16791628,this.getBlessedLandInfoReply),this.subscribe(16791629,this.blessedLandDrawRewardReply),this.subscribe(16791630,this.blessedLandInspireReply),this.subscribe(16791627,this.getBlessedLandBossInfoReply),this.subscribe(16791631,this.updateBlessedLandData),this.subscribe(16791632,this.updateBlessedLandHurtRank),this.subscribe(16791634,this.blessedLandStageRewardReply),this.subscribe(16791635,this.getBlessedLandStageRewardReply),this.subscribe(16791636,this.updateBlessedLandOper),this.subscribe(16777477,this.broadcastCopyIncomes),this.getBlessedLandCopyInfo(),this.getBlessedLandInfo(),this.getBlessedLandBossInfo(),this.getBlessedLandStageReward()},o.prototype.getBlessedLandCopyInfoReply=function(t){n.WelfarePlaceModel.instance.getBlessedLandCopyInfoReply(t)},o.prototype.getBlessedLandInfoReply=function(t){n.WelfarePlaceModel.instance.getBlessedLandInfoReply(t)},o.prototype.getBlessedLandBossInfoReply=function(t){n.WelfarePlaceModel.instance.getBlessedLandBossInfoReply(t)},o.prototype.blessedLandDrawRewardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},o.prototype.blessedLandInspireReply=function(t){CommonUtil.noticeError(t[0],"鼓舞成功")},o.prototype.updateBlessedLandData=function(t){n.WelfarePlaceModel.instance.updateBlessedLandData(t)},o.prototype.updateBlessedLandHurtRank=function(t){n.WelfarePlaceModel.instance.updateBlessedLandHurtRank(t)},o.prototype.blessedLandStageRewardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},o.prototype.getBlessedLandStageRewardReply=function(t){n.WelfarePlaceModel.instance.getBlessedLandStageRewardReply(t)},o.prototype.getBlessedLandCopyInfo=function(){this.publish(2110362,null)},o.prototype.getBlessedLandInfo=function(){this.publish(4196404,null)},o.prototype.getBlessedLandBossInfo=function(){this.publish(2110363,null)},o.prototype.blessedLandInspire=function(){this.publish(2110364,null)},o.prototype.blessedLandDrawReward=function(){this.publish(4196405,null)},o.prototype.blessedLandStageReward=function(t){this.publish(4196406,[t])},o.prototype.getBlessedLandStageReward=function(){this.publish(4196407,null)},o.prototype.updateBlessedLandOper=function(t){if(1===t[0]){if(i.warband.WarbandModel.instance.leaderId===PlayerModel.instance.actorId)return;var e=Handler.create(this,function(){var t=n.WelfarePlaceModel.instance.bossInfo;i.dungeon.DungeonCtrl.instance.reqEnterScene(4101,t[4])});CommonUtil.alert("温馨提示","战队队长激活战队鼓舞,是否前往进行魔王挑战",[e],[])}},o.prototype.broadcastCopyIncomes=function(t){n.WelfarePlaceModel.instance.broadcastCopyIncomes(t)},s=o,n.WelfarePlaceCtrl=s}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.perfectest_ten_single_pay||(e.perfectest_ten_single_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(952==t[e]&&s.instance.getFuncIsOpen(952))return void i.PerfectestTenSinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 至臻 单笔充值 领取奖励 请求...............:   "+t),this.publish(2106267,[e.festival.FestivalModel.instance.PerfectestTenType,t])},o=a,i.PerfectestTenSinglePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.perfectest_ten_cumulate_pay||(e.perfectest_ten_cumulate_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(953==t[e]&&s.instance.getFuncIsOpen(953))return void i.PerfectestTenCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log(" 至臻 累计充值 领取奖励 请求...............:   "+t),this.publish(2106268,[e.festival.FestivalModel.instance.PerfectestTenType,t])},o=a,i.PerfectestTenCumulatePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.perfectest_ten_continuous_pay||(e.perfectest_ten_continuous_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(954==t[e]&&s.instance.getFuncIsOpen(954))return void i.PerfectestTenContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log(" 至臻 连续充值 领取奖励 请求...............:   "+t),this.publish(2106270,[e.festival.FestivalModel.instance.PerfectestTenType,t])},o=a,i.PerfectestTenContinuousPayCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_pay_rank||(t.perfectest_ten_pay_rank={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){},s=o,e.PerfectestTenPayRankCtrl=s}(modules=modules||{}),function(e){var i,t,n,s;function o(){return null!==t&&t.apply(this,arguments)||this}i=e.tianshu||(e.tianshu={}),n=e.core.BaseCtrl,t=n,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16791726,this.onGetTianshuInfoReply),this.subscribe(16791727,this.onTianshuAddLevelReply),this.subscribe(16791728,this.onUpdateTianshuInfo),this.subscribe(16791729,this.onTianshuSkillUpReply),this.subscribe(16791730,this.onUpdateTianshuSkills),this.subscribe(16791731,this.onTianshuLearnReply),this.subscribe(16791733,this.onTianshuLearningReply),this.subscribe(16791734,this.onTianshuPowerUpReply),this.subscribe(16791736,this.onTianshuDanEatReply),this.subscribe(16791737,this.onTianshuDanFastEatReply),this.subscribe(16791732,this.onUpdateTsLearning),this.subscribe(16791735,this.onUpdateTianshuDan),this.onGlobal("BAG_UPDATE",this.bagHandler),this.publish(2110462,null)},o.prototype.bagHandler=function(t){0!==t&&14!=t||i.TianshuModel.instance.checkAllRp()},o.prototype.onGetTianshuInfoReply=function(t){i.TianshuModel.instance.setTianshuList(t[0]),i.TianshuModel.instance.checkAllRp()},o.prototype.onUpdateTianshuInfo=function(t){i.TianshuModel.instance.setTianshuInfo(t[0]),GlobalData.dispatcher.event("UPDATE_TIANSHU_INFO"),i.TianshuModel.instance.checkAllRp()},o.prototype.onUpdateTianshuSkills=function(t){i.TianshuModel.instance.setTianshuSkills(t[0],t[1]),GlobalData.dispatcher.event("UPDATE_TIANSHU_INFO"),i.TianshuModel.instance.checkAllRp()},o.prototype.onTianshuAddLevelReply=function(t){0==t[0]&&GlobalData.dispatcher.event("TIANSHU_DUNWU_SUCCESS")},o.prototype.tianshuAddLevel=function(t){this.publish(2110463,[t])},o.prototype.onTianshuSkillUpReply=function(t){},o.prototype.tianshuSkillUp=function(t,e){this.publish(2110464,[t,e])},o.prototype.onTianshuLearnReply=function(t){0==t[0]&&e.notice.SystemNoticeManager.instance.addNotice("修习成功")},o.prototype.tianshuLearn=function(t,e){this.publish(2110465,[t,e])},o.prototype.onUpdateTsLearning=function(t){i.TianshuModel.instance.setTsLearning(t[0],t[1]),GlobalData.dispatcher.event("UPDATE_TIANSHU_INFO"),i.TianshuModel.instance.checkAllRp()},o.prototype.onUpdateTianshuDan=function(t){i.TianshuModel.instance.setTsEatLevel(t[0],t[1]),GlobalData.dispatcher.event("UPDATE_TIANSHU_INFO"),i.TianshuModel.instance.checkAllRp()},o.prototype.onTianshuPowerUpReply=function(t){0==t[0]&&e.notice.SystemNoticeManager.instance.addNotice("升级成功")},o.prototype.tianshuPowerUp=function(t){this.publish(2110467,[t])},o.prototype.onTianshuDanEatReply=function(t){},o.prototype.tianshuDanEat=function(t){this.publish(2110468,[t])},o.prototype.onTianshuDanFastEatReply=function(t){},o.prototype.tianshuDanFastEat=function(t){this.publish(2110469,[t])},o.prototype.onTianshuLearningReply=function(t){},o.prototype.tianshuLearning=function(t){this.publish(2110466,[t])},s=o,i.TianshuCtrl=s}(modules=modules||{}),function(i){var n,t,e,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=i.trahman_boss||(i.trahman_boss={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16778439,this.GetBrahmaBossPerInfoReply).onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType).onGlobal("BORN_LV_UPDATE",this.setRp).onGlobal("PLAYER_TOTAL_ATTR_UPDATE",this.setRp),this.GetBrahmaBossPerInfo()},o.prototype.setRp=function(){n.TrahmanBossModel.instance.setRp()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(971==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(971))return void n.TrahmanBossModel.instance.setRp()},o.prototype.GetBrahmaBossPerInfo=function(){this.publish(2098157,null)},o.prototype.GetBrahmaBossPerInfoReply=function(t){n.TrahmanBossModel.instance.GetBrahmaBossPerInfoReply(t)},s=o,n.TrahmanBossCtrl=s}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.brahma_buy||(t.brahma_buy={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16791826,this.getFantianBuyInfoReply),this.subscribe(16791827,this.drawFantianBuyAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getFantianBuy()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(968==t[e]&&s.instance.getFuncIsOpen(968))return void i.BrahmaBuyModel.instance.setRP()},a.prototype.getFantianBuy=function(){this.publish(2110562,null)},a.prototype.drawFantianBuyAward=function(){this.publish(2110563,null)},a.prototype.drawFantianBuyAwardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},a.prototype.getFantianBuyInfoReply=function(t){i.BrahmaBuyModel.instance.getFantianBuyInfoReply(t)},o=a,i.BrahmaBuyCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.brahma_pay||(t.brahma_pay={}),n=t.funcOpen.FuncOpenModel,s=t.core.BaseCtrl,e=s,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16791828,this.getFantianAccPayReply),this.subscribe(16791829,this.drawFantianAccPayAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getFantianAccPay()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(969==t[e]&&n.instance.getFuncIsOpen(969))return void i.BrahmaPayModel.instance.setRP()},a.prototype.getFantianAccPayReply=function(t){i.BrahmaPayModel.instance.getFantianAccPayReply(t)},a.prototype.drawFantianAccPayAwardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},a.prototype.getFantianAccPay=function(){this.publish(2110564,null)},a.prototype.drawFantianAccPayAward=function(t){this.publish(2110565,[t])},o=a,i.BrahmaPayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.sky_book_buy||(t.sky_book_buy={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16791738,this.getZhanhunTianshuBuyReply),this.subscribe(16791739,this.drawTianshuBuyAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getTianshuBuyInfo()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(966==t[e]&&s.instance.getFuncIsOpen(966))return void i.SkyBookBuyModel.instance.setRP()},a.prototype.getTianshuBuyInfo=function(){this.publish(2110470,null)},a.prototype.drawZhanhunTianshuBuyAward=function(){this.publish(2110471,null)},a.prototype.drawTianshuBuyAwardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},a.prototype.getZhanhunTianshuBuyReply=function(t){i.SkyBookBuyModel.instance.getZhanhunTianshuBuyReply(t)},o=a,i.SkyBookBuyCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.sky_book_pay||(t.sky_book_pay={}),n=t.funcOpen.FuncOpenModel,s=t.core.BaseCtrl,e=s,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16791740,this.getTianshuAccPayReply),this.subscribe(16791741,this.drawTianshuAccPayAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getTianshuAccPay()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(967==t[e]&&n.instance.getFuncIsOpen(967))return void i.SkyBookPayModel.instance.setRP()},a.prototype.getTianshuAccPayReply=function(t){i.SkyBookPayModel.instance.getTianshuAccPayReply(t)},a.prototype.drawTianshuAccPayAwardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},a.prototype.getTianshuAccPay=function(){this.publish(2110472,null)},a.prototype.drawTianshuAccPayAward=function(t){this.publish(2110473,[t])},o=a,i.SkyBookPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s;function o(){return null!==t&&t.apply(this,arguments)||this}i=e.brahma_equip||(e.brahma_equip={}),n=e.core.BaseCtrl,t=n,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16791830,this.updateFantianEquipList),this.subscribe(16791831,this.updateFantianNeidan),this.subscribe(16791832,this.updateFantianEquipRise),this.subscribe(16791833,this.fantianWearEquipReply),this.subscribe(16791834,this.fantianUseNeiDanReply),this.subscribe(16791835,this.fantianEquipUpGradeReply),this.subscribe(16791836,this.fantianEquipStrongReply),this.subscribe(16791837,this.fantianEquipStrongRiseReply),this.subscribe(16791838,this.fantianEquipResolveReply),this.onGlobal("BAG_UPDATE",i.BrahmaEquipModel.instance.setRP,i.BrahmaEquipModel.instance),this.getFantianEquipInfo()},o.prototype.updateFantianEquipList=function(t){i.BrahmaEquipModel.instance.updateFantianEquipList(t)},o.prototype.updateFantianNeidan=function(t){i.BrahmaEquipModel.instance.updateFantianNeidan(t)},o.prototype.updateFantianEquipRise=function(t){i.BrahmaEquipModel.instance.updateFantianEquipRise(t)},o.prototype.fantianWearEquipReply=function(t){CommonUtil.noticeError(t[0],"穿戴成功"),GlobalData.dispatcher.event("PLAYER_WEAR_EQUIPS")},o.prototype.fantianUseNeiDanReply=function(t){CommonUtil.noticeError(t[0],"使用成功")},o.prototype.fantianEquipUpGradeReply=function(t){0===t[0]?(e.effect.SuccessEffectCtrl.instance.play("assets/others/txt_ftzb_sjcg.png",340,110),GlobalData.dispatcher.event("FANTIAN_DAZAO_SCLASS_SUEECES")):CommonUtil.noticeError(t[0])},o.prototype.fantianEquipStrongReply=function(t){CommonUtil.noticeError(t[0],"强化成功"),GlobalData.dispatcher.event("INTENSIVE_SUCCESS",[t[1]])},o.prototype.fantianEquipStrongRiseReply=function(t){CommonUtil.noticeError(t[0],"强化成功")},o.prototype.fantianEquipResolveReply=function(t){0===t[0]?(WindowManager.instance.open(212,[t[1],"分解成功",!0,"",!1,!0]),GlobalData.dispatcher.event("BEAST_EQUIPMENT_CHANG")):CommonUtil.noticeError(t[0])},o.prototype.getFantianEquipInfo=function(){FuncOpenCtrl.instance.registeFuncReq(972,2110566),this.publish(2110566,null)},o.prototype.fantianWearEquip=function(t){this.publish(2110567,[t])},o.prototype.fantianWearEquipOnekey=function(t){this.publish(2110568,[t])},o.prototype.fantianUseNeiDan=function(t){this.publish(2110569,[t])},o.prototype.fantianUseNeiDanOneKey=function(t){this.publish(2110570,[t])},o.prototype.fantianEquipUpGrade=function(t){this.publish(2110571,[t])},o.prototype.fantianEquipStrong=function(t){this.publish(2110572,[t])},o.prototype.fantianEquipStrongOnekey=function(){this.publish(2110573,null)},o.prototype.fantianEquipStrongRise=function(t){this.publish(2110574,[t])},o.prototype.fantianEquipResolve=function(t){this.publish(2110575,[t])},s=o,i.BrahmaEquipCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.seal_deity||(t.seal_deity={}),n=t.core.BaseCtrl,s=t.config.RechargeCfg,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16786528,this.getSealDeityReply),this.subscribe(16786529,this.drawSealDeityReply),this.getSealDeity()},a.prototype.getSealDeityReply=function(t){e.SealDeityModel.instance.updateGetSealDeity(t)},a.prototype.drawSealDeityReply=function(t){CommonUtil.noticeError(t[0]),GlobalData.dispatcher.event("DRAW_SEAL_DEITY_BUY")},a.prototype.getSealDeity=function(){this.publish(2105964,null)},a.prototype.drawSealDeity=function(t){this.publish(2105965,[t])},a.prototype.buy=function(t){PlatParams.askPay(t,s.instance.getRecharCfgByIndex(t)[2])},o=a,e.SealDeityCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.halo||(t.halo={}),n=t.core.BaseCtrl,s=t.config.RechargeCfg,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16792126,this.onGetStarInfoReply),this.subscribe(16792128,this.starSetCopyHelperReply),this._init=!0,this.getStarInfo(),this.starSetCopyHelper()},a.prototype.getStarInfo=function(){this.publish(2110862,null)},a.prototype.onGetStarInfoReply=function(t){e.HaloModel.instance.updateStarInfo(t,this._init),this._init=!1,GlobalData.dispatcher.event("HALO_INFO_UPDATE")},a.prototype.buy=function(t){PlatParams.askPay(t,s.instance.getRecharCfgByIndex(t)[2])},a.prototype.starSetCopyHelperReply=function(t){0===t[0]?(e.HaloModel.instance.checkTips=t[1],GlobalData.dispatcher.event("HOLO_HELPER_SET_UPDATE")):CommonUtil.noticeError(t[0],"设置成功")},a.prototype.starSetCopyHelper=function(t){void 0===t&&(t=[]),this.publish(2110864,[t])},o=a,e.HaloCtrl=o}(modules=modules||{}),function(n){var t,e;function i(){this._requestState=0,this.isShowDlog=!1,this._dlogCnt=0,this._requestState=0,this.isShowDlog=!1}t=n.hudie_platform||(n.hudie_platform={}),Object.defineProperty(i.prototype,"dlogCnt",{set:function(t){this._dlogCnt=t},enumerable:!0,configurable:!0}),i.prototype.showDlogTips=function(){if(n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(986)&&!this.isShowDlog){if(this.isShowDlog=!0,"number"!=typeof this._dlogCnt)return;if(1<=this._dlogCnt)return;WindowManager.instance.open(1490),n.customData.CustomDataCtrl.instance.setCustomData(39,[++this._dlogCnt])}},Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.queryExtraStatus=function(){PlatParams.microtQuery(function(t){i.instance.requestState=t}),GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},i.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(986==i&&n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(986))return void this.setRP();1026==i&&n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(1026)&&this.showDlogTips()}},i.prototype.doExtraAction=function(){PlatParams.microtOation(function(t){i.instance.requestState=t})},i.prototype.setRP=function(){n.redPoint.RedPointCtrl.instance.setRPProperty("hudieRP",1e3!=this.requestState&&1001!=this.requestState)},Object.defineProperty(i.prototype,"requestState",{get:function(){return this._requestState},set:function(t){this._requestState=t,GlobalData.dispatcher.event("UPDATA_HUDIE_STATE"),this.setRP()},enumerable:!0,configurable:!0}),e=i,t.HudiePlatformCtrl=e}(modules=modules||{}),function(t){var i,e,n,s,o,a,r;function l(){return e.call(this)||this}i=t.bindPhone||(t.bindPhone={}),n=t.funcOpen.FuncOpenModel,s=t.core.BaseCtrl,o=t.onceReward.OnceRewardCtrl,a=t.redPoint.RedPointCtrl,e=s,__extends(l,e),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.bindPhone=function(){var e=this;PlatParams.playerBindPhone(function(t){1===t&&(i.BindPhoneModel.instance.status=0,i.BindPhoneModel.instance.hasGotAward?e.checkFuncOpen():o.instance.setOnceRewardData(46005,"1"))})},l.prototype.getAward=function(){o.instance.drawOnceReward(46005)},l.prototype.setup=function(){var e=this;this.onGlobal("ONCE_REWARD_UPDATE",this.onceRewardUpdate),PlatParams.playerBindPhoneQuery(function(t){1===t&&(i.BindPhoneModel.instance.status=0),e.checkFuncOpen()})},l.prototype.checkFuncOpen=function(){var t=i.BindPhoneModel.instance.hasGotAward;a.instance.setRPProperty("bindphoneRP",0===i.BindPhoneModel.instance.status&&!t),t&&n.instance.setActionOpen(988,2),GlobalData.dispatcher.event("UPDATE_BIND_PHONE_STATE")},l.prototype.onceRewardUpdate=function(){this.checkFuncOpen()},r=l,i.BindPhoneCtrl=r}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.send_q_coins||(t.send_q_coins={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16792226,this.getQCurrencyRemainReply),this.subscribe(16792227,this.getQCurrencyInfoReply),this.subscribe(16792228,this.drawQCurrencyAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),PlatParams.isQQSpSource(this.onEvt.bind(this))},a.prototype.onEvt=function(t){1===t?(this.getQCurrencyInfo(),this.getQCurrencyRemain()):(console.log("请求....state",t),s.instance.setActionOpen(989,2))},a.prototype.getQCurrencyRemainReply=function(t){e.SendQCoinsModel.instance.getQCurrencyRemainReply(t)},a.prototype.getQCurrencyInfoReply=function(t){e.SendQCoinsModel.instance.getQCurrencyInfoReply(t)},a.prototype.drawQCurrencyAwardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(989==t[e]&&s.instance.getFuncIsOpen(989))return void PlatParams.isQQSpSource(this.onEvt.bind(this))},a.prototype.getQCurrencyInfo=function(){this.publish(2106288,null)},a.prototype.drawZhanhunTianshuBuyAward=function(){this.publish(2106289,null)},a.prototype.getQCurrencyRemain=function(){this.publish(7341532,null)},o=a,e.SendQCoinsCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.direct_ex||(t.direct_ex={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){},o.prototype.getDirectBuyReply=function(t){e.DirectExModel.instance.getDirectBuyReply(t)},o.prototype.drawDirectBuyReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},o.prototype.getDirectBuy=function(){this.publish(2110962,null)},o.prototype.drawDirectBuy=function(t){this.publish(2110963,[t])},s=o,e.DirectExCtrl=s}(modules=modules||{}),function(t){var e,i;function n(){this._gameList=[]}e=t.wx_sidebar||(t.wx_sidebar={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setGameList=function(t){this._gameList=t},n.prototype.getGameList=function(){return this._gameList},i=n,e.wxSildbarModel=i}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.wx_sidebar||(e.wx_sidebar={}),n=e.core.BaseCtrl,s=e.wx_sidebar.wxSildbarModel,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){},a.prototype.openwxSildbar=function(){if(e.common.MiniGameUtil.isMiniGame()&&1===PlatParams.control.funcOpen[1002]){var t=s.instance.getGameList();t&&0<t.length?WindowManager.instance.open(1514):PlatParams.getBoxList({page:0,count:20},function(t){t.data&&0<t.data.length&&(s.instance.setGameList(t.data),WindowManager.instance.open(1514))})}},o=a,t.wxSidebarCtrl=o}(modules=modules||{}),function(i){var e,n,t,s;function o(){var t=n.call(this)||this;return t.isInit=!1,t}e=i.nian_end_one_buy||(i.nian_end_one_buy={}),t=i.core.BaseCtrl,n=t,__extends(o,n),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.requestData=function(){this.isInit||(this.getLoginRewad(),this.isInit=!0)},o.prototype.setup=function(){this.subscribe(16792426,this.getEndAccPayInfoReply),this.subscribe(16792427,this.getOneBuyRewardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(1011==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(1011))return void this.getLoginRewad()},o.prototype.getEndAccPayInfoReply=function(t){e.NianEndOneBuyModel.instance.getEndAccPayInfoReply(t)},o.prototype.getOneBuyRewardReply=function(t){CommonUtil.noticeError(t[1],"领取成功")},o.prototype.getLoginRewad=function(){this.publish(2111062,[i.festival.FestivalModel.instance.openFestivalType])},o.prototype.getLoginRewardReward=function(t){this.publish(2111063,[i.festival.FestivalModel.instance.openFestivalType,t])},s=o,e.NianEndOneBuyCtrl=s}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.nian_end_happy_seven_days_pay||(e.nian_end_happy_seven_days_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(1014==t[e]&&s.instance.getFuncIsOpen(1014))return void i.NianEndHappySevenDaysPayModel.instance.setRP()},a.prototype.DrawFestPayTotal=function(t){this.publish(2106271,[e.festival.FestivalModel.instance.openFestivalType,t])},o=a,i.NianEndHappySevenDaysPayCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.yearEndRank||(t.yearEndRank={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16792428,this.getEndPartyRankReply),this.subscribe(16792431,this.UpdatePayRankConsume),this.subscribe(16792432,this.UpdatePayRankHide),this.subscribe(16792430,this.GetPayRankReply),this.subscribe(16792433,this.crossUpdatePayRankHide),this.onGlobal("FESTIVAL_INFO_UPDATE",this.init)},o.prototype.init=function(){e.YearEndRankModel.instance.typeId=t.festival.FestivalModel.instance.openFestivalType,e.YearEndRankModel.instance.typeId&&(this.getEndPartyRank(),this.GetPayRank())},o.prototype.crossUpdatePayRankHide=function(t){e.YearEndRankModel.instance.updateRankHide(t[1])},o.prototype.getEndPartyRank=function(){this.publish(4196504,[e.YearEndRankModel.instance.typeId])},o.prototype.getEndPartyRankReply=function(t){e.YearEndRankModel.instance.updateData(t)},o.prototype.GetPayRank=function(){this.publish(2111065,[e.YearEndRankModel.instance.typeId])},o.prototype.GetPayRankReply=function(t){e.YearEndRankModel.instance.hiddenState!=t[2]&&e.YearEndRankModel.instance.updateMyHide(t[2]),e.YearEndRankModel.instance.onRank()||e.YearEndRankModel.instance.tuhao!=t[1]&&(e.YearEndRankModel.instance.tuhao=t[1],GlobalData.dispatcher.event("YEAR_END_RANK_UPDATE"))},o.prototype.UpdatePayRankConsume=function(t){e.YearEndRankModel.instance.tuhao=t[1],GlobalData.dispatcher.event("YEAR_END_RANK_UPDATE")},o.prototype.UpdatePayRankHide=function(t){e.YearEndRankModel.instance.hiddenState!=t[1]&&(e.YearEndRankModel.instance.updateMyHide(t[1]),CommonUtil.noticeError(0,t[1]?"已隐藏榜单个人信息":"已显示榜单个人信息"))},o.prototype.updateHide=function(t){void 0===t&&(t=!1),this.publish(2111064,[e.YearEndRankModel.instance.typeId,t,PlayerModel.instance.actorId])},s=o,e.YearEndRankCtrl=s}(modules=modules||{}),function(a){var r,t,e,i;function n(){return t.call(this)||this}r=a.common_group||(a.common_group={}),e=a.core.BaseCtrl,t=e,__extends(n,t),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setup=function(){this.subscribe(16788626,this.fetchTeamExReply),this.subscribe(16788627,this.updateTeamExReply),this.subscribe(16788629,this.inviteTeamerExReply),this.subscribe(16788633,this.getApplicationsExReply),this.subscribe(16788634,this.approvalApplyExReply),this.subscribe(16788639,this.mateTeamerExReply),this.subscribe(16788643,this.updateTeamStateEx),this.subscribe(16788635,this.disbandedTeamExReply),this.subscribe(16788628,this.createTeamExReply),this.subscribe(16788641,this.giveupMatchTeamerReply),this.subscribe(16788646,this.updateTeamOper),this.subscribe(16788630,this.answerInviteExReply),this.subscribe(16788631,this.applyTeamerExReply),this.subscribe(16788650,this.getTeamListReply),this.subscribe(16788651,this.teamSetTypeReply),this.subscribe(16788652,this.updateTeamSetType),this.subscribe(16788653,this.updateTeamSetAnswer),this.subscribe(16788654,this.answerSetTypeReply),this.subscribe(16788647,this.teamEnterSceneReply),this.subscribe(16788648,this.teamSetModeReply),this.subscribe(16788649,this.checkTeamEnterReply),this.subscribe(16780229,this.UpdateTeamTargetChange),this.subscribe(16788656,this.GetTeamSetInfoReply),this.subscribe(16788657,this.SetAutoJoinStateReply),this.subscribe(16788658,this.GetTeamersCopyTimesReply),this.onGlobal("FETCH_TEAMEX_REPLY_UPDATE",this.automaticFun),this.onGlobal("DRAW_GOD_DEVIL_REWARD_REPLY",this.automaticFun),this.onGlobal("DUNGEON_SCENE_STATE_UPDATE",this.automaticFun),this.fetchTeamEx(),this.GetTeamSetInfo()},n.prototype.automaticFun=function(){Laya.timer.once(300,this,this.setAllAutomaticUI)},n.prototype.setAllAutomaticUI=function(){CommonUtil.whetherInCopy()||r.CommonGroupUtil.teammateInCopy()||(this.setAutomaticMatchingBtn(),this.setAutomaticPlayerBtn())},n.prototype.setAutomaticMatchingBtn=function(){if(!CommonUtil.whetherInCopy()&&r.CommonGroupUtil.isMyHaveTeam()&&r.CommonGroupModel.instance.isHomeowners){var t=r.CommonGroupModel.instance.teamType;1===t?r.CommonGroupModel.instance.isAutomaticMatching&&0===r.CommonGroupModel.instance.state&&3!=r.CommonGroupModel.instance.members.length&&this.mateTeamerEx(t):2===t||4===t?0===r.CommonGroupModel.instance.state?3!=r.CommonGroupModel.instance.members.length&&r.CommonGroupModel.instance.isAutomaticMatching&&0===r.CommonGroupModel.instance.teamMode&&this.mateTeamerEx(t):1===r.CommonGroupModel.instance.state&&(3==r.CommonGroupModel.instance.members.length||r.CommonGroupModel.instance.isAutomaticMatching||n.instance.giveupMatchTeamer()):3===t&&r.CommonGroupModel.instance.isAutomaticMatching&&0===r.CommonGroupModel.instance.state&&3!=r.CommonGroupModel.instance.members.length&&this.mateTeamerEx(t)}},n.prototype.setAutomaticPlayerBtn=function(){if(r.CommonGroupModel.instance.isAutomaticPlayer||this.clearmateTeamEnemyEx(),!CommonUtil.whetherInCopy()&&r.CommonGroupUtil.isMyHaveTeam()&&r.CommonGroupModel.instance.isHomeowners&&0===r.CommonGroupModel.instance.state){var t=r.CommonGroupModel.instance.teamType;if(3===r.CommonGroupModel.instance.members.length&&r.CommonGroupModel.instance.isAutomaticPlayer){if(r.CommonGroupUtil.teammateInCopy())return void CommonUtil.noticeError(0,"队伍正在进行副本,无法自动开始战斗",!0);var e=!0;1===t?e=r.CommonGroupUtil.isOpenTeamScene(38):8===t&&(e=r.CommonGroupUtil.isOpenTeamScene(44)&&!a.forbiddenBoss.ForbiddenBossModel.instance.finalBossDead),this.clearmateTeamEnemyEx(),e&&(r.CommonGroupModel.instance._times=GlobalData.serverTime+3e3,Laya.timer.once(3e3,this,this.mateTeamEnemyEx))}else this.clearmateTeamEnemyEx()}},n.prototype.mateTeamEnemyEx=function(){console.log("自动开始战斗 定时器 mateTeamEnemyEx");var t=r.CommonGroupModel.instance.teamType;1===t?a.faerie_demon.FaerieDemonCtrl.instance.mateTeamEnemyEx():2===t||4===t?n.instance.twoConfirmation():3===t?n.instance.twoConfirmation():8===t&&n.instance.teamEnterScene()},n.prototype.clearmateTeamEnemyEx=function(){Laya.timer.clear(this,this.mateTeamEnemyEx),r.CommonGroupModel.instance._times=0},n.prototype.GetTeamersCopyTimes=function(t){console.log("【 通用组队 】 获取目标副本信息.....................",t),this.publish(4195128,[t])},n.prototype.GetTeamersCopyTimesReply=function(t){console.log("【 通用组队 】 获取目标副本信息返回.................",t);var e=t[0],i=t[1];r.CommonGroupModel.instance.copyTimesTable[e]=i,GlobalData.dispatcher.event("GET_TEAMERS_COPY_TIMES_REPLY")},n.prototype.GetTeamSetInfo=function(){console.log("【 通用组队 】 获取队伍设置信息....................."),this.publish(4195126,null)},n.prototype.SetAutoJoinState=function(t,e){console.log("【 通用组队 】 设置自动加入状态.....................autoJoin:"+t+"  autoAccept:"+e),this.publish(4195127,[t,e])},n.prototype.fetchTeamEx=function(){console.log("【 通用组队 】 获取队伍信息....................."),this.publish(4195104,null)},n.prototype.createTeamEx=function(t,e,i){void 0===e&&(e=0),console.log("【 通用组队 】 创建队伍.....................teamType:"+t+" teamMode:"+e+" level:"+i),this.publish(4195105,[t,e,i])},n.prototype.disbandedTeamEx=function(){console.log("【 通用组队 】 解散队伍....................."),this.publish(4195113,null)},n.prototype.inviteTeamerEx=function(t){console.log("【 通用组队 】 邀请队员....................."),this.publish(4195111,[t])},n.prototype.answerInviteEx=function(t,e,i,n,s){console.log("【 通用组队 】 邀请回复....................."),this.publish(4195112,[t,e,i,n,s])},n.prototype.kickTeamerEx=function(t){console.log("【 通用组队 】 踢出队伍.....................："+t),t===PlayerModel.instance.actorId&&(r.CommonGroupModel.instance.isAutomaticMatching=r.CommonGroupModel.instance.isAutomaticPlayer=!1),this.publish(4195106,[t])},n.prototype.mateTeamerEx=function(t,e){void 0===e&&(e=!0),console.log("【 通用组队 】 匹配队员....................."+t),!CommonUtil.whetherInCopy()&&e&&this.publish(4195107,[t])},n.prototype.applyTeamerEx=function(t,e,i,n){console.log("【 通用组队 】 申请队伍....................."),this.publish(4195108,[t,e,i,n])},n.prototype.getApplicationsEx=function(){console.log("【 通用组队 】 获取申请列表....................."),r.CommonGroupModel.instance.isHomeowners&&this.publish(4195109,null)},n.prototype.approvalApplyEx=function(t,e){console.log("【 通用组队 】 审批申请....................."),this.publish(4195110,[t,e])},n.prototype.giveupMatchTeamer=function(){console.log("【 通用组队 】 结束匹配队友....................."),this.publish(4195116,null)},n.prototype.fetchTeamExReply=function(t){console.log("【 通用组队 】 获取队伍信息返回..............",t),r.CommonGroupModel.instance.fetchTeamExReply(t)},n.prototype.updateTeamExReply=function(t){console.log("【 通用组队 】 更新队伍信息..............",t),r.CommonGroupModel.instance.updateTeamExReply(t)},n.prototype.getApplicationsExReply=function(t){console.log("【 通用组队 】 获取申请列表返回..............",t),r.CommonGroupModel.instance.getApplicationsExReply(t)},n.prototype.inviteTeamerExReply=function(t){console.log("【 通用组队 】 邀请队员返回.................",t);var e=t[0];GlobalData.dispatcher.event("INVITE_TEAMER_EX_REPLY",[e]),CommonUtil.noticeError(e,"邀请发送成功")},n.prototype.approvalApplyExReply=function(t){console.log("【 通用组队 】 审批申请列表玩家返回..............",t),CommonUtil.noticeError(t[0]),t[0],this.getApplicationsEx()},n.prototype.updateTeamStateEx=function(t){console.log("【 通用组队 】 更新队伍状态..............",t),r.CommonGroupModel.instance.updateTeamStateEx(t?t[0]:null),r.CommonGroupModel.instance.updateTeamState()},n.prototype.UpdateTeamTargetChange=function(t){console.log("【 通用组队 】 更新队伍目标变动..............",t);var e=t[0],i=t[1],n=t[2];WindowManager.instance.open(1539,[e,i,n])},n.prototype.mateTeamerExReply=function(t){console.log("【 通用组队 】 匹配队员返回.................",t)},n.prototype.applyTeamerExReply=function(t){console.log("【 通用组队 】 申请入队返回.................",t),0!=t[0]?CommonUtil.noticeError(t[0]):CommonUtil.noticeError(0,"已向 【"+t[1]+"】发送组队申请",!1)},n.prototype.giveupMatchTeamerReply=function(t){console.log("【 通用组队 】 结束匹配队友返回.................",t)},n.prototype.answerInviteExReply=function(t){console.log("【 通用组队 】 同意别人的 组队邀请返回 .................",t),CommonUtil.noticeError(t[0]),a.teamInvite.TeamInviteModel.instance.delInvite(a.teamInvite.TeamInviteModel.instance.curInvite)},n.prototype.updateTeamOper=function(t){console.log("【 通用组队 】 队伍操作.................",t);var e=t[0],i=t[2],n=t[1];0===e?n===a.player.PlayerModel.instance.actorId?(CommonUtil.noticeError(0,"您成功离开了队伍!"),this.clearAllTeamDate()):CommonUtil.noticeError(0,i+"离开了队伍!",!0):1===e?n===a.player.PlayerModel.instance.actorId?(CommonUtil.noticeError(0,"成功加入队伍"),r.CommonGroupUtil.isOpenRoom()):CommonUtil.noticeError(0,i+"加入了队伍!"):2===e?n===a.player.PlayerModel.instance.actorId?(CommonUtil.noticeError(0,"您已被请出队伍!",!0),Laya.timer.callLater(this,this.clearAllTeamDate)):CommonUtil.noticeError(0,i+"被请离了队伍!",!0):3===e?n!=a.player.PlayerModel.instance.actorId&&CommonUtil.noticeError(0,i+"离线了!",!0):4===e&&n!=a.player.PlayerModel.instance.actorId&&CommonUtil.noticeError(0,i+"上线了!",!1)},n.prototype.clearAllTeamDate=function(){GlobalData.dispatcher.event("KICK_TEAMER_EX_REPLY"),r.CommonGroupModel.instance.clearAllTeamDate(),r.CommonGroupUtil.closeAllTeamAlert()},n.prototype.createTeamExReply=function(t){console.log("【 通用组队 】 创建队伍返回.................",t),CommonUtil.noticeError(t[0]),0===t[0]&&(r.CommonGroupUtil.isOpenRoom(),CommonUtil.noticeError(0,"队伍创建成功"))},n.prototype.disbandedTeamExReply=function(t){console.log("【 通用组队 】 解散队伍返回.................",t),CommonUtil.noticeError(t[0]),0===t[0]&&(CommonUtil.noticeError(0,"队伍已被解散",!0),this.clearAllTeamDate())},n.prototype.GetTeamList=function(t,e){console.log("【 通用组队 】 获取组队列表.....................teamType:"+t+" level:"+e),this.publish(4195122,[t,e])},n.prototype.TeamSetType=function(t){console.log("【 通用组队 】 队伍切换目标 目标类型为....................."+t[0]+"  层数为:"+t[1]),this.publish(4195123,t)},n.prototype.AnswerSetType=function(t){console.log("【 通用组队 】 回复切换目标 是否同意....................."+t),this.publish(4195124,[t])},n.prototype.teamSetTypeReply=function(t){console.log("【 通用组队 】 队伍切换目标返回.................",t),t[0]&&(CommonUtil.noticeError(t[0],""),r.CommonGroupUtil.changLose())},n.prototype.answerSetTypeReply=function(t){console.log("【 通用组队 】 回复切换目标返回.................",t),r.CommonGroupModel.instance.isHomeowners&&CommonUtil.noticeError(t[0],"已取消")},n.prototype.getTeamListReply=function(t){console.log("【 通用组队 】 队伍列表返回.................",t),r.CommonGroupModel.instance.getTeamListReply(t)},n.prototype.updateTeamSetAnswer=function(t){console.log("【 通用组队 】 更新切换答复.................",t),r.CommonGroupModel.instance.updateTeamSetAnswer(t)},n.prototype.updateTeamSetType=function(t){console.log("【 通用组队 】 通知切换目标.................",t),r.CommonGroupModel.instance.isGengSui?(console.log("【 通用组队 】 玩家设置了 自动跟随 直接同意.................",t),n.instance.AnswerSetType(!0)):r.CommonGroupModel.instance.isHomeowners||WindowManager.instance.open(1534,[t[0],t[1]])},n.prototype.teamEnterScene=function(){console.log("【 通用组队 】 队伍进入地图 请求....................."),CommonUtil.whetherInCopy()||this.publish(4195119,null)},n.prototype.twoConfirmation=function(){3===r.CommonGroupModel.instance.members.length?this.teamEnterScene():this.checkTeamEnter()},n.prototype.checkTeamEnter=function(){console.log("【 通用组队 】 检测队伍 请求....................."),this.publish(4195121,null)},n.prototype.teamSetMode=function(t){console.log("【 通用组队 】 队伍切换模式 请求....................."+t),this.publish(4195120,[t])},n.prototype.teamEnterSceneReply=function(t){console.log("【 通用组队 】 队伍进入地图返回..............",t),CommonUtil.noticeError(t[0])},n.prototype.GetTeamSetInfoReply=function(t){console.log("【 通用组队 】 获取队伍设置信息返回..............",t),r.CommonGroupModel.instance.autoJoin=t[0],r.CommonGroupModel.instance.autoAccept=t[1],GlobalData.dispatcher.event("GET_TEAM_SET_INFO_REPLY")},n.prototype.SetAutoJoinStateReply=function(t){console.log("【 通用组队 】 设置自动加入状态返回..............",t),CommonUtil.noticeError(t[0])},n.prototype.teamSetModeReply=function(t){console.log("【 通用组队 】 队伍切换模式返回..............",t),t[0]&&(CommonUtil.noticeError(t[0]),GlobalData.dispatcher.event("FETCH_TEAMEX_REPLY_UPDATE"))},n.prototype.checkTeamEnterReply=function(t){if(console.log("【 通用组队 】检查队伍信息返回 返回..............",t),t){for(var e=t[0],i=[],n=!1,s=0;s<e.length;s++){var o=e[s];o&&(o[2]<=0&&i.push(o[1]),o[0]===a.player.PlayerModel.instance.actorId&&(n=!0))}r.CommonGroupModel.instance.isHomeowners?0<i.length?CommonUtil.noticeError(0,"玩家【"+i[0]+"】次数不足",!0):this.teamEnterSceneFun():n&&CommonUtil.noticeError(0,"您的次数不足",!0)}},n.prototype.teamEnterSceneFun=function(){var t=this,e=Handler.create(this,function(){}),i=Handler.create(this,function(){t.teamEnterScene()});2===r.CommonGroupModel.instance.teamType?CommonUtil.alert("提示","此为高难度副本,队伍人数未满,是否确定开始挑战？",[i,"确认"],[e,"取消"]):4===r.CommonGroupModel.instance.teamType?CommonUtil.alert("提示","此为高难度副本,队伍人数未满,是否确定开始挑战？",[i,"确认"],[e,"取消"]):this.teamEnterScene()},i=n,r.CommonGroupCtrl=i}(modules=modules||{}),function(i){var n,e,t,s;function o(){var t=e.call(this)||this;return t.isOpen=!1,t}n=i.phone_qq_red_bag||(i.phone_qq_red_bag={}),t=i.core.BaseCtrl,e=t,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.showOpen=function(){this.isOpen||(n.PhoneQQRedBagModel.instance.backstageState&&n.PhoneQQRedBagModel.instance.cfgId&&WindowManager.instance.open(1526),this.isOpen=!0)},o.prototype.setup=function(){this.subscribe(16792526,this.getQQRedTaskReply),this.subscribe(16792527,this.getQQRedMoneyReply),this.subscribe(16792528,this.updateQQRedTask),this.subscribe(16792529,this.updateQQRedMoney),this.subscribe(16792530,this.drawQQRedPackageReply),this.subscribe(16792531,this.updateQQRedState),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getQQRedPackage(),this.getQQRedMoney(),this.isQQRedpacket()},o.prototype.isQQRedpacket=function(){PlatParams.isQQRedpacket(function(t){n.PhoneQQRedBagModel.instance.backstageState=t})},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(1023==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(1023))return this.isQQRedpacket(),this.getQQRedPackage(),this.getQQRedMoney(),void n.PhoneQQRedBagModel.instance.setActonOpen()},o.prototype.getQQRedTaskReply=function(t){n.PhoneQQRedBagModel.instance.getQQRedTaskReply(t)},o.prototype.getQQRedMoneyReply=function(t){n.PhoneQQRedBagModel.instance.getQQRedMoneyReply(t)},o.prototype.updateQQRedTask=function(t){n.PhoneQQRedBagModel.instance.updateQQRedTask(t)},o.prototype.updateQQRedMoney=function(t){n.PhoneQQRedBagModel.instance.updateQQRedMoney(t)},o.prototype.updateQQRedState=function(t){n.PhoneQQRedBagModel.instance.updateQQRedState(t)},o.prototype.drawQQRedPackageReply=function(t){0===t[0]&&WindowManager.instance.open(1528,this.taskID),CommonUtil.noticeError(t[0],"领取成功")},o.prototype.drawQQRedPackage=function(t){this.taskID=t,this.publish(2111163,[t])},o.prototype.getQQRedPackage=function(){this.publish(2111162,null)},o.prototype.getQQRedMoney=function(){this.publish(7341632,null)},s=o,n.PhoneQQRedBagCtrl=s}(modules=modules||{}),function(i){var e,t,n,s;function o(){return t.call(this)||this}e=i.three_seven_box||(i.three_seven_box={}),n=i.core.BaseCtrl,t=n,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16792229,this.get37BoxInfoReply),this.subscribe(16792230,this.draw37BoxRewardReply),GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),this.get37BoxInfo()},o.prototype.get37BoxInfoReply=function(t){e.ThreeSevenBoxModel.instance.get37BoxInfoReply(t)},o.prototype.draw37BoxRewardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(1025==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(1025))return void this.get37BoxInfo()},o.prototype.get37BoxInfo=function(){this.publish(2106290,null)},o.prototype.draw37BoxReward=function(){this.publish(2106291,null)},o.prototype.doExtraAction=function(){PlatParams.jump37BoxDownload()},s=o,e.ThreeSevenBoxCtrl=s}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.spring_scenery_continuous_pay||(e.spring_scenery_continuous_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(1035==t[e]&&s.instance.getFuncIsOpen(1035))return void i.SpringSceneryContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log("梨园 连续充值 领取奖励 请求...............:   "+t),this.publish(2106270,[e.festival.FestivalModel.instance.SpringSceneryType,t])},o=a,i.SpringSceneryContinuousPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.spring_scenery_cumulate_pay||(e.spring_scenery_cumulate_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(1036==t[e]&&s.instance.getFuncIsOpen(1036))return void i.SpringSceneryCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log("梨园 累计充值 领取奖励 请求...............:   "+t),this.publish(2106268,[e.festival.FestivalModel.instance.SpringSceneryType,t])},o=a,i.SpringSceneryCumulatePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.spring_scenery_single_pay||(e.spring_scenery_single_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(1037==t[e]&&s.instance.getFuncIsOpen(1037))return void i.SpringScenerySinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 梨园 单笔充值 领取奖励 请求...............:   "+t),this.publish(2106267,[e.festival.FestivalModel.instance.SpringSceneryType,t])},o=a,i.SpringScenerySinglePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.spring_scenery_seven_days_consume||(e.spring_scenery_seven_days_consume={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(1038==t[e]&&s.instance.getFuncIsOpen(1038))return void i.SpringScenerySevenDaysConsumeModel.instance.setRP()},a.prototype.DrawFestCostTotal=function(t){console.log("梨园 七日消费 领取奖励 请求...............:   "+t),this.publish(2106272,[e.festival.FestivalModel.instance.SpringSceneryType,t])},o=a,i.SpringScenerySevenDaysConsumeCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,p,c,u,d,m,y,f,g,_,v,b,T,C,I,B,x,S,P,M,w,E,A,R,k,L,U,H,G,O,D;function N(){}e=t.subpack1||(t.subpack1={}),i=t.strongest_marry.StrongestMarryCtrl,n=t.nether_world.NetherWorldCtrl,s=t.soul_war.SoulWarCtrl,o=t.team_warfare.TeamWarfareCtrl,a=t.space_travel_continuous_pay.SpaceTravelContinuousPayCtrl,r=t.space_travel_single_pay.SpaceTravelSinglePayCtrl,l=t.space_travel_treasure.SpaceTravelTreasureCtrl,h=t.space_travel_cumulate_pay.SpaceTravelCumulatePayCtrl,p=t.space_travel_seven_days_consume.SpaceTravelSevenDaysConsumeCtrl,c=t.welfare_place.WelfarePlaceCtrl,u=t.perfectest_ten_single_pay.PerfectestTenSinglePayCtrl,d=t.perfectest_ten_continuous_pay.PerfectestTenContinuousPayCtrl,m=t.perfectest_ten_cumulate_pay.PerfectestTenCumulatePayCtrl,y=t.perfectest_ten_pay_rank.PerfectestTenPayRankCtrl,f=t.weekCard.WeekCardCtrl,g=t.bindPhone.BindPhoneCtrl,_=t.tianshu.TianshuCtrl,v=t.trahman_boss.TrahmanBossCtrl,b=t.brahma_buy.BrahmaBuyCtrl,T=t.brahma_pay.BrahmaPayCtrl,C=t.sky_book_buy.SkyBookBuyCtrl,I=t.sky_book_pay.SkyBookPayCtrl,B=t.brahma_equip.BrahmaEquipCtrl,x=t.direct_ex.DirectExCtrl,S=t.seal_deity.SealDeityCtrl,P=t.halo.HaloCtrl,M=t.send_q_coins.SendQCoinsCtrl,w=t.nian_end_one_buy.NianEndOneBuyCtrl,E=t.nian_end_happy_seven_days_pay.NianEndHappySevenDaysPayCtrl,A=t.yearEndRank.YearEndRankCtrl,R=t.common_group.CommonGroupCtrl,k=t.phone_qq_red_bag.PhoneQQRedBagCtrl,L=t.three_seven_box.ThreeSevenBoxCtrl,U=t.spring_scenery_continuous_pay.SpringSceneryContinuousPayCtrl,H=t.spring_scenery_cumulate_pay.SpringSceneryCumulatePayCtrl,G=t.spring_scenery_single_pay.SpringScenerySinglePayCtrl,O=t.spring_scenery_seven_days_consume.SpringScenerySevenDaysConsumeCtrl,N.init=function(){i.instance.setup(),n.instance.setup(),s.instance.setup(),o.instance.setup(),a.instance.setup(),r.instance.setup(),l.instance.setup(),h.instance.setup(),p.instance.setup(),c.instance.setup(),u.instance.setup(),m.instance.setup(),d.instance.setup(),y.instance.setup(),_.instance.setup(),v.instance.setup(),b.instance.setup(),T.instance.setup(),C.instance.setup(),I.instance.setup(),B.instance.setup(),S.instance.setup(),f.instance.setup(),g.instance.setup(),P.instance.setup(),t.hudie_platform.HudiePlatformCtrl.instance.queryExtraStatus(),M.instance.setup(),x.instance.setup(),w.instance.setup(),E.instance.setup(),A.instance.setup(),R.instance.setup(),k.instance.setup(),L.instance.setup(),U.instance.setup(),H.instance.setup(),G.instance.setup(),O.instance.setup()},D=N,e.Sub1ModulesUtil=D}(modules=modules||{}),function(i){var n,s,o,a,r,t;function e(){return null!==s&&s.apply(this,arguments)||this}n=i.strongest_marry||(i.strongest_marry={}),o=i.common.SimpleList,a=i.windCloud.PvpBtnItem,r=i.common.CustomList,s=ui.StrongestMarryViewUI,__extends(e,s),e.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=r.create("h",50,675,620,120,i.yunmeng.YunMengItem,30,1),this.addChild(this._list),this._list.shiftingX=20,this._tabList=o.create(a,158,172,2,1,114),this._tabList.size(430,172),this._tabList.pos((this.width-this._tabList.width)/2,988),this.addChild(this._tabList),CommonUtil.setHTMLPro(this.timeTxtHTML,"#1f304d","SimHei",24,"center");var t=i.union_war.UnionWarModel.instance.getWarCopyTimeStr(18),e="活动时间:<span style='color:#168a17'>周"+i.union_war.UnionWarModel.instance.getStr(t[0])+t[1]+"-"+t[2]+"</span>";this.timeTxtHTML.innerHTML=e,this._btnClip=CustomClip.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.box.addChild(this._btnClip),this._btnClip.pos(this.createRoomBtn.x-6,this.createRoomBtn.y-8,!0),CustomClip.thisStop(this._btnClip),this._btnClip1=CustomClip.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.box.addChild(this._btnClip1),this._btnClip1.pos(this.guessingBtn.x-6,this.guessingBtn.y-8,!0),CustomClip.thisStop(this._btnClip1)},e.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoEvt(this._tabList,"select",this,this.onTabChange,[1]).onAutoClick(this.rankBtn,this,this.rankBtnHandler).onAutoClick(this.rankRewardBtn,this,this.rankRewardBtnHandler).onAutoClick(this.helpBtn,this,this.helpBtnHandler).onAutoClick(this.createRoomBtn,this,this.createRoomBtnHandler).onAutoClick(this.guessingBtn,this,this.guessingBtnHandler).onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.showUI).onAutoGlobalEvt("GET_COUPLE_BEST_GUESS_LIST_REPLY",this,this.showUI).onAutoGlobalEvt("UPDATE_COUPLE_BEST_ROUND_INFO",this,this.showUI),this.regAutoRP(this.rpImg,["strongestMarryRP1"]),this.regAutoRP(this.rpImg1,["strongestMarryRP2"])},e.prototype.onTabChange=function(t){switch(this._tabList.selectedData){case 779:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1183);break;case 901:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1361)}this._tabList.selectedIndex!=t&&(this._tabList.selectedIndex=t)},e.prototype.onOpened=function(){s.prototype.onOpened.call(this),this._tabList.datas=[779,901],this._tabList.selectedIndex=1,n.StrongestMarryCtrl.instance.ReqCoupleBestRoundInfo(),n.StrongestMarryCtrl.instance.GetCoupleBestGuessList(),this.showRewardList(),this.showUI()},e.prototype.showUI=function(){var t=3===n.StrongestMarryModel.instance.copyState;this.box.visible=!t,this.tipsText.visible=t,CustomClip.thisStop(this._btnClip),CustomClip.thisStop(this._btnClip1),t||(n.StrongestMarryModel.instance.isOpen()&&n.StrongestMarryModel.instance.isHaveQualifications()&&!n.StrongestMarryModel.instance.isCanGuess()?CustomClip.thisPlay(this._btnClip):CustomClip.thisStop(this._btnClip),!n.StrongestMarryModel.instance.isGuess&&n.StrongestMarryModel.instance.isCanGuess()?CustomClip.thisPlay(this._btnClip1):CustomClip.thisStop(this._btnClip1))},e.prototype.rankBtnHandler=function(){WindowManager.instance.open(1359)},e.prototype.rankRewardBtnHandler=function(){WindowManager.instance.open(1360)},e.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19057)},e.prototype.createRoomBtnHandler=function(){n.StrongestMarryModel.instance.isOpen()?n.StrongestMarryModel.instance.isHaveQualifications()?n.StrongestMarryCtrl.instance.CoupleBestEnter():CommonUtil.noticeError(0,"仙缘竞技前10名才可参加",!0):n.StrongestMarryCtrl.instance.CoupleBestEnter()},e.prototype.guessingBtnHandler=function(){n.StrongestMarryModel.instance.isOpen()?0!==n.StrongestMarryModel.instance.copyState||0!==n.StrongestMarryModel.instance.guessMarryList.length?n.StrongestMarryModel.instance.isCanGuess()?WindowManager.instance.open(1358):CommonUtil.noticeError(0,"决出冠军仙缘后才可竞猜",!0):CommonUtil.noticeError(0,"  活动无人参与，不可竞猜",!0):CommonUtil.noticeError(0,"活动尚未开启",!0)},e.prototype.showRewardList=function(){this._list.datas=n.StrongestMarryModel.instance.dateArrItem;var t=this._list.datas.length,e=100*(t=5<t?5:t)+(t-1)*this._list.spaceX+this._list.shiftingX;this._list.x=(this.width-e)/2},e.prototype.close=function(){s.prototype.close.call(this)},e.prototype.destroy=function(t){void 0===t&&(t=!0),this._tabList=this.destroyElement(this._tabList),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),this._btnClip1=this.destroyElement(this._btnClip1),s.prototype.destroy.call(this,t)},t=e,n.StrongestMarryPanel=t}(modules=modules||{}),function(i){var n,t,e;function s(){return null!==t&&t.apply(this,arguments)||this}n=i.strongest_marry||(i.strongest_marry={}),t=ui.StrongestMarryCopyCenterViewUI,__extends(s,t),s.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=0,this.zOrder=-2,this.bottom=205,this.closeByOthers=!1,this.layer=3,this.skillItem.dotImg.visible=this.skillItem.levBox.visible=!1,this.skillItem1.dotImg.visible=this.skillItem1.levBox.visible=!1},s.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_COUPLE_BEST_MAP_SKILL",this,this.showUI).onAutoGlobalEvt("COUPLE_BEST_CHOOSE_SKILL_REPLY",this,this.showUI).onAutoClick(this.skillItem1,this,this.btnHandler).onAutoClick(this.skillItem,this,this.btnHandler1)},s.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.showUI()},s.prototype.btnHandler=function(){if(n.StrongestMarryModel.instance.ispreliminaryCoupleBestr())if(i.strongest_marry.StrongestMarryModel.instance.isStart)if(this.skillItem1.gray)CommonUtil.noticeError(0,"每场战斗只能使用1次技能",!0);else{var t=n.StrongestMarryModel.instance.skillStateAndIdTable[PlayerModel.instance.actorId];if(t){var e=t[0];n.StrongestMarryCtrl.instance.UseSkill(CommonUtil.getSkillPureIdById(e))}else CommonUtil.noticeError(0,"技能信息无法获取",!0)}else CommonUtil.noticeError(0,"战斗未开始",!0);else CommonUtil.noticeError(0,"战斗场景才可以使用",!0)},s.prototype.btnHandler1=function(){n.StrongestMarryModel.instance.ispreliminaryCoupleBestr()?CommonUtil.noticeError(0,"仙缘技能只能由仙缘自己释放"):CommonUtil.noticeError(0,"仙缘携带技能只能由仙缘自己选择")},s.prototype.showUI=function(){if(this.skillItem1.gray=this.skillItem.gray=!1,n.StrongestMarryModel.instance.ispreliminaryCoupleBestr()){var t=n.StrongestMarryModel.instance.skillStateAndIdTable[PlayerModel.instance.actorId],e=n.StrongestMarryModel.instance.skillStateAndIdTable[i.marry.MarryModel.instance.halfRoleID];this.setSkillItemCpy(e),this.setSkillItemCpy1(t)}else this.setSkillItem(n.StrongestMarryModel.instance.marrySkillId),this.setSkillItem1(n.StrongestMarryModel.instance.mySkillId)},s.prototype.setSkillItemCpy=function(t){t&&t[0]?(this.setSkillItem(t[0]),this.skillItem.gray=1===t[1]):this.setSkillItem(0)},s.prototype.setSkillItemCpy1=function(t){t&&t[0]?(this.setSkillItem1(t[0]),this.skillItem1.gray=1===t[1]):this.setSkillItem1(0)},s.prototype.setSkillItem=function(t){if(t){var e=SkillPureCfg.instance.getCfgById(CommonUtil.getSkillPureIdById(t));if(!e)return;this.skillItem.iconImg.skin="assets/icon/skill/"+e[6]+".png"}else this.skillItem.iconImg.skin="strongest_marry/iconbg_xmz_jz.png";this.skillItem.iconImg.visible=!0},s.prototype.setSkillItem1=function(t){if(t){var e=SkillPureCfg.instance.getCfgById(CommonUtil.getSkillPureIdById(t));if(!e)return;this.skillItem1.iconImg.skin="assets/icon/skill/"+e[6]+".png"}else this.skillItem1.iconImg.skin="strongest_marry/iconbg_xmz_jz.png";this.skillItem1.iconImg.visible=!0},e=s,n.StrongestMarryCopyCenterPanel=e}(modules=modules||{}),function(t){var i,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}i=t.strongest_marry||(t.strongest_marry={}),e=ui.StrongestMarryCopyLeftViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.left=5,this.bottom=534,this.closeByOthers=!1,this.layer=3,this._allPlayerInfo=[this.item1,this.item2]},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_COUPLE_BEST_MAP_INFO",this,this.updatePlayers)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updatePlayers()},s.prototype.updatePlayers=function(){for(var t=0;t<this._allPlayerInfo.length;t++)(e=this._allPlayerInfo[t]).data=null;for(t=0;t<i.StrongestMarryModel.instance.teamer1.length;t++){var e=i.StrongestMarryModel.instance.teamer1[t];this._allPlayerInfo[t].data=e}},n=s,i.StrongestMarryCopyLeftPanel=n}(modules=modules||{}),function(t){var s,e,i;function n(){return null!==e&&e.apply(this,arguments)||this}s=t.strongest_marry||(t.strongest_marry={}),e=ui.StrongestMarryCopyRightBottonViewUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=22,this.bottom=466,this.closeByOthers=!1,this.layer=3,CommonUtil.setHTMLPro(this.HTML1,"#50ff28","SimHei",24),CommonUtil.setHTMLPro(this.HTML2,"#FFFFFF","SimHei",24),CommonUtil.setHTMLPro(this.HTML3,"#FFFFFF","SimHei",24),this._btnClip=CustomClip.createAndPlay("assets/effect/activityEnter.atlas","activityEnter",16),this.rankBox.addChildAt(this._btnClip,2),this._btnClip.pos(9,9,!0),CustomClip.thisStop(this._btnClip)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_COUPLE_BEST_ROUND_INFO",this,this.showUI).onAutoGlobalEvt("UPDATE_COUPLE_BEST_INCOME",this,this.showUI).onAutoClick(this.guessBtn,this,this.guessBtnHandler).onAutoClick(this.rankBox,this,this.rankBoxHandler).regAutoRP(this.rpImg,["strongestMarryRP1"]).onAutoGlobalEvt("UPDATE_COUPLE_BEST_ROUND_INFO",this,this.playerCustomClip)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.playerCustomClip(),this.showUI()},n.prototype.playerCustomClip=function(){s.StrongestMarryModel.instance.ispreliminaryCoupleBestr()?CustomClip.thisStop(this._btnClip):s.StrongestMarryModel.instance.readyEndTime>GlobalData.serverTime?CustomClip.thisPlay(this._btnClip):CustomClip.thisStop(this._btnClip)},n.prototype.guessBtnHandler=function(){s.StrongestMarryModel.instance.isOpen()?0!==s.StrongestMarryModel.instance.copyState||0!==s.StrongestMarryModel.instance.guessMarryList.length?s.StrongestMarryModel.instance.isCanGuess()?WindowManager.instance.open(1358):CommonUtil.noticeError(0,"决出冠军仙缘后才可竞猜",!0):CommonUtil.noticeError(0,"  活动无人参与，不可竞猜",!0):CommonUtil.noticeError(0,"活动尚未开启",!0)},n.prototype.rankBoxHandler=function(){CustomClip.thisStop(this._btnClip),WindowManager.instance.open(1353)},n.prototype.showUI=function(){var t=s.StrongestMarryModel.instance.winTimes,e=s.StrongestMarryModel.instance.loseTimes;t=t<0?0:t,e=e<0?0:e;var i=s.StrongestMarryModel.instance.totalExp,n=s.StrongestMarryModel.instance.totalGold;3<=e&&CustomClip.thisStop(this._btnClip),0!==s.StrongestMarryModel.instance.copyState&&2!==s.StrongestMarryModel.instance.copyState||CustomClip.thisStop(this._btnClip),this.HTML1.innerHTML=0===t&&0===e?"当前战绩:未有记录":3<=e?"当前战绩:<span style='color:#ff3e3e'>"+t+"胜"+e+"败</span>":"当前战绩:"+t+"胜"+e+"败",this.HTML2.innerHTML="累计经验:"+(i?CommonUtil.bigNumToString(i):0),this.HTML3.innerHTML="累计金币:"+(n?CommonUtil.bigNumToString(n):0)},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},i=n,s.StrongestMarryCopyRightBottonPanel=i}(modules=modules||{}),function(e){var i,n,t;function s(){var t=null!==n&&n.apply(this,arguments)||this;return t._bolll=!1,t}i=e.strongest_marry||(e.strongest_marry={}),n=ui.StrongestMarryCopyRightViewUI,__extends(s,n),s.prototype.initialize=function(){n.prototype.initialize.call(this),this.zOrder=-1,this.right=8,this.bottom=534,this.closeByOthers=!1,this.layer=3,this._allPlayerInfo=[this.item1,this.item2]},s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_COUPLE_BEST_MAP_INFO",this,this.updatePlayers),this.onAutoClick(this,this,this.stopTwenn)},s.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.stopTwenn(),this.updatePlayers()},s.prototype.playerHarl=function(){var t=e.strongest_marry.StrongestMarryModel.instance.getEquivalenteEnemy();console.log("寻找玩家idEnery:",t),PlayerModel.instance.selectTarget(2,t||-1)},s.prototype.updatePlayers=function(){this._bolll||(this._bolll=!0);for(var t=0;t<this._allPlayerInfo.length;t++)(e=this._allPlayerInfo[t]).data=null;for(t=0;t<i.StrongestMarryModel.instance.teamer2.length;t++){var e=i.StrongestMarryModel.instance.teamer2[t];this._allPlayerInfo[t].data=e}},s.prototype.stopTwenn=function(){this.tipsBox.visible=!1,this._tweenLeft3&&this._tweenLeft3.stop(),this._tweenLeft4&&this._tweenLeft4.stop(),this.tipsBox.x=23},s.prototype.close=function(){n.prototype.close.call(this),this._bolll=!1,this._tweenLeft3&&this._tweenLeft3.stop(),this._tweenLeft4&&this._tweenLeft4.stop(),Laya.timer.clear(this,this.playerHarl)},s.prototype.destroy=function(){this._tweenLeft3&&(this._tweenLeft3.stop(),this._tweenLeft3=null),this._tweenLeft4&&(this._tweenLeft4.stop(),this._tweenLeft4=null),n.prototype.destroy.call(this)},s.prototype.playerTwenn=function(){var t=this;this._tweenLeft4=TweenJS.create(this.tipsBox).to({x:this.tipsBox.x+40},300).onComplete(function(){t._tweenLeft3.start()}),this._tweenLeft3=TweenJS.create(this.tipsBox).to({x:this.tipsBox.x-40},300).onComplete(function(){t._tweenLeft4.start()}),this._tweenLeft3.start(),this.tipsBox.visible=!0},t=s,i.StrongestMarryCopyRightPanel=t}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.strongest_marry||(t.strongest_marry={}),i=ui.StrongestMarryCenterTipsViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.top=212,this.closeByOthers=!1,this.layer=3,CommonUtil.setHTMLPro(this.timeTxtHTML,"#FFFFFF","SimHei",24,"center"),CommonUtil.setHTMLPro(this.roundHTML,"#ffec7c","SimHei",24,"center")},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.StrongestMarryCtrl.instance.ReqCoupleBestRoundInfo(),this.showUI()},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_COUPLE_BEST_ROUND_INFO",this,this.showUI)},s.prototype.showUI=function(){2===e.StrongestMarryModel.instance.copyState||0===e.StrongestMarryModel.instance.copyState?(Laya.timer.clear(this,this.timeHarler),this.roundHTML.innerHTML="已决出冠军,请竞猜前三仙缘",this.timeTxtHTML.innerHTML="竞猜剩余时间<span style='color:#ff3e3e'>0</span>秒"):this.roundHTML.innerHTML="当前轮次:<span style='color:#ffec7c'>"+e.StrongestMarryModel.instance.round+"</span>",Laya.timer.loop(1e3,this,this.timeHarler),this.timeHarler()},s.prototype.timeHarler=function(){if(e.StrongestMarryModel.instance.readyEndTime>GlobalData.serverTime){var t=CommonUtil.timeStampToS(e.StrongestMarryModel.instance.readyEndTime);2===e.StrongestMarryModel.instance.copyState||0===e.StrongestMarryModel.instance.copyState?this.timeTxtHTML.innerHTML="竞猜剩余时间<span style='color:#ff3e3e'>"+t+"</span>秒":this.timeTxtHTML.innerHTML="本轮开始匹配时间<span style='color:#ff3e3e'>"+t+"</span>秒"}else Laya.timer.clear(this,this.timeHarler),2===e.StrongestMarryModel.instance.copyState||0===e.StrongestMarryModel.instance.copyState?(this.roundHTML.innerHTML="已决出冠军,请竞猜前三仙缘",this.timeTxtHTML.innerHTML="竞猜剩余时间<span style='color:#ff3e3e'>0</span>秒"):(this.roundHTML.innerHTML="当前轮次:<span style='color:#ffec7c'>"+e.StrongestMarryModel.instance.round+"</span>",this.timeTxtHTML.innerHTML="<span style='color:#50ff28'>正在匹配中......</span>")},s.prototype.close=function(){Laya.timer.clear(this,this.timeHarler),t.strongest_marry.StrongestMarryModel.instance.isStart=!1,i.prototype.close.call(this)},n=s,e.StrongestMarryCenterTipsPanel=n}(modules=modules||{}),function(t){var s,e,i,n;function o(){return null!==e&&e.apply(this,arguments)||this}s=t.strongest_marry||(t.strongest_marry={}),i=t.common.SimpleList,e=ui.StrongestMarryRankAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(s.StrongestMarryRankItem,571,89),this._list.size(571,602),this.listBox.addChild(this._list),this._list.pos(0,0,!0),CommonUtil.setHTMLPro(this.tipTxt,"#1f304d","SimHei",22,"center"),this._rankNumList=new Array;for(var t=1;t<=60;t++)this._rankNumList.push(t)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GET_COUPLE_BEST_RANK_REPLY",this,this.showUI)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.StrongestMarryCtrl.instance.GetCoupleBestRank(),this.showUI()},o.prototype.showUI=function(){this.tipTxt.innerHTML="至少参与过<span style='color:#b15315'>1</span>场匹配战斗才可上榜",this._list.datas=this._rankNumList;var t=0,e=0,i=0;if(s.StrongestMarryModel.instance.myMarryRankDate){t=s.StrongestMarryModel.instance.myMarryRankDate[1];var n=s.StrongestMarryModel.instance.myMarryRankDate[4];e=n[0],i=n[1]}this.myRankNumText.text=t?"我的排名:"+t:"我的排名:未上榜",this.participationNum.text=0===e&&0===i?"战绩:未有记录":"战绩:"+e+"胜"+i+"败"},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n=o,s.StrongestMarryRankAlert=n}(modules=modules||{}),function(t){var e,i;function n(){this._cfg=[],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){for(var t=GlobalData.getConfig("couple_best_rank"),e=0;e<t.length;e++){var i=t[e];0===i[0]&&this._cfg.push(i)}},Object.defineProperty(n.prototype,"cfg",{get:function(){return this._cfg},enumerable:!0,configurable:!0}),i=n,e.CoupleBestRankCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.strongest_marry||(t.strongest_marry={}),n=t.config.CoupleBestRankCfg,s=t.common.SimpleList,i=ui.StrongestMarryRankRewardAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create(e.StrongestMarryRankRewardItem,571,115),this._list.size(571,663),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.showUI()},a.prototype.showUI=function(){this._list.datas=n.instance.cfg},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.StrongestMarryRankRewardAlert=o}(modules=modules||{}),function(t){var i,e,n,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._isFirst=!0,t._times=500,t._isCan=!0,t}i=t.strongest_marry||(t.strongest_marry={}),n=t.common.SimpleList,e=ui.StrongestMarryChoiceSkillAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(i.StrongestMarryChoiceSkillItem,115,130,1,4,15,3),this._list.size(505,406),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list.canSelectSameItem=!1,CommonUtil.setHTMLPro(this.tipsHtml,"#1f304d","SimHei",22,"center"),CommonUtil.setHTMLPro(this.tipHtml1,"#1f304d","SimHei",22,"center"),this.tipHtml1.innerHTML="请选择其中的1个技能，可在战斗<span style='color:#b15315'>任意时刻</span>使用<span style='color:#b15315'>一次</span>"},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("COUPLE_BEST_CHOOSE_SKILL_REPLY",this,this.showUI).onAutoEvt(this._list,"select",this,this.selectHandler)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._list.datas=i.StrongestMarryModel.instance.allSkillId,this.showUI()},o.prototype.selectHandler=function(){var t=this;if(-1!=this._list.selectedIndex){var e=SkillPureCfg.instance.getCfgById(CommonUtil.getSkillPureIdById(this._list.selectedData));e&&(this.tipsHtml.innerHTML=e[5],this._isFirst||(this._isCan?(this._isCan=!1,i.StrongestMarryCtrl.instance.CoupleBestChooseSkill(this._list.selectedData),CommonUtil.noticeError(0,"切换技能成功"),Laya.timer.once(this._times,this,function(){t._isCan=!0})):CommonUtil.noticeError(0,"操作过于频繁",!0)),this._isFirst=!1)}else this.tipsHtml.innerHTML="未选择技能"},o.prototype.showUI=function(){var t=i.StrongestMarryModel.instance.mySkillId!=this._list.selectedData;if(this._isFirst||t){var e=this._list.datas.indexOf(i.StrongestMarryModel.instance.mySkillId);this._list.selectedIndex=null!=e?e:-1}},o.prototype.close=function(){e.prototype.close.call(this),this._isCan=!0,this._isFirst=!0},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s=o,i.StrongestMarryChoiceSkillAlert=s}(modules=modules||{}),function(t){var s,e,i,n,o;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.strongest_marry||(t.strongest_marry={}),i=laya.events.Event,n=t.common.SimpleList,e=ui.StrongestMarryGuessAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(s.StrongestMarryGuessItem,294,95,1,2,8,8),this._list.size(596,481),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list.multiSelectable=!0,CommonUtil.setHTMLPro(this.tipsHtml,"#1f304d","SimHei",22,"center")},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GET_COUPLE_BEST_GUESS_LIST_REPLY",this,this.showUI).onAutoEvt(this._list,i.SELECT,this,this.selectHandler).onAutoClick(this.sureBtn,this,this.sureBtnHandler)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.StrongestMarryCtrl.instance.GetCoupleBestGuessList(),this.showUI()},a.prototype.close=function(){e.prototype.close.call(this),this._list.clearMultiSelectedIndices()},a.prototype.sureBtnHandler=function(){if(0!==this._list.datas.length)if(s.StrongestMarryModel.instance.isGuess)CommonUtil.noticeError(0,"您已竞猜",!0);else if(this._list.multiSelectedIndices.length<s.StrongestMarryModel.instance.guessChoiceMaxNum)CommonUtil.noticeError(0,s.StrongestMarryModel.instance.guessChoiceMaxNum<3?"请先选择完所有仙缘":"请您选择"+s.StrongestMarryModel.instance.guessChoiceMaxNum+"组选手进行竞猜",!0);else{for(var t=[],e=0;e<this._list.multiSelectedIndices.length;e++){var i=this._list.multiSelectedIndices[e],n=this._list.datas[i][0][0];t.push(n)}s.StrongestMarryCtrl.instance.CoupleBestGuess(t)}else CommonUtil.noticeError(0,"活动无人参与，不可竞猜",!0)},a.prototype.selectHandler=function(){if(this._list.multiSelectedIndices.length>s.StrongestMarryModel.instance.guessChoiceMaxNum)return CommonUtil.noticeError(0,"您当前已选择"+s.StrongestMarryModel.instance.guessChoiceMaxNum+"组仙缘",!0),void(this._list.selectedIndex=this._list.multiSelectedIndices[this._list.multiSelectedIndices.length-1]);s.StrongestMarryModel.instance.isGuess?CommonUtil.noticeError(0,"您已竞猜",!0):this.showUI1()},a.prototype.showUI1=function(){var t=s.StrongestMarryModel.instance.isGuess?s.StrongestMarryModel.instance.guessMarryIds.length:this._list.multiSelectedIndices.length,e=s.StrongestMarryModel.instance.guessChoiceMaxNum;this.text2.text=(e<t?e:t)+"/"+s.StrongestMarryModel.instance.guessChoiceMaxNum,this.text2.color=e<=t?"#ff3e3e":"#168a17"},a.prototype.showUI=function(){s.StrongestMarryModel.instance.guessMarryList.sort(this.sortFun.bind(this)),this._list.datas=s.StrongestMarryModel.instance.guessMarryList,s.StrongestMarryModel.instance.guessChoiceMaxNum=3<=this._list.datas.length?3:0!=this._list.datas.length?this._list.datas.length:3,this.sureBtn.label=s.StrongestMarryModel.instance.isGuess?"已竞猜":"确认",this.tipsHtml.innerHTML="请竞猜前3名仙缘，每猜中1组可获得 <span style='color:#b15315'>"+s.StrongestMarryModel.instance.guessReward[1]+"</span>\n            "+CommonUtil.getNameByItemId(s.StrongestMarryModel.instance.guessReward[0])+"\n           ",this.showUI1(),0===s.StrongestMarryModel.instance.guessMarryList.length&&this.close()},a.prototype.sortFun=function(t,e){var i=t[0][5],n=t[0][6],s=0<i,o=e[0][5],a=e[0][6],r=0<o,l=t[1][5],h=t[1][6],p=0<l,c=e[1][5],u=e[1][6],d=0<c;return s&&r?i===o?p&&d?0<c-l?1:-1:p&&!d?-1:!p&&d?1:0<u-h?1:-1:0<o-i?1:-1:s&&!r?-1:!s&&r?1:0<a-n?1:-1},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},o=a,s.StrongestMarryGuessAlert=o}(modules=modules||{}),function(t){var n,e,i;function s(){return e.call(this)||this}n=t.nether_world||(t.nether_world={}),e=ui.NetherWorldCopyRightViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=459,this.closeByOthers=!1,this.layer=3,this._allPlayerInfo=[this.item1,this.item2,this.item3]},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_EMPTYER_INFO",this,this.showUI)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI()},s.prototype.showUI=function(){for(var t=0;t<this._allPlayerInfo.length;t++)(e=this._allPlayerInfo[t])&&(e.visible=!1);for(t=0;t<n.NetherWorldModel.instance.emptyer.length;t++){var e=n.NetherWorldModel.instance.emptyer[t],i=this._allPlayerInfo[t];e&&i?(i&&(i.visible=!0),i.data=e):i&&(i.visible=!1)}},s.prototype.close=function(){e.prototype.close.call(this),n.NetherWorldModel.instance.currLv=0},i=s,n.NetherWorldCopyRightPanel=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.nether_world||(t.nether_world={}),i=ui.NetherWorldLeftViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.left=0,this.bottom=458,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.rankBtn,this,this.rankBtnHandler)},s.prototype.rankBtnHandler=function(){WindowManager.instance.open(1381)},n=s,e.NetherWorldLeftPanel=n}(modules=modules||{}),function(p){var t,e;function i(){this.init()}t=p.config||(p.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._arr=GlobalData.getConfig("zhanhun_copy_rank")},i.prototype.getCfgByRank=function(t,e,i){void 0===i&&(i=p.nether_world.NetherWorldModel.instance.cDayCopy);for(var n=0;n<this._arr.length;n++){var s=this._arr[n];if(s){var o=s[0],a=s[1][0],r=s[1][1],l=s[5][0],h=s[5][1];if(o===t&&l<=i&&i<=h&&a<=e&&e<=r)return s}}return null},i.prototype.getArr=function(t,e){void 0===e&&(e=p.nether_world.NetherWorldModel.instance.cDayCopy);for(var i=[],n=0;n<this._arr.length;n++){var s=this._arr[n];if(s){var o=s[0],a=s[5][0],r=s[5][1];o===t&&a<=e&&e<=r&&i.push(s)}}return i},e=i,t.ZhanHunCopyCfg=e}(modules=modules||{}),function(t){var a,e,r,i,n,s,o;function l(){return null!==e&&e.apply(this,arguments)||this}a=t.nether_world||(t.nether_world={}),r=t.config.ZhanHunCopyCfg,i=laya.events.Event,n=t.common.SimpleList,s=t.common.BtnGroup,e=ui.FireContentionRankRewardAlertUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(a.NetherWorldRankRewardItem,571,115),this._list.size(571,436),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._btnGroup=new s,this._btnGroup.setBtns(this.group_1,this.group_2),this.group_1.label="巅峰八强",this.group_2.label="最佳战队",CommonUtil.setHTMLPro(this.tipTxt,"#b15315","SimHei",22,"center","middle")},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,i.CHANGE,this,this.changeHandler)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),a.NetherWorldModel.instance._nowIndex2=this._btnGroup.selectedIndex=0},l.prototype.changeHandler=function(){a.NetherWorldModel.instance._nowIndex2=this._btnGroup.selectedIndex,this.showUI()},l.prototype.showUI=function(){if(0===this._btnGroup.selectedIndex)this.text3.text="巅峰八强奖励",this.tipTxt.innerHTML="周日晚上22:00发放排名奖励",this.tipTxt.y=625,this._list.datas=r.instance.getArr(1);else if(1===this._btnGroup.selectedIndex){this.text3.text="最佳战队奖励",this.tipTxt.y=614,this._list.datas=r.instance.getArr(2);for(var t=999999,e=0;e<this._list.datas.length;e++){var i=this._list.datas[e],n=i[4],s=i[1][0],o=i[1][1];0!=a.NetherWorldModel.instance.myWraBandRank?a.NetherWorldModel.instance.myWraBandRank>=s&&a.NetherWorldModel.instance.myWraBandRank<=o&&(t=n):t=n<t?n:t}this.tipTxt.innerHTML="周日晚上22:00发放排名奖励<br/>战队成员需在战队模式下通过第"+t+"层才能领取奖励"}},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this)},o=l,a.NetherWorldRankRewardAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.nether_world||(t.nether_world={}),n=t.common.BtnGroup,s=t.common.CustomClip,o=t.common.SimpleList,i=ui.NetherWorldViewUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._taskBase=[this.reward1,this.reward2,this.reward3],CommonUtil.setHTMLPro(this.timeTxtHTML,"#1f304d","SimHei",24,"left"),this.timeTxtHTML.innerHTML="",this.creatEffect(),this._list=o.create(e.NetherWorldRankItem,290,30,1,1,0,0),this._list.size(290,280),this.listBox1.addChild(this._list),this._list.pos(0,0,!0),this._list1=o.create(e.NetherWorldRankItem1,290,30,1,1,0,0),this._list1.size(290,240),this.listBox2.addChild(this._list1),this._list1.pos(0,0,!0),this._rankDate=[1,2,3,4,5,6,7,8,9],this._rankDate1=[1,2,3,4,5,6,7],this._btnGroup=new n,this._btnGroup.setBtns(this.teamBtn,this.netherBtn,this.arenaBtn)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.matchBtn,this,this.matchBtnBtnHandler),this.onAutoClick(this.sportAwardBtn,this,this.sportAwardBtnBtnHandler),this.onAutoClick(this.createRoomBtn,this,this.createRoomBtnHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoClick(this.txtBtn,this,this.txtBtnHandler),this.onAutoClick(this.tipsBtn,this,this.tipsHanlder),this.onAutoClick(this.chanllgeCBtn,this,this.setOneKeychangeHandler),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoGlobalEvt("SINGLE_QUXIAO",this,this.createRoomBtnHandler),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.showUI),this.onAutoGlobalEvt("NOTHINGNESS_CONTENTION_REPLY_RANK",this,this.showUI),this.onAutoGlobalEvt("GET_EMPTY_INFO_REPLY",this,this.sheBtn),this.onAutoGlobalEvt("HOLO_HELPER_SET_UPDATE",this,this.holoHelperUpdate),this.regAutoRP(this.dotImg,["teamBattleRP"]),this.regAutoRP(this.jingjiRP,["nothingnessWorldRP"]),this.regAutoRP(this.netherRP,["netherWorldRP"])},r.prototype.tipsHanlder=function(){CommonUtil.alertHelp(67046)},r.prototype.holoHelperUpdate=function(){this.chanllgeCBtn.selected=t.halo.HaloModel.instance.getCheckTipsValue(52)},r.prototype.setOneKeychangeHandler=function(){CommonUtil.setHalaOneKeychange(!this.chanllgeCBtn.selected,52)},r.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(WindowManager.instance.open(97),this._btnGroup.selectedIndex=1):2===this._btnGroup.selectedIndex&&(WindowManager.instance.open(962),this._btnGroup.selectedIndex=1)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.NetherWorldModel.instance.doneWave=0,this._btnGroup.selectedIndex=1,this.showRewards(t.config.BlendCfg.instance.getCfgById(97604)[1]),this.showUI(),this.sheBtn(),t.common_group.CommonGroupCtrl.instance.fetchTeamEx(),e.NetherWorldCtrl.instance.GetZhanhunCopyInfo(),e.NetherWorldCtrl.instance.GetZhanhunCopyPersonRank(),e.NetherWorldCtrl.instance.GetZhanhunCopyWarbandRank(),this.chanllgeCBtn.selected=t.halo.HaloModel.instance.getCheckTipsValue(52)},r.prototype.matchBtnBtnHandler=function(){t.common_group.CommonGroupUtil.matchBtnHandler(4,!0)},r.prototype.createRoomBtnHandler=function(){t.common_group.CommonGroupUtil.createRoom(4,!1,!0)},r.prototype.sportAwardBtnBtnHandler=function(){WindowManager.instance.open(1380)},r.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19061)},r.prototype.txtBtnHandler=function(){WindowManager.instance.open(1372)},r.prototype.showUI=function(){this._list.datas=this._rankDate,this._list1.datas=this._rankDate1},r.prototype.sheBtn=function(){s.thisStop(this._btnClip),0<e.NetherWorldModel.instance.nowChallengeNum?this.timeTxtHTML.innerHTML="<span style='color:#4c5e8a'>挑战次数:</span><span style='color:#00ad35'>"+e.NetherWorldModel.instance.nowChallengeNum+"/"+e.NetherWorldModel.instance.maxChallengeNum+"</span>":this.timeTxtHTML.innerHTML="<span style='color:#4c5e8a'>挑战次数:</span><span style='color:#e6372e'>"+e.NetherWorldModel.instance.nowChallengeNum+"/"+e.NetherWorldModel.instance.maxChallengeNum+"</span>"},r.prototype.showRewards=function(t){t.length;for(var e=(this.width,0),i=0;i<t.length;i+=2){var n=this._taskBase[e];n&&(n.nameVisible=!1,n.dataSource=[t[i],t[i+1],0,null],n.visible=!0,e++)}},r.prototype.creatEffect=function(){this._btnClip=s.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.matchBtn.x-6,this.matchBtn.y-8,!0)},r.prototype.close=function(){i.prototype.close.call(this),WindowManager.instance.close(1381)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),i.prototype.destroy.call(this,t)},a=r,e.NetherWorldPanel=a}(modules=modules||{}),function(t){var e,i;function n(){this.maxLv=0,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabByLevel={},this._cfgs=GlobalData.getConfig("scene_zhanhun");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];if(i){var n=i[3],s=i[1];this._tab[n]=i,this._tabByLevel[s]=i,this.maxLv=s>this.maxLv?s:this.maxLv}}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByOcc=function(t){return this._tab[t]},n.prototype.getCfgByLevel=function(t){return this._tabByLevel[t]},n.prototype.getUpLevle=function(t){var e=0,i=this.getCfgByOcc(t);return i&&(e=i[9]),e},n.prototype.getUpMaxTime=function(t){var e=0,i=this.getCfgByLevel(t);return i&&(e=i[8][0]),e},i=n,e.SceneZhanHunCfg=i}(modules=modules||{}),function(t){var o,e,a,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}o=t.nether_world||(t.nether_world={}),a=t.config.SceneZhanHunCfg,i=t.common.SimpleList,e=ui.NothingnessWorldRewordPreviewAlertUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(t.bag.BaseItem,100,100,1,5,5.5,20),this._list.size(522,229),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("EMPTY_SCENE_READY",this,this.showUI)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI()},s.prototype.showUI=function(){var t=[],e=o.NetherWorldModel.instance.currLv,i=a.instance.cfgs.length;e=0===(e=i<e?i:e)?1:e;var n=a.instance.getCfgByLevel(e);n&&(t=n[7]);var s=CommonUtil.formatItemData(t);this._list.datas=s},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n=s,o.NetherWorldRewordPreviewAlert=n}(modules=modules||{}),function(l){var t,e;function i(){var t=GlobalData.getConfig("zhanhun_ninghun");this._ninghunCfg=t,this._ninghunLvlConfig={},this._ninghunSkillPureIds=[],this._ninghunSkillNeedLvl={};for(var e=0;e<t.length;e++){this._ninghunLvlConfig[t[e][0]]=t[e];for(var i=t[e][3],n=0;n<i.length;n++){this._ninghunSkillNeedLvl[i[n]]=t[e][0];var s=l.common.CommonUtil.getSkillPureIdById(i[n]);-1===this._ninghunSkillPureIds.indexOf(s)&&this._ninghunSkillPureIds.push(s)}}var o=GlobalData.getConfig("zhanhun_huanhua");this._huanhuaObj={},this._huanhuaSkillNeedOrder={},this._huanhuaIds=[],this._hunahuaSkillPureObj={},this._huanhuaOutlook={};for(var a=0;a<o.length;++a){this._huanhuaObj[o[a][0]]=this._huanhuaObj[o[a][0]]||[],this._huanhuaObj[o[a][0]].push(o[a]),-1===this._huanhuaIds.indexOf(o[a][0])&&this._huanhuaIds.push(o[a][0]),this._huanhuaOutlook[o[a][0]]=o[a][6];for(i=o[a][4],n=0;n<i.length;n++){this._huanhuaSkillNeedOrder[i[n]]||(this._huanhuaSkillNeedOrder[i[n]]=o[a][1]);s=l.common.CommonUtil.getSkillPureIdById(i[n]);this._hunahuaSkillPureObj[o[a][0]]=s}}this._firstModelIds=this._huanhuaIds[0];var r=GlobalData.getConfig("zhanhun_lianhun");this._lianhunObj={},this._lianhunMaxLvl={};for(a=0;a<r.length;++a)this._lianhunObj[r[a][0]]=this._lianhunObj[r[a][0]]||[],this._lianhunObj[r[a][0]].push(r[a]),this._lianhunMaxLvl[r[a][0]]=this._lianhunMaxLvl[r[a][0]]||{},this._lianhunMaxLvl[r[a][0]][r[a][4]]=r[a][1]}t=l.config||(l.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getNingHunCfg=function(){return this._ninghunCfg},i.prototype.getNingHunCfgByLvl=function(t){return this._ninghunLvlConfig[t]},i.prototype.getNingHunFightByLvl=function(t){return this._ninghunLvlConfig[t]?this._ninghunLvlConfig[t][4]:0},i.prototype.getNingHunConsumeByLvl=function(t){return this._ninghunLvlConfig[t]?this._ninghunLvlConfig[t][1]:void 0},i.prototype.getNingHunAttrsByLvl=function(t){return this._ninghunLvlConfig[t]?this._ninghunLvlConfig[t][2]:void 0},i.prototype.getNingHunNeedLvlBySkillId=function(t){return this._ninghunSkillNeedLvl[t]},i.prototype.getNingHunSkillPureIds=function(){return this._ninghunSkillPureIds},i.prototype.getHuanhuaIds=function(){return this._huanhuaIds},i.prototype.getHuanhuaFirstModelId=function(){return this._firstModelIds},i.prototype.getOrderConfig=function(t,e){var i=this._huanhuaObj[t];if(0!=e)for(var n=0;n<i.length;n++){var s=i[n];if(e<=s[1])return s}},i.prototype.getZhanhunFight=function(t,e){if(0==e)return 0;for(var i=0,n=0;n<e;n++){var s=this.getOrderConfig(t,n+1);s&&(i+=s[5])}return i},i.prototype.getHuanhuaNeedOrderBySkillId=function(t){return this._huanhuaSkillNeedOrder[t]},i.prototype.getHunahuaSkillPureById=function(t){return this._hunahuaSkillPureObj[t]},i.prototype.getHuanhuaOutlook=function(t){return this._huanhuaOutlook[t]},i.prototype.getLianhunConfigByLvl=function(t,e){if(0==e)return null;for(var i=this._lianhunObj[t],n=0;n<i.length;n++){var s=i[n];if(e<=s[1])return s}return null},i.prototype.getLianhunConfig=function(t){return this._lianhunObj[t]},i.prototype.getLianhunFightByLvl=function(t,e){for(var i=this._lianhunObj[t],n=0,s=0;s<i.length;s++){var o=i[s],a=i[s-1]?i[s-1]:null;if(e<=o[1]){n+=(e-(a?a[1]:0))*o[5];break}n+=(o[1]-(a?a[1]:0))*o[5]}return n},i.prototype.getLianhunLimitByNhLevel=function(t,e){return this._lianhunMaxLvl[t][e]},e=i,t.SoulWarCfg=e}(modules=modules||{}),function(s){var d,e,t,m,o,y,f,a,i,r,l,n,h;function p(){return null!==e&&e.apply(this,arguments)||this}d=s.soul_war||(s.soul_war={}),t=s.common.BtnGroup,m=s.common.CustomClip,o=s.common.AvatarClip,y=s.common.CommonUtil,f=s.config.SoulWarCfg,a=s.config.ExteriorCfg,i=s.bag.BagUtil,r=s.config.AttrItemCfg,l=s.common.AttrUtil,n=s.common.ProgressBarCtrl,e=ui.SoulNinghunViewUI,__extends(p,e),p.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup=new t,this._btnGroup.setBtns(this.congealingTab,this.phantomTab),this._btnClip=m.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.scale(.8,.8),this._btnClip.x=280,this._btnClip.y=984,this._btnClip.visible=!1,this.fullLvlTxt.text="已满级",this._levelProCtrl=new n(this.progressImg,487,this.progressTxt),this._skillItemArr=[this.skillItem1,this.skillItem2,this.skillItem3,this.skillItem4,this.skillItem5],this.attrList.renderHandler=Handler.create(this,this.attrHandler,null,!1),this.totalTxt.underline=!0,this.totalTxt.typeset()},p.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this.createSoulModel(),this.updateNinghunInfo(!1),this.updateNinghunSkillInfo()},p.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),this._btnGroup=this.destroyElement(this._btnGroup),this._btnClip=this.destroyElement(this._btnClip),this._skillItemArr=this.destroyElement(this._skillItemArr),this._showModelClip=this.destroyElement(this._showModelClip),this._levelProCtrl=this.destroyElement(this._levelProCtrl),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupChangedHandler),this.onAutoEvt(this.goBtn,"click",this,this.goBtnFunc),this.onAutoEvt(this.totalTxt,"click",this,this.onShowTotalAttrsClick),this.onAutoEvt(this.aboutBtn,"click",this,this.openAbout),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateNinghunInfo,[!1]),this.onAutoGlobalEvt("UPDATE_ZHANHUN_NINGHUN_INFO",this,this.updateNinghunInfo,[!0]),this.onAutoGlobalEvt("UPDATE_ZHANHUN_NINGHUN_SKILL_INFO",this,this.updateNinghunSkillInfo),this.regAutoRP(this.congealingRed,["ninghunRP"]),this.regAutoRP(this.phantomRed,["zhanhunRP"])},p.prototype.btnGroupChangedHandler=function(){1==this._btnGroup.selectedIndex&&WindowManager.instance.open(1373)},p.prototype.updateNinghunInfo=function(t){var e=this;this.fight_num.value=d.SoulWarModel.instance.getNingHunTotalFight().toString();var i=d.SoulWarModel.instance.getNingHunLvl();this.levelTxt.value=i.toString(),this.progressLvlTxt.text="Lv."+i;var n=this.levelTxt.value.length,s=22*n+this.levelTxt.spaceX*(n-1),o=this.levelImg.width+s,a=(this.width-o)/2;this.levelImg.x=a,this.levelTxt.x=a+this.levelImg.width+3;var r=f.instance.getNingHunCfgByLvl(i),l=f.instance.getNingHunCfgByLvl(i+1);if(l){this.progressBox.visible=!0,this.consumablesItem.visible=!0,this.goBtn.visible=!0,this.fullLvlTxt.visible=!1;var h=l[1][0];this._needItemId=h;var p=l[1][1];this.progressTxt.text=10*d.SoulWarModel.instance.getNingHunProgress()+"/"+10*p;var c=y.getPropCountById(h);if(this.consumablesItem.dataSource=[h,0,0,null],this.consumablesItem.setNum(y.bigNumToString(c)+"/"+y.bigNumToString(1),c<1?"#ff7462":"#ffffff"),1<=c?(this._btnClip.x=280,this._btnClip.y=984,m.thisPlay(this._btnClip),this._btnClip.visible=!0):(m.thisStop(this._btnClip),this._btnClip.visible=!1),this._enoughItemCount=1<=c,t){this._tween&&(this._tween.stop(),this._tween=null),this._levelProCtrl.maxValue=10*r[1][1];var u=10*d.SoulWarModel.instance.getNingHunProgress();this._tween=0==u?TweenJS.create(this._levelProCtrl).to({value:this._levelProCtrl.maxValue},400).onComplete(function(){e._levelProCtrl.maxValue=10*p,e._levelProCtrl.value=0}).start():TweenJS.create(this._levelProCtrl).to({value:u},400).start()}else this._levelProCtrl.maxValue=10*p,this._levelProCtrl.value=10*d.SoulWarModel.instance.getNingHunProgress()}else this.progressBox.visible=!1,this.consumablesItem.visible=!1,this.goBtn.visible=!1,this.fullLvlTxt.visible=!0,m.thisStop(this._btnClip),this._btnClip.visible=!1;this.attrList.dataSource=d.SoulWarModel.instance.getNinghunAttrs(),this.updateNinghunSkillInfo()},p.prototype.createSoulModel=function(){var t=d.SoulWarModel.instance.getFightZhanhunId(),e=f.instance.getHuanhuaFirstModelId();t&&0!=t&&-1!=t||(t=e),this._showModelClip||(this._showModelClip=o.create(1024,1024,1024),this.effectContent.addChild(this._showModelClip),this._showModelClip.anchorX=.5,this._showModelClip.anchorY=.5,this._showModelClip.centerX=0,this._showModelClip.centerY=0),this._showModelClip.reset(t);var i=a.instance.getCfgById(t);this._showModelClip.avatarScale=i[10]?i[10]:1,this._showModelClip.avatarRotationX=i[6],this._showModelClip.avatarRotationY=i[7],this._showModelClip.avatarY=i[9],this._showModelClip.avatarX=i[8],this.observationItem.data=[[this._showModelClip,Math.round(t/1e3)]],this.nameTxt.text=i[2];var n=s.config.BlendCfg.instance.getCfgById(97501)[1][0];this.mainSkillItem.setData([t,y.getSkillPureIdById(n),0])},p.prototype.updateNinghunSkillInfo=function(){for(var t=f.instance.getNingHunSkillPureIds(),e=0;e<t.length;e++){var i=t[e];this._skillItemArr[e].setData([i])}this.fight_num.value=d.SoulWarModel.instance.getNingHunTotalFight().toString();var n=d.SoulWarModel.instance.getNextSkill();if(n){this.tipTxtBox.visible=!0;var s=d.SoulWarModel.instance.getNingHunLvl(),o=n[3][0],a=o%1e4;this.needLvlTxt.text=n[0]-s+"级",this.descTxt2.text=1==a?"可激活技能":"可升级技能";var r=SkillPureCfg.instance.getCfgById(y.getSkillPureIdById(o));this.skillNameTxt.text="【"+r[1]+"】"+a+"级",y.centerChainArr(this.tipTxtBox.width,[this.descTxt1,this.needLvlTxt,this.descTxt2,this.skillNameTxt],3)}else this.tipTxtBox.visible=!1},p.prototype.attrHandler=function(t,e){var i=t.dataSource,n=r.instance.getCfgById(i[0]);t.getChildByName("nameTxt").text=n[1]+"：";var s=i[1]?i[1]:0,o=i[2]?i[2]:0;t.getChildByName("valueTxt").text=n[2]?l.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=s<o,t.getChildByName("addTxt").visible=s<o,t.getChildByName("addTxt").text=n[2]?l.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+""},p.prototype.goBtnFunc=function(){this._enoughItemCount?d.SoulWarCtrl.instance.ninghunLvlUp():i.openLackPropAlert(this._needItemId,1)},p.prototype.onShowTotalAttrsClick=function(){d.SoulWarModel.instance.calcAllZhanhunAttrs()},p.prototype.openAbout=function(){y.alertHelp(19062)},h=p,d.SoulNinghunPanel=h}(modules=modules||{}),function(a){var t,y,r,o,e;function h(){this._zhanhunList={}}t=a.soul_war||(a.soul_war={}),y=a.config.SoulWarCfg,r=a.config.SkillCfg,o=a.redPoint.RedPointCtrl,Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.setNingHunLvl=function(t){this._ningHunLvl=t},h.prototype.getNingHunLvl=function(){return this._ningHunLvl},h.prototype.setNingHunProgress=function(t){this._ningHunProgress=t},h.prototype.getNingHunProgress=function(){return this._ningHunProgress},h.prototype.setNingHunSkill=function(t){this._ningHunSkills=t},h.prototype.getNingHunSkills=function(){return this._ningHunSkills},h.prototype.getNingHunSkillId=function(t){if(this._ningHunSkills&&0<this._ningHunSkills.length)for(var e=0;e<this._ningHunSkills.length;e++){var i=this._ningHunSkills[e];if(a.common.CommonUtil.getSkillPureIdById(i)==t)return i}},h.prototype.getNingHunSkillLvl=function(t){if(this._ningHunSkills&&0<this._ningHunSkills.length)for(var e=0;e<this._ningHunSkills.length;e++){var i=this._ningHunSkills[e];if(a.common.CommonUtil.getSkillPureIdById(i)==t)return i%1e4}return 0},h.prototype.getNingHunTotalFight=function(){var e,t=y.instance.getNingHunFightByLvl(this._ningHunLvl),i=0;this._ningHunSkills&&0<this._ningHunSkills.length&&this._ningHunSkills.forEach(function(t){e=r.instance.getCfgById(t),i+=e?e[3]:0});var n=0;if(this.hasActivateZhanhun()){var s=a.config.BlendCfg.instance.getCfgById(97501)[1][0],o=r.instance.getCfgById(s);n=o?o[3]:0}return t+i+n},h.prototype.checkNingHunRp=function(){var t=!1,e=y.instance.getNingHunCfgByLvl(this._ningHunLvl+1);if(e){var i=e[1][0],n=e[1][1];CommonUtil.getPropCountById(i)+this.getNingHunProgress()>=n&&(t=!0)}var s=t||this.checkNinghunSkillRp();o.instance.setRPProperty("ninghunRP",s)},h.prototype.checkNinghunSkillRp=function(){for(var t=y.instance.getNingHunSkillPureIds(),e=0;e<t.length;e++){var i=t[e],n=h.instance.getNingHunSkillId(i),s=0==(n?n%1e4:0)?1e4*i+1:n+1,o=y.instance.getNingHunNeedLvlBySkillId(s);if(o&&this._ningHunLvl>=o)return!0}return!1},h.prototype.getNextSkill=function(){for(var t,e=y.instance.getNingHunCfg(),i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[3];if(s>this._ningHunLvl&&o&&0<o.length){t=n;break}}return t},h.prototype.getNinghunAttrs=function(){var t=y.instance.getNingHunCfgByLvl(this._ningHunLvl),e=y.instance.getNingHunCfgByLvl(this._ningHunLvl+1),i=[],n=t?t[2]:[],s={};if(0<n.length)for(var o=0;o<n.length;o+=2)-1===i.indexOf(n[o])&&i.push(n[o]),s[n[o]]=n[o+1];var a=e?e[2]:[],r={};if(0<a.length)for(o=0;o<a.length;o+=2)-1===i.indexOf(a[o])&&i.push(a[o]),r[a[o]]=a[o+1];for(var l=[],h=0;h<i.length;++h){var p=i[h],c=s[p]?s[p]:0,u=r[p]?r[p]:0;l.push([p,c,u,1])}return l},h.prototype.setFightZhanhunId=function(t){this._fightZhanhunId=t},h.prototype.getFightZhanhunId=function(){return this._fightZhanhunId},h.prototype.setZhanhunList=function(t){var e=this;this._zhanhunList={},t&&0<t.length&&t.forEach(function(t){e._zhanhunList[t[0]]=t})},h.prototype.setZhanhun=function(t){this._zhanhunList[t[0]]=t},h.prototype.getZhanhunDataById=function(t){return this._zhanhunList[t]},h.prototype.setZhanhunLhData=function(t,e){this._zhanhunList[t]&&(this._zhanhunList[t][2]=e)},h.prototype.getZhanhunOrderById=function(t){return this._zhanhunList&&this._zhanhunList[t]?this._zhanhunList[t][1]:0},h.prototype.getZhanhunLhLevelById=function(t){return this._zhanhunList&&this._zhanhunList[t]?this._zhanhunList[t][2]:0},h.prototype.getZhanhunSkillIdById=function(t){return this._zhanhunList&&this._zhanhunList[t]?this._zhanhunList[t][3][0]:void 0},h.prototype.checkZhanhunRp=function(){for(var t=y.instance.getHuanhuaIds(),e=!1,i=0;i<t.length;i++)if(this.isFreeZhanhun(t[i])||this.checkZhanhunUpRp(t[i])||this.checkZhanhunSkillRp(t[i])||this.checkLianhunRp(t[i])){e=!0;break}o.instance.setRPProperty("zhanhunRP",e)},h.prototype.checkZhanhunUpRp=function(t){var e=h.instance.getZhanhunDataById(t),i=e?e[1]:0,n=y.instance.getOrderConfig(t,i+1);if(n){var s=n[2][0];if(n[2][1]<=CommonUtil.getPropCountById(s))return!0}return!1},h.prototype.checkZhanhunSkillRp=function(t){var e=y.instance.getHunahuaSkillPureById(t),i=h.instance.getZhanhunSkillIdById(t),n=0==(i?i%1e4:0)?1e4*e+1:i+1,s=h.instance.getZhanhunOrderById(t);return y.instance.getHuanhuaNeedOrderBySkillId(n)<=s},h.prototype.getZhanhunTotalFight=function(){for(var t=y.instance.getHuanhuaIds(),e=0,i=0;i<t.length;i++){var n=t[i];e+=y.instance.getZhanhunFight(n,this.getZhanhunOrderById(n));var s=h.instance.getZhanhunSkillIdById(n);if(s){var o=r.instance.getCfgById(s);e+=o?o[3]:0}e+=y.instance.getLianhunFightByLvl(n,this.getZhanhunLhLevelById(n))}return e},h.prototype.getZhanhunAttrsByZhanhunId=function(t){var e=this.getZhanhunOrderById(t),i=e+1,n=[],s={};if(0<e)for(var o=0;o<e;o++)for(var a=(h=y.instance.getOrderConfig(t,o+1))?h[3]:[],r=0;r<a.length;r+=2)-1===n.indexOf(a[r])&&n.push(a[r]),s[a[r]]=(s[a[r]]?s[a[r]]:0)+a[r+1];var l={};for(o=0;o<i;o++){var h;for(a=(h=y.instance.getOrderConfig(t,o+1))?h[3]:[],r=0;r<a.length;r+=2)-1===n.indexOf(a[r])&&n.push(a[r]),l[a[r]]=(l[a[r]]?l[a[r]]:0)+a[r+1]}for(var p=[],c=0;c<n.length;++c){var u=n[c],d=s[u]?s[u]:0,m=l[u]?l[u]:0;p.push([u,d,m,1])}return p},h.prototype.getZhanhunIndex=function(){for(var t=void 0,e=y.instance.getHuanhuaIds(),i=0;i<e.length;i++)if(this.isFreeZhanhun(e[i])||this.checkZhanhunUpRp(e[i])||this.checkZhanhunSkillRp(e[i])||this.checkLianhunRp(e[i])){t=i;break}if(null==t&&0!=this._fightZhanhunId)for(i=0;i<e.length;i++)if(e[i]==this._fightZhanhunId){t=i;break}return null==t?0:t},h.prototype.getZhanhunIndexById=function(t){for(var e=y.instance.getHuanhuaIds(),i=0;i<e.length;i++)if(e[i]==t)return i;return 0},h.prototype.isFreeZhanhun=function(t){return t==a.config.BlendCfg.instance.getCfgById(97502)[1][0]&&0==this.getZhanhunOrderById(t)},h.prototype.hasActivateZhanhun=function(){for(var t=y.instance.getHuanhuaIds(),e=0;e<t.length;e++)if(0<this.getZhanhunOrderById(t[e]))return!0;return!1},h.prototype.checkLianhunRp=function(t){var e=h.instance.getZhanhunLhLevelById(t),i=h.instance.getZhanhunOrderById(t),n=e+1,s=y.instance.getLianhunConfigByLvl(t,n);if(s){var o=s[4],a=s[2][0],r=s[2][1],l=CommonUtil.getPropCountById(a);if(o<=i&&r<=l)return!0}return!1},h.prototype.getLianhunAttrs1=function(t,e){for(var i=y.instance.getLianhunConfig(t),n={},s=0;s<i.length;s++){var o=i[s],a=i[s-1]?i[s-1]:null,r=o[3];if(e<=o[1]){if(0<r.length)for(var l=0;l<r.length;l+=2)-1===this._attrIds.indexOf(r[l])&&this._attrIds.push(r[l]),n[r[l]]=(n[r[l]]?n[r[l]]:0)+r[l+1]*(e-(a?a[1]:0));break}if(0<r.length)for(l=0;l<r.length;l+=2)-1===this._attrIds.indexOf(r[l])&&this._attrIds.push(r[l]),n[r[l]]=(n[r[l]]?n[r[l]]:0)+r[l+1]*(o[1]-(a?a[1]:0))}return n},h.prototype.getLianhunAttrs=function(t){this._attrIds=[];for(var e=this.getZhanhunLhLevelById(t),i=this.getLianhunAttrs1(t,e),n=this.getLianhunAttrs1(t,e+1),s=[],o=0;o<this._attrIds.length;++o){var a=this._attrIds[o],r=i[a]?i[a]:0,l=n[a]?n[a]:0;s.push([a,r,l,1])}return s},h.prototype.calcAllZhanhunAttrs=function(){var e=this,i=[];i.push(this.getNinghunAttrs()),y.instance.getHuanhuaIds().forEach(function(t){i.push(e.getZhanhunAttrsByZhanhunId(t)),i.push(e.getLianhunAttrs(t))});for(var t=[],n={},s=0;s<i.length;s++)for(var o=i[s],a=0;a<o.length;a++){var r=o[a];-1===t.indexOf(r[0])?(t.push(r[0]),n[r[0]]=r[1]):n[r[0]]=n[r[0]]+r[1]}for(var l=[],h=0;h<t.length;++h){var p=t[h],c=n[p]?n[p]:0;l.push([p,c,1])}WindowManager.instance.open(26,["战魂总属性",this.getZhanhunTotalFight()+this.getNingHunTotalFight(),void 0,void 0,!0,l])},e=h,t.SoulWarModel=e}(modules=modules||{}),function(t){var e,i,h,p,y,n,c,f,g,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.soul_war||(t.soul_war={}),h=t.common.CommonUtil,p=t.common.CustomClip,y=t.soul_war.SoulWarModel,n=t.soul_war.SoulWarCtrl,c=t.config.SoulWarCfg,f=t.config.AttrItemCfg,g=t.common.AttrUtil,s=t.bag.BagUtil,i=ui.SoulLianhunAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._nameTextArry=[this.attributeNameText1,this.attributeNameText2,this.attributeNameText3,this.attributeNameText4,this.attributeNameText5,this.attributeNameText6],this._valueTextArry=[this.attributeValueText1,this.attributeValueText2,this.attributeValueText3,this.attributeValueText4,this.attributeValueText5,this.attributeValueText6],this._upValueTextArry=[this.attributeUpValueText1,this.attributeUpValueText2,this.attributeUpValueText3,this.attributeUpValueText4,this.attributeUpValueText5,this.attributeUpValueText6],this._upValueImgArry=[this.attributeUpImg1,this.attributeUpImg2,this.attributeUpImg3,this.attributeUpImg4,this.attributeUpImg5,this.attributeUpImg6],this._btnClip=p.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.instenBtn.x-6,this.instenBtn.y-8),this._btnClip1=p.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip1.setProperty(this,this.oneInstenBtn.x-6,this.oneInstenBtn.y-8)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._zhanhunId=t[0]},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updatePanel()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.instenBtn,this,this.upGrade),this.onAutoClick(this.oneInstenBtn,this,this.oneKeyUpGrade),this.onAutoGlobalEvt("UPDATE_LIANHUN_INFO",this,this.updatePanel),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updatePanel)},a.prototype.close=function(t,e){i.prototype.close.call(this,t,e),p.thisStop(this._btnClip),p.thisStop(this._btnClip1)},a.prototype.updatePanel=function(){var t=y.instance.getZhanhunOrderById(this._zhanhunId),e=y.instance.getZhanhunLhLevelById(this._zhanhunId),i=e+1,n=c.instance.getLianhunConfigByLvl(this._zhanhunId,e),s=c.instance.getLianhunConfigByLvl(this._zhanhunId,i);if(s){this.manjiText.visible=!1;var o=s[4],a=s[2][0];this._needItemId=a;var r=s[2][1],l=h.getPropCountById(a);this.nowBaseItem.dataSource=[a,1,0,null],this.haveText.text=l.toString(),this.icon.skin=h.getIconById(a),this.iconNum.text=r.toString(),this.nameText.text=h.getNameByItemId(a),this.nameText.color=h.getColorByQuality(h.getItemQualityById(a)),h.centerChainArr(this.needMc.width,[this.icon,this.iconNum],2),o<=t?(this.needMc.visible=!0,this.instenBtn.visible=!0,this.oneInstenBtn.visible=!0,this.tipText.visible=!1,r<=l?(p.thisPlay(this._btnClip),p.thisPlay(this._btnClip1)):(p.thisStop(this._btnClip),p.thisStop(this._btnClip1))):(this.needMc.visible=!1,this.instenBtn.visible=!1,this.oneInstenBtn.visible=!1,this.tipText.visible=!0,this.tipText.text="战魂阶数达到"+o+"阶提高炼魂上限",p.thisStop(this._btnClip),p.thisStop(this._btnClip1)),this._enoughItemCount=r<=l,this.devourText.text=e+"/"+c.instance.getLianhunLimitByNhLevel(this._zhanhunId,t)}else this.needMc.visible=!1,this.instenBtn.visible=!1,this.oneInstenBtn.visible=!1,this.manjiText.visible=!0,this.tipText.visible=!1,p.thisStop(this._btnClip),p.thisStop(this._btnClip1),this.devourText.text=e+"/"+c.instance.getLianhunLimitByNhLevel(this._zhanhunId,t),n&&(a=n[2][0],l=h.getPropCountById(a),this.nowBaseItem.dataSource=[a,1,0,null],this.haveText.text=l.toString(),this.nameText.text=h.getNameByItemId(a),this.nameText.color=h.getColorByQuality(h.getItemQualityById(a)));this.setAttribute()},a.prototype.setAttribute=function(){for(var t=y.instance.getLianhunAttrs(this._zhanhunId),e=0;e<this._nameTextArry.length;e++){var i=t[e],n=this._nameTextArry[e],s=this._valueTextArry[e],o=this._upValueTextArry[e],a=this._upValueImgArry[e];if(i){n.visible=!0,s.visible=!0,o.visible=!0,a.visible=!0;var r=f.instance.getCfgById(i[0]);n.text=r[1]+"：";var l=i[1]?i[1]:0,h=i[2]?i[2]:0;s.text=r[2]?g.formatFloatNum(i[1])+"%":Math.round(i[1])+"",a.visible=l<h,o.visible=l<h,o.text=r[2]?g.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+""}else n.visible=!1,s.visible=!1,o.visible=!1,a.visible=!1}var p=(this.diTuImg.height-(24*t.length+21*(t.length-1)))/2;for(e=0;e<this._nameTextArry.length;e++){var c=this._nameTextArry[e],u=this._valueTextArry[e],d=this._upValueTextArry[e],m=this._upValueImgArry[e];c.y=u.y=d.y=m.y=p+45*e}},a.prototype.upGrade=function(){this._enoughItemCount?n.instance.ZhanhunLhAddLevel(this._zhanhunId):s.openLackPropAlert(this._needItemId,1)},a.prototype.oneKeyUpGrade=function(){this._enoughItemCount?n.instance.ZhanhunLhFastLevel(this._zhanhunId):s.openLackPropAlert(this._needItemId,1)},a.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._btnClip1=this.destroyElement(this._btnClip1),i.prototype.destroy.call(this)},o=a,e.SoulLianhunAlert=o}(modules=modules||{}),function(t){var e,i,l,h,p,c,n,u,d,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.soul_war||(t.soul_war={}),l=t.common.CommonUtil,h=t.config.SkillCfg,p=t.effect.SuccessEffectCtrl,c=t.config.SkillPureCfg,n=ui.SkillAlertUI,u=t.config.SoulWarCfg,d=t.soul_war.SoulWarModel,s=t.soul_war.SoulWarCtrl,i=n,__extends(a,i),a.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),i.prototype.destroy.call(this)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this.btnClip=l.creatEff(this,"btn_light",15),this.btnClip.pos(this.btn.x-5,this.btn.y-10),this.btnClip.visible=!1,this.titleTxt.text="战魂技能"},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_ZHANHUN_NINGHUN_SKILL_INFO",this,this.updateInfo),this.onAutoClick(this.btn,this,this.activateOrUpHandler)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._skillPureId=t[0]},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._tLv=void 0,this.updateInfo()},a.prototype.updateInfo=function(){var t=d.instance.getNingHunSkillId(this._skillPureId),e=t?t%1e4:0,i=c.instance.getCfgById(this._skillPureId),n=0==e?1e4*this._skillPureId+1:t+1,s=u.instance.getNingHunNeedLvlBySkillId(n),o=h.instance.getCfgById(n),a=0==e?void 0:h.instance.getCfgById(t);this.iconImg.skin="assets/icon/skill/"+i[6]+".png",this.nameTxt.text=i[1]+"  Lv."+e,this.powerTxt.text="战力："+(a?a[3]:0),this.btn.visible=this.conditionTxt.visible=!0;var r=d.instance.getNingHunLvl();0==e?(this.iconImg.gray=!0,this.btn.label="激活",this.conditionTxt.text="激活条件：凝魂等级 Lv."+s,this.curLvDesc.text="无",this.conditionTxt.color="#ED1100",this.nextLvDesc.text=l.stringFormat(i[5],o[2])):(this.iconImg.gray=!1,this.curLvDesc.text=l.stringFormat(i[5],a[2]),this.btn.label="升级",s?(this.conditionTxt.text="升级条件：凝魂等级 Lv."+s,this.conditionTxt.color="#ED1100",this.conditionTxt.y=462,this.nextLvDesc.text=l.stringFormat(i[5],o[2])):(this.btn.visible=!1,this.conditionTxt.text="已满级",this.conditionTxt.color="#00AD35",this.conditionTxt.y=500,this.nextLvDesc.text="已达最大等级"),null!=this._tLv&&(1==e&&0===this._tLv?p.instance.play("assets/others/tx_jinjiechengong5.png"):e!==this._tLv&&-1!==this._tLv&&p.instance.play("assets/others/tx_jinjiechengong4.png"))),this._tLv=e,null!=r&&null!=s&&s<=r?(this.btnClip.visible=!0,this.btnClip.play(),this.btn.gray=!1,this.btn.mouseEnabled=!0,this.conditionTxt.visible=!1,this.btn.y=485):(this.btnClip.visible=!1,this.btnClip.stop(),this.btn.gray=!0,this.btn.mouseEnabled=!1,this.conditionTxt.visible=!0,this.btn.y=505),this.btnClip.y=this.btn.y-10},a.prototype.activateOrUpHandler=function(){var t=d.instance.getNingHunSkillId(this._skillPureId),e=0==(t?t%1e4:0)?1e4*this._skillPureId+1:t+1;s.instance.ZhanhunNhSkillUp(e)},o=a,e.SoulNinghunSkillAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.soul_war||(t.soul_war={}),n=t.config.ExteriorCfg,s=t.soul_war.SoulWarModel,i=ui.SoulZhanhunItemUI,__extends(a,i),a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_UPDATE",this,this.onUpdateInfo),this.onAutoGlobalEvt("UPDATE_ZHANHUN_INFO",this,this.onUpdateInfo),this.onAutoGlobalEvt("UPDATE_LIANHUN_INFO",this,this.onUpdateInfo),this.onAutoGlobalEvt("UPDATE_FIGHT_ZHANHUN_INFO",this,this.onUpdateInfo)},a.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectImg.visible=this.selected},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this._zhanhunId=t;var e=n.instance.getCfgById(this._zhanhunId);this.nameImg.skin="assets/icon/ui/zhanhun/"+e[3]+".png",this.iconImg.skin="assets/icon/skin/"+e[3]+".png",this.onUpdateInfo()},a.prototype.onUpdateInfo=function(){this.rp.visible=s.instance.isFreeZhanhun(this._zhanhunId)||s.instance.checkZhanhunUpRp(this._zhanhunId)||s.instance.checkZhanhunSkillRp(this._zhanhunId)||s.instance.checkLianhunRp(this._zhanhunId)},o=a,e.SoulZhanhunItem=o}(modules=modules||{}),function(e){var p,i,t,c,n,u,d,s,o,a,r,l,h,m;function y(){return null!==i&&i.apply(this,arguments)||this}p=e.soul_war||(e.soul_war={}),t=e.common.BtnGroup,c=e.common.CustomClip,n=e.common.AvatarClip,u=e.common.CommonUtil,d=e.config.SoulWarCfg,s=e.config.ExteriorCfg,o=e.bag.BagUtil,a=e.common.SimpleList,r=e.soul_war.SoulZhanhunItem,l=e.config.AttrItemCfg,h=e.common.AttrUtil,i=ui.SoulZhanhunViewUI,__extends(y,i),y.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup=new t,this._btnGroup.setBtns(this.congealingTab,this.phantomTab),this._btnClip=c.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.scale(.8,.8),this._btnClip.x=280,this._btnClip.y=984,this._btnClip.visible=!1,this._btnList=a.create(r,122,124,2,1,0,0),this._btnList.pos(51,81),this._btnList.size(615,122),this.addChildAt(this._btnList,14),this._btnList.datas=d.instance.getHuanhuaIds(),this.attrList.renderHandler=Handler.create(this,this.attrHandler,null,!1),this.fullLvlTxt.text="已满阶",this.totalTxt.underline=!0,this.totalTxt.typeset()},y.prototype.setOpenParam=function(t){void 0===t&&(t=void 0),i.prototype.setOpenParam.call(this,t),this._appointId=t},y.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=1,this._btnList.selectedIndex=this._appointId?p.SoulWarModel.instance.getZhanhunIndexById(this._appointId):p.SoulWarModel.instance.getZhanhunIndex()},y.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnList,"select",this,this.selectHandler),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupChangedHandler),this.onAutoEvt(this.useBtn,"click",this,this.onUseBtn),this.onAutoEvt(this.goBtn,"click",this,this.goBtnFunc),this.onAutoEvt(this.totalTxt,"click",this,this.onShowTotalAttrsClick),this.onAutoEvt(this.aboutBtn,"click",this,this.openAbout),this.onAutoEvt(this.lianhunBtn,"click",this,this.onLianhunClick),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateZhanhunInfo),this.onAutoGlobalEvt("UPDATE_ZHANHUN_INFO",this,this.updateZhanhunInfo),this.onAutoGlobalEvt("UPDATE_FIGHT_ZHANHUN_INFO",this,this.updateFightZhanhunInfo),this.onAutoGlobalEvt("UPDATE_LIANHUN_INFO",this,this.updateZhanhunInfo),this.regAutoRP(this.congealingRed,["ninghunRP"]),this.regAutoRP(this.phantomRed,["zhanhunRP"])},y.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._btnClip=this.destroyElement(this._btnClip),this._btnList=this.destroyElement(this._btnList),this._showModelClip=this.destroyElement(this._showModelClip),this.observationItem=this.destroyElement(this.observationItem),i.prototype.destroy.call(this,t)},y.prototype.selectHandler=function(){this._curHuanhuaId=d.instance.getHuanhuaIds()[this._btnList.selectedIndex],this.createSoulModel(),this.updateZhanhunInfo()},y.prototype.btnGroupChangedHandler=function(){0==this._btnGroup.selectedIndex&&WindowManager.instance.open(1372)},y.prototype.updateZhanhunInfo=function(){this.fight_num.value=p.SoulWarModel.instance.getZhanhunTotalFight().toString();var t=p.SoulWarModel.instance.getZhanhunDataById(this._curHuanhuaId),e=t?t[1]:0;this.levelTxt.value=e.toString();var i=this.levelTxt.value.length,n=22*i+this.levelTxt.spaceX*(i-1),s=this.levelImg.width+n,o=(this.width-s)/2;this.levelTxt.x=o,this.levelImg.x=o+n+2,this.noImg.visible=0==e,this.levelTxt.visible=0!=e,this.levelImg.visible=0!=e,d.instance.getOrderConfig(this._curHuanhuaId,e);var a=d.instance.getOrderConfig(this._curHuanhuaId,e+1);if(a){this.consumablesItem.visible=!0,this.goBtn.visible=!0,this.fullLvlTxt.visible=!1;var r=a[2][0];this._needItemId=r;var l=a[2][1],h=u.getPropCountById(r);this.consumablesItem.dataSource=[r,0,0,null],this.consumablesItem.setNum(u.bigNumToString(h)+"/"+u.bigNumToString(l),h<l?"#ff3e3e":"#50ff28"),l<=h?(c.thisPlay(this._btnClip),this._btnClip.x=280,this._btnClip.y=984,this._btnClip.visible=!0):(c.thisStop(this._btnClip),this._btnClip.visible=!1),this._enoughItemCount=l<=h,p.SoulWarModel.instance.isFreeZhanhun(this._curHuanhuaId)&&(this.consumablesItem.visible=!1,c.thisPlay(this._btnClip),this._btnClip.x=280,this._btnClip.y=984,this._btnClip.visible=!0,this._enoughItemCount=!0)}else this.consumablesItem.visible=!1,this.goBtn.visible=!1,this.fullLvlTxt.visible=!0,c.thisStop(this._btnClip),this._btnClip.visible=!1;this.goBtn.label=0==e?"激活":"进阶",this.updateFightZhanhunInfo(),this.attrList.dataSource=p.SoulWarModel.instance.getZhanhunAttrsByZhanhunId(this._curHuanhuaId),this.updateSkillInfo(),this.lianhunRp.visible=p.SoulWarModel.instance.checkLianhunRp(this._curHuanhuaId)},y.prototype.updateSkillInfo=function(){this.skillIcon.setData([this._curHuanhuaId,d.instance.getHunahuaSkillPureById(this._curHuanhuaId),1])},y.prototype.updateFightZhanhunInfo=function(){this._curHuanhuaId==p.SoulWarModel.instance.getFightZhanhunId()?(this.useBtn.visible=!1,this.useImg.visible=!0):(0==p.SoulWarModel.instance.getZhanhunOrderById(this._curHuanhuaId)?this.useBtn.visible=!1:this.useBtn.visible=!0,this.useImg.visible=!1)},y.prototype.attrHandler=function(t,e){var i=t.dataSource,n=l.instance.getCfgById(i[0]);t.getChildByName("nameTxt").text=n[1]+"：";var s=i[1]?i[1]:0,o=i[2]?i[2]:0;t.getChildByName("valueTxt").text=n[2]?h.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=s<o,t.getChildByName("addTxt").visible=s<o,t.getChildByName("addTxt").text=n[2]?h.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+""},y.prototype.createSoulModel=function(){var t=this._curHuanhuaId;this._showModelClip||(this._showModelClip=n.create(1024,1024,1024),this.effectContent.addChild(this._showModelClip),this._showModelClip.anchorX=.5,this._showModelClip.anchorY=.5,this._showModelClip.centerX=0,this._showModelClip.centerY=0),this._showModelClip.reset(t);var e=s.instance.getCfgById(t);this._showModelClip.avatarScale=e[10]?e[10]:1,this._showModelClip.avatarRotationX=e[6],this._showModelClip.avatarRotationY=e[7],this._showModelClip.avatarY=e[9],this._showModelClip.avatarX=e[8],this._showModelClip.setActionType("skill",0),this.observationItem.data=[[this._showModelClip,Math.round(t/1e3)]],this.nameTxt.text=e[2];var i=d.instance.getLianhunConfigByLvl(this._curHuanhuaId,1)[2][0];this.lianhunIcon.skin=u.getIconById(i)},y.prototype.goBtnFunc=function(){this._enoughItemCount?p.SoulWarCtrl.instance.ZhanhunAddLevel(this._curHuanhuaId):o.openLackPropAlert(this._needItemId,1)},y.prototype.onShowTotalAttrsClick=function(){p.SoulWarModel.instance.calcAllZhanhunAttrs()},y.prototype.onLianhunClick=function(){if(0!=p.SoulWarModel.instance.getZhanhunOrderById(this._curHuanhuaId))WindowManager.instance.openDialog(1376,[this._curHuanhuaId]);else{var t=s.instance.getCfgById(this._curHuanhuaId);e.notice.SystemNoticeManager.instance.addNotice("激活"+t[2]+"后开启",!0)}},y.prototype.onUseBtn=function(){p.SoulWarCtrl.instance.SetFightZhanhun(this._curHuanhuaId)},y.prototype.openAbout=function(){u.alertHelp(19063)},m=y,p.SoulZhanhunPanel=m}(modules=modules||{}),function(t){var e,i,h,p,c,u,d,m,n,y,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.soul_war||(t.soul_war={}),h=t.common.CommonUtil,p=t.config.SkillCfg,c=t.effect.SuccessEffectCtrl,u=t.config.SkillPureCfg,d=t.config.SoulWarCfg,m=t.soul_war.SoulWarModel,n=t.soul_war.SoulWarCtrl,y=t.config.ExteriorCfg,i=ui.SkillAlertUI,__extends(o,i),o.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),i.prototype.destroy.call(this)},o.prototype.initialize=function(){i.prototype.initialize.call(this),this.btnClip=h.creatEff(this,"btn_light",15),this.btnClip.pos(this.btn.x-5,this.btn.y-10),this.btnClip.visible=!1,this.titleTxt.text="战魂技能"},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_ZHANHUN_INFO",this,this.updateInfo),this.onAutoClick(this.btn,this,this.activateOrUpHandler)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._zhanhunId=t[0],this._skillPureId=t[1]},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._tLv=void 0,this.updateInfo()},o.prototype.updateInfo=function(){var t=u.instance.getCfgById(this._skillPureId);this.iconImg.skin="assets/icon/skill/"+t[6]+".png";var e=m.instance.getZhanhunSkillIdById(this._zhanhunId),i=e?e%1e4:0,n=0==i?1e4*this._skillPureId+1:e+1,s=m.instance.getZhanhunOrderById(this._zhanhunId),o=d.instance.getHuanhuaNeedOrderBySkillId(n);this._nextSkillId=n;var a=p.instance.getCfgById(e),r=p.instance.getCfgById(this._nextSkillId);this.iconImg.skin="assets/icon/skill/"+t[6]+".png",this.nameTxt.text=t[1]+"  Lv."+i,this.curLvDesc.text=a?h.stringFormat(t[5],a[2]):"无",this.powerTxt.text="战力："+(0==i?0:a[3]),this.btn.visible=this.conditionTxt.visible=!0;var l=y.instance.getCfgById(this._zhanhunId)[2];this.conditionTxt.y=462,this.conditionTxt.fontSize=27,0==i?(this.btn.label="激活",this.conditionTxt.text=l+"达到"+o+"阶",this.curLvDesc.text="无",this.conditionTxt.color="#ED1100",this.nextLvDesc.text=h.stringFormat(t[5],r[2])):(this.curLvDesc.text=h.stringFormat(t[5],a[2]),this.btn.label="升级",o?(this.conditionTxt.text=l+"达到"+o+"阶",this.conditionTxt.color="#ED1100",this.nextLvDesc.text=h.stringFormat(t[5],r[2])):(this.btn.visible=!1,this.conditionTxt.text="已满级",this.conditionTxt.color="#00AD35",this.nextLvDesc.text="已达最大等级",this.conditionTxt.y=503,this.conditionTxt.fontSize=30),null!=this._tLv&&(1==i&&0===this._tLv?c.instance.play("assets/others/tx_jinjiechengong5.png"):i!==this._tLv&&-1!==this._tLv&&c.instance.play("assets/others/tx_jinjiechengong4.png"))),this._tLv=i,null!=s&&null!=o&&o<=s?(this.btnClip.visible=!0,this.btnClip.play(),this.btn.gray=!1,this.btn.mouseEnabled=!0,this.conditionTxt.visible=!1):(this.btnClip.visible=!1,this.btnClip.stop(),this.btn.gray=!0,this.btn.mouseEnabled=!1,this.conditionTxt.visible=!0),this.btnClip.y=this.btn.y-10},o.prototype.activateOrUpHandler=function(){n.instance.ZhanhunSkillUp(this._zhanhunId,this._nextSkillId)},s=o,e.SoulZhanhunSkillAlert=s}(modules=modules||{}),function(c){var t,e,u,d,m,y,f,i;function n(){return null!==e&&e.apply(this,arguments)||this}t=c.soul_war||(c.soul_war={}),u=c.common.CommonUtil,d=c.config.SkillCfg,m=c.config.SkillPureCfg,y=c.config.SoulWarCfg,f=c.soul_war.SoulWarModel,e=ui.SoulFightSkillAlertUI,__extends(n,e),n.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),e.prototype.destroy.call(this)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this.list.renderHandler=Handler.create(this,this.skillHandler,null,!1)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this)},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._skillPureId=t[1]},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},n.prototype.updateInfo=function(){var t=m.instance.getCfgById(this._skillPureId);t?(this.iconImg.skin="assets/icon/skill/"+t[6]+".png",this.nameTxt.text=t[1]):this.nameTxt.text="skill_pure表不存在ID："+this._skillPureId;var e=d.instance.getCfgById(1e4*this._skillPureId+1);this.curDesc.text=e&&t?u.stringFormat(t[5],e[2]):"无",this.list.dataSource=y.instance.getHuanhuaIds(),this.descTxt.visible=!0;for(var i=0;i<y.instance.getHuanhuaIds().length;i++){var n=y.instance.getHuanhuaIds()[i];if(0<f.instance.getZhanhunOrderById(n)){this.descTxt.visible=!1;break}}},n.prototype.skillHandler=function(t,e){var i=t.dataSource,n=t.getChildByName("desc_txt_1"),s=t.getChildByName("desc_txt_2"),o=f.instance.getZhanhunSkillIdById(i),a=y.instance.getHunahuaSkillPureById(i),r=o?o%1e4:0;0==r&&(o=1e4*a+1);var l=m.instance.getCfgById(a),h=d.instance.getCfgById(o),p=c.config.ExteriorCfg.instance.getCfgById(i);0==r?(n.text=u.stringFormat(l[7],h[2]),s.text="（激活"+p[2]+"获得）",s.color="#ff3e3e"):(n.text=u.stringFormat(l[7],h[2]),s.text="（魂技"+l[1]+"升级提升效果）",s.color="#0ecf09")},i=n,t.SoulFightSkillAlert=i}(modules=modules||{}),function(t){var e,i;function n(){this.maxTypeNum=0,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabByType={},this._arr=GlobalData.getConfig("warband_war_achieve");for(var t=0;t<this._arr.length;t++){var e=this._arr[t],i=(this._tab[e[0]]=e)[1];this.maxTypeNum=i>this.maxTypeNum?i:this.maxTypeNum,this._tabByType[i]||(this._tabByType[i]=new Array),this._tabByType[i].push(e)}},n.prototype.getArr=function(){return this._arr},n.prototype.getDateByid=function(t){return this._tab[t]},n.prototype.getDateByType=function(t){return this._tabByType[t]},i=n,e.WarbandWarAchieveCfg=i}(modules=modules||{}),function(t){var p,e,c,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}p=t.team_warfare||(t.team_warfare={}),c=t.config.WarbandWarAchieveCfg,i=t.common.SimpleList,e=ui.TeamWarfareAchievementAlertUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(p.TeamWarfareAchievementItem,571,156,1,1,0,5),this._list.size(571,478),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("WARBAND_WAR_ACHIEVE_INFO_REPLY",this,this.showUI)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.titleText.text="成就奖励",this.text3.visible=this.text4.visible=this.helpBtn.visible=!1,this.height=this.bgImg.height=650,this.text2.y=650,this.listBox.height=478,this.img.height=512,p.TeamWarfareCtrl.instance.WarbandWarAchieveInfo(),this.showUI()},s.prototype.showUI=function(){for(var t=new Array,e=1;e<=c.instance.maxTypeNum;e++){var i=c.instance.getDateByType(e);if(i){for(var n=null,s=0;s<i.length;s++){var o=i[s];if(o){o[0];var a=o[1],r=o[2],l=p.TeamWarfareModel.instance.getAchieveInfoBType(a),h=l[0];if(l[1]<r){if(r<=h){t.push(o),n=null;break}if(h<r){t.push(o),n=null;break}}n=o}}n&&t.push(n)}t.sort(this.sortFunc.bind(this)),this._list.datas=t}},s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1],a=p.TeamWarfareModel.instance.getAchievementState(i,s),r=p.TeamWarfareModel.instance.getAchievementState(n,o);return a===r?i-n:a-r},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n=s,p.TeamWarfareAchievementAlert=n}(modules=modules||{}),function(t){var l,e,i,n;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t._oldScrollPos=0,t}l=t.team_warfare||(t.team_warfare={}),i=t.common.SimpleList,e=ui.TeamWarfareAchievementAlertUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(l.TeamWarfareBattlefieldTargetItem,571,156,1,1,0,5),this._list.size(571,639),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_JOIN_AWARD",this,this.showUI),this.onAutoGlobalEvt("UPDATE_WARBANDWAR_COIN",this,this.showUI),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.titleText.text="目标奖励",this._oldScrollPos=0,this.text3.visible=this.text4.visible=this.helpBtn.visible=!0,this.height=this.bgImg.height=849,this.text2.y=846,this.showUI()},s.prototype.setUI=function(){var t=l.TeamWarfareModel.instance.coinNum;this.text4.text=""+t,this.text4.color="#344C6F",CommonUtil.adaptationImgAndText([[this.text3,1,0],[this.text4,1,0],[this.helpBtn,2,0]],this.width,0,"center")},s.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19077)},s.prototype.showUI=function(){this._oldScrollPos=this._list.scrollPos,l.TeamWarfareModel.instance.battlefieldTargetArrCfg.sort(this.sortFunc.bind(this)),this._list.datas=l.TeamWarfareModel.instance.battlefieldTargetArrCfg,this._list.scrollPos=this._oldScrollPos,this.setUI()},s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1],a=l.TeamWarfareModel.instance.getBattleTarGetState(i),r=l.TeamWarfareModel.instance.getBattleTarGetState(n);return a===r?s-o:a-r},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n=s,l.TeamWarfareBattlefieldTargetAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.timeNum=0,t}e=t.team_warfare||(t.team_warfare={}),i=ui.TeamWarfareBossCopyRightViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.right=0,this.bottom=335,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.teamBox,this,this.teamBoxHandler),this.regAutoRP(this.rpImg,["teamWarfareRP1"]),this.onAutoGlobalEvt("WARBAND_WARBOSS_HURT_DRAW_INFO_REPLY",this,this.showUI),this.onAutoGlobalEvt("DUNGEON_BROADCAST_BEGIN_COMBAT",this,this.showTime)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.showUI(),this.timeText.color="#50ff28",Laya.timer.clear(this,this.loopHandler),this.timeText.text="等待开始",this.showTime()},s.prototype.teamBoxHandler=function(){WindowManager.instance.open(1422)},s.prototype.showUI=function(){this.hurtText.text=""+CommonUtil.bigNumToString(e.TeamWarfareModel.instance.hurt)},s.prototype.showTime=function(){console.log("副本剩余时间：",t.dungeon.DungeonModel.instance.broadcastBeginCombat),this.timeNum=t.dungeon.DungeonModel.instance.broadcastBeginCombat?GlobalData.serverTime+t.dungeon.DungeonModel.instance.broadcastBeginCombat[0]:0,Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},s.prototype.loopHandler=function(){this.timeNum>GlobalData.serverTime?(this.timeText.color="#50ff28",this.timeText.text=t.common.CommonUtil.msToMMSS(this.timeNum-GlobalData.serverTime)):(this.timeText.text="00:00",this.timeText.color="#ff3e3e",Laya.timer.clear(this,this.loopHandler))},s.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},n=s,e.TeamWarfareBossCopyRightPanel=n}(modules=modules||{}),function(t){var h,e,i,n,s,o;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._ceshi=[[[2,1],[2,2],[3,3]],[[2,1],[2,2],[3,3]],[[2,1],[2,2],[3,3]]],t._oldindx=0,t._oldScrollPos=0,t}h=t.team_warfare||(t.team_warfare={}),i=laya.events.Event,n=t.common.SimpleList,s=t.common.BtnGroup,e=ui.TeamWarfareDuelAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(h.TeamWarfareDuelItem,590,208,1,1,0,5),this._list.size(590,504),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._listGroup=n.create(h.TeamWarfareGroupItem,124,41,2,1,0,0),this._listGroup.size(372,41),this.listBox1.addChild(this._listGroup),this._listGroup.pos(0,0,!0),this._btnGroup=new s,this._btnGroup.setBtns(this.group1,this.group2,this.group3),CommonUtil.setHTMLPro(this.timeTxtHTML,"#3a5385","SimHei",24,"center")},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,i.CHANGE,this,this.changeHandler),this.onAutoEvt(this._listGroup,i.SELECT,this,this.selectHandler),this.onAutoGlobalEvt("GET_WARBAND_WAR_GUESSLIST_REPLY",this,this.setDate),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("REQ_WARBAND_WARGUESS_REPLY",this,this.updateUI)},a.prototype.selectHandler=function(){-1!=this._listGroup.selectedIndex&&this.setDate()},a.prototype.changeHandler=function(){if(-1!=this._btnGroup.selectedIndex){this.listBox1.visible=this._btnGroup.selectedIndex<=1;var t=h.TeamWarfareModel.instance.getRound();if(this._btnGroup.selectedIndex+1>t&&this._btnGroup.selectedIndex!=this._oldindx)return CommonUtil.noticeError(0,"还未到此轮比赛 请耐心等待"),void(this._btnGroup.selectedIndex=this._oldindx);h.TeamWarfareCtrl.instance.GetWarbandWarGuessList(this._btnGroup.selectedIndex+1),this._oldindx=this._btnGroup.selectedIndex,this._listGroup.datas=this._ceshi[this._btnGroup.selectedIndex],this._listGroup.selectedIndex=0}},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._oldScrollPos=0;var t=h.TeamWarfareModel.instance.getRound();this._btnGroup.selectedIndex=1<=t&&t<=3?t-1:0,this.setTimeUI()},a.prototype.setTimeUI=function(){Laya.timer.clear(this,this.loppHearl);var t=h.TeamWarfareModel.instance.getRound();this.timeTxtHTML.innerHTML="比赛已结束",h.TeamWarfareModel.instance.nextTime>GlobalData.serverTime&&1<=t&&t<=3&&(Laya.timer.loop(1e3,this,this.loppHearl),this.loppHearl())},a.prototype.loppHearl=function(){if(h.TeamWarfareModel.instance.nextTime>GlobalData.serverTime){var t=h.TeamWarfareModel.instance.getState(),e=h.TeamWarfareModel.instance.getRound(),i=CommonUtil.timeStampToMMSS(h.TeamWarfareModel.instance.nextTime);1!==e||t?1===e&&t?this.timeTxtHTML.innerHTML="争夺战精英组半决赛"+i+"后结束":2!==e||t?2===e&&t?this.timeTxtHTML.innerHTML="争夺战精英组决赛"+i+"后结束":3!==e||t?3===e&&t&&(this.timeTxtHTML.innerHTML="巅峰战"+i+"后结束"):this.timeTxtHTML.innerHTML="巅峰战"+i+"后开启":this.timeTxtHTML.innerHTML="争夺战精英组决赛"+i+"后开启":this.timeTxtHTML.innerHTML="争夺战精英组半决赛"+i+"后开启"}else this.timeTxtHTML.innerHTML="竞猜已结束"},a.prototype.updateUI=function(t){void 0===t&&(t=0),-1!=this._btnGroup.selectedIndex&&-1==this._listGroup.selectedIndex&&(t?t===this._btnGroup.selectedIndex+1&&h.TeamWarfareCtrl.instance.GetWarbandWarGuessList(t):h.TeamWarfareCtrl.instance.GetWarbandWarGuessList(this._btnGroup.selectedIndex+1))},a.prototype.setDate=function(){if(this.listBox1.visible=this.img2.visible=this.img3.visible=2!=this._btnGroup.selectedIndex,-1!=this._btnGroup.selectedIndex&&-1!=this._listGroup.selectedIndex){var t=h.TeamWarfareModel.instance.guessListTable[this._btnGroup.selectedIndex+1][this._listGroup.selectedIndex];if(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push([this._btnGroup.selectedIndex+1,n])}this._oldScrollPos=this._list.scrollPos,this._list.datas=e||[];var s=h.TeamWarfareModel.instance.totalGoldTable[this._btnGroup.selectedIndex+1],o=h.TeamWarfareModel.instance.totalGoldTableCfg[this._btnGroup.selectedIndex+1][0],a=h.TeamWarfareModel.instance.totalGoldTableCfg[this._btnGroup.selectedIndex+1][2],r=o-s,l=0<r?"#1f304d":"#ff3e3e";this.text2.text=r+"/"+o,this.text2.color=l,this.text4.text=""+a,this.setTextPos(),this._list.scrollPos=this._oldScrollPos}}},a.prototype.setTextPos=function(){CommonUtil.adaptationImgAndText([[this.text1,1,0],[this.text2,1,0]],this.width,0,"center"),CommonUtil.adaptationImgAndText([[this.text3,1,0],[this.img1,2,0],[this.text4,1,0]],this.width,0,"center")},a.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loppHearl),h.TeamWarfareCtrl.instance.GetWarbandWarGuessList(1),h.TeamWarfareCtrl.instance.GetWarbandWarGuessList(2),h.TeamWarfareCtrl.instance.GetWarbandWarGuessList(3)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._listGroup=this.destroyElement(this._listGroup),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this)},o=a,h.TeamWarfareDuelAlert=o}(modules=modules||{}),function(t){var e,i;function n(){this.rewards=[],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("scene_warbandwar_boss");if(t)for(var e=0;e<t.length;e++){var i=t[e];i&&0===e&&(this.rewards=i[5])}},i=n,e.SceneWarbandwarBossCfg=i}(modules=modules||{}),function(t){var a,e,i,n,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._oldScrollPos=0,t}a=t.team_warfare||(t.team_warfare={}),i=t.config.SceneWarbandwarBossCfg,n=t.common.SimpleList,e=ui.TeamWarfareHurtRewardAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(a.TeamWarfareHurtRewardAlertItem,571,156,1,1,0,5),this._list.size(571,639),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("WARBAND_WARBOSS_HURT_DRAW_INFO_REPLY",this,this.showUI)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.titleText.text="伤害奖励",this._oldScrollPos=0,this.showUI(),a.TeamWarfareCtrl.instance.WarbandWarBossHurtDrawInfo()},o.prototype.showUI=function(){this._oldScrollPos=this._list.scrollPos,i.instance.rewards.sort(this.sortFun.bind(this)),this._list.datas=i.instance.rewards,this._list.scrollPos=this._oldScrollPos},o.prototype.sortFun=function(t,e){var i=t[0],n=e[0],s=a.TeamWarfareModel.instance.getHurtState(i),o=a.TeamWarfareModel.instance.getHurtState(n);return s!=o?s-o:i-n},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s=o,a.TeamWarfareHurtRewardAlert=s}(modules=modules||{}),function(t){var s,e,i,n,o;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.team_warfare||(t.team_warfare={}),i=laya.events.Event,n=t.common.AvatarClip,e=ui.TeamWarfareMoBaiAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._avatarClip=n.create(1560,1560,850),this.addChild(this._avatarClip),this._avatarClip.pos(340,675,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this.cancelBtn,i.CLICK,this,this.cancelBtnHandler),this.onAutoGlobalEvt("WARBAND_WARKING_SHOW_REPLY",this,this.showUI),this.onAutoGlobalEvt("WARBAND_WAR_WORSHIP_TIMES",this,this.setBtnUI),this.regAutoRP(this.rpImg,["teamWarfareRP3"])},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI(),this.setBtnUI(),s.TeamWarfareCtrl.instance.ReqWarbandWarWorshipTimes()},a.prototype.showUI=function(){if(s.TeamWarfareModel.instance.show){var t=s.TeamWarfareModel.instance.show[1],e=s.TeamWarfareModel.instance.show[2],i=s.TeamWarfareModel.instance.show[3],n=s.TeamWarfareModel.instance.show[10];this._avatarClip.reset(t,e,i,0,0,n),this.observationItem.data=[[this._avatarClip,0]],this.text2.text=s.TeamWarfareModel.instance.roleName,this.text1.text=s.TeamWarfareModel.instance.warbandName}},a.prototype.setBtnUI=function(){this.img2.gray=this.cancelBtn.gray=s.TeamWarfareModel.instance.moBaiNum>=s.TeamWarfareModel.instance.moBaiMaxNum},a.prototype.cancelBtnHandler=function(){s.TeamWarfareModel.instance.show&&0<s.TeamWarfareModel.instance.warbandId?s.TeamWarfareCtrl.instance.WarbandWarWorship():CommonUtil.noticeError(0,"膜拜次数已用尽",!0)},a.prototype.close=function(){e.prototype.close.call(this),s.TeamWarfareCtrl.instance.ReqWarbandWarWorshipTimes()},a.prototype.destroy=function(){this._avatarClip=this.destroyElement(this._avatarClip),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this)},o=a,s.TeamWarfareMoBaiAlert=o}(modules=modules||{}),function(i){var n,e,t,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowIdx=0,t.isClick=!0,t}n=i.team_warfare||(i.team_warfare={}),t=i.common.BtnGroup,e=ui.TeamWarfareViewUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnGroup=new t,this._btnGroup.setBtns(this.arenaBtn,this.teamWarfareBtn)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.rankBtn,this,this.rankBtnHandler).onAutoClick(this.achBtn,this,this.achBtnHandler).onAutoClick(this.preBtn,this,this.preBtnHandler).onAutoClick(this.nextBtn,this,this.nextBtnHandler).onAutoEvt(this._btnGroup,"change",this,this.changeHandler).onAutoGlobalEvt("RED_POINT",this,this.setRp).regAutoRP(this.jingjiRP,["fireContentionRP","fireContentionAchievementRP"]).regAutoRP(this.teamWarfareRP,["teamWarfareRP7","teamWarfareRP","teamWarfareRP1","teamWarfareRP2","teamWarfareRP3","teamWarfareRP4","teamWarfareRP5"]).regAutoRP(this.rpImg,["teamWarfareRP5"])},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),n.TeamWarfareCtrl.instance.WarbandWarBossHurtDrawInfo(),n.TeamWarfareCtrl.instance.WarbandWarKingShow(),n.TeamWarfareCtrl.instance.WarbandWarAchieveInfo(),n.TeamWarfareCtrl.instance.ReqWarbandWarWorshipTimes(),n.TeamWarfareCtrl.instance.WarbandWarInfoList(),this._btnGroup.selectedIndex=1,this.setPosByState(),Laya.timer.once(1200,this,function(){n.TeamWarfareCtrl.instance.WarbandWarKingShow()})},o.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex&&(WindowManager.instance.open(865),this._btnGroup.selectedIndex=1)},o.prototype.setPosByState=function(){this.isClick=!0;var t=n.TeamWarfareModel.instance.getRound(!1),e=n.TeamWarfareModel.instance.getWarCopyState();3===e?this.nowIdx=0:n.TeamWarfareModel.instance.isHaveMoBai()&&8!=e&&7!=e&&3!=e?this.nowIdx=2:this.nowIdx=1<=t&&t<=2?1:3===t||4===t?2:0,this.setUIPos()},o.prototype.setUIPos=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),0===this.nowIdx?this.setUIAll(this.UIItem1,this.UIItem2,this.UIItem3,t,e):1===this.nowIdx?this.setUIAll(this.UIItem2,this.UIItem3,this.UIItem1,t,e):2===this.nowIdx&&this.setUIAll(this.UIItem3,this.UIItem1,this.UIItem2,t,e),this.showBtn()},o.prototype.setUIAll=function(t,e,i,n,s){var o=this;void 0===n&&(n=!1),void 0===s&&(s=!1),n?(this.isClick=!1,this._tween1=TweenJS.create(t).to({centerX:s?57:-57,scaleX:.9,scaleY:.9},150).onComplete(function(){t.zOrder=s?0:1,o.isClick=!0,o.setRp("teamWarfareRP3")}).start(),this._tween2=TweenJS.create(e).to({centerX:s?0:57,scaleX:s?1:.9,scaleY:s?1:.9},150).onComplete(function(){e.zOrder=s?3:0,o.isClick=!0,o.setRp("teamWarfareRP3")}).start(),this._tween3=TweenJS.create(i).to({centerX:s?-57:0,scaleX:s?.9:1,scaleY:s?.9:1},150).onComplete(function(){i.zOrder=s?1:3,o.isClick=!0,o.setRp("teamWarfareRP3")}).start(),this.bgImg.zOrder=2):(t.zOrder=3,this.bgImg.zOrder=2,e.zOrder=1,i.zOrder=0,t.centerX=0,t.scale(1,1,!0),e.centerX=-57,e.scale(.9,.9,!0),i.centerX=57,i.scale(.9,.9,!0),this.setRp("teamWarfareRP3"))},o.prototype.setRp=function(t){if("teamWarfareRP3"===t||"teamWarfareRP1"===t||"teamWarfareRP4"===t||"teamWarfareRP7"===t||"teamWarfareRP"===t){var e=n.TeamWarfareModel.instance.getRound();switch(this.nowIdx){case 0:this.preRpImg.visible=!1,this.nextRpImg.visible=i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP4")||i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP3")||i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP7");break;case 1:this.preRpImg.visible=i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP1")||i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP"),this.nextRpImg.visible=3===e&&i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP4")||i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP3");break;case 2:this.preRpImg.visible=i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP1")||i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP")||2===e&&i.redPoint.RedPointCtrl.instance.getRPProperty("teamWarfareRP7"),this.nextRpImg.visible=!1}}},o.prototype.showBtn=function(){this.preBtn.visible=0<this.nowIdx,this.nextBtn.visible=this.nowIdx<2},o.prototype.rankBtnHandler=function(){WindowManager.instance.open(1424)},o.prototype.achBtnHandler=function(){WindowManager.instance.open(1419)},o.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19061)},o.prototype.preBtnHandler=function(){this.isClick&&(this.setUIPos(!0,!1),this.nowIdx--,this.nowIdx=this.nowIdx<0?0:this.nowIdx,this.showBtn())},o.prototype.nextBtnHandler=function(){this.isClick&&(this.setUIPos(!0,!0),this.nowIdx++,this.nowIdx=2<this.nowIdx?2:this.nowIdx,this.showBtn())},o.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clearAll(this)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),this._tween1&&(this._tween1.stop(),this._tween1=null),this._tween2&&(this._tween2.stop(),this._tween2=null),this._tween3&&(this._tween3.stop(),this._tween3=null),e.prototype.destroy.call(this,t)},s=o,n.TeamWarfarePanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tabByRank={},this._tabByRank1={},this._arr=[],this._arr1=[];var t=GlobalData.getConfig("warband_war_rank");if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=i[0],s=i[1][0],o=i[1][1];1===n?this._arr.push(i):2===n&&this._arr1.push(i);for(var a=s;a<=o;a++)1===n?this._tabByRank[a]=i:2===n&&(this._tabByRank1[a]=i)}}},n.prototype.getCfgByRank=function(t){return this._tabByRank[t]},n.prototype.getArr=function(){return this._arr},n.prototype.getCfgByRank1=function(t){return this._tabByRank1[t]},n.prototype.getArr1=function(){return this._arr1},i=n,e.WarbandWarRankCfg=i}(modules=modules||{}),function(a){var r,t,l,e,i,n,s;function o(){return null!==t&&t.apply(this,arguments)||this}r=a.team_warfare||(a.team_warfare={}),l=a.config.WarbandWarRankCfg,e=a.common.SimpleList,i=a.common.CustomList,n=a.common.BtnGroup,t=ui.TeamWarfareRankRewardAlertUI,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=e.create(r.TeamWarfareRankRewardItem,571,115),this._list.size(571,702),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list1=i.create("v",0,0,596,737,r.TeamWarfareRankRewardItem1,0),this._list1.size(596,737),this.listBox1.addChild(this._list1),this._list1.pos(0,0,!0),this._btnGroup=new n,this._btnGroup.setBtns(this.group_1,this.group_2),CommonUtil.setHTMLPro(this.tipTxt,"#b15315","SimHei",22,"center","middle")},o.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler)},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),r.TeamWarfareModel.instance._nowIndex2=this._btnGroup.selectedIndex=0},o.prototype.changeHandler=function(){r.TeamWarfareModel.instance._nowIndex2=this._btnGroup.selectedIndex,this.listBox.visible=this.box.visible=0===this._btnGroup.selectedIndex,this.listBox1.visible=1===this._btnGroup.selectedIndex,0===this._btnGroup.selectedIndex?this.showUI():1===this._btnGroup.selectedIndex&&this.showUI()},o.prototype.showUI=function(){var t=this;if(this._list.visible=0===this._btnGroup.selectedIndex,this._list1.visible=1===this._btnGroup.selectedIndex,0===this._btnGroup.selectedIndex)this.text3.text="首领战",this.tipTxt.innerHTML="周"+a.union_war.UnionWarModel.instance.getStr(r.TeamWarfareModel.instance.bossCopyDay)+"<span style='color:#ff3e3e'>22:00</span>根据战队排名结算奖励",this._list.datas=l.instance.getArr();else if(1===this._btnGroup.selectedIndex){this.text3.text="巅峰战";var e=a.union_war.UnionWarModel.instance.getWarCopyTimeStr(19);this.tipTxt.innerHTML="周"+a.union_war.UnionWarModel.instance.getStr(e[0])+"<span style='color:#ff3e3e'>21:10</span>战队逐鹿结算时发放奖励以及相应福地";for(var i=[],n=l.instance.getArr1(),s=0;s<n.length;s++){var o=n[s];i.push([s,o])}this._list1.datas=i,this._list1.relayout(),Laya.timer.once(300,this,function(){t._list1.relayout()})}},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),t.prototype.destroy.call(this)},s=o,r.TeamWarfareRankRewardAlert=s}(modules=modules||{}),function(a){var r,e,t,i,n;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t._listState=!0,t}r=a.team_warfare||(a.team_warfare={}),t=a.common.SimpleList,i=Laya.Event,e=ui.TeamWarfareSportsCopyRightViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=3,this.bottom=281,this.closeByOthers=!1,this.layer=3,this._list=t.create(r.TeamWarfareSportsCopyRightPlayerItem,280,40),this.addChild(this._list),this._list.size(280,200),this._list.pos(5,43,!0),this._list.canSelectSameItem=!0,this._list1=t.create(r.TeamWarfareSportsCopyItem,330,50),this.addChild(this._list1),this._list1.size(330,200),this._list1.pos(295,43,!0),this._list1.canSelectSameItem=!0},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._list,i.SELECT,this,this.selectHandler),this.onAutoEvt(this._list1,i.SELECT,this,this.selectHandler1),this.onAutoClick(this.expandBtn,this,this.expandBtnHandler),this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updateMyRecord),this.onAutoGlobalEvt("SCENE_REMOVE_HUMANS",this,this.updateMyRecord),this.onAutoGlobalEvt("UPDATE_WARBAND_WARGATHER_LIST",this,this.updateMyRecord),this.onAutoGlobalEvt("FIRE_CONTENTION_UPDATE_RANK",this,this.updateMyRecord)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateMyRecord(),this.updateGeather(),this._list.selectedIndex=-1,this._list1.selectedIndex=-1},s.prototype.selectHandler=function(){if(-1!=this._list.selectedIndex)if(r.TeamWarfareModel.instance.isPlayer())if(0==r.TeamWarfareModel.instance.gatherOcc)if(PlayerModel.instance.isUnseen)CommonUtil.noticeError(0,"幽灵状态不能发起攻击");else{var t=this._list.selectedData[5][0];t!==PlayerModel.instance.actorId?r.TeamWarfareModel.instance.getIsUnseen(t)?CommonUtil.noticeError(0,"无法攻击处于幽灵状态的玩家"):(this.WarFireLeave(),console.log("点 去找这个玩家"+t),PlayerModel.instance.selectTarget(2,t)):CommonUtil.noticeError(0,"无法攻击自己",!0)}else CommonUtil.noticeError(0,"正在携带炎晶返回出生点，无法进行其他操作");else CommonUtil.noticeError(0,"请耐心等待，"+CommonUtil.msToSS(r.TeamWarfareModel.instance.getTimeNum(),!1)+"秒后开启战斗")},s.prototype.selectHandler1=function(){if(-1!=this._list1.selectedIndex)if(r.TeamWarfareModel.instance.isPlayer())if(0==r.TeamWarfareModel.instance.gatherOcc){var t=this._list1.selectedData;this.WarFireLeave(),t&&(console.log("点击操作 去找  该采集物 "+t),PlayerModel.instance.selectTarget(3,t))}else CommonUtil.noticeError(0,"正在携带炎晶返回出生点，无法进行其他操作");else CommonUtil.noticeError(0,"请耐心等待，"+CommonUtil.msToSS(r.TeamWarfareModel.instance.getTimeNum(),!1)+"秒后开启战斗")},s.prototype.WarFireLeave=function(){5===PlayerModel.instance.selectTargetType&&(console.log("任意操作取消跟随 "),PlayerModel.instance.selectTarget(0,-1),a.fire_contention.FireContentionCtrl.instance.WarFireLeave(PlayerModel.instance.selectTargetId))},s.prototype.expandBtnHandler=function(){this._listState?this._listState=!1:this._listState=!0,this.changUI()},s.prototype.changUI=function(){this.img.visible=this._listState,this.bgImg.height=this._listState?250:81,this.bgImg.y=this._listState?1:170,this._list.height=this._listState?200:30,this._list.y=this._listState?43:212,this.titleText.y=this._listState?13:182,this.expandBtn.y=this._listState?13:182,this.expandImg.skin=this._listState?"common/btn_tonyong_28.png":"common/btn_tonyong_29.png",this.updateMyRecord()},s.prototype.updateMyRecord=function(){for(var t=a.scene.SceneModel.instance.humans,e=[],i=0,n=t.length;i<n;i++)(o=(s=t[i])[5][0])==PlayerModel.instance.actorId||r.TeamWarfareModel.instance.getIsUnseen(o)||a.warband.WarbandModel.instance.isMyWarBandPeople(o)||e.push(s);if(this._list.selectedIndex=-1,this._scrollPosOld1=this._list.scrollPos,e.sort(this.sortPlayer.bind(this)),this._list.datas=e,this._list.scrollPos=this._scrollPosOld1,-1!=this._list.selectedIndex&&null!=this._list.selectedData)for(i=0,n=e.length;i<n;i++){var s,o;if((o=(s=e[i])[5][0])===this._list.selectedData[5][0]){this._list.selectedIndex=i;break}}},s.prototype.updateGeather=function(){this._list1.datas=r.TeamWarfareModel.instance.collectionArr},s.prototype.sortPlayer=function(t,e){return r.TeamWarfareModel.instance.getBanYunOccById(e)-r.TeamWarfareModel.instance.getBanYunOccById(t)},s.prototype.close=function(){e.prototype.close.call(this),a.team_warfare.TeamWarfareModel.instance.gatherOcc=0,a.fire_contention.FireContentionModel.instance.powerById={}},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),e.prototype.destroy.call(this,t)},n=s,r.TeamWarfareSportsCopyRightPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.team_warfare||(t.team_warfare={}),i=ui.TeamWarfareSportsCopyRightView1UI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.zOrder=-1,this.right=8,this.bottom=544,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.teamBoxBtn,this,this.teamBoxBtnHandler),this.onAutoClick(this.battlefieldBtn,this,this.battlefieldBtnHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.regAutoRP(this.rpImg1,["teamWarfareRP5"]),this.regAutoRP(this.rpImg,["teamWarfareRP6"])},s.prototype.teamBoxBtnHandler=function(){WindowManager.instance.open(1419)},s.prototype.battlefieldBtnHandler=function(){WindowManager.instance.open(1420)},s.prototype.btnHandler=function(){CommonUtil.alertHelp(19081)},n=s,e.TeamWarfareSportsCopyRightPanel1=n}(modules=modules||{}),function(a){var r,e,t;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeNum=0,t}r=a.team_warfare||(a.team_warfare={}),e=ui.TeamWarfareSportsCopyTopViewUI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.zOrder=-2,this.top=159,this.closeByOthers=!1,this.layer=3,CommonUtil.setHTMLPro(this.timeText,"#50ff28","SimHei",24,"center")},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("WARBAND_WARCOPY_MATCHINFO",this,this.showUI),this.onAutoGlobalEvt("DUNGEON_BROADCAST_BEGIN_COMBAT",this,this.showTimeUI)},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showTimeUI(),this.showUI()},i.prototype.showUI=function(){var t=r.TeamWarfareModel.instance.copyMatchInfo[0],e=r.TeamWarfareModel.instance.copyMatchInfo[1],i=r.TeamWarfareModel.instance.copyMatchInfo[2];this.setUI(1,t,this.nameText,this.scoreText,this.isNull),this.setUI(2,e,this.nameText1,this.scoreText1,this.isNull1),this.setUI(3,i,this.nameText2,this.scoreText2,this.isNull2)},i.prototype.setUI=function(t,e,i,n,s){if(e&&0<e[0]){i.visible=n.visible=!0,s.visible=!1,i.text=e[2],n.text="积分"+e[3]+"/"+r.TeamWarfareModel.instance.scoreMaxNum;var o=e[0]===a.warband.WarbandModel.instance.warbandId;switch(t){case 1:this.text1.text=o?"我":"红";break;case 2:this.text2.text=o?"我":"蓝";break;case 3:this.text3.text=o?"我":"橙"}}else i.visible=!1,n.visible=!1,s.visible=!0},i.prototype.showTimeUI=function(){this.timeNum=a.dungeon.DungeonModel.instance.broadcastBeginCombat?GlobalData.serverTime+a.dungeon.DungeonModel.instance.broadcastBeginCombat[0]:0,Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},i.prototype.loopHandler=function(){this.timeNum>GlobalData.serverTime?this.timeText.innerHTML="倒计时:<span style='color:#ff3e3e'>"+a.common.CommonUtil.msToMMSS(this.timeNum-GlobalData.serverTime)+"</span>":(this.timeText.innerHTML="倒计时:<span style='color:#ff3e3e'>00:00</span>",Laya.timer.clear(this,this.loopHandler))},i.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},t=i,r.TeamWarfareSportsCopyTopPanel=t}(modules=modules||{}),function(t){var e,l,i,n,s,o,a,r;function h(){var t=null!==l&&l.apply(this,arguments)||this;return t._success=!1,t}e=t.team_warfare||(t.team_warfare={}),i=t.bag.BagItem,n=t.config.BlendCfg,s=t.common.CustomList,o=t.common.SimpleList,a=t.dungeon.DungeonCtrl,l=ui.TeamWarfareSportsCopyWinViewUI,__extends(h,l),h.prototype.initialize=function(){l.prototype.initialize.call(this),this.closeOnSide=!1,this._listReward=new s,this._listReward.width=461,this._listReward.height=115,this._listReward.hCount=4,this._listReward.spaceX=8,this._listReward.itemRender=i,this.listBox1.addChild(this._listReward),this._listReward.x=0,this._listReward.y=0,this._list=o.create(e.TeamWarfareSportsCopyWinItem,571,65,1,1,0,5),this._list.size(571,205),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},h.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},h.prototype.offEvt=function(){l.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},h.prototype.onOpened=function(){l.prototype.onOpened.call(this),t.notice.ScoreNoticeManager.instance.sotpAllTween(),this._duration=n.instance.getCfgById(10303)[1][0],this.loopHandler()},h.prototype.close=function(){l.prototype.close.call(this),e.TeamWarfareModel.instance.ispreliminaryFactionWar()&&(this._success?t.dungeon.DungeonCtrl.instance.reqEnterNextLevel():a.instance.reqEnterScene(0))},h.prototype.setOpenParam=function(t){if(l.prototype.setOpenParam.call(this,t),t){this._success=t[0];var e=t[2],i=t[1];this._listReward.datas=t[3];var n=this._listReward.datas.length;this._listReward.x=(this.listBox1.width-(100*n+8*(n-1)))/2;var s=e[0][2];0===i?this.text.text="本轮没有对手轮空获取胜利":1===i?this.text.text="【"+s+"】积分率先达到上限获取胜利":2===i&&(e[0]&&e[1]&&e[0][3]===e[1][3]?this.text.text="【"+s+"】战力最强获取胜利":this.text.text="【"+s+"】积分最高获取胜利");for(var o=[],a=0;a<3;a++){var r=e[a];o.push([a+1,r])}this._list.datas=o}},h.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},h.prototype.destroy=function(){this._listReward=this.destroyElement(this._listReward),this._list=this.destroyElement(this._list),l.prototype.destroy.call(this)},r=h,e.TeamWarfareSportsCopyWinPanel=r}(modules=modules||{}),function(n){var s,e,i,o,t;function a(){return null!==e&&e.apply(this,arguments)||this}s=n.team_warfare||(n.team_warfare={}),i=n.common.SimpleList,o=n.common.BtnGroup,e=ui.TeamWarfareRankAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(s.TeamWarfareRankItem,571,65),this._list.size(571,437),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._btnGroup=new o,this._btnGroup.setBtns(this.group_1,this.group_2),CommonUtil.setHTMLPro(this.tipTxt,"#1f304d","SimHei",22,"center"),this._rankNumList=new Array;for(var t=1;t<=s.TeamWarfareModel.instance.maxRankNum;t++)this._rankNumList.push(t)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoGlobalEvt("WARBAND_WARPERSON_RANK_REPLY",this,this.showUI),this.onAutoGlobalEvt("WARBAND_WAR_WARBAND_RANK_REPLY",this,this.showUI)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.TeamWarfareCtrl.instance.WarbandWarPersonRank(),s.TeamWarfareCtrl.instance.WarbandWarWarbandRank(),s.TeamWarfareModel.instance._nowIndex=0,this._btnGroup.selectedIndex=0;var t=n.union_war.UnionWarModel.instance.getWarCopyTimeStr(19);this.tipTxt.innerHTML="周"+n.union_war.UnionWarModel.instance.getStr(t[0])+"<span style= 'color:#ff3e3e'>中午12点</span>排行锁定并且排行前"+s.TeamWarfareModel.instance.maxRankNum+"的战队进入争夺战"},a.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(s.TeamWarfareModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI()):1===this._btnGroup.selectedIndex&&(s.TeamWarfareModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI())},a.prototype.showUI=function(){if(0===this._btnGroup.selectedIndex){-1!=n.warband.WarbandModel.instance.leaderId?this._list.datas=s.TeamWarfareModel.instance.personRank:this._list.datas=[],this.isHaveBox2.visible=0===this._list.datas.length,this.isHaveText2.text=-1===n.warband.WarbandModel.instance.leaderId?"未加入战队":"暂无排行";var t=0,e=0;s.TeamWarfareModel.instance.myPersonRank&&(t=s.TeamWarfareModel.instance.myPersonRank[3],e=s.TeamWarfareModel.instance.myPersonRank[4]),this.myRankNumText.text=t?"我的排名:"+t:"我的排名:未上榜",-1===n.warband.WarbandModel.instance.leaderId&&(this.myRankNumText.text="我的排名:未上榜"),this.participationNum.text="我的积分:"+e,this.text2.text="玩家名称"}else if(1===this._btnGroup.selectedIndex){this.isHaveBox2.visible=!1,this._list.datas=this._rankNumList,t=0;var i=n.warband.WarbandModel.instance.info?n.warband.WarbandModel.instance.info[1]:"未加入";s.TeamWarfareModel.instance.myWarbandRank&&(t=s.TeamWarfareModel.instance.myWarbandRank[3]),this.myRankNumText.text="我的战队:"+i,this.participationNum.text=t?"战队排名:"+t:"战队排名:未上榜",-1===n.warband.WarbandModel.instance.leaderId&&(this.myRankNumText.text="我的战队:未上榜",this.participationNum.text="战队排名:未上榜"),this.text2.text="战队名称"}},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},t=a,s.TeamWarfareRankAlert=t}(modules=modules||{}),function(t){var i,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}i=t.team_warfare||(t.team_warfare={}),e=ui.TeamWarfareSportsCopyRightView2UI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=22,this.bottom=329,this.closeByOthers=!1,this.layer=3,CommonUtil.setHTMLPro(this.HTML1,"#50ff28","SimHei",24)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.playerDateBox,this,this.teamBoxBtnHandler),this.onAutoClick(this.guessBtn,this,this.battlefieldBtnHandler),this.onAutoGlobalEvt("UPDATE_WARBAND_WAR_ROUND_INFO",this,this.showUI),this.regAutoRP(this.rpImg,["teamWarfareRP4","teamWarfareRP7"])},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),i.TeamWarfareCtrl.instance.GetWarbandWarGuessList(1),i.TeamWarfareCtrl.instance.GetWarbandWarGuessList(2),i.TeamWarfareCtrl.instance.GetWarbandWarGuessList(3),i.TeamWarfareCtrl.instance.WarbandWarInfoList(),this.showUI()},s.prototype.showUI=function(){Laya.timer.clear(this,this.activityHandler),Laya.timer.loop(1e3,this,this.activityHandler),this.activityHandler()},s.prototype.teamBoxBtnHandler=function(){WindowManager.instance.open(1413)},s.prototype.battlefieldBtnHandler=function(){WindowManager.instance.open(1421)},s.prototype.activityHandler=function(){if(this.HTML1.innerHTML="准备倒计时:<span style='color:#ff3e3e'>"+CommonUtil.timeStampToHHMMSS(i.TeamWarfareModel.instance.readyEndTime)+"</span>",i.TeamWarfareModel.instance.readyEndTime<GlobalData.serverTime){Laya.timer.clear(this,this.activityHandler);var t=i.TeamWarfareModel.instance.getRound(),e=i.TeamWarfareModel.instance.getState();this.HTML1.innerHTML=t<=2?e?"等待战斗开始":"本场轮空":"等待退出场景"}},s.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},n=s,i.TeamWarfareSportsCopyRightPanel2=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._oldScrollPos=0,t._inx=1,t}e=t.team_warfare||(t.team_warfare={}),n=t.common.SimpleList,i=ui.TeamWarfareseeAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(e.TeamWarfareseeItem,575,189,1,1,0,10),this._list.size(575,388),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this)},o.prototype.setOpenParam=function(t){if(i.prototype.setOpenParam.call(this,t),this._inx=t,this._inx){this.titleText.text=CommonUtil.getFuDiName(this._inx);var e=[];e.push([1,this._inx]),e.push([2,this._inx]),this._list.datas=e}},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},s=o,e.TeamWarfareseeAlert=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.rewardShowItem.x=80,t.instructionsText.text="每日累充、每日单笔活动可获得大量",t.textBgImg.skin="space_travel/txt_gysd_01.png",t.titleTxt.color="#b15315",t.titleTxt.text="仙境寻宝",t}e=t.space_travel_treasure||(t.space_travel_treasure={}),n=t.funcOpen.FuncOpenModel,i=t.festival.TreasureBasePanel,__extends(o,i),Object.defineProperty(o.prototype,"getRestTm",{get:function(){return e.SpaceTravelTreasureModel.instance._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getState",{get:function(){return e.SpaceTravelTreasureModel.instance._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getScore",{get:function(){return e.SpaceTravelTreasureModel.instance._score},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getId",{get:function(){return e.SpaceTravelTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xianyu",{get:function(){return e.SpaceTravelTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oneNum",{get:function(){return e.SpaceTravelTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"twoNum",{get:function(){return e.SpaceTravelTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"threeNum",{get:function(){return e.SpaceTravelTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),o.prototype.getgRade=function(){return e.SpaceTravelTreasureModel.instance.getgRade()},o.prototype.getSelfBroadcast=function(){return e.SpaceTravelTreasureModel.instance.getSelfBroadcast()},o.prototype.callBakFunction=function(t){e.SpaceTravelTreasureModel.instance.callBakFunction(t)},o.prototype.getClassCtrl=function(t){e.SpaceTravelTreasureCtrl.instance.festivalNationalXunbao(t)},o.prototype.getConsumeRank=function(){e.SpaceTravelTreasureCtrl.instance.GetNationalXunbaoScoreList(),e.SpaceTravelTreasureCtrl.instance.GetNationalXunbaoScoreAndState()},o.prototype.getShuJu=function(){e.SpaceTravelTreasureCtrl.instance.GetNationalXunbaoBroadcastRecords()},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(928)},o.prototype.getNationalXunbaoScoreAward=function(){e.SpaceTravelTreasureCtrl.instance.getNationalXunbaoScoreAward()},o.prototype.openBtnHandler=function(){WindowManager.instance.open(1393)},o.prototype.openBtnHandler1=function(){WindowManager.instance.open(1394)},o.prototype.openBtnHandler2=function(){WindowManager.instance.open(1403)},o.prototype.openBtnHandler3=function(t){WindowManager.instance.open(1395,[t,this._type])},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=e.SpaceTravelTreasureModel.instance.xunBaoType,this.festivalType=e.SpaceTravelTreasureModel.instance.festivalType},s=o,e.SpaceTravelTreasurePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_treasure||(t.space_travel_treasure={}),i=t.festival.TreasureRankBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.SpaceTravelTreasureRankItem},s.prototype.getRewardStart=function(t){return e.SpaceTravelTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.SpaceTravelTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelTreasureRankAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_treasure||(t.space_travel_treasure={}),i=t.festival.TreasureRankAwardBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.SpaceTravelTreasureRankAwardItem},Object.defineProperty(s.prototype,"getStr",{get:function(){return"仙境"},enumerable:!0,configurable:!0}),s.prototype.getNationalXunbaoRank=function(){e.SpaceTravelTreasureCtrl.instance.getNationalXunbaoRank()},Object.defineProperty(s.prototype,"myNodeListByObjId",{get:function(){return e.SpaceTravelTreasureModel.instance._myNodeListByObjId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.SpaceTravelTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelTreasureRankAwardAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_treasure||(t.space_travel_treasure={}),i=t.festival.TreasureBaseAlert,__extends(s,i),s.prototype.callBakFunction=function(t){e.SpaceTravelTreasureModel.instance.callBakFunction(function(){e.SpaceTravelTreasureCtrl.instance.festivalNationalXunbao(t)})},Object.defineProperty(s.prototype,"getId",{get:function(){return e.SpaceTravelTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xianyu",{get:function(){return e.SpaceTravelTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"oneNum",{get:function(){return e.SpaceTravelTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"twoNum",{get:function(){return e.SpaceTravelTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"threeNum",{get:function(){return e.SpaceTravelTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelTreasureAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.text1.text="本轮仙境寻宝已结束,寻宝不再获得积分,是否确认继续抽奖？",t}e=t.space_travel_treasure||(t.space_travel_treasure={}),i=t.festival.TreasureSpecialBaseAlert,__extends(s,i),s.prototype.dontShowHandler=function(){e.SpaceTravelTreasureModel.instance.dontShowTreasure=this.dontShow.selected=!this.dontShow.selected},n=s,e.SpaceTravelTreasureSpecialAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_store||(t.space_travel_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SpaceTravelStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.SpaceTravelStoreItem},o.prototype.getRestTime=function(){return e.SpaceTravelStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(929)},s=o,e.SpaceTravelStorePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_festival||(t.space_travel_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.SpaceTravelType,this._funcId=932},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="space_travel/image_zltq_01.png",this.v.closeBtn.skin="common/btn_tongyong_15.png",this.v.bgImg.y=217,this.v.tipTxt.fontSize=24,this.v.tipTxt.pos(308,423,!0),this.v.closeBtn.pos(668,285,!0),this.v.stateImg.pos(359,624,!0),this.v.goBtn.pos(316,615,!0),this.v.rewardBox.pos(195,485,!0),this.v.tipTxt.text="仙境特惠 限时首充",this.v.tipTxt.color="#ffffff",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.SpaceTravelFestFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="space_travel/image_zltq_bg01.jpg",t}e=t.space_travel_festival||(t.space_travel_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SpaceTravelFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpaceTravelType},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelFestConLoginPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_festival||(t.space_travel_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="space_travel/image_zltq_bg08.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(277,368,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this._festType=t.festival.FestivalModel.instance.SpaceTravelType,this.text1.y=883,this.timeTxt.y=883,this.oneTxt.y=920,this.TwoTxt.y=951,this.threeTxt.y=983,this.goBtn.y=1020,this.rightBtn.y=1020,this.leftBtn.y=1020},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.SpaceTravelFestHilarityPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="space_travel/image_zltq_bg06.jpg",t.titleTxt.text="每日累充",t}e=t.space_travel_cumulate_pay||(t.space_travel_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SpaceTravelCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.SpaceTravelCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(935)},s=o,e.SpaceTravelCumulatePayPanel=s}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="space_travel/image_zltq_bg04.jpg",t}a=t.space_travel_single_pay||(t.space_travel_single_pay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.SpaceTravelSinglePayModel.instance.getState(t[1],i),o=a.SpaceTravelSinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.SpaceTravelSinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.SpaceTravelSinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(934)},n=s,a.SpaceTravelSinglePayPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="space_travel/image_zltq_bg03.jpg",t.titleTxt.text="仙境连充",t}e=t.space_travel_continuous_pay||(t.space_travel_continuous_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SpaceTravelContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.SpaceTravelContinuousPayItem},o.prototype.getRestTime=function(){return e.SpaceTravelContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(933)},o.prototype.getMoneyAcc=function(){return e.SpaceTravelContinuousPayModel.instance.moneyAcc},s=o,e.SpaceTravelContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="space_travel/image_zltq_bg05.jpg",t}e=t.space_travel_festival||(t.space_travel_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SpaceTravelFestDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpaceTravelType},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelFestDailyRewardPanel=n}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.space_travel_festival||(s.space_travel_festival={}),o=s.festival.FestHilarityBasePanel,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.bgImg.skin="space_travel/image_zltq_bg07.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(277,368,!0),this.titleTxt.text="特殊掉落",CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#ffffff","SimHei",26,"center");var t=CommonUtil.getColorById(13240054),e=CommonUtil.getColorById(13250054),i=CommonUtil.getNameByItemId(13240054),n=CommonUtil.getNameByItemId(13250054);this.oneTxt.innerHTML="活动期间内，参与玩法可掉落<span style='color:"+t+"'>"+i+"</span>\n\t\t\t和<span style='color:"+e+"'>"+n+"</span>：",this.TwoTxt.innerHTML="收集30个<span style='color:"+t+"'>"+i+"</span>可以合成一个<span style='color:"+CommonUtil.getColorById(13240051)+"'>黄金锤</span>！",this.threeTxt.innerHTML="收集50个<span style='color:"+e+"'>"+n+"</span>可以合成一个<span style='color:"+CommonUtil.getColorById(13250051)+"'>铂金锤</span>！",this.goBtn.visible=this.rightBtn.visible=!1,this.leftBtn.visible=!0,this.leftBtn.x=251,this.leftBtn.label="前往挑战",this._festType=s.festival.FestivalModel.instance.SpaceTravelType,this.text1.y=883,this.timeTxt.y=883,this.oneTxt.y=920,this.TwoTxt.y=951,this.threeTxt.y=983,this.goBtn.y=1020,this.rightBtn.y=1020,this.leftBtn.y=1020},i.prototype.leftHandler=function(){WindowManager.instance.open(33)},e=i,t.SpaceTravelTeShuPanel=e}(modules=modules||{}),function(e){var t,i,n,s;function o(){var t=i.call(this)||this;return t.typeNum=e.festival.FestivalModel.instance.SpaceTravelType,t.bgImg.skin="space_travel/image_zltq_bg02.jpg",t.titleTxt.text="仙境累消",t}t=e.space_travel_seven_days_consume||(e.space_travel_seven_days_consume={}),n=e.funcOpen.FuncOpenModel,i=e.festival.SevenDaysConsumeBasePanel,__extends(o,i),o.prototype.getDatas=function(){return t.SpaceTravelSevenDaysConsumeModel.instance.rewardList},o.prototype.getItemClass=function(){return t.SpaceTravelSevenDaysConsumeItem},o.prototype.getRestTime=function(){return t.SpaceTravelSevenDaysConsumeModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(937)},s=o,t.SpaceTravelSevenDaysConsumePanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg={};for(var t=GlobalData.getConfig("blessed_land_reward"),e=0,i=t.length;e<i;e++){var n=t[e];this._cfg[n[0]]||(this._cfg[n[0]]={}),this._cfg[n[0]][n[1]]=n}},n.prototype.getCfgByLevelAndIndex=function(t,e){return this._cfg[t]?this._cfg[t][e]:null},n.prototype.getLastIndexByLevel=function(t){var e=this._cfg[t],i=Number.NEGATIVE_INFINITY;for(var n in e)e[n][1]>i&&(i=e[n][1]);return i},i=n,e.BlessedLandRewardCfg=i}(modules=modules||{}),function(e){var m,i,n,s,y,o,t;function a(){return null!==i&&i.apply(this,arguments)||this}m=e.welfare_place||(e.welfare_place={}),n=e.dungeon.DungeonCtrl,s=e.common.ProgressBarCtrl,y=e.config.BlessedLandRewardCfg,o=e.notice.SystemNoticeManager,i=ui.WelfarePlaceBossViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,CommonUtil.setHTMLPro(this.challengeTimeTxt,"#168a17","SimHei",22,"center"),this.guwuTm=0,this.items=[this.item1,this.item2,this.item3,this.item4];for(var t=0;t<4;t++)this.items[t].visible=!1;this.bossHpCtrl=new s(this.hpImg,550),this.bossHpCtrl.maxValue=100,this.bossHpCtrl.value=0,this.hpTxt.text="",this._helpId=19066,this._btnClip=CustomClip.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChildAt(this._btnClip,16),this._btnClip.pos(this.challengeBtn.x-6,this.challengeBtn.y-8,!0),CustomClip.thisStop(this._btnClip)},a.prototype.loopHandler=function(){var t=m.WelfarePlaceModel.instance.bossInfo;if(t){var e=t[6];e&&e<GlobalData.serverTime||(this.resetTmTxt.text="重置倒计时:"+CommonUtil.timeStampDDHHMMToHHMMSS(e),this.guwuTm>GlobalData.serverTime?(this.guwuTmTxt.text=CommonUtil.msToMMSS(this.guwuTm-GlobalData.serverTime),this.guwuTmTxt.color="#00ad35"):(this.guwuTmTxt.text="未激活",this.guwuTmTxt.color="#ff3e3e"))}},a.prototype.onEvt=function(){var t=this;i.prototype.onEvt.call(this),this.onAutoGlobalEvt("WELFARE_DUNGEON_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("WELFARE_BOSS_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("WELFARE_BOSS_TIME_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("WELFARE_BOSS_STAGE_AWARD_UPDATE",this,this.updateView),this.onAutoGlobalEvt("WELFARE_BOSS_PLACE_REMOVE",this,function(){t.close(),e.bottomTab.BottomTabCtrl.instance.openTabByFunc(492),o.instance.addNotice("福地已被收回")}),this.onAutoClick(this.teamRwardBtn,this,this.teamRwardHanlder),this.onAutoClick(this.guwuBtn,this,this.guwuHanler),this.onAutoClick(this.challengeBtn,this,this.challengeHanlder),Laya.timer.loop(1e3,this,this.loopHandler),this.guwuTmTxt.text=""},a.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),i.prototype.offEvt.call(this)},a.prototype.guwuHanler=function(){WindowManager.instance.open(1448)},a.prototype.teamRwardHanlder=function(){WindowManager.instance.open(1449)},a.prototype.challengeHanlder=function(){var t=m.WelfarePlaceModel.instance.getBossRecState();if(1===t){var e=m.WelfarePlaceModel.instance.bossInfo;n.instance.reqEnterScene(4101,e[4])}else 2===t?m.WelfarePlaceCtrl.instance.blessedLandDrawReward():3===t?o.instance.addNotice("所有奖励领取完成",!0):o.instance.addNotice("挑战时间不足",!0)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),m.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!1)?(m.WelfarePlaceCtrl.instance.getBlessedLandInfo(),m.WelfarePlaceCtrl.instance.getBlessedLandStageReward(),this.updateView()):this.close()},a.prototype.updateView=function(){var t=m.WelfarePlaceModel.instance.bossInfo;if(t&&m.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!1)){var e=t[2];this.headIcon.visible=this.nameTxt.visible=!!e&&!!e[0],this.noTxt.visible=!this.headIcon.visible,e&&e[0]&&(this.headIcon.setInfo(e[3],e[1],e[4]),this.nameTxt.text=e[2],this.headIcon.vipShowItem.setSVIPandVIP(e[6]||0,e[5],e[7]));for(var i=0;i<4;i++)this.items[i].visible=!1,this.items[i].hideFlag();var n=t[1],s=t[5],o=Math.round(1e4*n/s)/100;this.hpTxt.text=o+"%",this.bossHpCtrl.value=o,this.challengeTimeTxt.innerHTML="本日挑战剩余时长:<span style='color:"+(100<m.WelfarePlaceModel.instance.bossTime?"#168a17":"#ff3e3e")+"'>"+CommonUtil.msToMMSS(m.WelfarePlaceModel.instance.bossTime)+"</span>";var a=m.WelfarePlaceModel.instance.getBossRecState(),r=1;1===a?(this.challengeBtn.visible=!0,this.challengeBtn.label="挑战",CustomClip.thisPlay(this._btnClip),r=t[0]):2===a?(this.challengeBtn.visible=!0,this.challengeBtn.label="领取",CustomClip.thisPlay(this._btnClip),r=t[7],this.hpTxt.text="0%",this.bossHpCtrl.value=0):(3===a?this.challengeBtn.visible=!1:(this.challengeBtn.visible=!0,this.challengeBtn.label="挑战"),CustomClip.thisStop(this._btnClip),r=t[0]),this.layerTxt.text="第"+r+"层",this.guwuTm=t[3]+GlobalData.serverTime;var l=y.instance.getCfgByLevelAndIndex(t[4],r);if(l){for(var h=l[3],p=l[2],c=0,u=(i=0,h.length);i<u;i+=2)this.items[c].dataSource=[h[i],h[i+1],0,null],this.items[c].visible=!0,this.items[c].showFlag("MVP"),c++;for(i=0,u=p.length;i<u;i+=2)this.items[c].dataSource=[p[i],p[i+1],0,null],this.items[c].visible=!0,c++;if(0<c){var d=(this.width-100*c-20*(c-1))/2;for(i=0;i<c;i++)this.items[i].x=d+100*i+20*i}}this.teamRp.visible=m.WelfarePlaceModel.instance.getBossAwardRp(),this.guwuRp.visible=!1}},a.prototype.destroy=function(){this.items=this.destroyElement(this.items),this.bossHpCtrl.destroy(),this.bossHpCtrl=null,this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},t=a,m.WelfarePlaceBossPanel=t}(modules=modules||{}),function(t){var a,e,i;function n(){return null!==e&&e.apply(this,arguments)||this}a=t.welfare_place||(t.welfare_place={}),e=ui.WelfarePlaceBossRBViewUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.right=0,this.bottom=280,this.layer=3,this.closeByOthers=!1,this.zOrder=-1,this.nameTxtArr=[this.nameTxt1,this.nameTxt2,this.nameTxt3],this.damageTxtArr=[this.damageTxt1,this.damageTxt2,this.damageTxt3]},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("WELFARE_BOSS_HURT_INFO_UPDATE",this,this.updateView)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},n.prototype.close=function(){this.nameTxtArr=this.destroyElement(this.nameTxtArr),this.damageTxtArr=this.destroyElement(this.damageTxtArr),e.prototype.close.call(this)},n.prototype.destroy=function(){e.prototype.destroy.call(this)},n.prototype.updateView=function(){if(a.WelfarePlaceModel.instance.sceneBossHurtInfo){for(var t,e=a.WelfarePlaceModel.instance.sceneBossHurtInfo[0].sort(function(t,e){return t[0][2]-e[0][2]}),i=0;i<3;i++)e[i]?(this.nameTxtArr[i].text=i+1+"."+e[i][0][1],this.damageTxtArr[i].text=""+CommonUtil.bigNumToString(e[i][1])):this.nameTxtArr[i].text=this.damageTxtArr[i].text="";i=0;for(var n=e.length;i<n;i++)if(PlayerModel.instance.actorId===e[i][0][0]){t=e[i];break}this.myDamageTxt.text=t?CommonUtil.bigNumToString(t[1]):"";var s=a.WelfarePlaceModel.instance.bossInfo,o=a.WelfarePlaceModel.instance.sceneBossHurtInfo[1];o&&(this.nameTxt.text=o[2],this.headIcon.setInfo(o[3],o[1],o[4]),this.headIcon.vipShowItem.setSVIPandVIP(o[6],o[5],o[7])),this.headIcon.visible=this.nameTxt.visible=!!o,this.endTm=s[1]+GlobalData.serverTime}},i=n,a.WelfarePlaceBossRBPanel=i}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}i=t.welfare_place||(t.welfare_place={}),n=t.config.BlessedLandRewardCfg,s=t.notice.SystemNoticeManager,e=ui.WelfarePlaceEnterViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.bgBtn1,this,this.gotoHanlder,[1]),this.onAutoClick(this.bgBtn2,this,this.gotoHanlder,[2]),this.onAutoClick(this.tipsBtn,this,this.tipsBtnHanlder),this.regAutoRP(this.rp1,["welfarePlaceBossRP"]),this.regAutoRP(this.rp2,["welfarePlacePawnRP"]),this.onAutoGlobalEvt("WARBAND_WAR_WARBAND_RANK_REPLY",this,this.updateView)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),i.WelfarePlaceCtrl.instance.getBlessedLandCopyInfo(),i.WelfarePlaceCtrl.instance.getBlessedLandInfo(),i.WelfarePlaceCtrl.instance.getBlessedLandBossInfo(),t.team_warfare.TeamWarfareCtrl.instance.WarbandWarWarbandRank(),this.updateView()},a.prototype.updateView=function(){if(i.WelfarePlaceModel.instance.bossInfo){var t=7-i.WelfarePlaceModel.instance.bossInfo[4];this.teamTxt.text=t<=3&&0<t?"战队逐鹿"+"冠亚季"[t-1]+"军专属福地":"",this.fdBase.skin="assets/icon/ui/welfare_place/fd_"+i.WelfarePlaceModel.instance.bossInfo[4]+".jpg",this.fdName.skin="assets/icon/ui/welfare_place/fd_name_"+i.WelfarePlaceModel.instance.bossInfo[4]+".png"}},a.prototype.close=function(){e.prototype.close.call(this)},a.prototype.destroy=function(){this.bgBtn1=this.destroyElement(this.bgBtn1),this.bgBtn2=this.destroyElement(this.bgBtn2),e.prototype.destroy.call(this)},a.prototype.gotoHanlder=function(t){var e=i.WelfarePlaceModel.instance.bossInfo;e&&(n.instance.getCfgByLevelAndIndex(e[4],e[0])?1===t?WindowManager.instance.open(1409):2===t&&WindowManager.instance.open(1410):s.instance.addNotice("条件不足无法进入",!0))},a.prototype.tipsBtnHanlder=function(){CommonUtil.alertHelp(19065)},o=a,i.WelfarePlaceEnterPanel=o}(modules=modules||{}),function(e){var u,i,n,d,t;function s(){return null!==i&&i.apply(this,arguments)||this}u=e.welfare_place||(e.welfare_place={}),n=e.notice.SystemNoticeManager,d=e.config.BlendCfg,i=ui.WelfarePlacePawnViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,CommonUtil.setHTMLPro(this.challengeTimeTxt,"#168a17","SimHei",22,"center"),this.items=[this.item1,this.item2,this.item3,this.item4],this._helpId=19067,this._btnClip=CustomClip.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChildAt(this._btnClip,8),this._btnClip.pos(this.challengeBtn.x-6,this.challengeBtn.y-8,!0),CustomClip.thisStop(this._btnClip)},s.prototype.onEvt=function(){var t=this;i.prototype.onEvt.call(this),this.onAutoClick(this.challengeBtn,this,this.challengeHanlder),this.onAutoClick(this.teamBtn,this,this.teamBtnHearl),this.onAutoGlobalEvt("WELFARE_DUNGEON_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("WELFARE_BOSS_PLACE_REMOVE",this,function(){t.close(),e.bottomTab.BottomTabCtrl.instance.openTabByFunc(492),n.instance.addNotice("福地已被收回")})},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),u.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen()?this.updateView():this.close()},s.prototype.teamBtnHearl=function(){e.common_group.CommonGroupUtil.teamBtnHearl(9)},s.prototype.challengeHanlder=function(){e.common_group.CommonGroupUtil.OldCopyTeamIsOtherTeam(9)||u.WelfarePlaceModel.instance.challengeHanlder()},s.prototype.updateView=function(){if(u.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen()){var t=u.WelfarePlaceModel.instance.dungeonInfo,e=t[0],i=t[1];100<i?(CustomClip.thisPlay(this._btnClip),this.challengeTimeTxt.innerHTML="今日剩余奖励时长:"+CommonUtil.msToMMSS(i)):100<e?(CustomClip.thisPlay(this._btnClip),this.challengeTimeTxt.innerHTML="今日剩余协助时长:"+CommonUtil.msToMMSS(e)):(CustomClip.thisStop(this._btnClip),this.challengeTimeTxt.innerHTML="今日剩余协助时长:<span style='color:#ff3e3e'>00:00</span>");for(var n=0;n<4;n++)this.items[n].visible=!1;for(var s=d.instance.getCfgById(97707)[2],o=(s[u.WelfarePlaceModel.instance.bossInfo?u.WelfarePlaceModel.instance.bossInfo[4]-1:0]||s[0]).replace("[","").replace("]","").split("#"),a=[],r=0,l=o.length;r<l;r++)a.push(parseInt(o[r]));for(var h=0,p=(n=0,a.length);n<p;n+=2)this.items[n/2>>0].dataSource=[a[n],a[n+1],0,null],this.items[n/2>>0].visible=!0,h++;if(0<h){var c=(this.width-100*h-20*(h-1))/2;for(n=0;n<h;n++)this.items[n].x=c+100*n+20*n}}},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this.items=this.destroyElement(this.items),i.prototype.destroy.call(this)},t=s,u.WelfarePlacePawnPanel=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg={};var t=GlobalData.getConfig("scene_blessed_land_copy");this._levelDic=new Laya.Dictionary;for(var e=0,i=t.length;e<i;e++){this._cfg[t[e][2]]=t[e];var n=t[e][1],s=this._levelDic.get(n);s?s.push(t[e]):this._levelDic.set(n,[t[e]])}},n.prototype.getAreaIdByCfg=function(t){return this._cfg[t]},n.prototype.getLevelByCfgs=function(t){return this._levelDic.get(t)},i=n,e.SceneBlessedLandCopyCfg=i}(modules=modules||{}),function(d){!function(o){var n,e=d.common.CustomList,i=d.config.BlendCfg,h=Laya.Image,p=Laya.Text,s=utils.tween.TweenGroup,a=d.config.MapPathCfg,t=(n=ui.WelfarePlacePawnRBViewUI,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this.right=0,this.bottom=280,this.layer=3,this.closeByOthers=!1,this.zOrder=-1,this._coinImgs=new Array,this._coinTxts=new Array,this._incomes=new Array,this._tweenGroup=new s,this._list=e.create("v",0,0,this.listBox.width,this.listBox.height,c,6,2),this.listBox.addChild(this._list);var t=i.instance.getCfgById(97706);this.showProbability=t[1]},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._tweenGroup=this.destroyElement(this._tweenGroup),this._coinImgs=this.destroyElement(this._coinImgs),this._coinTxts=this.destroyElement(this._coinTxts),n.prototype.destroy.call(this)},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.teamBtn,this,this.teamHandler),this.onAutoGlobalEvt("WELFARE_DUNGEON_INFO_UPDATE",this,this.updataTime),this.onAutoGlobalEvt("DUNGEON_BROADCAST_COPY_INCOME",this,this.incomeUpdate),this.teamRpImg.visible=!1,this.regAutoRP(this.teamRpImg,["teaminvastion"]),Laya.timer.loop(240,this,this.loopHandler2)},r.prototype.loopHandler=function(){this.endTmAward>GlobalData.serverTime?(this.xyTxt.text="剩余奖励时长",this.resTm.text=CommonUtil.msToMMSS(this.endTmAward-GlobalData.serverTime)):this.endTmCopy>GlobalData.serverTime?(this.xyTxt.text="剩余协助时长",this.resTm.text=CommonUtil.msToMMSS(this.endTmCopy-GlobalData.serverTime)):(this.xyTxt.text="剩余协助时长",this.resTm.text=CommonUtil.msToMMSS(0))},r.prototype.offEvt=function(){n.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler),Laya.timer.clear(this,this.loopHandler2)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._list.datas=o.WelfarePlaceModel.instance.searchIds;var t=o.WelfarePlaceModel.instance.bossInfo?o.WelfarePlaceModel.instance.bossInfo[4]-1:0;this.glTxt.text=(100*this.showProbability[t]>>0)+"%",this.updataTime(),this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler);var e=a.instance.getCfgById(4201..toString())[1][0],i=e[Math.floor(Math.random()*e.length)];PlayerModel.instance.selectTarget(4,i),o.WelfarePlaceModel.instance.searchId=i},r.prototype.incomeUpdate=function(){var t=o.WelfarePlaceModel.instance.broadcastInfo;if(t)for(var e=t[0]||[],i=0,n=e.length;i<n;i++){var s=e[i];s&&0<s[1]&&this._incomes.push(s)}},r.prototype.loopHandler2=function(){var t=this;if(this._incomes&&0!==this._incomes.length){var e=this._incomes.shift();if(e){var i=e,n=i[1],s=0<this._coinImgs.length?this._coinImgs.shift():new h,o=i[0],a=90330001;1===o?a=90330001:4===o?a=90430001:5===o&&(a=90530001),s.skin=CommonUtil.getIconById(a,!0),this.addChild(s);var r=450;s.pos(364,r,!0),TweenJS.create(s,this._tweenGroup).to({y:r-110},800).chain(TweenJS.create(s,this._tweenGroup).to({y:r-180,alpha:.6},400).onComplete(function(){s.skin="",s.removeSelf(),s.alpha=1,t._coinImgs.push(s)})).start();var l=0<this._coinTxts.length?this._coinTxts.shift():new p;this.addChild(l),r+=8,l.pos(406,r,!0),l.text="+"+Math.ceil(n),l.color="#44ff63",l.fontSize=28,l.stroke=4,l.strokeColor="#000000",TweenJS.create(l,this._tweenGroup).to({y:r-110},800).chain(TweenJS.create(l,this._tweenGroup).to({y:r-180,alpha:.6},400).onComplete(function(){l.text="",l.removeSelf(),l.alpha=1,t._coinTxts.push(l)})).start()}}},r.prototype.updataTime=function(){var t=o.WelfarePlaceModel.instance.dungeonInfo,e=t[0],i=t[1];this.endTmAward=i+GlobalData.serverTime,this.endTmCopy=e+GlobalData.serverTime},r.prototype.teamHandler=function(){d.common_group.CommonGroupUtil.inTeamCopyOpen()},r.prototype.close=function(){n.prototype.close.call(this)},r);function r(){return null!==n&&n.apply(this,arguments)||this}o.WelfarePlacePawnRBPanel=t;var l,c=(l=d.common.ItemRender,__extends(u,l),u.prototype.initialize=function(){l.prototype.initialize.call(this),this.width=170,this.height=30,this.txt=new laya.display.Text,this.txt.fontSize=22,this.txt.font="SimHei",this.txt.color="#50ff28",this.txt.align="center",this.txt.x=28,this.txt.width=114,this.addChild(this.txt),this.img=new Laya.Image,this.img.y=33,this.img.skin="common_sg/split_common_fgx3.png",this.img.width=145,this.addChild(this.img)},u.prototype.destroy=function(){this.txt=this.destroyElement(this.txt),this.img=this.destroyElement(this.img),this.ids.length=0,l.prototype.destroy.call(this)},u.prototype.setData=function(t){l.prototype.setData.call(this,t),this.txt.text="刷怪区域"+t[0],this.ids=t.slice(1,t.length),this.img.visible=t[0]!=o.WelfarePlaceModel.instance.searchIds[o.WelfarePlaceModel.instance.searchIds.length-1][0]||t[0]!=o.WelfarePlaceModel.instance.searchIds[o.WelfarePlaceModel.instance.searchIds.length-2][0]},u.prototype.clickHandler=function(){var t=this.ids[Math.floor(Math.random()*this.ids.length)];PlayerModel.instance.selectTarget(4,t),o.WelfarePlaceModel.instance.searchId=t},u);function u(){return null!==l&&l.apply(this,arguments)||this}o.WelfarePlacePawnRBItem=c}(d.welfare_place||(d.welfare_place={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.welfare_place||(t.welfare_place={}),i=ui.WelfarePlaceBossTimeViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.top=300,this.centerX=0,this.closeByOthers=!1,this.lastTime=Number.POSITIVE_INFINITY},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("WELFARE_BOSS_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("WELFARE_BOSS_TIME_INFO_UPDATE",this,this.updateTime)},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.loopHandler=function(){this.endTm<GlobalData.serverTime||(this.resTm.text=CommonUtil.msToMMSS(this.endTm-GlobalData.serverTime))},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView(),this.updateTime(),this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler)},s.prototype.destroy=function(){this.resTm=this.destroyElement(this.resTm),i.prototype.destroy.call(this)},s.prototype.updateView=function(){var t=e.WelfarePlaceModel.instance.bossInfo;this.layerTxt.text="第"+t[0]+"层"},s.prototype.updateTime=function(){this.endTm=e.WelfarePlaceModel.instance.bossTime+GlobalData.serverTime},n=s,e.WelfarePlaceBossTimePanel=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg={};for(var t=GlobalData.getConfig("blessed_land_stage_reward"),e=0,i=t.length;e<i;e++){var n=t[e];this._cfg[n[0]]||(this._cfg[n[0]]={}),this._cfg[n[0]][n[1]]=n}},n.prototype.getCfgByLevelAndId=function(t,e){return this._cfg[t]?this._cfg[t][e]:null},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfg},enumerable:!0,configurable:!0}),i=n,e.BlessedLandStageRewardCfg=i}(modules=modules||{}),function(t){var s,e,i,o,n;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.welfare_place||(t.welfare_place={}),i=t.common.CustomList,o=t.config.BlessedLandStageRewardCfg,e=ui.HitEngineerStageAwardAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.width=610,this._list.height=710,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=30,this._list.y=125,this.addChild(this._list),this._list.itemRender=s.WelfarePlaceAwardItem,this.titleTxt.text="战队奖励"},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},a.prototype.onEvt=function(){var t=this;e.prototype.onEvt.call(this),this.onAutoGlobalEvt("WELFARE_BOSS_STAGE_AWARD_UPDATE",this,this.updateView),this.onAutoGlobalEvt("WELFARE_BOSS_PLACE_REMOVE",this,function(){t.close()})},a.prototype.updateView=function(){var t=s.WelfarePlaceModel.instance.bossInfo;if(t){var e=o.instance.cfgs[t[4]],i=[];for(var n in e)i.push(e[n]);this._list.datas=i.sort(function(t,e){var i=s.WelfarePlaceModel.instance.getDrawListState(t),n=s.WelfarePlaceModel.instance.getDrawListState(e);return i===n?t[1]-e[1]:i-n})}},n=a,s.WelfarePlaceAwardAlert=n}(modules=modules||{}),function(t){var e,i,s,o,n,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.welfare_place||(t.welfare_place={}),s=t.config.EffectCfg,o=t.config.BlendCfg,n=t.notice.SystemNoticeManager,i=ui.WelfarePlaceInspireAlertUI,__extends(r,i),r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHanler)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updataView()},r.prototype.updataView=function(){var t=o.instance.getCfgById(97702),e=t[1][0],i=t[1][1],n=s.instance.getCfgById(e)[3];this.contentTxt.text=n+",持续"+(i/6e4>>0)+"分钟"},r.prototype.okHanler=function(){t.warband.WarbandModel.instance.leaderId===PlayerModel.instance.actorId?(e.WelfarePlaceCtrl.instance.blessedLandInspire(),this.close()):n.instance.addNotice("你不是队长",!0)},a=r,e.WelfarePlaceInspireAlert=a}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="perfectest_ten/image_qypd_bg01.jpg",t}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.PerfectestTenFestFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenFestFestConLoginPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="perfectest_ten/image_zzqy_bg12.jpg",t}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.PerfectestTenFestivalDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenFestivalDailyRewardPanel=n}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="perfectest_ten/image_zzqy_bg08.jpg",t}a=t.perfectest_ten_single_pay||(t.perfectest_ten_single_pay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.PerfectestTenSinglePayModel.instance.getState(t[1],i),o=a.PerfectestTenSinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.PerfectestTenSinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.PerfectestTenSinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(952)},n=s,a.PerfectestTenSinglePayPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="perfectest_ten/image_zzqy_bg09.jpg",t.titleTxt.text="每日累充",t}e=t.perfectest_ten_cumulate_pay||(t.perfectest_ten_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.PerfectestTenCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.PerfectestTenCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(953)},s=o,e.PerfectestTenCumulatePayPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="perfectest_ten/image_zzqy_bg10.jpg",t.titleTxt.text="尾牙连充",t}e=t.perfectest_ten_continuous_pay||(t.perfectest_ten_continuous_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.PerfectestTenContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.PerfectestTenContinuousPayItem},o.prototype.getRestTime=function(){return e.PerfectestTenContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(954)},o.prototype.getMoneyAcc=function(){return e.PerfectestTenContinuousPayModel.instance.moneyAcc},s=o,e.PerfectestTenContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="perfectest_ten/image_zzqy_bg03.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(277,368,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this._festType=t.festival.FestivalModel.instance.PerfectestTenType},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.PerfectestTenFestivalHilarityPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_pay_rank||(t.perfectest_ten_pay_rank={}),i=t.festival.PayRankBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.PerfectestTenPayRankItem},s.prototype.setUI=function(){this.bgImg.skin="perfectest_ten/image_zzqy_bg13.jpg"},Object.defineProperty(s.prototype,"consumptionItemId",{get:function(){return e.PerfectestTenPayRankModel.instance.consumptionItemId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"consume",{get:function(){return e.PerfectestTenPayRankModel.instance.consume},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableById",{get:function(){return e.PerfectestTenPayRankModel.instance._rankersTableById},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableByRank",{get:function(){return e.PerfectestTenPayRankModel.instance._rankersTableByRank},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"restTmConsumption",{get:function(){return e.PerfectestTenPayRankModel.instance.restTmConsumption},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"actionOpenId",{get:function(){return 957},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenPayRankPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_store||(t.perfectest_ten_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.PerfectestTenStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.PerfectestTenStoreItem},o.prototype.getRestTime=function(){return e.PerfectestTenStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(955)},s=o,e.PerfectestTenStorePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_star||(t.perfectest_ten_star={}),i=t.festival.StarBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.PerfectestTenStarItem},s.prototype.setUI=function(){this.v.titleTxt.text="牙祭之王",this.v.text1.text="我收到的春饼:"},s.prototype.setPos=function(){this.v.activityText1.pos(63,103,!0),this.v.activityText.pos(221,103,!0)},s.prototype.setPos1=function(){this.v.activityText1.pos(130,103,!0)},s.prototype.initialize=function(){this._festType=t.festival.FestivalModel.instance.PerfectestTenType,this._funcId=958,i.prototype.initialize.call(this),this._windowEnumID=1442,this._windowEnumID1=1437,this._avatarClip.y=480,this._avatarClip.scale(1.2,1.2)},n=s,e.PerfectestTenStarPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_good_man||(t.perfectest_ten_good_man={}),i=t.festival.GoodManBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.PerfectestTenType},s.prototype.btn3Handler=function(){WindowManager.instance.open(1441)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.titleTxt.text="赠送春饼"},n=s,e.PerfectestTenGoodManPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_yu_lan||(t.perfectest_ten_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.PerfectestTenYuLanItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),s.prototype.setUI=function(){this.bgImg.skin="perfectest_ten/image_zzqy_bg02.jpg",this.titleImg.skin="perfectest_ten/image_qxjs_bg15.png",this.BG.visible=!1,this.rewardShowItem.setDataFun([1,1,1,1,"assets/icon/ui/goodrank/"]),this.rewardShowItem.y=420,this.rewardShowItem.scale(1,1,!0),this.text1.text="我收到的春饼:",this.titleImg.y=143,this.titleImg.centerX=4},s.prototype.setMoXing=function(){this.rewardShowItem.fashionModelPosY=135,this.rewardShowItem.shenBingModelPosY=120,this.rewardShowItem.tianZhuModelPosY=130},n=s,e.PerfectestTenYuLanPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_score_rank||(t.perfectest_ten_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.PerfectestTenScoreRankItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),s.prototype.getFuncOpen=function(){return t.funcOpen.FuncOpenModel.instance.getFuncIsOpen(961)},s.prototype.openWin=function(){WindowManager.instance.open(1436)},s.prototype.getRp=function(){return t.redPoint.RedPointCtrl.instance.getRPProperty("perfectestTenParty4RP")},s.prototype.setBg=function(){this.bgImg.skin="perfectest_ten/image_zzqy_bg11.jpg"},s.prototype.setUI=function(){this.integralDescriptionText.text="赠送1份"+t.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+"获得1积分"},n=s,e.PerfectestTenScoreRankPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.PerfectestTenType,this._funcId=951},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="perfectest_ten/image_zzqy_bg04.png",this.v.closeBtn.skin="common/btn_0yg_close.png",this.v.bgImg.y=246,this.v.tipTxt.pos(303,423,!0),this.v.closeBtn.pos(622,312,!0),this.v.stateImg.pos(356,650,!0),this.v.goBtn.pos(313,641,!0),this.v.rewardBox.pos(195,491,!0),this.v.tipTxt.text="尾牙特惠，限时首充",this.v.tipTxt.color="#FFFFFF",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.PerfectestTenFestivalFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_star||(t.perfectest_ten_star={}),i=t.single_dog_sart.SingleDogSartAlert,__extends(s,i),Object.defineProperty(s.prototype,"broadcastId",{get:function(){return 137},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenStarAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_good_man||(t.perfectest_ten_good_man={}),i=t.single_dog_good_man.SingleDogGoodManAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenGoodManAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_good_man||(t.perfectest_ten_good_man={}),i=t.single_dog_good_man.SingleDogGoodManJiLuAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenGoodManJiLuAlert=n}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.perfectest_ten_festival||(s.perfectest_ten_festival={}),o=s.festival.FestDoubleRewardBasePanel,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.bgImg.skin="perfectest_ten/image_zzqy_bg16.jpg",this.titleTxt.text="掉落狂欢",this.foureTxt.innerHTML="活动内容：活动时间内，上述玩法所有奖励全部翻倍！",this.fiveTxt.innerHTML="(金币真气的额外奖励不计入最高记录中)",this.foureTxt.y=407,this.fiveTxt.y=439;var t=CommonUtil.getColorById(15040065),e=CommonUtil.getNameByItemId(15040065),i=CommonUtil.getColorById(15050064),n=CommonUtil.getNameByItemId(15050064);this._festType=s.festival.FestivalModel.instance.PerfectestTenType,this.oneTxt.innerHTML="活动期间内,参与玩法可掉落【<span style='color:"+t+"'>"+e+"</span>】或【<span style='color:"+i+"'>"+n+"</span>】",this.TwoTxt.innerHTML="<span style='color:"+t+"'>"+e+"</span>可在<span style='color:#50ff28'>【尾牙兑换】</span>中兑换稀有奖励",this.threeTxt.innerHTML="<span style='color:"+i+"'>"+n+"</span>可在<span style='color:#50ff28'>【遗迹探秘】</span>中用于翻牌",this.oneTxt.y=1023,this.TwoTxt.y=1054,this.threeTxt.y=1086},i.prototype.leftHandler=function(){WindowManager.instance.open(57)},i.prototype.rightHandler=function(){WindowManager.instance.open(194)},e=i,t.PerfectestTenFestDoubleRewardPanel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),i=t.festival.ConvertBasePanel,__extends(s,i),Object.defineProperty(s.prototype,"itemId1",{get:function(){return 15040065},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemId2",{get:function(){return 15050101},enumerable:!0,configurable:!0}),s.prototype.getItemClass=function(){return e.PerfectestTenFestConvertItem1},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),s.prototype.goHandler=function(){WindowManager.instance.open(1446)},s.prototype.setUI=function(){this.bgImg.skin="perfectest_ten/image_zzqy_bg15.jpg",this.titileTxt.text="尾牙兑换"},Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"PERFECTESTTEN_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenFestConvertPanel1=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=i.call(this)||this;return t.showTip(),t}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),n=ui.FestAlertUI,s=t.config.BlendCfg,i=n,__extends(a,i),a.prototype.showTip=function(){this.height=this.bgImg.height=this.backTxt.y=486,this.bgImg3.visible=this.tipHtml3.visible=this.titleImg3.visible=this.titleTxt3.visible=!1,this.titleTxt1.text="【"+CommonUtil.getNameByItemId(15040065)+"】来源",this.titleTxt2.text="【"+CommonUtil.getNameByItemId(15050101)+"】来源",CommonUtil.setHTMLPro(this.tipHtml1,"#4c5e8a","SimHei",22),CommonUtil.setHTMLPro(this.tipHtml2,"#4c5e8a","SimHei",22),this.tipHtml1.style.leading=this.tipHtml2.style.leading=2,this.tipHtml1.innerHTML=s.instance.getCfgById(67038)[2][0],this.tipHtml2.innerHTML=s.instance.getCfgById(67039)[2][0]},o=a,e.PerfectestTenFestAlert1=o}(modules=modules||{}),function(u){var t,e;function i(){var t=GlobalData.getConfig("tianshu_res");this._tianshuIds=[],this._tianshuBase={};for(var e=0;e<t.length;e++)-1===this._tianshuIds.indexOf(t[e][0])&&this._tianshuIds.push(t[e][0]),this._tianshuBase[t[e][0]]=t[e];var i=GlobalData.getConfig("tianshu");this._tianshuDic={},this._tianshuSkillPureIds={},this._tianshuSkillNeedLvl={},this._tianshuArr={};for(e=0;e<i.length;e++){this._tianshuDic[i[e][0]]=this._tianshuDic[i[e][0]]||{},this._tianshuDic[i[e][0]][i[e][1]]=i[e],this._tianshuArr[i[e][0]]=this._tianshuArr[i[e][0]]||[],this._tianshuArr[i[e][0]].push(i[e]);for(var n=i[e][4],s=0;s<n.length;s++){this._tianshuSkillPureIds[i[e][0]]=this._tianshuSkillPureIds[i[e][0]]||[];var o=u.common.CommonUtil.getSkillPureIdById(n[s]);-1===this._tianshuSkillPureIds[i[e][0]].indexOf(o)&&this._tianshuSkillPureIds[i[e][0]].push(o),this._tianshuSkillNeedLvl[i[e][0]]=this._tianshuSkillNeedLvl[i[e][0]]||{},this._tianshuSkillNeedLvl[i[e][0]][n[s]]=this._tianshuSkillNeedLvl[i[e][0]][n[s]]?this._tianshuSkillNeedLvl[i[e][0]][n[s]]:i[e][1]}}var a=GlobalData.getConfig("tianshu_skill");this._tianshuSkillNeedItems={},this._tianshuSkillAttrs={};for(var r=0;r<a.length;r++){var l=a[r];this._tianshuSkillNeedItems[l[0]]=l[1],this._tianshuSkillAttrs[l[0]]=l[4]}var h=GlobalData.getConfig("tianshu_jianwu");this._tsJianwu={},this._tsPowerLvl={};for(e=0;e<h.length;e++)this._tsJianwu[h[e][0]]=this._tsJianwu[h[e][0]]||{},this._tsJianwu[h[e][0]][h[e][1]]=h[e],this._tsPowerLvl[h[e][0]]=this._tsPowerLvl[h[e][0]]||{},this._tsPowerLvl[h[e][0]][h[e][6]]||(this._tsPowerLvl[h[e][0]][h[e][6]]=h[e][1]);var p=GlobalData.getConfig("tianshu_power");this._tsPowerCfg={};for(e=0;e<p.length;e++)this._tsPowerCfg[p[e][0]]=this._tsPowerCfg[p[e][0]]||{},this._tsPowerCfg[p[e][0]][p[e][1]]=p[e];var c=GlobalData.getConfig("tianshu_xiulian");this._xiulianObj={},this._xiulianMaxLvl={};for(e=0;e<c.length;++e)this._xiulianObj[c[e][0]]=this._xiulianObj[c[e][0]]||[],this._xiulianObj[c[e][0]].push(c[e]),this._xiulianMaxLvl[c[e][0]]=this._xiulianMaxLvl[c[e][0]]||{},this._xiulianMaxLvl[c[e][0]][c[e][4]]=c[e][1]}t=u.config||(u.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getTianshuIds=function(){return this._tianshuIds},i.prototype.getTianshuBase=function(t){return this._tianshuBase[t]},i.prototype.getTianshuName=function(t){return this._tianshuBase[t]?this._tianshuBase[t][1]:""},i.prototype.getTianshuIconIndex=function(t){return this._tianshuBase[t]?this._tianshuBase[t][2]:1},i.prototype.getTianshuQuality=function(t){return this._tianshuBase[t]?0==this._tianshuBase[t][3]?1:this._tianshuBase[t][3]:1},i.prototype.getTianshuCfgById=function(t){return this._tianshuArr[t]},i.prototype.getCfgByLvl=function(t,e){return this._tianshuDic[t]?this._tianshuDic[t][e]:void 0},i.prototype.getPartNeedNum=function(t,e,i){if(this._tianshuDic[t]&&this._tianshuDic[t][e])for(var n=this._tianshuDic[t][e][2],s=0;s<n.length;s+=2)if(i==n[s])return n[s+1]},i.prototype.getFightByLvl=function(t,e){return this._tianshuDic[t][e]?this._tianshuDic[t][e][5]:0},i.prototype.getSkillPureIds=function(t){var e=this._tianshuSkillPureIds[t];return e&&e.sort(function(t,e){return t-e}),e},i.prototype.getSkillNeedLvl=function(t,e){return this._tianshuSkillNeedLvl[t][e]},i.prototype.getSkillNeedItems=function(t){return this._tianshuSkillNeedItems[t]},i.prototype.getSkillAttrs=function(t){return this._tianshuSkillAttrs[t]},i.prototype.getJianwuCfgByLvl=function(t,e){return this._tsJianwu[t][e]},i.prototype.getJianwuNeedExpByLvl=function(t,e){return this._tsJianwu[t][e]?this._tsJianwu[t][e][3]:0},i.prototype.getJianwuFight=function(t,e){return this._tsJianwu[t][e]?this._tsJianwu[t][e][7]:0},i.prototype.getPowerNeedLvl=function(t,e){return this._tsPowerLvl[t][e]},i.prototype.getPowerCfg=function(t,e){return this._tsPowerCfg[t][e]},i.prototype.getPowerFight=function(t,e){return this._tsPowerCfg[t][e]?this._tsPowerCfg[t][e][3]:0},i.prototype.getXiulianConfigByLvl=function(t,e){if(0==e)return null;for(var i=this._xiulianObj[t],n=0;n<i.length;n++){var s=i[n];if(e<=s[1])return s}return null},i.prototype.getXiulianConfig=function(t){return this._xiulianObj[t]},i.prototype.getXiulianFightByLvl=function(t,e){for(var i=this._xiulianObj[t],n=0,s=0;s<i.length;s++){var o=i[s],a=i[s-1]?i[s-1]:null;if(e<=o[1]){n+=(e-(a?a[1]:0))*o[5];break}n+=(o[1]-(a?a[1]:0))*o[5]}return n},i.prototype.getXiulianLimitByNhLevel=function(t,e){for(var i=this.getXiulianConfig(t),n=0,s=0;s<i.length;s++){var o=i[s];e>=o[4]&&(n=o[1])}return n},e=i,t.TianshuCfg=e}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t._tabIndex=void 0,t}e=t.tianshu||(t.tianshu={}),n=t.config.TianshuCfg,i=ui.TianshuItemUI,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_UPDATE",this,this.onUpdateInfo),this.onAutoGlobalEvt("UPDATE_TIANSHU_INFO",this,this.onUpdateInfo)},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectImg.visible=this.selected},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._tianshuId=t,this.rp.visible=!1,this.nameImg.skin="assets/icon/ui/tianshu/name_"+n.instance.getTianshuIconIndex(this._tianshuId)+".png",this.iconImg.skin="assets/icon/ui/tianshu/icon_"+n.instance.getTianshuIconIndex(this._tianshuId)+".png",this.qualityImg.skin="common/r_"+n.instance.getTianshuQuality(this._tianshuId)+".png",this.onUpdateInfo()},o.prototype.onUpdateInfo=function(){var t=WindowManager.instance.getPanelById(1488);this._tabIndex=t.getTabIndex(),0==this._tabIndex?this.rp.visible=e.TianshuModel.instance.checkJianwuRp(this._tianshuId):1==this._tabIndex&&(this.rp.visible=e.TianshuModel.instance.checkTsDunwuRp(this._tianshuId)||e.TianshuModel.instance.checkTsSkillRed(this._tianshuId))},s=o,e.TianshuItem=s}(modules=modules||{}),function(t){var s,e,i,n,o,a,r,l,h;function p(){return null!==e&&e.apply(this,arguments)||this}s=t.tianshu||(t.tianshu={}),i=t.common.BtnGroup,n=t.common.CustomClip,o=t.config.TianshuCfg,a=t.common.SimpleList,r=t.tianshu.TianshuItem,l=t.common.ListWithArrowCtrl,e=ui.TianshuViewUI,__extends(p,e),p.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup=new i,this._btnGroup.setBtns(this.tab_1,this.tab_2),this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.x=261,this._btnClip.y=983,this._btnClip.visible=!1,this._list=a.create(r,134,132,2,1,0,0),this._list.pos(this.list.x,this.list.y),this._list.size(this.list.width,this.list.height),this.addChild(this._list),this._listCtrl=new l(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=this._list.width},p.prototype.setOpenParam=function(t){void 0===t&&(t=void 0),e.prototype.setOpenParam.call(this,t),this._tabIndex=t},p.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._tianshuId=void 0,null==this._tabIndex&&(this._tabIndex=s.TianshuModel.instance.checkTsDunwuPanelRp()?1:0),this._tianshuIndex=0==this._tabIndex?s.TianshuModel.instance.getJianwuIndex():s.TianshuModel.instance.getTsDunwuIndex(),this._tianshuId=o.instance.getTianshuIds()[this._tianshuIndex],this._btnGroup.selectedIndex=this._tabIndex,this._list.selectedIndex=this._tianshuIndex,this._list.datas=o.instance.getTianshuIds(),this._maxDistance=134*this._list.datas.length+(this._list.datas.length-1)*this._list.spaceX-this._list.width,this.showPanel(),this.setBtnVisible(),Laya.timer.frameLoop(1,this,this.setBtnVisible)},p.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._list=this.destroyElement(this._list),this._listCtrl=this.destroyElement(this._listCtrl),this._iconTween&&(this._iconTween.stop(),this._iconTween=null),e.prototype.destroy.call(this,t)},p.prototype.close=function(){WindowManager.instance.close(1460),WindowManager.instance.close(1462),Laya.timer.clear(this,this.setBtnVisible),e.prototype.close.call(this)},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupChangedHandler),this.regAutoRP(this.tab_red_1,["tsJianwuRp"]),this.regAutoRP(this.tab_red_2,["tsDunwuRp"]),this._listCtrl.addListeners()},p.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._listCtrl.removeListeners()},p.prototype.setBtnVisible=function(){if(this.nextRp.visible=this.preRp.visible=this.nextBtn.visible=this.preBtn.visible=!1,this.preBtn.visible=0<this._list.scrollPos&&4<this._list.datas.length,this.nextBtn.visible=this._list.scrollPos<this._maxDistance&&4<this._list.datas.length,this.preBtn.visible&&0<this._list.startShowIndex){for(var t=[],e=0;e<this._list.datas.length;e++){var i=this._list.datas[e];e<this._list.startShowIndex&&t.push(i)}this.getHaveRp(t,this.preRp)}else this.preRp.visible=!1;var n=this._list.startShowIndex+4;if(this.nextBtn.visible&&n<this._list.datas.length){for(t=[],e=n;e<=this._list.datas.length-1;e++)i=this._list.datas[e],t.push(i);this.getHaveRp(t,this.nextRp)}else this.nextRp.visible=!1},p.prototype.getHaveRp=function(t,e){e.visible=!1;for(var i=0;i<t.length;i++){var n=t[i];if(0==this._tabIndex){if(s.TianshuModel.instance.checkJianwuRp(n))return void(e.visible=!0)}else if(1==this._tabIndex&&(s.TianshuModel.instance.checkTsDunwuRp(n)||s.TianshuModel.instance.checkTsSkillRed(n)))return void(e.visible=!0)}},p.prototype.btnGroupChangedHandler=function(){this._btnGroup.selectedIndex!=this._tabIndex&&(this._tabIndex=this._btnGroup.selectedIndex,this.showPanel())},p.prototype.getTabIndex=function(){return this._tabIndex},p.prototype.showPanel=function(){0==this._btnGroup.selectedIndex?(WindowManager.instance.isOpened(1460)&&WindowManager.instance.close(1460),WindowManager.instance.open(1462,this._tianshuId)):1==this._btnGroup.selectedIndex&&(WindowManager.instance.isOpened(1462)&&WindowManager.instance.close(1462),WindowManager.instance.open(1460,this._tianshuId)),this._list.updateShowItem()},p.prototype.selectHandler=function(){this._list.selectedIndex!=this._tianshuIndex&&(this._tianshuIndex=this._list.selectedIndex,this._tianshuId=o.instance.getTianshuIds()[this._list.selectedIndex],GlobalData.dispatcher.event("CHANGE_TIANSHU_TAB",this._tianshuId))},h=p,s.TianshuPanel=h}(modules=modules||{}),function(e){var r,i,l,s,h,o,a,t;function n(){return null!==i&&i.apply(this,arguments)||this}r=e.tianshu||(e.tianshu={}),l=e.common.CustomClip,s=e.common.CommonUtil,h=e.config.TianshuCfg,o=e.config.AttrItemCfg,a=e.common.AttrUtil,i=ui.TianshuDunwuViewUI,__extends(n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnClip=l.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.x=261,this._btnClip.y=983,this._btnClip.visible=!1,this._skillItems=[this.skill_1,this.skill_2,this.skill_3,this.skill_4,this.skill_5,this.skill_6],this._partRoots={3:this.partBox1,4:this.partBox2,5:this.partBox3,6:this.partBox4},this.partBox1.visible=this.partBox2.visible=this.partBox3.visible=this.partBox4.visible=!1,this.attrList.renderHandler=Handler.create(this,this.attrHandler,null,!1),this.fullLvlTxt.text="已满层",this.tipTxtBox.visible=!1},n.prototype.setOpenParam=function(t){void 0===t&&(t=void 0),i.prototype.setOpenParam.call(this,t),this._tianshuId=t},n.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateInfo()},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._iconTween&&(this._iconTween.stop(),this._iconTween=null),i.prototype.destroy.call(this,t)},n.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.aboutBtn,"click",this,this.openAbout),this.onAutoEvt(this.goBtn,"click",this,this.goBtnFunc),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("UPDATE_TIANSHU_INFO",this,this.updateInfo),this.onAutoGlobalEvt("TIANSHU_DUNWU_SUCCESS",this,this.onTianshuDunwuSuccess),this.onAutoGlobalEvt("CHANGE_TIANSHU_TAB",this,this.selectHandler)},n.prototype.offEvt=function(){i.prototype.offEvt.call(this)},n.prototype.selectHandler=function(t){this._tianshuId=t,this.updateInfo()},n.prototype.updateInfo=function(){this.fight_num.value=r.TianshuModel.instance.getDunwuFight(this._tianshuId).toString();var t=r.TianshuModel.instance.getTianshuLvl(this._tianshuId),e=(h.instance.getCfgByLvl(this._tianshuId,t),h.instance.getCfgByLvl(this._tianshuId,t+1));if(this.nameTxt.text=h.instance.getTianshuName(this._tianshuId)+"·\n"+t+"\n层",this.iconImg.skin="assets/icon/ui/tianshu/icon_"+h.instance.getTianshuIconIndex(this._tianshuId)+".png",this._iconTween||(this._iconTween=TweenJS.create(this.iconImg).to({y:this.iconImg.y-20},1e3).yoyo(!0).repeat(99999999),this._iconTween.start()),this.partBox1.visible=this.partBox2.visible=this.partBox3.visible=this.partBox4.visible=!1,e){this.fullLvlTxt.visible=!1,this.goBtn.visible=!0;var i=e[2],n=i.length/2,s=this._partRoots[n];s.visible=!0;var o=0;this._partItems=[];for(var a=0;a<i.length;a+=2)this._partItems[o]=s.getChildByName("part_"+(o+1)),this._partItems[o].setData([this._tianshuId,i[a],i[a+1]]),o++;this.goBtn.label=r.TianshuModel.instance.checkCanDunwu(this._tianshuId)?"顿悟":"一键修习",r.TianshuModel.instance.checkTsDunwuRp(this._tianshuId)?(l.thisPlay(this._btnClip),this._btnClip.visible=!0):(l.thisStop(this._btnClip),this._btnClip.visible=!1)}else this.fullLvlTxt.visible=!0,this.goBtn.visible=!1,l.thisStop(this._btnClip),this._btnClip.visible=!1;this.attrList.dataSource=r.TianshuModel.instance.getTsDunwuPanelAttrs(this._tianshuId),this.updateSkillInfo()},n.prototype.updateSkillInfo=function(){for(var t=h.instance.getSkillPureIds(this._tianshuId),e=[],i=0;i<this._skillItems.length;i++){var n=this._skillItems[i];t[i]?(n.visible=!0,n.setData([this._tianshuId,t[i]]),e.push(n)):n.visible=!1}s.centerChainArr(this.skillBox.width,e,6==e.length?25:30)},n.prototype.attrHandler=function(t,e){var i=t.dataSource,n=o.instance.getCfgById(i[0]);t.getChildByName("nameTxt").text=n[1]+"：",t.getChildByName("valueTxt").text=n[2]?a.formatFloatNum(i[1])+"%":Math.round(i[1])+""},n.prototype.goBtnFunc=function(){if(r.TianshuModel.instance.checkCanDunwu(this._tianshuId))r.TianshuCtrl.instance.tianshuAddLevel(this._tianshuId);else{var t=r.TianshuModel.instance.getOneKeyUids(this._tianshuId);0<t.length?r.TianshuCtrl.instance.tianshuLearn(this._tianshuId,t):e.bag.BagUtil.openLackPropAlert(r.TianshuModel.instance.getOneKeyNeedItemId(this._tianshuId),1)}},n.prototype.onTianshuDunwuSuccess=function(){WindowManager.instance.open(1477,this._tianshuId)},n.prototype.openAbout=function(){s.alertHelp(19075)},t=n,r.TianshuDunwuPanel=t}(modules=modules||{}),function(t){var d,e,m,y,f,a,r,n,i;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t._jianwuLvl=void 0,t}d=t.tianshu||(t.tianshu={}),m=t.common.CustomClip,y=t.common.CommonUtil,f=t.config.TianshuCfg,a=t.config.AttrItemCfg,r=t.common.AttrUtil,n=t.effect.SuccessEffectCtrl,e=ui.TianshuJianwuViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnClip=m.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.x=261,this._btnClip.y=983,this._btnClip.visible=!1,this.attrList.renderHandler=Handler.create(this,this.attrHandler,null,!1),this._expClip=m.create("assets/effect/progress.atlas","progress",8,!1,3),this._expClip.pos(174,840,!0),this._expClip.scaleX=.85,this.addChild(this._expClip),this._expClip.visible=!1,this._critClip=m.create(null,"assets/effect/success",8,!1,3),this.addChild(this._critClip),this._critClip.scale(1.4,1.4,!0),this._critClip.pos(250,730,!0),this._critClip.visible=!1,this.fullLvlTxt.text="已满级",this._originBar=this.expBar.width},s.prototype.setOpenParam=function(t){void 0===t&&(t=void 0),e.prototype.setOpenParam.call(this,t),this._tianshuId=t},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},s.prototype.destroy=function(t){void 0===t&&(t=!0),Laya.timer.clear(this,this.stopExpClip),Laya.timer.clear(this,this.stopCritClip),this._btnClip=this.destroyElement(this._btnClip),this._expClip=this.destroyElement(this._expClip),this._critClip=this.destroyElement(this._critClip),this._iconTween&&(this._iconTween.stop(),this._iconTween=null),this._tweenLvUp&&(this._tweenLvUp.stop(),this._tweenLvUp=null),this._tweenExp&&(this._tweenExp.stop(),this._tweenExp=null),this._tweenExp1&&(this._tweenExp1.stop(),this._tweenExp1=null),e.prototype.destroy.call(this,t)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this.aboutBtn,"click",this,this.openAbout),this.onAutoEvt(this.goBtn,"click",this,this.goBtnFunc),this.onAutoEvt(this.powerBtn,"click",this,this.onPowerClick),this.onAutoEvt(this.xiulianBtn,"click",this,this.onXiulianClick),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateInfo,[!1]),this.onAutoGlobalEvt("UPDATE_TIANSHU_INFO",this,this.updateInfo,[!0]),this.onAutoGlobalEvt("CHANGE_TIANSHU_TAB",this,this.selectHandler)},s.prototype.offEvt=function(){e.prototype.offEvt.call(this)},s.prototype.selectHandler=function(t){this._tianshuId=t,this.updateInfo()},s.prototype.updateInfo=function(t){if(void 0===t&&(t=!1),null!=this._tianshuId){this.fight_num.value=d.TianshuModel.instance.getJianwuFight(this._tianshuId).toString();var e=d.TianshuModel.instance.getJianwuLvl(this._tianshuId);this.levelTxt.value=e.toString();var i=this.levelTxt.value.length,n=22*i+this.levelTxt.spaceX*(i-1),s=this.levelImg.width+n,o=(this.width-s)/2;this.levelImg.x=o,this.levelTxt.x=o+this.levelImg.width+3,this.nameTxt.text=f.instance.getTianshuName(this._tianshuId)+"·\n"+d.TianshuModel.instance.getTianshuLvl(this._tianshuId)+"\n层",this.iconImg.skin="assets/icon/ui/tianshu/icon_"+f.instance.getTianshuIconIndex(this._tianshuId)+".png",this._iconTween||(this._iconTween=TweenJS.create(this.iconImg).to({y:this.iconImg.y-20},1e3).yoyo(!0).repeat(99999999),this._iconTween.start()),this.tipsTxt.text=f.instance.getTianshuName(this._tianshuId)+"顿悟到1层才可以参悟";var a=f.instance.getJianwuCfgByLvl(this._tianshuId,e+1),r=f.instance.getJianwuCfgByLvl(this._tianshuId,e);if(a){var l=d.TianshuModel.instance.getTianshu(this._tianshuId),h=l?l[1]:0;if(0==h?(this.goBtn.visible=!1,this.consumablesItem.visible=!1,this.fullLvlTxt.visible=!1,this.tipsTxt.visible=!0,this.expBox.visible=!1):(this.goBtn.visible=!0,this.consumablesItem.visible=!0,this.fullLvlTxt.visible=!1,this.tipsTxt.visible=!1,this.expBox.visible=!0),0!=h){var p=r[2][0];this._needItemId=p;var c=r[2][1],u=y.getPropCountById(p);this.consumablesItem.dataSource=[p,0,0,null],this.consumablesItem.setNum(y.bigNumToString(u)+"/"+y.bigNumToString(c),u<c?"#ff3e3e":"#50ff28"),c<=u?(m.thisPlay(this._btnClip),this._btnClip.visible=!0,this._isEnough=!0):(m.thisStop(this._btnClip),this._btnClip.visible=!1,this._isEnough=!1)}else m.thisStop(this._btnClip),this._btnClip.visible=!1,this._isEnough=!1}else this.fullLvlTxt.visible=!0,this.goBtn.visible=!1,this.consumablesItem.visible=!1,this.expBox.visible=!1,this.tipsTxt.visible=!1,m.thisStop(this._btnClip),this._btnClip.visible=!1;this.attrList.dataSource=d.TianshuModel.instance.getJianwuAttrs(this._tianshuId),this.powerRp.visible=d.TianshuModel.instance.checkPowerRp(this._tianshuId),this.updateXiulianInfo(),t?this.levelUpHandler(0!=d.TianshuModel.instance.getTianshuCrit(this._tianshuId),this._jianwuLvl<e):(this.expTxt.text="Lv."+e,this.updateExp(!1,!1)),this._jianwuLvl=e}},s.prototype.updateXiulianInfo=function(){var t=d.TianshuModel.instance.getEatLevel(this._tianshuId),e=t+1,i=d.TianshuModel.instance.getTianshuLvl(this._tianshuId);f.instance.getXiulianLimitByNhLevel(this._tianshuId,i),this.xiulian_txt.text=t+"/"+f.instance.getXiulianLimitByNhLevel(this._tianshuId,i),this.xiulianRp.visible=d.TianshuModel.instance.checkEatRp(this._tianshuId);var n,s=f.instance.getXiulianConfigByLvl(this._tianshuId,t),o=f.instance.getXiulianConfigByLvl(this._tianshuId,e);n=o?o[2][0]:s[2][0],this.xiulianIcon.skin=y.getIconById(n)},s.prototype.attrHandler=function(t,e){var i=t.dataSource,n=a.instance.getCfgById(i[0]);t.getChildByName("nameTxt").text=n[1]+"：";var s=i[1]?i[1]:0,o=i[2]?i[2]:0;t.getChildByName("valueTxt").text=n[2]?r.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=s<o,t.getChildByName("addTxt").visible=s<o,t.getChildByName("addTxt").text=n[2]?r.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+""},s.prototype.goBtnFunc=function(){this._isEnough?d.TianshuCtrl.instance.tianshuLearning(this._tianshuId):t.bag.BagUtil.openLackPropAlert(this._needItemId,1)},s.prototype.openAbout=function(){y.alertHelp(19074)},s.prototype.onPowerClick=function(){0!=d.TianshuModel.instance.getTianshuLvl(this._tianshuId)?WindowManager.instance.open(1463,this._tianshuId):t.notice.SystemNoticeManager.instance.addNotice(f.instance.getTianshuName(this._tianshuId)+"顿悟到1层开启",!0)},s.prototype.onXiulianClick=function(){0!=d.TianshuModel.instance.getTianshuLvl(this._tianshuId)?WindowManager.instance.openDialog(1464,this._tianshuId):t.notice.SystemNoticeManager.instance.addNotice(f.instance.getTianshuName(this._tianshuId)+"顿悟到1层开启",!0)},s.prototype.levelUpHandler=function(t,e){if(e&&n.instance.play("assets/others/tx_jinjiechengong4.png"),this.updateExp(!0,e),Laya.timer.clear(this,this.stopExpClip),Laya.timer.clear(this,this.stopCritClip),m.thisStop(this._expClip),m.thisStop(this._critClip),t){this._tweenLvUp&&(this._tweenLvUp.stop(),this.critImg.visible=!1);var i=this.critImg;i.y=860,i.scale(1,1,!0),i.alpha=1,i.visible=!0,this._tweenLvUp||(this._tweenLvUp=TweenJS.create(i)),this._tweenLvUp.to({y:810,alpha:.3,scaleX:.7,scaleY:.7},600).onComplete(function(){i.visible=!1}).start(),m.thisPlay(this._expClip),Laya.timer.once(400,this,this.stopExpClip),m.thisPlay(this._critClip),Laya.timer.once(400,this,this.stopCritClip)}},s.prototype.stopExpClip=function(){m.thisStop(this._expClip)},s.prototype.stopCritClip=function(){m.thisStop(this._critClip)},s.prototype.updateExp=function(t,e){var i=this,n=d.TianshuModel.instance.getJianWuData(this._tianshuId),s=n?n[1]:0,o=n?n[0]:0,a=f.instance.getJianwuNeedExpByLvl(this._tianshuId,o),r=(s=a<s?a:s<0?0:s)/a*this._originBar;t?(this._tweenExp&&this._tweenExp.stop(),this._tweenExp||(this._tweenExp=TweenJS.create(this)),e?(this._tweenExp1&&this._tweenExp1.stop(),this._tweenExp1||(this._tweenExp1=TweenJS.create(this)),this._tweenExp1.to({expValue:this._expMaxValue},this._originBar-this.expBar.width).onComplete(function(){i.expTxt.text="Lv."+o,i._expMaxValue=a,(i.expValue=0)<s&&i._tweenExp.to({expValue:s},r-i.expBar.width).onComplete(function(){i.expTxt.text="Lv."+o}).start()}).start()):(this._expMaxValue=a,this._tweenExp.to({expValue:s},r-this.expBar.width).onComplete(function(){i.expTxt.text="Lv."+o}).start())):(this.expTxt.text="Lv."+o,this._expMaxValue=a,this.expValue=s)},Object.defineProperty(s.prototype,"expValue",{get:function(){return this._expValue},set:function(t){if(t>this._expMaxValue||t<0)return this._tweenExp&&this._tweenExp.stop(),this._tweenExp1&&this._tweenExp1.stop(),void this.updateExp(!1,!1);this._expValue=t,this.feedNumTxt.text=(this._expValue>>0).toString()+"/"+this._expMaxValue.toString();var e=this._expValue/this._expMaxValue;e=e?1<e?1:e<0?0:e:0,this.expBar.width=e*this._originBar},enumerable:!0,configurable:!0}),i=s,d.TianshuJianwuPanel=i}(modules=modules||{}),function(d){var t,s,x,S,_,e;function m(){this._tianshuList=[],this._tianshuObj={}}t=d.tianshu||(d.tianshu={}),s=d.redPoint.RedPointCtrl,x=d.config.ItemEquipCfg,S=d.config.TianshuCfg,_=d.config.SkillCfg,Object.defineProperty(m,"instance",{get:function(){return this._instance=this._instance||new m},enumerable:!0,configurable:!0}),m.prototype.setTianshuList=function(t){if(this._tianshuList=t,this._tianshuList&&0<this._tianshuList.length)for(var e=0;e<this._tianshuList.length;e++){var i=this._tianshuList[e];this._tianshuObj[i[0]]=i}},m.prototype.setTianshuInfo=function(t){this._tianshuObj[t[0]]=t},m.prototype.getEquipData=function(t,e){var i=this.getTianshu(t);if(!i)return null;var n=i[2];if(0==n.length)return null;for(var s=0;s<n.length;s++){var o=n[s];if(o[1][0]==e)return o[1]}return null},m.prototype.getEquipNum=function(t,e){var i=this.getTianshu(t);if(!i)return 0;var n=i[2];if(0==n.length)return 0;for(var s=0;s<n.length;s++){var o=n[s];if(o[1][0]==e)return o[2]}return 0},m.prototype.getEquipList=function(t){return this._tianshuObj[t]?this._tianshuObj[t][2]:[]},m.prototype.getTianshu=function(t){return this._tianshuObj[t]},m.prototype.setTianshuSkills=function(t,e){this._tianshuObj[t]&&(this._tianshuObj[t][3]=e)},m.prototype.getTianshSKills=function(t){return this._tianshuObj[t]?this._tianshuObj[t][3]:void 0},m.prototype.getTianshuLvl=function(t){return this._tianshuObj[t]?this._tianshuObj[t][1]:0},m.prototype.getBookSkillId=function(t,e){var i=this._tianshuObj[t]?this._tianshuObj[t][3]:void 0;if(i&&0<i.length)for(var n=0;n<i.length;n++)if(e==d.common.CommonUtil.getSkillPureIdById(i[n]))return i[n]},m.prototype.getDunwuFight=function(t){var e=this.getTianshu(t),i=this.getTianshuLvl(t),n=0;if(e){var s=S.instance.getCfgByLvl(t,i),o=S.instance.getCfgByLvl(t,i+1);if(s&&(n+=s[5]?s[5]:0),o){var a=e[2];if(a&&0<a.length)for(var r=0;r<a.length;r++){var l=a[r],h=l[2];n+=(d=x.instance.getItemCfgById(l[1][0]))[5]?d[5]*h:0}}if(0!=i)for(r=0;r<i;r++){var p=S.instance.getCfgByLvl(t,r+1);if(p)for(var c=p[2],u=0;u<c.length;u+=2){var d=x.instance.getItemCfgById(c[u]);h=c[u+1],n+=d[5]?d[5]*h:0}}var m=e[3];if(m&&0<m.length)for(var y=0;y<m.length;y++){var f=m[y],g=_.instance.getCfgById(f);n+=g?g[3]:0}}return n},m.prototype.getTsDunwuPanelAttrs=function(t){var e=this.getTianshuLvl(t),i=this.getTianshu(t),n=S.instance.getCfgByLvl(t,e),s=S.instance.getCfgByLvl(t,e+1),o=[],a=n?n[3]:[],r={};if(0<a.length)for(var l=0;l<a.length;l+=2)-1===o.indexOf(a[l])&&o.push(a[l]),r[a[l]]=(r[a[l]]?r[a[l]]:0)+a[l+1];if(0!=e)for(var h=0;h<e;h++){var p=S.instance.getCfgByLvl(t,h+1);if(p)for(var c=p[2],u=0;u<c.length;u+=2){var d=x.instance.getItemCfgById(c[u]),m=c[u+1];if(0<(v=d?d[8]:[]).length)for(l=0;l<v.length;l+=2)-1===o.indexOf(v[l])&&o.push(v[l]),r[v[l]]=(r[v[l]]?r[v[l]]:0)+v[l+1]*m}}if(s){var y=i?i[2]:null;if(y&&0<y.length)for(h=0;h<y.length;h++){var f=y[h];if(d=x.instance.getItemCfgById(f[1][0]),m=f[2],0<(v=d?d[8]:[]).length)for(l=0;l<v.length;l+=2)-1===o.indexOf(v[l])&&o.push(v[l]),r[v[l]]=(r[v[l]]?r[v[l]]:0)+v[l+1]*m}}var g=s?s[3]:[],_={};if(0<g.length){for(l=0;l<g.length;l+=2)-1===o.indexOf(g[l])&&o.push(g[l]),_[g[l]]=g[l+1];for(c=s[2],h=0;h<c.length;h+=2){var v;if(d=x.instance.getItemCfgById(c[h]),m=c[h+1],0<(v=d?d[8]:[]).length)for(l=0;l<v.length;l+=2)-1===o.indexOf(v[l])&&o.push(v[l]),_[v[l]]=(_[v[l]]?_[v[l]]:0)+v[l+1]*m}}for(var b=[],T=0;T<o.length;++T){var C=o[T],I=r[C]?r[C]:0,B=_[C]?_[C]:0;b.push([C,I,B,1])}return b},m.prototype.getTsDunwuAttrs=function(t){var e=this.getTianshuLvl(t),i=S.instance.getCfgByLvl(t,e-1),n=S.instance.getCfgByLvl(t,e),s=[],o=i?i[3]:[],a={};if(0<o.length)for(var r=0;r<o.length;r+=2)-1===s.indexOf(o[r])&&s.push(o[r]),a[o[r]]=o[r+1];var l=n?n[3]:[],h={};if(0<l.length)for(r=0;r<l.length;r+=2)-1===s.indexOf(l[r])&&s.push(l[r]),h[l[r]]=l[r+1];for(var p=[],c=0;c<s.length;++c){var u=s[c],d=a[u]?a[u]:0,m=h[u]?h[u]:0;p.push([u,d,m,1])}return p},m.prototype.getTsPartAttrs=function(t,e){var i=this.getTianshuLvl(t),n=this.getTianshu(t),s=n?n[2]:null,o=0,a=[],r={};if(s&&0<s.length)for(var l=0;l<s.length;l++){var h=s[l];if((y=h[1][0])==e){o=h[2];for(var p=(f=x.instance.getItemCfgById(y))?f[8]:[],c=0;c<p.length;c+=2)-1===a.indexOf(p[c])&&a.push(p[c]),r[p[c]]=(r[p[c]]?r[p[c]]:0)+p[c+1]*o;break}}var u=S.instance.getCfgByLvl(t,i+1),d={};if(u){var m=u[2];for(l=0;l<m.length;l+=2){var y;if((y=m[l])==e){var f=x.instance.getItemCfgById(y),g=m[l+1];for(p=f?f[8]:[],c=0;c<p.length;c+=2)-1===a.indexOf(p[c])&&a.push(p[c]),d[p[c]]=(d[p[c]]?d[p[c]]:0)+p[c+1]*(o==g?g:o+1);break}}}for(var _=[],v=0;v<a.length;++v){var b=a[v],T=r[b]?r[b]:0,C=d[b]?d[b]:0;u||(C=T),_.push([b,T,C,1])}return _},m.prototype.getNextSkill=function(t){var e=S.instance.getTianshuCfgById(t),i=this.getTianshuLvl(t),n=this.getTianshSKills(t);n=n||[];for(var s=0;s<e.length;s++){var o=(l=e[s])[1],a=l[4];if(i<o&&a&&0<a.length)for(var r=0;r<a.length;r++)if(-1==n.indexOf(a[r])&&S.instance.getSkillNeedLvl(t,a[r])==o&&a[r]%1e4==1)return{cur:l,skillId:a[r]}}for(s=0;s<e.length;s++){var l;if(o=(l=e[s])[1],a=l[4],i<o&&a&&0<a.length)for(r=0;r<a.length;r++)if(-1==n.indexOf(a[r])&&S.instance.getSkillNeedLvl(t,a[r])==o)return{cur:l,skillId:a[r]}}return{}},m.prototype.checkTsSkillRed=function(t){for(var e=!1,i=S.instance.getSkillPureIds(t),n=0;n<i.length;n++){var s=i[n],o=m.instance.getBookSkillId(t,s),a=0==(o?o%1e4:0)?1e4*s+1:o+1,r=m.instance.getTianshuLvl(t),l=S.instance.getSkillNeedLvl(t,a),h=S.instance.getSkillNeedItems(a),p=void 0,c=0,u=0;if(h&&0<h.length&&(p=h[0],c=h[1],u=d.common.CommonUtil.getPropCountById(p)),l&&l<=r&&c<=u){e=!0;break}}return e},m.prototype.getOneKeyUids=function(t){var e=this.getTianshuLvl(t),i=S.instance.getCfgByLvl(t,e+1);if(!i)return[];for(var n=i[2],s=[],o=0;o<n.length;o+=2){var a=n[o],r=n[o+1],l=this.getEquipNum(t,a);if(!this.getEquipComplete(t,a)&&0<CommonUtil.getPropCountById(a))for(var h=d.bag.BagModel.instance.getItemsById(a),p=0;p<r-l;p++)h[p]&&s.push(h[p][2])}return s},m.prototype.getOneKeyNeedItemId=function(t){var e=this.getTianshuLvl(t),i=S.instance.getCfgByLvl(t,e+1);if(i)for(var n=i[2],s=0;s<n.length;s+=2){var o=n[s];if(!this.getEquipComplete(t,o))return o}},m.prototype.getEquipComplete=function(t,e){var i=this.getTianshu(t);if(!i)return!1;var n=i[2];if(0==n.length)return!1;var s=this.getTianshuLvl(t);if(S.instance.getCfgByLvl(t,s+1))for(var o=0;o<n.length;o++){var a=n[o];if(a[1][0]==e&&a[2]>=S.instance.getPartNeedNum(t,s+1,e))return!0}return!1},m.prototype.checkTsEquipPartRp=function(t,e){var i=this.getTianshuLvl(t),n=S.instance.getCfgByLvl(t,i+1);if(!n)return!1;for(var s=n[2],o=0;o<s.length;o+=2)if(s[o]==e&&!this.getEquipComplete(t,s[o])&&0<CommonUtil.getPropCountById(s[o]))return!0;return!1},m.prototype.checkCanDunwu=function(t){var e=this.getTianshuLvl(t),i=S.instance.getCfgByLvl(t,e+1);if(!i)return!1;for(var n=i[2],s=0;s<n.length;s+=2)if(!this.getEquipComplete(t,n[s]))return!1;return!0},m.prototype.checkTsDunwuRp=function(t){var e=this.getTianshuLvl(t),i=S.instance.getCfgByLvl(t,e+1);if(!i)return!1;for(var n=i[2],s=0;s<n.length;s+=2)if(this.checkTsEquipPartRp(t,n[s]))return!0;return this.checkCanDunwu(t)},m.prototype.getTsDunwuIndex=function(){for(var t=0,e=S.instance.getTianshuIds(),i=0;i<e.length;i++){var n=e[i];if(this.checkTsDunwuRp(n)||this.checkTsSkillRed(n)){t=i;break}}return t},m.prototype.checkTsDunwuPanelRp=function(){for(var t=!1,e=S.instance.getTianshuIds(),i=0;i<e.length;i++){var n=e[i];if(this.checkTsDunwuRp(n)||this.checkTsSkillRed(n)){t=!0;break}}return s.instance.setRPProperty("tsDunwuRp",t),t},m.prototype.setTsEatLevel=function(t,e){this._tianshuObj[t]&&(this._tianshuObj[t][4]=e)},m.prototype.getJianwuFight=function(t){var e=0,i=this.getJianwuLvl(t);if(e+=S.instance.getJianwuFight(t,i),0!=i){var n=this.getTianshuPowerLvl(t);e+=S.instance.getPowerFight(t,n)}var s=this.getEatLevel(t);return e+=S.instance.getXiulianFightByLvl(t,s)},m.prototype.getJianwuAttrs=function(t){var e=this.getJianwuLvl(t),i=S.instance.getJianwuCfgByLvl(t,e),n=S.instance.getJianwuCfgByLvl(t,e+1),s=[],o=i?i[4]:[],a={};if(0<o.length)for(var r=0;r<o.length;r+=2)-1===s.indexOf(o[r])&&s.push(o[r]),a[o[r]]=o[r+1];var l=n?n[4]:[],h={};if(0<l.length)for(r=0;r<l.length;r+=2)-1===s.indexOf(l[r])&&s.push(l[r]),h[l[r]]=l[r+1];for(var p=[],c=0;c<s.length;++c){var u=s[c],d=a[u]?a[u]:0,m=h[u]?h[u]:0;p.push([u,d,m,1])}return p},m.prototype.getJianWuData=function(t){return this.getTianshu(t)?this.getTianshu(t)[5]:null},m.prototype.setTsLearning=function(t,e){this._tianshuObj[t]&&(this._tianshuObj[t][5]=e)},m.prototype.getJianwuLvl=function(t){var e=0;return this.getTianshu(t)&&(e=this.getTianshu(t)[5][0]),e},m.prototype.getTianshuPowerLvl=function(t){var e=0;return this.getTianshu(t)&&(e=this.getTianshu(t)[5][2]),e},m.prototype.getTianshuCrit=function(t){var e=0;if(this.getTianshu(t)){var i=this.getTianshu(t)[5][3];e=null==i?0:i}return e},m.prototype.checkPowerRp=function(t){var e=this.getTianshuLvl(t),i=this.getJianwuLvl(t),n=this.getTianshuPowerLvl(t),s=S.instance.getPowerCfg(t,n+1);return!!(0!=e&&s&&S.instance.getPowerNeedLvl(t,n+1)<=i)},m.prototype.getEatLevel=function(t){var e=0;return this.getTianshu(t)&&(e=this.getTianshu(t)[4]),e},m.prototype.checkEatRp=function(t){var e=m.instance.getTianshuLvl(t),i=m.instance.getEatLevel(t)+1,n=S.instance.getXiulianConfigByLvl(t,i);if(n){var s=n[4],o=n[2][0],a=n[2][1],r=CommonUtil.getPropCountById(o);if(0!=e&&s<=e&&a<=r)return!0}return!1},m.prototype.checkJianwuRp=function(t){var e=m.instance.getJianwuLvl(t),i=m.instance.getTianshuLvl(t),n=S.instance.getJianwuCfgByLvl(t,e+1),s=S.instance.getJianwuCfgByLvl(t,e);if(0!=i&&n){var o=s[2][0];if(s[2][1]<=CommonUtil.getPropCountById(o))return!0}return this.checkEatRp(t)||this.checkPowerRp(t)},m.prototype.checkJianwuPanelRp=function(){for(var t=!1,e=S.instance.getTianshuIds(),i=0;i<e.length;i++){var n=e[i];if(this.checkJianwuRp(n)){t=!0;break}}s.instance.setRPProperty("tsJianwuRp",t)},m.prototype.getJianwuIndex=function(){for(var t=0,e=S.instance.getTianshuIds(),i=0;i<e.length;i++){var n=e[i];if(this.checkJianwuRp(n)){t=i;break}}return t},m.prototype.getEatAttrs1=function(t,e){for(var i=S.instance.getXiulianConfig(t),n={},s=0;s<i.length;s++){var o=i[s],a=i[s-1]?i[s-1]:null,r=o[3];if(e<=o[1]){if(0<r.length)for(var l=0;l<r.length;l+=2)-1===this._attrIds.indexOf(r[l])&&this._attrIds.push(r[l]),n[r[l]]=(n[r[l]]?n[r[l]]:0)+r[l+1]*(e-(a?a[1]:0));break}if(0<r.length)for(l=0;l<r.length;l+=2)-1===this._attrIds.indexOf(r[l])&&this._attrIds.push(r[l]),n[r[l]]=(n[r[l]]?n[r[l]]:0)+r[l+1]*(o[1]-(a?a[1]:0))}return n},m.prototype.getEatAttrs=function(t){this._attrIds=[];for(var e=this.getEatLevel(t),i=this.getEatAttrs1(t,e),n=this.getEatAttrs1(t,e+1),s=[],o=0;o<this._attrIds.length;++o){var a=this._attrIds[o],r=i[a]?i[a]:0,l=n[a]?n[a]:0;s.push([a,r,l,1])}return s},m.prototype.checkAllRp=function(){this.checkTsDunwuPanelRp(),this.checkJianwuPanelRp()},e=m,t.TianshuModel=e}(modules=modules||{}),function(u){var t,e,d,m,y,f,g,i,_,l,h,n;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t._needItemId=void 0,t}t=u.tianshu||(u.tianshu={}),d=u.common.CommonUtil,m=u.config.SkillCfg,y=u.effect.SuccessEffectCtrl,f=u.config.SkillPureCfg,g=u.config.TianshuCfg,i=u.tianshu.TianshuCtrl,_=u.tianshu.TianshuModel,l=u.config.AttrItemCfg,h=u.common.AttrUtil,e=ui.TianshuSkillAlertUI,__extends(s,e),s.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),e.prototype.destroy.call(this)},s.prototype.initialize=function(){e.prototype.initialize.call(this),this.btnClip=d.creatEff(this,"btn_light",15),this.btnClip.pos(this.btn.x-5,this.btn.y-10),this.btnClip.visible=!1,this.titleTxt.text="天书技能",this._curAttrTxtArr=[this.curAttr1,this.curAttr2],this._nextAttrTxtArr=[this.nextAttr1,this.nextAttr2]},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_TIANSHU_INFO",this,this.updateInfo),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateInfo),this.onAutoClick(this.btn,this,this.activateOrUpHandler)},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._tianshuId=t[0],this._skillPureId=t[1]},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._tLv=void 0,this._needItemId=void 0,this.updateInfo()},s.prototype.updateInfo=function(){var t=f.instance.getCfgById(this._skillPureId);this.iconImg.skin="assets/icon/skill/"+t[6]+".png";var e=_.instance.getBookSkillId(this._tianshuId,this._skillPureId),i=e?e%1e4:0,n=0==i?1e4*this._skillPureId+1:e+1;this._nextSkillId=n;var s,o=m.instance.getCfgById(e),a=m.instance.getCfgById(this._nextSkillId),r=_.instance.getTianshuLvl(this._tianshuId),l=g.instance.getSkillNeedLvl(this._tianshuId,n),h=g.instance.getSkillNeedItems(n);this.nameTxt.text=t[1]+"  Lv."+i,this.powerTxt.text="战力："+(0==i?0:o[3]);var p=0,c=0;h&&0<h.length&&(s=h[0],p=h[1],c=u.common.CommonUtil.getPropCountById(s),this._needItemId=s),this._isEnough=p<=c,0==i?(this.btn.label="激活",this.btn.visible=!0,this.conditionTxt.visible=!1,this._needBookTips="顿悟到"+l+"层可解锁",this.nextConTxt.text="("+this._needBookTips+")",this.nextConTxt.visible=!(l<=r),this.nextLvDesc.text=d.stringFormat(t[5],a[2]),this.propTxt.text=c+"/"+p,this.propTxt.color=c<p?"#ff3e3e":"#168a17",this.propBox.visible=!0,this.propImg.skin=d.getIconById(s,!0)):(this.curLvDesc.text=d.stringFormat(t[5],o[2]),this.btn.label="升级",this.btn.visible=!0,l?(this._needBookTips="顿悟到"+l+"层可升级",this.nextConTxt.text="("+this._needBookTips+")",this.nextConTxt.visible=!(l<=r),this.nextLvDesc.text=d.stringFormat(t[5],a[2]),this.conditionTxt.visible=!1,this.propImg.skin=d.getIconById(s,!0),this.propTxt.text=c+"/"+p,this.propTxt.color=c<p?"#ff3e3e":"#168a17",this.propBox.visible=!0):(this.btn.visible=!1,this.propBox.visible=!1,this.conditionTxt.visible=!0,this.conditionTxt.text="已满级",this.conditionTxt.fontSize=30,this.nextConTxt.visible=!1),null!=this._tLv&&(1==i&&0===this._tLv?y.instance.play("assets/others/tx_jinjiechengong5.png"):i!==this._tLv&&-1!==this._tLv&&y.instance.play("assets/others/tx_jinjiechengong4.png"))),this._tLv=i,null!=r&&null!=l&&l<=r&&p<=c?(this.btnClip.visible=!0,this.btnClip.play()):(this.btnClip.visible=!1,this.btnClip.stop()),this.btnClip.y=this.btn.y-10,this.setAttr(g.instance.getSkillAttrs(e),g.instance.getSkillAttrs(n))},s.prototype.setAttr=function(t,e){if(t&&0<t.length){this.noneTxt.visible=!1,this.curAttr1.visible=!0,this.curAttr2.visible=!0,this.curLvDesc.visible=!0;for(var i=0,n=0;n<t.length;n+=2){var s=(a=l.instance.getCfgById(t[n]))[1]+"+",o=a[2]?h.formatFloatNum(t[n+1])+"%":Math.round(t[n+1])+"";this._curAttrTxtArr[i].text=s+o,i++}}else this.noneTxt.visible=!0,this.curAttr1.visible=!1,this.curAttr2.visible=!1,this.curLvDesc.visible=!1;if(e&&0<e.length)for(this.maxLvlTxt.visible=!1,this.nextAttr1.visible=!0,this.nextAttr2.visible=!0,this.nextLvDesc.visible=!0,n=i=0;n<e.length;n+=2){var a,r=(a=l.instance.getCfgById(e[n]))[1]+"+";o=a[2]?h.formatFloatNum(e[n+1])+"%":Math.round(e[n+1])+"",this._nextAttrTxtArr[i].text=r+o,i++}else this.maxLvlTxt.visible=!0,this.nextAttr1.visible=!1,this.nextAttr2.visible=!1,this.nextLvDesc.visible=!1},s.prototype.activateOrUpHandler=function(){if(this._isEnough){if(this.nextConTxt.visible)return void u.notice.SystemNoticeManager.instance.addNotice(this._needBookTips,!0);i.instance.tianshuSkillUp(this._tianshuId,this._nextSkillId)}else u.bag.BagUtil.openLackPropAlert(this._needItemId,1)},n=s,t.TianshuSkillAlert=n}(modules=modules||{}),function(t){var e,i,a,c,u,d,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.tianshu||(t.tianshu={}),a=t.tianshu.TianshuModel,c=t.config.TianshuCfg,u=t.config.AttrItemCfg,d=t.common.AttrUtil,i=ui.TianshuPowerAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._btnClip=CommonUtil.creatEff(this.upGradeBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._initPosYArr=[this.lastOnceTxt.y,this.attrTxt_3.y,this.attrTxt_4.y],this.upGradeBtn.label="升级"},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_TIANSHU_INFO",this,this.showView),this.onAutoClick(this.upGradeBtn,this,this.upGrade)},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._tianshuId=t,this.showView()},s.prototype.setAttr=function(t,e,i){var n,s;if(this.attrTxt_1.visible=this.attrTxt_2.visible=this.attrTxt_3.visible=this.attrTxt_4.visible=!1,this.onceTxt.visible=this.lastOnceTxt.visible=!1,this.if0_act.visible=this.hintTxt.visible=!1,0==t?(this.onceTxt.visible=!0,this.introTxt_1.text="当前阶段  "):i||(this.lastOnceTxt.visible=!0,this.introTxt_2.text="下一阶段  "),n=[],e&&0<(s=e[2]).length){this.onceTxt.visible=!1;for(var o=0;o<s.length;o+=2)-1===n.indexOf(s[o])&&n.push(s[o])}if(i&&0<(s=i[2]).length)for(o=0;o<s.length;o+=2)-1===n.indexOf(s[o])&&n.push(s[o]);e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[2],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[2],n),this.if0_act.x=this.introTxt_1.x+this.introTxt_1.width+5,this.ratioTxt.x=this.introTxt_2.x+this.introTxt_2.width+5,1!=this.lastOnceTxt.visible?(this.attrTxt_3.y=this._initPosYArr[0],this.attrTxt_4.y=this._initPosYArr[1]):(this.attrTxt_3.y=this._initPosYArr[1],this.attrTxt_4.y=this._initPosYArr[2])},s.prototype.setPerAttr=function(t,e,i,n){if(i)for(var s=0,o=0,a=n.length;o<a;o++){var r=d.getAttrIndexByType(n[o],i),l=u.instance.getCfgById(n[o]);if(0<=r){var h=1==++s?t:2===s?e:null;if(h){var p=i[2*r+1];h.text=""+c.instance.getTianshuName(this._tianshuId)+l[1]+" +"+(l[2]?d.formatFloatNum(p)+"%":Math.round(p)),h.visible=!0}if(2===s)break}}},s.prototype.showView=function(){var t,e,i;this.titleTxt.text="天书之力·"+c.instance.getTianshuName(this._tianshuId);var n=a.instance.getJianwuLvl(this._tianshuId),s=a.instance.getTianshuPowerLvl(this._tianshuId),o=c.instance.getPowerNeedLvl(this._tianshuId,s+1);this.attValueTxt.value=""+c.instance.getPowerFight(this._tianshuId,s),e=c.instance.getPowerCfg(this._tianshuId,s),t=(i=c.instance.getPowerCfg(this._tianshuId,s+1))&&o<=n,this.introTxt_1.text="当前阶段  "+c.instance.getTianshuName(this._tianshuId)+"参悟等级达到"+c.instance.getPowerNeedLvl(this._tianshuId,s)+"级",i&&(this.introTxt_2.text="下一阶段  "+c.instance.getTianshuName(this._tianshuId)+"参悟等级达到"+c.instance.getPowerNeedLvl(this._tianshuId,s+1)+"级"),this.blankImg.y=this.backImg.height=this.height=562,this.maskImg.height=274,this.upGradeBtn.visible=!0,t?(this.upGradeBtn.gray=!1,this._btnClip.visible=!0,this._btnClip.play(),this.ratioTxt.color="#00ad35",this.ratioTxt.text="("+n+"/"+o+")"):(this.upGradeBtn.gray=!0,this._btnClip.visible=!1,this._btnClip.stop(),this.ratioTxt.color="#ff0000",i?this.ratioTxt.text="("+n+"/"+o+")":(this.upGradeBtn.visible=!1,this.blankImg.y=this.backImg.height=this.height=450,this.maskImg.height=230,this.ratioTxt.text="")),this.setAttr(s,e,i)},s.prototype.upGrade=function(){this.upGradeBtn.gray||e.TianshuCtrl.instance.tianshuPowerUp(this._tianshuId)},n=s,e.TianshuPowerAlert=n}(modules=modules||{}),function(t){var e,i,h,p,c,n,u,d,m,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.tianshu||(t.tianshu={}),h=t.common.CommonUtil,p=t.common.CustomClip,c=t.config.TianshuCfg,n=t.tianshu.TianshuCtrl,u=t.tianshu.TianshuModel,d=t.config.AttrItemCfg,m=t.common.AttrUtil,s=t.bag.BagUtil,i=ui.TianshuXiulianAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._attrArrBox=[this.attr_1,this.attr_2,this.attr_3,this.attr_4,this.attr_5,this.attr_6],this._btnClip=p.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this.instenBtn,-6,-8),this._btnClip1=p.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip1.setProperty(this.oneInstenBtn,-6,-8)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._tianshuId=t},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updatePanel()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.instenBtn,this,this.upGrade),this.onAutoClick(this.oneInstenBtn,this,this.oneKeyUpGrade),this.onAutoGlobalEvt("UPDATE_TIANSHU_INFO",this,this.updatePanel),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updatePanel)},a.prototype.close=function(t,e){i.prototype.close.call(this,t,e),p.thisStop(this._btnClip),p.thisStop(this._btnClip1)},a.prototype.updatePanel=function(){var t=u.instance.getTianshuLvl(this._tianshuId),e=u.instance.getEatLevel(this._tianshuId),i=e+1,n=c.instance.getXiulianConfigByLvl(this._tianshuId,e),s=c.instance.getXiulianConfigByLvl(this._tianshuId,i);if(s){this.manjiText.visible=!1;var o=s[4],a=s[2][0];this._needItemId=a;var r=s[2][1],l=h.getPropCountById(a);this.nowBaseItem.dataSource=[a,1,0,null],this.icon.skin=h.getIconById(a),this.iconNum.text=r.toString(),this.nameText.text=h.getNameByItemId(a),this.nameText.color=h.getColorByQuality(h.getItemQualityById(a)),o<=t?(this.needMc.visible=!0,this.instenBtn.visible=!0,this.oneInstenBtn.visible=!0,this.tipText.visible=!1,r<=l?(p.thisPlay(this._btnClip),p.thisPlay(this._btnClip1)):(p.thisStop(this._btnClip),p.thisStop(this._btnClip1))):(this.needMc.visible=!1,this.instenBtn.visible=!1,this.oneInstenBtn.visible=!1,this.tipText.visible=!0,this.tipText.text=c.instance.getTianshuName(this._tianshuId)+"顿悟到"+o+"层提高修炼上限",p.thisStop(this._btnClip),p.thisStop(this._btnClip1)),this._enoughItemCount=r<=l,this.iconNum.text=h.bigNumToString(l)+"/"+r,this.iconNum.color=r<=l?"#168a17":"#ff3e3e",this.devourText.text=e+"/"+c.instance.getXiulianLimitByNhLevel(this._tianshuId,t)}else this.needMc.visible=!1,this.instenBtn.visible=!1,this.oneInstenBtn.visible=!1,this.manjiText.visible=!0,this.tipText.visible=!1,p.thisStop(this._btnClip),p.thisStop(this._btnClip1),this.devourText.text=e+"/"+c.instance.getXiulianLimitByNhLevel(this._tianshuId,t),n&&(a=n[2][0],this.nowBaseItem.dataSource=[a,1,0,null],this.nameText.text=h.getNameByItemId(a),this.nameText.color=h.getColorByQuality(h.getItemQualityById(a)));this.setAttribute()},a.prototype.setAttribute=function(){for(var t=u.instance.getEatAttrs(this._tianshuId),e=[],i=0;i<this._attrArrBox.length;i++){var n=t[i],s=this._attrArrBox[i];if(n){s.visible=!0,e.push(s);var o=s.getChildByName("name_txt"),a=s.getChildByName("value_txt"),r=s.getChildByName("up_img"),l=s.getChildByName("upValue_txt"),h=d.instance.getCfgById(n[0]);o.text=h[1]+"：";var p=n[1]?n[1]:0,c=n[2]?n[2]:0;a.text=h[2]?m.formatFloatNum(n[1])+"%":Math.round(n[1])+"",r.visible=p<c,l.visible=p<c,l.text=h[2]?m.formatFloatNum(n[2]-n[1])+"%":Math.round(n[2]-n[1])+"",r.visible||l.visible?(o.x=135,a.x=320):(o.x=186,a.x=371)}else s.visible=!1}for(i=0;i<e.length;i++)(s=e[i]).y=0+i*s.height;this.diTuImg.height=e.length*e[0].height+0,this.bottomMc.y=this.diTuImg.y+this.diTuImg.height+3,this.height=this.bottomMc.y+this.bottomMc.height+10,this.bgImg.height=this.height+20,this.hintTxt.y=this.height+22},a.prototype.upGrade=function(){this._enoughItemCount?n.instance.tianshuDanEat(this._tianshuId):s.openLackPropAlert(this._needItemId,1)},a.prototype.oneKeyUpGrade=function(){this._enoughItemCount?n.instance.tianshuDanFastEat(this._tianshuId):s.openLackPropAlert(this._needItemId,1)},a.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._btnClip1=this.destroyElement(this._btnClip1),i.prototype.destroy.call(this)},o=a,e.TianshuXiulianAlert=o}(modules=modules||{}),function(c){var t,i,u,d,m,e,y,f,g,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}t=c.tianshu||(c.tianshu={}),u=c.common.CommonUtil,d=c.common.CustomClip,m=c.config.TianshuCfg,e=c.tianshu.TianshuCtrl,y=c.tianshu.TianshuModel,f=c.config.AttrItemCfg,g=c.common.AttrUtil,n=c.bag.BagUtil,i=ui.TianshuXiuxiAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._attrArrBox=[this.attr_1,this.attr_2,this.attr_3,this.attr_4,this.attr_5,this.attr_6],this._btnClip=d.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this.instenBtn,-6,-8),this._numArr=[this.num_1,this.num_2,this.num_3]},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._tianshuId=t[0],this._itemId=t[1],this._num=t[2]},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updatePanel()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.instenBtn,this,this.upGrade),this.onAutoGlobalEvt("UPDATE_TIANSHU_INFO",this,this.updatePanel),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updatePanel)},o.prototype.close=function(t,e){i.prototype.close.call(this,t,e),d.thisStop(this._btnClip)},o.prototype.updatePanel=function(){this.titleTxt.text=c.common.CommonUtil.getNameByItemId(this._itemId),this.iconImg.skin="assets/icon/ui/tianshu/icon_"+m.instance.getTianshuIconIndex(this._tianshuId)+".png",this._iconTween||(this._iconTween=TweenJS.create(this.iconImg).to({y:this.iconImg.y-20},1e3).yoyo(!0).repeat(99999999),this._iconTween.start());var t=y.instance.getTianshuLvl(this._tianshuId);if(m.instance.getCfgByLvl(this._tianshuId,t+1)){this._uid=void 0;var e=[],i=y.instance.getEquipNum(this._tianshuId,this._itemId);for(a=0;a<3;a++){var n=this._numArr[a];n.getChildByName("light").visible=!1,a+1<=this._num?(n.visible=!0,e.push(n)):n.visible=!1,a+1<=i&&(n.getChildByName("light").visible=!0)}u.centerChainArr(this.width,e,5);var s=u.getPropCountById(this._itemId);if(this.consumablesItem.dataSource=[this._itemId,0,0,null],this.consumablesItem.setNum(u.bigNumToString(s)+"/1",s<1?"#ff3e3e":"#50ff28"),i==this._num)this.manjiText.visible=!0,this.manjiText.text="顿悟后才可以继续修习",m.instance.getCfgByLvl(this._tianshuId,t+2)||(this.manjiText.text="顿悟后即达到满级"),this.consumablesItem.visible=!0,this.instenBtn.visible=!1,this._btnClip.visible=!1;else if(this.manjiText.visible=!1,this.consumablesItem.visible=!0,this.instenBtn.visible=!0,0<s){this._btnClip.visible=!0,d.thisPlay(this._btnClip);var o=c.bag.BagModel.instance.getItemsById(this._itemId)[0];this._uid=o[2]}else this._btnClip.visible=!1,d.thisStop(this._btnClip);this.setAttribute()}else{this.manjiText.visible=!0,this.manjiText.text="天书达到最大层",this.consumablesItem.visible=!1,this.instenBtn.visible=!1,this._btnClip.visible=!1;for(var a=0;a<this._nameTextArry.length;a++){var r=this._nameTextArry[a],l=this._valueTextArry[a],h=this._upValueTextArry[a],p=this._upValueImgArry[a];r.visible=!1,l.visible=!1,h.visible=!1,p.visible=!1}}},o.prototype.setAttribute=function(){for(var t=y.instance.getTsPartAttrs(this._tianshuId,this._itemId),e=[],i=0;i<this._attrArrBox.length;i++){var n=t[i],s=this._attrArrBox[i];if(n){s.visible=!0,e.push(s);var o=s.getChildByName("name_txt"),a=s.getChildByName("value_txt"),r=s.getChildByName("up_img"),l=s.getChildByName("upValue_txt"),h=f.instance.getCfgById(n[0]);o.text=h[1]+"：";var p=n[1]?n[1]:0,c=n[2]?n[2]:0;a.text=h[2]?g.formatFloatNum(n[1])+"%":Math.round(n[1])+"",r.visible=p<c,l.visible=p<c,l.text=h[2]?g.formatFloatNum(n[2]-n[1])+"%":Math.round(n[2]-n[1])+""}else s.visible=!1}for(i=0;i<e.length;i++)(s=e[i]).y=0+i*s.height;this.diTuImg.height=e.length*e[0].height+0,this.bottomMc.y=this.diTuImg.y+this.diTuImg.height+3,this.height=this.bottomMc.y+this.bottomMc.height+10,this.bgImg.height=this.height+20,this.hintTxt.y=this.height+22},o.prototype.upGrade=function(){this._uid?e.instance.tianshuLearn(this._tianshuId,[this._uid]):n.openLackPropAlert(this._itemId,1)},o.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._iconTween&&(this._iconTween.stop(),this._iconTween=null),i.prototype.destroy.call(this)},s=o,t.TianshuXiuxiAlert=s}(modules=modules||{}),function(t){var e,i,n,r,l,h,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.tianshu||(t.tianshu={}),n=t.config.TianshuCfg,r=t.tianshu.TianshuModel,l=t.config.AttrItemCfg,h=t.common.AttrUtil,i=ui.TianshuDunwuAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._effect=CustomClip.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._effect,1),this._effect.scale(2.5,2.5,!0),this._effect.y=-55,this._effect.centerX=0,this._nameTextArry=[this.attributeNameText1,this.attributeNameText2,this.attributeNameText3,this.attributeNameText4,this.attributeNameText5,this.attributeNameText6],this._valueTextArry=[this.attributeValueText1,this.attributeValueText2,this.attributeValueText3,this.attributeValueText4,this.attributeValueText5,this.attributeValueText6]},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._tianshuId=t},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._effect.play(),this.updatePanel()},o.prototype.updatePanel=function(){var t=r.instance.getTianshuLvl(this._tianshuId);this.nameTxt.text=n.instance.getTianshuName(this._tianshuId)+"·"+t+"层",this.iconImg.skin="assets/icon/ui/tianshu/icon_"+n.instance.getTianshuIconIndex(this._tianshuId)+".png",this._iconTween||(this._iconTween=TweenJS.create(this.iconImg).to({y:this.iconImg.y-10},1e3).yoyo(!0).repeat(99999999),this._iconTween.start()),this.setAttribute()},o.prototype.setAttribute=function(){for(var t=r.instance.getTsDunwuAttrs(this._tianshuId),e=[],i=0;i<this._nameTextArry.length;i++){var n=t[i],s=this._nameTextArry[i],o=this._valueTextArry[i];if(n){s.visible=!0,o.visible=!0;var a=l.instance.getCfgById(n[0]);s.text=a[1]+"：",o.text="+"+(a[2]?h.formatFloatNum(n[2]-n[1])+"%":Math.round(n[2]-n[1])+""),e.push(n)}else s.visible=!1,o.visible=!1}3==e.length?(this.maskImg.height=132,this.exitTips.y=582,this.height=577):4==e.length?(this.maskImg.height=170,this.exitTips.y=622,this.height=615):5==e.length?(this.maskImg.height=208,this.exitTips.y=664,this.height=656):6==e.length&&(this.maskImg.height=242,this.exitTips.y=692,this.height=685)},o.prototype.close=function(){i.prototype.close.call(this),this._iconTween&&(this._iconTween.stop(),this._iconTween=null),this._effect.stop()},o.prototype.destroy=function(){this._iconTween&&(this._iconTween.stop(),this._iconTween=null),i.prototype.destroy.call(this)},s=o,e.TianshuDunwuAlert=s}(modules=modules||{}),function(e){var i,n,t;function s(){return null!==n&&n.apply(this,arguments)||this}i=e.trahman_boss||(e.trahman_boss={}),n=ui.TrahmanBossCopyLeftViewUI,__extends(s,n),s.prototype.initialize=function(){n.prototype.initialize.call(this),this.left=0,this.bottom=474,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.handBookBtn,this,this.handBookBtnHandler)},s.prototype.onOpened=function(){n.prototype.onOpened.call(this);var t=i.TrahmanBossModel.instance.selecOcc;t?(e.bossDungeon.BossDungeonModel.instance.selectLastBoss=t,PlayerModel.instance.selectTarget(1,t)):PlayerModel.instance.selectTarget(0,-1)},s.prototype.handBookBtnHandler=function(){WindowManager.instance.open(1471)},s.prototype.close=function(){n.prototype.close.call(this)},t=s,i.TrahmanBossCopyLeftPanel=t}(modules=modules||{}),function(u){var t,e,i,n,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._listState=!0,t}t=u.trahman_boss||(u.trahman_boss={}),i=u.common.CustomList,n=Laya.Event,e=ui.TrahmanBossCopyRightViewUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=282,this.closeByOthers=!1,this.layer=3,this._list=i.create("v",11,34,250,171,t.TrahmanBossCopyRightPlayerItem,3),this.addChild(this._list),this._list.size(250,171),this._list.pos(11,34,!0),this._list.canSelectSameItem=!0},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._list,n.SELECT,this,this.selectHandler).onAutoClick(this.expandBtn,this,this.expandBtnHandler).onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updateMyRecord).onAutoGlobalEvt("BOSS_OWN_UPDATE",this,this.updateMyRecord).onAutoGlobalEvt("BOSS_ATTACK_UPDATE",this,this.updateMyRecord)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateMyRecord(),this._list.selectedIndex=-1},o.prototype.selectHandler=function(){if(-1!=this._list.selectedIndex){var t=this._list.datas[this._list.selectedIndex][0];t!==PlayerModel.instance.actorId?u.faction.FactionModel.instance.isTongXianMeng(t)?u.notice.SystemNoticeManager.instance.addNotice("该玩家与您同一仙盟，不可攻击",!0):u.warband.WarbandModel.instance.isMyWarBandPeople(t)?u.notice.SystemNoticeManager.instance.addNotice("该玩家与您同一战队，不可攻击",!0):t!==u.marry.MarryModel.instance.halfRoleID?PlayerModel.instance.selectTarget(2,t):u.notice.SystemNoticeManager.instance.addNotice("该玩家为您的仙侣，不可攻击",!0):CommonUtil.noticeError(0,"无法攻击自己",!0)}},o.prototype.expandBtnHandler=function(){this._listState?this._listState=!1:this._listState=!0,this.changUI()},o.prototype.changUI=function(){this.bgImg.height=this._listState?210:67,this.bgImg.y=this._listState?0:143,this._list.height=this._listState?171:30,this._list.y=this._listState?34:175,this.titleText.y=this._listState?10:152,this.expandBtn.y=this._listState?10:152,this.expandImg.skin=this._listState?"common/btn_tonyong_28.png":"common/btn_tonyong_29.png",this.updateMyRecord()},o.prototype.updateMyRecord=function(){for(var t=u.bossDungeon.BossDungeonModel.instance,e=[],i=[],n=[],s=[],o=[],a=0,r=t.getPlayerInfo();a<r.length;a++){var l=r[a],h=l[0];if(t.isSelectBossOwner(h)){var p=t.playerIsMeAttack(h)||t.playerIsAttackMe(h);e.push([l[0],l[1],p?3:1])}else h!=PlayerModel.instance.actorId&&(this.isTeam(h)?o.push([l[0],l[1],0]):t.playerIsMeAttack(h)?i.push([l[0],l[1],2]):t.playerIsAttackMe(h)?n.push([l[0],l[1],2]):s.push([l[0],l[1],0]))}var c=e.concat(i,n,s,o);this._list.selectedIndex=-1,this._scrollPosOld1=this._list.scrollPos,this._list.datas=c,this._list.scrollPos=this._scrollPosOld1},o.prototype.isTeam=function(t){return!!u.faction.FactionModel.instance.isTongXianMeng(t)||!!u.warband.WarbandModel.instance.isMyWarBandPeople(t)||t===u.marry.MarryModel.instance.halfRoleID},o.prototype.close=function(){u.bossDungeon.BossDungeonModel.instance.resetShuJu(),e.prototype.close.call(this)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},s=o,t.TrahmanBossCopyRightPanel=s}(modules=modules||{}),function(i){var n,t,e,s,o,a;function r(){return null!==t&&t.apply(this,arguments)||this}function l(){return null!==o&&o.apply(this,arguments)||this}n=i.trahman_boss||(i.trahman_boss={}),e=i.common.CustomList,t=i.bag.BaseItem,__extends(r,t),r.prototype.initialize=function(){t.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},s=r,o=ui.TrahmanBossGSAlertUI,__extends(l,o),l.prototype.initialize=function(){o.prototype.initialize.call(this),this._list=e.create("v",0,0,498,275,s,30,4),this._list.shiftingX=8,this._list.shiftingY=5,this._list.spaceX=30,this._list.spaceY=25,this.listBos.addChild(this._list),this._list.pos(-8,-5,!0)},l.prototype.destroy=function(){this.destroyElement(this._list),o.prototype.destroy.call(this)},l.prototype.onOpened=function(){if(o.prototype.onOpened.call(this),n.TrahmanBossModel.instance.selecOcc){var t=i.config.SceneBrahmaBossCfg.instance.getCfgByOcc(n.TrahmanBossModel.instance.selecOcc),e=CommonUtil.formatItemData(t[4]);this._list.datas=e}},a=l,n.TrahmanBossGSAlert=a}(modules=modules||{}),function(a){var t,r,e,i,n,s,o,l,h,p,c,u;function d(){return r.call(this)||this}t=a.trahman_boss||(a.trahman_boss={}),e=a.commonAlert.PropAlertUtil,i=a.config.BlendCfg,n=a.dungeon.DungeonCtrl,s=a.config.GetWayCfg,o=a.config.FailureStrongerCfg,l=a.funcOpen.FuncOpenModel,h=a.notice.SystemNoticeManager,p=a.config.TipCfg,c=a.bottomTab.BottomTabCtrl,r=ui.TrahmanBossLoseAlertUI,__extends(d,r),d.prototype.initialize=function(){r.prototype.initialize.call(this),this._sourceBtn=new Array,this._level=PlayerModel.instance.level,this._sourceBtnBg=new Array,this._desTxts=new Array,this.addChild(this.gotoBtn);for(var t=0;t<4;t++)this._sourceBtn[t]=new Laya.Image,this._sourceBtn[t].mouseEnabled=!0,this._sourceBtnBg[t]=new Laya.Image,this._desTxts[t]=new laya.display.Text,e.setDesTxt(this._desTxts[t])},d.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close).onAutoClick(this._sourceBtn[0],this,this.openSourcePanel,[1]).onAutoClick(this._sourceBtn[1],this,this.openSourcePanel,[2]).onAutoClick(this._sourceBtn[2],this,this.openSourcePanel,[3]).onAutoClick(this._sourceBtn[3],this,this.openSourcePanel,[4]).onAutoClick(this.gotoBtn,this,this.gotoPlane).onAutoGlobalEvt("TIPBIANQIANG_UPDATE",this,this.updateTipUI).onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),Laya.timer.loop(1e3,this,this.loopHandler)},d.prototype.updateTipUI=function(){if(0==a.dungeon.DungeonModel.instance.tipType)return this.gotoBtn.visible=!1,void(this.TipsImg.visible=!1);var t=p.instance.getCfgByType(a.dungeon.DungeonModel.instance.tipType);t?(this.gotoBtn.visible=!0,this.TipsImg.visible=!0,this.TipsImg.skin="assets/icon/ui/failure_stronger/"+t[3]+".jpg"):this.TipsImg.skin="",PlatParams.isCloseRecharge&&(this.gotoBtn.visible=!1,this.TipsImg.visible=!1)},d.prototype.updatePlatChangeRecharge=function(){this.gotoBtn.visible=!PlatParams.isCloseRecharge,this.TipsImg.visible=!PlatParams.isCloseRecharge},d.prototype.setOpenParam=function(t){if(r.prototype.setOpenParam.call(this,t),t){var e=t[1];console.log("梵天boss 结算失败。。。。。"+e);var i=t[3],n=t[5],s=t[6],o=t[4];this.headIcon.setInfo(n,i,s),this.nameTxt.text=o,this.nameTxt.color=o==a.player.PlayerModel.instance.roleName?"#50ff28":"#ffffff",a.common.CommonUtil.centerChainArr(this.width,[this.tipTxt,this.nameTxt])}},d.prototype.onOpened=function(){r.prototype.onOpened.call(this),this._duration=i.instance.getCfgById(10303)[1][0],this.loopHandler(),this.setDate(),n.instance.getTipsPriorInfo(),PlatParams.isCloseRecharge&&(this.gotoBtn.visible=!1,this.TipsImg.visible=!1)},d.prototype.close=function(t,e){r.prototype.close.call(this,t,e),Laya.timer.clear(this,this.loopHandler),n.instance.reqEnterScene(0)},d.prototype.gotoPlane=function(){if(0!=a.dungeon.DungeonModel.instance.tipType){var t=p.instance.getCfgByType(a.dungeon.DungeonModel.instance.tipType);if(t){var e=t[4];c.instance.addPanelByFunc(e),this.close()}}},d.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},d.prototype.setDate=function(){this.removeChildSource(),this._level=PlayerModel.instance.level;var t,e=o.instance.getCfgByLevel(this._level)[1];this.bigToSmall(e);for(var i=0,n=e.length;i<n;i++)this.addChild(this._sourceBtnBg[i]),this.addChild(this._sourceBtn[i]),t=s.instance.getCfgById(e[i]),this._sourceBtn[i].pos(46+.5*(512-158*n+42*(n-1))+116*i,690),this._sourceBtn[i].skin="assets/icon/ui/get_way/"+t[1]+".png",this._sourceBtnBg[i].skin="assets/icon/ui/get_way/btn_ydrk_bg.png",this._sourceBtnBg[i].pos(this._sourceBtn[i].x,this._sourceBtn[i].y),this._sourceBtn[i].addChild(this._desTxts[i]),this._desTxts[i].pos(6,70),this._desTxts[i].text=t[2]},d.prototype.openSourcePanel=function(t){var e=o.instance.getCfgByLevel(this._level)[1];this.bigToSmall(e);var i=s.instance.getCfgById(e[t-1])[3][0];this.openPlane(i)},d.prototype.openPlane=function(t){0===t?this.close():l.instance.getFuncIsOpen(t)?(c.instance.addPanelByFunc(t),this.close()):h.instance.addNotice(l.instance.getFuncOpenTipById(t),!0)},d.prototype.bigToSmall=function(t){for(var e=0,i=t.length;e<i-1;e++)for(var n=0;n<t.length-e-1;n++)if(t[n]<t[n+1]){var s=t[n];t[n]=t[n+1],t[n+1]=s}return t},d.prototype.removeChildSource=function(){if(null!=this._sourceBtn)for(var t=0;t<this._sourceBtn.length;t++)this.removeChild(this._sourceBtn[t]),this.removeChild(this._sourceBtnBg[t]),this.removeChild(this._desTxts[t])},d.prototype.destroy=function(){if(null!=this._sourceBtn){for(var t=0;t<this._sourceBtn.length;t++)this._sourceBtn[t].destroy(!0),this._sourceBtnBg[t].destroy(!0),this._desTxts[t].destroy(!0);this._sourceBtn=this._sourceBtnBg=this._desTxts=null}r.prototype.destroy.call(this)},u=d,t.TrahmanBossLoseAlert=u}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.trahman_boss||(t.trahman_boss={}),n=t.dungeon.DungeonCtrl,i=ui.TrahmanBossLoseAlert1UI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=t.config.BlendCfg.instance.getCfgById(10303)[1][0],this.loopHandler(),this.text2.text=e.TrahmanBossModel.instance.timeStarr,t.common.CommonUtil.centerChainArr(this.width,[this.text1,this.text2])},o.prototype.close=function(t,e){i.prototype.close.call(this,t,e),n.instance.reqEnterScene(0)},o.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},s=o,e.TrahmanBossLoseAlert1=s}(modules=modules||{}),function(t){var e,i;function n(){this.datesTable={},this.datesTableByOcc={},this.datesTable1={},this.arrLeve=[],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("scene_brahma_boss");if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=Number(i[0]),s=Number(i[1]),o=Number(i[2]),a=Number(i[3]);this.datesTableByOcc[a]=i,this.datesTable[o]||(this.datesTable[o]=[]),-1===this.arrLeve.indexOf(o)&&this.arrLeve.push(o),this.datesTable[o].push(i),this.datesTable1[n]||(this.datesTable1[n]={}),this.datesTable1[n][s]=i}}},n.prototype.getCfgByLevel=function(t){return this.datesTable[t]},n.prototype.getCfgByOcc=function(t){return this.datesTableByOcc[t]},n.prototype.getCfgByLvAndMpid=function(t,e){return this.datesTable1[t][e]},i=n,e.SceneBrahmaBossCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.datesTable={},this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("boss_challenge_cond");if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=Number(i[0]);this.datesTable[n]=i}}},n.prototype.getCfgById=function(t){return this.datesTable[t]},i=n,e.BossChallengeCondCfg=i}(modules=modules||{}),function(d){var b,s,t,T,m,e,o,i,a,r,n,l,C,h;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t._posY=639,t._openOcc=0,t}b=d.trahman_boss||(d.trahman_boss={}),t=ui.TrahmanBossViewUI,T=d.common.CommonUtil,m=d.common.CustomClip,e=d.common.AvatarClip,o=d.config.ExteriorCfg,i=d.customData.CustomDataModel,a=d.customData.CustomDataCtrl,r=d.notice.SystemNoticeManager,n=d.common.SimpleList,l=d.config.SceneBrahmaBossCfg,C=d.config.BossChallengeCondCfg,s=t,__extends(p,s),p.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._showItems=[this.item1,this.item2,this.item3,this.item4],this._showHtml=[this.html1,this.html2,this.html3,this.html4,this.html5],this._list=n.create(b.TrahmanBossItem,200,185,1,1,3),this.lostBox.addChild(this._list),this._list.size(213,658),this._list1=n.create(b.TrahmanBossItem1,210,170,2),this.lostBox1.addChild(this._list1),this._list1.size(630,170),this._btnClip=m.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,358,768),this._btnClip.pos(this.goBtn.x-7,this.goBtn.y-8),this._modelClip=e.create(1024,1024,1024),this.addChildAt(this._modelClip,4),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.x=475,this._modelClip.y=565,this._modelClip.scale(.7,.7,!0),T.setHTMLPro(this.html1,"#FFFFFF","SimHei",20),T.setHTMLPro(this.html2,"#FFFFFF","SimHei",20),T.setHTMLPro(this.html3,"#FFFFFF","SimHei",20),T.setHTMLPro(this.html4,"#FFFFFF","SimHei",20),T.setHTMLPro(this.html5,"#FFFFFF","SimHei",20),T.setHTMLPro(this.html6,"#FF3E3E","SimHei",24,"center"),this._plusBtnClip=m.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.addChild(this._plusBtnClip),this._plusBtnClip.pos(this.addBtn.x-10,this.addBtn.y-10),this._plusBtnClip.visible=!1},p.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.goBtn,this,this.goBtnHanlder).onAutoClick(this.followBtn,this,this.followHandler).onAutoClick(this.tipsBtn,this,this.tipsBtnHandler).onAutoClick(this.autoTipsBtn,this,this.autoTipsBtnHandler).onAutoClick(this.addBtn,this,this.addBtnHandler).onAutoClick(this.autoCheckBox,this,this.autoCheckBoxHandler).onAutoEvt(this._list,"select",this,this.bossSelectHandler).onAutoEvt(this._list1,"select",this,this.bossSelectHandler1).onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.setBtn).onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.setBtn).onAutoGlobalEvt("BORN_LV_UPDATE",this,this.setBtn).onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.setBtn).onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.followsUpdateHandler).onAutoGlobalEvt("BOSS_HOME_ZHIZUN_UPDATE",this,this.checkBoxState).onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge).onAutoGlobalEvt("GET_BRAHMA_BOSS_PERINFO_REPLY",this,this.gsUISet).onAutoGlobalEvt("VIP_UPDATE",this,this.gsUISet).onAutoGlobalEvt("GET_BRAHMA_BOSS_PERINFO_REPLY",this,this.setBtn).onAutoGlobalEvt("GET_BRAHMA_BOSS_PERINFO_REPLY",this,this.updateMsgArrUI).onAutoGlobalEvt("GET_BRAHMA_BOSS_PERINFO_REPLY",this,this.updatelist).regAutoRP(this.cultureRP,["trahmanBossRP"])},p.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t),this._openOcc=t},p.prototype.updatelist=function(){if(-1!=this._list1.selectedIndex&&-1!=this._list.selectedIndex&&null!=this._list1.datas&&null!=this._list.datas){var t=this._list1.selectedIndex;this._list1.datas=l.instance.arrLeve,this._list1.selectedIndex=t}},p.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.gsUISet(),this.checkBoxState(),this._list1.datas=l.instance.arrLeve;var t=-1,e=!0;if(this._openOcc)t=l.instance.getCfgByOcc(this._openOcc)[2]-1,e=!1;else{for(var i=l.instance.arrLeve.length-1;0<=i;i--){var n=l.instance.arrLeve[i];if(b.TrahmanBossModel.instance.getLevelRp(n)){t=i;break}}if(-1===t)for(t=0,i=l.instance.arrLeve.length-1;0<=i;i--)if(n=l.instance.arrLeve[i],b.TrahmanBossModel.instance.getLevelRp(n,!1)){t=i;break}}this._list1.selectedIndex=t,a.instance.getCustomizeData([36]),e&&b.TrahmanBossCtrl.instance.GetBrahmaBossPerInfo(),d.dungeon.DungeonCtrl.instance.getBoss()},p.prototype.bossSelectHandler1=function(){var t=l.instance.getCfgByLevel(this._list1.selectedData);t.sort(this.scrtBoss.bind(this)),this._list.datas=t;var e=-1;if(this._openOcc){for(var i=t.length-1;0<=i;i--){var n=t[i];if(this._openOcc===n[3]){e=i;break}}this._openOcc=0}else{for(i=t.length-1;0<=i;i--)if(n=t[i],b.TrahmanBossModel.instance.getBossRp(n[3])){e=i;break}if(-1===e)for(e=0,i=t.length-1;0<=i;i--)if(n=t[i],b.TrahmanBossModel.instance.getBossRp(n[3],!1)){e=i;break}}e=-1===e?0:e,this._list.selectedIndex=e,this._list.scrollToIndex(this._list.selectedIndex)},p.prototype.bossSelectHandler=function(){this.selectBossModel(),this.showRewardUI(),this.setBtn(),this.followsUpdateHandler()},p.prototype.updateMsgArrUI=function(){this.showRewardUI(),this.setBtn(),this.followsUpdateHandler()},p.prototype.autoCheckBoxHandler=function(){if(1==d.zhizun.ZhizunModel.instance.state){this.autoCheckBox.selected=!this.autoCheckBox.selected;var t=[[36,[this.autoCheckBox.selected?1:0]]];a.instance.setCustomizeData(t)}else T.alert("温馨提示","您未激活至尊特权，不可自动挑战，是否前往激活？",[Handler.create(this,this.okBtnHandel),"确定"],[null,"取消"],null,!0)},p.prototype.okBtnHandel=function(){WindowManager.instance.open(351)},p.prototype.checkBoxState=function(){var t=i.instance.getCustomDataByKey(36),e=1==(t?t[0]:0);1==d.zhizun.ZhizunModel.instance.state?this.autoCheckBox.selected=e:this.autoCheckBox.selected=!1},p.prototype.addBtnHandler=function(){WindowManager.instance.open(59,96)},p.prototype.gsUISet=function(){var t=b.TrahmanBossModel.instance.maxNUm,e=b.TrahmanBossModel.instance.nowNum;this.text1.color=e<=0?"#ff3e3e":"#168a17",this.text1.text=" "+e+"/"+t+" ";var i=new Array;if(i.push([this.autoCheckBox,2,0]),i.push([this.msc1,1,0]),i.push([this.msc2,1,0]),i.push([this.autoTipsBtn,2,0]),i.push([this.text4,1,0]),i.push([this.text1,1,0]),i.push([this.addBtn,2,0]),T.adaptationImgAndText(i,this.width,0,"center"),this._plusBtnClip.pos(this.addBtn.x-10,this.addBtn.y-10),m.thisStop(this._plusBtnClip),e<t){var n=d.vip.VipModel.instance.vipLevel,s=d.vip.VipModel.instance.getPrivilegeInfoById(96);if(!s)return;var o=0;s&&(o=s[1]);var a=d.config.PrivilegeCfg.instance.getVipInfoByLevel(n,96),r=a?a[1]:0,l=0,h=d.trahman_boss.TrahmanBossModel.instance.nowNum,p=d.trahman_boss.TrahmanBossModel.instance.maxNUm;if(a&&0<=h){var c=d.config.PrivilegeCfg.instance.getCostByLevel(n,96)[1],u=this.getConsume(c,h);if(!u)return;l=u[1]}o<r&&0!=r&&PlayerModel.instance.ingot>=l&&h<p&&m.thisPlay(this._plusBtnClip)}},p.prototype.getConsume=function(t,e){return t[e]||this.getConsume(t,--e)},p.prototype.setBtn=function(){if(m.thisStop(this._btnClip),Laya.timer.clear(this,this.loopHandler),this.html6.visible=this.goBtn.visible=this.text3.visible=this.followBtn.visible=!1,!b.TrahmanBossModel.instance.isOpenTraHmanBoss())return this.html6.innerHTML="<span style= 'color:#1F304D'>BOSS挑战时间:</span><span style= 'color:#168A17'>"+b.TrahmanBossModel.instance.timeStarr+"</span>",void(this.html6.visible=!0);var t=this._list.selectedData;if(t){var e=t[3],i=b.TrahmanBossModel.instance.isOpenBoss(e);if(2===i){var n=C.instance.getCfgById(e)[2];this.html6.innerHTML=" 转生达到"+n+"转后开启",this.html6.visible=!0}else if(b.TrahmanBossModel.instance.readyTick>GlobalData.serverTime)Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler();else if(this.goBtn.visible=this.text3.visible=this.followBtn.visible=!0,b.TrahmanBossModel.instance.isHaveNum()&&1===i){var s=d.bossHome.BossHomeModel.instance.getBossSeversInfoById(e);s&&!s[2][0]&&m.thisPlay(this._btnClip)}}},p.prototype.loopHandler=function(){b.TrahmanBossModel.instance.readyTick<GlobalData.serverTime?(Laya.timer.clear(this,this.loopHandler),this.setBtn()):(this.html6.visible=!0,this.html6.innerHTML="还需等待"+Math.ceil(.001*(b.TrahmanBossModel.instance.readyTick-GlobalData.serverTime))+"秒才可进入")},p.prototype.showRewardUI=function(){var t=this._list.selectedData;if(t){var e=t[6],i=t[4],n=t[3];if(this.powerNum.value=""+e,b.TrahmanBossModel.instance.isLi(n)){for(s=0;s<this._showHtml.length;s++)(g=this._showHtml[s]).visible=!1;this.img2.visible=this.text2.visible=!1}else{this.img2.visible=this.text2.visible=!0;for(var s=0;s<this._showHtml.length;s++)(g=this._showHtml[s])&&(g.visible=!1);for(var o=C.instance.getCfgById(n)[1],a=0,s=0;s<o.length;s+=2){var r=o[s],l=o[s+1];if(g=this._showHtml[a]){var h=T.getBrahmaName(r),p=PlayerModel.instance.playerTotolTable[r];p=p||0,g.color=l<=p?"#50ff28":"#FF3E3E",g.innerHTML=h+":"+p+"/"+l,g.visible=!0}a++}var c=0,u=this._posY,d=0;for(s=this._showHtml.length-1;0<=s;s--)(_=this._showHtml[s])&&_.visible&&(_.y=u,c++,u-=31,_.contextWidth>d&&(d=_.contextWidth));u+=31,u-=this.text2.height+11,this.text2.y=u;var m=20*c+11*(c-1)+11+this.text2.height;this.img2.height=m+22,this.img2.width=d+14,this.img2.width=this.img2.width<200?200:this.img2.width,this.img2.y=u-11}var y=T.formatItemData(i),f=0;for(s=0;s<this._showItems.length;s++){var g,_=this._showItems[s];(g=y[s])?(_.visible=!0,_.dataSource=g,_.nameVisible=!1,f++):_.visible=!1}var v=(this.itemBox.width-(90*f+10*(f-1)))/2;for(s=0;s<this._showItems.length;s++)(_=this._showItems[s]).visible&&(_.x=v),v+=100}},p.prototype.selectBossModel=function(){var t=this._list.selectedData;if(t){var e=t[3];DungeonModel.instance.getBossInfoById(e),this._showBossId=e;var i=d.config.MonsterResCfg.instance.getMonsterRes(e),n=o.instance.getCfgById(i);this._modelClip.reset(i),this._modelClip.avatarScale=n[10]?n[10]:1,this._modelClip.avatarRotationX=n[6]?n[6]:0,this._modelClip.avatarRotationY=n[7]?n[7]:180,this._modelClip.avatarY=n[9]?n[9]:0,this._modelClip.avatarX=n[8]?n[8]:0,this.observationItem.data=[[this._modelClip,0]]}},p.prototype.followHandler=function(){var t=this._list.selectedData;if(t){var e=t[3];3!==b.TrahmanBossModel.instance.isOpenBoss(e)?this.followBoss(!this.followBtn.selected,!0):r.instance.addNotice("梵天之力不满足挑战需求，不可关注",!0)}},p.prototype.followBoss=function(t,e){void 0===e&&(e=!1),(this.followBtn.selected=t)!==b.TrahmanBossModel.instance.checkIsFollowBoss(this._showBossId)&&(console.log("boss"+this._showBossId+"关注："+this.followBtn.selected),d.dungeon.DungeonCtrl.instance.setFollowBoss(this._showBossId,this.followBtn.selected))},p.prototype.updatePlatChangeRecharge=function(){this.autoCheckBox.visible=this.msc1.visible=this.msc2.visible=!PlatParams.isCloseRecharge},p.prototype.goBtnHanlder=function(){if(T.whetherInCopy())T.notChangeTips();else{var t=this._list.selectedData;if(t){var e=t[3],i=d.dungeon.DungeonModel.instance.getBossInfoById(e);if(i&&i[2][0])return void r.instance.addNotice("BOSS已被击败，等待复活继续挑战",!0);if(b.TrahmanBossModel.instance.isHaveNum())if(3!==b.TrahmanBossModel.instance.isOpenBoss(e)){var n=t[0],s=t[1];d.dungeon.DungeonCtrl.instance.reqEnterScene(n,s)}else r.instance.addNotice("挑战所需梵天之力不足,无法进入",!0);else r.instance.addNotice("归属次数已用尽，无法挑战",!0)}}},p.prototype.followsUpdateHandler=function(){this.followBtn.selected=b.TrahmanBossModel.instance.checkIsFollowBoss(this._showBossId)},p.prototype.tipsBtnHandler=function(){T.alertHelp(19069)},p.prototype.autoTipsBtnHandler=function(){T.alertHelp(19070)},p.prototype.scrtBoss=function(t,e){return t[5]-e[5]},p.prototype.close=function(){s.prototype.close.call(this),m.thisStop(this._btnClip),Laya.timer.clear(this,this.loopHandler),this._openOcc=0},p.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this._btnClip=this.destroyElement(this._btnClip),this._modelClip=this.destroyElement(this._modelClip),this._plusBtnClip=this.destroyElement(this._plusBtnClip),this.observationItem=this.destroyElement(this.observationItem),s.prototype.destroy.call(this,t)},h=p,b.TrahmanBossPanel=h}(modules=modules||{}),function(l){var t,a,e,i,n,s;function o(){return null!==a&&a.apply(this,arguments)||this}t=l.trahman_boss||(l.trahman_boss={}),e=l.bag.BagItem,i=l.config.BlendCfg,n=l.common.CustomList,a=ui.TrahmanBossWinAlertUI,__extends(o,a),o.prototype.initialize=function(){a.prototype.initialize.call(this),this.closeOnSide=!1,this._list=new n,this._list.width=460,this._list.height=255,this._list.hCount=4,this._list.spaceX=15,this._list.itemRender=e,this._list.x=130,this._list.y=724,this.addChild(this._list),this._list.shiftingX=15,this._list.shiftingY=5},o.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},o.prototype.offEvt=function(){a.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},o.prototype.onOpened=function(){a.prototype.onOpened.call(this),this._duration=i.instance.getCfgById(10303)[1][0],this.loopHandler()},o.prototype.close=function(){a.prototype.close.call(this),l.dungeon.DungeonCtrl.instance.reqEnterScene(0)},o.prototype.setOpenParam=function(t){if(a.prototype.setOpenParam.call(this,t),t){var e=t[1];console.log("梵天boss 结算胜利。。。。。"+e),e.sort(this.sortFun.bind(this)),this._list.datas=e;var i=t[3],n=t[5],s=t[6],o=t[4];this.headIcon.setInfo(n,i,s),this.nameTxt.text=o,this.nameTxt.color=o==l.player.PlayerModel.instance.roleName?"#50ff28":"#ffffff",l.common.CommonUtil.centerChainArr(this.width,[this.tipTxt,this.nameTxt])}},o.prototype.sortFun=function(t,e){var i=t[0],n=e[0],s=l.brahma_equip.BrahmaEquipUtlis.isBrahmaEquip(i),o=l.brahma_equip.BrahmaEquipUtlis.isBrahmaEquip(n);if(s&&o)return this.brahmaSort(t,e);if(s&&!o)return 1;if(!s&&o)return-1;var a=CommonUtil.getItemQualityById(i);return CommonUtil.getItemQualityById(n)-a},o.prototype.brahmaSort=function(t,e){var i=t[0],n=e[0],s=l.brahma_equip.BrahmaEquipUtlis.getGradeById(i),o=l.brahma_equip.BrahmaEquipUtlis.getGradeById(n);if(s!=o)return o-s;var a=l.brahma_equip.BrahmaEquipUtlis.getPartById(i),r=l.brahma_equip.BrahmaEquipUtlis.getPartById(n);return a===r?t[3][6]===e[3][6]?n-i:e[3][6]-t[3][6]:a-r},o.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),a.prototype.destroy.call(this)},s=o,t.TrahmanBossWinPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.brahma_buy||(t.brahma_buy={}),n=t.common_alert_ex.DirectBuyBaseAlert,i=n,__extends(o,i),Object.defineProperty(o.prototype,"awards",{get:function(){return t.config.BlendCfg.instance.getCfgById(97924)[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endTm",{get:function(){return e.BrahmaBuyModel.instance.endTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"payGrade",{get:function(){return e.BrahmaBuyModel.instance.payGrade},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"redBagId",{get:function(){return 1043},enumerable:!0,configurable:!0}),o.prototype.updateModelView=function(){this.v.showIcon.y=318,this._iconTween||(this._iconTween=TweenJS.create(this.v.showIcon).to({y:this.v.showIcon.y-20},1e3).yoyo(!0).repeat(99999999),this._iconTween.start())},Object.defineProperty(o.prototype,"buyState",{get:function(){return e.BrahmaBuyModel.instance.buyState},enumerable:!0,configurable:!0}),o.prototype.draBuyAward=function(){e.BrahmaBuyCtrl.instance.drawFantianBuyAward()},o.prototype.updataViewEx=function(){this.v.fight.value=t.config.BlendCfg.instance.getCfgById(97926)[1][0].toString()},s=o,e.BrahmaBuyAlert=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("fantian_acc_pay")},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfg},enumerable:!0,configurable:!0}),i=n,e.FantianAccPayCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.brahma_pay||(t.brahma_pay={}),n=t.config.FantianAccPayCfg,s=t.common_alert_ex.AccPayBasePanel,i=s,__extends(a,i),Object.defineProperty(a.prototype,"itemDatas",{get:function(){return e.BrahmaPayItem},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"restTm",{get:function(){return e.BrahmaPayModel.instance.restTm},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sortcfgs",{get:function(){return n.instance.cfgs.sort(e.BrahmaPayModel.instance.sort.bind(e.BrahmaPayModel.instance))},enumerable:!0,configurable:!0}),o=a,e.BrahmaPayPanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.sky_book_buy||(t.sky_book_buy={}),n=t.common_alert_ex.DirectBuyBaseAlert,i=n,__extends(o,i),Object.defineProperty(o.prototype,"awards",{get:function(){return t.config.BlendCfg.instance.getCfgById(98103)[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endTm",{get:function(){return e.SkyBookBuyModel.instance.endTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"payGrade",{get:function(){return e.SkyBookBuyModel.instance.payGrade},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"redBagId",{get:function(){return 1043},enumerable:!0,configurable:!0}),o.prototype.updateModelView=function(){this.v.showIcon.skin="assets/icon/ui/tianshu/icon_4.png",this.v.showIcon.y=415,this._iconTween||(this._iconTween=TweenJS.create(this.v.showIcon).to({y:this.v.showIcon.y-20},1e3).yoyo(!0).repeat(99999999),this._iconTween.start())},Object.defineProperty(o.prototype,"buyState",{get:function(){return e.SkyBookBuyModel.instance.buyState},enumerable:!0,configurable:!0}),o.prototype.draBuyAward=function(){e.SkyBookBuyCtrl.instance.drawZhanhunTianshuBuyAward()},s=o,e.SkyBookBuyAlert=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("tianshu_acc_pay")},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfg},enumerable:!0,configurable:!0}),i=n,e.TianshuAccPayCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.sky_book_pay||(t.sky_book_pay={}),n=t.config.TianshuAccPayCfg,s=t.common_alert_ex.AccPayBasePanel,i=s,__extends(a,i),Object.defineProperty(a.prototype,"itemDatas",{get:function(){return e.SkyBookPayItem},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"restTm",{get:function(){return e.SkyBookPayModel.instance.restTm},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sortcfgs",{get:function(){return n.instance.cfgs.sort(e.SkyBookPayModel.instance.sort.bind(n.instance))},enumerable:!0,configurable:!0}),o=a,e.SkyBookPayPanel=o}(modules=modules||{}),function(i){var h,n,s,p,c,t,u,o,e;function a(){return n.call(this)||this}h=i.seal_deity||(i.seal_deity={}),s=i.common.AvatarClip,p=i.config.BlendCfg,c=i.config.RechargeCfg,t=i.common.CustomClip,u=i.config.ExteriorCfg,o=i.bag.BaseItem,n=ui.SealDeityViewUI,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),this.titleTxt.text="一战封神",this._viewType=0,this._modelClip=s.create(1024,1024,1024),this.addChildAt(this._modelClip,7),this._modelClip.anchorX=this._modelClip.anchorY=.5,this._modelClip.pos(360,680,!0),this._petModelClip=s.create(1024,1024,1024,"show"),this.addChildAt(this._petModelClip,7),this._petModelClip.anchorX=this._petModelClip.anchorY=.5,this._petModelClip.pos(360,680,!0),this._rechargeIds=[131,132,133],this._item=new o,this.createEffect(),this.discountTxt.text=c.instance.getRecharCfgByIndex(50)[3],this.discountTxt.text||(this.discountTxt.visible=this.redImg.visible=!1);var t=i.redBag.RedBagUtils.getActionopen();if(this.msc1.visible=this.msc2.visible=!t,this.goldTxtBox.visible=t,this.goldTxtBox.visible){var e=i.redBag.RedBagUtils.getIdAndCondByMoney(1044,50);this.goldTxt.text=e+"元宝",this.goldTxt.x=this.goldTxt1.x+this.goldTxt1.textWidth,this.goldTxt2.x=this.goldTxt.x+this.goldTxt.textWidth}},a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.leftBtn,this,this.changeView,[-1]),this.onAutoClick(this.rightBtn,this,this.changeView,[1]),this.onAutoClick(this.fhTopBtn,this,this.chooseView,[0]),this.onAutoClick(this.sqTopBtn,this,this.chooseView,[1]),this.onAutoClick(this.msTopBtn,this,this.chooseView,[2]),this.onAutoGlobalEvt("GET_SEAL_DEITY_INFO",this,this.updateInfo),this.onAutoGlobalEvt("DRAW_SEAL_DEITY_BUY",this,this.updateView),this.onAutoClick(this.previewBtn,this,this.previewHandler),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyHandler),this.onAutoClick(this.buyBtn,this,this.buyHandler),this.regAutoRP(this.jtfhRP,["sealDeityRp1"]),this.regAutoRP(this.scsqRP,["sealDeityRp2"]),this.regAutoRP(this.lhmsRP,["sealDeityRp3"])},a.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.initView(),this.updateInfo()},a.prototype.close=function(){n.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),this._petModelClipTween&&(this._petModelClipTween.stop(),this._petModelClipTween=null),this._modelClip=this.destroyElement(this._modelClip),this._petModelClip=this.destroyElement(this._petModelClip),this.observationItem=this.destroyElement(this.observationItem),this._btnClip=this.destroyElement(this._btnClip),this._oneKeyClip=this.destroyElement(this._oneKeyClip),this._rechargeIds.length=0,this._item=null,n.prototype.destroy.call(this,t)},a.prototype.updateInfo=function(){var t=h.SealDeityModel.instance.info;if(t){this._endTime=t[2],this._endTime>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(this.timerTxt.visible=!1,this.tipHtml.visible=!1,this.overTxt.visible=!0);for(var e=0,i=0;i<this._rechargeIds.length;i++){var n=this._rechargeIds[i];0===h.SealDeityModel.instance.getStateByRechargeId(n)&&(e+=c.instance.getRecharCfgByIndex(n)[2])}var s=c.instance.getRecharCfgByIndex(50)[2];this.oneKeyBtn.label=s+"元",e<s?(this.oneKeyBtn.disabled=!0,this._oneKeyClip.visible=!1,this._oneKeyClip.stop()):(this.oneKeyBtn.disabled=!1,this._oneKeyClip.visible=!0,this._oneKeyClip.play()),this.chooseView(this._viewType)}},a.prototype.loopHandler=function(){this._endTime>GlobalData.serverTime?this.timerTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(this._endTime):(this.timerTxt.text="00:00:00",Laya.timer.clear(this,this.loopHandler))},a.prototype.updateView=function(){this.initView(),this.chooseView(this._viewType)},a.prototype.buyHandler=function(){var t=this._rechargeIds[this._viewType],e=h.SealDeityModel.instance.getStateByRechargeId(t);1===e?h.SealDeityCtrl.instance.drawSealDeity(t):0===e&&h.SealDeityCtrl.instance.buy(t)},a.prototype.initView=function(){for(var t=!0,e=0,i=this._rechargeIds.length;e<i;e++){var n=h.SealDeityModel.instance.getStateByRechargeId(this._rechargeIds[e]);if(1===n){this._viewType=e;break}t&&0===n&&(t=!1,this._viewType=e)}},a.prototype.changeView=function(t){this._viewType+=t,this._viewType<0?this._viewType=2:2<this._viewType&&(this._viewType=0),this.chooseView(this._viewType)},a.prototype.chooseView=function(t){this._viewType=t;var e=p.instance.getCfgById(98211)[1],i=e[2*this._viewType],n=1===e[2*this._viewType+1],s=u.instance.getCfgById(i);2!=this._viewType&&(this._modelClip.reset(i),this._modelClip.avatarRotationX=s[6],this._modelClip.avatarRotationY=s[7],this._modelClip.avatarScale=s[10]?s[10]:1,this._modelClip.avatarY=s[9],this._modelClip.avatarX=s[8],this.observationItem.data=[[this._modelClip,Math.round(i/1e3)]]),2==this._viewType&&(this._petModelClip.reset(i,0,0,0,0,0,"show"),this._petModelClip.avatarRotationX=s[6],this._petModelClip.avatarRotationY=s[7],this._petModelClip.avatarScale=s[10]?s[10]:1,this._petModelClip.avatarY=s[9],this._petModelClip.avatarX=s[8],this.observationItem.data=[[this._petModelClip,Math.round(i/1e3)]]),0===this._viewType?(this.titleImg.skin="motongjiangshi/txt_yzfs_jbsz.png",this.tagImg.skin="motongjiangshi/txt_yzfs_fsyy.png",this.selectedImg.pos(80,118,!0),this._modelClip.avatarScale=1.7,this._modelClip.x=360,this._modelClip.y=654,this._petModelClip.visible=!1,this._modelClip.visible=!0,this.createPreview(98201)):1===this._viewType?(this.titleImg.skin="motongjiangshi/txt_yzfs_jblc.png",this.tagImg.skin="motongjiangshi/txt_yzfs_sbx.png",this.selectedImg.pos(270,118,!0),this._modelClip.avatarScale=2,this._modelClip.x=350,this._modelClip.y=654,this._petModelClip.visible=!1,this._modelClip.visible=!0,this.createPreview(98202)):2===this._viewType&&(this.titleImg.skin="motongjiangshi/txt_yzfs_jbtz.png",this.tagImg.skin="motongjiangshi/txt_yzfs_jwyd.png",this.selectedImg.pos(460,118,!0),this._petModelClip.avatarScale=4.5,this._petModelClip.x=360,this._petModelClip.y=600,this._petModelClip.visible=!0,this._modelClip.visible=!1,this.createPreview(98203)),this.addModelAnimate(n),this.addPetModelAnimate(n),this.fightClip.value=p.instance.getCfgById(98212)[1][this._viewType].toString();var o=this._rechargeIds[this._viewType],a=c.instance.getRecharCfgByIndex(o);this.tipsTxt.text="现在抢购即可获得"+a[6][0][1];var r=h.SealDeityModel.instance.getStateByRechargeId(o);if(0===r){var l=a[2];this.buyBtn.visible=!0,this.buyBtn.label=l+"元",this._btnClip.visible=!1,this._btnClip.stop(),this.receiveImg.visible=!1}else 1===r?(this.buyBtn.visible=!0,this.buyBtn.label="领取",this._btnClip.visible=!0,this._btnClip.play(),this.receiveImg.visible=!1):2===r&&(this.receiveImg.visible=!0,this.buyBtn.visible=!1,this._btnClip.visible=!1,this._btnClip.stop());this._endTime<=GlobalData.serverTime&&(this.buyBtn.visible=!1,this.discountTxt.visible=!1,this.redImg.visible=!1,this.oneKeyBtn.visible=!1,this._oneKeyClip.visible=!1,this.overImg.visible=!0,this.receiveImg.visible=!0,this.receiveImg.skin="common/txt_commmon_yjies.png")},a.prototype.addModelAnimate=function(t){this._modelClip.y=654,this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),t&&(this._modelClipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-20},1e3).start().yoyo(!0).repeat(99999999))},a.prototype.addPetModelAnimate=function(t){this._petModelClip.y=654,this._petModelClipTween&&(this._petModelClipTween.stop(),this._petModelClipTween=null),t&&(this._petModelClipTween=TweenJS.create(this._petModelClip).to({y:this._petModelClip.y-20},1e3).start().yoyo(!0).repeat(99999999))},a.prototype.createEffect=function(){this._btnClip=t.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.buyBtn.x-5,this.buyBtn.y-10),this._oneKeyClip=t.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._oneKeyClip),this._oneKeyClip.pos(this.oneKeyBtn.x-5,this.oneKeyBtn.y-10)},a.prototype.oneKeyHandler=function(){h.SealDeityCtrl.instance.buy(130)},a.prototype.createPreview=function(t){var e=p.instance.getCfgById(t)[1][0];this._item.pos(478,380),this.addChild(this._item),this._item.dataSource=[e,1,0,null],this._item._qualityBg.skin="motongjiangshi/image_sc_h.png",this._item.scale(.8,.8)},a.prototype.previewHandler=function(){var t=p.instance.getCfgById(98211)[1];WindowManager.instance.open(1483,[t[2],[t[0],0,0,0,0,t[4]]])},e=a,h.SealDeityPanel=e}(modules=modules||{}),function(t){var e,i,n,l,s;function o(){var t=i.call(this)||this;return t._modelClip=n.create(1024,1024,1024),t.addChild(t._modelClip),t._modelClip.anchorX=.5,t._modelClip.anchorY=.5,t._modelClip.pos(280,270,!0),t._petModelClip=n.create(1024,1024,1024),t.addChild(t._petModelClip),t._petModelClip.anchorX=.5,t._petModelClip.anchorY=.5,t._petModelClip.pos(100,700,!0),t}e=t.seal_deity||(t.seal_deity={}),n=t.common.AvatarClip,l=t.config.ExteriorCfg,i=ui.PropRoleAlertUI,__extends(o,i),o.prototype.setOpenParam=function(t){this.createModel(this._petModelClip,t[0],0,0,0,0,0),this._petModelClip.avatarScale=1.8;var e=t[1];this.createModel(this._modelClip,e[0],e[1],e[2],e[3],e[4],e[5]),this._modelClip.avatarScale=2.5,this.observationItem.data=[[this._modelClip,0],[this._petModelClip,t[0]]]},o.prototype.createModel=function(t,e,i,n,s,o,a){var r=l.instance.getCfgById(e);t.reset(e,i,n,s,o,a),t.avatarRotationX=r[6],t.avatarRotationY=r[7]+35,t.avatarY=-160,t.avatarX=4},o.prototype.destroy=function(){this._modelClip=this.destroyElement(this._modelClip),this._petModelClip=this.destroyElement(this._petModelClip),this.observationItem=this.destroyElement(this.observationItem),i.prototype.destroy.call(this)},s=o,e.SealRoleAlert=s}(modules=modules||{}),function(l){var h,e,t,i,a,n,s;function o(){return e.call(this)||this}h=l.welfare_place||(l.welfare_place={}),t=l.common.CustomList,i=l.bag.BagModel,a=l.common.CommonUtil,n=l.common.CustomClip,e=ui.WelfarePlacePawnShouYiAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new t,this._list.width=532,this._list.height=283,this._list.hCount=5,this._list.spaceX=8,this._list.itemRender=l.sheng_yu.ShenYuRewradItem1,this._list.x=0,this._list.y=0,this.jinRShouYiBox.addChild(this._list),this._listBoss=new t,this._listBoss.width=532,this._listBoss.height=283,this._listBoss.scrollDir=2,this._listBoss.vCount=1,this._listBoss.spaceX=8,this._listBoss.itemRender=l.sheng_yu.ShenYuRewradItem,this._listBoss.x=0,this._listBoss.y=0,this.BossListBox.addChild(this._listBoss),this.initializeClip()},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showReward(),this.updateBag()},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._list.datas=t,this.noGoodsTxt.visible=!(t&&0<t.length)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("SHENG_YU_BOSS_SCENE_UPDATE",this,this.showReward),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag)},o.prototype.btnHandler=function(){l.sheng_yu.ShenYuBossCtrl.instance.getState()?l.sheng_yu.ShenYuBossCtrl.instance.PickTempReward():l.notice.SystemNoticeManager.instance.addNotice("暂无奖励可领",!0)},o.prototype.showReward=function(){for(var t=l.config.BlendCfg.instance.getCfgById(97707)[2],e=(t[h.WelfarePlaceModel.instance.bossInfo?h.WelfarePlaceModel.instance.bossInfo[4]-1:0]||t[0]).replace("[","").replace("]","").split("#"),i=[],n=0,s=e.length;n<s;n++)i.push(parseInt(e[n]));for(var o=[],a=0,r=i.length;a<r;a+=2)o.push([i[a],i[a+1],0,null]);this._listBoss.datas=o},o.prototype.updateBag=function(t){void 0===t&&(t=7),7==t&&(this._showIds=this.genGrids(),this._showIds?(this._list.datas=this._showIds,0<this._showIds.length?(this._tenBtnBtnClip&&(this._tenBtnBtnClip.visible=!0,this._tenBtnBtnClip.play()),this.btn.gray=!1,this.btn.mouseEnabled=!0):(this._tenBtnBtnClip&&(this._tenBtnBtnClip.visible=!1,this._tenBtnBtnClip.stop()),this.btn.gray=!0,this.btn.mouseEnabled=!1)):(this._tenBtnBtnClip&&(this._tenBtnBtnClip.visible=!1,this._tenBtnBtnClip.stop()),this.btn.gray=!0,this.btn.mouseEnabled=!1),this.noGoodsTxt.visible=!1,(!this._showIds||this._showIds.length<=0)&&(this.noGoodsTxt.visible=!0))},o.prototype.genGrids=function(){var t=i.instance.getItemsByBagId(7);return t?t=t.sort(this.sortFunc.bind(this)):[]},o.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.getItemQualityById(i),o=a.getItemQualityById(n);return s!==o?o-s:n-i},o.prototype.initializeClip=function(){this._tenBtnBtnClip=new n,this.addChild(this._tenBtnBtnClip),this._tenBtnBtnClip.skin="assets/effect/btn_light.atlas";for(var t=[],e=0;e<16;e++)t[e]="btn_light/"+e+".png";this._tenBtnBtnClip.frameUrls=t,this._tenBtnBtnClip.scale(1,1,!0),this._tenBtnBtnClip.pos(this.btn.x-6,this.btn.y-8,!0)},o.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),this._listBoss&&(this._listBoss.removeSelf(),this._listBoss.destroy(),this._listBoss=null),this._tenBtnBtnClip&&(this._tenBtnBtnClip.removeSelf(),this._tenBtnBtnClip.destroy(),this._tenBtnBtnClip=null),e.prototype.destroy.call(this)},s=o,h.WelfarePlacePawnShouYiAlert=s}(modules=modules||{}),function(a){var r,e,t,l,i;function n(){return e.call(this)||this}r=a.brahma_equip||(a.brahma_equip={}),t=a.common.BtnGroup,l=a.notice.SystemNoticeManager,e=ui.BrahmaEquipViewUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._tab=new t,this._tab.setBtns(this.btn1,this.btn2,this.btn3,this.btn4),this._tab.selectedIndex=0,this._btnClip=CustomClip.create("assets/effect/btn_light.atlas","btn_light",7),this._btnClip.pos(this.btn.x-5,this.btn.y-10,!0),this.addChildAt(this._btnClip,7),CustomClip.thisStop(this._btnClip),this.equipItems=[this.part_1,this.part_2,this.part_3,this.part_4,this.part_5,this.part_6,this.part_7,this.part_8,this.part_9,this.part_10,this.part_11,this.part_12]},n.prototype.destroy=function(t){void 0===t&&(t=!0),this.equipItems=this.destroyElement(this.equipItems),this._tab=this.destroyElement(this._tab),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.regAutoRP(this.rp1,["brahmaRP1"]),this.regAutoRP(this.rp2,["brahmaRP2","brahmaResolveRP"]),this.regAutoRP(this.rp3,["brahmaRP3"]),this.regAutoRP(this.rp4,["brahmaRP4"]),this.onAutoEvt(this._tab,"change",this,this.tabChangeHandler),this.onAutoClick(this.btn,this,this.btnHanlder),this.onAutoClick(this.skillBtn3,this,this.skillBtnHandler),this.onAutoClick(this.skillBtn1,this,this.skillBtnParmHandler,[1]),this.onAutoClick(this.skillBtn2,this,this.skillBtnParmHandler,[2]),this.onAutoGlobalEvt("UPDATE_FANTIAN_EQUIP",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView)},n.prototype.skillBtnHandler=function(){for(var t="",e=0,i=r.BrahmaEquipUtlis.showAttrs.length;e<i;e++){for(var n=0,s=0,o=PlayerModel.instance.playerTotolAttrs.length;s<o;s++)if(r.BrahmaEquipUtlis.showAttrs[e]===PlayerModel.instance.playerTotolAttrs[s][0]){n=PlayerModel.instance.playerTotolAttrs[s][1];break}t+="<span style='color:"+CommonUtil.getBrahmaColor(r.BrahmaEquipUtlis.showAttrs[e])+"'>"+a.config.AttrItemCfg.instance.getCfgById(r.BrahmaEquipUtlis.showAttrs[e])[1]+"："+n+"</span><br/>"}WindowManager.instance.open(1596,t)},n.prototype.skillBtnParmHandler=function(t){WindowManager.instance.open(1480,t)},n.prototype.tabChangeHandler=function(){0!==this._tab.selectedIndex&&WindowManager.instance.open(r.BrahmaEquipUtlis.jumpIds[this._tab.selectedIndex])},n.prototype.btnHanlder=function(){if(this.flag){for(var t=[],e=1;e<=12;e++){var i=r.BrahmaEquipModel.instance.getFandTianFirstItemById(e);i&&t.push(i[2])}r.BrahmaEquipCtrl.instance.fantianWearEquipOnekey(t)}else{for(var n=-1,s=r.BrahmaEquipModel.instance.partItem,o=(e=0,s.length);e<o;e++)if(!s[e][1]){n=s[e][0];break}-1!=n&&a.bag.BagUtil.openLackPropAlert(r.BrahmaEquipModel.instance.showIDs[0]+n-1,1),l.instance.addNotice("没有可替换的装备",!0)}},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._tab.selectedIndex=0,this.flag=!1,this.updateView()},n.prototype.updateView=function(){this.fight.value=r.BrahmaEquipModel.instance.getBrahmaEquipFight().toString(),this.flag=!1;for(var t=0,e=r.BrahmaEquipModel.instance.partItem.length;t<e;t++)if(r.BrahmaEquipModel.instance.getSingleBrahmaEquipRp(r.BrahmaEquipModel.instance.partItem[t])){this.flag=!0;break}this.flag?CustomClip.thisPlay(this._btnClip):CustomClip.thisStop(this._btnClip);var i=r.BrahmaEquipModel.instance.partItem;for(t=0,e=this.equipItems.length;t<e;t++){var n=r.BrahmaEquipUtlis.getPartByStrong(i[t][0],r.BrahmaEquipModel.instance.partItem);this.equipItems[t].setData([i[t],n,0])}var s=r.BrahmaEquipModel.instance.fantianNeidan;this.btnTxt1.text=(s[0]||0).toString(),this.btnTxt2.text=(s[1]||0).toString(),this.btnRp1.visible=r.BrahmaEquipModel.instance.getNeiDanRP(1),this.btnRp2.visible=r.BrahmaEquipModel.instance.getNeiDanRP(2)},i=n,r.BrahmaEquipPanel=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("fantian_grade");this._cfgs={},this._srcItemIdCfgs={};for(var e=0,i=t.length;e<i;e++){var n=t[e][0][0],s=t[e][1][0];this._cfgs[n]||(this._cfgs[n]={}),this._cfgs[n][s]=t[e],this._srcItemIdCfgs[t[e][3]]=t[e]}for(var o in this.tClassArr=[],this._cfgs)this.tClassArr.push(parseInt(o))},n.prototype.getCfgByTclassAndSclass=function(t){var e=this._cfgs[t],i=[];for(var n in e)i.push(parseInt(n));return i},n.prototype.getCfgByTAndS=function(t,e){return this._cfgs[t]?this._cfgs[t][e]:null},n.prototype.getTclassName=function(t){var e=this._cfgs[t];for(var i in e)return e[i][0][1];return""},n.prototype.getCfgs=function(t){return this._cfgs[t]},n.prototype.getCfgBysrcItemId=function(t){return this._srcItemIdCfgs[t]},i=n,e.FantianGradeCfg=i}(modules=modules||{}),function(s){var t,e;function i(){this.init()}t=s.config||(s.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){for(var t in this._cfg=GlobalData.getConfig("item_fantian"),this._grade_stype_cfg={},this._cfg){var e=this._cfg[t][0],i=s.brahma_equip.BrahmaEquipUtlis.getGradeById(e);this._grade_stype_cfg[i]||(this._grade_stype_cfg[i]={});var n=s.brahma_equip.BrahmaEquipUtlis.getPartType(e);this._grade_stype_cfg[i][n]||(this._grade_stype_cfg[i][n]=[]),this._grade_stype_cfg[i][n].push(this._cfg[t])}},i.prototype.getItemByCfg=function(t){return this._cfg[t]},i.prototype.getCfgsByGradeStype=function(t,e){return this._grade_stype_cfg[t]?this._grade_stype_cfg[t][e]:null},i.prototype.getCfgByPart=function(t,e){for(var i in void 0===e&&(e=9),this._cfg){var n=this._cfg[i];if(s.brahma_equip.BrahmaEquipUtlis.getPartById(n[0])===t&&s.brahma_equip.BrahmaEquipUtlis.getGradeById(n[0])===e)return n[0]}return null},e=i,t.ItemFantianCfg=e}(modules=modules||{}),function(p){var _,e,t,v,i,d,c,m,y,n,s;function f(){return e.call(this)||this}_=p.brahma_equip||(p.brahma_equip={}),t=p.common.BtnGroup,v=p.config.FantianGradeCfg,i=p.common.CustomSlide,d=p.config.ItemFantianCfg,c=p.bag.BagUtil,m=p.bag.BagModel,y=p.common.CustomClip,n=p.redPoint.RedPointCtrl,e=ui.BrahmaEquipDaZaoViewUI,__extends(f,e),f.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._tab=new t,this._tab.setBtns(this.btn1,this.btn2,this.btn3,this.btn4),this._tab.selectedIndex=1,this._slide=new i(this.con,this.box),CommonUtil.setHTMLPro(this.tipsHtml,"#3a5385","SimHei",22),this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.oneKeyBtn.x-5,this.oneKeyBtn.y-10,!0),this._helpId=19078},f.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.regAutoRP(this.rp1,["brahmaRP1"]),this.regAutoRP(this.rp2,["brahmaRP2","brahmaResolveRP"]),this.regAutoRP(this.rp3,["brahmaRP3"]),this.regAutoRP(this.rp4,["brahmaRP4"]),this.onAutoEvt(this._tab,"change",this,this.tabChangeHandler),this.onAutoClick(this.oneKeyBtn,this,this.jieZiOneKeyHandler),this.onAutoGlobalEvt("FANTIAN_DAZAO_TCLASS_CLICK",this,this.tClassClick),this.onAutoGlobalEvt("FANTIAN_DAZAO_SCLASS_CLICK",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView),this.onAutoGlobalEvt("UPDATE_FANTIAN_EQUIP",this,this.updateView),this.onAutoGlobalEvt("FANTIAN_DAZAO_SCLASS_SUEECES",this,this.showOpen),this.onAutoGlobalEvt("FANTIAN_DAZAO_TCLASS_SHOU_CLICK",this,this.updataPanel)},f.prototype.showOpen=function(){if(n.instance.getRPProperty("brahmaRP3"))this.onOpened();else{if(null===this.jumpId)return;var t=v.instance.getCfgs(this.jumpId[0]);if(!t)return;var e=void 0;for(var i in t)if(t[i][3]===this.jumpId[1]){e=t[i];break}if(!e)return;_.BrahmaEquipDaZaoTclassItem.setSelectType(this.jumpId[0]),_.BrahmaEquipDaZaoSclassItem.setSelectType(e[1][0])}},f.prototype.tClassClick=function(){for(var t=_.BrahmaEquipDaZaoTclassItem.getSelectType(),e=v.instance.getCfgByTclassAndSclass(t),i=e[0],n=0,s=e.length;n<s;n++){var o=v.instance.getCfgByTAndS(t,e[n]);if(_.BrahmaEquipModel.instance.getSclassRP(o)){i=e[n];break}}this.updataPanel(),this.updateView(),_.BrahmaEquipDaZaoSclassItem.setSelectType(i)},f.prototype.tabChangeHandler=function(){2!==this._tab.selectedIndex&&WindowManager.instance.open(_.BrahmaEquipUtlis.jumpIds[this._tab.selectedIndex])},f.prototype.getRpIndex=function(){for(var t=v.instance.tClassArr,e=t[0],i=v.instance.getCfgByTclassAndSclass(e)[0],n=0,s=t.length;n<s;n++)for(var o=v.instance.getCfgByTclassAndSclass(t[n]),a=0,r=o.length;a<r;a++){var l=v.instance.getCfgByTAndS(t[n],o[a]);if(_.BrahmaEquipModel.instance.getSclassRP(l))return[e=t[n],i=o[a]]}var h=[],p=[],c=_.BrahmaEquipModel.instance.partItem;for(n=0,s=c.length;n<s;n++){var u=c[n][1];if(u){var d=u[0],m=_.BrahmaEquipUtlis.getPartExType(d);1===m?h.push(d):2===m&&p.push(d)}}var y,f=h.length,g=p.length;return 0<f&&(y=_.BrahmaEquipUtlis.partArrUtlis(h))?y:0<g?(y=_.BrahmaEquipUtlis.partArrUtlis(p))||[11,1]:0<f?[4,1]:[e,i]},f.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._tab.selectedIndex=2;var t=this.getRpIndex();_.BrahmaEquipDaZaoTclassItem.setSelectType(t[0]),_.BrahmaEquipDaZaoSclassItem.setSelectType(t[1]),this._slide.scroll(0),this.box.y=0,this.jumpId=null,this.updataPanel(),this.updateView()},f.prototype.jieZiOneKeyHandler=function(){var t=_.BrahmaEquipDaZaoTclassItem.getSelectType(),e=_.BrahmaEquipDaZaoSclassItem.getSelectType(),i=v.instance.getCfgByTAndS(t,e);if(i){this.nextItem.dataSource=[i[2],1,0,null];var n=_.BrahmaEquipModel.instance.partItem;if(n){for(var s=i[3],o=!1,a=0,r=n.length;a<r;a++){var l=n[a][1];if(l&&l[0]===s){o=!0;break}}if(o){var h=i[4];m.instance.getItemCountById(h[0][0])<h[0][1]?c.openLackPropAlert(h[0][0],1):m.instance.getItemCountById(h[1][0])<h[1][1]?c.openLackPropAlert(h[1][0],1):(this.jumpId=[t+1,i[2]],_.BrahmaEquipCtrl.instance.fantianEquipUpGrade(_.BrahmaEquipUtlis.getPartById(i[2])))}else p.bag.BagUtil.openLackPropAlert(s,1)}}},f.prototype.updateView=function(){var t=_.BrahmaEquipDaZaoTclassItem.getSelectType(),e=_.BrahmaEquipDaZaoSclassItem.getSelectType(),i=v.instance.getCfgByTAndS(t,e);if(i){this.nextItem.dataSource=[i[2],1,0,null];var n=d.instance.getItemByCfg(i[2]);this.nextTxt.text=n[1],this.nextTxt.color=CommonUtil.getColorByQuality(_.BrahmaEquipUtlis.getQualityById(i[2])),this.tipsHtml.innerHTML="必定获得<span style='color:#ff3e3e'>"+n[6]+"</span>",this.nowItem.dataSource=[i[3],1,0,null];var s=_.BrahmaEquipModel.instance.partItem;if(s){for(var o=i[3],a=0,r=0,l=s.length;r<l;r++){var h=s[r][1];if(h&&h[0]===o){a=1;break}}this.nowItem._numTxt.text=a+"/1",this.nowItem._numTxt.color=a?"#50ff28":"#ff3e3e",this.nowItem.fanTianEnterType=a?1481:1485,this.nowItemName.text=this.nowItem._nameTxt.text,this.nowItem._numTxt.visible=!0,this.nowItemName.color=CommonUtil.getColorByQuality(_.BrahmaEquipUtlis.getQualityById(i[3]));var p=i[4];this.item1.dataSource=[p[0][0],1,0,null];var c=m.instance.getItemCountById(p[0][0]);this.item1._numTxt.text=c+"/"+p[0][1],this.item1._numTxt.visible=!0,this.item1._numTxt.color=c<p[0][1]?"#ff3e3e":"#50ff28",this.item1Name.text=this.item1._nameTxt.text,this.item1Name.color=CommonUtil.getColorByQuality(_.BrahmaEquipUtlis.getQualityById(p[0][0])),this.item2.dataSource=[p[1][0],1,0,null];var u=m.instance.getItemCountById(p[1][0]);this.item2._numTxt.text=u+"/"+p[1][1],this.item2._numTxt.visible=!0,this.item2._numTxt.color=u<p[1][1]?"#ff3e3e":"#50ff28",this.item2Name.text=this.item2._nameTxt.text,this.btnFlag=_.BrahmaEquipModel.instance.getSclassRP(i),this.item2Name.color=CommonUtil.getColorByQuality(_.BrahmaEquipUtlis.getQualityById(p[1][0])),this.btnFlag?y.thisPlay(this._btnClip):y.thisStop(this._btnClip)}}},f.prototype.updataPanel=function(t){void 0===t&&(t=!0),f.isCloseList=t;var e=v.instance.tClassArr;this.box.removeChildren();for(var i=0,n=0,s=0,o=0,a=e.length;o<a;o++){var r=new _.BrahmaEquipDaZaoTclassItem;if(r.setData(e[o]),this.box.addChild(r),r.y=i,i+=r.height+0,_.BrahmaEquipDaZaoTclassItem.getSelectType()===e[o]){if(n=i-r.height,t)for(var l=v.instance.getCfgByTclassAndSclass(_.BrahmaEquipDaZaoTclassItem.getSelectType()),h=0,p=l.length;h<p;h++){var c=new _.BrahmaEquipDaZaoSclassItem;c.setData(l[h]),this.box.addChild(c),c.y=i,i+=c.height+2}s=i-n}}this._slide.initState(i,!1);var u=n+s-this.con.height;0<u?(this._slide.scroll(u),this.box.y=-u):(this._slide.scroll(0),this.box.y=0)},f.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._slide=this.destroyElement(this._slide),this._tab=this.destroyElement(this._tab),e.prototype.destroy.call(this,t)},s=f,_.BrahmaEquipDaZaoPanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("fantian_strong");this._cfgs={};for(var e=0,i=t.length;e<i;e++){var n=t[e][0];this._cfgs[n]||(this._cfgs[n]={}),this._cfgs[n][t[e][1]]=t[e]}},n.prototype.getCfgByPardAndLevel=function(t,e){return this._cfgs[t][e]},i=n,e.FantianStrongCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("fantian_strong_rise");this._cfgs={};for(var e=0,i=t.length;e<i;e++){var n=t[e][0];this._cfgs[n]||(this._cfgs[n]={}),this._cfgs[n][t[e][2]]=t[e]}},n.prototype.getCfgByTypeAndLevel=function(t,e){return this._cfgs[t][e]},i=n,e.FantianStrongRiseCfg=i}(modules=modules||{}),function(a){var d,n,t,s,o,r,l,h,e,p,m,i;function c(){return null!==n&&n.apply(this,arguments)||this}d=a.brahma_equip||(a.brahma_equip={}),t=ui.BrahmaEquipIntensiveViewUI,s=Laya.Image,o=a.bag.BaseItem,r=a.bag.BagModel,l=a.common.CustomClip,h=a.bag.BagUtil,e=a.common.BtnGroup,p=a.config.FantianStrongCfg,m=a.config.FantianStrongRiseCfg,n=t,__extends(c,n),c.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=this.centerY=0,this._recordLev={},this._upGradeEffect=[],this._equipPos=[49,153,49,274,49,396,49,522,49,643,49,765,569,153,569,274,569,396,569,522,569,643,569,765],this._partItems=[],this._intensiveStoneId=17030005,this._cenItem=new o,this._cenItem.valueDisplay=!1,this._cenItem.pos(312,398),this._cenItem.setNum("","#ffffff"),this._attrNameTxts=[this.pro_1,this.pro_2,this.pro_3,this.pro_4],this._attrTxts=[this.proNumTxt_1,this.proNumTxt_2,this.proNumTxt_3,this.proNumTxt_4],this._upAttrTxts=[this.upProNumTxt_1,this.upProNumTxt_2,this.upProNumTxt_3,this.upProNumTxt_4],this._arrowImgs=[this.arrImg_1,this.arrImg_2,this.arrImg_3,this.arrImg_4],this._baseImgs=[];for(var t=1;t<=12;t++)this._baseImgs.push(this["base"+t]);this.addChild(this._cenItem),this._btnClip=l.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this.noEquipBox,this.oneInstenBtn.x-5,this.oneInstenBtn.y-10),this._scheEffect1=l.create("assets/effect/wave.atlas","wave",8),this.conBox1.addChildAt(this._scheEffect1,0),this._scheEffect1.pos(-10,100,!0),this._scheEffect2=l.create("assets/effect/wave.atlas","wave",8),this.conBox2.addChildAt(this._scheEffect2,0),this._scheEffect2.pos(-10,100,!0),this.regGuideSpr(32,this.oneInstenBtn),this._tab=new e,this._tab.setBtns(this.btn1,this.btn2,this.btn3,this.btn4),this._tab.selectedIndex=2},c.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._tab.selectedIndex=1,l.thisPlay(this._scheEffect1),l.thisPlay(this._scheEffect2),this.equipInitedHandler(!0)},c.prototype.close=function(){n.prototype.close.call(this),l.thisStop(this._btnClip),l.thisStop(this._scheEffect1),l.thisStop(this._scheEffect2);for(var t=0,e=this._upGradeEffect.length;t<e;t++){var i=this._upGradeEffect[t];l.thisStop(i)}},c.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_UPDATE",this,this.update),this.onAutoGlobalEvt("INTENSIVE_UPDATE",this,this.update),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.equipInitedHandler,[!0]),this.onAutoGlobalEvt("UPGRADE_SUCCESS",this,this.update),this.onAutoGlobalEvt("PURCHASE_REPLY",this,this.update),this.onAutoGlobalEvt("INTENSIVE_SUCCESS",this,this.playUpEff),this.onAutoGlobalEvt("UPDATE_FANTIAN_RISE",this,this.update),this.onAutoGlobalEvt("UPDATE_FANTIAN_STRONF",this,this.update),this.onAutoClick(this.oneInstenBtn,this,this.oneKeyUpGrade),this.onAutoClick(this.instenBtn,this,this.upGrade),this.onAutoClick(this.DSFrameImg,this,this.popAlert,[9]),this.onAutoClick(this.SJFrameImg,this,this.popAlert,[10]),this.onAutoClick(this.gotoResolveBtn,this,this.gotoResolveHandler),this.regAutoRP(this.rp1,["brahmaRP1"]),this.regAutoRP(this.rp2,["brahmaRP2","brahmaResolveRP"]),this.regAutoRP(this.rp3,["brahmaRP3"]),this.regAutoRP(this.rp4,["brahmaRP4"]),this.onAutoEvt(this._tab,"change",this,this.tabChangeHandler)},c.prototype.tabChangeHandler=function(){1!==this._tab.selectedIndex&&WindowManager.instance.open(d.BrahmaEquipUtlis.jumpIds[this._tab.selectedIndex])},c.prototype.itemClickHandler=function(t){this._currEqiup=t,this._partItems[t-1],this._partItems[t-1].addChildAt(this._currFrame,1),this.update()},c.prototype.update=function(){if(d.BrahmaEquipModel.instance.partItem){for(var t=0;t<12;t++)this._baseImgs[t].visible=!this._partItems[t];if(0==this._partItems.length)return this.noEquipBox.visible=!1,this.atkValueMsz.value="0",this.noEquip.visible=!0,void(this._cenItem.dataSource=null);this.noEquipBox.visible=!0,this.noEquip.visible=!1,this.master(),this.atkValueMsz.value=d.BrahmaEquipModel.instance.getBrahmaEquipIntensiveFight().toString(),0<this._currEqiup&&(this.equipName.skin="assets/icon/ui/brahma_equip/txt_ftzb_"+this._currEqiup+".png");var e=r.instance.getItemCountById(this._intensiveStoneId);for(l.thisStop(this._btnClip),this.stoneImg.skin=CommonUtil.getIconById(this._intensiveStoneId),t=1;t<=12;t++){var i=this._partItems[t-1];if(i){var n=d.BrahmaEquipModel.instance.getPartByStrongLv(t);0<n&&i.setNum(n+"级","#ffffff"),this._recordLev[t]=n,i.rpImg.visible=!1;var s=p.instance.getCfgByPardAndLevel(t,d.BrahmaEquipModel.instance.getPartByStrongLv(t)+1);s&&(s[2]<=e?(i.rpImg.visible=!0,l.thisPlay(this._btnClip)):i.rpImg.visible=!1)}}this.resoveRP.visible=d.BrahmaEquipModel.instance.getResolveRP(1),this.setResource()}},c.prototype.searchOne=function(){if(0!=this._partItems.length){for(var t=-1,e=1;e<=12;e++)if(this._partItems[e-1]){-1===t&&(t=e);var i=p.instance.getCfgByPardAndLevel(e,d.BrahmaEquipModel.instance.getPartByStrongLv(e)+1);if(i){var n=i[2];if(r.instance.getItemCountById(this._intensiveStoneId)>=n)return void this.itemClickHandler(e)}}-1!==t&&this.itemClickHandler(t)}},c.prototype.setResource=function(){var t=r.instance.getItemCountById(this._intensiveStoneId);if(this._currEqiup||(this._currEqiup=1),this._partItems[this._currEqiup-1]){var e=this._partItems[this._currEqiup-1].itemData;e&&(this._cenItem.dataSource=e,this._cenItem.brahmaStageVisibe=!1,this._cenItem.fanTianEnterType=1481,this._cenItem.setNum(0==this._recordLev[this._currEqiup]?"":this._recordLev[this._currEqiup]+"级","#ffffff"));var i=p.instance.getCfgByPardAndLevel(this._currEqiup,d.BrahmaEquipModel.instance.getPartByStrongLv(this._currEqiup)),n=p.instance.getCfgByPardAndLevel(this._currEqiup,d.BrahmaEquipModel.instance.getPartByStrongLv(this._currEqiup)+1);if(a.common.AttrUtil.setAttrTxts(i,n,this._attrNameTxts,this._attrTxts,this._arrowImgs,this._upAttrTxts,4),n){var s=n[2];this.manjiText.visible=!1,this.oneInstenBtn.visible=this.instenBtn.visible=!0,this.stoneTxt.visible=this.stoneImg.visible=!0,this.stoneTxt.text=t+"/"+s,this.stoneTxt.color=s<=t?"#0ecf09":"#ff3e3e",CommonUtil.adaptationImgAndText([[this.stoneImg,2,0],[this.stoneTxt,1,0]],this.noEquipBox.width,0,"center");for(var o=0;o<4;o++)this._attrNameTxts[o].x=207,this._attrTxts[o].x=280}else for(l.thisStop(this._btnClip),this.manjiText.visible=!0,this.stoneTxt.visible=this.stoneImg.visible=!1,this.oneInstenBtn.visible=this.instenBtn.visible=!1,o=0;o<4;o++)this._attrNameTxts[o].x=280,this._attrTxts[o].x=360}},c.prototype.master=function(){var t=d.BrahmaEquipModel.instance.fantianEquipRise,e=t[0],i=m.instance.getCfgByTypeAndLevel(1,e),n=m.instance.getCfgByTypeAndLevel(1,e+1);if(n){for(var s=n[1],o=0,a=1;a<=12;a++)d.BrahmaEquipModel.instance.getPartByStrongLv(a)>=n[3]&&o++;s<=o?(this.proTxt_1.text=s+"/"+s,this._scheEffect1.y=-15,this.proDotImg_1.visible=!0):(this.proTxt_1.text=o+"/"+s,this._scheEffect1.y=100*(1-o/s),this.proDotImg_1.visible=!1)}else{var r=i[1];this.proTxt_1.text=r+"/"+r,this._scheEffect1.y=100*(1-r/r),this.proDotImg_1.visible=!1}this.conTxt1.text="梵天大师·"+e+"阶";var l=t[1],h=m.instance.getCfgByTypeAndLevel(2,l),p=m.instance.getCfgByTypeAndLevel(2,l+1);if(p){var c=p[1],u=0;for(a=1;a<=12;a++)d.BrahmaEquipModel.instance.getPartByStrongLv(a)>=p[3]&&u++;c<=u?(u=c,this.proTxt_2.text=u+"/"+c,this._scheEffect2.y=-15,this.proDotImg_2.visible=!0):(this.proTxt_2.text=u+"/"+c,this._scheEffect2.y=100*(1-u/c),this.proDotImg_2.visible=!1)}else r=h[1],this.proTxt_2.text=r+"/"+r,this._scheEffect2.y=100*(1-r/r),this.proDotImg_2.visible=!1;this.conTxt2.text="梵天神匠·"+l+"阶"},c.prototype.equipInitedHandler=function(t){var e=d.BrahmaEquipModel.instance.partItem;if(e&&0!=e.length){for(var i=0,n=e.length;i<n;i++)this.setEquip(e[i][0],e[i][1]);t&&this.searchOne(),this.update()}},c.prototype.setEquip=function(t,e){this._currFrame||(this._currFrame=new s("common/dt_tongyong_29.png"),this._currFrame.pos(-4,-4));var i=this._partItems[t-1];if(e){if(!i){(i=new o).needTip=!1,i.valueDisplay=!1,(this._partItems[t-1]=i).pos(this._equipPos[2*(t-1)],this._equipPos[2*(t-1)+1],!0);var n=l.create("assets/effect/activate.atlas","activate",4,!1);n.autoRemove=!0,(this._upGradeEffect[t]=n).pos(-75,-75,!0)}this.addChildAt(i,15),this.onAutoClick(i,this,this.itemClickHandler,[t]),i.dataSource=e,i.brahmaStageVisibe=!1,i.fanTianEnterType=1481}else i&&i.removeSelf()},c.prototype.destroy=function(){this._currFrame=this.destroyElement(this._currFrame),this._partItems=this.destroyElement(this._partItems),this._upGradeEffect=this.destroyElement(this._upGradeEffect),this._cenItem=this.destroyElement(this._cenItem),this._btnClip=this.destroyElement(this._btnClip),this._scheEffect1=this.destroyElement(this._scheEffect1),this._scheEffect2=this.destroyElement(this._scheEffect2),this._equipPos.length=0,this._equipPos=null,n.prototype.destroy.call(this)},c.prototype.upGrade=function(){this.judgeCanUpgrade(0)&&d.BrahmaEquipCtrl.instance.fantianEquipStrong(this._currEqiup)},c.prototype.oneKeyUpGrade=function(){this.judgeCanUpgrade(1)&&d.BrahmaEquipCtrl.instance.fantianEquipStrongOnekey()},c.prototype.popAlert=function(t){WindowManager.instance.openDialog(39,t)},c.prototype.playUpEff=function(t){if(0==t)this.playEff(this._currEqiup);else for(var e=0,i=t.length;e<i;e++)this.playEff(t[e])},c.prototype.playEff=function(t){var e=this._upGradeEffect[t];this._partItems[t-1]?(e.pos(-75,-75,!0),this._partItems[t-1].addChildAt(e,6)):(e.pos(this._equipPos[2*(t-1)],this._equipPos[2*(t-1)+1],!0),this.addChild(e)),l.thisPlay(e)},c.prototype.judgeCanUpgrade=function(t){if(0==t){var e=p.instance.getCfgByPardAndLevel(this._currEqiup,d.BrahmaEquipModel.instance.getPartByStrongLv(this._currEqiup)+1),i=r.instance.getItemCountById(this._intensiveStoneId);return!(0<(a=e[2]-i)&&(h.openLackPropAlert(this._intensiveStoneId,t?1:a),1))}for(var n=99999999999999,s=1;s<=12;s++){var o=this._recordLev[s];o<n&&(n=o)}var a;if((e=p.instance.getCfgByPardAndLevel(this._currEqiup,d.BrahmaEquipModel.instance.getPartByStrongLv(this._currEqiup)+1))&&(i=r.instance.getItemCountById(this._intensiveStoneId),0<(a=e[2]-i)))return h.openLackPropAlert(this._intensiveStoneId,t?1:a),!1;return!0},c.prototype.gotoResolveHandler=function(){WindowManager.instance.open(1479)},i=c,d.BrahmaEquipIntensivePanel=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("fantian_suit");this._cfgs={},this.cfgSuit=[],this.suitTypeLimitGrade={};for(var e=0,i=t.length;e<i;e++){var n=t[e][0];this._cfgs[n]||(this._cfgs[n]={});var s=t[e][1];this._cfgs[n][s]||(this._cfgs[n][s]={}),this._cfgs[n][s][t[e][2]]=t[e];for(var o=!1,a=0,r=this.cfgSuit.length;a<r;a++)this.cfgSuit[a][0]===n&&this.cfgSuit[a][1]===s&&(o=!0);o||this.cfgSuit.push([n,s])}console.log(this.cfgSuit)},n.prototype.getCfgs=function(t,e){return this._cfgs[t][e]},n.prototype.getSingleCfg=function(t,e,i){return this._cfgs[t][e][i]},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),i=n,e.FantianSuitCfg=i}(modules=modules||{}),function(m){var y,e,f,i,n,g,_,t;function s(){return e.call(this)||this}y=m.brahma_equip||(m.brahma_equip={}),f=m.config.FantianSuitCfg,i=m.common.BtnGroup,n=m.common.CustomList,g=m.common.CommonUtil,_=m.config.AttrItemCfg,e=ui.BrahmaEquipPreviewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.attrHtmlArr=[this.attrHtml1,this.attrHtml2,this.attrHtml3];for(var t=0;t<3;t++)g.setHTMLPro(this.attrHtmlArr[t],"#0ecf09","SimHei",24),this.attrHtmlArr[t].style.wordWrap=!0,this.attrHtmlArr[t].style.leading=8;this._tab=new i,this._tab.setBtns(this.btn1,this.btn2,this.btn3,this.btn4),this._tab.selectedIndex=3,this._btnList=n.create("h",0,0,this.btnBox.width,this.btnBox.height,y.BrahmaEquipPreviewBtnItem),this._btnList.scrollEvt=!0,this._btnList.selectedIndex=0,this.btnBox.addChild(this._btnList),this._btnList.datas=f.instance.cfgSuit,this.equipItems=[this.part_1,this.part_2,this.part_3,this.part_4,this.part_5,this.part_6,this.part_7,this.part_8,this.part_9,this.part_10,this.part_11,this.part_12]},s.prototype.destroy=function(t){void 0===t&&(t=!0),this.equipItems=this.destroyElement(this.equipItems),this._tab=this.destroyElement(this._tab),this._btnList=this.destroyElement(this._btnList),this.attrHtmlArr=this.destroyElement(this.attrHtmlArr),e.prototype.destroy.call(this,t)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),e.prototype.onEvt.call(this),this.regAutoRP(this.rp1,["brahmaRP1"]),this.regAutoRP(this.rp2,["brahmaRP2","brahmaResolveRP"]),this.regAutoRP(this.rp3,["brahmaRP3"]),this.regAutoRP(this.rp4,["brahmaRP4"]),this.onAutoEvt(this._tab,"change",this,this.tabChangeHandler),this.onAutoEvt(this.leftIcon,"click",this,this.moveHanlder,[!1]),this.onAutoEvt(this.rightIcon,"click",this,this.moveHanlder,[!0]),this.onAutoGlobalEvt("LIST_SCROLLET_MOVE",this,this.updatePos),this.onAutoClick(this._btnList,this,this.selectHandler),this.onAutoClick(this.gotoBtn,this,this.gotoHanlder)},s.prototype.moveHanlder=function(t){var e=Math.ceil(this._btnList.scrollPos/136)-1;e=-1===e?0:e;var i=t?e+4:e-4;i<0&&(i=0),i>=this._btnList.datas.length&&(i=this._btnList.datas.length-1),this._btnList.scrollTo(136*i+5*(i-1)+1)},s.prototype.updatePos=function(){var t=Math.ceil(this._btnList.scrollPos/136)-1,e=(t=-1===t?0:t)+4;this.leftIcon.visible=1<=t,this.rightIcon.visible=e<this._btnList.datas.length},s.prototype.tabChangeHandler=function(){3!==this._tab.selectedIndex&&WindowManager.instance.open(y.BrahmaEquipUtlis.jumpIds[this._tab.selectedIndex])},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._tab.selectedIndex=3,this._btnList.selectedIndex=0,this._btnList.scrollTo(0),this.curIndex=-1,this.updateView()},s.prototype.updateView=function(){var t=this._btnList.selectedData,e=f.instance.getCfgs(t[0],t[1]);this.attrTitle.text=g.numToUpperCase(t[1])+"阶"+y.BrahmaEquipUtlis.zhTxtEx[t[0]-1]+"套装";var i=[];this.curIndex=this._btnList.selectedIndex;var n=0;for(var s in e){for(var o=e[s],a="【"+o[2]+"件】<br/>",r=o[4],l=0,h=r.length;l<h;l+=2){var p=_.instance.getCfgById(r[l]);a+="&nbsp;<span style='color:#0ecf09'>"+p[1]+":"+(p[2]?Math.round(1e4*r[l+1])/100+"%":r[l+1])+"</span><br/>"}n+=o[3],i.push(a)}for(l=0;l<3;l++)this.attrHtmlArr[l].innerHTML=i[l]||"",0<l&&(this.attrHtmlArr[l].y=this.attrHtmlArr[l-1].y+this.attrHtmlArr[l-1].contextHeight+15);this.fight.value=n.toString();var c=m.config.ItemFantianCfg.instance.getCfgsByGradeStype(t[1],t[0]),u=[];for(l=0;l<12;l++)u.push([l+1,null]);for(l=0,h=c.length;l<h;l++){var d=c[l][0];u[y.BrahmaEquipUtlis.getPartById(d)-1][1]=[c[l][0],1,0,null]}for(l=0,h=this.equipItems.length;l<h;l++)this.equipItems[l].setData([u[l],0,1]);this.updatePos()},s.prototype.gotoHanlder=function(){WindowManager.instance.open(1474)},s.prototype.selectHandler=function(){this.curIndex!==this._btnList.selectedIndex&&this.updateView()},t=s,y.BrahmaEquipPreviewPanel=t}(modules=modules||{}),function(l){var a,t,r,e,o,h,p,i,n;function s(){return null!==t&&t.apply(this,arguments)||this}a=l.brahma_equip||(l.brahma_equip={}),r=l.bag.BagModel,e=l.config.BlendCfg,o=l.notice.SystemNoticeManager,h=l.common.CommonUtil,p=l.config.ItemFantianCfg,i=l.common.SimpleList,t=ui.BrahmaEquipResolveAlertUI,__extends(s,t),s.prototype.destroy=function(){this._list=this.destroyElement(this._list),t.prototype.destroy.call(this)},s.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=i.create(a.BrahmaEquipResolveItem,130,122,1,4,5,5),this._list.width=this.listBox.width,this._list.height=this.listBox.height,this._list.pos(this.listBox.x,this.listBox.y,!0),this._list.visible=!0,this._list.multiSelectable=!0,this.addChild(this._list),this._resolveCDTime=0,this.smeltId=17030005},s.prototype.onEvt=function(){t.prototype.onEvt.call(this),Laya.timer.loop(1e3,this,this.loopHandler),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyBtnHandler),this.onAutoGlobalEvt("BEAST_EQUIPMENT_CHANG",this,this.startKeepCDTime),this.onAutoEvt(this._list,"select",this,this.updateView),this.onAutoEvt(this.helpBtn,"click",this,this.helpHanlder)},s.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),this._resolveCDTime=null,t.prototype.offEvt.call(this)},s.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateList()},s.prototype.startKeepCDTime=function(){this._resolveCDTime=e.instance.getCfgById(23003)[1][0]+1,this.updateList()},s.prototype.loopHandler=function(){this._resolveCDTime<=1||(this._resolveCDTime-=1e3)},s.prototype.helpHanlder=function(){h.alertHelp(19079)},s.prototype.updateList=function(){for(var t=r.instance.getItemsByBagId(15)||[],e=[],i=0,n=t.length;i<n;i++){var s=t[i][0],o=p.instance.getItemByCfg(s);console.log("cfg[item_fantianFields.smelt]",o[11]),a.BrahmaEquipModel.instance.isUpMyEquip(s)||0==o[11].length||e.push(t[i])}for(this._list.datas=e.sort(this.brahmaSort),i=0,n=e.length;i<n;i++)this._list.multiSelectedIndices.push(i),this._list.items[i]&&(this._list.items[i].selected=!0);this.tips.visible=0===this._list.datas.length,this.updateView()},s.prototype.brahmaSort=function(t,e){var i=t[0],n=e[0],s=l.brahma_equip.BrahmaEquipUtlis.getGradeById(i),o=l.brahma_equip.BrahmaEquipUtlis.getGradeById(n);if(s!=o)return o-s;var a=l.brahma_equip.BrahmaEquipUtlis.getPartById(i),r=l.brahma_equip.BrahmaEquipUtlis.getPartById(n);return a===r?t[3][6]===e[3][6]?n-i:e[3][6]-t[3][6]:a-r},s.prototype.updateView=function(){for(var t=0,e=this._list.multiSelectedIndices,i=this._list.datas,n=0,s=e.length;n<s;n++){var o=i[e[n]];o&&(t+=o[1]*p.instance.getItemByCfg(o[0])[11][1])}this.propTxt.text=t.toString(),this.propImg.skin=h.getIconById(this.smeltId,!0)},s.prototype.oneKeyBtnHandler=function(){if(1<this._resolveCDTime)o.instance.addNotice("冷却中，请"+Math.floor(this._resolveCDTime/1e3)+"s后再试",!0);else{for(var t=this._list.multiSelectedIndices,e=this._list.datas,i=[],n=0,s=t.length;n<s;n++)i.push(e[t[n]][2]);0!==e.length?0!==i.length?a.BrahmaEquipCtrl.instance.fantianEquipResolve(i):o.instance.addNotice("请选择梵天装备",!0):o.instance.addNotice("暂无梵天魔部装备可分解",!0)}},n=s,a.BrahmaEquipResolveAlert=n}(modules=modules||{}),function(o){var t,e;function i(){this.init()}t=o.config||(o.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){var t=GlobalData.getConfig("fantian_neidan");this._cfg={};for(var e=0,i=t.length;e<i;e++){var n=t[e][0];this._cfg[n]||(this._cfg[n]={}),this._cfg[n][t[e][1]]=t[e]}},i.prototype.getCfgByTypeAndLevel=function(t,e){return this._cfg[t][e]},i.prototype.getLimitByTypeAndLevel=function(t){var e=this._cfg[t];for(var i in e){var n=e[i];if(!e[n[1]+1])return n[2];var s=e[n[1]+1][6];if(s&&0!==s.length&&!(o.brahma_equip.BrahmaEquipModel.instance.getLimitByGrade(s[1],t)>=s[0]))return n[2]}},e=i,t.FantianNeiDanCfg=e}(modules=modules||{}),function(t){var g,i,l,h,_,e,v,n;function s(){return null!==i&&i.apply(this,arguments)||this}g=t.brahma_equip||(t.brahma_equip={}),l=t.common.CommonUtil,h=t.common.CustomClip,_=t.config.FantianNeiDanCfg,e=t.bag.BagUtil,v=t.config.AttrItemCfg,i=ui.BrahmaEquipShiHunAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._nameTextArry=[this.attributeNameText1,this.attributeNameText2,this.attributeNameText3,this.attributeNameText4,this.attributeNameText5,this.attributeNameText6],this._valueTextArry=[this.attributeValueText1,this.attributeValueText2,this.attributeValueText3,this.attributeValueText4,this.attributeValueText5,this.attributeValueText6],this._upValueTextArry=[this.attributeUpValueText1,this.attributeUpValueText2,this.attributeUpValueText3,this.attributeUpValueText4,this.attributeUpValueText5,this.attributeUpValueText6],this._upValueImgArry=[this.attributeUpImg1,this.attributeUpImg2,this.attributeUpImg3,this.attributeUpImg4,this.attributeUpImg5,this.attributeUpImg6],this._btnClip=h.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.instenBtn.x-6,this.instenBtn.y-8),this._btnClip1=h.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip1.setProperty(this,this.oneInstenBtn.x-6,this.oneInstenBtn.y-8),this.titleTxt_2.text="属性提升",this.initPos=[this.attributeNameText1.x,this.attributeValueText1.x]},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type=t},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updatePanel()},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.instenBtn,this,this.upGrade),this.onAutoClick(this.oneInstenBtn,this,this.oneKeyUpGrade),this.onAutoGlobalEvt("UPDATE_FANTIAN_EQUIP",this,this.updatePanel),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updatePanel)},s.prototype.close=function(t,e){i.prototype.close.call(this,t,e),h.thisStop(this._btnClip),h.thisStop(this._btnClip1)},s.prototype.updatePanel=function(){var t=0;1===this._type?t=g.BrahmaEquipModel.instance.fantianNeidan[0]:2===this._type&&(t=g.BrahmaEquipModel.instance.fantianNeidan[1]),this.titleTxt_1.text=g.BrahmaEquipUtlis.zhTxt[this._type-1]+"灵等级:",this.needMc.visible=!1;var e=_.instance.getCfgByTypeAndLevel(this._type,t),i=_.instance.getCfgByTypeAndLevel(this._type,t+1),n=e?e[3][0]:i[3][0];this._needItemId=n;var s=l.getPropCountById(n);if(this.nowBaseItem.dataSource=[n,1,0,null],this.icon.skin=l.getIconById(n),this.nameText.text=l.getNameByItemId(n),this.nameText.color=l.getColorByQuality(l.getItemQualityById(n)),this._enoughItemCount=!1,i){var o=i[6],a=_.instance.getLimitByTypeAndLevel(this._type);if(g.BrahmaEquipModel.instance.getSuitCondtion(o,this._type)){var r=l.getPropCountById(n);this.instenBtn.visible=!0,this.oneInstenBtn.visible=!0,this.needMc.visible=!0,this.tipText.visible=!1,r>=i[3][1]?(h.thisPlay(this._btnClip),h.thisPlay(this._btnClip1),this._enoughItemCount=!0):(h.thisStop(this._btnClip),h.thisStop(this._btnClip1)),this.devourText.text=t+"/"+a}else this.tipText.text="激活 "+l.numToUpperCase(o[0])+"阶"+["神圣","魔部"][this._type-1]+o[1]+"件套 可提升"+g.BrahmaEquipUtlis.zhTxt[this._type-1]+"灵等级上限",this.tipText.visible=!0,this.instenBtn.visible=!1,this.oneInstenBtn.visible=!1,h.thisStop(this._btnClip),h.thisStop(this._btnClip1),this.devourText.text=0===t?"0":t+"/"+t;this.iconNum.color=s>=i[3][1]?"#168a17":"#ff3e3e",this.iconNum.text=s+"/"+i[3][1]}else this.needMc.visible=!1,this.instenBtn.visible=!1,this.oneInstenBtn.visible=!1,this.tipText.text="已达到"+g.BrahmaEquipUtlis.zhTxt[this._type-1]+"灵等级上限",this.tipText.visible=!0,h.thisStop(this._btnClip),h.thisStop(this._btnClip1),this.devourText.text=t+"/"+t;l.centerChainArr(this.needMc.width,[this.icon,this.iconNum],2),this.setAttribute()},s.prototype.setAttribute=function(){var t=0;1===this._type?t=g.BrahmaEquipModel.instance.fantianNeidan[0]:2===this._type&&(t=g.BrahmaEquipModel.instance.fantianNeidan[1]);for(var e=0;e<6;e++)this._valueTextArry[e].visible=this._upValueTextArry[e].visible=this._nameTextArry[e].visible=this._upValueImgArry[e].visible=!1;var i=_.instance.getCfgByTypeAndLevel(this._type,t),n=_.instance.getCfgByTypeAndLevel(this._type,t+1);this._needItemId=i?i[3][0]:n[3][0];var s=0;if(i)if(n)for(r=n[5],e=0,l=(a=i[5]).length;e<l;e+=2){p=e/2>>0;var o=(h=v.instance.getCfgById(a[e]))[2]?Math.round(1e4*a[e+1])/100+"%":Math.round(a[e+1])+"";c=h[2]?Math.round(1e4*(r[e+1]-a[e+1]))/100+"%":Math.round(r[e+1]-a[e+1])+"",this._valueTextArry[p].text=o,this._upValueTextArry[p].text=""+c,this._nameTextArry[p].text=h[1]+":",this._valueTextArry[p].visible=this._upValueTextArry[p].visible=this._nameTextArry[p].visible=this._upValueImgArry[p].visible=!0,s++}else{var a;for(e=0,l=(a=i[5]).length;e<l;e+=2)p=e/2>>0,o=(h=v.instance.getCfgById(a[e]))[2]?Math.round(1e4*a[e+1])/100+"%":Math.round(a[e+1])+"",this._valueTextArry[p].text=""+o,this._nameTextArry[p].visible=this._valueTextArry[p].visible=!0,this._nameTextArry[p].text=h[1]+":",this._upValueTextArry[p].text="",this._upValueTextArry[p].visible=!1,s++}else for(var r,e=0,l=(r=n[5]).length;e<l;e+=2){var h,p=e/2>>0,c=(h=v.instance.getCfgById(r[e]))[2]?Math.round(1e4*r[e+1])/100+"%":r[e+1]+"";this._valueTextArry[p].text="0",this._upValueTextArry[p].text=c,this._nameTextArry[p].text=h[1]+":",this._valueTextArry[p].visible=this._upValueTextArry[p].visible=this._nameTextArry[p].visible=this._upValueImgArry[p].visible=!0,s++}var u=(this.diTuImg.height-(24*s+21*(s-1)))/2;for(p=0;p<this._nameTextArry.length;p++){var d=this._nameTextArry[p],m=this._valueTextArry[p],y=this._upValueTextArry[p],f=this._upValueImgArry[p];n?(d.x=this.initPos[0],m.x=this.initPos[1]):(d.x=this.width/2-10-d.width-47,m.x=this.width/2+10-47),d.y=m.y=y.y=f.y=u+45*p}},s.prototype.upGrade=function(){this._enoughItemCount?g.BrahmaEquipCtrl.instance.fantianUseNeiDan(this._type):e.openLackPropAlert(this._needItemId,1)},s.prototype.oneKeyUpGrade=function(){this._enoughItemCount?g.BrahmaEquipCtrl.instance.fantianUseNeiDanOneKey(this._type):e.openLackPropAlert(this._needItemId,1)},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._btnClip1=this.destroyElement(this._btnClip1),this._nameTextArry=this.destroyElement(this._nameTextArry),this._valueTextArry=this.destroyElement(this._valueTextArry),this._upValueTextArry=this.destroyElement(this._upValueTextArry),this._upValueImgArry=this.destroyElement(this._upValueImgArry),this._btnList=this.destroyElement(this._btnList),i.prototype.destroy.call(this)},n=s,g.BrahmaEquipShiHunAlert=n}(modules=modules||{}),function(c){var v,e,h,p,b,T,u,C,t;function i(){return null!==e&&e.apply(this,arguments)||this}v=c.brahma_equip||(c.brahma_equip={}),h=laya.html.dom.HTMLDivElement,p=Laya.Image,b=c.common.CommonUtil,T=c.config.AttrItemCfg,u=laya.ui.Box,C=c.config.FantianSuitCfg,e=ui.BrahmaEquipAlertUI,__extends(i,e),i.prototype.destroy=function(){this.bottomBox=this.destroyElement(this.bottomBox),this.bgImg=this.destroyElement(this.bgImg),this.contentBox=this.destroyElement(this.contentBox),this.backTxt=this.destroyElement(this.backTxt),this.qualityImg1=this.destroyElement(this.qualityImg1),e.prototype.destroy.call(this)},i.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._item=t},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},i.prototype.initialize=function(){e.prototype.initialize.call(this),b.setHTMLPro(this.lvHTML,"#1f304d","SimHei",22),this.boxArr=[],this.testGmBtn.visible=!1},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.testGmBtn.visible=!1},i.prototype.updateView=function(){this.boxArr.length=0,this.updateQuality(),this.updataBaseView(),this.updataFantianView(),this.updatePreview(),this.offSet()},i.prototype.updatePreview=function(){var t=this._item[0],e=v.BrahmaEquipUtlis.getGradeById(t),i=v.BrahmaEquipUtlis.getPartType(t),n=C.instance.getCfgs(i,e),s=[];for(var o in n){var a=n[o];s.push(a[2])}for(var r=0,l="",h=0,p=s.length;h<p;h++){var c=a=void 0,u=v.BrahmaEquipModel.instance.getLimitByGrade(s[h],i);a=-1===u?(c="#999999",C.instance.getSingleCfg(i,e,s[h])):(c="#0ecf09",C.instance.getSingleCfg(i,u,s[h])),l+="<span style='color:"+c+"'>【"+a[2]+"件】 "+b.numToUpperCase(a[1])+"阶</span><br/>";for(var d=a[4],m=0,y=d.length;m<y;m+=2){var f=T.instance.getCfgById(d[m]);l+="&nbsp;<span style='color:"+c+"'> "+f[1]+":"+(f[2]?Math.round(1e4*d[m+1])/100+"%":d[m+1])+"</span><br/>"}r=a[2]}var g=v.BrahmaEquipModel.instance.getStypeCount(i,v.BrahmaEquipModel.instance.getLimitByGrade(6,i,2)),_="梵天"+v.BrahmaEquipUtlis.zhTxtEx[i-1]+"套装<span style='color:"+(r<=g?"#0ecf09":"#ff3333")+"'>("+g+"/"+r+")</span>";this.boxArr.push(this.createTitleComment(_)),this.boxArr.push(this.createContentComment(l,1))},i.prototype.updataBaseView=function(){var t=this._item[0],e=c.config.ItemFantianCfg.instance.getItemByCfg(t);this.boxArr.push(this.createTitleComment("基础属性"));for(var i=e[9],n=0,s=i.length;n<s;n+=2){var o=T.instance.getCfgById(i[n]),a=v.BrahmaEquipUtlis.getPartById(t),r=v.BrahmaEquipModel.instance.getSingleStrongLv(a,i[n]),l=o[2],h=v.BrahmaEquipModel.instance.getSingleStrongLv(a,i[n]),p=r?"<span style='color:#0ecf09'>(强化+"+(l?Math.round(1e4*h)/100+"%":h)+")</span>":"";this.boxArr.push(this.createContentComment(o[1]+":"+(l?Math.round(1e4*i[n+1])/100+"%":i[n+1])+" "+p))}},i.prototype.updataFantianView=function(){var t=c.config.ItemFantianCfg.instance.getItemByCfg(this._item[0]);this.boxArr.push(this.createTitleComment("梵天属性"));for(var e=t[10],i=0,n=e.length;i<n;i+=2){var s=T.instance.getCfgById(e[i]);this.boxArr.push(this.createContentComment("<span style='color:"+b.getBrahmaColor(e[i])+"'>"+s[1]+":"+e[i+1]+"</span>"))}},i.prototype.updateQuality=function(){var t=this._item,e=(this.item.dataSource=t)[0],i=c.config.ItemFantianCfg.instance.getItemByCfg(e);this.nameTxt.text=i[1],this.nameTxt.color=b.getColorById(e),this.qualityImg.skin=b.getBgImgById(e);var n=b.getItemQualityById(e);this.qualityImg1.visible=this.qualityImg2.visible=this.qualityImg3.visible=6==n,t[3]?(this.scoreTxt.text=t[3][6].toString(),this.sumScoreTxt.text=t[3][7].toString()):(this.scoreTxt.text=i[8].toString(),this.sumScoreTxt.text=i[8].toString());var s=i[3],o=i[4];this.lvHTML.innerHTML=b.JudgeWearingCondition(s,o),this.rankTxt.text=i[6],this.myRankTxt.text=this.myItemCfg?this.myItemCfg[6]:"",this.scoreImg.visible=this.sumScoreImg.visible=this.myScoreTxt.visible=this.mySumScoreTxt.visible=!1},i.prototype.offSet=function(){var t=0;this.contentBox.removeChildren();for(var e=0,i=this.boxArr.length;e<i;e++){var n=0;0<e&&"t"===this.boxArr[e-1][0]&&(n=8),this.boxArr[e][1].y=t+n,t+=this.boxArr[e][1].height+n,this.contentBox.addChild(this.boxArr[e][1])}this.contentBox.height=t,this.bottomBox.y=this.contentBox.y+this.contentBox.height,this.height=this.bgImg.height=this.bottomBox.y+this.bottomBox.height+5,this.qualityImg1.height=this.bgImg.height+1,this.qualityImg1.top=0,this.backTxt.y=this.bgImg.height+20},i.prototype.getConteneStr=function(t,e){for(var i=this._item[0],n=v.BrahmaEquipUtlis.getGradeById(i),s=v.BrahmaEquipUtlis.getPartType(i),o="",a=0,r=t.length;a<r;a++){var l=void 0,h=void 0,p=v.BrahmaEquipModel.instance.getLimitByGrade(t[a],s,1,e);l=-1===p?(h="#999999",C.instance.getSingleCfg(s,n,t[a])):(h="#0ecf09",C.instance.getSingleCfg(s,p,t[a])),o+="<span style='color:"+h+"'>【"+l[2]+"件】 "+b.numToUpperCase(l[1])+"阶</span><br/>";for(var c=l[4],u=0,d=c.length;u<d;u+=2){var m=T.instance.getCfgById(c[u]);o+="&nbsp;<span style='color:"+h+"'> "+m[1]+":"+(m[2]?Math.round(1e4*c[u+1])/100+"%":c[u+1])+"</span><br/>"}}return o},i.prototype.createTitleComment=function(t,e){void 0===e&&(e=null);var i=new u;i.x=0;var n=new h;b.setHTMLPro(n,"#ffffff","SimHei",24),n.style.wordWrap=!1,n.innerHTML=t,n.pos(61,4,!0);var s=new p;if(s.pos(23,0,!0),s.skin="common/txtbg_common_bg2.png",i.addChild(s),i.addChild(n),e){var o=new h;b.setHTMLPro(o,"#ffffff","SimHei",24),o.innerHTML=e,o.pos(427,4,!0);var a=new p;a.pos(570,0,!0),a.skewY=180,a.skin="common/txtbg_common_bg2.png",i.addChild(a),i.addChild(o)}return i.height=33,["t",i]},i.prototype.createContentComment=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=456);var s=new u;s.height=40;var o=0;e&&!i&&(o=-14);var a=new h;b.setHTMLPro(a,"#ffffff","SimHei",22),a.style.leading=10,a.innerHTML=t,a.pos(65+o,0,!0),a.width=400,s.addChild(a);var r=new h;if(e&&"string"==typeof e&&(b.setHTMLPro(r,"#50ff28","SimHei",22),r.style.leading=10,r.innerHTML=e+"",r.pos(n+o,0,!0),r.width=400),i){var l=new p;l.pos(435,12,!0),l.anchorX=l.anchorY=.5,l.skin=i,s.addChild(l)}return e&&s.addChild(r),s.height=a.y+a.contextHeight,["c",s]},t=i,v.BrahmaEquipSelfAlert=t}(modules=modules||{}),function(l){var v,o,b,T,C,t;function e(){return null!==o&&o.apply(this,arguments)||this}v=l.brahma_equip||(l.brahma_equip={}),b=l.common.CommonUtil,T=l.config.AttrItemCfg,C=l.config.FantianSuitCfg,o=v.BrahmaEquipSelfAlert,__extends(e,o),e.prototype.destroy=function(){this._sourceBtns=this.destroyElement(this._sourceBtns),this._sourceBtnBg=this.destroyElement(this._sourceBtnBg),this._desTxt=this.destroyElement(this._desTxt),o.prototype.destroy.call(this)},e.prototype.updateView=function(){this.boxArr.length=0,this.updateQuality(),this.updataBaseView(),this.updataFantianView(),this.updatePreview(),this.updataGetWayView(),this.offSet()},e.prototype.initialize=function(){o.prototype.initialize.call(this),this._sourceBtns=new Array,this._sourceBtnBg=new Array,this._desTxt=new Array;for(var t=0;t<4;t++)this._sourceBtns[t]=new Laya.Image,this._sourceBtns[t].mouseEnabled=!0,this._sourceBtnBg[t]=new Laya.Image,this._desTxt[t]=new laya.display.Text,l.commonAlert.PropAlertUtil.setDesTxt(this._desTxt[t])},e.prototype.onEvt=function(){o.prototype.onEvt.call(this);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t])},e.prototype.getOpenPlaneId=function(t){WindowManager.instance.close(138),WindowManager.instance.close(192),WindowManager.instance.close(190),WindowManager.instance.close(197);var e=l.config.ItemFantianCfg.instance.getItemByCfg(this._item[0])[12][t];l.commonAlert.PropAlertUtil.clickHandler(e)},e.prototype.updateQuality=function(){o.prototype.updateQuality.call(this);var t=this._item,e=t[0],i=l.config.ItemFantianCfg.instance.getItemByCfg(e),n=0,s=0;s=t[3]?(n=t[3][6]-this._myItem[3][6],t[3][7]-this._myItem[3][7]):n=i[8]-this._myItem[3][6],this.scoreImg.skin=v.BrahmaEquipUtlis.getCompareBySkin(n),this.myScoreTxt.text=Math.abs(n).toString(),this.mySumScoreTxt.text=Math.abs(s).toString(),this.sumScoreImg.skin=v.BrahmaEquipUtlis.getCompareBySkin(s),this.scoreImg.visible=this.sumScoreImg.visible=this.myScoreTxt.visible=this.mySumScoreTxt.visible=!0},e.prototype.setOpenParam=function(t){o.prototype.setOpenParam.call(this,t);var e=this._item[0],i=v.BrahmaEquipUtlis.getPartById(this._item[0]),n=l.config.ItemFantianCfg.instance.getItemByCfg(e),s=v.BrahmaEquipModel.instance.partItem&&v.BrahmaEquipModel.instance.partItem[i-1]&&v.BrahmaEquipModel.instance.partItem[i-1][1];this.myItemCfg=s?l.config.ItemFantianCfg.instance.getItemByCfg(s[0]):v.BrahmaEquipUtlis.getFantianBaseData(n),this._myItem=s||v.BrahmaEquipUtlis.getBaseItem(this._item[0])},e.prototype.updataBaseView=function(){this.boxArr.push(this.createTitleComment("基础属性","我的装备"));for(var t=l.config.ItemFantianCfg.instance.getItemByCfg(this._item[0])[9],e=this.myItemCfg[9],i=0,n=t.length;i<n;i+=2){var s=T.instance.getCfgById(t[i]),o=t[i+1]-(e[i+1]||0),a=s[2],r="<span style='color:"+(0<=o?"#50ff28":"#ff3e3e")+"'>"+(a?Math.round(Math.abs(1e4*o))/100+"%":Math.round(Math.abs(o)))+"</span>";this.boxArr.push(this.createContentComment(s[1]+":"+(a?Math.round(1e4*t[i+1])/100+"%":t[i+1]),r,v.BrahmaEquipUtlis.getCompareBySkin(o)))}},e.prototype.updataFantianView=function(){this.boxArr.push(this.createTitleComment("梵天属性","我的装备"));for(var t=l.config.ItemFantianCfg.instance.getItemByCfg(this._item[0])[10],e=this.myItemCfg[10],i=0,n=t.length;i<n;i+=2){var s=T.instance.getCfgById(t[i]),o=t[i+1]-(e[i+1]||0)>>0,a="<span style='color:"+(0<=o?"#50ff28":"#ff3e3e")+"'>"+Math.abs(o)+"</span>";this.boxArr.push(this.createContentComment("<span style='color:"+b.getBrahmaColor(t[i])+"'>"+s[1]+":"+t[i+1]+"</span>",a,v.BrahmaEquipUtlis.getCompareBySkin(o)))}},e.prototype.updataGetWayView=function(){var t,e=this.createTitleComment("获取途径:");this.boxArr.push(e);for(var i=l.config.ItemFantianCfg.instance.getItemByCfg(this._item[0])[12],n=0,s=i.length;n<s;n++)e[1].addChild(this._sourceBtnBg[n]),e[1].addChild(this._sourceBtns[n]),t=l.config.GetWayCfg.instance.getCfgById(i[n]),this._sourceBtns[n].pos(30+.5*(588-158*s+42*(s-1))+116*n,41),this._sourceBtns[n].skin="assets/icon/ui/get_way/"+t[1]+".png",this._sourceBtnBg[n].skin="assets/icon/ui/get_way/btn_ydrk_bg.png",this._sourceBtns[n].addChild(this._desTxt[n]),this._sourceBtnBg[n].pos(this._sourceBtns[n].x,this._sourceBtns[n].y),this._desTxt[n].pos(6,70),this._desTxt[n].text=t[2];e[1].height=141},e.prototype.updatePreview=function(t){void 0===t&&(t="#999999");var e=this._item[0],i=v.BrahmaEquipUtlis.getGradeById(e),n=v.BrahmaEquipUtlis.getPartType(e),s=C.instance.getCfgs(n,i),o="",a=[];for(var r in s){o+="<span style='color:"+t+"'>【"+(c=s[r])[2]+"件】 "+b.numToUpperCase(i)+"阶</span><br/>",a.push(c[2]);for(var l=0,h=(m=c[4]).length;l<h;l+=2)o+="&nbsp;<span style='color:"+t+"'>"+(g=T.instance.getCfgById(m[l]))[1]+":"+(g[2]?Math.round(1e4*m[l+1])/100+"%":m[l+1])+"</span><br/>"}var p="";for(l=0,h=a.length;l<h;l++){var c=void 0,u=void 0,d=v.BrahmaEquipModel.instance.getLimitByGrade(a[l],n);c=-1===d?(u="#999999",C.instance.getSingleCfg(n,i,a[l])):(u="#0ecf09",C.instance.getSingleCfg(n,d,a[l])),p+="<span style='color:"+u+"'>【"+c[2]+"件】 "+b.numToUpperCase(c[1])+"阶</span><br/>";for(var m,y=0,f=(m=c[4]).length;y<f;y+=2){var g;p+="&nbsp;<span style='color:"+u+"'> "+(g=T.instance.getCfgById(m[y]))[1]+":"+(g[2]?Math.round(1e4*m[y+1])/100+"%":m[y+1])+"</span><br/>"}}var _="梵天"+v.BrahmaEquipUtlis.zhTxtEx[n-1]+"套装";this.boxArr.push(this.createTitleComment(_,"我的套装")),this.boxArr.push(this.createContentComment(o,p,null,400))},t=e,v.BrahmaEquipBagAwardAlert=t}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.brahma_equip||(t.brahma_equip={}),i=e.BrahmaEquipBagAwardAlert,__extends(s,i),s.prototype.updateView=function(){this.boxArr.length=0,this.updateQuality(),this.updataBaseView(),this.updataFantianView(),this.updatePreview(),this.offSet()},s.prototype.updatePreview=function(){i.prototype.updatePreview.call(this,"#0ecf09")},n=s,e.BrahmaEquipPreviewAlert=n}(modules=modules||{}),function(f){var g,t,p,_,e;function i(){return null!==t&&t.apply(this,arguments)||this}g=f.brahma_equip||(f.brahma_equip={}),p=f.config.FantianSuitCfg,_=f.config.AttrItemCfg,t=g.BrahmaEquipPreviewAlert,__extends(i,t),i.prototype.updatePreview=function(){var t=this._item[0],e=g.BrahmaEquipUtlis.getGradeById(t),i=g.BrahmaEquipUtlis.getPartType(t),n=p.instance.getCfgs(i,e),s=[];for(var o in n){var a=n[o];s.push(a[2])}var r=f.chat.ChatModel.instance.fantianEquip,l="";r&&(l=this.getConteneStr(s,r[1]));var h="梵天"+g.BrahmaEquipUtlis.zhTxtEx[i-1]+"套装";this.boxArr.push(this.createTitleComment(h,"我的套裝")),this.boxArr.push(this.createContentComment(l,this.getConteneStr(s),null,400))},i.prototype.updataBaseView=function(){this.boxArr.push(this.createTitleComment("基础属性","我的装备"));for(var t=f.config.ItemFantianCfg.instance.getItemByCfg(this._item[0])[9],e=this.myItemCfg[9],i=0,n=t.length;i<n;i+=2){var s=_.instance.getCfgById(t[i]),o=g.BrahmaEquipUtlis.getPartById(this._item[0]),a=f.chat.ChatModel.instance.fantianEquip,r=0;if(a){var l=a[1][o-1][1];if(l){var h=l[3];h&&(r=h[5])}}var p=g.BrahmaEquipModel.instance.getSingleStrongLv(o,t[i],r),c=g.BrahmaEquipModel.instance.getSingleStrongLv(o,t[i]),u=s[2],d=p?"<span style='color:#0ecf09'>(强化+"+(u?Math.round(1e4*p)/100+"%":p)+")</span>":"",m=t[i+1]+p-((e[i+1]||0)+(c||0)),y="<span style='color:"+(0<=m?"#50ff28":"#ff3e3e")+"'>"+(u?Math.round(Math.abs(1e4*m))/100+"%":Math.round(Math.abs(m)))+"</span>";this.boxArr.push(this.createContentComment(s[1]+":"+(u?Math.round(1e4*t[i+1])/100+"%":t[i+1])+d,y,g.BrahmaEquipUtlis.getCompareBySkin(m)))}},e=i,g.BrahmaEquioOtherAlert=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.brahma_equip||(t.brahma_equip={}),i=ui.BrahmaEquipAttrAlertUI,__extends(s,i),s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),CommonUtil.setHTMLPro(this.html,"#4C5E8A","SimHei",24,"left","middle"),this.html.style.lineHeight=28,this.html.style.leading=10,this.html.innerHTML=t},n=s,e.BrahmaEquipAttrAlert=n}(modules=modules||{}),function(t){var i,n,s,e;function o(){this.isForceEnter=!1,this.endTime=0,this.checkTips=[],this.haloOpen=!0,this.isInit=!1}i=t.halo||(t.halo={}),n=t.customData.CustomDataCtrl,s=t.config.PrivilegeCfg,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.updateStarInfo=function(t,e){void 0===e&&(e=!1),this.isInit||(this.isInit=!0),this.endTime=t[0],this.startTime=t[3],this.openDay=t[1]?t[1]:1,this.crossOpenDay=t[2]?t[2]:1,this.isHalo()&&!e?n.instance.setCustomizeData([[42,[1]]]):this.isHalo()||n.instance.setCustomizeData([[42,[0]]])},o.prototype.isHalo=function(){return this.endTime>GlobalData.serverTime},o.prototype.setCheckTipsKey=function(t,e){i.HaloCtrl.instance.starSetCopyHelper([[t,e?1:0]])},o.prototype.getCheckTipsValue=function(t){var e=this.getSingleData(t);return e&&!!e[1]||!1},o.prototype.getSingleData=function(t){for(var e=0,i=this.checkTips.length;e<i;e++)if(t===this.checkTips[e][0])return this.checkTips[e];return null},o.prototype.getDreamlandStrengthPre=function(){for(var t=0,e=s.instance.getCfgByType(301)[1],i=0,n=e.length;i<n;i++)if(101===e[i][0]){t=e[i][1];break}return t},o.prototype.getDreamlandStrength=function(t){return this.isHalo()?t+Math.round(t*this.getDreamlandStrengthPre()):t},e=o,i.HaloModel=e}(modules=modules||{}),function(r){var t,e;function i(){var t=GlobalData.getConfig("star");this._typeDic={},this._threeDic={};for(var e=0;e<t.length;e++)2==t[e][0]?(this._threeDic[t[e][3]]=this._threeDic[t[e][3]]||[],this._threeDic[t[e][3]].push(t[e])):(this._typeDic[t[e][0]]=this._typeDic[t[e][0]]||[],this._typeDic[t[e][0]].push(t[e]))}t=r.config||(r.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getParams=function(t,e){void 0===e&&(e=-1);for(var i=2==t?r.halo.HaloModel.instance.crossOpenDay:r.halo.HaloModel.instance.openDay,n=2==t?this._threeDic[e]:this._typeDic[t],s=[],o=0;o<n.length;o++){var a=n[o][1];if(i>=a[0]&&i<=a[1]){s=n[o][2];break}}return s},e=i,t.HaloCfg=e}(modules=modules||{}),function(h){var p,t,c,e,i,u,d,m,n;function s(){return t.call(this)||this}p=h.halo||(h.halo={}),c=h.common.CommonUtil,e=h.common.CustomClip,i=h.halo.HaloCtrl,u=h.config.RechargeCfg,d=h.config.PrivilegeCfg,m=h.config.HaloCfg,t=ui.HaloViewUI,__extends(s,t),s.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.btn.addChild(this._btnClip),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this._btnClip.scale(1.15,1.1),c.setHTMLPro(this.dayTxt,"#FFFFFF","SimHei",22,"center"),this.list.vScrollBarSkin="",p.HaloModel.instance.isInit||(h.loading.LoadingCtrl.instance.showLoading(1493),GlobalData.dispatcher.once("HALO_INFO_UPDATE",this,function(){h.loading.LoadingCtrl.instance.hideLoading(1493)}))},s.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("HALO_INFO_UPDATE",this,this.updateView),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.helpBtn,this,this.onHelpHandler)},s.prototype.offEvt=function(){t.prototype.offEvt.call(this)},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._titleTween&&(this._titleTween.stop(),this._titleTween=null),t.prototype.destroy.call(this)},s.prototype.close=function(){t.prototype.close.call(this),Laya.timer.clear(this,this.onUpdateTime)},s.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.titleImg.skin="assets/icon/ui/designation/3000.png",this._titleTween||(this._titleTween=TweenJS.create(this.titleImg).to({y:this.titleImg.y-15},1e3).yoyo(!0).repeat(99999999),this._titleTween.start()),i.instance.getStarInfo()},s.prototype.updateView=function(){var t=u.instance.getRecharCfgByIndex(150),e=t[6][0];this.reward_txt_2.value=e[1].toString(),this.reward_txt_1.value=(10*t[2]).toString();for(var i=d.instance.getCfgByType(301)[1],n=0,s=i.length;n<s;n++)if(1===i[n][0]){this.reward_txt_1.value=i[n][2].toString();break}var o=(p.HaloModel.instance.endTime-GlobalData.serverTime)/864e5,a=h.config.BlendCfg.instance.getCfgById(99501)[1][0];if(Laya.timer.clear(this,this.onUpdateTime),p.HaloModel.instance.isHalo())o<=a?(this.btn.label=t[2]+"元续时",this.timeTxt1.text="光环剩余时间："+c.timeStampDDHHMMToHHMMSS(p.HaloModel.instance.endTime),this.dayTxt.visible=!1,this.timeTxt.visible=!1,this.timeTxt1.visible=!0,this.btn.visible=this._btnClip.visible=!0,this._btnClip.play(),this.buyTip.visible=!0,this.goneImg.visible=!1):(this.btn.visible=this._btnClip.visible=!1,this._btnClip.stop(),this.goneImg.visible=!0,this.dayTxt.visible=!1,this.timeTxt.visible=!0,this.timeTxt1.visible=!1,this.buyTip.visible=!1,this.timeTxt.text="光环剩余时间："+c.timeStampDDHHMMToHHMMSS(p.HaloModel.instance.endTime)),Laya.timer.loop(1e3,this,this.onUpdateTime);else{if(h.redBag.RedBagUtils.getActionopen()){var r=h.redBag.RedBagUtils.getIdAndCondByMoney(1049,1);this.dayTxt.innerHTML='早买早享受~特权持续30天，可发一次<span style="color:#0ECF09">'+r+"元宝</span>红包"}else this.dayTxt.innerHTML="早买早享受~特权持续30天!";this.dayTxt.visible=!0,this.buyTip.visible=!0,this.timeTxt.visible=!1,this.timeTxt1.visible=!1,this.btn.visible=this._btnClip.visible=!0,this._btnClip.play(),this.goneImg.visible=!1,this.btn.label=t[2]+"元即享"}this.num_1.value=m.instance.getParams(1)[1].toString(),this.num_2.value=m.instance.getParams(2,h.threeWorlds.ThreeWorldsModel.instance.getThreeBossLvl())[1].toString(),this.num_3.value=(100*p.HaloModel.instance.getDreamlandStrengthPre()).toString();var l=h.xianfu.XianfuModel.instance.maxOutput[0];l+=m.instance.getParams(3)[1],this.num_4.value=Math.floor(l/36e5).toString(),this.num_5.value=(100*m.instance.getParams(4)[1]).toString()},s.prototype.onUpdateTime=function(){this.timeTxt.text=this.timeTxt1.text="光环剩余时间："+c.timeStampDDHHMMToHHMMSS(p.HaloModel.instance.endTime)},s.prototype.btnHandler=function(){i.instance.buy(150)},s.prototype.onHelpHandler=function(){c.alertHelp(19088)},n=s,p.HaloPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.halo||(t.halo={}),n=t.bag.BaseItem,i=ui.HaloAwardAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._bagItem=new n,this.addChild(this._bagItem),this._bagItem.pos(282,266,!0),this.zOrder=10},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t);var e=t[1];this._bagItem.dataSource=e[0]},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=3e3,this.loopHandler()},o.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},s=o,e.HaloAwardAlert=s}(modules=modules||{}),function(t){var e,n,s,i;function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.timeCnt=0,t}e=t.hudie_platform||(t.hudie_platform={}),s=t.config.BlendCfg,n=ui.HudiePlatformAwardAlertUI,__extends(o,n),o.prototype.initialize=function(){n.prototype.initialize.call(this),this.items=[this.item1,this.item2,this.item3,this.item4];for(var t=0;t<4;t++)this.items[t].visible=!1;for(var e=s.instance.getCfgById(46004)[1],i=(t=0,e.length);t<i;t+=2)this.items[t/2>>0].dataSource=[e[t],e[t+1],0,null],this.items[t/2>>0].visible=!0;this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",8),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},o.prototype.sureBtnHandler=function(){1===e.HudiePlatformCtrl.instance.requestState?t.onceReward.OnceRewardCtrl.instance.drawOnceReward(46004):0===e.HudiePlatformCtrl.instance.requestState?(e.HudiePlatformCtrl.instance.requestState=1e3,e.HudiePlatformCtrl.instance.doExtraAction()):1e3===e.HudiePlatformCtrl.instance.requestState?console.log("下载中"):console.log("错误状态...."+e.HudiePlatformCtrl.instance.requestState)},o.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoClick(this.closeBtn,this,this.closeHanledr),this.onAutoGlobalEvt("UPDATA_HUDIE_STATE",this,this.updateView)},o.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHander),n.prototype.offEvt.call(this)},o.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.updateView()},o.prototype.loopHander=function(){if(1e3===e.HudiePlatformCtrl.instance.requestState){switch(this.timeCnt%3){case 0:this.dotTxt.text=".";break;case 1:this.dotTxt.text="..";break;case 2:this.dotTxt.text="..."}this.timeCnt++}},o.prototype.updateView=function(){Laya.timer.clear(this,this.loopHander),0===e.HudiePlatformCtrl.instance.requestState?(this.bg1.skin="hudie/txt_wdxz_01.png",CustomClip.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.sureBtn.label="立即下载",this.dotTxt.text=""):1===e.HudiePlatformCtrl.instance.requestState?(CustomClip.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.sureBtn.label="领取奖励",this.bg1.skin="hudie/txt_wdxz_02.png",this.dotTxt.text=""):1e3===e.HudiePlatformCtrl.instance.requestState?(CustomClip.thisStop(this._btnClip),this.sureBtn.visible=!0,this.timeCnt=0,this.sureBtn.label="下载中",this.loopHander(),Laya.timer.loop(500,this,this.loopHander),this.bg1.skin="hudie/txt_wdxz_01.png"):(1001===e.HudiePlatformCtrl.instance.requestState?(this.bg1.skin="hudie/txt_wdxz_01.png",CustomClip.thisStop(this._btnClip),this.sureBtn.visible=!1):(this.bg1.skin="hudie/txt_wdxz_01.png",CustomClip.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.sureBtn.label="立即下载"),this.dotTxt.text="")},o.prototype.close=function(){},o.prototype.closeHanledr=function(){1!==e.HudiePlatformCtrl.instance.requestState&&this.sureBtnHandler(),n.prototype.close.call(this)},o.prototype.destroy=function(){this.items=this.destroyElement(this.items),this._btnClip=this.destroyElement(this._btnClip),n.prototype.destroy.call(this)},i=o,e.HudiePlatformAwardAlert=i}(modules=modules||{}),function(p){var C,s,o,a,I,t,r,e;function i(){return null!==s&&s.apply(this,arguments)||this}C=p.weekCard||(p.weekCard={}),o=p.config.BlendCfg,a=p.config.RechargeCfg,I=p.config.WeekCardCfg,t=ui.WeekCardViewUI,r=p.config.PrivilegeCfg,s=t,__extends(i,s),i.prototype.close=function(){s.prototype.close.call(this),Laya.timer.clear(this,this.updateVipTime),Laya.timer.clear(this,this.tweenEffect),this._tweenBox&&(this._tweenBox.stop(),this._tweenBox=null)},i.prototype.onOpened=function(){s.prototype.onOpened.call(this),C.WeekCardCtrl.instance.reqInfo(),this.updateView()},i.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._originBarWidth=this.expBar.width,this.divCond.style.align="center",this.divCond.style.wordWrap=!0,this._btnShowLimit=1e3*o.instance.getCfgById(99402)[1][0]*24*60*60,CommonUtil.setHTMLPro(this.divCond,"#4c5e8a","SimHei",24),this.divCond.style.leading=20,CommonUtil.setHTMLPro(this.tipTxt,"#4C5E8A","SimHei",24,"center"),CommonUtil.setHTMLPro(this.redbagTxt,"#4C5E8A","SimHei",24,"center"),this._cfg=a.instance.getRecharCfgByIndex(140);for(var t=r.instance.getCfgByType(401)[1],e=0,i=t.length;e<i;e++)if(1===t[e][0]){this.txt_1.text="购买可立即获得"+t[e][2].toString();break}var n=this._cfg[6][0];this.txt_2.text="、"+n[1].toString(),this.xianyu.x=this.txt_2.x+this.txt_2.textWidth+3,-1==C.WeekCardModel.instance.weekLv&&(p.loading.LoadingCtrl.instance.showLoading(1494),GlobalData.dispatcher.once("WEEK_CARD_UPDATE_INFO",this,function(){p.loading.LoadingCtrl.instance.hideLoading(1494)}))},i.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.buyBtn,this,this.btnHandler),this.onAutoClick(this.btn_get,this,this.getAward),this.onAutoClick(this.img_box,this,this.getAward),this.onAutoGlobalEvt("WEEK_CARD_UPDATE_INFO",this,this.updateView)},i.prototype.getAward=function(){var t=C.WeekCardModel.instance.tasks[1];C.WeekCardCtrl.instance.getCardAward(t[0])},i.prototype.helpHandler=function(){p.common.CommonUtil.alertHelp(19080)},i.prototype.setItems=function(t,e,i){var n=this;this._tweenBox&&(this._tweenBox.stop(),this._tweenBox=null),this._isAbleGet=!1;var s=t[1];if(!s)return this.imgGot.visible=!1,this.divCond.innerHTML="每击败<span style='color:#168a17'>1</span>个BOSS,可领<span style='color:#168a17'>8</span>个升级石任选包<br>当前可领礼包：<span style='color:#ff3e3e'>0</span><br>本日已领礼包：<span style='color:#168a17'>0/300</span>(下级上限<span style='color:#168a17'>+60</span>)",this.btn_get.label="领取",this.btn_get.skin="common/btn_tongyong_24.png",void(this.btn_get.labelColors="#465460");var o=s[0],a=s[1],r=C.WeekCardModel.instance.killBossTime,l=I.instance.getTaskInfo(e,o);l||console.error("找不到配置：周卡的任务id:"+o+"、周卡的等级:"+e);var h=l[3][1],p=l[2],c=l[4]-a,u=Math.floor(r/p),d=Math.floor(a/h),m=!!r&&d<u&&!!c,y=m?(u-d)*h:0,f=c?"#168a17":"#ff3e3e",g=(y=Math.min(y,c))?"#168a17":"#ff3e3e",_=l[4],v="每击败<span style='color:#168a17'>"+p+"</span>个BOSS,可领<span style='color:#168a17'>"+h+"</span>个升级石任选包";v+="<br>当前可领礼包：<span style='color:"+g+"'>"+y+"</span>",v+="<br>本日已领礼包：<span style='color:"+f+"'>"+a+"/"+_+"</span>";var b=I.instance.getTaskInfo(e+1,o);if(b){var T=b[4];_<T&&(v+="(下级上限<span style='color:#168a17'>+"+(T-_)+"</span>)")}this.divCond.innerHTML=v,this.imgGot.visible=!1,this.btn_get.visible=!0,c?m&&i?(this.btn_get.label="领取",this.btn_get.skin="common/btn_tongyong_23.png",this.btn_get.labelColors="#9d5119",this.playGetEff(),this._isAbleGet=!0,this.tweenEffect(this.img_box,function(){return n._isAbleGet})):(this.btn_get.label="领取",this.btn_get.skin="common/btn_tongyong_24.png",this.btn_get.labelColors="#465460",this.stopGetEff()):(this.btn_get.visible=!1,this.imgGot.visible=!0,this.stopGetEff())},i.prototype.btnHandler=function(){-1!=C.WeekCardModel.instance.weekLv&&this._cfg&&(PlatParams.askPay(this._cfg[0],this._cfg[2]),this.stopBottomEff())},i.prototype.playBottomEff=function(){this._btnBottomClip||(this._btnBottomClip=CommonUtil.creatEff(this.buyBtn,"btn_light",15),this._btnBottomClip.pos(-5,-10,!0)),CustomClip.thisPlay(this._btnBottomClip)},i.prototype.stopBottomEff=function(){CustomClip.thisStop(this._btnBottomClip)},i.prototype.playGetEff=function(){this._btnGetClip||(this._btnGetClip=CommonUtil.creatEff(this.btn_get,"btn_light",15),this._btnGetClip.pos(-5,-10,!0),this._btnGetClip.scale(.8,.8)),CustomClip.thisPlay(this._btnGetClip)},i.prototype.stopGetEff=function(){CustomClip.thisStop(this._btnGetClip)},i.prototype.tweenEffect=function(t,e){var i=this;void 0===e&&(e=null),this._tweenBox&&this._tweenBox.stop(),this._tweenBox=null,e()&&(this._tweenBox=TweenJS.create(t).to({rotation:-15},66).onComplete(function(){i._tweenBox&&i._tweenBox.to({rotation:15},100).onComplete(function(){i._tweenBox&&i._tweenBox.to({rotation:0},33).onComplete(function(){i._tweenBox&&Laya.timer.once(2e3,i,i.tweenEffect,[t,e])}).start()}).start()}).start())},i.prototype.updateView=function(){Laya.timer.clear(this,this.updateVipTime),this.buyBtn.visible=!0,this.imgActived.visible=!1;var t,e=C.WeekCardModel.instance.weekLv,i=C.WeekCardModel.instance.weekVipExp,n=C.WeekCardModel.instance.vipEndTimeStamp,s=C.WeekCardModel.instance.tasks,o=C.WeekCardModel.instance.isVip;if(this._cfg?t=this._cfg[2]:this.buyBtn.label="未配置价格",o)this.redbagTxt.visible&&(this.redbagTxt.visible=!1),this.buyBtn.label=t+"元续时",this._vipEndTimeStamp=n,this.updateVipTime(),Laya.timer.loop(1e3,this,this.updateVipTime),this.stopBottomEff(),this.redbagTxt.visible=!1;else{this.buyBtn.label=t+"元激活",this.playBottomEff(),this.tipTxt.innerHTML="<span style='color:#168a17'>（赠送仙玉不计入每日获取上限）</span>";var a=p.redBag.RedBagUtils.getIdAndCondByMoney(1048,1),r="早买早享受~周卡持续7天";p.redBag.RedBagUtils.getActionopen()&&(r=r+',可发一次<span style="color:#168b17">'+a+"元宝</span>红包。"),this.redbagTxt.innerHTML=r,this.redbagTxt.visible=!0}var l=Math.max(1,e);if(this.setItems(s,l,o),this.lvClip.value=l+"",l<I.instance.maxLevel){var h=I.instance.getWeekCardLoginExp(l);this.txt_3.text="激活后每天可获得"+h+"点周卡经验",this.txt_3.visible=!0,this._expMaxValue=I.instance.getWeekCardExpMax(l),this.expValue=i}else this.txt_3.visible=!1,this.expBar.width=this._originBarWidth,this.txtExp.text="已满级"},i.prototype.updateVipTime=function(){var t=CommonUtil.timeStampDDHHMMToHHMMSS(this._vipEndTimeStamp);this.tipTxt.innerHTML="<span style='color:#168a17'>剩余时长:"+t+"</span>",this._vipEndTimeStamp<=GlobalData.serverTime?this.updateView():this._vipEndTimeStamp-GlobalData.serverTime>=this._btnShowLimit&&(this.buyBtn.visible=!1,this.imgActived.visible=!0)},Object.defineProperty(i.prototype,"expValue",{get:function(){return this._expValue},set:function(t){this._expValue=t||0,this.txtExp.text=this._expValue+"/"+this._expMaxValue;var e=this._expValue/this._expMaxValue;e=e?1<e?1:e<0?0:e:0,this.expBar.width=e*this._originBarWidth},enumerable:!0,configurable:!0}),e=i,C.WeekCardPanel=e}(modules=modules||{}),function(e){var t,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.timeNum=0,t}t=e.team_warfare||(e.team_warfare={}),i=ui.TeamWarfareSportsCopyBottonViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.zOrder=-2,this.bottom=530,this.closeByOthers=!1,this.layer=3,CommonUtil.setHTMLPro(this.timeText,"#50ff28","SimHei",22,"center")},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_UNSEEN_TIME_NUM",this,this.showTimeUI)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.timeBox.visible=!1,this.showTimeUI()},s.prototype.showTimeUI=function(){this.timeNum=e.player.PlayerModel.instance.unseenTimeNum,Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},s.prototype.loopHandler=function(){var t="您已变身幽灵不可被攻击,快去采集 倒计时:";PlayerModel.instance.isUnseen&&this.timeNum>GlobalData.serverTime?(this.timeBox.visible=!0,this.timeText.innerHTML=t+"<span style='color:#ff3e3e'>"+e.common.CommonUtil.msToMMSS(this.timeNum-GlobalData.serverTime)+"</span>"):(this.timeBox.visible=!1,this.timeText.innerHTML=t+"<span style='color:#ff3e3e'>00:00</span>",Laya.timer.clear(this,this.loopHandler))},s.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},n=s,t.TeamWarfareSportsCopyBottonPanel=n}(modules=modules||{}),function(t){var e,o,a,i,n;function s(){return null!==o&&o.apply(this,arguments)||this}e=t.bindPhone||(t.bindPhone={}),a=t.config.BlendCfg,i=ui.BindPhoneAlertUI,o=i,__extends(s,o),s.prototype.close=function(){o.prototype.close.call(this),CustomClip.thisStop(this._btnClip)},s.prototype.onOpened=function(){o.prototype.onOpened.call(this),this.updateView()},s.prototype.initialize=function(){o.prototype.initialize.call(this);for(var t=[this.award0,this.award1,this.award2],e=a.instance.getCfgById(46005)[1],i=e.length/2,n=0,s=t.length;n<s;n++)t[n].visible=!1,n<i&&(t[n].dataSource=[e[2*n],e[2*n+1],0,null],t[n].visible=!0);this.createEffect()},s.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.btnBind,this,this.onCheckBindOrAward),this.onAutoGlobalEvt("UPDATE_BIND_PHONE_STATE",this,this.updateView)},s.prototype.onCheckBindOrAward=function(){0!==e.BindPhoneModel.instance.status?e.BindPhoneCtrl.instance.bindPhone():e.BindPhoneModel.instance.hasGotAward||e.BindPhoneCtrl.instance.getAward()},s.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.btnBind,"btn_light",15),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},s.prototype.updateView=function(){0!==e.BindPhoneModel.instance.status||e.BindPhoneModel.instance.hasGotAward?(-1===e.BindPhoneModel.instance.status?this.btnBind.label="立即绑定":this.btnBind.label="已领取",CustomClip.thisStop(this._btnClip)):(this.btnBind.label="领取奖励",CustomClip.thisPlay(this._btnClip))},n=s,e.BindPhoneAlert=n}(modules=modules||{}),function(t){var e,n,i,s,o,a;function r(){return null!==n&&n.apply(this,arguments)||this}e=t.send_q_coins||(t.send_q_coins={}),i=t.config.RechargeCfg,s=t.config.BlendCfg,o=t.common.CustomClip,n=ui.SendQCoinsAlertUI,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this._items=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5];for(var t=s.instance.getCfgById(99601)[1],e=0,i=this._items.length;e<i;e++)this._items[e].visible=!1;for(e=0,i=t.length;e<i;e+=2)this._items[e/2>>0].dataSource=[t[e],t[e+1],0,null],this._items[e/2>>0].visible=!0;this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.getBtn.x-5,this.getBtn.y-10,!0),CommonUtil.setHTMLPro(this.htmlTm,"#3a5385","SimHei",20,"center")},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getHandler),this.onAutoGlobalEvt("SEND_Q_COINS_UPDATE",this,this.updateView)},r.prototype.close=function(){Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.close),n.prototype.close.call(this)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.setActivitiTime(),Laya.timer.once(200+e.SendQCoinsModel.instance.endTime-GlobalData.serverTime,this,this.updateView),this.updateView()},r.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),e.SendQCoinsModel.instance.endTime>=GlobalData.serverTime?(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.htmlTm.innerHTML="<span style='color:#ff3e3e;'>活动已结束</span>"},r.prototype.activityHandler=function(){e.SendQCoinsModel.instance.endTime>=GlobalData.serverTime?this.htmlTm.innerHTML="<span style='color:#50ff28;'>本期活动倒计时："+CommonUtil.timeStampDDHHMMToHHMMSS(e.SendQCoinsModel.instance.endTime)+"</span>":this.htmlTm.innerHTML="<span style='color:#ff3e3e;'>活动已结束</span>"},r.prototype.updateView=function(){if(e.SendQCoinsModel.instance.endTime>GlobalData.serverTime){var t=i.instance.getRecharCfgByIndex(e.SendQCoinsModel.instance.payGrade);0===e.SendQCoinsModel.instance.drawState?(this.getBtn.visible=!0,this.getBtn.label=t[2]+"元秒杀",o.thisPlay(this._btnClip),this.isOverImg.visible=!1,this.isRecImg.visible=!1):1===e.SendQCoinsModel.instance.drawState?(this.getBtn.visible=!0,this.getBtn.label="领取",o.thisPlay(this._btnClip),this.isOverImg.visible=!1,this.isRecImg.visible=!1):2===e.SendQCoinsModel.instance.drawState&&(this.getBtn.visible=!1,o.thisStop(this._btnClip),this.isOverImg.visible=!1,this.isRecImg.visible=!0)}else o.thisStop(this._btnClip),this.getBtn.visible=!1,this.isOverImg.visible=!0,this.isRecImg.visible=!1;this.numTxt.text="剩余份额："+e.SendQCoinsModel.instance.remainCount,this.tipsTxt.text="现在抢购可立即返还200    ，仙玉不计入每日获取上限"},r.prototype.getHandler=function(){var t=i.instance.getRecharCfgByIndex(e.SendQCoinsModel.instance.payGrade);0===e.SendQCoinsModel.instance.drawState?PlatParams.askPay(t[0],t[2]):1===e.SendQCoinsModel.instance.drawState&&e.SendQCoinsCtrl.instance.drawZhanhunTianshuBuyAward()},r.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),n.prototype.destroy.call(this)},a=r,e.SendQCoinsAlert=a}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.team_warfare||(t.team_warfare={}),i=ui.GatherViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=.5,this.bottom=570,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_GATHER_OCC",this,this.showUI)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.img1.visible=this.lightCircle.visible=this.pointImg.visible=this.grayImg.visible=this.timeText.visible=!1,this.descTxt.text="运送中",this.showUI()},s.prototype.showUI=function(){0!=e.TeamWarfareModel.instance.gatherOcc?this.img.skin=2101001===e.TeamWarfareModel.instance.gatherOcc?"team_warfare/icon_zdzl_05.png":"team_warfare/icon_zdzl_04.png":this.close()},n=s,e.TeamWarfareSportsCopyYunPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.team_warfare||(t.team_warfare={}),i=t.commonAlert.CommonTxtAlert,__extends(s,i),s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.okBtn.y=this.bgImg.height-120},n=s,e.TeamWarfareSportsCopyEnterAlert=n}(modules=modules||{}),function(l){var t,e,i,h,n,s,o;function a(){var t=e.call(this)||this;return t._typeNum=1,t._idArr=[],t}t=l.ranking_list_new||(l.ranking_list_new={}),i=laya.events.Event,h=l.player.PlayerModel,n=l.common.CommonUtil,s=l.common.SimpleList,e=ui.RankingListView1UI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=s.create(l.rankingList.RankingListBtn,151,62),this._list.width=180,this._list.height=530,this._list.selectedIndex=0,this._list.datas=[1,2,65536,4,8,16,32,16384,32768,64,128,256,512],this._list.x=30,this._list.y=618,this.addChild(this._list),this._rankList=s.create(t.PlayerRankingItem1,490,108),this._rankList.width=490,this._rankList.height=432,this._rankList.pos(191,635),this.addChild(this._rankList),this._factionList=s.create(l.ranking_list_new.FactionRankListItem,498,108),this._factionList.width=497,this._factionList.height=432,this._factionList.pos(191,635),this.addChild(this._factionList)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._list,i.SELECT,this,this.selectTypeHandler),this.onAutoClick(this.btn1,this,this.btn1Ruler),1===this._typeNum?(this.onAutoGlobalEvt("RANK_UPDATE1",this,this.updateRank),this.onAutoGlobalEvt("RANK_UPDATE1",this,this.updateFactionShow)):(this.onAutoGlobalEvt("RANK_UPDATE2",this,this.updateRank),this.onAutoGlobalEvt("RANK_UPDATE2",this,this.updateFactionShow)),this.onAutoGlobalEvt("GET_PRAISE_INFO_REPLY",this,this.setDianZanUI),this.onAutoGlobalEvt("PRAISE_SELECT_REPLY",this,this.getFun)},a.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._skipType=t},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),l.rankingList.PlayerRankingCtrl.instance.GetPraiseInfo(),this._list.selectedIndex=0,this.setDianZanUI()},a.prototype.setDianZanUI=function(){var t=l.rankingList.PlayerRankingModel.instance.zanNum[this._typeNum],e=l.rankingList.PlayerRankingModel.instance.zanMaxNum[this._typeNum];this.text2.text=e-t+"/"+e,this.text2.color=t<e?"#168A17":"#FF3E3E",n.adaptationImgAndText([[this.text1,1,0],[this.text2,1,0],[this.btn1,2,0]],this.width,0,"center",[0,12])},a.prototype.getFactionRank=function(){1===this._typeNum?l.rankingList.PlayerRankingCtrl.instance.GetCrossFactionRank():2===this._typeNum&&l.rankingList.PlayerRankingCtrl.instance.GetCrossGFactionRank()},a.prototype.selectTypeHandler=function(){var t=l.rankingList.PlayerRankingModel.instance.selectedRankType=this._list.selectedData;65536!=t?1===this._typeNum?l.rankingList.PlayerRankingCtrl.instance.GetCrossRank(t):2===this._typeNum&&l.rankingList.PlayerRankingCtrl.instance.GetCrossGRank(t):this.getFactionRank(),this.setUI()},a.prototype.btn1Ruler=function(){n.alertHelp(1===this._typeNum?19082:19083)},a.prototype.setUI=function(){var t=this._list.selectedData;this.item11.visible=this.item22.visible=this.item33.visible=this._rankList.visible=this.item1.visible=this.item2.visible=this.item3.visible=65536!=t,this.item44.visible=this.item55.visible=this.item66.visible=this._factionList.visible=this.item4.visible=this.item5.visible=this.item6.visible=65536===t},a.prototype.updateRank=function(){var t=this._list.selectedData;if(65536!==t){var e=l.rankingList.PlayerRankingModel.instance.getRanksByType1(this._typeNum,t),i=l.rankingList.PlayerRankingModel.instance.rankMaxNum[this._typeNum];this.item11.data=this.item1.data=[e[0],this._typeNum,t,1],this.item22.data=this.item2.data=[e[1],this._typeNum,t,2],this.item33.data=this.item3.data=[e[2],this._typeNum,t,3],l.rankingList.PlayerRankingModel.instance.rankShowTable={};var n=[];if(e[0]){var s=e[0][0];n.push(s)}e[1]&&(s=e[1][0],n.push(s)),e[2]&&(s=e[2][0],n.push(s)),1===this._typeNum?(n[0]&&l.rankingList.PlayerRankingCtrl.instance.getActorCrossRankShow(n[0]),n[1]&&l.rankingList.PlayerRankingCtrl.instance.getActorCrossRankShow(n[1]),n[2]&&l.rankingList.PlayerRankingCtrl.instance.getActorCrossRankShow(n[2]),this.text3.text="本区榜定时刷新"):2===this._typeNum&&(0<n.length&&l.rankingList.PlayerRankingCtrl.instance.GetActorCrossGRankShow(n),this.text3.text="跨区榜定时刷新");for(var o=new Array,a=4;a<=i;a++)o.push([t,a,this._typeNum]);if(this._rankList.datas=o,this.myranktxt.text="我的排名:未上榜",l.rankingList.PlayerRankingModel.instance.getRanksByTypeAndMingCi1(this._typeNum,t,1)){var r=l.rankingList.PlayerRankingModel.instance.actorrank(e,h.instance.actorId)[0];0!=r&&(this.myranktxt.text="我的排名:第"+r.toString()+"名"),this._idArr=n}}},a.prototype.updateFactionShow=function(){if(65536==this._list.selectedData){var t=l.rankingList.PlayerRankingModel.instance._rankTypeTable3[this._typeNum];t=t||[],this.myranktxt.text="按仙盟战力进行排名";var e=l.rankingList.PlayerRankingModel.instance.rankMaxNum1[this._typeNum],i=t[0],n=t[1],s=t[2];this.item44.data=this.item4.data=[i,i?l.rankingList.PlayerRankingModel.instance.rankShowTable1[0]:null,this._typeNum,1],this.item55.data=this.item5.data=[n,n?l.rankingList.PlayerRankingModel.instance.rankShowTable1[1]:null,this._typeNum,2],this.item66.data=this.item6.data=[s,s?l.rankingList.PlayerRankingModel.instance.rankShowTable1[2]:null,this._typeNum,3];for(var o=new Array,a=4;a<=e;a++)o.push([this._typeNum,a]);this._factionList.datas=o,this._idArr.length=0,i&&this._idArr.push(i[0]),n&&this._idArr.push(n[0]),s&&this._idArr.push(s[0])}},a.prototype.getFun=function(){1===this._typeNum?l.rankingList.PlayerRankingCtrl.instance.GetCrossActorFameValue(this._idArr):2===this._typeNum&&l.rankingList.PlayerRankingCtrl.instance.GetCrossGActorFameValue(this._idArr)},a.prototype.close=function(){e.prototype.close.call(this)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._rankList=this.destroyElement(this._rankList),this._factionList=this.destroyElement(this._factionList),e.prototype.destroy.call(this,t)},o=a,t.RankListPlane1=o}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._typeNum=2,t}e=t.ranking_list_new||(t.ranking_list_new={}),i=t.ranking_list_new.RankListPlane1,__extends(s,i),n=s,e.RankListPlane2=n}(modules=modules||{}),function(e){var i,t,n,s;function o(){return null!==t&&t.apply(this,arguments)||this}i=e.direct_ex||(e.direct_ex={}),n=e.common_alert_ex.DirectBuyBaseAlert,t=n,__extends(o,t),Object.defineProperty(o.prototype,"cfgId",{get:function(){return this.cfg[0]},enumerable:!0,configurable:!0}),o.prototype.initCfg=function(){var t=i.DirectExModel.instance.info;t&&(i.DirectExModel.instance.info[0],this.cfg=e.config.DirectExCfg.instance.getCfgById(t[0]),this.ttttttText&&(this.ttttttText.removeSelf(),this.ttttttText=null),this.ttttttText=new Laya.Text,this.ttttttText.color="#0ecf09",this.ttttttText.fontSize=38,this.ttttttText.text="测试文本类型----id是"+t[0]+"---充值档位."+this.payGrade,this.v.addChild(this.ttttttText),this._endTm=i.DirectExModel.instance.endTm)},Object.defineProperty(o.prototype,"awards",{get:function(){return this.cfg[5]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"payGrade",{get:function(){return this.cfg[4]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"redBagId",{get:function(){return this.cfg[9]||1041},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"buyState",{get:function(){return i.DirectExModel.instance.getState(this.cfgId)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endTm",{get:function(){return this._endTm},enumerable:!0,configurable:!0}),o.prototype.draBuyAward=function(){i.DirectExCtrl.instance.drawDirectBuy(this.payGrade)},o.prototype.setX=function(){this.v.showIcon.y=318},o.prototype.updataViewEx=function(){this.v.fight&&(this.v.fight.value=this.cfg[7].toString())},o.prototype.updateModelView=function(){this.setX();var t=this.cfg[6];if(!this._iconTween)if(0===t[1]){var e=this.v;e.rewardShowItem&&e.rewardShowItem.showRewardObj(t[0],t[1],t[2])}else this.v.showIcon.skin="assets/others/direct_ex/"+t[0]+".png",this._iconTween=TweenJS.create(this.v.showIcon).to({y:this.v.showIcon.y-20},1e3).yoyo(!0).repeat(99999999),this._iconTween.start()},s=o,i.DirectExAlert=s}(modules=modules||{}),function(t){!function(t){var e,i=(e=t.DirectExAlert,__extends(n,e),n.prototype.setX=function(){},n);function n(){return null!==e&&e.apply(this,arguments)||this}t.DirectBuyExtremeAlert=i;var s,o=(s=t.DirectExAlert,__extends(a,s),a.prototype.setX=function(){var t=this.v;if(t.imgMsc1&&t.imgMsc2&&t.imgMsc3){var e=this.cfgId-1001;t.imgMsc1.skin=t.imgMsc2.skin="assets/icon/ui/direct_ex/txt_zg_"+"jmsht"[e]+".png",t.imgMsc3.skin="assets/icon/ui/direct_ex/txt_zg_"+this.strs[e]+".png"}},a);function a(){var t=null!==s&&s.apply(this,arguments)||this;return t.strs=["gj","ym","ks","lh","ht"],t}t.DirectBuyYuanShenEquipAlert=o;var r,l=(r=t.DirectExAlert,__extends(h,r),h.prototype.setX=function(){},h);function h(){return null!==r&&r.apply(this,arguments)||this}t.DirectBuyYuanShenStoneAlert=l;var p,c=(p=t.DirectExAlert,__extends(u,p),u.prototype.setX=function(){},u);function u(){return null!==p&&p.apply(this,arguments)||this}t.DirectBuyYuanShenWeaponAlert=c;var d,m=(d=t.DirectExAlert,__extends(y,d),y.prototype.setX=function(){},y);function y(){return null!==d&&d.apply(this,arguments)||this}t.DirectBuyYuanShenCardAlert=m;var f,g=(f=t.DirectExAlert,__extends(_,f),_.prototype.setX=function(){},_);function _(){return null!==f&&f.apply(this,arguments)||this}t.DirectBuyBobyAlert=g;var v,b=(v=t.DirectExAlert,__extends(T,v),T.prototype.setX=function(){},T);function T(){return null!==v&&v.apply(this,arguments)||this}t.DirectBuyBobySkillAlert=b}(t.direct_ex||(t.direct_ex={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.wx_sidebar||(t.wx_sidebar={}),i=ui.wxSidebarItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this.nameTxt.text=t.title,this.iconImg.skin=t.icon},s.prototype.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t)},n=s,e.wxSidebarItem=n}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){var t=i.call(this)||this;return t._state=0,t._left=-468,t}t=e.wx_sidebar||(e.wx_sidebar={}),n=e.common.CustomList,s=e.wx_sidebar.wxSidebarItem,i=ui.wxSidebarViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.left=this._left,this.bottom=190,this.layer=3,this.closeByOthers=!1,this._gameList=new n,this._gameList.width=this.list.width,this._gameList.height=this.list.height,this._gameList.hCount=3,this._gameList.vCount=3,this._gameList.spaceX=this.list.spaceX,this._gameList.spaceY=this.list.spaceY,this._gameList.itemRender=s,this._gameList.x=this.list.x,this._gameList.y=this.list.y,this._gameList.selectedIndex=-1,this._gameList.canSelectSameItem=!0,this.addChild(this._gameList),this.list.visible=!1},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.onBtnClick),this.onAutoEvt(this._gameList,"select",this,this.gameSelectHandler)},a.prototype.gameSelectHandler=function(){var t=e.wx_sidebar.wxSildbarModel.instance.getGameList()[this._gameList.selectedIndex];PlatParams.clickBoxGame({game_id:t.game_id,tunnel_id:t.tunnel_id,jump_appid:t.jump_appid,jump_path:t.jump_path})},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._state=1,this.state_img.scaleX=-1,this.left=this._left,this._gameList.datas=e.wx_sidebar.wxSildbarModel.instance.getGameList()},a.prototype.showHide=function(){0==this._state?(PlatParams.openBox(),this.state_img.scaleX=1,this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({left:0},CommonConfig.panelTweenDuration).start()):1==this._state&&(this.state_img.scaleX=-1,this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({left:-468},CommonConfig.panelTweenDuration).start())},a.prototype.onBtnClick=function(){0==this._state?this._state=1:1==this._state&&(this._state=0),this.showHide()},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),i.prototype.destroy.call(this,t)},o=a,t.wxSidebarPanel=o}(modules=modules||{}),function(n){var a,e,t,i,s,r,o,l;function h(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeTime=0,t}a=n.yearEndRank||(n.yearEndRank={}),t=ui.YearEndRankViewUI,i=n.common.CustomList,s=n.common.AvatarClip,r=n.config.YearEndRankCfg,o=n.notice.SystemNoticeManager,e=t,__extends(h,e),h.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},h.prototype.destroy=function(t){void 0===t&&(t=!0),this._rankList=this.destroyElement(this._rankList),this._avatar=this.destroyElement(this._avatar),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime(),this.updateView(!0)},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){n.bottomTab.BottomTabCtrl.instance.updateTabByPanel()}),this.onAutoGlobalEvt("YEAR_END_RANK_UPDATE",this,this.updateView),this.onAutoGlobalEvt("YEAR_END_HIDE_UPDATE",this,this.updateHide),this.onAutoGlobalEvt("YEAR_END_HIDE_MY_UPDATE",this,this.updateHideScorl),this.onAutoClick(this.goRechargeBtn,this,this.goRechargeBtnHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoClick(this.hideBtn,this,this.hideBtnHandler)},h.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._rankList=i.create("v",0,0,640,150,a.YearEndRankItem,2),this._rankList.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._rankList),this._avatar=s.create(1024,1024,768),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this.addChildAt(this._avatar,5),this._avatar.pos(360,530),this._avatar.avatarRotationY=180,this._avatar.avatarRotationX=0,this._avatar.avatarScale=1,this._avatar.avatarY=0,this._avatar.avatarX=0,this._avatar.visible=this.modelImg.visible=!1},h.prototype.updateView=function(t){void 0===t&&(t=!1),this.tuhaoValText.text=a.YearEndRankModel.instance.tuhao+"";var e,i=a.YearEndRankModel.instance.rank;this.rankValText.text=i?i+"":"未上榜",this.rankValText.color=i?"#168a17":"#FF3e3e";for(var n=0,s=a.YearEndRankModel.instance.rankData;n<s.length;n++){var o=s[n];1==o[4]&&(e=o)}if(this.setList(t),this.hideBtn.selected=a.YearEndRankModel.instance.hiddenState,!e)return this.emptyText.visible=!0,this.vipLevel.visible=this.playerName.visible=this.vipBG.visible=!1,void(this._avatar.visible=this.observationItem.visible=!1);this.emptyText.visible=!1,this.vipLevel.visible=this.observationItem.visible=this._avatar.visible=!e[5],this.modelImg.visible=e[5],this.playerName.visible=this.vipBG.visible=!0,e[5]?this.playerName.text="神秘土豪":(this._avatar.reset((e[9]||1e3)+e[2],e[11],e[10]),this.playerName.text=e[1],this.vipLevel.value="V"+e[8],this.observationItem.data=[[this._avatar,0]])},h.prototype.setList=function(t){var e=[];e.length=r.instance.rankLen;for(var i=0,n=a.YearEndRankModel.instance.rankData;i<n.length;i++){var s=n[i];s[4]<=e.length&&(e[s[4]-1]=s)}var o=this._rankList.scrollPos;this._rankList.datas=e,t||(this._rankList.scrollPos=o)},h.prototype.updateHide=function(){this.hideBtn.selected=a.YearEndRankModel.instance.hiddenState},h.prototype.updateHideScorl=function(){if(a.YearEndRankModel.instance.hiddenState)for(var t=0,e=a.YearEndRankModel.instance.rankData;t<e.length;t++){var i=e[t];if(i[0]==n.player.PlayerModel.instance.actorId)return void this._rankList.scrollToIndex(i[4]-1)}},h.prototype.updateTime=function(){var t=r.instance.endTime;t<GlobalData.serverTime?(this.timeText.text="已结束",this.timeText.color="#ff3e3e"):(this.timeText.text=CommonUtil.timeStampDDHHMMToHHMMSS(t),this.timeText.color="#50ff28")},h.prototype.goRechargeBtnHandler=function(){WindowManager.instance.open(111)},h.prototype.helpBtnHandler=function(){var t=r.instance.helpCfg;t&&CommonUtil.alertHelp(t[1])},h.prototype.hideBtnHandler=function(){GlobalData.serverTime-this.changeTime<6e4?o.instance.addNotice("操作过于频繁，请稍后再试",!0):(this.hideBtn.selected=!this.hideBtn.selected,this.changeTime=GlobalData.serverTime,a.YearEndRankCtrl.instance.updateHide(this.hideBtn.selected))},l=h,a.YearEndRankPanel=l}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h;function p(){return null!==i&&i.apply(this,arguments)||this}e=t.yearEndRank||(t.yearEndRank={}),n=ui.YearEndRankAwardViewUI,s=t.common.AvatarClip,o=t.common.SimpleList,a=t.common.BtnGroup,r=t.config.YearEndRankCfg,l=t.config.ExteriorCfg,i=n,__extends(p,i),p.prototype.close=function(){i.prototype.close.call(this),this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),Laya.timer.clear(this,this.updateTime)},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime(),this._btnGroup.selectedIndex=0,this.modelImg.y=366,this.setModel(),this.updateView(),this.setList()},p.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._rankList=o.create(e.YearEndRankAwardItem,624,150,1,1,0,2),this._rankList.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._rankList),this._btnGroup=new a,this._btnGroup.setBtns(this.rankAwardBtn,this.dianfengAwardBtn),this._avatar=s.create(1024,1024,1024),this.addChildAt(this._avatar,5),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this._avatar.centerX=0,this._avatar.y=475},p.prototype.setModel=function(){var t=r.instance.getAwardModelCfgById(99901);if(1==t[2]){this._avatar.reset(t[1]);var e=l.instance.getCfgById(t[1]);this._avatar.avatarRotationX=e[6],this._avatar.avatarRotationY=e[7],this._avatar.avatarScale=e[10]||1,this._avatar.avatarY=e[9],this._avatar.avatarX=e[8],this.observationItem.data=[[this._avatar,Math.round(t[1]/1e3)]],this.modelImg.visible=!1}else this.modelImg.skin="nian_end_happy/"+t[1]+".png",this._avatar.visible=this.observationItem.visible=!1;if(this._avatar.visible=this.observationItem.visible=1==t[2],this.modelImg.visible=!this._avatar.visible,t[3]){var i=1==t[2]?this._avatar:this.modelImg;this._tweenJS=TweenJS.create(i).to({y:i.y-20},1e3).start().yoyo(!0).repeat(99999999)}},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupChangedHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()}),this.onAutoGlobalEvt("YEAR_END_RANK_UPDATE",this,this.updateView),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler)},p.prototype.updateView=function(){this.tuhaoValText.text=e.YearEndRankModel.instance.tuhao+"";var t=e.YearEndRankModel.instance.rank;this.rankValText.text=t?t+"":"未上榜",this.rankValText.color=t?"#168a17":"#FF3e3e"},p.prototype.setList=function(){for(var t=[],e=r.instance,i=0,n=e.rankCfg;i<n.length;i++){var s=n[i];t.push({type:1,cfg:s})}for(var o=0,a=e.luckyCfg;o<a.length;o++)s=a[o],t.push({type:2,cfg:s});t.push({type:3,cfg:e.joinCfg[0]}),this._rankList.datas=t},p.prototype.updateTime=function(){var t=r.instance.endTime;t<GlobalData.serverTime?(this.timeText.text="已结束",this.timeText.color="#ff3e3e"):(this.timeText.text=CommonUtil.timeStampDDHHMMToHHMMSS(t),this.timeText.color="#50ff28")},p.prototype.destroy=function(t){void 0===t&&(t=!0),this._rankList=this.destroyElement(this._rankList),this._avatar=this.destroyElement(this._avatar),this.observationItem=this.destroyElement(this.observationItem),this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),i.prototype.destroy.call(this,t)},p.prototype.btnGroupChangedHandler=function(){1==this._btnGroup.selectedIndex&&WindowManager.instance.open(1521)},p.prototype.helpBtnHandler=function(){var t=r.instance.helpCfg;t&&CommonUtil.alertHelp(t[2])},h=p,e.YearEndRankAwardPanel=h}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h;function p(){return null!==i&&i.apply(this,arguments)||this}e=t.yearEndRank||(t.yearEndRank={}),n=ui.YearEndDianfengAwardViewUI,s=t.common.AvatarClip,o=t.common.SimpleList,a=t.common.BtnGroup,r=t.config.YearEndRankCfg,l=t.config.ExteriorCfg,i=n,__extends(p,i),p.prototype.close=function(){i.prototype.close.call(this),this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),Laya.timer.clear(this,this.updateTime)},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime(),this._btnGroup.selectedIndex=1,this.modelImg.y=366,this.setModel(),this.updateView(),this.setList()},p.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._rankList=o.create(e.YearEndDianfengAwardItem,624,150,1,1,0,2),this._rankList.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._rankList),this._avatar=s.create(1024,1024,1024),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this.addChildAt(this._avatar,3),this._btnGroup=new a,this._btnGroup.setBtns(this.rankAwardBtn,this.dianfengAwardBtn)},p.prototype.setModel=function(){var t=r.instance.getAwardModelCfgById(99902);if(1==t[2]){this._avatar.pos(80,260);var e=l.instance.getCfgById(t[1]);this._avatar.reset(t[1]),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this._avatar.centerX=0,this._avatar.rotation=-15,this._avatar.avatarScale=1.8,this._avatar.avatarRotationX=e[6],this._avatar.avatarRotationY=e[7],this._avatar.avatarY=0,this._avatar.avatarX=-30,this.observationItem.data=[[this._avatar,Math.round(t[1]/1e3)]],this.modelImg.visible=!1}else this.modelImg.skin="nian_end_happy/"+t[1]+".png",this._avatar.visible=this.observationItem.visible=!1;if(this._avatar.visible=this.observationItem.visible=1==t[2],this.modelImg.visible=!this._avatar.visible,t[3]){var i=1==t[2]?this._avatar:this.modelImg;this._tweenJS=TweenJS.create(i).to({y:i.y-20},1e3).start().yoyo(!0).repeat(99999999)}},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupChangedHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()}),this.onAutoGlobalEvt("YEAR_END_RANK_UPDATE",this,this.updateView),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler)},p.prototype.updateView=function(){this.tuhaoValText.text=e.YearEndRankModel.instance.tuhao+"";var t=e.YearEndRankModel.instance.rank;this.rankValText.text=t?t+"":"未上榜",this.rankValText.color=t?"#168a17":"#FF3e3e"},p.prototype.setList=function(){this._rankList.datas=r.instance.extraCfg},p.prototype.updateTime=function(){var t=r.instance.endTime;t<GlobalData.serverTime?(this.timeText.text="已结束",this.timeText.color="#ff3e3e"):(this.timeText.text=CommonUtil.timeStampDDHHMMToHHMMSS(t),this.timeText.color="#50ff28")},p.prototype.destroy=function(t){void 0===t&&(t=!0),this._rankList=this.destroyElement(this._rankList),this._avatar=this.destroyElement(this._avatar),this.observationItem=this.destroyElement(this.observationItem),this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),i.prototype.destroy.call(this,t)},p.prototype.btnGroupChangedHandler=function(){0==this._btnGroup.selectedIndex&&WindowManager.instance.open(1522)},p.prototype.helpBtnHandler=function(){var t=r.instance.helpCfg;t&&CommonUtil.alertHelp(t[3])},h=p,e.YearEndDianfengAwardPanel=h}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="nian_end_happy/image_nzkh_01.jpg",t}e=t.nian_end_happy_daily||(t.nian_end_happy_daily={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.NianEndHappyDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.openFestivalType},enumerable:!0,configurable:!0}),n=s,e.NianEndHappyDailyRewardPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.titleTxt.text="年终累充",t.bgImg.skin="nian_end_happy/image_nzkh_02.jpg",t}e=t.nian_end_happy_seven_days_pay||(t.nian_end_happy_seven_days_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.SevenDaysPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.NianEndHappySevenDaysPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.NianEndHappySevenDaysPayItem},o.prototype.getRestTime=function(){return e.NianEndHappySevenDaysPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(1014)},s=o,e.NianEndHappySevenDaysPayPanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("end_party_promot");this._cfgs={};for(var e=0,i=t.length;e<i;e++)this._cfgs[t[e][1]]=t[e]},n.prototype.getCfgById=function(t){return this._cfgs[t]},i=n,e.EndPartyPromotCfg=i}(modules=modules||{}),function(t){var l,i,h,p,e;function n(){return null!==i&&i.apply(this,arguments)||this}l=t.nian_end_one_buy||(t.nian_end_one_buy={}),h=t.config.RechargeCfg,p=t.config.EndPartyPromotCfg,i=ui.NianEndOneBuyUI,__extends(n,i),Object.defineProperty(n.prototype,"endTm",{get:function(){return l.NianEndOneBuyModel.instance.endTm},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"buyState",{get:function(){return l.NianEndOneBuyModel.instance.buyState},enumerable:!0,configurable:!0}),n.prototype.draBuyAward=function(){l.NianEndOneBuyCtrl.instance.getLoginRewardReward(this._promotCfg[2])},n.prototype.initialize=function(){i.prototype.initialize.call(this),this._items=[this.item1,this.item2,this.item3,this.item4,this.item5];for(var t=0,e=this._items.length;t<e;t++)this._items[t].visible=!1;CommonUtil.setHTMLPro(this.timeHtml,"#FFFFFF","SimHei",22,"center"),this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.btn.x-5,this.btn.y-10,!0),this._btnClip.scale(1.3,1.3)},n.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.getHandler),this.onAutoGlobalEvt("DIRECT_EX_UPDATE",this,this.updateView)},n.prototype.close=function(){Laya.timer.clear(this,this.updateView),Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.tweenEffect),this._tween&&(this._tween.stop(),this._tween=null),i.prototype.close.call(this)},n.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.once(5e3,this,this.tweenEffect),this.updateView(),Laya.timer.once(200+this.endTm-GlobalData.serverTime,this,this.updateView),this.setActivitiTime()},n.prototype.tweenEffect=function(){var t=this;this._tween=TweenJS.create(this.bigPrizeBtn).to({rotation:-10},33).onComplete(function(){t._tween.to({rotation:10},66).onComplete(function(){t._tween.to({rotation:0},33).onComplete(function(){Laya.timer.once(5e3,t,t.tweenEffect)}).start()}).start()}).start()},n.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),this.endTm>=GlobalData.serverTime?(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.timeHtml.innerHTML="<span style='color:#ff3e3e'>活动已结束</span>"},n.prototype.activityHandler=function(){this.endTm>=GlobalData.serverTime?this.timeHtml.innerHTML="活动倒计时：<span style='color:#50ff28'>"+CommonUtil.timeStampDDHHMMToHHMMSS(this.endTm)+"</span>":this.timeHtml.innerHTML="<span style='color:#ff3e3e'>活动已结束</span>"},n.prototype.updateView=function(){if(this._promotCfg=this._promotCfg||p.instance.getCfgById(l.NianEndOneBuyModel.instance.cfgId),this._promotCfg){this._btnClip.stop(),this._btnClip.visible=!1;for(var t=0,e=this._promotCfg[6],i=0,n=e.length;i<n;i+=2)this._items[i/2>>0].dataSource=[e[i],e[i+1],0,null],this._items[i/2>>0].visible=!0,this._items[i/2>>0]._nameTxt.visible=!0,t++;var s=100*t+15*(t-1),o=(this.width-s)/2;for(i=0;i<t;i++)this._items[i].x=o+115*i;var a=this._promotCfg[2],r=h.instance.getRecharCfgByIndex(a);this.endTm>GlobalData.serverTime?0===this.buyState?(this.btn.label=r[2]+"元抢购",this.btn.visible=!0,this._btnClip.play(),this._btnClip.visible=!0):1===this.buyState?(this.btn.visible=!0,this._btnClip.play(),this._btnClip.visible=!0,this.btn.label="领取"):2===this.buyState&&(this.btn.visible=!1,this.endImg.visible=!1,this.recImg.visible=!0):(this.btn.visible=!1,this.endImg.visible=!0,this.recImg.visible=!1),this.oldNum.text="原价"+this._promotCfg[7]+"元",this.buyMsc.text="现在抢购可立即返还"+r[6][0][1]+"   , 仙玉不计入每日获取上限"}},n.prototype.getHandler=function(){var t=h.instance.getRecharCfgByIndex(this._promotCfg[2]);0===this.buyState?PlatParams.askPay(t[0],t[2]):1===this.buyState&&this.draBuyAward()},n.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},e=n,l.NianEndHappyOneBuyPanel=e}(modules=modules||{}),function(r){var t,e;function i(){this.init()}t=r.config||(r.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._tab={},this._tab2={},this.arrSceneId=[];var t=GlobalData.getConfig("team_scene");if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i){var n,s=i[0],o=i[1],a=r.common_group.CommonGroupUtil.getTpyeAndLevel(o);n=a[0],a[1],-1===this.arrSceneId.indexOf(s)&&this.arrSceneId.push(s),this._tab[s]||(this._tab[s]=[]),this._tab[s][n]||(this._tab[s][n]=[]),this._tab2[s]||(this._tab2[s]={}),this._tab[s][n].push(i),this._tab2[s][o]=i}}},i.prototype.getCfg=function(t,e){return this._tab2[t][e]},i.prototype.getCfgFirst=function(t){var e=this.getCfgArr(t);return e?e[0][0]:null},i.prototype.getCfgArr=function(t){return this._tab[t].sort(this.sortFun.bind(this))},i.prototype.sortFun=function(t,e){return t[0][4]-e[0][4]},e=i,t.TeamSceneCfg=e}(modules=modules||{}),function(t){var s,n,o,a,e,i;function r(){var t=n.call(this)||this;return t.sceneIdOld=0,t.sceneLevelOld=0,t._maxConH=t.listBox.height,t._lastPos=0,t}s=t.common_group||(t.common_group={}),o=t.config.TeamSceneCfg,a=Laya.Rectangle,e=t.common.SimpleList,n=ui.CommonGroupChangeAlertUI,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this._allCommonGroupChangeItem=new Array,this._list1=e.create(s.CommonGroupChangeItem2,380,100,1),this.listBox1.addChild(this._list1),this._list1.size(381,508)},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("COMMON_GROUP_OPENUPDATE",this,this.updateOpenList),this.onAutoEvt(this.listBox,"mousedown",this,this.downHandler),this.onAutoEvt(this.listBox,"mousewheel",this,this.wheelHandler),this.onAutoEvt(this._list1,"select",this,this.bossSelectHandler1),this.onAutoGlobalEvt("COMMON_GROUP_CHANGE_UI",this,this.showListUI)},r.prototype.showListUI=function(t){var e=o.instance.getCfgArr(s.CommonGroupModel.instance.sceneId),i=s.CommonGroupUtil.getTpyeAndLevelInx(s.CommonGroupModel.instance.sceneLevel)[1];this._list1.datas=e[t],this._list1.selectedIndex=i},r.prototype.bossSelectHandler1=function(){this._list1.selectedIndex},r.prototype.onOpened=function(){if(n.prototype.onOpened.call(this),this.destroyThisCommonGroupChangeItem(),this.setDaLeiItem(),this.updateOpenList(),this.setChangeBtn(),this.sceneIdOld=s.CommonGroupModel.instance.sceneId,this.sceneLevelOld=s.CommonGroupModel.instance.sceneLevel,0===s.CommonGroupModel.instance.sceneId){s.CommonGroupModel.instance.sceneId=o.instance.arrSceneId[0];for(var t=0;t<o.instance.arrSceneId.length;t++){var e=o.instance.arrSceneId[t];if(s.CommonGroupUtil.getIsOpenBySceneID(e,!0,!0,o.instance.getCfgFirst(e)[1])){s.CommonGroupModel.instance.sceneId=e;break}}0===s.CommonGroupModel.instance.sceneId&&(s.CommonGroupModel.instance.sceneId=o.instance.arrSceneId[0]);var i=o.instance.getCfgFirst(s.CommonGroupModel.instance.sceneId);s.CommonGroupModel.instance.sceneLevel=i[1]}else s.CommonGroupUtil.isMyHaveTeam()&&(s.CommonGroupModel.instance.sceneId=s.CommonGroupModel.instance.sceneIdTeam,s.CommonGroupModel.instance.sceneLevel=s.CommonGroupModel.instance.sceneLevelTeam);GlobalData.dispatcher.event("COMMON_GROUP_CLICK",[!0])},r.prototype.setDaLeiItem=function(){for(var t=o.instance.arrSceneId,e=0;e<t.length;e++){var i=t[e];if(i){var n=new s.CommonGroupChangeItem;n.setData([i,e]),this.listBox.addChild(n),this._allCommonGroupChangeItem.push(n)}}},r.prototype.destroyThisCommonGroupChangeItem=function(){for(var t=0;t<this._allCommonGroupChangeItem.length;t++){var e=this._allCommonGroupChangeItem[t];e&&(e.removeSelf(),e.destroy())}this._allCommonGroupChangeItem.length=0},r.prototype.updateOpenList=function(t){void 0===t&&(t=0);for(var e=null,i=0,n=0,s=0;s<this._allCommonGroupChangeItem.length;s++){var o=this._allCommonGroupChangeItem[s];o.y=e?e.y+e.height:0,0!=t&&s===t&&(n=i),i=(e=o).y+o.height}this.setConHeight(i,n)},r.prototype.downHandler=function(){this._lastPos=this.listBox.mouseY,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseup",this,this.upHandler),Laya.stage.on("mouseout",this,this.upHandler)},r.prototype.moveHandler=function(){if(this._isMouseMove){var t=this._lastPos-this.listBox.mouseY;this.scroll(t),this._lastPos=this.listBox.mouseY}},r.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseup",this,this.upHandler),Laya.stage.off("mouseout",this,this.upHandler)},r.prototype.wheelHandler=function(t){var e=-8*t.delta;this._isMouseMove&&this.scroll(e)},r.prototype.setConHeight=function(t,e){void 0===e&&(e=0),this.listBox.height=t;var i=this._maxConH,n=this.listBox.scrollRect;return n?n.setTo(0,0,this.listBox.width,i):n=new a(0,0,this.listBox.width,i),this.listBox.scrollRect=n,0!=e&&(this.listBox.scrollRect.y=e,this.scroll(0)),this._isMouseMove=t>this._maxConH,i},r.prototype.scroll=function(t){var e=this.listBox.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.listBox.height-this._maxConH&&(e.y=this.listBox.height-this._maxConH),this.listBox.scrollRect=e},r.prototype.close1=function(){this.destroyThisCommonGroupChangeItem(),n.prototype.close.call(this)},r.prototype.close=function(){s.CommonGroupModel.instance.sceneId=this.sceneIdOld,s.CommonGroupModel.instance.sceneLevel=this.sceneLevelOld,this.close1()},r.prototype.destroy=function(){this._list1=this.destroyElement(this._list1),n.prototype.destroy.call(this)},r.prototype.okBtnHandler=function(){if(s.CommonGroupUtil.isMyHaveTeam()){if(s.CommonGroupModel.instance.ClearAutomaticMatching(),0!=s.CommonGroupModel.instance.state)return CommonUtil.noticeError(0,"当前处于匹配状态,玩法切换",!0),void this.close1();s.CommonGroupUtil.isOtherTeam([s.CommonGroupUtil.getTeamTypeBySceneId(s.CommonGroupModel.instance.sceneId),s.CommonGroupModel.instance.sceneLevel],!1),this.close1()}else GlobalData.dispatcher.event("COMMON_GROUP_UPDATE_NOT"),this.close1()},r.prototype.setChangeBtn=function(){0===s.CommonGroupModel.instance.sceneId?this.copyTargetText.text="当前目标:无":s.CommonGroupUtil.isMyHaveTeam()?this.copyTargetText.text="当前目标:"+s.CommonGroupUtil.getTextByType([s.CommonGroupModel.instance.teamType,s.CommonGroupModel.instance.sceneLevelTeam]):this.copyTargetText.text="当前目标:"+s.CommonGroupUtil.getTextByType([s.CommonGroupUtil.getTeamTypeBySceneId(s.CommonGroupModel.instance.sceneId),s.CommonGroupModel.instance.sceneLevel])},i=r,s.CommonGroupChangeAlert=i}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._times=5e3,t}e=t.common_group||(t.common_group={}),i=ui.CommonGroupSingleMatchAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1,this.myHeadIcon.type=0},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type1=t},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.close1)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._isTips=!1,this.myNameTxt.text=""+t.player.PlayerModel.instance.roleName,this.myBattleTxt.text=""+CommonUtil.bigNumToString(t.player.PlayerModel.instance.fight),this._times=GlobalData.serverTime,this.setTextUIPos(),Laya.timer.loop(1e3,this,this.updateUI),this.updateUI()},s.prototype.updateUI=function(){var t=Math.round((GlobalData.serverTime-this._times)/1e3);0<t?(this.waitTime.text="("+t+")",this.waitTime.visible=!0,15<=t&&!this._isTips&&(this._isTips=!0,WindowManager.instance.open(1537,this._type1))):(this.waitTime.text="(0)",this.waitTime.visible=!0),this.setTextUIPos()},s.prototype.setTextUIPos=function(){var t=this.waitShowInfo.textWidth+this.waitTime.textWidth,e=(this.matchingBox.width-t)/2;this.waitShowInfo.x=e,this.waitTime.x=this.waitShowInfo.x+this.waitShowInfo.textWidth},s.prototype.close1=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateUI),WindowManager.instance.close(1537),e.CommonGroupCtrl.instance.giveupMatchTeamer()},s.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateUI),WindowManager.instance.close(1537),3!=this._type1&&e.CommonGroupCtrl.instance.giveupMatchTeamer()},n=s,e.CommonGroupSingleMatchAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t._times=1e4,t}e=t.common_group||(t.common_group={}),i=ui.CommonGroupReplaceCopyTargetAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1,CommonUtil.setHTMLPro(this.html1,"#2c476a","SimHei",24,"center")},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.closeBtn&&this.closeBtn.off(Laya.Event.CLICK,this,this.close),this.onAutoClick(this.closeBtn,this,this.cancelBtnHandler)},s.prototype.cancelBtnHandler=function(){this.close1()},s.prototype.okBtnHandler=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.setBtnLable),e.CommonGroupCtrl.instance.AnswerSetType(!0)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._times=1e4+GlobalData.serverTime,this.showUI()},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type1=t},s.prototype.showUI=function(){this._type1&&(Laya.timer.loop(1e3,this,this.setBtnLable),this.setBtnLable(),this.targetText.text="【"+e.CommonGroupUtil.getTextByType(this._type1)+"】")},s.prototype.setBtnLable=function(){if(this._times>GlobalData.serverTime){var t=Math.round((this._times-GlobalData.serverTime)/1e3);this.html1.innerHTML="<span style= 'color:#ff3e3e'>"+t+"s</span>后自动确认"}else this.html1.innerHTML="",this.okBtnHandler()},s.prototype.close1=function(){i.prototype.close.call(this),this._times=0,Laya.timer.clear(this,this.setBtnLable),e.CommonGroupCtrl.instance.kickTeamerEx(PlayerModel.instance.actorId)},n=s,e.CommonGroupReplaceCopyTargetAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.common_group||(t.common_group={}),i=ui.CommonGroupReplaceCopyTargetAlert1UI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.html1,"#2c476a","SimHei",24,"center"),CommonUtil.setHTMLPro(this.html2,"#2c476a","SimHei",24,"center")},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler)},s.prototype.cancelBtnHandler=function(){this.close()},s.prototype.okBtnHandler=function(){this.close(),CommonUtil.whetherInCopy()?CommonUtil.noticeError(0,"当前场景无法切换目标",!0):e.CommonGroupUtil.teammateInCopy()?CommonUtil.noticeError(0,"队伍正在进行副本中,无法切换目标",!0):(e.CommonGroupModel.instance.ClearAutomaticMatching(),e.CommonGroupCtrl.instance.TeamSetType(this._type1))},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.showUI()},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type=[e.CommonGroupModel.instance.teamType,e.CommonGroupModel.instance.sceneLevelTeam],this._type1=t},s.prototype.showUI=function(){null!=this._type&&null!=this._type1&&(this.html1.innerHTML="当前队伍目标为<span style= 'color:#168a17'>【"+e.CommonGroupUtil.getTextByType(this._type)+"】</span>",this.html2.innerHTML="是否切换目标为<span style= 'color:#ff3e3e'>【"+e.CommonGroupUtil.getTextByType(this._type1)+"】</span>？")},n=s,e.CommonGroupReplaceCopyTargetAlert1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.common_group||(t.common_group={}),i=ui.CommonGroupReplaceCopyTargetAlert2UI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.html1,"#2c476a","SimHei",24,"center"),CommonUtil.setHTMLPro(this.html2,"#2c476a","SimHei",24,"center"),CommonUtil.setHTMLPro(this.html3,"#2c476a","SimHei",24,"center"),this.html3.innerHTML="是否退出队伍?",this.closeOnSide=!1},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler)},s.prototype.cancelBtnHandler=function(){this.close()},s.prototype.okBtnHandler=function(){this.close(),e.CommonGroupCtrl.instance.kickTeamerEx(PlayerModel.instance.actorId)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.showUI()},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type=[e.CommonGroupModel.instance.teamType,e.CommonGroupModel.instance.sceneLevelTeam],this._type1=t},s.prototype.showUI=function(){this.html1.innerHTML="当前队伍为<span style= 'color:#168a17'>【"+e.CommonGroupUtil.getTextByType(this._type)+"】</span>组队等待状态",0===this._type1[0]?this.html2.innerHTML="进入需要退出队伍":this.html2.innerHTML="进入<span style= 'color:#ff3e3e'>【"+e.CommonGroupUtil.getTextByType(this._type1)+"】</span>需要退出队伍"},n=s,e.CommonGroupReplaceCopyTargetAlert2=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.common_group||(t.common_group={}),i=ui.CommonGroupReplaceCopyTargetAlert3UI,__extends(s,i),s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type1=t},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler)},s.prototype.cancelBtnHandler=function(){this.close()},s.prototype.okBtnHandler=function(){this.close(),e.CommonGroupUtil.isOpenTeamWin(this._type1)},n=s,e.CommonGroupReplaceCopyTargetAlert3=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t._times=1e4,t}e=t.common_group||(t.common_group={}),i=ui.CommonGroupReplaceCopyTargetAlert4UI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1,CommonUtil.setHTMLPro(this.html1,"#2c476a","SimHei",24,"center"),CommonUtil.setHTMLPro(this.html2,"#2c476a","SimHei",24,"center"),this.html2.innerHTML="是否确定前往?"},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.closeBtn&&this.closeBtn.off(Laya.Event.CLICK,this,this.close),this.onAutoClick(this.closeBtn,this,this.cancelBtnHandler)},s.prototype.cancelBtnHandler=function(){this.close1()},s.prototype.okBtnHandler=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.setBtnLable),e.CommonGroupCtrl.instance.teamEnterScene()},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._times=1e4+GlobalData.serverTime,this.showUI()},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type1=t,this.html1.innerHTML="队伍正在进行<span style= 'color:#168a17'>【"+e.CommonGroupUtil.getTextByType(this._type1)+"】</span>"},s.prototype.showUI=function(){this._type1&&(Laya.timer.loop(1e3,this,this.setBtnLable),this.setBtnLable())},s.prototype.setBtnLable=function(){if(this._times>GlobalData.serverTime){var t=Math.round((this._times-GlobalData.serverTime)/1e3);this.cancelBtn.label="取消("+t+")"}else this.cancelBtn.label="取消",this.cancelBtnHandler()},s.prototype.close1=function(){i.prototype.close.call(this),this._times=0,Laya.timer.clear(this,this.setBtnLable)},n=s,e.CommonGroupReplaceCopyTargetAlert4=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.common_group||(t.common_group={}),i=ui.CommonGroupReplaceCopyTargetAlert4UI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1,CommonUtil.setHTMLPro(this.html1,"#2c476a","SimHei",24,"center"),CommonUtil.setHTMLPro(this.html2,"#2c476a","SimHei",24,"center"),this.html2.innerHTML="是否确认加入?",this.okBtn.label="确定"},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.closeBtn&&this.closeBtn.off(Laya.Event.CLICK,this,this.close),this.onAutoClick(this.closeBtn,this,this.cancelBtnHandler)},s.prototype.cancelBtnHandler=function(){this.close1(),t.teamInvite.TeamInviteModel.instance.delInvite(t.teamInvite.TeamInviteModel.instance.curInvite)},s.prototype.okBtnHandler=function(){i.prototype.close.call(this),t.common_group.CommonGroupCtrl.instance.answerInviteEx(this._type1[2],1,0,this._type1[0],this._type1[1])},s.prototype.onOpened=function(){i.prototype.onOpened.call(this)},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type1=t,this.html1.innerHTML="队伍目标已变更为<span style= 'color:#168a17'>【"+e.CommonGroupUtil.getTextByType([this._type1[0],this._type1[1]])+"】</span>"},s.prototype.close1=function(){i.prototype.close.call(this)},n=s,e.CommonGroupReplaceCopyTargetAlert5=n}(modules=modules||{}),function(M){var w,e,t,i,E,n,s,o;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectedIndexNum=0,t._isUpdate=!0,t._selectedIndexNum1=0,t._endTmAward=0,t._endTmCopy=0,t._oldIdx=0,t}w=M.common_group||(M.common_group={}),t=M.config.TeamSceneCfg,i=M.common.BtnGroup,E=M.common.CustomClip,n=M.common.SimpleList,s=M.notice.SystemNoticeManager,e=ui.CommonGroupRoomViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._listTeam=n.create(w.CommonGroupTeamItem,648,177),this._listTeam.size(648,699),this._listTeam.spaceY=5,this.listBox1.addChild(this._listTeam),this._allPlayerInfoItem=[this.groupPlayerInfoItem1,this.groupPlayerInfoItem2,this.groupPlayerInfoItem3],this.creatEffect(),CommonUtil.setHTMLPro(this.html1,"#2c476a","SimHei",24,"center"),CommonUtil.setHTMLPro(this.html2,"#2c476a","SimHei",24,"center"),CommonUtil.setHTMLPro(this.html3,"#2c476a","SimHei",24,"center"),CommonUtil.setHTMLPro(this.html4,"#2c476a","SimHei",24,"center"),this._list=n.create(w.CommonGroupToaApplyForItem,560,112),this._list.size(560,629),this._list.spaceY=5,this.listBox.addChild(this._list),this._btnGroupUIChange=new i,this._btnGroupUIChange.setBtns(this.btn3,this.btn4,this.btn5)},a.prototype.onEvt=function(){var t=this;e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,function(){w.CommonGroupUtil.isMyHaveTeam()||(t._btnGroupUIChange.selectedIndex=0)}),this.onAutoGlobalEvt("COMMON_GROUP_UPDATE_TEAM",this,function(){w.CommonGroupUtil.isMyHaveTeam()&&(t._btnGroupUIChange.selectedIndex=1)}),this.onAutoClick(this.updateBtn,this,this.updateBtnHandler),this.onAutoClick(this.btnMyTeamBtn,this,this.btnMyTeamBtnHandler),this.onAutoClick(this.btn8,this,this.btn8Andbtn9Handler,[0]),this.onAutoClick(this.btn9,this,this.btn8Andbtn9Handler,[1]),this.onAutoClick(this.autoAcceptBtn,this,this.autoAcceptBtnHandler),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.setUI1),this.onAutoGlobalEvt("GET_TEAM_LIST_REPLY",this,this.setUI1),this.onAutoGlobalEvt("FORBIDDEN_BOSS_STAGE_UPDATE",this,this.setUI1),this.onAutoGlobalEvt("FORBIDDEN_BOSS_STAGE_UPDATE1",this,this.setUI1),this.onAutoGlobalEvt("GET_TEAM_LIST",this,this.GetTeamList),this.onAutoClick(this.btn1,this,this.btn1Andbtn2Handler,[0]),this.onAutoClick(this.btn2,this,this.btn1Andbtn2Handler,[1]),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.automaticMatchingBtn,this,this.automaticMatchingBtnHandler),this.onAutoClick(this.automaticPlayerBtn,this,this.automaticPlayerBtnHandler),this.onAutoClick(this.genSuiBtn,this,this.genSuiBtnClick),this.onAutoClick(this.addBtn,this,this.addBtnClick),this.onAutoClick(this.addBtn1,this,this.addBtn1Click),this.onAutoClick(this.autoBtn,this,this.autoHandler),this.onAutoClick(this.autoPassBtn,this,this.autoPassBtnHandler),this.onAutoClick(this.tipsbtn,this,this.tipsHanlder),this.onAutoClick(this.chanllgeCBtn,this,this.setOneKeychangeHandler),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.setUI2),this.onAutoGlobalEvt("DRAW_GOD_DEVIL_REWARD_REPLY",this,this.setUI2),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.setUI2),this.onAutoGlobalEvt("UPDAT_ETEAM_STATEEX_UPDATE",this,this.btnUIUpdate),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.btnUIUpdate),this.onAutoGlobalEvt("TEAM_BATTLE_TIMES_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("GET_EMPTY_INFO_REPLY",this,this.setCopyTipsUI),this.onAutoGlobalEvt("SPIRIT_DUNGEON_SPIRIT_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("SPIRIT_DUNGEON_AUTO_USE_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("DIVINATORY_BOSS_DILL",this,this.setCopyTipsUI),this.onAutoGlobalEvt("OUTSIDE_SHOW_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("WELFARE_DUNGEON_INFO_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("DRAW_GOD_DEVIL_REWARD_REPLY",this,this.setCopyTipsUI),this.onAutoGlobalEvt("FORBIDDEN_BOSS_STAGE_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("FORBIDDEN_BOSS_STAGE_UPDATE1",this,this.setCopyTipsUI),this.onAutoGlobalEvt("GET_FACTION_WAR_MATCH_INFO_REPLY",this,this.setCopyTipsUI),this.onAutoGlobalEvt("GET_FACTION_WAR_SCHEDULE_REPLY",this,this.setCopyTipsUI),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("UPDATE_PRIVILEGE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("FORBIDDEN_BOSS_STAGE_UPDATE",this,this.setCopyTipsUI),this.onAutoGlobalEvt("FORBIDDEN_BOSS_STAGE_UPDATE1",this,this.setCopyTipsUI),this.onAutoGlobalEvt("HOLO_HELPER_SET_UPDATE",this,this.setCopyTipsUI),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyHandler),this.regAutoRP(this.applyRP,["teaminvastion"]),this.onAutoGlobalEvt("GET_APPLICATIONS_EXREPLY_UPDATE",this,this.setUI3),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.setUI3),this.onAutoEvt(this._btnGroupUIChange,"change",this,this.btnGroupUIChangeHandler),this.onAutoClick(this.copyTargetBox,this,this.thangeClickFun),this.onAutoGlobalEvt("KICK_TEAMER_EX_REPLY",this,function(){WindowManager.instance.close(12),t._btnGroupUIChange.selectedIndex=0}),this.onAutoGlobalEvt("CLOSE_ROOM_ALST",this,function(){WindowManager.instance.close(12)}),this.onAutoGlobalEvt("SCENE_ENTER",this,this.setChangeBtn),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.setChangeBtn),this.onAutoGlobalEvt("COMMON_GROUP_UPDATE_NOT",this,this.updateNot),this.onAutoGlobalEvt("GET_TEAM_SET_INFO_REPLY",this,this.setAutoUI),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.GetTeamSetInfo)},a.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clearAll(this)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.titleTxt.text="组队",this.onOpenedFun()},a.prototype.onOpenedFun=function(){this.clearPlayerUI(),this._isUpdate=!0,WindowManager.instance.close(1533),WindowManager.instance.close(355),w.CommonGroupCtrl.instance.fetchTeamEx(),w.CommonGroupCtrl.instance.getApplicationsEx(),Laya.timer.loop(1e3,this,this.btnUIUpdate),this.btnUIUpdate(),this.setOpenUI(),this.setChangeBtn()},a.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._teamType=t,this.stratUI()},a.prototype.stratUI=function(){this._teamType?w.CommonGroupUtil.isMyHaveTeam()?(w.CommonGroupModel.instance.sceneId=w.CommonGroupModel.instance.sceneIdTeam,w.CommonGroupModel.instance.sceneLevel=w.CommonGroupModel.instance.sceneLevelTeam):(w.CommonGroupModel.instance.sceneId=w.CommonGroupUtil.getSceneIdByTeamType(this._teamType),w.CommonGroupModel.instance.sceneLevel=t.instance.getCfgFirst(w.CommonGroupModel.instance.sceneId)[1]):w.CommonGroupUtil.isMyHaveTeam()?(w.CommonGroupModel.instance.sceneId=w.CommonGroupModel.instance.sceneIdTeam,w.CommonGroupModel.instance.sceneLevel=w.CommonGroupModel.instance.sceneLevelTeam,this._teamType=w.CommonGroupUtil.getTeamTypeBySceneId(w.CommonGroupModel.instance.sceneId)):0!=w.CommonGroupModel.instance.sceneId&&(this._teamType=w.CommonGroupUtil.getTeamTypeBySceneId(w.CommonGroupModel.instance.sceneId))},a.prototype.getTeamType=function(){return w.CommonGroupUtil.isMyHaveTeam()?w.CommonGroupModel.instance.teamType:this._teamType},a.prototype.updateNot=function(){w.CommonGroupUtil.isMyHaveTeam()||(this._teamType=w.CommonGroupUtil.getTeamTypeBySceneId(w.CommonGroupModel.instance.sceneId),this.onOpenedFun())},a.prototype.btnGroupUIChangeHandler=function(){-1!==this._btnGroupUIChange.selectedIndex&&(this.uiBox1.visible=0===this._btnGroupUIChange.selectedIndex,this.uiBox2.visible=1===this._btnGroupUIChange.selectedIndex,this.uiBox3.visible=2===this._btnGroupUIChange.selectedIndex,this.updateUI(),this._oldIdx=this._btnGroupUIChange.selectedIndex)},a.prototype.updateUI=function(){switch(this._btnGroupUIChange.selectedIndex){case 0:this._scrollPosOld1=this._listTeam.scrollPos=0,this.GetTeamList(),this.setCopyTipsCtrl(),this.setUI1();break;case 1:w.CommonGroupUtil.isMyHaveTeam()?(this.setCopyTipsCtrl(),this.setUI2()):this.isTipsFun();break;case 2:w.CommonGroupUtil.isMyHaveTeam()?w.CommonGroupModel.instance.isHomeowners?(w.CommonGroupCtrl.instance.getApplicationsEx(),this.setUI3()):(CommonUtil.noticeError(0,"只有队长可查看申请列表"),this._btnGroupUIChange.selectedIndex=this._oldIdx):this.isTipsFun()}this.setChangeBtn()},a.prototype.setOpenUI=function(){w.CommonGroupUtil.isMyHaveTeam()?w.CommonGroupModel.instance.isHomeowners?this._btnGroupUIChange.selectedIndex=M.redPoint.RedPointCtrl.instance.getRPProperty("teaminvastion")?2:1:this._btnGroupUIChange.selectedIndex=1:this._btnGroupUIChange.selectedIndex=0},a.prototype.setUI1=function(){var e=this;if(0===this._btnGroupUIChange.selectedIndex){this.setAutoUI(),this.btnMyTeamBtn.label=w.CommonGroupUtil.isMyHaveTeam()?"退出队伍":"创建";var t=function(t){e.BossForbiddenLvText.visible=!1,e.box1.visible=t,e.img2.height=t?687:744,e.img2.y=t?234:177,e.listBox1.height=t?659:716,e.listBox1.y=t?248:191,e._listTeam.height=t?659:716,e.listBox1.addChild(e._listTeam)};this.isModeTeamType()?w.CommonGroupUtil.isMyHaveTeam()?(0===w.CommonGroupModel.instance.teamMode?this._selectedIndexNum=0:1===w.CommonGroupModel.instance.teamMode&&(this._selectedIndexNum=1),t(w.CommonGroupModel.instance.isHomeowners)):(this._selectedIndexNum=this._selectedIndexNum,t(!0)):8===this.getTeamType()?(t(!0),this.box1.visible=!1,this.setBossForbiddenLvText()):(this._selectedIndexNum=0,t(!1)),this.autoAcceptBtn.visible=this.autoAcceptText.visible=!w.CommonGroupUtil.isMyHaveTeam(),this.setUI1Btn()}},a.prototype.setUI3=function(){2===this._btnGroupUIChange.selectedIndex&&(this.BossForbiddenLvText.visible=!1,this.setBossForbiddenLvText(),this._list.datas=w.CommonGroupModel.instance.membersApplications,this.noImg.visible=this.noTxt.visible=0===w.CommonGroupModel.instance.membersApplications.length)},a.prototype.GetTeamList=function(){0!=w.CommonGroupModel.instance.sceneId&&w.CommonGroupCtrl.instance.GetTeamList(this.getTeamType(),w.CommonGroupModel.instance.sceneLevel)},a.prototype.updateBtnHandler=function(){if(0===w.CommonGroupModel.instance.sceneId)return CommonUtil.whetherInCopy()?void CommonUtil.noticeError(0,"没有队伍目标",!0):void this.createTeamTargetEx();this._isUpdate?(this._isUpdate=!1,this.GetTeamList(),CommonUtil.noticeError(0,"刷新成功"),Laya.timer.once(5e3,this,this.setBoll)):s.instance.addNotice("操作过于频繁",!0)},a.prototype.setBoll=function(){this._isUpdate=!0},a.prototype.btnMyTeamBtnHandler=function(){if(w.CommonGroupUtil.isMyHaveTeam())w.CommonGroupModel.instance.kickTeamerEx();else if(0===w.CommonGroupModel.instance.sceneId){if(CommonUtil.whetherInCopy())return void CommonUtil.noticeError(0,"当前场景无法创建队伍",!0);this.createTeamTargetEx()}else{if(CommonUtil.whetherInCopy()&&!w.CommonGroupUtil.isPublicScene(M.scene.SceneUtil.currScene))return void CommonUtil.noticeError(0,"当前场景无法创建队伍",!0);this.createTeamExFun()}},a.prototype.createTeamExFun=function(){if(this.isModeTeamType()){var t=1===this._selectedIndexNum?1:0;w.CommonGroupCtrl.instance.createTeamEx(this.getTeamType(),t,w.CommonGroupModel.instance.sceneLevel)}else w.CommonGroupCtrl.instance.createTeamEx(this.getTeamType(),0,w.CommonGroupModel.instance.sceneLevel)},a.prototype.btn8Andbtn9Handler=function(t){CommonUtil.whetherInCopy()?CommonUtil.noticeError(0,"副本中无法切换",!0):w.CommonGroupUtil.teammateInCopy()?CommonUtil.noticeError(0,"队伍正在进行副本,无法操作",!0):(this._selectedIndexNum=t,this.GetTeamList(),this.btn8Andbtn9Update(),this.setUI1Btn())},a.prototype.btn8Andbtn9Update=function(){if(this.isModeTeamType()&&w.CommonGroupUtil.isMyHaveTeam()){if(w.CommonGroupModel.instance.isHomeowners){if(0===this._selectedIndexNum)w.CommonGroupCtrl.instance.teamSetMode(0);else if(1===this._selectedIndexNum){if(-1===M.warband.WarbandModel.instance.leaderId)return s.instance.addNotice("加入战队后可选择战队模式",!0),void(this._selectedIndexNum=0);w.CommonGroupModel.instance.isAutomaticMatching=w.CommonGroupModel.instance.isAutomaticPlayer=!1,w.CommonGroupCtrl.instance.teamSetMode(1)}w.CommonGroupCtrl.instance.getApplicationsEx()}}else if(-1===M.warband.WarbandModel.instance.leaderId&&1===this._selectedIndexNum)return s.instance.addNotice("加入战队后可选择战队模式",!0),void(this._selectedIndexNum=0)},a.prototype.isModeTeamType=function(){var t=this.getTeamType();return 2===t||4===t},a.prototype.setUI1Btn=function(){function t(t){var e=w.CommonGroupModel.instance.getTeamAll(t);i._scrollPosOld1=i._listTeam.scrollPos,i._listTeam.datas=e,i._listTeam.scrollPos=i._scrollPosOld1,i.noImg1.visible=i.noTxt1.visible=0===e.length}var i=this;this.isModeTeamType()&&w.CommonGroupUtil.isMyHaveTeam()?t(w.CommonGroupModel.instance.teamMode):0===this._selectedIndexNum?t(0):1===this._selectedIndexNum&&t(1),this.btn8.selected=0===this._selectedIndexNum,this.btn9.selected=1===this._selectedIndexNum},a.prototype.automaticMatchingBtnHandler=function(){w.CommonGroupUtil.isMyHaveTeam()&&(w.CommonGroupUtil.teammateInCopy()?CommonUtil.noticeError(0,"队伍正在进行副本,无法操作",!0):(w.CommonGroupModel.instance.isAutomaticMatching=!w.CommonGroupModel.instance.isAutomaticMatching,this.automaticMatchingBtn.selected=w.CommonGroupModel.instance.isAutomaticMatching,w.CommonGroupCtrl.instance.setAutomaticMatchingBtn()))},a.prototype.mateTeamerEx=function(t){w.CommonGroupUtil.teammateInCopy()?CommonUtil.noticeError(0,"队伍正在进行副本,无法自动匹配",!0):w.CommonGroupCtrl.instance.mateTeamerEx(t)},a.prototype.automaticPlayerBtnHandler=function(){if(w.CommonGroupUtil.teammateInCopy())CommonUtil.noticeError(0,"队伍正在进行副本,无法操作",!0);else if(w.CommonGroupUtil.isMyHaveTeam()){if(1===this.getTeamType()){if(!M.faerie_demon.FaerieDemonModel.instance.isHaveNum()&&!M.faerie_demon.FaerieDemonModel.instance.isHaveNum1())return w.CommonGroupModel.instance.isAutomaticPlayer=!1,this.automaticPlayerBtn.selected=w.CommonGroupModel.instance.isAutomaticPlayer,void CommonUtil.noticeError(0,"奖励次数/助战次数均已用尽",!0);w.CommonGroupUtil.isOpenTeamScene(38)||CommonUtil.noticeError(0,"活动未开启",!0)}w.CommonGroupModel.instance.isAutomaticPlayer=!w.CommonGroupModel.instance.isAutomaticPlayer,this.automaticPlayerBtn.selected=w.CommonGroupModel.instance.isAutomaticPlayer,w.CommonGroupCtrl.instance.setAutomaticPlayerBtn()}},a.prototype.setMatchingEffect=function(){if(E.thisStop(this._matching_effect),1===w.CommonGroupModel.instance.state){var t=this.getTeamType();1!==t&&3!==t&&2!==t&&4!==t||E.thisPlay(this._matching_effect)}},a.prototype.btn1Andbtn2Handler=function(t){if(CommonUtil.whetherInCopy())CommonUtil.noticeError(0,"副本中无法切换",!0);else if(w.CommonGroupUtil.isMyHaveTeam())if(w.CommonGroupUtil.teammateInCopy())CommonUtil.noticeError(0,"队伍正在进行副本,无法操作",!0);else{if(this.isModeTeamType()&&w.CommonGroupModel.instance.isHomeowners){if(0===t)w.CommonGroupCtrl.instance.teamSetMode(0);else if(1===t){if(-1===M.warband.WarbandModel.instance.leaderId)return s.instance.addNotice("加入战队后可选择战队模式",!0),void(this._selectedIndexNum1=0);w.CommonGroupModel.instance.isAutomaticMatching=w.CommonGroupModel.instance.isAutomaticPlayer=!1,w.CommonGroupCtrl.instance.teamSetMode(1)}w.CommonGroupCtrl.instance.getApplicationsEx()}this._selectedIndexNum1=t,this.btn1Andbtn2Update()}},a.prototype.btn1Andbtn2Update=function(){this.btn1.selected=0===this._selectedIndexNum1,this.btn2.selected=1===this._selectedIndexNum1},a.prototype.setTeamMode=function(){this.isModeTeamType()&&w.CommonGroupModel.instance.isHomeowners&&(0===w.CommonGroupModel.instance.teamMode?this._selectedIndexNum1=0:1===w.CommonGroupModel.instance.teamMode&&(this._selectedIndexNum1=1),this.btn1Andbtn2Update())},a.prototype.btnHandler=function(){if(CommonUtil.whetherInCopy())CommonUtil.noticeError(0,"正在场景中",!0);else if(w.CommonGroupUtil.isMyHaveTeam()){var t=this.getTeamType();w.CommonGroupUtil.teammateInCopy()?w.CommonGroupUtil.isPublicScene(w.CommonGroupUtil.getSceneTypeExByTeamType(t))?w.CommonGroupCtrl.instance.teamEnterScene():CommonUtil.noticeError(0,"队伍正常进行副本,无法操作",!0):0===w.CommonGroupModel.instance.state?1===t?3===w.CommonGroupModel.instance.members.length?M.faerie_demon.FaerieDemonCtrl.instance.mateTeamEnemyEx():w.CommonGroupCtrl.instance.mateTeamerEx(t):this.isModeTeamType()?w.CommonGroupCtrl.instance.twoConfirmation():3===t?3===w.CommonGroupModel.instance.members.length?w.CommonGroupCtrl.instance.twoConfirmation():w.CommonGroupCtrl.instance.mateTeamerEx(t):w.CommonGroupCtrl.instance.teamEnterScene():1===w.CommonGroupModel.instance.state&&(1===t||3===t?(w.CommonGroupModel.instance.isAutomaticMatching=!1,w.CommonGroupCtrl.instance.giveupMatchTeamer()):this.isModeTeamType()&&w.CommonGroupCtrl.instance.twoConfirmation())}},a.prototype.isPlayerBtnClipFun=function(){if(CommonUtil.whetherInCopy())E.thisStop(this._btnClip);else{var t=!1;switch(this.getTeamType()){case 3:t=0<M.teamBattle.TeamBattleModel.Instance.remainTimes;break;case 1:w.CommonGroupUtil.isOpenTeamScene(38)&&(M.faerie_demon.FaerieDemonModel.instance.isHaveNum()||M.faerie_demon.FaerieDemonModel.instance.isHaveNum1())&&(t=!0);break;case 2:t=0<M.nothingness_world.NothingnessWorldModel.instance.nowChallengeNum;break;case 4:t=0<M.nether_world.NetherWorldModel.instance.nowChallengeNum;break;case 10:t=3===M.union_war.UnionWarModel.instance.getWarCopyState();break;case 9:if(M.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!1)){var e=M.welfare_place.WelfarePlaceModel.instance.dungeonInfo,i=e[0],n=e[1];t=100<i||100<n}}t?this._btnClip.visible||E.thisPlay(this._btnClip):E.thisStop(this._btnClip)}},a.prototype.btnUIUpdate=function(){if(this.automaticMatchingBtn.selected=w.CommonGroupModel.instance.isAutomaticMatching,this.automaticPlayerBtn.selected=w.CommonGroupModel.instance.isAutomaticPlayer,w.CommonGroupUtil.isMyHaveTeam()){var t=this.getTeamType();if(0===w.CommonGroupModel.instance.state){this.isPlayerBtnClipFun();var e=w.CommonGroupModel.instance.isAutomaticPlayer&&w.CommonGroupModel.instance._times>GlobalData.serverTime,i=3===w.CommonGroupModel.instance.members.length&&e,n=Math.round((w.CommonGroupModel.instance._times-GlobalData.serverTime)/1e3);1===t||3===t?3===w.CommonGroupModel.instance.members.length?this.btn.label=e?"开始战斗("+n+")":3===t?"进入挑战":"开始战斗":this.btn.label="快速匹配":this.isModeTeamType()?this.btn.label=i?"进入挑战("+n+")":"进入挑战":8===t?this.btn.label=i?"开启活动("+n+")":"开启活动":w.CommonGroupUtil.isPublicScene(w.CommonGroupUtil.getSceneTypeExByTeamType(t))&&(this.btn.label=i?"进入("+n+")":"进入")}else 1===w.CommonGroupModel.instance.state?1===t||3===t?(this.btn.label="取消",E.thisStop(this._btnClip)):this.isModeTeamType()?(this.isPlayerBtnClipFun(),this.btn.label="进入挑战"):w.CommonGroupUtil.isPublicScene(w.CommonGroupUtil.getSceneTypeExByTeamType(t))&&(this.isPlayerBtnClipFun(),this.btn.label="进入"):(E.thisStop(this._btnClip),1===t||3===t?this.btn.label=3===t?"进入挑战":"开始战斗":this.isModeTeamType()?this.btn.label="进入挑战":8===t?this.btn.label="开启活动":w.CommonGroupUtil.isPublicScene(w.CommonGroupUtil.getSceneTypeExByTeamType(t))&&(this.btn.label="进入"));this.setMatchingEffect(),this.setAut(),this.automaticMatchingBtn.selected=w.CommonGroupModel.instance.isAutomaticMatching,this.automaticPlayerBtn.selected=w.CommonGroupModel.instance.isAutomaticPlayer}},a.prototype.setAut=function(){var t=this.getTeamType();CommonUtil.whetherInCopy()||w.CommonGroupUtil.isMyHaveTeam()&&w.CommonGroupModel.instance.isHomeowners&&(2!==t&&4!==t||0===w.CommonGroupModel.instance.state&&2===w.CommonGroupModel.instance.changType&&(w.CommonGroupModel.instance.isAutomaticMatching=!1))},a.prototype.setUI2=function(){0!=w.CommonGroupModel.instance.teamType&&(this._teamType=w.CommonGroupModel.instance.teamType),1===this._btnGroupUIChange.selectedIndex&&(this.hanHuaBox.setUI(),this.setBoxAndtaggle(),this.setUIbyTeamType(),this.setPlayerUI(),this.setTeamMode(),this.setGengSui(),this.setAutoUI(),this.btn1Andbtn2Update(),this.setCopyTipsUI())},a.prototype.clearPlayerUI=function(){for(var t=0;t<this._allPlayerInfoItem.length;t++){var e=this._allPlayerInfoItem[t];e&&(e.data=[null,0])}},a.prototype.setPlayerUI=function(){this.clearPlayerUI();for(var t=1,e=0;e<w.CommonGroupModel.instance.members.length;e++){var i=w.CommonGroupModel.instance.members[e];if(i){var n=i[0],s=i[2],o=i[3],a=this.getTeamType(),r=0;2===a?r=s?s[0]:0:4===a&&(r=o?o[0]:0),n[0]===w.CommonGroupModel.instance.leader?this._allPlayerInfoItem[0]&&(this._allPlayerInfoItem[0].data=[n,r]):(this._allPlayerInfoItem[t]&&(this._allPlayerInfoItem[t].data=[n,r]),t++)}}},a.prototype.genSuiBtnClick=function(){if(!CommonUtil.whetherInCopy()&&w.CommonGroupUtil.IsItSatisfied())return w.CommonGroupCtrl.instance.teamEnterScene(),void CommonUtil.noticeError(0,"跟随进入副本",!1);CommonUtil.whetherInCopy()||!w.CommonGroupUtil.IsItSatisfied1()?(w.CommonGroupModel.instance.isGengSui=!w.CommonGroupModel.instance.isGengSui,CommonUtil.noticeError(0,w.CommonGroupModel.instance.isGengSui?"跟随成功":"取消跟随"),this.setGengSui()):CommonUtil.noticeError(0,"等待队伍完成副本")},a.prototype.setGengSui=function(){this.genSuiBtn.label=w.CommonGroupModel.instance.isGengSui?"取消跟随":"跟随队长"},a.prototype.oneKeyHandler=function(){w.CommonGroupUtil.isMyHaveTeam()&&(0<this._list.datas.length?w.CommonGroupModel.instance.claerApprovalApplyEx():s.instance.addNotice("没有申请入队的玩家",!0))},a.prototype.setUIbyTeamType=function(){this.nothingnessWorldBox.visible=!1,this.isModeTeamType()&&(this.nothingnessWorldBox.visible=w.CommonGroupModel.instance.isHomeowners),this.hiddenBox.visible=w.CommonGroupModel.instance.isHomeowners,this.genSuiBox.visible=!w.CommonGroupModel.instance.isHomeowners},a.prototype.isTipsFun=function(){this._btnGroupUIChange.selectedIndex=this._oldIdx,!CommonUtil.whetherInCopy()||w.CommonGroupUtil.isPublicScene(M.scene.SceneUtil.currScene)?0===w.CommonGroupModel.instance.sceneId?this.createTeamTargetEx():this.createTeamEx():CommonUtil.noticeError(0,"当前场景无法创建队伍",!0)},a.prototype.createTeamEx=function(){var t=this,e=this.getTeamType(),i="是否创建<span style= 'color:#168a17'>【"+w.CommonGroupUtil.getTextByType([e,w.CommonGroupModel.instance.sceneLevel])+"】</span>队伍?",n=Handler.create(this,function(){t.createTeamExFun()});CommonUtil.alert("提示",i,[n],[])},a.prototype.createTeamTargetEx=function(){var t=this,e=Handler.create(this,function(){t.thangeClickFun()});CommonUtil.alert("提示","当前没有副本目标,是否选择目标?",[e],[])},a.prototype.thangeClickFun=function(){w.CommonGroupUtil.isMyHaveTeam()&&!w.CommonGroupModel.instance.isHomeowners||(CommonUtil.whetherInCopy()?CommonUtil.noticeError(0,"当前场景无法切换目标",!0):w.CommonGroupUtil.teammateInCopy()?CommonUtil.noticeError(0,"队伍正在进行副本中,无法切换目标",!0):w.CommonGroupUtil.isMyHaveTeam()?0===w.CommonGroupModel.instance.state?WindowManager.instance.open(1541):CommonUtil.noticeError(0,"当前处于匹配状态",!0):WindowManager.instance.open(1541))},a.prototype.setChangeBtn=function(){w.CommonGroupUtil.isMyHaveTeam()?this.changeBtn.visible=w.CommonGroupModel.instance.isHomeowners:this.changeBtn.visible=!0,this.noTxt1.text="暂无队伍",w.CommonGroupUtil.isMyHaveTeam()?this.copyTargetText.text="当前目标:"+w.CommonGroupUtil.getTextByType([w.CommonGroupModel.instance.teamType,w.CommonGroupModel.instance.sceneLevelTeam]):0!=w.CommonGroupModel.instance.sceneId?this.copyTargetText.text="当前目标:"+w.CommonGroupUtil.getTextByType([this.getTeamType(),w.CommonGroupModel.instance.sceneLevel]):(this.copyTargetText.text="当前目标:无",this.noTxt1.text="选择目标后显示队伍列表")},a.prototype.setBoxAndtaggle=function(){switch(this.automaticBox.visible=!1,this.automaticMatchingText.text="自动匹配",this.automaticMatchingBtn.visible=this.automaticMatchingText.visible=!1,this.automaticPlayerBtn.visible=this.automaticPlayerText.visible=!1,this.autoPassBtn.visible=this.autoPassBtnText.visible=!1,this.BossForbiddenLvText.visible=!1,this.getTeamType()){case 1:this.automaticBox.visible=this.hanHuaBox.visible=w.CommonGroupModel.instance.isHomeowners,this.automaticPlayerBtn.visible=this.automaticPlayerText.visible=this.automaticMatchingBtn.visible=this.automaticMatchingText.visible=!0,this.automaticMatchingBtn.pos(-3,13),this.automaticMatchingText.pos(39,21),this.automaticPlayerBtn.pos(-3,61),this.automaticPlayerText.pos(39,69);break;case 2:case 4:this.automaticBox.visible=this.hanHuaBox.visible=w.CommonGroupModel.instance.isHomeowners,this.automaticMatchingText.text="快速匹配",0===w.CommonGroupModel.instance.teamMode?(this.automaticPlayerBtn.visible=this.automaticPlayerText.visible=this.automaticMatchingBtn.visible=this.automaticMatchingText.visible=!0,this.automaticMatchingBtn.pos(-3,13),this.automaticMatchingText.pos(39,21),this.automaticPlayerBtn.pos(-3,61),this.automaticPlayerText.pos(39,69)):(this.automaticPlayerBtn.visible=this.automaticPlayerText.visible=!0,this.automaticPlayerBtn.pos(-3,30),this.automaticPlayerText.pos(39,38)),this.hanHuaBox.visible=w.CommonGroupModel.instance.isHomeowners&&0===w.CommonGroupModel.instance.teamMode;break;case 3:this.automaticBox.visible=this.hanHuaBox.visible=w.CommonGroupModel.instance.isHomeowners;break;case 5:case 6:case 7:case 9:case 10:this.automaticBox.visible=this.hanHuaBox.visible=w.CommonGroupModel.instance.isHomeowners,this.autoPassBtn.visible=this.autoPassBtnText.visible=!0,this.autoPassBtn.pos(-3,30),this.autoPassBtnText.pos(39,38);break;case 8:this.automaticBox.visible=this.hanHuaBox.visible=w.CommonGroupModel.instance.isHomeowners,this.autoPassBtn.visible=this.autoPassBtnText.visible=!0,this.automaticPlayerBtn.visible=this.automaticPlayerText.visible=!0,this.autoPassBtn.pos(-3,-9),this.autoPassBtnText.pos(39,-1),this.automaticPlayerBtn.pos(-3,39),this.automaticPlayerText.pos(39,47)}},a.prototype.setCopyTipsUI=function(){if(Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.loopHandler),E.thisStop(this._addTimesBtnClip),this.copyNumBox.visible=this.DreamlandBox.visible=this.DreamlandBox1.visible=!1,this.chanllgeCBtn.visible=this.textTip2.visible=this.tipsbtn.visible=this.addBtn1.visible=this.drawNum1.visible=this.textTip1.visible=this.html2.visible=!1,this.html3.visible=this.html4.visible=!1,this.html4.y=35,this.html3.y=4,this.genSuiBox.y=932,this.hiddenBox.y=913,this.copyNumBox.y=881,w.CommonGroupUtil.isMyHaveTeam()){this.html1.innerHTML="自动跟随队长切换目标",this.html4.innerHTML="场景内每增加一名队友，BOSS增伤<span style= 'color:#168a17'>+10%</span>,稀有掉率<span style= 'color:#168a17'>+10%</span>";var t=this.getTeamType();switch(!CommonUtil.whetherInCopy()&&w.CommonGroupUtil.IsItSatisfied()&&(this.html1.innerHTML="跟随队长进入副本",this.genSuiBtn.label="跟随队长"),!CommonUtil.whetherInCopy()&&w.CommonGroupUtil.IsItSatisfied1()&&(this.html1.innerHTML="副本无法中途加入",this.genSuiBtn.label="跟随队长"),t){case 3:case 2:case 4:this.copyNumBox.visible=!0;var e=0,i=0;3===t?(e=M.teamBattle.TeamBattleModel.Instance.remainTimes,i=M.teamBattle.TeamBattleModel.Instance.totalTimes):2===t?(e=M.nothingness_world.NothingnessWorldModel.instance.nowChallengeNum,i=M.nothingness_world.NothingnessWorldModel.instance.maxChallengeNum):4===t&&(e=M.nether_world.NetherWorldModel.instance.nowChallengeNum,i=M.nether_world.NetherWorldModel.instance.maxChallengeNum),this.textTip1.text="挑战次数:",this.drawNum1.color=0<e?"#00ad35":"#e6372e",this.drawNum1.text=e+"/"+i,this.chanllgeCBtn.selected=M.halo.HaloModel.instance.getCheckTipsValue(w.CommonGroupUtil.getSceneTypeExByTeamType(t)),3===t?(this.chanllgeCBtn.visible=this.textTip2.visible=this.tipsbtn.visible=this.addBtn1.visible=this.drawNum1.visible=this.textTip1.visible=!0,PlatParams.isCloseRecharge?(this.addBtn1.visible=!1,E.thisStop(this._addTimesBtnClip),CommonUtil.adaptationImgAndText([[this.chanllgeCBtn,2,0],[this.textTip2,1,0],[this.tipsbtn,2,0],[this.textTip1,1,0],[this.drawNum1,1,0]],this.copyNumBox.width,0,"center",[0,2,2,0])):(CommonUtil.adaptationImgAndText([[this.chanllgeCBtn,2,0],[this.textTip2,1,0],[this.tipsbtn,2,0],[this.textTip1,1,0],[this.drawNum1,1,0],[this.addBtn1,2,0]],this.copyNumBox.width,0,"center",[0,2,2,0,2]),M.teamBattle.TeamBattleModel.Instance.getIsPlayer()?this._addTimesBtnClip.isPlaying||E.thisPlay(this._addTimesBtnClip):E.thisStop(this._addTimesBtnClip),this._addTimesBtnClip.pos(this.addBtn1.x-10,this.addBtn1.y-10))):(this.chanllgeCBtn.visible=this.textTip2.visible=this.tipsbtn.visible=this.drawNum1.visible=this.textTip1.visible=!0,CommonUtil.adaptationImgAndText([[this.chanllgeCBtn,2,0],[this.textTip2,1,0],[this.tipsbtn,2,0],[this.textTip1,1,0],[this.drawNum1,1,0]],this.copyNumBox.width,0,"center",[0,2,2,0]));break;case 5:case 6:case 7:this.DreamlandBox.visible=this.DreamlandBox1.visible=!0,this.html3.visible=this.html4.visible=!0,this.genSuiBox.y=894;var n=0,s="",o=0,a=0,r=!(this.hiddenBox.y=893);5===t?(n=13650001,s="元力:",o=M.spiritDungeon.SpiritDungeonModel.instance.spirit,a=M.halo.HaloModel.instance.getDreamlandStrength(M.config.BlendCfg.instance.getCfgById(80007)[1][0]),r=M.spiritDungeon.SpiritDungeonModel.instance.autoUse):6===t?(n=13650002,s="八卦值:",o=M.divinatory_card.DivinatoryCardModel.instance.yuanli,a=M.halo.HaloModel.instance.getDreamlandStrength(M.divinatory_card.DivinatoryUtil.dailMax),r=M.divinatory_card.DivinatoryCardModel.instance.autoUse):7===t&&(n=13650003,s="异宝值:",o=M.outside_show_dungeon.OutsideShowDungeonModel.instance.exValue,a=M.halo.HaloModel.instance.getDreamlandStrength(M.outside_show_dungeon.OutsideShowDungeonUtil.dailMax),r=!!M.outside_show_dungeon.OutsideShowDungeonModel.instance.autoUse);var l=M.bag.BagModel.instance.getItemCountById(n);this.textTip.text="自动使用"+CommonUtil.getNameByItemId(n)+"(剩余"+l+"个)",this.text1.text=""+s,this.drawNum.text=o+"/"+a,this.drawNum.color=0===o?"#ff3e3e":"#168a17",this.autoBtn.selected=r,CommonUtil.adaptationImgAndText([[this.autoBtn,2,0],[this.textTip,1,0],[this.text1,1,0],[this.drawNum,1,0],[this.addBtn,2,0]],this.DreamlandBox.width,0,"center",[0,0,0,2]);var h=0;if(3===w.CommonGroupUtil.getMywhetherInCopy())for(var p=0;p<w.CommonGroupModel.instance.members.length;p++){var c=w.CommonGroupModel.instance.members[p];c&&3===c[4]&&c[0][0]!=PlayerModel.instance.actorId&&h++}var u=CommonUtil.formatHtmlStrByColor("#168a17","+"+h*M.config.BlendCfg.instance.getCfgById(80010)[1][0]*100+"%"),d=CommonUtil.formatHtmlStrByColor("#168a17","+"+h*M.config.BlendCfg.instance.getCfgById(80011)[1][0]*100+"%");this.html3.innerHTML="组队增益:BOSS增伤"+u+",稀有掉率"+d;break;case 9:if(this.copyNumBox.visible=!0,this.html2.visible=!0,this.addBtn1.visible=!1,!M.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!1))return;var m=M.welfare_place.WelfarePlaceModel.instance.dungeonInfo,y=m[0],f=m[1];this._endTmAward=f+GlobalData.serverTime,this._endTmCopy=y+GlobalData.serverTime,CommonUtil.whetherInCopy()?(this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler)):this.html2.innerHTML=100<f?"今日剩余奖励时长:<span style= 'color:#00ad35'>"+CommonUtil.msToMMSS(f)+"</span>":100<y?"今日剩余协助时长:<span style= 'color:#00ad35'>"+CommonUtil.msToMMSS(y)+"</span>":"今日剩余协助时长:<span style= 'color:#ff3e3e'>"+CommonUtil.msToMMSS(0)+"</span>";break;case 8:if(this.copyNumBox.visible=!0,this.html2.visible=!0,w.CommonGroupUtil.isOpenTeamScene(44))this.html2.innerHTML="正在进行";else{var g=M.union_war.UnionWarModel.instance.getWarCopyTimeStr(15);this.html2.innerHTML="每日<span style= 'color:#168a17'>"+g[1]+"-"+g[2]+"</span>开启"}this.setBossForbiddenLvText();break;case 1:if(this.copyNumBox.visible=!0,w.CommonGroupUtil.isOpenTeamScene(38)){this.html2.visible=!1,this.drawNum1.visible=this.textTip1.visible=!0;var _=M.faerie_demon.FaerieDemonModel.instance.times[0],v=M.faerie_demon.FaerieDemonModel.instance.times[1],b=M.faerie_demon.FaerieDemonModel.instance.times[4],T="#ff3e3e",C=_-M.faerie_demon.FaerieDemonModel.instance.times[2]+b,I=v-M.faerie_demon.FaerieDemonModel.instance.times[3];0<C?(T="#00ad35",this.textTip1.text="可领取奖励次数:",this.drawNum1.text=C+"/"+_):(0<I&&(T="#00ad35"),this.textTip1.text="可助战次数:",this.drawNum1.text=I+"/"+v),this.drawNum1.color=T,CommonUtil.adaptationImgAndText([[this.textTip1,1,0],[this.drawNum1,1,0]],this.copyNumBox.width,0,"center")}else{var B=M.union_war.UnionWarModel.instance.getWarCopyTimeStr(11);this.html2.innerHTML="每日<span style= 'color:#168a17'>"+B[1]+"-"+B[2]+"</span>开启",this.html2.visible=!0,this.drawNum1.visible=this.textTip1.visible=!1}break;case 10:this.copyNumBox.visible=!0,this.html2.visible=!0,this.DreamlandBox1.visible=!0,this.html4.visible=!0,this.html4.y=25,this.genSuiBox.y=912,w.CommonGroupModel.instance.isHomeowners||(this.copyNumBox.y=868),this.html4.innerHTML="战斗场景中两人战斗积分<span style= 'color:#168a17'>+10%</span>,三人战斗积分<span style= 'color:#168a17'>+15%</span>";var x=M.union_war.UnionWarModel.instance.getWarCopyState(),S=M.union_war.UnionWarModel.instance.getWarCopyTimeStr(13);if(1===x)this.html2.innerHTML="周"+M.union_war.UnionWarModel.instance.getStr(S[0])+"<span style= 'color:#168a17'>"+S[1]+"-"+S[2]+"</span>开启";else if(2===x)this.html2.innerHTML="今日<span style= 'color:#168a17'>"+S[1]+"-"+S[2]+"</span>开启";else if(3===x)if(CommonUtil.whetherInCopy())if(M.union_war.UnionWarModel.instance.ispreliminaryFactionMatch())this.html2.innerHTML="正在战斗";else{var P=!0;42===M.scene.SceneUtil.currScene?P=M.union_war.UnionWarModel.instance.nextTurnTime>GlobalData.serverTime:43===M.scene.SceneUtil.currScene&&(P=M.union_war.UnionWarModel.instance.nextTurnTime>GlobalData.serverTime),P?(Laya.timer.clear(this,this.activityHandler),this.html2.innerHTML="此轮轮空"):(Laya.timer.loop(1e3,this,this.activityHandler),this.activityHandler())}else this.html2.innerHTML="进入准备场景才可开启战斗";else this.html2.innerHTML="本次积分赛已结束"}}},a.prototype.activityHandler=function(){if(this.html2.innerHTML="<span style='color:#ff3e3e'>"+CommonUtil.timeStampToHHMMSS(M.union_war.UnionWarModel.instance.readyEndTime)+"</span>后开始战斗",M.union_war.UnionWarModel.instance.readyEndTime<GlobalData.serverTime){Laya.timer.clear(this,this.activityHandler);var t=M.scene.SceneUtil.currScene;if(42===t){var e=M.config.FactionWarBlendCfg.instance.getBlendCfgById(11)[1][0];this.html2.innerHTML=M.union_war.UnionWarModel.instance.turnNum<=e?"等待战斗开始":"等待退出场景"}else 43===t&&(this.html2.innerHTML="等待战斗开始")}},a.prototype.loopHandler=function(){this._endTmAward>GlobalData.serverTime?this.html2.innerHTML="今日剩余奖励时长:<span style= 'color:#00ad35'>"+CommonUtil.msToMMSS(this._endTmAward-GlobalData.serverTime)+"</span>":this._endTmCopy>GlobalData.serverTime?this.html2.innerHTML="今日剩余协助时长:<span style= 'color:#00ad35'>"+CommonUtil.msToMMSS(this._endTmCopy-GlobalData.serverTime)+"</span>":this.html2.innerHTML="今日剩余协助时长:<span style= 'color:#ff3e3e'>"+CommonUtil.msToMMSS(0)+"</span>"},a.prototype.setCopyTipsCtrl=function(){if(w.CommonGroupUtil.isMyHaveTeam())switch(this.getTeamType()){case 8:M.forbiddenBoss.ForbiddenBossCtrl.instance.GetForbiddenBossCopyInfo();break;case 9:M.welfare_place.WelfarePlaceCtrl.instance.getBlessedLandCopyInfo(),M.welfare_place.WelfarePlaceCtrl.instance.getBlessedLandInfo()}},a.prototype.autoHandler=function(){if(w.CommonGroupUtil.isMyHaveTeam())switch(this.getTeamType()){case 5:M.spiritDungeon.SpiritDungeonUtil.changeAutoUse();break;case 6:M.divinatory_card.DivinatoryCardModel.instance.changeAutoUse();break;case 7:M.outside_show_dungeon.OutsideShowDungeonUtil.changeAutoUse()}},a.prototype.addBtnClick=function(){if(w.CommonGroupUtil.isMyHaveTeam())switch(this.getTeamType()){case 5:M.spiritDungeon.SpiritDungeonUtil.addSpirit(M.config.BlendCfg.instance.getCfgById(80007)[1][0]);break;case 6:M.divinatory_card.DivinatoryCardModel.instance.addSpirit();break;case 7:M.outside_show_dungeon.OutsideShowDungeonUtil.addSpirit()}},a.prototype.addBtn1Click=function(){if(w.CommonGroupUtil.isMyHaveTeam())switch(this.getTeamType()){case 3:M.teamBattle.TeamBattleModel.Instance.addTimesBtnHandler()}},a.prototype.tipsHanlder=function(){if(w.CommonGroupUtil.isMyHaveTeam())switch(this.getTeamType()){case 3:CommonUtil.alertHelp(67045);break;case 2:CommonUtil.alertHelp(67047);break;case 4:CommonUtil.alertHelp(67046)}},a.prototype.setOneKeychangeHandler=function(){w.CommonGroupUtil.isMyHaveTeam()&&CommonUtil.setHalaOneKeychange(!this.chanllgeCBtn.selected,w.CommonGroupUtil.getSceneTypeExByTeamType(this.getTeamType()))},a.prototype.GetTeamSetInfo=function(){w.CommonGroupCtrl.instance.GetTeamSetInfo()},a.prototype.setAutoUI=function(){this.autoAcceptBtn.selected=w.CommonGroupModel.instance.autoAccept,this.autoPassBtn.selected=w.CommonGroupModel.instance.autoJoin},a.prototype.autoAcceptBtnHandler=function(){var t=!w.CommonGroupModel.instance.autoAccept,e=w.CommonGroupModel.instance.autoJoin;w.CommonGroupCtrl.instance.SetAutoJoinState(e,t)},a.prototype.autoPassBtnHandler=function(){var t=w.CommonGroupModel.instance.autoAccept,e=!w.CommonGroupModel.instance.autoJoin;w.CommonGroupCtrl.instance.SetAutoJoinState(e,t)},a.prototype.setBossForbiddenLvText=function(){if(this.BossForbiddenLvText.visible=8===this.getTeamType(),w.CommonGroupUtil.isOpenTeamScene(44)){var t=0,e=M.forbiddenBoss.ForbiddenBossModel.instance;if(t=(t=w.CommonGroupUtil.isMyHaveTeam()?w.CommonGroupModel.instance.levelTeamTrue:e.finishLevel)||0,!w.CommonGroupUtil.isMyHaveTeam()&&(t+=1,CommonUtil.whetherInCopy())){var i=e.info;i&&(t=i[1])}2===e.stage?this.BossForbiddenLvText.text="当前阶段:特殊BOSS阶段":3===e.stage?this.BossForbiddenLvText.text="当前阶段:终极BOSS阶段":this.BossForbiddenLvText.text="当前阶段:竞速BOSS阶段    "+(w.CommonGroupUtil.isMyHaveTeam()?"队伍":"我的")+"当前层数:"+t+"层"}else this.BossForbiddenLvText.text="当前阶段:未开启"},a.prototype.creatEffect=function(){this._matching_effect=E.createAndPlay("assets/effect/matching_effect.atlas","matching_effect",4,!1,!0,10),this.addChild(this._matching_effect),this._matching_effect.pos(269.5,155,!0),E.thisStop(this._matching_effect),this._btnClip=E.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.hiddenBox.addChild(this._btnClip),this._btnClip.pos(this.btn.x-6,this.btn.y-8,!0),E.thisStop(this._btnClip),this._addTimesBtnClip=E.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.copyNumBox.addChild(this._addTimesBtnClip),this._addTimesBtnClip.pos(this.addBtn1.x-10,this.addBtn1.y-10),E.thisStop(this._addTimesBtnClip)},a.prototype.close=function(){e.prototype.close.call(this),E.thisStop(this._btnClip)},a.prototype.destroy=function(){this._matching_effect=this.destroyElement(this._matching_effect),this._btnClip=this.destroyElement(this._btnClip),this._list=this.destroyElement(this._list),this._listTeam=this.destroyElement(this._listTeam),this.hanHuaBox=this.destroyElement(this.hanHuaBox),this.buffBox=this.destroyElement(this.buffBox),this._addTimesBtnClip=this.destroyElement(this._addTimesBtnClip),e.prototype.destroy.call(this)},o=a,w.CommonGroupRoomPanel=o}(modules=modules||{}),function(M){var w,a,t,E,e,i,r,n;function s(){var t=null!==a&&a.apply(this,arguments)||this;return t._isCtrl=!0,t}w=M.common_group||(M.common_group={}),t=ui.TeamCopyInviteAlertUI,E=M.faction.FactionModel,e=M.common.CustomList,i=M.common.BtnGroup,r=M.faction.FactionCtrl,a=t,__extends(s,a),s.prototype.initialize=function(){a.prototype.initialize.call(this),this._list=e.create("v",51,105,560,623,w.CommonGroupInviteItem,5),this.addChild(this._list),this.pos(51,105),this._btnGroup=new i,this._btnGroup.setBtns(this.btnGroup_3,this.btnGroup_0,this.btnGroup_1,this.btnGroup_2)},s.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupHearl),this.onAutoGlobalEvt("FACTION_INFO",this,this.updateView),this.onAutoGlobalEvt("TEAM_COPY_CAN_INVITE_MEMBER_UPDATE",this,this.updateView),this.onAutoGlobalEvt("SCENE_TEAM_PLAYERS_TO_INVITE_UPDATE",this,this.updateView),this.onAutoGlobalEvt("SPIRIT_PLAYERS_TO_INVITE_UPDATE",this,this.updateView),this.onAutoGlobalEvt("GET_TEAMERS_COPY_TIMES_REPLY",this,this.showUI)},s.prototype.onOpened=function(){switch(a.prototype.onOpened.call(this),this.btnGroup_0.visible=this.btnGroup_1.visible=this.btnGroup_2.visible=this.btnGroup_3.visible=!0,this.btnGroup_3.visible=w.CommonGroupUtil.isPublicScene(M.scene.SceneUtil.currScene),w.CommonGroupModel.instance.teamType){case 10:this.btnGroup_1.visible=this.btnGroup_2.visible=!1;break;case 9:this.btnGroup_1.visible=this.btnGroup_0.visible=!1;break;case 2:case 4:1===w.CommonGroupModel.instance.teamMode&&(this.btnGroup_1.visible=this.btnGroup_0.visible=!1)}for(var t=0,e=-1,i=[],n=0;n<this._btnGroup.btns.length;n++){var s=this._btnGroup.btns[n];s&&s.visible&&(t++,-1===e&&(e=n),i.push([s,2,1]))}CommonUtil.adaptationImgAndText(i,this.btnBox.width,0,"center"),this.btnBox.visible=1<t,e=-1===e?0:e,w.CommonGroupUtil.isPublicScene(M.scene.SceneUtil.currScene)&&(e=0),this._btnGroup.selectedIndex=e,r.instance.makeFactionPanel(!0),M.warband.WarbandCtrl.instance.getWarbandInfo();var o=M.marry.MarryModel.instance.half;o&&M.teamBattle.TeamBattleCtrl.instance.getActorInfo([o[0]]),this.img1.height=1===i.length?745:652,this._list.height=1===i.length?715:623,this.noBox.y=1===i.length?210:190},s.prototype.btnGroupHearl=function(){if(-1!==this._btnGroup.selectedIndex&&this._btnGroup.selectedIndex!==this.oldSelectedIndex){if(w.CommonGroupModel.instance.cdTimeInvite>GlobalData.serverTime)return CommonUtil.noticeError(0,"您的操作太频繁，请稍后再试",!0),-1!=this.oldSelectedIndex&&(this._btnGroup.selectedIndex=this.oldSelectedIndex),this.oldSelectedIndex=this._btnGroup.selectedIndex,void this.updateView();if(0===this._btnGroup.selectedIndex&&w.CommonGroupUtil.isPublicScene(M.scene.SceneUtil.currScene))switch(M.scene.SceneUtil.currScene){case 44:case 42:M.sceneTeam.SceneTeamCtrl.instance.SceneSearchObj();break;case 35:case 47:case 49:case 54:M.spiritDungeon.SpiritDungeonCtrl.instance.searchYuanshenObj()}w.CommonGroupModel.instance.copyTimesTable={},this.oldSelectedIndex=this._btnGroup.selectedIndex,this.updateView(),w.CommonGroupModel.instance.cdTimeInvite=GlobalData.serverTime+1e3}},s.prototype.updateView=function(){var t=this._btnGroup.selectedIndex;if(1==t){this._halfItem&&(this._halfItem.visible=!1);var e=[],i=E.instance.memberList;this.title.text="邀请盟友";for(var n=0,s=i;n<s.length;n++)if((y=(_=s[n])[1])!=PlayerModel.instance.actorId&&!w.CommonGroupUtil.thePlayerIsMyTeam(y)&&_[8]){var o=_[3],a=_[0],r=_[4],l=_[1],h=_[11],p=_[12];e.push([t,l,o,a,r,h,p])}this.setUI(e)}else if(2==t){this._list.datas=[],this.title.text="邀请仙缘";var c=M.marry.MarryModel.instance.isMarried,u=M.teamBattle.TeamBattleModel.Instance.halfInfo,d=M.marry.MarryModel.instance.half;if(c&&u&&0<u[0].length&&d[10]){this.noBox.visible=!1,o=d[3];var m=d[2],y=(r=u[0][0][2],d[0]);h=d[6],p=d[7],this.setUI([[t,y,o,m,r,h,p]])}else this.noTxt.text="你尚未结缘",this.noBox.visible=!0,this._halfItem&&(this._halfItem.visible=!1);c&&!d[10]&&(this.noTxt.text="你的仙缘不在线",this.noBox.visible=!0)}else if(3==t){if(this._halfItem&&(this._halfItem.visible=!1),e=[],this.title.text="邀请战队",M.warband.WarbandModel.instance.info)for(var f=0,g=i=M.warband.WarbandModel.instance.info[4];f<g.length;f++){var _;if((y=(_=g[f])[0])!=PlayerModel.instance.actorId&&!w.CommonGroupUtil.thePlayerIsMyTeam(y)&&_[12]){o=_[2];var v=_[1],b=(r=_[4],_[0]);h=_[6],p=_[5],e.push([t,b,o,v,r,h,p])}}this.setUI(e)}else if(0==t){this._halfItem&&(this._halfItem.visible=!1),this.title.text="邀请附近玩家",e=[];var T=[];switch(M.scene.SceneUtil.currScene){case 44:case 42:var C=M.scene.SceneModel.instance.enterScene;if(C){var I=C[0];T?T.length=0:T=[];for(var B=0;B<M.sceneTeam.SceneTeamModel.instance.playersToInvite.length;B++)if(S=M.sceneTeam.SceneTeamModel.instance.playersToInvite[B]){var x=S[2];if(w.CommonGroupUtil.thePlayerIsMyTeam(x))continue;2801===I?M.faction.FactionModel.instance.isTongXianMeng(x)&&T.push(S):T.push(S)}}break;case 35:case 47:case 49:case 54:T=M.spiritDungeon.SpiritDungeonModel.instance.playersToInvite}if(T)for(B=0;B<T.length;B++){o=(S=T[B])[5];var S,P=S[3];r=S[8],y=S[2],h=S[6],p=S[7],e.push([t,y,o,P,r,h,p])}this.setUI(e)}},s.prototype.setUI=function(t){if(this._datasAll=t,console.log("未赛选前的数据：：：",t),10!=w.CommonGroupModel.instance.teamType){for(var e=[],i=0;i<this._datasAll.length;i++){var n=this._datasAll[i];e.push(n[1])}w.CommonGroupCtrl.instance.GetTeamersCopyTimes(e)}this.showUI()},s.prototype.showUI=function(){var t=[],e=0<this._datasAll.length;if(10===w.CommonGroupModel.instance.teamType)t=this._datasAll;else for(var i=0;i<this._datasAll.length;i++){var n=this._datasAll[i];w.CommonGroupModel.instance.copyTimesTable[n[1]]&&t.push(n)}console.log("赛选后的数据：：：",t),2===this._btnGroup.selectedIndex?(0<t.length&&(this.halfItem=t[0]),this.noBox.visible=!(0<t.length),this.noTxt.text="暂无可邀请的仙缘"):this.setListDate(t,e)},s.prototype.setListDate=function(t,e){0<t.length&&(t=t.sort(this.sortByFight.bind(this)));var i=this._list.scrollPos;this._list.datas=t,this._btnGroup.selectedIndex==this._btnGroup.oldSelectedIndex?this._list.scrollPos=i:this._list.scrollPos=0,0===this._btnGroup.selectedIndex?0==t.length?(this.noTxt.text=e?"暂无可邀请的附近玩家":"附近没有其他玩家",this.noBox.visible=!0):this.noBox.visible=!1:1===this._btnGroup.selectedIndex?(0==t.length?(this.noTxt.text=e?"暂无可邀请的盟友":"你的盟友不在线",this.noBox.visible=!0):this.noBox.visible=!1,M.faction.FactionModel.instance.hasFaction||(this.noTxt.text="你没有加入仙盟",this.noBox.visible=!0)):2===this._btnGroup.selectedIndex?(this.noBox.visible=!(0<t.length),this.noTxt.text="暂无可邀请的仙缘"):3===this._btnGroup.selectedIndex&&(-1===M.warband.WarbandModel.instance.leaderId?(this.noTxt.text="你没有加入战队",this.noBox.visible=!0):0==t.length?(this.noTxt.text=e?"暂无可邀请的战队成员":"其他战队成员不在线",this.noBox.visible=!0):this.noBox.visible=!1)},Object.defineProperty(s.prototype,"halfItem",{set:function(t){this._halfItem||(this._halfItem=new w.CommonGroupInviteHalfItem,this.addChild(this._halfItem),this._halfItem.pos(51,110)),this._halfItem.setData(t),this._halfItem.visible=!0},enumerable:!0,configurable:!0}),s.prototype.sortByFight=function(t,e){var i=[],n=[];i=w.CommonGroupModel.instance.copyTimesTable[t[1]],n=(n=w.CommonGroupModel.instance.copyTimesTable[e[1]])||[];var s=(i=i||[])[0]?i[0]:0,o=i[1]?i[1]:0,a=n[0]?n[0]:0,r=n[1]?n[1]:0,l=!1,h=!1;switch(w.CommonGroupModel.instance.teamType){case 3:case 4:case 2:return s!=a?-(s-a):-(t[4]-e[4]);case 5:case 6:case 7:case 8:var p=0,c=0;if(8!=w.CommonGroupModel.instance.teamType){switch(w.CommonGroupModel.instance.teamType){case 5:p=M.spiritDungeon.SpiritDungeonModel.instance.openNum,c=M.spiritDungeon.SpiritDungeonModel.instance.minNum;break;case 6:p=M.divinatory_card.DivinatoryCardModel.instance.openNum,c=M.divinatory_card.DivinatoryCardModel.instance.minNum;break;case 7:p=M.outside_show_dungeon.OutsideShowDungeonModel.instance.openNum,c=M.outside_show_dungeon.OutsideShowDungeonModel.instance.minNum}l=p<=s,h=p<=a}else l=s===w.CommonGroupModel.instance.levelTeamTrue,h=a===w.CommonGroupModel.instance.levelTeamTrue;return l&&!h?-1:!l&&h?1:l&&h?-(s-a):8!=w.CommonGroupModel.instance.teamType?(h=c<=a,(l=c<=s)&&!h?-1:!l&&h?1:l&&h?-(s-a):-(t[4]-e[4])):-(t[4]-e[4]);case 1:case 9:return s+o!=a+r?-(s+o-(a+r)):-(t[4]-e[4]);case 10:default:return-(t[4]-e[4])}},s.prototype.close=function(t,e){r.instance.makeFactionPanel(!1),w.CommonGroupModel.instance.copyTimesTable={},this._list.datas=[],this.oldSelectedIndex=-1,a.prototype.close.call(this,t,e)},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),a.prototype.destroy.call(this)},n=s,w.CommonGroupInviteAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t._times=1e4,t}e=t.common_group||(t.common_group={}),i=ui.CommonGroupWaitingAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("UPDATE_TEAM_SET_ANSWER",this,this.showUI),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.showUI),this.closeBtn&&this.closeBtn.off(Laya.Event.CLICK,this,this.close),this.onAutoClick(this.closeBtn,this,this.close2)},s.prototype.okBtnHandler=function(){this.close2()},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._times=1e4+GlobalData.serverTime,Laya.timer.loop(1e3,this,this.setBtnLable),this.setBtnLable(),this.showUI()},s.prototype.showUI=function(){if(e.CommonGroupModel.instance.updateTeamSetAnswerDate){var t=e.CommonGroupModel.instance.updateTeamSetAnswerDate[0];e.CommonGroupModel.instance.updateTeamSetAnswerDate[1]?this.close1():(this.img1.visible=1<=e.CommonGroupModel.instance.members.length,this.img2.visible=2<=e.CommonGroupModel.instance.members.length,this.img3.visible=3<=e.CommonGroupModel.instance.members.length,this.img3.visible?this.img3.visible||this.img2.visible?(this.img3.x=349,this.img2.x=318,this.img1.x=286):this.img1.x=318:(this.img2.x=333,this.img1.x=301),console.log("同意队员的长度 "+t.length),this.img1.skin=t&&1<=t.length?"faerie_demon/icon_zdxt_lr.png":"faerie_demon/icon_zdxt_hr.png",this.img2.skin=t&&2<=t.length?"faerie_demon/icon_zdxt_lr.png":"faerie_demon/icon_zdxt_hr.png",this.img3.skin=t&&3<=t.length?"faerie_demon/icon_zdxt_lr.png":"faerie_demon/icon_zdxt_hr.png")}},s.prototype.setBtnLable=function(){if(this._times>GlobalData.serverTime){var t=Math.round((this._times-GlobalData.serverTime)/1e3);this.countdownText.text="等待队员确认("+t+"s)",this.countdownText.visible=!0}else this.countdownText.text="",this.countdownText.visible=!1,this.close1()},s.prototype.close1=function(){Laya.timer.clear(this,this.setBtnLable),i.prototype.close.call(this)},s.prototype.close2=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.setBtnLable),e.CommonGroupCtrl.instance.AnswerSetType(!1)},n=s,e.CommonGroupWaitingAlert=n}(modules=modules||{}),function(t){var e,i;function n(){this._cfgs={},this.types=[];for(var t=GlobalData.getConfig("qq_red_task"),e=0,i=t.length;e<i;e++)this._cfgs[t[e][0]]=t[e],-1===this.types.indexOf(t[e][6])&&this.types.push(t[e][6])}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgById=function(t){return this._cfgs[t]},n.prototype.getCfgs=function(){return this._cfgs},i=n,e.QQRedTaskCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.phone_qq_red_bag||(t.phone_qq_red_bag={}),n=t.config.QQRedTaskCfg,i=ui.PhoneQQRedBagOpenAlertUI,__extends(o,i),o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t);var e=n.instance.getCfgById(t);this.bagMsc.text="拆开"+Math.round(e[2])+"个红包总获得",this.numTxt.text=(e[2]/100).toFixed(2).toString()},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.once(e.PhoneQQRedBagModel.instance.endTm-GlobalData.serverTime,this,this.close)},o.prototype.close=function(){Laya.timer.clear(this,this.close),i.prototype.close.call(this)},o.prototype.destroy=function(){this.bagMsc=this.destroyElement(this.bagMsc),this.numTxt=this.destroyElement(this.numTxt),i.prototype.destroy.call(this)},s=o,e.PhoneQQRedBagOpenAlert=s}(modules=modules||{}),function(t){var e,i;function n(){this._cfgs={};for(var t=GlobalData.getConfig("qq_red"),e=0,i=t.length;e<i;e++)this._cfgs[t[e][0]]=t[e]}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgById=function(t){return this._cfgs[t]},i=n,e.QQRedCfg=i}(modules=modules||{}),function(t){var n,e,s,i;function o(){return null!==e&&e.apply(this,arguments)||this}n=t.phone_qq_red_bag||(t.phone_qq_red_bag={}),s=t.config.QQRedCfg,e=ui.PhoneQQRedBagAlertUI,__extends(o,e),o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.gotoBtn,this,this.gotoHanlder)},o.prototype.close=function(){Laya.timer.clear(this,this.close),e.prototype.close.call(this)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),Laya.timer.once(n.PhoneQQRedBagModel.instance.endTm-GlobalData.serverTime,this,this.close),this.updateView()},o.prototype.updateView=function(){if(this.cfg=s.instance.getCfgById(n.PhoneQQRedBagModel.instance.cfgId),this.cfg){var t=this.cfg[1],e=CommonUtil.timeConversionYMD(t[0],"."),i=CommonUtil.timeConversionYMD(t[1],".");this.actionTm.text="活动时间："+e+" - "+i+" "}},o.prototype.gotoHanlder=function(){WindowManager.instance.open(1527),this.close()},o.prototype.destroy=function(){this.actionTm=this.destroyElement(this.actionTm),this.cfg=null,e.prototype.destroy.call(this)},i=o,n.PhoneQQRedBagAlert=i}(modules=modules||{}),function(t){var o,n,e,s,a,i,r,l;function h(){return null!==n&&n.apply(this,arguments)||this}o=t.phone_qq_red_bag||(t.phone_qq_red_bag={}),e=t.common.CustomList,s=t.config.QQRedCfg,a=t.config.QQRedTaskCfg,i=t.common.PlatParams,r=t.notice.SystemNoticeManager,n=ui.PhoneQQRedBagTaskAlertUI,__extends(h,n),h.prototype.initialize=function(){n.prototype.initialize.call(this),this._list=e.create("v",81,551,361,247,o.PhoneQQRedBagTaskItem),this.addChild(this._list),this._btnList=e.create("v",465,529,188,330,o.PhoneQQRedBagTaskBtnItem,1),this.addChild(this._btnList),this._btnList.datas=a.instance.types,CommonUtil.setHTMLPro(this.htmlTips,"#50ff28","SimHei",24,"center")},h.prototype.addTime=function(){this.updateTime(),Laya.timer.loop(1e3,this,this.updateTime),Laya.timer.once(this.endTm-GlobalData.serverTime,this,this.close)},h.prototype.updateTime=function(){this.endTm<GlobalData.serverTime?this.htmlTips.innerHTML="<span style='color:#ff3e3e'>活动已结束</span>":this.htmlTips.innerHTML="活动剩余时间:"+CommonUtil.timeStampDDHHMMToHHMMSS(this.endTm)},h.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getHanlder),this.onAutoClick(this.ruluTxt,this,this.ruluHanler),this.onAutoClick(this._btnList,this,this.updateView),this.onAutoGlobalEvt("PHONE_QQ_RED_BAG_UPDATE",this,this.updateView)},h.prototype.ruluHanler=function(){CommonUtil.alertHelp(19087)},h.prototype.getHanlder=function(){o.PhoneQQRedBagModel.instance.maxState||(o.PhoneQQRedBagModel.instance.getMoney()<=0?r.instance.addNotice("没有可提取的金额",!0):i.qqRedpacketWithdraw(o.PhoneQQRedBagModel.instance.cfgId,PlayerModel.instance.actorId,o.PhoneQQRedBagModel.instance.getMoney(),function(t,e){0===t?r.instance.addNotice("提取成功",!1):CommonUtil.noticeError(e)}))},h.prototype.close=function(){Laya.timer.clear(this,this.updateTime),Laya.timer.clear(this,this.close),n.prototype.close.call(this)},h.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.cfg=s.instance.getCfgById(o.PhoneQQRedBagModel.instance.cfgId),this.endTm=o.PhoneQQRedBagModel.instance.endTm,this.addTime();for(var t=0,e=0,i=a.instance.types.length;e<i;e++)if(o.PhoneQQRedBagModel.instance.getRPByType(a.instance.types[e])){t=e;break}this._btnList.selectedIndex=t,this.updateView()},h.prototype.updateView=function(){this.moneyCnt.text=(o.PhoneQQRedBagModel.instance.getMoney()/100).toFixed(2).toString();var t=o.PhoneQQRedBagModel.instance.maxState;this.btnTxt.visible=this.getBtn.gray=t,this.getBtn.label=t?"":"提现",this._list.datas=o.PhoneQQRedBagModel.instance.getIdsByType(this._btnList.selectedData,this.cfg[2]).sort(this.sort.bind(this))},h.prototype.getState=function(t){return t?3<=t[1]?3:t[1]:1},h.prototype.sort=function(t,e){var i=this.getState(o.PhoneQQRedBagModel.instance.getTaskById(t.toString())),n=this.getState(o.PhoneQQRedBagModel.instance.getTaskById(e.toString())),s=[2,1,3];return s.indexOf(i)-s.indexOf(n)},h.prototype.destroy=function(){this.getBtn=this.destroyElement(this.getBtn),this._btnList=this.destroyElement(this._btnList),this._list=this.destroyElement(this._list),this.btnTxt=this.destroyElement(this.btnTxt),n.prototype.destroy.call(this)},l=h,o.PhoneQQRedBagTaskAlert=l}(modules=modules||{}),function(e){var t,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}t=e.warband||(e.warband={}),n=ui.WarbandApplicantsLimitAlertUI,i=n,__extends(o,i),o.prototype.onOpened=function(){i.prototype.onOpened.call(this)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn_ok,this,this.onOk),this.onAutoEvt(this.input_fight,"input",this,this.inputTxtHandler),this.onAutoEvt(this.input_fight,"blur",this,this.inputTxtHandler)},o.prototype.inputTxtHandler=function(){var t=parseInt(this.input_fight.text);isNaN(t)?this.input_fight.text="0":this.input_fight.text=t+""},o.prototype.onOk=function(){var t=1e4*parseInt(this.input_fight.text);e.warband.WarbandCtrl.instance.setWarbandLimitFight(t),e.warband.WarbandModel.instance.limitFight=t},s=o,t.WarbandApplicantsLimitAlert=s}(modules=modules||{}),function(i){var n,t,e,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=i.scene||(i.scene={}),e=ui.GatherSkipViewUI,t=e,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=242,this.bottom=420,this.closeByOthers=!1},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.initModuleSkip()},o.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.btn_check,this,this.checkHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.initModuleSkip)},o.prototype.helpHandler=function(){i.common.CommonUtil.alertHelp(19089)},o.prototype.checkHandler=function(){i.zhizun.ZhizunModel.instance.state?(this.btn_check.selected=!this.btn_check.selected,this.saveModuleSkip(),this.btn_check.selected&&(this.endGathering(),this.nextAction())):(CommonUtil.alert("温馨提示","您未激活至尊特权，不可跳过宝箱采集，是否前往激活？",[Handler.create(this,this.okBtnHandel),"确定"],[null,"取消"],null,!0),this.btn_check.selected=!1)},o.prototype.okBtnHandel=function(){WindowManager.instance.open(351)},o.prototype.endGathering=function(){i.npc.NpcModel.instance.isGathering&&i.npc.NpcCtrl.instance.gatherInterrupt()},o.prototype.nextAction=function(){switch(n.SceneUtil.currScene){case 12:i.bossHome.BossHomeModel.instance.findPathState=2}},o.prototype.initModuleSkip=function(){switch(n.SceneUtil.currScene){case 12:var t=i.customData.CustomDataModel.instance.getCustomDataByKey(45),e=!!t&&!!t[0];i.zhizun.ZhizunModel.instance.state?this.btn_check.selected=e:this.btn_check.selected=!1,this.bottom=520}},o.prototype.saveModuleSkip=function(){var t=this.btn_check.selected?1:0;switch(n.SceneUtil.currScene){case 12:var e=[[45,[t]]];i.customData.CustomDataCtrl.instance.setCustomizeData(e)}},s=o,n.GatherSkipPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.three_seven_box||(t.three_seven_box={}),i=ui.ThreeSevenBoxDownloadAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",15),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},s.prototype.sureBtnHandler=function(){0===e.ThreeSevenBoxModel.instance.drawState&&e.ThreeSevenBoxCtrl.instance.doExtraAction()},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("THREE_SEVEN_BOX_UPDATE",this,this.updateView)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},s.prototype.updateView=function(){0===e.ThreeSevenBoxModel.instance.drawState?(CustomClip.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.sureBtn.label="立即下载"):(WindowManager.instance.open(1531),this.close())},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},n=s,e.ThreeSevenBoxDownloadAlert=n}(modules=modules||{}),function(t){var e,o,a,i;function n(){return null!==o&&o.apply(this,arguments)||this}e=t.three_seven_box||(t.three_seven_box={}),a=t.config.BlendCfg,o=ui.ThreeSevenBoxAwardAlertUI,__extends(n,o),n.prototype.initialize=function(){o.prototype.initialize.call(this),this.items=[this.item1,this.item2,this.item3,this.item4];for(var t=0;t<4;t++)this.items[t].visible=!1;for(var e=a.instance.getCfgById(46006)[1],i=0,n=(t=0,e.length);t<n;t+=2)this.items[t/2>>0].dataSource=[e[t],e[t+1],0,null],this.items[t/2>>0].visible=!0,i++;if(0<i){var s=(this.width-100*i-15*(i-1))/2;for(t=0;t<i;t++)this.items[t].x=s+100*t+15*t}this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",15),this._btnClip.pos(-4,-8),this._btnClip.scale(1,1,!0),this._btnClip.play(),this._btnClip.visible=!1},n.prototype.sureBtnHandler=function(){1===e.ThreeSevenBoxModel.instance.drawState?e.ThreeSevenBoxCtrl.instance.draw37BoxReward():0===e.ThreeSevenBoxModel.instance.drawState&&(WindowManager.instance.open(1530),e.ThreeSevenBoxModel.instance.clickState=!0,this.close())},n.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("THREE_SEVEN_BOX_UPDATE",this,this.updateView)},n.prototype.onOpened=function(){o.prototype.onOpened.call(this),this.updateView()},n.prototype.updateView=function(){0===e.ThreeSevenBoxModel.instance.drawState?(this.sureBtn.visible=!0,e.ThreeSevenBoxModel.instance.clickState?(CustomClip.thisStop(this._btnClip),this.sureBtn.label="领取"):(CustomClip.thisPlay(this._btnClip),this.sureBtn.label="立即下载")):1===e.ThreeSevenBoxModel.instance.drawState?(CustomClip.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.sureBtn.label="领取"):2===e.ThreeSevenBoxModel.instance.drawState?(CustomClip.thisStop(this._btnClip),this.sureBtn.visible=!1):(CustomClip.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.sureBtn.label="立即下载")},n.prototype.destroy=function(){this.items=this.destroyElement(this.items),this._btnClip=this.destroyElement(this._btnClip),o.prototype.destroy.call(this)},i=n,e.ThreeSevenBoxAwardAlert=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="spring_scenery/image_sypd_bg05.jpg",t.titleTxt.text="梨园连充",t}e=t.spring_scenery_continuous_pay||(t.spring_scenery_continuous_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SpringSceneryContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.SpringSceneryContinuousPayItem},o.prototype.getRestTime=function(){return e.SpringSceneryContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(1035)},o.prototype.getMoneyAcc=function(){return e.SpringSceneryContinuousPayModel.instance.moneyAcc},s=o,e.SpringSceneryContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="spring_scenery/image_sypd_bg06.jpg",t.titleTxt.text="每日累充",t}e=t.spring_scenery_cumulate_pay||(t.spring_scenery_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SpringSceneryCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.SpringSceneryCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(1036)},s=o,e.SpringSceneryCumulatePayPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="spring_scenery/image_sypd_bg08.jpg",t}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SpringSceneryFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryFestConLoginPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="spring_scenery/image_sypd_bg15.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(278,336,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this._festType=t.festival.FestivalModel.instance.SpringSceneryType},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.SpringSceneryFestHilarityPanel=n}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.spring_scenery_festival||(s.spring_scenery_festival={}),o=s.festival.FestDoubleRewardBasePanel,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.bgImg.skin="spring_scenery/image_sypd_bg13.jpg",this.foureTxt.innerHTML="",this.fiveTxt.innerHTML="";var t=CommonUtil.getColorById(15040066),e=CommonUtil.getColorById(13240073),i=CommonUtil.getNameByItemId(15040066),n=CommonUtil.getNameByItemId(13240073);this.oneTxt.innerHTML="活动期间内,参与玩法可掉落<span style='color:"+t+"'>"+i+"</span>或<span style='color:"+e+"'>"+n+"</span>",this.TwoTxt.innerHTML="<span style='color:"+t+"'>"+i+"</span>可在<span style='color:#50ff28'>【梨园兑换】</span>中兑换稀有奖励",this.threeTxt.innerHTML="<span style='color:"+e+"'>"+n+"</span>可在<span style='color:#50ff28'>【藏宝之地】</span>中用于探寻宝藏",this.rightBtn.visible=!1,this.leftBtn.visible=!0,this.leftBtn.x=251,this.leftBtn.label="前往挑战",this.text1.y=this.timeTxt.y=871,this.oneTxt.y=921,this.TwoTxt.y=952,this.threeTxt.y=984,this._festType=s.festival.FestivalModel.instance.SpringSceneryType},i.prototype.leftHandler=function(){WindowManager.instance.open(33)},i.prototype.rightHandler=function(){WindowManager.instance.open(194)},e=i,t.SpringSceneryFestDoubleRewardPanel=e}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="spring_scenery/image_sypd_bg03.jpg",t}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SpringSceneryFestDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryFestDailyRewardPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.SpringSceneryType,this._funcId=1043},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="spring_scenery/image_sypd_bg12.png",this.v.closeBtn.skin="common/btn_0yg_close.png",this.v.bgImg.y=184,this.v.tipTxt.pos(279,336,!0),this.v.closeBtn.pos(604,242,!0),this.v.stateImg.pos(326,551,!0),this.v.goBtn.pos(283,542,!0),this.v.rewardBox.pos(169,394,!0),this.v.tipTxt.text="梨园特惠,限时首充",this.v.tipTxt.color="#ffffff",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.SpringSceneryFestFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_store||(t.spring_scenery_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SpringSceneryStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.SpringSceneryStoreItem},o.prototype.getRestTime=function(){return e.SpringSceneryStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(1044)},s=o,e.SpringSceneryStorePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),i=t.festival.ConvertBasePanel,__extends(s,i),Object.defineProperty(s.prototype,"itemId1",{get:function(){return 15040066},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemId2",{get:function(){return 15050104},enumerable:!0,configurable:!0}),s.prototype.getItemClass=function(){return e.SpringSceneryFestConvertItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),s.prototype.goHandler=function(){WindowManager.instance.open(1555)},s.prototype.setUI=function(){this.bgImg.skin="spring_scenery/image_sypd_bg10.jpg",this.titileTxt.text="梨园兑换"},Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"SPRING_SCENERY_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryFestConvertPanel=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=i.call(this)||this;return t.showTip(),t}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),n=ui.FestAlertUI,s=t.config.BlendCfg,i=n,__extends(a,i),a.prototype.showTip=function(){this.height=this.bgImg.height=this.backTxt.y=486,this.bgImg3.visible=this.tipHtml3.visible=this.titleImg3.visible=this.titleTxt3.visible=!1;var t=CommonUtil.getNameByItemId(15040066),e=CommonUtil.getNameByItemId(15050104);this.titleTxt1.text="【"+t+"】来源",this.titleTxt2.text="【"+e+"】来源",CommonUtil.setHTMLPro(this.tipHtml1,"#4c5e8a","SimHei",22),CommonUtil.setHTMLPro(this.tipHtml2,"#4c5e8a","SimHei",22),this.tipHtml1.style.leading=this.tipHtml2.style.leading=2,this.tipHtml1.innerHTML=s.instance.getCfgById(67040)[2][0],this.tipHtml2.innerHTML=s.instance.getCfgById(67041)[2][0]},o=a,e.SpringSceneryFestAlert=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_good_man||(t.spring_scenery_good_man={}),i=t.festival.GoodManBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.SpringSceneryType},s.prototype.btn3Handler=function(){WindowManager.instance.open(1561)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.titleTxt.text="赠送脸谱"},n=s,e.SpringSceneryGoodManPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_star||(t.spring_scenery_star={}),i=t.festival.StarBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SpringSceneryStarItem},s.prototype.setUI=function(){this.v.titleTxt.text="梨园轶事",this.v.text1.text="我收到的脸谱:"},s.prototype.setPos=function(){this.v.activityText1.pos(63,103,!0),this.v.activityText.pos(221,103,!0)},s.prototype.setPos1=function(){this.v.activityText1.pos(130,103,!0)},s.prototype.initialize=function(){this._festType=t.festival.FestivalModel.instance.SpringSceneryType,this._funcId=1046,i.prototype.initialize.call(this),this._windowEnumID=1562,this._windowEnumID1=1558,this._avatarClip.scale(1.2,1.2)},n=s,e.SpringSceneryStarPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_star||(t.spring_scenery_star={}),i=t.single_dog_sart.SingleDogSartAlert,__extends(s,i),Object.defineProperty(s.prototype,"broadcastId",{get:function(){return 138},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryStarAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_score_rank||(t.spring_scenery_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SpringSceneryScoreRankItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),s.prototype.getFuncOpen=function(){return t.funcOpen.FuncOpenModel.instance.getFuncIsOpen(1049)},s.prototype.openWin=function(){WindowManager.instance.open(1557)},s.prototype.getRp=function(){return t.redPoint.RedPointCtrl.instance.getRPProperty("springSceneryParty4RP")},s.prototype.setBg=function(){this.bgImg.skin="spring_scenery/image_sypd_bg09.jpg"},s.prototype.setUI=function(){this.integralDescriptionText.text="赠送1张"+t.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+"获得1积分"},n=s,e.SpringSceneryScoreRankPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_yu_lan||(t.spring_scenery_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SpringSceneryYuLanItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),s.prototype.setUI=function(){this.bgImg.skin="spring_scenery/image_sypd_bg14.jpg",this.titleImg.skin="spring_scenery/image_sypd_pdxd.png",this.titleImg.visible=!0,this.BG.visible=!1,this.rewardShowItem.y=420,this.text1.text="我收到的脸谱:",this.titleImg.y=163,this.rewardShowItem.scale(1.25,1.25)},s.prototype.setMoXing=function(){this.rewardShowItem.fashionModelPosY=142,this.rewardShowItem.shenBingModelPosY=150,this.rewardShowItem.tianZhuModelPosY=130},n=s,e.SpringSceneryYuLanPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_good_man||(t.spring_scenery_good_man={}),i=t.single_dog_good_man.SingleDogGoodManAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryGoodManAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_good_man||(t.spring_scenery_good_man={}),i=t.single_dog_good_man.SingleDogGoodManJiLuAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryGoodManJiLuAlert=n}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="spring_scenery/image_sypd_bg01.jpg",t}a=t.spring_scenery_single_pay||(t.spring_scenery_single_pay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.SpringScenerySinglePayModel.instance.getState(t[1],i),o=a.SpringScenerySinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.SpringScenerySinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.SpringScenerySinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(1037)},n=s,a.SpringScenerySinglePayPanel=n}(modules=modules||{}),function(e){var t,i,n,s;function o(){var t=i.call(this)||this;return t.typeNum=e.festival.FestivalModel.instance.SpringSceneryType,t.bgImg.skin="spring_scenery/image_sypd_bg04.jpg",t.titleTxt.text="梨园累消",t}t=e.spring_scenery_seven_days_consume||(e.spring_scenery_seven_days_consume={}),n=e.funcOpen.FuncOpenModel,i=e.festival.SevenDaysConsumeBasePanel,__extends(o,i),o.prototype.getDatas=function(){return t.SpringScenerySevenDaysConsumeModel.instance.rewardList},o.prototype.getItemClass=function(){return t.SpringScenerySevenDaysConsumeItem},o.prototype.getRestTime=function(){return t.SpringScenerySevenDaysConsumeModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(1038)},s=o,t.SpringScenerySevenDaysConsumePanel=s}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,p,c,u,d,m,y,f,g,_,v,b,T,C,I,B,x,S,P,M,w,E,A,R,k,L,U,H,G,O,D,N,W,F,z,q,j,V,Y,Q,Z,X,K,J,$,tt,et,it,nt,st,ot,at,rt,lt,ht,pt,ct,ut,dt,mt,yt,ft,gt,_t,vt,bt,Tt,Ct,It,Bt,xt,St,Pt,Mt,wt,Et,At,Rt,kt,Lt,Ut,Ht,Gt,Ot,Dt,Nt,Wt,Ft,zt,qt,jt,Vt,Yt,Qt,Zt,Xt,Kt,Jt,$t,te,ee,ie,ne,se,oe,ae,re,le,he,pe,ce,ue,de,me,ye,fe,ge,_e,ve,be,Te,Ce,Ie,Be,xe,Se,Pe,Me,we,Ee,Ae,Re,ke,Le,Ue,He,Ge,Oe,De,Ne,We,Fe,ze,qe,je,Ve,Ye,Qe,Ze,Xe,Ke,Je,$e,ti,ei,ii,ni,si,oi;function ai(){this.windowInfos=[[1361,1,i,null,["res/atlas/strongest_marry.atlas","res/atlas/pvp_tab.atlas"],1,901,6e4],[1354,1,o,null,["res/atlas/strongest_marry.atlas"],0,0,6e4],[1355,1,a,null,["res/atlas/strongest_marry.atlas"],0,0,6e4],[1356,1,r,null,["res/atlas/strongest_marry.atlas","res/atlas/guide.atlas"],0,0,6e4],[1357,1,l,null,["res/atlas/strongest_marry.atlas","res/atlas/guide.atlas"],0,0,6e4],[1352,1,n,null,["res/atlas/strongest_marry.atlas"],0,0,6e4],[1377,1,u,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1378,1,d,null,["res/atlas/common.atlas","res/atlas/boss_home.atlas","res/atlas/nothingness_world.atlas","res/atlas/nether_world.atlas"],0,0,6e4],[1379,1,m,null,["res/atlas/common.atlas","res/atlas/team_battle.atlas","res/atlas/nothingness_world.atlas","res/atlas/nether_world.atlas","nothingness_world/image_xwj_bg1.jpg"],1,918,6e4],[1372,1,g,null,["res/atlas/soul_war.atlas"],1,919,6e4],[1373,1,b,null,["res/atlas/soul_war.atlas"],1,920,6e4],[1413,1,x,null,["res/atlas/common.atlas","res/atlas/team_warfare.atlas","res/atlas/union_war.atlas","res/atlas/pvp_tab.atlas"],1,939,6e4],[1414,1,S,null,["res/atlas/common.atlas","res/atlas/team_warfare.atlas"],0,0,6e4],[1415,1,P,null,["res/atlas/common.atlas","res/atlas/team_warfare.atlas"],0,0,6e4],[1416,1,M,null,["res/atlas/common.atlas","res/atlas/team_warfare.atlas"],0,0,6e4],[1418,1,R,null,["res/atlas/common.atlas","res/atlas/team_warfare.atlas"],0,0,6e4],[1453,1,O,null,["res/atlas/common.atlas","res/atlas/team_warfare.atlas"],0,0,6e4],[1392,1,N,null,["res/atlas/space_travel.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","res/atlas/zxian_yu.atlas","res/atlas/national_day.atlas","national_day/image_gqhd_bg.jpg","res/atlas/pay_plate.atlas","pay_plate/image_czzp_btg.png","pay_plate/image_czzp_gxbg.png","treasure/imge_xb_bgbottom.png"],1,928,6e4],[1396,1,j,null,["res/atlas/common.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas","res/atlas/kuanghuan.atlas"],1,929,6e4],[1399,1,Y,null,["summer_day/image_zltq_bg08.jpg","res/atlas/kuanghuan.atlas"],1,930,6e4],[1402,1,Z,null,["res/atlas/common.atlas","summer_day/image_zltq_bg03.jpg","res/atlas/kuanghuan.atlas"],1,933,6e4],[1404,1,K,null,["res/atlas/common.atlas","summer_day/image_zltq_bg04.jpg","res/atlas/kuanghuan.atlas"],1,934,6e4],[1403,1,X,null,["res/atlas/common.atlas","summer_day/image_zltq_bg06.jpg","res/atlas/kuanghuan.atlas"],1,935,6e4],[1400,1,J,null,["summer_day/image_zltq_bg05.jpg","res/atlas/kuanghuan.atlas"],1,931,6e4],[1405,1,$,null,["summer_day/image_zltq_bg07.jpg"],1,936,6e4],[1407,1,Q,null,["res/atlas/kuanghuan.atlas","summer_day/image_zltq_bg01.jpg"],1,938,6e4],[1406,1,tt,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","summer_day/image_zltq_bg02.jpg","kuanghuan/image_qmkh_bg.jpg"],1,937,6e4],[1408,1,nt,null,["res/atlas/welfare_place.atlas"],1,940,6e4],[1409,1,et,null,["res/atlas/welfare_place.atlas"],1,942,6e4],[1410,1,st,null,["res/atlas/welfare_place.atlas"],1,943,6e4],[1411,1,it,null,["res/atlas/welfare_place.atlas","res/atlas/dungeon.atlas"],0,0,6e4],[1412,1,ot,null,["res/atlas/welfare_place.atlas","res/atlas/spirit_dungeon.atlas","res/atlas/dungeon.atlas"],0,0,6e4],[1450,1,at,null,["res/atlas/welfare_place.atlas","res/atlas/spirit_dungeon.atlas","res/atlas/dungeon.atlas"],0,0,6e4],[1428,1,ht,null,["res/atlas/kuanghuan.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg12.jpg"],1,950,6e4],[1429,1,pt,null,["res/atlas/kuanghuan.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg08.jpg"],1,952,6e4],[1430,1,ct,null,["res/atlas/kuanghuan.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg09.jpg"],1,953,6e4],[1431,1,ut,null,["res/atlas/kuanghuan.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg10.jpg"],1,954,6e4],[1432,1,yt,null,["res/atlas/kuanghuan.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg10.jpg"],1,955,6e4],[1433,1,dt,null,["res/atlas/single_dog.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg03.jpg"],1,956,6e4],[1434,1,mt,null,["res/atlas/single_dog.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg13.jpg"],1,957,6e4],[1435,1,ft,ui.PerfectestTenSartViewUI,["res/atlas/single_dog.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg01.jpg"],1,958,6e4],[1436,1,gt,ui.PerfectestTenGoodManViewUI,["res/atlas/single_dog.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg07.jpg"],1,1030,6e4],[1437,1,_t,null,["res/atlas/single_dog.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg02.jpg"],1,960,6e4],[1438,1,vt,null,["res/atlas/single_dog.atlas","res/atlas/soaring_rank.atlas","res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg11.jpg"],1,961,6e4],[1447,1,Bt,null,["res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg16.jpg"],1,962,6e4],[1445,1,xt,null,["res/atlas/perfectest_ten.atlas","res/atlas/common.atlas","res/atlas/fest_convert.atlas","res/atlas/halloween.atlas","perfectest_ten/image_zzqy_bg15.jpg"],1,963,6e4],[1443,1,Pt,null,["res/atlas/perfectest_ten.atlas","res/atlas/kuanghuan.atlas","perfectest_ten/image_qypd_bg01.jpg"],1,964,6e4],[1459,1,Mt,ui.BrahmaPayViewUI,["res/atlas/common.atlas","susan_slade/image_zhft_dt.jpg"],1,969,6e4],[1457,1,Et,ui.SkyBookPayViewUI,["res/atlas/common.atlas","susan_slade/image_tslc_01.jpg"],1,967,6e4],[1460,1,Kt,null,["res/atlas/tianshu.atlas"],0,0,6e4],[1462,1,Jt,null,["res/atlas/tianshu.atlas"],0,0,6e4],[1488,1,ne,null,["res/atlas/tianshu.atlas"],1,977,6e4],[1482,1,se,null,["res/atlas/motongjiangshi.atlas"],1,979,6e4],[1465,1,Rt,null,["res/atlas/brahma_equip.atlas","brahma_equip/image_ftzb_bg01.jpg"],1,972,6e4],[1466,1,kt,null,["res/atlas/brahma_equip.atlas","res/atlas/compose.atlas","brahma_equip/image_ftzb_bg05.jpg"],1,974,6e4],[1467,1,Lt,null,["res/atlas/brahma_equip.atlas","brahma_equip/image_ftzb_bg03.jpg"],1,973,6e4],[1468,1,Ut,null,["res/atlas/brahma_equip.atlas","brahma_equip/image_ftzb_bg02.jpg"],1,975,6e4],[1469,1,zt,null,["res/atlas/common.atlas","res/atlas/trahman_boss.atlas","res/atlas/dungeon.atlas"],0,0,6e4],[1470,1,qt,null,["res/atlas/common.atlas","res/atlas/trahman_boss.atlas"],0,0,6e4],[1474,1,Qt,null,["res/atlas/common.atlas","res/atlas/trahman_boss.atlas","res/atlas/player.atlas","res/atlas/boss_home.atlas","res/atlas/pvp_tab.atlas","team_warfare/image_zdzl_bg16.png"],1,971,6e4],[1493,1,re,null,["res/atlas/halo.atlas"],1,987,6e4],[1497,1,pe,null,["res/atlas/common.atlas","res/atlas/team_warfare.atlas"],0,0,6e4],[1500,1,me,null,["res/atlas/team_warfare.atlas","res/atlas/gather.atlas"],0,0,6e4],[1491,1,ue,null,["res/atlas/ranking_list.atlas","res/atlas/team_battle.atlas","res/atlas/exercise.atlas","ranking_list/bj_paihangbang_2.jpg","exercise/bj_lilian_1.jpg","exercise/msz_tongyong_3.png","qq/img_nf_blue_icon.png","qq/clip_blue_vip_icon1.png","qq/clip_blue_vip_icon2.png","qq/clip_blue_vip_icon3.png"],1,982,6e4],[1492,1,de,null,["res/atlas/ranking_list.atlas","res/atlas/team_battle.atlas","res/atlas/exercise.atlas","ranking_list/bj_paihangbang_2.jpg","exercise/bj_lilian_1.jpg","exercise/msz_tongyong_3.png","qq/img_nf_blue_icon.png","qq/clip_blue_vip_icon1.png","qq/clip_blue_vip_icon2.png","qq/clip_blue_vip_icon3.png"],1,983,6e4],[1514,1,fe,null,["res/atlas/wx_sidebar.atlas"],1,0,6e4],[1516,1,ve,null,["res/atlas/nian_end_happy.atlas","nian_end_happy/image_nzkh_05.jpg"],1,1011,6e4],[1519,1,_e,null,["res/atlas/kuanghuan.atlas","res/atlas/nian_end_happy.atlas"],1,1014,6e4],[1520,1,ge,null,["res/atlas/kuanghuan.atlas","res/atlas/nian_end_happy.atlas"],1,1015,6e4],[1517,1,be,null,["res/atlas/common.atlas","res/atlas/nian_end_happy.atlas","res/atlas/ranking_list.atlas"],1,1012,6e4],[1521,1,Ce,null,["res/atlas/nian_end_happy.atlas"],1,1012,6e4],[1522,1,Te,null,["res/atlas/nian_end_happy.atlas"],1,1012,6e4],[1542,1,Ie,null,["res/atlas/faerie_demon.atlas","res/atlas/team_battle.atlas","team_battle/image_zdfb_bg1.jpg"],1,1005,6e4],[1556,1,Je,ui.SpringScenerySartViewUI,["res/atlas/single_dog.atlas","res/atlas/spring_scenery.atlas","spring_scenery/image_sypd_bg07.jpg"],1,1046,6e4],[1557,1,Ke,ui.SpringSceneryGoodManViewUI,["res/atlas/single_dog.atlas","res/atlas/spring_scenery.atlas","spring_scenery/image_sypd_bg16.jpg"],1,1047,6e4],[1558,1,ti,null,["res/atlas/single_dog.atlas","res/atlas/spring_scenery.atlas","spring_scenery/image_sypd_bg14.jpg"],1,1048,6e4],[1559,1,$e,null,["res/atlas/single_dog.atlas","res/atlas/soaring_rank.atlas","res/atlas/spring_scenery.atlas","spring_scenery/image_sypd_bg09.jpg"],1,1049,6e4],[1545,1,Fe,null,["res/atlas/kuanghuan.atlas","res/atlas/spring_scenery.atlas","spring_scenery/image_sypd_bg05.jpg"],1,1035,6e4],[1546,1,ze,null,["res/atlas/kuanghuan.atlas","res/atlas/spring_scenery.atlas","spring_scenery/image_sypd_bg06.jpg"],1,1036,6e4],[1547,1,qe,null,["res/atlas/spring_scenery.atlas","res/atlas/kuanghuan.atlas","spring_scenery/image_sypd_bg08.jpg"],1,1039,6e4],[1548,1,je,null,["res/atlas/spring_scenery.atlas","spring_scenery/image_sypd_bg15.jpg"],1,1040,6e4],[1549,1,Ve,null,["res/atlas/spring_scenery.atlas","spring_scenery/image_sypd_bg13.jpg"],1,1041,6e4],[1550,1,Ye,null,["res/atlas/spring_scenery.atlas","res/atlas/kuanghuan.atlas","spring_scenery/image_sypd_bg03.jpg"],1,1042,6e4],[1552,1,Ze,null,["res/atlas/common.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas"],1,1044,6e4],[1554,1,We,null,["res/atlas/spring_scenery.atlas","res/atlas/common.atlas","res/atlas/fest_convert.atlas","res/atlas/halloween.atlas","spring_scenery/image_sypd_bg10.jpg"],1,1045,6e4],[1563,1,si,null,["res/atlas/spring_scenery.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","spring_scenery/image_sypd_bg01.jpg"],1,1037,6e4],[1564,1,oi,null,["res/atlas/spring_scenery.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","spring_scenery/image_sypd_bg04.jpg","kuanghuan/image_qmkh_bg.jpg"],1,1038,6e4],[1353,2,s,null,["res/atlas/strongest_marry.atlas"],0,0,6e4],[1358,2,h,null,["res/atlas/strongest_marry.atlas"],0,0,6e4],[1359,2,p,null,["res/atlas/strongest_marry.atlas"],0,0,6e4],[1360,2,c,null,["res/atlas/strongest_marry.atlas"],0,0,6e4],[1380,2,y,null,["res/atlas/common.atlas"],0,0,6e4],[1381,2,f,null,["res/atlas/common.atlas"],0,0,6e4],[1375,2,T,null,["res/atlas/soul_war.atlas"],0,0,6e4],[1374,2,v,null,["res/atlas/soul_war.atlas"],0,0,6e4],[1376,2,_,null,["res/atlas/soul_war.atlas"],0,0,6e4],[1382,2,C,null,["res/atlas/soul_war.atlas"],0,0,6e4],[1417,2,w,null,["res/atlas/team_warfare.atlas"],0,0,0],[1419,2,E,null,["res/atlas/common.atlas"],0,0,0],[1420,2,A,null,["res/atlas/team_warfare.atlas"],0,0,0],[1421,2,k,null,["res/atlas/team_warfare.atlas","res/atlas/union_war.atlas","res/atlas/peak_duel.atlas"],0,0,0],[1422,2,L,null,["res/atlas/common.atlas"],0,0,0],[1423,2,U,null,["res/atlas/team_warfare.atlas"],0,0,0],[1424,2,H,null,["res/atlas/team_warfare.atlas"],0,0,0],[1425,2,G,null,["res/atlas/team_warfare.atlas"],0,0,0],[1455,2,D,null,["res/atlas/team_warfare.atlas","res/atlas/welfare_place.atlas"],0,0,0],[1393,2,W,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[1394,2,F,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[1395,2,z,null,["res/atlas/single_dog.atlas","res/atlas/zxian_yu.atlas","treasure/title0_xunbao.png","zxian_yu/image_xy_bg.jpg","zxian_yu/image_xy_bg02.jpg","treasure/imge_xb_bgbottom.png","zxian_yu/image_xy_bg04.jpg","zxian_yu/image_xy_xsbg.jpg"],0,0,6e4],[1398,2,q,null,["res/atlas/store.atlas","res/atlas/li_dong.atlas","res/atlas/common.atlas"],0,0,6e4],[1401,2,V,ui.ChildrensDayFirstPayAlertUI,["res/atlas/common.atlas","summer_day/image_zltq_01.png","res/atlas/space_travel.atlas"],0,932,6e4],[1449,2,rt,null,["res/atlas/common.atlas"],0,0,6e4],[1448,2,lt,null,["res/atlas/common.atlas"],0,0,6e4],[1484,2,ae,null,["res/atlas/common.atlas"],0,0,6e4],[1440,2,Ct,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1441,2,It,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1442,2,Tt,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1439,2,bt,ui.ChildrensDayFirstPayAlertUI,["res/atlas/perfectest_ten.atlas","perfectest_ten/image_zzqy_bg04.png"],0,951,6e4],[1446,2,St,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1458,2,wt,ui.BrahmaBuyAlertUI,["res/atlas/common.atlas","res/atlas/brahma_buy.atlas","brahma_buy/image_ftzg_bg01.png"],0,0,6e4],[1456,2,At,ui.SkyBookBuyAlertUI,["res/atlas/common.atlas","res/atlas/sky_book_buy.atlas","sky_book_buy/image_tszg_01.png"],0,0,6e4],[1471,2,jt,null,"res/atlas/trahman_boss.atlas",0,0,0],[1472,2,Vt,null,"res/atlas/lose.atlas",0,0,0],[1473,2,Yt,null,"res/atlas/lose.atlas",0,0,0],[1475,2,Zt,null,"res/atlas/win.atlas",0,0,0],[1479,2,Ht,null,["res/atlas/tianshu.atlas"],0,976,6e4],[1480,2,Gt,null,["res/atlas/tianshu.atlas"],0,0,6e4],[1481,2,Ot,null,["res/atlas/common.atlas"],0,0,6e4],[1486,2,Dt,null,["res/atlas/common.atlas"],0,0,6e4],[1485,2,Nt,null,["res/atlas/common.atlas"],0,0,6e4],[1487,2,Wt,null,["res/atlas/common.atlas"],0,0,6e4],[1461,2,Xt,null,["res/atlas/tianshu.atlas"],0,0,6e4],[1463,2,$t,null,["res/atlas/tianshu.atlas"],0,0,6e4],[1464,2,te,null,["res/atlas/tianshu.atlas"],0,0,6e4],[1478,2,ee,null,["res/atlas/tianshu.atlas"],0,0,6e4],[1477,2,ie,null,["res/atlas/tianshu.atlas"],0,0,6e4],[1483,2,oe,null,["res/atlas/common.atlas"],0,0,6e4],[1596,2,Ft,null,["res/atlas/common.atlas"],0,0,6e4],[1496,2,le,null,["res/atlas/dungeon.atlas"],0,0,6e4],[1490,2,he,null,["res/atlas/hudie.atlas"],0,986,6e4],[1494,1,I,null,"res/atlas/common.atlas",1,981,6e4],[1498,2,B,null,"res/atlas/common.atlas",1,988,6e4],[1499,2,ce,null,["res/atlas/common.atlas","res/atlas/send_q_coins.atlas","send_q_coins/image_qbhd_01.png"],1,989,6e4],[1501,2,ye,null,["res/atlas/common.atlas"],0,0,6e4],[1508,2,t.direct_ex.DirectBuyExtremeAlert,ui.DirectBuyExtremeAlertUI,["res/atlas/common.atlas","res/atlas/direct_ex.atlas","direct_ex/image_zg_04.png"],0,994,6e4],[1509,2,t.direct_ex.DirectBuyYuanShenEquipAlert,ui.DirectBuyYuanShenEquipAlertUI,["res/atlas/common.atlas","res/atlas/direct_ex.atlas","direct_ex/image_zg_06.png"],0,995,6e4],[1510,2,t.direct_ex.DirectBuyYuanShenWeaponAlert,ui.DirectBuyYuanShenWeaponAlertUI,["res/atlas/common.atlas","res/atlas/direct_ex.atlas","direct_ex/image_zg_01.png"],0,996,6e4],[1511,2,t.direct_ex.DirectBuyYuanShenCardAlert,ui.DirectBuyYuanShenCardAlertUI,["res/atlas/common.atlas","res/atlas/direct_ex.atlas","direct_ex/image_zg_05.png"],0,997,6e4],[1512,2,t.direct_ex.DirectBuyBobyAlert,ui.DirectBuyBobyAlertUI,["res/atlas/common.atlas","res/atlas/direct_ex.atlas","direct_ex/image_zg_02.png"],0,998,6e4],[1513,2,t.direct_ex.DirectBuyBobySkillAlert,ui.DirectBuyBobySkillAlertUI,["res/atlas/common.atlas","res/atlas/direct_ex.atlas","direct_ex/image_zg_03.png"],0,999,6e4],[1515,2,t.direct_ex.DirectBuyYuanShenStoneAlert,ui.DirectBuyYuanShenStoneAlertUI,["res/atlas/common.atlas","res/atlas/direct_ex.atlas","direct_ex/image_zg_07.png"],0,1008,6e4],[1541,2,ke,null,["res/atlas/faerie_demon.atlas","res/atlas/compose.atlas","res/atlas/guide.atlas","res/atlas/boss_home.atlas","faerie_demon/image_xmdj_bg2.jpg"],0,0,6e4],[1534,2,Se,null,"res/atlas/common.atlas",0,0,6e4],[1535,2,Pe,null,"res/atlas/common.atlas",0,0,6e4],[1536,2,Me,null,"res/atlas/common.atlas",0,0,6e4],[1537,2,we,null,"res/atlas/common.atlas",0,0,6e4],[1538,2,Ee,null,"res/atlas/common.atlas",0,0,6e4],[1539,2,Ae,null,"res/atlas/common.atlas",0,0,6e4],[1543,2,Re,null,["res/atlas/faerie_demon.atlas","res/atlas/team_battle.atlas","team_battle/image_zdfb_bg1.jpg"],0,0,6e4],[1533,2,Be,null,["res/atlas/common.atlas","res/atlas/faerie_demon.atlas"],0,0,6e4],[1540,2,xe,null,["res/atlas/common.atlas","res/atlas/faerie_demon.atlas"],0,0,6e4],[1526,2,Le,null,["res/atlas/phone_qq_red_bag.atlas","phone_qq_red_bag/image_qqhbhd_01.png"],0,0,6e4],[1527,2,He,null,["res/atlas/phone_qq_red_bag.atlas","phone_qq_red_bag/image_qqhbhd_02.png"],0,0,6e4],[1528,2,Ue,null,["res/atlas/phone_qq_red_bag.atlas"],0,0,6e4],[1529,2,Ge,null,["res/atlas/common.atlas"],0,0,6e4],[1532,1,Oe,null,["res/atlas/common.atlas"],0,0,6e4],[1531,2,De,null,["res/atlas/common.atlas"],0,1025,6e4],[1530,2,Ne,null,["res/atlas/common.atlas"],0,1025,6e4],[1555,2,Xe,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1551,2,Qe,ui.ChildrensDayFirstPayAlertUI,["res/atlas/spring_scenery.atlas","res/atlas/common.atlas","spring_scenery/image_sypd_bg12.png"],0,1043,6e4],[1562,2,ni,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1560,2,ei,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1561,2,ii,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4]]}e=t.subpack1||(t.subpack1={}),i=t.strongest_marry.StrongestMarryPanel,n=t.strongest_marry.StrongestMarryCenterTipsPanel,s=t.strongest_marry.StrongestMarryChoiceSkillAlert,o=t.strongest_marry.StrongestMarryCopyCenterPanel,a=t.strongest_marry.StrongestMarryCopyLeftPanel,r=t.strongest_marry.StrongestMarryCopyRightBottonPanel,l=t.strongest_marry.StrongestMarryCopyRightPanel,h=t.strongest_marry.StrongestMarryGuessAlert,p=t.strongest_marry.StrongestMarryRankAlert,c=t.strongest_marry.StrongestMarryRankRewardAlert,u=t.nether_world.NetherWorldCopyRightPanel,d=t.nether_world.NetherWorldLeftPanel,m=t.nether_world.NetherWorldPanel,y=t.nether_world.NetherWorldRankRewardAlert,f=t.nether_world.NetherWorldRewordPreviewAlert,g=t.soul_war.SoulNinghunPanel,_=t.soul_war.SoulLianhunAlert,v=t.soul_war.SoulNinghunSkillAlert,b=t.soul_war.SoulZhanhunPanel,T=t.soul_war.SoulZhanhunSkillAlert,C=t.soul_war.SoulFightSkillAlert,I=t.weekCard.WeekCardPanel,B=t.bindPhone.BindPhoneAlert,x=t.team_warfare.TeamWarfarePanel,S=t.team_warfare.TeamWarfareSportsCopyRightPanel,P=t.team_warfare.TeamWarfareSportsCopyRightPanel1,M=t.team_warfare.TeamWarfareSportsCopyTopPanel,w=t.team_warfare.TeamWarfareSportsCopyWinPanel,E=t.team_warfare.TeamWarfareAchievementAlert,A=t.team_warfare.TeamWarfareBattlefieldTargetAlert,R=t.team_warfare.TeamWarfareBossCopyRightPanel,k=t.team_warfare.TeamWarfareDuelAlert,L=t.team_warfare.TeamWarfareHurtRewardAlert,U=t.team_warfare.TeamWarfareMoBaiAlert,H=t.team_warfare.TeamWarfareRankRewardAlert,G=t.team_warfare.TeamWarfareRankAlert,O=t.team_warfare.TeamWarfareSportsCopyRightPanel2,D=t.team_warfare.TeamWarfareseeAlert,N=t.space_travel_treasure.SpaceTravelTreasurePanel,W=t.space_travel_treasure.SpaceTravelTreasureRankAlert,F=t.space_travel_treasure.SpaceTravelTreasureRankAwardAlert,z=t.space_travel_treasure.SpaceTravelTreasureAlert,q=t.space_travel_treasure.SpaceTravelTreasureSpecialAlert,j=t.space_travel_store.SpaceTravelStorePanel,V=t.space_travel_festival.SpaceTravelFestFirstPayAlert,Y=t.space_travel_festival.SpaceTravelFestHilarityPanel,Q=t.space_travel_festival.SpaceTravelFestConLoginPanel,Z=t.space_travel_continuous_pay.SpaceTravelContinuousPayPanel,X=t.space_travel_cumulate_pay.SpaceTravelCumulatePayPanel,K=t.space_travel_single_pay.SpaceTravelSinglePayPanel,J=t.space_travel_festival.SpaceTravelFestDailyRewardPanel,$=t.space_travel_festival.SpaceTravelTeShuPanel,tt=t.space_travel_seven_days_consume.SpaceTravelSevenDaysConsumePanel,et=t.welfare_place.WelfarePlaceBossPanel,it=t.welfare_place.WelfarePlaceBossRBPanel,nt=t.welfare_place.WelfarePlaceEnterPanel,st=t.welfare_place.WelfarePlacePawnPanel,ot=t.welfare_place.WelfarePlacePawnRBPanel,at=t.welfare_place.WelfarePlaceBossTimePanel,rt=t.welfare_place.WelfarePlaceAwardAlert,lt=t.welfare_place.WelfarePlaceInspireAlert,ht=t.perfectest_ten_festival.PerfectestTenFestivalDailyRewardPanel,pt=t.perfectest_ten_single_pay.PerfectestTenSinglePayPanel,ct=t.perfectest_ten_cumulate_pay.PerfectestTenCumulatePayPanel,ut=t.perfectest_ten_continuous_pay.PerfectestTenContinuousPayPanel,dt=t.perfectest_ten_festival.PerfectestTenFestivalHilarityPanel,mt=t.perfectest_ten_pay_rank.PerfectestTenPayRankPanel,yt=t.perfectest_ten_store.PerfectestTenStorePanel,ft=t.perfectest_ten_star.PerfectestTenStarPanel,gt=t.perfectest_ten_good_man.PerfectestTenGoodManPanel,_t=t.perfectest_ten_yu_lan.PerfectestTenYuLanPanel,vt=t.perfectest_ten_score_rank.PerfectestTenScoreRankPanel,bt=t.perfectest_ten_festival.PerfectestTenFestivalFirstPayAlert,Tt=t.perfectest_ten_star.PerfectestTenStarAlert,Ct=t.perfectest_ten_good_man.PerfectestTenGoodManAlert,It=t.perfectest_ten_good_man.PerfectestTenGoodManJiLuAlert,Bt=t.perfectest_ten_festival.PerfectestTenFestDoubleRewardPanel,xt=t.perfectest_ten_festival.PerfectestTenFestConvertPanel1,St=t.perfectest_ten_festival.PerfectestTenFestAlert1,Pt=t.perfectest_ten_festival.PerfectestTenFestFestConLoginPanel,Mt=t.brahma_pay.BrahmaPayPanel,wt=t.brahma_buy.BrahmaBuyAlert,Et=t.sky_book_pay.SkyBookPayPanel,At=t.sky_book_buy.SkyBookBuyAlert,Rt=t.brahma_equip.BrahmaEquipPanel,kt=t.brahma_equip.BrahmaEquipDaZaoPanel,Lt=t.brahma_equip.BrahmaEquipIntensivePanel,Ut=t.brahma_equip.BrahmaEquipPreviewPanel,Ht=t.brahma_equip.BrahmaEquipResolveAlert,Gt=t.brahma_equip.BrahmaEquipShiHunAlert,Ot=t.brahma_equip.BrahmaEquipSelfAlert,Dt=t.brahma_equip.BrahmaEquipPreviewAlert,Nt=t.brahma_equip.BrahmaEquipBagAwardAlert,Wt=t.brahma_equip.BrahmaEquioOtherAlert,Ft=t.brahma_equip.BrahmaEquipAttrAlert,zt=t.trahman_boss.TrahmanBossCopyLeftPanel,qt=t.trahman_boss.TrahmanBossCopyRightPanel,jt=t.trahman_boss.TrahmanBossGSAlert,Vt=t.trahman_boss.TrahmanBossLoseAlert,Yt=t.trahman_boss.TrahmanBossLoseAlert1,Qt=t.trahman_boss.TrahmanBossPanel,Zt=t.trahman_boss.TrahmanBossWinPanel,Xt=t.tianshu.TianshuSkillAlert,Kt=t.tianshu.TianshuDunwuPanel,Jt=t.tianshu.TianshuJianwuPanel,$t=t.tianshu.TianshuPowerAlert,te=t.tianshu.TianshuXiulianAlert,ee=t.tianshu.TianshuXiuxiAlert,ie=t.tianshu.TianshuDunwuAlert,ne=t.tianshu.TianshuPanel,se=t.seal_deity.SealDeityPanel,oe=t.seal_deity.SealRoleAlert,ae=t.welfare_place.WelfarePlacePawnShouYiAlert,re=t.halo.HaloPanel,le=t.halo.HaloAwardAlert,he=t.hudie_platform.HudiePlatformAwardAlert,pe=t.team_warfare.TeamWarfareSportsCopyBottonPanel,ce=t.send_q_coins.SendQCoinsAlert,ue=t.ranking_list_new.RankListPlane1,de=t.ranking_list_new.RankListPlane2,me=t.team_warfare.TeamWarfareSportsCopyYunPanel,ye=t.team_warfare.TeamWarfareSportsCopyEnterAlert,fe=t.wx_sidebar.wxSidebarPanel,ge=t.nian_end_happy_daily.NianEndHappyDailyRewardPanel,_e=t.nian_end_happy_seven_days_pay.NianEndHappySevenDaysPayPanel,ve=t.nian_end_one_buy.NianEndHappyOneBuyPanel,be=t.yearEndRank.YearEndRankPanel,Te=t.yearEndRank.YearEndRankAwardPanel,Ce=t.yearEndRank.YearEndDianfengAwardPanel,Ie=t.common_group.CommonGroupRoomPanel,Be=t.common_group.CommonGroupSingleMatchAlert,xe=t.common_group.CommonGroupWaitingAlert,Se=t.common_group.CommonGroupReplaceCopyTargetAlert,Pe=t.common_group.CommonGroupReplaceCopyTargetAlert1,Me=t.common_group.CommonGroupReplaceCopyTargetAlert2,we=t.common_group.CommonGroupReplaceCopyTargetAlert3,Ee=t.common_group.CommonGroupReplaceCopyTargetAlert4,Ae=t.common_group.CommonGroupReplaceCopyTargetAlert5,Re=t.common_group.CommonGroupInviteAlert,ke=t.common_group.CommonGroupChangeAlert,Le=t.phone_qq_red_bag.PhoneQQRedBagAlert,Ue=t.phone_qq_red_bag.PhoneQQRedBagOpenAlert,He=t.phone_qq_red_bag.PhoneQQRedBagTaskAlert,Ge=t.warband.WarbandApplicantsLimitAlert,Oe=t.scene.GatherSkipPanel,De=t.three_seven_box.ThreeSevenBoxAwardAlert,Ne=t.three_seven_box.ThreeSevenBoxDownloadAlert,We=t.spring_scenery_festival.SpringSceneryFestConvertPanel,Fe=t.spring_scenery_continuous_pay.SpringSceneryContinuousPayPanel,ze=t.spring_scenery_cumulate_pay.SpringSceneryCumulatePayPanel,qe=t.spring_scenery_festival.SpringSceneryFestConLoginPanel,je=t.spring_scenery_festival.SpringSceneryFestHilarityPanel,Ve=t.spring_scenery_festival.SpringSceneryFestDoubleRewardPanel,Ye=t.spring_scenery_festival.SpringSceneryFestDailyRewardPanel,Qe=t.spring_scenery_festival.SpringSceneryFestFirstPayAlert,Ze=t.spring_scenery_store.SpringSceneryStorePanel,Xe=t.spring_scenery_festival.SpringSceneryFestAlert,Ke=t.spring_scenery_good_man.SpringSceneryGoodManPanel,Je=t.spring_scenery_star.SpringSceneryStarPanel,$e=t.spring_scenery_score_rank.SpringSceneryScoreRankPanel,ti=t.spring_scenery_yu_lan.SpringSceneryYuLanPanel,ei=t.spring_scenery_good_man.SpringSceneryGoodManAlert,ii=t.spring_scenery_good_man.SpringSceneryGoodManJiLuAlert,ni=t.spring_scenery_star.SpringSceneryStarAlert,si=t.spring_scenery_single_pay.SpringScenerySinglePayPanel,oi=t.spring_scenery_seven_days_consume.SpringScenerySevenDaysConsumePanel,e.Sub1WindowConfig=ai}(modules=modules||{}),function(t){var e,i,n;function s(){this._status=-1}e=t.bindPhone||(t.bindPhone={}),i=t.onceReward.OnceRewardModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},set:function(t){this._status=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hasGotAward",{get:function(){var t=i.instance.gotAwardIds;return!(!t||-1===t.indexOf(46005))},enumerable:!0,configurable:!0}),n=s,e.BindPhoneModel=n}(modules=modules||{}),function(t){var e,i,n;function s(){this.payGrade=121,this.endTm=0}e=t.brahma_buy||(t.brahma_buy={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getFantianBuyInfoReply=function(t){t&&(this.endTm=t[1],this.buyState=t[0],GlobalData.dispatcher.event("FIGHT_BUY_INFO_ALERT"),this.setRP())},s.prototype.setRP=function(){i.instance.setRPProperty("brahmaBuyRP",1===this.buyState)},n=s,e.BrahmaBuyModel=n}(modules=modules||{}),function(t){!function(a){var e,r=t.config.FantianGradeCfg,i=(e=ui.DaZhaoDaLeiItemUI,__extends(l,e),l.getSelectType=function(){return l._selectType},l.setSelectType=function(t){t!==l._selectType&&(l._selectType=t,GlobalData.dispatcher.event("FANTIAN_DAZAO_TCLASS_CLICK"))},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.clickBtnHandler),this.onAutoGlobalEvt("FANTIAN_DAZAO_TCLASS_CLICK",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView),this.onAutoGlobalEvt("UPDATE_FANTIAN_EQUIP",this,this.updateView)},l.prototype.clickBtnHandler=function(){if(this.tClass!==l.getSelectType()){l.setSelectType(this.tClass);for(var t=r.instance.getCfgByTclassAndSclass(this.tClass),e=this.tClass,i=t[0],n=0,s=t.length;n<s;n++){var o=r.instance.getCfgByTAndS(e,t[n]);if(a.BrahmaEquipModel.instance.getSclassRP(o)){i=t[n];break}}h.setSelectType(i)}else GlobalData.dispatcher.event("FANTIAN_DAZAO_TCLASS_SHOU_CLICK",!a.BrahmaEquipDaZaoPanel.isCloseList)},l.prototype.updateView=function(){this.btn.selected=l.getSelectType()===this.tClass,this.dataText.color=l.getSelectType()===this.tClass?"#a46547":"#3a5385";for(var t=r.instance.getCfgByTclassAndSclass(this.tClass),e=!1,i=0,n=t.length;i<n;i++)if(a.BrahmaEquipModel.instance.getSclassRP(r.instance.getCfgByTAndS(this.tClass,t[i]))){e=!0;break}this.tbnRp.visible=e},l.prototype.setData=function(t){e.prototype.setData.call(this,t),this.tClass=t,this.tbnRp.visible=!1,this.centerX=0,this.listBox.visible=!1,this.dataText.fontSize=26,this.dataText.text=r.instance.getTclassName(this.tClass),this.updateView()},l._selectType=-1,l);function l(){return null!==e&&e.apply(this,arguments)||this}a.BrahmaEquipDaZaoTclassItem=i;var n,h=(n=ui.DaZhaoXiaoLeiItemUI,__extends(s,n),s.getSelectType=function(){return s._selectType},s.setSelectType=function(t){t!==s._selectType&&(s._selectType=t,GlobalData.dispatcher.event("FANTIAN_DAZAO_SCLASS_CLICK"))},s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.clickBtnHandler),this.onAutoGlobalEvt("FANTIAN_DAZAO_SCLASS_CLICK",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView),this.onAutoGlobalEvt("UPDATE_FANTIAN_EQUIP",this,this.updateView)},s.prototype.clickBtnHandler=function(){this.sclass!==s.getSelectType()&&s.setSelectType(this.sclass)},s.prototype.updateView=function(){this.btn.selected=s.getSelectType()!=this.sclass,this.dataTextHTML.color=s.getSelectType()===this.sclass?"#a46547":"#3a5385";var t=i.getSelectType(),e=r.instance.getCfgByTAndS(t,this.sclass);this.redDot.visible=e&&a.BrahmaEquipModel.instance.getSclassRP(e)},s.prototype.setData=function(t){n.prototype.setData.call(this,t),this.centerX=0,this.sclass=t;var e=i.getSelectType();CommonUtil.setHTMLPro(this.dataTextHTML,"#3a5385","SimHei",24,"center"),this.dataTextHTML.innerHTML=r.instance.getCfgByTAndS(e,this.sclass)[1][1],this.updateView()},s._selectType=-1,s);function s(){return null!==n&&n.apply(this,arguments)||this}a.BrahmaEquipDaZaoSclassItem=h}(t.brahma_equip||(t.brahma_equip={}))}(modules=modules||{}),function(h){var p,c,r,o,u,d,m,y,t;function f(){this.showIDs=[17050006,17050007,17050008,17050009,17050010,17050011,17050012,17050013,17050014,17050015,17050016,17050017],this.partItem=[];for(var t=1;t<=12;t++)this.partItem.push([t,null])}p=h.brahma_equip||(h.brahma_equip={}),c=h.bag.BagModel,r=h.config.FantianNeiDanCfg,o=h.redPoint.RedPointCtrl,u=h.config.ItemFantianCfg,d=h.config.FantianStrongCfg,m=h.config.FantianStrongRiseCfg,y=h.config.FantianSuitCfg,Object.defineProperty(f,"instance",{get:function(){return this._instance=this._instance||new f},enumerable:!0,configurable:!0}),f.prototype.updateFantianEquipList=function(t){this.partItem=t[0],this.setRP(),GlobalData.dispatcher.event("UPDATE_FANTIAN_EQUIP"),GlobalData.dispatcher.event("UPDATE_FANTIAN_STRONF")},f.prototype.updateFantianNeidan=function(t){this.fantianNeidan=t,this.setRP(),GlobalData.dispatcher.event("UPDATE_FANTIAN_EQUIP")},f.prototype.updateFantianEquipRise=function(t){this.fantianEquipRise=t,this.setRP(),GlobalData.dispatcher.event("UPDATE_FANTIAN_RISE")},f.prototype.getPartByStrongLv=function(t){if(!this.partItem)return-1;var e=this.partItem[t-1][1];if(!e)return-1;var i=e[3];return i&&i[5]||0},f.prototype.isUpMyEquip=function(t){var e=p.BrahmaEquipUtlis.getPartById(t),i=this.partItem[e-1];if(!i[1])return!0;var n=i[1][0],s=p.BrahmaEquipUtlis.getGradeById(t);return p.BrahmaEquipUtlis.getGradeById(n)<s},f.prototype.getBrahmaEquipFight=function(){var t=0;if(this.partItem)for(var e=0,i=this.partItem.length;e<i;e++)if(this.partItem[e][1]){var n=this.partItem[e][1][0];t+=u.instance.getItemByCfg(n)[5]}if(this.fantianNeidan){var s=r.instance.getCfgByTypeAndLevel(1,this.fantianNeidan[0]);t+=s?s[4]:0;var o=r.instance.getCfgByTypeAndLevel(2,this.fantianNeidan[1]);t+=o?o[4]:0}return t+=this.getSuitFight()+this.getBrahmaEquipIntensiveFight(),Math.round(t)},f.prototype.getSuitFight=function(t){for(var e=0,i=[1,2],n=0;n<2;n++)for(var s=[2,4,6],o=0;o<3;o++){var a=this.getLimitByGrade(s[o],i[n],1,t);if(-1!==a){var r=y.instance.getSingleCfg(i[n],a,s[o]);r&&(e+=r[3])}}return Math.round(e)},f.prototype.getEquipById=function(t){var e=f.instance.partItem;return e?e[p.BrahmaEquipUtlis.getGradeById(t)-1][1]:null},f.prototype.getBrahmaEquipIntensiveFight=function(){var t=0;if(f.instance.partItem)for(var e=1;e<=12;e++){var i=f.instance.getPartByStrongLv(e),n=d.instance.getCfgByPardAndLevel(e,i);n&&(t+=n[3])}var s=f.instance.fantianEquipRise;if(s){var o=s[0],a=m.instance.getCfgByTypeAndLevel(1,o);a&&(t+=a[4]);var r=s[1],l=m.instance.getCfgByTypeAndLevel(2,r);l&&(t+=l[4])}return Math.round(t)},f.prototype.setRP=function(){this.partItem&&h.funcOpen.FuncOpenModel.instance.getFuncIsOpen(972)&&(this.setBrahmaRP1(),this.setBrahmaRP2(),this.setBrahmaRP3(),o.instance.setRPProperty("brahmaResolveRP",this.getResolveRP(1)))},f.prototype.setBrahmaRP1=function(){if(this.partItem){for(var t=!1,e=0,i=this.partItem.length;e<i;e++)if(this.getSingleBrahmaEquipRp(this.partItem[e])){t=!0;break}o.instance.setRPProperty("brahmaRP1",t||this.getNeiDanRP(1)||this.getNeiDanRP(2))}else o.instance.setRPProperty("brahmaRP1",!1)},f.prototype.setBrahmaRP3=function(){if(this.partItem){for(var t=!1,e=GlobalData.getConfig("fantian_grade"),i=0,n=e.length;i<n;i++)if(this.getSclassRP(e[i])){t=!0;break}o.instance.setRPProperty("brahmaRP3",t)}else o.instance.setRPProperty("brahmaRP3",!1)},f.prototype.getSclassRP=function(t){if(!this.partItem)return!1;for(var e=t[3],i=!1,n=0,s=this.partItem.length;n<s;n++){var o=this.partItem[n][1];if(o&&o[0]===e){i=!0;break}}var a=t[4];return i&&c.instance.getItemCountById(a[0][0])>=a[0][1]&&c.instance.getItemCountById(a[1][0])>=a[1][1]},f.prototype.setBrahmaRP2=function(){if(f.instance.partItem){for(var t=c.instance.getItemCountById(17030005),e=!1,i=1;i<=12;i++){var n=f.instance.getPartByStrongLv(i),s=d.instance.getCfgByPardAndLevel(i,n+1);if(s&&s[2]<=t){e=!0;break}}o.instance.setRPProperty("brahmaRP2",e||this.getMasterRP(1)||this.getMasterRP(2)||this.getResolveRP())}},f.prototype.getSingleBrahmaEquipRp=function(t){for(var e=c.instance.getItemsByBagId(15),i=t[0],n=0,s=e.length;n<s;n++){var o=e[n][0],a=p.BrahmaEquipUtlis.getPartById(o),r=u.instance.getItemByCfg(o);if(a===i&&PlayerModel.instance.eraLevel>=r[3]&&PlayerModel.instance.level>=r[4]){if(!t[1])return!0;var l=p.BrahmaEquipUtlis.getGradeById(e[n][0]);if(p.BrahmaEquipUtlis.getGradeById(t[1][0])<l)return!0}}return!1},f.prototype.getNeiDanRP=function(t){if(!this.fantianNeidan)return!1;var e=0;1===t?e=this.fantianNeidan[0]:2===t&&(e=this.fantianNeidan[1]);var i=!1,n=r.instance.getCfgByTypeAndLevel(t,e),s=r.instance.getCfgByTypeAndLevel(t,e+1),o=n?n[3][0]:s[3][0];if(s){var a=s[6];this.getSuitCondtion(a,t)&&(i=CommonUtil.getPropCountById(o)>=s[3][1])}return i},f.prototype.getMasterRP=function(t){var e=f.instance.fantianEquipRise;if(!e)return!1;var i=0;1===t?i=e[0]:2===t&&(i=e[1]);var n=m.instance.getCfgByTypeAndLevel(t,i+1);if(n){for(var s=n[1],o=0,a=1;a<=12;a++)f.instance.getPartByStrongLv(a)>=n[3]&&o++;return s<=o}return!1},f.prototype.getResolveRP=function(t){void 0===t&&(t=20);for(var e=c.instance.getItemsByBagId(15)||[],i=0,n=0,s=e.length;n<s;n++){var o=e[n][0],a=u.instance.getItemByCfg(o);f.instance.isUpMyEquip(o)||0==a[11].length||i++}return t<=i},f.prototype.getItemByUid=function(t){if(!f.instance.partItem)return!1;for(var e=0,i=f.instance.partItem.length;e<i;e++){var n=f.instance.partItem[e];if(n[1]&&n[1][2]===t)return!0}return!1},f.prototype.getLimitByGrade=function(t,e,i,n){void 0===i&&(i=1);for(var s=[],o=0,a=(n=n||f.instance.partItem||[]).length;o<a;o++){var r=n[o];if(r[1]){var l=r[1][0];e===p.BrahmaEquipUtlis.getPartType(l)&&s.push(l)}}if((s=s.sort(function(t,e){return p.BrahmaEquipUtlis.getGradeById(e)-p.BrahmaEquipUtlis.getGradeById(t)})).length>=t){var h=p.BrahmaEquipUtlis.getGradeById(s[t-1]);return y.instance.getSingleCfg(e,h,t)?1===i?h:p.BrahmaEquipUtlis.getGradeById(s[s.length-1]):-1}return-1},f.prototype.getSingleStrongLv=function(t,e,i){void 0===i&&(i=-1),-1===i&&(i=this.getPartByStrongLv(t));var n=d.instance.getCfgByPardAndLevel(t,i);if(!n)return 0;if(n)for(var s=n[4],o=0,a=s.length;o<a;o+=2)if(s[o]===e)return s[o+1];return 0},f.prototype.getFandTianFirstItemById=function(t){var e,i=h.bag.BagModel.instance.getItemsByBagId(15);this.partItem[t-1][1]&&(e=u.instance.getItemByCfg(this.partItem[t-1][1][0]));for(var n=null,s=0,o=0,a=i.length;o<a;o++){var r=i[o][0],l=u.instance.getItemByCfg(r);t===p.BrahmaEquipUtlis.getPartById(r)&&PlayerModel.instance.eraLevel>=l[3]&&PlayerModel.instance.level>=l[4]&&(!e||i[o][3][6]>this.partItem[t-1][1][3][6])&&(n?i[o][3][6]>s&&(n=i[o]):(n=i[o],s=i[o][3][6]))}return n},f.prototype.getStypeCount=function(t,e){if(!this.partItem)return 0;for(var i=0,n=h.config.ItemFantianCfg.instance.getCfgsByGradeStype(e,t),s=n?n.length:Number.POSITIVE_INFINITY,o=0,a=this.partItem.length;o<a;o++){var r=this.partItem[o][1];r&&p.BrahmaEquipUtlis.getPartType(r[0])===t&&i++}return s<i?s:i},f.prototype.getSuitCondtion=function(t,e){if(!t||0===t.length)return!0;var i=t[1];return this.getLimitByGrade(i,e)>=t[0]},f.prototype.getIsWarEquip=function(t){var e=t[0],i=p.BrahmaEquipUtlis.getPartById(e);return!this.partItem[i-1][1]},t=f,p.BrahmaEquipModel=t}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.brahma_equip||(t.brahma_equip={}),i=ui.BrahmaEquipPreviewBtnItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameArr=["神圣","魔部"]},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this.itemName.text=CommonUtil.numToUpperCase(t[1])+"阶"+this.nameArr[t[0]-1]+"套",this.icon.skin=1===t[0]?"brahma_equip/icon_ftzb_sz.png":"brahma_equip/icon_ftzb_mz.png"},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.rPImg.visible=t},s.prototype.destroy=function(t){void 0===t&&(t=!0),this.itemName=this.destroyElement(this.itemName),this.nameArr.length=0,this.icon=this.destroyElement(this.icon),i.prototype.destroy.call(this,t)},n=s,e.BrahmaEquipPreviewBtnItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.brahma_equip||(t.brahma_equip={}),i=ui.BeastEquipmentResolveItemUI,__extends(s,i),s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectImg.visible=t},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this._datas=t,this.item1.needTip=!1,this.item1.dataSource=[this._datas[0],this._datas[1],0,null],this.item1.nameVisible=!0},n=s,e.BrahmaEquipResolveItem=n}(modules=modules||{}),function(t){var l,e,h,i;function n(){return null!==e&&e.apply(this,arguments)||this}l=t.brahma_equip||(t.brahma_equip={}),h=t.config.ItemFantianCfg,e=ui.BrahmaEquipShowItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.iconBase.centerX=this.iconBase.centerY=0},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.clickHandler)},n.prototype.clickHandler=function(){this.item?0===this.enterSounse?WindowManager.instance.open(1481,this.item):1===this.enterSounse?WindowManager.instance.open(1486,this.item):2===this.enterSounse&&WindowManager.instance.open(1487,this.item):0===this.enterSounse&&t.bag.BagUtil.openLackPropAlert(l.BrahmaEquipModel.instance.showIDs[0]+this.part-1,1)},n.prototype.setData=function(t){var e=t[0][1],i=t[1],n=t[2];this.enterSounse=n;var s=t[0][0];if(this.part=s||1,this.lvLab.visible=!1,e){var o=h.instance.getItemByCfg(e[0]);this.item=e,this.lvLab.text=i+"级";var a=l.BrahmaEquipUtlis.getGradeById(e[0]);o[19]?this.icon.skin="assets/icon/ui/brahma_equip_item/"+o[19]+".png":this.icon.skin="assets/icon/item/"+o[7]+".png";var r=l.BrahmaEquipUtlis.getQualityById(e[0]);this.iconBase.skin="assets/icon/ui/brahma_equip/"+r+"_"+l.BrahmaEquipUtlis.getPartExType(e[0])+".png",this.stageBase.skin="assets/icon/ui/brahma_equip/g"+a+".png",this.lvLab.visible=!!i,-1!=[3,4,5,6].indexOf(r)?this.showEffec(e[0]):this.showEffec(-1)}else this.item=null,this.iconBase.skin="assets/icon/ui/brahma_equip/equip_base_"+s+".png",this.showEffec(-1);this.addImg.visible=0===n&&!e,this.stageBase.visible=this.icon.visible=!!this.item,this.rp.visible=0===n&&l.BrahmaEquipModel.instance.getSingleBrahmaEquipRp(t[0])},n.prototype.showEffec=function(t){if(void 0===t&&(t=-1),this._clip&&(this._clip.removeSelf(),this._clip=this.destroyElement(this._clip)),-1!==t){var e=l.BrahmaEquipUtlis.getQualityById(t),i=l.BrahmaEquipUtlis.getPartById(t),n=l.BrahmaEquipUtlis.getPartFlag(i)+"_"+e;this._clip=new CustomClip,this._clip.skin="assets/effect/brahma_equip/"+n+".atlas";for(var s=[],o=0;o<8;o++)s.push(n+"/"+o+".png");this._clip.frameUrls=s,this._clip.durationFrame=6,this._clip.loop=!0,this._clip.anchorX=this._clip.anchorY=.5,this.addChildAt(this._clip,2),this._clip.centerY=0,this._clip.centerX=-2,this._clip.scale(1,1,!0),this._clip.visible=!0,this._clip.play()}},n.prototype.close=function(){this._clip=this.destroyElement(this._clip),e.prototype.close.call(this)},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._clip=this.destroyElement(this._clip),e.prototype.destroy.call(this,t)},i=n,l.BrahmaEquipShowItem=i}(modules=modules||{}),function(t){var e,o,i;function a(){}e=t.brahma_equip||(t.brahma_equip={}),o=t.config.FantianGradeCfg,a.getGradeById=function(t){return t%100},a.getPartById=function(t){return Math.floor(t/100)%100},a.getQualityById=function(t){return Math.floor(t/1e4)%10},a.getSclassById=function(t){return Math.floor(t/1e5)%100},a.getTclassById=function(t){return Math.floor(t/1e7)},a.getPartType=function(t){return a.getPartById(t)<=6?1:2},a.isBrahmaEquip=function(t){return 830==t/1e5>>0},a.getBaseItem=function(t){return void 0===t&&(t=0),[t,1,0,[null,null,null,null,null,0,0,0,0]]},a.getFantianBaseData=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var s=void 0;if("number"==typeof t[i])s=0;else if("string"==typeof t[i])s="";else if("object"==typeof t[i]){s=[];for(var o=t[i],a=0,r=o.length;a<r;a+=2)s[a]=o[a],s[a+1]=0}e.push(s)}return e},a.getCompareBySkin=function(t){return 0<t?"common/zs_tongyong_3.png":t<0?"common/zs_tongyong_5.png":"common/zs_tongyong_16.png"},a.prototype.isBrahmaEquip=function(t){return 830==1e-5*t>>0},a.getPartByStrong=function(t,e){var i=e[t-1][1];if(!i)return 0;var n=i[3];return n&&n[5]||0},a.getPartExType=function(t){var e=a.getPartById(t);return e<=2?2:e<=6?1:3},a.getColorByQuality=function(t){switch(t){case 3:return"#6a00b5";case 4:return"#af4a00";case 5:return"#fe3232";case 6:return"#fe3292";default:return"#000000"}},a.getPartFlag=function(t){return 0<t&&t<=2?"b":2<t&&t<=6?"m":"s"},a.partArrUtlis=function(t){var e=t.length,i=0;if(0<e)for(var n=0;n<e;n++)a.getGradeById(t[n])<a.getGradeById(t[i])&&(i=n);var s=o.instance.getCfgBysrcItemId(t[i]);return s?[s[0][0],s[1][0]]:null},a.jumpIds=[1465,1467,1466,1468],a.showAttrs=[285,286,287,288,289],a.zhTxt="圣魔",a.zhTxtEx=["神圣","魔部"],i=a,e.BrahmaEquipUtlis=i}(modules=modules||{}),function(t){var h,e,s,i,n;function o(){return e.call(this)||this}h=t.brahma_pay||(t.brahma_pay={}),s=t.bag.BagUtil,i=t.soaring_singlePay.PayAndAwardsItem,e=i,__extends(o,e),o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("SUSANSLADE_UPDATA_VIEW",this,this.updataView)},o.prototype.setData=function(t){e.prototype.setData.call(this,t),this.Data=t,this.updataView()},o.prototype.sureBtnHandler=function(){if(2===h.BrahmaPayModel.instance.getState(this.Data))WindowManager.instance.open(111),this.close();else{var t=[],e=this.Data[2];if(e){for(var i=0,n=e.length;i<n;i+=2)t.push([e[i],e[i+1],0,null]);s.canAddItemsByBagIdCount(t)&&h.BrahmaPayCtrl.instance.drawFantianAccPayAward(this.Data[0])}}},o.prototype.updataView=function(){var t=2,e=this.Data;e&&(t=e[1]),this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励";var i=h.BrahmaPayModel.instance.data[2],n=h.BrahmaPayModel.instance.getState(this.Data);this.overImg.visible=this.sureBtn.visible=this.receivedImg.visible=!1,this._btnClip.visible=!1,this.scheduleText.text="("+i+"/"+t+")";var s=t<=i?"#168a17":"#FF3E3E";if(this.scheduleText.color=s,h.BrahmaPayModel.instance.restTm>GlobalData.serverTime)switch(n){case 2:this.showGotoRecharge();break;case 1:this.showCanReceive();break;case 3:this.showReceived()}else this.showOver();for(var o=this.Data[2],a=[],r=0,l=o.length;r<l;r+=2)a.push([o[r],o[r+1]]);this.showRewards(a),this.CanBuyHTML.visible=!1},n=o,h.BrahmaPayItem=n}(modules=modules||{}),function(t){var e,s,o,i;function a(){}e=t.brahma_pay||(t.brahma_pay={}),s=t.redPoint.RedPointCtrl,o=t.config.FantianAccPayCfg,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"restTm",{get:function(){return this.data?this.data[1]:0},enumerable:!0,configurable:!0}),a.prototype.getFantianAccPayReply=function(t){t&&(this.data=t,this.setRP(),GlobalData.dispatcher.event("FIGHT_BUY_INFO_ALERT"))},a.prototype.getState=function(t){return this.data?this.data[2]<t[1]?2:-1===this.data[0].indexOf(t[0])?1:3:2},a.prototype.sort=function(t,e){var i=a.instance.getState(t),n=a.instance.getState(e);return i===n?t[1]-e[1]:i-n},a.prototype.setRP=function(){if(this.data){for(var t=o.instance.cfgs,e=0,i=0,n=t.length;i<n;i++)1===this.getState(t[i])&&e++;s.instance.setRPProperty("brahmaPayRP",0<e)}else s.instance.setRPProperty("brahmaPayRP",!1)},i=a,e.BrahmaPayModel=i}(modules=modules||{}),function(r){var l,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}l=r.common_group||(r.common_group={}),t=ui.CommonGroupBuffItemUI,__extends(i,t),i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.setBuffUI),this.onAutoGlobalEvt("DRAW_GOD_DEVIL_REWARD_REPLY",this,this.setBuffUI),this.onAutoClick(this.warbandIcon,this,this.warbandClick)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.setBuffUI()},i.prototype.warbandClick=function(){this._warbandNum&&WindowManager.instance.open(770,this._warbandNum)},i.prototype.setBuffUI=function(){var t=r.warband.WarbandModel.instance.info;if(t){this.buffBox.visible=!0,this.warbandIcon.skin="assets/icon/warband/"+t[2]+".png";for(var e=t[4],i=l.CommonGroupModel.instance.members,n=this._warbandNum=0,s=e.length;n<s;++n)for(var o=0,a=i.length;o<a;++o)if(0===i[o][0][8]&&e[n][0]===i[o][0][0]){++this._warbandNum;break}this.warbandNumTxt.text=this._warbandNum+"/3"}else this.buffBox.visible=!1},i.prototype.close=function(){t.prototype.close.call(this),Laya.timer.clearAll(this)},e=i,l.CommonGroupBuffItem=e}(modules=modules||{}),function(s){var o,e,t,i,a,n;function r(){var t=e.call(this)||this;return t._setSelectedInx=0,t._oldInx=-1,t}o=s.common_group||(s.common_group={}),t=laya.events.Event,i=s.common.CustomList,a=s.config.TeamSceneCfg,e=ui.CommonGroupChangeItemUI,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create("v",0,0,150,50,o.CommonGroupChangeItem1,6,1),this.listBox.addChild(this._list),this._list.pos(0,0),this._isChuange=!1},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoEvt(this._list,t.SELECT,this,this.listHandler),this.onAutoGlobalEvt("COMMON_GROUP_CLICK",this,this.setSelectedFun)},r.prototype.setData=function(t){e.prototype.setData.call(this,t),this.tbnRp.visible=!1,t&&(this.sceneId=t[0],this._setSelectedInx=t[1],this._datesCfg=a.instance.getCfgFirst(this.sceneId),this.dataText.text=this._datesCfg[3][0])},r.prototype.listHandler=function(){var t=this;-1!=this._list.selectedIndex&&(o.CommonGroupUtil.getIsOpenBySceneID(this._list.selectedData[0][0],!1,!0,this._list.selectedData[0][1],!0)?(Laya.timer.callLater(this,function(){t._list.selectedIndex!=t._datesCfg[4]&&(o.CommonGroupModel.instance.sceneLevel=10*t._list.selectedIndex+1),GlobalData.dispatcher.event("COMMON_GROUP_CHANGE_UI",[t._list.selectedIndex])}),this._oldInx=this._list.selectedIndex):this._list.selectedIndex=this._oldInx)},r.prototype.setSelectedFun=function(t){var e=this;if(o.CommonGroupModel.instance.sceneId===this.sceneId?(this.btn.selected=!0,t&&(this._isChuange=!this._isChuange)):this._isChuange=this.btn.selected=!1,this.btn.selected){if(this._isChuange){this.listBox.visible=!0;var i=a.instance.getCfgArr(this.sceneId),n=50*i.length+6*(i.length-1);this._listHight=n,this.height=63+this._listHight,this._list.height=50*i.length+(i.length-1)*this._list.spaceY,this._list.datas=i,Laya.timer.callLater(this,function(){var t=s.config.TeamSceneCfg.instance.getCfg(o.CommonGroupModel.instance.sceneId,o.CommonGroupModel.instance.sceneLevel);e._list.selectedIndex=t[4]})}else this.listBox.visible=!1,this.height=63;Laya.timer.callLater(this,function(){GlobalData.dispatcher.event("COMMON_GROUP_OPENUPDATE",[e._setSelectedInx])})}else this.listBox.visible=!1,this.height=63},r.prototype.btnHandler=function(){if(o.CommonGroupUtil.getIsOpenBySceneID(this.sceneId,!1,!1,this._datesCfg[1],!0)){var t=o.CommonGroupModel.instance.sceneId!=this.sceneId;o.CommonGroupModel.instance.sceneId=this.sceneId,t&&(o.CommonGroupUtil.isMyHaveTeam()&&o.CommonGroupModel.instance.sceneId===o.CommonGroupModel.instance.sceneIdTeam?o.CommonGroupModel.instance.sceneLevel=o.CommonGroupModel.instance.sceneLevelTeam:o.CommonGroupModel.instance.sceneLevel=this._datesCfg[1]),GlobalData.dispatcher.event("COMMON_GROUP_CLICK",[!0])}},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},n=r,o.CommonGroupChangeItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.common_group||(t.common_group={}),i=ui.CommonGroupChangeItem1UI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.dataTextHTML,"#3a5385","SimHei",22,"center")},s.prototype.onEvt=function(){i.prototype.onEvt.call(this)},s.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.redDot.visible=!1,this.gray=!1,t){this._datesCfg=t[0];var e=this._datesCfg[3];this.dataTextHTML.innerHTML=""+e[1],this.setTheSelected()}},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.setTheSelected()},s.prototype.setTheSelected=function(){this.btn.selected=!this.selected},n=s,e.CommonGroupChangeItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.common_group||(t.common_group={}),i=ui.CommonGroupChangeItem2UI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this._datesCfg=t,this.sceneId=this._datesCfg[0];var e=this._datesCfg[3];this.text1.text=e[2]+" "},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.setTheSelected(),this.selected&&e.CommonGroupModel.instance.sceneLevel!=this._datesCfg[1]&&(e.CommonGroupModel.instance.sceneLevel=this._datesCfg[1])},s.prototype.setTheSelected=function(){this.btn.selected=!this.selected},n=s,e.CommonGroupChangeItem2=n}(modules=modules||{}),function(s){var o,e,t,i;function n(){return null!==e&&e.apply(this,arguments)||this}o=s.common_group||(s.common_group={}),t=s.common.SimpleList,e=ui.CommonGroupHanHuaItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=t.create(o.CommonGroupHanHuaItem1,162,36,1),this.listBox.addChild(this._list),this._list.size(161,36),this._list.pos(0,0)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.expandBox,this,this.expandBtnBtnHandler),this.onAutoGlobalEvt("COMMON_GROUP_UPDATE_HANHUA",this,this.InitializeHanHuaBox)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setUI(),Laya.timer.loop(1e3,this,this.activityHandler)},n.prototype.setData=function(t){e.prototype.setData.call(this,t)},n.prototype.setListData=function(){switch(o.CommonGroupModel.instance.teamType){case 10:this._list.datas=[4];break;case 9:this._list.datas=[6];break;default:this._list.datas=[1,4,6]}},n.prototype.setUI=function(){this.setListData(),this.InitializeHanHuaBox()},n.prototype.expandBtnBtnHandler=function(){o.CommonGroupModel.instance.isChat?(this._isOpen=!this._isOpen,this.updateHanHuaBox()):s.notice.SystemNoticeManager.instance.addNotice("喊话冷却中",!0)},n.prototype.updateHanHuaBox=function(){if(this.listBox.visible=this._isOpen,this._isOpen){this.expandBtn.skin="common/btn_tonyong_29.png";var t=this._list.datas.length*this._list.itemHeight+(this._list.datas.length-1)*this._list.spaceY;this.listBox.height=this._list.height=t,this.setListData(),this.height=this.hanHuaBgImg.height=40+t+6,this.listBox.pos(6,34),this._list.pos(0,0)}else this.expandBtn.skin="common/btn_tonyong_28.png",this.height=this.hanHuaBgImg.height=40},n.prototype.InitializeHanHuaBox=function(){this.activityHandler(),o.CommonGroupModel.instance.isChat||(this._isOpen=!1),this.updateHanHuaBox()},n.prototype.activityHandler=function(){var t=0,e=localStorage.getItem(s.player.PlayerModel.instance.actorId+"_lastTime");e&&(t=parseInt(e));var i=GlobalData.serverTime-t;if(i>=o.CommonGroupModel.instance.cdTime||GlobalData.serverTime<t)o.CommonGroupModel.instance.isChat=!0,this.timeText.visible=!1;else{var n=Math.round((o.CommonGroupModel.instance.cdTime-i)/1e3);this.timeText.text="("+n+")",this.timeText.visible=!0,o.CommonGroupModel.instance.isChat=!1}},n.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clearAll(this)},n.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},i=n,o.CommonGroupHanHuaItem=i}(modules=modules||{}),function(s){var o,e,t;function i(){return null!==e&&e.apply(this,arguments)||this}o=s.common_group||(s.common_group={}),e=ui.CommonGroupHanHuaItem1UI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this)},i.prototype.onEvt=function(){e.prototype.onEvt.call(this)},i.prototype.setData=function(t){e.prototype.setData.call(this,t),this._type=t,this.jiuZhouBtn.label=o.CommonGroupUtil.getHanHuaName(this._type)},i.prototype.clickHandler=function(){var t=o.CommonGroupUtil.getBroadcastIdByTeamType(o.CommonGroupModel.instance.teamType);switch(this._type){case 1:var e=s.chat.ChatModel.instance.getUnlockLv(2);if(s.mission.MissionModel.instance.finishLv<e)return void s.notice.SystemNoticeManager.instance.addNotice("通过天关"+e+"关开启",!0);break;case 4:if(!s.faction.FactionModel.instance.hasFaction)return void s.notice.SystemNoticeManager.instance.addNotice("请先加入仙盟",!0);break;case 6:if(!s.warband.WarbandModel.instance.info)return void s.notice.SystemNoticeManager.instance.addNotice("请先加入战队",!0)}if(0!=t){var i=o.CommonGroupModel.instance.sceneLevelTeam;o.CommonGroupUtil.isPublicTsScene(o.CommonGroupUtil.getSceneTypeExByTeamType(o.CommonGroupModel.instance.teamType))&&(i=o.CommonGroupModel.instance.levelTeamTrue);var n=[this._type,5,t,"",s.chat.ChatModel.instance.virtualItem,[],[o.CommonGroupModel.instance.leaderName,o.CommonGroupModel.instance.teamId.toString(),o.CommonGroupModel.instance.leader.toString(),i.toString()],0,0];ChatCtrl.instance.sendChatMessage(n)}s.notice.SystemNoticeManager.instance.addNotice("喊话成功"),localStorage.setItem(s.player.PlayerModel.instance.actorId+"_lastTime",""+GlobalData.serverTime),GlobalData.dispatcher.event("COMMON_GROUP_UPDATE_HANHUA")},i.prototype.close=function(){e.prototype.close.call(this)},t=i,o.CommonGroupHanHuaItem1=t}(modules=modules||{}),function(n){var a,e,t,s,i;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._state=1,t._isiInvite=!0,t}a=n.common_group||(n.common_group={}),t=ui.TeamCopyInviteItemUI,s=n.rename.RenameModel,e=t,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.html,"#2c476a","SimHei",22,"center")},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc),this.onAutoGlobalEvt("INVITE_TEAMER_EX_REPLY",this,this.setUI)},o.prototype.setData=function(t){this._info=t,this._type=t[0],this._id=t[1];var e=t[2],i=t[5],n=t[6];this.headIcon.setInfo(i,e,n);var s=t[3],o=t[4];this._state=1,this.nameTxt.text=s,this.fightTxt.text="战力:"+CommonUtil.bigNumToString(o),this.img.visible=!1,this.btn.visible=!0,this.html.visible=10!=a.CommonGroupModel.instance.teamType,this.setHtml()},o.prototype.setHtml=function(){var t=[];this._id&&(t=a.CommonGroupModel.instance.copyTimesTable[this._id]);var e=(t=t||[])[0]?t[0]:0,i=t[1]?t[1]:0;switch(this.doingTxt.y=62,this.img.y=45,this.btn.y=51,this._isiInvite=!0,a.CommonGroupModel.instance.teamType){case 3:case 4:case 2:this._isiInvite=0<e,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>副本次数:"+e+"</span>";break;case 5:this._isiInvite=e>=n.spiritDungeon.SpiritDungeonModel.instance.openNum,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>元力值:"+e+"</span>";break;case 6:this._isiInvite=e>=n.divinatory_card.DivinatoryCardModel.instance.openNum,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>八卦值:"+e+"</span>";break;case 7:this._isiInvite=e>=n.outside_show_dungeon.OutsideShowDungeonModel.instance.openNum,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>异宝值:"+e+"</span>";break;case 1:0<e?(this._isiInvite=0<e,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>挑战次数:"+e+"</span>"):(this._isiInvite=0<i,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>助战次数:"+i+"</span>");break;case 9:0<e?(this._isiInvite=0<e,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>挑战时长:"+CommonUtil.msToMMSS(e)+"</span>"):(this._isiInvite=0<i,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>协助时长:"+CommonUtil.msToMMSS(i)+"</span>");break;case 8:this._isiInvite=e===a.CommonGroupModel.instance.levelTeamTrue,this.html.innerHTML="<span style= 'color:"+(this._isiInvite?"#2c476a":"#ff3e3e")+"'>"+(this._isiInvite?"本层玩家":"非本层玩家")+"</span>";break;case 10:this._isiInvite=!0,this.html.innerHTML="",this.html.visible=!1,this.doingTxt.y=45,this.img.y=28,this.btn.y=34}},o.prototype.btnHandler=function(){if(a.CommonGroupUtil.thePlayerIsMyTeam(this._id)){var t=2==this._type?"该队员已加入队伍":"该盟友已加入队伍";return CommonUtil.noticeError(0,t,!0),void GlobalData.dispatcher.event("TEAM_COPY_CAN_INVITE_MEMBER_UPDATE")}this.deleteHandler1()},o.prototype.deleteHandler1=function(){if(this._isiInvite)this.deleteHandler();else{var t="";switch(a.CommonGroupModel.instance.teamType){case 3:case 4:case 2:t="该玩家副本次数不足,是否继续邀请?";break;case 5:t="该玩家剩余元力值不足,是否继续邀请?";break;case 6:t="该玩家剩余八卦值不足,是否继续邀请?";break;case 7:t="该玩家剩余异宝值不足,是否继续邀请?";break;case 1:t="该玩家挑战次数/助战次数均不足<br/>\n                    <span style='text-align:center;'>是否继续邀请?</span>";break;case 9:t="该玩家奖励时长/协助时长均不足<br/>\n                    <span style='text-align:center;'>是否继续邀请?</span>";break;case 8:t="该玩家该玩家当前不在您所在的层<br/>\n                    <span style='text-align:center;'>邀请后无法一起挑战,是否继续邀请?</span>";break;case 10:t=""}var e=Handler.create(this,this.deleteHandler);n.common.CommonUtil.alert("提示",t,[e],void 0,void 0,!0,void 0,a.CommonGroupUtil.getNoMoreNoticeIdByTeamType(a.CommonGroupModel.instance.teamType),"本次登录不再提示","center",-1,"middle")}},o.prototype.deleteHandler=function(){this._state=2,a.CommonGroupCtrl.instance.inviteTeamerEx([[this._type,this._id]])},o.prototype.setUI=function(t){t?3!=this._state&&(this.img.visible=!1,this.btn.visible=!0,this._state=1):2==this._state&&(this._state=3,this.img.visible=!0,this.btn.visible=!1)},o.prototype.updateName=function(){if(this._info){var t=s.instance.updateNameReply;t&&t[0]===this._info[1]&&(this.nameTxt.text=t[1])}},o.prototype.updateOcc=function(){if(this._info){var t=s.instance.updateOccReply;if(t&&t[0]===this._info[1]){var e=t[1],i=this._info[5],n=this._info[6];this.headIcon.setInfo(i,e,n)}}},i=o,a.CommonGroupInviteItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.common_group||(t.common_group={}),i=e.CommonGroupInviteItem,__extends(s,i),s.prototype.btnHandler=function(){if(e.CommonGroupUtil.thePlayerIsMyTeam(this._id))return CommonUtil.noticeError(0,"你的仙缘已加入队伍",!0),void GlobalData.dispatcher.event("TEAM_COPY_CAN_INVITE_MEMBER_UPDATE");this.deleteHandler1()},n=s,e.CommonGroupInviteHalfItem=n}(modules=modules||{}),function(p){var c,t,e;function u(){this.cdTimeInvite=1500,this._times=0,this.isChat=!1,this.cdTime=3e4,this.autoJoin=!1,this.autoAccept=!1,this.teamSingleDate=[],this._sceneId=0,this._sceneLevel=0,this.sceneIdTeam=0,this._sceneLevelTeam=0,this.levelTeamTrue=0,this.isFirstGame=0,this.teamsTable={},this.copyTimesTable={},this.sceneIdTeam=this.sceneLevelTeam=0,this.isAutomaticMatching=this.isAutomaticPlayer=this.isHomeowners=!1,this.isGengSui=!1,this.teamId=0,this.leader=0,this.leaderTeamer=null,this.teamType=0,this.teamMode=0,this.state=0,this.members=[],this.membersObjId=[],this.membersApplications=[],this.changType=0,this.TeamsThatHaveAlreadyApplied=new Laya.Dictionary}c=p.common_group||(p.common_group={}),t=p.redPoint.RedPointCtrl,Object.defineProperty(u,"instance",{get:function(){return this._instance=this._instance||new u},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"leaderName",{get:function(){var t="";return this.leaderTeamer&&(t=this.leaderTeamer[0][1]),t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"leaderOcc",{get:function(){var t=0;return this.leaderTeamer&&(t=this.leaderTeamer[0][2]),t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sceneId",{get:function(){return this._sceneId},set:function(t){this.isFirstGame++,this._sceneId=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sceneLevel",{get:function(){return this._sceneLevel},set:function(t){this._sceneLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sceneLevelTeam",{get:function(){return this._sceneLevelTeam},set:function(t){c.CommonGroupUtil.isPublicTsScene(c.CommonGroupUtil.getSceneTypeExByTeamType(this.teamType))?(this._sceneLevelTeam=0,this.levelTeamTrue=t):this._sceneLevelTeam=t},enumerable:!0,configurable:!0}),u.prototype.getState=function(t){var e=this.teamsTable[t];return e?e[4]:0},u.prototype.changeLose=function(){u.instance.sceneId=u.instance.sceneIdTeam,u.instance.sceneLevel=u.instance.sceneLevelTeam},u.prototype.clearAllTeamDate=function(){console.log("~~~~~~~~~~~~~队伍被解散"),p.faerie_demon.FaerieDemonModel.instance.clearAllEnemyTeamDate1(),this.sceneIdTeam=this.sceneLevelTeam=0,this.isGengSui=this.isAutomaticMatching=this.isAutomaticPlayer=this.isHomeowners=!1,this.teamId=0,this.leader=0,this.leaderTeamer=null,this.members.length=0,this.membersObjId.length=0,this.teamType=0,this.state=0,this.levelTeamTrue=0,this.teamsTable={},this.changType=0,GlobalData.dispatcher.event("FETCH_TEAMEX_REPLY_UPDATE"),c.CommonGroupCtrl.instance.giveupMatchTeamer(),this.membersApplications.length=0,this.setRpTeam()},u.prototype.fetchTeamExReply=function(t){if(t){this.membersObjId.length=0,this.leaderTeamer=null;var e=t[0];if(this.teamId=e[1],!this.teamId)return this.clearAllTeamDate(),void WindowManager.instance.close(272);this.teamsTable={},this.teamType=e[0],this.leader=e[2],this.members=e[4],this.teamMode=e[5],this.isHomeowners=this.leader===PlayerModel.instance.actorId;for(var i=0;i<this.members.length;i++){var n=this.members[i];if(n){var s=n[0][0];this.leader===s&&(this.leaderTeamer=n),this.membersObjId.push(s),this.teamsTable[s]=n}}this.updateTeamStateEx(e[3]),this.sceneIdTeam=c.CommonGroupUtil.getSceneIdByTeamType(this.teamType),this.sceneLevelTeam=e[6],GlobalData.dispatcher.event("FETCH_TEAMEX_REPLY_UPDATE")}},u.prototype.updateTeamExReply=function(t){if(t){this.membersObjId.length=0,this.leaderTeamer=null,this.teamsTable={};var e=t[0],i=!1,n=!1,s=!1,o=!1,a=!1;0!=this.teamType&&this.teamType!=e[0]&&(i=!0),0!=this.teamType&&this.teamType===e[0]&&e[6]!=this.sceneLevelTeam&&(c.CommonGroupUtil.isPublicTsScene(c.CommonGroupUtil.getSceneTypeExByTeamType(this.teamType))||(n=!0)),0===this.teamType&&this.teamType!=e[0]&&(s=!0,2<=e[4].length?o=!0:e[4].length),this.members&&3!=this.members.length&&3===e[4].length&&(a=!0),this.teamId=e[1],this.teamType=e[0],this.leader=e[2],this.members=e[4],this.teamMode=e[5],this.isHomeowners=this.leader===PlayerModel.instance.actorId;for(var r=0;r<u.instance.members.length;r++){var l=u.instance.members[r];if(l){var h=l[0][0];this.leader===h&&(this.leaderTeamer=l),this.membersObjId.push(h),this.teamsTable[h]=l}}(i||n)&&(this.isAutomaticMatching=this.isAutomaticPlayer=!1,WindowManager.instance.close(1543),this.isHomeowners&&c.CommonGroupCtrl.instance.giveupMatchTeamer(),console.log("队伍目标切换成功 清除所有自动状态")),console.log("更新队伍~~~~~~~~~队伍状态："+e[3]),this.updateTeamStateEx(e[3]),this.isOpenMatchingAlert(),this.sceneIdTeam=c.CommonGroupUtil.getSceneIdByTeamType(this.teamType),this.sceneLevelTeam=e[6],GlobalData.dispatcher.event("FETCH_TEAMEX_REPLY_UPDATE"),(i||n)&&(c.CommonGroupUtil.isOpenRoom(),CommonUtil.noticeError(0,"队伍目标切换成功"),this.claerApprovalApplyEx()),a&&(c.CommonGroupUtil.isOpenRoom(this.teamType),console.log("人数变成三打开界面"),this.isHomeowners&&c.CommonGroupCtrl.instance.giveupMatchTeamer()),s&&(GlobalData.dispatcher.event("COMMON_GROUP_UPDATE_TEAM"),console.log("加入队伍或者创建了队伍")),o&&(console.log("加入队伍"),c.CommonGroupUtil.IsItSatisfied()&&WindowManager.instance.open(1538,[this.teamType,this.sceneLevelTeam])),8===this.teamType&&c.CommonGroupUtil.isMyHaveTeam()&&(WindowManager.instance.isOpened(1542)&&1===p.forbiddenBoss.ForbiddenBossModel.instance.stage&&11===u.instance.levelTeamTrue&&p.forbiddenBoss.ForbiddenBossCtrl.instance.GetForbiddenBossCopyInfo(),3===c.CommonGroupUtil.getLeaderwhetherInCopy()&&p.common_group.CommonGroupModel.instance.isHomeowners&&p.sceneTeam.SceneTeamCtrl.instance.SceneSetTeamData(PlayerModel.instance.selectTargetId))}else WindowManager.instance.close(272)},u.prototype.ClearAutomaticMatching=function(){u.instance.isAutomaticMatching=!1},u.prototype.getApplicationsExReply=function(t){t&&(this.membersApplications=t[0],this.setRpTeam(),GlobalData.dispatcher.event("GET_APPLICATIONS_EXREPLY_UPDATE"))},u.prototype.membersApplicationsDestoryDate=function(t){for(var e=new Array,i=0;i<this.membersApplications.length;i++){var n=this.membersApplications[i];n[0][0]!=t&&e.push(n)}this.membersApplications=e,this.setRpTeam(),GlobalData.dispatcher.event("GET_APPLICATIONS_EXREPLY_UPDATE")},u.prototype.updateTeamStateEx=function(t){void 0!==t&&(this.changType=0,4===this.state&&0===t?this.changType=1:2===this.state&&0===t?(this.changType=2,WindowManager.instance.close(620)):2===this.state&&3===t?this.changType=3:1===this.state&&0===t&&(this.changType=4),this.state=t,p.faerie_demon.FaerieDemonModel.instance.laterAutomatic())},u.prototype.updateTeamState=function(){this.isOpenMatchingAlert(),GlobalData.dispatcher.event("UPDAT_ETEAM_STATEEX_UPDATE")},u.prototype.isOpenMatchingAlert=function(){2===this.state&&(console.log("打开匹配队伍界面"),WindowManager.instance.open(620))},u.prototype.setRpTeam=function(){t.instance.setRPProperty("teaminvastion",0<this.membersApplications.length&&this.isHomeowners)},u.prototype.inApplied=function(t){var e=this.TeamsThatHaveAlreadyApplied.get(t);if(e){var i=e[0],n=e[1];if(i===t)return 10<GlobalData.serverTime-n}return!0},u.prototype.kickTeamerEx=function(){var t=Handler.create(this,function(){c.CommonGroupCtrl.instance.kickTeamerEx(PlayerModel.instance.actorId)});CommonUtil.alert("提示","是否确定退出队伍?",[t],[])},u.prototype.getTeamListReply=function(t){this.teamSingleDate=t[0],GlobalData.dispatcher.event("GET_TEAM_LIST_REPLY")},u.prototype.updateTeamSetAnswer=function(t){this.updateTeamSetAnswerDate=t;var e=u.instance.updateTeamSetAnswerDate[0];u.instance.updateTeamSetAnswerDate[1]?(WindowManager.instance.close(1540),u.instance.isHomeowners||(CommonUtil.noticeError(0,"队长取消了队伍目标的更改"),WindowManager.instance.close(1534))):e&&3<=e.length?WindowManager.instance.close(1540):u.instance.isHomeowners&&!WindowManager.instance.isOpened(1540)&&WindowManager.instance.open(1540),GlobalData.dispatcher.event("UPDATE_TEAM_SET_ANSWER")},u.prototype.getTeamAll=function(t){var e=[];if(this.teamSingleDate)for(var i=0;i<this.teamSingleDate.length;i++){var n=this.teamSingleDate[i],s=n[4],o=n[1],a=n[5];t===s&&o!=this.teamId&&(1===t?p.warband.WarbandModel.instance.warbandId===a&&e.push(n):e.push(n))}return e.sort(this.sortFunc.bind(this)),e},u.prototype.sortFunc=function(t,e){function i(t){for(var e=0,i=0;i<t.length;i++)e+=t[i][5];return e/=t.length}var n=t[3].length,s=e[3].length,o=i(t[3]),a=i(e[3]);return n!=s?s-n:a-o},u.prototype.claerApprovalApplyEx=function(){for(var t=new Array,e=0;e<u.instance.membersApplications.length;e++){var i=u.instance.membersApplications[e];i&&t.push(i[0][0])}0<t.length&&c.CommonGroupCtrl.instance.approvalApplyEx(0,t),u.instance.membersApplications.length=0,u.instance.setRpTeam(),GlobalData.dispatcher.event("GET_APPLICATIONS_EXREPLY_UPDATE")},e=u,c.CommonGroupModel=e}(modules=modules||{}),function(t){var o,e,i,s,n;function a(){var t=e.call(this)||this;return t._emptyLevel=0,t}o=t.common_group||(t.common_group={}),i=t.common.AvatarClip,s=t.rename.RenameModel,e=ui.CommonGroupPlayerInfoItemUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._centerAvatar=i.normalCreate(),this._centerAvatar.pos(100,260),this.addChildAt(this._centerAvatar,2)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc),this.onAutoClick(this.dissolutionOfIinvitationBtn,this,this.dissolutionOfIinvitationBtnHandler),this.onAutoClick(this.addBox,this,this.addBtnHandler)},a.prototype.setData=function(t){e.prototype.setData.call(this,t),this._dates=t[0],this._emptyLevel=t[1],this.setUIbyTeamType(),this.updateUI()},a.prototype.setUIbyTeamType=function(){2===o.CommonGroupModel.instance.teamType||4===o.CommonGroupModel.instance.teamType?(this.height=408,this.playerInfoBox.y=271,this.dissolutionOfIinvitationBtn.y=361,this.imgBg.height=90,this.recordTxt.visible=!0):(this.height=386,this.playerInfoBox.y=271,this.dissolutionOfIinvitationBtn.y=339,this.imgBg.height=64,this.recordTxt.visible=!1)},a.prototype.dissolutionOfIinvitationBtnHandler=function(){if(this._dates){var t=function(){o.CommonGroupModel.instance.kickTeamerEx()};if(o.CommonGroupModel.instance.isHomeowners)if(this._dates[0]===o.CommonGroupModel.instance.leader)t();else{var e=this._dates[0],i=this._dates[1],n="是否将队员"+CommonUtil.formatHtmlStrByColor("#168a17","【"+i+"】")+"踢出房间?",s=Handler.create(this,function(){o.CommonGroupCtrl.instance.kickTeamerEx(e)});CommonUtil.alert("提示",n,[s],[])}else t()}},a.prototype.addBtnHandler=function(){CommonUtil.whetherInCopy()?o.CommonGroupUtil.isPublicScene(t.scene.SceneUtil.currScene)?WindowManager.instance.open(1543):t.notice.SystemNoticeManager.instance.addNotice("副本内不可邀请",!0):t.faction.FactionModel.instance.hasFaction||-1!=t.warband.WarbandModel.instance.leaderId||t.marry.MarryModel.instance.isMarried?WindowManager.instance.open(1543):t.notice.SystemNoticeManager.instance.addNotice("尚未加入仙盟或战队或结缘，请加入仙盟或战队或结缘后再邀请！",!0)},a.prototype.updateUI=function(){if(this._dates){this.stateTipsBox.visible=this.playerInfoBox.visible=!0,this.hisTeammatesBox.visible=this.addBox.visible=!1,this.showAvatarClip(!0);var t=this._dates[0];this.theCaptainImg.visible=t===o.CommonGroupModel.instance.leader,o.CommonGroupModel.instance.isHomeowners?(this.dissolutionOfIinvitationBtn.label=t===o.CommonGroupModel.instance.leader?"退出":"踢出",this.dissolutionOfIinvitationBtn.visible=!0):(this.dissolutionOfIinvitationBtn.label="退出",this.dissolutionOfIinvitationBtn.visible=t===PlayerModel.instance.actorId),this.centerNameTxt.text=this._dates[1];var e=this._dates[5];this.centerFightTxt.text="战力:"+CommonUtil.bigNumToString(e),2===o.CommonGroupModel.instance.teamType?this.recordTxt.text="最佳:"+this._emptyLevel+"层":4===o.CommonGroupModel.instance.teamType&&(this.recordTxt.text="战魂值:"+CommonUtil.bigNumToString(this._emptyLevel));var i=o.CommonGroupModel.instance.getState(t),n=4===i;if(this.stateTipsImg.gray=n,this._centerAvatar.gray=n,this.stateTipsTxt.color=n?"#000000":"#ffffff",this.stateTipsTxt.text=n?"离线":"",this.stateTipsBox.visible=0!=i,!n){var s=o.CommonGroupUtil.getMywhetherInCopy();if(1===s)if(t===PlayerModel.instance.actorId)this.stateTipsTxt.text="已就绪";else switch(i){case 1:this.stateTipsTxt.text="已就绪";break;case 2:this.stateTipsTxt.text="请等我";break;case 3:this.stateTipsTxt.text=o.CommonGroupUtil.isPublicScene(o.CommonGroupUtil.getSceneTypeExByTeamType(o.CommonGroupModel.instance.teamType))?"远离":"请等我"}else 2!==s&&3!==s||(t===PlayerModel.instance.actorId?this.stateTipsBox.visible=!1:1===i?this.stateTipsTxt.text="远离":this.stateTipsBox.visible=!1)}}else this.stateTipsBox.visible=this.dissolutionOfIinvitationBtn.visible=this.playerInfoBox.visible=this.theCaptainImg.visible=!1,this.hisTeammatesBox.visible=this.addBox.visible=!0,this.showAvatarClip(!1)},a.prototype.showAvatarClip=function(t){if(t&&this._dates){var e=this._dates[9],i=e[1],n=e[2],s=e[7];this._centerAvatar.reset(i||(1===s?1001:1002),n||5002),this._centerAvatar.visible=!0}else this._centerAvatar.visible=!1},a.prototype.updateName=function(){if(this._dates){var t=s.instance.updateNameReply;t&&t&&t[0]===this._dates[0]&&(this.centerNameTxt.text=t[1])}},a.prototype.updateOcc=function(){if(this._dates){var t=s.instance.updateOccReply;if(t&&t&&t[0]===this._dates[0]){var e=this._dates[9],i=e[1],n=e[2];n=n-n%10+t[1],this._centerAvatar.reset(n,i)}}},a.prototype.destroy=function(){this._centerAvatar=this.destroyElement(this._centerAvatar),e.prototype.destroy.call(this)},n=a,o.CommonGroupPlayerInfoItem=n}(modules=modules||{}),function(t){var o,r,e;function i(){return null!==r&&r.apply(this,arguments)||this}o=t.common_group||(t.common_group={}),r=ui.CommonGroupTeamItemUI,__extends(i,r),i.prototype.initialize=function(){r.prototype.initialize.call(this),this._allItem=[this.item1,this.item2,this.item3],CommonUtil.setHTMLPro(this.StatementHTML,"#2c476a","SimHei",24)},i.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.acceptBtn,this,this.iacceptBtnHandler)},i.prototype.setData=function(t){if(r.prototype.setData.call(this,t),this._dateNow=t,this._dateNow){var e=this._dateNow[3],i=this._dateNow[2],n=(this._dateNow[1],this._dateNow[6]);e=e||[];for(var s="",o=0;o<e.length;o++)i===(a=e[o])[0]&&(s=a[1]);for(o=0;o<this._allItem.length;o++){var a;(a=this._allItem[o])&&(a.data=e[o])}this.StatementHTML.innerHTML=s+"的队伍",this.acceptBtn.visible=!n,this.acceptImg.visible=n}},i.prototype.iacceptBtnHandler=function(){if(this._dateNow){var t=this._dateNow[1],e=this._dateNow[2],i=this._dateNow[3],n=this._dateNow[0],s=this._dateNow[7];i&&i.length<3?o.CommonGroupUtil.isMyHaveTeam()?CommonUtil.noticeError(0,"已有队伍"):(o.CommonGroupUtil.chatHyperlinksClick(!1,!0,o.CommonGroupUtil.getActionOpenIdBySceneId(o.CommonGroupUtil.getSceneIdByTeamType(n)),t,e,s),Laya.timer.once(200,this,function(){GlobalData.dispatcher.event("GET_TEAM_LIST")})):CommonUtil.noticeError(0,"队伍已满")}},e=i,o.CommonGroupTeamItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.common_group||(t.common_group={}),i=ui.CommonGroupTeamItem1UI,__extends(s,i),s.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=null!=t;this.fightText.visible=this.headIcon.visible=e,this.box1.visible=!e,t&&(this.headIcon.setInfo(t[7],t[2],t[6]),this.headIcon.vipShowItem.setSVIPandVIP(t[10],t[9]),this.fightText.text="战"+CommonUtil.bigNumToString(t[5],!0))},n=s,e.CommonGroupTeamItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.common_group||(t.common_group={}),i=ui.CommonGroupToaApplyForItemUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.acceptBtn,this,this.iacceptBtnHandler),this.onAutoClick(this.refusedBtn,this,this.refusedBtnHandler)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._value=t,this._date=t[0],this.leaderTxt.text=this._date[1],this.numTxt.text="战力:"+CommonUtil.bigNumToString(this._date[5]),this.headIcon.setInfo(this._date[7],this._date[2],this._date[6]))},s.prototype.iacceptBtnHandler=function(){2!==e.CommonGroupUtil.getMywhetherInCopy()?(e.CommonGroupCtrl.instance.approvalApplyEx(1,[this._date[0]]),e.CommonGroupModel.instance.membersApplicationsDestoryDate(this._date[0])):CommonUtil.noticeError(0,"正在进行副本不可通过申请",!0)},s.prototype.refusedBtnHandler=function(){e.CommonGroupCtrl.instance.approvalApplyEx(0,[this._date[0]]),e.CommonGroupModel.instance.membersApplicationsDestoryDate(this._date[0])},n=s,e.CommonGroupToaApplyForItem=n}(modules=modules||{}),function(h){var l,o,t;function p(){}l=h.common_group||(h.common_group={}),o=Laya.Handler,p.getNoMoreNoticeIdByTeamType=function(t){return this.NoMoreNoticeIdArr[this.TeamTypeArr.indexOf(t)]},p.getActionOpenIdBySceneId=function(t){return this.ActionOpenIdArr[this.SceneIdArr.indexOf(t)]},p.getTeamTypeByBroadcastId=function(t){return this.TeamTypeArr[this.BroadcastIdArr.indexOf(t)]},p.getTeamTypeExByActionOpenId=function(t){return this.TeamTypeArr[this.ActionOpenIdArr.indexOf(t)]},p.getSceneTypeExByTeamType=function(t){return this.SceneTypeExArr[this.TeamTypeArr.indexOf(t)]},p.getSceneIdBySceneTypeEx=function(t){return this.SceneIdArr[this.SceneTypeExArr.indexOf(t)]},p.getSceneIdByTeamType=function(t){return this.SceneIdArr[this.TeamTypeArr.indexOf(t)]},p.getBroadcastIdByTeamType=function(t){return this.BroadcastIdArr[this.TeamTypeArr.indexOf(t)]},p.getTeamTypeBySceneId=function(t){return this.TeamTypeArr[this.SceneIdArr.indexOf(t)]},p.isOpenTeamScene=function(t,e){void 0===e&&(e=!1);var i=DungeonModel.instance.getCopySceneStateByType(t),n=i?i[2]:4;return e&&1===n||2===n},p.notTeamCopyIsMatching=function(){return 1===l.CommonGroupModel.instance.state},p.closeAllTeamAlert=function(){WindowManager.instance.close(1534),WindowManager.instance.close(1535),WindowManager.instance.close(1536),WindowManager.instance.close(1537),WindowManager.instance.close(1538),WindowManager.instance.close(1539),WindowManager.instance.close(1540),WindowManager.instance.close(1541),WindowManager.instance.close(1543)},p.notTeamCopyIsTeaming=function(){return!!this.isMyHaveTeam()&&(WindowManager.instance.open(1536,[0,0]),!0)},p.isOtherTeam=function(t,e){return void 0===e&&(e=!0),!!this.isMyHaveTeam()&&(l.CommonGroupModel.instance.teamType!=t[0]||l.CommonGroupModel.instance.teamType===t[0]&&l.CommonGroupModel.instance.sceneLevelTeam!=t[1])&&(l.CommonGroupModel.instance.isHomeowners?e?WindowManager.instance.open(1535,t):l.CommonGroupCtrl.instance.TeamSetType(t):e?WindowManager.instance.open(1536,t):l.CommonGroupCtrl.instance.kickTeamerEx(PlayerModel.instance.actorId),!0)},p.teamBtnHearl=function(t){if(p.isOtherTeam([t,0]))return!0;this.isOpenRoom(t)},p.OldCopyTeamIsOtherTeam=function(t){return CommonUtil.whetherInCopy()?(CommonUtil.notChangeTips(),!0):!!p.isOtherTeam([t,0])||!!this.isMyHaveTeam()&&(l.CommonGroupCtrl.instance.teamEnterScene(),!0)},p.OldCopyTeamIsOtherTeam1=function(t,e){CommonUtil.whetherInCopy()?CommonUtil.notChangeTips():p.isOtherTeam([t,e])||(this.isMyHaveTeam()?l.CommonGroupCtrl.instance.teamEnterScene():h.dungeon.DungeonCtrl.instance.reqEnterScene(this.getSceneIdByTeamType(t),e))},p.thePlayerIsMyTeam=function(t){return-1!=l.CommonGroupModel.instance.membersObjId.indexOf(t)},p.isMyHaveTeam=function(){return this.thePlayerIsMyTeam(PlayerModel.instance.actorId)},p.getTextByType=function(t){var e=t[0],i=t[1];p.isPublicTsScene(p.getSceneTypeExByTeamType(e))&&(i=0);var n=this.getSceneIdByTeamType(e),s=h.config.TeamSceneCfg.instance.getCfg(n,i);if(s){var o=s[3];return 2801===n?o[0]+"·"+o[1]:0===i?""+o[0]:o[0]+"·"+o[1]+"·"+o[2]}return"无"},p.isOpenTeamWin=function(t){this.createRoom(t,!0)},p.createRoomOrMatch=function(t,e){if(void 0===e&&(e=!0),CommonUtil.whetherInCopy())return CommonUtil.notChangeTips(),!0;if(p.isOtherTeam([t,0]))return!0;if(e)switch(t){case 1:if(!h.faerie_demon.FaerieDemonModel.instance.isHaveNum()&&!h.faerie_demon.FaerieDemonModel.instance.isHaveNum1())return CommonUtil.noticeError(11020),!0;break;case 3:if(h.teamBattle.TeamBattleModel.Instance.remainTimes<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 2:if(h.nothingness_world.NothingnessWorldModel.instance.nowChallengeNum<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 4:if(h.nether_world.NetherWorldModel.instance.nowChallengeNum<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0}return!1},p.createRoom=function(t,e,i,n){var s=this;void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),this.createRoomOrMatch(t,!1)||(e||!i||!h.windCloud.WindCloudModel.instance.isWaitingForMatch||n?e?p.isMyHaveTeam()||l.CommonGroupCtrl.instance.createTeamEx(t,0,0):this.isOpenRoom(t):CommonUtil.alert("温馨提示","风云擂台的擂台赛即将开始，进入副本内将无法进入擂台赛，是否仍然继续？"+CommonUtil.formatHtmlStrByColor("#ff3e3e","（未进入擂台赛将视作放弃本轮挑战）"),[o.create(this,function(){s.matchBtnHandler(t,i,!0)})],[]))},p.matchBtnHandler=function(t,e,i){var n=this;if(void 0===e&&(e=!1),void 0===i&&(i=!1),p.isMyHaveTeam()&&t===l.CommonGroupModel.instance.teamType)CommonUtil.noticeError(0,"已加入队伍",!0);else if(!this.createRoomOrMatch(t))if(e&&h.windCloud.WindCloudModel.instance.isWaitingForMatch&&!i)CommonUtil.alert("温馨提示","风云擂台的擂台赛即将开始，进入副本内将无法进入擂台赛，是否仍然继续？"+CommonUtil.formatHtmlStrByColor("#ff3e3e","（未进入擂台赛将视作放弃本轮挑战）"),[o.create(this,function(){n.matchBtnHandler(t,e,!0)})],[]);else if(p.isMyHaveTeam())this.isOpenRoom(t);else{if(1===t&&!p.isOpenTeamScene(38))return void CommonUtil.noticeError(0,"活动未开启",!0);h.common_group.CommonGroupCtrl.instance.mateTeamerEx(t),WindowManager.instance.open(1533,t)}},p.getTpyeAndLevel=function(t){return[0<t?Math.floor(t/10):0,0<t?t%10:0]},p.getTpyeAndLevelInx=function(t){var e=this.getTpyeAndLevel(t);return[e[0],0<e[1]?e[1]-1:0]},p.isPublicScene=function(t){return-1!=this.PublicScene.indexOf(t)&&(42!==t||1===h.scene.SceneUtil.curSceneLv)},p.inCopyIsTeamScence=function(t){return void 0===t&&(t=h.scene.SceneUtil.currScene),-1!=this.SceneTypeExArr.indexOf(t)&&(42!==t||1===h.scene.SceneUtil.curSceneLv)},p.isPublicTsScene=function(t){return-1!=this.PublicTsScene.indexOf(t)},p.getIsOpenBySceneID=function(t,e,i,n,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=0),void 0===s&&(s=!1);var o=h.config.TeamSceneCfg.instance.getCfgFirst(t);if(o){var a=o[2];if(h.funcOpen.FuncOpenModel.instance.getFuncIsOpen(a)){switch(t){case 2501:if(e&&!this.isOpenTeamScene(38,!0))return s&&CommonUtil.noticeError(0,"活动未开启",!0),!1;break;case 2801:if(e&&!this.isOpenTeamScene(42,!0))return s&&CommonUtil.noticeError(0,"活动未开启",!0),!1;break;case 4201:if(e&&!h.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(s))return!1;break;case 3201:if(e&&!this.isOpenTeamScene(44,!0))return s&&CommonUtil.noticeError(0,"活动未开启",!0),!1;break;case 2391:if(i&&h.spiritDungeon.SpiritDungeonModel.instance.selectType(p.getTpyeAndLevel(n)[0]+1))return!1;break;case 3501:var r=p.getTpyeAndLevel(n)[0]+1;if(i&&!h.divinatory_card.DivinatoryCardModel.instance.getState(r))return h.config.DivinatoryCardActionCfg.instance.feishengNotice(r,!0),!1;break;case 3701:var l=h.config.SceneShowEquipBossCfg.instance.tab[p.getTpyeAndLevel(n)[0]];if(i&&h.showEquip.ShowEquipModel.instance.IsShowNoticeTipsByType(l))return!1}return!0}s&&CommonUtil.noticeError(0,h.funcOpen.FuncOpenModel.instance.getFuncOpenTipById(a),!0)}return!1},p.isOpenRoom=function(t){void 0===t&&(t=null),WindowManager.instance.isOpened(1542)||WindowManager.instance.open(1542,t)},p.inTeamCopyOpen=function(t){if(void 0===t&&(t=!0),CommonUtil.whetherInCopy()&&p.isPublicScene(h.scene.SceneUtil.currScene)&&!this.isMyHaveTeam()){var e=h.scene.SceneUtil.currScene,i=h.scene.SceneUtil.curSceneLv;switch(l.CommonGroupModel.instance.sceneId=p.getSceneIdBySceneTypeEx(e),e){case 35:var n=h.config.SceneYuanShenBossCfg.instance.getCfgByLayer(i);l.CommonGroupModel.instance.sceneLevel=n[1];break;case 47:var s=h.config.SceneDivinatoryBossCfg.instance.bosslist[i][0];l.CommonGroupModel.instance.sceneLevel=s[1];break;case 49:var o=h.config.SceneShowEquipBossCfg.instance.bosslist[i-1][0];l.CommonGroupModel.instance.sceneLevel=o[1];break;case 54:case 44:case 42:l.CommonGroupModel.instance.sceneLevel=0}}t&&WindowManager.instance.open(1542)},p.getHanHuaName=function(t){var e="";switch(t){case 1:e="九州频道";break;case 4:e="仙盟频道";break;case 6:e="战队频道"}return e},p.getLeaderwhetherInCopy=function(){if(this.isMyHaveTeam()){var t=l.CommonGroupModel.instance.leaderTeamer;if(t){var e=t[4];return 4===e?0:1===e?1:e}}return 0},p.getMywhetherInCopy=function(){return CommonUtil.whetherInCopy()?p.isPublicScene(h.scene.SceneUtil.currScene)?3:2:1},p.chatHyperlinksClick=function(t,e,i,n,s,o){void 0===t&&(t=!0),void 0===e&&(e=!0);var a=this.getTeamTypeExByActionOpenId(i),r=this.getSceneIdByTeamType(a);if(this.isMyHaveTeam())return n===l.CommonGroupModel.instance.teamId?CommonUtil.noticeError(0,"已在队伍中",!1):CommonUtil.noticeError(0,"已有队伍",!1),!0;if(e&&!l.CommonGroupModel.instance.inApplied(n))return CommonUtil.noticeError(0,"已在审核列表中请稍等",!0),!0;if(CommonUtil.whetherInCopy()){if(!p.isPublicScene(h.scene.SceneUtil.currScene))return CommonUtil.noticeError(0,e?"正在进行副本不可发起申请":"正在进行副本",!0),!0;if(this.getSceneTypeExByTeamType(a)!=h.scene.SceneUtil.currScene)return CommonUtil.noticeError(0,e?"当前场景不可申请此目标队伍":"当前场景无法加入此队伍",!0),!0}if(!this.getIsOpenBySceneID(r,!1,!0,o,!0))return!0;switch(a){case 1:if(t&&!h.faerie_demon.FaerieDemonModel.instance.isHaveNum()&&!h.faerie_demon.FaerieDemonModel.instance.isHaveNum1())return CommonUtil.noticeError(11020),!0;break;case 2:if(t&&h.nothingness_world.NothingnessWorldModel.instance.nowChallengeNum<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 3:if(t&&h.teamBattle.TeamBattleModel.Instance.remainTimes<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 4:if(t&&h.nether_world.NetherWorldModel.instance.nowChallengeNum<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 5:case 6:case 7:case 8:break;case 9:if(-1===h.warband.WarbandModel.instance.leaderId?(CommonUtil.noticeError(0,"此玩法只能加入自己战队队伍,您尚未加入战队",!0),1):!h.warband.WarbandModel.instance.isMyWarBandPeople(s)&&(CommonUtil.noticeError(0,"此玩法只能加入自己战队队伍",!0),1))return!0;break;case 10:if(h.faction.FactionModel.instance.hasFaction?!h.faction.FactionModel.instance.isTongXianMeng(s)&&(CommonUtil.noticeError(0,"此玩法只能加入自己仙盟队伍",!0),1):(CommonUtil.noticeError(0,"此玩法只能加入自己仙盟队伍,您尚未加入仙盟",!0),1))return!0}return e&&(n&&s&&(l.CommonGroupCtrl.instance.applyTeamerEx(n,s,a,o),l.CommonGroupModel.instance.TeamsThatHaveAlreadyApplied.set(n,[n,GlobalData.serverTime])),GlobalData.dispatcher.event("GET_TEAM_LIST_REPLY")),!1},p.IsItSatisfied=function(){return 1==p.getMywhetherInCopy()&&3==p.getLeaderwhetherInCopy()&&p.isPublicScene(p.getSceneTypeExByTeamType(l.CommonGroupModel.instance.teamType))},p.IsItSatisfied1=function(){return 1==p.getMywhetherInCopy()&&p.teammateInCopy()&&!p.isPublicScene(p.getSceneTypeExByTeamType(l.CommonGroupModel.instance.teamType))},p.teammateInCopy=function(){if(this.isMyHaveTeam())for(var t=0;t<l.CommonGroupModel.instance.members.length;t++){var e=l.CommonGroupModel.instance.members[t];if(e&&3===e[4])return!0}return!1},p.changLose=function(){p.isMyHaveTeam()&&h.common_group.CommonGroupModel.instance.isHomeowners&&(h.common_group.CommonGroupModel.instance.changeLose(),WindowManager.instance.close(1541))},p.SceneIdArr=[2501,2701,2091,4001,2391,3501,3701,3201,4201,2801],p.TeamTypeArr=[1,2,3,4,5,6,7,8,9,10],p.SceneTypeExArr=[38,40,9,52,35,47,49,44,54,42],p.BroadcastIdArr=[49,68,94,98,129,130,131,132,133,134],p.ActionOpenIdArr=[377,633,43,918,354,837,852,777,943,698],p.NoMoreNoticeIdArr=[18,9,10,11,12,13,14,15,16,17],p.PublicScene=[35,47,49,54,44,42],p.PublicTsScene=[54,44,42],t=p,l.CommonGroupUtil=t}(modules=modules||{}),function(t){var e,i;function n(){var t=GlobalData.getConfig("direct_ex");this._cfg={};for(var e=0,i=t.length;e<i;e++)this._cfg[t[e][0]]=t[e]}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgById=function(t){return this._cfg[t]},i=n,e.DirectExCfg=i}(modules=modules||{}),function(o){var t,a,e,i;function n(){this.actionIds=[994,995,996,997,998,999,1008],this.actionIcon=["wwdz","yslz","sqjl","qwgs","jmxw","xjfy","yslz"]}t=o.direct_ex||(o.direct_ex={}),a=o.funcOpen.FuncOpenModel,e=o.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getFunOpenIds=function(){return-1},Object.defineProperty(n.prototype,"endTm",{get:function(){return this.info&&this.info[3]||0},enumerable:!0,configurable:!0}),n.prototype.getDirectBuyReply=function(t){if(this.info=t,GlobalData.dispatcher.event("DIRECT_EX_UPDATE"),1===this.info[2])for(var e=o.config.DirectExCfg.instance.getCfgById(this.info[0]),i=e&&e[3]||-1,n=0,s=this.actionIds.length;n<s;n++)this.actionIds[n]===i?a.instance.setActionOpen(this.actionIds[n],1):a.instance.setActionOpen(this.actionIds[n],2);else for(n=0,s=this.actionIds.length;n<s;n++)a.instance.setActionOpen(this.actionIds[n],2);this.setRP()},n.prototype.getState=function(t){return this.info?t===this.info[0]?this.info[1]:-1===this.info[5].indexOf(t)?0:2:0},n.prototype.setRP=function(){this.info&&e.instance.setRPProperty("directexRP",1===this.info[1]&&1===this.info[2])},i=n,t.DirectExModel=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.nether_world||(t.nether_world={}),n=t.common.ProgressBarCtrl,s=game.GameCenter,i=ui.NothingnessWorldCopyPlayerInfoItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,93)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._npc&&this._npc.property.on("hp",this,this.updateHP),this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updatePlayers)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1},a.prototype.updatePlayers=function(){this._dates?(this._roleId=this._dates[0],this.headIcon.setInfo(this._dates[3],this._dates[1],this._dates[4]),this.nameText.text=this._dates[2],this._dates[7]?(this._proCtrl.maxValue=1,this._proCtrl.value=0,this.overImg.visible=!0):this.updateHP(),this.img1.visible=this.text1.visible=!1,this.headIcon.gray=!1):console.log("战魂神殿 副本内 右边玩家信息为null")},a.prototype.updateHP=function(){if(this._roleId&&(this._npc=s.instance.getRole(this._roleId),this._npc&&(this._isAdd||(this._isAdd=!0,console.log("监听飘血事件~~~~~~:"+this._roleId),this._npc.property.on("hp",this,this.updateHP)),this.overImg.visible=!1,this._npc.property&&this._isAdd))){var t=this._npc.property.get("hp");this._proCtrl.maxValue=t[1],this._proCtrl.value=t[0],this.overImg.visible=t[0]<=0,t[0]}},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1,this._dates=t,Laya.timer.clearAll(this),this.updatePlayers()},a.prototype.destroy=function(){this._proCtrl&&(this._proCtrl.destroy(),this._proCtrl=null),i.prototype.destroy.call(this)},o=a,e.NetherWorldCopyPlayerInfoItem=o}(modules=modules||{}),function(o){var t,e;function i(){this.myWraBandRank=0,this.doneWave=0,this.doneWave1=1,this.maxLevelNum=0,this.maxNumWarband=0,this.currLv=0,this.cDayCopy=0,this.upLvTime=0,this.emptyer=[],this.teamPatternRecordNum=this.teamRecordNum=this.personalRecordNum=0,this._nowChallengeNum=0,this.maxChallengeNum=o.config.BlendCfg.instance.getCfgById(97602)[1][0],this.maxNumWarband=o.config.BlendCfg.instance.getCfgById(97603)[1][0],this.maxLevelNum=o.config.SceneZhanHunCfg.instance.cfgs.length,this._nowIndex=0,this._nowIndex2=0,this.personFireListRank=new Array,this.warbandFireListRank=new Array,this.personFireListRankTable={},this.warbandFireListRankTable={},this.personFireListRankTableByRank={},this.warbandFireListRankTableByRank={}}t=o.nether_world||(o.nether_world={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isMaxWave",{get:function(){return this.doneWave>=this.maxLevelNum},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nowChallengeNum",{get:function(){return this._nowChallengeNum},set:function(t){this._nowChallengeNum=t,this.setRP()},enumerable:!0,configurable:!0}),i.prototype.setPersonFireListRank=function(t){this.personFireListRank=t,this.personFireListRankTable={},this.personFireListRankTableByRank={};for(var e=0;e<t.length;e++){var i=t[e];this.personFireListRankTable[i[0]]=i,this.personFireListRankTableByRank[i[6]]=i}},i.prototype.setWarbandFireListRank=function(t){this.warbandFireListRank=t,this.warbandFireListRankTable={},this.warbandFireListRankTableByRank={};for(var e=this.myWraBandRank=0;e<t.length;e++){var i=t[e],n=i[0],s=i[4];this.warbandFireListRankTable[n]=i,this.warbandFireListRankTableByRank[s]=i,n===o.warband.WarbandModel.instance.warbandId&&(this.myWraBandRank=s)}},i.prototype.GetZhanhunCopyPersonRankReply=function(t){this.setPersonFireListRank(t[0]),this.personalRecordNum=t[1],this.teamRecordNum=t[2],this.teamPatternRecordNum=t[3],GlobalData.dispatcher.event("NOTHINGNESS_CONTENTION_REPLY_RANK")},i.prototype.GetZhanhunCopyWarbandRankReply=function(t){this.setWarbandFireListRank(t[0]),this.cDayCopy=t[1],GlobalData.dispatcher.event("NOTHINGNESS_CONTENTION_REPLY_RANK")},i.prototype.GetZhanhunCopyInfoReply=function(t){if(t){var e=t[0];e&&(this.nowChallengeNum=e[1])}GlobalData.dispatcher.event("GET_EMPTY_INFO_REPLY")},i.prototype.UpdateZhanhunCopyInfo=function(t){this.emptyer=t[0],GlobalData.dispatcher.event("UPDATE_EMPTYER_INFO")},i.prototype.setRP=function(){var t=o.funcOpen.FuncOpenModel.instance.getFuncIsOpen(918);o.redPoint.RedPointCtrl.instance.setRPProperty("netherWorldRP",0<this.nowChallengeNum&&t)},e=i,t.NetherWorldModel=e}(modules=modules||{}),function(t){var a,r,l,e;function i(){return null!==r&&r.apply(this,arguments)||this}a=t.nether_world||(t.nether_world={}),l=t.config.ZhanHunCopyCfg,r=ui.NothingnessWorldRankItemUI,__extends(i,r),i.prototype.initialize=function(){r.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.html,"#ffffff","SimHei",20),this.html.innerHTML=""},i.prototype.setData=function(t){r.prototype.setData.call(this,t),this.rankImg.visible=this.commonRank.visible=this.notplaylisttxt.visible=this.scoreTxt.visible=this.nameTxt.visible=!0,this.html.visible=!1;var e="",i=0,n=0;if(9!=t){var s=a.NetherWorldModel.instance.personFireListRankTableByRank[t],o=l.instance.getCfgByRank(1,t);o&&(n=o[3]),s?(e=s[2],i=s[5],this.notplaylisttxt.visible=!1,this.scoreTxt.visible=this.nameTxt.visible=!0):(this.notplaylisttxt.visible=!0,this.scoreTxt.visible=this.nameTxt.visible=!1),this.scoreTxt.text=i+"层",this.nameTxt.text=e,this.notplaylisttxt.text="本周累计通过"+n+"层可上榜"}1===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_first.png"):2===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_second.png"):3===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_third.png"):9===t?(this.html.visible=!0,this.rankImg.visible=this.commonRank.visible=this.notplaylisttxt.visible=this.scoreTxt.visible=this.nameTxt.visible=!1,this.html.innerHTML="本周通关层数:<span style='color:#50ff28'>"+a.NetherWorldModel.instance.personalRecordNum+"</span>层"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+t)},e=i,a.NetherWorldRankItem=e}(modules=modules||{}),function(t){var a,r,l,e;function i(){return null!==r&&r.apply(this,arguments)||this}a=t.nether_world||(t.nether_world={}),l=t.config.ZhanHunCopyCfg,r=ui.NothingnessWorldRankItemUI,__extends(i,r),i.prototype.initialize=function(){r.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.html,"#ffffff","SimHei",20),this.html.innerHTML=""},i.prototype.setData=function(t){r.prototype.setData.call(this,t),this.rankImg.visible=this.commonRank.visible=this.notplaylisttxt.visible=this.scoreTxt.visible=this.nameTxt.visible=!0,this.html.visible=!1;var e="",i=0,n=0;if(6!=t&&7!=t){var s=a.NetherWorldModel.instance.warbandFireListRankTableByRank[t],o=l.instance.getCfgByRank(2,t);o&&(n=o[3]),s?(e=s[2],i=s[3],this.notplaylisttxt.visible=!1,this.scoreTxt.visible=this.nameTxt.visible=!0):(this.notplaylisttxt.visible=!0,this.scoreTxt.visible=this.nameTxt.visible=!1),this.scoreTxt.text=i+"层",this.nameTxt.text=e,this.notplaylisttxt.text="通过"+n+"层可上榜"}1===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_first.png"):2===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_second.png"):3===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_third.png"):6===t?(this.html.visible=!0,this.rankImg.visible=this.commonRank.visible=this.notplaylisttxt.visible=this.scoreTxt.visible=this.nameTxt.visible=!1,this.html.innerHTML="战队最佳记录:<span style='color:#50ff28'>"+a.NetherWorldModel.instance.teamRecordNum+"</span>层"):7===t?(this.html.visible=!0,this.rankImg.visible=this.commonRank.visible=this.notplaylisttxt.visible=this.scoreTxt.visible=this.nameTxt.visible=!1,this.html.innerHTML="战队模式记录:<span style='color:#50ff28'>"+a.NetherWorldModel.instance.teamPatternRecordNum+"</span>层"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+t)},e=i,a.NetherWorldRankItem1=e}(modules=modules||{}),function(t){var e,l,i;function n(){return l.call(this)||this}e=t.nether_world||(t.nether_world={}),l=ui.FireContentionRankRewardItemUI,__extends(n,l),n.prototype.setData=function(t){l.prototype.setData.call(this,t);var e=t[1],i=t[2];if(e){1===e[0]&&1===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===e[0]&&2===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===e[0]&&3===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.rankText.visible=!0,e[0]===e[1]?this.rankText.text="第"+e[0]+"名":this.rankText.text="第"+e[0]+"-"+e[1]+"名");for(var n=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],s=0;s<n.length;s++)n[s].visible=!1;var o=[];for(s=0;s<i.length;s+=2)o.push([i[s],i[s+1],0,null]);for(s=0;s<o.length;s++){var a=o[s],r=n[s];r&&a&&(r.dataSource=a,r.visible=!0)}}},i=n,e.NetherWorldRankRewardItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.nian_end_happy_daily||(t.nian_end_happy_daily={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.openFestivalType},enumerable:!0,configurable:!0}),n=s,e.NianEndHappyDailyRewardItem=n}(modules=modules||{}),function(i){var n,s,o,t,e;function a(){return s.call(this)||this}n=i.nian_end_happy_seven_days_pay||(i.nian_end_happy_seven_days_pay={}),o=i.bag.BagUtil,t=i.soaring_singlePay.PayAndAwardsItem,s=t,__extends(a,s),a.prototype.setData=function(t){if(s.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=i.config.FestivalPayTotalCfg.instance.getCfgsById(e),!this._datas)return;this.showUI()}},a.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=this._datas[3];if(t){var e=CommonUtil.formatItemData(t);o.canAddItemsByBagIdCount(e)&&n.NianEndHappySevenDaysPayCtrl.instance.DrawFestPayTotal(this._datas[0])}}},a.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励";for(var e=this._datas[3],i=[],n=0,s=e.length;n<s;n+=2)i.push([e[n],e[n+1]]);this.showRewards(i),this.setBtnSure(),this.showScheduleText()},a.prototype.showScheduleText=function(){var t=n.NianEndHappySevenDaysPayModel.instance.money,e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},a.prototype.setBtnSure=function(){if(i.festival.FestivalModel.instance.getHuoDongType(i.festival.FestivalModel.instance.openFestivalType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,s.prototype.destroy.call(this,t)},e=a,n.NianEndHappySevenDaysPayItem=e}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.nian_end_happy_seven_days_pay||(a.nian_end_happy_seven_days_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("nianEndaccPayRP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.openFestivalType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.openFestivalType)&&t){var e=t[14];if(e){this._restTm=t[2],this._money=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayTotalCfg.instance.getCfgsById(o)[5]<=this._money&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(1014),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.openFestivalType);r.instance.setRPProperty("nianEndaccPayRP",t&&e&&i)},e=i,t.NianEndHappySevenDaysPayModel=e}(modules=modules||{}),function(n){var t,e,i;function s(){}t=n.nian_end_one_buy||(n.nian_end_one_buy={}),e=n.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"endTm",{get:function(){var t=n.config.FestivalOpenCfg.instance.getCfgByType(n.festival.FestivalModel.instance.openFestivalType);return t&&t[2][1]||0},enumerable:!0,configurable:!0}),s.prototype.getEndAccPayInfoReply=function(t){if(t){var e=t[2][0];if(e&&(this.cfgId=e[0],this.buyState=e[1],GlobalData.dispatcher.event("DIRECT_EX_UPDATE"),this.setRP(),n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(1011))){var i=this.getActionOpen()?1:2;n.funcOpen.FuncOpenModel.instance.setActionOpen(1011,i)}}},s.prototype.setRP=function(){e.instance.setRPProperty("nianEndOneBuyRP",1===this.buyState)},s.prototype.getActionOpen=function(){return 2!=this.buyState},i=s,t.NianEndOneBuyModel=i}(modules=modules||{}),function(e){var i,n,s,o,t;function a(){return n.call(this)||this}i=e.perfectest_ten_continuous_pay||(e.perfectest_ten_continuous_pay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,n=e.soaring_singlePay.PayAndAwardsItem,__extends(a,n),a.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},a.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.PerfectestTenContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},a.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},a.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2],i="("+t+"/"+e+")";this.scheduleText.text=i,this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},a.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.PerfectestTenType)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},t=a,i.PerfectestTenContinuousPayItem=t}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.perfectest_ten_continuous_pay||(r.perfectest_ten_continuous_pay={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.PerfectestTenType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.PerfectestTenType);if(l.instance.setRPProperty("perfectestTen1RP",!1),e&&t){var i=t[19];if(i){this._restTm=t[2],this._moneyAcc=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(954),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.PerfectestTenType);l.instance.setRPProperty("perfectestTen1RP",t&&e&&i)},e=i,t.PerfectestTenContinuousPayModel=e}(modules=modules||{}),function(e){var n,i,s,o,t;function a(){return null!==i&&i.apply(this,arguments)||this}n=e.perfectest_ten_cumulate_pay||(e.perfectest_ten_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,i=e.soaring_singlePay.PayAndAwardsItem,__extends(a,i),a.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},a.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&n.PerfectestTenCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},a.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},a.prototype.showScheduleText=function(){var t=n.PerfectestTenCumulatePayModel.instance.accumulate,e=this._datas[1],i="("+t+"/"+e+")";this.scheduleText.text=i,this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},a.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.PerfectestTenType)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},t=a,n.PerfectestTenCumulatePayItem=t}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.perfectest_ten_cumulate_pay||(a.perfectest_ten_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("perfectestTen2RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.PerfectestTenType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.PerfectestTenType)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(953),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.PerfectestTenType);r.instance.setRPProperty("perfectestTen2RP",t&&e&&i)},e=i,t.PerfectestTenCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenFestFestConLoginItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),i=t.festival.ConvertItem1,__extends(s,i),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"PERFECTESTTEN_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintArr",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenHintArr},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenFestConvertItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_festival||(t.perfectest_ten_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenFestivalDailyRewardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_good_man||(t.perfectest_ten_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="perfectest_ten/icon_zzqy_01.png"},n=s,e.PerfectestTenGoodManItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_good_man||(t.perfectest_ten_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="perfectest_ten/icon_zzqy_01.png"},n=s,e.PerfectestTenGoodManItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_pay_rank||(t.perfectest_ten_pay_rank={}),i=t.festival.PayRankBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"consumptionItemId",{get:function(){return e.PerfectestTenPayRankModel.instance.consumptionItemId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableByRank",{get:function(){return e.PerfectestTenPayRankModel.instance._rankersTableByRank},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenPayRankItem=n}(modules=modules||{}),function(r){var t,e;function i(){this._consumptionItemId=r.config.BlendCfg.instance.getCfgById(67016)[1][0],this._consume=0,this._restTmConsumption=0,this._rankersTableByRank={},this._rankersTableById={}}t=r.perfectest_ten_pay_rank||(r.perfectest_ten_pay_rank={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTmConsumption",{get:function(){return this._restTmConsumption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consume",{get:function(){return this._consume},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consumptionItemId",{get:function(){return this._consumptionItemId},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.PerfectestTenType];r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.PerfectestTenType)&&t&&(this._consume=t[18],this._consume=this._consume?this._consume:0)},i.prototype.uodateInfoConsume=function(t){var e=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.PerfectestTenType];r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.PerfectestTenType)&&e&&(this._consume=t[0],this._consume=this._consume?this._consume:0,GlobalData.dispatcher.event("ACTIVITY_SPENDING_RANKING"))},i.prototype.uodateInfoDate=function(t){this._rankersTableByRank={},this._rankersTableById={};var e=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.PerfectestTenType];if(r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.PerfectestTenType)&&e){this._restTmConsumption=t[0];for(var i=t[1],n=0;n<i.length;n++){var s=i[n];if(s){var o=s[3],a=s[0];this._rankersTableByRank[o]=s,this._rankersTableById[a]=s}}GlobalData.dispatcher.event("ACTIVITY_SPENDING_RANKING")}},e=i,t.PerfectestTenPayRankModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_score_rank||(t.perfectest_ten_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenScoreRankItem=n}(modules=modules||{}),function(n){var s,i,o,a,r,t;function e(){return null!==i&&i.apply(this,arguments)||this}s=n.perfectest_ten_single_pay||(n.perfectest_ten_single_pay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,i=n.soaring_singlePay.PayAndAwardsItem,__extends(e,i),e.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},e.prototype.sureBtnHandler=function(){var t;if(t=this._value[1],Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111),this.close();else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.PerfectestTenSinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},e.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},e.prototype.showScheduleText=function(){var t=this._value[1],e=Math.round(t%1e3),i=this._datas[0];0==s.PerfectestTenSinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},e.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(n.festival.FestivalModel.instance.PerfectestTenType)){var t;t=this._value[1];var e=this._datas[0],i=s.PerfectestTenSinglePayModel.instance.getState(t,e);0==i?this.showGotoRecharge():1==i?this.showCanReceive():this.showReceived()}else this.showOver()},t=e,s.PerfectestTenSinglePayItem=t}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.perfectest_ten_single_pay||(a.perfectest_ten_single_pay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("perfectestTen3RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.PerfectestTenType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.PerfectestTenType)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(952),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.PerfectestTenType);l.instance.setRPProperty("perfectestTen3RP",t&&e&&i)},e=i,t.PerfectestTenSinglePayModel=e}(modules=modules||{}),function(r){var t,n,s,e;function i(){return n.call(this)||this}t=r.perfectest_ten_star||(r.perfectest_ten_star={}),s=r.config.GoodRankSingleCfg,n=ui.PerfectestTenSartItem1UI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this.shouHuPlayer=[this.item2,this.item3],this.shouHuPlayerText=[this.zanWuText1,this.zanWuText2],this.shouHuPlayerHTML=[this.StatementHTML1,this.StatementHTML2],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),CommonUtil.setHTMLPro(this.StatementHTML1,"#1f304d","SimHei",22,"center"),CommonUtil.setHTMLPro(this.StatementHTML2,"#1f304d","SimHei",22,"center"),this.bottomImg.skin="perfectest_ten/icon_zzqy_02.png"},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI)},i.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showUI()},i.prototype.setData=function(t){n.prototype.setData.call(this,t),this.mingCiImg.visible=this.mingCIclip.visible=1<=t&&t<=3,this.rankText.visible=4<=t,this.rankText.text="第 "+t+" 名",this.mingCIclip.value=""+t,this._mingCi=t,this._dates=s.instance.getCfgsByGrade(r.festival.FestivalModel.instance.PerfectestTenType,r.festival.FestivalModel.instance.getCrossOpenServerDay(r.festival.FestivalModel.instance.PerfectestTenType),this._mingCi);var e=this._dates[3],i=this._dates[6];this.StatementHTML.innerHTML="收到"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.PerfectestTenType)+"达<span style='color:#168a17'>"+e+"</span>可上榜",this.StatementHTML1.innerHTML="赠送<span style='color:#168a17'>"+(i?i[0]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.PerfectestTenType)+"可上榜",this.StatementHTML2.innerHTML="赠送<span style='color:#168a17'>"+(i?i[1]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.PerfectestTenType)+"可上榜"},i.prototype.showUI=function(){if(this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!1,this._theGoodRanker=r.single_dog_sart.SingleDogSartModel.instance.getTableByRank(r.festival.FestivalModel.instance.PerfectestTenType,this._mingCi),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.item1.data=t,this.item1.visible=!0,this.item1.giveBtn.visible=!0;for(var i=0;i<2;i++){var n=e[i],s=this.shouHuPlayer[i],o=this.shouHuPlayerText[i],a=this.shouHuPlayerHTML[i];n?(s.visible=!0,a.visible=o.visible=!1,s.data=n):(a.visible=o.visible=!0,s.visible=!1)}}else this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML2.visible=this.StatementHTML1.visible=this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!0},e=i,t.PerfectestTenStarItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_star||(t.perfectest_ten_star={}),i=t.single_dog_sart.SingleDogSartItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenStarItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_star||(t.perfectest_ten_star={}),i=t.single_dog_sart.SingleDogSartItem2,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.PerfectestTenType},enumerable:!0,configurable:!0}),n=s,e.PerfectestTenStarItem2=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_store||(t.perfectest_ten_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.PerfectestTenStoreModel.instance.rewardListById,this.types=t.festival.FestivalModel.instance.PerfectestTenType,i.prototype.showUI.call(this)},n=s,e.PerfectestTenStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.perfectest_ten_store||(a.perfectest_ten_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.PerfectestTenType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.PerfectestTenType)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("至臻 商城 数据：",this.rewardList)}}},e=i,t.PerfectestTenStoreModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.perfectest_ten_yu_lan||(t.perfectest_ten_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanItem,__extends(s,i),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.wardText.text="助攻奖励"},n=s,e.PerfectestTenYuLanItem=n}(modules=modules||{}),function(e){var i,n,a,t;function s(){this.tasks=[],this.money=0,this.cfgId=0,this.endTm=0,this.redBagItemId=94760025,this.backstageState=0}i=e.phone_qq_red_bag||(e.phone_qq_red_bag={}),n=e.redPoint.RedPointCtrl,a=e.config.QQRedTaskCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getQQRedTaskReply=function(t){this.cfgId=t[1],this.endTm=t[2],this.tasks=t[0],this.setActonOpen(),GlobalData.dispatcher.event("PHONE_QQ_RED_BAG_UPDATE"),this.setRP()},s.prototype.getQQRedMoneyReply=function(t){this.money=t[0],this.maxState=t[1],GlobalData.dispatcher.event("PHONE_QQ_RED_BAG_UPDATE"),this.setRP()},s.prototype.updateQQRedTask=function(t){for(var e=t[0],i=0,n=this.tasks.length;i<n;i++)if(this.tasks[i][0]===e[0]){this.tasks[i]=e;break}GlobalData.dispatcher.event("PHONE_QQ_RED_BAG_UPDATE"),this.setRP()},s.prototype.getTaskById=function(t){for(var e=0,i=this.tasks.length;e<i;e++)if(t==this.tasks[e][0])return this.tasks[e];return null},s.prototype.updateQQRedMoney=function(t){this.money=t[0],GlobalData.dispatcher.event("PHONE_QQ_RED_BAG_UPDATE"),this.setRP()},s.prototype.updateQQRedState=function(t){this.maxState=t[0],GlobalData.dispatcher.event("PHONE_QQ_RED_BAG_UPDATE"),this.setRP()},s.prototype.getIdsByType=function(t,e){for(var i=[],n=0,s=e.length;n<s;n++){var o=a.instance.getCfgById(e[n]);o[6]===t&&i.push(o[0])}return i},s.prototype.setRP=function(){for(var t=!1,e=0,i=this.tasks.length;e<i;e++)2===this.tasks[e][1]&&(t=!0);n.instance.setRPProperty("phoneQQRedBagRP",t)},s.prototype.getRPByType=function(t){for(var e=0,i=this.tasks.length;e<i;e++)if(2==this.tasks[e][1]&&a.instance.getCfgById(this.tasks[e][0])[6]==t)return!0;return!1},s.prototype.getMoney=function(){return this.money},s.prototype.setActonOpen=function(){var t=this.backstageState&&this.cfgId?1:2;1==t&&i.PhoneQQRedBagCtrl.instance.showOpen(),e.funcOpen.FuncOpenModel.instance.setActionOpen(1023,t)},t=s,i.PhoneQQRedBagModel=t}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.phone_qq_red_bag||(t.phone_qq_red_bag={}),n=t.config.BlendCfg,i=ui.PhoneQQRedBagTaskBtnItemUI,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("PHONE_QQ_RED_BAG_UPDATE",this,this.updataRP)},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.btn.skin="phone_qq_red_bag/btn_qqhbhd_"+(t?"hd":"huangdi")+".png",this.txt.color=t?"#ffffff":"#a46547"},o.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=n.instance.getCfgById(93002)[2];this.txt.text=e[t-1],this.updataRP()},o.prototype.updataRP=function(){this.imgRp.visible=e.PhoneQQRedBagModel.instance.getRPByType(this._data)},o.prototype.destroy=function(){this.btn=this.destroyElement(this.btn),this.txt=this.destroyElement(this.txt),this.imgRp=this.destroyElement(this.imgRp),i.prototype.destroy.call(this)},s=o,e.PhoneQQRedBagTaskBtnItem=s}(modules=modules||{}),function(t){var r,e,l,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}r=t.phone_qq_red_bag||(t.phone_qq_red_bag={}),l=t.config.QQRedTaskCfg,i=t.commonAlert.PropAlertUtil,e=ui.PhoneQQRedBagTaskItemUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.condition,"#FFFFFF","SimHei",24),this._btnClip=CustomClip.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChildAt(this._btnClip,4),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-10,!0),this._btnClip.scale(.8,.85,!0),CustomClip.thisStop(this._btnClip)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHanlder)},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this.updataView()},s.prototype.updataView=function(){var t=r.PhoneQQRedBagModel.instance.getTaskById(this._data);this._cfg=l.instance.getCfgById(this._data),this.item.dataSource=[r.PhoneQQRedBagModel.instance.redBagItemId,Math.round(this._cfg[2]),0,null];var e=t?t[1]:1;this._btnClip.stop(),this._btnClip.visible=!1;var i="#ff3e3e";GlobalData.serverTime>=r.PhoneQQRedBagModel.instance.endTm?(this.sureBtn.visible=this.received.visible=!1,this.theEnd.visible=!0):(this.theEnd.visible=!1,1===e?(this.sureBtn.label="前往",this.received.visible=!1,this.sureBtn.visible=!0,this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460,#465460,#465460,#465460"):2===e?(this._btnClip.play(),this.received.visible=!1,this._btnClip.visible=!0,i="#00ad35",this.sureBtn.label="拆开",this.sureBtn.visible=!0,this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119"):(this.received.visible=!0,i="#00ad35",this.sureBtn.visible=!1));var n,s=this._cfg[10];if(t){var o=(t[2][0]||[0,0,0])[1],a=s<o?s:o;1!==e&&(a=s),n="("+a+"/"+s+")"}else n="(0/"+s+")";this.condition.innerHTML=this._cfg[5]+"<span style='color:"+i+"'>"+n+"</span>"},s.prototype.sureHanlder=function(){var t,e=r.PhoneQQRedBagModel.instance.getTaskById(this._data);e?1===e[1]?(i.skipScene(this._cfg[4]),(t=WindowManager.instance.getDialogById(1527))&&this._cfg[4]&&t.close()):2===e[1]?r.PhoneQQRedBagCtrl.instance.drawQQRedPackage(parseInt(e[0])):console.log("....不存在的状态"):(i.skipScene(this._cfg[4]),(t=WindowManager.instance.getDialogById(1527))&&this._cfg[4]&&t.close())},s.prototype.destroy=function(){this.theEnd=this.destroyElement(this.theEnd),this.sureBtn=this.destroyElement(this.sureBtn),this._btnClip=this.destroyElement(this._btnClip),this.condition=this.destroyElement(this.condition),e.prototype.destroy.call(this)},n=s,r.PhoneQQRedBagTaskItem=n}(modules=modules||{}),function(o){var t,e,a,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=o.ranking_list_new||(o.ranking_list_new={}),a=o.common.CommonUtil,i=ui.PlayerRankingItemUI,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),a.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),this.headIcon.headImg.skin=this.headIcon.frameImg.skin="",this.lookBtn.visible=!1},s.prototype.setData=function(t){this._tpye=t[0],this._mingci=t[1],0==this._mingci?(this.rankImg.skin="common/zs_tongyong_8.png",this.rankMsz.value=""):1==this._mingci?(this.rankImg.skin="common/zs_tongyong_9.png",this.rankMsz.value=""):(this.rankImg.skin="common/dt_tongyong_15.png",this.rankMsz.value=""+this._mingci),this.vipShowItem.vipBox.visible=!1;var e=o.rankingList.PlayerRankingModel.instance.getRanksByTypeAndMingCi2(this._tpye,this._mingci);if(!e)return this.vipShowItem.vipBox.visible=this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!1,void(this.noTxt.visible=!0);this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!0,this.StatementHTML.visible=this.noTxt.visible=!1,this.playerName.text=e[1];var i=e[4],n=o.config.BlendCfg.instance.getCfgById(36004)[2][i];this.headIcon.frameImg.skin="assets/icon/ui/faction/"+n+".png",this.headIcon.frameImg.width=100,this.headIcon.frameImg.height=100;var s=a.bigNumToString(e[3]);this.valueTxt.text="仙盟战力:"+s},n=s,t.FactionRankListItem=n}(modules=modules||{}),function(n){var t,e,i,s;function o(){var t=e.call(this)||this;return t._typeNum=0,t._sinkStr=["common/icon_common_first.png","common/icon_common_second.png","common/icon_common_third.png"],t}t=n.ranking_list_new||(n.ranking_list_new={}),i=n.common.AvatarClip,e=ui.RankingListPlayerInfoItemUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._centerAvatar=i.normalCreate(),this.allBox.addChildAt(this._centerAvatar,0),this._centerAvatar.pos(95,305),this._centerAvatar.visible=!1},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc),this.onAutoGlobalEvt("GET_CROSS_ACTOR_FAME_VALUE_REPLY",this,this.updateRq),this.onAutoGlobalEvt("GET_CROSSG_ACTOR_FAME_VALUE_REPLY",this,this.updateRq),this.onAutoClick(this.lookBtn,this,this.lookHanlder),this.onAutoClick(this.goodBtn,this,this.goodBtnHanlder)},o.prototype.setUI=function(t){this.rankImg.skin=this._sinkStr[t],0===t?(this.rankImg.scale(.8,.8,!0),this.rankImg.pos(11,78,!0),this._centerAvatar.scale(1.1,1.1)):(2===t&&this._centerAvatar.scale(.9,.9),this.rankImg.scale(.6,.6,!0),this.rankImg.pos(24,78,!0))},o.prototype.goodBtnHanlder=function(){var t=n.rankingList.PlayerRankingModel.instance.zanNum[this._typeNum];n.rankingList.PlayerRankingModel.instance.zanMaxNum[this._typeNum]<=t?CommonUtil.noticeError(0,"点赞次数不足，请明日再来",!0):this.PraiseSelect()},o.prototype.PraiseSelect=function(){},o.prototype.lookHanlder=function(){},o.prototype.updateName=function(){},o.prototype.updateOcc=function(){},o.prototype.destroy=function(){this._centerAvatar=this.destroyElement(this._centerAvatar),e.prototype.destroy.call(this)},o.prototype.setFirstplayervalue=function(t){var e=this,i=n.rankingList.PlayerRankingModel.instance.getStr(t);this.img2.y=1e8<=t?1:2,this.firstplayervalue.value="0"===i[0]?null:i[0],this.img1.skin=i[1],this.floetValue.value="0"===i[2]?null:i[2],this.img2.skin=i[3],this.numBox.scale(1,1,!0),this.numBox.pos(-65,267),this.numBox.visible=!1,CommonUtil.adaptationImgAndText([[this.firstplayervalue,4,17],[this.img1,2,0],[this.floetValue,4,17],[this.img2,2,0]],this.numBox.width,0,"center",[3,0,0]),Laya.timer.callLater(this,function(){e.numBox.scale(.55,.55,!0),e.numBox.pos(-65,267),e.numBox.visible=!0})},o.prototype.updateRq=function(t){if(this._objId&&t)for(var e=0;e<t.length;e++){var i=t[e];if(i&&i[0]===this._objId){this.centerFightTxt.text="人气值:"+CommonUtil.bigNumToString(i[1]);break}}},s=o,t.RankListPlayerInfoBaseItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.ranking_list_new||(t.ranking_list_new={}),n=t.rename.RenameModel,i=e.RankListPlayerInfoBaseItem,__extends(o,i),o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._dates=t[0],this._dateShow=t[1],this._typeNum=t[2],this._mingci=t[3]-1,this.setUI(this._mingci),this.updateUI()},o.prototype.PraiseSelect=function(){t.rankingList.PlayerRankingCtrl.instance.PraiseSelect(this._typeNum,this._objId,65536)},o.prototype.lookHanlder=function(){this._dates&&(1===this._typeNum?ChatCtrl.instance.getChatDetailedInfo([PlayerModel.instance.actorId,this._objId,this._dates[8]]):2===this._typeNum&&t.rankingList.PlayerRankingCtrl.instance.GetCrossGPlayerDetailedInfo(this._objId),WindowManager.instance.open(154,[this._dateShow[1],this._dateShow[8],this._dateShow[9]]))},o.prototype.updateUI=function(){this._dates?(this.hisTeammatesBox.visible=!1,this.allBox.visible=!0,this.numBox.visible=this.box1.visible=this.box2.visible=this.box3.visible=this.img5.visible=this.box4.visible=!1,this._objId=this._dates[0],this._occ=this._dateShow[2],this.centerNameTxt.text="盟主:"+this._dateShow[0],this.text1.text=""+CommonUtil.bigNumToString(this._dates[3]),this.vipShowItem.setSVIPandVIP(this._dateShow[8],this._dateShow[1]),CommonUtil.adaptationImgAndText([[this.vipShowItem,2,.7],[this.centerNameTxt,1,0]],this.playerInfoBox.width,0,"center"),CommonUtil.adaptationImgAndText([[this.img3,2,.8],[this.text1,1,0]],this.box1.width,0,"center"),this.centerFightTxt.text="人气值:"+CommonUtil.bigNumToString(this._dates[6]),this.setFirstplayervalue(this._dates[7]),this.playerInfoBox.visible=this.box1.visible=!0):(this.hisTeammatesBox.visible=!0,this.allBox.visible=!1)},o.prototype.updateName=function(){if(this._dates){var t=n.instance.updateNameReply;t&&t&&t[0]===this._objId&&(this.centerNameTxt.text=t[1])}},s=o,e.FactionRankPlayerInfoItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._typeNum=0,t._sinkStr=["common/icon_common_first.png","common/icon_common_second.png","common/icon_common_third.png"],t}e=t.ranking_list_new||(t.ranking_list_new={}),n=t.common.AvatarClip,i=ui.RankingListPlayerInfoItem1UI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._centerAvatar=n.normalCreate(),this.allBox.addChildAt(this._centerAvatar,0),this._centerAvatar.pos(95,305)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this)},o.prototype.setUI=function(t){0===t?this._centerAvatar.scale(1.1,1.1):2===t&&this._centerAvatar.scale(.9,.9)},o.prototype.destroy=function(){this._centerAvatar=this.destroyElement(this._centerAvatar),this.observationItem=this.destroyElement(this.observationItem),i.prototype.destroy.call(this)},s=o,e.RankListPlayerInfoBaseItem1=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.ranking_list_new||(t.ranking_list_new={}),n=t.rename.RenameModel,i=e.RankListPlayerInfoBaseItem1,__extends(o,i),o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._dates=t[0],this._dateShow=t[1],this._typeNum=t[2],this._mingci=t[3]-1,this.setUI(this._mingci),this.updateUI()},o.prototype.updateUI=function(){this._dates?(this.updateshowplane(),this.allBox.visible=!0):this.allBox.visible=!1},o.prototype.updateshowplane=function(){if(this._dates){var t=this._dateShow;if(t){var e=t[6],i=t[3],n=t[4],s=t[5],o=t[2];this._centerAvatar.reset(e||(1===o?1001:1002),i||5002,s,n),this._centerAvatar.visible=!0,this.observationItem.setRot(),this.observationItem.data=[[this._centerAvatar,0]]}else this._centerAvatar.visible=!1}},o.prototype.updateOcc=function(){if(this._dates){var t=n.instance.updateOccReply;if(t&&t&&t[0]===this._objId){var e=this._dateShow[6],i=this._dateShow[3];i=i-i%10+t[1],this._centerAvatar.reset(i,e)}}},s=o,e.FactionRankPlayerInfoItem1=s}(modules=modules||{}),function(e){var t,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=e.ranking_list_new||(e.ranking_list_new={}),i=e.rankingList.PlayerRankingItem,__extends(s,i),s.prototype.lookHanlder=function(){var t=e.rankingList.PlayerRankingModel.instance.getRanksByTypeAndMingCi1(this._tpyeNum,this._tpye,this._mingci);t&&(1===this._tpyeNum?ChatCtrl.instance.getChatDetailedInfo([PlayerModel.instance.actorId,t[0],t[12]]):2===this._tpyeNum&&e.rankingList.PlayerRankingCtrl.instance.GetCrossGPlayerDetailedInfo(t[0]),WindowManager.instance.open(154,[t[3],t[6],t[13]]))},s.prototype.getDateRank=function(){return e.rankingList.PlayerRankingModel.instance.getRanksByTypeAndMingCi1(this._tpyeNum,this._tpye,this._mingci)},n=s,t.PlayerRankingItem1=n}(modules=modules||{}),function(a){var t,e,n,i;function s(){return null!==e&&e.apply(this,arguments)||this}t=a.ranking_list_new||(a.ranking_list_new={}),n=a.rename.RenameModel,e=t.RankListPlayerInfoBaseItem,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this)},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this._dates=t[0],this._typeNum=t[1],this._RankType=t[2],this._mingci=t[3]-1,this.setUI(this._mingci),this.updateUI()},s.prototype.PraiseSelect=function(){a.rankingList.PlayerRankingCtrl.instance.PraiseSelect(this._typeNum,this._objId,this._RankType)},s.prototype.lookHanlder=function(){this._dates&&(1===this._typeNum?ChatCtrl.instance.getChatDetailedInfo([PlayerModel.instance.actorId,this._objId,this._dates[12]]):2===this._typeNum&&a.rankingList.PlayerRankingCtrl.instance.GetCrossGPlayerDetailedInfo(this._objId),WindowManager.instance.open(154,[this._dates[3],this._dates[6],this._dates[13]]))},s.prototype.updateUI=function(){if(this._dates){this.hisTeammatesBox.visible=!1,this.allBox.visible=!0,this.numBox.visible=this.box1.visible=this.box2.visible=this.box3.visible=this.box5.visible=this.box4.visible=!1,this._objId=this._dates[0],this._occ=this._dates[1];var t=this._dates[2],e=this._dates[3],i=this._dates[6],n=this._dates[5],s=this._dates[11];if(this.centerNameTxt.text=t,this.vipShowItem.setSVIPandVIP(i,e,this._dates[13]),CommonUtil.adaptationImgAndText([[this.vipShowItem,2,.7],[this.centerNameTxt,1,0]],this.playerInfoBox.width,0,"center"),this.centerFightTxt.text="人气值:"+CommonUtil.bigNumToString(s),128===this._RankType||256===this._RankType||2===this._RankType)if(128===this._RankType)this.getlilianSourceByParam(n),this.box2.visible=!0;else if(256===this._RankType)this.getxianweisourceByParam(n),this.box4.visible=!0;else{this.setFirstplayervalue(this._dates[10]);var o=a.rankingList.PlayerRankingItem.getDateByType(this._RankType,n);this.text2.text=o+"级",this.box3.visible=!0}else this.setFirstplayervalue(n)}else this.hisTeammatesBox.visible=!0,this.allBox.visible=!1},s.prototype.getlilianSourceByParam=function(t){var e=Math.floor(t/100);0!=e&&(this.nameimage.skin="assets/icon/ui/lilian/"+e+".png");var i=Math.floor(t%100);0!=i&&(10==i&&(i=0),this.tupleFontClip.value=i.toString());var n=a.config.LilianRiseCfg.instance.getLilianRiseCfgByRiseLevel(t);this.setFirstplayervalue(n[3])},s.prototype.getxianweisourceByParam=function(t){if(0==t)this.setFirstplayervalue(0);else{var e=a.config.XianweiRiseCfg.instance.getXianweiRiseByLevel(t),i=e?e[5]:0,n=e?e[10]:"";this.img6.skin=e?"assets/icon/ui/position_name/"+n+".png":"",this.setFirstplayervalue(i),this.img6.centerX=0}},s.prototype.updateName=function(){if(this._dates){var t=n.instance.updateNameReply;t&&t&&t[0]===this._dates[0]&&(this.centerNameTxt.text=t[1])}},s.prototype.updateOcc=function(){if(this._dates){var t=n.instance.updateOccReply;if(t&&t&&t[0]===this._dates[0]&&this._dateShow){var e=this._dateShow[1],i=this._dateShow[2];i=i-i%10+t[1],this._centerAvatar.reset(i,e)}}},s.prototype.getFun=function(){},i=s,t.RankListPlayerInfoItem=i}(modules=modules||{}),function(a){var t,e,n,i;function s(){return null!==e&&e.apply(this,arguments)||this}t=a.ranking_list_new||(a.ranking_list_new={}),n=a.rename.RenameModel,e=t.RankListPlayerInfoBaseItem1,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GET_ACTOR_RANK_SHOW_KUAFU_REPLY",this,this.updateshowplane)},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this._dates=t[0],this._typeNum=t[1],this._RankType=t[2],this._mingci=t[3]-1,this.setUI(this._mingci),this.updateUI()},s.prototype.updateUI=function(){this._dates?(this._objId=this._dates[0],this.allBox.visible=!0):this.allBox.visible=!1},s.prototype.updateshowplane=function(){if(this._dates){var t=a.rankingList.PlayerRankingModel.instance.rankShowTable[this._objId];if(this._dateShow=t){var e=t[1],i=t[2],n=t[5],s=t[3],o=t[7];this._centerAvatar.reset(e||(1===o?1001:1002),i||5002,s,n),this._centerAvatar.visible=!0,this.observationItem.setRot(),this.observationItem.data=[[this._centerAvatar,0]]}else this._centerAvatar.visible=!1}},s.prototype.updateOcc=function(){if(this._dates){var t=n.instance.updateOccReply;if(t&&t&&t[0]===this._dates[0]&&this._dateShow){var e=this._dateShow[1],i=this._dateShow[2];i=i-i%10+t[1],this._centerAvatar.reset(i,e)}}},i=s,t.RankListPlayerInfoItem1=i}(modules=modules||{}),function(t){var e,s,i,n;function o(){this.init()}e=t.seal_deity||(t.seal_deity={}),s=t.funcOpen.FuncOpenModel,i=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.init=function(){this._stateTable={}},Object.defineProperty(o.prototype,"info",{get:function(){return this._info},enumerable:!0,configurable:!0}),o.prototype.updateGetSealDeity=function(t){if(this._info=t){for(var e=t[0],i=0,n=e.length;i<n;i++)this._stateTable[e[i][0]]=e[i][1];s.instance.setActionOpen(979,t[1])}else s.instance.setActionOpen(979,2);GlobalData.dispatcher.event("GET_SEAL_DEITY_INFO"),this.checkRP()},o.prototype.getStateByRechargeId=function(t){return this._stateTable[t]||0},o.prototype.checkRP=function(){this._info?(i.instance.setRPProperty("sealDeityRp1",1===this.getStateByRechargeId(131)),i.instance.setRPProperty("sealDeityRp2",1===this.getStateByRechargeId(132)),i.instance.setRPProperty("sealDeityRp3",1===this.getStateByRechargeId(133))):(i.instance.setRPProperty("sealDeityRp1",!1),i.instance.setRPProperty("sealDeityRp2",!1),i.instance.setRPProperty("sealDeityRp3",!1))},n=o,e.SealDeityModel=n}(modules=modules||{}),function(i){var t,e,n;function s(){this.payGrade=160}t=i.send_q_coins||(i.send_q_coins={}),e=i.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getQCurrencyRemainReply=function(t){t&&(this.remainCount=t[0],this.setRP(),GlobalData.dispatcher.event("SEND_Q_COINS_UPDATE"))},s.prototype.getQCurrencyInfoReply=function(t){if(t){this.drawState=t[0],this.startTime=t[1],this.endTime=t[2],this.openState=t[3];var e=i.funcOpen.FuncOpenModel.instance.getFuncStateById(989);2===e?1===PlatParams.control.funcOpen[989]&&1===this.openState&&2!==t[0]&&i.funcOpen.FuncOpenModel.instance.setActionOpen(989,1):1===e&&(2!==t[0]&&this.openState||i.funcOpen.FuncOpenModel.instance.setActionOpen(989,2)),this.setRP(),GlobalData.dispatcher.event("SEND_Q_COINS_UPDATE")}},s.prototype.setRP=function(){e.instance.setRPProperty("sendQCoinsRP",1===this.drawState)},n=s,t.SendQCoinsModel=n}(modules=modules||{}),function(t){var e,i,n;function s(){this.payGrade=91,this.endTm=0}e=t.sky_book_buy||(t.sky_book_buy={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getZhanhunTianshuBuyReply=function(t){t&&(this.endTm=t[1],this.buyState=t[0],GlobalData.dispatcher.event("FIGHT_BUY_INFO_ALERT"),this.setRP())},s.prototype.setRP=function(){i.instance.setRPProperty("skyBookBuyRP",1===this.buyState)},n=s,e.SkyBookBuyModel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.sky_book_pay||(t.sky_book_pay={}),n=t.common_alert_ex.AccPayBaseItem,i=n,__extends(o,i),Object.defineProperty(o.prototype,"accPayMoney",{get:function(){return e.SkyBookPayModel.instance.data[2]},enumerable:!0,configurable:!0}),o.prototype.getState=function(){return e.SkyBookPayModel.instance.getState(this.data)},Object.defineProperty(o.prototype,"restTm",{get:function(){return e.SkyBookPayModel.instance.restTm},enumerable:!0,configurable:!0}),o.prototype.drawAccPayAward=function(){e.SkyBookPayCtrl.instance.drawTianshuAccPayAward(this.data[0])},Object.defineProperty(o.prototype,"cfgId",{get:function(){return this.data[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rewards",{get:function(){return this.data[2]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"accPay",{get:function(){return this.data[1]},enumerable:!0,configurable:!0}),s=o,e.SkyBookPayItem=s}(modules=modules||{}),function(t){var e,s,o,i;function a(){}e=t.sky_book_pay||(t.sky_book_pay={}),s=t.redPoint.RedPointCtrl,o=t.config.TianshuAccPayCfg,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"restTm",{get:function(){return this.data?this.data[1]:0},enumerable:!0,configurable:!0}),a.prototype.getTianshuAccPayReply=function(t){t&&(this.data=t,this.setRP(),GlobalData.dispatcher.event("FIGHT_BUY_INFO_ALERT"))},a.prototype.getState=function(t){return this.data?this.data[2]<t[1]?2:-1===this.data[0].indexOf(t[0])?1:3:2},a.prototype.sort=function(t,e){var i=a.instance.getState(t),n=a.instance.getState(e);return i===n?t[1]-e[1]:i-n},a.prototype.setRP=function(){if(this.data){for(var t=o.instance.cfgs,e=0,i=0,n=t.length;i<n;i++)1===this.getState(t[i])&&e++;s.instance.setRPProperty("skyBookPayRP",0<e)}else s.instance.setRPProperty("skyBookPayRP",!1)},i=a,e.SkyBookPayModel=i}(modules=modules||{}),function(t){var r,e,i,l,h,n;function s(){return null!==e&&e.apply(this,arguments)||this}r=t.soul_war||(t.soul_war={}),i=Laya.Event,l=t.config.SkillPureCfg,h=t.config.SoulWarCfg,e=ui.SoulNinghunSkillIconUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this)},s.prototype.close=function(){this._eff&&this._eff.stop(),e.prototype.close.call(this)},s.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.on(i.CLICK,this,this.clickHandler)},s.prototype.offEvt=function(){this.off(i.CLICK,this,this.clickHandler),e.prototype.offEvt.call(this)},s.prototype.clickHandler=function(){WindowManager.instance.openDialog(1374,[this._skillPureId])},s.prototype.setData=function(t){this._skillPureId=t[0];var e=l.instance.getCfgById(this._skillPureId);this.iconImg.skin="assets/icon/skill/"+e[6]+".png";var i=r.SoulWarModel.instance.getNingHunSkillId(this._skillPureId),n=i?i%1e4:0;this.levBox.visible=0!=n,this.levTxt.text=n.toString();var s=r.SoulWarModel.instance.getNingHunLvl();this.iconImg.gray=0==n;var o=0==n?1e4*this._skillPureId+1:i+1,a=h.instance.getNingHunNeedLvlBySkillId(o);a&&a<=s?(this._eff||(this._eff=CommonUtil.creatEff(this,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0),this._eff.visible=!0),this._eff.play(),this.stateImg.visible=this._eff.visible=this.dotImg.visible=!0,this.stateImg.skin=0===n?"common/txt_xq_kjh.png":"common/txt_xq_ksj.png"):(this._eff&&(this._eff.visible=!1,this._eff.stop()),this.stateImg.visible=this.dotImg.visible=!1)},n=s,r.SoulNinghunSkillItem=n}(modules=modules||{}),function(t){var r,e,i,l,h,n;function s(){return null!==e&&e.apply(this,arguments)||this}r=t.soul_war||(t.soul_war={}),i=Laya.Event,l=t.config.SkillPureCfg,h=t.config.SoulWarCfg,e=ui.SoulZhanhunSkillIconUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this)},s.prototype.close=function(){this._eff&&this._eff.stop(),e.prototype.close.call(this)},s.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.on(i.CLICK,this,this.clickHandler)},s.prototype.offEvt=function(){this.off(i.CLICK,this,this.clickHandler),e.prototype.offEvt.call(this)},s.prototype.clickHandler=function(){0==this._showType?WindowManager.instance.openDialog(1382,[this._zhanhunId,this._skillPureId]):1==this._showType&&WindowManager.instance.openDialog(1375,[this._zhanhunId,this._skillPureId])},s.prototype.setData=function(t){this._zhanhunId=t[0],this._skillPureId=t[1],this._showType=t[2],this.levBox.visible=!1;var e=l.instance.getCfgById(this._skillPureId);if(e&&(this.iconImg.skin="assets/icon/skill/"+e[6]+".png"),this._eff&&(this._eff.visible=!1,this._eff.stop()),1==this._showType){this.levBox.visible=!0;var i=r.SoulWarModel.instance.getZhanhunSkillIdById(this._zhanhunId),n=i?i%1e4:0;this.levTxt.text=n.toString();var s=0==n?1e4*this._skillPureId+1:i+1,o=r.SoulWarModel.instance.getZhanhunOrderById(this._zhanhunId),a=h.instance.getHuanhuaNeedOrderBySkillId(s);this.state_1.visible=!0,this.state_2.visible=!1,this.levBox.visible=0!=n,a&&a<=o?(this._eff||(this._eff=CommonUtil.creatEff(this,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0),this._eff.visible=!0),this._eff.play(),this.stateImg.visible=this._eff.visible=this.dotImg.visible=!0,this.stateImg.skin=0===n?"common/txt_xq_kjh.png":"common/txt_xq_ksj.png"):(this._eff&&(this._eff.visible=!1,this._eff.stop()),this.stateImg.visible=this.dotImg.visible=!1),this.iconImg.gray=0==n}else this.stateImg.visible=this.dotImg.visible=!1,this.state_1.visible=!1,this.state_2.visible=!0},n=s,r.SoulZhanhunSkillItem=n}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.space_travel_continuous_pay||(e.space_travel_continuous_pay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.SpaceTravelContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.SpaceTravelType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.SpaceTravelContinuousPayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.space_travel_continuous_pay||(a.space_travel_continuous_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("spaceTravelContinuousPayRP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.SpaceTravelType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpaceTravelType)&&t){var e=t[19];if(e){this._restTm=t[2],this._moneyAcc=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(933),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpaceTravelType);r.instance.setRPProperty("spaceTravelContinuousPayRP",t&&e&&i)},e=i,t.SpaceTravelContinuousPayModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.space_travel_cumulate_pay||(e.space_travel_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.SpaceTravelCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.SpaceTravelCumulatePayModel.instance.accumulate,e=this._datas[1];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.SpaceTravelType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=null,this._value=null,n.prototype.destroy.call(this,t)},a=r,i.SpaceTravelCumulatePayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.space_travel_cumulate_pay||(a.space_travel_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("spaceTravelDayContinuousPayRP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.SpaceTravelType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpaceTravelType)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(935),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpaceTravelType);r.instance.setRPProperty("spaceTravelDayContinuousPayRP",t&&e&&i)},e=i,t.SpaceTravelCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_festival||(t.space_travel_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpaceTravelType},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelFestConLoginItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_festival||(t.space_travel_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpaceTravelType},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelFestDailyRewardItem=n}(modules=modules||{}),function(i){var n,s,o,a,t,e;function r(){var t=null!==s&&s.apply(this,arguments)||this;return t._type=i.festival.FestivalModel.instance.SpaceTravelType,t}n=i.space_travel_seven_days_consume||(i.space_travel_seven_days_consume={}),o=i.config.festivalCostTotalCfg,a=i.bag.BagUtil,t=i.soaring_singlePay.PayAndAwardsItem,s=t,__extends(r,s),r.prototype.setData=function(t){if(s.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText1.visible=!0,this.scheduleText.visible=!1,this.scheduleText1.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:i.notice.SystemNoticeManager.instance.addNotice("消耗"+o.instance.getStrByType(this._type)+"数量不足",!0);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),a.canAddItemsByBagIdCount(t)&&n.SpaceTravelSevenDaysConsumeCtrl.instance.DrawFestCostTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计消费<span style='color:#b15315'>"+t+o.instance.getStrByType(this._type)+"</span>可领取",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.setBtnSure=function(){var t;i.festival.FestivalModel.instance.getHuoDongType(this._type)?0==(t=this._value[1])?(this.showCanReceive(),this.sureBtn.label="领取",this._btnClip.stop(),this._btnClip.visible=!1):1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.showScheduleText=function(){var t=n.SpaceTravelSevenDaysConsumeModel.instance.gold,e=this._datas[2];this.scheduleText1.text="("+t+"/"+e+")",this.scheduleText1.color=e<=t?"#16ba17":"#FF3e3e"},e=r,n.SpaceTravelSevenDaysConsumeItem=e}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._gold=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.space_travel_seven_days_consume||(r.space_travel_seven_days_consume={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gold",{get:function(){return this._gold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.SpaceTravelType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.SpaceTravelType);if(l.instance.setRPProperty("spaceTravel4RP",!1),e&&t){var i=t[15];if(i){this._restTm=t[2],this._gold=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(937),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.SpaceTravelType);l.instance.setRPProperty("spaceTravel4RP",t&&e&&i)},e=i,t.SpaceTravelSevenDaysConsumeModel=e}(modules=modules||{}),function(n){var s,i,o,a,r,t,e;function l(){return i.call(this)||this}s=n.space_travel_single_pay||(n.space_travel_single_pay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,t=n.soaring_singlePay.PayAndAwardsItem,i=t,__extends(l,i),l.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},l.prototype.sureBtnHandler=function(){var t;if(t=this._value[1],Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111);else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.SpaceTravelSinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},l.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},l.prototype.showScheduleText=function(){var t=this._value[1],e=Math.round(t%1e3),i=this._datas[0];0==s.SpaceTravelSinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},l.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(n.festival.FestivalModel.instance.SpaceTravelType)){var t=this._value[1],e=this._datas[0],i=s.SpaceTravelSinglePayModel.instance.getState(t,e);0===i?this.showGotoRecharge():1===i?this.showCanReceive():this.showReceived()}else this.showOver()},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=null,this._value=null,i.prototype.destroy.call(this,t)},e=l,s.SpaceTravelSinglePayItem=e}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.space_travel_single_pay||(a.space_travel_single_pay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("spaceTravelsinglePayRP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.SpaceTravelType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpaceTravelType)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(934),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpaceTravelType);l.instance.setRPProperty("spaceTravelsinglePayRP",t&&e&&i)},e=i,t.SpaceTravelSinglePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_store||(t.space_travel_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.SpaceTravelStoreModel.instance.rewardListById,this.types=t.festival.FestivalModel.instance.SpaceTravelType,i.prototype.showUI.call(this)},n=s,e.SpaceTravelStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.space_travel_store||(a.space_travel_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.SpaceTravelType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpaceTravelType)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("冬至 商城 数据：",this.rewardList)}}},e=i,t.SpaceTravelStoreModel=e}(modules=modules||{}),function(a){var t,i,e,n,s;function r(){this.oneNum=0,this.twoNum=0,this.threeNum=0,this.id=0,this._xunBaoType=0,this._restTm=0,this._score=0,this._state=1,this.dontShowTreasure=!1,this.festivalType=a.festival.FestivalModel.instance.SpaceTravelType,this._myXunbaoNote=new Array,this._myNodeList=new Array,this._myNodeListByObjId=new Array,this._rewardList=new Array,this._xunBaoType=100+this.festivalType,this.getBlendCfgShuJu()}t=a.space_travel_treasure||(a.space_travel_treasure={}),i=a.redPoint.RedPointCtrl,e=a.config.TreasureCfg,n=a.funcOpen.FuncOpenModel,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xunBaoType",{get:function(){return this._xunBaoType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xianyu",{get:function(){return a.bag.BagModel.instance.getItemCountById(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),r.prototype.callBakFunction=function(t){r.instance._restTm<GlobalData.serverTime?r.instance.dontShowTreasure?t():WindowManager.instance.open(1398,t):t()},r.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[r.instance.festivalType];if(a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType)&&t){var e=t[16];if(e){var i=e[0];if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=r.instance._myXunbaoNote.length;o=0<o?o:0,r.instance._myXunbaoNote[o]=s}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MY")}}},r.prototype.getSelfBroadcast=function(){var t=this._myXunbaoNote;return t&&100<t.length&&t.splice(0,t.length-100),t=t||[]},r.prototype.setRewardList=function(t){t&&(this._rewardList=t),this.setRP(),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},r.prototype.getInfoMyNodeList=function(t){if(t){this._myNodeList.length=0,this._myNodeListByObjId.length=0,this._myNodeList=new Array,this._myNodeListByObjId=new Array;for(var e=0;e<t.length;e++){var i=t[e],n=i[0];if(n){var s=n[0],o=n[2];this._myNodeList[o]=i,this._myNodeListByObjId[s]=i}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MYLIST")}},r.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(928),e=a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType);i.instance.setRPProperty("spaceTravelXunBaoRP",e&&t&&this.getgRadeRP())},r.prototype.getgRadeRP=function(){if(0<this.xianyu)return!0;if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&1==e[1])return!0}return!1},r.prototype.getRewardStart=function(t){if(this.rewardList){var e=this._rewardList[t];return e?e[1]:0}},r.prototype.getgRade=function(){for(var t=null,e=null,i=0;i<this.rewardList.length;i++){var n=this.rewardList[i];if(n){var s=n[1];if(1==s)return[i,s];2==s?t=[i,s]:e=e||[i,s]}}return e||t||[0,0]},r.prototype.getBlendCfgShuJu=function(){this.oneNum=e.instance.getItemConditionByGrad(this.xunBaoType,0)[1],this.twoNum=e.instance.getItemConditionByGrad(this.xunBaoType,1)[1],this.threeNum=e.instance.getItemConditionByGrad(this.xunBaoType,2)[1];var t=e.instance.getItemConditionByGrad(this.xunBaoType,0);this.id=t[0]},s=r,t.SpaceTravelTreasureModel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_treasure||(t.space_travel_treasure={}),i=t.festival.TreasureRankAwardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.SpaceTravelTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"myNodeList",{get:function(){return e.SpaceTravelTreasureModel.instance._myNodeList},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelTreasureRankAwardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.space_travel_treasure||(t.space_travel_treasure={}),i=t.festival.TreasureRankBaseItem,__extends(s,i),s.prototype.getRewardStart=function(t){return e.SpaceTravelTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.SpaceTravelTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.SpaceTravelTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.SpaceTravelTreasureRankItem=n}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.spring_scenery_continuous_pay||(e.spring_scenery_continuous_pay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.SpringSceneryContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.SpringSceneryType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.SpringSceneryContinuousPayItem=a}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.spring_scenery_continuous_pay||(r.spring_scenery_continuous_pay={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.SpringSceneryType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.SpringSceneryType);if(l.instance.setRPProperty("springScenery1RP",!1),e&&t){var i=t[19];if(i){this._restTm=t[2],this._moneyAcc=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(1035),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.SpringSceneryType);l.instance.setRPProperty("springScenery1RP",t&&e&&i)},e=i,t.SpringSceneryContinuousPayModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return null!==n&&n.apply(this,arguments)||this}i=e.spring_scenery_cumulate_pay||(e.spring_scenery_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.SpringSceneryCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.SpringSceneryCumulatePayModel.instance.accumulate,e=this._datas[1];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.SpringSceneryType)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.SpringSceneryCumulatePayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.spring_scenery_cumulate_pay||(a.spring_scenery_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("springScenery2RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.SpringSceneryType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpringSceneryType)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(1036),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpringSceneryType);r.instance.setRPProperty("springScenery2RP",t&&e&&i)},e=i,t.SpringSceneryCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryFestConLoginItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),i=t.festival.ConvertItem1,__extends(s,i),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"SPRING_SCENERY_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintArr",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryHintArr},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryFestConvertItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_festival||(t.spring_scenery_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryFestDailyRewardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_good_man||(t.spring_scenery_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="spring_scenery/icon_sypd_zsbz.png"},n=s,e.SpringSceneryGoodManItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_good_man||(t.spring_scenery_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="spring_scenery/icon_sypd_zsbz.png"},n=s,e.SpringSceneryGoodManItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_score_rank||(t.spring_scenery_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryScoreRankItem=n}(modules=modules||{}),function(i){var n,s,o,a,t,e;function r(){var t=null!==s&&s.apply(this,arguments)||this;return t._type=i.festival.FestivalModel.instance.SpringSceneryType,t}n=i.spring_scenery_seven_days_consume||(i.spring_scenery_seven_days_consume={}),o=i.config.festivalCostTotalCfg,a=i.bag.BagUtil,t=i.soaring_singlePay.PayAndAwardsItem,s=t,__extends(r,s),r.prototype.setData=function(t){if(s.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText1.visible=!0,this.scheduleText.visible=!1,this.scheduleText1.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:i.notice.SystemNoticeManager.instance.addNotice("消耗"+o.instance.getStrByType(this._type)+"数量不足",!0);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),a.canAddItemsByBagIdCount(t)&&n.SpringScenerySevenDaysConsumeCtrl.instance.DrawFestCostTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计消费<span style='color:#b15315'>"+t+o.instance.getStrByType(this._type)+"</span>可领取",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.setBtnSure=function(){var t;i.festival.FestivalModel.instance.getHuoDongType(this._type)?0==(t=this._value[1])?(this.showCanReceive(),this.sureBtn.label="领取",this._btnClip.stop(),this._btnClip.visible=!1):1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.showScheduleText=function(){var t=n.SpringScenerySevenDaysConsumeModel.instance.gold,e=this._datas[2];this.scheduleText1.text="("+t+"/"+e+")",this.scheduleText1.color=e<=t?"#16ba17":"#FF3e3e"},e=r,n.SpringScenerySevenDaysConsumeItem=e}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._gold=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.spring_scenery_seven_days_consume||(r.spring_scenery_seven_days_consume={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gold",{get:function(){return this._gold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.SpringSceneryType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.SpringSceneryType);if(l.instance.setRPProperty("springScenery4RP",!1),e&&t){var i=t[15];if(i){this._restTm=t[2],this._gold=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(1038),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.SpringSceneryType);l.instance.setRPProperty("springScenery4RP",t&&e&&i)},e=i,t.SpringScenerySevenDaysConsumeModel=e}(modules=modules||{}),function(n){var s,i,o,a,r,t,e;function l(){return i.call(this)||this}s=n.spring_scenery_single_pay||(n.spring_scenery_single_pay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,t=n.soaring_singlePay.PayAndAwardsItem,i=t,__extends(l,i),l.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},l.prototype.sureBtnHandler=function(){var t=this._value[1];if(Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111),this.close();else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.SpringScenerySinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},l.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},l.prototype.showScheduleText=function(){var t=this._value[1],e=Math.round(t%1e3),i=this._datas[0];0==s.SpringScenerySinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},l.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(n.festival.FestivalModel.instance.SpringSceneryType)){var t=this._value[1],e=this._datas[0],i=s.SpringScenerySinglePayModel.instance.getState(t,e);0===i?this.showGotoRecharge():1===i?this.showCanReceive():this.showReceived()}else this.showOver()},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,i.prototype.destroy.call(this,t)},e=l,s.SpringScenerySinglePayItem=e}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.spring_scenery_single_pay||(a.spring_scenery_single_pay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("springScenery6RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.SpringSceneryType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpringSceneryType)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(1037),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpringSceneryType);l.instance.setRPProperty("springScenery6RP",t&&e&&i)},e=i,t.SpringScenerySinglePayModel=e}(modules=modules||{}),function(r){var t,n,s,e;function i(){return n.call(this)||this}t=r.spring_scenery_star||(r.spring_scenery_star={}),s=r.config.GoodRankSingleCfg,n=ui.SpringScenerySartItem1UI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this.shouHuPlayer=[this.item2,this.item3],this.shouHuPlayerText=[this.zanWuText1,this.zanWuText2],this.shouHuPlayerHTML=[this.StatementHTML1,this.StatementHTML2],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),CommonUtil.setHTMLPro(this.StatementHTML1,"#1f304d","SimHei",22,"center"),CommonUtil.setHTMLPro(this.StatementHTML2,"#1f304d","SimHei",22,"center")},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI)},i.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showUI()},i.prototype.setData=function(t){n.prototype.setData.call(this,t),this.mingCiImg.visible=this.mingCIclip.visible=1<=t&&t<=3,this.rankText.visible=4<=t,this.rankText.text="第 "+t+" 名",this.mingCIclip.value=""+t,this._mingCi=t,this._dates=s.instance.getCfgsByGrade(r.festival.FestivalModel.instance.SpringSceneryType,r.festival.FestivalModel.instance.getCrossOpenServerDay(r.festival.FestivalModel.instance.SpringSceneryType),this._mingCi);var e=this._dates[3],i=this._dates[6];this.StatementHTML.innerHTML="收到"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.SpringSceneryType)+"达<span style='color:#168a17'>"+e+"</span>可上榜",this.StatementHTML1.innerHTML="赠送<span style='color:#168a17'>"+(i?i[0]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.SpringSceneryType)+"可上榜",this.StatementHTML2.innerHTML="赠送<span style='color:#168a17'>"+(i?i[1]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.SpringSceneryType)+"可上榜"},i.prototype.showUI=function(){if(this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!1,this._theGoodRanker=r.single_dog_sart.SingleDogSartModel.instance.getTableByRank(r.festival.FestivalModel.instance.SpringSceneryType,this._mingCi),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.item1.data=t,this.item1.visible=!0,this.item1.giveBtn.visible=!0;for(var i=0;i<2;i++){var n=e[i],s=this.shouHuPlayer[i],o=this.shouHuPlayerText[i],a=this.shouHuPlayerHTML[i];n?(s.visible=!0,a.visible=o.visible=!1,s.data=n):(a.visible=o.visible=!0,s.visible=!1)}}else this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML2.visible=this.StatementHTML1.visible=this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!0},e=i,t.SpringSceneryStarItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_star||(t.spring_scenery_star={}),i=t.single_dog_sart.SingleDogSartItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryStarItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_star||(t.spring_scenery_star={}),i=t.single_dog_sart.SingleDogSartItem2,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.SpringSceneryType},enumerable:!0,configurable:!0}),n=s,e.SpringSceneryStarItem2=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_store||(t.spring_scenery_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.SpringSceneryStoreModel.instance.rewardListById,this.types=t.festival.FestivalModel.instance.SpringSceneryType,i.prototype.showUI.call(this)},n=s,e.SpringSceneryStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.spring_scenery_store||(a.spring_scenery_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.SpringSceneryType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpringSceneryType)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("元宵 商城 数据：",this.rewardList)}}},e=i,t.SpringSceneryStoreModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.spring_scenery_yu_lan||(t.spring_scenery_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanItem,__extends(s,i),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.wardText.text="助攻奖励"},n=s,e.SpringSceneryYuLanItem=n}(modules=modules||{});var modules,CustomClip=modules.common.CustomClip,SkillIconUI=ui.SkillIconUI,SkillPureCfg=modules.config.SkillPureCfg;!function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.skillItem.dotImg.visible=t.skillItem.levBox.visible=!1,t}e=t.strongest_marry||(t.strongest_marry={}),i=ui.StrongestMarryChoiceSkillItemUI,__extends(s,i),s.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this._skillId=t,this._skillId){var e=SkillPureCfg.instance.getCfgById(CommonUtil.getSkillPureIdById(t));if(!e)return;this.skillItem.iconImg.skin="assets/icon/skill/"+e[6]+".png",this.skillItem.iconImg.visible=!0,this.nameText.text=e[1]}},s.prototype.setSelected=function(t){this.isChoiceImg.visible=t},n=s,e.StrongestMarryChoiceSkillItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.strongest_marry||(t.strongest_marry={}),n=t.common.ProgressBarCtrl,i=ui.StrongestMarryCopyPlayerInfoItemUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,101),this._proCtrl.maxValue=1e4},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayers),this.onAutoGlobalEvt("UPDATE_COUPLE_BEST_MAP_PACE",this,this.showUI),this.onAutoGlobalEvt("PLAYER_TARGET_CHANGE",this,this.setSelectedHalr)},o.prototype.setSelectedHalr=function(){this._dates?this.isChoiceImg.visible=this._objId===PlayerModel.instance.selectTargetId:this.isChoiceImg.visible=!1},o.prototype.offEvt=function(){i.prototype.offEvt.call(this)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.isChoiceImg.visible=!1,this._proCtrl.value=this._proCtrl.maxValue,this.updatePlayers(),this.showUI(),this.setSelectedHalr()},o.prototype.updatePlayers=function(){this._dates?(this.visible=!0,this._objId=this._dates[0],this.headIcon.setInfo(this._dates[4],this._dates[2],this._dates[3]),this.tipsText.text="战"+CommonUtil.bigNumToString(this._dates[8],!0)):this.visible=!1},o.prototype.showUI=function(){if(this._dates){this.gray=!1;var t=e.StrongestMarryModel.instance.hpPerTable[this._objId];null!=t&&0!=t?this._proCtrl.value=t*this._proCtrl.maxValue:(this._proCtrl.value=0)!=t&&(this.gray=!0)}else this.visible=!1},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._dates=t,Laya.timer.callLater(this,this.updatePlayers)},o.prototype.clickHandler=function(){if(this._objId)if(t.strongest_marry.StrongestMarryModel.instance.isStart)if(this._objId!=PlayerModel.instance.actorId&&this._objId!=t.marry.MarryModel.instance.halfRoleID){if(!e.StrongestMarryModel.instance.hpPerTable[this._objId])return void CommonUtil.noticeError(0,"玩家已死亡",!0);PlayerModel.instance.selectTarget(2,this._objId)}else CommonUtil.noticeError(0,"请选择敌方目标进行攻击",!0);else CommonUtil.noticeError(0,"战斗未开始",!0)},o.prototype.close=function(){i.prototype.close.call(this)},o.prototype.destroy=function(){this._proCtrl&&(this._proCtrl.destroy(),this._proCtrl=null),i.prototype.destroy.call(this)},s=o,e.StrongestMarryCopyPlayerInfoItem=s}(modules=modules||{}),function(t){var s,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}s=t.strongest_marry||(t.strongest_marry={}),o=ui.StrongestMarryGuessItemUI,__extends(i,o),i.prototype.setSelected=function(t){s.StrongestMarryModel.instance.isGuess||(this.isChoiceImg.selected=t)},i.prototype.setData=function(t){if(o.prototype.setData.call(this,t),t){var e=t[0],i=t[1],n=e[0];e&&(this.headIcon.setInfo(e[7],e[3],e[8]),this.headIcon.vipShowItem.setSVIPandVIP(e[6],e[5]),this.nameText.text=e[2]),i&&(this.headIcon1.setInfo(i[7],i[3],i[8]),this.headIcon1.vipShowItem.setSVIPandVIP(i[6],i[5]),this.nameText1.text=i[2]),s.StrongestMarryModel.instance.isGuess&&(this.isChoiceImg.selected=-1!=s.StrongestMarryModel.instance.guessMarryIds.indexOf(n))}},e=i,s.StrongestMarryGuessItem=e}(modules=modules||{}),function(a){var i,t,e,n;function o(){this.guessChoiceMaxNum=3,this.isGuess=!1,this.winTimes=-1,this.loseTimes=-1,this.copyState=0,this.teamer1=[],this.teamer2=[],this.hpPerTable={},this.skillStateAndIdTable={},this.allSkillId=[],this.winTimesOver=-1,this.loseTimesOver=-1,this.isStart=!1,this.ranksTable={},this.guessMarryIds=[],this.guessMarryList=[];var t=a.config.BlendCfg.instance.getCfgById(97306)[1];this.dateArrItem=[];for(var e=0;e<t.length;e+=2){var i=t[e],n=t[e+1];this.dateArrItem.push([i,n,0,null])}this.allSkillId=a.config.BlendCfg.instance.getCfgById(97305)[1],this.guessChoiceMaxNum=a.config.BlendCfg.instance.getCfgById(97302)[1][0];var s=a.config.BlendCfg.instance.getCfgById(97303)[1];this.guessReward=[s[0],s[1],0,null]}i=a.strongest_marry||(a.strongest_marry={}),t=a.redPoint.RedPointCtrl,e=a.scene.SceneUtil,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.GetCoupleBestRankReply=function(t){if(t){this.ranksTable={},this.myMarryRankDate=null;for(var e=t[0],i=0;i<e.length;i++){var n=e[i],s=n[1],o=n[0];this.ranksTable[s]=n,o===a.marry.MarryModel.instance.marryId&&(this.myMarryRankDate=n)}GlobalData.dispatcher.event("GET_COUPLE_BEST_RANK_REPLY")}},o.prototype.GetCoupleBestGuessListReply=function(t){if(t){this.guessMarryIds=t[0],this.isGuess=0<this.guessMarryIds.length;for(var e=t[1],i=0;i<e.length;i++)e[i].sort(this.sortTeamerByVip.bind(this));this.guessMarryList=t[1],this.setRP(),GlobalData.dispatcher.event("GET_COUPLE_BEST_GUESS_LIST_REPLY")}},o.prototype.CoupleBestChooseSkillReply=function(t){t&&(this.mySkillId=t[0],this.marrySkillId=t[1],GlobalData.dispatcher.event("COUPLE_BEST_CHOOSE_SKILL_REPLY"))},o.prototype.UpdateCoupleBestRoundInfo=function(t){if(t){if(this.round=t[0],this.readyEndTime=t[1],0!=this.copyState&&0===t[4]&&i.StrongestMarryCtrl.instance.GetCoupleBestGuessList(),2!=this.copyState&&2===t[4]&&i.StrongestMarryCtrl.instance.GetCoupleBestGuessList(),this.copyState=t[4],0===this.copyState&&CommonUtil.whetherInCopy()||(this.winTimes=t[2],this.loseTimes=t[3]),2===this.copyState||0===this.copyState){var e=DungeonModel.instance.getCopySceneStateByType(51);e&&(this.readyEndTime=e[3])}this.setRP(),GlobalData.dispatcher.event("UPDATE_COUPLE_BEST_ROUND_INFO")}},o.prototype.UpdateCoupleBestIncome=function(t){t&&(this.totalExp=t[0],this.totalGold=t[1],GlobalData.dispatcher.event("UPDATE_COUPLE_BEST_INCOME"))},o.prototype.UpdateCoupleBestMapInfo=function(t){if(t){for(var e=t[0],i=t[1],n=!1,s=0;s<e.length;s++){var o=e[s][0];o!==PlayerModel.instance.actorId&&o!==a.marry.MarryModel.instance.halfRoleID||(n=!0)}e.sort(this.sortTeamer.bind(this)),i.sort(this.sortTeamer.bind(this)),n?(this.teamer1=e,this.teamer2=i):(this.teamer1=i,this.teamer2=e),GlobalData.dispatcher.event("UPDATE_COUPLE_BEST_MAP_INFO")}},o.prototype.UpdateCoupleBestMapPace=function(t){var e=t[0];this.hpPerTable={};for(var i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[1],a=n[2];this.hpPerTable[s]=a?0:o}GlobalData.dispatcher.event("UPDATE_COUPLE_BEST_MAP_PACE")},o.prototype.UpdateCoupleBestMapSkill=function(t){for(var e=t[0],i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[1],a=n[2];this.skillStateAndIdTable[s]=[o,a]}GlobalData.dispatcher.event("UPDATE_COUPLE_BEST_MAP_SKILL")},o.prototype.sortTeamer=function(t,e){return t[8]-e[8]},o.prototype.sortTeamerByVip=function(t,e){var i=t[5],n=e[5],s=t[6],o=e[6];return i!=n?n-i:o-s},o.prototype.getEquivalenteEnemy=function(){for(var t=0,e=0;e<this.teamer1.length;e++){var i=this.teamer1[e][0],n=o.instance.hpPerTable[i];i===PlayerModel.instance.actorId&&n&&(t=e)}var s=this.teamer2[t];return(s=s||this.teamer2[0])?s[0]:0},o.prototype.setEnemy=function(){Laya.timer.once(300,this,function(){var t=a.strongest_marry.StrongestMarryModel.instance.getEquivalenteEnemy();console.log("寻找地方玩家idEnery:",t),PlayerModel.instance.selectTarget(2,t||-1)})},o.prototype.setRP=function(){t.instance.setRPProperty("strongestMarryRP1",!this.isGuess&&this.isCanGuess()),t.instance.setRPProperty("strongestMarryRP",this.isOpen()&&this.isHaveQualifications()&&!this.isCanGuess()),t.instance.setRPProperty("strongestMarryRP2",this.isOpen()&&this.isHaveQualifications()&&!this.isCanGuess())},o.prototype.isOpen=function(){var t=a.funcOpen.FuncOpenModel.instance.getFuncIsOpen(901),e=DungeonModel.instance.getCopySceneStateByType(51),i=e?e[2]:4;return t&&2===i},o.prototype.isCanGuess=function(){return this.isOpen()&&0<this.guessMarryList.length},o.prototype.isHaveQualifications=function(){return-1!=this.winTimes&&-1!=this.loseTimes},o.prototype.ispreliminaryCoupleBestr=function(){return 51===e.currScene&&1<e.curSceneLv},o.prototype.isLose=function(){return 3<=o.instance.loseTimes},n=o,i.StrongestMarryModel=n}(modules=modules||{}),function(t){var a,r,e;function i(){return null!==r&&r.apply(this,arguments)||this}a=t.strongest_marry||(t.strongest_marry={}),r=ui.StrongestMarryRankItemUI,__extends(i,r),i.prototype.setData=function(t){r.prototype.setData.call(this,t);var e="",i="",n=0,s=0,o=a.StrongestMarryModel.instance.ranksTable[t];o?(this.box1.visible=!0,this.notplaylisttxt.visible=!1,e=o[2],i=o[3],n=o[4][0],s=o[4][1],this.nameTxt.text=e,this.nameTxt1.text=i,this.scoreTxt.text=n+"胜"+s+"败"):(this.box1.visible=!1,this.notplaylisttxt.visible=!0),1===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+t)},e=i,a.StrongestMarryRankItem=e}(modules=modules||{}),function(t){var e,l,i;function n(){return l.call(this)||this}e=t.strongest_marry||(t.strongest_marry={}),l=ui.StrongestMarryRankRewardItemUI,__extends(n,l),n.prototype.setData=function(t){l.prototype.setData.call(this,t);var e=t[1],i=t[2];if(e){1===e[0]&&1===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===e[0]&&2===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===e[0]&&3===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.rankText.visible=!0,e[0]===e[1]?this.rankText.text="第"+e[0]+"名":this.rankText.text="第"+e[0]+"-"+e[1]+"名");for(var n=[this.continueBase4,this.continueBase3,this.continueBase2,this.continueBase1],s=0;s<n.length;s++)(a=n[s]).visible=!1;var o=[];for(s=0;s<i.length;s+=2){var a=i[s],r=i[s+1];o.push([a,r,0,null])}for(o.reverse(),s=0;s<o.length;s++)a=o[s],(r=n[s])&&a&&(r.dataSource=a,r.visible=!0)}},i=n,e.StrongestMarryRankRewardItem=i}(modules=modules||{}),function(t){var h,p,e,i;function n(){return p.call(this)||this}h=t.team_warfare||(t.team_warfare={}),e=t.common.CustomClip,p=ui.TeamWarfareAchievementItemUI,__extends(n,p),n.prototype.initialize=function(){p.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26),this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.65,.65),this._btnClip.visible=!1},n.prototype.onEvt=function(){p.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},n.prototype.sureBtnHandler=function(){this._type&&h.TeamWarfareCtrl.instance.WarbandWarAchieveDraw(this._type)},n.prototype.setData=function(t){if(p.prototype.setData.call(this,t),t){var e=t[3],i=t[2];this._id=t[0],this._type=t[1],this._state=h.TeamWarfareModel.instance.getAchievementState(this._id,this._type);var n=h.TeamWarfareModel.instance.getAchieveInfoBType(this._type)[0],s=i<=n?"#168a17":"#ff3e3e";switch(this._type){case 1:this.StatementHTML.innerHTML="首领战累计造成伤害"+CommonUtil.bigNumToString(i)+"<span style='color:"+s+"'>("+CommonUtil.bigNumToString(n)+"/"+CommonUtil.bigNumToString(i)+")</span>";break;case 2:this.StatementHTML.innerHTML="累计击败"+i+"名玩家<span style='color:"+s+"'>("+n+"/"+i+")</span>";break;case 3:this.StatementHTML.innerHTML="累计助攻"+i+"名玩家<span style='color:"+s+"'>("+n+"/"+i+")</span>";break;case 4:this.StatementHTML.innerHTML="累计采集"+i+"个炎晶<span style='color:"+s+"'>("+n+"/"+i+")</span>";break;case 5:this.StatementHTML.innerHTML="累计获取"+i+"次胜利<span style='color:"+s+"'>("+n+"/"+i+")</span>";break;case 6:this.StatementHTML.innerHTML="累计成为最强队长"+i+"次<span style='color:"+s+"'>("+n+"/"+i+")</span>"}1==this._state?this.showCanReceive():2==this._state?this.showOver():3==this._state&&this.showReceived();for(var o=new Array,a=0;a<e.length;a+=2){var r=e[a],l=e[a+1];o.push([r,l])}this.showRewards(o)}},n.prototype.showRewards=function(t){for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;for(e=0;e<t.length;e++){var i=this._taskBase[e];i&&(i.dataSource=[t[e][0],t[e][1],0,null],i.visible=!0)}},n.prototype.showCanReceive=function(){this.sureBtn.visible=!0,e.thisPlay(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1},n.prototype.showReceived=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0,this.overImg.visible=!1},n.prototype.showOver=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!0},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),p.prototype.destroy.call(this,t)},i=n,h.TeamWarfareAchievementItem=i}(modules=modules||{}),function(t){var h,p,e,i;function n(){var t=p.call(this)||this;return t._inx=0,t}h=t.team_warfare||(t.team_warfare={}),e=t.common.CustomClip,p=ui.TeamWarfareAchievementItemUI,__extends(n,p),n.prototype.initialize=function(){p.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26),this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.65,.65),this._btnClip.visible=!1},n.prototype.onEvt=function(){p.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},n.prototype.sureBtnHandler=function(){t.dungeon.DungeonCtrl.instance.getJoinAward(this._inx)},n.prototype.setData=function(t){if(p.prototype.setData.call(this,t),t){var e=[t[2],t[3]],i=t[1];this._inx=t[0];var n=h.TeamWarfareModel.instance.coinNum,s=i<=n?"#168a17":"#ff3e3e";this.StatementHTML.innerHTML="本场战斗获得"+i+"积分<span style='color:"+s+"'>("+n+"/"+i+")</span>",this._state=h.TeamWarfareModel.instance.getBattleTarGetState(this._inx),2==this._state?this.showOver():1==this._state?this.showCanReceive():3==this._state&&this.showReceived();for(var o=new Array,a=0;a<e.length;a+=2){var r=e[a],l=e[a+1];o.push([r,l])}this.showRewards(o)}},n.prototype.showRewards=function(t){for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;for(e=0;e<t.length;e++){var i=this._taskBase[e];i&&(i.dataSource=[t[e][0],t[e][1],0,null],i.visible=!0)}},n.prototype.showCanReceive=function(){this.sureBtn.visible=!0,e.thisPlay(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1},n.prototype.showReceived=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0,this.overImg.visible=!1},n.prototype.showOver=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!0},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),p.prototype.destroy.call(this,t)},i=n,h.TeamWarfareBattlefieldTargetItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.team_warfare||(t.team_warfare={}),i=ui.TeamWarfareDuelItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.itemArr=[this.item1,this.item2,this.item3]},s.prototype.setData=function(t){this._dateGuessArr=t;for(var e=0,i=this._dateGuessArr[1],n=this._dateGuessArr[0],s=0;s<i.length;s++)(a=i[s])&&0===a[0]?e++:null===a&&e++;for(s=0;s<this.itemArr.length;s++){var o=this.itemArr[s],a=i[s];o.data=[n,2<=e,a]}},n=s,e.TeamWarfareDuelItem=n}(modules=modules||{}),function(t){var l,e,h,i;function n(){return null!==e&&e.apply(this,arguments)||this}l=t.team_warfare||(t.team_warfare={}),h=t.common.AttrUtil,e=ui.TeamWarfareDuelItem1UI,__extends(n,e),n.prototype.setData=function(t){if(this._dateGuess=t[2],this.round=t[0],this._isNull=t[1],this._dateGuess){this.visible=!0,this._warbandId=this._dateGuess[0];var e=this._dateGuess[1],i=this._dateGuess[3],n=this._dateGuess[4],s=this._dateGuess[5],o=this._dateGuess[6];this.playerIngText1.visible=this.lBtn.visible=this.hintTxt1.visible=this.lFlagImg.visible=this.lNullTxt.visible=this.bg.visible=!1;var a=0===this._warbandId;if(this.box.visible=!a,a)this.lNullTxt.visible=!0,this.hintTxt1.visible=this._isNull;else{this.lNameTxt.text=e,this.lPerTxt.text="赔率:"+h.formatFloatNum(s,!0),this.lCountTxt.text="支持数:"+i,this.lNumTxt.text=""+n,1===o?(this.lBtn.visible=!1,this.bg.visible=!1,this.lFlagImg.visible=!0,this.lFlagImg.skin="peak_duel/txt_dfdf_sl.png"):-1===o?(this.lBtn.visible=!1,this.bg.visible=this.lFlagImg.visible=!0,this.lFlagImg.skin="peak_duel/txt_dfdf_fu.png"):(this.lBtn.visible=!this._isNull,this.bg.visible=this.lFlagImg.visible=!1);var r=l.TeamWarfareModel.instance.getState(!1);l.TeamWarfareModel.instance.getRound(!1),this.hintTxt1.visible=this._isNull,this._isNull?this.lBtn.visible=!1:!0===this.lBtn.visible&&r&&(this.lBtn.visible=!1,this.playerIngText1.visible=!0)}CommonUtil.adaptationImgAndText([[this.hidden_1,1,0],[this.coinImg1,2,0],[this.lNumTxt,1,0]],this.box.width,0,"center")}else this.visible=!1},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.lBtn,this,this.lBtnHandler)},n.prototype.lBtnHandler=function(){var t=l.TeamWarfareModel.instance.totalGoldTable[this.round];0<l.TeamWarfareModel.instance.totalGoldTableCfg[this.round][0]-t?CommonUtil.judgeCurrency(90140001,l.TeamWarfareModel.instance.totalGoldTableCfg[this.round][2])&&l.TeamWarfareCtrl.instance.ReqWarbandWarGuess(this.round,this._warbandId):CommonUtil.noticeError(0,"次数不足",!0)},i=n,l.TeamWarfareDuelItem1=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.team_warfare||(t.team_warfare={}),i=ui.TeamWarfareGroupItemUI,__extends(s,i),Object.defineProperty(s.prototype,"selectEnable",{get:function(){return this._selectEnable=!0,this._selectEnable},enumerable:!0,configurable:!0}),s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.btn.selected=t},s.prototype.setData=function(t){switch(i.prototype.setData.call(this,t),this.btn.skin=1===t[0]?"team_warfare/image_zdzl_bg13.png":"common/btn_tonyong_37.png",t[1]){case 1:this.btn.label="青龙组";break;case 2:this.btn.label="白虎组";break;case 3:this.btn.label="朱雀组"}},n=s,e.TeamWarfareGroupItem=n}(modules=modules||{}),function(t){var l,h,e,i;function n(){return h.call(this)||this}l=t.team_warfare||(t.team_warfare={}),e=t.common.CustomClip,h=ui.TeamWarfareHurtRewardItemUI,__extends(n,h),n.prototype.initialize=function(){h.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26),this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.65,.65),this._btnClip.visible=!1},n.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},n.prototype.sureBtnHandler=function(){l.TeamWarfareCtrl.instance.WarbandWarBossHurtDraw(this.cond)},n.prototype.setData=function(t){if(h.prototype.setData.call(this,t),t){this.cond=t[0];var e=l.TeamWarfareModel.instance.hurt,i=e>=this.cond?"#168a17":"#ff3e3e";this.StatementHTML.innerHTML="对炎魔伤害量达到"+CommonUtil.bigNumToString(this.cond)+"<span style='color:"+i+"'>("+CommonUtil.bigNumToString(e)+"/"+CommonUtil.bigNumToString(this.cond)+")</span>";var n=l.TeamWarfareModel.instance.getHurtState(this.cond);3===n?this.showReceived():1===n?this.showCanReceive():this.showOver();for(var s=new Array,o=1;o<t.length;o+=2){var a=t[o],r=t[o+1];s.push([a,r])}this.showRewards(s)}},n.prototype.showRewards=function(t){for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;for(e=0;e<t.length;e++){var i=this._taskBase[e];i&&(i.dataSource=[t[e][0],t[e][1],0,null],i.visible=!0)}},n.prototype.showCanReceive=function(){this.sureBtn.visible=!0,e.thisPlay(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1},n.prototype.showReceived=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0,this.overImg.visible=!1},n.prototype.showOver=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!0},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),h.prototype.destroy.call(this,t)},i=n,l.TeamWarfareHurtRewardAlertItem=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._cfgs=GlobalData.getConfig("scene_limittime");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t][0];this._table[i]=this._cfgs[t]}},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.SceneLimittimeCfg=i}(modules=modules||{}),function(I){var s,o,a,t,e;function l(){this.hurt=0,this.drawed=[],this.surplusTime=0,this.personRank=[],this.warbandRankTable={},this.schedule=0,this.nextTime=0,this.readyEndTime=0,this.round=0,this.collectionArr=[],this.warbandWarInfoTable={},this.battlesTableRank={},this.battlesTableVS={},this.battlesTableWarbandId=[],this.battlesTableWarbandId1=[],this.isMyFactinGroup=-1,this.isMyFactinGroup1=-1,this.listGather=[],this.oldSelectTargetId=0,this.gatherOcc=0,this.myHomeId=888888,this.myHomePos=[],this.copyMatchInfo=[],this.copyMatchInfoWarId=[],this.coinNum=0,this.statesTable={},this.battlefieldTargetArrCfg=[],this._clickGathering=!1,this.achieveInfoTable={},this.timeOne=0,this.isOpenBoss=!1,this.overNum=0,this.overNum1=0,this.scoreNumMax=0,this.tipsTime=6e3,this.showTime=0,this.ValidRadiusArr=[50,100],this.fuDiDateTable={},this.tableCollection={},this.tableCollectionPosByOcc={},this.totalGoldTableCfg={},this.totalGoldTable={},this.battlesTableRank={},this.battlesTableVS={},this.battlesTableWarbandId=[],this.warbandWarInfoTable={},this.guessListTable={},this.warbandWarInfoTable[1]=[],this.warbandWarInfoTable[2]=[],this.warbandWarInfoTable[3]=[],this.warbandWarInfoTable[4]=[],this.bossCopyDay=I.config.BlendCfg.instance.getCfgById(97801)[1][0],this.maxRankNum=I.config.BlendCfg.instance.getCfgById(97802)[1][0],this.scoreMaxNum=I.config.BlendCfg.instance.getCfgById(97804)[1][0];for(var t=I.config.BlendCfg.instance.getCfgById(97805)[1],e=0;e<t.length;e+=8){var i=t[e],n=t[e+1],s=t[e+2],o=t[e+3],a=t[e+4],r=t[e+7];this.collectionArr.push(o),this.tableCollection[i]=[n,s,o,a,r],this.tableCollectionPosByOcc[o]=[i,n,s,a,r]}var l=I.config.BlendCfg.instance.getCfgById(97808)[1];for(e=0;e<l.length;e+=6){o=l[e];var h=l[e+1],p=l[e+2],c=l[e+3];this.totalGoldTableCfg[o]=[h,p,c]}var u=I.config.BlendCfg.instance.getCfgById(97807)[1],d=0;for(e=0;e<u.length;e+=3){var m=u[e],y=(o=u[e+1],u[e+2]);this.battlefieldTargetArrCfg.push([d,m,o,y]),d++}var f=I.config.BlendCfg.instance.getCfgById(97803)[1];this.playerIngTime=f[1];var g=0;for(e=0;e<f.length;e++){g+=f[e]}this.timeOne=2*g,this.moBaiMaxNum=I.config.BlendCfg.instance.getCfgById(97810)[1][0];var _=I.config.BlendCfg.instance.getCfgById(97813)[1];for(e=0;e<_.length;e+=9){for(var v=_[e],b=[],T=e+9,C=e+1;C<T;C++)b.push([_[C],1,0,null]);this.fuDiDateTable[v]=b}this.scoreNumMax=I.config.BlendCfg.instance.getCfgById(97817)[1][0],this.tipsTime=I.config.BlendCfg.instance.getCfgById(97819)[1][0],this.ValidRadiusArr=I.config.BlendCfg.instance.getCfgById(97823)[1],this.startTime=I.config.BlendCfg.instance.getCfgById(97822)[1][0]}s=I.team_warfare||(I.team_warfare={}),o=I.config.SceneWarbandwarBossCfg,a=I.config.SceneLimittimeCfg,t=I.scene.SceneUtil,Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.isMoBai=function(){return this.isHaveMoBai()&&this.moBaiNum<this.moBaiMaxNum},l.prototype.isHaveMoBai=function(){return this.warbandId&&0<this.warbandId&&null!=this.show},l.prototype.isHaveHurtReward=function(){for(var t=o.instance.rewards,e=0;e<t.length;e++){var i=t[e];if(i){var n=i[0];if(this.hurt>=n&&-1===this.drawed.indexOf(n))return!0}}return!1},l.prototype.ispreliminaryFactionWar=function(){return 56===t.currScene&&1<t.curSceneLv},l.prototype.getRound=function(t){void 0===t&&(t=!1);var e=Math.ceil(this.schedule/2);return t&&console.log("【战队逐鹿】 当前决赛 处于第"+e+"轮 "),e},l.prototype.getState=function(t){void 0===t&&(t=!1);var e=this.getRound(!1),i=this.schedule%2,n=!(3<e)&&0==i;return t&&console.log("【战队逐鹿】 当前决赛 处于  "+(n?"战斗":"准备")+" "),n},l.prototype.isCanSai=function(){return-1!=this.battlesTableWarbandId.indexOf(I.warband.WarbandModel.instance.warbandId)},l.prototype.isJueSai=function(){var t=this.getRound(!1);return 4===l.instance.isMyFactinGroup&&3===t},l.prototype.isMyGroupOver=function(){return!(!l.instance.isCanSai()||-1==this.isMyFactinGroup||!l.instance.getChampionDate(this.isMyFactinGroup))},l.prototype.getChampionDate=function(t){var e=null,i=this.warbandWarInfoTable[t];if(i)for(var n=0;n<i.length;n++){var s=i[n];s&&0<s[0]&&(4===t?3<=s[3]:2<=s[3])&&(e=s)}return e},l.prototype.getWin=function(t,e,i){var n=t?t[3]:0,s=e?e[3]:0,o=i?i[3]:0;return s<n&&o<n?0:n<s&&o<s?1:n<o&&s<o?2:3},l.prototype.getIsLunKong=function(t){return!t||0===t[0]&&0===t[2].length||0===t[0]&&0<t[2].length},l.prototype.getIsLunKongGroup=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];this.getIsLunKong(n)&&e++}return e<2},l.prototype.getMaxNum=function(t){var e=this.warbandWarInfoTable[t];if(e){for(var i=0,n=0;n<e.length;n++){var s=e[n];s&&s[3]>i&&(i=s[3])}return i}return 0},l.prototype.getEightStrongDate=function(t){return this.warbandWarInfoTable[t]?this.warbandWarInfoTable[t]:[]},l.prototype.isJingCai=function(){var t=this.getRound();if(1<=t&&t<=3){var e=l.instance.totalGoldTable[t];return 0<l.instance.totalGoldTableCfg[t][0]-e}return!1},l.prototype.isNotLunKong=function(){function t(t){if(t)for(var e=0;e<t.length;e++){for(var i=t[e],n=0,s=0;s<i.length;s++){var o=i[s];o&&0===o[0]?n++:null===o&&n++}if(n<2)return!1}return!0}var e,i=this.getRound();return 1===i||2===i?!(e=l.instance.guessListTable[i])||!!t(e[0])&&!!t(e[1])&&!!t(e[2]):3!==i||!(e=l.instance.guessListTable[i])||!!t(e[0])},l.prototype.WarbandWarBossHurtDrawInfoReply=function(t){this.hurt=t[1],this.drawed=t[2],this.surplusTime=t[0],this.isOpenBoss=1===t[3],l.instance.setRP(),l.instance.setRP1(),GlobalData.dispatcher.event("WARBAND_WARBOSS_HURT_DRAW_INFO_REPLY")},l.prototype.UpdateWarbandWarBossHurt=function(t){this.hurt=t[0],l.instance.setRP(),l.instance.setRP1(),GlobalData.dispatcher.event("WARBAND_WARBOSS_HURT_DRAW_INFO_REPLY")},l.prototype.UpdateWarbandWarInfoList=function(t){var w=this;this.warbandWarInfoTable={},this.battlesTableWarbandId.length=0,this.battlesTableWarbandId1.length=0,this.readyEndTime=t[2],this.setTimeDate(t[0],t[1]);var e=t[3];if(this.warbandWarInfoTable[1]=[],this.warbandWarInfoTable[2]=[],this.warbandWarInfoTable[3]=[],this.warbandWarInfoTable[4]=[],this.warbandWarInfoTable[1].length=0,this.warbandWarInfoTable[2].length=0,this.warbandWarInfoTable[3].length=0,(this.warbandWarInfoTable[4].length=0)===e.length)return this.battlesTableRank[1]={},this.battlesTableRank[2]={},this.battlesTableRank[3]={},this.battlesTableRank[4]={},this.battlesTableVS[1]=new Array,this.battlesTableVS[2]=new Array,this.battlesTableVS[3]=new Array,void(this.battlesTableVS[4]=new Array);for(var i=0;i<e.length;i++){var n=e[i];if(n){var s=n[3],o=n[0];o===I.warband.WarbandModel.instance.warbandId&&(0<i&&i<9?this.isMyFactinGroup1=this.isMyFactinGroup=1:9<=i&&i<18?this.isMyFactinGroup1=this.isMyFactinGroup=2:18<=i&&i<27&&(this.isMyFactinGroup1=this.isMyFactinGroup=3)),2<=s&&(o===I.warband.WarbandModel.instance.warbandId&&(this.isMyFactinGroup=4),this.warbandWarInfoTable[4].push(n),-1===this.battlesTableWarbandId1.indexOf(o)&&this.battlesTableWarbandId1.push(o)),-1===this.battlesTableWarbandId.indexOf(o)&&this.battlesTableWarbandId.push(o)}}function a(t){w.battlesTableRank[t]={},w.battlesTableVS[t]=new Array;var r=w.warbandWarInfoTable[t],e={1:[],2:[],3:[],4:[]},l=new Array;if(2<=E)for(var i=0;i<r.length;i+=3){var n=r[i],s=r[i+1],o=r[i+2],a=w.getWin(n,s,o);0===a?l.push(i):1===a?l.push(i+1):2===a&&l.push(i+2)}function h(t,e){var i=null,n=null;if(-1!=l.indexOf(t)&&(0===l.indexOf(t)?(i=r[l[1]],n=r[l[2]]):1===l.indexOf(t)?(i=r[l[0]],n=r[l[2]]):2===l.indexOf(t)&&(i=r[l[0]],n=r[l[1]])),i&&e&&n){var s=e[3],o=i[3],a=n[3];return!(o<s&&a<s)}return!1}var p=[],c=r[0],u=r[1],d=r[2],m=r[3],y=r[4],f=r[5],g=r[6],_=r[7],v=r[8],b=1===E&&A,T=2===E&&A,C=w.getStateNumImg(c,u,d,1,t,[h(0,c),h(1,u),h(2,d)]);p[0]=b&&C[0]===C[1]&&C[0]===C[2]&&w.getIsLunKongGroup([c,u,d]),e[1][0]=C[0],e[1][1]=C[1],e[1][2]=C[2];var I=w.getStateNumImg(m,y,f,1,t,[h(3,m),h(4,y),h(5,f)]);p[1]=b&&I[0]===I[1]&&I[0]===I[2]&&w.getIsLunKongGroup([m,y,f]),e[2][0]=I[0],e[2][1]=I[1],e[2][2]=I[2];var B=w.getStateNumImg(g,_,v,1,t,[h(6,g),h(7,_),h(8,v)]);p[2]=b&&B[0]===B[1]&&B[0]===B[2]&&w.getIsLunKongGroup([g,_,v]),e[3][0]=B[0],e[3][1]=B[1],e[3][2]=B[2];var x=null!=l[0]?r[l[0]]:null,S=null!=l[1]?r[l[1]]:null,P=null!=l[2]?r[l[2]]:null,M=w.getStateNumImg(x,S,P,2,t);e[4][0]=M[0],e[4][1]=M[1],e[4][2]=M[2],p[3]=T&&M[0]===M[1]&&M[0]===M[2]&&!w.getIsLunKong(x)&&!w.getIsLunKong(S)&&!w.getIsLunKong(P),w.battlesTableRank[t]=e,w.battlesTableVS[t]=p}this.warbandWarInfoTable[1]=e.splice(0,9),this.warbandWarInfoTable[2]=e.splice(0,9),this.warbandWarInfoTable[3]=e.splice(0,9),console.log("半决赛 天组",this.warbandWarInfoTable[1]),console.log("半决赛 地组",this.warbandWarInfoTable[2]),console.log("半决赛 人组",this.warbandWarInfoTable[3]),console.log("决赛组",this.warbandWarInfoTable[4]);var E=this.getRound(!0),A=this.getState(!0);a(1),a(2),a(3),function(){w.battlesTableRank[4]={},w.battlesTableVS[4]=new Array;var t=w.warbandWarInfoTable[4],e={1:[]},i=t[0],n=t[1],s=t[2],o=w.getStateNumImg(i,n,s,1,4);e[1][0]=o[0],e[1][1]=o[1],e[1][2]=o[2],w.battlesTableRank[4]=e}(),this.setRPAll(),GlobalData.dispatcher.event("UPDATE_WARBAND_WARINFO_LIST")},l.prototype.WarbandWarKingShowReply=function(t){this.warbandId=t[0],this.warbandName=t[1],this.roleName=t[2],this.show=t[3],this.setRP3(),GlobalData.dispatcher.event("WARBAND_WARKING_SHOW_REPLY")},l.prototype.WarbandWarPersonRankReply=function(t){this.personRank=t[0],this.myPersonRank=null;for(var e=0;e<this.personRank.length;e++){var i=this.personRank[e];if(i&&i[0]===PlayerModel.instance.actorId){this.myPersonRank=i;break}}GlobalData.dispatcher.event("WARBAND_WARPERSON_RANK_REPLY")},l.prototype.WarbandWarWarbandRankReply=function(t){var e=t[0];this.warbandRankTable={},this.myWarbandRank=null;for(var i=0;i<e.length;i++){var n=e[i];if(n){var s=n[0],o=n[3];this.warbandRankTable[o]=n,s===I.warband.WarbandModel.instance.warbandId&&(this.myWarbandRank=n)}}GlobalData.dispatcher.event("WARBAND_WAR_WARBAND_RANK_REPLY")},l.prototype.UpdateWarbandWarRoundInfo=function(t){this.readyEndTime=t[2],this.setTimeDate(t[0],t[1],!0),this.setRPAll()},l.prototype.GetWarbandWarGuessListReply=function(t){var e=t[0],i=t[1];this.guessListTable[e]={};var n=t[2];if(1===e)for(var s=0,o=0;o<n.length;o+=3){var a=n[o],r=n[o+1],l=n[o+2];this.guessListTable[e][s]=[],this.guessListTable[e][s].push(a),this.guessListTable[e][s].push(r),this.guessListTable[e][s].push(l),s++}else if(2===e||3===e)for(o=s=0;o<n.length;o++)a=n[o],this.guessListTable[e][s]=[],this.guessListTable[e][s].push(a),s++;this.totalGoldTable[e]=i,this.setRP4(),GlobalData.dispatcher.event("GET_WARBAND_WAR_GUESSLIST_REPLY")},l.prototype.sortFunById=function(t,e){var i=t[0];return e[0]-i},l.prototype.UpdateWarbandWarGatherList=function(t){},l.prototype.UpdateGatherOcc=function(t){this.gatherOcc=t[0],0!=this.gatherOcc&&(CommonUtil.noticeError(0,"采集炎晶，返回交付"),PlayerModel.instance.selectTarget(3,I.team_warfare.TeamWarfareModel.instance.myHomeId),l.instance.ispreliminaryFactionWar()&&WindowManager.instance.open(1500)),GlobalData.dispatcher.event("UPDATE_GATHER_OCC")},l.prototype.WarbandWarCopyMatchInfo=function(t){this.copyMatchInfo=t[0];for(var e=this.copyMatchInfoWarId.length=0;e<this.copyMatchInfo.length;e++){var i=this.copyMatchInfo[e];if(i&&i[0]===I.warband.WarbandModel.instance.warbandId){var n=I.config.SceneCfg.instance.getCfgById(4401)[4];this.myHomePos=n[e]}i&&this.copyMatchInfoWarId.push(i[0])}GlobalData.dispatcher.event("WARBAND_WARCOPY_MATCHINFO")},l.prototype.UpdateWarbandWarCoin=function(t){this.coinNum=t[0],GlobalData.dispatcher.event("UPDATE_WARBANDWAR_COIN")},l.prototype.UpdateJoinAward=function(t){var e=t[0];this.statesTable={};for(var i=0;i<e.length;i++){var n=e[i];if(n){var s=n[0],o=n[1];this.statesTable[s]=o}}this.setRP6(),GlobalData.dispatcher.event("UPDATE_JOIN_AWARD")},l.prototype.WarbandWarWorshipTimes=function(t){this.moBaiNum=t[0],this.setRP3(),GlobalData.dispatcher.event("WARBAND_WAR_WORSHIP_TIMES")},l.prototype.WarbandWarAchieveInfoReply=function(t){for(var e=t[0],i=0;i<e.length;i++){var n=e[i];if(n){var s=n[0],o=n[1],a=n[2];this.achieveInfoTable[s]=[o,a]}}this.setRP5(),GlobalData.dispatcher.event("WARBAND_WAR_ACHIEVE_INFO_REPLY")},l.prototype.isHaveAch=function(){for(var t=1;t<=I.config.WarbandWarAchieveCfg.instance.maxTypeNum;t++){var e=I.config.WarbandWarAchieveCfg.instance.getDateByType(t);if(e)for(var i=0;i<e.length;i++){var n=e[i];if(n){var s=n[1],o=n[2],a=l.instance.getAchieveInfoBType(s),r=a[0];if(a[1]<o&&o<=r)return!0}}}return!1},l.prototype.setTimeDate=function(t,e,i){if(void 0===i&&(i=!1),t!=this.schedule&&(s.TeamWarfareCtrl.instance.GetWarbandWarGuessList(1),s.TeamWarfareCtrl.instance.GetWarbandWarGuessList(2),s.TeamWarfareCtrl.instance.GetWarbandWarGuessList(3),i&&s.TeamWarfareCtrl.instance.WarbandWarInfoList(),s.TeamWarfareCtrl.instance.WarbandWarKingShow(),s.TeamWarfareCtrl.instance.WarbandWarBossHurtDrawInfo()),this.schedule=t,this.nextTime=e,4===this.getRound()){WindowManager.instance.close(1421);var n=DungeonModel.instance.getCopySceneStateByType(43);n&&(l.instance.nextTime=n[3])}console.log("下个阶段 时间： "+l.instance.nextTime),GlobalData.dispatcher.event("UPDATE_WARBAND_WAR_ROUND_INFO")},l.prototype.getAchieveInfoBType=function(t){var e=this.achieveInfoTable[t];return e||[0,0]},l.prototype.getAchievementState=function(t,e){var i=I.config.WarbandWarAchieveCfg.instance.getDateByid(t),n=l.instance.getAchieveInfoBType(e),s=n[0],o=n[1],a=i[2];return o<a?a<=s?1:2:3},l.prototype.isHaveBattle=function(){for(var t=0;t<this.battlefieldTargetArrCfg.length;t++){var e=this.battlefieldTargetArrCfg[t][0];if(1===this.getBattleTarGetState(e))return!0}return!1},l.prototype.getBattleTarGetState=function(t){var e=this.statesTable[t];return[2,1,3][e=e||0]},l.prototype.setRPAll=function(){this.setRP(),this.setRP1(),this.setRP2(),this.setRP3(),this.setRP4(),this.setRP5(),this.setRP6()},l.prototype.setRP=function(){I.redPoint.RedPointCtrl.instance.setRPProperty("teamWarfareRP",0<this.surplusTime&&this.isOpenBoss&&3===this.getWarCopyState()&&this.isOpenWar())},l.prototype.setRP1=function(){I.redPoint.RedPointCtrl.instance.setRPProperty("teamWarfareRP1",this.isOpenWar()&&this.isHaveHurtReward())},l.prototype.setRP2=function(){I.redPoint.RedPointCtrl.instance.setRPProperty("teamWarfareRP2",this.isOpenWar()&&8===this.getWarCopyState()&&(3!=l.instance.getRound(!1)?this.isCanSai():this.isJueSai()))},l.prototype.setRP3=function(){var t=l.instance.getWarCopyState();I.redPoint.RedPointCtrl.instance.setRPProperty("teamWarfareRP3",this.isOpenWar()&&8!=t&&7!=t&&3!=t&&this.isMoBai())},l.prototype.setRP4=function(){var t=this.getWarCopyState(),e=this.isNotLunKong();console.log("当前轮次竞猜是否都轮空了：",e);var i=this.isOpenWar()&&8===t&&!this.getState()&&this.isJingCai()&&!this.isNotLunKong();I.redPoint.RedPointCtrl.instance.setRPProperty("teamWarfareRP4",i&&3===this.getRound()),I.redPoint.RedPointCtrl.instance.setRPProperty("teamWarfareRP7",i&&this.getRound()<=2)},l.prototype.setRP5=function(){I.redPoint.RedPointCtrl.instance.setRPProperty("teamWarfareRP5",this.isOpenWar()&&this.isHaveAch())},l.prototype.setRP6=function(){I.redPoint.RedPointCtrl.instance.setRPProperty("teamWarfareRP6",this.isOpenWar()&&this.isHaveBattle())},l.prototype.isOpenWar=function(){return I.funcOpen.FuncOpenModel.instance.getFuncIsOpen(939)},l.prototype.getStateNumImg=function(t,e,i,n,s,o){if(void 0===o&&(o=[!1,!1,!1]),!t&&!e&&!i)return[2,2,2];var a=this.getRound(!1),r=this.getState(!1),l=this.getMaxNum(s),h=4!=s?2<=l:3===l,p=t?t[3]:0,c=e?e[3]:0,u=i?i[3]:0,d=c<p&&u<p,m=p<c&&u<c,y=p<u&&c<u,f=l<=p,g=l<=c,_=l<=u,v=!!t&&0<t[0]&&0<t[2].length,b=!!e&&0<e[0]&&0<e[2].length,T=!!i&&0<i[0]&&0<i[2].length,C=2,I=2,B=2;if(h)C=f?1:d?3:2,I=g?1:m?3:2,B=_?1:y?3:2;else if(n!=a)if(0===a)B=I=C=1;else{var x=0;2===a&&(x=4!=s?2:3),C=f?1:d?p===x?o[0]?3:1:3:2,I=g?1:m?c===x?o[1]?3:1:3:2,B=_?1:y?u===x?o[1]?3:1:3:2}else n===a&&(r?d?(C=1,B=I=2):m?(I=1,B=C=2):y?(B=1,I=C=2):B=I=C=1:B=I=C=1);return[C=v?C:2,I=b?I:2,B=T?B:2]},l.prototype.getAllWin=function(t){var e=[],i=this.battlesTableRank[t];if(i)for(var n=[1,2,3,4],s=0;s<n.length;s++){var o=i[n[s]];o?(e.push(o[0]),e.push(o[1]),e.push(o[2])):(e.push(2),e.push(2),e.push(2))}return e},l.prototype.getWarCopyState=function(){var t=DungeonModel.instance.getCopySceneStateByType(56),e=t?t[2]:4,i=a.instance.getCfgById(19),n=[this.bossCopyDay],s=i[4],o=CommonUtil.getWeekNum();return o<n[0]?1:-1!=n.indexOf(o)?this.isOpenBoss?3:1:-1===n.indexOf(o)&&o<s[0]?6:-1!=s.indexOf(o)&&this.isOpenBoss?3:-1==s.indexOf(o)?10:4===e||1===e?7:2===e?8:3===e?9:void 0},l.prototype.getHurtState=function(t){return-1!=l.instance.drawed.indexOf(t)?3:l.instance.hurt>=t?1:2},l.prototype.getMyRankFuDi=function(){if(-1===I.warband.WarbandModel.instance.leaderId)return 0;if(!l.instance.warbandRankTable)return 0;for(var t in this.warbandRankTable)if(this.warbandRankTable[t][0]===I.warband.WarbandModel.instance.warbandId)return parseInt(t);return 0},l.prototype.AddWarbandWarScore=function(t){I.notice.ScoreNoticeManager.instance.addNotice(3,t)},l.prototype.getBanYunOccById=function(t){var e=I.fire_contention.FireContentionModel.instance.powerById[t[5][0]];return 0<(e=e||0)?2101001===e?2:1:0},l.prototype.getIsUnseen=function(t){var e=GameCenter.instance.getRole(t);return null==e||e.property.get("isUnseen")},l.prototype.isOpenTips=function(){var t=this.getTimeNum();if(0<t){var e=I.config.BlendCfg.instance.getCfgById(19081),i=(.001*t>>0)%60,n=[e[3],e[2][0],[],null,null,!0,null,0,"","left",i,"middle"];WindowManager.instance.open(1501,n)}},l.prototype.getTimeNum=function(){var t=this.playerIngTime-(this.startTimeCopy-GlobalData.serverTime);return this.startTime-t},l.prototype.isPlayer=function(){return this.getTimeNum()<=0},e=l,s.TeamWarfareModel=e}(modules=modules||{}),function(t){var r,l,e;function i(){return l.call(this)||this}r=t.team_warfare||(t.team_warfare={}),l=ui.TeamWarfareRankItemUI,__extends(i,l),i.prototype.setData=function(t){if(l.prototype.setData.call(this,t),t){var e="",i=0,n=0,s=!1;if(this.img.visible=1===r.TeamWarfareModel.instance._nowIndex,0===r.TeamWarfareModel.instance._nowIndex)s=!0,e=t[1],i=t[4],n=t[3];else if(1===r.TeamWarfareModel.instance._nowIndex){n=t;var o=r.TeamWarfareModel.instance.warbandRankTable[n];if(o){e=o[1],i=o[4];var a=o[2];a=0===a?1:a,this.img.skin="assets/icon/warband/"+a+".png"}s=null!=o}s?(this.notplaylisttxt.visible=!1,this.box1.visible=!0,this.nameTxt.text=e,this.scoreTxt.text=""+i):(this.notplaylisttxt.visible=!0,this.box1.visible=!1),1===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+n),0===r.TeamWarfareModel.instance._nowIndex?this.nameTxt.x=(this.width-this.nameTxt.textWidth)/2:CommonUtil.adaptationImgAndText([[this.img,2,0],[this.nameTxt,1,0]],this.box1.width,0,"center")}},e=i,r.TeamWarfareRankItem=e}(modules=modules||{}),function(t){var e,c,i;function n(){return c.call(this)||this}e=t.team_warfare||(t.team_warfare={}),c=ui.TeamWarfareRankRewardItemUI,__extends(n,c),n.prototype.setData=function(t){c.prototype.setData.call(this,t);var e=t[1],i=t[2];if(e){var n=e[0],s=e[1];1===n&&1===s?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===n&&2===s?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===n&&3===s?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.rankText.visible=!0,this.rankText.text=n===s?"第"+n+"名":27<=n?"第27名之后":"第"+n+"-"+s+"名");for(var o=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],a=0;a<o.length;a++)(l=o[a]).visible=!1;var r=[];for(a=0;a<i.length;a+=2){var l=i[a],h=i[a+1];r.push([l,h,0,null])}var p=(this.box.width-(100*r.length+3*(r.length-1)))/2;for(a=0;a<r.length;a++)l=r[a],(h=o[a])&&l&&(h.dataSource=l,h.visible=!0,h.x=p),p+=103}},i=n,e.TeamWarfareRankRewardItem=i}(modules=modules||{}),function(s){var t,o,e,i,n;function a(){return o.call(this)||this}t=s.team_warfare||(s.team_warfare={}),e=s.common.SimpleList,i=s.bag.BaseItem,o=ui.TeamWarfareRankRewardItem1UI,__extends(a,o),a.prototype.initialize=function(){o.prototype.initialize.call(this),this._list=e.create(i,100,100,1,4,20,5),this._list.size(460,100),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list.mouseThrough=!1,this.text3.underline=!0},a.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.text3,this,this.text3Handler)},a.prototype.text3Handler=function(){var t=this.dateNow[3];WindowManager.instance.open(1455,t)},a.prototype.setData=function(t){if(o.prototype.setData.call(this,t),t){this.inx=t[0],this.dateNow=t[1];var e=this.dateNow[2],i=this.dateNow[3];this.img.skin="assets/icon/ui/welfare_place/fd_"+i+".jpg",this.text2.text=CommonUtil.getFuDiName(i);var n=s.union_war.UnionWarModel.instance.getItems(e);this.img1.skin="union_war/image_xmz_bg04.png",this.img4.visible=this.inx<=1,this.text9.visible=1<this.inx,this.img1.y=this.inx<=1?0:56,0===this.inx?(this.img1.skin="team_warfare/image_zdzl_bg04.png",this.img4.skin="team_warfare/txt_zdzl_04.png"):1===this.inx?(this.img1.skin="team_warfare/image_zdzl_bg05.png",this.img4.skin="team_warfare/txt_zdzl_05.png"):2===this.inx?this.text9.text="季军奖励":3===this.inx?this.text9.text="争夺战组内2-3名奖励":4===this.inx?this.text9.text="争夺战组内4-9名奖励":5===this.inx&&(this.text9.text="首领战结算奖励"),this.setUI(n.length),this._list.datas=n}},a.prototype.setUI=function(t){var e=this,i=Math.floor(t/4)+(0<t%4?1:0);e.listBox.height=e._list.height=100*i+(0<i-1?i-1:0)*e._list.spaceY,e._list.vCount=i,e.img2.height=e._list.height+26,e.listBox.y=e.img2.y+13,e.textBox2.y=e.img2.y+e.img2.height,e.box1.y=e.textBox2.y+e.textBox2.height,e.height=e.box1.y+e.box1.height+31,e.img1.height=e.height,1<e.inx&&(e.img1.height-=56),e._list.pos(0,0)},a.prototype.close=function(){o.prototype.close.call(this)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),o.prototype.destroy.call(this,t)},n=a,t.TeamWarfareRankRewardItem1=n}(modules=modules||{}),function(t){var s,o,e;function i(){var t=o.call(this)||this;return t._inx=0,t.str=["魔王挑战","祝融试炼"],t.str1=["战队合力击败BOSS获得奖励","挂机击败小怪获得奖励"],t.str2=["welfare_place/image_fd_06.png","welfare_place/image_fd_04.png"],t}s=t.team_warfare||(t.team_warfare={}),o=ui.TeamWarfareseeItemUI,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4]},i.prototype.sureBtnHandler=function(){t.dungeon.DungeonCtrl.instance.getJoinAward(this._inx)},i.prototype.setData=function(t){if(o.prototype.setData.call(this,t),t){var e=t[0],i=t[1];this.text2.text=this.str[e-1],this.text1.text=this.str1[e-1],this.img1.skin=this.str2[e-1];var n=s.TeamWarfareModel.instance.fuDiDateTable[i];this.showRewards(n,e)}},i.prototype.showRewards=function(t,e){for(var i=0;i<this._taskBase.length;i++)this._taskBase[i].visible=!1;for(i=0;i<t.length;i++){var n=null;1===e&&i<4?n=this._taskBase[i]:2===e&&4<=i&&(n=this._taskBase[i-4]),n&&(n.dataSource=t[i],n.visible=!0)}},i.prototype.destroy=function(t){void 0===t&&(t=!0),this._taskBase=this.destroyElement(this._taskBase),o.prototype.destroy.call(this,t)},e=i,s.TeamWarfareseeItem=e}(modules=modules||{}),function(s){var o,e,t;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._arrStr=["较近","中等","较远"],t._arrColorStr=["#50ff28","#0F81F5","#FF3E3E"],t}o=s.team_warfare||(s.team_warfare={}),e=ui.TeamWarfareSportsCopyItemUI,__extends(i,e),i.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.xuanZeImg.visible=t},i.prototype.onEvt=function(){e.prototype.onEvt.call(this)},i.prototype.setData=function(t){t?(this._occ=t,this.visible=!0,this.showUI(),Laya.timer.loop(1e3,this,this.setUI),this.setUI()):this.visible=!1},i.prototype.isValidRadius=function(t,e,i){var n=MapUtils.getRealPosition(e[0],e[1]),s=t.localPosition;return MapUtils.testDistance(n.x,-n.y,s.x,s.y,i)},i.prototype.setUI=function(){var n=this;if(this._occ){var t=s.team_warfare.TeamWarfareModel.instance.tableCollectionPosByOcc[this._occ],e=function(t){var e=GameCenter.instance.getRole(s.player.PlayerModel.instance.actorId);if(e&&e.property){var i=e.property.get("transform");return n.isValidRadius(i,t,o.TeamWarfareModel.instance.ValidRadiusArr[0])?1:n.isValidRadius(i,t,o.TeamWarfareModel.instance.ValidRadiusArr[1])?2:3}return 3}([t[1],t[2]]);this.text2.text=this._arrStr[e-1],this.text2.color=this._arrColorStr[e-1],2101001===this._occ?this.img.skin="team_warfare/icon_zdzl_03.png":this.img.skin="team_warfare/icon_zdzl_02.png"}},i.prototype.showUI=function(){var t=s.config.NpcCfg.instance.getCfgById(this._occ),e=s.team_warfare.TeamWarfareModel.instance.tableCollectionPosByOcc[this._occ];this.nameText.text=t[4]+"("+e[4]+"积分/个)"},i.prototype.close=function(){Laya.timer.clearAll(this),e.prototype.close.call(this)},t=i,o.TeamWarfareSportsCopyItem=t}(modules=modules||{}),function(t){var a,e,i;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.arrStr=["红","蓝","橙"],t.arrColorStr=["#FF3E3E","#0F81F5","#FFEC7C"],t.arrColorStr1=["team_warfare/image_zdzl_bg21.png","team_warfare/image_zdzl_bg22.png","team_warfare/image_zdzl_bg23.png"],t}a=t.team_warfare||(t.team_warfare={}),e=ui.TeamWarfareSportsCopyPlayerItemUI,__extends(n,e),n.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.xuanZeImg.visible=t},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._dates=t,this.xuanZeImg.visible=!1,t?this.showUI():this.visible=!1},n.prototype.showUI=function(){var t,e=this._dates,i=e[5][5],n=e[5][26],s=a.TeamWarfareModel.instance.copyMatchInfoWarId.indexOf(n);this.nameText.text=i;var o=a.TeamWarfareModel.instance.getBanYunOccById(e);this.text2.text=""+this.arrStr[s],this.text2.color="#FFFFFF",this.img1.skin=this.arrColorStr1[s],3<=(t=e[5][13]/PlayerModel.instance.fight)?(this.text1.text="(超强)",this.text1.color=CommonUtil.getColorByQuality(4)):1.5<=t?(this.text1.text="(强者)",this.text1.color=CommonUtil.getColorByQuality(3)):.8<=t?(this.text1.text="(均等)",this.text1.color=CommonUtil.getColorByQuality(2)):(this.text1.text="(弱小)",this.text1.color=CommonUtil.getColorByQuality(1)),this.img.skin=o?2===o?"team_warfare/icon_zdzl_03.png":"team_warfare/icon_zdzl_02.png":"",CommonUtil.adaptationImgAndText([[this.box,2,0],[this.nameText,1,0],[this.text1,1,0]],this.width,3,"left",[3,2])},i=n,a.TeamWarfareSportsCopyRightPlayerItem=i}(modules=modules||{}),function(t){var e,a,i;function n(){return a.call(this)||this}e=t.team_warfare||(t.team_warfare={}),a=ui.TeamWarfareRankItemUI,__extends(n,a),n.prototype.setData=function(t){a.prototype.setData.call(this,t);var e="",i=0,n=t[0],s=t[1];if(this.notplaylisttxt.text="轮空",null!=s&&0<s[0]){this.text5.visible=this.notplaylisttxt.visible=!1,this.box1.visible=!0,e=s[2],i=s[3];var o=s[1];this.nameTxt.text=e,this.scoreTxt.text=""+i,o=0===o?1:o,this.img.skin="assets/icon/warband/"+o+".png"}else this.text5.visible=this.notplaylisttxt.visible=!0,this.box1.visible=!1;1===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+n),CommonUtil.adaptationImgAndText([[this.img,2,0],[this.nameTxt,1,0]],this.box1.width,0,"center")},i=n,e.TeamWarfareSportsCopyWinItem=i}(modules=modules||{}),function(o){var a,r,t;function e(){return null!==r&&r.apply(this,arguments)||this}a=o.team_warfare||(o.team_warfare={}),r=ui.TeamWarfareTeamItemUI,__extends(e,r),e.prototype.setData=function(t){if(r.prototype.setData.call(this,t),this.isMyFaction.visible=this.iconImg.visible=!1,this.bgImg2.visible=this.nameText.visible=this.notImg.visible=!0,this.nameText.text="虚位以待",this.bgImg1.visible=1===this._isOne,this.bgImg3.visible=2===this._isOne,t){this.notImg.visible=!1,this.iconImg.visible=this.nameText.visible=!0;var e=t[2];e=o.chat.ChatModel.instance.wordReplace(e);var i=t[1],n=t[0];if(i=i||1,this.iconImg.skin=i?CommonUtil.getWarBandIcon(i):"",0===n&&e.length<=0)this.nameText.text="轮空",this.iconImg.visible=!1;else if(0===n&&0<e.length){var s=a.TeamWarfareModel.instance.getWarCopyState();7===s||8===s?this.nameText.text="战队已解散":(this.nameText.text=""+e,this.iconImg.visible=!0)}else this.nameText.text=""+e,this.iconImg.visible=!0;this.isMyFaction.visible=!this._isOne&&0<n&&n===o.warband.WarbandModel.instance.warbandId}},e.prototype.setUI=function(t){void 0===t&&(t=0),this._isOne=t,this.bgImg1.visible=1===this._isOne,this.bgImg3.visible=2===this._isOne},t=e,a.TeamWarfareTeamItem=t}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.currencyItem._type=1,t}e=t.team_warfare||(t.team_warfare={}),i=ui.TeamWarfareWinItem1UI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.hurtRewardBtn,this,this.hurtRewardBtnHandler).onAutoClick(this.rankBtn,this,this.rankBtnHandler),this.regAutoRP(this.rpImg,["teamWarfareRP1"])},s.prototype.onOpened=function(){i.prototype.onOpened.call(this)},s.prototype.hurtRewardBtnHandler=function(){WindowManager.instance.open(1422)},s.prototype.rankBtnHandler=function(){WindowManager.instance.open(1425)},s.prototype.close=function(){i.prototype.close.call(this)},s.prototype.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t)},n=s,e.TeamWarfareItem1=n}(modules=modules||{}),function(t){var h,e,i,n,s;function o(){var t=e.call(this)||this;return t.currencyItem._type=2,t}h=t.team_warfare||(t.team_warfare={}),i=t.common.SimpleList,n=Laya.Event,e=ui.TeamWarfareWinItem2UI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._listGroup=i.create(h.TeamWarfareGroupItem,124,41,1,3,0,0),this.listGroupBox.addChild(this._listGroup),this._listGroup.size(372,41),this._listGroup.pos(0,0,!0),this._listGroup.visible=!0,this.itemArr=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9],this.imgArr=[this.imgLu1,this.imgLu2,this.imgLu3,this.imgLu4,this.imgLu5,this.imgLu6,this.imgLu7,this.imgLu8,this.imgLu9,this.imgLu10,this.imgLu11,this.imgLu12],this.imgArrVs=[this.vsImg1,this.vsImg2,this.vsImg3,this.vsImg4]},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._listGroup,n.SELECT,this,this.changeHandler),this.onAutoGlobalEvt("UPDATE_WARBAND_WARINFO_LIST",this,this.showKnockoutBoxUI1),this.onAutoGlobalEvt("WARBAND_MESSAGE_UPDATE",this,this.showKnockoutBoxUI1),this.onAutoGlobalEvt("WARBAND_INFO_UPDATE",this,this.showKnockoutBoxUI1),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.showKnockoutBoxUI1)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._listGroup.datas=[[1,1],[1,2],[1,3]],console.log("我得战队在哪一组："+h.TeamWarfareModel.instance.isMyFactinGroup1),0<h.TeamWarfareModel.instance.isMyFactinGroup1?this._listGroup.selectedIndex=h.TeamWarfareModel.instance.isMyFactinGroup1-1:this._listGroup.selectedIndex=0},o.prototype.showKnockoutBoxUI1=function(){if(-1!==this._listGroup.selectedIndex){var t=this._listGroup.selectedIndex+1,e=h.TeamWarfareModel.instance.getChampionDate(t),i=h.TeamWarfareModel.instance.getEightStrongDate(t),n=h.TeamWarfareModel.instance.getWarCopyState(),s=DungeonModel.instance.getCopySceneStateByType(56);0===i.length&&9===n&&GlobalData.serverTime<s[3]?(this.box1.visible=!1,this.box2.visible=!0):(this.box1.visible=!0,this.box2.visible=!1),this.item10.setUI(1),this.item10.data=e,this.imgLu13.visible=null!=e;for(var o=0;o<this.itemArr.length;o++)(r=this.itemArr[o]).data=i[o];var a=h.TeamWarfareModel.instance.getAllWin(t);for(o=0;o<this.imgArr.length;o++){var r;(r=this.imgArr[o]).visible=1===a[o]||3===a[o],r.gray=3===a[o]}var l=h.TeamWarfareModel.instance.battlesTableVS[t];for(l=l||[],o=0;o<this.imgArrVs.length;o++)this.imgArrVs[o].visible=!1;for(o=0;o<this.imgArrVs.length;o++)this.imgArrVs[o].visible=!!l[o]&&l[o]}},o.prototype.changeHandler=function(){-1!=this._listGroup.selectedIndex&&(this.showKnockoutBoxUI1(),h.TeamWarfareCtrl.instance.WarbandWarInfoList())},o.prototype.close=function(){e.prototype.close.call(this)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._listGroup=this.destroyElement(this._listGroup),e.prototype.destroy.call(this,t)},s=o,h.TeamWarfareItem2=s}(modules=modules||{}),function(t){var h,e,i;function n(){var t=e.call(this)||this;return t.currencyItem._type=3,t}h=t.team_warfare||(t.team_warfare={}),e=ui.TeamWarfareWinItem3UI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.itemArr=[this.item1,this.item2,this.item3],this.imgArr=[this.imgLu1,this.imgLu2,this.imgLu3]},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_WARBAND_WARINFO_LIST",this,this.showKnockoutBoxUI1),this.onAutoGlobalEvt("WARBAND_MESSAGE_UPDATE",this,this.showKnockoutBoxUI1),this.onAutoGlobalEvt("WARBAND_INFO_UPDATE",this,this.showKnockoutBoxUI1),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.showKnockoutBoxUI1)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showKnockoutBoxUI1()},n.prototype.showKnockoutBoxUI1=function(){var t=h.TeamWarfareModel.instance.getChampionDate(4);this.item4.setUI(2),this.item4.data=t,this.imgLu4.visible=null!=t;var e=h.TeamWarfareModel.instance.getEightStrongDate(4),i=h.TeamWarfareModel.instance.getWarCopyState(),n=DungeonModel.instance.getCopySceneStateByType(56);0===e.length&&9===i&&GlobalData.serverTime<n[3]?(this.box1.visible=!1,this.box2.visible=!0):(this.box1.visible=!0,this.box2.visible=!1);for(var s=0;s<this.itemArr.length;s++)(a=this.itemArr[s]).data=e[s];var o=h.TeamWarfareModel.instance.getAllWin(4);for(s=0;s<this.imgArr.length;s++){var a;(a=this.imgArr[s]).visible=1===o[s]||3===o[s],a.gray=3===o[s]}this.vsImg.visible=!1;var r=h.TeamWarfareModel.instance.getRound(),l=h.TeamWarfareModel.instance.getState();this.vsImg.visible=3===r&&l},n.prototype.close=function(){e.prototype.close.call(this)},n.prototype.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t)},i=n,h.TeamWarfareItem3=i}(modules=modules||{}),function(h){var p,e,c,t;function i(){var t=e.call(this)||this;return t._isFirst=!1,t}p=h.team_warfare||(h.team_warfare={}),c=h.common.CustomClip,e=ui.TeamWarfareWinItem4UI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.creatEffect(),CommonUtil.setHTMLPro(this.timeTxtHTML,"#50ff28","SimHei",24,"center"),this.timeTxtHTML.innerHTML=""},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.guessBox,this,this.guessBoxHandler).onAutoClick(this.createRoomBtn,this,this.createRoomBtnHandler).onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoGlobalEvt("UPDATE_WARBAND_WARINFO_LIST",this,this.showPublicBoxUI),this.onAutoGlobalEvt("UPDATE_WARBAND_WAR_ROUND_INFO",this,this.showPublicBoxUI),this.onAutoGlobalEvt("WARBAND_WARBOSS_HURT_DRAW_INFO_REPLY",this,this.showPublicBoxUI),this.onAutoGlobalEvt("WARBAND_WAR_WORSHIP_TIMES",this,this.showPublicBoxUI),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this,this.setUI),2===this._type&&this.regAutoRP(this.rpImg1,["teamWarfareRP7"]),3===this._type&&this.regAutoRP(this.rpImg1,["teamWarfareRP4"])},i.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)939==t[e]&&this.setUI()},i.prototype.setUI=function(){p.TeamWarfareCtrl.instance.WarbandWarInfoList(),this.showPublicBoxUI()},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.guessBox.visible=1!=this._type,this.helpBtn.visible=!0,1===this._type?(this.helpBtn.pos(537,3),this.createRoomBtn.pos(215,0),this.isEnrollText.y=-11,this.timeTxtHTML.y=-40,this.rpImg.pos(378,0)):2===this._type?(this.helpBtn.pos(520,22),this.createRoomBtn.pos(215,12),this.isEnrollText.y=24,this.timeTxtHTML.y=-21,this.rpImg.pos(378,12),this.guessBox.pos(49,3)):3===this._type&&(this.helpBtn.pos(531,15),this.createRoomBtn.pos(217,-1),this.isEnrollText.y=24,this.timeTxtHTML.y=-41,this.rpImg.pos(380,-1),this.guessBox.pos(48,-13)),this._btnClip.pos(this.createRoomBtn.x-6,this.createRoomBtn.y-8,!0),this.showPublicBoxUI()},i.prototype.showPublicBoxUI=function(){var t=p.TeamWarfareModel.instance.getWarCopyState();switch(c.thisStop(this._btnClip),this.isEnrollText.visible=!1,this._type){case 1:this.isEnrollText.text="首领战已结束";break;case 2:this.isEnrollText.text="争夺战已结束";break;case 3:this.isEnrollText.text="巅峰战已结束"}var e="";if(this.createRoomBtn.label="进入",1===this._type)1===t?(e="周"+h.union_war.UnionWarModel.instance.getStr(p.TeamWarfareModel.instance.bossCopyDay)+"凌晨5点开启首领战",this.timeTxtHTML.visible=this.createRoomBtn.visible=!0,this.isEnrollText.visible=!1):5<t?(e="<span style='color:#ff3e3e'>本次首领战已结束</span>",this.timeTxtHTML.visible=this.createRoomBtn.visible=!1,this.isEnrollText.visible=!0):(e=0<p.TeamWarfareModel.instance.surplusTime?"剩余挑战时长:"+CommonUtil.msToMMSS(p.TeamWarfareModel.instance.surplusTime):"<span style='color:#ff3e3e'>剩余挑战时长:"+CommonUtil.msToMMSS(p.TeamWarfareModel.instance.surplusTime)+"</span>",this.timeTxtHTML.visible=this.createRoomBtn.visible=!0,this.isEnrollText.visible=!1,3===t&&0<p.TeamWarfareModel.instance.surplusTime&&c.thisPlay(this._btnClip));else if(t<7){var i=h.union_war.UnionWarModel.instance.getWarCopyTimeStr(19);if(2===this._type)e="周"+h.union_war.UnionWarModel.instance.getStr(i[0])+i[1]+"开启争夺战";else{var n=36e5*(o=h.config.SceneLimittimeCfg.instance.getCfgById(19)[6])[0]+6e4*o[1]+p.TeamWarfareModel.instance.timeOne,s=CommonUtil.msToHHMM(n);e="周"+h.union_war.UnionWarModel.instance.getStr(i[0])+s+"开启巅峰战"}this.timeTxtHTML.visible=this.createRoomBtn.visible=!0,this.isEnrollText.visible=!1}else if(7===t||8===t){var o,a=p.TeamWarfareModel.instance.getRound(!1);if(i=h.union_war.UnionWarModel.instance.getWarCopyTimeStr(19),2===this._type)e="今日"+i[1]+"开启争夺战";else n=36e5*(o=h.config.SceneLimittimeCfg.instance.getCfgById(19)[6])[0]+6e4*o[1]+p.TeamWarfareModel.instance.timeOne,e="今日"+(s=CommonUtil.msToHHMM(n))+"开启巅峰战";this.timeTxtHTML.visible=this.createRoomBtn.visible=!0,this.isEnrollText.visible=!1,8===t&&p.TeamWarfareModel.instance.isCanSai()&&(2===this._type&&a<=2?c.thisPlay(this._btnClip):3===this._type&&3===a&&p.TeamWarfareModel.instance.isJueSai()&&null===p.TeamWarfareModel.instance.getChampionDate(4)&&c.thisPlay(this._btnClip)),2<a&&2===this._type&&(e="争夺战已结束",this.timeTxtHTML.visible=!1,c.thisStop(this._btnClip),this.isEnrollText.visible=!0,this.createRoomBtn.visible=!1),3<a&&3===this._type&&(e="巅峰战已结束",this.timeTxtHTML.visible=!1,c.thisStop(this._btnClip))}else this.timeTxtHTML.visible=!1,c.thisStop(this._btnClip),this.isEnrollText.visible=!0,this.createRoomBtn.visible=!1,e=2===this._type?"争夺战已结束":"巅峰战已结束";3===this._type&&p.TeamWarfareModel.instance.isHaveMoBai()&&8!=t&&7!=t&&3!=t&&3===this._type&&(this.createRoomBtn.label="膜拜",this.isEnrollText.visible=!1,this.createRoomBtn.visible=!0,p.TeamWarfareModel.instance.isHaveMoBai()&&p.TeamWarfareModel.instance.isMoBai()&&c.thisPlay(this._btnClip)),this.timeTxtHTML.innerHTML=e,Laya.timer.clear(this,this.loppHearl);var r=p.TeamWarfareModel.instance.getRound();if(8===t){if(4===r||3===r&&p.TeamWarfareModel.instance.getState(!1)&&p.TeamWarfareModel.instance.isMyGroupOver()){var l=DungeonModel.instance.getCopySceneStateByType(56);l&&(p.TeamWarfareModel.instance.nextTime=l[3])}if(2===this._type&&2<r)return;if(3===this._type&&r<=2)return;p.TeamWarfareModel.instance.nextTime>GlobalData.serverTime&&1<=r&&r<=4&&(Laya.timer.loop(1e3,this,this.loppHearl),this.loppHearl())}},i.prototype.loppHearl=function(){if(p.TeamWarfareModel.instance.nextTime>GlobalData.serverTime){var t=p.TeamWarfareModel.instance.getState(!1),e=p.TeamWarfareModel.instance.getRound(!1),i=CommonUtil.timeStampToMMSS(p.TeamWarfareModel.instance.nextTime);1!==e||t?1===e&&t?this.timeTxtHTML.innerHTML=3===this._type?"巅峰战"+i+"后开启":"争夺战半决赛"+i+"后结束":2!==e||t?2===e&&t?this.timeTxtHTML.innerHTML=3===this._type?"巅峰战"+i+"后开启":"争夺战决赛"+i+"后结束":3!==e||t?3===e&&t?p.TeamWarfareModel.instance.isMyGroupOver()?this.timeTxtHTML.innerHTML=i+" 后发放奖励":this.timeTxtHTML.innerHTML="巅峰战"+i+"后结束":4!==e||t||(this.timeTxtHTML.innerHTML=i+" 后发放奖励"):this.timeTxtHTML.innerHTML="巅峰战"+i+"后开启":this.timeTxtHTML.innerHTML=3===this._type?"巅峰战"+i+"后开启":"争夺战决赛"+i+"后开启":this.timeTxtHTML.innerHTML=3===this._type?"巅峰战"+i+"后开启":"争夺战半决赛"+i+"后开启"}else this.showPublicBoxUI()},i.prototype.guessBoxHandler=function(){var t=p.TeamWarfareModel.instance.getWarCopyState(),e=p.TeamWarfareModel.instance.getEightStrongDate(1);8!=t||0===e.length?CommonUtil.noticeError(0,2===this._type?"争夺战开启后才能进行竞猜":"巅峰战开启后才能竞猜"):WindowManager.instance.open(1421)},i.prototype.createRoomBtnHandler=function(){var t=p.TeamWarfareModel.instance.getWarCopyState();if(1===this._type){if(-1===h.warband.WarbandModel.instance.leaderId)return CommonUtil.noticeError(0,"未加入战队,请先加入战队!",!0),void WindowManager.instance.open(764);if(3!=t||!p.TeamWarfareModel.instance.isOpenBoss)return void CommonUtil.noticeError(0,"未到开启时间",!0);0<p.TeamWarfareModel.instance.surplusTime?h.dungeon.DungeonCtrl.instance.reqEnterScene(4301):CommonUtil.noticeError(0,"剩余挑战时长不足",!0)}else if(t<8)p.TeamWarfareModel.instance.isHaveMoBai()&&8!=t&&7!=t&&3!=t?2===this._type?CommonUtil.noticeError(0,"未到开启时间",!0):WindowManager.instance.open(1423):CommonUtil.noticeError(0,"未到开启时间",!0);else if(8===t){var e=p.TeamWarfareModel.instance.getRound(!1);if(3===this._type&&3!=e)return p.TeamWarfareModel.instance.isMyGroupOver()?void CommonUtil.noticeError(0,"本次战队逐鹿已结束"):void CommonUtil.noticeError(0,"巅峰战时间未到",!0);if(-1===h.warband.WarbandModel.instance.leaderId)return CommonUtil.noticeError(0,"未加入战队,请先加入战队!",!0),void WindowManager.instance.open(764);if(!p.TeamWarfareModel.instance.isCanSai()&&2===this._type)return void CommonUtil.noticeError(0,"本次无缘争夺战，请下次努力");if(!p.TeamWarfareModel.instance.isJueSai()&&3===this._type)return void CommonUtil.noticeError(0,"本次无缘巅峰战，请下次努力");if(p.TeamWarfareModel.instance.isMyGroupOver())return void CommonUtil.noticeError(0,"本次战队逐鹿已结束，请耐心等待发放奖励");p.TeamWarfareCtrl.instance.ReqWarbandWarEnter()}else p.TeamWarfareModel.instance.isHaveMoBai()&&WindowManager.instance.open(1423)},i.prototype.helpBtnHandler=function(){1===this._type?CommonUtil.alertHelp(19071):2===this._type?CommonUtil.alertHelp(19072):CommonUtil.alertHelp(19073)},i.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loppHearl)},i.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},i.prototype.creatEffect=function(){this._btnClip=c.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChildAt(this._btnClip,2),this._btnClip.pos(this.createRoomBtn.x-6,this.createRoomBtn.y-8,!0),c.thisStop(this._btnClip)},t=i,p.TeamWarfareItem4=t}(modules=modules||{}),function(t){var e,i;function n(){this.openState=0,this.drawState=0,this.clickState=!1}e=t.three_seven_box||(t.three_seven_box={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.get37BoxInfoReply=function(t){this.drawState=t[1],this.openState=t[0],this.setActionOpen(),this.setRP(),GlobalData.dispatcher.event("THREE_SEVEN_BOX_UPDATE")},n.prototype.setActionOpen=function(){1===PlatParams.control.funcOpen[1025]&&2!=this.drawState&&1===this.openState?t.funcOpen.FuncOpenModel.instance.setActionOpen(1025,1):t.funcOpen.FuncOpenModel.instance.setActionOpen(1025,2)},n.prototype.setRP=function(){t.redPoint.RedPointCtrl.instance.setRPProperty("threeSevenBoxRP",1===this.drawState)},n.prototype.openDlog=function(){WindowManager.instance.open(1531)},i=n,e.ThreeSevenBoxModel=i}(modules=modules||{}),function(t){var e,i,s,n,o;function a(){var t=i.call(this)||this;return t._numArr=[t.num_1,t.num_2,t.num_3],t}e=t.tianshu||(t.tianshu={}),s=t.tianshu.TianshuModel,n=t.config.TianshuCfg,i=ui.TianshuPartItemUI,__extends(a,i),a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.iconImg,"click",this,this.onShowAlert)},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this._tianshuId=t[0],this._itemId=t[1],this._num=t[2],this.iconImg.skin=CommonUtil.getIconById(this._itemId),this.iconImg.scale(.85,.85),this.bgImg.skin="tianshu/q_"+n.instance.getTianshuQuality(this._tianshuId)+".png",this.partImg.skin="common/part_"+CommonUtil.getPartById(this._itemId)+".png",this.onUpdateInfo()},a.prototype.onUpdateInfo=function(){for(var t=[],e=s.instance.getEquipNum(this._tianshuId,this._itemId),i=0;i<3;i++){var n=this._numArr[i];n.getChildByName("light").visible=!1,i+1<=this._num?(n.visible=!0,t.push(n)):n.visible=!1,i+1<=e&&(n.getChildByName("light").visible=!0)}CommonUtil.centerChainArr(this.width,t,5),this.rp.visible=s.instance.checkTsEquipPartRp(this._tianshuId,this._itemId)},a.prototype.onShowAlert=function(){WindowManager.instance.open(1478,[this._tianshuId,this._itemId,this._num])},o=a,e.TianshuPartItem=o}(modules=modules||{}),function(c){var t,e,i,u,d,m,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=c.tianshu||(c.tianshu={}),i=Laya.Event,u=c.config.SkillPureCfg,d=c.config.TianshuCfg,m=c.tianshu.TianshuModel,e=ui.SoulNinghunSkillIconUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this)},s.prototype.close=function(){this._eff&&this._eff.stop(),e.prototype.close.call(this)},s.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.on(i.CLICK,this,this.clickHandler)},s.prototype.offEvt=function(){this.off(i.CLICK,this,this.clickHandler),e.prototype.offEvt.call(this)},s.prototype.clickHandler=function(){WindowManager.instance.openDialog(1461,[this._bookId,this._skillPureId])},s.prototype.setData=function(t){this._bookId=t[0],this._skillPureId=t[1],this.levBox.visible=!1;var e=u.instance.getCfgById(this._skillPureId);e&&(this.iconImg.skin="assets/icon/skill/"+e[6]+".png");var i=m.instance.getBookSkillId(this._bookId,this._skillPureId),n=i?i%1e4:0;this.levTxt.text=n.toString();var s=0==n?1e4*this._skillPureId+1:i+1;this.levBox.visible=0!=n,this.iconImg.gray=0==n;var o,a=m.instance.getTianshuLvl(this._bookId),r=d.instance.getSkillNeedLvl(this._bookId,s),l=d.instance.getSkillNeedItems(s),h=0,p=0;l&&0<l.length&&(o=l[0],h=l[1],p=c.common.CommonUtil.getPropCountById(o)),r&&r<=a&&h<=p?(this._eff||(this._eff=CommonUtil.creatEff(this,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0),this._eff.visible=!0),this._eff.play(),this.stateImg.visible=this._eff.visible=this.dotImg.visible=!0,this.stateImg.skin=0===n?"common/txt_xq_kjh.png":"common/txt_xq_ksj.png"):(this._eff&&(this._eff.visible=!1,this._eff.stop()),this.stateImg.visible=this.dotImg.visible=!1)},n=s,t.TianshuSkillItem=n}(modules=modules||{}),function(e){var t,i,n,s,o,a;function r(){return i.call(this)||this}t=e.trahman_boss||(e.trahman_boss={}),n=e.player.PlayerModel,s=e.rename.RenameModel,o=e.notice.SystemNoticeManager,i=ui.TrahmanBossCopyPlayerItemUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.layer=1},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName)},r.prototype.setSelected=function(t){if(this._playerId!=n.instance.actorId){if(t){if(e.faction.FactionModel.instance.isTongXianMeng(this._playerId))return void o.instance.addNotice("不可攻击同一仙盟玩家",!0);if(e.warband.WarbandModel.instance.isMyWarBandPeople(this._playerId))return void o.instance.addNotice("不可攻击同一战队玩家",!0);if(this._playerId===e.marry.MarryModel.instance.halfRoleID)return void o.instance.addNotice("不可攻击仙缘",!0)}i.prototype.setSelected.call(this,t),this.selectShow()}},r.prototype.selectShow=function(){this.selected?this.isSelect.visible=!0:this.isSelect.visible=!1},r.prototype.setData=function(t){i.prototype.setData.call(this,t),t?(this.visible=!0,this._infos=t,this._playerId=this._infos[0],this.selectShow(),0==this._infos[2]?(this.playerName.color="#ffffff",this.isOwnTxt.visible=!1):1==this._infos[2]?(this.playerName.color="#ffffff",this.isOwnTxt.visible=!0):2==this._infos[2]?(this.playerName.color="#e6372e",this.isOwnTxt.visible=!1):(this.playerName.color="#e6372e",this.isOwnTxt.visible=!0),this.playerName.text=this._infos[1]):this.visible=!1},r.prototype.updateName=function(){if(this._infos){var t=s.instance.updateNameReply;t&&t[0]===this._infos[0]&&(this.playerName.text=t[1])}},a=r,t.TrahmanBossCopyRightPlayerItem=a}(modules=modules||{}),function(s){var n,o,t,e;function i(){return null!==o&&o.apply(this,arguments)||this}n=s.trahman_boss||(s.trahman_boss={}),t=ui.TrahmanBossItemUI,o=t,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this._reviveTime=0},i.prototype.setSelected=function(t){o.prototype.setSelected.call(this,t),this.selectShow()},i.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateTime).onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.setRp).onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.setRp).onAutoGlobalEvt("DUNGEON_BOSS_TIMES_UPDATE",this,this.setRp).onAutoGlobalEvt("BORN_LV_UPDATE",this,this.setRp).onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.setRp)},i.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),o.prototype.offEvt.call(this)},i.prototype.close=function(){o.prototype.close.call(this),this.rpImg.visible=!1},i.prototype.setData=function(t){o.prototype.setData.call(this,t),this._bossInfo=t,this._bossId=this._bossInfo[3];var e=s.config.MonsterResCfg.instance.getCfgById(this._bossId)[3];this.bossIconImg.skin=e?"assets/icon/monster/"+e+".png":"assets/icon/monster/310001.png";var i=s.config.MonsterResCfg.instance.getMonsterLevel(this._bossId),n=s.config.MonsterResCfg.instance.getMonsterName(this._bossId);this.bossName.text="Lv."+i+" "+n,this.stageNum.value=this._bossInfo[5].toString(),this._isDead=!1,this.timeToRevive.visible=!1,Laya.timer.clear(this,this.loopHandler),this.updateTime(),this.selectShow()},i.prototype.updateTime=function(){if(this.setRp(),!n.TrahmanBossModel.instance.isOpenTraHmanBoss())return this.timeToRevive.visible=!1,void Laya.timer.clear(this,this.loopHandler);if(1!=n.TrahmanBossModel.instance.isOpenBoss(this._bossId))return this.timeToRevive.visible=!1,void Laya.timer.clear(this,this.loopHandler);var t=s.bossHome.BossHomeModel.instance.getBossSeversInfoById(this._bossId);if(t){var e=t[2];if(e[0]){Laya.timer.clear(this,this.loopHandler),this._reviveTime=e[2];var i=this._reviveTime-GlobalData.serverTime;if(this.timeToRevive.visible=!0,i<=0)return void(this.timeToRevive.text="等待复活");this.setTime(i),this._isDead=!0,Laya.timer.loop(1e3,this,this.loopHandler)}else e[0]||(this._isDead=!1,this.timeToRevive.visible=!1)}},i.prototype.setRp=function(){this.rpImg.visible=n.TrahmanBossModel.instance.getBossRp(this._bossId)},i.prototype.selectShow=function(){this.selected?(this.unselectBtn.visible=!1,this.selectBtn.visible=!0):(this.unselectBtn.visible=!0,this.selectBtn.visible=!1)},i.prototype.setTime=function(t){var e=Math.floor(t/36e5),i=Math.floor(t%36e5/6e4),n=Math.floor(t%6e4/1e3);this.timeToRevive.text=this.formateData(e)+":"+this.formateData(i)+":"+this.formateData(n)},i.prototype.loopHandler=function(){var t=this._reviveTime-GlobalData.serverTime;if(t<=0)return Laya.timer.clear(this,this.loopHandler),void(this.timeToRevive.visible=!1);this.setTime(t)},i.prototype.formateData=function(t){var e=t.toString();return e.length<2?"0"+e:e},e=i,n.TrahmanBossItem=e}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.daetArr=[["trahman_boss/icon_ftbs_01.png","trahman_boss/icon_ftbs_04.png"],["trahman_boss/icon_ftbs_02.png","trahman_boss/icon_ftbs_05.png"],["trahman_boss/icon_ftbs_03.png","trahman_boss/icon_ftbs_06.png"],["trahman_boss/icon_ftbs_03.png","trahman_boss/icon_ftbs_06.png"],["trahman_boss/icon_ftbs_03.png","trahman_boss/icon_ftbs_06.png"],["trahman_boss/icon_ftbs_03.png","trahman_boss/icon_ftbs_06.png"],["trahman_boss/icon_ftbs_03.png","trahman_boss/icon_ftbs_06.png"]],t}e=t.trahman_boss||(t.trahman_boss={}),n=ui.TrahmanBossItem1UI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.setRp).onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.setRp).onAutoGlobalEvt("DUNGEON_BOSS_TIMES_UPDATE",this,this.setRp).onAutoGlobalEvt("BORN_LV_UPDATE",this,this.setRp).onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.setRp)},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectShow()},o.prototype.selectShow=function(){this.selected?this.isSelectImg.visible=!0:this.isSelectImg.visible=!1},o.prototype.setData=function(t){if(i.prototype.setData.call(this,t),t){this._level=t;var e=this.daetArr[this._level-1];e&&(this.unselectBtn.skin=e[0],this.isSelectImg.skin=e[1]),this.setRp()}},o.prototype.setRp=function(){this.rpImg.visible=e.TrahmanBossModel.instance.getLevelRp(this._level)},s=o,e.TrahmanBossItem1=s}(modules=modules||{}),function(a){var t,e,i;function n(){this.nowNum=0,this.maxNUm=0,this.readyTick=0,this.timeStarr="",this.boooll=!0,this.isOpen=!1,this.maxNUm=a.config.BlendCfg.instance.getCfgById(97922)[1][0],this.timeStarr="06:00至次日03:00"}t=a.trahman_boss||(a.trahman_boss={}),e=a.born.BornModel,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selecOcc",{get:function(){var t=a.scene.SceneModel.instance.enterScene[3],e=a.scene.SceneModel.instance.enterScene[0],i=a.config.SceneBrahmaBossCfg.instance.getCfgByLvAndMpid(e,t);return i?i[3]:0},enumerable:!0,configurable:!0}),n.prototype.GetBrahmaBossPerInfoReply=function(t){this.nowNum=t[0],this.nowNum=this.nowNum<0?0:this.nowNum,this.readyTick=t[1]+GlobalData.serverTime,this.isOpen=0!=t[2],this.setRp(),GlobalData.dispatcher.event("GET_BRAHMA_BOSS_PERINFO_REPLY")},n.prototype.isHaveNum=function(){return 0<this.nowNum},n.prototype.isOpenTraHmanBoss=function(){var t=DungeonModel.instance.getCopySceneStateByType(57),e=!1;return t&&(e=2===t[2]),this.isOpen&&e},n.prototype.isOpenBoss=function(t){return this.isLv(t)?this.isLi(t)?1:3:2},n.prototype.isLv=function(t){return a.config.BossChallengeCondCfg.instance.getCfgById(t)[2]<=Math.floor(e.instance.lv/100)},n.prototype.isLi=function(t){for(var e=a.config.BossChallengeCondCfg.instance.getCfgById(t)[1],i=0;i<e.length;i+=2){var n=e[i],s=e[i+1],o=PlayerModel.instance.playerTotolTable[n];if((o=o||0)<s)return!1}return!0},n.prototype.checkIsFollowBoss=function(t){return DungeonModel.instance.isGuanZuBoss(t)},n.prototype.setRp=function(){a.redPoint.RedPointCtrl.instance.setRPProperty("trahmanBossRP",this.isChange())},n.prototype.isChange=function(t){void 0===t&&(t=!0);var e=a.funcOpen.FuncOpenModel.instance.getFuncIsOpen(971);return t?e&&this.isOpenTraHmanBoss()&&this.isHaveNum():e&&this.isOpenTraHmanBoss()},n.prototype.getLevelRp=function(t,e){if(void 0===e&&(e=!0),!this.isChange(e))return!1;for(var i=a.config.SceneBrahmaBossCfg.instance.getCfgByLevel(t),n=0;n<i.length;n++){var s=i[n];if(this.getBossRp(s[3],e))return!0}return!1},n.prototype.getBossRp=function(t,e){return void 0===e&&(e=!0),!(!t||!this.isChange(e)||(e||1!==this.isOpenBoss(t)||this.isDie(t))&&(!this.checkIsFollowBoss(t)||1!==this.isOpenBoss(t)||this.isDie(t)))},n.prototype.isDie=function(t){var e=DungeonModel.instance.getBossInfoById(t);if(e)return e[2][0]},n.prototype.selectTarget=function(){var t=a.trahman_boss.TrahmanBossModel.instance.selecOcc;t?(a.bossDungeon.BossDungeonModel.instance.selectLastBoss=t,PlayerModel.instance.selectTarget(1,t)):PlayerModel.instance.selectTarget(0,-1)},i=n,t.TrahmanBossModel=i}(modules=modules||{}),function(t){var I,e,B,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}I=t.weekCard||(t.weekCard={}),B=t.config.WeekCardCfg,i=ui.WeekCardItemUI,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.divTask.style.fontFamily="SimHei",this.divTask.style.fontSize=20,this.divTask.color="#3d5981"},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler)},Object.defineProperty(s.prototype,"state",{set:function(t){if(this._data=t){var e=t[0],i=t[1],n=I.WeekCardModel.instance.weekLv,s=I.WeekCardModel.instance.killBossTime,o=Math.max(1,n),a=B.instance.getTaskInfo(o,e);a||console.error("找不到配置：周卡的任务id:"+e+"、周卡的等级:"+o);var r=a[3][1],l=a[2],h=a[4]-i,p=Math.floor(s/l),c=Math.floor(i/r),u=!(!n||!s)&&c<p&&!!h,d=u?(p-c)*r:0,m=(d=Math.min(d,h))?"#168a17":"#ff3e3e",y=h?"#168a17":"#ff3e3e",f=a[3][0],g=CommonUtil.getItemCfgById(f)[1].toString(),_=CommonUtil.getItemQualityById(f),v="("+h+"/"+a[4]+")",b="<span style='color:"+CommonUtil.getColorByQuality(_)+"'>"+g+"</span>",T="<span style='color:"+y+"'>"+v+"</span>";this.divTask.innerHTML="当前可领取<span style='color:"+m+"'>"+d+"</span>个"+b+T;var C=a[3];this.item.dataSource=[C[0],d,0,null],h?u?u&&(this.btn.visible=!0,this.img.visible=!1,this.btn.label="领取",this.btn.skin="common/btn_tongyong_23.png",this.btn.labelColors="#9d5119",this.playEff()):(this.btn.visible=!0,this.img.visible=!1,this.btn.label="领取",this.btn.skin="common/btn_tongyong_24.png",this.btn.labelColors="#465460",this.stopEff()):(this.btn.visible=!1,this.img.visible=!0,this.img.skin="common/txt_commmon_ylq.png",this.stopEff())}},enumerable:!0,configurable:!0}),s.prototype.btnHandler=function(){var t=this._data[0];I.WeekCardCtrl.instance.getCardAward(t)},s.prototype.playEff=function(){this._btnClip||(this._btnClip=CommonUtil.creatEff(this.btn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(.8,.8,!0)),this._btnClip.play(),this._btnClip.visible=!0},s.prototype.stopEff=function(){this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1)},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},n=s,I.WeekCardItem=n}(modules=modules||{}),function(t){var e,d,m,i;function y(){this.tasks=[],this.vipEndTimeStamp=0,this.weekLv=-1,this.killBossTime=0}e=t.weekCard||(t.weekCard={}),d=t.redPoint.RedPointCtrl,m=t.config.WeekCardCfg,Object.defineProperty(y,"instance",{get:function(){return this._instance=this._instance||new y},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"isVip",{get:function(){return this.vipEndTimeStamp>GlobalData.serverTime},enumerable:!0,configurable:!0}),y.prototype.updateRP=function(){if(-1!=this.weekLv&&this.isVip&&this.killBossTime){var t=!1;for(var e in this.tasks){var i=parseInt(e),n=this.tasks[i],s=n[0],o=m.instance.getTaskInfo(this.weekLv,s);if(o){var a=o[3][1],r=n[1],l=y.instance.killBossTime,h=o[2],p=o[4]-r,c=Math.floor(l/h),u=Math.floor(r/a);if(this.weekLv&&l&&u<c&&p){t=!0;break}}}d.instance.setRPProperty("weekCardRP",t)}else d.instance.setRPProperty("weekCardRP",!1)},i=y,e.WeekCardModel=i}(modules=modules||{}),function(r){var l,h,t,e;function i(){return h.call(this)||this}l=r.welfare_place||(r.welfare_place={}),t=ui.HitEngineerStageAwardItemUI,h=t,__extends(i,h),i.prototype.initialize=function(){h.prototype.initialize.call(this),this._taskBase=[this.rewardBase1,this.rewardBase2,this.rewardBase3,this.rewardBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",26);for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;this._btnClip=CustomClip.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChildAt(this._btnClip,4),this._btnClip.pos(this.recBtn.x-6,this.recBtn.y-8,!0),CustomClip.thisStop(this._btnClip)},i.prototype.destroy=function(){this.StatementHTML=this.destroyElement(this.StatementHTML),this._taskBase=this.destroyElement(this._taskBase),this._btnClip=this.destroyElement(this._btnClip),h.prototype.destroy.call(this)},i.prototype.setData=function(t){h.prototype.setData.call(this,t);for(var e=l.WelfarePlaceModel.instance.getDrawListState(t),i=t[3],n=0;n<i.length;n+=2){var s=Math.floor(n/2);this._taskBase[s].dataSource=[i[n],i[n+1],0,null],this._taskBase[s]&&(this._taskBase[s].visible=!0)}var o=l.WelfarePlaceModel.instance.bossInfo[0],a=t[2];r.config.BlessedLandRewardCfg.instance.getLastIndexByLevel(l.WelfarePlaceModel.instance.bossInfo[4])<=o&&l.WelfarePlaceModel.instance.bossInfo[1]<=0||--o,this.StatementHTML.innerHTML=2!=e?"战队共同通关第<span style='color:#168a17'>"+a+"</span>层(<span style='color:#168a17'>"+o+"/"+a+"</span>)":"战队共同通关第<span style='color:#168a17'>"+a+"</span>层(<span style='color:#ff3e3e'>"+o+"/"+a+"</span>)",1===e?(CustomClip.thisPlay(this._btnClip),this.recBtn.visible=!0,this.HasBroughtImg.visible=!1):2===e?(CustomClip.thisStop(this._btnClip),this.recBtn.visible=!0,this.HasBroughtImg.visible=!1):3===e&&(CustomClip.thisStop(this._btnClip),this.recBtn.visible=!1,this.HasBroughtImg.visible=!0)},i.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this.recBtn,this,this.recHanlder)},i.prototype.recHanlder=function(){1===l.WelfarePlaceModel.instance.getDrawListState(this._data)?l.WelfarePlaceCtrl.instance.blessedLandStageReward(this._data[1]):r.notice.SystemNoticeManager.instance.addNotice("领取条件不足",!0)},e=i,l.WelfarePlaceAwardItem=e}(modules=modules||{}),function(r){var t,n,s,o,e;function a(){this.bossTime=0,this.drawList=[],this.searchId=-1,this.searchIds=[];for(var t=r.config.BlendCfg.instance.getCfgById(97705)[2],e=0,i=t.length;e<i;e++){for(var n=t[e].replace("[","").replace("]","").split("#"),s=[],o=0,a=n.length;o<a;o++)s.push(parseInt(n[o]));this.searchIds.push(s)}}t=r.welfare_place||(r.welfare_place={}),n=r.config.BlessedLandRewardCfg,s=r.redPoint.RedPointCtrl,o=r.config.BlessedLandStageRewardCfg,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.getBlessedLandCopyInfoReply=function(t){this.dungeonInfo=t,this.setRP(),GlobalData.dispatcher.event("WELFARE_DUNGEON_INFO_UPDATE")},a.prototype.getBlessedLandInfoReply=function(t){var e=this.bossInfo&&this.bossInfo[4]||-1;this.bossInfo=t,this.setRP(),0!=e&&0===this.bossInfo[4]?GlobalData.dispatcher.event("WELFARE_BOSS_PLACE_REMOVE"):GlobalData.dispatcher.event("WELFARE_BOSS_INFO_UPDATE")},a.prototype.getBlessedLandBossInfoReply=function(t){this.bossTime=t[0],this.setRP(),GlobalData.dispatcher.event("WELFARE_BOSS_TIME_INFO_UPDATE")},a.prototype.updateBlessedLandData=function(t){this.bossTime=t[1],this.bossInfo[0]=t[0],this.bossInfo[0]=t[2],this.setRP(),GlobalData.dispatcher.event("WELFARE_BOSS_TIME_INFO_UPDATE"),GlobalData.dispatcher.event("WELFARE_BOSS_INFO_UPDATE")},a.prototype.updateBlessedLandHurtRank=function(t){this.sceneBossHurtInfo=t,this.setRP(),GlobalData.dispatcher.event("WELFARE_BOSS_HURT_INFO_UPDATE")},a.prototype.getBossRecState=function(){var t=this.bossInfo[7],e=this.bossInfo[0],i=n.instance.getLastIndexByLevel(this.bossInfo[4]);return t===i?0===this.bossInfo[1]?2:1:i<t?3:t<e?2:0<this.bossTime?1:4},a.prototype.getBlessedLandStageRewardReply=function(t){this.drawList=t[0],this.setRP(),GlobalData.dispatcher.event("WELFARE_BOSS_STAGE_AWARD_UPDATE")},a.prototype.getDrawListState=function(t){var e=this.bossInfo[0],i=t[2];return r.config.BlessedLandRewardCfg.instance.getLastIndexByLevel(a.instance.bossInfo[4])<=e&&a.instance.bossInfo[1]<=0||--e,i<=e?-1===this.drawList.indexOf(t[1])?1:3:2},a.prototype.setRP=function(){if(!this.bossInfo||!n.instance.getCfgByLevelAndIndex(this.bossInfo[4],this.bossInfo[0]))return s.instance.setRPProperty("welfarePlaceBossRP",!1),void s.instance.setRPProperty("welfarePlacePawnRP",!1);var t=this.getBossRecState(),e=1===t||2===t;s.instance.setRPProperty("welfarePlaceBossRP",e||this.getBossAwardRp());var i=!1;this.dungeonInfo&&0<this.dungeonInfo[1]&&(i=!0),s.instance.setRPProperty("welfarePlacePawnRP",i)},a.prototype.getBossAwardRp=function(){var t=this.bossInfo;if(!t)return!1;var e=o.instance.cfgs[t[4]];for(var i in e)if(1===this.getDrawListState(e[i]))return!0;return!1},a.prototype.getWelfarePlaceEnterIsOpen=function(t){return void 0===t&&(t=!0),!!(this.bossInfo&&0<this.bossInfo[4])||(t&&r.notice.SystemNoticeManager.instance.addNotice("战队未获取福地，请参加战队逐鹿获取福地",!0),!1)},a.prototype.broadcastCopyIncomes=function(t){this.broadcastInfo=t,GlobalData.dispatcher.event("DUNGEON_BROADCAST_COPY_INCOME")},a.prototype.challengeHanlder=function(){0<a.instance.dungeonInfo[0]?(a.instance.searchId=-1,r.dungeon.DungeonCtrl.instance.reqEnterScene(4201,a.instance.bossInfo[4])):r.notice.SystemNoticeManager.instance.addNotice("今日已击败足够数量，请明日再来挑战",!0)},e=a,t.WelfarePlaceModel=e}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.yearEndRank||(t.yearEndRank={}),n=ui.YearEndDianfengAwardItemUI,s=t.common.SimpleList,o=t.bag.BaseItem,i=n,__extends(r,i),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create(o,100,100,2,1,0,0),this._list.size(400,100),this._list.scale(.8,.8),this.listCon.addChild(this._list)},r.prototype.setData=function(t){for(var e=t[4],i=[],n=0;n<e.length;n+=2)i.push([e[n],e[n+1],0,null]);this._list.datas=i;var s=t[3][0]==t[3][1];this.awardNameImg.skin="nian_end_happy/"+["txt_nzhk_dfzzj","txt_nzkh_dfwzj","txt_nzkh_dfryj"][this.index]+".png",this.rankHtml.innerHTML="<span style='color:#3a5385;font-size:24px;font-family:SimHei;'>巅峰排名第</span><span  style='color:#168a17;font-size:24px;font-family:SimHei;'>"+t[3][1]+"</span> <span style='color:#3a5385;font-size:24px;font-family:SimHei;'>"+(s?"名":"名及以上")+"</span>",this.tuhaoHtml.innerHTML="<span style='color:#3a5385;font-size:24px;font-family:SimHei;'>土豪值达到</span><span  style='color:#168a17;font-size:24px;font-family:SimHei;'>"+t[5]+"</span>"},a=r,e.YearEndDianfengAwardItem=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.yearEndRank||(t.yearEndRank={}),n=ui.YearEndRankAwardItemUI,s=t.common.SimpleList,o=t.bag.BaseItem,i=n,__extends(r,i),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create(o,100,100,2,1,8,0),this._list.size(600,100),this._list.scale(.8,.8),this.listCon.addChild(this._list)},r.prototype.setData=function(t){var e=[],i=[];switch(t.type){case 1:var n=t.cfg;n[2][0]==n[2][1]&&1==n[2][0]?this.rankText.text="第一名":this.rankText.text="第"+n[2][0]+"-"+n[2][1]+"名",i=n[3],this.rankImg.skin="nian_end_happy/image_nzkh_12.png";break;case 2:var s=t.cfg;this.rankText.text=s[2]+"幸运奖",i=s[3],this.rankImg.skin="nian_end_happy/image_nzkh_13.png";break;case 3:i=t.cfg[3],this.rankText.text="参与奖",this.rankImg.skin="nian_end_happy/image_common_light.png"}for(var o=0;o<i.length;o+=2)e.push([i[o],i[o+1],0,null]);this._list.x=40*-e.length,this._list.datas=e},a=r,e.YearEndRankAwardItem=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.yearEndRank||(t.yearEndRank={}),n=ui.YearEndRankItemUI,s=t.config.YearEndRankCfg,i=n,__extends(a,i),a.prototype.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t)},a.prototype.initialize=function(){i.prototype.initialize.call(this)},a.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.setRank(),t){this.hideText.visible=!1;var e=t[5];this.playerName.visible=this.tuhaoValText.visible=!0,e?(this.hideHead.visible=!0,this.head.visible=!1,this.hide()):(this.head.visible=!0,this.hideHead.visible=!1,this.show())}else this.setEmpty()},a.prototype.setEmpty=function(){this.head.visible=this.playerName.visible=this.tuhaoValText.visible=this.hideHead.visible=!1,this.hideText.visible=!0,this.index+1<=s.instance.maxRank?this.needText.text=s.instance.getCfgByRank(this.index+1)[4]+"":this.needText.text=s.instance.joinCfg[0][2]+""},a.prototype.setRank=function(){var t=this.index+1;t<=3?this.rankImg.skin="common/icon_common_"+["first","second","third"][this.index]+".png":this.rankClip.value=t+"",this.rankImg.visible=t<=3,this.commonRank.visible=!this.rankImg.visible},a.prototype.hide=function(){this.playerName.text="神秘土豪",this.tuhaoValText.text="土豪值:"+this.data[3]},a.prototype.show=function(){this.head.setInfo(this.data[6],this.data[2],this.data[7]),this.head.vipShowItem.setSVIPandVIP(this.data[8],this.data[8]),this.playerName.text=this.data[1],this.tuhaoValText.text="土豪值:"+this.data[3]},o=a,e.YearEndRankItem=o}(modules=modules||{}),function(t){var e,s,i;function n(){this.rankData=[],this.tuhao=0,this.rank=0,this.hiddenState=!1,this.typeId=0,this.crossDay=1}e=t.yearEndRank||(t.yearEndRank={}),s=t.player.PlayerModel,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateData=function(t){var e;e=[t[0],t[1],t[2]],this.rankData=e[0],this.typeId=e[1],this.crossDay=e[2];for(var i=0;i<this.rankData.length;i++)if(this.rankData[i][1]||(this.rankData[i][5]=!0),this.rankData[i][0]===s.instance.actorId){this.rank=this.rankData[i][4],this.tuhao=this.rankData[i][3];break}GlobalData.dispatcher.event("YEAR_END_RANK_UPDATE")},n.prototype.updateMyHide=function(t){this.hiddenState=t,GlobalData.dispatcher.event("YEAR_END_HIDE_UPDATE")},n.prototype.updateRankHide=function(t){for(var e=t[0],i=0;i<this.rankData.length;i++)if(this.rankData[i][0]===e){var n=this.rankData[i][5];this.rankData[i]=t,GlobalData.dispatcher.event("YEAR_END_RANK_UPDATE"),this.rankData[i][5]!=n&&e==s.instance.actorId&&(this.hiddenState=this.rankData[i][5],GlobalData.dispatcher.event("YEAR_END_HIDE_MY_UPDATE"));break}},n.prototype.onRank=function(){for(var t=0,e=this.rankData;t<e.length;t++)if(e[t][0]===s.instance.actorId)return!0;return!1},i=n,e.YearEndRankModel=i}(modules=modules||{});