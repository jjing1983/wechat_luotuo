"use strict";!function(t){var e,i;function n(){}e=t.core||(t.core={}),n.prototype.subscribe=function(t,e,i){return void 0===i&&(i=this),Channel.instance.subscribe(t,i,e),this},n.prototype.publish=function(t,e){return Channel.instance.publish(t,e),this},n.prototype.onGlobal=function(t,e,i,n){return void 0===i&&(i=this),GlobalData.dispatcher.on(t,i,e,n),this},i=n,e.BaseCtrl=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t;this._operatorActivityArr=new Array,this._cfgs=GlobalData.getConfig("action_open");for(var e=0,i=this._cfgs.length;e<i;e++)(t=this._cfgs[e])[5]&&this._operatorActivityArr.push(t)},n.prototype.getCfgById=function(e){var t=ArrayUtils.binarySearch(this._cfgs,function(t){return e-t[1]});return t<0?null:this._cfgs[t]},n.prototype.getOperatorCfg=function(){return this._operatorActivityArr},i=n,e.ActionOpenCfg=i}(modules=modules||{}),function(a){var r,e,t;function i(){}r=a.notice||(a.notice={}),e=utils.tween.TweenJS,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.addNotice=function(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=7),void 0===n&&(n=3e3),this._panel||(this._panel=new r.SystemNoticePanel),LayerManager.instance.getLayerById(i).addChild(this._panel);var s="";if("string"==(typeof t).toString())s=t;else for(var o=0;o<t.length;o++)s+=t[o];this._panel.setTxt(s,e?a.common.CommonUtil.getColorByQuality(5):a.common.CommonUtil.getColorByQuality(1),e),this._panel.pos(CommonConfig.viewWidth-this._panel.width>>1,500,!0),this.tween(n)},i.prototype.tween=function(t){this._tween&&(this._tween.stop(),this._panel.y=500),this._tween=e.create(this._panel).to({y:440},80).chain(e.create(this._panel).to({y:380},80).delay(t).onComplete(this.removeHandler.bind(this))).combine(!0).start()},i.prototype.removeHandler=function(){this._panel.removeSelf(),this._tween&&(this._tween.stop(),this._tween=null)},t=i,r.SystemNoticeManager=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.cfgs=GlobalData.getConfig("guide")},i=n,e.GuideCfg=i}(modules=modules||{}),function(t){var e,o,i;function n(){this._spriteTable={}}e=t.guide||(t.guide={}),o=t.config.GuideCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.initGuides=function(t){this.restGuides=[];var e=o.instance.cfgs;if(e){for(var i=0,n=e.length;i<n;i++){var s=e[i];-1===t.indexOf(s[0])&&this.restGuides.push(s)}GlobalData.dispatcher.event("GUIDE_REST_INITED")}},n.prototype.completeGuides=function(t){for(var e=0;e<this.restGuides.length;e++)-1!==t.indexOf(this.restGuides[e][0])&&(this.restGuides.splice(e,1),e--)},Object.defineProperty(n.prototype,"curGuide",{get:function(){return this._curGuide},set:function(t){this._curGuide=t,GlobalData.dispatcher.event("GUIDE_CUR_UPDATE")},enumerable:!0,configurable:!0}),n.prototype.registeUI=function(t,e){this._spriteTable[t]||(this._spriteTable[t]=e,GlobalData.dispatcher.event("GUIDE_REGISTE_UI",t))},n.prototype.removeUI=function(t){this._spriteTable[t]&&(this._spriteTable[t]=null,GlobalData.dispatcher.event("GUIDE_REMOVE_UI",t))},n.prototype.getUIByid=function(t){return this._spriteTable[t]},i=n,e.GuideModel=i}(modules=modules||{}),function(t){var e,i;function n(){this.isInMission=!1,this._items=[],this.monsters=[],this.humans=[],this.npcs=[],this._allRoleTable={},this._lastTime=GlobalData.serverTime,this._isshouci=!1,this._isshouciLv=!1,this.curShowEffPlayers=0,this.showEffTable={}}e=t.scene||(t.scene={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"enterScene",{get:function(){return this._enterScene},set:function(t){this._enterScene=t,GlobalData.dispatcher.event("SCENE_ENTER")},enumerable:!0,configurable:!0}),n.prototype.enterSceneHandler=function(t){var e=t[0];if(null!=e&&0<e.length){for(var i=0,n=e;i<n.length;i++){var s=n[i];this._items.push(s),this._allRoleTable[s[0]]=[3,s]}GlobalData.dispatcher.event("SCENE_ADD_ITEMS")}var o=t[1];if(null!=o&&0<o.length){for(var a=0,r=o;a<r.length;a++){var l=r[a];this.monsters.push(l),this._allRoleTable[l[0]]=[2,l]}GlobalData.dispatcher.event("SCENE_ADD_MONSTERS")}var h=t[2];if(null!=h&&0<h.length){for(var c=0,p=h;c<p.length;c++){var u=p[c];this.humans.push(u);var d=u[5][0],m=GameCenter.instance.getRole(d);d==PlayerModel.instance.actorId||m.property.get("syncNoEffect")||this.curShowEffPlayers++,this.showEffTable[d]=m.property.get("syncNoEffect")?1:0,this._allRoleTable[u[5][0]]=[1,u]}GlobalData.dispatcher.event("SCENE_ADD_HUMANS")}var f=t[3];if(null!=f&&0<f.length){for(var g=0,y=f;g<y.length;g++){var _=y[g];this.npcs.push(_),this._allRoleTable[_[0]]=[4,_]}GlobalData.dispatcher.event("SCENE_ADD_NPCS")}},n.prototype.leaveSceneHandler=function(t){this.removeObjs(t[0])},n.prototype.removeObjs=function(t){for(var e=!1,i=!1,n=!1,s=!1,o=0,a=t.length;o<a;o++){var r=t[o],l=this._allRoleTable[r];if(l){if(3===l[0]){for(var h=0,c=this._items.length;h<c;h++)if(r===this._items[h][0]){this._items.splice(h,1),e=!0;break}}else if(2===l[0]){for(h=0,c=this.monsters.length;h<c;h++)if(r===this.monsters[h][0]){this.monsters.splice(h,1),i=!0;break}}else if(1===l[0]){for(h=0,c=this.humans.length;h<c;h++)if(r===this.humans[h][5][0]){var p=this.humans[h][5][0];this.humans.splice(h,1),n=!0,p!=PlayerModel.instance.actorId&&0==this.showEffTable[p]&&(this.curShowEffPlayers--,delete this.showEffTable[p]);break}}else if(4===l[0])for(h=0,c=this.npcs.length;h<c;h++)if(r===this.npcs[h][0]){this.npcs.splice(h,1),s=!0;break}delete this._allRoleTable[r]}}e&&GlobalData.dispatcher.event("SCENE_REMOVE_ITEMS"),i&&GlobalData.dispatcher.event("SCENE_REMOVE_MONSTERS"),n&&GlobalData.dispatcher.event("SCENE_REMOVE_HUMANS"),s&&GlobalData.dispatcher.event("SCENE_REMOVE_NPCS")},n.prototype.getRoleByObjId=function(t){return this._allRoleTable[t]},i=n,e.SceneModel=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("scene")},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.SceneCfg=i}(modules=modules||{}),function(c){var t,r,e;function i(){this._isReply=!1,this._table={},this._platTable={},this._excludePlatTable={},this._platTable[627]=["9130qq"],this._platTable[632]=["9130qq"],this._excludePlatTable[224]=["tcy"],this._excludeIds=[251,286],this._festivalIds=[262,264,266,267,287,262,264,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,344,388,389,390,391,392,393,394,395,396,397,398,399,401,402,438,439,441,442,443,444,445,446,447,448,449,453,463,464,465,466,579,468,469,470,471,527,528,529,530,544,545,652,556,557,558,559,560,527,528,529,618,619,620,621,649,644,645,648,646,647,676,673,674,675,678,679,680,681,702,701,762,763,765,766,767,768,769,770,771,772,773,774,775,782,787,788,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,809,810,811,812,813,814,815,816,817,818,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,836,842,843,859,887,861,862,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,886,884,885,893,895,896,897,898,903,904,925,945,985,991,1004,1028,926,928,929,930,931,932,933,934,935,936,937,938,946,947,948,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,993,1010,1030,1020,1021,1011,1012,1013,1014,1015,1016,1017,1032,1033,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049];for(var t=0,e=this._festivalIds.length;t<e;t++)this._table[this._festivalIds[t]]=[this._festivalIds[t],2,0,0];for(t=0,e=this._excludeIds.length;t<e;t++)this._table[this._excludeIds[t]]=[this._excludeIds[t],2,0,0]}t=c.funcOpen||(c.funcOpen={}),r=c.config.ActionOpenCfg,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getActionOpenReply=function(t){var e=this.filterIds(t[0]);this.specialOpera(e),GlobalData.dispatcher.event("FUNC_OPEN_UPDATE",[e]),GlobalData.dispatcher.event("FUNC_OPEN_ASSIGN_REPLY",[e]),this._isReply=!0},i.prototype.updateActionOpen=function(t){var e=this.filterIds(t[0]);this.specialOpera(e),GlobalData.dispatcher.event("FUNC_OPEN_UPDATE",[e])},i.prototype.filterIds=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var s=t[i],o=s[0];if(-1===this._excludeIds.indexOf(o)&&-1===this._festivalIds.indexOf(o)){this._table[o]=s,243===o&&(this._table[o][1]=2),e.push(o),PlatParams.control&&PlatParams.control.funcOpen&&0===PlatParams.control.funcOpen[o]&&(s[1]=2);var a=this._platTable[o];a&&-1===a.indexOf(PlatParams.platform)&&(s[1]=2),(a=this._excludePlatTable[o])&&-1!==a.indexOf(PlatParams.platform)&&(s[1]=2),543===o&&(s[1]=2),1025===o&&c.three_seven_box.ThreeSevenBoxModel.instance.setActionOpen()}}return e},i.prototype.getFuncStateById=function(t){var e=this._table[t];return e?e[1]:-1},i.prototype.getFuncStateByDate=function(t){return this._table[t]},i.prototype.setActionOpen=function(t,e){var i=!1;this._table[t]&&this._table[t][1]==e&&(i=!0),this._table[t]=[t,e,0,0],i||GlobalData.dispatcher.event("FUNC_OPEN_UPDATE",[[t]])},i.prototype.getFuncNeedShow=function(t){if(0===t)return!0;var e=this.getFuncStateById(t);return 3===e||1===e},i.prototype.getFuncIsOpen=function(t){if(0===t)return!0;var e=1===this.getFuncStateById(t);return 846===t||847===t||848===t||849===t||850===t||851===t?e&&c.showEquip.ShowEquipModel.instance.isShowEquipOpen(t):e},i.prototype.getFuncOpenTipById=function(t){if((846===t||847===t||848===t||849===t||850===t||851===t)&&1===this.getFuncStateById(t)){var e=c.showEquip.ShowEquipModel.instance.getShowEquipOpenTips(t);if(e)return e}var i="",n=this._table[t];if(!n)return"活动已结束";var s=n[2],o=n[3];if(0<=s&&0<=o){var a=r.instance.getCfgById(t);a&&(i=a[6][s][o])}return i},i.prototype.specialOpera=function(t){if(!this.flag)for(var e=0,i=t;e<i.length;e++){var n=i[e];if(160==n||159==n||161==n||6==n||11==n)return this.flag=!0,c.faction.FactionCtrl.instance.getFactionInfo(),void c.faction.FactionCtrl.instance.getFactionPersonalInfo()}},i.prototype.getActionUnCondition=function(t){var e=c.config.ActionOpenCfg.instance.getCfgById(t);if(e){var i=this.getFuncOpenTipById(t),n=0,s=0,o=this._table[t];o&&(n=(n=o[2])<0?0:n,s=(s=o[3])<0?0:s);var a=e[3][n][s],r=a[0],l=a[1],h=void 0;switch(r){case 1:h=PlayerModel.instance.level;break;case 2:h=c.mission.MissionModel.instance.finishLv;break;case 3:h=PlayerModel.instance.openDay;break;case 4:h=c.vip.VipModel.instance.vipLevel;break;case 5:h=PlayerModel.instance.getDayNum();break;case 6:h=c.rune_copy.RuneCopyModel.instance.finishLv;break;case 7:break;case 8:h=c.born.BornModel.instance.lv;break;case 9:h=c.fly_up.FlyUpModel.instance.data[0];break;case 10:break;case 11:h=PlayerModel.instance.cDay}return 8===r?i+" ("+(0===h?"":"已达")+c.config.BornCfg.instance.getCfgByLv(h)[1]+")":i+"("+h+"/"+l+")"}},i.prototype.getUnConditionIsDay=function(t){var e=c.config.ActionOpenCfg.instance.getCfgById(t);if(e)for(var i=e[3],n=0;n<i.length;n++)for(var s=i[n],o=0;o<s.length;o++){var a=s[o],r=a[0],l=a[1],h=0;if(3===r||5===r||7===r||11===r){switch(r){case 3:h=PlayerModel.instance.openDay;break;case 5:h=PlayerModel.instance.getDayNum();break;case 7:break;case 11:h=PlayerModel.instance.cDay}if(h<l)return!0}}return!1},e=i,t.FuncOpenModel=e}(modules=modules||{}),function(t){var e,h,i;function n(){this._rpImgs=[],this._propertyNamesArr=[],this._propertyValueTable={},this._funcIdsTable={},this.setup(),this.registeFuncIds("petFeedSkillRP",[2]),this.registeFuncIds("petFeedMatRP",[2]),this.registeFuncIds("petRankSkillRP",[44]),this.registeFuncIds("petIllusionRP",[3]),this.registeFuncIds("petRefineMaterialRP",[4]),this.registeFuncIds("weaponFeedSkillRP",[12]),this.registeFuncIds("weaponFeedMatRP",[12]),this.registeFuncIds("weaponIllusionRP",[13]),this.registeFuncIds("weaponRankSkillRP",[45]),this.registeFuncIds("weaponRefineMaterialRP",[14]),this.registeFuncIds("talismanRP",[15]),this.registeFuncIds("intensiveRP",[17]),this.registeFuncIds("stoneRP",[18]),this.registeFuncIds("exerciseRP",[9]),this.registeFuncIds("bornRP",[26]),this.registeFuncIds("sevenDayGiftRP",[5]),this.registeFuncIds("magicArtRP",[11]),this.registeFuncIds("goldBodyRP",[16]),this.registeFuncIds("magicPositionRP",[10]),this.registeFuncIds("vipRP",[47]),this.registeFuncIds("vipNewRP",[230]),this.registeFuncIds("immortalsShengjiRP",[29]),this.registeFuncIds("immortalsHuanhuaJipinRP",[30]),this.registeFuncIds("immortalsHuanhuaZhenpinRP",[30]),this.registeFuncIds("immortalsHuanhuaJuepinRP",[30]),this.registeFuncIds("immortalsHuanhuateShuRP",[30]),this.registeFuncIds("immortalsFuhunRP",[31]),this.registeFuncIds("wingShengjiRP",[32]),this.registeFuncIds("wingHuanhuaJipinRP",[33]),this.registeFuncIds("wingHuanhuaZhenpinRP",[33]),this.registeFuncIds("wingHuanhuaJuepinRP",[33]),this.registeFuncIds("wingFuhunRP",[34]),this.registeFuncIds("dailyDungeonRP",[63]),this.registeFuncIds("monthCardRP",[40]),this.registeFuncIds("bigTowerRP",[21]),this.registeFuncIds("beastBossBxRP",[365]),this.registeFuncIds("beastBossCopyRP",[365]),this.registeFuncIds("beastBossWuXianCopyRP",[365]),this.registeFuncIds("multiBossRP",[20]),this.registeFuncIds("threeWorldsRP",[41]),this.registeFuncIds("bossHomeRP",[42]),this.registeFuncIds("shenYuBossRP1",[246]),this.registeFuncIds("singleBossRP",[1]),this.registeFuncIds("equipPartRP"),this.registeFuncIds("signRP",[7]),this.registeFuncIds("onlineGiftRP",[8]),this.registeFuncIds("composeRP",[27]),this.registeFuncIds("composeStoneRP",[27]),this.registeFuncIds("resolveRP",[28]),this.registeFuncIds("missionRP",[46]),this.registeFuncIds("treasureRP",[49]),this.registeFuncIds("firstPayRP",[51]),this.registeFuncIds("treasureExchangeRP",[81]),this.registeFuncIds("teamBattleRP",[43]),this.registeFuncIds("dailyDemonRP",[110]),this.registeFuncIds("runeCopyRP",[109]),this.registeFuncIds("daypayRP",[111]),this.registeFuncIds("cumulateRP",[112]),this.registeFuncIds("runeRP",[76]),this.registeFuncIds("runeResolvRP",[76]),this.registeFuncIds("runeComposeRP",[248]),this.registeFuncIds("zeroBuyOneRP",[117]),this.registeFuncIds("zeroBuyTwoRP",[117]),this.registeFuncIds("zeroBuyThreeRP",[117]),this.registeFuncIds("zeroBuyFourRP",[117]),this.registeFuncIds("zeroBuyEntranceRP",[117]),this.registeFuncIds("petFazhenJipinRP",[122]),this.registeFuncIds("petFazhenZhenpinRP",[122]),this.registeFuncIds("petFazhenJuepinRP",[122]),this.registeFuncIds("weaponFazhenJipinRP",[126]),this.registeFuncIds("weaponFazhenZhenpinRP",[126]),this.registeFuncIds("weaponFazhenJuepinRP",[126]),this.registeFuncIds("activityAllItemRP",[128]),this.registeFuncIds("yunMengBossRP",[142]),this.registeFuncIds("kuangHuanRP",[155]),this.registeFuncIds("kuangHuanLevelRP",[139]),this.registeFuncIds("kuangHuanPowarRP",[226]),this.registeFuncIds("investLoginRP",[153]),this.registeFuncIds("investRecruitRP",[154]),this.registeFuncIds("investGrowthRP",[121]),this.registeFuncIds("continuePayRP",[115]),this.registeFuncIds("cumulateRP",[112]),this.registeFuncIds("consumeRP",[118]),this.registeFuncIds("payRewardRP",[127]),this.registeFuncIds("dayconsumeRP",[146]),this.registeFuncIds("sprintRankXianQiRP",[125]),this.registeFuncIds("sprintRankLingChongRP",[132]),this.registeFuncIds("sprintRankShenBingRP",[133]),this.registeFuncIds("sprintRankXianYiRP",[134]),this.registeFuncIds("sprintRankFaBaoRP",[135]),this.registeFuncIds("sprintRankEquipmentRP",[136]),this.registeFuncIds("sprintRankFighitingRP",[137]),this.registeFuncIds("guShenRP",[130]),this.registeFuncIds("cumulate2RP",[140]),this.registeFuncIds("discountGiftPayRP",[127]),this.registeFuncIds("xunBao1",[81]),this.registeFuncIds("xunBao2",[81]),this.registeFuncIds("xunBao3",[81]),this.registeFuncIds("xunBao4",[81]),this.registeFuncIds("bagRP",[48]),this.registeFuncIds("smeltRP",[19]),this.registeFuncIds("shenqiRP",[189]),this.registeFuncIds("shangchengRP",[52]),this.registeFuncIds("shangdianRP",[52]),this.registeFuncIds("emailRP",[50]),this.registeFuncIds("rechargeRP",[50]),this.registeFuncIds("rankingListRP",[39]),this.registeFuncIds("rankingListRP1",[982]),this.registeFuncIds("rankingListRP2",[983]),this.registeFuncIds("tianTiRP",[129]),this.registeFuncIds("actionPreviewEnterRP",[156]),this.registeFuncIds("playerTitleRP",[163]),this.registeFuncIds("soaringRankRP",[164]),this.registeFuncIds("soaringCumulatePayRP",[168]),this.registeFuncIds("soaringDayConsumeRewardRP",[170]),this.registeFuncIds("soaringPanicBuyingGifRP",[171]),this.registeFuncIds("soaringSinglePayRP",[169]),this.registeFuncIds("soaringSpecialGiftRP",[172]),this.registeFuncIds("teaminvastion",[377]),this.registeFuncIds("everyDayRebateRP",[173]),this.registeFuncIds("equipmentZuHunRP",[192]),this.registeFuncIds("daZhaoRP",[249]),this.registeFuncIds("rotaryTablechongbangRP",[195]),this.registeFuncIds("rotaryTableSoaringRP",[250]),this.registeFuncIds("cumulatePayShenHunRP",[196]),this.registeFuncIds("cumulatePayTianZhuRP",[197]),this.registeFuncIds("loginRewardRP",[191]),this.registeFuncIds("rotaryTableJiuZhouRP",[217]),this.registeFuncIds("weekLoginRP",[211]),this.registeFuncIds("feedBackRP",[224]),this.registeFuncIds("announcementRP",[225]),this.registeFuncIds("payRankRP",[213]),this.registeFuncIds("invitationRP",[227]),this.registeFuncIds("shangchengRP",[53]),this.registeFuncIds("zxianYuBagPanelRP",[236]),this.registeFuncIds("zxianYuPanelRP",[233]),this.registeFuncIds("zxianYuStorePanelRP",[235]),this.registeFuncIds("zxianYuTreasurePanelRP",[234]),this.registeFuncIds("fashionShengJiRP",[174]),this.registeFuncIds("fashionShengJiMatRP",[174]),this.registeFuncIds("fashionHuanHuaJiPinRP",[175]),this.registeFuncIds("fashionHuanHuaZhenPinRP",[175]),this.registeFuncIds("fashionHuanHuaJuePinRP",[175]),this.registeFuncIds("fashionHuanHuaTeShuRP",[175]),this.registeFuncIds("fashionFuHunRP",[176]),this.registeFuncIds("tianZhuShengJiRP",[177]),this.registeFuncIds("tianZhuShengJiMatRP",[177]),this.registeFuncIds("tianZhuHuanHuaJiPinRP",[178]),this.registeFuncIds("tianZhuHuanHuaZhenPinRP",[178]),this.registeFuncIds("tianZhuHuanHuaJuePinRP",[178]),this.registeFuncIds("tianZhuFuHunRP",[179]),this.registeFuncIds("equipSuitRP_0",[194]),this.registeFuncIds("equipSuitRP_1",[194]),this.registeFuncIds("equipSuitRP_2",[194]),this.registeFuncIds("equipSuitRP_3",[194]),this.registeFuncIds("equipSuitRP_4",[194]),this.registeFuncIds("equipSuitRP_5",[194]),this.registeFuncIds("equipSuitRP_6",[194]),this.registeFuncIds("equipSuitRP_7",[194]),this.registeFuncIds("equipSuitRP_8",[194]),this.registeFuncIds("equipSuitRP_9",[194]),this.registeFuncIds("equipSuitRP_10",[194]),this.registeFuncIds("equipSuitRP_11",[194]),this.registeFuncIds("equipSuitRP_12",[194]),this.registeFuncIds("equipSuitRP_13",[194]),this.registeFuncIds("equipSuitRP_14",[194]),this.registeFuncIds("preventFoolRP",[247]),this.registeFuncIds("theCarnivalRP",[245]),this.registeFuncIds("resBackRP",[243]),this.registeFuncIds("motongjiangshiRp1",[251]),this.registeFuncIds("motongjiangshiRp2",[251]),this.registeFuncIds("motongjiangshiRp3",[251]),this.registeFuncIds("jiuXiaoLingRP",[252]),this.registeFuncIds("jiuXiaoLingTaskRP",[253]),this.registeFuncIds("festDailyRewardRP",[262]),this.registeFuncIds("officialAccountRP",[229]),this.registeFuncIds("archiveRP",[280]),this.registeFuncIds("fashionSuitsRP",[288]),this.registeFuncIds("fashionSuits1RP",[289]),this.registeFuncIds("susanSladeRP",[295]),this.registeFuncIds("fashionSuits2RP",[290]),this.registeFuncIds("beastsSpiritRP",[318]),this.registeFuncIds("beastsSpiritRP1",[318]),this.registeFuncIds("runeBookRP",[292]),this.registeFuncIds("singleDog1RP",[323]),this.registeFuncIds("singleDog2RP",[324]),this.registeFuncIds("singleDog4RP",[325]),this.registeFuncIds("singleDog5RP",[326]),this.registeFuncIds("singleDog6RP",[327]),this.registeFuncIds("singleDog7RP",[328]),this.registeFuncIds("singleFestConvertRP",[331]),this.registeFuncIds("singleFestDailyRewardRP",[334]),this.registeFuncIds("singleFestConLoginRP",[330]),this.registeFuncIds("singleFestHilarityRP",[332]),this.registeFuncIds("singleFestDoubleRewardRP",[333]),this.registeFuncIds("singleFestFirstPayRP",[335]),this.registeFuncIds("singleParty1RP",[337]),this.registeFuncIds("singleParty2RP",[338]),this.registeFuncIds("singleParty3RP",[339]),this.registeFuncIds("singleParty4RP",[340]),this.registeFuncIds("singleParty5RP",[341]),this.registeFuncIds("singleStoreRP",[344]),this.registeFuncIds("reHeadRP",[260]),this.registeFuncIds("reHead1RP",[353]),this.registeFuncIds("reChatFrameRP",[261]),this.registeFuncIds("superVipRP",[319]),this.registeFuncIds("spiritDungeonRP",[354]),this.registeFuncIds("divinatoryCardBossRP",[780]),this.registeFuncIds("divinatoryCardItemRP",[780]),this.registeFuncIds("divinatoryCardStrongRP",[780]),this.registeFuncIds("zhiZhenDailyRewardRP",[388]),this.registeFuncIds("zhiZhenParty4RP",[399]),this.registeFuncIds("zhiZhenFirstPayRP",[389]),this.registeFuncIds("zadanRP",[464]),this.registeFuncIds("zadanChangeRP",[464]),this.registeFuncIds("zadanShopRP",[465]),this.registeFuncIds("zadanTaskRP",[466]),this.registeFuncIds("heQu1RP",[441]),this.registeFuncIds("heQu2RP",[442]),this.registeFuncIds("heQuFestDailyRewardRP",[445]),this.registeFuncIds("heQuFestConLoginRP",[443]),this.registeFuncIds("heQuFestHilarityRP",[446]),this.registeFuncIds("heQuFestDoubleRewardRP",[447]),this.registeFuncIds("heQuFestFirstPayRP",[444]),this.registeFuncIds("heQuOnlineRewardsRP",[444]),this.registeFuncIds("heQuTreasureHuntCarnivalRP",[444]),this.registeFuncIds("heQuOnlineRewardRP",[448]),this.registeFuncIds("heQuOnlineXunBaoHappyRP",[449]),this.registeFuncIds("fuliguanLoginRP",[472]),this.registeFuncIds("fuliguanFightRP",[472]),this.registeFuncIds("hitEngineerRP",[469]),this.registeFuncIds("hitEngineerAwardRP",[470]),this.registeFuncIds("hitEngineerKillerRP",[471]),this.registeFuncIds("hitMonsterNianRP",[527]),this.registeFuncIds("hitMonsterNianAwardRP",[529]),this.registeFuncIds("hitMonsterNianKillerRP",[528]),this.registeFuncIds("yybPrivilege",[543]),this.registeFuncIds("realNameRP",[228]),this.registeFuncIds("zhiZhenConvertRP",[544]),this.registeFuncIds("zhiZhenConvert1RP",[652]),this.registeFuncIds("springNightSmashEggRP",[557]),this.registeFuncIds("springNightSmashEggChangeRP",[557]),this.registeFuncIds("springNightSmashEggShopRP",[558]),this.registeFuncIds("springNightSmashEggTaskRP",[559]),this.registeFuncIds("fireContentionAchievementRP",[569]),this.registeFuncIds("fireContentionRP",[569]),this.registeFuncIds("fireContentionWarfireTargetRP",[569]),this.registeFuncIds("plantingTreesRP",[618]),this.registeFuncIds("plantingTreesAwardRP",[620]),this.registeFuncIds("plantingTreesKillerRP",[619]),this.registeFuncIds("fashionMasterRP",[563]),this.registeFuncIds("immortalMasterRP",[561]),this.registeFuncIds("pearlMasterRP",[564]),this.registeFuncIds("wingMasterRP",[562]),this.registeFuncIds("weaponIllusionMasterRP",[565]),this.registeFuncIds("weaponCircleMasterRP",[650]),this.registeFuncIds("petIllusionMasterRP",[567]),this.registeFuncIds("petCircleMasterRP",[650]),this.registeFuncIds("nothingnessWorldRP",[633]),this.registeFuncIds("thunderboltEquipRP1",[622]),this.registeFuncIds("thunderboltEquipRP2",[807]),this.registeFuncIds("vernalEquinoxSmashEggRP",[645]),this.registeFuncIds("vernalEquinoxSmashEggChangeRP",[645]),this.registeFuncIds("vernalEquinoxSmashEggShopRP",[646]),this.registeFuncIds("vernalEquinoxSmashEggTaskRP",[647]),this.registeFuncIds("qqLobbyStartRP",[624]),this.registeFuncIds("qqLobbyDailyRP",[625]),this.registeFuncIds("qqLobbyLevelRP",[626]),this.registeFuncIds("qqBlueStartRP",[629]),this.registeFuncIds("qqBlueDailyRP",[630]),this.registeFuncIds("qqBlueLevelRP",[631]),this.registeFuncIds("bossFeastRP",[673]),this.registeFuncIds("bossFeastAwardRP",[675]),this.registeFuncIds("bossFeastKillerRP",[674]),this.registeFuncIds("thunderboltBuyRP",[677]),this.registeFuncIds("unionWarRP",[698]),this.registeFuncIds("unionWarRP1",[699]),this.registeFuncIds("unionWarRP2",[700]),this.registeFuncIds("unionWarRP3",[698]),this.registeFuncIds("mysteriousStoreRP",[701]),this.registeFuncIds("babyGrowthRP",[706]),this.registeFuncIds("babyGradeRP",[707]),this.registeFuncIds("babyTonicRP",[708]),this.registeFuncIds("babySkillBaseRP",[706]),this.registeFuncIds("babySkillHaloRP",[706]),this.registeFuncIds("babySkillTalentRP",[707]),this.registeFuncIds("babyActiveSkillRP",[889]),this.registeFuncIds("foreignRP",[723]),this.registeFuncIds("foreignTaskRP",[723]),this.registeFuncIds("foreignBossComRP",[723]),this.registeFuncIds("foreignBossFameRP",[723]),this.registeFuncIds("familyPartyRP",[762]),this.registeFuncIds("treasureLandRP",[678]),this.registeFuncIds("treasureLandBagRP",[678]),this.registeFuncIds("treasureLandTaskRP",[680]),this.registeFuncIds("forbiddenBossRP",[777]),this.registeFuncIds("auctionStoreRP",[778]),this.registeFuncIds("childrensDay1RP",[790]),this.registeFuncIds("childrensDay2RP",[791]),this.registeFuncIds("childrensDay4RP",[792]),this.registeFuncIds("childrensDay5RP",[793]),this.registeFuncIds("childrensDay6RP",[794]),this.registeFuncIds("childrensDay7RP",[795]),this.registeFuncIds("childrensDayFestDailyRewardRP",[803]),this.registeFuncIds("childrensDayFestConLoginRP",[800]),this.registeFuncIds("childrensDayFestHilarityRP",[801]),this.registeFuncIds("childrensDayFestDoubleRewardRP",[802]),this.registeFuncIds("childrensDayFestFirstPayRP",[804]),this.registeFuncIds("childrensDayParty1RP",[796]),this.registeFuncIds("childrensDayParty2RP",[985]),this.registeFuncIds("childrensDayParty3RP",[798]),this.registeFuncIds("childrensDayParty4RP",[799]),this.registeFuncIds("childrensDayStoreRP",[805]),this.registeFuncIds("barDay1RP",[820]),this.registeFuncIds("barDay2RP",[821]),this.registeFuncIds("barDayFestConLoginRP",[824]),this.registeFuncIds("barDayFestFirstPayRP",[828]),this.registeFuncIds("barDayFestDailyRewardRP",[827]),this.registeFuncIds("barDayStoreRP",[829]),this.registeFuncIds("barDayConvertRP",[830]),this.registeFuncIds("barDayParty1RP",[831]),this.registeFuncIds("barDayParty2RP",[1028]),this.registeFuncIds("barDayParty3RP",[833]),this.registeFuncIds("barDayParty4RP",[834]),this.registeFuncIds("barDayParty4RP",[834]),this.registeFuncIds("barDay6RP",[822]),this.registeFuncIds("barDay4RP",[823]),this.registeFuncIds("vxShpreAlert",[784]),this.registeFuncIds("vxHelpAlert",[784]),this.registeFuncIds("vxUpgradeAlert",[784]),this.registeFuncIds("vxPlayAlert",[784]),this.registeFuncIds("windCloudRP",[839]),this.registeFuncIds("outsideShowDungeonRP",[852]),this.registeFuncIds("destinyPellet",[860]),this.registeFuncIds("showEquipRide",[846]),this.registeFuncIds("showEquipPet",[847]),this.registeFuncIds("showEquipImmortal",[848]),this.registeFuncIds("showEquipWing",[849]),this.registeFuncIds("showEquipFashion",[850]),this.registeFuncIds("showEquipPearl",[851]),this.registeFuncIds("extremeEquioPanelRP",[856]),this.registeFuncIds("immortalContest",[853]),this.registeFuncIds("immortalContestWorship",[855]),this.registeFuncIds("anniversaryDay1RP",[864]),this.registeFuncIds("anniversaryDay2RP",[865]),this.registeFuncIds("anniversaryDay4RP",[866]),this.registeFuncIds("anniversaryDay5RP",[867]),this.registeFuncIds("anniversaryDay6RP",[868]),this.registeFuncIds("anniversaryDay7RP",[869]),this.registeFuncIds("anniversaryDayFestDailyRewardRP",[877]),this.registeFuncIds("anniversaryDayFestConLoginRP",[874]),this.registeFuncIds("anniversaryDayFestHilarityRP",[875]),this.registeFuncIds("anniversaryDayFestDoubleRewardRP",[876]),this.registeFuncIds("anniversaryDayFestFirstPayRP",[878]),this.registeFuncIds("anniversaryDayParty1RP",[870]),this.registeFuncIds("anniversaryDayParty2RP",[871]),this.registeFuncIds("anniversaryDayParty3RP",[872]),this.registeFuncIds("anniversaryDayParty4RP",[873]),this.registeFuncIds("anniversaryDayStoreRP",[879]),this.registeFuncIds("treasureRebateRP6",[884]),this.registeFuncIds("treasureRebateRP7",[885]),this.registeFuncIds("treasureRebateRP8",[893]),this.registeFuncIds("wxChangePkgRP",[891]),this.registeFuncIds("ruinsRP",[896]),this.registeFuncIds("ruinsTaskRP",[898]),this.registeFuncIds("ruinsTaskRP1",[898]),this.registeFuncIds("strongestMarryRP",[901]),this.registeFuncIds("strongestMarryRP1",[901]),this.registeFuncIds("strongestMarryRP2",[901]),this.registeFuncIds("netherWorldRP",[918]),this.registeFuncIds("redBagLuckRP",[907]),this.registeFuncIds("redBagAwardRP",[908]),this.registeFuncIds("redBagPlayerRP",[909]),this.registeFuncIds("ninghunRP",[919]),this.registeFuncIds("zhanhunRP",[920]),this.registeFuncIds("fightSoulBuyRP",[922]),this.registeFuncIds("fightSoulPayRP",[923]),this.registeFuncIds("teamWarfareRP",[939]),this.registeFuncIds("teamWarfareRP1",[939]),this.registeFuncIds("teamWarfareRP2",[939]),this.registeFuncIds("teamWarfareRP3",[939]),this.registeFuncIds("teamWarfareRP4",[939]),this.registeFuncIds("teamWarfareRP5",[939]),this.registeFuncIds("teamWarfareRP6",[939]),this.registeFuncIds("teamWarfareRP7",[939]),this.registeFuncIds("perfectestTenDailyRewardRP",[950]),this.registeFuncIds("perfectestTenParty4RP",[961]),this.registeFuncIds("perfectestTenFirstPayRP",[951]),this.registeFuncIds("perfectestTenConvert1RP",[963]),this.registeFuncIds("welfarePlaceBossRP",[942]),this.registeFuncIds("welfarePlacePawnRP",[943]),this.registeFuncIds("trahmanBossRP",[971]),this.registeFuncIds("skyBookBuyRP",[966]),this.registeFuncIds("skyBookPayRP",[967]),this.registeFuncIds("brahmaBuyRP",[968]),this.registeFuncIds("brahmaPayRP",[969]),this.registeFuncIds("tsDunwuRp",[977]),this.registeFuncIds("tsJianwuRp",[978]),this.registeFuncIds("sealDeityRp1",[979]),this.registeFuncIds("sealDeityRp2",[979]),this.registeFuncIds("sealDeityRp3",[979]),this.registeFuncIds("weekCardRP",[981]),this.registeFuncIds("bindphoneRP",[988]),this.registeFuncIds("nineCopyRP",[120]),this.registeFuncIds("xiLianMaster",[190]),this.registeFuncIds("christmas2020Party5RP",[1021]),this.registeFuncIds("phoneQQRedBagRP",[1023]),this.registeFuncIds("threeSevenBoxRP",[1025]),this.registeFuncIds("springScenery1RP",[1035]),this.registeFuncIds("springScenery2RP",[1036]),this.registeFuncIds("springSceneryFestConLoginRP",[1039]),this.registeFuncIds("springSceneryFestFirstPayRP",[1043]),this.registeFuncIds("springSceneryFestDailyRewardRP",[1042]),this.registeFuncIds("springSceneryStoreRP",[1044]),this.registeFuncIds("springSceneryConvertRP",[1045]),this.registeFuncIds("springSceneryParty1RP",[1046]),this.registeFuncIds("springSceneryParty2RP",[1047]),this.registeFuncIds("springSceneryParty3RP",[1048]),this.registeFuncIds("springSceneryParty4RP",[1049]),this.registeFuncIds("springSceneryParty4RP",[1049]),this.registeFuncIds("springScenery6RP",[1037]),this.registeFuncIds("springScenery4RP",[1038])}e=t.redPoint||(t.redPoint={}),h=t.funcOpen.FuncOpenModel,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.registeFuncIds=function(t,e){void 0===e&&(e=null),this._funcIdsTable[t]=e},n.prototype.setup=function(){GlobalData.dispatcher.on("RED_POINT",this,this.rpHandler),GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.checkRedPoints)},n.prototype.rpHandler=function(t){this.checkRedPoints()},n.prototype.registeRedPoint=function(t,e){var i=this._rpImgs.indexOf(t);-1===i?(this._rpImgs.push(t),this._propertyNamesArr.push(e)):(this._rpImgs[i]=t,this._propertyNamesArr[i]=e),this.checkRedPoint(t)},n.prototype.retireRedPoint=function(t){var e=ArrayUtils.remove(this._rpImgs,t);-1!==e&&ArrayUtils.removeAt(this._propertyNamesArr,e)},n.prototype.checkRedPoints=function(){if(this._rpImgs&&0<this._rpImgs.length)for(var t=0,e=this._rpImgs.length;t<e;t++)this.checkRedPoint(this._rpImgs[t])},n.prototype.checkRedPoint=function(t){var e=this._rpImgs.indexOf(t);if(-1!==e){for(var i=this._propertyNamesArr[e],n=!1,s=0,o=i.length;s<o;s++)if(n=n||this._propertyValueTable[i[s]]){var a=this._funcIdsTable[i[s]];if(a)for(var r=0,l=a.length;r<l&&(0===a[r]||(n=h.instance.getFuncIsOpen(a[r])));r++);if(n)break}t.visible=n}},n.prototype.setRPProperty=function(t,e){!0!==this._propertyValueTable[t]&&(this._propertyValueTable[t]=!1),this._propertyValueTable[t]!==e&&(this._propertyValueTable[t]=e,GlobalData.dispatcher.event("RED_POINT",t))},n.prototype.getRPProperty=function(t){if(!this._propertyValueTable[t])return!1;var e=!0,i=this._funcIdsTable[t];if(i)for(var n=0,s=i.length;n<s&&(0===i[n]||(e=h.instance.getFuncIsOpen(i[n])));n++);return e},i=n,e.RedPointCtrl=i}(modules=modules||{}),function(f){var g,e,i,d,n,s,y,t,_,v,I,o,a,r,l;function h(){var t=e.call(this)||this;return t._grayBg=new n,t._grayBg.alpha=.8,t._grayBg.mouseEnabled=!0,t._grayBg.mouseThrough=!1,t._bg=new s("common/bg1_common.png"),t._bg.centerX=0,t._bg.bottom=0,t._panelBg=new s("common/bg0_common.png"),t._panelBg.width=960,t._panelBg.centerX=0,t._panelBg.centerY=-55,t._panelBg.sizeGrid="580,0,580,0,0",t._tab=g.BottomTab.instance,t._backBtn=new i("bottom_tab/btn_common_fh.png"),t._backBtn.centerX=281,t._backBtn.bottom=0,t._backBtn.stateNum=1,t._backBtn.label="",t._backBtn.on(Laya.Event.DISPLAY,t,t.backBtnDisplayHandler),t._backBtn.on(Laya.Event.UNDISPLAY,t,t.backBtnUndisplayHandler),t._panelsStack=[],t._panelsStackInScene=[],t._isHook=!1,t._dialogsStack=[],t.setup(),t}g=f.bottomTab||(f.bottomTab={}),i=Laya.Button,d=Laya.Event,n=Laya.Sprite,s=laya.ui.Image,y=f.config.ActionOpenCfg,t=f.core.BaseCtrl,_=f.funcOpen.FuncOpenModel,v=f.notice.SystemNoticeManager,I=f.redPoint.RedPointCtrl,o=f.guide.GuideModel,a=f.scene.SceneModel,r=f.config.SceneCfg,e=t,__extends(h,e),Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.setup=function(){},h.prototype.backBtnDisplayHandler=function(){o.instance.registeUI(5,this._backBtn)},h.prototype.backBtnUndisplayHandler=function(){o.instance.removeUI(5)},Object.defineProperty(h.prototype,"imgs",{get:function(){return this._tab.imgs},enumerable:!0,configurable:!0}),h.prototype.updateTabByPanel=function(){if(this._panelId){var t=g.BottomTabConfig.instance.getTabInfoByPanelId(this._panelId);if(t){var e=t[4];0!=e&&(console.log("刷新切页~~~~~~~~~~~~~~~~~~~~~~~~~~~~funcId： "+e),console.log("刷新切页~~~~~~~~~~~~~~~~~~~~~~~~~~~~this._panelId： "+this._panelId),_.instance.getFuncIsOpen(e)?(this._tab.updatePanels(),this.openTabByFunc(e)):WindowManager.instance.close(this._panelId))}}},h.prototype.openTabByPanel=function(t){this._panelId=t;var e=g.BottomTabConfig.instance.getTabInfoByPanelId(t);if(e){for(var i=-1,n=-1,s=0,o=0,a=(this._tab.tabInfo=e)[0].length;o<a;o++){for(var r=e[0][o],l=!0,h=0,c=r.length;h<c;h++)if(!this.isFuncClose(r[h])){l=!1;break}if(!l){if(-1!==(n=r.indexOf(t))){i=s;break}s++}}if(-1===i||-1===n)return;this._tab.panelId=this._panelId,this._tab.selectedIndex=i;var p=WindowManager.instance.getPanelById(this._panelId);p&&p.parent?this.addTabToStage():this._panelId&&this.onGlobal("PANEL_OPEN",this.panelOpenHandler),this.onGlobal("RESIZE_UI",this.resizeHandler),this._backBtn.on(d.CLICK,this,this.backHandler),this.resizeHandler()}else this.removeTabFromStage();var u=this._isHook?this._panelsStack:this._panelsStackInScene;0===u.length?u.push(this._panelId):-1<(o=u.indexOf(this._panelId))?u.length=o+1:g.BottomTabConfig.instance.getTabInfoByPanelId(u[u.length-1])!==e&&this._panelId!==u[u.length-1]?u.push(this._panelId):u[u.length-1]=this._panelId},h.prototype.openTabByFunc=function(t){var e=y.instance.getCfgById(t)[9],i=e[0],n=-1,s=-1;if(1===y.instance.getCfgById(t)[10]){for(var o=1,a=e.length;o<a;o++)if(_.instance.getFuncIsOpen(e[o])){var r=GlobalData.getWindowConfigByFuncId(e[o])[0];if((m=g.BottomTabConfig.instance.getRpsByPanelId(r))&&0<m.length)for(var l=0,h=m.length;l<h;l++)if(I.instance.getRPProperty(m[l])){s=r;break}if(-1!==s)break;-1===n&&(n=r)}}else{var c=g.BottomTabConfig.instance.getTabInfoByPanelId(GlobalData.getWindowConfigByFuncId(i)[0]);if(!c)return;for(o=1,a=e.length;o<a;o++)if(_.instance.getFuncIsOpen(e[o])){var p=c[0][o-1];if(p)for(var u=0,d=p.length;u<d;u++)if(this.isFuncOpen(p[u])){var m;if((m=c[2][o-1]?c[2][o-1][u]:null)&&0<m.length)for(l=0,h=m.length;l<h;l++)if(I.instance.getRPProperty(m[l])){s=p[u];break}if(-1!==s)break;-1===n&&(n=p[u])}if(-1!==s)break}}-1!==s?this.openTabByPanel(s):-1!==n?230==t&&_.instance.getFuncIsOpen(47)?f.vip_new.VipNewModel.instance.getVipLevelTrue()<10&&f.vip.VipModel.instance.vipLevel<1?this.openTabByPanel(n):this.openTabByPanel(104):this.openTabByPanel(n):v.instance.addNotice(_.instance.getFuncOpenTipById(i),!0)},h.prototype.closeTab=function(t){void 0===t&&(t=!1),this._tab.tabInfo&&60===this._tab.tabInfo[4]&&f.resBack.ResBackCtrl.instance.closeRP(),this._panelId=0,this._tab.tabInfo=null;var e=this._isHook?this._panelsStack:this._panelsStackInScene;if(t||e.pop(),0!==e.length&&g.BottomTabConfig.instance.getTabInfoByPanelId(e[e.length-1])||(this._grayBg.removeSelf(),this._bg.removeSelf(),this._panelBg.removeSelf(),this._tab.removeSelf(),this._backBtn.removeSelf(),GlobalData.dispatcher.off("PANEL_OPEN",this,this.panelOpenHandler),GlobalData.dispatcher.off("RESIZE_UI",this,this.resizeHandler),this._backBtn.off(d.CLICK,this,this.backHandler)),!t&&0<e.length){var i=e[e.length-1];this.openTabByPanel(i),WindowManager.instance.isOpened(i)||this.closeTab(t)}},h.prototype.panelOpenHandler=function(t){this._panelId===t&&this.addTabToStage()},h.prototype.addTabToStage=function(){LayerManager.instance.addToMidUILayer(this._grayBg),LayerManager.instance.addToMidUILayer(this._panelBg),LayerManager.instance.addToMidUILayer(this._bg),LayerManager.instance.addToUpUILayer(this._tab),LayerManager.instance.addToUpUILayer(this._backBtn)},h.prototype.removeTabFromStage=function(){this._grayBg.removeSelf(),this._panelBg.removeSelf(),this._bg.removeSelf(),this._tab.removeSelf(),this._backBtn.removeSelf()},h.prototype.resizeHandler=function(){this._grayBg.width=CommonConfig.viewWidth,this._grayBg.height=CommonConfig.viewHeight,this._grayBg.graphics.clear(!0),this._grayBg.graphics.drawRect(0,0,CommonConfig.viewWidth,CommonConfig.viewHeight,"#000000"),this._panelBg.height=CommonConfig.viewHeight-110,this._tab.y=.5*CommonConfig.viewHeight+640-136},h.prototype.backHandler=function(){var t=this._isHook?this._panelsStack:this._panelsStackInScene;0<t.length?WindowManager.instance.close(t[t.length-1]):this.closeTab(),this._panelsStackInScene&&this._panelsStackInScene.length<=0&&this.clearStackPart()},h.prototype.isFuncOpen=function(t){var e=!0,i=WindowManager.instance.getWindowConfigById(t),n=i?i[6]:-1;return 0!==n&&(_.instance.getFuncIsOpen(n)||(e=!1)),e},h.prototype.isFuncClose=function(t){var e=!1,i=WindowManager.instance.getWindowConfigById(t),n=i?i[6]:-1;return _.instance.getFuncNeedShow(n)||(e=!0),e},h.prototype.enterScene=function(){var t=a.instance.enterScene[0];if(0===r.instance.getCfgById(t)[7]){if(this._isHook=!0,0===this._panelsStack.length&&0<this._panelsStackInScene.length)for(var e=0,i=this._panelsStackInScene.length;e<i;e++)this._panelsStack[e]=this._panelsStackInScene[e];-1!=this._panelsStackInScene.indexOf(1494)&&(this._panelsStackInScene.length=0,this._panelsStack.length=0,WindowManager.instance.open(1494)),0<this._panelsStack.length&&(this._panelsStackInScene.length=0,WindowManager.instance.open(this._panelsStack[this._panelsStack.length-1])),0<this._dialogsStack.length&&WindowManager.instance.open(this._dialogsStack.pop())}else this._isHook=!1},Object.defineProperty(h.prototype,"panelsStack",{get:function(){return this._panelsStack},enumerable:!0,configurable:!0}),h.prototype.addPanelByFunc=function(t){if(0!==t){var e=GlobalData.getWindowConfigByFuncId(t);e?1===e[1]?this._panelsStack.push(e[0]):2===e[1]&&this._dialogsStack.push(e[0]):v.instance.addNotice("找不到功能id:"+t+"对应的面板信息",!0)}},h.prototype.clearStack=function(){this._panelsStackInScene&&(0<this._panelsStackInScene.length&&WindowManager.instance.close(this._panelsStackInScene[this._panelsStackInScene.length-1]),this._panelsStackInScene.length=0),this._panelsStack&&(this._panelsStack.length=0),this._dialogsStack&&(this._dialogsStack.length=0)},h.prototype.clearStackPartBaseWin=function(){f.arena.ArenaModel.instance.waitState&&24==f.scene.SceneUtil.currScene&&this._panelsStackInScene&&this._panelsStackInScene.length<=0&&this.clearStackPart()},h.prototype.clearStackPart=function(){if(f.arena.ArenaModel.instance.waitState&&24==f.scene.SceneUtil.currScene){if(this.panelsStack&&0<this.panelsStack.length){var t=this.panelsStack.indexOf(289);-1!=t&&this.panelsStack.splice(t,1)}this._panelsStackInScene&&(0<this._panelsStackInScene.length&&WindowManager.instance.close(this._panelsStackInScene[this._panelsStackInScene.length-1]),this._panelsStackInScene.length=0),f.dungeon.DungeonCtrl.instance.reqEnterScene(0)}},l=h,g.BottomTabCtrl=l}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.bottomTab||(t.bottomTab={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._arr=[[[[7],[548],[1372,1373]],["角色","元神","战魂"],[[["goldBodyRP","runeRP","runeResolvRP","runeComposeRP","runeBookRP","playerTitleRP","equipPartRP","fightTalismanRP","moneyCatRP","equipSuitRP_0","equipSuitRP_1","equipSuitRP_2","equipSuitRP_3","equipSuitRP_4","equipSuitRP_5","equipSuitRP_6","equipSuitRP_7","equipSuitRP_8","equipSuitRP_9","equipSuitRP_10","equipSuitRP_11","equipSuitRP_12","equipSuitRP_13","equipSuitRP_14","tianZhuShengJiRP","tianZhuShengJiMatRP","tianZhuHuanHuaZhenPinRP","tianZhuHuanHuaJiPinRP","tianZhuHuanHuaJuePinRP","tianZhuFuHunRP","fashionShengJiRP","fashionShengJiMatRP","fashionHuanHuaZhenPinRP","fashionHuanHuaJiPinRP","fashionHuanHuaJuePinRP","fashionHuanHuaTeShuRP","fashionFuHunRP","glovesRP","fashionSuitsRP","fashionSuits1RP","fashionSuits2RP","fashionMasterRP","pearlMasterRP","immortalMasterRP","wingMasterRP","thunderboltEquipRP1","thunderboltEquipRP2","showEquipImmortal","showEquipWing","showEquipFashion","showEquipPearl","extremeEquioPanelRP","xianDanRP","destinyPellet","immortalsShengjiRP","immortalsHuanhuaJipinRP","immortalsHuanhuaZhenpinRP","immortalsHuanhuaJuepinRP","immortalsHuanhuateShuRP","immortalsFuhunRP","wingShengjiRP","wingHuanhuaJipinRP","wingHuanhuaZhenpinRP","wingHuanhuaJuepinRP","wingFuhunRP","brahmaRP1","brahmaRP2","brahmaRP3","brahmaRP4","brahmaResolveRP"]],[["yuanShenRP"]],[["ninghunRP"],["zhanhunRP"]]],["image_common_jse_","image_common_yuans_","image_common_zhanhun_"],106],[[[27,126,127],[10,124,125],[179,169,983],[516]],["仙器","灵宠","法阵","兽灵"],[[["weaponFeedSkillRP","weaponFeedMatRP","showEquipRide"],["weaponRankSkillRP","weaponRankMatRP","weaponIllusionRP","weaponIllusionMasterRP"],["weaponRefineMaterialRP"]],[["petFeedSkillRP","petFeedMatRP","showEquipPet"],["petRankSkillRP","petRankMatRP","petIllusionRP","petIllusionMasterRP"],["petRefineMaterialRP"]],[["weaponFazhenJipinRP","weaponFazhenZhenpinRP","weaponFazhenJuepinRP"],["petFazhenJipinRP","petFazhenZhenpinRP","petFazhenJuepinRP"],["weaponCircleMasterRP","petCircleMasterRP"]],[["beastsSpiritRP","beastsSpiritRP1"]]],["image_common_xq_","image_common_lc_","image_common_fz_","image_common_sl_"],103],[[[9],[108],[333],[66]],["背包","熔炼","神器","合成"],[[["bagRP"]],[["smeltRP"]],[["shenqiRP"]],[["composeRP","composeStoneRP","resolveRP"]]],["image_common_bb_","image_common_rl_","image_common_shenqi_","image_common_hcfj_"],105],[[[19]],["天关"],[[["missionRP","lineClearOut"]]],["image_common_tg_"],0],[[[11,908],[168,910]],["仙器幻化","灵宠幻化"],[[["weaponIllusionRP"],["weaponIllusionMasterRP"]],[["petIllusionRP"],["petIllusionMasterRP"]]],["image_common_xqhh_","image_common_lchh_"],599],[[[56],[37],[413],[302],[326]],["强化","仙石","装备打造","铸魂","洗炼"],[[["intensiveRP"]],[["stoneRP"]],[["daZhaoRP"]],[["equipmentZuHunRP"]],[["xiLianMaster"]]],["image_common_qh_","image_common_xs_","image_common_dz_","image_common_zh_","image_common_xil_"],104],[[[33,40,224],[75,400,80,1135,1175],[1474],[574,1163,1272]],["本服","跨服","跨区","元神幻境"],[[["singleBossRP"],["multiBossRP"],["yunMengBossRP"]],[["threeWorldsRP"],["shenYuBossRP1"],["bossHomeRP"],["foreignRP","foreignTaskRP","foreignBossComRP","foreignBossFameRP"],["forbiddenBossRP"]],[["trahmanBossRP"]],[["spiritDungeonRP","divinatoryCardBossRP","outsideShowDungeonRP"]]],["image_common_bfboss_","image_common_kfboss_","image_common_kqboss_","image_common_yshj_"],61],[[[43],[46],[1488]],["仙术","法宝","天书"],[[["magicArtRP"]],[["talismanRP"]],[["tsJianwuRp","tsDunwuRp"]]],["image_common_xshu_","image_common_fb_","image_common_ts_"],102],[[[38,57,139],[97,1379,962],[599]],["单人","多人","神兽岛/无限岛"],[[["bigTowerRP"],["dailyDungeonRP"],["runeCopyRP"]],[["teamBattleRP"],["netherWorldRP"],["nothingnessWorldRP"]],[["beastBossBxRP","beastBossCopyRP","beastBossWuXianCopyRP"]]],["image_common_danrfb_","image_common_drfb_","image_common_ssd_"],59],[[[72],[194],[398],[134]],["历练","活动列表","资源找回","降妖"],[[["exerciseRP"]],[["activityAllItemRP"]],[["resBackRP","lilianBackRP"]],[["dailyDemonRP"]]],["image_common_mrll_","image_common_xshd_","image_common_zyzh_","image_common_mrxy_"],60],[[[83,120,121,905],[91,122,123,906],[319,320,321,879],[322,323,324,907]],["神兵","仙翼","时装","天珠"],[[["immortalsShengjiRP","showEquipImmortal"],["immortalsHuanhuaJipinRP","immortalsHuanhuaZhenpinRP","immortalsHuanhuaJuepinRP","immortalsHuanhuateShuRP"],["immortalsFuhunRP"],["immortalMasterRP"]],[["wingShengjiRP","showEquipWing"],["wingHuanhuaJipinRP","wingHuanhuaZhenpinRP","wingHuanhuaJuepinRP"],["wingFuhunRP"],["wingMasterRP"]],[["fashionShengJiRP","fashionShengJiMatRP","showEquipFashion"],["fashionHuanHuaJiPinRP","fashionHuanHuaZhenPinRP","fashionHuanHuaTeShuRP","fashionHuanHuaJuePinRP"],["fashionFuHunRP"],["fashionMasterRP"]],[["tianZhuShengJiRP","tianZhuShengJiMatRP","showEquipPearl"],["tianZhuHuanHuaJiPinRP","tianZhuHuanHuaZhenPinRP","tianZhuHuanHuaJuePinRP"],["tianZhuFuHunRP"],["pearlMasterRP"]]],["image_common_sb_","image_common_xy_","image_common_sz_","image_common_tz_"],123],[[[93,113,393,115,116,1329,1330,1342],[114],[109]],["寻宝","仓库","兑换"],[[["treasureRP"]],[["treasureBagRP"]],[["treasureExchangeRP"]]],["image_common_xb_","image_common_ck_","image_common_dh_"],49],[[[78],[41],[1158]],["仙位","转生","飞升"],[[["magicPositionRP"]],[["bornRP"]],[["flyUpRP"]]],["image_common_xw_","image_common_zs_","image_common_fs_"],101],[[[128,129,130,131],[132,235,414,640,760,385,1169],[345,346]],["商城","商店","商店"],[[["shangchengRP"]],[["shangdianRP"],[],[],[],[],[],["auctionStoreRP"]],[[]]],["image_common_sc_","image_common_sd_","image_common_bk_"],62],[[[35]],["金身"],[[["goldBodyRP"]]],["image_common_js_"],0],[[[367],[104]],["VIP","SVIP"],[[["vipNewRP"]],[["vipRP"]]],["image_common_vip_","image_common_svip_"],230],[[[1550],[1428],[1400],[1316],[1239],[1207],[1150],[708],[641],[540],[30],[31],[34],[325],[1494],[100],[410],[452],[356]],["每日登陆(梨园春色)","每日登陆(至臻)","每日登陆(太空之旅)","每日登陆(周年庆)","每日登陆(睡衣派对)","每日登陆(儿童节)","每日登陆(小满)","每日登陆(合区活动)","每日登陆(至臻)","每日登陆(单身狗)","签到","在线礼包","七日礼","半月礼","福利周卡","月卡","防骗问答","公众号","激活码兑换/公告"],[[["springSceneryFestDailyRewardRP"]],[["perfectestTenDailyRewardRP"]],[["spaceTravelDailyRewardRP"]],[["anniversaryDayFestDailyRewardRP"]],[["barDayFestDailyRewardRP"]],[["childrensDayFestDailyRewardRP"]],[["grainFullDailyRewardRP"]],[["heQuFestDailyRewardRP"]],[["zhiZhenDailyRewardRP"]],[["singleFestDailyRewardRP"]],[["signRP"]],[["onlineGiftRP"]],[["sevenDayGiftRP"]],[["halfMonthGiftRP"]],[["weekCardRP"]],[["monthCardRP"]],[["preventFoolRP"]],[["officialAccountRP"]],[["announcementRP"]]],["image_common_dlhl_","image_common_dlhl_","image_common_dlhl_","image_common_dlhl_","image_common_dlhl_","image_common_dlhl_","image_common_dlhl_","image_common_dlhl_","image_common_dlhl_","image_common_dlhl_","image_common_mrqd_","image_common_zxlb_","image_common_qrl_","image_common_byl_","image_common_flzk_","image_common_ybyk_","image_common_fzp_","image_common_gzh_","image_common_jhm_"],6],[[[1542],[20]],["通用组队2.0","邮件"],[[["teaminvastion"]],[["emailRP"]]],["image_common_zud_","image_common_yj_"],1006],[[[111]],["充值"],[[["rechargeRP"]]],["image_common_cz_"],0],[[[87],[1491],[1492]],["本服排行榜","本区排行榜","跨区排行榜"],[[["rankingListRP"]],[["rankingListRP1"]],[["rankingListRP2"]]],["image_common_bfb_","image_common_bqb_","image_common_kqb_"],970],[[[135],[417],[480]],["符文","符文合成","符文宝典"],[[["runeRP","runeResolvRP"]],[["runeComposeRP"]],[["runeBookRP"]]],["image_common_fw_","image_common_fwhc_","image_common_fwbd_"],76],[[[289,203,421,425,1292],[158,227,1259],[617],[865,1413],[1183,1361]],["单人竞技","多人竞技","仙魔对决","玄火争夺战","仙缘竞技"],[[["arenaRP"],["ladderJoinAwardRP"],[],[],["immortalContest"]],[["nineCopyRP"],["fairyRP"],["windCloudRP"]],[["faerieDemonPKRP"]],[["fireContentionRP","fireContentionAchievementRP"],["teamWarfareRP7","teamWarfareRP","teamWarfareRP1","teamWarfareRP2","teamWarfareRP3","teamWarfareRP4","teamWarfareRP5"]],[["marryArenaFightCountRP"],["strongestMarryRP","strongestMarryRP1","strongestMarryRP2"]]],["image_common_danrjj_","image_common_drjj_","image_common_zdjj_","image_common_zhandjj_","image_common_xyjj_"],119],[[[332],[156],[144],[155]],["开服礼包","连充","累充","消费赠礼"],[[[]],[["continuePayRP"]],[["cumulateRP"]],[["consumeRP"]]],["image_common_kflb_","image_common_lchl_","image_common_leichl_","image_common_xfzl_"],147],[[[174],[175],[176]],["登录返利","闯关返利","成长返利"],[[["investLoginRP"]],[["investRecruitRP"]],[["investGrowthRP"]]],["image_common_dlfl_","image_common_cgfl_","image_common_czfl_"],121],[[[170],[209],[211],[208]],["仙府升级","仙府任务","仙府风水","仙府总览"],[[["xianfuShengjiRP"]],[["xianfuTaskRP"]],[["xianfuArticleRP_0","xianfuArticleRP_1","xianfuArticleRP_2"]]],["image_common_xfsj_","image_common_xfrw_","image_common_xffs_","image_common_xfzlan_"],0],[[[180],[181],[182],[183],[184],[185],[186],[314],[242],[232],[241]],["仙器排行","灵宠排行","神兵排行","仙翼排行","仙法排行","装备排行","战力排行","冲榜夺宝（转盘）","冲榜特惠","冲榜累充","冲榜消费"],[[["sprintRankXianQiRP"]],[["sprintRankLingChongRP"]],[["sprintRankShenBingRP"]],[["sprintRankXianYiRP"]],[["sprintRankFaBaoRP"]],[["sprintRankEquipmentRP"]],[["sprintRankFighitingRP"]],[["rotaryTablechongbangRP"]],[["discountGiftPayRP"]],[["cumulate2RP"]],[["dayconsumeRP"]]],["image_common_xqcb_","image_common_lccb_","image_common_sbcb_","image_common_xycb_","image_common_xfcb_","image_common_zbcb_","image_common_zlcb_","image_common_cbdb_","image_common_cbth_","image_common_cblc_","image_common_cbxf_"],138],[[[210]],["古神问道"],[[["guShenRP"]]],["image_common_gswd_"],0],[[[231],[230],[358]],["全民等级狂欢","全民狂欢","全民战力狂欢"],[[["kuangHuanLevelRP"]],[["kuangHuanRP"]],[["kuangHuanPowarRP"]]],["image_common_djkh_","image_common_djkh_","image_common_zlkh_"],139],[[[246],[249]],["奇遇","奇遇商店"],[[["adventureRP"]],[["adventureShopRP"]]],["image_common_qysj_","image_common_qydh_"],148],[[[262],[263],[295,269],[268]],["仙盟列表","仙盟","仙盟福利","仙盟成员"],[[[]],[["unionWarRP","unionWarRP1","unionWarRP2","unionWarRP3","factionApplyJoinRP","factionPostApplyRP","factionBaozangListRP","helpBaozangListRP","mineBaozangListRP","factionCopyRP","factionHurtAwardRP"]],[["factionSkillRP"],["factionDialRP"]],[[]]],["image_common_xmlb_","image_common_xmzy_","image_common_xmfl_","image_common_xmcy_"],158],[[[264]],["称号"],[[["playerTitleRP"]]],["image_common_ch_"],163],[[[277],[278],[279]],["宝藏列表","我的宝藏","协助列表"],[[["factionBaozangListRP"]],[["mineBaozangListRP"]],[["helpBaozangListRP"]]],["image_common_bzlb_","image_common_wdbz_","image_common_xzlb_"],0],[[[280],[281]],["仙盟诛仙","伤害奖励"],[[["factionCopyRP"]],[["factionHurtAwardRP"]]],["image_common_xmzx_","image_common_shjl_"],0],[[[282],[422],[287],[285],[286],[283],[284]],["飞升榜","飞升夺宝","飞升特惠","飞升抢购","飞升单笔","飞升累充","飞升消费"],[[["soaringRankRP"]],[["rotaryTableSoaringRP"]],[["soaringSpecialGiftRP"]],[["soaringPanicBuyingGifRP"]],[["soaringSinglePayRP"]],[["soaringCumulatePayRP"]],[["soaringDayConsumeRewardRP"]]],["image_common_fsb_","image_common_fsdb_","image_common_fsth_","image_common_fsqg_","image_common_fsdbi_","image_common_fslc_","image_common_fsxf_"],164],[[[304],[305],[306],[307],[308],[309],[310],[311],[312],[313],[487],[488],[1368],[1369],[1370]],["装备合成_0","装备合成_1","装备合成_2","装备合成_3","装备合成_4","装备合成_5","装备合成_6","装备合成_7","装备合成_8","装备合成_9","装备合成_10","装备合成_10","装备合成_11","装备合成_12","装备合成_13"],[[["equipSuitRP_0"]],[["equipSuitRP_1"]],[["equipSuitRP_2"]],[["equipSuitRP_3"]],[["equipSuitRP_4"]],[["equipSuitRP_5"]],[["equipSuitRP_6"]],[["equipSuitRP_7"]],[["equipSuitRP_8"]],[["equipSuitRP_9"]],[["equipSuitRP_10"]],[["equipSuitRP_11"]],[["equipSuitRP_12"]],[["equipSuitRP_13"]],[["equipSuitRP_14"]]],["image_common_lytz_","image_common_cxtz_","image_common_txtz_","image_common_zxtz_","image_common_kwtz_","image_common_xytz_","image_common_pgtz_","image_common_qktz_","image_common_hdtz_","image_common_mstz_","image_common_httz_","image_common_wftz_","image_common_jdtz_","image_common_sytz_","image_common_sstz_"],194],[[[195],[335],[359],[330],[329],[294],[341]],["充值转盘","九州夺宝","消费排行","单笔充值（天尊）","单笔充值（神魂玉）","天天返利","登录豪礼(开服活动)"],[[["payRewardRP"]],[["rotaryTableJiuZhouRP"]],[["payRankRP"]],[["cumulatePayTianZhuRP"]],[["cumulatePayShenHunRP"]],[["everyDayRebateRP"]],[["loginRewardRP"]]],["image_common_czzp_","image_common_jzdb_","image_common_xfph_","image_common_syfl_","image_common_hyfl_","image_common_tiantfl_","image_common_dlhl_"],193],[[[347],[348],[349],[340]],["登录豪礼(周末狂欢)","单笔充值(周末狂欢)","累充(周末狂欢)","消费赠礼（周末狂欢）"],[[["weekLoginRP"]],[["weekSinglePayRP"]],[["weekRepeatPayRP"]],[["weekConsumeRP"]]],["image_common_dlhl_","image_common_dbcz_","image_common_ljcz_","image_common_xfzl_"],215],[[[351],[1493]],["至尊特权","主角光环"],[[[]]],["image_common_zztq_","image_common_zjgh_"],218],[[[375],[377,374],[376]],["仙玉界面","仙玉抽奖，仓库","仙玉商店"],[[["zxianYuPanelRP"]],[["zxianYuTreasurePanelRP","zxianYuBagPanelRP"]],[["zxianYuStorePanelRP"]]],["image_common_xyu_","image_common_ys_","image_common_yg_"],237],[[[372]],["一元秒杀"],[[["oneBuyRP"]]],["image_common_yyms_"],231],[[[383],[1328]],["仙丹","天命丹"],[[["xianDanRP"]],[["destinyPellet"]]],["image_common_sxd_","image_common_tmd_"],881],[[[402]],["全民狂嗨"],[[["theCarnivalRP"]]],["image_common_qmkh_"],244],[[[423]],["vip秒杀"],[[["vipBuyRP"]]],["image_common_svipms_"],232],[[[424]],["魔童降世"],[[["motongjiangshiRp1"]],[["motongjiangshiRp2"]],[["motongjiangshiRp3"]]],["image_common_mtjs_"],251],[[[1482]],["一战封神"],[[["sealDeityRp1"]],[["sealDeityRp2"]],[["sealDeityRp3"]]],["image_common_yzfs_"],979],[[[436,437]],["九霄令"],[[["jiuXiaoLingRP"],["jiuXiaoLingTaskRP"]]],["image_common_jxl_"],252],[[[457]],["限时Boss"],[[["openChallengeRP"]]],["image_common_xsboss_"],266],[[[199,200,201,202],[456]],["异兽图鉴","图鉴"],[[["xianfuBlueHandBookRP"],["xianfuVioletHandBookRP"],["xianfuOrangeHandBookRP"],["xianfuRedHandBookRP"]],[["archiveRP"]]],["image_common_xfys_","image_common_jzyw_"],265],[[[473],[476],[477]],["外显套装(极品套装)","外显套装(绝品套装)","外显套装(典藏套装)"],[[["fashionSuitsRP"]],[["fashionSuits1RP"]],[["fashionSuits2RP"]]],["image_common_jptz_","image_common_jueptz_","image_common_dctz_"],291],[[[490],[502],[524,525],[1078,1079,1080,1337]],["仙缘面板","仙缘戒指","仙缘信物","仙娃系统"],[[["marryIntimacyFeedRP","marryTaskRP","marryIntimacyAwardsRP","marryMessageRP"]],[["marryRingResonanceRP","marrySkillRP","marryRingFeedRP","marryCopyRP","marryMarkRP"]],[["marryTokenFeedRP"],["marryTokenRankRP"]],[["babyGrowthRP","babySkillBaseRP","babySkillHaloRP"],["babyGradeRP","babySkillTalentRP"],["babyTonicRP"],["babyActiveSkillRP"]]],["image_common_xianyuan_","image_common_hj_","image_common_xinwu_","image_common_xwa_"],320],[[[511]],["缘定三生"],[[["susanSladeRP"]]],["image_common_ydss_"],295],[[[491]],["仙缘墙"],[[[]]],["image_common_xyq_"],0],[[[500]],["仙缘任务"],[[["marryTaskRP"]]],["image_common_xyrw_"],0],[[[544],[527],[530],[529]],["单身派对---单身藏品","单身狗 连续充值 ","单身狗 七日累充 ","单身狗  七日消费"],[[["singleParty5RP"]],[["singleDog1RP"]],[["singleDog5RP"]],[["singleDog4RP"]]],["image_common_dscp_","image_common_lchl_","image_common_qrlc_","image_common_qrlx_"],322],[[[532],[528],[531],[537],[536],[538],[539]],["单身狗 寻宝面板","单身狗 累计充值 ","单身狗  单笔充值","兑换 （单身狗）","连续登陆","仙玉狂欢 （单身狗","双倍奖励 （单身狗）"],[[["singleDog7RP"]],[["singleDog2RP"]],[["singleDog6RP"]],[["singleFestConvertRP"]],[["singleFestConLoginRP"]],[["singleFestHilarityRP"]],[["singleFestDoubleRewardRP"]]],["image_common_qdxb_","image_common_mrlc_","image_common_mrdb_","image_common_dsdh_","image_common_lxdl_","image_common_xykh_","image_common_sbjl_"],329],[[[546],[558],[545],[543],[547]],["单身派对---派对之星","单身派对---商城","单身派对---送好人卡","单身派对---奖励预览","单身派对---赠送榜"],[[["singleParty1RP"]],[["singleStoreRP"]],[["singleParty2RP"]],[["singleParty3RP"]],[["singleParty4RP"]]],["image_common_pdzx_","image_common_dssc_","image_common_shrk_","image_common_jlll_","image_common_zsb_"],336],[[[647],[839],[985],[643],[644],[642],[1188],[646],[841]],["至臻消费排行","至臻第三期 集字兑换（国庆类型的兑换）","至臻第四期 至臻兑换（两个兑换道具的兑换）","至臻累计充值","至臻连续充值","至臻单笔充值","至臻连续登陆","至臻仙玉狂欢","特殊掉落"],[[[]],[["zhiZhenConvertRP"]],[["zhiZhenConvert1RP"]],[["zhiZhen2RP"]],[["zhiZhen1RP"]],[["zhiZhen3RP"]],[["zhiZhenFestConLoginRP"]],[[]],[[]]],["image_common_xyph_","image_common_zzdh_","image_common_zzdh_","image_common_mrlc_","image_common_zzlc_","image_common_mrdb_","image_common_lxdl_","image_common_xykh_","image_common_dlkh_"],401],[[[648],[649],[645],[650],[651]],["派对之星","送好人卡","至臻商城","奖励预览","赠送榜"],[[[]],[[]],[[]],[[]],[["zhiZhenParty4RP"]]],["image_common_lzsh_","image_common_zsmg_","image_common_zzsc_","image_common_jlll_","image_common_zsb_"],402],[[[705],[726],[707]],["连续登陆 合区","在线奖励","双倍掉落 合区"],[[["heQuFestConLoginRP"]],[["heQuOnlineRewardRP"]],[["heQuFestDoubleRewardRP"]]],["image_common_lxdl_","image_common_hqzx_","image_common_sbjl_"],439],[[[727],[704],[703],[706]],["寻宝狂欢","累计充值 合区","连续充值 合区","仙玉狂欢 合区"],[[["heQuOnlineXunBaoHappyRP"]],[["heQu2RP"]],[["heQu1RP"]],[["heQuFestHilarityRP"]]],["image_common_xbkh_","image_common_mrlc_","image_common_hqlc_","image_common_xykh_"],438],[[[721],[718],[1402],[1152],[719],[720]],["砸蛋排行","砸蛋","太空连充","小满连充","砸蛋礼包","砸蛋任务"],[[[]],[["zadanRP","zadanChangeRP"]],[["spaceTravelContinuousPayRP"]],[["grainFullContinuousPayRP"]],[["zadanShopRP"]],[["zadanTaskRP"]]],["image_common_zdb_","image_common_xyzd_","image_common_xjlc_","image_common_hhlc_","image_common_zdlb_","image_common_zdfl_"],453],[[[722]],["砸蛋宝库"],[[["zadanChangeRP"]]],["image_common_zdbk_"],579],[[[736],[738],[737]],["狩猎策划","策划杀手","战利品"],[[["hitEngineerRP"]],[["hitEngineerKillerRP"]],[["hitEngineerAwardRP"]]],["image_common_zssd_","image_common_zsdr_","image_common_jlp_"],468],[[[769],[1408]],["战队","福地入口"],[[["warbandDonateRP","warbandLvAwardRP","warbandApplyRP"]],[["welfarePlaceBossRP","welfarePlacePawnRP"]]],["image_common_zd_","image_common_fd_"],467],[[[764]],["战队申请"],[[[]]],["image_common_zd_"],0],[[[816],[818],[812]],["狩猎年兽","年兽杀手","战利品"],[[["hitMonsterNianRP"]],[["hitMonsterNianKillerRP"]],[["hitMonsterNianAwardRP"]]],["image_common_zndg_","image_common_zndr_","image_common_jlp_"],530],[[[856],[853],[854],[855]],["砸蛋排行","砸蛋","砸蛋礼包","砸蛋任务"],[[[]],[["springNightSmashEggRP","springNightSmashEggChangeRP"]],[["springNightSmashEggShopRP"]],[["springNightSmashEggTaskRP"]]],["image_common_zdb_","image_common_xyzd_","image_common_zdlb_","image_common_zdfl_"],560],[[[857]],["砸蛋宝库"],[[["springNightSmashEggChangeRP"]]],["image_common_zdbk_"],580],[[[938],[940],[934]],["植树","植树达人","战利品"],[[["plantingTreesRP"]],[["plantingTreesKillerRP"]],[["plantingTreesAwardRP"]]],["image_common_zszl_","image_common_zsdr_","image_common_jlp_"],621],[[[949],[950],[951]],["新手礼包","每日礼包","等级礼包"],[[["qqLobbyStartRP"]],[["qqLobbyDailyRP"]],[["qqLobbyLevelRP"]]],["image_common_xslb_","image_common_mrlb_","image_common_djlb_"],627],[[[952],[953],[954],[955]],["特权介绍","新手礼包","每日礼包","等级礼包"],[[[]],[["qqBlueStartRP"]],[["qqBlueDailyRP"]],[["qqBlueLevelRP"]]],["image_common_tqjs_","image_common_xslb_","image_common_mrlb_","image_common_djlb_"],632],[[[975],[972],[973],[974]],["砸蛋排行","砸蛋","砸蛋礼包","砸蛋任务"],[[[]],[["vernalEquinoxSmashEggRP","vernalEquinoxSmashEggChangeRP"]],[["vernalEquinoxSmashEggShopRP"]],[["vernalEquinoxSmashEggTaskRP"]]],["image_common_zdb_","image_common_xyzd_","image_common_zdlb_","image_common_zdfl_"],649],[[[976]],["砸蛋宝库"],[[["vernalEquinoxSmashEggChangeRP"]]],["image_common_zdbk_"],648],[[[1014],[1016],[1010]],["boss狂欢","boss狂欢达人","boss狂欢战利品"],[[["bossFeastRP"]],[["bossFeastKillerRP"]],[["bossFeastAwardRP"]]],["image_common_bosssy_","image_common_yhdr_","image_common_zlp_"],676],[[[1022],[1021],[1023]],["藏宝排行","藏宝之地","藏宝步数"],[[[]],[["treasureLandRP","treasureLandBagRP"]],[["treasureLandTaskRP"]]],["image_common_bzlr_","image_common_cbzd_","image_common_qmjl_"],681],[[[1043],[1044],[1045]],["仙盟争霸","奖励预览","奖励分配"],[[["unionWarRP"]],[["unionWarRP1"]],[["unionWarRP2"]]],["image_common_xmzb_","image_common_jlyl_","image_common_jlfp_"],704],[[[1290],[942,943],[1465,1467,1466,1468]],["至尊装备","雷霆装备","梵天装备"],[[["extremeEquioPanelRP"]],[["thunderboltEquipRP1"],["thunderboltEquipRP2"]],[["brahmaRP1"],["brahmaRP2","brahmaResolveRP"],["brahmaRP3"],["brahmaRP4"]]],["image_common_zz_","image_common_lt_","image_common_ft_"],808],[[[990]],["神秘商店"],[[["mysteriousStoreRP"]]],["image_common_smsd_"],701],[[[1142],[1153],[1154],[1146],[1156],[1157],[1149],[1155]],["寻宝","每日累充","每日单笔","商城","七日累消","连续登陆","仙玉狂欢","特殊掉落"],[[["grainFullXunBaoRP"]],[["grainFullDayContinuousPayRP"]],[["grainFullsinglePayRP"]],[["grainFullStoreRP"]],[["grainFull4RP"]],[["grainFullFestConLoginRP"]],[["grainFullHilarityRP"]],[[]]],["image_common_hhxb_","image_common_mrlc_","image_common_mrdb_","image_common_hhsc_","image_common_hhlx_","image_common_lxdl_","image_common_xykh_","image_common_tsdl_"],763],[[[1199],[1195],[1218],[1194],[1197],[1196],[1204],[1205],[1206]],["儿童节 寻宝面板","儿童节 累计充值 ","儿童节  仙玉排行","儿童节 连续充值 ","儿童节 七日累充 ","儿童节  七日消费","儿童节 连续登陆","仙玉狂欢 儿童节","掉落狂欢 儿童节"],[[["childrensDay7RP"]],[["childrensDay2RP"]],[],[["childrensDay1RP"]],[["childrensDay5RP"]],[["childrensDay4RP"]],[["childrensDayFestConLoginRP"]],[["childrensDayFestHilarityRP"]],[["childrensDayFestDoubleRewardRP"]]],["image_common_dsxb_","image_common_mrlc_","image_common_xyph_","image_common_dslc_","image_common_qrlc_","image_common_qrlx_","image_common_lxdl_","image_common_xykh_","image_common_dlkh_"],787],[[[1211],[1212],[1209],[1198],[1214],[1213]],["儿童节---新春福星","儿童节---赠送福字","儿童节---商城","儿童节---每日单笔","儿童节---赠送榜","儿童节---奖励预览"],[[["childrensDayParty1RP"]],[["childrensDayParty2RP"]],[["childrensDayStoreRP"]],[["childrensDay6RP"]],[["childrensDayParty4RP"]],[["childrensDayParty3RP"]]],["image_common_dswh_","image_common_zsgl_","image_common_dssc_","image_common_mrdb_","image_common_zsb_","image_common_jlll_"],788],[[[1222],[1223],[1220],[1224],[1225]],["合区---新春福星","合区---赠送福字","合区---商城","合区---奖励预览","合区---赠送榜"],[[["heQuParty1RP"]],[["heQuParty2RP"]],[["heQuStoreRP"]],[["heQuParty3RP"]],[["heQuParty4RP"]]],["image_common_syzf_","image_common_zslp_","image_common_hqsc_","image_common_jlll_","image_common_zsb_"],814],[[[1160],[1161]],["八卦","八卦强化"],[[["divinatoryCardItemRP"]],[["divinatoryCardStrongRP"]]],["image_common_bg_","image_common_bgqh_"],780],[[[1235],[1234],[1243],[1253],[1236],[1237],[1238]],["睡衣派对每日累充","睡衣派对连充","睡衣派对兑换","睡衣派对 七日累消","连续登陆","仙玉狂欢","掉落狂欢 睡衣派对"],[[["barDay2RP"]],[["barDay1RP"]],[["barDayConvertRP"]],[["barDay4RP"]],[["barDayFestConLoginRP"]],[[]],[[]]],["image_common_mrlc_","image_common_pklc_","image_common_pkdh_","image_common_pklx_","image_common_lxdl_","image_common_xykh_","image_common_dlkh_"],817],[[[1245],[1246],[1241],[1252],[1248],[1247]],["睡衣派对---妇女之光","睡衣派对---赠送锦旗","睡衣派对---商城","睡衣派对每日单笔","睡衣派对---赠送榜","睡衣派对---奖励预览"],[[["barDayParty1RP"]],[["barDayParty2RP"]],[["barDayStoreRP"]],[["barDay6RP"]],[["barDayParty4RP"]],[["barDayParty3RP"]]],["image_common_zqtg_","image_common_snys_","image_common_pksc_","image_common_mrdb_","image_common_zsb_","image_common_jlll_"],818],[[[1277,1278],[1275,1276],[1279,1280],[1281,1282],[1283,1284],[1285,1286]],["仙器之魂","灵宠之魄","神兵之刃","仙翼之羽","时装之袍","天珠之纹"],[[["showEquipRide"],[]],[["showEquipPet"],[]],[["showEquipImmortal"],[]],[["showEquipWing"],[]],[["showEquipFashion"],[]],[["showEquipPearl"],[]]],["image_common_xqzh_","image_common_lczp_","image_common_sbzr_","image_common_xyzy_","image_common_szzp_","image_common_tzzw_"],845],[[[1525],[1303],[1306],[1305]],["单身派对---单身藏品","单身狗 连续充值 ","单身狗 七日累充 ","单身狗  七日消费"],[[["christmas2020Party5RP"]],[["anniversaryDay1RP"]],[["anniversaryDay5RP"]],[["anniversaryDay4RP"]]],["image_common_sdcp_","image_common_sdlc_","image_common_sdlch_","image_common_sdlx_"],1020],[[[1308],[1304],[1327],[1313],[1314],[1315]],["周年庆 寻宝面板","周年庆 累计充值 ","周年庆  仙玉排行","周年庆 连续登陆","仙玉狂欢 周年庆","掉落狂欢 周年庆"],[[["anniversaryDay7RP"]],[["anniversaryDay2RP"]],[],[["anniversaryDayFestConLoginRP"]],[["anniversaryDayFestHilarityRP"]],[["anniversaryDayFestDoubleRewardRP"]]],["image_common_sdxb_","image_common_mrlc_","image_common_xyph_","image_common_lxdl_","image_common_xykh_","image_common_dlkh_"],861],[[[1320],[1321],[1318],[1307],[1323],[1322]],["周年庆---新春福星","周年庆---赠送福字","周年庆---商城","周年庆---每日单笔","周年庆---赠送榜","周年庆---奖励预览"],[[["anniversaryDayParty1RP"]],[["anniversaryDayParty2RP"]],[["anniversaryDayStoreRP"]],[["anniversaryDay6RP"]],[["anniversaryDayParty4RP"]],[["anniversaryDayParty3RP"]]],["image_common_sdzx_","image_common_zswz_","image_common_sdsc_","image_common_mrdb_","image_common_zsb_","image_common_jlll_"],862],[[[1335],[1336],[1343]],["圣尊返利","密藏返利","仙缘返利"],[[["treasureRebateRP6"]],[["treasureRebateRP7"]],[["treasureRebateRP8"]]],["image_common_szfl_","image_common_mzfl_","image_common_xyfl_"],886],[[[1345],[1344],[1346]],["夺宝奇兵","遗迹探秘","战利品"],[[[]],[["ruinsRP"]],[["ruinsTaskRP","ruinsTaskRP1"]]],["image_common_dbqb_","image_common_yjtm_","image_common_zlp_"],895],[[[1364],[1362],[1363]],["红包1","红包2","红包3"],[[["redBagPlayerRP"]],[["redBagLuckRP"]],[["redBagAwardRP"]]],["image_common_wjhb_","image_common_xyhb_","image_common_jlhb_"],906],[[[1389]],["战魂累充"],[[["fightSoulPayRP"]]],["image_common_zhft_"],923],[[[1392],[1403],[1404],[1396],[1406],[1407],[1399],[1405]],["寻宝","每日累充","每日单笔","商城","七日累消","连续登陆","仙玉狂欢","特殊掉落"],[[["spaceTravelXunBaoRP"]],[["spaceTravelDayContinuousPayRP"]],[["spaceTravelsinglePayRP"]],[["spaceTravelStoreRP"]],[["spaceTravel4RP"]],[["spaceTravelFestConLoginRP"]],[["spaceTravelHilarityRP"]],[[]]],["image_common_xjxb_","image_common_mrlc_","image_common_mrdb_","image_common_xjsc_","image_common_xjlx_","image_common_lxdl_","image_common_xykh_","image_common_tsdl_"],926],[[[1409],[1410]],["魔王挑战","祝融试炼"],[[["welfarePlaceBossRP"]],[["welfarePlacePawnRP"]]],["image_common_mwtz_","image_common_zrsl_"],0],[[[1434],[1445],[1430],[1431],[1429],[1443],[1433],[1447]],["至臻消费排行","至臻第四期 至臻兑换（两个兑换道具的兑换）","至臻累计充值","至臻连续充值","至臻单笔充值","至臻连续登陆","至臻仙玉狂欢","特殊掉落"],[[[]],[["perfectestTenConvert1RP"]],[["perfectestTen2RP"]],[["perfectestTen1RP"]],[["perfectestTen3RP"]],[["perfectestTenFestConLoginRP"]],[[]],[[]]],["image_common_xyph_","image_common_wydh_","image_common_mrlc_","image_common_wylc_","image_common_mrdb_","image_common_lxdl_","image_common_xykh_","image_common_dlkh_"],947],[[[1435],[1436],[1432],[1437],[1438]],["派对之星","送好人卡","至臻商城","奖励预览","赠送榜"],[[[]],[[]],[[]],[[]],[["perfectestTenParty4RP"]]],["image_common_yjzw_","image_common_zscb_","image_common_wysc_","image_common_jlll_","image_common_zsb_"],948],[[[1457]],["天书累充"],[[["skyBookPayRP"]]],["image_common_tslc_"],967],[[[1459]],["梵天累充"],[[["brahmaPayRP"]]],["image_common_jpft_"],969],[[[1516]],["年终秒杀"],[[["nianEndOneBuyRP"]]],["image_common_nzms_"],1011],[[[1517],[1522,1521],[1519],[1520]],["年终排行","奖励预览","年终累充","每日登陆"],[[[]],[[]],[["nianEndaccPayRP"]],[["nianEndDailylogRP"]]],["image_common_dfph_","image_common_jlyl_","image_common_nzlc_","image_common_lxdl_"],1016],[[[1546],[1545],[1554],[1564],[1547],[1548],[1549]],["梨园春色每日累充","梨园春色连充","梨园春色兑换","梨园春色 七日累消","连续登陆","仙玉狂欢","掉落狂欢 梨园春色"],[[["springScenery2RP"]],[["springScenery1RP"]],[["springSceneryConvertRP"]],[["springScenery4RP"]],[["springSceneryFestConLoginRP"]],[[]],[[]]],["image_common_mrlc_","image_common_lylc_","image_common_lydh_","image_common_lylx_","image_common_lxdl_","image_common_xykh_","image_common_dlkh_"],1032],[[[1556],[1557],[1552],[1563],[1559],[1558]],["梨园春色---妇女之光","梨园春色---赠送锦旗","梨园春色---商城","梨园春色每日单笔","梨园春色---赠送榜","梨园春色---奖励预览"],[[["springSceneryParty1RP"]],[["springSceneryParty2RP"]],[["springSceneryStoreRP"]],[["springScenery6RP"]],[["springSceneryParty4RP"]],[["springSceneryParty3RP"]]],["image_common_lydz_","image_common_zengslp_","image_common_lysc_","image_common_mrdb_","image_common_zsb_","image_common_jlll_"],1033]],this._table={},this._tabEnterTable={},this._redTable={};for(var t=0,e=this._arr.length;t<e;t++){for(var i=this._arr[t],n=0,s=i[0].length;n<s;n++)for(var o=i[0][n],a=0,r=o.length;a<r;a++)this._table[o[a]]&&console.log("bottom_tab_config中重复注册面板.............."+o[a]),this._table[o[a]]=i,this._redTable[o[a]]=i[2][n]?i[2][n][a]:null;this._tabEnterTable[i[4]]=i}},n.prototype.getTabInfoByPanelId=function(t){return this._table[t]},n.prototype.getTabInfoByEnterId=function(t){return this._tabEnterTable[t]},n.prototype.getRpsByPanelId=function(t){return this._redTable[t]},i=n,e.BottomTabConfig=i}(modules=modules||{}),function(e){var i,s,n,o,a,t;function r(){var t=s.call(this)||this;return t.on("display",t,t.displayHandler),t.on("undisplay",t,t.undisplayHandler),t}i=e.core||(e.core={}),n=e.bottomTab.BottomTabCtrl,o=e.redPoint.RedPointCtrl,a=e.guide.GuideModel,s=laya.ui.View,__extends(r,s),r.prototype.initialize=function(){s.prototype.initialize.call(this),this.titleTxt&&(this.titleTxt.color="#626d97",this.titleTxt.fontSize=28,this.titleTxt.x=284,this.titleTxt.y=51,this.titleTxt.width=160,this.titleTxt.align="center"),this.closeBtn&&("common/btn_tongyong_13.png"===this.closeBtn.skin&&(this.closeBtn.hitArea=new Laya.Rectangle(7,11,60,60)),1280===this.height&&720===this.width&&this.closeBtn.pos(653,73)),this.layer=4,this.closeByOthers=!0},r.prototype.displayHandler=function(){this.onEvt(),this.onOpened()},r.prototype.undisplayHandler=function(){this.offEvt(),this._isOpened=!1},r.prototype.onEvt=function(){this.onAutoClick(this.closeBtn,this,this.close),this.onAutoClick(this.backBtn,this,this.close),this.onAutoClick(this.helpBtn,this,this.onHelp)},r.prototype.offEvt=function(){this.offAutoEvt(),this.removeAutoRP()},r.prototype.onHelp=function(){this._helpId&&CommonUtil.alertHelp(this._helpId)},r.prototype.onAutoGlobalEvt=function(t,e,i,n){return this.onAutoEvt(GlobalData.dispatcher,t,e,i,n)},r.prototype.onAutoClick=function(t,e,i,n){return this.onAutoEvt(t,"click",e,i,n)},r.prototype.onAutoEvt=function(t,e,i,n,s){if(!t)return this;var o=[t,e,i,n];return o[0].on(o[1],o[2],o[3],s),this._autoEvents||(this._autoEvents=[]),this._autoEvents.push(o),this},r.prototype.offAutoEvt=function(){if(!this._autoEvents)return this;for(var t=0,e=this._autoEvents.length;t<e;t++){var i=this._autoEvents[t];i[0].off(i[1],i[2],i[3])}return this._autoEvents.length=0,this},r.prototype.regAutoRP=function(t,e){return o.instance.registeRedPoint(t,e),this._autoRedPointEvents||(this._autoRedPointEvents=[]),this._autoRedPointEvents.push(t),this},r.prototype.removeAutoRP=function(){if(!this._autoRedPointEvents)return this;for(var t=0,e=this._autoRedPointEvents.length;t<e;t++)o.instance.retireRedPoint(this._autoRedPointEvents[t]);return this._autoRedPointEvents.length=0,this},r.prototype.onOpened=function(){this._isOpened=!0;var t=i.WindowConfig.instance.getWindowConfigById(this.panelId);t&&t[5]&&n.instance.openTabByPanel(this.panelId),GlobalData.dispatcher.event("PANEL_OPENED",this.panelId)},r.prototype.setOpenParamInterface=function(t){this.setOpenParam(t),this._isOpened&&this.onOpened()},r.prototype.setOpenParam=function(t){},r.prototype.close=function(){i.WindowManager.instance.isOpened(this.panelId)&&i.WindowManager.instance.close(this.panelId,null,!0),this.removeSelf();var t=i.WindowConfig.instance.getWindowConfigById(this.panelId);t&&t[5]&&n.instance.closeTab(this._isClosedByOthers),GlobalData.dispatcher.event("PANEL_CLOSED",this.panelId),e.arena.ArenaModel.instance.waitState&&e.bottomTab.BottomTabCtrl.instance.clearStackPartBaseWin()},r.prototype.closeByOtherPanel=function(){this._isClosedByOthers=!0,this.close(),this._isClosedByOthers=!1},r.prototype.regGuideSpr=function(t,e){e&&(this._guideSprites||(this._guideSprites=[]),-1===this._guideSprites.indexOf(e)&&(this._guideSprites.push(e),e.on("display",this,this.guideSprDisplayHandler,[t,e]),e.on("undisplay",this,this.guideSprUndisplayHandler,[t])))},r.prototype.removeGuideSpr=function(t,e){if(e&&this._guideSprites){e.off("display",this,this.guideSprDisplayHandler),e.off("undisplay",this,this.guideSprUndisplayHandler),a.instance.getUIByid(t)===e&&this.guideSprUndisplayHandler(t);var i=this._guideSprites.indexOf(e);-1!==i&&this._guideSprites.splice(i,1)}},r.prototype.guideSprDisplayHandler=function(t,e){a.instance.registeUI(t,e)},r.prototype.guideSprUndisplayHandler=function(t){a.instance.removeUI(t)},r.prototype.destroy=function(t){if(void 0===t&&(t=!0),this.closeBtn=this.backBtn=null,this.titleTxt=null,this._autoEvents&&(this.offAutoEvt(),this._autoEvents=null),this._autoRedPointEvents&&(this.removeAutoRP(),this._autoRedPointEvents.length=0,this._autoRedPointEvents=null),s.prototype.destroy.call(this,t),this._guideSprites){for(var e=0,i=this._guideSprites.length;e<i;e++){var n=this._guideSprites[e];n.off("display",this,this.guideSprDisplayHandler),n.off("undisplay",this,this.guideSprUndisplayHandler)}this._guideSprites.length=0,this._guideSprites=null}},r.prototype.destroyElement=function(t){if(t instanceof Array){if(t){for(var e=0,i=t.length;e<i;++e)t[e]&&t[e].destroy(!0);t.length=0}}else t&&t.destroy(!0);return null},t=r,i.BaseView=t}(modules=modules||{}),function(e){var i,s,n,o,a,t;function r(t){var e=this;return e._cls=t,(e=s.call(this)||this).on("display",e,function(){e.onEvt(),e.onOpened()}),e.on("undisplay",e,function(){e.offEvt(),e._isOpened=!1}),e}i=e.core||(e.core={}),n=e.redPoint.RedPointCtrl,o=e.bottomTab.BottomTabCtrl,a=e.guide.GuideModel,s=Laya.Component,__extends(r,s),r.prototype.createChildren=function(){this.v=new this._cls,this.addChild(this.v)},r.prototype.initialize=function(){this.width=this.v.width,this.height=this.v.height,this.layer=4,this.closeByOthers=!0;var t=this.v;t.closeBtn&&("common/btn_tongyong_13.png"===t.closeBtn.skin&&(t.closeBtn.hitArea=new Laya.Rectangle(7,11,60,60)),1280===this.height&&720===this.width&&t.closeBtn.pos(653,73))},r.prototype.onEvt=function(){this.onAutoClick(this.v.closeBtn,this,this.close),this.onAutoClick(this.v.backBtn,this,this.close)},r.prototype.offEvt=function(){this.offAutoEvt(),this.removeAutoRP()},r.prototype.onAutoGlobalEvt=function(t,e,i,n){return this.onAutoEvt(GlobalData.dispatcher,t,e,i,n)},r.prototype.onAutoClick=function(t,e,i,n){return this.onAutoEvt(t,"click",e,i,n)},r.prototype.onAutoEvt=function(t,e,i,n,s){if(!t)return this;var o=[t,e,i,n];return o[0].on(o[1],o[2],o[3],s),this._autoEvents||(this._autoEvents=[]),this._autoEvents.push(o),this},r.prototype.offAutoEvt=function(){if(!this._autoEvents)return this;for(var t=0,e=this._autoEvents.length;t<e;t++){var i=this._autoEvents[t];i[0].off(i[1],i[2],i[3])}return this._autoEvents.length=0,this},r.prototype.regAutoRP=function(t,e){return n.instance.registeRedPoint(t,e),this._autoRPs||(this._autoRPs=[]),this._autoRPs.push(t),this},r.prototype.removeAutoRP=function(){if(!this._autoRPs)return this;for(var t=0,e=this._autoRPs.length;t<e;t++)n.instance.retireRedPoint(this._autoRPs[t]);return this._autoRPs.length=0,this},r.prototype.onOpened=function(){this._isOpened=!0;var t=i.WindowConfig.instance.getWindowConfigById(this.panelId);t&&t[5]&&o.instance.openTabByPanel(this.panelId),GlobalData.dispatcher.event("PANEL_OPENED",this.panelId)},r.prototype.setOpenParamInterface=function(t){this.setOpenParam(t),this._isOpened&&this.onOpened()},r.prototype.setOpenParam=function(t){},r.prototype.close=function(){i.WindowManager.instance.isOpened(this.panelId)&&i.WindowManager.instance.close(this.panelId,null,!0),this.removeSelf();var t=i.WindowConfig.instance.getWindowConfigById(this.panelId);t&&t[5]&&o.instance.closeTab(this._isClosedByOthers),GlobalData.dispatcher.event("PANEL_CLOSED",this.panelId),e.arena.ArenaModel.instance.waitState&&e.bottomTab.BottomTabCtrl.instance.clearStackPartBaseWin()},r.prototype.closeByOtherPanel=function(){this._isClosedByOthers=!0,this.close(),this._isClosedByOthers=!1},r.prototype.regGuideSpr=function(t,e){e&&(this._guideSprites||(this._guideSprites=[]),-1===this._guideSprites.indexOf(e)&&(this._guideSprites.push(e),e.on("display",this,this.onGuideSprDisplay,[t,e]),e.on("undisplay",this,this.onGuideSprUndisplay,[t])))},r.prototype.removeGuideSpr=function(t,e){if(e&&this._guideSprites){e.off("display",this,this.onGuideSprDisplay),e.off("undisplay",this,this.onGuideSprUndisplay),a.instance.getUIByid(t)===e&&this.onGuideSprUndisplay(t);var i=this._guideSprites.indexOf(e);-1!==i&&this._guideSprites.splice(i,1)}},r.prototype.onGuideSprDisplay=function(t,e){a.instance.registeUI(t,e)},r.prototype.onGuideSprUndisplay=function(t){a.instance.removeUI(t)},r.prototype.destroy=function(t){if(void 0===t&&(t=!0),this.v&&this.v.destroy(),this.v=null,this._autoEvents&&(this.offAutoEvt(),this._autoEvents=null),this._autoRPs&&(this.removeAutoRP(),this._autoRPs.length=0,this._autoRPs=null),s.prototype.destroy.call(this,t),this._guideSprites){for(var e=0,i=this._guideSprites.length;e<i;e++){var n=this._guideSprites[e];n.off("display",this,this.onGuideSprDisplay),n.off("undisplay",this,this.onGuideSprUndisplay)}this._guideSprites.length=0,this._guideSprites=null}},r.prototype.destroyElement=function(t){if(t instanceof Array){if(t){for(var e=0,i=t.length;e<i;++e)t[e]&&t[e].destroy(!0);t.length=0}}else t&&t.destroy(!0);return null},t=r,i.BaseViewEx=t}(modules=modules||{}),function(t){var i,n,s,o,e;function a(){var t=n.call(this)||this;return t.on(s.DISPLAY,t,t.displayHandler),t.on(s.UNDISPLAY,t,t.undisplayHandler),t.anchorX=t.anchorY=.5,t.isModal=!0,t}i=t.core||(t.core={}),s=Laya.Event,o=t.redPoint.RedPointCtrl,n=laya.ui.Dialog,__extends(a,n),a.prototype.displayHandler=function(){this.onEvt()},a.prototype.undisplayHandler=function(){this.offEvt(),this._isOpened=!1},a.prototype.onEvt=function(){this.closeBtn&&this.closeBtn.on(s.CLICK,this,this.close)},a.prototype.offEvt=function(){this.closeBtn&&this.closeBtn.off(s.CLICK,this,this.close),this.offAutoEvt()},a.prototype.onAutoGlobalEvt=function(t,e,i,n){return this.onAutoEvt(GlobalData.dispatcher,t,e,i,n)},a.prototype.onAutoClick=function(t,e,i,n){return this.onAutoEvt(t,s.CLICK,e,i,n)},a.prototype.onAutoEvt=function(t,e,i,n,s){var o=[t,e,i,n];return o[0].on(o[1],o[2],o[3],s),this._autoEvents||(this._autoEvents=[]),this._autoEvents.push(o),this},a.prototype.offAutoEvt=function(){if(!this._autoEvents)return this;for(var t=0,e=this._autoEvents.length;t<e;t++){var i=this._autoEvents[t];i[0].off(i[1],i[2],i[3])}return this._autoEvents.length=0,this},a.prototype.regAutoRP=function(t,e){return o.instance.registeRedPoint(t,e),this._autoRedPointEvents||(this._autoRedPointEvents=[]),this._autoRedPointEvents.push(t),this},a.prototype.removeAutoRP=function(){if(!this._autoRedPointEvents)return this;for(var t=0,e=this._autoRedPointEvents.length;t<e;t++)o.instance.retireRedPoint(this._autoRedPointEvents[t]);return this._autoRedPointEvents.length=0,this},a.prototype.initialize=function(){n.prototype.initialize.call(this),this.closeOnSide=!0,this.clickCD=!1},a.prototype.setOpenParamInterface=function(t){this.setOpenParam(t),this._isOpened&&this.onOpened()},a.prototype.setOpenParam=function(t){},a.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._isOpened=!0,this.clickCD&&(this.closeOnSide=!1,Laya.timer.once(1e3,this,this.cdEndHandler)),GlobalData.dispatcher.event("PANEL_OPENED",this.dialogId)},a.prototype.cdEndHandler=function(){this.closeOnSide=!0},a.prototype.close=function(t,e){Laya.timer.clear(this,this.cdEndHandler),i.WindowManager.instance.isOpened(this.dialogId)&&i.WindowManager.instance.close(this.dialogId,null,!0),n.prototype.close.call(this,t,e),GlobalData.dispatcher.event("PANEL_CLOSED",this.dialogId)},a.prototype.destroyElement=function(t){if(t instanceof Array){if(t){for(var e=0,i=t.length;e<i;++e)t[e]&&t[e].destroy(!0);t.length=0}}else t&&t.destroy(!0);return null},a.prototype.destroy=function(){this.bgImg=null,this._autoEvents&&(this.offAutoEvt(),this._autoEvents.length=0,this._autoEvents=null),this._autoRedPointEvents&&(this.removeAutoRP(),this._autoRedPointEvents.length=0,this._autoRedPointEvents=null),n.prototype.destroy.call(this,!0)},e=a,i.BaseDialog=e}(modules=modules||{}),function(t){var i,n,s,e;function o(t){var e=this;return e._cls=t,(e=n.call(this)||this).on("display",e,function(){e.onEvt()}),e.on("undisplay",e,function(){e.offEvt(),e._isOpened=!1}),e.anchorX=e.anchorY=.5,e.isModal=!0,e}i=t.core||(t.core={}),s=t.redPoint.RedPointCtrl,n=Laya.Dialog,__extends(o,n),o.prototype.createChildren=function(){this.v=new this._cls,this.addChild(this.v),this.closeBtn=this.v.closeBtn},o.prototype.initialize=function(){this.width=this.v.width,this.height=this.v.height,this.closeOnSide=!0,this.clickCD=!1},o.prototype.onEvt=function(){this.onAutoClick(this.closeBtn,this,this.close)},o.prototype.offEvt=function(){this.offAutoEvt(),this.removeAutoRP()},o.prototype.onAutoGlobalEvt=function(t,e,i,n){return this.onAutoEvt(GlobalData.dispatcher,t,e,i,n)},o.prototype.onAutoClick=function(t,e,i,n){return this.onAutoEvt(t,"click",e,i,n)},o.prototype.onAutoEvt=function(t,e,i,n,s){if(!t)return this;var o=[t,e,i,n];return o[0].on(o[1],o[2],o[3],s),this._autoEvents||(this._autoEvents=[]),this._autoEvents.push(o),this},o.prototype.offAutoEvt=function(){if(!this._autoEvents)return this;for(var t=0,e=this._autoEvents.length;t<e;t++){var i=this._autoEvents[t];i[0].off(i[1],i[2],i[3])}return this._autoEvents.length=0,this},o.prototype.regAutoRP=function(t,e){return s.instance.registeRedPoint(t,e),this._autoRPs||(this._autoRPs=[]),this._autoRPs.push(t),this},o.prototype.removeAutoRP=function(){if(!this._autoRPs)return this;for(var t=0,e=this._autoRPs.length;t<e;t++)s.instance.retireRedPoint(this._autoRPs[t]);return this._autoRPs.length=0,this},o.prototype.setOpenParamInterface=function(t){this.setOpenParam(t),this._isOpened&&this.onOpened()},o.prototype.setOpenParam=function(t){},o.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._isOpened=!0,this.clickCD&&(this.closeOnSide=!1,Laya.timer.once(1e3,this,this.cdEndHandler)),GlobalData.dispatcher.event("PANEL_OPENED",this.dialogId)},o.prototype.cdEndHandler=function(){this.closeOnSide=!0},o.prototype.close=function(t,e){Laya.timer.clear(this,this.cdEndHandler),i.WindowManager.instance.close(this.dialogId,null,!0),n.prototype.close.call(this,t,e),GlobalData.dispatcher.event("PANEL_CLOSED",this.dialogId)},o.prototype.destroyElement=function(t){if(t instanceof Array){if(t){for(var e=0,i=t.length;e<i;++e)t[e]&&t[e].destroy(!0);t.length=0}}else t&&t.destroy(!0);return null},o.prototype.destroy=function(){this.bgImg=null,this._autoEvents&&(this.offAutoEvt(),this._autoEvents.length=0,this._autoEvents=null),this._autoRPs&&(this.removeAutoRP(),this._autoRPs.length=0,this._autoRPs=null),n.prototype.destroy.call(this,!0)},e=o,i.BaseDialogEx=e}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.common||(t.common={}),n=t.core.BaseView,s=Laya.Event,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._selectEnable=!0},Object.defineProperty(a.prototype,"selectEnable",{get:function(){return this._selectEnable},set:function(t){this._selectEnable=t},enumerable:!0,configurable:!0}),a.prototype.undisplayHandler=function(){i.prototype.undisplayHandler.call(this),this.close()},a.prototype.close=function(){},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.on(s.MOUSE_DOWN,this,this.downHandler),this.on(s.MOUSE_UP,this,this.upHandler)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.off(s.MOUSE_DOWN,this,this.downHandler),this.off(s.MOUSE_UP,this,this.upHandler)},a.prototype.downHandler=function(){this._downX=Laya.stage.mouseX,this._downY=Laya.stage.mouseY,this._downTime=Browser.now()},a.prototype.upHandler=function(){var t=Laya.stage.mouseX-this._downX,e=Laya.stage.mouseY-this._downY,i=Browser.now()-this._downTime;t<5&&-5<t&&e<5&&-5<e&&i<300&&this.clickHandler()},a.prototype.clickHandler=function(){},Object.defineProperty(a.prototype,"selected",{get:function(){return this._selected},set:function(t){this.setSelected(t)},enumerable:!0,configurable:!0}),a.prototype.setSelected=function(t){this._selected=t},Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),a.prototype.setData=function(t){this._data=t},a.prototype.refresh=function(){this.setData(this._data)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._data=null,i.prototype.destroy.call(this,t)},o=a,e.ItemRender=o}(modules=modules||{});var ui,View=laya.ui.View,Dialog=laya.ui.Dialog,BaseView=modules.core.BaseView,BaseDialog=modules.core.BaseDialog,ItemRender=modules.common.ItemRender;!function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ActionPreviewAlert")},n);function n(){return e.call(this)||this}t.ActionPreviewAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ActionPreviewItem")},n);function n(){return e.call(this)||this}t.ActionPreviewItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ActionPreviewNewAlert")},n);function n(){return e.call(this)||this}t.ActionPreviewNewAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ActionPreviewView")},n);function n(){return e.call(this)||this}t.ActionPreviewViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ActivityAllAlert")},n);function n(){return e.call(this)||this}t.ActivityAllAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ActivityAllItem")},n);function n(){return e.call(this)||this}t.ActivityAllItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ActivityAllView")},n);function n(){return e.call(this)||this}t.ActivityAllViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ActivityIconItem")},n);function n(){return e.call(this)||this}t.ActivityIconItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ActivityPreView")},n);function n(){return e.call(this)||this}t.ActivityPreViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("AdventureItem")},n);function n(){return e.call(this)||this}t.AdventureItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("AdventureMonsterView")},n);function n(){return e.call(this)||this}t.AdventureMonsterViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("AdventureShopView")},n);function n(){return e.call(this)||this}t.AdventureShopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.adventure.AdventureItem",modules.adventure.AdventureItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("AdventureView")},n);function n(){return e.call(this)||this}t.AdventureViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.anniversary_day_good_man.AnniversaryDayGoodManItem",modules.anniversary_day_good_man.AnniversaryDayGoodManItem),View.regComponent("modules.anniversary_day_good_man.AnniversaryDayGoodManItem1",modules.anniversary_day_good_man.AnniversaryDayGoodManItem1),e.prototype.createChildren.call(this),this.loadUI("AnniversaryDayGoodManView")},n);function n(){return e.call(this)||this}t.AnniversaryDayGoodManViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.anniversary_day_star.AnniversaryDayStarItem2",modules.anniversary_day_star.AnniversaryDayStarItem2),View.regComponent("modules.single_dog_sart.SingleDogSartItem3",modules.single_dog_sart.SingleDogSartItem3),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("AnniversaryDaySartItem1")},n);function n(){return e.call(this)||this}t.AnniversaryDaySartItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.anniversary_day_star.AnniversaryDayStarItem1",modules.anniversary_day_star.AnniversaryDayStarItem1),e.prototype.createChildren.call(this),this.loadUI("AnniversaryDaySartView")},n);function n(){return e.call(this)||this}t.AnniversaryDaySartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("AnnouncementItem")},n);function n(){return e.call(this)||this}t.AnnouncementItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("AnnouncementView")},n);function n(){return e.call(this)||this}t.AnnouncementViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.archive.ArchiveItem",modules.archive.ArchiveItem),e.prototype.createChildren.call(this),this.loadUI("ArchiveActiveAlert")},n);function n(){return e.call(this)||this}t.ArchiveActiveAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ArchiveBottomItem")},n);function n(){return e.call(this)||this}t.ArchiveBottomItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ArchiveItem")},n);function n(){return e.call(this)||this}t.ArchiveItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.archive.ArchiveItem",modules.archive.ArchiveItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ArchiveParticularAlert")},n);function n(){return e.call(this)||this}t.ArchiveParticularAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ArchiveView")},n);function n(){return e.call(this)||this}t.ArchiveViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ArenaLoseAlert")},n);function n(){return e.call(this)||this}t.ArenaLoseAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ArenaRankAlert")},n);function n(){return e.call(this)||this}t.ArenaRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ArenaRankItem")},n);function n(){return e.call(this)||this}t.ArenaRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ArenaRecordsAlert")},n);function n(){return e.call(this)||this}t.ArenaRecordsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ArenaRecordsItem")},n);function n(){return e.call(this)||this}t.ArenaRecordsItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ArenaView")},n);function n(){return e.call(this)||this}t.ArenaViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ArenaWinAlert")},n);function n(){return e.call(this)||this}t.ArenaWinAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("AttrAlert")},n);function n(){return e.call(this)||this}t.AttrAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("AuctionAlert")},n);function n(){return e.call(this)||this}t.AuctionAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("AuctionLogAlert")},n);function n(){return e.call(this)||this}t.AuctionLogAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("AuctionLogItem")},n);function n(){return e.call(this)||this}t.AuctionLogItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("auction_store_addon")},n);function n(){return e.call(this)||this}t.auction_store_addonUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("AutoBuyAlert")},n);function n(){return e.call(this)||this}t.AutoBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BabyActiveSkillSetAlert")},n);function n(){return e.call(this)||this}t.BabyActiveSkillSetAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BabyActiveSkillView")},n);function n(){return e.call(this)||this}t.BabyActiveSkillViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("ui.SkillIcon1UI",t.SkillIcon1UI),e.prototype.createChildren.call(this),this.loadUI("BabyGradeView")},n);function n(){return e.call(this)||this}t.BabyGradeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("ui.SkillIconUI",t.SkillIconUI),e.prototype.createChildren.call(this),this.loadUI("BabyGrowthView")},n);function n(){return e.call(this)||this}t.BabyGrowthViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BabySkillAlert")},n);function n(){return e.call(this)||this}t.BabySkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("BabyTonicView")},n);function n(){return e.call(this)||this}t.BabyTonicViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("BagSelectItem")},n);function n(){return e.call(this)||this}t.BagSelectItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("BagSelectView")},n);function n(){return e.call(this)||this}t.BagSelectViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BagView")},n);function n(){return e.call(this)||this}t.BagViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BaozangF5Alert")},n);function n(){return e.call(this)||this}t.BaozangF5AlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BaozangHelpListView")},n);function n(){return e.call(this)||this}t.BaozangHelpListViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("BaozangItem")},n);function n(){return e.call(this)||this}t.BaozangItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BaozangListView")},n);function n(){return e.call(this)||this}t.BaozangListViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BaozangMineView")},n);function n(){return e.call(this)||this}t.BaozangMineViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BaozangSpeedAlert")},n);function n(){return e.call(this)||this}t.BaozangSpeedAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bar_day_good_man.BarDayGoodManItem",modules.bar_day_good_man.BarDayGoodManItem),View.regComponent("modules.bar_day_good_man.BarDayGoodManItem1",modules.bar_day_good_man.BarDayGoodManItem1),e.prototype.createChildren.call(this),this.loadUI("BarDayGoodManView")},n);function n(){return e.call(this)||this}t.BarDayGoodManViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bar_day_star.BarDayStarItem2",modules.bar_day_star.BarDayStarItem2),View.regComponent("modules.single_dog_sart.SingleDogSartItem3",modules.single_dog_sart.SingleDogSartItem3),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BarDaySartItem1")},n);function n(){return e.call(this)||this}t.BarDaySartItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bar_day_star.BarDayStarItem1",modules.bar_day_star.BarDayStarItem1),e.prototype.createChildren.call(this),this.loadUI("BarDaySartView")},n);function n(){return e.call(this)||this}t.BarDaySartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BarPartyAlert")},n);function n(){return e.call(this)||this}t.BarPartyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BarPartyBigAwardAlert")},n);function n(){return e.call(this)||this}t.BarPartyBigAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BaseItem")},n);function n(){return e.call(this)||this}t.BaseItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BeasstBossAndPlayerListView")},n);function n(){return e.call(this)||this}t.BeasstBossAndPlayerListViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("BeastBossChangeItem")},n);function n(){return e.call(this)||this}t.BeastBossChangeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BeastBossItem")},n);function n(){return e.call(this)||this}t.BeastBossItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BeastBossSingleBossView")},n);function n(){return e.call(this)||this}t.BeastBossSingleBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.beast_boss.BeastBossItem",modules.beast_boss.BeastBossItem),e.prototype.createChildren.call(this),this.loadUI("BeastBossView")},n);function n(){return e.call(this)||this}t.BeastBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BeastEquipAlert")},n);function n(){return e.call(this)||this}t.BeastEquipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentBagItem")},n);function n(){return e.call(this)||this}t.BeastEquipmentBagItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentItem")},n);function n(){return e.call(this)||this}t.BeastEquipmentItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentItem1")},n);function n(){return e.call(this)||this}t.BeastEquipmentItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentItem2")},n);function n(){return e.call(this)||this}t.BeastEquipmentItem2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.beast_equipment.BagSelectPanel",modules.beast_equipment.BagSelectPanel),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentResolveAndChangeAlert")},n);function n(){return e.call(this)||this}t.BeastEquipmentResolveAndChangeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentResolveItem")},n);function n(){return e.call(this)||this}t.BeastEquipmentResolveItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentSkillAlert")},n);function n(){return e.call(this)||this}t.BeastEquipmentSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.beast_equipment.BeastEquipmentItem2",modules.beast_equipment.BeastEquipmentItem2),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentUpAlert")},n);function n(){return e.call(this)||this}t.BeastEquipmentUpAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentUpCzNumAlert")},n);function n(){return e.call(this)||this}t.BeastEquipmentUpCzNumAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentUpgradeItem")},n);function n(){return e.call(this)||this}t.BeastEquipmentUpgradeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.beast_equipment.BeastEquipmentUpgradeItem1",modules.beast_equipment.BeastEquipmentUpgradeItem1),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BeastEquipmentView")},n);function n(){return e.call(this)||this}t.BeastEquipmentViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("BelongView")},n);function n(){return e.call(this)||this}t.BelongViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("BeProposeAlert")},n);function n(){return e.call(this)||this}t.BeProposeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BigTower")},n);function n(){return e.call(this)||this}t.BigTowerUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("BigTowerLevelView")},n);function n(){return e.call(this)||this}t.BigTowerLevelViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BindPhoneAlert")},n);function n(){return e.call(this)||this}t.BindPhoneAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BinghunIcon")},n);function n(){return e.call(this)||this}t.BinghunIconUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BlackListItem")},n);function n(){return e.call(this)||this}t.BlackListItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.born.BornItem",modules.born.BornItem),e.prototype.createChildren.call(this),this.loadUI("BornAlert")},n);function n(){return e.call(this)||this}t.BornAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("BornItem")},n);function n(){return e.call(this)||this}t.BornItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("BornSuccessAlert")},n);function n(){return e.call(this)||this}t.BornSuccessAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.born.BornItem",modules.born.BornItem),e.prototype.createChildren.call(this),this.loadUI("BornView")},n);function n(){return e.call(this)||this}t.BornViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("BossFeastView")},n);function n(){return e.call(this)||this}t.BossFeastViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BossHomeAwardAlert")},n);function n(){return e.call(this)||this}t.BossHomeAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BossHomeItem")},n);function n(){return e.call(this)||this}t.BossHomeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("ui.BossHomeItemUI",t.BossHomeItemUI),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BossHomeView")},n);function n(){return e.call(this)||this}t.BossHomeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BossListItem")},n);function n(){return e.call(this)||this}t.BossListItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BossRevive")},n);function n(){return e.call(this)||this}t.BossReviveUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("BottomChatNotice")},n);function n(){return e.call(this)||this}t.BottomChatNoticeUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),View.regComponent("modules.main.BottomChatNoticePanel",modules.main.BottomChatNoticePanel),e.prototype.createChildren.call(this),this.loadUI("BottomView")},n);function n(){return e.call(this)||this}t.BottomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BoxAwardAlert")},n);function n(){return e.call(this)||this}t.BoxAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BoxOpenAlert")},n);function n(){return e.call(this)||this}t.BoxOpenAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BrahmaBuyAlert")},n);function n(){return e.call(this)||this}t.BrahmaBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipAlert")},n);function n(){return e.call(this)||this}t.BrahmaEquipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipAttrAlert")},n);function n(){return e.call(this)||this}t.BrahmaEquipAttrAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipDaZaoView")},n);function n(){return e.call(this)||this}t.BrahmaEquipDaZaoViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipIntensiveView")},n);function n(){return e.call(this)||this}t.BrahmaEquipIntensiveViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.brahma_equip.BrahmaEquipShowItem",modules.brahma_equip.BrahmaEquipShowItem),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipPreview")},n);function n(){return e.call(this)||this}t.BrahmaEquipPreviewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipPreviewBtnItem")},n);function n(){return e.call(this)||this}t.BrahmaEquipPreviewBtnItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipResolveAlert")},n);function n(){return e.call(this)||this}t.BrahmaEquipResolveAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipShiHunAlert")},n);function n(){return e.call(this)||this}t.BrahmaEquipShiHunAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipShowItem")},n);function n(){return e.call(this)||this}t.BrahmaEquipShowItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.brahma_equip.BrahmaEquipShowItem",modules.brahma_equip.BrahmaEquipShowItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipShowView")},n);function n(){return e.call(this)||this}t.BrahmaEquipShowViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.brahma_equip.BrahmaEquipShowItem",modules.brahma_equip.BrahmaEquipShowItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BrahmaEquipView")},n);function n(){return e.call(this)||this}t.BrahmaEquipViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("BrahmaPayView")},n);function n(){return e.call(this)||this}t.BrahmaPayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("BuffAlert")},n);function n(){return e.call(this)||this}t.BuffAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("BuffItem")},n);function n(){return e.call(this)||this}t.BuffItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CancellationReturnAlert")},n);function n(){return e.call(this)||this}t.CancellationReturnAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ChatFacePkgItem")},n);function n(){return e.call(this)||this}t.ChatFacePkgItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ChatFaceView")},n);function n(){return e.call(this)||this}t.ChatFaceViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ChatMarkedWordsItem")},n);function n(){return e.call(this)||this}t.ChatMarkedWordsItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ChatMarkedWordsView")},n);function n(){return e.call(this)||this}t.ChatMarkedWordsViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("ChatMessageItem")},n);function n(){return e.call(this)||this}t.ChatMessageItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ChatSelectList")},n);function n(){return e.call(this)||this}t.ChatSelectListUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ChatView")},n);function n(){return e.call(this)||this}t.ChatViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ChildrenPartyAlert")},n);function n(){return e.call(this)||this}t.ChildrenPartyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ChildrenPartyBigAwardAlert")},n);function n(){return e.call(this)||this}t.ChildrenPartyBigAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ChildrensDayFirstPayAlert")},n);function n(){return e.call(this)||this}t.ChildrensDayFirstPayAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.childrens_day_good_man.ChildrensDayGoodManItem",modules.childrens_day_good_man.ChildrensDayGoodManItem),View.regComponent("modules.childrens_day_good_man.ChildrensDayGoodManItem1",modules.childrens_day_good_man.ChildrensDayGoodManItem1),e.prototype.createChildren.call(this),this.loadUI("ChildrensDayGoodManView")},n);function n(){return e.call(this)||this}t.ChildrensDayGoodManViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.childrens_day_star.ChildrensDayStarItem2",modules.childrens_day_star.ChildrensDayStarItem2),View.regComponent("modules.single_dog_sart.SingleDogSartItem3",modules.single_dog_sart.SingleDogSartItem3),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ChildrensDaySartItem1")},n);function n(){return e.call(this)||this}t.ChildrensDaySartItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.childrens_day_star.ChildrensDayStarItem1",modules.childrens_day_star.ChildrensDayStarItem1),e.prototype.createChildren.call(this),this.loadUI("ChildrensDaySartView")},n);function n(){return e.call(this)||this}t.ChildrensDaySartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ChristmasDLKHView")},n);function n(){return e.call(this)||this}t.ChristmasDLKHViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CircleView")},n);function n(){return e.call(this)||this}t.CircleViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CoinRBView")},n);function n(){return e.call(this)||this}t.CoinRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CoinWinView")},n);function n(){return e.call(this)||this}t.CoinWinViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonBuyTxtAlert")},n);function n(){return e.call(this)||this}t.CommonBuyTxtAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonGroupBuffItem")},n);function n(){return e.call(this)||this}t.CommonGroupBuffItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonGroupChangeAlert")},n);function n(){return e.call(this)||this}t.CommonGroupChangeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("CommonGroupChangeItem")},n);function n(){return e.call(this)||this}t.CommonGroupChangeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonGroupChangeItem1")},n);function n(){return e.call(this)||this}t.CommonGroupChangeItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("CommonGroupChangeItem2")},n);function n(){return e.call(this)||this}t.CommonGroupChangeItem2UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonGroupHanHuaItem")},n);function n(){return e.call(this)||this}t.CommonGroupHanHuaItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("CommonGroupHanHuaItem1")},n);function n(){return e.call(this)||this}t.CommonGroupHanHuaItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonGroupPlayerInfoItem")},n);function n(){return e.call(this)||this}t.CommonGroupPlayerInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonGroupReplaceCopyTargetAlert")},n);function n(){return e.call(this)||this}t.CommonGroupReplaceCopyTargetAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonGroupReplaceCopyTargetAlert1")},n);function n(){return e.call(this)||this}t.CommonGroupReplaceCopyTargetAlert1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonGroupReplaceCopyTargetAlert2")},n);function n(){return e.call(this)||this}t.CommonGroupReplaceCopyTargetAlert2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonGroupReplaceCopyTargetAlert3")},n);function n(){return e.call(this)||this}t.CommonGroupReplaceCopyTargetAlert3UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonGroupReplaceCopyTargetAlert4")},n);function n(){return e.call(this)||this}t.CommonGroupReplaceCopyTargetAlert4UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.common_group.CommonGroupPlayerInfoItem",modules.common_group.CommonGroupPlayerInfoItem),View.regComponent("modules.common_group.CommonGroupHanHuaItem",modules.common_group.CommonGroupHanHuaItem),View.regComponent("modules.common_group.CommonGroupBuffItem",modules.common_group.CommonGroupBuffItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonGroupRoomView")},n);function n(){return e.call(this)||this}t.CommonGroupRoomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("CommonGroupSingleMatchAlert")},n);function n(){return e.call(this)||this}t.CommonGroupSingleMatchAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.common_group.CommonGroupTeamItem1",modules.common_group.CommonGroupTeamItem1),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonGroupTeamItem")},n);function n(){return e.call(this)||this}t.CommonGroupTeamItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonGroupTeamItem1")},n);function n(){return e.call(this)||this}t.CommonGroupTeamItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonGroupToaApplyForItem")},n);function n(){return e.call(this)||this}t.CommonGroupToaApplyForItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonGroupWaitingAlert")},n);function n(){return e.call(this)||this}t.CommonGroupWaitingAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonHuoDeRewardAlert")},n);function n(){return e.call(this)||this}t.CommonHuoDeRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonItemsAlert")},n);function n(){return e.call(this)||this}t.CommonItemsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CommonItemsAlert2")},n);function n(){return e.call(this)||this}t.CommonItemsAlert2UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("CommonObservationItem")},n);function n(){return e.call(this)||this}t.CommonObservationItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.archive.ArchiveBaseItem",modules.archive.ArchiveBaseItem),e.prototype.createChildren.call(this),this.loadUI("CommonRewardShowItem")},n);function n(){return e.call(this)||this}t.CommonRewardShowItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonTxtAlert")},n);function n(){return e.call(this)||this}t.CommonTxtAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CommonTxtCatAlert")},n);function n(){return e.call(this)||this}t.CommonTxtCatAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ComposeAddAlert")},n);function n(){return e.call(this)||this}t.ComposeAddAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ComposeAddItem")},n);function n(){return e.call(this)||this}t.ComposeAddItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ComposeEquipAlert")},n);function n(){return e.call(this)||this}t.ComposeEquipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ComposeEquipItem")},n);function n(){return e.call(this)||this}t.ComposeEquipItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ComposeSelectItem")},n);function n(){return e.call(this)||this}t.ComposeSelectItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ComposeSelectView")},n);function n(){return e.call(this)||this}t.ComposeSelectViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ComposeStoneAlert")},n);function n(){return e.call(this)||this}t.ComposeStoneAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ComposeStoneItem")},n);function n(){return e.call(this)||this}t.ComposeStoneItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ComposeSuccessAlert")},n);function n(){return e.call(this)||this}t.ComposeSuccessAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ComposeView")},n);function n(){return e.call(this)||this}t.ComposeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ConsumeRewardItem")},n);function n(){return e.call(this)||this}t.ConsumeRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ConsumeRewardView")},n);function n(){return e.call(this)||this}t.ConsumeRewardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ContinueItem")},n);function n(){return e.call(this)||this}t.ContinueItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ContinueView")},n);function n(){return e.call(this)||this}t.ContinueViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CreateRoleView")},n);function n(){return e.call(this)||this}t.CreateRoleViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("Cumulate2PayView")},n);function n(){return e.call(this)||this}t.Cumulate2PayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CumulateItem")},n);function n(){return e.call(this)||this}t.CumulateItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CumulatePay")},n);function n(){return e.call(this)||this}t.CumulatePayUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CumulatePayShenHunView")},n);function n(){return e.call(this)||this}t.CumulatePayShenHunViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("CumulatePayTianZhuView")},n);function n(){return e.call(this)||this}t.CumulatePayTianZhuViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("CumulatePayView")},n);function n(){return e.call(this)||this}t.CumulatePayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DailyDemonView")},n);function n(){return e.call(this)||this}t.DailyDemonViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DailyDungeon")},n);function n(){return e.call(this)||this}t.DailyDungeonUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("DailyDungeonItem")},n);function n(){return e.call(this)||this}t.DailyDungeonItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DailyDungeonTextAlert")},n);function n(){return e.call(this)||this}t.DailyDungeonTextAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DayConsumeRewardItem")},n);function n(){return e.call(this)||this}t.DayConsumeRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DayConsumeRewardView")},n);function n(){return e.call(this)||this}t.DayConsumeRewardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DayDropTreasureBottomView")},n);function n(){return e.call(this)||this}t.DayDropTreasureBottomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DayDropTreasureGetRewardAlert")},n);function n(){return e.call(this)||this}t.DayDropTreasureGetRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DayDropTreasureResultAlert")},n);function n(){return e.call(this)||this}t.DayDropTreasureResultAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DayDropTreasureRewardAlert")},n);function n(){return e.call(this)||this}t.DayDropTreasureRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DayDropTreasureRightView")},n);function n(){return e.call(this)||this}t.DayDropTreasureRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DayPayAlert")},n);function n(){return e.call(this)||this}t.DayPayAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("DaZhaoBuWeiItem")},n);function n(){return e.call(this)||this}t.DaZhaoBuWeiItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("DaZhaoDaLeiItem")},n);function n(){return e.call(this)||this}t.DaZhaoDaLeiItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DaZhaoFengJieAlert")},n);function n(){return e.call(this)||this}t.DaZhaoFengJieAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("DaZhaoView")},n);function n(){return e.call(this)||this}t.DaZhaoViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DaZhaoXiaoLeiItem")},n);function n(){return e.call(this)||this}t.DaZhaoXiaoLeiItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("DestinyPelletView")},n);function n(){return e.call(this)||this}t.DestinyPelletViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DialAlert")},n);function n(){return e.call(this)||this}t.DialAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DirectBuyBobyAlert")},n);function n(){return e.call(this)||this}t.DirectBuyBobyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DirectBuyBobySkillAlert")},n);function n(){return e.call(this)||this}t.DirectBuyBobySkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DirectBuyExtremeAlert")},n);function n(){return e.call(this)||this}t.DirectBuyExtremeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DirectBuyYuanShenCardAlert")},n);function n(){return e.call(this)||this}t.DirectBuyYuanShenCardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DirectBuyYuanShenEquipAlert")},n);function n(){return e.call(this)||this}t.DirectBuyYuanShenEquipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DirectBuyYuanShenStoneAlert")},n);function n(){return e.call(this)||this}t.DirectBuyYuanShenStoneAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DirectBuyYuanShenWeaponAlert")},n);function n(){return e.call(this)||this}t.DirectBuyYuanShenWeaponAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DiscountGiftView")},n);function n(){return e.call(this)||this}t.DiscountGiftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("DivinatoryBossCopyItem")},n);function n(){return e.call(this)||this}t.DivinatoryBossCopyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DivinatoryBossView")},n);function n(){return e.call(this)||this}t.DivinatoryBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("DivinatoryCardBodyItem")},n);function n(){return e.call(this)||this}t.DivinatoryCardBodyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("DivinatoryCardItem")},n);function n(){return e.call(this)||this}t.DivinatoryCardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DivinatoryCardSuitItem")},n);function n(){return e.call(this)||this}t.DivinatoryCardSuitItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.divinatory_card.DivinatoryCardBodyItem",modules.divinatory_card.DivinatoryCardBodyItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DivinatoryCardTipsItem")},n);function n(){return e.call(this)||this}t.DivinatoryCardTipsItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BagItem",modules.bag.BagItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DivinatoryCardView")},n);function n(){return e.call(this)||this}t.DivinatoryCardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DivinatoryStrongAdditionAlert")},n);function n(){return e.call(this)||this}t.DivinatoryStrongAdditionAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BagItem",modules.bag.BagItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DivinatoryStrongView")},n);function n(){return e.call(this)||this}t.DivinatoryStrongViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DivinatorySuitAlert")},n);function n(){return e.call(this)||this}t.DivinatorySuitAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DivorceAlert")},n);function n(){return e.call(this)||this}t.DivorceAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DoubleNineBigAwardAlert")},n);function n(){return e.call(this)||this}t.DoubleNineBigAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DoubleNinePartyAlert")},n);function n(){return e.call(this)||this}t.DoubleNinePartyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DragonAlert")},n);function n(){return e.call(this)||this}t.DragonAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("DungeonDegreeAlert")},n);function n(){return e.call(this)||this}t.DungeonDegreeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("DungeonLBView")},n);function n(){return e.call(this)||this}t.DungeonLBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("DungeonRBView")},n);function n(){return e.call(this)||this}t.DungeonRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("DungeonShieldView")},n);function n(){return e.call(this)||this}t.DungeonShieldViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EmailDetailView")},n);function n(){return e.call(this)||this}t.EmailDetailViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EmailItem")},n);function n(){return e.call(this)||this}t.EmailItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EmailView")},n);function n(){return e.call(this)||this}t.EmailViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EndNianBigAwardAlert")},n);function n(){return e.call(this)||this}t.EndNianBigAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("EndNianPartyAlert")},n);function n(){return e.call(this)||this}t.EndNianPartyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EnterItem")},n);function n(){return e.call(this)||this}t.EnterItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EquipAlert")},n);function n(){return e.call(this)||this}t.EquipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("EquipmentSiHunAlert")},n);function n(){return e.call(this)||this}t.EquipmentSiHunAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EquipmentSiHunItem")},n);function n(){return e.call(this)||this}t.EquipmentSiHunItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.equipment_zu_hun.SEquipmentSiHunItem",modules.equipment_zu_hun.SEquipmentSiHunItem),e.prototype.createChildren.call(this),this.loadUI("EquipmentZuHunView")},n);function n(){return e.call(this)||this}t.EquipmentZuHunViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EquipSuitTclassItem")},n);function n(){return e.call(this)||this}t.EquipSuitTclassItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("EquipSuitView")},n);function n(){return e.call(this)||this}t.EquipSuitViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("EveryDayreBateItem")},n);function n(){return e.call(this)||this}t.EveryDayreBateItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("EveryDayreBateView")},n);function n(){return e.call(this)||this}t.EveryDayreBateViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ExerciseAlert")},n);function n(){return e.call(this)||this}t.ExerciseAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ExerciseItem")},n);function n(){return e.call(this)||this}t.ExerciseItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ExerciseView")},n);function n(){return e.call(this)||this}t.ExerciseViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),e.prototype.createChildren.call(this),this.loadUI("ExteriorActiveAlert")},n);function n(){return e.call(this)||this}t.ExteriorActiveAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ExtremeEquipItem")},n);function n(){return e.call(this)||this}t.ExtremeEquipItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ExtremeEquipSkillAlert")},n);function n(){return e.call(this)||this}t.ExtremeEquipSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("ui.SkillIconUI",t.SkillIconUI),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ExtremeEquipSkillItem")},n);function n(){return e.call(this)||this}t.ExtremeEquipSkillItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.extreme_equip.ExtremeEquipSkillItem",modules.extreme_equip.ExtremeEquipSkillItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ExtremeEquipView")},n);function n(){return e.call(this)||this}t.ExtremeEquipViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionAskAlert")},n);function n(){return e.call(this)||this}t.FactionAskAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("FactionAskItem")},n);function n(){return e.call(this)||this}t.FactionAskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionAutoInviteView")},n);function n(){return e.call(this)||this}t.FactionAutoInviteViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionCopyBottomView")},n);function n(){return e.call(this)||this}t.FactionCopyBottomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionCopyPlanAlert")},n);function n(){return e.call(this)||this}t.FactionCopyPlanAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionCopyPlanItem")},n);function n(){return e.call(this)||this}t.FactionCopyPlanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionCopyRBView")},n);function n(){return e.call(this)||this}t.FactionCopyRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FactionCopyView")},n);function n(){return e.call(this)||this}t.FactionCopyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionCreateAlert")},n);function n(){return e.call(this)||this}t.FactionCreateAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionFuncEnterItem")},n);function n(){return e.call(this)||this}t.FactionFuncEnterItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FactionImpeachAlert")},n);function n(){return e.call(this)||this}t.FactionImpeachAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionJoinItem")},n);function n(){return e.call(this)||this}t.FactionJoinItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionJoinLimitSetAlert")},n);function n(){return e.call(this)||this}t.FactionJoinLimitSetAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionJoinView")},n);function n(){return e.call(this)||this}t.FactionJoinViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("FactionLeaderItem")},n);function n(){return e.call(this)||this}t.FactionLeaderItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionManageView")},n);function n(){return e.call(this)||this}t.FactionManageViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("FactionMemberItem")},n);function n(){return e.call(this)||this}t.FactionMemberItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionMemberOperaAlert")},n);function n(){return e.call(this)||this}t.FactionMemberOperaAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("FactionMemberOperaItem")},n);function n(){return e.call(this)||this}t.FactionMemberOperaItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("FactionMemberOperaView")},n);function n(){return e.call(this)||this}t.FactionMemberOperaViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("modules.faction.FactionLeaderItem",modules.faction.FactionLeaderItem),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("FactionMemberView")},n);function n(){return e.call(this)||this}t.FactionMemberViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionPostLimitsAlert")},n);function n(){return e.call(this)||this}t.FactionPostLimitsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionPostLimitsItem")},n);function n(){return e.call(this)||this}t.FactionPostLimitsItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionSetNoticeAlert")},n);function n(){return e.call(this)||this}t.FactionSetNoticeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionSetTitleAlert")},n);function n(){return e.call(this)||this}t.FactionSetTitleAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionSkillItem")},n);function n(){return e.call(this)||this}t.FactionSkillItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionSkillView")},n);function n(){return e.call(this)||this}t.FactionSkillViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionTaskItem")},n);function n(){return e.call(this)||this}t.FactionTaskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionTaskView")},n);function n(){return e.call(this)||this}t.FactionTaskViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionTenAlert")},n);function n(){return e.call(this)||this}t.FactionTenAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionView")},n);function n(){return e.call(this)||this}t.FactionViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FactionWealView")},n);function n(){return e.call(this)||this}t.FactionWealViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.faerie_demon.FaerieDemonCopyPlayerInfoItem1",modules.faerie_demon.FaerieDemonCopyPlayerInfoItem1),View.regComponent("modules.faerie_demon.FaerieDemonCopyPlayerInfoItem2",modules.faerie_demon.FaerieDemonCopyPlayerInfoItem2),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonCopyCnterTopView")},n);function n(){return e.call(this)||this}t.FaerieDemonCopyCnterTopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.faerie_demon.FaerieDemonCopyPlayerInfoItem",modules.faerie_demon.FaerieDemonCopyPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonCopyLeftView")},n);function n(){return e.call(this)||this}t.FaerieDemonCopyLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonCopyPlayerInfoItem")},n);function n(){return e.call(this)||this}t.FaerieDemonCopyPlayerInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonCopyPlayerInfoItem1")},n);function n(){return e.call(this)||this}t.FaerieDemonCopyPlayerInfoItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonCopyPlayerInfoItem2")},n);function n(){return e.call(this)||this}t.FaerieDemonCopyPlayerInfoItem2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.faerie_demon.FaerieDemonCopyPlayerInfoItem",modules.faerie_demon.FaerieDemonCopyPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonCopyRightView")},n);function n(){return e.call(this)||this}t.FaerieDemonCopyRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.faerie_demon.FaerieDemonMatchingLeftItem",modules.faerie_demon.FaerieDemonMatchingLeftItem),View.regComponent("modules.faerie_demon.FaerieDemonMatchingRightItem",modules.faerie_demon.FaerieDemonMatchingRightItem),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonMatchingAlert")},n);function n(){return e.call(this)||this}t.FaerieDemonMatchingAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonMatchingLeftItem")},n);function n(){return e.call(this)||this}t.FaerieDemonMatchingLeftItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonMatchingRightItem")},n);function n(){return e.call(this)||this}t.FaerieDemonMatchingRightItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonRankAlert")},n);function n(){return e.call(this)||this}t.FaerieDemonRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonRankAwardAlert")},n);function n(){return e.call(this)||this}t.FaerieDemonRankAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonTeamItem1")},n);function n(){return e.call(this)||this}t.FaerieDemonTeamItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FaerieDemonView")},n);function n(){return e.call(this)||this}t.FaerieDemonViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FairyChooseAlert")},n);function n(){return e.call(this)||this}t.FairyChooseAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FairyholdSucceedAlert")},n);function n(){return e.call(this)||this}t.FairyholdSucceedAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FairyItem")},n);function n(){return e.call(this)||this}t.FairyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FairyLogAlert")},n);function n(){return e.call(this)||this}t.FairyLogAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FairyLogItem")},n);function n(){return e.call(this)||this}t.FairyLogItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FairySendAlert")},n);function n(){return e.call(this)||this}t.FairySendAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),View.regComponent("modules.fairy.FairyItem",modules.fairy.FairyItem),e.prototype.createChildren.call(this),this.loadUI("FairyView")},n);function n(){return e.call(this)||this}t.FairyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FamiliarsDownView")},n);function n(){return e.call(this)||this}t.FamiliarsDownViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FamilyPartyAlert")},n);function n(){return e.call(this)||this}t.FamilyPartyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("FamilyPartyAwardAlert")},n);function n(){return e.call(this)||this}t.FamilyPartyAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FamilyPartyBigAwardAlert")},n);function n(){return e.call(this)||this}t.FamilyPartyBigAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FamilyPartyBtnItem")},n);function n(){return e.call(this)||this}t.FamilyPartyBtnItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FamilyPartyItem")},n);function n(){return e.call(this)||this}t.FamilyPartyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FashionSuitsAlert")},n);function n(){return e.call(this)||this}t.FashionSuitsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FashionSuitsCaiLiaoItem")},n);function n(){return e.call(this)||this}t.FashionSuitsCaiLiaoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FashionSuitsItem")},n);function n(){return e.call(this)||this}t.FashionSuitsItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FashionSuitsView")},n);function n(){return e.call(this)||this}t.FashionSuitsViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FeedBackAlert")},n);function n(){return e.call(this)||this}t.FeedBackAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FeedBackItem")},n);function n(){return e.call(this)||this}t.FeedBackItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rune.RuneTipItem",modules.rune.RuneTipItem),View.regComponent("modules.xianfu.FengshuiAttItem",modules.xianfu.FengshuiAttItem),e.prototype.createChildren.call(this),this.loadUI("FengshuiAttAlert")},n);function n(){return e.call(this)||this}t.FengshuiAttAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("FengshuiAttItem")},n);function n(){return e.call(this)||this}t.FengshuiAttItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FestAlert")},n);function n(){return e.call(this)||this}t.FestAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FestAlert1")},n);function n(){return e.call(this)||this}t.FestAlert1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FestConvertItem")},n);function n(){return e.call(this)||this}t.FestConvertItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FestConvertView")},n);function n(){return e.call(this)||this}t.FestConvertViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FestHilarityView")},n);function n(){return e.call(this)||this}t.FestHilarityViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FightSoulBuyAlert")},n);function n(){return e.call(this)||this}t.FightSoulBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FightSoulPayView")},n);function n(){return e.call(this)||this}t.FightSoulPayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FightTalismanAlert")},n);function n(){return e.call(this)||this}t.FightTalismanAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FightTalismanBuyAlert")},n);function n(){return e.call(this)||this}t.FightTalismanBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FightTalismanItem")},n);function n(){return e.call(this)||this}t.FightTalismanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("FingerGuessAlert")},n);function n(){return e.call(this)||this}t.FingerGuessAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionAchievementAlert")},n);function n(){return e.call(this)||this}t.FireContentionAchievementAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FireContentionAchievementItem")},n);function n(){return e.call(this)||this}t.FireContentionAchievementItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionAndPlayerListView")},n);function n(){return e.call(this)||this}t.FireContentionAndPlayerListViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionBossListItem")},n);function n(){return e.call(this)||this}t.FireContentionBossListItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FireContentionBuffAlert")},n);function n(){return e.call(this)||this}t.FireContentionBuffAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FireContentionBuffAlert1")},n);function n(){return e.call(this)||this}t.FireContentionBuffAlert1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FireContentionCenterTipsView")},n);function n(){return e.call(this)||this}t.FireContentionCenterTipsViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionCenterView")},n);function n(){return e.call(this)||this}t.FireContentionCenterViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionLeftView")},n);function n(){return e.call(this)||this}t.FireContentionLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionPlayerListItem")},n);function n(){return e.call(this)||this}t.FireContentionPlayerListItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FireContentionRankAlert")},n);function n(){return e.call(this)||this}t.FireContentionRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionRankItem")},n);function n(){return e.call(this)||this}t.FireContentionRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionRankItem1")},n);function n(){return e.call(this)||this}t.FireContentionRankItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FireContentionRankRewardAlert")},n);function n(){return e.call(this)||this}t.FireContentionRankRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionRankRewardItem")},n);function n(){return e.call(this)||this}t.FireContentionRankRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionRightBuffView")},n);function n(){return e.call(this)||this}t.FireContentionRightBuffViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FireContentionRightView")},n);function n(){return e.call(this)||this}t.FireContentionRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BagItem",modules.bag.BagItem),e.prototype.createChildren.call(this),this.loadUI("FireContentionView")},n);function n(){return e.call(this)||this}t.FireContentionViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FireContentionWinView")},n);function n(){return e.call(this)||this}t.FireContentionWinViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FirstLoginAlert")},n);function n(){return e.call(this)||this}t.FirstLoginAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FirstPay")},n);function n(){return e.call(this)||this}t.FirstPayUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("FirstWinView")},n);function n(){return e.call(this)||this}t.FirstWinViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("FIyUptem")},n);function n(){return e.call(this)||this}t.FIyUptemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FlyUpAlert")},n);function n(){return e.call(this)||this}t.FlyUpAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FlyUpItem")},n);function n(){return e.call(this)||this}t.FlyUpItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent(" modules.fly_up.FlyUpTaskItem",modules.fly_up.FlyUpTaskItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FlyUpView")},n);function n(){return e.call(this)||this}t.FlyUpViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("FlyUpWinView")},n);function n(){return e.call(this)||this}t.FlyUpWinViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossFinalAlert")},n);function n(){return e.call(this)||this}t.ForbiddenBossFinalAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossHurtView")},n);function n(){return e.call(this)||this}t.ForbiddenBossHurtViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossRank")},n);function n(){return e.call(this)||this}t.ForbiddenBossRankUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossRankItem")},n);function n(){return e.call(this)||this}t.ForbiddenBossRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossRBItemBoss")},n);function n(){return e.call(this)||this}t.ForbiddenBossRBItemBossUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossRBItemDamage")},n);function n(){return e.call(this)||this}t.ForbiddenBossRBItemDamageUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossReward")},n);function n(){return e.call(this)||this}t.ForbiddenBossRewardUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossRewardItem")},n);function n(){return e.call(this)||this}t.ForbiddenBossRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossSceneLeft")},n);function n(){return e.call(this)||this}t.ForbiddenBossSceneLeftUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossSceneRight")},n);function n(){return e.call(this)||this}t.ForbiddenBossSceneRightUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForbiddenBossView")},n);function n(){return e.call(this)||this}t.ForbiddenBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForeigBossRBView")},n);function n(){return e.call(this)||this}t.ForeigBossRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForeignBossAwardAlert")},n);function n(){return e.call(this)||this}t.ForeignBossAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ForeignBossAwardItem")},n);function n(){return e.call(this)||this}t.ForeignBossAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForeignBossBroadcastView")},n);function n(){return e.call(this)||this}t.ForeignBossBroadcastViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForeignBossHelpAlert")},n);function n(){return e.call(this)||this}t.ForeignBossHelpAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForeignBossHelpItem")},n);function n(){return e.call(this)||this}t.ForeignBossHelpItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForeignBossView")},n);function n(){return e.call(this)||this}t.ForeignBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForeignBossWarbandRankAlert")},n);function n(){return e.call(this)||this}t.ForeignBossWarbandRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ForeignBossWarbandRankItem")},n);function n(){return e.call(this)||this}t.ForeignBossWarbandRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("FuLiGuanItem")},n);function n(){return e.call(this)||this}t.FuLiGuanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("FuLiGuanView")},n);function n(){return e.call(this)||this}t.FuLiGuanViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GameSetAlert")},n);function n(){return e.call(this)||this}t.GameSetAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GanEnItem")},n);function n(){return e.call(this)||this}t.GanEnItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GatherHpView")},n);function n(){return e.call(this)||this}t.GatherHpViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GatherSkipView")},n);function n(){return e.call(this)||this}t.GatherSkipViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GatherView")},n);function n(){return e.call(this)||this}t.GatherViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("GlovesBuyAlert")},n);function n(){return e.call(this)||this}t.GlovesBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("GlovesStoneBuyAlert")},n);function n(){return e.call(this)||this}t.GlovesStoneBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("GlovesTipsAlert")},n);function n(){return e.call(this)||this}t.GlovesTipsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("GlovesView")},n);function n(){return e.call(this)||this}t.GlovesViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GoldBodyItem")},n);function n(){return e.call(this)||this}t.GoldBodyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GoldBodyUnbeatenAlert")},n);function n(){return e.call(this)||this}t.GoldBodyUnbeatenAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GoldBodyView")},n);function n(){return e.call(this)||this}t.GoldBodyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GotItemAlert")},n);function n(){return e.call(this)||this}t.GotItemAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GuaJiearningsUpItem")},n);function n(){return e.call(this)||this}t.GuaJiearningsUpItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GuideView")},n);function n(){return e.call(this)||this}t.GuideViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GushenItem")},n);function n(){return e.call(this)||this}t.GushenItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("GushenView")},n);function n(){return e.call(this)||this}t.GushenViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HalloweenItem")},n);function n(){return e.call(this)||this}t.HalloweenItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HaloAwardAlert")},n);function n(){return e.call(this)||this}t.HaloAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HaloView")},n);function n(){return e.call(this)||this}t.HaloViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("HeadIcon")},n);function n(){return e.call(this)||this}t.HeadIconUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HealthPointView")},n);function n(){return e.call(this)||this}t.HealthPointViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.he_qu_good_man.HeQuGoodManItem",modules.he_qu_good_man.HeQuGoodManItem),View.regComponent("modules.he_qu_good_man.HeQuGoodManItem1",modules.he_qu_good_man.HeQuGoodManItem1),e.prototype.createChildren.call(this),this.loadUI("HeQuGoodManView")},n);function n(){return e.call(this)||this}t.HeQuGoodManViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HeQuOnlineRewardItem")},n);function n(){return e.call(this)||this}t.HeQuOnlineRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HeQuOnlineRewardView")},n);function n(){return e.call(this)||this}t.HeQuOnlineRewardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HequPartyAlert")},n);function n(){return e.call(this)||this}t.HequPartyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HequPartyBigAwardAlert")},n);function n(){return e.call(this)||this}t.HequPartyBigAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.he_qu_star.HeQuStarItem2",modules.he_qu_star.HeQuStarItem2),View.regComponent("modules.single_dog_sart.SingleDogSartItem3",modules.single_dog_sart.SingleDogSartItem3),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HeQuSartItem1")},n);function n(){return e.call(this)||this}t.HeQuSartItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.he_qu_star.HeQuStarItem1",modules.he_qu_star.HeQuStarItem1),e.prototype.createChildren.call(this),this.loadUI("HeQuSartView")},n);function n(){return e.call(this)||this}t.HeQuSartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HeQuXunBaoHappyItem")},n);function n(){return e.call(this)||this}t.HeQuXunBaoHappyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HeQuXunBaoHappyView")},n);function n(){return e.call(this)||this}t.HeQuXunBaoHappyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("HitBirthdayCakeKillerView")},n);function n(){return e.call(this)||this}t.HitBirthdayCakeKillerViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("HitBirthdayCakeView")},n);function n(){return e.call(this)||this}t.HitBirthdayCakeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HitEngineerAutoAlert")},n);function n(){return e.call(this)||this}t.HitEngineerAutoAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HitEngineerAwardAlert")},n);function n(){return e.call(this)||this}t.HitEngineerAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HitEngineerAwardItem")},n);function n(){return e.call(this)||this}t.HitEngineerAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HitEngineerAwardView")},n);function n(){return e.call(this)||this}t.HitEngineerAwardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("HitEngineerKillerItem")},n);function n(){return e.call(this)||this}t.HitEngineerKillerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("HitEngineerKillerView")},n);function n(){return e.call(this)||this}t.HitEngineerKillerViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HitEngineerLastAwardAlert")},n);function n(){return e.call(this)||this}t.HitEngineerLastAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HitEngineerLogAlert")},n);function n(){return e.call(this)||this}t.HitEngineerLogAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HitEngineerStageAwardAlert")},n);function n(){return e.call(this)||this}t.HitEngineerStageAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("HitEngineerStageAwardItem")},n);function n(){return e.call(this)||this}t.HitEngineerStageAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HitEngineerTxtAlert")},n);function n(){return e.call(this)||this}t.HitEngineerTxtAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("HitEngineerView")},n);function n(){return e.call(this)||this}t.HitEngineerViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("HitEngineeShopAlert")},n);function n(){return e.call(this)||this}t.HitEngineeShopAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HonorAwardAlert")},n);function n(){return e.call(this)||this}t.HonorAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HonorAwardItem")},n);function n(){return e.call(this)||this}t.HonorAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HudiePlatformAwardAlert")},n);function n(){return e.call(this)||this}t.HudiePlatformAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("HunderboltPowerAlert")},n);function n(){return e.call(this)||this}t.HunderboltPowerAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("HuoQuItem")},n);function n(){return e.call(this)||this}t.HuoQuItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("IllusionItem")},n);function n(){return e.call(this)||this}t.IllusionItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("IllusionView")},n);function n(){return e.call(this)||this}t.IllusionViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ImgTitleAlert")},n);function n(){return e.call(this)||this}t.ImgTitleAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestItem")},n);function n(){return e.call(this)||this}t.ImmortalContestItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestPreRankAlert")},n);function n(){return e.call(this)||this}t.ImmortalContestPreRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestRankItem")},n);function n(){return e.call(this)||this}t.ImmortalContestRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestRankItem1")},n);function n(){return e.call(this)||this}t.ImmortalContestRankItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestRewardAlert")},n);function n(){return e.call(this)||this}t.ImmortalContestRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestRewardItem")},n);function n(){return e.call(this)||this}t.ImmortalContestRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BagItem",modules.bag.BagItem),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestView")},n);function n(){return e.call(this)||this}t.ImmortalContestViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("ui.WindCloudTimeItemUI",t.WindCloudTimeItemUI),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestView1")},n);function n(){return e.call(this)||this}t.ImmortalContestView1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestView2")},n);function n(){return e.call(this)||this}t.ImmortalContestView2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestView3")},n);function n(){return e.call(this)||this}t.ImmortalContestView3UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ImmortalContestWorship")},n);function n(){return e.call(this)||this}t.ImmortalContestWorshipUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.immortals.BinghunItem",modules.immortals.BinghunItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ImmortalFuhunView")},n);function n(){return e.call(this)||this}t.ImmortalFuhunViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ImmortalHuanhuaView")},n);function n(){return e.call(this)||this}t.ImmortalHuanhuaViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("modules.immortals.SkillItem",modules.immortals.SkillItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ImmortalShengjiView")},n);function n(){return e.call(this)||this}t.ImmortalShengjiViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ImmortalsHuanHuaItem")},n);function n(){return e.call(this)||this}t.ImmortalsHuanHuaItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ImmortalsUpGradeAlert")},n);function n(){return e.call(this)||this}t.ImmortalsUpGradeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("InspireAlert")},n);function n(){return e.call(this)||this}t.InspireAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("IntensiveView")},n);function n(){return e.call(this)||this}t.IntensiveViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("InvestGrowthReward")},n);function n(){return e.call(this)||this}t.InvestGrowthRewardUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("InvestItem")},n);function n(){return e.call(this)||this}t.InvestItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("InvestLoginReward")},n);function n(){return e.call(this)||this}t.InvestLoginRewardUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("InvestRecruitReward")},n);function n(){return e.call(this)||this}t.InvestRecruitRewardUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("InvitationAlert")},n);function n(){return e.call(this)||this}t.InvitationAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("JiuXiaoLingAwardAlert")},n);function n(){return e.call(this)||this}t.JiuXiaoLingAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("JiuXiaoLingBuyAlert")},n);function n(){return e.call(this)||this}t.JiuXiaoLingBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("JiuXiaoLingBuyLvAlert")},n);function n(){return e.call(this)||this}t.JiuXiaoLingBuyLvAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("JiuXiaoLingBuyTipsAlert")},n);function n(){return e.call(this)||this}t.JiuXiaoLingBuyTipsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("JiuXiaoLingItem")},n);function n(){return e.call(this)||this}t.JiuXiaoLingItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("JiuXiaoLingTaskItem")},n);function n(){return e.call(this)||this}t.JiuXiaoLingTaskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("JiuXiaoLingTaskView")},n);function n(){return e.call(this)||this}t.JiuXiaoLingTaskViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("ui.JiuXiaoLingItemUI",t.JiuXiaoLingItemUI),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("JiuXiaoLingView")},n);function n(){return e.call(this)||this}t.JiuXiaoLingViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("JulingAccountAlert")},n);function n(){return e.call(this)||this}t.JulingAccountAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("KuangHuanItem")},n);function n(){return e.call(this)||this}t.KuangHuanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("KuangHuanLevelView")},n);function n(){return e.call(this)||this}t.KuangHuanLevelViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("KuangHuanPowerView")},n);function n(){return e.call(this)||this}t.KuangHuanPowerViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("KuangHuanView")},n);function n(){return e.call(this)||this}t.KuangHuanViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("KunLunBuffView")},n);function n(){return e.call(this)||this}t.KunLunBuffViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("KunLunGainView")},n);function n(){return e.call(this)||this}t.KunLunGainViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("KunLunGameView")},n);function n(){return e.call(this)||this}t.KunLunGameViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("KunLunResultAlert")},n);function n(){return e.call(this)||this}t.KunLunResultAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("KunLunRewordAlert")},n);function n(){return e.call(this)||this}t.KunLunRewordAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("KunLunTipAlert")},n);function n(){return e.call(this)||this}t.KunLunTipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LackPropAlert")},n);function n(){return e.call(this)||this}t.LackPropAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LadderGradeAwardAlert")},n);function n(){return e.call(this)||this}t.LadderGradeAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LadderGradeAwardItem")},n);function n(){return e.call(this)||this}t.LadderGradeAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("LadderLoseAlert")},n);function n(){return e.call(this)||this}t.LadderLoseAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LadderMatchAlert")},n);function n(){return e.call(this)||this}t.LadderMatchAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LadderNotFoundView")},n);function n(){return e.call(this)||this}t.LadderNotFoundViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("LadderRankAlert")},n);function n(){return e.call(this)||this}t.LadderRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LadderRankItem")},n);function n(){return e.call(this)||this}t.LadderRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LadderView")},n);function n(){return e.call(this)||this}t.LadderViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LastHitAwardAlert")},n);function n(){return e.call(this)||this}t.LastHitAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("LeaveSenceAlert")},n);function n(){return e.call(this)||this}t.LeaveSenceAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LeftBottomItem")},n);function n(){return e.call(this)||this}t.LeftBottomItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("ui.LeftBottomItemUI",t.LeftBottomItemUI),View.regComponent("modules.main.LeftBottomItem2",modules.main.LeftBottomItem2),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),e.prototype.createChildren.call(this),this.loadUI("LeftBottomView")},n);function n(){return e.call(this)||this}t.LeftBottomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LeftTopView")},n);function n(){return e.call(this)||this}t.LeftTopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LiDongStoreView")},n);function n(){return e.call(this)||this}t.LiDongStoreViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LimitPackAlert")},n);function n(){return e.call(this)||this}t.LimitPackAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LineClearOut")},n);function n(){return e.call(this)||this}t.LineClearOutUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LoadingView")},n);function n(){return e.call(this)||this}t.LoadingViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LoginReward")},n);function n(){return e.call(this)||this}t.LoginRewardUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LoginRewardItem")},n);function n(){return e.call(this)||this}t.LoginRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LoginRewardTipAlert")},n);function n(){return e.call(this)||this}t.LoginRewardTipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LoginView")},n);function n(){return e.call(this)||this}t.LoginViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("LoseView")},n);function n(){return e.call(this)||this}t.LoseViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MagicArtGetView")},n);function n(){return e.call(this)||this}t.MagicArtGetViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MagicArtItemView")},n);function n(){return e.call(this)||this}t.MagicArtItemViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MagicArtView")},n);function n(){return e.call(this)||this}t.MagicArtViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MagicPositionAlert")},n);function n(){return e.call(this)||this}t.MagicPositionAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MagicPositionItem")},n);function n(){return e.call(this)||this}t.MagicPositionItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MagicPositionView")},n);function n(){return e.call(this)||this}t.MagicPositionViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("MainChatItem")},n);function n(){return e.call(this)||this}t.MainChatItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ManualGiftAlert")},n);function n(){return e.call(this)||this}t.ManualGiftAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ManualGiftAlertItem")},n);function n(){return e.call(this)||this}t.ManualGiftAlertItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryArenaAwardAlert")},n);function n(){return e.call(this)||this}t.MarryArenaAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryArenaAwardItem")},n);function n(){return e.call(this)||this}t.MarryArenaAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryArenaBattlePlayerInfoItem")},n);function n(){return e.call(this)||this}t.MarryArenaBattlePlayerInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.marry_arena.MarryArenaBattlePlayerItem",modules.marry_arena.MarryArenaBattlePlayerItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryArenaBattleView")},n);function n(){return e.call(this)||this}t.MarryArenaBattleViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryArenaEnemyItem")},n);function n(){return e.call(this)||this}t.MarryArenaEnemyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryArenaRankItem")},n);function n(){return e.call(this)||this}t.MarryArenaRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.marry_arena.MarryArenaEnemyItem",modules.marry_arena.MarryArenaEnemyItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryArenaView")},n);function n(){return e.call(this)||this}t.MarryArenaViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryCopyAlert")},n);function n(){return e.call(this)||this}t.MarryCopyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryCopyTipsAlert")},n);function n(){return e.call(this)||this}t.MarryCopyTipsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryIntimacyAwardsAlert")},n);function n(){return e.call(this)||this}t.MarryIntimacyAwardsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("MarryPackAlert")},n);function n(){return e.call(this)||this}t.MarryPackAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.marry.MarrySkillItem",modules.marry.MarrySkillItem),e.prototype.createChildren.call(this),this.loadUI("MarryRingView")},n);function n(){return e.call(this)||this}t.MarryRingViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("MarrySquareItem")},n);function n(){return e.call(this)||this}t.MarrySquareItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarrySquareView")},n);function n(){return e.call(this)||this}t.MarrySquareViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryTaskItem_1")},n);function n(){return e.call(this)||this}t.MarryTaskItem_1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryTaskItem_2")},n);function n(){return e.call(this)||this}t.MarryTaskItem_2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryTaskView")},n);function n(){return e.call(this)||this}t.MarryTaskViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("MarryTokenFeedView")},n);function n(){return e.call(this)||this}t.MarryTokenFeedViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.marry.MarryTokenSkillIcon",modules.marry.MarryTokenSkillIcon),e.prototype.createChildren.call(this),this.loadUI("MarryTokenRankView")},n);function n(){return e.call(this)||this}t.MarryTokenRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MarryView")},n);function n(){return e.call(this)||this}t.MarryViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MidAutumnBigAwardAlert")},n);function n(){return e.call(this)||this}t.MidAutumnBigAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("MidAutumnPartyAlert")},n);function n(){return e.call(this)||this}t.MidAutumnPartyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MissionAskForHelpAlert")},n);function n(){return e.call(this)||this}t.MissionAskForHelpAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("MissionMaskView")},n);function n(){return e.call(this)||this}t.MissionMaskViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MissionView")},n);function n(){return e.call(this)||this}t.MissionViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MoneyCatAlert")},n);function n(){return e.call(this)||this}t.MoneyCatAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("MoneyCatBuyAlert")},n);function n(){return e.call(this)||this}t.MoneyCatBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MoneyCatItem")},n);function n(){return e.call(this)||this}t.MoneyCatItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MonthCardItem")},n);function n(){return e.call(this)||this}t.MonthCardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("MonthCardView")},n);function n(){return e.call(this)||this}t.MonthCardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MultiBossItem")},n);function n(){return e.call(this)||this}t.MultiBossItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MultiBossView")},n);function n(){return e.call(this)||this}t.MultiBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MvpAwardAlert")},n);function n(){return e.call(this)||this}t.MvpAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("MysteriousStoreAlert")},n);function n(){return e.call(this)||this}t.MysteriousStoreAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("MysteriousStoreBuyAlert")},n);function n(){return e.call(this)||this}t.MysteriousStoreBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("MysteriousStoreView")},n);function n(){return e.call(this)||this}t.MysteriousStoreViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("NationalDayJQView")},n);function n(){return e.call(this)||this}t.NationalDayJQViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("NationalDayRankAwardAlert")},n);function n(){return e.call(this)||this}t.NationalDayRankAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),e.prototype.createChildren.call(this),this.loadUI("NationalDayTreasureView")},n);function n(){return e.call(this)||this}t.NationalDayTreasureViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.nether_world.NetherWorldCopyPlayerInfoItem",modules.nether_world.NetherWorldCopyPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("NetherWorldCopyRightView")},n);function n(){return e.call(this)||this}t.NetherWorldCopyRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NetherWorldLeftView")},n);function n(){return e.call(this)||this}t.NetherWorldLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("NetherWorldView")},n);function n(){return e.call(this)||this}t.NetherWorldViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NewOfficialAccount")},n);function n(){return e.call(this)||this}t.NewOfficialAccountUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("NianEndOneBuy")},n);function n(){return e.call(this)||this}t.NianEndOneBuyUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NineCBView")},n);function n(){return e.call(this)||this}t.NineCBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("NineDefeatView")},n);function n(){return e.call(this)||this}t.NineDefeatViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NineExitAlert")},n);function n(){return e.call(this)||this}t.NineExitAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NineRBBossItem")},n);function n(){return e.call(this)||this}t.NineRBBossItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NineRBPlayerItem")},n);function n(){return e.call(this)||this}t.NineRBPlayerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("NineRBView")},n);function n(){return e.call(this)||this}t.NineRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NineRBView1")},n);function n(){return e.call(this)||this}t.NineRBView1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.nine.NineResultItem",modules.nine.NineResultItem),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("NineResultAlert")},n);function n(){return e.call(this)||this}t.NineResultAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NineResultItem")},n);function n(){return e.call(this)||this}t.NineResultItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.nine.NineTopAwardItem",modules.nine.NineTopAwardItem),e.prototype.createChildren.call(this),this.loadUI("NineTopAwardAlert")},n);function n(){return e.call(this)||this}t.NineTopAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NineTopAwardItem")},n);function n(){return e.call(this)||this}t.NineTopAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BagItem",modules.bag.BagItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("NineView")},n);function n(){return e.call(this)||this}t.NineViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldCenterView")},n);function n(){return e.call(this)||this}t.NothingnessWorldCenterViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldCharmMallAlert")},n);function n(){return e.call(this)||this}t.NothingnessWorldCharmMallAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.nothingness_world.NothingnessWorldCopyRuneItem",modules.nothingness_world.NothingnessWorldCopyRuneItem),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldCharmMallItem")},n);function n(){return e.call(this)||this}t.NothingnessWorldCharmMallItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldClearanceAlert")},n);function n(){return e.call(this)||this}t.NothingnessWorldClearanceAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldCopyPlayerInfoItem")},n);function n(){return e.call(this)||this}t.NothingnessWorldCopyPlayerInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.nothingness_world.NothingnessWorldCopyPlayerInfoItem",modules.nothingness_world.NothingnessWorldCopyPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldCopyRightView")},n);function n(){return e.call(this)||this}t.NothingnessWorldCopyRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldCopyRuneItem")},n);function n(){return e.call(this)||this}t.NothingnessWorldCopyRuneItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldLeftView")},n);function n(){return e.call(this)||this}t.NothingnessWorldLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldRankItem")},n);function n(){return e.call(this)||this}t.NothingnessWorldRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldRewordPreviewAlert")},n);function n(){return e.call(this)||this}t.NothingnessWorldRewordPreviewAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldStrategyAlert")},n);function n(){return e.call(this)||this}t.NothingnessWorldStrategyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("NothingnessWorldView")},n);function n(){return e.call(this)||this}t.NothingnessWorldViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("OfficialAccount")},n);function n(){return e.call(this)||this}t.OfficialAccountUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OfflineProfitAlert")},n);function n(){return e.call(this)||this}t.OfflineProfitAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("OneBuy")},n);function n(){return e.call(this)||this}t.OneBuyUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OnlineEeterView")},n);function n(){return e.call(this)||this}t.OnlineEeterViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OnLineGiftItem")},n);function n(){return e.call(this)||this}t.OnLineGiftItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("OnLineGiftView")},n);function n(){return e.call(this)||this}t.OnLineGiftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("OpenAwardItem")},n);function n(){return e.call(this)||this}t.OpenAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),e.prototype.createChildren.call(this),this.loadUI("OpenAwardView")},n);function n(){return e.call(this)||this}t.OpenAwardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("openChallenge")},n);function n(){return e.call(this)||this}t.openChallengeUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("openChallengeItem")},n);function n(){return e.call(this)||this}t.openChallengeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OtherCatTips")},n);function n(){return e.call(this)||this}t.OtherCatTipsUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OtherPlayerInfoBaseAlert")},n);function n(){return e.call(this)||this}t.OtherPlayerInfoBaseAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.brahma_equip.BrahmaEquipShowItem",modules.brahma_equip.BrahmaEquipShowItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OtherPlayerInfoFantianAlert")},n);function n(){return e.call(this)||this}t.OtherPlayerInfoFantianAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OtherPlayerInfoItem")},n);function n(){return e.call(this)||this}t.OtherPlayerInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.chat.OtherPlayerInfoItem",modules.chat.OtherPlayerInfoItem),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),e.prototype.createChildren.call(this),this.loadUI("OtherPlayerInfoModelAlert")},n);function n(){return e.call(this)||this}t.OtherPlayerInfoModelAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OtherPlayerInfoYuanShenAlert")},n);function n(){return e.call(this)||this}t.OtherPlayerInfoYuanShenAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OtherPlayerOnlineTipsView")},n);function n(){return e.call(this)||this}t.OtherPlayerOnlineTipsViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("OtherRingTips")},n);function n(){return e.call(this)||this}t.OtherRingTipsUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OutsideShowDungeonBossItem")},n);function n(){return e.call(this)||this}t.OutsideShowDungeonBossItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("OutsideShowDungeonBtnItem")},n);function n(){return e.call(this)||this}t.OutsideShowDungeonBtnItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent(" modules.outside_show_dungeon.OutsideShowDungeonBossItem",modules.outside_show_dungeon.OutsideShowDungeonBossItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OutsideShowDungeonItem")},n);function n(){return e.call(this)||this}t.OutsideShowDungeonItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("OutsideShowDungeonView")},n);function n(){return e.call(this)||this}t.OutsideShowDungeonViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("PayRankItem")},n);function n(){return e.call(this)||this}t.PayRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PayRankView")},n);function n(){return e.call(this)||this}t.PayRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PayRewardAlert")},n);function n(){return e.call(this)||this}t.PayRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PayRewardMyRecordAlert")},n);function n(){return e.call(this)||this}t.PayRewardMyRecordAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PayRewardMyRecordItem")},n);function n(){return e.call(this)||this}t.PayRewardMyRecordItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PayRewardRankAlert")},n);function n(){return e.call(this)||this}t.PayRewardRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PayRewardRankItem")},n);function n(){return e.call(this)||this}t.PayRewardRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PayRewardView")},n);function n(){return e.call(this)||this}t.PayRewardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PeakDuelAwardAlert")},n);function n(){return e.call(this)||this}t.PeakDuelAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("PeakDuelAwardItem")},n);function n(){return e.call(this)||this}t.PeakDuelAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("PeakDuelItem")},n);function n(){return e.call(this)||this}t.PeakDuelItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PeakDuelRankAlert")},n);function n(){return e.call(this)||this}t.PeakDuelRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("PeakDuelRankItem")},n);function n(){return e.call(this)||this}t.PeakDuelRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("PeakDuelRankView")},n);function n(){return e.call(this)||this}t.PeakDuelRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PeakDuelView")},n);function n(){return e.call(this)||this}t.PeakDuelViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.perfectest_ten_good_man.PerfectestTenGoodManItem",modules.perfectest_ten_good_man.PerfectestTenGoodManItem),View.regComponent("modules.perfectest_ten_good_man.PerfectestTenGoodManItem1",modules.perfectest_ten_good_man.PerfectestTenGoodManItem1),e.prototype.createChildren.call(this),this.loadUI("PerfectestTenGoodManView")},n);function n(){return e.call(this)||this}t.PerfectestTenGoodManViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.perfectest_ten_star.PerfectestTenStarItem2",modules.perfectest_ten_star.PerfectestTenStarItem2),View.regComponent("modules.single_dog_sart.SingleDogSartItem3",modules.single_dog_sart.SingleDogSartItem3),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PerfectestTenSartItem1")},n);function n(){return e.call(this)||this}t.PerfectestTenSartItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.perfectest_ten_star.PerfectestTenStarItem1",modules.perfectest_ten_star.PerfectestTenStarItem1),e.prototype.createChildren.call(this),this.loadUI("PerfectestTenSartView")},n);function n(){return e.call(this)||this}t.PerfectestTenSartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PetAttrAlert")},n);function n(){return e.call(this)||this}t.PetAttrAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.immortals.SkillItem",modules.immortals.SkillItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),e.prototype.createChildren.call(this),this.loadUI("PetFeedView")},n);function n(){return e.call(this)||this}t.PetFeedViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PetLTView")},n);function n(){return e.call(this)||this}t.PetLTViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PetRankView")},n);function n(){return e.call(this)||this}t.PetRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PetRBView")},n);function n(){return e.call(this)||this}t.PetRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PetRefineView")},n);function n(){return e.call(this)||this}t.PetRefineViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("PetUpgradeItem")},n);function n(){return e.call(this)||this}t.PetUpgradeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PetUpgradeSkillAlert")},n);function n(){return e.call(this)||this}t.PetUpgradeSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PetWinView")},n);function n(){return e.call(this)||this}t.PetWinViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PhoneQQRedBagAlert")},n);function n(){return e.call(this)||this}t.PhoneQQRedBagAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PhoneQQRedBagOpenAlert")},n);function n(){return e.call(this)||this}t.PhoneQQRedBagOpenAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PhoneQQRedBagTaskAlert")},n);function n(){return e.call(this)||this}t.PhoneQQRedBagTaskAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PhoneQQRedBagTaskBtnItem")},n);function n(){return e.call(this)||this}t.PhoneQQRedBagTaskBtnItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("PhoneQQRedBagTaskItem")},n);function n(){return e.call(this)||this}t.PhoneQQRedBagTaskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("PlantingTreesView")},n);function n(){return e.call(this)||this}t.PlantingTreesViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerAttrAlert")},n);function n(){return e.call(this)||this}t.PlayerAttrAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerAttrItem")},n);function n(){return e.call(this)||this}t.PlayerAttrItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerAttrItem1")},n);function n(){return e.call(this)||this}t.PlayerAttrItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerInfoTxtItem")},n);function n(){return e.call(this)||this}t.PlayerInfoTxtItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerListItem")},n);function n(){return e.call(this)||this}t.PlayerListItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("PlayerRankingItem")},n);function n(){return e.call(this)||this}t.PlayerRankingItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerTitileActiveAlert")},n);function n(){return e.call(this)||this}t.PlayerTitileActiveAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerTitleChatAlert")},n);function n(){return e.call(this)||this}t.PlayerTitleChatAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("PlayerTitleChatItem")},n);function n(){return e.call(this)||this}t.PlayerTitleChatItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PlayerTitleItem")},n);function n(){return e.call(this)||this}t.PlayerTitleItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerTitleView")},n);function n(){return e.call(this)||this}t.PlayerTitleViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PlayerView")},n);function n(){return e.call(this)||this}t.PlayerViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PreventFoolAlert")},n);function n(){return e.call(this)||this}t.PreventFoolAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PreventFoolView")},n);function n(){return e.call(this)||this}t.PreventFoolViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PropAlert")},n);function n(){return e.call(this)||this}t.PropAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("ProposeAlert")},n);function n(){return e.call(this)||this}t.ProposeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("PropRoleAlert")},n);function n(){return e.call(this)||this}t.PropRoleAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("PropUseAlert")},n);function n(){return e.call(this)||this}t.PropUseAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("QQBlueDailyView")},n);function n(){return e.call(this)||this}t.QQBlueDailyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("QQBlueIntro")},n);function n(){return e.call(this)||this}t.QQBlueIntroUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("QQBlueLevelView")},n);function n(){return e.call(this)||this}t.QQBlueLevelViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("QQBlueStartView")},n);function n(){return e.call(this)||this}t.QQBlueStartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("QQBlueView")},n);function n(){return e.call(this)||this}t.QQBlueViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("QQListItem")},n);function n(){return e.call(this)||this}t.QQListItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("QQLobbyDailyView")},n);function n(){return e.call(this)||this}t.QQLobbyDailyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("QQLobbyIntro")},n);function n(){return e.call(this)||this}t.QQLobbyIntroUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("QQLobbyLevelView")},n);function n(){return e.call(this)||this}t.QQLobbyLevelViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("QQLobbyStartView")},n);function n(){return e.call(this)||this}t.QQLobbyStartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("QuickUse")},n);function n(){return e.call(this)||this}t.QuickUseUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("RankingListPlayerInfoItem")},n);function n(){return e.call(this)||this}t.RankingListPlayerInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),e.prototype.createChildren.call(this),this.loadUI("RankingListPlayerInfoItem1")},n);function n(){return e.call(this)||this}t.RankingListPlayerInfoItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("RankingListView")},n);function n(){return e.call(this)||this}t.RankingListViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.ranking_list_new.FactionRankPlayerInfoItem1",modules.ranking_list_new.FactionRankPlayerInfoItem1),View.regComponent("modules.ranking_list_new.RankListPlayerInfoItem1",modules.ranking_list_new.RankListPlayerInfoItem1),View.regComponent("modules.ranking_list_new.RankListPlayerInfoItem",modules.ranking_list_new.RankListPlayerInfoItem),View.regComponent("modules.ranking_list_new.FactionRankPlayerInfoItem",modules.ranking_list_new.FactionRankPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("RankingListView1")},n);function n(){return e.call(this)||this}t.RankingListView1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("RealName")},n);function n(){return e.call(this)||this}t.RealNameUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RechargeItem")},n);function n(){return e.call(this)||this}t.RechargeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RechargeView")},n);function n(){return e.call(this)||this}t.RechargeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("RechatFrameItem")},n);function n(){return e.call(this)||this}t.RechatFrameItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RedBagItem")},n);function n(){return e.call(this)||this}t.RedBagItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RedBagOpenAlert")},n);function n(){return e.call(this)||this}t.RedBagOpenAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RedBagOpenItem")},n);function n(){return e.call(this)||this}t.RedBagOpenItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RedBagSendAlert")},n);function n(){return e.call(this)||this}t.RedBagSendAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RedBagSendGradeItem")},n);function n(){return e.call(this)||this}t.RedBagSendGradeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RedBagThankAlert")},n);function n(){return e.call(this)||this}t.RedBagThankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RedBagThankItem")},n);function n(){return e.call(this)||this}t.RedBagThankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RedBagView")},n);function n(){return e.call(this)||this}t.RedBagViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RedPackItem")},n);function n(){return e.call(this)||this}t.RedPackItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RedPackView")},n);function n(){return e.call(this)||this}t.RedPackViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ReheadAlert")},n);function n(){return e.call(this)||this}t.ReheadAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ReheadItem")},n);function n(){return e.call(this)||this}t.ReheadItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RenameAlert")},n);function n(){return e.call(this)||this}t.RenameAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("renZhuView")},n);function n(){return e.call(this)||this}t.renZhuViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RepeatPayView")},n);function n(){return e.call(this)||this}t.RepeatPayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ResBackAlert")},n);function n(){return e.call(this)||this}t.ResBackAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ResBackItem_1")},n);function n(){return e.call(this)||this}t.ResBackItem_1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ResBackItem_2")},n);function n(){return e.call(this)||this}t.ResBackItem_2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ResBackView")},n);function n(){return e.call(this)||this}t.ResBackViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ReviveAlert")},n);function n(){return e.call(this)||this}t.ReviveAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("RightBottomView")},n);function n(){return e.call(this)||this}t.RightBottomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RightTopView")},n);function n(){return e.call(this)||this}t.RightTopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RingBuyAlert")},n);function n(){return e.call(this)||this}t.RingBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RingMarkAlert")},n);function n(){return e.call(this)||this}t.RingMarkAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RingMarkTipsAlert")},n);function n(){return e.call(this)||this}t.RingMarkTipsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("RingReplaceView")},n);function n(){return e.call(this)||this}t.RingReplaceViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RotaryTableItem")},n);function n(){return e.call(this)||this}t.RotaryTableItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RotaryTableJiFenItem")},n);function n(){return e.call(this)||this}t.RotaryTableJiFenItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),e.prototype.createChildren.call(this),this.loadUI("RotaryTableJiuZhouView")},n);function n(){return e.call(this)||this}t.RotaryTableJiuZhouViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RotaryTableRankItem")},n);function n(){return e.call(this)||this}t.RotaryTableRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RotaryTableRewardAlert")},n);function n(){return e.call(this)||this}t.RotaryTableRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RotaryTableRewardRankAlert")},n);function n(){return e.call(this)||this}t.RotaryTableRewardRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RotaryTableSoaringRankAwardAlert")},n);function n(){return e.call(this)||this}t.RotaryTableSoaringRankAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),e.prototype.createChildren.call(this),this.loadUI("RotaryTableSoaringView")},n);function n(){return e.call(this)||this}t.RotaryTableSoaringViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuinsBigPreviewAlert")},n);function n(){return e.call(this)||this}t.RuinsBigPreviewAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuinsBigSelectAlert")},n);function n(){return e.call(this)||this}t.RuinsBigSelectAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuinsItem")},n);function n(){return e.call(this)||this}t.RuinsItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("RuinsRankItem")},n);function n(){return e.call(this)||this}t.RuinsRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("RuinsRankView")},n);function n(){return e.call(this)||this}t.RuinsRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("RuinsShopAlert")},n);function n(){return e.call(this)||this}t.RuinsShopAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RuinsTaskItem")},n);function n(){return e.call(this)||this}t.RuinsTaskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RuinsTaskView")},n);function n(){return e.call(this)||this}t.RuinsTaskViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RuinsView")},n);function n(){return e.call(this)||this}t.RuinsViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuneAllAlert")},n);function n(){return e.call(this)||this}t.RuneAllAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("RuneAllListView")},n);function n(){return e.call(this)||this}t.RuneAllListViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuneBagAlert")},n);function n(){return e.call(this)||this}t.RuneBagAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("RuneBagItem")},n);function n(){return e.call(this)||this}t.RuneBagItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RuneBookView")},n);function n(){return e.call(this)||this}t.RuneBookViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("RuneComposeItem")},n);function n(){return e.call(this)||this}t.RuneComposeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.runeCompose.RuneComposeNeedItem",modules.runeCompose.RuneComposeNeedItem),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuneComposeView")},n);function n(){return e.call(this)||this}t.RuneComposeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("RuneCopyView")},n);function n(){return e.call(this)||this}t.RuneCopyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RuneDismantlingAlert")},n);function n(){return e.call(this)||this}t.RuneDismantlingAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuneInlayItem")},n);function n(){return e.call(this)||this}t.RuneInlayItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rune.RunePit",modules.rune.RunePit),e.prototype.createChildren.call(this),this.loadUI("RuneInlayView")},n);function n(){return e.call(this)||this}t.RuneInlayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuneItem")},n);function n(){return e.call(this)||this}t.RuneItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuneResolveAlert")},n);function n(){return e.call(this)||this}t.RuneResolveAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuneResolveItem")},n);function n(){return e.call(this)||this}t.RuneResolveItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("RuneStarItem")},n);function n(){return e.call(this)||this}t.RuneStarItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("RuneTipItem")},n);function n(){return e.call(this)||this}t.RuneTipItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("RushToPurchaseAlert")},n);function n(){return e.call(this)||this}t.RushToPurchaseAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SaintsParty")},n);function n(){return e.call(this)||this}t.SaintsPartyUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SaintsPartyBigAwardAlert")},n);function n(){return e.call(this)||this}t.SaintsPartyBigAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SbItem")},n);function n(){return e.call(this)||this}t.SbItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SceneTeamCreateAlert")},n);function n(){return e.call(this)||this}t.SceneTeamCreateAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SealDeityView")},n);function n(){return e.call(this)||this}t.SealDeityViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SearchHalfAlert")},n);function n(){return e.call(this)||this}t.SearchHalfAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SeekMarryAlert")},n);function n(){return e.call(this)||this}t.SeekMarryAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("SelectServerView")},n);function n(){return e.call(this)||this}t.SelectServerViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SendQCoinsAlert")},n);function n(){return e.call(this)||this}t.SendQCoinsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SetInputWordAlert")},n);function n(){return e.call(this)||this}t.SetInputWordAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SetSystemAlert")},n);function n(){return e.call(this)||this}t.SetSystemAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SetTipsAlert")},n);function n(){return e.call(this)||this}t.SetTipsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("SevenGiftItem")},n);function n(){return e.call(this)||this}t.SevenGiftItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.sevenDayGift.SevenDayGiftItem",modules.sevenDayGift.SevenDayGiftItem),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("SevenSign")},n);function n(){return e.call(this)||this}t.SevenSignUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShengYuBossAndPlayerListView")},n);function n(){return e.call(this)||this}t.ShengYuBossAndPlayerListViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShengYuBossInfoItem")},n);function n(){return e.call(this)||this}t.ShengYuBossInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShengYuBossInformationView")},n);function n(){return e.call(this)||this}t.ShengYuBossInformationViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ShengYuBossItem")},n);function n(){return e.call(this)||this}t.ShengYuBossItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShengYuBossLeftView")},n);function n(){return e.call(this)||this}t.ShengYuBossLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShengYuBossShouYiAlert")},n);function n(){return e.call(this)||this}t.ShengYuBossShouYiAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShengYuBossView")},n);function n(){return e.call(this)||this}t.ShengYuBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShengYuTipAlert")},n);function n(){return e.call(this)||this}t.ShengYuTipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShenQiView")},n);function n(){return e.call(this)||this}t.ShenQiViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.showEquip.ShowEquipItem",modules.showEquip.ShowEquipItem),View.regComponent("ui.ShowEquipSkillIconUI",t.ShowEquipSkillIconUI),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ShowEquipBase")},n);function n(){return e.call(this)||this}t.ShowEquipBaseUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ShowEquipConvertAlert")},n);function n(){return e.call(this)||this}t.ShowEquipConvertAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ShowEquipConvertBase")},n);function n(){return e.call(this)||this}t.ShowEquipConvertBaseUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ShowEquipItem")},n);function n(){return e.call(this)||this}t.ShowEquipItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ShowEquipMasterAlert")},n);function n(){return e.call(this)||this}t.ShowEquipMasterAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ShowEquipSkillAlert")},n);function n(){return e.call(this)||this}t.ShowEquipSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ShowEquipSkillIcon")},n);function n(){return e.call(this)||this}t.ShowEquipSkillIconUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ShowMasterAlert")},n);function n(){return e.call(this)||this}t.ShowMasterAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ShowMasterBaseView")},n);function n(){return e.call(this)||this}t.ShowMasterBaseViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ShowMasterDetailAlert")},n);function n(){return e.call(this)||this}t.ShowMasterDetailAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.sign.SignAwardItem",modules.sign.SignAwardItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SignAwardItem")},n);function n(){return e.call(this)||this}t.SignAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.sign.SignAwardItem",modules.sign.SignAwardItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SignView")},n);function n(){return e.call(this)||this}t.SignViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleBossItem")},n);function n(){return e.call(this)||this}t.SingleBossItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleBossView")},n);function n(){return e.call(this)||this}t.SingleBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleDogCollectionView")},n);function n(){return e.call(this)||this}t.SingleDogCollectionViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("SingleDogGoodManAlert")},n);function n(){return e.call(this)||this}t.SingleDogGoodManAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SingleDogGoodManItem")},n);function n(){return e.call(this)||this}t.SingleDogGoodManItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SingleDogGoodManItem1")},n);function n(){return e.call(this)||this}t.SingleDogGoodManItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleDogGoodManJiLuAlert")},n);function n(){return e.call(this)||this}t.SingleDogGoodManJiLuAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("SingleDogGoodManSuoAlert")},n);function n(){return e.call(this)||this}t.SingleDogGoodManSuoAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.single_dog_good_man.SingleDogGoodManItem",modules.single_dog_good_man.SingleDogGoodManItem),View.regComponent("modules.single_dog_good_man.SingleDogGoodManItem1",modules.single_dog_good_man.SingleDogGoodManItem1),e.prototype.createChildren.call(this),this.loadUI("SingleDogGoodManView")},n);function n(){return e.call(this)||this}t.SingleDogGoodManViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleDogHalfAlert")},n);function n(){return e.call(this)||this}t.SingleDogHalfAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleDogHalfItem")},n);function n(){return e.call(this)||this}t.SingleDogHalfItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleDogSartAlert")},n);function n(){return e.call(this)||this}t.SingleDogSartAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.single_dog_sart.SingleDogSartItem2",modules.single_dog_sart.SingleDogSartItem2),View.regComponent("modules.single_dog_sart.SingleDogSartItem3",modules.single_dog_sart.SingleDogSartItem3),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SingleDogSartItem")},n);function n(){return e.call(this)||this}t.SingleDogSartItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("SingleDogSartItem1")},n);function n(){return e.call(this)||this}t.SingleDogSartItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("SingleDogSartItem2")},n);function n(){return e.call(this)||this}t.SingleDogSartItem2UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("SingleDogSartItem3")},n);function n(){return e.call(this)||this}t.SingleDogSartItem3UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.zhiZhenStar.ZhiZhenStarItem1",modules.zhiZhenStar.ZhiZhenStarItem1),e.prototype.createChildren.call(this),this.loadUI("SingleDogSartView")},n);function n(){return e.call(this)||this}t.SingleDogSartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SingleDogScoreRankView")},n);function n(){return e.call(this)||this}t.SingleDogScoreRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SingleDogSpecialAlert")},n);function n(){return e.call(this)||this}t.SingleDogSpecialAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleDogYuRanItem")},n);function n(){return e.call(this)||this}t.SingleDogYuRanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),e.prototype.createChildren.call(this),this.loadUI("SingleDogYuRanView")},n);function n(){return e.call(this)||this}t.SingleDogYuRanViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SingleInspireAlert")},n);function n(){return e.call(this)||this}t.SingleInspireAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SinglePartyItem")},n);function n(){return e.call(this)||this}t.SinglePartyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SinglePayView")},n);function n(){return e.call(this)||this}t.SinglePayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SkillAlert")},n);function n(){return e.call(this)||this}t.SkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SkillIcon")},n);function n(){return e.call(this)||this}t.SkillIconUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("ui.SkillIconUI",t.SkillIconUI),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SkillIcon1")},n);function n(){return e.call(this)||this}t.SkillIcon1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SkyBookBuyAlert")},n);function n(){return e.call(this)||this}t.SkyBookBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SkyBookPayView")},n);function n(){return e.call(this)||this}t.SkyBookPayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SmeltSuccessAlert")},n);function n(){return e.call(this)||this}t.SmeltSuccessAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SmeltUpgradeAlert")},n);function n(){return e.call(this)||this}t.SmeltUpgradeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BagSelectPanel",modules.bag.BagSelectPanel),e.prototype.createChildren.call(this),this.loadUI("SmeltView")},n);function n(){return e.call(this)||this}t.SmeltViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SoaringCumulatePayView")},n);function n(){return e.call(this)||this}t.SoaringCumulatePayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SoaringDayConsumeRewardView")},n);function n(){return e.call(this)||this}t.SoaringDayConsumeRewardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SoaringItem")},n);function n(){return e.call(this)||this}t.SoaringItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("SoaringPanicBuyingGiftView")},n);function n(){return e.call(this)||this}t.SoaringPanicBuyingGiftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SoaringRankItem")},n);function n(){return e.call(this)||this}t.SoaringRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SoaringRankJieZhiAlert")},n);function n(){return e.call(this)||this}t.SoaringRankJieZhiAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SoaringRankJieZhiItem")},n);function n(){return e.call(this)||this}t.SoaringRankJieZhiItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SoaringRankView")},n);function n(){return e.call(this)||this}t.SoaringRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SoaringSinglePayView")},n);function n(){return e.call(this)||this}t.SoaringSinglePayViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("SoaringSpecialGiftItem")},n);function n(){return e.call(this)||this}t.SoaringSpecialGiftItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SoaringSpecialGiftView")},n);function n(){return e.call(this)||this}t.SoaringSpecialGiftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SoulFightSkillAlert")},n);function n(){return e.call(this)||this}t.SoulFightSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("SoulLianhunAlert")},n);function n(){return e.call(this)||this}t.SoulLianhunAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("SoulNinghunSkillIcon")},n);function n(){return e.call(this)||this}t.SoulNinghunSkillIconUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("modules.soul_war.SoulZhanhunSkillItem",modules.soul_war.SoulZhanhunSkillItem),View.regComponent("modules.soul_war.SoulNinghunSkillItem",modules.soul_war.SoulNinghunSkillItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("SoulNinghunView")},n);function n(){return e.call(this)||this}t.SoulNinghunViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("SoulZhanhunItem")},n);function n(){return e.call(this)||this}t.SoulZhanhunItemUI=i}(ui=ui||{});!function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SoulZhanhunSkillIcon")},n);function n(){return e.call(this)||this}t.SoulZhanhunSkillIconUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.soul_war.SoulZhanhunSkillItem",modules.soul_war.SoulZhanhunSkillItem),e.prototype.createChildren.call(this),this.loadUI("SoulZhanhunView")},n);function n(){return e.call(this)||this}t.SoulZhanhunViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SpiritDungeonRBView")},n);function n(){return e.call(this)||this}t.SpiritDungeonRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SpiritDungeonView")},n);function n(){return e.call(this)||this}t.SpiritDungeonViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SpiritLayerItem")},n);function n(){return e.call(this)||this}t.SpiritLayerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SpiritTeamAlert")},n);function n(){return e.call(this)||this}t.SpiritTeamAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SpiritTeamInviteAlert")},n);function n(){return e.call(this)||this}t.SpiritTeamInviteAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SpiritTeamItem")},n);function n(){return e.call(this)||this}t.SpiritTeamItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.spring_scenery_good_man.SpringSceneryGoodManItem",modules.spring_scenery_good_man.SpringSceneryGoodManItem),View.regComponent("modules.spring_scenery_good_man.SpringSceneryGoodManItem1",modules.spring_scenery_good_man.SpringSceneryGoodManItem1),e.prototype.createChildren.call(this),this.loadUI("SpringSceneryGoodManView")},n);function n(){return e.call(this)||this}t.SpringSceneryGoodManViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.spring_scenery_star.SpringSceneryStarItem2",modules.spring_scenery_star.SpringSceneryStarItem2),View.regComponent("modules.single_dog_sart.SingleDogSartItem3",modules.single_dog_sart.SingleDogSartItem3),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SpringScenerySartItem1")},n);function n(){return e.call(this)||this}t.SpringScenerySartItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.spring_scenery_star.SpringSceneryStarItem1",modules.spring_scenery_star.SpringSceneryStarItem1),e.prototype.createChildren.call(this),this.loadUI("SpringScenerySartView")},n);function n(){return e.call(this)||this}t.SpringScenerySartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SprintItem")},n);function n(){return e.call(this)||this}t.SprintItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SprintXianQiRankView")},n);function n(){return e.call(this)||this}t.SprintXianQiRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.stone.StonePit",modules.stone.StonePit),e.prototype.createChildren.call(this),this.loadUI("Stone")},n);function n(){return e.call(this)||this}t.StoneUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StoneDialog")},n);function n(){return e.call(this)||this}t.StoneDialogUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("StoneItem")},n);function n(){return e.call(this)||this}t.StoneItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StoneMaster")},n);function n(){return e.call(this)||this}t.StoneMasterUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("StoneMaster2View")},n);function n(){return e.call(this)||this}t.StoneMaster2ViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StoneMasterEx")},n);function n(){return e.call(this)||this}t.StoneMasterExUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("StonePit")},n);function n(){return e.call(this)||this}t.StonePitUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("StoreAlert")},n);function n(){return e.call(this)||this}t.StoreAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("StoreItem")},n);function n(){return e.call(this)||this}t.StoreItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("StoreSpecialAlert")},n);function n(){return e.call(this)||this}t.StoreSpecialAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("StoreView")},n);function n(){return e.call(this)||this}t.StoreViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("StoreXianFuItem")},n);function n(){return e.call(this)||this}t.StoreXianFuItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StoreXianFuView")},n);function n(){return e.call(this)||this}t.StoreXianFuViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryCenterTipsView")},n);function n(){return e.call(this)||this}t.StrongestMarryCenterTipsViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryChoiceSkillAlert")},n);function n(){return e.call(this)||this}t.StrongestMarryChoiceSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("ui.SkillIconUI",t.SkillIconUI),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryChoiceSkillItem")},n);function n(){return e.call(this)||this}t.StrongestMarryChoiceSkillItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("ui.SkillIconUI",t.SkillIconUI),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryCopyCenterView")},n);function n(){return e.call(this)||this}t.StrongestMarryCopyCenterViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.strongest_marry.StrongestMarryCopyPlayerInfoItem",modules.strongest_marry.StrongestMarryCopyPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryCopyLeftView")},n);function n(){return e.call(this)||this}t.StrongestMarryCopyLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryCopyPlayerInfoItem")},n);function n(){return e.call(this)||this}t.StrongestMarryCopyPlayerInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryCopyRightBottonView")},n);function n(){return e.call(this)||this}t.StrongestMarryCopyRightBottonViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.strongest_marry.StrongestMarryCopyPlayerInfoItem",modules.strongest_marry.StrongestMarryCopyPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryCopyRightView")},n);function n(){return e.call(this)||this}t.StrongestMarryCopyRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryGuessAlert")},n);function n(){return e.call(this)||this}t.StrongestMarryGuessAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryGuessItem")},n);function n(){return e.call(this)||this}t.StrongestMarryGuessItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryRankAlert")},n);function n(){return e.call(this)||this}t.StrongestMarryRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryRankItem")},n);function n(){return e.call(this)||this}t.StrongestMarryRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryRankRewardAlert")},n);function n(){return e.call(this)||this}t.StrongestMarryRankRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryRankRewardItem")},n);function n(){return e.call(this)||this}t.StrongestMarryRankRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("StrongestMarryView")},n);function n(){return e.call(this)||this}t.StrongestMarryViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("SuperVipTips")},n);function n(){return e.call(this)||this}t.SuperVipTipsUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("SusanSladeView")},n);function n(){return e.call(this)||this}t.SusanSladeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TalismanAlert")},n);function n(){return e.call(this)||this}t.TalismanAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TalismanGetAlert")},n);function n(){return e.call(this)||this}t.TalismanGetAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TalismanItem")},n);function n(){return e.call(this)||this}t.TalismanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TalismanTextItem")},n);function n(){return e.call(this)||this}t.TalismanTextItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TalismanUpAlert")},n);function n(){return e.call(this)||this}t.TalismanUpAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TalismanView")},n);function n(){return e.call(this)||this}t.TalismanViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TeamBattleAwardView")},n);function n(){return e.call(this)||this}t.TeamBattleAwardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("TeamBattleMatchAlert")},n);function n(){return e.call(this)||this}t.TeamBattleMatchAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamBattleTopView")},n);function n(){return e.call(this)||this}t.TeamBattleTopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("TeamBattleView")},n);function n(){return e.call(this)||this}t.TeamBattleViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamBelongView")},n);function n(){return e.call(this)||this}t.TeamBelongViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamCopyAskAlert")},n);function n(){return e.call(this)||this}t.TeamCopyAskAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("TeamCopyAskItem")},n);function n(){return e.call(this)||this}t.TeamCopyAskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamCopyInviteAlert")},n);function n(){return e.call(this)||this}t.TeamCopyInviteAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamCopyInviteItem")},n);function n(){return e.call(this)||this}t.TeamCopyInviteItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamCopyRoomAlert")},n);function n(){return e.call(this)||this}t.TeamCopyRoomAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareAchievementAlert")},n);function n(){return e.call(this)||this}t.TeamWarfareAchievementAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareAchievementItem")},n);function n(){return e.call(this)||this}t.TeamWarfareAchievementItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareBossCopyRightView")},n);function n(){return e.call(this)||this}t.TeamWarfareBossCopyRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareDuelAlert")},n);function n(){return e.call(this)||this}t.TeamWarfareDuelAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.team_warfare.TeamWarfareDuelItem1",modules.team_warfare.TeamWarfareDuelItem1),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareDuelItem")},n);function n(){return e.call(this)||this}t.TeamWarfareDuelItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareDuelItem1")},n);function n(){return e.call(this)||this}t.TeamWarfareDuelItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TeamWarfareGroupItem")},n);function n(){return e.call(this)||this}t.TeamWarfareGroupItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareHurtRewardAlert")},n);function n(){return e.call(this)||this}t.TeamWarfareHurtRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareHurtRewardItem")},n);function n(){return e.call(this)||this}t.TeamWarfareHurtRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareMoBaiAlert")},n);function n(){return e.call(this)||this}t.TeamWarfareMoBaiAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareRankAlert")},n);function n(){return e.call(this)||this}t.TeamWarfareRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareRankItem")},n);function n(){return e.call(this)||this}t.TeamWarfareRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareRankRewardAlert")},n);function n(){return e.call(this)||this}t.TeamWarfareRankRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareRankRewardItem")},n);function n(){return e.call(this)||this}t.TeamWarfareRankRewardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareRankRewardItem1")},n);function n(){return e.call(this)||this}t.TeamWarfareRankRewardItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareseeAlert")},n);function n(){return e.call(this)||this}t.TeamWarfareseeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareseeItem")},n);function n(){return e.call(this)||this}t.TeamWarfareseeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareSportsCopyBottonView")},n);function n(){return e.call(this)||this}t.TeamWarfareSportsCopyBottonViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareSportsCopyItem")},n);function n(){return e.call(this)||this}t.TeamWarfareSportsCopyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareSportsCopyPlayerItem")},n);function n(){return e.call(this)||this}t.TeamWarfareSportsCopyPlayerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareSportsCopyRightView")},n);function n(){return e.call(this)||this}t.TeamWarfareSportsCopyRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareSportsCopyRightView1")},n);function n(){return e.call(this)||this}t.TeamWarfareSportsCopyRightView1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareSportsCopyRightView2")},n);function n(){return e.call(this)||this}t.TeamWarfareSportsCopyRightView2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareSportsCopyTopView")},n);function n(){return e.call(this)||this}t.TeamWarfareSportsCopyTopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareSportsCopyWinView")},n);function n(){return e.call(this)||this}t.TeamWarfareSportsCopyWinViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareTeamItem")},n);function n(){return e.call(this)||this}t.TeamWarfareTeamItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent(" modules.team_warfare.TeamWarfareItem3",modules.team_warfare.TeamWarfareItem3),View.regComponent(" modules.team_warfare.TeamWarfareItem2",modules.team_warfare.TeamWarfareItem2),View.regComponent(" modules.team_warfare.TeamWarfareItem1",modules.team_warfare.TeamWarfareItem1),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareView")},n);function n(){return e.call(this)||this}t.TeamWarfareViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent(" modules.team_warfare.TeamWarfareItem4",modules.team_warfare.TeamWarfareItem4),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareWinItem1")},n);function n(){return e.call(this)||this}t.TeamWarfareWinItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.team_warfare.TeamWarfareTeamItem",modules.team_warfare.TeamWarfareTeamItem),View.regComponent("Text",laya.display.Text),View.regComponent(" modules.team_warfare.TeamWarfareItem4",modules.team_warfare.TeamWarfareItem4),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareWinItem2")},n);function n(){return e.call(this)||this}t.TeamWarfareWinItem2UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.team_warfare.TeamWarfareTeamItem",modules.team_warfare.TeamWarfareTeamItem),View.regComponent("Text",laya.display.Text),View.regComponent(" modules.team_warfare.TeamWarfareItem4",modules.team_warfare.TeamWarfareItem4),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareWinItem3")},n);function n(){return e.call(this)||this}t.TeamWarfareWinItem3UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TeamWarfareWinItem4")},n);function n(){return e.call(this)||this}t.TeamWarfareWinItem4UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TheCanivalTaskAlertItem")},n);function n(){return e.call(this)||this}t.TheCanivalTaskAlertItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TheCarnivalItem")},n);function n(){return e.call(this)||this}t.TheCarnivalItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TheCarnivalTaskAlert")},n);function n(){return e.call(this)||this}t.TheCarnivalTaskAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TheCarnivalTaskItem")},n);function n(){return e.call(this)||this}t.TheCarnivalTaskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TheCarnivalView")},n);function n(){return e.call(this)||this}t.TheCarnivalViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThreeSevenBoxAwardAlert")},n);function n(){return e.call(this)||this}t.ThreeSevenBoxAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThreeSevenBoxDownloadAlert")},n);function n(){return e.call(this)||this}t.ThreeSevenBoxDownloadAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThreeWorldsRank")},n);function n(){return e.call(this)||this}t.ThreeWorldsRankUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThreeWorldsRankItem")},n);function n(){return e.call(this)||this}t.ThreeWorldsRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThreeWorldsRBView")},n);function n(){return e.call(this)||this}t.ThreeWorldsRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThreeWorldsView")},n);function n(){return e.call(this)||this}t.ThreeWorldsViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThunderbolSuitAlert")},n);function n(){return e.call(this)||this}t.ThunderbolSuitAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ThunderboltAngerAlert")},n);function n(){return e.call(this)||this}t.ThunderboltAngerAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.thunderbolt_equip.ThunderboltShowItem",modules.thunderbolt_equip.ThunderboltShowItem),e.prototype.createChildren.call(this),this.loadUI("ThunderboltBuyAlert")},n);function n(){return e.call(this)||this}t.ThunderboltBuyAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ThunderboltBuyItem")},n);function n(){return e.call(this)||this}t.ThunderboltBuyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThunderboltEquipQuenchingView")},n);function n(){return e.call(this)||this}t.ThunderboltEquipQuenchingViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ThunderboltEquipSuitView")},n);function n(){return e.call(this)||this}t.ThunderboltEquipSuitViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ThunderboltPowerAlert")},n);function n(){return e.call(this)||this}t.ThunderboltPowerAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("ThunderboltShowItem")},n);function n(){return e.call(this)||this}t.ThunderboltShowItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TianshuDunwuAlert")},n);function n(){return e.call(this)||this}t.TianshuDunwuAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.tianshu.TianshuPartItem",modules.tianshu.TianshuPartItem),View.regComponent("modules.tianshu.TianshuSkillItem",modules.tianshu.TianshuSkillItem),e.prototype.createChildren.call(this),this.loadUI("TianshuDunwuView")},n);function n(){return e.call(this)||this}t.TianshuDunwuViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TianshuItem")},n);function n(){return e.call(this)||this}t.TianshuItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("TianshuJianwuView")},n);function n(){return e.call(this)||this}t.TianshuJianwuViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TianshuPartItem")},n);function n(){return e.call(this)||this}t.TianshuPartItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TianshuPowerAlert")},n);function n(){return e.call(this)||this}t.TianshuPowerAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TianshuSkillAlert")},n);function n(){return e.call(this)||this}t.TianshuSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TianshuSkillIcon")},n);function n(){return e.call(this)||this}t.TianshuSkillIconUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TianshuView")},n);function n(){return e.call(this)||this}t.TianshuViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TianshuXiulianAlert")},n);function n(){return e.call(this)||this}t.TianshuXiulianAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("TianshuXiuxiAlert")},n);function n(){return e.call(this)||this}t.TianshuXiuxiAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TopView")},n);function n(){return e.call(this)||this}t.TopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossCopyLeftView")},n);function n(){return e.call(this)||this}t.TrahmanBossCopyLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossCopyPlayerItem")},n);function n(){return e.call(this)||this}t.TrahmanBossCopyPlayerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossCopyRightView")},n);function n(){return e.call(this)||this}t.TrahmanBossCopyRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossGSAlert")},n);function n(){return e.call(this)||this}t.TrahmanBossGSAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossItem")},n);function n(){return e.call(this)||this}t.TrahmanBossItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TrahmanBossItem1")},n);function n(){return e.call(this)||this}t.TrahmanBossItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossLoseAlert")},n);function n(){return e.call(this)||this}t.TrahmanBossLoseAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossLoseAlert1")},n);function n(){return e.call(this)||this}t.TrahmanBossLoseAlert1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("modules.bag.BagItem",modules.bag.BagItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossView")},n);function n(){return e.call(this)||this}t.TrahmanBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("TrahmanBossWinAlert")},n);function n(){return e.call(this)||this}t.TrahmanBossWinAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TreasureAlert")},n);function n(){return e.call(this)||this}t.TreasureAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureBagView")},n);function n(){return e.call(this)||this}t.TreasureBagViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureChangeItem")},n);function n(){return e.call(this)||this}t.TreasureChangeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureChangeView")},n);function n(){return e.call(this)||this}t.TreasureChangeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureGetAlert")},n);function n(){return e.call(this)||this}t.TreasureGetAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureLandBagAlert")},n);function n(){return e.call(this)||this}t.TreasureLandBagAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureLandDiceAlert")},n);function n(){return e.call(this)||this}t.TreasureLandDiceAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureLandGetAlert")},n);function n(){return e.call(this)||this}t.TreasureLandGetAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureLandPrevItem")},n);function n(){return e.call(this)||this}t.TreasureLandPrevItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("TreasureLandRankItem")},n);function n(){return e.call(this)||this}t.TreasureLandRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("TreasureLandRankView")},n);function n(){return e.call(this)||this}t.TreasureLandRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("TreasureLandSignItem")},n);function n(){return e.call(this)||this}t.TreasureLandSignItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TreasureLandTaskItem")},n);function n(){return e.call(this)||this}t.TreasureLandTaskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureLandTaskView")},n);function n(){return e.call(this)||this}t.TreasureLandTaskViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureLandView")},n);function n(){return e.call(this)||this}t.TreasureLandViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("TreasureRuneView")},n);function n(){return e.call(this)||this}t.TreasureRuneViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("TreasureTalismanItem")},n);function n(){return e.call(this)||this}t.TreasureTalismanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("TreasureTalismanView")},n);function n(){return e.call(this)||this}t.TreasureTalismanViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("TreasureView")},n);function n(){return e.call(this)||this}t.TreasureViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("TreasureView1")},n);function n(){return e.call(this)||this}t.TreasureView1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("TwiceConvertAlert")},n);function n(){return e.call(this)||this}t.TwiceConvertAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.union_war.UnionDorwItem1",modules.union_war.UnionDorwItem1),View.regComponent("modules.union_war.UnionDorwItem",modules.union_war.UnionDorwItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionDrowAlert")},n);function n(){return e.call(this)||this}t.UnionDrowAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionDrowItem")},n);function n(){return e.call(this)||this}t.UnionDrowItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionDrowItem1")},n);function n(){return e.call(this)||this}t.UnionDrowItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("UnionWarCenterView")},n);function n(){return e.call(this)||this}t.UnionWarCenterViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarCentrTopItem1")},n);function n(){return e.call(this)||this}t.UnionWarCentrTopItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarCentrTopItem2")},n);function n(){return e.call(this)||this}t.UnionWarCentrTopItem2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.union_war.UnionWarCentrTopItem1",modules.union_war.UnionWarCentrTopItem1),View.regComponent("modules.union_war.UnionWarCentrTopItem2",modules.union_war.UnionWarCentrTopItem2),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarCnterTopView")},n);function n(){return e.call(this)||this}t.UnionWarCnterTopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarCopyLeftItem")},n);function n(){return e.call(this)||this}t.UnionWarCopyLeftItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarCopyLeftRewardView")},n);function n(){return e.call(this)||this}t.UnionWarCopyLeftRewardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.union_war.UnionWarReadyCopyRightItem",modules.union_war.UnionWarReadyCopyRightItem),e.prototype.createChildren.call(this),this.loadUI("UnionWarCopyLeftView")},n);function n(){return e.call(this)||this}t.UnionWarCopyLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarCopyPlayerItem")},n);function n(){return e.call(this)||this}t.UnionWarCopyPlayerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("UnionWarDuelAlert")},n);function n(){return e.call(this)||this}t.UnionWarDuelAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("UnionWarDuelGroupItem")},n);function n(){return e.call(this)||this}t.UnionWarDuelGroupItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarDuelItem")},n);function n(){return e.call(this)||this}t.UnionWarDuelItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("UnionWarEnrollAlert")},n);function n(){return e.call(this)||this}t.UnionWarEnrollAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("UnionWarHtmlItem")},n);function n(){return e.call(this)||this}t.UnionWarHtmlItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarMoBaiAlert")},n);function n(){return e.call(this)||this}t.UnionWarMoBaiAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarOptionItem")},n);function n(){return e.call(this)||this}t.UnionWarOptionItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarPlayerItem")},n);function n(){return e.call(this)||this}t.UnionWarPlayerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryCnterBottonView")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryCnterBottonViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.union_war.UnionWarPreliminaryPlayerInfoItem1",modules.union_war.UnionWarPreliminaryPlayerInfoItem1),View.regComponent("modules.union_war.UnionWarPreliminaryPlayerInfoItem2",modules.union_war.UnionWarPreliminaryPlayerInfoItem2),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryCnterTopView")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryCnterTopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.union_war.UnionWarPreliminaryPlayerInfoItem",modules.union_war.UnionWarPreliminaryPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryLeftView")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryLeftViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryPlayerInfoItem")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryPlayerInfoItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryPlayerInfoItem1")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryPlayerInfoItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryPlayerInfoItem2")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryPlayerInfoItem2UI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryRankAlert")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryRankItem")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.union_war.UnionWarPreliminaryPlayerInfoItem",modules.union_war.UnionWarPreliminaryPlayerInfoItem),e.prototype.createChildren.call(this),this.loadUI("UnionWarPreliminaryRightView")},n);function n(){return e.call(this)||this}t.UnionWarPreliminaryRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarReadyCopyRightView")},n);function n(){return e.call(this)||this}t.UnionWarReadyCopyRightViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardAlert")},n);function n(){return e.call(this)||this}t.UnionWarRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardDistributionAlert")},n);function n(){return e.call(this)||this}t.UnionWarRewardDistributionAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardDistributionBaseItem")},n);function n(){return e.call(this)||this}t.UnionWarRewardDistributionBaseItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardDistributionItem")},n);function n(){return e.call(this)||this}t.UnionWarRewardDistributionItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardDistributionPlayerItem")},n);function n(){return e.call(this)||this}t.UnionWarRewardDistributionPlayerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardDistributionRecordAlert")},n);function n(){return e.call(this)||this}t.UnionWarRewardDistributionRecordAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardDistributionRecordItem")},n);function n(){return e.call(this)||this}t.UnionWarRewardDistributionRecordItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardDistributionView")},n);function n(){return e.call(this)||this}t.UnionWarRewardDistributionViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardRankItem")},n);function n(){return e.call(this)||this}t.UnionWarRewardRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardSingleItem")},n);function n(){return e.call(this)||this}t.UnionWarRewardSingleItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),e.prototype.createChildren.call(this),this.loadUI("UnionWarRewardView")},n);function n(){return e.call(this)||this}t.UnionWarRewardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.union_war.UnionWarPlayerItem",modules.union_war.UnionWarPlayerItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("UnionWarView")},n);function n(){return e.call(this)||this}t.UnionWarViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("UnionWarWinAndLoseView")},n);function n(){return e.call(this)||this}t.UnionWarWinAndLoseViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("VipAlert")},n);function n(){return e.call(this)||this}t.VipAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("VIPAndSVIPUpView")},n);function n(){return e.call(this)||this}t.VIPAndSVIPUpViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("VipMeiRiRewordAlert")},n);function n(){return e.call(this)||this}t.VipMeiRiRewordAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("VipNewView")},n);function n(){return e.call(this)||this}t.VipNewViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("VipPowerItem")},n);function n(){return e.call(this)||this}t.VipPowerItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("VipShowItem")},n);function n(){return e.call(this)||this}t.VipShowItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("VipTimesAlert")},n);function n(){return e.call(this)||this}t.VipTimesAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("VipView")},n);function n(){return e.call(this)||this}t.VipViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("WarbandApplicantItem")},n);function n(){return e.call(this)||this}t.WarbandApplicantItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandApplicantsAlert")},n);function n(){return e.call(this)||this}t.WarbandApplicantsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandApplicantsLimitAlert")},n);function n(){return e.call(this)||this}t.WarbandApplicantsLimitAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandBuffAlert")},n);function n(){return e.call(this)||this}t.WarbandBuffAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandBuffItem")},n);function n(){return e.call(this)||this}t.WarbandBuffItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WarbandBuffReplaceAlert")},n);function n(){return e.call(this)||this}t.WarbandBuffReplaceAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandCreateAlert")},n);function n(){return e.call(this)||this}t.WarbandCreateAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandDonateAlert")},n);function n(){return e.call(this)||this}t.WarbandDonateAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("WarbandDonateItem")},n);function n(){return e.call(this)||this}t.WarbandDonateItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandItem")},n);function n(){return e.call(this)||this}t.WarbandItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandLevelAwardsAlert")},n);function n(){return e.call(this)||this}t.WarbandLevelAwardsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandLevelItem")},n);function n(){return e.call(this)||this}t.WarbandLevelItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandMemberItem")},n);function n(){return e.call(this)||this}t.WarbandMemberItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandPrivilegeAlert")},n);function n(){return e.call(this)||this}t.WarbandPrivilegeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandRankItem")},n);function n(){return e.call(this)||this}t.WarbandRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.warband.WarbandRankItem",modules.warband.WarbandRankItem),e.prototype.createChildren.call(this),this.loadUI("WarbandRanksAlert")},n);function n(){return e.call(this)||this}t.WarbandRanksAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.warband.WarbandItem",modules.warband.WarbandItem),e.prototype.createChildren.call(this),this.loadUI("WarbandsToApplyView")},n);function n(){return e.call(this)||this}t.WarbandsToApplyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarbandView")},n);function n(){return e.call(this)||this}t.WarbandViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("WarDisplay")},n);function n(){return e.call(this)||this}t.WarDisplayUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WarmerWintersayRankView")},n);function n(){return e.call(this)||this}t.WarmerWintersayRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WeekCardItem")},n);function n(){return e.call(this)||this}t.WeekCardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WeekCardView")},n);function n(){return e.call(this)||this}t.WeekCardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WeekConsume")},n);function n(){return e.call(this)||this}t.WeekConsumeUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WeekConsumeItem")},n);function n(){return e.call(this)||this}t.WeekConsumeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WeekLogin")},n);function n(){return e.call(this)||this}t.WeekLoginUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WeekLoginItem")},n);function n(){return e.call(this)||this}t.WeekLoginItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WelfaPlaceBossRBView")},n);function n(){return e.call(this)||this}t.WelfaPlaceBossRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WelfarePlaceBossRBView")},n);function n(){return e.call(this)||this}t.WelfarePlaceBossRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WelfarePlaceBossTimeView")},n);function n(){return e.call(this)||this}t.WelfarePlaceBossTimeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WelfarePlaceBossView")},n);function n(){return e.call(this)||this}t.WelfarePlaceBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WelfarePlaceEnterView")},n);function n(){return e.call(this)||this}t.WelfarePlaceEnterViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WelfarePlaceInspireAlert")},n);function n(){return e.call(this)||this}t.WelfarePlaceInspireAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WelfarePlacePawnRBView")},n);function n(){return e.call(this)||this}t.WelfarePlacePawnRBViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WelfarePlacePawnShouYiAlert")},n);function n(){return e.call(this)||this}t.WelfarePlacePawnShouYiAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WelfarePlacePawnView")},n);function n(){return e.call(this)||this}t.WelfarePlacePawnViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("WindCloudEnemyItem")},n);function n(){return e.call(this)||this}t.WindCloudEnemyItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("WindCloudRankAlert")},n);function n(){return e.call(this)||this}t.WindCloudRankAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WindCloudSceneView")},n);function n(){return e.call(this)||this}t.WindCloudSceneViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WindCloudTimeItem")},n);function n(){return e.call(this)||this}t.WindCloudTimeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BagItem",modules.bag.BagItem),e.prototype.createChildren.call(this),this.loadUI("WindCloudView")},n);function n(){return e.call(this)||this}t.WindCloudViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WindCloudView1")},n);function n(){return e.call(this)||this}t.WindCloudView1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WindCloudVserAlert")},n);function n(){return e.call(this)||this}t.WindCloudVserAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),View.regComponent("modules.vip.VipShowItem",modules.vip.VipShowItem),e.prototype.createChildren.call(this),this.loadUI("WindCloudVsItem")},n);function n(){return e.call(this)||this}t.WindCloudVsItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WindCloudWaitAlert")},n);function n(){return e.call(this)||this}t.WindCloudWaitAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("WinView")},n);function n(){return e.call(this)||this}t.WinViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("wxAddServiceAlert")},n);function n(){return e.call(this)||this}t.wxAddServiceAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("wxBtnCtrclView")},n);function n(){return e.call(this)||this}t.wxBtnCtrclViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("wxChangePkgAlert")},n);function n(){return e.call(this)||this}t.wxChangePkgAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("wxCollectAlert")},n);function n(){return e.call(this)||this}t.wxCollectAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.wx_module.wxBtnCtrlPanel",modules.wx_module.wxBtnCtrlPanel),e.prototype.createChildren.call(this),this.loadUI("wxHelpAlert")},n);function n(){return e.call(this)||this}t.wxHelpAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("wxHelpItem")},n);function n(){return e.call(this)||this}t.wxHelpItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("wxLostAlert")},n);function n(){return e.call(this)||this}t.wxLostAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.wx_module.wxBtnCtrlPanel",modules.wx_module.wxBtnCtrlPanel),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("wxShareAlert")},n);function n(){return e.call(this)||this}t.wxShareAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("wxShareAwardAlert")},n);function n(){return e.call(this)||this}t.wxShareAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("wxShareItem")},n);function n(){return e.call(this)||this}t.wxShareItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("wxShopItem")},n);function n(){return e.call(this)||this}t.wxShopItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("wxSidebarItem")},n);function n(){return e.call(this)||this}t.wxSidebarItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("wxSidebarView")},n);function n(){return e.call(this)||this}t.wxSidebarViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("XianDanIcon")},n);function n(){return e.call(this)||this}t.XianDanIconUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianDanItem")},n);function n(){return e.call(this)||this}t.XianDanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.xianDan.XianDanIcon",modules.xianDan.XianDanIcon),e.prototype.createChildren.call(this),this.loadUI("XianDanView")},n);function n(){return e.call(this)||this}t.XianDanViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuBottomItem")},n);function n(){return e.call(this)||this}t.XianfuBottomItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.xianfu.XianfuBottomItem",modules.xianfu.XianfuBottomItem),View.regComponent("ui.XianfuBottomItemUI",t.XianfuBottomItemUI),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuBottomView")},n);function n(){return e.call(this)||this}t.XianfuBottomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuDanluAttrAlert")},n);function n(){return e.call(this)||this}t.XianfuDanluAttrAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.xianfu.XianfuHandBookItem",modules.xianfu.XianfuHandBookItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuHandBookView")},n);function n(){return e.call(this)||this}t.XianfuHandBookViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuLeftBottomView")},n);function n(){return e.call(this)||this}t.XianfuLeftBottomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuPandectView")},n);function n(){return e.call(this)||this}t.XianfuPandectViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("XianfuPetBuyPropAlert")},n);function n(){return e.call(this)||this}t.XianfuPetBuyPropAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("XianfuPetReadyGoAlert")},n);function n(){return e.call(this)||this}t.XianfuPetReadyGoAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("XianfuPetTravelingAlert")},n);function n(){return e.call(this)||this}t.XianfuPetTravelingAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuResItem")},n);function n(){return e.call(this)||this}t.XianfuResItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuRightBottomView")},n);function n(){return e.call(this)||this}t.XianfuRightBottomViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.xianfu.XianfuSkillItem",modules.xianfu.XianfuSkillItem),e.prototype.createChildren.call(this),this.loadUI("XianfuShengjiView")},n);function n(){return e.call(this)||this}t.XianfuShengjiViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuSmeltAlert")},n);function n(){return e.call(this)||this}t.XianfuSmeltAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("XianfuSmeltDetailsAlert")},n);function n(){return e.call(this)||this}t.XianfuSmeltDetailsAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuSmeltEndAlert")},n);function n(){return e.call(this)||this}t.XianfuSmeltEndAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuSmeltingAlert")},n);function n(){return e.call(this)||this}t.XianfuSmeltingAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuTaskItem")},n);function n(){return e.call(this)||this}t.XianfuTaskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuTaskView")},n);function n(){return e.call(this)||this}t.XianfuTaskViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("XianfuTopView")},n);function n(){return e.call(this)||this}t.XianfuTopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XianfuWindWaterView")},n);function n(){return e.call(this)||this}t.XianfuWindWaterViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("XiLianAlertl")},n);function n(){return e.call(this)||this}t.XiLianAlertlUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XiLianAllAlertl")},n);function n(){return e.call(this)||this}t.XiLianAllAlertlUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XiLianMatItem")},n);function n(){return e.call(this)||this}t.XiLianMatItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.xiLian.XiLianMatItem",modules.xiLian.XiLianMatItem),e.prototype.createChildren.call(this),this.loadUI("XiLianView")},n);function n(){return e.call(this)||this}t.XiLianViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("XunBaoKuangHuanItem")},n);function n(){return e.call(this)||this}t.XunBaoKuangHuanItemUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("XunBaoKuangHuanView")},n);function n(){return e.call(this)||this}t.XunBaoKuangHuanViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("YearEndDianfengAwardItem")},n);function n(){return e.call(this)||this}t.YearEndDianfengAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YearEndDianfengAwardView")},n);function n(){return e.call(this)||this}t.YearEndDianfengAwardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YearEndRankAwardItem")},n);function n(){return e.call(this)||this}t.YearEndRankAwardItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YearEndRankAwardView")},n);function n(){return e.call(this)||this}t.YearEndRankAwardViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YearEndRankItem")},n);function n(){return e.call(this)||this}t.YearEndRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YearEndRankView")},n);function n(){return e.call(this)||this}t.YearEndRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.loadUI("YuanShenEquipView")},n);function n(){return e.call(this)||this}t.YuanShenEquipViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("modules.yuanShen.YuanShenFulingSlotItem",modules.yuanShen.YuanShenFulingSlotItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YuanShenFulingAlert")},n);function n(){return e.call(this)||this}t.YuanShenFulingAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("YuanShenFulingPropItem")},n);function n(){return e.call(this)||this}t.YuanShenFulingPropItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YuanShenFulingSlotItem")},n);function n(){return e.call(this)||this}t.YuanShenFulingSlotItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.yuanShen.YuanShenFulingSlotItem",modules.yuanShen.YuanShenFulingSlotItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YuanShenFulingView")},n);function n(){return e.call(this)||this}t.YuanShenFulingViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YuanShenRefineView")},n);function n(){return e.call(this)||this}t.YuanShenRefineViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.yuanShen.YuanShenSkillItem",modules.yuanShen.YuanShenSkillItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("YuanShenSkillAlert")},n);function n(){return e.call(this)||this}t.YuanShenSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YuanShenSkillItem")},n);function n(){return e.call(this)||this}t.YuanShenSkillItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.yuanShen.YuanShenSkillItem",modules.yuanShen.YuanShenSkillItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YuanShenSkillView")},n);function n(){return e.call(this)||this}t.YuanShenSkillViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YuanShenView")},n);function n(){return e.call(this)||this}t.YuanShenViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("YuanShenWeaponSkillAlert")},n);function n(){return e.call(this)||this}t.YuanShenWeaponSkillAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YuanShenWeaponView")},n);function n(){return e.call(this)||this}t.YuanShenWeaponViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("YunMengMiJingAwardAlert")},n);function n(){return e.call(this)||this}t.YunMengMiJingAwardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YunMengMiJingBossItem")},n);function n(){return e.call(this)||this}t.YunMengMiJingBossItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YunMengMiJingBossView")},n);function n(){return e.call(this)||this}t.YunMengMiJingBossViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YunMengMiJingInformationView")},n);function n(){return e.call(this)||this}t.YunMengMiJingInformationViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YunMengMiJingResultAlert")},n);function n(){return e.call(this)||this}t.YunMengMiJingResultAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YunMengMiJingRewordAlert")},n);function n(){return e.call(this)||this}t.YunMengMiJingRewordAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("YunMengMiJingView")},n);function n(){return e.call(this)||this}t.YunMengMiJingViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("YybPrivilegeAlert")},n);function n(){return e.call(this)||this}t.YybPrivilegeAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZaDanChangeItem")},n);function n(){return e.call(this)||this}t.ZaDanChangeItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZaDanChangeView")},n);function n(){return e.call(this)||this}t.ZaDanChangeViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZaDanPreview")},n);function n(){return e.call(this)||this}t.ZaDanPreviewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("ZaDanRankItem")},n);function n(){return e.call(this)||this}t.ZaDanRankItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.rehead.HeadIcon",modules.rehead.HeadIcon),e.prototype.createChildren.call(this),this.loadUI("ZaDanRankView")},n);function n(){return e.call(this)||this}t.ZaDanRankViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZaDanReward")},n);function n(){return e.call(this)||this}t.ZaDanRewardUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),e.prototype.createChildren.call(this),this.loadUI("ZaDanShopAlert")},n);function n(){return e.call(this)||this}t.ZaDanShopAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZaDanShopItem")},n);function n(){return e.call(this)||this}t.ZaDanShopItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZaDanShopView")},n);function n(){return e.call(this)||this}t.ZaDanShopViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZaDanStore")},n);function n(){return e.call(this)||this}t.ZaDanStoreUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ZaDanTaskItem")},n);function n(){return e.call(this)||this}t.ZaDanTaskItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ZaDanTaskView")},n);function n(){return e.call(this)||this}t.ZaDanTaskViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.commonAlert.CommonRewardShowItem",modules.commonAlert.CommonRewardShowItem),e.prototype.createChildren.call(this),this.loadUI("ZaDanView")},n);function n(){return e.call(this)||this}t.ZaDanViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZerobuyView")},n);function n(){return e.call(this)||this}t.ZerobuyViewUI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.zhiZhenGoodMan.ZhiZhenGoodManItem",modules.zhiZhenGoodMan.ZhiZhenGoodManItem),View.regComponent("modules.zhiZhenGoodMan.ZhiZhenGoodManItem1",modules.zhiZhenGoodMan.ZhiZhenGoodManItem1),e.prototype.createChildren.call(this),this.loadUI("ZhiZhenGoodManView")},n);function n(){return e.call(this)||this}t.ZhiZhenGoodManViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("modules.zhiZhenStar.ZhiZhenStarItem2",modules.zhiZhenStar.ZhiZhenStarItem2),View.regComponent("modules.single_dog_sart.SingleDogSartItem3",modules.single_dog_sart.SingleDogSartItem3),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ZhiZhenSartItem1")},n);function n(){return e.call(this)||this}t.ZhiZhenSartItem1UI=i}(ui=ui||{}),function(t){var e,i=(e=View,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.commonAlert.CommonObservationItem",modules.commonAlert.CommonObservationItem),View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),View.regComponent("modules.zhiZhenStar.ZhiZhenStarItem1",modules.zhiZhenStar.ZhiZhenStarItem1),e.prototype.createChildren.call(this),this.loadUI("ZhiZhenSartView")},n);function n(){return e.call(this)||this}t.ZhiZhenSartViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ZhizunView")},n);function n(){return e.call(this)||this}t.ZhizunViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZXianYuAlert")},n);function n(){return e.call(this)||this}t.ZXianYuAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseDialog,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZXianYuAllRewardAlert")},n);function n(){return e.call(this)||this}t.ZXianYuAllRewardAlertUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZXianYuBagView")},n);function n(){return e.call(this)||this}t.ZXianYuBagViewUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZXianYuItem")},n);function n(){return e.call(this)||this}t.ZXianYuItemUI=i}(ui=ui||{}),function(t){var e,i=(e=ItemRender,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ZXianYuStoreItem")},n);function n(){return e.call(this)||this}t.ZXianYuStoreItemUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZXianYuStoreView")},n);function n(){return e.call(this)||this}t.ZXianYuStoreViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("modules.bag.BaseItem",modules.bag.BaseItem),View.regComponent("Text",laya.display.Text),e.prototype.createChildren.call(this),this.loadUI("ZXianYuTreasureView")},n);function n(){return e.call(this)||this}t.ZXianYuTreasureViewUI=i}(ui=ui||{}),function(t){var e,i=(e=BaseView,__extends(n,e),n.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),e.prototype.createChildren.call(this),this.loadUI("ZXianYuView")},n);function n(){return e.call(this)||this}t.ZXianYuViewUI=i}(ui=ui||{}),function(t){var e,n,i,s,o,a;function r(){var i=n.call(this)||this;return i.popupEffect=function(t){i.doOpen(t)},i.closeEffect=function(t,e){i.doClose(t,e)},i.popupEffectHandler=o.create(i,i.popupEffect,null,!1),i.closeEffectHandler=o.create(i,i.closeEffect,null,!1),i}e=t.core||(t.core={}),i=Laya.Box,s=Laya.DialogManager,o=Laya.Handler,n=s,__extends(r,n),r.prototype._closeOnSide=function(){var t=this.getChildAt(this.numChildren-1);t instanceof e.BaseDialogEx&&!t.closeOnSide||t instanceof e.BaseDialog&&!t.closeOnSide||t instanceof Laya.Dialog&&t.close("side",!1)},r.prototype.setLockView=function(t){this.lockLayer||(this.lockLayer=new i,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight)),this.lockLayer.removeChildren(),t&&(t.centerX=t.centerY=0,this.lockLayer.addChild(t))},r.prototype._onResize=function(t){void 0===t&&(t=null);var e=this.maskLayer.width=CommonConfig.viewWidth,i=this.maskLayer.height=CommonConfig.viewHeight;this.lockLayer&&this.lockLayer.size(e,i),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,e,i,UIConfig.popupBgColor),this.maskLayer.alpha=UIConfig.popupBgAlpha;for(var n=this.numChildren-1;-1<n;n--){var s=this.getChildAt(n);s.popupCenter&&this._centerDialog(s)}},r.prototype._centerDialog=function(t){t.x=Math.round((CommonConfig.viewWidth-t.width>>1)+t.pivotX),t.y=Math.round((CommonConfig.viewHeight-t.height>>1)+t.pivotY)},a=r,e.CustomDialogManager=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){this._bottomLayer=new i,this._cityLayer=new i,this._mainUILayer=new i,this._midUILayer=new i,this._uiLayer=new i,this._upUILayer=new i,this._noticeLayer=new i,this._dialogLayer=new i,this._effectLayer=new i,this._loadingLayer=new i}e=t.layer||(t.layer={}),i=Laya.Component,n=t.core.CustomDialogManager,s=t.guide.GuideModel,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.init=function(){this._layerDic={},Laya.stage.addChild(this._bottomLayer),this._bottomLayer.mouseEnabled=this._bottomLayer.mouseThrough=!0,this._layerDic[1]=this._bottomLayer,Laya.stage.addChild(this._cityLayer),this._cityLayer.mouseEnabled=this._cityLayer.mouseThrough=!0,this._layerDic[2]=this._cityLayer,Laya.stage.addChild(this._mainUILayer),this._mainUILayer.mouseEnabled=this._mainUILayer.mouseThrough=!0,this._layerDic[3]=this._mainUILayer,Laya.stage.addChild(this._midUILayer),this._midUILayer.mouseEnabled=this._midUILayer.mouseThrough=!0,this._layerDic[8]=this._midUILayer,Laya.stage.addChild(this._uiLayer),this._uiLayer.mouseEnabled=this._uiLayer.mouseThrough=!0,this._layerDic[4]=this._uiLayer,Laya.stage.addChild(this._upUILayer),this._upUILayer.mouseEnabled=this._upUILayer.mouseThrough=!0,this._layerDic[9]=this._upUILayer,Laya.stage.addChild(this._dialogLayer),Laya.Dialog.manager=new n,this._dialogLayer.addChild(Laya.Dialog.manager),this._layerDic[6]=this._dialogLayer,Laya.stage.addChild(this._noticeLayer),this._noticeLayer.mouseEnabled=this._noticeLayer.mouseThrough=!0,this._layerDic[5]=this._noticeLayer,Laya.stage.addChild(this._effectLayer),this._effectLayer.mouseEnabled=!1,this._effectLayer.mouseThrough=!0,this._layerDic[7]=this._effectLayer,Laya.stage.addChild(this._loadingLayer),this._loadingLayer.mouseEnabled=this._loadingLayer.mouseThrough=!0,this._layerDic[10]=this._loadingLayer,GlobalData.dispatcher.on("RESIZE_UI",this,this.resize),this.resize()},a.prototype.checkGuide=function(){var t=s.instance.curGuide;this._dialogLayer.visible=!(t&&1===t[5])},a.prototype.resize=function(){this._bottomLayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._bottomLayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._cityLayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._cityLayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._mainUILayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._mainUILayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._midUILayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._midUILayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._uiLayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._uiLayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._upUILayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._upUILayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._noticeLayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._noticeLayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._dialogLayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._effectLayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._effectLayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0),this._loadingLayer.size(CommonConfig.viewWidth,CommonConfig.viewHeight),this._loadingLayer.scale(CommonConfig.viewScale,CommonConfig.viewScale,!0)},a.prototype.getLayerById=function(t){return this._layerDic[t]},a.prototype.addToBottomLayer=function(t){this._bottomLayer.addChild(t)},a.prototype.addToCityLayer=function(t){this._cityLayer.addChild(t)},a.prototype.addToMainUILayer=function(t){this._mainUILayer.addChild(t)},a.prototype.addToMidUILayer=function(t){this._midUILayer.addChild(t)},a.prototype.addToUILayer=function(t){this._uiLayer.addChild(t)},a.prototype.addToUpUILayer=function(t){this._upUILayer.addChild(t)},a.prototype.addToNoticeLayer=function(t){this._noticeLayer.addChild(t)},a.prototype.addToEffectLayer=function(t){this._effectLayer.addChild(t)},a.prototype.addToLoadingLayer=function(t){this._loadingLayer.addChild(t)},a.prototype.lockAllLayer=function(t){},o=a,e.LayerManager=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("skill")},n.prototype.getCfgById=function(t){return GlobalData.searchByIndex1(this._table,t)},i=n,e.SkillCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._cfgs=GlobalData.getConfig("amulet_rise"),this.maxLv=this._cfgs[this._cfgs.length-1][2]}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgBylevel=function(t){return this._cfgs[t]},i=n,e.AmuletRiseCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._preTable={},this._preTable[3]=[3,"请求超时"],this._preTable[9]=[9,"账号在别处登录"],this._preTable[10]=[10,"服务器关闭"],this._preTable[11]=[11,"不能广播"],this._preTable[12]=[12,"未知错误"],this._preTable[13]=[13,"状态错误"],this._preTable[14]=[14,"账号含有非法字符"],this._preTable[15]=[15,"角色名含有非法字符"],this._preTable[10001]=[10001,"无效参数"],this._preTable[10002]=[10002,"认证失败"],this._preTable[10003]=[10003,"角色不在线"],this._preTable[10004]=[10004,"找不到对应的服务器"],this._preTable[10005]=[10005,"无效会话"],this._preTable[10006]=[10006,"通知下线"],this._preTable[10007]=[10007,"账号已封"],this._preTable[10008]=[10008,"角色已封"],this._preTable[10009]=[10009,"IP已封"],this._preTable[10010]=[10010,"强制下线"],this._preTable[10011]=[10011,"验证超时"],this._preTable[10013]=[10013,"创号失败"],this._preTable[10014]=[10014,"创角失败"],this._preTable[11001]=[11001,"未创建角色"],this._preTable[11002]=[11002,"角色名已存在"],this._preTable[11003]=[11003,"创建角色失败"],this._preTable[11004]=[11004,"角色名长度限制"],this._preTable[11005]=[11005,"角色ID已存在"],this._preTable[11006]=[11006,"无效职业"],this._preTable[11007]=[11007,"数据库异常"],this._preTable[11008]=[11008,"不能重复登录"],this._preTable[11009]=[11009,"不能重复进入场景"],this._table=GlobalData.getConfig("erorr_code")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getErrorCfgById=function(t){return this._table||(this._table=GlobalData.getConfig("erorr_code"),this._table)?this._table[t.toString()]:this._preTable[t]},i=n,e.ErrorCodeCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("item_equip")},n.prototype.getItemCfgById=function(t){return GlobalData.searchByIndex1(this._table,t)},i=n,e.ItemEquipCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("item_material"),this.speedItemIds=e.BlendCfg.instance.getCfgById(36044)[1],this.ringItemIds=e.BlendCfg.instance.getCfgById(75010)[1],this.runeEssenceId=91740001,this.closeIds=[50,233,234,85,91,92,93,94,95,111,143,47]},n.prototype.getItemCfgById=function(t){var e=GlobalData.searchByIndex1(this._table,t);if(!PlatParams.isCloseRecharge)return e;if(!e)return null;for(var i=e[10],n=[],s=0,o=i.length;s<o;s++)this.closeIds.indexOf(i[s])<0&&n.push(i[s]);return e[10]=n,e},i=n,e.ItemMaterialCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("item_stone")},n.prototype.getItemCfgById=function(t){return this._table[t]},i=n,e.ItemStoneCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("item_attr_pool")},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.ItemAttrPoolCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tab2={};for(var t=GlobalData.getConfig("blend"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];var n=GlobalData.getConfig("blend2");for(e=0,i=n.length;e<i;e++)this._tab2[n[e][0]]=n[e];for(this.chatMarkedWords=this._tab[26004][2],e=0,i=this.chatMarkedWords.length;e<i;e++)this.chatMarkedWords[e]=this.chatMarkedWords[e].substr(1,this.chatMarkedWords[e].length-2)},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgById2=function(t){return this._tab2[t]},i=n,e.BlendCfg=i}(modules=modules||{}),function(a){var t,e;function i(){this.init()}t=a.config||(a.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._table={},this._unlockTab={},this.unlockLayerArr=[],this.resolveRuneSubTypeId=1;for(var t=GlobalData.getConfig("item_rune"),e=0,i=t.length;e<i;e++){var n=t[e][0],s=(1e-6*n>>0)%10;this._table[n]=t[e],-1!==t[e][5]?(null==this._unlockTab[t[e][5]]&&(this._unlockTab[t[e][5]]=new Array),9!=s&&this._unlockTab[t[e][5]].push(t[e])):this.resolveRuneSubTypeId=t[e][0],9==s&&(null==this._unlockTab[-1]&&(this._unlockTab[-1]=new Array),this._unlockTab[-1].push(t[e]))}for(var o in this._unlockTab)this.unlockLayerArr.push(parseInt(o));this.unlockLayerArr.sort(a.common.CommonUtil.smallToBigSort.bind(this)),this.resolveRuneSubTypeId=a.common.CommonUtil.getStoneTypeById(this.resolveRuneSubTypeId)},i.prototype.getCfgById=function(t){return this._table[t]},i.prototype.getCfgByUnlock=function(t){return this._unlockTab[t]},e=i,t.ItemRuneCfg=e}(modules=modules||{}),function(t){var e,i;function n(){this.yang=79860001,this.yin=79960001,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("rune_refine")},n.prototype.getCfgById=function(t){return GlobalData.searchByIndex1(this._table,t)},i=n,e.RuneRefineCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._mallTab={},this._table={};for(var t=GlobalData.getConfig("mall"),e=0;e<t.length;e++){var i=t[e],n=i[3];null!=this._mallTab[n]?this._mallTab[n].push(i):this._mallTab[n]=[i],this._table[i[0]]=i}},n.prototype.getTypeStoreCfgByChildType=function(t,e){var i={},n=this._mallTab[t];if(null==n)return new Array(0);for(var s=0;s<n.length;s++){var o=n[s],a=o[5];null!=i[a]?i[a].push(o):i[a]=[o]}return i[e]?i[e]:new Array(0)},n.prototype.getCfgByitemId=function(t){return this._table[t]},i=n,e.StoreCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabId={},this._tabIsHaveAtt={},this.ids=new Array;var t=GlobalData.getConfig("headicon");if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e],s=n[0],o=n[3],a=n[4],r=n[5];this._tabIsHaveAtt[s]||(this._tabIsHaveAtt[s]=[!1,!1]),0<a.length&&!this._tabIsHaveAtt[s][0]&&(this._tabIsHaveAtt[s][0]=!0),0<r.length&&!this._tabIsHaveAtt[s][1]&&(this._tabIsHaveAtt[s][1]=!0),this._tab[s]||(this._tab[s]={}),-1===this.ids.indexOf(s)&&this.ids.push(s),this._tab[s][o]=n,this._tabId[s]=o}},n.prototype.getCfgById=function(t,e){return void 0===e&&(e=1),this._tab[t]?this._tab[t][e]:null},n.prototype.getMaxLvById=function(t){return this._tabId[t]},n.prototype.getIsHaveAtt=function(t){return this._tabIsHaveAtt[t]},i=n,e.HeadiconCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabId={},this._tabIsHaveAtt={},this.ids=new Array;var t=GlobalData.getConfig("head_photoframe");if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e],s=n[0],o=n[3],a=n[4],r=n[5];this._tabIsHaveAtt[s]||(this._tabIsHaveAtt[s]=[!1,!1]),0<a.length&&!this._tabIsHaveAtt[s][0]&&(this._tabIsHaveAtt[s][0]=!0),0<r.length&&!this._tabIsHaveAtt[s][1]&&(this._tabIsHaveAtt[s][1]=!0),this._tab[s]||(this._tab[s]={}),-1===this.ids.indexOf(s)&&this.ids.push(s),this._tab[s][o]=n,this._tabId[s]=o}},n.prototype.getCfgById=function(t,e){return void 0===e&&(e=1),this._tab[t]?this._tab[t][e]:null},n.prototype.getMaxLvById=function(t){return this._tabId[t]},n.prototype.getIsHaveAtt=function(t){return this._tabIsHaveAtt[t]},i=n,e.HeadPhotoframeCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabId={},this._tabIsHaveAtt={},this.ids=new Array;var t=GlobalData.getConfig("chat_photoframe");if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e],s=n[0],o=n[4],a=n[5],r=n[6];this._tabIsHaveAtt[s]||(this._tabIsHaveAtt[s]=[!1,!1]),0<a.length&&!this._tabIsHaveAtt[s][0]&&(this._tabIsHaveAtt[s][0]=!0),0<r.length&&!this._tabIsHaveAtt[s][1]&&(this._tabIsHaveAtt[s][1]=!0),this._tab[s]||(this._tab[s]={}),-1===this.ids.indexOf(s)&&this.ids.push(s),this._tab[s][o]=n,this._tabId[s]=o}},n.prototype.getCfgById=function(t,e){return void 0===e&&(e=1),this._tab[t]?this._tab[t][e]:null},n.prototype.getMaxLvById=function(t){return this._tabId[t]},n.prototype.getIsHaveAtt=function(t){return this._tabIsHaveAtt[t]},i=n,e.ChatPhotoframeCfg=i}(modules=modules||{}),function(a){var t,c,p,u,r,i,e;function d(){this._tab={},this._curUse={}}t=a.rehead||(a.rehead={}),c=a.config.HeadiconCfg,p=a.config.HeadPhotoframeCfg,u=a.config.ChatPhotoframeCfg,r=a.redPoint.RedPointCtrl,i=laya.net.LocalStorage,Object.defineProperty(d,"instance",{get:function(){return this._instance=this._instance||new d},enumerable:!0,configurable:!0}),d.prototype.updateHeadIcon=function(t){this.icons=t[0],this._curUse[1]=t[1],this._curUse[2]=t[2],this._curUse[3]=t[3],this.setRP(),GlobalData.dispatcher.event("REHEAD_UPDATE")},Object.defineProperty(d.prototype,"icons",{set:function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e],s=n[0];this._tab[s]||(this._tab[s]={});var o=n[1];this._tab[s][o]=n}},enumerable:!0,configurable:!0}),d.prototype.getStateByTypeId=function(t,e){var i=this._tab[t]?this._tab[t][e]:null;return i?i[2]:0},d.prototype.getLvByTypeId=function(t,e){var i=this._tab[t]?this._tab[t][e]:null;return i?i[3]:0},Object.defineProperty(d.prototype,"head",{get:function(){return this._curUse[1]},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"headFrame",{get:function(){return this._curUse[2]},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"chatFrame",{get:function(){return this._curUse[3]},enumerable:!0,configurable:!0}),d.prototype.chatFrameSkin=function(t){var e;if(e=u.instance.getCfgById(t)){var i=e[7][0];return i?CommonUtil.getIconById(i):""}},d.prototype.getWin=function(){var t=this.getRp1(1,c.instance.ids);return t?1:this.getRp1(2,p.instance.ids)?2:this.getRp1(3,u.instance.ids)?3:t?null:void 0},d.prototype.setRP=function(){var t=this.getRp1(1,c.instance.ids),e=this.getRp1(2,p.instance.ids),i=this.getRp1(3,u.instance.ids),n=a.funcOpen.FuncOpenModel.instance.getFuncIsOpen(260),s=a.funcOpen.FuncOpenModel.instance.getFuncIsOpen(353),o=a.funcOpen.FuncOpenModel.instance.getFuncIsOpen(261);r.instance.setRPProperty("reHeadRP",t&&n),r.instance.setRPProperty("reHead1RP",e&&s),r.instance.setRPProperty("reChatFrameRP",i&&o)},d.prototype.getRp1=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(this.getRp(t,n))return!0}return!1},d.prototype.getRp=function(t,e){var i,n=[],s=0,o=d.instance.getLvByTypeId(t,e),a=0===d.instance.getStateByTypeId(t,e)?1:o+1;if(1===t){if(!(i=c.instance.getCfgById(e,a)))return!1;s=c.instance.getMaxLvById(e),n=i[6]}else if(2===t){if(!(i=p.instance.getCfgById(e,a)))return!1;s=p.instance.getMaxLvById(e),n=i[6]}else if(3===t){if(!(i=u.instance.getCfgById(e,a)))return!1;s=u.instance.getMaxLvById(e),n=i[7]}var r=n[0],l=n[1];if(o<s&&r&&l){var h=CommonUtil.getPropCountById(r);return l<=(h=h||0)}return!1},d.prototype.getSetTipsData=function(){return this.setTipsData=i.getJSON("TipsData"),this.setTipsData||(this.setTipsData=[1,1,1],i.setJSON("TipsData",this.setTipsData)),(!this.setTipsData||this.setTipsData.length<3)&&(this.setTipsData=[1,1,1]),this.setTipsData},d.prototype.keepSetTipsData=function(t,e){this.setTipsData[t]=e,console.log("浏览器存数据",this.setTipsData),i.setJSON("TipsData",this.setTipsData)},d.prototype.showExitBtn=function(){return"9130hg"===PlatParams.platform||"9130sq"===PlatParams.platform||"jiay"===PlatParams.platform&&510957==PlatParams.package||"350"===PlatParams.platform||511296===PlatParams.package||511513===PlatParams.package},e=d,t.ReheadModel=e}(modules=modules||{}),function(t){var e,i;function n(){this._tab=GlobalData.getConfig("item_fuling")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.ItemFulingCfg=i}(modules=modules||{}),function(t){var e,i;function n(){var t,e;this._occultArr1=[],this._occultArr2=[],this._occultArr3=[],this.knowledgeArr=[],this._cfgs=GlobalData.getConfig("skill_pure"),this._cfgs.sort(this.sortFunc.bind(this));for(var i=0,n=this._cfgs.length;i<n;i++)1===(e=(t=this._cfgs[i])[8])?this._occultArr1.push(t):2===e?this._occultArr2.push(t):3===e?this._occultArr3.push(t):4===e&&this.knowledgeArr.push(t)}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.sortFunc=function(t,e){return t[0]-e[0]},n.prototype.getCfgById=function(e){var t=ArrayUtils.binarySearch(this._cfgs,function(t){return e-t[0]});return t<0?null:this._cfgs[t]},n.prototype.getOccultArrByType=function(t){return 1===t?this._occultArr1:2===t?this._occultArr2:this._occultArr3},i=n,e.SkillPureCfg=i}(modules=modules||{}),function(c){var d,n,s,i,p,u,m,o,a,f,r,l,h,g,e,y,_,v,t;function I(){}d=c.common||(c.common={}),n=c.config.ErrorCodeCfg,s=c.notice.SystemNoticeManager,i=Laya.Handler,p=c.config.ItemEquipCfg,u=c.config.ItemMaterialCfg,m=c.config.ItemStoneCfg,o=c.config.BlendCfg,a=c.config.RuneRefineCfg,f=c.config.ItemRuneCfg,r=c.config.StoreCfg,l=Laya.Image,h=c.rehead.ReheadModel,g=c.config.HeadiconCfg,e=c.config.HeadPhotoframeCfg,y=c.config.ChatPhotoframeCfg,_=c.config.ItemFulingCfg,v=c.config.SkillPureCfg,I.getItemCfgById=function(t){var e=I.getItemTypeById(t);return 5===e?p.instance.getItemCfgById(t):8===e?p.instance.getItemCfgById(t)||_.instance.getCfgById(t)||c.config.ItemFantianCfg.instance.getItemByCfg(t):4===e?m.instance.getItemCfgById(t):7===e?a.instance.getCfgById(t):u.instance.getItemCfgById(t)},I.getMallByItemId=function(t){var e=I.getItemCfgById(t),i=4===I.getItemTypeById(t);return r.instance.getCfgByitemId(e[i?7:12])},I.getItemTypeById=function(t){return t/1e7>>0},I.getItemSubTypeById=function(t){return(t/1e5>>0)%100},I.getItemQualityById=function(t){return c.yuanShen.YuanShenUtil.isFulingItem(t)?c.yuanShen.YuanShenUtil.getFulingQualityById(t):c.brahma_equip.BrahmaEquipUtlis.isBrahmaEquip(t)?c.brahma_equip.BrahmaEquipUtlis.getQualityById(t):(1e-4*t>>0)%10},I.getStageById=function(t){return(1e-5*t>>0)%100},I.getStarById=function(t){return(.001*t>>0)%10-1},I.getStoneTypeById=function(t){return(1e-5*t>>0)%100},I.getDimIdByItemId=function(t){return 1e4*(1e-4*t>>0)},I.getRuneLvByItemId=function(t){return t%1e4},I.getFuWenNameAndLv=function(t){var e=1e4*(1e-4*t>>0),i=t%1e4,n=c.config.ItemRuneCfg.instance.getCfgById(e),s="";return n&&(s=n[1]),[s,i]},I.getBagIdById=function(t){var e=I.getItemTypeById(t),i=0;if(5===e)i=1;else if(8===e){var n=t/1e5>>0;i=801==n?8:c.divinatory_card.DivinatoryUtil.isDivinatoryEquip(n)?12:817<=n&&n<=822?13:n<807?9:823<=n&&n<=829?14:830==n?15:10}else i=4===e?2:6===e?3:7===e?5:0;return i},I.getColorByQuality=function(t){var e="";return 0<t&&t<=this._qualityColors.length&&(e=this._qualityColors[t]),e},I.getYuanshenName=function(t){switch(t){case 1:return"庚金";case 2:return"乙木";case 3:return"癸水";case 4:return"离火";case 5:return"厚土"}},I.getYuanshenLevelNameById=function(t){return Math.floor(t%1e6/1e3)+"阶"+(t-1e3*Math.floor(t/1e3))+"重"},I.getYuanshenColorByQuality=function(t){var e="";return t>=this._qualityColors.length&&(t=this._qualityColors.length-1),0<t&&(e=this._qualityColors[t]),e},I.getColorNameByQuality=function(t){var e="";return 0<t&&t<=this._qualityColors.length&&(e=this._qualityNames[t]),e},I.getBgImgByQuality=function(t){var e="";return 0<t&&t<=this._qualityBgImgUrl.length&&(e=this._qualityBgImgUrl[t-1]),e},I.getColorById=function(t){var e=I.getItemQualityById(t);return I.getColorByQuality(e)},I.getBgImgById=function(t){var e;return e=c.yuanShen.YuanShenUtil.isFulingItem(t)?c.yuanShen.YuanShenUtil.getFulingQualityById(t):c.brahma_equip.BrahmaEquipUtlis.isBrahmaEquip(t)?c.brahma_equip.BrahmaEquipUtlis.getQualityById(t):I.getItemQualityById(t),I.getBgImgByQuality(e)},I.getPartById=function(t){return(.1*t>>0)%100},I.getNameByPart=function(t){return this._equipNamePart[t-1]},I.getNameByPartBeastEquip=function(t){return this._beastNamePart[t-1]},I.getYuanShenNameByPart=function(t){return this._ysNamePart[t-1]},I.getSkillPureIdById=function(t){return t/1e4>>0},I.getSkillIdByPureIdAndLv=function(t,e){return void 0===e&&(e=0),1e4*t+e},I.alert=function(t,e,i,n,s,o,a,r,l,h,c,p){if(void 0===i&&(i=[]),void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=!0),void 0===a&&(a=null),void 0===r&&(r=0),void 0===l&&(l="本次登录不再提示"),void 0===h&&(h="left"),void 0===c&&(c=-1),void 0===p&&(p="middle"),d.GlobalData.noMoreNoticeArr[r])i[0]&&i[0].run();else{var u=[t,e,i,n,s,o,a,r,l,h,c,p];Laya.View.uiMap?WindowManager.instance.openDialog(12,u):alert(e)}},I.alertHelp=function(t){var e=o.instance.getCfgById(t);I.alert(e[3],e[2][0],null)},I.noticeError=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1),0!==t?n.instance.getErrorCfgById(t)?s.instance.addNotice(n.instance.getErrorCfgById(t)[1],!0):s.instance.addNotice(t.toString(),!0):e&&s.instance.addNotice(e,i)},I.checkEquip=function(t){var e=!1;if(t){var i=t[0],n=I.getItemCfgById(i),s=PlayerModel.instance.eraLevel,o=PlayerModel.instance.level;if(n[3]<=s&&o>=n[4]){var a=I.getPartById(i),r=void 0,l=I.getItemTypeById(i),h=i/1e5>>0;5===l?r=PlayerModel.instance.getEquipByPart(a):8==l&&(c.divinatory_card.DivinatoryUtil.isDivinatoryEquip(h)?r=c.divinatory_card.DivinatoryCardModel.instance.getEquipById(i):817<=h&&h<=822?r=c.showEquip.ShowEquipModel.instance.getEquipById(i):830==h?e=c.brahma_equip.BrahmaEquipModel.instance.isUpMyEquip(i):801!=h&&(r=c.yuanShen.YuanShenModel.instance.getEquipByTypePart(c.yuanShen.YuanShenUtil.getTypeById(i),a))),830==h||(!r||t[3][6]>r[3][6])&&(e=!0)}}return e},I.getNotGeneratedScore=function(t){var e=I.getItemCfgById(t);return e&&e[14]?e[14][0]:0},I.timeStampToMMSS=function(t){return this.msToMMSS(t-d.GlobalData.serverTime)},I.timeStampToSS=function(t){var e,i=t-d.GlobalData.serverTime;if(i<=0)e="0";else{var n=.001*i>>0;e=""+(n%=60)}return e},I.timeStampToS=function(t){var e,i=t-d.GlobalData.serverTime;if(i<=0)e="0";else{var n=.001*i>>0;e=""+Math.floor(n)}return e},I.timeStampToHHMMSS=function(t){return this.msToHHMMSS(t-d.GlobalData.serverTime)},I.timeStampToDayHourMin=function(t){var e=t-d.GlobalData.serverTime;return e<=0?"活动已结束":(e/864e5>>0)+"天"+(e/36e5>>0)%24+"时"+(e/6e4>>0)%60+"分"},I.timeStampToDayHour=function(t){var e=t-d.GlobalData.serverTime;return e<=0?"活动已结束":(e/864e5>>0)+"天"+(e/36e5>>0)%24+"时"},I.timeStampDDHHMMToHHMMSS=function(t){return 864e5<t-d.GlobalData.serverTime?this.timeStampToDayHourMin(t):this.timeStampToHHMMSS(t)},I.timeStampDDHHToHHMMSS=function(t){return 864e5<t-d.GlobalData.serverTime?this.timeStampToDayHour(t):this.timeStampToHHMMSS(t)},I.timeStampToHMMSSMS=function(t){var e="",i=t-d.GlobalData.serverTime;if(i<=0)e="00:00:00";else{var n=.001*i>>0,s=(n/60>>0)%60,o=i%1e3*.1>>0;0==(n%=60)&&(o=0),e=(s<10?"0":"")+s+":"+(n<10?"0":"")+n+":"+(o<10?"0":"")+o}return e},I.timeStampToSSMS=function(t){return this.msToSSMS(t-d.GlobalData.serverTime)},I.msToSSMS=function(t){var e;if(t<=0)e="00:00";else{var i=.001*t>>0,n=t%1e3*.1>>0;e=((i%=60)<10?"0":"")+i+":"+(n<10?"0":"")+n}return e},I.msToMMSS=function(t){var e="";if(t<=0)e="00:00";else{var i=.001*t>>0,n=i/60>>0;e=(n<10?"0":"")+n+":"+((i%=60)<10?"0":"")+i}return e},I.msToSS=function(t,e){void 0===e&&(e=!0),t<=0&&(t=0);var i=.001*t>>0;return(i<10&&e?"0":"")+i},I.msToHHMMSS=function(t){var e="";if(t<=0)e="00:00:00";else{var i=.001*t>>0,n=(i/60>>0)%60,s=i/3600>>0;e=(s<10?"0":"")+s+":"+(n<10?"0":"")+n+":"+((i%=60)<10?"0":"")+i}return e},I.msToHHMM=function(t){var e="";if(t<=0)e="00:00";else{var i=.001*t>>0,n=(i/60>>0)%60,s=i/3600>>0;i%=60,e=(s<10?"0":"")+s+":"+(n<10?"0":"")+n}return e},I.getIconById=function(t,e){void 0===e&&(e=!1);var i=this.getItemTypeById(t),n=e&&9===i?"_s":"",s="";if(5===i)s="assets/icon/item/"+p.instance.getItemCfgById(t)[7]+n+".png";else if(8===i){var o=t/1e5>>0;s=c.divinatory_card.DivinatoryUtil.isDivinatoryEquip(o)?"assets/icon/item/"+p.instance.getItemCfgById(t)[7]+n+".png":823<=o&&o<=829?"assets/icon/item/"+p.instance.getItemCfgById(t)[7]+n+".png":817<=o&&o<=822?"assets/icon/item/"+p.instance.getItemCfgById(t)[7]+n+".png":830==o?"assets/icon/item/"+c.config.ItemFantianCfg.instance.getItemByCfg(t)[7]+n+".png":807<=o?"assets/icon/item/"+_.instance.getCfgById(t)[4]+n+".png":"assets/icon/item/"+p.instance.getItemCfgById(t)[7]+n+".png"}else if(4===i)s="assets/icon/item/"+m.instance.getItemCfgById(t)[5]+n+".png";else if(7===i){var a=1e4*(1e-4*t>>0);s="assets/icon/item/"+f.instance.getCfgById(a)[4]+n+".png"}else{var r=I.getItemSubTypeById(t),l=u.instance.getItemCfgById(t),h=parseInt(l[7]);s=2===i&&16===r?"assets/icon/item/"+(h+=PlayerModel.instance.occ)+n+".jpg":1===i&&(23===r||25===r)||9===i&&35===r?"assets/icon/item/"+(h+=PlayerModel.instance.occ)+n+".png":"assets/icon/item/"+h+n+".png"}return s},I.bigNumToString=function(t,e){return void 0===e&&(e=!0),1e8<=t?e?Math.floor(t/1e6)/100+"亿":Math.floor(Math.floor(t/1e6)/100)+"亿":1e5<=t?e?Math.floor(t/100)/100+"万":Math.floor(Math.floor(t/100)/100)+"万":t.toString()},I.smallToBigSort=function(t,e){return t<e?-1:1},I.BigTosmallSort=function(t,e){return e<t?-1:1},I.runActorOper=function(t,e){Channel.instance.publish(2097173,[t,e])},I.getTimeTypeAndTime=function(t){return 864e5<t?Math.floor(t/864e5)+"天":36e5<t?Math.floor(t/36e5)+"小时":6e4<t?Math.floor(t/6e4)+"分钟":1e3<t?Math.floor(t/1e3)+"秒":"1秒"},I.formatTime=function(t){return 864e5<t?Math.floor(t/864e5)+"天"+Math.round(t%864e5/36e5)+"小时":36e5<t?Math.floor(t/36e5)+"小时"+Math.round(t%36e5/6e4)+"分钟":6e4<t?Math.floor(t/6e4)+"分钟":"活动已结束"},I.creatEff=function(t,e,i,n,s,o){void 0===n&&(n=0),void 0===s&&(s=!0),void 0===o&&(o=5);var a=new d.CustomClip;a.skin="assets/effect/"+e+".atlas";for(var r=e.split("/").pop(),l=[],h=n;h<=i;h++)l.push(r+"/"+h+".png");return a.frameUrls=l,a.durationFrame=o,a.loop=s,t&&t.addChild(a),a},I.createLabel=function(t,e,i,n,s){void 0===n&&(n="SimHei"),void 0===s&&(s="center");var o=new Laya.Label;return o.color=e,o.fontSize=i,o.font=n,o.text=t,o.align=s,o},I.getOverlapByItemId=function(t){var e=1,i=I.getItemTypeById(t);if(7===i){var n=1e4*(1e-4*t>>0);e=f.instance.getCfgById(n)[2]}else e=5===i?p.instance.getItemCfgById(t)[2]:8===i?p.instance.getItemCfgById(t)[2]:4===i?m.instance.getItemCfgById(t)[2]:u.instance.getItemCfgById(t)[4];return e},I.chainArr=function(t,e){void 0===e&&(e=0);for(var i=1,n=t.length;i<n;i++)t[i].x=t[i-1].x+t[i-1].width+e},I.centerChainArr=function(t,e,i){void 0===i&&(i=0);for(var n=(e.length-1)*i,s=0,o=e.length;s<o;s++)n+=e[s].width;var a=(t-n)/2;for(e[0].x=a,s=1,o=e.length;s<o;s++)e[s].x=e[s-1].x+e[s-1].width+i},I.autoFitBySumWidth=function(t,e,i){for(var n=e,s=i.length,o=(t-n*s)/(s+1),a=0;a<s;a++)i[a].x=o+a*(n+o)},I.numToUpperCase=function(t){if(t<=10)return I._numStr[t];var e=Math.floor(t/10),i=t%10;return(1===e?"":I._numStr[e])+"十"+I._numStr[i]},I.codeDispose=function(t,e){return t?I.noticeError(t):e&&e.length&&s.instance.addNotice(e),0===t},I.getNameByItemId=function(t){var e=I.getItemCfgById(t),i="";if(!e)return i;switch(I.getItemTypeById(t)){case 1:case 3:case 2:case 6:case 9:case 5:case 8:case 4:i=e[1].toString();break;case 7:var n=1e4*(1e-4*t>>0);i=f.instance.getCfgById(n)[1]}return i},I.timeStampToDate=function(t){var e,i=new Date(t),n=i.getMinutes();return e=n<10?"0"+n:n.toString(),i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate()+" "+i.getHours()+":"+e},I.getPropCountById=function(t){var e=PlayerModel.instance.getCurrencyById(t);return null==e&&(e=c.bag.BagModel.instance.getItemCountById(t)),e},I.getEquipIdByCondition=function(t,e,i,n){return 5e7+1e5*t+1e4*e+1e3*i+10*n+1},I.goldNotEnoughAlert=function(t){if(void 0===t&&(t=null),!d.PlatParams.isCloseRecharge)if(0==c.first_pay.FirstPayModel.instance.giveState){var e=i.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);t&&(e=t),I.alert("温馨提示","元宝不足，是否前往首充？",[e])}else c.money_cat.MoneyCatModel.instance.state?(e=i.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),t&&(e=t),I.alert("温馨提示","元宝不足，是否前往充值界面充值？",[e])):WindowManager.instance.open(394)},I.vipLvNotEnoughAlert=function(){if(!d.PlatParams.isCloseRecharge){var t=i.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]);I.alert("温馨提示","SVIP等级不足，是否前往提升SVIP等级？",[t])}},I.formatHtmlStrByColor=function(t,e){return"<span style='color:"+t+"'>"+e+"</span>"},I.setHTMLPro=function(t,e,i,n,s,o){void 0===s&&(s="left"),void 0===o&&(o="middle"),t.color=e,t.style.fontFamily=i,t.style.fontSize=n,t.style.align=s,t.style.valign=o},I.getRandomInt=function(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)},I.delayedPutInBag=function(){c.bag.BagModel.instance.delayedPutInBag(),c.quickUse.QuickUseCtrl.instance.delayedPutInBag(),c.player.PlayerCtrl.instance.delayedPutInAddItems()},I.delayedButNoPutInBag=function(){c.bag.BagModel.instance.delayedButNoPutInBag(),c.quickUse.QuickUseCtrl.instance.delayedButNoPutInBag(),c.player.PlayerCtrl.instance.delayedButNoPutInBag()},I.checkNullObject=function(t,e){var i;if(!t||0==t)throw null===t?i="值为 null":void 0===t&&(i="值为 undefined"),new Error(e+" "+i)},I.timeConversionYMD=function(t,e){var i=new Date(t),n=i.getFullYear(),s=i.getMonth()+1,o=i.getDate(),a=""+s;s<10&&(a="0"+s);var r=""+o;return o<10&&(r="0"+o),""+n+e+a+e+r},I.timeConversionYMDStr=function(t){var e=new Date(t),i=(e.getFullYear(),e.getMonth()+1),n=e.getDate(),s=""+i;i<10&&(s="0"+i);var o=""+n;return n<10&&(o="0"+n),s+"月"+o+"日"},I.timeConversionHM=function(t,e){var i=new Date(t),n=(i.getHours(),i.getMinutes()),s=i.getSeconds(),o=""+n;n<10&&(o="0"+n);var a=""+s;return s<10&&(a="0"+s),""+o+e+a},I.timeConversionHMS=function(t,e){var i=new Date(t),n=i.getHours(),s=i.getMinutes(),o=i.getSeconds(),a=""+s;s<10&&(a="0"+s);var r=""+o;return o<10&&(r="0"+o),""+n+e+a+e+r},I.timeConversionDHM=function(t){var e=new Date(t),i=e.getDay(),n=e.getHours(),s=e.getMinutes(),o=""+s;return s<10&&(o="0"+s),i+"日"+n+"时"+o+"分"},I.headSkin=function(t,e){return void 0===t&&(t=h.instance.head),void 0===e&&(e=PlayerModel.instance.occ),g.instance.getCfgById(t)||(t=0),"assets/icon/head/head/"+(t+(e=e<=0?1:e))+".jpg"},I.headFrameSkin=function(t){return void 0===t&&(t=h.instance.headFrame),e.instance.getCfgById(t)||(t=0),"assets/icon/head/rehead_frame/"+t+".png"},I.chatFrameSkin=function(t){return y.instance.getCfgById(t)?"assets/icon/head/rechat_frame/"+t+".png":""},I.getZero0clockTimeStamp=function(){var t=d.GlobalData.serverTime-d.GlobalData.timeZoneOffset;return t=864e5*(t=Math.ceil(t/864e5))+d.GlobalData.timeZoneOffset},I.formatItemData=function(t){if(!t)return[];for(var e=[],i=0,n=t.length;i<n;i++){var s=t[i],o=-1,a=0;if("number"==typeof s){if(1&t.length)throw new Error("奖励配置数量为奇数!");o=s;var r=t[++i];"number"==typeof r&&(a=r)}else o=s[0],a=s[1];e.push([o,a,0,null])}return e},I.showItems=function(t,e){if(e)for(var i=0,n=t.length;i<n;i++)i>=e.length?t[i].visible=!1:(t[i].visible=!0,t[i].dataSource=e[i])},I.stringFormat=function(t,e){if(!e)return t;if(!t)return e;for(var i=e.split("|"),n=0,s=i.length;n<s;n++)t=t.replace("{"+n+"}",i[n]);return t},I.conditionItemIsEnough=function(t){if(!t)throw new Error("datas---\x3enull!");for(var e=0,i=t.length;e<i;e++){var n=t[e],s=-1,o=0;if("number"==typeof n){if(1&t.length)throw new Error("奖励配置数量为奇数!");s=n,o=t[++e]}else s=n[0],o=n[1];if(I.getPropCountById(s)<o)return!1}return!0},I.extractIdSegment=function(t,e,i){return void 0===i&&(i=1),--e,t%Math.pow(10,e+i)/Math.pow(10,e)|0},I.whetherInCopy=function(){var t=c.scene.SceneModel.instance.enterScene[0];return 0!=c.config.SceneCfg.instance.getCfgById(t)[7]||c.scene.SceneModel.instance.isInMission},I.checkWords=function(t,e,i){void 0===i&&(i=null),d.PlatParams.checkWords(t,function(t){0===t?e():1===t?i?i(t):s.instance.addNotice("包含非法字符",!0):2===t&&(i?i(t):s.instance.addNotice("发起检测失败，请稍候重试",!0))})},I.flyItem=function(t,e,i){if(t){LayerManager.instance.getLayerById(7).globalToLocal(e),LayerManager.instance.getLayerById(7).globalToLocal(i);var n=new l;n.skin=I.getIconById(t),n.anchorX=n.anchorY=.5,n.pos(e.x,e.y),LayerManager.instance.addToEffectLayer(n);var s=Math.floor(Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)));TweenJS.create(n).to({x:i.x,y:i.y,scaleX:.2,scaleY:.2},s).onComplete(function(){n.destroy(!0)}).start()}},I.judgeCurrency=function(t,e){var i=PlayerModel.instance.getCurrencyById(t);return null==i&&(i=c.bag.BagModel.instance.getItemCountById(t)),e<=i||(90140001==t?I.goldNotEnoughAlert():c.bag.BagUtil.openLackPropAlert(t,1),!1)},I.adaptationImgAndText=function(t,e,i,n,s){void 0===s&&(s=0);for(var o=0,a=0,r=0,l="number"==typeof s,h=0;h<t.length;h++){var c=t[h][1],p=t[h][0];switch(r=l?s:s[h]?s[h]:0,r=h===t.length-1?0:r,c){case 1:o+=p.textWidth+r;break;case 2:u=(u=t[h][2])||1,o+=p.width*u+r;break;case 3:o+=p.textField.textWidth+r;break;case 4:o+=("null"===p.value||""===p.value?0:p.value.length)*t[h][2]+r;break;case 5:o+=p.contextWidth+r}}switch(n){case"center":a=(e-o)/2;break;case"left":a=i;break;case"right":a=e-(o+i)}for(h=r=0;h<t.length;h++)switch(c=t[h][1],(p=t[h][0]).x=a,r=l?s:s[h]?s[h]:0,r=h===t.length-1?0:r,c){case 1:a=p.x+p.textWidth+r;break;case 2:var u;u=(u=t[h][2])||1,a=p.x+p.width*u+r;break;case 3:a=p.x+p.textField.textWidth+r;break;case 4:a+=("null"===p.value||""===p.value?0:p.value.length)*t[h][2]+r,""===p.value&&(p.value=null);break;case 5:o+=p.contextWidth+r}},I.getChildrenByNameSection=function(t,e,i){void 0===i&&(i=1);for(var n=[];;){var s=t[e+i];if(!s)break;n.push(s),i++}return n},I.setRank=function(t,e,i,n){1===t?(i.visible=!1,e.visible=!0,e.skin="common/zs_tongyong_7.png"):2===t?(i.visible=!1,e.visible=!0,e.skin="common/zs_tongyong_8.png"):3===t?(i.visible=!1,e.visible=!0,e.skin="common/zs_tongyong_9.png"):(e.visible=!1,i.visible=!0,n.value=""+t)},I.getFactionIcon=function(t){return"assets/icon/ui/faction/"+c.config.BlendCfg.instance.getCfgById(36004)[2][t]+".png"},I.getWarBandIcon=function(t){return"assets/icon/warband/"+t+".png"},I.getWeekNum=function(){var t=new Date(d.GlobalData.serverTime-d.GlobalData.timeZoneOffset).getUTCDay();return 0===t?7:t},I.getHoursNum1=function(){return new Date(d.GlobalData.serverTime-d.GlobalData.timeZoneOffset).getUTCHours()},I.getHoursNum=function(){return new Date(d.GlobalData.serverTime).getHours()},I.getMinutesNum=function(){return new Date(d.GlobalData.serverTime).getMinutes()},I.getAppointTime=function(t){var e=new Date(d.GlobalData.serverTime),i=t.split(":");return e.setHours(Number(i[0]),Number(i[1]),i[2]?Number(i[2]):0,i[3]?Number(i[3]):0)},I.getSkillName=function(t){var e=I.getSkillPureIdById(t),i=v.instance.getCfgById(e);if(i)return i[1];throw new Error("skill_pure不存在的技能id"+t)},I.getSkillIcon=function(t){var e=I.getSkillPureIdById(t),i=v.instance.getCfgById(e);if(i)return i[6];throw new Error("skill_pure不存在的技能id"+t)},I.getBrahmaColor=function(t){switch(t){case 285:return"#FFEC7C";case 286:return"#0F81F5";case 287:return"#D738F4";case 288:return"#0ECF09";case 289:return"#EA8706";default:return"#FFFFFF"}},I.getBrahmaName=function(t){switch(t){case 285:return"日之力";case 286:return"月之力";case 287:return"星之力";case 288:return"辰之力";case 289:return"暗之力";default:return""}},I.getFuDiName=function(t){return this._fuDiNames[t]},I.gotoSuggestUp=function(){0!=c.first_pay.FirstPayModel.instance.giveState?c.fight_talisman.FightTalismanModel.instance.state?-1==c.gloves.GlovesModel.instance.state?WindowManager.instance.open(387):c.money_cat.MoneyCatModel.instance.state?!c.halo.HaloModel.instance.isHalo()&&c.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==c.zhizun.ZhizunModel.instance.state&&WindowManager.instance.open(351):WindowManager.instance.open(381):WindowManager.instance.open(379):WindowManager.instance.open(118)},I.splitNumber=function(t,e,i,n){void 0===n&&(n=-1);var s=t+"";if(-1!=n)for(;s.length<n;)s="0"+s;return parseInt(s.slice(e,e+i))},I.splitNumber2=function(t,e,i){void 0===i&&(i=-1);var n=Math.pow(10,e),s=Math.floor(t/n);return-1==i?s:s<(n=Math.pow(10,i))?s:s%(Math.floor(s/n)*n)},I.gotoVIP=function(){WindowManager.instance.open(1<=c.vip.VipModel.instance.vipLevel?104:367)},I.isCion=function(t){return 9===this.getItemTypeById(t)&&-1===this.unrealItemTypeAll.indexOf(this.getItemSubTypeById(t))},I.JudgeWearingCondition=function(t,e){var i="",n="",s="",o="#ff3e3e",a="#ff3e3e";if(t){n=""+e,s="("+I.numToUpperCase(t)+"转)";var r=c.player.PlayerModel.instance.level,l=c.player.PlayerModel.instance.eraLevel;r<e&&l<t?(i="(等级不足,转生不足)",o=a="#ff3e3e"):e<=r&&l<t?(i="(转生不足)",o="#50ff28"):r<e&&t<=l?(i="(等级不足)",a="#50ff28"):(i="",o=a="#50ff28")}else n=""+e,s="",c.player.PlayerModel.instance.level<e?i="(等级不足)":(i="",o=a="#50ff28");return"<span style='color:"+o+";font-size: 22px'>"+n+"</span>\n            <span style='color:"+a+";font-size: 22px'>"+s+"</span>\n            <span style='color:#ff3e3e;font-size: 22px'>"+i+"</span>\n            "},I.setHalaOneKeychange=function(t,e){return!t||c.halo.HaloModel.instance.isHalo()?(c.halo.HaloModel.instance.setCheckTipsKey(e,t),!0):(I.alert("温馨提示",35===e||47===e||49===e?"您未激活主角光环,不可获得双倍奖励,是否前往激活？":"您未激活主角光环,不可合并次数挑战,是否前往激活？",[i.create(null,function(){WindowManager.instance.open(1493)})],[]),!1)},I.getTeamTypeByStr=function(t){if(c.halo.HaloModel.instance.isHalo()){var e=-1,i=0;if(2===t?(e=40,i=c.nothingness_world.NothingnessWorldModel.instance.nowChallengeNum):3===t?(e=9,i=c.teamBattle.TeamBattleModel.Instance.remainTimes):4===t&&(e=52,i=c.nether_world.NetherWorldModel.instance.nowChallengeNum),c.halo.HaloModel.instance.getCheckTipsValue(e)&&0<i)return 1===i?"进入挑战":2===i?"双倍挑战":i+"倍挑战"}return"进入挑战"},I.timeFormat=function(t){var e=new Date(t),i=e.getMonth()+1,n=e.getDate(),s=e.getHours(),o=e.getMinutes();return i+"/"+n+"  "+s+":"+(o<10?"0":"")+o},I.getTmMQuality=function(t,e){return Math.floor(t/6e4)===Math.floor(e/6e4)},I.notChangeTips=function(){24===c.scene.SceneUtil.currScene?s.instance.addNotice("竞技场副本中不可切换到其它副本",!0):s.instance.addNotice("副本中不可切换到其它副本",!0)},I._numStr="零一二三四五六七八九十",I._qualityColors=["#FFFFFF","#0ECF09","#0F81F5","#d738f4","#EA8706","#FF3E3E","#FF6DA7"],I._qualityNames=["白","绿","蓝","紫","橙","红","粉"],I.equipQualityNames=["凡","灵","珍","极","绝","神","圣"],I._qualityNames2=["蓝","紫","橙","红"],I.peryNames=["七玄仙女","十大仙兵","十二金仙"],I._qualityBgImgUrl=["common/image_tips_1.png","common/image_tips_2.png","common/image_tips_3.png","common/image_tips_4.png","common/image_tips_5.png","common/image_tips_6.png"],I._equipNamePart=["武器","帽子","衣服","护手","鞋子","腰带","项链","手镯","戒指","玉佩"],I._beastNamePart=["兽角","神瞳","獠牙","利爪","鳞甲"],I._ysNamePart=["武器","帽子","衣服","护手","鞋子","腰带","裤子","护符"],I._fuDiNames=["","灵源福地","曜元福地","太华福地","五灵福地","长生福地","太上福地"],I.unrealItemTypeAll=[13,14,15,16,29,30,35,36],I.alpanNum=.5,I.ISDEBUG=!0,t=I,d.CommonUtil=t}(modules=modules||{}),function(h){var t,e,i;function n(){this.playerTotolTable={},this.equipsDic=new e,this.cooldowns=[],this._hp=1,this._maxHp=1,this.beforefight=0,this.playerDeadTuple=null,this.playerDeadTime=0,this._pkMode=0,this.openDay=0,this.nDay=0,this.cDay=0,this.cBgDay=0,this.createTime=0,this.selectTargetType=1,this.selectTargetId=-1,this.oldSelectTargetType=1,this.oldSelectTargetId=-1,this.selfPgId=1,this.teamId=0,this.isUnseen=!1,this.unseenTimeNum=0,this.renQiNum=0,this.sysemStateInfo=[]}t=h.player||(h.player={}),e=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return n._instance},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"warbandCoint",{get:function(){return this._playerBaseAttr?this._playerBaseAttr[23]:0},set:function(t){this._playerBaseAttr&&(this._playerBaseAttr[23]=t,GlobalData.dispatcher.event("WARBAND_COIN_UPDATE"))},enumerable:!0,configurable:!0}),n.prototype.getDay=function(){return 6048e5<GlobalData.serverTime-this.createTime},n.prototype.getDayNum=function(){return Math.ceil((GlobalData.serverTime-this.createTime)/864e5)},n.prototype.getDayNum1=function(){var t=h.player.PlayerModel.instance.createTime,e=GlobalData.serverTime-t,i=new Date(t),n=i.getHours(),s=i.getDate(),o=new Date(GlobalData.serverTime),a=o.getHours(),r=o.getDate();if(e<864e5)return r==s?n<5&&5<=a?2:1:n<5?5<=a?3:2:5<=a?2:1;var l=e/864e5>>0;return n<5?l+=5<=a?2:1:5<=a&&(l+=1),l},Object.defineProperty(n.prototype,"bornLev",{get:function(){return this._bornLev},set:function(t){this._bornLev=t,this._playerBaseAttr[2]=Math.floor(.01*t),this._playerBaseAttr[3]=t%100,GlobalData.dispatcher.event("PLAYER_BORN_LEV")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"playerBaseAttr",{get:function(){return this._playerBaseAttr},set:function(t){this._playerBaseAttr=t,this.roleName=this._playerBaseAttr[0],this.occ=this._playerBaseAttr[1],this.serverPgId=t[12],this.createTime=t[14],this.selfPgId=t[13],GlobalData.dispatcher.event("PLAYER_BASE_ATTR_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"playerTotolAttrs",{get:function(){return this._playerTotolAttrs},set:function(t){this._playerTotolAttrs=t,GlobalData.dispatcher.event("PLAYER_TOTAL_ATTR_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hp",{get:function(){return this._hp},set:function(t){this._hp!==t&&(this._hp=t,GlobalData.dispatcher.event("PLAYER_UPDATE_HP"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxHp",{get:function(){return this._maxHp},set:function(t){this._maxHp=t,GlobalData.dispatcher.event("PLAYER_UPDATE_MAX_HP")},enumerable:!0,configurable:!0}),n.prototype.updateLevel=function(t){this._playerBaseAttr&&this.level!==t&&(this._playerBaseAttr[4]=t,PlatParams.playerLevelUp(),GlobalData.dispatcher.event("PLAYER_UPDATE_LEVEL"))},Object.defineProperty(n.prototype,"level",{get:function(){return this._playerBaseAttr[4]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ingot",{get:function(){return this._playerBaseAttr[6]},enumerable:!0,configurable:!0}),n.prototype.getCurrencyById=function(t){var e;switch(t){case 90140001:e=this._playerBaseAttr[6];break;case 90240001:e=this._playerBaseAttr[7];break;case 90330001:e=this._playerBaseAttr[8];break;case 90530001:e=this._playerBaseAttr[9];break;case 90430001:e=this._playerBaseAttr[5];break;case 92340001:e=this._playerBaseAttr[11];break;case 91830001:e=h.xianfu.XianfuModel.instance.treasureInfos(0);break;case 91930001:e=h.xianfu.XianfuModel.instance.treasureInfos(1);break;case 93430001:e=this._playerBaseAttr[10];break;case 94440001:e=this._playerBaseAttr[15];break;case 94150001:e=h.zxian_yu.ZXianYuModel.instance.xianyu;break;case 91930001:e=h.xianfu.XianfuModel.instance.treasureInfos(1);break;case 94630001:e=h.beast_equipment.BeastEquipmentModel.instance.beastJing;break;case 94950001:e=this._playerBaseAttr[19];break;case 95030001:e=n.instance.warbandCoint;break;case 90840001:e=h.treasure.TreasureModel.instance.getCoupon(0);break;case 90940001:e=h.treasure.TreasureModel.instance.getCoupon(1);break;case 91040001:e=h.treasure.TreasureModel.instance.getCoupon(2);break;case 91140001:e=h.treasure.TreasureModel.instance.getCoupon(3);break;case 91240001:e=h.treasure.TreasureModel.instance.getCoupon(4);break;case 92740001:e=h.adventure.AdventureModel.instance.point;break;case 92830001:e=h.adventure.AdventureModel.instance.yunLi;break;case 95330001:e=this.factionPrestige}return e},Object.defineProperty(n.prototype,"contribution",{get:function(){return this._playerBaseAttr?this._playerBaseAttr[10]:0},set:function(t){this._playerBaseAttr[10]=t,GlobalData.dispatcher.event("PLAYER_CONTRIBUTION")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"eraLevel",{get:function(){return this._playerBaseAttr?this._playerBaseAttr[2]:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"exp",{get:function(){return this._playerBaseAttr?this._playerBaseAttr[5]:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"copper",{get:function(){return this._playerBaseAttr[8]},enumerable:!0,configurable:!0}),n.prototype.updateExp=function(t){this._playerBaseAttr[5]=t,GlobalData.dispatcher.event("PLAYER_UPDATE_EXP")},n.prototype.UpdateMoney=function(t){this._playerBaseAttr[8]=t[2],this._playerBaseAttr[6]=t[0],this._playerBaseAttr[7]=t[1],GlobalData.dispatcher.event("PLAYER_UPDATE_MONEY")},n.prototype.updateZQ=function(t){this._playerBaseAttr[9]=t,GlobalData.dispatcher.event("PLAYER_UPDATE_ZQ")},Object.defineProperty(n.prototype,"zq",{get:function(){return this._playerBaseAttr?this._playerBaseAttr[9]:0},enumerable:!0,configurable:!0}),n.prototype.updateCharm=function(t){this._playerBaseAttr[15]=t,GlobalData.dispatcher.event("PLAYER_UPDATE_CHARM")},Object.defineProperty(n.prototype,"charm",{get:function(){return this._playerBaseAttr?this._playerBaseAttr[15]:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tiantiHonor",{get:function(){return this._playerBaseAttr?this._playerBaseAttr[11]:0},set:function(t){this._playerBaseAttr&&(this._playerBaseAttr[11]=t,GlobalData.dispatcher.event("PLAYER_UPDATE_HONOR"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"xianmoCoin",{get:function(){return this._playerBaseAttr?this._playerBaseAttr[19]:0},set:function(t){this._playerBaseAttr&&(this._playerBaseAttr[19]=t,GlobalData.dispatcher.event("PLAYER_UPDATE_XIAN_MO_CION"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"factionPrestige",{get:function(){return this._factionPrestige},set:function(t){this._factionPrestige=t,GlobalData.dispatcher.event("PLAYER_UPDATE_FACTION_PRESTIGE")},enumerable:!0,configurable:!0}),n.prototype.UpdateFight=function(t){this.beforefight=this.fight,this.fight=t,!this.beforefight&&t&&PlatParams.playerLogin(),GlobalData.dispatcher.event("PLAYER_UPDATE_FIGHT"),PlatParams.playerPowerChange()},n.prototype.getEquipByPart=function(t){return this.equipsDic.get(t)},n.prototype.setEquips=function(t){for(var e=0,i=t.length;e<i;e++){var n=h.common.CommonUtil.getPartById(t[e][0]);this.equipsDic.set(n,t[e])}GlobalData.dispatcher.event("PLAYER_EQUIPS_INITED")},n.prototype.wearEquips=function(t){for(var e=0,i=t.length;e<i;e++)this.equipsDic.set(t[e][0],t[e][1]);GlobalData.dispatcher.event("PLAYER_WEAR_EQUIPS",[t])},Object.defineProperty(n.prototype,"pkMode",{get:function(){return this._pkMode},set:function(t){this._pkMode!=t&&(this._pkMode=t,GlobalData.dispatcher.event("PLAYER_UPDATE_PK_MODE"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"occ",{get:function(){return this._playerBaseAttr[1]},set:function(t){t!==this._playerBaseAttr[1]&&(this._playerBaseAttr[1]=t,GlobalData.dispatcher.event("PLAYER_UPDATE_OCC"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"roleName",{get:function(){return this._playerBaseAttr[0]},set:function(t){var e=StringUtils.replaceFilterWords(t,"*");e!==this._playerBaseAttr[0]&&(this._playerBaseAttr[0]=e,GlobalData.dispatcher.event("PLAYER_UPDATE_NAME"))},enumerable:!0,configurable:!0}),n.prototype.selectTarget=function(t,e){t!==this.selectTargetType&&(this.oldSelectTargetType=this.selectTargetType,this.oldSelectTargetId=this.selectTargetId),this.selectTargetType=t,this.selectTargetId=e,GlobalData.dispatcher.event("PLAYER_TARGET_CHANGE")},n.prototype.updataOnlineRemindDate=function(t){this.onlineRemind=t},n.prototype.getSystemStateReply=function(t){this.sysemStateInfo=t[0]},n.prototype.updateSystemState=function(t){for(var e=t[0]||[],i=0,n=e.length;i<n;i++)for(var s=0,o=this.sysemStateInfo.length;s<o;s++)e[i][0]===this.sysemStateInfo[s][0]&&e[i][1]!==this.sysemStateInfo[s][1]&&(this.sysemStateInfo[s][1]=e[i][1],this.onSysemStateInfoChange(e[i][0]))},n.prototype.onSysemStateInfoChange=function(t){0===t&&window.location.reload()},n.prototype.getActionOpenBySystemId=function(t){for(var e=0,i=this.sysemStateInfo.length;e<i;e++)if(this.sysemStateInfo[e][0]===t)return this.sysemStateInfo[e][1];return!1},n._instance=new n,i=n,t.PlayerModel=i}(modules=modules||{}),function(t){var s,o,e;function i(){this._panelPool=new Array,this._items=new Array,this._isPlaying=!1,this._max=8,this._panels=new Array}s=t.notice||(t.notice={}),o=utils.tween.TweenJS,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.addItem=function(t,e){this._items.push([t,e]),this.check()},i.prototype.addItems=function(t,e){void 0===e&&(e=null);for(var i=0,n=t.length;i<n;i++)this._items.push([t[i],e]);this.check()},i.prototype.check=function(){this._isPlaying||this.tween()},i.prototype.tween=function(){if(0!==this._items.length){this._isPlaying=!0;for(var t,e=this._max>=this._items.length?this._items:this._items.splice(0,this._max),i=0,n=e.length;i<n;i++)(t=this._panelPool.shift()||new s.DropNoticePanel).setItem(e[i]),LayerManager.instance.addToNoticeLayer(t),t.pos(CommonConfig.viewWidth-t.width>>1,CommonConfig.viewHeight-400,!0),this._panels.push(t),o.create(t).to({y:CommonConfig.viewHeight-400-60+-46*i},1e3).easing(utils.tween.easing.circular.Out).start();o.create(this).delay(1850).onComplete(this.removeHandler.bind(this)).start(),e.length=0}},i.prototype.removeHandler=function(){for(var t=0,e=this._panels.length;t<e;t++){var i=this._panels[t];i.setItem(null),i.removeSelf(),this._panelPool.length>=this._max?i.destroy(!0):this._panelPool.push(i)}(this._panels.length=0)<this._items.length?this.tween():this._isPlaying=!1},e=i,s.DropNoticeManager=e}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function h(){var t=i.call(this)||this;return t._img=new s,t.addChild(t._img),t._loaded=!1,t._isPlaying=!1,t._index=0,t._loop=!0,t._durationFrame=5,t._count=1,t.autoRemove=!1,t._handler=n.create(t,t.loadedHandler,null,!1),t.on("display",t,t.displayHandler),t.on("undisplay",t,t.undisplayHandler),t._skin=null,t}e=t.common||(t.common={}),n=Laya.Handler,s=Laya.Image,o=Laya.Component,a=Laya.Loader,i=o,__extends(h,i),h.createAndPlay=function(t,e,i,n,s,o){void 0===n&&(n=!0),void 0===s&&(s=!0),void 0===o&&(o=5);var a=new h;a.skin=t;for(var r=new Array(i),l=0;l<i;++l)r[l]=e+"/"+l+".png";return a.frameUrls=r,a.durationFrame=o,a.loop=s,n&&a.play(),a},h.create=function(t,e,i,n,s){void 0===n&&(n=!0),void 0===s&&(s=5);var o=new h;t&&(o.skin=t);for(var a=new Array(i),r=0;r<i;++r)a[r]=e+"/"+r+".png";return o.frameUrls=a,o.durationFrame=s,o.loop=n,o},h.thisPlay=function(t){t&&(t.visible=!0,t.play())},h.thisStop=function(t){t&&(t.visible=!1,t.stop())},h.prototype.setProperty=function(t,e,i,n,s){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=!1),t&&t.addChild(this),this.pos(e,i,!0),this.scale(n,n,!0),this.visible=s,this},Object.defineProperty(h.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),h.prototype.displayHandler=function(){},h.prototype.undisplayHandler=function(){this.stop()},Object.defineProperty(h.prototype,"skin",{set:function(t){this._skin!=t&&(this.clearCache(1),this._skin&&Laya.loader.cancelLoadByUrl(this._skin,this._handler),this._skin=t,this._loaded=!1,this.keepCache(),Laya.loader.load(t,this._handler))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"durationFrame",{set:function(t){this._durationFrame!=t&&(this._durationFrame=t,this._isPlaying&&(Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(this._durationFrame*(1e3/60),this,this.loopHandler)))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"frameUrls",{set:function(t){if(this._frameUrls!=t){if(t&&this._frameUrls&&this._frameUrls.length==t.length){for(var e=!0,i=0,n=t.length;i<n;++i)if(this._frameUrls[i]!==t[i]){e=!1;break}if(e)return}if(this.clearCache(2),this._frameUrls=t,this._skin||(this._loaded=!1,this.keepCache(),Laya.loader.load(t,this._handler)),this._loaded&&this._frameUrls&&0<this._frameUrls.length){var s=a.getRes(this._frameUrls[0]);this.width=s.sourceWidth,this.height=s.sourceHeight}}},enumerable:!0,configurable:!0}),h.prototype.keepCache=function(){if(null!=this._skin)Laya.Loader.keepCache(this,this._skin);else if(this._frameUrls)for(var t=0,e=this._frameUrls;t<e.length;t++){var i=e[t];Laya.Loader.keepCache(this,i)}},h.prototype.clearCache=function(t){if(void 0===t&&(t=3),null!=this._skin)0!=(1&t)&&Laya.Loader.clearCache(this,this._skin);else if(null!=this._frameUrls&&0!=(2&t))for(var e=0,i=this._frameUrls;e<i.length;e++){var n=i[e];Laya.Loader.clearCache(this,n)}},Object.defineProperty(h.prototype,"loop",{set:function(t){this._loop=t},enumerable:!0,configurable:!0}),h.prototype.loadedHandler=function(){if(!this.destroyed){if(this._loaded=!0,this._frameUrls&&0<this._frameUrls.length){var t=a.getRes(this._frameUrls[0]);t&&(this.width=t.sourceWidth,this.height=t.sourceHeight)}this.event("loaded"),this.loopHandler()}},h.prototype.play=function(){return this._isPlaying&&this.stop(),this._isPlaying=!0,this._count=1,this._index=0,Laya.timer.loop(this._durationFrame*(1e3/60),this,this.loopHandler),this.loopHandler(),this},h.prototype.stop=function(){this._count=1,this._index=0,this.loopHandler(),this._isPlaying=!1,Laya.timer.clear(this,this.loopHandler)},h.prototype.pause=function(){this._isPlaying&&(this._isPlaying=!1,Laya.timer.clear(this,this.loopHandler))},h.prototype.resume=function(){this._isPlaying||(this._isPlaying=!0,Laya.timer.loop(this._durationFrame*(1e3/60),this,this.loopHandler),this.loopHandler())},h.prototype.destroy=function(t){this.clearCache(),Laya.timer.clear(this,this.loopHandler),this.off("display",this,this.displayHandler),this.off("undisplay",this,this.undisplayHandler),i.prototype.destroy.call(this,t)},h.prototype.loopHandler=function(){this._frameUrls&&0!==this._frameUrls.length&&this._loaded&&(this._img.skin=this._frameUrls[this._index],this._isPlaying&&(this._index++,this._index===this._frameUrls.length&&(this._loop?this._index=0:(Laya.timer.clear(this,this.loopHandler),this.event("complete"),this.autoRemove&&(this._img.skin=null,this.removeSelf())))))},r=h,e.CustomClip=r}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._powerTable={},this._costTable={},this._maxLevel=0,this._maxLevelNew=0;for(var t=GlobalData.getConfig("privilege"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[0];this._table[s]=n;var o=this._powerTable[s];o=o||{};var a=n[1];if(a&&0<a.length){for(var r=0;r<a.length;r++)o[a[r][0]]=a[r];this._powerTable[s]=o}var l=this._costTable[s];l=l||{};var h=n[2];if(h&&0<h.length){for(var c=0;c<h.length;c++)null!=h[c]&&(l[h[c][0]]=h[c]);this._costTable[s]=l}s<100&&s>this._maxLevel&&s<50&&(this._maxLevel=s),s<100&&s>this._maxLevelNew&&50<=s&&(this._maxLevelNew=s)}},n.prototype.getCfgByType=function(t){return this._table[t]},n.prototype.getVipMaxLevel=function(){return this._maxLevel},n.prototype.getVipFMaxLevel=function(){return this._maxLevelNew},n.prototype.getVipInfoByLevel=function(t,e){if(this._powerTable[t])return this._powerTable[t][e]},n.prototype.getCostByLevel=function(t,e){if(this._costTable[t])return this._costTable[t][e]},n.prototype.getOpenFuncByType=function(t,e){return void 0===e&&(e=0),this.getVipInfoByLevel(e,t)?e:this.getOpenFuncByType(t,++e)},n.prototype.getNextLevel=function(t,e){var i,n=this.getVipInfoByLevel(t,e);i=null==n?0:n[1];for(var s=t;s<=this._maxLevel;s++){var o=this.getVipInfoByLevel(s,e);if(null!=o&&i<o[1])return s}},n.prototype.getMinLvMaxLvByType=function(t){for(var e,i,n=0,s=0;s<=this._maxLevel;s++){var o=this.getVipInfoByLevel(s,t);if(null!=o){var a=o[1];null==e&&0<a&&(e=s),n<a&&(n=a,i=s)}}return[e,i]},n.prototype.getCopyCiShuByLevelAndType=function(t,e){for(var i=this.getVipInfoByLevel(t,e),n=i?i[1]:0,s=t;s<=15;s++){var o=this.getVipInfoByLevel(s,e),a=o?o[1]:0;if(n<a)return[s,a-n]}return null},n.prototype.getZhiZunJiaChen=function(t){for(var e=this.getCfgByType(201)[1],i=0;i<e.length;i++){var n=e[i];if(n&&t===n[0])return n}return null},i=n,e.PrivilegeCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){this.privilegeInfo=new Array,this.privilegeInfoDic={},this.vipLevel=0}e=t.vip||(t.vip={}),i=t.config.PrivilegeCfg,n=t.funcOpen.FuncOpenModel,s=t.redPoint.RedPointCtrl,o=t.config.BlendCfg,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.initVipInfo=function(t){this.rewardList=new Array,this.maxVipLevel=i.instance.getVipMaxLevel(),this.vipLevel=t[0],this.dayRewardState=t[3],this.haveNum=t[1],this.rewardList=t[2],this.isShowVip=t[4],this.setNeedNum(),this.checkHasRP(),this.setActionOpen(),this.setPrivilegeRange(),GlobalData.dispatcher.event("VIP_UPDATE")},r.prototype.updateVipInfo=function(t){this.vipLevel=t[0],this.haveNum=t[1],this.rewardList=t[2],this.dayRewardState=t[3],this.isShowVip=t[4],this.setNeedNum(),this.checkHasRP(),this.setActionOpen(),GlobalData.dispatcher.event("VIP_UPDATE")},r.prototype.setActionOpen=function(){},r.prototype.setNeedNum=function(){this.needNum=this.getVipCfgByLevel(this.vipLevel)[3]},r.prototype.getVipCfgByLevel=function(t){return i.instance.getCfgByType(t)},r.prototype.checkHasRP=function(){n.instance.getFuncIsOpen(47)&&this.checkReward()},r.prototype.checkReward=function(){for(var t=!1,e=1;e<=this.vipLevel;e++)if(1==this.checkCanReceive(e)){t=!0;break}s.instance.setRPProperty("vipRP",(t||!r.instance.dayRewardState)&&0<r.instance.vipLevel)},r.prototype.checkCanReceive=function(t){if(t<=this.vipLevel){if(this.rewardList&&0<this.rewardList.length)for(var e=0;e<this.rewardList.length;e++)if(t==this.rewardList[e])return 2;return 1}return 0},r.prototype.getCanGetAward=function(){for(var t=1;t<this.maxVipLevel;t++)if(2!=this.checkCanReceive(t))return t;return this.maxVipLevel},r.prototype.setPrivilegeInfo=function(t){this.privilegeInfo=t;for(var e=0;e<this.privilegeInfo.length;e++){var i=this.privilegeInfo[e][0],n=this.privilegeInfo[e];this.privilegeInfoDic[i]=n}GlobalData.dispatcher.event("UPDATE_PRIVILEGE")},r.prototype.updatePrivilegeInfo=function(t){this.privilegeInfo=t;for(var e=0;e<this.privilegeInfo.length;e++){var i=this.privilegeInfo[e][0],n=this.privilegeInfo[e];this.privilegeInfoDic[i]=n}GlobalData.dispatcher.event("UPDATE_PRIVILEGE")},r.prototype.getPrivilegeInfoById=function(t){return this.privilegeInfoDic[t]},r.prototype.setPrivilegeRange=function(){this.vipRange=o.instance.getCfgById(60001)[1]},r.prototype.getPrivilegeRange=function(){return this.vipRange&&0<=this.vipLevel?this.vipRange[this.vipLevel]:0},a=r,e.VipModel=a}(modules=modules||{}),function(g){var e,i,h,c,y,_,p,t;function n(){var t=i.call(this)||this;return t.fanTianEnterType=1485,t.width=t.height=100,t}e=g.bag||(g.bag={}),h=Laya.BlendMode,c=Laya.Image,y=g.common.CommonUtil,_=g.config.ItemRuneCfg,p=g.common.CustomClip,i=ui.BaseItemUI,__extends(n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this._starArray=[],this._valueDisplay=!0,this._nameTxt.visible=!1,this._maskName=new Laya.Sprite,this._maskName.graphics.drawRect(0,0,100,20,"#FF0000",null,0),this._nameTxt.mask=this._maskName,this.upImg.visible=!1,this.maskImg.visible=!1,this.needTip=!0,this.rpImg.visible=!1},Object.defineProperty(n.prototype,"isbtnClipIsPlayer",{set:function(t){this._btnClip&&(t?(this._btnClip.visible=!0,this._btnClip.play()):(this._btnClip.visible=!1,this._btnClip.stop()))},enumerable:!0,configurable:!0}),n.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnClip&&this._btnClip.visible&&this._btnClip.play()},Object.defineProperty(n.prototype,"clip",{get:function(){return this._btnClip},enumerable:!0,configurable:!0}),n.prototype.setCustomClip=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=!1;if(t&&0!=t){this._btnClip&&(this._btnClip.removeSelf(),this._btnClip.destroy(),this._btnClip=null);var n="item_effect"+t,s=new Array,o=this.getCustomClipLeng(t);if(0!=o){if(3==t)for(var a=0;a<o;a++){var r=n+"/"+a+".png";s.push(r)}else for(a=0;a<o;a++)r=n+"/"+a+".png",s.push(r);if(this._btnClip?(this._btnClip.stop(),this._btnClip.visible=!1,this._btnClip.skin="assets/effect/"+n+".atlas",this._btnClip.frameUrls=s):(this._btnClip=new p,3===t||(this._btnClip.blendMode=h.NORMAL),this._btnClip.scale(1,1),this.addChildAt(this._btnClip,3),this._btnClip.skin="assets/effect/"+n+".atlas",this._btnClip.frameUrls=s,this._btnClip.durationFrame=6,this._btnClip.loop=!0,this._btnClip.pos(-14,-22),this._btnClip.visible=!1),1==e){var l=this.getChildIndex(this.gradeImg)+1;this.addChildAt(this._btnClip,l)}else l=this.getChildIndex(this._icon)-1,this.addChildAt(this._btnClip,l);this.setPosByCustomClipId(t),i=!0}}return i},n.prototype.setPosByCustomClipId=function(t){if(this._btnClip)switch(t){case 1:this._btnClip.pos(-10,-10);break;case 2:this._btnClip.pos(-14,-22);break;case 3:this._btnClip.pos(-75,-75);break;case 4:case 5:case 6:this._btnClip.pos(2,2);break;case 7:this._btnClip.pos(-20,-20);break;case 8:this._btnClip.pos(-10,-10)}},n.prototype.getCustomClipLeng=function(t){var e=0;switch(t){case 1:case 2:case 3:e=16;break;case 4:case 5:case 6:e=6;break;case 7:case 8:e=16}return e},n.prototype.clickHandler=function(){if(this.needTip){if(null==this._itemData)return;var t=null;830==this._itemData[0]/1e5>>0&&(t=this.fanTianEnterType),e.BagUtil.openBagItemTip(this._itemData,t)}},Object.defineProperty(n.prototype,"dataSource",{set:function(t){this.setDataSource(t)},enumerable:!0,configurable:!0}),n.prototype.setData=function(t){i.prototype.setData.call(this,t),this.setDataSource(t)},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._starArray=this.destroyElement(this._starArray),this.removeSelf(),i.prototype.destroy.call(this,t)},n.prototype.setDataSource=function(t){this.rpImg.visible=!1;for(var e=0,i=this._starArray.length;e<i;e++)this._starArray[e].visible=!1;if(this.hideFlag(),this.stageBase.visible=!1,null==t)this._itemData=null,this._qualityBg.skin="",this._icon.skin="",this._numTxt.text="",this._nameTxt.text="",this._levelTxt.visible=!1,this.lvImg.visible=!1,this.gradeImg.visible=!1,this._qualityBg.skin="assets/icon/quality_bg/iconbg_0.png",this.pieceImg.visible=!1,this.upImg.visible=!1,this.maskImg.visible=!1,this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1),this.partImg.visible=!1;else{var n=(this._itemData=t)[0],s=y.getItemQualityById(n);6<s&&(s=6),this._qualityBg.skin="assets/icon/quality_bg/iconbg_"+s+".png",this._numSet||(this._numTxt.text=y.bigNumToString(t[1]),this._numTxt.visible=1<t[1]);var o=(1e-5*n>>0)%100;if(this._levelTxt.value=o.toString(),this._nameTxt.color=y.getColorByQuality(s),this._itemCfg=y.getItemCfgById(n),!this._itemCfg)throw new Error("不存在的道具ID："+n);this._itemType=y.getItemTypeById(n);var a=0,r=0,l=0;switch(this.partImg.visible=!1,this._itemType){case 1:case 3:case 2:case 6:case 9:if(this._nameTxt.text=this._itemCfg[1].toString(),this._icon.skin=y.getIconById(n),this.pieceImg.visible=1===this._itemCfg[13],a=this._itemCfg[18],r=this._itemCfg[19],l=this._itemCfg[20],162==n/1e5>>0){this.partImg.visible=!0;var h=(.1*n>>0)%10;this.partImg.skin="common/part_"+h+".png"}break;case 8:var c=n/1e5>>0;if(807<=c&&c<=811)this._nameTxt.text=this._itemCfg[1].toString(),this._icon.skin=y.getIconById(n),this.pieceImg.visible=!1,a=this._itemCfg[8],r=this._itemCfg[9],l=0;else if(830==c){this.pieceImg.visible=!1,this._nameTxt.text=this._itemCfg[1].toString(),this._icon.skin=y.getIconById(n),a=this._itemCfg[17],r=this._itemCfg[18],l=0,g.brahma_equip.BrahmaEquipUtlis.getQualityById(this._itemCfg[0]);var p=g.brahma_equip.BrahmaEquipUtlis.getGradeById(this._itemCfg[0]);this.stageBase.skin="assets/icon/ui/brahma_equip/g"+p+".png",this.stageBase.visible=!0}else if(823<=c&&c<=829)this._nameTxt.text=this._itemCfg[1].toString(),this._icon.skin=y.getIconById(n),this.pieceImg.visible=!1,this.partImg.visible=!0,this.partImg.skin="common/part_"+y.getPartById(n)+".png";else{var u=g.yuanShen.YuanShenUtil.isYuanshenEquip(n),d=g.yuanShen.YuanShenUtil.isFulingItem(n);u?this._qualityBg.skin="assets/icon/quality_bg/iconbg_common_icon_"+g.yuanShen.YuanShenUtil.getTypeById(n)+".png":d&&(this._qualityBg.skin="assets/icon/quality_bg/iconbg_"+g.yuanShen.YuanShenUtil.getFulingQualityById(n)+".png"),this._nameTxt.text=this._itemCfg[1].toString(),this._icon.skin=y.getIconById(n),this.pieceImg.visible=!1,a=this._itemCfg[20],r=this._itemCfg[21],l=this._itemCfg[22]}break;case 5:this._nameTxt.text=this._itemCfg[1].toString(),this._icon.skin=y.getIconById(n),this.pieceImg.visible=!1,a=this._itemCfg[20],r=this._itemCfg[21],l=this._itemCfg[22];break;case 4:this._nameTxt.text=this._itemCfg[1].toString(),this._icon.skin=y.getIconById(n),this.pieceImg.visible=!1,a=this._itemCfg[12],r=this._itemCfg[13],l=this._itemCfg[14];break;case 7:var m=1e4*(1e-4*n>>0),f=_.instance.getCfgById(m);this._nameTxt.text=f[1],this._icon.skin=y.getIconById(n),this.pieceImg.visible=!1,a=f[8],r=f[9],l=f[10]}this.isbtnClipIsPlayer=this.setCustomClip(a,r),0!=l&&l?(this.gradeImg.skin="common/xiyou"+l+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1,5==this._itemType?this.setLevel(n,this._valueDisplay):8==this._itemType?g.yuanShen.YuanShenUtil.isFulingItem(n)?(this._levelTxt.value=g.yuanShen.YuanShenUtil.getLvById(n).toString(),this.lvImg.visible=this._levelTxt.visible=!0):(this.setLevel(n,this._valueDisplay),this.lvImg.visible=this._levelTxt.visible=!1):this.setLevel(n,!1),this._icon.size(90,90),this._icon.pos(4,4,!0)}},Object.defineProperty(n.prototype,"itemData",{get:function(){return this._itemData},enumerable:!0,configurable:!0}),n.prototype.setNum=function(t,e){void 0===t&&(t=""),void 0===e&&(e="#ffffff"),this._numSet=!0,this._numTxt.visible=!0,this._numTxt.text=t,this._numTxt.color=e},n.prototype.numPos=function(t,e,i,n,s){void 0===n&&(n=null),void 0===s&&(s=null),this._numTxt.x=t,this._numTxt.y=e,this._numTxt.fontSize=i,n&&(this._numTxt.align=n),null!=s&&(this._numTxt.stroke=s)},n.prototype.setLevel=function(t,e){for(var i=(.001*t>>0)%10,n=8==this._itemType&&0<g.yuanShen.YuanShenUtil.getTypeById(t),s=this._starArray.length>i-1?this._starArray.length:i-1,o=0;o<s;o++)o<i-1?(e&&(this._starArray[o]||(this._starArray[o]=new c("common/zs_beibao_2.png"),this._starArray[o].x=6,this.addChild(this._starArray[o])),n?(this._starArray[o].size(18,18),this._starArray[o].y=4+15*o):(this._starArray[o].size(22,22),this._starArray[o].y=4+23*o)),this._starArray[o]&&(this._starArray[o].visible=e)):this._starArray[o]&&(this._starArray[o].visible=!1);this._levelTxt.visible=e,this.lvImg.visible=e;var a=t/1e5>>0;if(8==this._itemType&&823<=a&&a<=829&&this._starArray&&0<this._starArray.length)for(var r=0;r<this._starArray.length;r++){var l=this._starArray[r];l&&(l.visible=!1)}},Object.defineProperty(n.prototype,"nameVisible",{set:function(t){this._nameTxt.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"brahmaStageVisibe",{set:function(t){this.stageBase.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"upImgVisible",{set:function(t){this.upImg.visible=t},enumerable:!0,configurable:!0}),n.prototype.namePos=function(t,e,i){this._nameTxt.x=t,this._nameTxt.y=e,this._nameTxt.fontSize=i},Object.defineProperty(n.prototype,"valueDisplay",{set:function(t){this._valueDisplay=t},enumerable:!0,configurable:!0}),n.prototype.showFlag=function(t,e,i){void 0===e&&(e=30),void 0===i&&(i="common/image_common_hbq.png"),this.mvpImg.visible=this.mvpTxt.visible=!0,this.mvpImg.skin=i,this.mvpTxt.text=t,this.mvpTxt.fontSize=e},n.prototype.hideFlag=function(){this.mvpImg.visible=this.mvpTxt.visible=!1},t=n,e.BaseItem=t}(modules=modules||{}),function(t){var e,i,n,a,r,s;function o(){this._max=4,this._con=new n,this._con.mouseEnabled=!1,this._bg=new i("common/dt_tishi_2.png"),this._bg.sizeGrid="28,22,26,24",this._con.addChild(this._bg),this._bg.size(600,140),this._items=new Array,this._itemPool=new Array,this._usingBaseItems=new Array}e=t.notice||(t.notice={}),i=Laya.Image,n=Laya.Sprite,a=t.bag.BaseItem,r=utils.tween.TweenJS,o.prototype.addItem=function(t){this._items.push(t),this.check()},o.prototype.addItems=function(t){for(var e=0,i=t.length;e<i;e++)this._items.push(t[e]);this.check()},o.prototype.check=function(){this._isPlaying||this.tween()},o.prototype.tween=function(){for(var t,e=this._max>this._items.length?this._items.length:this._max,i=this._items.splice(0,e),n=610-110*e>>1,s=0,o=i.length;s<o;s++)(t=this._itemPool.shift()||new a).dataSource=i[s],this._con.addChild(t),t.pos(n+110*s,32,!0),this._usingBaseItems.push(t);LayerManager.instance.addToNoticeLayer(this._con),this._isPlaying=!0,this._con.pos(-600,CommonConfig.viewHeight-250,!0),r.create(this._con).to({x:.5*CommonConfig.viewWidth-300},200).chain(r.create(this._con).delay(400).to({x:CommonConfig.viewWidth},200).onComplete(this.completeHandler.bind(this))).start()},o.prototype.completeHandler=function(){this._con.removeSelf();for(var t=0,e=this._usingBaseItems;t<e.length;t++){var i=e[t];i.dataSource=null,i.removeSelf(),this._itemPool.length>=this._max?i.destroy(!0):this._itemPool.push(i)}(this._usingBaseItems.length=0)<this._items.length?this.tween():this._isPlaying=!1},s=o,e.ItemNoticeManager=s}(modules=modules||{}),function(C){var a,c,s,d,h,o,r,T,l,p,t;function u(){this._smeltColor=5,this._smeltStage=18,this._smeltStar=2,this.maxStage=13,this._stageInit=!1,this.oneKeySmelt=!1,this._quicklySmelt=!1,this._isUp=!1,this.noTipSources=[233,40,56,1,85,100,101,102,103,104,105,108,109,110,111,13,3,114,197,112,16,17,18,29,30,31,107,126,110,172,202,96,204,90,91,258,266,291,296,298,408,317,432],this.treasureSocreSource=[216,217,218,219,220,400,401,406],this._delayedItems=[],this._itemInfo=[],this._bagIdToUidItemsTab=[],this._bagIdToUidItemsArr=[],this._initedBagIds=[],this.jumpId=[]}a=C.bag||(C.bag={}),c=Laya.Dictionary,s=C.notice.DropNoticeManager,d=C.player.PlayerModel,h=C.config.BlendCfg,o=C.vip.VipModel,r=C.config.PrivilegeCfg,T=C.common.CommonUtil,l=C.config.ItemMaterialCfg,p=C.redPoint.RedPointCtrl,Object.defineProperty(u,"instance",{get:function(){return this._instance=this._instance||new u},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"smeltColor",{get:function(){return this._smeltColor},set:function(t){this._smeltColor=t,C.redPoint.RedPointCtrl.instance.setRPProperty("smeltRP",0<this.getSmeltRank().length)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"smeltStage",{get:function(){return this._smeltStage},set:function(t){this._smeltStage=t,C.redPoint.RedPointCtrl.instance.setRPProperty("smeltRP",0<this.getSmeltRank().length)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"smeltStar",{get:function(){return this._smeltStar},set:function(t){this._smeltStar=t,C.redPoint.RedPointCtrl.instance.setRPProperty("smeltRP",0<this.getSmeltRank().length)},enumerable:!0,configurable:!0}),u.prototype.addItemsByBagId=function(t,e){var i,n=this._bagIdToUidItemsTab[t];n||(n={},this._bagIdToUidItemsTab[t]=n);for(var s=0,o=e;s<o.length;s++){var a=o[s];n[a[2]]=a}this._bagIdToUidItemsTab[t]=n,this._bagIdToUidItemsArr[t]?(i=this._bagIdToUidItemsArr[t]).push.apply(i,e):this._bagIdToUidItemsArr[t]=e,this.equipMaxStage=0},u.prototype.getBagFinishReply=function(t){var e=!0;this._initedBagIds.push(t);for(var i=0;i<=10;i++)if(-1===this._initedBagIds.indexOf(i)){e=!1;break}e&&(this.bagInited=!0,GlobalData.dispatcher.event("BAG_DATA_GOT")),1==t&&(this.setSmeltRank(),C.redPoint.RedPointCtrl.instance.setRPProperty("smeltRP",0<this.getSmeltRank().length))},u.prototype.updateBag=function(t){for(var e=!1,i=t[0],n=0,s=i.length;n<s;n++){var o=i[n],a=o[0],r=this._bagIdToUidItemsTab[a];if(!r)return;for(var l=this._bagIdToUidItemsArr[a],h=o[1],c=0,p=h.length;c<p;c++){var u=h[c],d=u[1],m=u[0];switch(d){case 0:var f=m[0];if(r[(b=[f,m[1],m[2],m[3]])[2]]=b,l.push(b),1==a){var g=T.getPartById(f);10!=g&&9!=g&&this.checkEquipIsWorse(b)&&this.setSmeltRankItem(f,b)}GlobalData.dispatcher.event("BAG_ADD_ITEM",[b,o[2]]),this.enterBagTip(a,o[2],m);break;case 1:(b=r[m[2]])&&(b[1]+=m[1],this.enterBagTip(a,o[2],m),GlobalData.dispatcher.event("BAG_ADD_ITEM",[b,o[2]]));break;case 2:var y=m[2];if(r[y]){for(var _=l.length-1;0<=_;_--)if(l[_][2]===y){l.splice(_,1);break}delete r[y],GlobalData.dispatcher.event("BAG_REMOVE_ITEM",[y])}if(1==a){var v=(.001*m[0]>>0)%1e4,I=this._smeltRankItems[v];I&&delete I[m[2]]}break;case 3:var b;(b=this.getItemByBagIdUid(a,m[2]))[1]-=m[1],GlobalData.dispatcher.event("BAG_REMOVE_ITEM",[m[2]])}1===a&&(e=!0)}e&&(this.setSmeltRank(),C.redPoint.RedPointCtrl.instance.setRPProperty("smeltRP",0<this.getSmeltRank().length)),GlobalData.dispatcher.event("BAG_UPDATE",a)}},u.prototype.setSmeltRankItem=function(t,e){var i=T.extractIdSegment(t,4,4),n=i/100|0;this.equipMaxStage<n&&(this.equipMaxStage=n,!this._smeltStage&&this.smeltStage<this.equipMaxStage&&(this.smeltStage=this.equipMaxStage));var s=this._smeltRankItems[i];(s=s||{})[e[2]]=e,this._smeltRankItems[i]=s},u.prototype.initSmeltInfo=function(t,e){this.smeltLevel=t,this.smeltExp=e,GlobalData.dispatcher.event("SMELT_UPDATE"),this._itemInfo.length=0},u.prototype.updateSmeltInfo=function(t){if(this.smeltLevel!=t[1]&&(this._isUp=!0),this.smeltLevel=t[1],this.smeltExp=t[2],GlobalData.dispatcher.event("SMELT_UPDATE"),this._quicklySmelt)this._quicklySmelt=!1;else for(var e=0;e<t[6].length;e++){for(var i=!1,n=0,s=this._itemInfo.length;n<s;n++)if(t[6][e][0]===this._itemInfo[n][0]){this._itemInfo[n][1]+=t[6][e][1],i=!0;break}i||this._itemInfo.push([t[6][e][0],t[6][e][1],0,null])}},u.prototype.showGetAlert=function(){this.oneKeySmelt||this._itemInfo&&0<this._itemInfo.length&&(WindowManager.instance.openDialog(76,[this._itemInfo,"熔炼成功"]),C.bag.BagCtrl.instance.showSmelt_upgrade_alert(1))},u.prototype.setMaxStage=function(t){if(!this._stageInit){this._stageInit=!0;var e=h.instance.getCfgById(10005)[2];this._stageTable={};for(var i=0;i<e.length;i++){e[i]=e[i].replace("[",""),e[i]=e[i].replace("]","");var n=e[i].split("#");if(3==n.length){var s=parseInt(n[0]),o=this._stageTable[s];(o=o||{})[parseInt(n[1])]=parseInt(n[2]),this._stageTable[s]=o}}}var a=Math.floor(.01*t),r=t%100,l=this._stageTable[a];l[r]!=this.maxStage&&(this.maxStage=l[r]),this._smeltStage||(this.equipMaxStage>this.maxStage?this.smeltStage=this.equipMaxStage:this.smeltStage=this.maxStage)},u.prototype.cantWearBestEquip=function(){var t=this._bagIdToUidItemsArr[1];if(t){for(var e=t,i={},n=0;n<e.length;n++){var s=e[n][0],o=T.getPartById(s);if(10!=o&&9!=o){var a=C.config.ItemEquipCfg.instance.getItemCfgById(s),r=a[4],l=a[3],h=Math.floor(1e-5*s)%100;if(r>d.instance.level||l>d.instance.eraLevel)if(i[o]){var c=e[n][3][6];(i[o][h]?i[o][h][3][6]:0)<c&&(i[o][h]=e[n])}else i[o]=[],i[o][h]=e[n]}}var p=[];for(var u in i)for(n=0;n<i[u].length;n++)i[u][n]&&p.push(i[u][n][2]);return p}},u.prototype.canWearBestEquip=function(){var t=this._bagIdToUidItemsArr[1];if(t){for(var e=t,i={},n=0;n<e.length;n++){var s=e[n][0],o=T.getPartById(s);if(10!=o&&9!=o&&!this.checkEquipIsWorse(e[n])){var a=C.config.ItemEquipCfg.instance.getItemCfgById(s),r=a[4],l=a[3];if(r<=d.instance.level&&l<=d.instance.eraLevel){var h=e[n][3][6];(i[o]?i[o][3][6]:d.instance.getEquipByPart(o)?d.instance.getEquipByPart(o)[3][6]:0)<h&&(i[o]=e[n])}}}var c=[];for(var p in i)i[p]&&c.push(i[p][2]);return c}},u.prototype.setSmeltRank=function(){var t=this._bagIdToUidItemsArr[1];if(t){this._smeltRankItems={};for(var e=this.cantWearBestEquip(),i=this.canWearBestEquip(),n=0;n<t.length;n++){var s=t[n],o=s[0],a=T.getPartById(o);if(10!=a&&9!=a){var r=s[2];-1===e.indexOf(r)&&-1===i.indexOf(r)&&this.setSmeltRankItem(o,s)}}}},Object.defineProperty(u.prototype,"smeltRankItems",{get:function(){return this._smeltRankItems},enumerable:!0,configurable:!0}),u.prototype.getSmeltRank=function(){for(var t=[],e=this.smeltStage;0<e;e--)for(var i=this.smeltColor;0<i;i--)for(var n=this.smeltStar;0<n;n--){var s=100*e+10*i+n,o=this._smeltRankItems?this._smeltRankItems[s]:null;if(o)for(var a in o)t.push(o[a])}return t},u.prototype.quicklyOneKeySmelt=function(){this.setSmeltRank();for(var t=this.getSmeltRank(),e=new Array,i=0;i<t.length;i++)e.push(t[i][2]);this._quicklySmelt=!0,0!=e.length?a.BagCtrl.instance.oneKeySmelt(e):T.noticeError(18002)},u.prototype.getItemsByBagId=function(t){return this._bagIdToUidItemsArr[t]||[]},u.prototype.getItemByBagIdUid=function(t,e){var i=this._bagIdToUidItemsTab[t];return i?i[e]:null},u.prototype.getItemByIdUid=function(t,e){var i=T.getBagIdById(t);return this.getItemByBagIdUid(i,e)},u.prototype.getItemCountById=function(t){if(!this.bagInited)return 0;for(var e=this.getItemsByBagId(T.getBagIdById(t)),i=0,n=0,s=e.length;n<s;n++)e[n][0]===t&&(i+=e[n][1]);return i},u.prototype.getItemsById=function(t){for(var e=this.getItemsByBagId(T.getBagIdById(t)),i=[],n=0,s=e.length;n<s;n++)e[n][0]===t&&i.push(e[n]);return i},u.prototype.getBestEquipDic=function(){for(var t=u.instance.getItemsByBagId(1),e=new c,i=0,n=t.length;i<n;i++){var s=t[i],o=d.instance.eraLevel,a=d.instance.level,r=T.getItemCfgById(s[0]);if(!(o<r[3]||a<r[4])){var l=T.getPartById(s[0]),h=e.get(l);(!(h=h||d.instance.getEquipByPart(l))||s[3][6]>h[3][6])&&e.set(l,s)}}return e},u.prototype.checkEquipIsWorse=function(t){var e=T.getPartById(t[0]),i=d.instance.getEquipByPart(e);return!(!i||t[3][6]>i[3][6])},u.prototype.getBagEnoughById=function(t){var e=0,i=o.instance.vipLevel;if(0===t){var n=r.instance.getVipInfoByLevel(i,3);e=h.instance.getCfgById(10001)[1][0],n&&(e+=n[1])}else 1===t?(n=r.instance.getVipInfoByLevel(i,2),e=h.instance.getCfgById(10002)[1][0],n&&(e+=n[1])):2===t?e=h.instance.getCfgById(10003)[1][0]:3===t?e=h.instance.getCfgById(10004)[1][0]:5===t?e=h.instance.getCfgById(10008)[1][0]:6===t?e=h.instance.getCfgById(10006)[1][0]:7===t?e=h.instance.getCfgById(10010)[1][0]:8===t?e=h.instance.getCfgById(10012)[1][0]:15===t&&(e=h.instance.getCfgById(10019)[1][0]);var s=u.instance.getItemsByBagId(t);return e-(s?s.length:0)},u.prototype.enterBagTip=function(t,e,i,n){void 0===n&&(n=!1),60!=e||n?135==e&&!n||81==e&&!n||146==e&&!n||151==e&&!n||174==e&&!n||199==e&&!n||288==e&&!n?this._delayedItems.push([t,e,i]):408!=e||n?-1===this.noTipSources.indexOf(e)&&(2===e?0===LayerManager.instance.getLayerById(4).numChildren&&s.instance.addItem(i,e):4!=t&&6!=t&&(22===C.scene.SceneUtil.currScene?C.kunlun.KunLunModel.instance.addItems([i],e):s.instance.addItem(i,e))):C.ruins.RuinsModel.instance.auto&&this._delayedItems.push([t,e,i]):this._delayedItems.push([t,e,i])},u.prototype.delayedPutInBag=function(){for(var t=0,e=this._delayedItems.length;t<e;t++){var i=this._delayedItems[t][0],n=this._delayedItems[t][1],s=this._delayedItems[t][2];this.enterBagTip(i,n,s,!0)}u.instance._delayedItems.length=0},u.prototype.delayedButNoPutInBag=function(){u.instance._delayedItems.length=0},u.prototype.checkRP=function(){var t=this.getItemsByBagId(0);if(t){var e=!1;if(t)for(var i=0,n=t.length;i<n;i++){var s=l.instance.getItemCfgById(t[i][0]);if(s&&s[5]&&d.instance.level>=s[2]&&o.instance.vipLevel>=s[3]){e=!0;break}}p.instance.setRPProperty("bagRP",e)}},u.prototype.getRunesByDimId=function(t){for(var e=[],i=0,n=this._bagIdToUidItemsArr[5].length;i<n;i++)1e4*(1e-4*this._bagIdToUidItemsArr[5][i][0]>>0)===t&&e.push(this._bagIdToUidItemsArr[5][i]);return e},u.prototype.setListBagItemType=function(t,e){var i=t._childs;if(i&&0<i.length)for(var n=0,s=i.length;n<s;n++){var o=i[n]._childs;i[n]instanceof a.BagItem?i[n].type=e:o&&0<i.length&&this.setListBagItemType(i[n],e)}},t=u,a.BagModel=t}(modules=modules||{}),function(t){var e,r,i;function n(){this.init()}e=t.config||(t.config={}),r=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._lvDic=new r,this._sqDic=new r,this._riseDic=new r,this._maxLvDic=new r,this._talismanCfgs=new Array,this._talismanLvCfgs=new Array,this._talismanIdCfgs=new Array;var t=GlobalData.getConfig("amulet_refine");this.maxLv=t[t.length-1][2];for(var e=0,i=t.length;e<i;e++){var n=(a=t[e])[1],s=a[2];this._talismanIdCfgs[e]=a[0],this._maxLvDic.set(a[0],s),0==s&&(null==this._talismanCfgs[n]?this._talismanCfgs[n]=[a]:this._talismanCfgs[n].push(a)),null==this._talismanLvCfgs[s]?this._talismanLvCfgs[s]=[a]:this._talismanLvCfgs[s].push(a)}for(e=0;e<this._talismanCfgs.length;e++)this._sqDic.set(e,this._talismanCfgs[e]);for(e=0;e<this._talismanLvCfgs.length;e++)this._lvDic.set(e,this._talismanLvCfgs[e]);var o=GlobalData.getConfig("amulet_rise");for(e=0,i=o.length;e<i;e++){var a=o[e];this._riseDic.set(a[0],a)}},n.prototype.getRiseCfgByLevel=function(t){return this._riseDic.get(t)},n.prototype.getCfgByQuality=function(t){return this._sqDic.get(t)},n.prototype.getCfgByIdLevel=function(t,e){var i,n=this._lvDic.get(e);if(null!=n)for(var s=0;s<n.length;s++){var o=n[s];o[0]==t&&(i=o)}return i||null},n.prototype.getMaxLvById=function(t){return this._maxLvDic.get(t)},i=n,e.TalismanCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._typeCfgs=[[],[],[]],this._chatFaceNames=[[],[],[]],this._imgs=[[],[],[]];for(var t=GlobalData.getConfig("chat_expression"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[0],o=(.001*s>>0)-1;this._typeCfgs[o].push(n),this._chatFaceNames[o].push(n[1]),this._imgs[o].push('<img src="assets/icon/expression/'+s+'.png" width="40" height="36"/>')}},n.prototype.getFaceCfgsByType=function(t){return this._typeCfgs[t]},n.prototype.getFaceNamesByType=function(t){return this._chatFaceNames[t]},n.prototype.getFaceImgsByType=function(t){return this._imgs[t]},i=n,e.ChatFaceCfg=i}(modules=modules||{}),function(l){var t,e,r,n,s,i;function o(){this.sendVipPkgcnt=0,this._unlockLv=e.instance.getCfgById(26001)[1],this.maxExpertFaceTime=e.instance.getCfgById(26002)[1][0],this.maxCacheMessageNum=e.instance.getCfgById(26005)[1],this._chatCDTime=e.instance.getCfgById(26006)[1],this.minSendVipFaceLv=e.instance.getCfgById(26003)[1][0],this.chatLimitConditions=e.instance.getCfgById(26018)[1],this.chatUnlimitedVipLv=e.instance.getCfgById(26019)[1][0],this.showIds=e.instance.getCfgById(99001)[1],this.chatFacePKgMax=e.instance.getCfgById(26026)[1][0],this.chatVipPkg=e.instance.getCfgById(26027)[1][0],this.chatSpanTm=e.instance.getCfgById(26028)[1][0],this.sendVipFaceTime=0,this.blackList=[],this.jiuzhouChatRecord=[],this.benfuChatRecord=[],this.systemChatRecord=[],this.factionChatRecord=[],this.warbandChatRecord=[],this.marryChatRecord=[],this._currChatChannel=1,this.virtualItem=[0,0,0,[null,null,null,null,[0,null],0,0,0,0]],this.checkedFace=[],this.blackListOpt=-1,this._noSeeMessage={},this.chatSpanBeginTm={},this._reg=/#b\d\d\d/gi}t=l.chat||(l.chat={}),e=l.config.BlendCfg,r=l.config.ChatFaceCfg,n=utils.StringUtils,s=l.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setNoseeMessage=function(t,e){var i;5===t&&(i="marryMessageRP"),i?s.instance.setRPProperty(i,e):this._noSeeMessage[t]=e},o.prototype.getNoseeMessage=function(t){return 5===t?s.instance.getRPProperty("marryMessageRP"):this._noSeeMessage[t]},o.prototype.updateChat=function(t,e){void 0===e&&(e=!1);var i=t[0][1][0],n=t[0][1][1];if((9===n||7===n||8===n)&&!l.redBag.RedBagUtils.getActionopen())return!1;if(3==i)this.systemChatRecord.push(t[0]),this.isDeleteMessage(this.systemChatRecord,3),GlobalData.dispatcher.event("SYSTEM_MESSAGE_UPDATE");else if(1==i){if((a=t[0][0])&&a[0]!=PlayerModel.instance.actorId&&4!=t[0][1][1]&&5!=t[0][1][1]&&7!=t[0][1][1]&&8!=t[0][1][1]&&a[5]<this.chatUnlimitedVipLv&&0<=(r=a[15]))for(var s=PlayerModel.instance.bornLev,o=0;o<this.chatLimitConditions.length;o+=4)if(r>=this.chatLimitConditions[o]&&r<this.chatLimitConditions[o+1]&&(s<this.chatLimitConditions[o+2]||s>=this.chatLimitConditions[o+3]))return!1;this.jiuzhouChatRecord.push(t[0]),this.isDeleteMessage(this.jiuzhouChatRecord,1),GlobalData.dispatcher.event("JIUZHOU_MESSAGE_UPDATE")}else if(2==i){var a,r;if((a=t[0][0])&&a[0]!=PlayerModel.instance.actorId&&4!=t[0][1][1]&&5!=t[0][1][1]&&7!=t[0][1][1]&&8!=t[0][1][1]&&a[5]<this.chatUnlimitedVipLv&&0<=(r=a[15]))for(s=PlayerModel.instance.bornLev,o=0;o<this.chatLimitConditions.length;o+=4)if(r>=this.chatLimitConditions[o]&&r<this.chatLimitConditions[o+1]&&(s<this.chatLimitConditions[o+2]||s>=this.chatLimitConditions[o+3]))return!1;this.benfuChatRecord.push(t[0]),this.isDeleteMessage(this.benfuChatRecord,2),GlobalData.dispatcher.event("BENFU_MESSAGE_UPDATE")}else 4==i?(this.factionChatRecord.push(t[0]),this.isDeleteMessage(this.factionChatRecord,4),l.faction.FactionModel.instance.hasFaction&&!e&&this._currChatChannel!=i&&this.setNoseeMessage(i,!0),GlobalData.dispatcher.event("FACTION_MESSAGE_UPDATE")):5==i?(this.marryChatRecord.push(t[0]),this.isDeleteMessage(this.marryChatRecord,5),l.marry.MarryModel.instance.isMarried&&!e&&this._currChatChannel!=i&&this.setNoseeMessage(i,!0),GlobalData.dispatcher.event("MARRY_MESSAGE_UPDATE")):6==i&&(this.warbandChatRecord.push(t[0]),this.isDeleteMessage(this.warbandChatRecord,6),l.warband.WarbandModel.instance.info&&!e&&this._currChatChannel!=i&&this.setNoseeMessage(i,!0),GlobalData.dispatcher.event("WARBAND_MESSAGE_UPDATE"));return GlobalData.dispatcher.event("CHAT_UPDATE"),!0},o.prototype.isDeleteMessage=function(t,e){if(!this.maxCacheMessageNum[e])throw new Error("blend 26005 type->"+e+"类型未配置!");t.length>this.maxCacheMessageNum[e]&&t.shift()},o.prototype.updateBlackList=function(t){this.blackList=t[0],GlobalData.dispatcher.event("CHAT_BLACK_LIST_UPDATE")},o.prototype.initOtherPlayerInfo=function(t){this.otherPlayerInfo=t[0],this.chatPlayerCenterInfo=t[1],this.chatPlayerCrossInfo=t[2],GlobalData.dispatcher.event("OTHER_PLAYER_INFO")},o.prototype.initChatInfoByType=function(t){3==t?this.systemChatRecord.length=0:1==t?this.jiuzhouChatRecord.length=0:2==t&&(this.benfuChatRecord.length=0)},Object.defineProperty(o.prototype,"currChatChannel",{get:function(){return this._currChatChannel},set:function(t){this._currChatChannel=t,this.setNoseeMessage(this._currChatChannel,!1)},enumerable:!0,configurable:!0}),o.prototype.getUnlockLv=function(t){return this._unlockLv[t]},o.prototype.getChatCDTime=function(t){return this._chatCDTime[t]},o.prototype.isValidContent=function(t){for(var e=0,i=t;e<i.length;e++)if(" "!=i[e])return n.isValidWords(t);return!1},o.prototype.wordReplace=function(t){return n.replaceFilterWords(t,"*")},o.prototype.chatFaceformatStr=function(t){var e=t.match(this._reg);if(e&&0<e.length)for(var i=r.instance.getFaceNamesByType(0),n=r.instance.getFaceImgsByType(0),s=0,o=e.length;s<o;s++){var a=i.indexOf(e[s]);-1!=a&&(t=t.replace(i[a],n[a]))}return t},o.prototype.setFaceEffFrame=function(t,e){t.skin="assets/effect/chat_face/"+e+".atlas";for(var i=[],n=1;n<=8;n++)i.push(e+"/000"+n+".png");t.frameUrls=i},o.prototype.UpdateChatBan=function(t){for(var e=t[0],i=[this.jiuzhouChatRecord,this.benfuChatRecord,this.factionChatRecord,this.warbandChatRecord],n=["JIUZHOU_MESSAGE_UPDATE","BENFU_MESSAGE_UPDATE","FACTION_MESSAGE_UPDATE","WARBAND_MESSAGE_UPDATE"],s=0,o=0;o<i.length;++o){for(var a=s,r=i[o].length;0<r;--r){var l=i[o][r-1][0]?i[o][r-1][0][0]:0;l!=PlayerModel.instance.actorId&&l===e&&(i[o].splice(r-1,1),++s)}a<s&&GlobalData.dispatcher.event(n[o])}0<s&&GlobalData.dispatcher.event("CHAT_UPDATE")},o.prototype.getChanneByChatRecord=function(t){switch(t){case 1:return this.jiuzhouChatRecord;case 2:return this.benfuChatRecord;case 4:return this.factionChatRecord;case 5:return this.marryChatRecord;case 6:return this.warbandChatRecord;case 3:return this.systemChatRecord}return[]},Object.defineProperty(o.prototype,"fantianEquip",{get:function(){var t=o.instance.otherPlayerInfo;return t?t[40]:null},enumerable:!0,configurable:!0}),o.prototype.setChatSpanBeginTm=function(t){var e=this.getChanneByChatRecord(t),i=e.length;if(!this.chatSpanBeginTm[t]&&0<i){var n=e[i-1][1];this.chatSpanBeginTm[t]=n[8]}},o.prototype.chatItemIsShowTm=function(t){if(!t)return!1;var e=t[1][0],i=this.getChanneByChatRecord(e);if(0===i.indexOf(t))return!0;for(var n=i[0][1][8],s=this.chatSpanBeginTm[e],o=1,a=i.length;o<a;o++){var r=i[o][1][8];if(r){var l=r-s;if(l>=this.chatSpanTm){if(s=r,i[o]===t&&!CommonUtil.getTmMQuality(n,r))return!0}else if(l<0)return!1}}return!1},i=o,t.ChatModel=i}(modules=modules||{}),function(l){var p,h,c,u,d,m,f,a,t;function e(){}p=l.bag||(l.bag={}),h=l.player.PlayerModel,c=l.config.ItemMaterialCfg,u=l.notice.SystemNoticeManager,d=laya.utils.Handler,m=l.config.BlendCfg,f=l.common.CommonUtil,a=l.chat.ChatModel,e.openBagItemTip=function(t,e){if(t&&!this.boolSpecialProperty(t)){var i=t[0];if(-1==l.brahma_equip.BrahmaEquipModel.instance.showIDs.indexOf(i))switch(f.getItemTypeById(i)){case 1:case 2:case 3:case 9:case 4:case 7:case 6:if(0===t[2])WindowManager.instance.openDialog(16,t);else{var n=4===f.getItemTypeById(i),s=7===f.getItemTypeById(i),o=null!=p.BagModel.instance.getItemByBagIdUid(11,t[2]);n||s||o?WindowManager.instance.openDialog(16,t):c.instance.getItemCfgById(i)[11]?WindowManager.instance.openDialog(15,[t,!1]):WindowManager.instance.openDialog(16,t)}break;case 5:t[3]?(r=h.instance.getEquipByPart(f.getPartById(i)))&&r===t?WindowManager.instance.openDialog(17,t):p.BagModel.instance.getItemByBagIdUid(1,t[2])?WindowManager.instance.openDialog(18,t):0===t[2]&&WindowManager.instance.openDialog(85,t):WindowManager.instance.openDialog(85,t);break;case 8:var a=i/1e5>>0;if(817<=a&&a<=822)(r=l.showEquip.ShowEquipModel.instance.getEquipById(i))&&r===t?WindowManager.instance.openDialog(17,t):p.BagModel.instance.getItemByBagIdUid(13,t[2])?WindowManager.instance.openDialog(18,t):0===t[2]&&WindowManager.instance.openDialog(85,t);else if(!t[3]&&a<807)WindowManager.instance.openDialog(85,t);else if(830==a)e?WindowManager.instance.openDialog(e,t):WindowManager.instance.openDialog(1485,t);else if(801==a&&(l.beast_equipment.BeastEquipmentModel.instance.getIsEquipment(t)?WindowManager.instance.openDialog(521,t):p.BagModel.instance.getItemByBagIdUid(8,t[2])?WindowManager.instance.openDialog(18,t):0===t[2]&&WindowManager.instance.openDialog(85,t)),l.divinatory_card.DivinatoryUtil.isDivinatoryEquip(a))WindowManager.instance.openDialog(1162,[t,null]);else if(807<=a)WindowManager.instance.openDialog(16,t);else{var r;!(r=l.yuanShen.YuanShenModel.instance.getEquipByTypePart(l.yuanShen.YuanShenUtil.getTypeById(i),f.getPartById(i)))||r!==t&&r[2]!==t[2]?p.BagModel.instance.getItemByBagIdUid(9,t[2])?WindowManager.instance.openDialog(18,t):0===t[2]&&WindowManager.instance.openDialog(85,t):WindowManager.instance.openDialog(521,r)}}}},e.boolSpecialProperty=function(t){var e=!1,i=a.instance.otherPlayerInfo,n=void 0,s=0;if(9999==t[2]){var o=!(e=!0);switch(t[0]){case 13250004:o=!0,!(n=i[33])||n.length<=0||!n[0]?u.instance.addNotice("该装备未激活",!0):(s=389,WindowManager.instance.open(s,n));break;case 13250002:o=!0,null==(n=i[32])||-1==n?u.instance.addNotice("该装备未激活",!0):(s=380,WindowManager.instance.open(s,n));break;case 13250003:o=!0,null==(n=i[31])||-1==n?u.instance.addNotice("该装备未激活",!0):(s=378,WindowManager.instance.open(s,n))}this.getRingNameAndId(i)&&!o&&(!(n=i[34])||n.length<=0||!n[0]||n[0].length<=0?u.instance.addNotice("该装备未激活",!0):(s=515,WindowManager.instance.open(s,[n,i[36]])),o=!0),o||u.instance.addNotice("该装备未激活",!0)}return e},e.getRingNameAndId=function(t){var e=m.instance.getCfgById(75010),i=t[34][0].sort(),n=i.length;if(0<n){var s=e[1][i[n-1]-1]||12950001;return c.instance.getItemCfgById(s)}},e.openLackPropAlert=function(t,e,i){var n=f.getItemCfgById(t),s=4===f.getItemTypeById(t),o=!1,a=n[s?6:10],r=t/1e5>>0;823<=r&&r<=829?a=n[15]:830==r&&(a=n[12]);var l=!1;void 0!==i&&(l=i),(n[s?7:12]||0<a.length)&&(o=!0),o?WindowManager.instance.openDialog(106,[t,e,l]):u.instance.addNotice(n[1]+"道具不足",!0)},e.canAddItemsByBagIdCount=function(t,e){void 0===e&&(e=!1);for(var i=0,n=0,s=0,o=0;o<t.length;o++){var a=t[o][0];if(!f.isCion(a)){var r=f.getBagIdById(a);1==r?i++:0==r?n++:5===r&&s++}}if(0<i){var l;if((l=p.BagModel.instance.getBagEnoughById(1))<=m.instance.getCfgById(10007)[1][0]){var h=p.BagModel.instance.getSmeltRank();if(h&&0<h.length){var c=d.create(p.BagModel.instance,p.BagModel.instance.quicklyOneKeySmelt);f.alert("温馨提示","装备背包格子不足，是否一键熔炼",[c])}return!1}if(l<i)return f.noticeError(12002),!1}return(0<n||e)&&((l=p.BagModel.instance.getBagEnoughById(0))<n||e&&0===l)?(u.instance.addNotice("道具背包已满，请先整理",!0),!1):!(0<s||e)||!((l=p.BagModel.instance.getBagEnoughById(5))<s||e&&0===l)||(u.instance.addNotice("符文背包已满，请先整理",!0),!1)},e.checkNeedSmeltTip=function(){var t=!1;if(p.BagModel.instance.getBagEnoughById(1)<=m.instance.getCfgById(10007)[1][0]){var e=p.BagModel.instance.getSmeltRank();if(e&&0<e.length){t=!0;var i=d.create(p.BagModel.instance,p.BagModel.instance.quicklyOneKeySmelt);f.alert("温馨提示","装备背包格子不足，是否一键熔炼",[i])}else e&&0==e.length&&(f.alert("温馨提示"," 装备背包格子不足，是否前往分解装备",[d.create(this,function(){WindowManager.instance.open(413,1)})]),t=!0)}return t},e.checkIsManualGift=function(t){return Math.floor(1e-5*t)%100==99},e.checkIsTichet=function(t){return 1e-4*t>>0==2073},t=e,p.BagUtil=t}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.magicArt||(t.magicArt={}),n=t.core.BaseCtrl,s=t.common.CommonUtil,o=t.config.SkillPureCfg,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16778116,this.getSkillsReply),this.subscribe(16778117,this.updateSkill),this.subscribe(16778118,this.addSkill),this.subscribe(16778120,this.addSkillLevelReply),this.subscribe(16778121,this.addSkillLevelOfAllReply),this.onGlobal("PLAYER_UPDATE_ZQ",this.redPointControl),this.onGlobal("FUNC_OPEN_UPDATE",this.openFunc),this.onGlobal("UPDATE_AMULET_INFO_REPLAY",this.setMaxLevel),this.getActorSkillInfo()},r.prototype.getActorSkillInfo=function(){this.publish(2097852,null)},r.prototype.setMaxLevel=function(){e.MagicArtModel.instance.updateMaxLevel()},r.prototype.redPointControl=function(){e.MagicArtModel.instance.checkHaveRedPoint()},r.prototype.openFunc=function(t){if(t&&0<t.length)for(var e=0;e<t.length;e++)11==t[e]&&this.redPointControl()},r.prototype.getSkillsReply=function(t){e.MagicArtModel.instance.dataInit(t),this.redPointControl()},r.prototype.updateSkill=function(t){e.MagicArtModel.instance.updateSkill(t),this.redPointControl()},r.prototype.addSkill=function(t){var e=o.instance.getCfgById(t[0]);e&&(999===e[8]||5===e[8])||WindowManager.instance.open(44,t[0])},r.prototype.addSkillLevelReply=function(t){var e=t[0];0!==e&&12803!=e&&s.noticeError(e)},r.prototype.addSkillLevelOfAllReply=function(t){var e=t[0];0!==e&&12803!==e&&s.noticeError(e)},r.prototype.addSkillLevel=function(t){this.publish(2097853,[t])},r.prototype.addSkillLevelOfAll=function(){this.publish(2097854,null)},a=r,e.MagicArtCtrl=a}(modules=modules||{}),function(t){var e,i,u,d,m,n,s;function r(){this._mwIdToUidItems=new i,this._itemId=0,this._dotVisible=!1,this._btnRedDotArr=[!1,!1,!1,!1],this._amuletRefineQualityArray=new Array;for(var t=0;t<4;t++){var e=new Array;e=u.instance.getCfgByQuality(t+2),this._amuletRefineQualityArray[t]=e}this._upLevaeRp=!1}e=t.talisman||(t.talisman={}),i=Laya.Dictionary,u=t.config.TalismanCfg,d=t.bag.BagModel,m=t.redPoint.RedPointCtrl,n=t.magicArt.MagicArtCtrl,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.updateTalisman=function(){for(var t=0;t<this._amuletRefineQualityArray.length;t++){var e=new Array;e=this._amuletRefineQualityArray[t];for(var i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[2],a=r.instance.GetAmuletById(s);null!=a&&(o=a[1]),e[i]=u.instance.getCfgByIdLevel(s,o)}}},r.prototype.setDotDis=function(){this.updateTalisman();for(var t=[],e=0;e<this._amuletRefineQualityArray.length;e++){var i=new Array;i=this._amuletRefineQualityArray[e];for(var n=0;n<i.length;n++){var s=i[n],o=s[0],a=s[2],r=d.instance.getItemCountById(o)+d.instance.getItemCountById(s[4]),l=d.instance.getItemCountById(o),h=s[3][1];if(1<=r/h&&1<=a&&a!=u.instance.getMaxLvById(o)&&l<h?t[e]=!0:t[e]=!1,1<=r/h&&a!=u.instance.getMaxLvById(o)){this._btnRedDotArr[e]=!0;break}this._btnRedDotArr[e]=!1}}t[2]?this._upLevaeRp=!0:this._upLevaeRp=!1,GlobalData.dispatcher.event("REFINE_UPLEVEL");for(var c=0,p=0;p<this._btnRedDotArr.length;p++)0==this._btnRedDotArr[p]&&c++;m.instance.setRPProperty("talismanRP",c<this._btnRedDotArr.length)},r.prototype.getAmuletRefineQualityArray=function(t){return this._amuletRefineQualityArray[t]},r.prototype.getRedDot=function(){return this._btnRedDotArr},r.prototype.GetAmuletById=function(t){return this._mwIdToUidItems.get(t)},r.prototype.getAmuletRefine=function(){return this.refine},r.prototype.getAmuletRise=function(){return this.rise},Object.defineProperty(r.prototype,"UpdateAmuletInfoReply",{set:function(t){this.refine=t[0],this.rise=t[1],this._amuletInfoArray=this.refine[0];for(var e=0;e<this._amuletInfoArray.length;e++)this._mwIdToUidItems.set(this._amuletInfoArray[e][0],this._amuletInfoArray[e]);this.setDotDis(),GlobalData.dispatcher.event("UPDATE_AMULET_INFO_REPLAY")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"GetAmuletInfoReply",{set:function(t){this.refine=t[0],this.rise=t[1],this._amuletInfoArray=this.refine[0];for(var e=0;e<this._amuletInfoArray.length;e++)this._mwIdToUidItems.set(this._amuletInfoArray[e][0],this._amuletInfoArray[e]);this.setDotDis(),n.instance.setMaxLevel(),GlobalData.dispatcher.event("GET_AMULET_INFO_REPLAY")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"RefineAmuletReplay",{get:function(){return this._refineAmuletReplay},set:function(t){this._refineAmuletReplay=t,GlobalData.dispatcher.event("REFINE_AMULET_REPLAY")},enumerable:!0,configurable:!0}),r.prototype.getlVById=function(t){var e=0,i=r.instance.GetAmuletById(t);return null!=i&&(e=i[1]),e},s=r,e.TalismanModel=s}(modules=modules||{}),function(t){var e,o,r,a,l,i,n,h,s;function c(){this.hasLevelUp=[!1,!1,!1,!1,!1,!1,!1,!1]}e=t.magicArt||(t.magicArt={}),o=t.config.SkillCfg,r=t.player.PlayerModel,a=t.funcOpen.FuncOpenModel,l=t.redPoint.RedPointCtrl,i=t.talisman.TalismanModel,n=t.config.AmuletRiseCfg,h=t.config.SkillPureCfg,Object.defineProperty(c,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),c.prototype.dataInit=function(t){this.knowledgeSkill=[],this._fighting=t[0];var e=t[1];this._skills=e;for(var i=0,n=(r.instance.skills=e).length;i<n;i++){var s=e[i],o=h.instance.getCfgById(s[0]);o&&4===o[8]&&(this.knowledgeSkill[s[0]%1e3-1]=s)}this.checkHaveRedPoint(),GlobalData.dispatcher.event("SKILL_INITED")},c.prototype.updateSkill=function(t){this._fighting=t[0];for(var e=t[1],i=0,n=(this._skills=e).length;i<n;i++){var s=e[i],o=h.instance.getCfgById(s[0]);if(this.knowledgeSkill&&o&&4===o[8]){var a=s[0]%1e3-1;this.knowledgeSkill[a]&&this.knowledgeSkill[a][1]<s[1]&&(this.hasLevelUp[a]=!0),this.knowledgeSkill[a]=s}}r.instance.skills=e,this.checkHaveRedPoint(),GlobalData.dispatcher.event("SKILL_UPDATE")},c.prototype.updateMaxLevel=function(){var t=i.instance.getAmuletRise()[0];this.maxLevel=n.instance.getCfgBylevel(t)[2],this.checkHaveRedPoint()},c.prototype.checkHaveRedPoint=function(){if(r.instance.playerBaseAttr&&this.knowledgeSkill){var t=!1;if(a.instance.getFuncIsOpen(11))for(var e=h.instance.knowledgeArr,i=0,n=e.length;i<n;i++)if(this.knowledgeSkill[i]){var s=this.knowledgeSkill[i][1];if(s<this.maxLevel&&o.instance.getCfgById(1e4*e[i][0]+s)[4]<=r.instance.playerBaseAttr[9]){t=!0;break}}l.instance.setRPProperty("magicArtRP",t)}},c.prototype.checkHasSkill=function(t){if(!this._skills)return!1;for(var e=0,i=this._skills.length;e<i;e++)if(this._skills[e][0]===t)return!0;return!1},c.prototype.getSkillById=function(t){if(!this._skills)return null;for(var e=0,i=this._skills.length;e<i;e++)if(this._skills[e][0]===t)return this._skills[e];return null},c._instance=new c,s=c,e.MagicArtModel=s}(modules=modules||{}),function(t){var i,e,n;function s(){this._locks=new e}i=t.loading||(t.loading={}),e=utils.collections.Set,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.showLoading=function(t,e){void 0===e&&(e=0),this._locks.add(t),0===e?(this._blackLoading||(this._blackLoading=new i.LoadingBlackPanel),LayerManager.instance.addToLoadingLayer(this._blackLoading)):1===e&&(this._whiteLoading||(this._whiteLoading=new i.LoadingWhitePanel),LayerManager.instance.addToLoadingLayer(this._whiteLoading))},s.prototype.hideLoading=function(t,e){void 0===e&&(e=0),this._locks.del(t),this._locks.isEmpty()&&(0===e&&this._blackLoading&&this._blackLoading.removeSelf(),1===e&&this._whiteLoading&&this._whiteLoading.removeSelf())},n=s,i.LoadingCtrl=n}(modules=modules||{}),function(r){var l,e,h,c,p,u,d,a,m,i,n,s,t;function o(){this._disposeDelay=3e5,this._limit=5,this._ignoreWin=[354,350,352,982,1137,1534,1535,1536,1537,1538,1539,1540,1541],this.closeIDS=[111,118,377,378,379,380,367,368],this._panelDic=new e,this._dialogDic=new e,this._openTable={},Laya.timer.loop(1e3,this,this.loopHandler);var t=new m([-1]);this._cache={"res/atlas/common.atlas":t,"res/atlas/bottom_tab.atlas":t,"res/atlas/common_sg.atlas":t,"common/bg0_common.png":t,"common/bg1_common.png":t,"common/bj_tongyong_1.png":t,"common/bj_tongyong_2.png":t},this._closeQueue=new i(function(t,e){return t.timeout<e.timeout})}l=r.core||(r.core={}),e=Laya.Dictionary,h=Laya.Handler,c=r.layer.LayerManager,p=r.funcOpen.FuncOpenModel,u=r.notice.SystemNoticeManager,d=r.loading.LoadingCtrl,a=Laya.Loader,m=utils.collections.Set,i=utils.collections.Heap,n=r.bottomTab.BottomTabConfig,s=r.common.CommonUtil,Object.defineProperty(o,"instance",{get:function(){return o._instance=o._instance||new o},enumerable:!0,configurable:!0}),o.prototype.openByActionId=function(t,e){if(void 0===e&&(e=null),0!==t)if(194!=t)if(129!=t){if(-1===r.faction.FactionUtil.shieldFuncs.indexOf(t)||r.faction.FactionCtrl.instance.checkIsHaveFaction())if(85!==t){var i=GlobalData.getWindowConfigByFuncId(t);if(i){var n=i[0];if(835===t||654===t)return p.instance.getFuncIsOpen(t)?void o.instance.open(548,function(){var t=o.instance.getPanelById(548);t&&t.openChildPanl(n,!0)}):void u.instance.addNotice(p.instance.getFuncOpenTipById(t),!0);104==n?s.gotoVIP():this.open(n,e)}else u.instance.addNotice("找不到功能id:"+t+"对应的面板信息",!0)}else o.instance.open(109,3)}else r.ladder.LadderCtrl.instance.canOpenPanel();else r.equipSuit.EquipSuitCtrl.instance.openPanel()},o.prototype.open=function(t,e){if(void 0===e&&(e=null),0!==t&&!(PlatParams.isCloseRecharge&&-1<this.closeIDS.indexOf(t))&&(-1===r.faction.FactionUtil.shieldPanels.indexOf(t)||r.faction.FactionCtrl.instance.checkIsHaveFaction())){111===t&&r.first_pay.FirstPayModel.instance.giveState<=0&&(PlayerModel.instance.level>=r.first_pay.FirstPayModel.instance.openLv?console.log("不跳首充界面了"):t=118);var i=l.WindowConfig.instance.getWindowConfigById(t);if(!i)throw new Error("不存在的面板："+t);var n=i[1];if(this.isOpened(t)){if(1===n){var s=this.getPanelById(t);s&&s.setOpenParamInterface(e)}else if(2===n){var o=this.getDialogById(t);o&&o.setOpenParamInterface(e)}}else{var a=i[6];0===a||p.instance.getFuncIsOpen(a)?1===n?this.openPanel(t,e):2===n&&this.openDialog(t,e):u.instance.addNotice(p.instance.getFuncOpenTipById(a),!0)}}},o.prototype.close=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1),this.isOpened(t)){if(d.instance.hideLoading(t),n){var s=this._openTable[t];s&&this.destoryEntry(s)}else this.closeEntry(t);if(GlobalData.dispatcher.event("PANEL_CLOSE",t),!i){var o=this._panelDic.get(t)||this._dialogDic.get(t);null!=o&&(o instanceof l.BaseView||o instanceof l.BaseViewEx?o.close():(o instanceof l.BaseDialog||o instanceof l.BaseDialogEx)&&o.close(null,!1))}}},o.prototype.openPanel=function(s,o){var a=this;void 0===o&&(o=null);var r=l.WindowConfig.instance.getWindowConfigById(s);if(!r)throw new Error("不存在的面板："+s);function t(){if(a.isOpened(s)){d.instance.hideLoading(s);var t=a._panelDic.get(s);if(1===r[5])for(var e=0,i=a._panelDic.values.length;e<i;e++)if(a.isOpened(a._panelDic.keys[e])){var n=a._panelDic.values[e];n&&n!==t&&n.closeByOthers&&(r[5]?n.closeByOtherPanel():n.close())}null==t&&(t=new r[2](r[3]),a._panelDic.set(s,t)),t.setOpenParamInterface(o),t.panelId=s,c.instance.getLayerById(t.layer).addChild(t)}}this.openEntry(s),GlobalData.dispatcher.event("PANEL_OPEN",s),r[4]?(n.instance.getTabInfoByPanelId(s)&&this.showLoading(r),Laya.loader.load(r[4],h.create(this,t))):t()},o.prototype.openDialog=function(e,i){var n=this;void 0===i&&(i=null);var s=l.WindowConfig.instance.getWindowConfigById(e);if(!s)throw new Error("不存在的面板："+e);function t(){if(n.isOpened(e)){d.instance.hideLoading(e);var t=n._dialogDic.get(e);t||(t=new s[2](s[3]),n._dialogDic.set(e,t)),t.dialogId=e,t.setOpenParamInterface(i),t.popup(1===s[5],!1)}}this.openEntry(e),GlobalData.dispatcher.event("PANEL_OPEN",e),s[4]?(this.showLoading(s),Laya.loader.load(s[4],h.create(this,t))):t()},o.prototype.openEntry=function(t){var e=this._openTable[t];null==e?this._openTable[t]={pointer:0,id:t,timeout:0,isOpen:!0}:e.isOpen||(this._closeQueue.remove(e),e.isOpen=!0),this.keepCache(t)},o.prototype.closeEntry=function(t){var e=l.WindowConfig.instance.getWindowConfigById(t)[7]||this._disposeDelay;e+=6e4*(2+Math.random())|0;var i=this._openTable[t];null!=i&&(i.isOpen?(i.isOpen=!1,i.timeout=Date.now()+e,this._closeQueue.push(i)):(i.timeout=Date.now()+e,this._closeQueue.updateElement(i)))},o.prototype.showLoading=function(t){var e=t[4],i=!1;if(e instanceof Array)for(var n=0,s=e.length;n<s&&!(i=!a.getRes(e[n]));n++);else i=!a.getRes(e);i&&d.instance.showLoading(t[0])},o.prototype.keepCache=function(t){var e=l.WindowConfig.instance.getWindowConfigById(t)[4];if(e instanceof Array)for(var i=0,n=e;i<n.length;i++){var s,o=n[i];null==(s=this._cache[o])&&(this._cache[o]=s=new m),s.add(t)}else null==(s=this._cache[e])&&(this._cache[e]=s=new m),s.add(t)},o.prototype.clearCache=function(t){var e=l.WindowConfig.instance.getWindowConfigById(t)[4];if(e instanceof Array)for(var i=0,n=e;i<n.length;i++){var s,o=n[i];(s=this._cache[o]).del(t),s.isEmpty()&&a.clearRes(o,!0)}else(s=this._cache[e]).del(t),s.isEmpty()&&a.clearRes(e,!0)},o.prototype.gc=function(){for(;!this._closeQueue.isEmtry();)this.destoryEntry(this._closeQueue.pop())},o.prototype.destoryEntry=function(t){var e=t.id;delete this._openTable[e];var i=l.WindowConfig.instance.getWindowConfigById(e);if(1===i[1]){var n=this._panelDic.get(e);null!=n&&(n.removeSelf(),n.destroy(!0),this._panelDic.remove(e))}else if(2===i[1]){var s=this._dialogDic.get(e);null!=s&&(s.removeSelf(),s.destroy(!0),this._dialogDic.remove(e))}this.clearCache(e)},o.prototype.loopHandler=function(){for(var t=Date.now();!this._closeQueue.isEmtry()&&!(this._closeQueue.top.timeout>t&&this._closeQueue.size<=this._limit);)this.destoryEntry(this._closeQueue.pop())},o.prototype.getPanelById=function(t){return this._panelDic.get(t)||null},o.prototype.getDialogById=function(t){return this._dialogDic.get(t)||null},o.prototype.isOpened=function(t){var e=this._openTable[t];return null!=e&&e.isOpen},o.prototype.getWindowConfigById=function(t){return l.WindowConfig.instance.getWindowConfigById(t)},Object.defineProperty(o.prototype,"openTable",{get:function(){return this._openTable},enumerable:!0,configurable:!0}),o.prototype.colseDialogForGetWay=function(){},o.prototype.closeAllDialog=function(){for(var t in this._openTable){var e=this._openTable[t].id;2===l.WindowConfig.instance.getWindowConfigById(e)[1]&&52!==e&&-1===this._ignoreWin.indexOf(e)&&o.instance.close(e)}},o.prototype.skipOpen=function(t){this.closeAllDialog(),this.open(t)},o.prototype.closeDialogOnVipPanel=function(){o.instance.close(133),o.instance.close(503)},o.prototype.winWarn=function(t,e,i){if(e){var n=1===t?"【界面】":"【弹窗】",s=1===t?"WindowManager.instance.getPanelById("+i+")":"WindowManager.instance.getDialogById("+i+")";console.log("界面开启记录("+new Date(Date.now()).toLocaleString()+"):打开的"+n+"  功能id："+e[6]+" 面板id："+i+" 使用 "+s+" 获取界面信息  对应的注册信息:",e)}},t=o,l.WindowManager=t}(modules=modules||{}),function(s){var t,e,i,o,n;function a(){return e.call(this)||this}t=s.createRole||(s.createRole={}),i=s.core.BaseCtrl,o=s.core.WindowManager,e=i,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return a._instance||(a._instance=new a),a._instance},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16777218,this.actorLoginReply),this._familyNames=nameGenerator.familyNames,this._symbols=nameGenerator.symbols,this._manPrefix=nameGenerator.manPrefix,this._manSuffix=nameGenerator.manSuffix,this._womanPrefix=nameGenerator.womanPrefix,this._womanSuffix=nameGenerator.womanSuffix,this._commonPrefix=nameGenerator.commonPrefix},a.prototype.actorLogin=function(t,e){PlatParams.recordStep(10),this.publish(1048577,[t,e])},a.prototype.actorLoginReply=function(t){var e=t[0];if(0==e)PlayerCtrl.instance.initBaseInfo(t[1],t[2],!0),o.instance.close(8),s.common.MiniGameUtil.isMiniGame()||(Browser.container.style.display="none");else if(1===PlatParams.isNoCreate)if(15===e||11002===e||11004===e)this.noCreateRoleLogin();else if(10013==e)if(s.common.MiniGameUtil.isMiniGame())o.instance.close(8),window.updateTotalProgress(-2),o.instance.close(1265),o.instance.open(244),alert("该区服开服过久,为保证游戏体验,请前往最新区服!");else{var i=Handler.create(this,function(){window.location.reload()});CommonUtil.alert("温馨提示",CommonUtil.formatHtmlStrByColor("#ff3e3e","该区服开服过久,为保证游戏体验,请前往最新区服!"),[i],null,i)}else{var n=ErrorCodeCfg.instance.getErrorCfgById(e);alert(n?n[1]:"错误："+e)}else GlobalData.dispatcher.event("CREATE_ROLE_FAIL",e)},a.prototype.noCreateRoleLogin=function(){var t,e=PlatParams.control.isNoCreateProbability||15,i=10*Math.random()+10<e?2:1;if(.5<=Math.random())t=""+ArrayUtils.random(this._familyNames)+ArrayUtils.random(1==i?this._manSuffix:this._womanSuffix);else{var n=1==i?this._manPrefix:this._womanPrefix,s=Math.floor(Math.random()*(this._commonPrefix.length+n.length));t=""+(s>=this._commonPrefix.length?n[s-this._commonPrefix.length]:this._commonPrefix[s])+ArrayUtils.random(this._symbols)+ArrayUtils.random(1==i?this._manSuffix:this._womanSuffix)}this.actorLogin(t,i)},n=a,t.CreateRoleCtrl=n}(modules=modules||{}),function(t){var e,i,s,n,o;function a(){var t=i.call(this)||this;return t._oldSelectedIndex=-1,t._selectedIndex=-1,t}e=t.common||(t.common={}),s=Laya.Event,n=Laya.EventDispatcher,i=n,__extends(a,i),a.prototype.setBtns=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this._btns&&0<this._btns.length)for(var i=0;i<this._btns.length;i++)(n=this._btns[i]).off(s.MOUSE_DOWN,this,this.downHandler),n.off(s.MOUSE_UP,this,this.upHandler);if((this._btns=t)&&0<t.length)for(i=0;i<t.length;i++){var n;(n=t[i]).on(s.MOUSE_DOWN,this,this.downHandler),n.on(s.MOUSE_UP,this,this.upHandler,[i])}},a.prototype.downHandler=function(){this._downX=Laya.stage.mouseX,this._downY=Laya.stage.mouseY,this._downTime=Browser.now()},a.prototype.upHandler=function(t){var e=Laya.stage.mouseX-this._downX,i=Laya.stage.mouseY-this._downY,n=Browser.now()-this._downTime;e<5&&-5<e&&i<5&&-5<i&&n<300&&this.btnClickHandler(t)},Object.defineProperty(a.prototype,"btns",{get:function(){return this._btns},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"oldSelectedBtn",{get:function(){return this._oldSelectedBtn},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selectedBtn",{get:function(){return this._selectedBtn},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"oldSelectedIndex",{get:function(){return this._oldSelectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this.btnClickHandler(t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canSelectHandler",{get:function(){return this._canSelectHandler},set:function(t){this._canSelectHandler=t},enumerable:!0,configurable:!0}),a.prototype.btnClickHandler=function(t){if(!this._canSelectHandler||this._canSelectHandler.runWith(t)){var e=this._btns[this._selectedIndex];e&&e&&(e.selected=!1),this._oldSelectedBtn=e,this._oldSelectedIndex=this._selectedIndex,this._selectedIndex=t,(e=this._btns[this._selectedIndex])&&e&&(e.selected=!0),this._selectedBtn=e,this.event(s.CHANGE)}},a.prototype.destroy=function(){if(this._btns&&0<this._btns.length){for(var t=0;t<this._btns.length;t++){var e=this._btns[t];e.off(s.MOUSE_DOWN,this,this.downHandler),e.off(s.MOUSE_UP,this,this.upHandler)}this._btns.length=0,this._btns=null}this._oldSelectedBtn=null,this._selectedBtn=null},o=a,e.BtnGroup=o}(modules=modules||{}),function(t){var e,n,s,i,o,a,r,l;function h(){}e=t.misc||(t.misc={}),n=Laya.Quaternion,s=Laya.Vector3,i=35*Math.PI/180*.5,o=new Laya.Quaternion(Math.sin(i),0,0,Math.cos(i)),a=15*Math.PI/180*.5,r=new Laya.Quaternion(Math.sin(a),0,0,Math.cos(a)),h.projectionRotateY=function(t,e){var i=t.localRotation;o.rotateY(e*Math.PI/180,i),t.localRotation=i},h.projectionModelRotateY=function(t,e){var i=t.localRotation;r.rotateY(e*Math.PI/180,i),t.localRotation=i},h.projectionYawPitchRoll=function(t){var e=new n;o.rotateY(t*Math.PI/180,e);var i=new s;return e.getYawPitchRoll(i),i},l=h,e.RoleUtils=l}(game=game||{}),function(t){var e,i;function n(){this.marryFashionId=9015,this._preTable={},this._preTable[1003]=[1003,"nanzhu_02/nanzhu_02_skin.j","男主出场","",1,null,0,0,0,0,0,0],this._preTable[1004]=[1004,"nvzhu_02/nvzhu_02_skin.j","女主出场","",1,null,0,0,0,0,0,0],this._preTable[5011]=[5011,"sb_10/sb_10_skin.j","冰魄灵霜","230010",5,["SB_10"],121,125,66,78,3.1,4],this._preTable[5012]=[5012,"sb_09/sb_09_skin.j","炽焱焚星","230009",5,["SB_09"],118,305,58,66,3.1,4],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("exterior")},n.prototype.getCfgById=function(t,e){return 9===Math.floor(1e-4*t)&&t%10==0&&(t+=1===e||2===e?e:PlayerModel.instance.occ),this._table||(this._table=GlobalData.getConfig("exterior"),this._table)?this._table[t]:this._preTable[t]},i=n,e.ExteriorCfg=i}(modules=modules||{}),function(y){!function(t){var o=base.mesh.LwjsAvatar,l=base.particle.ParticlePool,e=y.misc.RoleUtils,n=Laya.Matrix4x4,s=Laya.Sprite3D,h=modules.config.ExteriorCfg,a=utils.collections.Set,i=utils.tween.TweenJS,r=(c.prototype.addClip=function(t){this._clips.add(t)&&(t.progress=this._progress,t.duration>this._duration&&(this._duration=t.duration,this._tween.to(this._properties,this.duration)))},c.prototype.removeClip=function(t){if(this._clips.del(t)){for(var e=this._duration=0,i=this._clips.values;e<i.length;e++){var n=i[e];n.duration>this._duration&&(this._duration=n.duration)}this._tween.to(this._properties,this.duration)}},c.prototype.reset=function(){this.progress=1,this.progress=0},Object.defineProperty(c.prototype,"tween",{get:function(){return this._tween},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"progress",{get:function(){return this._progress},set:function(t){if(this._progress!=t){this._progress=t;for(var e=0,i=this._clips.values;e<i.length;e++)i[e].progress=t}},enumerable:!0,configurable:!0}),c);function c(t){this.name=t,this._clips=new a,this._progress=0,this._duration=0,this._properties={progress:1},this._tween=i.create(this).to(this._properties,0)}var p,u=(p=s,__extends(d,p),d.prototype.reset=function(t,e){void 0===e&&(e=0),this._avatarEffsArr&&(this._avatarEffsArr.length=0),""!=t&&(this._clothesAvatar=o.load(t),this._clothesAvatar.layer=this.layer,this._clothesAvatar.bindTo("toubu",this.title),this._clothesAvatar.once(Laya.Event.HIERARCHY_LOADED,this,this.onBodyComplete),this._avatarTransform=this._clothesAvatar.transform,this.addChild(this._clothesAvatar),this.direction=90),this._clothes=e},Object.defineProperty(d.prototype,"body",{get:function(){return this._clothesAvatar},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,null!=this._avatarTransform&&this.updateAvatarTransform())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"clothes",{get:function(){return this._clothes},set:function(t){this._clothes!==t&&(this._clothes=t,null!=this._clothesAvatar&&(null!=this._immortalsAvatar&&this._immortalsAvatar.unbindTo(this._clothesAvatar),this._tianZhuAvatar&&(this._tianZhuClip&&(this._tianZhuClip.reset(),this._tianZhuClip.tween.stop()),this._tianZhuAvatar.removeSelf()),this._clothesAvatar.unbindAll(),this.sliceAvatar(this._clothesAvatar),this._clothesAvatar.removeSelf(),this.destroyPartEffects(this._clothesAvatar),this._clothesAvatar.destroy(!0),this._clothesAvatar=null),0!=t&&(this._clothesAvatar=this.createAvater(t,this.onBodyComplete)),null!=this._immortalsAvatar?this._avatarTransform=this._immortalsAvatar.transform:null!=this._clothesAvatar?(this._avatarTransform=this._clothesAvatar.transform,this.addChild(this._clothesAvatar)):this._avatarTransform=null,this.updateAvatarTransform())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"immortals",{get:function(){return this._immortals},set:function(t){this._immortals!==t&&(this._immortals=t,null!=this._immortalsAvatar&&(null!=this._immortalsClip&&(this._immortalsClip.tween.stop(),this._immortalsClip=null),this._immortalsAvatar.unbindAll(),this.removeChildMaterial(this._immortalsAvatar.meshRender.sharedMaterial),this._immortalsAvatar.removeSelf(),this.destroyPartEffects(this._immortalsAvatar),this._immortalsAvatar.destroy(!0),this._immortalsAvatar=null),0!=t&&(this._immortalsAvatar=this.createAvater(t,this.onImmortalsComplete)),null!=this._immortalsAvatar?(this._avatarTransform=this._immortalsAvatar.transform,this.addChild(this._immortalsAvatar)):null!=this._clothesAvatar?(this._avatarTransform=this._clothesAvatar.transform,this.addChild(this._clothesAvatar)):this._avatarTransform=null,this.updateAvatarTransform())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"wing",{get:function(){return this._wing},set:function(t){this._wing!==t&&(this._wing=t,null!=this._wingAvatar&&(null!=this._clothesAvatar&&this._clothesAvatar.unbindTo(this._wingAvatar),this.sliceAvatar(this._wingAvatar),this.destroyPartEffects(this._wingAvatar),this._wingAvatar.destroy(!0),this._wingAvatar=null),0!=t&&(this._wingAvatar=this.createAvater(t,this.onWingComplete)))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"weapon",{get:function(){return this._weapon},set:function(t){this._weapon!==t&&(this._weapon=t,null!=this._weaponAvatar&&(null!=this._clothesAvatar&&this._clothesAvatar.unbindTo(this._weaponAvatar),this.sliceAvatar(this._weaponAvatar),this.destroyPartEffects(this._weaponAvatar),this._weaponAvatar.destroy(!0),this._weaponAvatar=null),0!=t&&(this._weaponAvatar=this.createAvater(t,this.onWeaponComplete)))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"aura",{get:function(){return this._aura},set:function(t){if(-1!==t&&-2!==t){if(this._aura===t)return;this._aura=t}if((this._enableEffect&&this._showEff||-1===t||-2===t)&&(null!=this._auraSprite&&(null!=this._immortalsAvatar?this._immortalsAvatar.unbindTo(this._auraSprite):null!=this._clothesAvatar?this._clothesAvatar.unbindTo(this._auraSprite):this._auraSprite.removeSelf(),this._auraSprite.destroy(!0),this._auraSprite=null),-2===t&&(t=this._aura),0!=t&&-1!=t)){var e=h.instance.getCfgById(t);this._auraSprite=l.instance.loadParticle("assets/particle/"+e[1]+".lh"),this.updateAura()}},enumerable:!0,configurable:!0}),d.prototype.updateAura=function(){null!=this._auraSprite&&(null!=this._auraSprite.parent&&(null!=this._immortalsAvatar?this._immortalsAvatar.unbindTo(this._auraSprite):null!=this._clothesAvatar?this._clothesAvatar.unbindTo(this._auraSprite):this._auraSprite.removeSelf()),null!=this._immortalsAvatar?this._immortalsAvatar.bindTo("xq_GD_00",this._auraSprite):null!=this._clothesAvatar?this._clothesAvatar.bindTo("xq_GD_00",this._auraSprite):(this.addChild(this._auraSprite),this.updateAvatarTransform()))},Object.defineProperty(d.prototype,"tianZhu",{get:function(){return this._tianZhu},set:function(t){this._tianZhu!==t&&(this._tianZhu=t,null!=this._tianZhuAvatar&&(this._tianZhuClip&&(this._tianZhuClip.tween.stop(),this._tianZhuClip=null),this._tianZhuAvatar.unbindAll(),this._tianZhuAvatar.removeSelf(),this.removeChildMaterial(this._tianZhuAvatar.meshRender.sharedMaterial),this.destroyPartEffects(this._tianZhuAvatar),this._tianZhuAvatar.destroy(!0),this._tianZhuAvatar=null),0!=t&&(this._tianZhuAvatar=this.createAvater(t,this.onTianZhuComplete)))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"colorOffset",{get:function(){return this._colorOffset},set:function(t){if(this._colorOffset!==t){var e=this._colorMatrix.elements;e[12]=e[13]=e[14]=this._colorOffset=t}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alpha=t,this._colorMatrix.elements[15]=this._mix?.65*this._alpha:this._alpha,this.updateBlend())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"mix",{get:function(){return this._mix},set:function(t){this._mix!=t&&(this._mix=t,this._colorMatrix.elements[15]=t?.65*this._alpha:this._alpha,this.updateBlend())},enumerable:!0,configurable:!0}),d.prototype.updateBlend=function(){var t=this.mix||this.alpha<1;if(this._blend!=t){this._blend=t;for(var e=0,i=this._materials.values;e<i.length;e++)i[e].enableAlphaBlend=t}},d.prototype.combineAnimation=function(t){if(null!=t&&this._animations.add(t))for(var e in this._clips){var i=this._clips[e],n=t.getAnimationClip(e);null!=n&&i.addClip(n)}},d.prototype.sliceAnimation=function(t){if(this._animations.del(t))for(var e in this._clips){var i=t.getAnimationClip(e);null!=i&&this._clips[e].removeClip(i)}},d.prototype.addChildMaterial=function(t){this._materials.add(t)&&(t.colorMatrix=this._colorMatrix,t.enableAlphaBlend=this._blend)},d.prototype.removeChildMaterial=function(t){this._materials.del(t)},d.prototype.getActionTween=function(t){if(null!=this._currentClip){if(this._currentClip.name==t)return this._currentClip.tween.isPlaying||this._currentClip.reset(),this._currentClip.tween;this._currentClip.tween.stop()}var e=this._clips[t];if(null==e){this._clips[t]=e=new r(t);for(var i=0,n=this._animations.values;i<n.length;i++){var s=n[i].getAnimationClip(t);null!=s&&e.addClip(s)}}return this._currentClip=e,this._currentClip.reset(),this._currentClip.tween},Object.defineProperty(d.prototype,"currentClipTween",{get:function(){return this._currentClip?this._currentClip.tween:null},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentClipName",{get:function(){return this._currentClip?this._currentClip.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"fighting",{get:function(){return this._fighting},set:function(t){this._fighting!=t&&(this._fighting=t,null!=this._weaponAvatar&&this._clothesAvatar.bindTo(this._fighting?"youshou":"beibu1",this._weaponAvatar))},enumerable:!0,configurable:!0}),d.prototype.destroy=function(t){p.prototype.destroy.call(this,t),null!=this._currentClip&&(this._currentClip.tween.stop(),this._currentClip=null),null!=this._tianZhuClip&&(this._tianZhuClip.tween.stop(),this._tianZhuClip=null),null!=this._immortalsClip&&(this._immortalsClip.tween.stop(),this._immortalsClip=null),this._avatarEffsArr&&(this._avatarEffsArr.length=0,this._avatarEffsArr=null),null!=this._zhanhunClip&&(this._zhanhunClip.tween.stop(),this._zhanhunClip=null)},d.prototype.combineAvatar=function(t){this.addChildMaterial(t.meshRender.sharedMaterial),this.combineAnimation(t.animation);var e=t.partChildren;for(var i in e){var n=e[i];this.addChildMaterial(n.meshRender.sharedMaterial),this.combineAnimation(n.animation)}},d.prototype.sliceAvatar=function(t){this.removeChildMaterial(t.meshRender.sharedMaterial),this.sliceAnimation(t.animation);var e=t.partChildren;for(var i in e){var n=e[i];this.removeChildMaterial(n.meshRender.sharedMaterial),this.sliceAnimation(n.animation)}},d.prototype.createAvater=function(t,e){var i=h.instance.getCfgById(t);if(null==i)throw new Error("外观"+t+"不存在");var n="assets/entity/"+i[1],s=o.load(n);return s.once(Laya.Event.HIERARCHY_LOADED,this,e),s},d.prototype.onBodyComplete=function(){null!=this._wingAvatar&&this._wingAvatar.loaded&&this._clothesAvatar.bindTo("beibu2",this._wingAvatar),null!=this._weaponAvatar&&this._weaponAvatar.loaded&&this._clothesAvatar.bindTo(this._fighting?"youshou":"beibu1",this._weaponAvatar),null!=this._immortalsAvatar&&this._immortalsAvatar.loaded&&this._immortalsAvatar.bindTo("xianqi",this._clothesAvatar),null!=this._tianZhuAvatar&&this._tianZhuAvatar.loaded&&(this._clothesAvatar.addChild(this._tianZhuAvatar),this._tianZhuClip&&this._tianZhuClip.tween.start()),null!=this._zhanhunAvatar&&this._zhanhunAvatar.loaded&&(this.addChild(this._zhanhunAvatar),e.projectionModelRotateY(this._zhanhunAvatar.transform,this._direction),this._zhanhunClip&&this._zhanhunClip.tween.start()),this._clothesAvatar.bindTo("toubu",this.title),this.combineAvatar(this._clothesAvatar),0!=this._clothes&&this.updatePartEffects(this._clothes,this._clothesAvatar,1),this.updateAura()},d.prototype.onWingComplete=function(){null!=this._clothesAvatar&&this._clothesAvatar.loaded&&this._clothesAvatar.bindTo("beibu2",this._wingAvatar),this.combineAvatar(this._wingAvatar),this.updatePartEffects(this._wing,this._wingAvatar,1)},d.prototype.onWeaponComplete=function(){null!=this._clothesAvatar&&this._clothesAvatar.loaded&&this._clothesAvatar.bindTo(this._fighting?"youshou":"beibu1",this._weaponAvatar),this.combineAvatar(this._weaponAvatar),this.updatePartEffects(this._weapon,this._weaponAvatar,1)},d.prototype.onTianZhuComplete=function(){null!=this._clothesAvatar&&this._clothesAvatar.loaded&&this._clothesAvatar.addChild(this._tianZhuAvatar),this.addChildMaterial(this._tianZhuAvatar.meshRender.sharedMaterial),this._tianZhuClip=new r(name);var t=this._tianZhuAvatar.animation.getAnimationClip("stand");t&&this._tianZhuClip.addClip(t),this._tianZhuClip.tween.repeat(Number.POSITIVE_INFINITY).start(),this.updatePartEffects(this._tianZhu,this._tianZhuAvatar,1)},d.prototype.onImmortalsComplete=function(){null!=this._clothesAvatar&&this._immortalsAvatar.bindTo("xianqi",this._clothesAvatar),this.addChildMaterial(this._immortalsAvatar.meshRender.sharedMaterial),this._immortalsClip=new r(name);var t=this._immortalsAvatar.animation.getAnimationClip("stand");null!=t&&this._immortalsClip.addClip(t),this._immortalsClip.tween.repeat(Number.POSITIVE_INFINITY).start(),this.updatePartEffects(this._immortals,this._immortalsAvatar,1),this.updateAura()},d.prototype.destroyPartEffects=function(t){if(this._avatarEffsArr){var e=this._avatarEffsArr.indexOf(t);if(-1!==e){for(var i=this._avatarEffsArr[e],n=this._avatarEffsArr[e+1],s=0,o=n.length;s<o;++s){var a=n[s];i.unbindTo(a),a.removeSelf(),a.destroy(!0)}n.length=0,this._avatarEffsArr.splice(e,2)}}},d.prototype.updatePartEffects=function(t,e,i){if(this._enableEffect&&this._showEff){var n=h.instance.getCfgById(t)[5];if(n){this._avatarEffsArr=this._avatarEffsArr||[],this._avatarEffsArr.push(e);for(var s=[],o=0;o<n.length;++o){var a=o+i,r=l.instance.loadParticle("assets/particle/"+n[o]+".lh");e.bindTo(9<a?"xq_GD_"+a:"xq_GD_0"+a,r),s.push(r)}this._avatarEffsArr.push(s)}}},d.prototype.updateAvatarTransform=function(){null!=this._avatarTransform?e.projectionRotateY(this._avatarTransform,this._direction):null!=this._auraSprite&&e.projectionRotateY(this._auraSprite.transform,this._direction),null!=this._zhanhunAvatar&&e.projectionModelRotateY(this._zhanhunAvatar.transform,this._direction)},Object.defineProperty(d.prototype,"zhanhun",{get:function(){return this._zhanhun},enumerable:!0,configurable:!0}),d.prototype.setZhanhun=function(t,e,i){void 0===e&&(e=!1),this._zhanhunAttack=e,this._zhanhunShowParts=i,this._zhanhun==t?null!=this._zhanhunAvatar&&(this._zhanhunAvatar.loaded?this._zhanhunAvatar.active=!0:this._zhanhunAvatar.once(Laya.Event.HIERARCHY_LOADED,this,this.onZhanhunLoaded,[!0]),this.playZhanhunAction()):(this.destroyZhanhun(),0!=t&&(this._zhanhunAvatar=this.createAvater(t,this.onZhanhunComplete))),this._zhanhun=t},d.prototype.hideZhanhun=function(){null!=this._zhanhunAvatar&&(this._zhanhunAvatar.loaded?this._zhanhunAvatar.active=!1:this._zhanhunAvatar.once(Laya.Event.HIERARCHY_LOADED,this,this.onZhanhunLoaded,[!1]))},d.prototype.onZhanhunLoaded=function(t){null!=this._zhanhunAvatar&&(this._zhanhunAvatar.active=t)},d.prototype.onZhanhunComplete=function(){null!=this._clothesAvatar&&this._clothesAvatar.loaded&&(this.addChild(this._zhanhunAvatar),e.projectionModelRotateY(this._zhanhunAvatar.transform,this._direction)),this.addChildMaterial(this._zhanhunAvatar.meshRender.sharedMaterial),this._zhanhunShowParts&&this.updatePartEffects(this._zhanhun,this._zhanhunAvatar,1),this.playZhanhunAction()},d.prototype.playZhanhunAction=function(){var t=this;if(this._zhanhunAvatar&&this._zhanhunAvatar.animation){var e=this._zhanhunAvatar.animation.getAnimationClip("skill"),i=this._zhanhunAvatar.animation.getAnimationClip("stand");this._zhanhunClip?(this._zhanhunClip.removeClip(e),this._zhanhunClip.removeClip(i)):this._zhanhunClip=new r(name),this._zhanhunClip.tween.stop(),this._zhanhunClip.reset(),this._zhanhunAttack?(this._zhanhunClip.addClip(e),this._zhanhunClip.tween.repeat(0).start().onComplete(function(){t._zhanhunClip&&(t._zhanhunClip.tween.stop(),t._zhanhunClip.reset(),t._zhanhunClip.removeClip(e),t._zhanhunClip.addClip(i),t._zhanhunClip.tween.repeat(Number.POSITIVE_INFINITY).start())})):this._zhanhunClip.tween.repeat(Number.POSITIVE_INFINITY).start()}else console.log("不存在战魂animation的情况")},d.prototype.destroyZhanhun=function(){null!=this._zhanhunAvatar&&(this._zhanhunClip&&(this._zhanhunClip.tween.stop(),this._zhanhunClip=null),this._zhanhunAvatar.unbindAll(),this._zhanhunAvatar.removeSelf(),this._zhanhunAvatar.meshRender&&this._zhanhunAvatar.meshRender.sharedMaterial&&this.removeChildMaterial(this._zhanhunAvatar.meshRender.sharedMaterial),this.destroyPartEffects(this._zhanhunAvatar),this._zhanhunAvatar.destroy(!0),this._zhanhunAvatar=null)},d.prototype.noEff=function(t){if(this._enableEffect&&this._showEff!==t)if(this._showEff=t)0!==this._clothes&&this._clothesAvatar&&this._clothesAvatar.loaded&&(this.aura=-2,this.updatePartEffects(this._clothes,this._clothesAvatar,1)),this._wingAvatar&&this._wingAvatar.loaded&&this.updatePartEffects(this._wing,this._wingAvatar,1),this._weaponAvatar&&this._weaponAvatar.loaded&&this.updatePartEffects(this._weapon,this._weaponAvatar,1),this._immortalsAvatar&&this._immortalsAvatar.loaded&&this.updatePartEffects(this._immortals,this._immortalsAvatar,1),this._tianZhuAvatar&&this._tianZhuAvatar.loaded&&this.updatePartEffects(this._tianZhu,this._tianZhuAvatar,1),this._zhanhunAvatar&&this._zhanhunAvatar.loaded&&this.updatePartEffects(this._zhanhun,this._zhanhunAvatar,1);else{if(0!==this._clothes&&this._clothesAvatar&&this._clothesAvatar.loaded&&(this.aura=-1),this._avatarEffsArr&&0<this._avatarEffsArr.length){for(var e=void 0,i=void 0,n=void 0,s=0,o=this._avatarEffsArr.length;s<o;s+=2)if(i=this._avatarEffsArr[s]){for(var a=0,r=(n=this._avatarEffsArr[s+1]).length;a<r;++a)e=n[a],i.unbindTo(e),e.removeSelf(),e.destroy(!0);n.length=0,this._avatarEffsArr[s+1]=null}this._avatarEffsArr.length=0}this._avatarEffsArr&&(this._avatarEffsArr=null)}},d);function d(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var i=p.call(this)||this;return i._animations=new a,i._materials=new a,i._clips={},i._colorMatrix=new n,i._alpha=1,i._mix=!1,i._blend=!1,i._currentClip=null,i._colorOffset=0,i._fighting=!1,i._clothes=i._weapon=i._wing=i._immortals=i._aura=i._tianZhu=0,i.title=new s,i._direction=0,i._enableEffect=t,i._showEff=e,i}t.RoleAvatar=u;var m,f=(m=u,__extends(g,m),g.prototype.updateAvatarTransform=function(){null!=this._avatarTransform?e.projectionModelRotateY(this._avatarTransform,this._direction):null!=this._auraSprite&&e.projectionModelRotateY(this._auraSprite.transform,this._direction),null!=this._zhanhunAvatar&&e.projectionModelRotateY(this._zhanhunAvatar.transform,this._direction)},g);function g(){return null!==m&&m.apply(this,arguments)||this}t.AvatarModel=f}(y.role||(y.role={}))}(game=game||{}),function(t){var e,i,s,o,n;function a(t){var e=i.call(this)||this;return e._target=t,e._target._addReference(),e._source=t.source,e._w=t.width,e._h=t.height,e}function r(t,e,i,n){void 0===n&&(n=void 0);var s=o.call(this)||this;return s._scene=new Laya.Scene,s._avatar=new game.role.AvatarModel,s._avatar.fighting=!0,s._avatar.reset(""),s.setActionType(n||"stand"),s._avatarRotateZ=0,s._avatar.direction=0,s._avatarPos=new Laya.Vector3(0,0,-500),s._avatar.transform.localPosition=s._avatarPos,s.width=t,s.height=e,s._clipOrthographicVerticalSize=i,s._initOrthographicVerticalSize=i,s._isReady=!1,s.on("display",s,s.onDisplay),s.on("undisplay",s,s.unDisplay),s}e=t.common||(t.common={}),i=Laya.Bitmap,__extends(a,i),a.prototype.destroy=function(){null!=this._target&&(this._target._removeReference(),this._target.referenceCount||this._target.destroy(),this._target=null),this._source=null,i.prototype.destroy.call(this)},s=a,o=Laya.Image,__extends(r,o),r.create=function(t,e,i,n){return void 0===n&&(n=void 0),new r(t,e,i,n)},r.normalCreate=function(t,e,i){void 0===t&&(t=1024),void 0===e&&(e=1024),void 0===i&&(i=1024);var n=r.create(t,e,i);return n.anchorX=.5,n.anchorY=.5,n.mouseEnabled=!1,n.avatarRotationY=180,n},r.prototype.setDirection=function(t){this._avatar.direction=t},r.prototype.addClip=function(t,e,i){if(this._isReady&&!this._camera){var n=new Laya.Camera(0,0,1e4);n.renderTarget=new Laya.RenderTexture(t,e),n.clearColor=new Laya.Vector4(0,0,0,0),n.orthographic=!0,n.orthographicVerticalSize=i,n.useOcclusionCulling=!1,n.renderingOrder=-1,this._camera=n,this._camera.addChild(this._avatar),this._scene.addChild(this._camera),this.source=new Laya.Texture(new s(this._camera.renderTarget))}},r.prototype.removeClip=function(){this._avatar&&this._avatar.removeSelf(),this.source&&(this.source.destroy(!0),this.source=null),this._camera&&(this._camera.renderTarget.destroy(),this._camera.removeSelf(),this._camera.destroy(!0),this._camera=null)},r.prototype.onDisplay=function(){this._scene.parent||Laya.stage.addChild(this._scene),this._camera||this.addClip(this.width,this.height,this._clipOrthographicVerticalSize)},r.prototype.unDisplay=function(){this.removeClip(),this._scene.removeSelf()},r.prototype.setActionType=function(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this._actionType!==t&&(this._actionType&&this._avatar.getActionTween(this._actionType)&&this._avatar.getActionTween(this._actionType).stop(),this._actionType=t,this._avatar.body&&this._avatar.body.off(Laya.Event.HIERARCHY_LOADED,this,this.onCompletePlay),"stand"!=t&&e!=Number.POSITIVE_INFINITY?(this._avatar.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this._avatar.body&&(this._avatar.body.loaded?this.onCompletePlay(e):this._avatar.body.once(Laya.Event.HIERARCHY_LOADED,this,this.onCompletePlay,[e]))):this._avatar.getActionTween(this._actionType).repeat(e).start())},r.prototype.onCompletePlay=function(t){var e=this;this._avatar.getActionTween(this._actionType).repeat(t).onComplete(function(){e._actionType="stand",e._avatar.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()}).start()},Object.defineProperty(r.prototype,"avatar",{get:function(){return this._avatar},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"avatarX",{get:function(){return this._avatarPos.x},set:function(t){this._avatarPos.x=t,this._avatar.transform.localPosition=this._avatarPos},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"avatarY",{get:function(){return this._avatarPos.y},set:function(t){this._avatarPos.y=t,this._avatar.transform.localPosition=this._avatarPos},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"avatarRotationX",{get:function(){return this._avatarRotateZ},set:function(t){this._avatarRotateZ=t;var e=this._avatar.transform.rotation;e.identity(),e.rotateZ(this._avatarRotateZ/180*Math.PI,e),this._avatar.transform.rotation=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"avatarRotationY",{get:function(){return this._avatar.direction},set:function(t){this._avatar.direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"avatarScale",{set:function(t){this._clipOrthographicVerticalSize=this._initOrthographicVerticalSize/t,this._camera&&(this._camera.orthographicVerticalSize=this._clipOrthographicVerticalSize)},enumerable:!0,configurable:!0}),r.prototype.destroy=function(t){this.removeClip(),null!=this._avatar&&(this._avatar.removeSelf(),this._avatar.destroy(!0),this._avatar=null),null!=this._scene&&(this._scene.removeSelf(),this._scene.destroy(!0),this._scene=null),this.off("display",this,this.onDisplay).off("undisplay",this,this.unDisplay),o.prototype.destroy.call(this,t)},r.prototype.reset=function(t,e,i,n,s,o,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=void 0),this._avatar.clothes=t,this._avatar.weapon=e,this._avatar.wing=i,this._avatar.immortals=n,this._avatar.aura=s,this._avatar.tianZhu=o,this.setActionType(a||"stand"),this._isReady=!0,this.addClip(this.width,this.height,this._clipOrthographicVerticalSize)},Object.defineProperty(r.prototype,"actionType",{get:function(){return this._actionType},enumerable:!0,configurable:!0}),r.prototype.isPlayerTween=function(t){this._actionType&&this._avatar.getActionTween(this._actionType)&&(t?this._avatar.getActionTween(this._actionType).start():this._avatar.getActionTween(this._actionType).stop())},r.prototype.avatarRotationZHXY2=function(){null!=this._avatar._clothesAvatar&&(this._avatar._clothesAvatar.transform.localPosition=new Laya.Vector3(0,0,-200),this._avatar.transform.localRotationEuler=new Laya.Vector3(0,0,0))},r.prototype.avatarRotationZHXY=function(t){if(null!=this._avatar._clothesAvatar){var e=this._avatar.transform.localRotationEuler;this._avatar._clothesAvatar.transform.localPosition=new Laya.Vector3(0,0,-200),this._avatar.transform.localRotationEuler=new Laya.Vector3(0,e.y+=t,0)}},r.prototype.avatarRotationZHXY1=function(){null!=this._avatar._clothesAvatar&&(this._avatar._clothesAvatar.transform.localPosition=new Laya.Vector3(0,0,0),this._avatar.transform.localRotationEuler=new Laya.Vector3(0,0,0))},n=r,e.AvatarClip=n}(modules=modules||{}),function(n){var i,e,t,s,o,a,r;function l(){var t=e.call(this)||this;return t._effects=[],t._manLastName="",t._womanLastName="",t}i=n.createRole||(n.createRole={}),t=n.common.BtnGroup,s=n.config.ErrorCodeCfg,o=n.common.AvatarClip,a=n.core.WindowManager,e=ui.CreateRoleViewUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnGroup=new t,this._btnGroup.setBtns(this.maleBtn,this.femaleBtn),this.centerX=0,this.centerY=0,this._isPause=!1,this._isAuto=!0,this._avatarClip=o.create(1024,2048,768),this.addChild(this._avatarClip),this._avatarClip.pos(368,794,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180,this._familyNames=nameGenerator.familyNames,this._symbols=nameGenerator.symbols,this._manPrefix=nameGenerator.manPrefix,this._manSuffix=nameGenerator.manSuffix,this._womanPrefix=nameGenerator.womanPrefix,this._womanSuffix=nameGenerator.womanSuffix,this._commonPrefix=nameGenerator.commonPrefix},l.prototype.onEvt=function(){this.onAutoClick(this.enterBtn,this,this.enterClickHandler),this.onAutoClick(this.randomNameBtn,this,this.randomNameHandler),this.onAutoEvt(this._btnGroup,"change",this,this.sexChangeHandler),this.onAutoEvt(this.nameTxt,"focus",this,this.focusHandler),this.onAutoEvt(this.nameTxt,"blur",this,this.blurHandler),this.onAutoEvt(this.nameTxt,"input",this,this.inputHandler),this.onAutoGlobalEvt("CREATE_ROLE_FAIL",this,this.failHandler)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=1,this._time=20,Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler(),this.randomNameHandler(),this.errorTxt.visible=!1,n.common.MiniGameUtil.isMiniGame()?(window.updateTotalProgress(-2),a.instance.close(1265)):Browser.container.setAttribute("style","visibility: visible;")},l.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},l.prototype.sexChangeHandler=function(){var t=0===this._btnGroup.selectedIndex?1:2;this._sex!=t&&(this._sex=t,this._isAuto&&(1===this._sex?""==this._manLastName?this.randomNameHandler():this.nameTxt.text=this._manLastName:""==this._womanLastName?this.randomNameHandler():this.nameTxt.text=this._womanLastName),this.showAnimation(),this.resetTimer())},l.prototype.inputHandler=function(){this.resetTimer(),this.errorTxt.visible=!1,this._isAuto=!1},l.prototype.failHandler=function(t){if(10013!=t)if(this._isAuto&&11002==t)this.randomNameHandler(),this.enterClickHandler();else{this.enterBtn.mouseEnabled=!0,this.errorTxt.visible=!0;var e=s.instance.getErrorCfgById(t);this.errorTxt.text=e?e[1]:"错误："+t}else{var i=Handler.create(this,function(){n.common.MiniGameUtil.isMiniGame()?(a.instance.close(8),a.instance.open(244)):window.location.reload()});CommonUtil.alert("温馨提示",CommonUtil.formatHtmlStrByColor("#ff3e3e","该区服开服过久,为保证游戏体验,请前往最新区服!"),[i],null,i)}},l.prototype.enterClickHandler=function(){var e=this,t=this.nameTxt.text;return t?StringUtils.containSpace(t)?(this.errorTxt.visible=!0,void(this.errorTxt.text="名字不能包含空格")):t.length<1||6<t.length?(this.errorTxt.visible=!0,void(this.errorTxt.text="名字长度为1~6个字")):StringUtils.isValidWords(t)?(this.enterBtn.mouseEnabled=!1,void CommonUtil.checkWords(t,function(){i.CreateRoleCtrl.instance.actorLogin(t,e._sex)},function(t){e.enterBtn.mouseEnabled=!0,1===t?(e.errorTxt.visible=!0,e.errorTxt.text="包含非法字符"):2===t&&(e.errorTxt.visible=!0,e.errorTxt.text="发起检测失败，请稍候重试")})):(this.errorTxt.visible=!0,void(this.errorTxt.text="包含非法字符")):(this.errorTxt.visible=!0,void(this.errorTxt.text="名字不能为空"))},l.prototype.randomNameHandler=function(){var t;if(this.resetTimer(),this._isAuto=!0,this.errorTxt.visible=!1,.5<=Math.random())t=""+ArrayUtils.random(this._familyNames)+ArrayUtils.random(1===this._sex?this._manSuffix:this._womanSuffix);else{var e=1===this._sex?this._manPrefix:this._womanPrefix,i=Math.floor(Math.random()*(this._commonPrefix.length+e.length));t=""+(i>=this._commonPrefix.length?e[i-this._commonPrefix.length]:this._commonPrefix[i])+ArrayUtils.random(this._symbols)+ArrayUtils.random(1===this._sex?this._manSuffix:this._womanSuffix)}return this.nameTxt.text=t,1===this._sex?this._manLastName=t:this._womanLastName=t,t},l.prototype.focusHandler=function(){this.nameTxt.select(),this._isPause=!0},l.prototype.blurHandler=function(){this._isPause=!1},l.prototype.resetTimer=function(){this.tipTxt.visible=!0,this._time=20,Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},l.prototype.loopHandler=function(){this._isAuto&&!this._isPause&&(this.tipTxt.text=this._time+"秒后进入游戏",0===this._time&&(this.tipTxt.visible=!1,Laya.timer.clear(this,this.loopHandler),this.enterClickHandler()),this._time--)},l.prototype.startAnimation=function(){this._avatarClip.avatar.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()},l.prototype.showAnimation=function(){var t=this._avatarClip.avatar;1===this._sex?this._avatarClip.reset(1003,5012):this._avatarClip.reset(1004,5011),t.body.loaded?this.startAnimation():t.body.once(Laya.Event.HIERARCHY_LOADED,this,this.startAnimation)},r=l,i.CreateRolePanel=r}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("first_pay"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.FirstPayCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("attr_item")},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.AttrItemCfg=i}(modules=modules||{}),function(t){var e,g,i;function n(){}e=t.common||(t.common={}),g=t.config.AttrItemCfg,n.formatFloatNum=function(t,e){e&&(t/=100);var i=Math.round(1e4*t),n=.01*i>>0,s=n+i%100*.01;return n===s?""+n:s.toFixed(2)},n.attrTxts=function(t,e,i,n,s,o){return this.doAttrTxts(t,null,n,i,e,s,o)},n.doAttrTxts=function(t,e,i,n,s,o,a){e=e||t;for(var r=0,l=.5*t.length;r<l;r++){var h=t[2*r],c=g.instance.getCfgById(h),p=c[2],u=this.getAttrIndexByType(h,e),d=0<=u?p?this.formatFloatNum(e[2*u+1])+"%":Math.round(e[2*u+1])+"":"0";if(i&&i[r]?(n&&n[r]&&(n[r].text=c[1]+":"),i[r].text=d,i[r].visible=!0):n&&n[r]&&(n[r].text=c[1]+":"+d),n&&n[r]&&(n[r].visible=!0),s){var m=this.getAttrIndexByType(h,s);if(0<=m){o&&o[r]&&(o[r].visible=!0),a&&a[r]&&(a[r].visible=!0);var f=s[2*m+1]-(0<=u?e[2*u+1]:0);a&&a[r]&&(a[r].text=p?this.formatFloatNum(f)+"%":Math.round(f)+"")}}else o&&(o[r].visible=!1),a&&(a[r].visible=!1)}for(r=.5*t.length,l=n.length;r<l;r++)n&&n[r]&&(n[r].visible=!1),o&&o[r]&&(o[r].visible=!1),a&&a[r]&&(a[r].visible=!1),i&&i[r]&&(i[r].visible=!1);return.5*t.length},n.setAttrTxts=function(t,e,i,n,s,o,a){void 0===a&&(a=-1);var r,l=e?e[a]||e:t[a]||t;if(t)r=t[a]||t;else{r=[];for(var h=0,c=l.length;h<c;h+=2)r[h]=l[h],r[h+1]=0}var p=e?e[a]||e:null;return this.doAttrTxts(l,r,n,i,p,s,o)},n.getAttrIndexByType=function(t,e){for(var i=-1,n=0,s=.5*e.length;n<s;n++)if(e[2*n]===t){i=n;break}return i},n.getAttrByType=function(t,e){for(var i=null,n=0,s=e.length;n<s;n++)if(e[n][0]===t){i=e[n];break}return i},n.getResultByAttr=function(t){var e=t[0],i=t[1],n=g.instance.getCfgById(e);return{name:n[1],value:1==n[2]?this.formatFloatNum(i)+"%":""+i}},n.getResultByAttrIndex=function(t,e){var i=t[2*e],n=t[2*e+1],s=g.instance.getCfgById(i);return{name:s[1],value:1==s[2]?this.formatFloatNum(n)+"%":""+n}},n.getAttrStr=function(t,e,i){void 0===e&&(e="<br/>"),void 0===i&&(i="+");for(var n="",s=0,o=t.length/2>>0;s<o;s++){var a=[t[2*s],t[2*s+1]],r=this.getResultByAttrIndex(a,0);n+=r.name+i+r.value+e}return n},n.calcAttrs=function(t,e,i,n){n=n||t.concat();var s=t.length;if(1&s)throw new Error("属性配置错误  为奇数!!!");for(var o=0;o<s;o+=2)i?n[o+1]+=e*i[o+1]:n[o+1]*=e;return n},i=n,e.AttrUtil=i}(modules=modules||{}),function(t){var o,a,e;function i(){this.init()}o=t.config||(t.config={}),a=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.showIds=[],this._huanhuaAttrIndices=[],this._tab={},this._itemIdToShowId={},this._qualityToShowIds={},this.qualitys=[];for(var t=GlobalData.getConfig("pet_fazhen"),e=0,i=t.length;e<i;e++){var n=t[e][0];-1===this.showIds.indexOf(n)&&this.showIds.push(n);var s=t[e][5];this._qualityToShowIds[s]||(this.qualitys.push(s),this._qualityToShowIds[s]=[]),-1===this._qualityToShowIds[s].indexOf(n)&&this._qualityToShowIds[s].push(n),this._tab[n]=t[e],this._itemIdToShowId[t[e][2][0]]=n}this._huanhuaAttrIndices=o.BlendCfg.instance.getCfgById(22009)[1]},i.prototype.getSkinCfgByType=function(t){return this._qualityToShowIds[t]},i.prototype.has=function(t,e){if(!this._tab[t])return!1;if(null!=e){if(e<0)return!1;if(this._tab[t][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){if(!this._tab[t])throw new Error("id不存在!"+t);e<0&&(e=0);var n=this._tab[t][1];if(n<e)return null;if(1===i)return this._tab[t][2];if(0===i)return this._tab[t][3]*e;if(2===i)return this._tab[t][4];if(3!==i)return 4===i?n:5===i?this._tab[t][5]:void 0;var s=this._tab[t][6];return a.calcAttrs(s,e)},Object.defineProperty(i.prototype,"huanhuaAttrIndices",{get:function(){return this._huanhuaAttrIndices},enumerable:!0,configurable:!0}),i.prototype.getItemIdBayShowId=function(t){return this._itemIdToShowId[t]},e=i,o.PetFazhenCfg=e}(modules=modules||{}),function(t){var o,a,e;function i(){this.init()}o=t.config||(t.config={}),a=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.showIds=[],this._attrIndices=[],this._tab={},this._itemIdToShowId={},this._qualityToShowIds={},this.qualitys=[];for(var t=GlobalData.getConfig("ride_fazhen"),e=0,i=t.length;e<i;e++){var n=t[e][0];-1===this.showIds.indexOf(n)&&this.showIds.push(n);var s=t[e][5];this._qualityToShowIds[s]||(this.qualitys.push(s),this._qualityToShowIds[s]=[]),-1===this._qualityToShowIds[s].indexOf(n)&&this._qualityToShowIds[s].push(n),this._tab[n]=t[e],this._itemIdToShowId[t[e][2][0]]=n}this._attrIndices=o.BlendCfg.instance.getCfgById(22010)[1]},i.prototype.has=function(t,e){if(!this._tab[t])return!1;if(null!=e){if(e<0)return!1;if(this._tab[t][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){if(!this._tab[t])throw new Error("id不存在!"+t);e<0&&(e=0);var n=this._tab[t][1];if(n<e)return null;if(1===i)return this._tab[t][2];if(0===i)return this._tab[t][3]*e;if(2===i)return this._tab[t][4];if(3!==i)return 4===i?n:5===i?this._tab[t][5]:void 0;var s=this._tab[t][6];return a.calcAttrs(s,e)},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),i.prototype.getItemIdBayShowId=function(t){return this._itemIdToShowId[t]},i.prototype.getSkinCfgByType=function(t){return this._qualityToShowIds[t]},e=i,o.RideFazhenCfg=e}(modules=modules||{}),function(t){var o,a,e;function i(){this.init()}o=t.config||(t.config={}),a=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.showIds=[],this._attrIndices=[],this._tab={},this._itemIdToShowId={},this._qualityToShowIds={},this.qualitys=[];for(var t=GlobalData.getConfig("fashion_magicshow"),e=0,i=t.length;e<i;e++){var n=t[e][0];-1===this.showIds.indexOf(n)&&this.showIds.push(n);var s=t[e][5];this._qualityToShowIds[s]||(this.qualitys.push(s),this._qualityToShowIds[s]=[]),-1===this._qualityToShowIds[s].indexOf(n)&&this._qualityToShowIds[s].push(n),this._tab[n]=t[e],this._itemIdToShowId[t[e][2][0]]=n}this._attrIndices=o.BlendCfg.instance.getCfgById(22012)[1]},i.prototype.has=function(t,e){if(!this._tab[t])return!1;if(null!=e){if(e<0)return!1;if(this._tab[t][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){if(!this._tab[t])throw new Error("id不存在!"+t);e<0&&(e=0);var n=this._tab[t][1];if(n<e)return null;if(1===i)return this._tab[t][2];if(0===i)return this._tab[t][3]*e;if(2===i)return this._tab[t][4];if(3!==i)return 4===i?n:5===i?this._tab[t][5]:void 0;var s=this._tab[t][6];return a.calcAttrs(s,e)},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),i.prototype.getItemIdBayShowId=function(t){return this._itemIdToShowId[t]},i.prototype.getSkinCfgByType=function(t){return this._qualityToShowIds[t]},e=i,o.FashionMagicShowCfg=e}(modules=modules||{}),function(t){var o,a,e;function i(){this.init()}o=t.config||(t.config={}),a=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.showIds=[],this._attrIndices=[],this._tab={},this._itemIdToShowId={},this._qualityToShowIds={},this.qualitys=[];for(var t=GlobalData.getConfig("tianzhu_magicshow"),e=0,i=t.length;e<i;e++){var n=t[e][0];-1===this.showIds.indexOf(n)&&this.showIds.push(n);var s=t[e][5];this._qualityToShowIds[s]||(this.qualitys.push(s),this._qualityToShowIds[s]=[]),-1===this._qualityToShowIds[s].indexOf(n)&&this._qualityToShowIds[s].push(n),this._tab[n]=t[e],this._itemIdToShowId[t[e][2][0]]=n}this._attrIndices=o.BlendCfg.instance.getCfgById(22014)[1]},i.prototype.has=function(t,e){if(!this._tab[t])return!1;if(null!=e){if(e<0)return!1;if(this._tab[t][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){if(!this._tab[t])throw new Error("id不存在!"+t);e<0&&(e=0);var n=this._tab[t][1];if(n<e)return null;if(1===i)return this._tab[t][2];if(0===i)return this._tab[t][3]*e;if(2===i)return this._tab[t][4];if(3!==i)return 4===i?n:5===i?this._tab[t][5]:void 0;var s=this._tab[t][6];return a.calcAttrs(s,e)},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),i.prototype.getItemIdBayShowId=function(t){return this._itemIdToShowId[t]},i.prototype.getSkinCfgByType=function(t){return this._qualityToShowIds[t]},e=i,o.TianZhuMagicShowCfg=e}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"arr",{get:function(){return this._arr},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._arr=GlobalData.getConfig("shenqi"),this._count=this._arr.length,this._attrIndices=e.BlendCfg.instance.getCfgById(22016)[1],this._showIDTable={};for(var t=0;t<this._arr.length;++t)this._showIDTable[this._arr[t][8]]=this._arr[t]},n.prototype.getCfgById=function(t){return this._arr[t]},n.prototype.getCfgByShowId=function(t){return this._showIDTable[t]},i=n,e.ShenqiCfg=i}(modules=modules||{}),function(r){var t,e,l,h,s,i;function n(){this._fragmentsDic=new e,this._equipFragmentsDic=new e,this._suiPianAll=new Array,this._suiPianYiXiangQianAll=new Array,this._isUpdateBoll=!1}t=r.shenqi||(r.shenqi={}),e=Laya.Dictionary,l=r.config.ShenqiCfg,h=r.config.SkillCfg,s=r.redPoint.RedPointCtrl,Object.defineProperty(n.prototype,"fragmentsDic",{get:function(){return this._fragmentsDic},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"shenqi",{get:function(){return this._shenqi},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"equipFragmentsDic",{get:function(){return this._equipFragmentsDic},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fighting",{get:function(){return this._fighting},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"attr",{get:function(){return this._attr},enumerable:!0,configurable:!0}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateFragmentList=function(t){this._fragmentsDic.clear();var e=t[0];this.isNemSuiPian(e);for(var i=0;i<e.length;++i)this._fragmentsDic.set(e[i][0],e[i][1]);this.refresh()},n.prototype.isNemSuiPian=function(t){if(r.funcOpen.FuncOpenModel.instance.getFuncIsOpen(189)&&this._isUpdateBoll){for(var e=t,i=e.length-1;0<=i;i--){var n=e[i];if(!n)break;var s=this._suiPianAll.indexOf(n[0]),o=this._suiPianYiXiangQianAll.indexOf(n[0]);if(-1==s&&-1==o){r.quickUse.QuickUseCtrl.instance.addShenQiItem(n[0]);for(var a=0;a<e.length;++a)this._suiPianAll.push(e[a][0]);return}}for(a=0;a<e.length;++a)this._suiPianAll.push(e[a][0])}},n.prototype.removeShenQisuibian=function(){if(this._isUpdateBoll)for(var t=this._suiPianAll.length-1;0<=t;t--){var e=this._suiPianAll[t];e&&-1!=this._suiPianYiXiangQianAll.indexOf(e)&&r.quickUse.QuickUseCtrl.instance.removeShenQiItemHandler(e)}},n.prototype.getShenQiInfoReply=function(t){this._isUpdateBoll=!0,this._fragmentsDic.clear();for(var e=t[0],i=0;i<e.length;++i)this._fragmentsDic.set(e[i][0],e[i][1]),this._suiPianAll.push(e[i][0]);this._shenqi=t[1],this._equipFragmentsDic.clear();var n=t[2];for(this.removeShenQisuibian(),this._suiPianYiXiangQianAll=n,i=0;i<n.length;++i)this._equipFragmentsDic.set(n[i],!0);for(this._attr=t[3],i=this._fighting=0;i<=this.shenqi.length-1;++i){var s=l.instance.getCfgById(i);if(s){this._fighting+=h.instance.getCfgById(s[3])[3];for(var o=0;o<s[2].length;++o)this._fighting+=s[6][o]}}var a=l.instance.getCfgById(this.shenqi.length);for(i=0;i<n.length;++i)this._fighting+=a[6][a[2].indexOf(n[i])];this.refresh()},n.prototype.refresh=function(){var t=l.instance.getCfgById(this.shenqi.length);if(t){for(var e=!0,i=0;i<t[2].length;++i){var n=t[2][i];if(!this.equipFragmentsDic.get(n)){if(this.fragmentsDic.get(n))break;e=!1}}e?s.instance.setRPProperty("shenqiRP",!0):s.instance.setRPProperty("shenqiRP",!1)}else s.instance.setRPProperty("shenqiRP",!1);GlobalData.dispatcher.event("SHENQI_UPDATE")},i=n,t.ShenqiModel=i}(modules=modules||{}),function(o){var t,a,r,e,i,n;function s(){return null!==a&&a.apply(this,arguments)||this}t=o.commonAlert||(o.commonAlert={}),r=o.config.ExteriorCfg,e=o.common.AvatarClip,i=ui.ExteriorActiveAlertUI,a=i,__extends(s,a),s.prototype.destroy=function(){this._effect=this.destroyElement(this._effect),this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),a.prototype.destroy.call(this)},s.prototype.initialize=function(){a.prototype.initialize.call(this),this._effect=CommonUtil.creatEff(null,"ok_state",7),this.addChildAt(this._effect,1),this._effect.scale(2.5,2.5),this._effect.y=100,this._effect.centerX=0,this._modelClip=e.create(1024,1024,1024),this.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.y=500,this.clickCD=!0,this._tweenJS=TweenJS.create(this._modelClip).yoyo(!0).repeat(99999999)},s.prototype.close=function(){a.prototype.close.call(this),this._tweenJS&&this._tweenJS.stop()},s.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t);var e=t,i=r.instance.getCfgById(e),n=i[2];this.nameTXt.text=n,this._modelClip.avatarScale=i[10]?i[10]:1,this._modelClip.avatarRotationX=i[6],this._modelClip.avatarRotationY=i[7],this._modelClip.avatarY=i[9],this._modelClip.avatarX=i[8];var s=e/1e3>>0;9==s||10==s?(this._modelClip.reset(0,0,0,0,e),this._effect.stop(),this._effect.visible=!1):(this._effect.play(),this._effect.visible=!0,this._modelClip.reset(e)),this.tipTxt.visible=!0,this.closeBtn.visible=!1,this.closeOnSide=!0,this.height=714,this._tweenJS.stop(),this._modelClip.y=500,o.config.ShenbingMagicshowCfg.instance.has(e)?(this.atkValueMsz.value=o.config.ShenbingMagicshowCfg.instance.getDataByIdLvField(e,1,0).toString(),this._tweenJS.to({y:this._modelClip.y-20},1e3).start()):o.config.WingMagicshowCfg.instance.has(e)?this.atkValueMsz.value=o.config.WingMagicshowCfg.instance.getDataByIdLvField(e,1,0).toString():o.config.RideMagicShowCfg.instance.has(e)?this.atkValueMsz.value=o.config.RideMagicShowCfg.instance.getDataByIdLvField(e,1,0).toString():o.config.PetMagicShowCfg.instance.has(e)?this.atkValueMsz.value=o.config.PetMagicShowCfg.instance.getDataByIdLvField(e,1,0).toString():o.config.RideRankCfg.instance.getActivateCfgByShowId(e)?this.atkValueMsz.value=o.config.RideRankCfg.instance.cfgs[0][5].toString():o.config.PetRankCfg.instance.getActivateCfgByShowId(e)?this.atkValueMsz.value=o.config.PetRankCfg.instance.cfgs[0][5].toString():o.config.PetFazhenCfg.instance.has(e)?(this.atkValueMsz.value=o.config.PetFazhenCfg.instance.getDataByIdLvField(e,1,0).toString(),this._tweenJS.to({y:this._modelClip.y-20},1e3).start()):o.config.RideFazhenCfg.instance.has(e)?(this.atkValueMsz.value=o.config.RideFazhenCfg.instance.getDataByIdLvField(e,1,0).toString(),this._tweenJS.to({y:this._modelClip.y-20},1e3).start()):o.config.FashionMagicShowCfg.instance.has(e)?this.atkValueMsz.value=o.config.FashionMagicShowCfg.instance.getDataByIdLvField(e,1,0).toString():o.config.TianZhuMagicShowCfg.instance.has(e)&&(this.atkValueMsz.value=o.config.TianZhuMagicShowCfg.instance.getDataByIdLvField(e,1,0).toString(),this._modelClip.setActionType("show")),this.observationItem.data=[[this._modelClip,Math.round(e/1e3)]]},n=s,t.CommonActiveAlert=n}(modules=modules||{}),function(t){var e,i;function n(t,e,i){void 0===i&&(i=null),this._bar=t,this._maxWidth=e,this._txt=i}e=t.common||(t.common={}),Object.defineProperty(n.prototype,"maxValue",{get:function(){return this._maxValue},set:function(t){this._maxValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){this._value=Math.floor(t),(t=Math.floor(t/this._maxValue*this._maxWidth))>this._maxWidth&&(t=this._maxWidth),this._bar.width=t,this._txt&&(this._txt.text=this._value+"/"+this._maxValue)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"txt",{set:function(t){this._txt&&(this._txt.text=t)},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this._bar=null,this._txt=null},Object.defineProperty(n.prototype,"moleculeTxt",{set:function(t){this._value=t,this._txt&&(this._txt.text=this._value+"/"+this._maxValue)},enumerable:!0,configurable:!0}),i=n,e.ProgressBarCtrl=i}(modules=modules||{}),function(t){var e,a,i,n,r,s,o;function l(t,e,i,n,s){void 0===n&&(n=null),void 0===s&&(s=null);var o=a.call(this)||this;return o.max=2147483647,o.min=1,(o._txt=t)instanceof r&&(o._txt.maxChars=10),o._addBtn=e,o._minusBtn=i,o._addTenBtn=n,o._minusTenBtn=s,o.value=o.min,o}e=t.common||(t.common={}),i=Laya.Event,n=Laya.EventDispatcher,r=Laya.TextInput,s=t.notice.SystemNoticeManager,a=n,__extends(l,a),l.prototype.addListeners=function(){this._addBtn.on(i.CLICK,this,this.addHandler),this._minusBtn.on(i.CLICK,this,this.minusHandler),this._addTenBtn&&this._addTenBtn.on(i.CLICK,this,this.addTenHandler),this._minusTenBtn&&this._minusTenBtn.on(i.CLICK,this,this.minusTenHandler),this._txt.on(i.CHANGE,this,this.changeHandler),this._txt.on(i.INPUT,this,this.changeHandler),this.isAuto&&this._addBtn&&this._minusBtn&&(this._addBtn.on(i.MOUSE_DOWN,this,this.downHanlder),this._minusBtn.on(i.MOUSE_DOWN,this,this.downHanlder))},l.prototype.playTimer=function(){for(var t=[this._addBtn,this._minusBtn],e=0;e<2;e++){var i=t[e].mouseX,n=t[e].mouseY;if(0<i&&i<t[e].width&&0<n&&n<t[e].height)return void this.playLoop(e)}},l.prototype.downHanlder=function(){Laya.stage.on(i.MOUSE_DOWN,this,this.playTimer),Laya.stage.on(i.MOUSE_UP,this,this.clearTimer)},l.prototype.clearTimer=function(){Laya.timer.clear(this,this.addHandler),Laya.timer.clear(this,this.minusHandler),Laya.timer.clear(this,this.playTimer),Laya.stage.off(i.MOUSE_DOWN,this,this.playTimer),Laya.stage.off(i.MOUSE_UP,this,this.clearTimer)},l.prototype.playLoop=function(t){0===t?Laya.timer.loop(200,this,this.addHandler,[t]):1==t&&Laya.timer.loop(200,this,this.minusHandler,[t])},l.prototype.removeListeners=function(){this._addBtn.off(i.CLICK,this,this.addHandler),this._minusBtn.off(i.CLICK,this,this.minusHandler),this._addTenBtn&&this._addTenBtn.off(i.CLICK,this,this.addTenHandler),this._minusTenBtn&&this._minusTenBtn.off(i.CLICK,this,this.minusTenHandler),this._txt.off(i.CHANGE,this,this.changeHandler),this._txt.off(i.INPUT,this,this.changeHandler),this.isAuto&&this._addBtn&&this._minusBtn&&(this._addBtn.off(i.MOUSE_DOWN,this,this.downHanlder),this._minusBtn.off(i.MOUSE_DOWN,this,this.downHanlder))},Object.defineProperty(l.prototype,"value",{get:function(){return this._value},set:function(t){t<this.min&&(t=this.min,null!=this._noticeError&&s.instance.addNotice("已达最小"+this._noticeError,!0)),t>this.max&&(t=this.max,null!=this._noticeError&&t===this._value&&s.instance.addNotice("已达最大"+this._noticeError,!0)),this._value=t,this._txt.text=this._value.toString(),this.event(i.CHANGE)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"notice",{set:function(t){this._noticeError=t},enumerable:!0,configurable:!0}),l.prototype.addHandler=function(){this.value++},l.prototype.minusHandler=function(){this.value--},l.prototype.addTenHandler=function(){this.value+=10},l.prototype.minusTenHandler=function(){this.value-=10},l.prototype.changeHandler=function(){this.value=this._txt.text||"0"===this._txt.text?parseInt(this._txt.text):this.min},o=l,e.NumInputCtrl=o}(modules=modules||{}),function(t){var e,i;function n(){}e=t.commonAlert||(t.commonAlert={}),n.judgeDiff=function(t,e,i){e.color="#50ff28",0<t?i.skin="common/zs_tongyong_3.png":t<0?(i.skin="common/zs_tongyong_5.png",e.color="#ff3e3e"):(i.skin="common/zs_tongyong_16.png",e.text="无变化"),t=Math.abs(t),e.text=t.toString()},i=n,e.EquipAlertUtil=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("strong_refine"),this.attrCfg=GlobalData.getConfig("strong_refine_part_attrtype")[0]},n.prototype.getCfgByLv=function(t){return GlobalData.searchByIndex1(this._table,t)},n.prototype.getAttrsByLvAndPart=function(t,e){for(var i=[],n=0,s=this.attrCfg[e-1];n<s.length;n++){var o=s[n];i.push(o);var a=0,r=t%10;switch(o){case 1:a=2==r||3==r||4==r||5==r||6==r?Math.floor(.05*t*t+11.6*t+1.3759):Math.floor(.05*t*t+11.6*t+.3759);break;case 2:a=2==r||6==r?Math.floor(t*t+232*t+12.5189):3==r||5==r?Math.floor(t*t+232*t+15.5189):4==r?Math.floor(t*t+232*t+16.5189):0==r||8==r?Math.floor(t*t+232*t+.5189):9==r?Math.floor(t*t+232*t-8.5189):Math.floor(t*t+232*t+7.5189);break;case 3:a=2==r||3==r||4==r||5==r||6==r?Math.floor(.05*t*t+11.6*t+1.3759):Math.floor(.05*t*t+11.6*t+.3759);break;case 4:a=2==r||3==r||4==r||5==r||6==r?Math.floor(.05*t*t+5.6*t+1.3759):Math.floor(.05*t*t+5.6*t+.3759);break;case 5:case 6:a=2==r||3==r||4==r||5==r||6==r?Math.floor(.05*t*t+14.6*t+1.3759):Math.floor(.05*t*t+14.6*t+.3759);break;case 7:case 8:a=2==r||3==r||4==r||5==r||6==r?Math.floor(.05*t*t+19.6*t+1.3759):Math.floor(.05*t*t+19.6*t+.3759)}i.push(a)}return i},i=n,e.StrongRefineCfg=i}(modules=modules||{}),function(y){var t,i,h,a,c,e,_,n,v,s,g,I,o;function r(){var t=null!==i&&i.apply(this,arguments)||this;return t._maxConH=600,t._lastPos=0,t.teamIdTest=0,t}t=y.commonAlert||(y.commonAlert={}),h=laya.display.Text,a=Laya.Image,c=y.config.ItemAttrPoolCfg,e=ui.EquipAlertUI,_=y.common.CommonUtil,n=y.bag.BaseItem,v=y.config.AttrItemCfg,s=Laya.Rectangle,g=y.common.AttrUtil,I=y.config.StrongRefineCfg,i=e,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._contrastElementArr=[this.contrastBox,this.myEquipBgImg,this.myEquipBgTxt,this.myStoneBgImg,this.myStoneBgTxt,this.myStoneTxt,this.myRankTxt,this.myXiLianBg,this.myXiLianTxt,this.myXiLianAttrTxt,this.myZhuHunBg,this.myZhuHunTxt,this.myZhuHunAttrTxt],this._item=new n,this.addChild(this._item),this._item.pos(37,55,!0),this._item.nameVisible=!1,this._item.needTip=!1,this._baseAttrTxts=[this.baseAttrTxt_0,this.baseAttrTxt_1],this._intensiveTxts=[this.intenTxt_0,this.intenTxt_1],this.baseAttrImgs=[this.baseAttrImg_0,this.baseAttrImg_1],this.myBaseAttrTxts=[this.myBaseAttrTxt_0,this.myBaseAttrTxt_1],this.bestAttrTxts=[],this.myBestAttrTxts=[],this._stoneImgs=[],this._myStoneImgs=[];for(var t=0;t<5;t++){var e=new a;e.x=65,e.anchorX=.5,e.anchorY=.5,this.stoneBox.addChild(e),this._stoneImgs.push(e),(e=new a).x=375,e.anchorX=.5,e.anchorY=.5,this.stoneBox.addChild(e),this._myStoneImgs.push(e)}_.setHTMLPro(this.stoneTxt,"#cbcade","SimHei",22),_.setHTMLPro(this.myStoneTxt,"#cbcade","SimHei",22),this.stoneTxt.style.lineHeight=this.myStoneTxt.style.lineHeight=35,this.stoneTxt.style.wordWrap=this.myStoneTxt.style.wordWrap=!1,this.stoneTxt.mouseEnabled=this.myStoneTxt.mouseEnabled=!1,this._bestAttrInitY=40,this.xiLianAttrTxt.style.wordWrap=this.myXiLianAttrTxt.style.wordWrap=!1,this.xiLianAttrTxt.style.fontSize=this.myXiLianAttrTxt.style.fontSize=22,this.xiLianAttrTxt.style.lineHeight=this.myXiLianAttrTxt.style.lineHeight=30,this.zhuHunAttrTxt.style.wordWrap=this.myZhuHunAttrTxt.style.wordWrap=!1,this.zhuHunAttrTxt.style.fontSize=this.myZhuHunAttrTxt.style.fontSize=22,this.zhuHunAttrTxt.style.lineHeight=this.myZhuHunAttrTxt.style.lineHeight=30,_.setHTMLPro(this.lvHTML,"#1f304d","SimHei",22)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.conBox,"mousedown",this,this.downHandler),this.onAutoEvt(this.conBox,"mousewheel",this,this.wheelHandler),this.onAutoClick(this.testGmBtn,this,this.addItemTest)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.testGmBtn.visible=!1},r.prototype.addItemTest=function(){this.teamIdTest},r.prototype.downHandler=function(){this._lastPos=this.conBox.mouseY,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseup",this,this.upHandler),Laya.stage.on("mouseout",this,this.upHandler)},r.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scroll(e)},r.prototype.moveHandler=function(){var t=this._lastPos-this.conBox.mouseY;this.scroll(t),this._lastPos=this.conBox.mouseY},r.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseup",this,this.upHandler),Laya.stage.off("mouseout",this,this.upHandler)},r.prototype.setBaseInfo=function(t){var e,i,n=(this._item.dataSource=t)[0],s=y.config.ItemEquipCfg.instance.getItemCfgById(n);this.teamIdTest=n;var o=t[3];i=o?(o[5]?this.nameTxt.text=s[1]+" +"+t[3][5].toString():this.nameTxt.text=s[1],e=o[6],o[7]):(this.nameTxt.text=s[1],e=s[14][0]),this.nameTxt.color=_.getColorById(n),this.qualityImg.skin=_.getBgImgById(n);var a=_.getItemQualityById(n);this.qualityImg1.visible=this.qualityImg2.visible=this.qualityImg3.visible=6==a,e>>=0,i>>=0,this.scoreTxt.text=e.toString(),this.sumScoreTxt.text=i.toString();var r=s[3],l=s[4];this.lvHTML.innerHTML=_.JudgeWearingCondition(r,l)},r.prototype.setBaseAttr=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var n,s=t[0],o=y.config.ItemEquipCfg.instance.getItemCfgById(s)[8],a=_.getPartById(s),r=t[3]?t[3][5]:0;n=i||(e?y.config.BeastStrongCfg.instance.getAttrsByLvAndPart(r,a):I.instance.getAttrsByLvAndPart(r,a));for(var l=.5*o.length>>0,h=0;h<l;h++){var c=o[2*h],p=o[2*h+1],u=v.instance.getCfgById(c);if(!this._baseAttrTxts[h]){var d=240+30*h;this._baseAttrTxts[h]=this.createTxt(this,65,d),this._intensiveTxts[h]=this.createTxt(this,230,d,"#45d624"),this.myBaseAttrTxts[h]=this.createTxt(this.contrastBox,456,d),this.baseAttrImgs[h]=this.createImg(this.contrastBox,435,252+30*h,.5,.5)}this._baseAttrTxts[h].text=u[1]+": "+p.toString();for(var m=!1,f=0,g=n.length;f<g;f+=2)if(c===n[f]){m=!0,this._intensiveTxts[h].text="(强化+"+n[f+1]+")";break}this._intensiveTxts[h].visible=m}0<l&&(this.conBox.y=this._baseAttrTxts[l-1].y+30)},r.prototype.setBestAttr=function(t,e){for(var i=e?this.myBestAttrTxts:this.bestAttrTxts,n=0,s=i.length;n<s;n++)i[n].visible=!1;var o=0;return t&&(t[2]&&0<t[2].length&&(this.setBestAttrByColor(t[2],o,e,i),o+=t[2].length),t[1]&&0<t[1].length&&(this.setBestAttrByColor(t[1],o,e,i),o+=t[1].length),t[0]&&0<t[0].length&&(this.setBestAttrByColor(t[0],o,e,i),o+=t[0].length)),o},r.prototype.setBestAttrByColor=function(t,e,i,n){for(var s=0;s<t.length;s++){var o=t[s][0],a=c.instance.getCfgById(o),r=a[4];if(!n[e]){var l=new h;l.fontSize=22,l.font="SimHei",n[e]=l,this.bestAttrBox.addChild(l)}n[e].color=_.getColorByQuality(r),n[e].pos(i?340:44,this._bestAttrInitY+30*e),n[e].text=a[1],n[e].visible=!0,this._bestAttrLastY=n[e].y+n[e].height,e++}},r.prototype.setStoneAttr=function(t,e){if(!t)return this._myStoneImgs.forEach(function(t){t.visible=!1}),void(this.myStoneTxt.innerHTML="");var i=t[4],n=i?i[1]:[],s=this.setStoneInfos(n);this.setStoneTxts(s,e)},r.prototype.setStoneInfos=function(t){for(var e=[null,null,null,null,null],i=0,n=t.length;i<n;i++){var s=t[i][1],o=t[i][0];e[s]=o}return e.push(e.shift()),e},r.prototype.setStoneTxts=function(t,e){for(var i=e?this._myStoneImgs:this._stoneImgs,n=e?this.myStoneTxt:this.stoneTxt,s="",o=[],a=0,r=t.length;a<r;a++){var l=t[a];if(l){o[a]=!0;var h=y.config.ItemStoneCfg.instance.getItemCfgById(l);i[a].skin=_.getIconById(l),i[a].scale(.5,.5),i[a-1]?o[a-1]?i[a].y=i[a-1].y+105:i[a].y=i[a-1].y+35:i[a].y=68;var c=h[1];s+="<span style='color:"+_.getColorById(l)+"'>"+c+"</span><br/>";var p=h[4];s+=(p=this.sliceStr(p))+"<br/>"}else{o[a]=!1;var u="";if(a==t.length-1){var d=y.config.PrivilegeCfg.instance.getOpenFuncByType(9);u=d<=y.vip.VipModel.instance.vipLevel?"":"<span style='color:#C96300'>SVIP"+d+"开启</span>"}i[a].skin="common/dt_tips_01.png",i[a].scale(1,1),i[a-1]?o[a-1]?i[a].y=i[a-1].y+105:i[a].y=i[a-1].y+35:i[a].y=68,s+="未镶嵌"+u+"<br/>"}}n.innerHTML=s},r.prototype.setRank=function(t){var e=y.config.ItemEquipCfg.instance.getItemCfgById(t),i=e[6];this.rankTxt.text=i,this.myEquip?(i=(e=y.config.ItemEquipCfg.instance.getItemCfgById(this.myEquip[0]))[6],this.myRankTxt.text=i):this.myRankTxt.text="未穿戴",this.height=this.bgImg.height=this.elseBox.y+this.elseBox.height+10,this.backTxt.y=this.bgImg.height+40,this.qualityImg1.height=this.height+6},r.prototype.sliceStr=function(t){for(var e="",i=0,n=t.length;i<n;i++)"+"===t[i]?e+=":":"；"===t[i]?e+="<br/>":e+=t[i];return e},r.prototype.setXiLian=function(t,e){void 0===e&&(e=!1),this.xiLianBox.visible=!0;for(var i=e?this.myXiLianAttrTxt:this.xiLianAttrTxt,n="",s=0,o=0,a=t.length;o<a;o++){var r=t[o];if(r){s++;var l=v.instance.getCfgById(r[0]),h=r[1],c=l[2]?(100*h).toFixed(2)+"%":Math.round(h)+"";n+='<span color="'+_.getColorByQuality(r[2]-1)+'">'+l[1]+"+"+c+"</span>",n+=o===a-1?"":"<br/>"}}return 0===s?(this.xiLianBox.visible=!1,i.innerHTML=n,1):(i.innerHTML=n,i.style.height=i.contextHeight,i.y+i.height)},r.prototype.setZhuHun=function(t,e){void 0===e&&(e=!1),this.zhuHunBox.visible=!0;var i=0,n="";if(t){var s=t[0],o=_.getPartById(s),a=t[3]?t[3][8]:0;a=a||0;var r=y.config.EquipmentZhuHunCfg.instance.getMaxLevelByPart(o);if(0<(a=r<a?r:a)){var l=y.config.EquipmentZhuHunCfg.instance.getDateByPartAndLevel(o,a);if(l){var h=l[3];i=h.length;for(var c=0,p=.5*h.length;c<p;c++){var u=v.instance.getCfgById(h[2*c]),d=h[2*c+1],m=u[2]?g.formatFloatNum(d)+"%":Math.round(d)+"";n+='<span color="#cbcade">'+u[1]+":"+m+"</span><br/>"}}}}if(0===i)return this.zhuHunBox.visible=!1,1;var f=e?this.myZhuHunAttrTxt:this.zhuHunAttrTxt;return f.innerHTML=n,f.style.height=f.contextHeight,f.y+f.height},r.prototype.createTxt=function(t,e,i,n){void 0===n&&(n="#cbcade");var s=new h;return s.font="SimHei",s.color=n,s.fontSize=22,s.pos(e,i),t.addChild(s),s},r.prototype.createImg=function(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=0);var o=new a;return o.pos(e,i),o.anchorX=n,o.anchorY=s,t.addChild(o),o},r.prototype.destroy=function(){this._contrastElementArr=this.destroyElement(this._contrastElementArr),this._item=this.destroyElement(this._item),this._baseAttrTxts=this.destroyElement(this._baseAttrTxts),this.bestAttrTxts=this.destroyElement(this.bestAttrTxts),this._stoneImgs=this.destroyElement(this._stoneImgs),this._myStoneImgs=this.destroyElement(this._myStoneImgs),this._intensiveTxts=this.destroyElement(this._intensiveTxts),this.baseAttrImgs=this.destroyElement(this.baseAttrImgs),this.myBestAttrTxts=this.destroyElement(this.myBestAttrTxts),this.myBaseAttrTxts=this.destroyElement(this.myBaseAttrTxts),this.myEquip=null,i.prototype.destroy.call(this)},Object.defineProperty(r.prototype,"itemData",{get:function(){return this._item.itemData},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isNeedContrast",{set:function(t){for(var e=0,i=this._contrastElementArr.length;e<i;e++)this._contrastElementArr[e].visible=t},enumerable:!0,configurable:!0}),r.prototype.setConHeight=function(t){var e=(this.conBox.height=t)>this._maxConH?this._maxConH:t,i=this.conBox.scrollRect;return i?i.setTo(0,0,this.conBox.width,e):i=new s(0,0,this.conBox.width,e),this.conBox.scrollRect=i,this.conBox.mouseEnabled=t>this._maxConH,e},r.prototype.scroll=function(t){var e=this.conBox.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.conBox.height-this._maxConH&&(e.y=this.conBox.height-this._maxConH),this.conBox.scrollRect=e},o=r,t.EquipBaseAlert=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.commonAlert||(t.commonAlert={}),n=t.commonAlert.EquipBaseAlert,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.isNeedContrast=!1},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.item=t},Object.defineProperty(o.prototype,"item",{set:function(t){var e=t;this.setBaseInfo(e),this.setBaseAttr(e);var i=e[0];this.teamIdTest=i;var n=e[3];0==this.setBestAttr(n)?(this.stoneBox.y=this.bestAttrBox.y,this.bestAttrBox.visible=!1):(this.bestAttrBox.visible=!0,this.stoneBox.y=this._bestAttrLastY+10),this.setStoneAttr(n),this.stoneBox.height=this.stoneTxt.y+this.stoneTxt.contextHeight,this.xiLianBox.y=this.stoneBox.y+this.stoneBox.height,this.xiLianBox.height=this.setXiLian(t[3][3]?t[3][3]:[]),this.zhuHunBox.y=this.xiLianBox.y+this.xiLianBox.height,this.zhuHunBox.height=this.setZhuHun(e),this.elseBox.y=this.conBox.y+this.setConHeight(this.xiLianBox.y+this.xiLianBox.height+this.zhuHunBox.height)+8,this.setRank(i)},enumerable:!0,configurable:!0}),s=o,e.EquipWearAlert=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("get_way")},n.prototype.getCfgById=function(t){if(!this._table[t])throw new Error("get_way表中没有来源"+t);return this._table[t]},i=n,e.GetWayCfg=i}(modules=modules||{}),function(t){var e,i,l,n;function s(){this.f5Time=0,this._mallArr=new Array,this.dontShowTreasure=!1,this.dontShowTalisman=!1,this.dontShowZhiZun=!1,this.dontShowDianFeng=!1,this.dontShowFuWen=!1,this.dontShowShenZun1=!1,this.dontShowMiZang1=!1,this.dontShowMarry1=!1,this.dontShowShenZun2=!1,this.dontShowMiZang2=!1,this.dontShowMarry2=!1,this.idList=new Array,this.updateVlaue=t.config.BlendCfg.instance.getCfgById(27016)[1]}e=t.store||(t.store={}),i=t.redPoint.RedPointCtrl,l=t.config.StoreCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getIconStr=function(t){return 94150001===t?"common/shenghuyu.png":90140001===t?"common/icon_tongyong_2.png":0===t?"":CommonUtil.getIconById(t,!0)},Object.defineProperty(s.prototype,"GetMallInfo",{set:function(t){this._mallArr=t,this.checkRP(),GlobalData.dispatcher.event("UPDATE_MALLINFO")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"UpdateMallInfo",{set:function(t){this._mallArr=t,this.checkRP(),GlobalData.dispatcher.event("UPDATE_MALLINFO")},enumerable:!0,configurable:!0}),s.prototype.getGetMallInfo=function(){return this._mallArr},Object.defineProperty(s.prototype,"PurchaseReply",{get:function(){return this._purReply},set:function(t){this._purReply=t,GlobalData.dispatcher.event("PURCHASE_REPLY")},enumerable:!0,configurable:!0}),s.prototype.getLimitById=function(t){for(var e=0;e<this._mallArr.length;e++)if(this._mallArr[e][0]==t)return this._mallArr[e]},s.prototype.setSkin=function(t){return CommonUtil.getIconById(t)},s.prototype.sortFunc=function(t,e){return t[13]-e[13]},s.prototype.getmall_1RP=function(){for(var t=!0,e=l.instance.getTypeStoreCfgByChildType(0,1),i=0,n=e.length;i<n;i++)if(0===e[i][8][1]){var s=e[i][0],o=e[i][2];if(0===this._mallArr.length){t=!0;break}for(var a=0,r=this._mallArr.length;a<r;a++)if(this._mallArr[a][0]===s&&this._mallArr[a][1]>=o){t=!1;break}}return t},s.prototype.checkRP=function(){var t=this.getmall_1RP();i.instance.setRPProperty("shangchengRP",t)},n=s,e.StoreModel=n}(modules=modules||{}),function(i){var t,n,e;function s(){}t=i.commonAlert||(i.commonAlert={}),n=i.config.GetWayCfg,s.setDesTxt=function(t){t.color="#ffffff",t.fontSize=22,t.font="SimHei",t.stroke=4,t.width=88,t.strokeColor="#422d1e",t.align="center"},s.clickHandler=function(t){if(942!==t&&943!==t||i.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!0)){500!=t?WindowManager.instance.closeAllDialog():i.notice.SystemNoticeManager.instance.addNotice("请多关注游戏内活动哦",!1);var e=n.instance.getCfgById(t)[3][0];s.skipScene(e)}},s.skipScene=function(t){t&&(2011<=t?2241==t?i.xianfu.XianfuCtrl.instance.enterScene():i.dungeon.DungeonCtrl.instance.reqEnterScene(t):WindowManager.instance.openByActionId(t))},e=s,t.PropAlertUtil=e}(modules=modules||{}),function(r){var t,i,e,n,s,o,l,a,h,c,p,u,d,m;function f(){var t=i.call(this)||this;return t._soureceBtnH=0,t}t=r.commonAlert||(r.commonAlert={}),e=r.commonAlert.PropAlertUtil,n=r.common.NumInputCtrl,s=r.bag.BaseItem,o=laya.events.Event,l=r.config.GetWayCfg,a=r.notice.SystemNoticeManager,h=r.config.StoreCfg,c=r.store.StoreModel,p=r.config.ErrorCodeCfg,u=r.player.PlayerModel,d=r.common.CommonUtil,i=ui.LackPropAlertUI,__extends(f,i),f.prototype.initialize=function(){i.prototype.initialize.call(this),this._numInputCtrl=new n(this.numInput,this.addBtn,this.minusBtn,this.addTenBtn,this.minusTenBtn),this._baseItem=new s,this.addChild(this._baseItem),this._baseItem.pos(280,129,!0),this._baseItem.nameVisible=!0,this._sourceBtns=new Array,this._image=new Array,this._desTxt=new Array;for(var t=0;t<4;t++)this._sourceBtns[t]=new Laya.Image,this._image[t]=new Laya.Image,this._desTxt[t]=new laya.display.Text,e.setDesTxt(this._desTxt[t])},f.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._numInputCtrl.addListeners(),this.buyBtn.on(o.CLICK,this,this.buyHandler),this.closeBtn.on(o.CLICK,this,this.close);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t]);this._numInputCtrl.on(o.CHANGE,this,this.sortcutBuy),GlobalData.dispatcher.on("PURCHASE_REPLY",this,this.purChase)},f.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._numInputCtrl.removeListeners(),this.closeBtn.off(o.CLICK,this,this.close),this.buyBtn.off(o.CLICK,this,this.buyHandler),this._numInputCtrl.off(o.CHANGE,this,this.sortcutBuy),GlobalData.dispatcher.off("PURCHASE_REPLY",this,this.purChase)},f.prototype.buyHandler=function(){this._buyPropNum=parseInt(this.numInput.text),0==this._buyPropNum?(d.goldNotEnoughAlert(),this.close()):Channel.instance.publish(2099353,[this._id,this._buyPropNum])},f.prototype.purChase=function(){var t=p.instance.getErrorCfgById(c.instance.PurchaseReply[0]);0!=t[0]?d.noticeError(t[0]):(a.instance.addNotice("购买成功"),this.close())},f.prototype.sortcutBuy=function(){this._numInputCtrl.min=1;var t=parseInt(this.numInput.text);this.allMoneyTxt.text=(this._sale*t).toString(),this._buyPropNum=t},f.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._isCoinBtn=!1,void 0!==t[2]&&(this._isCoinBtn=t[2]),this.item=[[t[0],0,0,null],t[1]]},Object.defineProperty(f.prototype,"item",{set:function(t){this.removeChildSource(),this._item=t[0];var e=t[0][0];this._baseItem.needTip=!0;var i=d.getItemCfgById(e),n=4===d.getItemTypeById(e),s=i[n?6:10],o=e/1e5>>0;if(823<=o&&o<=829?s=i[15]:830==o&&(s=i[12]),this._isCoinBtn?this.Title.text="通过以下途径获取":this.Title.text="材料不足，通过以下途径获取",830!=o&&this.shortBuy(i,n)){this.shortCutBuyBox.visible=!0;var a=h.instance.getCfgByitemId(i[n?7:12]);if(this._sale=a[8][1],90330001==a[8][0]&&(this._numInputCtrl.max=Math.floor(u.instance.copper/a[8][1])),90140001==a[8][0]&&(this._numInputCtrl.max=Math.floor(u.instance.ingot/a[8][1])),this._numInputCtrl.value=1,t[0]=[e,a[2],0,null],this._baseItem.dataSource=t[0],this._baseItem.mouseEnabled=830!=o,this.goldImg.skin=d.getIconById(a[8][0],!0),this.lgoldImg.skin=d.getIconById(a[8][0],!0),this._id=a[0],this.allMoneyTxt.text=(this._numInputCtrl.value*this._sale).toString(),this.moneyTxt.text=this._sale.toString(),0==s.length)this.bgImg.height=this.shortCutBuyBox.y+this.shortCutBuyBox.height+36,this.height=this.bgImg.height,this.backTxt.y=this.height+24;else{this._sourceBtnY=490;for(var r=0,l=s.length;r<l;r++)this.getWayBtn(this._sourceBtns[r],s[r],s.length,r,this._image[r]);this._soureceBtnH=100,this.bgImg.height=this._sourceBtnY+this._soureceBtnH+56,this.height=this.bgImg.height,this.backTxt.y=this.height+24}}else{for(this._baseItem.dataSource=t[0],this.shortCutBuyBox.visible=!1,this._baseItem.mouseEnabled=830!=o,this.lineimage.y=this.shortCutBuyBox.y,this._sourceBtnY=this.lineimage.y+this.lineimage.height+16,r=0,l=s.length;r<l;r++)this.getWayBtn(this._sourceBtns[r],s[r],s.length,r,this._image[r]);this._soureceBtnH=100,this.bgImg.height=this._sourceBtnY+this._soureceBtnH+36,this.height=this.bgImg.height,this.backTxt.y=this.height+24}},enumerable:!0,configurable:!0}),f.prototype.shortBuy=function(t,e){return e?!!t[7]:!!t[12]},f.prototype.getWayBtn=function(t,e,i,n,s){var o;this.addChild(s),this.addChild(t),o=l.instance.getCfgById(e),t.pos(30+.5*(660-158*i+42*(i-1))+116*n,this._sourceBtnY),t.skin="assets/icon/ui/get_way/"+o[1]+".png",s.skin="assets/icon/ui/get_way/btn_ydrk_bg.png",s.pos(t.x,t.y),t.addChild(this._desTxt[n]),this._desTxt[n].pos(6,70),this._desTxt[n].text=o[2]},f.prototype.getOpenPlaneId=function(t){var e=d.getItemCfgById(this._item[0]),i=e[10],n=this._item[0]/1e5>>0;823<=n&&n<=829?i=e[15]:830==n&&(i=e[12]);var s=l.instance.getCfgById(i[t]),o=s[0];if(942!==o&&943!==o||r.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!0)){500!=o?(this.close(),WindowManager.instance.closeAllDialog()):r.notice.SystemNoticeManager.instance.addNotice("请多关注游戏内活动哦",!1);var a=s[3][0];r.commonAlert.PropAlertUtil.skipScene(a)}},f.prototype.removeChildSource=function(){if(null!=this._sourceBtns)for(var t=0;t<this._sourceBtns.length;t++)this.removeChild(this._sourceBtns[t]);if(null!=this._image)for(t=0;t<this._image.length;t++)this.removeChild(this._image[t]),this.removeChild(this._desTxt[t]);this.bgImg.height=this.height=700,this.backTxt.y=750,this.lineimage.y=463},f.prototype.destroy=function(){this._sourceBtns=this.destroyElement(this._sourceBtns),this._image=this.destroyElement(this._image),this._desTxt=this.destroyElement(this._desTxt),i.prototype.destroy.call(this)},m=f,t.LackPropAlert=m}(modules=modules||{}),function(s){var i,n,o,e,h,a,t,c,p,u,d,r,l,m,f;function g(){return null!==n&&n.apply(this,arguments)||this}i=s.commonAlert||(s.commonAlert={}),o=Laya.Event,e=s.bag.BaseItem,h=s.common.CommonUtil,a=s.common.NumInputCtrl,t=ui.PropUseAlertUI,c=s.config.GetWayCfg,p=s.bag.BagModel,u=s.player.PlayerModel,d=s.bag.BagUtil,r=s.config.ItemMaterialCfg,l=s.funcOpen.FuncOpenModel,m=s.notice.SystemNoticeManager,n=t,__extends(g,n),g.prototype.onEvt=function(){n.prototype.onEvt.call(this),this._numInputCtrl.addListeners(),this.useBtn.on(o.CLICK,this,this.useHandler);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t])},g.prototype.offEvt=function(){n.prototype.offEvt.call(this),this._numInputCtrl.removeListeners(),this.useBtn.off(o.CLICK,this,this.useHandler)},g.prototype.initialize=function(){n.prototype.initialize.call(this),this.zOrder=3,this._numInputCtrl=new a(this.numInput,this.addBtn,this.minusBtn,this.addTenBtn,this.minusTenBtn),this._baseItem=new e,this.addChild(this._baseItem),this._baseItem.pos(48,79,!0),this._baseItem.nameVisible=!1,this._baseItem.needTip=!1,h.setHTMLPro(this.descTxt,"#ffffff","SimHei",24),this._sourceBtns=new Array,this._sourceBtnBg=new Array,this._decTex=new Array;for(var t=0;t<4;t++)this._sourceBtns[t]=new Laya.Image,this._sourceBtns[t].mouseEnabled=!0,this._sourceBtnBg[t]=new Laya.Image,this._decTex[t]=new laya.display.Text,i.PropAlertUtil.setDesTxt(this._decTex[t])},g.prototype.destroy=function(){if(null!=this._sourceBtns){for(var t=0;t<this._sourceBtns.length;t++)this._sourceBtns[t].destroy(!0),this._sourceBtnBg[t].destroy(!0),this._decTex[t].destroy(!0);this._sourceBtns=this._sourceBtnBg=this._decTex=null}n.prototype.destroy.call(this)},g.prototype.useHandler=function(){if(this._item){var t=this._item[0],e=r.instance.getItemCfgById(t);if(!this._forceUse&&e&&0<e[11])if(241===e[11]){if(!l.instance.getFuncIsOpen(241))return void m.instance.addNotice(l.instance.getFuncOpenTipById(241),!0);WindowManager.instance.open(386)}else if(492===e[11]){if(!l.instance.getFuncIsOpen(492))return void m.instance.addNotice(l.instance.getFuncOpenTipById(241),!0);-1===s.warband.WarbandModel.instance.leaderId?WindowManager.instance.open(764):WindowManager.instance.open(769)}else 977===e[11]||978===e[11]?WindowManager.instance.open(1488,978===e[11]?0:1):889==e[11]?WindowManager.instance.openByActionId(889,1):890==e[11]?WindowManager.instance.openByActionId(889,2):WindowManager.instance.openByActionId(e[11]);else{var i=this._numInputCtrl.value;if(d.checkIsManualGift(t))WindowManager.instance.openDialog(138,this._item);else if(s.config.BlendCfg.instance.getCfgById(36035)[1][0]==t){if(i){var n=s.config.BlendCfg.instance.getCfgById(36035)[1][0];s.faction.FactionCtrl.instance.addCopyTime([n,i])}}else-2===e[11]?WindowManager.instance.open(843):BagCtrl.instance.useBagItemByIdUid(t,this._item[2],i)}this.close()}},g.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t),this._forceUse=t[1],this.item=t[0]},Object.defineProperty(g.prototype,"item",{set:function(t){this._item=t,this.removeChildSource();var e,i=t[0];e=(e=90530001==i||90330001==i||90140001==i||90430001==i||90240001==i?u.instance.getCurrencyById(i):p.instance.getItemCountById(i))||0,this.numTxt.text="拥有数量："+e.toString(),this._baseItem.dataSource=t,this._numInputCtrl.max=d.checkIsManualGift(i)?1:t[1],this._numInputCtrl.value=d.checkIsTichet(i)?1:this._numInputCtrl.max;var n=h.getItemCfgById(i);this.nameTxt.text=n[1],this.nameTxt.color=h.getColorById(i),this.qualityImg.skin=h.getBgImgById(i);var s=h.getItemQualityById(i);this.qualityImg1.visible=this.qualityImg2.visible=this.qualityImg3.visible=6==s,this.descTxt.style.height=0,this.descTxt.style.leading=10,this.descTxt.innerHTML=n[6],this.levelTxt.text="使用等级："+n[2];var o,a=n[10];this.setImagePosition(a);for(var r=0,l=a.length;r<l;r++)this.addChild(this._sourceBtnBg[r]),this.addChild(this._sourceBtns[r]),o=c.instance.getCfgById(a[r]),this._sourceBtns[r].pos(30+.5*(510-158*l+42*(l-1))+116*r,this._sourceBtnY),this._sourceBtns[r].skin="assets/icon/ui/get_way/"+o[1]+".png",this._sourceBtnBg[r].skin="assets/icon/ui/get_way/btn_ydrk_bg.png",this._sourceBtns[r].addChild(this._decTex[r]),this._decTex[r].text=o[2],this._sourceBtnBg[r].pos(this._sourceBtns[r].x,this._sourceBtns[r].y),this._decTex[r].pos(6,70)},enumerable:!0,configurable:!0}),g.prototype.removeChildSource=function(){if(null!=this._sourceBtns)for(var t=0;t<this._sourceBtns.length;t++)this._sourceBtns[t].skin="",this.removeChild(this._sourceBtns[t]),this._sourceBtnBg[t].skin="",this.removeChild(this._sourceBtnBg[t]),this._decTex[t].text="",this.removeChild(this._decTex[t])},g.prototype.getOpenPlaneId=function(t){var e=h.getItemCfgById(this._item[0])[10][t];i.PropAlertUtil.clickHandler(e)},g.prototype.setImagePosition=function(t){0<t.length?(this.getSoureImage.visible=!0,this.getSoureTxt.visible=!0,this.getSoureImage.y=this.descTxt.y+this.descTxt.height+5,this.getSoureTxt.y=this.getSoureImage.y+4,this._sourceBtnY=this.getSoureImage.y+this.getSoureImage.height+20,this.lineimage.y=this._sourceBtnY+100+10):(this.getSoureImage.visible=!1,this.getSoureTxt.visible=!1,this.lineimage.y=this.descTxt.y+this.descTxt.height-5);var e=-1!==r.instance.getItemCfgById(this._item[0])[11]&&!this._forceUse;d.checkIsManualGift(this._item[0])||e?(this.buttonBox.visible=!1,this.useBtn.y=this.lineimage.y+this.lineimage.height+20):(this.buttonBox.visible=!0,this.buttonBox.y=this.lineimage.y+this.lineimage.height+20,this.useBtn.y=this.buttonBox.y+74),this.bgImg.height=this.useBtn.y+136,this.height=this.bgImg.height,this.closetex.y=this.height+20,this.qualityImg1.height=this.height+6},f=g,i.PropUseAlert=f}(modules=modules||{}),function(m){var n,f,g,y,e,t;function i(){var t=f.call(this)||this;return t.height=122,t}n=m.bag||(m.bag={}),g=m.player.PlayerModel,y=m.common.CommonUtil,e=m.vip.VipModel,f=n.BaseItem,__extends(i,f),i.prototype.initialize=function(){f.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},i.prototype.onEvt=function(){f.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_CHANGE_NUM",this,this.changeNumHandler)},i.prototype.changeNumHandler=function(t){this._itemData&&this._itemData[2]===t&&(this._numTxt.text=this._itemData[1].toString())},i.prototype.setDataSource=function(t){f.prototype.setDataSource.call(this,t);var e=t;if(null==e)return GlobalData.dispatcher.off("PLAYER_UPDATE_LEVEL",this,this.checkRP),void GlobalData.dispatcher.off("VIP_UPDATE",this,this.checkRP);var i=e[0],n=y.getBagIdById(i);if(0==e[2]||1!=n&&9!=n&&15!=n||2==this._type)this.upImgVisible=!1,this.maskImg.visible=!1;else{var s=y.getPartById(i),o=void 0;1==n?o=g.instance.getEquipByPart(s):9==n&&(o=m.yuanShen.YuanShenModel.instance.getEquipByTypePart(m.yuanShen.YuanShenUtil.getTypeById(i),s));var a=0,r=0;if(15==n){var l=m.brahma_equip.BrahmaEquipUtlis.getPartById(e[0]),h=(m.brahma_equip.BrahmaEquipModel.instance.partItem&&m.brahma_equip.BrahmaEquipModel.instance.partItem[l-1])[1];h&&(a=h[3][6]),r=e[3][6]}else a=null==o?0:o[3][6],r=e[3][6];this.upImgVisible=a<r;var c=this._itemCfg[4],p=this._itemCfg[3],u=g.instance.level,d=g.instance.eraLevel;this.maskImg.visible=u<c||d<p}0===n&&this._itemCfg&&this._itemCfg[5]&&t[2]&&(GlobalData.dispatcher.on("PLAYER_UPDATE_LEVEL",this,this.checkRP),GlobalData.dispatcher.on("VIP_UPDATE",this,this.checkRP),this.checkRP())},i.prototype.clickHandler=function(){if(this.needTip){if(null==this._itemData)return;var t=this._itemData[0],e=y.getItemTypeById(t);if(5==e||8==e){var i=t/1e5>>0;null==this._type?n.BagUtil.openBagItemTip(this._itemData):0==this._type?m.divinatory_card.DivinatoryUtil.isDivinatoryEquip(i)?WindowManager.instance.openDialog(1162,[this._itemData,this._type]):801<i?WindowManager.instance.openDialog(521,this._itemData):WindowManager.instance.openDialog(17,this._itemData):1==this._type?m.divinatory_card.DivinatoryUtil.isDivinatoryEquip(i)?WindowManager.instance.openDialog(1162,[this._itemData,this._type]):WindowManager.instance.openDialog(18,this._itemData):2==this._type?801<i?WindowManager.instance.openDialog(586,this._itemData):WindowManager.instance.openDialog(236,this._itemData):3==this._type?WindowManager.instance.openDialog(85,this._itemData):4==this._type&&WindowManager.instance.openDialog(521,this._itemData)}else n.BagUtil.openBagItemTip(this._itemData)}},Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),i.prototype.checkRP=function(){var t=this._itemCfg;this.rpImg.visible=g.instance.level>=t[2]&&e.instance.vipLevel>=t[3]},t=i,n.BagItem=t}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){var t=i.call(this)||this;return t._lastX=0,t}e=t.commonAlert||(t.commonAlert={}),n=Laya.Event,s=Laya.Rectangle,o=Laya.Sprite,a=t.bag.BagItem,r=ui.GotItemAlertUI,i=r,__extends(h,i),h.prototype.initialize=function(){i.prototype.initialize.call(this),this._con=new o,this.addChild(this._con),this._con.pos(125,600,!0)},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._con.on(n.MOUSE_DOWN,this,this.downHandler)},h.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._con.off(n.MOUSE_DOWN,this,this.downHandler)},h.prototype.downHandler=function(){!this._items||this._items.length<5||(this._lastX=this.mouseX,Laya.stage.on(n.MOUSE_MOVE,this,this.moveHandler),Laya.stage.on(n.MOUSE_UP,this,this.upHandler),Laya.stage.on(n.MOUSE_OUT,this,this.upHandler))},h.prototype.moveHandler=function(){console.log("move........................"+this._con.width);var t=this._con.scrollRect;t.x+=this._lastX-this.mouseX;var e=this._con.width-470;t.x=t.x<0?0:t.x>e?e:t.x,this._con.scrollRect=t,this._lastX=this.mouseX},h.prototype.upHandler=function(){Laya.stage.off(n.MOUSE_MOVE,this,this.moveHandler),Laya.stage.off(n.MOUSE_UP,this,this.upHandler),Laya.stage.off(n.MOUSE_OUT,this,this.upHandler),console.log("up.........................")},h.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.setItems(t)},h.prototype.setItems=function(t){for(var e=(this._items=t).length,i=0;i<e;i++){var n=new a;n.dataSource=t[i],this._con.addChild(n),n.x=120*i}this._con.size(110*e+10*(e-1),120),4<e?(this._con.x=125,this._con.scrollRect=new s(0,0,470,120)):(this._con.x=125+(470-this._con.width>>1),this._con.scrollRect=null)},h.prototype.setTitle=function(t){this.titleTxt.text=t},l=h,e.GotItemAlert=l}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("item_smelt"),e=0,i=t.length;e<i;e++){var n=t[e];this._table[n[0]]=n}},n.prototype.getItemCfgByLevel=function(t){return this._table[t]},i=n,e.ItemSmeltCfg=i}(modules=modules||{}),function(t){var e,i,n,a,r,s;function c(){var t=i.call(this)||this;return t._selectedIndex=-1,t._lastPos=0,t._scrollDir=1,t._spaceX=t._spaceY=0,t._scrollPos=0,t._hCount=t._vCount=1,t._startShowIndex=0,t._endShowIndex=0,t._con=new n,t.addChild(t._con),t.on(a.DISPLAY,t,t.displayHandler),t.on(a.UNDISPLAY,t,t.undisplayHandler),t._items=new Array,t._idleItems=new Array,t.multiSelectable=!1,t._multiSelectedIndices=new Array,t}e=t.common||(t.common={}),n=Laya.Sprite,a=Laya.Event,r=Laya.Rectangle,i=n,__extends(c,i),c.create=function(t,e,i,n,s,o,a,r,l){void 0===n&&(n=1),void 0===s&&(s=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===l&&(l=0);var h=new c;return h.itemRender=t,h.itemWidth=e,h.itemHeight=i,h.scrollDir=n,1===h.scrollDir?h.hCount=s:h.vCount=s,h.spaceX=o,h.spaceY=a,h.borderX=r,h.borderY=l,h},c.prototype.displayHandler=function(){this._con.on(a.MOUSE_DOWN,this,this.downHandler),this._con.on(a.MOUSE_WHEEL,this,this.wheelHandler)},c.prototype.undisplayHandler=function(){this._con.off(a.MOUSE_DOWN,this,this.downHandler),this._con.off(a.MOUSE_WHEEL,this,this.wheelHandler)},c.prototype.downHandler=function(){this._lastPos=1===this._scrollDir?this._con.mouseY:this._con.mouseX,Laya.stage.on(a.MOUSE_MOVE,this,this.moveHandler),Laya.stage.on(a.MOUSE_UP,this,this.upHandler),Laya.stage.on(a.MOUSE_OUT,this,this.upHandler)},c.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scroll(e)},c.prototype.moveHandler=function(){var t=this._lastPos-(1===this._scrollDir?this._con.mouseY:this._con.mouseX);this.scroll(t),this._lastPos=1===this._scrollDir?this._con.mouseY:this._con.mouseX},c.prototype.upHandler=function(){Laya.stage.off(a.MOUSE_MOVE,this,this.moveHandler),Laya.stage.off(a.MOUSE_UP,this,this.upHandler),Laya.stage.off(a.MOUSE_OUT,this,this.upHandler)},Object.defineProperty(c.prototype,"conWidth",{get:function(){return this._con.width},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"conHeight",{get:function(){return this._con.height},enumerable:!0,configurable:!0}),c.prototype.scroll=function(t){if(!(1===this._scrollDir?this._con.height<this.height:this._con.width<this.width)){var e=this._con.scrollRect;t+=1===this._scrollDir?e.y:e.x,this.scrollTo(t)}},c.prototype.scrollTo=function(t){if(1===this._scrollDir?this._con.height<this.height:this._con.width<this.width)this._scrollPos=0;else{var e=this._con.scrollRect;1===this._scrollDir?(e.y=t,e.y<0?e.y=0:e.y>this._con.height-this.height&&(e.y=this._con.height-this.height),this._scrollPos=e.y):2===this._scrollDir&&(e.x=t,e.x<0?e.x=0:e.x>this._con.width-this.width&&(e.x=this._con.width-this.width),this._scrollPos=e.x),this._con.scrollRect=e;var i=this._startShowIndex,n=this._endShowIndex;if(this.checkShowIndex(),i!==this._startShowIndex||n!==this._endShowIndex){this.event("SCROLL_INDEX_CHANGE");for(var s=i;s<n;s++){var o=this._items[s];o&&(s<this._startShowIndex||s>=this._endShowIndex)&&(o.selected=!1,this._selectedItem===o&&(this._selectedItem=null),o.removeSelf(),this._idleItems.push(o),this._items[s]=null)}for(s=this._startShowIndex;s<this._endShowIndex;s++)this._items[s]||this.showItem(s)}}},c.prototype.updateShowItem=function(){for(var t=this._startShowIndex;t<this._endShowIndex;t++)this._items[t]&&this._items[t].refresh()},Object.defineProperty(c.prototype,"scrollDir",{get:function(){return this._scrollDir},set:function(t){this._scrollDir=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"startShowIndex",{get:function(){return this._startShowIndex},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"endShoeIndex",{get:function(){return this._endShowIndex},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"multiSelectedIndices",{get:function(){return this._multiSelectedIndices},set:function(t){this._multiSelectedIndices=t;for(var e=0,i=this._items.length;e<i;e++)(n=this._items[e])&&(n.selected=!1);for(e=0,i=t.length;e<i;e++){var n;(n=this._items[t[e]])&&(n.selected=!0)}},enumerable:!0,configurable:!0}),c.prototype.clearMultiSelectedIndices=function(){for(var t=0,e=this._multiSelectedIndices.length;t<e;t++)this._items&&this._items[t]&&(this._items[t].selected=!1);this._multiSelectedIndices.length=0},Object.defineProperty(c.prototype,"scrollPos",{get:function(){return this._scrollPos},set:function(t){this.scrollTo(t)},enumerable:!0,configurable:!0}),c.prototype.scrollToIndex=function(t){1===this._scrollDir?this.scrollTo(Math.floor(t/this._hCount)*(this.itemHeight+this._spaceY)):2===this._scrollDir&&this.scrollTo(Math.floor(t/this._vCount)*(this.itemWidth+this._spaceX))},Object.defineProperty(c.prototype,"hCount",{get:function(){return this._hCount},set:function(t){this._hCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"vCount",{get:function(){return this._vCount},set:function(t){this._vCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"length",{get:function(){return this._datas?this._datas.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"datas",{get:function(){return this._datas},set:function(t){this._datas=t,this._con.removeChildren();for(var e=0,i=this._items.length;e<i;e++){var n=this._items[e];n&&(this._idleItems.push(n),n.selected=!1)}if(this._items.length=0,this._multiSelectedIndices.length=0,t){for(this._scrollPos=0,this.checkShowIndex(),e=0,i=t.length;e<i;e++)e>=this._startShowIndex&&e<this._endShowIndex&&this.showItem(e);if(this._con.scrollRect=new r(0,0,this.width,this.height),1===this._scrollDir){var s=Math.ceil(t.length/this._hCount);this._con.size(2*this.borderX+this._hCount*this.itemWidth+(this._hCount-1)*this._spaceX,2*this.borderY+s*this.itemHeight+(s-1)*this._spaceY)}else if(2===this._scrollDir){var o=Math.ceil(t.length/this._vCount);this._con.size(2*this.borderX+o*this.itemWidth+(o-1)*this._spaceX,2*this.borderY+this._vCount*this.itemHeight+(this._vCount-1)*this._spaceY)}}},enumerable:!0,configurable:!0}),c.prototype.showItem=function(t){var e=this,i=this._idleItems.pop();i||((i=new this._itemRender).on(a.MOUSE_DOWN,this,this.itemDownHandler),i.on(a.MOUSE_UP,this,this.itemUpHandler)),(this._items[t]=i).index=t,i.data=this._datas[t],this.multiSelectable?i.selected=-1!==this._multiSelectedIndices.indexOf(t):(i.selected=t===this._selectedIndex,i.selected&&(this._selectedItem=i)),this.isDelay||this._con.addChild(i),1===this._scrollDir?i.pos(this.borderX+t%this._hCount*(this.itemWidth+this._spaceX),this.borderY+Math.floor(t/this._hCount)*(this.itemHeight+this._spaceY),!0):2===this._scrollDir&&i.pos(this.borderX+Math.floor(t/this._vCount)*(this.itemWidth+this._spaceX),this.borderY+t%this._vCount*(this.itemHeight+this._spaceY),!0),this.isDelay&&Laya.timer.frameOnce(1,this,function(){e._con.addChild(i)},null,!1)},c.prototype.checkShowIndex=function(){var t=1===this._scrollDir?this.itemHeight:this.itemWidth,e=1===this._scrollDir?this._spaceY:this._spaceX,i=Math.floor(this._scrollPos/(t+e));t<=this._scrollPos%(t+e)&&i++;var n=1===this._scrollDir?this._hCount:this._vCount;this._startShowIndex=i*n;var s=1===this._scrollDir?this.height:this.width;i=Math.ceil((this._scrollPos+s)/(t+e)),this._endShowIndex=i*n,this._endShowIndex>this._datas.length&&(this._endShowIndex=this._datas.length)},c.prototype.itemDownHandler=function(t){this._downX=this.mouseX,this._downY=this.mouseY,this._downTime=Browser.now(),this._downTarget=t.currentTarget},c.prototype.itemUpHandler=function(t){if(this._downTarget===t.currentTarget){var e=this.mouseX-this._downX,i=this.mouseY-this._downY,n=Browser.now()-this._downTime;e<5&&-5<e&&i<5&&-5<i&&n<300&&this.itemClickHandler(t)}},Object.defineProperty(c.prototype,"spaceX",{get:function(){return this._spaceX},set:function(t){this._spaceX=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"spaceY",{get:function(){return this._spaceY},set:function(t){this._spaceY=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"itemRender",{set:function(t){this._itemRender!==t&&(this.destroyItems(),this._selectedIndex=-1,this._selectedData=this._selectedItem=null,this._multiSelectedIndices.length=0,this._itemRender=t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"selectedData",{get:function(){return this._selectedData},set:function(t){this.selectedIndex=this._datas.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"selectedItem",{get:function(){return this._selectedItem},set:function(t){if(t)if(this.multiSelectable)this.selectedIndex=t.index;else{if(!this.canSelectSameItem&&this._selectedItem===t)return;this.selectedIndex=t.index}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(this.multiSelectable){this._selectedItem=this._items?this._items[t]:null;var e=this._multiSelectedIndices.indexOf(t);-1===e?(this._multiSelectedIndices.push(t),this._selectedItem&&(this._selectedItem.selected=!0)):(this._multiSelectedIndices.splice(e,1),this._selectedItem&&(this._selectedItem.selected=!1)),this.event(a.SELECT)}else this._selectedItem=this._items?this._items[this._selectedIndex]:null,this._selectedItem&&(this._selectedItem.selected=!1),this._selectedIndex=t,this._selectedItem=this._items?this._items[this._selectedIndex]:null,this._selectedItem&&(this._selectedItem.selected=!0),this._selectedData=this._datas?this._datas[this._selectedIndex]:null,this.event(a.SELECT)},enumerable:!0,configurable:!0}),c.prototype.itemClickHandler=function(t){var e=t.currentTarget;e.selectEnable&&(this.selectedItem=e)},Object.defineProperty(c.prototype,"getListH",{get:function(){return this._con.height},enumerable:!0,configurable:!0}),c.prototype.destroyItems=function(){if(this._items){for(var t=0,e=this._items;t<e.length;t++){var i=e[t];i&&(i.off(a.MOUSE_DOWN,this,this.itemDownHandler),i.off(a.MOUSE_UP,this,this.itemUpHandler),i.destroy(!0))}this._items.length=0}if(this._idleItems){for(var n=0,s=this._idleItems.length;n<s;n++){var o=this._idleItems[n];o&&(o.off(a.MOUSE_DOWN,this,this.itemDownHandler),o.off(a.MOUSE_UP,this,this.itemUpHandler),o.destroy(!0))}this._idleItems.length=0}},c.prototype.destroy=function(t){void 0===t&&(t=!0),this.undisplayHandler(),this.upHandler(),this._datas&&(this._datas=null),this.destroyItems(),this._items=this._idleItems=null,i.prototype.destroy.call(this,t)},s=c,e.SimpleList=s}(modules=modules||{}),function(l){var o,e,t,i,a,n,r,h,c,p,s,u;function d(){return null!==e&&e.apply(this,arguments)||this}o=l.bag||(l.bag={}),t=l.common.SimpleList,i=l.common.BtnGroup,a=l.config.BlendCfg,n=ui.BagViewUI,r=l.config.PrivilegeCfg,h=l.vip.VipModel,c=l.config.ItemEquipCfg,p=l.common.CommonUtil,s=l.notice.SystemNoticeManager,e=n,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnGroup=new i,this._btnGroup.setBtns(this.propBtn,this.equipBtn,this.gemBtn,this.magicWeaponBtn),this._equipBtnGroup=new i,this._equipBtnGroup.setBtns(this.btn_group1,this.btn_group2,this.btn_group3,this.btn_group4,this.btn_group5,this.btn_group6),this.btnGroupArr=[this.btn_group1,this.btn_group2,this.btn_group3,this.btn_group4,this.btn_group5,this.btn_group6],this._list=new t,this._list=t.create(o.BagItem,100,122,1,5,20,2),this._list.width=590,this._list.height=890,this._list.x=19,this._list.borderX=10,this.itemPanel.addChild(this._list),this.titleTxt.text="背包",this.zh_lgu=["装备","灵装","兽装","卦牌","异宝","梵天"],this._equipIds=[1,9,8,12,13,15]},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_DATA_GOT",this,this.changeBagHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateHandler),this.onAutoGlobalEvt("DA_ZHAO_BAG_UPDATE_FENGJIE",this,this.updateHandler),this.onAutoGlobalEvt("BEAST_EQUIPMENT_R_UPDATE",this,this.updateHandler),this.onAutoGlobalEvt("BEAST_EQUIPMENT_CHANG",this,this.updateHandler),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.onAutoEvt(this._btnGroup,"change",this,this.changeBagHandler),this.onAutoEvt(this._equipBtnGroup,"change",this,this.equipHandler),this.onAutoClick(this._addBagGridsBtn,this,this.addBagGrids),this.onAutoClick(this.daZaoBtn,this,this.daZaoHandler),this.onAutoClick(this.meltBtn,this,this.meltHandler),this.regAutoRP(this.itemRPImg,["bagRP"]),this._btnGroup.selectedIndex=o.BagModel.instance.jumpId[0]||0,this._equipBtnGroup.selectedIndex=o.BagModel.instance.jumpId[1]||0,o.BagModel.instance.jumpId=[]},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.changeBagHandler(),PlatParams.isCloseRecharge&&(this._addBagGridsBtn.visible=!1)},d.prototype.updatePlatChangeRecharge=function(){this._addBagGridsBtn.visible=!PlatParams.isCloseRecharge},d.prototype.addBagGrids=function(){WindowManager.instance.openDialog(59,2)},d.prototype.daZaoHandler=function(){this.addNotice(this._equipBtnGroup.selectedIndex)||(o.BagModel.instance.jumpId=[1,this._equipBtnGroup.selectedIndex],5===this._equipBtnGroup.selectedIndex?WindowManager.instance.open(1466):WindowManager.instance.open(413,[9,3,2,5,7][this._equipBtnGroup.selectedIndex]))},d.prototype.addNotice=function(t){var e=[48,343,318,780,845,972];return!l.funcOpen.FuncOpenModel.instance.getFuncIsOpen(e[t])&&(s.instance.addNotice(l.funcOpen.FuncOpenModel.instance.getFuncOpenTipById(e[t]),!0),!0)},d.prototype.meltHandler=function(){if(!this.addNotice(this._equipBtnGroup.selectedIndex))if(o.BagModel.instance.jumpId=[1,this._equipBtnGroup.selectedIndex],2===this._equipBtnGroup.selectedIndex){var t=l.beast_equipment.BeastEquipmentModel.instance.setTarget(),e=l.config.BeastCfg.instance.arr[t];WindowManager.instance.open(516),WindowManager.instance.open(517,[2,t+1,e])}else 5===this._equipBtnGroup.selectedIndex?(WindowManager.instance.open(1467),WindowManager.instance.open(1479)):WindowManager.instance.open(413,[1,4,null,6,8][this._equipBtnGroup.selectedIndex])},d.prototype.updateHandler=function(){this.changeBagHandler()},d.prototype.equipHandler=function(){if(1==this._btnGroup.selectedIndex){var t=0<=this._equipBtnGroup.selectedIndex?this._equipBtnGroup.selectedIndex:0,e=this.genGrids(this._equipIds[t]).concat();this.sctImg.x=this.btnGroupArr[this._equipBtnGroup.selectedIndex].x-15,this.daZaoBtn.label=5===t?this.zh_lgu[t]+"升阶":this.zh_lgu[t]+"打造",this.meltBtn.label=this.zh_lgu[t]+"分解",5===this._equipBtnGroup.selectedIndex?e.sort(this.brahmaSort.bind(this)):e.sort(this.itemSort.bind(this)),e&&(this._list.datas=e,this._list.scrollTo(0)),8===this._equipIds[t]?o.BagModel.instance.setListBagItemType(this._list,4):12===this._equipIds[t]?o.BagModel.instance.setListBagItemType(this._list,1):13===this._equipIds[t]?o.BagModel.instance.setListBagItemType(this._list,1):o.BagModel.instance.setListBagItemType(this._list)}},d.prototype.changeBagHandler=function(){var t=null;switch(this.equipBox.visible=!1,this.itemPanel.height=865,this.baseImg.height=900,this.splitIcon2.visible=!1,this._bagAletTxt.pos(70,1026,!0),this._list.height=865,this._btnGroup.selectedIndex){case 0:(t=this.genGrids(0).concat()).sort(this.itemSort.bind(this));break;case 1:this.equipHandler(),this.itemPanel.height=700,this.equipBox.visible=!0,this.baseImg.height=800,this.splitIcon2.visible=!0,this._list.height=700,this._bagAletTxt.pos(73,862,!0);break;case 2:(t=this.genGrids(2).concat()).sort(this.stoneOrMagicWeaponSort.bind(this));break;case 3:(t=this.genGrids(3).concat()).sort(this.stoneOrMagicWeaponSort.bind(this))}t&&(this._list.datas=t,this._list.scrollTo(0))},d.prototype.itemSort=function(t,e){var i=t[0],n=e[0],s=p.getItemTypeById(i),o=p.getItemTypeById(n),a=p.getItemQualityById(i),r=p.getItemQualityById(n);return s==o?r<a?-1:a<r?1:n<i?-1:i<n?1:0:2==s&&2!=o?-1:2!=s&&2==o?1:3==s&&3!=o?-1:3!=s&&3==o?1:void 0},d.prototype.brahmaSort=function(t,e){var i=t[0],n=e[0],s=l.brahma_equip.BrahmaEquipUtlis.getGradeById(i),o=l.brahma_equip.BrahmaEquipUtlis.getGradeById(n);if(s!=o)return o-s;var a=l.brahma_equip.BrahmaEquipUtlis.getPartById(i),r=l.brahma_equip.BrahmaEquipUtlis.getPartById(n);return a===r?t[3][6]===e[3][6]?n-i:e[3][6]-t[3][6]:a-r},d.prototype.equipSort=function(t,e){var i=t[0],n=e[0],s=c.instance.getItemCfgById(i)[5],o=c.instance.getItemCfgById(n)[5];return o<s?-1:s<o?1:n<i?-1:i<n?1:0},d.prototype.stoneOrMagicWeaponSort=function(t,e){var i=t[0],n=e[0],s=p.getItemQualityById(i),o=p.getItemQualityById(n);return o<s?-1:s<o?1:n<i?-1:i<n?1:0},d.prototype.genGrids=function(t){var e=o.BagModel.instance.getItemsByBagId(t),i=0,n=h.instance.vipLevel;if(0===t){var s=r.instance.getVipInfoByLevel(n,3);i=a.instance.getCfgById(10001)[1][0],s&&(i+=s[1])}else 1===t?(s=r.instance.getVipInfoByLevel(n,2),i=a.instance.getCfgById(10002)[1][0],s&&(i+=s[1])):2===t?i=a.instance.getCfgById(10003)[1][0]:3===t?i=a.instance.getCfgById(10004)[1][0]:9===t?i=a.instance.getCfgById(10013)[1][0]:12===t?i=a.instance.getCfgById(10016)[1][0]:8===t?i=a.instance.getCfgById(10012)[1][0]:13===t?i=a.instance.getCfgById(10017)[1][0]:15===t&&(i=a.instance.getCfgById(10019)[1][0]);return i>e.length&&(e=e.concat(new Array(i-e.length))),this.addBagAlert(t,i),e},d.prototype.addBagAlert=function(t,e){var i=o.BagModel.instance.getItemsByBagId(t).length;this._bagAletTxt.text="容量："+i.toString()+"/"+e.toString(),1===t?(this._bagAletTxt.text="容量："+i.toString()+"/"+e.toString(),this._addBagGridsBtn.visible=h.instance.vipLevel<h.instance.maxVipLevel):this._addBagGridsBtn.visible=!1,PlatParams.isCloseRecharge&&(this._addBagGridsBtn.visible=!1)},d.prototype.canAddGrids=function(){var t=h.instance.vipLevel+1;t>r.instance.getVipMaxLevel()&&(t=r.instance.getVipMaxLevel());var e=r.instance.getCfgByType(h.instance.vipLevel),i=r.instance.getCfgByType(t),n=0;0!==h.instance.vipLevel&&(n=e[1][0][1]);for(var s=i[1][0][1];n==s&&t<=r.instance.getVipMaxLevel();){if(++t>r.instance.getVipMaxLevel())return!1;s=(i=r.instance.getCfgByType(t))[1][0][1]}return!0},d.prototype.linkTxtHandler=function(){WindowManager.instance.open(413,3)},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._list=this.destroyElement(this._list),this._bagAletTxt=this.destroyElement(this._bagAletTxt),this._addBagGridsBtn=this.destroyElement(this._addBagGridsBtn),o.BagModel.instance.jumpId=[],e.prototype.destroy.call(this,t)},u=d,o.BagPanel=u}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._lvs=[];for(var t=0,e=GlobalData.getConfig("era");t<e.length;t++){var i=e[t],n=i[0];this._tab[n]=i,this._lvs.push(n)}},n.prototype.getCfgByLv=function(t,e){if(e){var i=this._lvs.indexOf(t);i=1==e?++i:--i;var n=this._lvs[i];return null==n?null:this._tab[n]}return this._tab[t]},n.prototype.getNextLv=function(t){var e=this._lvs.indexOf(t);if(-1!==e){var i=this._lvs[e+1];return i||null}},n.prototype.getLastCfgByCurrLev=function(t){for(var e=0,i=this._lvs.length;e<i;e++)if(Math.floor(this._lvs[e]/100)>Math.floor(t/100))return this._lvs[e-1]},n.prototype.getBigLv=function(t){for(var e=0,i=this._lvs.length;e<i;e++)if(Math.floor(this._lvs[e]/100)>Math.floor(t/100))return this._lvs[e]},i=n,e.BornCfg=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.common||(t.common={}),n.topOffset=0,n.panelTweenDuration=150,i=n,e.CommonConfig=i}(modules=modules||{}),function(i){var t,e,n,s,o,a,r,l,h,c;function p(){return e.call(this)||this}t=i.main||(i.main={}),n=i.player.PlayerModel,s=ui.TopViewUI,o=i.config.BornCfg,a=i.bag.BagUtil,r=i.common.CommonUtil,l=Laya.Point,h=i.common.CommonConfig,e=s,__extends(p,e),p.prototype.initialize=function(){e.prototype.initialize.call(this),this.top=h.topOffset,this.centerX=0,this.layer=9,this.closeByOthers=!1,PlatParams.isCloseRecharge&&(this.addXianYu.visible=this.addIngotBtn.visible=!1),this.bgImg.skin=i.common.VersionResUtlis.getRes(0),this.baseAttrUpdate()},p.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._isPlatCloseRecharge=PlatParams.isCloseRecharge,this.updateBorn(),this.updateMoney(),this.setActionPreviewPos()},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),GlobalData.dispatcher.on("PLAYER_BASE_ATTR_UPDATE",this,this.baseAttrUpdate),GlobalData.dispatcher.on("PLAYER_UPDATE_LEVEL",this,this.updateLevel),GlobalData.dispatcher.on("PLAYER_UPDATE_MONEY",this,this.updateMoney),GlobalData.dispatcher.on("PLAYER_BORN_LEV",this,this.updateBorn),this.onAutoClick(this.addCoinBtn,this,this.moneyBtnHandler),this.onAutoClick(this.addIngotBtn,this,this.glodBtnHandler),this.onAutoClick(this.addXianYu,this,this.addXianYuHandler),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ZXIANYU_UPDATE",this,this.baseAttrUpdate),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},p.prototype.updatePlatChangeRecharge=function(){PlatParams.isCloseRecharge!=this._isPlatCloseRecharge?(this._isPlatCloseRecharge=PlatParams.isCloseRecharge,this.addXianYu.visible=this.addIngotBtn.visible=!PlatParams.isCloseRecharge):console.log("bottomPanel 相同的值：isCloseRecharge：",PlatParams.isCloseRecharge)},p.prototype.offEvt=function(){e.prototype.offEvt.call(this),GlobalData.dispatcher.off("PLAYER_BASE_ATTR_UPDATE",this,this.baseAttrUpdate),GlobalData.dispatcher.off("PLAYER_UPDATE_LEVEL",this,this.updateLevel),GlobalData.dispatcher.off("PLAYER_UPDATE_MONEY",this,this.updateMoney),GlobalData.dispatcher.off("PLAYER_BORN_LEV",this,this.updateBorn)},p.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview)},p.prototype.setPosActionPreview=function(){l.TEMP.setTo(this.cionImg.width/2,this.cionImg.height/2);var t=this.cionImg.localToGlobal(l.TEMP,!0);i.action_preview.ActionPreviewModel.instance._posSprite.set(9999999,t),l.TEMP.setTo(this.yuanBaoImg.width/2,this.yuanBaoImg.height/2);var e=this.yuanBaoImg.localToGlobal(l.TEMP,!0);i.action_preview.ActionPreviewModel.instance._posSprite.set(1e7,e)},p.prototype.baseAttrUpdate=function(){var t=n.instance.playerBaseAttr;t&&(this.levelTxt.text=t[4]+"级",this.updateBorn(),this.moneyTxt.text=r.bigNumToString(t[8],!1),this.goldTxt.text=r.bigNumToString(t[6],!1),this.xianYuText.text=r.bigNumToString(i.zxian_yu.ZXianYuModel.instance.xianyu,!1))},p.prototype.moneyBtnHandler=function(){a.openLackPropAlert(90330001,1,!0)},p.prototype.glodBtnHandler=function(){if(!PlatParams.isCloseRecharge)if(0==i.first_pay.FirstPayModel.instance.giveState){var t=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);r.alert("温馨提示","元宝不足，是否前往首充？",[t])}else i.money_cat.MoneyCatModel.instance.state?(t=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),r.alert("温馨提示","元宝不足，是否前往充值界面充值？",[t])):WindowManager.instance.open(394)},p.prototype.addXianYuHandler=function(){PlatParams.isCloseRecharge||WindowManager.instance.open(375)},p.prototype.updateLevel=function(){this.levelTxt.text=n.instance.level+"级"},p.prototype.updateMoney=function(){this.moneyTxt.text=r.bigNumToString(n.instance.copper,!1),this.goldTxt.text=r.bigNumToString(n.instance.ingot,!1)},p.prototype.updateBorn=function(){n.instance.bornLev&&(this.transformTxt.text=0===n.instance.bornLev?"未转生":o.instance.getCfgByLv(n.instance.bornLev)[1])},c=p,t.TopPanel=c}(modules=modules||{}),function(t){var e,i;function n(){}e=t.notice||(t.notice={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.addBroadcast=function(t){this._panel=this._panel||new e.ServerBroadcastPanel,LayerManager.instance.addToNoticeLayer(this._panel),this._panel.addBroadcast(t)},i=n,e.ServerBroadcastManager=i}(modules=modules||{}),function(t){var l,e,n,i,s,o,h,a;function c(){return null!==e&&e.apply(this,arguments)||this}l=t.chat||(t.chat={}),n=t.config.BlendCfg,i=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.common.CommonUtil,h=t.notice.ServerBroadcastManager,e=i,__extends(c,e),Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.setup=function(){this.subscribe(16777319,this.gmCommandReply),this.subscribe(16779916,this.updateChat),this.subscribe(16779918,this.getChatRecordReply),this.subscribe(16779922,this.getChatPlayerDetailedInfoReply),this.subscribe(16779919,this.getBlackListReply),this.subscribe(16779920,this.blackListOptReply),this.subscribe(16779921,this.updateBlackList),this.subscribe(16779917,this.chatReply),this.subscribe(16779923,this.getChatInfoReply),this.subscribe(16779924,this.updateChatInfo),this.subscribe(16782633,this.selectChatDesignationReply),this.subscribe(16779925,this.UpdateChatBan),this.getBlackList(),this.getCharInfo(),this.buildSystemMassage(),this.blackTableByCurrId={}},c.prototype.buildSystemMassage=function(){var t=n.instance.getCfgById(26009)[1][0],e=n.instance.getCfgById(26008)[2],i=[null,[3,0,0,e[Math.floor(Math.random()*e.length)],null,null,null,0,0]];l.ChatModel.instance.updateChat([i]),Laya.timer.once(t,this,this.buildSystemMassage)},c.prototype.gmCommand=function(t){var e=[t];this.publish(2097153,e)},c.prototype.getChatRecordReply=function(t){var e=t[1],i=t[0];l.ChatModel.instance.initChatInfoByType(i);for(var n=0,s=e.length;n<s;n++)this.updateChat([e[n]],!0);for(var o in l.ChatModel.instance.setChatSpanBeginTm(i),this.blackTableByCurrId)if(this.blackTableByCurrId.hasOwnProperty(o)){var a=this.blackTableByCurrId[o];a&&0<a.length&&(l.ChatModel.instance.blackListOpt=3,c.instance.blackListOpt([[parseInt(o),a[a.length-1]],3]))}},c.prototype.updateChat=function(t,e){void 0===e&&(e=!1);var i=t[0][1];if(i){5===i[1]&&(i[5]=[t[0][0][0]]),0===i[0]&&h.instance.addBroadcast(l.ChatUtil.parseBroadcaset(i,!0));for(var n=t[0][0][0],s=t[0][0][2],o=0,a=l.ChatModel.instance.blackList.length;o<a;o++)if(l.ChatModel.instance.blackList[o][0]==n)return void(e?(this.blackTableByCurrId[n]||(this.blackTableByCurrId[n]=new Array),-1===this.blackTableByCurrId[n].indexOf(s)&&this.blackTableByCurrId[n].push(s)):(l.ChatModel.instance.blackListOpt=3,c.instance.blackListOpt([[n,s],3])));if(n&&0==i[1]){var r=i[3];r=(r=l.ChatModel.instance.wordReplace(r)).substr(0,38),i[3]=l.ChatModel.instance.chatFaceformatStr(r)}l.ChatModel.instance.updateChat(t,e)&&l.ChatModel.instance.setChatSpanBeginTm(i[0])}},c.prototype.getChatDetailedInfo=function(t){console.log("本区 请求聊天玩家详细信息",t),this.publish(3145729,t)},c.prototype.setVipChatShow=function(t){this.publish(2099456,[t]),console.log("设置聊天vip等级显示",t)},c.prototype.getChatPlayerDetailedInfoReply=function(t){console.log("本区 获取聊天玩家详细信息返回",t),t[0]?l.ChatModel.instance.initOtherPlayerInfo([null,null,null]):l.ChatModel.instance.initOtherPlayerInfo([t[1],t[2],t[3]])},c.prototype.sendChatMessage=function(t){var e=PlayerModel.instance.actorId;this.publish(3145728,[e,t]);var i=t[0],n=t[1];o.runActorOper(1,[i,n])},c.prototype.chatReply=function(t){var e=t[0];e?(o.noticeError(e),GlobalData.dispatcher.event("SEND_RESULT",0)):(s.instance.addNotice("发送成功"),GlobalData.dispatcher.event("SEND_RESULT",1))},c.prototype.getCharInfo=function(){this.publish(2100354,null)},c.prototype.selectChatDesignation=function(t){0===t?console.log("取消称号展示"):console.log("勾选在聊天中显示的称："+t),this.publish(2102367,[t])},c.prototype.selectChatDesignationReply=function(t){console.log("勾选在聊天中显示的称号返回",t),o.noticeError(t[0],"设置成功")},c.prototype.getChatInfoReply=function(t){l.ChatModel.instance.sendVipFaceTime=t[0],l.ChatModel.instance.sendVipPkgcnt=t[1]},c.prototype.updateChatInfo=function(t){l.ChatModel.instance.sendVipFaceTime=t[0],l.ChatModel.instance.sendVipPkgcnt=t[1]},c.prototype.getChatRecord=function(t){var e=PlayerModel.instance.actorId;this.publish(3145730,[e,t])},c.prototype.blackListOpt=function(t){this.publish(2100353,t)},c.prototype.blackListOptReply=function(t){var e=t[0];e?o.noticeError(e):1==l.ChatModel.instance.blackListOpt&&s.instance.addNotice("加入黑名单成功")},c.prototype.getBlackList=function(){this.publish(2100352,null)},c.prototype.getBlackListReply=function(t){l.ChatModel.instance.updateBlackList(t),this.getChatRecord(1),this.getChatRecord(2),this.getChatRecord(3),this.getFactionChat(),this.getTeamChat()},c.prototype.getFactionChat=function(){void 0===t.faction.FactionModel.instance.hasFaction?Laya.timer.once(500,this,this.getFactionChat):t.faction.FactionModel.instance.hasFaction&&this.getChatRecord(4)},c.prototype.getTeamChat=function(){void 0===t.warband.WarbandModel.instance.info?Laya.timer.once(500,this,this.getTeamChat):t.warband.WarbandModel.instance.info&&this.getChatRecord(6)},c.prototype.updateBlackList=function(t){l.ChatModel.instance.updateBlackList(t)},c.prototype.gmCommandReply=function(t){var e=t[0];0===e?s.instance.addNotice("GM命令执行成功"):o.noticeError(e)},c.prototype.UpdateChatBan=function(t){l.ChatModel.instance.UpdateChatBan(t)},a=c,l.ChatCtrl=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._dic1=[],this._dic2=[],this._maxLvArr=[];for(var t=GlobalData.getConfig("strong_rise"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[0];0==n[1]?this._dic1[s]=n:(this._dic2[s]=n,0==s&&(this._maxLvArr[0]=t[e-1][0]))}this._maxLvArr[1]=t[t.length-1][0]},n.prototype.getCfgBy_DASHI_Lev=function(t){return this._dic1[t]},n.prototype.getCfgBy_SHENJIANG_Lev=function(t){return this._dic2[t]},i=n,e.IntensiveCfg=i}(modules=modules||{}),function(t){var e,r,l,h,c,i;function n(){this.partLvs=[]}e=t.intensive||(t.intensive={}),r=t.bag.BagModel,l=t.player.PlayerModel,h=t.redPoint.RedPointCtrl,c=t.config.StrongRefineCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateInfo=function(t){for(var e=(this.info=t)[0],i=0,n=e.length;i<n;i++)this.partLvs[e[i][0]-1]=e[i][1];GlobalData.dispatcher.event("INTENSIVE_UPDATE"),this.setDotDis()},n.prototype.setDotDis=function(){if(this.info){var t=l.instance.equipsDic;if(t)if(this.info[2])h.instance.setRPProperty("intensiveRP",!0);else if(this.info[4])h.instance.setRPProperty("intensiveRP",!0);else{var e=t.keys;if(0<e.length)for(var i=r.instance.getItemCountById(10120001),n=l.instance.copper,s=0,o=e.length;s<o;s++){var a=c.instance.getCfgByLv(this.partLvs[e[s]-1]);if(a[1][0]&&a[1][1]<=i&&a[2]<=n)return void h.instance.setRPProperty("intensiveRP",!0)}h.instance.setRPProperty("intensiveRP",!1)}}},n.prototype.getComProCount=function(t){for(var e=0,i=0,n=this.partLvs.length;i<=n;i++)this.partLvs[i]>=t&&e++;return e},i=n,e.IntensiveModel=i}(modules=modules||{}),function(t){var e,i;function n(){this._cfgs=GlobalData.getConfig("human"),this.maxLv=this._cfgs[this._cfgs.length-1][1]}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgByLv=function(t){return this._cfgs[t-1]},i=n,e.HumanCfg=i}(modules=modules||{}),function(t){var e,p,u,n,s,i;function o(){this._arr=[],this._ids=[],this.lv=-1,this.isInit=!1}e=t.born||(t.born={}),p=t.player.PlayerModel,u=t.bag.BagModel,n=t.redPoint.RedPointCtrl,s=t.config.BornCfg,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.updateInfo=function(t){this._arr.length=0;var e=t[this._ids.length=0];e>this.lv&&-1!=this.lv&&WindowManager.instance.open(384);var i=this.lv!=e,n=!1,s=Math.floor(this.lv/100),o=Math.floor(e/100);this.isInit?o!=s&&(n=!0):this.isInit=!0,this.lv=e,p.instance.bornLev=this.lv,u.instance.setMaxStage(this.lv);for(var a=t[1],r=0,l=a.length;r<l;r++){var h=a[r],c=h[0];this._ids.push(c),this._arr[c]=h}GlobalData.dispatcher.event("BORN_UPDATE"),!i&&0!==this.lv||GlobalData.dispatcher.event("BORN_LV_UPDATE"),n&&(console.log("后台打点,转生等级"+s+"到了"+o),PlatParams.playerLevelUp()),this.checkRP()},o.prototype.checkRP=function(){if(s.instance.getCfgByLv(this.lv,1)){for(var t=0,e=this._ids.length-1;0<=e;e--){var i=this._arr[this._ids[e]];if(1==i[1])return void n.instance.setRPProperty("bornRP",!0);2==i[1]&&++t}n.instance.setRPProperty("bornRP",t===this._ids.length)}else n.instance.setRPProperty("bornRP",!1)},o.prototype.formatLv=function(t){return""+Math.floor(t/100)+t%100},o.prototype.getEraNode=function(t){return this._arr[t]},Object.defineProperty(o.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),o.prototype.bornPositionUtls=function(t,e,i,n,s,o,a){if(void 0===a&&(a=.8),e.visible=i.visible=n.visible=s.visible=!!t,t){var r=Math.floor(t/100);if(10===r)e.value="0",o.scale(1,1,!0);else if(10<r){var l=Math.floor(r/10),h=r%10;e.value=(1===l?"":l)+"0"+(h||""),o.scale(a,a,!0)}else e.value=r+"",o.scale(1,1,!0);var c=e.value.length||1,p=t%100;n.value=p.toString(),i.x=58*c+e.spaceX*(c-1)+e.x,n.x=i.x+i.width+5,s.x=58+n.x}},i=o,e.BornModel=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.email||(t.email={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getEmailHeadsReply=function(t){this.emailA1Data||(this.emailA1Data=new Array,this.emailA2Data=new Array,this.emailA3Data=new Array,this.emailB1Data=new Array,this.emailB2Data=new Array);for(var e=t[0],i=0,n=e.length;i<n;i++)this.addEmail(e[i]);GlobalData.dispatcher.event("EMAIL_LIST_UPDATE")},n.prototype.addEmail=function(t){var e=t[5];0===e?this.addEmailBySort(t[4]?this.emailA1Data:this.emailB1Data,t):1===e?this.addEmailBySort(t[4]?this.emailA2Data:this.emailB2Data,t):2===e&&this.addEmailBySort(this.emailA3Data,t)},n.prototype.addEmailBySort=function(t,e){if(t){for(var i=-1,n=0,s=t.length;n<s;n++)if(e[2]>=t[n][2]){i=n;break}-1===i?t.push(e):t.splice(i,0,e)}},Object.defineProperty(n.prototype,"newShowEmail",{get:function(){return this._newShowEmail},set:function(t){if(this._newShowEmail=t){var e,i=t[0];if(!i)throw console.log("服务器发送了错误的邮件信息.............",t),new Error("服务器发送了错误的邮件信息............."+t);(e=this.getEmailFromArr(i,this.emailA1Data))?this._newShowEmail[5]=e[5]:(e=this.getEmailFromArr(i,this.emailA2Data))?this._newShowEmail[5]=e[5]:(e=this.getEmailFromArr(i,this.emailA3Data))?this._newShowEmail[5]=e[5]:(e=this.getEmailFromArr(i,this.emailB1Data))?this._newShowEmail[5]=e[5]:(e=this.getEmailFromArr(i,this.emailB2Data))&&(this._newShowEmail[5]=e[5]),GlobalData.dispatcher.event("EMAIL_SINGLE_UPDATE")}},enumerable:!0,configurable:!0}),n.prototype.getEmailFromArr=function(t,e){if(!e)return null;for(var i=0,n=e.length;i<n;i++)if(e[i][0]===t)return e[i];return null},n.prototype.addUuidAndEmailData=function(t){for(var e=t[0],i=0,n=e.length;i<n;i++)this.addEmail(e[i]);GlobalData.dispatcher.event("EMAIL_LIST_UPDATE")},n.prototype.checkHasRedPoint=function(){return!(!this.emailA1Data||0==this.emailA1Data.length&&0===this.emailA2Data.length&&0===this.emailB1Data.length)},n.prototype.updateEmailsState=function(t){for(var e=t[0],i=0,n=e.length;i<n;i++){var s=e[i];this._newShowEmail&&s[0]===this._newShowEmail[0]&&(this._newShowEmail[5]=s[1],GlobalData.dispatcher.event("EMAIL_SINGLE_UPDATE")),this.stateChangeFromArr(this.emailA1Data,s)||this.stateChangeFromArr(this.emailA2Data,s)||this.stateChangeFromArr(this.emailB1Data,s)}GlobalData.dispatcher.event("EMAIL_LIST_UPDATE")},n.prototype.stateChangeFromArr=function(t,e){for(var i,n=!1,s=0,o=t.length;s<o;s++)if((i=t[s])[0]===e[0]){n=!0,i[5]=e[1],t.splice(s,1),this.addEmail(i);break}return n},n.prototype.emailDeleteChange=function(t){for(var e,i=t[0],n=!1,s=0,o=i.length;s<o;s++)e=i[s],n=(n=(n=(n=(n=this.removeFromArr(this.emailA3Data,e))||this.removeFromArr(this.emailB2Data,e))||this.removeFromArr(this.emailA1Data,e))||this.removeFromArr(this.emailA2Data,e))||this.removeFromArr(this.emailB1Data,e);n&&GlobalData.dispatcher.event("EMAIL_LIST_UPDATE")},n.prototype.removeFromArr=function(t,e){var i=!1;if(t)for(var n=0,s=t.length;n<s;n++)if(t[n][0]===e){t.splice(n,1),i=!0;break}return i},n.prototype.getEmailCount=function(){return this.emailA1Data?this.emailA1Data.length+this.emailA2Data.length+this.emailA3Data.length+this.emailB1Data.length+this.emailB2Data.length:0},i=n,e.EmailModel=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.task||(t.task={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"taskInfo",{get:function(){return this._taskInfo},enumerable:!0,configurable:!0}),n.prototype.updateTaskInfo=function(t){this._taskInfo=t,GlobalData.dispatcher.event("TASK_UPDATED")},i=n,e.TaskModel=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t,e=GlobalData.getConfig("task"),i=0,n=e.length;i<n;i++)t=e[i],this._table[t[0]]=t},n.prototype.getTaskCfgById=function(t){return this._table[t]},i=n,e.TaskCfg=i}(modules=modules||{}),function(t){var i,s,e,l,h,n;function c(){var t=s.call(this)||this;return t._selectedIndex=-1,t._lastPos=0,t.shiftingX=0,t.shiftingY=0,t.scrollEvt=!1,t.scrollDir=1,t.spaceX=t.spaceY=0,t._scrollPos=0,t.hCount=t.vCount=1,t._con=new e,t.addChild(t._con),t.on(l.DISPLAY,t,t.displayHandler),t.on(l.UNDISPLAY,t,t.undisplayHandler),t.items=new Array,t._recordX=t._recordY=0,t}i=t.common||(t.common={}),e=Laya.Sprite,l=Laya.Event,h=Laya.Rectangle,s=e,__extends(c,s),c.create=function(t,e,i,n,s,o,a,r){void 0===a&&(a=5),void 0===r&&(r=1);var l=new c;return l.scrollDir="v"==t?1:2,l.pos(e,i),l.size(n,s),"v"==t?l.hCount=r:l.vCount=r,"v"==t?l.spaceY=a:l.spaceX=a,l.itemRender=o,l},c.prototype.displayHandler=function(){this._con.on(l.MOUSE_DOWN,this,this.downHandler),this._con.on(l.MOUSE_WHEEL,this,this.wheelHandler)},c.prototype.undisplayHandler=function(){this._con.off(l.MOUSE_DOWN,this,this.downHandler),this._con.off(l.MOUSE_WHEEL,this,this.wheelHandler)},c.prototype.downHandler=function(){this._lastPos=1===this.scrollDir?this._con.mouseY:this._con.mouseX,Laya.stage.on(l.MOUSE_MOVE,this,this.moveHandler),Laya.stage.on(l.MOUSE_UP,this,this.upHandler),Laya.stage.on(l.MOUSE_OUT,this,this.upHandler)},c.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scroll(e)},c.prototype.moveHandler=function(){var t=this._lastPos-(1===this.scrollDir?this._con.mouseY:this._con.mouseX);this.scroll(t),this._lastPos=1===this.scrollDir?this._con.mouseY:this._con.mouseX,this.scrollEvt&&i.GlobalData.dispatcher.event("LIST_SCROLLET_MOVE")},c.prototype.upHandler=function(){Laya.stage.off(l.MOUSE_MOVE,this,this.moveHandler),Laya.stage.off(l.MOUSE_UP,this,this.upHandler),Laya.stage.off(l.MOUSE_OUT,this,this.upHandler)},Object.defineProperty(c.prototype,"conWidth",{get:function(){return this._con.width},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"conHeight",{get:function(){return this._con.height},enumerable:!0,configurable:!0}),c.prototype.scroll=function(t){if(!(1===this.scrollDir?this._con.height<this.height:this._con.width<this.width)){var e=this._con.scrollRect;1===this.scrollDir?(e.y=e.y+t,e.y<0?e.y=0:e.y>this._con.height-this.height&&(e.y=this._con.height-this.height),this._scrollPos=e.y):2===this.scrollDir&&(e.x=e.x+t,e.x<0?e.x=0:e.x>this._con.width-this.width&&(e.x=this._con.width-this.width),this._scrollPos=e.x),this._con.scrollRect=e,this.scrollEvt&&i.GlobalData.dispatcher.event("LIST_SCROLLET_MOVE")}},c.prototype.scrollTo=function(t){if(1===this.scrollDir?this._con.height<this.height:this._con.width<this.width)this._scrollPos=0;else{var e=this._con.scrollRect;1===this.scrollDir?(e.y=t,e.y<0?e.y=0:e.y>this._con.height-this.height&&(e.y=this._con.height-this.height),this._scrollPos=e.y):2===this.scrollDir&&(e.x=t,e.x<0?e.x=0:e.x>this._con.width-this.width&&(e.x=this._con.width-this.width),this._scrollPos=e.x),this._con.scrollRect=e,this.scrollEvt&&i.GlobalData.dispatcher.event("LIST_SCROLLET_MOVE")}},Object.defineProperty(c.prototype,"scrollPos",{get:function(){return this._scrollPos},set:function(t){this.scrollTo(t)},enumerable:!0,configurable:!0}),c.prototype.scrollToIndex=function(t){var e=this.items[t];e&&(1===this.scrollDir?this.scrollTo(e.y):2===this.scrollDir&&this.scrollTo(e.x))},Object.defineProperty(c.prototype,"datas",{get:function(){return this._datas},set:function(t){if(this._datas=t,this._con.removeChildren(),t){this._recordX=this._recordY=0;for(var e=0,i=0,n=0,s=0,o=0,a=t.length;o<a;o++){var r=this.items[o];r||(r=new this._itemRender,(this.items[o]=r).on(l.MOUSE_DOWN,this,this.itemDownHandler),r.on(l.MOUSE_UP,this,this.itemUpHandler)),r.index=o,r.data=t[o],e=r.width,i=r.height,1===this.scrollDir?(o%this.hCount==0?(this._recordY+=s+(0===o?0:this.spaceY),s=i,this._recordX=0):(this._recordX+=e+this.spaceX,s=s<i?i:s),r.pos(this._recordX+this.shiftingX,this._recordY+this.shiftingY,!0)):2===this.scrollDir&&(n=o%this.vCount==0?(this._recordX+=n+(0===o?0:this.spaceX),e):(this._recordY+=i+this.spaceY,n<e?e:n),r.pos(this._recordX+this.shiftingX,this._recordY+this.shiftingY,!0)),this._con.addChild(r)}this._con.scrollRect=new h(0,0,this.width,this.height),1===this.scrollDir?this._con.size(this._recordX+e,this._recordY+s):2===this.scrollDir&&this._con.size(this._recordX+n,this._recordY+i)}},enumerable:!0,configurable:!0}),c.prototype.itemDownHandler=function(t){this._downX=this.mouseX,this._downY=this.mouseY,this._downTime=Browser.now(),this._downTarget=t.currentTarget},c.prototype.itemUpHandler=function(t){if(this._downTarget===t.currentTarget){var e=this.mouseX-this._downX,i=this.mouseY-this._downY,n=Browser.now()-this._downTime;e<5&&-5<e&&i<5&&-5<i&&n<300&&this.itemClickHandler(t)}},Object.defineProperty(c.prototype,"itemRender",{set:function(t){this._itemRender=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"selectedData",{get:function(){return this._selectedData},set:function(t){this.selectedIndex=this._datas.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"selectedItem",{get:function(){return this._selectedItem},set:function(t){!this.canSelectSameItem&&this._selectedItem===t||(this.selectedIndex=this.items.indexOf(t))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex=t,this._selectedItem&&(this._selectedItem.selected=!1),this._selectedItem=this.items?this.items[this._selectedIndex]:null,this._selectedItem&&(this._selectedItem.selected=!0),this._selectedData=this._datas?this._datas[this._selectedIndex]:null,this.event(l.SELECT)},enumerable:!0,configurable:!0}),c.prototype.itemClickHandler=function(t){var e=t.currentTarget;e.selectEnable&&(this.selectedItem=e)},c.prototype.relayout=function(){this._recordX=this._recordY=0;for(var t=0,e=0,i=0,n=0,s=0,o=this._datas.length;s<o;s++){var a=this.items[s];if(!a)break;t=a.width,e=a.height,1===this.scrollDir?(s%this.hCount==0?(this._recordY+=n+(0===s?0:this.spaceY),n=e,this._recordX=0):(this._recordX+=t+this.spaceX,n=n<e?e:n),a.pos(this._recordX+this.shiftingX,this._recordY+this.shiftingY,!0)):2===this.scrollDir&&(i=s%this.vCount==0?(this._recordX+=i+(0===s?0:this.spaceX),t):(this._recordY+=e+this.spaceY,i<t?t:i),a.pos(this._recordX+this.shiftingX,this._recordY+this.shiftingY,!0))}1===this.scrollDir?this._con.size(this._recordX+t,this._recordY+n):2===this.scrollDir&&this._con.size(this._recordX+i,this._recordY+e)},Object.defineProperty(c.prototype,"getListH",{get:function(){return this._con.height},enumerable:!0,configurable:!0}),c.prototype.destroy=function(t){if(void 0===t&&(t=!0),this.undisplayHandler(),this.upHandler(),this._datas&&(this._datas=null),this.items){for(var e=0,i=this.items;e<i.length;e++){var n=i[e];n.off(l.MOUSE_DOWN,this,this.itemDownHandler),n.off(l.MOUSE_UP,this,this.itemUpHandler),n.destroy(!0)}this.items=null}s.prototype.destroy.call(this,t)},n=c,i.CustomList=n}(modules=modules||{}),function(v){var I,e,t,i,b,C,T,w,x,n;function s(){return e.call(this)||this}I=v.chat||(v.chat={}),t=ui.MainChatItemUI,i=v.common.CustomClip,b=v.config.BlendCfg,C=v.config.ItemMaterialCfg,T=v.config.ItemEquipCfg,w=v.config.ItemRuneCfg,x=v.common.CommonUtil,e=t,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),x.setHTMLPro(this.txt,"#ffffff","SimHei",22),this.txt.style.wordWrap=!0,this.txt.style.leading=5,this._expendFace=new i,this.addChild(this._expendFace)},s.prototype.setData=function(t){var e=t,i=I.ChatModel.instance.currChatChannel;this._expendFace.stop(),this._expendFace.visible=!1,this.txt.innerHTML="",this.txt.style.height=this.height=22,this.txt.y=0;var n=1==i?"jz":2==i?"bf":4==i?"xm":6==i?"zd":3==i?"xt":5==i?"sl":"";if(this.serveImg.skin="chat/image_lt_"+n+".png",e[0]&&0==e[0][0]&&(this.serveImg.skin="chat/image_lt_xt.png"),this.txt.x=60,this.txt.width=516,this.VipMsz.visible=!1,this.serveImg.visible=!0,this.facePkgImg.visible=!1,3==i){var s=I.ChatUtil.parseBroadcaset(e[1]);this.setContent(s),this.height=this.txt.height,this.height=this.txt.contextHeight}else{var o=e[0],a=o[5],r=e[1],l=r[3],h=r[1],c=o[2];if(a&&(this.txt.x=80,this.txt.width=496,this.VipMsz.visible=!0),0==h||9===h)this.setContent("<span style='color:#ffec7c'>"+c+"</span>:"+l),this.height=this.txt.height,this.centerYHtml();else if(1==h){var p=r[2];l=I.ChatModel.instance.chatFaceformatStr(b.instance.chatMarkedWords[p]),this.setContent("<span style='color:#ffec7c'>"+c+"</span>:"+l),this.height=this.txt.height,this.centerYHtml()}else if(2==h){p=r[2],this.setContent("<span style='color:#ffec7c'>"+c+"</span>:"),this._expendFace.x=this.txt.contextWidth+this.txt.x+10,I.ChatModel.instance.setFaceEffFrame(this._expendFace,p),this._expendFace.play(),this._expendFace.visible=!0,this.height=64;var u=(this.height-this.txt.height)/2;this.txt.y=u,this.serveImg.y=this.VipMsz.y=this.txt.y}else if(3==h){var d=r[4][0],m=x.getItemTypeById(d),f=x.getColorById(d),g=void 0;if(1==m||6==m||3==m)g=C.instance.getItemCfgById(d)[1];else if(5==m)g=T.instance.getItemCfgById(d)[1];else if(7==m){var y=1e4*(1e-4*d>>0);g=w.instance.getCfgById(y)[1]+"符文"}else 4==m&&(g=v.config.StoneCfg.instance.getCfgById(d)[2]);this.setContent("<span style='color:#ffec7c'>"+c+"</span><span style='color:"+f+"'>["+g+"]</span>"),this.serveImg.y=this.VipMsz.y=this.txt.y}else if(4==h)s="<span style='color:#ffec7c'>"+c+"</span>:"+I.ChatUtil.parseBroadcaset(r),this.setContent(s),this.serveImg.y=this.VipMsz.y=this.txt.y,this.height=this.txt.height;else if(5==h)s="<span style='color:#ffec7c'>"+c+"</span>:"+I.ChatUtil.parseBroadcaset(r),this.setContent(s),this.serveImg.y=this.VipMsz.y=this.txt.y,this.height=this.txt.height;else if(6==h)p=r[2],this.txt.innerHTML="<span style='color:#ffec7c'>"+c+"</span>:",this.height=64,u=(this.height-this.txt.height)/2,this.txt.y=u,this.serveImg.y=this.VipMsz.y=this.txt.y,this.facePkgImg.x=this.txt.x+this.txt.contextWidth+20,this.facePkgImg.visible=!0,this.facePkgImg.skin="assets/icon/expression/"+p+".png";else if(7===h)s="<span style='color:#ffec7c'>"+c+"</span>:<span style='color:#ffffff'>[发放了红包，打开聊天界面查看]</span>",this.setContent(s),this.height=this.txt.contextHeight,this.centerYHtml();else if(8===h){p=r[2];var _=v.redBag.RedBagModel.instance.getPkgByUid(p);_?(s="<span style='color:#ffec7c'>"+c+"</span>:感谢<span style='color:#0ecf09'>【"+_[3][2]+"】</span>红包:"+r[3],this.setContent(s),this.height=this.txt.height):this.setContent(r[3]),this.height=this.txt.contextHeight,this.centerYHtml()}}},s.prototype.setContent=function(t){try{this.txt.innerHTML=t}catch(t){console.log("main_chat_item  html格式错误！！！")}},s.prototype.centerYHtml=function(){for(var t=-1,e=0,i=this.txt.numChildren;e<i;e++){var n=this.txt.getChildAt(e);if(n instanceof Laya.HTMLImageElement){t=n.y;break}}this.serveImg.y=this.VipMsz.y=0===t?18:0},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._expendFace=this.destroyElement(this._expendFace),e.prototype.destroy.call(this,t)},n=s,I.MainChatItem=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._mapIdTable={},this._cfgs=GlobalData.getConfig("scene_cross_boss");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];this._table[i[2]]=i;var n=this._mapIdTable[i[0]];n||(n={},this._mapIdTable[i[0]]=n),n[i[1]]=i}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByBossId=function(t){return this._table[t]},n.prototype.getCfgByMapIdAndLv=function(t,e){return this._mapIdTable&&this._mapIdTable[t]?this._mapIdTable[t][e]:null},i=n,e.SceneCrossBossCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._layerTable={},this._bossIdTable={},this._totalLayer=[],this._npdIdTable={},this._tab={};for(var t=GlobalData.getConfig("scene_home_boss"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[1];this._tab[s]||(this._tab[s]=n);var o=this._layerTable[s];o||(o=new Array,this._totalLayer.push(n)),o.push(n),this._layerTable[s]=o,this._bossIdTable[n[2]]=n,this._npdIdTable[s]||(this._npdIdTable[s]={}),this._npdIdTable[s][n[9]]=n}},n.prototype.getCfgByLayer=function(t){return this._layerTable[t+1]},n.prototype.getCfgByBossId=function(t){return this._bossIdTable[t]},n.prototype.getTotalLayerCfg=function(){return this._totalLayer},n.prototype.getCfgByNpcId=function(t,e){return this._npdIdTable[t]?this._npdIdTable[t][e]:null},n.prototype.getCfgByFirstLayer=function(t){return this._tab[t]},i=n,e.SceneHomeBossCfg=i}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=t.common.CommonUtil,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._table=GlobalData.getConfig("monster_res");var t=GlobalData.getConfig("monster_res_name");if(this._tableName=[],t&&0<t.length)for(var e=0;e<t.length;e++){var i=t[e];this._tableName[i[0]]=i[1]}},s.prototype.getCfgById=function(t){return GlobalData.searchByIndex1(this._table,t)},s.prototype.getMonsterLevel=function(t){var e=this.getCfgById(t)[2];return n.splitNumber2(e,8)},s.prototype.getMonsterHpNum=function(t){var e=this.getCfgById(t)[2];return n.splitNumber2(e,4,4)},s.prototype.getMonsterDeptType=function(t){var e=this.getCfgById(t)[2];return n.splitNumber2(e,3,1)},s.prototype.getMonsterItemType=function(t){var e=this.getCfgById(t)[2];return n.splitNumber2(e,0,3)},s.prototype.getMonsterName=function(t){var e=this.getCfgById(t)[1],i=n.splitNumber2(e,8);return this._tableName[i]},s.prototype.getMonsterType=function(t){var e=this.getCfgById(t)[1];return n.splitNumber2(e,7,1)},s.prototype.getMonsterRadius=function(t){var e=this.getCfgById(t)[1];return n.splitNumber2(e,4,3)},s.prototype.getMonsterRes=function(t){var e=this.getCfgById(t)[1];return n.splitNumber2(e,0,4)},i=s,e.MonsterResCfg=i}(modules=modules||{}),function(t){var e,a,i,n;function s(){this._selectLastBoss=-1,this._beAttackId={},this._attackId={},this._attackIdGuiShu={},this._bossOwn={},this._playerToBoss={},this._bossHomeShow={};var t=i.instance.getCfgById(10605);this._interTime=t[1][0]}e=t.bossDungeon||(t.bossDungeon={}),a=utils.TableUtils,i=t.config.BlendCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.resetShuJu=function(){this._beAttackId={},this._attackId={},this._attackIdGuiShu={},this._bossHomeShow={}},s.prototype.getBossOnwer=function(t){var e=this._bossOwn[t];return null!=e?e[1]:0},s.prototype.getPlayerInfo=function(){return this._bossHomeShow[PlayerModel.instance.actorId]||(this._bossHomeShow[PlayerModel.instance.actorId]=[PlayerModel.instance.actorId,PlayerModel.instance.roleName,!1]),a.values(this._bossHomeShow)},s.prototype.updateBossDropOwns=function(t){this._ownsInfo=t;for(var e=0,i=this._ownsInfo;e<i.length;e++){var n=i[e],s=n[0],o=n[1],a=this._bossOwn[s];if(0==o){if(a){var r=a[1];delete this._playerToBoss[r],delete this._bossOwn[s]}}else a&&delete this._playerToBoss[a[1]],this._bossOwn[s]=n,this._playerToBoss[o]=s}GlobalData.dispatcher.event("BOSS_OWN_UPDATE")},s.prototype.getOwnByBossId=function(t){return this._bossOwn?this._bossOwn[t]:null},s.prototype.isSelectBossOwner=function(t){return this._playerToBoss[t]==this._selectLastBoss},s.prototype.playerIsOwn=function(t){return!!this._playerToBoss[t]},Object.defineProperty(s.prototype,"selectLastBoss",{get:function(){return this._selectLastBoss},set:function(t){this._selectLastBoss=t},enumerable:!0,configurable:!0}),s.prototype.setPlayAttackId=function(t){this._attackId[t]=GlobalData.serverTime,this._attackIdGuiShu[t]=GlobalData.serverTime,GlobalData.dispatcher.event("BOSS_ATTACK_UPDATE")},s.prototype.playerIsMeAttackGuiShu=function(t){return!!this._attackIdGuiShu[t]},s.prototype.playerIsMeAttack=function(t){return!!this._attackId[t]},s.prototype.setBeAttackId=function(t){this._beAttackId[t]=GlobalData.serverTime,GlobalData.dispatcher.event("BOSS_ATTACK_UPDATE")},s.prototype.playerIsAttackMe=function(t){return!!this._beAttackId[t]},s.prototype.loopHandler=function(){this.checkDelete(this._attackId,this._interTime),this.checkDelete(this._beAttackId,this._interTime),this.checkDelete(this._attackIdGuiShu,1e3)},s.prototype.checkDelete=function(t,e){if(t)for(var i=0,n=a.keys(t);i<n.length;i++){var s=n[i],o=t[s];GlobalData.serverTime-o>=e&&(delete t[s],GlobalData.dispatcher.event("BOSS_ATTACK_UPDATE"))}},n=s,e.BossDungeonModel=n}(modules=modules||{}),function(t){var n,e,i,s,o,a,r,l,h,c;function p(){this._layerInfo=[],this._layerInfo=s.instance.getTotalLayerCfg(),this._bossHomeOffsetLv=e.instance.getCfgById(10606)[1][0],this._findPathState=3}n=t.bossHome||(t.bossHome={}),e=t.config.BlendCfg,i=t.config.MonsterResCfg,s=t.config.SceneHomeBossCfg,o=t.player.PlayerModel,a=t.scene.SceneModel,r=t.vip.VipModel,l=t.born.BornModel,h=t.bossDungeon.BossDungeonModel,Object.defineProperty(p,"instance",{get:function(){return this._instance=this._instance||new p},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"findPathState",{get:function(){return this._findPathState},set:function(t){this._findPathState!==t&&(3!==this._findPathState||1!==t&&2!==t)&&(this._findPathState=t,GlobalData.dispatcher.event("BOSS_HOME_FIND_PATH_STATE_CHANGE"))},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"bossIds",{get:function(){return this._bossIds},enumerable:!0,configurable:!0}),p.prototype.setSelectTarget=function(t,e){var i=o.instance;if(-1==t)1==i.selectTargetType?this._showPlayerlList&&this._showPlayerlList.initSelectIndex():2==i.selectTargetType&&this._showBossList&&this._showBossList.initSelectIndex(),e&&(h.instance.selectLastBoss=t),i.selectTarget(0,-1),GlobalData.dispatcher.event("BOSS_OWN_UPDATE");else if(e){this._showPlayerlList&&this._showPlayerlList.initSelectIndex();var n=DungeonModel.instance.getBossInfoById(t);n?(h.instance.selectLastBoss=t,i.selectTarget(1,t),h.instance.selectTargetPos=n[3]):(h.instance.selectLastBoss=-1,i.selectTarget(0,-1)),GlobalData.dispatcher.event("BOSS_OWN_UPDATE")}else this._showBossList&&this._showBossList.initSelectIndex(),i.selectTarget(2,t);GlobalData.dispatcher.event("BOSS_MOVE_POS_UPDATE")},p.prototype.updateBigBossState=function(t){this.bigBossState=t},p.prototype.updateOpenTimes=function(t){this.remainTimes=t[1],this.totalTimes=t[0],this.addTimes=t[2],GlobalData.dispatcher.event("BOSS_HOME_UPDATE_TIMES")},p.prototype.checkIsFollowBoss=function(t){var e=DungeonModel.instance.getFollowBossById(t);return e&&e[1]},p.prototype.getBossSeversInfoById=function(t){return DungeonModel.instance.getBossInfoById(t)},p.prototype.getBossInfoByLayer=function(t){this._bossIds=[],this._allBossInfo=s.instance.getCfgByLayer(t);for(var e=0;e<this._allBossInfo.length;e++)this._bossIds.push(this._allBossInfo[e][2]);return this._allBossInfo},p.prototype.getIndexByBossId=function(t){if(this._bossIds&&0<this._bossIds.length)for(var e=0;e<this._bossIds.length;e++)if(this._bossIds[e]==t)return e;return-1},p.prototype.getBossInfoInUpate=function(){return this._allBossInfo},p.prototype.getBossInfoByIndex=function(t){return this._allBossInfo[t]},p.prototype.getCfgByid=function(t){return i.instance.getCfgById(t)},p.prototype.getHomeCfgByid=function(t){return s.instance.getCfgByBossId(t)},p.prototype.getVipByLayer=function(t){return this._layerInfo[t][4]},p.prototype.getBtnNameByLayer=function(t){return this._layerInfo[t][3]},p.prototype.getTotalLayer=function(){return this._layerInfo.length},p.prototype.getSelectLayerIndex=function(){for(var t=r.instance.vipLevel,e=this._layerInfo.length-1;0<=e;e--)if(t>=this._layerInfo[e][4])return e;return-1},p.prototype.getIndexByEra=function(){for(var t=Math.floor(l.instance.lv/100),e=this._layerInfo.length-1;0<=e;e--){var i=this._layerInfo[e][5];if(t>=i[0]&&t<=i[1])return e}return-1},p.prototype.checkSvipCondition=function(t){return t<=this.getSelectLayerIndex()},p.prototype.checkPlayerLevelHeigh=function(t){return i.instance.getMonsterLevel(t)<o.instance.level-this._bossHomeOffsetLv},p.prototype.showTwoList=function(){this.desrtoyList(),this._showBossList=new n.BossHomeList,this._showPlayerlList=new n.BossHomeList,this._showBossList.setWidth(270),this._showBossList.setShowName("怪物列表");var t=Math.floor(225);if(this._showBossList.setCenter(t),!this._bossIds||0==this._bossIds.length){var e=a.instance.enterScene[3]-1;this.getBossInfoByLayer(e)}this._showBossList.setBossData(this._bossIds),this._showPlayerlList.setWidth(300),this._showPlayerlList.setShowName("点击列表发起攻击");var i=Math.floor(210)-270;this._showPlayerlList.setCenter(i),this._showPlayerlList.setPlayerData(),LayerManager.instance.addToMainUILayer(this._showBossList),LayerManager.instance.addToMainUILayer(this._showPlayerlList),this._showBossList.zOrder=-1,this._showPlayerlList.zOrder=-1},p.prototype.desrtoyList=function(){this._showBossList&&(this._showBossList.destroy(),this._showBossList=null),this._showPlayerlList&&(this._showPlayerlList.destroy(),this._showPlayerlList=null)},p.prototype.hideTwoList=function(){this.desrtoyList(),h.instance.resetShuJu()},p.prototype.getBossIdsByLayer=function(t){for(var e=[],i=0,n=this.getBossInfoByLayer(t);i<n.length;i++){var s=n[i][2];e.push(s)}return e=e.sort(CommonUtil.smallToBigSort.bind(this))},c=p,n.BossHomeModel=c}(modules=modules||{}),function(t){var e,i;function n(){this.allId=[],this.cfgs=GlobalData.getConfig("activity_all");for(var t=0,e=this.cfgs.length;t<e;t++)this.allId.push(this.cfgs[t][11])}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgBySceneType=function(t){for(var e,i=0,n=this.cfgs.length;i<n;i++)if(this.cfgs[i][7]===t){e=this.cfgs[i];break}return e},i=n,e.ActivityAllCfg=i}(modules=modules||{}),function(t){var e,n,i,s;function o(){this._queue=[],this._con=new i,this._con.centerX=0,this._con.y=360,this._con.anchorX=this._con.anchorY=.5}e=t.notice||(t.notice={}),n=Laya.FontClip,i=Laya.Component,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.addNotice=function(t,e){this._queue.push([t,e]),this.check()},o.prototype.check=function(){this._isPlaying||0!==this._queue.length&&this.playEffect()},o.prototype.playEffect=function(){this._isPlaying=!0;var t=this._queue.pop();if(t){var e=t[0];this._typeImg=this._typeImg||new Laya.Image,this._typeImg.skin="assets/others/score_notice/"+e+".png",this._typeImg.x=-36,this._con.addChild(this._typeImg),this._valueClip||(this._valueClip=new n("common/num_common_7.png","0123456789"),this._con.addChild(this._valueClip));var i=t[1]+"";this._valueClip.value=i,0===e||3===e?(this._valueClip.x=214+this._typeImg.x-30,this._con.width=this._valueClip.x+38*i.length,this._con.height=124,this._valueClip.y=.5*(this._con.height-48)):1!==e&&2!==e||(this._valueClip.x=249+this._typeImg.x-30,this._con.width=this._valueClip.x+38*i.length,this._con.height=130,this._valueClip.y=.5*(this._con.height-48)),LayerManager.instance.addToNoticeLayer(this._con),this._con.scaleX=2,this._con.scaleY=2,this._tween||(this._tween=TweenJS.create(this._con).to({scaleX:1,scaleY:1},200).onComplete(this.tweenEndHandler.bind(this))),this._tween.start()}},o.prototype.tweenEndHandler=function(){Laya.timer.once(1e3,this,this.delayHandler)},o.prototype.sotpAllTween=function(){Laya.timer.clearAll(this),this._queue.length=0,this._tween&&this._tween.stop(),this._typeImg&&(this._typeImg.skin=""),this._con&&this._con.removeSelf(),this._isPlaying=!1},o.prototype.delayHandler=function(){this._typeImg.skin="",this._con.removeSelf(),this._isPlaying=!1,this.check()},s=o,e.ScoreNoticeManager=s}(modules=modules||{}),function(o){var t,e,i;function a(){this.killNum=0,this.haveNum=0,this.autoAtt=0;var t=o.config.BlendCfg.instance.getCfgById(10808)[1],e=o.config.BlendCfg.instance.getCfgById(10809)[1];this.scoreArr={},this.scoreArr[1]=t,this.scoreArr[2]=e}t=o.nine||(o.nine={}),e=o.notice.ScoreNoticeManager,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setAutoAtt=function(t){this.autoAtt=t,CustomDataCtrl.instance.setCustomData(27,[a.instance.autoAtt])},Object.defineProperty(a.prototype,"autoAttClick",{get:function(){return this._autoAttClick},set:function(t){this._autoAttClick=t},enumerable:!0,configurable:!0}),a.prototype.autoCtrl=function(){var t=-1;switch(this.autoAtt){case 1:t=2,this.autoAttClick=1;break;case 2:t=1,this.autoAttClick=2}-1!=t?PlayerModel.instance.selectTarget(t,-1):PlayerModel.instance.selectTarget(0,-1)},Object.defineProperty(a.prototype,"ranks",{get:function(){return this._ranks},set:function(t){this._ranks=t,GlobalData.dispatcher.event("NINE_RANKS_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nineCopy",{get:function(){return this._nineCopy},set:function(t){this._nineCopy=t,this.setRP(),GlobalData.dispatcher.event("NINE_COPY_INFO_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"searchObj",{get:function(){return this._searchObj},set:function(t){this._searchObj=t,GlobalData.dispatcher.event("NINE_SEARCH_OBJ_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"score",{get:function(){return this._score},set:function(t){t[1]&&e.instance.addNotice(0,t[1]),this._score=t,GlobalData.dispatcher.event("NINE_SCORE_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scenePromote",{get:function(){return this._scenePromote},set:function(t){this._scenePromote=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"defeatInfo",{get:function(){return this._defeatInfo},set:function(t){this._defeatInfo=t,GlobalData.dispatcher.event("NINE_DEFEAT_UPDATE")},enumerable:!0,configurable:!0}),a.prototype.getBigBoss=function(){for(var t=o.config.SceneCopyNineBOSSCfg.instance.getArrOccByLevel(o.scene.SceneUtil.curSceneLv),e=0;e<t.length;e++){var i=t[e];if(28===o.config.MonsterCfg.instance.getMonsterById(i)[1]&&!o.dungeon.DungeonModel.instance.bossIsDead(i))return i}return null},a.prototype.setRP=function(){o.redPoint.RedPointCtrl.instance.setRPProperty("nineCopyRP",this.isRp())},a.prototype.isRp=function(){var t=o.funcOpen.FuncOpenModel.instance.getFuncIsOpen(120),e=!!a.instance.nineCopy&&0<a.instance.nineCopy[0],i=!!a.instance.nineCopy&&a.instance.nineCopy[3],n=DungeonModel.instance.getCopySceneStateByType(14),s=n?n[2]:4;return t&&e&&!i&&2===s},a.prototype.isConicne=function(t){return void 0===t&&(t=!1),2===o.nine.NineModel.instance.autoAttClick?(Laya.timer.callLater(this,this.findBoss),!0):1===o.nine.NineModel.instance.autoAttClick?(Laya.timer.callLater(this,this.findPlayer),!0):(t&&PlayerModel.instance.selectTarget(0,-1),!1)},a.prototype.findBoss=function(){PlayerModel.instance.selectTarget(1,-1)},a.prototype.findPlayer=function(){PlayerModel.instance.selectTarget(2,-1)},i=a,t.NineModel=i}(modules=modules||{}),function(i){var t,n,e;function s(){}t=i.activity_all||(i.activity_all={}),n=i.funcOpen.FuncOpenModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getState=function(t){var e=t[11];return n.instance.getFuncIsOpen(e)?116==e&&i.xianfu.XianfuModel.instance.xianfuEventIsOpen()?4:this.getstate(t):0},s.prototype.getstate=function(t){var e=t[7],i=4,n=DungeonModel.instance.getCopySceneStateByType(e);return n&&(i=n[2]),i=1==i?3:2==i?4:3==i?1:2},e=s,t.ActivityAllModel=e}(modules=modules||{}),function(e){var i,t;function n(){}i=e.scene||(e.scene={}),Object.defineProperty(n,"isCommonScene",{get:function(){var t=i.SceneModel.instance.enterScene[0];return 0===e.config.SceneCfg.instance.getCfgById(t)[7]},enumerable:!0,configurable:!0}),Object.defineProperty(n,"currScene",{get:function(){if(i.SceneModel.instance.enterScene){var t=i.SceneModel.instance.enterScene[0];return e.config.SceneCfg.instance.getCfgById(t)[7]}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"curSceneLv",{get:function(){return i.SceneModel.instance.enterScene[3]},enumerable:!0,configurable:!0}),t=n,i.SceneUtil=t}(modules=modules||{}),function(t){var e,i,n,r,a,l,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.activityPreview||(t.activityPreview={}),n=t.core.BaseCtrl,r=t.funcOpen.FuncOpenModel,a=t.scene.SceneUtil,l=t.config.ActivityAllCfg,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.onGlobal("DUNGEON_SCENE_STATE_UPDATE1",this.updateSceneState),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("SCENE_ENTER",this.updateSceneStateRightWin),this.onGlobal("DUNGEON_SCENE_STATE_UPDATE",this.updateSceneStateRightWin),this.onGlobal("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this.isOpenWin)},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];-1!=l.instance.allId.indexOf(i)&&r.instance.getFuncIsOpen(i)&&this.updateSceneState(i)}this.updateSceneStateRightWin()},o.prototype.updateSceneStateRightWin=function(){if(a.isCommonScene&&DungeonModel.instance.sceneStates){var t=!1;for(var e in DungeonModel.instance.sceneStates)if(DungeonModel.instance.sceneStates.hasOwnProperty(e)){var i=DungeonModel.instance.sceneStates[e];if(i){var n=i[2];if(3!==n&&4!==n){var s=l.instance.getCfgBySceneType(i[0]);if(s){var o=s[11];if(r.instance.getFuncIsOpen(o)){t=!0,CommonUtil.whetherInCopy()?WindowManager.instance.close(165):WindowManager.instance.open(165);break}}}}}t||WindowManager.instance.close(165)}else WindowManager.instance.close(165)},o.prototype.updateSceneState=function(t){var e=DungeonModel.instance.sceneStates;if(e){var i=null;for(var n in e)if(e.hasOwnProperty(n)){var s=e[n];if(s&&2===s[2]){var o=l.instance.getCfgBySceneType(s[0]);if(o){var a=o[11];116==a||t&&t!==a||!r.instance.getFuncIsOpen(a)||(i=o)}}}if(i)return void(WindowManager.instance.isOpened(288)?(console.log("预告弹窗 已经打开 刷新数据",i),GlobalData.dispatcher.event("ACTIVITY_ALL_ALERT_OPEN",[i])):(console.log("打开预告弹窗",i),WindowManager.instance.open(288,i)))}},o.prototype.isOpenWin=function(t){if(t&&2===t[2]){var e=l.instance.getCfgBySceneType(t[0]);if(e){var i=e[11];if(116!=i&&971!=i&&r.instance.getFuncIsOpen(i)&&e)return void(WindowManager.instance.isOpened(288)?(console.log("更新 预告弹窗 已经打开 刷新数据",e),GlobalData.dispatcher.event("ACTIVITY_ALL_ALERT_OPEN",[e])):(console.log("更新 打开预告弹窗",e),WindowManager.instance.open(288,e)))}}},s=o,e.ActivityPreviewCtrl=s}(modules=modules||{}),function(l){var a,i,r,t;function e(){this._point=-1,this._hasNewEvent=!1,this._adventureMonsterArr=[],this._dropItems=[],this._flag=!1}a=l.adventure||(l.adventure={}),i=l.notice.ScoreNoticeManager,r=l.redPoint.RedPointCtrl,Object.defineProperty(e,"instance",{get:function(){return this._instance=this._instance||new e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventList",{get:function(){return this._eventList},set:function(t){this._eventList&&t.length>this._eventList.length&&0<e.instance.yunLi&&(this.hasNewEvent=!0,a.AdventureNoticeManager.instance.addNotice()),this._eventList=t,GlobalData.dispatcher.event("ADVENTURE_EVENT_LIST_UPDATE"),this.checkRP()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNewEvent",{get:function(){return this._hasNewEvent},set:function(t){t!==this._hasNewEvent&&(this._hasNewEvent=t,GlobalData.dispatcher.event("ADVENTURE_HAS_NEW_EVENT_UPDATE"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextTriggerTime",{get:function(){return this._nextTriggerTime},set:function(t){this._nextTriggerTime=t,GlobalData.dispatcher.event("ADVENTURE_NEXT_TRIGGER_TIME_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yunLi",{get:function(){return this._yunLi},set:function(t){this._yunLi=t,GlobalData.dispatcher.event("ADVENTURE_YUNLI_UPDATE"),this.checkRP()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){return this._point},set:function(t){if(t>this._point&&-1!==this._point){var e=t-this._point;this._flag?this.adventurePoint=e:i.instance.addNotice(1,e)}this._flag=!1,this._point=t,GlobalData.dispatcher.event("ADVENTURE_POINT_UPDATE"),this.checkShopRP()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hintList",{get:function(){return this._hintList},set:function(t){this._hintList=t,GlobalData.dispatcher.event("ADVENTURE_HINT_LIST_UPDATE"),this.checkShopRP()},enumerable:!0,configurable:!0}),e.prototype.updateAdventureEvent=function(t){if(this._eventList){for(var e=0,i=this._eventList.length;e<i;e++)if(this._eventList[e][0]===t[0][0]){1===t[1]?(this._eventList.splice(e,1),GlobalData.dispatcher.event("ADVENTURE_EVENT_LIST_UPDATE"),1==t[2]&&(this._flag=!0)):0===t[1]&&(this._eventList[e]=t[0],1==t[2]&&(this._flag=!0)),GlobalData.dispatcher.event("ADVENTURE_EVENT_UPDATE",[t]),this.updateMonsterTips(t,1===t[1]);break}this.checkRP()}},e.prototype.updateMonsterTips=function(t,e){if(20==t[0][7]){var i=t[0][3],n=parseInt((i/30).toString());!e&&0<n&&-1==this._adventureMonsterArr.indexOf(n)&&(l.notice.SystemNoticeManager.instance.addNotice("奇遇任务：击杀"+30*n+"/300只挂机怪物",!1),this._adventureMonsterArr.push(n)),e&&(this._adventureMonsterArr=[])}},Object.defineProperty(e.prototype,"dropItems",{get:function(){return this._dropItems},enumerable:!0,configurable:!0}),e.prototype.addDropItem=function(t){for(var e=t[0],i=l.common.CommonUtil.getOverlapByItemId(e),n=t[1],s=0,o=this._dropItems.length;s<o;s++){var a=this._dropItems[s];if(a[0]===e){var r=i-a[1];if(n<=r){a[1]+=n,n=0;break}a[1]=i,n-=r}}0<n&&(t[1]=n,this._dropItems.push(t))},Object.defineProperty(e.prototype,"dropItemsUpdated",{set:function(t){this._dropItemsUpdated=t,GlobalData.dispatcher.event("ADVENTURE_DROP_ITEMS_UPDATE")},enumerable:!0,configurable:!0}),e.prototype.checkRP=function(){0<this.yunLi&&this._eventList&&0<this._eventList.length?r.instance.setRPProperty("adventureRP",!0):r.instance.setRPProperty("adventureRP",!1)},e.prototype.checkShopRP=function(){var t=!1,e=a.AdventureExchangeCfg.instance.cfgs;if(this._hintList&&e&&0<e.length)for(var i=0,n=this._hintList.length;i<n;i++)for(var s=0,o=e.length;s<o;s++)if(this._hintList[i]===e[s][0]&&this._point>=e[s][2][1]){t=!0;break}r.instance.setRPProperty("adventureShopRP",t)},t=e,a.AdventureModel=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._bossIdTable={},this._lvTable={},this._cfgs=GlobalData.getConfig("scene_multi_boss");for(var t=0,e=this._cfgs.length;t<e;t++)this._lvTable[this._cfgs[t][1]]=this._cfgs[t],this._bossIdTable[this._cfgs[t][2]]=this._cfgs[t]},n.prototype.getCfgByLv=function(t){return this._lvTable[t]},n.prototype.getCfgByBossId=function(t){return this._bossIdTable[t]},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),i=n,e.SceneMultiBossCfg=i}(modules=modules||{}),function(t){var e,i,n;function s(){this._cloudLeft=new Laya.Image("cloud_left.png"),this._cloudRight=new Laya.Image("cloud_right.png"),this._cloudLeft.centerY=this._cloudRight.centerY=0,this._cloudLeft.sizeGrid="0,472,0,4,0",this._cloudRight.sizeGrid="0,4,0,472,0",this._cloudLeft.size(960,1560),this._cloudRight.size(960,1560),this._bgLeft=new i,this._bgRight=new i}e=t.scene||(t.scene={}),i=Laya.Sprite,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.tweenCloudEnter=function(){this._offsetX=-960,LayerManager.instance.addToLoadingLayer(this._cloudLeft),LayerManager.instance.addToLoadingLayer(this._cloudRight),Laya.timer.frameLoop(1,this,this.moveEnter),this.moveEnter()},s.prototype.moveEnter=function(){this.fillCloud(),480<=this._offsetX&&Laya.timer.clear(this,this.moveEnter),this._offsetX+=80},s.prototype.tweenCloudLeave=function(){this._offsetX=480,Laya.timer.frameLoop(1,this,this.moveLeave),this.moveLeave()},s.prototype.moveLeave=function(){this.fillCloud(),this._offsetX<=-960&&(this._cloudLeft.removeSelf(),this._cloudRight.removeSelf(),Laya.timer.clear(this,this.moveLeave)),this._offsetX-=120},s.prototype.fillCloud=function(){var t=Math.ceil(.5*(960-CommonConfig.viewWidth));this._offsetX>t&&(this._cloudLeft.width=this._cloudRight.width=this._offsetX-t+960,this._cloudLeft.pivotX=this._offsetX-t),this._cloudLeft.x=this._offsetX-t,this._cloudRight.x=-this._offsetX-t},n=s,e.SwitchSceneCtrl=n}(modules=modules||{}),function(a){var t,e;function i(){}t=a.threeWorlds||(a.threeWorlds={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"specialRevive",{get:function(){return this._specialRevive},set:function(t){this._specialRevive=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bossRankRecord",{get:function(){return this._bossRankRecord},set:function(t){this._bossRankRecord=t,GlobalData.dispatcher.event("THREE_WORLDS_UPDATE_BOSS_RANK_RECORD")},enumerable:!0,configurable:!0}),i.prototype.getThreeBossLvl=function(){for(var t=a.config.SceneCrossBossCfg.instance.cfgs,e=PlayerModel.instance.eraLevel,i=0,n=0,s=t.length;n<s;n++){var o=t[n][3];if(e>=o[0]&&e<=o[1]){i=t[n][1];break}}return i},e=i,t.ThreeWorldsModel=e}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.customData||(t.customData={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16777375,this.getCustomizeDataReply),this.subscribe(16777376,this.setCustomizeDataReply)},o.prototype.getCustomizeData=function(t){this.publish(2097187,[t])},o.prototype.getCustomizeDataReply=function(t){e.CustomDataModel.instance.customDatas=t[0]},o.prototype.setCustomizeData=function(t){this.publish(2097188,[t])},o.prototype.setCustomizeDataReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.setCustomData=function(t,e){this.setCustomizeData([[t,e]])},s=o,e.CustomDataCtrl=s}(modules=modules||{}),function(t){var e,i;function n(){}e=t.misc||(t.misc={}),n.enable=function(t){this._flags[t]=!0},n.disable=function(t){this._flags[t]=!1},n.info=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n._flags[t]&&console.log.apply(console,e)},n._flags=[],i=n,e.LogUtils=i}(game=game||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this.typeList=[],this.bosslist={};for(var t=GlobalData.getConfig("scene_divinatory_boss"),e={},i={},n=0,s=t.length;n<s;n++){var o=t[n];if(t[n][4]/1e4>>0!=261){var a=o[3],r=o[1];e[a]||(e[a]=!0,this._table[a]=[],this.typeList.push(a));var l=this._table[a],h=1e3*a+r;null==i[h]&&(l.push([]),i[h]=l.length-1),l[i[h]].push(t[n]),this.bosslist[r]||(this.bosslist[r]=[]),this.bosslist[r].push(t[n])}}},n.prototype.getCfgList=function(t){return this._table[t]},n.prototype.getOccId=function(t){var e=[],i=this.bosslist[t];if(i)for(var n=0,s=i.length;n<s;n++)i[n][1]==t&&e.push(i[n][4]);return e},i=n,e.SceneDivinatoryBossCfg=i}(modules=modules||{}),function(t){var o,e;function i(){this._cfgs=GlobalData.getConfig("scene_yuanshen_boss")}o=t.config||(t.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.initIndexArr=function(){if(!this._indexArr){this._indexArr=[];for(var t,e=-1,i=0,n=this._cfgs.length;i<n;i++)if(t=this._cfgs[i],0!==o.MonsterCfg.instance.getMonsterById(t[4])[1]){var s=t[3];s!==e&&(e=s,this._indexArr[e-1]=i)}}},i.prototype.getFirstBossesByType=function(t){this.initIndexArr();for(var e=[],i=this._indexArr[t]||this._cfgs.length,n=this._indexArr[t-1];n<i;n++)0===n?e.push(this._cfgs[n]):this._cfgs[n][1]!==this._cfgs[n-1][1]&&e.push(this._cfgs[n]);return e},i.prototype.getBossIdsByLayer=function(t){for(var e,i=[],n=0,s=this._cfgs.length;n<s;n++)(e=this._cfgs[n])[1]===t&&0<o.MonsterCfg.instance.getMonsterById(e[4])[1]&&i.push(e[4]);return i},i.prototype.getCfgByLayer=function(t){for(var e,i=0,n=this._cfgs.length;i<n;i++)if((e=this._cfgs[i])[1]===t&&0<o.MonsterCfg.instance.getMonsterById(e[4])[1])return e;return null},e=i,o.SceneYuanShenBossCfg=e}(modules=modules||{}),function(t){var e,i;function n(){this.bosslist=[],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.tab={};for(var t=GlobalData.getConfig("scene_show_equip_boss"),e=0,i=t.length;e<i;e++){var n=t[e][1],s=CommonGroupUtil.getTpyeAndLevel(n)[0];this.tab[s]||(this.tab[s]=t[e][3]),t[e][4]/1e4>>0!=281&&(this.bosslist[n-1]||(this.bosslist[n-1]=[]),this.bosslist[n-1].push(t[e]))}},n.prototype.getLayerCfs=function(t){return this.bosslist[t-1]},n.prototype.getTypeByLayers=function(t){for(var e=[],i=0,n=this.bosslist.length;i<n;i++)if(this.bosslist[i]){var s=this.bosslist[i][0];t===s[3]&&e.push(s[1])}return e.sort(function(t,e){return t-e})},n.prototype.getOccId=function(t){var e=[],i=this.bosslist[t-1];if(i)for(var n=0,s=i.length;n<s;n++)e.push(i[n][4]);return e},i=n,e.SceneShowEquipBossCfg=i}(modules=modules||{}),function(c){var p,e,t,u,d,i,r,s,o,a,m,l,n,f,h,g,y,_,v,I,b,C,T,w;function x(){var t=e.call(this)||this;return t._sceneType=-1,t.awardMultiple=-1,t.setClosePanels(),t.entertempCnt=[0,1],t._clearStackScenes=[2,5,6,7,8,26,27,28,29,30,13,9,3,4,21,10,12],t}p=c.dungeon||(c.dungeon={}),t=c.core.BaseCtrl,u=c.config.SceneCfg,d=c.scene.SceneModel,i=c.common.CustomClip,r=c.notice.SystemNoticeManager,s=c.config.SceneCrossBossCfg,o=c.bossHome.BossHomeModel,a=c.config.SceneMultiBossCfg,m=game.misc.LogUtils,l=c.bag.BagUtil,n=c.adventure.AdventureModel,f=c.common.CommonUtil,h=c.bottomTab.BottomTabCtrl,g=c.threeWorlds.ThreeWorldsModel,y=c.config.BlendCfg,_=c.scene.SceneUtil,v=c.customData.CustomDataCtrl,I=c.bossDungeon.BossDungeonModel,b=c.config.SceneYuanShenBossCfg,C=c.config.SceneDivinatoryBossCfg,T=c.config.SceneShowEquipBossCfg,e=t,__extends(x,e),Object.defineProperty(x,"instance",{get:function(){return this._instance=this._instance||new x},enumerable:!0,configurable:!0}),x.prototype.setup=function(){this.subscribe(16777333,this.getCopyAwardReply),this.subscribe(16777331,this.copyJudgeAward),this.subscribe(16777387,this.copyJudgeAwardEx),this.subscribe(16778425,this.reqInspireReply),this.subscribe(16778426,this.updateInspire),this.subscribe(16777434,this.getCopyTimesReply),this.subscribe(16777435,this.updateCopyTimes),this.subscribe(16777428,this.broadcastBeginCombat),this.subscribe(16777429,this.broadcastEndCombat),this.subscribe(16777430,this.broadcastCopyMonsterWare),this.subscribe(16777447,this.broadcastTeamCopyMonsterWare),this.subscribe(16777431,this.broadcastCopyIncome),this.subscribe(16777432,this.broadcastCopyStar),this.subscribe(16777433,this.updateIncomeRecord),this.subscribe(16778416,this.sweepCopyReply),this.subscribe(16777330,this.reqEnterSceneReply),this.subscribe(16778429,this.getJoinAwardReply),this.subscribe(16778427,this.updateEnterLater),this.subscribe(16778430,this.updateJoinAward),this.subscribe(16778419,this.getBossReply),this.subscribe(16778420,this.updateBoss),this.subscribe(16778421,this.updateBossHurtRack),this.subscribe(16778423,this.getBossTimesReply),this.subscribe(16778422,this.getFollowBossReply),this.subscribe(16778424,this.updateBossTimes),this.subscribe(16777436,this.buyTimesReply),this.subscribe(16777442,this.reqEnterNextLevelReply),this.subscribe(16777443,this.broadcastEnemyInvad),this.subscribe(16778433,this.getBossIsFirstReply),this.subscribe(16777452,this.getSceneStateReply),this.subscribe(16777451,this.broadcasSceneState),this.subscribe(16782526,this.getTipsPriorInfoReply),this.subscribe(16778434,this.oneKeySweepShilianCopyReply),this.subscribe(16778435,this.oneKeyChallengeShilianCopyReply),this.subscribe(16777463,this.broadcastSceneOpenDayUpdate),this.subscribe(16777462,this.broadcastSceneOpenDayUpdate),this.subscribe(16792129,this.updateCopyHelperMultiple),x.instance.getFollowBoss(),this.getCopyTimes(),this.getSceneOpenDay(),v.instance.getCustomizeData([42,0,1,2,36]),this.getBossTimes(),this.getBoss(),this.getSceneState(),this.publish(2098156,null),this.onGlobal("FUNC_OPEN_UPDATE",p.DungeonModel.instance.funOPenUpdateCheckCopyTimesRP)},x.prototype.setClosePanels=function(){this._commonClosePanels=[28,1452,48,62,64,63,65,51,89,77,107,99,161,1505,1506,166,215,216,219,220,221,237,225,218,222,223,200,171,172,173,243,52,296,297,301,94,196,315,373,198,403,404,405,406,474,569,571,570,572,587,589,618,619,984,863,864,869,862,880,866,868,981,980,1082,956,961,959,958,957,960,987,1136,1138,1176,1177,1180,1171,1172,1173,1187,1186,1264,1270,1273,1046,1047,1048,1340,1049,1050,1051,1052,1297,1371,1352,1353,1354,1355,1356,1357,1358,1359,1360,1377,1378,1380,1381,1414,1415,1453,1416,1417,1418,1419,1420,1421,1422,1423,1424,1425,1497,1500,60,61,258,22,160,1182,1181,1298,213,23,1411,1412,1450,1469,1470,1471,1484],this._copyClosePanels=[40,57,75,80,1175,12,207,194,256,1183,1259,1494],this._teamGroupClosePanels=[1543,1534,1540,1535,1536,1537,1538,1539,1541,355],this._shieldSceneIds=[2091,2151,4001,2701,2401,2402,2403,2041,2101,2351,2121,3101,3201,2391,3501,3701,2161,3601,2601,3901,2291,2801,2901,4501,4502,4503,4401,4101,4201]},x.prototype.closeTeamGroupClosePanels=function(){for(var t=0,e=this._teamGroupClosePanels.length;t<e;t++)WindowManager.instance.close(this._teamGroupClosePanels[t]);GlobalData.dispatcher.event("CLOSE_ROOM_ALST")},x.prototype.copyJudgeAward=function(t){m.info(8,"副本结算............"+t),WindowManager.instance.close(77),WindowManager.instance.close(12);var e=d.instance.enterScene[0],i=u.instance.getCfgById(e)[7];if(t[0]){var n=t[2],s=t[1];if(0===n||17===n)2051===e||2061===e?WindowManager.instance.openDialog(60):2071===e||2081===e||2301===e||2311===e||2321===e||2331===e||2341===e?WindowManager.instance.openDialog(61,s||[]):2041===e?WindowManager.instance.open(258,t):3601===e?(c.windCloud.WindCloudModel.instance.scoreResult=t[7],WindowManager.instance.openDialog(22,s||[])):3801===e?(c.immortalContest.ImmortalContestModel.instance.scoreResult=t[7],WindowManager.instance.openDialog(22,s||[])):3901===e?(c.strongest_marry.StrongestMarryModel.instance.isStart=!1,c.strongest_marry.StrongestMarryModel.instance.winTimesOver=t[3],c.strongest_marry.StrongestMarryModel.instance.loseTimesOver=t[7],WindowManager.instance.openDialog(22,s||[]),PlayerModel.instance.selectTarget(0,-1)):4301===e?(c.team_warfare.TeamWarfareModel.instance.overNum=t[3],c.team_warfare.TeamWarfareModel.instance.overNum1=t[7],WindowManager.instance.openDialog(22,s||[]),PlayerModel.instance.selectTarget(0,-1)):2701===e?(c.nothingness_world.NothingnessWorldModel.instance.doneWave1=t[7],WindowManager.instance.openDialog(22,s||[]),this.awardMultiple=t[3],PlayerModel.instance.selectTarget(0,-1)):4001===e?(c.nether_world.NetherWorldModel.instance.doneWave1=t[7],WindowManager.instance.openDialog(22,s||[]),PlayerModel.instance.selectTarget(0,-1),this.awardMultiple=t[3]):4501===e||4502===e||4503===e?(WindowManager.instance.openDialog(1475,t),PlayerModel.instance.selectTarget(0,-1)):(2091===e&&(this.awardMultiple=t[3]),WindowManager.instance.openDialog(22,s||[]));else if(1===n)p.DungeonResultManager.instance.addResult(t);else if(2===n)p.DungeonResultManager.instance.addResult(t);else if(3===n)p.DungeonResultManager.instance.addResult(t);else if(18==n)g.instance.mapId=d.instance.enterScene[0],g.instance.mapLv=d.instance.enterScene[3],p.DungeonResultManager.instance.addResult(t);else if(4===n||13===n){if(3201===e)return;g.instance.mapId=d.instance.enterScene[0],g.instance.mapLv=d.instance.enterScene[3],p.DungeonResultManager.instance.addResult(t)}else if(5===n)p.DungeonResultManager.instance.addResult(t);else if(6===n){var o=t[1];WindowManager.instance.open(218,o)}else if(7===n){var a=t[1];WindowManager.instance.open(225,a)}else if(8===n){var r=t[1];c.kunlun.KunLunModel.instance.overType=2,WindowManager.instance.open(237,r)}else if(9===n){var l=t[1];c.kunlun.KunLunModel.instance.overType=1,WindowManager.instance.open(237,l)}else if(10===n){WindowManager.instance.close(160);var h=.001*c.config.ForbiddenBossCfg.instance.getBlendCfg(14)[1][0];f.alert("温馨提示","普通BOSS竞速阶段已结束，是否立即进入特殊BOSS奖励阶段",[Handler.create(this,function(){x.instance.reqEnterNextLevel()})],null,null,!0,null,0,"","center",h)}else 11===n?WindowManager.instance.openDialog(1182):12===n?WindowManager.instance.openDialog(1181):14===n?WindowManager.instance.open(1219,t):15===n&&(PlayerModel.instance.selectTarget(0,-1),42===i?WindowManager.instance.open(1298,[1,t]):43===i&&WindowManager.instance.open(1298,[3,t]))}else 16===i||38===i||45==i?(s=t[1],WindowManager.instance.open(213,s)):48===i?(s=t[1],c.windCloud.WindCloudModel.instance.scoreResult=t[7],WindowManager.instance.open(213,s)):50===i?(s=t[1],c.immortalContest.ImmortalContestModel.instance.scoreResult=t[7],WindowManager.instance.open(213,s)):51===i?(c.strongest_marry.StrongestMarryModel.instance.isStart=!1,s=t[1],c.strongest_marry.StrongestMarryModel.instance.winTimesOver=t[3],c.strongest_marry.StrongestMarryModel.instance.loseTimesOver=t[7],WindowManager.instance.open(213,s),PlayerModel.instance.selectTarget(0,-1)):44===i?WindowManager.instance.openDialog(1181):42===i?WindowManager.instance.open(1298,[2,t]):43===i?WindowManager.instance.open(1298,[4,t]):4501===e||4502===e||4503===e?(16===(n=t[2])?WindowManager.instance.openDialog(1473,t):WindowManager.instance.openDialog(1472,t),PlayerModel.instance.selectTarget(0,-1)):WindowManager.instance.open(23),0===i&&(c.mission.MissionModel.instance.auto=!1),c.scene.SceneModel.instance._isshibai=!0,c.main.RightTopModel.instance._isshibai=!0,c.main.RightTopModel.instance._isshibai1=!0;16===i||39===i||45===i||44===i||48===i||50===i?PlayerModel.instance.selectTarget(0,-1):0===i&&14!=t[2]&&PlayerModel.instance.selectTarget(0,-1)},x.prototype.copyJudgeAwardEx=function(t){m.info(8,"虚无副本结算............"+t),Channel.instance.publish(5242901,null),WindowManager.instance.close(77),WindowManager.instance.close(12);var e=d.instance.enterScene[0],i=u.instance.getCfgById(e)[7];if(t[0]){var n=t[2],s=t[1];0!==n&&17!==n||(2701===e?(this.awardMultiple=t[3],c.nothingness_world.NothingnessWorldModel.instance.doneWave1=t[7],WindowManager.instance.openDialog(22,s||[]),PlayerModel.instance.selectTarget(0,-1)):4001===e&&(this.awardMultiple=t[3],c.nether_world.NetherWorldModel.instance.doneWave1=t[7],WindowManager.instance.openDialog(22,s||[]),PlayerModel.instance.selectTarget(0,-1)))}else WindowManager.instance.open(23),0===i&&(c.mission.MissionModel.instance.auto=!1),c.scene.SceneModel.instance._isshibai=!0,c.main.RightTopModel.instance._isshibai=!0,c.main.RightTopModel.instance._isshibai1=!0},x.prototype.reqEnterScene=function(t,e,i,n,s){if(void 0===t&&(t=0),void 0===e&&(e=1),void 0===i&&(i=[]),void 0===n&&(n=!1),void 0===s&&(s=!1),console.log("请求进入场景",t),0!==t){var o=u.instance.getCfgById(d.instance.enterScene[0])[7],a=u.instance.getCfgById(t)[7];if(0!==o&&o!==a||c.scene.SceneModel.instance.isInMission)return void(24===c.scene.SceneUtil.currScene?r.instance.addNotice("竞技场副本中不可切换到其它副本",!0):r.instance.addNotice("副本中不可切换到其它副本",!0))}if(0!==t&&CommonGroupUtil.isMyHaveTeam()&&t!=CommonGroupUtil.getSceneIdByTeamType(c.common_group.CommonGroupModel.instance.teamType))WindowManager.instance.open(1536,[0,0]);else if(0!==_.currScene||0===t||s||!c.windCloud.WindCloudModel.instance.isWaitingForMatch){if(2501===t||0===t||!l.checkNeedSmeltTip()){if(d.instance.enteringScene)return;d.instance.enteringScene=0===t||2011===t?!d.instance.enterScene||0!==_.currScene:!d.instance.enterScene||t!==d.instance.enterScene[0],p.DungeonModel.instance.enterSceneBySupreme=n,2121===t&&Laya.timer.clear(BossHomeCtrl.instance,BossHomeCtrl.instance.exit),this.publish(2097159,[t,e,i])}}else f.alert("温馨提示","风云擂台的擂台赛即将开始，进入副本内将无法进入擂台赛，是否仍然进入副本？"+f.formatHtmlStrByColor("#ff3e3e","（未进入擂台赛将视作放弃本轮挑战）"),[Handler.create(this,function(){x.instance.reqEnterScene(t,e,i,n,!0)})],[Handler.create(this,function(){c.mission.MissionModel.instance.auto=!1})],Handler.create(this,function(){c.mission.MissionModel.instance.auto=!1}))},x.prototype.reqEnterSceneReply=function(t){var e=t[0];0!==e&&(d.instance.enteringScene=!1,f.noticeError(e))},x.prototype.enterScene=function(t){var e=u.instance.getCfgById(t)[7];if(0===(this._sceneType=e)){for(var i=0,n=this._commonClosePanels.length;i<n;i++)WindowManager.instance.close(this._commonClosePanels[i]);c.bossHome.BossHomeCtrl.instance.clearFindPath(),c.nothingness_world.NothingnessWorldModel.instance.clearDate(),Laya.timer.clear(this,this.showMissionMaskPanel),WindowManager.instance.close(142),p.DungeonModel.instance.broadcastCopyStar=null,p.DungeonModel.instance.ranks=null,p.DungeonModel.instance.inspires=null,c.arena.ArenaModel.instance.waitState=!1,PlayerModel.instance.selectTarget(1,-1),c.wx_sidebar.wxSidebarCtrl.instance.openwxSildbar()}else{if(WindowManager.instance.close(1514),WindowManager.instance.open(28),-1!=this._shieldSceneIds.indexOf(t)&&WindowManager.instance.open(1452),1!==e){for(i=0,n=this._copyClosePanels.length;i<n;i++)WindowManager.instance.close(this._copyClosePanels[i]);var s=h.instance.panelsStack;0<s.length&&WindowManager.instance.close(s[s.length-1])}1===e?Laya.timer.once(CommonConfig.panelTweenDuration,this,this.showMissionMaskPanel,null,!0):4===e?WindowManager.instance.open(48):5===e||6===e?WindowManager.instance.open(62):7===e||8===e||26===e||27===e||28===e||29===e||30===e?(WindowManager.instance.open(63),WindowManager.instance.open(65)):10===e?WindowManager.instance.open(89):2==e||(12===e?(WindowManager.instance.open(405,1),o.instance.showTwoList(),WindowManager.instance.open(1532),PlayerModel.instance.selectTarget(0,-1),o.instance.manual=!1):3==e||(14===e?(1===d.instance.enterScene[3]&&WindowManager.instance.open(167),9!==d.instance.enterScene[3]?(WindowManager.instance.open(161),WindowManager.instance.open(1505),WindowManager.instance.open(1506),PlayerModel.instance.selectTarget(0,-1)):(console.log("进入九天之巅第九层"),WindowManager.instance.close(28),WindowManager.instance.close(161),WindowManager.instance.close(1505),WindowManager.instance.close(1506),PlayerModel.instance.selectTarget(0,-1),c.npc.NpcCtrl.instance.nineNpcFind())):15===e?(WindowManager.instance.open(243),WindowManager.instance.open(171),WindowManager.instance.open(172),WindowManager.instance.open(173),PlayerModel.instance.selectTarget(0,-1)):16===e?(PlayerModel.instance.selectTarget(2,-1),WindowManager.instance.open(474)):17===e?(WindowManager.instance.open(214),WindowManager.instance.open(215),WindowManager.instance.open(216)):21===e?(WindowManager.instance.open(222),WindowManager.instance.open(223),PlayerModel.instance.selectTarget(0,-1)):23===e?PlayerModel.instance.selectTarget(2,-1):22===e?(WindowManager.instance.open(219),WindowManager.instance.open(220),WindowManager.instance.open(221)):19===e?PlayerModel.instance.selectTarget(2,-1):20===e?WindowManager.instance.open(250):18===e?PlayerModel.instance.selectTarget(1,-1):24===e?PlayerModel.instance.selectTarget(2,-1):48===e?(PlayerModel.instance.selectTarget(2,-1),WindowManager.instance.open(1270)):50===e?(PlayerModel.instance.selectTarget(2,-1),WindowManager.instance.open(1270)):25===e?(c.faction.FactionCtrl.instance.getHurtAwardList(),WindowManager.instance.open(296),WindowManager.instance.open(297)):31===e?(WindowManager.instance.open(403),WindowManager.instance.open(404),WindowManager.instance.open(405,0),PlayerModel.instance.selectTarget(0,-1)):34===e?(WindowManager.instance.close(503),WindowManager.instance.close(1138),WindowManager.instance.open(99)):35===e?(WindowManager.instance.open(569),WindowManager.instance.open(405,2),I.instance.searchBossIds=b.instance.getBossIdsByLayer(d.instance.enterScene[3])):37===e?(WindowManager.instance.open(587),PlayerModel.instance.selectTarget(0,-1),c.halo.HaloModel.instance.haloOpen&&c.halo.HaloModel.instance.isForceEnter&&GlobalData.dispatcher.event("HALO_AUTO_BEAST_SELECT_TARGET")):36===e?(WindowManager.instance.open(589),PlayerModel.instance.selectTarget(0,-1),c.halo.HaloModel.instance.haloOpen&&c.halo.HaloModel.instance.isForceEnter&&GlobalData.dispatcher.event("HALO_AUTO_BEAST_SELECT_TARGET")):9===e?(WindowManager.instance.open(99),WindowManager.instance.close(97),WindowManager.instance.close(98)):38===e?(WindowManager.instance.close(620),WindowManager.instance.close(617),WindowManager.instance.open(618),WindowManager.instance.open(619),WindowManager.instance.open(984),PlayerModel.instance.selectTarget(0,-1)):40===e?(console.log("进入 【虚无界】"),WindowManager.instance.open(956),WindowManager.instance.open(959),WindowManager.instance.open(961),WindowManager.instance.close(64),GlobalData.dispatcher.event("CLOSE_ROOM_ALST"),PlayerModel.instance.selectTarget(0,-1),Laya.timer.once(300,this,function(){PlayerModel.instance.selectTarget(1,-1)})):39===e?(WindowManager.instance.open(863),WindowManager.instance.open(864),WindowManager.instance.open(869),WindowManager.instance.open(862),WindowManager.instance.open(981),PlayerModel.instance.selectTarget(0,-1)):41===e?WindowManager.instance.open(1136):45===e?(WindowManager.instance.open(1187),PlayerModel.instance.selectTarget(2,-1)):44===e?(WindowManager.instance.open(1176),WindowManager.instance.open(1177),PlayerModel.instance.selectTarget(0,-1)):46===e?(WindowManager.instance.close(1159),WindowManager.instance.close(1158),PlayerModel.instance.selectTarget(2,-1)):47===e?(WindowManager.instance.open(1186),WindowManager.instance.open(405,3),I.instance.searchBossIds=C.instance.getOccId(d.instance.enterScene[3])):49===e?(WindowManager.instance.open(1273),WindowManager.instance.open(405,4),I.instance.searchBossIds=T.instance.getOccId(d.instance.enterScene[3])):42===e?(WindowManager.instance.close(166),WindowManager.instance.close(616),WindowManager.instance.close(52),c.union_war.UnionWarModel.instance.ispreliminaryFactionMatch()?(WindowManager.instance.open(1049),WindowManager.instance.open(1050),WindowManager.instance.open(1051),WindowManager.instance.close(1052),WindowManager.instance.close(1172),WindowManager.instance.close(1371)):(WindowManager.instance.close(1049),WindowManager.instance.close(1050),WindowManager.instance.close(1051),WindowManager.instance.close(1297),WindowManager.instance.open(1052)),PlayerModel.instance.selectTarget(0,-1)):43===e?(WindowManager.instance.close(166),WindowManager.instance.close(616),WindowManager.instance.close(52),WindowManager.instance.close(1057),c.union_war.UnionWarModel.instance.ispreliminaryFactionWar()?(console.log("进入仙盟副本前打印下采集状态："+c.npc.NpcModel.instance.isGathering),c.npc.NpcModel.instance.isGathering&&r.instance.addNotice("采集状态异常,重置状态",!0),c.npc.NpcModel.instance.isGathering=!1,WindowManager.instance.open(1048),WindowManager.instance.open(1047),WindowManager.instance.open(1340),WindowManager.instance.close(1052)):(WindowManager.instance.close(1048),WindowManager.instance.close(1047),WindowManager.instance.close(1046),WindowManager.instance.close(1340),WindowManager.instance.open(1052)),PlayerModel.instance.selectTarget(0,-1)):51===e?(WindowManager.instance.close(1353),WindowManager.instance.close(1358),WindowManager.instance.close(1359),WindowManager.instance.close(1360),WindowManager.instance.open(1354),c.strongest_marry.StrongestMarryModel.instance.ispreliminaryCoupleBestr()?(WindowManager.instance.close(1356),WindowManager.instance.close(1352),WindowManager.instance.open(1355),WindowManager.instance.open(1357),WindowManager.instance.open(1270)):(WindowManager.instance.open(1356),WindowManager.instance.open(1352),WindowManager.instance.close(1355),WindowManager.instance.close(1357),WindowManager.instance.close(1270)),PlayerModel.instance.selectTarget(0,-1)):52===e?(console.log("进入 【 战魂神殿 】"),WindowManager.instance.open(1378),WindowManager.instance.open(1377),WindowManager.instance.close(64),PlayerModel.instance.selectTarget(0,-1),Laya.timer.once(300,this,function(){PlayerModel.instance.selectTarget(1,-1)})):55===e?(WindowManager.instance.open(1418),PlayerModel.instance.selectTarget(1,-1)):56===e?(c.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()?(WindowManager.instance.open(1414),WindowManager.instance.open(1415),WindowManager.instance.open(1416),WindowManager.instance.open(1497),WindowManager.instance.close(1453)):(WindowManager.instance.close(1414),WindowManager.instance.close(1415),WindowManager.instance.close(1416),WindowManager.instance.close(1497),WindowManager.instance.close(1500),WindowManager.instance.open(1453)),PlayerModel.instance.selectTarget(0,-1)):53===e?(WindowManager.instance.open(1411),WindowManager.instance.open(1450)):54===e?(WindowManager.instance.open(405,5),WindowManager.instance.open(1412)):57===e&&(WindowManager.instance.open(1469),WindowManager.instance.open(1470),c.trahman_boss.TrahmanBossModel.instance.selectTarget()))),-1!=CommonGroupUtil.SceneTypeExArr.indexOf(e)&&this.closeTeamGroupClosePanels()}},x.prototype.showMissionMaskPanel=function(){WindowManager.instance.open(142)},x.prototype.leaveScene=function(t){var e=u.instance.getCfgById(t)[7];WindowManager.instance.close(60),WindowManager.instance.close(61),WindowManager.instance.close(258),WindowManager.instance.close(22),WindowManager.instance.close(160),WindowManager.instance.close(1182),WindowManager.instance.close(1181),WindowManager.instance.close(1298),WindowManager.instance.close(213),0!=e&&WindowManager.instance.close(203),WindowManager.instance.close(23),20===e||18===e||19===e?(n.instance.dropItems.length=0,WindowManager.instance.close(250)):44===e?(p.DungeonModel.instance.clearForbiddenBoss(),c.sceneTeam.SceneTeamModel.instance.hurtRank={},c.forbiddenBoss.ForbiddenBossModel.instance.dummy=!1):41===e?c.foreign_boss_panel.ForeignBossCtrl.instance.getForeignBossList(3):12===e&&(o.instance.hideTwoList(),WindowManager.instance.close(1532)),PlayerModel.instance.level<y.instance.getCfgById(1003)[1][0]&&0<=this._clearStackScenes.indexOf(e)&&h.instance.clearStack()},x.prototype.getCopyAward=function(t,e,i){void 0===i&&(i=0),this.publish(2097161,[t,e,i])},x.prototype.getCopyAwardReply=function(t){f.noticeError(t[0])},x.prototype.reqInspire=function(t){console.log("请求鼓舞",t),this.publish(5242883,[t])},x.prototype.reqInspireReply=function(t){f.noticeError(t[0])},x.prototype.updateInspire=function(t){console.log("鼓舞:",t),p.DungeonModel.instance.inspires=t[0]},x.prototype.buyTimes=function(t){this.publish(2097164,[t])},x.prototype.getCopyTimes=function(){m.info(8,"获取副本次数............."),this.publish(2097165,null)},x.prototype.getCopyTimesReply=function(t){m.info(8,"获取副本次数返回................."+t),p.DungeonModel.instance.getCopyTimesReply(t)},x.prototype.updateCopyTimes=function(t){p.DungeonModel.instance.updateCopyTimes(t)},x.prototype.broadcastBeginCombat=function(t){if(console.log(8,"广播开始战斗..................",t),40!=this._sceneType&&52!=this._sceneType&&(p.DungeonModel.instance.broadcastBeginCombat=t),9===this._sceneType||34===this._sceneType?WindowManager.instance.open(107):40===this._sceneType||52===this._sceneType||42===this._sceneType||43===this._sceneType||19===this._sceneType||18===this._sceneType||24===this._sceneType||38===this._sceneType||55===this._sceneType||56===this._sceneType||(14===this._sceneType?c.nine.NineModel.instance.autoCtrl():this.openEnTimeUI()),2!==this._sceneType&&13!==this._sceneType&&17!==this._sceneType&&22!==this._sceneType&&23!==this._sceneType&&15!==this._sceneType&&40!==this._sceneType&&52!==this._sceneType&&41!==this._sceneType){if(42===this._sceneType)c.union_war.UnionWarModel.instance.ispreliminaryFactionMatch()&&this.startFightClipFun();else if(43===this._sceneType)c.union_war.UnionWarModel.instance.ispreliminaryFactionWar()&&this.startFightClipFun();else if(56===this._sceneType){if(c.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()){c.team_warfare.TeamWarfareModel.instance.startTimeCopy=c.dungeon.DungeonModel.instance.broadcastBeginCombat?GlobalData.serverTime+c.dungeon.DungeonModel.instance.broadcastBeginCombat[0]:0,c.team_warfare.TeamWarfareModel.instance.isOpenTips();var e=c.team_warfare.TeamWarfareModel.instance.getTimeNum();0<e&&(Laya.timer.clear(this,this.isOpenTips),Laya.timer.once(e,this,this.isOpenTips,null,!1))}}else 38===this._sceneType?p.DungeonModel.instance.broadcastBeginCombat&&0<p.DungeonModel.instance.broadcastBeginCombat[0]&&this.startFightClipFun():51===this._sceneType?c.strongest_marry.StrongestMarryModel.instance.ispreliminaryCoupleBestr()&&(this.startFightClipFun(),c.strongest_marry.StrongestMarryModel.instance.isStart=!0,c.strongest_marry.StrongestMarryModel.instance.setEnemy()):this.startFightClipFun();if(24===this._sceneType){var i=c.customData.CustomDataModel.instance.getCustomDataByKey(15);c.arena.ArenaModel.instance.waitState&&0===i[0]&&c.scene.SwitchSceneCtrl.instance.tweenCloudLeave(),c.arena.ArenaModel.instance.waitState=!1,WindowManager.instance.close(289),PlayerModel.instance.selectTarget(2,-1)}}},x.prototype.openEnTimeUI=function(){16===this._sceneType?WindowManager.instance.open(64,280):52===this._sceneType?WindowManager.instance.open(64,325):WindowManager.instance.open(64,310)},x.prototype.isOpenTips=function(){c.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()&&this.startFightClipFun()},x.prototype.startFightClipFun=function(){var t=this;console.log("播放开始战斗动画.................."+this._sceneType),this._startFightClip||(this._startFightClip=i.create(null,"assets/effect/start_fight",8,!1,11),this._startFightClip.autoRemove=!0,this._startFightClip.scale(2,2,!0),this._startFightClip.on("complete",this,function(){t._startFightClip.destroy(!0),t._startFightClip=null})),this._startFightClip.pos(.5*CommonConfig.viewWidth-400,300,!0),this._startFightClip.play(),LayerManager.instance.addToEffectLayer(this._startFightClip)},x.prototype.broadcastEndCombat=function(t){m.info(8,"广播结束战斗.................."+t),p.DungeonModel.instance.broadcastEndCombat=t},x.prototype.broadcastCopyMonsterWare=function(t){p.DungeonModel.instance.broadcastCopyMonsterWare=t},x.prototype.broadcastTeamCopyMonsterWare=function(t){c.teamBattle.TeamBattleModel.Instance.updataWave(t[0])},x.prototype.broadcastCopyIncome=function(t){m.info(8,"广播副本收益..................."+t),p.DungeonModel.instance.broadcastCopyIncome=t},x.prototype.broadcastCopyStar=function(t){m.info(8,"广播副本星级....................."+t),p.DungeonModel.instance.broadcastCopyStar=t},x.prototype.updateIncomeRecord=function(t){m.info(8,"更新收益记录..................."+t),p.DungeonModel.instance.updateIncomeRecord=t},x.prototype.sweepCopy=function(t){m.info(8,"扫荡副本............."+t),this.publish(2097162,[t])},x.prototype.sweepCopyReply=function(t){m.info(8,"扫荡副本返回................."+t);var e=t[0];0!==e?f.noticeError(e):r.instance.addNotice("扫荡成功",!1)},x.prototype.oneKeySweepShilianCopy=function(t){this.publish(2097183,[t])},x.prototype.oneKeyChallengeShilianCopy=function(){this.publish(2097184,null)},x.prototype.oneKeySweepShilianCopyReply=function(t){m.info(8," 一键扫荡试炼副本 返回................."+t);var e=t[0];0!==e?f.noticeError(e):(r.instance.addNotice("一键扫荡成功",!1),GlobalData.dispatcher.event("YIJIAN_SAODANG_UPDATE"))},x.prototype.oneKeyChallengeShilianCopyReply=function(t){m.info(8," 一键挑战试炼副本 返回................."+t);var e=t[0];0!==e?f.noticeError(e):(r.instance.addNotice("一键挑战成功",!1),GlobalData.dispatcher.event("YIJIAN_SAODANG_UPDATE"))},x.prototype.getJoinAward=function(t){void 0===t&&(t=0),m.info(8,"请求领取参与奖励.................."),this.publish(5242884,[t])},x.prototype.getJoinAwardReply=function(t){m.info(8,"领取参与奖励返回..................."+t);var e=t[0];0!==e&&f.noticeError(e)},x.prototype.updateEnterLater=function(t){var e=Handler.create(this,function(){x.instance.reqEnterScene()});f.alert("提示","您来晚了，BOSS已被击败。",[e])},x.prototype.updateJoinAward=function(t){m.info(8,"更新参与奖励..................."+t),c.team_warfare.TeamWarfareModel.instance.UpdateJoinAward(t),p.DungeonModel.instance.joinAward=t[0]},x.prototype.getBoss=function(){m.info(8,"获取多人BOSS信息"),this.publish(7340232,null)},x.prototype.getBossReply=function(t){m.info(8,"获取多人BOSS信息返回............"+t),p.DungeonModel.instance.updateBossInfos(t[0])},x.prototype.updateBoss=function(t){m.info(8,"更新BOSS 死亡、重生推送............"+t),p.DungeonModel.instance.updateBossInfos(t[0]),GlobalData.dispatcher.event("DUNGEON_BOSS_DEAD_REVIVE",[t[0]])},x.prototype.updateBossHurtRack=function(t){m.info(8,"更新BOSS伤害排行............"+t),p.DungeonModel.instance.ranks=t[0]},x.prototype.getBossTimes=function(){m.info(8,"获取BOSS次数............"),this.publish(2098153,null)},x.prototype.getBossTimesReply=function(t){m.info(8,"获取BOSS次数返回............"+t),p.DungeonModel.instance.bossTimesArr=t[0]},x.prototype.updateBossTimes=function(t){m.info(8,"更新BOSS次数............"+t),p.DungeonModel.instance.bossTimes=t[0]},x.prototype.buyTimesReply=function(t){var e=t[0];12012==e?f.goldNotEnoughAlert():0==e?r.instance.addNotice("购买成功"):f.noticeError(e)},x.prototype.getFollowBoss=function(){m.info(8,"获取关注的BOSS............"),this.publish(2098154,null)},x.prototype.getFollowBossReply=function(t){m.info(8,"获取关注的BOSS返回............"+t),p.DungeonModel.instance.follows=t[0]},x.prototype.setFollowBoss=function(t,e,i){void 0===i&&(i=0),m.info(8,"设置关注BOSS............"+t+"   "+e),this.publish(2098155,[[t,e,i]])},x.prototype.reqEnterNextLevel=function(){console.log("进入下一层······················"),this.publish(5242886,null)},x.prototype.reqEnterNextLevelReply=function(t){var e=t[0];0===e||f.noticeError(e)},x.prototype.broadcastEnemyInvad=function(t){var e=d.instance.enterScene[0],i=u.instance.getCfgById(e)[7];if(1===i||41==i||40==i||3==i||52==i||57==i)WindowManager.instance.open(74);else if(4===i)Laya.timer.once(300,this,function(){var t=a.instance.getCfgByLv(d.instance.enterScene[3])[2],e=p.DungeonModel.instance.getBossInfoById(t);e&&!e[2][0]&&WindowManager.instance.open(74)});else if(10===i){var n=s.instance.getCfgByMapIdAndLv(e,d.instance.enterScene[3])[2];p.DungeonModel.instance.getBossInfoById(n)&&(p.DungeonModel.instance.getBossInfoById(n)[2][0]||WindowManager.instance.open(74))}else 2==i?(WindowManager.instance.open(74),WindowManager.instance.open(119,0)):13==i&&(WindowManager.instance.open(74),WindowManager.instance.open(119,1))},x.prototype.getSceneState=function(){m.info(12,"获取场景状态......................."),this.publish(2097172,null)},x.prototype.getSceneStateReply=function(t){t&&(m.info(12,"获取场景状态返回.................."+t),p.DungeonModel.instance.initStates(t[0]))},x.prototype.broadcasSceneState=function(t){m.info(12,"广播场景状态......................."+t),p.DungeonModel.instance.updateStates(t[0])},x.prototype.getSceneOpenDay=function(){this.publish(2097189,null)},x.prototype.broadcastSceneOpenDayUpdate=function(t){t&&(p.DungeonModel.instance.broadcastSceneOpenDay=t[0])},x.prototype.getTipsPriorInfo=function(){this.publish(2102262,null)},x.prototype.getTipsPriorInfoReply=function(t){m.info(12,"获取优先提示返回......................."+t),p.DungeonModel.instance.tipType=t[0]},x.prototype.getBossIsFirstReply=function(t){p.DungeonModel.instance.firstBoss=t[0]},x.prototype.updateCopyHelperMultiple=function(t){this.entertempCnt=t||[0,1]},w=x,p.DungeonCtrl=w}(modules=modules||{}),function(l){var t,e,i,n,s,o,a,r,h,c,p,u,d,m,f,g,y,_,v,I,b,C,T,w,x;function B(){var t=null!==e&&e.apply(this,arguments)||this;return t.xianFuEvenStr=["","神秘商店","魔兵入侵","魔将突袭","灵脉爆发","宝矿爆发",""],t}t=l.main||(l.main={}),i=Laya.Event,n=l.bag.BagModel,s=l.bottomTab.BottomTabCtrl,o=l.chat.ChatCtrl,a=l.common.CustomClip,r=l.config.BlendCfg,h=l.config.HumanCfg,c=l.config.SceneCfg,p=l.config.TaskCfg,u=l.core.WindowManager,d=l.email.EmailModel,m=l.player.PlayerModel,f=l.scene.SceneModel,g=l.task.TaskModel,y=ui.BottomViewUI,_=l.chat.ChatModel,v=l.common.CustomList,I=l.chat.MainChatItem,b=l.funcOpen.FuncOpenModel,C=l.notice.SystemNoticeManager,T=Laya.Point,w=l.common.CommonUtil,e=y,__extends(B,e),B.prototype.initialize=function(){e.prototype.initialize.call(this),this.bottom=0,this.centerX=0,this.layer=3,this.closeByOthers=!1,this._barMaxWidth=488,this._expTarget={lv:-1,barWidth:-1},this.expBar.width=0,this._isShow=!1,this._isShowNewTitle=!1,this.oneKeyBtn.visible=!1,this._inScene=!1,w.setHTMLPro(this.nameTxt,"#F4D920","SimHei",22,"center"),w.setHTMLPro(this.awardsTxt,"#ffffff","SimHei",22,"center"),this._expEffect=new a,this.addChild(this._expEffect),this._expEffect.skin="assets/effect/proBar.atlas",this._expEffect.frameUrls=["proBar/0.png","proBar/1.png","proBar/2.png","proBar/3.png","proBar/4.png","proBar/5.png","proBar/6.png","proBar/7.png"],this._expEffect.durationFrame=5,this._expEffect.play(),this._expEffect.loop=!0,this._expEffect.y=190,this._emailClip=new a,this.fitBox.addChild(this._emailClip),this._emailClip.skin="assets/effect/email.atlas",this._emailClip.frameUrls=["email/1.png","email/2.png","email/3.png","email/4.png","email/5.png","email/6.png","email/7.png","email/8.png"],this._emailClip.durationFrame=5,this._emailClip.loop=!0,this._emailClip.pos(29,100,!0),this._zhiLuEff=w.creatEff(this,"xiandi_zhilu",9),this._zhiLuEff.play(),this._zhiLuEff.pos(-4,106,!0),this._dongTianEff=w.creatEff(this,"xianfu_dongtian",23),this._dongTianEff.pos(598,106,!0),this._dongTianEff.play(),this._hasEnterLimitPack=!1,this._list=new v,this._list.x=73,this._list.y=116,this._list.width=575,this._list.height=74,this._list.hCount=1,this._list.spaceY=3,this._list.itemRender=I,this.fitBox.addChild(this._list),this.addChild(this.oneKeyBtn),w.setHTMLPro(this.wordTxt,"#4C5E8A","SimHei",24,"left","middle"),this.wordTxt.style.wordWrap=!0,this._girlTween=TweenJS.create(this.girlImg),this._wordBoxTween=TweenJS.create(this.wordBox),this._grilWords=r.instance.getCfgById(27014)[2],this.regGuideSpr(3,this.btn4),this.regGuideSpr(6,this.btn2),this.regGuideSpr(12,this.btn3),this.regGuideSpr(30,this.btn5),this.regGuideSpr(35,this.btn6),this.regGuideSpr(39,this.xxBtn),this.regGuideSpr(42,this.xfBtn),this.regGuideSpr(78,this._list),this.regGuideSpr(96,this.taskBg),this.addChild(this.girlBox),this.gmBtnBox.visible=this.inputTxt.visible=this.timeTxt.visible=!1,this._recordLv=m.instance.level,this.initSkin(),this._chatPanels=[276,513]},B.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._recordLv=m.instance.level,this.updateSmelt(),this.updateNewTitle(),this.updataExpBar(),this.emailNotice(),this.taskUpdatedHandler(),this.enterScene(),this.chatUpdate(),this.setActionPreviewPos(),this.updateTeamInviteBtn(),this.limitPackUpdateHandler(),this.updateTeamMessage(),this.funcUpdate(),this.updateMarryGiftPack(),this.checkXFRP(),this.refreshBtns(),this.updateMarrySeekList(),this.updateTeamWaitBtnShow(),this.teamMatchUpdate(),this.updateStoreBtn(),this.showRedBag(),this._isPlatCloseRecharge=PlatParams.isCloseRecharge,PlatParams.isCloseRecharge&&(this.limitPackBtn.visible=!1)},B.prototype.showRedBag=function(){var t=l.redBag.RedBagModel.instance.showRecCnt;this.redBagBox.visible=0<t,this.redBagBox.x=this.marryGiftPack.visible?397:529,this.redBagTxt.text=t.toString(),this.redBagTxt.visible=1!=t,this.redBoxTween&&(this.redBoxTween.stop(),this.redBoxTween=null),this.redBagBox.visible&&this.tweenEffect2(this.redBoxTween,this.redBagBox)},B.prototype.updatePlatChangeRecharge=function(){if(PlatParams.isCloseRecharge!=this._isPlatCloseRecharge)if(this._isPlatCloseRecharge=PlatParams.isCloseRecharge,PlatParams.isCloseRecharge)this.limitPackBtn.visible=!1;else{if(this._inScene)return void(this.limitPackBtn.visible=!1);l.limit_pack.LimitPackModel.instance.limitPackInfo&&l.limit_pack.LimitPackModel.instance.limitPackInfo.length&&(this.limitPackBtn.visible=!0)}else console.log("bottomPanel 相同的值：isCloseRecharge：",PlatParams.isCloseRecharge)},B.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview)},B.prototype.setPosActionPreview=function(){T.TEMP.setTo(this.xxBtn.width/2,this.xxBtn.height/2);var t=this.xxBtn.localToGlobal(T.TEMP,!0),e=l.action_preview.ActionPreviewModel.instance._posSprite;e.set(10,t),e.set(26,t),e.set(101,t),T.TEMP.setTo(this.btn4.width/2,this.btn4.height/2);var i=this.btn4.localToGlobal(T.TEMP,!0);e.set(16,i),e.set(76,i),e.set(29,i),e.set(30,i),e.set(31,i),e.set(32,i),e.set(33,i),e.set(34,i),e.set(34,i),e.set(34,i),e.set(106,i),e.set(181,i),e.set(182,i),e.set(174,i),e.set(175,i),e.set(176,i),e.set(177,i),e.set(178,i),e.set(179,i),e.set(194,i),T.TEMP.setTo(this.btn2.width/2,this.btn2.height/2);var n=this.btn2.localToGlobal(T.TEMP,!0);e.set(11,n),e.set(15,n),e.set(102,n),T.TEMP.setTo(this.btn3.width/2,this.btn3.height/2);var s=this.btn3.localToGlobal(T.TEMP,!0);e.set(2,s),e.set(3,s),e.set(4,s),e.set(12,s),e.set(13,s),e.set(14,s),e.set(122,s),e.set(126,s),e.set(103,s),T.TEMP.setTo(this.btn5.width/2,this.btn5.height/2);var o=this.btn5.localToGlobal(T.TEMP,!0);e.set(17,o),e.set(18,o),e.set(104,o),e.set(192,o),e.set(190,o),T.TEMP.setTo(this.btn6.width/2,this.btn6.height/2);var a=this.btn6.localToGlobal(T.TEMP,!0);e.set(19,a),e.set(27,a),e.set(28,a),e.set(48,a),e.set(105,a),e.set(189,a),e.set(10000001,a),T.TEMP.setTo(this.xfBtn.width/2,this.xfBtn.height/2);var r=this.xfBtn.localToGlobal(T.TEMP,!0);e.set(116,r)},B.prototype.close=function(){this._tipBox1Tween&&this._tipBox1Tween.stop(),this._tipBox2Tween&&this._tipBox2Tween.stop(),this.redBoxTween&&(this.redBoxTween.stop(),this.redBoxTween=null),this.marryTween&&(this.marryTween.stop(),this.marryTween=null),e.prototype.close.call(this),this._girlTween.stop(),this._wordBoxTween.stop()},B.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn2,this,this.btn2Handler),this.onAutoClick(this.btn3,this,this.btn3Handler),this.onAutoClick(this.btn4,this,this.btn4Handler),this.onAutoClick(this.btn5,this,this.btn5Handler),this.onAutoClick(this.btn6,this,this.btn6Handler),this.onAutoClick(this.taskBg,this,this.clickTaskHandler),this.onAutoClick(this.oneKeyBtn,this,this.oneKeySmelt),this.onAutoClick(this.newTitleBtn,this,this.newTitleBtnSmelt),this.onAutoClick(this.friendsBtn,this,this.friendsHandler),this.onAutoClick(this.strongBtn,this,this.strongHandler),this.onAutoClick(this.xxBtn,this,this.xxHandler),this.onAutoClick(this.xfBtn,this,this.xfHandler),this.onAutoEvt(this.inputTxt,i.ENTER,this,this.inputEnterHandler),this.onAutoClick(this._list,this,this.chatMessageTxtHandler),this.onAutoClick(this.closeGirlBtn,this,this.closeGirlBtnHandler),this.onAutoClick(this.teamWaitBox,this,this.teamWaitBtnHandler),this.onAutoClick(this.teamInviteBtn,this,this.teamInviteBtnHandler),this.onAutoClick(this.storeBtn,this,this.storeBtnHandler),this.onAutoClick(this.limitPackBtn,this,this.limitPackBtnHandler),this.onAutoClick(this.moreBtn,this,this.moreBtnHandler),this.onAutoEvt(Laya.stage,"mousedown",this,this.stageClickHandler),this.onAutoClick(this.marryGiftPack,this,this.marryGiftPackHandler),this.onAutoClick(this.beMarryBtn,this,this.beMarryBtnHandler),this.onAutoClick(this.gmBtn,this,this.gmBtnHandler),this.onAutoClick(this.closeGmBtn,this,this.closeGmBtnHandler),this.onAutoClick(this.qingChuBtn,this,this.qingChuBtnHandler),this.onAutoClick(this.addLvbtn,this,this.addLvbtnHandler),this.onAutoClick(this.addTgBtn,this,this.addTgBtnHandler),this.onAutoClick(this.addZsBtn,this,this.addZsBtnHandler),this.onAutoClick(this.redBagBox,this,this.redBagBoxHandler),this.onAutoClick(this.addMoney,this,this.addMoneyHandler),this.onAutoClick(this.addMoney1,this,this.addMoney1Handler),this.onAutoClick(this.resetBoss,this,this.resetBossHandler),this.onAutoClick(this.addAttackBtn,this,this.addAttackBtnHandler,[1]),this.onAutoClick(this.addAttackBtn1,this,this.addAttackBtnHandler,[2]),this.onAutoClick(this.addHpBtn,this,this.addAttackBtnHandler,[3]),this.onAutoClick(this.addHpBtn1,this,this.addAttackBtnHandler,[4]),this.onAutoGlobalEvt("XIANFU_ALL_RP_EVENT",this,this.checkXFRP),this.onAutoGlobalEvt("BAG_UPDATE",this,this.checkXFRP),this.onAutoGlobalEvt("SELECT_CHAT_CHANNEL",this,this.chatUpdate),this.onAutoGlobalEvt("CHAT_UPDATE",this,this.chatUpdate),this.onAutoGlobalEvt("WARBAND_MESSAGE_UPDATE",this,this.updateTeamMessage),this.onAutoGlobalEvt("PANEL_OPENED",this,this.otherOpenHandler),this.onAutoGlobalEvt("PANEL_CLOSED",this,this.otherCloseHandler),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("PLAYER_TITLE_UPDATE",this,this.updateNewTitle),this.onAutoGlobalEvt("PLAYER_UPDATE_EXP",this,this.updataExpBar),this.onAutoGlobalEvt("EMAIL_LIST_UPDATE",this,this.emailNotice),this.onAutoGlobalEvt("TASK_UPDATED",this,this.taskUpdatedHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateSmelt),this.onAutoGlobalEvt("BAG_DATA_GOT",this,this.updateSmelt),this.onAutoGlobalEvt("SELECT_SMELT_UPDATE",this,this.updateSmelt),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.updateSmelt),this.onAutoGlobalEvt("SCENE_ENTER",this,this.enterScene),this.onAutoGlobalEvt("SMELT_UPDATE",this,this.updateSmelt),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.updateSmelt),this.onAutoGlobalEvt("TEAM_INVITES_UPDATE",this,this.updateTeamInviteBtn),this.onAutoGlobalEvt("AUCTION_STORE_UPDATE",this,this.updateStoreBtn),this.onAutoGlobalEvt("WINDCLOUD_TIMER",this,this.updateStoreBtn),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),this.onAutoGlobalEvt("TEAM_COPY_ROOM_UPDATE",this,this.updateTeamWaitBtnShow),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.updateTeamWaitBtnShow),this.onAutoGlobalEvt("GET_APPLICATIONS_EXREPLY_UPDATE",this,this.updateTeamWaitBtnShow),this.onAutoGlobalEvt("SCENE_ENTER",this,this.updateTeamWaitBtnShow),this.onAutoGlobalEvt("TEAM_COPY_ROOM_UPDATE",this,this.teamMatchUpdate),this.onAutoGlobalEvt("TEAM_BATTLE_MATCH_UPDATE",this,this.teamMatchUpdate),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.teamMatchUpdate),this.onAutoGlobalEvt("LIMIT_PACK_UPDATE",this,this.limitPackUpdateHandler),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funcUpdate),this.onAutoGlobalEvt("MARRY_GIFT_PACK_UPDATE",this,this.updateMarryGiftPack),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.checkXFRP),this.onAutoGlobalEvt("MARRY_PROPOSE_LIST_UPDATE",this,this.updateMarrySeekList),this.onAutoGlobalEvt("XIANFU_SKILL_UPDATE",this,this.checkXFRP),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.onAutoGlobalEvt("GER_PASSWAED_RED_BAG",this,this.openPassWard),this.onAutoGlobalEvt("RED_BAG_INFO_UPDTE",this,this.showRedBag),this.regAutoRP(this.dotImg_3,["beastsSpiritRP1","beastsSpiritRP","petFeedSkillRP","petFeedMatRP","petRankSkillRP","petRefineMaterialRP","weaponFeedSkillRP","weaponFeedMatRP","weaponRankSkillRP","weaponRefineMaterialRP","weaponIllusionRP","petIllusionRP","petRankMatRP","weaponRankMatRP","petFazhenJipinRP","petFazhenZhenpinRP","petFazhenJuepinRP","weaponFazhenJipinRP","weaponFazhenZhenpinRP","weaponFazhenJuepinRP","petIllusionMasterRP","petCircleMasterRP","weaponIllusionMasterRP","weaponCircleMasterRP","showEquipPet","showEquipRide"]),this.regAutoRP(this.dotImg_xx,["bornRP","magicPositionRP","flyUpRP"]),this.regAutoRP(this.dotImg_5,["intensiveRP","stoneRP","equipmentZuHunRP","daZhaoRP","xiLianMaster"]),this.regAutoRP(this.dotImg_2,["talismanRP","magicArtRP","tsJianwuRp","tsDunwuRp"]),this.regAutoRP(this.dotImg_4,["glovesRP","redEquipComposeRP","goldBodyRP","runeRP","runeResolvRP","runeComposeRP","runeBookRP","equipPartRP","immortalsShengjiRP","immortalsHuanhuaJipinRP","immortalsHuanhuaZhenpinRP","immortalsHuanhuaJuepinRP","immortalsHuanhuateShuRP","immortalsFuhunRP","wingShengjiRP","wingHuanhuaJipinRP","wingHuanhuaZhenpinRP","wingHuanhuaJuepinRP","wingFuhunRP","playerTitleRP","fashionSuitsRP","fashionSuits1RP","fashionSuits2RP","fightTalismanRP","moneyCatRP","equipSuitRP_0","equipSuitRP_1","equipSuitRP_2","equipSuitRP_3","equipSuitRP_4","equipSuitRP_5","equipSuitRP_6","equipSuitRP_7","thunderboltEquipRP1","thunderboltEquipRP2","equipSuitRP_8","equipSuitRP_9","equipSuitRP_10","equipSuitRP_11","equipSuitRP_12","equipSuitRP_13","equipSuitRP_14","xianDanRP","destinyPellet","tianZhuShengJiRP","tianZhuShengJiMatRP","tianZhuHuanHuaZhenPinRP","tianZhuHuanHuaJiPinRP","tianZhuHuanHuaJuePinRP","tianZhuFuHunRP","fashionShengJiRP","fashionShengJiMatRP","fashionHuanHuaZhenPinRP","fashionHuanHuaJiPinRP","fashionHuanHuaJuePinRP","fashionHuanHuaTeShuRP","fashionFuHunRP","yuanShenRP","fashionMasterRP","pearlMasterRP","immortalMasterRP","wingMasterRP","showEquipImmortal","showEquipFashion","showEquipPearl","showEquipWing","extremeEquioPanelRP","ninghunRP","zhanhunRP","brahmaRP1","brahmaRP2","brahmaRP3","brahmaRP4","showEquipImmortal","showEquipFashion","showEquipPearl","showEquipWing","extremeEquioPanelRP","ninghunRP","zhanhunRP"]),this.regAutoRP(this.dotImg_6,["bagRP","composeRP","shenqiRP"]),this.regAutoRP(this.shangChengRPImg,["shangchengRP","auctionStoreRP"]),this.regAutoRP(this.moreBtnRP,["archiveRP","xianfuBlueHandBookRP","xianfuVioletHandBookRP","xianfuOrangeHandBookRP","xianfuRedHandBookRP","marryIntimacyAwardsRP","marryMessageRP","marryTaskRP","marryRingResonanceRP","marryIntimacyFeedRP","marryRingFeedRP","marryCopyRP","marryTokenFeedRP","marryTokenRankRP","marryMarkRP","babyGrowthRP","babySkillBaseRP","babySkillHaloRP","babyGradeRP","babySkillTalentRP","babyTonicRP","babyActiveSkillRP","warbandDonateRP","warbandLvAwardRP","warbandApplyRP","divinatoryCardItemRP","divinatoryCardStrongRP","welfarePlaceBossRP","welfarePlacePawnRP"]),this.regAutoRP(this.archiveRP,["archiveRP","xianfuBlueHandBookRP","xianfuVioletHandBookRP","xianfuOrangeHandBookRP","xianfuRedHandBookRP"]),this.regAutoRP(this.marryRP,["marryCopyRP","marryIntimacyAwardsRP","marryMessageRP","marryTaskRP","marryRingResonanceRP","marryIntimacyFeedRP","marrySkillRP","marryRingFeedRP","marryTokenFeedRP","marryTokenRankRP","marryMarkRP","babyGrowthRP","babySkillBaseRP","babySkillHaloRP","babyGradeRP","babySkillTalentRP","babyTonicRP","babyActiveSkillRP"]),this.regAutoRP(this.warbandRP,["warbandDonateRP","warbandLvAwardRP","warbandApplyRP","welfarePlaceBossRP","welfarePlacePawnRP"]),this.regAutoRP(this.divinatoryRP,["divinatoryCardItemRP","divinatoryCardStrongRP"]),this.onAutoGlobalEvt("XIANFU_EVENT_UPDATE",this,this.updateEventIcon),this.regAutoRP(this.friendsRpImg,["teaminvastion"])},Object.defineProperty(B.prototype,"checkIsHaveEvent",{get:function(){return!l.xianfu.XianfuModel.instance.xianfuEvent||!l.xianfu.XianfuModel.instance.xianfuEvent[1]},enumerable:!0,configurable:!0}),B.prototype.updateEventIcon=function(){if(this.checkIsHaveEvent)this.xianFuTipsBox.visible=!1;else{this.xianFuTipsBox.visible=!0;var t=l.xianfu.XianfuModel.instance.xianfuEvent[0];this.xianFuTipsText.text=""+this.xianFuEvenStr[t]}},B.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),Laya.timer.clear(this,this.expLoopHandler),Laya.timer.clear(this,this.loopHandlerStore),e.prototype.offEvt.call(this)},B.prototype.stageClickHandler=function(t){if(this.funcBtnBox.visible&&t.target!==this.moreBtn){if(t.target===this.archiveEnterBtn)this.archiveEnterHandler();else if(t.target===this.marryBtn)this.marryBtnHandler();else if(t.target===this.warbandBtn){if(!l.warband.WarbandModel.instance.inited)return;l.warband.WarbandModel.instance.info?s.instance.openTabByFunc(467):u.instance.open(764)}else t.target===this.divinatoryBtn&&l.divinatory_card.DivinatoryCardModel.instance.openSelectRedWin();this.funcBtnBox.visible=!1}},B.prototype.closeGmBtnHandler=function(){},B.prototype.moreBtnHandler=function(){if(b.instance.getFuncIsOpen(345))this.funcBtnBox.visible=!this.funcBtnBox.visible;else{var t=b.instance.getFuncOpenTipById(345);C.instance.addNotice(t,!0)}},B.prototype.archiveEnterHandler=function(){s.instance.openTabByFunc(265)},B.prototype.funcUpdate=function(){this.funcBtnBox.visible=!1,this.moreBtnBox.visible=b.instance.getFuncNeedShow(345)},B.prototype.otherOpenHandler=function(t){null!=t&&(-1!=this._chatPanels.indexOf(t)&&(this.fitBox.visible=!1),354==t&&(this.teamWaitBox.visible=!1),1542==t&&(this.teamWaitBox.visible=!1))},B.prototype.otherCloseHandler=function(t){if(null!=t&&(-1!=this._chatPanels.indexOf(t)&&(this.fitBox.visible=!0),354==t&&(this.teamWaitBox.visible=l.teamBattle.TeamBattleModel.Instance.isHaveRoom,this.teamWaitRP.visible=!1),1542==t)){var e=f.instance.enterScene[0],i=c.instance.getCfgById(e)[7];this.teamWaitBox.visible=0===i&&CommonGroupUtil.isMyHaveTeam(),this.teamWaitRP.visible=l.redPoint.RedPointCtrl.instance.getRPProperty("teaminvastion")}},B.prototype.updateTeamMessage=function(){6!=_.instance.currChatChannel&&_.instance.getNoseeMessage(6)},B.prototype.checkXFRP=function(t){null!=t&&0!==t||(this.dotImg_xf.visible=l.xianfu.XianfuModel.instance.checkShengjiRP()||l.xianfu.XianfuModel.instance.checkTaskRP()||l.xianfu.XianfuModel.instance.checkArticleRP()||0<l.xianfu.XianfuModel.instance.eventIds.length)},B.prototype.xianfuEventHandler=function(){var t=this;if(!this._girlTween.isPlaying&&!this._wordBoxTween.isPlaying){var e=l.xianfu.XianfuModel.instance.eventIds||[],i=ArrayUtils.random(e);null!=i&&(this.girlBox.visible=!0,this.wordTxt.innerHTML=this._grilWords[i],this.wordTxtCenterY(),this._girlTween&&this._wordBoxTween&&this._girlTween.to({scaleX:1,scaleY:1},500).start().onComplete(function(){t._wordBoxTween.to({x:0},500).start(),t._girlTime=3e3,Laya.timer.loop(1e3,t,t.girlTime)}))}},B.prototype.wordTxtCenterY=function(){this.wordTxt.style.height=this.wordTxt.contextHeight,this.wordTxt.y=(this.wordBox.height-this.wordTxt.height)/2},B.prototype.girlTime=function(){if(this._girlTime<=0)return this.girlBox.visible=!1,this.wordBox.x=this.wordBox.width,this.girlImg.scale(0,0),void Laya.timer.clear(this,this.girlTime);this._girlTime-=1e3},B.prototype.initGirlShow=function(){this._girlTime=0,this.girlTime()},B.prototype.chatUpdate=function(){var t,e=_.instance.currChatChannel;if(1==e)t=_.instance.jiuzhouChatRecord,this.checkChatContentType(t);else if(2==e)t=_.instance.benfuChatRecord,this.checkChatContentType(t);else if(4==e)t=_.instance.factionChatRecord,this.checkChatContentType(t);else if(3==e){var i=_.instance.systemChatRecord.concat();if(!i)return;3<i.length&&(i=i.splice(-3)),this._list.datas=i}else 5==e?(t=_.instance.marryChatRecord,this.checkChatContentType(t)):6==e&&(t=_.instance.warbandChatRecord,this.checkChatContentType(t));this._list.conHeight>=this._list.height&&(this._list.scrollPos=this._list.conHeight-this._list.height)},B.prototype.checkChatContentType=function(t){0==t.length?this._list.datas=[]:2==t[t.length-1][1][1]?this._list.datas=[t[t.length-1]]:this._list.datas=t.slice(t.length-3,t.length)},B.prototype.redBagBoxHandler=function(){s.instance.openTabByFunc(906),l.redBag.RedBagCtrl.instance.sendData()},B.prototype.openPassWard=function(t){if(t){var e=l.chat.ChatUtil.getChatPanelByChatType(l.redBag.RedBagUtils.channelToChatChannel(t[10]));u.instance.open(e,t)}},B.prototype.chatMessageTxtHandler=function(){var t=l.chat.ChatUtil.getChatPanelByChatType(_.instance.currChatChannel);u.instance.open(t)},B.prototype.inputEnterHandler=function(){this.inputTxt.text&&o.instance.gmCommand(this.inputTxt.text)},B.prototype.oneKeySmelt=function(){n.instance.quicklyOneKeySmelt(),this.updateSmelt()},B.prototype.newTitleBtnSmelt=function(){u.instance.open(264)},B.prototype.updateSmelt=function(){var t=!(n.instance.getBagEnoughById(1)>r.instance.getCfgById(10007)[1][0]);if(t){var e=!1,i=n.instance.getSmeltRank();i&&0<i.length&&(e=!0),t=e}this._isShow!=t&&(this.oneKeyBtn.visible=t,(this._isShow=t)?this.smeltEffectLoop():this._tipBox1Tween&&this._tipBox1Tween.stop())},B.prototype.smeltEffectLoop=function(){this._tipBox1Tween&&this._tipBox1Tween.stop(),this.oneKeyBtn.y=48,this._tipBox1Tween=TweenJS.create(this.oneKeyBtn).to({y:this.oneKeyBtn.y-15},600).start().yoyo(!0).repeat(99999999)},B.prototype.updateNewTitle=function(){var t=l.player_title.PlayerTitleModel.instance.isJiHuo();this._isShowNewTitle!=t&&(this.newTitleBtn.visible=t,(this._isShowNewTitle=t)?this.newTitleBtnEffectLoop():this._tipBox2Tween&&this._tipBox2Tween.stop())},B.prototype.newTitleBtnEffectLoop=function(){this._tipBox2Tween&&this._tipBox2Tween.stop(),this.newTitleBtn.y=48,this._tipBox2Tween=TweenJS.create(this.newTitleBtn).to({y:this.newTitleBtn.y-15},600).start().yoyo(!0).repeat(99999999)},B.prototype.enterScene=function(t){if(void 0===t&&(t=-1),this.nineCopyBox.visible=!1,-1!==t||f.instance.enterScene){var e=c.instance.getCfgById(-1!==t?t:f.instance.enterScene[0])[7];this.initGirlShow(),GlobalData.dispatcher.off("XIANFU_ALL_RP_EVENT",this,this.xianfuEventHandler),0===e?(this.fitBox.addChildAt(this.taskBox,5),GlobalData.dispatcher.on("XIANFU_ALL_RP_EVENT",this,this.xianfuEventHandler),this.xianfuEventHandler(),this._inScene=!1,this.limitPackUpdateHandler(),this.updateStoreBtn(),this.updateTeamInviteBtn()):(this.taskBox.removeSelf(),this._inScene=!0,this.limitPackUpdateHandler(),this.updateStoreBtn(),this.updateTeamInviteBtn(),14===e&&9===f.instance.enterScene[3]&&(this.nineCopyBox.visible=!0))}},B.prototype.xxHandler=function(){s.instance.openTabByFunc(101)},B.prototype.btn2Handler=function(){s.instance.openTabByFunc(102)},B.prototype.btn3Handler=function(){s.instance.openTabByFunc(103)},B.prototype.btn4Handler=function(){s.instance.openTabByFunc(106)},B.prototype.btn5Handler=function(){s.instance.openTabByFunc(104)},B.prototype.btn6Handler=function(){s.instance.openTabByFunc(105)},B.prototype.friendsHandler=function(){d.instance.checkHasRedPoint()?(u.instance.open(20),CommonGroupUtil.inTeamCopyOpen(!1)):CommonGroupUtil.inTeamCopyOpen()},B.prototype.strongHandler=function(){l.config.ActionOpenCfg.instance.getCfgById(52)[10]?u.instance.openByActionId(62):s.instance.openTabByFunc(62)},B.prototype.marryBtnHandler=function(){s.instance.openTabByFunc(320)},B.prototype.teamWaitBtnHandler=function(){CommonGroupUtil.isMyHaveTeam()&&CommonGroupUtil.isOpenRoom()},B.prototype.updateTeamWaitBtnShow=function(){this.teamWaitBox.visible=!1,l.teamBattle.TeamBattleModel.Instance.isHaveRoom&&!w.whetherInCopy()?(this.teamWaitBox.visible=!0,this.teamWaitRP.visible=!1):CommonGroupUtil.isMyHaveTeam()&&!w.whetherInCopy()&&(this.teamWaitBox.visible=!0,this.teamWaitRP.visible=l.redPoint.RedPointCtrl.instance.getRPProperty("teaminvastion"))},B.prototype.updateTeamInviteBtn=function(){var t=l.teamInvite.TeamInviteModel.instance.teamInvites;if(this._inScene){var e=l.scene.SceneUtil.currScene,i=40===e||52===e||9===e;this.teamInviteBtn.visible=!i&&0<t.length}else this.teamInviteBtn.visible=0<t.length;this.refreshBtns()},B.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(778==t[e]&&l.funcOpen.FuncOpenModel.instance.getFuncIsOpen(778))return void this.updateStoreBtn()},B.prototype.updateStoreBtn=function(){this._inScene?(this.storeBtn.visible=!1,Laya.timer.clear(this,this.loopHandlerStore)):l.store.AuctionStoreModel.instance.available&&b.instance.getFuncIsOpen(778)?(Laya.timer.loop(1e3,this,this.loopHandlerStore),this.loopHandlerStore(),this.storeBtn.visible=!0):(this.timerTxt.text="00:00:00",Laya.timer.clear(this,this.loopHandlerStore),this.storeBtn.visible=!1),this.refreshBtns()},B.prototype.loopHandlerStore=function(){l.store.AuctionStoreModel.instance.endTime>GlobalData.serverTime?this.timerTxt.text=l.common.CommonUtil.timeStampDDHHToHHMMSS(l.store.AuctionStoreModel.instance.endTime):(this.timerTxt.text="00:00:00",Laya.timer.clear(this,this.loopHandler),GlobalData.dispatcher.event("WINDCLOUD_TIMER"))},B.prototype.teamMatchUpdate=function(){if(l.teamBattle.TeamBattleModel.Instance.isHaveRoom){var t=l.teamBattle.TeamBattleModel.Instance.playerInfos.length;this.teamWaitCountTxt.text=t+1+"/3"}else CommonGroupUtil.isMyHaveTeam()&&(t=l.common_group.CommonGroupModel.instance.members.length,this.teamWaitCountTxt.text=t+"/3")},B.prototype.teamInviteBtnHandler=function(){u.instance.open(355)},B.prototype.storeBtnHandler=function(){u.instance.open(1169)},B.prototype.xfHandler=function(){l.xianfu.XianfuCtrl.instance.enterScene()},B.prototype.limitPackBtnHandler=function(){this._hasEnterLimitPack=!0,this._limitPackEff&&(this._limitPackEff.removeSelf(),this._limitPackEff.destroy(),this._limitPackEff=null),u.instance.open(357)},B.prototype.limitPackUpdateHandler=function(){this._inScene?this.limitPackBtn.visible=!1:(l.limit_pack.LimitPackModel.instance.limitPackInfo&&l.limit_pack.LimitPackModel.instance.limitPackInfo.length?(this.limitPackBtn.visible=!0,0!=this._hasEnterLimitPack||this._limitPackEff||(this._limitPackEff=w.creatEff(this.limitPackBtn,"activityEnter",15),this._limitPackEff.play())):this.limitPackBtn.visible=!1,PlatParams.isCloseRecharge&&(this.limitPackBtn.visible=!1),this.refreshBtns())},B.prototype.clickTaskHandler=function(){var t=g.instance.taskInfo;if(t)if(2===t[1])TaskCtrl.instance.getTaskAward(t[0]);else{var e=p.instance.getTaskCfgById(t[0])[3];if(!e)return;46===e?this.panelHandler():u.instance.openByActionId(e)}},B.prototype.panelHandler=function(){var t=l.config.SceneCopyTianguanCfg.instance.getCfgByLv(l.mission.MissionModel.instance.curLv);if(t){var e=r.instance.getCfgById(32001),i=e?e[1][0]:0;if(l.mission.MissionModel.instance.curLv<=i){var n=t[2];if(l.mission.MissionModel.instance.curWare!==n||l.mission.MissionModel.instance.auto){var s=t[2],o=l.mission.MissionModel.instance.curWare;C.instance.addNotice("还需击败"+(s-o)+"波怪物，才能开启闯关",!0)}else l.mission.MissionCtrl.instance.challenge(t[0])}else u.instance.open(19)}},B.prototype.taskUpdatedHandler=function(){var t=g.instance.taskInfo;if(t){var e=t[0],i=t[1],n=t[2],s=p.instance.getTaskCfgById(e);this.awardsTxt.innerHTML=s[4],1===i?(this._taskClip&&this._taskClip.removeSelf(),this.nameTxt.innerHTML=s[1]+"<span style='color:#FF3E3E'>&nbsp;("+n[0][1]+"/"+n[0][2]+")</span>"):2===i&&(this._taskClip||(this._taskClip=new a,this._taskClip.skin="assets/effect/task.atlas",this._taskClip.frameUrls=["task/0.png","task/1.png","task/2.png","task/3.png","task/4.png","task/5.png","task/6.png","task/7.png"],this._taskClip.durationFrame=7,this._taskClip.loop=!0,this._taskClip.y=26,this._taskClip.centerX=0,this._taskClip.mouseEnabled=!1),this._taskClip.play(),this.taskBox.addChild(this._taskClip),this.nameTxt.innerHTML=s[1]+"<span style='color:#50ff28'>&nbsp;(已完成)</span>")}},B.prototype.loopHandler=function(){this._date||(this._date=new Date),this._date.setTime(GlobalData.serverTime),this.timeTxt.text=this._date.toLocaleString()},B.prototype.expLoopHandler=function(){if(m.instance.level===h.instance.maxLv)return this.expBar.width=this._barMaxWidth,this._expEffect.visible=!1,void Laya.timer.clear(this,this.expLoopHandler);if(this._recordLv===this._expTarget.lv&&this.expBar.width>=this._expTarget.barWidth)return this.expBar.width>this._expTarget.barWidth&&(this.expBar.width=this._expTarget.barWidth),this._expEffect.visible=!1,void Laya.timer.clear(this,this.expLoopHandler);if(this._expTarget.lv>this._recordLv){if(this.expBar.width>=this._barMaxWidth)return this._recordLv++,this._expEffect.x=this.expBar.width=this.expBar.width-this._barMaxWidth,void this.expLoopHandler();this.expBar.width+=10}else this.expBar.width+=10;this._expEffect.x=this.expBar.width,this._expEffect.visible=!0},B.prototype.updateMarrySeekList=function(){this.beMarryBtn.visible=l.marry.MarryModel.instance.proposeList&&0<l.marry.MarryModel.instance.proposeList.length,this.refreshBtns()},B.prototype.refreshBtns=function(){for(var t=[this.storeBtn,this.beMarryBtn,this.limitPackBtn,this.teamInviteBtn],e=0,i=0,n=t.length;i<n;i++){var s=t[i];s.visible&&(s.x=234-85*e,++e)}},B.prototype.expWidth=function(t,e){var i=h.instance.getCfgByLv(t)[2];return Math.round(e/i*this._barMaxWidth)},B.prototype.updataExpBar=function(){this._expTarget.lv=m.instance.level,this._expTarget.barWidth=this.expWidth(m.instance.level,m.instance.exp),Laya.timer.frameLoop(1,this,this.expLoopHandler,null,!0)},B.prototype.emailNotice=function(){d.instance.checkHasRedPoint()?(this._emailClip.play(),this._emailClip.visible=!0):(this._emailClip.stop(),this._emailClip.visible=!1)},B.prototype.closeGirlBtnHandler=function(){this.girlBox.visible=!1},B.prototype.marryGiftPackHandler=function(){u.instance.open(510)},B.prototype.updateMarryGiftPack=function(){var t=l.marry.MarryModel.instance.packList;this.marryGiftPack.visible=t&&0<t.length,this.marryTween&&(this.marryTween.stop(),this.marryTween=null),this.marryGiftPack.visible&&this.tweenEffect1(this.marryTween,this.marryGiftPack),this.showRedBag()},B.prototype.beMarryBtnHandler=function(){u.instance.open(636)},B.prototype.tweenEffect1=function(t,e){var i=this;t=TweenJS.create(e).to({rotation:-15},66).onComplete(function(){t.to({rotation:15},100).onComplete(function(){t.to({rotation:0},33).onComplete(function(){Laya.timer.once(2e3,i,i.tweenEffect1,[t,e])}).start()}).start()}).start()},B.prototype.tweenEffect2=function(t,e){var i=this;t=TweenJS.create(e).to({rotation:-15},66).onComplete(function(){t.to({rotation:15},100).onComplete(function(){t.to({rotation:0},33).onComplete(function(){Laya.timer.once(2e3,i,i.tweenEffect2,[t,e])}).start()}).start()}).start()},B.prototype.destroy=function(t){void 0===t&&(t=!0),this._taskClip=this.destroyElement(this._taskClip),this.taskBox=this.destroyElement(this.taskBox),this._limitPackEff=this.destroyElement(this._limitPackEff),this._tipBox1Tween&&(this._tipBox1Tween.stop(),this._tipBox1Tween=null),this._tipBox2Tween&&(this._tipBox2Tween.stop(),this._tipBox2Tween=null),e.prototype.destroy.call(this,t)},B.prototype.gmBtnHandler=function(){},B.prototype.qingChuBtnHandler=function(){},B.prototype.addLvbtnHandler=function(){},B.prototype.addTgBtnHandler=function(){},B.prototype.addZsBtnHandler=function(){},B.prototype.addMoneyHandler=function(){},B.prototype.addMoney1Handler=function(){},B.prototype.resetBossHandler=function(){},B.prototype.addAttackBtnHandler=function(t){},B.prototype.initSkin=function(){var t=l.common.VersionResUtlis.getRes(2);"bottom"!==t&&(this.bottomBg.skin=t+"/bg0_mainui_bottom.png",this.xxBtn.skin=t+"/btn_mainui_xx.png",this.btn4.skin=t+"/btn_mainui_js.png",this.btn2.skin=t+"/btn_mainui_xf.png",this.btn3.skin=t+"/btn_mainui_xl.png",this.btn5.skin=t+"/btn_mainui_dz.png",this.btn6.skin=t+"/btn_mainui_bb.png",this.xfBtn.skin=t+"/btn_mainui_xfu.png",this.taskBg.skin=t+"/txtbg_mainui_rw.png",this.friendsBtn.skin=t+"/btn_mainui_hy.png",this.strongBtn.skin=t+"/btn_mainui_shangc.png")},x=B,t.BottomPanel=x}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("effect"),e=0,i=t.length;e<i;e++)this._table[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.EffectCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._buffs=new Array}e=t.buff||(t.buff={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateBuffList=function(t){var e;if(t){for(var i=0,n=t[0].length;i<n;i++){var s=t[0][i],o=GameCenter.instance.getRole(PlayerModel.instance.actorId);null!=o&&o.publish("buff",s[0],s[1]);var a=s[1];if(1===s[0])(e=this._buffs).push.apply(e,s[1]);else if(2===s[0])for(var r=0,l=a.length;r<l;r++)for(var h=0,c=this._buffs.length;h<c;h++)if(a[r][0]===this._buffs[h][0]){this._buffs.splice(h,1);break}}0==t[0].length&&(this._buffs.length=0),GlobalData.dispatcher.event("UPDATE_BUFF_LIST")}},Object.defineProperty(n.prototype,"buffs",{get:function(){return this._buffs},enumerable:!0,configurable:!0}),i=n,e.BuffModel=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("skill_effect")},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.SkillEffectCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){var t=null!==i&&i.apply(this,arguments)||this;return t._bgMusicUrl="assets/sound/bg_music_1.mp3",t._btnClickUrl="assets/sound/btn_click.mp3",t}e=t.sound||(t.sound={}),n=t.core.BaseCtrl,s=Laya.SoundManager,o=Laya.LocalStorage,a=t.config.SceneCfg,r=t.config.SkillEffectCfg,i=n,__extends(h,i),Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.setup=function(){this.soundEnabled="0"!==o.getItem("joytime_jzpmz_sound"),s.defaultIntervals[this._btnClickUrl]=-1,Laya.stage.on(Laya.Event.CLICK,this,this.clickHandler)},Object.defineProperty(h.prototype,"soundEnabled",{get:function(){return this._soundEnabled},set:function(t){this._soundEnabled!==t&&(this._soundEnabled=t,o.setItem("joytime_jzpmz_sound",t?"1":"0"),s.muted=!t,GlobalData.dispatcher.event("SOUND_ENABLE_CHANGE"),t?this._playingBGM&&s.playMusic(this._playingBGM):s.stopAll())},enumerable:!0,configurable:!0}),h.prototype.playSceneBg=function(t){var e=a.instance.getCfgById(t)[11];this._playingBGM=e?"assets/sound/"+e+".mp3":this._bgMusicUrl,this._soundEnabled&&s.playMusic(this._playingBGM)},h.prototype.playSkillSound=function(t){if(this._soundEnabled){var e=r.instance.getCfgById(1e4*t);if(e){var i=e[12];if(i){var n="assets/sound/"+i+".mp3";s.defaultIntervals[n]=3e5,s.playSound(n)}}}},h.prototype.playBtnClick=function(){this._soundEnabled&&s.playSound(this._btnClickUrl)},h.prototype.clickHandler=function(t){this._soundEnabled&&t.target!==Laya.stage&&s.playSound(this._btnClickUrl)},h.prototype.stopAll=function(){s.stopAll()},l=h,e.SoundCtrl=l}(modules=modules||{}),function(t){var e,i;function n(){this._arr=[],this.init()}e=t.main||(t.main={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._arr[5]=["sevenDayGiftRP"],this._arr[6]=["springSceneryFestDailyRewardRP","perfectestTenDailyRewardRP","spaceTravelDailyRewardRP","anniversaryDayFestDailyRewardRP","barDayFestDailyRewardRP","childrensDayFestDailyRewardRP","grainFullDailyRewardRP","mothersDayFestDailyRewardRP","laborDayFestDailyRewardRP","grainRainDailyRewardRP","tombSweepingDayDailyRewardRP","publicSurveyFestDailyRewardRP","vernalEquinoxDailyRewardRP","arborDayFestDailyRewardRP","womensDayFestDailyRewardRP","dragonBlessingDailyRewardRP","springNightDailyRewardRP","lantemFestDailyRewardRP","newYearFestDailyRewardRP","newYearsEveDailyRewardRP","weiYaDailyRewardRP","yuanDanFestDailyRewardRP","heQuFestDailyRewardRP","christmasFestDailyRewardRP","dongZhiDailyRewardRP","zhiZhenDailyRewardRP","moRiDailyRewardRP","goodSnowYearsDailyRewardRP","ganEnDailyRewardRP","warmerWintersDailyRewardRP","singleFestDailyRewardRP","halloweenDailyRewardRP","liDongDailyRewardRP","signRP","monthCardRP","weekCardRP","onlineGiftRP","sevenDayGiftRP","preventFoolRP"],this._arr[49]=["treasureRP","treasureBagRP","treasureExchangeRP"],this._arr[117]=["zeroBuyEntranceRP"],this._arr[319]=["superVipRP"],this._arr[112]=["cumulateRP"],this._arr[115]=["continuePayRP"],this._arr[147]=["continuePayRP","cumulateRP","consumeRP"],this._arr[266]=["openChallengeRP"],this._arr[118]=["consumeRP"],this._arr[121]=["investLoginRP","investRecruitRP","investGrowthRP"],this._arr[125]=["sprintRankXianQiRP","sprintRankLingChongRP","sprintRankShenBingRP","sprintRankXianYiRP","sprintRankFaBaoRP","sprintRankEquipmentRP","sprintRankFighitingRP","sprintRankRP"],this._arr[130]=["guShenRP","gushengrade1RP","gushengrade2RP","gushengrade3RP","gushengrade4RP","gushengrade5RP"],this._arr[139]=["kuangHuanRP","kuangHuanLevelRP","kuangHuanPowarRP"],this._arr[140]=["cumulate2RP"],this._arr[180]=["halfMonthGiftRP"],this._arr[193]=["festDailyRewardRP","payRewardRP","rotaryTableJiuZhouRP","payRankRP","cumulatePayTianZhuRP","cumulatePayShenHunRP","everyDayRebateRP","loginRewardRP"],this._arr[215]=["weekLoginRP","weekSinglePayRP","weekRepeatPayRP","weekConsumeRP"],this._arr[224]=["feedBackRP"],this._arr[227]=["invitationRP"],this._arr[228]=["realNameRP"],this._arr[229]=["officialAccountRP"],this._arr[653]=["lyOfficialAccountRP"],this._arr[237]=["zxianYuBagPanelRP","zxianYuPanelRP","zxianYuStorePanelRP","zxianYuTreasurePanelRP"],this._arr[194]=["equipSuitRP_0","equipSuitRP_1","equipSuitRP_2","equipSuitRP_3","equipSuitRP_4","equipSuitRP_5","equipSuitRP_6","equipSuitRP_7","equipSuitRP_8","equipSuitRP_9","equipSuitRP_10","equipSuitRP_11","equipSuitRP_12","equipSuitRP_13","equipSuitRP_14"],this._arr[244]=["theCarnivalRP"],this._arr[252]=["jiuXiaoLingRP","jiuXiaoLingTaskRP"],this._arr[296]=["ringBuyRP"],this._arr[298]=["susanSladeRP"],this._arr[472]=["fuliguanLoginRP","fuliguanFightRP"],this._arr[543]=["yybPrivilege"],this._arr[627]=["qqLobbyStartRP","qqLobbyDailyRP","qqLobbyLevelRP"],this._arr[632]=["qqBlueStartRP","qqBlueDailyRP","qqBlueLevelRP"],this._arr[778]=["auctionStoreRP"],this._arr[784]=["vxShpreAlert","vxHelpAlert","vxUpgradeAlert","vxPlayAlert"],this._arr[839]=["windCloudRP"],this._arr[855]=["immortalContestWorship"],this._arr[886]=["treasureRebateRP6","treasureRebateRP7","treasureRebateRP8"],this._arr[891]=["wxChangePkgRP"],this._arr[969]=["brahmaPayRP"],this._arr[967]=["skyBookPayRP"],this._arr[981]=["weekCardRP"],this._arr[988]=["bindphoneRP"],this._arr[970]=["rankingListRP","rankingListRP1","rankingListRP2"],this._arr[986]=["hudieRP"],this._arr[1023]=["phoneQQRedBagRP"],this._arr[1025]=["threeSevenBoxRP"]},n.prototype.getRps=function(t){return this._arr[t]},i=n,e.LeftTopRPConfig=i}(modules=modules||{}),function(t){var a,e,i,s,r,n;function o(){var t=e.call(this)||this;return t._panels=[395,454,568,455,728,947,1189],t._funcIds=[242,260,353,261,462,623,783],t}a=t.rehead||(t.rehead={}),i=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,r=t.notice.SystemNoticeManager,e=i,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16787026,this.updateHeadIcon),this.subscribe(16787027,this.updateHeadIcon),this.subscribe(16787028,this.useHeadIconReply),this.subscribe(16787029,this.addHeadIconLevelReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("BAG_UPDATE",this.setRP),this.getHeadIcon()},o.prototype.setRP=function(){a.ReheadModel.instance.setRP()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];if((353==i||260==i||261==i)&&(s.instance.getFuncIsOpen(353)||s.instance.getFuncIsOpen(260)||s.instance.getFuncIsOpen(261)))return void a.ReheadModel.instance.setRP()}},o.prototype.addHeadIconLevel=function(t,e){this.publish(2106464,[t,e])},o.prototype.getHeadIcon=function(){this.publish(2106462,null)},o.prototype.updateHeadIcon=function(t){t&&a.ReheadModel.instance.updateHeadIcon(t)},o.prototype.useHeadIcon=function(t,e){this.publish(2106463,[t,e])},o.prototype.useHeadIconReply=function(t){var e=t[0];CommonUtil.codeDispose(e,"使用成功")},o.prototype.addHeadIconLevelReply=function(t){var e=t[0];if(0===e){var i=t[1],n=t[2],s=a.ReheadModel.instance.getStateByTypeId(i,n),o=a.ReheadModel.instance.getLvByTypeId(i,n);1===s&&1===o?r.instance.addNotice("激活成功"):r.instance.addNotice("升阶成功")}else CommonUtil.noticeError(e)},o.prototype.closeOthers=function(t){for(var e=0,i=this._panels;e<i.length;e++){var n=i[e];t!==n&&WindowManager.instance.close(n)}},o.prototype.openAlert=function(t,e){var i=this._panels[e];if(t!==i){var n=this._funcIds[e];s.instance.getFuncIsOpen(n)?WindowManager.instance.open(i):r.instance.addNotice(s.instance.getFuncOpenTipById(n),!0)}},o.prototype.itemHandler=function(t){var e,i=CommonUtil.getItemTypeById(t),n=CommonUtil.getItemSubTypeById(t);return 2===i&&16===n?(e=Handler.create(this,this.openAlert,[-1,1]),CommonUtil.alert("温馨提示","使用成功,点击主界面角色头像,打开游戏设置界面查看详情",[e]),!0):2===i&&15===n?(e=Handler.create(this,this.openAlert,[-1,2]),CommonUtil.alert("温馨提示","使用成功,点击主界面角色头像,打开游戏设置界面查看详情",[e]),!0):2===i&&17===n&&(e=Handler.create(this,this.openAlert,[-1,3]),CommonUtil.alert("温馨提示","使用成功,点击主界面角色头像,打开游戏设置界面查看详情",[e]),!0)},o.prototype.openHaveRpWin=function(){var t=a.ReheadModel.instance.getWin();1===t?this.openAlert(-1,1):2===t?this.openAlert(-1,2):3===t?this.openAlert(-1,3):this.openAlert(-1,0)},n=o,a.ReheadCtrl=n}(modules=modules||{}),function(l){var i,e,o,t,n,s,a,h,c,r,p,u,d,m,f,g,y,_;function v(){return null!==e&&e.apply(this,arguments)||this}i=l.main||(l.main={}),o=i.LeftTopRPConfig,t=l.player.PlayerModel,n=ui.LeftTopViewUI,s=l.config.SceneCfg,a=l.scene.SceneModel,h=l.config.ActionOpenCfg,c=l.funcOpen.FuncOpenModel,r=l.redPoint.RedPointCtrl,p=l.buff.BuffModel,u=l.sound.SoundCtrl,d=Laya.Point,m=l.notice.SystemNoticeManager,f=l.bottomTab.BottomTabCtrl,g=l.rehead.ReheadCtrl,y=l.common.CommonConfig,e=n,__extends(v,e),v.prototype.initialize=function(){e.prototype.initialize.call(this),this.left=0,this.top=y.topOffset+52,this.layer=3,this.closeByOthers=!1,this._btnTab={},this._sceneType=0,this.foldBtn.visible=!1,this.unfoldBtn.visible=!0,this.foldBtn.hitArea=new Laya.Rectangle(0,-10,this.foldBtn.width+25,this.foldBtn.height+20),this.unfoldBtn.hitArea=new Laya.Rectangle(0,-10,this.unfoldBtn.width+25,this.unfoldBtn.height+20),this.iosCloseId=[39,194,224,472,784,785,786,1023],this.showBtnId(),this.buffBtn.label="BUFF×0",this._totalLen=277,this.headIcon.type=0,this._blue=new l.qq.QQBlueIcon,this._blue.pos(78,3),this._blue.scale(.6,.6),this.addChild(this._blue)},v.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.soundBtn,this,this.soundHandler),this.onAutoClick(this.vipBtn,this,this.vipHandler),this.onAutoClick(this.nobleBtn,this,this.nobleHandler),this.onAutoClick(this.buffBtn,this,this.buffHandler),this.onAutoClick(this.foldBtn,this,this.selectShow,[0]),this.onAutoClick(this.unfoldBtn,this,this.selectShow,[1]),this.onAutoClick(this.headIcon,this,this.clickHeadHandler),this.onAutoGlobalEvt("SOUND_ENABLE_CHANGE",this,this.soundEnableChangeHandler),this.onAutoGlobalEvt("PLAYER_UPDATE_FIGHT",this,this.updateFight),this.onAutoGlobalEvt("PLAYER_UPDATE_HP",this,this.updateHp),this.onAutoGlobalEvt("PLAYER_UPDATE_MAX_HP",this,this.updateHp),this.onAutoGlobalEvt("SCENE_ENTER",this,this.enterScene),this.onAutoGlobalEvt("GET_MONTH_CARD_INFO_REPLY",this,this.showBtnHandler),this.onAutoGlobalEvt("UPDATE_MONTH_CARD_INFO",this,this.showBtnHandler),this.onAutoGlobalEvt("UPDATE_BUFF_LIST",this,this.buffBtnNumber),this.onAutoGlobalEvt("UPDATE_HALO_LIST",this,this.buffBtnNumber),this.onAutoGlobalEvt("SCENE_ENTER",this,this.buffBtnNumber),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.showNobleBtn),this.onAutoGlobalEvt("RED_POINT",this,this.checkRedPoint),this.onAutoGlobalEvt("VIP_UPDATE",this,this.vipShow),this.onAutoGlobalEvt("VIPF_UPDATE",this,this.vipShow),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("OFFICAL_ACCOUNT_STATUS_CHANGE",this,this.showBtnHandler),this.onAutoGlobalEvt("QQ_UPDATE",this,this.updateBlue),this.onAutoGlobalEvt("AUCTION_STORE_UPDATE",this,this.showBtnHandler),this.onAutoGlobalEvt("WINDCLOUD_TIMER",this,this.showBtnHandler),this.onAutoGlobalEvt("IMMORTAL_CONTEST_MAIN_RANK_UPDATE",this,this.showBtnHandler),this.regAutoRP(this.vipDot_img,["vipRP","vipNewRP"]),this.regAutoRP(this.rpImg,["reHeadRP","reHead1RP","reChatFrameRP"])},v.prototype.offEvt=function(){r.instance.retireRedPoint(this.operateRPImg),e.prototype.offEvt.call(this)},v.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateFight(),this.enterScene(),this.updateHp(),this.showNobleBtn(),this.checkRedPoint(),this.soundEnableChangeHandler(),this.vipShow(),this.setActionPreviewPos(),this.updateBlue(),this.buffBtnNumber()},v.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview)},v.prototype.setPosActionPreview=function(){d.TEMP.setTo(this.vipBox.width/2,this.vipBox.height/2);var t=this.vipBox.localToGlobal(d.TEMP,!0);l.action_preview.ActionPreviewModel.instance._posSprite.set(47,t),d.TEMP.setTo(this.nobleBtn.width/2,this.nobleBtn.height/2);var e=this.nobleBtn.localToGlobal(d.TEMP,!0);l.action_preview.ActionPreviewModel.instance._posSprite.set(50,e)},v.prototype.close=function(){e.prototype.close.call(this),this._tween&&this._tween.stop(),this._tweenHp&&this._tweenHp.stop(),this._tweenSideHp&&this._tweenSideHp.stop()},v.prototype.selectShow=function(t){this.foldBtn.visible=this.unfoldBtn.visible=!0,t?this.unfoldBtn.visible=!1:this.foldBtn.visible=!1,0==this._sceneType?this.vipBox.visible=c.instance.getFuncNeedShow(47)||c.instance.getFuncNeedShow(230):this.vipBox.visible=this.foldBtn.visible&&(c.instance.getFuncNeedShow(47)||c.instance.getFuncNeedShow(230)),PlatParams.isCloseRecharge&&(this.nobleBtn.visible=!1,this.vipBox.visible=!1),t?(c.instance.getFuncNeedShow(138)||c.instance.getFuncNeedShow(164))&&WindowManager.instance.open(5):WindowManager.instance.close(5),this.showBtnHandler()},v.prototype.checkRedPoint=function(){if(PlatParams.isCloseRecharge)this.operateRPImg.visible=!1;else if(this.unfoldBtn.visible){for(var t=[],e=0,i=this._hiddenBtnId.length;e<i;e++){var n=this._hiddenBtnId[e],s=o.instance.getRps(n);s&&t.push.apply(t,s)}r.instance.registeRedPoint(this.operateRPImg,t)}else r.instance.retireRedPoint(this.operateRPImg),this.operateRPImg.visible=!1},v.prototype.showBtnId=function(){this._hiddenBtnId=[],this._idArr=[];for(var t=h.instance.getOperatorCfg(),e=0,i=t.length;e<i;e++){var n=t[e][1];this.judgeIsShow(n)&&(this.unfoldBtn.visible?t[e][7]&&0==this._sceneType?this._idArr.push(n):this._hiddenBtnId.push(n):this._idArr.push(n))}this._idArr=this._idArr.sort(this.sortFunc),this._hiddenBtnId=this._hiddenBtnId.sort(this.sortFunc)},v.prototype.judgeIsShow=function(t){if(40===t&&1==l.monthCard.MonthCardModel.instance.flag||!(778!==t||l.store.AuctionStoreModel.instance.available&&c.instance.getFuncIsOpen(t))||!(839!==t||l.windCloud.WindCloudModel.instance.isInEnrollTime&&c.instance.getFuncIsOpen(t))||!(855!==t||l.immortalContest.ImmortalContestModel.instance.getWorshipIsOpen()&&c.instance.getFuncIsOpen(t)))return!1;var e=!1;if(229===t)return c.instance.getFuncNeedShow(t)&&l.newOfficialAccount.NewOfficialAccountModel.instance.info&&0===l.newOfficialAccount.NewOfficialAccountModel.instance.info[0];if(987==t){var i=l.config.BlendCfg.instance.getCfgById(99504)?l.config.BlendCfg.instance.getCfgById(99504)[1][0]:0;return c.instance.getFuncNeedShow(t)&&l.vip.VipModel.instance.vipLevel>=i}if(c.instance.getFuncNeedShow(t)){var n=h.instance.getCfgById(t)[9];if(0<n.length){for(var s=!1,o=0,a=n;o<a.length;o++){var r=a[o];if(c.instance.getFuncNeedShow(r)){s=!0;break}}e=s}else e=!0}return e},v.prototype.showBtnHandler=function(){for(var t in this.showBtnId(),this._btnTab)-1===this._idArr.indexOf(parseInt(t))&&(this._btnTab[t].destroy(!0),delete this._btnTab[t]);var e;if(PlatParams.isCloseRecharge){e=[];for(var i=0,n=this._idArr.length;i<n;i++){var s=this._idArr[i];-1<this.iosCloseId.indexOf(s)&&e.push(s)}}else e=this._idArr;for(i=0,n=e.length;i<n;i++)s=e[i],this.creatActivityBtn(s),this._btnTab[s].pos(50+i%6*85,124+80*Math.floor(i/6)),this.addChild(this._btnTab[s]);this.checkRedPoint(),GlobalData.dispatcher.event("ACTION_PREVIEW_RESIZE_UI")},v.prototype.sortFunc=function(t,e){return h.instance.getCfgById(t)[5]-h.instance.getCfgById(e)[5]},v.prototype.showNobleBtn=function(){PlatParams.isCloseRecharge?(this.nobleBtn.visible=!1,this.vipBox.visible=!1):(this.nobleBtn.visible=c.instance.getFuncNeedShow(50),this.vipBox.visible=c.instance.getFuncNeedShow(47)||c.instance.getFuncNeedShow(230)),this.showBtnHandler()},v.prototype.clickHeadHandler=function(){g.instance.openHaveRpWin()},v.prototype.updateFight=function(){t.instance.fight?this.powerNum.value=t.instance.fight.toString():this.powerNum.value="0"},v.prototype.vipShow=function(){if(1<=l.vip.VipModel.instance.vipLevel)this.vipBtn.skin="left_top/btn_zjm_svip.png",this.vipNum.value=""+l.vip.VipModel.instance.vipLevel;else{this.vipBtn.skin="left_top/btn_zjm_vip.png";var t=l.vip_new.VipNewModel.instance.getVipLevelTrue();this.vipNum.value=""+t}this.showBtnHandler()},v.prototype.updateHp=function(){this._endWidth=t.instance.hp/t.instance.maxHp*this._totalLen,this._tweenHp&&this._tweenHp.stop(),this._tweenHp=TweenJS.create(this.hpBar).to({width:this._endWidth},100).start(),this._tweenSideHp&&this._tweenSideHp.stop(),this._tweenSideHp=TweenJS.create(this.sideHpBar).to({width:this._endWidth},300).start(),99999<t.instance.maxHp?99999999<t.instance.maxHp?99999999<t.instance.hp?this.hpTxt.text=(t.instance.hp/Math.pow(10,8)).toFixed(2)+"亿/"+(t.instance.maxHp/Math.pow(10,8)).toFixed(2)+"亿":99999<t.instance.hp&&t.instance.hp<Math.pow(10,8)?this.hpTxt.text=(t.instance.hp/Math.pow(10,4)).toFixed(2)+"万/"+(t.instance.maxHp/Math.pow(10,8)).toFixed(2)+"亿":this.hpTxt.text=Math.floor(t.instance.hp).toString()+"/"+(t.instance.maxHp/Math.pow(10,8)).toFixed(2)+"亿":99999<t.instance.hp?this.hpTxt.text=(t.instance.hp/Math.pow(10,4)).toFixed(2)+"万/"+(t.instance.maxHp/Math.pow(10,4)).toFixed(2)+"万":this.hpTxt.text=Math.floor(t.instance.hp).toString()+"/"+(t.instance.maxHp/Math.pow(10,4)).toFixed(2)+"万":this.hpTxt.text=Math.floor(t.instance.hp).toString()+"/"+Math.floor(t.instance.maxHp).toString()},v.prototype.enterScene=function(t){void 0===t&&(t=-1),-1===t&&!a.instance.enterScene||(this._sceneType=s.instance.getCfgById(-1!==t?t:a.instance.enterScene[0])[7],0===this._sceneType?(this.unfoldBtn.visible=this.hpBg.visible=this.hpBar.visible=this.hpTxt.visible=this.sideHpBar.visible=!1,this.foldBtn.visible=this.powerBg.visible=this.powerNum.visible=!0,this.showNobleBtn(),this.left=-422,this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({left:0},y.panelTweenDuration).start()):(this.unfoldBtn.visible=this.hpBg.visible=this.hpBar.visible=this.hpTxt.visible=this.sideHpBar.visible=!0,this.foldBtn.visible=this.powerBg.visible=this.vipBox.visible=this.powerNum.visible=!1,this.left=-422,this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({left:0},y.panelTweenDuration).start(),this.showBtnHandler()),PlatParams.isCloseRecharge&&(this.nobleBtn.visible=!1,this.vipBox.visible=!1))},v.prototype.soundHandler=function(){u.instance.soundEnabled=!u.instance.soundEnabled},v.prototype.soundEnableChangeHandler=function(){this.soundBtn.selected=!u.instance.soundEnabled},v.prototype.vipHandler=function(){c.instance.getFuncIsOpen(230)?h.instance.getCfgById(230)[10]?WindowManager.instance.openByActionId(230):f.instance.openTabByFunc(230):m.instance.addNotice(c.instance.getFuncOpenTipById(230),!0)},v.prototype.nobleHandler=function(){WindowManager.instance.open(111)},v.prototype.buffHandler=function(){WindowManager.instance.open(112)},v.prototype.buffBtnNumber=function(){var t=p.instance.buffs?p.instance.buffs.length:0,e=l.baby.BabyModel.instance.halos?l.baby.BabyModel.instance.halos.length:0,i=l.scene.SceneUtil.currScene;this.buffBtn.label=55===i?"BUFF×"+t.toString():"BUFF×"+(t+e).toString()},v.prototype.creatActivityBtn=function(t){if(!this._btnTab[t]){var e=new i.ActivityIconItem(t);this.addChild(e),this._btnTab[t]=e}},v.prototype.updateBlue=function(){this._blue.updateSelf()},v.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),this._tweenHp&&(this._tweenHp.stop(),this._tweenHp=null),this._tweenSideHp&&(this._tweenSideHp.stop(),this._tweenSideHp=null),e.prototype.destroy.call(this,t)},_=v,i.LeftTopPanel=_}(modules=modules||{}),function(t){var e,i,n;function s(){this._tab2={},this._tasks=[],this._currLev=101}e=t.exercise||(t.exercise={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"currLev",{get:function(){return this._currLev},enumerable:!0,configurable:!0}),s.prototype.setDotDis=function(){if(1!==this._tab2[3]){for(var t=0,e=this._tasks.length;t<e;t++)if(1===this._tasks[t][1])return void i.instance.setRPProperty("exerciseRP",!0);i.instance.setRPProperty("exerciseRP",!1)}else i.instance.setRPProperty("exerciseRP",!0)},s.prototype.saveData=function(t){this._tab2={},this._tasks.length=0,this._tab2[1]=t[1],this._tab2[2]=t[2],this._tab2[3]=t[3],this._tab2[4]=t[4],this._tab2[5]=t[5],this._tab2[6]=t[6],this._tasks=t[0],this._tasks=this._tasks.sort(this.sortFunc.bind(this)),this._tab2[4]>this._currLev&&(GlobalData.dispatcher.event("LILIAN_UPGRADE"),this._currLev=this._tab2[4]),GlobalData.dispatcher.event("LILIAN_UPDATA"),this.setDotDis()},s.prototype.saveTaskData=function(t){var e=t[0];this.searchTaskElement(e),GlobalData.dispatcher.event("LILIAN_UPDATA_TASK_LIST"),this.setDotDis()},s.prototype.searchTaskElement=function(t){for(var e=t[0],i=0,n=this._tasks.length;i<n;i++)if(this._tasks[i][0]==e)return this._tasks[i]=t,void(this._tasks=this._tasks.sort(this.sortFunc.bind(this)));this._tasks.push(t),this._tasks=this._tasks.sort(this.sortFunc.bind(this))},s.prototype.getOtherValue=function(t){return this._tab2[t]},Object.defineProperty(s.prototype,"tasks",{get:function(){return this._tasks},enumerable:!0,configurable:!0}),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1];return s==o?i-n:1==s?-1:1==o?1:0==s?-1:0==o?1:i-n},n=s,e.ExerciseModel=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("scene_copy_tianguan")},n.prototype.getCfgByLv=function(t){return GlobalData.searchByIndex1(this._table,t)},n.prototype.getSpeCfgByLv=function(t){for(var e=t,i=this._table[0].length+1;e<i;++e){var n=GlobalData.searchByIndex1(this._table,e);if(n&&n[4]&&n[4].length)return n}return null},i=n,e.SceneCopyTianguanCfg=i}(modules=modules||{}),function(s){var t,e;function i(){this._customDataTable={}}t=s.customData||(s.customData={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"customDatas",{set:function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e][0];switch(this._customDataTable[n]=t[e][1],n){case 2:GlobalData.dispatcher.event("THREE_WORLDS_ZHIZUN_UPDATE");break;case 36:GlobalData.dispatcher.event("TRAHMAN_BOSS_ZHIZUN_UPDATE");break;case 1:GlobalData.dispatcher.event("MULTI_BOSS_ZHIZUN_UPDATE");break;case 0:GlobalData.dispatcher.event("BOSS_HOME_ZHIZUN_UPDATE");break;case 3:GlobalData.dispatcher.event("FESTIVAL_HINT_UPDATE");break;case 4:GlobalData.dispatcher.event("MTJS_FIRST_ENTER");break;case 5:GlobalData.dispatcher.event("FESTIVAL_HINT_UPDATE");break;case 7:GlobalData.dispatcher.event("DOG_FESTIVAL_HINT_UPDATE");break;case 6:GlobalData.dispatcher.event("HALLOWEEN_HINT_UPDATE");break;case 9:GlobalData.dispatcher.event("MORI_HINT_UPDATE");break;case 13:GlobalData.dispatcher.event("DRAGONBLESSING_HINT_UPDATE");break;case 8:GlobalData.dispatcher.event("GANEN_HINT_UPDATE");break;case 10:GlobalData.dispatcher.event("NEWYEAR_FESTIVAL_HINT_UPDATE");break;case 12:case 17:case 19:case 21:case 25:case 29:case 31:GlobalData.dispatcher.event("ZHIZHEN_FESTIVAL_HINT_UPDATE");break;case 34:case 38:case 41:case 46:GlobalData.dispatcher.event("PERFECTESTTEN_FESTIVAL_HINT_UPDATE");break;case 11:GlobalData.dispatcher.event("LANTEM_FESTIVAL_HINT_UPDATE");break;case 14:GlobalData.dispatcher.event("WOMENSDAY_FESTIVAL_HINT_UPDATE");break;case 20:GlobalData.dispatcher.event("MOTHERS_DAY_FESTIVAL_HINT_UPDATE");break;case 23:case 24:case 30:case 37:case 40:case 43:GlobalData.dispatcher.event("BAR_DAY_FESTIVAL_HINT_UPDATE");break;case 47:GlobalData.dispatcher.event("SPRING_SCENERY_FESTIVAL_HINT_UPDATE");break;case 15:GlobalData.dispatcher.event("ARENA_QUICK_UPDATE");break;case 16:GlobalData.dispatcher.event("ARBORDAY_FESTIVAL_HINT_UPDATE");break;case 18:GlobalData.dispatcher.event("PUBLIC_SURVEY_FESTIVAL_HINT_UPDATE");break;case 22:GlobalData.setNoEff(!!t[e][1][0]);break;case 26:s.baby.BabyCtrl.instance.updateSkillNotice();break;case 27:s.nine.NineModel.instance.autoAtt=t[e][1][0];break;case 44:GlobalData.dispatcher.event("ONE_CLICK_TICK_EXCHANGE_HINT");break;case 39:s.hudie_platform.HudiePlatformCtrl.instance.dlogCnt=t[e][1][0]||0;break;case 35:GlobalData.setNoOwnEff(!!t[e][1][0]);break;case 42:GlobalData.dispatcher.event("HALO_INFO_UPDATE")}}},enumerable:!0,configurable:!0}),i.prototype.getCustomDataByKey=function(t){return this._customDataTable[t]||[]},e=i,t.CustomDataModel=e}(modules=modules||{}),function(t){var e,i,n,s;function o(){this.flag=!1,this._lookState=0,this.numType=1}e=t.super_vip||(t.super_vip={}),i=t.funcOpen.FuncOpenModel,n=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.pushData=function(t){t&&(this._datas=t,this._dayRecharge=t[0],this._monthRecharge=t[1],this._serviceQQ=t[2],this._serviceHeadIcon=t[3],this._activeCond=t[5],this._lookState=t[4],this.numType=1,this._serviceWX=t[7],this.setRP(),GlobalData.dispatcher.event("SUPER_VIP_UPDATA"))},o.prototype.updataData=function(t){t&&(this._serviceQQ=t[0],this._serviceHeadIcon=t[1],this._activeCond=t[2],this.numType=1,this._serviceWX=t[4],this.setRP(),GlobalData.dispatcher.event("SUPER_VIP_UPDATA"))},o.prototype.setRP=function(){this.setFuncOpen();var t=1==this.getState(),e=i.instance.getFuncIsOpen(319);n.instance.setRPProperty("superVipRP",t&&e)},o.prototype.getState=function(){return this._lookState||0},Object.defineProperty(o.prototype,"dayRecharge",{get:function(){return this._dayRecharge},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"monthRecharge",{get:function(){return this._monthRecharge},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"serviceNum",{get:function(){return this._serviceQQ.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"serviceHeadIcon",{get:function(){return this._serviceHeadIcon},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"activeCond",{get:function(){return this._activeCond},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"datas",{get:function(){return this._datas},enumerable:!0,configurable:!0}),o.prototype.setFuncOpen=function(){if(this.datas){var t=i.instance.getFuncIsOpen(319),e=1<this.activeCond.length&&t&&this.serviceNum&&this.serviceHeadIcon?1:2;i.instance.setActionOpen(319,e)}},o.prototype.setState=function(t){this._lookState=t,this.setRP(),GlobalData.dispatcher.event("SUPER_VIP_UPDATA")},o.prototype.getTypeByStr=function(){return 2===PlatParams.control.changeSvipQQTxt?"微信":"QQ"},s=o,e.SuperVipModel=s}(modules=modules||{}),function(t){var e,i,n;function s(){}e=t.common||(t.common={}),i=Laya.EventDispatcher,s.loadConfiguration=function(t){this.configStatus=t?1:-1,this.configDataSize=t?t.byteLength:0,this.config=msgpack.decode(new Uint8Array(t)),this._parsedTab={}},s.getConfig=function(t){return this.config?(this._parsedTab[t]||(this.config[t]=msgpack.decode(this.config[t]),this._parsedTab[t]=!0),this.config[t]):null},Object.defineProperty(s,"serverTime",{get:function(){return Browser.now()-this.localTime+this._serverTime},set:function(t){this._serverTime=t},enumerable:!0,configurable:!0}),s.getWindowConfigByFuncId=function(t){return 0===t?null:this.funcTable[t]},s.setNoEff=function(t){this.noEff!==t&&(this.noEff=t,s.dispatcher.event("NO_EFF"))},s.setNoOwnEff=function(t){this.noOwnEff!==t&&(this.noOwnEff=t,s.dispatcher.event("NO_OWN_EFF"))},s.getNoEff=function(t){if(!t)return!1;if(4==t.get("type")&&s.noOwnEff)return!0;if(4!=t.get("type")){if(t.get("syncNoEffect"))return!0;if(s.noEff)return!0}return!1},s.recordError=function(t,e){var i=["user: "+this.user,"webgl: "+this.isContextLost+", "+this.isContaxtRestored+", "+this.lostMessage,"config: "+this.configStatus+", "+this.configDataSize+", "+typeof this.config,"wrods: "+this.wordsStatus,"start: "+this.startTime,"time: "+(Date.now()-this.startTime),"map: "+MapUtils.currentID,"error: "+t,"stack: "+(e&&e.stack||e)].join("\n");console.log(i),reqRecordError(i)},s.getUint32FromUint8Arr=function(t,e){return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)},s.searchByIndex1=function(t,e){var i=ArrayUtils.binarySearch(t[0],function(t){return e-t});if(i<0)return null;i*=4;var n=this.getUint32FromUint8Arr(t[1],i);return(i+=4)>=t[1].length?msgpack.decode(new Uint8Array(t[2].buffer,n)):msgpack.decode(new Uint8Array(t[2].buffer,n,this.getUint32FromUint8Arr(t[1],i)-n))},s.searchByIndex2=function(t,i,n){var s=t[1],e=ArrayUtils.binarySearch(t[0],function(t,e){return i==t?n-s[e]:i-t});if(e<0)return null;e*=4;var o=this.getUint32FromUint8Arr(t[2],e);return(e+=4)>=t[2].length?msgpack.decode(new Uint8Array(t[3].buffer,o)):msgpack.decode(new Uint8Array(t[3].buffer,o,this.getUint32FromUint8Arr(t[2],e)-o))},s.searchByIndex3=function(t,i,n,s){var o=t[1],a=t[2],e=ArrayUtils.binarySearch(t[0],function(t,e){return i==t?n==o[e]?s-a[e]:n-o[e]:i-t});if(e<0)return null;e*=4;var r=this.getUint32FromUint8Arr(t[3],e);return(e+=4)>=t[3].length?msgpack.decode(new Uint8Array(t[4].buffer,r)):msgpack.decode(new Uint8Array(t[4].buffer,r,this.getUint32FromUint8Arr(t[3],e)-r))},s.extractTuple=function(t,e,i){if(e.length<=t)return null;t*=4;var n=this.getUint32FromUint8Arr(e,t);return(t+=4)>=e.length?msgpack.decode(new Uint8Array(i.buffer,n)):msgpack.decode(new Uint8Array(i.buffer,n,this.getUint32FromUint8Arr(e,t)-n))},s.getTupleAt1=function(t,e){return s.extractTuple(e,t[1],t[2])},s.getTupleAt2=function(t,e){return s.extractTuple(e,t[2],t[3])},s.getTupleAt3=function(t,e){return s.extractTuple(e,t[3],t[4])},s.dispatcher=new i,s.isContextLost=!1,s.isContaxtRestored=!1,s.configStatus=0,s.configDataSize=0,s.wordsStatus=0,s.startTime=0,s.lastAllocSize=0,s.localTime=0,s._serverTime=0,s.timeZoneOffset=6e4*(new Date).getTimezoneOffset(),s.dayPayEffState=!0,s.noMoreNoticeArr=[],s.effState={},s.noEff=!1,s.noOwnEff=!1,s.syncMaxPlayer=20,n=s,e.GlobalData=n}(modules=modules||{}),function(o){var t,e,n,s,i,a,r,l,h,c,p,u,d,m,f,g,y,_,v;function I(){return null!==e&&e.apply(this,arguments)||this}t=o.main||(o.main={}),n=o.common.GlobalData,s=o.notice.SystemNoticeManager,i=ui.LeftBottomViewUI,a=o.common.ProgressBarCtrl,r=o.config.SceneCopyTianguanCfg,l=o.funcOpen.FuncOpenModel,h=o.config.FirstPayCfg,c=o.player.PlayerModel,p=o.config.BlendCfg,u=o.common.AvatarClip,d=o.config.ExteriorCfg,m=o.common.CustomClip,f=Laya.Point,g=o.common.CommonUtil,y=o.bottomTab.BottomTabCtrl,_=o.guide.GuideModel,e=i,__extends(I,e),I.prototype.initialize=function(){e.prototype.initialize.call(this),this.initPopout_y(),this._playerId=c.instance.actorId,localStorage.getItem(this._playerId+"_count")||localStorage.setItem(this._playerId+"_count","0"),this.left=0,this.bottom=206,this.layer=3,this.closeByOthers=!1,this.splitImg1.visible=this.splitImg2.visible=!1,this._proCtrl=new a(this.proBar,98),this.rewardShowItem&&this.rewardShowItem.setDataFun([1,.8,.7,1,"assets/icon/ui/heaven_season/"]),this.showFirtMould(),this._modelClip1=u.create(1024,1024,1024),this.moTongJiangShiShowImg.addChild(this._modelClip1),this._modelClip1.anchorX=this._modelClip1.anchorY=.5,this._modelClip1.pos(180,140,!0),this._modelClip2=u.create(1024,1024,1024),this.dragonShowBtn.addChild(this._modelClip2),this._modelClip3=u.create(1024,1024,1024),this.fightBtn.addChild(this._modelClip3),this._modelClip4=u.create(1024,1024,1024),this.sealDeityShowImg.addChild(this._modelClip4),this._modelClip4.anchorX=this._modelClip4.anchorY=.5,this._modelClip4.pos(180,80,!0),this._modelClip5=u.create(1024,1024,1024),this.sealDeityShowImg.addChild(this._modelClip5),this._modelClip5.anchorX=this._modelClip5.anchorY=.5,this._modelClip5.pos(70,280,!0),this.initializeClip(),this._firstPayBtnClip=m.create("assets/effect/scbaoxiang.atlas","scbaoxiang",12),this.firstPayBtn.addChild(this._firstPayBtnClip),this._firstPayBtnClip.visible=!1,this._MaxCurLvNoOpenWin=p.instance.getCfgById(32001)[1][0],this._missionShowLv=p.instance.getCfgById(32002)[1][0],this._delay1=p.instance.getCfgById(63301)[1][0],this._delay2=p.instance.getCfgById(63301)[1][1],this.mtjsPowerClip.value=p.instance.getCfgById(63301)[1][2].toString(),this._delay3=p.instance.getCfgById(72001)[1][0],this._delay4=p.instance.getCfgById(72001)[1][1],this.dragonClip.value=p.instance.getCfgById(72001)[1][2].toString();var t=p.instance.getCfgById(97514)[1];this._delay5=t[0],this._delay6=t[1],this.fightBuyValue.value=t[2].toString(),this._delay7=p.instance.getCfgById(98213)[1][0],this._delay8=p.instance.getCfgById(98213)[1][1],this.sealDeityPowerClip.value=p.instance.getCfgById(98213)[1][2].toString(),this.summerDayFirstItem=new o.main.LeftBottomItem("left_bottom/btn_first_pay.png",769,["grainFullFirstPayRP"]),this.summerDayFirstItem.setFun(Handler.create(this,this.summerDayFirstItemHandler,[],!1),null),this.hideBox.addChild(this.summerDayFirstItem),this.summerDayItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_qlyx.png",763,["grainFullXunBaoRP","grainFullDayContinuousPayRP","grainFullsinglePayRP","grainFullStoreRP","grainFull4RP","grainFullFestConLoginRP","grainFullHilarityRP"]),this.summerDayItem.setFun(Handler.create(this,this.summerDayItemHandler,[],!1),null),this.hideBox.addChild(this.summerDayItem),this.spaceTravelFirstItem=new o.main.LeftBottomItem("left_bottom/btn_first_pay.png",932,["spaceTravelFirstPayRP"]),this.spaceTravelFirstItem.setFun(Handler.create(this,this.spaceTravelFirstItemHandler,[],!1),null),this.hideBox.addChild(this.spaceTravelFirstItem),this.spaceTravelItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_tkzl.png",926,["spaceTravelXunBaoRP","spaceTravelDayContinuousPayRP","spaceTravelsinglePayRP","spaceTravelStoreRP","spaceTravel4RP","spaceTravelFestConLoginRP","spaceTravelHilarityRP"]),this.spaceTravelItem.setFun(Handler.create(this,this.spaceTravelItemHandler,[],!1),null),this.hideBox.addChild(this.spaceTravelItem),this.barDayFirstItem=new o.main.LeftBottomItem("left_bottom/btn_first_pay.png",828,["barDayFestFirstPayRP"]),this.barDayFirstItem.setFun(Handler.create(this,this.barDayFirstItemHandler,[],!1),null),this.hideBox.addChild(this.barDayFirstItem),this.barDayItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_ssxz.png",817,["barDay2RP","barDay1RP","barDayConvertRP","barDay4RP","barDayFestConLoginRP"]),this.barDayItem.setFun(Handler.create(this,this.barDayItemHandler,[],!1),null),this.hideBox.addChild(this.barDayItem),this.barDayItem1=new o.main.LeftBottomItem("left_bottom/btn_mainui_xbzz.png",818,["barDayParty1RP","barDayParty2RP","barDayStoreRP","barDay6RP","barDayParty4RP","barDayParty3RP"]),this.barDayItem1.setFun(Handler.create(this,this.barDayItem1Handler,[],!1),null),this.hideBox.addChild(this.barDayItem1),this.barDayItem2=new o.main.LeftBottomItem("left_bottom/btn_mainui_xypd.png",836,["barPartyRP"]),this.barDayItem2.setFun(Handler.create(this,this.barDayItem2Handler,[],!1),null),this.hideBox.addChild(this.barDayItem2),this.springSceneryFirstItem=new o.main.LeftBottomItem("left_bottom/btn_first_pay.png",1043,["springSceneryFestFirstPayRP"]),this.springSceneryFirstItem.setFun(Handler.create(this,this.springSceneryFirstItemHandler,[],!1),null),this.hideBox.addChild(this.springSceneryFirstItem),this.springSceneryItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_lycs.png",1032,["springScenery2RP","springScenery1RP","springSceneryConvertRP","springScenery4RP","springSceneryFestConLoginRP"]),this.springSceneryItem.setFun(Handler.create(this,this.springSceneryItemHandler,[],!1),null),this.hideBox.addChild(this.springSceneryItem),this.springSceneryItem1=new o.main.LeftBottomItem("left_bottom/btn_mainui_lyys.png",1033,["springSceneryParty1RP","springSceneryParty2RP","springSceneryStoreRP","springScenery6RP","springSceneryParty4RP","springSceneryParty3RP"]),this.springSceneryItem1.setFun(Handler.create(this,this.springSceneryItem1Handler,[],!1),null),this.hideBox.addChild(this.springSceneryItem1),this.zhiZhenFirstItem=new o.main.LeftBottomItem("left_bottom/btn_first_pay.png",389,["zhiZhenFirstPayRP"]),this.zhiZhenFirstItem.setFun(Handler.create(this,this.zhiZhenFirstItemHandler,[],!1),null),this.hideBox.addChild(this.zhiZhenFirstItem),this.zhiZhenItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_zzqy.png",401,["zhiZhenConvertRP","zhiZhenConvert1RP","zhiZhen3RP","zhiZhen2RP","zhiZhen1RP","zhiZhenFestConLoginRP"]),this.zhiZhenItem.setFun(Handler.create(this,this.zhiZhenItemHandler,[],!1),null),this.hideBox.addChild(this.zhiZhenItem),this.zhiZhenItem1=new o.main.LeftBottomItem("left_bottom/btn_mainui_lzsh.png",402,["zhiZhenParty4RP"]),this.zhiZhenItem1.setFun(Handler.create(this,this.zhiZhenItem1Handler,[],!1),null),this.hideBox.addChild(this.zhiZhenItem1),this.zhiZhenItem2=new o.main.LeftBottomItem("left_bottom/btn_mainui_ddpd.png",762,["familyPartyRP"]),this.zhiZhenItem2.setFun(Handler.create(this,this.zhiZhenItem2Handler,[],!1),null),this.hideBox.addChild(this.zhiZhenItem2),this.zhiZhenItem3=new o.main.LeftBottomItem("left_bottom/btn_smsc.png",701,["mysteriousStoreRP"]),this.zhiZhenItem3.setFun(Handler.create(this,this.zhiZhenItem3Handler,[],!1),null),this.hideBox.addChild(this.zhiZhenItem3),this.perfectestTenFirstItem=new o.main.LeftBottomItem("left_bottom/btn_first_pay.png",951,["perfectestTenFirstPayRP"]),this.perfectestTenFirstItem.setFun(Handler.create(this,this.perfectestTenFirstItemHandler,[],!1),null),this.hideBox.addChild(this.perfectestTenFirstItem),this.perfectestTenItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_wskh.png",947,["perfectestTenConvert1RP","perfectestTen3RP","perfectestTen2RP","perfectestTen1RP","perfectestTenFestConLoginRP"]),this.perfectestTenItem.setFun(Handler.create(this,this.perfectestTenItemHandler,[],!1),null),this.hideBox.addChild(this.perfectestTenItem),this.perfectestTenItem1=new o.main.LeftBottomItem("left_bottom/btn_mainui_gljg.png",948,["perfectestTenParty4RP"]),this.perfectestTenItem1.setFun(Handler.create(this,this.perfectestTenItem1Handler,[],!1),null),this.hideBox.addChild(this.perfectestTenItem1),this.childrensDayFirstItem=new o.main.LeftBottomItem("left_bottom/btn_first_pay.png",804,["childrensDayFestFirstPayRP"]),this.childrensDayFirstItem.setFun(Handler.create(this,this.childrensDayFirstItemHandler,[],!1),null),this.hideBox.addChild(this.childrensDayFirstItem),this.childrensDayItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_dszy.png",787,["childrensDay7RP","childrensDay2RP","childrensDay1RP","childrensDay5RP","childrensDay4RP","childrensDayFestConLoginRP","childrensDayFestHilarityRP","childrensDayFestDoubleRewardRP"]),this.childrensDayItem.setFun(Handler.create(this,this.childrensDayItemHandler,[],!1),null),this.hideBox.addChild(this.childrensDayItem),this.childrensDayItem1=new o.main.LeftBottomItem("left_bottom/btn_mainui_dswh.png",788,["childrensDayParty1RP","childrensDayParty2RP","childrensDayStoreRP","childrensDay6RP","childrensDayParty4RP","childrensDayParty3RP"]),this.childrensDayItem1.setFun(Handler.create(this,this.childrensDayItem1Handler,[],!1),null),this.hideBox.addChild(this.childrensDayItem1),this.childrensDayItem2=new o.main.LeftBottomItem("left_bottom/btn_mainui_qypd.png",815,["childrenPartyRP"]),this.childrensDayItem2.setFun(Handler.create(this,this.childrensDayItem2Handler,[],!1),null),this.hideBox.addChild(this.childrensDayItem2),this.childrensDayItem3=new o.main.LeftBottomItem("left_bottom/btn_mainui_dbdds.png",468,["hitEngineerRP","hitEngineerAwardRP","hitEngineerKillerRP"]),this.childrensDayItem3.setFun(Handler.create(this,this.childrensDayItem3Handler,[],!1),null),this.hideBox.addChild(this.childrensDayItem3),this.treasureLandItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_cbzd.png",681,["treasureLandRP","treasureLandBagRP","treasureLandTaskRP"]),this.treasureLandItem.setFun(Handler.create(this,this.treasureLandItemHandler,[],!1),null),this.hideBox.addChild(this.treasureLandItem),this.heQuFirstItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_hqsc.png",444,["heQuFestFirstPayRP"]),this.heQuFirstItem.setFun(Handler.create(this,this.heQuFirstItemHandler,[],!1),null),this.hideBox.addChild(this.heQuFirstItem),this.heQuItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_hqkh.png",438,["heQuOnlineXunBaoHappyRP","heQu2RP","heQu1RP","heQuFestHilarityRP"]),this.heQuItem.setFun(Handler.create(this,this.heQuItemHandler,[],!1),null),this.hideBox.addChild(this.heQuItem),this.heQuItem1=new o.main.LeftBottomItem("left_bottom/btn_mainui_hqyl.png",439,["heQuFestConLoginRP","heQuOnlineRewardRP","heQuFestDoubleRewardRP"]),this.heQuItem1.setFun(Handler.create(this,this.heQuItem1Handler,[],!1),null),this.hideBox.addChild(this.heQuItem1),this.heQuItem2=new o.main.LeftBottomItem("left_bottom/btn_mainui_syzf.png",814,["heQuParty1RP","heQuParty2RP","heQuStoreRP","heQuParty3RP","heQuParty4RP"]),this.heQuItem2.setFun(Handler.create(this,this.heQuItem2Handler,[],!1),null),this.hideBox.addChild(this.heQuItem2),this.heQuItem3=new o.main.LeftBottomItem("left_bottom/btn_mainui_hqpd.png",816,["hequPartyRP"]),this.heQuItem3.setFun(Handler.create(this,this.heQuItem3Handler,[],!1),null),this.hideBox.addChild(this.heQuItem3),this.yuanDanZaDanItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_xyzd.png",453,["zadanRP","zadanChangeRP","spaceTravelContinuousPayRP","grainFullContinuousPayRP","grainRainContinuousPayRP","zadanShopRP","zadanTaskRP"]),this.yuanDanZaDanItem.setFun(Handler.create(this,this.yuanDanZaDanItemHandler,[],!1),null),this.hideBox.addChild(this.yuanDanZaDanItem),this.bossFeastItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_bssy.png",676,["bossFeastRP","bossFeastAwardRP","bossFeastKillerRP"]),this.bossFeastItem.setFun(Handler.create(this,this.bossFeastItemHandler,[],!1),null),this.hideBox.addChild(this.bossFeastItem),this.thunderboltBuyItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_ltzn.png",677,["thunderboltBuyRP"]),this.thunderboltBuyItem.setFun(Handler.create(this,this.thunderboltBuyItemHandler,[],!1),Handler.create(this,this.thunderboltBuyItemIsShowHandler,[],!1)),this.hideBox.addChild(this.thunderboltBuyItem),this.anniversaryDayFirstItem=new o.main.LeftBottomItem("left_bottom/btn_first_pay.png",878,["anniversaryDayFestFirstPayRP"]),this.anniversaryDayFirstItem.setFun(Handler.create(this,this.anniversaryDayFirstItemHandler,[],!1),null),this.hideBox.addChild(this.anniversaryDayFirstItem),this.anniversaryDayItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_znsd.png",861,["anniversaryDay7RP","anniversaryDay2RP","anniversaryDay1RP","anniversaryDay5RP","anniversaryDay4RP","anniversaryDayFestConLoginRP","anniversaryDayFestHilarityRP","anniversaryDayFestDoubleRewardRP"]),this.anniversaryDayItem.setFun(Handler.create(this,this.anniversaryDayItemHandler,[],!1),null),this.hideBox.addChild(this.anniversaryDayItem),this.anniversaryDayItem1=new o.main.LeftBottomItem("left_bottom/btn_mainui_ylxb.png",862,["anniversaryDayParty1RP","anniversaryDayParty2RP","anniversaryDayStoreRP","anniversaryDay6RP","anniversaryDayParty4RP","anniversaryDayParty3RP"]),this.anniversaryDayItem1.setFun(Handler.create(this,this.anniversaryDayItem1Handler,[],!1),null),this.hideBox.addChild(this.anniversaryDayItem1),this.anniversaryDayItem2=new o.main.LeftBottomItem("left_bottom/btn_mainui_sdkhcp.png",1020,["christmas2020Party5RP","anniversaryDay1RP","anniversaryDay5RP","anniversaryDay4RP"]),this.anniversaryDayItem2.setFun(Handler.create(this,this.anniversaryDayItem2Handler,[],!1),null),this.hideBox.addChild(this.anniversaryDayItem2),this.birthdaycakeItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_xqpd.png",925,["midAutumuPartyRP"]),this.birthdaycakeItem.setFun(Handler.create(this,this.birthdaycakeItemHandler,[],!1),null),this.hideBox.addChild(this.birthdaycakeItem),this.ruinsItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_yjtm.png",895,["ruinsRP","ruinsTaskRP","ruinsTaskRP1"]),this.ruinsItem.setFun(Handler.create(this,this.ruinsItemHandler,[],!1),null),this.hideBox.addChild(this.ruinsItem),this.doubleNinePartyItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_dgpd.png",946,["douybleNinePartyRP"]),this.doubleNinePartyItem.setFun(Handler.create(this,this.doubleNinePartyItemHandler,[],!1),null),this.hideBox.addChild(this.doubleNinePartyItem),this.nianEndOneBuyItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_nzms.png",1011,["nianEndOneBuyRP"]),this.nianEndOneBuyItem.setFun(Handler.create(this,this.nianEndOneBuyItemHandler,[],!1),null),this.hideBox.addChild(this.nianEndOneBuyItem),this.nianEndRankItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_nzkh.png",1016,["nianEndRankRP","nianEndRewardPreviewRP","nianEndaccPayRP","nianEndDailylogRP"]),this.nianEndRankItem.setFun(Handler.create(this,this.nianEndRankItemHandler,[],!1),null),this.hideBox.addChild(this.nianEndRankItem),this.nianEndPartyItem=new o.main.LeftBottomItem("left_bottom/btn_mainui_nzpd.png",1017,["endNianPartyRP"]),this.nianEndPartyItem.setFun(Handler.create(this,this.nianEndPartyItemHandler,[],!1),null),this.hideBox.addChild(this.nianEndPartyItem),this.hideBox.addChild(this.sendQCoinsItem),this.hideBox.addChild(this.tianshuBuyBox),this.hideBox.addChild(this.fantianBuyBox),this.hideBox.addChild(this.moTongJiangShiBox),this.hideBox.addChild(this.sealDeityBox),this.hideBox.addChild(this.dragonBox),this.hideBox.addChild(this.fightSoulPayShowItem),this.vipBuyShowItem.btn.skin="left_bottom/btn_mainui_svipms.png",this.payRankShowItem.btn.skin="left_bottom/btn_mainui_xfph.png",this.singlePayPrintShowItem.btn.skin="left_bottom/btn_mainui_syfl.png",this.glovesShowItem.btn.skin="left_bottom/btn_mainui_wxst.png",this.moneyCatShowItem.btn.skin="left_bottom/btn_mainui_zcxm.png",this.fightTalismanShowItem.btn.skin="left_bottom/btn_mainui_zlff.png",this.oneBuyShowItem.btn.skin="left_bottom/btn_mainui_yyms.png",this.purchaseShowItem.btn.skin="left_bottom/btn_mainui_yyqg.png",this.fightSoulPayShowbtn.btn.skin="left_bottom/btn_mainui_zhft.png",this.fantianBtn.btn.skin="left_bottom/btn_mainui_ftjs.png",this.tianshuBuyBtn.btn.skin="left_bottom/btn_mainui_tsjs.png",this.sendQCoinsItem.btn.skin="left_bottom/btn_sqb.png",this.purchaseShowItem.box1.visible=!0},I.prototype.summerDayFirstItemHandler=function(){WindowManager.instance.open(1151)},I.prototype.summerDayItemHandler=function(){y.instance.openTabByFunc(763)},I.prototype.spaceTravelFirstItemHandler=function(){WindowManager.instance.open(1401)},I.prototype.spaceTravelItemHandler=function(){y.instance.openTabByFunc(926)},I.prototype.thunderboltBuyItemIsShowHandler=function(){var t=!1;return o.thunderbolt_buy.ThunderboltBuyCtrlModel.instance.dates&&(t=0!=o.thunderbolt_buy.ThunderboltBuyCtrlModel.instance.dates[2]),t},I.prototype.thunderboltBuyItemHandler=function(){WindowManager.instance.open(1020)},I.prototype.barDayFirstItemHandler=function(){WindowManager.instance.open(1240)},I.prototype.barDayItemHandler=function(){y.instance.openTabByFunc(817)},I.prototype.barDayItem1Handler=function(){y.instance.openTabByFunc(818)},I.prototype.barDayItem2Handler=function(){WindowManager.instance.open(1255)},I.prototype.springSceneryFirstItemHandler=function(){WindowManager.instance.open(1551)},I.prototype.springSceneryItemHandler=function(){y.instance.openTabByFunc(1032)},I.prototype.springSceneryItem1Handler=function(){y.instance.openTabByFunc(1033)},I.prototype.zhiZhenItemHandler=function(){y.instance.openTabByFunc(401)},I.prototype.zhiZhenItem1Handler=function(){y.instance.openTabByFunc(402)},I.prototype.zhiZhenFirstItemHandler=function(){WindowManager.instance.open(652)},I.prototype.zhiZhenItem2Handler=function(){WindowManager.instance.open(1139)},I.prototype.zhiZhenItem3Handler=function(){WindowManager.instance.open(990)},I.prototype.perfectestTenItemHandler=function(){y.instance.openTabByFunc(947)},I.prototype.perfectestTenItem1Handler=function(){y.instance.openTabByFunc(948)},I.prototype.perfectestTenFirstItemHandler=function(){WindowManager.instance.open(1439)},I.prototype.perfectestTenItem2Handler=function(){WindowManager.instance.open(1139)},I.prototype.childrensDayFirstItemHandler=function(){WindowManager.instance.open(1208)},I.prototype.childrensDayItemHandler=function(){y.instance.openTabByFunc(787)},I.prototype.childrensDayItem1Handler=function(){y.instance.openTabByFunc(788)},I.prototype.childrensDayItem2Handler=function(){WindowManager.instance.open(1229)},I.prototype.childrensDayItem3Handler=function(){y.instance.openTabByFunc(468)},I.prototype.treasureLandItemHandler=function(){y.instance.openTabByFunc(681)},I.prototype.ruinsItemHandler=function(){y.instance.openTabByFunc(895)},I.prototype.heQuFirstItemHandler=function(){WindowManager.instance.open(709)},I.prototype.heQuItemHandler=function(){y.instance.openTabByFunc(438)},I.prototype.heQuItem1Handler=function(){y.instance.openTabByFunc(439)},I.prototype.heQuItem2Handler=function(){y.instance.openTabByFunc(814)},I.prototype.heQuItem3Handler=function(){WindowManager.instance.open(1231)},I.prototype.yuanDanZaDanItemHandler=function(){y.instance.openTabByFunc(453)},I.prototype.bossFeastItemHandler=function(){y.instance.openTabByFunc(676)},I.prototype.anniversaryDayFirstItemHandler=function(){WindowManager.instance.open(1317)},I.prototype.anniversaryDayItemHandler=function(){y.instance.openTabByFunc(861)},I.prototype.anniversaryDayItem1Handler=function(){y.instance.openTabByFunc(862)},I.prototype.anniversaryDayItem2Handler=function(){y.instance.openTabByFunc(1020)},I.prototype.birthdaycakeItemHandler=function(){WindowManager.instance.open(1390)},I.prototype.doubleNinePartyItemHandler=function(){WindowManager.instance.open(1426)},I.prototype.sendQCoinsItemHanlder=function(){this._sendQiconsEff=this.destroyElement(this._sendQiconsEff),WindowManager.instance.open(1499)},I.prototype.nianEndRankItemHandler=function(){y.instance.openTabByFunc(1016)},I.prototype.nianEndPartyItemHandler=function(){WindowManager.instance.open(1523)},I.prototype.nianEndOneBuyItemHandler=function(){WindowManager.instance.open(1516)},I.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.hideBox.visible=!t.LeftBottomModel.instance.hideBox,this.hideBox.visible?_.instance.registeUI(1,this.panelBtn):_.instance.removeUI(1),this._firstPayCfg=h.instance.getCfgById(1),this._timeStage=this._firstPayCfg[8],this._showDuration=this._firstPayCfg[7],this._jianCeDuration=this._firstPayCfg[6],this.missionRP.removeSelf(),this.updateLv(),this.updateWare(),this.updateAuto(),this.showFirstPayBtn(),this.showDayPayBtn(),this.TipShow(),this.left=-228,this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({left:0},CommonConfig.panelTweenDuration).onComplete(function(){n.dispatcher.event("ACTION_PREVIEW_RESIZE_UI")}).start(),this.showoffAutoBtnAndOnAutoBtn(),this.setActionPreviewPos(),this.isShowOnlineRewardEnter(),this.moneyCatIcon(),this.fightTalismanIcon(),this.updateGlovesInfo(),this.oneBuyShowIcon(),this.vipBuyShowIcon(),this.singlePayPrintShowIcon(),this.payRankShowIcon(),this.moTongJiangShiShowIcon(),this.sealDeityShowIcon(),this.dragonShowIcon(),this.purchaseShowIcon(),this.fightSoulPayShowIcon(),this.fantianBuyShowIcon(),this.tianshuBuyShowIcon(),this.sendQCoinsShowIcon(),this.directexBuyShowIcon(),this.summerDayFirstItem&&this.summerDayFirstItem.showIcon(),this.summerDayItem&&this.summerDayItem.showIcon(),this.spaceTravelFirstItem&&this.spaceTravelFirstItem.showIcon(),this.spaceTravelItem&&this.spaceTravelItem.showIcon(),this.barDayFirstItem&&this.barDayFirstItem.showIcon(),this.barDayItem&&this.barDayItem.showIcon(),this.barDayItem1&&this.barDayItem1.showIcon(),this.springSceneryFirstItem&&this.springSceneryFirstItem.showIcon(),this.springSceneryItem&&this.springSceneryItem.showIcon(),this.springSceneryItem1&&this.springSceneryItem1.showIcon(),this.zhiZhenFirstItem&&this.zhiZhenFirstItem.showIcon(),this.zhiZhenItem&&this.zhiZhenItem.showIcon(),this.zhiZhenItem1&&this.zhiZhenItem1.showIcon(),this.zhiZhenItem2&&this.zhiZhenItem2.showIcon(),this.zhiZhenItem3&&this.zhiZhenItem3.showIcon(),this.perfectestTenFirstItem&&this.perfectestTenFirstItem.showIcon(),this.perfectestTenItem&&this.perfectestTenItem.showIcon(),this.perfectestTenItem1&&this.perfectestTenItem1.showIcon(),this.childrensDayFirstItem&&this.childrensDayFirstItem.showIcon(),this.childrensDayItem&&this.childrensDayItem.showIcon(),this.childrensDayItem1&&this.childrensDayItem1.showIcon(),this.childrensDayItem2&&this.childrensDayItem2.showIcon(),this.childrensDayItem3&&this.childrensDayItem3.showIcon(),this.barDayItem2&&this.barDayItem2.showIcon(),this.treasureLandItem&&this.treasureLandItem.showIcon(),this.heQuFirstItem&&this.heQuFirstItem.showIcon(),this.heQuItem&&this.heQuItem.showIcon(),this.heQuItem1&&this.heQuItem1.showIcon(),this.heQuItem2&&this.heQuItem2.showIcon(),this.heQuItem3&&this.heQuItem3.showIcon(),this.yuanDanZaDanItem&&this.yuanDanZaDanItem.showIcon(),this.bossFeastItem&&this.bossFeastItem.showIcon(),this.thunderboltBuyItem&&this.thunderboltBuyItem.showIcon(),this.anniversaryDayFirstItem&&this.anniversaryDayFirstItem.showIcon(),this.anniversaryDayItem&&this.anniversaryDayItem.showIcon(),this.anniversaryDayItem1&&this.anniversaryDayItem1.showIcon(),this.anniversaryDayItem2&&this.anniversaryDayItem2.showIcon(),this.birthdaycakeItem&&this.birthdaycakeItem.showIcon(),this.ruinsItem&&this.ruinsItem.showIcon(),this.doubleNinePartyItem&&this.doubleNinePartyItem.showIcon(),this.nianEndOneBuyItem&&this.nianEndOneBuyItem.showIcon(),this.nianEndRankItem&&this.nianEndRankItem.showIcon(),this.nianEndPartyItem&&this.nianEndPartyItem.showIcon()},I.prototype.onEvt=function(){var t=this;e.prototype.onEvt.call(this),this.onAutoClick(this.onAutoBtn,this,this.autoHandler),this.onAutoClick(this.offAutoBtn,this,this.autoHandler),this.onAutoClick(this.panelBtn,this,this.panelHandler),this.onAutoClick(this.firstPayBtn,this,this.firstPayBtnHandler),this.onAutoClick(this.firstPayTipImg,this,this.firstPayBtnHandler1),this.onAutoClick(this.colseFirstPayTipImg,this,this.firstPayBtnHandler2),this.onAutoClick(this.closeMoTongJiangShiShowImg,this,this.closeMoTongJiangShiShowHandler),this.onAutoClick(this.closeSealDeityShowImg,this,this.closeSealDeityShowHandler),this.onAutoClick(this.closeDragonBtn,this,this.closeDragonBtnHandler),this.onAutoClick(this.moTongJiangShiShowImg,this,this.moTongJiangShiBtnHandler),this.onAutoClick(this.sealDeityShowImg,this,this.sealDeityBtnHandler),this.onAutoClick(this.dragonShowBtn,this,this.dragonShowBtnHandler),this.onAutoClick(this.dayPayBox,this,this.dayPayBtnHandler),this.onAutoClick(this.oneBuyShowItem,this,this.oneBuyShowItemHandler),this.onAutoClick(this.fightTalismanShowItem,this,this.fightTalismanShowItemHandler),this.onAutoClick(this.moneyCatShowItem,this,this.moneyCatShowItemHandler),this.onAutoClick(this.glovesShowItem,this,this.glovesClickHandler),this.onAutoClick(this.singlePayPrintShowItem,this,this.singlePayPrintHandler),this.onAutoClick(this.payRankShowItem,this,this.payRankHandler),this.onAutoClick(this.vipBuyShowItem,this,this.vipBuyBtnHandler),this.onAutoClick(this.purchaseShowItem,this,this.purchaseShowItemHandler),this.onAutoClick(this.moTongJiangShiBtn,this,this.moTongJiangShiBtnHandler),this.onAutoClick(this.sealDeityBtn,this,this.sealDeityBtnHandler),this.onAutoClick(this.dragonBtn,this,this.dragonShowBtnHandler),this.onAutoClick(this.thunderboltBuyItem,this,this.thunderboltBuyBtnHandler),this.onAutoClick(this.fightSoulPayShowbtn,this,this.fightSoulPayShowHandler),this.onAutoClick(this.fightBtn,this,this.fightSoulPayShowHandler),this.onAutoClick(this.fightClose,this,this.fightCloseHandler),this.onAutoClick(this.sendQCoinsItem,this,this.sendQCoinsItemHanlder),this.onAutoClick(this.tianshuBuyBtn,this,this.tianshuBuyBtnHandler),this.onAutoClick(this.fantianBtn,this,this.fantianBtnHandler),this.onAutoClick(this.directexBuyItem,this,this.directexBuyItemHanlder),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("UPDATE_ONLINE_REWARD_REPLY",this,this.isShowOnlineRewardEnter),this.onAutoGlobalEvt("PLAYER_BASE_ATTR_UPDATE",this,this.isShowOnlineRewardEnter),this.onAutoGlobalEvt("MISSION_UPDATE_LV",this,this.updateLv),this.onAutoGlobalEvt("MISSION_UPDATE_WARE",this,this.updateWare),this.onAutoGlobalEvt("MISSION_UPDATE_AUTO",this,this.updateAuto),this.onAutoGlobalEvt("FIRST_PAY_UPDATE",this,this.showFirstPayBtn),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funOpenGetSprintRankInfo),this.onAutoGlobalEvt("DAY_PAY_UPDATE",this,this.showDayPayBtn),this.onAutoGlobalEvt("MISSION_UPDATE_LV",this,this.showoffAutoBtnAndOnAutoBtn),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.fightTalismanIcon),this.onAutoGlobalEvt("FIRST_PAY_UPDATE",this,this.fightTalismanIcon),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.moneyCatIcon),this.onAutoGlobalEvt("FIRST_PAY_UPDATE",this,this.moneyCatIcon),this.onAutoGlobalEvt("ONEBUY_UPDATE",this,this.oneBuyShowIcon),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.oneBuyShowIcon),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.updateGlovesInfo),this.onAutoGlobalEvt("VIP_UPDATE",this,this.singlePayPrintShowIcon),this.onAutoGlobalEvt("VIP_BUY_UPDATE",this,this.vipBuyShowIcon),this.onAutoGlobalEvt("MTJS_SHOW_MODEL",this,this.closeShowModel),this.onAutoGlobalEvt("CLOSE_TIPS_SHOUCHONG",this,function(){t.firstPayTipImg.visible=!1,t.colseFirstPayTipImg.visible=!1,t.rewardShowItem.visible=!1}),this.regAutoRP(this.missionRP,["missionRP","lineClearOut"]),this.regAutoRP(this.firstPayRP,["firstPayRP"]),this.regAutoRP(this.daypayRP,["daypayRP"]),this.regAutoRP(this.fightTalismanShowItem.rpimg,["fightTalismanBuyRP"]),this.regAutoRP(this.moneyCatShowItem.rpimg,["moneyCatBuyRP"]),this.regAutoRP(this.oneBuyShowItem.rpimg,["oneBuyRP"]),this.regAutoRP(this.glovesShowItem.rpimg,["glovesBuyRP","glovesStoneBuyRP"]),this.regAutoRP(this.singlePayPrintShowItem.rpimg,["cumulatePayTianZhuRP"]),this.regAutoRP(this.payRankShowItem.rpimg,["payRankRP"]),this.regAutoRP(this.moTongJiangShiRP,["motongjiangshiRp1","motongjiangshiRp2","motongjiangshiRp3"]),this.regAutoRP(this.sealDeityRP,["sealDeityRp1","sealDeityRp2","sealDeityRp3"]),this.regAutoRP(this.vipBuyShowItem.rpimg,["vipBuyRP"]),this.regAutoRP(this.dragonRP,["dragonRP"]),this.regAutoRP(this.purchaseShowItem.rpimg,["purchaseRP"]),this.regAutoRP(this.fightSoulPayShowbtn.rpimg,["fightSoulBuyRP"]),this.regAutoRP(this.tianshuBuyBtn.rpimg,["skyBookBuyRP"]),this.regAutoRP(this.fantianBtn.rpimg,["brahmaBuyRP"]),this.regAutoRP(this.sendQCoinsItem.rpimg,["sendQCoinsRP"]),this.regAutoRP(this.directexBuyItem.rpimg,["directexRP"]),this.onAutoGlobalEvt("LEFT_BOTTON_UPDATE_UI",this,this.relayoutEnters),this.onAutoGlobalEvt("THUNDERBOLT_BUY_INFO_UPDATE",this,function(){t.thunderboltBuyItem&&t.thunderboltBuyItem.showIcon()})},I.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),Laya.timer.clear(this,this.firstPayTipImgTime),Laya.timer.clear(this,this.firstChaoGuo),Laya.timer.clear(this,this.chongZhi),e.prototype.offEvt.call(this)},I.prototype.showoffAutoBtnAndOnAutoBtn=function(){o.mission.MissionModel.instance.curLv<=this._MaxCurLvNoOpenWin?this.onAutoBtn.visible=this.offAutoBtn.visible=!1:(this.offAutoBtn.visible=o.mission.MissionModel.instance.auto,this.onAutoBtn.visible=!o.mission.MissionModel.instance.auto)},I.prototype.updataLV=function(){var t=h.instance.getCfgById(1)[13];c.instance.level>=t&&!o.scene.SceneModel.instance._isshouciLv&&(o.scene.SceneModel.instance._isshouciLv=!0,o.scene.SceneModel.instance._lastTime=n.serverTime-this._timeStage,this.TipShow())},I.prototype.funOpenGetSprintRankInfo=function(t){for(var e=0;e<t.length;e++){var i=t[e];51==i?l.instance.getFuncIsOpen(51)&&(this.showFirstPayBtn(),o.scene.SceneModel.instance._isshouci=!0,o.scene.SceneModel.instance._lastTime=n.serverTime-this._timeStage,this.TipShow()):8==i||5==i?this.isShowOnlineRewardEnter():111===i?this.showDayPayBtn():197===i?this.singlePayPrintShowIcon():213===i?this.payRankShowIcon():232===i?this.vipBuyShowIcon():251===i?this.moTongJiangShiShowIcon():286===i?this.dragonShowIcon():287===i?this.purchaseShowIcon():922===i?this.fightSoulPayShowIcon():966===i?this.tianshuBuyShowIcon():968===i?this.fantianBuyShowIcon():979==i?this.sealDeityShowIcon():828===i?this.barDayFirstItem&&this.barDayFirstItem.showIcon():817===i?this.barDayItem&&this.barDayItem.showIcon():818===i?this.barDayItem1&&this.barDayItem1.showIcon():1043===i?this.springSceneryFirstItem&&this.springSceneryFirstItem.showIcon():1032===i?this.springSceneryItem&&this.springSceneryItem.showIcon():1033===i?this.springSceneryItem1&&this.springSceneryItem1.showIcon():389===i?this.zhiZhenFirstItem&&this.zhiZhenFirstItem.showIcon():401===i?this.zhiZhenItem&&this.zhiZhenItem.showIcon():402===i?this.zhiZhenItem1&&this.zhiZhenItem1.showIcon():762===i?this.zhiZhenItem2&&this.zhiZhenItem2.showIcon():701===i?this.zhiZhenItem3&&this.zhiZhenItem3.showIcon():951===i?this.perfectestTenFirstItem&&this.perfectestTenFirstItem.showIcon():947===i?this.perfectestTenItem&&this.perfectestTenItem.showIcon():948===i?this.perfectestTenItem1&&this.perfectestTenItem1.showIcon():804===i?this.childrensDayFirstItem&&this.childrensDayFirstItem.showIcon():787===i?this.childrensDayItem&&this.childrensDayItem.showIcon():788===i?this.childrensDayItem1&&this.childrensDayItem1.showIcon():815==i?this.childrensDayItem2&&this.childrensDayItem2.showIcon():468===i?this.childrensDayItem3&&this.childrensDayItem3.showIcon():836==i?this.barDayItem2&&this.barDayItem2.showIcon():681===i?this.treasureLandItem&&this.treasureLandItem.showIcon():444===i?this.heQuFirstItem&&this.heQuFirstItem.showIcon():438===i?this.heQuItem&&this.heQuItem.showIcon():439===i?this.heQuItem1&&this.heQuItem1.showIcon():814===i?this.heQuItem2&&this.heQuItem2.showIcon():816==i?this.heQuItem3&&this.heQuItem3.showIcon():453===i?this.yuanDanZaDanItem&&this.yuanDanZaDanItem.showIcon():676===i?this.bossFeastItem&&this.bossFeastItem.showIcon():677===i?this.thunderboltBuyItem&&this.thunderboltBuyItem.showIcon():769===i?this.summerDayFirstItem&&this.summerDayFirstItem.showIcon():763===i?this.summerDayItem&&this.summerDayItem.showIcon():932===i?this.spaceTravelFirstItem&&this.spaceTravelFirstItem.showIcon():926===i?this.spaceTravelItem&&this.spaceTravelItem.showIcon():878===i?this.anniversaryDayFirstItem&&this.anniversaryDayFirstItem.showIcon():861===i?this.anniversaryDayItem&&this.anniversaryDayItem.showIcon():862===i?this.anniversaryDayItem1&&this.anniversaryDayItem1.showIcon():1020===i?this.anniversaryDayItem2&&this.anniversaryDayItem2.showIcon():925===i?this.birthdaycakeItem&&this.birthdaycakeItem.showIcon():895===i?this.ruinsItem&&this.ruinsItem.showIcon():946===i?this.doubleNinePartyItem&&this.doubleNinePartyItem.showIcon():989===i?this.sendQCoinsShowIcon():-1!=o.direct_ex.DirectExModel.instance.actionIds.indexOf(i)?this.directexBuyShowIcon():1011===i?this.nianEndOneBuyItem&&this.nianEndOneBuyItem.showIcon():1016===i?this.nianEndRankItem&&this.nianEndRankItem.showIcon():1017===i&&this.nianEndPartyItem&&this.nianEndPartyItem.showIcon()}},I.prototype.isShowOnlineRewardEnter=function(){return 4<=o.player.PlayerModel.instance.getDayNum()?(WindowManager.instance.close(261),void(this.onlineAwardShow=!1)):l.instance.getFuncIsOpen(8)?(this._OnlineEeterPanel?(this.hideBox.addChildAt(this._OnlineEeterPanel,0),this._OnlineEeterPanel.initializeQuickToReceive()):(this._OnlineEeterPanel=new o.main.OnlineEeterPanel,this.hideBox.addChildAt(this._OnlineEeterPanel,0)),void(this.onlineAwardShow=!0)):void this.closeOnlineEeterPanel()},I.prototype.firstPayBtnHandler=function(){this.firstPayTipImgVisble(!1),WindowManager.instance.open(118)},I.prototype.firstPayBtnHandler1=function(){this.firstPayTipImgVisble(!1),WindowManager.instance.open(118)},I.prototype.firstPayBtnHandler2=function(){this.firstPayTipImgVisble(!1)},I.prototype.closeMoTongJiangShiShowHandler=function(){this.moTongJiangShiShowVisble(!1)},I.prototype.closeDragonBtnHandler=function(){this.dragonShowVisble(!1)},I.prototype.closeSealDeityShowHandler=function(){this.sealDeityShowVisble(!1)},I.prototype.dayPayBtnHandler=function(){WindowManager.instance.open(145),this._dayPayEff&&(this._dayPayEff.visible=n.dayPayEffState=!1,this._dayPayEff.stop())},I.prototype.oneBuyShowItemHandler=function(){WindowManager.instance.open(372)},I.prototype.vipBuyBtnHandler=function(){WindowManager.instance.open(423)},I.prototype.moTongJiangShiBtnHandler=function(){this.moTongJiangShiShowVisble(!1),WindowManager.instance.open(424)},I.prototype.sealDeityBtnHandler=function(){this.sealDeityShowVisble(!1),WindowManager.instance.open(1482)},I.prototype.dragonShowBtnHandler=function(){this.dragonShowVisble(!1),WindowManager.instance.open(471)},I.prototype.purchaseShowItemHandler=function(){this._purchaseEff=this.destroyElement(this._purchaseEff),WindowManager.instance.open(472)},I.prototype.thunderboltBuyBtnHandler=function(){this._thunderboltBuyEff=this.destroyElement(this._thunderboltBuyEff),WindowManager.instance.open(1020)},I.prototype.fightSoulPayShowHandler=function(){this._fightSoulPayEff=this.destroyElement(this._fightSoulPayEff),WindowManager.instance.open(1388),this.fightShowBoxVisble(!1)},I.prototype.tianshuBuyBtnHandler=function(){this._tianshuBuyEff=this.destroyElement(this._tianshuBuyEff),WindowManager.instance.open(1456)},I.prototype.fantianBtnHandler=function(){this._fantianBuyEff=this.destroyElement(this._fantianBuyEff),WindowManager.instance.open(1458)},I.prototype.directexBuyItemHanlder=function(){var t=o.direct_ex.DirectExModel.instance.getFunOpenIds();this._directexEff=this.destroyElement(this._directexEff),WindowManager.instance.openByActionId(t)},I.prototype.fightCloseHandler=function(){this.fightShowBoxVisble(!1)},I.prototype.loopHandler=function(){this.timeText.text=""+g.timeStampToHMMSSMS(o.first_pay.FirstPayModel.instance.restTm),o.first_pay.FirstPayModel.instance.restTm<n.serverTime&&(this.countdownImg.visible=!1,this.hideBox.addChild(this.firstPayBox),Laya.timer.clear(this,this.loopHandler),this.relayoutEnters())},I.prototype.showFirstPayBtn=function(){l.instance.getFuncNeedShow(51)?(this.firstPayBox.visible=!(2==o.first_pay.FirstPayModel.instance.giveState),0<o.first_pay.FirstPayModel.instance.restTm?(this.countdownImg.visible=!0,this.loopHandler(),Laya.timer.frameLoop(2,this,this.loopHandler)):(this.countdownImg.visible=!1,this.hideBox.addChild(this.firstPayBox),Laya.timer.clear(this,this.loopHandler))):this.firstPayBox.visible=!1,this.firstPayBox.visible&&(this.setShowTipsBtnsZorder(this.firstPayBox),this.rewardShowItem&&this.rewardShowItem.setDataFun([1,.8,.7,1,"assets/icon/ui/heaven_season/"])),this.isShowFirstPayBtnClip(),this.setActionPreviewPos(),this.setPos()},I.prototype.setPos=function(){this.relayoutEnters()},I.prototype.isShowFirstPayBtnClip=function(){this.firstPayBox.visible?this._firstPayBtnClip&&(this._firstPayBtnClip.visible=!0,this._firstPayBtnClip.play()):this._firstPayBtnClip&&(this._firstPayBtnClip.visible=!1,this._firstPayBtnClip.stop())},I.prototype.TipShow=function(){if(Laya.timer.clear(this,this.firstPayTipImgTime),Laya.timer.clear(this,this.firstChaoGuo),Laya.timer.clear(this,this.chongZhi),this.firstPayTipImgVisble(!1),o.scene.SceneModel.instance._isshibai)o.scene.SceneModel.instance._isshibai=!1,0==o.first_pay.FirstPayModel.instance.giveState&&this.showFirstPayTipImg();else if(0==o.first_pay.FirstPayModel.instance.giveState)return n.serverTime-o.scene.SceneModel.instance._lastTime>this._timeStage?(o.scene.SceneModel.instance._lastTime=n.serverTime-this._timeStage,Laya.timer.loop(1e3,this,this.firstChaoGuo),void this.firstChaoGuo()):(Laya.timer.loop(1e3,this,this.firstPayTipImgTime),void this.firstPayTipImgTime())},I.prototype.firstChaoGuo=function(){n.serverTime-o.scene.SceneModel.instance._lastTime>=this._timeStage+this._jianCeDuration&&(Laya.timer.clear(this,this.firstChaoGuo),this.showFirstPayTipImg())},I.prototype.firstPayTipImgTime=function(){n.serverTime-o.scene.SceneModel.instance._lastTime>=this._timeStage&&(Laya.timer.clear(this,this.firstPayTipImgTime),this.showFirstPayTipImg())},I.prototype.showFirstPayTipImg=function(){var t=h.instance.getCfgById(1)[13];(c.instance.level>=t||o.scene.SceneModel.instance._isshouci)&&(this.firstPayTipImgVisble(!0),o.scene.SceneModel.instance._isshouci=!1),o.scene.SceneModel.instance._lastTime=n.serverTime,Laya.timer.once(this._showDuration,this,this.chongZhi)},I.prototype.chongZhi=function(){this.firstPayTipImgVisble(!1),this.TipShow()},I.prototype.showDayPayBtn=function(){if(m.thisStop(this._dayPayEff),l.instance.getFuncNeedShow(111)){var t=o.day_pay.DayPayModel;this.dayPayBox.visible=2==t.instance.giveState&&t.instance.ISover(),this.enterTipText.text=t.instance.getEnterTips()[0],t.instance.getEnterTips()[1],t.instance.ISover()&&(this._dayPayEff||(this._dayPayEff=g.creatEff(this.dayPayBox,"activityEnter",15)),n.dayPayEffState&&m.thisPlay(this._dayPayEff))}else this.dayPayBox.visible=!1;this._dayPayShow=this.dayPayBox.visible,this.setPos()},I.prototype.autoHandler=function(){CommonGroupUtil.notTeamCopyIsTeaming()||(this._missionCfg?o.mission.MissionModel.instance.auto=!o.mission.MissionModel.instance.auto:s.instance.addNotice("已挑战完所有关卡",!0))},I.prototype.panelHandler=function(){if(o.mission.MissionModel.instance.curLv<=this._MaxCurLvNoOpenWin){if(!this._missionCfg)return;var t=this._missionCfg[2];if(o.mission.MissionModel.instance.curWare!==t||o.mission.MissionModel.instance.auto){var e=this._missionCfg[2],i=o.mission.MissionModel.instance.curWare;s.instance.addNotice("还需击败"+(e-i)+"波怪物，才能开启闯关",!0)}else o.mission.MissionCtrl.instance.challenge(this._missionCfg[0])}else WindowManager.instance.open(19)},I.prototype.updateLv=function(){this.levelTxt.visible=this.levelBg.visible=this.missonBox.visible=this.onAutoBtn.visible=this.offAutoBtn.visible=this.levelTxt.visible=o.mission.MissionModel.instance.curLv>=this._missionShowLv,o.mission.MissionModel.instance.curLv>=this._missionShowLv&&this.hideBox.addChild(this.missionRP),this._missionCfg=r.instance.getCfgByLv(o.mission.MissionModel.instance.curLv),this._missionCfg?this.levelTxt.text="第"+o.mission.MissionModel.instance.curLv+"关":(this.levelTxt.text="第"+(o.mission.MissionModel.instance.curLv-1)+"关",o.mission.MissionModel.instance.auto=!1),this.updateWare()},I.prototype.updateWare=function(){if(this._missionCfg){var t=this._missionCfg[2];this._proCtrl.maxValue=t,this._proCtrl.value=o.mission.MissionModel.instance.curWare,1===t?this.splitImg1.visible=this.splitImg2.visible=!1:2===t?(this.splitImg1.visible=!0,this.splitImg1.x=this.proBar.x+46,this.splitImg2.visible=!1):3===t&&(this.splitImg1.visible=this.splitImg2.visible=!0,this.splitImg1.x=this.proBar.x+28,this.splitImg2.x=this.proBar.x+64),this.callLater(this.checkAutoChallenge)}},I.prototype.updateAuto=function(){o.mission.MissionModel.instance.curLv<=this._MaxCurLvNoOpenWin?this.onAutoBtn.visible=this.offAutoBtn.visible=!1:(this.offAutoBtn.visible=o.mission.MissionModel.instance.auto,this.onAutoBtn.visible=!o.mission.MissionModel.instance.auto),this.callLater(this.checkAutoChallenge)},I.prototype.checkAutoChallenge=function(){if(this._missionCfg){var t=this._missionCfg[2];o.mission.MissionModel.instance.curWare===t?(this._tianguanClip.visible=!0,this._tianguanClip.play()):(this._tianguanClip.visible=!1,this._tianguanClip.stop()),o.mission.MissionModel.instance.auto&&o.mission.MissionModel.instance.curWare===t&&!o.scene.SceneModel.instance.isInMission&&o.mission.MissionCtrl.instance.challenge(this._missionCfg[0])}},I.prototype.showFirtMould=function(){this.rewardShowItem.stopTween();var t=h.instance.getCfgById(1),e=o.first_pay.FirstPayModel.instance.showDay-1,i=t[4][3*e],n=t[4][3*e+1],s=t[4][3*e+2];this.rewardShowItem.showRewardObj(i,n,s)},I.prototype.firstPayTipImgVisble=function(t){this.rewardShowItem.visible=this.colseFirstPayTipImg.visible=this.firstPayTipImg.visible=t,t?(o.first_pay.FirstPayModel.instance._isShow=!0,this.showFirtMould(),n.dispatcher.event("CLOSE_TIPS_BANG")):o.first_pay.FirstPayModel.instance._isShow=!1,t&&this.moTongJiangShiShowImg.visible&&this.moTongJiangShiShowVisble(!1),t&&this.dragonShowBtn.visible&&this.dragonShowVisble(!1),t&&this.fightSoulPayShowItem.visible&&this.fightShowBoxVisble(!1),t&&this.sealDeityShowImg.visible&&this.sealDeityShowVisble(!1)},I.prototype.fightShowBoxVisble=function(t){!t||!this._fightSoulPayShow||this.dragonShowBtn.visible||this.sealDeityShowImg.visible||this.moTongJiangShiShowImg.visible||0!=o.scene.SceneUtil.currScene||o.first_pay.FirstPayModel.instance._isShow||o.soaring_rank.SoaringRankModel.instance._isShow?(this.fightShowBox.visible=!1,Laya.timer.once(this._delay6,this,this.fightShowBoxVisble,[!0])):(this.fightShowBox.visible=!0,this.setShowTipsBtnsZorder(this.fightSoulPayShowItem),Laya.timer.once(this._delay5,this,this.fightShowBoxVisble,[!1])),t&&!this._fightSoulPayShow&&(this.sealDeityShowImg||this.moTongJiangShiShowImg||this.dragonShowBtn||o.first_pay.FirstPayModel.instance._isShow||o.soaring_rank.SoaringRankModel.instance._isShow)&&Laya.timer.once(18e4,this,this.fightShowBoxVisble,[!0])},I.prototype.moTongJiangShiShowVisble=function(t){!t||!this._moTongJiangShiShow||this.moTongJiangShiShowImg.visible||0!=o.scene.SceneUtil.currScene||o.first_pay.FirstPayModel.instance._isShow||o.soaring_rank.SoaringRankModel.instance._isShow?(this.moTongJiangShiShowImg.visible=!1,this.closeMoTongJiangShiShowImg.visible=!1,this.mtjsJueBanImg.visible=!1,this.mtjsPowerClip.visible=!1,this.mtjsPowerImg.visible=!1,this.mtjsTipImg.visible=!1,this.mtjsTitleImg.visible=!1,this._modelClip1.visible=!1,Laya.timer.once(this._delay2,this,this.moTongJiangShiShowVisble,[!0])):(this.setShowTipsBtnsZorder(this.moTongJiangShiBox),this.moTongJiangShiShowImg.visible=!0,this.closeMoTongJiangShiShowImg.visible=!0,this.mtjsJueBanImg.visible=!0,this.mtjsPowerClip.visible=!0,this.mtjsPowerImg.visible=!0,this.mtjsTipImg.visible=!0,this.mtjsTitleImg.visible=!0,this._modelClip1.visible=!0,Laya.timer.once(this._delay1,this,this.moTongJiangShiShowVisble,[!1])),t&&!this.moTongJiangShiShowImg.visible&&(o.first_pay.FirstPayModel.instance._isShow||o.soaring_rank.SoaringRankModel.instance._isShow)&&Laya.timer.once(18e4,this,this.moTongJiangShiShowVisble,[!0]),t&&this.dragonShowBtn.visible&&this.dragonShowVisble(!1),t&&this.moTongJiangShiShowImg.visible&&this.fightShowBoxVisble(!1)},I.prototype.setShowTipsBtnsZorder=function(t){for(var e=[this.fightSoulPayShowItem,this.moTongJiangShiBox,this.dragonBox,this.sealDeityBox,this.firstPayBox],i=0;i<e.length;i++){var n=e[i];n.zOrder=n==t?102:100}},I.prototype.sealDeityShowVisble=function(t){!t||!this._sealDeityShow||this.sealDeityShowImg.visible||0!=o.scene.SceneUtil.currScene||o.first_pay.FirstPayModel.instance._isShow||o.soaring_rank.SoaringRankModel.instance._isShow?(this.sealDeityShowImg.visible=!1,this.closeSealDeityShowImg.visible=!1,this.sealDeityJueBanImg.visible=!1,this.sealDeityPowerClip.visible=!1,this.sealDeityPowerImg.visible=!1,this.sealDeityTipImg.visible=!1,this.sealDeityTitleImg.visible=!1,this._modelClip4.visible=!1,this._modelClip5.visible=!1,Laya.timer.once(this._delay8,this,this.sealDeityShowVisble,[!0])):(this.setShowTipsBtnsZorder(this.sealDeityBox),this.sealDeityShowImg.visible=!0,this.closeSealDeityShowImg.visible=!0,this.sealDeityJueBanImg.visible=!0,this.sealDeityPowerClip.visible=!0,this.sealDeityPowerImg.visible=!0,this.sealDeityTipImg.visible=!0,this.sealDeityTitleImg.visible=!0,this._modelClip4.visible=!0,this._modelClip5.visible=!0,Laya.timer.once(this._delay7,this,this.sealDeityShowVisble,[!1])),t&&!this.sealDeityShowImg.visible&&(o.first_pay.FirstPayModel.instance._isShow||o.soaring_rank.SoaringRankModel.instance._isShow)&&Laya.timer.once(18e4,this,this.sealDeityShowVisble,[!0]),t&&this.dragonShowBtn.visible&&this.dragonShowVisble(!1),t&&this.sealDeityShowImg.visible&&this.fightShowBoxVisble(!1),t&&this.sealDeityShowImg.visible&&this.moTongJiangShiShowVisble(!1)},I.prototype.dragonShowVisble=function(t){!t||!this._dragonShow||this.dragonShowBtn.visible||this.moTongJiangShiShowImg.visible||0!=o.scene.SceneUtil.currScene||o.first_pay.FirstPayModel.instance._isShow||o.soaring_rank.SoaringRankModel.instance._isShow?(this.dragonShowBtn.visible=!1,this.closeDragonBtn.visible=!1,this.dragonJueBanimg.visible=!1,this.dragonClip.visible=!1,this.dragonPowerImg.visible=!1,this.dragonTipImg.visible=!1,this.dragonTitleImg.visible=!1,this._modelClip2.visible=!1,Laya.timer.once(this._delay4,this,this.dragonShowVisble,[!0])):(this.setShowTipsBtnsZorder(this.dragonBox),this.dragonShowBtn.visible=!0,this.closeDragonBtn.visible=!0,this.dragonJueBanimg.visible=!0,this.dragonClip.visible=!0,this.dragonPowerImg.visible=!0,this.dragonTipImg.visible=!0,this.dragonTitleImg.visible=!0,this._modelClip2.visible=!0,Laya.timer.once(this._delay3,this,this.dragonShowVisble,[!1])),t&&!this.dragonShowBtn.visible&&(this.sealDeityShowImg.visible||this.moTongJiangShiShowImg.visible||o.first_pay.FirstPayModel.instance._isShow||o.soaring_rank.SoaringRankModel.instance._isShow)&&Laya.timer.once(18e4,this,this.dragonShowVisble,[!0]),t&&this.dragonShowBtn.visible&&this.fightShowBoxVisble(!1)},I.prototype.fightTalismanIcon=function(){this.fightTalismanShow=o.fight_talisman.FightTalismanModel.instance.serverInited&&o.first_pay.FirstPayModel.instance.giveState&&(!o.fight_talisman.FightTalismanModel.instance.state||-1==o.fight_talisman.FightTalismanModel.instance.actived)},I.prototype.fightTalismanShowItemHandler=function(){WindowManager.instance.open(379)},I.prototype.moneyCatIcon=function(){this.moneyCatShow=o.money_cat.MoneyCatModel.instance.serverInited&&o.first_pay.FirstPayModel.instance.giveState&&(!o.money_cat.MoneyCatModel.instance.state||-1==o.money_cat.MoneyCatModel.instance.actived)},I.prototype.oneBuyShowIcon=function(){this.oneBuyShow=l.instance.getFuncIsOpen(231)},I.prototype.singlePayPrintShowIcon=function(){this.singlePayPrintShow=o.cumulatePay_tianZhu.CumulatePayTianZhuModel.instance.state},I.prototype.payRankShowIcon=function(){this.payRankShow=o.funcOpen.FuncOpenModel.instance.getFuncIsOpen(213)},I.prototype.vipBuyShowIcon=function(){this.vipBuyShow=o.vip_buy.VipBuyModel.instance.state&&l.instance.getFuncIsOpen(232)},I.prototype.fightSoulPayShowIcon=function(){var t=l.instance.getFuncIsOpen(922);t&&this._fightSoulPayShow!=t&&(this.fightShowBoxVisble(!0),this.initializeFightClip()),this.fightSoulPayShow=t},I.prototype.sendQCoinsShowIcon=function(){var t=l.instance.getFuncIsOpen(989);this.sendQCoinsShow=t},I.prototype.directexBuyShowIcon=function(){var t=o.direct_ex.DirectExModel.instance.getFunOpenIds(),e=-1!=t;if(e){var i=o.direct_ex.DirectExModel.instance.actionIds.indexOf(t);this.directexBuyItem.btn.skin="left_bottom/btn_mainui_"+o.direct_ex.DirectExModel.instance.actionIcon[i]+".png"}this.directexBuyShow=e},I.prototype.tianshuBuyShowIcon=function(){var t=l.instance.getFuncIsOpen(966);this.tianshuBuyShow=t},I.prototype.fantianBuyShowIcon=function(){var t=l.instance.getFuncIsOpen(968);this.fanTianBuyShow=t},I.prototype.moTongJiangShiShowIcon=function(){var t=l.instance.getFuncIsOpen(251);t&&this._moTongJiangShiShow!=t&&(this.initializeFamiliarClip(),this.moTongJiangShiShowVisble(!0)),this.moTongJiangShiShow=t},I.prototype.sealDeityShowIcon=function(){var t=l.instance.getFuncIsOpen(979);t&&this._sealDeityShow!=t&&(this.initializeSealDeityClip(),this.sealDeityShowVisble(!0)),this.sealDeityShow=t},I.prototype.dragonShowIcon=function(){var t=l.instance.getFuncIsOpen(286);t&&this._dragonShow!=t&&(this.initializeDragonClip(),this.dragonShowVisble(!0)),this.dragonShow=t},I.prototype.purchaseShowIcon=function(){var t=l.instance.getFuncIsOpen(287);this.purchaseShow=t},I.prototype.moneyCatShowItemHandler=function(){WindowManager.instance.open(381)},I.prototype.glovesClickHandler=function(){var t=o.gloves.GlovesModel.instance.glovesInfo;t&&WindowManager.instance.open(1===t[0]?388:387)},I.prototype.updateGlovesInfo=function(){var t=o.gloves.GlovesModel.instance.glovesInfo;if(t)if(1===t[5]){var e=t[0];this.glovesShow=-1===e||0===e||1===e&&0<(0<t[3]||t[4]),this._glovesShow&&(this.glovesShowItem.btn.skin=1===e?"left_bottom/gloves_"+(t[3]||t[4])+".png":"left_bottom/btn_mainui_wxst.png")}else this.glovesShow=!0,this.glovesShowItem.btn.skin="left_bottom/btn_mainui_wxys.png";else this.glovesShow=!1},I.prototype.singlePayPrintHandler=function(){WindowManager.instance.open(330)},I.prototype.payRankHandler=function(){WindowManager.instance.open(359)},Object.defineProperty(I.prototype,"onlineAwardShow",{set:function(t){this._onlineAwardShow!==t&&(this._onlineAwardShow=t,this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"moneyCatShow",{set:function(t){this._moneyCatShow!==t&&(this._moneyCatShow=this.moneyCatShowItem.visible=t,this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"fightTalismanShow",{set:function(t){this._fightTalismanShow!==t&&(this._fightTalismanShow=this.fightTalismanShowItem.visible=t,this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"glovesShow",{set:function(t){this._glovesShow!==t&&(this._glovesShow=this.glovesShowItem.visible=t,this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"oneBuyShow",{set:function(t){this._oneBuyShow!==t&&(this._oneBuyShow=this.oneBuyShowItem.visible=t,this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"fightSoulPayShow",{set:function(t){this._fightSoulPayShow!==t&&(this._fightSoulPayShow=this.fightSoulPayShowItem.visible=t,this._fightSoulPayShow&&this.fightSoulPayShowbtn.setActivitiTime(922),this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"tianshuBuyShow",{set:function(t){this._tianshuBuyShow!==t&&(this._tianshuBuyShow=this.tianshuBuyBox.visible=t,this._tianshuBuyShow&&this.tianshuBuyBtn.setActivitiTime(966),this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"directexBuyShow",{set:function(t){this._directexBuyShow!==t&&(this._directexBuyShow=this.directexBuyItem.visible=t,this.directexBuyItem&&this.directexBuyItem.setActivitiTime(-1),this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"sendQCoinsShow",{set:function(t){this._sendQCoinsShow!==t&&(this._sendQCoinsShow=this.sendQCoinsItem.visible=t,this.sendQCoinsItem&&this.sendQCoinsItem.setActivitiTime(989),this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"fanTianBuyShow",{set:function(t){this._fanTianBuyShow!==t&&(this._fanTianBuyShow=this.fantianBuyBox.visible=t,this._fanTianBuyShow&&this.fantianBtn.setActivitiTime(968),this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"payRankShow",{set:function(t){this._payRankShow!==t&&(this._payRankShow=this.payRankShowItem.visible=t,this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"singlePayPrintShow",{set:function(t){c.instance.level;var e=p.instance.getCfgById(54001)[1];if(o.vip.VipModel.instance.vipLevel>=e[0]){if(this._singlePayPrintShow===t)return;this._singlePayPrintShow=this.singlePayPrintShowItem.visible=t}else this._singlePayPrintShow=this.singlePayPrintShowItem.visible=!1;this.relayoutEnters()},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"vipBuyShow",{set:function(t){this._vipBuyShow!==t&&(this._vipBuyShow=this.vipBuyShowItem.visible=t,this.relayoutEnters())},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"moTongJiangShiShow",{set:function(t){if(this._moTongJiangShiShow!==t){if(this._moTongJiangShiShow=this.moTongJiangShiBox.visible=t,this._moTongJiangShiShow){var e=o.familiars_down.FamiliarsDownModel.instance.info;e&&(e[2]>n.serverTime?Laya.timer.loop(1e3,this,this.updateMoTongJiangShiTime):Laya.timer.clear(this,this.updateMoTongJiangShiTime))}else Laya.timer.clear(this,this.updateMoTongJiangShiTime);this.relayoutEnters()}},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"sealDeityShow",{set:function(t){if(this._sealDeityShow!==t){if(this._sealDeityShow=this.sealDeityBox.visible=t,this._sealDeityShow){var e=o.seal_deity.SealDeityModel.instance.info;e&&(e[2]>n.serverTime?Laya.timer.loop(1e3,this,this.updateSealDeityTime):Laya.timer.clear(this,this.updateSealDeityTime))}else Laya.timer.clear(this,this.updateSealDeityTime);this.relayoutEnters()}},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"dragonShow",{set:function(t){if(this._dragonShow!=t){if(this._dragonShow=this.dragonBox.visible=t,this._dragonShow){var e=o.dragon.DragonModel.instance._info;e&&(e[1]>n.serverTime?Laya.timer.loop(1e3,this,this.updateDragonTime):Laya.timer.clear(this,this.updateDragonTime))}else Laya.timer.clear(this,this.updateDragonTime);this.relayoutEnters()}},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"purchaseShow",{set:function(t){this._purchaseShow!=t&&(this._purchaseShow=this.purchaseShowItem.visible=t,this.relayoutEnters())},enumerable:!0,configurable:!0}),I.prototype.updateMoTongJiangShiTime=function(){var t=o.familiars_down.FamiliarsDownModel.instance.info;if(t){var e=t[2];e>n.serverTime?this.moTongJiangShiTxt.text=o.common.CommonUtil.timeStampDDHHToHHMMSS(e):Laya.timer.clear(this,this.updateMoTongJiangShiTime)}},I.prototype.updateSealDeityTime=function(){var t=o.seal_deity.SealDeityModel.instance.info;if(t){var e=t[2];e>n.serverTime?this.sealDeityTxt.text=o.common.CommonUtil.timeStampDDHHToHHMMSS(e):Laya.timer.clear(this,this.updateSealDeityTime)}},I.prototype.updateDragonTime=function(){var t=o.dragon.DragonModel.instance._info;if(t){var e=t[1];e>n.serverTime?this.dragonTxt.text=o.common.CommonUtil.timeStampDDHHToHHMMSS(e):Laya.timer.clear(this,this.updateDragonTime)}},I.prototype.updatePurchaseTime=function(){var t=o.rush_to_purchase.RushToPurchaseModel.instance.info;if(t){var e=t[1];e>n.serverTime?this.purchaseShowItem.text.text=o.common.CommonUtil.timeStampDDHHToHHMMSS(e):Laya.timer.clear(this,this.updatePurchaseTime)}},I.prototype.closeShowModel=function(){this.moTongJiangShiShowVisble(!1),this.dragonShowVisble(!1),this.fightShowBoxVisble(!1),this.sealDeityShowVisble(!1)},I.prototype.relayoutEnters=function(){var t=!1;this._onlineAwardShow&&this._OnlineEeterPanel&&(this._OnlineEeterPanel.pos(60,108,!0),t=!0);var e=0;if(l.instance.getFuncNeedShow(51)&&2!==o.first_pay.FirstPayModel.instance.giveState&&(e=0<o.first_pay.FirstPayModel.instance.restTm&&o.first_pay.FirstPayModel.instance.restTm>n.serverTime?2:1),this._dayPayShow&&(this.dayPayBox.y=1===e?-200:2===e?-118:-306,e++),this._moneyCatShow&&(e=this.posItem(t,e,this.moneyCatShowItem,null)),this._fightTalismanShow&&(e=this.posItem(t,e,this.fightTalismanShowItem,null)),this._glovesShow&&(e=this.posItem(t,e,this.glovesShowItem,null)),this._oneBuyShow&&(e=this.posItem(t,e,this.oneBuyShowItem,null)),this._singlePayPrintShow&&(e=this.posItem(t,e,this.singlePayPrintShowItem,null)),this._payRankShow&&(e=this.posItem(t,e,this.payRankShowItem,null)),this._vipBuyShow&&(e=this.posItem(t,e,this.vipBuyShowItem,null)),this.thunderboltBuyItem&&this.thunderboltBuyItem.getIsShow()&&(e=this.posItem(t,e,this.thunderboltBuyItem,null)),this._purchaseShow){this._purchaseEff||(this._purchaseEff=this.createEff()),this._purchaseEff.play(),this.hideBox.addChild(this._purchaseEff),e=this.posItem(t,e,this.purchaseShowItem,null),this._purchaseEff.pos(this.purchaseShowItem.x,this.purchaseShowItem.y,!0);var i=o.rush_to_purchase.RushToPurchaseModel.instance.info;i&&(i[1]>n.serverTime?Laya.timer.loop(1e3,this,this.updatePurchaseTime):Laya.timer.clear(this,this.updatePurchaseTime))}else Laya.timer.clear(this,this.updatePurchaseTime),this._purchaseEff=this.destroyElement(this._purchaseEff);this._moTongJiangShiShow?(this._mtjsEff||(this._mtjsEff=this.createEff()),this._mtjsEff.play(),this.moTongJiangShiBox.addChild(this._mtjsEff),e=this.posItem(t,e,this.moTongJiangShiBox,null),this._mtjsEff.pos(40,40,!0)):this._mtjsEff=this.destroyElement(this._mtjsEff),this._sealDeityShow?(this._sealDeityEff||(this._sealDeityEff=this.createEff()),this._sealDeityEff.play(),this.sealDeityBox.addChild(this._sealDeityEff),e=this.posItem(t,e,this.sealDeityBox,null),this._sealDeityEff.pos(40,40,!0)):this._sealDeityEff=this.destroyElement(this._sealDeityEff),this._dragonShow?(this._dragenEff||(this._dragenEff=this.createEff()),this._dragenEff.play(),this.dragonBox.addChild(this._dragenEff),e=this.posItem(t,e,this.dragonBox,null),this._dragenEff.pos(40,40,!0)):this._dragenEff=this.destroyElement(this._dragenEff),this._fightSoulPayShow?(this._fightSoulPayEff||(this._fightSoulPayEff=this.createEff()),this._fightSoulPayEff.play(),this.fightSoulPayShowItem.addChild(this._fightSoulPayEff),e=this.posItem(t,e,this.fightSoulPayShowItem,null),this._fightSoulPayEff.pos(40,40,!0)):this._fightSoulPayEff=this.destroyElement(this._fightSoulPayEff),this._tianshuBuyShow?(this._tianshuBuyEff||(this._tianshuBuyEff=this.createEff()),this._tianshuBuyEff.play(),this.hideBox.addChildAt(this._tianshuBuyEff,this.hideBox.getChildIndex(this.tianshuBuyBox)+1),e=this.posItem(t,e,this.tianshuBuyBox,null),this._tianshuBuyEff.pos(this.tianshuBuyBox.x,this.tianshuBuyBox.y,!0)):this._tianshuBuyEff=this.destroyElement(this._tianshuBuyEff),this._fanTianBuyShow?(this._fantianBuyEff||(this._fantianBuyEff=this.createEff()),this._fantianBuyEff.play(),this.hideBox.addChildAt(this._fantianBuyEff,this.hideBox.getChildIndex(this.fantianBuyBox)+1),e=this.posItem(t,e,this.fantianBuyBox,null),this._fantianBuyEff.pos(this.fantianBuyBox.x,this.fantianBuyBox.y,!0)):this._fantianBuyEff=this.destroyElement(this._fantianBuyEff),this.thunderboltBuyItem&&this.thunderboltBuyItem.relayoutEnters(),this._sendQCoinsShow?(this._sendQiconsEff||(this._sendQiconsEff=this.createEff()),this._sendQiconsEff.play(),this.hideBox.addChildAt(this._sendQiconsEff,this.hideBox.getChildIndex(this.sendQCoinsItem)+1),e=this.posItem(t,e,this.sendQCoinsItem,null),this._sendQiconsEff.pos(this.sendQCoinsItem.x,this.sendQCoinsItem.y,!0)):this._sendQiconsEff=this.destroyElement(this._sendQiconsEff),this._directexBuyShow?(this._directexEff||(this._directexEff=this.createEff()),this._directexEff.play(),this.hideBox.addChildAt(this._directexEff,this.hideBox.getChildIndex(this.directexBuyItem)+1),e=this.posItem(t,e,this.directexBuyItem,null),this._directexEff.pos(this.directexBuyItem.x,this.directexBuyItem.y,!0)):this._directexEff=this.destroyElement(this._directexEff),this.anniversaryDayFirstItem&&(this.anniversaryDayFirstItem.getIsShow()&&(e=this.posItem(t,e,this.anniversaryDayFirstItem,null)),this.anniversaryDayFirstItem.relayoutEnters()),this.anniversaryDayItem&&(this.anniversaryDayItem.getIsShow()&&(e=this.posItem(t,e,this.anniversaryDayItem,null)),this.anniversaryDayItem.relayoutEnters()),this.anniversaryDayItem1&&(this.anniversaryDayItem1.getIsShow()&&(e=this.posItem(t,e,this.anniversaryDayItem1,null)),this.anniversaryDayItem1.relayoutEnters()),this.anniversaryDayItem2&&(this.anniversaryDayItem2.getIsShow()&&(e=this.posItem(t,e,this.anniversaryDayItem2,null)),this.anniversaryDayItem2.relayoutEnters()),this.summerDayFirstItem&&(this.summerDayFirstItem.getIsShow()&&(e=this.posItem(t,e,this.summerDayFirstItem,null)),this.summerDayFirstItem.relayoutEnters()),this.summerDayItem&&(this.summerDayItem.getIsShow()&&(e=this.posItem(t,e,this.summerDayItem,null)),this.summerDayItem.relayoutEnters()),this.spaceTravelFirstItem&&(this.spaceTravelFirstItem.getIsShow()&&(e=this.posItem(t,e,this.spaceTravelFirstItem,null)),this.spaceTravelFirstItem.relayoutEnters()),this.spaceTravelItem&&(this.spaceTravelItem.getIsShow()&&(e=this.posItem(t,e,this.spaceTravelItem,null)),this.spaceTravelItem.relayoutEnters()),this.barDayFirstItem&&(this.barDayFirstItem.getIsShow()&&(e=this.posItem(t,e,this.barDayFirstItem,null)),this.barDayFirstItem.relayoutEnters()),this.barDayItem&&(this.barDayItem.getIsShow()&&(e=this.posItem(t,e,this.barDayItem,null)),this.barDayItem.relayoutEnters()),this.barDayItem1&&(this.barDayItem1.getIsShow()&&(e=this.posItem(t,e,this.barDayItem1,null)),this.barDayItem1.relayoutEnters()),this.springSceneryFirstItem&&(this.springSceneryFirstItem.getIsShow()&&(e=this.posItem(t,e,this.springSceneryFirstItem,null)),this.springSceneryFirstItem.relayoutEnters()),this.springSceneryItem&&(this.springSceneryItem.getIsShow()&&(e=this.posItem(t,e,this.springSceneryItem,null)),this.springSceneryItem.relayoutEnters()),this.springSceneryItem1&&(this.springSceneryItem1.getIsShow()&&(e=this.posItem(t,e,this.springSceneryItem1,null)),this.springSceneryItem1.relayoutEnters()),this.zhiZhenFirstItem&&(this.zhiZhenFirstItem.getIsShow()&&(e=this.posItem(t,e,this.zhiZhenFirstItem,null)),this.zhiZhenFirstItem.relayoutEnters()),this.zhiZhenItem&&(this.zhiZhenItem.getIsShow()&&(e=this.posItem(t,e,this.zhiZhenItem,null)),this.zhiZhenItem.relayoutEnters()),this.zhiZhenItem1&&(this.zhiZhenItem1.getIsShow()&&(e=this.posItem(t,e,this.zhiZhenItem1,null)),this.zhiZhenItem1.relayoutEnters()),this.perfectestTenFirstItem&&(this.perfectestTenFirstItem.getIsShow()&&(e=this.posItem(t,e,this.perfectestTenFirstItem,null)),this.perfectestTenFirstItem.relayoutEnters()),this.perfectestTenItem&&(this.perfectestTenItem.getIsShow()&&(e=this.posItem(t,e,this.perfectestTenItem,null)),this.perfectestTenItem.relayoutEnters()),this.perfectestTenItem1&&(this.perfectestTenItem1.getIsShow()&&(e=this.posItem(t,e,this.perfectestTenItem1,null)),this.perfectestTenItem1.relayoutEnters()),this.zhiZhenItem2&&(this.zhiZhenItem2.getIsShow()&&(e=this.posItem(t,e,this.zhiZhenItem2,null)),this.zhiZhenItem2.relayoutEnters()),this.zhiZhenItem3&&(this.zhiZhenItem3.getIsShow()&&(e=this.posItem(t,e,this.zhiZhenItem3,null)),this.zhiZhenItem3.relayoutEnters()),this.childrensDayFirstItem&&(this.childrensDayFirstItem.getIsShow()&&(e=this.posItem(t,e,this.childrensDayFirstItem,null)),this.childrensDayFirstItem.relayoutEnters()),this.childrensDayItem&&(this.childrensDayItem.getIsShow()&&(e=this.posItem(t,e,this.childrensDayItem,null)),this.childrensDayItem.relayoutEnters()),this.childrensDayItem1&&(this.childrensDayItem1.getIsShow()&&(e=this.posItem(t,e,this.childrensDayItem1,null)),this.childrensDayItem1.relayoutEnters()),this.childrensDayItem2&&(this.childrensDayItem2.getIsShow()&&(e=this.posItem(t,e,this.childrensDayItem2,null)),this.childrensDayItem2.relayoutEnters()),this.childrensDayItem3&&(this.childrensDayItem3.getIsShow()&&(e=this.posItem(t,e,this.childrensDayItem3,null)),this.childrensDayItem3.relayoutEnters()),this.barDayItem2&&(this.barDayItem2.getIsShow()&&(e=this.posItem(t,e,this.barDayItem2,null)),this.barDayItem2.relayoutEnters()),this.treasureLandItem&&(this.treasureLandItem.getIsShow()&&(e=this.posItem(t,e,this.treasureLandItem,null)),this.treasureLandItem.relayoutEnters()),this.heQuFirstItem&&(this.heQuFirstItem.getIsShow()&&(e=this.posItem(t,e,this.heQuFirstItem,null)),this.heQuFirstItem.relayoutEnters()),this.heQuItem&&(this.heQuItem.getIsShow()&&(e=this.posItem(t,e,this.heQuItem,null)),this.heQuItem.relayoutEnters()),this.heQuItem1&&(this.heQuItem1.getIsShow()&&(e=this.posItem(t,e,this.heQuItem1,null)),this.heQuItem1.relayoutEnters()),this.heQuItem2&&(this.heQuItem2.getIsShow()&&(e=this.posItem(t,e,this.heQuItem2,null)),this.heQuItem2.relayoutEnters()),this.heQuItem3&&(this.heQuItem3.getIsShow()&&(e=this.posItem(t,e,this.heQuItem3,null)),this.heQuItem3.relayoutEnters()),this.yuanDanZaDanItem&&(this.yuanDanZaDanItem.getIsShow()&&(e=this.posItem(t,e,this.yuanDanZaDanItem,null)),this.yuanDanZaDanItem.relayoutEnters()),this.bossFeastItem&&(this.bossFeastItem.getIsShow()&&(e=this.posItem(t,e,this.bossFeastItem,null)),this.bossFeastItem.relayoutEnters()),this.ruinsItem&&(this.ruinsItem.getIsShow()&&(e=this.posItem(t,e,this.ruinsItem,null)),this.ruinsItem.relayoutEnters()),this.birthdaycakeItem&&(this.birthdaycakeItem.getIsShow()&&(e=this.posItem(t,e,this.birthdaycakeItem,null)),this.birthdaycakeItem.relayoutEnters()),this.doubleNinePartyItem&&(this.doubleNinePartyItem.getIsShow()&&(e=this.posItem(t,e,this.doubleNinePartyItem,null)),this.doubleNinePartyItem.relayoutEnters()),this.nianEndOneBuyItem&&(this.nianEndOneBuyItem.getIsShow()&&(e=this.posItem(t,e,this.nianEndOneBuyItem,null)),this.nianEndOneBuyItem.relayoutEnters()),this.nianEndRankItem&&(this.nianEndRankItem.getIsShow()&&(e=this.posItem(t,e,this.nianEndRankItem,null)),this.nianEndRankItem.relayoutEnters()),this.nianEndPartyItem&&(this.nianEndPartyItem.getIsShow()&&(e=this.posItem(t,e,this.nianEndPartyItem,null)),this.nianEndPartyItem.relayoutEnters()),this.callLater(this.setPosActionPreview),this.setVisble()},I.prototype.setVisble=function(){if(PlatParams.isCloseRecharge){this.firstPayBox.visible=!1;var t=this.hideBox._childs,e=[this.missonBox,this.levelBg,this.levelTxt];if(t&&0<t.length)for(var i=0,n=t.length;i<n;i++)-1===e.indexOf(t[i])&&(t[i].visible=!1)}},I.prototype.posItem=function(t,e,i,n){return void 0===n&&(n=null),i.pos(110*Math.floor(e/5)+60,e%5*88-244,!0),n&&n.pos(i.x+12,i.y-34,!0),this.updataPopoutLocation(e,i),e++,t&&4===e&&e++,e},I.prototype.createEff=function(){var t=new m;return t.frameUrls=["left_bottom/eff_0.png","left_bottom/eff_2.png","left_bottom/eff_4.png","left_bottom/eff_6.png","left_bottom/eff_8.png","left_bottom/eff_10.png","left_bottom/eff_12.png","left_bottom/eff_14.png"],t.durationFrame=7,t.loop=!0,t.anchorX=t.anchorY=.5,t},I.prototype.initPopout_y=function(){this.popout_y=[[this.moTongJiangShiShowImg.y,this.closeMoTongJiangShiShowImg.y,this.mtjsTipImg.y,this.mtjsTitleImg.y,this.mtjsJueBanImg.y,this.mtjsPowerImg.y,this.mtjsPowerClip.y],[this.dragonShowBtn.y,this.closeDragonBtn.y,this.dragonTipImg.y,this.dragonTitleImg.y,this.dragonJueBanimg.y,this.dragonPowerImg.y,this.dragonClip.y],[this.firstPayTipImg.y,this.colseFirstPayTipImg.y],[this.fightShowBox.y],[this.sealDeityShowImg.y,this.closeSealDeityShowImg.y,this.sealDeityTipImg.y,this.sealDeityTitleImg.y,this.sealDeityJueBanImg.y,this.sealDeityPowerImg.y,this.sealDeityPowerClip.y]]},I.prototype.updataPopoutLocation=function(t,e){var i=t%5*88,n=[[this.moTongJiangShiShowImg,this.closeMoTongJiangShiShowImg,this.mtjsTipImg,this.mtjsTitleImg,this.mtjsJueBanImg,this.mtjsPowerImg,this.mtjsPowerClip],[this.dragonShowBtn,this.closeDragonBtn,this.dragonTipImg,this.dragonTitleImg,this.dragonJueBanimg,this.dragonPowerImg,this.dragonClip],[this.firstPayTipImg,this.colseFirstPayTipImg],[this.fightShowBox],[this.sealDeityShowImg,this.closeSealDeityShowImg,this.sealDeityTipImg,this.sealDeityTitleImg,this.sealDeityJueBanImg,this.sealDeityPowerImg,this.sealDeityPowerClip]],s=-1;if(e==this.moTongJiangShiBox?s=0:e==this.dragonBox?s=1:e==this.missonBox?s=2:e===this.fightSoulPayShowItem?s=3:e==this.sealDeityBox&&(s=4),0<=s&&s<n.length)for(var o=n[s],a=0;a<o.length;a++)o[a].y=this.popout_y[s][a]-i},I.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),this._tianguanClip=this.destroyElement(this._tianguanClip),this._firstPayBtnClip=this.destroyElement(this._firstPayBtnClip),this._dayPayEff=this.destroyElement(this._dayPayEff),this._modelClip1=this.destroyElement(this._modelClip1),this._modelClip2=this.destroyElement(this._modelClip2),this._modelClip3=this.destroyElement(this._modelClip3),this._modelClip4=this.destroyElement(this._modelClip4),this._modelClip5=this.destroyElement(this._modelClip5),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.summerDayFirstItem=this.destroyElement(this.summerDayFirstItem),this.summerDayItem=this.destroyElement(this.summerDayItem),this.barDayFirstItem=this.destroyElement(this.barDayFirstItem),this.barDayItem=this.destroyElement(this.barDayItem),this.barDayItem1=this.destroyElement(this.barDayItem1),this.springSceneryFirstItem=this.destroyElement(this.springSceneryFirstItem),this.springSceneryItem=this.destroyElement(this.springSceneryItem),this.springSceneryItem1=this.destroyElement(this.springSceneryItem1),this.spaceTravelFirstItem=this.destroyElement(this.spaceTravelFirstItem),this.spaceTravelItem=this.destroyElement(this.spaceTravelItem),this.zhiZhenFirstItem=this.destroyElement(this.zhiZhenFirstItem),this.zhiZhenItem=this.destroyElement(this.zhiZhenItem),this.zhiZhenItem1=this.destroyElement(this.zhiZhenItem1),this.zhiZhenItem2=this.destroyElement(this.zhiZhenItem2),this.zhiZhenItem3=this.destroyElement(this.zhiZhenItem3),this.perfectestTenFirstItem=this.destroyElement(this.perfectestTenFirstItem),this.perfectestTenItem=this.destroyElement(this.perfectestTenItem),this.perfectestTenItem1=this.destroyElement(this.perfectestTenItem1),this.childrensDayFirstItem=this.destroyElement(this.childrensDayFirstItem),this.childrensDayItem=this.destroyElement(this.childrensDayItem),this.childrensDayItem1=this.destroyElement(this.childrensDayItem1),this.childrensDayItem2=this.destroyElement(this.childrensDayItem2),this.childrensDayItem3=this.destroyElement(this.childrensDayItem3),this.barDayItem2=this.destroyElement(this.barDayItem2),this.treasureLandItem=this.destroyElement(this.treasureLandItem),this.heQuFirstItem=this.destroyElement(this.heQuFirstItem),this.heQuItem=this.destroyElement(this.heQuItem),this.heQuItem1=this.destroyElement(this.heQuItem1),this.heQuItem2=this.destroyElement(this.heQuItem2),this.heQuItem3=this.destroyElement(this.heQuItem3),this.yuanDanZaDanItem=this.destroyElement(this.yuanDanZaDanItem),this.bossFeastItem=this.destroyElement(this.bossFeastItem),this.thunderboltBuyItem=this.destroyElement(this.thunderboltBuyItem),this.anniversaryDayFirstItem=this.destroyElement(this.anniversaryDayFirstItem),this.anniversaryDayItem=this.destroyElement(this.anniversaryDayItem),this.anniversaryDayItem1=this.destroyElement(this.anniversaryDayItem1),this.anniversaryDayItem2=this.destroyElement(this.anniversaryDayItem2),this.birthdaycakeItem=this.destroyElement(this.birthdaycakeItem),this.ruinsItem=this.destroyElement(this.ruinsItem),this.doubleNinePartyItem=this.destroyElement(this.doubleNinePartyItem),this.nianEndRankItem=this.destroyElement(this.nianEndRankItem),this.nianEndOneBuyItem=this.destroyElement(this.nianEndOneBuyItem),this.nianEndPartyItem=this.destroyElement(this.nianEndPartyItem),e.prototype.destroy.call(this,t),this._proCtrl.destroy(),this._proCtrl=null},I.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview)},I.prototype.setPosActionPreview=function(){f.TEMP.setTo(this.missonBox.width/2,this.missonBox.height/2);var t=this.missonBox.localToGlobal(f.TEMP,!0);o.action_preview.ActionPreviewModel.instance._posSprite.set(46,t),o.action_preview.ActionPreviewModel.instance._posSprite.set(107,t),f.TEMP.setTo(this.dayPayBox.width/2,this.dayPayBox.height/2);var e=this.dayPayBox.localToGlobal(f.TEMP,!0);o.action_preview.ActionPreviewModel.instance._posSprite.set(111,e),f.TEMP.setTo(this.firstPayBtn.width/2,this.firstPayBtn.height/2);var i=this.firstPayBtn.localToGlobal(f.TEMP,!0);o.action_preview.ActionPreviewModel.instance._posSprite.set(51,i),f.TEMP.setTo(this.oneBuyShowItem.width/2,this.oneBuyShowItem.height/2);var n=this.oneBuyShowItem.localToGlobal(f.TEMP,!0);o.action_preview.ActionPreviewModel.instance._posSprite.set(231,n),f.TEMP.setTo(this.vipBuyShowItem.width/2,this.vipBuyShowItem.height/2);var s=this.vipBuyShowItem.localToGlobal(f.TEMP,!0);o.action_preview.ActionPreviewModel.instance._posSprite.set(232,s)},I.prototype.close=function(){var t=this;this._tween.stop(),this._tween=TweenJS.create(this).to({left:-228},CommonConfig.panelTweenDuration).onComplete(function(){e.prototype.close.call(t)}).start(),Laya.timer.clear(this,this.loopHandler),this._dayPayEff&&(this._dayPayEff.visible=n.dayPayEffState=!1,this._dayPayEff.stop()),this._tianguanClip&&(this._tianguanClip.visible=!1,this._tianguanClip.stop()),this.closeOnlineEeterPanel(),this._firstPayBtnClip&&(this._firstPayBtnClip.visible=!1,this._firstPayBtnClip.stop()),o.first_pay.FirstPayModel.instance._isShow=!1,n.dispatcher.event("THE_CARNIVAL_UPDATE"),this.rewardShowItem.stopTween(),e.prototype.close.call(this)},I.prototype.closeOnlineEeterPanel=function(){this._OnlineEeterPanel&&(this._onlineAwardShow=!1,this._OnlineEeterPanel.removeSelf(),this._OnlineEeterPanel.destroy(!0),this._OnlineEeterPanel=null)},I.prototype.initializeClip=function(){this._tianguanClip=new m,this._tianguanClip.skin="assets/effect/tianguan.atlas";for(var t=[],e=0;e<7;e++)t[e]="tianguan/000"+e+".png";this._tianguanClip.frameUrls=t,this._tianguanClip.setProperty(this.panelBtn,-17,-20)},I.prototype.initializeFamiliarClip=function(){var t=p.instance.getCfgById(63201)[1],e=d.instance.getCfgById(t[4]);this._modelClip1.reset(t[4],t[2],0,t[0],0,0),this._modelClip1.avatarRotationX=e[6],this._modelClip1.avatarRotationY=e[7]+35,this._modelClip1.avatarScale=1,this._modelClip1.avatarY=-160,this._modelClip1.avatarX=4},I.prototype.initializeSealDeityClip=function(){var t=p.instance.getCfgById(98211)[1],e=d.instance.getCfgById(t[0]);this._modelClip4.reset(t[0],0,0,0,0,t[4]),this._modelClip4.avatarRotationX=e[6],this._modelClip4.avatarRotationY=e[7]+35,this._modelClip4.avatarScale=1.2,this._modelClip4.avatarY=-160,this._modelClip4.avatarX=4;var i=d.instance.getCfgById(t[2]);this._modelClip5.reset(t[2]),this._modelClip5.avatarRotationX=i[6],this._modelClip5.avatarRotationY=i[7]+35,this._modelClip5.avatarScale=.9,this._modelClip5.avatarY=-160,this._modelClip5.avatarX=4},I.prototype.initializeDragonClip=function(){var t=d.instance.getCfgById(2015);this._modelClip2.anchorX=this._modelClip2.anchorY=.5,this._modelClip2.avatarScale=1.4,this._modelClip2.avatarRotationX=t[6],this._modelClip2.avatarRotationY=t[7]+30,this._modelClip2.avatarY=t[9],this._modelClip2.avatarX=t[8],this._modelClip2.reset(2015),this._modelClip2.centerX=0,this._modelClip2.y=200},I.prototype.initializeFightClip=function(){var t=p.instance.getCfgById(97513)[1],e=d.instance.getCfgById(t[0]);this._modelClip3.anchorX=this._modelClip3.anchorY=.5,this._modelClip3.avatarScale=1,this._modelClip3.avatarRotationX=e[6],this._modelClip3.avatarRotationY=e[7]+30,this._modelClip3.avatarY=e[9],this._modelClip3.avatarX=e[8],this._modelClip3.reset(t[0]),this._modelClip3.y=180,this._modelClip3.x=120},v=I,t.LeftBottomPanel=v}(modules=modules||{}),function(t){var e,i;function n(){this.coinIncome=this.exeIncome=this.coinIncomeNext=this.exeIncomeNext=0}e=t.sweeping_income||(t.sweeping_income={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateInfo=function(t){this.coinIncomeNext=t[3],this.exeIncomeNext=t[4],this.coinIncome=t[1],this.exeIncome=t[2],GlobalData.dispatcher.event("SWEEPING_INCOME")},i=n,e.SweepingIncomeModel=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.rename||(t.rename={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"renameInfo",{get:function(){return this._renameInfo},set:function(t){this._renameInfo=t,GlobalData.dispatcher.event("RENAME_INFO_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"updateNameReply",{get:function(){return this._updateNameReply},set:function(t){this._updateNameReply=t,GlobalData.dispatcher.event("RENAME_NAME_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"updateOccReply",{get:function(){return this._updateOccReply},set:function(t){this._updateOccReply=t,GlobalData.dispatcher.event("RENAME_OCC_UPDATE")},enumerable:!0,configurable:!0}),i=n,e.RenameModel=i}(modules=modules||{}),function(h){var c,e,t,p,i,n,s,o,a,r,l,u,d,m,f;function g(){var t=e.call(this)||this;return t._rankName=[],t._isTimeOver=!0,t._rankName.push("txt_mainui_xqb.png","txt_mainui_lcb.png","txt_mainui_sbb.png","txt_mainui_xyb.png","txt_mainui_xfb.png","txt_mainui_zbb.png","txt_mainui_zlb.png"),t}c=h.main||(h.main={}),t=ui.RightTopViewUI,p=h.funcOpen.FuncOpenModel,i=h.notice.SystemNoticeManager,n=h.config.ActionOpenCfg,s=Laya.Point,o=h.common.CommonUtil,a=h.bottomTab.BottomTabCtrl,r=h.scene.SceneModel,l=h.config.SceneCfg,u=h.rename.RenameModel,d=h.redPoint.RedPointCtrl,m=h.common.CommonConfig,e=t,__extends(g,e),g.prototype.initialize=function(){e.prototype.initialize.call(this),this.right=0,this.top=m.topOffset+38,this.layer=3,this.closeByOthers=!1,this._taskBase=[this.reward1,this.reward2,this.reward3],o.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",24),o.setHTMLPro(this.StatementHTML1,"#1f304d","SimHei",24),this.zOrder=1,this.FsRewardShowItem.setDataFun([1,.4,.3,.45,"assets/icon/ui/sprint_rank/"]),this.CbRewardShowItem.setDataFun([1,.4,.3,.45,"assets/icon/ui/sprint_rank/"]),this.TipsRewardShowItem.setDataFun([1,.8,.6,.9,"assets/icon/ui/sprint_rank/"])},g.prototype.onEvt=function(){var t=this;e.prototype.onEvt.call(this),this.onAutoClick(this.rankOpenBtn,this,this.showRank),this.onAutoClick(this.soaringRankOpenBtn,this,this.soaringRankOpenBtnHanler),this.onAutoGlobalEvt("SPRINT_RANK_UPDATE",this,this.updateRank),this.onAutoGlobalEvt("SPRINT_RANK_TASK_UPDATE",this,this.updateRank),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),this.regAutoRP(this.sprintRankRp,["sprintRankRP","rotaryTablechongbangRP","discountGiftPayRP","cumulate2RP","dayconsumeRP"]),this.regAutoRP(this.soaringSprintRankRp,["soaringRankRP","rotaryTableSoaringRP","soaringCumulatePayRP","soaringDayConsumeRewardRP","soaringSinglePayRP","soaringSpecialGiftRP","soaringPanicBuyingGifRP"]),this.onAutoGlobalEvt("SOARING_RANK_UPDATE",this,this.updateSoaringRank),this.onAutoGlobalEvt("SOARING_RANK_ITEM_UPDATE",this,this.updateSoaringRank),this.onAutoGlobalEvt("SPRINT_RANK_UPDATE",this,this.updateSoaringRank),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funOpenGetSprintRankInfo),this.onAutoGlobalEvt("SOARING_RANK_ITEM_UPDATE",this,this.getFeishengRankTaskInfo),this.onAutoGlobalEvt("SOARING_RANK_UPDATE",this,this.getFeishengRankTaskInfo),this.onAutoGlobalEvt("SOARING_RANK_ITEM_UPDATE",this,this.getFeishengRankAllInfo),this.onAutoGlobalEvt("SWEEPING_INCOME",this,this.updateIncome),this.onAutoGlobalEvt("CLOSE_TIPS_BANG",this,function(){t.TipsBox.visible=!1,h.soaring_rank.SoaringRankModel.instance._isShow=!1}),this.onAutoGlobalEvt("SOARING_RANK_CHANG",this,this.showFirstPayTipImgText),this.onAutoGlobalEvt("SOARING_RANK_CHANG",this,this.showFirstPayTipImgText),this.onAutoGlobalEvt("SPRINT_RANK_HUODONG_CHANG",this,this.startTips),this.onAutoGlobalEvt("SOARING_RANK_HUODONG_CHANG",this,this.startTips),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc),this.onAutoClick(this.clikBtn,this,this.TipsBoxHandler),this.onAutoClick(this.colseTipBtn,this,this.colseTipBtnHandler),this.onAutoClick(this.TipsTextBgImg,this,this.TipsBoxHandlerText),this.onAutoClick(this.colseTiprTextBtn,this,this.colseTipBtnHandlerText),GlobalData.dispatcher.on("ROTARYTABLE_SOARING_SHOWRANK",this,this.showRank)},g.prototype.getFeishengRankTaskInfo=function(){h.soaring_rank.SoaringRankCtrl.instance.getFeishengRankTaskInfo()},g.prototype.getFeishengRankAllInfo=function(){h.soaring_rank.SoaringRankCtrl.instance.getFeishengRankAllInfo()},g.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._curSoaringType=0,h.sprint_rank.SprintRankCtrl.instance.getSprintRankBaseInfo(),this.updateRank(),this.updateSoaringRank(),this.right=-272,this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({right:0},m.panelTweenDuration).onComplete(function(){GlobalData.dispatcher.event("ACTION_PREVIEW_RESIZE_UI")}).start(),this.setActionPreviewPos(),this.startTips(),this.updateIncome()},g.prototype.startTips=function(){c.RightTopModel.instance,this.TipShow(),this.TipShowText(),this.setVisble()},g.prototype.funOpenGetSprintRankInfo=function(t){for(var e=0;e<t.length;e++){var i=t[e];164==i?this.updateSoaringRank():125==i&&this.updateRank()}this.setVisble()},g.prototype.setVisble=function(){PlatParams.isCloseRecharge&&(this.soaringRankOpenBtn.visible=!1,this.rankOpenBtn.visible=!1,this.TipsBox.visible=!1,this.TipsTextBox.visible=!1,this.TipsTextPoinBox.visible=!1)},g.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview),this.setVisble()},g.prototype.setPosActionPreview=function(){s.TEMP.setTo(this.rankOpenBtn.width/2,this.rankOpenBtn.height/2);var t=this.rankOpenBtn.localToGlobal(s.TEMP,!0);h.action_preview.ActionPreviewModel.instance._posSprite.set(138,t),h.action_preview.ActionPreviewModel.instance._posSprite.set(132,t),h.action_preview.ActionPreviewModel.instance._posSprite.set(133,t),h.action_preview.ActionPreviewModel.instance._posSprite.set(134,t),h.action_preview.ActionPreviewModel.instance._posSprite.set(135,t),h.action_preview.ActionPreviewModel.instance._posSprite.set(136,t),h.action_preview.ActionPreviewModel.instance._posSprite.set(137,t),s.TEMP.setTo(this.bg.width/2,this.bg.height/2);var e=this.bg.localToGlobal(s.TEMP,!0);h.action_preview.ActionPreviewModel.instance._posSprite.set(10000002,e),s.TEMP.setTo(this.bg.x,this.bg.y);var i=this.bg.localToGlobal(s.TEMP,!0);h.action_preview.ActionPreviewModel.instance._posSprite.set(10000006,i),this.setTipsTextBox(this._isTimeOver),this.setVisble()},g.prototype.close=function(){var t=this;this._tween.stop(),this._tween=TweenJS.create(this).to({right:-272},m.panelTweenDuration).onComplete(function(){t.firstPayTipImgVisbleText(!1),e.prototype.close.call(t)}).start(),this.CbRewardShowItem.stopTween(),this.FsRewardShowItem.stopTween(),this.TipsRewardShowItem.stopTween(),Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.soaringRankactivityHandler),Laya.timer.clear(this,this.firstPayTipImgTime),Laya.timer.clear(this,this.firstChaoGuo),Laya.timer.clear(this,this.chongZhi),Laya.timer.clear(this,this.firstPayTipImgTimeText),Laya.timer.clear(this,this.firstChaoGuoText),Laya.timer.clear(this,this.chongZhiText),this.TipsTextBox&&this.TipsTextBox.removeSelf()},g.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),this.CbRewardShowItem=this.destroyElement(this.CbRewardShowItem),this.FsRewardShowItem=this.destroyElement(this.FsRewardShowItem),this.TipsRewardShowItem=this.destroyElement(this.TipsRewardShowItem),this.TipsTextBox=this.destroyElement(this.TipsTextBox),e.prototype.destroy.call(this,t)},g.prototype.updateIncome=function(){this.coinTxt.text=h.sweeping_income.SweepingIncomeModel.instance.coinIncome+"/小时",this.expTxt.text=h.sweeping_income.SweepingIncomeModel.instance.exeIncome+"/小时"},g.prototype.updateRank=function(){h.sprint_rank.SprintRankCtrl.instance.setActionOpen();var t=h.sprint_rank.SprintRankModel.instance.openState;p.instance.getFuncNeedShow(138)?this.rankOpenBtn.visible=1==t:this.rankOpenBtn.visible=!1;var e=h.sprint_rank.SprintRankModel.instance.firstName,i=!0;if(this._curSoaringType===h.sprint_rank.SprintRankModel.instance.curType&&(i=!1),this.OneName.text=e||"虚位以待",0!=h.sprint_rank.SprintRankModel.instance.curType){var n=h.config.SprintRankCfg.instance.getCfgsByGrade(h.sprint_rank.SprintRankModel.instance.curType,0),s=n[8],o=n[10],a=n[13],r=n[5],l=n[6];this.showTipsUI(0,h.sprint_rank.SprintRankModel.instance.curType,r),this.showTipsTextUI(0),i&&(this.CbRewardShowItem.stopTween(),this.TipsRewardShowItem.stopTween(),this.CbRewardShowItem.showRewardObj(s,o,a),l?this.TipsRewardShowItem.showRewardObj(l,o,a):this.TipsRewardShowItem.showRewardObj(s,o,a)),this.rankImag.skin="right_top/"+this._rankName[h.sprint_rank.SprintRankModel.instance.curType-1],this.setActivitiTime(),this.setVisble()}else this._curSoaringType=0},g.prototype.setActivitiTime=function(){h.sprint_rank.SprintRankModel.instance.restTm>=GlobalData.serverTime?(this.activityText.visible=!0,this.overText.visible=!1,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText.visible=!1,this.overText.visible=!0)},g.prototype.activityHandler=function(){this.activityText.text=""+o.timeStampToHHMMSS(h.sprint_rank.SprintRankModel.instance.restTm),h.sprint_rank.SprintRankModel.instance.restTm<GlobalData.serverTime&&(this.activityText.visible=!1,Laya.timer.clear(this,this.activityHandler),this.activityText.visible=!1,this.overText.visible=!0)},g.prototype.showRank=function(){p.instance.getFuncIsOpen(138)?a.instance.openTabByFunc(138):i.instance.addNotice(p.instance.getFuncOpenTipById(125),!0)},g.prototype.updateSoaringRank=function(){var t=h.sprint_rank.SprintRankModel.instance.openState;h.soaring_rank.SoaringRankCtrl.instance.setActionOpen(),p.instance.getFuncNeedShow(164)?this.soaringRankOpenBtn.visible=2===t:this.soaringRankOpenBtn.visible=!1;var e=h.soaring_rank.SoaringRankModel.instance.firstName;this.soaringOneName.text=e||"虚位以待";var i=!0;if(this._curSoaringType===h.soaring_rank.SoaringRankModel.instance.curType&&(i=!1),this._curSoaringType=h.soaring_rank.SoaringRankModel.instance.curType,2==h.sprint_rank.SprintRankModel.instance.openState&&0!=h.soaring_rank.SoaringRankModel.instance.curType){var n=h.config.SoaringRankCfg.instance.getCfgsByGrade(h.soaring_rank.SoaringRankModel.instance.curType,0),s=n[7],o=n[9],a=n[15],r=n[4],l=n[5];this.showTipsUI(1,h.soaring_rank.SoaringRankModel.instance.curType,r),this.showTipsTextUI(1),i&&(this.FsRewardShowItem.stopTween(),this.TipsRewardShowItem.stopTween(),this.FsRewardShowItem.showRewardObj(s,o,a),l?this.TipsRewardShowItem.showRewardObj(l,o,a):this.TipsRewardShowItem.showRewardObj(s,o,a)),this.soaringRanksetActivitiTime(),this.setVisble()}else this._curSoaringType=0},g.prototype.soaringRanksetActivitiTime=function(){h.soaring_rank.SoaringRankModel.instance.restTm>=GlobalData.serverTime&&p.instance.getFuncIsOpen(164)&&0==h.soaring_rank.SoaringRankModel.instance.endFlag?(this.soaringActivityText.visible=!0,this.soaringOverText.visible=!1,this.soaringRankactivityHandler(),Laya.timer.loop(1e3,this,this.soaringRankactivityHandler),h.soaring_panicBuyingGift.SoaringPanicBuyingGiftModel.instance.setRP1(),h.soaring_specialGift.SoaringSpecialGiftModel.instance.setRP1()):(this.soaringActivityText.visible=!1,this.soaringOverText.visible=!0)},g.prototype.soaringRankactivityHandler=function(){this.soaringActivityText.text=""+o.timeStampToHHMMSS(h.soaring_rank.SoaringRankModel.instance.restTm),h.soaring_rank.SoaringRankModel.instance.restTm<GlobalData.serverTime&&(d.instance.setRPProperty("soaringPanicBuyingGifRP",!1),d.instance.setRPProperty("soaringSpecialGiftRP",!1),Laya.timer.clear(this,this.soaringRankactivityHandler),this.soaringActivityText.visible=!1,this.soaringOverText.visible=!0)},g.prototype.soaringRankOpenBtnHanler=function(){p.instance.getFuncIsOpen(164)?n.instance.getCfgById(164)[10]?WindowManager.instance.openByActionId(164):a.instance.openTabByFunc(164):i.instance.addNotice(p.instance.getFuncOpenTipById(164),!0)},g.prototype.TipShow=function(){Laya.timer.clear(this,this.firstPayTipImgTime),Laya.timer.clear(this,this.firstChaoGuo),Laya.timer.clear(this,this.chongZhi),this.TipsBox.visible=!1,h.soaring_rank.SoaringRankModel.instance._isShow=!1;var t=c.RightTopModel.instance.getTimeList(0);return l.instance.getCfgById(r.instance.enterScene[0])[7],GlobalData.serverTime-c.RightTopModel.instance._lastTime>t[2]?(c.RightTopModel.instance._lastTime=GlobalData.serverTime-t[2],Laya.timer.loop(1e3,this,this.firstChaoGuo),void this.firstChaoGuo()):(Laya.timer.loop(1e3,this,this.firstPayTipImgTime),void this.firstPayTipImgTime())},g.prototype.firstChaoGuo=function(){var t=c.RightTopModel.instance.getTimeList(0);GlobalData.serverTime-c.RightTopModel.instance._lastTime>=t[2]+t[0]&&(Laya.timer.clear(this,this.firstChaoGuo),this.showFirstPayTipImg())},g.prototype.firstPayTipImgTime=function(){var t=c.RightTopModel.instance.getTimeList(0);GlobalData.serverTime-c.RightTopModel.instance._lastTime>=t[2]&&(Laya.timer.clear(this,this.firstPayTipImgTime),this.showFirstPayTipImg())},g.prototype.showFirstPayTipImg=function(){if(c.RightTopModel.instance.getState()){var t=c.RightTopModel.instance.getTimeList(0);this.firstPayTipImgVisble(!0),c.RightTopModel.instance._isshouci=!1,c.RightTopModel.instance._lastTime=GlobalData.serverTime,Laya.timer.once(t[1],this,this.chongZhi)}},g.prototype.chongZhi=function(){if(this.firstPayTipImgVisble(!1),!c.RightTopModel.instance.getState())return Laya.timer.clear(this,this.firstPayTipImgTimeText),Laya.timer.clear(this,this.firstChaoGuoText),void Laya.timer.clear(this,this.chongZhiText);this.TipShow()},g.prototype.TipsBoxHandler=function(){this.firstPayTipImgVisble(!1),h.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()?this.showRank():this.soaringRankOpenBtnHanler()},g.prototype.colseTipBtnHandler=function(){this.firstPayTipImgVisble(!1)},g.prototype.firstPayTipImgVisble=function(t){this.TipsTextBox.visible||h.first_pay.FirstPayModel.instance._isShow||(this.TipsBox.visible=t,(h.soaring_rank.SoaringRankModel.instance._isShow=t)&&GlobalData.dispatcher.event("MTJS_SHOW_MODEL"),this.setVisble())},g.prototype.TipShowText=function(){Laya.timer.clear(this,this.firstPayTipImgTimeText),Laya.timer.clear(this,this.firstChaoGuoText),Laya.timer.clear(this,this.chongZhiText),this.TipsTextBox.visible=!1;var t=c.RightTopModel.instance.getTimeList(1);l.instance.getCfgById(r.instance.enterScene[0])[7],GlobalData.serverTime-c.RightTopModel.instance._lastTime1>t[2]?(c.RightTopModel.instance._lastTime1=GlobalData.serverTime-t[2],Laya.timer.loop(1e3,this,this.firstChaoGuoText),this.firstChaoGuoText()):(Laya.timer.loop(1e3,this,this.firstPayTipImgTimeText),this.firstPayTipImgTimeText())},g.prototype.firstChaoGuoText=function(){var t=c.RightTopModel.instance.getTimeList(1);GlobalData.serverTime-c.RightTopModel.instance._lastTime1>=t[2]+t[0]&&(Laya.timer.clear(this,this.firstChaoGuoText),this.showFirstPayTipImgText(!0))},g.prototype.firstPayTipImgTimeText=function(){var t=c.RightTopModel.instance.getTimeList(1);GlobalData.serverTime-c.RightTopModel.instance._lastTime1>=t[2]&&(Laya.timer.clear(this,this.firstPayTipImgTimeText),this.showFirstPayTipImgText(!0))},g.prototype.changTextTips=function(){},g.prototype.setTipsTextBox=function(t){if(this.TipsTextBox.removeSelf(),this._isTimeOver=t)this.addChildAt(this.TipsTextBox,7),this.TipsTextBox.x=this.TipsTextPoinBox.x,this.TipsTextBox.y=this.TipsTextPoinBox.y;else{var e=h.action_preview.ActionPreviewModel.instance.getPosSprite(10000006);s.TEMP.setTo(e.x,e.y),LayerManager.instance.getLayerById(5).globalToLocal(s.TEMP);var i=s.TEMP.x,n=s.TEMP.y;LayerManager.instance.addToNoticeLayer(this.TipsTextBox),this.TipsTextBox.x=i+this.TipsTextPoinBox.x,this.TipsTextBox.y=n+this.TipsTextPoinBox.y}},g.prototype.showFirstPayTipImgText=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this.setTipsTextBox(e);var i=h.sprint_rank.SprintRankModel.instance.openState,n=h.sprint_rank.SprintRankModel.instance.restTm,s=h.soaring_rank.SoaringRankModel.instance.endFlag,o=n>=GlobalData.serverTime,a=!1,r=!1;if(h.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()&&1==i&&0!=n&&o)this.showTipsTextUI(0),a=h.sprint_rank.SprintRankModel.instance.myOne(),r=h.sprint_rank.SprintRankModel.instance.isTwo();else{if(!h.funcOpen.FuncOpenModel.instance.getFuncIsOpen(164)||2!==i||0!=s)return;this.showTipsTextUI(1),a=h.soaring_rank.SoaringRankModel.instance.myOne(),r=h.soaring_rank.SoaringRankModel.instance.isTwo()}if(!c.RightTopModel.instance._isCloseShouDong){if(a){if(t)return;if(!r)return}var l=c.RightTopModel.instance.getTimeList(1);this.firstPayTipImgVisbleText(!0),c.RightTopModel.instance._isshouci1=!1,c.RightTopModel.instance._lastTime1=GlobalData.serverTime,Laya.timer.once(l[1],this,this.chongZhiText),this.setVisble()}},g.prototype.chongZhiText=function(){if(this.firstPayTipImgVisbleText(!1),!c.RightTopModel.instance.getState())return Laya.timer.clear(this,this.firstPayTipImgTimeText),Laya.timer.clear(this,this.firstChaoGuoText),void Laya.timer.clear(this,this.chongZhiText);this.TipShowText()},g.prototype.TipsBoxHandlerText=function(){this.firstPayTipImgVisbleText(!1),h.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()?this.showRank():this.soaringRankOpenBtnHanler()},g.prototype.colseTipBtnHandlerText=function(){this.firstPayTipImgVisbleText(!1),c.RightTopModel.instance.closeTipsShouDongHar()},g.prototype.firstPayTipImgVisbleText=function(t){this.TipsTextBox&&(this.TipsTextBox.visible=t),t&&(this.TipsBox&&(this.TipsBox.visible=!1),h.soaring_rank.SoaringRankModel.instance._isShow=!1),this.setVisble()},g.prototype.showTipsUI=function(t,e,i){this.fingClip.value=""+c.RightTopModel.instance.getZhanLiByType(t,e),this.tipsImg.visible=!0,0==t?(this.tipsImg.skin="right_top/KF"+e+".png",7===e&&(this.tipsImg.visible=!1)):this.tipsImg.skin="right_top/FS"+e+".png";for(var n=0;n<this._taskBase.length;n++)this._taskBase[n].visible=!1;var s=new Array;for(n=0;n<.5*i.length;n++){var o=this._taskBase[n];o&&(o.dataSource=[i[2*n],i[2*n+1],0,null],o.visible=!0,o.nameVisible=!1,s.push(o))}var a=50*s.length+10*(s.length-1),r=(this.TipsBox.width-a)/2;for(n=0;n<s.length;n++){var l=s[n];l.x=r,r+=.5*l.width+10}},g.prototype.showTipsTextUI=function(t){var e;if(e=0==t?h.sprint_rank.SprintRankModel.instance.getTipsInfo():h.soaring_rank.SoaringRankModel.instance.getTipsInfo()){this.StatementHTML.y=36,this.StatementHTML1.y=68,this.StatementHTML.visible=!0,this.StatementHTML1.visible=!0,this.StatementHTML.innerHTML=e[0],this.StatementHTML1.innerHTML=e[1],e[1]||(this.StatementHTML1.visible=!1,this.StatementHTML.y=49);var i=this.StatementHTML.contextWidth;this.StatementHTML1.contextWidth>i&&(i=this.StatementHTML1.contextWidth),this.TipsTextBgImg.width=193+i,this.StatementHTML1.x=160,this.StatementHTML.x=160,this.TipsTextBgImg.right=0}},g.prototype.updateOcc=function(){var t=u.instance.updateOccReply;t&&t[0]===PlayerModel.instance.actorId&&(this.updateRank(),this.updateSoaringRank()),this.setVisble()},f=g,c.RightTopPanel=f}(modules=modules||{}),function(t){var s,e,i,n,o;function a(){return e.call(this)||this}s=t.main||(t.main={}),i=ui.RightBottomViewUI,n=t.funcOpen.FuncOpenModel,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=670,this.layer=3,this.closeByOthers=!1,this._showIdArr=[],this._hiddenIdArr=[],this._enterIdArr=[60,148,59,61,119,158],this._btnTab={},this.updateShowId()},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.showBtnHandler)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showBtnHandler(),this.right=-134,this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({right:0},CommonConfig.panelTweenDuration).onComplete(function(){GlobalData.dispatcher.event("ACTION_PREVIEW_RESIZE_UI")}).start()},a.prototype.close=function(){var t=this;this._tween.stop(),this._tween=TweenJS.create(this).to({right:-134},CommonConfig.panelTweenDuration).onComplete(function(){e.prototype.close.call(t)}).start()},a.prototype.updateShowId=function(){this._showIdArr=[],this._hiddenIdArr=[];for(var t=0,e=this._enterIdArr.length;t<e;t++){var i=this._enterIdArr[t];n.instance.getFuncNeedShow(i)?this._showIdArr.push(i):this._hiddenIdArr.push(i)}},a.prototype.showBtnHandler=function(){this.updateShowId();for(var t=0,e=this._showIdArr.length;t<e;t++){var i=this._showIdArr[t];if(!this._btnTab[i]){var n=new s.EnterItem(i);this.addChild(n),this._btnTab[i]=n}this._btnTab[i].pos(0,65*t),this._btnTab[i].visible=!0}for(t=0,e=this._hiddenIdArr.length;t<e;t++)i=this._hiddenIdArr[t],this._btnTab[i]&&(this._btnTab[i].visible=!1);GlobalData.dispatcher.event("ACTION_PREVIEW_RESIZE_UI")},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._showIdArr.length=0,this._showIdArr=null,this._hiddenIdArr.length=0,this._hiddenIdArr=null,this._enterIdArr.length=0,this._enterIdArr=null,this._btnTab=null,this._tween&&(this._tween.stop(),this._tween=null),e.prototype.destroy.call(this,t)},o=a,s.RightBottomPanel=o}(modules=modules||{}),function(e){var s,i,t,n,o,a,r,l,h;function c(){var t=i.call(this)||this;return t._selectIndex=0,t}s=e.email||(e.email={}),t=ui.EmailViewUI,n=Laya.Handler,o=e.bag.BagUtil,a=e.common.SimpleList,r=e.vip.VipModel,l=e.config.BlendCfg,i=t,__extends(c,i),c.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=a.create(s.EmailItem,621,154),this._list.width=622,this._list.height=856,this._list.x=0,this._list.y=0,this.itemPanel.addChild(this._list),this.centerX=0,this.centerY=0,this._capacityArr=l.instance.getCfgById(203)[1]},c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this,t)},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.deleteBtn,this,this.deletePopUp),this.onAutoClick(this.getBtn,this,this.getHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoGlobalEvt("EMAIL_LIST_UPDATE",this,this.updateView),this.onAutoGlobalEvt("VIP_UPDATE",this,this.updateVip)},c.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView(),this.updateVip()},c.prototype.updateView=function(){var t=this._capacityArr[r.instance.vipLevel]||this._capacityArr[this._capacityArr.length-1],e=s.EmailModel.instance.getEmailCount();if(0<e){this.emailTxt.visible=this.countTxt.visible=this.getBtn.visible=this._list.visible=this.deleteBtn.visible=!0;var i=this._list.scrollPos,n=s.EmailModel.instance.emailA1Data.concat(s.EmailModel.instance.emailB1Data,s.EmailModel.instance.emailA2Data,s.EmailModel.instance.emailB2Data,s.EmailModel.instance.emailA3Data);this._list.datas=n,this.zanWuImg.visible=!n||0==n.length,this._list.scroll(i),this.countTxt.text=e+"/"+t,this.countTxt.color=t<=e?"#ff0000":"#499b49"}else this.zanWuImg.visible=!0,this.emailTxt.visible=this.countTxt.visible=this.getBtn.visible=this._list.visible=this.deleteBtn.visible=!1},c.prototype.updateVip=function(){var t=s.EmailModel.instance.getEmailCount();if(0<t){var e=this._capacityArr[r.instance.vipLevel]||this._capacityArr[this._capacityArr.length-1];this.countTxt.text=t+"/"+e,this.countTxt.color=e<=t?"#ff0000":"#499b49"}},c.prototype.deletePopUp=function(){var t=n.create(this,this.deleteHandler);e.common.CommonUtil.alert("提示","是否删除所有已读邮件？<br/><span>(不删除含有附件的邮件)</span>",[t],void 0,void 0,!0,void 0,8)},c.prototype.deleteHandler=function(){s.EmailCtrl.instance.oneKeyDelete()},c.prototype.getHandler=function(){for(var t=!1,e=s.EmailModel.instance.emailA1Data,i=0;i<e.length;i++)if(2===e[i][4]){t=!0;break}if(!t)for(e=s.EmailModel.instance.emailA2Data,i=0;i<e.length;i++)if(2===e[i][4]){t=!0;break}t&&o.checkNeedSmeltTip()||s.EmailCtrl.instance.getAwardAll()},c.prototype.selectHandler=function(){this._selectIndex=this._list.selectedIndex},h=c,s.EmailPanel=h}(modules=modules||{}),function(o){var r,e,t,i,n,s,a,l,h,c,p;function u(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastY=0,t}r=o.email||(o.email={}),t=Laya.Event,i=Laya.Rectangle,n=o.common.CustomList,s=Laya.List,a=ui.EmailDetailViewUI,l=o.bag.BaseItem,h=o.common.CustomClip,c=o.bag.BagUtil,e=a,__extends(u,e),u.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._listEx=this.destroyElement(this._listEx),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},u.prototype.initialize=function(){e.prototype.initialize.call(this),this._listEx=n.create("v",-1,0,460,152,o.bag.BaseItemEx,10,4),this._listEx.spaceX=10,this.itemPanel.addChild(this._listEx),this._list=new s,this._list.vScrollBarSkin="",this._list.itemRender=l,this._list.repeatX=4,this._list.spaceX=10,this._list.spaceY=0,this._list.width=430,this._list.height=152,this._list.x=-1,this._list.y=0,this.itemPanel.addChild(this._list),this._h=193,this.emailHTML.scrollRect=new i(0,0,this.emailHTML.width,this._h),this._btnClip=h.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,231,660),CommonUtil.setHTMLPro(this.emailHTML,"#2c476a","SimHei",24)},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getHandler),this.onAutoEvt(this.emailHTML,"mousedown",this,this.downHandler),this.onAutoEvt(this.emailHTML,"mousewheel",this,this.wheelHandler),this.onAutoEvt(this.emailHTML,"link",this,this.linkHandler),this.onAutoGlobalEvt("EMAIL_SINGLE_UPDATE",this,this.emailUpdate)},u.prototype.linkHandler=function(t){t&&(WindowManager.instance.openByActionId(+t),WindowManager.instance.close(21))},u.prototype.downHandler=function(){this._lastY=this.emailHTML.mouseY,Laya.stage.on(t.MOUSE_MOVE,this,this.moveHandler),Laya.stage.on(t.MOUSE_UP,this,this.upHandler),Laya.stage.on(t.MOUSE_OUT,this,this.upHandler)},u.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scrollY(e)},u.prototype.moveHandler=function(){var t=this._lastY-this.emailHTML.mouseY;this.scrollY(t),this._lastY=this.emailHTML.mouseY},u.prototype.upHandler=function(){Laya.stage.off(t.MOUSE_MOVE,this,this.moveHandler),Laya.stage.off(t.MOUSE_UP,this,this.upHandler),Laya.stage.off(t.MOUSE_OUT,this,this.upHandler)},u.prototype.scrollY=function(t){if(!(this.emailHTML.height<this._h)){var e=this.emailHTML.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.emailHTML.height-this._h&&(e.y=this.emailHTML.height-this._h),this.emailHTML.scrollRect=e}},u.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),r.EmailCtrl.instance.readEmail(t),this.emailHTML.scrollRect.y=0},u.prototype.onClosed=function(){e.prototype.onClosed.call(this),h.thisStop(this._btnClip),r.EmailModel.instance.newShowEmail=null},u.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.emailUpdate()},u.prototype.emailUpdate=function(){if(this._emailInfo=r.EmailModel.instance.newShowEmail,this._emailInfo)if(this.emailHTML.innerHTML=""+this._emailInfo[2],this.emailHTML._height=this.emailHTML.contextHeight,this._uuid=this._emailInfo[0],this.emailTime.text=this.timeHandler(this._emailInfo[4]),this._emailInfo[6]&&0<this._emailInfo[6].length){this._list.visible=!0,this.tipsImg.visible=!1;for(var t=this._emailInfo[6],e=new Array,i=0,n=t.length;i<n;i++){var s=t[i];e[i]=[s[0],s[1],0,null]}var o=this._emailInfo[9];if(o&&1<o){var a=[];for(i=0,n=e.length;i<n;i++)a.push([e[i],o+"倍"]);this._listEx.datas=a,this._listEx.visible=!0,this._list.visible=!1}else this._list.array=e,this._listEx.visible=!1,this._list.visible=!0;2==this._emailInfo[5]?(this.getBtn.visible=!1,this.hasGet.visible=!0,h.thisStop(this._btnClip)):(this.getBtn.visible=!0,this.hasGet.visible=!1,h.thisPlay(this._btnClip)),this.getBtn.mouseEnabled=!0,this.getBtn.gray=!1}else this._listEx.visible=this.hasGet.visible=this._list.visible=!1,this.getBtn.visible=!0,this.getBtn.mouseEnabled=!1,this.getBtn.gray=!0,this.tipsImg.visible=!0,h.thisStop(this._btnClip)},u.prototype.getHandler=function(){var t=!1,e=this._list.array;if(e&&e.length)for(var i=0,n=e.length;i<n;i++){var s=e[i][0];if(5===o.common.CommonUtil.getItemTypeById(s)){t=!0;break}}if(!t||!c.checkNeedSmeltTip()){if(this._emailInfo=r.EmailModel.instance.newShowEmail,!this._emailInfo)return;this._emailInfo[0]&&r.EmailCtrl.instance.getAward(this._emailInfo[0])}},u.prototype.timeHandler=function(t){var e=new Date(t),i=e.getMonth()+1;return[e.getFullYear(),"-",this.formateData(i),"-",this.formateData(e.getDate())," ",this.formateData(e.getHours()),":",this.formateData(e.getMinutes()),":",this.formateData(e.getSeconds())].join("")},u.prototype.formateData=function(t){return t<10?"0"+t.toString():t.toString()},p=u,r.EmailDetailPanel=p}(modules=modules||{}),function(t){var e,l,i,n,s;function o(){return l.call(this)||this}e=t.commonAlert||(t.commonAlert={}),i=ui.CommonTxtAlertUI,n=Laya.Handler,l=i,__extends(o,l),o.prototype.initialize=function(){l.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24,"left","middle"),this.contentTxt.style.lineHeight=28,this.contentTxt.mouseEnabled=!1,this._minHWithBtn=152,this._minHWithoutBtn=232,this._hasBtn=!0},o.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.noticeBtn,this,this.noticeHandler),this.onAutoClick(this.okBtn,this,this.okHandler),this.onAutoClick(this.cancelBtn,this,this.cancelHandler),Laya.timer.loop(1e3,this,this.countDownHandler)},o.prototype.offEvt=function(){l.prototype.offEvt.call(this),Laya.timer.clear(this,this.countDownHandler)},o.prototype.countDownHandler=function(){if(!(this._countDown<0)){var t=this.dataSource[2];if(t){var e=t[1];this.okBtn.label=(e||"确定")+"("+this._countDown+")"}0!=this._countDown?this._countDown--:this.okHandler()}},o.prototype.close=function(){l.prototype.close.call(this),this._closeHandler&&this._closeHandler instanceof n&&this._closeHandler.run()},o.prototype.okHandler=function(){l.prototype.close.call(this),this._okHandler&&this._okHandler instanceof n&&this._okHandler.run()},o.prototype.cancelHandler=function(){l.prototype.close.call(this),this._cancelHandler&&this._cancelHandler instanceof n&&this._cancelHandler.run()},o.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),"FANTIAN"===(this.dataSource=t)[0]?(this.contentTxt.style.leading=10,this.title="梵天之力",this.contentTxt.style.align="center"):(this.contentTxt.style.align="left",this.contentTxt.style.leading=0,this.title=t[0]),this._countDown=t[10];var e=t[2];if(e){var i=e[0];this._okHandler=i;var n=e[1];this.okBtn.label=n||"确定"}var s=t[3];if(s){var o=s[0];this._cancelHandler=o;var a=s[1];this.cancelBtn.label=a||"取消",s[2]&&this.onAutoClick(this.closeBtn,this,this.cancelHandler)}var r=t[6];this.tipTxt.visible=!1,e&&s?(this.okBtn.visible=this.cancelBtn.visible=!0,this.okBtn.x=356):r?(this.okBtn.visible=this.cancelBtn.visible=!1,this.tipTxt.visible=!0,this.tipTxt.text=r[0],this.tipTxt.color=r[1]):e&&!s?(this.okBtn.visible=!0,this.cancelBtn.visible=!1,this.okBtn.x=236):e||s||(this.okBtn.visible=this.cancelBtn.visible=!1),this._hasBtn=!!e||!!s||!!r,this._align=t[9],this.contentTxt.style.align=t[9],this.contentTxt.style.valign=this._valign=t[11]||"middle",this.hintTxt.visible=this.closeOnSide=t[5],"FANTIAN"===t[0]&&(this.contentTxt.style.align="center",this._align="center",this.contentTxt.width=this.width,this.contentTxt.x=0),this.content=t[1],this._noticeId=t[7],this.noticeBtn.visible=this.noticeTxt.visible=0!==this._noticeId,this.noticeBtn.selected=GlobalData.noMoreNoticeArr[this._noticeId],this.noticeTxt.text=t[8]||"本次登录不再提示",this.noticeBtn.x=this.width-this.noticeBtn.width-this.noticeTxt.textWidth>>1,this.noticeTxt.x=this.noticeBtn.x+this.noticeBtn.width,this._closeHandler=t[4]},Object.defineProperty(o.prototype,"title",{set:function(t){this.titleTxt.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"content",{set:function(t){this.contentTxt.innerHTML=t;var e=this.contentTxt.contextHeight;if("center"!==this._align){var i=this.contentTxt.contextWidth;this.contentTxt.x=76+(512-i>>1)}else this.contentTxt.x=76;var n=this._hasBtn?this._minHWithBtn:this._minHWithoutBtn;e<n-36?(this.height=this.bgImg.height=404,this.borderImg.height=n,this.contentTxt.y="middle"===this._valign?110+(n-e>>1):this.borderImg.y+18):(this.borderImg.height=e+36,this.height=this.bgImg.height=this.borderImg.height+(this._hasBtn?252:172),this.contentTxt.y=this.borderImg.y+18),this.hintTxt.y=this.bgImg.height+35},enumerable:!0,configurable:!0}),o.prototype.noticeHandler=function(){0!==this._noticeId&&(this.noticeBtn.selected=!this.noticeBtn.selected,GlobalData.noMoreNoticeArr[this._noticeId]=this.noticeBtn.selected)},s=o,e.CommonTxtAlert=s}(modules=modules||{}),function(t){var e,o,i;function n(){this.init()}e=t.config||(t.config={}),o=t.common.CommonUtil,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._skillTable={},this._lvs=[],this._skillIds=new Array,this._cfgs=GlobalData.getConfig("pet_feed");for(var t=0;t<this._cfgs.length;t++){var e=this._cfgs[t],i=e[0];if(this._lvs.push(i),(this._table[i]=e)[3]&&0<e[3].length){var n=o.getSkillPureIdById(e[3][0]),s=this._skillTable[n];s||(s={},this._skillIds.push(n)),s[e[3][1]]=e,this._skillTable[n]=s}}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skillIds",{get:function(){return this._skillIds},enumerable:!0,configurable:!0}),n.prototype.getPetFeedCfgByLv=function(t){var e=this._table[t];return e||null},n.prototype.getLvTableBySkillId=function(t){return this._skillTable[t]},n.prototype.getNextSkillCfgByLv=function(t){for(var e=t,i=this._lvs.length;e<i;e++){var n=this._lvs.indexOf(e);if(-1==n)return null;var s=this._cfgs[n][3];if(s&&0<s.length){if(this._cfgs[n][0]==t)continue;return this.cfgs[n]}}},i=n,e.PetFeedCfg=i}(modules=modules||{}),function(t){var s,a,u,e;function i(){this.init()}s=t.config||(t.config={}),a=t.player.PlayerModel,u=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._typeTable={};for(var t=0,e=GlobalData.getConfig("ride_refine");t<e.length;t++){var i=e[t],n=i[0];this._typeTable[n]||(this._typeTable[n]=[]),this._typeTable[n].push(i)}this._attrIndices=s.BlendCfg.instance.getCfgById(22007)[1]},i.prototype.getDataByIdLvField=function(t,e,i){var n=this._typeTable[t];if(!n)throw new Error("类型不存在!"+t);e<0&&(e=0);var s=n.length,o=n[s-1][1];if(o<e)return null;if(1===i){for(var a=0;a<s;a++)if(e<=(p=n[a][1]))return n[a][2]}else if(0===i){var r=0;for(a=0;a<s;a++){if(!(e<=(p=n[a][1])))return r+=n[a][3]*(e-p);r+=n[a][3]*e}}else if(3===i){var l=u.calcAttrs(n[0][5],0),h=0;for(a=0;a<s;a++){if(e<=(p=n[a][1])){var c=n[a-1]?e-n[a-1][1]:e;return u.calcAttrs(l,c,n[a][5],l),l}u.calcAttrs(l,p-h,n[a][5],l),h=p}}else{if(4===i)return o;if(6===i)for(a=0;a<s;a++){var p;if(e<(p=n[a][1]))return n[a][4]}}},i.prototype.getMaxLvByLv=function(t,e){for(var i=this._typeTable[t],n=i.length,s=0;s<n;s++){var o=i[s];if(a.instance.level<o[4])return o[1];if(e<o[1])return o[1]}return i[n-1][1]},i.prototype.has=function(t,e){if(!this._typeTable[t])return!1;if(null!=e){if(e<0)return!1;if(this._typeTable[t][this._typeTable[t].length-1][1]<e)return!1}return!0},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),e=i,s.RideRefineCfg=e}(modules=modules||{}),function(t){var e,o,i;function n(){this.init()}e=t.config||(t.config={}),o=t.common.CommonUtil,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._skillTable={},this._lvs=[],this._skillIds=new Array,this._cfgs=GlobalData.getConfig("ride_feed");for(var t=0;t<this._cfgs.length;t++){var e=this._cfgs[t],i=e[0];if(this._lvs.push(i),(this._table[i]=e)[3]&&0<e[3].length){var n=o.getSkillPureIdById(e[3][0]),s=this._skillTable[n];s||(s={},this._skillIds.push(n)),s[e[3][1]]=e,this._skillTable[n]=s}}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skillIds",{get:function(){return this._skillIds},enumerable:!0,configurable:!0}),n.prototype.getPetFeedCfgByLv=function(t){var e=this._table[t];return e||null},n.prototype.getLvTableBySkillId=function(t){return this._skillTable[t]},n.prototype.getNextSkillCfgByLv=function(t){for(var e=t,i=this._lvs.length;e<i;e++){var n=this._lvs.indexOf(e);if(-1==n)return null;var s=this._cfgs[n][3];if(s&&0<s.length){if(this._cfgs[n][0]==t)continue;return this.cfgs[n]}}},i=n,e.RideFeedCfg=i}(modules=modules||{}),function(t){var s,o,e;function i(){this.init()}s=t.config||(t.config={}),o=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.showIds=[],this._attrIndices=[],this._tab={},this._itemIdToShowId={};for(var t=GlobalData.getConfig("ride_magicshow"),e=0,i=t.length;e<i;e++){var n=t[e][0];-1===this.showIds.indexOf(n)&&this.showIds.push(n),this._tab[n]=t[e],this._itemIdToShowId[t[e][2][0]]=n}this._attrIndices=s.BlendCfg.instance.getCfgById(22008)[1]},i.prototype.has=function(t,e){if(!this._tab[t])return!1;if(null!=e){if(e<0)return!1;if(this._tab[t][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){if(!this._tab[t])throw new Error("id不存在!"+t);e<0&&(e=0);var n=this._tab[t][1];if(n<e)return null;if(1===i)return this._tab[t][2];if(0===i)return this._tab[t][3]*e;if(2===i)return this._tab[t][4];if(3!==i)return 4===i?n:void 0;var s=this._tab[t][5];return o.calcAttrs(s,e)},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),i.prototype.getItemIdBayShowId=function(t){return this._itemIdToShowId[t]},e=i,s.RideMagicShowCfg=e}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._table2={},this._skillTable={},this._skillIds=new Array,this._showIds=[],this._showStars=[],this._cfgs=GlobalData.getConfig("ride_rank");for(var t=0;t<this._cfgs.length;t++){var e=this._cfgs[t];if((this._table[e[0]]=e)[4]&&0<e[4].length){var i=e[4][0];this._skillTable[i]=e,this._skillIds.push(i)}e[3]&&(this._showIds.push(e[3]),this._showStars.push(e[0]),this._table2[e[3]]=this._cfgs[t+1])}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skillIds",{get:function(){return this._skillIds},enumerable:!0,configurable:!0}),n.prototype.getPetRankCfgBySt=function(t){var e=this._table[t];return e||null},n.prototype.getCfgBySkillId=function(t){return this._skillTable[t]},Object.defineProperty(n.prototype,"showIds",{get:function(){return this._showIds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showStars",{get:function(){return this._showStars},enumerable:!0,configurable:!0}),n.prototype.getActivateCfgByShowId=function(t){return this._table2[t]},i=n,e.RideRankCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._magicSelectId=this._rideMagicSelectId=this._magicShowId=this._rideMagicShowId=-1}e=t.illusion||(t.illusion={}),Object.defineProperty(n,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"magicShowId",{get:function(){return this._magicShowId},set:function(t){this._magicShowId=t,GlobalData.dispatcher.event("PET_HUANHUA_SHOWID")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rideMagicShowId",{get:function(){return this._rideMagicShowId},set:function(t){this._rideMagicShowId=t,GlobalData.dispatcher.event("RIDE_HUANHUA_SHOWID")},enumerable:!0,configurable:!0}),n._instance=new n,i=n,e.IllusionModel=i}(modules=modules||{}),function(i){var t,e,_,v,I,b,C,T,w,r,n;function s(){this._dic2=new e,this._huanhuaActId=-1,this.noTipFlag=!1,this.autoBuyFlag=!1}t=i.ride||(i.ride={}),e=Laya.Dictionary,_=i.redPoint.RedPointCtrl,v=i.config.RideFeedCfg,I=i.bag.BagModel,b=i.config.RideRefineCfg,C=i.config.RideMagicShowCfg,T=i.player.PlayerModel,w=i.config.RideRankCfg,r=i.config.RideFazhenCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fazhenId",{get:function(){return this._fazhenId},set:function(t){this._fazhenId=t,GlobalData.dispatcher.event("WEAPONFZCHANGE_HUANHUA")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fighting",{get:function(){return this._fighting},set:function(t){this._fighting=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"attr",{get:function(){return this._attr},set:function(t){this._attr=t},enumerable:!0,configurable:!0}),s.prototype.InitializeFaZhen=function(t){this._fazhen=t,this._dic2.clear();for(var e=this._fazhen[1],i=0,n=e.length;i<n;i++)this._dic2.set(e[i][0],e[i]);this.fazhenId=this._fazhen[0],this.fighting=this._fazhen[2],this._attr=this._fazhen[3]},Object.defineProperty(s.prototype,"huanhuaList",{get:function(){return this._dic2},enumerable:!0,configurable:!0}),s.prototype.popActivateAlert=function(){null==this._dic2.get(this._huanhuaActId)?WindowManager.instance.openDialog(92,[this._huanhuaActId,8]):1==this._dic2.get(this._huanhuaActId)[1]&&WindowManager.instance.openDialog(92,[this._huanhuaActId,8])},s.prototype.huanhuaRedPoint=function(){for(var t=3;t<=5;t++)if(this.qualityType(t))return void _.instance.setRPProperty("weaponFazhenJipinRP",!0);_.instance.setRPProperty("weaponFazhenJipinRP",!1)},s.prototype.qualityType=function(t){var e=r.instance.getSkinCfgByType(t);if(e)for(var i=0,n=e.length;i<n;i++){var s=0,o=e[i];this._dic2.get(o)&&(s=this._dic2.get(o)[1]);var a=this.judge(o,s);if(a)return a}return!1},s.prototype.qualityActivation=function(t){var e=r.instance.getSkinCfgByType(t);if(e)for(var i=0,n=e.length;i<n;i++){var s=e[i];if(0==this.fazhenId){if(this._dic2.get(s))return i}else if(this.fazhenId==s)return i}return-1},s.prototype.judge=function(t,e){var i=r.instance.getDataByIdLvField(t,e,1);return!!r.instance.has(t,e+1)&&I.instance.getItemCountById(i[0])>=i[1]},Object.defineProperty(s.prototype,"feed",{get:function(){return this._feed},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rank",{get:function(){return this._rank},set:function(t){var e=t[0];e%10==1&&e>(this._rank?this._rank[0]:0)&&1!=e&&WindowManager.instance.openDialog(92,[i.illusion.IllusionModel.instance.rideMagicShowId,5]),this._rank=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"refine",{get:function(){return this._refine},enumerable:!0,configurable:!0}),s.prototype.getRideInfoReply=function(t){this._feed=t[0],this._rank=t[1],this.magicShow=t[2],this._refine=t[3],this.InitializeFaZhen(t[4]),GlobalData.dispatcher.event("RIDE_UPDATE"),this.checkRedPoint()},s.prototype.updateRideInfo=function(t){this._feed=t[0],this.rank=t[1],this.magicShow=t[2],this._refine=t[3],this.InitializeFaZhen(t[4]),GlobalData.dispatcher.event("WEAPONFZHUANHUA_UPDATA"),GlobalData.dispatcher.event("RIDE_UPDATE"),this.checkRedPoint()},s.prototype.feedRideReply=function(t){this._feed[0]=t[1],this._feed[1]=t[2],GlobalData.dispatcher.event("RIDE_UPDATE"),this.checkRedPoint()},s.prototype.rankRideReply=function(t){this._rank[1]=t[2],GlobalData.dispatcher.event("RIDE_UPDATE"),this.checkRedPoint()},Object.defineProperty(s.prototype,"magicShow",{get:function(){return this._magicShow},set:function(t){if(this._magicShow=t,this._showTable=this._showTable||{},t)for(var e=this._magicShow[0],i=0,n=e.length;i<n;i++)this._showTable[e[i][0]]=e[i]},enumerable:!0,configurable:!0}),s.prototype.getShowInfoById=function(t){return this._showTable?this._showTable[t]:null},s.prototype.IShave=function(t){if(4001==t)return!0;for(var e=0;e<this.magicShow.length;e++)for(var i=this._magicShow[0],n=0,s=i.length;n<s;n++)if(i[n][0]==t)return!0;return!1},s.prototype.checkRedPoint=function(){this.huanhuaRedPoint();var t=!1;if(this._feed&&this._feed[2])for(var e=0,i=this._feed[2].length;e<i;e++)if(0<this._feed[2][e][2]){t=!0;break}if(_.instance.setRPProperty("weaponFeedSkillRP",t),t=!1,this._rank&&this._rank[3])for(e=0,i=this._rank[3].length;e<i;e++)if(0<this._rank[3][e][2]){t=!0;break}_.instance.setRPProperty("weaponRankSkillRP",t),this.updateBag()},s.prototype.updateBag=function(){if(this.feed){if(!(h=this.feed[0]))return;var t=this.feed[1],e=v.instance.getPetFeedCfgByLv(h);if(v.instance.getPetFeedCfgByLv(h+1)){var i=e[1]-t,n=e[2],s=Math.ceil(i/n[2]),o=I.instance.getItemCountById(n[0])>=s;_.instance.setRPProperty("weaponFeedMatRP",o)}else _.instance.setRPProperty("weaponFeedMatRP",!1)}if(this.rank){if(-1==(h=this.rank[0]))return;t=this.rank[1],e=w.instance.getPetRankCfgBySt(h),w.instance.getPetRankCfgBySt(h+1)?(i=e[1]-t,n=e[2],s=Math.ceil(i/n[2]),_.instance.setRPProperty("weaponRankMatRP",I.instance.getItemCountById(n[0])>=s)):_.instance.setRPProperty("weaponRankMatRP",!1)}if(this._refine){for(var a=this._refine[0],r=!1,l=0;l<4;l++){for(var h=0,c=l,p=0,u=a.length;p<u;p++){var d=a[p];if(d[0]===l){h=d[1];break}}var m=b.instance.getDataByIdLvField(l,h,1);if(I.instance.getItemCountById(m[0])>=m[1]&&b.instance.getDataByIdLvField(l,h,6)<=T.instance.level&&h!=b.instance.getMaxLvByLv(c,h)){r=!0;break}}_.instance.setRPProperty("weaponRefineMaterialRP",r)}if(this._magicShow){var f=C.instance.showIds;for(p=0,u=f.length;p<u;p++)if(h=0,this._showTable[f[p]]&&(h=this._showTable[f[p]][1]),C.instance.has(f[p],h+1)){var g=C.instance.getDataByIdLvField(f[p],h,1),y=g[0];if(g[1]<=I.instance.getItemCountById(y))return void _.instance.setRPProperty("weaponIllusionRP",!0)}_.instance.setRPProperty("weaponIllusionRP",!1)}},s.prototype.haveItem=function(t,e){return void 0===e&&(e=!0),!(!i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(126)&&e||!r.instance.getItemIdBayShowId(t)||this.getItemIdBayShowId(t))},s.prototype.getItemIdBayShowId=function(t){var e=r.instance.getItemIdBayShowId(t);return!!e&&!!this._dic2.get(e)},s.prototype.panDuanpingzhi=function(t){var e=r.instance.getItemIdBayShowId(t);if(e){var i=r.instance.getDataByIdLvField(e,Number.MIN_VALUE,5);return r.instance.qualitys.indexOf(i)}return-1},s.prototype.haveItemHh=function(t,e){return void 0===e&&(e=!0),!(!i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(13)&&e||!C.instance.getItemIdBayShowId(t)||this.getItemIdBayShowIdHh(t))},s.prototype.getItemIdBayShowIdHh=function(t){var e=C.instance.getItemIdBayShowId(t);return!!e&&!!this.getShowInfoById(e)},n=s,t.RideModel=n}(modules=modules||{}),function(t){var n,e,i,s,o,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}n=t.ride||(t.ride={}),i=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.illusion.IllusionModel,a=t.common.CommonUtil,e=i,__extends(l,e),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16777716,this.getRideInfoReply),this.subscribe(16777718,this.updateRideInfo),this.subscribe(16777717,this.feedRideReply),this.subscribe(16777720,this.rankRideReply),this.subscribe(16777719,this.addRideSkillLevelReply),this.subscribe(16777721,this.changeRideShowReply),this.subscribe(16777724,this.riseRideRefineReply),this.subscribe(16777725,this.magicReply),this.subscribe(16777726,this.changeMagicReply),this.onGlobal("BAG_DATA_GOT",this.bagUpdateHandler),this.onGlobal("BAG_UPDATE",this.bagUpdateHandler),this.onGlobal("PLAYER_UPDATE_LEVEL",this.bagUpdateHandler),FuncOpenCtrl.instance.registeFuncReq(12,2097452),this.getRideInfo()},l.prototype.bagUpdateHandler=function(){n.RideModel.instance.checkRedPoint(),GlobalData.dispatcher.event("RIDE_UPDATE")},l.prototype.getRideInfo=function(){this.publish(2097452,null)},l.prototype.getRideInfoReply=function(t){o.instance.rideMagicShowId=t[5],n.RideModel.instance.getRideInfoReply(t)},l.prototype.updateRideInfo=function(t){o.instance.rideMagicShowId=t[5],n.RideModel.instance.updateRideInfo(t)},l.prototype.feedRide=function(){this.publish(2097453,null)},l.prototype.feedRideReply=function(t){0===t[0]&&n.RideModel.instance.feedRideReply(t)},l.prototype.rankRide=function(){this.publish(2097454,[n.RideModel.instance.autoBuyFlag?1:0])},l.prototype.rankRideReply=function(t){var e=t[0];if(0===e)n.RideModel.instance.rankRideReply(t);else if(12012==e){var i=n.RideModel.instance.rank;!i||i[0]===t[1]&&i[1]===t[2]?a.goldNotEnoughAlert():n.RideModel.instance.rankRideReply(t)}else a.noticeError(e)},l.prototype.addRideSkillLevel=function(t,e){this.publish(2097455,[t,e])},l.prototype.addRideSkillLevelReply=function(t){},l.prototype.changeRideShow=function(t){this.publish(2097456,[t])},l.prototype.changeRideShowReply=function(t){t[0]?a.noticeError(t[0]):(s.instance.addNotice("更换成功"),o.instance.rideMagicShowId=t[1],GlobalData.dispatcher.event("RIDE_UPDATE"))},l.prototype.riseRideRefine=function(t){this.publish(2097459,[t])},l.prototype.riseRideRefineReply=function(t){var e=t[0];0===e?GlobalData.dispatcher.event("PET_UP_REFINE"):a.noticeError(e)},l.prototype.magicLev=function(t){this.publish(2097460,[t])},l.prototype.changeMagic=function(t){this.publish(2097461,[t])},l.prototype.magicReply=function(t){t[0]||(n.RideModel.instance.popActivateAlert(),GlobalData.dispatcher.event("WEAPONFZHUANHUA_UPDATA"),n.RideModel.instance.huanhuaRedPoint()),a.noticeError(t[0])},l.prototype.changeMagicReply=function(t){a.noticeError(t[0]),t[0]||s.instance.addNotice("更换成功"),n.RideModel.instance.fazhenId=t[1],GlobalData.dispatcher.event("SHOW_MASTER_CHANGE")},r=l,n.RideCtrl=r}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("fashion_feed"),this._skillPureIds=[],this._skillLvTable={};for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t][2];if(0<i.length){var n=Math.floor(1e-4*i[0]);1===i[1]&&this._skillPureIds.push(n),this._skillLvTable[n]||(this._skillLvTable[n]={}),this._skillLvTable[n][i[1]]=this._cfgs[t]}}},Object.defineProperty(n.prototype,"skillPureIds",{get:function(){return this._skillPureIds},enumerable:!0,configurable:!0}),n.prototype.getCfgByLevel=function(t){return this._cfgs[t-1]},n.prototype.getUpSkillCfgByLv=function(t){for(var e=t,i=this._cfgs.length;e<i;e++){var n=this._cfgs[e];if(n&&0<n[2].length)return n}return null},n.prototype.getLvTableBySkillId=function(t){return this._skillLvTable[t]},i=n,e.FashionFeedCfg=i}(modules=modules||{}),function(t){var s,u,e;function i(){this.typeArr=[],this.init()}s=t.config||(t.config={}),u=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._typeTable={};for(var t=0,e=GlobalData.getConfig("fashion_refine");t<e.length;t++){var i=e[t],n=i[0];-1===this.typeArr.indexOf(n)&&this.typeArr.push(n),this._typeTable[n]||(this._typeTable[n]=[]),this._typeTable[n].push(i)}this._attrIndices=s.BlendCfg.instance.getCfgById(22013)[1]},i.prototype.getDataByIdLvField=function(t,e,i){var n=this._typeTable[t];if(!n)throw new Error("类型不存在!"+t);e<0&&(e=0);var s=n.length,o=n[s-1][1];if(o<e)return null;if(1===i){for(var a=0;a<s;a++)if(e<=(p=n[a][1]))return n[a][2]}else if(0===i){var r=0;for(a=0;a<s;a++){if(!(e<=(p=n[a][1])))return r+=n[a][3]*(e-p);r+=n[a][3]*e}}else if(3===i){var l=u.calcAttrs(n[0][5],0),h=0;for(a=0;a<s;a++){if(e<=(p=n[a][1])){var c=n[a-1]?e-n[a-1][1]:e;return u.calcAttrs(l,c,n[a][5],l),l}u.calcAttrs(l,p-h,n[a][5],l),h=p}}else{if(4===i)return o;if(6===i)for(a=0;a<s;a++){var p;if(e<(p=n[a][1]))return n[a][4]}}},i.prototype.getMaxLvByLv=function(t,e){for(var i=this._typeTable[t],n=i.length,s=0;s<n;s++){var o=i[s];if(PlayerModel.instance.level<o[4])return o[1];if(e<o[1])return o[1]}return i[n-1][1]},i.prototype.has=function(t,e){if(!this._typeTable[t])return!1;if(null!=e){if(e<0)return!1;if(this._typeTable[t][this._typeTable[t].length-1][1]<e)return!1}return!0},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),e=i,s.FashionRefineCfg=e}(modules=modules||{}),function(i){var t,y,_,v,h,I,e;function n(){}t=i.fashion||(i.fashion={}),y=i.bag.BagModel,_=i.redPoint.RedPointCtrl,v=i.config.FashionFeedCfg,h=i.config.FashionMagicShowCfg,I=i.config.FashionRefineCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fashionInfo",{get:function(){return this._fashionInfo},set:function(t){this._fashionInfo=t,GlobalData.dispatcher.event("FASHION_INFO_UPDATE"),this.checkRP()},enumerable:!0,configurable:!0}),n.prototype.changeMagicShow=function(t){this._fashionInfo&&(this._fashionInfo[3]=t,GlobalData.dispatcher.event("FASHION_INFO_UPDATE"),GlobalData.dispatcher.event("SHOW_MASTER_CHANGE"))},n.prototype.getMagicShowInfoById=function(t){var e;if(this._fashionInfo)for(var i=this._fashionInfo[4],n=0,s=i.length;n<s;n++)if(i[n][0]===t){e=i[n];break}return e},n.prototype.checkRP=function(){if(this._fashionInfo&&y.instance.bagInited){var t=this._fashionInfo[0];if(t){var e=v.instance.getCfgByLevel(t)[1],i=y.instance.getItemCountById(e[0]);_.instance.setRPProperty("fashionShengJiMatRP",v.instance.getCfgByLevel(t+1)&&i>=e[1]),this._upLevaeRp=v.instance.getCfgByLevel(t+1)&&i>=e[1],GlobalData.dispatcher.event("FASHION_UPLEVEL");for(var n=this._fashionInfo[1],s=!1,o=0,a=n.length;o<a;o++)if(0<n[o][2]){s=!0;break}_.instance.setRPProperty("fashionShengJiRP",s),this.huanhuaRedPoint();var r=I.instance.typeArr,l=this._fashionInfo[7];for(s=!1,o=0,a=r.length;o<a;o++){for(var h=0,c=r[o],p=0,u=l.length;p<u;p++){var d=l[p];if(c===d[0]){h=d[1];break}}var m=I.instance.getDataByIdLvField(c,h,6),f=I.instance.getDataByIdLvField(c,h,1);if(PlayerModel.instance.level>=m){var g=y.instance.getItemCountById(f[0]);if(I.instance.has(c,h+1)&&g>=f[1]){s=!0;break}}}_.instance.setRPProperty("fashionFuHunRP",s)}}},n.prototype.huanhuaRedPoint=function(){for(var t=3;t<=6;t++)if(this.getRPByQuality(t))return void _.instance.setRPProperty("fashionHuanHuaZhenPinRP",!0);_.instance.setRPProperty("fashionHuanHuaZhenPinRP",!1)},n.prototype.getRPByQuality=function(t){for(var e=h.instance.getSkinCfgByType(t),i=!1,n=0,s=e.length;n<s;n++){var o=e[n],a=this.getMagicShowInfoById(o),r=0;if(a&&(r=a[1]),h.instance.has(o,r+1)){var l=h.instance.getDataByIdLvField(o,r,1);if(y.instance.getItemCountById(l[0])>=l[1]){i=!0;break}}}return i},n.prototype.qualityActivation=function(t){for(var e=h.instance.getSkinCfgByType(t),i=0,n=e.length;i<n;i++){var s=e[i],o=this.getMagicShowInfoById(s),a=0;if(o&&(a=o[1]),0==this.curShowId){if(o)return i}else if(s+a+1==this.curShowId)return i}return-1},n.prototype.haveItem=function(t,e){return void 0===e&&(e=!0),!(!i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(175)&&e)&&h.instance.getItemIdBayShowId(t)&&!this.getItemIdBayShowId(t)},n.prototype.getItemIdBayShowId=function(t){var e=h.instance.getItemIdBayShowId(t);return!!e&&!!this.getMagicShowInfoById(e)},n.prototype.panDuanpingzhi=function(t){var e=h.instance.getItemIdBayShowId(t);if(e){var i=h.instance.getDataByIdLvField(e,Number.MIN_VALUE,5);return h.instance.qualitys.indexOf(i)}return-1},Object.defineProperty(n.prototype,"curShowId",{get:function(){return this._fashionInfo?this._fashionInfo[3]:0},enumerable:!0,configurable:!0}),e=n,t.FashionModel=e}(modules=modules||{}),function(s){var t,o,e;function i(){this.init()}t=s.config||(s.config={}),o=Laya.Dictionary,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._table={},this._skillTable={},this._skillIds=new Array,this._dic1=new o,this._cfgs=GlobalData.getConfig("shenbing_feed");for(var t=0;t<this._cfgs.length;t++){this._dic1.set(this._cfgs[t][0],this._cfgs[t]);var e=this._cfgs[t];if((this._table[e[0]]=e)[2]&&0<e[2].length){var i=s.common.CommonUtil.getSkillPureIdById(e[2][0]),n=this._skillTable[i];n||(n={},this._skillIds.push(i)),n[e[2][1]]=e,this._skillTable[i]=n}}},Object.defineProperty(i.prototype,"skillIds",{get:function(){return this._skillIds},enumerable:!0,configurable:!0}),i.prototype.getShengjiLvTableBySkillId=function(t){return this._skillTable[t]},i.prototype.getShengjiCfgByLv=function(t){var e=this._table[t];return e||null},i.prototype.getShengjiSkillCfgByLev=function(t){for(var e=t,i=this._dic1.keys.length;e<i;e++)if(0!=this._dic1.get(this._dic1.keys[e])[2].length){if(this._dic1.get(this._dic1.keys[e])[0]==t)continue;return this._dic1.get(this._dic1.keys[e])}},i.prototype.getActLevBySkillId=function(t){for(var e=0,i=this._dic1.keys.length;e<i;e++)if(this._dic1.get(this._dic1.keys[e])[2][0]==t)return this._dic1.get(this._dic1.keys[e])[0]},i.prototype.getUpLevBySkillIdAndSkillLev=function(t){for(var e=this.getActLevBySkillId(t),i=this._dic1.keys.length;e<i;e++)if(0!=this._dic1.get(this._dic1.keys[e])[2].length&&this._dic1.get(this._dic1.keys[e])[2][0]-t==1)return this._dic1.get(this._dic1.keys[e])[0]},e=i,t.ImmortalsCfg=e}(modules=modules||{}),function(s){var t,o,e;function i(){this.init()}t=s.config||(s.config={}),o=Laya.Dictionary,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._table={},this._skillTable={},this._skillIds=new Array,this._dic1=new o,this._cfgs=GlobalData.getConfig("wing_feed");for(var t=0;t<this._cfgs.length;t++){this._dic1.set(this._cfgs[t][0],this._cfgs[t]);var e=this._cfgs[t];if((this._table[e[0]]=e)[2]&&0<e[2].length){var i=s.common.CommonUtil.getSkillPureIdById(e[2][0]),n=this._skillTable[i];n||(n={},this._skillIds.push(i)),n[e[2][1]]=e,this._skillTable[i]=n}}},Object.defineProperty(i.prototype,"shengjiCfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shengjiSkillIds",{get:function(){return this._skillIds},enumerable:!0,configurable:!0}),i.prototype.getShengjiCfgByLv=function(t){var e=this._table[t];return e||null},i.prototype.getShengjiLvTableBySkillId=function(t){return this._skillTable[t]},i.prototype.getShengjiSkillCfgByLev=function(t){for(var e=t,i=this._dic1.keys.length;e<i;e++)if(0!=this._dic1.get(this._dic1.keys[e])[2].length){if(this._dic1.get(this._dic1.keys[e])[0]==t)continue;return this._dic1.get(this._dic1.keys[e])}},e=i,t.WingCfg=e}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t._panel=new e.SuccessEffect,t}e=t.effect||(t.effect={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){},o.prototype.play=function(t,e,i){void 0===e&&(e=226),void 0===i&&(i=0),this._panel.txtUrl=t,this._panel.setPosY(e,i),LayerManager.instance.addToEffectLayer(this._panel),this._panel.play()},s=o,e.SuccessEffectCtrl=s}(modules=modules||{}),function(t){var r,e,i,l,n;function s(){return e.call(this)||this}r=t.fashion||(t.fashion={}),i=t.core.BaseCtrl,l=t.effect.SuccessEffectCtrl,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16783426,this.getFashionInfoReply),this.subscribe(16783427,this.updateFashionInfo),this.subscribe(16783428,this.feedFashionReply),this.subscribe(16783429,this.addFashionSkillLevelReply),this.subscribe(16783430,this.addFashionMagicShowReply),this.subscribe(16783431,this.changeFashionMagicShowReply),this.subscribe(16783432,this.addFashionRefineReply),this.onGlobal("BAG_UPDATE",this.checkRP),this.onGlobal("BAG_DATA_GOT",this.checkRP),this.onGlobal("PLAYER_UPDATE_LEVEL",this.checkRP),FuncOpenCtrl.instance.registeFuncReq(29,2098852),this.getFashionInfo()},s.prototype.getFashionInfo=function(){this.publish(2103162,null)},s.prototype.getFashionInfoReply=function(t){r.FashionModel.instance.fashionInfo=t},s.prototype.updateFashionInfo=function(t){r.FashionModel.instance.fashionInfo=t},s.prototype.feedFashion=function(){this.publish(2103163,null)},s.prototype.feedFashionReply=function(t){t[0]||l.instance.play("assets/others/tx_jinjiechengong4.png",340),CommonUtil.noticeError(t[0])},s.prototype.addFashionSkillLevel=function(t){this.publish(2103164,[t])},s.prototype.addFashionSkillLevelReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.addFashionMagicShow=function(t){this.publish(2103165,[t]),r.FashionModel.instance.addFashionMagicShowId=t},s.prototype.addFashionMagicShowReply=function(t){var e=t[0];if(0===e){var i=r.FashionModel.instance.fashionInfo;if(i)for(var n=i[4],s=0,o=n.length;s<o;s++){var a=r.FashionModel.instance.addFashionMagicShowId;if(n[s][0]===a){1===n[s][1]?WindowManager.instance.openDialog(92,[a+PlayerModel.instance.occ,9]):1<n[s][1]&&l.instance.play("assets/others/tx_jinjiechengong7.png");break}}}else CommonUtil.noticeError(e)},s.prototype.changeFashionMagicShow=function(t){this.publish(2103166,[t])},s.prototype.changeFashionMagicShowReply=function(t){0===t[0]?r.FashionModel.instance.changeMagicShow(t[1]):CommonUtil.noticeError(t[0])},s.prototype.addFashionRefine=function(t){this.publish(2103167,[t]),r.FashionModel.instance.refineType=t},s.prototype.addFashionRefineReply=function(t){var e=t[0];0===e?GlobalData.dispatcher.event("FASHION_REFINE_SUCCESS"):CommonUtil.noticeError(e)},s.prototype.checkRP=function(){r.FashionModel.instance.checkRP()},n=s,r.FashionCtrl=n}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return i.call(this)||this}e=t.immortals||(t.immortals={}),n=t.core.BaseCtrl,s=t.effect.SuccessEffectCtrl,o=t.notice.SystemNoticeManager,a=t.common.CommonUtil,i=n,__extends(l,i),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16779216,this.updataReply),this.subscribe(16779217,this.updataReply),this.subscribe(16779218,this.feedReply),this.subscribe(16779219,this.skillReply),this.subscribe(16779220,this.magicReply),this.subscribe(16779221,this.changeMagicReply),this.subscribe(16779222,this.refineReply),this.onGlobal("BAG_UPDATE",this.updataRedPoint),this.onGlobal("BAG_DATA_GOT",this.updataRedPoint),FuncOpenCtrl.instance.registeFuncReq(29,2098852),this.publish(2098852,null)},l.prototype.updataRedPoint=function(){e.ImmortalsModel.instance.huanhuaRedPoint(),e.ImmortalsModel.instance.fuhunRedPoint(),e.ImmortalsModel.instance.shengjiRedPoint()},l.prototype.updataReply=function(t){e.ImmortalsModel.instance.saveData(t)},l.prototype.feedReply=function(t){t[0]||s.instance.play("assets/others/tx_jinjiechengong4.png",340),a.noticeError(t[0])},l.prototype.skillReply=function(t){a.noticeError(t[0]),t[0]||(GlobalData.dispatcher.event("SBSHENGJI_UPDATE"),this.updataRedPoint())},l.prototype.magicReply=function(t){t[0]||(e.ImmortalsModel.instance.popActivateAlert(),GlobalData.dispatcher.event("SBHUANHUA_UPDATA"),this.updataRedPoint()),a.noticeError(t[0])},l.prototype.changeMagicReply=function(t){a.noticeError(t[0]),t[0]||o.instance.addNotice("更换成功"),e.ImmortalsModel.instance.setHuanhuaId(t[1]),GlobalData.dispatcher.event("SBCHANGE_HUANHUA"),GlobalData.dispatcher.event("SHOW_MASTER_CHANGE")},l.prototype.refineReply=function(t){a.noticeError(t[0]),t[0]||(GlobalData.dispatcher.event("SBFUHUN_UPDATA"),this.updataRedPoint())},l.prototype.feedShenbing=function(){this.publish(2098853,null)},l.prototype.skillLev=function(t){this.publish(2098854,t)},l.prototype.magicLev=function(t){this.publish(2098855,t)},l.prototype.changeMagicShow=function(t){this.publish(2098856,[t])},l.prototype.refineLev=function(t){this.publish(2098857,t)},r=l,e.ImmortalsCtrl=r}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return i.call(this)||this}e=t.wing||(t.wing={}),n=t.core.BaseCtrl,s=t.effect.SuccessEffectCtrl,o=t.notice.SystemNoticeManager,a=t.common.CommonUtil,i=n,__extends(l,i),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16779316,this.updataReply),this.subscribe(16779317,this.updataReply),this.subscribe(16779318,this.feedReply),this.subscribe(16779319,this.skillReply),this.subscribe(16779320,this.magicReply),this.subscribe(16779321,this.changeMagicReply),this.subscribe(16779322,this.refineReply),this.onGlobal("BAG_UPDATE",this.updataRedPoint),this.onGlobal("BAG_DATA_GOT",this.updataRedPoint),this.publish(2098952,null)},l.prototype.updataRedPoint=function(){e.WingModel.instance.huanhuaRedPoint(),e.WingModel.instance.fuhunRedPoint(),e.WingModel.instance.shengjiRedPoint()},l.prototype.updataReply=function(t){e.WingModel.instance.saveData(t)},l.prototype.feedReply=function(t){t[0]||s.instance.play("assets/others/tx_jinjiechengong4.png",340),a.noticeError(t[0])},l.prototype.skillReply=function(t){a.noticeError(t[0]),t[0]||(GlobalData.dispatcher.event("XYSHENGJI_UPDATE"),this.updataRedPoint())},l.prototype.magicReply=function(t){t[0]||(e.WingModel.instance.popActivateAlert(),GlobalData.dispatcher.event("XYHUANHUA_UPDATA"),this.updataRedPoint()),a.noticeError(t[0])},l.prototype.changeMagicReply=function(t){a.noticeError(t[0]),t[0]||o.instance.addNotice("更换成功"),e.WingModel.instance.setHuanhuaId(t[1]),GlobalData.dispatcher.event("SHOW_MASTER_CHANGE")},l.prototype.refineReply=function(t){a.noticeError(t[0]),t[0]||(GlobalData.dispatcher.event("SBFUHUN_UPDATA"),this.updataRedPoint())},l.prototype.feedShenbing=function(){this.publish(2098953,null)},l.prototype.skillLev=function(t){this.publish(2098954,t)},l.prototype.magicLev=function(t){this.publish(2098955,t)},l.prototype.changeMagicShow=function(t){this.publish(2098956,[t])},l.prototype.refineLev=function(t){this.publish(2098957,t)},r=l,e.WingCtrl=r}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("tianzhu_feed"),this._skillPureIds=[],this._skillLvTable={};for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t][2];if(0<i.length){var n=Math.floor(1e-4*i[0]);1===i[1]&&this._skillPureIds.push(n),this._skillLvTable[n]||(this._skillLvTable[n]={}),this._skillLvTable[n][i[1]]=this._cfgs[t]}}},Object.defineProperty(n.prototype,"skillPureIds",{get:function(){return this._skillPureIds},enumerable:!0,configurable:!0}),n.prototype.getCfgByLevel=function(t){return this._cfgs[t-1]},n.prototype.getUpSkillCfgByLv=function(t){for(var e=t,i=this._cfgs.length;e<i;e++){var n=this._cfgs[e];if(n&&0<n[2].length)return n}return null},n.prototype.getLvTableBySkillId=function(t){return this._skillLvTable[t]},i=n,e.TianZhuFeedCfg=i}(modules=modules||{}),function(t){var s,u,e;function i(){this.typeArr=[],this.init()}s=t.config||(t.config={}),u=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._typeTable={};for(var t=0,e=GlobalData.getConfig("tianzhu_refine");t<e.length;t++){var i=e[t],n=i[0];-1===this.typeArr.indexOf(n)&&this.typeArr.push(n),this._typeTable[n]||(this._typeTable[n]=[]),this._typeTable[n].push(i)}this._attrIndices=s.BlendCfg.instance.getCfgById(22015)[1]},i.prototype.getDataByIdLvField=function(t,e,i){var n=this._typeTable[t];if(!n)throw new Error("类型不存在!"+t);e<0&&(e=0);var s=n.length,o=n[s-1][1];if(o<e)return null;if(1===i){for(var a=0;a<s;a++)if(e<=(p=n[a][1]))return n[a][2]}else if(0===i){var r=0;for(a=0;a<s;a++){if(!(e<=(p=n[a][1])))return r+=n[a][3]*(e-p);r+=n[a][3]*e}}else if(3===i){var l=u.calcAttrs(n[0][5],0),h=0;for(a=0;a<s;a++){if(e<=(p=n[a][1])){var c=n[a-1]?e-n[a-1][1]:e;return u.calcAttrs(l,c,n[a][5],l),l}u.calcAttrs(l,p-h,n[a][5],l),h=p}}else{if(4===i)return o;if(6===i)for(a=0;a<s;a++){var p;if(e<(p=n[a][1]))return n[a][4]}}},i.prototype.getMaxLvByLv=function(t,e){for(var i=this._typeTable[t],n=i.length,s=0;s<n;s++){var o=i[s];if(PlayerModel.instance.level<o[4])return o[1];if(e<o[1])return o[1]}return i[n-1][1]},i.prototype.has=function(t,e){if(!this._typeTable[t])return!1;if(null!=e){if(e<0)return!1;if(this._typeTable[t][this._typeTable[t].length-1][1]<e)return!1}return!0},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),e=i,s.TianZhuRefineCfg=e}(modules=modules||{}),function(i){var t,y,_,v,I,h,e;function n(){}t=i.tianZhu||(i.tianZhu={}),y=i.bag.BagModel,_=i.config.TianZhuFeedCfg,v=i.redPoint.RedPointCtrl,I=i.config.TianZhuRefineCfg,h=i.config.TianZhuMagicShowCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tianZhuInfo",{get:function(){return this._tianZhuInfo},set:function(t){this._tianZhuInfo=t,GlobalData.dispatcher.event("TIAN_ZHU_INFO_UPDATE"),this.checkRP()},enumerable:!0,configurable:!0}),n.prototype.changeMagicShow=function(t){this._tianZhuInfo&&(this._tianZhuInfo[3]=t,GlobalData.dispatcher.event("TIAN_ZHU_INFO_UPDATE"),GlobalData.dispatcher.event("SHOW_MASTER_CHANGE"))},n.prototype.getMagicShowInfoById=function(t){var e;if(this._tianZhuInfo)for(var i=this._tianZhuInfo[4],n=0,s=i.length;n<s;n++)if(i[n][0]===t){e=i[n];break}return e},n.prototype.checkRP=function(){if(this._tianZhuInfo&&y.instance.bagInited){var t=this._tianZhuInfo[0];if(t){var e=_.instance.getCfgByLevel(t)[1],i=y.instance.getItemCountById(e[0]);v.instance.setRPProperty("tianZhuShengJiMatRP",_.instance.getCfgByLevel(t+1)&&i>=e[1]),_.instance.getCfgByLevel(t+1)&&i>=e[1]?this._upLevaeRp=!0:this._upLevaeRp=!1,GlobalData.dispatcher.event("TIAN_ZHU_UPLEVEL");for(var n=this._tianZhuInfo[1],s=!1,o=0,a=n.length;o<a;o++)if(0<n[o][2]){s=!0;break}v.instance.setRPProperty("tianZhuShengJiRP",s),this.huanhuaRedPoint();var r=I.instance.typeArr,l=this._tianZhuInfo[7];for(s=!1,o=0,a=r.length;o<a;o++){for(var h=0,c=r[o],p=0,u=l.length;p<u;p++){var d=l[p];if(c===d[0]){h=d[1];break}}var m=I.instance.getDataByIdLvField(c,h,6),f=I.instance.getDataByIdLvField(c,h,1);if(PlayerModel.instance.level>=m){var g=y.instance.getItemCountById(f[0]);if(I.instance.has(c,h+1)&&g>=f[1]){s=!0;break}}}v.instance.setRPProperty("tianZhuFuHunRP",s)}}},n.prototype.huanhuaRedPoint=function(){for(var t=3;t<=6;t++)if(this.getRPByQuality(t))return void v.instance.setRPProperty("tianZhuHuanHuaZhenPinRP",!0);v.instance.setRPProperty("tianZhuHuanHuaZhenPinRP",!1)},n.prototype.getRPByQuality=function(t){for(var e=h.instance.getSkinCfgByType(t),i=!1,n=0,s=e.length;n<s;n++){var o=e[n],a=this.getMagicShowInfoById(o),r=0;if(a&&(r=a[1]),h.instance.has(o,r+1)){var l=h.instance.getDataByIdLvField(o,r,1);if(y.instance.getItemCountById(l[0])>=l[1]){i=!0;break}}}return i},n.prototype.qualityActivation=function(t){for(var e=h.instance.getSkinCfgByType(t),i=0,n=e.length;i<n;i++){var s=e[i],o=this.getMagicShowInfoById(s);if(0==this.curShowId){if(o)return i}else if(s==this.curShowId)return i}return-1},n.prototype.haveItem=function(t,e){return void 0===e&&(e=!0),!(!i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(178)&&e||!h.instance.getItemIdBayShowId(t)||(this.getItemIdBayShowId(t)?(console.log("道具id 不属于外观 或 已激活 "+t),1):(console.log("道具id 拥有 且 未激活 "+t),0)))},n.prototype.getItemIdBayShowId=function(t){var e=h.instance.getItemIdBayShowId(t);return!!e&&!!this.getMagicShowInfoById(e)},n.prototype.panDuanpingzhi=function(t){var e=h.instance.getItemIdBayShowId(t);if(e){var i=h.instance.getDataByIdLvField(e,Number.MIN_VALUE,5);return h.instance.qualitys.indexOf(i)}return-1},Object.defineProperty(n.prototype,"curShowId",{get:function(){return this._tianZhuInfo?this._tianZhuInfo[3]:0},enumerable:!0,configurable:!0}),e=n,t.TianZhuModel=e}(modules=modules||{}),function(t){var r,e,i,l,n;function s(){return e.call(this)||this}r=t.tianZhu||(t.tianZhu={}),i=t.core.BaseCtrl,l=t.effect.SuccessEffectCtrl,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16783726,this.getTianZhuInfoReply),this.subscribe(16783727,this.updateTianZhuInfo),this.subscribe(16783728,this.feedTianZhuReply),this.subscribe(16783729,this.addTianZhuSkillLevelReply),this.subscribe(16783730,this.addTianZhuMagicShowReply),this.subscribe(16783731,this.changeTianZhuMagicShowReply),this.subscribe(16783732,this.addTianZhuRefineReply),this.onGlobal("BAG_UPDATE",this.checkRP),this.onGlobal("BAG_DATA_GOT",this.checkRP),this.onGlobal("PLAYER_UPDATE_LEVEL",this.checkRP),FuncOpenCtrl.instance.registeFuncReq(29,2098852),this.getTianZhuInfo()},s.prototype.getTianZhuInfo=function(){this.publish(2103462,null)},s.prototype.getTianZhuInfoReply=function(t){r.TianZhuModel.instance.tianZhuInfo=t},s.prototype.updateTianZhuInfo=function(t){r.TianZhuModel.instance.tianZhuInfo=t},s.prototype.feedTianZhu=function(){this.publish(2103463,null)},s.prototype.feedTianZhuReply=function(t){t[0]||l.instance.play("assets/others/tx_jinjiechengong4.png",340),CommonUtil.noticeError(t[0])},s.prototype.addTianZhuSkillLevel=function(t){this.publish(2103464,[t])},s.prototype.addTianZhuSkillLevelReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.addTianZhuMagicShow=function(t){this.publish(2103465,[t]),r.TianZhuModel.instance.addTianZhuMagicShowId=t},s.prototype.addTianZhuMagicShowReply=function(t){var e=t[0];if(0===e){var i=r.TianZhuModel.instance.tianZhuInfo;if(i)for(var n=i[4],s=0,o=n.length;s<o;s++){var a=r.TianZhuModel.instance.addTianZhuMagicShowId;if(n[s][0]===a){1===n[s][1]?WindowManager.instance.openDialog(92,[a,10]):1<n[s][1]&&l.instance.play("assets/others/tx_jinjiechengong7.png");break}}}else CommonUtil.noticeError(e)},s.prototype.changeTianZhuMagicShow=function(t){this.publish(2103466,[t])},s.prototype.changeTianZhuMagicShowReply=function(t){0===t[0]?r.TianZhuModel.instance.changeMagicShow(t[1]):CommonUtil.noticeError(t[0])},s.prototype.addTianZhuRefine=function(t){this.publish(2103467,[t]),r.TianZhuModel.instance.refineType=t},s.prototype.addTianZhuRefineReply=function(t){var e=t[0];0===e?GlobalData.dispatcher.event("TIAN_ZHU_REFINE_SUCCESS"):CommonUtil.noticeError(e)},s.prototype.checkRP=function(){r.TianZhuModel.instance.checkRP()},n=s,r.TianZhuCtrl=n}(modules=modules||{}),function(t){var o,a,e;function i(){this.init()}o=t.config||(t.config={}),a=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.showIds=[],this._attrIndices=[],this._tab={},this._itemIdToShowId={},this._qualityToShowIds={},this.qualitys=[];for(var t=GlobalData.getConfig("shenbing_magicshow"),e=0,i=t.length;e<i;e++){var n=t[e][0];-1===this.showIds.indexOf(n)&&this.showIds.push(n);var s=t[e][5];this._qualityToShowIds[s]||(this.qualitys.push(s),this._qualityToShowIds[s]=[]),-1===this._qualityToShowIds[s].indexOf(n)&&this._qualityToShowIds[s].push(n),this._tab[n]=t[e],this._itemIdToShowId[t[e][2][0]]=n}this._attrIndices=o.BlendCfg.instance.getCfgById(22001)[1]},i.prototype.has=function(t,e){if(!this._tab[t])return!1;if(null!=e){if(e<0)return!1;if(this._tab[t][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){if(!this._tab[t])throw new Error("id不存在!"+t);e<0&&(e=0);var n=this._tab[t][1];if(n<e)return null;if(1===i)return this._tab[t][2];if(0===i)return this._tab[t][3]*e;if(2===i)return this._tab[t][4];if(3!==i)return 4===i?n:5===i?this._tab[t][5]:void 0;var s=this._tab[t][6];return a.calcAttrs(s,e)},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),i.prototype.getItemIdBayShowId=function(t){return this._itemIdToShowId[t]},i.prototype.getSkinCfgByType=function(t){return this._qualityToShowIds[t]},e=i,o.ShenbingMagicshowCfg=e}(modules=modules||{}),function(t){var s,u,e;function i(){this.init()}s=t.config||(t.config={}),u=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._typeTable={};for(var t=0,e=GlobalData.getConfig("shenbing_refine");t<e.length;t++){var i=e[t],n=i[0];this._typeTable[n]||(this._typeTable[n]=[]),this._typeTable[n].push(i)}this._attrIndices=s.BlendCfg.instance.getCfgById(22002)[1]},i.prototype.getDataByIdLvField=function(t,e,i){var n=this._typeTable[t];if(!n)throw new Error("类型不存在!"+t);e<0&&(e=0);var s=n.length,o=n[s-1][1];if(o<e)return null;if(1===i){for(var a=0;a<s;a++)if(e<=(p=n[a][1]))return n[a][2]}else if(0===i){var r=0;for(a=0;a<s;a++){if(!(e<=(p=n[a][1])))return r+=n[a][3]*(e-p);r+=n[a][3]*e}}else if(3===i){var l=u.calcAttrs(n[0][5],0),h=0;for(a=0;a<s;a++){if(e<=(p=n[a][1])){var c=n[a-1]?e-n[a-1][1]:e;return u.calcAttrs(l,c,n[a][5],l),l}u.calcAttrs(l,p-h,n[a][5],l),h=p}}else{if(4===i)return o;if(6===i)for(a=0;a<s;a++){var p;if(e<(p=n[a][1]))return n[a][4]}}},i.prototype.getMaxLvByLv=function(t,e){for(var i=this._typeTable[t],n=i.length,s=0;s<n;s++){var o=i[s];if(PlayerModel.instance.level<o[4])return o[1];if(e<o[1])return o[1]}return i[n-1][1]},i.prototype.has=function(t,e){if(!this._typeTable[t])return!1;if(null!=e){if(e<0)return!1;if(this._typeTable[t][this._typeTable[t].length-1][1]<e)return!1}return!0},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),e=i,s.ShenbingRefineCfg=e}(modules=modules||{}),function(i){var t,e,r,l,h,c,p,u,n;function d(){this._dic1=new e,this._dic2=new e,this._dic3=new e,this._huanhuaActId=-1,this._inactiveIetm=new Array,this._upLevaeRp=!1}t=i.immortals||(i.immortals={}),e=Laya.Dictionary,r=i.redPoint.RedPointCtrl,l=i.bag.BagModel,h=i.config.ImmortalsCfg,c=i.player.PlayerModel,p=i.config.ShenbingMagicshowCfg,u=i.config.ShenbingRefineCfg,Object.defineProperty(d,"instance",{get:function(){return this._instance=this._instance||new d},enumerable:!0,configurable:!0}),d.prototype.saveData=function(t){this.info=t,this._feedSkills=t[1],this.curShowId=t[3],this._dic1.clear(),this._dic2.clear(),this._dic3.clear(),this._idArr=[];for(var e=t[1],i=t[4],n=t[7],s=0,o=e.length;s<o;s++)this._dic1.set(e[s][0],e[s]),this._idArr.push(e[s][0]);for(this._idArr=this._idArr.sort(CommonUtil.smallToBigSort.bind(this)),s=0,o=i.length;s<o;s++)this._dic2.set(i[s][0],i[s]);for(s=0,o=n.length;s<o;s++)this._dic3.set(n[s][0],n[s]);this.setHuanhuaId(t[3]),GlobalData.dispatcher.event("SBHUANHUA_UPDATA"),GlobalData.dispatcher.event("SHENBING_UPDATE"),this.shengjiRedPoint(),this.huanhuaRedPoint(),this.fuhunRedPoint()},Object.defineProperty(d.prototype,"feedSkills",{get:function(){return this._feedSkills},enumerable:!0,configurable:!0}),d.prototype.fuhunRedPoint=function(){for(var t=0;t<4;t++){var e=d.instance.getFuhunListByType(t),i=void 0,n=void 0;n=e?(i=u.instance.getDataByIdLvField(t,e[1],1),u.instance.has(t,e[1]+1)):(i=u.instance.getDataByIdLvField(t,0,1),u.instance.has(t));var s=i[0],o=i[1],a=!1;if(n&&(a=l.instance.getItemCountById(s)>=o&&u.instance.getDataByIdLvField(t,e?e[1]:0,6)<=c.instance.level))return void r.instance.setRPProperty("immortalsFuhunRP",a)}r.instance.setRPProperty("immortalsFuhunRP",!1)},d.prototype.shengjiRedPoint=function(){if(this.info){var t=this.info[0];if(t){var e=h.instance.getShengjiCfgByLv(t),i=h.instance.getShengjiCfgByLv(t+1),n=l.instance.getItemCountById(e[1][0]),s=e[1][1];this._upLevaeRp=s<=n,GlobalData.dispatcher.event("SBCHANGE_UPLEVEL");for(var o=0,a=this._dic1.keys.length;o<a;o++)if(0<this._dic1.get(this._dic1.keys[o])[2])return void r.instance.setRPProperty("immortalsShengjiRP",!0);i&&s<=n?r.instance.setRPProperty("immortalsShengjiRP",!0):r.instance.setRPProperty("immortalsShengjiRP",!1)}}},d.prototype.huanhuaRedPoint=function(){for(var t=3;t<=6;t++)if(this.qualityType(t))return void r.instance.setRPProperty("immortalsHuanhuaJipinRP",!0);r.instance.setRPProperty("immortalsHuanhuaJipinRP",!1)},d.prototype.qualityType=function(t){var e=p.instance.getSkinCfgByType(t);if(e)for(var i=0,n=e.length;i<n;i++){var s=0,o=e[i];this._dic2.get(o)&&(s=this._dic2.get(o)[1]);var a=this.judge(o,s);if(a)return a}return!1},d.prototype.qualityActivation=function(t){var e=p.instance.getSkinCfgByType(t);if(e)for(var i=0,n=e.length;i<n;i++){var s=e[i];if(0==this.curShowId){if(this._dic2.get(s))return i}else if(this.curShowId==s)return i}return-1},d.prototype.judge=function(t,e){var i=p.instance.getDataByIdLvField(t,e,1);return!!p.instance.has(t,e+1)&&l.instance.getItemCountById(i[0])>=i[1]},d.prototype.setHuanhuaId=function(t){this.curShowId=t,this.info&&(this.info[3]=t),GlobalData.dispatcher.event("SBCHANGE_HUANHUA")},Object.defineProperty(d.prototype,"skillList",{get:function(){return this._dic1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"huanhuaList",{get:function(){return this._dic2},enumerable:!0,configurable:!0}),d.prototype.getFuhunListByType=function(t){return this._dic3.get(t)},Object.defineProperty(d.prototype,"keysArr",{get:function(){return this._idArr},enumerable:!0,configurable:!0}),d.prototype.popActivateAlert=function(){this._dic2.get(this._huanhuaActId)&&1==this._dic2.get(this._huanhuaActId)[1]&&WindowManager.instance.openDialog(92,[this._huanhuaActId,1])},d.prototype.haveItem=function(t,e){return void 0===e&&(e=!0),!(!i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(30)&&e||!p.instance.getItemIdBayShowId(t)||(this.getItemIdBayShowId(t)?(console.log("道具id 不属于外观 或 已激活 "+t),1):(console.log("道具id 拥有 且 未激活 "+t),0)))},d.prototype.getItemIdBayShowId=function(t){var e=p.instance.getItemIdBayShowId(t);return!!e&&!!this._dic2.get(e)},d.prototype.panDuanpingzhi=function(t){var e=p.instance.getItemIdBayShowId(t);if(e){var i=p.instance.getDataByIdLvField(e,Number.MIN_VALUE,5);return p.instance.qualitys.indexOf(i)}return-1},n=d,t.ImmortalsModel=n}(modules=modules||{}),function(t){var o,a,e;function i(){this.init()}o=t.config||(t.config={}),a=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.showIds=[],this._attrIndices=[],this._tab={},this._itemIdToShowId={},this._qualityToShowIds={},this.qualitys=[];for(var t=GlobalData.getConfig("wing_magicshow"),e=0,i=t.length;e<i;e++){var n=t[e][0];-1===this.showIds.indexOf(n)&&this.showIds.push(n);var s=t[e][5];this._qualityToShowIds[s]||(this.qualitys.push(s),this._qualityToShowIds[s]=[]),-1===this._qualityToShowIds[s].indexOf(n)&&this._qualityToShowIds[s].push(n),this._tab[n]=t[e],this._itemIdToShowId[t[e][2][0]]=n}this._attrIndices=o.BlendCfg.instance.getCfgById(22003)[1]},i.prototype.has=function(t,e){if(!this._tab[t])return!1;if(null!=e){if(e<0)return!1;if(this._tab[t][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){if(!this._tab[t])throw new Error("id不存在!"+t);e<0&&(e=0);var n=this._tab[t][1];if(n<e)return null;if(1===i)return this._tab[t][2];if(0===i)return this._tab[t][3]*e;if(2===i)return this._tab[t][4];if(3!==i)return 4===i?n:5===i?this._tab[t][5]:void 0;var s=this._tab[t][6];return a.calcAttrs(s,e)},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),i.prototype.getItemIdBayShowId=function(t){return this._itemIdToShowId[t]},i.prototype.getSkinCfgByType=function(t){return this._qualityToShowIds[t]},e=i,o.WingMagicshowCfg=e}(modules=modules||{}),function(t){var s,u,e;function i(){this.init()}s=t.config||(t.config={}),u=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._typeTable={};for(var t=0,e=GlobalData.getConfig("wing_refine");t<e.length;t++){var i=e[t],n=i[0];this._typeTable[n]||(this._typeTable[n]=[]),this._typeTable[n].push(i)}this._attrIndices=s.BlendCfg.instance.getCfgById(22004)[1]},i.prototype.getDataByIdLvField=function(t,e,i){var n=this._typeTable[t];if(!n)throw new Error("类型不存在!"+t);e<0&&(e=0);var s=n.length,o=n[s-1][1];if(o<e)return null;if(1===i){for(var a=0;a<s;a++)if(e<=(p=n[a][1]))return n[a][2]}else if(0===i){var r=0;for(a=0;a<s;a++){if(!(e<=(p=n[a][1])))return r+=n[a][3]*(e-p);r+=n[a][3]*e}}else if(3===i){var l=u.calcAttrs(n[0][5],0),h=0;for(a=0;a<s;a++){if(e<=(p=n[a][1])){var c=n[a-1]?e-n[a-1][1]:e;return u.calcAttrs(l,c,n[a][5],l),l}u.calcAttrs(l,p-h,n[a][5],l),h=p}}else{if(4===i)return o;if(6===i)for(a=0;a<s;a++){var p;if(e<(p=n[a][1]))return n[a][4]}}},i.prototype.getMaxLvByLv=function(t,e){for(var i=this._typeTable[t],n=i.length,s=0;s<n;s++){var o=i[s];if(PlayerModel.instance.level<o[4])return o[1];if(e<o[1])return o[1]}return i[n-1][1]},i.prototype.has=function(t,e){if(!this._typeTable[t])return!1;if(null!=e){if(e<0)return!1;if(this._typeTable[t][this._typeTable[t].length-1][1]<e)return!1}return!0},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),e=i,s.WingRefineCfg=e}(modules=modules||{}),function(p){var t,e,r,a,l,h,c,u,i;function d(){this.warWingTimeTable={},this._dic1=new e,this._dic2=new e,this._dic3=new e,this._huanhuaActId=-1,this._upLevaeRp=!1}t=p.wing||(p.wing={}),e=Laya.Dictionary,r=p.bag.BagModel,a=p.player.PlayerModel,l=p.redPoint.RedPointCtrl,h=p.config.WingCfg,c=p.config.WingMagicshowCfg,u=p.config.WingRefineCfg,Object.defineProperty(d,"instance",{get:function(){return this._instance=this._instance||new d},enumerable:!0,configurable:!0}),d.prototype.saveData=function(t){this.info=t,this._feedSkills=t[1],this._dic1.clear(),this._dic2.clear(),this._dic3.clear(),this._idArr=[],this.curShowId=t[3];for(var e=t[1],i=t[4],n=t[7],s=0,o=e.length;s<o;s++)this._dic1.set(e[s][0],e[s]),this._idArr.push(e[s][0]);for(this._idArr=this._idArr.sort(p.common.CommonUtil.smallToBigSort.bind(this)),s=0,o=i.length;s<o;s++)this._dic2.set(i[s][0],i[s]);for(s=0,o=n.length;s<o;s++)this._dic3.set(n[s][0],n[s]);this.setHuanhuaId(t[3]);var a=t[10];if(a)for(var r=0;r<a.length;r++){var l=a[r];if(l){var h=l[0],c=l[1];this.warWingTimeTable[h]=c}}GlobalData.dispatcher.event("WING_UPDATE"),this.shengjiRedPoint(),this.huanhuaRedPoint(),this.fuhunRedPoint()},Object.defineProperty(d.prototype,"feedSkills",{get:function(){return this._feedSkills},enumerable:!0,configurable:!0}),d.prototype.fuhunRedPoint=function(){for(var t=0;t<4;t++){var e=d.instance.getFuhunListByType(t),i=void 0,n=void 0;n=e?(i=u.instance.getDataByIdLvField(t,e[1],1),u.instance.has(t,e[1]+1)):(i=u.instance.getDataByIdLvField(t,0,1),u.instance.has(t));var s=i[0],o=i[1];if(n&&r.instance.getItemCountById(s)>=o&&u.instance.getDataByIdLvField(t,e?e[1]:0,6)<=a.instance.level)return void l.instance.setRPProperty("wingFuhunRP",!0)}l.instance.setRPProperty("wingFuhunRP",!1)},d.prototype.shengjiRedPoint=function(){if(this.info){var t=this.info[0];if(t){var e=h.instance.getShengjiCfgByLv(t),i=h.instance.getShengjiCfgByLv(t+1),n=r.instance.getItemCountById(e[1][0]),s=e[1][1];this._upLevaeRp=s<=n,GlobalData.dispatcher.event("XYCHANGE_UPLEVEL");for(var o=0,a=this._dic1.keys.length;o<a;o++)if(0<this._dic1.get(this._dic1.keys[o])[2])return void l.instance.setRPProperty("wingShengjiRP",!0);i&&s<=n?l.instance.setRPProperty("wingShengjiRP",!0):l.instance.setRPProperty("wingShengjiRP",!1)}}},d.prototype.huanhuaRedPoint=function(){for(var t=3;t<=5;t++)if(this.qualityType(t))return void l.instance.setRPProperty("wingHuanhuaJipinRP",!0);l.instance.setRPProperty("wingHuanhuaJipinRP",!1)},d.prototype.qualityType=function(t){var e=c.instance.getSkinCfgByType(t);if(e)for(var i=0,n=e.length;i<n;i++){var s=0,o=e[i];this._dic2.get(o)&&(s=this._dic2.get(o)[1]);var a=this.judge(o,s);if(a)return a}return!1},d.prototype.qualityActivation=function(t){var e=c.instance.getSkinCfgByType(t);if(e)for(var i=0,n=e.length;i<n;i++){var s=e[i];if(0==this.curShowId){if(this._dic2.get(s))return i}else if(this.curShowId==s)return i}return-1},d.prototype.judge=function(t,e){var i=c.instance.getDataByIdLvField(t,e,1);return!!c.instance.has(t,e+1)&&r.instance.getItemCountById(i[0])>=i[1]},d.prototype.setHuanhuaId=function(t){this.curShowId=t,this.info&&(this.info[3]=t),GlobalData.dispatcher.event("XYCHANGE_HUANHUA")},Object.defineProperty(d.prototype,"skillList",{get:function(){return this._dic1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"huanhuaList",{get:function(){return this._dic2},enumerable:!0,configurable:!0}),d.prototype.getFuhunListByType=function(t){return this._dic3.get(t)},Object.defineProperty(d.prototype,"keysArr",{get:function(){return this._idArr},enumerable:!0,configurable:!0}),d.prototype.popActivateAlert=function(){this._dic2.get(this._huanhuaActId)&&1==this._dic2.get(this._huanhuaActId)[1]&&WindowManager.instance.openDialog(92,[this._huanhuaActId,2])},d.prototype.haveItem=function(t,e){return void 0===e&&(e=!0),!(!p.funcOpen.FuncOpenModel.instance.getFuncIsOpen(33)&&e||!c.instance.getItemIdBayShowId(t)||this.getItemIdBayShowId(t))},d.prototype.getItemIdBayShowId=function(t){var e=c.instance.getItemIdBayShowId(t);return!!e&&!!this._dic2.get(e)},d.prototype.panDuanpingzhi=function(t){var e=c.instance.getItemIdBayShowId(t);if(e){var i=c.instance.getDataByIdLvField(e,Number.MIN_VALUE,5);return c.instance.qualitys.indexOf(i)}return-1},i=d,t.WingModel=i}(modules=modules||{}),function(t){var s,e,p,u,d,m,o,f,i,a,g,y,_,n,r,l,h,v,c,I,b,C,T,w;function x(){return null!==e&&e.apply(this,arguments)||this}s=t.pet||(t.pet={}),p=t.common.CommonUtil,u=t.config.SkillCfg,d=t.effect.SuccessEffectCtrl,m=t.config.PetFeedCfg,o=t.ride.RideModel,f=t.config.RideFeedCfg,i=t.ride.RideCtrl,a=t.fashion.FashionModel,g=t.config.ImmortalsCfg,y=t.config.WingCfg,_=t.config.FashionFeedCfg,n=t.fashion.FashionCtrl,r=t.immortals.ImmortalsCtrl,l=t.wing.WingCtrl,h=t.tianZhu.TianZhuModel,v=t.config.TianZhuFeedCfg,c=t.tianZhu.TianZhuCtrl,I=t.immortals.ImmortalsModel,b=t.wing.WingModel,C=t.config.SkillPureCfg,T=ui.SkillAlertUI,e=T,__extends(x,e),x.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),e.prototype.destroy.call(this)},x.prototype.initialize=function(){e.prototype.initialize.call(this),this.btnClip=p.creatEff(this,"btn_light",15),this.btnClip.pos(this.btn.x-5,this.btn.y-10),this.btnClip.visible=!1},x.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.activateOrUpHandler),0===this._type?this.onAutoGlobalEvt("RIDE_UPDATE",this,this.updateInfo):1===this._type?this.onAutoGlobalEvt("PET_UPDATE",this,this.updateInfo):2===this._type?this.onAutoGlobalEvt("SHENBING_UPDATE",this,this.updateInfo):3===this._type?this.onAutoGlobalEvt("WING_UPDATE",this,this.updateInfo):4===this._type?this.onAutoGlobalEvt("FASHION_INFO_UPDATE",this,this.updateInfo):5===this._type&&this.onAutoGlobalEvt("TIAN_ZHU_INFO_UPDATE",this,this.updateInfo)},x.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._tLv=-1,this._skillInfo=t[0],this._type=t[1]},x.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateSkillInfo()},x.prototype.updateInfo=function(){if(this._skillInfo){var t;0===this._type?t=o.instance.feed[2]:1===this._type?t=s.PetModel.instance.feedSkills:2===this._type?t=I.instance.feedSkills:3===this._type?t=b.instance.feedSkills:4===this._type?t=a.instance.fashionInfo[1]:5===this._type&&(t=h.instance.tianZhuInfo[1]);for(var e=p.getSkillPureIdById(this._skillInfo[0]),i=0,n=t.length;i<n;i++)if(p.getSkillPureIdById(t[i][0])===e){this._skillInfo=t[i],this.updateSkillInfo();break}}},x.prototype.updateSkillInfo=function(){var t=this._skillInfo[1],e=this._skillInfo[0],i=p.getSkillPureIdById(e),n=C.instance.getCfgById(i);e=0===t?p.getSkillIdByPureIdAndLv(i,1):e;var s,o,a,r,l,h=u.instance.getCfgById(e);this.iconImg.skin="assets/icon/skill/"+n[6]+".png",this.nameTxt.text=n[1]+"  Lv."+t,0===this._type?(o="仙器培养技能",s=f.instance.getLvTableBySkillId(i),a=3,r=0,l="仙器培养"):1===this._type?(o="灵宠培养技能",s=m.instance.getLvTableBySkillId(i),a=3,r=0,l="灵宠培养"):2===this._type?(o="神兵技能",s=g.instance.getShengjiLvTableBySkillId(i),a=2,r=0,l="神兵等级"):3===this._type?(o="仙翼技能",s=y.instance.getShengjiLvTableBySkillId(i),a=2,r=0,l="仙翼等级"):4===this._type?(o="时装技能",s=_.instance.getLvTableBySkillId(i),a=2,r=0,l="时装等级"):5===this._type&&(o="天珠技能",s=v.instance.getLvTableBySkillId(i),a=2,r=0,l="天珠等级"),this.titleTxt.text=o,this.powerTxt.text="战力："+(0===t?0:s[t][a][2]),this.btn.visible=this.conditionTxt.visible=!0,e=p.getSkillIdByPureIdAndLv(i,t+1);var c=u.instance.getCfgById(e);c&&(this.nextLvDesc.text=p.stringFormat(n[5],c[2])),0===t?(this.curLvDesc.text="无",this.btn.label="激活",this.conditionTxt.text="激活条件："+l+" Lv."+s[1][r],this.conditionTxt.color="#ED1100"):(this.curLvDesc.text=p.stringFormat(n[5],h[2]),this.btn.label="升级",s[t+1]?(this.conditionTxt.text="升级条件："+l+" Lv."+s[t+1][r],this.conditionTxt.color="#ED1100"):(this.btn.visible=!1,this.conditionTxt.text="已满级",this.conditionTxt.color="#00AD35",this.nextLvDesc.text="已达最大等级"),1===t&&0===this._tLv?d.instance.play("assets/others/tx_jinjiechengong5.png"):t!==this._tLv&&-1!==this._tLv&&d.instance.play("assets/others/tx_jinjiechengong4.png")),this._tLv=t,0<this._skillInfo[2]?(this.btnClip.visible=!0,this.btnClip.play(),this.btn.gray=!1,this.btn.mouseEnabled=!0,this.conditionTxt.visible=!1,this.btn.y=485):(this.btnClip.visible=!1,this.btnClip.stop(),this.btn.gray=!0,this.btn.mouseEnabled=!1,this.conditionTxt.visible=!0,this.btn.y=505),this.btnClip.y=this.btn.y-10},x.prototype.activateOrUpHandler=function(){if(0<this._skillInfo[2]){var t=this._skillInfo[0];0===this._type?i.instance.addRideSkillLevel(t,1):1===this._type?s.PetCtrl.instance.skillUp(t,1):2===this._type?r.instance.skillLev([t]):3===this._type?l.instance.skillLev([t]):4===this._type?n.instance.addFashionSkillLevel(t):5===this._type&&c.instance.addTianZhuSkillLevel(t)}},w=x,s.PetFeedSkillAlert=w}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("attr_skill")},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.AttrSkillCfg=i}(modules=modules||{}),function(t){var e,i,c,n,p,u,d,s;function o(){return i.call(this)||this}e=t.commonAlert||(t.commonAlert={}),c=Laya.Text,n=ui.AttrAlertUI,p=t.common.AttrUtil,u=t.config.AttrItemCfg,d=t.config.AttrSkillCfg,i=n,__extends(o,i),o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.titleTxt.text=t[0],this.fighting=t[1],t[3]&&(this._attrIds=t[3]),this._isSkill=t[4],this._runeSkillAttr=t[5],this.attrs=t[2]},Object.defineProperty(o.prototype,"attrs",{set:function(t){this._attr=t,this._isSkill?this.updateAttrList1():this.updateAttrList()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fighting",{set:function(t){this.powerNum.value=t.toString()},enumerable:!0,configurable:!0}),o.prototype.updateAttrList1=function(){this._txts||(this._txts=new Array);for(var t=0,e=this._txts.length;t<e;t++)this._txts[t].removeSelf();var i=0;for(t=0,e=this._runeSkillAttr.length;t<e;t++){var n=this._runeSkillAttr[t];if(127!=n[0]&&128!=n[0]&&129!=n[0]&&130!=n[0]&&131!=n[0]){var s=n[2],o="";if(1==s){var a=u.instance.getCfgById(n[0]),r=n[1]?n[1]:0,l=a[2]?p.formatFloatNum(r)+"%":Math.round(r)+"";o=a[1]+(a[2]?" +":"：")+l}else 2==s&&(a=d.instance.getCfgById(n[0]),r=n[1]?n[1]:0,l=a[2]?p.formatFloatNum(r)+"%":Math.round(r)+"",o=a[1]+(a[2]?" +":"：")+l);var h=this._txts[i];h||((h=new c).color="#4c5e8a",h.fontSize=24,this._txts[i]=h),this.addChild(h),h.text=o,h.pos(i%2*240+120,200+36*(i/2>>0),!0),i++}}},o.prototype.updateAttrList=function(){if(this._attr){this._txts||(this._txts=new Array);for(var t=0,e=this._txts.length;t<e;t++)this._txts[t].removeSelf();var i=0;for(t=0,e=this._attrIds.length;t<e;t++){var n=this._attrIds[t],s=p.getAttrByType(n,this._attr),o=u.instance.getCfgById(n),a=s?s[1]:0,r=o[2]?p.formatFloatNum(a)+"%":Math.round(a)+"",l=o[1]+(o[2]?" +":"：")+r,h=this._txts[i];h||((h=new c).color="#4c5e8a",h.fontSize=24,this._txts[i]=h),this.addChild(h),h.text=l,h.pos(i%2*240+120,200+36*(i/2>>0),!0),i++}}},o.prototype.destroy=function(){if(this._txts){for(var t=0,e=this._txts;t<e.length;t++)e[t].destroy(!0);this._txts=null}i.prototype.destroy.call(this)},s=o,e.AttrAlert=s}(modules=modules||{}),function(t){var s,a,u,e;function i(){this.init()}s=t.config||(t.config={}),a=t.player.PlayerModel,u=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._typeTable={};for(var t=0,e=GlobalData.getConfig("pet_refine");t<e.length;t++){var i=e[t],n=i[0];this._typeTable[n]||(this._typeTable[n]=[]),this._typeTable[n].push(i)}this._attrIndices=s.BlendCfg.instance.getCfgById(22005)[1]},i.prototype.getDataByIdLvField=function(t,e,i){var n=this._typeTable[t];if(!n)throw new Error("类型不存在!"+t);e<0&&(e=0);var s=n.length,o=n[s-1][1];if(o<e)return null;if(1===i){for(var a=0;a<s;a++)if(e<=(p=n[a][1]))return n[a][2]}else if(0===i){var r=0;for(a=0;a<s;a++){if(!(e<=(p=n[a][1])))return r+=n[a][3]*(e-p);r+=n[a][3]*e}}else if(3===i){var l=u.calcAttrs(n[0][5],0),h=0;for(a=0;a<s;a++){if(e<=(p=n[a][1])){var c=n[a-1]?e-n[a-1][1]:e;return u.calcAttrs(l,c,n[a][5],l),l}u.calcAttrs(l,p-h,n[a][5],l),h=p}}else{if(4===i)return o;if(6===i)for(a=0;a<s;a++){var p;if(e<(p=n[a][1]))return n[a][4]}}},i.prototype.getMaxLvByLv=function(t,e){for(var i=this._typeTable[t],n=i.length,s=0;s<n;s++){var o=i[s];if(a.instance.level<o[4])return o[1];if(e<o[1])return o[1]}return i[n-1][1]},i.prototype.has=function(t,e){if(!this._typeTable[t])return!1;if(null!=e){if(e<0)return!1;if(this._typeTable[t][this._typeTable[t].length-1][1]<e)return!1}return!0},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),e=i,s.PetRefineCfg=e}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._table2={},this._skillTable={},this._skillIds=new Array,this._cfgs=GlobalData.getConfig("pet_rank"),this._showIds=[],this._showStars=[];for(var t=0;t<this._cfgs.length;t++){var e=this._cfgs[t];if((this._table[e[0]]=e)[4]&&0<e[4].length){var i=e[4][0];this._skillTable[i]=e,this._skillIds.push(i)}e[3]&&(this._showIds.push(e[3]),this._showStars.push(e[0]),this._table2[e[3]]=this._cfgs[t+1])}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"skillIds",{get:function(){return this._skillIds},enumerable:!0,configurable:!0}),n.prototype.getPetRankCfgBySt=function(t){var e=this._table[t];return e||null},n.prototype.getCfgBySkillId=function(t){return this._skillTable[t]},Object.defineProperty(n.prototype,"showIds",{get:function(){return this._showIds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showStars",{get:function(){return this._showStars},enumerable:!0,configurable:!0}),n.prototype.getActivateCfgByShowId=function(t){return this._table2[t]},i=n,e.PetRankCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.common||(t.common={}),n=t.funcOpen.FuncOpenModel,s=t.notice.SystemNoticeManager,i=e.BtnGroup,__extends(a,i),a.prototype.setFuncIds=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._funcId=t},a.prototype.btnClickHandler=function(t){if(this._funcId.length){var e=this._funcId[t];if(0!==e&&!n.instance.getFuncIsOpen(e))return void s.instance.addNotice(n.instance.getFuncOpenTipById(e),!0)}i.prototype.btnClickHandler.call(this,t)},o=a,e.FuncBtnGroup=o}(modules=modules||{}),function(a){var t,e,i,P,n,s,o,S,A,M,E,r;function l(){return null!==e&&e.apply(this,arguments)||this}t=a.pet||(a.pet={}),i=a.common.FuncBtnGroup,P=a.common.CustomClip,n=a.bag.BaseItem,s=a.common.AvatarClip,o=a.bag.BagUtil,S=a.config.ExteriorCfg,A=a.effect.SuccessEffectCtrl,M=a.bag.BagModel,E=a.config.SkillPureCfg,e=ui.PetFeedViewUI,__extends(l,e),l.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._btnGroup=this.destroyElement(this._btnGroup),this._matItem=this.destroyElement(this._matItem),this._nameTxts=this.destroyElement(this._nameTxts),this._valueTxts=this.destroyElement(this._valueTxts),this._upImgs=this.destroyElement(this._upImgs),this._upTxts=this.destroyElement(this._upTxts),this._waveClip=this.destroyElement(this._waveClip),this._showModelClip=this.destroyElement(this._showModelClip),this.observationItem=this.destroyElement(this.observationItem),this._tween&&(this._tween.stop(),this._tween=null),e.prototype.destroy.call(this,t)},l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup=new i,this._btnGroup.setBtns(this.cultureBtn,this.advancedBtn,this.practiceBtn),this._matItem=new n,this.addChild(this._matItem),this._matItem.scale(.8,.8,!0),this._matItem.pos(155,984,!0),this._nameTxts=[this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5,this.attrName6],this._valueTxts=[this.attrValue1,this.attrValue2,this.attrValue3,this.attrValue4,this.attrValue5,this.attrValue6],this._upImgs=[this.attrUpImg1,this.attrUpImg2,this.attrUpImg3,this.attrUpImg4,this.attrUpImg5,this.attrUpImg6],this._upTxts=[this.attrUpTxt1,this.attrUpTxt2,this.attrUpTxt3,this.attrUpTxt4,this.attrUpTxt5,this.attrUpTxt6],this._btnClip=P.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.onekeyBtn.x-5,this.onekeyBtn.y-16,.8),this._waveClip=P.create("assets/effect/wave.atlas","wave",8),this.con.addChildAt(this._waveClip,0),this._waveClip.pos(0,124,!0),this._showModelClip=s.create(1024,1024,1024),this.feedBox.addChildAt(this._showModelClip,2),this._showModelClip.anchorX=.5,this._showModelClip.anchorY=.5,this._showModelClip.centerX=0,this._showModelClip.y=250,this._helpId=20001,this.bgImg.skin="magic_pet/bj_linbgchong.png"},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.onekeyBtn,this,this.onOnekey),this.onAutoEvt(this._btnGroup,"change",this,this.onChange),this.onAutoClick(this.showEquipBtn,this,this.showEquipHandler)},l.prototype.showEquipHandler=function(){},l.prototype.onOnekey=function(){0<=this._feedNumDiff?this._feedFunc():o.openLackPropAlert(this._matItem.itemData[0],-this._feedNumDiff)},l.prototype.onChange=function(){},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._feedLv=-1,this._feedExp=-1,this._btnGroup.selectedIndex=0,this._waveClip.play()},l.prototype.close=function(){this._tween&&this._tween.stop(),this._waveClip.stop(),e.prototype.close.call(this)},Object.defineProperty(l.prototype,"wavePro",{get:function(){return this._wavePro},set:function(t){this._wavePro=t,this._waveClip.y=125*(1-t),this.feedNumTxt.text=Math.floor(this._feedMaxExp*t)+"/"+this._feedMaxExp},enumerable:!0,configurable:!0}),l.prototype.setAttrs=function(t,e,i){for(var n=a.common.AttrUtil.setAttrTxts(t,e,this._nameTxts,this._valueTxts,this._upImgs,this._upTxts,i),s=0,o=n;s<o;s++)this._nameTxts[s].y=this._valueTxts[s].y=this._upTxts[s].y=756+38*(s/2>>0),this._upImgs[s].y=this._nameTxts[s].y-5;for(s=n,o=this._nameTxts.length;s<o;s++)this._nameTxts[s].visible=this._valueTxts[s].visible=this._upImgs[s].visible=this._upTxts[s].visible=!1},l.prototype.resetPro=function(t){this.feedNumTxt.text=t+"/"+this._feedMaxExp},l.prototype.updateInfo=function(t,e,i,n,s,o,a,r,l,h,c,p,u){var d=this,m=t[i];this._feedMaxExp=m;var f=S.instance.getCfgById(this._showId);this._showModelClip.avatarScale=f[10]?f[10]:1,this._showModelClip.avatarRotationX=f[6],this._showModelClip.avatarRotationY=f[7],this._showModelClip.avatarY=f[9],this._showModelClip.avatarX=f[8],this._showModelClip.reset(this._showId),this.observationItem.data=[[this._showModelClip,Math.round(this._showId/1e3)]],-1===this._feedLv?(this.wavePro=n/m,this.resetPro(n)):s>this._feedLv?(A.instance.play("assets/others/tx_jinjiechengong4.png",340),this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({wavePro:1},this._waveClip.y/125*500).onComplete(function(){d.wavePro=0,d._tween=TweenJS.create(d).to({wavePro:n/m},500*(1-n/m)).start().onComplete(function(){d.resetPro(n)})}).start()):n>this._feedExp&&(this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({wavePro:n/m},500*(1-n/m)).onComplete(function(){d.resetPro(n)}).start()),this.levelClip.value=s.toString(),this._feedLv=s,this._feedExp=n,this.setAttrs(t,e,o);var g=t[a],y=[g[0],0,0,null];this._matItem.dataSource=y;var _=M.instance.getItemCountById(g[0]);this._feedNumDiff=_-g[1],this._matItem.setNum(_+"/"+g[1],_<g[1]?"#ff7462":"#ffffff");var v=Math.ceil((m-n)/g[2]);if(M.instance.getItemCountById(g[0])>=v?P.thisPlay(this._btnClip):P.thisStop(this._btnClip),this.powerNum.value=r[3].toString(),l){this.needLvTxt.text=l[h]-s+"级";var I=CommonUtil.getSkillPureIdById(l[c][0]),b=l[c][1];this.skillNameTxt.text="【"+E.instance.getCfgById(I)[1]+"】"+b+"级",CommonUtil.chainArr([this.desTxt_0,this.needLvTxt,this.desTxt_1,this.skillNameTxt],5)}else this.tipBox.visible=!1;for(var C=[this.skill0,this.skill1,this.skill2],T=r[2],w=0,x=p.length;w<x;w++)C.length>w&&(C[w].skillId=T.length>w&&0<T[w][1]?T[w][0]:CommonUtil.getSkillIdByPureIdAndLv(p[w],1),C[w].skillInfo=T.length>w?T[w]:null,C[w].type=u);var B=!e;this.expBg.visible=this.expFg.visible=this.con.visible=this.feedNumTxt.visible=this.expTxt.visible=!B,this._matItem.visible=this.onekeyBtn.visible=!B,(this.feedMaxLvTxt.visible=B)&&P.thisStop(this._btnClip)},r=l,t.FeedBasePanel=r}(modules=modules||{}),function(e){var o,i,n,a,r,t;function s(){return null!==i&&i.apply(this,arguments)||this}o=e.pet||(e.pet={}),n=e.config.PetRankCfg,a=e.config.PetFeedCfg,r=e.illusion.IllusionModel,i=e.pet.FeedBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup.setFuncIds(2,44,4),this._showIds=n.instance.showIds,this._helpId=20001,this.bgImg.skin="magic_pet/bj_linbgchong.png",this._feedFunc=o.PetCtrl.instance.feedPet.bind(o.PetCtrl.instance),this.regGuideSpr(23,this.onekeyBtn),this.regGuideSpr(22,this.cultureBtn),this.regGuideSpr(24,this.advancedBtn),this.regGuideSpr(26,this.practiceBtn);var t=e.config.ShowEquipCfg.instance.getCfgByType(7);this.showEquipTxt.text=t?t[1]:"",this.showEquipBtn.skin="magic_pet/btn_showequip.png"},s.prototype.showEquipHandler=function(){WindowManager.instance.open(1275)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("PET_INITED",this,this.updateCulture),this.onAutoGlobalEvt("PET_UPDATE",this,this.updateCulture),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateCulture),this.regAutoRP(this.cultureRP,["petFeedSkillRP","petFeedMatRP","showEquipPet"]),this.regAutoRP(this.advancedRP,["petRankSkillRP","petIllusionRP","petRankMatRP","petIllusionMasterRP"]),this.regAutoRP(this.practiceRP,["petRefineMaterialRP"]),this.regAutoRP(this.showEquipRP,["showEquipPet"])},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),o.PetModel.instance.panelType=1,this.updateCulture()},s.prototype.onChange=function(){1==this._btnGroup.selectedIndex?WindowManager.instance.open(124):2==this._btnGroup.selectedIndex&&WindowManager.instance.open(125)},s.prototype.updateCulture=function(){this._showId=r.instance.magicShowId?r.instance.magicShowId:this._showIds[0],this.onekeyBtn.visible=!0;var t=o.PetModel.instance.feed;if(t){var e=t[1],i=t[0],n=a.instance.getPetFeedCfgByLv(i),s=a.instance.getPetFeedCfgByLv(i+1);this.updateInfo(n,s,1,e,i,5,2,t,a.instance.getNextSkillCfgByLv(i),0,3,a.instance.skillIds,1)}},t=s,o.PetFeedPanel=t}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.pet||(t.pet={}),n=t.common.CustomClip,s=ui.PetUpgradeItemUI,o=t.config.SkillPureCfg,i=s,__extends(r,i),r.prototype.close=function(){n.thisStop(this._eff),i.prototype.close.call(this)},r.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),i.prototype.destroy.call(this)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this,this,this.clickHandler)},r.prototype.clickHandler=function(){WindowManager.instance.openDialog(25,this._skillInfo||[this._skillId,0,0])},Object.defineProperty(r.prototype,"cfg",{set:function(t){this._skillId=t[4][0],this.iconImg.skin="assets/icon/skill/"+o.instance.getCfgById(CommonUtil.getSkillPureIdById(this._skillId))[6]+".png"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"skillInfo",{set:function(t){(this._skillInfo=t)?(this.iconImg.gray=0===this._skillInfo[1],0<t[2]?(this._eff||(this._eff=n.create("assets/effect/activityEnter.atlas","activityEnter",16),this.addChild(this._eff),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0)),n.thisPlay(this._eff),this.stateImg.visible=this._eff.visible=this.tipsImg.visible=!0,this.stateImg.skin=0===this._skillInfo[1]?"common/txt_xq_kjh.png":"common/txt_xq_ksj.png"):(n.thisStop(this._eff),this.stateImg.visible=this.tipsImg.visible=!1)):(this.iconImg.gray=!0,this.stateImg.visible=this.tipsImg.visible=!1,n.thisStop(this._eff))},enumerable:!0,configurable:!0}),a=r,e.PetUpgradeItem=a}(modules=modules||{}),function(o){var t,e,i,n,s,a,r,l,h,c,f,g,y,p;function u(){return null!==e&&e.apply(this,arguments)||this}t=o.pet||(o.pet={}),i=ui.PetRankViewUI,n=o.common.AvatarClip,s=o.common.CustomClip,a=o.bag.BaseItem,r=o.common.ProgressBarCtrl,l=o.common.FuncBtnGroup,h=o.config.ExteriorCfg,c=o.bag.BagUtil,f=o.effect.SuccessEffectCtrl,g=o.bag.BagModel,y=o.pet.PetUpgradeItem,e=i,__extends(u,e),u.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),this.btnClip=this.destroyElement(this.btnClip),this._btnGroup=this.destroyElement(this._btnGroup),this._magicClip=this.destroyElement(this._magicClip),this._modelClip=this.destroyElement(this._modelClip),this._upgradeItems=this.destroyElement(this._upgradeItems),this._HuoQuItemItem=this.destroyElement(this._HuoQuItemItem),this.observationItem=this.destroyElement(this.observationItem),this._showStars=this.itemArr=this._model=this._rankFunc=this._changeFunc=this._cfg=null,e.prototype.destroy.call(this,t)},u.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup=new l,this._btnGroup.setBtns(this.cultureBtn,this.advancedBtn,this.practiceBtn),this._rankProCtrl=new r(this.progressBar,482,this.progressTxt),this._startLv=0,this._matItem=new a,this.addChild(this._matItem),this._matItem.scale(.8,.8,!0),this._matItem.pos(320,909,!0),this._nameTxts=[this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5,this.attrName6],this._valueTxts=[this.attrValue1,this.attrValue2,this.attrValue3,this.attrValue4,this.attrValue5,this.attrValue6],this._upImgs=[this.attrUpImg1,this.attrUpImg2,this.attrUpImg3,this.attrUpImg4,this.attrUpImg5,this.attrUpImg6],this._upTxts=[this.attrUpTxt1,this.attrUpTxt2,this.attrUpTxt3,this.attrUpTxt4,this.attrUpTxt5,this.attrUpTxt6],this._stars=[this.starImg1,this.starImg2,this.starImg3,this.starImg4,this.starImg5,this.starImg6,this.starImg7,this.starImg8,this.starImg9,this.starImg10],this._showId=-1,this._modelShowIndex=0,this._nameStr="一二三四五六七八九十",this.btnClip=s.create("assets/effect/btn_light.atlas","btn_light",16),this.btnClip.setProperty(this,this.onekeyBtn.x-5,this.onekeyBtn.y-16,.8),this._magicClip=s.create("assets/effect/magic.atlas","magic",8,!0,7),this._magicClip.setProperty(this,this.illusionBtn.x-6,this.illusionBtn.y-6),this._modelClip=n.create(1024,1024,1024),this.rankBox.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.y=350},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.onChangeMenu),this.onAutoClick(this.onekeyBtn,this,this.onOnekey),this.onAutoClick(this.nextBtn,this,this.selectSkin,[1]),this.onAutoClick(this.lastBtn,this,this.selectSkin,[0]),this.onAutoClick(this.switchBtn,this,this.changeSkin),this.onAutoClick(this.ziDongBtn,this,this.ziDongBtnHandler),this.onAutoClick(this.illusionBtn,this,this.illusionHandler),this.onAutoGlobalEvt("DAY_PAY_UPDATE",this,this.isShowHuoQu),this.onAutoGlobalEvt("BAG_UPDATE",this,this.onChangeMenu)},u.prototype.onOpened=function(){e.prototype.onOpened.call(this),t.PetModel.instance.panelType=this._type,this.btnClip.play(),this._magicClip.play(),this._upgradeStar=-1,this._blessing=-1,this._btnGroup.selectedIndex=1,this.updatePanel(),this.searchFirstShowModel(),this.showZiDongBtn()},u.prototype.close=function(){e.prototype.close.call(this),this._tween&&this._tween.stop()},u.prototype.onChangeMenu=function(){},u.prototype.updatePanel=function(){},u.prototype.selectSkin=function(t){for(var e,i=0,n=0,s=this._showStars.length;n<s;n++){if(this._upgradeStar<=this._showStars[n]){i=n;break}i=s-1}this.lastBtn.visible=this.nextBtn.visible=!0,t?(e=this._showIds[++this._modelShowIndex],this.nextBtn.visible=this._modelShowIndex<this._showIds.length-1,this._modelShowIndex>=i?(this.nextBtn.gray=!0,this.nextBtn.mouseEnabled=!1):(this.nextBtn.gray=!1,this.nextBtn.mouseEnabled=!0)):(e=this._showIds[--this._modelShowIndex],this.lastBtn.visible=0<this._modelShowIndex,this.nextBtn.gray=!1,this.nextBtn.mouseEnabled=!0),this.selectShowModel(e,this._modelShowIndex),this.showStar(e)},u.prototype.showStar=function(t){var e=Math.floor(this._upgradeStar/10);10!=e?1==(this._upgradeStar/10).toString().length&&e--:e--,t==this._showId?(this.useImg.visible=!0,this.switchBtn.visible=!1):(this.useImg.visible=!1,this.switchBtn.visible=!0),this._modelShowIndex<e?this.setStarLv(10):this._modelShowIndex>e?(this.setStarLv(0),t!=this._disableId&&(this.switchBtn.visible=!1)):this.setStarLv(this._upgradeStar)},u.prototype.setStarLv=function(t){0!==t&&0==(t%=10)&&(t=10);for(var e=0;e<10;e++)this._stars[e].skin=e<t?"common/icon_tongyong_8.png":"common/icon_tongyong_7.png"},u.prototype.selectShowModel=function(t,e){var i=h.instance.getCfgById(t);this._modelClip.reset(t),this._modelClip.setActionType("show",0),this._modelClip.avatarScale=i[10]?i[10]:1,this._modelClip.avatarRotationX=i[6],this._modelClip.avatarRotationY=i[7],this._modelClip.avatarY=i[9],this._modelClip.avatarX=i[8],this.observationItem.data=[[this._modelClip,Math.round(t/1e3)]],this.petNameTxt.text=this._nameStr[e]+"阶·"+i[2]},u.prototype.searchFirstShowModel=function(){for(var t=0,e=0,i=this._showStars.length;e<i;e++){if(this._upgradeStar<=this._showStars[e]){t=e?e-1:0;break}this._upgradeStar,this._showStars[i-1],t=i-1}var n=this._showIds[t];for(this.nextBtn.gray=!1,this.nextBtn.mouseEnabled=!0,e=0,i=this._showIds.length;e<i;e++)if(n==this._showIds[e]){this._modelShowIndex=e,this.nextBtn.visible=e<this._showIds.length-1,this.lastBtn.visible=0<e;break}this.selectShowModel(n,t),this.showStar(this._showIds[this._modelShowIndex])},u.prototype.isShowHuoQu=function(){if(2==o.day_pay.DayPayModel.instance.giveState){var t=o.player.PlayerModel.instance.nDay,e=this._upgradeStar;e=0<e?e-1:e;var i=Math.floor(e/10)+1,n=o.main.tipDateCtrl.instance.getDateByPartAndLevel(this._bookType,i);if(n){var s=o.day_pay.DayPayModel.instance.getStateBydangCi(n[2]-1);if(t==n[1]&&s)return this._HuoQuItemItem||(this._HuoQuItemItem=new o.main.HuoQuItemItem,this.addChild(this._HuoQuItemItem),this._HuoQuItemItem.pos(96,885),this._HuoQuItemItem.visible=!0),void this._HuoQuItemItem.setOpenParam(n)}this._HuoQuItemItem&&(this._HuoQuItemItem.visible=!1)}},u.prototype.showZiDongBtn=function(){this.ziDongBtn.selected=this._model.autoBuyFlag},u.prototype.ziDongBtnHandler=function(){this._model.autoBuyFlag?(this._model.autoBuyFlag=!1,this.ziDongBtn.selected=!1):this._model.noTipFlag?(this._model.autoBuyFlag=!0,this.ziDongBtn.selected=!0):WindowManager.instance.openDialog(361,[this.itemArr,this._autoBuyType])},u.prototype.onOnekey=function(){this._model.autoBuyFlag?this._rankFunc():0<=this._matNumDiff?this._rankFunc():c.openLackPropAlert(this._matItem.itemData[0],-this._matNumDiff)},u.prototype.changeSkin=function(){this._changeFunc(this._showIds[this._modelShowIndex])},u.prototype.illusionHandler=function(){WindowManager.instance.open(this._illusionPanelId)},u.prototype.setAttrs=function(t,e){for(var i=o.common.AttrUtil.setAttrTxts(t,e,this._nameTxts,this._valueTxts,this._upImgs,this._upTxts,6),n=0,s=i;n<s;n++)this._nameTxts[n].y=this._valueTxts[n].y=this._upTxts[n].y=756+38*(n/2>>0),this._upImgs[n].y=this._nameTxts[n].y-5;for(n=i,s=this._nameTxts.length;n<s;n++)this._nameTxts[n].visible=this._valueTxts[n].visible=this._upImgs[n].visible=this._upTxts[n].visible=!1},u.prototype.updateInfo=function(t,e,i,n,s){var o=this;-1!==this._upgradeStar&&t!==this._upgradeStar?(Math.floor(t/10)>Math.floor(this._startLv/10)&&t%10==1||f.instance.play("assets/others/tx_jinjiechengong3.png"),this._tween&&(this._tween.stop(),this._tween=null),this._rankProCtrl.maxValue=s,this._tween=TweenJS.create(this._rankProCtrl).to({value:this._rankProCtrl.maxValue},400).onComplete(function(){o._rankProCtrl.value=e}).start()):-1!==this._blessing&&e>this._blessing?(this._tween&&(this._tween.stop(),this._tween=null),this._rankProCtrl.maxValue=s,this._rankProCtrl.value=this._blessing,this._tween=TweenJS.create(this._rankProCtrl).to({value:e},400).start()):(this._rankProCtrl.maxValue=s,this._rankProCtrl.value=e),this._upgradeStar=t,this._blessing=e,this.powerNum.value=this._model.rank[4].toString(),this.setAttrs(i,n);var a=i[2],r=[a[0],0,0,null];this._matItem.dataSource=r,this.itemArr=r;var l=g.instance.getItemCountById(a[0]);if(this._matItem.setNum(l+"/"+a[1],l<a[1]?"#ff7462":"#ffffff"),this._matNumDiff=l-a[1],this.btnClip.visible=0<=this._matNumDiff,!this._upgradeItems){this._upgradeItems=new Array;for(var h=this._cfg.skillIds,c=0,p=h.length;c<p;c++){var u=new y;this._upgradeItems.push(u),u.cfg=this._cfg.getCfgBySkillId(h[c]),this.rankBox.addChild(u),u.pos(110+102*c,475,!0)}}var d=this._model.rank[3];for(c=0,p=this._upgradeItems.length;c<p;c++)this._upgradeItems[c].skillInfo=d&&d.length>c?d[c]:null;var m=!n;(this.maxLvTxt.visible=m)&&(this.btnClip.visible=!1),this.blessTxt.visible=this.progressBg.visible=this.progressBar.visible=this.progressTxt.visible=this.autoBox.visible=this._matItem.visible=this.onekeyBtn.visible=!m,this.showStar(this._showIds[this._modelShowIndex]),Math.floor(t/10)>Math.floor(this._startLv/10)&&t%10==1&&(this.searchFirstShowModel(),this._startLv=t),this.isShowHuoQu()},p=u,t.RankBasePanel=p}(modules=modules||{}),function(t){var n,e,s,o,i;function a(){return null!==e&&e.apply(this,arguments)||this}n=t.pet||(t.pet={}),s=t.config.PetRankCfg,o=t.illusion.IllusionModel,e=n.RankBasePanel,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.bgImg.skin="magic_pet/bj_linbgchong.png",this._btnGroup.setFuncIds(2,44,4),this._cfg=s.instance,this._showIds=this._cfg.showIds,this._helpId=20002,this._type=1,this._showStars=this._cfg.showStars,this._disableId=2001,this._bookType=2,this._model=n.PetModel.instance,this._autoBuyType=0,this._rankFunc=n.PetCtrl.instance.rankPet.bind(n.PetCtrl.instance),this._changeFunc=n.PetCtrl.instance.changePetShow.bind(n.PetCtrl.instance),this._illusionPanelId=168,this.regGuideSpr(22,this.cultureBtn),this.regGuideSpr(24,this.advancedBtn),this.regGuideSpr(26,this.practiceBtn),this.regGuideSpr(25,this.onekeyBtn)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("PET_INITED",this,this.updatePanel),this.onAutoGlobalEvt("PET_UPDATE",this,this.updatePanel),this.onAutoGlobalEvt("PET_ZIDONG",this,this.showZiDongBtn),this.regAutoRP(this.cultureRP,["petFeedSkillRP","petFeedMatRP","showEquipPet"]),this.regAutoRP(this.advancedRP,["petRankSkillRP","petIllusionRP","petRankMatRP","petIllusionMasterRP"]),this.regAutoRP(this.practiceRP,["petRefineMaterialRP"]),this.regAutoRP(this.hhDotImg,["petIllusionRP","petIllusionMasterRP"])},a.prototype.onChangeMenu=function(){0==this._btnGroup.selectedIndex?WindowManager.instance.open(10):2==this._btnGroup.selectedIndex&&WindowManager.instance.open(125)},a.prototype.updatePanel=function(){this._showId=o.instance.magicShowId||this._showIds[0];var t=n.PetModel.instance._star,e=s.instance.getPetRankCfgBySt(t),i=s.instance.getPetRankCfgBySt(t+1);this.updateInfo(t,n.PetModel.instance._blessing,e,i,e[1])},i=a,n.PetRankPanel=i}(modules=modules||{}),function(r){var t,e,i,n,s,o,a,l,f,h;function c(){return null!==e&&e.apply(this,arguments)||this}t=r.pet||(r.pet={}),i=ui.PetRefineViewUI,n=r.bag.BaseItem,s=r.common.CustomClip,o=r.common.BtnGroup,a=r.common.FuncBtnGroup,l=r.bag.BagUtil,f=r.bag.BagModel,e=i,__extends(c,e),c.prototype.destroy=function(t){void 0===t&&(t=!0),this.btnClip=this.destroyElement(this.btnClip),this._btnGroup=this.destroyElement(this._btnGroup),this._typeGroup=this.destroyElement(this._typeGroup),this._upGradeEff=this.destroyElement(this._upGradeEff),e.prototype.destroy.call(this,t)},c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._matNumDiff=0,this._btnGroup=new a,this._btnGroup.setBtns(this.cultureBtn,this.advancedBtn,this.practiceBtn),this._typeGroup=new o,this._typeGroup.setBtns(this.type0Btn,this.type1Btn,this.type2Btn,this.type3Btn),this.sumAttrBtn.underline=!0,this._matItem=new n,this.addChild(this._matItem),this._matItem.scale(.8,.8,!0),this._matItem.pos(320,909,!0),this._nameTxts=[this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5,this.attrName6],this._valueTxts=[this.attrValue1,this.attrValue2,this.attrValue3,this.attrValue4,this.attrValue5,this.attrValue6],this._upImgs=[this.attrUpImg1,this.attrUpImg2,this.attrUpImg3,this.attrUpImg4,this.attrUpImg5,this.attrUpImg6],this._upTxts=[this.attrUpTxt1,this.attrUpTxt2,this.attrUpTxt3,this.attrUpTxt4,this.attrUpTxt5,this.attrUpTxt6],this._redDotImgs=[this.redDotImg_0,this.redDotImg_1,this.redDotImg_2,this.redDotImg_3],this.btnClip=s.create("assets/effect/btn_light.atlas","btn_light",16),this.btnClip.setProperty(this,this.onekeyBtn.x-5,this.onekeyBtn.y-16,.8),this._upGradeEff=CommonUtil.creatEff(this,"activate",3,0,!1),this._upGradeEff.visible=!1,this.refineBox.addChildren(this._upGradeEff)},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.onMenuChange),this.onAutoClick(this.onekeyBtn,this,this.onOnekey),this.onAutoClick(this.sumAttrBtn,this,this.onSumAttr),this.onAutoEvt(this._typeGroup,"change",this,this.updatePanel),this.onAutoEvt(this._upGradeEff,"complete",this,this.onSuccessEffComplete),this._typeGroup.selectedIndex=0},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),t.PetModel.instance.panelType=this._type,this.btnClip.play(),this._btnGroup.selectedIndex=2,this.searchOneType(!0)},c.prototype.onMenuChange=function(){},c.prototype.onOnekey=function(){0<=this._matNumDiff?this._refineFunc(this._typeGroup.selectedIndex):l.openLackPropAlert(this._matItem.itemData[0],-this._matNumDiff)},c.prototype.switchType=function(){switch(this._typeGroup.selectedIndex){case 0:this.selectedImg.pos(this.type0Btn.x,this.type0Btn.y);break;case 1:this.selectedImg.pos(this.type1Btn.x,this.type1Btn.y);break;case 2:this.selectedImg.pos(this.type2Btn.x,this.type2Btn.y);break;case 3:this.selectedImg.pos(this.type3Btn.x,this.type3Btn.y)}},c.prototype.setAttrs=function(){for(var t=this._cfg.getDataByIdLvField(this._typeGroup.selectedIndex,this._refineLv,3),e=this._cfg.getDataByIdLvField(this._typeGroup.selectedIndex,this._refineLv+1,3),i=r.common.AttrUtil.attrTxts(t,e,this._nameTxts,this._valueTxts,this._upImgs,this._upTxts),n=(i-1)/2>>0,s=0==n?794:1==n?776:756,o=0,a=i;o<a;o++)this._nameTxts[o].y=this._valueTxts[o].y=this._upTxts[o].y=s+38*(o/2>>0),this._upImgs[o].y=this._nameTxts[o].y-5},c.prototype.onSumAttr=function(){WindowManager.instance.openDialog(26,[this._str,this._fighting,this._attr,this._cfg.attrIndices])},c.prototype.searchOneType=function(l){var h=this;void 0===l&&(l=!1),console.log("........................searchOneType");for(var c=this._model.refine[0],t=this._typeGroup.selectedIndex,e=0,i=0;i<c.length;i++)if(t===c[i][0]){e=c[i][1];break}console.log("........................",e);var n=this._cfg.getDataByIdLvField(t,e,1),s=n[0],o=n[1],a=f.instance.getItemCountById(s);if(this._cfg.getDataByIdLvField(t,e,6)<PlayerModel.instance.level&&0<=a-o&&e!=this._cfg.getMaxLvByLv(t,e))this._typeGroup.selectedIndex=this._typeGroup.selectedIndex;else{for(var r=[this.type0Txt,this.type1Txt,this.type2Txt,this.type3Txt],p=function(t){for(var e=t,i=0,n=0;n<c.length;n++)if(e===c[n][0]){i=c[n][1];break}var s=u._cfg.getDataByIdLvField(e,i,1),o=s[0],a=s[1],r=f.instance.getItemCountById(o);if(u._cfg.getDataByIdLvField(e,i,6)<PlayerModel.instance.level&&0<=r-a&&i!=u._cfg.getMaxLvByLv(e,i))return Laya.timer.clearAll(u),l?u._typeGroup.selectedIndex=t:Laya.timer.once(300,u,function(){h._typeGroup.selectedIndex=t}),{value:void 0}},u=this,d=0;d<r.length;d++){var m=p(d);if("object"==typeof m)return m.value}Laya.timer.clearAll(this),l?this._typeGroup.selectedIndex=0:Laya.timer.once(300,this,function(){h._typeGroup.selectedIndex=0})}},c.prototype.updatePanel=function(){console.log("..............updatePanel"),this.switchType();var t=this._model.refine;if(t){var e=t[0];this._fighting=t[1],this._attr=t[2];for(var i=[this.type0Txt,this.type1Txt,this.type2Txt,this.type3Txt],n=0;n<i.length;n++){for(var s=n,o=0,a=0;a<e.length;a++)if(s===e[a][0]){o=e[a][1];break}i[n].text=o+"/"+this._cfg.getMaxLvByLv(s,o),s===this._typeGroup.selectedIndex&&(this._refineLv=o);var r=this._cfg.getDataByIdLvField(s,o,1),l=r[0],h=r[1],c=f.instance.getItemCountById(l);this._cfg.getDataByIdLvField(s,o,6)<PlayerModel.instance.level&&0<=c-h&&o!=this._cfg.getMaxLvByLv(s,o)?this._redDotImgs[n].visible=!0:this._redDotImgs[n].visible=!1,this._cfg.getDataByIdLvField(s,o,6)>PlayerModel.instance.level&&o!=this._cfg.getMaxLvByLv(s,o)&&(i[n].text=o+"/"+o)}this.setAttrs(),this.powerNum.value=t[1].toString();var p=this._cfg.getDataByIdLvField(this._typeGroup.selectedIndex,this._refineLv,1),u=[p[0],0,0,null];this._matItem.dataSource=u;var d=f.instance.getItemCountById(p[0]);this._matItem.setNum(d+"/"+p[1],d<p[1]?"#ff7462":"#ffffff"),this._matNumDiff=d-p[1],this.btnClip.visible=0<=this._matNumDiff,this._matItem.visible=!0;var m=this._cfg.getDataByIdLvField(this._typeGroup.selectedIndex,this._refineLv,6);this._cfg.has(this._typeGroup.selectedIndex,this._refineLv+1)?m>PlayerModel.instance.level?(this.refineConTxt.text=this._refineTypeNames[this._typeGroup.selectedIndex]+"修炼已达上限，主角达到"+m+"级可突破上限。",this.refineConTxt.fontSize=24,this.refineConTxt.color="#FF0000",this.refineConTxt.y=915,this.refineConTxt.visible=!0,this.onekeyBtn.visible=!1,this.btnClip.visible=!1):(this.refineConTxt.visible=!1,this.onekeyBtn.visible=!0):(this.refineConTxt.text="已满级",this.refineConTxt.fontSize=30,this.refineConTxt.color="#00AD35",this.refineConTxt.y=912,this.refineConTxt.visible=!0,this._matItem.visible=this.onekeyBtn.visible=!1,this.btnClip.visible=!1)}},c.prototype.onSuccessEffComplete=function(){this.setUpgradeEffPlay(!1)},c.prototype.setUpgradeEffPlay=function(t){t?s.thisPlay(this._upGradeEff):s.thisStop(this._upGradeEff)},c.prototype.showSuccessEffect=function(){this.setUpgradeEffPlay(!0)},c.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clearAll(this.searchOneType),s.thisStop(this._upGradeEff)},h=c,t.RefineBasePanel=h}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.pet||(t.pet={}),n=t.config.PetRefineCfg,i=e.RefineBasePanel,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="magic_pet/bj_lingchong_02.jpg",this._btnGroup.setFuncIds(2,44,4),this._refineTypeNames=["悟性","潜能","根骨","灵体"],this._helpId=20003,this._type=1,this._refineFunc=e.PetCtrl.instance.riseRefinePet.bind(e.PetCtrl.instance),this._cfg=n.instance,this._str="灵宠修炼总属性",this._model=e.PetModel.instance,this.regGuideSpr(22,this.cultureBtn),this.regGuideSpr(24,this.advancedBtn),this.regGuideSpr(26,this.practiceBtn),this.regGuideSpr(27,this.onekeyBtn)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("PET_INITED",this,this.searchOneType),this.onAutoGlobalEvt("PET_UPDATE",this,this.searchOneType),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updatePanel),this.onAutoGlobalEvt("PET_UP_REFINE",this,this.showSuccessEffect),this.regAutoRP(this.cultureRP,["petFeedSkillRP","petFeedMatRP","showEquipPet"]),this.regAutoRP(this.advancedRP,["petRankSkillRP","petIllusionRP","petRankMatRP","petIllusionMasterRP"]),this.regAutoRP(this.practiceRP,["petRefineMaterialRP"])},o.prototype.showSuccessEffect=function(){0==this._typeGroup.selectedIndex?this._upGradeEff.pos(207,49):1==this._typeGroup.selectedIndex?this._upGradeEff.pos(377,208):2==this._typeGroup.selectedIndex?this._upGradeEff.pos(207,312):this._upGradeEff.pos(33,209),i.prototype.showSuccessEffect.call(this)},o.prototype.onMenuChange=function(){0==this._btnGroup.selectedIndex?WindowManager.instance.open(10):1==this._btnGroup.selectedIndex&&WindowManager.instance.open(124)},s=o,e.PetRefinePanel=s}(modules=modules||{}),function(t){var s,o,e;function i(){this.init()}s=t.config||(t.config={}),o=t.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this.showIds=[],this._attrIndices=[],this._tab={},this._itemIdToShowId={};for(var t=GlobalData.getConfig("pet_magicshow"),e=0,i=t.length;e<i;e++){var n=t[e][0];-1===this.showIds.indexOf(n)&&this.showIds.push(n),this._tab[n]=t[e],this._itemIdToShowId[t[e][2][0]]=n}this._attrIndices=s.BlendCfg.instance.getCfgById(22006)[1]},i.prototype.has=function(t,e){if(!this._tab[t])return!1;if(null!=e){if(e<0)return!1;if(this._tab[t][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){if(!this._tab[t])throw new Error("id不存在!"+t);e<0&&(e=0);var n=this._tab[t][1];if(n<e)return null;if(1===i)return this._tab[t][2];if(0===i)return this._tab[t][3]*e;if(2===i)return this._tab[t][4];if(3!==i)return 4===i?n:void 0;var s=this._tab[t][5];return o.calcAttrs(s,e)},Object.defineProperty(i.prototype,"attrIndices",{get:function(){return this._attrIndices},enumerable:!0,configurable:!0}),i.prototype.getItemIdBayShowId=function(t){return this._itemIdToShowId[t]},e=i,s.PetMagicShowCfg=e}(modules=modules||{}),function(s){var t,e,f,g,y,_,v,I,b,r,i;function n(){this._dic2=new e,this._huanhuaActId=-1,this.noTipFlag=!1,this.autoBuyFlag=!1}t=s.pet||(s.pet={}),e=Laya.Dictionary,f=s.config.PetRefineCfg,g=s.bag.BagModel,y=s.config.PetFeedCfg,_=s.redPoint.RedPointCtrl,v=s.config.PetMagicShowCfg,I=s.player.PlayerModel,b=s.config.PetRankCfg,r=s.config.PetFazhenCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.dataInit=function(t,e,i,n,s){this.feedSkills=t[2],this._star=e[0],this._blessing=e[1],this.upgradeSkills=e[3],this.feed=t,this.rank=e,this.refine=i,this.magicShow=s,this.InitializeFaZhen(n),this.checkRedPoint(),GlobalData.dispatcher.event("PET_INITED")},n.prototype.InitializeFaZhen=function(t){this._fazhen=t,this._dic2.clear();for(var e=this._fazhen[1],i=0,n=e.length;i<n;i++)this._dic2.set(e[i][0],e[i]);this.fazhenId=this._fazhen[0],this.fighting=this._fazhen[2],this.attr=this._fazhen[3]},Object.defineProperty(n.prototype,"huanhuaList",{get:function(){return this._dic2},enumerable:!0,configurable:!0}),n.prototype.popActivateAlert=function(){null==this._dic2.get(this._huanhuaActId)?WindowManager.instance.openDialog(92,[this._huanhuaActId,7]):1==this._dic2.get(this._huanhuaActId)[1]&&WindowManager.instance.openDialog(92,[this._huanhuaActId,7])},n.prototype.huanhuaRedPoint=function(){for(var t=0,e=r.instance.qualitys.length;t<e;t++)if(this.qualityType(r.instance.qualitys[t]))return void _.instance.setRPProperty("petFazhenJipinRP",!0);_.instance.setRPProperty("petFazhenJipinRP",!1)},n.prototype.qualityType=function(t){var e=r.instance.getSkinCfgByType(t);if(e)for(var i=0,n=e.length;i<n;i++){var s=0,o=e[i];this._dic2.get(o)&&(s=this._dic2.get(o)[1]);var a=this.judge(o,s);if(a)return a}return!1},n.prototype.qualityActivation=function(t){var e=r.instance.getSkinCfgByType(t);if(e)for(var i=0,n=e.length;i<n;i++){var s=e[i];if(0==this.fazhenId){if(this._dic2.get(s))return i}else if(this.fazhenId==s)return i}return-1},n.prototype.judge=function(t,e){var i=r.instance.getDataByIdLvField(t,e,1);return!!r.instance.has(t,e+1)&&g.instance.getItemCountById(i[0])>=i[1]},n.prototype.updatePetInfo=function(t){var e=t[0];this.feedSkills=e[2];var i=t[1],n=i[0];n%10==1&&n>this._star&&1!=n&&WindowManager.instance.openDialog(92,[s.illusion.IllusionModel.instance.magicShowId,6]),this._star=i[0],this._blessing=i[1],this.upgradeSkills=i[3],this.feed=e,this.rank=i,this.refine=t[3],this.magicShow=t[2],this.InitializeFaZhen(t[4]),this.checkRedPoint(),GlobalData.dispatcher.event("FZHUANHUA_UPDATA"),GlobalData.dispatcher.event("PET_UPDATE")},Object.defineProperty(n.prototype,"magicShow",{get:function(){return this._magicShow},set:function(t){if(this._magicShow=t,this._showTable=this._showTable||{},t)for(var e=this._magicShow[0],i=0,n=e.length;i<n;i++)this._showTable[e[i][0]]=e[i]},enumerable:!0,configurable:!0}),n.prototype.getShowInfoById=function(t){return this._showTable?this._showTable[t]:null},n.prototype.feedPet=function(t,e){this.feed[1]=e,this.feed[0]=t,GlobalData.dispatcher.event("PET_UPDATE")},n.prototype.rankPet=function(t){var e=t[2];this._blessing=e,GlobalData.dispatcher.event("PET_UPDATE")},n.prototype.checkRedPoint=function(){this.huanhuaRedPoint();var t=!1;if(this.feedSkills){for(var e=0,i=this.feedSkills.length;e<i;e++)if(0<this.feedSkills[e][2]){t=!0;break}for(_.instance.setRPProperty("petFeedSkillRP",t),t=!1,e=0,i=this.upgradeSkills.length;e<i;e++)if(0<this.upgradeSkills[e][2]){t=!0;break}_.instance.setRPProperty("petRankSkillRP",t),this.updateBag()}},n.prototype.updateBag=function(){if(this.feed){if(!(l=this.feed[0]))return;var t=this.feed[1],e=y.instance.getPetFeedCfgByLv(l);if(y.instance.getPetFeedCfgByLv(l+1)){var i=e[1]-t,n=e[2],s=Math.ceil(i/n[2]);_.instance.setRPProperty("petFeedMatRP",g.instance.getItemCountById(n[0])>=s)}else _.instance.setRPProperty("petFeedMatRP",!1)}if(this.rank){if(-1==(l=this.rank[0]))return;t=this.rank[1],e=b.instance.getPetRankCfgBySt(l),b.instance.getPetRankCfgBySt(l+1)?(i=e[1]-t,n=e[2],s=Math.ceil(i/n[2]),_.instance.setRPProperty("petRankMatRP",g.instance.getItemCountById(n[0])>=s)):_.instance.setRPProperty("petRankMatRP",!1)}if(this.refine){for(var o=this.refine[0],a=!1,r=0;r<4;r++){for(var l=0,h=r,c=0,p=o.length;c<p;c++){var u=o[c];if(u[0]===r){l=u[1];break}}var d=f.instance.getDataByIdLvField(r,l,1);if(g.instance.getItemCountById(d[0])>=d[1]&&f.instance.getDataByIdLvField(r,l,6)<=I.instance.level&&l!=f.instance.getMaxLvByLv(h,l)){a=!0;break}}_.instance.setRPProperty("petRefineMaterialRP",a)}if(this._magicShow){var m=v.instance.showIds;for(c=0,p=m.length;c<p;c++)if(l=0,this._showTable[m[c]]&&(l=this._showTable[m[c]][1]),v.instance.has(m[c],l+1)&&(d=v.instance.getDataByIdLvField(m[c],l,1),g.instance.getItemCountById(d[0])>=d[1]))return void _.instance.setRPProperty("petIllusionRP",!0);_.instance.setRPProperty("petIllusionRP",!1)}},n.prototype.haveItem=function(t,e){return void 0===e&&(e=!0),!(!s.funcOpen.FuncOpenModel.instance.getFuncIsOpen(122)&&e)&&r.instance.getItemIdBayShowId(t)&&!this.getItemIdBayShowId(t)},n.prototype.getItemIdBayShowId=function(t){var e=r.instance.getItemIdBayShowId(t);return!!e&&!!this._dic2.get(e)},n.prototype.panDuanpingzhi=function(t){var e=r.instance.getItemIdBayShowId(t);if(e){var i=r.instance.getDataByIdLvField(e,Number.MIN_VALUE,5);return r.instance.qualitys.indexOf(i)}return-1},n.prototype.haveItemHh=function(t,e){return void 0===e&&(e=!0),!(!s.funcOpen.FuncOpenModel.instance.getFuncIsOpen(3)&&e)&&v.instance.getItemIdBayShowId(t)&&!this.getItemIdBayShowIdHh(t)},n.prototype.getItemIdBayShowIdHh=function(t){var e=v.instance.getItemIdBayShowId(t);return!!e&&!!this.getShowInfoById(e)},n._instance=new n,i=n,t.PetModel=i}(modules=modules||{}),function(t){var i,e,n,s,o,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}i=t.pet||(t.pet={}),n=t.common.CommonUtil,s=t.core.BaseCtrl,o=t.notice.SystemNoticeManager,a=t.illusion.IllusionModel,e=s,__extends(l,e),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16777616,this.getPetInfoReply),this.subscribe(16777617,this.feedPetReply),this.subscribe(16777620,this.rankPetReply),this.subscribe(16777624,this.riseRefinePetReply),this.subscribe(16777618,this.updatePet),this.subscribe(16777619,this.skillUpReply),this.subscribe(16777621,this.changePetShowReply),this.subscribe(16777625,this.magicReply),this.subscribe(16777626,this.changeMagicReply),this.onGlobal("BAG_DATA_GOT",this.bagUpdateHandler),this.onGlobal("BAG_UPDATE",this.bagUpdateHandler),this.onGlobal("PLAYER_UPDATE_LEVEL",this.bagUpdateHandler),FuncOpenCtrl.instance.registeFuncReq(2,2097352),this.getPetInfo()},l.prototype.getPetInfo=function(){this.publish(2097352,null)},l.prototype.getPetInfoReply=function(t){a.instance.magicShowId=t[5],i.PetModel.instance.dataInit(t[0],t[1],t[3],t[4],t[2])},l.prototype.updatePet=function(t){a.instance.magicShowId=t[5],i.PetModel.instance.updatePetInfo(t)},l.prototype.feedPet=function(){this.publish(2097353,null)},l.prototype.feedPetReply=function(t){var e=t[0];0!=e?n.noticeError(e):i.PetModel.instance.feedPet(t[1],t[2])},l.prototype.rankPet=function(){this.publish(2097354,[i.PetModel.instance.autoBuyFlag?1:0])},l.prototype.rankPetReply=function(t){var e=t[0];0===e?i.PetModel.instance.rankPet(t):12012==e?i.PetModel.instance._star!==t[1]||i.PetModel.instance._blessing!==t[2]?i.PetModel.instance.rankPet(t):n.goldNotEnoughAlert():n.noticeError(e)},l.prototype.riseRefinePet=function(t){this.publish(2097359,[t])},l.prototype.riseRefinePetReply=function(t){var e=t[0];0===e?(GlobalData.dispatcher.event("PET_UP_REFINE"),GlobalData.dispatcher.event("PET_UPDATE")):n.noticeError(e)},l.prototype.skillUp=function(t,e){this.publish(2097355,[t,e])},l.prototype.skillUpReply=function(t){},l.prototype.changePetShow=function(t){this.publish(2097356,[t])},l.prototype.changePetShowReply=function(t){var e=t[0];n.noticeError(e),t[0]||(o.instance.addNotice("更换成功"),a.instance.magicShowId=t[1],GlobalData.dispatcher.event("PET_UPDATE"))},l.prototype.bagUpdateHandler=function(){i.PetModel.instance.checkRedPoint(),GlobalData.dispatcher.event("PET_UPDATE")},l.prototype.magicLev=function(t){this.publish(2097360,[t])},l.prototype.changeMagic=function(t){this.publish(2097361,[t])},l.prototype.magicReply=function(t){t[0]?n.noticeError(t[0]):(i.PetModel.instance.popActivateAlert(),GlobalData.dispatcher.event("FZHUANHUA_UPDATA"),i.PetModel.instance.huanhuaRedPoint())},l.prototype.changeMagicReply=function(t){n.noticeError(t[0]),t[0]||o.instance.addNotice("更换成功"),i.PetModel.instance.fazhenId=t[1],GlobalData.dispatcher.event("FZCHANGE_HUANHUA"),GlobalData.dispatcher.event("SHOW_MASTER_CHANGE")},r=l,i.PetCtrl=r}(modules=modules||{}),function(r){var t,e,i,n,s,l,o,h,a,c,p,u,d;function m(){return null!==e&&e.apply(this,arguments)||this}t=r.pet||(r.pet={}),i=Laya.Event,n=r.common.CommonUtil,s=r.common.CustomList,l=r.common.CustomClip,o=r.common.AvatarClip,h=r.bag.BagModel,a=r.effect.SuccessEffectCtrl,c=r.bag.BaseItem,p=r.bag.BagUtil,u=r.config.ExteriorCfg,e=ui.CircleViewUI,__extends(m,e),m.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._list=this.destroyElement(this._list),this._modelClip=this.destroyElement(this._modelClip),this._qualityList=this.destroyElement(this._qualityList),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},m.prototype.initialize=function(){e.prototype.initialize.call(this),this._showId=-1,this.centerX=0,this.centerY=0,this._recordSelect=[0,0],this.sumAttrBtn.underline=!0,this.creatEffect(),this._consumables=new c,this._consumables.pos(320,909),this._consumables.scale(.8,.8),this.addChild(this._consumables),this._nameArr=[this.nameTxt_1,this.nameTxt_2,this.nameTxt_3,this.nameTxt_4,this.nameTxt_5,this.nameTxt_6],this._upAttrTxts=[this.liftTxt_1,this.liftTxt_2,this.liftTxt_3,this.liftTxt_4,this.liftTxt_5,this.liftTxt_6],this._arrowImgs=[this.upArrImg_1,this.upArrImg_2,this.upArrImg_3,this.upArrImg_4,this.upArrImg_5,this.upArrImg_6],this._list=new s,this._list.spaceX=25,this._list.scrollDir=2,this._list.width=650,this._list.height=152,this._list.vCount=1,this._list.x=35,this._list.y=760,this.huanhuaPanel.addChild(this._list),this._qualityList=new s,this._qualityList.width=620,this._qualityList.height=50,this._qualityList.hCount=1,this._qualityList.spaceX=0,this._qualityList.spaceY=0,this._qualityList.x=0,this._qualityList.y=0,this._qualityList.scrollDir=2,this.pingZhiListBox.addChild(this._qualityList),this._numDiff=0},m.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.initQualityList()},m.prototype.close=function(){e.prototype.close.call(this),l.thisStop(this._btnClip)},m.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._tiaoZhuanItemId=t},m.prototype.initQualityList=function(){this._qualityList.datas=[3,4,5];var t=this._qualityList.datas.length,e=124*(t=5<t?5:t)+(t-1)*this._qualityList.spaceX;if(this._qualityList.x=(this.pingZhiListBox.width-e)/2,this._tiaoZhuanItemId){var i=this._model.panDuanpingzhi(this._tiaoZhuanItemId);-1!=i?(this._qualityList.selectedIndex=i,this.selectQualityById(this._tiaoZhuanItemId)):this.searchOne()}else this.searchOne();this._tiaoZhuanItemId=null,l.thisStop(this._btnClip),this.changePetHandler()},m.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.masterBtn,WindowManager.instance,WindowManager.instance.open,[983]),this.onAutoClick(this.aboutBtn,this,this.openAbout),this.onAutoClick(this.goBtn,this,this.goBtnFunc),this.onAutoClick(this.changeImg,this,this.changefunc),this.onAutoEvt(this._list,"select",this,this.selectSkinItem),this.onAutoClick(this.sumAttrBtn,this,this.openSumAttr),this.onAutoEvt(this._qualityList,i.SELECT,this,this.listHandler),this.regAutoRP(this.weaponRP,["weaponFazhenJipinRP","weaponFazhenZhenpinRP","weaponFazhenJuepinRP"]),this.regAutoRP(this.petRP,["petFazhenJipinRP","petFazhenZhenpinRP","petFazhenJuepinRP"]),this.regAutoRP(this.masterRP,["weaponCircleMasterRP","petCircleMasterRP"])},m.prototype.listHandler=function(){-1!=this._qualityList.selectedIndex&&this.selectBtnGroup2()},m.prototype.showEffect1=function(){for(var t=this._model._huanhuaActId,e=0,i=this._model.huanhuaList.keys.length;e<i;e++)t==this._model.huanhuaList.keys[e]&&1<this._model.huanhuaList.get(t)[1]&&a.instance.play("assets/others/tx_jinjiechengong7.png");this.changePetHandler()},m.prototype.searchOne=function(){for(var t=void 0,e=0,i=this._cfg.qualitys.length;e<i;e++)if(this._model.qualityType(this._cfg.qualitys[e])){t=e;break}var n=void 0;if(null==t)for(e=0,i=this._cfg.qualitys.length;e<i;e++){var s=this._model.qualityActivation(this._cfg.qualitys[e]);if(-1!=s){t=e,n=s;break}}this._qualityList.selectedIndex=null==t?0:t,this.selectQuality(n)},m.prototype.changePetHandler=function(){this.atkMsz.value=this._model.fighting.toString();var t=this.jieCharMsz.width+5+this.jieMsz.width,e=(this.width-t)/2;this.jieMsz.x=e,this.jieCharMsz.x=e+this.jieMsz.width+5,this.selectBtnGroup2()},m.prototype.selectSkinItem=function(){this._list.selectedData&&(this._showId=this._list.selectedData);var t=this._showId;if(t&&!(t<0)){var e=u.instance.getCfgById(t);this._modelClip.reset(0,0,0,0,t),this._modelClip.avatarRotationX=e[6],this._modelClip.avatarRotationY=e[7],this._modelClip.avatarScale=e[10]?e[10]:1,this._modelClip.avatarY=e[9],this._modelClip.avatarX=e[8],this.observationItem.data=[[this._modelClip,Math.round(t/1e3)]],this.NameTxt.text=e[2],t===this._model.fazhenId?(this.changeImg.visible=!1,this.useImg.visible=!0):(this.changeImg.visible=!0,this.useImg.visible=!1),this._model.huanhuaList.get(t)?(this.jieMsz.visible=!0,this.jieCharMsz.visible=!0,this.noActImg.visible=!1,this.tipBox.visible=!1,this.goBtn.label="升阶",this.jieMsz.value=this._model.huanhuaList.get(t)[1]):(this.jieMsz.visible=!1,this.jieCharMsz.visible=!1,this.noActImg.visible=!0,this.tipBox.visible=!0,this.goBtn.label="激活",this.changeImg.visible=!1,this.showTip(t));var i=this.jieMsz.value.length,n=22*i+this.atkMsz.spaceX*(i-1),s=this.jieCharMsz.width+5+n,o=(this.width-s)/2;this.jieMsz.x=o,this.jieCharMsz.x=o+n+5;for(var a=0,r=0,l=this._model.huanhuaList.keys.length;r<l;r++)t==this._model.huanhuaList.keys[r]&&(a=this._model.huanhuaList.get(this._model.huanhuaList.keys[r])[1]);this.setAttr(t,a),-1!=this._list.selectedIndex&&(this._recordSelect=[this._qualityList.selectedIndex,this._list.selectedIndex])}},m.prototype.showTip=function(t){for(var e=this._cfg.getDataByIdLvField(t,Number.MIN_VALUE,2),i="",n="",s=e.length,o=0,a=e.length;o<a;o++)"#"!==e[o]?o<s==1?i+=e[o]:n+=e[o]:(n+="+",s=o);this.tipTxt_1.text=i,this.tipTxt_2.text=n},m.prototype.selectBtnGroup2=function(){var t=this._qualityList.selectedIndex,e=this._cfg.getSkinCfgByType(this._cfg.qualitys[t]),i=e.length,n=100*i+this._list.spaceX*(i-1);this._list.x=this.width/2-n/2,this._list.datas=e,this._list.selectedData&&(this._showId=this._list.selectedData),this._qualityList.selectedIndex==this._recordSelect[0]?this._list.selectedIndex=this._recordSelect[1]:this._list.selectedIndex=0},m.prototype.selectQuality=function(t){void 0===t&&(t=void 0),this.selectBtnGroup2();for(var e=0,i=this._list.datas.length;e<i;e++){var n=this._model.huanhuaList.get(this._list.datas[e])?this._model.huanhuaList.get(this._list.datas[e])[1]:0,s=this._cfg.getDataByIdLvField(this._list.datas[e],n,1),o=s[0],a=s[1];if(h.instance.getItemCountById(o)>=a)return this._list.selectedIndex=e,void(this._recordSelect=[this._qualityList.selectedIndex,this._list.selectedIndex])}this._list.selectedIndex=t||0,this._recordSelect=[this._qualityList.selectedIndex,this._list.selectedIndex]},m.prototype.selectQualityById=function(t){this.selectBtnGroup2();for(var e=0,i=this._list.datas.length;e<i;e++){var n=this._model.huanhuaList.get(this._list.datas[e])?this._model.huanhuaList.get(this._list.datas[e])[1]:0;if(this._cfg.getDataByIdLvField(this._list.datas[e],n,1)[0]==t)return this._list.selectedIndex=e,this._recordSelect=[this._qualityList.selectedIndex,this._list.selectedIndex],void this._list.scrollToIndex(this._list.selectedIndex)}this._list.selectedIndex=0,this._recordSelect=[this._qualityList.selectedIndex,this._list.selectedIndex]},m.prototype.setAttr=function(t,e){var i=this._cfg.getDataByIdLvField(t,e+1,3),n=this._cfg.getDataByIdLvField(t,e,3),s=r.common.AttrUtil.attrTxts(n,i,this._nameArr,null,this._arrowImgs,this._upAttrTxts);s<=2?this.textBackImg.height=70:s<=4?this.textBackImg.height=110:s<=6&&(this.textBackImg.height=150);var o=this._cfg.getDataByIdLvField(t,e,1);if(this.fullLevelImg.visible=!1,this._cfg.has(t,e+1)){this._consumables.visible=!0,this.goBtn.visible=!0;var a=h.instance.getItemCountById(o[0]);this._consumables.dataSource=[o[0],0,0,null],this._consumables.setNum(a+"/"+o[1],a<o[1]?"#ff7462":"#ffffff"),this._numDiff=a-o[1],0<=this._numDiff?l.thisPlay(this._btnClip):l.thisStop(this._btnClip)}else this._consumables.visible=!1,this.goBtn.visible=!1,this.fullLevelImg.visible=!0,l.thisStop(this._btnClip)},m.prototype.creatEffect=function(){this._btnClip=l.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.goBtn.x-5,this.goBtn.y-10,!0),this._btnClip.scale(.8,.8,!0),this._btnClip.visible=!1,this._modelClip=o.create(1024,1024,1024),this.huanhuaPanel.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.y=450},m.prototype.goBtnFunc=function(){var t=this._consumables.itemData[0];0<=this._numDiff?(this._model._huanhuaActId=this._showId,this._ctrl.magicLev(this._showId)):p.openLackPropAlert(t,-this._numDiff)},m.prototype.changefunc=function(){this._ctrl.changeMagic(this._showId)},m.prototype.openAbout=function(){n.alertHelp(this._helpId)},m.prototype.openSumAttr=function(){WindowManager.instance.openDialog(26,[this._attrAlertStr,this._model.fighting,this._model.attr,this._attrAlertIndices])},d=m,t.CircleBasePanel=d}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.pet||(t.pet={}),n=t.pet.PetModel,s=t.pet.PetCtrl,o=t.config.PetFazhenCfg,i=e.CircleBasePanel,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list.itemRender=e.MPItem,this._qualityList.itemRender=e.PetCircleOptionsItem,this.regGuideSpr(29,this.goBtn),this._model=n.instance,this._ctrl=s.instance,this._helpId=20031,this._attrAlertStr="灵宠法阵总属性",this._cfg=o.instance,this._attrAlertIndices=this._cfg.huanhuaAttrIndices,this.bgImg.skin="magic_pet/bj_linbgchongFaZhen.jpg",this.petBtn.selected=!0,this.weaponBtn.selected=!1},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.weaponBtn,WindowManager.instance,WindowManager.instance.open,[179]),this.onAutoGlobalEvt("FZHUANHUA_UPDATA",this,this.showEffect1),this.onAutoGlobalEvt("FZCHANGE_HUANHUA",this,this.selectBtnGroup2)},a=r,e.PetCirclePanel=a}(modules=modules||{}),function(t){var e,i;function n(t,e,i){this._list=t,this._preBtn=e,this._nextBtn=i,this._scrollDis=10,this._scrollDisTime=200}e=t.common||(t.common={}),n.prototype.addListeners=function(){this._preBtn.on("click",this,this.preHandler),this._nextBtn.on("click",this,this.nextHandler)},n.prototype.removeListeners=function(){this._preBtn.off("click",this,this.preHandler),this._nextBtn.off("click",this,this.nextHandler)},Object.defineProperty(n.prototype,"scrollDis",{get:function(){return this._scrollDis},set:function(t){this._scrollDis=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollDisTime",{set:function(t){this._scrollDisTime=t},enumerable:!0,configurable:!0}),n.prototype.preHandler=function(){TweenJS.create(this._list).to({scrollPos:this._list.scrollPos-this._scrollDis},this._scrollDisTime).start()},n.prototype.nextHandler=function(){TweenJS.create(this._list).to({scrollPos:this._list.scrollPos+this._scrollDis},this._scrollDisTime).start()},n.prototype.destroy=function(){this._list=null,this._preBtn=null,this._nextBtn=null},i=n,e.ListWithArrowCtrl=i}(modules=modules||{}),function(s){var d,e,t,i,p,m,n,f,g,y,o,a,r,l,u,h;function c(){return null!==e&&e.apply(this,arguments)||this}d=s.illusion||(s.illusion={}),t=ui.IllusionViewUI,i=s.common.CommonUtil,p=s.pet.PetModel,m=s.config.ExteriorCfg,n=s.bag.BaseItem,f=s.bag.BagModel,g=s.ride.RideModel,y=s.config.RideMagicShowCfg,o=s.bag.BagUtil,a=s.common.CustomClip,r=s.common.AvatarClip,l=s.common.ListWithArrowCtrl,u=s.config.PetMagicShowCfg,e=t,__extends(c,e),Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),this._modelClip=this.destroyElement(this._modelClip),this._listCtrl=this.destroyElement(this._listCtrl),this.observationItem=this.destroyElement(this.observationItem),Laya.timer.clear(this,this.setBtnVisible),e.prototype.destroy.call(this,t)},c.prototype.onEvt=function(){this.onAutoClick(this.closeBtn,this,this.openJinjiePanel),e.prototype.onEvt.call(this),this.onAutoGlobalEvt("PET_UPDATE",this,this.updatePetInfo),this.onAutoGlobalEvt("PET_INITED",this,this.updatePetInfo),this.onAutoGlobalEvt("PET_HUANHUA_SHOWID",this,this.selectHandler),this.onAutoGlobalEvt("RIDE_HUANHUA_SHOWID",this,this.selectHandler),this.onAutoGlobalEvt("PET_HUANHUA_SHOWID",this,this.updatePetInfo),this.onAutoGlobalEvt("RIDE_HUANHUA_SHOWID",this,this.updatePetInfo),this.onAutoGlobalEvt("RIDE_UPDATE",this,this.updatePetInfo),this.onAutoClick(this.tipsBtn,this,this.tipsHandler),this.onAutoClick(this.upgradeBtn,this,this.upgrade),this.onAutoClick(this.switchBtn,this,this.switchHandler),this.onAutoClick(this.totalAttrTxt,this,this.totalAttrHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoClick(this.masterBtn,this,function(){WindowManager.instance.open(908)}),this.regAutoRP(this.illusionRP,["weaponIllusionRP"]),this.regAutoRP(this.masterRP,["weaponIllusionMasterRP"]),this._listCtrl.addListeners()},c.prototype.offEvt=function(){this._listCtrl.removeListeners(),e.prototype.offEvt.call(this)},c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._nameTxts=[this.nameTxt1,this.nameTxt2,this.nameTxt3,this.nameTxt4,this.nameTxt5,this.nameTxt6],this._valueTxts=[this.valueTxt1,this.valueTxt2,this.valueTxt3,this.valueTxt4,this.valueTxt5,this.valueTxt6],this._upImgs=[this.upImg1,this.upImg2,this.upImg3,this.upImg4,this.upImg5,this.upImg6],this._upTxts=[this.upTxt1,this.upTxt2,this.upTxt3,this.upTxt4,this.upTxt5,this.upTxt6],this.totalAttrTxt.underline=!0,this._list=s.common.SimpleList.create(d.IllusionItem,100,125,2,1,30,0),this._list.width=490,this._list.height=142,this._list.pos(114,762,!0),this.addChild(this._list),this._listCtrl=new l(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=this._list.width+this._list.spaceX,this._bagItem=new n,this.addChild(this._bagItem),this._bagItem.pos(320,900,!0),this._bagItem.scale(.8,.8),this._btnClip=a.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.upgradeBtn.addChild(this._btnClip),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this._modelClip=r.create(1024,1024,1024),this.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.y=475,this._curDistance=0},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),p.instance.panelType=0,this._btnClip.play(),this._selectedId=-1,this._tiaoZhuanItemId?this.selectQualityById(this._tiaoZhuanItemId):this.setListIndex(),this.updatePetInfo(),this._tiaoZhuanItemId=null,this._list.scrollTo(this._curDistance),Laya.timer.frameLoop(1,this,this.setBtnVisible)},c.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._tiaoZhuanItemId=t},c.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.setBtnVisible)},c.prototype.setListIndex=function(){var t=y.instance.showIds;this._maxDistance=130*t.length-520;for(var e=void 0,i=0,n=(this._list.datas=t).length;i<n;i++){var s=0,o=g.instance.getShowInfoById(t[i]);if(o&&(s=o[1]),y.instance.has(t[i],s+1)){var a=y.instance.getDataByIdLvField(t[i],s,1),r=a[0];if(a[1]<=f.instance.getItemCountById(r)){e=i,this._curDistance=130*i;break}}}if(null==e)for(i=0,n=t.length;i<n;i++){var l=t[i];if(-1==d.IllusionModel.instance.rideMagicShowId||0==d.IllusionModel.instance.rideMagicShowId){if(g.instance.getShowInfoById(l)){e=i,this._curDistance=130*i;break}}else if(d.IllusionModel.instance.rideMagicShowId==l){e=i,this._curDistance=130*i;break}}this._list.selectedIndex=null==e?0:e},c.prototype.selectQualityById=function(t){var e=y.instance.showIds;this._maxDistance=130*e.length-520,this._list.datas=e;for(var i=this._list.selectedIndex=0,n=e.length;i<n;i++){var s=0,o=g.instance.getShowInfoById(e[i]);if(o&&(s=o[1]),y.instance.has(e[i],s+1)&&y.instance.getDataByIdLvField(e[i],s,1)[0]==t){this._list.selectedIndex=i,this._curDistance=130*i;break}}},c.prototype.openJinjiePanel=function(){WindowManager.instance.open(126)},c.prototype.selectShowModel=function(){var t=m.instance.getCfgById(this._list.selectedData);this._modelClip.reset(this._selectedId),this._modelClip.setActionType("show",0),this._modelClip.avatarScale=t[10]?t[10]:1,this._modelClip.avatarRotationX=t[6],this._modelClip.avatarRotationY=t[7],this._modelClip.avatarY=t[9],this._modelClip.avatarX=t[8],this.observationItem.data=[[this._modelClip,Math.round(this._selectedId/1e3)]]},c.prototype.updatePetInfo=function(){this._info=g.instance.magicShow;var t=y.instance.showIds;if(this._info){this.powerNum.value=""+this._info[1];var e=this._list.scrollPos;this._list.datas=t,this._list.scrollTo(e)}else this.powerNum.value="0";this.selectHandler()},c.prototype.selectHandler=function(){var t=this._list.selectedData;if(void 0!==t){this._selectedId=t;var e=g.instance.getShowInfoById(t),i=e?e[1]:0;if(y.instance.has(t,i+1)){this.fullLvImg.visible=!1,this._bagItem.visible=this.upgradeBtn.visible=!0;var n=y.instance.getDataByIdLvField(t,i,1),s=n[0],o=n[1];this._bagItem.dataSource=[s,o,0,null];var a=f.instance.getItemCountById(s);this._countDiff=a-o,this._btnClip.visible=0<=this._countDiff;var r="#ff7462";a<o||(r="#ffffff"),this._bagItem.setNum(a+"/"+o,r)}else this.fullLvImg.visible=!0,this._bagItem.visible=this.upgradeBtn.visible=!1;var l=m.instance.getCfgById(t);if(this.petNameTxt.text=l[2].toString(),d.IllusionModel.instance.rideMagicShowId==this._selectedId?(this.useImg.visible=!0,this.switchBtn.visible=!1):(this.useImg.visible=!1,this.switchBtn.visible=!0),0===i)this.showTip(t),this.tipBox.visible=this.noActImg.visible=!0,this.switchBtn.visible=this.rankMsz.visible=this.rankNumMsz.visible=!1,this.upgradeBtn.label="激活";else{this.tipBox.visible=this.noActImg.visible=!1,this.rankMsz.visible=this.rankNumMsz.visible=!0,this.upgradeBtn.label="升阶",this.rankNumMsz.value=i.toString();var h=i.toString().length,c=22*h+this.rankNumMsz.spaceX*h,p=5+c+this.rankMsz.width,u=(this.width-p)/2;this.rankNumMsz.x=u,this.rankMsz.x=u+c+5}this.selectShowModel(),this.setAttrs(t,i)}},c.prototype.setAttrs=function(t,e){var i=y.instance.getDataByIdLvField(t,e+1,3),n=y.instance.getDataByIdLvField(t,e,3);s.common.AttrUtil.attrTxts(n,i,this._nameTxts,this._valueTxts,this._upImgs,this._upTxts)},c.prototype.showTip=function(t){for(var e=y.instance.getDataByIdLvField(t,0,2),i="",n="",s=e.length,o=0,a=e.length;o<a;o++)"#"!==e[o]?o<s==1?i+=e[o]:n+=e[o]:(n+="+",s=o);this.tipTxt_1.text=i,this.tipTxt_4.text=n;var r=15;for(o=0,a=this.tipBox._childs.length;o<a;o++)r+=this.tipBox._childs[o].textWidth;var l=(this.tipBox.width-r)/2;this.tipTxt_1.x=l,this.tipTxt_2.x=this.tipTxt_1.x+this.tipTxt_1.textWidth+5,this.tipTxt_3.x=this.tipTxt_2.x+this.tipTxt_2.textWidth+5,this.tipTxt_4.x=this.tipTxt_3.x+this.tipTxt_3.textWidth+5},c.prototype.totalAttrHandler=function(){this._info&&WindowManager.instance.openDialog(26,["仙器幻化总属性",this._info[1],this._info[2],y.instance.attrIndices])},c.prototype.tipsHandler=function(){i.alertHelp(20023)},c.prototype.upgrade=function(){0<=this._countDiff?(d.IllusionCtrl.instance.riseRideMagicShow([this._selectedId]),d.IllusionModel.instance._rideMagicSelectId=this._selectedId):o.openLackPropAlert(this._bagItem.itemData[0],-this._countDiff)},c.prototype.switchHandler=function(){var t=g.instance.getShowInfoById(this._selectedId);t&&0<t[1]&&d.IllusionCtrl.instance.changeRideMagicShow(this._selectedId)},c.prototype.setBtnVisible=function(){if(this.nextRp.visible=this.preRp.visible=this.nextBtn.visible=this.preBtn.visible=!1,this.preBtn.visible=0<this._list.scrollPos&&4<this._list.datas.length,this.nextBtn.visible=this._list.scrollPos<this._maxDistance&&4<this._list.datas.length,this.preBtn.visible&&0<this._list.startShowIndex){for(var t=[],e=0;e<this._list.datas.length;e++){var i=this._list.datas[e];e<this._list.startShowIndex&&t.push(i)}this.getHaveRp(t,this.preRp)}else this.preRp.visible=!1;var n=this._list.startShowIndex+4;if(this.nextBtn.visible&&n<this._list.datas.length){for(t=[],e=n;e<=this._list.datas.length-1;e++)i=this._list.datas[e],t.push(i);this.getHaveRp(t,this.nextRp)}else this.nextRp.visible=!1},c.prototype.getHaveRp=function(t,e){e.visible=!1;for(var i=0;i<t.length;i++){var n=t[i],s=0,o=p.instance.panelType,a=0===o?g.instance.getShowInfoById(n):p.instance.getShowInfoById(n);a&&(s=a[1]);var r=0===o?y.instance.getDataByIdLvField(n,s,1):u.instance.getDataByIdLvField(n,s,1),l=0===o?!!y.instance.has(n,s+1):u.instance.has(n,s+1),h=r[0],c=r[1];if(0==s){if(f.instance.getItemCountById(h)>=c)return void(e.visible=!0)}else if(l&&f.instance.getItemCountById(h)>=c)return void(e.visible=!0)}},h=c,d.WeaponIllusionPanel=h}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._cfgs=GlobalData.getConfig("scene_copy_dahuang"),this._awardCfg=GlobalData.getConfig("scene_copy_dahuang_tipAward");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];this._table[i[1]]=i}},n.prototype.getCfgByLv=function(t){return this._table[t]},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getTipAward=function(t){for(var e=0,i=this._awardCfg;e<i.length;e++){var n=i[e];if(n[0]==t)return n[1]}},i=n,e.SceneCopyDahuangCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("scene_copy_rune"),this.rewardCfg=GlobalData.getConfig("scene_copy_rune_reward"),this.maxLv=this._cfgs[this._cfgs.length-1][1]},n.prototype.getCfgByLv=function(t){return this._cfgs[t-1]},n.prototype.getAwardCfgByCurrLv=function(t){for(var e=t-1,i=this._cfgs.length;e<i;e++){var n=this._cfgs[e];if(n[2].length||n[3]||n[4])return n}},n.prototype.getTipReward=function(){return this.rewardCfg[0][0]},i=n,e.SceneCopyRuneCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._tab={};var t=GlobalData.getConfig("scene_copy_open_boss");this.mapId=t[0][0];for(var e=0;e<t.length;e++)this._tab[t[e][1]]=t[e]}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getAllAward=function(t,e){for(var i=[],n=t;n<=e;n++)i.push(this._tab[n][3]);return i},n.prototype.getFightByLevel=function(t){return this._tab[t][4]},n.prototype.getAtivityIcon=function(t){return this._tab[t][6]},n.prototype.getBottomTab=function(t){return this._tab[t][7]},n.prototype.getAtivityGrade=function(t){return this._tab[t][8]},n.prototype.getRewardGradeByLevel=function(t){return this._tab[t][9]},n.prototype.getBossNameByLevel=function(t){return this._tab[t][10]},n.prototype.getClipIdByLevel=function(t){return this._tab[t][11]},n.prototype.getItemIdByLevel=function(t){return this._tab[t][12]},n.prototype.getDescribeByLevel=function(t){var e=this._tab[t][9];for(var i in this._tab)if(this._tab[i][13]&&this._tab[i][9]===e)return this._tab[i][13];return""},i=n,e.SceneCopyOpenBossCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("feisheng_grade")},n.prototype.getCfgById=function(t){for(var e=0,i=this._cfg.length;e<i;e++)if(t===this._cfg[e][0])return this._cfg[e];return null},i=n,e.FeiShengGradeCfg=i}(modules=modules||{}),function(f){var g,y,t,i,e,_,v,I,n,s,o,a;function r(){return y.call(this)||this}g=f.dungeon||(f.dungeon={}),t=f.bag.BagItem,i=f.config.BlendCfg,e=ui.WinViewUI,_=f.scene.SceneModel,v=f.config.SceneCopyDahuangCfg,I=f.config.SceneCopyRuneCfg,n=f.common.CustomList,s=f.config.SceneCfg,o=f.config.FeiShengGradeCfg,y=e,__extends(r,y),r.prototype.initialize=function(){y.prototype.initialize.call(this),this._isSpecialCopy=!1,this.closeOnSide=!1,this._list=new n,this._list.width=427,this._list.height=424,this._list.hCount=4,this._list.spaceX=4,this._list.itemRender=t,this._list.x=146,this._list.y=547,this._list.shiftingX=15,this.addChild(this._list),CommonUtil.setHTMLPro(this.StatementHTML,"#ffec7c","SimHei",28),CommonUtil.setHTMLPro(this.StatementHTML1,"#ffec7c","SimHei",28),CommonUtil.setHTMLPro(this.StatementHTML2,"#ffec7c","SimHei",28),CommonUtil.setHTMLPro(this.StatementHTML3,"#ffec7c","SimHei",28),this.StatementHTML3.visible=this.StatementHTML2.visible=this.StatementHTML1.visible=this.StatementHTML.visible=!0},r.prototype.onEvt=function(){y.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),this.onAutoClick(this.gotoBtn,this,this.close),this.onAutoClick(this.leaveBtn,this,this.leaveHandler),Laya.timer.loop(1e3,this,this.loopHandler)},r.prototype.onOpened=function(){y.prototype.onOpened.call(this),this.maxLv.visible=!1,this.flyUp1.visible=this.flyUp2.visible=!1;var t=s.instance.getCfgById(_.instance.enterScene[0])[7];if(2===t)this._duration=i.instance.getCfgById(35001)[1][0],this.maxLv.visible=f.bigTower.BigTowerModel.instance.isMaxLv()&&this._list.datas.length<=0,this.maxLv.text="已通过最高层,挑战不再获得奖励";else if(13===t)this._duration=i.instance.getCfgById(35002)[1][0],this.maxLv.visible=f.rune_copy.RuneCopyModel.instance.isMaxLv()&&this._list.datas.length<=0,this.maxLv.text="已通过最高关卡，挑战不再获得奖励";else if(46===t){this._duration=i.instance.getCfgById(35003)[1][0],this.flyUp1.visible=this.flyUp2.visible=!0;var e=o.instance.getCfgById(f.fly_up.FlyUpModel.instance.data[0]);this.flyUp2.text=e[1]}else 53===t||54===t?(this._duration=i.instance.getCfgById(35001)[1][0],this.flyUp2.visible=!0,this.flyUp2.text="本周已挑战完毕"):this._duration=i.instance.getCfgById(10303)[1][0];this._leaveFlag=!1,this.loopHandler()},r.prototype.setOpenParam=function(t){if(y.prototype.setOpenParam.call(this,t),t){console.log("结算胜利。。。。。"+t),this.StatementHTML.innerHTML=this.StatementHTML1.innerHTML=this.StatementHTML2.innerHTML=this.StatementHTML3.innerHTML="";for(var e=t,i=new Array,n=0;n<e.length;n++){var s=e[n];s&&94040001!==s[0]&&i.push(s)}if(this._list.height=424,this._list.y=547,t&&(this._list.datas=i),2021===_.instance.enterScene[0]){var o=v.instance.cfgs.length,a=f.bigTower.BigTowerModel.instance.copyData[0]+1;this.sceneTypeDistinguish(a,o)}else if(2201===_.instance.enterScene[0])o=I.instance.maxLv,a=f.rune_copy.RuneCopyModel.instance.currLv,this.sceneTypeDistinguish(a,o);else if(2371===_.instance.enterScene[0])o=f.openChallenge.OpenChallengeModel.instance.levelCount,a=f.openChallenge.OpenChallengeModel.instance.curLevel,this.sceneTypeDistinguish(a,o);else{this.dahuangBox.visible=!1,this.okBtn.visible=!0,this._isSpecialCopy=!1;var r=_.instance.enterScene[0];if(2091===r||2381===r)this.StatementHTML.color="#50ff28",this.StatementHTML.y=565,this.StatementHTML.style.align="center",f.teamBattle.TeamBattleModel.Instance.isMaxWave?this.StatementHTML.innerHTML="恭喜您刷完所有波数的怪物":this.StatementHTML.innerHTML="刷怪波数:"+f.teamBattle.TeamBattleModel.Instance.doneWave,this._list.height=396,this._list.y=600,t&&(this._list.datas=e,this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0));else if(2701===r){if(this.StatementHTML.color="#50ff28",this.StatementHTML.y=565,this.StatementHTML.style.align="center",f.nothingness_world.NothingnessWorldModel.instance.isMaxWave)this.StatementHTML.innerHTML="恭喜您已通过所有层数";else{var l=0<f.nothingness_world.NothingnessWorldModel.instance.doneWave1?""+f.nothingness_world.NothingnessWorldModel.instance.doneWave1:"无";this.StatementHTML.innerHTML="通过层数:"+l}this._list.height=396,this._list.y=600,t&&(this._list.datas=e,this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0))}else if(4001===r)this.StatementHTML.color="#50ff28",this.StatementHTML.y=565,this.StatementHTML.style.align="center",f.nether_world.NetherWorldModel.instance.isMaxWave?this.StatementHTML.innerHTML="恭喜您已通过所有层数":(l=0<f.nether_world.NetherWorldModel.instance.doneWave1?""+f.nether_world.NetherWorldModel.instance.doneWave1:"无",this.StatementHTML.innerHTML="通过层数:"+l),this._list.height=396,this._list.y=600,t&&(this._list.datas=e,this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0));else if(2241===r)this._isSpecialCopy=!0;else if(2171===r){this.StatementHTML.style.align="center",this.StatementHTML.color="#50ff28",this.StatementHTML.y=552,l="";var h=f.ladder.LadderModel.instance.tiantiScoreAward;h&&(l+="胜利积分:"+h[0],h[2]&&(l+=" 连胜积分:"+h[2])),this.StatementHTML.innerHTML=l,this._list.y=606,this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0)}else if(3301==r)this.StatementHTML.y=690,this.StatementHTML1.color=this.StatementHTML.color="#ffec7c",this.StatementHTML1.style.align=this.StatementHTML.style.align="center",this.StatementHTML.innerHTML=f.marry_arena.MarryArenaModel.instance.cookBattleWinResultScoreTxt(),this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0);else if(3601==r&&f.windCloud.WindCloudModel.instance.scoreResult&&f.windCloud.WindCloudModel.instance.eventTime[0]+f.config.WindCloudCfg.instance.preTotalTime>=GlobalData.serverTime)this.StatementHTML.y=690,this.StatementHTML1.color=this.StatementHTML.color="#ffec7c",this.StatementHTML1.style.align=this.StatementHTML.style.align="center",this.StatementHTML.innerHTML="积分&nbsp;"+CommonUtil.formatHtmlStrByColor("#50ff28","+"+f.windCloud.WindCloudModel.instance.scoreResult),this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0);else if(3801==r)this.StatementHTML.y=690,this.StatementHTML1.color=this.StatementHTML.color="#ffec7c",this.StatementHTML1.style.align=this.StatementHTML.style.align="center",this.StatementHTML.innerHTML="积分&nbsp;"+CommonUtil.formatHtmlStrByColor("#50ff28","+"+f.immortalContest.ImmortalContestModel.instance.scoreResult),this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0);else if(2501===r)this.StatementHTML1.color=this.StatementHTML.color="#50ff28",this.StatementHTML1.style.align=this.StatementHTML.style.align="center",this.StatementHTML.y=552,this.StatementHTML1.y=580,f.faerie_demon.FaerieDemonModel.instance.scoreAdd?this.StatementHTML.innerHTML="仙魔积分：<span style='color:#50ff28'>"+f.faerie_demon.FaerieDemonModel.instance.scoreAdd+"</span>":this.StatementHTML.innerHTML="助战不增加积分",2<=f.faerie_demon.FaerieDemonModel.instance.winTimesNum?(this._list.y=634,this.StatementHTML1.innerHTML="今日连胜:<span style='color:#50ff28'>"+f.faerie_demon.FaerieDemonModel.instance.winTimesNum+"</span>"):this._list.y=606,this._list.height=396,t&&(this._list.datas=e),this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0);else if(3401===r)this._list.y=750,this.showBox.y=690,this._list.mouseEnabled=!1,this._list.mouseThrough=!0;else if(3901==r){this.StatementHTML.y=690,this.StatementHTML1.color=this.StatementHTML.color="#ffec7c",this.StatementHTML1.style.align=this.StatementHTML.style.align="center",this.StatementHTML.y=552,this.StatementHTML1.y=580;var c=f.strongest_marry.StrongestMarryModel.instance.winTimesOver,p=f.strongest_marry.StrongestMarryModel.instance.loseTimesOver;this.StatementHTML.innerHTML=3<=p?"<span style='color:#50ff28'>当前战绩:</span><span style='color:#ff3e3e'>"+c+"胜"+p+"败</span>":"<span style='color:#50ff28'>当前战绩:</span><span style='color:#50ff28'>"+c+"胜"+p+"败</span>",f.strongest_marry.StrongestMarryModel.instance.ispreliminaryCoupleBestr()?this._list.y=606:(this._list.y=634,this.StatementHTML1.innerHTML="您本轮轮空，直接获得胜利"),this._list.height=396,this._list.size(e.length<=4?i.length*(100+this._list.spaceX)-this._list.spaceX:412,100),this._list.pos(.5*(this.width-this._list.width)-5,this._list.y,!0)}else 4301==r?(this.StatementHTML2.color=this.StatementHTML3.color=this.StatementHTML1.color=this.StatementHTML.color="#FFFFFF",this.StatementHTML2.style.align=this.StatementHTML3.style.align=this.StatementHTML1.style.align=this.StatementHTML.style.align="center",this.StatementHTML.y=653,this.StatementHTML1.y=697,this.StatementHTML2.y=740,this.StatementHTML3.y=784,this.StatementHTML.innerHTML="本次试炼伤害量",this.StatementHTML2.innerHTML="获得积分",this.StatementHTML1.innerHTML="<span style='color:#50ff28'>"+CommonUtil.bigNumToString(f.team_warfare.TeamWarfareModel.instance.overNum)+"</span>",this.StatementHTML3.innerHTML="<span style='color:#50ff28'>"+Math.floor(f.team_warfare.TeamWarfareModel.instance.overNum1)+"</span>"):this.StatementHTML.innerHTML="";for(var u=0,d=this._list.items.length;u<d;u++){var m=this._list.items[u];1<g.DungeonCtrl.instance.awardMultiple&&m.showFlag(g.DungeonCtrl.instance.awardMultiple+"倍")}}}},r.prototype.sceneTypeDistinguish=function(t,e){this.dahuangBox.visible=!0,this.okBtn.visible=!1,this._isSpecialCopy=!0,e<t&&(this.dahuangBox.visible=!1,this.okBtn.visible=!0,this._isSpecialCopy=!1)},r.prototype.close=function(){y.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler),g.DungeonCtrl.instance.awardMultiple=-1,51===f.scene.SceneUtil.currScene?f.strongest_marry.StrongestMarryModel.instance.ispreliminaryCoupleBestr()?(f.dungeon.DungeonCtrl.instance.reqEnterNextLevel(),console.log("最强仙缘 结算处于第二层 进入下一层")):console.log("最强仙缘 结算处于第一层 直接关闭"):this.okBtn.visible?this._isSpecialCopy||g.DungeonCtrl.instance.reqEnterScene(0):this._leaveFlag||!this._isSpecialCopy?g.DungeonCtrl.instance.reqEnterScene(0):g.DungeonCtrl.instance.reqEnterNextLevel()},r.prototype.leaveHandler=function(){this._leaveFlag=!0,this.close()},r.prototype.loopHandler=function(){0===this._duration&&this.close(),this.gotoBtn.label="下一层("+this._duration/1e3+")",this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),y.prototype.destroy.call(this)},a=r,g.WinPanel=a}(modules=modules||{}),function(a){var t,r,e,i,n,s,o;function l(){return null!==r&&r.apply(this,arguments)||this}t=a.dungeon||(a.dungeon={}),e=a.bag.BagItem,i=a.config.BlendCfg,n=ui.FirstWinViewUI,s=a.common.CustomList,r=n,__extends(l,r),l.prototype.initialize=function(){r.prototype.initialize.call(this),this.closeOnSide=!1,this._list=new s,this._list.width=427,this._list.height=250,this._list.hCount=4,this._list.spaceX=4,this._list.itemRender=e,this._list.x=146,this._list.y=730,this.addChild(this._list),this._list.shiftingX=15,this.recordHtml.visible=!1,this.tipTxt.text="伤害第一: ",this.desTxt.text="伤害第一可获得伤害第一宝箱"},l.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},l.prototype.offEvt=function(){r.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},l.prototype.onOpened=function(){r.prototype.onOpened.call(this),this._duration=i.instance.getCfgById(10303)[1][0],this.loopHandler()},l.prototype.close=function(){r.prototype.close.call(this),t.DungeonCtrl.instance.reqEnterScene(0)},l.prototype.setOpenParam=function(t){if(r.prototype.setOpenParam.call(this,t),t){var e=t[1];console.log("结算胜利。。。。。"+e),this._list.datas=e;var i=t[3],n=t[5],s=t[6],o=t[4];this.headIcon.setInfo(n,i,s),this.nameTxt.text=o,this.nameTxt.color=o==a.player.PlayerModel.instance.roleName?"#50ff28":"#ffffff",a.common.CommonUtil.centerChainArr(this.width,[this.tipTxt,this.nameTxt])}},l.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),r.prototype.destroy.call(this)},o=l,t.FirstWinPanel=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._arr=new Array,this._table={};for(var t=GlobalData.getConfig("failure_stronger"),e=0,i=t.length;e<i;e++){var n=t[e];this._arr[e]=n[0],this._table[n[0]]=n}},n.prototype.getCfgByLevel=function(t){if(0!=this._arr.length){if(1==this._arr.length)t=this._arr[0];else for(var e=1;e<this._arr.length;e++){if(t<=this._arr[0]){t=this._arr[0];break}if(t<=this._arr[e]&&t>this._arr[e-1]){t=this._arr[e];break}}return this._table[t]?this._table[t]:this._table[this._arr[this._arr.length-1]]}},i=n,e.FailureStrongerCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=new Array;for(var t=GlobalData.getConfig("tips"),e=0;e<t.length;e++){var i=t[e],n=i[0];this._table[n]=i}},n.prototype.getCfgByType=function(t){return this._table[t]},i=n,e.TipCfg=i}(modules=modules||{}),function(t){var i,n,e,s,o,a,r,l,h,c,p,u,d,m;function f(){return n.call(this)||this}i=t.dungeon||(t.dungeon={}),e=t.commonAlert.PropAlertUtil,s=t.config.BlendCfg,o=ui.LoseViewUI,a=t.player.PlayerModel,r=t.config.FailureStrongerCfg,l=t.funcOpen.FuncOpenModel,h=t.notice.SystemNoticeManager,c=t.config.GetWayCfg,p=t.config.TipCfg,u=t.bottomTab.BottomTabCtrl,d=t.scene.SceneModel,n=o,__extends(f,n),f.prototype.initialize=function(){n.prototype.initialize.call(this),this._sourceBtn=new Array,this._level=a.instance.level,this._specialImg=new Laya.Image,this._sourceBtnBg=new Array,this._desTxt=new Array,this.addChild(this._specialImg),this.addChild(this.gotoBtn);for(var t=0;t<4;t++)this._sourceBtn[t]=new Laya.Image,this._sourceBtn[t].mouseEnabled=!0,this._sourceBtnBg[t]=new Laya.Image,this._desTxt[t]=new laya.display.Text,e.setDesTxt(this._desTxt[t])},f.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),this.onAutoClick(this._sourceBtn[0],this,this.getOpenPlaneId,[1]),this.onAutoClick(this._sourceBtn[1],this,this.getOpenPlaneId,[2]),this.onAutoClick(this._sourceBtn[2],this,this.getOpenPlaneId,[3]),this.onAutoClick(this._sourceBtn[3],this,this.getOpenPlaneId,[4]),this.onAutoClick(this.gotoBtn,this,this.gotoPlane),Laya.timer.loop(1e3,this,this.loopHandler),this.onAutoGlobalEvt("TIPBIANQIANG_UPDATE",this,this.updateTipUI),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},f.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._duration=s.instance.getCfgById(10303)[1][0],this.loopHandler(),this.setDate(),i.DungeonCtrl.instance.getTipsPriorInfo(),PlatParams.isCloseRecharge&&(this.TipsImg.visible=this.gotoBtn.visible=!1)},f.prototype.updatePlatChangeRecharge=function(){this.TipsImg.visible=this.gotoBtn.visible=!PlatParams.isCloseRecharge},f.prototype.close=function(t,e){n.prototype.close.call(this,t,e),Laya.timer.clear(this,this.loopHandler),i.DungeonCtrl.instance.reqEnterScene(0)},f.prototype.updateTipUI=function(){if(0==i.DungeonModel.instance.tipType)return this.gotoBtn.visible=!1,void(this.TipsImg.visible=!1);var t=p.instance.getCfgByType(i.DungeonModel.instance.tipType);t?(this.gotoBtn.visible=!0,this.TipsImg.visible=!0,this.TipsImg.skin="assets/icon/ui/failure_stronger/"+t[3]+".jpg"):this.TipsImg.skin="",PlatParams.isCloseRecharge&&(this.TipsImg.visible=this.gotoBtn.visible=!1)},f.prototype.gotoPlane=function(){if(0!=i.DungeonModel.instance.tipType){var t=p.instance.getCfgByType(i.DungeonModel.instance.tipType);if(t){var e=t[4];d.instance.isInMission?WindowManager.instance.openByActionId(e):u.instance.addPanelByFunc(e),this.close()}}},f.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},f.prototype.setDate=function(){this.removeChildSource(),this._level=a.instance.level;var t,e=r.instance.getCfgByLevel(this._level)[1];this.bigToSmall(e);for(var i=0,n=e.length;i<n;i++)this.addChild(this._sourceBtnBg[i]),this.addChild(this._sourceBtn[i]),t=c.instance.getCfgById(e[i]),this._sourceBtn[i].pos(130+.5*(512-158*n+42*(n-1))+116*i,565),this._sourceBtn[i].skin="assets/icon/ui/get_way/"+t[1]+".png",this._sourceBtnBg[i].skin="assets/icon/ui/get_way/btn_ydrk_bg.png",this._sourceBtnBg[i].pos(this._sourceBtn[i].x,this._sourceBtn[i].y),this._sourceBtn[i].addChild(this._desTxt[i]),this._desTxt[i].pos(6,70),this._desTxt[i].text=t[2]},f.prototype.getOpenPlaneId=function(t){this._type=t;var e=r.instance.getCfgByLevel(this._level)[1];this.bigToSmall(e);var i=c.instance.getCfgById(e[this._type-1])[3][0];this.openPlane(i)},f.prototype.openPlane=function(t){0===t?this.close():l.instance.getFuncIsOpen(t)?(d.instance.isInMission?WindowManager.instance.openByActionId(t):u.instance.addPanelByFunc(t),this.close()):h.instance.addNotice(l.instance.getFuncOpenTipById(t),!0)},f.prototype.bigToSmall=function(t){for(var e=0,i=t.length;e<i-1;e++)for(var n=0;n<t.length-e-1;n++)if(t[n]<t[n+1]){var s=t[n];t[n]=t[n+1],t[n+1]=s}return t},f.prototype.removeChildSource=function(){if(null!=this._sourceBtn)for(var t=0;t<this._sourceBtn.length;t++)this.removeChild(this._sourceBtn[t]),this.removeChild(this._sourceBtnBg[t]),this.removeChild(this._desTxt[t])},f.prototype.destroy=function(){if(null!=this._sourceBtn){for(var t=0;t<this._sourceBtn.length;t++)this._sourceBtn[t].destroy(!0),this._sourceBtnBg[t].destroy(!0),this._desTxt[t].destroy(!0);this._sourceBtn=this._sourceBtnBg=this._desTxt=null}n.prototype.destroy.call(this)},m=f,i.LosePanel=m}(modules=modules||{}),function(t){var p,u,d,e,m,s,f,o,g,i,n,y,a;function r(){return null!==u&&u.apply(this,arguments)||this}p=t.pet||(t.pet={}),d=t.config.SkillCfg,e=ui.PetUpgradeSkillAlertUI,m=t.common.CommonUtil,s=t.effect.SuccessEffectCtrl,f=t.config.PetRankCfg,o=t.ride.RideModel,g=t.config.RideRankCfg,i=t.ride.RideCtrl,n=t.common.CustomClip,y=t.config.SkillPureCfg,u=e,__extends(r,u),r.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),this._skillInfo=null,u.prototype.destroy.call(this)},r.prototype.initialize=function(){u.prototype.initialize.call(this),this.btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this.btnClip.setProperty(this,this.activeBtn.x-5,this.activeBtn.y-9)},r.prototype.onEvt=function(){u.prototype.onEvt.call(this),this.onAutoClick(this.activeBtn,this,this.activeHandler),this.onAutoGlobalEvt("PET_UPDATE",this,this.updatePetInfo),this.onAutoGlobalEvt("RIDE_UPDATE",this,this.updatePetInfo)},r.prototype.activeHandler=function(){0===p.PetModel.instance.panelType?i.instance.addRideSkillLevel(this._skillInfo[0],2):p.PetCtrl.instance.skillUp(this._skillInfo[0],2)},r.prototype.updatePetInfo=function(){if(this._skillInfo)for(var t=0===p.PetModel.instance.panelType?o.instance.rank[3]:p.PetModel.instance.upgradeSkills,e=m.getSkillPureIdById(this._skillInfo[0]),i=0,n=t.length;i<n;i++)if(m.getSkillPureIdById(t[i][0])===e){t[i][1]>this._skillInfo[1]&&(s.instance.play("assets/others/tx_jinjiechengong5.png"),this.close());break}},r.prototype.setOpenParam=function(t){u.prototype.setOpenParam.call(this,t),this.btnClip.play();var e=p.PetModel.instance.panelType;this._skillInfo=t;var i=this._skillInfo[0];0===this._skillInfo[1]&&1===this._skillInfo[2]&&(i=this._skillInfo[0]+1);var n,s=y.instance.getCfgById(m.getSkillPureIdById(i)),o=d.instance.getCfgById(i);if(this.iconImg.skin="assets/icon/skill/"+s[6]+".png",this.nameTxt.text=s[1],0===e?(n=g.instance.getCfgBySkillId(i),this.titleTxt.text="仙器进阶技能"):1===e&&(n=f.instance.getCfgBySkillId(i),this.titleTxt.text="灵宠进阶技能"),this.powerTxt.text="战力："+n[4][2],this.descTxt.text=m.stringFormat(s[5],o[2]),this.descTxt.height=this.descTxt.textHeight,this.descTxt.y=230+(100-this.descTxt.height>>1),0<this._skillInfo[1])this.activeBtn.visible=!1,this.conditionTxt.text="已激活",this.conditionTxt.color="#00AD35",this.height=this.bgImg.height=416,this.tipTxt.y=410;else{this.activeBtn.visible=!0,this.height=this.bgImg.height=504,this.tipTxt.y=498;var a="一二三四五六七八九十",r=n[0],l=Math.ceil(.1*r),h=r%10;h=0===h?10:h,this.conditionTxt.text="激活条件："+(0===e?"仙器进阶":"灵宠进阶")+" "+a[l-1]+"阶"+a[h-1]+"星",this.conditionTxt.color="#ED1100"}var c=0<this._skillInfo[2];this.btnClip.visible=c,this.activeBtn.gray=!c,this.activeBtn.mouseEnabled=c,this.conditionTxt.visible=!c},a=r,p.PetUpgradeSkillAlert=a}(modules=modules||{}),function(s){var o,t,e,a,r,l,h,c,p,i;function n(){return t.call(this)||this}o=s.dungeon||(s.dungeon={}),e=ui.DungeonLBViewUI,a=s.common.CommonUtil,r=Laya.Handler,l=s.config.SceneCfg,h=s.scene.SceneModel,c=s.config.BlendCfg,p=s.bag.BagModel,t=e,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),this.left=20,this.bottom=240,this._sceneType=0,this.layer=3,this.closeByOthers=!1},n.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.exitBtn,this,this.exitHandler)},n.prototype.exitHandler=function(){var t="",e=h.instance.enterScene[0];if(this._sceneType=l.instance.getCfgById(e)[7],0!==this._sceneType||h.instance.isInMission){if(10===this._sceneType||4===this._sceneType){if(!o.DungeonModel.instance.ranks)return void this.exitCommitHandler();t="是否确认退出副本，本次副本再次进入将不会消耗挑战次数"}else if(14===this._sceneType)t='离开场景后，需要<span style="color:#FF3E3E">等待'+.001*c.instance.getCfgById(10806)[1][0]+"秒</span>才能再次进入，是否确定离开？";else if(16===this._sceneType)t="退出将视为挑战失败，是否确认退出？",s.ladder.LadderModel.instance.autoMatch=!1;else{if(17===this._sceneType||21===this._sceneType||22===this._sceneType)return void this.exitCommitHandler();if(31===this._sceneType){var i=s.sheng_yu.ShenYuBossCtrl.instance.getState();return void this.openAwardAlert([406],i)}if(12===this._sceneType)return void this.openAwardAlert([408]);if(35===this._sceneType)return void this.openAwardAlert([576]);if(47===this._sceneType)return void this.openAwardAlert([1185]);if(49===this._sceneType)return void this.openAwardAlert([1274]);if(54===this._sceneType)return void this.openAwardAlert([1484]);if(37===this._sceneType||36===this._sceneType)return void this.exitCommitHandler();if(39===this._sceneType){if(s.fire_contention.FireContentionModel.instance.isMyFire())return void s.notice.SystemNoticeManager.instance.addNotice("火神玩家不能退出场景",!0);t='离开场景后需要<span style="color:#FF3E3E">等待'+.001*c.instance.getCfgById(86018)[1][0]+'秒</span>才能再次进入，并且保底玄火上限<span style="color:#FF3E3E">将暂停增长</span>，争夺玄火会<span style="color:#FF3E3E">根据离开时间减少</span>，是否确定离开？'}else if(45===this._sceneType)t="退出副本将会以挑战失败处理，是否确认退出？";else if(48===this._sceneType||50===this._sceneType)t="退出后，您本场战斗将以失败处理，是否确认退出？";else if(52===this._sceneType||40===this._sceneType){if(t="退出副本只能获取当前层数奖励，并扣除<span style='color:#ff3e3e'>1次</span>副本次数，是否决定离开副本？",s.halo.HaloModel.instance.isHalo()){var n=1;40!==this._sceneType&&52!==this._sceneType||(n=s.dungeon.DungeonCtrl.instance.entertempCnt[1]),1<n&&(t="退出副本只能获取<span style='color:#ff3e3e'>"+n+"倍</span>当前层数奖励，并扣除<span style='color:#ff3e3e'>"+n+"次</span>副本次数，是否决定离开副本？")}}else t=44===this._sceneType&&PlayerModel.instance.teamId?"是否退出当前场景?退出场景将不会退出队伍":51===this._sceneType?s.strongest_marry.StrongestMarryModel.instance.ispreliminaryCoupleBestr()?"退出后，您将不能重进本轮战斗，是否确认退出？":s.strongest_marry.StrongestMarryModel.instance.isLose()||2===s.strongest_marry.StrongestMarryModel.instance.copyState||0===s.strongest_marry.StrongestMarryModel.instance.copyState?"是否确定离开副本？":"错过本轮匹配时间，本轮将以失败处理，是否确认退出？":57===this._sceneType?'离开场景后需要<span style="color:#FF3E3E">等待'+.001*c.instance.getCfgById(97923)[1][0]+"秒</span>才能再次进入,是否确定离开？":"是否确定离开副本？"}a.alert("温馨提示",t,[r.create(this,this.exitCommitHandler)],[],null,!1)}},n.prototype.openAwardAlert=function(t,e){var i;if(void 0===e&&(e=null),null==e){var n=p.instance.getItemsByBagId(7);i=n&&0<n.length}else i=e;if(i){var s=r.create(WindowManager.instance,WindowManager.instance.open,t),o=r.create(this,this.exitCommitHandler);a.alert("提示","收益记录中有未领取的奖励,是否前往领取？",[s,"领取奖励"],[o,"直接离开"])}else this.exitCommitHandler()},n.prototype.exitCommitHandler=function(){SceneCtrl.instance.exitDungeon(),41===this._sceneType&&s.foreign_boss_panel.ForeignBossModel.instance.setAutoCall(!1)},i=n,o.DungeonLBPanel=i}(modules=modules||{}),function(t){var h,c,e,p,u,n,s,d,i;function o(){return null!==c&&c.apply(this,arguments)||this}h=t.born||(t.born={}),e=ui.BornAlertUI,p=t.common.CommonUtil,u=t.config.BornCfg,n=t.notice.SystemNoticeManager,s=t.bag.BagUtil,d=t.common.CustomClip,c=e,__extends(o,c),o.prototype.initialize=function(){c.prototype.initialize.call(this),this._icon=p.getIconById(13240001),this.propImg.skin=this._icon,this._btnClip=p.creatEff(this.btn,"btn_light",15),this._btnClip.pos(-5,-10)},o.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHnadler)},o.prototype.onOpened=function(){c.prototype.onOpened.call(this);var t,e,i=h.BornModel.instance.lv,n=u.instance.getNextLv(i),s=u.instance.getCfgByLv(i);if(u.instance.getCfgByLv(n))t=h.BornModel.instance.ids,this.btn.visible=!0,this.maxTxt.visible=!1,e=s[8][0];else{var o=u.instance.getCfgByLv(i,-1);t=o[2],e=o[8][0],this.btn.visible=!1,this.maxTxt.visible=!0}this.setItems(t);var a=e[0];this._id=e[0];var r=e[1],l=p.getPropCountById(a);r<l?d.thisPlay(this._btnClip):d.thisStop(this._btnClip),this.propTxt.text=l+"/"+r,this.propTxt.color=r<=l?"#168a17":"#ff3e3e",this._itemEnough=r<=l},o.prototype.setItems=function(n){[this.item_0,this.item_1,this.item_2,this.item_3].forEach(function(t,e){var i=n[e];t.line=1,t.id=i})},o.prototype.close=function(t,e){c.prototype.close.call(this,t,e),this._btnClip.stop()},o.prototype.btnHnadler=function(){if(this._itemEnough){for(var t=0,e=h.BornModel.instance.ids;t<e.length;t++){var i=e[t];if(!h.BornModel.instance.getEraNode(i)[1])return void h.BornCtrl.instance.fastEra()}n.instance.addNotice("任务已全部完成，无需使用转生丹",!0)}else s.openLackPropAlert(this._id,1)},i=o,h.BornAlert=i}(modules=modules||{}),function(t){var n,e,i,s,l,o;function a(){return e.call(this)||this}n=t.born||(t.born={}),i=ui.BornSuccessAlertUI,s=t.config.BornCfg,l=t.common.CommonUtil,e=i,__extends(a,e),a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},a.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),e.prototype.offEvt.call(this)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._duration=1e4,this.loopHandler(),this.updateView()},a.prototype.loopHandler=function(){0===this._duration&&this.close(),this.timeTxt.text=this._duration/1e3+"秒后自动关闭",this._duration-=1e3},a.prototype.updateView=function(){var t=n.BornModel.instance.lv,e=s.instance.getCfgByLv(t,-1)[0],i=s.instance.getCfgByLv(t);this.setPrizes(i),this.noImg.visible=!e,this.nextBox.visible=!!t,n.BornModel.instance.bornPositionUtls(e,this.cuClip1,this.cuZ,this.cuClip2,this.cuC,this.curBox,.7),n.BornModel.instance.bornPositionUtls(t,this.nextClip1,this.nextZ,this.nextClip2,this.nextC,this.nextBox,.7),this.attTxt.text=i[5].toString(),this.defTxt.text=i[7].toString(),this.hpTxt.text=i[6].toString()},a.prototype.setPrizes=function(t){var e=t[3];if(e.length){var i=e[0][0],n=l.getIconById(i);this.skillImg.skin=n;var s=l.getNameByItemId(i);this.skillNameTxt.text=""+s;var o=e[1][0],a=[o,e[1][1],0,null];this.propImg.dataSource=a;var r=l.getNameByItemId(o);this.propNameTxt.text=r,this.skillBox.visible=this.propBox.visible=!0,this.btn.y=580,l.centerChainArr(this.width,[this.skillBox,this.propBox],35)}else this.skillBox.visible=this.propBox.visible=!1,this.btn.y=415;this.timeTxt.y=this.btn.y+80,this.bgImg.height=this.timeTxt.y-55,this.height=this.bgImg.height+120,this.tipTxt.y=this.height+50},o=a,n.BornSuccessAlert=o}(modules=modules||{}),function(o){var u,e,t,m,i,f,g,y,n;function s(){return null!==e&&e.apply(this,arguments)||this}u=o.born||(o.born={}),t=ui.BornViewUI,m=o.config.BornCfg,i=o.common.CustomClip,f=o.common.CommonUtil,g=o.config.ItemMaterialCfg,y=o.config.SkillPureCfg,e=t,__extends(s,e),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnClip=f.creatEff(this.btn,"btn_light",15),this._btnClip.pos(-5,-10),this.iconImg.skin="assets/icon/item/10079.png",this.regGuideSpr(41,this.btn)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),u.BornCtrl.instance.getEraInfo(),this.updateView()},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.iconImg,this,this.iconHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("BORN_UPDATE",this,this.updateView)},s.prototype.updateView=function(){var t,e,i=u.BornModel.instance.lv,n=m.instance.getBigLv(i),s=m.instance.getNextLv(i),o=m.instance.getCfgByLv(i),a=m.instance.getCfgByLv(s);if(a)t=u.BornModel.instance.ids,e=o[8][0],this.setPrizes(i),i?(this.noImg.visible=!1,this.currBox.visible=!0):(this.noImg.visible=!0,this.currBox.visible=!1),u.BornModel.instance.bornPositionUtls(s,this.nextMsz,this.hidden_1,this.nextZ,this.hidden_2,this.nextBox),n||this.setRightHidden();else{var r=m.instance.getCfgByLv(i,-1);r&&(t=r[2],e=r[8][0],this.setAllHidden())}if(u.BornModel.instance.bornPositionUtls(i,this.currMsz,this.ZImg,this.currMszZ,this.CImg,this.currBox),t&&this.setItems(t),e){var l=e[0],h=e[1],c=f.getPropCountById(l);this.numTxt.text=c+"/"+h,this.ZSDRP.visible=!!(0<c&&a),this.numTxt.color=h<=c?"#168a17":"#ff3e3e"}this.setAttr(o,a);var p=o[4];this.fightMsz.value=p.toString()},s.prototype.setItems=function(s){var o=!0;[this.item_0,this.item_1,this.item_2,this.item_3].forEach(function(t,e){var i=s[e];t.line=0,t.id=i;var n=u.BornModel.instance.getEraNode(i);n&&2==n[1]||(o=!1)}),o?i.thisPlay(this._btnClip):i.thisStop(this._btnClip)},s.prototype.setPrizes=function(t){var e=m.instance.getBigLv(t);e=e||m.instance.getBigLv(t-100);var i=f.numToUpperCase(Math.floor(e/100));this.lockTxt.text=i+"转解锁";var n=m.instance.getCfgByLv(e),s=m.instance.getCfgByLv(t),o=n[3],a=o[0][0],r=f.getIconById(a);this.skillImg.skin=r;var l=f.getNameByItemId(a);this.skillNameTxt.text="秘术·"+l;var h=g.instance.getItemCfgById(a)[9][0];this.skillDesTxt.text=y.instance.getCfgById(h)[9];var c=o[1][0],p=[c,o[1][1],0,null];this.propItem.dataSource=p;var u=f.getNameByItemId(c);this.propNameTxt.text=u;var d=s[9];this.propDesTxt.text=d},s.prototype.setRightHidden=function(){this.propItem.visible=this.hidden_6.visible=this.propNameTxt.visible=this.propDesTxt.visible=this.skillDesTxt.visible=this.skillNameTxt.visible=this.hidden_5.visible=this.lockTxt.visible=this.hidden_3.visible=this.hidden_4.visible=this.skillImg.visible=!1,this.maxTxt.visible=!0},s.prototype.setAllHidden=function(){this.hidden_0.visible=this.hidden_1.visible=this.hidden_2.visible=this.nextZ.visible=this.nextMsz.visible=this.btn.visible=this.noImg.visible=!1,this.setRightHidden(),f.centerChainArr(this.width,[this.currBox]),f.centerChainArr(this.width,[this.attrBox])},s.prototype.setAttr=function(t,i){var n=[this.attrTxt_0,this.attrTxt_1,this.attrTxt_2],s=[this.arrImg_0,this.arrImg_1,this.arrImg_2],o=[this.proTxt_0,this.proTxt_1,this.proTxt_2],e=t[5],a=t[6],r=t[7];[e,a,r].forEach(function(t,e){n[e].text=t.toString()}),s.forEach(function(t,e){s[e].visible=o[e].visible=!!i}),i&&[Math.round(i[5]-e),Math.round(i[6]-a),Math.round(i[7]-r)].forEach(function(t,e){o[e].text=t.toString()})},s.prototype.iconHandler=function(){WindowManager.instance.open(42)},s.prototype.btnHandler=function(){for(var t=!0,e=0,i=u.BornModel.instance.ids;e<i.length;e++){var n=i[e],s=u.BornModel.instance.getEraNode(n)[1];if(!s)return void o.notice.SystemNoticeManager.instance.addNotice("请先完成所有转生任务",!0);1==s&&(t=!1)}t?u.BornCtrl.instance.era():o.notice.SystemNoticeManager.instance.addNotice("请先领完所有转生任务奖励",!0)},n=s,u.BornPanel=n}(modules=modules||{}),function(e){var o,i,t,a,n,r,s;function l(){return null!==i&&i.apply(this,arguments)||this}o=e.ride||(e.ride={}),t=e.pet.PetModel,a=e.config.RideFeedCfg,n=e.config.RideRankCfg,r=e.illusion.IllusionModel,i=e.pet.FeedBasePanel,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup.setFuncIds(12,45,14),this._showIds=n.instance.showIds,this._helpId=20020,this.bgImg.skin="magic_weapon/bj_xianqi.jpg",this._feedFunc=o.RideCtrl.instance.feedRide.bind(o.RideCtrl.instance),this.regGuideSpr(15,this.advancedBtn),this.regGuideSpr(17,this.practiceBtn),this.regGuideSpr(14,this.onekeyBtn);var t=e.config.ShowEquipCfg.instance.getCfgByType(5);this.showEquipTxt.text=t?t[1]:"",this.showEquipBtn.skin="magic_weapon/btn_showequip.png"},l.prototype.showEquipHandler=function(){WindowManager.instance.open(1277)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("RIDE_UPDATE",this,this.updateCulture),this.regAutoRP(this.cultureRP,["weaponFeedSkillRP","weaponFeedMatRP","showEquipRide"]),this.regAutoRP(this.advancedRP,["weaponRankSkillRP","weaponIllusionRP","weaponRankMatRP","weaponIllusionMasterRP"]),this.regAutoRP(this.practiceRP,["weaponRefineMaterialRP"]),this.regAutoRP(this.showEquipRP,["showEquipRide"])},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),t.instance.panelType=0,this.updateCulture()},l.prototype.onChange=function(){1==this._btnGroup.selectedIndex?WindowManager.instance.open(126):2==this._btnGroup.selectedIndex&&WindowManager.instance.open(127)},l.prototype.updateCulture=function(){this._showId=r.instance.rideMagicShowId||this._showIds[0];var t=o.RideModel.instance.feed;if(t){var e=t[1],i=t[0],n=a.instance.getPetFeedCfgByLv(i),s=a.instance.getPetFeedCfgByLv(i+1);this.updateInfo(n,s,1,e,i,4,2,t,a.instance.getNextSkillCfgByLv(i),0,3,a.instance.skillIds,0)}},s=l,o.RideFeedPanel=s}(modules=modules||{}),function(t){var s,e,o,a,i,n;function r(){return null!==e&&e.apply(this,arguments)||this}s=t.ride||(t.ride={}),o=t.config.RideRankCfg,a=t.illusion.IllusionModel,i=t.pet.RankBasePanel,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.bgImg.skin="magic_weapon/bj_xianqi.jpg",this._btnGroup.setFuncIds(12,45,14),this._cfg=o.instance,this._showIds=this._cfg.showIds,this._helpId=20021,this._type=0,this._showStars=this._cfg.showStars,this._disableId=4001,this._bookType=1,this._model=s.RideModel.instance,this._autoBuyType=1,this._rankFunc=s.RideCtrl.instance.rankRide.bind(s.RideCtrl.instance),this._changeFunc=s.RideCtrl.instance.changeRideShow.bind(s.RideCtrl.instance),this._illusionPanelId=11,this.regGuideSpr(16,this.onekeyBtn),this.regGuideSpr(15,this.advancedBtn),this.regGuideSpr(17,this.practiceBtn)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("RIDE_UPDATE",this,this.updatePanel),this.onAutoGlobalEvt("RIDE_ZIDONG",this,this.showZiDongBtn),this.regAutoRP(this.cultureRP,["weaponFeedSkillRP","weaponFeedMatRP","showEquipRide"]),this.regAutoRP(this.advancedRP,["weaponRankSkillRP","weaponIllusionRP","weaponRankMatRP","weaponIllusionMasterRP"]),this.regAutoRP(this.practiceRP,["weaponRefineMaterialRP"]),this.regAutoRP(this.hhDotImg,["weaponIllusionRP","weaponIllusionMasterRP"])},r.prototype.onChangeMenu=function(){0==this._btnGroup.selectedIndex?WindowManager.instance.open(27):2==this._btnGroup.selectedIndex&&WindowManager.instance.open(127)},r.prototype.updatePanel=function(){this._showId=a.instance.rideMagicShowId||this._showIds[0];var t=s.RideModel.instance.rank,e=t[0],i=o.instance.getPetRankCfgBySt(e),n=o.instance.getPetRankCfgBySt(e+1);this.updateInfo(e,t[1],i,n,i[1])},n=r,s.RideRankPanel=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.ride||(t.ride={}),n=t.config.RideRefineCfg,s=t.pet.RefineBasePanel,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="magic_weapon/bj_xianqi_02.jpg",this.titleTxt.text="仙器",this.type0Btn.skin="magic_weapon/btn_xianli_04.png",this.type1Btn.skin="magic_weapon/btn_xianli_01.png",this.type2Btn.skin="magic_weapon/btn_xianli_03.png",this.type3Btn.skin="magic_weapon/btn_xianli_02.png",this.type1Btn.y=311,this.type3Btn.y=315,this.redDotImg_1.y=259,this.redDotImg_3.y=254,this.type1Txt.y=375,this.type3Txt.y=378,this.type2Txt.y=501,this._btnGroup.setFuncIds(12,45,14),this._refineTypeNames=["器灵·锐","器灵·御","器灵·攻","器灵·迅"],this._helpId=20022,this._type=0,this._refineFunc=e.RideCtrl.instance.riseRideRefine.bind(e.RideCtrl.instance),this._cfg=n.instance,this._str="仙器修炼总属性",this._model=e.RideModel.instance,this.regGuideSpr(15,this.advancedBtn),this.regGuideSpr(17,this.practiceBtn),this.regGuideSpr(18,this.onekeyBtn)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("RIDE_UPDATE",this,this.searchOneType),this.onAutoGlobalEvt("RIDE_UPDATE",this,this.updatePanel),this.onAutoGlobalEvt("PET_UP_REFINE",this,this.showSuccessEffect),this.regAutoRP(this.cultureRP,["weaponFeedSkillRP","weaponFeedMatRP","showEquipRide"]),this.regAutoRP(this.advancedRP,["weaponRankSkillRP","weaponIllusionRP","weaponRankMatRP","weaponIllusionMasterRP"]),this.regAutoRP(this.practiceRP,["weaponRefineMaterialRP"])},a.prototype.showSuccessEffect=function(){0==this._typeGroup.selectedIndex?this._upGradeEff.pos(207,49):1==this._typeGroup.selectedIndex?this._upGradeEff.pos(377,183):2==this._typeGroup.selectedIndex?this._upGradeEff.pos(207,312):this._upGradeEff.pos(33,187),i.prototype.showSuccessEffect.call(this)},a.prototype.onMenuChange=function(){0==this._btnGroup.selectedIndex?WindowManager.instance.open(27):1==this._btnGroup.selectedIndex&&WindowManager.instance.open(126)},o=a,e.RideRefinePanel=o}(modules=modules||{}),function(t){var e,c,i,p,u,d,m,n;function s(){return null!==c&&c.apply(this,arguments)||this}e=t.ride||(t.ride={}),i=ui.SbItemUI,p=t.config.ExteriorCfg,u=t.bag.BagModel,d=t.config.RideFazhenCfg,m=t.ride.RideModel,c=i,__extends(s,c),s.prototype.setData=function(t){c.prototype.setData.call(this,t),this._showId=t;var e=0,i=m.instance.huanhuaList.get(this._showId);i&&(e=i[1]);var n=m.instance.fazhenId;this.usingTxt.visible=n===this._showId;var s=d.instance.has(this._showId,e+1),o=p.instance.getCfgById(this._showId),a=d.instance.getDataByIdLvField(this._showId,e,1),r=a[0],l=a[1];this.wayTxt.color="#F4F1BB",this.wayTxt.fontSize=18,this.nameTxt.color=CommonUtil.getColorByQuality(o[4]),0==e?(this.wayTxt.text="未激活",this.maskImg.visible=!0,u.instance.getItemCountById(r)>=l?(this.wayTxt.text="可激活",this.wayTxt.color="#00ad35",this.qualityImg.gray=this.icon.gray=!1,this.dotImg.visible=!0):(this.qualityImg.gray=this.icon.gray=!0,this.wayTxt.text=this.getWay(this._showId),this.dotImg.visible=!1)):(this.maskImg.visible=!1,this.qualityImg.gray=this.icon.gray=!1,this.wayTxt.text=e+"阶",this.wayTxt.fontSize=20,this.dotImg.visible=!!s&&u.instance.getItemCountById(r)>=l),this.nameTxt.text=o[2],this.nameTxt.color=CommonUtil.getColorByQuality(o[4]),this.icon.skin="assets/icon/skin/"+o[3]+".png",this.qualityImg.skin="common/dt_tongyong_"+o[4]+".png";var h=o[11];0!=h&&h?(this.gradeImg.skin="common/xiyou"+h+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1},s.prototype.getWay=function(t){for(var e=d.instance.getDataByIdLvField(t,0,2),i="",n=0,s=e.length;n<s&&"#"!==e[n];n++)i+=e[n];return i},s.prototype.setSelected=function(t){c.prototype.setSelected.call(this,t),this.frameImg.visible=t},n=s,e.WPItem=n}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.ride||(t.ride={}),n=t.config.RideFazhenCfg,s=t.pet.CircleBasePanel,o=t.ride.WPItem,i=s,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list.itemRender=o,this._qualityList.itemRender=e.RideCircleOptionsItem,this.regGuideSpr(20,this.goBtn),this._model=e.RideModel.instance,this._ctrl=e.RideCtrl.instance,this._helpId=20032,this._attrAlertStr="仙器法阵总属性",this._cfg=n.instance,this._attrAlertIndices=this._cfg.attrIndices,this.bgImg.skin="magic_weapon/bj_xianqi.jpg",this.petBtn.selected=!1,this.weaponBtn.selected=!0},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.petBtn,WindowManager.instance,WindowManager.instance.open,[169]),this.onAutoGlobalEvt("WEAPONFZHUANHUA_UPDATA",this,this.showEffect1),this.onAutoGlobalEvt("WEAPONFZCHANGE_HUANHUA",this,this.selectBtnGroup2)},a=r,e.RideCirclePanel=a}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._lvDic=new n;for(var t=GlobalData.getConfig("scene_copy_single_boss"),e=0;e<t.length;e++){var i=t[e];this._lvDic.set(e,i)}this._singleBossCfgs=t},s.prototype.getCfgByLv=function(t){return this._lvDic.get(t)},s.prototype.getCfg=function(){return this._singleBossCfgs},i=s,e.SceneCopySingleBossCfg=i}(modules=modules||{}),function(t){var u,e,i,n,d,s,m,f,o,g,a,r,l,h;function c(){return null!==e&&e.apply(this,arguments)||this}u=t.single_boss||(t.single_boss={}),i=Laya.Event,n=t.common.BtnGroup,d=t.player.PlayerModel,s=t.dungeon.DungeonCtrl,m=t.vip.VipModel,f=t.config.PrivilegeCfg,o=t.common.CustomClip,g=t.config.SceneCopySingleBossCfg,a=t.bag.BagUtil,r=t.common.SimpleList,l=t.common.CommonUtil,e=ui.SingleBossViewUI,__extends(c,e),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),this._sweepClip=this.destroyElement(this._sweepClip),e.prototype.destroy.call(this,t)},c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._showIds=new Array,this._singleBossArray=new Array,this.bossDeadArr=Array(),this.canChallengeArr=Array(),this._list=r.create(u.SingleBossItem,624,174),this._list.width=624,this._list.height=780,this._list.x=49,this._list.y=102,this.addChild(this._list),this._btnGroup=new n,this._btnGroup.setBtns(this.singleBoss,this.multiBoss,this.yunMengBoss),this._btnGroup.selectedIndex=1,this._sweepClip=o.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._sweepClip),this._sweepClip.pos(this.sweepBtn.x-5,this.sweepBtn.y-9,!0),this._sweepClip.scale(.8,.8),this._sweepClip.play(),this._sweepClip.visible=!1,this.addChild(this.closeBtn),this.regGuideSpr(59,this.singleBoss),this.regGuideSpr(61,this.multiBoss)},c.prototype.updateList=function(){this._showIds.length=0,this._singleBossArray.length=0,this.bossDeadArr.length=0,this.canChallengeArr.length=0;var t=u.SingleBossModel.instance.SingleBossCopy,e=u.SingleBossModel.instance.getSingleBossDic();if(null!=t){for(var i=0;i<t.length;i++){var n=(p=e.get(t[i][0]))[0],s=g.instance.getCfgByLv(n-1),o=void 0;o=d.instance.eraLevel>=s[3]&&d.instance.level>=s[4]?0<p[1]?0<GlobalData.serverTime-p[2]?[n,0]:[n,1]:[n,2]:[n,3],this._showIds.push(o)}this._showIds.sort(function(t,e){return t[1]==e[1]&&3==e[1]?t[0]<e[0]?-1:1:e[1]==t[1]?t[0]>e[0]?-1:1:t[1]<e[1]?-1:1}),this._list.datas=this._showIds;var a=m.instance.vipLevel;if(null!=f.instance.getVipInfoByLevel(a,66)){this.sweepBtn.label="一键扫荡",this.vipTxt.visible=!1;var r=u.SingleBossModel.instance._redDot;if(1==r){var l=0,h=u.SingleBossModel.instance.SingleBossCopy,c=u.SingleBossModel.instance.getSingleBossDic();for(i=0;i<h.length;i++){var p;n=(p=c.get(h[i][0]))[0],d.instance.eraLevel>=n-1&&0<p[1]&&0<p[2]&&0<GlobalData.serverTime-p[2]&&l++}this._sweepClip.visible=0<l&&r}else this._sweepClip.visible=!1}else this.sweepBtn.label="激活SVIP",this.vipTxt.visible=!0;this.setVisile()}},c.prototype.setVisile=function(){PlatParams.isCloseRecharge&&(this.sweepBtn.visible=this.vipTxt.visible=!1)},c.prototype.updatePlatChangeRecharge=function(){this.sweepBtn.visible=this.vipTxt.visible=!PlatParams.isCloseRecharge},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),Channel.instance.publish(2097955,null),this._sweepClip.play(),this.updateList()},c.prototype.close=function(){e.prototype.close.call(this),this._sweepClip.stop()},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sweepBtn,this,this.sweepHandler),this.onAutoEvt(this._btnGroup,i.CHANGE,this,this.changeHandler),this._btnGroup.selectedIndex=0,this.onAutoGlobalEvt("GET_SINGLE_BOSS",this,this.updateList),this.onAutoGlobalEvt("UPDATE_SINGLE_BOSS",this,this.updateList),this.onAutoGlobalEvt("BORN_UPDATE",this,this.updateList),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.regAutoRP(this.singleBossDot,["singleBossRP"]),this.regAutoRP(this.multiBossDot,["multiBossRP"]),this.regAutoRP(this.yunMengBossDot,["yunMengBossRP"])},c.prototype.sweepHandler=function(){var t=m.instance.vipLevel;if(null!=f.instance.getVipInfoByLevel(t,66))a.checkNeedSmeltTip()||s.instance.sweepCopy(2031);else{var e=Handler.create(this,l.gotoVIP);l.alert("温馨提示","一键扫荡需要SVIP2,是否立即前往提升SVIP",[e])}},c.prototype.changeHandler=function(){1===this._btnGroup.selectedIndex?(WindowManager.instance.open(40),this._btnGroup.selectedIndex=0):2===this._btnGroup.selectedIndex&&(WindowManager.instance.open(224),this._btnGroup.selectedIndex=0)},h=c,u.SingleBossPanel=h}(modules=modules||{}),function(t){var e,i;function n(){this._panel=new e.BossRevivePanel,this._bossIds=new Array,GlobalData.dispatcher.on("DUNGEON_BOSS_REVIVE_TIP",this,this.addBoss),GlobalData.dispatcher.on("DUNGEON_BOSS_DEAD_REVIVE",this,this.deadHandler)}e=t.notice||(t.notice={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.addBoss=function(t){if(-1===this._bossIds.indexOf(t)){for(var e=!1,i=0,n=this._bossIds.length;i<n;i++)if(t<this._bossIds[i]){this._bossIds.splice(i,0,t),e=!0;break}e||this._bossIds.push(t),this.check()}},n.prototype.check=function(){if(this._bossIds&&0!==this._bossIds.length){var t=this._bossIds[this._bossIds.length-1];this._panel.setBoss(t),this._panel.parent||(LayerManager.instance.addToNoticeLayer(this._panel),this._panel.bottom=-304,TweenJS.create(this._panel).to({bottom:200},150).start())}else this._panel.removeSelf()},n.prototype.deadHandler=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n[2][0]){var s=n[0];s===this._bossIds[this._bossIds.length-1]?this.passOne():-1!==this._bossIds.indexOf(s)&&this._bossIds.splice(this._bossIds.indexOf(s),1)}}},n.prototype.passOne=function(){this._bossIds&&0<this._bossIds.length&&this._bossIds.pop(),this.check()},n.prototype.passAll=function(){this._bossIds.length=0,this.check()},i=n,e.BossReviveManager=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.multiBoss||(t.multiBoss={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),i=n,e.MultiBossModel=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("monster")},n.prototype.getMonsterById=function(t){return GlobalData.searchByIndex1(this._table,t)},i=n,e.MonsterCfg=i}(modules=modules||{}),function(n){var s,t,e,i;function o(){return null!==t&&t.apply(this,arguments)||this}s=n.bossDungeon||(n.bossDungeon={}),e=n.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){Laya.timer.loop(1e3,s.BossDungeonModel.instance,s.BossDungeonModel.instance.loopHandler)},o.prototype.setSelectTarget=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!0);var i=s.BossDungeonModel.instance.searchBossType;2121==i?BossHomeModel.instance.setSelectTarget(t,e):2351==i&&n.sheng_yu.ShengYuBossModel.instance.setSelectTarget(t,e)},o.prototype.setAutoFindWayFuHuo=function(t){DungeonModel.instance.isDeadSearch()?2121===t?n.zhizun.ZhizunModel.instance.state&&BossHomeCtrl.instance.findPath():2351===t&&this.noneWhileOneHandler():this.setSelectTarget(s.BossDungeonModel.instance.selectLastBoss)},o.prototype.noneWhileOneHandler=function(){var t=DungeonModel.instance.searchBoss(null,s.BossDungeonModel.instance.searchBossIds);switch(s.BossDungeonModel.instance.searchBossType){case 2121:case 2351:case 3201:this.setSelectTarget(t);break;case 2402:case 2403:this.setSelectTarget(t)}},i=o,s.BossDungeonCtrl=i}(modules=modules||{}),function(p){var t,e,l,h,u,i,c,d,a,m,f,g,o,y,n;function s(){this._broadcastSceneOpenDay={},this._sceneStatesTable={},this._bossHomeOffsetLv=e.instance.getCfgById(10606)[1][0],this._copyMethods={},this._delayReviveTips={},this._copyMethods[10]=new t.DungeonCrossBossMethod,this._copyMethods[37]=new t.DungeonShenshowBossMethod,this._copyMethods[12]=new t.DungeonHomeBossMethod,this._copyMethods[57]=new t.DungeonBrahmaMethod,this._copyMethods[4]=new t.DungeonMutilBossMethod,this.AHEAD_TIME=e.instance.getCfgById(1001)[1][0],Laya.timer.loop(10,this,this.updateDelayRevive)}t=p.dungeon||(p.dungeon={}),e=p.config.BlendCfg,l=p.config.SceneMultiBossCfg,h=p.config.SceneCrossBossCfg,u=p.scene.SceneModel,i=p.config.SceneCfg,c=p.config.SceneHomeBossCfg,d=p.redPoint.RedPointCtrl,a=p.funcOpen.FuncOpenModel,m=game.misc.LogUtils,f=p.scene.SceneUtil,g=p.config.MonsterCfg,o=p.bossDungeon.BossDungeonModel,y=p.customData.CustomDataModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"inspires",{get:function(){return this._inspires},set:function(t){this._inspires=t,GlobalData.dispatcher.event("DUNGEON_INSPIRE_UPDATE")},enumerable:!0,configurable:!0}),s.prototype.initTimesTable=function(){this._timesTable={}},Object.defineProperty(s.prototype,"timesTable",{get:function(){return this._timesTable},enumerable:!0,configurable:!0}),s.prototype.getCopyTimesReply=function(t){this._timesTable=this._timesTable||{};for(var e=t[0],i=0,n=e.length;i<n;i++)this._timesTable[e[i][0]]=e[i];GlobalData.dispatcher.event("DUNGEON_TIMES_UPDATE"),this.checkCopyTimesRP()},s.prototype.updateCopyTimes=function(t){this._timesTable=this._timesTable||{};var e=t[0];this._timesTable[e[0]]=e,GlobalData.dispatcher.event("DUNGEON_TIMES_UPDATE"),this.checkCopyTimesRP()},Object.defineProperty(s.prototype,"broadcastBeginCombat",{get:function(){return this._broadcastBeginCombat},set:function(t){this._broadcastBeginCombat=t,GlobalData.dispatcher.event("DUNGEON_BROADCAST_BEGIN_COMBAT")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"broadcastEndCombat",{get:function(){return this._broadcastEndCombat},set:function(t){this._broadcastEndCombat=t,GlobalData.dispatcher.event("DUNGEON_BROADCAST_END_COMBAT")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"broadcastCopyMonsterWare",{get:function(){return this._broadcastCopyMonsterWare},set:function(t){this._broadcastCopyMonsterWare=t,GlobalData.dispatcher.event("DUNGEON_BROADCAST_COPY_MONSTER_WARE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"broadcastCopyIncome",{get:function(){return this._broadcastCopyIncome},set:function(t){this._broadcastCopyIncome=t,GlobalData.dispatcher.event("DUNGEON_BROADCAST_COPY_INCOME")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"broadcastCopyStar",{get:function(){return this._broadcastCopyStar},set:function(t){this._broadcastCopyStar=t,GlobalData.dispatcher.event("DUNGEON_BROADCAST_COPY_STAR")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"updateIncomeRecord",{get:function(){return this._updateIncomeRecord},set:function(t){this._updateIncomeRecord=t,GlobalData.dispatcher.event("DUNGEON_UPDATE_INCOME_RECORD")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"joinAward",{get:function(){return this._joinAward},set:function(t){this._joinAward=t,GlobalData.dispatcher.event("DUNGEON_UPDATE_JOIN_AWARD")},enumerable:!0,configurable:!0}),s.prototype.parseBossRevives=function(t,s,e){for(var i=[],n=0,o=t.length;n<o;n++){var a=t[n][0];if(this._bossTable[a]){var r=void 0;if(p.config.SceneCopyMysticalCfg.instance.getCfgByBossId(a))r=37;else switch(g.instance.getMonsterById(a)[1]){case 8:r=10;break;case 4:r=4;break;case 9:r=12;break;case 27:r=57}if(!this._copyMethods[r])continue;var l=void 0;if(t[n][2][0])l=t[n][2][2];else{if(!this._bossTable[a][2][0]||t[n][2][0])continue;l=0}i.push({bossId:a,sceneType:r,reviveTime:l})}}if(i.length){n=0;for(var h=(i=i.sort(function(t,e){var i=s.indexOf(t.sceneType),n=s.indexOf(e.sceneType);return(-1==i||n<i)&&-1!=n?1:-1})).length;n<h;n++){var c=i[n];if(e(c.bossId,c.sceneType,c.reviveTime))break}}},s.prototype.updateBossInfos=function(t){var o=this;this._bossTable=this._bossTable||{};var a=p.halo.HaloModel.instance.isHalo(),r=p.halo.HaloModel.instance.haloOpen,l=1==p.zhizun.ZhizunModel.instance.state,h=y.instance.getCustomDataByKey(42)?y.instance.getCustomDataByKey(42)[0]:0,c=f.isCommonScene&&!u.instance.isInMission&&!p.windCloud.WindCloudModel.instance.isWaitingForMatch&&!p.foreign_boss_panel.ForeignBossModel.instance.autoCall&&!CommonGroupUtil.notTeamCopyIsMatching();this.parseBossRevives(t,[37],function(t,e,i){if(delete o._delayReviveTips[t],o.isGuanZuBoss(t)){var n=o._copyMethods[e],s=!1;if(n.hasEnterTimes(e,o._bossTimesTable)){if(!i){if(c){switch(e){case 37:a&&r&&1==h&&(s=n.enterByBossId(t));break;case 10:case 4:case 12:case 57:l&&(s=n.enterByBossId(t))}!s&&n.isAbleShowReviveTip(t)&&(m.info(9,e+","+t+"boss复活提示"),o.reviveTip(t))}return s}n.isAbleShowReviveTip(t)&&(i<=GlobalData.serverTime+1e3*o.AHEAD_TIME?(m.info(9,e+","+t+"boss复活提示"),o.reviveTip(t)):(o._delayReviveTips[t]=i,m.info(9,e+","+t+"boss复活提示时间:"+CommonUtil.timeStampToDayHourMin(i))))}}return!1});for(var e=0,i=t.length;e<i;e++){var n=t[e][0],s=g.instance.getMonsterById(n);s&&25===s[1]&&(this._bossTable[n]&&!this._bossTable[n][2][0]||t[e][2][0]||(p.sceneTeam.SceneTeamModel.instance.hurtRank[n]=[])),this._bossTable[n]=t[e]}m.info(9,"----------------------------------------------@synTimeReply("+GlobalData.serverTime+")"),GlobalData.dispatcher.event("DUNGEON_BOSS_UPDATE"),this.checkBossRP()},s.prototype.updateDelayRevive=function(){var t=[];for(var e in this._delayReviveTips){var i=parseInt(e);this._delayReviveTips[i]<=GlobalData.serverTime+1e3*this.AHEAD_TIME&&(this.reviveTip(i),t.push(i))}for(var n=0,s=t.length;n<s;n++)i=t[n],delete this._delayReviveTips[i]},s.prototype.reviveTip=function(t){if(f.isCommonScene&&!u.instance.isInMission&&!p.windCloud.WindCloudModel.instance.isWaitingForMatch&&!p.foreign_boss_panel.ForeignBossModel.instance.autoCall&&!CommonGroupUtil.notTeamCopyIsMatching()){var e;if(h.instance.getCfgByBossId(t)){if(e=10,WindowManager.instance.isOpened(75))return}else if(l.instance.getCfgByBossId(t)){if(e=4,WindowManager.instance.isOpened(40))return}else if(c.instance.getCfgByBossId(t)){if(e=12,WindowManager.instance.isOpened(80))return}else if(p.config.SceneCopyInfiniteCfg.instance.getCfgByBossId(t)){if(e=36,WindowManager.instance.isOpened(599))return}else if(p.config.SceneCopyMysticalCfg.instance.getCfgByBossId(t)){if(e=37,WindowManager.instance.isOpened(599))return}else if(p.config.SceneBrahmaBossCfg.instance.getCfgByOcc(t)){if(e=57,WindowManager.instance.isOpened(1474))return;if(1!=p.trahman_boss.TrahmanBossModel.instance.isOpenBoss(t))return;if(!p.trahman_boss.TrahmanBossModel.instance.isChange())return}if(36==e||37==e||57==e)s.instance.getFollowBossById(t)&&GlobalData.dispatcher.event("DUNGEON_BOSS_REVIVE_TIP",t);else{var i=this.getBossTimesBySceneType(e);(!i||0<i[2])&&s.instance.getFollowBossById(t)&&GlobalData.dispatcher.event("DUNGEON_BOSS_REVIVE_TIP",t)}}},Object.defineProperty(s.prototype,"ranks",{get:function(){return this._ranks},set:function(t){this._ranks=t,GlobalData.dispatcher.event("DUNGEON_BOSS_RANKS_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bossTimesArr",{set:function(t){this._bossTimesTable||(this._bossTimesTable={});for(var e=0,i=t.length;e<i;e++)this._bossTimesTable[t[e][0]]=t[e];GlobalData.dispatcher.event("DUNGEON_BOSS_TIMES_UPDATE"),this.checkBossRP()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bossTimes",{set:function(t){this._bossTimesTable||(this._bossTimesTable={}),this._bossTimesTable[t[0]]=t,GlobalData.dispatcher.event("DUNGEON_BOSS_TIMES_UPDATE"),this.checkBossRP()},enumerable:!0,configurable:!0}),s.prototype.getBossInfoById=function(t){return this._bossTable?this._bossTable[t]:null},s.prototype.getBossTimesBySceneType=function(t){return this._bossTimesTable?this._bossTimesTable[t]:null},Object.defineProperty(s.prototype,"follows",{get:function(){return this._follows},set:function(t){this._follows=new Array,this._followTable={},this._bxTable={};for(var e=0,i=t.length;e<i;e++)if(t[e][1]){var n=t[e][0],s=t[e][2];0===s?(this._followTable[n]=t[e],this._follows.push(t[e])):1===s&&(this._bxTable[n]=t[e])}GlobalData.dispatcher.event("MULTI_BOSS_FOLLOWS_UPDATE"),this.checkBossRP(),p.beast_boss.BeastBossModel.instance.shenShouBxRP(),p.dungeon.DungeonModel.instance.xuXianCheckBossRP()},enumerable:!0,configurable:!0}),s.prototype.getFollowBossById=function(t){return this._followTable?this._followTable[t]:null},s.prototype.initStates=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=i[0];this._sceneStatesTable[n]=i}}this.SetSceneState(),GlobalData.dispatcher.event("DUNGEON_SCENE_STATE_UPDATE1"),GlobalData.dispatcher.event("DUNGEON_SCENE_STATE_UPDATE")},s.prototype.updateStates=function(t){console.log("更新场景状态: ",t);for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=i[0];i[2],this._sceneStatesTable[n]=i}}this.SetSceneState(),GlobalData.dispatcher.event("DUNGEON_SCENE_STATE_UPDATE"),t&&GlobalData.dispatcher.event("DUNGEON_SCENE_STATE_CHANGE_UPDATE",[t[0]])},s.prototype.SetSceneState=function(){var t=!1;for(var e in this._sceneStatesTable)if(this._sceneStatesTable.hasOwnProperty(e)){var i=this._sceneStatesTable[e];if(i){var n=i[0];if(43===n||42===n||56===n){var s=p.config.ActivityAllCfg.instance.getCfgBySceneType(n);if(!s)continue;var o=s[11];if(!p.funcOpen.FuncOpenModel.instance.getFuncIsOpen(o))continue}if(57===n)continue;var a=i[2];if(1===a){p.activityPreview.ActivityPreModel.instance.sceneState=i,t=!0;break}2===a&&(p.activityPreview.ActivityPreModel.instance.sceneState=i,t=!0)}}t||(p.activityPreview.ActivityPreModel.instance.sceneState=null,console.log("没有开启的或者 预告的 "))},s.prototype.getCopySceneStateByType=function(t){return this._sceneStatesTable[t]},Object.defineProperty(s.prototype,"sceneStates",{get:function(){return this._sceneStatesTable},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"broadcastSceneOpenDay",{set:function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e],s=n[0],o=n[1];this._broadcastSceneOpenDay[s]!==o&&(this._broadcastSceneOpenDay[s]=o,GlobalData.dispatcher.event("BROADCAST_SCENE_OPEN_DAY_UPDATE",s))}},enumerable:!0,configurable:!0}),s.prototype.getSceneOpenDayById=function(t){return this._broadcastSceneOpenDay[t]},s.prototype.funOPenUpdateCheckCopyTimesRP=function(t){for(var e=0;e<t.length;e++){var i=t[e];if((22==i||23==i||25==i||24==i||2301===i||2311===i||2321===i||2331===i||2341===i)&&a.instance.getFuncIsOpen(i)&&s.instance.checkCopyTimesRP())return}},s.prototype.checkCopyTimesRP=function(){var t=!1;if(this._timesTable)for(var e in this._timesTable){var i=this._timesTable[e],n=i[0],s=0;2051===n?s=22:2061===n?s=23:2071===n?s=25:2081===n?s=24:2301===n?s=219:2311===n?s=220:2321===n?s=221:2331===n?s=222:2341===n&&(s=223);var o=i[6];if((2051===n||2061===n||2071===n||2081===n||2301===n||2311===n||2321===n||2331===n||2341===n)&&0<o&&a.instance.getFuncNeedShow(s)){t=!0;break}}return d.instance.setRPProperty("dailyDungeonRP",t),t},s.prototype.getSdMoneyOrCishu=function(t){var e=0,i=!1;if(this._timesTable)for(var n in this._timesTable){var s=this._timesTable[n],o=s[0],a=s[6],r=s[10],l=s[9],h=s[7];2051==o||2061==o?(l||(i=!0),l&&(1==t?a<=0&&(e+=p.dailyDungeon.DailyDungeonModel.instance.getNum(o,r,h)[1]):0<a&&e++)):2071!=o&&2081!=o&&2301!=o&&2311!=o&&2321!=o&&2331!=o&&2341!=o||(l||(i=!0),l&&(1==t?a<=0&&(e+=p.dailyDungeon.DailyDungeonModel.instance.getNum(o,r,h)[1]):0<a&&e++))}return[e,i]},s.prototype.getStateById=function(t){var e=this._timesTable[t],i=e[8];return 0<e[6]?2:0<i?1:0},s.prototype.checkBossRP=function(){if(this._followTable&&this._bossTable&&this._bossTimesTable){var t=!1,e=!1,i=!1;for(var n in this._followTable){var s=parseInt(n),o=this._bossTable[s];if(o&&!o[2][0]){var a=void 0;if(h.instance.getCfgByBossId(s))a=10,(r=this.getBossTimesBySceneType(a))&&0<r[2]&&(e=!0);else if(l.instance.getCfgByBossId(s)){var r;a=4,(r=this.getBossTimesBySceneType(a))&&0<r[2]&&(t=!0)}else c.instance.getCfgByBossId(s)&&(i=!0)}}d.instance.setRPProperty("multiBossRP",t),d.instance.setRPProperty("threeWorldsRP",e),d.instance.setRPProperty("bossHomeRP",i),this.shenShouCheckBossRP()}},s.prototype.shenShouCheckBossRP=function(){for(var t=!1,e=1;e<=p.config.SceneCopyMysticalCfg.instance.maxLevel;e++){for(var i=!1,n=p.config.SceneCopyMysticalCfg.instance.getBoosIdArrByLevel(e),s=0;s<n.length;s++){var o=n[s];if(this.isGuanZuBoss(o)&&this._bossTable){var a=this._bossTable[o];if(a&&!a[2][0]&&0<p.beast_boss.BeastBossModel.instance.remainTimes){i=t=!0;break}}}p.beast_boss.BeastBossModel.instance.bossToLeveleRp[e]=i}d.instance.setRPProperty("beastBossCopyRP",t)},s.prototype.shenShouBxReviveTip=function(t,e){37!==i.instance.getCfgById(u.instance.enterScene[0])[7]&&this.isGuanZuBx(t)&&e&&this.reviveTip(t)},s.prototype.isGuanZuBx=function(t){return!!this._bxTable&&!!this._bxTable[t]&&this._bxTable[t][1]},s.prototype.isGuanZuBoss=function(t){return!!this._followTable&&!!this._followTable[t]&&this._followTable[t][1]},s.prototype.xuXianReviveTip=function(t,e){if(delete this._delayReviveTips[t],this.isGuanZuBoss(t)&&p.config.SceneCopyInfiniteCfg.instance.getCfgByBossId(t)&&-1!==p.beast_boss.BeastBossModel.instance.getAllBossIdByEraLv().indexOf(t)){var i=this.AHEAD_TIME;e?e<=GlobalData.serverTime+1e3*i?(m.info(9,"boss复活提示"),this.reviveTip(t)):this._delayReviveTips[t]=e:this.reviveTip(t)}},s.prototype.xuXianCheckBossRP=function(){var t=!1;if(this._followTable)for(var e=0;e<p.config.SceneCopyInfiniteCfg.instance.arr.length;e++){var i=p.config.SceneCopyInfiniteCfg.instance.arr[e];if(i){var n=p.beast_boss.BeastBossModel.instance.getId(i);if(this.isGuanZuBoss(n)&&!p.beast_boss.BeastBossModel.instance.singBossIdToTime[n]){t=!0;break}}}d.instance.setRPProperty("beastBossWuXianCopyRP",t),GlobalData.dispatcher.event("BEAST_BOSS_WUXIAN_UPDATE")},Object.defineProperty(s.prototype,"tipType",{get:function(){return this._tipType},set:function(t){this._tipType=t,GlobalData.dispatcher.event("TIPBIANQIANG_UPDATE")},enumerable:!0,configurable:!0}),s.prototype.searchBoss=function(t,e){if(!this._bossTable)return-1;var i=this._bossTable[t];if(i&&!i[2][0])return t;for(var n=0,s=e;n<s.length;n++){var o=s[n];if((i=this._bossTable[o])&&!i[2][0])return o}return-1},s.prototype.isDeadSearch=function(){if(!this._bossTable||!o.instance.searchBossIds)return null;var t=o.instance.selectLastBoss;if(!t)return null;var e=this._bossTable[t];return e?e[2][0]:null},s.prototype.liveCount=function(){if(!this._bossTable||!o.instance.searchBossIds)return null;for(var t=0,e=0,i=o.instance.searchBossIds;e<i.length;e++){var n=i[e],s=this._bossTable[n];s&&(s[2][0]||t++)}return t},s.prototype.getLiveBoss=function(t){if(void 0===t&&(t=-1),!this._bossTable||!o.instance.searchBossIds)return-1;for(var e=0,i=o.instance.searchBossIds;e<i.length;e++){var n=i[e];if(-1==t||n==t){var s=this._bossTable[n];if(s&&!s[2][0])return n}}return-1},s.prototype.bossIsDead=function(t){if(!this._bossTable)return!0;var e=this._bossTable[t];return!e||e[2][0]},Object.defineProperty(s.prototype,"bossTable",{get:function(){return this._bossTable},enumerable:!0,configurable:!0}),s.prototype.clearForbiddenBoss=function(){for(var t=GlobalData.getConfig("scene_forbidden_boss"),e=0;e<t.length;++e)this._bossTable[t[e][4]]&&delete this._bossTable[t[e][4]]},n=s,t.DungeonModel=n}(modules=modules||{}),function(t){var l,h,e;function i(){}l=t.dungeon||(t.dungeon={}),h=t.bag.BagModel,i.init=function(){this._ids||(this._ids={},this._ids[3]=20730003,this._ids[4]=20730004,this._ids[2051]=20730005,this._ids[2061]=20730006,this._ids[2071]=20730007,this._ids[2081]=20730008,this._ids[2091]=20730009,this._ids[10]=20730010)},i.checkUseTicketBySceneType=function(t,e){this.init();var i=!1,n=l.DungeonModel.instance.getBossTimesBySceneType(t);if(n&&0<n[2])i=!1;else if(n&&0===n[2]){var s=n[4];if(s)for(var o=0,a=s.length;o<a;o++)if(e===s[o][0]){if(console.log("场景类型 SceneTypeEx---"+n[0]),console.log("level---"+e),console.log("是否消耗次数---"+s[o][1]),s[o][1]){var r=h.instance.getItemsById(this._ids[t]);0<r.length&&(i=!0,WindowManager.instance.openDialog(15,[r[0],!1]))}break}}return i},i.checkUseTicketBySceneId=function(t){this.init();var e=!1,i=l.DungeonModel.instance.timesTable[t];if(i&&0<i[6])e=!1;else if(i&&0===i[6]){var n=this._ids[t],s=h.instance.getItemsById(n);0<s.length&&(e=!0,WindowManager.instance.openDialog(15,[s[0],!1]))}return e},e=i,l.DungeonUtil=e}(modules=modules||{}),function(i){var t,p,e,n,s,o,u,a,r,l,d,m,f,h,c,g,y,_,v,I;function b(){return null!==p&&p.apply(this,arguments)||this}t=i.multiBoss||(i.multiBoss={}),e=ui.MultiBossViewUI,n=i.common.CustomList,s=i.common.ListWithArrowCtrl,o=i.common.BtnGroup,u=i.config.SceneMultiBossCfg,a=i.config.MonsterResCfg,r=i.common.ProgressBarCtrl,l=i.bag.BaseItem,d=i.player.PlayerModel,m=i.dungeon.DungeonCtrl,f=i.dungeon.DungeonModel,h=i.common.CustomClip,c=i.dungeon.DungeonUtil,g=i.common.CommonUtil,y=i.customData.CustomDataCtrl,_=i.customData.CustomDataModel,v=Laya.Event,p=e,__extends(b,p),b.prototype.initialize=function(){p.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.scrollDir=2,this._list.vCount=1,this._list.spaceX=10,this._list.itemRender=t.MultiBossItem,this._list.width=530,this._list.height=126,this._list.pos(96,128,!0),this.addChild(this._list),this._listCtrl=new s(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=544,this._btnGroup=new o,this._btnGroup.setBtns(this.singleBoss,this.multiBoss,this.yunMengBoss),this._proCtrl=new r(this.proBar,258,this.proTxt),this._proCtrl.maxValue=1,this._btnClip=h.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,261,808),this._isBossDead=!0,PlatParams.isCloseRecharge&&(this.autoCheckBox.visible=this.msc1.visible=this.msc2.visible=!1),this.regGuideSpr(59,this.singleBoss),this.regGuideSpr(61,this.multiBoss),this.regGuideSpr(62,this.killBtn)},b.prototype.onEvt=function(){p.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.bossUpdateHandler),this.onAutoGlobalEvt("DUNGEON_BOSS_TIMES_UPDATE",this,this.timesUpdateHandler),this.onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.followsUpdateHandler),this.onAutoGlobalEvt("MULTI_BOSS_ZHIZUN_UPDATE",this,this.checkBoxState),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.onAutoEvt(this._btnGroup,v.CHANGE,this,this.changeHandler),this.onAutoEvt(this._list,v.SELECT,this,this.selectBossHandler),this.onAutoClick(this.followBtn,this,this.followHandler),this.onAutoClick(this.killBtn,this,this.killHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.autoCheckBox,this,this.autoCheckBoxHandler),this._listCtrl.addListeners(),this.regAutoRP(this.singleBossDot,["singleBossRP"]),this.regAutoRP(this.multiBossDot,["multiBossRP"]),this.regAutoRP(this.yunMengBossDot,["yunMengBossRP"])},b.prototype.updatePlatChangeRecharge=function(){this.autoCheckBox.visible=this.msc1.visible=this.msc2.visible=!PlatParams.isCloseRecharge},b.prototype.offEvt=function(){this._listCtrl.removeListeners(),Laya.timer.clear(this,this.reviveCDHandler),p.prototype.offEvt.call(this)},b.prototype.setOpenParam=function(t){p.prototype.setOpenParam.call(this,t),this._selectedBossId=t},b.prototype.onOpened=function(){p.prototype.onOpened.call(this),this._btnGroup.selectedIndex=1,this._list.selectedIndex=-1;var t=u.instance.cfgs.concat(),e=t[0];if(t.shift(),f.instance.firstBoss&&(t[0]=e,this._selectedBossId=e[2]),this._list.datas=t,this._selectedBossId){for(var i=0,n=t.length;i<n;i++)if(t[i][2]===this._selectedBossId){this._list.selectedIndex=i;break}}else{var s=d.instance.level,o=d.instance.eraLevel,a=-1,r=-1;for(i=t.length-1;0<=i;i--){var l=t[i][2];if(f.instance.getFollowBossById(l)){var h=f.instance.getBossInfoById(l),c=h?h[2]:null;if(c&&!c[0]){r=i;break}}s>=t[i][4]&&o>=t[i][3]&&-1===a&&(a=i)}this._list.selectedIndex=-1===r?a:r}this._list.scrollTo(136*this._list.selectedIndex),this.timesUpdateHandler(),m.instance.getBossTimes(),m.instance.getBoss(),this.checkBoxState()},b.prototype.checkBoxState=function(){var t=_.instance.getCustomDataByKey(1),e=1==(t?t[0]:0);1==i.zhizun.ZhizunModel.instance.state?this.autoCheckBox.selected=e:this.autoCheckBox.selected=!1},b.prototype.autoCheckBoxHandler=function(){if(1==i.zhizun.ZhizunModel.instance.state){this.autoCheckBox.selected=!this.autoCheckBox.selected;var t=[[1,[this.autoCheckBox.selected?1:0]]];y.instance.setCustomizeData(t)}else g.alert("温馨提示","您未激活至尊特权，不可自动挑战，是否前往激活？",[Handler.create(this,this.okBtnHandel),"确定"],[null,"取消"],null,!0)},b.prototype.okBtnHandel=function(){WindowManager.instance.open(351)},b.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(WindowManager.instance.open(33),this._btnGroup.selectedIndex=1):2===this._btnGroup.selectedIndex&&(WindowManager.instance.open(224),this._btnGroup.selectedIndex=1)},b.prototype.selectBossHandler=function(){if(this._selectedBoss=this._list.selectedData,this._selectedBoss){m.instance.getBossTimes(),m.instance.getBoss();var t=this._selectedBoss[2],e=a.instance.getCfgById(t);this.bossNameTxt.text=a.instance.getMonsterName(t),this.headImg.skin="assets/icon/monster/"+e[3]+".png";var i=this._selectedBoss[6];this._awardItems=this._awardItems||[];for(var n=0,s=i.length;n<s;n++){var o=void 0;this._awardItems.length>n?o=this._awardItems[n]:(o=new l,this._awardItems[n]=o),o.dataSource=[i[n][0],i[n][1],0,null],o.pos(n%4*141+99,114*Math.floor(n/4)+617-20,!0),this.addChild(o)}this.bossUpdateHandler(),this.followBtn.selected=!1,this.followsUpdateHandler()}},b.prototype.followHandler=function(){if(this._selectedBoss)if(this.followBtn.selected=!this.followBtn.selected,f.instance.firstBoss){var t=u.instance.cfgs;m.instance.setFollowBoss(t[1][2],this.followBtn.selected)}else m.instance.setFollowBoss(this._selectedBoss[2],this.followBtn.selected)},b.prototype.killHandler=function(){this._selectedBoss&&(this._selectedBossId==u.instance.cfgs[0][2]?m.instance.reqEnterScene(this._selectedBoss[0],1):c.checkUseTicketBySceneType(4,this._selectedBoss[1])||m.instance.reqEnterScene(this._selectedBoss[0],this._selectedBoss[1]))},b.prototype.helpHandler=function(){g.alertHelp(20007)},b.prototype.showClip=function(t){t?h.thisPlay(this._btnClip):h.thisStop(this._btnClip)},b.prototype.bossUpdateHandler=function(){if(this._selectedBoss){var t=f.instance.getBossInfoById(this._selectedBoss[2]);t&&(f.instance.firstBoss&&0==this._list.selectedIndex&&(t[2][0]=!1,t[2][1]=1),this.lastFirstTxt.text="上轮第一："+(t[1][0]||"无"),this.playerNumTxt.text="争夺："+t[2][3]+"人",this._proCtrl.value=t[2][1],this._proCtrl.txt=(100*t[2][1]).toFixed(2)+"%",t[2][0]?(this.killedImg.visible=this.reviveTimeTxt.visible=!0,this.proBg.visible=this.proBar.visible=this.proTxt.visible=!1,this._reviveTimeStamp=t[2][2],this._reviveTimeStamp>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.reviveCDHandler),this.reviveCDHandler(),this._isBossDead=!0):(Laya.timer.clear(this,this.reviveCDHandler),this.showClip(!0),this._isBossDead=!1)):(this.killedImg.visible=this.reviveTimeTxt.visible=!1,this.proBg.visible=this.proBar.visible=this.proTxt.visible=!0,Laya.timer.clear(this,this.reviveCDHandler),this._isBossDead=!1),this.checkRP())}},b.prototype.reviveCDHandler=function(){this._reviveTimeStamp>GlobalData.serverTime?this.reviveTimeTxt.text="复活倒计时："+g.timeStampToMMSS(this._reviveTimeStamp):(this.killedImg.visible=this.reviveTimeTxt.visible=!1,this.proBg.visible=this.proBar.visible=this.proTxt.visible=!0,Laya.timer.clear(this,this.reviveCDHandler),this._isBossDead=!1,this.checkRP())},b.prototype.checkRP=function(){var t=!1;if(this._selectedBoss){var e=f.instance.getBossTimesBySceneType(4);if(e&&!this._isBossDead&&0<e[2]){var i=f.instance.getFollowBossById(this._selectedBoss[2]);i&&i[1]&&(t=!0)}}this.showClip(t)},b.prototype.timesUpdateHandler=function(){var t=f.instance.getBossTimesBySceneType(4);t&&(this.timesTxt.text=t[2]+"/"+t[1],this.timesTxt.color=0<t[2]?"#168a17":"#FF3e3e",this._timesRecoverStamp=t[3],this._timesRecoverStamp>GlobalData.serverTime?(this.cdTxt.visible=!0,this.challengeTxt.x=157,this.timesTxt.x=272,Laya.timer.loop(1e3,this,this.timesCDHandler),this.timesCDHandler()):(this.cdTxt.visible=!1,this.challengeTxt.x=284,this.timesTxt.x=399,Laya.timer.clear(this,this.timesCDHandler)),this.checkRP())},b.prototype.timesCDHandler=function(){this._timesRecoverStamp>GlobalData.serverTime?this.cdTxt.text=g.timeStampToHHMMSS(this._timesRecoverStamp)+"后恢复1次":(this.cdTxt.visible=!1,this.challengeTxt.x=284,this.timesTxt.x=399,Laya.timer.clear(this,this.timesCDHandler))},b.prototype.followsUpdateHandler=function(){if(this._selectedBoss){var t=f.instance.follows;if(t){for(var e=0,i=t.length;e<i;e++)if(this._selectedBoss[2]===t[e][0]){this.followBtn.selected=t[e][1];break}this.checkRP()}}},b.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._listCtrl=this.destroyElement(this._listCtrl),this._btnGroup=this.destroyElement(this._btnGroup),this._proCtrl=this.destroyElement(this._proCtrl),this._awardItems=this.destroyElement(this._awardItems),this._btnClip=this.destroyElement(this._btnClip),p.prototype.destroy.call(this,t)},I=b,t.MultiBossPanel=I}(modules=modules||{}),function(t){var d,e,i,n,m,s,f,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}d=t.talisman||(t.talisman={}),i=t.common.BtnGroup,n=ui.TalismanViewUI,m=t.config.TalismanCfg,s=t.common.CustomList,f=t.bag.BagModel,o=t.notice.SystemNoticeManager,e=n,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnGroup=new i,this._btnGroup.setBtns(this.qualityLv1Btn,this.qualityLv2Btn,this.qualityLv3Btn,this.qualityLv4Btn),this._culLevel=0,this._itemsArray=new Array,this._showIds=new Array,this._list=new s,this._list.width=628,this._list.height=536,this._list.hCount=4,this._list.spaceX=3,this._list.spaceY=5,this._list.itemRender=d.TalismanItem,this._list.x=54,this._list.y=505,this.addChild(this._list),this._dotArr=[this.redDot1,this.redDot2,this.redDot3,this.redDot4];for(var t=0;t<this._dotArr.length;t++)this._dotArr[t].visible=!1},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.getItem(),this._isZhiDing?(this._btnGroup.selectedIndex=this._isZhiDing,this._isZhiDing=null):this.openFirst()},r.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._isZhiDing=t},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeMagicHandler),this.onAutoGlobalEvt("UPDATE_AMULET_INFO_REPLAY",this,this.updateItem),this.onAutoGlobalEvt("GET_AMULET_INFO_REPLAY",this,this.getItem),this.onAutoGlobalEvt("BAG_ADD_ITEM",this,this.updateItem),this.onAutoGlobalEvt("REFINE_AMULET_REPLAY",this,this.amuletInfoReplay)},r.prototype.amuletInfoReplay=function(){var t=d.TalismanModel.instance.RefineAmuletReplay;switch(t[0]){case 12003:o.instance.addNotice("法宝数量不足",!0);break;case 12601:o.instance.addNotice("法宝已满级",!1);break;case 0:1==t[1]?d.TalismanModel.instance._itemId&&WindowManager.instance.openDialog(53,d.TalismanModel.instance._itemId):o.instance.addNotice("升级成功",!1)}},r.prototype.getItem=function(){var t=d.TalismanModel.instance.getAmuletRise();if(t){var e=t[0];this._culLevel=e,this.updateItem()}},r.prototype.updateItem=function(){var t=d.TalismanModel.instance.getAmuletRise(),e=t[0],i=t[1],n=d.TalismanModel.instance.getAmuletRefine(),s=m.instance.getRiseCfgByLevel(e),o=s[1];e>this._culLevel&&(WindowManager.instance.openDialog(54,e),this._culLevel=e),0<e&&(this.expLevel.skin="assets/icon/ui/amulet/"+e+".png"),1<=i/o?(this.expText.text="已满阶",this.proImg.width=290):(this.expText.text=i+"/"+o,this.proImg.width=i/o*290),this.magicUpLimit.text=s[2].toString(),this.magicAttack.text="+"+(100*s[3]).toFixed()+"%",this.powerNum.value=n[1].toString();for(var a=this._showIds.length=0;a<this._itemsArray.length;a++){var r=this._itemsArray[a],l=this._itemsArray[a][0],h=this._itemsArray[a][2],c=void 0,p=f.instance.getItemCountById(l)+f.instance.getItemCountById(r[4]),u=r[3][1];c=0==h?null!=u&&u<=p?[r,4]:[r,1]:h==m.instance.getMaxLvById(l)?[r,0]:null!=u&&u<=p?[r,3]:[r,2],this._showIds.push(c)}this._showIds.sort(this.sortFun),this.setRedDot(),this._list.datas=this._showIds},r.prototype.sortFun=function(t,e){var i=t[1],n=e[1],s=t[0][0],o=e[0][0],a=d.TalismanModel.instance.getlVById(s),r=d.TalismanModel.instance.getlVById(o);return i==n?a===r?s-o:r-a:n-i},r.prototype.setRedDot=function(){for(var t=d.TalismanModel.instance.getRedDot(),e=0;e<t.length;e++)this._dotArr[e].visible=t[e]},r.prototype.openFirst=function(){for(var t,e=d.TalismanModel.instance.getRedDot(),i=0;i<e.length;i++)if(1==e[i]){t=i;break}this._btnGroup.selectedIndex=null!=t?t:0},r.prototype.changeMagicHandler=function(){this._itemsArray=d.TalismanModel.instance.getAmuletRefineQualityArray(this._btnGroup.selectedIndex),this.getItem()},a=r,d.TalismanPanel=a}(modules=modules||{}),function(s){var r,n,t,e,i,o,l,a,h,c,p,u,d,m,f;function g(){return null!==n&&n.apply(this,arguments)||this}r=s.magicArt||(s.magicArt={}),t=ui.MagicArtViewUI,e=s.common.BtnGroup,i=s.common.CustomClip,o=s.notice.SystemNoticeManager,l=s.player.PlayerModel,a=s.bag.BagUtil,h=s.common.CommonUtil,c=s.config.SkillPureCfg,p=s.common.SimpleList,u=s.config.SkillCfg,d=s.config.AmuletRiseCfg,m=s.guide.GuideModel,n=t,__extends(g,n),g.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),this._tabGroup=this.destroyElement(this._tabGroup),this._scienceTabGroup=this.destroyElement(this._scienceTabGroup),this._iconImgGroup=this.destroyElement(this._iconImgGroup),this._trainSuccessClip=this.destroyElement(this._trainSuccessClip),this._iconImgs=this.destroyElement(this._iconImgs),this._skillNamesTxt=this.destroyElement(this._skillNamesTxt),this._skillLevelsTxt=this.destroyElement(this._skillLevelsTxt),this._skillProgressTxt=this.destroyElement(this._skillProgressTxt),this._skillProgressImg=this.destroyElement(this._skillProgressImg),this._skillSelectImg=this.destroyElement(this._skillSelectImg),this._skillProgressUnderImg=this.destroyElement(this._skillProgressUnderImg),this._skillLevelUnderImg=this.destroyElement(this._skillLevelUnderImg),this._skillRedImg=this.destroyElement(this._skillRedImg),this._skillOpenDesTxt=this.destroyElement(this._skillOpenDesTxt),n.prototype.destroy.call(this,t)},g.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._showIndex=-1,this._tabGroup=new e,this._scienceTabGroup=new e,this._iconImgGroup=new e,this._list=p.create(r.MagicArtItem,642,146),this._list.size(649,761),this._trainSuccessClip=new Array,this._btnClip=i.create("assets/effect/btn_light.atlas","btn_light",16),this.kownledgeShow.addChild(this._btnClip),this._btnClip.pos(341,902,!0),this._iconImgGroup.setBtns(this.skillIcon3,this.skillIcon4,this.skillIcon5,this.skillIcon6,this.skillIcon7,this.skillIcon0,this.skillIcon1,this.skillIcon2),this._iconImgs=[this.skillIcon3,this.skillIcon4,this.skillIcon5,this.skillIcon6,this.skillIcon7,this.skillIcon0,this.skillIcon1,this.skillIcon2],this._skillNamesTxt=[this.skillName3,this.skillName4,this.skillName5,this.skillName6,this.skillName7,this.skillName0,this.skillName1,this.skillName2],this._skillLevelsTxt=[this.skillLevelTxt3,this.skillLevelTxt4,this.skillLevelTxt5,this.skillLevelTxt6,this.skillLevelTxt7,this.skillLevelTxt0,this.skillLevelTxt1,this.skillLevelTxt2],this._skillProgressTxt=[this.skillProgressTxt3,this.skillProgressTxt4,this.skillProgressTxt5,this.skillProgressTxt6,this.skillProgressTxt7,this.skillProgressTxt0,this.skillProgressTxt1,this.skillProgressTxt2],this._skillProgressImg=[this.skillProgressImg3,this.skillProgressImg4,this.skillProgressImg5,this.skillProgressImg6,this.skillProgressImg7,this.skillProgressImg0,this.skillProgressImg1,this.skillProgressImg2],this._skillSelectImg=[this.skillSelect3,this.skillSelect4,this.skillSelect5,this.skillSelect6,this.skillSelect7,this.skillSelect0,this.skillSelect1,this.skillSelect2],this._skillProgressUnderImg=[this.skillProgress3,this.skillProgress4,this.skillProgress5,this.skillProgress6,this.skillProgress7,this.skillProgress0,this.skillProgress1,this.skillProgress2],this._skillLevelUnderImg=[this.skillLevelUnder3,this.skillLevelUnder4,this.skillLevelUnder5,this.skillLevelUnder6,this.skillLevelUnder7,this.skillLevelUnder0,this.skillLevelUnder1,this.skillLevelUnder2],this._skillRedImg=[this.skillRed3,this.skillRed4,this.skillRed5,this.skillRed6,this.skillRed7,this.skillRed0,this.skillRed1,this.skillRed2],this._tabGroup.setBtns(this.knowledgeBtn,this.scienceBtn),this._skillOpenDesTxt=[this.skillOpenDes3,this.skillOpenDes4,this.skillOpenDes5,this.skillOpenDes6,this.skillOpenDes7,this.skillOpenDes0,this.skillOpenDes1,this.skillOpenDes2],this._scienceTabGroup.setBtns(this.famineBtn,this.oldGodBtn,this.turnBirthBtn),this.listShow.addChild(this._list),this.initTrainSuccess(),this.regGuideSpr(7,this.oneKeyBtn)},g.prototype.initTrainSuccess=function(){for(var t=[[194,188],[419,186],[554,349],[556,543],[419,707],[195,706],[59,551],[61,355]],e=0;e<t.length;e++)this._trainSuccessClip[e]=i.create("assets/effect/xiu_lian.atlas","xiu_lian",12,!1),this.kownledgeShow.addChild(this._trainSuccessClip[e]),this._trainSuccessClip[e].pos(t[e][0]-98,t[e][1]-98,!0),this._trainSuccessClip[e].autoRemove=!0,this._trainSuccessClip[e].visible=!1},g.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoEvt(this._iconImgGroup,"change",this,this.selectTabHandler),this.onAutoEvt(this._tabGroup,"change",this,this.changeTabHandler),this.onAutoEvt(this._scienceTabGroup,"change",this,this.changeScienceTabHandler),this.onAutoClick(this.levelUpBtn,this,this.levelUpHandler),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyHandler),this.onAutoGlobalEvt("SKILL_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("PLAYER_UPDATE_ZQ",this,this.knowledgeUpdate),this.onAutoGlobalEvt("PLAYER_UPDATE_ZQ",this,this.updateZQ),this.regAutoRP(this.point_red,["magicArtRP"]),this.regAutoRP(this._btnClip,["magicArtRP"])},g.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._iconImgGroup.selectedIndex=0,this._tabGroup.selectedIndex=0,this._scienceTabGroup.selectedIndex=0,this._scienceSelectIndex=0,this._btnClip.play(),this.updateZQ()},g.prototype.close=function(){n.prototype.close.call(this),this._btnClip.stop()},g.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t);for(var e=0;e<this._skillSelectImg.length;e++){this._skillLevelsTxt[e].visible=this._skillProgressImg[e].visible=this._skillLevelUnderImg[e].visible=!1,this._skillRedImg[e].visible=this._skillNamesTxt[e].visible=!1,this._skillProgressTxt[e].visible=this._skillProgressUnderImg[e].visible=this._skillSelectImg[e].visible=!1;var i=c.instance.knowledgeArr[e];this._skillOpenDesTxt[e].text=i[7],this._iconImgs[e].skin="assets/icon/skill/"+i[6]+".png",this._iconImgs[e].disabled=!0}this.knowledgeHandler(),this._tabGroup.selectedIndex=0,GlobalData.dispatcher.event("MAGIC_ART_OPEN")},g.prototype.updateZQ=function(){var t=l.instance.zq,e=this._levelUpCost?this._levelUpCost:0;this.levelUpCostTxt.text=t+"/"+e,this.levelUpCostTxt.color=e<=t?"#2c476a":"#ff3e3e",h.centerChainArr(this.showIconMc.width,[this.showIcon,this.levelUpCostTxt])},g.prototype.selectTabHandler=function(){0<=this._showIndex&&(this._skillSelectImg[this._showIndex].visible=!1),this._showIndex=this._iconImgGroup.selectedIndex,0<=this._showIndex&&(this._skillSelectImg[this._showIndex].visible=!0,this.setKnowledgeInfo(this._showIndex))},g.prototype.changeTabHandler=function(){switch(this._tabGroup.selectedIndex){case 0:this.knowledgeHandler();break;case 1:this._scienceTabGroup.selectedIndex=0,this._scienceSelectIndex=0,this.scienceHandler()}},g.prototype.changeScienceTabHandler=function(){this._scienceSelectIndex=this._scienceTabGroup.selectedIndex,this.scienceUpdate()},g.prototype.updateInfo=function(){this.knowledgeUpdate(),this.scienceUpdate()},g.prototype.knowledgeHandler=function(){m.instance.registeUI(7,this.oneKeyBtn),this.kownledgeShow.visible=!0,this.scienceShow.visible=!1,this.knowledgeUpdate()},g.prototype.scienceHandler=function(){m.instance.removeUI(7),this.kownledgeShow.visible=!1,this.scienceShow.visible=!0,this.scienceUpdate()},g.prototype.knowledgeUpdate=function(){if(0===this._tabGroup.selectedIndex){for(var t=c.instance.knowledgeArr,e=0,i=t.length;e<i;e++){var n=t[e][0],s=r.MagicArtModel.instance.getSkillById(n);if(s){var o=s?s[1]:0;this._skillOpenDesTxt[e].visible=!1,this._skillLevelsTxt[e].visible=this._skillLevelUnderImg[e].visible=this._skillProgressImg[e].visible=!0,this._skillProgressTxt[e].visible=this._skillProgressUnderImg[e].visible=this._skillNamesTxt[e].visible=!0,r.MagicArtModel.instance.hasLevelUp[e]&&(this._trainSuccessClip[e].play(),this._trainSuccessClip[e].visible=!0,r.MagicArtModel.instance.hasLevelUp[e]=!1,this.kownledgeShow.addChild(this._trainSuccessClip[e]));var a=r.MagicArtModel.instance.maxLevel;this._skillProgressTxt[e].text=o+"/"+a,this._skillProgressImg[e].width=o/a*116,this._skillLevelsTxt[e].text=o.toString(),this._iconImgs[e].disabled=!1,this._skillRedImg[e].visible=0<o&&o<a&&u.instance.getCfgById(1e4*n+o)[4]<=l.instance.zq,this._skillNamesTxt[e].text=t[e][1]}}this.setKnowledgeInfo(this._showIndex),this.powerNum.value=r.MagicArtModel.instance._fighting.toString()}},g.prototype.setKnowledgeInfo=function(t){if(!(t<0)){this._showIndex=t;var e=c.instance.knowledgeArr[t],i=e[0],n=r.MagicArtModel.instance.getSkillById(e[0]);if(n){var s=n[1],o=u.instance.getCfgById(1e4*i+s);this.skillInfoTxt.text=e[1]+" Lv."+s,this._levelUpCost=o[4],this.updateZQ(),this.skillDescribeTxt.text=h.stringFormat(e[5],o[2])}}},g.prototype.scienceUpdate=function(){1===this._tabGroup.selectedIndex&&(this._list.datas=c.instance.getOccultArrByType(this._scienceSelectIndex+1))},g.prototype.levelUpHandler=function(){var t=r.MagicArtModel.instance.knowledgeSkill[this._showIndex];t?t[1]<r.MagicArtModel.instance.maxLevel?this._levelUpCost>l.instance.getCurrencyById(90530001)?a.openLackPropAlert(90530001,1):r.MagicArtCtrl.instance.addSkillLevel(t[0]):t[1]===d.instance.maxLv?h.noticeError(19001):o.instance.addNotice("仙术等级达到上限，提升法宝修为可突破上限",!0):o.instance.addNotice("需先激活仙术才可升级",!0)},g.prototype.oneKeyHandler=function(){var t=r.MagicArtModel.instance.knowledgeSkill;if(0!=t.length){for(var e=!0,i=0;i<t.length;i++){var n=t[i][1];if(n<r.MagicArtModel.instance.maxLevel&&(e=!1,u.instance.getCfgById(1e4*t[i][0]+n)[4]<=l.instance.zq))return void r.MagicArtCtrl.instance.addSkillLevelOfAll()}e&&r.MagicArtModel.instance.maxLevel===s.config.AmuletRiseCfg.instance.maxLv?h.noticeError(19001):e?o.instance.addNotice("仙术等级达到上限，提升法宝修为可突破上限",!0):a.openLackPropAlert(90530001,1)}else o.instance.addNotice("需先激活仙术才可升级",!0)},f=g,r.MagicArtPanel=f}(modules=modules||{}),function(t){var e,i,n,a,s,r,o;function l(){var t=i.call(this)||this;return t.destin=new s(96,60),t}e=t.magicArt||(t.magicArt={}),n=ui.MagicArtGetViewUI,a=laya.ui.Image,s=laya.maths.Point,r=t.config.SkillPureCfg,i=n,__extends(l,i),l.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.skillId=t,this.centerX=0,this.centerY=0,this.showInfo(),Laya.timer.loop(1e3,this,this.close)},l.prototype.showInfo=function(){var t=Math.floor(this.skillId/1e3),e=r.instance.getCfgById(this.skillId);1==t?(this.knowledgeShow.visible=!0,this.scienceShow.visible=!1,this.topTitleImg.skin="magic_art/msz_xianshu_1.png",this.knowledgeIconImg.skin="assets/icon/skill/"+e[6]+".png",this.knowledgeName.text=e[1]):2==t&&(this.knowledgeShow.visible=!1,this.scienceShow.visible=!0,this.topTitleImg.skin="magic_art/msz_xianshu_2.png",this.scienceIconImg.skin="assets/icon/skill/"+e[6]+".png",this.scienceName.text=e[1],this.scienceDescribe.text=e[9])},l.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.close),this.itemEffect()},l.prototype.itemEffect=function(){var t=Math.floor(this.skillId/1e3),e=new a;e.skin="assets/icon/skill/"+r.instance.getCfgById(this.skillId)[6]+".png",e.anchorX=e.anchorY=.5;var i=1==t?CommonConfig.viewWidth/2:CommonConfig.viewWidth/2-177,n=CommonConfig.viewHeight/2;e.pos(i,n),LayerManager.instance.addToNoticeLayer(e);var s=CommonConfig.viewWidth/2-this.destin.x,o=CommonConfig.viewHeight-this.destin.y;TweenJS.create(e).to({scaleX:1.5,scaleY:1.5},400).onComplete(function(){TweenJS.create(e).to({scaleX:1.1,scaleY:1.1},400).onComplete(function(){TweenJS.create(e).to({x:s,y:o,scaleX:.2,scaleY:.2},600).onComplete(function(){e.destroy(!0)}).start()}).start()}).start()},o=l,e.MagicArtGetPanel=o}(modules=modules||{}),function(t){var o,i,e,a,n,s,g,r,l,h,y,_,c;function p(){var t=null!==i&&i.apply(this,arguments)||this;return t._nowNum=0,t._allNum=0,t}o=t.talisman||(t.talisman={}),e=laya.events.Event,a=t.bag.BagModel,n=t.common.CustomClip,s=t.common.CustomList,g=t.config.TalismanCfg,r=t.notice.SystemNoticeManager,l=t.guide.GuideModel,h=t.common.CommonUtil,y=t.config.AttrItemCfg,_=t.common.AttrUtil,i=ui.TalismanAlertUI,__extends(p,i),p.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this._upClip=this.destroyElement(this._upClip),i.prototype.destroy.call(this)},p.prototype.initialize=function(){i.prototype.initialize.call(this),this._showIds=new Array,this._showIds1=new Array,this.normalheight=803,this.fullheight=700,this._upClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._upClip),this._upClip.pos(this.upBtn.x-5,this.upBtn.y-9,!0),this._list=new s,this._list.width=512,this._list.height=100,this._list.hCount=1,this._list.spaceY=6,this._list.itemRender=o.ItemText,this._list.x=83,this._list.y=226,this.addChild(this._list),this._list1=new s,this._list1.width=512,this._list1.height=270,this._list1.hCount=1,this._list1.spaceY=6,this._list1.itemRender=o.ItemText,this._list1.x=83,this._list1.y=381,this.addChild(this._list1)},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateAddItem()},p.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.itemId=t,o.TalismanModel.instance._itemId=t,this.cfg=h.getItemCfgById(this.itemId);var e=h.getItemQualityById(this.itemId);if(5<e&&(e=5),!this.cfg)throw new Error("不存在的道具ID："+this.itemId);this.talismanBg.skin="common/dt_tongyong_"+e+".png",this.talismanIcon.skin=h.getIconById(this.itemId),this.updateAddItem()},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.upBtn.on(e.CLICK,this,this.upBtnHandler),GlobalData.dispatcher.on("UPDATE_AMULET_INFO_REPLAY",this,this.updateAddItemCh),this.onAutoClick(this.getTalisman,this,this.getTalismanHandler),l.instance.registeUI(10,this.upBtn),l.instance.registeUI(11,this.closeBtn)},p.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.upBtn.off(e.CLICK,this,this.upBtnHandler),GlobalData.dispatcher.off("UPDATE_AMULET_INFO_REPLAY",this,this.updateAddItemCh),l.instance.removeUI(10),l.instance.removeUI(11)},p.prototype.updateAddItemCh=function(){this.updateAddItem()&&this.close()},p.prototype.updateAddItem=function(){var t=!1;this.rise=o.TalismanModel.instance.getAmuletRise(),this.refine=o.TalismanModel.instance.getAmuletRefine();var e=o.TalismanModel.instance.GetAmuletById(this.itemId);this.level=null!=e?e[1]:0,0<this.level?this.upBtn.label="升级":this.upBtn.label="激活",this.fullChange(!1),this.talismaLevel.text=this.cfg[1]+"  Lv."+this.level;var i=g.instance.getCfgByIdLevel(this.itemId,this.level),n=i[3][1],s=a.instance.getItemCountById(this.itemId)+a.instance.getItemCountById(i[4]);return null!=n?(this.upBtn.visible=!0,this.nowExp.text=s.toString()+"/"+n,1<=s/n?(this.expPro.width=212,this.clipStop(!0)):(this.expPro.width=s/n*212,this.clipStop(!1),t=!0)):(this.nowExp.text="已满级",this.expPro.width=212,this.fullChange(!0),this.clipStop(!1),t=!0),this.setNormalAttrs(),this.setRiseAttrs(this.level),this._nowNum=n,this._allNum=s,t},p.prototype.fullChange=function(t){1==t?(this.upBtn.visible=!1,this.getTalisman.visible=!1,this.bg.height=this.fullheight,this.arrowImg.visible=!1,this.height=this.fullheight):(this.upBtn.visible=!0,this.getTalisman.visible=!0,this.bg.height=this.normalheight,this.arrowImg.visible=!0,this.height=this.normalheight)},p.prototype.clipStop=function(t){0!=t?n.thisPlay(this._upClip):n.thisStop(this._upClip)},p.prototype.setNormalAttrs=function(){this._showIds.length=0;for(var t,e=g.instance.getCfgByIdLevel(this.itemId,this.level),i=g.instance.getCfgByIdLevel(this.itemId,this.level+1),n=e[7],s=i?i[7]:null,o=s||n,a=0,r=.5*o.length;a<r;a++){var l=y.instance.getCfgById(o[2*a]),h=n[2*a+1]||0,c=l[1],p=void l[2];p=i?[c+" "+h,c+""+(s[2*a+1]||0),"#00ad35"]:[c+" "+h,"","#00ad35"],this._showIds.push(p)}t=i?["修为值 "+e[5],"修为值 "+i[5],"#00ad35"]:["修为值 "+e[5],"","#00ad35"],this._showIds.push(t),this._list.datas=this._showIds},p.prototype.setRiseAttrs=function(t){for(var e=this._showIds1.length=0;e<g.instance.getMaxLvById(this.itemId);e++)for(var i=g.instance.getCfgByIdLevel(this.itemId,e),n=g.instance.getCfgByIdLevel(this.itemId,e+1),s=i[8],o=n[8],a=0,r=.5*o.length;a<r;a++){var l=s[2*_.getAttrIndexByType(o[2*a],s)+1]||0,h=o[2*a+1],c=y.instance.getCfgById(o[2*a]);if(0<h-l){var p=c[2]?_.formatFloatNum(h)+"%":Math.round(h)+"",u=n[2],d="",m="";m=t<u?(d=u+"级激活","#ab2800"):(d="已激活","#00ad35");var f=[c[1]+" "+p,d,m];this._showIds1.push(f)}}this._list1.datas=this._showIds1},p.prototype.upBtnHandler=function(){this._nowNum>this._allNum?r.instance.addNotice("法宝数量不足",!0):Channel.instance.publish(2097653,[this.itemId])},p.prototype.getTalismanHandler=function(){WindowManager.instance.openByActionId(91),this.close()},c=p,o.TalismanAlert=c}(modules=modules||{}),function(t){var s,e,i,o,n,a,r,l,h,c;function p(){return e.call(this)||this}s=t.dungeon||(t.dungeon={}),i=ui.DungeonRBViewUI,o=t.player.PlayerModel,n=t.scene.SceneModel,a=t.config.SceneCfg,r=t.config.SceneMultiBossCfg,l=t.bag.BaseItem,h=t.common.CommonUtil,e=i,__extends(p,e),p.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=240,this._nameTxts=[this.nameTxt1,this.nameTxt2,this.nameTxt3,this.nameTxt4,this.nameTxt5],this._damageTxts=[this.damageTxt1,this.damageTxt2,this.damageTxt3,this.damageTxt4,this.damageTxt5],this.layer=3,this.closeByOthers=!1},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.expandBtn,this,this.expandHandler),this.onAutoClick(this.inspireBtn,this,this.inspireHandler),this.onAutoGlobalEvt("DUNGEON_BOSS_RANKS_UPDATE",this,this.updateRank),this.onAutoGlobalEvt("DUNGEON_INSPIRE_UPDATE",this,this.updateInspire)},p.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.isExpand=!0,this.updateRank(),this.updateInspire(),this.updateAward()},p.prototype.updateAward=function(){var t=n.instance.enterScene,e=t[0];if(4===a.instance.getCfgById(e)[7]){this._bagItem=this._bagItem||new l,this.addChild(this._bagItem),this._bagItem.pos(356,162,!0);var i=r.instance.getCfgByLv(t[3])[7];this._bagItem.dataSource=[i[0],i[1],0,null]}},p.prototype.expandHandler=function(){this.isExpand=!this._isExpand},p.prototype.inspireHandler=function(){WindowManager.instance.openDialog(51)},Object.defineProperty(p.prototype,"isExpand",{set:function(t){this._isExpand=t,this._isExpand?(this.line3.visible=this.line4.visible=this.line5.visible=this.line6.visible=!0,this.nameTxt2.visible=this.nameTxt3.visible=this.nameTxt4.visible=this.nameTxt5.visible=!0,this.damageTxt2.visible=this.damageTxt3.visible=this.damageTxt4.visible=this.damageTxt5.visible=!0,this.bgImg.y=54,this.bgImg.height=268,this.expandBtn.skin="common/btn_tonyong_28.png"):(this.line3.visible=this.line4.visible=this.line5.visible=this.line6.visible=!1,this.nameTxt2.visible=this.nameTxt3.visible=this.nameTxt4.visible=this.nameTxt5.visible=!1,this.damageTxt2.visible=this.damageTxt3.visible=this.damageTxt4.visible=this.damageTxt5.visible=!1,this.bgImg.y=186,this.bgImg.height=136,this.expandBtn.skin="common/btn_tonyong_29.png"),this.damageTxt.y=this.bgImg.y+16,this.expandBtn.y=this.bgImg.y+18,this.line1.y=this.bgImg.y+45,this.line2.y=this.bgImg.y+80,this.nameTxt1.y=this.damageTxt1.y=this.bgImg.y+55},enumerable:!0,configurable:!0}),p.prototype.updateRank=function(){var t=s.DungeonModel.instance.ranks;if(!t){for(var e=0,i=this._nameTxts.length;e<i;e++)this._damageTxts[e].text="",this._nameTxts[e].text=this._damageTxts[e].text="";return this.damageTxt6.text="",void(this.ownerNameTxt.text="")}for(e=0,i=this._nameTxts.length;e<i;e++)t.length>e&&t[e]&&t[e][0]?(this._nameTxts[e].text=t[e][0][2]+"."+t[e][0][1],this._damageTxts[e].text=h.bigNumToString(t[e][1]),t[e][0][0]===o.instance.actorId?(this._nameTxts[e].color="#50ff28",this._damageTxts[e].color="#50ff28"):(this._nameTxts[e].color="#FFFFFF",this._damageTxts[e].color="#FFFFFF")):this._nameTxts[e].text=this._damageTxts[e].text="";var n=!1;for(e=0,i=t.length;e<i;e++)if(t[e]&&t[e][0]&&t[e][0][0]===o.instance.actorId){this.damageTxt6.text=h.bigNumToString(t[e][1]),n=!0;break}n||(this.damageTxt6.text="0"),0<t.length&&t[0]&&t[0][0]?this.ownerNameTxt.text=t[0][0][1]:this.ownerNameTxt.text=""},p.prototype.updateInspire=function(){if(s.DungeonModel.instance.inspires){for(var t=s.DungeonModel.instance.inspires,e=0,i=0,n=t.length;i<n;i++)e+=t[i][2];this.damagePerTxt.text="攻击+"+(100*e).toFixed(0)+"%"}},c=p,s.DungeonRBPanel=c}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.dungeon||(t.dungeon={}),n=ui.MvpAwardAlertUI,s=t.bag.BaseItem,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._bagItem=new s,this.addChild(this._bagItem),this._bagItem.pos(282,266,!0),this.zOrder=10},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t);var e=t;this._bagItem.dataSource=e[0]},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=3e3,this.loopHandler()},a.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},o=a,e.MvpAwardAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.dungeon||(t.dungeon={}),n=ui.LastHitAwardAlertUI,s=t.bag.BaseItem,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._bagItem=new s,this.addChild(this._bagItem),this._bagItem.pos(282,266,!0),this._bagItem.nameVisible=!1,this.zOrder=11},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t);var e=t;this._bagItem.dataSource=e[0]},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=3e3,this.loopHandler()},a.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},o=a,e.LastHitAwardAlert=o}(modules=modules||{}),function(o){var a,s,t,r,l,e,i,n;function h(){return s.call(this)||this}a=o.dungeon||(o.dungeon={}),t=ui.InspireAlertUI,r=o.common.BtnGroup,l=o.config.BlendCfg,e=o.player.PlayerModel,i=o.common.CommonUtil,s=t,__extends(h,s),h.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),s.prototype.destroy.call(this)},h.prototype.initialize=function(){s.prototype.initialize.call(this),this._btnGroup=new r,this._btnGroup.setBtns(this.coinBtn,this.ingotBtn);var t=l.instance.getCfgById(10304)[1],e=l.instance.getCfgById(10305)[1];this.coinTxt.text=t[0]+"/次",this.ingotTxt.text=e[0]+"/次";var i=t[2];i+=e[2];var n=Math.floor(100*t[1]);this.decTxt.text="每次鼓舞增加角色"+n+"%攻击 (上限"+n*i+"%)"},h.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.inspireBtn,this,this.inspireHandler),this.onAutoGlobalEvt("DUNGEON_INSPIRE_UPDATE",this,this.inspireUpdate)},h.prototype.onOpened=function(){s.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this.inspireUpdate(!0)},h.prototype.inspireHandler=function(){if(0===this._btnGroup.selectedIndex){if(e.instance.copper<l.instance.getCfgById(10304)[1][0])return void i.noticeError(12106)}else{if(1!==this._btnGroup.selectedIndex)return;if(e.instance.ingot<l.instance.getCfgById(10305)[1][0])return void i.noticeError(12107)}a.DungeonCtrl.instance.reqInspire(this._btnGroup.selectedIndex+1)},h.prototype.inspireUpdate=function(t){void 0===t&&(t=!1);var e=a.DungeonModel.instance.inspires;if(e){for(var i=0,n=0,s=e.length;n<s;n++)i+=e[n][2];this.curInspireTxt.text="当前鼓舞：攻击+"+(100*i).toFixed(0)+"%",t||o.notice.SystemNoticeManager.instance.addNotice("鼓舞成功，角色增加"+(100*i).toFixed(0)+"%攻击")}},n=h,a.InspireAlert=n}(modules=modules||{}),function(e){var t,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=e.talisman||(e.talisman={}),i=ui.TalismanGetAlertUI,__extends(s,i),s.prototype.offEvt=function(){Laya.timer.clear(this,this.close),i.prototype.offEvt.call(this)},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.talismanId=t,this.showInfo(),Laya.timer.loop(1500,this,this.close)},s.prototype.initialize=function(){i.prototype.initialize.call(this),this.clickCD=!0},s.prototype.showInfo=function(){var t=e.common.CommonUtil.getItemCfgById(this.talismanId);this.talismanImg.skin=CommonUtil.getIconById(this.talismanId),this.talismanName.text=t[1].toString()},n=s,t.TalismanGetAlert=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.talisman||(t.talisman={}),n=t.config.TalismanCfg,s=t.common.CustomClip,i=ui.TalismanUpAlertUI,__extends(a,i),a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.talismanLevel=t,this.showInfo(),this.upClip.play()},a.prototype.destroy=function(){this.upClip&&(this.upClip.removeSelf(),this.upClip.destroy(),this.upClip=null),i.prototype.destroy.call(this)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this.upClip=new s,this.addChildAt(this.superMan,2),this.addChildAt(this.upClip,2),this.upClip.pos(136,-90,!0),this.upClip.scale(2,2),this.upClip.skin="assets/effect/state.atlas",this.upClip.frameUrls=["state/0.png","state/1.png","state/2.png","state/3.png","state/4.png","state/5.png","state/6.png","state/7.png"],this.upClip.durationFrame=5,this.upClip.play(),this.upClip.visible=!0,this.clickCD=!0},a.prototype.showInfo=function(){var t=n.instance.getRiseCfgByLevel(this.talismanLevel);this.levelImg.skin="assets/icon/ui/amulet/"+this.talismanLevel+".png",this.magicUpLimit.text=t[2].toString(),this.magicUpAttack.text="+"+(100*t[3]).toFixed()+"%"},a.prototype.close=function(){i.prototype.close.call(this),this.upClip.stop()},o=a,e.TalismanUpAlert=o}(modules=modules||{}),function(t){var s,o,e,i,n;function a(){return o.call(this)||this}s=t.bag||(t.bag={}),e=ui.SmeltSuccessAlertUI,i=t.guide.GuideModel,o=e,__extends(a,o),a.prototype.onEvt=function(){o.prototype.onEvt.call(this),i.instance.registeUI(38,this.closeBtn)},a.prototype.offEvt=function(){o.prototype.offEvt.call(this),i.instance.removeUI(38)},a.prototype.setOpenParam=function(t){if(o.prototype.setOpenParam.call(this,t),t){this._propItem=new Array,this._items=t[0],this.titleTxt.text=t[1];for(var e=this._items.length,i=.5*(550-(100*e+20*(e-1))),n=0;n<e;n++)this._propItem[n]=new s.BaseItem,this.addChild(this._propItem[n]),this._propItem[n].pos(58+i+120*n,176,!0),this._propItem[n].dataSource=this._items[n]}},a.prototype.onClosed=function(){if(o.prototype.onClosed.call(this),this._propItem)for(var t=0;t<this._propItem.length;t++)this.removeChild(this._propItem[t]);this._items.length=0},a.prototype.destroy=function(){this._propItem=this.destroyElement(this._propItem),o.prototype.destroy.call(this)},n=a,s.SmeltSuccessAlert=n}(modules=modules||{}),function(u){var h,e,s,o,d,t,m,a,r,i;function n(){var t=e.call(this)||this;return t._items=new Array,t._itemType=new Array,t._partArr=new Array,t._delayedItems=[],t._partDiv={},t}h=u.quickUse||(u.quickUse={}),s=Laya.Handler,o=u.bag.BagModel,d=u.common.CommonUtil,t=u.core.BaseCtrl,m=u.player.PlayerModel,a=utils.tween.TweenJS,r=u.config.BlendCfg,e=t,__extends(n,e),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setup=function(){this.onGlobal("BAG_ADD_ITEM",this.addItemHandler),this.onGlobal("BAG_REMOVE_ITEM",this.removeItemHandler)},n.prototype.addItemHandler=function(t,e,i){void 0===i&&(i=!1),60==e&&!i||135==e&&!i?this._delayedItems.push([t,e]):o.instance.getItemByBagIdUid(4,t[2])||o.instance.getItemByBagIdUid(6,t[2])||this.addItem(t)},n.prototype.removeItemHandler=function(t){if(t){for(var e=-1,i=-1,n=0,s=this._items.length;n<s;n++)if(this._items[n][2]===t){i=this._items[n][1],e=n;break}var o=e===this._items.length-1;0<=e&&0===i&&(this._items.splice(e,1),this._itemType.splice(e,1)),o&&this.check()}},n.prototype.addItem=function(t){if(t){var e=d.getBagIdById(t[2]);if(4!=e&&6!=e){var i=t[0],n=d.getItemTypeById(i);if(5===n){if(!this.compareEquip(t,this._partArr))return}else if(2===n||3===n){var s=d.getItemCfgById(t[0]);if(!s[5]||m.instance.level<s[2])return;for(var o=-1,a=0,r=this._items.length;a<r;a++)if(this._items[a][2]===t[2]){o=a;break}if(0<=o)return void(o===this._items.length-1&&this.check())}else if(1===n){if(!h.QuickUseHuanHuaModel.instance.screeningHuanHua(t)[0])return;for(o=-1,a=0,r=this._items.length;a<r;a++)if(this._items[a][0]===t[0]){o=a;break}if(0<=o)return void(o===this._items.length-1&&this.check())}else{if(8!==n)return;var l=i/1e5>>0;if(u.divinatory_card.DivinatoryUtil.isDivinatoryEquip(i)){if(l=u.divinatory_card.DivinatoryUtil.getType(i),!u.divinatory_card.DivinatoryCardModel.instance.getState(l))return}else if(u.showEquip.ShowEquipModel.instance.isShowEquip(i)){if(!u.showEquip.ShowEquipModel.instance.isShowEquipOpenByItemId(i))return}else if(u.brahma_equip.BrahmaEquipUtlis.isBrahmaEquip(i)){if(!u.brahma_equip.BrahmaEquipModel.instance.isUpMyEquip(i))return}else{if((l=u.yuanShen.YuanShenUtil.getTypeById(i))<=0)return;if(0===u.yuanShen.YuanShenModel.instance.getInfoById(l)[3])return}if(!this.compareEquip(t,null,this._partDiv))return}this._items.push(t),this._itemType.push(1),this.check()}}},n.prototype.compareEquip=function(t,e,i){void 0===i&&(i=null);var n=t[0],s=d.getItemTypeById(n),o=n/1e5>>0;8===s&&(s=o);var a=830==o?u.brahma_equip.BrahmaEquipUtlis.getPartById(n):d.getPartById(n);if(i&&(i[s]||(i[s]=[]),e=i[s]),e[a]){var r=!1,l=void 0;if(830==o){var h=t[3]&&t[3][6]||0;l=(e[a][3]&&e[a][3][6]||0)<h}else l=t[3][6]>e[a][3][6];if(l){var c=d.getItemCfgById(n);c[3]<=m.instance.eraLevel&&m.instance.level>=c[4]&&(r=!0)}if(!r)return!1;var p=this._items.indexOf(e[a]);-1!==p&&(this._items.splice(p,1),this._itemType.splice(p,1))}return!!d.checkEquip(t)&&(e[a]=t,!0)},n.prototype.addShenQiItem=function(t){for(var e=t,i=-1,n=0,s=this._items.length;n<s;n++)if(this._items[n][0]===e){i=n;break}0<=i?i===this._items.length-1&&this.check():(this._items.push([e,1,0,null]),this._itemType.push(2),this.check())},n.prototype.removeShenQiItemHandler=function(t){if(t){for(var e=-1,i=-1,n=0,s=this._items.length;n<s;n++)if(this._items[n][0]===t){i=this._items[n][1],e=n;break}var o=e===this._items.length-1;0<=e&&0===i&&(this._items.splice(e,1),this._itemType.splice(e,1)),o&&(this.popItem(),this.check())}},n.prototype.removeShenQiItem=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t]&&this._itemType[t]&&2==this._itemType[t]&&(this._items&&this._items.splice(t,1),this._items&&this._itemType.splice(t,1),this.removeShenQiItem())},n.prototype.useOne=function(){this._panel&&(this._panel.parent&&this._panel.close(),this.popItem(),this.check())},n.prototype.popItem=function(){this._items.pop(),this._itemType.pop()},n.prototype.check=function(){var t=this;if(0!==this._items.length){var e=this._items[this._items.length-1];if(1==this._itemType[this._items.length-1]){if(!o.instance.getItemByIdUid(e[0],e[2]))return this.popItem(),void this.check();if(5===d.getItemTypeById(e[0])){var i=r.instance.getCfgById(10009),n=1;if(i&&(n=i[1][0]),!(m.instance.level>=n))return;d.checkEquip(e)||(this.popItem(),this.check())}}this._panel&&this._panel.parent?this._panel.setItem(e):this._panel?(this._panel.setItem(e),LayerManager.instance.addToNoticeLayer(this._panel),this._panel.bottom=-304,a.create(this._panel).to({bottom:200},150).start()):Laya.loader.load("res/atlas/quick_use.atlas",s.create(this,function(){t._panel=t._panel||new h.QuickUsePanel,t._panel.setItem(e),LayerManager.instance.addToNoticeLayer(t._panel),t._panel.bottom=-304,a.create(t._panel).to({bottom:200},150).start()}))}else this._panel&&this._panel.parent&&this._panel.close()},n.prototype.delayedPutInBag=function(){for(var t=0,e=this._delayedItems.length;t<e;t++){var i=this._delayedItems[t][0],n=this._delayedItems[t][1];this.addItemHandler(i,n,!0)}this._delayedItems.length=0},n.prototype.delayedButNoPutInBag=function(){this._delayedItems.length=0},i=n,h.QuickUseCtrl=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.main||(t.main={}),n=t.core.BaseCtrl,s=t.config.SceneCfg,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){},a.prototype.enterScene=function(t){0===s.instance.getCfgById(t)[7]?(e.LeftBottomModel.instance.hideBox=!1,WindowManager.instance.open(1),WindowManager.instance.open(6),WindowManager.instance.open(2),WindowManager.instance.open(3),WindowManager.instance.open(4),WindowManager.instance.open(5)):(e.LeftBottomModel.instance.hideBox=!0,WindowManager.instance.open(3),WindowManager.instance.open(1),WindowManager.instance.open(2),WindowManager.instance.open(4),WindowManager.instance.close(5),WindowManager.instance.close(6))},o=a,e.MainCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.single_boss||(t.single_boss={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16778417,this.GetSingleBoss),this.subscribe(16778418,this.UpdateSingleBossCopy),this.publish(2097955,null)},o.prototype.GetSingleBoss=function(t){e.SingleBossModel.instance.SingleBossCopy=t[0]},o.prototype.UpdateSingleBossCopy=function(t){e.SingleBossModel.instance.UpdateSingleBossCopy=t[0]},s=o,e.SingleBossCtrl=s}(modules=modules||{}),function(t){var i,e,n,s;function o(){return e.call(this)||this}i=t.talisman||(t.talisman={}),n=t.core.BaseCtrl,e=n,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16777916,this.GetAmuletInfoReply),this.subscribe(16777917,this.UpdateAmuletInfo),this.subscribe(16777918,this.RefineAmuletReply),this.onGlobal("BAG_UPDATE",this.updateBag),this.onGlobal("BAG_DATA_GOT",this.updateBag),this.publish(2097652,null)},o.prototype.GetAmuletInfoReply=function(t){i.TalismanModel.instance.GetAmuletInfoReply=t},o.prototype.UpdateAmuletInfo=function(t){i.TalismanModel.instance.UpdateAmuletInfoReply=t},o.prototype.RefineAmuletReply=function(t){var e=t[0];i.TalismanModel.instance.RefineAmuletReplay=t,12003==e&&WindowManager.instance.close(47)},o.prototype.updateBag=function(){i.TalismanModel.instance.setDotDis()},s=o,i.TalismanCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.multiBoss||(t.multiBoss={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){},s=o,e.MultiBossCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.intensive||(t.intensive={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.common.CommonUtil,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16778716,this.infoReply),this.subscribe(16778717,this.infoReply),this.subscribe(16778718,this.upGradeReply),this.subscribe(16778719,this.oneKeyUpGradeReply),this.subscribe(16778720,this.masterReply),this.onGlobal("BAG_UPDATE",this.updateBag),this.onGlobal("BAG_DATA_GOT",this.updateBag),this.onGlobal("PLAYER_UPDATE_MONEY",this.updateMoney),this.onGlobal("PLAYER_WEAR_EQUIPS",this.updateEquip),this.onGlobal("PLAYER_EQUIPS_INITED",this.updateEquip),this.publish(2098352,null)},r.prototype.infoReply=function(t){e.IntensiveModel.instance.updateInfo(t)},r.prototype.upGrade=function(t){this.publish(2098353,[t])},r.prototype.upGradeReply=function(t){0==t[0]?(s.instance.addNotice("强化成功"),GlobalData.dispatcher.event("INTENSIVE_SUCCESS",0),e.IntensiveModel.instance.setDotDis()):o.noticeError(t[0])},r.prototype.oneKeyUpGrade=function(){this.publish(2098354,null)},r.prototype.oneKeyUpGradeReply=function(t){0==t[0]?(s.instance.addNotice("强化成功"),e.IntensiveModel.instance.setDotDis(),GlobalData.dispatcher.event("INTENSIVE_SUCCESS",[t[1]])):o.noticeError(t[0])},r.prototype.masterReply=function(t){0==t[0]?(s.instance.addNotice("升阶成功"),e.IntensiveModel.instance.setDotDis(),GlobalData.dispatcher.event("UPGRADE_SUCCESS")):o.noticeError(t[0])},r.prototype.updateBag=function(){e.IntensiveModel.instance.setDotDis()},r.prototype.updateMoney=function(){e.IntensiveModel.instance.setDotDis()},r.prototype.updateEquip=function(){e.IntensiveModel.instance.setDotDis()},a=r,e.IntensiveCtrl=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.compose||(t.compose={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16778816,this.GetComposeReply),this.subscribe(16792127,this.GetStarFastComposeReply),this.subscribe(16778817,this.GetResolveReply),this.onGlobal("BAG_DATA_GOT",e.ComposeModel.instance.setDotDic),this.onGlobal("BAG_UPDATE",e.ComposeModel.instance.setDotDic),e.ComposeModel.instance.setDotDic()},o.prototype.GetComposeReply=function(t){e.ComposeModel.instance.ComposeReply=t,console.log("---------------合成返回"+t)},o.prototype.GetStarFastComposeReply=function(t){console.log("哈哈哈哈哈",t),e.ComposeModel.instance.ComposeReply=t,console.log("---------------一键合成返回"+t)},o.prototype.GetResolveReply=function(t){e.ComposeModel.instance.ResolveReply=t,console.log("---------------分解返回"+t)},s=o,e.ComposeCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.threeWorlds||(t.threeWorlds={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16778428,this.getBossRankRecordReply)},o.prototype.getBossRankRecord=function(t){this.publish(7340234,[t])},o.prototype.getBossRankRecordReply=function(t){e.ThreeWorldsModel.instance.bossRankRecord=t},s=o,e.ThreeWorldsCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.buff||(t.buff={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16777348,this.updateBuffList)},o.prototype.updateBuffList=function(t){e.BuffModel.instance.updateBuffList(t)},s=o,e.BuffCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c;function p(t,e){var i=n.call(this,t)||this;return i.sprite=new l,i._cameraPos=new a(0,0,0),i._camera=new o(0,0,16777215),i._transform=i.sprite.transform,i.sprite.addChild(i._camera),i.initCamera(e),i._args1={x:0,y:0},i._args2={x:0,y:0},i}e=t.world||(t.world={}),i=e.component||(e.component={}),s=base.ecs.EntityComponent,o=Laya.Camera,a=Laya.Vector3,r=Laya.Vector4,l=Laya.Sprite3D,h=utils.MathUtils,n=s,__extends(p,n),p.prototype.setup=function(){this._layer=this.owner.getComponent(i.LayerComponent).mapLayer,this._hud=this.owner.getComponent(i.HUDComponent).hudLayer,this.owner.on("stageResize",this,this.stageResize).on("shakeCamera",this,this.shakeCamera).on("follow",this,this.follow)},p.prototype.teardown=function(){this.owner.off("stageResize",this,this.stageResize).off("shakeCamera",this,this.shakeCamera).off("follow",this,this.follow)},p.prototype.destory=function(){},p.prototype.update=function(){if(this._target){var t=this._targetTransform.localPosition;this.updatePosition(t.x,t.y+200,Laya.timer.delta/1e3,this._target.speed||100)}},p.prototype.stageResize=function(t,e){this._camera.orthographicVerticalSize=e},p.prototype.initCamera=function(t){var e=this._camera;e.clearColor=new r(0,0,0,1),e.orthographic=!0,e.orthographicVerticalSize=t,e.transform.position=new a(0,0,0),e.useOcclusionCulling=!1,e.removeAllLayers(),e.addLayer(Laya.Layer.getLayerByNumber(0))},p.prototype.follow=function(t,e,i){if(this._target=t,this._fixedPos=i,t&&(null!=this._cameraTween&&this._cameraTween.stop(),this._targetTransform=t.property.get("transform"),!e)){var n=this._targetTransform.localPosition;this.updatePosition(n.x,n.y+200,Number.POSITIVE_INFINITY,t.speed||100)}},p.prototype.updatePosition=function(t,e,i,n){var s=this._transform.position;n=n<100?100:n;var o=t-s.x,a=e-s.y;i=n*i/Math.sqrt(o*o+a*a),t=h.lerp(s.x,t,i),e=h.lerp(s.y,e,i),this._fixedPos&&(t=this._fixedPos[0]||t,e=this._fixedPos[1]||e),this._layer.update(t,e),s=this._transform.position,this._hud.x=-(s.x-Laya.stage.width/2),this._hud.y=s.y+Laya.stage.height/2},p.prototype.shakeCamera=function(t,e){var i=this;if(null==this._cameraTween||!this._cameraTween.isPlaying){if(null==this._cameraTween){var n=this._camera.transform,s=function(){n.localPosition=i._cameraPos},o=function(){i._cameraPos.reset(0,0,0),i._args1.x=14,i._args1.y=14,i._args2.x=14,i._args2.y=14,n.localPosition=i._cameraPos};o(),this._cameraTween=TweenJS.create(this._cameraPos).repeat(1).yoyo(!0).to(this._args1,30).onUpdate(s).combine(!0).chain(TweenJS.create(this._cameraPos).repeat(1).yoyo(!0).to(this._args2,30).onUpdate(s).combine(!0)).onStop(o).onComplete(o)}this._cameraTween.delay(e).start()}},c=p,i.CameraComponent=c}(game=game||{}),function(t){var e,i,n;function s(t){this._offsetX=this._offsetY=0,this._tileWidth=this._tileHeight=0,this._cols=this._rows=0,this._force=!0,this._viewport=new i,this._outerArea=new i,this._innerArea=new i,this._area=new i,this._negativeY=t}e=t.misc||(t.misc={}),i=Laya.Rectangle,Object.defineProperty(s.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"viewport",{get:function(){return this._viewport},set:function(t){this._viewport.copyFrom(t),this.updateInnerArea()},enumerable:!0,configurable:!0}),s.prototype.reset=function(t,e,i,n,s,o){this._width=i,this._height=n,this._tileWidth=s,this._tileHeight=o,this._outerArea.setTo(t,e,i,n),this._cols=i/s,this._rows=n/o,this.updateInnerArea()},s.prototype.updateInnerArea=function(){var t=this._viewport.width,e=this._viewport.height;this._innerArea.setTo(this._outerArea.x+(t>>1),this._outerArea.y+(e>>1),this._outerArea.width-t,this._outerArea.height-e),this._force=!0},s.prototype.updateOffset=function(t,e){this._negativeY&&(e=-e),t<this._innerArea.x?t=this._innerArea.x:t>this._innerArea.right&&(t=this._innerArea.right),e<this._innerArea.y?e=this._innerArea.y:e>this._innerArea.bottom&&(e=this._innerArea.bottom),e|=0,(t|=0)==this._offsetX&&e==this._offsetY||(this._force=!0,this._offsetX=t,this._offsetY=e)},s.prototype.updateViewArea=function(){this._force=!1;var t=this._viewport.width>>1,e=this._viewport.height>>1,i=this._tileWidth,n=this._tileHeight,s=(this._offsetX-t)/i|0,o=(this._offsetX+t+i-1)/i|0,a=(this._offsetY-e)/n|0,r=(this._offsetY+e+n-1)/n|0;this._area.setTo(s,a,o-s,r-a)},Object.defineProperty(s.prototype,"force",{get:function(){return this._force},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"viewArea",{get:function(){return this._force&&this.updateViewArea(),this._area},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"offsetX",{get:function(){return this._offsetX},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"offsetY",{get:function(){return this._negativeY?-this._offsetY:this._offsetY},enumerable:!0,configurable:!0}),n=s,e.ViewBounds=n}(game=game||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("map_path")},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.MapPathCfg=i}(modules=modules||{}),function(t){var e,f,g,o,i,n;function _(){}e=t.map||(t.map={}),f=Laya.Point,g=modules.config.MapPathCfg,o=utils.ArrayUtils,i=utils.collections.AStar,_.init=function(t){_.configs=t},_.setData=function(t,e,i,n,s){_.currentID=t;var o=g.instance.getCfgById(t.toString());_.pathIds=o?o[1]:[],_.mapData=new Uint8Array(e,i+_.offset);var a=new DataView(e,i),r=0;_.mapWidth=n,_.mapHeight=s,_.cellWidth=a.getUint8(r++),_.cellHeight=a.getUint8(r++),_.cellHalfWidth=_.cellWidth>>1,_.cellHalfHeight=_.cellHeight>>1,_.cols=_.mapWidth/_.cellWidth,_.rows=_.mapHeight/_.cellHeight,_.navigator.reset(_.mapData,_.mapWidth,_.mapHeight,_.cellWidth,_.cellHeight,null),r=_.offset+_.rows*_.cols;for(var l=a.getUint8(r++),h=0;h<l;++h){a.getUint8(r++);for(var c=a.getUint8(r++),p=0;p<c;++p)a.getUint32(r,!0),r+=4}this.pathNodes=[];var u=a.getUint8(r++);for(h=0;h<u;++h){var d=a.getUint8(r++);for(c=a.getUint8(r++),p=0;p<c;++p){var m=a.getUint32(r,!0);r+=4,this.pathNodes[d]=new f(m%_.cols,Math.floor(m/_.cols))}}},_.checkPos=function(t){return 0<=t.x&&t.x<_.cols&&0<=t.y&&t.y<_.rows},_.nearbyPathNode=function(t){for(var e=Number.POSITIVE_INFINITY,i=[-1,new f],n=0,s=_.pathNodes.length;n<s;++n){var o=_.pathNodes[n];if(null!=o){var a=_.calcDistance(o,t);a<e&&(e=a,i[0]=n,i[1].x=o.x,i[1].y=o.y)}}return i},_.nearbyPathIdNode=function(t){for(var e=Number.POSITIVE_INFINITY,i=_.pathNodes,n=[-1,new f],s=0,o=_.pathIds;s<o.length;s++){var a=o[s],r=i[a[0]],l=_.calcDistance(r,t);l<e&&(e=l,n[0]=a[0],n[1].x=r.x,n[1].y=r.y)}return n},_.findNextPathNode=function(t){if(-1!=t)for(var e=0,i=_.pathIds;e<i.length;e++){var n=i[e];if(n[0]==t){t=o.random(n,1);var s=_.pathNodes[t];return[t,new f(s.x,s.y)]}}return null},_.findNodePath=function(t){if(-1!=t)for(var e=0,i=_.pathIds;e<i.length;e++){var n=i[e];if(n[0]==t)return n}return null},_.getPathNode=function(t){return _.pathNodes[t]},_.findPath=function(t,e,i,n,s,o,a){return void 0===n&&(n=5),void 0===s&&(s=0),void 0===o&&(o=null),void 0===a&&(a=!0),_.getPosition(t,e,f.TEMP),_.checkPos(f.TEMP)&&_.checkPos(i)?(_.navigator.find(f.TEMP.x,f.TEMP.y,i.x,i.y,n,s,o),a?_.smoothPathEx(t,e,o):o):null},_.smoothPathEx=function(t,e,i){return _.calPassedPoints(t,e,i),i},_.calPassedPoints=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=-1),i&&!(i.length<2)&&s!==n){-1===s&&(s=i.length);var o=i[n].x,a=i[n].y,r=!0,l=t/_.cellWidth>>0,h=e/_.cellHeight>>0;if(l===o)for(var c=h<a,p=h;(c?p<a:a<p)&&(_.isCanMove(l,p)||(r=!1),r);c?p++:p--);else if(h===a)for(c=l<o,p=l;(c?p<o:o<p)&&(_.isCanMove(p,h)||(r=!1),r);c?p++:p--);else{var u=((a=(a+.5)*_.cellHeight)-e)/((o=(o+.5)*_.cellWidth)-t),d=e-u*t,m=t<o,f=e<a;for(p=t+(m?1:-1)*_.cellWidth;(m?p<=o:o<=p)&&(_.isCanMove(g=p/_.cellWidth>>0,(u*g*_.cellWidth+d)/_.cellHeight>>0)||(r=!1),r);m?p+=_.cellWidth:p-=_.cellWidth);if(r)for(p=e+(f?1:-1)*_.cellHeight;f?p<=a:a<=p;f?p+=_.cellHeight:p-=_.cellHeight){var g;if(_.isCanMove(((g=p/_.cellHeight>>0)*_.cellHeight-d)/u/_.cellWidth>>0,g)||(r=!1),!r)break}}if(r){var y=i[n];i.splice(n+1,s-n-1),s=n,_.calPassedPoints((y.x+.5)*_.cellWidth,(y.y+.5)*_.cellHeight,i,0,s)}else++n==s-1?(y=i[--s],_.calPassedPoints((y.x+.5)*_.cellWidth,(y.y+.5)*_.cellHeight,i,0,s)):_.calPassedPoints(t,e,i,n,s)}},_.isOpaqueArea=function(t,e){return 0==(128&_.mapData[_.cols*e+t])},_.getAreaValue=function(t,e){return _.mapData[_.cols*e+t]},_.isCanMove=function(t,e,i,n){if(void 0===i&&(i=5),void 0===n&&(n=0),_.cols<=t||t<0)return!1;if(_.rows<=e||e<0)return!1;var s=_.mapData[_.cols*e+t];return(112&s)>>4<=i&&(15&s)<=n},_.realToScreen=function(t,e,i){return void 0===i&&(i=null),null==i&&(i=new f),i.setTo(t*_.scale-_.screenPos.x,-e*_.scale-_.screenPos.y),i},_.getScreenPosition=function(t,e,i){return void 0===i&&(i=null),null==i&&(i=new f),i.setTo((t*_.cellWidth+_.cellHalfWidth)*_.scale-_.screenPos.x,(e*_.cellHeight+_.cellHalfHeight)*_.scale-_.screenPos.y),i},_.screenToPosition=function(t,e,i){return void 0===i&&(i=null),null==i&&(i=new f),i.setTo(4294967295&((t+_.screenPos.x)/_.scale-_.cellHalfWidth)/_.cellWidth,4294967295&((e+_.screenPos.y)/_.scale-_.cellHalfHeight)/_.cellHeight),i},_.getRealPosition=function(t,e,i){return void 0===i&&(i=null),null==i&&(i=new f),i.setTo(t*_.cellWidth+_.cellHalfWidth,e*_.cellHeight+_.cellHalfHeight),i},_.getPosition=function(t,e,i){return void 0===i&&(i=null),null==i&&(i=new f),i.setTo(4294967295&t/_.cellWidth,4294967295&e/_.cellHeight),i},_.testPositionEquals=function(t,e,i,n){return(4294967295&t/_.cellWidth)==(4294967295&i/_.cellWidth)&&(4294967295&e/_.cellHeight)==(4294967295&n/_.cellHeight)},_.calcDistance=function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_.calcPathDistance=function(t){if(t.length<2)return 0;for(var e=0,i=t[0],n=1,s=t.length;n<s;++n){var o=t[n],a=(o.x-i.x)*_.cellWidth+_.cellHalfWidth,r=(o.y-i.y)*_.cellHeight+_.cellHalfHeight;e+=Math.sqrt(a*a+r*r),i=o}return e},_.testDistance=function(t,e,i,n,s){var o=i-t,a=n-e;return o*o+a*a<=(s*=s)},_.direction=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},_.screenPos=new f,_.cameraPos=new f,_.offset=2,_.navigator=new i,_.scale=1,_.configs={},n=_,e.MapUtils=n}(game=game||{}),function(i){var l,m,x,c,B,n,t;function e(){}function s(t,e){var h=n.call(this)||this;return h.onConfigComplete=function(t,e,i){if(console.log("场景信息..................",t,h._tilePath),null==i)throw new Error("场景文件"+t+"不存在");h._small=m.load(h._tilePath+"small.jpg"),h._small._addReference();var n=new DataView(i),s=0;n.getInt16(s,!0);s+=2,h._width=n.getInt16(s,!0),s+=2,h._height=n.getInt16(s,!0),s+=2,h._splitWidth=n.getInt16(s,!0),s+=2,h._splitHeight=n.getInt16(s,!0),s+=2,h._rows=h._height/h._splitHeight,h._cols=h._width/h._splitWidth,h._single=!1;var o=new Uint8Array(i,s,h._rows*h._cols);s+=o.byteLength,h._flags=o,l.MapUtils.setData(h._mapId,i,s,h._width,h._height),h._single=1!=modules.config.MapPathCfg.instance.getCfgById(h._mapId.toString())[2],h._viewBounds.reset(0,0,h._width,h._height,h._splitWidth,h._splitHeight),h._viewArea.setTo(0,0,0,0),h._tileMesh.reset(h._splitWidth,h._splitHeight),h._checkCount=1,h._loadCount=0,h._backgroundBounds.reset(0,0,2048,1536,512,512),h._single&&h.clearLayerTiles(h._visualBackgroundBlocks),h.updateBackgroundArea();var a=ArrayUtils.random(modules.config.SceneCfg.instance.getCfgById(h._mapId)[4]),r=l.MapUtils.getRealPosition(a[0],a[1]);h.update(r.x,-r.y,!0),h._checkCount+=h._loadCount,h._totalCount=h._checkCount,h.checkComplete()},h.onTileComplete=function(t,e,i){var n=h._group[t];if(n){n.handle=e,c.instance.lock(e),n.texture=i;var s=n.index,o=s>>3,a=s%8,r=h._visualBlocks[o].meshRender.sharedMaterial;r.setTextureAt(1+a,i);var l=r.tilingOffset;l[4*a]=1,l[4*a+1]=1,l[4*a+2]=0,l[4*a+3]=0}},h._viewBounds=new i.misc.ViewBounds(!0),h._viewBounds.viewport=e,h._viewArea=new Laya.Rectangle,h._visualBlocks=new Array,h._backgroundBounds=new i.misc.ViewBounds(!0),h._backgroundBounds.viewport=e,h._visualBackgroundBlocks=new Array,h._backgroundLayer=new Laya.Sprite3D,h._bgTransform3D=h._backgroundLayer.transform,h.addChild(h._backgroundLayer),h._splitWidth=h._splitHeight=512,h._tileMesh=new base.mesh.TileAtlasMesh(h._splitWidth,h._splitHeight),h._tileMesh.lock=!0,h._bgTileMesh=new base.mesh.TileAtlasMesh(512,512),h._bgTileMesh.lock=!0,h._offsetMatrix4x4=new Laya.Matrix4x4,h._offsetVector3=new Laya.Vector3(0,0,0),h._formats=["",0,"_",0,""],h._target=t,h._checkCount=0,h._loadCount=0,h._mapId=0,h._group={},h}l=i.map||(i.map={}),m=base.textures.LayaTexture2D,x=base.textures.TexturePool,c=base.assets.HandlePool,e.allocEntry=function(){var t=this._freeEntry.shift()||new e;return t.handle=0,t},e.freeEntry=function(t){t.url="",e._handlePool.free(t.handle),t.handle=0,t.texture=null,this._freeEntry.unshift(t)},e._freeEntry=new utils.collections.List,e._handlePool=base.assets.HandlePool.instance,B=e,n=Laya.Sprite3D,__extends(s,n),Object.defineProperty(s.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),s.prototype.setup=function(t){var e=modules.config.SceneCfg.instance.getCfgById(t);if(null==e)throw new Error("场景"+t+"不存在");var i=e[5];this._tilePath="assets/map/"+i+"/main/",this._backgroundPath="assets/map/"+i+"/bg/",this._mapId=t;var n="assets/map/"+i+"/main/info.bin";this._infoPath=n;var s=l.MapUtils.configs[i];null==s?ResourcePool.instance.load(n,this.onConfigComplete,0,!1,!1,1):this.onConfigComplete(n,0,s.buffer)},s.prototype.close=function(){for(var t in console.log("关闭地图层.....................",this._infoPath,this._mapId,this._tilePath),this._small&&(this._small._removeReference(),this._small=null),this._infoPath&&ResourcePool.instance.cancel(this._infoPath,this.onConfigComplete),this.clearLayerTiles(this._visualBackgroundBlocks),this.clearLayerTiles(this._visualBlocks),this._group){var e=this._group[t];e.handle||x.instance.cancel(t,this.onTileComplete),B.freeEntry(e)}this._group={}},Object.defineProperty(s.prototype,"viewport",{get:function(){return this._viewBounds.viewport},set:function(t){this._viewBounds.viewport=t,this._backgroundBounds.viewport=t,this._mapId&&(this.updateBackgroundArea(),this.updateViewArea())},enumerable:!0,configurable:!0}),s.prototype.checkComplete=function(){updateTotalProgress(-1),showProgressInterface(0,1,(this._totalCount-this._checkCount)/this._totalCount,"正在加载场景......"),--this._checkCount<=0&&this.event("complete")},s.prototype.update=function(t,e,i){if(void 0===i&&(i=!1),this._viewBounds.updateOffset(t,e),this._viewBounds.force||i){t=this._viewBounds.offsetX,e=this._viewBounds.offsetY;var n=this._target.position;n.x=t,n.y=e,this._target.position=n,n=this._bgTransform3D.localPosition;var s=this._backgroundBounds.width>this._backgroundBounds.viewport.width?this._backgroundBounds.width:this._backgroundBounds.viewport.width,o=this._backgroundBounds.height>this._backgroundBounds.viewport.height?this._backgroundBounds.height:this._backgroundBounds.viewport.height;n.reset(t-s/2|0,e+o/2|0,-1),this._bgTransform3D.localPosition=n,this.updateViewArea()}},s.prototype.updateBackgroundArea=function(){if(!this._single){this._backgroundBounds.updateOffset(1024,-768);var t=this._backgroundBounds.viewArea,e=this._visualBackgroundBlocks;this.calcBlocks(t,e,this._bgTileMesh,this._backgroundLayer,!1),this._loadCount+=this.updateLayerTiles(t),this.activeTextureMaterial(t,e)}},s.prototype.updateViewArea=function(){var t=this._viewBounds.viewArea;if(!this._viewArea.equals(t)){var e=this._visualBlocks;this.calcBlocks(t,e,this._tileMesh,this,!0),this.updateViewLayerTiles(t,this._viewArea),this.activeTextureMaterial(t,e),this._viewArea.copyFrom(t)}},s.prototype.calcBlocks=function(t,e,i,n,s){for(var o=7+t.width*t.height>>3,a=e.length,r=a;r<o;++r){var l=new Laya.MeshSprite3D(i);l.meshRender.sharedMaterial=new base.materials.MultiTextureMaterial(s),e.push(l),n.addChild(l)}for(r=0;r<a;++r)e[r].active=!0},s.prototype.clearLayerTiles=function(t){for(var e=0,i=t.length;e<i;++e){var n=t[e];if(n.active){for(var s=n.meshRender.sharedMaterial,o=0;o<8;++o)s.setTextureAt(o+1,null);n.active=!1}}},s.prototype.updateLayerTiles=function(t){var e=this._formats;e[0]=this._backgroundPath;for(var i=this._offsetMatrix4x4,n=this._offsetVector3,s=t.right,o=t.bottom,a=0,r=0,l=t.y;l<o;++l)for(var h=t.x;h<s;++h){var c=a>>3,p=a%8;a++;var u=this._visualBackgroundBlocks[c].meshRender.sharedMaterial;e[1]=l,e[3]=h,e[4]=".jpg";var d=m.load(e.join(""));d.loaded||(++r,d.once("error",this,this.checkComplete),d.once("loaded",this,this.checkComplete)),u.setTextureAt(1+p,d),n.elements[0]=512*h+256,n.elements[1]=-(512*l+256),Laya.Matrix4x4.createTranslate(n,i),u.offsetMatrix.set(i.elements,16*p)}return r},s.prototype.updateViewLayerTiles=function(t,e){var i=this._formats;i[0]=this._tilePath;for(var n=e.right,s=e.bottom,o=e.y;o<s;++o)for(var a=e.x;a<n;++a)if(!t.contains(a,o)){if(0==(v=this._flags[o*this._cols+a]))continue;i[1]=o,i[3]=a,i[4]=2==v?".jpg":".png";var r=i.join("");(I=this._group[r])&&(I.handle||x.instance.cancel(I.url,this.onTileComplete),B.freeEntry(I),delete this._group[r])}for(var l=this._offsetMatrix4x4,h=this._offsetVector3,c=t.right,p=t.bottom,u=this._splitWidth>>1,d=this._splitHeight>>1,m=this._splitWidth/this._width,f=this._splitHeight/this._height,g=0,y=t.y;y<p;++y)for(var _=t.x;_<c;++_){var v;if(0!=(v=this._flags[y*this._cols+_])){var I,b=g>>3,C=g%8,T=this._visualBlocks[b].meshRender.sharedMaterial;h.elements[0]=_*this._splitWidth+u,h.elements[1]=-(y*this._splitHeight+d),Laya.Matrix4x4.createTranslate(h,l),T.offsetMatrix.set(l.elements,16*C),i[1]=y,i[3]=_,i[4]=2==v?".jpg":".png",r=i.join(""),(I=this._group[r])?T.setTextureAt(1+C,I.texture||this._small):(T.setTextureAt(1+C,this._small),(I=B.allocEntry()).url=r,this._group[r]=I,x.instance.load(r,this.onTileComplete,3600)),I.index=g;var w=T.tilingOffset;I.texture?(w[4*C]=1,w[4*C+1]=1,w[4*C+2]=0,w[4*C+3]=0):(w[4*C]=m,w[4*C+1]=f,w[4*C+2]=_*m,w[4*C+3]=y*f),g++}}},s.prototype.activeTextureMaterial=function(t,e){for(var i=8*e.length,n=t.width*t.height;n<i;){var s=e[n>>3],o=s.meshRender.sharedMaterial,a=n%8;if(0!=a)for(var r=a;r<8;++r)o.setTextureAt(r+1,null);else if(s.active){for(r=0;r<8;++r)o.setTextureAt(r+1,null);s.active=!1}n+=8-n%8}},t=s,l.MapSpriteLayer=t}(game=game||{}),function(t){var e,i,a,n,l,s,o,r,h,c,p,u,d;function m(t,e,i,n){var s=a.call(this,t)||this;s._camera=e,s._root=new r,s._root.addChild(e),s.initLayer(i,n),Laya.stage.addChildAt(s._root,0);var o=s._effects=new Array;return s._effectCallback=function(){ArrayUtils.remove(o,this),this.removeSelf(),this.destroy(!0)},s}e=t.world||(t.world={}),i=e.component||(e.component={}),n=base.ecs.EntityComponent,l=base.particle.ParticlePool,s=t.map.MapSpriteLayer,o=Laya.Rectangle,r=Laya.Scene,h=Laya.Sprite3D,c=Laya.Vector3,p=utils.MathUtils,u=t.misc.RoleUtils,a=n,__extends(m,a),m.prototype.setup=function(){this.owner.on("enterScene",this,this.enterScene).on("leaveScene",this,this.leaveScene).on("stageResize",this,this.stageResize).on("launchEffect",this,this.launchEffect).on("addToLayer",this,this.addToLayer)},m.prototype.teardown=function(){this.owner.off("enterScene",this,this.enterScene).off("leaveScene",this,this.leaveScene).off("stageResize",this,this.stageResize).off("launchEffect",this,this.launchEffect).off("addToLayer",this,this.addToLayer),this._mapLayer.off(Laya.Event.COMPLETE,this,this.onMapLayerComplete),this.leaveScene()},m.prototype.destory=function(){},Object.defineProperty(m.prototype,"mapLayer",{get:function(){return this._mapLayer},enumerable:!0,configurable:!0}),m.prototype.enterScene=function(t){this._mapLayer.once(Laya.Event.COMPLETE,this,this.onMapLayerComplete),this._mapLayer.setup(t)},m.prototype.leaveScene=function(){for(var t=0,e=this._effects;t<e.length;t++){var i=e[t];i.removeSelf(),i.destroy(!0)}this._effects.length=0,this._mapLayer.close()},m.prototype.onMapLayerComplete=function(){this.owner.publish("loadMapComplete")},m.prototype.stageResize=function(t,e){this._mapLayer.target=this._camera.transform,this._mapLayer.viewport=new o(0,0,t,e)},m.prototype.launchEffect=function(t,e,i,n){if(!(30<=this._effects.length)){var s=l.instance.loadParticle(e);switch(s.transform.localPosition=new Laya.Vector3(i.x,i.y,0),u.projectionRotateY(s.transform,n),t){case 0:this._foregroundLayer.addChild(s);break;case 1:this._backgroundLayer.addChild(s);break;case 2:this._foregroundLayer.addChild(s);var o=u.projectionYawPitchRoll(n),a=i.x-4e3*Math.sin(o.x),r=i.y+4e3*Math.sin(o.y);s.frameLoop(1,s,function(){var t=this.transform.position,e=a-t.x,i=r-t.y,n=Math.sqrt(e*e+i*i),s=800*Laya.timer.delta/1e3/n;t.x=p.lerp(t.x,a,s),t.y=p.lerp(t.y,r,s),this.transform.position=t})}this._effects.push(s),s.timerOnce(5e3,s,this._effectCallback)}},m.prototype.addToLayer=function(t,e){switch(t){case 0:this._root.addChild(e);break;case 3:this._backgroundLayer.addChild(e);break;case 4:this._monsterLayer.addChild(e);break;case 8:this._npcLayer.addChild(e);break;case 5:this._playerLayer.addChild(e);break;case 6:this._masterLayer.addChild(e);break;case 7:this._apparatusLayer.addChild(e);break;case 9:this._packageLayer.addChild(e);break;case 10:this._foregroundLayer.addChild(e);break;default:throw new Error("未知的层"+t)}},m.prototype.initLayer=function(t,e){this._mapLayer=this.createLayer(16775715,s,this._camera.transform,new o(0,0,t,e)),this._backgroundLayer=this.createLayer(16775215,h),this._playerLayer=this.createLayer(16258715,h),this._masterLayer=this.createLayer(16258215,h),this._npcLayer=this.createLayer(16258215,h),this._apparatusLayer=this.createLayer(16258715,h),this._monsterLayer=this.createLayer(16259215,h),this._packageLayer=this.createLayer(16257715,h),this._foregroundLayer=this.createLayer(15641715,h)},m.prototype.createLayer=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var s=new(e.bind.apply(e,[void 0].concat(i)));return s.transform.localPosition=new c(0,0,-t),this._root.addChild(s),s},d=m,i.LayerComponent=d}(game=game||{}),function(t){var e,i,o,n,a,r,l,h,s;function c(t,e){var i=o.call(this,t)||this;i._shadowMesh=new r(60);var n=new h(i._shadowMesh),s=new a;return s.diffuseTexture=l.load(e),n.meshRender.material=s,i._sprite=n,i}e=t.world||(t.world={}),i=e.component||(e.component={}),n=base.ecs.EntityComponent,a=base.materials.BatchAtlasMaterial,r=base.mesh.BatchMesh,l=base.textures.LayaTexture2D,h=Laya.MeshSprite3D,o=n,__extends(c,o),c.prototype.setup=function(){this.owner.publish("addToLayer",3,this._sprite),this.owner.on("castShadow",this,this.castShadow),this.owner.on("leaveScene",this,this.leaveScene)},c.prototype.teardown=function(){this._shadowMesh.clear(),this._sprite.removeSelf(),this.owner.off("castShadow",this,this.castShadow),this.owner.off("leaveScene",this,this.leaveScene)},c.prototype.destory=function(){this._sprite.destroy(),this._shadowMesh.destroy()},c.prototype.castShadow=function(t,e){t?this._shadowMesh.addElement(e):this._shadowMesh.removeElement(e)},c.prototype.leaveScene=function(){this._shadowMesh.clear()},s=c,i.ShadowComponent=s}(game=game||{}),function(t){var e,i,a,r,l,n;function h(t,e){var i=a.call(this,t)||this;i._swapList=new l,i._dropList=new l,i._packageMesh=new base.mesh.BatchLiteralhMesh;var n=new Laya.MeshSprite3D(i._packageMesh),s=new base.materials.LiteralAtlasMaterial;s.diffuseTexture=base.textures.LayaTexture2D.load(e),n.meshRender.material=s,i._sprite=n;i._randomCols=new Array(31),i._randomRows=new Array(31);for(var o=0;o<31;++o)i._randomRows[o]=i._randomCols[o]=o-15;return i}e=t.world||(t.world={}),i=e.component||(e.component={}),r=utils.MathUtils,l=utils.collections.List,a=base.ecs.EntityComponent,__extends(h,a),h.prototype.setup=function(){this.owner.publish("addToLayer",9,this._sprite),this.owner.on("leaveScene",this,this.leaveScene).on("updateDropItems",this,this.updateDropItems).on("enterMaster",this,this.enterMaster)},h.prototype.teardown=function(){this._packageMesh.clear(),this._sprite.removeSelf(),this.owner.off("leaveScene",this,this.leaveScene).off("updateDropItems",this,this.updateDropItems).off("enterMaster",this,this.enterMaster)},h.prototype.destory=function(){this._sprite.destroy(),this._packageMesh.destroy()},h.prototype.update=function(){if(!this._dropList.isEmpty&&this._transform){var t=Date.now();do{var e=this._dropList.shift(),i=!1;switch(e.status){case 0:t>e.timeout&&(e.startTime=t,e.status=1,e.sv=300+(200*Math.random()|0),this._packageMesh.addElement(e));break;case 1:var n=(t-e.startTime)/e.delta,s=e.dest;e.offset.reset(r.lerp(e.pos.x,s.x,n),r.lerp(e.pos.y,s.y,n)+r.bezier(0,e.sv,0,n),r.lerp(e.pos.z,s.z,n)),1<=n&&(e.status=2,e.timeout=t+1e3,e.pos.reset(s.x,s.y,s.z));break;case 2:t>e.timeout&&(e.status=3,e.startTime=t);break;case 3:n=(t-e.startTime)/800;var o=r.lerp(1,.5,n);s=this._transform.localPosition,e.scale.reset(o,o,o),e.offset.reset(r.lerp(e.pos.x,s.x,n),r.lerp(e.pos.y,s.y+150,n),r.lerp(e.pos.z,s.z,n)),i=1<=n}i?this.removePackage(e):this._swapList.unshift(e)}while(!this._dropList.isEmpty);this._dropList.swap(this._swapList)}},h.prototype.enterMaster=function(t){this._transform=t.property.get("transform")},h.prototype.leaveScene=function(){for(this._transform=null,this._packageMesh.clear();!this._dropList.isEmpty;)this.removePackage(this._dropList.shift())},h.prototype.updateDropItems=function(t,e,i){var n=4e3*e,s=MapUtils.getRealPosition(t,e),o=new Laya.Point;ArrayUtils.disturb(this._randomCols),ArrayUtils.disturb(this._randomRows);for(var a=0,r=Date.now(),l=0,h=i;l<h.length;l++)for(var c=h[l],p=c[0],u=9!=CommonUtil.getItemTypeById(p)?c[1]:1;u--;){var d=this.loadPackage(s.x,-s.y,n,p);d.timeout=r,d.status=0,d.delta=200+(200*Math.random()|0),o.x=t+this._randomCols[a],o.y=e+this._randomRows[a];var m=4e3*o.y;o=MapUtils.getRealPosition(o.x,o.y,o),d.dest.reset(o.x,-o.y,m),r+=50,++a}},h.prototype.loadPackage=function(t,e,i,n){var s=h.getPackageIcon(n),o=150/1121,a=h._freeList.shift();return a?(a.uvs[0]=s%3*(150/508),a.uvs[1]=Math.floor(s/3)*o+256/1121,a.scale.reset(1,1,1),a.offset.reset(t,e,i),a.alpha=1,a.pos.reset(t,e,i)):a={sizes:[75,75],uvs:[s%3*(150/508),Math.floor(s/3)*o+256/1121,150/508,o],scale:new Laya.Vector3(1,1,1),offset:new Laya.Vector3(t,e,i),alpha:1,pos:new Laya.Vector3(t,e,i),dest:new Laya.Vector3(0,0,0)},this._dropList.unshift(a),a},h.prototype.removePackage=function(t){h._freeList.unshift(t),this._packageMesh.removeElement(t)},h.getPackageIcon=function(t){var e=11,i=CommonUtil.getItemTypeById(t);if(5==i)switch(CommonUtil.getPartById(t)){case 1:e=12;break;case 2:e=7;break;case 3:e=9;break;case 4:e=4;break;case 5:e=6;break;case 6:e=1;break;case 7:e=3;break;case 8:e=0;break;case 9:e=8;break;case 10:e=5}else if(9==i)switch(CommonUtil.getPartById(t)){case 1:e=2;break;case 3:e=13;break;case 5:e=10}return e},h._freeList=new l,n=h,i.PackageComponent=n}(game=game||{}),function(t){var e,i,o,n,a,r,l,h,c,s;function p(t,e){var i=o.call(this,t)||this;i.addLiteralElement=function(t){i._literalMesh.addElement(t)},i.recover=function(t){i._literalMesh.removeElement(t)},i._literalMesh=new r;var n=new h(i._literalMesh),s=new a;return s.diffuseTexture=l.load(e[0]),n.meshRender.material=s,i._sprite=n,i._tuple=e,i}e=t.world||(t.world={}),i=e.component||(e.component={}),n=base.ecs.EntityComponent,a=base.materials.LiteralAtlasMaterial,r=base.mesh.BatchLiteralhMesh,l=base.textures.LayaTexture2D,h=Laya.MeshSprite3D,c=Laya.Vector3,o=n,__extends(p,o),p.prototype.setup=function(){this.owner.publish("addToLayer",0,this._sprite),this.owner.on("fightingTips",this,this.fightingTips),this.owner.on("leaveScene",this,this.leaveScene)},p.prototype.teardown=function(){this._literalMesh.clear(),this._sprite.removeSelf(),this.owner.off("fightingTips",this,this.fightingTips),this.owner.off("leaveScene",this,this.leaveScene)},p.prototype.destory=function(){this._sprite.destroy(),this._literalMesh.destroy()},p.prototype.leaveScene=function(){this._literalMesh.clear()},p.prototype.convertValue=function(t,e,i,n){var s,o,a,r=new Array,l=new Array,h=this._tuple[1],c=0;if(null!=i)for(s=i[0],o=i[1],a=i[2];c=e%10*2,r.push(s[3]/h[1],s[2]/h[0],(s[3]*o[c+1]+s[1])/h[1],(s[2]*o[c]+s[0])/h[0]),0==a.length?l.push(s[3],s[2]):l.push(a[c],a[c+1]),0!=(e=Math.floor(e/10)););null!=n&&(s=n[0],o=n[1],a=n[2],r.push(s[3]/h[1],s[2]/h[0],(s[3]*o[1]+s[1])/h[1],(s[2]*o[0]+s[0])/h[0]),0==a.length?l.push(s[3],s[2]):l.push(a[0],a[1])),ArrayUtils.reverse(r),ArrayUtils.reverse(l),t.sizes=l,t.uvs=r},p.prototype.trigger=function(t,e){var i=t.scale,n=t.offset;return TweenJS.create(t).combine(!0).chain(TweenJS.create(i).to({x:2,y:2,z:2},100).repeat(1).yoyo(!0),TweenJS.create(n).to({y:n.y+75},200).combine(!0).chain(TweenJS.create(t).to({alpha:0},200).delay(700),TweenJS.create(n).to({y:n.y+140},600).delay(300))).delay(e).onStart(this.addLiteralElement).onComplete(this.recover).start()},p.prototype.fightingTips=function(t,e,i,n){var s,o=8;8&n?o=6:(16&n?o=9:32&n?o=14:64&n?o=16:1&n&&(o=2&n?4&n?12:13:4&n?10:11),s=this._tuple[2][o]);var a=null;switch(o){case 13:a=this._tuple[2][3];break;case 12:a=this._tuple[2][4];break;case 10:a=this._tuple[2][2];break;case 8:a=this._tuple[2][0];break;case 6:a=this._tuple[2][6];break;case 14:a=this._tuple[2][15];break;case 16:a=this._tuple[2][17];break;case 9:a=this._tuple[2][1]}var r={sizes:null,uvs:null,scale:new c(1,1,1),offset:i.clone(),alpha:1};this.convertValue(r,t,s,a),r.offset.z=0,this.trigger(r,e)},s=p,i.LiteralComponent=s}(game=game||{}),function(t){var e,i,n,s,o,a;function r(t){var e=n.call(this,t)||this;return e._hudLayer=new o,e}e=t.world||(t.world={}),i=e.component||(e.component={}),s=base.ecs.EntityComponent,o=Laya.Sprite,n=s,__extends(r,n),Object.defineProperty(r.prototype,"hudLayer",{get:function(){return this._hudLayer},enumerable:!0,configurable:!0}),r.prototype.setup=function(){Laya.stage.addChildAt(this._hudLayer,1),this.owner.on("addToHUD",this,this.addChild)},r.prototype.teardown=function(){},r.prototype.destory=function(){},r.prototype.addChild=function(t){this._hudLayer.addChild(t)},a=r,i.HUDComponent=a}(game=game||{}),function(t){!function(i){var n,t=base.ecs.Entity,e=base.ecs.EntityComponent,s=(n=t,__extends(o,n),o);function o(t){var e=n.call(this)||this;return e.id=t,e.property=new i.Property,e.property.set("id",t),e}i.Role=s;var a,r=(a=e,__extends(l,a),l);function l(t){var e=a.call(this,t)||this;return e.property=t.property,e}i.RoleComponent=r}(t.role||(t.role={}))}(game=game||{}),function(e){var o,t,i,a,n,s,r;function l(t,e,i,n){var s=a.call(this,t)||this;return s._sprite=new o.RoleAvatar(i,!GlobalData.getNoEff(s.property)),s._sprite.fighting=!0,s.property.set("avatar",s._sprite),s.property.set("transform",s._sprite.transform),s._layer=e,s._flareTween=TweenJS.create(s._sprite).to({colorOffset:.5},75).yoyo(!0).repeat(1).onComplete(l.resetFlareValue).onStop(l.resetFlareValue),s.property.set("shadow",{width:256,height:128,uvs:[0,0,1,1],matrix:s._sprite.transform.localMatrix}),s._sprint=!1,s._isOB=n,s.visible(!n),s._sprite.transform.localScale=new Laya.Vector3(1,1,1),s}o=e.role||(e.role={}),t=o.component||(o.component={}),i=t.exterior||(t.exterior={}),n=base.particle.ParticlePool,s=modules.scene.SceneUtil,a=o.RoleComponent,__extends(l,a),l.resetFlareValue=function(t,e){e.colorOffset=.5,t.colorOffset=0},l.prototype.setup=function(){this._sprite.reset(""),this.updateExterior(),this._sprite.direction=this.property.get("direction")-90,this._sprint=!1,this.property.on("exterior",this,this.updateExterior),this.owner.on("visible",this,this.visible).on("flare",this,this.flare).on("sprint",this,this.sprint),e.GameCenter.instance.world.publish("addToLayer",this._layer,this._sprite),e.GameCenter.instance.world.publish("castShadow",!0,this.property.get("shadow")),this._sprite.fighting=!0,4!==this.property.get("type")?GlobalData.dispatcher.on("NO_EFF",this,this.noEff):GlobalData.dispatcher.on("NO_OWN_EFF",this,this.noEff)},l.prototype.teardown=function(){this.sprint(!1),this._sprite.removeSelf(),this.property.off("exterior",this,this.updateExterior),this.owner.off("visible",this,this.visible).off("flare",this,this.flare).off("sprint",this,this.sprint),this._flareTween.stop(),e.GameCenter.instance.world.publish("castShadow",!1,this.property.get("shadow")),GlobalData.dispatcher.off("NO_EFF",this,this.noEff),GlobalData.dispatcher.off("NO_OWN_EFF",this,this.noEff)},l.prototype.destory=function(){null!=this._sprintEffect&&(this._sprintEffect.removeSelf(),this._sprintEffect.destroy(!0),this._sprintEffect=null),this._sprite.destroy(!0)},l.prototype.noEff=function(){this._sprite.noEff(!GlobalData.getNoEff(this.property))},l.prototype.flare=function(){this._flareTween.start()},l.prototype.sprint=function(t){this._sprint!=t&&(t?(null==this._sprintEffect&&(this._sprintEffect=n.instance.loadParticle("assets/particle/JiaSu.lh")),this._sprite.body.addChild(this._sprintEffect),this._sprite.getActionTween("sprint").repeat(Number.POSITIVE_INFINITY).start()):null!=this._sprintEffect&&this._sprintEffect.removeSelf(),this._sprint=t)},l.prototype.visible=function(t){t=t&&!this._isOB,this._sprite.active!=t&&(this._sprite.active=t,e.GameCenter.instance.world.publish("castShadow",t,this.property.get("shadow")))},l.prototype.updateExterior=function(){var t=this.property.get("exterior"),e=this._sprite.clothes!=t[0];e&&this._sprint&&this._sprintEffect.removeSelf(),this._sprite.clothes=t[0],e&&this._sprint&&this._sprite.body.addChild(this._sprintEffect),this._sprite.weapon=t[1],this._sprite.wing=t[2],this._sprite.immortals=t[3],this._sprite.aura=t[4],this._sprite.tianZhu=t[5];var i=this.property.get("isUnseen");this._sprite.alpha=i?CommonUtil.alpanNum:1},l.prototype.update=function(){var t=modules.fire_contention.FireContentionModel.instance.agentIdWarFireGod===this.property.get("id"),e=(t=t&&39===s.currScene)?1.4:1;this._sprite&&this._sprite.transform&&(this._sprite.transform.localScale=new Laya.Vector3(e,e,e))},r=l,i.AvatarComponent=r}(game=game||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._monsterEff={};var t=GlobalData.getConfig("monster_res_effect");if(t&&0<t.length)for(var e=0;e<t.length;e++){var i=t[e];this._monsterEff[i[0]]=i}},n.prototype.getCfgById=function(t){return this._monsterEff[t]},i=n,e.MonsterResEffCfg=i}(modules=modules||{}),function(i){var n,t,e,s,o,a,r,l,h;function c(t,e){var i=s.call(this,t)||this;return i._sprite=new n.RoleAvatar(!0,!GlobalData.noEff),i.property.set("avatar",i._sprite),i.property.set("transform",i._sprite.transform),i._layer=e,i._flareTween=TweenJS.create(i._sprite).to({colorOffset:.5},75).yoyo(!0).repeat(1).onComplete(c.resetFlareValue).onStop(c.resetFlareValue),i._fadeTween=TweenJS.create(i._sprite).to({alpha:0},800),i.property.set("shadow",{width:256,height:128,uvs:[0,0,1,1],matrix:i._sprite.transform.localMatrix}),i}n=i.role||(i.role={}),t=n.component||(n.component={}),e=t.exterior||(t.exterior={}),o=Laya.Vector3,a=modules.config.MonsterResCfg,r=modules.config.MonsterResEffCfg,l=base.particle.ParticlePool,s=n.RoleComponent,__extends(c,s),c.resetFlareValue=function(t,e){e.colorOffset=.5,t.colorOffset=0},c.prototype.setup=function(){this._sprite.reset(""),this._sprite.clothes=this.property.get("exterior")[0];var t=a.instance.getCfgById(this.property.get("occ"))[4]||1;this._sprite.body.transform.scale=new o(t,t,t),this._sprite.direction=this.property.get("direction")-90,this.owner.on("flare",this,this.flare),this.owner.on("fade",this,this.fade),this.property.on("status",this,this.updateStatus),this.updateStatus(this.property.get("status")),i.GameCenter.instance.world.publish("addToLayer",this._layer,this._sprite),i.GameCenter.instance.world.publish("castShadow",!0,this.property.get("shadow")),GlobalData.dispatcher.on("NO_EFF",this,this.noEff)},c.prototype.teardown=function(){if(this._sprite.removeSelf(),this.owner.off("flare",this,this.flare),this.owner.off("fade",this,this.fade),this.property.off("status",this,this.updateStatus),this._flareTween.stop(),this._fadeTween.stop(),i.GameCenter.instance.world.publish("castShadow",!1,this.property.get("shadow")),GlobalData.dispatcher.off("NO_EFF",this,this.noEff),null!=this._showEffects)for(var t=0,e=this._showEffects;t<e.length;t++)e[t].removeSelf()},c.prototype.destory=function(){if(this._sprite.destroy(),null!=this._showEffects){for(var t=0,e=this._showEffects;t<e.length;t++)e[t].destroy(!0);this._showEffects=null}},c.prototype.noEff=function(){this._sprite.noEff(!GlobalData.noEff),this.updateStatus(this._state)},c.prototype.flare=function(){this._flareTween.start()},c.prototype.fade=function(){this._fadeTween.start()},c.prototype.updateStatus=function(t){if(4096!=(this._state=t)||GlobalData.noEff){if(null!=this._showEffects)for(var e=0,i=this._showEffects;e<i.length;e++)i[e].removeSelf()}else{var n=r.instance.getCfgById(this.property.get("occ"));if(n){var s=n[1];if(s&&s.length){if(null==this._showEffects){this._showEffects=[];for(var o=0;o<s.length;++o)this._showEffects[o]=l.instance.loadParticle("assets/particle/"+s[o]+".lh")}for(o=0;o<this._showEffects.length;++o)this._sprite.body.bindTo(9<=o?"xq_GD_"+(o+1):"xq_GD_0"+(o+1),this._showEffects[o])}var a=n[2];null!=a&&""!=a&&this._sprite.body.addChild(l.instance.loadParticle("assets/particle/"+a+".lh"))}}},h=c,e.MonsterAvatarComponent=h}(game=game||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("npc"),e=0,i=t.length;e<i;e++)this._table[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.NpcCfg=i}(modules=modules||{}),function(t){var n,e,i,s,o,a,r;function l(t,e){var i=s.call(this,t)||this;return i._sprite=new n.RoleAvatar(!0,!GlobalData.noEff),i.property.set("avatar",i._sprite),i.property.set("transform",i._sprite.transform),i._layer=e,i.property.set("shadow",{width:256,height:128,uvs:[0,0,1,1],matrix:i._sprite.transform.localMatrix}),i}n=t.role||(t.role={}),e=n.component||(n.component={}),i=e.exterior||(e.exterior={}),o=modules.config.NpcCfg,a=Laya.Vector3,s=n.RoleComponent,__extends(l,s),l.prototype.setup=function(){this._sprite.reset(""),this.updateExterior(),this.property.on("occ",this,this.updateExterior),t.GameCenter.instance.world.publish("addToLayer",this._layer,this._sprite),t.GameCenter.instance.world.publish("castShadow",!0,this.property.get("shadow")),GlobalData.dispatcher.on("NO_EFF",this,this.noEff)},l.prototype.teardown=function(){this._sprite.removeSelf(),t.GameCenter.instance.world.publish("castShadow",!1,this.property.get("shadow")),GlobalData.dispatcher.off("NO_EFF",this,this.noEff)},l.prototype.destory=function(){this._sprite.destroy()},l.prototype.noEff=function(){this._sprite.noEff(!GlobalData.noEff)},l.prototype.updateExterior=function(){var t=o.instance.getCfgById(this.property.get("occ"));if(null==t)throw new Error("NPC类型"+this.property.get("occ")+"不存在！");this._sprite.clothes=t[1],this._sprite.direction=180,this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start();var e=t[5]||1;this._sprite.body.transform.scale=new a(e,e,e)},r=l,i.NpcAvatarComponent=r}(game=game||{}),function(t){var n,e,i,s,o,a;function r(t,e){var i=s.call(this,t)||this;return i._sprite=new n.RoleAvatar(!0,!GlobalData.getNoEff(i.property)),i._sprite.fighting=!0,i.property.set("avatar",i._sprite),i.property.set("transform",i._sprite.transform),i._layer=e,i.property.set("shadow",{width:256,height:128,uvs:[0,0,1,1],matrix:i._sprite.transform.localMatrix}),i}n=t.role||(t.role={}),e=n.component||(n.component={}),i=e.exterior||(e.exterior={}),o=base.particle.ParticlePool,s=n.RoleComponent,__extends(r,s),r.prototype.setup=function(){this._sprite.reset(""),this.updateExterior(),this._sprite.direction=this.property.get("direction")-90,t.GameCenter.instance.world.publish("addToLayer",this._layer,this._sprite),this._sprite.fighting=!0,4!==this.property.get("type")?GlobalData.dispatcher.on("NO_EFF",this,this.noEff):GlobalData.dispatcher.on("NO_OWN_EFF",this,this.noEff)},r.prototype.teardown=function(){this._sprite.removeSelf(),GlobalData.dispatcher.off("NO_EFF",this,this.noEff),GlobalData.dispatcher.off("NO_OWN_EFF",this,this.noEff)},r.prototype.noEff=function(){this._sprite.noEff(!GlobalData.getNoEff(this.property))},r.prototype.destory=function(){null!=this._swimmingEffect&&(this._swimmingEffect.removeSelf(),this._swimmingEffect.destroy(!0),this._swimmingEffect=null),this._sprite.destroy(!0)},r.prototype.updateExterior=function(){var t=this.property.get("occ");this._sprite.clothes=1==t?1005:1006,this._sprite.weapon=0,this._sprite.wing=0,this._sprite.immortals=0,this._sprite.aura=0,this._swimmingEffect=o.instance.loadParticle("assets/particle/"+(1==t?"nanyouyong":"nvyouyong")+".lh"),this._sprite.body.addChild(this._swimmingEffect)},a=r,i.SwimsuitAvatarComponent=a}(game=game||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._ids=[];for(var t=GlobalData.getConfig("xianwei_rise"),e=0,i=t.length;e<i;e++){var n=t[e][0];this._tab[n]=t[e],this._ids.push(n)}},n.prototype.getXianweiRiseByLevel=function(t,e){if(void 0===e&&(e=0),!e)return this._tab[t];var i=this._ids.indexOf(t);if(-1!==i){var n=1===e?i+1:i-1,s=this._ids[n];if(s)return this._tab[s]}},n.prototype.getNextAwardCfgByLv=function(t){return t=100*(Math.floor(t/100)+1)+1,this._tab[t]},Object.defineProperty(n.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxLv",{get:function(){return this._ids[this._ids.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minLv",{get:function(){return this._ids[0]},enumerable:!0,configurable:!0}),n.prototype.getSideId=function(t,e){var i=this._ids.indexOf(t);if(-1!==i){var n=1===e?i+1:i-1,s=this._ids[n];if(s)return s}},i=n,e.XianweiRiseCfg=i}(modules=modules||{}),function(i){var t,e,n,s;function o(){this.maxVipLevel=e.instance.getVipFMaxLevel(),this.haveNum=0,this.needNum=0,this.vipLevel=50,this.isUp=!1}t=i.vip_new||(i.vip_new={}),e=i.config.PrivilegeCfg,n=i.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.initVipInfo=function(t){this.rewardList=new Array,this.vipLevel=t[0],this.haveNum=t[1],this.rewardList=t[2],this.setNeedNum(),this.setRP(),GlobalData.dispatcher.event("VIPF_UPDATE")},o.prototype.UpdateVipFInfo=function(t){this.vipLevel=t[0],this.haveNum=t[1],this.rewardList=t[2],this.setNeedNum(),this.setRP(),GlobalData.dispatcher.event("VIPF_UPDATE")},o.prototype.getVipLevelTrue=function(){return this.vipLevel-50},o.prototype.getVipFTrue=function(t){var e=t-50;return e=e<0?0:e},o.prototype.setNeedNum=function(){this.getVipCfgByLevel(this.vipLevel)?this.needNum=this.getVipCfgByLevel(this.vipLevel)[3]:this.needNum=0},o.prototype.getVipCfgByLevel=function(t){return e.instance.getCfgByType(t)},o.prototype.setRP=function(){var t=i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(230),e=this.checkReward();n.instance.setRPProperty("vipNewRP",e&&t)},o.prototype.checkReward=function(){for(var t=51;t<=this.vipLevel;t++)if(1==this.checkCanReceive(t))return!0;return!1},o.prototype.checkCanReceive=function(t){if(t<=this.vipLevel){if(this.rewardList&&0<this.rewardList.length)for(var e=0;e<this.rewardList.length;e++)if(t==this.rewardList[e])return 2;return 1}return 0},o.prototype.getCanGetAward=function(){for(var t=51;t<this.maxVipLevel;t++)if(2!=this.checkCanReceive(t))return t;return this.maxVipLevel},s=o,t.VipNewModel=s}(modules=modules||{}),function(m){var t,e,n,i,s,a,r,l,o;function h(t,e){var i=n.call(this,t)||this;return i._titleType=e,i._lastLaunch=0,i._interval=200,i}t=m.role||(m.role={}),e=t.component||(t.component={}),i=base.particle.ParticlePool,s=modules.config.XianweiRiseCfg,a=modules.config.BlendCfg,r=modules.vip.VipModel,l=modules.vip_new.VipNewModel,n=t.RoleComponent,__extends(h,n),h.prototype.setup=function(){this._transform=this.property.get("avatar").title.transform,this._transform.localPosition=new Laya.Vector3(0,250,0),1&this._titleType&&(this.owner.on("visible",this,this.visible).on("updateTitle",this,this.updateName),GlobalData.dispatcher.on("PLAYER_UPDATE_PK_MODE",this,this.updatePkMode).on("SCENE_ENTER",this,this.updatePkMode).on("FACTION_INFO",this,this.updatePkMode).on("UPDATE_WARBAND_WARGATHER_LIST",this,this.updatePkMode).on("QQ_UPDATE",this,this.updateBlue),this.property.on("name",this,this.updateName).on("ownerName",this,this.updateOwnerName).on("teamId",this,this.updatePkMode).on("blueVip",this,this.updateBlue).on("factionId",this,this.updatePkMode),this.updateName(),this.updatePkMode(),this.updateOwnerName(),this.updateBlue()),2&this._titleType&&(this.property.on("desgnation",this,this.updateTitle).on("factionName",this,this.updateFaction).on("marrierName",this,this.updatePartner).on("rise",this,this.updateRank),this.updateRank(),this.updateFaction(),this.updatePartner(),this.updateTitle()),4&this._titleType&&(GlobalData.dispatcher.on("VIP_UPDATE",this,this.updatePayTitle).on("VIPF_UPDATE",this,this.updatePayTitle).on("FIRST_PAY_UPDATE",this,this.updatePayTitle).on("MISSION_UPDATE_LV",this,this.updatePayTitle),this.updatePayTitle()),8&this._titleType&&(this.property.on("desgnation",this,this.updateTitle),this.property.on("warbandId",this,this.updatePkMode),this.property.on("warbandName",this,this.updateWarbandName),GlobalData.dispatcher.on("FIRE_CONTENTION_UPDATE_RANK",this,this.updateWarFire),this.updatePkMode(),this.updateWarbandName(),this.updateWarFire(),this.updateTitle()),this.owner.on("hurt",this,this.hurt).on("abnormal",this,this.abnormal)},h.prototype.teardown=function(){1&this._titleType&&(this.owner.off("visible",this,this.visible).off("updateTitle",this,this.updateName),GlobalData.dispatcher.off("PLAYER_UPDATE_PK_MODE",this,this.updatePkMode).off("SCENE_ENTER",this,this.updatePkMode).off("FACTION_INFO",this,this.updatePkMode).off("UPDATE_WARBAND_WARGATHER_LIST",this,this.updatePkMode).off("QQ_UPDATE",this,this.updateBlue),this.property.off("name",this,this.updateName).off("ownerName",this,this.updateOwnerName).off("teamId",this,this.updatePkMode).off("blueVip",this,this.updateBlue).off("factionId",this,this.updatePkMode),this._name=this.clearElement(this._name),this._ownerName=this.clearElement(this._ownerName),this._warbandName=this.clearElement(this._warbandName),this._blue=this.clearElement(this._blue)),2&this._titleType&&(this.property.off("desgnation",this,this.updateTitle).off("factionName",this,this.updateFaction).off("marrierName",this,this.updatePartner).off("rise",this,this.updateRank),this._rank=this.clearElement(this._rank),this._faction=this.clearElement(this._faction),this._partner=this.clearElement(this._partner),this._title=this.clearElement(this._title)),4&this._titleType&&(GlobalData.dispatcher.off("VIP_UPDATE",this,this.updatePayTitle).off("VIPF_UPDATE",this,this.updatePayTitle).off("FIRST_PAY_UPDATE",this,this.updatePayTitle).off("MISSION_UPDATE_LV",this,this.updatePayTitle),this._vip=this.clearElement(this._vip),this._chapter=this.clearElement(this._chapter),this._level=this.clearElement(this._level)),8&this._titleType&&(this.property.off("desgnation",this,this.updateTitle),this.property.off("warbandId",this,this.updatePkMode),this.property.off("warbandName",this,this.updateWarbandName),GlobalData.dispatcher.on("FIRE_CONTENTION_UPDATE_RANK",this,this.updateWarFire),this._warbandName=this.clearElement(this._warbandName),this._warfireNum=this.clearElement(this._warfireNum),this._warfireIcon=this.clearElement(this._warfireIcon),this._title=this.clearElement(this._title)),this._layout=null,this.owner.off("hurt",this,this.hurt).off("abnormal",this,this.abnormal),null!=this._dizzSprite&&this._dizzSprite.removeSelf(),null!=this._silentSprite&&this._silentSprite.removeSelf(),null!=this._wudiSprite&&this._wudiSprite.removeSelf()},h.prototype.destory=function(){null!=this._dizzSprite&&this._dizzSprite.destroy(!0),null!=this._silentSprite&&this._silentSprite.destroy(!0),null!=this._wudiSprite&&this._wudiSprite.destroy(!0)},h.prototype.update=function(){!this._layout&&this._name&&this.resetLayout(),this._layout&&this.updateLayout()},h.prototype.updateLayout=function(){for(var t=this._transform.position,e=t.x,i=-t.y,n=0,s=this._layout.length;n<s;++n){var o=this._layout[n],a=0,r=0;i-=o.space||0;for(var l=0,h=o.layer.length;l<h;++l)a+=(p=o.layer[l]).o.width+(p.space||0),p.o.height>r&&(r=p.o.height);a/=2,l=0;for(var c=o.layer.length;l<c;++l){var p;(p=o.layer[l]).o.x=e-a,p.o.y=i-(r-(r-p.o.height)/2)-(p.padding||0),a-=p.o.width+(p.space||0)}i-=r}},h.prototype.pushLayout=function(t,e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!t)return null;var s={layer:[{o:t,space:i,padding:n}],space:e};return this._layout.push(s),s},h.prototype.resetLayout=function(){this._layout=[];var t=this.pushLayout(this._name,0);this._rank&&t.layer.unshift({o:this._rank,space:8}),this._blue&&t.layer.unshift({o:this._blue,space:8}),this.pushLayout(this._partner,5),this.pushLayout(this._faction,5),this._vip&&(this._chapter?((t=this.pushLayout(this._vip,0,-80)).layer.unshift({o:this._chapter,space:-45,padding:1}),t.layer.push({o:this._level,padding:3})):this.pushLayout(this._vip,0,0)),this.pushLayout(this._warbandName,5),this.pushLayout(this._title,5),this.pushLayout(this._ownerName,5),this._warfireIcon&&(t=this.pushLayout(this._warfireIcon,2,0)).layer.push({o:this._warfireNum,padding:-2})},h.prototype.visible=function(t){this._name.visible!=t&&(this._rank&&(this._rank.visible=t),this._name.visible=t,this._partner&&(this._partner.visible=t),this._faction&&(this._faction.visible=t),this._title&&(this._title.visible=t),this._vip&&(this._vip.visible=t),this._chapter&&(this._chapter.visible=t),this._level&&(this._level.visible=t),this._warbandName&&(this._warbandName.visible=t),this._warfireNum&&(this._warfireNum.visible=t),this._warfireIcon&&(this._warfireIcon.visible=t),this._blue&&(this._blue.visible=t))},h.prototype.hurt=function(t,e,i,n){var s=0,o=Date.now();o<this._lastLaunch?s=this._lastLaunch-o:this._lastLaunch=o;var a=m.GameCenter.instance.world,r=this._transform.position;if(0!=e){var l=modules.config.SkillEffectCfg.instance.getCfgById(1e4*Math.floor(e/1e4));if(null==l)throw new Error("skill_effect表不存在的技能："+e);for(var h=l[4],c=1,p=h.length;c<p;++c){var u=h[c-1];a.publish("fightingTips",Math.floor(i/p),s+u,r,n)}var d=h[h.length-1];if(a.publish("fightingTips",Math.ceil(i/h.length),s+d,r,n),this._lastLaunch+=d,16&n||8&n)return}else a.publish("fightingTips",i,s,r,n);this._lastLaunch+=this._interval,this.owner.publish("flare")},h.prototype.updatePkMode=function(){switch(this.property.get("type")){case 1:this._name.color="#ff4242";break;case 4:this._name.color="#00e4ff";break;case 3:var t=modules.scene.SceneUtil.currScene,e=modules.player.PlayerModel.instance.pkMode;if(0==e)this._name.color="#ffffff";else if(3===e){var i=0!==this.owner.property.get("teamId")&&0!==PlayerModel.instance.teamId&&this.owner.property.get("teamId")===PlayerModel.instance.teamId;this._name.color=51===t?i?"#ffffff":"#ff4242":i?"#00e4ff":"#ff4242"}else if(4===e)if(i=this.owner.property.get("warbandId")===modules.warband.WarbandModel.instance.info[0],56===t){var n=this.owner.property.get("id");this._name.color=i?n===PlayerModel.instance.actorId?"#00e4ff":"#ffffff":"#ff4242"}else this._name.color=i?"#00e4ff":"#ff4242";else if(5===e){var s=1===this.owner.property.get("teamId");51===t?(i=0!==this.owner.property.get("teamId")&&0!==PlayerModel.instance.teamId&&this.owner.property.get("teamId")===PlayerModel.instance.teamId,this._name.color=i?"#ffffff":"#ff4242"):this._name.color=s?"#ffffff":"#ff4242"}else 1===e?(n=this.owner.property.get("id"),s=modules.faction.FactionModel.instance.hasFaction&&this.owner.property.get("factionId")===modules.faction.FactionModel.instance.factionId,i=0!==this.owner.property.get("teamId")&&0!==PlayerModel.instance.teamId&&this.owner.property.get("teamId")===PlayerModel.instance.teamId,this._name.color=s||i?n===PlayerModel.instance.actorId?"#00e4ff":"#ffffff":"#ff4242"):this._name.color="#ff4242";break;default:this._name.color="#fffc00"}},h.prototype.updateRank=function(){var t=this.property.get("rise")||0;if(t){this._rank||(this._rank=new modules.common.AtlasImage,this._rank.atlas="assets/icon/ui/xian_wei/rise.atlas",this._layout=null,m.GameCenter.instance.world.publish("addToHUD",this._rank));var e=s.instance.getXianweiRiseByLevel(t);this._rank.skin="assets/icon/ui/xian_wei/"+e[9]+".png"}else this._rank=this.clearElement(this._rank)},h.prototype.updateName=function(){this._name||(this._name=this.initLabel(),this._layout=null),this._name.text=this.property.get("name")},h.prototype.updateWarbandName=function(){var t=modules.scene.SceneUtil.currScene;55!==t&&56!==t||(this._warbandName||(this._warbandName=this.initLabel(),this._layout=null),this._warbandName.text="[战]"+this.property.get("warbandName"),this._warbandName.color="#c48fff")},h.prototype.updateWarFire=function(){39==modules.scene.SceneUtil.currScene&&(this._warfireNum||(this._warfireNum=this.initLabel(),this._layout=null),this._warfireIcon||(this._warfireIcon=new Laya.Image,this._layout=null,this._warfireIcon.skin="assets/others/iocn_xhzd_xh.png",m.GameCenter.instance.world.publish("addToHUD",this._warfireIcon)),this._warfireNum.text=""+(modules.fire_contention.FireContentionModel.instance.powerById[this.property.get("id")]||0),this._warfireNum.color="#ffba33")},h.prototype.updateOwnerName=function(){var t=this.property.get("ownerName");if(t){this._ownerName||(this._ownerName=this.initLabel(),this._layout=null,this._ownerName.color="#ffffff");var e=modules.union_war.UnionWarModel.instance.ispreliminaryFactionWar()||modules.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar();this._ownerName.text=(e?"夺取者":"归属者")+"："+t}else this._ownerName=this.clearElement(this._ownerName)},h.prototype.updateFaction=function(){var t=this.property.get("factionName");t?(this._faction||(this._faction=this.initLabel(),this._layout=null,this._faction.color="#50ff28"),this._faction.text="[盟]"+t):this._faction=this.clearElement(this._faction)},h.prototype.updatePartner=function(){var t=this.property.get("marrierName");t?(this._partner||(this._partner=this.initLabel(),this._layout=null,this._partner.color="#fc69a0"),this._partner.text=t+"的仙缘"):this._partner=this.clearElement(this._partner)},h.prototype.clearElement=function(t){return t&&(t.destroy(!0),this._layout=null),null},h.prototype.updatePayTitle=function(){for(var t=modules.mission.MissionModel.instance.curLv,e=a.instance.getCfgById(32003)[1],i=0,n=e.length;i<n&&!(t<e[i]);)i++;var s=n-1;if(i==s&&modules.first_pay.FirstPayModel.instance.giveState<=0)this._vip||(this._vip=new Laya.Image,m.GameCenter.instance.world.publish("addToHUD",this._vip),this._layout=null),this._chapter=this.clearElement(this._chapter),this._level=this.clearElement(this._level),this._vip.skin="assets/icon/ui/vip/need_first_pay.png";else if(i<s){this._vip||(this._vip=new Laya.Image,m.GameCenter.instance.world.publish("addToHUD",this._vip),this._chapter=this.initVipLabel(30),this._chapter.align="right",this._level=this.initVipLabel(40),this._layout=null);var o=i+2;this._level.text=0<r.instance.vipLevel||l.instance.getVipLevelTrue()>=o?"":o.toString(),this._chapter.text=e[i].toString(),this._vip.skin="assets/icon/ui/vip/txtbg_ch_bg.png"}else this._vip&&(this._vip=this.clearElement(this._vip),this._chapter=this.clearElement(this._chapter),this._level=this.clearElement(this._level))},h.prototype.updateTitle=function(){if(39!==modules.scene.SceneUtil.currScene){var t=this.property.get("desgnation")||0;if(t)if(this._title||(this._title=new Laya.Image,this._layout=null,m.GameCenter.instance.world.publish("addToHUD",this._title)),1e7<=t)this._title.skin="assets/icon/ui/designation_special/"+modules.player_title.PlayerTitleModel.instance.getSpecialTitleSrcById(t)+".png";else{var e=modules.config.DesignationCfg.instance.getCfgById(t);this._title.skin="assets/icon/ui/designation/"+e[2]+".png"}else this._title=this.clearElement(this._title)}},h.prototype.initLabel=function(t,e,i){void 0===t&&(t=20),void 0===e&&(e=2),void 0===i&&(i="#000000");var n=new Laya.Label;return n.fontSize=t,n.font="SimHei",n.stroke=e,n.strokeColor=i,m.GameCenter.instance.world.publish("addToHUD",n),n},h.prototype.initVipLabel=function(t){var e=this.initLabel(t,2,"#9a1515");return e.italic=!0,e.bold=!0,e.color="#ffe270",e},h.prototype.abnormal=function(t){8&t?(null==this._dizzSprite&&(this._dizzSprite=i.instance.loadParticle("assets/particle/XuanYun.lh")),this.property.get("avatar").title.addChild(this._dizzSprite)):null!=this._dizzSprite&&null!=this._dizzSprite.parent&&this._dizzSprite.removeSelf(),16&t?(null==this._silentSprite&&(this._silentSprite=i.instance.loadParticle("assets/particle/GuiLian.lh")),this.property.get("avatar").title.addChild(this._silentSprite)):null!=this._silentSprite&&null!=this._silentSprite.parent&&this._silentSprite.removeSelf(),64&t?(null==this._wudiSprite&&(this._wudiSprite=i.instance.loadParticle("assets/particle/BaoHuZhao.lh")),this.property.get("avatar").addChild(this._wudiSprite)):null!=this._wudiSprite&&null!=this._wudiSprite.parent&&this._wudiSprite.removeSelf()},h.prototype.updateBlue=function(){!(this.property.get("id")===PlayerModel.instance.actorId?!modules.qq.QQModel.instance.isBlueVip&&0===Math.floor(.01*(this.property.get("blueVip")||0)):0===Math.floor(.01*(this.property.get("blueVip")||0)))&&this.property.get("occ")?(this._blue||(this._blue=new modules.qq.QQBlueIcon,this._blue.scale(.8,.8),m.GameCenter.instance.world.publish("addToHUD",this._blue),this._layout=null),0<Math.floor(.01*(this.property.get("blueVip")||0))?this._blue.updateVIP(this.property.get("blueVip")):this.property.get("id")===PlayerModel.instance.actorId&&this._blue.updateSelf()):this._blue=this.clearElement(this._blue)},o=h,e.TitleComponent=o}(game=game||{}),function(t){var e,i,g,y,_,n;function s(t,e,i,n,s){void 0===s&&(s=!1);var o=g.call(this,t)||this;o._babySelectIndex=-1,o._isBabySkillComponent=s;var a=y.instance.cooldowns;o._common=[];for(var r=0,l=e;r<l.length;r++){for(var h=l[r],c=Math.floor(h/1e4),p=!1,u=0,d=a;u<d.length;u++){var m=d[u];if(m[0]==c){o._common.push(m),p=!0;break}}if(!p){var f=[c,0,_.instance.getCfgById(c)[4]];o._common.push(f),a.push(f)}}return o._commonIndex=-1,o._filter=i||function(t){return 1==t[2]&&0==t[3]},o._sorter=n||function(t,e){return t[0]>e[0]?-1:1},o._skills=[],o._onlyCommon=!1,o}e=t.role||(t.role={}),i=e.component||(e.component={}),y=modules.player.PlayerModel,_=modules.config.SkillPureCfg,g=e.RoleComponent,__extends(s,g),Object.defineProperty(s.prototype,"onlyCommon",{get:function(){return this._onlyCommon},set:function(t){this._onlyCommon=t},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this._isBabySkillComponent?(this.updateBabySkill(),GlobalData.dispatcher.on("BABY_ACTIVE_SKILL_SET_UPDATE",this,this.updateBabySkill)):(this.updateSkill(),GlobalData.dispatcher.on("SKILL_INITED",this,this.updateSkill).on("SKILL_UPDATE",this,this.updateSkill))},s.prototype.teardown=function(){GlobalData.dispatcher.off("SKILL_INITED",this,this.updateSkill).off("SKILL_UPDATE",this,this.updateSkill),GlobalData.dispatcher.off("BABY_ACTIVE_SKILL_SET_UPDATE",this,this.updateBabySkill)},s.prototype.destory=function(){},s.prototype.selectSkill=function(){var t=-1;if(this._isBabySkillComponent)t=this.babySelectSkill();else{if(!this._onlyCommon)for(var e=Date.now(),i=0,n=this._skills.length;i<n;++i)if((s=this._skills[i])[1]<e){t=s[0],s[1]=e+s[2];break}if(-1==t&&null!=this._common&&0!=this._common.length)if(-1==this._commonIndex){var s;this._commonIndex=Math.floor(ArrayUtils.randomIndex(this._common)/3),e=Date.now(),(s=this._common[this._commonIndex])[1]<e?(t=s[0],s[1]=e+s[2]):t=-1}else this._commonIndex=++this._commonIndex%this._common.length,t=this._common[this._commonIndex][0];else this._commonIndex=-1}return t},s.prototype.updateSkill=function(){var t=y.instance.skills;if(t){for(var e=y.instance.cooldowns,i=[],n=0,s=t;n<s.length;n++){var o=s[n],a=o[0];if(o[1],null!=this._common){for(var r=!1,l=0,h=this._common;l<h.length;l++)if(h[l][0]==a){r=!0;break}if(r)continue}var c=_.instance.getCfgById(a);if(null!=c&&this._filter(c)){for(var p=!1,u=0,d=e;u<d.length;u++)if((m=d[u])[0]==a){m[2]=c[4],i.push(m),p=!0;break}if(!p){var m=[a,0,c[4]];i.push(m),e.push(m)}}}this._skills=i,this._skills.sort(this._sorter)}},s.prototype.babySelectSkill=function(){var t=-1;if(this._babySkills&&0<this._babySkills.length)for(var e=Date.now(),i=0;i<this._babySkills.length;i++){var n=this._babySkills[i];if(n[1]<e){t=n[0],n[1]=e+n[2];break}}return t},s.prototype.updateBabySkill=function(){var t=modules.baby.BabyModel.instance.activeSkillSetList;if(t){for(var e=y.instance.cooldowns,i=[],n=0;n<t.length;n++){var s=t[n],o=_.instance.getCfgById(s);if(null!=o){for(var a=!1,r=0,l=e;r<l.length;r++)if((h=l[r])[0]==s){h[2]=o[4],i[n]=h,a=!0;break}if(!a){var h=[s,0,o[4]];i[n]=h,e.push(h)}}}this._babySkills=i}},n=s,i.SkillComponent=n}(game=game||{}),function(t){var e,i,a,h,n,r,c,p,s;function o(t,e,i,n,s){void 0===i&&(i=!1),void 0===n&&(n=0),void 0===s&&(s=0);var o=a.call(this,t)||this;return o._walkPath=[],o._next=new r,o._moveStatus=0,o._needSync=e,o._sprint=!1,o._enableSprint=i,o._sprintRadius=n,o._sprintSpeed=s,o._lastDistance=0,o._sprintStart=0,o}e=t.role||(t.role={}),i=e.component||(e.component={}),h=t.map.MapUtils,n=Laya.Point,r=Laya.Vector3,c=utils.MathUtils,p=modules.scene.SceneUtil,a=e.RoleComponent,__extends(o,a),o.prototype.setup=function(){this.owner.on("setCoordinate",this,this.setCoordinate);var t=this.property;this._sprite=t.get("avatar"),this._transform=t.get("transform"),this._speed=t.get("speed")||0,t.on("speed",this,this.updateSpeed)},o.prototype.teardown=function(){this.stop(),this.owner.off("setCoordinate",this,this.setCoordinate),this.property.off("speed",this,this.updateSpeed)},o.prototype.destory=function(){},o.prototype.update=function(){if(0!=this._moveStatus&&0!=this._speed){if(1==this._moveStatus){if(0==this._walkPath.length)return this._sprint&&this.owner.publish("sprint",!1),this._sprint=!1,this._moveStatus=0,void this.owner.publish("moveOver");this._lastDistance=h.calcPathDistance(this._walkPath);var t=this._walkPath.pop();if(this._needSync){var e=this._transform.localPosition,i=h.getPosition(e.x,-e.y);Channel.instance.publish(5242880,[[i.x,i.y],[t.x,t.y],this._sprint,h.currentID||0])}this._next.z=4e3*t.y,h.getRealPosition(t.x,t.y,t),this._next.x=t.x,this._next.y=-t.y,this.directionTo(t.x,-t.y),this._moveStatus=2}if(2==this._moveStatus){e=this._transform.localPosition;var n=this._next.x-e.x,s=this._next.y-e.y,o=Math.sqrt(n*n+s*s);if(this._enableSprint&&!this._sprint&&o+this._lastDistance>this._sprintRadius&&(39!==p.currScene||!modules.fire_contention.FireContentionModel.instance.isMyFire())){this._sprint=!0,this._sprintStart=Date.now();var a=h.getPosition(e.x,-e.y);t=h.getPosition(this._next.x,-this._next.y),Channel.instance.publish(5242880,[[a.x,a.y],[t.x,t.y],this._sprint,h.currentID||0]),this.owner.publish("sprint",!0)}var r=this._speed;this._sprint&&(r=c.lerp(r,this._sprintSpeed,(Date.now()-this._sprintStart)/500));var l=r*Laya.timer.delta/1e3/o;e.reset(c.lerp(e.x,this._next.x,l),c.lerp(e.y,this._next.y,l),c.lerp(e.z,this._next.z,l)),this._transform.localPosition=e,i=h.getPosition(e.x,-e.y),this._sprite.mix=!h.isOpaqueArea(i.x,i.y),1<=l&&(this._moveStatus=1)}}},Object.defineProperty(o.prototype,"enableSprint",{get:function(){return this._enableSprint},set:function(t){this._enableSprint=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"speed",{get:function(){var t=this._speed;return this._sprint&&(t=c.lerp(t,this._sprintSpeed,(Date.now()-this._sprintStart)/500)),t},set:function(t){this._speed=t},enumerable:!0,configurable:!0}),o.prototype.directionTo=function(t,e){var i=this._transform.localPosition;t=i.x-t,e=i.y-e,this._sprite.direction=Math.atan2(e,t)/Math.PI*180+90},o.prototype.updateSpeed=function(){this._speed=this.property.get("speed")||0},o.prototype.testCoordinate=function(t,e){var i=this._transform.localPosition,n=h.getPosition(i.x,-i.y);return t==n.x&&e==n.y},o.prototype.setCoordinate=function(t,e){var i=h.getRealPosition(t,e),n=this._transform.localPosition;n.reset(i.x,-i.y,4e3*e),this._transform.localPosition=n,this._sprite.mix=!h.isOpaqueArea(t,e)},o.prototype.moveTo=function(t,e){this._moveStatus=1,this._walkPath.length=0;var i=this._transform.localPosition;this._needSync?h.findPath(i.x,-i.y,h.getPosition(t,-e),5,0,this._walkPath):this._walkPath.push(h.getPosition(t,-e))},o.prototype.moveToCoordinate=function(t){this._moveStatus=1,this._walkPath.length=0;var e=this._transform.localPosition;this._needSync?h.findPath(e.x,-e.y,t,5,0,this._walkPath):this._walkPath.push(new n(t.x,t.y))},o.prototype.running=function(){return 0!=this._moveStatus},o.prototype.stop=function(){if(0!=this._moveStatus&&this._needSync){var t=this._transform.localPosition,e=h.getPosition(t.x,-t.y);Channel.instance.publish(5242880,[[e.x,e.y],[e.x,e.y],!1,h.currentID||0])}this._moveStatus=0,this._sprint&&this.owner.publish("sprint",!1),this._sprint=!1},o.prototype.farSync=function(){if(this._needSync){var t=this._transform.localPosition,e=h.getPosition(t.x,-t.y);Channel.instance.publish(5242880,[[e.x,e.y],[e.x,e.y],!1,h.currentID||0])}},s=o,i.LocomotorComponent=s}(game=game||{}),function(r){var t,e,n,s,o,l,a,h,i;function c(t,e){void 0===e&&(e=void 0);var i=n.call(this,t)||this;return i.onCombatComplete=function(){i.owner.publish("combatComplete")},i._cooldown=0,i._parentRole=e,i._effectCallback=function(t){t&&(t.removeSelf(),t.destroy(!0))},i}t=r.role||(r.role={}),e=t.component||(t.component={}),s=r.map.MapUtils,o=modules.config.MonsterResCfg,l=modules.config.SkillEffectCfg,a=modules.config.SceneCfg,h=base.particle.ParticlePool,n=t.RoleComponent,__extends(c,n),c.prototype.setup=function(){this._sprite=this.property.get("avatar"),this._transform=this.property.get("transform")},c.prototype.teardown=function(){this.clearTarget()},c.prototype.destory=function(){},Object.defineProperty(c.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),c.prototype.setTarget=function(t){this._target!=t&&(this.clearTarget(),this.testTarget(t)&&(this._target=t,null!=this._target&&(this._target.on("death",this,this.clearTarget),this._target.on("leave",this,this.clearTarget),4===this.property.get("type")&&WindowManager.instance.open(45,t.id))))},c.prototype.clearTarget=function(){if(null!=this._target&&(this._target.off("death",this,this.clearTarget),this._target.off("leave",this,this.clearTarget),this._target=null,4===this.property.get("type"))){var t=a.instance.getCfgById(s.currentID)[7];(40!==t&&52!==t||1024!==this.property.get("status")&&!this.property.get("isUnseen"))&&WindowManager.instance.close(45),43===t&&1024===this.property.get("status")&&(WindowManager.instance.close(616),console.log("主角死亡1 仙盟争霸 关闭采集血条")),56===t&&1024===this.property.get("status")&&(WindowManager.instance.close(616),console.log("主角死亡1 战队逐鹿 关闭采集血条"))}},c.prototype.isValidTarget=function(){return this.testTarget(this._target)},c.prototype.testTarget=function(t){if(null==t||!t.isValid)return!1;if(1024==t.property.get("status"))return!1;if(t.property.get("isUnseen"))return!1;if(64&(t.property.get("actorState")||0))return!1;if(t.id==this.owner.id)return!1;var e=a.instance.getCfgById(s.currentID)[7];return(31!=e&&12!=e&&35!==e&&37!==e&&47!==e&&49!==e&&43!==e&&57!==e||!this.owner.property.get("factionId")||t.property.get("factionId")!=this.owner.property.get("factionId"))&&(35!==e&&47!==e&&49!==e&&51!==e||!this.owner.property.get("teamId")||!t.property.get("teamId")||this.owner.property.get("teamId")!==t.property.get("teamId"))&&(39!==e&&56!==e||this.owner.property.get("warbandId")!==t.property.get("warbandId"))},c.prototype.isValidRange=function(){if(!this.isValidTarget())return!1;var t=250;56===a.instance.getCfgById(s.currentID)[7]&&(t=80);var e=this.target.property;1==e.get("type")&&(t=o.instance.getMonsterRadius(e.get("occ")));var i=this._transform.localPosition,n=e.get("transform").position;return s.testDistance(i.x,i.y,n.x,n.y,t)},c.prototype.directionTo=function(t,e){var i=this._transform.localPosition;t=i.x-t,e=i.y-e,this._sprite.direction=Math.atan2(e,t)/Math.PI*180+90},c.prototype.isCooldown=function(){return null!=this._tween&&100<this._tween.duration?this._tween.isPlaying:this._cooldown>Date.now()},c.prototype.combat=function(t){if(-1!=t&&this.isValidTarget()){var e=l.instance.getCfgById(1e4*t);if(null==e)throw new Error("不存在的技能："+t);this._tween=this._sprite.getActionTween(""==e[5]?"attack":e[5]).onComplete(this.onCombatComplete).start();var i=this._target.property.get("transform").localPosition;this.directionTo(i.x,i.y),this._target.publish("strike",this.owner,t);var n=r.GameCenter.instance.world;if(Math.floor(100*Math.random())<e[2]&&n.publish("shakeCamera",!0,e[3]),!GlobalData.getNoEff(this.property)||4!=this.property.get("type")&&!this.property.get("syncNoEffect")&&!GlobalData.noEff&&3703==t){var s=e[7];if(null!=s&&""!=s&&n.publish("launchEffect",0,"assets/particle/"+s+".lh",this._transform.localPosition,1==e[6]?this._sprite.direction:0),null!=(s=e[8])&&""!=s&&n.publish("launchEffect",1,"assets/particle/"+s+".lh",this._transform.localPosition,1==e[6]?this._sprite.direction:0),null!=(s=e[9])&&""!=s&&n.publish("launchEffect",0,"assets/particle/"+s+".lh",i,0),null!=(s=e[10])&&""!=s&&n.publish("launchEffect",1,"assets/particle/"+s+".lh",i,0),this._parentRole){var o=e[13];if(null!=o&&""!=o){var a=h.instance.loadParticle("assets/particle/"+o+".lh");this._parentRole.property.get("avatar").addChild(a),a.name="particle_parentFb",a.timerOnce(5e3,a,this._effectCallback,[a])}null!=(o=e[14])&&""!=o&&(a=h.instance.loadParticle("assets/particle/"+o+".lh"),this._parentRole.property.get("avatar").addChild(a),a.name="particle_parentBg",a.timerOnce(5e3,a,this._effectCallback,[a]))}null!=(s=e[11])&&""!=s&&n.publish("launchEffect",2,"assets/particle/"+s+".lh",this._transform.localPosition,this._sprite.direction)}this._cooldown=Date.now()+500,this.owner.publish("useSkill",this._target.id,t)}},i=c,e.CombatComponent=i}(game=game||{}),function(t){var e,i;e=t.ai||(t.ai={}),function(t){var e=(i.prototype.check=function(){return!0},i.prototype.reset=function(){},i);function i(){}t.ConditionTRUE=e;var n=(s.prototype.check=function(){return!1},s.prototype.reset=function(){},s);function s(){}t.ConditionFALSE=n;var o=(a.prototype.check=function(){return!this._lhs.check()},a.prototype.reset=function(){this._lhs.reset()},a);function a(t){this._lhs=t}t.ConditionNOT=o;var r=(l.prototype.check=function(){return this._lhs.check()&&this._rhs.check()},l.prototype.reset=function(){this._lhs.reset(),this._rhs.reset()},l);function l(t,e){this._lhs=t,this._rhs=e}t.ConditionAND=r;var h=(c.prototype.check=function(){return this._lhs.check()||this._rhs.check()},c.prototype.reset=function(){this._lhs.reset(),this._rhs.reset()},c);function c(t,e){this._lhs=t,this._rhs=e}t.ConditionOR=h;var p=(u.prototype.check=function(){return this._lhs.check()!=this._rhs.check()},u.prototype.reset=function(){this._lhs.reset(),this._rhs.reset()},u);function u(t,e){this._lhs=t,this._rhs=e}t.ConditionXOR=p;var d=(m.prototype.check=function(){return this._isTrigger},m.prototype.trigger=function(t){(this._lock||this._isTrigger)&&this._priority<t||(this._isTrigger=!0,this._priority=t,this._lock=!1)},m.prototype.lock=function(){this._lock=!0,this._isTrigger=!1},m.prototype.free=function(){this._lock=!1,this._isTrigger||(this._priority=Number.POSITIVE_INFINITY)},m.prototype.step=function(){this._lock||this.reset()},m.prototype.reset=function(){this._isTrigger=!1,this._priority=Number.POSITIVE_INFINITY,this._lock=!1},Object.defineProperty(m.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),m);function m(){this._isTrigger=!1,this._priority=Number.POSITIVE_INFINITY,this._lock=!1}t.Interrupt=d}((i=e.behavior||(e.behavior={})).condition||(i.condition={}))}(game=game||{}),function(t){var e,i,n;function s(t){this._root=t}e=t.ai||(t.ai={}),i=e.behavior||(e.behavior={}),s.create=function(t){return new s(t)},s.prototype.run=function(){if(null==this._runningNode)this._root.reset(),this._root.execute(this,3);else{var t=this._runningNode;this._runningNode=null;var e=3;do{if(3==(e=t.execute(this,e)))return;t=t.parent}while(null!=t)}},s.prototype.abort=function(){if(null!=this._runningNode){var t=this._runningNode;for(this._runningNode=null;t.abort(),null!=(t=t.parent););}},s.prototype.reset=function(){if(null!=this._runningNode){var t=this._runningNode;for(this._runningNode=null;t.reset(),null!=(t=t.parent););}},s.prototype.setRunningNode=function(t){null!=t?null!=this._runningNode&&!t.force||(this._runningNode=t):this._runningNode=null},n=s,i.BehaviorTree=n}(game=game||{}),function(t){var e,i,n;function s(t){this._parent=null,this._status=0,this._force=!1,this._name=t}e=t.ai||(t.ai={}),i=e.behavior||(e.behavior={}),Object.defineProperty(s.prototype,"force",{get:function(){return this._force},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),s.prototype.setParent=function(t){this._parent=t},s.prototype.execute=function(t,e){return 0==this._status&&(this._status=this.onEnter()?3:2),3==this._status&&(this._status=this.onUpdate(t,e),3!=this._status?(this.onExit(),t.setRunningNode(null)):t.setRunningNode(this)),this._status},s.prototype.onEnter=function(){return!0},s.prototype.onUpdate=function(t,e){return 1},s.prototype.onExit=function(){},s.prototype.executeNode=function(t,e,i){return 1==i||2==i?i:e.execute(t,3)},s.prototype.reset=function(){3==this._status&&this.onExit(),this._status=0},s.prototype.abort=function(){3==this._status&&this.onExit(),this._status=2},n=s,i.BehaviorNode=n}(game=game||{}),function(t){var e,k;e=t.ai||(t.ai={}),function(t){var i,e=utils.ArrayUtils,n=(i=k.BehaviorNode,__extends(s,i),s.prototype.addChild=function(t){return-1!=this._children.indexOf(t)||(this._children.push(t),t.setParent(this)),this},s.prototype.onEnter=function(){return 0!=this._children.length},s.prototype.onExit=function(){this._activeChildIndex=0},s.prototype.reset=function(){3==this._status&&(this._children[this._activeChildIndex].reset(),this._activeChildIndex=0),this._status=0},s.prototype.abort=function(){3==this._status&&(this._children[this._activeChildIndex].abort(),this._activeChildIndex=0),this._status=2},s);function s(t){var e=i.call(this,t)||this;return e._activeChildIndex=0,e._children=new Array,e}t.Composite=n;var o,a=(o=n,__extends(r,o),r.prototype.addChild=function(t){throw new Error("If not support addChild!")},r.prototype.onEnter=function(){return 2==this._children.length},r.prototype.onUpdate=function(t,e){var i=this.executeNode(t,this._children[this._activeChildIndex],e);return 3!=i&&this._children[this._activeChildIndex].reset(),0==this._activeChildIndex&&1==i&&(this._activeChildIndex=1,i=3),i},r);function r(t,e){var i=o.call(this,"If")||this;return i.addChild(t),i.addChild(e),i}t.If=a;var l,h=(l=n,__extends(c,l),c.prototype.addChild=function(t){throw new Error("IfElse not support addChild!")},c.prototype.onEnter=function(){return 3==this._children.length},c.prototype.onUpdate=function(t,e){var i=this.executeNode(t,this._children[this._activeChildIndex],e);return 3!=i&&this._children[this._activeChildIndex].reset(),0==this._activeChildIndex&&3!=i&&(this._activeChildIndex=1==i?1:2,i=3),i},c);function c(t,e,i){var n=l.call(this,"IfElse")||this;return n.addChild(t),n.addChild(e),n.addChild(i),n}t.IfElse=h;var p,u=(p=n,__extends(d,p),d.prototype.onUpdate=function(t,e){do{var i=this.executeNode(t,this._children[this._activeChildIndex],e);if(3!=i&&this._children[this._activeChildIndex].reset(),1!=i)return i;this._activeChildIndex++,e=3}while(this._activeChildIndex<this._children.length);return 1},d);function d(){return p.call(this,"Sequence")||this}t.Sequence=u;var m,f=(m=u,__extends(g,m),g.prototype.onEnter=function(){return!!m.prototype.onEnter.call(this)&&(e.disturb(this._children),!0)},g);function g(){var t=m.call(this)||this;return t._name="RandomSequence",t}t.RandomSequence=f;var y,_=(y=n,__extends(v,y),v.prototype.onUpdate=function(t,e){do{var i=this.executeNode(t,this._children[this._activeChildIndex],e);if(3!=i&&this._children[this._activeChildIndex].reset(),2!=i)return i;this._activeChildIndex++,e=3}while(this._activeChildIndex<this._children.length);return 2},v);function v(){return y.call(this,"Selector")||this}t.Selector=_;var I,b=(I=_,__extends(C,I),C.prototype.onEnter=function(){return!!I.prototype.onEnter.call(this)&&(e.disturb(this._children),!0)},C);function C(){var t=I.call(this)||this;return t._name="RandomSelector",t}t.RandomSelector=b;var T,w=(T=n,__extends(x,T),x.prototype.onEnter=function(){return!!T.prototype.onEnter.call(this)&&(this._activeChildIndex=-1,!0)},x.prototype.onUpdate=function(t,e){if(-1!=this._activeChildIndex&&(3!=(s=this._children[this._activeChildIndex].execute(t,e))&&this._children[this._activeChildIndex].reset(),2!=s))return s;for(var i=0,n=this._children.length;i<n;++i){var s;if(3!=(s=this._children[i].execute(t,3))&&this._children[i].reset(),2!=s)return this._activeChildIndex=i,s}return 2},x);function x(){return T.call(this,"PrioritySelector")||this}t.PrioritySelector=w;var B,P=(B=n,__extends(S,B),S.prototype.onEnter=function(){return!!B.prototype.onEnter.call(this)&&(this._activeChildIndex=-1,!0)},S.prototype.onUpdate=function(t,e){this._interrupt.check()&&(-1!=this._activeChildIndex&&this._children[this._activeChildIndex].reset(),this._activeChildIndex=-1);var i=2;if(-1!=this._activeChildIndex&&3!=(i=this._children[this._activeChildIndex].execute(t,e))&&this._children[this._activeChildIndex].reset(),2==i)for(var n=0,s=this._children.length;n<s;++n)if(3!=(i=this._children[n].execute(t,3))&&this._children[n].reset(),2!=i){this._activeChildIndex=n;break}return this._interrupt.step(),i},S.prototype.reset=function(){3==this._status&&(-1!=this._activeChildIndex&&this._children[this._activeChildIndex].reset(),this._activeChildIndex=-1),this._status=0},S.prototype.abort=function(){3==this._status&&(-1!=this._activeChildIndex&&this._children[this._activeChildIndex].abort(),this._activeChildIndex=-1),this._status=2},S);function S(t){var e=B.call(this,"SelectorMonitor")||this;return e._force=!0,t.reset(),e._interrupt=t,e}t.SelectorMonitor=P;var A,M=(A=n,__extends(E,A),E.prototype.onUpdate=function(t,e){for(var i=this._children.length,n=0,s=0;s<i;++s){var o=this._children[s],a=o.status;if(1!=a&&2!=a&&(a=o.execute(t,3)),2==a)return 2;1==a&&n++}return n==i?1:3},E.prototype.onExit=function(){for(var t=0,e=this._children.length;t<e;++t)this._children[t].reset()},E.prototype.reset=function(){if(3==this._status)for(var t=0,e=this._children.length;t<e;++t)this._children[t].reset();this._status=0},E.prototype.abort=function(){if(3==this._status)for(var t=0,e=this._children.length;t<e;++t)this._children[t].abort();this._status=2},E);function E(){var t=A.call(this,"Paraller")||this;return t._force=!0,t}t.Paraller=M;var R,D=(R=M,__extends(L,R),L.prototype.onUpdate=function(t,e){for(var i=this._children.length,n=0,s=0;s<i;++s){var o=this._children[s],a=o.status;if(1!=a&&2!=a&&1==(a=o.execute(t,3)))return 1;2==a&&n++}return n==i?2:3},L);function L(){var t=R.call(this)||this;return t._name="ParallelSelector",t._force=!0,t}t.ParallelSelector=D}((k=e.behavior||(e.behavior={})).composite||(k.composite={}))}(game=game||{}),function(t){var e;(function(t){var e,i=(e=t.BehaviorNode,__extends(n,e),n);function n(){return null!==e&&e.apply(this,arguments)||this}t.Action=i;var s,o=(s=t.BehaviorNode,__extends(a,s),a.prototype.onUpdate=function(){return 1},a);function a(){return s.call(this,"Noop")||this}t.Noop=o;var r,l=(r=t.BehaviorNode,__extends(h,r),h.prototype.onEnter=function(){return this._timeout=Date.now()+this._interval,!0},h.prototype.onUpdate=function(){return Date.now()>this._timeout?3:1},h);function h(t){var e=r.call(this,"Wait")||this;return e._interval=t,e}t.Wait=l;var c,p=(c=t.BehaviorNode,__extends(u,c),u.prototype.onEnter=function(){return!(this._count=0)},u.prototype.onUpdate=function(){return++this._count<this._frameCount?3:1},u);function u(t){var e=c.call(this,"WaitFrames")||this;return e._frameCount=t,e}t.WaitFrames=p})((e=t.ai||(t.ai={})).behavior||(e.behavior={}))}(game=game||{}),function(t){var e,S;e=t.ai||(t.ai={}),function(t){var n,e=(n=S.BehaviorNode,__extends(i,n),i.prototype.onExit=function(){this._node.reset()},i);function i(t,e){var i=n.call(this,e)||this;return i._node=t,i._node.setParent(i),i}t.Decorator=e;var s,o=(s=e,__extends(a,s),a.prototype.onEnter=function(){return!(!this._interrupt.check()||this._interrupt.priority!=this._priority||(this._interrupt.lock(),0))},a.prototype.onUpdate=function(t,e){return this.executeNode(t,this._node,e)},a.prototype.onExit=function(){s.prototype.onExit.call(this),this._interrupt.free()},a);function a(t,e,i){var n=s.call(this,t,"EventNode")||this;return n._interrupt=e,n._priority=i,n}t.EventNode=o;var r,l=(r=e,__extends(h,r),h.prototype.onUpdate=function(t,e){return 3!=this.executeNode(t,this._node,e)?2:3},h);function h(t){return r.call(this,t,"AlwaysFailure")||this}t.AlwaysFailure=l;var c,p=(c=e,__extends(u,c),u.prototype.onUpdate=function(t,e){return 3!=this.executeNode(t,this._node,e)?1:3},u);function u(t){return c.call(this,t,"AlwaysSuccess")||this}t.AlwaysSuccess=p;var d,m=(d=e,__extends(f,d),f.prototype.onUpdate=function(t,e){return 2==this.executeNode(t,this._node,e)?1:3},f);function f(t){return d.call(this,t,"UntilFailure")||this}t.UntilFailure=m;var g,y=(g=e,__extends(_,g),_.prototype.onUpdate=function(t,e){return 1==this.executeNode(t,this._node,e)?1:3},_);function _(t){return g.call(this,t,"UntilSuccess")||this}t.UntilSuccess=y;var v,I=(v=e,__extends(b,v),b.prototype.onUpdate=function(t,e){var i=this.executeNode(t,this._node,e);return 1==i?i=2:2==i&&(i=1),i},b);function b(t){return v.call(this,t,"Inverter")||this}t.Inverter=I;var C,T=(C=e,__extends(w,C),w.prototype.onEnter=function(){return!!C.prototype.onEnter.call(this)&&!(this._count=0)},w.prototype.onUpdate=function(t,e){if(this._count<this._limit){var i=this.executeNode(t,this._node,e);if(1!=i)return i;this._node.reset(),++this._count}return this._count<this._limit?3:1},w);function w(t,e){var i=C.call(this,t,"Repeater")||this;return i._limit=e,i._count=0,i}t.Repeater=T;var x,B=(x=e,__extends(P,x),P);function P(t,e){return x.call(this,e,"While")||this}t.While=B}((S=e.behavior||(e.behavior={})).decorator||(S.decorator={}))}(game=game||{}),function(t){var e,i,n,s,o,a,r,l,h,c,p,u;function d(t){var e=o.call(this,"DeathAction")||this;return e._waitRevive=!1,e._context=t.property,e._owner=t,e}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),s=n.behavior||(n.behavior={}),a=t.ai.behavior.Action,r=t.map.MapUtils,l=modules.config.SceneCfg,h=modules.player.PlayerModel,c=modules.nine.NineModel,p=modules.scene.SceneModel,o=a,__extends(d,o),d.prototype.onEnter=function(){var t=1024==this._context.get("status");if(t){this._owner.on("reviveReply",this,this.reviveReply);var e=l.instance.getCfgById(r.currentID),i=e[8],n=e[7];12===n||31===n||36===n||35===n||39===n||41===n||47===n||49===n?WindowManager.instance.isOpened(82)||WindowManager.instance.openDialog(82,h.instance.playerDeadTuple):14===n?0<c.instance.nineCopy[0]&&WindowManager.instance.open(164,h.instance.playerDeadTuple):24===n||p.instance.isInMission||40===n||45===n||51===n||52===n||(i?(WindowManager.instance.openDialog(52,h.instance.playerDeadTuple),43!==n&&56!==n||(WindowManager.instance.close(616),console.log("主角死亡 仙盟争霸/战队逐鹿 关闭采集血条"))):Channel.instance.publish(5242881,null)),this._waitRevive=!0,this._context.get("avatar").getActionTween("dead").start()}return t},d.prototype.onUpdate=function(){return this._waitRevive?3:1},d.prototype.onExit=function(){this._waitRevive=!1,this._owner.off("reviveReply",this,this.reviveReply)},d.prototype.reviveReply=function(t){0==t&&(this._context.set("status",1),this._waitRevive=!1)},u=d,s.DeathAction=u}(game=game||{}),function(t){var e,i,n,s,o,a,r;function l(t){var e=o.call(this,"AbnormalAction")||this;return e._locomotor=t.getComponent(i.LocomotorComponent),e._context=t.property,e}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),s=n.behavior||(n.behavior={}),a=t.ai.behavior.Action,o=a,__extends(l,o),l.prototype.onEnter=function(){return!!(8&(this._context.get("actorState")||0))&&(this._context.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),!0)},l.prototype.onUpdate=function(){return 0!=(8&(this._context.get("actorState")||0))?3:1},l.prototype.onExit=function(){},r=l,s.AbnormalAction=r}(game=game||{}),function(t){var e,i,n,s,o,a,r;function l(t,e,i,n){void 0===n&&(n=0);var s=o.call(this,"RestAction")||this;return s._restTime=e,s._timeout=0,s._isOver=!1,s._reuse=i,s._rate=n,s._sprite=t.property.get("avatar"),s}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),s=n.behavior||(n.behavior={}),a=t.ai.behavior.Action,o=a,__extends(l,o),l.prototype.onEnter=function(){var t=this;if(!this._reuse&&this._isOver)return!1;if(this._timeout=Date.now()+this._restTime,0===this._rate)this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start();else{var e=this._sprite.currentClipTween;e&&"xiuxian"===this._sprite.currentClipName&&e.isPlaying||(Math.random()<this._rate?this._sprite.getActionTween("xiuxian").onComplete(function(){t._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()}).start():this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start())}return!0},l.prototype.onUpdate=function(){return Date.now()<this._timeout?3:1},l.prototype.onExit=function(){this._isOver=!0},r=l,s.RestAction=r}(game=game||{}),function(i){var t,n,e,s,o,a,r,l;function h(t,e){void 0===e&&(e=0);var i=o.call(this,"MoveToBoss")||this;return i._property=t.property,i._locomotor=t.getComponent(n.LocomotorComponent),i._delay=e,i._timeout=0,i}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),s=e.behavior||(e.behavior={}),a=i.ai.behavior.Action,r=i.map.MapUtils,o=a,__extends(h,o),h.prototype.onEnter=function(){var t=1==this._property.get("moveType");if(t){this._step=0;var e=this._property.get("desPos"),i=r.nearbyPathNode(e);if(this._property.set("spawnpoint",i[0]),-1==i[0])return!1;this._locomotor.moveToCoordinate(i[1]);var n=this._property.get("avatar");n.getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return t},h.prototype.onUpdate=function(){switch(this._step){case 0:this._locomotor.running()||(this._property.set("moveType",0),Channel.instance.publish(5242887,null),this._step=1,this._property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start());break;case 1:var t=this._property.get("desPos"),e=r.getRealPosition(t.x,t.y);this._target=i.GameCenter.instance.findNearbyRole(e.x,-e.y,1e3,1),null!=this._target&&(this._step=2,4096==this._target.property.get("status")&&(this._locomotor.owner.publish("visible",!1),i.GameCenter.instance.world.publish("follow",this._target.getComponent(n.LocomotorComponent),!1)));break;case 2:4096==this._target.property.get("status")&&this._target.isValid||(this._step=3,this._timeout=Date.now()+this._delay,this._locomotor.owner.publish("visible",!0),i.GameCenter.instance.world.publish("follow",this._locomotor,!0));break;case 3:if(this._timeout<Date.now())return 1}return 3},h.prototype.onExit=function(){this._locomotor.owner.publish("visible",!0),i.GameCenter.instance.world.publish("follow",this._locomotor,!1),this._timeout=0,this._target=null,this._locomotor.stop()},l=h,s.MoveToBoss=l}(game=game||{}),function(e){var t,n,i,s,o,a,r,l;function h(t,e){var i=o.call(this,"ChaseAndAttack")||this;return i._transform=t.property.get("transform"),i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._radius=e,i}t=e.role||(e.role={}),n=t.component||(t.component={}),i=n.brain||(n.brain={}),s=i.behavior||(i.behavior={}),a=e.ai.behavior.Action,r=e.map.MapUtils,o=a,__extends(h,o),h.prototype.onEnter=function(){return 1==PlayerModel.instance.selectTargetType},h.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(1!=PlayerModel.instance.selectTargetType)return 2;if(this._combat.isValidTarget()){var t=this._transform.localPosition,e=this._combat.target.property.get("transform").localPosition;if(!r.testDistance(t.x,t.y,e.x,e.y,this._radius)){if(i=this.getTarget(),!this._combat.testTarget(i))return WindowManager.instance.close(45),2;this._combat.setTarget(i)}}else{var i=this.getTarget();if(!this._combat.testTarget(i))return 2;this._combat.setTarget(i)}if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){e=this._combat.target.property.get("transform").localPosition,this._locomotor.moveTo(e.x,e.y);var n=this._locomotor.property.get("avatar");n.getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return 3},h.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null)},h.prototype.getTarget=function(){var t=this._transform.localPosition;return e.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1)},l=h,s.ChaseAndAttack=l}(game=game||{}),function(t){var e,s,i,n,o,a,r,l,h;function c(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1);var n=o.call(this,"MoveToSpawnpoint")||this;return n._context=t.property,n._locomotor=t.getComponent(s.LocomotorComponent),n._finish=new l,n._delay=e,n._timeout=0,n._auto=i,n}e=t.role||(t.role={}),s=e.component||(e.component={}),i=s.brain||(s.brain={}),n=i.behavior||(i.behavior={}),a=t.ai.behavior.Action,r=t.map.MapUtils,l=Laya.Point,o=a,__extends(c,o),c.prototype.onEnter=function(){return this.setSpawnpointPath()},c.prototype.onUpdate=function(){return!this._locomotor.running()&&(0==this._timeout&&0!=this._delay&&(this._context.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this._timeout=Date.now()+this._delay),this._timeout<Date.now())?1:3},c.prototype.onExit=function(){this._timeout=0,this._locomotor.stop()},c.prototype.setSpawnpointPath=function(){var t=this._context.get("transform").localPosition,e=this._auto?r.nearbyPathIdNode(r.getPosition(t.x,-t.y))[0]:r.nearbyPathNode(r.getPosition(t.x,-t.y))[0];if(-1==e)return this._context.set("spawnpoint",-1),!1;var i=r.findNextPathNode(e);if(null==i)return this._context.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),!1;this._context.set("spawnpoint",i[0]),this._locomotor.moveToCoordinate(i[1]),this._finish.x=i[1].x,this._finish.y=i[1].y;var n=this._context.get("avatar");return n.getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),!0},h=c,n.MoveToSpawnpoint=h}(game=game||{}),function(t){var e,i,n,s,o,a,r;function l(t){var e=o.call(this,"Rest")||this;return e._sprite=t.property.get("avatar"),e._model=PlayerModel.instance,e}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),s=n.behavior||(n.behavior={}),a=t.ai.behavior.Action,o=a,__extends(l,o),l.prototype.onEnter=function(){return 0==this._model.selectTargetType&&(this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),!0)},l.prototype.onUpdate=function(){return 0==this._model.selectTargetType?3:1},r=l,s.Rest=r}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d,m,f,g,y;function _(t){var e=s.call(this,t)||this;e._interrupt=new r;var i=h.instance.getCfgById(l.currentID);return e._tree=o.create(new a(e._interrupt).addChild(new f(new c(t),e._interrupt,0)).addChild(new f(new p(t),e._interrupt,2)).addChild(new g(t)).addChild(new u(t,500)).addChild(new d(t,0==i[7]?500:Number.POSITIVE_INFINITY)).addChild(new m(t,200))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.map.MapUtils,h=modules.config.SceneCfg,c=i.role.component.brain.behavior.DeathAction,p=i.role.component.brain.behavior.AbnormalAction,u=i.role.component.brain.behavior.MoveToBoss,d=i.role.component.brain.behavior.ChaseAndAttack,m=i.role.component.brain.behavior.MoveToSpawnpoint,f=i.ai.behavior.decorator.EventNode,g=i.role.component.brain.behavior.Rest,s=t.RoleComponent,__extends(_,s),_.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("MISSION_MOVE_POS_UPDATE",this,this.onPosUpdate),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},_.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("MISSION_MOVE_POS_UPDATE",this,this.onPosUpdate),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},_.prototype.destory=function(){},_.prototype.update=function(){this._tree.run()},_.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},_.prototype.interrupt=function(t){1024==t&&this._interrupt.trigger(0)},_.prototype.onTargetChange=function(){this._interrupt.trigger(4)},_.prototype.onPosUpdate=function(){this._interrupt.trigger(3)},_.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},y=_,e.HumanBrainComponent=y}(game=game||{}),function(i){var t,n,e,s,o,a,r;function l(t,e){var i=o.call(this,"PlayerChaseAndAttack")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),s=e.behavior||(e.behavior={}),a=i.ai.behavior.Action,o=a,__extends(l,o),l.prototype.onEnter=function(){return 2==this._model.selectTargetType},l.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(2!=this._model.selectTargetType)return 2;if(!this._combat.isValidTarget()&&(this.setTarget(),!this._combat.isValidTarget()))return 2;if(this._combat.isValidRange())return this._locomotor.stop(),this._combat.combat(this._skill.selectSkill()),3;if(!this._locomotor.running()){var t=this._combat.target.property.get("transform").localPosition,e=this._locomotor.property.get("avatar");e.getActionTween(0==e.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(t.x,t.y)}return 3},l.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null)},l.prototype.setTarget=function(){var t;if(-1!=this._model.selectTargetId)t=i.GameCenter.instance.getRole(this._model.selectTargetId);else{var e=this._transform.localPosition;t=i.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,3)}this._combat.testTarget(t)?this._combat.setTarget(t):this._combat.setTarget(null)},r=l,s.PlayerChaseAndAttack=r}(game=game||{}),function(o){var t,a,e,i,r,n,l,h,s;function c(t,e,i,n){var s=r.call(this,"BossChaseAndAttack")||this;return s._combat=t.getComponent(a.CombatComponent),s._locomotor=t.getComponent(a.LocomotorComponent),s._skill=t.getComponent(a.SkillComponent),s._transform=t.property.get("transform"),s._radius=e,s._model=PlayerModel.instance,s._step=0,s._selectTargetPos=i,s._getBossOnwer=n,s}t=o.role||(o.role={}),a=t.component||(t.component={}),e=a.brain||(a.brain={}),i=e.behavior||(e.behavior={}),n=o.ai.behavior.Action,l=o.map.MapUtils,h=Laya.Point,r=n,__extends(c,r),c.prototype.onEnter=function(){return 1==this._model.selectTargetType&&-1!=this._model.selectTargetId&&(this._combat.owner.on("hurt",this,this.toRevenge),!0)},c.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(1!=this._model.selectTargetType||-1==this._model.selectTargetId)return 2;switch(this._step){case 0:if(this.isValidRadius(this._transform)){var t=this.getTarget();if(this._combat.testTarget(t))this.enterAttackToBoss(t);else if(3!=this.gotoStatus())return 2}break;case 2:this._combat.isValidTarget()?this.tryGoHome():(t=this.getTarget(),this._combat.testTarget(t)?this.enterAttackToBoss(t):this.enterMoveToSpawnpoint());break;case 1:this._combat.isValidTarget()||(this.enterMoveToSpawnpoint(),WindowManager.instance.close(45))}switch(this._step){case 0:if(!this._locomotor.running()){if(!(s=this._selectTargetPos()))return 3;var e=new(h.bind.apply(h,[void 0].concat(s))),i=l.nearbyPathNode(e);if(-1==i[0])return 2;e=i[1],this._locomotor.running()||((n=this._locomotor.property.get("avatar")).getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(e))}break;case 2:case 1:if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var n,s=this._combat.target.property.get("transform").localPosition;(n=this._locomotor.property.get("avatar")).getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(s.x,s.y)}}return 3},c.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,this._combat.owner.off("hurt",this,this.toRevenge)},c.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0},c.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=1},c.prototype.tryGoHome=function(){if(this.isValidRadius(this._transform))return!1;var t=this.getTarget();return this._combat.testTarget(t)?this.enterAttackToBoss(t):this.enterMoveToSpawnpoint(),!0},c.prototype.gotoStatus=function(){var t=this._selectTargetPos();if(!t)return 2;var e=new(h.bind.apply(h,[void 0].concat(t))),i=l.nearbyPathNode(e);return-1==i[0]?2:(e=i[1],this._locomotor.testCoordinate(e.x,e.y)?1:3)},c.prototype.isValidRadius=function(t){var e=this._selectTargetPos();if(!e)return!1;var i=l.getRealPosition(e[0],e[1]),n=t.localPosition;return l.testDistance(i.x,-i.y,n.x,n.y,this._radius)},c.prototype.getTarget=function(){var t=this._transform.localPosition;return o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,this._model.selectTargetId)},c.prototype.toRevenge=function(t,e,i,n){if(1==this._step){var s=o.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&(this._combat.setTarget(s),this._locomotor.stop(),this._step=2)}},s=c,i.BossChaseAndAttack=s}(game=game||{}),function(o){var t,s,e,i,a,n,r;function l(t,e,i){void 0===i&&(i=null);var n=a.call(this,"RevengeAction")||this;return n._combat=t.getComponent(s.CombatComponent),n._locomotor=t.getComponent(s.LocomotorComponent),n._skill=t.getComponent(s.SkillComponent),n._transform=t.property.get("transform"),n._sprite=t.property.get("avatar"),n._timeout=0,n._restTime=e,n._checkForbidden=i,n}t=o.role||(o.role={}),s=t.component||(t.component={}),e=s.brain||(s.brain={}),i=e.behavior||(e.behavior={}),n=o.ai.behavior.Action,a=n,__extends(l,a),l.prototype.onEnter=function(){var t=this._combat.owner;return t.on("hurt",this,this.setTarget),this._timeout=Date.now()+this._restTime,this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this.setTarget(t.property.get("lastEnemy")||0,0,0,0),!0},l.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(this._combat.isValidTarget())this.tryCombat();else{if(this._restTime<Date.now())return 1;this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()}return 3},l.prototype.onExit=function(){this._combat.owner.off("hurt",this,this.setTarget),this._locomotor.stop(),this._combat.setTarget(null)},l.prototype.setTarget=function(t,e,i,n){if(!(this._combat.isValidTarget()||this._checkForbidden&&this._checkForbidden())){var s=o.GameCenter.instance.getRole(t);this._combat.testTarget(s)?this._combat.setTarget(s):this._combat.setTarget(null)}},l.prototype.tryCombat=function(){if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var t=this._combat.target.property.get("transform").localPosition;this._sprite.getActionTween(0==this._sprite.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(t.x,t.y)}},r=l,i.RevengeAction=r}(game=game||{}),function(n){var t,i,e,s,o,a,r,l,h,c;function p(t,e){void 0===e&&(e=!1);var n=o.call(this,"NpcTriggerAction")||this;return n._locomotor=t.getComponent(i.LocomotorComponent),n._transform=t.property.get("transform"),n._model=PlayerModel.instance,n._target=null,n._search=e,n._context=t.property,n._filter=function(t){var e=t.property;if(e.get("occ")!=n._model.selectTargetId)return!1;var i=e.get("own")||0;return 0==i||i==n._context.get("id")},n}t=n.role||(n.role={}),i=t.component||(t.component={}),e=i.brain||(i.brain={}),s=e.behavior||(e.behavior={}),a=n.ai.behavior.Action,r=n.map.MapUtils,l=modules.config.NpcCfg,h=Laya.Point,o=a,__extends(p,o),p.prototype.onEnter=function(){return 3==this._model.selectTargetType},p.prototype.onUpdate=function(){if(3!=this._model.selectTargetType)return 2;if(null==this._target){var t=this._transform.localPosition;if(this._target=n.GameCenter.instance.filterNearbyRole(t.x,t.y,Number.POSITIVE_INFINITY,6,this._filter),null==this._target)return this.trySearch()?3:2;this._target.property.on("own",this,this.updateOwn)}if(this.tryTrigger())return 1;if(!this._locomotor.running()){var e=this._target.property.get("transform").localPosition,i=this._locomotor.property.get("avatar");i.getActionTween(0==i.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(e.x,e.y)}return 3},p.prototype.onExit=function(){this._target&&this._target.property.off("own",this,this.updateOwn),this._target=null,this._locomotor.stop()},p.prototype.trySearch=function(){var t;if(this._search){var e=this._context.get("transform").localPosition,i=r.nearbyPathNode(r.getPosition(e.x,-e.y))[0];if(-1==i)return this._context.set("spawnpoint",-1),!1;var n=r.findNextPathNode(i);if(null==n)return!1;this._context.set("spawnpoint",n[0]),t=n[1]}else{var s=l.instance.getCfgById(this._model.selectTargetId);if(null==s)return!1;if(null==(e=s[2]))return!1;t=new(h.bind.apply(h,[void 0].concat(e)))}if(!this._locomotor.running()){var o=this._locomotor.property.get("avatar");o.getActionTween(0==o.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(t)}return!0},p.prototype.updateOwn=function(){var t=this._target.property.get("own");if(0!=t&&t!=this._locomotor.property.get("id"))return this._target.property.off("own",this,this.updateOwn),this._target=null,void this._locomotor.stop()},p.prototype.tryTrigger=function(){var t=this._transform.localPosition,e=this._target.property,i=e.get("transform").position,n=l.instance.getCfgById(e.get("occ"))[3]||150;return!!r.testDistance(t.x,t.y,i.x,i.y,n)&&(this._target.publish("trigger"),!0)},c=p,s.NpcTriggerAction=c}(game=game||{}),function(o){var t,a,e,i,r,n,l,h,s;function c(t,e,i,n){void 0===n&&(n=null);var s=r.call(this,"ChaseAndAttack")||this;return s._skipTargetFunc=n,s._transform=t.property.get("transform"),s._combat=t.getComponent(a.CombatComponent),s._locomotor=t.getComponent(a.LocomotorComponent),s._skill=t.getComponent(a.SkillComponent),s._radius=e,s._model=PlayerModel.instance,s._targetType=i,s._interrupt=!1,s}t=o.role||(o.role={}),a=t.component||(t.component={}),e=a.brain||(a.brain={}),i=e.action||(e.action={}),n=o.ai.behavior.Action,l=o.map.MapUtils,h=modules.scene.SceneUtil,r=n,__extends(c,r),c.prototype.interrupt=function(t,e,i,n){var s=o.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&this._combat.target!==s&&(14===h.currScene||(this._interrupt=!0))},c.prototype.onEnter=function(){return this._model.selectTargetType==this._targetType&&(48===h.currScene||(this._locomotor.owner.on("hurt",this,this.interrupt),14!==h.currScene||1!==this._model.selectTargetType||-1==this._model.selectTargetId))},c.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(this._model.selectTargetType!=this._targetType||this._interrupt)return 2;if(this._combat.isValidTarget()){var t=this._transform.localPosition,e=this._combat.target.property.get("transform").localPosition;if(!l.testDistance(t.x,t.y,e.x,e.y,this._radius)){if(n=this.getTarget(),!this._combat.testTarget(n))return WindowManager.instance.close(45),this.isConicne(),1;this._combat.setTarget(n),modules.strongest_marry.StrongestMarryModel.instance.ispreliminaryCoupleBestr()&&GlobalData.dispatcher.event("PLAYER_TARGET_CHANGE")}}else{if(14===h.currScene&&1===this._model.selectTargetType&&2===modules.nine.NineModel.instance.autoAttClick){var i=modules.nine.NineModel.instance.getBigBoss();if(i)return PlayerModel.instance.selectTarget(1,i),2}var n=this.getTarget();if(!this._combat.testTarget(n))return WindowManager.instance.close(45),this.isConicne(),1;this._combat.setTarget(n),modules.strongest_marry.StrongestMarryModel.instance.ispreliminaryCoupleBestr()&&GlobalData.dispatcher.event("PLAYER_TARGET_CHANGE")}if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){e=this._combat.target.property.get("transform").localPosition,this._locomotor.moveTo(e.x,e.y);var s=this._locomotor.property.get("avatar");s.getActionTween(0==s.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return 3},c.prototype.isConicne=function(){14===h.currScene&&2===this._model.selectTargetType&&-1!=this._model.selectTargetId&&modules.nine.NineModel.instance.isConicne(!0)},c.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._locomotor.owner.off("hurt",this,this.interrupt),this._interrupt=!1},c.prototype.getTarget=function(){switch(this._model.selectTargetType){case 1:var t=this._transform.localPosition;return-1!=this._model.selectTargetId?o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,this._model.selectTargetId):o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1);case 2:return-1!=this._model.selectTargetId?o.GameCenter.instance.getRole(this._model.selectTargetId):(t=this._transform.localPosition,o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,3,0,this._model.actorId,39===h.currScene?this._combat.owner.property.get("warbandId"):-1,this._skipTargetFunc));case 4:54===h.currScene&&this._model.selectTargetId}return null},s=c,i.ChaseAndAttack=s}(game=game||{}),function(o){var t,i,e,n,s,a,r;function l(t){var e=s.call(this,"Revenge")||this;return e._combat=t.getComponent(i.CombatComponent),e._locomotor=t.getComponent(i.LocomotorComponent),e._skill=t.getComponent(i.SkillComponent),e._transform=t.property.get("transform"),e._sprite=t.property.get("avatar"),e}t=o.role||(o.role={}),i=t.component||(t.component={}),e=i.brain||(i.brain={}),n=e.action||(e.action={}),a=o.ai.behavior.Action,s=a,__extends(l,s),l.prototype.onEnter=function(){return this._combat.owner.on("hurt",this,this.setTarget),this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),!0},l.prototype.onUpdate=function(){return this._combat.isCooldown()||(this._combat.isValidTarget()?this.tryCombat():this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()),3},l.prototype.onExit=function(){this._combat.owner.off("hurt",this,this.setTarget),this._locomotor.stop(),this._combat.setTarget(null)},l.prototype.setTarget=function(t,e,i,n){if(!this._combat.isValidTarget()){var s=o.GameCenter.instance.getRole(t);null!=s?this._combat.setTarget(s):this._combat.setTarget(null)}},l.prototype.tryCombat=function(){if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var t=this._combat.target.property.get("transform").localPosition;this._sprite.getActionTween(0==this._sprite.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(t.x,t.y)}},r=l,n.Revenge=r}(game=game||{}),function(e){var t,o,i,n,a,s,r,l,h;function c(t,e,i,n){void 0===n&&(n=null);var s=a.call(this,"Patrol")||this;return s._skipTargetFunc=n,s._context=t.property,s._locomotor=t.getComponent(o.LocomotorComponent),s._combat=t.getComponent(o.CombatComponent),s._interrupt=!1,s._model=PlayerModel.instance,s._transform=t.property.get("transform"),s._radius=e,s._targetType=i,s}t=e.role||(e.role={}),o=t.component||(t.component={}),i=o.brain||(o.brain={}),n=i.action||(i.action={}),s=e.ai.behavior.Action,r=e.map.MapUtils,l=modules.scene.SceneUtil,a=s,__extends(c,a),c.prototype.onEnter=function(){if(this.claerSpawnpoint(),14===l.currScene){if(0===this._model.selectTargetType)return!1;if(-1!=this._model.selectTargetId)return!1}return!!this.setSpawnpointPath()&&(this._locomotor.owner.on("hurt",this,this.interrupt),!0)},c.prototype.onUpdate=function(){return 14===l.currScene&&1===this._model.selectTargetType&&-1!=this._model.selectTargetId?2:this._interrupt||null!=this.getTarget()?(this.claerSpawnpoint(),2):this._locomotor.running()?3:(this.claerSpawnpoint(),1)},c.prototype.onExit=function(){this._locomotor.owner.off("hurt",this,this.interrupt),this._locomotor.stop(),this._interrupt=!1},c.prototype.interrupt=function(t,e,i,n){14!==l.currScene&&(this._interrupt=!0)},c.prototype.getTarget=function(){if(this._model.selectTargetType!=this._targetType)return null;if(this._context.get("isUnseen"))return null;switch(this._model.selectTargetType){case 1:var t=this._transform.localPosition;return-1!=this._model.selectTargetId?e.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,this._model.selectTargetId):e.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1);case 2:return-1!=this._model.selectTargetId?e.GameCenter.instance.getRole(this._model.selectTargetId):(t=this._transform.localPosition,e.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,3,0,this._model.actorId,39===l.currScene?this._context.get("warbandId"):-1,this._skipTargetFunc))}return null},c.prototype.setSpawnpointPath=function(){var t=this._context.has("spawnpoint")?this._context.get("spawnpoint"):-1;if(-1==t){var e=this._context.get("transform").localPosition;if(-1==(t=r.nearbyPathNode(r.getPosition(e.x,-e.y))[0]))return this._context.set("spawnpoint",-1),!1}var i=r.findNextPathNode(t);if(null==i)return!1;this._context.set("spawnpoint",i[0]),this._locomotor.moveToCoordinate(i[1]);var n=this._context.get("avatar");return n.getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),!0},c.prototype.claerSpawnpoint=function(){modules.union_war.UnionWarModel.instance.ispreliminaryFactionWar()&&this._context.set("spawnpoint",-1),modules.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()&&this._context.set("spawnpoint",-1)},h=c,n.Patrol=h}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d,m,f;function g(t,e,i){var n=s.call(this,t)||this;return n._interrupt=new r,n._tree=o.create(new a(n._interrupt).addChild(new d(new l(t),n._interrupt,0)).addChild(new d(new h(t),n._interrupt,2)).addChild(new d(new m(t),n._interrupt,3)).addChild(new c(t,1e3)).addChild(new p(t,600,e,i)).addChild(new u(t,1e3))),n}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.role.component.brain.behavior.PlayerChaseAndAttack,p=i.role.component.brain.behavior.BossChaseAndAttack,u=i.role.component.brain.behavior.RevengeAction,d=i.ai.behavior.decorator.EventNode,m=i.role.component.brain.behavior.NpcTriggerAction,s=t.RoleComponent,__extends(g,s),g.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},g.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},g.prototype.destory=function(){},g.prototype.update=function(){this._tree.run()},g.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},g.prototype.interrupt=function(t){1024!=t&&2048!=t||this._interrupt.trigger(0)},g.prototype.onTargetChange=function(){this._interrupt.trigger(3)},g.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},f=g,e.HomeBossBrainComponent=f}(game=game||{}),function(t){var e,i,n,s,l,o;function a(t,e,i,n,s,o,a){void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=null);var r=l.call(this,t,e,i,n)||this;return r._stopAttackCondition=s,r._getBossTag=o,r._setBossTag=a,r}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),s=n.behavior||(n.behavior={}),l=s.BossChaseAndAttack,__extends(a,l),a.prototype.onEnter=function(){return!(this._stopAttackCondition&&this._stopAttackCondition()&&this._getBossTag&&this._getBossTag())&&l.prototype.onEnter.call(this)},a.prototype.onExit=function(){var t=this._combat.target;t&&t.off("death",this,this.onTargetDeath),l.prototype.onExit.call(this)},a.prototype.onUpdate=function(){return this._stopAttackCondition&&this._stopAttackCondition()&&this._getBossTag&&this._getBossTag()?2:l.prototype.onUpdate.call(this)},a.prototype.enterAttackToBoss=function(t){l.prototype.enterAttackToBoss.call(this,t),t.off("death",this,this.onTargetDeath),t.on("death",this,this.onTargetDeath)},a.prototype.onTargetDeath=function(){this._setBossTag&&this._setBossTag(!0)},o=a,s.YunmengBossChaseAndAttack=o}(game=game||{}),function(i){var t,n,e,r,l,h,c,p,u,d,m,f,g,y,s;function o(t,e,i,n,s,o){void 0===n&&(n=null),void 0===s&&(s=null),void 0===o&&(o=null);var a=r.call(this,t)||this;return a._interrupt=new c,a._tree=l.create(new h(a._interrupt).addChild(new g(new p(t),a._interrupt,0)).addChild(new g(new u(t),a._interrupt,2)).addChild(new g(new y(t),a._interrupt,3)).addChild(new d(t,1e3)).addChild(new m(t,600,e,i,function(){return modules.yunmeng.YunMengMiJingModel.instance.remainTimes<=0},function(){return modules.yunmeng.YunMengMiJingModel.instance.bossTag},function(t){modules.yunmeng.YunMengMiJingModel.instance.bossTag=t})).addChild(new f(t,1e3,function(){return modules.yunmeng.YunMengMiJingModel.instance.remainTimes<=0}))),a}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),l=i.ai.behavior.BehaviorTree,h=i.ai.behavior.composite.SelectorMonitor,c=i.ai.behavior.condition.Interrupt,p=i.role.component.brain.behavior.DeathAction,u=i.role.component.brain.behavior.AbnormalAction,d=i.role.component.brain.behavior.PlayerChaseAndAttack,m=i.role.component.brain.behavior.YunmengBossChaseAndAttack,f=i.role.component.brain.behavior.RevengeAction,g=i.ai.behavior.decorator.EventNode,y=i.role.component.brain.behavior.NpcTriggerAction,r=t.RoleComponent,__extends(o,r),o.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},o.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},o.prototype.destory=function(){},o.prototype.update=function(){this._tree.run()},o.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},o.prototype.interrupt=function(t){1024!=t&&2048!=t||this._interrupt.trigger(0)},o.prototype.onTargetChange=function(){this._interrupt.trigger(3)},o.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},s=o,e.YunmengBrainComponent=s}(game=game||{}),function(t){var e,s,i,n,o,a,r,l;function h(t,e,i){var n=o.call(this,"FollowAndAttack")||this;return n._offsetX=0,n._offsetY=0,n._ownRole=t,n._combat=t.getComponent(s.CombatComponent),n._locomotor=t.getComponent(s.LocomotorComponent),n._skill=t.getComponent(s.SkillComponent),n._transform=t.property.get("transform"),n._radius=i,n._leader=e.getComponent(s.CombatComponent),n._leaderTransform=e.property.get("transform"),n._sprite=t.property.get("avatar"),n}e=t.role||(t.role={}),s=e.component||(e.component={}),i=s.brain||(s.brain={}),n=i.behavior||(i.behavior={}),a=t.ai.behavior.Action,r=t.map.MapUtils,o=a,__extends(h,o),h.prototype.onEnter=function(){return!this.isValidRange()||this._leader.isValidTarget()},h.prototype.onUpdate=function(){if(this._combat&&this._combat.isCooldown())return 3;if(1024==this._leader.property.get("status"))return 2;if(this.isValidRange())return this._combat&&this._leader.isValidTarget()&&this._leader.isValidRange()?(this._locomotor.stop(),this._combat.setTarget(this._leader.target),this._combat.combat(this._skill.selectSkill()),this._skill._isBabySkillComponent&&-1==this._skill.selectSkill()&&"run"==this._ownRole.property.get("avatar").currentClipName?2:3):2;if(!this._locomotor.running()){this._sprite.getActionTween("run").repeat(Number.POSITIVE_INFINITY).start();var t=this._leaderTransform.localPosition;if(this._combat)this._offsetX=this._offsetY=0;else{var e=(this._leader.owner.property.get("avatar").direction+180+(Math.random()<.5?0:135)+45*Math.random())*Math.PI/180;this._offsetX=Math.cos(e)*this._radius,this._offsetY=Math.sin(e)*this._radius}var i=r.getPosition(t.x+this._offsetX,-t.y-this._offsetY);this._locomotor.moveToCoordinate(i)}return 3},h.prototype.onExit=function(){if(this._locomotor.stop(),!this._combat){var t=this._transform.localPosition,e=this._leaderTransform.localPosition;this._sprite.direction=Math.atan2(t.y-e.y,t.x-e.x)/Math.PI*180+90}},h.prototype.isValidRange=function(){var t=this._transform.localPosition,e=this._leaderTransform.localPosition;return r.testDistance(t.x,t.y,e.x+this._offsetX,e.y+this._offsetY,this._combat?this._radius:24)},l=h,n.FollowAndAttack=l}(game=game||{}),function(t){var e,i,n,s,o,a,r,l,h;function c(t,e){var i=s.call(this,t)||this;return i._tree=o.create((new a).addChild(new r(t,e,200)).addChild(new l(t,500,!0))),i}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),o=t.ai.behavior.BehaviorTree,a=t.ai.behavior.composite.Selector,r=t.role.component.brain.behavior.FollowAndAttack,l=t.role.component.brain.behavior.RestAction,s=e.RoleComponent,__extends(c,s),c.prototype.setup=function(){},c.prototype.teardown=function(){},c.prototype.destory=function(){},c.prototype.update=function(){this._tree.run()},h=c,n.PetBrainComponent=h}(game=game||{}),function(o){var t,i,e,n,s;function a(t){var e=n.call(this,t)||this;return e._stateHandlers=[],e._stateHandlers[1024]=e.onDeath,e._stateHandlers[128]=e.onAttack,e._stateHandlers[64]=e.onMove,e._stateHandlers[32]=e.onStrike,e._stateHandlers[1]=e.onIdle,e._stateHandlers[0]=e.onDummy,e._stateHandlers[4096]=e.onShow,e._state=0,e._locomotor=t.getComponent(i.LocomotorComponent),e._combat=t.getComponent(i.CombatComponent),e._sprite=e.property.get("avatar"),e}t=o.role||(o.role={}),i=t.component||(t.component={}),e=i.brain||(i.brain={}),n=t.RoleComponent,__extends(a,n),a.prototype.setup=function(){this.updateStatus(),this.property.on("status",this,this.updateStatus).on("actorState",this,this.updateAbnormal),this.owner.on("hurt",this,this.strike).on("strike",this,this.strike)},a.prototype.teardown=function(){this.property.off("status",this,this.updateStatus).off("actorState",this,this.updateAbnormal),this.owner.off("hurt",this,this.strike).off("strike",this,this.strike),this.goToState(0,!0)},a.prototype.destory=function(){},a.prototype.updateStatus=function(){var t=this.property.get("status");2048==t?this.goToState(1,!0):this.goToState(t)},a.prototype.goToState=function(t,e){void 0===e&&(e=!1);var i=this._stateHandlers[this._state];if(this._state!=t){if(e||i.call(this,t,3)){var n=this._state;i.call(this,t,1),this._state=t,this._stateHandlers[t].call(this,n,0)}}else i.call(this,t,2)},a.prototype.onDeath=function(t,e){var i=this;switch(e){case 3:return!1;case 0:return this.owner.publish("death"),this.owner.property.event("death"),this._sprite.getActionTween("dead").onComplete(function(){i.owner.publish("fade")}).start(),o.GameCenter.instance.world.publish("castShadow",!1,this.property.get("shadow")),!0}return!0},a.prototype.onAttack=function(t,e){switch(e){case 3:return 1024==t;case 0:var i=this.property.get("battle"),n=o.GameCenter.instance.getRole(i[0]);return null!=n?(this._combat.setTarget(n),this._combat.combat(i[1]),this._combat.owner.on("combatComplete",this,this.resetState)):this.resetState(),!0;case 2:if(this._combat.isCooldown())return!0;i=this.property.get("battle");var s=o.GameCenter.instance.getRole(i[0]);return null!=s?(this._combat.setTarget(s),this._combat.combat(i[1]),this._combat.owner.on("combatComplete",this,this.resetState)):this.resetState(),!0;case 1:return this._combat.owner.off("combatComplete",this,this.resetState),!0}return!0},a.prototype.onMove=function(t,e){switch(e){case 3:return 1024==t||128==t;case 0:this._sprite.getActionTween(0==this._sprite.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this.owner.on("moveOver",this,this.resetState);case 2:2==this.property.get("moveType")?(this._locomotor.speed=1e3,this.owner.publish("sprint",!0)):(this._locomotor.speed=this.property.get("speed"),this.owner.publish("sprint",!1));var i=this.property.get("pos"),n=this.property.get("desPos");return this._locomotor.setCoordinate(i.x,i.y),this._locomotor.moveToCoordinate(n),!0;case 1:return i=this.property.get("desPos"),this._locomotor.stop(),this._locomotor.setCoordinate(i.x,i.y),this._locomotor.speed=this.property.get("speed"),this.owner.publish("sprint",!1),this.owner.off("moveOver",this,this.resetState),!0}return!0},a.prototype.resetState=function(){this.goToState(1,!0)},a.prototype.onStrike=function(t,e){switch(e){case 3:return 1!=t;case 0:this._sprite.getActionTween("hit").onComplete(this.resetState.bind(this)).start()}return!0},a.prototype.onIdle=function(t,e){switch(e){case 0:return this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),!0}return!0},a.prototype.onShow=function(t,e){var i=this;switch(e){case 0:this._sprite.active=!1;var n=this._sprite.getActionTween("show").onComplete(function(){i.property.set("status",1)}).onStart(function(){i._sprite.frameOnce(2,null,function(){i._sprite.active=!0})});return this._sprite.body.loaded?n.start():this._sprite.body.once(Laya.Event.HIERARCHY_LOADED,n,n.start),!0}return!0},a.prototype.onDummy=function(t,e){return!0},a.prototype.updateAbnormal=function(t){this.owner.publish("abnormal",t)},a.prototype.strike=function(){this.goToState(32)},s=a,e.CommonBrainComponent=s}(game=game||{}),function(l){var t,n,e,i,s,o,h,a,c,r;function p(t,e){var i=s.call(this,"NineBossAttack")||this;return i.isWiret=!1,i._context=t.property,i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i}t=l.role||(l.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.action||(e.action={}),o=l.ai.behavior.Action,h=l.map.MapUtils,a=Laya.Point,c=modules.bossDungeon.BossDungeonModel,s=o,__extends(p,s),p.prototype.onEnter=function(){return this._combat.owner.on("hurt",this,this.toRevenge),this.isWiret=!1,1===this._model.selectTargetType&&-1!=this._model.selectTargetId},p.prototype.onUpdate=function(){if(1!==this._model.selectTargetType||-1==this._model.selectTargetId)return 2;if(this._combat.isCooldown())return 3;switch(this._step){case 0:if(1===this._model.selectTargetType){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);if(t&&!t[2][0]){if(this.isValidRadius(this._transform,t[3],this._radius)){var e=this._transform.localPosition,i=l.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId);this._combat.testTarget(i)&&(this._model.selectTargetId=i.property.get("occ"),c.instance.selectLastBoss=i.property.get("occ"),this.isWiret=!1,this.enterAttackToBoss(i))}}else if(t&&t[2][0]){if(this.isValidRadius(this._transform,t[3],50)&&this.isConicne())return 2}else if(!t){var n=modules.config.SceneCopyNineBOSSCfg.instance.getCfgById(this._model.selectTargetId)[2];if((s=h.getPathNode(n))&&this.isValidRadius(this._transform,[s.x,s.y],50)&&this.isConicne())return 2}}break;case 2:case 1:if(!this._combat.isValidTarget()){if(this.isConicne())return 2;this.enterMoveToSpawnpoint()}}switch(this._step){case 0:var s;if(!this._locomotor.running()&&1===this._model.selectTargetType&&(s=this.getBossPos())){var o=h.nearbyPathNode(s);if(-1==o[0])return 2;s=o[1],this._locomotor.running()||((a=this._locomotor.property.get("avatar")).getActionTween(0==a.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(s))}break;case 2:case 1:if(this._combat.isValidRange())1===this._step&&(this.isWiret=!1),this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var a,r=this._combat.target.property.get("transform").localPosition;(a=this._locomotor.property.get("avatar")).getActionTween(0==a.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(r.x,r.y)}}return 3},p.prototype.isConicne=function(){return this.isWiret=!0,modules.nine.NineModel.instance.isConicne()},p.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,this._combat.owner.off("hurt",this,this.toRevenge),this.isWiret=!1},p.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0,this._combat.setTarget(null)},p.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=1},p.prototype.tryGoBack=function(){if(1===this._model.selectTargetType){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);if(t&&!t[2][0]){if(!this.isValidRadius(this._transform,t[3],this._radius)){var e=this._transform.localPosition,i=l.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId);this._combat.testTarget(i)?this.enterAttackToBoss(i):this.enterMoveToSpawnpoint()}}else this.enterMoveToSpawnpoint()}},p.prototype.isValidRadius=function(t,e,i){var n=h.getRealPosition(e[0],e[1]),s=t.localPosition;return h.testDistance(n.x,-n.y,s.x,s.y,i)},p.prototype.getBossPos=function(){if(1!=this._model.selectTargetType)return null;var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);if(t)return new(a.bind.apply(a,[void 0].concat(t[3])));var e=modules.config.SceneCopyNineBOSSCfg.instance.getCfgById(this._model.selectTargetId);return h.getPathNode(e[2])},p.prototype.toRevenge=function(t,e,i,n){if(2!=this._step){var s=l.GameCenter.instance.getRole(t);this.isWiret&&this._combat.testTarget(s)&&3==s.property.get("type")&&(this._combat.setTarget(s),this._locomotor.stop(),this._step=2)}},r=p,i.NineBossAttack=r}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d,m,f,g,y,_;function v(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new p(new l(t),e._interrupt,0)).addChild(new p(new h(t),e._interrupt,2)).addChild(new p(new d(new c(t)),e._interrupt,3)).addChild((new u).addChild(new f(t,1e3,2)).addChild(new g(t,1e3,2))).addChild((new u).addChild(new f(t,1e3,1)).addChild(new g(t,1e3,1))).addChild(new y(t,1e3)).addChild(new m(t))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.role.component.brain.behavior.NpcTriggerAction,p=i.ai.behavior.decorator.EventNode,u=i.ai.behavior.composite.Sequence,d=i.ai.behavior.decorator.AlwaysSuccess,m=i.role.component.brain.action.Revenge,f=i.role.component.brain.action.ChaseAndAttack,g=i.role.component.brain.action.Patrol,y=i.role.component.brain.action.NineBossAttack,s=t.RoleComponent,__extends(v,s),v.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),this.owner.getComponent(n.LocomotorComponent).enableSprint=!1,GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},v.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),this.owner.getComponent(n.LocomotorComponent).enableSprint=!0,GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},v.prototype.destory=function(){},v.prototype.update=function(){this._tree.run()},v.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},v.prototype.interrupt=function(t){1024==t&&PlayerModel.instance.selectTarget(0,-1),1024!=t&&2048!=t||this._interrupt.trigger(0)},v.prototype.onTargetChange=function(){this._interrupt.trigger(3)},v.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},_=v,e.TopBrainComponent=_}(game=game||{}),function(t){var e,n,i,s,o,a,r,l;function h(t,e){var i=o.call(this,"GotoSpawnpoint")||this;return i._property=t.property,i._transform=t.property.get("transform"),i._locomotor=t.getComponent(n.LocomotorComponent),i._getSpawnpoint=e,i}e=t.role||(t.role={}),n=e.component||(e.component={}),i=n.brain||(n.brain={}),s=i.action||(i.action={}),a=t.ai.behavior.Action,r=t.map.MapUtils,o=a,__extends(h,o),h.prototype.isValidRadius=function(){var t=this._getSpawnpoint();if(-1==t)return!1;var e=r.getPathNode(t),i=r.getRealPosition(e.x,e.y),n=this._transform.localPosition;return r.testDistance(i.x,-i.y,n.x,n.y,100)},h.prototype.onEnter=function(){return-1!=this._getSpawnpoint()},h.prototype.onUpdate=function(){if(!this._locomotor.running()){if(this.isValidRadius())return 1;var t=this._getSpawnpoint();if(-1==t)return 2;var e=r.getPathNode(t);this._locomotor.moveToCoordinate(e);var i=this._property.get("avatar");i.getActionTween(0==i.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return 3},h.prototype.onExit=function(){this._locomotor.stop()},l=h,s.GotoSpawnpoint=l}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d,m,f,g;function y(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new p(new l(t),e._interrupt,0)).addChild(new p(new h(t),e._interrupt,2)).addChild(new p(new c(t),e._interrupt,3)).addChild((new f).addChild(new m(t,function(){return 1!=PlayerModel.instance.selectTargetType?-1:modules.xianfu.XianfuModel.instance.areaId()})).addChild(new u(t,1e3,1))).addChild(new d(t))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.role.component.brain.behavior.NpcTriggerAction,p=i.ai.behavior.decorator.EventNode,u=i.role.component.brain.action.ChaseAndAttack,d=i.role.component.brain.action.Revenge,m=i.role.component.brain.action.GotoSpawnpoint,f=i.ai.behavior.composite.Sequence,s=t.RoleComponent,__extends(y,s),y.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},y.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},y.prototype.destory=function(){},y.prototype.update=function(){this._tree.run()},y.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},y.prototype.interrupt=function(t){1024==t&&this._interrupt.trigger(0)},y.prototype.onTargetChange=function(){this._interrupt.trigger(3)},y.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},g=y,e.GardenBrainComponent=g}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d,m,f;function g(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new c(new l(t),e._interrupt,0)).addChild(new c(new h(t),e._interrupt,2)).addChild((new p).addChild(e.getChaseAndAttack(t)).addChild(e.getPatrol(t))).addChild(new u(t))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.ai.behavior.decorator.EventNode,p=i.ai.behavior.composite.Sequence,u=i.role.component.brain.action.Revenge,d=i.role.component.brain.action.ChaseAndAttack,m=i.role.component.brain.action.Patrol,s=t.RoleComponent,__extends(g,s),g.prototype.getChaseAndAttack=function(t){return new d(t,1e3,2)},g.prototype.getPatrol=function(t){return new m(t,1e3,2)},g.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),this.owner.getComponent(n.LocomotorComponent).enableSprint=!1,GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},g.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),this.owner.getComponent(n.LocomotorComponent).enableSprint=!0,GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},g.prototype.destory=function(){},g.prototype.update=function(){this._tree.run()},g.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},g.prototype.interrupt=function(t){1024==t&&PlayerModel.instance.selectTarget(0,-1),1024!=t&&2048!=t||this._interrupt.trigger(0)},g.prototype.onTargetChange=function(){this._interrupt.trigger(3)},g.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},f=g,e.BattleBrainComponent=f}(game=game||{}),function(t){var e,i,n,s,o,a;function r(){return null!==o&&o.apply(this,arguments)||this}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),s=n.action||(n.action={}),o=s.ChaseAndAttack,__extends(r,o),r.prototype.onEnter=function(){return this._model.selectTargetType==this._targetType},a=r,s.CoupleChaseAndAttack=a}(game=game||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==s&&s.apply(this,arguments)||this}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),o=t.role.component.brain.action.CoupleChaseAndAttack,a=t.role.component.brain.action.Patrol,s=n.BattleBrainComponent,__extends(l,s),l.prototype.setup=function(){s.prototype.setup.call(this),this.owner.getComponent(i.LocomotorComponent).enableSprint=!0},l.prototype.getChaseAndAttack=function(t){return new o(t,1e3,2,this.skipTarget.bind(this))},l.prototype.getPatrol=function(t){return new a(t,1e3,2,this.skipTarget.bind(this))},l.prototype.skipTarget=function(t){return 1===t.property.get("teamId")},r=l,n.CoupleBattleBrainComponent=r}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d;function m(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new p(new l(t),e._interrupt,0)).addChild(new p(new h(t),e._interrupt,2)).addChild(new p(new c(t,!0),e._interrupt,3)).addChild(new u(t))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.role.component.brain.behavior.NpcTriggerAction,p=i.ai.behavior.decorator.EventNode,u=i.role.component.brain.action.Revenge,s=t.RoleComponent,__extends(m,s),m.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},m.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},m.prototype.destory=function(){},m.prototype.update=function(){this._tree.run()},m.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},m.prototype.interrupt=function(t){1024==t&&this._interrupt.trigger(0)},m.prototype.onTargetChange=function(){this._interrupt.trigger(3)},m.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},d=m,e.GatherBrainComponent=d}(game=game||{}),function(e){var t,i,n,s,o,a;function r(t){return n.call(this,t)||this}t=e.role||(e.role={}),i=t.component||(t.component={}),s=modules.config.NpcCfg,o=e.map.MapUtils,n=t.RoleComponent,__extends(r,n),r.prototype.setup=function(){var t=s.instance.getCfgById(this.property.get("occ"));if(this._distance=t[7]||0,this._transform=e.GameCenter.instance.getRole(PlayerModel.instance.actorId).property.get("transform"),this._hasOpen=!1,0!=this._distance){if(0!=this.property.get("own")&&this.property.get("own")!=PlayerModel.instance.actorId)return;this.testDistance(),this.property.get("avatar").timerLoop(100,this,this.testDistance)}this.owner.on("trigger",this,this.onTrigger)},r.prototype.teardown=function(){this._hasOpen&&(WindowManager.instance.close(166),this._hasOpen=!1),this.property.get("avatar").clearTimer(this,this.testDistance),this.owner.off("trigger",this,this.onTrigger)},r.prototype.testDistance=function(){var t=this._transform.localPosition,e=this.property.get("transform").localPosition;o.testDistance(t.x,t.y,e.x,e.y,this._distance)?this._hasOpen||(WindowManager.instance.open(166,this.owner.id),this._hasOpen=!0):this._hasOpen&&(WindowManager.instance.close(166),this._hasOpen=!1)},r.prototype.destory=function(){},r.prototype.onTrigger=function(){GlobalData.dispatcher.event("PLAYER_TRIGGER_NPC",this.owner.id)},a=r,i.FeatureComponent=a}(game=game||{}),function(e){var o,t,i,a,n;function s(t,e,i,n){var s=a.call(this,t)||this;return s._sprite=new o.RoleAvatar(n,!GlobalData.getNoEff(e.property)),s.property.set("avatar",s._sprite),s.property.set("transform",s._sprite.transform),s._master=e,s._layer=i,s.property.set("shadow",{width:256,height:128,uvs:[0,0,1,1],matrix:s._sprite.transform.localMatrix}),s}o=e.role||(e.role={}),t=o.component||(o.component={}),i=t.exterior||(t.exterior={}),a=o.RoleComponent,__extends(s,a),s.prototype.setup=function(){this._sprite.reset(""),this.updateExterior(),this._sprite.direction=this.property.get("direction")-90,this._master.property.on("pet",this,this.updateExterior),this._master.property.on("exterior",this,this.updateExterior),this._master.property.on("isUnseen",this,this.updateExterior),this._master.on("visible",this,this.visible),e.GameCenter.instance.world.publish("addToLayer",this._layer,this._sprite),e.GameCenter.instance.world.publish("castShadow",!0,this.property.get("shadow")),4!==this.property.get("type")?GlobalData.dispatcher.on("NO_EFF",this,this.noEff):GlobalData.dispatcher.on("NO_OWN_EFF",this,this.noEff)},s.prototype.teardown=function(){this._sprite.removeSelf(),this._master.property.off("pet",this,this.updateExterior),this._master.property.off("exterior",this,this.updateExterior),this._master.property.off("isUnseen",this,this.updateExterior),this._master.off("visible",this,this.visible),e.GameCenter.instance.world.publish("castShadow",!1,this.property.get("shadow")),GlobalData.dispatcher.off("NO_EFF",this,this.noEff),GlobalData.dispatcher.off("NO_OWN_EFF",this,this.noEff)},s.prototype.destory=function(){this._sprite.destroy()},s.prototype.noEff=function(){this._sprite.noEff(!GlobalData.getNoEff(this.property))},s.prototype.updateExterior=function(){var t=this._master.property.get("pet");this._sprite.clothes=t[0],this._sprite.aura=t[1];var e=this.property.get("isUnseen");this._sprite&&(this._sprite.alpha=e?CommonUtil.alpanNum:1)},s.prototype.visible=function(t){this._sprite.active!=t&&(this.owner.publish("visible",t),this._sprite.active=t,e.GameCenter.instance.world.publish("castShadow",t,this.property.get("shadow")))},n=s,i.PetAvatarComponent=n}(game=game||{}),function(o){var t,s,e,a,r,i,n;function l(t,e,i){var n=a.call(this,t)||this;return n._offsetX=0,n._offsetY=0,n._stateHandlers=[],n._stateHandlers[8192]=n.onFollow,n._stateHandlers[128]=n.onAttack,n._stateHandlers[1]=n.onIdle,n._stateHandlers[0]=n.onDummy,n._state=0,n._locomotor=t.getComponent(s.LocomotorComponent),n._combat=t.getComponent(s.CombatComponent),n._transform=t.property.get("transform"),n._sprite=n.property.get("avatar"),n._leader=e.getComponent(s.CombatComponent),n._leaderTransform=e.property.get("transform"),n._radius=i,n}t=o.role||(o.role={}),s=t.component||(t.component={}),e=s.brain||(s.brain={}),r=o.map.MapUtils,i=modules.scene.SceneUtil,a=t.RoleComponent,__extends(l,a),l.prototype.setup=function(){this.goToState(1),this.property.on("status",this,this.updateStatus)},l.prototype.teardown=function(){this.goToState(0,!0),this.property.off("status",this,this.updateStatus)},l.prototype.destory=function(){},l.prototype.update=function(){1!=this._state||this.isValidRange()?8192==this._state&&this.isValidRange()&&this.goToState(1,38===i.currScene):this.goToState(8192)},l.prototype.updateStatus=function(){var t=this.property.get("status");if(2048==t)this.goToState(1,!0);else{if(38===i.currScene&&128==t&&!this.isValidRange())return;this.goToState(t)}},l.prototype.isValidRange=function(){var t=this._transform.localPosition,e=this._leaderTransform.localPosition;return r.testDistance(t.x,t.y,e.x+this._offsetX,e.y+this._offsetY,this._combat?this._radius:24)},l.prototype.goToState=function(t,e){void 0===e&&(e=!1);var i=this._stateHandlers[this._state];if(this._state!=t){if(e||i.call(this,t,3)){var n=this._state;i.call(this,t,1),this._state=t,this._stateHandlers[t].call(this,n,0)}}else i.call(this,t,2)},l.prototype.onAttack=function(t,e){if(!this._combat)return!0;switch(e){case 3:return 1024==t;case 0:var i=this.property.get("battle"),n=o.GameCenter.instance.getRole(i[0]);return null!=n?(this._combat.setTarget(n),this._combat.combat(i[1]),this._combat.owner.on("combatComplete",this,this.resetState)):this.resetState(),!0;case 2:if(this._combat.isCooldown())return!0;i=this.property.get("battle");var s=o.GameCenter.instance.getRole(i[0]);return null!=s?(this._combat.setTarget(s),this._combat.combat(i[1]),this._combat.owner.on("combatComplete",this,this.resetState)):this.resetState(),!0;case 1:return this._combat.owner.off("combatComplete",this,this.resetState),!0}return!0},l.prototype.onFollow=function(t,e){switch(e){case 3:return 1024==t||128==t;case 0:this._sprite.getActionTween("run").repeat(Number.POSITIVE_INFINITY).start(),this.owner.on("moveOver",this,this.resetState);case 2:var i=this._leaderTransform.localPosition;if(this._combat)this._offsetX=this._offsetY=0;else{var n=(this._leader.owner.property.get("avatar").direction+180+(Math.random()<.5?0:135)+45*Math.random())*Math.PI/180;this._offsetX=Math.cos(n)*this._radius,this._offsetY=Math.sin(n)*this._radius}var s=r.getPosition(i.x+this._offsetX,-i.y-this._offsetY);return this._locomotor.moveToCoordinate(s),!0;case 1:return this._locomotor.stop(),this.owner.off("moveOver",this,this.resetState),!0}return!0},l.prototype.resetState=function(){if(!this._combat){var t=this._transform.localPosition,e=this._leaderTransform.localPosition;this._sprite.direction=Math.atan2(t.y-e.y,t.x-e.x)/Math.PI*180+90}this.goToState(1,!0)},l.prototype.onIdle=function(t,e){switch(e){case 0:return this._sprite.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),!0}return!0},l.prototype.onDummy=function(t,e){return!0},n=l,e.PlayerPetBrainComponent=n}(game=game||{}),function(t){var a,r,e,l,h,c,p,i;function n(t){return e.call(this,t)||this}a=t.role||(t.role={}),r=a.component||(a.component={}),l=t.role.component.exterior.PetAvatarComponent,h=t.role.component.brain.PetBrainComponent,c=t.role.component.brain.PlayerPetBrainComponent,p=modules.config.SceneCfg,e=a.RoleComponent,__extends(n,e),n.prototype.setup=function(){var t=this.property,e=t.get("pet");null!=e&&0!=e[0]?this.updateExterior():t.once("pet",this,this.updateExterior),this.property.on("name",this,this.updateName),this.property.on("isUnseen",this,this.updateIsUnseen),this.property.on("teamId",this,this.updateIsUnseen),GlobalData.dispatcher.on("UPDATE_WARBAND_WARGATHER_LIST",this,this.updatePkMode)},n.prototype.updatePkMode=function(){this._pet&&(this._pet.property.set("teamId",this.property.get("teamId")),this._pet.getComponent(r.TitleComponent).updatePkMode())},n.prototype.teardown=function(){this.property.off("pet",this,this.updateExterior),this.property.off("name",this,this.updateName),this.property.off("isUnseen",this,this.updateIsUnseen),this.property.off("teamId",this,this.updateIsUnseen),GlobalData.dispatcher.off("UPDATE_WARBAND_WARGATHER_LIST",this,this.updatePkMode)},n.prototype.destory=function(){null!=this._pet&&this._pet.destory(),this._pet=null},n.prototype.update=function(){null!=this._pet&&this._pet.update()},n.prototype.updateName=function(){this._pet&&this._pet.property.set("name",this.property.get("name")+"的宠物")},n.prototype.updateIsUnseen=function(){this._pet&&this._pet.property.set("isUnseen",this.property.get("isUnseen"))},n.prototype.updateExterior=function(){if(null==this._pet){var t=this.property,e=t.get("pet");if(null!=e&&0!=e[0]){var i=new a.Role(this.owner.id);if(4==t.get("type"))i.addComponent(l,this.owner,5,!0),i.addComponent(r.TitleComponent,1),i.addComponent(r.LocomotorComponent,!1),i.addComponent(r.SkillComponent,[80120001],function(t){return(0==t[2]||1==t[2])&&1==t[3]}),i.addComponent(r.CombatComponent),i.addComponent(h,this.owner),i.addComponent(r.BubbleComponent);else{var n=p.instance.getCfgById(MapUtils.currentID);i.addComponent(l,this.owner,5,!n[14]),i.addComponent(r.TitleComponent,1),i.addComponent(r.LocomotorComponent,!1),i.addComponent(r.CombatComponent),i.addComponent(c,this.owner,200)}var s=i.property;s.set("name",t.get("name")+"的宠物"),s.set("isUnseen",t.get("isUnseen")),s.set("direction",360*Math.random()),s.set("speed",1.2*t.get("speed")),s.set("type",t.get("type")),s.set("teamId",t.get("teamId")),s.set("warbandId",t.get("warbandId")),s.set("factionId",t.get("factionId")),s.set("syncNoEffect",t.get("syncNoEffect")),i.on("useSkill",this,this.useSkill),this._pet=i,this.owner.property.set("petContext",i),this._pet.enter();var o=t.get("pos");this._pet.publish("setCoordinate",o.x,o.y)}}},n.prototype.useSkill=function(t,e){this.owner.publish("useSkill",t,e)},i=n,r.PetProxyComponent=i}(game=game||{}),function(t){var n,e,i,s,o;function a(t,e){var i=s.call(this,t)||this;return i._sprite=new n.RoleAvatar(!0,!GlobalData.getNoEff(i.property)),i.property.set("avatar",i._sprite),i.property.set("transform",i._sprite.transform),i._layer=e,i.property.set("shadow",{width:256,height:128,uvs:[0,0,1,1],matrix:i._sprite.transform.localMatrix}),i}n=t.role||(t.role={}),e=n.component||(n.component={}),i=e.exterior||(e.exterior={}),s=n.RoleComponent,__extends(a,s),a.prototype.setup=function(){this._sprite.reset(""),this.updateExterior(),this._sprite.direction=this.property.get("direction")-90,t.GameCenter.instance.world.publish("addToLayer",this._layer,this._sprite),t.GameCenter.instance.world.publish("castShadow",!0,this.property.get("shadow")),4!==this.property.get("type")?GlobalData.dispatcher.on("NO_EFF",this,this.noEff):GlobalData.dispatcher.on("NO_OWN_EFF",this,this.noEff)},a.prototype.teardown=function(){this._sprite.removeSelf(),t.GameCenter.instance.world.publish("castShadow",!1,this.property.get("shadow")),GlobalData.dispatcher.off("NO_EFF",this,this.noEff),GlobalData.dispatcher.off("NO_OWN_EFF",this,this.noEff)},a.prototype.destory=function(){this._sprite.destroy()},a.prototype.noEff=function(){this._sprite.noEff(!GlobalData.getNoEff(this.property))},a.prototype.updateExterior=function(){var t=this.property.get("occ");this._sprite.clothes=t},o=a,i.SuperPetAvatarComponent=o}(game=game||{}),function(t){var e,i,n,s,o,a;function r(t){var e=s.call(this,t)||this;return e._stateHandlers=[],e._stateHandlers[64]=e.onMove,e._stateHandlers[1]=e.onIdle,e._stateHandlers[0]=e.onDummy,e._state=0,e._locomotor=t.getComponent(i.LocomotorComponent),e._transform=e.property.get("transform"),e._sprite=e.property.get("avatar"),e}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),o=t.map.MapUtils,s=e.RoleComponent,__extends(r,s),r.prototype.setup=function(){this.updateStatus(),this.property.on("status",this,this.updateStatus)},r.prototype.teardown=function(){this.property.off("status",this,this.updateStatus),this.goToState(0,!0)},r.prototype.destory=function(){},r.prototype.updateStatus=function(){var t=this.property.get("status");this.goToState(t)},r.prototype.goToState=function(t,e){void 0===e&&(e=!1);var i=this._stateHandlers[this._state];if(this._state!=t){if(e||i.call(this,t,3)){var n=this._state;i.call(this,t,1),this._state=t,this._stateHandlers[t].call(this,n,0)}}else i.call(this,t,2)},r.prototype.onMove=function(t,e){switch(e){case 0:this._sprite.getActionTween("run").repeat(Number.POSITIVE_INFINITY).start(),this.owner.on("moveOver",this,this.resetState);case 2:var i=this.property.has("spawnpoint")?this.property.get("spawnpoint"):-1;if(-1==i){var n=this._transform.localPosition;i=o.nearbyPathNode(o.getPosition(n.x,-n.y))[0]}var s=o.findNextPathNode(i);return null==s?this.resetState():(this.property.set("spawnpoint",s[0]),this._locomotor.moveToCoordinate(s[1])),!0;case 1:return this.owner.off("moveOver",this,this.resetState),!0}return!0},r.prototype.resetState=function(){this.goToState(1,!0)},r.prototype.onIdle=function(t,e){var i=this;switch(e){case 0:return.5<=Math.random()?this._sprite.getActionTween("stand").start().onComplete(function(){i.goToState(64)}):this.goToState(64),!0}return!0},r.prototype.onDummy=function(t,e){return!0},a=r,n.SuperPetBrainComponent=a}(game=game||{}),function(t){var c,p,i,u,d,m,f,e;function n(t){var e=i.call(this,t)||this;return e._pets={},e}c=t.role||(t.role={}),p=c.component||(c.component={}),u=modules.config.ExteriorCfg,d=t.role.component.exterior.SuperPetAvatarComponent,m=t.role.component.brain.SuperPetBrainComponent,f=t.map.MapUtils,i=c.RoleComponent,__extends(n,i),n.prototype.setup=function(){this.updateSuperPet(),GlobalData.dispatcher.on("XIANFU_AREA_UPTATE",this,this.updateSuperPet),GlobalData.dispatcher.on("XIANFU_PET_UPDATE",this,this.updateSuperPet)},n.prototype.teardown=function(){GlobalData.dispatcher.off("XIANFU_AREA_UPTATE",this,this.updateSuperPet),GlobalData.dispatcher.off("XIANFU_PET_UPDATE",this,this.updateSuperPet)},n.prototype.destory=function(){for(var t in this._pets)this._pets[t].destory();this._pets=null},n.prototype.update=function(){for(var t in this._pets)this._pets[t].update()},n.prototype.updateSuperPet=function(){if(2==modules.xianfu.XianfuModel.instance.panelType){var t=modules.xianfu.XianfuModel.instance.getAllPetInfos();for(var e in t){var i=t[e],n=(h=i[0],this._pets[h]),s=i[3];if(null==n){if(0==s){(n=new c.Role(this.owner.id)).addComponent(d,8),n.addComponent(p.TitleComponent,1),n.addComponent(p.LocomotorComponent,!1),n.addComponent(m);var o=n.property,a=u.instance.getCfgById(h);o.set("name",a[2]),o.set("direction",360*Math.random()),o.set("speed",100),o.set("occ",h),o.set("status",1);var r=ArrayUtils.random(f.findNodePath(51),0),l=f.getPathNode(r);o.set("spawnpoint",r),o.set("pos",l),(this._pets[h]=n).enter(),n.publish("setCoordinate",l.x,l.y)}}else 1==s?(n.destory(),delete this._pets[h]):2==s&&(n.destory(),delete this._pets[h])}}else{for(var h in this._pets)this._pets[h].destory();this._pets={}}},e=n,p.SuperPetProxyComponent=e}(game=game||{}),function(o){var t,n,e,i,s,a,r,l,h,c,p;function u(t,e){var i=s.call(this,"KillMonster")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i}t=o.role||(o.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.action||(e.action={}),a=o.ai.behavior.Action,r=o.map.MapUtils,l=Laya.Point,h=modules.bossDungeon.BossDungeonModel,c=modules.scene.SceneUtil,s=a,__extends(u,s),u.prototype.onEnter=function(){return this._combat.owner.on("hurt",this,this.toRevenge),2===this._model.selectTargetType?console.log("玩家死亡"):1!=this._model.selectTargetType&&(this._model.selectTargetType=0),!0},u.prototype.hasLiveBoss=function(){return-1!=DungeonModel.instance.getLiveBoss()},u.prototype.getLiveBoss=function(){var t=null,e=this._transform.localPosition;if(1==this._model.selectTargetType&&-1!=this._model.selectTargetId&&!(t=o.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId))&&-1!=DungeonModel.instance.getLiveBoss(this._model.selectTargetId))return null;if(!t&&2===this._model.selectTargetType){if(t=o.GameCenter.instance.findNearBoss(e.x,e.y))return t;var i=h.instance.selectLastBoss;if(t=o.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,i))return t}if(!t){var n=DungeonModel.instance.getLiveBoss();-1!=n&&(t=o.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,n))}return t},u.prototype.getTarget=function(){var t=this._transform.localPosition;if(2===this._model.selectTargetType){var e=o.GameCenter.instance.findNearBoss(t.x,t.y);if(e)return e;var i=h.instance.selectLastBoss;if(e=o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,i))return e}return o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1)},u.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;switch(this._step){case 0:if(this.hasLiveBoss()){if(this.isValidRadius(this._transform)){var t=this.getLiveBoss();this._combat.testTarget(t)&&(35!==c.currScene&&47!==c.currScene&&49!==c.currScene||(this._model.selectTargetId=t.property.get("occ"),h.instance.selectLastBoss=t.property.get("occ")),this.enterAttackToBoss(t))}}else t=this.getTarget(),this._combat.testTarget(t)?this.enterAttackToMonster(t):this.enterMoveToMonster();break;case 3:this.hasLiveBoss()?this.enterMoveToSpawnpoint():(t=this.getTarget(),this._combat.testTarget(t)&&this.enterAttackToMonster(t));break;case 2:this._combat.isValidTarget()?this.hasLiveBoss()&&this.tryGoHome():this.hasLiveBoss()?(t=this.getLiveBoss(),this._combat.testTarget(t)?this.enterAttackToBoss(t):this.enterMoveToSpawnpoint()):(t=this.getTarget(),this._combat.testTarget(t)?this.enterAttackToMonster(t):this.enterMoveToMonster());break;case 4:case 1:this._combat.isValidTarget()||(this.hasLiveBoss()?this.enterMoveToSpawnpoint():this.enterMoveToMonster())}switch(this._step){case 0:if(!this._locomotor.running()){var e=this.getBossPos(),i=new(l.bind.apply(l,[void 0].concat(e)));if(-1==(n=r.nearbyPathNode(i))[0])return 2;i=n[1],this._locomotor.running()||((o=this._locomotor.property.get("avatar")).getActionTween(0==o.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(i))}break;case 3:if(!this._locomotor.running()){i=this._transform.localPosition;var n,s=r.nearbyPathIdNode(r.getPosition(i.x,-i.y))[0];if(-1==(n=r.findNextPathNode(s))[0])return 2;this._locomotor.running()||((o=this._locomotor.property.get("avatar")).getActionTween(0==o.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(n[1]))}break;case 2:case 4:case 1:if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var o;e=this._combat.target.property.get("transform").localPosition,(o=this._locomotor.property.get("avatar")).getActionTween(0==o.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(e.x,e.y)}}return 3},u.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,this._combat.owner.off("hurt",this,this.toRevenge)},u.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0,this._combat.setTarget(null),1==this._model.selectTargetType&&-1!=this._model.selectTargetId&&-1!=DungeonModel.instance.getLiveBoss(this._model.selectTargetId)?h.instance.selectLastBoss=DungeonModel.instance.getLiveBoss(this._model.selectTargetId):h.instance.selectLastBoss=DungeonModel.instance.getLiveBoss()},u.prototype.enterMoveToMonster=function(){this._locomotor.stop(),this._step=3,this._combat.setTarget(null)},u.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=1},u.prototype.enterAttackToMonster=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=4},u.prototype.tryGoHome=function(){if(this.isValidRadius(this._transform))return!1;var t=this.getLiveBoss();return this._combat.testTarget(t)?this.enterAttackToBoss(t):this.enterMoveToSpawnpoint(),!0},u.prototype.isValidRadius=function(t){var e=this.getBossPos(),i=r.getRealPosition(e[0],e[1]),n=t.localPosition;return r.testDistance(i.x,-i.y,n.x,n.y,this._radius)},u.prototype.getBossPos=function(){if(1==this._model.selectTargetType&&-1!=this._model.selectTargetId&&-1!=DungeonModel.instance.getLiveBoss(this._model.selectTargetId))return DungeonModel.instance.getBossInfoById(this._model.selectTargetId)[3];if(2==this._model.selectTargetType&&-1!=DungeonModel.instance.getLiveBoss()){var t=this._transform.localPosition,e=o.GameCenter.instance.findNearBoss(t.x,t.y);if(e)return DungeonModel.instance.getBossInfoById(e.property.get("occ"))[3];var i=h.instance.selectLastBoss,n=DungeonModel.instance.getBossInfoById(i);if(n&&!n[2][0])return DungeonModel.instance.getBossInfoById(i)[3]}var s=DungeonModel.instance.getLiveBoss();return-1!=s?DungeonModel.instance.getBossInfoById(s)[3]:null},u.prototype.toRevenge=function(t,e,i,n){if(2!=this._step){var s=o.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&(this._combat.setTarget(s),this._locomotor.stop(),this._step=2,h.instance.selectLastBoss=this._model.selectTargetId)}},p=u,i.KillMonster=p}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d,m;function f(t,e,i){var n=s.call(this,t)||this;return n._interrupt=new r,n._tree=o.create(new a(n._interrupt).addChild(new p(new l(t),n._interrupt,0)).addChild(new p(new h(t),n._interrupt,2)).addChild(new p(new u(t),n._interrupt,3)).addChild(new c(t,1e3)).addChild(new d(t,1e3))),n}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.role.component.brain.behavior.PlayerChaseAndAttack,p=i.ai.behavior.decorator.EventNode,u=i.role.component.brain.behavior.NpcTriggerAction,d=i.role.component.brain.action.KillMonster,s=t.RoleComponent,__extends(f,s),f.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},f.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},f.prototype.destory=function(){},f.prototype.update=function(){this._tree.run()},f.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},f.prototype.interrupt=function(t){1024!=t&&2048!=t||this._interrupt.trigger(0)},f.prototype.onTargetChange=function(){this._interrupt.trigger(3)},f.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},m=f,e.TempleBossBrainComponent=m}(game=game||{}),function(r){var t,n,e,i,s,o,l,h,c,a;function p(t,e){var i=s.call(this,"BoundlessIslandKillMonster")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i}t=r.role||(r.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.action||(e.action={}),o=r.ai.behavior.Action,l=r.map.MapUtils,h=Laya.Point,c=modules.bossDungeon.BossDungeonModel,s=o,__extends(p,s),p.prototype.onEnter=function(){return 1!=this._model.selectTargetType&&(this._model.selectTargetType=0),this.enterMoveToSpawnpoint(),GlobalData.dispatcher.on("DUNGEON_BOSS_UPDATE",this,this.enterMoveToSpawnpoint),!0},p.prototype.getLiveBossOcc=function(){for(var t=modules.config.SceneCopyInfiniteCfg.instance.arr,e=modules.beast_boss.BeastBossModel.instance.era,i=-1,n=0,s=t.length;n<s;n++)for(var o=t[n][2],a=.5*o.length-1;0<=a;a--)if(e>=o[2*a]){if(i=o[2*a+1],DungeonModel.instance.getFollowBossById(i)){var r=DungeonModel.instance.getBossInfoById(i);if(r&&!r[2][0])return i}break}return this._model.selectTargetId},p.prototype.getTarget=function(){var t=this._transform.localPosition;return r.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1)},p.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;switch(this._step){case 0:if(1===this._model.selectTargetType&&-1!==this._model.selectTargetId){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);if(t&&!t[2][0]&&this.isValidRadius(this._transform,t[3])){var e=this._transform.localPosition,i=r.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId);this._combat.testTarget(i)&&(this._model.selectTargetId=i.property.get("occ"),c.instance.selectLastBoss=i.property.get("occ"),this.enterAttackToBoss(i))}}break;case 1:this._combat.isValidTarget()||this.enterMoveToSpawnpoint()}switch(this._step){case 0:if(!this._locomotor.running()&&(a=this.getBossPos())){var n=new(h.bind.apply(h,[void 0].concat(a))),s=l.nearbyPathNode(n);if(-1==s[0])return 2;n=s[1],this._locomotor.running()||((o=this._locomotor.property.get("avatar")).getActionTween(0==o.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(n))}break;case 1:if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var o,a=this._combat.target.property.get("transform").localPosition;(o=this._locomotor.property.get("avatar")).getActionTween(0==o.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(a.x,a.y)}}return 3},p.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0},p.prototype.enterMoveToSpawnpoint=function(){if(this._locomotor.stop(),this._step=0,this._combat.setTarget(null),1==this._model.selectTargetType&&-1!=this._model.selectTargetId){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);t&&!t[2][0]?c.instance.selectLastBoss=this._model.selectTargetId:this._model.selectTargetId=c.instance.selectLastBoss=this.getLiveBossOcc()}else this._model.selectTargetId=c.instance.selectLastBoss=this.getLiveBossOcc()},p.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=1},p.prototype.isValidRadius=function(t,e){var i=l.getRealPosition(e[0],e[1]),n=t.localPosition;return l.testDistance(i.x,-i.y,n.x,n.y,this._radius)},p.prototype.getBossPos=function(){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);return t?t[3]:null},a=p,i.BoundlessIslandKillMonster=a}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d;function m(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new c(new l(t),e._interrupt,0)).addChild(new c(new h(t),e._interrupt,2)).addChild(new c(new p(t),e._interrupt,3)).addChild(new u(t,1e3))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.ai.behavior.decorator.EventNode,p=i.role.component.brain.behavior.NpcTriggerAction,u=i.role.component.brain.action.BoundlessIslandKillMonster,s=t.RoleComponent,__extends(m,s),m.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},m.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},m.prototype.destory=function(){},m.prototype.update=function(){this._tree.run()},m.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},m.prototype.interrupt=function(t){1024!=t&&2048!=t||this._interrupt.trigger(0)},m.prototype.onTargetChange=function(){this._interrupt.trigger(3)},m.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},d=m,e.BoundlessIslandBrainComponent=d}(game=game||{}),function(r){var t,n,e,i,s,o,l,h,c,a;function p(t,e){var i=s.call(this,"BeastIslandKillMonster")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i}t=r.role||(r.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.action||(e.action={}),o=r.ai.behavior.Action,l=r.map.MapUtils,h=Laya.Point,c=modules.bossDungeon.BossDungeonModel,s=o,__extends(p,s),p.prototype.onEnter=function(){if(this._combat.owner.on("hurt",this,this.toRevenge),1!=this._model.selectTargetType||-1===this._model.selectTargetId){if(2===this._model.selectTargetType){if(1===this._model.oldSelectTargetType||3===this._model.oldSelectTargetType)return this._model.selectTarget(this._model.oldSelectTargetType,this._model.oldSelectTargetId),!1;this._model.selectTarget(0,-1)}this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()}return!0},p.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;switch(this._step){case 0:if(1===this._model.selectTargetType){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);if(t&&!t[2][0]&&this.isValidRadius(this._transform,t[3],this._radius)){var e=this._transform.localPosition,i=r.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId);this._combat.testTarget(i)&&(this._model.selectTargetId=i.property.get("occ"),c.instance.selectLastBoss=i.property.get("occ"),this.enterAttackToBoss(i))}}break;case 2:this._combat.isValidTarget()?this.tryGoBack():this.enterMoveToSpawnpoint();break;case 1:this._combat.isValidTarget()||this.enterMoveToSpawnpoint()}switch(this._step){case 0:if(!this._locomotor.running()&&1===this._model.selectTargetType){var n=this.getBossPos(),s=new(h.bind.apply(h,[void 0].concat(n))),o=l.nearbyPathNode(s);if(-1==o[0])return 2;s=o[1],this._locomotor.running()||((a=this._locomotor.property.get("avatar")).getActionTween(0==a.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(s))}break;case 2:case 1:if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var a;n=this._combat.target.property.get("transform").localPosition,(a=this._locomotor.property.get("avatar")).getActionTween(0==a.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(n.x,n.y)}}return 3},p.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,this._combat.owner.off("hurt",this,this.toRevenge)},p.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0,this._combat.setTarget(null)},p.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=1},p.prototype.tryGoBack=function(){if(1===this._model.selectTargetType){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);if(t&&!t[2][0]){if(!this.isValidRadius(this._transform,t[3],this._radius)){var e=this._transform.localPosition,i=r.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId);this._combat.testTarget(i)?this.enterAttackToBoss(i):this.enterMoveToSpawnpoint()}}else this.enterMoveToSpawnpoint()}},p.prototype.isValidRadius=function(t,e,i){var n=l.getRealPosition(e[0],e[1]),s=t.localPosition;return l.testDistance(n.x,-n.y,s.x,s.y,i)},p.prototype.getBossPos=function(){if(1!=this._model.selectTargetType)return null;var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);return t?t[3]:null},p.prototype.toRevenge=function(t,e,i,n){if(2!=this._step){var s=r.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&(this._combat.setTarget(s),this._locomotor.stop(),this._step=2)}},a=p,i.BeastIslandKillMonster=a}(game=game||{}),function(r){var t,n,e,i,s,o,a,l,h,c;function p(t,e){var i=s.call(this,"BeastIslandBoxAction")||this;return i._owner=t,i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i._boxIndex=-1,i._oldTargetId=-1,i}t=r.role||(r.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.action||(e.action={}),o=r.ai.behavior.Action,a=r.map.MapUtils,l=Laya.Point,h=modules.scene.SceneModel,s=o,__extends(p,s),p.prototype.onEnter=function(){return 3===this._model.selectTargetType&&this.targetChange(),3===this._model.selectTargetType},p.prototype.targetChange=function(){2!==this._model.selectTargetType&&this.enterMoveToSpawnpoint()},p.prototype.findNearest=function(){var t=this.getConfNearestBox();t&&(this._boxIndex=t.index,this._boxPos=t.pos,this._oldTargetId=this._model.selectTargetId)},p.prototype.findNext=function(){++this._boxIndex,this._locomotor.stop();var t=this.getConfNearestBox(this._boxIndex);if(t){var e=t.pos;this._boxPos=e,this._boxIndex=t.index}},p.prototype.getDistance=function(t){var e=this._transform.localPosition;return a.getRealPosition(t[0],t[1],l.TEMP),(e.x-l.TEMP.x)*(e.x-l.TEMP.x)+(e.y+l.TEMP.y)*(e.y+l.TEMP.y)},p.prototype.getSceneNearestBox=function(){for(var t,e=h.instance.npcs,i=-1,n=Number.POSITIVE_INFINITY,s=e.length-1;0<=s;--s){var o=r.GameCenter.instance.getRole(e[s][0]);if(o&&2==e[s][2]&&e[s][1]==this._model.selectTargetId){if(o.property.get("own")&&2402003!=e[s][1])continue;t=e[s][4];var a=this.getDistance([t[0],t[1]]);a<n&&(n=a,i=s)}}return-1==i?null:e[i][4]},p.prototype.getConfNearestBox=function(t){void 0===t&&(t=-1);for(var e,i=modules.config.SceneCopyMysticalCfg.instance.getBxArrByLevel(modules.beast_boss.BeastBossModel.instance.curLayer),n=0,s=i.length;n<s;n++)if((e=i[n])[7]===this._model.selectTargetId){var o=(this._cfg=e)[9];if(-1!==t)return t>=.5*o.length&&(t=0),{index:t,pos:[o[2*t],o[2*t+1]]};for(var a=Number.POSITIVE_INFINITY,r=-1,l=0,h=.5*o.length;l<h;l++){var c=this.getDistance([o[2*l],o[2*l+1]]);c<a&&(a=c,r=l)}if(-1!==r)return{index:r,pos:[o[2*r],o[2*r+1]]};break}return null},p.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;switch(this._step){case 0:if(this._boxPos&&this.isValidRadius(this._transform,this._boxPos,100))this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this.enterGathering();else if(!this._locomotor.running()&&this._boxPos&&!this.isValidRadius(this._transform,this._boxPos,100)){var t=this._locomotor.property.get("avatar");t.getActionTween(0==t.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(new l(this._boxPos[0],this._boxPos[1]))}break;case 1:for(var e=h.instance.npcs,i=void 0,n=!1,s=e.length-1;0<=s;--s)if((i=e[s][4])[0]===this._boxPos[0]&&i[1]===this._boxPos[1]){var o=r.GameCenter.instance.getRole(e[s][0]);o&&(this._roleId=o.id,this._locomotor.stop(),this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),o.property.get("own")?(WindowManager.instance.open(616,e[s][0]),this._cfg&&7===this._cfg[2]&&WindowManager.instance.open(166,e[s][0])):GlobalData.dispatcher.event("PLAYER_TRIGGER_NPC",e[s][0]),n=!0);break}n||this.enterMoveToSpawnpoint()}return 3},p.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,2!==this._model.selectTargetType&&3!==this._model.selectTargetType&&this.closeui()},p.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0,this._combat.setTarget(null);var t=this.getSceneNearestBox();t?(this._boxPos=t,this._boxIndex=-1):3!==this._model.selectTargetType||this._model.selectTargetId!==this._oldTargetId?this.findNearest():this.findNext(),this.closeui()},p.prototype.closeui=function(){WindowManager.instance.close(166),WindowManager.instance.close(616)},p.prototype.enterGathering=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=1},p.prototype.isValidRadius=function(t,e,i){var n=a.getRealPosition(e[0],e[1]),s=t.localPosition;return a.testDistance(n.x,-n.y,s.x,s.y,i)},c=p,i.BeastIslandBoxAction=c}(game=game||{}),function(s){var t,i,e,n,o,a,r,l,h,c,p,u,d,m,f;function g(t){var e=n.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new p(new l(t),e._interrupt,0)).addChild(new p(new h(t),e._interrupt,2)).addChild(new c(t,1e3)).addChild(new d(t,1e3)).addChild(new u(t,1e3))),e}t=s.role||(s.role={}),i=t.component||(t.component={}),e=i.brain||(i.brain={}),o=s.ai.behavior.BehaviorTree,a=s.ai.behavior.composite.SelectorMonitor,r=s.ai.behavior.condition.Interrupt,l=s.role.component.brain.behavior.DeathAction,h=s.role.component.brain.behavior.AbnormalAction,c=s.role.component.brain.behavior.PlayerChaseAndAttack,p=s.ai.behavior.decorator.EventNode,u=s.role.component.brain.action.BeastIslandKillMonster,d=s.role.component.brain.action.BeastIslandBoxAction,m=modules.scene.SceneModel,n=t.RoleComponent,__extends(g,n),g.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},g.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},g.prototype.destory=function(){},g.prototype.update=function(){this._tree.run()},g.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),s.GameCenter.instance.world.publish("follow",this.owner.getComponent(i.LocomotorComponent)),this._interrupt.trigger(1)},g.prototype.interrupt=function(t){1024!=t&&2048!=t||this._interrupt.trigger(0)},g.prototype.onTargetChange=function(){this._interrupt.trigger(3),Laya.timer.callLater(this,this.checkGatherHp)},g.prototype.checkGatherHp=function(){if(2===PlayerModel.instance.selectTargetType){for(var t=m.instance.npcs,e=!1,i=0,n=t.length;i<n;i++)if(s.GameCenter.instance.getRole(t[i][0]).property.get("own")===PlayerModel.instance.selectTargetId){WindowManager.instance.open(616,t[i][0]),e=!0;break}e||WindowManager.instance.close(616)}else 0!==PlayerModel.instance.selectTargetType&&WindowManager.instance.close(616)},g.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(i.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},f=g,e.BeastIslandBrainComponent=f}(game=game||{}),function(l){var t,s,e,i,o,n,h,c,a;function r(t,e,i){var n=o.call(this,"WarFireKillMonster")||this;return n._combat=t.getComponent(s.CombatComponent),n._locomotor=t.getComponent(s.LocomotorComponent),n._skill=t.getComponent(s.SkillComponent),n._transform=t.property.get("transform"),n._radius=e,n._model=PlayerModel.instance,n._step=3,i&&(t.getComponent(s.LocomotorComponent).enableSprint=!0,n._model.selectTargetType=i,n._step=0,t.getComponent(s.LocomotorComponent).enableSprint=!0),n}t=l.role||(l.role={}),s=t.component||(t.component={}),e=s.brain||(s.brain={}),i=e.action||(e.action={}),n=l.ai.behavior.Action,h=l.map.MapUtils,c=Laya.Point,o=n,__extends(r,o),r.prototype.onEnter=function(){return this._combat.owner.on("hurt",this,this.toRevenge),1===this._model.selectTargetType?-1!==this._model.selectTargetId:4===this._model.selectTargetType},r.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;switch(this._step){case 0:if(1===this._model.selectTargetType){var t=modules.fire_contention.FireContentionModel.instance.getBossInfoById(this._model.selectTargetId);if(t)if(t[2][0])this._locomotor.testCoordinate(t[3][0],t[3][1])&&this.enterToIdle();else{var e=this._transform.localPosition,i=l.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId);this._combat.testTarget(i)?this.enterAttackToBoss(i):this._locomotor.testCoordinate(t[3][0],t[3][1])&&this.enterToIdle()}else this.enterToIdle()}else if(4===this._model.selectTargetType){var n=h.getPathNode(this._model.selectTargetId);if((o=modules.config.SceneCfg.instance.getCfgById(h.currentID))[8],54===o[7]&&!n){var s=modules.config.SceneCfg.instance.getCfgById(4201)[4];n=h.getPathNode(l.GameCenter.instance.getNearAreaPath(s[0][0],s[0][1]))}n||this.enterToIdle(),this.isValidRadius(this._transform,[n.x,n.y],250)&&(e=this._transform.localPosition,i=l.GameCenter.instance.findNearbyRole(e.x,e.y,400,1),this._combat.testTarget(i)?this.enterAttackToBoss(i):this._locomotor.testCoordinate(n.x,n.y)&&this.enterToIdle())}break;case 2:case 1:this._combat.isValidTarget()||this.enterMoveToSpawnpoint();break;case 3:0===this._model.selectTargetType||this._combat.isValidTarget()||this.enterMoveToSpawnpoint()}switch(this._step){case 0:if(!this._locomotor.running())if(1===this._model.selectTargetType)(a=this.getBossPos())&&(n=new(c.bind.apply(c,[void 0].concat(a))),(r=this._locomotor.property.get("avatar")).getActionTween(0==r.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(n));else if(4===this._model.selectTargetType){var o;n=h.getPathNode(this._model.selectTargetId),(o=modules.config.SceneCfg.instance.getCfgById(h.currentID))[8],54!==o[7]||n||(s=modules.config.SceneCfg.instance.getCfgById(4201)[4],n=h.getPathNode(l.GameCenter.instance.getNearAreaPath(s[0][0],s[0][1]))),(r=this._locomotor.property.get("avatar")).getActionTween(0==r.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),n?this._locomotor.moveToCoordinate(n):this.enterToIdle()}break;case 2:case 1:if(this._combat.isValidRange())this._locomotor.stop(),(r=this._locomotor.property.get("avatar")).getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var a=this._combat.target.property.get("transform").localPosition;(r=this._locomotor.property.get("avatar")).getActionTween(0==r.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(a.x,a.y)}break;case 3:var r;(r=this._locomotor.property.get("avatar")).getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()}return 3},r.prototype.onExit=function(){this._locomotor.stop(),this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this._combat.setTarget(null),this._step=0,this._combat.owner.off("hurt",this,this.toRevenge)},r.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this._step=0,this._combat.setTarget(null)},r.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this._combat.setTarget(t),this._step=1},r.prototype.enterToIdle=function(){this._locomotor.stop(),this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this._step=3},r.prototype.isValidRadius=function(t,e,i){var n=h.getRealPosition(e[0],e[1]),s=t.localPosition;return h.testDistance(n.x,-n.y,s.x,s.y,i)},r.prototype.getBossPos=function(){if(1!=this._model.selectTargetType)return null;var t=modules.fire_contention.FireContentionModel.instance.getBossInfoById(this._model.selectTargetId);return t?t[3]:null},r.prototype.toRevenge=function(t,e,i,n){if(!this._combat.isValidTarget()&&0!==this._step&&2!=this._step){var s=l.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&(this._combat.setTarget(s),this._locomotor.stop(),this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this._step=2)}},a=r,i.WarFireKillMonster=a}(game=game||{}),function(a){var t,n,e,i,s,o,r;function l(t,e){var i=s.call(this,"WarFireFollowAndAttack")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i}t=a.role||(a.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.behavior||(e.behavior={}),o=a.ai.behavior.Action,s=o,__extends(l,s),l.prototype.onEnter=function(){return 5==this._model.selectTargetType},l.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(5!=this._model.selectTargetType)return 2;var t=modules.dungeon.DungeonModel.instance.pos;if(!t)return 2;var e=MapUtils.getRealPosition(t[0],t[1]),i=this._transform.localPosition,n=a.GameCenter.instance.getRole(this._model.selectTargetId);if(n){var s,o=n.property.get("transform").position;return MapUtils.testDistance(i.x,i.y,o.x,o.y,250)?this._combat.isValidTarget()?(this._locomotor.stop(),this._combat.combat(this._skill.selectSkill()),3):(this.setTarget(),this._combat.isValidTarget()?(this._locomotor.stop(),this._combat.combat(this._skill.selectSkill()),3):2):(this._locomotor.running()||(s=this._locomotor.property.get("avatar")).getActionTween(0==s.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(o.x,o.y),3)}return this._locomotor.running()||(s=this._locomotor.property.get("avatar")).getActionTween(0==s.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(e.x,-e.y),3},l.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null)},l.prototype.setTarget=function(){var t;-1!=this._model.selectTargetId&&(t=a.GameCenter.instance.getRole(this._model.selectTargetId)),this._combat.testTarget(t)?this._combat.setTarget(t):this._combat.setTarget(null)},r=l,i.WarFireFollowAndAttack=r}(game=game||{}),function(s){var t,i,e,n,o,a,r,l,h,c,p,u,d,m,f,g,y,_,v,I;function b(t){var e=n.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new c(new l(t),e._interrupt,0)).addChild(new c(new h(t),e._interrupt,2)).addChild(new c(new d(new m(t)),e._interrupt,3)).addChild((new f).addChild(new g(t,1e3,2)).addChild(new y(t,1e3,2))).addChild(new v(t,1e3)).addChild(new u(t,1e3)).addChild((new f).addChild(new g(t,1e3,1)).addChild(new y(t,1e3,1))).addChild(new _(t))),e}t=s.role||(s.role={}),i=t.component||(t.component={}),e=i.brain||(i.brain={}),o=s.ai.behavior.BehaviorTree,a=s.ai.behavior.composite.SelectorMonitor,r=s.ai.behavior.condition.Interrupt,l=s.role.component.brain.behavior.DeathAction,h=s.role.component.brain.behavior.AbnormalAction,c=s.ai.behavior.decorator.EventNode,p=modules.scene.SceneModel,u=s.role.component.brain.action.WarFireKillMonster,d=s.ai.behavior.decorator.AlwaysSuccess,m=s.role.component.brain.behavior.NpcTriggerAction,f=s.ai.behavior.composite.Sequence,g=s.role.component.brain.action.ChaseAndAttack,y=s.role.component.brain.action.Patrol,_=s.role.component.brain.action.Revenge,v=s.role.component.brain.behavior.WarFireFollowAndAttack,n=t.RoleComponent,__extends(b,n),b.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},b.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},b.prototype.destory=function(){},b.prototype.update=function(){this._tree.run()},b.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),s.GameCenter.instance.world.publish("follow",this.owner.getComponent(i.LocomotorComponent)),this._interrupt.trigger(1)},b.prototype.interrupt=function(t){1024!=t&&2048!=t||this._interrupt.trigger(0)},b.prototype.onTargetChange=function(){this._interrupt.trigger(3),Laya.timer.callLater(this,this.checkGatherHp)},b.prototype.checkGatherHp=function(){if(2===PlayerModel.instance.selectTargetType){for(var t=p.instance.npcs,e=!1,i=0,n=t.length;i<n;i++)if(s.GameCenter.instance.getRole(t[i][0]).property.get("own")===PlayerModel.instance.selectTargetId){WindowManager.instance.open(616,t[i][0]),e=!0;break}e||WindowManager.instance.close(616)}else 0!==PlayerModel.instance.selectTargetType&&WindowManager.instance.close(616)},b.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(i.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},I=b,e.WarFireBrainComponent=I}(game=game||{}),function(e){var o,t,i,a,n;function s(t,e,i,n){var s=a.call(this,t)||this;return s._sprite=new o.RoleAvatar(n,!GlobalData.getNoEff(s.property)),s.property.set("avatar",s._sprite),s.property.set("transform",s._sprite.transform),s._master=e,s._layer=i,s.property.set("shadow",{width:256,height:128,uvs:[0,0,1,1],matrix:s._sprite.transform.localMatrix}),s}o=e.role||(e.role={}),t=o.component||(o.component={}),i=t.exterior||(t.exterior={}),a=o.RoleComponent,__extends(s,a),s.prototype.setup=function(){this._sprite.reset(""),this.updateExterior(),this._sprite.direction=this.property.get("direction")-90,this._master.property.on("baby",this,this.updateExterior),this._master.property.on("exterior",this,this.updateExterior),this._master.property.on("isUnseen",this,this.updateExterior),this._master.on("visible",this,this.visible),e.GameCenter.instance.world.publish("addToLayer",this._layer,this._sprite),e.GameCenter.instance.world.publish("castShadow",!0,this.property.get("shadow")),4!==this.property.get("type")?GlobalData.dispatcher.on("NO_EFF",this,this.noEff):GlobalData.dispatcher.on("NO_OWN_EFF",this,this.noEff)},s.prototype.teardown=function(){this._sprite.removeSelf(),this._master.property.off("baby",this,this.updateExterior),this._master.property.off("exterior",this,this.updateExterior),this._master.property.off("isUnseen",this,this.updateExterior),this._master.off("visible",this,this.visible),e.GameCenter.instance.world.publish("castShadow",!1,this.property.get("shadow")),GlobalData.dispatcher.off("NO_EFF",this,this.noEff),GlobalData.dispatcher.off("NO_OWN_EFF",this,this.noEff)},s.prototype.destory=function(){this._sprite.destroy()},s.prototype.noEff=function(){this._sprite.noEff(!GlobalData.getNoEff(this.property))},s.prototype.updateExterior=function(){this._sprite.clothes=this._master.property.get("baby");var t=this.property.get("isUnseen");this._sprite.alpha&&(this._sprite.alpha=t?CommonUtil.alpanNum:1)},s.prototype.visible=function(t){this._sprite.active!=t&&(this.owner.publish("visible",t),this._sprite.active=t,e.GameCenter.instance.world.publish("castShadow",t,this.property.get("shadow")))},n=s,i.BabyAvatarComponent=n}(game=game||{}),function(t){var e,i,n,s,o,a,r,l,h;function c(t,e){var i=s.call(this,t)||this;return i._tree=o.create((new a).addChild(new r(t,e,120)).addChild(new l(t,500,!0,.1))),i}e=t.role||(t.role={}),i=e.component||(e.component={}),n=i.brain||(i.brain={}),o=t.ai.behavior.BehaviorTree,a=t.ai.behavior.composite.Selector,r=t.role.component.brain.behavior.FollowAndAttack,l=t.role.component.brain.behavior.RestAction,s=e.RoleComponent,__extends(c,s),c.prototype.setup=function(){this.owner.on("combatComplete",this,this.idle)},c.prototype.teardown=function(){this.owner.off("combatComplete",this,this.idle)},c.prototype.idle=function(){this.owner.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()},c.prototype.destory=function(){},c.prototype.update=function(){this._tree.run()},h=c,n.BabyBrainComponent=h}(game=game||{}),function(t){var o,a,e,r,l,h,c,i;function n(t){return e.call(this,t)||this}o=t.role||(t.role={}),a=o.component||(o.component={}),r=t.role.component.brain.PlayerPetBrainComponent,l=modules.config.SceneCfg,h=t.role.component.exterior.BabyAvatarComponent,c=t.role.component.brain.BabyBrainComponent,e=o.RoleComponent,__extends(n,e),n.prototype.setup=function(){var t=this.property;t.get("baby")?this.updateExterior():t.once("baby",this,this.updateExterior),this.property.on("name",this,this.updateName),this.property.on("isUnseen",this,this.updateIsUnseen),this.property.on("teamId",this,this.updateIsUnseen),GlobalData.dispatcher.on("UPDATE_WARBAND_WARGATHER_LIST",this,this.updatePkMode)},n.prototype.updatePkMode=function(){this._baby&&(this._baby.property.set("teamId",this.property.get("teamId")),this._baby.getComponent(a.TitleComponent).updatePkMode())},n.prototype.teardown=function(){this.property.off("baby",this,this.updateExterior),this.property.off("name",this,this.updateName),this.property.off("isUnseen",this,this.updateIsUnseen),this.property.off("teamId",this,this.updateIsUnseen),GlobalData.dispatcher.off("UPDATE_WARBAND_WARGATHER_LIST",this,this.updatePkMode)},n.prototype.destory=function(){null!=this._baby&&this._baby.destory(),this._baby=null},n.prototype.update=function(){null!=this._baby&&this._baby.update()},n.prototype.updateName=function(){this._baby&&this._baby.property.set("name",this.property.get("name")+"的仙娃")},n.prototype.updateIsUnseen=function(){this._baby&&this._baby.property.set("isUnseen",this.property.get("isUnseen"))},n.prototype.updateExterior=function(){if(null==this._baby){var t=this.property;if(t.get("baby")){var e=new o.Role(this.owner.id);if(4==t.get("type"))e.addComponent(h,this.owner,5,!0),e.addComponent(a.TitleComponent,1),e.addComponent(a.LocomotorComponent,!1),e.addComponent(a.SkillComponent,[],void 0,void 0,!0),e.addComponent(a.CombatComponent,this.owner),e.addComponent(c,this.owner);else{var i=l.instance.getCfgById(MapUtils.currentID);e.addComponent(h,this.owner,5,!i[14]),e.addComponent(a.TitleComponent,1),e.addComponent(a.LocomotorComponent,!1),e.addComponent(a.CombatComponent,this.owner),e.addComponent(r,this.owner,200)}var n=e.property;n.set("name",t.get("name")+"的仙娃"),n.set("isUnseen",t.get("isUnseen")),n.set("direction",360*Math.random()),n.set("speed",1.2*t.get("speed")),n.set("type",t.get("type")),n.set("teamId",t.get("teamId")),n.set("warbandId",t.get("warbandId")),n.set("factionId",t.get("factionId")),n.set("syncNoEffect",t.get("syncNoEffect")),e.on("useSkill",this,this.useSkill),this._baby=e,this.owner.property.set("babyContext",e),this._baby.enter();var s=t.get("pos");this._baby.publish("setCoordinate",s.x+30-60*Math.random(),s.y+30-60*Math.random())}}},n.prototype.useSkill=function(t,e){this.owner.publish("useSkill",t,e)},i=n,a.BabyProxyComponent=i}(game=game||{}),function(c){var t,e,i,p,u,d,n;function s(t){var e=i.call(this,t)||this;return e._buffs=[],e}t=c.role||(c.role={}),e=t.component||(t.component={}),p=modules.config.EffectCfg,u=base.particle.ParticlePool,d=c.misc.RoleUtils,i=t.RoleComponent,__extends(s,i),s.prototype.setup=function(){this.owner.on("buff",this,this.updateBuffs)},s.prototype.teardown=function(){this.owner.off("buff",this,this.updateBuffs)},s.prototype.destory=function(){if(this._buffs&&0<this._buffs.length)for(var t=this._buffs.length;0<t;--t)this._buffs[t-1][1]&&(this._buffs[t-1][1].removeSelf(),this._buffs[t-1][1].destroy(!0),this._buffs[t-1][1]=null),this._buffs[t-1][2]&&(this._buffs[t-1][2].removeSelf(),this._buffs[t-1][2].destroy(!0),this._buffs[t-1][2]=null),this._buffs.splice(t-1,1);this._buffs=null},s.prototype.update=function(){for(var t=this.owner.property.get("avatar"),e=0;e<this._buffs.length;++e)this._buffs[e][1]&&this._buffs[e][1].transform&&(this._buffs[e][1].transform.localPosition=new Laya.Vector3(t.body.transform.position.x,t.body.transform.position.y,0),d.projectionRotateY(this._buffs[e][1].transform,t.direction)),this._buffs[e][2]&&this._buffs[e][2].transform&&(this._buffs[e][2].transform.localPosition=new Laya.Vector3(t.body.transform.position.x,t.body.transform.position.y,0),d.projectionRotateY(this._buffs[e][2].transform,t.direction))},s.prototype.updateBuffs=function(t,e){if(1===t){for(var i=0;i<e.length;++i)if(20801001===e[i][1]&&console.log("添加buff特效:",e[i][1],"对象:",this.owner.property.get("name")),(r=p.instance.getCfgById(e[i][1]))&&(r[5]||r[6])){var n=void 0;n=[e[i][0],null,null],this._buffs.push(n);var s,o=this.owner.property.get("avatar");null!=(l=r[5])&&""!=l&&((s=u.instance.loadParticle("assets/particle/"+l+".lh")).transform.localPosition=new Laya.Vector3(o.body.transform.position.x,o.body.transform.position.y,0),d.projectionRotateY(s.transform,o.direction),c.GameCenter.instance.world.publish("addToLayer",10,s),n[1]=s),null!=(l=r[6])&&""!=l&&((s=u.instance.loadParticle("assets/particle/"+l+".lh")).transform.localPosition=new Laya.Vector3(o.body.transform.position.x,o.body.transform.position.y,0),d.projectionRotateY(s.transform,o.direction),c.GameCenter.instance.world.publish("addToLayer",3,s),n[2]=s)}}else if(2===t)for(i=0;i<e.length;++i){20801001===e[i][1]&&console.log("移除buff特效:",e[i][1],"对象:",this.owner.property.get("name"));for(var a=0;a<this._buffs.length;++a)if(e[i][0]===this._buffs[a][0]){this._buffs[a][1]&&(this._buffs[a][1].removeSelf(),this._buffs[a][1].destroy(!0),this._buffs[a][1]=null),this._buffs[a][2]&&(this._buffs[a][2].removeSelf(),this._buffs[a][2].destroy(!0),this._buffs[a][2]=null),this._buffs.splice(a,1);break}var r;if((r=p.instance.getCfgById(e[i][1]))&&(r[7]||r[8])){var l,h=this.owner.property;null!=(l=r[7])&&""!=l&&c.GameCenter.instance.world.publish("launchEffect",0,"assets/particle/"+l+".lh",h.get("transform").localPosition,h.get("avatar").direction),null!=(l=r[8])&&""!=l&&c.GameCenter.instance.world.publish("launchEffect",1,"assets/particle/"+l+".lh",h.get("transform").localPosition,h.get("avatar").direction)}}},n=s,e.BuffComponent=n}(game=game||{}),function(e){var t,n,i,s,o,a,r,l,h;function c(t,e){var i=o.call(this,"ForbiddenBossChaseAndAttack")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i}t=e.role||(e.role={}),n=t.component||(t.component={}),i=n.brain||(n.brain={}),s=i.behavior||(i.behavior={}),a=e.ai.behavior.Action,r=e.map.MapUtils,l=Laya.Point,o=a,__extends(c,o),c.prototype.onEnter=function(){if(1==this._model.selectTargetType&&-1!=this._model.selectTargetId)return!0;var t=this._locomotor.property.get("avatar");return t.getActionTween(0==t.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),!1},c.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(1!=this._model.selectTargetType||-1==this._model.selectTargetId)return 2;switch(this._step){case 0:if(this.isValidRadius(this._transform)){var t=this.getTarget();if(this._combat.testTarget(t))this.enterAttackToBoss(t);else if(3!=this.gotoStatus())return 2}break;case 1:this._combat.isValidTarget()||(this.enterMoveToSpawnpoint(),WindowManager.instance.close(45))}switch(this._step){case 0:if(!this._locomotor.running()){if(!(s=this.getTargetPos()))return 3;var e=new(l.bind.apply(l,[void 0].concat(s))),i=r.nearbyPathNode(e);if(-1==i[0])return 2;e=i[1],this._locomotor.running()||((n=this._locomotor.property.get("avatar")).getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(e))}break;case 1:if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var n,s=this._combat.target.property.get("transform").localPosition;(n=this._locomotor.property.get("avatar")).getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(s.x,s.y)}}return 3},c.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0},c.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0},c.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=1,modules.forbiddenBoss.ForbiddenBossModel.instance.selectBossId=0},c.prototype.gotoStatus=function(){var t=this.getTargetPos();if(!t)return 2;var e=new(l.bind.apply(l,[void 0].concat(t))),i=r.nearbyPathNode(e);return-1==i[0]?2:(e=i[1],this._locomotor.testCoordinate(e.x,e.y)?1:3)},c.prototype.isValidRadius=function(t){var e=this.getTargetPos();if(!e)return!1;var i=r.getRealPosition(e[0],e[1]),n=t.localPosition;return r.testDistance(i.x,-i.y,n.x,n.y,this._radius)},c.prototype.getTarget=function(){var t=this._transform.localPosition;return e.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,this._model.selectTargetId)},c.prototype.getTargetPos=function(){return modules.forbiddenBoss.ForbiddenBossModel.instance.dummy?null:DungeonModel.instance.bossIsDead(PlayerModel.instance.selectTargetId)?null:DungeonModel.instance.getBossInfoById(PlayerModel.instance.selectTargetId)[3]},h=c,s.ForbiddenBossChaseAndAttack=h}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u;function d(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new c(new l(t),e._interrupt,0)).addChild(new c(new h(t),e._interrupt,2)).addChild(new p(t,600))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.ai.behavior.decorator.EventNode,p=i.role.component.brain.behavior.ForbiddenBossChaseAndAttack,s=t.RoleComponent,__extends(d,s),d.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},d.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},d.prototype.destory=function(){},d.prototype.update=function(){this._tree.run()},d.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},d.prototype.interrupt=function(t){1024!=t&&2048!=t||this._interrupt.trigger(0)},d.prototype.onTargetChange=function(){this._interrupt.trigger(3)},d.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},u=d,e.ForbiddenBossBrainComponent=u}(game=game||{}),function(l){var t,n,e,i,s,o,a;function r(t,e){var i=s.call(this,"UnionWarFollow")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i}t=l.role||(l.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.behavior||(e.behavior={}),o=l.ai.behavior.Action,s=o,__extends(r,s),r.prototype.onEnter=function(){return!0},r.prototype.onUpdate=function(){var t=this._locomotor.property.get("avatar");if(0===this._model.selectTargetType)return t.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),3;var e=modules.dungeon.DungeonModel.instance.pos;if(!e)return t.getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),3;var i=MapUtils.getRealPosition(e[0],e[1]),n=this._transform.localPosition,s=l.GameCenter.instance.getRole(this._model.selectTargetId);if(s){var o=s.property.get("transform").position;if(MapUtils.testDistance(n.x,n.y,o.x,o.y,10))return this._locomotor.stop(),3;if(!this._locomotor.running()){var a=this._locomotor.property.get("avatar");a.getActionTween(0==a.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return this._locomotor.moveTo(o.x,o.y),3}if(!this._locomotor.running()){var r=this._locomotor.property.get("avatar");r.getActionTween(0==r.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return this._locomotor.moveTo(i.x,-i.y),3},r.prototype.onExit=function(){this._locomotor.stop()},a=r,i.UnionWarFollow=a}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h;function c(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new l(t,1e3))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.UnionWarFollow,s=t.RoleComponent,__extends(c,s),c.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit)},c.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit)},c.prototype.destory=function(){},c.prototype.update=function(){this._tree.run()},c.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},c.prototype.interrupt=function(t){1024!=t&&2048!=t||this._interrupt.trigger(0)},c.prototype.onTargetChange=function(){this._interrupt.trigger(3)},c.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},h=c,e.UnionWarComponent=h}(game=game||{}),function(r){var t,n,e,i,s,o,a,l,h,c;function p(t,e){var i=s.call(this,"UnionBoxAction")||this;return i._owner=t,i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i._oldTargetId=-1,i}t=r.role||(r.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.action||(e.action={}),o=r.ai.behavior.Action,a=r.map.MapUtils,l=Laya.Point,h=modules.scene.SceneModel,s=o,__extends(p,s),p.prototype.onEnter=function(){return 3===this._model.selectTargetType&&this.targetChange(),3===this._model.selectTargetType},p.prototype.targetChange=function(){2!==this._model.selectTargetType&&this.enterMoveToSpawnpoint()},p.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(3!=this._model.selectTargetType)return 2;switch(this._step){case 0:if(this._boxPos&&this.isValidRadius(this._transform,this._boxPos,100))this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this.enterGathering();else if(!this._locomotor.running()&&this._boxPos&&!this.isValidRadius(this._transform,this._boxPos,100)){var t=this._locomotor.property.get("avatar");t.getActionTween(0==t.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(new l(this._boxPos[0],this._boxPos[1]))}break;case 1:for(var e=h.instance.npcs,i=void 0,n=!1,s=e.length-1;0<=s;--s)if((i=e[s][4])[0]===this._boxPos[0]&&i[1]===this._boxPos[1]){var o=r.GameCenter.instance.getRole(e[s][0]);if(o){this._roleId=o.id,this._locomotor.stop(),this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start();var a=o.property.get("own");if(modules.union_war.UnionWarModel.instance.oldSelectTargetId=0,a){if(!modules.faction.FactionModel.instance.isTongXianMeng(a))return PlayerModel.instance.selectTarget(2,a),CommonUtil.noticeError(0,"敌方正在夺取,攻击夺取者"),this.closeWin(),console.log("正在采集的玩家是地方 攻击敌方归属者 PlayerModel.instance.selectTargetId:"+PlayerModel.instance.selectTargetId),modules.union_war.UnionWarModel.instance.oldSelectTargetId=e[s][0],2;if(a===PlayerModel.instance.actorId)WindowManager.instance.open(616,e[s][0]);else if(a!=PlayerModel.instance.actorId&&a!=PlayerModel.instance.selectTargetId)return PlayerModel.instance.selectTarget(2,-1),CommonUtil.noticeError(0,"己方正在夺取,开始巡逻防御"),this.closeWin(),console.log("正在采集的玩家是盟友 巡逻PlayerModel.instance.selectTargetId:"+PlayerModel.instance.selectTargetId),2}else{if(modules.union_war.UnionWarModel.instance.getStateByOcc(e[s][1]))return PlayerModel.instance.selectTarget(2,-1),CommonUtil.noticeError(0,"我方已占领此区域，开始巡逻防御"),this.closeWin(),console.log("采集物 属于自己仙盟 巡逻 PlayerModel.instance.selectTargetId:"+PlayerModel.instance.selectTargetId),2;console.log("仙盟争霸 采集:"+e[s][0]),GlobalData.dispatcher.event("PLAYER_TRIGGER_NPC",e[s][0])}n=!0}break}n||(console.log("找不到这个箱子 先处理巡逻"),this.closeWin(),PlayerModel.instance.selectTarget(2,-1))}return 3},p.prototype.closeWin=function(){WindowManager.instance.close(166),WindowManager.instance.close(616)},p.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,2!==this._model.selectTargetType&&3!==this._model.selectTargetType&&WindowManager.instance.close(166)},p.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0,this._combat.setTarget(null),this._oldTargetId=this._model.selectTargetId;var t=modules.union_war.UnionWarModel.instance.tableCollectionPosByOcc[this._oldTargetId];this._boxPos=[t[0],t[1]],this.closeWin()},p.prototype.enterGathering=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=1},p.prototype.isValidRadius=function(t,e,i){var n=a.getRealPosition(e[0],e[1]),s=t.localPosition;return a.testDistance(n.x,-n.y,s.x,s.y,i)},c=p,i.UnionBoxAction=c}(game=game||{}),function(o){var t,a,e,i,r,n,s,l,h;function c(t,e,i,n){void 0===n&&(n=null);var s=r.call(this,"UnionChaseAndAttack")||this;return s._skipTargetFunc=n,s._transform=t.property.get("transform"),s._combat=t.getComponent(a.CombatComponent),s._locomotor=t.getComponent(a.LocomotorComponent),s._skill=t.getComponent(a.SkillComponent),s._radius=e,s._model=PlayerModel.instance,s._targetType=i,s._interrupt=!1,s}t=o.role||(o.role={}),a=t.component||(t.component={}),e=a.brain||(a.brain={}),i=e.action||(e.action={}),n=o.ai.behavior.Action,s=o.map.MapUtils,l=modules.scene.SceneUtil,r=n,__extends(c,r),c.prototype.interrupt=function(t,e,i,n){var s=o.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&this._combat.target!==s&&(this._interrupt=!0)},c.prototype.onEnter=function(){return this._model.selectTargetType==this._targetType&&(48!==l.currScene&&this._locomotor.owner.on("hurt",this,this.interrupt),!0)},c.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(this._model.selectTargetType!=this._targetType||this._interrupt)return 2;if(this._combat.isValidTarget()){var t=this._transform.localPosition,e=this._combat.target.property.get("transform").localPosition;if(!s.testDistance(t.x,t.y,e.x,e.y,this._radius)){if(i=this.getTarget(),!this._combat.testTarget(i))return WindowManager.instance.close(45),1;this._combat.setTarget(i)}}else{var i=this.getTarget();if(!this._combat.testTarget(i))return WindowManager.instance.close(45),3===this._model.oldSelectTargetType?o.GameCenter.instance.getRole(modules.union_war.UnionWarModel.instance.oldSelectTargetId)?(PlayerModel.instance.selectTarget(3,this._model.oldSelectTargetId),2):(PlayerModel.instance.selectTarget(2,-1),1):1;this._combat.setTarget(i)}if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){e=this._combat.target.property.get("transform").localPosition,this._locomotor.moveTo(e.x,e.y);var n=this._locomotor.property.get("avatar");n.getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return 3},c.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._locomotor.owner.off("hurt",this,this.interrupt),this._interrupt=!1},c.prototype.getTarget=function(){switch(this._model.selectTargetType){case 1:var t=this._transform.localPosition;return-1!=this._model.selectTargetId?o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,this._model.selectTargetId):o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1);case 2:case 3:return-1!=this._model.selectTargetId?o.GameCenter.instance.getRole(this._model.selectTargetId):(t=this._transform.localPosition,o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,3,0,this._model.actorId,39===l.currScene?this._combat.owner.property.get("warbandId"):-1,this._skipTargetFunc))}return null},h=c,i.UnionChaseAndAttack=h}(game=game||{}),function(s){var t,i,e,n,o,a,r,l,h,c,p,u,d,m,f,g,y;function _(t){var e=n.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new c(new l(t),e._interrupt,0)).addChild(new c(new h(t),e._interrupt,2)).addChild((new m).addChild(new f(t,1e3,2,e._skipTargetFunc.bind(e))).addChild(new g(t,1e3,2,e._skipTargetFunc.bind(e)))).addChild(new p(t,1e3)).addChild(new d(t))),e}t=s.role||(s.role={}),i=t.component||(t.component={}),e=i.brain||(i.brain={}),o=s.ai.behavior.BehaviorTree,a=s.ai.behavior.composite.SelectorMonitor,r=s.ai.behavior.condition.Interrupt,l=s.role.component.brain.behavior.DeathAction,h=s.role.component.brain.behavior.AbnormalAction,c=s.ai.behavior.decorator.EventNode,p=s.role.component.brain.action.UnionBoxAction,u=modules.scene.SceneModel,d=s.role.component.brain.action.Revenge,m=s.ai.behavior.composite.Sequence,f=s.role.component.brain.action.UnionChaseAndAttack,g=s.role.component.brain.action.Patrol,n=t.RoleComponent,__extends(_,n),_.prototype._skipTargetFunc=function(t){if(t){var e=t.property.get("id");return modules.faction.FactionModel.instance.isTongXianMeng(e)}return!0},_.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},_.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},_.prototype.destory=function(){},_.prototype.update=function(){this._tree.run()},_.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),s.GameCenter.instance.world.publish("follow",this.owner.getComponent(i.LocomotorComponent)),this._interrupt.trigger(1)},_.prototype.interrupt=function(t){1024!=t&&2048!=t||(this._interrupt.trigger(0),WindowManager.instance.close(166))},_.prototype.onTargetChange=function(){this._interrupt.trigger(3),Laya.timer.callLater(this,this.checkGatherHp)},_.prototype.checkGatherHp=function(){if(2===PlayerModel.instance.selectTargetType){for(var t=u.instance.npcs,e=!1,i=0,n=t.length;i<n;i++)if(s.GameCenter.instance.getRole(t[i][0]).property.get("own")===PlayerModel.instance.selectTargetId){console.log("checkGatherHp 打开 归属者血条 "),WindowManager.instance.open(616,t[i][0]),e=!0;break}e||WindowManager.instance.close(616)}else 0!==PlayerModel.instance.selectTargetType&&WindowManager.instance.close(616)},_.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(i.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},y=_,e.UnionWarComponent1=y}(game=game||{}),function(o){var t,a,e,i,r,n,l,s,h;function c(t,e,i,n){void 0===n&&(n=null);var s=r.call(this,"StrongestMarryChaseAndAttack")||this;return s._skipTargetFunc=n,s.property=t.property,s._transform=t.property.get("transform"),s._combat=t.getComponent(a.CombatComponent),s._locomotor=t.getComponent(a.LocomotorComponent),s._skill=t.getComponent(a.SkillComponent),s._radius=e,s._model=PlayerModel.instance,s._targetType=i,s._interrupt=!1,s}t=o.role||(o.role={}),a=t.component||(t.component={}),e=a.brain||(a.brain={}),i=e.action||(e.action={}),n=o.ai.behavior.Action,l=o.map.MapUtils,s=modules.scene.SceneUtil,r=n,__extends(c,r),c.prototype.interrupt=function(t,e,i,n){var s=o.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&this._combat.target!==s&&(this._interrupt=!0)},c.prototype.onEnter=function(){return this._model.selectTargetType==this._targetType&&(48!==s.currScene&&this._locomotor.owner.on("hurt",this,this.interrupt),!0)},c.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(this._model.selectTargetType!=this._targetType||this._interrupt)return 2;if(this._combat.isValidTarget()){var t=this._transform.localPosition,e=this._combat.target.property.get("transform").localPosition;if(!l.testDistance(t.x,t.y,e.x,e.y,this._radius)){if(i=this.getTarget(),!this._combat.testTarget(i))return WindowManager.instance.close(45),PlayerModel.instance.selectTarget(2,-1),1;this._combat.setTarget(i)}}else{var i=this.getTarget();if(!this._combat.testTarget(i))return WindowManager.instance.close(45),PlayerModel.instance.selectTarget(2,-1),1;if(this._combat.setTarget(i),i){var n=i.property.get("id");PlayerModel.instance.selectTarget(2,n||-1),console.log("设置目标目标：",n)}}if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){e=this._combat.target.property.get("transform").localPosition,this._locomotor.moveTo(e.x,e.y);var s=this._locomotor.property.get("avatar");s.getActionTween(0==s.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return 3},c.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._locomotor.owner.off("hurt",this,this.interrupt),this._interrupt=!1},c.prototype.getTarget=function(){switch(this._model.selectTargetType){case 1:var t=this._transform.localPosition;return-1!=this._model.selectTargetId?o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,this._model.selectTargetId):o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1);case 2:return-1!=this._model.selectTargetId?o.GameCenter.instance.getRole(this._model.selectTargetId):(t=this._transform.localPosition,o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,3,0,this._model.actorId,39===s.currScene?this._combat.owner.property.get("warbandId"):-1,this._skipTargetFunc))}return null},h=c,i.StrongestMarryChaseAndAttack=h}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d,m,f;function g(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new c(new l(t),e._interrupt,0)).addChild(new c(new h(t),e._interrupt,2)).addChild((new p).addChild(new m(t,1e3,2,e.skipTarget.bind(e))).addChild(new d(t,1e3,2,e.skipTarget.bind(e)))).addChild(new u(t))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.ai.behavior.decorator.EventNode,p=i.ai.behavior.composite.Sequence,u=i.role.component.brain.action.Revenge,d=i.role.component.brain.action.Patrol,m=i.role.component.brain.action.StrongestMarryChaseAndAttack,s=t.RoleComponent,__extends(g,s),g.prototype.skipTarget=function(t){if(t&&this.property){var e=t.property;if(e){var i=e.get("teamId");return this.property.get("teamId")===i}}return!0},g.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),this.owner.getComponent(n.LocomotorComponent).enableSprint=!1,GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange),this.owner.getComponent(n.LocomotorComponent).enableSprint=!0},g.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),this.owner.getComponent(n.LocomotorComponent).enableSprint=!0,GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},g.prototype.destory=function(){},g.prototype.update=function(){this._tree.run()},g.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},g.prototype.interrupt=function(t){1024==t&&PlayerModel.instance.selectTarget(0,-1),1024!=t&&2048!=t||this._interrupt.trigger(0)},g.prototype.onTargetChange=function(){this._interrupt.trigger(3)},g.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},f=g,e.CoupleBattleBrainComponent1=f}(game=game||{}),function(u){var t,e,i,d,n;function s(t){return i.call(this,t)||this}t=u.role||(u.role={}),e=t.component||(t.component={}),d=modules.config.SkillEffectCfg,i=t.RoleComponent,__extends(s,i),s.prototype.setup=function(){this.owner.on("updateZhanhun",this,this.onUpdateZhanhun)},s.prototype.teardown=function(){this.owner.off("updateZhanhun",this,this.onUpdateZhanhun)},s.prototype.onUpdateZhanhun=function(t,e){var i=t[0],n=t[1],s=t[2],o=modules.config.SoulWarCfg.instance.getHuanhuaOutlook(n),a=this.owner&&this.owner.property?this.owner.property.get("avatar"):null;if(a){if(0==s)return void a.hideZhanhun();var r=u.GameCenter.instance.getRole(i),l=!1;if(r&&(l=!GlobalData.getNoEff(r.property)),a.setZhanhun(t[1],!e,l),!e&&l){var h=d.instance.getCfgById(o);if(null==h)throw new Error("SkillEffect不存在战魂的外观技能："+o);var c=this.owner.property,p=h[7];null!=p&&""!=p&&Laya.timer.once(0,u.GameCenter.instance.world,u.GameCenter.instance.world.publish,["launchEffect",0,"assets/particle/"+p+".lh",c.get("transform").localPosition,1==h[6]?c.get("avatar").direction:0],!1),null!=(p=h[8])&&""!=p&&Laya.timer.once(0,u.GameCenter.instance.world,u.GameCenter.instance.world.publish,["launchEffect",1,"assets/particle/"+p+".lh",c.get("transform").localPosition,1==h[6]?c.get("avatar").direction:0],!1),null!=(p=h[13])&&""!=p&&Laya.timer.once(0,u.GameCenter.instance.world,u.GameCenter.instance.world.publish,["launchEffect",0,"assets/particle/"+p+".lh",c.get("transform").localPosition,1==h[6]?c.get("avatar").direction:0],!1),null!=(p=h[14])&&""!=p&&Laya.timer.once(0,u.GameCenter.instance.world,u.GameCenter.instance.world.publish,["launchEffect",1,"assets/particle/"+p+".lh",c.get("transform").localPosition,1==h[6]?c.get("avatar").direction:0],!1)}}},s.prototype.destory=function(){if(this.owner&&this.owner.property){var t=this.owner.property.get("avatar");t&&t.destroyZhanhun()}},n=s,e.ZhanhunComponent=n}(game=game||{}),function(l){var t,n,e,i,s,o,a,h,c,r;function p(t,e){var i=s.call(this,"TeamWarfareBoxAction")||this;return i._owner=t,i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i._oldTargetId=-1,i}t=l.role||(l.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.action||(e.action={}),o=l.ai.behavior.Action,a=l.map.MapUtils,h=Laya.Point,c=modules.scene.SceneModel,s=o,__extends(p,s),p.prototype.onEnter=function(){return 3===this._model.selectTargetType&&this.targetChange(),3===this._model.selectTargetType},p.prototype.targetChange=function(){2!==this._model.selectTargetType&&this.enterMoveToSpawnpoint()},p.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(3!=this._model.selectTargetType)return 2;switch(this._step){case 0:var t=100;if(this._oldTargetId===modules.team_warfare.TeamWarfareModel.instance.myHomeId?(t=200,this._locomotor.enableSprint=!1):this._locomotor.enableSprint=!0,this._boxPos&&this.isValidRadius(this._transform,this._boxPos,t))this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start(),this.enterGathering();else if(!this._locomotor.running()&&this._boxPos&&!this.isValidRadius(this._transform,this._boxPos,t)){var e=this._locomotor.property.get("avatar");e.getActionTween(0==e.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(new h(this._boxPos[0],this._boxPos[1]))}break;case 1:if(this._oldTargetId==modules.team_warfare.TeamWarfareModel.instance.myHomeId)return modules.team_warfare.TeamWarfareCtrl.instance.GatherPutDown(),PlayerModel.instance.selectTarget(0,-1),CommonUtil.noticeError(0,"到达基地 放下物资 待机"),this.closeWin(),2;for(var i=c.instance.npcs,n=void 0,s=!1,o=i.length-1;0<=o;--o)if((n=i[o][4])[0]===this._boxPos[0]&&n[1]===this._boxPos[1]){var a=l.GameCenter.instance.getRole(i[o][0]);if(a){this._roleId=a.id,this._locomotor.stop(),this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start();var r=a.property.get("own");if(modules.team_warfare.TeamWarfareModel.instance.oldSelectTargetId=0,r){if(!modules.warband.WarbandModel.instance.isMyWarBandPeople(r))return PlayerModel.instance.selectTarget(2,r),CommonUtil.noticeError(0,"敌方正在夺取,攻击夺取者"),this.closeWin(),console.log("正在采集的玩家是地方 攻击敌方归属者 PlayerModel.instance.selectTargetId:"+PlayerModel.instance.selectTargetId),modules.team_warfare.TeamWarfareModel.instance.oldSelectTargetId=i[o][0],2;if(r===PlayerModel.instance.actorId)WindowManager.instance.open(616,i[o][0]);else if(r!=PlayerModel.instance.actorId&&r!=PlayerModel.instance.selectTargetId)return PlayerModel.instance.selectTarget(2,-1),CommonUtil.noticeError(0,"己方正在夺取,开始巡逻防御"),this.closeWin(),console.log("正在采集的玩家是队友 巡逻PlayerModel.instance.selectTargetId:"+PlayerModel.instance.selectTargetId),2}else{if(!modules.team_warfare.TeamWarfareModel.instance._clickGathering)return PlayerModel.instance.selectTarget(2,-1),CommonUtil.noticeError(0,"开始巡逻防御，点击采集炎晶开始采集"),GlobalData.dispatcher.event("PLAYER_TRIGGER_NPC",i[o][0]),this.closeWin(),2;modules.npc.NpcModel.instance.isGathering||(CommonUtil.noticeError(0,"开始采集"),modules.npc.NpcCtrl.instance.gather(modules.npc.NpcModel.instance.triggeredNpcId,0))}s=!0}break}s||(console.log("找不到这个箱子 先处理巡逻"),this.closeWin(),PlayerModel.instance.selectTarget(2,-1))}return 3},p.prototype.closeWin=function(){WindowManager.instance.close(616)},p.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,2!==this._model.selectTargetType&&this._model.selectTargetType},p.prototype.enterMoveToSpawnpoint=function(){if(this._locomotor.stop(),this._step=0,this._combat.setTarget(null),this._oldTargetId=this._model.selectTargetId,this._oldTargetId===modules.team_warfare.TeamWarfareModel.instance.myHomeId){var t=modules.team_warfare.TeamWarfareModel.instance.myHomePos;this._boxPos=[t[0],t[1]],console.log("前往 出生点  "+this._boxPos)}else t=modules.team_warfare.TeamWarfareModel.instance.tableCollectionPosByOcc[this._oldTargetId],this._boxPos=[t[1],t[2]],console.log("前往 炎晶点  "+this._boxPos);this.closeWin()},p.prototype.enterGathering=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=1},p.prototype.isValidRadius=function(t,e,i){var n=a.getRealPosition(e[0],e[1]),s=t.localPosition;return a.testDistance(n.x,-n.y,s.x,s.y,i)},r=p,i.TeamWarfareBoxAction=r}(game=game||{}),function(o){var t,a,e,i,r,n,s,l,h;function c(t,e,i,n){void 0===n&&(n=null);var s=r.call(this,"TeamWarfareChaseAndAttack")||this;return s._skipTargetFunc=n,s._transform=t.property.get("transform"),s._combat=t.getComponent(a.CombatComponent),s._locomotor=t.getComponent(a.LocomotorComponent),s._skill=t.getComponent(a.SkillComponent),s._radius=e,s._model=PlayerModel.instance,s._targetType=i,s._interrupt=!1,s._locomotor.speed,s}t=o.role||(o.role={}),a=t.component||(t.component={}),e=a.brain||(a.brain={}),i=e.action||(e.action={}),n=o.ai.behavior.Action,s=o.map.MapUtils,l=modules.scene.SceneUtil,r=n,__extends(c,r),c.prototype.interrupt=function(t,e,i,n){var s=o.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&(this._interrupt=!0)},c.prototype.onEnter=function(){return this._model.selectTargetType==this._targetType},c.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(this._model.selectTargetType!=this._targetType||this._interrupt)return 2;if(this._locomotor.property.get("isUnseen"))return WindowManager.instance.close(45),1;if(this._combat.isValidTarget()){var t=this._transform.localPosition,e=this._combat.target.property.get("transform").localPosition;if(!s.testDistance(t.x,t.y,e.x,e.y,this._radius)){if(i=this.getTarget(),!this._combat.testTarget(i))return WindowManager.instance.close(45),1;this._combat.setTarget(i)}}else{var i=this.getTarget();if(!this._combat.testTarget(i))return WindowManager.instance.close(45),3===this._model.oldSelectTargetType&&(0!=modules.team_warfare.TeamWarfareModel.instance.gatherOcc?(console.log("杀死了敌人 身上有搬运物   去基地"),PlayerModel.instance.selectTarget(3,modules.team_warfare.TeamWarfareModel.instance.myHomeId)):0!=this._model.oldSelectTargetId&&-1!=this._model.selectTargetId?(console.log("战队逐鹿 NPC目标还在 去找"),modules.team_warfare.TeamWarfareModel.instance._clickGathering=!1,PlayerModel.instance.selectTarget(3,this._model.oldSelectTargetId)):PlayerModel.instance.selectTarget(2,-1)),1;this._combat.setTarget(i)}if(this._locomotor.enableSprint=!0,this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){e=this._combat.target.property.get("transform").localPosition,this._locomotor.moveTo(e.x,e.y);var n=this._locomotor.property.get("avatar");n.getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start()}return 3},c.prototype.onExit=function(){this._locomotor.stop(),this._locomotor.owner.off("hurt",this,this.interrupt),this._interrupt=!1,WindowManager.instance.close(45)},c.prototype.getTarget=function(){switch(this._model.selectTargetType){case 1:var t=this._transform.localPosition;return-1!=this._model.selectTargetId?o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,this._model.selectTargetId):o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1);case 2:case 3:return-1!=this._model.selectTargetId?o.GameCenter.instance.getRole(this._model.selectTargetId):(t=this._transform.localPosition,o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,3,0,this._model.actorId,56===l.currScene?this._combat.owner.property.get("warbandId"):-1,this._skipTargetFunc))}return null},h=c,i.TeamWarfareChaseAndAttack=h}(game=game||{}),function(a){var t,n,e,i,s,o,r;function l(t,e){var i=s.call(this,"TeamWarfareFollow")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i}t=a.role||(a.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.behavior||(e.behavior={}),o=a.ai.behavior.Action,s=o,__extends(l,s),l.prototype.onEnter=function(){return 5==this._model.selectTargetType},l.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(5!=this._model.selectTargetType)return 2;var t=modules.dungeon.DungeonModel.instance.pos;if(!t)return 2;this._locomotor.enableSprint=!0;var e=MapUtils.getRealPosition(t[0],t[1]),i=this._transform.localPosition,n=a.GameCenter.instance.getRole(this._model.selectTargetId);if(n){var s,o=n.property.get("transform").position;return MapUtils.testDistance(i.x,i.y,o.x,o.y,this._radius)?this._combat.isValidTarget()?(this._locomotor.stop(),this._combat.combat(this._skill.selectSkill()),3):(this.setTarget(),this._combat.isValidTarget()?(this._locomotor.stop(),this._combat.combat(this._skill.selectSkill()),3):2):(this._locomotor.running()||(s=this._locomotor.property.get("avatar")).getActionTween(0==s.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(o.x,o.y),3)}return this._locomotor.running()||(s=this._locomotor.property.get("avatar")).getActionTween(0==s.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(e.x,-e.y),3},l.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null)},l.prototype.setTarget=function(){var t;-1!=this._model.selectTargetId&&(t=a.GameCenter.instance.getRole(this._model.selectTargetId)),this._combat.testTarget(t)?this._combat.setTarget(t):this._combat.setTarget(null)},r=l,i.TeamWarfareFollow=r}(game=game||{}),function(o){var t,i,e,n,s,a,r,l,h,c,p,u,d,m,f,g,y,_;function v(t){var e=n.call(this,t)||this;return e._interrupt=new r,e._tree=s.create(new a(e._interrupt).addChild(new c(new l(t),e._interrupt,0)).addChild(new c(new h(t),e._interrupt,2)).addChild((new d).addChild(new f(t,1e3,2,e._skipTargetFunc.bind(e))).addChild(new m(t,1e3,2,e._skipTargetFunc.bind(e)))).addChild(new y(t,30)).addChild(new g(t,1e3)).addChild(new u(t))),e}t=o.role||(o.role={}),i=t.component||(t.component={}),e=i.brain||(i.brain={}),s=o.ai.behavior.BehaviorTree,a=o.ai.behavior.composite.SelectorMonitor,r=o.ai.behavior.condition.Interrupt,l=o.role.component.brain.behavior.DeathAction,h=o.role.component.brain.behavior.AbnormalAction,c=o.ai.behavior.decorator.EventNode,p=modules.scene.SceneModel,u=o.role.component.brain.action.Revenge,d=o.ai.behavior.composite.Sequence,m=o.role.component.brain.action.Patrol,f=o.role.component.brain.action.TeamWarfareChaseAndAttack,g=o.role.component.brain.action.TeamWarfareBoxAction,y=o.role.component.brain.behavior.TeamWarfareFollow,n=t.RoleComponent,__extends(v,n),v.prototype._skipTargetFunc=function(t){if(t){var e=t.property.get("id");return modules.warband.WarbandModel.instance.isMyWarBandPeople(e)}return!0},v.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("isUnseen",this,this.interrupt1).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},v.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("isUnseen",this,this.interrupt1).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},v.prototype.destory=function(){},v.prototype.update=function(){this._tree.run()},v.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),o.GameCenter.instance.world.publish("follow",this.owner.getComponent(i.LocomotorComponent)),this._interrupt.trigger(1)},v.prototype.interrupt=function(t){1024!=t&&2048!=t||(this._interrupt.trigger(0),WindowManager.instance.close(166))},v.prototype.interrupt1=function(t){t&&(console.log("变成了幽灵 待机~~~~~~~~~~~~~~"),PlayerModel.instance.selectTarget(0,-1),WindowManager.instance.close(166))},v.prototype.onTargetChange=function(){var t=this.owner.getComponent(i.CombatComponent);t&&t.setTarget(null),this._interrupt.trigger(3),Laya.timer.callLater(this,this.checkGatherHp)},v.prototype.checkGatherHp=function(){if(2===PlayerModel.instance.selectTargetType){for(var t=p.instance.npcs,e=!1,i=0,n=t.length;i<n;i++){var s=o.GameCenter.instance.getRole(t[i][0]);if(console.log("归属： ",s.property.get("own")),s.property.get("own")===PlayerModel.instance.selectTargetId){console.log("checkGatherHp 打开 归属者血条 "),WindowManager.instance.open(616,t[i][0]),e=!0;break}}e||WindowManager.instance.close(616)}else 0!==PlayerModel.instance.selectTargetType&&WindowManager.instance.close(616)},v.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(i.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},_=v,e.TeamWarfareComponent=_}(game=game||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u,d,m;function f(t){var e=s.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new p(new l(t),e._interrupt,0)).addChild(new p(new h(t),e._interrupt,2)).addChild(new p(new u(new c(t)),e._interrupt,3)).addChild(new d(t,1e3,4))),e}t=i.role||(i.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),o=i.ai.behavior.BehaviorTree,a=i.ai.behavior.composite.SelectorMonitor,r=i.ai.behavior.condition.Interrupt,l=i.role.component.brain.behavior.DeathAction,h=i.role.component.brain.behavior.AbnormalAction,c=i.role.component.brain.behavior.NpcTriggerAction,p=i.ai.behavior.decorator.EventNode,u=i.ai.behavior.decorator.AlwaysSuccess,d=i.role.component.brain.action.WarFireKillMonster,s=t.RoleComponent,__extends(f,s),f.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),this.owner.getComponent(n.LocomotorComponent).enableSprint=!0,GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},f.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),this.owner.getComponent(n.LocomotorComponent).enableSprint=!0,GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},f.prototype.destory=function(){},f.prototype.update=function(){this._tree.run()},f.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),i.GameCenter.instance.world.publish("follow",this.owner.getComponent(n.LocomotorComponent)),this._interrupt.trigger(1)},f.prototype.interrupt=function(t){1024==t&&PlayerModel.instance.selectTarget(0,-1),1024!=t&&2048!=t||this._interrupt.trigger(0)},f.prototype.onTargetChange=function(){this._interrupt.trigger(3)},f.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(n.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},m=f,e.WelfarePlaceComponent=m}(game=game||{}),function(r){var t,n,e,i,s,o,l,h,c,a;function p(t,e){var i=s.call(this,"TrahmanBossIslandKillMonster")||this;return i._context=t.property,i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i}t=r.role||(r.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.action||(e.action={}),o=r.ai.behavior.Action,l=r.map.MapUtils,h=Laya.Point,c=modules.bossDungeon.BossDungeonModel,s=o,__extends(p,s),p.prototype.onEnter=function(){if(this._combat.owner.on("hurt",this,this.toRevenge),1!=this._model.selectTargetType||-1===this._model.selectTargetId){if(2===this._model.selectTargetType){if(1===this._model.oldSelectTargetType)return this._model.selectTarget(this._model.oldSelectTargetType,this._model.oldSelectTargetId),!1;this._model.selectTarget(0,-1)}this._locomotor.property.get("avatar").getActionTween("stand").repeat(Number.POSITIVE_INFINITY).start()}return!0},p.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;switch(this._step){case 0:if(1===this._model.selectTargetType){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);if(t&&!t[2][0]&&this.isValidRadius(this._transform,t[3],this._radius)){var e=this._transform.localPosition,i=r.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId);this._combat.testTarget(i)&&(this._model.selectTargetId=i.property.get("occ"),c.instance.selectLastBoss=i.property.get("occ"),this.enterAttackToBoss(i))}}break;case 2:this._combat.isValidTarget()?this.tryGoBack():this.enterMoveToSpawnpoint();break;case 1:this._combat.isValidTarget()||this.enterMoveToSpawnpoint()}switch(this._step){case 0:if(!this._locomotor.running()&&1===this._model.selectTargetType){var n=this.getSpawnpoint(),s=new(h.bind.apply(h,[void 0].concat(n))),o=l.nearbyPathNode(s);if(-1==o[0])return 2;s=o[1],this._locomotor.running()||((a=this._locomotor.property.get("avatar")).getActionTween(0==a.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(s))}break;case 2:case 1:if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var a;n=this._combat.target.property.get("transform").localPosition,(a=this._locomotor.property.get("avatar")).getActionTween(0==a.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(n.x,n.y)}}return 3},p.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,this._combat.owner.off("hurt",this,this.toRevenge)},p.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0,this._combat.setTarget(null)},p.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=1},p.prototype.tryGoBack=function(){if(1===this._model.selectTargetType){var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);if(t&&!t[2][0]){if(!this.isValidRadius(this._transform,t[3],this._radius)){var e=this._transform.localPosition,i=r.GameCenter.instance.findNearbyRole(e.x,e.y,this._radius,1,this._model.selectTargetId);this._combat.testTarget(i)?this.enterAttackToBoss(i):this.enterMoveToSpawnpoint()}}else this.enterMoveToSpawnpoint()}},p.prototype.isValidRadius=function(t,e,i){var n=l.getRealPosition(e[0],e[1]),s=t.localPosition;return l.testDistance(n.x,-n.y,s.x,s.y,i)},p.prototype.getBossPos=function(){if(1!=this._model.selectTargetType)return null;var t=DungeonModel.instance.getBossInfoById(this._model.selectTargetId);return t?t[3]:null},p.prototype.toRevenge=function(t,e,i,n){if(2!=this._step){var s=r.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&(this._combat.setTarget(s),this._locomotor.stop(),this._step=2)}},p.prototype.getSpawnpoint=function(){var t=this._context.get("transform").localPosition,e=l.nearbyPathIdNode(l.getPosition(t.x,-t.y))[0];if(-1==e)return null;var i=l.findNextPathNode(e);return null==i?null:(console.log("找boss 随机到的点：",i),[i[1].x,i[1].y])},a=p,i.TrahmanBossIslandKillMonster=a}(game=game||{}),function(s){var t,i,e,n,o,a,r,l,h,c,p,u,d,m;function f(t){var e=n.call(this,t)||this;return e._interrupt=new r,e._tree=o.create(new a(e._interrupt).addChild(new p(new l(t),e._interrupt,0)).addChild(new p(new h(t),e._interrupt,2)).addChild(new c(t,1e3)).addChild(new u(t,400))),e}t=s.role||(s.role={}),i=t.component||(t.component={}),e=i.brain||(i.brain={}),o=s.ai.behavior.BehaviorTree,a=s.ai.behavior.composite.SelectorMonitor,r=s.ai.behavior.condition.Interrupt,l=s.role.component.brain.behavior.DeathAction,h=s.role.component.brain.behavior.AbnormalAction,c=s.role.component.brain.behavior.PlayerChaseAndAttack,p=s.ai.behavior.decorator.EventNode,u=s.role.component.brain.action.TrahmanBossIslandKillMonster,d=modules.scene.SceneModel,n=t.RoleComponent,__extends(f,n),f.prototype.setup=function(){this.property.on("status",this,this.interrupt).on("actorState",this,this.updateAbnormal),this.owner.on("transmit",this,this.transmit),GlobalData.dispatcher.on("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},f.prototype.teardown=function(){this.property.off("status",this,this.interrupt).off("actorState",this,this.updateAbnormal),this.owner.off("transmit",this,this.transmit),GlobalData.dispatcher.off("PLAYER_TARGET_CHANGE",this,this.onTargetChange)},f.prototype.destory=function(){},f.prototype.update=function(){this._tree.run()},f.prototype.transmit=function(t,e){this.property.set("spawnpoint",-1),this.owner.publish("setCoordinate",t,e),s.GameCenter.instance.world.publish("follow",this.owner.getComponent(i.LocomotorComponent)),this._interrupt.trigger(1)},f.prototype.interrupt=function(t){1024!=t&&2048!=t||(this._interrupt.trigger(0),WindowManager.instance.close(616))},f.prototype.onTargetChange=function(){this._interrupt.trigger(3),Laya.timer.callLater(this,this.checkGatherHp)},f.prototype.checkGatherHp=function(){if(2===PlayerModel.instance.selectTargetType){for(var t=d.instance.npcs,e=!1,i=0,n=t.length;i<n;i++)if(s.GameCenter.instance.getRole(t[i][0]).property.get("own")===PlayerModel.instance.selectTargetId){WindowManager.instance.open(616,t[i][0]),e=!0;break}e||WindowManager.instance.close(616)}else 0!==PlayerModel.instance.selectTargetType&&WindowManager.instance.close(616)},f.prototype.updateAbnormal=function(t){8&t&&this._interrupt.trigger(2),this.owner.getComponent(i.SkillComponent).onlyCommon=!!(16&t),this.owner.publish("abnormal",t)},m=f,e.TrahmanBossComponent=m}(game=game||{}),function(t){var e,i=base.ecs.Entity,n=base.ecs.MessageDispatcher,f=t.map.MapUtils,s=t.role.component.brain.CommonBrainComponent,l=t.role.component.brain.HomeBossBrainComponent,h=t.role.component.brain.HumanBrainComponent,c=t.role.component.CombatComponent,p=t.role.component.exterior.AvatarComponent,o=t.role.component.exterior.MonsterAvatarComponent,u=t.role.component.LocomotorComponent,d=t.role.component.PetProxyComponent,m=t.role.component.SkillComponent,g=t.role.component.TitleComponent,a=t.role.Role,r=t.world.component.CameraComponent,y=t.world.component.HUDComponent,_=t.world.component.LayerComponent,v=t.world.component.LiteralComponent,I=t.world.component.PackageComponent,b=t.world.component.ShadowComponent,C=modules.config.SceneCfg,T=t.role.component.exterior.NpcAvatarComponent,w=t.role.component.brain.TopBrainComponent,x=t.role.component.brain.GardenBrainComponent,B=modules.config.NpcCfg,P=t.role.component.FeatureComponent,S=t.role.component.brain.BattleBrainComponent,A=t.role.component.brain.CoupleBattleBrainComponent,M=t.role.component.brain.CoupleBattleBrainComponent1,E=t.role.component.brain.WelfarePlaceComponent,R=t.role.component.exterior.SwimsuitAvatarComponent,D=t.role.component.SuperPetProxyComponent,L=t.role.component.brain.GatherBrainComponent,k=t.role.component.brain.YunmengBrainComponent,U=t.role.component.brain.TempleBossBrainComponent,H=modules.bossDungeon.BossDungeonModel,O=modules.sound.SoundCtrl,F=t.role.component.brain.BoundlessIslandBrainComponent,G=t.role.component.brain.BeastIslandBrainComponent,V=t.role.component.brain.WarFireBrainComponent,N=t.role.component.BabyProxyComponent,W=t.role.component.BuffComponent,z=modules.scene.SceneUtil,q=t.role.component.brain.ForbiddenBossBrainComponent,j=t.role.component.brain.UnionWarComponent,X=t.role.component.brain.UnionWarComponent1,Y=t.role.component.ZhanhunComponent,Z=t.role.component.brain.TeamWarfareComponent,J=t.role.component.brain.TrahmanBossComponent,Q=(e=n,__extends(K,e),Object.defineProperty(K,"instance",{get:function(){return null==this._instance&&(this._instance=new K),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(K.prototype,"world",{get:function(){return this._world},enumerable:!0,configurable:!0}),K.prototype.createRole=function(t,e){if(null!=this._roles[t])throw new Error("重复进入"+t);var i=new a(t);return i.property.set("type",e),this._roles[t]=i},K.prototype.getRole=function(t){return this._roles[t]},K.prototype.findNearbyRole=function(t,e,i,n,s,o,a,r){void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=-1),void 0===r&&(r=null);var l=Number.MAX_VALUE,h=null;for(var c in i*=i,this._roles){var p=this._roles[c];if(0==o||o!=p.id){var u=p.property;if(!(u.get("type")!=n||1024==u.get("status")||u.get("isUnseen")||u.get("warbandId")===a||r&&r(p)||0!=s&&u.get("occ")!=s||64&(u.get("actorState")||0))){var d=u.get("transform").localPosition,m=t-d.x,f=e-d.y,g=m*m+f*f;g<l&&g<i&&(h=p,l=g)}}}return h},K.prototype.findNearBoss=function(t,e){var i=Number.MAX_VALUE,n=null,s=H.instance.searchBossIds;for(var o in this._roles){var a=this._roles[o],r=a.property;if(1==r.get("type")&&1024!=r.get("status")&&!(s.indexOf(r.get("occ"))<0||64&(r.get("actorState")||0))){var l=r.get("transform").localPosition,h=t-l.x,c=e-l.y,p=h*h+c*c;p<i&&(n=a,i=p)}}return n},K.prototype.filterNearbyRole=function(t,e,i,n,s){var o=Number.MAX_VALUE,a=null;for(var r in i*=i,this._roles){var l=this._roles[r],h=l.property;if(h.get("type")==n&&1024!=h.get("status")&&s(l)){var c=h.get("transform").localPosition,p=t-c.x,u=e-c.y,d=p*p+u*u;d<o&&d<i&&(a=l,o=d)}}return a},K.prototype.enterScene=function(){Laya.timer.clear(this,this.onUpdate),Laya.timer.frameLoop(1,this,this.onUpdate)},K.prototype.leaveScene=function(){for(var t in Laya.timer.clear(this,this.onUpdate),this._roles)this._roles[t].destory(),delete this._roles[t];this._world.publish("follow",null)},K.prototype.leaveRole=function(t){var e=this._roles[t];null!=e&&(e.property.set("destroyed",!0),e.destory(),delete this._roles[t])},K.prototype.enterRole=function(t){var e=this._roles[t];if(null==e)throw new Error;if(e.isEnter)throw new Error;switch(e.property.get("type")){case 4:this.enterMaster(e);break;case 3:this.enterPlayer(e);break;case 1:this.enterMonster(e);break;case 6:this.enterNpc(e);break;default:throw new Error}var i=e.property.get("pos");e.enter(),e.publish("setCoordinate",i.x,i.y);var n=z.currScene;4==e.property.get("type")?(this._world.publish("enterMaster",e),45===n?this._world.publish("follow",e.getComponent(u),!1,[95*f.cellWidth,0]):this._world.publish("follow",e.getComponent(u))):e.property.get("type")},K.prototype.onUpdate=function(){for(var t in this._world.update(),this._roles)this._roles[t].update()},K.prototype.enterMaster=function(t){var e=C.instance.getCfgById(f.currentID),i=e[7];22!=i?t.addComponent(p,6,!0,t.property.get("isOB")):t.addComponent(R,6);var n=600;if(45===i&&(n=1),t.addComponent(u,!0,0!=e[12],n,1e3),modules.union_war.UnionWarModel.instance.isFactionMatch()&&t.addComponent(j),!t.property.get("isOB")){switch(t.addComponent(g,39===i||55===i||56===i?9:7),t.addComponent(m,[80010001,80020001,80030001,80040001,80050001,80060001,80070001,80080001,80090001]),t.addComponent(c),t.addComponent(W),t.addComponent(Y),22!=i&&(t.addComponent(d),t.addComponent(N)),i){case 12:var s=H.instance;t.addComponent(l,function(){return H.instance.selectTargetPos},s.getBossOnwer.bind(s));break;case 15:t.addComponent(D),t.addComponent(x);break;case 14:t.addComponent(w);break;case 16:t.addComponent(S);break;case 17:t.addComponent(L);break;case 21:var o=modules.yunmeng.YunMengMiJingModel.instance;t.addComponent(k,function(){return o.selectTargetPos},function(t){return 0});break;case 47:case 31:var a=H.instance;t.addComponent(U,function(){return a.selectTargetPos},function(t){return 0});break;case 36:t.addComponent(F);break;case 37:t.addComponent(G);break;case 19:case 23:t.addComponent(S);break;case 50:case 48:case 24:t.addComponent(S);break;case 45:t.addComponent(A);break;case 35:case 49:var r=H.instance;t.addComponent(U,function(){return r.selectTargetPos},function(t){return 0});break;case 39:t.addComponent(V);break;case 46:t.addComponent(S);break;case 44:t.addComponent(q);break;case 43:t.addComponent(X);break;case 51:t.addComponent(M);break;case 56:t.addComponent(Z);break;case 54:t.addComponent(E);break;case 57:t.addComponent(J);break;default:t.addComponent(h)}t.on("useSkill",this,this.useSkill)}},K.prototype.enterPlayer=function(t){if(!t.property.get("isOB")){var e=C.instance.getCfgById(f.currentID),i=e[7];22!=i?t.addComponent(p,5,!e[14],t.property.get("isOB")):t.addComponent(R,5),t.addComponent(u,!1),t.addComponent(g,39===i||55===i||56===i?9:3),t.addComponent(c),t.addComponent(W),t.addComponent(Y),t.addComponent(s),22!=i&&(t.addComponent(d),t.addComponent(N))}},K.prototype.enterMonster=function(t){t.addComponent(o,4),t.addComponent(g,0),t.addComponent(u,!1),t.addComponent(c),t.addComponent(s)},K.prototype.enterNpc=function(t){t.addComponent(T,8),t.addComponent(u,!1);var e=B.instance.getCfgById(t.property.get("occ"));if(null==e)throw new Error("NPC类型"+t.property.get("occ")+"不存在！");var i=e[4];null!=i&&""!=i&&(t.property.set("name",i),t.addComponent(g,1));var n=e[6]||0;0!=n&&7!==n&&8!==n&&9!==n&&t.addComponent(P)},K.prototype.createWorld=function(){var t=new i,e=t.addComponent(r,Laya.stage.height);t.addComponent(_,e.sprite,Laya.stage.width,Laya.stage.height),t.addComponent(b,"assets/image/shadow.png"),t.addComponent(I,"assets/image/image.png"),t.addComponent(v,["assets/image/image.png",[508,1121],[[[154,1097,22,10],[0,0],[]],[[450,199,22,21],[0,0],[]],[[370,199,80,44],[0,0],[]],[[300,938,136,72],[0,0],[]],[[370,128,135,71],[0,0],[]],[[440,996,68,27],[0,0],[]],[[436,938,68,29],[0,0],[]],[[436,967,67,29],[0,0],[]],[[154,1045,18,26],[9,0,0,0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,8,0],[]],[[154,1071,18,26],[9,0,0,0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,8,0],[]],[[220,1010,22,35],[9,0,0,0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,8,0],[]],[[0,1006,22,35],[9,0,0,0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,8,0],[]],[[0,128,37,64],[9,0,0,0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,8,0],[]],[[0,192,37,64],[9,0,0,0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,8,0],[]],[[0,64,50,64],[9,0,0,0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,8,0],[]],[[0,1041,154,80],[0,0],[]],[[0,0,50,64],[9,0,0,0,1,0,2,0,3,0,4,0,5,0,6,0,7,0,8,0],[]],[[300,856,162,82],[0,0],[]]]]),t.addComponent(y),t.enter(),this._world=t},K.prototype.useSkill=function(t,e){Channel.instance.publish(5242882,[t,e]),O.instance.playSkillSound(e)},K.prototype.getNearAreaPath=function(t,e){for(var i=modules.welfare_place.WelfarePlaceModel.instance.searchIds,n=i[0][1],s=0,o=i.length;s<o;s++)for(var a=0,r=i[a].length;a<r;a++){var l=f.getPathNode(i[s][a]);if(l){var h=t-l.x,c=e-l.y,p=h*h+c*c,u=f.getPathNode(n),d=t-u.x,m=e-u.y;p<d*d+m*m&&(n=i[s][a])}}return n},K);function K(){var t=e.call(this)||this;return t._roles={},t.createWorld(),t}t.GameCenter=Q}(game=game||{}),function(i){var n,t,e,s,o,a;function r(){return t.call(this)||this}n=i.nine||(i.nine={}),e=i.core.BaseCtrl,s=game.misc.LogUtils,o=i.scene.SceneUtil,t=e,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16777457,this.getNineCopyRankReply),this.subscribe(16777455,this.getNineCopyReply),this.subscribe(16777456,this.updateNineCopy),this.subscribe(16777453,this.scenePromote),this.subscribe(16777454,this.updateScore),this.subscribe(16777357,this.nineCopyJudgeAward),this.subscribe(16777479,this.UpdateNineSceneInfo),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType).onGlobal("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this.getNineCopy),this.getNineCopy(),CustomDataCtrl.instance.getCustomizeData([27])},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(120==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(120))return void n.NineModel.instance.setRP()},r.prototype.getNineCopyRank=function(){s.info(12,"获取九天排名......................"),this.publish(7340432,null)},r.prototype.getNineCopyRankReply=function(t){s.info(12,"获取九天排名返回......................"+t),n.NineModel.instance.ranks=t[0]},r.prototype.getNineCopy=function(){s.info(12,"获取九天之巅个人数据.............."),this.publish(2100852,null)},r.prototype.getNineCopyReply=function(t){s.info(12,"获取九天之巅个人数据返回............."+t),n.NineModel.instance.nineCopy=t[0]},r.prototype.updateNineCopy=function(t){s.info(12,"更新九天副本............."+t),n.NineModel.instance.nineCopy=t[0]},r.prototype.scenePromote=function(t){s.info(12,"场景晋级......................."+t),n.NineModel.instance.scenePromote=t,PlayerModel.instance.selectTarget(0,-1),8===t[1]&&14==o.currScene?WindowManager.instance.open(160,1):WindowManager.instance.open(160,2),44==o.currScene&&(i.forbiddenBoss.ForbiddenBossModel.instance.dummy=!0)},r.prototype.updateScore=function(t){s.info(12,"更新积分......................."+t),n.NineModel.instance.score=t},r.prototype.nineCopyJudgeAward=function(t){s.info(12,"九天之巅副本结算......................."+t),WindowManager.instance.open(163,t)},r.prototype.UpdateNineSceneInfo=function(t){s.info(12,"九天之巅 刷新boss剩余所需数量............."+t),1===t[1]?n.NineModel.instance.haveNum=t[0]:n.NineModel.instance.killNum=t[0],GlobalData.dispatcher.event("UPDATE_NINE_SCENE_INFO")},a=r,n.NineCtrl=a}(modules=modules||{}),function(t){var e,s,i;function n(){this.init()}e=t.config||(t.config={}),s=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._lvDic=new s,this._weightCfgs=new Array;var t=GlobalData.getConfig("pay_reward_weight");this._weightCfgs=t[0][1],this._weightCfgs.sort(this.shortWeightCfgs);for(var e=0,i=this._weightCfgs.length;e<i;e++){var n=this._weightCfgs[e];this._lvDic.set(n[0],n)}},n.prototype.shortWeightCfgs=function(t,e){return t[0]-e[0]},n.prototype.getWeightCfgs=function(){return this._weightCfgs},n.prototype.getlvDicLeng=function(){return this._lvDic.keys.length},n.prototype.get_pay_reward_weight=function(t){return this._lvDic.get(t)},i=n,e.payRewardWeightCfg=i}(modules=modules||{}),function(t){var e,n,i;function s(){this._cfgs=new Array,this.init()}e=t.config||(t.config={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._lvDic=new n,this._cfgs=GlobalData.getConfig("pay_reward_reward");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];this._lvDic.set(i[0],i)}},s.prototype.getlvDicLeng=function(){return this._lvDic.keys.length},s.prototype.get_pay_reward_reward=function(t){return this._lvDic.get(t)},s.prototype.get_condition=function(t){return null==this._lvDic.get(t)?99999:this._lvDic.get(t)[1]},s.prototype.get_reward=function(t){return this._lvDic.get(t)[2]},i=s,e.PayRewardCfg=i}(modules=modules||{}),function(t){var e,i,n;function s(){this._xianFaId=0,this._xianLingId=0,this._maxNum=0,this._updateTime=0,this._gatherCount=0,this._nextRefreshTime=0,this._closeNum=0,this._rewardArr=[],this._firstJoin=!0,this.xianLingId=i.instance.getCfgById(28001)[1][0],this.xianFaId=i.instance.getCfgById(28001)[1][1],this.maxNum=i.instance.getCfgById(28002)[1][0],this.updateTime=i.instance.getCfgById(28004)[1][0]}e=t.day_drop_treasure||(t.day_drop_treasure={}),i=t.config.BlendCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xianFaId",{get:function(){return this._xianFaId},set:function(t){this._xianFaId=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xianLingId",{get:function(){return this._xianLingId},set:function(t){this._xianLingId=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxNum",{get:function(){return this._maxNum},set:function(t){this._maxNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"updateTime",{get:function(){return this._updateTime},set:function(t){this._updateTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"gatherCount",{get:function(){return this._gatherCount},set:function(t){this._gatherCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rewardArr",{get:function(){return this._rewardArr},set:function(t){this._rewardArr=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nextRefreshTime",{get:function(){return this._nextRefreshTime},set:function(t){this._nextRefreshTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"closeNum",{get:function(){return this._closeNum},set:function(t){this._closeNum=t},enumerable:!0,configurable:!0}),s.prototype.getGatherCountIsMax=function(){return this.gatherCount>=s.instance.maxNum},n=s,e.DayDropTreasureModel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.day_drop_treasure||(t.day_drop_treasure={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16781716,this.GetRichesInfoReply),this.subscribe(16781717,this.UpdateRichesInfo),this.subscribe(16781718,this.UpdateRichesCopy),this.getPayRewardInfo()},o.prototype.getPayRewardInfo=function(){this.publish(2101452,null)},o.prototype.GetRichesInfoReply=function(t){e.DayDropTreasureModel.instance.gatherCount=t[0],e.DayDropTreasureModel.instance.rewardArr=t[1],GlobalData.dispatcher.event("DAY_DROP_TREASURE_GATHERCOUNT_UPDATE")},o.prototype.UpdateRichesInfo=function(t){e.DayDropTreasureModel.instance.gatherCount=t[0],e.DayDropTreasureModel.instance.rewardArr=t[1],GlobalData.dispatcher.event("DAY_DROP_TREASURE_GATHERCOUNT_UPDATE")},o.prototype.UpdateRichesCopy=function(t){console.log("更新天降财宝副本数据...............:   ",t),e.DayDropTreasureModel.instance.nextRefreshTime=t[0],e.DayDropTreasureModel.instance.closeNum=t[1],GlobalData.dispatcher.event("DAY_DROP_TREASURE_UADATETIME_UPDATE")},s=o,e.DayDropTreasureCtrl=s}(modules=modules||{}),function(t){var e,i;function n(){this._result=0,this.overType=1,this.incomeItems=[]}e=t.kunlun||(t.kunlun={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateSwimmingInfo=function(t){this.info=t,GlobalData.dispatcher.event("KUNLUN_UPDATE")},n.prototype.addItems=function(t,e){void 0===e&&(e=null);for(var i=0,n=t.length;i<n;i++)this.incomeItems.push([t[i],e])},Object.defineProperty(n.prototype,"awardList",{get:function(){return this._awardList},set:function(t){this._awardList=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"result",{get:function(){return this._result},set:function(t){this._result=t,GlobalData.dispatcher.event("KUNLUN_GRAB_SOAP_RESULT")},enumerable:!0,configurable:!0}),i=n,e.KunLunModel=i}(modules=modules||{}),function(t){var e,i,l,n,s,o,h,a;function r(){var t=i.call(this)||this;return t.destin=new n(180,60),t}e=t.kunlun||(t.kunlun={}),l=laya.ui.Image,n=laya.maths.Point,s=t.core.BaseCtrl,o=t.kunlun.KunLunModel,h=t.common.CommonUtil,i=s,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16782226,this.GetSwimmingInfoReply),this.subscribe(16782228,this.UpdateSwimmingInfo),this.subscribe(16782229,this.GrabSoapReply),this.subscribe(16777358,this.GetInCopyAwardReply)},r.prototype.GetSwimmingInfo=function(){this.publish(2101962,null)},r.prototype.GrabSoap=function(t){console.log("抓肥皂  请求 ",t),this.publish(2101964,[t])},r.prototype.GetInCopyAward=function(){this.publish(5242890,null)},r.prototype.GetSwimmingInfoReply=function(t){console.log("获取昆仑瑶池信息返回 返回数据...............:   ",t),o.instance.updateSwimmingInfo(t)},r.prototype.UpdateSwimmingInfo=function(t){console.log("更新昆仑瑶池信息 返回数据...............:   ",t),o.instance.updateSwimmingInfo(t)},r.prototype.GrabSoapReply=function(t){console.log("抓肥皂返回 返回数据...............:   ",t),0==t[0]?o.instance.result=t[1]:h.noticeError(t[0])},r.prototype.GetInCopyAwardReply=function(t){o.instance.awardList=t[0],GlobalData.dispatcher.event("KUNLUN_GETDROPRECORD")},r.prototype.addItemHandler=function(t,e){if(93===e){var i=new l,n=t[0];if(null==n)return;i.skin=h.getIconById(n),i.anchorX=i.anchorY=.5;var s=340+(CommonConfig.viewWidth-663)/2,o=90+(CommonConfig.viewHeight-720)/2;i.pos(s,o),LayerManager.instance.addToMidUILayer(i);var a=CommonConfig.viewWidth/2+this.destin.x,r=CommonConfig.viewHeight-this.destin.y;TweenJS.create(i).to({scaleX:1.5,scaleY:1.5},400).chain(TweenJS.create(i).to({scaleX:1.1,scaleY:1.1},400).chain(TweenJS.create(i).to({x:a,y:r,scaleX:.2,scaleY:.2},600).onComplete(function(){i.destroy(!0)}))).start()}},a=r,e.KunLunCtrl=a}(modules=modules||{}),function(n){var e,t,i,s,o,a,r,l,h;function c(){return null!==t&&t.apply(this,arguments)||this}e=n.adventure||(n.adventure={}),i=n.core.BaseCtrl,s=n.common.CommonUtil,o=n.config.SceneCfg,a=n.scene.SceneModel,r=n.bag.BagUtil,l=n.scene.SceneUtil,t=i,__extends(c,t),Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.setup=function(){this.subscribe(16782026,this.getAdventureInfoReply),this.subscribe(16782027,this.updateAdventureInfo),this.subscribe(16782028,this.buyYunliReply),this.subscribe(16782029,this.challengeReply),this.subscribe(16782030,this.getAdventureAwardReply),this.subscribe(16782032,this.getAdventureHintReply),this.subscribe(16782031,this.updateAdventureEvent),this.subscribe(16782033,this.adventureExchangeReply),this.getAdventureInfo(),this.getAdventureHint()},c.prototype.getAdventureInfo=function(){this.publish(2101762,null)},c.prototype.getAdventureInfoReply=function(t){e.AdventureModel.instance.yunLi=t[2],e.AdventureModel.instance.eventList=t[0],e.AdventureModel.instance.nextTriggerTime=t[1],e.AdventureModel.instance.point=t[3]},c.prototype.updateAdventureInfo=function(t){e.AdventureModel.instance.nextTriggerTime=t[1],e.AdventureModel.instance.yunLi=t[2],e.AdventureModel.instance.point=t[3],e.AdventureModel.instance.eventList=t[0]},c.prototype.buyYunLi=function(){this.publish(2101763,null)},c.prototype.buyYunliReply=function(t){s.noticeError(t[0])},c.prototype.challenge=function(t,e){void 0===e&&(e=!1);var i=t[1];if(2===i||3===i||4===i){if(CommonGroupUtil.notTeamCopyIsTeaming())return;if(0===l.currScene&&!e&&n.windCloud.WindCloudModel.instance.isWaitingForMatch)return void s.alert("温馨提示","风云擂台的擂台赛即将开始，进入副本内将无法进入擂台赛，是否仍然进入副本？"+s.formatHtmlStrByColor("#ff3e3e","（未进入擂台赛将视作放弃本轮挑战）"),[Handler.create(this,function(){c.instance.challenge(t,!0)})],[]);if(0!==o.instance.getCfgById(a.instance.enterScene[0])[7]||n.scene.SceneModel.instance.isInMission)return void s.notChangeTips();r.checkNeedSmeltTip()||this.publish(2101764,[t[0]])}else this.publish(2101764,[t[0]])},c.prototype.challengeReply=function(t){s.noticeError(t[0])},c.prototype.getAdventureAward=function(t){this.publish(2101765,[t])},c.prototype.getAdventureAwardReply=function(t){s.noticeError(t[0])},c.prototype.getAdventureHint=function(){this.publish(2101767,null)},c.prototype.getAdventureHintReply=function(t){e.AdventureModel.instance.hintList=t[0]},c.prototype.setAdventureHint=function(t){this.publish(2101766,[t])},c.prototype.updateAdventureEvent=function(t){e.AdventureModel.instance.updateAdventureEvent(t)},c.prototype.adventureExchange=function(t,e){this.publish(2101768,[t,e])},c.prototype.adventureExchangeReply=function(t){s.noticeError(t[0])},h=c,e.AdventureCtrl=h}(modules=modules||{}),function(i){var r,t,e,o,n,s;function a(){return t.call(this)||this}r=i.guide||(i.guide={}),e=i.core.BaseCtrl,o=i.config.GuideCfg,n=i.task.TaskModel,t=e,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16777359,this.getGuideListReply),this.subscribe(16777360,this.finishGuideReply),this.onGlobal("GUIDE_REST_INITED",this.initedGuides),this.getGuideList(),LayerManager.instance.lockAllLayer(!0)},a.prototype.getGuideList=function(){this.publish(2097174,null)},a.prototype.getGuideListReply=function(t){r.GuideModel.instance.initGuides(t[0])},a.prototype.finishGuide=function(t){this.publish(2097175,[t])},a.prototype.finishGuideReply=function(t){var e=t[1];0===e||i.common.CommonUtil.noticeError(e)},a.prototype.triggerGuide=function(t){this._recordTriggerGuide||(this._recordTriggerGuide=[]),-1===this._recordTriggerGuide.indexOf(t)&&(this._recordTriggerGuide.push(t),this.publish(2097176,[[t]]))},a.prototype.initedGuides=function(){this.removeAllTriggerListeners(),this.removeAllCompleteListeners();for(var t=r.GuideModel.instance.restGuides,e=0,i=t.length;e<i;e++)for(var n=t[e][1],s=0,o=n.length;s<o;s++){var a=n[s][0];1===a?this.onGlobal("PLAYER_UPDATE_LEVEL",this.checkTrigger):2===a||(3===a||6===a||7===a?this.onGlobal("TASK_UPDATED",this.checkTrigger):4===a?this.onGlobal("MISSION_UPDATE_LV",this.checkTrigger):5===a&&(this.onGlobal("GUIDE_REGISTE_UI",this.checkTrigger),this.onGlobal("GUIDE_REMOVE_UI",this.cancelTrigger)))}this.checkTrigger()},a.prototype.removeAllTriggerListeners=function(){GlobalData.dispatcher.off("PLAYER_UPDATE_LEVEL",this,this.checkTrigger),GlobalData.dispatcher.off("TASK_UPDATED",this,this.checkTrigger),GlobalData.dispatcher.off("MISSION_UPDATE_LV",this,this.checkTrigger),GlobalData.dispatcher.off("GUIDE_REGISTE_UI",this,this.checkTrigger),GlobalData.dispatcher.off("GUIDE_REMOVE_UI",this,this.cancelTrigger)},a.prototype.removeAllCompleteListeners=function(){GlobalData.dispatcher.off("GUIDE_CLICK_TARGET",this,this.checkComplete),GlobalData.dispatcher.off("GUIDE_CD_COMPLETE",this,this.checkComplete),GlobalData.dispatcher.off("PLAYER_UPDATE_LEVEL",this,this.checkComplete),GlobalData.dispatcher.off("TASK_UPDATED",this,this.checkComplete),GlobalData.dispatcher.off("MISSION_UPDATE_LV",this,this.checkComplete),GlobalData.dispatcher.off("PANEL_CLOSE",this,this.checkComplete)},a.prototype.cancelTrigger=function(t){if(this._guide)for(var e=this._guide[1],i=0,n=e.length;i<n;i++)if(5===e[i][0]&&t===e[i][1]){this._waitGuide=this._guide,WindowManager.instance.close(248);break}},a.prototype.checkTrigger=function(){if(!this._guide||this._nextGuide||this._waitGuide){var t=!1;if(this._nextGuide&&1===this._nextGuide[5]&&(t=!0,LayerManager.instance.lockAllLayer(t)),this._nextGuide)this.checkGuideTrigger(this._nextGuide)&&this.trigger(this._nextGuide);else for(var e=r.GuideModel.instance.restGuides,i=0,n=e.length;i<n;i++){var s=e[i];if((!this._waitGuide||s===this._waitGuide)&&this.checkGuideTrigger(s)){1===s[5]&&(t=!0,LayerManager.instance.lockAllLayer(t)),this.trigger(s);break}}t||LayerManager.instance.lockAllLayer(t)}},a.prototype.checkGuideTrigger=function(t){for(var e=t[1],i=0<e.length,n=0,s=e.length;n<s;n++){var o=e[n][0];if(1===o){if(!(i=i&&this.checkPlayerLevel(e[n][1])))break}else if(2===o){if(!(i=i&&this.checkGuideComplete(e[n][1])))break}else if(3===o){if(!(i=i&&this.checkTaskComplete(e[n][1])))break}else if(4===o){if(!(i=i&&this.checkMissionLevel(e[n][1])))break}else if(5===o){if(!(i=i&&this.checkRegisteUI(e[n][1])))break}else if(6===o){if(!(i=i&&this.checkTaskDoing(e[n][1])))break}else if(7===o&&!(i=i&&this.checkTaskIDEqual(e[n][1])))break}return i},a.prototype.trigger=function(t){if(this.guide=t,this.triggerGuide(t[0]),!this.checkComplete([-1],null)){for(var e=t[2],i=0,n=e.length;i<n;i++){var s=e[i][0];1===s?GlobalData.dispatcher.on("GUIDE_CLICK_TARGET",this,this.checkComplete,[[s]]):2===s?GlobalData.dispatcher.on("GUIDE_CD_COMPLETE",this,this.checkComplete,[[s]]):3===s?GlobalData.dispatcher.on("PLAYER_UPDATE_LEVEL",this,this.checkComplete,[[s]]):4===s||(5===s||8===s?GlobalData.dispatcher.on("TASK_UPDATED",this,this.checkComplete,[[s]]):6===s?GlobalData.dispatcher.on("MISSION_UPDATE_LV",this,this.checkComplete,[[s]]):7===s&&GlobalData.dispatcher.on("PANEL_CLOSE",this,this.checkComplete,[[s]]))}WindowManager.instance.open(248,t[14])}},a.prototype.checkComplete=function(t,e){if(!this._guide)return!1;var i=this.checkCanComplete(this._guide,t,e);return i&&this.completeGuide(),i},a.prototype.checkCanComplete=function(t,e,i){if(void 0===e&&(e=[-1]),void 0===i&&(i=null),!t)return!1;for(var n=e[0],s=t[2],o=!1,a=0,r=s.length;a<r;a++){var l=s[a][0];if(1===l){if(o=o||1===n&&i===s[a][1])break}else if(2===l){if(o=o||2===n)break}else if(3===l){if(o=o||this.checkPlayerLevel(s[a][1]))break}else if(4===l){if(o=o||this.checkGuideComplete(s[a][1]))break}else if(5===l){if(o=o||this.checkTaskComplete(s[a][1]))break}else if(6===l){if(o=o||this.checkMissionLevel(s[a][1]))break}else if(7===l){if(o=o||this.checkPanelClose(s[a][1]))break}else if(8===l&&(o=o||this.checkTaskDoing(s[a][1])))break}return o},a.prototype.completeGuide=function(){LayerManager.instance.lockAllLayer(!1),this.removeAllCompleteListeners(),this._waitGuide=null,this._nextGuide=null;var t=this._guide[13];if(t&&0<t.length){var e=this._guide[12];if(this.guide=null,WindowManager.instance.close(248),r.GuideModel.instance.completeGuides(t),a.instance.finishGuide(t),e){for(var i=0,n=(s=o.instance.cfgs).length;i<n;i++)if(e===s[i][0]){this._nextGuide=s[i];break}this.checkCanComplete(this._nextGuide)?(this._guide=this._nextGuide,this.completeGuide()):this.checkTrigger()}else this.checkTrigger()}else{var s;if(WindowManager.instance.close(248),r.GuideModel.instance.completeGuides([this._guide[0]]),e=this._guide[12],this.guide=null,e){for(i=0,n=(s=r.GuideModel.instance.restGuides).length;i<n;i++)if(e===s[i][0]){this._nextGuide=s[i],this.checkCanComplete(this._nextGuide)?(this._guide=this._nextGuide,this.completeGuide()):this.checkTrigger();break}}else this.checkTrigger()}},Object.defineProperty(a.prototype,"guide",{set:function(t){this._guide=t,r.GuideModel.instance.curGuide=t},enumerable:!0,configurable:!0}),a.prototype.checkPlayerLevel=function(t){return PlayerModel.instance.level>=t},a.prototype.checkGuideComplete=function(t){for(var e=r.GuideModel.instance.restGuides,i=!0,n=0,s=e.length;n<s;n++)if(t===e[n][0]){i=!1;break}return i},a.prototype.checkTaskComplete=function(t){return n.instance.taskInfo[0]==="m"+t&&2===n.instance.taskInfo[1]},a.prototype.checkMissionLevel=function(t){return i.mission.MissionModel.instance.curLv>=t},a.prototype.checkRegisteUI=function(t){return!!r.GuideModel.instance.getUIByid(t)},a.prototype.checkTaskDoing=function(t){return n.instance.taskInfo[0]==="m"+t&&1===n.instance.taskInfo[1]},a.prototype.checkPanelClose=function(t){return!WindowManager.instance.isOpened(t)},a.prototype.checkTaskIDEqual=function(t){return n.instance.taskInfo[0]==="m"+t},s=a,r.GuideCtrl=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.cfgs=GlobalData.getConfig("action_preview")},n.prototype.getCfgById=function(t){for(var e,i=0,n=this.cfgs.length;i<n;i++)if(this.cfgs[i][0]===t){e=this.cfgs[i];break}return e},i=n,e.ActionPreviewCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){this._tianGuaIsUp=!1,this._allState=new Array,this._isFirst=!0,this._actionIDList=new Array,this._posSprite=new s}e=t.action_preview||(t.action_preview={}),i=t.redPoint.RedPointCtrl,n=t.funcOpen.FuncOpenModel,s=Laya.Dictionary,o=t.config.ActionPreviewCfg,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actionIDList",{get:function(){return this._actionIDList},set:function(t){this._actionIDList=t,this.showRp(),GlobalData.dispatcher.event("ACTION_PREVIEW_UPDATE")},enumerable:!0,configurable:!0}),r.prototype.getPosSprite=function(t){return this._posSprite.get(t)},r.prototype.getPosSpriteAny=function(t){return this._posSprite.get(t)},r.prototype.getState=function(t){var e=t[0];return-1!==this._actionIDList.indexOf(e)?0:n.instance.getFuncIsOpen(e)?2:1},r.prototype.showRp=function(){for(var t=o.instance.cfgs,e=0;e<t.length;e++)if(2==this.getState(t[e]))return void i.instance.setRPProperty("actionPreviewEnterRP",!0);i.instance.setRPProperty("actionPreviewEnterRP",!1)},r.prototype.getNotActionDate=function(){for(var t=o.instance.cfgs,e=0,i=t.length;e<i;e++){var n=t[e];if(1==this.getState(n))return n}return t[t.length-1]},r.prototype.isNotAward=function(){for(var t=o.instance.cfgs,e=0;e<t.length;e++)if(-1===this._actionIDList.indexOf(t[e][0]))return!1;return!0},a=r,e.ActionPreviewModel=a}(modules=modules||{}),function(p){var t,e,u,d,i,m,s,o,a,r,n;function l(){var t=e.call(this)||this;return t.destin=new d(150,21),t}t=p.action_preview||(p.action_preview={}),u=laya.ui.Image,d=laya.maths.Point,i=p.core.BaseCtrl,m=p.action_preview.ActionPreviewModel,s=p.funcOpen.FuncOpenModel,o=p.scene.SceneModel,a=p.config.SceneCfg,r=p.config.ActionPreviewCfg,e=i,__extends(l,e),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16777363,this.GetActionPreviesAwardReply),this.subscribe(16777362,this.GetActionPreviesHaveReceivedReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funcOpenHandler),this.onGlobal("ACTION_PREVIEW_UPDATE",this.updateSceneState),this.onGlobal("DUNGEON_SCENE_STATE_UPDATE",this.updateSceneState),this.onGlobal("ACTION_PREVIEW_EFFECT",this.itemEffect),this.onGlobal("ACTION_PREVIEW_ENTER",this.showAni),this.onGlobal("SCENE_ENTER",this.enterScene),this.getActionPreviesHaveReceived()},l.prototype.enterScene=function(t){void 0===t&&(t=-1),-1===t&&!o.instance.enterScene||(0===a.instance.getCfgById(-1!==t?t:o.instance.enterScene[0])[7]?(this.updateSceneState(),Laya.timer.clear(this,this.showAni),Laya.timer.once(CommonConfig.panelTweenDuration,this,this.showAni)):Laya.timer.clear(this,this.showAni))},l.prototype.showAni=function(){if(0===a.instance.getCfgById(o.instance.enterScene[0])[7])if(m.instance._action_previewDate)WindowManager.instance.openDialog(257,m.instance._action_previewDate),m.instance._action_previewDate=null;else if(p.vip_new.VipNewModel.instance.isUp)WindowManager.instance.open(392),p.vip_new.VipNewModel.instance.isUp=!1;else if(m.instance._tianGuaIsUp){var t=p.config.BlendCfg.instance.getCfgById(53002)[1][0];if(p.mission.MissionModel.instance.curLv>=t){var e=new p.main.GuaJiearningsUpItem;LayerManager.instance.addToEffectLayer(e)}else p.vip_new.VipNewModel.instance.isUp&&(WindowManager.instance.open(392),p.vip_new.VipNewModel.instance.isUp=!1);m.instance._tianGuaIsUp=!1}},l.prototype.getActionPreviesHaveReceived=function(){this.publish(2097177,null)},l.prototype.getActionPreviesAward=function(t){this.publish(2097178,[t])},l.prototype.GetActionPreviesAwardReply=function(t){p.common.CommonUtil.noticeError(t[0]),GlobalData.dispatcher.event("ACTION_PREVIEW_UPDATE")},l.prototype.GetActionPreviesHaveReceivedReply=function(t){m.instance.actionIDList=t[0]},l.prototype.funcOpenHandler=function(t){if(s.instance._isReply){for(var e=0,i=t.length;e<i;e++)if(156==t[e]){this.updateSceneState();break}if(s.instance.getFuncIsOpen(156))for(e=0,i=t.length;e<i;e++){var n=r.instance.getCfgById(t[e]);if(n&&s.instance.getFuncIsOpen(t[e]))return GlobalData.dispatcher.event("ACTION_PREVIEW_UPDATE"),void(0===a.instance.getCfgById(o.instance.enterScene[0])[7]?p.scene.SceneModel.instance.isInMission?m.instance._action_previewDate=n:WindowManager.instance.openDialog(257,n):m.instance._action_previewDate=n)}}},l.prototype.updateSceneState=function(){s.instance.getFuncIsOpen(156)&&(m.instance.isNotAward()?(WindowManager.instance.close(256),p.funcOpen.FuncOpenModel.instance.setActionOpen(156,2)):0===a.instance.getCfgById(o.instance.enterScene[0])[7]&&WindowManager.instance.open(256))},l.prototype.itemEffect=function(t){if(t){var e=t[0],i=t[1];if(null==e)return;var n=e[2],s=e[0],o=m.instance.getPosSprite(s);if(o){var a=new u;a.skin="assets/icon/ui/get_way/"+n+".png",a.anchorX=a.anchorY=.5;var r=i.x+a.width/2,l=i.y+a.height/2;a.pos(r,l),LayerManager.instance.addToEffectLayer(a),d.TEMP.setTo(o.x,o.y),LayerManager.instance.getLayerById(7).globalToLocal(d.TEMP);var h=d.TEMP.x,c=d.TEMP.y;TweenJS.create(a).to({scaleX:1.5,scaleY:1.5},400).onComplete(function(){TweenJS.create(a).to({scaleX:1.1,scaleY:1.1},400).onComplete(function(){TweenJS.create(a).to({x:h,y:c,scaleX:.2,scaleY:.2},600).onComplete(function(){a.destroy(!0),p.vip_new.VipNewModel.instance.isUp?(WindowManager.instance.open(392),p.vip_new.VipNewModel.instance.isUp=!1):GlobalData.dispatcher.event("ACTION_PREVIEW_ENTER")}).start()}).start()}).start()}else console.log("功能预览目标点 该功能未注册点：  "+s)}},n=l,t.ActionPreviewCtrl=n}(modules=modules||{}),function(t){var o,e,i,n,s,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}o=t.player_title||(t.player_title={}),i=t.core.BaseCtrl,n=t.funcOpen.FuncOpenModel,s=t.notice.SystemNoticeManager,a=t.common.CommonUtil,e=i,__extends(l,e),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16782626,this.GetDesignationReply),this.subscribe(16782627,this.UpdateDesignation),this.subscribe(16782628,this.ActiveDesignationReply),this.subscribe(16782629,this.WearDesignationReply),this.subscribe(16782630,this.TakeoffDesignationReply),this.subscribe(16782631,this.RefineDesignationReply),this.subscribe(16782632,this.GainFirstDesignation),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenGetSprintRankInfo),this.onGlobal("BAG_UPDATE",function(){o.PlayerTitleModel.instance.setRp()}),this.GetDesignation()},l.prototype.funOpenGetSprintRankInfo=function(t){for(var e=0;e<t.length;e++)if(163==t[e]&&n.instance.getFuncIsOpen(163))return void o.PlayerTitleModel.instance.setRp()},l.prototype.GetDesignation=function(){this.publish(2102362,null)},l.prototype.ActiveDesignation=function(t){o.PlayerTitleModel.instance._id=t,this.publish(2102363,[t])},l.prototype.RefineDesignation=function(t){o.PlayerTitleModel.instance._id=t,this.publish(2102366,[t])},l.prototype.WearDesignation=function(t){this.publish(2102364,[t])},l.prototype.TakeoffDesignation=function(t){this.publish(2102365,[t])},l.prototype.GetDesignationReply=function(t){if(console.log("获取称号 返回  数据...............:   ",t),t){o.PlayerTitleModel.instance._returnDtate=!0,o.PlayerTitleModel.instance.nowChatId=t[1];var e=t[0];o.PlayerTitleModel.instance.setAllDate(e)}},l.prototype.GainFirstDesignation=function(t){if(t){var e=t[0];o.PlayerTitleModel.instance._id=e,WindowManager.instance.openDialog(352,o.PlayerTitleModel.instance._id)}},l.prototype.UpdateDesignation=function(t){if(t){for(var e=t[0],i=0;i<e.length;i++){var n=e[i];if(n){var s=n[0];o.PlayerTitleModel.instance.AllDate[s]=n}}o.PlayerTitleModel.instance.updateArr()}},l.prototype.ActiveDesignationReply=function(t){0==t[0]?(GlobalData.dispatcher.event("PLAYER_TITLE_UPDATE"),o.PlayerTitleModel.instance._id&&WindowManager.instance.openDialog(352,o.PlayerTitleModel.instance._id),s.instance.addNotice("激活成功",!1)):a.noticeError(t[0])},l.prototype.RefineDesignationReply=function(t){0==t[0]?s.instance.addNotice("升阶成功",!1):a.noticeError(t[0])},l.prototype.WearDesignationReply=function(t){0==t[0]?(GlobalData.dispatcher.event("PLAYER_TITLE_UPDATE"),s.instance.addNotice("穿戴成功",!1)):a.noticeError(t[0])},l.prototype.TakeoffDesignationReply=function(t){0==t[0]?(GlobalData.dispatcher.event("PLAYER_TITLE_UPDATE"),s.instance.addNotice("卸下成功",!1)):a.noticeError(t[0])},r=l,o.PlayerTitleCtrl=r}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.arena||(t.arena={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16783329,this.getArenaReply),this.subscribe(16783326,this.getArenaRankReply),this.subscribe(16783327,this.getArenaChallengeRecordReply),this.subscribe(16783328,this.updateArenaChallengeRecord),this.subscribe(16783330,this.updateArenaTime),this.subscribe(16783331,this.updateArenaObjs),this.subscribe(16783332,this.flushArenaReply),this.subscribe(16783333,this.resetEnterCDReply),this.subscribe(16777366,this.arenaJudgeAward),this.subscribe(16783334,this.ChallengeArenaReply),this.getArena(),this.getArenaChallengeRecord(),FuncOpenCtrl.instance.registeFuncReq(165,2103062)},o.prototype.getArena=function(){this.publish(2103062,null)},o.prototype.getArenaReply=function(t){e.ArenaModel.instance.arenaTimes=t[0],e.ArenaModel.instance.objs=t[1]},o.prototype.getArenaRank=function(){this.publish(7340932,null)},o.prototype.getArenaRankReply=function(t){e.ArenaModel.instance.ranks=t[0]},o.prototype.getArenaChallengeRecord=function(){this.publish(7340933,null)},o.prototype.getArenaChallengeRecordReply=function(t){e.ArenaModel.instance.records=t[0]},o.prototype.updateArenaChallengeRecord=function(t){e.ArenaModel.instance.records=t[0]},o.prototype.updateArenaTime=function(t){e.ArenaModel.instance.arenaTimes=t[0]},o.prototype.updateArenaObjs=function(t){e.ArenaModel.instance.objs=t[0]},o.prototype.flushArena=function(){this.publish(2103063,null)},o.prototype.flushArenaReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.challengeArena=function(t,e,i){void 0===i&&(i=!1),console.log("挑战竞技场................objId:"+t+" quick:"+e+" isContinue:"+i),this.publish(2103065,[t,e,i])},o.prototype.ChallengeArenaReply=function(t){console.log("挑战竞技场返回................",t),CommonUtil.noticeError(t[0])},o.prototype.resetEnterCD=function(){this.publish(2103064,[2281,1])},o.prototype.resetEnterCDReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.arenaJudgeAward=function(t){(e.ArenaModel.instance.arenaJudgeAward=t)[0]?WindowManager.instance.open(292):WindowManager.instance.open(293)},s=o,e.ArenaCtrl=s}(modules=modules||{}),function(n){var e,i,t,s,o;function a(){var t=i.call(this)||this;return t.onXiLian=!1,t}e=n.xiLian||(n.xiLian={}),t=n.core.BaseCtrl,s=n.notice.SystemNoticeManager,i=t,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16784226,this.getXilianReply),this.subscribe(16784227,this.updateXilian),this.subscribe(16784228,this.openXilianReply),this.subscribe(16784229,this.equipXilianReply),this.subscribe(16784230,this.lockXilianReply),this.subscribe(16784231,this.xilianRiseAddLevelReply),this.subscribe(16784232,this.xilianReplaceReply),this.subscribe(16784233,this.updateXilianTmpAttr),this.onGlobal("BAG_UPDATE",e.XiLianModel.instance.checkRP,e.XiLianModel.instance),this.onGlobal("PLAYER_EQUIPS_INITED",e.XiLianModel.instance.checkRP,e.XiLianModel.instance),this.onGlobal("PLAYER_WEAR_EQUIP",e.XiLianModel.instance.checkRP,e.XiLianModel.instance),this.onGlobal("PLAYER_WEAR_EQUIPS",e.XiLianModel.instance.checkRP,e.XiLianModel.instance),this.getXilian()},a.prototype.getXilian=function(){console.log("获取洗炼信息"),this.publish(2103962,null)},a.prototype.getXilianReply=function(t){e.XiLianModel.instance.xiLianInfo=t[0],e.XiLianModel.instance.updateXilianTmpAttr(t[1])},a.prototype.updateXilian=function(t){e.XiLianModel.instance.updateXiLian(t[0])},a.prototype.openXilian=function(t,e){this.publish(2103963,[t,e])},a.prototype.openXilianReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.equipXilian=function(t,e,i){this.onXiLian?n.notice.SystemNoticeManager.instance.addNotice("操作过快，请稍后重试",!0):(console.log("重新洗炼part",t,"..............useGold.",e,"..................type",i),this.onXiLian=!0,this.publish(2103964,[t,e,i]))},a.prototype.equipXilianReply=function(t){CommonUtil.noticeError(t[0]),this.onXiLian=!1},a.prototype.lockXilian=function(t,e,i){this.publish(2103965,[t,e,i])},a.prototype.lockXilianReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.xilianRiseAddLevel=function(){this.publish(2103966,null)},a.prototype.xilianRiseAddLevelReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.XilianReplace=function(t){this.publish(2103967,[t])},a.prototype.xilianReplaceReply=function(t){var e=t[0];0===e?s.instance.addNotice("替换成功",!1):CommonUtil.noticeError(e)},a.prototype.updateXilianTmpAttr=function(t){e.XiLianModel.instance.updateXilianTmpAttr(t[0])},a.prototype.xilianClearTmpAttr=function(){this.publish(2103968,null)},o=a,e.XiLianCtrl=o}(modules=modules||{}),function(i){var n,t,e,s,o,a,r;function l(){return t.call(this)||this}n=i.vip_new||(i.vip_new={}),e=i.core.BaseCtrl,s=i.common.CommonUtil,o=i.scene.SceneModel,a=i.config.SceneCfg,t=e,__extends(l,t),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16785226,this.GetVipFInfoReply),this.subscribe(16785227,this.UpdateVipFInfo),this.subscribe(16785228,this.GetVipFRewardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetVipFInfo()},l.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(230==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(230))return void n.VipNewModel.instance.setRP()},l.prototype.GetVipFInfo=function(){this.publish(2104762,null)},l.prototype.GetVipFReward=function(t){this.publish(2104763,[t])},l.prototype.GetVipFInfoReply=function(t){n.VipNewModel.instance.initVipInfo(t)},l.prototype.UpdateVipFInfo=function(t){console.log("VIPF 更新vip信息...............:   ",t),i.vip_new.VipNewModel.instance.vipLevel!=t[0]&&0==i.vip.VipModel.instance.vipLevel&&this.showVipAndSvipUpItem(),n.VipNewModel.instance.UpdateVipFInfo(t)},l.prototype.showVipAndSvipUpItem=function(){i.vip_new.VipNewModel.instance.isUp=!0,0===a.instance.getCfgById(o.instance.enterScene[0])[7]&&(i.scene.SceneModel.instance.isInMission||(WindowManager.instance.open(392),i.vip_new.VipNewModel.instance.isUp=!1))},l.prototype.GetVipFRewardReply=function(t){var e=t[0];0!=e?s.noticeError(e):GlobalData.dispatcher.event("VIPF_GET_REWARD")},r=l,n.VipNewCtrl=r}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._cfgs=GlobalData.getConfig("scene_copy_nine");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];this._table[i[1]]=i}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByLevel=function(t){return this._table[t]},i=n,e.SceneCopyNineCfg=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.npc||(t.npc={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"triggeredNpcId",{get:function(){return this._triggeredNpcId},set:function(t){this._triggeredNpcId=t,GlobalData.dispatcher.event("SCENE_TRIGGERED_NPC_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isGathering",{get:function(){return this._isGathering},set:function(t){this._isGathering=t,GlobalData.dispatcher.event("SCENE_NPC_GATHER_STATE_UPDATE")},enumerable:!0,configurable:!0}),i=n,e.NpcModel=i}(modules=modules||{}),function(n){var t,e,i,s,o,a,r,l,h,c,p,u,d,m,f;function g(){return null!==e&&e.apply(this,arguments)||this}t=n.npc||(n.npc={}),i=n.core.BaseCtrl,s=game.misc.LogUtils,o=game.GameCenter,a=n.config.NpcCfg,r=n.config.SceneCfg,l=n.nine.NineModel,h=n.config.SceneCopyNineCfg,c=n.npc.NpcModel,p=n.day_drop_treasure.DayDropTreasureModel,u=n.common.CommonUtil,d=n.scene.SceneModel,m=n.scene.SceneUtil,e=i,__extends(g,e),Object.defineProperty(g,"instance",{get:function(){return this._instance=this._instance||new g},enumerable:!0,configurable:!0}),g.prototype.setup=function(){this.subscribe(16777345,this.gatherReply),this.subscribe(16777356,this.gatherEnd),this.subscribe(16777460,this.updateGatherPos),this.onGlobal("PLAYER_TRIGGER_NPC",this.onTrigger),s.enable(12)},g.prototype.gather=function(t,e){void 0===e&&(e=0),s.info(12,"采集......................."+t),this.publish(5242885,[t,e])},g.prototype.gatherReply=function(t){s.info(12,"采集返回......................."+t),u.noticeError(t[0]);var e=d.instance.enterScene[0],i=r.instance.getCfgById(e)[7];0!==t[0]&&12!==i?(c.instance.isGathering=!1,17===i?GlobalData.dispatcher.event("DAY_DROP_TREASURE_CAIJILOSE",t[0]):37===i?n.halo.HaloModel.instance.haloOpen&&n.halo.HaloModel.instance.isForceEnter?(n.beast_boss.BeastBossModel.instance.isSpectcalBox()||PlayerModel.instance.selectTarget(0,-1),GlobalData.dispatcher.event("HALO_AUTO_BEAST_SELECT_TARGET",n.beast_boss.BeastBossModel.instance.isSpectcalBox())):PlayerModel.instance.selectTarget(0,-1):43===i&&PlayerModel.instance.selectTarget(2,-1)):c.instance.isGathering=!0},g.prototype.gatherInterrupt=function(){s.info(12,"中断采集......................."),this.publish(5242889,null),c.instance.isGathering=!1},g.prototype.gatherEnd=function(t){if(s.info(12,"采集结束......................."+t),c.instance.isGathering=!1,0==t[0])d.instance.removeObjs([c.instance.triggeredNpcId]),GlobalData.dispatcher.event("SCENE_GATHER_END"),WindowManager.instance.close(166);else{var e=t[0];46728===e?c.instance.isGathering=!1:(u.noticeError(e),37===m.currScene&&(n.halo.HaloModel.instance.haloOpen&&n.halo.HaloModel.instance.isForceEnter?(GlobalData.dispatcher.event("HALO_AUTO_BEAST_SELECT_TARGET",n.beast_boss.BeastBossModel.instance.isSpectcalBox()),n.beast_boss.BeastBossModel.instance.isSpectcalBox()||PlayerModel.instance.selectTarget(0,-1)):PlayerModel.instance.selectTarget(0,-1)))}43===m.currScene&&PlayerModel.instance.selectTarget(2,-1)},g.prototype.updateGatherPos=function(t){s.info(12,"更新采集地点......................."+t),this.nineNpcFind()},g.prototype.nineNpcFind=function(){var t=d.instance.enterScene[0];if(14===r.instance.getCfgById(t)[7]){for(var e=l.instance.scenePromote[2],i=h.instance.getCfgByLevel(9)[6],n=-1,s=i.length-1;0<=s;s--)if(e>=i[s][0]){n=i[s][1];break}console.log("九天之巅 第五层 去采集  myRank："+e),console.log("九天之巅 第五层 去采集  occ："+n),PlayerModel.instance.selectTarget(3,n)}},g.prototype.onTrigger=function(t){s.info(12,"采集触发......................."+t),c.instance.triggeredNpcId=0;var e=o.instance.getRole(t);if(null!=e)switch(c.instance.triggeredNpcId=t,c.instance.triggeredNpcOcc=e.property.get("occ"),a.instance.getCfgById(e.property.get("occ"))[6]||0){case 1:WindowManager.instance.openDialog(81,t);break;case 2:WindowManager.instance.open(166);break;case 3:WindowManager.instance.open(177);break;case 4:var i=n.xianfu.XianfuModel.instance.getBuildInfo(n.xianfu.XianfuModel.instance.buildType)[3];0==i?WindowManager.instance.open(178):1==i?WindowManager.instance.open(187):WindowManager.instance.open(371);break;case 5:p.instance.getGatherCountIsMax()||WindowManager.instance.open(166);break;case 6:case 7:case 8:case 9:WindowManager.instance.open(166);break;case 10:WindowManager.instance.open(166,t)}},f=g,t.NpcCtrl=f}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.sweeping_income||(t.sweeping_income={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16780421,this.getSweepingIncomeReply)},o.prototype.getSweepingIncomeReply=function(t){e.SweepingIncomeModel.instance.updateInfo(t)},s=o,e.SweepingIncomeCtrl=s}(modules=modules||{}),function(t){var n,e,s,i,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}n=t.rename||(t.rename={}),s=game.GameCenter,i=t.notice.SystemNoticeManager,o=t.core.BaseCtrl,e=o,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16777372,this.getSetNameInfoReply),this.subscribe(16777373,this.updateNameReply),this.subscribe(16777374,this.updateOccReply),this.subscribe(16777371,this.setNameReply),this.getSetNameInfo()},r.prototype.getSetNameInfo=function(){console.log("获取重命名信息................"),this.publish(2097185,null)},r.prototype.getSetNameInfoReply=function(t){console.log("获取重命名信息返回......................",t),n.RenameModel.instance.renameInfo=t},r.prototype.setNameSex=function(t,e){console.log("设置名字和职业...................",t,e),this.publish(2097186,[t,e])},r.prototype.setNameReply=function(t){console.log("改名返回...................",t);var e=t[0];0===e?(WindowManager.instance.close(395),i.instance.addNotice("改名成功")):CommonUtil.noticeError(e)},r.prototype.updateNameReply=function(t){console.log("更新名字........................",t);var e=t[0];e===PlayerModel.instance.actorId&&(PlayerModel.instance.roleName=t[1]);var i=s.instance.getRole(e);null!=i&&i.property.set("name",t[1]),n.RenameModel.instance.updateNameReply=t},r.prototype.updateOccReply=function(t){console.log("更新性别.........................",t),t[0]===PlayerModel.instance.actorId&&(PlayerModel.instance.occ=t[1]),n.RenameModel.instance.updateOccReply=t},a=r,n.RenameCtrl=a}(modules=modules||{}),function(a){var r,t,e,i,n;function s(){return t.call(this)||this}r=a.fashion_suits||(a.fashion_suits={}),e=a.core.BaseCtrl,i=a.funcOpen.FuncOpenModel,t=e,__extends(s,t),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16787626,this.GetShowSuitInfoReply),this.subscribe(16787627,this.ShowSuitPromoteReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetShowSuitInfo(),Laya.timer.loop(2e3,this,this.setRP)},s.prototype.setRP=function(){r.FashionSuitsModel.instance.setRP()},s.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(291==t[e]&&i.instance.getFuncIsOpen(291))return void r.FashionSuitsModel.instance.setRP()},s.prototype.GetShowSuitInfo=function(){this.publish(2106962,null)},s.prototype.ShowSuitPromote=function(t,e){this.publish(2106963,[t,e])},s.prototype.GetShowSuitInfoReply=function(t){r.FashionSuitsModel.instance.upDateReply(t[0]),r.FashionSuitsModel.instance.setRP()},s.prototype.ShowSuitPromoteReply=function(t){if(0==t[2]){var e=t[0],i=t[1],n=r.FashionSuitsModel.instance.getArrDate(e),s=n[0],o=n[1];1===i&&0<o?a.effect.SuccessEffectCtrl.instance.play("assets/others/tx_jinjiechengong7.png"):0===i&&0===s&&a.effect.SuccessEffectCtrl.instance.play("assets/others/txt_common_jihsg.png")}else CommonUtil.noticeError(t[2])},n=s,r.FashionSuitsCtrl=n}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.super_vip||(t.super_vip={}),n=t.funcOpen.FuncOpenModel,s=t.notice.SystemNoticeManager,o=t.core.BaseCtrl,e=o,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16788226,this.GetSinglePaySanShengReply),this.subscribe(16788227,this.updateLookupStateReply),this.subscribe(16788228,this.UpdateSVipBgInfoReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("PANEL_CLOSED",this.setFlag),this.GetSVipInfo()},r.prototype.GetSinglePaySanShengReply=function(t){i.SuperVipModel.instance.pushData(t)},r.prototype.GetSVipInfo=function(){this.publish(7341332,null)},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(319==t[e]&&n.instance.getFuncIsOpen(319))return void i.SuperVipModel.instance.setRP()},r.prototype.updateLookupStateReply=function(t){0==t[0]?(this.copyHandler(),i.SuperVipModel.instance.setState(t[1])):s.instance.addNotice("获取美女客服"+i.SuperVipModel.instance.getTypeByStr()+"号码失败",!0)},r.prototype.UpdateSVipBgInfoReply=function(t){i.SuperVipModel.instance.updataData(t)},r.prototype.UpdateLookupState=function(){this.publish(7341333,null)},r.prototype.copyHandler=function(){i.SuperVipModel.instance.serviceNum&&t.common.MiniGameUtil.copyClipboard(i.SuperVipModel.instance.serviceNum.toString())},r.prototype.setFlag=function(t){i.SuperVipModel.instance.flag&&111==t&&(WindowManager.instance.open(523),i.SuperVipModel.instance.flag=!1)},a=r,i.SuperVipCtrl=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.other_player_online||(t.other_player_online={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return o._instance=o._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16777385,this.BeOnlineRemind),console.log("...SystemClientOpcode.BeOnlineRemind......仙缘和最强上线开启监听")},o.prototype.BeOnlineRemind=function(t){console.log(".........各种最强上线",t),e.OtherPlayerOnlineModel.instance.pushData(t)},s=o,e.OtherPlayerOnlineCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16789128,this.getShowMasterInfoReply),this.subscribe(16789129,this.addShowMasterLevelReply),this.subscribe(16789130,this.updateShowMasterLevel);for(var t=1;t<9;t++)this.getShowMasterInfo(t);this.onGlobal("BAG_UPDATE",this.onBagUpdate)},o.prototype.getShowMasterInfo=function(t){this.publish(2108264,[t])},o.prototype.getShowMasterInfoReply=function(t){e.ShowMasterModel.instance.getShowMasterInfoReply(t)},o.prototype.addShowMasterLevel=function(t){this.publish(2108265,[t])},o.prototype.addShowMasterLevelReply=function(t){CommonUtil.noticeError(t[1])},o.prototype.updateShowMasterLevel=function(t){e.ShowMasterModel.instance.updateShowMasterLevel(t)},o.prototype.onBagUpdate=function(){Laya.timer.callLater(this,function(){for(var t=1;t<=8;++t)e.ShowMasterModel.instance.checkIsAvailableByType(t)})},s=o,e.ShowMasterCtrl=s}(modules=modules||{}),function(l){var h,t,e,i;function n(){return null!==t&&t.apply(this,arguments)||this}h=l.store||(l.store={}),e=l.core.BaseCtrl,t=e,__extends(n,t),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setup=function(){this.subscribe(16779720,this.GetMallAuctionInfoReply).subscribe(16779719,this.BuyMallAuctionItemReply).subscribe(16779721,this.MallAuctionUseableReply).subscribe(16779722,this.MallAuctionLogsReply),this.GetMallAuctionInfo()},n.prototype.GetMallAuctionInfoReply=function(t){console.log("GetMallAuctionInfoReply",t);var e=t[0];0===e&&(h.AuctionStoreModel.instance.bidList=t[3]);var i=!h.AuctionStoreModel.instance.items||0===h.AuctionStoreModel.instance.items.length||!t[1]||0===t[1].length;if(0===e&&i){h.AuctionStoreModel.instance.items=t[1],l.forbiddenBoss.ForbiddenBossCtrl.instance.GetForbiddenBossCopyInfo(),this.MallAuctionUseable();var n=t[1]||[];for(var s in n)h.AuctionStoreModel.instance.checked[n[s][0]]=!1}else{n=t[1]||[];var o=h.AuctionStoreModel.instance.items||[];for(s=0;s<n.length;++s)for(var a=0;a<o.length;++a)if(o[a][0]===n[s][0]){var r=h.AuctionStoreModel.instance.getMyPrice(o[a][0]);r===o[a][3]&&n[s][3]>r&&(h.AuctionStoreModel.instance.checked[n[s][0]]=!1),o[a]=n[s];break}}h.AuctionStoreModel.instance.endTime=t[2],GlobalData.dispatcher.event("AUCTION_STORE_UPDATE"),this.setRP()},n.prototype.BuyMallAuctionItemReply=function(t){console.log("BuyMallAuctionItemReply",t);var e=t[0],i=1===this.bidType?"竞价成功":"加价成功";CommonUtil.codeDispose(e,i)},n.prototype.MallAuctionUseableReply=function(t){console.log("MallAuctionUseableReply",t),h.AuctionStoreModel.instance.usable=1===t[0],GlobalData.dispatcher.event("AUCTION_STORE_USABLE_UPDATE"),this.setRP()},n.prototype.MallAuctionLogsReply=function(t){console.log("MallAuctionLogsReply",t),0===t[0]?h.AuctionStoreModel.instance.logs=t[1]:h.AuctionStoreModel.instance.logs.concat(t[1]),GlobalData.dispatcher.event("AUCTION_STORE_LOGS_UPDATE")},n.prototype.GetMallAuctionInfo=function(){this.publish(4195904,null)},n.prototype.BuyMallAuctionItem=function(t,e){this.publish(2099354,[t,e])},n.prototype.MallAuctionUseable=function(){this.publish(4195905,null)},n.prototype.MallAuctionLogs=function(){this.publish(4195906,null)},n.prototype.setRP=function(){var t=!0;if(t){var e=l.config.ForbiddenBossCfg.instance.getBlendCfg(13)[1][0],i=h.AuctionStoreModel.instance.bidCount;if(t=t&&i<e){for(var n=h.AuctionStoreModel.instance.items||[],s=0,o=0;o<n.length;++o)1!==n[o][1]||h.AuctionStoreModel.instance.getMyPrice(n[o][0])||++s;t=t&&0<s}}l.redPoint.RedPointCtrl.instance.setRPProperty("auctionStoreRP",t||h.AuctionStoreModel.instance.checkMyPrice())},i=n,h.AuctionStoreCtrl=i}(modules=modules||{}),function(f){var t,l,e;function g(){this.init()}t=f.config||(f.config={}),l=laya.utils.Dictionary,Object.defineProperty(g,"instance",{get:function(){return this._instance=this._instance||new g},enumerable:!0,configurable:!0}),g.prototype.init=function(){this._treasureW={},this._treasureO={},this._typeDicW=new l,this._typeDicO=new l,this._exchangeTab={},this._exchangeCfgTab=new l,this._exchangeTypes=[];for(var t=GlobalData.getConfig("xunbao_weight"),e=0,i=t.length;e<i;e++){var n=(o=t[e])[0];null==this._treasureW[n]?this._treasureW[n]=[o]:this._treasureW[n].push(o),this._typeDicW.set(n,this._treasureW[n])}var s=GlobalData.getConfig("xunbao_oper");for(e=0,i=s.length;e<i;e++){var o;n=(o=s[e])[0],null==this._treasureO[n]?this._treasureO[n]=[o]:this._treasureO[n].push(o),this._typeDicO.set(n,this._treasureO[n])}var a=GlobalData.getConfig("xunbao_exchange");for(e=0;e<a.length;e++){var r=a[e];n=r[1],null!=this._exchangeTab[n]?this._exchangeTab[n].push(r):(this._exchangeTab[n]=[r],this._exchangeTypes.push(n)),this._exchangeCfgTab.set(r[0],r)}},g.prototype.getItemShow=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var s=new Array,o=this._typeDicW.get(t);if(e){for(var a=0;a<o.length;a++)if(p=o[a]){var r=p[6][0],l=p[6][1],h=p[7][0],c=p[7][1];r<=i&&i<=l&&h<=n&&n<=c&&s.push(p)}}else for(a=0;a<o.length;a++){var p;(p=o[a])&&0==p[6].length&&s.push(p)}return s},g.prototype.getItemConditionByGrad=function(t,e){return this._typeDicO.get(t)?this._typeDicO.get(t)[e][2]:[]},g.prototype.getItemCfgByGrad=function(t,e){if(this._typeDicO.get(t))return this._typeDicO.get(t)[e]},g.prototype.getfirstRewardByGrad=function(t,e){return void 0===e&&(e=2),this._typeDicO.get(t)[e][4]},g.prototype.getItemFestConditionByGrad=function(t,e,i){if(this._typeDicO.get(e))for(var n=this._typeDicO.get(e)[i][6],s=0;s<n.length;s+=3){var o=n[s],a=n[s+1],r=n[s+2];if(o===t)return[o,a,r]}return null},g.prototype.getBestIdByType=function(t,e,i,n,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0);var o=g.instance.getItemShow(t);i&&(o=g.instance.getItemShow(t,i,n,s));for(var a=new Array,r=new Array,l=0;l<o.length;l++){var h=o[l][1];if(3===t)h[2]===e&&(a=a.concat(o[l][2]));else if(5===t)if(f.festival.FestivalModel.instance.isXIanYu()[1]){a=a.concat(o[l][2]);var c=new Array;c=c.concat(o[l][4]);for(var p=0;p<c.length;p++){var u=c[p];u&&i===u[0]&&a.push([u[1],u[2],u[3]])}}else a=a.concat(o[l][2]);else a=a.concat(o[l][2])}for(l=0;l<a.length;l++){var d=a[l][2],m=a[l][0];1<d&&r.push(m)}return r},g.prototype.getCfgByitemId=function(t){return this._exchangeCfgTab.get(t)},g.prototype.getCfgsByType=function(t){var e=this._exchangeTab[t];return e&&e.sort(this.shortWeightCfgs),e},g.prototype.shortWeightCfgs=function(t,e){return t[4]-e[4]},g.prototype.getExchangeType=function(){return this._exchangeTypes},g.prototype.getRebateTaskList=function(t){var e=[],i=GlobalData.getConfig("xunbao_rebate_rewards");for(var n in i)i[n][0]===t&&e.push(i[n]);return e},e=g,t.TreasureCfg=e}(modules=modules||{}),function(u){var i,t,e,d,m,f,n,s;function o(){return t.call(this)||this}i=u.zxian_yu||(u.zxian_yu={}),e=u.core.BaseCtrl,d=laya.ui.Image,m=laya.maths.Point,f=u.common.CommonUtil,n=u.funcOpen.FuncOpenModel,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){i.ZXianYuModel.instance,this.subscribe(16785726,this.GetXianYuInfoReply),this.subscribe(16785727,this.GetYuGeInfoReply),this.subscribe(16785728,this.BuyYuGeGoodsReply),this.subscribe(16785729,this.F5YuGeReply),this.subscribe(16785730,this.GetXianYuFuYuInfoReply),this.subscribe(16785731,this.GetFuYuanAwardReply),this.subscribe(16777522,this.TaskXianYuXunbaoBagItemListReply),this.subscribe(16777523,this.TaskXianYuXunbaoBagAllItemReply),this.onGlobal("ZXIANYU_EFFECT",this.itemEffect),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("ZXIANYU_REPLY",i.ZXianYuModel.instance.setRP),this.onGlobal("TASK_XUNBAO_ALL_REPLY",i.ZXianYuModel.instance.setRP),this.onGlobal("ZXIANYU_ALL_REPLY",i.ZXianYuModel.instance.setRP),this.onGlobal("ZXIANYU_REPLY",i.ZXianYuModel.instance.setRP),this.onGlobal("BAG_UPDATE",i.ZXianYuModel.instance.setRP),this.GetXianYuInfo(),this.GetYuGeInfo(),this.GetXianYuFuYuInfo()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(233==t[e]&&n.instance.getFuncIsOpen(233))return void i.ZXianYuModel.instance.setRP()},o.prototype.TaskXianYuXunbaoBagItemListReply=function(t){var e=t[0];f.codeDispose(e,"取出成功"),GlobalData.dispatcher.event("ZXIANYU_REPLY")},o.prototype.TaskXianYuXunbaoBagAllItemReply=function(t){var e=t[0];f.codeDispose(e,"取出成功"),GlobalData.dispatcher.event("ZXIANYU_ALL_REPLY")},o.prototype.GetXianYuInfo=function(){this.publish(2105262,null)},o.prototype.GetYuGeInfo=function(){this.publish(2105263,null)},o.prototype.BuyYuGeGoods=function(t){this.publish(2105264,[t])},o.prototype.F5YuGe=function(){this.publish(2105265,null)},o.prototype.GetXianYuFuYuInfo=function(){this.publish(2105266,null)},o.prototype.GetFuYuanAward=function(t){this.publish(2105267,[t])},o.prototype.GetXianYuInfoReply=function(t){i.ZXianYuModel.instance.xianyu=t[0],i.ZXianYuModel.instance.xianyuLimit=t[1],GlobalData.dispatcher.event("ZXIANYU_UPDATE"),i.ZXianYuModel.instance.setRP()},o.prototype.GetYuGeInfoReply=function(t){i.ZXianYuModel.instance.idList=t[0],i.ZXianYuModel.instance.f5Time=t[1],GlobalData.dispatcher.event("ZXIANYU_YUGE_UPDATE"),i.ZXianYuModel.instance.setRP()},o.prototype.BuyYuGeGoodsReply=function(t){var e=t[0];f.codeDispose(e,"购买成功")},o.prototype.F5YuGeReply=function(t){var e=t[0];f.codeDispose(e,"刷新成功")},o.prototype.GetXianYuFuYuInfoReply=function(t){i.ZXianYuModel.instance.fuyu=t[0],i.ZXianYuModel.instance.stateList=t[1],GlobalData.dispatcher.event("ZXIANYU_FUYUAN_UPDATE"),i.ZXianYuModel.instance.setRP()},o.prototype.GetFuYuanAwardReply=function(t){var e=t[0];f.codeDispose(e,"领取成功")},o.prototype.itemEffect=function(p){for(var t=0,e=function(c){setTimeout(function(){var t,e=p[c],i=new d,n=e[0],s=e[1],o=e[2];if(null!=n&&(t=u.action_preview.ActionPreviewModel.instance.getPosSprite(10000004))){i.skin=f.getIconById(n),i.anchorX=i.anchorY=.5;var a=s.x+40+(CommonConfig.viewWidth-663)/2,r=s.y+90+(CommonConfig.viewHeight-o)/2;i.pos(a,r),LayerManager.instance.addToEffectLayer(i),m.TEMP.setTo(t.x,t.y),LayerManager.instance.getLayerById(7).globalToLocal(m.TEMP);var l=m.TEMP.x,h=m.TEMP.y;TweenJS.create(i).to({x:l,y:h,scaleX:.2,scaleY:.2},500).onComplete(function(){i.destroy(!0)}).start()}},t),t+=600},i=0;i<p.length;i++)e(i)},s=o,i.ZXianYuCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.recharge||(t.recharge={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16780016,this.getRechargeInfoReply),this.subscribe(16780017,this.updateRechargeInfo),this.publish(2099552,null)},o.prototype.getRechargeInfoReply=function(t){e.RechargeModel.instance.getRechargeInfoReply(t)},o.prototype.updateRechargeInfo=function(t){e.RechargeModel.instance.updateRechargeInfo(t)},s=o,e.RechargeCtrl=s}(modules=modules||{}),function(n){var t,e;function i(){this.preTotalTime=n.config.BlendCfg.instance.getCfgById(96104)[1][0],this.preBattleTime=n.config.BlendCfg.instance.getCfgById(96105)[1][0],this.vsTotalTime=n.config.BlendCfg.instance.getCfgById(96104)[1][1],this.vsGuessTime=n.config.BlendCfg.instance.getCfgById(96109)[1][0],this.vsBattleTime=n.config.BlendCfg.instance.getCfgById(96105)[1][1];for(var t=GlobalData.getConfig("scene_limittime"),e=0;e<t.length;++e)if(3601===t[e][1]){this.openTime=t[e][6],this.closeTime=t[e][7];break}this.maxRankCount=0;var i=GlobalData.getConfig("wind_cloud_rank");for(e=0;e<i.length;++e)i[e][0][1]>this.maxRankCount&&(this.maxRankCount=i[e][0][1])}t=n.config||(n.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getRewardByRank=function(t){for(var e=GlobalData.getConfig("wind_cloud_rank"),i=0;i<e.length;++i)if(e[i][0][0]>=t&&e[i][0][1]<=t)return e[i][1];return null},i.prototype.getItemByRank=function(t){for(var e=GlobalData.getConfig("wind_cloud_rank"),i=0;i<e.length;++i)if(e[i][0][0]>=t&&e[i][0][1]<=t)return e[i][2];return 0},i.prototype.getCfgByRound=function(t){for(var e=GlobalData.getConfig("wind_cloud_arean"),i=0;i<e.length;++i)if(e[i][0]===t)return e[i];return null},e=i,t.WindCloudCfg=e}(modules=modules||{}),function(r){var l,e,i,n,h,t;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t._isFirst=!0,t}l=r.windCloud||(r.windCloud={}),i=r.config.SceneCfg,r.dungeon.DungeonCtrl,r.scene.SceneUtil,n=r.scene.SceneModel,h=r.config.WindCloudCfg,e=r.core.BaseCtrl,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16790726,this.GetWindCloudRankReply).subscribe(16790731,this.GetWindCloudAreanRankReply).subscribe(16790727,this.GetWindCloudInfoReply).subscribe(16790728,this.WindCloudEnrollReply).subscribe(16790729,this.WindCloudGuessReply).subscribe(16790730,this.BroadcastMatchDone).subscribe(16790732,this.NotifyEnterScene).subscribe(16790734,this.UpdateWindCloudInfo).subscribe(16790733,this.GetWindCloudCopyDataReply).subscribe(16790735,this.UpdateWindCloudMaster).subscribe(16790736,this.NotifyWindCloudAreanBegin).subscribe(16790737,this.UpdateSurplusChallengeCount),this.onGlobal("SCENE_ENTER",this.enterScene).onGlobal("WINDCLOUD_INFO_UPDATE",this.checkRP),this.GetWindCloudInfo(),this.GetWindCloudCopyData(),this.checkTime()},s.prototype.GetWindCloudRank=function(){this.publish(9437384,null),console.log("GetWindCloudRank")},s.prototype.GetWindCloudAreanRank=function(){this.publish(9437388,null),console.log("GetWindCloudAreanRank")},s.prototype.GetWindCloudInfo=function(){this.publish(9437385,null),console.log("GetWindCloudInfo")},s.prototype.WindCloudEnroll=function(){this.publish(9437386,null),console.log("WindCloudEnroll")},s.prototype.WindCloudGuess=function(t,e,i){this.publish(9437387,[t,e,i]),console.log("WindCloudGuess",t,e,i)},s.prototype.GetWindCloudCopyData=function(){this.publish(2109562,null),console.log("GetWindCloudCopyData")},s.prototype.WindCloudInterfaceState=function(t){this.publish(9437389,[t]),console.log("WindCloudInterfaceState",t)},s.prototype.GetWindCloudRankReply=function(t){console.log("GetWindCloudRankReply",t),l.WindCloudModel.instance.preRankInfo=t,GlobalData.dispatcher.event("WINDCLOUD_PRERANK_UPDATE")},s.prototype.GetWindCloudAreanRankReply=function(t){console.log("GetWindCloudAreanRankReply",t),l.WindCloudModel.instance.vsRankInfo=t,GlobalData.dispatcher.event("WINDCLOUD_VSRANK_UPDATE")},s.prototype.GetWindCloudInfoReply=function(t){console.log("GetWindCloudInfoReply",t),l.WindCloudModel.instance.recordList=t[0],l.WindCloudModel.instance.guessTimes=t[3],l.WindCloudModel.instance.matchStage=t[1],l.WindCloudModel.instance.curRound!=t[2]&&(l.WindCloudModel.instance.selectedRound=t[2]),l.WindCloudModel.instance.curRound=t[2],l.WindCloudModel.instance.isEnroll=1==t[4],l.WindCloudModel.instance.enrollCount=t[5],l.WindCloudModel.instance.guessRecord=t[6],GlobalData.dispatcher.event("WINDCLOUD_INFO_UPDATE"),this.checkEnroll()},s.prototype.WindCloudEnrollReply=function(t){console.log("WindCloudEnrollReply",t),CommonUtil.noticeError(t[0],"报名成功")},s.prototype.WindCloudGuessReply=function(t){console.log("WindCloudGuessReply",t),CommonUtil.noticeError(t[0],"下注成功")},s.prototype.BroadcastMatchDone=function(t){console.log("BroadcastMatchDone",t),CommonUtil.noticeError(t[0],"匹配成功")},s.prototype.NotifyEnterScene=function(t){console.log("NotifyEnterScene",t)},s.prototype.enterScene=function(t){if(console.log("enter_scene:",t),this._waitForEnter){t=n.instance.enterScene[0];var e=i.instance.getCfgById(t);e&&0===e[7]&&(r.teamBattle.TeamBattleCtrl.instance.reqBeginMatch(this._waitForEnter),this._waitForEnter=0)}},Object.defineProperty(s.prototype,"isWaitingForEnter",{get:function(){return 0<this._waitForEnter},enumerable:!0,configurable:!0}),s.prototype.UpdateWindCloudInfo=function(t){console.log("UpdateWindCloudInfo",t),l.WindCloudModel.instance.guessTimes=t[0],l.WindCloudModel.instance.isEnroll=1==t[1],GlobalData.dispatcher.event("WINDCLOUD_INFO_UPDATE")},s.prototype.GetWindCloudCopyDataReply=function(t){console.log("GetWindCloudCopyDataReply",t),l.WindCloudModel.instance.matchTimes=t[0],GlobalData.dispatcher.event("WINDCLOUD_INFO_UPDATE")},s.prototype.UpdateWindCloudMaster=function(t){console.log("UpdateWindCloudMaster",t),l.WindCloudModel.instance.isMaster=1===t[0]},s.prototype.NotifyWindCloudAreanBegin=function(t){console.log("NotifyWindCloudAreanBegin",t),l.WindCloudModel.instance.isWaitingForMatch&&(CommonUtil.whetherInCopy()?WindowManager.instance.open(1268,1):CommonGroupUtil.isMyHaveTeam()&&WindowManager.instance.open(1268,2))},s.prototype.UpdateSurplusChallengeCount=function(t){console.log("UpdateSurplusChallengeCount",t),WindowManager.instance.open(1264,t[0])},s.prototype.checkTime=function(){Laya.timer.clear(this,this.checkTime);var t=GlobalData.serverTime,e=l.WindCloudModel.instance.enrollTime;if(t<e[0])Laya.timer.once(e[0]-t,this,this.checkTime,null,!0);else if(t<e[1])Laya.timer.once(e[1]-t,this,this.checkTime,null,!0),this.GetWindCloudInfo();else{var i=l.WindCloudModel.instance.eventTime;if(t<i[0])Laya.timer.once(i[0]-t,this,this.checkTime,null,!0);else if(t<i[1]){var n=i[0]+h.instance.preTotalTime;if(t<n)Laya.timer.once(n-t,this,this.checkTime,null,!0),this.GetWindCloudInfo();else{this.GetWindCloudInfo();for(var s=GlobalData.getConfig("wind_cloud_arean").length,o=0;o<s;++o){var a=l.WindCloudModel.instance.getEndTimeByRound(o)+h.instance.vsGuessTime;if(t<a)return void Laya.timer.once(a-t,this,this.checkTime,null,!0);if(t<(a=l.WindCloudModel.instance.getEndTimeByRound(o+1)))return void Laya.timer.once(a-t,this,this.checkTime,null,!0)}Laya.timer.once(i[1]-t,this,this.checkTime,null,!0)}}}},s.prototype.checkRP=function(){var t=GlobalData.serverTime,e=l.WindCloudModel.instance.enrollTime;if(t>e[0]&&t<e[1]&&!l.WindCloudModel.instance.isEnroll)r.redPoint.RedPointCtrl.instance.setRPProperty("windCloudRP",!0);else{var i=l.WindCloudModel.instance.eventTime,n=r.config.BlendCfg.instance.getCfgById(96102)[1][0];if(t>i[0]&&t<i[0]+h.instance.preTotalTime&&1===l.WindCloudModel.instance.matchStage&&l.WindCloudModel.instance.matchTimes<n)r.redPoint.RedPointCtrl.instance.setRPProperty("windCloudRP",!0);else{if(t>i[0]+h.instance.preTotalTime&&2===l.WindCloudModel.instance.matchStage)for(var s=GlobalData.getConfig("wind_cloud_arean"),o=0;o<s.length;++o)if(t<l.WindCloudModel.instance.getEndTimeByRound(o)+h.instance.vsGuessTime){var a=s[o][5][0];if(l.WindCloudModel.instance.guessTimes<a)return void r.redPoint.RedPointCtrl.instance.setRPProperty("windCloudRP",!0)}r.redPoint.RedPointCtrl.instance.setRPProperty("windCloudRP",!1)}}},s.prototype.checkEnroll=function(){this._isFirst&&(this._isFirst=!1,this.popupEnrollNotice())},s.prototype.popupEnrollNotice=function(){var e=this,t=l.WindCloudModel.instance.eventTime[0],i=new Date(t),n=new Date(GlobalData.serverTime);if(l.WindCloudModel.instance.isEnroll&&i.getDay()===n.getDay()&&GlobalData.serverTime<t)if(WindowManager.instance.isOpened(443)||WindowManager.instance.isOpened(12)||WindowManager.instance.isOpened(1302))GlobalData.dispatcher.once("PANEL_CLOSED",this,function(t){443!==t&&12!==t&&1302!==t||e.popupEnrollNotice()});else{var s=CommonUtil.formatHtmlStrByColor("#168a17",("0"+i.getHours()).substr(-2)+"："+("0"+i.getMinutes()).substr(-2));CommonUtil.alert("温馨提示","您已报名风云擂台，活动将于本日"+s+"开启，请准时参加！",[null,"知道了"])}},t=s,l.WindCloudCtrl=t}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){var t=e.call(this)||this;return t.onGlobal("FUNC_OPEN_UPDATE",t.funOpenSetSprintType),t.onGlobal("COMPOSE_REPLY",t.setRP),t.onGlobal("PLAYER_EQUIPS_INITED",t.setRP),t.onGlobal("PLAYER_WEAR_EQUIP",t.setRP),t.onGlobal("PLAYER_WEAR_EQUIPS",t.setRP),t.onGlobal("FUNC_OPEN_ASSIGN_REPLY",t.bornLvUpsetRP),t.onGlobal("BORN_LV_UPDATE",t.bornLvUpsetRP),t.onGlobal("YUAN_SHEN_INFO_UPDATE",t.bornLvUpsetRP),t.onGlobal("DIVINATORY_CARD_INFO",t.bornLvUpsetRP),t.onGlobal("DIVINATORY_CARD_STATE",t.bornLvUpsetRP),t.onGlobal("SHOWEQUIP_UPDATE",t.funOpenSetSprintTypeRely),Laya.timer.loop(2e3,t,t.setRP),t}i=t.da_zhao||(t.da_zhao={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){},a.prototype.funOpenSetSprintTypeRely=function(){s.instance.getFuncIsOpen(249)&&(i.DaZhaoModel.instance.setArrTclassAndSclassOpen(),this.setRP())},a.prototype.bornLvUpsetRP=function(){Laya.timer.once(500,this,this.funOpenSetSprintTypeRely)},a.prototype.setRP=function(){i.DaZhaoModel.instance.setRP()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(249==t[e]&&s.instance.getFuncIsOpen(249))return void i.DaZhaoModel.instance.setRP()},o=a,i.DaZhaoCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.beast_equipment||(t.beast_equipment={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.funcOpen.FuncOpenModel,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16788126,this.GetBeastInfoReply),this.subscribe(16788127,this.UpdateBeastOnline),this.subscribe(16788128,this.UpdateBeastList),this.subscribe(16788135,this.UpdateBeastExOnlineIndex),this.subscribe(16788129,this.ExBeastOnlineReply),this.subscribe(16788130,this.WearBeastEquipReply),this.subscribe(16788131,this.BeastOnlineReply),this.subscribe(16788132,this.BeastStrongReply),this.subscribe(16788133,this.BeastResolveReply),this.subscribe(16788134,this.BeastSkillRefineReply),this.subscribe(16788136,this.OneKeyTakeoffReply),this.subscribe(16788137,this.UpdateBeastJing),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetBeastInfo(),Laya.timer.loop(2e3,this,this.setRP)},r.prototype.setRP=function(){i.BeastEquipmentModel.instance.setRP()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(318==t[e]&&o.instance.getFuncIsOpen(318))return void i.BeastEquipmentModel.instance.setRP()},r.prototype.GetBeastInfo=function(){this.publish(2107462,null)},r.prototype.ExBeastOnline=function(){this.publish(2107463,null)},r.prototype.WearBeastEquip=function(t,e,i){this.publish(2107464,[t,e,i])},r.prototype.BeastOnline=function(t,e){this.publish(2107465,[t,e])},r.prototype.BeastStrong=function(t){this.publish(2107466,[t])},r.prototype.BeastResolve=function(t){this.publish(2107467,[t])},r.prototype.OneKeyTakeoff=function(t){this.publish(2107469,[t])},r.prototype.BeastSkillRefine=function(t,e){this.publish(2107468,[t,e])},r.prototype.GetBeastInfoReply=function(t){i.BeastEquipmentModel.instance.getInfo(t)},r.prototype.UpdateBeastOnline=function(t){i.BeastEquipmentModel.instance.updateInfo(t)},r.prototype.UpdateBeastList=function(t){i.BeastEquipmentModel.instance.uodateInfo1(t)},r.prototype.UpdateBeastExOnlineIndex=function(t){i.BeastEquipmentModel.instance.uodateInfo2(t)},r.prototype.UpdateBeastJing=function(t){i.BeastEquipmentModel.instance.uodateInfo3(t)},r.prototype.ExBeastOnlineReply=function(t){0==t[0]?(s.instance.addNotice("拓展成功",!1),GlobalData.dispatcher.event("BEAST_EQUIPMENT_UPDATE")):CommonUtil.noticeError(t[0])},r.prototype.WearBeastEquipReply=function(t){0==t[0]?0===t[1]?s.instance.addNotice("装备成功",!1):s.instance.addNotice("卸下成功",!1):CommonUtil.noticeError(t[0])},r.prototype.BeastOnlineReply=function(t){if(0==t[0])if(0==t[1]){s.instance.addNotice("出战成功",!1);var e=t[2];i.BeastEquipmentModel.instance.isJiChenChuZhan(e)&&CommonUtil.alert("提示","成功出战兽灵并转移兽灵技能")}else s.instance.addNotice("召回成功",!1);else CommonUtil.noticeError(t[0])},r.prototype.BeastStrongReply=function(t){console.log("【兽灵系统】强化兽灵装备返回 :   ",t),0==t[0]?(s.instance.addNotice("强化成功",!1),GlobalData.dispatcher.event("BEAST_EQUIPMENT_UP",[t[1]])):CommonUtil.noticeError(t[0])},r.prototype.BeastResolveReply=function(t){if(0==t[0]){var e=t[1];WindowManager.instance.open(212,[e,"分解成功",!0,"",!1,!0]),i.BeastEquipmentModel.instance._rflags={},GlobalData.dispatcher.event("BEAST_EQUIPMENT_R_UPDATE")}else CommonUtil.noticeError(t[0])},r.prototype.BeastSkillRefineReply=function(t){0==t[0]?s.instance.addNotice("升级成功",!1):CommonUtil.noticeError(t[0])},r.prototype.OneKeyTakeoffReply=function(t){0==t[0]?s.instance.addNotice("一键卸下成功",!1):CommonUtil.noticeError(t[0])},a=r,i.BeastEquipmentCtrl=a}(modules=modules||{}),function(r){var l,e,t,i,n;function s(){var t=e.call(this)||this;return t._isfirst=!0,t}l=r.beast_boss||(r.beast_boss={}),t=r.core.BaseCtrl,i=r.scene.SceneModel,e=t,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16777468,this.GetMysticalCopyInfoReply),this.subscribe(16777467,this.GetInfiniteCopyInfoReply),this.subscribe(16777469,this.GetMysticalGatherInfoReply),this.subscribe(16777470,this.updateMysticalGatherState),this.onGlobal("SCENE_ENTER",this.nowCengShu),this.onGlobal("HALO_AUTO_BEAST_SELECT_TARGET",this.onAutoSelectTraget),this.GetInfiniteCopyInfo(),this.GetMysticalCopyInfo(),this.GetMysticalGatherInfo(),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},s.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(365==t[e]){if(this._isfirst)return void(this._isfirst=!1);if(r.funcOpen.FuncOpenModel.instance.getFuncIsOpen(365)){var i=localStorage.getItem(r.player.PlayerModel.instance.actorId+"_BeastBossGuanzu");if(i=i||"1",1===parseInt(i)){console.log("在线玩家  首次开启无限岛  关注所有 boss"),localStorage.setItem(r.player.PlayerModel.instance.actorId+"_BeastBossGuanzu","2");for(var n=r.config.SceneCopyInfiniteCfg.instance.arr,s=0;s<n.length;s++){var o=n[s],a=l.BeastBossModel.instance.getId(o);a&&r.dungeon.DungeonCtrl.instance.setFollowBoss(a,!0)}}}return}},s.prototype.GetMysticalGatherInfo=function(){this.publish(7340236,null)},s.prototype.GetInfiniteCopyInfo=function(){this.publish(2097191,null)},s.prototype.GetMysticalCopyInfo=function(){this.publish(2097192,null)},s.prototype.updateMysticalGatherState=function(t){l.BeastBossModel.instance.getInfo3(t)},s.prototype.GetMysticalGatherInfoReply=function(t){l.BeastBossModel.instance.getInfo2(t)},s.prototype.GetInfiniteCopyInfoReply=function(t){l.BeastBossModel.instance.getInfo1(t)},s.prototype.GetMysticalCopyInfoReply=function(t){l.BeastBossModel.instance.getInfo(t)},s.prototype.nowCengShu=function(){if(r.scene.SceneModel.instance.enterScene){var t=i.instance.enterScene[0];2402!==t&&2403!==t||(l.BeastBossModel.instance.curLayer=r.scene.SceneModel.instance.enterScene[3],GlobalData.dispatcher.event("BEAST_BOSS_SCENE_UPDATE"))}},s.prototype.onAutoSelectTraget=function(t){void 0===t&&(t=!1),l.BeastBossModel.instance.autoSelectTarget(t)},n=s,l.BeastBossCtrl=n}(modules=modules||{}),function(o){var i,t,e,n;function s(){return t.call(this)||this}i=o.faerie_demon||(o.faerie_demon={}),e=o.core.BaseCtrl,t=e,__extends(s,t),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16788637,this.orderTeamerExReply),this.subscribe(16788638,this.endOrderTeamerExReply),this.subscribe(16788640,this.mateTeamEnemyExReply),this.subscribe(16788526,this.getGodDevilReply),this.subscribe(16788527,this.drawGodDevilRewardReply),this.subscribe(16788642,this.giveupMatchEnemyReply),this.subscribe(16788644,this.updateMateResult),this.subscribe(16788645,this.endGodDevilOder),this.subscribe(16788529,this.updateGodDevilCopyTimes),this.subscribe(16788530,this.updateGodDevilMap),this.subscribe(16788528,this.getGodDevilRankReply),this.subscribe(16788531,this.judgeGodDevilAward),this.subscribe(16788532,this.godDevilScoreWinReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getGodDevil(),this.onGlobal("SCENE_ENTER",this.clearAllCopyTeamDate)},s.prototype.clearAllCopyTeamDate=function(){var t=o.scene.SceneModel.instance.enterScene[0];0===o.config.SceneCfg.instance.getCfgById(t)[7]&&(console.log("清楚  仙魔对决 副本内数据"),i.FaerieDemonModel.instance.clearAllCopyTeamDate())},s.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(377==t[e]&&o.funcOpen.FuncOpenModel.instance.getFuncIsOpen(377))return void i.FaerieDemonModel.instance.setRP()},s.prototype.orderTeamerEx=function(t){console.log("【仙魔对决】 调整次序....................."),this.publish(4195114,[t])},s.prototype.endOrderTeamerEx=function(){console.log("【仙魔对决】 结束调整次序....................."),this.publish(4195115,null)},s.prototype.mateTeamEnemyEx=function(t){void 0===t&&(t=!0),console.log("【仙魔对决】 匹配对手队伍....................."),!CommonUtil.whetherInCopy()&&t&&this.publish(4195118,null)},s.prototype.giveupMatchEnemy=function(){console.log("【仙魔对决】 结束匹配敌人....................."),this.publish(4195117,null)},s.prototype.getGodDevilRank=function(){console.log("【仙魔对决】 获取仙魔积分排名....................."),this.publish(4195204,null)},s.prototype.drawGodDevilReward=function(t){console.log("【仙魔对决】 领取仙魔对决奖励....................."),this.publish(2107763,[t])},s.prototype.getGodDevil=function(){console.log("【仙魔对决】 获取仙魔对决....................."),this.publish(2107762,null)},s.prototype.orderTeamerExReply=function(t){console.log("【仙魔对决】 调整次序返回.................",t),CommonUtil.noticeError(t[0])},s.prototype.endOrderTeamerExReply=function(t){console.log("【仙魔对决】 结束调整次序返回.................",t),CommonUtil.noticeError(t[0])},s.prototype.giveupMatchEnemyReply=function(t){console.log("【仙魔对决】 结束匹配敌人返回.................",t),CommonUtil.noticeError(t[0]),0===t[0]&&o.notice.SystemNoticeManager.instance.addNotice("已取消匹配对手",!0)},s.prototype.mateTeamEnemyExReply=function(t){console.log("【通用组队】 匹配对手队伍返回.................",t);var e=t[0];if(0!=e){var i=t[1];if(i){var n=ErrorCodeCfg.instance.getErrorCfgById(e),s=n?n[1]:"未配置错误码"+e;o.notice.SystemNoticeManager.instance.addNotice("【"+i+"】"+s,!0)}else CommonUtil.noticeError(e);CommonGroupUtil.changLose()}},s.prototype.updateMateResult=function(t){console.log("【仙魔对决】 更新匹配结果 对手信息.................",t),i.FaerieDemonModel.instance.updateMateResult(t)},s.prototype.endGodDevilOder=function(t){console.log("【仙魔对决】 结束调整 对手信息.................",t),i.FaerieDemonModel.instance.updateMateResult(t)},s.prototype.getGodDevilReply=function(t){console.log("【仙魔对决】 获取仙魔对决返回.................",t),i.FaerieDemonModel.instance.getGodDevilReply(t)},s.prototype.godDevilScoreWinReply=function(t){console.log("【仙魔对决】 仙魔对决信息 积分 和连胜.................",t),i.FaerieDemonModel.instance.godDevilScoreWinReply(t)},s.prototype.drawGodDevilRewardReply=function(t){console.log("【仙魔对决】 领取仙魔对决奖励返回.................",t),CommonUtil.noticeError(t[0]),0===t[0]&&this.getGodDevil()},s.prototype.updateGodDevilCopyTimes=function(t){console.log("【仙魔对决】 更新仙魔对决次数.................",t),i.FaerieDemonModel.instance.updateGodDevilCopyTimes(t)},s.prototype.getGodDevilRankReply=function(t){console.log("【仙魔对决】 仙魔积分排名返回.................",t),i.FaerieDemonModel.instance.getGodDevilRankReply(t)},s.prototype.judgeGodDevilAward=function(t){console.log("【仙魔对决】 仙魔对决积分奖励.................",t),i.FaerieDemonModel.instance.judgeGodDevilAward(t)},s.prototype.updateGodDevilMap=function(t){console.log("【仙魔对决】 仙魔对决场景信息.................",t),i.FaerieDemonModel.instance.updateGodDevilMap(t)},n=s,i.FaerieDemonCtrl=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._ids=[];for(var t=GlobalData.getConfig("xianfu_animal"),e=0,i=t.length;e<i;e++){var n=t[e][0],s=this._tab[n];(s=s||{})[t[e][1]]=t[e],this._tab[n]=s}for(var o in this._tab)n=parseInt(o),this._ids.push(n)},n.prototype.getCfgByIdAndLv=function(t,e){return this._tab[t][e]},Object.defineProperty(n.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),i=n,e.XianfuAnimalCfg=i}(modules=modules||{}),function(n){var a,t,e,r,i,s,l,h,o,c,p;function u(){return null!==t&&t.apply(this,arguments)||this}a=n.xianfu||(n.xianfu={}),e=n.core.BaseCtrl,r=n.notice.SystemNoticeManager,i=n.config.XianfuAnimalCfg,s=n.effect.SuccessEffectCtrl,l=n.common.CommonUtil,h=n.config.BlendCfg,o=n.funcOpen.FuncOpenModel,c=n.dungeon.DungeonCtrl,t=e,__extends(u,t),Object.defineProperty(u,"instance",{get:function(){return this._instance=this._instance||new u},enumerable:!0,configurable:!0}),u.prototype.setup=function(){this.subscribe(16781116,this.getXianFuInfoReply),this.subscribe(16781117,this.updateXianFuInfo),this.subscribe(16781120,this.upgradeXianFuReply),this.subscribe(16781118,this.updateBuildingInfo),this.subscribe(16781119,this.updateBuildingInfo),this.subscribe(16781121,this.getBuildProduceAwardReply),this.subscribe(16781123,this.makeItemReply),this.subscribe(16781122,this.updateProduceCoin),this.subscribe(16781124,this.updateSpiritAnimalTravel),this.subscribe(16781125,this.updateSpiritAnimalTravel),this.subscribe(16781126,this.travelReply),this.subscribe(16781135,this.buyTravelItemReply),this.subscribe(16781129,this.travelFinishReply),this.subscribe(16781130,this.getIllustratedHandbookReply),this.subscribe(16781131,this.updateIllustratedHandbook),this.subscribe(16781136,this.updateXianFuTaskState),this.subscribe(16781137,this.updateXianFuTaskState),this.subscribe(16781138,this.getXianFuTaskAwardReply),this.subscribe(16781127,this.getTravelAwardReply),this.subscribe(16781133,this.xianFuEvent),this.subscribe(16781141,this.updateXianFuFengShuiInfo),this.subscribe(16781140,this.updateXianFuFengShuiInfo),this.subscribe(16781142,this.upgradeFengShuiDecorateReply),this.subscribe(16781132,this.promoteIllustratedHandbookReply),this.subscribe(16781134,this.getXianFuMallReply),this.subscribe(16781139,this.getXianFuActivaAwardReply),this.subscribe(16781143,this.getXianFuSkillListReply),this.subscribe(16781144,this.promoteXianFuSkillReply),this.subscribe(16781145,this.makeItemFinishReply),this.onLoginSuccess(),this.onGlobal("BAG_UPDATE",this.updateBag),this.onGlobal("BAG_DATA_GOT",this.updateBag)},u.prototype.onLoginSuccess=function(){this.publish(2100752,null),this.getIllustratedHandbook(),this.getXianfuTaskList(),this.getXianFuFengShuiInfo(),this.requestBuildInfo();for(var t=n.config.XianfuAnimalCfg.instance.ids,e=0,i=t.length;e<i;e++)u.instance.getSpiritAnimalTravel([t[e]]);this.getXianFuSkillList()},u.prototype.requestBuildInfo=function(){u.instance.getBuildingInfo([0]),u.instance.getBuildingInfo([1]),u.instance.getBuildingInfo([2]),u.instance.getBuildingInfo([3]),u.instance.getBuildingInfo([4]),GlobalData.dispatcher.event("XIANFU_SHENGJI_UPDATE"),GlobalData.dispatcher.event("XIANFU_WIND_WATER_UPTATE")},u.prototype.getXianFuInfoReply=function(t){a.XianfuModel.instance.getXianFuInfoReply(t)},u.prototype.updateXianFuInfo=function(t){a.XianfuModel.instance.updateInfo(t)},u.prototype.updateProduceCoin=function(t){a.XianfuModel.instance.updateProduceCoin(t)},u.prototype.getIllustratedHandbook=function(){this.publish(2100761,null)},u.prototype.getIllustratedHandbookReply=function(t){a.XianfuModel.instance.getIllustratedHandbookReply(t)},u.prototype.updateIllustratedHandbook=function(t){a.XianfuModel.instance.updateIllustratedHandbook(t)},u.prototype.PromoteIllustratedHandbook=function(t){this.publish(2100762,t)},u.prototype.promoteIllustratedHandbookReply=function(t){var e=t[0];e?l.noticeError(e):r.instance.addNotice("图鉴升级成功")},u.prototype.xianFuEvent=function(t){a.XianfuModel.instance.xianFuEvent(t)},u.prototype.getXianfuTaskList=function(){this.publish(2100765,null)},u.prototype.updateXianFuTaskState=function(t){a.XianfuModel.instance.updateXianFuTaskState(t)},u.prototype.getXianFuTaskAward=function(t){this.publish(2100766,t)},u.prototype.getXianFuTaskAwardReply=function(t){var e=t[0];e?l.noticeError(e):r.instance.addNotice("领取成功")},u.prototype.getXianFuActivaAward=function(t){this.publish(2100767,t)},u.prototype.getXianFuActivaAwardReply=function(t){var e=t[0];if(e)if(28039==e){for(var i=[],n=a.XianfuModel.instance.taskActivesAward[a.XianfuModel.instance.selectTaskActiveAward],s=0,o=n.length;s<o;s+=2)i.push([n[s],n[s+1],0,null]);WindowManager.instance.open(212,[i,"奖励预览"])}else l.noticeError(e);else r.instance.addNotice("活跃度奖励领取成功")},u.prototype.xianfuShengji=function(){this.publish(2100754,null)},u.prototype.upgradeXianFuReply=function(t){t[0]?l.noticeError(t[0]):(r.instance.addNotice("仙府升级成功"),this.requestBuildInfo())},u.prototype.getXianFuFengShuiInfo=function(){this.publish(2100768,null)},u.prototype.updateXianFuFengShuiInfo=function(t){a.XianfuModel.instance.updateXianFuFengShuiInfo(t)},u.prototype.getBuildingInfo=function(t){this.publish(2100753,t)},u.prototype.updateBuildingInfo=function(t){t&&a.XianfuModel.instance.getBuildingInfoReply(t)},u.prototype.upgradeFengShuiDecorate=function(t){console.log("发送id................",t),this.publish(2100769,t)},u.prototype.upgradeFengShuiDecorateReply=function(t){var e=t[0];e?l.noticeError(e):(r.instance.addNotice("升级成功"),s.instance.play("assets/others/tx_jinjiechengong4.png"))},u.prototype.buyTravelItem=function(t){this.publish(2100764,t)},u.prototype.buyTravelItemReply=function(t){var e=t[0];e?l.noticeError(e):(r.instance.addNotice("购买游历道具成功"),WindowManager.instance.close(189))},u.prototype.getXianfuMall=function(){this.publish(2100763,null)},u.prototype.getXianFuMallReply=function(t){var e=t[0];e?l.noticeError(e):a.XianfuModel.instance.xianfuMallReply(t[1])},u.prototype.travelFinish=function(t){this.publish(2100759,t)},u.prototype.travelFinishReply=function(t){var e=t[0];e?l.noticeError(e):(r.instance.addNotice("游历已提前结束"),this.getSpiritAnimalTravel([i.instance.ids[a.XianfuModel.instance.selectPetIndex]]),WindowManager.instance.close(193))},u.prototype.travel=function(t){this.publish(2100758,t)},u.prototype.travelReply=function(t){t[0]?l.noticeError(t[0]):(this.getSpiritAnimalTravel([i.instance.ids[a.XianfuModel.instance.selectPetIndex]]),WindowManager.instance.close(190))},u.prototype.getSpiritAnimalTravel=function(t){this.publish(2100757,t)},u.prototype.updateSpiritAnimalTravel=function(t){t&&a.XianfuModel.instance.updateSpiritAnimalTravel(t)},u.prototype.getTravelAward=function(t){this.publish(2100760,t)},u.prototype.getTravelAwardReply=function(t){var e=t[0];e?l.noticeError(e):(r.instance.addNotice("领取成功"),WindowManager.instance.close(192))},u.prototype.makeItem=function(t){this.publish(2100756,t)},u.prototype.makeItemReply=function(t){t[0]&&l.noticeError(t[0])},u.prototype.getBuildProduceAward=function(t){this.publish(2100755,t)},u.prototype.getBuildProduceAwardReply=function(t){t[0]?l.noticeError(t[0]):r.instance.addNotice("领取成功")},u.prototype.updateBag=function(){a.XianfuModel.instance.checkArticleRP()},u.prototype.getXianFuSkillList=function(){this.publish(2100770,null)},u.prototype.getXianFuSkillListReply=function(t){var e=t[0];a.XianfuModel.instance.skillList=e},u.prototype.promoteXianFuSkill=function(t){this.publish(2100771,[t])},u.prototype.promoteXianFuSkillReply=function(t){var e=t[0];e?l.noticeError(e):a.XianfuModel.instance.selectSkill%100>>0==0?s.instance.play("assets/others/tx_jinjiechengong5.png"):s.instance.play("assets/others/tx_jinjiechengong4.png")},u.prototype.makeItemFinish=function(t){this.publish(2100772,[t])},u.prototype.makeItemFinishReply=function(t){var e=t[0];l.noticeError(e,"炼制完成")},u.prototype.endSmelt=function(){var t,e=a.XianfuModel.instance.buildType,i=a.XianfuModel.instance.getBuildInfo(e)[2],n=Math.round((i-GlobalData.serverTime)/1e3)*h.instance.getCfgById(27015)[1][0],s=l.getPropCountById(90140001),o="立即结束可"+l.formatHtmlStrByColor("#b15315","直接结束炼制")+",获得奖励!<br/>是否消耗<img src='"+l.getIconById(90140001,!0)+'\' width="40" height="40"/>'+n+"&nbsp;元宝立即结束?";t=s<n?Handler.create(l,l.goldNotEnoughAlert,[1]):Handler.create(u.instance,u.instance.makeItemFinish,[a.XianfuModel.instance.buildType]),l.alert("提示",o,[t])},u.prototype.enterScene=function(){o.instance.getFuncNeedShow(116)?15==n.scene.SceneUtil.currScene?r.instance.addNotice("您已在该场景中",!0):(a.XianfuModel.instance.panelType=0,c.instance.reqEnterScene(2241,0)):r.instance.addNotice(o.instance.getFuncOpenTipById(116),!0)},p=u,a.XianfuCtrl=p}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=0,e=GlobalData.getConfig("faction_boss_award");t<e.length;t++){var i=e[t];this._tab[i[0]]=i}},n.prototype.getCfgBylv=function(t){return this._tab[t]},i=n,e.FactionBossAwardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._pureIds=[];for(var t=0,e=GlobalData.getConfig("faction_skill");t<e.length;t++){var i=e[t],n=i[0];this._tab[n]=i;var s=CommonUtil.getSkillPureIdById(n);-1==this._pureIds.indexOf(s)&&this._pureIds.push(s)}},n.prototype.getCfgById=function(t){return this._tab[t]},Object.defineProperty(n.prototype,"pureIds",{get:function(){return this._pureIds},enumerable:!0,configurable:!0}),i=n,e.FactionSkillCfg=i}(modules=modules||{}),function(r){var l,h,o,c,p,u,d,i,m,t;function f(){this.isTipF5Alert=!0,this.updateTime=0,this.ableHelpNum=1,this.curPage=0,this.totalPage=0,this.showValid=!1,this.tabs=[160,161,162,183],this._shieldPanels=[263,268,295,269,277,278,279,280,281],this.ableHelpNum=d.instance.getCfgById(36051)[1][0],this._skillList={}}l=r.faction||(r.faction={}),h=r.redPoint.RedPointCtrl,o=utils.TableUtils,c=r.common.GlobalData,p=r.funcOpen.FuncOpenModel,u=r.config.FactionBossAwardCfg,d=r.config.BlendCfg,i=r.rename.RenameModel,m=r.config.FactionSkillCfg,Object.defineProperty(f,"instance",{get:function(){return this._instance=this._instance||new f},enumerable:!0,configurable:!0}),f.prototype.getFactionInfoReply=function(t){this.baseInfo=t,this.memberList=t[2],this.factionId=t[13],c.dispatcher.event("FACTION_INFO")},Object.defineProperty(f.prototype,"memberList",{get:function(){return this._memberList?this._memberList:[]},set:function(t){this._memberList=t},enumerable:!0,configurable:!0}),f.prototype.isTongXianMeng=function(t){if(!t)return!1;for(var e=0;e<this.memberList.length;e++){var i=this.memberList[e];if(i&&i[1]==t)return!0}return!1},Object.defineProperty(f.prototype,"bossInfo",{get:function(){var t=this.getMemberByPost(1);return t?t[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"deputyInfo",{get:function(){return this.getMemberByPost(2)[0]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"manageInfos",{get:function(){return this.getMemberByPost(3)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"commonInfos",{get:function(){return this.getMemberByPost(0)},enumerable:!0,configurable:!0}),f.prototype.getMemberByPost=function(t){if(!this._memberList)return null;for(var e=[],i=0,n=this._memberList.length;i<n;i++)if(this._memberList[i][5]==t){if(0!=t&&3!=t)return[this._memberList[i]];e.push(this._memberList[i])}return e},f.prototype.getMemberById=function(t){if(!this._memberList)return null;for(var e=0,i=this._memberList.length;e<i;e++)if(t==this._memberList[e][1])return this._memberList[e]},f.prototype.factionOperate=function(){if(this.hasFaction){if(p.instance.setActionOpen(160,1),p.instance.setActionOpen(159,2),!f.instance.hasFaction)return;var t=f.instance.post,e=d.instance.getCfgById(36003)[1];e[t]>>1&1?l.FactionCtrl.instance.getFactionJoinList():(f.instance.requestJoinList=[],console.log("不符合职位 清除入盟申请数据 ",f.instance.requestJoinList)),e[t]>>8&1||e[t]>>7&1?l.FactionCtrl.instance.getApplyForPosList():(f.instance.applyForPosList=[],console.log("不符合职位 清除职位申请数据 ",f.instance.applyForPosList))}else{this.initRP();for(var i=0,n=this.tabs;i<n.length;i++){var s=n[i];p.instance.setActionOpen(s,2)}p.instance.setActionOpen(159,1);for(var o=0,a=this._shieldPanels;o<a.length;o++)if(s=a[o],WindowManager.instance.getPanelById(s)&&WindowManager.instance.isOpened(s)){WindowManager.instance.close(s),WindowManager.instance.open(262);break}l.FactionCtrl.instance.getFactionApplyList(),r.chat.ChatModel.instance.factionChatRecord.length=0,p.instance.flag=!1,r.chat.ChatModel.instance.setNoseeMessage(4,!1),c.dispatcher.event("FACTION_MESSAGE_UPDATE")}},f.prototype.initRP=function(){h.instance.setRPProperty("factionApplyJoinRP",!1),h.instance.setRPProperty("factionHurtAwardRP",!1),h.instance.setRPProperty("factionPostApplyRP",!1),h.instance.setRPProperty("factionSkillRP",!1),h.instance.setRPProperty("factionDialRP",!1),h.instance.setRPProperty("factionBaozangListRP",!1),h.instance.setRPProperty("helpBaozangListRP",!1),h.instance.setRPProperty("mineBaozangListRP",!1)},Object.defineProperty(f.prototype,"baseInfo",{get:function(){return this._baseInfo},set:function(t){this._baseInfo=t,this.checkSkillRP()},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"personalInfo",{get:function(){return this._personalInfo},set:function(t){this._personalInfo=t,this.factionOperate(),0==this.post&&WindowManager.instance.close(270),c.dispatcher.event("FACTION_INFO"),c.dispatcher.event("GET_FACTION_PERSONAL_INFO_REPLY")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hasFaction",{get:function(){return this._personalInfo?this._personalInfo[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"flagIndex",{get:function(){return this._baseInfo?this._baseInfo[1]:0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"changeNameCD",{get:function(){return this._baseInfo?this._baseInfo[12]:0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"post",{get:function(){return this._personalInfo?this._personalInfo[1]:0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fight",{get:function(){return this._baseInfo[3]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"lv",{get:function(){return this._baseInfo?this._baseInfo[7]:0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"exp",{get:function(){return this._baseInfo[8]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"rank",{get:function(){return this._baseInfo[5]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"notice",{get:function(){var t=this._baseInfo[4];return""==t&&(t=d.instance.getCfgById(36037)[2][0]),t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"title",{get:function(){var t=this._baseInfo[11];return""!=t&&t||(t=d.instance.getCfgById(36038)[2][0]),t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"name",{get:function(){var t=this._baseInfo[0];return r.chat.ChatModel.instance.wordReplace(t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"examine",{get:function(){return this._baseInfo[6]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"limit",{get:function(){return this._baseInfo[9]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"cd",{get:function(){return this._baseInfo[10]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"bossIndex",{get:function(){return this.copyPanelInfo[0]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"bossHp",{get:function(){return this.copyPanelInfo[1]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"copyManCount",{get:function(){return this.copyPanelInfo[2]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"maxBossCount",{get:function(){return this._personalInfo?this._personalInfo[3]:0},enumerable:!0,configurable:!0}),f.prototype.clearFactionList=function(){this._factionList=[],this._requestJoinStateTable={}},Object.defineProperty(f.prototype,"factionList",{get:function(){return this._factionList},set:function(t){this._factionList=t||[],this._requestJoinStateTable={};for(var e=0,i=t.length;e<i;e++){var n=t[e][0],s=PlayerModel.instance.fight,o=t[e][5];this._requestJoinStateTable[n]=s<o?0:this._yetRequestTable[n]?1:2}c.dispatcher.event("FACTION_LIST")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"rankList",{set:function(t){this._rank=t,c.dispatcher.event("FACTION_RANK_LIST")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"ranklist",{get:function(){var t;return this._rank&&(t=this._rank[1]),t||[]},enumerable:!0,configurable:!0}),f.prototype.getRanksByTypeAndMingCi=function(t){for(var e=this.ranklist,i=0;i<e.length;i++){var n=e[i];if(n&&i+1==t)return n}return null},Object.defineProperty(f.prototype,"rankFirst",{get:function(){return this._rank?this._rank[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"requestJoinList",{get:function(){return this._requestJoinList},set:function(t){this._requestJoinList=t,h.instance.setRPProperty("factionApplyJoinRP",0<t.length),c.dispatcher.event("FACTION_JOIN_LIST")},enumerable:!0,configurable:!0}),f.prototype.setYetRequestList=function(t){this.yetRequestList=t,l.FactionCtrl.instance.getFactionList()},f.prototype.updateYetRequestList=function(t){this.yetRequestList=t},Object.defineProperty(f.prototype,"yetRequestList",{set:function(t){this._yetRequestTable={};for(var e=0,i=t.length;e<i;e++)this._yetRequestTable[t[e]]=!0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"yetRequestTable",{get:function(){return this._yetRequestTable},enumerable:!0,configurable:!0}),f.prototype.getStateByUuid=function(t){return this._yetRequestTable[t]},f.prototype.getRequestJoinState=function(t){return this._requestJoinStateTable[t]},Object.defineProperty(f.prototype,"applyForPosList",{get:function(){return this._applyForPosList},set:function(t){this._applyForPosList=t,h.instance.setRPProperty("factionPostApplyRP",0<t.length),c.dispatcher.event("FACTION_APPLY_POST_LIST")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"boxList",{get:function(){return this._boxList},set:function(t){if(t){this.holpBoxes=[];for(var e=!(this._boxList=[]),i=0,n=t;i<n.length;i++){var s=n[i],o=s[5];0==o?this._boxList.push(s):s[8]==PlayerModel.instance.actorId&&(this.holpBoxes.push(s),e=e||4==o)}h.instance.setRPProperty("helpBaozangListRP",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"mineBoxList",{get:function(){return this._mineBoxList},set:function(t){var e=!1;this._mineBoxList=[];for(var i=PlayerModel.instance.actorId,n=0,s=t;n<s.length;n++){var o=s[n];if(o[1]==i){var a=o[5];0!=a&&(this._mineBoxList.push(o),4==a&&(e=e||!0))}}h.instance.setRPProperty("mineBaozangListRP",e)},enumerable:!0,configurable:!0}),f.prototype.sortByQuality=function(t,e){var i=t[2];return e[2]<i?-1:1},f.prototype.sortByState=function(t,e){var i=t[5],n=e[5];return n<i?-1:i<n?1:f.instance.sortByQuality(t,e)},f.prototype.sortByFightAndLv=function(t,e){var i=t[4],n=e[4];return i!==n?n-i:e[2]-t[2]},Object.defineProperty(f.prototype,"hurtInfo",{set:function(t){this._hurtInfo=t,c.dispatcher.event("FACTION_HURT_INFO");var e=t[1],i=t[0],n=u.instance.getCfgBylv(this.hurtLv);if(n){for(var s=n[1],o=s.length,a=0;a<o;a++)if(-1==e.indexOf(a)&&i>=s[a])return void h.instance.setRPProperty("factionHurtAwardRP",!0);h.instance.setRPProperty("factionHurtAwardRP",!1)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hurtAwardList",{get:function(){return this._hurtInfo[1]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hurt",{get:function(){return this._hurtInfo[0]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hurtLv",{get:function(){return this._hurtInfo[2]},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"skillList",{set:function(t){o.clear(this._skillList);for(var e=0,i=t;e<i.length;e++){var n=i[e],s=CommonUtil.getSkillPureIdById(n);this._skillList[s]=n}this.checkSkillRP(),c.dispatcher.event("FACTION_SKILL_LIST")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"getShowSkillIds",{get:function(){for(var t=[],e=0,i=m.instance.pureIds;e<i.length;e++){var n=i[e],s=f.instance.getSkill(n);s?t.push(s):t.push(CommonUtil.getSkillIdByPureIdAndLv(n))}return t},enumerable:!0,configurable:!0}),f.prototype.checkSkillRP=function(){for(var t=-1,e=0,i=this.getShowSkillIds;e<i.length;e++){var n=i[e],s=m.instance.getCfgById(n);if(m.instance.getCfgById(n+1)){var o=s[2],a=s[1][1];this.lv>=o&&t<a&&(t=a)}}var r=PlayerModel.instance.contribution;h.instance.setRPProperty("factionSkillRP",-1!=t&&t<=r)},f.prototype.getSkill=function(t){return this._skillList[t]},Object.defineProperty(f.prototype,"dialInfo",{get:function(){return this._dialInfo},set:function(t){this._dialInfo=t,this.checkDialRP()},enumerable:!0,configurable:!0}),f.prototype.checkDialRP=function(){if(this._dialInfo){var t=this._dialInfo[3],e=this._dialInfo[2],i=d.instance.getCfgById(36030)[1][0],n=d.instance.getCfgById(36030)[1][1]<=CommonUtil.getPropCountById(i)||0<t||0<e;h.instance.setRPProperty("factionDialRP",n)}},f.prototype.updateName=function(){if(this._memberList){var t=i.instance.updateNameReply;if(t){var e=this.getMemberById(t[0]);e&&(e[0]=t[1])}}},f.prototype.updateOcc=function(){if(this._memberList){var t=i.instance.updateOccReply;if(t){var e=this.getMemberById(t[0]);e&&(e[3]=t[1])}}},f.prototype.updateMember=function(t,e){if(this._memberList){var i=e[1];if(0===t){for(var n=0,s=this._memberList.length;n<s;n++)if(this._memberList[n][1]===i){this._memberList.splice(n,1);break}}else{if(this.getMemberById(i))return;this._memberList.push(e)}c.dispatcher.event("FACTION_INFO")}},f.prototype.updateFactionLevel=function(t){this._baseInfo&&(this._baseInfo[7]=t,c.dispatcher.event("FACTION_INFO"))},Object.defineProperty(f.prototype,"boxInfo",{get:function(){return this._boxInfo},set:function(t){this._boxInfo=t;var e=d.instance.getCfgById(36014)[1][0]-t[0];h.instance.setRPProperty("factionBaozangListRP",l.FactionModel.instance.hasFaction&&0<e&&0<t[1]),c.dispatcher.event("BAOZANG_INFO_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"copyInfo",{get:function(){return this._copyInfo},set:function(t){(this._copyInfo=t)&&this.hasFaction&&h.instance.setRPProperty("factionCopyRP",999<t[0]),c.dispatcher.event("FACTION_COPY_INFO")},enumerable:!0,configurable:!0}),f.prototype.updateImpeachInfo=function(t){var e=this.getMemberById(PlayerModel.instance.actorId);e&&(e[13]=t[0],e[14]=t[1],c.dispatcher.event("FACTION_UPDATE_IMPEACH"))},f.prototype.checkImpeachState=function(){for(var t,e=this.memberList,i=!1,n=0;n<e.length;++n)e[n][1]===PlayerModel.instance.actorId?t=e[n]:2===e[n][13]&&(i=!0);return t?i&&1===t[13]?3:t[13]:0},t=f,l.FactionModel=t}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h;function c(){var t=null!==i&&i.apply(this,arguments)||this;return t._requestFlag=!1,t}e=t.faction||(t.faction={}),n=t.faction.FactionModel,s=t.core.BaseCtrl,o=t.notice.SystemNoticeManager,a=t.config.BlendCfg,r=t.scene.SceneUtil,l=t.redPoint.RedPointCtrl,i=s,__extends(c,i),Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.setup=function(){this.subscribe(16782928,this.getFactionInfoReply),this.subscribe(16782927,this.createFactionReply),this.subscribe(16782926,this.getFactionListReply),this.subscribe(16782931,this.joinFactionReply),this.subscribe(16782932,this.getFactionJoinListReply),this.subscribe(16782934,this.examineReply),this.subscribe(16782935,this.dissolutionReply),this.subscribe(16782936,this.broadcastRecruitReply),this.subscribe(16782937,this.exitFactionReply),this.subscribe(16782938,this.kickReply),this.subscribe(16782939,this.setPositionReply),this.subscribe(16782940,this.getFactionApplyListReply),this.subscribe(16782973,this.updateFactionApplyList),this.subscribe(16782946,this.getApplyForPosListReply),this.subscribe(16782947,this.applyForPosResultReply),this.subscribe(16782941,this.setFightReply),this.subscribe(16782942,this.setTitleReply),this.subscribe(16782943,this.setNoticeReply),this.subscribe(16782950,this.kickNotify),this.subscribe(16782944,this.setExamineReply),this.subscribe(16782933,this.updateFactionJoinList),this.subscribe(16782948,this.autoInvitation),this.subscribe(16782949,this.getFactionRankListReply),this.subscribe(16782953,this.getAssistBoxListReply),this.subscribe(16782951,this.getBoxInfoReply),this.subscribe(16782965,this.getFactionCopyDataReply),this.subscribe(16782960,this.getFactionCopyInfoReply),this.subscribe(16782962,this.getHurtAwardReply),this.subscribe(16782966,this.getFactionSkillListReply),this.subscribe(16782945,this.applyForPosReply),this.subscribe(16782952,this.getBoxListReply),this.subscribe(16782968,this.promoteFactionSkillReply),this.subscribe(16782967,this.getFactionTurnReply),this.subscribe(16782970,this.getFactionTurnRecordReply),this.subscribe(16782955,this.openBoxReply),this.subscribe(16782956,this.askAssistReply),this.subscribe(16782969,this.factionTurnReply),this.subscribe(16782971,this.getBlessAwardReply),this.subscribe(16782961,this.getHurtAwardListReply),this.subscribe(16782959,this.assistOpenBoxReply),this.subscribe(16782963,this.factionReqInspireReply),this.subscribe(16782964,this.factionAllInspireReply),this.subscribe(16782972,this.addCopyTimeReply),this.subscribe(16782958,this.addSpeedBoxReply),this.subscribe(16782957,this.f5BoxReply),this.subscribe(16782954,this.getBoxAwardReply),this.subscribe(16782929,this.getFactionPersonalInfoReply),this.subscribe(16782930,this.getFactionCopyPanelInfoReply),this.subscribe(16782975,this.updateFactionMember),this.subscribe(16782976,this.updateFactionLevel),this.subscribe(16782977,this.changeFactionNameReply),this.subscribe(16782978,this.UpdateImpeachState),this.subscribe(16782979,this.ImpeachFactionLeaderReply),this.subscribe(16782980,this.SetImpeachWindowReply),this.subscribe(16782981,this.SyncCreateFactionCD),this.onGlobal("RENAME_NAME_UPDATE",this.updateName),this.onGlobal("RENAME_OCC_UPDATE",this.updateOcc),this.onGlobal("BAG_UPDATE",n.instance.checkDialRP,n.instance),this.onGlobal("PLAYER_CONTRIBUTION",n.instance.checkSkillRP,n.instance),this.request()},c.prototype.request=function(){this.getFactionPersonalInfo()},c.prototype.delayRequest=function(){if(n.instance.hasFaction){var t=n.instance.post,e=a.instance.getCfgById(36003)[1];e[t]>>1&1&&this.getFactionJoinList(),(e[t]>>8&1||e[t]>>7&1)&&this.getApplyForPosList(),this.getFactionInfo(),this.getBoxInfo(),this.getBoxList(),this.getFactionCopyInfo(),this.getAssistBoxList(),this.getHurtAwardList(),this.getFactionTurn(),this.getFactionSkillList()}},c.prototype.getFactionInfo=function(){this.publish(7340833,null)},c.prototype.getFactionInfoReply=function(t){n.instance.getFactionInfoReply(t),this._requestFlag||(this._requestFlag=!0,this.delayRequest())},c.prototype.getFactionApplyList=function(){this.publish(2102462,null)},c.prototype.getFactionApplyListReply=function(t){var e=t[0];n.instance.setYetRequestList(e)},c.prototype.updateFactionApplyList=function(t){var e=t[0];n.instance.updateYetRequestList(e),GlobalData.dispatcher.event("FACTION_REQUEST_LIST_UPDATE")},c.prototype.getFactionList=function(t){void 0===t&&(t=0),this.publish(7340832,[t,+n.instance.showValid])},c.prototype.getFactionListReply=function(t){var e=t[2];n.instance.factionList=e},c.prototype.createFaction=function(t){this.publish(7340834,t)},c.prototype.createFactionReply=function(t){var e=t[0];e||WindowManager.instance.open(263),CommonUtil.noticeError(e,"创建成功")},c.prototype.joinFaction=function(t){this.publish(7340835,t)},c.prototype.joinFactionReply=function(t){var e,i=t[0];0==i?o.instance.addNotice("申请成功"):36054==i?(o.instance.addNotice("恭喜您加入仙盟"),WindowManager.instance.open(263),this.delayRequest(),(e=FuncOpenCtrl.instance).getActionState.apply(e,n.instance.tabs)):(CommonUtil.noticeError(i),36005!=i&&36025!=i||n.instance.yetRequestTable&&this.getFactionList())},c.prototype.getFactionJoinList=function(){this.publish(7340836,null)},c.prototype.getFactionJoinListReply=function(t){var e=t[0];if(e)CommonUtil.noticeError(e);else{var i=t[1];n.instance.requestJoinList=i}},c.prototype.updateFactionJoinList=function(t){n.instance.requestJoinList=t[0]},c.prototype.examine=function(t){this.publish(7340837,t)},c.prototype.examineReply=function(t){var e=t[0];CommonUtil.noticeError(e,"操作成功")},c.prototype.setExamine=function(t){this.publish(7340846,t)},c.prototype.setExamineReply=function(t){var e=t[0];CommonUtil.noticeError(e,"设置成功")},c.prototype.dissolution=function(){this.publish(7340838,null)},c.prototype.dissolutionReply=function(t){var e=t[0];CommonUtil.noticeError(e,"解散成功")},c.prototype.broadcastRecruit=function(){this.publish(7340839,null)},c.prototype.broadcastRecruitReply=function(t){var e=t[0];CommonUtil.noticeError(e,"操作成功")},c.prototype.exitFaction=function(){this.publish(7340840,null)},c.prototype.exitFactionReply=function(t){var e=t[0];CommonUtil.noticeError(e,"退出成功")},c.prototype.kick=function(t){this.publish(7340841,t)},c.prototype.kickReply=function(t){var e=t[0];0===e&&GlobalData.dispatcher.event("FACTION_UPDATE_MEMBER_OPERAT_LIST"),CommonUtil.noticeError(e,"踢出成功")},c.prototype.SetPosition=function(t){this.publish(7340842,t)},c.prototype.setPositionReply=function(t){var e=t[0];0===e&&GlobalData.dispatcher.event("FACTION_UPDATE_MEMBER_OPERAT_LIST"),CommonUtil.noticeError(e,"操作成功")},c.prototype.applyForPos=function(t){this.publish(7340847,[t])},c.prototype.applyForPosReply=function(t){var e=t[0];CommonUtil.noticeError(e,"申请成功")},c.prototype.getApplyForPosList=function(){this.publish(7340848,null)},c.prototype.getApplyForPosListReply=function(t){var e=t[0];n.instance.applyForPosList=e||[]},c.prototype.applyForPosResult=function(t){this.publish(7340849,t)},c.prototype.applyForPosResultReply=function(t){var e=t[0];CommonUtil.noticeError(e,"审批成功")},c.prototype.setFight=function(t){t=[1e4*t[0]],this.publish(7340843,t)},c.prototype.setFightReply=function(t){var e=t[0];CommonUtil.noticeError(e,"设置成功")},c.prototype.setTitle=function(t){this.publish(7340844,[t])},c.prototype.setTitleReply=function(t){var e=t[0];CommonUtil.noticeError(e,"设置成功")},c.prototype.setNotice=function(t){this.publish(7340845,[t])},c.prototype.setNoticeReply=function(t){var e=t[0];CommonUtil.noticeError(e,"设置成功")},c.prototype.getFactionRankList=function(){this.publish(7340850,null)},c.prototype.getFactionRankListReply=function(t){n.instance.rankList=t},c.prototype.kickNotify=function(){WindowManager.instance.close(1043),WindowManager.instance.close(1044),WindowManager.instance.close(1045);var t=Handler.create(WindowManager.instance,WindowManager.instance.open,[262]);CommonUtil.alert("温馨提示","你已被移出仙盟,请另选其他仙盟加入~",[t])},c.prototype.autoInvitation=function(t){r.isCommonScene&&!WindowManager.instance.isOpened(275)&&WindowManager.instance.open(275,t)},c.prototype.selectPush=function(t){this.publish(2102463,t)},c.prototype.getBoxInfo=function(){this.publish(2102464,null)},c.prototype.getBoxInfoReply=function(t){n.instance.boxInfo=t},c.prototype.getBoxList=function(){this.publish(2102465,null)},c.prototype.getBoxListReply=function(t){var e=t[0];n.instance.boxList=e,n.instance.mineBoxList=e,GlobalData.dispatcher.event("BAOZANG_LIST_UPDATE")},c.prototype.getBoxAward=function(t){this.publish(2102466,t)},c.prototype.getBoxAwardReply=function(t){var e=t[0];CommonUtil.noticeError(e,"领取成功")},c.prototype.openBox=function(t){this.publish(2102467,t)},c.prototype.openBoxReply=function(t){var e=t[0];CommonUtil.noticeError(e,"挖宝箱成功")},c.prototype.askAssist=function(t){this.publish(2102468,t)},c.prototype.askAssistReply=function(t){var e=t[0];CommonUtil.noticeError(e,"求助成功")},c.prototype.f5Box=function(){this.publish(2102469,null)},c.prototype.f5BoxReply=function(t){var e=t[0];12012==e?CommonUtil.goldNotEnoughAlert():CommonUtil.noticeError(e,"刷新成功")},c.prototype.addSpeedBox=function(t,e){this.publish(2102470,[t,e])},c.prototype.addSpeedBoxReply=function(t){var e=t[0];CommonUtil.noticeError(e,"加速成功")},c.prototype.getAssistBoxList=function(){this.publish(7340851,null)},c.prototype.getAssistBoxListReply=function(t){t&&(n.instance.boxHelpList=t[0],n.instance.boxListF5Time=t[1],GlobalData.dispatcher.event("BAOZANG_HELP_LIST_UPDATE"))},c.prototype.assistOpenBox=function(t){this.publish(2102471,t)},c.prototype.assistOpenBoxReply=function(t){var e=t[0];CommonUtil.noticeError(e,"协助成功")},c.prototype.getFactionCopyInfo=function(){this.publish(2102472,null)},c.prototype.getFactionCopyInfoReply=function(t){n.instance.copyInfo=t},c.prototype.getHurtAwardList=function(){this.publish(2102473,null)},c.prototype.getHurtAwardListReply=function(t){n.instance.hurtInfo=t},c.prototype.getFactionCopyData=function(){this.publish(5242892,null)},c.prototype.getFactionCopyDataReply=function(t){n.instance.copyData=t,GlobalData.dispatcher.event("FACTION_COPY_DATA")},c.prototype.getHurtAward=function(t){this.publish(2102474,[t])},c.prototype.getHurtAwardReply=function(t){var e=t[0];CommonUtil.noticeError(e,"领取成功")},c.prototype.getFactionSkillList=function(){this.publish(2102476,null)},c.prototype.getFactionSkillListReply=function(t){n.instance.skillList=t[0]},c.prototype.promoteFactionSkill=function(t){this.publish(2102477,[t])},c.prototype.promoteFactionSkillReply=function(t){var e=t[0];CommonUtil.noticeError(e,"升级成功")},c.prototype.getFactionTurn=function(){this.publish(2102478,null)},c.prototype.getFactionTurnReply=function(t){t&&n.instance.hasFaction&&(n.instance.dialInfo=t,GlobalData.dispatcher.event("FACTION_WEAL_UPDATE"))},c.prototype.getFactionTurnRecord=function(){this.publish(7340852,null)},c.prototype.getFactionTurnRecordReply=function(t){n.instance.turnList=t[0],GlobalData.dispatcher.event("FACTION_TURN_LIST")},c.prototype.factionTurn=function(t){this.publish(2102479,[t])},c.prototype.factionTurnReply=function(t){var e=t[0];e?CommonUtil.noticeError(e):(n.instance.turnResult=t[1],GlobalData.dispatcher.event("FACTION_TURN_RESULT"))},c.prototype.getBlessAward=function(){this.publish(2102480,null)},c.prototype.getBlessAwardReply=function(t){var e=t[0];CommonUtil.noticeError(e,"领取成功")},c.prototype.factionReqInspire=function(t){this.publish(2102475,t)},c.prototype.factionReqInspireReply=function(t){var e=t[0];CommonUtil.noticeError(e,"操作成功")},c.prototype.factionAllInspire=function(){this.publish(5242891,null)},c.prototype.factionAllInspireReply=function(t){var e=t[0];CommonUtil.noticeError(e,"操作成功")},c.prototype.addCopyTime=function(t){this.publish(2102481,t)},c.prototype.addCopyTimeReply=function(t){var e=t[0];CommonUtil.noticeError(e,"增加诛仙时长成功")},c.prototype.updateName=function(){n.instance.updateName()},c.prototype.updateOcc=function(){n.instance.updateOcc()},c.prototype.checkIsHaveFaction=function(){return!!n.instance.hasFaction||(o.instance.addNotice("请先加入仙盟",!0),!1)},c.prototype.makeFactionPanel=function(t){this.publish(7340853,[t?0:1])},c.prototype.getFactionCopyPanelInfo=function(){this.publish(7340854,null)},c.prototype.getFactionCopyPanelInfoReply=function(t){n.instance.copyPanelInfo=t,GlobalData.dispatcher.event("FACTION_INFO")},c.prototype.getFactionPersonalInfo=function(){this.publish(7340855,null)},c.prototype.getFactionPersonalInfoReply=function(t){(n.instance.personalInfo=t)[0]||l.instance.setRPProperty("factionCopyRP",!1)},c.prototype.updateFactionMember=function(t){n.instance.updateMember(t[0],t[1])},c.prototype.updateFactionLevel=function(t){n.instance.updateFactionLevel(t[0])},c.prototype.changeFactionName=function(t,e){this.publish(7340856,[t,e])},c.prototype.changeFactionNameReply=function(t){var e=t[0];CommonUtil.noticeError(e,"仙盟改名成功")},c.prototype.UpdateImpeachState=function(t){n.instance.updateImpeachInfo(t)},c.prototype.ImpeachFactionLeaderReply=function(t){var e=t[0];0===e?o.instance.addNotice("弹劾成功"):CommonUtil.noticeError(e)},c.prototype.SetImpeachWindowReply=function(t){var e=t[0];0===e||CommonUtil.noticeError(e)},c.prototype.SyncCreateFactionCD=function(t){console.log("同步创建仙盟CD",t),t&&(n.instance.updateTime=t[0],GlobalData.dispatcher.event("SYNC_CREATE_FACTION_CD"))},c.prototype.ImpeachFactionLeader=function(){this.publish(7340857,null)},c.prototype.SetImpeachWindow=function(t){this.publish(7340858,[t])},h=c,e.FactionCtrl=h}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.dailyDungeon||(t.dailyDungeon={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16777478,this.updateCopyWeekCardIncomes,this)},o.prototype.updateCopyWeekCardIncomes=function(t){e.DailyDungeonModel.instance.addExtraAwards(451,t[0]),GlobalData.dispatcher.event("UPDATE_WIN_EXTRA_AWARDS")},s=o,e.DailyDungeonCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.config||(t.config={}),n=t.core.BaseCtrl,s=t.common.GlobalData,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16777386,this.getPackageItemReply)},a.prototype.getPackageItem=function(t){this.publish(2097195,[t])},a.prototype.getPackageItemReply=function(t){s.dispatcher.event("GET_PACKAGE_ITEM_REPLY",[t])},o=a,e.CfgCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c,p,u,d,m,f,g,y,_,v,I,b,C,T,w,x,B,P,S,A,M,E,R,D,L,k,U,H,O,F,G,V,N,W,z,q,j,X;function Y(){}e=t.common||(t.common={}),i=t.quickUse.QuickUseCtrl,n=t.dungeon.DungeonCtrl,s=t.ride.RideCtrl,o=t.talisman.TalismanCtrl,a=t.intensive.IntensiveCtrl,r=t.compose.ComposeCtrl,l=t.immortals.ImmortalsCtrl,h=t.threeWorlds.ThreeWorldsCtrl,c=t.multiBoss.MultiBossCtrl,p=t.wing.WingCtrl,u=t.recharge.RechargeCtrl,d=t.buff.BuffCtrl,m=t.activityPreview.ActivityPreviewCtrl,f=t.nine.NineCtrl,g=t.npc.NpcCtrl,y=t.kunlun.KunLunCtrl,_=t.action_preview.ActionPreviewCtrl,v=t.player_title.PlayerTitleCtrl,I=t.single_boss.SingleBossCtrl,b=t.day_drop_treasure.DayDropTreasureCtrl,C=t.adventure.AdventureCtrl,T=t.arena.ArenaCtrl,w=t.fashion.FashionCtrl,x=t.tianZhu.TianZhuCtrl,B=t.xiLian.XiLianCtrl,P=t.sweeping_income.SweepingIncomeCtrl,S=t.vip_new.VipNewCtrl,A=t.rename.RenameCtrl,M=t.store.AuctionStoreCtrl,E=t.zxian_yu.ZXianYuCtrl,R=t.rehead.ReheadCtrl,D=t.fashion_suits.FashionSuitsCtrl,L=t.super_vip.SuperVipCtrl,k=t.other_player_online.OtherPlayerOnlineCtrl,U=t.showMaster.ShowMasterCtrl,H=t.windCloud.WindCloudCtrl,O=t.beast_equipment.BeastEquipmentCtrl,F=t.beast_boss.BeastBossCtrl,G=t.faerie_demon.FaerieDemonCtrl,V=t.xianfu.XianfuCtrl,N=t.faction.FactionCtrl,W=t.da_zhao.DaZhaoCtrl,z=t.bossDungeon.BossDungeonCtrl,q=t.dailyDungeon.DailyDungeonCtrl,j=t.config.CfgCtrl,Y.init=function(){FuncOpenCtrl.instance.setup(),TaskCtrl.instance.setup(),ChatCtrl.instance.setup(),PetCtrl.instance.setup(),IllusionCtrl.instance.setup(),MagicArtCtrl.instance.setup(),EmailCtrl.instance.setup(),BornCtrl.instance.setup(),ExerciseCrtl.instance.setup(),MagicPositionCtrl.Instance.setup(),WarDisplayCtrl.instance.setup(),BossHomeCtrl.instance.setup(),StoreCtrl.instance.setup(),M.instance.setup(),VipCtrl.instance.setup(),DailyDemonCtrl.instance.setup(),q.instance.setup(),FairyCtrl.instance.setup(),ShenqiCtrl.instance.setup(),i.instance.setup(),n.instance.setup(),s.instance.setup(),I.instance.setup(),o.instance.setup(),a.instance.setup(),c.instance.setup(),r.instance.setup(),h.instance.setup(),l.instance.setup(),p.instance.setup(),u.instance.setup(),d.instance.setup(),m.instance.setup(),f.instance.setup(),g.instance.setup(),b.instance.setup(),y.instance.setup(),_.instance.setup(),v.instance.setup(),C.instance.setup(),T.instance.setup(),w.instance.setup(),x.instance.setup(),B.instance.setup(),P.instance.setup(),S.instance.setup(),R.instance.setup(),A.instance.setup(),E.instance.setup(),D.instance.setup(),L.instance.setup(),k.instance.setup(),U.instance.setup(),H.instance.setup(),N.instance.setup(),V.instance.setup(),O.instance.setup(),F.instance.setup(),G.instance.setup(),W.instance.setup(),z.instance.setup(),j.instance.setup(),t.subpack1.Sub1ModulesUtil.init(),t.subpack.SubModulesUtil.init()},X=Y,e.ModulesUtil=X}(modules=modules||{}),function(w){var x,e,r,B,P,d,S,A,t,o,i,a,n,M,s,l,h,c,p,m,u,f,g,E,y,_,v,I;function b(){var t=e.call(this)||this;return t._far=0,t._first=!0,t._isFirstLoginComplete=!0,t._isEnterScene=!1,t}x=w.scene||(w.scene={}),r=base.materials.MaterialInitializer,B=game.GameCenter,P=Laya.Point,d=w.bossHome.BossHomeModel,S=w.config.MonsterResCfg,A=w.config.MonsterResEffCfg,t=w.core.BaseCtrl,o=w.dungeon.DungeonCtrl,i=w.dungeon.DungeonModel,a=w.main.MainCtrl,n=w.notice.BossReviveManager,M=w.player.PlayerModel,s=game.misc.LogUtils,l=w.config.SceneCfg,h=w.nine.NineModel,c=w.adventure.AdventureModel,p=w.sound.SoundCtrl,m=w.notice.SystemNoticeManager,u=base.assets.RecoverQueue,f=w.bottomTab.BottomTabCtrl,g=w.common.ModulesUtil,E=w.bossDungeon.BossDungeonModel,y=w.bossDungeon.BossDungeonCtrl,_=w.config.SkillEffectCfg,v=game.role.component.LocomotorComponent,e=t,__extends(b,e),Object.defineProperty(b,"instance",{get:function(){return this._instance=this._instance||new b},enumerable:!0,configurable:!0}),b.prototype.setup=function(){this.subscribe(16777417,this.enterScene).subscribe(16777416,this.leaveScene).subscribe(16777418,this.broadcastEnterScreen).subscribe(16777419,this.broadcastLeaveScreen).subscribe(16777420,this.broadcastMove).subscribe(16777421,this.broadcastHp).subscribe(16777317,this.updateHp).subscribe(16777422,this.reqReviveReply).subscribe(16777423,this.broadcastRevive).subscribe(16777424,this.broadcastDead).subscribe(16777426,this.broadcastPlaySkill).subscribe(16777437,this.transmitPos).subscribe(16777438,this.playSkillReply).subscribe(16777427,this.broadcastActorShow).subscribe(16777448,this.updateChangeMap).subscribe(16777449,this.updateBossBirthPos).subscribe(16777441,this.updatePKMode).subscribe(16777349,this.updateActorState).subscribe(16777450,this.updateDropItem).subscribe(16777461,this.updateNpc).subscribe(16777471,this.BroadcastSkillSpecialEff).subscribe(16777472,this.BroadcastBuffSpecialEff).subscribe(16777475,this.updatePos),this.onGlobal("PLAYER_TOTAL_ATTR_UPDATE",this.playerTotalAttrUpdate),this._first=!0},b.prototype.updateHp=function(t){var e=B.instance.getRole(t[2]);null!=e&&e.property.set("hp",[t[0],t[1]]),t[2]===M.instance.actorId&&(M.instance.hp=t[0],M.instance.maxHp=t[1])},b.prototype.enterScene=function(t){var e=this;if(this._isEnterScene=!1,showProgressInterface(2,4,0,"正在进入场景......"),TraceUtils.trace("enterScene"),this._tuple=t,x.SceneModel.instance.enterScene=t,this._first){if(Main.instance.assets)for(var i=0,n=Main.instance.assets;i<n.length;i++){var s=n[i];base.assets.HandlePool.instance.free(s)}LayerManager.instance.lockAllLayer(!0),this._first=!1,PlatParams.recordStep(12);var o=3,a=function(){--o<=0&&e.onReadyComplete()};ResourcePool.instance.load(PlatParams.configs?"assets/configs_"+PlatParams.configs+".obj":"assets/configs.obj",function(t,e,i){GlobalData.loadConfiguration(i),a()},0,!1,!1,1),r.setup(a),Laya.loader.load(["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/bottom_tab.atlas"],Laya.Handler.create(this,a),null,null,null,!0)}else this.enterGame()},b.prototype.playSkillReply=function(t){if(0==t[0]&&(this._far=0),11038==t[0]&&(this._far++,5==this._far)){var e=B.instance.getRole(M.instance.actorId);if(e){var i=e.getComponent(v);i&&i.farSync()}this._far=0}},b.prototype.onReadyComplete=function(){TraceUtils.trace("onReadyComplete"),PlatParams.recordStep(13),showProgressInterface(3,4,0,"正在加载通用图集......"),base.particle.snowflake.SnowflakeParticleUtils.init(),base.particle.snowflake.SnowflakeParticleUtils.precompileShaderWithGame(),this.onPreloadComplete()},b.prototype.onPreloadComplete=function(){var t=this;TraceUtils.trace("onPreloadComplete"),PlatParams.recordStep(14),i.instance,n.instance,this._world=B.instance.world,this.onGlobal("RESIZE_UI",function(){t._world.publish("stageResize",Laya.stage.width,Laya.stage.height)}),this._world.publish("stageResize",Laya.stage.width,Laya.stage.height),this.enterGame()},b.prototype.enterGame=function(){B.instance.enterScene(),TraceUtils.trace("enterGame");var t=this._tuple[0],e=l.instance.getCfgById(t);this._sceneType=e[7],showProgressInterface(3,4,0,"正在进入场景......"),this._world.once("loadMapComplete",this,this.onLoadComplete),this._world.publish("enterScene",t),WindowManager.instance.close(12)},b.prototype.transmitPos=function(t){var e=B.instance.getRole(M.instance.actorId);null!=e&&e.publish.apply(e,["transmit"].concat(t[0]))},b.prototype.updatePos=function(t){console.log("updatePos~~~~~~~~~~~~~~~~~~~~~~~",t);var e=B.instance.getRole(M.instance.actorId);null!=e&&e.publish.apply(e,["transmit"].concat(t[0]))},b.prototype.onLoadComplete=function(){TraceUtils.trace("onLoadComplete"),this.publish(1048578,null),x.SceneModel.instance.enteringScene=!1,this._isFirstLoginComplete?(firstEnterGameScene(),PlatParams.recordStep(15),this._isFirstLoginComplete=!1,BagCtrl.instance.setup(),this.publish(1048579,null),GlobalData.dispatcher.event("PLAYER_CLIENT_READY"),g.init()):(w.common.MiniGameUtil.isMiniGame()&&!window.enterFlag&&(firstEnterGameScene(),PlatParams.recordStep(15),this.publish(1048579,null)),x.SwitchSceneCtrl.instance.tweenCloudLeave());var t=this._tuple[0];f.instance.enterScene(),a.instance.enterScene(t),o.instance.enterScene(t),12==this._sceneType?d.instance.setSelectTarget(E.instance.selectLastBoss,!0):31==this._sceneType&&w.sheng_yu.ShengYuBossModel.instance.setSelectTarget(E.instance.selectLastBoss,!0),p.instance.playSceneBg(this._tuple[0]),w.common.MiniGameUtil.onOppoMiniGame()||w.common.MiniGameUtil.onVivoMiniGame()||document.getElementById("BgImage")&&document.getElementById("BgImage").remove()},b.prototype.leaveScene=function(t){p.instance.stopAll(),this._first||(null!=this._world&&this._world.publish("leaveScene"),B.instance.leaveScene(),TraceUtils.trace("leaveScene"),t&&(o.instance.leaveScene(t[0]),M.instance.selectTarget(1,-1),x.SwitchSceneCtrl.instance.tweenCloudEnter()),this._isEnterScene=!1,WindowManager.instance.gc(),AssetPoolBase.gc(!0),u.default.gc(!0),ResourcePool.instance.recoverQueue.gc(!0))},b.prototype.broadcastEnterScreen=function(t){this._isEnterScene||(this._isEnterScene=!0,Browser.container.setAttribute("style","visibility: visible;"));var e=B.instance,i=t[1];if(null!=i&&0<i.length)for(var n=0,s=i;n<s.length;n++){var o=s[n],a=o[1];if(null==S.instance.getCfgById(a))throw new Error("怪物类型"+a+"不存在！");var r=o[0];if(e.getRole(r)){var l="重复进入"+r+", "+a+", "+o[5];GlobalData.recordError(l,new Error(l))}else(C=e.createRole(r,1).property).set("occ",a),C.set("name",S.instance.getMonsterName(a)),C.set("hp",[o[3],o[4]]),C.set("speed",o[2]),C.set("exterior",[S.instance.getMonsterRes(a),0,0,0,0,0]),C.set("pos",new(P.bind.apply(P,[void 0].concat(o[5])))),C.set("desPos",new(P.bind.apply(P,[void 0].concat(o[6])))),C.set("direction",o[7]||360*Math.random()),C.set("status",0),C.set("level",o[8]),e.enterRole(r),A.instance.getCfgById(a)?(C.set("showType",1),C.set("status",4096)):C.set("status",1)}var h=0,c=t[2];if(null!=c&&0<c.length){for(var p=!1,u=0,d=c;u<d.length;u++){var m=d[u],f=m[5];if(r=f[0],e.getRole(r))l="重复进入"+r+", "+f[1]+", "+m[3],GlobalData.recordError(l,new Error(l));else{(C=e.createRole(r,r==M.instance.actorId?4:3).property).set("occ",f[1]),C.set("name",f[5]);var g=f[31],y=0!=g&&g>GlobalData.serverTime;C.set("isUnseen",y),r==M.instance.actorId&&(M.instance.isUnseen=y,M.instance.unseenTimeNum=g),y&&C.set("name",m[5][5]+"【幽灵】"),C.set("hp",[m[1],m[2]]),C.set("speed",m[0]),C.set("exterior",[f[7],f[6],f[10],f[9],f[15],f[18]]),C.set("pet",[f[8],f[14]]),C.set("pos",new(P.bind.apply(P,[void 0].concat(m[3])))),C.set("desPos",new(P.bind.apply(P,[void 0].concat(m[4])))),C.set("direction",m[6]),C.set("moveType",f[16]?2:0),C.set("desgnation",f[17]),C.set("factionName",f[19]),C.set("factionId",f[11]),C.set("rise",f[20]),C.set("headIcon",f[21]),C.set("headPhotoframe",f[22]),C.set("seg",f[23]),C.set("marrierName",f[24]),C.set("warbandName",f[27]);var _=!1;r!=M.instance.actorId&&(h+=1,w.scene.SceneModel.instance.curShowEffPlayers+h>GlobalData.syncMaxPlayer-1&&(_=!0)),C.set("syncNoEffect",_),m[7]?(C.set("status",1024),E.instance._bossHomeShow[r]=[r,C.get("name"),!0]):(3!=C.get("type")||m[3][0]==m[4][0]&&m[3][1]==m[4][1]?C.set("status",1):C.set("status",64),E.instance._bossHomeShow[r]=[r,C.get("name"),!1],p=!0),r===M.instance.actorId&&(M.instance.teamId=f[25]),C.set("teamId",f[25]),C.set("isOB",m[8]),C.set("warbandId",f[26]),C.set("blueVip",f[28]),r===M.instance.actorId&&w.qq.QQModel.instance.setBlueVip(f[28]),C.set("baby",f[29]),C.set("sour0bjId",m[10]),56===w.scene.SceneUtil.currScene?w.fire_contention.FireContentionModel.instance.updateWarFire(r,m[9]):0<m[9]&&w.fire_contention.FireContentionModel.instance.updateWarFire(r,m[9]),e.enterRole(r),r==M.instance.actorId&&GlobalData.dispatcher.event("UPDATE_UNSEEN_TIME_NUM")}}p&&GlobalData.dispatcher.event("BOSS_SHOW_PLAYER_INFO")}var v=t[3];if(null!=v&&0<v.length)for(var I=0,b=v;I<b.length;I++){var C,T=b[I];if(r=T[0],e.getRole(r))l="重复进入"+r+", "+T[1]+", "+T[4],GlobalData.recordError(l,new Error(l));else(C=e.createRole(r,6).property).set("occ",T[1]),C.set("pos",new(P.bind.apply(P,[void 0].concat(T[4])))),C.set("liveTime",T[3]),C.set("own",T[5]),C.set("ownerName",T[6]),e.enterRole(r)}x.SceneModel.instance.enterSceneHandler(t)},b.prototype.broadcastLeaveScreen=function(t){if(!this._first){var e=M.instance.actorId,i=0,n=B.instance.getRole(e);null!=n&&(i=n.property.get("lastEnemy"));for(var s=!1,o=0,a=t[0];o<a.length;o++){var r=a[o];r==i&&null!=n&&n.property.set("lastEnemy",0);var l=void 0;if(1==M.instance.selectTargetType){var h=B.instance.getRole(r);h&&h.property&&(l=h.property.get("occ"))}if(B.instance.leaveRole(r),E.instance._bossHomeShow[r])if(delete E.instance._bossHomeShow[r],s=!0,12==this._sceneType){var c=d.instance;2==M.instance.selectTargetType&&M.instance.selectTargetId==r&&c.setSelectTarget(E.instance.selectLastBoss,!0)}else 31==this._sceneType&&2==M.instance.selectTargetType&&M.instance.selectTargetId==r&&w.sheng_yu.ShengYuBossModel.instance.setSelectTarget(E.instance.selectLastBoss,!0);36!=this._sceneType&&37!=this._sceneType||w.halo.HaloModel.instance.haloOpen&&w.halo.HaloModel.instance.isForceEnter&&(1==M.instance.selectTargetType&&M.instance.selectTargetId==l?GlobalData.dispatcher.event("HALO_AUTO_BEAST_SELECT_TARGET",!1):3==M.instance.selectTargetType&&w.npc.NpcModel.instance.triggeredNpcId==r&&GlobalData.dispatcher.event("HALO_AUTO_BEAST_SELECT_TARGET",!1))}s&&GlobalData.dispatcher.event("BOSS_SHOW_PLAYER_INFO"),x.SceneModel.instance.leaveSceneHandler(t)}},b.prototype.broadcastMove=function(t){var e=t[0];if(e!=M.instance.actorId){var i=B.instance.getRole(e);if(null!=i){var n=i.property;n.set("speed",t[1]),n.set("pos",new(P.bind.apply(P,[void 0].concat(t[2])))),n.set("desPos",new(P.bind.apply(P,[void 0].concat(t[3])))),n.set("moveType",t[4]?2:0),n.set("status",64),n.event("status",64)}}},b.prototype.broadcastHp=function(t){for(var e=M.instance.actorId,i=0,n=t[0];i<n.length;i++){var s=n[i],o=s[0],a=s[6],r=38===this._sceneType||42===this._sceneType||43===this._sceneType;if(o==e||a==e||r){o==e&&(M.instance.hp=s[2],M.instance.maxHp=s[1]);var l=B.instance.getRole(o),h=!0;if(null!=l){l.property.set("hp",[s[2],s[1]]);var c=s[4],p=0;1==c?p|=2:2==c?p|=8:7==c||8==c||9==c?(p|=16,h=!1):10==c&&o!=e?p|=32:11==c&&o!=e&&(p|=64),s[7]&&(p|=4),a==e?p|=1:(u=B.instance.getRole(a))&&0!==u.property.get("teamId")&&0!==M.instance.teamId&&u.property.get("teamId")===M.instance.teamId&&(p|=1),o==e&&a!=e&&l.property.set("lastEnemy",a),l.publish("hurt",a,1e4*s[5],s[3],p)}if(h)if(o==e)(u=B.instance.getRole(a))&&(w.config.MonsterCfg.instance.getMonsterById(u.property.get("occ"))||E.instance.setBeAttackId(a));else if(a==e){var u;(u=B.instance.getRole(a))&&(w.config.MonsterCfg.instance.getMonsterById(u.property.get("occ"))||E.instance.setPlayAttackId(o)),12==this._sceneType&&l&&1===l.property.get("type")&&d.instance.checkPlayerLevelHeigh(l.property.get("occ"))&&m.instance.addNotice("您的等级过高，击败BOSS没有掉落",!0)}}}},b.prototype.reqRevive=function(){this.publish(5242881,null)},b.prototype.reqReviveReply=function(t){var e=B.instance.getRole(M.instance.actorId);if(null!=e){e.publish("reviveReply",t[0]),e.property.set("status",1),10===l.instance.getCfgById(x.SceneModel.instance.enterScene[0])[7]&&w.threeWorlds.ThreeWorldsModel.instance.specialRevive&&(w.notice.SystemNoticeManager.instance.addNotice("您已涅槃重生，攻击+100%，持续12秒"),w.threeWorlds.ThreeWorldsModel.instance.specialRevive=!1);var i=x.SceneModel.instance.enterScene[0];2161===i?w.nine.NineModel.instance.autoCtrl():2351===i||2121===i?y.instance.setAutoFindWayFuHuo(i):2801===i?GlobalData.dispatcher.event("FUHUO_UNIONWAR"):2901===i?M.instance.selectTarget(0,-1):4401===i?M.instance.selectTarget(0,-1):4201===i?M.instance.selectTarget(4,w.welfare_place.WelfarePlaceModel.instance.searchId):4501!==i&&4502!==i&&4503!==i||(console.log("梵天boss复活之后 打boss"),w.trahman_boss.TrahmanBossModel.instance.selectTarget())}},b.prototype.broadcastRevive=function(t){var e=t[0],i=B.instance.getRole(e);if(null!=i){var n=i.property;n.set("status",2048),n.event("status",2048),56===this._sceneType&&w.team_warfare.TeamWarfareCtrl.instance.GatherPutDown()}e==M.instance.actorId&&(36!=this._sceneType&&37!=this._sceneType||w.halo.HaloModel.instance.haloOpen&&w.halo.HaloModel.instance.isForceEnter&&GlobalData.dispatcher.event("HALO_AUTO_BEAST_SELECT_TARGET",!1))},b.prototype.broadcastDead=function(t){var e=t[0],i=B.instance.getRole(e);if(null!=i){if(i.property.get("avatar")){var n=i.property.get("avatar").getChildByName("particle_parentFb"),s=i.property.get("avatar").getChildByName("particle_parentBg");n&&(n.removeSelf(),n.destroy(!0)),s&&(s.removeSelf(),s.destroy(!0))}var o=i.property;if(o.set("status",1024),o.event("status",1024),e==M.instance.actorId&&(M.instance.playerDeadTuple=t,M.instance.playerDeadTime=GlobalData.serverTime,39===this._sceneType?M.instance.selectTarget(1,-1):56===this._sceneType&&0!=w.team_warfare.TeamWarfareModel.instance.gatherOcc&&(w.team_warfare.TeamWarfareModel.instance.gatherOcc=0,GlobalData.dispatcher.event("UPDATE_GATHER_OCC")),w.union_war.UnionWarModel.instance.isSuoDi=!1),t[1]===M.instance.actorId&&(2161!==this._tuple[0]&&4401!==this._tuple[0]||(h.instance.defeatInfo=t,WindowManager.instance.open(162,t))),14===this._sceneType&&1==t[2]&&GlobalData.dispatcher.event("NINE_COPY_PLAYER_DEADED",t[0]),E.instance._bossHomeShow[e])if(delete E.instance._bossHomeShow[e],12==this._sceneType){var a=d.instance;2==M.instance.selectTargetType&&M.instance.selectTargetId==e&&a.setSelectTarget(E.instance.selectLastBoss,!0),GlobalData.dispatcher.event("BOSS_SHOW_PLAYER_INFO")}else 31==this._sceneType?(a=w.sheng_yu.ShengYuBossModel.instance,2==M.instance.selectTargetType&&M.instance.selectTargetId==e&&a.setSelectTarget(E.instance.selectLastBoss,!0),GlobalData.dispatcher.event("BOSS_SHOW_PLAYER_INFO")):57==this._sceneType&&GlobalData.dispatcher.event("BOSS_SHOW_PLAYER_INFO");var r=t[4];12==this._sceneType&&1!==r&&2!==r&&1===M.instance.selectTargetType&&GlobalData.dispatcher.event("BOSS_HOME_BOSS_DEAD",r)}},b.prototype.broadcastPlaySkill=function(t){var e=t[0];if(e!=M.instance.actorId){var i=B.instance.getRole(e);if(null!=i){var n=i.property;if(t[3]){var s=n.get("petContext");null!=s&&(n=s.property)}if(t[4]){var o=n.get("babyContext");null!=o&&(n=o.property)}n.set("battle",[t[2],t[1]]),n.set("status",128),n.event("status",128)}}},b.prototype.BroadcastSkillSpecialEff=function(t){var e=t[0],i=B.instance.getRole(e);if(null!=i&&!GlobalData.getNoEff(i.property)){if(null==(a=_.instance.getCfgById(1e4*t[2])))throw new Error("不存在的技能："+t[2]);var n=i.property;null!=(r=a[7])&&""!=r&&Laya.timer.once(t[3],B.instance.world,B.instance.world.publish,["launchEffect",0,"assets/particle/"+r+".lh",n.get("transform").localPosition,1==a[6]?n.get("avatar").direction:0],!1),null!=(r=a[8])&&""!=r&&Laya.timer.once(t[3],B.instance.world,B.instance.world.publish,["launchEffect",1,"assets/particle/"+r+".lh",n.get("transform").localPosition,1==a[6]?n.get("avatar").direction:0],!1),null!=(r=a[13])&&""!=r&&Laya.timer.once(t[3],B.instance.world,B.instance.world.publish,["launchEffect",0,"assets/particle/"+r+".lh",n.get("transform").localPosition,1==a[6]?n.get("avatar").direction:0],!1),null!=(r=a[14])&&""!=r&&Laya.timer.once(t[3],B.instance.world,B.instance.world.publish,["launchEffect",1,"assets/particle/"+r+".lh",n.get("transform").localPosition,1==a[6]?n.get("avatar").direction:0],!1)}var s=t[1],o=B.instance.getRole(s);if(null!=o){var a,r;if(null==(a=_.instance.getCfgById(1e4*t[2])))throw new Error("不存在的技能："+t[2]);n=o.property,null!=(r=a[9])&&""!=r&&Laya.timer.once(t[3],B.instance.world,B.instance.world.publish,["launchEffect",0,"assets/particle/"+r+".lh",n.get("transform").localPosition,0],!1),null!=(r=a[10])&&""!=r&&Laya.timer.once(t[3],B.instance.world,B.instance.world.publish,["launchEffect",1,"assets/particle/"+r+".lh",n.get("transform").localPosition,0],!1),null!=(r=a[13])&&""!=r&&Laya.timer.once(t[3],B.instance.world,B.instance.world.publish,["launchEffect",0,"assets/particle/"+r+".lh",n.get("transform").localPosition,0],!1),null!=(r=a[14])&&""!=r&&Laya.timer.once(t[3],B.instance.world,B.instance.world.publish,["launchEffect",1,"assets/particle/"+r+".lh",n.get("transform").localPosition,0],!1)}},b.prototype.BroadcastBuffSpecialEff=function(t){var e=t[0];if(e!=M.instance.actorId){var i=B.instance.getRole(e);null!=i&&i.publish("buff",t[1],t[2])}},b.prototype.broadcastActorShow=function(t){var e=t[0],i=e[0],n=B.instance.getRole(i);if(null!=n){var s=n.property;i===M.instance.actorId&&(M.instance.teamId=e[25]),s.set("name",e[5]);var o=e[31],a=0!=o&&o>GlobalData.serverTime;s.set("isUnseen",a),i==M.instance.actorId&&(M.instance.isUnseen=a,M.instance.unseenTimeNum=o),a&&s.set("name",e[5]+"【幽灵】"),s.set("teamId",e[25]),s.set("exterior",[e[7],e[6],e[10],e[9],e[15],e[18]]),s.set("pet",[e[8],e[14]]),s.set("desgnation",e[17]),s.set("factionName",e[19]),s.set("factionId",e[11]),s.set("rise",e[20]),s.set("marrierName",e[24]),s.set("warbandId",e[26]),s.set("warbandName",e[27]),s.set("blueVip",e[28]),i===M.instance.actorId&&w.qq.QQModel.instance.setBlueVip(e[28]),s.set("baby",e[29]),i===M.instance.actorId&&GlobalData.dispatcher.event("UPDATE_UNSEEN_TIME_NUM"),GlobalData.dispatcher.event("UPDATE_WARBAND_WARGATHER_LIST")}},b.prototype.updateChangeMap=function(t){var e=this._tuple[0],i=t[0],n=l.instance.getCfgById(e)[7],s=l.instance.getCfgById(i)[7];x.SceneModel.instance.isInMission=!1,0===n&&1===s?(a.instance.enterScene(i),o.instance.enterScene(i),x.SceneModel.instance.isInMission=!0,GlobalData.dispatcher.event("SCENE_ENTER",i)):0===n&&0===s&&(a.instance.enterScene(i),o.instance.enterScene(i),GlobalData.dispatcher.event("SCENE_ENTER",i),M.instance.selectTarget(1,-1),this.reqRevive())},b.prototype.updateBossBirthPos=function(t){var e=B.instance.getRole(M.instance.actorId);if(null!=e){var i=e.property,n=new(P.bind.apply(P,[void 0].concat(t[0])));i.set("desPos",n),i.set("moveType",1),GlobalData.dispatcher.event("MISSION_MOVE_POS_UPDATE")}},b.prototype.updatePKMode=function(t){M.instance.pkMode=t[0],s.info(11,"PK模式: "+t[0])},b.prototype.updateActorState=function(t){var e=t[0],i=B.instance.getRole(e);if(null!=i){var n=t[1];i.property.set("actorState",n)}s.info(11,"角色状态: "+t[0]+", "+t[1])},b.prototype.updateDropItem=function(t){var e=t[1],i=t[0];if(null!=e){B.instance.world.publish("updateDropItems",i[0],i[1],e);var n=this._tuple[0];if(20===l.instance.getCfgById(n)[7]){for(var s=0,o=e;s<o.length;s++){var a=o[s];c.instance.addDropItem([a[0],a[1],0,null])}c.instance.dropItemsUpdated=!0}}},b.prototype.updateNpc=function(t){for(var e=0,i=t[0];e<i.length;e++){var n=i[e],s=n[0],o=B.instance.getRole(s);if(null!=o){var a=o.property;a.set("occ",n[1]);var r=new(P.bind.apply(P,[void 0].concat(n[4])));a.set("pos",r),a.set("liveTime",n[3]),a.set("own",n[5]),a.set("ownerName",n[6]),o.publish("setCoordinate",r.x,r.y)}}},b.prototype.playerTotalAttrUpdate=function(){var t=B.instance.getRole(M.instance.actorId);if(null!=t)for(var e=M.instance.playerTotolAttrs,i=t.property,n=0,s=e.length;n<s;n++)if(171===e[n][0]){i.set("speed",e[n][1]);break}},b.prototype.exitDungeon=function(){w.mission.MissionModel.instance.auto=!1,o.instance.reqEnterScene()},I=b,x.SceneCtrl=I}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("tianti"),this._table={};for(var t=0,e=this._cfgs.length;t<e;t++)this._table[this._cfgs[t][0]]=this._cfgs[t]},n.prototype.getCfgById=function(t){return this._table[t]},n.prototype.getCfgMaxSocre=function(){return this._cfgs=GlobalData.getConfig("tianti"),this._cfgs[this._cfgs.length-1][2]},n.prototype.getCfgMaxId=function(){return this._cfgs=GlobalData.getConfig("tianti"),this._cfgs[this._cfgs.length-1][0]},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),i=n,e.TiantiCfg=i}(modules=modules||{}),function(T){var t,w,x,B,P,S,A,e,r,l,h,M,E,i;function n(){var t=w.call(this)||this;return t.num=1e4,t.caseNum1=11,t.caseNum2=12,t._isFristShow=!0,t._showNum=1,t._showColor=[6,7,8,9,10],t}t=T.main||(T.main={}),x=T.bag.BaseItem,B=game.GameCenter,P=game.misc.LogUtils,S=T.config.MonsterResCfg,A=T.player.PlayerModel,e=ui.HealthPointViewUI,r=T.scene.SceneModel,l=T.config.MonsterCfg,h=T.bossDungeon.BossDungeonModel,M=T.scene.SceneUtil,E=T.config.TiantiCfg,w=e,__extends(n,w),n.prototype.initialize=function(){w.prototype.initialize.call(this),this._colorArr=new Array,this.layer=1,this.closeByOthers=!1,this.top=350,this.centerX=0,this.zOrder=-1,this._colorIndex=0,this._colorLength=0,this._monsterProFactTween=TweenJS.create(this.monsterProFact).to({width:0},100),this._monsterProInterTween=TweenJS.create(this.monsterProInter).to({width:0},300).onComplete(this.checkHP.bind(this)),this._playerProFactTween=TweenJS.create(this.playerProFact).to({width:0},100),this._playerProInterTween=TweenJS.create(this.playerProInter).to({width:0},300).onComplete(this.checkHP.bind(this)),this._bossProgressUpTween=TweenJS.create(this.bossProgressUp),this._bossProgressInterTween=TweenJS.create(this.bossProgressInter).onComplete(this.checkHP.bind(this)),this._bossProgressShowEffectTween=TweenJS.create(this.bossProgressUp),CommonUtil.setHTMLPro(this.nothingnessWorldHtml,"#50ff28","SimHei",24,"center","middle")},n.prototype.onEvt=function(){w.prototype.onEvt.call(this),39===M.currScene?(this.onAutoGlobalEvt("FIRE_CONTENTION_BOSS_INFOS_UPDATE_BOSS_INFO",this,this.updateBossInfo),this.onAutoGlobalEvt("FIRE_CONTENTION_BOSS_INFOS_UPDATE",this,this.updateBossInfo)):40!==M.currScene&&52!==M.currScene||(this.onAutoGlobalEvt("UPDATE_SCENE_JUMP_LEVEL",this,this.showUpLvTimeUI),this.onAutoGlobalEvt("EMPTY_SCENE_READY",this,this.showUpLvTimeUI),40===M.currScene&&this.onAutoGlobalEvt("CHARM_TIPS",this,this.updateCharm))},n.prototype.resetTarget=function(t){null!=this._targetProperty&&this._targetProperty.off("hp",this,this.updateProgress).off("destroyed",this,this.close),this._targetProperty=t,null!=this._targetProperty&&this._targetProperty.on("hp",this,this.updateProgress).on("destroyed",this,this.close),Laya.timer.clear(this,this.loopHandler),Laya.timer.clear(this,this.loopHandler1),this.closeCharmBuff(),this.updateTimeBgImg.visible=this.updateTimeText.visible=this.buffBg.visible=this.bossBuffText.visible=!1},n.prototype.offEvt=function(){w.prototype.offEvt.call(this),this.resetTarget(null),this._monsterProFactTween.stop(),this._monsterProInterTween.stop(),this._playerProFactTween.stop(),this._playerProInterTween.stop(),this._bossProgressUpTween.stop(),this._bossProgressInterTween.stop(),this._bossProgressShowEffectTween.stop(),P.info(1,"___________________________关闭界面")},n.prototype.setOpenParam=function(t){w.prototype.setOpenParam.call(this,t),this._id=t;var e=M.currScene;if(12!==e&&31!==e&&35!==e&&37!==e&&47!==e&&49!==e&&57!==e||WindowManager.instance.open(407),44===e){var i=T.forbiddenBoss.ForbiddenBossModel.instance.info;i&&3===i[3]?WindowManager.instance.open(1233):WindowManager.instance.open(1174,this._id)}},n.prototype.onOpened=function(){if(w.prototype.onOpened.call(this),P.info(1,"___________________________打开界面"),!this._bossProgressInterTween.isPlaying){var t=B.instance.getRole(this._id);if(this.judgeCanContinue(t)){if(this.resetTarget(t.property),this.visible=!0,this._isFristShow=!0,this._items)for(var e=0,i=this._items;e<i.length;e++)i[e].visible=!1;if(this.awardBgImg.visible=!1,this.gradeFont.value="",3===t.property.get("type")){this.type=-1,this.deptImg.skin="",this.nothingnessWorldBg.visible=this.nothingnessWorldHtml.visible=!1,this.playerProEmpty.visible=this.playerProInter.visible=this.playerProFact.visible=this.playHeadIcon.visible=this.playerInfo.visible=!0,this.monsterInfo.visible=this.monsterProEmpty.visible=this.monsterProFact.visible=this.monsterShow.visible=this.monsterProInter.visible=!1,this.bossProgressUnder.visible=this.bossProgressUp.visible=this.bossShow.visible=this.bossIconImg.visible=this.bossProgressEmpty.visible=this.bossInfo.visible=this.bossPercent.visible=this.bossProgressInter.visible=this.bossBloodNum.visible=!1,this.top=350,this.totalLen=186,this.playerInfo.text=t.property.get("name");var n=this._targetProperty.get("occ"),s=this._targetProperty.get("headIcon"),o=this._targetProperty.get("headPhotoframe");if(this.playHeadIcon.setInfo(s,n,o),16===M.currScene){var a=this._targetProperty.get("seg"),r=E.instance.getCfgById(a);a>=E.instance.getCfgMaxId()&&(a=E.instance.getCfgMaxId(),r=E.instance.getCfgById(a)),r&&(this.gradeFont.value=r[1])}}else{var l=this._targetProperty.get("occ");r=S.instance.getCfgById(l),this.deptImg.skin=S.instance.getMonsterDeptType(l)?"assets/icon/ui/yuan_shen/icon_ysjt_"+S.instance.getMonsterDeptType(l)+".png":"",this.type=S.instance.getMonsterType(l);var h=0!=this.type;this.playerProEmpty.visible=this.playerProInter.visible=this.playerProFact.visible=this.playHeadIcon.visible=this.playerInfo.visible=!1,this.monsterInfo.visible=this.monsterProEmpty.visible=this.monsterProFact.visible=this.monsterShow.visible=this.monsterProInter.visible=!h,this.bossProgressUnder.visible=this.bossProgressUp.visible=this.bossShow.visible=this.bossIconImg.visible=this.bossProgressEmpty.visible=this.bossInfo.visible=this.bossPercent.visible=this.bossProgressInter.visible=this.bossBloodNum.visible=h;var c=S.instance.getMonsterName(l);if(h){this.top=150,this._showNum=S.instance.getMonsterHpNum(l);for(var p=0,u=0;u<this._showNum;u++){var d=this._showNum-1;u==d?this._colorArr[0]=this._showColor[4]:(this._colorArr[d-u]=this._showColor[p%4],p++)}this.totalLen=378,r[3]?this.bossIconImg.skin="assets/icon/monster/"+r[3]+".png":this.bossIconImg.skin="assets/icon/monster/310001.png",this.bossInfo.text=c+"    Lv."+t.property.get("level");var m=T.config.MonsterResExCfg.instance.getCfgByItemType(S.instance.getMonsterItemType(l)),f=m?m[1]:null;if(this._items||(this._items=[]),f){u=0;for(var g=.5*f.length;u<g;u++){var y=f[2*u],_=f[2*u+1];if(!this._items[u]){var v=new x;v._nameTxt.scale(1.4,1.4,!0),v._nameTxt.x=-20,v.scale(.7,.7),v.nameVisible=!0,v.needTip=!1,v.pos(230+85*u,85,!0),this.addChild(v),this._items[u]=v}this._items[u].dataSource=[y,_,0,null],this._items[u].visible=!0}}if(this.awardBgImg.visible=f&&0<f.length,52===M.currScene){this.zhanHunText1.visible=this.zhanHunText.visible=this.zhanHunTextBg.visible=!0;var I=T.config.SceneZhanHunCfg.instance.getCfgByOcc(r[0])[4],b=T.config.MonsterCfg.instance.getMonsterById(r[0])[2];this.zhanHunText.text="推荐战魂值:"+CommonUtil.bigNumToString(I/5e4),this.zhanHunText1.text="推荐战力:"+CommonUtil.bigNumToString(b)}else this.zhanHunText1.visible=this.zhanHunText.visible=this.zhanHunTextBg.visible=!1;this.showUpLvTimeUI()}else{this.top=350,this.totalLen=186;var C=Math.floor(l/this.num);C==this.caseNum1||C==this.caseNum2?this.monsterInfo.text=c+"    Lv."+A.instance.level:this.monsterInfo.text=c+"    Lv."+t.property.get("level")}}this.updateProgress(),39===M.currScene&&1===this.type&&this.updateBossInfo()}else this.close()}},n.prototype.updateProgress=function(){var t=this._targetProperty.get("hp");if(this.nowHP=t[0],this.maxHP=t[1],this.nowHP>=this.maxHP&&(this.nowHP=this.maxHP),0==this.type){var e=Math.floor(this.nowHP/this.maxHP*this.totalLen);this._isFristShow&&(this._isFristShow=!1,this.monsterProInter.width=this.monsterProFact.width=this.totalLen),this._monsterProFactTween.stop(),this._monsterProInterTween.stop(),this._monsterProFactTween.property.width=e,this._monsterProInterTween.property.width=e,this._monsterProFactTween.start(),this._monsterProInterTween.start()}else if(-1===this.type)e=Math.floor(this.nowHP/this.maxHP*this.totalLen),this._isFristShow&&(this._isFristShow=!1,this.playerProInter.width=this.playerProFact.width=this.totalLen),this._playerProFactTween.stop(),this._playerProInterTween.stop(),this._playerProFactTween.property.width=e,this._playerProInterTween.property.width=e,this._playerProFactTween.start(),this._playerProInterTween.start();else{var i=this.nowHP/this.maxHP,n=(100*i).toFixed(2);this.bossPercent.text=n+"%";var s=void 0;if(1==i)s=this._showNum-1,this._colorLength=this.totalLen;else{var o=i*this._showNum,a=o-(s=Math.floor(o));a=1<a?1:a,this._colorLength=a*this.totalLen}if(this._isFristShow)this._isFristShow=!1,this._colorIndex=s,this.bossProgressInter.width=this.bossProgressUp.width=this._colorLength,this.setColor(s);else{var r=this._colorIndex-s;this._colorIndex=s;var l=100;0!=r?(l=Math.floor(100/r),this.bossProgressInter.visible=!1,this.showEffect(r,0<l?l:-l)):this.endEffect(0,l)}}},n.prototype.judgeCanContinue=function(t){if(!t)return!1;var e=t.property.get("type"),i=r.instance.enterScene[0];if(1===e){var n=t.property.get("occ");if(l.instance.getMonsterById(n)[1]&&(3501===i||2402===i||2403===i||2121===i||2351===i||2391===i||3701===i||4501===i||4502===i||4503===i))return!1}if(3===e){var s=h.instance.selectLastBoss,o=h.instance.getOwnByBossId(s),a=void 0;if(o&&(a=o[1])===t.property.get("id")&&h.instance.playerIsMeAttack(a))return!1}return!0},n.prototype.showEffect=function(t,e){var i=this,n=0<t?t-1:t+1;this.interColor(this._colorIndex+t),this._bossProgressShowEffectTween.stop(),this._bossProgressShowEffectTween.to({width:0<t?0:this.totalLen},e).onComplete(function(){i.bossProgressUp.width=0<t?i.totalLen:0,0!==n?i.showEffect(n,e):i.endEffect(t,e)}).start()},n.prototype.endEffect=function(t,e){0<t?this.bossProgressInter.width=this.totalLen:t<0&&(this.bossProgressInter.width=0),this.setColor(this._colorIndex),this.bossProgressInter.visible=!0,this._bossProgressUpTween.stop(),this._bossProgressInterTween.stop(),this._bossProgressUpTween.to({width:this._colorLength},e).start(),this._bossProgressInterTween.to({width:this._colorLength},3*e).start()},n.prototype.interColor=function(t){null!=this._colorArr[t]&&(this.bossProgressUp.skin="health_point/dt_guaiwu_"+this._colorArr[t]+".png"),null!=this._colorArr[t-1]&&(this.bossProgressUnder.skin="health_point/dt_guaiwu_"+this._colorArr[t-1]+".png"),this.bossBloodNum.text="×"+(t+1).toString()},n.prototype.setColor=function(t){null!=this._colorArr[t]&&(this.bossProgressUp.skin="health_point/dt_guaiwu_"+this._colorArr[t]+".png"),0!=t?(this.bossProgressUnder.visible=!0,null!=this._colorArr[t-1]&&(this.bossProgressUnder.skin="health_point/dt_guaiwu_"+this._colorArr[t-1]+".png")):this.bossProgressUnder.visible=!1,this.bossBloodNum.text="×"+(t+1).toString()},n.prototype.checkHP=function(){0==this.nowHP&&this.close()},n.prototype.updateBossInfo=function(){var t=T.fire_contention.FireContentionModel.instance.getBossInfoById(this._targetProperty.get("occ"));if(t&&t[2]){var e=t[2][4];e>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler,[e]),this.loopHandler(e)):(Laya.timer.clear(this,this.loopHandler),this.buffBg.visible=this.bossBuffText.visible=!1,this.bossInfo.visible=!0);var i=T.scene.SceneModel.instance.enterScene[0];if(39===T.config.SceneCfg.instance.getCfgById(i)[7]&&1===this.type){var n=t[2][2];n>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler1,[n]),this.loopHandler1(n)):(Laya.timer.clear(this,this.loopHandler1),this.updateTimeBgImg.visible=this.updateTimeText.visible=!1)}}},n.prototype.loopHandler1=function(t){t>GlobalData.serverTime?(this.updateTimeBgImg.visible=this.updateTimeText.visible=!0,this.updateTimeText.text="(刷新倒计时:"+CommonUtil.timeStampToHHMMSS(t)+")"):(Laya.timer.clear(this,this.loopHandler1),this.updateTimeBgImg.visible=this.updateTimeText.visible=!1)},n.prototype.loopHandler=function(t){t>GlobalData.serverTime?(this.buffBg.visible=this.bossBuffText.visible=!0,this.bossInfo.visible=!1,this.bossBuffText.text="无敌:BOSS开始无敌，持续"+CommonUtil.timeStampToSS(t)+"秒"):(Laya.timer.clear(this,this.loopHandler),this.buffBg.visible=this.bossBuffText.visible=!1,this.bossInfo.visible=!0)},n.prototype.loopHandler2=function(t){t>GlobalData.serverTime?(this.buffBg.visible=this.bossBuffText.visible=!0,this.bossInfo.visible=!1,this.bossBuffText.text="破血咒:BOSS无法回血，持续"+CommonUtil.timeStampToSS(t)+"秒"):(Laya.timer.clear(this,this.loopHandler2),this.buffBg.visible=this.bossBuffText.visible=!1,this.bossInfo.visible=!0)},n.prototype.closeCharmBuff=function(){Laya.timer.clear(this,this.loopHandler2),this.buffBg.visible=this.bossBuffText.visible=!1,this.bossInfo.visible=!0,T.nothingness_world.NothingnessWorldModel.instance.broadcastList=[],WindowManager.instance.close(964)},n.prototype.close=function(){w.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler),Laya.timer.clear(this,this.loopHandler1),this.closeCharmBuff(),WindowManager.instance.close(1174),WindowManager.instance.close(1233)},n.prototype.destroy=function(){this._items=this.destroyElement(this._items),w.prototype.destroy.call(this)},n.prototype.showUpLvTimeUI=function(){if(40===M.currScene||52===M.currScene){var t=this._targetProperty.get("occ"),e=0,i=0;52===M.currScene?(this.nothingnessWorldBg.y=143,this.nothingnessWorldHtml.y=146,i=T.nether_world.NetherWorldModel.instance.doneWave,this.nothingnessWorldBg.visible=this.nothingnessWorldHtml.visible=1<T.nothingness_world.NothingnessWorldModel.instance.level-i&&0<T.nothingness_world.NothingnessWorldModel.instance.level&&0<T.nothingness_world.NothingnessWorldModel.instance.tick,this.nothingnessWorldHtml.innerHTML=CommonUtil.msToSS(T.nothingness_world.NothingnessWorldModel.instance.tick,!1)+"秒内击败boss，可直接跳至第"+T.nothingness_world.NothingnessWorldModel.instance.level+"层"):40===M.currScene&&(this.nothingnessWorldBg.y=100,this.nothingnessWorldHtml.y=103,e=(e=T.nothingness_world.NothingnessWorldModel.instance.currLv+T.config.SceneEmptyCfg.instance.getUpLevle(t))>T.config.SceneEmptyCfg.instance.maxLv?T.config.SceneEmptyCfg.instance.maxLv:e,this.nothingnessWorldBg.visible=this.nothingnessWorldHtml.visible=!1,this.nothingnessWorldHtml.innerHTML=CommonUtil.msToSS(T.nothingness_world.NothingnessWorldModel.instance.tick,!1)+"秒内击败boss，最多可直接跳至第"+e+"层")}},n.prototype.updateCharm=function(){var t=T.nothingness_world.NothingnessWorldModel.instance.charmEndTime;t>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler2,[t]),this.loopHandler2(t)):(Laya.timer.clear(this,this.loopHandler2),this.buffBg.visible=this.bossBuffText.visible=!1,this.bossInfo.visible=!0)},i=n,t.HealthPointPanel=i}(modules=modules||{}),function(u){var t,l,d,e,h,i,n,s;function o(){return null!==l&&l.apply(this,arguments)||this}t=u.commonAlert||(u.commonAlert={}),d=u.player.PlayerModel,e=laya.ui.Button,h=t.EquipAlertUtil,i=u.notice.SystemNoticeManager,n=Laya.Text,l=t.EquipBaseAlert,__extends(o,l),o.prototype.destroy=function(){this._wearBtn=this.destroyElement(this._wearBtn),this._txt=this.destroyElement(this._txt),l.prototype.destroy.call(this)},o.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this._wearBtn,this,this.wearHandler)},o.prototype.initialize=function(){l.prototype.initialize.call(this),this.isNeedContrast=!0,this.sumScoreImg.visible=this.mySumScoreTxt.visible=this.stoneBox.visible=this.xiLianBox.visible=!1,this._txt=new n,this._txt.width=this.elseBox.width,this._txt.align="center",this._txt.color="#ff3e3e",this._txt.font="SimHei",this._txt.fontSize=28,this._wearBtn=new e("common/btn_tongyong_6.png","穿戴"),this._wearBtn.stateNum=1,this._wearBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this._wearBtn.labelPadding="-3,0,0,0",this._wearBtn.labelSize=28,this._wearBtn.labelFont="SimHei",this.elseBox.addChild(this._txt),this.elseBox.addChild(this._wearBtn),this._wearBtn.centerX=0,this._wearBtn.y=this.rankTxt.y+50,this._txt.y=this._wearBtn.y+24,this.elseBox.height=this._wearBtn.y+this._wearBtn.height+10},o.prototype.wearHandler=function(){if(this.itemData){if(8===CommonUtil.getItemTypeById(this.itemData[0])){var t=this.itemData[0]/1e5>>0;if(817<=t&&t<=822)u.showEquip.ShowEquipCtrl.instance.ShowEquipWear(u.config.ShowEquipCfg.instance.getTypeByItemId(this.itemData[0]),this.itemData[2]);else{var e=u.yuanShen.YuanShenUtil.getTypeById(this.itemData[0]);0===u.yuanShen.YuanShenModel.instance.getInfoById(e)[3]?i.instance.addNotice("元神未开启",!0):u.yuanShen.YuanShenCtrl.instance.wearYuanShenEquip(this.itemData[2],e)}}else BagCtrl.instance.wearEquip(this.itemData[2]);this.close()}},o.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this.item=t},Object.defineProperty(o.prototype,"item",{set:function(t){var e=t,i=e[0];this.teamIdTest=i;var n=u.common.CommonUtil.getPartById(i),s=!0,o=!0,a=CommonUtil.getItemTypeById(i),r=!1;if(5===a)this.myEquip=d.instance.getEquipByPart(n);else if(8==a){var l=i/1e5>>0;if(801==l)this.myEquip=u.beast_equipment.BeastEquipmentModel.instance.getEquipByPart(n),r=!(s=!1);else if(817<=l&&l<=822)this.myEquip=u.showEquip.ShowEquipModel.instance.getEquipById(i),r=s=!0;else{this.myEquip=u.yuanShen.YuanShenModel.instance.getEquipByTypePart(u.yuanShen.YuanShenUtil.getTypeById(i),n);var h=u.yuanShen.YuanShenUtil.getTypeById(i);0===u.yuanShen.YuanShenModel.instance.getInfoById(h)[3]&&(o=!1,this._txt.text=u.yuanShen.YuanShenUtil.typeStrs(h-1)+"开启后可穿戴")}}this.setBaseInfo(e),this.setBaseAttr(e,r);var c=e[3],p=this.setBestAttr(c);0==p?(this.elseBox.y=this.conBox.y,this.bestAttrBox.visible=!1):(this.bestAttrBox.visible=!0,this.elseBox.y=this.conBox.y+this.setConHeight(this._bestAttrInitY+30*p+10)),s?o?(this._wearBtn.visible=!0,this._txt.visible=!1,1===t[2]?(this._wearBtn.visible=!1,this.elseBox.height=50):(this._wearBtn.visible=!0,this.elseBox.height=this._wearBtn.y+this._wearBtn.height+10)):1===t[2]?(this._wearBtn.visible=!1,this._txt.visible=!1,this.elseBox.height=50):(this._wearBtn.visible=!1,this._txt.visible=!0,this.elseBox.height=this._wearBtn.y+this._wearBtn.height+10):(this._txt.visible=this._wearBtn.visible=!1,this.elseBox.height=50),this.setRank(i)},enumerable:!0,configurable:!0}),o.prototype.setBaseInfo=function(t){l.prototype.setBaseInfo.call(this,t);var e=0;this.myEquip&&(e=this.myEquip[3][6]);var i=t[3][6]-e;h.judgeDiff(i,this.myScoreTxt,this.scoreImg)},o.prototype.setBaseAttr=function(t,e){void 0===e&&(e=!1),l.prototype.setBaseAttr.call(this,t,e);var i=t[0],n=u.config.ItemEquipCfg.instance.getItemCfgById(i)[8];if(this.myEquip)for(var s=u.config.ItemEquipCfg.instance.getItemCfgById(this.myEquip[0])[8],o=0;o<.5*s.length;o++){var a=s[2*o+1],r=n[2*o+1]-a;this.baseAttrImgs[o].visible=!0,h.judgeDiff(r,this.myBaseAttrTxts[o],this.baseAttrImgs[o])}else for(o=0;o<this.myBaseAttrTxts.length;o++)this.myBaseAttrTxts[o].color="#cbcade",this.myBaseAttrTxts[o].text="无",this.baseAttrImgs[o].visible=!1},o.prototype.setBestAttr=function(t){var e=l.prototype.setBestAttr.call(this,t),i=0;if(this.myEquip){var n=this.myEquip[3];i=l.prototype.setBestAttr.call(this,n,"my")}else this.myBestAttrTxts.forEach(function(t){t.visible=!1});return i<=e?e:i},s=o,t.BagEquipAlert=s}(modules=modules||{}),function(S){var i,n,t,e,A,M,E,R,s,o,D,L,k,a,r,l;function h(){var t=n.call(this)||this;return t._modelClipY=200,t._lastY=0,t._h=500,t}i=S.commonAlert||(S.commonAlert={}),t=ui.PropAlertUI,e=S.bag.BaseItem,A=S.config.GetWayCfg,M=S.bag.BagModel,E=S.player.PlayerModel,R=S.config.ItemRuneCfg,s=S.common.AvatarClip,o=S.config.ExteriorCfg,D=S.common.CommonUtil,L=S.config.AttrItemCfg,k=S.common.AttrUtil,a=Laya.Rectangle,r=Laya.Event,n=t,__extends(h,n),h.prototype.onEvt=function(){n.prototype.onEvt.call(this);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t]);this.onAutoEvt(this.descTxt,"mousedown",this,this.downHandler),this.onAutoEvt(this.descTxt,"mousewheel",this,this.wheelHandler)},h.prototype.offEvt=function(){n.prototype.offEvt.call(this),this._modelClipTween&&this._modelClipTween.stop(),this._modelShowImgTween&&this._modelShowImgTween.stop(),this._modelClip&&(this._modelClip.removeSelf(),this._modelClip.destroy(),this._modelClip=null)},h.prototype.downHandler=function(){this._lastY=this.descTxt.mouseY,Laya.stage.on(r.MOUSE_MOVE,this,this.moveHandler),Laya.stage.on(r.MOUSE_UP,this,this.upHandler),Laya.stage.on(r.MOUSE_OUT,this,this.upHandler)},h.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scrollY(e)},h.prototype.moveHandler=function(){var t=this._lastY-this.descTxt.mouseY;this.scrollY(t),this._lastY=this.descTxt.mouseY},h.prototype.upHandler=function(){Laya.stage.off(r.MOUSE_MOVE,this,this.moveHandler),Laya.stage.off(r.MOUSE_UP,this,this.upHandler),Laya.stage.off(r.MOUSE_OUT,this,this.upHandler)},h.prototype.scrollY=function(t){if(!(this.descTxt.height<this._h)){var e=this.descTxt.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.descTxt.height-this._h&&(e.y=this.descTxt.height-this._h),this.descTxt.scrollRect=e}},h.prototype.initialize=function(){n.prototype.initialize.call(this),this.zOrder=3,this._baseItem=new e,this.addChild(this._baseItem),this._baseItem.pos(48,79,!0),this._baseItem.nameVisible=!1,this._baseItem.needTip=!1,D.setHTMLPro(this.descTxt,"#ffffff","SimHei",22),this._sourceBtns=new Array,this._sourceBtnBg=new Array,this._desTxt=new Array;for(var t=0;t<4;t++)this._sourceBtns[t]=new Laya.Image,this._sourceBtns[t].mouseEnabled=!0,this._sourceBtnBg[t]=new Laya.Image,this._desTxt[t]=new laya.display.Text,i.PropAlertUtil.setDesTxt(this._desTxt[t]);this._recordFuncIds=[],this._h=500,this.descTxt.scrollRect=new a(0,0,this.descTxt.width,this._h)},h.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t),this.initializeModelClip(),this.item=t,this.descTxt.scrollRect&&this.descTxt.scrollRect.setTo(0,0,this.descTxt.width,this._h)},Object.defineProperty(h.prototype,"item",{set:function(t){this.removeChildSource();var e=t[0],i=E.instance.getCurrencyById(e);null==i&&(i=M.instance.getItemCountById(e)),21==D.getItemSubTypeById(e)&&(i=(i=S.xianfu.XianfuModel.instance.handBookRes.get(e))||0),this.numTxt.text="拥有数量："+i.toString(),this._baseItem.dataSource=t,this._baseItem._numTxt.visible=!1;var n=D.getItemCfgById(e),s=D.getItemTypeById(e),o=4===s,a=S.yuanShen.YuanShenUtil.isFulingItem(e);this.nameTxt.color=D.getColorById(e),this.qualityImg.skin=D.getBgImgById(e);var r,l=D.getItemQualityById(e);if(this.qualityImg1.visible=this.qualityImg2.visible=this.qualityImg3.visible=6==l,this.descTxt.style.height=0,this.descTxt.style.leading=10,7==s){var h=1e4*(1e-4*e>>0),c=e%1e4,p=R.instance.getCfgById(h);this.nameTxt.text=p[1],this.levelTxt.text="等级："+c;for(var u=p[5],d=n[4],m="",f=0,g=.5*d.length;f<g;f++){var y=L.instance.getCfgById(d[2*f]),_=d[2*f+1],v=y[2]?k.formatFloatNum(_)+"%":Math.round(_)+"";m+="<br/>"+y[1]+" "+v}var I=void 0;if(D.getStoneTypeById(e)===R.instance.resolveRuneSubTypeId){var b=n[2],C=0;for(f=0,g=b.length;f<g;f++)C+=b[f][1];I="分解获得的符文精华+"+C,this.descTxt.innerHTML="<span style='color:#FFEC7C'>"+I+"</span>"}else I=u?"远古符阵"+u+"层解锁":"默认解锁",this.descTxt.innerHTML="类型:符文,镶嵌后可为主角增加以下属性"+m+"<br/><span style='color:#FFEC7C'>"+I+"</span>";r=p[7]}else{var T=e/1e5>>0;this.nameTxt.text=n[1].toString(),this.descTxt.innerHTML=13250003===e?S.config.BlendCfg.instance.getCfgById2(12)?S.config.BlendCfg.instance.getCfgById2(12)[2][0]:"":823<=T&&T<=829?n[6]:o?n[4]:a?n[3]:n[6],this.levelTxt.text=o||a?"":"使用等级："+n[2],r=823<=T&&T<=829?n[15]:n[o?6:a?6:10]}this._recordFuncIds=r;var w,x=this.descTxt.scrollRect.y=0,B=0,P=0;for(n&&(5===s?(x=n[17],B=n[18],P=n[19]):8===s?(x=n[17],B=n[18],P=n[19]):4===s?(x=n[9],B=n[10],P=n[11]):7===s||(x=n[15],B=n[16],P=n[17])),x||(P=B=x=0),0!=x?(90===Math.floor(.001*x)&&(x+=E.instance.occ),this.showMode(x,B,P)):(this._modelClip&&(this._modelClip.removeSelf(),this._modelClip.destroy(),this._modelClip=null),this._modelClipTween&&this._modelClipTween.stop(),this._modelShowImgTween&&this._modelShowImgTween.stop()),this.setPositionImage(this.descTxt,r,0!=x),f=0,g=r.length;f<g;f++)this.addChild(this._sourceBtnBg[f]),this.addChild(this._sourceBtns[f]),w=A.instance.getCfgById(r[f]),this._sourceBtns[f].pos(30+.5*(500-158*g+42*(g-1))+116*f,this._sourceBtnY),this._sourceBtns[f].skin="assets/icon/ui/get_way/"+w[1]+".png",this._sourceBtnBg[f].skin="assets/icon/ui/get_way/btn_ydrk_bg.png",this._sourceBtns[f].addChild(this._desTxt[f]),this._sourceBtnBg[f].pos(this._sourceBtns[f].x,this._sourceBtns[f].y),this._desTxt[f].pos(6,70),this._desTxt[f].text=w[2]},enumerable:!0,configurable:!0}),h.prototype.removeChildSource=function(){if(null!=this._sourceBtns)for(var t=0;t<this._sourceBtns.length;t++)this._sourceBtns[t].skin="",this._sourceBtnBg[t].skin="",this._desTxt[t].text="",this.removeChild(this._sourceBtns[t]),this.removeChild(this._sourceBtnBg[t]),this.removeChild(this._desTxt[t]);this.levelTxt.y=87,this.modelShowBox.visible=!1},h.prototype.getOpenPlaneId=function(t){WindowManager.instance.close(138),WindowManager.instance.close(192),WindowManager.instance.close(190),WindowManager.instance.close(197);var e=this._recordFuncIds[t];i.PropAlertUtil.clickHandler(e)},h.prototype.setPositionImage=function(t,e,i){if(void 0===i&&(i=!1),0!=e.length){this.getSourceImg.visible=!0,this.getSourceTxt.visible=!0;var n=t.height>this._h?this._h:t.height;this.getSourceImg.y=t.y+n+5,this.getSourceTxt.y=this.getSourceImg.y+4,this.modelShowBox.y=this.getSourceImg.y+this.getSourceImg.height+100+20;var s=0;i&&(s=this.modelShowBox.height),this._sourceBtnY=this.getSourceImg.y+this.getSourceImg.height+20,this.bgImage.height=i?this._sourceBtnY+100+s:this._sourceBtnY+100+36+s,this.height=this.bgImage.height,this.qualityImg1.height=this.height+6}else this.getSourceTxt.visible=!1,this.getSourceImg.visible=!1,n=t.height>this._h?this._h:t.height,this.modelShowBox.y=t.y+n+26,s=0,i&&(s=this.modelShowBox.height+20),this.bgImage.height=i?t.y+n+10+s:t.y+n+26+s,this.height=this.bgImage.height,this.qualityImg1.height=this.height+6;this.clickTxt.y=this.bgImage.height+50,this.modelShowBox.visible=i},h.prototype.destroy=function(){if(null!=this._sourceBtns){for(var t=0;t<this._sourceBtns.length;t++)this._sourceBtns[t].destroy(!0),this._sourceBtnBg[t].destroy(!0),this._desTxt[t].destroy(!0);this._sourceBtns=this._sourceBtnBg=this._desTxt=null}this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),n.prototype.destroy.call(this)},h.prototype.showMode=function(t,e,i){if(this._modelClipTween&&this._modelClipTween.stop(),this._modelShowImgTween&&this._modelShowImgTween.stop(),this.modelShowImg.visible=!1,this.tipsText.text="外观展示",0==i?(this.setAvatar(t),this._modelClip.reset(t)):1==i?(this.setAvatar(t),this._modelClip.reset(0,0,0,0,t)):2==i&&(this.modelShowImg.visible=!0,this.modelShowImg.skin="assets/icon/ui/designation/"+t+".png",this.tipsText.text="称号展示"),0==i||1==i){var n=Math.floor(t/1e3);this._modelClipY=200;var s=this._modelClip.scaleX,o=this._modelClip.scaleY,a=1;1==i?9!=n&&10!=n||(this._modelClipY=210):0==i&&(2==n?this._modelClipY=2020===t?235:200:3==n?this._modelClipY=200:4==n?this._modelClipY=200:5==n?this._modelClipY=225:90==n?this._modelClipY=223:11==n?(this._modelClip&&this._modelClip.setActionType("show"),this._modelClipY=230):14==n?this._modelClipY=230:15==n?(this._modelClipY=160,a=.8):this._modelClipY=200),this._modelClip.y=this._modelClipY,this._modelClip.scaleX=s*a,this._modelClip.scaleY=o*a,1==e&&(this._modelClip.y=this._modelClipY,this._modelClipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-10},1e3).start().yoyo(!0).repeat(99999999))}else this.modelShowImg.centerY=-43,1==e&&(this._modelShowImgTween=TweenJS.create(this.modelShowImg).to({centerY:this.modelShowImg.centerY-10},1e3).start().yoyo(!0).repeat(99999999)),console.log("是图片 尚未处理")},h.prototype.initializeModelClip=function(){this._modelClip||(this._modelClip=s.create(1024,1024,800),this.modelShowBox.addChildAt(this._modelClip,3),this._modelClip.pos(250,this._modelClipY,!0),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.mouseEnabled=!1)},h.prototype.setAvatar=function(t){var e=o.instance.getCfgById(t);e&&(this._modelClip.avatarRotationY=e[7]?e[7]:180,this._modelClip.avatarScale=e[10]?768*e[10]/1280:1,this._modelClip.avatarRotationX=e[6]?e[6]:0,this._modelClip.avatarX=e[8]?e[8]:0,this._modelClip.avatarY=e[9]?e[9]:0,this.observationItem.data=[[this._modelClip,Math.round(t/1e3)]])},l=h,i.PropAlert=l}(modules=modules||{}),function(m){var t,a,e,f,r,g,y,i;function n(){var t=null!==a&&a.apply(this,arguments)||this;return t._soureceBtnH=0,t._id=34001,t}t=m.compose||(m.compose={}),e=m.commonAlert.PropAlertUtil,f=m.config.BlendCfg,r=m.config.GetWayCfg,g=m.common.CommonUtil,y=m.bag.BaseItem,a=ui.LackPropAlertUI,__extends(n,a),n.prototype.initialize=function(){a.prototype.initialize.call(this),this._itemBg=new Laya.Image,this.addChild(this._itemBg),this._itemBg.pos(280,129,!0),this._itemIcon=new Laya.Image("assets/icon/item/50063.png"),this.addChild(this._itemIcon),this._itemIcon.pos(280,129,!0),this._itemTxt=new Laya.Text,this.addChild(this._itemTxt),this._itemTxt.pos(0,240),this._itemTxt.width=660,this._itemTxt.fontSize=22,this._itemTxt.font="SimHei",this._itemTxt.align="center",this._sourceBtns=[],this._imgs=[],this._desTxts=[];for(var t=0;t<5;t++)this._sourceBtns[t]=new Laya.Image,this._imgs[t]=new Laya.Image,this._desTxts[t]=new laya.display.Text,e.setDesTxt(this._desTxts[t]),this._sourceBtns[t].mouseEnabled=!0;this.shortCutBuyBox.visible=!1},n.prototype.onEvt=function(){a.prototype.onEvt.call(this);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t])},n.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t[0]),this.item(t[0],t[1]?t[1]:1,t[2])},n.prototype.item=function(t,e,i){if(void 0===i&&(i=!1),this.removeChildSource(),t){if(5===e){var n=(t=t)[0],s=t[1];this._itemIcon.skin="assets/icon/item/520"+(32+n)+".png",this._itemBg.skin="assets/icon/quality_bg/iconbg_6.png",this._itemTxt.color=""+g.getColorByQuality(6),this._itemTxt.text=m.yuanShen.YuanShenUtil.typeNameByIndex(s)+"神"+g.getYuanShenNameByPart(n)}else if(4===e){var o=(t=t)[0],a=t[1];n=t[2],this._itemBg.skin="assets/icon/quality_bg/iconbg_"+o+".png",this._itemIcon.skin="assets/icon/item/5100"+n+".png",this._itemTxt.color=""+g.getColorByQuality(o);var r=0<a?a+"星":"";this._itemTxt.text=g.getColorNameByQuality(o)+r+g.getNameByPartBeastEquip(n)}else{var l=(t=t)[1],h=g.getItemQualityById(l);if(this._itemTxt.color=""+g.getColorByQuality(h),this._itemTxt.text=t[7],2==e)this._itemBg.skin="assets/icon/quality_bg/iconbg_6.png",this._itemIcon.skin="assets/icon/item/51005.png";else if(3==e){var c=t[5][0][0];this._itemBg.skin="assets/icon/quality_bg/iconbg_common_icon_"+m.yuanShen.YuanShenUtil.getTypeById(c)+".png",this._itemIcon.skin=g.getIconById(c)}else 6==e?i?(this._baseItem=new y,this.addChild(this._baseItem),this._baseItem.x=this._itemIcon.x,this._baseItem.y=this._itemIcon.y,this._baseItem.dataSource=[l,1,0,null]):(this._itemBg.skin="assets/icon/quality_bg/iconbg_"+h+".png",this._itemIcon.skin=g.getIconById(l)):7===e?(this._itemBg.skin="assets/icon/quality_bg/iconbg_"+h+".png",this._itemIcon.skin=g.getIconById(l)):(this._itemBg.skin="assets/icon/quality_bg/iconbg_"+h+".png",this._itemIcon.skin="assets/icon/item/50063.png")}switch(this.lineimage.y=this.shortCutBuyBox.y,this._sourceBtnY=this.lineimage.y+this.lineimage.height+16,this._id=34004,e){case 1:this._id=34001;break;case 2:this._id=34003;break;case 3:this._id=34004;break;case 4:this._id=34003;break;case 6:this._id=34005;break;case 7:this._id=34006}for(var p=f.instance.getCfgById(this._id)?f.instance.getCfgById(this._id)[1]:[],u=0,d=p.length;u<d;u++)this.getWayBtn(this._sourceBtns[u],p[u],p.length,u,this._imgs[u]);this._soureceBtnH=100,this.bgImg.height=this._sourceBtnY+this._soureceBtnH+36,this.height=this.bgImg.height,this.backTxt.y=this.height+24}else this.close()},n.prototype.getWayBtn=function(t,e,i,n,s){var o;this.addChild(s),this.addChild(t),o=r.instance.getCfgById(e),t.pos(30+.5*(660-158*i+42*(i-1))+116*n,this._sourceBtnY),t.skin="assets/icon/ui/get_way/"+o[1]+".png",s.skin="assets/icon/ui/get_way/btn_ydrk_bg.png",s.pos(t.x,t.y),t.addChild(this._desTxts[n]),this._desTxts[n].pos(6,70),this._desTxts[n].text=o[2]},n.prototype.getOpenPlaneId=function(t){var e=f.instance.getCfgById(this._id)[1],i=r.instance.getCfgById(e[t]),n=i[0];if(942!==n&&943!==n||m.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!0)){500!=n?(this.close(),WindowManager.instance.closeAllDialog()):m.notice.SystemNoticeManager.instance.addNotice("请多关注游戏内活动哦",!1);var s=i[3][0];m.commonAlert.PropAlertUtil.skipScene(s)}},n.prototype.removeChildSource=function(){if(this._sourceBtns)for(var t=0;t<this._sourceBtns.length;t++)this.removeChild(this._sourceBtns[t]);if(this._imgs)for(t=0;t<this._imgs.length;t++)this.removeChild(this._imgs[t]),this.removeChild(this._desTxts[t]);this.bgImg.height=this.height=700,this.backTxt.y=750,this.lineimage.y=463,this._baseItem&&(this._baseItem.removeSelf(),this._baseItem=null)},n.prototype.destroy=function(){if(null!=this._sourceBtns){for(var t=0,e=this._sourceBtns;t<e.length;t++)e[t].destroy(!0);this._sourceBtns=null}if(null!=this._imgs){for(var i=0,n=this._imgs;i<n.length;i++)n[i].destroy(!0);this._imgs=null}if(null!=this._desTxts){for(var s=0,o=this._desTxts;s<o.length;s++)o[s].destroy(!0);this._desTxts=null}this._itemBg&&(this._itemBg.destroy(!0),this._itemBg=null),this._itemIcon&&(this._itemIcon.destroy(!0),this._itemIcon=null),this._itemTxt&&(this._itemTxt.destroy(!0),this._itemTxt=null),a.prototype.destroy.call(this)},i=n,t.ComposeEquipGetAlert=i}(modules=modules||{}),function(p){var a,u,t,r,e;function i(){return u.call(this)||this}a=p.commonAlert||(p.commonAlert={}),t=Laya.Text,r=p.player.PlayerModel,u=a.EquipBaseAlert,__extends(i,u),i.prototype.destroy=function(){this._hintTxt.destroy(!0),this._hintTxt=null,u.prototype.destroy.call(this)},i.prototype.initialize=function(){u.prototype.initialize.call(this),this._hintTxt=new t,this._hintTxt.color="#ffffff",this._hintTxt.font="SimHei",this._hintTxt.fontSize=22,this.addChild(this._hintTxt),this.sumScoreImg.visible=this.mySumScoreTxt.visible=this.stoneBox.visible=this.xiLianBox.visible=!1},i.prototype.setOpenParam=function(t){u.prototype.setOpenParam.call(this,t),this.item=t},Object.defineProperty(i.prototype,"item",{set:function(t){var e=t,i=e[0];this.teamIdTest=i;var n=p.common.CommonUtil.getPartById(i),s=CommonUtil.getItemTypeById(i);if(5===s)this.myEquip=r.instance.getEquipByPart(n);else if(8==s){var o=i/1e5>>0;this.myEquip=801==o?p.beast_equipment.BeastEquipmentModel.instance.getEquipByPart(n):817<=o&&o<=822?p.showEquip.ShowEquipModel.instance.getEquipById(i):p.yuanShen.YuanShenModel.instance.getEquipByTypePart(p.yuanShen.YuanShenUtil.getTypeById(i),n)}this.setBaseInfo(e),this.setBaseAttr2(e);var a=this.setBestAttr2(null);0==a?(this.elseBox.y=this.conBox.y,this.bestAttrBox.visible=!1):(this.bestAttrBox.visible=!0,this.elseBox.y=this.conBox.y+this.setConHeight(40+30*a+10)),this.setRank(i)},enumerable:!0,configurable:!0}),i.prototype.setBaseInfo=function(t){u.prototype.setBaseInfo.call(this,t);var e=t[0],i=p.config.ItemEquipCfg.instance.getItemCfgById(e),n=this.myEquip?this.myEquip[3][6]:0,s=t[3],o=(s?s[6]:i[14][0])-n;a.EquipAlertUtil.judgeDiff(o,this.myScoreTxt,this.scoreImg)},i.prototype.setBaseAttr2=function(t){u.prototype.setBaseAttr.call(this,t),this._hintTxt.pos(65,this.conBox.y+37,!0);var e=t[0],i=p.config.ItemEquipCfg.instance.getItemCfgById(e)[8];if(this.myEquip)for(var n=p.config.ItemEquipCfg.instance.getItemCfgById(this.myEquip[0])[8],s=0;s<.5*n.length;s++)this.baseAttrImgs[s].visible=!0,a.EquipAlertUtil.judgeDiff(i[2*s+1]-n[2*s+1],this.myBaseAttrTxts[s],this.baseAttrImgs[s]);else for(s=0;s<this.myBaseAttrTxts.length;s++)this.myBaseAttrTxts[s].color="#cbcade",this.myBaseAttrTxts[s].text="无",this.baseAttrImgs[s].visible=!1},i.prototype.setBestAttr2=function(t,e){for(var i=e?this.myBestAttrTxts:this.bestAttrTxts,n=0,s=i.length;n<s;n++)i[n].visible=!1;var o=p.config.ItemEquipCfg.instance.getItemCfgById(this.itemData[0]),a=[];for(n=0,s=o[13].length;n<s;n++)(r=o[13][n])&&a.push([r,null,null]);for(n=0,s=o[11].length;n<s;n++){var r;(r=o[11][n])&&a.push([r,null,null])}a.length?(this._bestAttrInitY=70,this.setBestAttrByColor(a,0,e,i),this._hintTxt.text="(随机生成"+(o[9]+o[10]+o[12])+"条属性)",this._hintTxt.visible=!0):(this._bestAttrInitY=40,this._hintTxt.visible=!1);var l=0;if(this.myEquip){var h=this.myEquip[3];this._bestAttrInitY=40,l=u.prototype.setBestAttr.call(this,h,"my")}else for(n=0,s=this.myBestAttrTxts.length;n<s;n++)this.myBestAttrTxts[n].visible=!1;var c=a.length?a.length+1:0;return l<=c?c:l},e=i,a.NotGeneratedAlert=e}(modules=modules||{}),function(n){var t,s,e,o,a,i,r,l,h;function c(){return s.call(this)||this}t=n.dungeon||(n.dungeon={}),e=ui.ReviveAlertUI,o=n.config.SceneCfg,a=n.scene.SceneModel,i=Laya.Sprite,r=n.player.PlayerModel,l=n.config.BlendCfg,s=e,__extends(c,s),c.prototype.initialize=function(){s.prototype.initialize.call(this),this.closeOnSide=!1,this._maskSpr=new i,this._maskSpr.pos(137.5,137.5,!0),this.lightCircle.mask=this._maskSpr,this.buffDescTxt.text=l.instance.getCfgById(10502)[3]},c.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.reviveBtn,this,this.reviveHandler)},c.prototype.onOpened=function(){s.prototype.onOpened.call(this);var t=o.instance.getCfgById(a.instance.enterScene[0]);this._reviveType=t[10],this._reviveTime=t[8]+r.instance.playerDeadTime,this._reviveGold=t[9],Laya.timer.loop(1e3,this,this.loopHandler),this._totalTime=-1,this._maskSpr.graphics.clear(),this._maskSpr.graphics.drawCircle(0,0,137.5,"#FF0000"),this.pointImg.x=268,this.pointImg.y=70.5,this.loopHandler();var e=t[7];if(10===e)this.height=this.bgImg.height=510,this.reviveBtn.label="涅槃重生",this.buffDescTxt.visible=!0,this.img1.visible=this.ingotTxt.visible=this.buffDescTxt.visible=this.reviveBtn.visible=0!=this._reviveGold;else{this.height=this.bgImg.height=469,this.reviveBtn.label="立即复活",this.buffDescTxt.visible=!1;var i=0!=this._reviveGold;this.img1.visible=this.ingotTxt.visible=this.reviveBtn.visible=i,!n.union_war.UnionWarModel.instance.ispreliminary()&&55!==e&&56!==e||i||(this.height=this.bgImg.height=306)}},c.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t);var e="",i=o.instance.getCfgById(a.instance.enterScene[0])[7];37!==i&&41!=i&&42!==i&&43!==i&&57!==i||t&&(1==t[2]?e="[玩家]"+t[3]:2==t[2]&&(e="[BOSS]"+t[3])),this.killInfoHtml.style.align="center",this.killInfoHtml.innerHTML="<span style='color:#ffffff;font-size:24px'>您已被</span><span style='color:#e6372e;font-size: 24px'>"+e+"</span><span style='color:#ffffff;font-size: 24px'>击败了!</span>"},c.prototype.onClosed=function(){s.prototype.onClosed.call(this),Laya.timer.clear(this,this.loopHandler)},c.prototype.reviveHandler=function(){this._needGold&&0<this._needGold&&r.instance.ingot<this._needGold?n.common.CommonUtil.noticeError(12107):(10===o.instance.getCfgById(a.instance.enterScene[0])[7]&&(n.threeWorlds.ThreeWorldsModel.instance.specialRevive=!0),n.union_war.UnionWarModel.instance.ispreliminaryFactionMatch()?n.union_war.UnionWarCtrl.instance.reqReviveSourRobot():SceneCtrl.instance.reqRevive(),this.close())},c.prototype.loopHandler=function(){var t=this._reviveTime-GlobalData.serverTime;if(-1===this._totalTime&&(this._totalTime=t),t<=0)Laya.timer.clear(this,this.loopHandler),this.close(),10===o.instance.getCfgById(a.instance.enterScene[0])[7]&&(n.threeWorlds.ThreeWorldsModel.instance.specialRevive=!1),SceneCtrl.instance.reqRevive();else{this._maskSpr.graphics.clear();var e=1-t/this._totalTime*360;this._maskSpr.graphics.drawPie(0,0,137.5,-90+e,-90,"#FF0000"),e=e*Math.PI/180,this.pointImg.pos(268+88*Math.sin(e),158-88*Math.cos(e),!0),t=Math.ceil(.001*t),this.numClip.visible=!0,this.numClip.value=t.toString(),console.log(" this.numClip.value: "+this.numClip.value),1===this._reviveType?(this._needGold=this._reviveGold*t,this.ingotTxt.text=""+this._reviveGold*t):2===this._reviveType&&(this._needGold=this._reviveGold,this.ingotTxt.text=""+this._reviveGold),CommonUtil.adaptationImgAndText([[this.img1,2,0],[this.ingotTxt,1,0]],this.width,3,"center")}},h=c,t.ReviveAlert=h}(modules=modules||{}),function(r){var c,n,t,p,s,o,u,a,h,d,e,m,i;function l(){return null!==n&&n.apply(this,arguments)||this}c=r.intensive||(r.intensive={}),t=ui.IntensiveViewUI,p=r.player.PlayerModel,s=Laya.Image,o=r.bag.BaseItem,u=r.bag.BagModel,a=r.config.IntensiveCfg,h=r.common.CustomClip,d=r.bag.BagUtil,e=r.funcOpen.FuncOpenModel,m=r.config.StrongRefineCfg,n=t,__extends(l,n),l.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=this.centerY=0,this._recordLev={},this._upGradeEffect=[],this._equipPos=[49,210,49,330,49,450,49,570,49,690,569,210,569,330,569,450,569,570,569,690],this._partItems=[],this._intensiveStoneId=m.instance.getCfgByLv(0)[1][0],this._cenItem=new o,this._cenItem.valueDisplay=!1,this._cenItem.pos(307,530),this._cenItem.setNum("","#ffffff"),this._attrNameTxts=[this.pro_1,this.pro_2],this._attrTxts=[this.proNumTxt_1,this.proNumTxt_2],this._upAttrTxts=[this.upProNumTxt_1,this.upProNumTxt_2],this._arrowImgs=[this.arrImg_1,this.arrImg_2],this.addChild(this._cenItem),this._btnClip=h.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this.noEquipBox,this.oneInstenBtn.x-5,this.oneInstenBtn.y-10),this._scheEffect1=h.create("assets/effect/wave.atlas","wave",8),this.conBox1.addChildAt(this._scheEffect1,0),this._scheEffect1.pos(-10,100,!0),this._scheEffect2=h.create("assets/effect/wave.atlas","wave",8),this.conBox2.addChildAt(this._scheEffect2,0),this._scheEffect2.pos(-10,100,!0),this.regGuideSpr(32,this.oneInstenBtn)},l.prototype.onOpened=function(){n.prototype.onOpened.call(this),h.thisPlay(this._scheEffect1),h.thisPlay(this._scheEffect2),this.equipInitedHandler(!0)},l.prototype.close=function(){n.prototype.close.call(this),h.thisStop(this._btnClip),h.thisStop(this._scheEffect1),h.thisStop(this._scheEffect2);for(var t=0,e=this._upGradeEffect.length;t<e;t++){var i=this._upGradeEffect[t];h.thisStop(i)}},l.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.equipInitedHandler,[!0]),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.equipInitedHandler,[!1]),this.onAutoGlobalEvt("BAG_UPDATE",this,this.update),this.onAutoGlobalEvt("INTENSIVE_UPDATE",this,this.update),this.onAutoGlobalEvt("UPGRADE_SUCCESS",this,this.update),this.onAutoGlobalEvt("PURCHASE_REPLY",this,this.update),this.onAutoGlobalEvt("INTENSIVE_SUCCESS",this,this.playUpEff),this.onAutoClick(this.addTipsBtn2,this,this.addTipsBtnHandler,[1]),this.onAutoClick(this.addTipsBtn3,this,this.addTipsBtnHandler,[2]),this.onAutoClick(this.oneInstenBtn,this,this.oneKeyUpGrade),this.onAutoClick(this.instenBtn,this,this.upGrade),this.onAutoClick(this.DSFrameImg,this,this.popAlert,[1]),this.onAutoClick(this.SJFrameImg,this,this.popAlert,[2])},l.prototype.addTipsBtnHandler=function(t){e.instance.getFuncIsOpen(92)?WindowManager.instance.open(93):r.notice.SystemNoticeManager.instance.addNotice(["手镯","戒指","玉佩"][t]+"可通过寻宝获得",!0)},l.prototype.itemClickHandler=function(t){this._currEqiup=t,this._partItems[t-1].addChildAt(this._currFrame,1),this.update()},l.prototype.update=function(){var t=c.IntensiveModel.instance.info;if(t)if(0!=this._partItems.length&&0!=c.IntensiveModel.instance.partLvs.length){this.noEquipBox.visible=!0,this.master(),this.atkValueMsz.value=t[5].toString();var e=p.instance.copper,i=u.instance.getItemCountById(this._intensiveStoneId);h.thisStop(this._btnClip);for(var n=1;n<=10;n++){var s=this._partItems[n-1];if(s){var o=c.IntensiveModel.instance.partLvs[n-1];0<o&&s.setNum(o+"级","#ffffff"),this._recordLev[n]=o;var a=m.instance.getCfgByLv(o),r=a[1],l=a[2];0<r.length&&i>=r[1]&&l<=e?(s.rpImg.visible=!0,h.thisPlay(this._btnClip)):s.rpImg.visible=!1}}this.setResource()}else this.noEquipBox.visible=!1},l.prototype.searchOne=function(){if(0!=this._partItems.length&&0!=c.IntensiveModel.instance.partLvs.length){for(var t=-1,e=0;e<10;e++){var i=c.IntensiveModel.instance.partLvs[e];if(this._partItems[e]){-1===t&&(t=e);var n=m.instance.getCfgByLv(i),s=n[1];if(s[0]&&u.instance.getItemCountById(this._intensiveStoneId)>=s[1]&&p.instance.copper>=n[2])return void this.itemClickHandler(e+1)}}-1!==t&&this.itemClickHandler(t+1)}},l.prototype.setResource=function(){var t=u.instance.getItemCountById(this._intensiveStoneId),e=p.instance.copper;if(this._currEqiup||(this._currEqiup=1),this._partItems[this._currEqiup-1]){var i=this._partItems[this._currEqiup-1].itemData;i&&(this._cenItem.dataSource=i,this._cenItem.setNum(0==this._recordLev[this._currEqiup]?"":this._recordLev[this._currEqiup]+"级","#ffffff"));var n=c.IntensiveModel.instance.partLvs[this._currEqiup-1],s=m.instance.getCfgByLv(n);r.common.AttrUtil.setAttrTxts(m.instance.getAttrsByLvAndPart(n,this._currEqiup),m.instance.getAttrsByLvAndPart(n+1,this._currEqiup),this._attrNameTxts,this._attrTxts,this._arrowImgs,this._upAttrTxts);var o=s[1],a=s[2];0<o.length?(this.manjiText.visible=!1,this.oneInstenBtn.visible=this.instenBtn.visible=!0,this.stoneTxt.visible=this.goldTxt.visible=this.goldImg.visible=this.stoneImg.visible=!0,this.goldTxt.text=a.toString(),this.goldTxt.color=a<=e?"#4c5e8a":"#ff3e3e",this.stoneTxt.text=t+"/"+o[1],this.stoneTxt.color=t>=o[1]?"#4c5e8a":"#ff3e3e",CommonUtil.adaptationImgAndText([[this.goldImg,2,0],[this.goldTxt,1,0],[this.stoneImg,2,0],[this.stoneTxt,1,0]],this.noEquipBox.width,0,"center")):(h.thisStop(this._btnClip),this.manjiText.visible=!0,this.stoneTxt.visible=this.goldTxt.visible=this.goldImg.visible=this.stoneImg.visible=!1,this.oneInstenBtn.visible=this.instenBtn.visible=!1)}},l.prototype.master=function(){var t=c.IntensiveModel.instance.info;if(this.proDotImg_1.visible=t[2],this.proDotImg_2.visible=t[4],t[2])this._scheEffect1.y=-15,this.proTxt_1.text="8/8";else{for(var e=a.instance.getCfgBy_DASHI_Lev(t[1])[2],i=0,n=c.IntensiveModel.instance.partLvs,s=1;s<=10;s++)n[s-1]>=e&&i++;8<i&&(i=8),this.proTxt_1.text=i+"/8",this._scheEffect1.y=100*(1-i/8)}if(this.conTxt1.text="强化大师·"+t[1]+"阶",t[4])this._scheEffect2.y=-15,this.proTxt_2.text="10/10";else{for(e=a.instance.getCfgBy_SHENJIANG_Lev(t[3])[2],i=0,n=c.IntensiveModel.instance.partLvs,s=1;s<=10;s++)n[s-1]>=e&&i++;this.proTxt_2.text=i+"/10",this._scheEffect2.y=100*(1-i/10)}this.conTxt2.text="强化神匠·"+t[3]+"阶"},l.prototype.equipInitedHandler=function(t){var e=p.instance.equipsDic;if(e&&0!=e.keys.length){for(var i=0,n=e.keys.length;i<n;i++)this.setEquip(e.keys[i],e.values[i]);t&&this.searchOne(),this.update()}},l.prototype.setEquip=function(t,e){this._currFrame||(this._currFrame=new s("common/dt_tongyong_29.png"),this._currFrame.pos(-4,-4));var i=this._partItems[t-1];if(e){if(!i){(i=new o).needTip=!1,i.valueDisplay=!1,(this._partItems[t-1]=i).pos(this._equipPos[2*(t-1)],this._equipPos[2*(t-1)+1],!0);var n=h.create("assets/effect/activate.atlas","activate",4,!1);n.autoRemove=!0,(this._upGradeEffect[t]=n).pos(-75,-75,!0)}this.addChildAt(i,3),this.onAutoClick(i,this,this.itemClickHandler,[t]),i.dataSource=e}else i&&i.removeSelf()},l.prototype.destroy=function(){this._currFrame=this.destroyElement(this._currFrame),this._partItems=this.destroyElement(this._partItems),this._upGradeEffect=this.destroyElement(this._upGradeEffect),this._cenItem=this.destroyElement(this._cenItem),this._btnClip=this.destroyElement(this._btnClip),this._scheEffect1=this.destroyElement(this._scheEffect1),this._scheEffect2=this.destroyElement(this._scheEffect2),this._equipPos.length=0,this._equipPos=null,n.prototype.destroy.call(this)},l.prototype.upGrade=function(){this.judgeCanUpgrade(0)&&c.IntensiveCtrl.instance.upGrade(this._currEqiup)},l.prototype.oneKeyUpGrade=function(){this.judgeCanUpgrade(1)&&c.IntensiveCtrl.instance.oneKeyUpGrade()},l.prototype.popAlert=function(t){WindowManager.instance.openDialog(39,t)},l.prototype.playUpEff=function(t){if(0==t)this.playEff(this._currEqiup);else for(var e=0,i=t.length;e<i;e++)this.playEff(t[e])},l.prototype.playEff=function(t){var e=this._upGradeEffect[t];this._partItems[t-1].addChildAt(e,6),h.thisPlay(e)},l.prototype.judgeCanUpgrade=function(t){if(0==t){var e=m.instance.getCfgByLv(c.IntensiveModel.instance.partLvs[this._currEqiup-1]),i=p.instance.copper,n=u.instance.getItemCountById(this._intensiveStoneId);if(e[1][0]||e[2]){var s=e[1][1]-n,o=e[2]-i;if(0<s)return d.openLackPropAlert(this._intensiveStoneId,t?1:s),!1;if(0<o)return d.openLackPropAlert(90330001,t?1:o),!1}return!0}for(var a=99999999999999,r=1,l=1;l<=10;l++){var h=this._recordLev[l];h<a&&(a=h,r=l)}if((e=m.instance.getCfgByLv(c.IntensiveModel.instance.partLvs[r-1]))&&(i=p.instance.copper,n=u.instance.getItemCountById(this._intensiveStoneId),e[1][0]||e[2])){if(s=e[1][1]-n,0<(o=e[2]-i))return d.openLackPropAlert(90330001,t?1:o),!1;if(0<s)return d.openLackPropAlert(this._intensiveStoneId,t?1:s),!1}return!0},i=l,c.IntensivePanel=i}(modules=modules||{}),function(l){var o,e,t,i,n,a,s,r,h;function c(){return null!==e&&e.apply(this,arguments)||this}o=l.dailyDungeon||(l.dailyDungeon={}),t=ui.DailyDungeonUI,i=l.common.BtnGroup,n=l.dungeon.DungeonCtrl,a=l.dungeon.DungeonModel,s=l.bag.BagModel,r=l.common.SimpleList,e=t,__extends(c,e),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),e.prototype.destroy.call(this,t)},c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnGroup=new i,this._btnGroup.setBtns(this.towerBtn,this.dailyBtn,this.runeCopyBtn),this._list=r.create(o.DailyDungeonItem,636,208,1,1,0,2),this._list.width=636,this._list.height=735,this._list.pos(42,105,!0),this.addChildAt(this._list,2),CommonUtil.setHTMLPro(this.mscHtml,"#2c476a","SimHei",22);var t=l.funcOpen.FuncOpenModel.instance.getFuncIsOpen(981);t?(this.mscHtml.style.align="left",this.mscHtml.x=48):(this.mscHtml.style.align="center",this.mscHtml.x=31),this.mscHtml.innerHTML="(一键挑战、一键扫荡可获取<span style='color:#b15315'>当前记录</span>的收益)",this.regGuideSpr(45,this.towerBtn),this.regGuideSpr(47,this.dailyBtn),this.regGuideSpr(52,this.runeCopyBtn),this.activeTxt.visible=t},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeBtnHandler),this.onAutoClick(this.activeTxt,this,this.onGotoWeekCard),this.onAutoClick(this.oneKeyTzBtn,this,this.oneKeyTzBtnHandler),this.onAutoClick(this.oneKeySdBtn,this,this.oneKeySdBtnHandler),this.onAutoGlobalEvt("YIJIAN_SAODANG_UPDATE",this,this.showUI),this.onAutoGlobalEvt("DUNGEON_TIMES_UPDATE",this,this.showUI),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.regAutoRP(this.bigTowerRP,["bigTowerRP"]),this.regAutoRP(this.dailyDungeonRP,["dailyDungeonRP"]),this.regAutoRP(this.runeCopyRP,["runeCopyRP"])},c.prototype.updatePlatChangeRecharge=function(){this.oneKeyTzBtn.visible=this.oneKeySdBtn.visible=!PlatParams.isCloseRecharge},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=1,l.dungeon.DungeonCtrl.instance.getCopyTimes(),this.showUI(),l.weekCard.WeekCardModel.instance.isVip?(this.activeTxt.text="已激活周卡加成",this.activeTxt.underline=!1):(this.activeTxt.text="激活周卡加成",this.activeTxt.underline=!0),PlatParams.isCloseRecharge&&(this.oneKeyTzBtn.visible=this.oneKeySdBtn.visible=!1)},c.prototype.showUI=function(){if(a.instance.timesTable){var t=[[2051,22,0],[2061,23,1],[2071,25,2],[2081,24,3],[2301,219,4],[2311,220,5],[2321,221,6],[2341,223,7],[2331,222,8]];t.sort(this.sortList.bind(this)),this._list.datas=t}},c.prototype.sortList=function(t,e){var i=l.dungeon.DungeonModel.instance.getStateById(t[0]),n=l.dungeon.DungeonModel.instance.getStateById(e[0]),s=t[2],o=e[2],a=l.funcOpen.FuncOpenModel.instance.getFuncIsOpen(t[1]),r=l.funcOpen.FuncOpenModel.instance.getFuncIsOpen(e[1]);return a&&r||!a&&!r?i==n?o<s?1:-1:n<i?-1:1:a&&!r?-1:1},c.prototype.changeBtnHandler=function(){0===this._btnGroup.selectedIndex?WindowManager.instance.open(38):2===this._btnGroup.selectedIndex&&WindowManager.instance.open(139)},c.prototype.onGotoWeekCard=function(){l.weekCard.WeekCardModel.instance.isVip||WindowManager.instance.open(1494)},c.prototype.oneKeyTzBtnHandler=function(){var t=a.instance.getSdMoneyOrCishu(2);if(1==l.zhizun.ZhizunModel.instance.state)if(0!=t[0]){var e="<span style='color:#2c476a'>将</span>\n                            <span style='color:#FF3e3e'>剩余的挑战次数</span>\n                            <span style='color:#2c476a'>全部一键挑战</span>\n                            <span style='color:#2c476a'>,是否确定挑战?</span>";CommonUtil.alert("温馨提示",e,[Handler.create(this,this.TzBtnHandler)],[null],null,!0)}else this.TzBtnHandler();else e="<span style='color:#2c476a'>激活</span>\n                            <span style='color:#b15315'>【至尊特权】</span>\n                            <span style='color:#2c476a'> 可开启一键挑战特权,是否前往激活</span>",CommonUtil.alert("温馨提示",e,[Handler.create(this,this.openZHIZUN_PANEL)],[],null,!0)},c.prototype.oneKeySdBtnHandler=function(){var t=a.instance.getSdMoneyOrCishu(1);1==l.zhizun.ZhizunModel.instance.state?0!=t[0]?PlayerModel.instance.ingot<this.getMoney(1)?this.glodBtnHandler():1===this.getMaxCount()?n.instance.oneKeySweepShilianCopy(1):WindowManager.instance.open(701):this.SdBtnHandler():CommonUtil.alert("温馨提示","<span style='color:#2c476a'>激活</span>\n                            <span style='color:#b15315'>【至尊特权】</span>\n                            <span style='color:#2c476a'>可开启一键扫荡特权,是否前往激活</span>",[Handler.create(this,this.openZHIZUN_PANEL)],[],null,!0)},c.prototype.openZHIZUN_PANEL=function(){WindowManager.instance.open(351)},c.prototype.TzBtnHandler=function(){n.instance.oneKeyChallengeShilianCopy()},c.prototype.SdBtnHandler=function(){var t=a.instance.getSdMoneyOrCishu(1),e=PlayerModel.instance.getCurrencyById(90140001);null==e&&(e=s.instance.getItemCountById(90140001)),e>=t[0]?n.instance.oneKeySweepShilianCopy(1):CommonUtil.goldNotEnoughAlert()},c.prototype.getMaxCount=function(){var t=a.instance.timesTable,e=0;for(var i in t)0<t[i][6]||t[i][8]>e&&(e=t[i][8]);return e},c.prototype.getMoney=function(t){var e=0,i=a.instance.timesTable;for(var n in i)if(!(0<i[n][6])){var s=i[n][8]>t?t:i[n][8];e+=o.DailyDungeonModel.instance.getMapIdAndCoutByMoney(i[n][0],s,i[n][8],i[n][7])}return e},c.prototype.glodBtnHandler=function(){if(!PlatParams.isCloseRecharge)if(0==l.first_pay.FirstPayModel.instance.giveState){var t=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);CommonUtil.alert("温馨提示","元宝不足，是否前往首充？",[t])}else l.money_cat.MoneyCatModel.instance.state?(t=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),CommonUtil.alert("温馨提示","元宝不足，是否前往充值界面充值？",[t])):WindowManager.instance.open(394)},h=c,o.DailyDungeonPanel=h}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("shilian"),e=0,i=t.length;e<i;e++){var n=t[e];this._table[n[0]]=n}},n.prototype.getCfgByLv=function(t){return this._table[t]},i=n,e.ShilianCfg=i}(modules=modules||{}),function(t){var e,s,i,o,a,r,n;function l(){return s.call(this)||this}e=t.dungeon||(t.dungeon={}),i=ui.DungeonDegreeAlertUI,o=t.config.BlendCfg,a=t.config.ShilianCfg,r=t.common.CommonUtil,s=i,__extends(l,s),l.prototype.initialize=function(){s.prototype.initialize.call(this),this._strs=["简单","普通","困难","噩梦","炼狱","深渊","虚空"],r.setHTMLPro(this.descTxt,"#4C5E8A","SimHei",24),this.descTxt.style.lineHeight=28},l.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t);var e,i=t;this.curDegreeTxt.text=this._strs[i[1]-1],this.curDegreeTxt.color=r.getColorByQuality(i[1]),e=i[1]>=this._strs.length?(this.nextStar1.visible=this.nextStar2.visible=this.nextStar3.visible=this.conTxt.visible=!1,this.nextDegreeTxt.text="已达最高难度",this.nextDegreeTxt.color=r.getColorByQuality(1),56):(this.nextStar1.visible=this.nextStar2.visible=this.nextStar3.visible=this.conTxt.visible=!0,this.nextDegreeTxt.text=this._strs[i[1]],this.nextDegreeTxt.color=r.getColorByQuality(i[1]+1),0),this.height=this.bg.height=607-e,this.bg1.y=429-e,this.descTxt.y=452-e,this.tipTxt.y=598-e,this.conTxt.text=this._strs[i[1]-1]+"难度三星通关且Lv"+a.instance.getCfgByLv(i[1])[1]+"以上开启";var n=i[4];this.curStar1.skin=1<=n?"common/icon_tongyong_8.png":"common/icon_tongyong_7.png",this.curStar2.skin=2<=n?"common/icon_tongyong_8.png":"common/icon_tongyong_7.png",this.curStar3.skin=3<=n?"common/icon_tongyong_8.png":"common/icon_tongyong_7.png",2071===i[0]?this.descTxt.innerHTML=o.instance.getCfgById(10316)[2][0]:2081===i[0]?this.descTxt.innerHTML=o.instance.getCfgById(10317)[2][0]:2301===i[0]?this.descTxt.innerHTML=o.instance.getCfgById(10324)[2][0]:2311===i[0]?this.descTxt.innerHTML=o.instance.getCfgById(10325)[2][0]:2321===i[0]?this.descTxt.innerHTML=o.instance.getCfgById(10326)[2][0]:2331===i[0]?this.descTxt.innerHTML=o.instance.getCfgById(10327)[2][0]:2341===i[0]&&(this.descTxt.innerHTML=o.instance.getCfgById(10328)[2][0])},n=l,e.DungeonDegreeAlert=n}(modules=modules||{}),function(a){var t,e,i,n,r,s,l,h,c,o,p;function u(){var t=null!==e&&e.apply(this,arguments)||this;return t._node=0,t._node1=0,t}t=a.commonAlert||(a.commonAlert={}),i=ui.VipTimesAlertUI,n=a.dungeon.DungeonCtrl,r=a.config.PrivilegeCfg,s=a.config.SceneCfg,l=a.common.CustomClip,h=a.vip.VipModel,c=a.common.CommonUtil,o=a.config.BlendCfg,e=i,__extends(u,e),u.prototype.initialize=function(){e.prototype.initialize.call(this),c.setHTMLPro(this.tipsTxt,"#2c476a","SimHei",24,"center"),c.setHTMLPro(this.curTxt,"#9d5119","SimHei",24,"center"),c.setHTMLPro(this.nextTxt,"#9d5119","SimHei",24,"center"),c.setHTMLPro(this.maxTxt,"#9d5119","SimHei",24,"center"),this.maxBox.visible=!1,this._btnClip=l.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,232,512)},u.prototype.close=function(){e.prototype.close.call(this),l.thisStop(this._btnClip)},u.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._openParamObj=null,e.prototype.destroy.call(this)},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.buyHandler),this.onAutoGlobalEvt("UPDATE_PRIVILEGE",this,this.onUpdatePrivilege),this.onAutoGlobalEvt("ARENA_TIMES_UPDATE",this,this.updateTimes),this.onAutoGlobalEvt("LADDER_SCORE_UPDATE",this,this.updateTimes),this.onAutoGlobalEvt("SWEEPING_UPDATE",this,this.updateTimes),this.onAutoGlobalEvt("TEAM_BATTLE_TIMES_UPDATE",this,this.updateTimes),this.onAutoGlobalEvt("YUNMENGMIJING_UPDATE",this,this.updateTimes),this.onAutoGlobalEvt("DUNGEON_BOSS_TIMES_UPDATE",this,this.updateTimes)},u.prototype.updateTimes=function(){if(73==this._type){var t=a.arena.ArenaModel.instance.arenaTimes;this._curTimes=t[2],this._totalTimes=t[1],this.setDate()}else if(69==this._type){var e=a.ladder.LadderModel.instance.tiantiScore;this._curTimes=e[3],this._totalTimes=o.instance.getCfgById(20103)[1][0],this.setDate()}else if(68==this._type)this._totalTimes=o.instance.getCfgById(24002)[1][0],this._curTimes=a.lineClearOut.LineClearOutModel.instance.availableTimes,this.setDate();else if(65==this._type)this._curTimes=a.teamBattle.TeamBattleModel.Instance.remainTimes,this._totalTimes=a.teamBattle.TeamBattleModel.Instance.totalTimes,this.setDate();else if(70==this._type)this._curTimes=a.yunmeng.YunMengMiJingModel.instance.remainTimes,this._totalTimes=a.yunmeng.YunMengMiJingModel.instance.totalCiShu,this.setDate();else if(67==this._type){var i=this.sceneCrossBoss[0],n=s.instance.getCfgById(i);t=DungeonModel.instance.getBossTimesBySceneType(n[7]),this._curTimes=t[2],this._totalTimes=t[1],this.setDate()}else 96==this._type&&(this._curTimes=a.trahman_boss.TrahmanBossModel.instance.nowNum,this._totalTimes=a.trahman_boss.TrahmanBossModel.instance.maxNUm,this.setDate())},u.prototype.onUpdatePrivilege=function(){this._openParamObj&&this._openParamObj.buyTimes++,this.setDate()},u.prototype.setOpenParam=function(t){this._openParamObj=null,e.prototype.setOpenParam.call(this,t),null!=t&&("number"==typeof t?this._type=t:"object"==typeof t&&(67==t.type?this.sceneCrossBoss=t.sceneCrossBoss:this._openParamObj=t,this._type=t.type),this.maxLimit.visible=!1,this._btnClip.visible=!1,8==this._type||14==this._type||15==this._type?(this.backTxt.y=526,this.bg.height=522,this.height=522,this.btnBox.visible=!1,this.honmeBossReward()):13==this._type?(this.backTxt.y=526,this.bg.height=522,this.height=522,this.btnBox.visible=!1,this.xianDanCount()):(this.backTxt.y=659,this.bg.height=655,this.height=655,this.btnBox.visible=!0,2==this._type?this.addBagGrids():(this.updateTimes(),this.setDate())))},u.prototype.addBagGrids=function(){if(this._vipLevel=h.instance.vipLevel,null!=this._vipLevel){this.MoneyBox.visible=!1;var t=r.instance.getVipMaxLevel();if(this._vipLevel<=t){this._nextVipLevel=this._vipLevel+1;var e=r.instance.getVipInfoByLevel(this._vipLevel,2),i=r.instance.getVipInfoByLevel(this._nextVipLevel,2),n=void 0;n=0==this._vipLevel?0:e[1];for(var s=i[1];n==s&&this._nextVipLevel<t;)this._nextVipLevel++,this._nextVipLevel==t&&(this._nextVipLevel=t),s=(i=r.instance.getVipInfoByLevel(this._nextVipLevel,2))[1];this.tipsTxt.innerHTML="提升至<span style='color:rgb(14,207,9)'>SVIP"+this._nextVipLevel+"</span>可以增加背包容量",this.vipShowItem.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._vipLevel),this.vipShowItem1.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._nextVipLevel),this.curTxt.innerHTML="装备背包增加"+n+"格",this.nextTxt.innerHTML="装备背包增加"+s+"格",this.buyBtn.label="前往购买"}}},u.prototype.honmeBossReward=function(){this._vipLevel=h.instance.vipLevel;var t=r.instance.getMinLvMaxLvByType(this._type);this._minLv=t[0],this._maxLv=t[1],this.MoneyBox.visible=!1,this._vipLevel<this._minLv?this._nextVipLevel=this._minLv:this._nextVipLevel=r.instance.getNextLevel(this._vipLevel,this._type);var e,i,n,s=r.instance.getVipInfoByLevel(this._vipLevel,this._type),o=r.instance.getVipInfoByLevel(this._nextVipLevel,this._type);8===this._type?(e="开启",i="额外开启",n="已达到最大开启上限"):14!==this._type&&15!==this._type||(i=e="购买",n="已达最大购买次数"),this._vipLevel<this._maxLv?(this.tipsTxt.innerHTML="提升至<span style='color:rgb(45,106,56);font-size: 26px;'>SVIP"+this._nextVipLevel+"</span>可以增加"+e+"次数",this.vipShowItem.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._vipLevel),this.vipShowItem1.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._nextVipLevel),this.curTxt.innerHTML="每日可"+i+"<span style='color:rgb(45,106,56);font-size: 26px'>"+(s?s[1]:0)+"</span>次",this.nextTxt.innerHTML="每日可"+i+"<span style='color:rgb(45,106,56);font-size: 26px'>"+(o?o[1]:0)+"</span>次",this.maxBox.visible=!1,this.upBox.visible=!0):(this.vipShowItem3.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._vipLevel),this.maxTxt.innerHTML="每日可"+i+"<span style='color:rgb(45,106,56);font-size: 26px'>"+(s?s[1]:0)+"</span>次",this.upBox.visible=!1,this.maxBox.visible=!0,this.maxLimit.visible=!0,this.maxLimit.text=n)},u.prototype.getNode=function(t){for(var e=0,i=t.length;e<i;e+=2){var n=t[e];if(this._vipLevel<n)return this._nextVipLevel=t[e],this._node=t[e-1],void(this._node1=t[e+1])}this._node=t[t.length-1]},u.prototype.xianDanCount=function(){this._vipLevel=h.instance.vipLevel;var t=o.instance.getCfgById(50001)[1];this._minLv=t[0],this._maxLv=t[t.length-2],this.MoneyBox.visible=!1,this.getNode(t),this._vipLevel<this._maxLv?(this.tipsTxt.innerHTML="提升至<span style='color:rgb(45,106,56);font-size: 26px;'>SVIP"+this._nextVipLevel+"</span>可以增加服用次数",this.vipShowItem.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._vipLevel),this.vipShowItem1.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._nextVipLevel),this.curTxt.innerHTML="每日可额外服用<span style='color:rgb(45,106,56);font-size: 26px'>"+(this._node?this._node:0)+"</span>次",this.nextTxt.innerHTML="每日可额外服用<span style='color:rgb(45,106,56);font-size: 26px'>"+(this._node1?this._node1:0)+"</span>次",this.maxBox.visible=!1,this.upBox.visible=!0):(this.vipShowItem3.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._vipLevel),this.maxTxt.innerHTML="每日可额外服用<span style='color:rgb(45,106,56);font-size: 26px'>"+(this._node?this._node:0)+"</span>次",this.upBox.visible=!1,this.maxBox.visible=!0,this.maxLimit.visible=!0)},u.prototype.setSVIPandVIP=function(t,e,i){if(1<=i)e.skin="common/image_common_svip.png",t.skin="common/num_common_svip.png",t.sheet="0123456789",t.value=i.toString(),t.x=65;else{var n=a.vip_new.VipNewModel.instance.getVipLevelTrue();t.visible=!0,e.skin="common/image_common_vip.png",t.skin="common/num_common_vip.png",t.sheet="0123456789",t.value=n.toString(),t.x=61}},u.prototype.setDate=function(){this._vipLevel=h.instance.vipLevel;var t=h.instance.getPrivilegeInfoById(this._type);if(t||this._openParamObj){t?(this.buyTimes=t[1],this._mapId=t[2]):this._openParamObj&&(this.buyTimes=this._openParamObj.buyTimes,this._mapId=this._openParamObj.mapId);var e=r.instance.getMinLvMaxLvByType(this._type);this._minLv=e[0],this._maxLv=e[1],this._vipLevel<this._minLv?(this._nextVipLevel=this._minLv,this.buyBtn.label="前往提升",this.MoneyBox.visible=!1):(this._nextVipLevel=r.instance.getNextLevel(this._vipLevel,this._type),this.buyBtn.label="购买次数",this.MoneyBox.visible=!0);var i=r.instance.getVipInfoByLevel(this._vipLevel,this._type),n=r.instance.getVipInfoByLevel(this._nextVipLevel,this._type);if(this.setRedDot(this.buyTimes,i),this._vipLevel<this._maxLv){if(this.tipsTxt.innerHTML="提升至<span style='color:rgb(45,106,56);font-size: 26px;'>SVIP"+this._nextVipLevel+"</span>可以增加购买次数",this.vipShowItem.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._vipLevel),this.vipShowItem1.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._nextVipLevel),this.curTxt.innerHTML="每日可购买<span style='color:rgb(45,106,56);font-size: 26px'>"+(i?i[1]:0)+"</span>次",this.nextTxt.innerHTML="每日可购买<span style='color:rgb(45,106,56);font-size: 26px'>"+(n?n[1]:0)+"</span>次",1==this.MoneyBox.visible){var s=r.instance.getCostByLevel(this._nextVipLevel,this._type)[1];this.buyTimes<=i[1]&&(this.buyTimes>=s.length?this.costTxt.text=s[s.length-1][1].toString():this.costTxt.text=s[this.buyTimes][1].toString()),this.boughtTxt.text=this.buyTimes+"/"+i[1],this.buyTimes==i[1]?this.boughtTxt.color=c.getColorByQuality(5):this.boughtTxt.color="#2c476a"}this.maxBox.visible=!1,this.upBox.visible=!0}else{if(this.vipShowItem3.setSVIPandVIP(a.vip_new.VipNewModel.instance.getVipLevelTrue(),this._vipLevel),this.maxTxt.innerHTML="每日可购买<span style='color:rgb(45,106,56);font-size: 26px'>"+(i?i[1]:0)+"</span>次",1==this.MoneyBox.visible){s=r.instance.getCostByLevel(this._vipLevel,this._type)[1];var o=i[1];this.buyTimes<=o&&(this.buyTimes>=s.length?this.costTxt.text=s[s.length-1][1].toString():this.costTxt.text=s[this.buyTimes][1].toString()),this.boughtTxt.text=this.buyTimes+"/"+i[1],this.buyTimes==i[1]?this.boughtTxt.color=c.getColorByQuality(5):this.boughtTxt.color="#2c476a"}this.upBox.visible=!1,this.maxBox.visible=!0}}},u.prototype.setRedDot=function(t,e){var i,n=this._openParamObj?this._openParamObj.buyTimes:h.instance.getPrivilegeInfoById(this._type)[1],s=0;if(i=null==e?0:e[1],e){var o=r.instance.getCostByLevel(this._vipLevel,this._type)[1],a=this.getConsume(o,n);if(!a)return void l.thisStop(this._btnClip);s=a[1]}73==this._type||69==this._type||68==this._type||65==this._type||70==this._type||67==this._type||96==this._type?t<i&&0!=i&&PlayerModel.instance.ingot>=s&&this._curTimes<this._totalTimes?l.thisPlay(this._btnClip):l.thisStop(this._btnClip):t<i&&0!=i&&PlayerModel.instance.ingot>=s?l.thisPlay(this._btnClip):l.thisStop(this._btnClip)},u.prototype.getConsume=function(t,e){return t[e]||this.getConsume(t,--e)},u.prototype.buyHandler=function(){var t=h.instance.vipLevel;if(!this._minLv&&0!==this._minLv||t<this._minLv)c.gotoVIP(),this.close();else{if((73==this._type||69==this._type||68==this._type||65==this._type||70==this._type||67==this._type||96==this._type)&&this._curTimes>=this._totalTimes)return void a.notice.SystemNoticeManager.instance.addNotice("剩余挑战次数已达上限，无法购买",!0);if(68==this._type)Channel.instance.publish(2099953,null);else{var e=s.instance.getCfgById(this._mapId)[7];n.instance.buyTimes(e)}}},p=u,t.VipTimesAlert=p}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){return i.call(this)||this}e=t.dailyDungeon||(t.dailyDungeon={}),n=ui.CoinWinViewUI,s=t.config.BlendCfg,o=t.dungeon.DungeonModel,a=t.dungeon.DungeonCtrl,r=t.scene.SceneModel,i=n,__extends(h,i),h.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),this.onAutoGlobalEvt("DUNGEON_UPDATE_INCOME_RECORD",this,this.recordUpdate),Laya.timer.loop(1e3,this,this.loopHandler)},h.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},h.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.recordImg.visible=!1,this.recordUpdate(),this._duration=s.instance.getCfgById(10303)[1][0],this.loopHandler();var t=r.instance.enterScene[0];2051===t?this.coinImg1.skin=this.coinImg2.skin="common/icon_tongyong_1.png":2061===t&&(this.coinImg1.skin=this.coinImg2.skin="common/icon_tongyong_10.png")},h.prototype.recordUpdate=function(){var t=o.instance.updateIncomeRecord;if(t){var e=t[0];this.coinTxt1.text=Math.ceil(e[1])+"";var i=t[1];this.coinTxt2.text=Math.ceil(i[1])+"",this.recordImg.visible=e[1]>i[1]}},h.prototype.close=function(t,e){i.prototype.close.call(this,t,e),a.instance.reqEnterScene(0)},h.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},l=h,e.CoinWinPanel=l}(modules=modules||{}),function(I){var b,i,t,e,C,n,s,T,o;function a(){return i.call(this)||this}b=I.dailyDungeon||(I.dailyDungeon={}),t=ui.PetWinViewUI,e=I.config.BlendCfg,C=I.bag.BagItem,n=I.dungeon.DungeonModel,s=I.dungeon.DungeonCtrl,T=I.funcOpen.FuncOpenModel,i=t,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._bagItems=new Array,this._lblGotos=[],this._unusedGotos=[],this._panel=new Laya.Panel,this._panel.width=512,this._panel.height=190,this._panel.vScrollBarSkin="",this._panel.x=0,this._panel.y=611,this._content=new Laya.Sprite,this._panel.addChild(this._content),this.addChild(this._panel)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_WIN_EXTRA_AWARDS",this,this.updateWinExtraAwards),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=e.instance.getCfgById(10303)[1][0],this.loopHandler();var t=n.instance.broadcastCopyStar?n.instance.broadcastCopyStar[0]:3;this.star1.skin=1<=t?"dungeon/zs_shilian_4.png":"dungeon/zs_shilian_5.png",this.star2.skin=2<=t?"dungeon/zs_shilian_4.png":"dungeon/zs_shilian_5.png",this.star3.skin=3<=t?"dungeon/zs_shilian_4.png":"dungeon/zs_shilian_5.png"},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._showItems=t,this.updateAwards()},a.prototype.updateWinExtraAwards=function(){this.updateAwards()},a.prototype.updateAwards=function(){this.clearLabelGotos();for(var t=0,e=this._bagItems.length;t<e;t++)this._bagItems[t].removeSelf();if(this._content.height=0,this._showItems){var i=this._showItems.concat(),n=b.DailyDungeonModel.instance.extraAwards,s=[],o=T.instance.getFuncIsOpen(981);for(var a in n)for(var r=parseInt(a),l=n[r],h=(t=0,l.length);t<h;t++){o&&451==r&&s.push(i.length);var c=l[t];i.push([c[2],c[1],null,null])}var p=23,u=!1,d=1<i.length?140*Math.min(3,i.length)-40:100,m=this.bgImg.width-d>>1,f=I.weekCard.WeekCardModel.instance.isVip&&o;for(t=0,e=i.length;t<e;t++){var g=this._bagItems[t];g||(g=new C,this._bagItems.push(g)),g.dataSource=i[t],g.hideFlag(),this._panel.addChild(g);var y=t%3;g.pos(140*y+m,p);var _=!1;if(-1!=s.indexOf(t)&&(g.showFlag("周卡",24),_=!0),_&&!f){var v=this.getLabelGoto();this._panel.addChild(v),v.x=g.x+(g.width-v.textField.textWidth>>1),v.y=g.y+125,u=!0}2==y&&t<e-1&&(p+=125,u&&(u=!1,p+=32))}p=Math.min(p,180),this.bgImg.height=210+p,this._panel.height=this.bgImg.height-40,this._content.height=this._panel.contentHeight+20,this.okBtn.y=this.bgImg.y+this.bgImg.height+33,this.height=this.bgImg.y+this.bgImg.height+109}},a.prototype.close=function(t,e){i.prototype.close.call(this,t,e),s.instance.reqEnterScene(0)},a.prototype.getLabelGoto=function(){var t;return this._unusedGotos.length?(t=this._unusedGotos.shift()).visible=!0:(t=CommonUtil.createLabel("前往激活","#ff3e3e",22),this.onAutoClick(t,this,this.gotoWeekCard),t.underline=!0),this._lblGotos.push(t),t},a.prototype.clearLabelGotos=function(){var n=this;this._lblGotos.forEach(function(t,e,i){t.visible=!1,t.removeSelf(),n._unusedGotos.push(t)}),this._lblGotos=[]},a.prototype.gotoWeekCard=function(){WindowManager.instance.open(1494),this.close()},a.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},a.prototype.destroy=function(){if(this._bagItems){for(var t=0,e=this._bagItems;t<e.length;t++)e[t].destroy();this._bagItems=null}this._panel=this.destroyElement(this._panel),i.prototype.destroy.call(this)},o=a,b.PetWinPanel=o}(modules=modules||{}),function(t){var e,i;function n(){this._shakeNum=0,this._waitNum=0}e=t.common||(t.common={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.exe=function(t,e,i,n){this._shakeNum=0,this._waitNum=0,this._intensity=e,this._target=t,this._radius=i,this._spaceTime=n,this.changeRotation()},n.prototype.clear=function(){Laya.timer.clearAll(this),this._target&&(this._target.rotation=0,this._target=void 0)},n.prototype.changeRotation=function(){this._shakeNum++;var t=this._shakeNum%3;0==t?(this._target.rotation=0,Laya.timer.clear(this,this.changeRotation),this._waitNum++,this._waitNum%2==0?Laya.timer.once(this._spaceTime,this,this.changeRotation):Laya.timer.once(this._intensity,this,this.changeRotation)):1==t?(this._target.rotation=this._radius,Laya.timer.clear(this,this.changeRotation),Laya.timer.once(this._intensity,this,this.changeRotation)):2==t&&(this._target.rotation=-this._radius,Laya.timer.clear(this,this.changeRotation),Laya.timer.once(this._intensity,this,this.changeRotation)),99==this._shakeNum&&(this._shakeNum=0)},i=n,e.ShakeUtils=i}(modules=modules||{}),function(c){var t,o,e,p,u,a,i,n,s,r;function l(){return o.call(this)||this}t=c.dailyDungeon||(c.dailyDungeon={}),e=ui.CoinRBViewUI,p=Laya.Image,u=Laya.Text,a=c.dungeon.DungeonModel,i=c.scene.SceneModel,n=utils.tween.TweenGroup,s=c.common.ShakeUtils,o=e,__extends(l,o),l.prototype.initialize=function(){o.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=240,this.layer=3,this.closeByOthers=!1,this._coinImgs=new Array,this._coinTxts=new Array,this._incomes=new Array,this._tweenGroup=new n},l.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.inspireBtn,this,this.inspireHandler),this.onAutoGlobalEvt("DUNGEON_BROADCAST_COPY_INCOME",this,this.incomeUpdate),this.onAutoGlobalEvt("DUNGEON_INSPIRE_UPDATE",this,this.updateInspire),Laya.timer.loop(240,this,this.loopHandler)},l.prototype.offEvt=function(){o.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},l.prototype.onOpened=function(){o.prototype.onOpened.call(this),this.killNumTxt.text="0",this.coinTxt.text="0";var t=i.instance.enterScene[0];2051===t?(this.nameTxt.text="金币副本",this.coinDescTxt.text="累积金币：",this._skinUrl="common/icon_tongyong_1.png"):2061===t&&(this.nameTxt.text="真气副本",this.coinDescTxt.text="累积真气：",this._skinUrl="common/icon_tongyong_10.png"),s.instance.exe(this.inspireBtn,80,9,800),this.addGuide(),this.updateInspire()},l.prototype.addGuide=function(){var t=this.guideMc.x;this.guideMc.visible=!0,this._tween?this._tween&&(this._tween.stop(),this._tween=null):this._tween=TweenJS.create(this.guideMc).to({x:t+40},750).yoyo(!0).repeat(Number.MAX_VALUE).start()},l.prototype.removeGuide=function(){this.guideMc.visible=!1,this._tween&&(this._tween.stop(),this._tween=null)},l.prototype.close=function(){this._tweenGroup&&this._tweenGroup.removeAll(),o.prototype.close.call(this),this._incomes.length=0,s.instance.clear()},l.prototype.inspireHandler=function(){WindowManager.instance.openDialog(77,2),this.removeGuide()},l.prototype.incomeUpdate=function(){var t=a.instance.broadcastCopyIncome;if(t){this.killNumTxt.text=t[2]+"",this.coinTxt.text=Math.round(t[1][1])+"";var e,i=t[0][1];i&&0<i&&this._incomes.push([i,0]);var n=t[3];if(n&&0<n.length)for(var s=0,o=n.length;s<o;s++)(e=n[s][1])&&0<e&&this._incomes.push([e,1]);(i=t[5]?t[5][1]:0)&&this._incomes.push([i,2])}},l.prototype.loopHandler=function(){var t=this;if(this._incomes&&0!==this._incomes.length){var e=this._incomes.shift();if(e){var i=e[0],n=void 0,s=void 0;switch(e[1]){case 1:n=!0;break;case 2:s=!0}var o=0<this._coinImgs.length?this._coinImgs.shift():new p;o.skin=this._skinUrl,this.addChild(o);var a=316,r=c.festival.FestivalModel.instance.isXIanYu();r[2]?o.pos(258,a,!0):o.pos(292,a,!0),TweenJS.create(o,this._tweenGroup).to({y:a-110},800).chain(TweenJS.create(o,this._tweenGroup).to({y:a-180,alpha:.6},400).onComplete(function(){o.skin="",o.removeSelf(),o.alpha=1,t._coinImgs.push(o)})).start();var l=0<this._coinTxts.length?this._coinTxts.shift():new u;this.addChild(l),a+=8,r[2]?l.pos(300,a,!0):l.pos(334,a,!0);var h="";n&&(h+="(活动)"),s&&(h+="(周卡)"),l.text="+"+Math.ceil(i)+h,l.color="#44ff63",l.fontSize=28,l.stroke=4,l.strokeColor="#000000",TweenJS.create(l,this._tweenGroup).to({y:a-110},800).chain(TweenJS.create(l,this._tweenGroup).to({y:a-180,alpha:.6},400).onComplete(function(){l.text="",l.removeSelf(),l.alpha=1,t._coinTxts.push(l)})).start()}}},l.prototype.updateInspire=function(){if(a.instance.inspires){for(var t=a.instance.inspires,e=0,i=0,n=t.length;i<n;i++)e+=t[i][2];this.inspireTxt.text="攻击+"+(100*e).toFixed(0)+"%",100<=Number((100*e).toFixed(0))&&s.instance.clear()}},l.prototype.destroy=function(t){if(void 0===t&&(t=!0),this._coinImgs){for(var e=0,i=this._coinImgs;e<i.length;e++)i[e].destroy(!0);this._coinImgs=null}if(this._coinTxts){for(var n=0,s=this._coinTxts;n<s.length;n++)s[n].destroy(!0);this._coinTxts=null}o.prototype.destroy.call(this,t)},r=l,t.CoinRBPanel=r}(modules=modules||{}),function(t){var e,n,i,s,o,a;function r(){return n.call(this)||this}e=t.dailyDungeon||(t.dailyDungeon={}),i=ui.PetRBViewUI,s=t.scene.SceneModel,o=t.dungeon.DungeonModel,n=i,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this.zOrder=-1,this.centerX=0,this.bottom=240,this.layer=3,this.closeByOthers=!1,this._strs=["简单","普通","困难","噩梦","炼狱","深渊","虚空"]},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BROADCAST_COPY_MONSTER_WARE",this,this.wareUpdate)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this);var t=s.instance.enterScene[0],e=o.instance.timesTable[t],i=this._strs[e[1]-1];2071===t?this.nameTxt.text="仙器副本("+i+")":2081===t?this.nameTxt.text="灵宠副本("+i+")":2301===t?this.nameTxt.text="神兵副本("+i+")":2311===t?this.nameTxt.text="仙翼副本("+i+")":2321===t?this.nameTxt.text="时装副本("+i+")":2331===t?this.nameTxt.text="天珠副本("+i+")":2341===t&&(this.nameTxt.text="洗炼副本("+i+")"),this.wareNumTxt.text=""},r.prototype.wareUpdate=function(){var t=o.instance.broadcastCopyMonsterWare;if(t){var e=t[0][1],i=t[0][0];this.wareNumTxt.text=i-e+1+"/"+i}},a=r,e.PetRBPanel=a}(modules=modules||{}),function(e){var i,n,t,s,o;function a(){return n.call(this)||this}i=e.dungeon||(e.dungeon={}),t=Laya.Text,s=e.scene.SceneUtil,n=BaseView,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),this.layer=3,this.closeByOthers=!1,this._txt=new t,this.addChild(this._txt),this._txt.width=300,this._txt.color="#FDF6B8",this._txt.fontSize=60,this._txt.stroke=3,this._txt.strokeColor="#9E5D3A",this._txt.align="center",this.width=300,this.height=62,this.centerX=0,this.top=310,this._txt.text=""},a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BROADCAST_BEGIN_COMBAT",this,this.beginHandler),40!==s.currScene&&52!==s.currScene||(this.onAutoGlobalEvt("UPDATE_SCENE_JUMP_LEVEL",this,this.beginHandler),this.onAutoGlobalEvt("EMPTY_SCENE_READY",this,this.beginHandler)),Laya.timer.loop(1e3,this,this.loopHandler)},a.prototype.offEvt=function(){n.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},a.prototype.setOpenParam=function(t){void 0===t&&(t=310),n.prototype.setOpenParam.call(this,t),this.top=t},a.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._txt.text="",this.beginHandler()},a.prototype.beginHandler=function(){var t=i.DungeonModel.instance.broadcastBeginCombat;if(t){if(40===e.scene.SceneUtil.currScene||52===e.scene.SceneUtil.currScene){if(this._time=t[0],WindowManager.instance.isOpened(22)||WindowManager.instance.isOpened(23))return void this.close()}else this._time=t[0]+GlobalData.serverTime;this.loopHandler()}},a.prototype.loopHandler=function(){void 0!==this._time&&(this._time<GlobalData.serverTime?this.close():this._txt.text=e.common.CommonUtil.timeStampToMMSS(this._time))},o=a,i.EndTimePanel=o}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return i.call(this)||this}t=e.dailyDungeon||(e.dailyDungeon={}),n=ui.PetLTViewUI,s=e.dungeon.DungeonModel,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.left=0,this.top=300,this.layer=3,this.closeByOthers=!1,CommonUtil.setHTMLPro(this.txt,"#FFFFFF","SimHei",26,"center"),this.txt.style.lineHeight=28},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BROADCAST_COPY_STAR",this,this.starUpdate),Laya.timer.loop(1e3,this,this.loopHandler)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._star=3,this._restTime=-1,this.txt.innerHTML="",this.star1.visible=this.star2.visible=this.star3.visible=!0,this.star1.pos(32,10,!0),this.star2.pos(13,44,!0),this.star3.pos(52,44,!0)},a.prototype.starUpdate=function(){var t=s.instance.broadcastCopyStar;if(t){this._restTime=t[1]+GlobalData.serverTime,this.loopHandler();var e=t[0];3===(this._star=e)?(this.star1.visible=this.star2.visible=this.star3.visible=!0,this.star1.pos(32,10,!0),this.star2.pos(13,44,!0),this.star3.pos(52,44,!0)):2===e?(this.star1.visible=this.star2.visible=!0,this.star3.visible=!1,this.star1.pos(11,32,!0),this.star2.pos(53,32,!0)):1===e&&(this.star1.visible=!0,this.star2.visible=this.star3.visible=!1,this.star1.pos(32,32,!0))}},a.prototype.loopHandler=function(){if(!(this._restTime<=GlobalData.serverTime)){var t=e.common.CommonUtil.msToMMSS(this._restTime-GlobalData.serverTime);this.txt.innerHTML='<span style="color:#50ff28">'+t+'</span>后降为<span style="color:#ffec7c">'+(this._star-1)+"星评价</span>"}},o=a,t.PetLTPanel=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.dungeon||(t.dungeon={}),n=Laya.Image,s=utils.tween.TweenGroup,i=BaseView,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.layer=3,this.closeByOthers=!1,this._bg=new n("dungeon/bj_tongyong_4.png"),this.addChild(this._bg),this._txtImg=new n("dungeon/bj_tongyong_3.png"),this.addChild(this._txtImg),this._txtImg.size(240,102),this._txtImg.anchorX=this._txtImg.anchorY=.5,this.width=492,this.height=185,this.top=150,this.left=0,this._tweenGroup=new s},a.prototype.onOpened=function(){var t=this;i.prototype.onOpened.call(this),this._bg.pos(-500,0,!0),this._txtImg.pos(296,103,!0),this._txtImg.visible=!1,this._txtImg.scale(1,1,!0),TweenJS.create(this._bg,this._tweenGroup).to({x:0},300).chain(TweenJS.create(this._bg,this._tweenGroup).to({x:-500},300).delay(1e3)).start(),TweenJS.create(this._txtImg,this._tweenGroup).delay(300).onComplete(function(){t._txtImg.visible=!0}).chain(TweenJS.create(this._txtImg,this._tweenGroup).to({scaleX:1.2,scaleY:1.2},250).chain(TweenJS.create(this._txtImg,this._tweenGroup).to({scaleX:1,scaleY:1},250).chain(TweenJS.create(this._txtImg,this._tweenGroup).delay(500).to({x:-204},300).onComplete(function(){t.close()})))).start()},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._tweenGroup=this.destroyElement(this._tweenGroup),i.prototype.destroy.call(this,t)},a.prototype.close=function(){this._tweenGroup.removeAll(),i.prototype.close.call(this)},o=a,e.DungeonEnterEffect=o}(modules=modules||{}),function(p){var t,u,e;function i(){this.init()}t=p.config||(p.config={}),u=laya.utils.Dictionary,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._resolveCfgs=new Array,this._idDic=new u,this._deIdDic=new u,this._gemIdDic=new u,this._tsClassComposeCfgs={},this._tsClassResolveCfgs={},this._composeCfgs=[],this._tab={},this.tIds=p.config.BlendCfg.instance.getCfgById(61004)[1];for(var t=GlobalData.getConfig("item_compose"),e=0,i=t.length;e<i;e++){var n=(c=t[e])[3][0],s=c[4][0];-1!==this.tIds.indexOf(n)&&(this._tsClassComposeCfgs[n]||(this._tsClassComposeCfgs[n]={},this._composeCfgs[n]=[]),this._tsClassComposeCfgs[n][s]||(this._tsClassComposeCfgs[n][s]=[]),this._tsClassComposeCfgs[n][s].push(c),this._composeCfgs[n].push(c),this._idDic.set(n,this._composeCfgs[n]),this._tab[c[0]]=c)}var o=GlobalData.getConfig("item_resolve");for(e=0,i=o.length;e<i;e++){var a=o[e],r=a[1][0],l=a[3][0];1==r&&(this._tsClassResolveCfgs[r]||(this._tsClassResolveCfgs[r]={},this._resolveCfgs[r]=[]),this._tsClassResolveCfgs[r][l]||(this._tsClassResolveCfgs[r][l]=[]),this._resolveCfgs[r].push(a),this._tsClassResolveCfgs[r][l].push(a),this._deIdDic.set(r,this._resolveCfgs[r]))}var h=GlobalData.getConfig("gem_refine");for(e=0;e<h.length;e++){var c=h[e];this._gemIdDic.set(c[0],c)}},i.prototype.getResolveCfgBySclass=function(t,e){return this._tsClassResolveCfgs[t]?this._tsClassResolveCfgs[t][e]:null},i.prototype.getComposeCfgBySclass=function(t,e){return this._tsClassComposeCfgs[t]?this._tsClassComposeCfgs[t][e]:null},i.prototype.getComposeTclassLength=function(){return this._composeCfgs},i.prototype.getResolveTclassLength=function(){return this._resolveCfgs},i.prototype.getGemRefineCfgById=function(t){return this._gemIdDic.get(t)},i.prototype.getCfgById=function(t){return this._tab[t]},e=i,t.ComposeCfg=e}(modules=modules||{}),function(t){var o,n,i,s,a,r,l,h,e;function c(){return null!==n&&n.apply(this,arguments)||this}o=t.compose||(t.compose={}),i=t.config.ComposeCfg,s=t.common.CustomList,a=Laya.Point,r=t.common.CustomClip,l=t.common.CommonUtil,h=function(t,e){this.item=t,this.uid=e},n=ui.ComposeEquipAlertUI,__extends(c,n),c.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._composeClip=this.destroyElement(this._composeClip),n.prototype.destroy.call(this)},c.prototype.initialize=function(){n.prototype.initialize.call(this),this._showIds=new Array,this._itemPitArr=new Array,this._list=new s,this._list.width=143,this._list.height=600,this._list.hCount=1,this._list.spaceY=2,this._list.itemRender=o.ComposeEquipItem,this._list.x=33,this._list.y=84,this.addChild(this._list),this._compose=new o.ComposeItem,this._compose.pos(356,213),this._compose.needTip=!0,this.addChild(this._compose),this._startPos=[new a(266,436),new a(468,436),new a(229,550),new a(367,550),new a(507,550)];for(var t=0;t<5;t++){var e=new o.ComposeItem;e._qualityBg.skin="compose/btn_tanchuang_01.png",e.pos(this._startPos[t].x,this._startPos[t].y),e.dataSource=null,e.scale(.8,.8),e.needTip=!1,this.addChild(e);var i=new h(e,null);this._itemPitArr.push(i)}this._stoneDia=new o.ComposeAddAlert,this._composeClip=r.create("assets/effect/btn_light.atlas","btn_light",16),this._composeClip.setProperty(this,this.useBtn.x-5,this.useBtn.y-9)},c.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t),this.tclass=t[0],this.sclass=t[1],this.updateList()},c.prototype.updateList=function(){this._showIds.length=0;for(var t=i.instance.getComposeCfgBySclass(this.tclass,this.sclass),e=0;e<t.length;e++)this._showIds.push(t[e]);this._list.datas=this._showIds,this._list.selectedIndex=-1,this._list.selectedIndex=0,this.selectHandler()},c.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.allAddBtn,this,this.allAddHandler),this.onAutoClick(this.useBtn,this,this.useHandler),this.onAutoClick(this._list,this,this.selectHandler);for(var t=0;t<this._itemPitArr.length;t++)this.onAutoClick(this._itemPitArr[t].item,this,this.addDiolg,[t]);this.onAutoGlobalEvt("ADD_EQUIP",this,this.updatePitArr),this.onAutoGlobalEvt("COMPOSE_REPLY",this,this.composeReply)},c.prototype.composeReply=function(){var t=o.ComposeModel.instance.ComposeReply[0];0!=t?(l.noticeError(t),17004==t&&this.updateList()):(WindowManager.instance.openDialog(67,["合成成功",[this._itemId,""]]),this.updateList())},c.prototype.updatePitArr=function(){var t=o.ComposeModel.instance.currEquipId;if(0<t.length){for(var e=0;e<t.length;e++){var i=t[e];null!=i?(this._itemPitArr[e].item.setData(i),this._itemPitArr[e].uid=i[2]):(this._itemPitArr[e].item.dataSource=null,this._itemPitArr[e].uid=null,this._itemPitArr[e].item._qualityBg.skin="compose/btn_tanchuang_01.png")}3<=t.length?r.thisPlay(this._composeClip):r.thisStop(this._composeClip),this.updatePersent()}},c.prototype.updatePersent=function(){for(var t=this._selectedCfg[6],e=0,i=0;i<this._itemPitArr.length;i++)null!=this._itemPitArr[i].uid&&e++;this.percent.text=3<=e?"成功率  "+100*t[e-3][1]+"%":"成功率  0%"},c.prototype.selectHandler=function(){this._selectedCfg=this._list.selectedData,this._selectedCfg&&this.updateEquip()},c.prototype.updateEquip=function(){o.ComposeModel.instance.currEquipId.length=0,this._itemId=this._selectedCfg[1];var t="<span style='color:#4c5e8a;font-size: 24px'>可放入</span>";t+="<span style='color:#c96300;font-size: 24px'>"+this._selectedCfg[7]+"</span>",t+="<span style='color:#4c5e8a;font-size: 24px'>装备，放越多成功率越高</span>",this.htmlText.innerHTML=t;var e=this._selectedCfg[0],i=o.ComposeModel.instance.setNum(e);this.materiNum.text=i.toString();var n=l.getItemCfgById(this._itemId);if(!n)throw new Error("不存在的道具ID："+this._itemId);this.composeName.text=n[1].toString(),this._compose.setData(this._itemId);for(var s=0;s<this._itemPitArr.length;s++)this._itemPitArr[s].item.dataSource=null,this._itemPitArr[s].uid=null,this._itemPitArr[s].item._qualityBg.skin="compose/btn_tanchuang_01.png";r.thisStop(this._composeClip),this.percent.text="成功率  0%"},c.prototype.addDiolg=function(t){if(this._itemPitArr[t].item.itemData)e=[t,this._selectedCfg],this._stoneDia.setOpenParam(e),this._stoneDia.showDelBtn=!0,this.addChild(this._stoneDia);else{var e=[t,this._selectedCfg];0<o.ComposeModel.instance.getEquip(this._selectedCfg).length?(this._stoneDia.setOpenParam(e),this._stoneDia.showDelBtn=!1,this.addChild(this._stoneDia)):WindowManager.instance.open(259,[this._selectedCfg,1])}},c.prototype.useHandler=function(){for(var t=new Array,e=0;e<this._itemPitArr.length;e++)null!=this._itemPitArr[e].uid&&t.push(this._itemPitArr[e].uid);Channel.instance.publish(2098452,[this._selectedCfg[0],t,1])},c.prototype.allAddHandler=function(){var t=o.ComposeModel.instance.getEquip(this._selectedCfg);if(0<t.length){for(var e=0;e<this._itemPitArr.length;e++)if(null==this._itemPitArr[e].uid){var i=ArrayUtils.random(t);t.splice(t.indexOf(i),1),o.ComposeModel.instance.currEquipId[e]=i}GlobalData.dispatcher.event("ADD_EQUIP")}else WindowManager.instance.open(259,[this._selectedCfg,1])},c.prototype.close=function(){n.prototype.close.call(this),r.thisStop(this._composeClip)},e=c,o.ComposeEquipAlert=e}(modules=modules||{}),function(d){var i,e,m,t,n,f,s,g,o,a,y,r;function l(){var t=null!==e&&e.apply(this,arguments)||this;return t._pos=new n(428,443),t._wid=80,t}i=d.compose||(d.compose={}),m=d.config.ComposeCfg,t=d.common.CustomList,n=laya.maths.Point,f=d.bag.BagModel,s=d.notice.SystemNoticeManager,g=d.common.CommonUtil,o=d.config.AttrItemCfg,a=d.common.AttrUtil,y=d.config.ItemFulingCfg,e=ui.ComposeStoneAlertUI,__extends(l,e),l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._composeClip=this.destroyElement(this._composeClip),this._itemArray=this.destroyElement(this._itemArray),this._compose=this.destroyElement(this._compose),this._nameArr=this.destroyElement(this._nameArr),e.prototype.destroy.call(this)},l.prototype.initialize=function(){e.prototype.initialize.call(this),this._itemArray=new Array,this._showIds=new Array,this._list=new t,this._list.width=628,this._list.height=557,this._list.hCount=1,this._list.spaceY=2,this._list.itemRender=i.ComposeStoneItem,this._list.x=39,this._list.y=77,this.addChild(this._list),this._compose=new i.ComposeItem,this._compose.pos(379,210),this._compose.mouseEnabled=!0,this.decomposeNum.visible=!1,this._composeClip=g.creatEff(this.useBtn,"btn_light",15),this._composeClip.pos(-5,-10,!0),this._nameArr=[this.attack1,this.attack2],this._maxNum=1,this.addChild(this._compose),this.createItem(),this.oneKeyBtn.visible=d.halo.HaloModel.instance.haloOpen},l.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.tclass=t[0],this.sclass=t[1],this.updateList()},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._composeClip.play(),this.updateHaloInfo()},l.prototype.updateList=function(){this._showIds.length=0;for(var t=m.instance.getComposeCfgBySclass(this.tclass,this.sclass),e=0;e<t.length;e++)this._showIds.push([t[e],0]);this._list.datas=this._showIds,this._list.selectedIndex=this.searchOne(),this._list.scrollToIndex(this._list.selectedIndex),this.selectHandler()},l.prototype.searchOne=function(){for(var t=this._list.datas,e=0,i=t.length;e<i;e++){var n=t[e][0][6][0],s=n[0];if(n[1]<=f.instance.getItemCountById(s))return e}return 0},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoClick(this.addBtn,this,this.addHandler,[1]),this.onAutoClick(this.addTenBtn,this,this.addHandler,[10]),this.onAutoClick(this.reduceBtn,this,this.addHandler,[-1]),this.onAutoClick(this.reduceTenBtn,this,this.addHandler,[-10]),this.onAutoClick(this.useBtn,this,this.useHandler),this.onAutoClick(this.stoneLink,this,this.stoneLinkHandler),this.onAutoClick(this.oneKeyBtn,this,this.onOneKeyClick),this.onAutoEvt(this.numInput,"input",this,this.inputHandler),this.onAutoGlobalEvt("COMPOSE_REPLY",this,this.composeReply),this.onAutoGlobalEvt("BAG_ADD_ITEM",this,this.updateStone),this.onAutoGlobalEvt("HALO_INFO_UPDATE",this,this.updateHaloInfo)},l.prototype.inputHandler=function(){if(""!=this.numInput.text){var t=parseInt(this.numInput.text);this._maxNum?t>this._maxNum&&0<this._maxNum?t=this._maxNum:t<1&&0<this._maxNum?t=1:t<0&&(t=0):t=0,this.numInput.text=t.toString()}else 0<this._maxNum?this.numInput.text="1":this.numInput.text="0"},l.prototype.stoneLinkHandler=function(){if(4===g.getItemTypeById(this._composeId))WindowManager.instance.open(37);else if(d.yuanShen.YuanShenUtil.isFulingItem(this._composeId)){var t=this.tclass-13;WindowManager.instance.open(548,[t,[1,1]])}this.close()},l.prototype.createItem=function(){for(var t=0;t<4;t++){var e=new i.ComposeItem;e.scale(.8,.8),e.visible=!1,this.addChild(e),this._itemArray.push(e)}},l.prototype.updateStone=function(){var t=this._selectedCfg,e=t[6];this._composeId=t[1];var i=e.length;this._compose.setData(this._composeId);var n=g.getItemTypeById(this._composeId);if(this.composeName.text=this._compose._nameTxt.text,4==n){this.titleName.text="仙石属性",this.stoneLink.visible=!0,this.stoneLink.text="仙石镶嵌";var s=m.instance.getGemRefineCfgById(this._composeId);this.setAttrTxts(s[8])}else if(d.yuanShen.YuanShenUtil.isFulingItem(this._composeId)){this.stoneLink.visible=!0,this.titleName.text="附灵属性",this.stoneLink.text="灵装附灵";var o=y.instance.getCfgById(this._composeId);this.setAttrTxts(o[5])}else{this.stoneLink.visible=!1,this.titleName.text="合成预览";for(var a=0;a<this._nameArr.length;a++)this._nameArr[a].text=""}var r=new Array;for(a=0;a<4;a++){var l=this._itemArray[a];if(a<i){var h=e[a][0],c=f.instance.getItemCountById(h);l.setData(h),c<e[a][1]?l.setNum(c+"/"+e[a][1],"#ff7462"):l.setNum(c+"/"+e[a][1],"#ffffff");var p=c/e[a][1]>>0;r.push(p);var u=this._wid*i+13*(i-1);l.pos(this._pos.x-u/2+93*a,this._pos.y),l.visible=!0}else l.visible=!1}r.sort(function(t,e){return e<t?-1:1}),this._maxNum=r.pop(),5==this.tclass?this.numInput.text="1":this.numInput.text=this._maxNum.toString(),this._composeClip.visible=0<this._maxNum},l.prototype.setAttrTxts=function(t){for(var e=0;e<2;e++)if(null!=t[2*e]){var i=o.instance.getCfgById(t[2*e]),n=""+(i[2]?a.formatFloatNum(t[2*e+1])+"%":Math.round(t[2*e+1]));this._nameArr[e].text=i[1]+":"+n}else this._nameArr[e].text="";t.length/2==1?g.centerChainArr(860,[this._nameArr[0]]):this._nameArr[0].x=268},l.prototype.composeReply=function(){var t=i.ComposeModel.instance.ComposeReply[0];0!=t?g.noticeError(t):s.instance.addNotice("合成成功",!1),this.updateList()},l.prototype.selectHandler=function(){var t=this._list.selectedData;null!=t&&(this._selectedCfg=t[0]),this._selectedCfg&&this.updateStone()},l.prototype.useHandler=function(){if((1==this.tclass||13<=this.tclass&&this.tclass<=17)&&d.halo.HaloModel.instance.isHalo()&&d.halo.HaloModel.instance.haloOpen)Channel.instance.publish(2110863,[this._list.datas[0][0][0]]);else{for(var t=this._selectedCfg[6],e=new Array,i=0;i<t.length;i++){var n=t[i][0],s=f.instance.getItemsById(n);if(0<s.length){var o=s[0][2];e.push(o)}}this._composeNum=parseInt(this.numInput.text),Channel.instance.publish(2098452,[this._selectedCfg[0],e,this._composeNum])}},l.prototype.addHandler=function(t){var e=parseInt(this.numInput.text)+t;e>this._maxNum?e=this._maxNum:0<this._maxNum&&e<1?e=1:e<0&&(e=0),this.numInput.text=e.toString()},l.prototype.updateHaloInfo=function(){d.halo.HaloModel.instance.haloOpen&&(1==this.tclass||13<=this.tclass&&this.tclass<=17?(this.useBtn.label=d.halo.HaloModel.instance.isHalo()?"一键合成":"合成",this.oneKeyBtn.visible=!0,this.oneKeyBtn.underline=!d.halo.HaloModel.instance.isHalo(),this.oneKeyBtn.text=d.halo.HaloModel.instance.isHalo()?"已开启一键合成":"开启一键合成",this.oneKeyBtn.mouseEnabled=!d.halo.HaloModel.instance.isHalo()):(this.useBtn.label="合成",this.oneKeyBtn.visible=!1))},l.prototype.onOneKeyClick=function(){WindowManager.instance.open(1493)},l.prototype.close=function(){e.prototype.close.call(this),this._composeClip.stop()},r=l,i.ComposeStoneAlert=r}(modules=modules||{}),function(t){var g,e,i,y,n,s,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}g=t.compose||(t.compose={}),i=laya.events.Event,y=t.config.ComposeCfg,n=t.common.BtnGroup,s=laya.ui.Panel,o=t.redPoint.RedPointCtrl,e=ui.ComposeViewUI,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._tab=this.destroyElement(this._tab),this.compose=this.destroyElement(this.compose),this.resolve=this.destroyElement(this.resolve),this.composePanle=this.destroyElement(this.composePanle),this.resolvePanle=this.destroyElement(this.resolvePanle),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._tab=new n,this._tab.setBtns(this.composeBtn,this.resolveBtn),this._tab.selectedIndex=0,this.composePanle=new s,this.composePanle.vScrollBarSkin="",this.composePanle.width=607,this.composePanle.height=942,this.addChild(this.composePanle),this.composePanle.pos(51,107),this.resolvePanle=new s,this.resolvePanle.vScrollBarSkin="",this.resolvePanle.width=607,this.resolvePanle.height=942,this.addChild(this.resolvePanle),this.resolvePanle.pos(51,107),this.initShowData()},r.prototype.initShowData=function(){for(var t=new Array,e=new Array,i=y.instance.getComposeTclassLength(),n=1;n<i.length;n++){var s=i[n];if(s){null!=(m=s[0])[3][1]&&t.push(m);for(var o=new Array,a=0;a<s.length;a++){var r=s[a];null==o[(f=r[4][0])-1]&&(o[f-1]=[r[4][1]])}e.push(o)}}for(this.compose=new Array,n=0;n<t.length;n++)this.compose[n]=new g.ComposeSelectPanel,this.compose[n].initData(t[n],n,0),this.composeResizeShow(null);var l=new Array,h=new Array,c=y.instance.getResolveTclassLength();for(n=1;n<=c.length;n++){var p=c[n];if(null!=p){var u=p[0];null!=u[1][1]&&l.push(u);var d=new Array;for(a=0;a<p.length;a++){var m,f;null==d[(f=(m=p[a])[3][0])-1]&&(d[f-1]=[m[3][1]])}h.push(d)}}for(this.resolve=new Array,n=0;n<l.length;n++)this.resolve[n]=new g.ComposeSelectPanel,this.resolve[n].initData(l[n],n,1),this.resolveResizeShow(null)},r.prototype.composeResizeShow=function(t){for(var e=0,i=0;i<this.compose.length;i++)null!=t&&i!=t&&this.compose[i].closeList(),this.compose[i].pos(0,e),this.composePanle.addChild(this.compose[i]),e+=this.compose[i].height},r.prototype.resolveResizeShow=function(t){for(var e=0,i=0;i<this.resolve.length;i++)null!=t&&i!=t&&this.resolve[i].closeList(),this.resolve[i].pos(0,e),this.resolvePanle.addChild(this.resolve[i]),e+=this.resolve[i].height},r.prototype.setSelectItem=function(t,e,i){var n=[y.instance.tIds[t],e+1];i<1?WindowManager.instance.openDialog(69,n):WindowManager.instance.openDialog(70,n)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this._tab.on(i.CHANGE,this,this.changeComposeTabHandler);for(var t=0;t<this.compose.length;t++)this.compose[t].on("COMPOSE_RESIZW",this,this.composeResizeShow),this.compose[t].on("COMPOSE_SELECT",this,this.setSelectItem);for(t=0;t<this.resolve.length;t++)this.resolve[t].on("RESOLVE_RESIZW",this,this.resolveResizeShow),this.resolve[t].on("RESOLVE_SELECT",this,this.setSelectItem);GlobalData.dispatcher.on("BAG_UPDATE",this,this.setDotDic),o.instance.registeRedPoint(this.coDot,["composeRP","composeStoneRP"]),o.instance.registeRedPoint(this.reDot,["resolveRP"])},r.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._tab.off(i.CHANGE,this,this.changeComposeTabHandler);for(var t=0;t<this.compose.length;t++)this.compose[t].off("COMPOSE_RESIZW",this,this.composeResizeShow),this.compose[t].off("COMPOSE_SELECT",this,this.setSelectItem);for(t=0;t<this.resolve.length;t++)this.resolve[t].off("RESOLVE_RESIZW",this,this.resolveResizeShow),this.resolve[t].off("RESOLVE_SELECT",this,this.setSelectItem);GlobalData.dispatcher.off("BAG_UPDATE",this,this.setDotDic)},r.prototype.setDotDic=function(){g.ComposeModel.instance.setDotDic()},r.prototype.changeComposeTabHandler=function(){switch(this._tab.selectedIndex){case 0:this.titleTxt.text="合成",this.resolvePanle.visible=!1,this.composePanle.visible=!0;break;case 1:this.titleTxt.text="分解",this.resolvePanle.visible=!0,this.composePanle.visible=!1}},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.changeComposeTabHandler(),this.setDotDic()},r.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),t&&(this.compose[t[0]].openHandler(),this.composeResizeShow(t[0]))},r.prototype.close=function(){e.prototype.close.call(this),WindowManager.instance.close(69),WindowManager.instance.close(68),WindowManager.instance.close(70),WindowManager.instance.close(67),WindowManager.instance.close(71)},a=r,g.ComposePanel=a}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}i=t.compose||(t.compose={}),n=Laya.Event,s=t.common.CommonUtil,o=ui.ComposeAddItemUI,e=o,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._item=new i.ComposeItem,this._item.mouseEnabled=!1,this._item.pos(10,8),this.addChild(this._item)},r.prototype.onEvt=function(){this.on(n.CLICK,this,this.inlay)},r.prototype.offEvt=function(){this.off(n.CLICK,this,this.inlay)},r.prototype.inlay=function(){var t=i.ComposeModel.instance.currEquipId,e=i.ComposeModel.instance.currEquipPic;t.length<=5&&(t[e]=this._itemF),i.ComposeModel.instance.currEquipId=t,GlobalData.dispatcher.event("ADD_EQUIP")},r.prototype.setData=function(t){var e=(this._itemF=t)[0];this._item.setData(e);var i=s.getItemCfgById(e);if(!i)throw new Error("不存在的道具ID："+e);this.nameText.text=i[1].toString()},a=r,i.ComposeAddItem=a}(modules=modules||{}),function(i){var n,e,s,t,o,a,r,l,h;function c(){var t=null!==e&&e.apply(this,arguments)||this;return t._pos=new a(428,443),t._wid=80,t}n=i.compose||(i.compose={}),s=i.config.ComposeCfg,t=i.common.CustomList,o=laya.events.Event,a=laya.maths.Point,r=i.bag.BagModel,l=i.common.CommonUtil,e=ui.ComposeStoneAlertUI,__extends(c,e),c.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._itemArray=this.destroyElement(this._itemArray),this._compose=this.destroyElement(this._compose),e.prototype.destroy.call(this)},c.prototype.initialize=function(){e.prototype.initialize.call(this),this._itemArray=new Array,this._showIds=new Array,this._list=new t,this._list.width=174,this._list.height=557,this._list.hCount=1,this._list.spaceY=2,this._list.itemRender=n.ComposeStoneItem,this._list.x=39,this._list.y=77,this.addChild(this._list),this.titleName.text="分解预览",this.useBtn.label="分解",this.stoneLink.visible=!1,this._compose=new n.ComposeItem,this._compose.pos(379,210),this.addChild(this._compose),this.arrowImg.pivot(0,0),this.arrowImg.rotation=0,this.arrowImg.pos(400,365),this.createItem()},c.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.tclass=t[0],this.sclass=t[1],this.updateList()},c.prototype.updateList=function(){this._showIds.length=0;for(var t=s.instance.getResolveCfgBySclass(this.tclass,this.sclass),e=0;e<t.length;e++)this._showIds.push([t[e],1]);this._list.datas=this._showIds,this._list.selectedIndex=-1,this._list.selectedIndex=0,this.selectHandler()},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this._list.on(o.SELECT,this,this.selectHandler),this.addBtn.on(o.CLICK,this,this.addHandler,[1]),this.addTenBtn.on(o.CLICK,this,this.addHandler,[10]),this.reduceBtn.on(o.CLICK,this,this.addHandler,[-1]),this.reduceTenBtn.on(o.CLICK,this,this.addHandler,[-10]),this.useBtn.on(o.CLICK,this,this.useHandler),this.numInput.on(o.INPUT,this,this.inputHandler),GlobalData.dispatcher.on("RESOLVE_REPLY",this,this.resolveReply),GlobalData.dispatcher.on("BAG_ADD_ITEM",this,this.updateItem)},c.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._list.off(o.SELECT,this,this.selectHandler),this.addBtn.off(o.CLICK,this,this.addHandler),this.addTenBtn.off(o.CLICK,this,this.addHandler),this.reduceBtn.off(o.CLICK,this,this.addHandler),this.reduceTenBtn.off(o.CLICK,this,this.addHandler),this.useBtn.off(o.CLICK,this,this.useHandler),this.numInput.off(o.INPUT,this,this.inputHandler),GlobalData.dispatcher.off("BAG_ADD_ITEM",this,this.updateItem),GlobalData.dispatcher.off("RESOLVE_REPLY",this,this.resolveReply)},c.prototype.inputHandler=function(){if(""!=this.numInput.text){var t=parseInt(this.numInput.text);t>this._maxNum?t=this._maxNum:t<0&&(t=0),this.numInput.text=t.toString()}else this.numInput.text="0";this.showNum()},c.prototype.resolveReply=function(){var t=i.compose.ComposeModel.instance.ResolveReply[0],e=i.compose.ComposeModel.instance.ResolveReply[1];0!=t?l.noticeError(t):WindowManager.instance.openDialog(71,e),this.updateItem()},c.prototype.createItem=function(){for(var t=0;t<4;t++){var e=new n.ComposeItem;e.scale(.8,.8),e.visible=!1,this.addChild(e),this._itemArray.push(e)}},c.prototype.updateItem=function(){this._composeId=this._selectedCfg[0],this._compose.setData(this._composeId),this.composeName.text=this._compose._nameTxt.text,this._maxNum=r.instance.getItemCountById(this._composeId),this.decomposeNum.text="拥有数量:"+this._maxNum.toString(),this.numInput.text="1",this.showNum()},c.prototype.showNum=function(){var t=this._selectedCfg,e=t[4];this._composeId=t[0];for(var i=e.length,n=0;n<4;n++){var s=this._itemArray[n];if(n<i){var o=e[n][0];s.setData(o);var a=parseInt(this.numInput.text);a=a<=1?1:a,s.setNum((e[n][1]*a).toString(),"#ffffff");var r=this._wid*i+13*(i-1);s.pos(this._pos.x-r/2+93*n,this._pos.y),s.visible=!0}else s.visible=!1}},c.prototype.selectHandler=function(){var t=this._list.selectedData;null!=t&&(this._selectedCfg=t[0]),this._selectedCfg&&this.updateItem()},c.prototype.useHandler=function(){var t=new Array,e=this._selectedCfg[0],i=r.instance.getItemsById(e);this._deComposeNum=parseInt(this.numInput.text);for(var n=0;n<i.length;n++)if(n<this._deComposeNum){var s=i[n][2];t.push(s)}0<t.length?Channel.instance.publish(2098453,[e,t,this._deComposeNum]):l.noticeError(17007)},c.prototype.addHandler=function(t){var e=parseInt(this.numInput.text)+t;e>this._maxNum?e=this._maxNum:e<0&&(e=0),this.numInput.text=e.toString(),this.showNum()},h=c,n.DecomposeAlert=h}(modules=modules||{}),function(e){var t,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=e.compose||(e.compose={}),i=ui.ComposeSuccessAlertUI,__extends(s,i),s.prototype.setOpenParam=function(t){if(i.prototype.setOpenParam.call(this,t),this._itemId=t[1][0],!e.common.CommonUtil.getItemCfgById(this._itemId[0]))throw new Error("不存在的道具ID："+this._itemId[0]);this.item1.dataSource=[this._itemId[0],this._itemId[1],0,null],this.dialogName.text=t[0],this.item1.visible=!0},s.prototype.initialize=function(){i.prototype.initialize.call(this),this.item1.visible=!1},n=s,t.ComposeSuccessAlert=n}(modules=modules||{}),function(t){var e,n,i,s;function o(){return n.call(this)||this}e=t.compose||(t.compose={}),i=t.common.CustomList,n=ui.ComposeSuccessAlertUI,__extends(o,n),o.prototype.initialize=function(){n.prototype.initialize.call(this),this._list=new i,this._list.width=430,this._list.height=157,this._list.hCount=4,this._list.spaceX=5,this._list.itemRender=e.ComposeRewardItem,this.caiLiaoItemBox.addChild(this._list),this._list.x=0,this._list.y=0},o.prototype.setOpenParam=function(t){if(n.prototype.setOpenParam.call(this,t),this.dialogName.text="分解成功",t){this.caiLiaoItemBox.visible=!0,this._list.datas=t;var e=this._list.datas.length,i=100*(e=4<e?4:e)+(e-1)*this._list.spaceX;this.caiLiaoItemBox.x=(this.width-i)/2}},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),n.prototype.destroy.call(this)},s=o,e.DecomposeSuccessAlert=s}(modules=modules||{}),function(t){var e,o,i;function n(){this.init()}e=t.config||(t.config={}),o=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._dic1=new o,this._dic2=new o,this._keysArr2=[],this._dic3=new o,this._tabArr=new Array,this._maxJie=0;for(var t=GlobalData.getConfig("lilian_task"),e=GlobalData.getConfig("lilian_day"),i=GlobalData.getConfig("lilian_rise"),n=0,s=e.length;n<s;n++)this._tabArr[e[n][1]]={};for(n=0,s=t.length;n<s;n++)this._dic1.set(t[n][0],t[n]);for(n=0,s=e.length;n<s;n++)this._dic2.set(e[n][0],e[n]),this._keysArr2.push(e[n][0]),this._tabArr[e[n][1]][e[n][2]]=e[n],this._maxLLDayCfg=e[n];for(n=0,s=i.length;n<s;n++)this._dic3.set(i[n][0],i[n]),this._maxJie=i[n][0]},n.prototype.getTaskCfgById=function(t){return this._dic1.get(t)},n.prototype.getLLDayCfgByEraLevAndLev=function(t,e){return this._tabArr[t][e]},n.prototype.getLLDayCfgByEraLev=function(t){for(var e=0,i=this._keysArr2.length;e<i;e++)if(this._dic2.get(this._keysArr2[e])[1]>t)return this._dic2.get(this._keysArr2[e-1])},n.prototype.getMaxLLDayCfg=function(){return this._maxLLDayCfg},n.prototype.getZLLCfgByLev=function(t){return this._dic3.get(t)},Object.defineProperty(n.prototype,"maxLLJie",{get:function(){return this._maxJie},enumerable:!0,configurable:!0}),n.prototype.getNextCfgByCurrLev=function(t){for(var e=0,i=this._dic3.keys.length;e<i;e++)if(this._dic3.get(this._dic3.keys[e])[0]==t)return this._dic3.get(this._dic3.keys[e+1])},n.prototype.getBeforeCfgByCurrLev=function(t){for(var e=0,i=this._dic3.keys.length;e<i;e++)if(this._dic3.get(this._dic3.keys[e])[0]==t)return this._dic3.get(this._dic3.keys[e-1])},n.prototype.getChongByJie=function(t){for(var e=0,i=0,n=this._dic3.keys.length;i<n;i++)Math.floor(this._dic3.get(this._dic3.keys[i])[0]/100)==t&&e++;return e},i=n,e.ExerciseCfg=i}(modules=modules||{}),function(m){var f,e,t,i,n,s,g,o,y,_,a;function r(){return null!==e&&e.apply(this,arguments)||this}f=m.exercise||(m.exercise={}),t=ui.ExerciseViewUI,i=m.common.ProgressBarCtrl,n=m.common.CustomList,s=m.bag.BaseItem,g=m.config.ExerciseCfg,o=m.common.CustomClip,y=m.config.BlendCfg,_=m.config.PrivilegeCfg,e=t,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this.btnClip=this.destroyElement(this.btnClip),this._prizeArr=this.destroyElement(this._prizeArr),this._ratioBar=this.destroyElement(this._ratioBar),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this._customClipFiveArr=[],this._customClipEightArr=[],this._customClipTenArr=[],this.centerX=0,this.centerY=0,this._CNum=0,this._currMszLev=1,this._lev=101,this._ratioBar=new i(this.foreBarImg,this.foreBarImg.width,this.ratioTxt),this._list=new n,this._list.scrollDir=1,this._list.width=590,this._list.height=400,this._list.hCount=1,this._list.itemRender=f.ExerciseItem,this._list.x=60,this._list.y=725,this._list.spaceY=4,this.addChild(this._list),this._prizeArr=new Array;for(var t=0;t<4;t++)this._prizeArr[t]=new s,this._prizeArr[t].scale(.8,.8),this._prizeArr[t].nameVisible=!1,this.addChild(this._prizeArr[t]);this._prizeArr[0].pos(69,632),this._prizeArr[1].pos(171,632),this._prizeArr[2].pos(308,632),this._prizeArr[3].pos(410,632),this.btnClip=CommonUtil.creatEff(this.getBtn,"btn_light",15),this.btnClip.scale(.65,.65),this.btnClip.pos(-5,-5),this.btnClip.visible=!1},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.btnClip.play(),this.updataView(),this.DHNameMsz.skin="assets/icon/ui/lilian/"+Math.floor(this._lev/100)+".png",this.leftBtn.visible=101!==this._lev,this.rightBtn.visible=this._lev!==g.instance.maxLLJie,this.rightBtn.gray=!1,this.rightBtn.mouseEnabled=!0,this._currMszLev=this._lev,this.ClevMsz.value=this._CNum.toString(),this.creatTaskList()},r.prototype.close=function(){e.prototype.close.call(this),m.common.ItemRenderNoticeManager.instance.stop()},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("LILIAN_UPDATA",this,this.updataView),this.onAutoGlobalEvt("LILIAN_UPGRADE",this,this.openAlert),this.onAutoGlobalEvt("LILIAN_UPDATA_TASK_LIST",this,this.creatTaskList),this.onAutoClick(this.getBtn,this,this.getLilianDayAward),this.onAutoClick(this.rightBtn,this,this.selectJie,[1]),this.onAutoClick(this.leftBtn,this,this.selectJie,[0])},r.prototype.getLilianDayAward=function(){f.ExerciseCrtl.instance.getLiLianDayAward()},r.prototype.openAlert=function(){WindowManager.instance.openDialog(73,[this._prizeArr[0].itemData,this._prizeArr[1].itemData]),this._lev=f.ExerciseModel.instance.getOtherValue(4),0==this._lev&&(this._lev=101),this._CNum=this._lev%100,this.DHNameMsz.skin="assets/icon/ui/lilian/"+Math.floor(this._lev/100)+".png",this.leftBtn.visible=1!==this._lev,this.rightBtn.visible=this._lev!==g.instance.maxLLJie,this._currMszLev=this._lev;var t=this._CNum;10==t&&(t=0),this.ClevMsz.value=t.toString()},r.prototype.updataView=function(){this._lev=f.ExerciseModel.instance.getOtherValue(4),0==this._lev&&(this._lev=101),this._CNum=this._lev%100;var t=g.instance.getZLLCfgByLev(this._lev),e=g.instance.getNextCfgByCurrLev(this._lev);this.atkValueMsz.value=t[3].toString(),10==this._CNum&&(this._CNum=0);var i=g.instance.getChongByJie(Math.floor(this._lev/100));this.showBackImg(i),this.DHEffect.text="道行抵御：高重数道行玩家受到低重数的伤害减免"+100*y.instance.getCfgById(42002)[1][0]+"%",this.contentTxt_1.text=t[4].toString(),this.contentTxt_2.text=t[5].toString(),e?(this.liftTxt_1.text=(e[4]-t[4]).toString(),this.liftTxt_2.text=(e[5]-t[5]).toString(),this.hpAttrUpImg.visible=!0,this.atkAttrUpImg.visible=!0):(this.liftTxt_1.destroy(),this.liftTxt_2.destroy(),this.nextAwardTitle.text="已满重",this.hpAttrUpImg.visible=!1,this.atkAttrUpImg.visible=!1),this._ratioBar.maxValue=t[1],this._ratioBar.value=f.ExerciseModel.instance.getOtherValue(5),this._ratioBar.value>this._ratioBar.maxValue&&(this._ratioBar.value=this._ratioBar.maxValue),this._ratioBar.moleculeTxt=f.ExerciseModel.instance.getOtherValue(5),this._prizeArr[0].dataSource=[t[2][0],t[2][1],0,null],this._prizeArr[1].dataSource=[t[2][2],t[2][3],0,null];var n=f.ExerciseModel.instance.getOtherValue(6),s=g.instance.getLLDayCfgByEraLevAndLev(n,f.ExerciseModel.instance.getOtherValue(2)),o=g.instance.getLLDayCfgByEraLev(n);o=o||g.instance.getMaxLLDayCfg();var a=f.ExerciseModel.instance.getOtherValue(1);a>o[3]&&(a=o[3]),this.DHratioTxt.text=a+"/"+s[3];var r=s[4][1],l=s[4][3],h=m.funcOpen.FuncOpenModel.instance.getFuncIsOpen(981);if(m.weekCard.WeekCardModel.instance.isVip&&h){for(var c=_.instance.getCfgByType(401)[1],p=0,u=0,d=c.length;u<d;u++)if(99===c[u][0]){p=c[u][1];break}r=(p+1)*s[4][1],l=(p+1)*s[4][3]}this._prizeArr[2].dataSource=[s[4][0],r,0,null],this._prizeArr[3].dataSource=[s[4][2],l,0,null],2==f.ExerciseModel.instance.getOtherValue(3)&&f.ExerciseModel.instance.getOtherValue(2)==o[2]?(this.getBtn.skin="common/txt_commmon_ylq.png",this.getBtn.label="",this.getBtn.mouseEnabled=!1,this.getBtn.pos(533,638,!0),this.DHDayTxt.text="今日累计道行已达上限",this.DHratioTxt.visible=!1):(this.DHDayTxt.text="今日累计道行:",this.DHratioTxt.visible=!0,a<s[3]?(this.getBtn.skin="common/txt_commmon_wdc.png",this.getBtn.mouseEnabled=!1,this.getBtn.label="",this.getBtn.pos(533,638,!0)):(this.getBtn.skin="common/btn_tonyong_35.png",this.getBtn.mouseEnabled=!0,this.getBtn.label="领取",this.getBtn.pos(522,644,!0))),this.btnClip.visible=1==f.ExerciseModel.instance.getOtherValue(3)},r.prototype.showBackImg=function(t){for(var e=0,i=this.allBox._childs.length;e<i;e++)this.allBox._childs[e].visible=!1;var n=this._CNum;switch(0==n&&(n=10),t){case 5:for(this.numBox_5.visible=!0,e=0,i=this.numBox_5._childs.length;e<i;e++)this.showBall(this._customClipFiveArr,e,this.numBox_5._childs[e],e<n);break;case 8:for(this.numBox_8.visible=!0,e=0,i=this.numBox_8._childs.length;e<i;e++)this.showBall(this._customClipEightArr,e,this.numBox_8._childs[e],e<n);break;case 10:for(this.numBox_10.visible=!0,e=0,i=this.numBox_10._childs.length;e<i;e++)this.showBall(this._customClipTenArr,e,this.numBox_10._childs[e],e<n)}},r.prototype.showBall=function(t,e,i,n){if(n){var s=void 0;t[e]?s=t[e]:(s=o.createAndPlay("assets/effect/experience.atlas","experience",8,!1),i.addChild(s),s.pos(-30,-60),t[e]=s),s.visible=!0,s.isPlaying||o.thisPlay(s)}else t[e]&&(o.thisStop(t[e]),t[e].visible=!1);i.skin=n?"exercise/zs_lilian_1.png":"exercise/zs_lilian_2.png"},r.prototype.creatTaskList=function(){var t=m.common.ItemRenderNoticeManager.instance.index;if(null!=t){var e=this._list.items[t];m.common.ItemRenderNoticeManager.instance.addNotice(e,"LILIAN_UPDATA_TASK_LIST")}else this._list.datas=f.ExerciseModel.instance.tasks},r.prototype.selectJie=function(t){if(t){var e=g.instance.getNextCfgByCurrLev(this._currMszLev),i=Math.floor(e[0]/100);10==(n=e[0]%100)&&(n=0),this.DHNameMsz.skin="assets/icon/ui/lilian/"+i+".png",this.ClevMsz.value=n.toString(),this._currMszLev=e[0],this.leftBtn.visible=!0,this.rightBtn.gray=this._currMszLev>this._lev,this.rightBtn.mouseEnabled=!this.rightBtn.gray,this.rightBtn.visible=!(this._currMszLev==g.instance.maxLLJie)}else{var n,s=g.instance.getBeforeCfgByCurrLev(this._currMszLev);i=Math.floor(s[0]/100),10==(n=s[0]%100)&&(n=0),this.DHNameMsz.skin="assets/icon/ui/lilian/"+i+".png",this.ClevMsz.value=n.toString(),this._currMszLev=s[0],this.rightBtn.mouseEnabled=this.rightBtn.visible=!0,this.rightBtn.gray=!1,this.leftBtn.visible=101<this._currMszLev}},a=r,f.ExercisePanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.exercise||(t.exercise={}),n=ui.ExerciseAlertUI,s=t.config.BlendCfg,o=t.bag.BaseItem,i=n,__extends(r,i),r.prototype.destroy=function(){this._prizeArr=this.destroyElement(this._prizeArr),i.prototype.destroy.call(this)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this._prizeArr=new Array;for(var t=0;t<2;t++)this._prizeArr[t]=new o,this.addChild(this._prizeArr[t]),this._prizeArr[t].pos(204+156*t,187)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=s.instance.getCfgById(10401)[1][0],this.loopHandler()},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._prizeArr[0].dataSource=t[0],this._prizeArr[1].dataSource=t[1]},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},r.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),i.prototype.offEvt.call(this)},r.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.sureBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},a=r,e.ExerciseAlert=a}(modules=modules||{}),function(t){var e,o,i,a,r,n,l,s;function h(){return o.call(this)||this}e=t.multiBoss||(t.multiBoss={}),i=ui.MultiBossItemUI,a=t.config.MonsterResCfg,r=t.player.PlayerModel,n=t.notice.SystemNoticeManager,l=t.dungeon.DungeonModel,o=i,__extends(h,o),h.prototype.onEvt=function(){o.prototype.onEvt.call(this),GlobalData.dispatcher.on("DUNGEON_BOSS_UPDATE",this,this.checkRP),GlobalData.dispatcher.on("DUNGEON_BOSS_TIMES_UPDATE",this,this.checkRP),GlobalData.dispatcher.on("MULTI_BOSS_FOLLOWS_UPDATE",this,this.checkRP)},h.prototype.offEvt=function(){o.prototype.offEvt.call(this),GlobalData.dispatcher.off("DUNGEON_BOSS_UPDATE",this,this.checkRP),GlobalData.dispatcher.off("DUNGEON_BOSS_TIMES_UPDATE",this,this.checkRP),GlobalData.dispatcher.off("MULTI_BOSS_FOLLOWS_UPDATE",this,this.checkRP)},h.prototype.onOpened=function(){o.prototype.onOpened.call(this),this.selectedImg.visible=!1},h.prototype.setSelected=function(t){o.prototype.setSelected.call(this,t),this.selectedImg.visible=t,this.lvTxt.color=t?"#9d5119":"#FFFFFF"},h.prototype.close=function(){o.prototype.close.call(this),this.rpImg.visible=!1},h.prototype.setData=function(t){o.prototype.setData.call(this,t);var e=t,i=a.instance.getCfgById(e[2]);this.iconImg.skin="assets/icon/monster/"+i[3]+".png",this.lvTxt.text=e[5];var n=e[4],s=e[3];r.instance.level>=n&&r.instance.eraLevel>=s?(this.iconImg.gray=!1,this.lockImg.visible=!1,this._selectEnable=!0):(this.iconImg.gray=!0,this.lockImg.visible=!0,this._selectEnable=!1)},h.prototype.clickHandler=function(){o.prototype.clickHandler.call(this);var t=this._data,e=t[4],i=t[3];(r.instance.level<e||r.instance.eraLevel<i)&&n.instance.addNotice("转生等级不足，请提升后再来。",!0)},h.prototype.checkRP=function(){var t=!1;if(this._data){var e=this._data,i=l.instance.getBossInfoById(e[2]);if(i&&!i[2][0]){var n=l.instance.getBossTimesBySceneType(4);if(n&&0<n[2]){var s=l.instance.getFollowBossById(e[2]);s&&s[1]&&(t=!0)}}}this.rpImg.visible=t},s=h,e.MultiBossItem=s}(modules=modules||{}),function(n){var i,o,t,e,s,a,r,l,h,c,p,u,d,m,f,g,y,_,v,I,b,C,T,w,x;function B(){return null!==o&&o.apply(this,arguments)||this}i=n.threeWorlds||(n.threeWorlds={}),t=n.dungeon.DungeonUtil,e=ui.ThreeWorldsViewUI,s=n.common.CustomList,a=n.config.SceneCrossBossCfg,r=n.player.PlayerModel,l=n.bag.BaseItem,h=n.dungeon.DungeonCtrl,c=n.dungeon.DungeonModel,p=n.config.SceneCfg,u=n.config.MonsterResCfg,d=n.common.ProgressBarCtrl,m=n.common.CustomClip,f=n.common.AvatarClip,g=n.config.ExteriorCfg,y=n.common.CommonUtil,_=n.bag.BagModel,v=n.common.ListWithArrowCtrl,I=n.customData.CustomDataModel,b=n.customData.CustomDataCtrl,C=n.common.SimpleList,T=n.vip.VipModel,w=n.config.PrivilegeCfg,o=e,__extends(B,o),B.prototype.initialize=function(){o.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnList=C.create(n.forbiddenBoss.BossBtnItem,158,172,2,1,-10,0),this._btnList.pos(25,982),this._btnList.size(666,172),this.addChild(this._btnList),this._btnList.datas=[41,246,42,723,777],this._list=new s,this._list.scrollDir=2,this._list.vCount=1,this._list.spaceX=10,this._list.itemRender=i.ThreeWorldsItem,this._list.width=530,this._list.height=126,this._list.pos(96,119,!0),this.addChild(this._list),this.rankTxt.underline=!0,this._joinAward=new l,this.addChild(this._joinAward),this._joinAward.pos(530,330,!0),this._joinAward.nameVisible=!1,this._killAward=new l,this.addChild(this._killAward),this._killAward.pos(530,470,!0),this._killAward.nameVisible=!1,this._rankAwards=new Array;for(var t=0;t<4;t++){var e=new l;this.addChild(e),e.pos(476+t%2*102,610+102*Math.floor(t/2),!0),e.nameVisible=!1,this._rankAwards.push(e)}this._proCtrl=new d(this.proBar,260,this.proTxt),this._proCtrl.maxValue=1,this._btnClip=m.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.gotoBtn.x-5,this.gotoBtn.y-8),this._modelClip=f.create(1024,1024,1024),this.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.x=250,this._modelClip.y=700,this._listCtrl=new v(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=544,this.regGuideSpr(65,this.gotoBtn),this._helpId=20012,this._addTimesBtnClip=m.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.addChild(this._addTimesBtnClip),this._addTimesBtnClip.pos(this.addBtn.x-10,this.addBtn.y-10),this._addTimesBtnClip.visible=!1,this.haloTxt.visible=n.halo.HaloModel.instance.haloOpen},B.prototype.onEvt=function(){o.prototype.onEvt.call(this),this._listCtrl.addListeners(),this.onAutoClick(this.gotoBtn,this,this.gotoHandler),this.onAutoClick(this.addBtn,this,this.addHandler),this.onAutoEvt(this._list,"select",this,this.selectBossHandler),this.onAutoClick(this.rankTxt,this,this.rankHandler),this.onAutoClick(this.autoCheckBox,this,this.autoCheckBoxHandler),this.onAutoEvt(this._btnList,"select",this,this.selectHandler),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateBoss),this.onAutoGlobalEvt("DUNGEON_BOSS_TIMES_UPDATE",this,this.updateBossTimes),this.onAutoGlobalEvt("TRAHMAN_BOSS_ZHIZUN_UPDATE",this,this.checkBoxState),this.onAutoGlobalEvt("UPDATE_PRIVILEGE",this,this.onUpdatePrivilege),this.onAutoGlobalEvt("BAG_UPDATE",this,this.onUpdatePrivilege),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.onAutoGlobalEvt("HALO_INFO_UPDATE",this,this.updateHaloInfo),this.onAutoClick(this.haloTxt,this,this.onHaloBtnClick)},B.prototype.updatePlatChangeRecharge=function(){this.msc1.visible=this.msc2.visible=this.autoCheckBox.visible=this.addBtn.visible=this._addTimesBtnClip.visible=!PlatParams.isCloseRecharge},B.prototype.offEvt=function(){this._listCtrl.removeListeners(),Laya.timer.clear(this,this.reviveCDHandler),o.prototype.offEvt.call(this),m.thisStop(this._btnClip)},B.prototype.onUpdatePrivilege=function(){var t=_.instance.getItemCountById(20730010),e=T.instance.getPrivilegeInfoById(67)[1],i=w.instance.getVipInfoByLevel(T.instance.vipLevel,67),n=i&&i[1]||0;(0<t||0<n-e)&&this.getTimes()[0]<this.getTimes()[1]&&!PlatParams.isCloseRecharge?(this._addTimesBtnClip.isPlaying||m.thisPlay(this._addTimesBtnClip),this._addTimesBtnClip.visible=!0):(m.thisStop(this._addTimesBtnClip),this._addTimesBtnClip.visible=!1)},B.prototype.selectHandler=function(){switch(this._btnList.selectedIndex){case 0:break;case 1:WindowManager.instance.open(400);break;case 2:WindowManager.instance.open(80);break;case 3:WindowManager.instance.open(1135);break;case 4:WindowManager.instance.open(1175)}0!=this._btnList.selectedIndex&&(this._btnList.selectedIndex=0)},B.prototype.onOpened=function(){o.prototype.onOpened.call(this),PlatParams.isCloseRecharge&&(this.msc1.visible=this.msc2.visible=this.autoCheckBox.visible=this.addBtn.visible=this._addTimesBtnClip.visible=!1),this._btnList.selectedIndex=0;var t=a.instance.cfgs;this._list.datas=t;for(var e=r.instance.eraLevel,i=0,n=t.length;i<n;i++){var s=t[i][3];if(e>=s[0]&&e<=s[1]){this._curSelectIndex=i,this._list.selectedIndex=i;break}}this._list.scrollTo(136*this._list.selectedIndex),h.instance.getBoss(),h.instance.getBossTimes(),this.checkBoxState(),this.updateBossTimes(),this.updateHaloInfo()},B.prototype.checkBoxState=function(){var t=I.instance.getCustomDataByKey(2),e=1==(t?t[0]:0);1==n.zhizun.ZhizunModel.instance.state?this.autoCheckBox.selected=e:this.autoCheckBox.selected=!1},B.prototype.gotoHandler=function(){this._selectedBoss&&(t.checkUseTicketBySceneType(10,this._selectedBoss[1])||h.instance.reqEnterScene(this._selectedBoss[0],this._selectedBoss[1]))},B.prototype.getTimes=function(){var t=this._selectedBoss[0],e=p.instance.getCfgById(t),i=c.instance.getBossTimesBySceneType(e[7]);return i?[i[2],i[1]]:[0,0]},B.prototype.addHandler=function(){if(this._selectedBoss){var t={mapId:1,buyTimes:1,type:67,sceneCrossBoss:this._selectedBoss},e=_.instance.getItemsById(20730010);0<e.length?n.bag.BagUtil.openBagItemTip(e[0]):WindowManager.instance.openDialog(59,t)}},B.prototype.updateBoss=function(){if(this._selectedBoss){var t=c.instance.getBossInfoById(this._selectedBoss[2]);if(t){if(t[2][0])this.stateBox.visible=!1,this.timeTxt.visible=!0,this._reviveTimeStamp=t[2][2],this._reviveTimeStamp>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.reviveCDHandler),this.reviveCDHandler()):Laya.timer.clear(this,this.reviveCDHandler),this.proBg.visible=this.proBar.visible=this.proTxt.visible=!1;else{var e=t[2][5];1===e?this.stateBox.visible=!1:(this.stateBox.visible=!0,1<e?(this.stateTxt.text="暴怒中",this.stateTxt.color=this.changeTxt.color="#ff3e3e",this.changeTxt.text="血量增加"+Math.round(100*(e-1))+"%"):(this.stateTxt.text="虚弱中",this.stateTxt.color=this.changeTxt.color="#50ff28",this.changeTxt.text="血量减少"+Math.round(100*(1-e))+"%")),this.timeTxt.visible=!1,Laya.timer.clear(this,this.reviveCDHandler),this.proBg.visible=this.proBar.visible=this.proTxt.visible=!0;var i=t[2][1];this._proCtrl.value=i,this._proCtrl.txt=(100*i).toFixed(0===i||1===i?0:2)+"%"}this.checkChallenge()}}},B.prototype.reviveCDHandler=function(){this._reviveTimeStamp>GlobalData.serverTime?this.timeTxt.text="复活倒计时："+y.timeStampToMMSS(this._reviveTimeStamp):(this.timeTxt.visible=!1,Laya.timer.clear(this,this.reviveCDHandler),this.updateBoss())},B.prototype.selectBossHandler=function(){if(this._list.selectedIndex!=this._curSelectIndex)return console.log("return，，，，，，，"),n.notice.SystemNoticeManager.instance.addNotice("只可挑战当前转生级数的BOSS",!0),void(this._list.selectedIndex=this._curSelectIndex);this._selectedBoss=this._list.selectedData;var t=this._selectedBoss[6];this._joinAward.dataSource=[t[0][0],t[0][1],0,null],t=this._selectedBoss[7],this._killAward.dataSource=[t[0][0],t[0][1],0,null],t=this._selectedBoss[9];for(var e=0;e<4;e++)this._rankAwards[e].dataSource=[t[e][0],t[e][1],0,null];var i=this._selectedBoss[2];this.nameTxt.text=u.instance.getMonsterName(i),this.updateBoss(),this.selectBossModel()},B.prototype.selectBossModel=function(){var t=u.instance.getMonsterRes(this._selectedBoss[2]),e=g.instance.getCfgById(t);this._modelClip.reset(t),this._modelClip.avatarScale=e[10]?e[10]:1,this._modelClip.avatarRotationX=e[6],this._modelClip.avatarRotationY=e[7],this._modelClip.avatarY=e[9],this._modelClip.avatarX=e[8],this.observationItem.data=[[this._modelClip,0]]},B.prototype.updateBossTimes=function(){if(this._selectedBoss){var t=this._selectedBoss[0],e=p.instance.getCfgById(t),i=c.instance.getBossTimesBySceneType(e[7]);i&&(this.timesTxt.text=i[2]+"/"+i[1],0===i[2]?this.timesTxt.color="#e6372e":this.timesTxt.color="#00ad35"),this.checkChallenge(),this.onUpdatePrivilege()}},B.prototype.checkChallenge=function(){if(this._selectedBoss){var t=c.instance.getBossInfoById(this._selectedBoss[2]);if(t){var e=this._selectedBoss[0],i=p.instance.getCfgById(e),n=c.instance.getBossTimesBySceneType(i[7]);n&&(!t[2][0]&&0<n[2]?m.thisPlay(this._btnClip):m.thisStop(this._btnClip))}}},B.prototype.rankHandler=function(){this._selectedBoss&&WindowManager.instance.openDialog(88,[this._selectedBoss[2],1])},B.prototype.autoCheckBoxHandler=function(){if(1==n.zhizun.ZhizunModel.instance.state){this.autoCheckBox.selected=!this.autoCheckBox.selected;var t=[[2,[this.autoCheckBox.selected?1:0]]];b.instance.setCustomizeData(t)}else y.alert("温馨提示","您未激活至尊特权，不可自动挑战，是否前往激活？",[Handler.create(this,this.okBtnHandel),"确定"],[null,"取消"],null,!0)},B.prototype.okBtnHandel=function(){WindowManager.instance.open(351)},B.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnList=this.destroyElement(this._btnList),this._list=this.destroyElement(this._list),this._proCtrl=this.destroyElement(this._proCtrl),this._joinAward=this.destroyElement(this._joinAward),this._killAward=this.destroyElement(this._killAward),this._rankAwards=this.destroyElement(this._rankAwards),this._btnClip=this.destroyElement(this._btnClip),this._modelClip=this.destroyElement(this._modelClip),this._addTimesBtnClip=this.destroyElement(this._addTimesBtnClip),this.observationItem=this.destroyElement(this.observationItem),o.prototype.destroy.call(this,t)},B.prototype.onHaloBtnClick=function(){WindowManager.instance.open(1493)},B.prototype.updateHaloInfo=function(){n.halo.HaloModel.instance.haloOpen&&(this.haloTxt.text=n.halo.HaloModel.instance.isHalo()?"可获取额外神源石":"获取额外神源石",this.haloTxt.underline=!n.halo.HaloModel.instance.isHalo(),this.haloTxt.mouseEnabled=!n.halo.HaloModel.instance.isHalo(),this.haloTxt.typeset())},x=B,i.ThreeWorldsPanel=x}(modules=modules||{}),function(o){var a,n,t,s,e,i,r;function l(){return n.call(this)||this}a=o.dungeon||(o.dungeon={}),t=ui.SingleInspireAlertUI,s=o.config.BlendCfg,e=o.player.PlayerModel,i=o.common.CommonUtil,n=t,__extends(l,n),l.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.inspireBtn,this,this.inspireHandler),this.onAutoGlobalEvt("DUNGEON_INSPIRE_UPDATE",this,this.inspireUpdate)},l.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.inspireUpdate(!0)},l.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t);var e=t;1===(this.dataSource=e)?(this.coinImg.skin="common/icon_tongyong_1.png",this.coinTxt.text=""+s.instance.getCfgById(10304)[1][0]):2===e&&(this.coinImg.skin="common/icon_tongyong_2.png",this.coinTxt.text=""+s.instance.getCfgById(10305)[1][0]);var i=.5*(120-this.coinTxt.textWidth);this.coinTxt.x=280+i,this.coinImg.x=236+i},l.prototype.inspireHandler=function(){if(1===this.dataSource){if(e.instance.copper<s.instance.getCfgById(10304)[1][0])return void i.noticeError(12106)}else{if(2!==this.dataSource)return;if(e.instance.ingot<s.instance.getCfgById(10305)[1][0])return i.noticeError(12107),void i.goldNotEnoughAlert()}a.DungeonCtrl.instance.reqInspire(this.dataSource)},l.prototype.inspireUpdate=function(t){void 0===t&&(t=!1);var e=a.DungeonModel.instance.inspires;if(e){for(var i=0,n=0,s=e.length;n<s;n++)i+=e[n][2];this.curInspireTxt.text="当前鼓舞：攻击+"+(100*i).toFixed(0)+"%",t||o.notice.SystemNoticeManager.instance.addNotice("鼓舞成功，角色增加"+(100*i).toFixed(0)+"%攻击")}else this.curInspireTxt.text="当前鼓舞：攻击+0%"},r=l,a.SingleInspireAlert=r}(modules=modules||{}),function(w){var x,e,t,i,s,B,n,o,a,P,r;function l(){return null!==e&&e.apply(this,arguments)||this}x=w.magicPosition||(w.magicPosition={}),t=ui.MagicPositionViewUI,i=w.bag.BagItem,s=Laya.Image,B=w.config.XianweiRiseCfg,n=utils.tween.TweenGroup,o=w.config.BlendCfg,a=w.common.SimpleList,P=w.config.PrivilegeCfg,e=t,__extends(l,e),l.prototype.destroy=function(t){void 0===t&&(t=!0),this._tweenGroup=this.destroyElement(this._tweenGroup),this._list=this.destroyElement(this._list),this._waveClip=this.destroyElement(this._waveClip),this._btnClip=this.destroyElement(this._btnClip),this._dailyGet=this.destroyElement(this._dailyGet),this._upImg=this.destroyElement(this._upImg),this._upTxt=this.destroyElement(this._upTxt),this._attrName=this.destroyElement(this._attrName),this._attr=this.destroyElement(this._attr),e.prototype.destroy.call(this,t)},l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerY=this.centerX=0,this._list=a.create(x.MagicPositionItem,622,70,1,1,0,8),this._list.height=490,this._list.width=622,this._list.pos(49,632),this.addChild(this._list),this._dailyGet=new Array,this._dailyGet[0]=new i,this.addChild(this._dailyGet[0]),this._dailyGet[0].scale(.8,.8),this._dailyGet[1]=new i,this.addChild(this._dailyGet[1]),this._dailyGet[1].scale(.8,.8),this._showX=this._list.x+36,this._upImg=[this.attrAddImg1,this.attrAddImg2,this.attrAddImg3],this._upTxt=[this.attrAdd1,this.attrAdd2,this.attrAdd3],this._attr=[this.attr1,this.attr2,this.attr3],this._attrName=[this.attrName1,this.attrName2,this.attrName3],this._waveClip=CommonUtil.creatEff(this.con,"wave",7),this._waveClip.play(),this._waveClip.pos(0,130,!0),this._btnClip=CommonUtil.creatEff(this.getBtn,"btn_light",15),this._btnClip.scale(.65,.65),this._btnClip.pos(-6,-7),this._tweenGroup=new n,this.ylqImg.visible=this.awardName.visible=this.showAward.visible=!1},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.rightBtn,this,this.rightBtnHandler),this.onAutoClick(this.leftBtn,this,this.leftBtnHandler),this.onAutoGlobalEvt("MAGIC_POSITION_UPDATE",this,this.updateAllInfo),this.onAutoGlobalEvt("MAGIC_POSITION_TASK_UPDATE",this,this.updateListInfo),this.onAutoGlobalEvt("MAGIC_POSITION_GET_AWARD",this,this.showGetEffect)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.MPAttr.text="仙位压制：高品阶仙位玩家对低品阶造成伤害增加"+100*o.instance.getCfgById(42001)[1][0]+"%",this._showPage=x.MagicPositionModel.Instance.position,this._waveClip.play(),this.stateInfo(),this.updateListInfo(),this.turnPageHandler()},l.prototype.close=function(){this._tweenGroup.removeAll(),w.common.ItemRenderNoticeManager.instance.stop(),e.prototype.close.call(this)},l.prototype.updateAllInfo=function(){this.stateInfo(),x.MagicPositionModel.Instance.isLevelUp&&(this._showPage=x.MagicPositionModel.Instance.position),this.turnPageHandler()},l.prototype.updateListInfo=function(){var t=w.common.ItemRenderNoticeManager.instance.index;if(null==t){var e=this._list.scrollPos;return this._list.datas=x.MagicPositionModel.Instance.tasks,void(this._list.scrollPos=e)}var i=this._list.items[t];w.common.ItemRenderNoticeManager.instance.addNotice(i,"MAGIC_POSITION_TASK_UPDATE")},l.prototype.stateInfo=function(){var t=B.instance.getXianweiRiseByLevel(x.MagicPositionModel.Instance.position);t&&(this.powerNum.value=t[5].toString())},l.prototype.turnPageHandler=function(){var t=B.instance.maxLv,e=B.instance.getXianweiRiseByLevel(this._showPage);if(e){this.turnBtnShow(),this.stageImg.skin=""+x.MagicPositionUtil.getSkinByLv(this._showPage);var i=e[10];this.positionName.skin="assets/icon/ui/position_name/"+i+".png";var n,s=e[6],o=e[7],a=e[8],r=[s,o,a];if(this._showPage>=t)this.setUpAttr(!1,r),this.ylqImg.visible=this.awardName.visible=this.showAward.visible=!1,n=B.instance.getXianweiRiseByLevel(this._showPage,-1)[2];else{var l=B.instance.getXianweiRiseByLevel(this._showPage,1);if(l){var h=[l[6]-s,l[7]-o,l[8]-a];this.setUpAttr(!0,r,h);var c=B.instance.getNextAwardCfgByLv(this._showPage);if(c){this.awardName.text=c[1]+"奖励",this.awardName.visible=this.showAward.visible=!0;var p=c[3],u=[p[0],p[1],0,null];this.showAward.dataSource=u,this.ylqImg.visible=Math.floor(this._showPage/100)<Math.floor(x.MagicPositionModel.Instance.position/100)}else this.ylqImg.visible=this.awardName.visible=this.showAward.visible=!1}n=e[2]}var d=x.MagicPositionModel.Instance.haveNum;if(this._showPage<x.MagicPositionModel.Instance.position)this._waveClip.y=1;else{var m=1-d/n;m<0?m=0:1<m&&(m=1),this._waveClip.y=120*m}this.numShow.text=d+"/"+n;var f=e[4][1],g=e[4][3],y=w.funcOpen.FuncOpenModel.instance.getFuncIsOpen(981);if(w.weekCard.WeekCardModel.instance.isVip&&y){for(var _=P.instance.getCfgByType(401)[1],v=0,I=0,b=_.length;I<b;I++)if(98===_[I][0]){v=_[I][1];break}f=(v+1)*e[4][1],g=(v+1)*e[4][3]}var C=[e[4][0],f,0,null];this._dailyGet[0].dataSource=C;var T=[e[4][2],g,0,null];this._dailyGet[1].dataSource=T,this.setGetAwardShow(),this.checkRedPoint()}},l.prototype.checkRedPoint=function(){this.right_dot.visible=!1,this.left_dot.visible=!1,-1!=x.MagicPositionModel.Instance.minPos&&(this._showPage<x.MagicPositionModel.Instance.maxPos&&(this.right_dot.visible=!0),this._showPage>x.MagicPositionModel.Instance.minPos&&(this.left_dot.visible=!0))},l.prototype.turnBtnShow=function(){this._showPage==B.instance.minLv?(this.leftBtn.visible=!1,this.rightBtn.disabled=!1):this._showPage==B.instance.maxLv?(this.rightBtn.disabled=this.rightBtn.visible=!1,this.leftBtn.visible=!0):this._showPage==B.instance.getSideId(x.MagicPositionModel.Instance.position,1)?(this.rightBtn.visible=this.rightBtn.disabled=!0,this.leftBtn.visible=!0):(this.rightBtn.disabled=!1,this.rightBtn.visible=this.leftBtn.visible=!0)},l.prototype.showGetEffect=function(){for(var t=function(t){var e=new s("magic_position/icon_xianshi_1.png");n.addChild(e),e.anchorX=e.anchorY=.5,e.scale(.8,.8);var i=n.globalToLocal(x.MagicPositionModel.Instance.showPoint,!0).y;e.pos(n._showX+35*t,i,!0),TweenJS.create(e,n._tweenGroup).to({x:364,y:360,alpha:.5},400+400*Math.random()).onComplete(function(){e&&e.destroy(!0)}).onStop(function(){e&&e.destroy(!0)}).start()},n=this,e=0;e<5;e++)t(e)},l.prototype.setUpAttr=function(t,e,i){if(t){this.rightBtn.visible=!0;for(var n=0;n<this._upImg.length;n++)this._upImg[n].visible=this._upTxt[n].visible=!0,this._upTxt[n].text=i[n].toString(),this._attrName[n].x=50,this._attr[n].x=110,this._attr[n].text=e[n].toString()}else for(this.rightBtn.visible=!1,n=0;n<this._upImg.length;n++)this._upImg[n].visible=this._upTxt[n].visible=!1,this._attrName[n].x=120,this._attr[n].x=180,this._attr[n].text=e[n].toString()},l.prototype.setGetAwardShow=function(){x.MagicPositionModel.Instance.checkHasDaily(this._showPage)?(this.getBtn.visible=!0,this._btnClip.play(),this.hasGet.visible=!1,this._dailyGet[0].pos(377,512),this._dailyGet[1].pos(463,512)):(this.getBtn.visible=!1,this._btnClip.stop(),this._showPage<=x.MagicPositionModel.Instance.position?(this.hasGet.visible=!0,this._dailyGet[0].pos(377,512),this._dailyGet[1].pos(463,512)):(this.hasGet.visible=!1,this._dailyGet[0].pos(443,512),this._dailyGet[1].pos(529,512)))},l.prototype.leftBtnHandler=function(){this._showPage=B.instance.getSideId(this._showPage,-1),this.turnPageHandler()},l.prototype.rightBtnHandler=function(){this._showPage=B.instance.getSideId(this._showPage,1),this.turnPageHandler()},l.prototype.getBtnHandler=function(){x.MagicPositionCtrl.Instance.getDailyAward(this._showPage)},r=l,x.MagicPositionPanel=r}(modules=modules||{}),function(t){var o,e,i,a,n;function s(){return e.call(this)||this}o=t.magicPosition||(t.magicPosition={}),i=ui.MagicPositionAlertUI,a=t.config.XianweiRiseCfg,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.clickCD=!0},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._lv=t,this.updateShow()},s.prototype.updateShow=function(){var t=a.instance.getXianweiRiseByLevel(this._lv),e=a.instance.getXianweiRiseByLevel(this._lv,-1);this.setAttr(t,e);var i=t[10];this.nameImg.skin="assets/icon/ui/position_name/"+i+".png",this.stageImg.skin=""+o.MagicPositionUtil.getSkinByLv(this._lv);var n=t[3];if(0<n.length){var s=[n[0],n[1],0,null];this.item.dataSource=s,this.itemBox.visible=!0}else this.itemBox.visible=!1},s.prototype.setAttr=function(t,e){var i=[this.attrTxt_0,this.attrTxt_1,this.attrTxt_2];[t[6]-e[6],t[7]-e[7],t[8]-e[8]].forEach(function(t,e){i[e].text="+"+t})},n=s,o.MagicPositionAlter=n}(modules=modules||{}),function(a){var i,n,t,e,s,r,l,o,h,c;function p(){return n.call(this)||this}i=a.threeWorlds||(a.threeWorlds={}),t=ui.ThreeWorldsRankUI,e=Laya.Event,s=a.common.CustomList,r=a.dungeon.DungeonModel,l=a.player.PlayerModel,o=a.config.BlendCfg,h=a.dungeon.DungeonCtrl,n=t,__extends(p,n),p.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),n.prototype.destroy.call(this)},p.prototype.initialize=function(){n.prototype.initialize.call(this),this._list=new s,this._list.scrollDir=1,this._list.hCount=1,this._list.spaceY=10,this._list.itemRender=i.ThreeWorldsRankItem,this._list.width=530,this._list.height=530,this._list.pos(68,184,!0),this.addChild(this._list)},p.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.okBtn.on(e.CLICK,this,this.close),GlobalData.dispatcher.on("THREE_WORLDS_UPDATE_BOSS_RANK_RECORD",this,this.updateRank),GlobalData.dispatcher.on("DUNGEON_BOSS_RANKS_UPDATE",this,this.updateHurtRank)},p.prototype.offEvt=function(){n.prototype.offEvt.call(this),this.okBtn.off(e.CLICK,this,this.close),GlobalData.dispatcher.off("THREE_WORLDS_UPDATE_BOSS_RANK_RECORD",this,this.updateRank),GlobalData.dispatcher.off("DUNGEON_BOSS_RANKS_UPDATE",this,this.updateHurtRank),Laya.timer.clear(this,this.loopHandler)},p.prototype.onOpened=function(){n.prototype.onOpened.call(this),2!==this._type&&3!==this._type||(this.updateHurtRank(),Laya.timer.loop(1e3,this,this.loopHandler),this._duration=o.instance.getCfgById(10303)[1][0],this.loopHandler())},p.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t);var e=t[0];this._type=t[1],1===this._type?(this.bgImg.height=this.height=864,this.okBtn.visible=!1,this.titleTxt.text="上期排名奖励列表",i.ThreeWorldsCtrl.instance.getBossRankRecord(e),this.closeOnSide=!0):2===this._type?(this.bgImg.height=this.height=941,this.okBtn.visible=!0,this.titleTxt.text="本次伤害排名",this.closeOnSide=!1):3===this._type&&(this.bgImg.height=this.height=941,this.okBtn.visible=!0,this.titleTxt.text="本次支援排名",this.closeOnSide=!1,i.ThreeWorldsCtrl.instance.getBossRankRecord(e)),p.type=this._type},p.prototype.close=function(){1!=this._type&&h.instance.reqEnterScene(0),n.prototype.close.call(this)},p.prototype.updateRank=function(){if(2!=this._type&&4!==this._type){var t=i.ThreeWorldsModel.instance.bossRankRecord;if(t){this._list.datas=t[1];var e=t[2];this.myRankTxt.text="我的排名："+(0===e?"未上榜":e),this.myDamageTxt.text="我的伤害："+CommonUtil.bigNumToString(t[3])}}},p.prototype.updateHurtRank=function(){if(2===this._type){var t=r.instance.ranks;if(t){this._list.datas=10<t.length?t.slice(0,10):t;for(var e=0,i=0,n=0,s=t.length;n<s;n++){var o=t[n][0];if(o[0]===l.instance.actorId){e=o[2],i=t[n][1];break}}this.myRankTxt.text="我的排名："+(0===e?"未上榜":e),this.myDamageTxt.text="我的伤害："+a.common.CommonUtil.bigNumToString(i)}}},p.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},c=p,i.ThreeWorldsRankPanel=c}(modules=modules||{}),function(l){var t,h,e,i,c,o,p,u,n,s,d,m,a;function r(){return h.call(this)||this}t=l.threeWorlds||(l.threeWorlds={}),e=ui.ThreeWorldsRBViewUI,i=l.bag.BaseItem,c=l.dungeon.DungeonModel,o=l.player.PlayerModel,p=l.scene.SceneModel,u=l.config.SceneCrossBossCfg,n=l.dungeon.DungeonCtrl,s=l.common.CustomClip,d=l.common.CommonUtil,m=l.common.ShakeUtils,h=e,__extends(r,h),r.prototype.initialize=function(){h.prototype.initialize.call(this),this._joinAwards1={},this.zOrder=-1,this.right=0,this.bottom=260,this.closeByOthers=!1,this.layer=3,this.isExpanded=!0,this._firstAwardItem=new i,this.addChild(this._firstAwardItem),this._firstAwardItem.pos(354,156,!0),this._commonAwardItem=new i,this.addChild(this._commonAwardItem),this._commonAwardItem.pos(354,370,!0),this._prizeEffect=s.create("assets/effect/ok_state.atlas","ok_state",8),this._prizeEffect.pos(224,250,!0),this._prizeEffect.scale(1.4,1.4,!0)},r.prototype.onEvt=function(){h.prototype.onEvt.call(this);var t=this;t.onAutoClick(t.inspireBtn,t,t.inspireHandler),t.onAutoClick(t.expandBtn,t,t.expandHandler),t.onAutoClick(t._commonAwardItem,t,t.joinAwardClickHandler),t.onAutoGlobalEvt("DUNGEON_UPDATE_JOIN_AWARD",t,t.updateJoinAward),t.onAutoGlobalEvt("DUNGEON_BOSS_RANKS_UPDATE",t,t.updateRank),t.onAutoGlobalEvt("DUNGEON_INSPIRE_UPDATE",t,t.updateInspire)},r.prototype.onOpened=function(){h.prototype.onOpened.call(this),m.instance.exe(this.inspireBtn,80,9,800),this.nameTxt1.text=this.nameTxt2.text=this.nameTxt3.text="",this.damageTxt1.text=this.damageTxt2.text=this.damageTxt3.text="";var t=p.instance.enterScene[0],e=p.instance.enterScene[3],i=u.instance.getCfgByMapIdAndLv(t,e);if(i){this._cfg=i;var n=l.festival.FestivalModel.instance.isXIanYu()[4];if(n[0]){if(o=i[11])for(var s=0;s<o.length;s++)if((r=o[s])&&r[0]===n[1]&&r){this._firstAwardItem.dataSource=[r[2],r[3],0,null];break}}else{var o=i[8][0][1][0];this._firstAwardItem.dataSource=[o[0],o[1],0,null]}this._joinAwards=i[5];var a=i[10];for(s=0;s<a.length;s++){var r;(r=a[s])&&(this._joinAwards1[r[0]]||(this._joinAwards1[r[0]]=[]),this._joinAwards1[r[0]].push(r))}this.updateJoinAward(),this.updateRank(),this.updateInspire()}},Object.defineProperty(r.prototype,"isExpanded",{set:function(t){this._isExpanded=t,this._isExpanded?(this.bgImg.y=318,this.bgImg.height=203,this.line1.visible=this.line2.visible=!0,this.nameTxt2.visible=this.damageTxt2.visible=!0,this.nameTxt3.visible=this.damageTxt3.visible=!0,this.nameTxt1.y=this.damageTxt1.y=375,this.damageRankTxt.y=335,this.expandBtn.y=337,this.expandBtn.skin="common/btn_tonyong_28.png"):(this.bgImg.y=386,this.bgImg.height=135,this.line1.visible=this.line2.visible=!1,this.nameTxt2.visible=this.damageTxt2.visible=!1,this.nameTxt3.visible=this.damageTxt3.visible=!1,this.nameTxt1.y=this.damageTxt1.y=441,this.damageRankTxt.y=403,this.expandBtn.y=405,this.expandBtn.skin="common/btn_tonyong_29.png")},enumerable:!0,configurable:!0}),r.prototype.inspireHandler=function(){WindowManager.instance.openDialog(51)},r.prototype.expandHandler=function(){this.isExpanded=!this._isExpanded},r.prototype.joinAwardClickHandler=function(){this._commonAwardItem.needTip||n.instance.getJoinAward()},r.prototype.updateJoinAward=function(){if(this._prizeEffect.stop(),this._prizeEffect.removeSelf(),c.instance.joinAward){for(var t,e,i=c.instance.joinAward||[],n=-1,s=0,o=i.length;s<o;s++){if(0===(t=i[s][1])){n=i[s][0],this._commonAwardItem.needTip=!0;break}if(1===t){n=i[s][0],this._commonAwardItem.needTip=!1,this._prizeEffect.play(),this.addChildAt(this._prizeEffect,this.getChildIndex(this.joinLvName)),this.damageDescTxt.text="点击领取",this.damageDescTxt.color=d.getColorByQuality(1);break}}if(-1===n)this.joinLvName.text="参与奖",this._commonAwardItem.needTip=!0,e=this._cfg[6][0],(a=l.festival.FestivalModel.instance.isXIanYu()[4])[0]?(r=this._joinAwards1[a[1]][0])&&(this._commonAwardItem.dataSource=[r[2],r[3],0,null]):this._commonAwardItem.dataSource=[e[0],e[1],0,null],this.damageDescTxt.text="已领完全部奖励",this.damageDescTxt.color="#4C5E8A";else{var a;if(this.joinLvName.text="参与奖励·"+"一二三四五六七八九十"[n],(a=l.festival.FestivalModel.instance.isXIanYu()[4])[0]){var r=this._joinAwards1[a[1]][n];this._commonAwardItem.dataSource=[r[2],r[3],0,null]}else e=this._joinAwards[n][1][0],this._commonAwardItem.dataSource=[e[0],e[1],0,null];1!==t&&(this.damageDescTxt.text=d.bigNumToString(this._joinAwards[n][0])+"伤害可领",this.damageDescTxt.color="#4C5E8A")}}},r.prototype.updateRank=function(){var t,e=c.instance.ranks;if(!e)return this.nameTxt1.text="",this.damageTxt1.text="",this.ownerTxt.text="",this.nameTxt2.text="",this.damageTxt2.text="",this.nameTxt3.text="",this.damageTxt3.text="",this.myRankTxt.text="",void(this.myDamageTxt.text="");0<e.length&&(t=e[0][0],this.nameTxt1.text=t[2]+"."+t[1],this.damageTxt1.text=""+d.bigNumToString(e[0][1]),this.ownerTxt.text=t[1],this.nameTxt1.color=t[0]===o.instance.actorId?"#50ff28":"#FFFFFF",this.damageTxt1.color=t[0]===o.instance.actorId?"#50ff28":"#FFFFFF"),1<e.length&&(t=e[1][0],this.nameTxt2.text=t[2]+"."+t[1],this.damageTxt2.text=""+d.bigNumToString(e[1][1]),this.nameTxt2.color=t[0]===o.instance.actorId?"#50ff28":"#FFFFFF",this.damageTxt2.color=t[0]===o.instance.actorId?"#50ff28":"#FFFFFF"),2<e.length&&(t=e[2][0],this.nameTxt3.text=t[2]+"."+t[1],this.damageTxt3.text=""+d.bigNumToString(e[2][1]),this.nameTxt3.color=t[0]===o.instance.actorId?"#50ff28":"#FFFFFF",this.damageTxt3.color=t[0]===o.instance.actorId?"#50ff28":"#FFFFFF");for(var i=!1,n=0,s=e.length;n<s;n++)if((t=e[n][0])[0]===o.instance.actorId){i=!0,this.myRankTxt.text="我的排名："+t[2],this.myDamageTxt.text=d.bigNumToString(e[n][1]);break}i||(this.myRankTxt.text="我的排名：未上榜",this.myDamageTxt.text="0")},r.prototype.updateInspire=function(){if(c.instance.inspires){for(var t=c.instance.inspires,e=0,i=0,n=t.length;i<n;i++)e+=t[i][2];this.damageTxt.text="攻击+"+(100*e).toFixed(0)+"%",150<=Number((100*e).toFixed(0))&&m.instance.clear()}},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._prizeEffect&&(this._prizeEffect.destroy(!0),this._prizeEffect=null),h.prototype.destroy.call(this,t)},r.prototype.close=function(){h.prototype.close.call(this),m.instance.clear()},a=r,t.ThreeWorldsRBPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return i.call(this)||this}e=t.warDisplay||(t.warDisplay={}),n=ui.WarDisplayUI,s=t.common.CustomClip,o=t.player.PlayerModel,a=utils.tween.TweenGroup,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerY=135,this.centerX=0,this.layer=7,this._addWarEffect=new s,this._addWarEffect.visible=!1,this._addWarEffect.loop=!1,this._addWarEffect.skin="assets/effect/addWarEffect.atlas",this._addWarEffect.frameUrls=["addWarEffect/1.png","addWarEffect/2.png","addWarEffect/3.png","addWarEffect/4.png","addWarEffect/5.png","addWarEffect/6.png"],this._addWarEffect.pos(-40,-20),this.addChild(this._addWarEffect),this._explodeEffect=new s,this._explodeEffect.visible=!1,this._explodeEffect.loop=!1,this._explodeEffect.skin="assets/effect/explodeEffect.atlas",this._explodeEffect.frameUrls=["explodeEffect/1.png","explodeEffect/2.png","explodeEffect/3.png","explodeEffect/4.png","explodeEffect/5.png","explodeEffect/6.png","explodeEffect/7.png","explodeEffect/8.png"],this._explodeEffect.pos(100,-60),this._explodeEffect.durationFrame=3,this.addChild(this._explodeEffect),this._tweenGroup=new a,this._bFight=this._nFight=0},l.prototype.onOpened=function(){var t=this;i.prototype.onOpened.call(this),this._explodeEffect.visible=!1,this._addWarEffect.visible=!1,this.bgImage.scaleX=this.bgImage.scaleY=1,this._addWarEffect.scaleX=this._addWarEffect.scaleY=1,TweenJS.create(this.bgImage,this._tweenGroup).to({scaleX:1.2,scaleY:1.2},100).start().yoyo(!0).onComplete(function(){t._addWarEffect.play(),t._addWarEffect.visible=!0,TweenJS.create(t._addWarEffect,t._tweenGroup).to({scaleX:1.2,scaleY:1.2},100)}),this.initWar(),this.tweenFight()},l.prototype.close=function(){i.prototype.close.call(this),this._tweenGroup.removeAll(),this._explodeEffect.visible=!1,this._explodeEffect.stop(),this._addWarEffect.visible=!1,this._addWarEffect.stop(),this._bFight=this._nFight=0},l.prototype.initWar=function(){var t=o.instance.fight,e=o.instance.beforefight;e==this._nFight?(this._nFight=t,e=this._bFight):(this._nFight=t,this._bFight=e),this.warnum.value=t.toString(),this.addwarnum.value="+"+(t-e).toString(),this.addwarnum.visible=!1,this.addwarnum.y=0},l.prototype.tweenFight=function(){this._loopCount=0,Laya.timer.loop(50,this,this.loopFight)},l.prototype.loopFight=function(){for(var t=this,e=this.warnum.value,i="",n=0,s=e.length;n<s;n++)i+=(parseInt(e[n])+1)%10;this.warnum.value=i,this._loopCount++,10===this._loopCount&&(Laya.timer.clear(this,this.loopFight),this._nFight=this._bFight=0,this.addwarnum.visible=!0,this._explodeEffect.visible=!0,this._explodeEffect.play(),TweenJS.create(this.addwarnum,this._tweenGroup).to({y:-20},500).start().onComplete(function(){Laya.timer.once(500,t,t.close)}))},l.prototype.updataWar=function(){this._tweenGroup.removeAll(),Laya.timer.clearAll(this),this._explodeEffect.visible=!1,this._explodeEffect.stop(),this.initWar(),this.tweenFight()},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._tweenGroup=this.destroyElement(this._tweenGroup),i.prototype.destroy.call(this,t)},r=l,e.WarDisplay=r}(modules=modules||{}),function(I){var t,o,a,b,r,e;function l(){this._xianyu=0,this._xianyuLimit=0,this._f5Time=0,this._fuyu=0,this.oneNum=0,this.twoNum=0,this.threeNum=0,this.id=0,this._everyTimeFuYuan=0,this._stateList=new Array,this._idList=new Array,this._selectItem=new Array,this._blessing=new Array,this._redArr={},this.zekouTable={},this.type=5,this.getBlendCfgShuJu()}t=I.zxian_yu||(I.zxian_yu={}),o=I.redPoint.RedPointCtrl,a=I.bag.BagModel,b=I.config.TreasureCfg,r=I.funcOpen.FuncOpenModel,Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"stateList",{get:function(){return this._stateList},set:function(t){this._stateList=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fuyu",{get:function(){return this._fuyu},set:function(t){this._fuyu=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"idList",{get:function(){return this._idList},set:function(t){this._idList=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"f5Time",{get:function(){return this._f5Time},set:function(t){this._f5Time=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"xianyu",{get:function(){return this._xianyu},set:function(t){this._xianyu=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"xianyuLimit",{get:function(){return this._xianyuLimit},set:function(t){this._xianyuLimit=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"selectItem",{get:function(){return this._selectItem},set:function(t){this._selectItem=t},enumerable:!0,configurable:!0}),l.prototype.getBlessing=function(t){return this._blessing[t]},l.prototype.getFuYuanAward=function(){for(var t=0;t<this.taskActivesValue.length;t++){for(var e=this.taskActivesValue[t],i=!0,n=0;n<this.stateList.length;n++)if(this.stateList[n]==t){i=!1;break}if(i)return[e,t]}return[this.taskActivesValue[this.taskActivesAward.length-1],this.taskActivesAward.length-1]},l.prototype.getMaxVlaue=function(){return this.taskActivesValue[this.taskActivesAward.length-1]},l.prototype.setRP=function(){var t=r.instance.getFuncIsOpen(233);if(a.instance.getItemsByBagId(6)){var e=a.instance.getItemsByBagId(6).concat(),i=e&&0<e.length;o.instance.setRPProperty("zxianYuBagPanelRP",t&&i)}var n=l.instance.getFuYuanAward(),s=n&&l.instance.fuyu>=n[0];o.instance.setRPProperty("zxianYuTreasurePanelRP",t&&s)},l.prototype.getBlendCfgShuJu=function(){this._everydayMaxLimit=I.config.BlendCfg.instance.getCfgById(48001)[1],this._everyTimeFuYuan=I.config.BlendCfg.instance.getCfgById(48003)[1][0],this.updateVlaue=I.config.BlendCfg.instance.getCfgById(48005)[1],this.getTask(),this.oneNum=b.instance.getItemConditionByGrad(5,0)[1],this.twoNum=b.instance.getItemConditionByGrad(5,1)[1],this.threeNum=b.instance.getItemConditionByGrad(5,2)[1];var t=b.instance.getItemConditionByGrad(5,0);this.id=t[0];for(var e=I.config.BlendCfg.instance.getCfgById(67002)[1],i=0;i<e.length;i+=2){var n=e[i],s=e[i+1];this.zekouTable[n]=s}},l.prototype.getTask=function(){var t;if(this.taskActivesValue=[],this.taskActivesAward=[],I.festival.FestivalModel.instance.isXIanYu()[1]){t=I.config.BlendCfg.instance.getCfgById(48010)[2];for(var e=I.festival.FestivalModel.instance.getNowFestivalType(13),i=0,n=0,s=t.length;n<s;n++){var o=t[n].substr(1,t[n].length-2).split("#");if(parseInt(o[3])===e){var a=parseInt(o[0]);this.taskActivesValue[i]=a,this.taskActivesAward[i]||(this.taskActivesAward[i]=[]),this.taskActivesAward[i].push(parseInt(o[1])),this.taskActivesAward[i].push(parseInt(o[2])),i++}}}else for(n=0,s=(t=I.config.BlendCfg.instance.getCfgById(48004)[2]).length;n<s;n++)o=t[n].substr(1,t[n].length-2).split("#"),a=parseInt(o[0]),this.taskActivesValue[n]=a,this.taskActivesAward[n]||(this.taskActivesAward[n]=[]),this.taskActivesAward[n].push(parseInt(o[1])),this.taskActivesAward[n].push(parseInt(o[2]))},l.prototype.getZhanShi=function(){var t=I.festival.FestivalModel.instance.isXIanYu();this._awardAee=new Array;var e=I.config.BlendCfg.instance.getCfgById(48008)[1],i=I.config.BlendCfg.instance.getCfgById(48009)[1];if(t[1]){var n=I.festival.FestivalModel.instance.getNowFestivalType(13),s=I.festival.FestivalModel.instance.info[n],o=I.festival.FestivalModel.instance.getHuoDongType(n);if(!s||!o)return;for(var a=s[5],r=s[1],l=b.instance.getItemShow(5,n,a,r)[0],h=l?l[8]:[],c=0;c<h.length;c+=4){var p=h[c],u=h[c+1],d=h[c+2],m=h[c+3];if(p&&u&&d&&m&&p===n){this.gaiLvGongShi=m,e=I.config.BlendCfg.instance.getCfgById(u)[1],i=I.config.BlendCfg.instance.getCfgById(d)[1];break}}}var f=0,g=0;for(c=0;c<e.length;c++){var y=e[c];this._awardAee[g]||(this._awardAee[g]=new Array),this._awardAee[g][f]=y,2==++f&&(f=0,g++)}this._awardAee1=new Array;var _=0,v=0;for(c=0;c<i.length;c++)y=i[c],this._awardAee1[v]||(this._awardAee1[v]=new Array),this._awardAee1[v][_]=y,2==++_&&(_=0,v++)},e=l,t.ZXianYuModel=e}(modules=modules||{}),function(s){var d,m,t,o,a,e,r,l,h,i,c,f,g,y,n,p,u,_,v,I,b,C,T,w;function x(){return null!==m&&m.apply(this,arguments)||this}d=s.bossHome||(s.bossHome={}),t=ui.BossHomeViewUI,o=s.common.BtnGroup,a=s.common.CommonUtil,e=s.common.CustomList,r=Laya.Button,l=s.bag.BaseItem,h=s.common.CustomClip,i=s.config.MonsterResCfg,c=Laya.Image,f=s.dungeon.DungeonModel,g=s.config.MonsterCfg,y=s.config.SceneHomeBossCfg,n=s.common.AvatarClip,p=s.config.ExteriorCfg,u=s.born.BornModel,_=s.bossDungeon.BossDungeonModel,v=s.customData.CustomDataModel,I=s.customData.CustomDataCtrl,b=s.notice.SystemNoticeManager,C=s.zxian_yu.ZXianYuModel,T=s.common.SimpleList,m=t,__extends(x,m),x.prototype.initialize=function(){m.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnList=T.create(s.forbiddenBoss.BossBtnItem,158,172,2,1,-10,0),this._btnList.pos(25,982),this._btnList.size(666,172),this.addChildAt(this._btnList,4),this._btnList.datas=[41,246,42,723,777],this._showAwards=new Array,this._layerShow=new Array,this._layerRPImgs=new Array,this.layerShowPanel.hScrollBarSkin="",this.initAwardsInfo(),this._selectBossIndex=-1,this._selectLayerIndex=-1,this._list=new e,this._list.scrollDir=1,this._list.itemRender=d.BossHomeItem,this._list.vCount=5,this._list.hCount=1,this._list.width=218,this._list.height=780,this._list.spaceY=-18,this._list.x=0,this._list.y=-7,this.listShow.addChild(this._list),this._btnClip=h.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,358,768),this._modelClip=n.create(1024,1024,1024),this.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.x=475,this._modelClip.y=420,this._modelClip.scale(.7,.7,!0),a.setHTMLPro(this.conditionTxt,"#4C5E8A","SimHei",22),this.conditionTxt.mouseEnabled=!1,this.conditionTxt.style.wordWrap=!1,this.regGuideSpr(67,this.goBtn)},x.prototype.initAwardsInfo=function(){for(var t,e=0;e<8;e++){this._showAwards[e]=new l;var i=296+e%4*90,n=554+90*Math.floor(e/4);this.addChild(this._showAwards[e]),this._showAwards[e].pos(i,n),this._showAwards[e].scale(.8,.8),this._showAwards[e].dataSource=null}for(e=0;e<d.BossHomeModel.instance.getTotalLayer();e++){this._layerShow[e]=new r("common/btn_tongyong_1.png",d.BossHomeModel.instance.getBtnNameByLayer(e)),this.layerShowPanel.addChild(this._layerShow[e]);var s=150*e;this._layerShow[e].pos(s,10),this._layerShow[e].stateNum=2,this._layerShow[e].labelColors="#4c5e8a,#4c5e8a,#4c5e8a,#4c5e8a",this._layerShow[e].labelFont="SimHei",this._layerShow[e].labelSize=26,this._layerRPImgs[e]=new c("common/image_common_xhd.png"),this.layerShowPanel.addChild(this._layerRPImgs[e]),this._layerRPImgs[e].zOrder=1,this._layerRPImgs[e].pos(124+s,4,!0),this._layerRPImgs[e].visible=!1}this._layerGroup=new o,(t=this._layerGroup).setBtns.apply(t,this._layerShow)},x.prototype.onOpened=function(){if(m.prototype.onOpened.call(this),PlatParams.isCloseRecharge&&(this.autoCheckBox.visible=this.msc1.visible=this.msc2.visible=this.conditionTxt.visible=!1),this._btnList.selectedIndex=2,this._selectLayerIndex=-1,this._openParam){this._layerGroup.selectedIndex=this._openParam[0],this.layerSelectHandler(!0);var t=this._openParam[1],e=d.BossHomeModel.instance.getIndexByBossId(t);-1!=e&&(this._list.selectedIndex=e,this.bossSelectHandler())}else{for(var i=f.instance.follows,n=void 0,s=[],o=0,a=i.length;o<a;o++){var r=i[o];if(r[1]){var l=r[0];if(9===g.instance.getMonsterById(l)[1]){var h=f.instance.getBossInfoById(l);if(h&&!h[2][0]){var c=y.instance.getCfgByBossId(l)[1];s.push(c)}}}}if(0<s.length&&(s.sort(function(t,e){return t-e}),n=s[0]),null!=n)this._layerGroup.selectedIndex=n-1,this.layerSelectHandler(!0);else{var p=d.BossHomeModel.instance.getSelectLayerIndex();if(-1===p)this._layerGroup.selectedIndex=0;else{var u=d.BossHomeModel.instance.getIndexByEra();this._layerGroup.selectedIndex=u<=p?u:p}this.layerSelectHandler(!0)}}this.checkRP(),this.checkBoxState()},x.prototype.checkBoxState=function(){var t=v.instance.getCustomDataByKey(0),e=1==(t?t[0]:0);1==s.zhizun.ZhizunModel.instance.state?this.autoCheckBox.selected=e:this.autoCheckBox.selected=!1},x.prototype.autoCheckBoxHandler=function(){if(1==s.zhizun.ZhizunModel.instance.state){this.autoCheckBox.selected=!this.autoCheckBox.selected;var t=[[0,[this.autoCheckBox.selected?1:0]]];I.instance.setCustomizeData(t)}else a.alert("温馨提示","您未激活至尊特权，不可自动挑战，是否前往激活？",[Handler.create(this,this.okBtnHandel),"确定"],[null,"取消"],null,!0)},x.prototype.okBtnHandel=function(){WindowManager.instance.open(351)},x.prototype.close=function(){m.prototype.close.call(this);for(var t=0,e=this._layerRPImgs.length;t<e;t++)this._layerRPImgs[t].visible=!1;h.thisStop(this._btnClip)},x.prototype.setOpenParam=function(t){m.prototype.setOpenParam.call(this,t),this._openParam=t},x.prototype.onEvt=function(){m.prototype.onEvt.call(this),this.onAutoEvt(this._btnList,"select",this,this.selectHandler),this.onAutoClick(this.goBtn,this,this.goBtnHanlder),this.onAutoClick(this.followBtn,this,this.followHandler),this.onAutoClick(this.tipsBtn,this,this.tipsBtnHandler),this.onAutoClick(this.autoTipsBtn,this,this.autoTipsBtnHandler),this.onAutoEvt(this._list,"select",this,this.bossSelectHandler),this.onAutoEvt(this._layerGroup,"change",this,this.layerSelectHandler),this.onAutoClick(this.leftBtn,this,this.leftBtnHandler),this.onAutoClick(this.rightBtn,this,this.rightBtnHandler),this.onAutoClick(this.autoCheckBox,this,this.autoCheckBoxHandler),this.onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.updateLevel),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.bossUpdateHandler),this.onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.followsUpdateHandler),this.onAutoGlobalEvt("BOSS_HOME_ZHIZUN_UPDATE",this,this.checkBoxState),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},x.prototype.updatePlatChangeRecharge=function(){this.autoCheckBox.visible=this.msc1.visible=this.msc2.visible=this.conditionTxt.visible=!PlatParams.isCloseRecharge},x.prototype.selectHandler=function(){switch(this._btnList.selectedIndex){case 0:WindowManager.instance.open(75);break;case 1:WindowManager.instance.open(400);break;case 2:break;case 3:WindowManager.instance.open(1135);break;case 4:WindowManager.instance.open(1175)}2!=this._btnList.selectedIndex&&(this._btnList.selectedIndex=2)},x.prototype.goBtnHanlder=function(){var t=d.BossHomeModel.instance.checkSvipCondition(this._selectLayerIndex),e=this._selectLayerIndex+1,i=y.instance.getCfgByFirstLayer(e);if(this.checkEraCondition(e))t?this.gotoLayer(e):C.instance.xianyu>=i[13]?a.alert("提示","是否消耗"+i[13]+'仙玉进入boss之家？<span color="#ff3e3e">（消耗仙玉进入boss之家，被击败后会自动退出）</span>',[Handler.create(this,this.gotoLayer,[e]),"前往"],[null,"取消"]):a.vipLvNotEnoughAlert();else{var n=y.instance.getCfgByFirstLayer(e)[5][0];s.notice.SystemNoticeManager.instance.addNotice(a.numToUpperCase(n)+"转以上可进入",!0)}},x.prototype.gotoLayer=function(t){if(a.whetherInCopy())a.notChangeTips();else{_.instance.searchBossIds=d.BossHomeModel.instance.getBossIdsByLayer(this._selectLayerIndex);var e=f.instance.searchBoss(this._showBossId,_.instance.searchBossIds);d.BossHomeModel.instance.setSelectTarget(e,!0),_.instance.searchBossType=2121,d.BossHomeCtrl.instance.reqEnterScene(this._showMapId,t)}},x.prototype.checkEraCondition=function(t){var e=Math.floor(u.instance.lv/100),i=y.instance.getCfgByFirstLayer(t)[5];return e>=i[0]&&e<=i[1]},x.prototype.getEraConditionByLayer=function(t){var e=y.instance.getCfgByFirstLayer(t)[5][0];return 0===e?"":a.formatHtmlStrByColor("#b15315",a.numToUpperCase(e)+"转")+"以上，"},x.prototype.followHandler=function(){this.followBoss(!this.followBtn.selected,!0)},x.prototype.followBoss=function(t,e){void 0===e&&(e=!1),t&&d.BossHomeModel.instance.checkPlayerLevelHeigh(this._showBossId)&&(t=!1,e&&b.instance.addNotice("等级过高，击败无掉落，不可关注。",!0)),(this.followBtn.selected=t)!==d.BossHomeModel.instance.checkIsFollowBoss(this._showBossId)&&d.BossHomeCtrl.instance.setFollowBoss(this._showBossId,this.followBtn.selected)},x.prototype.updateLevel=function(){this.checkPlayerLevel()},x.prototype.tipsBtnHandler=function(){a.alertHelp(20027)},x.prototype.autoTipsBtnHandler=function(){a.alertHelp(20071)},x.prototype.bossSelectHandler=function(){this._selectBossIndex=this._list.selectedIndex,this.updateSelectBoss(),this.checkRP()},x.prototype.layerSelectHandler=function(t){void 0===t&&(t=!1),this._selectLayerIndex!=this._layerGroup.selectedIndex&&(this._selectLayerIndex=this._layerGroup.selectedIndex,this.updateLayerInfo()),t&&Laya.timer.callLater(this,this.scrollTo)},x.prototype.scrollTo=function(){this.layerShowPanel.scrollTo(150*this._selectLayerIndex,0)},x.prototype.leftBtnHandler=function(){this.layerShowPanel.scrollTo(this.layerShowPanel.hScrollBar.value-600,0)},x.prototype.rightBtnHandler=function(){this.layerShowPanel.scrollTo(this.layerShowPanel.hScrollBar.value+600,0)},x.prototype.updateLayerInfo=function(){var t=d.BossHomeModel.instance.getVipByLayer(this._selectLayerIndex),e=this.getEraConditionByLayer(this._selectLayerIndex+1),i=y.instance.getCfgByFirstLayer(this._selectLayerIndex+1),n=a.formatHtmlStrByColor("#b15315","SVIP"+t);this.conditionTxt.innerHTML=e+"可消耗"+i[13]+'<img src="common/shenghuyu.png"/>进入，'+n+"免费",a.centerChainArr(443,[this.conditionTxt]),this.conditionTxt.x+=248,this._list.datas=d.BossHomeModel.instance.getBossInfoByLayer(this._selectLayerIndex);for(var s=0,o=0;o<this._list.datas.length;o++)if(this._list.items[o].getRed()){s=o;break}this._list.selectedIndex=s,this._list.scrollToIndex(s),this.bossSelectHandler()},x.prototype.updateSelectBoss=function(){var t=d.BossHomeModel.instance.getBossInfoByIndex(this._selectBossIndex);if(!t)throw new Error("boss之家配置不存在! index->"+this._selectBossIndex);this._showBossId=t[2],this._showMapId=t[0],this.powerNum.value=t[8].toString();for(var e=t[6],i=0;i<8;i++){var n=[e[i][0],e[i][1],0,null];this._showAwards[i].dataSource=n}this.checkPlayerLevel(),this.followBoss(d.BossHomeModel.instance.checkIsFollowBoss(this._showBossId)),this.selectBossModel()},x.prototype.selectBossModel=function(){var t=i.instance.getMonsterRes(this._showBossId),e=p.instance.getCfgById(t);this._modelClip.reset(t),this._modelClip.avatarScale=e[10]?e[10]:1,this._modelClip.avatarRotationX=e[6],this._modelClip.avatarRotationY=e[7],this._modelClip.avatarY=e[9],this._modelClip.avatarX=e[8],this.observationItem.data=[[this._modelClip,0]]},x.prototype.checkPlayerLevel=function(){this.fightNotice.visible=d.BossHomeModel.instance.checkPlayerLevelHeigh(this._showBossId)},x.prototype.bossUpdateHandler=function(){this.checkRP()},x.prototype.followsUpdateHandler=function(){this.followBtn.selected=d.BossHomeModel.instance.checkIsFollowBoss(this._showBossId),this.checkRP()},x.prototype.checkRP=function(){for(var t=0,e=this._layerRPImgs.length;t<e;t++)this._layerRPImgs[t].visible=!1;var i=f.instance.follows,n=!1;for(t=0,e=i.length;t<e;t++){var s=i[t];if(s[1]){var o=s[0];if(9===g.instance.getMonsterById(o)[1]){var a=f.instance.getBossInfoById(o);if(a&&!a[2][0]){var r=y.instance.getCfgByBossId(o)[1];this._layerRPImgs[r-1].visible=!0,o===this._showBossId&&(n=!0)}}}}n?h.thisPlay(this._btnClip):h.thisStop(this._btnClip)},x.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnList=this.destroyElement(this._btnList),this._showAwards=this.destroyElement(this._showAwards),this._list=this.destroyElement(this._list),this._layerShow=this.destroyElement(this._layerShow),this._layerGroup=this.destroyElement(this._layerGroup),this._layerRPImgs=this.destroyElement(this._layerRPImgs),this._btnClip=this.destroyElement(this._btnClip),this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),m.prototype.destroy.call(this,t)},w=x,d.BossHomePanel=w}(modules=modules||{}),function(r){var t,s,e,i,l,h,n;function o(){return null!==s&&s.apply(this,arguments)||this}t=r.bossHome||(r.bossHome={}),e=ui.LeaveSenceAlertUI,i=Laya.Sprite,l=r.config.SceneCfg,h=r.scene.SceneModel,s=e,__extends(o,s),o.prototype.initialize=function(){s.prototype.initialize.call(this),this._maskSpr=new i,this._maskSpr.pos(137.5,137.5,!0),this.lightCircle.mask=this._maskSpr,this.closeOnSide=!1,this.tipTxt.text="复活倒计时"},o.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoGlobalEvt("WARFIRE_DEAD_TIMES",this,this.showUI)},o.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t);var e=t,i=r.scene.SceneModel.instance.enterScene[0];this._timeCfg=l.instance.getCfgById(i)[8],this.numClip.value=Math.floor(this._timeCfg/1e3).toString(),this.lightCircle.visible=!0,this.pointImg.visible=!0,this._leaveTime=GlobalData.serverTime+this._timeCfg;var n="";1==e[2]?n="[玩家]"+e[3]:2==e[2]&&(n="[BOSS]"+e[3]),this.killInfoHtml.style.align="center",this.killInfoHtml.innerHTML="<span style='color:#ffffff;font-size:24px'>您已被</span><span style='color:#e6372e;font-size: 24px'>"+n+"</span><span style='color:#ffffff;font-size: 24px'>击败了!</span>",this._maskSpr.graphics.clear(),this._maskSpr.graphics.drawCircle(0,0,137.5,"#FF0000"),this.pointImg.x=273,this.pointImg.y=85,Laya.timer.loop(1e3,this,this.loopHandler),this.showUI()},o.prototype.showUI=function(){if(39===l.instance.getCfgById(h.instance.enterScene[0])[7]){this.box1.visible=!0,this.bgImg.height=431,this.height=431,this.text1.text="玄火之力:"+r.fire_contention.FireContentionModel.instance.serialDeathNum+"层";for(var t=r.fire_contention.FireContentionModel.instance.getAllBuff(),e=[this.text2,this.text3,this.text4],i=["全属性","全属性","全属性"],n=0;n<e.length;n++){var s=e[n],o=t[n],a=i[n];s&&null!=o&&a?(s&&(s.visible=!0),s.text=a+":+"+o+"%"):s&&(s.visible=!1)}}else this.box1.visible=!1,this.bgImg.height=362,this.height=362},o.prototype.onClosed=function(){Laya.timer.clear(this,this.loopHandler),Laya.timer.clearAll(this),SceneCtrl.instance.reqRevive(),s.prototype.onClosed.call(this)},o.prototype.loopHandler=function(){var t=this._leaveTime-GlobalData.serverTime;if(t<=0)this._maskSpr.graphics.clear(),this.lightCircle.visible=!1,this.numClip.value="0",this.pointImg.pos(273,85),Laya.timer.clear(this,this.loopHandler),this.close();else{this._maskSpr.graphics.clear();var e=1-t/this._timeCfg*360;this._maskSpr.graphics.drawPie(0,0,137.5,-90+e,-90,"#FF0000"),e=e*Math.PI/180,this.pointImg.pos(273+88*Math.sin(e),174-88*Math.cos(e),!0),t=Math.ceil(.001*t),this.numClip.value=t.toString()}},n=o,t.LeaveScenceAlert=n}(modules=modules||{}),function(h){var n,c,t,p,s,i,u,e,d,o,m,a;function r(){return null!==c&&c.apply(this,arguments)||this}n=h.bossHome||(h.bossHome={}),t=ui.BoxOpenAlertUI,p=h.config.BlendCfg,s=h.bag.BagModel,i=h.bag.BaseItem,u=game.GameCenter,e=h.npc.NpcCtrl,d=h.config.SceneHomeBossCfg,o=h.bag.BagUtil,m=h.common.CommonUtil,c=t,__extends(r,c),r.prototype.initialize=function(){c.prototype.initialize.call(this),this._showAward=new Array,this.initAward()},r.prototype.destroy=function(){this._showAward=this.destroyElement(this._showAward),c.prototype.destroy.call(this)},r.prototype.initAward=function(){for(var t=0;t<6;t++){this._showAward[t]=new i,this.addChild(this._showAward[t]);var e=72+90*t;this._showAward[t].pos(e,250),this._showAward[t].scale(.8,.8),this._showAward[t].dataSource=null}},r.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoClick(this.addBtn,this,this.addTimesHandler),this.onAutoClick(this.commonBtn,this,this.commonBtnHandler),this.onAutoClick(this.bigBtn,this,this.bigBtnHandler),this.onAutoGlobalEvt("BOSS_HOME_UPDATE_TIMES",this,this.updateTimes),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateTimes)},r.prototype.resetTarget=function(t){null!=this._targetProperty&&this._targetProperty.off("destroyed",this,this.close),this._targetProperty=t,null!=this._targetProperty&&this._targetProperty.on("destroyed",this,this.close)},r.prototype.setOpenParam=function(t){if(c.prototype.setOpenParam.call(this,t),t){var e=u.instance.getRole(t);if(null!=e){this.resetTarget(e.property);var i=h.scene.SceneModel.instance.enterScene[3],n=this._targetProperty.get("occ");if(this._bossCfg=d.instance.getCfgByNpcId(i,n),this._bossCfg)for(var s=this._bossCfg[10],o=0;o<6;o++){var a=[s[o][0],s[o][1],0,null];this._showAward[o].dataSource=a}else console.log("当前层数："+i+"bossID："+n+"没有数据");this._commonCostNum=p.instance.getCfgById(10602)[1][0],this.commonCost.text=this._commonCostNum.toString(),this._bigCostNeed=p.instance.getCfgById(10603)[1][1],this._bigCostItemId=p.instance.getCfgById(10603)[1][0],m.getItemCfgById(this._bigCostItemId)&&(this.bigIcon.skin=m.getIconById(this._bigCostItemId)),this.updateTimes();var r=this._targetProperty.get("liveTime")||0;Laya.timer.clear(this,this.loopHandler),this._reviveTime=r;var l=this._reviveTime-GlobalData.serverTime;this.setTime(l),this.remainTime.visible=!0,Laya.timer.loop(1e3,this,this.loopHandler)}else this.close()}},r.prototype.updateTimes=function(){var t=n.BossHomeModel.instance.remainTimes;this.remainTimes.text="剩余次数:"+t;var e=s.instance.getItemCountById(this._bigCostItemId),i=12*(4-e.toString().length);this.bigCostHave.text=e.toString(),this.bigCostNeed.text="/"+this._bigCostNeed,this.bigCostHave.x=452-i,this.bigCostNeed.x=504-i,e<this._bigCostNeed?this.bigCostHave.color="#e6372e":this.bigCostHave.color="#4c5e8a"},r.prototype.loopHandler=function(){var t=this._reviveTime-GlobalData.serverTime;if(t<=0)return this.remainTime.visible=!1,Laya.timer.clear(this,this.loopHandler),void this.close();this.setTime(t)},r.prototype.setTime=function(t){this.remainTime.text=m.msToHHMMSS(t)},r.prototype.addTimesHandler=function(){WindowManager.instance.openDialog(59,8)},r.prototype.commonBtnHandler=function(){if(0<n.BossHomeModel.instance.remainTimes){if(!o.checkNeedSmeltTip()){var t=WindowManager.instance.getDialogById(110);null!=t&&t.close(),e.instance.gather(this._targetProperty.get("id"),0),console.log("普通开启："+this._targetProperty.get("id"))}}else WindowManager.instance.openDialog(59,8)},r.prototype.onClosed=function(){c.prototype.onClosed.call(this),Laya.timer.clear(this,this.loopHandler),this.resetTarget(null)},r.prototype.bigBtnHandler=function(){if(0<n.BossHomeModel.instance.remainTimes){if(!o.checkNeedSmeltTip()){var t=WindowManager.instance.getDialogById(110);null!=t&&t.close(),s.instance.getItemCountById(this._bigCostItemId)>=this._bigCostNeed?(e.instance.gather(this._targetProperty.get("id"),1),console.log("至尊开启："+this._targetProperty.get("id"))):o.openLackPropAlert(this._bigCostItemId,1)}}else WindowManager.instance.openDialog(59,8)},a=r,n.BoxOpenAlert=a}(modules=modules||{}),function(a){var t,e,i,n,u,r,s,o,l,d,m,h;function c(){return null!==e&&e.apply(this,arguments)||this}t=a.abstract||(a.abstract={}),i=a.core.BaseViewEx,n=a.common.BtnGroup,u=a.config.ExteriorCfg,r=a.bag.BagModel,s=a.bag.BaseItem,o=a.bag.BagUtil,l=a.common.AvatarClip,d=a.common.CommonUtil,m=a.config.SkillPureCfg,e=i,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._initModelId=this._initModelId||5001,this.creatEffect(),this._btnGroup=new n,this._btnGroup.setBtns(this.v.upGradeTab,this.v.huanhuaTab,this.v.fuhunTab,this.v.masterBtn),this._consumables=new s,this._consumables.pos(318,901),this._consumables.scale(.8,.8),this.addChild(this._consumables),this._attrNameTxts=[this.v.nameTxt_1,this.v.nameTxt_2,this.v.nameTxt_3,this.v.nameTxt_4,this.v.nameTxt_5,this.v.nameTxt_6],this._upAttrTxts=[this.v.liftTxt_1,this.v.liftTxt_2,this.v.liftTxt_3,this.v.liftTxt_4,this.v.liftTxt_5,this.v.liftTxt_6],this._arrowImgs=[this.v.upArrImg_1,this.v.upArrImg_2,this.v.upArrImg_3,this.v.upArrImg_4,this.v.upArrImg_5,this.v.upArrImg_6],this._numDiff=0},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnClip.play(),this._btnClip.visible=!1,this._btnGroup.selectedIndex=0,this._showModelClip.y=450,this.updateUI()},c.prototype.close=function(){this._showModelClipTween&&this._showModelClipTween.stop(),e.prototype.close.call(this)},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupChangedHandler).onAutoGlobalEvt("BAG_UPDATE",this,this.updateUI).onAutoGlobalEvt("BAG_DATA_GOT",this,this.updateUI).onAutoClick(this.v.aboutBtn,this,this.openAbout).onAutoClick(this.v.goBtn,this,this.goBtnFunc).onAutoClick(this.v.showEquipBtn,this,this.showEquipHandler).regAutoRP(this.v.dotImg_1,this._upgradeRps).regAutoRP(this.v.dotImg_2,this._huanHuaRps).regAutoRP(this.v.dotImg_3,this._fuhunRps).regAutoRP(this.v.masterRP,this._masterRps).regAutoRP(this.v.showEquipRP,this._showEquipRps)},c.prototype.btnGroupChangedHandler=function(){var t=this._tabPanelIds[this._btnGroup.selectedIndex];t&&WindowManager.instance.open(t)},c.prototype.updateUI=function(){var t=this.getModelInfo();if(t){var e=this.getCurShowId();if(e){var i=u.instance.getCfgById(e);this._showModelClip.avatarScale=i[10]?i[10]:1,this._showModelClip.avatarRotationX=i[6],this._showModelClip.avatarRotationY=i[7],this._showModelClip.avatarY=i[9],this._showModelClip.avatarX=i[8],this._showModelClip.reset(e),this.v.observationItem.data=[[this._showModelClip,Math.round(e/1e3)]]}var n=t[this._cfgRpLv],s=this.getShengjiCfgByLv(n),o=this.getShengjiCfgByLv(n+1);this.v.atkMsz.value=this.getAtkValue()+"",this.v.levMsz.value=""+n;var a=this.getShengjiSkillCfgByLev(n);if(a){this.v.needLevTxt.text=a[this._cfgLv]-n+"级",this.v.retractTxt_1.x=this.v.needLevTxt.x+this.v.needLevTxt.textWidth+6;var r=d.getSkillPureIdById(a[this._cfgSkill][0]);this.v.retractTxt_2.x=this.v.retractTxt_1.x+this.v.retractTxt_1.textWidth,this.v.retractTxt_2.text="【"+m.instance.getCfgById(r)[1]+"】"+a[this._cfgSkill][1]+"级"}else this.v.tipTxtBox.visible=!1;this.setAttr(s,o);for(var l=this.getSkillIds(),h=this.getSkillList(),c=0,p=l.length;c<p;c++)this.v.skillBox._childs.length>c&&(this.v.skillBox._childs[c].skillId=h.length>c&&0<h[c][1]?h[c][0]:d.getSkillIdByPureIdAndLv(l[c],1),this.v.skillBox._childs[c].skillInfo=h.length>c?h[c]:null,this.v.skillBox._childs[c].type=this._feedSkillType);this.setpos()}},c.prototype.setpos=function(){var t=this.v.LVMsz.width+19*this.v.levMsz.value.length,e=this.width/2-t/2;this.v.LVMsz.x=e,this.v.levMsz.x=this.v.LVMsz.x+this.v.LVMsz.width},c.prototype.setAttr=function(t,e){var i=a.common.AttrUtil.setAttrTxts(t,e,this._attrNameTxts,null,this._arrowImgs,this._upAttrTxts,this._cfgAttr);i<=2?this.v.textBackImg.height=70:i<=4?this.v.textBackImg.height=110:i<=6&&(this.v.textBackImg.height=150);var n=t[this._cfgItems];if(this.v.fullLevelImg.visible=!1,e){this._consumables.visible=!0,this.v.goBtn.visible=!0;var s=r.instance.getItemCountById(n[0]);this._needMatCount=n[1],this._consumables.dataSource=[n[0],0,0,null];var o="#ff7462";s<n[1]||(o="#ffffff"),this._consumables.setNum(s+"/"+n[1],o),this._numDiff=s-n[1],this._btnClip.visible=0<=this._numDiff}else this._consumables.visible=!1,this.v.goBtn.visible=!1,this.v.fullLevelImg.visible=!0,this._btnClip.visible=!1},c.prototype.creatEffect=function(){this._btnClip=d.creatEff(this.v.goBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.scale(.8,.8),this._showModelClip=l.create(1024,1024,1024),this.v.shengjiPanel.addChildAt(this._showModelClip,1),this._showModelClip.anchorX=.5,this._showModelClip.anchorY=.5,this._showModelClip.centerX=0,this._showModelClip.y=450,this._showModelClip.reset(this._initModelId);var t=u.instance.getCfgById(this._initModelId);this._showModelClip.avatarScale=t[10]?t[10]:1,this._showModelClip.avatarRotationX=t[6],this._showModelClip.avatarRotationY=t[7],this._showModelClip.avatarY=t[9],this._showModelClip.avatarX=t[8],this.v.observationItem.data=[[this._showModelClip,Math.round(this._initModelId/1e3)]]},c.prototype.goBtnFunc=function(){var t=this._consumables.itemData[0];0<=this._numDiff?this.doUpgrade():o.openLackPropAlert(t,1)},c.prototype.openAbout=function(){d.alertHelp(this._aboutId)},c.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._consumables=this.destroyElement(this._consumables),this._btnClip=this.destroyElement(this._btnClip),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._upAttrTxts=this.destroyElement(this._upAttrTxts),this._arrowImgs=this.destroyElement(this._arrowImgs),this._showModelClip=this.destroyElement(this._showModelClip),this.v.observationItem=this.destroyElement(this.v.observationItem),this._showModelClipTween&&(this._showModelClipTween.stop(),this._showModelClipTween=null),e.prototype.destroy.call(this,t)},c.prototype.showEquipHandler=function(){},h=c,t.AbstractShengJiPanel=h}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.immortals||(e.immortals={}),n=e.abstract.AbstractShengJiPanel,s=e.config.ImmortalsCfg,i=n,__extends(a,i),a.prototype.getSkillIds=function(){return s.instance.skillIds},a.prototype.doUpgrade=function(){t.ImmortalsCtrl.instance.feedShenbing()},a.prototype.getSkillList=function(){return t.ImmortalsModel.instance.skillList.values},a.prototype.getModelInfo=function(){return t.ImmortalsModel.instance.info},a.prototype.getCurShowId=function(){return t.ImmortalsModel.instance.curShowId},a.prototype.getAtkValue=function(){return this.getModelInfo()[2]},a.prototype.getShengjiCfgByLv=function(t){return s.instance.getShengjiCfgByLv(t)},a.prototype.getShengjiSkillCfgByLev=function(t){return s.instance.getShengjiSkillCfgByLev(t)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._showModelClipTween=TweenJS.create(this._showModelClip).to({y:this._showModelClip.y-20},1e3).start().yoyo(!0).repeat(99999999)},a.prototype.initialize=function(){this.v.titleTxt.text="神兵",this.v.bgImg.skin="immortal/image_sb_bg1.jpg",this._aboutId=20013,this._cfgSkill=2,this._cfgAttr=3,this._cfgItems=1,this._cfgLv=0,this._cfgRpLv=0,this._feedSkillType=2,this._tabPanelIds=[null,120,121,905],this._upgradeRps=["immortalsShengjiRP","showEquipImmortal"],this._huanHuaRps=["immortalsHuanhuaJipinRP","immortalsHuanhuaZhenpinRP","immortalsHuanhuaJuepinRP","immortalsHuanhuateShuRP"],this._fuhunRps=["immortalsFuhunRP"],this._masterRps=["immortalMasterRP"],this._showEquipRps=["showEquipImmortal"];var t=e.config.ShowEquipCfg.instance.getCfgByType(1);this.v.showEquipTxt.text=t?t[1]:"",this.v.showEquipBtn.skin="immortal/btn_showequip_1.png",i.prototype.initialize.call(this)},a.prototype.showEquipHandler=function(){WindowManager.instance.open(1279)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("SHENBING_UPDATE",this,this.updateUI)},o=a,t.ImmortalShengjiPanel=o}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._nameStr=new Array,t._nameStr[3]="珍品",t._nameStr[4]="极品",t._nameStr[5]="绝品",t._nameStr[6]="典藏",t}e=t.abstract||(t.abstract={}),i=ui.ImmortalsHuanHuaItemUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_UPDATE",this,this.upDateRp).onAutoGlobalEvt("BAG_DATA_GOT",this,this.upDateRp)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._typeNum=t,this.btn.label=""+this._nameStr[this._typeNum],this.upDateRp())},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.setTheSelected()},s.prototype.setTheSelected=function(){this.btn.selected=this.selected},n=s,e.AbstractHuanHuaOptionsItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.immortals||(t.immortals={}),n=t.abstract.AbstractHuanHuaOptionsItem,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("SBHUANHUA_UPDATA",this,this.upDateRp)},o.prototype.upDateRp=function(){this.rpImg.visible=e.ImmortalsModel.instance.qualityType(this._typeNum)},s=o,e.ImmortalHuanHuaOptionsItem=s}(modules=modules||{}),function(t){var e,i,n,l,h,c,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.abstract||(t.abstract={}),n=ui.SbItemUI,l=t.config.ExteriorCfg,h=t.bag.BagModel,c=t.common.CommonUtil,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_UPDATE",this,this.showUI).onAutoGlobalEvt("BAG_DATA_GOT",this,this.showUI)},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._showId=t,this.showUI()},o.prototype.isUsing=function(){return this.getCurShowId()===this._showId},o.prototype.showUI=function(){if(this._showId&&this.getModelInfo()){var t=0,e=this.getShowInfo(this._showId);e&&(t=e[1]),this.usingTxt.visible=this.isUsing();var i=this.getDataByIdLvField(this._showId,t,1),n=this.canUpgrade(this._showId,t+1),s=l.instance.getCfgById(this._showId),o=i[0],a=i[1];this.wayTxt.color="#F4F1BB",this.wayTxt.fontSize=18,this.nameTxt.color=c.getColorByQuality(s[4]),0==t?(this.wayTxt.text="未激活",this.maskImg.visible=!0,h.instance.getItemCountById(o)>=a?(this.wayTxt.text="可激活",this.wayTxt.color="#00ad35",this.qualityImg.gray=this.icon.gray=!1,this.dotImg.visible=!0):(this.qualityImg.gray=this.icon.gray=!0,this.wayTxt.text=this.getWay(this._showId),this.dotImg.visible=!1)):(this.maskImg.visible=!1,this.qualityImg.gray=this.icon.gray=!1,this.wayTxt.text=t+"阶",this.wayTxt.fontSize=20,this.dotImg.visible=!!n&&h.instance.getItemCountById(o)>=a),this.nameTxt.text=s[2],this.nameTxt.color=c.getColorByQuality(s[4]),this.icon.skin="assets/icon/skin/"+s[3]+".png",this.qualityImg.skin="assets/icon/quality_bg/iconbg_"+s[4]+".png";var r=s[11];0!=r&&r?(this.gradeImg.skin="common/xiyou"+r+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1}},o.prototype.getWay=function(t){for(var e=this.getDataByIdLvField(t,0,2),i="",n=0,s=e.length;n<s&&"#"!==e[n];n++)i+=e[n];return i},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.frameImg.visible=t},s=o,e.AbstractHuanHuaItem=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.immortals||(t.immortals={}),n=t.abstract.AbstractHuanHuaItem,s=t.config.ShenbingMagicshowCfg,i=n,__extends(a,i),a.prototype.getModelInfo=function(){return e.ImmortalsModel.instance.info},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("SBHUANHUA_UPDATA",this,this.showUI),this.onAutoGlobalEvt("SHENBING_UPDATE",this,this.showUI),this.onAutoGlobalEvt("SBCHANGE_HUANHUA",this,this.showUI)},a.prototype.getShowInfo=function(t){return e.ImmortalsModel.instance.huanhuaList.get(t)},a.prototype.getCurShowId=function(){return e.ImmortalsModel.instance.curShowId},a.prototype.getDataByIdLvField=function(t,e,i){return s.instance.getDataByIdLvField(t,e,i)},a.prototype.canUpgrade=function(t,e){return s.instance.has(t,e)},o=a,e.SBItem=o}(modules=modules||{}),function(l){var t,e,i,n,s,o,a,h,r,c,p,u,d,m;function f(){return null!==e&&e.apply(this,arguments)||this}t=l.abstract||(l.abstract={}),i=l.core.BaseViewEx,n=l.common.BtnGroup,s=l.common.AvatarClip,o=l.common.CustomList,a=l.bag.BaseItem,h=l.bag.BagModel,r=l.bag.BagUtil,c=Laya.Event,p=l.config.ExteriorCfg,u=l.common.SimpleList,d=l.common.ListWithArrowCtrl,e=i,__extends(f,e),f.prototype.initialize=function(){e.prototype.initialize.call(this),this._showId=-1,this.centerX=0,this.centerY=0,this.v.sumAttrBtn.underline=!0,this.creatEffect(),this._btnGroup=new n,this._btnGroup.setBtns(this.v.upGradeTab,this.v.huanhuaTab,this.v.fuhunTab,this.v.masterBtn),this._consumables=new a,this._consumables.pos(318,901),this._consumables.scale(.8,.8),this.addChild(this._consumables),this._attrNameTxts=[this.v.nameTxt_1,this.v.nameTxt_2,this.v.nameTxt_3,this.v.nameTxt_4,this.v.nameTxt_5,this.v.nameTxt_6],this._upAttrTxts=[this.v.liftTxt_1,this.v.liftTxt_2,this.v.liftTxt_3,this.v.liftTxt_4,this.v.liftTxt_5,this.v.liftTxt_6],this._arrowImgs=[this.v.upArrImg_1,this.v.upArrImg_2,this.v.upArrImg_3,this.v.upArrImg_4,this.v.upArrImg_5,this.v.upArrImg_6],this._list=u.create(this._listItemRenderer,100,125,2,1,25,0),this._list.width=475,this._list.height=152,this.v.listBox.addChild(this._list),this._list.x=0,this._list.y=0,this._listPingZhi=new o,this._listPingZhi.width=620,this._listPingZhi.height=50,this._listPingZhi.hCount=1,this._listPingZhi.spaceX=0,this._listPingZhi.spaceY=0,this._listPingZhi.x=0,this._listPingZhi.y=0,this._listPingZhi.itemRender=this._listPingZhiItemRenderer,this._listPingZhi.scrollDir=2,this.v.pingZhiListBox.addChild(this._listPingZhi),this._numDiff=0,this._recordShowId=-1,this._listCtrl=new d(this._list,this.v.preBtn,this.v.nextBtn),this._listCtrl.scrollDis=this._list.width+this._list.spaceX,this._pingZhiDatas=[3,4,5,6]},f.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,c.CHANGE,this,this.btnGroupChangedHandler).onAutoClick(this.v.aboutBtn,this,this.openAbout).onAutoClick(this.v.goBtn,this,this.goBtnFunc).onAutoClick(this.v.changeImg,this,this.changefunc).onAutoClick(this.v.sumAttrBtn,this,this.openSumAttr).onAutoEvt(this._list,c.SELECT,this,this.selectSkinItem).onAutoGlobalEvt("BAG_UPDATE",this,this.updateUI).onAutoGlobalEvt("BAG_DATA_GOT",this,this.updateUI).onAutoEvt(this._listPingZhi,c.SELECT,this,this.listHandler).regAutoRP(this.v.dotImg_1,this._upgradeRps).regAutoRP(this.v.dotImg_2,this._huanHuaRps).regAutoRP(this.v.dotImg_3,this._fuhunRps).regAutoRP(this.v.masterRP,this._masterRps),this._listCtrl.addListeners()},f.prototype.btnGroupChangedHandler=function(){var t=this._tabPanelIds[this._btnGroup.selectedIndex];t&&WindowManager.instance.open(t)},f.prototype.selectBtnGroup2=function(){var t=this._listPingZhi.selectedIndex,e=this.getShowIds(t);this._list.datas=e,this._list.selectedData&&(this._showId=this._list.selectedData),this._listPingZhi.selectedIndex==this._recordSelect[0]?this._list.selectedIndex=this._recordSelect[1]:this._list.selectedIndex=-1,this._list.scrollToIndex(this._list.selectedIndex),this._maxDistance=100*this._list.datas.length+(this._list.datas.length-1)*this._list.spaceX-this._list.width,this.setListCenter()},f.prototype.selectBtnGroup3=function(){var t=this._listPingZhi.selectedIndex,e=this.getShowIds(t);this._list.datas=e,this._list.selectedData&&(this._showId=this._list.selectedData);for(var i=0,n=0,s=this._list.datas.length;n<s;n++){var o=this.getShowInfoStar(this._list.datas[n]),a=this.getDataByIdLvField(this._list.datas[n],o,1),r=a[0],l=a[1];if(h.instance.getItemCountById(r)>=l){i=n;break}}this._list.selectedIndex=i,this._list.scrollToIndex(i),this._maxDistance=100*this._list.datas.length+(this._list.datas.length-1)*this._list.spaceX-this._list.width,this.setListCenter()},f.prototype.setListCenter=function(){var t=this._list.datas.length,e=100*(t=4<t?4:t)+(t-1)*this._list.spaceX;this._list.x=(this.v.listBox.width-e)/2},f.prototype.selectQuality=function(t){void 0===t&&(t=void 0);for(var e=0,i=this._list.datas.length;e<i;e++){var n=this.getShowInfoStar(this._list.datas[e]),s=this.getDataByIdLvField(this._list.datas[e],n,1),o=s[0],a=s[1];if(h.instance.getItemCountById(o)>=a)return this._list.selectedIndex=e,void(this._recordSelect=[this._listPingZhi.selectedIndex,this._list.selectedIndex])}this._list.selectedIndex=t||0,this._list.scrollToIndex(this._list.selectedIndex),this._recordSelect=[this._listPingZhi.selectedIndex,this._list.selectedIndex]},f.prototype.selectQualityById=function(t){for(var e=0,i=this._list.datas.length;e<i;e++){var n=this.getShowInfoStar(this._list.datas[e]);if(this.getDataByIdLvField(this._list.datas[e],n,1)[0]==t)return this._list.selectedIndex=e,this._recordSelect=[this._listPingZhi.selectedIndex,this._list.selectedIndex],void this._list.scrollToIndex(this._list.selectedIndex)}this._list.selectedIndex=0,this._recordSelect=[this._listPingZhi.selectedIndex,this._list.selectedIndex]},f.prototype.setAttr=function(t,e){var i=this.getDataByIdLvField(t,e,3),n=this.getDataByIdLvField(t,e+1,3),s=l.common.AttrUtil.attrTxts(i,n,this._attrNameTxts,null,this._arrowImgs,this._upAttrTxts);s<=2?this.v.textBackImg.height=70:s<=4?this.v.textBackImg.height=110:s<=6&&(this.v.textBackImg.height=150);var o=this.getDataByIdLvField(t,e,1);if(this.v.fullLevelImg.visible=!1,this.canUpgrade(t,e+1)){this._consumables.visible=!0,this.v.goBtn.visible=!0;var a=h.instance.getItemCountById(o[0]);this._consumables.dataSource=[o[0],0,0,null];var r="#ff7462";a<o[1]||(r="#ffffff"),this._consumables.setNum(a+"/"+o[1],r),this._numDiff=a-o[1],this.setBtnClipPlay(0<=this._numDiff)}else this._consumables.visible=!1,this.v.goBtn.visible=!1,this.v.fullLevelImg.visible=!0,this.setBtnClipPlay(!1)},f.prototype.setBtnClipPlay=function(t){(this._btnClip.visible=t)?this._btnClip.play():this._btnClip.stop()},f.prototype.creatEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.goBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.scale(.8,.8),this._modelClip=s.create(1024,1024,1024),this.v.huanhuaPanel.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this.setBtnClipPlay(!1)},f.prototype.goBtnFunc=function(){var t=this._consumables.itemData[0];0<=this._numDiff?this.doUpgrade():r.openLackPropAlert(t,-this._numDiff)},f.prototype.openAbout=function(){CommonUtil.alertHelp(this._aboutId)},f.prototype.openSumAttr=function(){this.getModelInfo()&&WindowManager.instance.openDialog(26,this.getOpenSumAttrParam())},f.prototype.showClip=function(){this._modelClip.visible=!0},f.prototype.showModelClipAction=function(){this._modelClip.setActionType("show",0)},f.prototype.selectSkinItem=function(){var t=this._list.selectedData||this._recordShowId;if(-1!==t){this._showId=t,this._recordShowId=t;var e=this.getModelCfg(t);this._modelClip.reset(t),this.showModelClipAction(),this._modelClip.avatarRotationX=e[6],this._modelClip.avatarRotationY=e[7],this._modelClip.avatarScale=e[10]?e[10]:1,this._modelClip.avatarY=e[9],this._modelClip.avatarX=e[8],this._modelClip.visible=!1,this.v.observationItem.data=[[this._modelClip,Math.round(t/1e3)]],Laya.timer.frameOnce(3,this,this.showClip),this.v.NameTxt.text=e[2],this.checkUseChangeImgShowing();var i=this.getShowInfo(t);i?(this.v.jieMsz.visible=!0,this.v.jieCharMsz.visible=!0,this.v.noActImg.visible=!1,this.v.tipBox.visible=!1,this.v.goBtn.label="升阶",this.v.jieMsz.value=i[1].toString()):(this.v.jieMsz.visible=!1,this.v.jieCharMsz.visible=!1,this.v.noActImg.visible=!0,this.v.tipBox.visible=!0,this.v.goBtn.label="激活",this.showTip(t));var n=this.v.jieMsz.value.length,s=22*n+this.v.atkMsz.spaceX*(n-1),o=this.v.jieCharMsz.width+5+s,a=(this.v.width-o)/2;this.v.jieMsz.x=a,this.v.jieCharMsz.x=a+s+5;var r=this.getShowInfoStar(t);this.setAttr(t,r),-1!=this._list.selectedIndex&&(this._recordSelect=[this._listPingZhi.selectedIndex,this._list.selectedIndex])}},f.prototype.getModelCfg=function(t){return p.instance.getCfgById(t)},f.prototype.checkUseChangeImgShowing=function(){var t=this.getCurShowId(),e=this.getShowInfo(this._recordShowId);this.v.changeImg.visible=this._showId!==t&&!!e,this.v.useImg.visible=this._showId===t},f.prototype.showTip=function(t){for(var e=this.getDataByIdLvField(t,0,2),i="",n="",s=e.length,o=0,a=e.length;o<a;o++)"#"!==e[o]?o<s?i+=e[o]:n+=e[o]:(n+="+",s=o);this.v.tipTxt_1.text=i,this.v.tipTxt_2.text=n},f.prototype.searchOne=function(){var n=this,s=void 0;this._pingZhiDatas.some(function(t,e){var i=n.isRpByQuality(t);return i&&(s=e),i});var o=void 0;null==s&&this._pingZhiDatas.some(function(t,e){var i=n.isActivation(t);return-1!=i&&(s=e,o=i,!0)}),this._listPingZhi.selectedIndex=null==s?0:s,this.selectQuality(o)},f.prototype.updateUI=function(){if(this.getModelInfo()){this.v.atkMsz.value=this.getAtkValue().toString();var t=this.v.jieCharMsz.width+5+this.v.jieMsz.width,e=(this.width-t)/2;this.v.jieMsz.x=e,this.v.jieCharMsz.x=e+this.v.jieMsz.width+5,this.selectSkinItem()}},f.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._listCtrl.removeListeners()},f.prototype.listHandler=function(){-1!=this._listPingZhi.selectedIndex&&this.selectBtnGroup3()},f.prototype.initializeListPingZhi=function(){this._listPingZhi.datas=this._pingZhiDatas;var t=this._listPingZhi.datas.length,e=124*(t=Math.min(t,5))+(t-1)*this._listPingZhi.spaceX;if(this._listPingZhi.x=(this.v.pingZhiListBox.width-e)/2,this.setBtnClipPlay(!1),this._tiaoZhuanItemId){var i=this.panDuanPingZhi(this._tiaoZhuanItemId);-1!=i?(this._listPingZhi.selectedIndex=i,this.selectQualityById(this._tiaoZhuanItemId)):this.searchOne()}else this.searchOne();this._modelClip.y=450,this.updateUI(),this._btnGroup.selectedIndex=1,this._tiaoZhuanItemId=null},f.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.initializeListPingZhi(),this.setBtnVisible(),Laya.timer.frameLoop(1,this,this.setBtnVisible)},f.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._tiaoZhuanItemId=t},f.prototype.close=function(){this._modelClipTween&&this._modelClipTween.stop(),Laya.timer.clear(this,this.setBtnVisible),e.prototype.close.call(this)},f.prototype.setBtnVisible=function(){if(this.v.nextRp.visible=this.v.preRp.visible=this.v.nextBtn.visible=this.v.preBtn.visible=!1,this.v.preBtn.visible=0<this._list.scrollPos&&4<this._list.datas.length,this.v.nextBtn.visible=this._list.scrollPos<this._maxDistance&&4<this._list.datas.length,this.v.preBtn.visible&&0<this._list.startShowIndex){for(var t=[],e=0;e<this._list.datas.length;e++){var i=this._list.datas[e];e<this._list.startShowIndex&&t.push(i)}this.getHaveRp(t,this.v.preRp)}else this.v.preRp.visible=!1;var n=this._list.startShowIndex+4;if(this.v.nextBtn.visible&&n<this._list.datas.length){for(t=[],e=n;e<=this._list.datas.length-1;e++)i=this._list.datas[e],t.push(i);this.getHaveRp(t,this.v.nextRp)}else this.v.nextRp.visible=!1},f.prototype.getHaveRp=function(t,e){e.visible=!1;for(var i=0;i<t.length;i++){var n=t[i],s=this.getShowInfoStar(n),o=this.getDataByIdLvField(n,s,1),a=this.canUpgrade(n,s+1),r=o[0],l=o[1];if(0==s){if(h.instance.getItemCountById(r)>=l)return void(e.visible=!0)}else if(a&&h.instance.getItemCountById(r)>=l)return void(e.visible=!0)}},f.prototype.getShowInfoStar=function(t){var e=this.getShowInfo(t);return e?e[1]:0},f.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._consumables=this.destroyElement(this._consumables),this._btnClip=this.destroyElement(this._btnClip),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._arrowImgs=this.destroyElement(this._arrowImgs),this._upAttrTxts=this.destroyElement(this._upAttrTxts),this._list=this.destroyElement(this._list),this._listPingZhi=this.destroyElement(this._listPingZhi),this._modelClip=this.destroyElement(this._modelClip),this.v.observationItem=this.destroyElement(this.v.observationItem),this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),this._listCtrl=this.destroyElement(this._listCtrl),e.prototype.destroy.call(this,t)},m=f,t.AbstractHuanhuaPanel=m}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.immortals||(t.immortals={}),n=t.abstract.AbstractHuanhuaPanel,s=t.effect.SuccessEffectCtrl,o=t.config.ShenbingMagicshowCfg,i=n,__extends(r,i),r.prototype.initialize=function(){this.v.bgImg.skin="immortal/image_sb_bg1.jpg",this._upgradeRps=["immortalsShengjiRP","showEquipImmortal"],this._huanHuaRps=["immortalsHuanhuaJipinRP","immortalsHuanhuaZhenpinRP","immortalsHuanhuaJuepinRP","immortalsHuanhuateShuRP"],this._fuhunRps=["immortalsFuhunRP"],this._masterRps=["immortalMasterRP"],this._aboutId=20014,this._tabPanelIds=[83,null,121,905],this._listItemRenderer=e.SBItem,this._listPingZhiItemRenderer=e.ImmortalHuanHuaOptionsItem,i.prototype.initialize.call(this)},r.prototype.getShowInfo=function(t){return e.ImmortalsModel.instance.huanhuaList.get(t)},r.prototype.isRpByQuality=function(t){return e.ImmortalsModel.instance.qualityType(t)},r.prototype.isActivation=function(t){return e.ImmortalsModel.instance.qualityActivation(t)},r.prototype.getCurShowId=function(){return e.ImmortalsModel.instance.curShowId},r.prototype.getModelInfo=function(){return e.ImmortalsModel.instance.info},r.prototype.initializeListPingZhi=function(){i.prototype.initializeListPingZhi.call(this),this._modelClipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-20},1e3).yoyo(!0).repeat(99999999),this._modelClipTween.start()},r.prototype.getOpenSumAttrParam=function(){var t=this.getModelInfo();return["幻化修炼总属性",t[5],t[6],o.instance.attrIndices]},r.prototype.panDuanPingZhi=function(t){return e.ImmortalsModel.instance.panDuanpingzhi(t)},r.prototype.doUpgrade=function(){e.ImmortalsModel.instance._huanhuaActId=this._showId,e.ImmortalsCtrl.instance.magicLev([this._showId])},r.prototype.changefunc=function(){e.ImmortalsCtrl.instance.changeMagicShow(this._showId)},r.prototype.canUpgrade=function(t,e){return o.instance.has(t,e)},r.prototype.getShowIds=function(t){return o.instance.getSkinCfgByType(o.instance.qualitys[t])},r.prototype.getAtkValue=function(){return this.getModelInfo()[5]},r.prototype.getDataByIdLvField=function(t,e,i){return o.instance.getDataByIdLvField(t,e,i)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("SHENBING_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("SBHUANHUA_UPDATA",this,this.showEffect1),this.onAutoGlobalEvt("SBCHANGE_HUANHUA",this,this.selectSkinItem)},r.prototype.showEffect1=function(){var t=e.ImmortalsModel.instance._huanhuaActId;1<this.getShowInfoStar(t)&&s.instance.play("assets/others/tx_jinjiechengong7.png")},a=r,e.ImmortalHuanhuaPanel=a}(modules=modules||{}),function(l){var t,i,n,s,e,o,a,h,r;function c(){return null!==i&&i.apply(this,arguments)||this}t=l.abstract||(l.abstract={}),n=l.common.BtnGroup,s=l.bag.BaseItem,e=l.core.BaseViewEx,o=Laya.Event,a=l.bag.BagUtil,h=l.bag.BagModel,i=e,__extends(c,i),c.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.v.sumAttrBtn.underline=!0,this.createEffect(),this._btnGroup=new n,this._btnGroup.setBtns(this.v.upGradeTab,this.v.huanhuaTab,this.v.fuhunTab,this.v.masterBtn),this._consumables=new s,this._consumables.pos(318,901),this._consumables.scale(.8,.8),this.addChild(this._consumables),this._upAttrTxts=[this.v.liftTxt_1,this.v.liftTxt_2,this.v.liftTxt_3,this.v.liftTxt_4,this.v.liftTxt_5,this.v.liftTxt_6],this._arrowImgs=[this.v.upArrImg_1,this.v.upArrImg_2,this.v.upArrImg_3,this.v.upArrImg_4,this.v.upArrImg_5,this.v.upArrImg_6],this._attrNameTxts=[this.v.nameTxt_1,this.v.nameTxt_2,this.v.nameTxt_3,this.v.nameTxt_4,this.v.nameTxt_5,this.v.nameTxt_6],this._curPitchHun=0,this._hunArr=new Array,this._hunArr=[this.v.binghun_1,this.v.binghun_2,this.v.binghun_4,this.v.binghun_3],this.v.binghun_1.frameImg.visible=!0;for(var t=0,e=this._hunArr.length;t<e;t++)this._hunArr[t].setType(this._feedSkilltype),this._hunArr[t].setIndex(t+1);this._numDiff=0},c.prototype.btnGroupChangedHandler=function(){var t=this._tabPanelIds[this._btnGroup.selectedIndex];t&&WindowManager.instance.open(t)},c.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.goBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.scale(.8,.8),this._upGradeEff=CommonUtil.creatEff(this,"activate",3,0,!1)},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateUI).onAutoGlobalEvt("BAG_DATA_GOT",this,this.updateUI).onAutoGlobalEvt(this._infoEvent,this,this.updateUI).onAutoGlobalEvt(this._successEvent,this,this.showSuccessEffect).onAutoEvt(this._btnGroup,o.CHANGE,this,this.btnGroupChangedHandler).onAutoEvt(this._upGradeEff,o.COMPLETE,this,this.onSuccessEffComplete).onAutoClick(this.v.aboutBtn,this,this.openAbout).onAutoClick(this.v.goBtn,this,this.goBtnFunc).onAutoClick(this.v.sumAttrBtn,this,this.openSumAttr).regAutoRP(this.v.dotImg_1,this._upgradeRps).regAutoRP(this.v.dotImg_2,this._huanHuaRps).regAutoRP(this.v.dotImg_3,this._fuhunRps).regAutoRP(this.v.masterRP,this._masterRps);for(var t=0,e=this._hunArr.length;t<e;t++)this.onAutoClick(this._hunArr[t],this,this.selectHun,[t])},c.prototype.onSuccessEffComplete=function(){this.setUpgradeEffPlay(!1)},c.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.setBtnClipPlay(!1),this.setUpgradeEffPlay(!1),this._btnGroup.selectedIndex=2,this._curPitchHun=0,this.updateUI(!0)},c.prototype.openAbout=function(){CommonUtil.alertHelp(this._aboutId)},c.prototype.showSuccessEffect=function(){this.setUpgradeEffPlay(!0),0==this._curPitchHun?this._upGradeEff.pos(45,118):1==this._curPitchHun?this._upGradeEff.pos(418,118):2==this._curPitchHun?this._upGradeEff.pos(423,336):this._upGradeEff.pos(45,336),this.theOperational()},c.prototype.goBtnFunc=function(){var t=this._consumables.itemData[0];0<=this._numDiff?this.doUpgrade():a.openLackPropAlert(t,-this._numDiff)},c.prototype.updateUI=function(t){void 0===t&&(t=!1);var e=this.getModelInfo();if(e){this.v.atkMsz.value=e[8]+"";for(var i=0;i<4;i++)this._hunArr[i].refineInfo=this.getFunhuList(i);Laya.timer.clear(this,this.theOperational),t?this.theOperational():Laya.timer.once(300,this,this.theOperational)}},c.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.theOperational)},c.prototype.theOperational=function(){if(this._hunArr[this._curPitchHun].dotImg.visible)this.selectHun(this._curPitchHun);else{for(var t=0,e=this._hunArr.length;t<e;t++)if(this._hunArr[t].dotImg.visible)return void this.selectHun(t);this.selectHun(0)}},c.prototype.selectHun=function(t){for(var e=0,i=this._hunArr.length;e<i;e++)this._hunArr[e].frameImg.visible=!1;this._curPitchHun=t,this._hunArr[this._curPitchHun].frameImg.visible=!0;var n=0,s=this.getFunhuList(this._curPitchHun);s&&(n=s[1]),this.setAttr(n),this._hunArr[this._curPitchHun].dotImg.visible&&this.setBtnClipPlay(!0)},c.prototype.setUpgradeEffPlay=function(t){(this._upGradeEff.visible=t)?this._upGradeEff.play():this._upGradeEff.stop()},c.prototype.setBtnClipPlay=function(t){(this._btnClip.visible=t)?this._btnClip.play():this._btnClip.stop()},c.prototype.setAttr=function(t){var e=this.getCfgDataByIdLvField(this._curPitchHun,t,3),i=this.getCfgDataByIdLvField(this._curPitchHun,t+1,3),n=l.common.AttrUtil.attrTxts(e,i,this._attrNameTxts,null,this._arrowImgs,this._upAttrTxts);n<=2?this.v.textBackImg.height=70:n<=4?this.v.textBackImg.height=110:n<=6&&(this.v.textBackImg.height=150);var s=this.getCfgDataByIdLvField(this._curPitchHun,t,1);if(this.v.refineConTxt.visible=!1,this.v.fullLevelImg.visible=!1,this.canUpgrade(this._curPitchHun,t+1)){this._consumables.visible=!0,this.v.goBtn.visible=!0;var o=h.instance.getItemCountById(s[0]);this._consumables.dataSource=[s[0],0,0,null];var a="#ff7462";o<s[1]||(a="#ffffff"),this._consumables.setNum(o+"/"+s[1],a),this._numDiff=o-s[1],this.setBtnClipPlay(0<=this._numDiff),this.v.refineConTxt.visible=!1;var r=this.getCfgDataByIdLvField(this._curPitchHun,t,6);r>PlayerModel.instance.level&&(this.v.refineConTxt.text=this._refineTypeNames[this._curPitchHun]+"附魂已达上限，主角达到"+r+"级可突破上限。",this.v.refineConTxt.visible=!0,this.v.goBtn.visible=!1)}else this._consumables.visible=this.v.goBtn.visible=this.v.refineConTxt.visible=!1,this.setBtnClipPlay(!1),this.v.fullLevelImg.visible=!0},c.prototype.openSumAttr=function(){this.getModelInfo()&&WindowManager.instance.openDialog(26,this.getOpenSumAttrParam())},c.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._consumables=this.destroyElement(this._consumables),this._btnClip=this.destroyElement(this._btnClip),this._upGradeEff=this.destroyElement(this._upGradeEff),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._upAttrTxts=this.destroyElement(this._upAttrTxts),this._arrowImgs=this.destroyElement(this._arrowImgs),this._hunArr=this.destroyElement(this._hunArr),i.prototype.destroy.call(this,t)},r=c,t.AbstractFuhunPanel=r}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.immortals||(t.immortals={}),n=t.config.ShenbingRefineCfg,s=t.abstract.AbstractFuhunPanel,i=s,__extends(a,i),a.prototype.initialize=function(){this._refineTypeNames=["刑天兵魂","幽天兵魂","昊天兵魂","钧天兵魂"],this._upgradeRps=["immortalsShengjiRP","showEquipImmortal"],this._huanHuaRps=["immortalsHuanhuaJipinRP","immortalsHuanhuaZhenpinRP","immortalsHuanhuaJuepinRP","immortalsHuanhuateShuRP"],this._fuhunRps=["immortalsFuhunRP"],this._masterRps=["immortalMasterRP"],this._aboutId=20015,this._feedSkilltype=2,this._infoEvent="SHENBING_UPDATE",this._successEvent="SBFUHUN_UPDATA",this._tabPanelIds=[83,120,null,905],i.prototype.initialize.call(this)},a.prototype.getModelInfo=function(){return e.ImmortalsModel.instance.info},a.prototype.canUpgrade=function(t,e){return n.instance.has(t,e)},a.prototype.getCfgDataByIdLvField=function(t,e,i){return n.instance.getDataByIdLvField(t,e,i)},a.prototype.getFunhuList=function(t){return e.ImmortalsModel.instance.getFuhunListByType(t)},a.prototype.doUpgrade=function(){e.ImmortalsCtrl.instance.refineLev([this._curPitchHun])},a.prototype.getOpenSumAttrParam=function(){var t=this.getModelInfo();return["附魂修炼总属性",t[8],t[9],n.instance.attrIndices]},o=a,e.ImmortalFuhunPanel=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.wing||(t.wing={}),n=t.config.WingRefineCfg,s=t.abstract.AbstractFuhunPanel,i=s,__extends(a,i),a.prototype.initialize=function(){this._refineTypeNames=["朱雀羽魂","毕方羽魂","鲲鹏羽魂","红鸾羽魂"],this.v.titleTxt.text="仙翼",this.v.bgImg.skin="immortal/bj_xianyi_1.jpg",this._upgradeRps=["wingShengjiRP","showEquipWing"],this._huanHuaRps=["wingHuanhuaJipinRP","wingHuanhuaZhenpinRP","wingHuanhuaJuepinRP"],this._fuhunRps=["wingFuhunRP"],this._masterRps=["wingMasterRP"],this._aboutId=20018,this._feedSkilltype=3,this._infoEvent="WING_UPDATE",this._successEvent="SBFUHUN_UPDATA",this._tabPanelIds=[91,122,null,906],i.prototype.initialize.call(this)},a.prototype.canUpgrade=function(t,e){return n.instance.has(t,e)},a.prototype.getModelInfo=function(){return e.WingModel.instance.info},a.prototype.getCfgDataByIdLvField=function(t,e,i){return n.instance.getDataByIdLvField(t,e,i)},a.prototype.getFunhuList=function(t){return e.WingModel.instance.getFuhunListByType(t)},a.prototype.doUpgrade=function(){e.WingCtrl.instance.refineLev([this._curPitchHun])},a.prototype.getOpenSumAttrParam=function(){var t=this.getModelInfo();return["附魂修炼总属性",t[8],t[9],n.instance.attrIndices]},o=a,e.WingFuhunPanel=o}(modules=modules||{}),function(t){var e,o,i,n,s,a,r;function l(){return null!==o&&o.apply(this,arguments)||this}e=t.wing||(t.wing={}),i=t.abstract.AbstractHuanhuaPanel,n=t.effect.SuccessEffectCtrl,s=t.config.WingMagicshowCfg,a=t.bag.BagModel,o=i,__extends(l,o),l.prototype.changefunc=function(){e.WingCtrl.instance.changeMagicShow(this._showId)},l.prototype.getShowInfo=function(t){return e.WingModel.instance.huanhuaList.get(t)},l.prototype.doUpgrade=function(){e.WingModel.instance._huanhuaActId=this._showId,e.WingCtrl.instance.magicLev([this._showId])},l.prototype.getDataByIdLvField=function(t,e,i){return s.instance.getDataByIdLvField(t,e,i)},l.prototype.canUpgrade=function(t,e){return s.instance.has(t,e)},l.prototype.getOpenSumAttrParam=function(){var t=this.getModelInfo();return["幻化修炼总属性",t[5],t[6],s.instance.attrIndices]},l.prototype.getModelInfo=function(){return e.WingModel.instance.info},l.prototype.getCurShowId=function(){return e.WingModel.instance.curShowId},l.prototype.isRpByQuality=function(t){return e.WingModel.instance.qualityType(t)},l.prototype.isActivation=function(t){return e.WingModel.instance.qualityActivation(t)},l.prototype.panDuanPingZhi=function(t){return e.WingModel.instance.panDuanpingzhi(t)},l.prototype.getAtkValue=function(){var t=this.getModelInfo();return t?t[5]:0},l.prototype.getShowIds=function(t){return s.instance.getSkinCfgByType(s.instance.qualitys[t])},l.prototype.selectSkinItem=function(){o.prototype.selectSkinItem.call(this);var t=this._list.selectedData||this._recordShowId;if(-1!==t){var e=this.getShowInfoStar(t),i=this.getDataByIdLvField(t,e,1),n=i[1],s=i[0];this.setBtnClipPlay(a.instance.getItemCountById(s)>=n),3013===t?(this.v.goBtn.visible=!1,this._consumables&&(this._consumables.visible=!1),this.v.fullLevelImg.visible=!1,this.getShowInfo(t)?(this.v.warWingText.visible=!1,this.v.warWingText1.visible=!0,Laya.timer.loop(1e3,this,this.warWingTextLoop),this.warWingTextLoop()):(this.v.warWingText.visible=!0,this.v.warWingText1.visible=!1,Laya.timer.clear(this,this.warWingTextLoop))):(Laya.timer.clear(this,this.warWingTextLoop),this.v.warWingText.visible=!1,this.v.warWingText1.visible=!1)}},l.prototype.warWingTextLoop=function(){var t=e.WingModel.instance.warWingTimeTable[this._showId];t=t||0,this.v.warWingText1.text=CommonUtil.timeStampToHHMMSS(t)+"后到期",t<GlobalData.serverTime&&(Laya.timer.clear(this,this.warWingTextLoop),this.v.warWingText1.text="已到期")},l.prototype.initialize=function(){this.v.bgImg.skin="immortal/bj_xianyi_2.jpg",this.v.titleTxt.text="仙翼",this._upgradeRps=["wingShengjiRP","showEquipWing"],this._huanHuaRps=["wingHuanhuaJipinRP","wingHuanhuaZhenpinRP","wingHuanhuaJuepinRP"],this._fuhunRps=["wingFuhunRP"],this._masterRps=["wingMasterRP"],this._tabPanelIds=[91,null,123,906],this._aboutId=20017,this._listItemRenderer=e.WingSkinItem,this._listPingZhiItemRenderer=e.WingHuanHuaOptionsItem,o.prototype.initialize.call(this),this._pingZhiDatas=[3,4,5,6]},l.prototype.onEvt=function(){this.onAutoGlobalEvt("WING_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("XYHUANHUA_UPDATA",this,this.showEffect1),this.onAutoGlobalEvt("XYCHANGE_HUANHUA",this,this.selectBtnGroup2),o.prototype.onEvt.call(this)},l.prototype.showEffect1=function(){var t=e.WingModel.instance._huanhuaActId;1<this.getShowInfoStar(t)&&n.instance.play("assets/others/tx_jinjiechengong7.png")},r=l,e.WingHuanhuaPanel=r}(modules=modules||{}),function(e){var t,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}t=e.wing||(e.wing={}),n=e.abstract.AbstractShengJiPanel,s=e.wing.WingModel,o=e.wing.WingCtrl,a=e.config.WingCfg,i=n,__extends(l,i),l.prototype.doUpgrade=function(){o.instance.feedShenbing()},l.prototype.getModelInfo=function(){return s.instance.info},l.prototype.getCurShowId=function(){return s.instance.curShowId},l.prototype.getAtkValue=function(){return this.getModelInfo()[2]},l.prototype.getSkillList=function(){return s.instance.skillList.values},l.prototype.getShengjiCfgByLv=function(t){return a.instance.getShengjiCfgByLv(t)},l.prototype.getShengjiSkillCfgByLev=function(t){return a.instance.getShengjiSkillCfgByLev(t)},l.prototype.getSkillIds=function(){return a.instance.shengjiSkillIds},l.prototype.initialize=function(){this.v.titleTxt.text="仙翼",this.v.bgImg.skin="immortal/bj_xianyi_2.jpg",this._initModelId=3001,this._aboutId=20016,this._cfgSkill=2,this._cfgLv=0,this._cfgAttr=3,this._cfgItems=1,this._cfgRpLv=0,this._feedSkillType=3,this._tabPanelIds=[null,122,123,906],this._upgradeRps=["wingShengjiRP","showEquipWing"],this._huanHuaRps=["wingHuanhuaJipinRP","wingHuanhuaZhenpinRP","wingHuanhuaJuepinRP"],this._fuhunRps=["wingFuhunRP"],this._masterRps=["wingMasterRP"],this._showEquipRps=["showEquipWing"];var t=e.config.ShowEquipCfg.instance.getCfgByType(2);this.v.showEquipTxt.text=t?t[1]:"",this.v.showEquipBtn.skin="immortal/btn_showequip_2.png",i.prototype.initialize.call(this)},l.prototype.showEquipHandler=function(){WindowManager.instance.open(1281)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("WING_UPDATE",this,this.updateUI)},r=l,t.WingShengjiPanel=r}(modules=modules||{}),function(t){var o,e,i,l,h,c,p,n,a,s,u,d,r;function m(){return null!==e&&e.apply(this,arguments)||this}o=t.immortals||(t.immortals={}),i=ui.ImmortalsUpGradeAlertUI,l=t.config.SkillCfg,h=t.config.ImmortalsCfg,c=t.effect.SuccessEffectCtrl,p=t.config.WingCfg,n=t.wing.WingCtrl,a=t.wing.WingModel,s=t.common.CustomClip,u=t.common.CommonUtil,d=t.config.SkillPureCfg,e=i,__extends(m,e),m.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),this._skillInfo=null,e.prototype.destroy.call(this)},m.prototype.initialize=function(){e.prototype.initialize.call(this),this.btnClip=s.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this.btnClip),this.btnClip.play(),this.btnClip.pos(this.activateOrUpBtn.x-5,this.activateOrUpBtn.y-10),this.btnClip.visible=!1},m.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.activateOrUpBtn,this,this.func),this.onAutoGlobalEvt("SHENBING_UPDATE",this,this.updateSkillInfo),this.onAutoGlobalEvt("WING_UPDATE",this,this.updateSkillInfo),this.onAutoGlobalEvt("SBSHENGJI_UPDATE",this,this.showEffect),this.onAutoGlobalEvt("XYSHENGJI_UPDATE",this,this.showEffect)},m.prototype.showEffect=function(){for(var t=0==this._type?o.ImmortalsModel.instance.skillList:a.instance.skillList,e=0,i=t.keys.length;e<i;e++)this._id==t.keys[e]&&1<t.get(this._id)[1]?c.instance.play("assets/others/tx_jinjiechengong4.png"):this._id==t.keys[e]&&1==t.get(this._id)[1]&&c.instance.play("assets/others/tx_jinjiechengong5.png")},m.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.btnClip.play(),this._skillInfo=t[0],this._type=t[1],this._tLv=-1,this.updateSkill()},m.prototype.updateSkillInfo=function(){if(this._skillInfo){for(var t=0==this._type?o.ImmortalsModel.instance.skillList:a.instance.skillList,e=new Array,i=0,n=t.keys.length;i<n;i++)e[i]=t.get(t.keys[i]);var s=u.getSkillPureIdById(this._skillInfo[0]);for(i=0,n=e.length;i<n;i++)if(u.getSkillPureIdById(e[i][0])===s){this._skillInfo=e[i],this.updateSkill();break}}},m.prototype.updateSkill=function(){this.titleTXt.text=0==this._type?"神兵技能":"仙翼技能";var t=this._skillInfo[1],e=this._skillInfo[0];this._id=e;var i=u.getSkillPureIdById(e),n=d.instance.getCfgById(i);e=0===t?u.getSkillIdByPureIdAndLv(i,1):e;var s,o=u.getSkillIdByPureIdAndLv(i,t+1),a=l.instance.getCfgById(e),r=l.instance.getCfgById(o);s=0==this._type?h.instance.getShengjiLvTableBySkillId(i):p.instance.getShengjiLvTableBySkillId(i),this.iconImg.skin="assets/icon/skill/"+n[6]+".png",this.nameTxt.text=n[1]+"  Lv."+t,this.powerTxt.text="战力："+(0===t?0:s[t][this._type,2][2]),this.conditionTxt.visible=!0,this.activateOrUpBtn.visible=!0,0===t?(this.curLvDesc.text="无",this.activateOrUpBtn.label="激活",this.conditionTxt.text=0==this._type?"激活条件：神兵等级 Lv."+h.instance.getActLevBySkillId(e):"激活条件：仙翼等级 Lv."+s[1][0],this.conditionTxt.color="#ED1100",this.nextLvDesc.text=u.stringFormat(n[5],r[2])):(this.curLvDesc.text=u.stringFormat(n[5],a[2]),this.activateOrUpBtn.label="升级",s[t+1]?(this.conditionTxt.text=0==this._type?"升级条件：神兵等级 Lv."+h.instance.getUpLevBySkillIdAndSkillLev(e):"升级条件：仙翼等级 Lv."+s[t+1][0],this.conditionTxt.color="#ED1100",this.nextLvDesc.text=u.stringFormat(n[5],r[2])):(this.activateOrUpBtn.visible=!1,this.conditionTxt.text="已满级",this.conditionTxt.color="#00AD35",this.nextLvDesc.text="已达最大等级"),1===t&&0===this._tLv?c.instance.play("assets/others/tx_jinjiechengong5.png",340):t!==this._tLv&&-1!==this._tLv&&c.instance.play("assets/others/tx_jinjiechengong4.png",340)),0<this._skillInfo[2]?(this.activateOrUpBtn.mouseEnabled=this.btnClip.visible=!0,this.conditionTxt.visible=this.activateOrUpBtn.gray=!1):(this.activateOrUpBtn.mouseEnabled=this.btnClip.visible=!1,this.conditionTxt.visible=this.activateOrUpBtn.gray=!0)},m.prototype.func=function(){0==this._type?o.ImmortalsCtrl.instance.skillLev([this._id]):n.instance.skillLev([this._id])},r=m,o.ImmortalsUpgradeAlert=r}(modules=modules||{}),function(d){var t,g,m,f,e;function y(){this._currEquipId=new Array}t=d.compose||(d.compose={}),g=d.bag.BagModel,m=d.redPoint.RedPointCtrl,f=d.config.ComposeCfg,Object.defineProperty(y,"instance",{get:function(){return this._instance=this._instance||new y},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"ComposeReply",{get:function(){return this._composeReply},set:function(t){this._composeReply=t,GlobalData.dispatcher.event("COMPOSE_REPLY")},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"ResolveReply",{get:function(){return this._resolveReply},set:function(t){this._resolveReply=t,GlobalData.dispatcher.event("RESOLVE_REPLY")},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"currEquipPic",{get:function(){return this._currEquipPic},set:function(t){this._currEquipPic=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"currEquipId",{get:function(){return this._currEquipId},set:function(t){this._currEquipId=t},enumerable:!0,configurable:!0}),y.prototype.getEquip=function(t){var e=new Array,i=t[0],n=1e3*(i/1e3>>0),s=(.1*i>>0)%100,o=y.instance.currEquipId;switch(s.toString()){case"99":for(var a=1;a<7;a++)for(var r=1;r<10;r++)for(var l=n+10*a+(u=r),h=g.instance.getItemsById(l),c=0;c<h.length;c++)0<h[c][1]&&e.push(h[c]);break;case"00":for(var p=1;p<11;p++)for(r=1;r<10;r++){var u=r;for(l=void 0,l=10==p?n+p+u:n+10*p+u,h=g.instance.getItemsByBagId(CommonUtil.getBagIdById(l)),c=0;c<h.length;c++)0<h[c][1]&&e.push(h[c])}break;case"88":for(var d=9;d<11;d++)for(r=1;r<10;r++)for(u=r,l=void 0,l=10==d?n+d+u:n+10*d+u,h=g.instance.getItemsByBagId(CommonUtil.getBagIdById(l)),c=0;c<h.length;c++)0<h[c][1]&&e.push(h[c]);break;case"77":for(var m=7;m<9;m++)for(r=1;r<10;r++)for(l=n+10*m+(u=r),h=g.instance.getItemsById(l),c=0;c<h.length;c++)0<h[c][1]&&e.push(h[c])}for(var f=e.length;f--;)for(c=0;c<o.length;c++)e[f]==o[c]&&e.splice(f,1);return e},y.prototype.setNum=function(t){var e=1e3*(t/1e3>>0),i=0;switch(((.1*t>>0)%100).toString()){case"99":for(var n=1;n<7;n++)for(var s=1;s<10;s++){var o=e+10*n+(a=s);i+=g.instance.getItemCountById(o)}break;case"00":for(n=1;n<11;n++)for(s=0;s<10;s++){var a=s;o=void 0,o=10==n?e+n+a:e+10*n+a,i+=g.instance.getItemCountById(o)}break;case"88":for(n=9;n<11;n++)for(s=0;s<10;s++)a=s,o=void 0,o=10==n?e+n+a:e+10*n+a,i+=g.instance.getItemCountById(o);break;case"77":for(n=7;n<9;n++)for(s=0;s<10;s++)o=e+10*n+(a=s),i+=g.instance.getItemCountById(o)}return i},y.prototype.setDotDic=function(){var t=f.instance.getComposeTclassLength(),e=!1,i=!1;this._equipRPIndex=null;for(var n=0;n<t.length;n++){var s=t[n];if(null!=s)for(var o=0;o<s.length;o++){var a=f.instance.getComposeCfgBySclass(n,o);if(null!=a&&(!(13<=n&&n<=17)||d.yuanShen.YuanShenModel.instance.getIsOpenById(n-12)))for(var r=0;r<a.length;r++){for(var l=a[r][6],h=new Array,c=0;c<l.length;c++){var p=l[c][0],u=g.instance.getItemCountById(p)/l[c][1]>>0;h.push(u)}if(h.sort(function(t,e){return e<t?-1:1}),0<h.pop()){1===n?i=!0:e=!0;break}}}}m.instance.setRPProperty("redEquipComposeRP",!1),m.instance.setRPProperty("composeStoneRP",i),m.instance.setRPProperty("composeRP",e)},Object.defineProperty(y.prototype,"equipRPIndex",{get:function(){return this._equipRPIndex},enumerable:!0,configurable:!0}),y.prototype.checkPoint=function(t,e){var i=!1,n=t+1;if(13<=n&&n<=17&&!d.yuanShen.YuanShenModel.instance.getIsOpenById(n-12))return!1;for(var s=e+1,o=f.instance.getComposeCfgBySclass(n,s),a=0;a<o.length;a++){for(var r=o[a][6],l=new Array,h=0;h<r.length;h++){var c=r[h][0],p=g.instance.getItemCountById(c)/r[h][1]>>0;l.push(p)}if(l.sort(function(t,e){return e<t?-1:1}),0<l.pop())return i=!0;i=!1}return i},e=y,t.ComposeModel=e}(modules=modules||{}),function(i){var n,s,o,t,a,r,e,l,h,c,p,u,d;function m(){return null!==s&&s.apply(this,arguments)||this}n=i.player||(i.player={}),o=game.GameCenter,t=Laya.Dictionary,a=i.bag.BagModel,r=i.bag.BaseItem,e=i.common.AvatarClip,l=i.common.CustomClip,h=ui.PlayerViewUI,c=i.bottomTab.BottomTabCtrl,p=i.funcOpen.FuncOpenModel,u=i.config.BlendCfg,s=h,__extends(m,s),m.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.equipBtn,this,this.equipHandler),this.onAutoClick(this.rankBtn,this,this.rankHandler),this.onAutoClick(this.attrBtn,this,this.attrHandler),this.onAutoClick(this.nextBtn,this,this.nextHandler),this.onAutoClick(this.preBtn,this,this.preHandler),this.onAutoClick(this.addTipsBtn1,this,this.addTipsBtnHandler,[0]),this.onAutoClick(this.addTipsBtn2,this,this.addTipsBtnHandler,[1]),this.onAutoClick(this.addTipsBtn3,this,this.addTipsBtnHandler,[2]),this.onAutoClick(this.btn1,this,this.goldBodyHandler),this.onAutoClick(this.btn2,this,this.zuduiHandler),this.onAutoClick(this.immortalsBtn,this,this.immortalsHandler),this.onAutoClick(this.wingBtn,this,this.wingHandler),this.onAutoClick(this.fashionImgBtn,this,this.fashionImgBtnHandler),this.onAutoClick(this.artifactBtn,this,this.artifactBtnHandler),this.onAutoClick(this.playerTitleBtn,this,this.playerTitleBtnHandler),this.onAutoClick(this.suitImg,this,this.suitHandler),this.onAutoClick(this.fightTalismanImg,this,this.fightTalismanBtn),this.onAutoClick(this.moneyCatImg,this,this.moneyCatBtn),this.onAutoClick(this.xdBtn,this,this.xdBtnHandler),this.onAutoClick(this.glovesBtn,this,this.glovesClickHandler),this.onAutoClick(this.fashionSuitsImg,this,this.fashionSuitsHandler),this.onAutoClick(this.ltBtn,this,this.ltHandler),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.equipInitedHandler),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIP",this,this.setEquip),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.wearEquips),this.onAutoGlobalEvt("PLAYER_UPDATE_FIGHT",this,this.updateFight),this.onAutoGlobalEvt("BAG_DATA_GOT",this,this.updateBag),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.moneyCatGray),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.fightTalismanGray),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.updateGlovesInfo),this.onAutoGlobalEvt("PLAYER_TOTAL_ATTR_UPDATE",this,this.showAddTipsBtn),this.regAutoRP(this.fwDotImg,["runeRP","runeResolvRP","runeComposeRP","runeBookRP"]),this.regAutoRP(this.xdRP,["xianDanRP","destinyPellet"]),this.regAutoRP(this.suitRP,["equipSuitRP_0","equipSuitRP_1","equipSuitRP_2","equipSuitRP_3","equipSuitRP_4","equipSuitRP_5","equipSuitRP_6","equipSuitRP_7","equipSuitRP_8","equipSuitRP_9","equipSuitRP_10","equipSuitRP_11","equipSuitRP_12","equipSuitRP_13","equipSuitRP_14"]),this.regAutoRP(this.dotImg_1,["goldBodyRP"]),this.regAutoRP(this.xyDotImg,["wingShengjiRP","wingHuanhuaJipinRP","wingHuanhuaZhenpinRP","wingHuanhuaJuepinRP","wingFuhunRP","wingMasterRP","showEquipWing"]),this.regAutoRP(this.sbDotImg,["immortalsShengjiRP","immortalsHuanhuaJipinRP","immortalsHuanhuaZhenpinRP","immortalsHuanhuateShuRP","immortalsHuanhuaJuepinRP","immortalsFuhunRP","immortalMasterRP","showEquipImmortal"]),this.regAutoRP(this.fightTalismanRP,["fightTalismanRP"]),this.regAutoRP(this.moneyCatRP,["moneyCatRP"]),this.regAutoRP(this.chDotImg,["playerTitleRP"]),this.regAutoRP(this.fashionRP,["fashionShengJiRP","fashionShengJiMatRP","fashionHuanHuaZhenPinRP","fashionHuanHuaJiPinRP","fashionHuanHuaTeShuRP","fashionHuanHuaJuePinRP","fashionFuHunRP","fashionMasterRP","showEquipFashion"]),this.regAutoRP(this.tianZhuRP,["tianZhuShengJiRP","tianZhuShengJiMatRP","tianZhuHuanHuaZhenPinRP","tianZhuHuanHuaJiPinRP","tianZhuHuanHuaJuePinRP","tianZhuFuHunRP","pearlMasterRP","showEquipPearl"]),this.regAutoRP(this.glovesRP,["glovesRP"]),this.regAutoRP(this.fashionSuitsRP,["fashionSuitsRP","fashionSuits1RP","fashionSuits2RP"]),this.regAutoRP(this.leitingRP,["thunderboltEquipRP1","thunderboltEquipRP2","extremeEquioPanelRP","brahmaRP1","brahmaRP2","brahmaResolveRP","brahmaRP3","brahmaRP4"])},m.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._equipPoses=new Array,this._partDic=new t,this.fightTalismanImg.skin="assets/icon/item/10082.png",this.moneyCatImg.skin="assets/icon/item/10081.png",this.glovesBtn.skin="assets/icon/item/10083.png",this._equipPoses.push([49,210],[49,330],[49,450],[49,570],[49,690],[569,210],[569,330],[569,450],[569,570],[569,690]),this._partRPArr=[this.partRP1,this.partRP2,this.partRP3,this.partRP4,this.partRP5,this.partRP6,this.partRP7,this.partRP8,this.partRP9,this.partRP10],this._btnClip=l.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,258,765),this._avatarClip=e.create(1560,1560,850),this.addChildAt(this._avatarClip,4),this._avatarClip.pos(368,680,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180,this.regGuideSpr(4,this.equipBtn),this.regGuideSpr(94,this.btn1)},m.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.equipInitedHandler(),this.updateFight(),this.fightTalismanGray(),this.moneyCatGray(),this.updateGlovesInfo(),this.showAddTipsBtn();var t=o.instance.getRole(n.PlayerModel.instance.actorId);if(t){var e=t.property.get("exterior");this._avatarClip.reset(e[0],e[1],e[2],0,0,e[5]),this.observationItem.data=[[this._avatarClip,0]]}this.setVisible()},m.prototype.close=function(){s.prototype.close.call(this),this._btnClip.visible=!1,this._btnClip.stop()},m.prototype.equipInitedHandler=function(){var t=n.PlayerModel.instance.equipsDic;if(t){for(var e=0,i=t.keys.length;e<i;e++)this.setEquip(t.keys[e],t.values[e],!1);this.checkPartRP()}},m.prototype.setEquip=function(t,e,i){void 0===i&&(i=!0);var n=this._partDic.get(t);if(e?(n||(n=new r,this._partDic.set(t,n),n.pos(this._equipPoses[t-1][0],this._equipPoses[t-1][1],!0)),this.addChildAt(n,17),n.dataSource=e):n&&n.removeSelf(),i){var s=a.instance.getBestEquipDic().get(t);this._partRPArr[t-1].visible=!!s}},m.prototype.wearEquips=function(t){if(t){for(var e=0,i=t.length;e<i;e++)this.setEquip(t[e][0],t[e][1],!1);this.checkPartRP()}},m.prototype.updateFight=function(){n.PlayerModel.instance.fight?this.powerNum.value=n.PlayerModel.instance.fight.toString():this.powerNum.value="0"},m.prototype.equipHandler=function(){BagCtrl.instance.fastWearEquip()},m.prototype.rankHandler=function(){WindowManager.instance.open(87)},m.prototype.attrHandler=function(){WindowManager.instance.open(90)},m.prototype.fashionImgBtnHandler=function(){c.instance.openTabByFunc(181)},m.prototype.artifactBtnHandler=function(){c.instance.openTabByFunc(182)},m.prototype.playerTitleBtnHandler=function(){WindowManager.instance.open(264)},m.prototype.goldBodyHandler=function(){WindowManager.instance.open(35)},m.prototype.immortalsHandler=function(){c.instance.openTabByFunc(123)},m.prototype.wingHandler=function(){c.instance.openTabByFunc(124)},m.prototype.ltHandler=function(){c.instance.openTabByFunc(808)},m.prototype.zuduiHandler=function(){WindowManager.instance.open(135)},m.prototype.xdBtnHandler=function(){c.instance.openTabByFunc(881)},m.prototype.nextHandler=function(){},m.prototype.preHandler=function(){},m.prototype.suitHandler=function(){WindowManager.instance.openByActionId(194)},m.prototype.addTipsBtnHandler=function(t){if(p.instance.getFuncIsOpen(92))WindowManager.instance.open(93);else{var e="戒指";switch(t){case 0:e="手镯";break;case 1:e="戒指";break;case 2:e="玉佩"}i.notice.SystemNoticeManager.instance.addNotice(e+"可通过寻宝获得",!0)}},m.prototype.updateBag=function(){this.checkPartRP()},m.prototype.checkPartRP=function(){for(var t=a.instance.getBestEquipDic(),e=!1,i=0;i<10;i++)t.get(i+1)?e=this._partRPArr[i].visible=!0:this._partRPArr[i].visible=!1;e?(this._btnClip.visible=!0,this._btnClip.play()):(this._btnClip.visible=!1,this._btnClip.stop())},m.prototype.destroy=function(t){if(void 0===t&&(t=!0),this._partDic){for(var e=0,i=this._partDic.values;e<i.length;e++)i[e].destroy(!0);this._partDic=null}this._btnClip=this.destroyElement(this._btnClip),this._avatarClip=this.destroyElement(this._avatarClip),this.observationItem=this.destroyElement(this.observationItem),s.prototype.destroy.call(this,t)},m.prototype.fightTalismanBtn=function(){WindowManager.instance.open(378)},m.prototype.fightTalismanGray=function(){this.fightTalismanImg.gray=-1==i.fight_talisman.FightTalismanModel.instance.actived},m.prototype.moneyCatBtn=function(){WindowManager.instance.open(380)},m.prototype.fashionSuitsHandler=function(){c.instance.openTabByFunc(291)},m.prototype.moneyCatGray=function(){this.moneyCatImg.gray=-1==i.money_cat.MoneyCatModel.instance.actived},m.prototype.updateGlovesInfo=function(){var t=i.gloves.GlovesModel.instance.glovesInfo;this.glovesBtn.gray=!t||1!==t[0]},m.prototype.glovesClickHandler=function(){WindowManager.instance.open(386)},m.prototype.showAddTipsBtn=function(){n.PlayerModel.instance.level>=u.instance.getCfgById(53001)[1][0]?(this.addTipsBtn2.visible=!0,this.addTipsBtn3.visible=!0):(this.addTipsBtn2.visible=!1,this.addTipsBtn3.visible=!1)},m.prototype.setVisible=function(){if(PlatParams.isCloseRecharge)for(var t=[this.fightTalismanImg,this.glovesBtn,this.moneyCatImg,this.bgImg4,this.bgImg5,this.bgImg3,this.moneyCatRP,this.glovesRP,this.fightTalismanRP,this.name1,this.name2,this.name3],e=0,i=t.length;e<i;e++)t[e]&&(t[e].visible=!1)},d=m,n.PlayerPanel=d}(modules=modules||{}),function(h){var t,c,e,p,i,u,d,m,f,g,y,_,n,v,I,b,C,T,w,s;function o(){return null!==c&&c.apply(this,arguments)||this}t=h.commonAlert||(h.commonAlert={}),e=h.common.CustomClip,p=h.config.ExteriorCfg,i=h.common.AvatarClip,u=h.config.RideMagicShowCfg,d=h.config.PetMagicShowCfg,m=h.config.RideRankCfg,f=h.config.PetRankCfg,g=h.config.FirstPayCfg,y=h.config.PetFazhenCfg,_=h.config.RideFazhenCfg,n=ui.ExteriorActiveAlertUI,v=h.config.FashionMagicShowCfg,I=h.config.TianZhuMagicShowCfg,b=h.config.ShenqiCfg,C=h.config.SkillCfg,T=h.config.ShenbingMagicshowCfg,w=h.config.WingMagicshowCfg,c=n,__extends(o,c),o.prototype.destroy=function(){this._effect=this.destroyElement(this._effect),this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),c.prototype.destroy.call(this)},o.prototype.initialize=function(){c.prototype.initialize.call(this),this._effect=e.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._effect,1),this._effect.scale(2.5,2.5,!0),this._effect.y=100,this._effect.centerX=0,this._modelClip=i.create(1024,1024,1024),this.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.y=500,this.clickCD=!0,this._tweenJS=TweenJS.create(this._modelClip).yoyo(!0).repeat(99999999)},o.prototype.onOpened=function(){c.prototype.onOpened.call(this),this._effect.play()},o.prototype.close=function(){c.prototype.close.call(this),this._tweenJS.stop(),this._effect.stop()},o.prototype.setOpenParam=function(t){c.prototype.setOpenParam.call(this,t),this.titleImage.skin="immortal/txt_common_hdxwg.png";var e=t[0],i=t[1];12===i&&(e=h.config.BabyCfg.instance.getShowId(e)),this._type=i;var n=p.instance.getCfgById(e),s=n[2];this.nameTXt.text=s,this._modelClip.avatarScale=n[10]?n[10]:1,this._modelClip.avatarRotationX=n[6],this._modelClip.avatarRotationY=n[7],this._modelClip.avatarY=n[9],this._modelClip.avatarX=n[8],this._modelClip.setActionType("stand");var o=e/1e3>>0;if(9==o||10==o?(this._modelClip.reset(0,0,0,0,e),this._effect.stop(),this._effect.visible=!1):(this._effect.play(),this._effect.visible=!0,this._modelClip.reset(e)),this.tipTxt.visible=!0,this.closeBtn.visible=!1,this.closeOnSide=!0,this.height=714,this._tweenJS.stop(),this._modelClip.y=500,-1==i){if(this.closeOnSide=!1,this.tipTxt.visible=!1,this.closeBtn.visible=!0,this.height=850,0==h.first_pay.FirstPayModel.instance.giveState)return;var a=g.instance.getCfgById(h.first_pay.FirstPayModel.instance.id);this.atkValueMsz.value=a[10][0].toString()}else if(1==i)this.atkValueMsz.value=T.instance.getDataByIdLvField(e,1,0).toString(),this._tweenJS.to({y:this._modelClip.y-20},1e3).start();else if(2==i)this.atkValueMsz.value=w.instance.getDataByIdLvField(e,1,0).toString();else if(3==i)this.atkValueMsz.value=u.instance.getDataByIdLvField(e,1,0).toString();else if(4==i){var r=d.instance.getDataByIdLvField(e,1,0);this.atkValueMsz.value=r.toString()}else if(5==i)a=m.instance.getActivateCfgByShowId(e),this.atkValueMsz.value=a[5].toString();else if(6==i)a=f.instance.getActivateCfgByShowId(e),this.atkValueMsz.value=a[5].toString();else if(7==i)this.atkValueMsz.value=y.instance.getDataByIdLvField(e,1,0).toString(),this._tweenJS.to({y:this._modelClip.y-20},1e3).start();else if(8==i)this.atkValueMsz.value=_.instance.getDataByIdLvField(e,1,0).toString(),this._tweenJS.to({y:this._modelClip.y-20},1e3).start();else if(9===i)this.atkValueMsz.value=v.instance.getDataByIdLvField(e-PlayerModel.instance.occ,1,0).toString();else if(10===i)this.atkValueMsz.value=I.instance.getDataByIdLvField(e,1,0).toString(),this._modelClip.setActionType("show");else if(11===i){var l=b.instance.getCfgByShowId(e)[3];this.atkValueMsz.value=C.instance.getCfgById(l)[3].toString(),this.titleImage.skin="immortal/txt_common_jhsq.png",this._tweenJS.to({y:this._modelClip.y-20},1e3).start()}else 12===i?(this.atkValueMsz.value=h.config.BabyCfg.instance.getGradeFight(t[0],1).toString(),this.titleImage.skin="baby/txt_xwxt_hdxxw.png"):13===i?(this.atkValueMsz.value=h.config.BabyCfg.instance.getGradeFight(t[0],1).toString(),this.titleImage.skin="baby/txt_xwxt_hdxxw.png"):14==i&&(this.atkValueMsz.value=h.config.SoulWarCfg.instance.getZhanhunFight(t[0],1).toString(),this.titleImage.skin="soul_war/txt_zhxt_hdxzh.png",this._modelClip.y=410);11!=i&&(this.observationItem.data=[[this._modelClip,Math.round(e/1e3)]])},s=o,t.ExteriorActiveAlert=s}(modules=modules||{}),function(t){var e,i;function n(t,e){this._con=t,this._obj=e,this._lastY=0}e=t.common||(t.common={}),n.prototype.destroy=function(){this.removeListeners(),this._con=null,this._obj=null},n.prototype.addListeners=function(){this._obj.on("mousedown",this,this.downHandler),this._obj.on("mousewheel",this,this.wheelHandler)},n.prototype.removeListeners=function(){this._obj&&(this._obj.off("mousedown",this,this.downHandler),this._obj.off("mousewheel",this,this.wheelHandler))},n.prototype.downHandler=function(){this._lastY=this._obj.mouseY,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseup",this,this.upHandler),Laya.stage.on("mouseout",this,this.upHandler)},n.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scroll(e)},n.prototype.moveHandler=function(){var t=this._lastY-this._obj.mouseY;this.scroll(t),this._lastY=this._obj.mouseY},n.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseup",this,this.upHandler),Laya.stage.off("mouseout",this,this.upHandler)},n.prototype.scroll=function(t){this._obj.y=this._obj.y-t,this._obj.y<this._con.height-this._obj.height?(this._obj.y=this._con.height-this._obj.height,this._lastY=this._obj.y):0<this._obj.y&&(this._lastY=this._obj.y=0)},n.prototype.initState=function(t,e){void 0===t&&(t=this._obj.height),void 0===e&&(e=!0),t<this._con.height?(e&&(this._obj.y=(this._con.height-t)/2),this.removeListeners()):this.addListeners()},n.prototype.resetY=function(){this._obj.y=0},i=n,e.CustomSlide=i}(modules=modules||{}),function(t){var r,e,i,n,s,l,h,c,o,a;function p(){return null!==e&&e.apply(this,arguments)||this}r=t.player||(t.player={}),i=ui.PlayerAttrAlertUI,n=t.common.BtnGroup,s=t.common.ProgressBarCtrl,l=t.config.HumanCfg,h=t.common.AttrUtil,c=t.config.AttrItemCfg,o=t.common.CustomList,e=i,__extends(p,e),p.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnGroup=new n,this._btnGroup.setBtns(this.btn1,this.btn2,this.btn3,this.btn4),this._textArr=[this.attTxt_1,this.attTxt_2,this.attTxt_3,this.attTxt_4,this.attTxt_5,this.attTxt_6,this.attTxt_7,this.attTxt_8,this.attTxt_9,this.attTxt_10,this.attTxt_11,this.attTxt_12,this.attTxt_13,this.attTxt_14,this.attTxt_15,this.attTxt_16,this.attTxt_17,this.attTxt_18,this.attTxt_19,this.attTxt_20,this.attTxt_21,this.attTxt_22,this.attTxt_23,this.attTxt_24,this.attTxt_25,this.attTxt_26,this.attTxt_27,this.attTxt_28,this.attTxt_29,this.attTxt_30,this.attTxt_31,this.attTxt_32,this.attTxt_33,this.attTxt_34],this._progressBar=new s(this.barImg,this.barImg.width,this.expValueTxt),this._baseAttrIds=[1,2,3,4,5,6,7,8],this._specAttrIds=[161,162,15,21,10,11,13,14,141,142,167,202,203,204,205,206,207,208,209,210,211,273,274,275,276,277,278,279,292,293,294,295,296,297],this._allAttrIds=[1,2,3,4,5,6,7,8,161,162,15,21,10,11,13,14,141,142,167,202,203,204,205,206,207,208,209,210,211,273,274,275,276,277,278,279,292,293,294,295,296,297],this._list=o.create("v",0,0,520,808,r.PlayerAttrItem,5),this._list.size(520,808),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list1=o.create("v",0,0,520,808,r.PlayerAttrItem1,5),this._list1.size(520,808),this.listBox1.addChild(this._list1),this._list1.pos(0,0,!0),this._damageFonts=new Array,this._damageFonts.push([0,"【攻击】","攻击伤害展示","damage_fonts/zs_zhandouzi_2.png","damage_fonts/4.png",1]),this._damageFonts.push([1,"【暴击】","暴击伤害展示","damage_fonts/zs_zhandouzi_2.png","damage_fonts/1.png",2]),this._damageFonts.push([1,"【会心】","会心伤害展示","damage_fonts/zs_zhandouzi_6.png","damage_fonts/7.png",3]),this._damageFonts.push([1,"【神圣】","神圣伤害展示","damage_fonts/txt_zdmsz_ss.png","damage_fonts/8.png",8]),this._damageFonts.push([1,"【灵宠攻击】","灵宠攻击伤害展示","damage_fonts/zs_zhandouzi_3.png","damage_fonts/3.png",4]),this._damageFonts.push([1,"【灵宠暴击】","灵宠暴击伤害展示","damage_fonts/zs_zhandouzi_1.png","damage_fonts/2.png",7]),this._damageFonts.push([1,"【受伤】","受伤害展示","damage_fonts/zs_zhandouzi_5.png","damage_fonts/6.png",5]),this._damageFonts.push([1,"【回血】","回复血量展示","damage_fonts/zs_zhandouzi_4.png","damage_fonts/5.png",6]),this._list1.datas=this._damageFonts},p.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),this._progressBar=this.destroyElement(this._progressBar),this._textArr=this.destroyElement(this._textArr),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this._baseAttrIds&&(this._baseAttrIds.length=0,this._baseAttrIds=null),this._specAttrIds&&(this._specAttrIds.length=0,this._specAttrIds=null),this._allAttrIds&&(this._allAttrIds.length=0,this._allAttrIds=null),this._damageFonts&&(this._damageFonts.length=0,this._damageFonts=null),e.prototype.destroy.call(this)},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.attrUpdate),this.onAutoGlobalEvt("PLAYER_BASE_ATTR_UPDATE",this,this.attrUpdate),this.onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.attrUpdate),this.onAutoGlobalEvt("PLAYER_UPDATE_EXP",this,this.attrUpdate),this.onAutoGlobalEvt("PLAYER_TOTAL_ATTR_UPDATE",this,this.attrUpdate)},p.prototype.offEvt=function(){e.prototype.offEvt.call(this)},p.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this.attrUpdate()},p.prototype.attrUpdate=function(){this.typeNameTxt.text=this._btnGroup.selectedBtn.label;var t=r.PlayerModel.instance.playerTotolAttrs;if(this.box1.visible=0===this._btnGroup.selectedIndex||1===this._btnGroup.selectedIndex,this.box2.visible=2===this._btnGroup.selectedIndex,this.box3.visible=3===this._btnGroup.selectedIndex,0==this._btnGroup.selectedIndex){this.con.height=665,this.con.y=143,this.box.height=this.charmTxt.y+this.charmTxt.height,this.charmTxt1.visible=this.charmTxt.visible=this.lvTxt.visible=this.idTxt.visible=this.expTxt.visible=this.expValueTxt.visible=this.proBg.visible=this.barImg.visible=!0,this.charmTxt.text="魅力:"+CommonUtil.getPropCountById(94440001),this.charmTxt1.text="人气:"+r.PlayerModel.instance.renQiNum;for(var e=0,i=this._textArr.length;e<i;e++)if(e>=this._baseAttrIds.length)this._textArr[e].visible=!1;else{this._textArr[e].visible=!0;var n=this._baseAttrIds[e],s=h.getAttrByType(n,t),o=c.instance.getCfgById(n),a=s?s[1]:0;this._textArr[e].text=o[1]+":"+(o[2]?h.formatFloatNum(a)+"%":Math.round(a))}this.lvTxt.text="等级:"+r.PlayerModel.instance.level,this.idTxt.text="ID:"+r.PlayerModel.instance.actorId,this._progressBar.maxValue=l.instance.getCfgByLv(r.PlayerModel.instance.level)[2],this._progressBar.value=r.PlayerModel.instance.playerBaseAttr[5]}else if(1==this._btnGroup.selectedIndex)for(this.box.height=this.con.height=665,this.con.y=this.expTxt.y,this.box.height=665,this.charmTxt1.visible=this.charmTxt.visible=this.lvTxt.visible=this.idTxt.visible=this.expTxt.visible=this.expValueTxt.visible=this.proBg.visible=this.barImg.visible=!1,e=0,i=this._textArr.length;e<i;e++)e>=this._specAttrIds.length?this._textArr[e].visible=!1:(this._textArr[e].visible=!0,s=h.getAttrByType(this._specAttrIds[e],t),o=c.instance.getCfgById(this._specAttrIds[e]),a=s?s[1]:0,this._textArr[e].text=o[1]+":"+(o[2]?h.formatFloatNum(a)+"%":Math.round(a)));else 2==this._btnGroup.selectedIndex?(this._scrollPosOld=this._list.scrollPos,this._list.datas=this._allAttrIds,this._list.scrollPos=this._scrollPosOld):3==this._btnGroup.selectedIndex&&(this._scrollPosOld1=this._list1.scrollPos,this._list1.scrollPos=this._scrollPosOld1)},a=p,r.PlayerAttrAlert=a}(modules=modules||{}),function(l){var h,a,t,c,i,e,r,n;function s(){var t=null!==a&&a.apply(this,arguments)||this;return t.typeNums=[1,2,3,4,6,7],t}h=l.store||(l.store={}),t=l.common.BtnGroup,c=l.config.StoreCfg,i=l.common.CommonUtil,e=l.common.SimpleList,r=l.funcOpen.FuncOpenModel,a=ui.StoreViewUI,__extends(s,a),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._tab=this.destroyElement(this._tab),this._btnArr=this.destroyElement(this._btnArr),this._panels&&(this._panels.length=0,this._panels=null),a.prototype.destroy.call(this,t)},s.prototype.initialize=function(){a.prototype.initialize.call(this),this.centerY=this.centerX=0,this.noTipImg.visible=!1,this.noTipTxt.text="",this._tab=new t,this._tab.setBtns(this.btn_1,this.btn_2,this.btn_3,this.btn_4,this.btn_5,this.btn_6,this.btn_7,this.btn_8,this.btn_9,this.btn_10),this._btnArr=[this.btn_1,this.btn_2,this.btn_3,this.btn_4,this.btn_5,this.btn_6,this.btn_7,this.btn_8,this.btn_9,this.btn_10],this._list=e.create(h.StoreItem,328,169,1,2,6,7),this._list.width=662,this._list.height=818,this._list.x=28,this._list.y=108,this.addChildAt(this._list,4)},Object.defineProperty(s.prototype,"mallType",{set:function(t){this._mallType=t,this._panels=0==t?[128,129,130]:10==t?[132,235,414,640,760,385,1169]:[345,346]},enumerable:!0,configurable:!0}),s.prototype.selectStore=function(){var t=this._tab.selectedIndex,e=this._panels[t];WindowManager.instance.open(e)},s.prototype.onOpened=function(){a.prototype.onOpened.call(this),WindowManager.instance.close(357);for(var t=0;t<this._btnArr.length;t++){var e=this._btnArr[t];e&&(e.visible=!1)}for(var i=0;i<this.typeNums.length;i++){var n=this.typeNums[i],s=c.instance.getTypeStoreCfgByChildType(this._mallType,n);0<s.length?(this._btnArr[i].visible=!0,this._btnArr[i].label=s[0][6]):this._btnArr[i].visible=!1}if(10==this._mallType&&(this._btnArr[5].visible=!0,this._btnArr[5].label="仙府商店",r.instance.getFuncNeedShow(777)&&(this._btnArr[6].visible=!0,this._btnArr[6].label="拍卖商店")),0==this._mallType){var o=h.StoreModel.instance.getmall_1RP();this.xianShiTeHui.visible=o}this._btnArr[2].visible&&0===this._mallType&&PlatParams.isCloseRecharge&&(this._btnArr[2].visible=!1),this.showUI()},s.prototype.updatePlatChangeRecharge=function(){this._btnArr[2].visible&&0===this._mallType&&(this._btnArr[2].visible=!PlatParams.isCloseRecharge)},s.prototype.showUI=function(){for(var t=c.instance.getTypeStoreCfgByChildType(this._mallType,this.typeNums[this._tab.selectedIndex]),e=new Array,i=0;i<t.length;i++){var n=t[i];if(n){var s=n[15];if(s)if(0<s.length){var o=s[0],a=s[1],r=l.born.BornModel.instance.lv;o<=r&&r<=a&&e.push(n)}else e.push(n);else e.push(n)}}e=e.sort(h.StoreModel.instance.sortFunc.bind(this)),this._list.datas=e,this.updateMoney()},s.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoEvt(this._tab,"change",this,this.selectStore),this.onAutoGlobalEvt("PURCHASE_REPLY",this,this.puchaseReply),this.onAutoGlobalEvt("BORN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),10===this._mallType&&this.regAutoRP(this.rp7,["auctionStoreRP"])},s.prototype.updateMoney=function(){},s.prototype.puchaseReply=function(){var t=h.StoreModel.instance.PurchaseReply[0];if(0!=t?i.noticeError(t):WindowManager.instance.close(103),0==this._mallType){var e=h.StoreModel.instance.getmall_1RP();this.xianShiTeHui.visible=e}},n=s,h.StoreBasePanel=n}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.store||(e.store={}),n=e.common.CommonUtil,s=e.store.StoreBasePanel,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=10,this.currencyImg.skin="assets/icon/item/10025_s.png"},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=0,this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateMoney)},a.prototype.updateMoney=function(){var t=e.bag.BagModel.instance.getItemCountById(13030001);this.currencyTxt.text="BOSS精魄:"+n.bigNumToString(t)},o=a,t.BossStorePanel=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.store||(t.store={}),n=t.common.CommonUtil,s=t.store.StoreBasePanel,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=0,this.currencyImg.skin="assets/icon/item/1_s.png"},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=2,this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateMoney)},a.prototype.updateMoney=function(){this.currencyTxt.text="元宝:"+n.bigNumToString(PlayerModel.instance.ingot)},o=a,e.GoldStorePanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.store||(t.store={}),n=t.common.CommonUtil,i=e.StoreBasePanel,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=0,this.currencyImg.skin="assets/icon/item/1_s.png"},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=0,this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateMoney)},o.prototype.updateMoney=function(){this.currencyTxt.text="元宝:"+n.bigNumToString(PlayerModel.instance.ingot)},s=o,e.LimitStorePanel=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.store||(t.store={}),n=t.common.CommonUtil,s=t.store.StoreBasePanel,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=0,this.currencyImg.skin="assets/icon/item/1_s.png"},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=3,this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateMoney)},a.prototype.updateMoney=function(){this.currencyTxt.text="元宝:"+n.bigNumToString(PlayerModel.instance.ingot)},o=a,e.VipStorePanel=o}(modules=modules||{}),function(o){var t,e,i,n,s;function a(){return null!==e&&e.apply(this,arguments)||this}t=o.store||(o.store={}),i=o.common.CommonUtil,n=o.store.StoreBasePanel,e=n,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.mallType=0,this.currencyImg.skin="assets/icon/item/1_s.png"},a.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),t&&(this._selectType=t)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.judgeSkinType()},a.prototype.judgeSkinType=function(){if("stoneSkin"==this._selectType){for(var t=this._list.datas,e=0,i=0,n=t.length;i<n;i++){var s=t[i][1];if(o.config.StoneCfg.instance.getCfgById(s)){e=i;break}}this._list.scrollToIndex(e)}},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this._tab.selectedIndex=1,this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateMoney)},a.prototype.updateMoney=function(){this.currencyTxt.text="元宝:"+i.bigNumToString(PlayerModel.instance.ingot)},s=a,t.UsualStorePanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.store||(t.store={}),n=t.common.CommonUtil,i=e.StoreBasePanel,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=10,this.currencyImg.skin="assets/icon/item/23_s.png"},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=1,this.onAutoGlobalEvt("PLAYER_UPDATE_HONOR",this,this.updateMoney)},o.prototype.updateMoney=function(){this.currencyTxt.text="荣誉值:"+n.bigNumToString(PlayerModel.instance.tiantiHonor)},s=o,e.HonorStorePanel=s}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.store||(e.store={}),n=e.common.CommonUtil,s=e.store.StoreBasePanel,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=20,this.currencyImg.skin="assets/icon/item/10055_s.png"},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=0,this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateMoney)},a.prototype.updateMoney=function(){var t=e.bag.BagModel.instance.getItemCountById(13050001);this.currencyTxt.text="神魂玉:"+n.bigNumToString(t)},o=a,t.ShenhunStorePanel=o}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.store||(e.store={}),n=e.common.CommonUtil,s=e.store.StoreBasePanel,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=20,this.currencyImg.skin="assets/icon/item/10056_s.png"},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=1,this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateMoney)},a.prototype.updateMoney=function(){var t=e.bag.BagModel.instance.getItemCountById(13050002);this.currencyTxt.text="天尊圣印:"+n.bigNumToString(t)},o=a,t.ShengyinStorePanel=o}(modules=modules||{}),function(t){var e,r,i,l,n,h,c,s;function o(){return r.call(this)||this}e=t.store||(t.store={}),i=laya.events.Event,l=t.player.PlayerModel,n=t.common.NumInputCtrl,h=t.bag.BagModel,c=t.common.CommonUtil,r=ui.StoreAlertUI,__extends(o,r),o.prototype.initialize=function(){r.prototype.initialize.call(this),this._price=new Array,this._input=new n(this.numInput,this.addBtn,this.reduceBtn,this.addTenBtn,this.reduceTenBtn)},o.prototype.setOpenParam=function(t){r.prototype.setOpenParam.call(this,t);var e=t[1];this._type=t[2];var i=0;if(1===this._type)this._itemCfg=t[0],i=this._itemCfg[2],this._id=this._itemCfg[1],this._idOther=this._itemCfg[0],this._price=this._itemCfg[8];else if(2===this._type){i=1,this._itemCfg=t[0];var n=this._itemCfg[1];this._id=n[0],this._idXianFu=this._itemCfg[0],this._price=this._itemCfg[3]}this.baseItem.dataSource=[this._id,i,0,null],this.itemName.text=this.baseItem._nameTxt.text;var s=c.getItemTypeById(this._price[0]);this.totalPriceImg.skin=this.priceImg.skin=9==s?c.getIconById(this._price[0],!0):c.getIconById(this._price[0],!1),this.priceTxt.text=this._price[1].toString();var o=this._price[0],a=l.instance.getCurrencyById(o);null==a&&(a=h.instance.getItemCountById(o)),this._maxNum=Math.floor(a/this._price[1]),this._maxNum>e&&0!=e?this._input.max=e:this._input.max=this._maxNum,this._input.min=1,this._input.notice="购买数量",this._input.value=1,this.totalPriceTxt.text=(this._input.value*this._price[1]).toString()},o.prototype.puchaseHandler=function(){var t=this._input.value;0==t?(c.goldNotEnoughAlert(),this.close()):1===this._type?Channel.instance.publish(2099353,[this._idOther,t]):2===this._type&&(e.StoreCtrl.instance.BuyYuGeGoods(this._idXianFu),WindowManager.instance.close(103))},o.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.purchaseBtn.on(i.CLICK,this,this.puchaseHandler),this._input.on(i.CHANGE,this,this.inputHandler),this._input.addListeners()},o.prototype.offEvt=function(){r.prototype.offEvt.call(this),this.purchaseBtn.off(i.CLICK,this,this.puchaseHandler),this._input.off(i.CHANGE,this,this.inputHandler),this._input.removeListeners()},o.prototype.inputHandler=function(){var t=this._input.value;t>this._maxNum?this.totalPriceTxt.text=(this._maxNum*this._price[1]).toString():this.totalPriceTxt.text=(t*this._price[1]).toString()},s=o,e.StoreAlert=s}(modules=modules||{}),function(t){var c,e,i,n,s,o,p,a;function r(){return e.call(this)||this}c=t.vip||(t.vip={}),i=ui.VipViewUI,n=t.bag.BagItem,s=t.common.CustomClip,o=t.bag.BagUtil,p=t.notice.SystemNoticeManager,e=i,__extends(r,e),r.prototype.close=function(){e.prototype.close.call(this),this.rewardShowItem.stopTween()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this.prizeEffect=this.destroyElement(this.prizeEffect),this._btnClip=this.destroyElement(this._btnClip),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._showAward=new Array,this._increaseShow=new Array,this._increaseShow[0]=[this.increaseShow1,this.increaseNum1],this._increaseShow[1]=[this.increaseShow2,this.increaseNum2],this._increaseShow[2]=[this.increaseShow3,this.increaseNum3],this._showNum=5,this._showY=888,this._starX=60,this._interX=124,this._halfInterX=62,this._state=0,this._initX=65,this._initInterX=210,this._initAddX=18,this._initNum=3,this._initHalfInterX=105,this._progressWidth=330,this.allLink.underline=!0,this._isOdd=!0,this._initIsOdd=!0,this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.scale(.8,.8,!0),this._btnClip.pos(this.receiveBtn.x-5,this.receiveBtn.y-8,!0),this.prizeEffect=CommonUtil.creatEff(this,"ok_state",7),this.addChildAt(this.prizeEffect,2),this.prizeEffect.scale(2,2),this.prizeEffect.pos(113,249),this.prizeEffect.loop=!0,this.initAward(),this.rewardShowItem.setDataFun([1,1,.8,1,"assets/icon/ui/privilege/"]),this.rewardShowItem.tuJianModelCenterY=-65,this.rewardShowItem.imgCenterY=-25},r.prototype.initAward=function(){for(var t=0;t<this._showNum;t++)this._showAward[t]=new n,this.addChild(this._showAward[t]),this._showAward[t].y=this._showY,this._showAward[t].dataSource=null,this._showAward[t].visible=!1},r.prototype.setIncreasePos=function(){if(this._initIsOdd)for(var t=0;t<this._initNum;t++){var e=this._initX+t*this._initInterX;this._increaseShow[t][0].x=e,this._increaseShow[t][1].x=e+this._initAddX,this._increaseShow[t][0].visible=this._increaseShow[t][1].visible=!1}else for(t=0;t<this._initNum;t++)t<this._initNum-1&&(e=this._initX+t*this._initInterX+this._initHalfInterX,this._increaseShow[t][0].x=e,this._increaseShow[t][1].x=e+this._initAddX),this._increaseShow[t][0].visible=this._increaseShow[t][1].visible=!1},r.prototype.setPos=function(){if(this._isOdd)for(var t=0;t<this._showNum;t++){var e=this._starX+t*this._interX;this._showAward[t].x=e,this._showAward[t].visible=!1}else for(t=0;t<this._showNum;t++)t<this._showNum-1&&(e=this._starX+t*this._interX+this._halfInterX,this._showAward[t].x=e),this._showAward[t].visible=!1},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),WindowManager.instance.closeDialogOnVipPanel(),this.updatePage(),this.levelUpdate(),this.showMeiRiBox(),this.setVipBtn()},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.allLink,this,this.allLineHandler),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoClick(this.goBottomBtn,this,this.goBtnHandler),this.onAutoClick(this.leftBtn,this,this.leftBtnHandler),this.onAutoClick(this.rightBtn,this,this.rightBtnHandler),this.onAutoClick(this.receiveBtn,this,this.reciveBtnHandler),this.onAutoClick(this.meiRiBox,this,this.meiRiBoxHandler),this.onAutoClick(this.VipZeKouBox,this,this.VipZeKouBoxHandler),this.onAutoClick(this.btn1,this,this.btn1Handler),this.onAutoGlobalEvt("VIP_UPDATE",this,this.updateShow),this.onAutoGlobalEvt("VIP_GET_REWARD",this,this.updatePage),this.onAutoGlobalEvt("VIP_UPDATE",this,this.showMeiRiBox),this.onAutoGlobalEvt("VIP_UPDATE",this,this.setVipBtn)},r.prototype.setVipBtn=function(){this.btn1.selected=1===c.VipModel.instance.isShowVip},r.prototype.btn1Handler=function(){t.chat.ChatCtrl.instance.setVipChatShow(this.btn1.selected?0:1),this.btn1.selected=!this.btn1.selected},r.prototype.meiRiBoxHandler=function(){WindowManager.instance.open(273)},r.prototype.VipZeKouBoxHandler=function(){WindowManager.instance.open(130)},r.prototype.showMeiRiBox=function(){this.meiRiBoxRpImg.visible=!c.VipModel.instance.dayRewardState&&0<c.VipModel.instance.vipLevel,this.receiveImg.visible=c.VipModel.instance.dayRewardState},r.prototype.updatePage=function(){this._showVip=c.VipModel.instance.getCanGetAward(),this.refreshShow()},r.prototype.updateShow=function(){this.levelUpdate(),this.updateState()},r.prototype.levelUpdate=function(){var t=c.VipModel.instance.vipLevel,e=c.VipModel.instance.haveNum,i=c.VipModel.instance.needNum;if(this.levelNum.value=t.toString(),t==c.VipModel.instance.maxVipLevel)this.showTxt.visible=this.differNum.visible=this.rmbName.visible=this.turnTo.visible=this.vipName.visible=this.upLevel.visible=!1,this.progressShow.text=""+e,this.progressUp.width=this._progressWidth,this.maxBox.visible=!0;else{this.showTxt.visible=this.differNum.visible=this.rmbName.visible=this.turnTo.visible=this.vipName.visible=this.upLevel.visible=!0,this.progressShow.text=e+"/"+i,this.progressUp.width=Math.floor(e/i*this._progressWidth);var n=(i-e).toString();this.differNum.value=n,this.setTopNoticePos(n.length);var s=t+1;this.upLevel.value=s.toString(),this.maxBox.visible=!1}},r.prototype.setTopNoticePos=function(t){var e=254+24*t;this.rmbName.x=e,this.turnTo.x=50+e,this.vipName.x=150+e,this.upLevel.x=230+e},r.prototype.updateBtnShow=function(){this._showVip==c.VipModel.instance.maxVipLevel?(this.rightBtn.visible=!1,this.leftBtn.visible=!0):(1==this._showVip?this.leftBtn.visible=!1:this.leftBtn.visible=!0,this.rightBtn.visible=!0)},r.prototype.refreshShow=function(){this.updateBtnShow();var t=c.VipModel.instance.getVipCfgByLevel(this._showVip);if(t){this.levelGiftName.skin="assets/icon/ui/privilege/"+t[7]+".png",this.levelGiftShow.value=""+this._showVip;var e=t[9],i=e.toString();0==e?this.levelGiftPower.visible=this.levelGiftPowerNum.visible=this.powerEnd.visible=!1:(this.levelGiftPowerNum.align="left",this.levelGiftPower.visible=this.levelGiftPowerNum.visible=!0,this.levelGiftPowerNum.value=i,this.powerEnd.visible=!1),this.levelPowerShow.value=""+this._showVip;var n=t[5],s=n.length;s%2==0?(this._initIsOdd=!1,this.setIncreasePos(),2==s&&this.setPowerShow(0,n)):(this._initIsOdd=!0,this.setIncreasePos(),1==s?this.setPowerShow(1,n):3==s&&this.setPowerShow(0,n));var o=t[4],a=.5*o.length;a%2==0?(this._isOdd=!1,this.setPos(),4==a?this.setRewardShow(0,o):2==a&&this.setRewardShow(1,o)):(this._isOdd=!0,this.setPos(),5==a?this.setRewardShow(0,o):3==a?this.setRewardShow(1,o):1==a&&this.setRewardShow(2,o)),this.updateState();var r=t[11],l=t[8],h=t[12];1==t[13]?(this.prizeEffect.visible=!0,this.prizeEffect.play()):(this.prizeEffect.visible=!1,this.prizeEffect.stop()),this.observationItem.setRot(),this.rewardShowItem.showRewardObj(l,r,h),this.observationItem.data=[[this.rewardShowItem._modelClip,Math.round(l/1e3)]],this._showVip<c.VipModel.instance.getPrivilegeRange()?this.rightBtn.gray=!1:this._showVip==c.VipModel.instance.getPrivilegeRange()&&(this._showVip!=c.VipModel.instance.maxVipLevel&&p.instance.addNotice("提升vip等级可查看更多特权信息",!0),this.rightBtn.gray=!0)}},r.prototype.setPowerShow=function(t,e){for(var i=e.length+t,n=0,s=t;s<i;s++)this._increaseShow[s][1].text=e[n],this._increaseShow[s][0].visible=this._increaseShow[s][1].visible=!0,n++},r.prototype.setRewardShow=function(t,e){for(var i=.5*e.length+t,n=0,s=t;s<i;s++){var o=[e[2*n],e[2*n+1],0,null];this._showAward[s].dataSource=o,this._showAward[s].visible=!0,n++}},r.prototype.updateState=function(){this._state=c.VipModel.instance.checkCanReceive(this._showVip),0==this._state?(this.receiveBtn.visible=!1,s.thisStop(this._btnClip),this.hasRecive.visible=!1,this.goBottomBtn.visible=!0):(1==this._state?(this.receiveBtn.visible=!0,s.thisPlay(this._btnClip),this.hasRecive.visible=!1):(this.receiveBtn.visible=!1,s.thisStop(this._btnClip),this.hasRecive.visible=!0),this.goBottomBtn.visible=!1)},r.prototype.leftBtnHandler=function(){1!=this._showVip&&(this._showVip--,this.refreshShow())},r.prototype.rightBtnHandler=function(){this._showVip!=c.VipModel.instance.getPrivilegeRange()&&(this._showVip++,this.refreshShow())},r.prototype.goBtnHandler=function(){WindowManager.instance.open(111)},r.prototype.reciveBtnHandler=function(){var t=c.VipModel.instance.getVipCfgByLevel(this._showVip);if(t){var e=t[4],i=[];if(e){for(var n=0,s=.5*e.length;n<s;n++)i.push([e[2*n],e[2*n+1],0,null]);o.canAddItemsByBagIdCount(i)&&c.VipCtrl.instance.getVipReward(this._showVip)}}},r.prototype.allLineHandler=function(){WindowManager.instance.openDialog(105,this._showVip)},a=r,c.VipPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.vip||(t.vip={}),n=ui.VipAlertUI,s=t.common.SimpleList,i=n,__extends(a,i),a.prototype.destroy=function(){this.destroyElement(this._list),i.prototype.destroy.call(this)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create(e.VipPowerItem,500,25,1,1,15),this._list.width=454,this._list.height=415,this.showPanel.addChild(this._list),this._list.pos(21,6,!0)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.leftBtn,this,this.leftBtnHandler),this.onAutoClick(this.rightBtn,this,this.rightBtnHandler)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._showVip=t,this.refreshShow()},a.prototype.refreshShow=function(){this.updateBtnShow(),this.title.text="SVIP"+this._showVip+"特权";var t=e.VipModel.instance.getVipCfgByLevel(this._showVip);this._list.datas=t[6]},a.prototype.updateBtnShow=function(){this._showVip==e.VipModel.instance.maxVipLevel?(this.rightBtn.visible=!1,this.leftBtn.visible=!0):(1==this._showVip?this.leftBtn.visible=!1:this.leftBtn.visible=!0,this.rightBtn.visible=!0)},a.prototype.leftBtnHandler=function(){1!=this._showVip&&(this._showVip--,this.refreshShow())},a.prototype.rightBtnHandler=function(){this._showVip!=e.VipModel.instance.maxVipLevel&&(this._showVip++,this.refreshShow())},o=a,e.VipAlert=o}(modules=modules||{}),function(n){var h,s,g,y,c,t,e,i,o,a;function r(){return null!==s&&s.apply(this,arguments)||this}h=n.bag||(n.bag={}),g=laya.events.Event,y=laya.ui.Image,c=n.config.ItemSmeltCfg,t=utils.tween.TweenGroup,e=n.common.CustomClip,i=n.common.ProgressBarCtrl,o=n.common.CommonUtil,s=ui.SmeltViewUI,__extends(r,s),r.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.bottom=0,this._smeltClip=new Array,this._showNum=20,this._smeltLevel=-1,this._forwardWid=-1,this._hasClick=!1,this._onePage=!1,this._btnEff=o.creatEff(this.smeltBtn,"btn_light",15),this._btnEff.pos(-5,-10),this._btnEff.play(),this._smeltId=new Array,this._progressbarWidth=482,this._effectNum=0,this._effectStop=!0,this._effectPlayNum=0,this._smeltProCtrl=new i(this.progressBar,this._progressbarWidth,this.progressTxt),this.regGuideSpr(37,this.smeltBtn),this._tweenGroup=new t,this._effectCache=[],this._runingQueue=[],this.smeltTip.style.valign="middle",this.smeltTip.style.leading=10,this.smeltTip.innerHTML="<span style='color:#4c5e8a;font-family:SimHei;font-size:22px;'>已自动为您选择</span><span style='color:#b15315;font-family:SimHei;font-size:22px;'>1星及以下</span><span style='color:#4c5e8a;font-family:SimHei;font-size:22px;'>的</span><span style='color:#b15315;font-family:SimHei;font-size:22px;'>低评分</span><span style='color:#4c5e8a;font-family:SimHei;font-size:22px;'>装备，请放心熔炼。</span><br/><span style='color:#4c5e8a;font-family:SimHei;font-size:22px;'>2星及以上装备较为珍贵，请前往</span><span style='color:#b15315;font-family:SimHei;font-size:22px;'>【锻造】</span><span style='color:#4c5e8a;font-family:SimHei;font-size:22px;'>--</span><span style='color:#b15315;font-family:SimHei;font-size:22px;'>【打造】</span><span style='color:#4c5e8a;font-family:SimHei;font-size:22px;'>--</span><span style='color:#b15315;font-family:SimHei;font-size:22px;'>【装备分解】</span><span style='color:#4c5e8a;font-family:SimHei;font-size:22px;'>进行分解。</span>"},r.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.smeltBtn,this,this.smeltHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateHandler),this.onAutoGlobalEvt("SMELT_UPDATE",this,this.smeltSuccess),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.getSmeltList),this.onAutoGlobalEvt("SMELT_SUCCEED",this,this.starEffect),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.updateAuto),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.onAutoClick(this,this,this.hideSelectList),this.regAutoRP(this._btnEff,["smeltRP"])},r.prototype.onOpened=function(){s.prototype.onOpened.call(this),this._btnEff.play(),h.BagCtrl.instance.getSmeltInfo(),h.BagModel.instance.oneKeySmelt=!1,this.addSmeltGridBgs(),this.updateSmeltShow(),this.selectSmeltEquips(),this.updateAuto(),PlatParams.isCloseRecharge&&(this.autoTxt.visible=!1)},r.prototype.updatePlatChangeRecharge=function(){this.autoTxt.visible=!PlatParams.isCloseRecharge},r.prototype.updateAuto=function(){1==n.zhizun.ZhizunModel.instance.state?(this.autoTxt.underline=!1,this.autoTxt.off("click",this,this.autoTxtHandler),this.autoTxt.text="已开启自动熔炼"):(this.autoTxt.underline=!0,this.onAutoClick(this.autoTxt,this,this.autoTxtHandler),this.autoTxt.text="开启自动熔炼"),PlatParams.isCloseRecharge&&(this.autoTxt.visible=!1)},r.prototype.autoTxtHandler=function(){WindowManager.instance.open(351)},r.prototype.hideSelectList=function(){this._smeltGridBgsAdded&&(this.colorSelectPanel.isOpen&&this.colorSelectPanel.openHandler(null),this.stageSelectPanel.isOpen&&this.stageSelectPanel.openHandler(null),this.starSelectPanel.isOpen&&this.starSelectPanel.openHandler(null))},r.prototype.addSmeltGridBgs=function(){if(!this._smeltGridBgsAdded){this._smeltGridBgsAdded=!0,this._showItem=new Array;for(var t=0;t<this._showNum;t++)this._showItem[t]=new h.BaseItem,this._showItem[t].needTip=!1,this.addChild(this._showItem[t]),this._showItem[t].pos(t%5*120+31+39,133*(t/5>>0)+79+108,!0),this._showItem[t].dataSource=null,this._smeltClip[t]=this._smeltClip[t]||e.create("assets/effect/smelt_effect.atlas","smelt_effect",4,!1),this._smeltClip[t].setProperty(this._showItem[t],-49,-47);this.addChild(this.colorSelectPanel),this.addChild(this.stageSelectPanel),this.addChild(this.starSelectPanel),this.colorSelectPanel.initData1("color"),this.stageSelectPanel.initData1("stage"),this.starSelectPanel.initData1("star")}this.getSmeltList()},r.prototype.getSmeltList=function(){h.BagModel.instance.setSmeltRank(),this.selectSmeltEquips()},r.prototype.smeltSuccess=function(){this.updateSmeltShow(),this._effectNum=0,this._effectPlayNum=0},r.prototype.updateSmeltShow=function(){var t=this,e=h.BagModel.instance.smeltLevel,i=h.BagModel.instance.smeltExp,n=c.instance.getItemCfgByLevel(e),s=c.instance.getItemCfgByLevel(e+1),o=n?n[1]:0;if(n&&(this.levelTxt.text="熔炉等级 "+e+"级",this.powerNum.value=""+n[2],this.attrTxt1.text=""+n[4],this.attrTxt2.text=""+n[3]),s){var a=s[4]-n[4],r=s[3]-n[3];this.attrIncreaseTxt1.text=""+a,this.attrIncreaseTxt2.text=""+r}var l=this._forwardWid;this._forwardWid=Math.floor(i/o*this._progressbarWidth),-1!=this._smeltLevel?e>this._smeltLevel?TweenJS.create(this._smeltProCtrl,this._tweenGroup).to({value:o},(this._progressbarWidth-l)/this._progressbarWidth*500).onComplete(function(){t._smeltProCtrl.value=0,t._smeltProCtrl.maxValue=o,0<t._forwardWid&&TweenJS.create(t._smeltProCtrl,t._tweenGroup).to({value:i},Math.floor(i/o*500)).start()}).start():s?TweenJS.create(this._smeltProCtrl,this._tweenGroup).to({value:i},Math.floor(i/o*500)).start():(this._smeltProCtrl.maxValue=i,this._smeltProCtrl.value=i):(this._smeltProCtrl.maxValue=s?o:i,this._smeltProCtrl.value=i),this._smeltLevel=e},r.prototype.selectSmeltEquips=function(){if(this._effectStop){var t=h.BagModel.instance.getSmeltRank();if(this._smeltId=[],t){var e;t.length>this._showNum?(h.BagModel.instance.oneKeySmelt=!0,this._onePage=!1,e=this._showNum):(e=t.length,this._onePage=!0);for(var i=0;i<e;i++)this._showItem[i].dataSource=t[i],this._smeltId[i]=t[i][2];if(this._onePage)for(n=e;n<this._showNum;n++)this._showItem[n].dataSource=null;GlobalData.dispatcher.event("SELECT_SMELT_UPDATE")}else for(var n=0;n<this._showNum;n++)this._showItem[n].dataSource=null}},r.prototype.smeltHandler=function(){for(var t=0,e=this._tweenGroup.getAll().length;t<e;t++)if(this._tweenGroup.getAll()[t].isPlaying)return void o.noticeError(18001);this.oneKeySmelt(),this._onePage||(this._hasClick=!0)},r.prototype.loopHander=function(){this._onePage&&(this._hasClick=!1,h.BagModel.instance.oneKeySmelt=!1),this.oneKeySmelt()},r.prototype.oneKeySmelt=function(){0!=this._smeltId.length?(h.BagCtrl.instance.oneKeySmelt(this._smeltId),this._effectStop=!1):o.noticeError(18002)},r.prototype.starEffect=function(){for(var d=this,m=!1,t=5*this._effectPlayNum+5,e=function(t){if(!f._smeltId[t])return{value:void 0};f._smeltClip[t].play(),f._smeltClip[t].visible=!0,m||(f._smeltClip[t].on(g.COMPLETE,f,f.effectHandler),m=!0);var e=f._effectCache.length?f._effectCache.pop():new y("bag/zs_hecheng_2.png");function i(){e.removeSelf(),ArrayUtils.remove(d._runingQueue,e),d._effectCache.push(e)}f.addChild(e),e.anchorX=e.anchorY=.5,e.pos(f._showItem[t].x+55,f._showItem[t].y+55,!0),e.alpha=1,f._runingQueue.push(e);var n=e.x,s=e.y,o=97.2+.7*n,a=255.6+.7*s,r=(n-324)/(852-s),l=Math.atan(r),h=Math.random()+.5,c=Math.random()<.5?1:-1,p=o+100*Math.sin(l)*h*c,u=a+100*Math.cos(l)*h*c;TweenJS.create(e,f._tweenGroup).to({x:p,y:u},300).chain(TweenJS.create(e,f._tweenGroup).to({x:324,y:852,alpha:.3},400+400*Math.random()).onComplete(i).onStop(i)).start(),f._showItem[t].dataSource=null},f=this,i=5*this._effectPlayNum;i<t;i++){var n=e(i);if("object"==typeof n)return n.value}this._smeltId[t]&&(this._effectPlayNum++,Laya.timer.once(200,this,this.starEffect))},r.prototype.effectHandler=function(){for(var t=5*this._effectNum;t<5*this._effectNum+5;t++)this._smeltClip[t]&&(this._smeltClip[t].visible=!1,this._smeltClip[t].off(g.COMPLETE,this,this.effectHandler));this._effectNum++,this._effectStop||this._smeltId[5*this._effectNum]||(this._effectStop=!0),this._effectStop&&(this.selectSmeltEquips(),this._hasClick?this.loopHander():h.BagModel.instance.showGetAlert())},r.prototype.hideAllEffect=function(){if(this._smeltClip&&0<this._smeltClip.length)for(var t=0;t<this._showNum;t++)this._smeltClip[t].visible=!1},r.prototype.close=function(){s.prototype.close.call(this),Laya.timer.clear(this,this.starEffect),this._tweenGroup&&this._tweenGroup.removeAll();for(var t=0,e=this._runingQueue;t<e.length;t++){var i=e[t];i.removeSelf(),this._effectCache.push(i)}this._onePage=!0,this._effectStop=!0,this.hideAllEffect(),Laya.timer.clear(this,this.starEffect),this._hasClick=!1,h.BagModel.instance.oneKeySmelt=!1,n.bag.BagCtrl.instance.showSmelt_upgrade_alert(2)},r.prototype.updateHandler=function(t){1==t&&this.selectSmeltEquips()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._effectCache=this.destroyElement(this._effectCache),this._runingQueue=this.destroyElement(this._runingQueue),this._tweenGroup=this.destroyElement(this._tweenGroup),this._btnEff=this.destroyElement(this._btnEff),this._showItem=this.destroyElement(this._showItem),this._smeltClip=this.destroyElement(this._smeltClip),this.colorSelectPanel=this.destroyElement(this.colorSelectPanel),this.stageSelectPanel=this.destroyElement(this.stageSelectPanel),this.starSelectPanel=this.destroyElement(this.starSelectPanel),s.prototype.destroy.call(this,t)},a=r,h.SmeltPanel=a}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}i=t.bag||(t.bag={}),n=ui.SmeltUpgradeAlertUI,s=t.config.ItemSmeltCfg,e=n,__extends(a,e),a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SMELT_UPDATE",this,this.updateSmeltShow)},a.prototype.updateSmeltShow=function(){var t=i.BagModel.instance.smeltLevel,e=s.instance.getItemCfgByLevel(t);e&&(this.gradeText.text="熔炉等级  "+t+"级",this.valueText1.text=""+e[4],this.valueText2.text=""+e[3],this.valueText1.visible=this.valueText2.visible=!0,this.nameText1.visible=this.nameText2.visible=!0)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateSmeltShow(),this.zOrder=1},o=a,i.SmeltUpgradeAlert=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.bag||(t.bag={}),n=t.common.CustomList,i=ui.BoxAwardAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.spaceY=10,this._list.spaceX=10,this._list.height=300,this._list.width=650,this._list.hCount=6,this._list.itemRender=e.BaseItem,this._list.scale(.8,.8),this._list.x=71,this._list.y=134,this.addChild(this._list)},o.prototype.setOpenParam=function(t){t&&(this._list.datas=t[0],1<t.length&&(this.titleTxt.text=t[1]))},o.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this)},s=o,e.BoxAwardAlert=s}(modules=modules||{}),function(t){var e,i;function n(){this.blendIds=[10901,10951,99402,99501],this.ids=[1,2,140,150],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._onSaleArr=new Array,this.arrts=GlobalData.getConfig("recharge");for(var t=0,e=this.arrts.length;t<e;t++){var i=this.arrts[t];0===(this._table[i[0]]=i)[8]&&this._onSaleArr.push(i)}this._onSaleArr.sort(this.sortFunc)},n.prototype.sortFunc=function(t,e){return t[9][0]==e[9][0]?t[9][1]-e[9][1]:t[9][0]-e[9][0]},n.prototype.getRecharCfgByIndex=function(t){return this._table[t]},Object.defineProperty(n.prototype,"onSaleArr",{get:function(){return this._onSaleArr},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"onSaleArrEx",{get:function(){for(var t=[],e=0,i=this.ids.length;e<i;e++)t.push(this._table[this.ids[e]]);return t},enumerable:!0,configurable:!0}),i=n,e.RechargeCfg=i}(modules=modules||{}),function(o){var a,e,t,r,i,n,l,h,s,c,p,u;function d(){return null!==e&&e.apply(this,arguments)||this}a=o.recharge||(o.recharge={}),t=o.common.CustomList,r=o.vip.VipModel,i=o.vip_new.VipNewModel,n=o.common.ProgressBarCtrl,l=o.config.RechargeCfg,h=o.config.PrivilegeCfg,s=o.zxian_yu.ZXianYuModel,c=o.config.BlendCfg,p=o.common.CommonUtil,e=ui.RechargeViewUI,__extends(d,e),d.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.maxNum=0,this.blendMaxNum=0,this._type=a.RechargeModel.instance.type,this.updateView(),this.initPanel(),this.updateRechargePanel(),this.setTipTxt()},d.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,p.setHTMLPro(this.tipHtml,"#ffffff","SimHei",22,"center"),p.setHTMLPro(this.tip1Html,"#50ff28","SimHei",21,"center"),this._array=new Array,this._vipSort=new Array,this._listData=new Array,this._list=new t,this._list.scrollDir=1,this._list.width=640,this._list.height=768,this._list.hCount=2,this._list.vCount=1,this._list.spaceY=10,this._list.spaceX=5,this._list.pos(49,275),this._list.itemRender=a.RechargeItem,this.addChild(this._list),this.maxNum=0,this.blendMaxNum=0,this._progressBar=new n(this.proImg,this.proImg.width,this.vipExpTxt),"9130qq"===PlatParams.platform||"local"===PlatParams.platform?(this._list.height=708,this.list_bg.height=740,this.bottomTipBox.y=1021,this.qqBox.visible=!0):(this._list.height=768,this.list_bg.height=800,this.bottomTipBox.y=1111,this.qqBox.visible=!1)},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.closeBtn,this,this.close),this.onAutoClick(this.vipBtn,this,p.gotoVIP),this.onAutoClick(this.openBlueBtn,this,this.openBlueHandler),this.onAutoGlobalEvt("UPDATE_RECHARGE_INFO",this,this.upateRecharge),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.setTipTxt),this.onAutoGlobalEvt("VIPF_UPDATE",this,this.updateView)},d.prototype.upateRecharge=function(){this.initPanel(),this.updateRechargePanel()},d.prototype.updateRechargePanel=function(){this.listData(this._listData,this._type),this._list.datas=this._listData,this.showXianYuCount()},d.prototype.updateView=function(){var t=r.instance.vipLevel,e=s.instance._everydayMaxLimit;this.blendMaxNum=e[e.length-1];for(var i=e.length-1;0<i;i-=2)if(t>=e[i-1]){this.maxNum=e[i];break}this.showXianYuCount()},d.prototype.showXianYuCount=function(){var t=s.instance.xianyuLimit;t>=this.maxNum?(this.curCount.color="#ffec7c",t=this.maxNum):this.curCount.color="#50ff28",this.maxNum,this.blendMaxNum,this.tip1.visible=!1,this.tip1.visible?(this.tip1.visible=!1,this.tipTxt.x=(this.width-this.tipTxt.width-this.curCount.width-this.tip1.width)/2,this.curCount.x=this.tipTxt.x+this.tipTxt.width,this.tip1.x=this.curCount.x+this.curCount.width):(this.tipTxt.x=(this.width-this.tipTxt.width-this.curCount.width)/2,this.curCount.x=this.tipTxt.x+this.tipTxt.width),this.curCount.text=t+"/"+this.maxNum+" ",this.tip1.visible=this.tipTxt.visible=this.curCount.visible=!1,this.tip1Html.innerHTML="<span style='color:#50ff28'>购买元宝赠送的仙玉</span><span style='color:#ffffff'>每日有上限，今日已获得</span><span style='color:#50ff28'>"+t+"/"+this.maxNum+"</span>"},d.prototype.initPanel=function(){if(1<=r.instance.vipLevel)r.instance.vipLevel<h.instance.getVipMaxLevel()?(this._progressBar.maxValue=r.instance.needNum,this.tipBox.visible=!0,this.txtImg.visible=!0,this.needMoneyTxt.text=r.instance.needNum-r.instance.haveNum+"元",this.nextVipLvTxt.text="SVIP"+(r.instance.vipLevel+1),this.needMoneyTxt.width=this.needMoneyTxt.textWidth,this.nextVipLvTxt.width=this.nextVipLvTxt.textWidth,o.common.CommonUtil.chainArr([this.tipTxt_0,this.needMoneyTxt,this.tipTxt_1,this.nextVipLvTxt])):(this.tipBox.visible=!1,this._progressBar.maxValue=r.instance.haveNum),this._progressBar.value=r.instance.haveNum,this.vipBg.skin="recharge/image_svip_dt.png",this.vipBg.pos(45,139),this.vipLevel.value=r.instance.vipLevel.toString();else{if(i.instance.vipLevel<h.instance.getVipFMaxLevel()){this._progressBar.maxValue=i.instance.needNum,this.tipBox.visible=!0,this.txtImg.visible=!0,this.needMoneyTxt.text=i.instance.needNum-i.instance.haveNum+"元";var t=i.instance.vipLevel+1;t=t>i.instance.maxVipLevel?i.instance.maxVipLevel-50:t-50,this.nextVipLvTxt.text="VIP"+t,this.needMoneyTxt.width=this.needMoneyTxt.textWidth,this.nextVipLvTxt.width=this.nextVipLvTxt.textWidth,o.common.CommonUtil.chainArr([this.tipTxt_0,this.needMoneyTxt,this.tipTxt_1,this.nextVipLvTxt])}else this.tipBox.visible=!1,this._progressBar.maxValue=i.instance.haveNum;this._progressBar.value=i.instance.haveNum,this.vipBg.skin="recharge/image_vip_dt.png",this.vipBg.pos(46,132),this.vipLevel.value=i.instance.getVipLevelTrue().toString()}this._array.length=0,this._vipSort.length=0,this._listData.length=0,this.getType(this._array,this._vipSort)},d.prototype.getType=function(t,e){for(var i=l.instance.onSaleArrEx,n=0;n<i.length;n++)t.push(i[n][0]);for(var s=0,o=h.instance.getCfgByType(r.instance.vipLevel)[10].length;s<o;s++)e.push(h.instance.getCfgByType(r.instance.vipLevel)[10][s])},d.prototype.getState=function(t){var e=-1,i=1;if(1===t){if(0===o.monthCard.MonthCardModel.instance.flag)return 1;i=1,e=o.monthCard.MonthCardModel.instance.MonthCardInfoReply[2]}else if(2===t){if(0===o.zhizun.ZhizunModel.instance.state)return 1;i=1,e=o.zhizun.ZhizunModel.instance.restDay}else if(140===t){if(!o.weekCard.WeekCardModel.instance.isVip)return 1;i=2,e=o.weekCard.WeekCardModel.instance.vipEndTimeStamp}else if(150===t){if(!o.halo.HaloModel.instance.isHalo())return 1;i=2,e=o.halo.HaloModel.instance.endTime}var n=l.instance.ids.indexOf(t),s=c.instance.getCfgById(l.instance.blendIds[n])[1][0];return 1===i?0<e-s?3:2:0<e-GlobalData.serverTime-864e5*s?3:2},d.prototype.getBegimTm=function(t){return 1===t?o.monthCard.MonthCardModel.instance.MonthCardInfoReply[4]:2===t?o.zhizun.ZhizunModel.instance.startTime:140===t?o.weekCard.WeekCardModel.instance.weekStatTime:150===t?o.halo.HaloModel.instance.startTime:void 0},d.prototype.compare=function(t,e){var i=this.getState(t),n=this.getState(e),s=i-n;if(0===s){if(3===i||2===n)return 0<this.getBegimTm(e)-this.getBegimTm(t)?e:t;var o=l.instance.getRecharCfgByIndex(t);s=l.instance.getRecharCfgByIndex(e)[9][0]-o[9][0]}return 0<s?e:t},d.prototype.listData=function(t,e){t.length=0;var i=this.compare(1,140);t.push([i,a.RechargeModel.instance.getRechargeCountByIndex(i)]);var n=this.compare(2,150);t.push([n,a.RechargeModel.instance.getRechargeCountByIndex(n)]);for(var s=0;s<this._vipSort.length;s++){var o=a.RechargeModel.instance.getRechargeCountByIndex(this._vipSort[s]);t.push([this._vipSort[s],o||0])}},d.prototype.setTipTxt=function(){var t=o.festival.FestivalModel.instance.isXIanYu();if(t[0]||t[3]){var e="";t[0]?e=c.instance.getCfgById(67012)[2][0]:t[3]&&(e=c.instance.getCfgById(67023)[2][0]),this.tipHtml.innerHTML=e,this.tipHtml.visible=!0,this.tipTxt.visible=!1,this.curCount.visible=!1,this.tip1Html.visible=!1,this.tip1.visible=!1}else this.tipHtml.visible=!1,this.tipTxt.visible=!1,this.curCount.visible=!1,this.tip1Html.visible=!0,this.tip1.visible=!1,this.showXianYuCount()},d.prototype.openBlueHandler=function(){o.qq.QQCtrl.instance.openVip()},u=d,a.RechargePanel=u}(modules=modules||{}),function(p){!function(a){var e,s=p.config.EffectCfg,o=p.config.SkillCfg,r=p.config.SkillPureCfg,t=p.common.SimpleList,i=(e=ui.BuffAlertUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.left=180,this.top=140,this.mouseThrough=!1,this.mouseEnabled=!0,this.height=172,this.bgImg.height=172,this._list=t.create(h,435,80),this._list.pos(this.bgImg.x,this.bgImg.y),this._list.size(this.bgImg.width,this.bgImg.height),this.addChild(this._list)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_BUFF_LIST",this,this.updateBuffList),this.onAutoGlobalEvt("UPDATE_HALO_LIST",this,this.updateBuffList),this.onAutoGlobalEvt("SCENE_ENTER",this,this.updateBuffList),this.onAutoEvt(Laya.stage,"mousedown",this,this.stageClickHandler)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateBuffList()},n.prototype.stageClickHandler=function(t){this.contains(t.target)||this.close()},n.prototype.updateBuffList=function(){for(var t=a.BuffModel.instance.buffs||[],e=p.baby.BabyModel.instance.halos||[],i=[],n=0,s=t.length;n<s;n++)i.push([1,t[n]]);if(55!=p.scene.SceneUtil.currScene)for(n=0,s=e.length;n<s;n++)i.push([2,e[n]]);var o=8<i.length?652:i.length<2?172:80*i.length+12;this._list.height=this.bgImg.height=this.height=o,this._list.datas=i},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},n);function n(){return e.call(this)||this}a.BuffAlert=i;var l,h=(l=ui.BuffItemUI,__extends(c,l),c.prototype.onEvt=function(){l.prototype.onEvt.call(this),Laya.timer.loop(1e3,this,this.loopHandler)},c.prototype.offEvt=function(){l.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},c.prototype.loopHandler=function(){1==this.data[0]&&this.setTime(this.timeTxt,this.data[1][4]-GlobalData.serverTime)},c.prototype.setTime=function(t,e){3600<=(e=Math.floor(.001*e))?t.text=e%3600==0?e/3600+"小时":(e/3600).toFixed(1)+"小时":60<=e?t.text=e%60==0?e/60+"分钟":Math.floor(e/60)+"分钟"+e%60+"秒":0<=e?t.text=e+"秒":e<0&&(t.text="0秒")},c.prototype.setData=function(t){switch(l.prototype.setData.call(this,t),this.line.visible=0!=this.index,t[0]){case 1:var e=s.instance.getCfgById(t[1][1]);this.iconBg.skin="buff/iconbg_buff.png",this.iconBg.pos(13,13,!0),this.iconBg.scale(1,1),this.icon.skin="assets/icon/buff/"+e[4]+".png",this.icon.pos(this.iconBg.x+3,this.iconBg.y+3,!0),this.icon.scale(1,1),this.nameTxt.text=e[1],this.nameTxt.pos(this.iconBg.x+64,this.iconBg.y+2,!0),this.timeTxt.pos(this.iconBg.x+300,this.iconBg.y+2,!0),this.descTxt.pos(this.iconBg.x+64,this.iconBg.y+33,!0),this.descTxt.text=e[3],this.loopHandler();break;case 2:var i=r.instance.getCfgById(t[1][0]),n=o.instance.getCfgById(1e4*t[1][0]+t[1][1]);this.iconBg.skin="common/image_common_iconbg_s.png",this.iconBg.pos(13,13,!0),this.iconBg.scale(.6,.6),this.icon.skin="assets/icon/skill/"+i[6]+".png",this.icon.pos(this.iconBg.x+5,this.iconBg.y+5,!0),this.icon.scale(.6,.6),this.nameTxt.text=i[1],this.nameTxt.pos(this.iconBg.x+64,this.iconBg.y+2,!0),this.timeTxt.text="",this.descTxt.pos(this.iconBg.x+64,this.iconBg.y+33,!0),this.descTxt.text=i?CommonUtil.stringFormat(i[5],n[2]):n[2]}},c);function c(){return null!==l&&l.apply(this,arguments)||this}a.BuffItem=h}(p.buff||(p.buff={}))}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab=[{},{}];for(var t=GlobalData.getConfig("xiangyao"),e=0,i=t.length;e<i;e++){var n=this._tab[t[e][0]][t[e][1]];null==n&&(n={}),n[t[e][2]]=t[e],this._tab[t[e][0]][t[e][1]]=n}},n.prototype.getBossCfgByEraLvAndGrade=function(t,e){return null==this._tab[1][t]?this.getBossCfgByEraLvAndGrade(--t,e):this._tab[1][t][e]},n.prototype.getLittleCfgByEraLvAndGrade=function(t,e){return null==this._tab[0][t]?this.getLittleCfgByEraLvAndGrade(--t,e):this._tab[0][t][e]},i=n,e.DailyDemonCfg=i}(modules=modules||{}),function(s){var h,o,i,a,r,l,c,t,e;function n(){return null!==o&&o.apply(this,arguments)||this}h=s.dailyDemon||(s.dailyDemon={}),i=s.common.CustomClip,a=s.config.BlendCfg,r=s.bag.BaseItem,l=s.common.ProgressBarCtrl,c=s.config.DailyDemonCfg,t=s.common.CommonUtil,o=ui.DailyDemonViewUI,__extends(n,o),n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._btnBossClip=this.destroyElement(this._btnBossClip),this._commonAwardItems=this.destroyElement(this._commonAwardItems),this._bossAwardItems=this.destroyElement(this._bossAwardItems),this._commonBar=this.destroyElement(this._commonBar),this._bossBar=this.destroyElement(this._bossBar),this._fitTxtArr=this.destroyElement(this._fitTxtArr),this._bossFitTxtArr=this.destroyElement(this._bossFitTxtArr),this._tipsArr=this.destroyElement(this._tipsArr),this._tipsBossArr=this.destroyElement(this._tipsBossArr),this._killNumTxtArr=this.destroyElement(this._killNumTxtArr),this._killBossNumTxtArr=this.destroyElement(this._killBossNumTxtArr),o.prototype.destroy.call(this,t)},n.prototype.initialize=function(){o.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._widthSpace=35,this._commonAwardItems=new Array,this._bossAwardItems=new Array;for(var t=0;t<5;t++){var e=new r;e.nameVisible=!0,e.y=312,this._commonAwardItems.push(e),this.addChild(e),(e=new r).nameVisible=!0,e.y=838,this._bossAwardItems.push(e),this.addChild(e)}this._commonBar=new l(this.progressImg,this.progressImg.width,this.progressTxt),this._bossBar=new l(this.bossProgressImg,this.bossProgressImg.width,this.bossProgressTxt),this._fitTxtArr=[this.decTxt_0,this.decTxt_1,this.killNumberTxt,this.decTxt_2],this._bossFitTxtArr=[this.bossDecTxt_0,this.killBossNumTxt,this.bossDecTxt_1,this.bossDecTxt_2,this.bossDecTxt_3],this._tipsArr=[this.getDecTxt0,this.levelTxt,this.getDecTxt1,this.getDecTxt2,this.getDecTxt3],this._tipsBossArr=[this.getBossDecTxt0,this.bossLevelTxt,this.getBossDecTxt1,this.getBossDecTxt2,this.getBossDecTxt3],this._killNumTxtArr=[this.getDecTxt,this.getTimesTxt],this._killBossNumTxtArr=[this.getBossDecTxt,this.getBossTimesTxt],this._maxKillNum=[],this._maxKillNumValue=[];for(var i=a.instance.getCfgById(25001)[1],n=(t=0,i.length);t<n;t++)t%2==0?this._maxKillNum.push(i[t]):this._maxKillNumValue.push(i[t]);for(this._maxBossKillNum=[],this._maxBossKillNumValue=[],t=0,n=(i=a.instance.getCfgById(25002)[1]).length;t<n;t++)t%2==0?this._maxBossKillNum.push(i[t]):this._maxBossKillNumValue.push(i[t]);this._btnClip=this.creatEffect(this.getBtn),this._btnBossClip=this.creatEffect(this.getBossBtn),this.regGuideSpr(72,this.getBtn),this.regGuideSpr(73,this.getBossBtn)},n.prototype.creatEffect=function(t){var e=i.create("assets/effect/btn_light.atlas","btn_light",16);return e.setProperty(t,-5,-10),e},n.prototype.onOpened=function(){o.prototype.onOpened.call(this),Channel.instance.publish(2100052,null),this._btnClip.play(),this._btnBossClip.play(),this.updatePanel()},n.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getRewords),this.onAutoClick(this.getBossBtn,this,this.getBossRewords),this.onAutoClick(this.dailyRulerBtn,this,this.openDailyRuler),this.onAutoClick(this.bossRulerBtn,this,this.openBossRuler),this.onAutoGlobalEvt("DAILY_DEMON_UPDATE",this,this.updatePanel),this.onAutoGlobalEvt("PLAYER_BORN_LEV",this,this.updatePanel)},n.prototype.updatePanel=function(){var t=h.DailyDemonModel.instance.bornLv,e=h.DailyDemonModel.instance.receivedTimes[0],i=this.maxNum(this._maxKillNum),n=h.DailyDemonModel.instance.maxReceivedTimes[0],s=h.DailyDemonModel.instance.killNumber[0],o=h.DailyDemonModel.instance.grade[0];n<=e?(this.getMonsterBox0.visible=!1,this.getMonsterBox1.visible=!0,i==this._maxKillNumValue.length-1?this.getDecTxt0.visible=this.getDecTxt1.visible=this.getDecTxt2.visible=this.getDecTxt3.visible=this.levelTxt.visible=!1:(this.levelTxt.text=this._maxKillNum[i+1]+"关",this.fitFunc(0,this._tipsArr,this._tipsArr.length),--o)):(this.getMonsterBox0.visible=!0,this.getMonsterBox1.visible=!1),this.getTimesTxt.text=e+"/"+n;var a=c.instance.getLittleCfgByEraLvAndGrade(t,o);if(a=a||c.instance.getLittleCfgByEraLvAndGrade(t,o-1)){var r=a[3],l=a[4];r<=s?(this.getBtn.visible=this._btnClip.visible=!0,this.cantGetImg.visible=!1):s<r&&(this.getBtn.visible=this._btnClip.visible=!1,this.cantGetImg.visible=!0),this._commonBar.maxValue=r,this._commonBar.value=s,this.killNumberTxt.text=""+r,this.showAwardItems(this._commonAwardItems,l),this.fitFunc(1,this._commonAwardItems,l.length),e=h.DailyDemonModel.instance.receivedTimes[1],i=this.maxNum(this._maxBossKillNum),n=h.DailyDemonModel.instance.maxReceivedTimes[1],s=h.DailyDemonModel.instance.killNumber[1],o=h.DailyDemonModel.instance.grade[1],n<=e?(this.getBossBox0.visible=!1,this.getBossBox1.visible=!0,i==this._maxBossKillNumValue.length-1?this.getBossDecTxt0.visible=this.getBossDecTxt1.visible=this.getBossDecTxt2.visible=this.getBossDecTxt3.visible=this.bossLevelTxt.visible=!1:(this.bossLevelTxt.text=this._maxBossKillNum[i+1]+"关",this.fitFunc(0,this._tipsBossArr,this._tipsBossArr.length),--o)):(this.getBossBox0.visible=!0,this.getBossBox1.visible=!1),this.getBossTimesTxt.text=e+"/"+n,r=(a=(a=c.instance.getBossCfgByEraLvAndGrade(t,o))||c.instance.getBossCfgByEraLvAndGrade(t,o-1))[3],l=a[4],r<=s?(this.getBossBtn.visible=this._btnBossClip.visible=!0,this.cantGetBossImg.visible=!1):s<r&&(this.getBossBtn.visible=this._btnBossClip.visible=!1,this.cantGetBossImg.visible=!0),this._bossBar.maxValue=r,this._bossBar.value=s,this.killBossNumTxt.text=""+r,this.showAwardItems(this._bossAwardItems,l),this.fitFunc(1,this._bossAwardItems,l.length),this.fitFunc(0,this._fitTxtArr,this._fitTxtArr.length),this.fitFunc(0,this._bossFitTxtArr,this._bossFitTxtArr.length),this.fitFunc(0,this._killNumTxtArr,this._killNumTxtArr.length),this.fitFunc(0,this._killBossNumTxtArr,this._killBossNumTxtArr.length)}},n.prototype.showAwardItems=function(t,e){for(var i=e.length,n=0,s=t.length;n<s;n++)t[n].visible=!1,n<i&&(t[n].dataSource=[e[n][0],e[n][1],0,null],t[n].visible=!0)},n.prototype.fitFunc=function(t,e,i){var n=0==t?5:this._widthSpace;1==t&&5==i&&(n=20);for(var s=-n,o=0;o<i;o++)s+=e[o].width+n;var a=(this.width-s)/2;for(o=0;o<i;o++)e[o].x=0==o?a:e[o-1].x+e[o-1].width+n},n.prototype.maxNum=function(t){for(var e=s.mission.MissionModel.instance.curLv,i=t.length,n=0;n<i;n++)if(e<=t[n])return n-1;return i-1},n.prototype.openDailyRuler=function(){t.alertHelp(20028)},n.prototype.openBossRuler=function(){t.alertHelp(20029)},n.prototype.getRewords=function(){h.DailyDemonCtrl.instance.getXiangyaoReward([0])},n.prototype.getBossRewords=function(){h.DailyDemonCtrl.instance.getXiangyaoReward([1])},e=n,h.DailyDemonPanel=e}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("package")},n.prototype.getCfgById=function(t){return GlobalData.searchByIndex1(this._table,t)},i=n,e.PackageCfg=i}(modules=modules||{}),function(d){!function(t){var e=ui.ManualGiftAlertUI,i=Laya.Event,n=d.notice.SystemNoticeManager,s=d.common.CustomList,o=d.common.CommonUtil,a=d.common.NumInputCtrl,r=d.config.CfgCtrl,l=(Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h);function h(){}t.ManualGiftModel=l;var c,p=(c=e,__extends(u,c),u.prototype.initialize=function(){c.prototype.initialize.call(this),this._checkBoxArr=[this.checkBox1,this.checkBox2,this.checkBox3,this.checkBox4,this.checkBox5,this.checkBox6,this.checkBox7,this.checkBox8],this._bagItems=[],this._posArr=[100,149,222,149,344,149,466,149,100,334,222,334,344,334,466,334],this._list=new s,this._list.width=520,this._list.height=386,this._list.hCount=4,this._list.spaceX=10,this._list.itemRender=t.ManualGiftItem,this._list.x=72,this._list.y=119,this.addChild(this._list),this._input=new a(this.numInput,this.addBtn,this.reduceBtn,this.addTenBtn,this.reduceTenBtn)},u.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler),this.onAutoEvt(this._list,i.SELECT,this,this.listHandler),this.onAutoClick(this.addMaxBtn,this,this.addMaxBtnHandler),this._input.on(i.CHANGE,this,this.inputHandler),this._input.addListeners(),this.onAutoGlobalEvt("GET_PACKAGE_ITEM_REPLY",this,this.updatePkg)},u.prototype.offEvt=function(){c.prototype.offEvt.call(this),this._input.off(i.CHANGE,this,this.inputHandler),this._input.removeListeners()},u.prototype.inputHandler=function(){this._useNum=this._input.value},u.prototype.addMaxBtnHandler=function(){this._input.value=this._maxNum,this.inputHandler()},u.prototype.listHandler=function(){this._list.selectedIndex},u.prototype.okHandler=function(){l.instance._selectedItem?(BagCtrl.instance.useBagItem(this._item[2],this._item[0],this._useNum,l.instance._selectedItem[0]),this.close()):n.instance.addNotice("请选择一种奖励",!0)},u.prototype.setOpenParam=function(t){c.prototype.setOpenParam.call(this,t),this._item=t},u.prototype.onOpened=function(){c.prototype.onOpened.call(this),l.instance._selectedCheckBox=null,l.instance._selectedItem=null;var t=this._item[0],e=o.getItemCfgById(t);this.nameTxt.text=e[1],this.nameTxt.color=o.getColorById(t),this._pkgId=e[8][0],r.instance.getPackageItem(this._pkgId),this._maxNum=d.bag.BagModel.instance.getItemCountById(t),this._input.min=1,this._input.max=this._maxNum,this._input.value=1,this._input.notice="使用数量",this._useNum=1},u.prototype.updatePkg=function(t){if(t[0]===this._pkgId){for(var e=t[1],i=[],n=0,s=e.length/3;n<s;n++)i.push([e[3*n],e[3*n+1],e[3*n+2]]);this._list.datas=i,this._list.selectedIndex=0}},u.prototype.destroy=function(){this._checkBoxArr&&(this._checkBoxArr.length=0,this._checkBoxArr=null),this._bagItems&&(this._bagItems.length=0,this._bagItems=null),this._posArr&&(this._posArr.length=0,this._posArr=null),this._item=null,l.instance._selectedItem=null,l.instance._selectedCheckBox=null,c.prototype.destroy.call(this)},u);function u(){return c.call(this)||this}t.ManualGiftAlert=p}(d.commonAlert||(d.commonAlert={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.windCloud||(t.windCloud={}),i=ItemRender,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.size(158,172),this._btn=new Laya.Button,this.addChild(this._btn),this._rp=new Laya.Image("common/image_common_xhd.png"),this._rp.pos(112,24),this._rp.visible=!1,this.addChild(this._rp)},s.prototype.onEvt=function(){switch(i.prototype.onEvt.call(this),this.data){case 145:this.regAutoRP(this._rp,["fairyRP"]);break;case 120:this.regAutoRP(this._rp,["nineCopyRP"]);break;case 839:this.regAutoRP(this._rp,["windCloudRP"]);break;case 779:this.regAutoRP(this._rp,["marryArenaFightCountRP"]);break;case 901:this.regAutoRP(this._rp,["strongestMarryRP","strongestMarryRP1","strongestMarryRP2"])}},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.data},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this._btn.selected=t},s.prototype.setData=function(t){switch(i.prototype.setData.call(this,t),t){case 145:this._btn.skin="pvp_tab/btn_pvp_hsxn.png",this._btn.stateNum=2,this._btn.label="";break;case 120:this._btn.skin="pvp_tab/btn_pvp_jtzd.png",this._btn.stateNum=2,this._btn.label="";break;case 839:this._btn.skin="pvp_tab/btn_pvp_fylt.png",this._btn.stateNum=2,this._btn.label="";break;case 779:this._btn.skin="pvp_tab/btn_lvjj_lvjjdyq.png",this._btn.stateNum=2,this._btn.label="";break;case 901:this._btn.skin="pvp_tab/btn_zqxy_bgan.png",this._btn.stateNum=2,this._btn.label=""}},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btn=this.destroyElement(this._btn),this._rp=this.destroyElement(this._rp),i.prototype.destroy.call(this,t)},n=s,e.PvpBtnItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.windCloud||(t.windCloud={}),i=ItemRender,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.size(158,172),this._btn=new Laya.Button,this.addChild(this._btn),this._rp=new Laya.Image("common/image_common_xhd.png"),this._rp.pos(112,24),this._rp.visible=!1,this.addChild(this._rp)},s.prototype.onEvt=function(){switch(i.prototype.onEvt.call(this),this.data){case 779:this.regAutoRP(this._rp,["marryArenaFightCountRP"]);break;case 901:this.regAutoRP(this._rp,["strongestMarryRP","strongestMarryRP1","strongestMarryRP2"])}},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.data},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this._btn.selected=t},s.prototype.setData=function(t){switch(i.prototype.setData.call(this,t),t){case 779:this._btn.skin="pvp_tab/btn_lvjj_lvjjdyq.png",this._btn.stateNum=2,this._btn.label="";break;case 901:this._btn.skin="pvp_tab/btn_zqxy_bgan.png",this._btn.stateNum=2,this._btn.label=""}},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btn=this.destroyElement(this._btn),this._rp=this.destroyElement(this._rp),i.prototype.destroy.call(this,t)},n=s,e.PvpBtnItem1=n}(modules=modules||{}),function(s){var t,o,e,a,i,r,l,h,n;function c(){return null!==o&&o.apply(this,arguments)||this}t=s.nine||(s.nine={}),e=ui.NineViewUI,a=s.config.BlendCfg,i=s.dungeon.DungeonCtrl,r=s.common.SimpleList,l=s.windCloud.PvpBtnItem,h=s.common.CustomClip,o=e,__extends(c,o),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._tabList=this.destroyElement(this._tabList),this._btnClip=this.destroyElement(this._btnClip),o.prototype.destroy.call(this,t)},c.prototype.initialize=function(){o.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnClip=h.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.gotoBtn.x-6,this.gotoBtn.y-8,!0),h.thisStop(this._btnClip),CommonUtil.setHTMLPro(this.timeTxtHTML,"#1f304d","SimHei",24,"center"),this.timeTxtHTML.innerHTML=s.config.BlendCfg.instance.getCfgById(10815)[2][0];for(var t=a.instance.getCfgById(10814)[1],e=[this.item1,this.item2,this.item3,this.item4],i=t.length>e.length?e.length:t.length,n=0;n<i;n++)e[n].dataSource=[t[n],1,0,null];this._tabList=r.create(l,158,172,2,1,10),this._tabList.size(494,172),this._tabList.pos((this.width-this._tabList.width)/2,979),this.addChild(this._tabList),this._tabList.datas=[120,145,839]},c.prototype.onEvt=function(){o.prototype.onEvt.call(this),this._tabList.selectedIndex=0,this.onAutoEvt(this._tabList,"select",this,this.onTabChange,[0]),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.gotoBtn,this,this.gotoHandler),this.onAutoClick(this.topAwardBtn,this,this.topAwardHandler),this.onAutoGlobalEvt("NINE_COPY_INFO_UPDATE",this,this.updateHandler)},c.prototype.onTabChange=function(t){switch(this._tabList.selectedData){case 120:this._tabList.selectedIndex!=t&&WindowManager.instance.open(158);break;case 145:this._tabList.selectedIndex!=t&&WindowManager.instance.open(227);break;case 839:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1259);break;case 901:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1361)}this._tabList.selectedIndex!=t&&(this._tabList.selectedIndex=t)},c.prototype.onOpened=function(){o.prototype.onOpened.call(this),this.updateHandler()},c.prototype.close=function(){o.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},c.prototype.helpHandler=function(){s.common.CommonUtil.alertHelp(20026)},c.prototype.gotoHandler=function(){i.instance.reqEnterScene(2161)},c.prototype.topAwardHandler=function(){WindowManager.instance.open(159)},c.prototype.updateHandler=function(){this._info=t.NineModel.instance.nineCopy,this._info&&(h.thisStop(this._btnClip),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler())},c.prototype.loopHandler=function(){this._info[2]<GlobalData.serverTime?(this.gotoBtn.visible=!0,this.enterTimeTxt.visible=!1,Laya.timer.clear(this,this.loopHandler),t.NineModel.instance.isRp()&&h.thisPlay(this._btnClip)):(h.thisStop(this._btnClip),this.gotoBtn.visible=!1,this.enterTimeTxt.visible=!0,this.enterTimeTxt.text="还需等待"+Math.ceil(.001*(this._info[2]-GlobalData.serverTime))+"秒才可进入")},n=c,t.NinePanel=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.nine||(t.nine={}),n=ui.NineTopAwardAlertUI,s=t.config.SceneCopyNineCfg,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this);var t=s.instance.cfgs[s.instance.cfgs.length-1][5];this.rankItem0.data=[1,t[0]],this.rankItem1.data=[2,t[1]],this.rankItem2.data=[3,t[2]],this.rankItem3.data=[4,t[3]],this.rankItem4.data=[5,t[4]]},o=a,e.NineTopAwardAlert=o}(modules=modules||{}),function(t){var n,s,e,i,o,a,r;function l(){return s.call(this)||this}n=t.nine||(t.nine={}),e=ui.ImgTitleAlertUI,i=t.config.BlendCfg,o=t.dungeon.DungeonCtrl,a=t.scene.SceneModel,s=e,__extends(l,s),l.prototype.initialize=function(){s.prototype.initialize.call(this),this.closeOnSide=!1,CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24,"center"),this.contentTxt.style.lineHeight=28,this.contentTxt.mouseEnabled=!1},l.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler)},l.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t);var e=t;if(1===e)this.titleImg.skin="nine/txt_jtzd_gxddtxt.png",this.contentTxt.innerHTML='恭喜您通关<span style="color:#EA8706">第8层</span>，即将进入顶层宝箱层！<br/>您是<span style="color:#EA8706">第'+n.NineModel.instance.scenePromote[2]+"个</span>登顶者！";else if(2===e){this.titleImg.skin="nine/txt_jtzd_cgjjtxt.png";var i=a.instance.enterScene[3];this.contentTxt.innerHTML='恭喜您通关<span style="color:#EA8706">第'+i+"层</span>，即将进入下一层"}this.contentTxt.style.padding=[(this.contentTxt.height-this.contentTxt.contextHeight)/2,0,0,0]},l.prototype.onOpened=function(){this._time=.001*i.instance.getCfgById(10812)[1][0],3201===a.instance.enterScene[0]&&(this._time=.001*t.config.ForbiddenBossCfg.instance.getBlendCfg(14)[1][0]),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},l.prototype.close=function(t,e){s.prototype.close.call(this,t,e),Laya.timer.clear(this,this.loopHandler)},l.prototype.loopHandler=function(){this.okBtn.label="确定("+this._time+")",this._time--,this._time<0&&(Laya.timer.clear(this,this.loopHandler),this.enterNextLv())},l.prototype.enterNextLv=function(){o.instance.reqEnterNextLevel(),this.close()},l.prototype.okHandler=function(){this.enterNextLv()},r=l,n.ImgTitleAlert=r}(modules=modules||{}),function(u){var s,e,t,o,i,n;function a(){var t=e.call(this)||this;return t._listState=!0,t}s=u.nine||(u.nine={}),t=u.common.CustomList,o=u.scene.SceneModel,i=u.notice.SystemNoticeManager,e=ui.NineRBViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=13,this.bottom=270,this.closeByOthers=!1,this.layer=3,this._list=t.create("v",12,68,272,110,s.NineRBPlayerItem),this.addChild(this._list),this._list.canSelectSameItem=!0,this.addChild(this._list),this._listBoss=t.create("v",326,68,280,110,s.NineRbBossItem),this.addChild(this._listBoss),this._listBoss.canSelectSameItem=!0,this.addChild(this._listBoss),CommonUtil.setHTMLPro(this.html,"#FFFFFF","SimHei",22,"center","middle")},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updateHumans),this.onAutoGlobalEvt("SCENE_REMOVE_HUMANS",this,this.updateHumans),this.onAutoGlobalEvt("NINE_DEFEAT_CLICK",this,this.setLitsInx),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateBosss),this.onAutoGlobalEvt("SCENE_ENTER",this,this.showUITips),this.onAutoClick(this.noPlayerTxt,this,this.noPlayerTxtClickHandler),this.onAutoClick(this.expandBtnBox,this,this.expandBtnHandler),this.onAutoEvt(this._listBoss,Laya.Event.SELECT,this,this.selectHandler),this.onAutoEvt(this._list,Laya.Event.SELECT,this,this.selectHandler1)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateHumans(),this.updateBosss(),this.showUITips()},a.prototype.showUITips=function(){var t=u.scene.SceneUtil.curSceneLv-1,e=u.config.SceneCopyNineBOSSCfg.instance._cfgsScoretable[u.scene.SceneUtil.curSceneLv],i=s.NineModel.instance.scoreArr[2][t],n=s.NineModel.instance.scoreArr[1][t];this.html.innerHTML="击败至尊&nbsp;积分<span style='color:#EA8706'>+"+e+"</span>&nbsp;&nbsp;&nbsp;击败玩家&nbsp;积分<span style='color:#D738F4'>+"+i+"</span>&nbsp;&nbsp;&nbsp;击败精英&nbsp;积分<span style='color:#50ff28'>+"+n+"</span> "},a.prototype.expandBtnHandler=function(){this._listState=!this._listState,this.changUI()},a.prototype.changUI=function(){this.noPlayerTxt.y=this._listState?113:152,this.bgImg.height=this._listState?155:68,this.bgImg.y=this._listState?30:117,this._list.height=this._listState?110:30,this._list.y=this._listState?68:148,this.expandBtnBox.y=this._listState?41:124,this.expandBtn.skin=this._listState?"common/btn_tonyong_28.png":"common/btn_tonyong_29.png",this.updateHumans()},a.prototype.setLitsInx=function(){this._list.selectedIndex=-1},a.prototype.updateHumans=function(){for(var t=o.instance.humans,e=[],i=0,n=t.length;i<n;i++)t[i][5][0]!==PlayerModel.instance.actorId&&e.push(t[i]);this._scrollPosOld=this._list.scrollPos,this._list.datas=e,this._list.scrollPos=this._scrollPosOld,this.noPlayerTxt.visible=0===e.length},a.prototype.updateBosss=function(){var t=u.config.SceneCopyNineBOSSCfg.instance.getArrOccByLevel(u.scene.SceneUtil.curSceneLv),e=u.config.SceneCopyNineCfg.instance.getCfgByLevel(u.scene.SceneUtil.curSceneLv)[2],i=t.concat(e);if(i){var n=[],s=[];this.noBossText.visible=!0;for(var o=0;o<i.length;o++){var a=i[o],r=u.config.MonsterCfg.instance.getMonsterById(a)[1],l=u.dungeon.DungeonModel.instance.bossIsDead(a);28===r?s.push(a):l||(this.noBossText.visible=!1,n.push(a))}if(1===s.length)n.unshift(s[0]);else if(2===s.length){var h=0,c=0;for(o=0;o<s.length;o++){var p=s[o];0===u.config.SceneCopyNineBOSSCfg.instance.getCfgById(p)[4]?h=p:c=p}u.dungeon.DungeonModel.instance.bossTable[h]?h&&!u.dungeon.DungeonModel.instance.bossIsDead(h)?n.unshift(h):c&&n.unshift(c):n.unshift(h)}this._scrollPosOld1=this._listBoss.scrollPos,this._listBoss.datas=n,this._listBoss.scrollPos=this._scrollPosOld1,this._listBoss.selectedData&&GlobalData.dispatcher.event("NINE_COPY_BOSS_LIST_UPDATE",[this._listBoss.selectedData])}else this._listBoss.datas=[]},a.prototype.noPlayerTxtClickHandler=function(){i.instance.addNotice("场景中暂无玩家目标",!0)},a.prototype.selectHandler1=function(){-1!=this._list.selectedIndex&&(this._listBoss.selectedIndex=-1)},a.prototype.selectHandler=function(){if(-1!=this._listBoss.selectedIndex){this._list.selectedIndex=-1,GlobalData.dispatcher.event("CANCEL_AUTO",[2]);var t=this._listBoss.datas[this._listBoss.selectedIndex];PlayerModel.instance.selectTarget(1,t)}},a.prototype.destroy=function(t){void 0===t&&(t=!0),this.destroyElement(this._list),this.destroyElement(this._listBoss),e.prototype.destroy.call(this,t)},n=a,s.NineRBPanel=n}(modules=modules||{}),function(t){var a,e,i,r,l,h,n;function s(){return null!==e&&e.apply(this,arguments)||this}a=t.nine||(t.nine={}),i=ui.NineDefeatViewUI,r=t.scene.SceneModel,l=t.config.MonsterResCfg,h=t.config.ExteriorCfg,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.closeByOthers=!1,this.centerX=0,this.top=200},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("NINE_DEFEAT_UPDATE",this,this.updateDefeat)},s.prototype.updateDefeat=function(){Laya.timer.once(3e3,this,this.close);var t=a.NineModel.instance.defeatInfo,e=t[1],i=t[0],n=this.getSkin(r.instance.getRoleByObjId(e));this.myHead.headImg.skin=n[0],this.myHead.frameImg.skin=n[1];var s=r.instance.getRoleByObjId(i);if(s){var o=this.getSkin(s);1===s[0]?(this.otherHeadImg.skin=o[0],this.otherHeadBg.skin=o[1],this.monsterHeadBg.visible=!1):2===s[0]&&(this.otherHeadImg.skin=o,this.otherHeadBg.visible=!1,this.monsterHeadBg.visible=!0)}},s.prototype.getSkin=function(t){if(!t)return"";var e="";if(1===t[0]){var i=t[1][5][1],n=t[1][5][21],s=t[1][5][22];return[CommonUtil.headSkin(n,i),CommonUtil.headFrameSkin(s)]}if(2===t[0]){i=t[1][1];var o=l.instance.getCfgById(i);if(o[3])e="assets/icon/monster/"+o[3]+".png";else{var a=l.instance.getMonsterRes(i);e="assets/icon/item/"+h.instance.getCfgById(a)[3]+".png"}}return e},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),t.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()&&(this.top=380),this.updateDefeat()},s.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.close)},n=s,a.NineDefeatPanel=n}(modules=modules||{}),function(t){var e,h,i,n,c,s,o,a;function r(){var t=h.call(this)||this;return t._timer=0,t}e=t.nine||(t.nine={}),i=ui.NineResultAlertUI,n=t.config.BlendCfg,c=t.config.SceneCopyNineCfg,s=t.dungeon.DungeonCtrl,o=t.scene.SceneUtil,h=i,__extends(r,h),r.prototype.initialize=function(){h.prototype.initialize.call(this),this._rankItems=[this.rankItem1,this.rankItem2,this.rankItem3],this._items=[this.item1,this.item2,this.item3,this.item4]},r.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close)},r.prototype.setOpenParam=function(t){h.prototype.setOpenParam.call(this,t);for(var e=t,i=e[1],n=0;n<3;n++)i[n]?(this._rankItems[n].visible=!0,this._rankItems[n].data=i[n]):this._rankItems[n].visible=!1;var s=e[2],o=e[3];this.myLvTxt.text="我的通关战绩：第"+s+"层 排名："+o;var a,r=c.instance.getCfgByLevel(s)[5],l=.5*(442-88*(a=9===s?this.getAwardsByRank(o,r):r[0][1]).length-30*(a.length-1));for(n=0;n<4;n++)a[n]?(this._items[n].visible=!0,this._items[n].dataSource=[a[n][0],a[n][1],0,null],this._items[n].x=144+l+118*n):this._items[n].visible=!1},r.prototype.getAwardsByRank=function(t,e){for(var i,n=e.length-1;0<=n;n--)if(t>=e[n][0]){i=e[n][1];break}return i},r.prototype.onOpened=function(){h.prototype.onOpened.call(this),this._timer=.001*n.instance.getCfgById(10303)[1][0],Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},r.prototype.close=function(t,e){h.prototype.close.call(this,t,e),14===o.currScene&&s.instance.reqEnterScene(),Laya.timer.clear(this,this.loopHandler)},r.prototype.loopHandler=function(){this.okBtn.label="确定("+this._timer+")",this._timer<0&&this.close(),this._timer--},a=r,e.NineResultAlert=a}(modules=modules||{}),function(t){var e,s,i,n,o,a;function r(){return s.call(this)||this}e=t.nine||(t.nine={}),i=ui.LeaveSenceAlertUI,n=Laya.Sprite,o=t.config.SceneCfg,s=i,__extends(r,s),r.prototype.initialize=function(){s.prototype.initialize.call(this),this._maskSpr=new n,this._maskSpr.pos(137.5,137.5,!0),this.lightCircle.mask=this._maskSpr,this.closeOnSide=!1,this.tipTxt.text="复活倒计时",this.box1.visible=!1},r.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t);var e=t,i=o.instance.getCfgById(2161)[8];this._totalTime=i,this.numClip.value=Math.floor(i/1e3).toString(),this.lightCircle.visible=!0,this.pointImg.visible=!0,this._leaveTime=i+PlayerModel.instance.playerDeadTime;var n="";1==e[2]?n="[玩家]"+e[3]:2==e[2]&&(n="[BOSS]"+e[3]),this.killInfoHtml.style.align="center",this.killInfoHtml.innerHTML="<span style='color:#ffffff;font-size:24px'>您已被</span><span style='color:#e6372e;font-size: 24px'>"+n+"</span><span style='color:#ffffff;font-size: 24px'>击败了!</span>",this._maskSpr.graphics.clear(),this._maskSpr.graphics.drawCircle(0,0,137.5,"#FF0000"),this.pointImg.x=273,this.pointImg.y=85},r.prototype.onOpened=function(){s.prototype.onOpened.call(this),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},r.prototype.close=function(t,e){s.prototype.close.call(this,t,e),Laya.timer.clear(this,this.loopHandler),Laya.timer.clearAll(this),SceneCtrl.instance.reqRevive()},r.prototype.loopHandler=function(){var t=this._leaveTime-GlobalData.serverTime;if(t<=0)this._maskSpr.graphics.clear(),this.lightCircle.visible=!1,this.numClip.value="0",this.pointImg.pos(273,85),Laya.timer.clear(this,this.loopHandler),this.close();else{this._maskSpr.graphics.clear();var e=1-t/this._totalTime*360;this._maskSpr.graphics.drawPie(0,0,137.5,-90+e,-90,"#FF0000"),e=e*Math.PI/180,this.pointImg.pos(273+88*Math.sin(e),174-88*Math.cos(e),!0),t=Math.ceil(.001*t),this.numClip.value=t.toString()}},a=r,e.NineKilledAlert=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("xianwei_task");var t=this._table[0];this._mscTab={},this._specialMscTab={};for(var e=0,i=t.length;e<i;e++){var n=this.getXianweiTaskDataById(t[e]);n&&(130001!==t[e]?n[3]&&(this._mscTab[n[2]]=n[3]):this._specialMscTab[t[e]]=n[3])}},n.prototype.getXianweiTaskDataById=function(t){return GlobalData.searchByIndex1(this._table,t)},n.prototype.getXianweiTaskDataByMsc=function(t,e){return this._specialMscTab[t]?this._specialMscTab[t]:this._mscTab[e]},i=n,e.XianweiTaskCfg=i}(modules=modules||{}),function(l){var t,h,i,n,s,o,e;function a(){this._tasks=[]}t=l.magicPosition||(l.magicPosition={}),h=l.config.XianweiTaskCfg,i=l.effect.SuccessEffectCtrl,n=l.funcOpen.FuncOpenModel,s=l.redPoint.RedPointCtrl,o=l.config.XianweiRiseCfg,Object.defineProperty(a,"Instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),a.prototype.dataInit=function(t){this.position=t[2],this.dailyAward=t[1],this.haveNum=t[3],this.tasks=t[0],this.isLevelUp=!1,this.checkHasRP(),this.setMaxAndMin()},a.prototype.setMaxAndMin=function(){this.minPos=this.getMinDaily(),-1==this.minPos||this.minPos==this.position?this.maxPos=this.minPos:this.maxPos=this.getMaxDaily()},a.prototype.checkHasRP=function(){if(n.instance.getFuncIsOpen(10)){if(this.checkReward())return void s.instance.setRPProperty("magicPositionRP",!0);for(var t=0,e=this._tasks;t<e.length;t++)if(1==e[t][1])return void s.instance.setRPProperty("magicPositionRP",!0)}s.instance.setRPProperty("magicPositionRP",!1)},a.prototype.checkReward=function(){for(var t=0;t<=this.position;t++)if(this.checkHasDaily(t))return!0;return!1},a.prototype.updateData=function(t){var e=t[2];e>this.position?(this.isLevelUp=!0,WindowManager.instance.openDialog(79,e),i.instance.play("assets/others/tx_jinjiechengong8.png")):this.isLevelUp=!1,this.position=e,this.dailyAward=t[1],this.haveNum=t[3],this.tasks=t[0],this.setMaxAndMin(),GlobalData.dispatcher.event("MAGIC_POSITION_UPDATE"),this.checkHasRP()},a.prototype.updataXianweiTask=function(t){var e=t;this.searchTaskElement(e),GlobalData.dispatcher.event("MAGIC_POSITION_TASK_UPDATE"),this.checkHasRP()},a.prototype.searchTaskElement=function(t){for(var e=t[0],i=0,n=this._tasks.length;i<n;i++)if(this._tasks[i][0]==e)return this._tasks[i]=t,void(this._tasks=this._tasks.sort(this.sortFunc.bind(this)));this._tasks.push(t),this._tasks=this._tasks.sort(this.sortFunc.bind(this))},Object.defineProperty(a.prototype,"tasks",{get:function(){if(PlatParams.isCloseRecharge){for(var t=[],e=0,i=this._tasks.length;e<i;e++)100!=Math.floor(this._tasks[e][0]/10)?t.push(this._tasks[e]):console.log("去掉..........",this._tasks[e]);return t}return this._tasks},set:function(t){for(var e=0;e<t.length;e++){var i=t[e][0];h.instance.getXianweiTaskDataById(i)||(t.splice(e,1),e--)}this._tasks=t,this._tasks=this._tasks.sort(this.sortFunc.bind(this)),GlobalData.dispatcher.event("MAGIC_POSITION_TASK_UPDATE")},enumerable:!0,configurable:!0}),a.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1];return s==o?this.typeSortFunc(t,e):1==s?-1:1==o?1:0==s?-1:0==o?1:i-n},a.prototype.typeSortFunc=function(t,e){var i=t[0],n=e[0],s=h.instance.getXianweiTaskDataById(i),o=h.instance.getXianweiTaskDataById(n),a=s[6],r=o[6];return a<100&&100<r?-1:100<a&&r<100?1:i-n},a.prototype.getMinDaily=function(){for(var t=o.instance.ids,e=t.indexOf(this.position),i=0;i<=e;i++){var n=t[i];if(this.checkHasDaily(n))return n}return-1},a.prototype.getMaxDaily=function(){for(var t=o.instance.ids,e=t.indexOf(this.position);0<=e;e--){var i=t[e];if(this.checkHasDaily(i))return i}return-1},a.prototype.checkHasDaily=function(t){if(this.dailyAward&&0<this.dailyAward.length)for(var e=0;e<this.dailyAward.length;e++){var i=this.dailyAward[e];if(i[0]==t){if(1==i[1])return!0;break}}return!1},a.prototype.getMsc=function(t){var e=t[0],i=t[2],n=h.instance.getXianweiTaskDataByMsc(e,i),s=t[4],o=s.concat();switch(i){case 2:o[0]=""+l.config.BornCfg.instance.getCfgByLv(s[0])[1];break;case 11:case 13:o[0]=Math.floor((s[0]-.01)/10)+1,o[1]=(s[0]-1)%10+1;break;case 63:o[0]=Math.floor(s[0]/100),o[1]=s[0]%100;break;case 112:o[1]=CommonUtil._qualityNames[s[1]];break;case 141:o[1]=CommonUtil._qualityNames[s[1]-1];break;case 229:o[1]=CommonUtil.equipQualityNames[s[1]-1],o[2]=l.config.DivinatoryCardActionCfg.instance.getCfg(s[2])[4];break;case 230:o[1]=l.config.DivinatoryCardActionCfg.instance.getCfg(s[1])[4];break;case 234:o[0]=CommonUtil.getYuanshenLevelNameById(s[0]);case 238:case 240:o[1]=CommonUtil.getYuanshenName(s[1]);break;case 237:o[0]=l.config.FeiShengGradeCfg.instance.getCfgById(s[0])[1];break;case 239:o[1]=CommonUtil.equipQualityNames[s[1]-1],o[2]=CommonUtil.getYuanshenName(s[2]);break;case 243:case 244:o[1]=""+l.config.TianshuCfg.instance.getTianshuName(s[1]);break;case 245:o[1]=CommonUtil.equipQualityNames[s[1]-1],o[2]=l.config.ShowEquipCfg.instance.getCfgByType(s[2])[1];break;case 249:o[1]=CommonUtil._qualityNames2[s[1]-1];break;case 250:o[1]=CommonUtil.peryNames[s[1]-1]}for(var a=0,r=o.length;a<r;a++)n=n.replace("{"+a+"}",o[a]);return n},a._instance=new a,e=a,t.MagicPositionModel=e}(modules=modules||{}),function(t){var o,e,i,n;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastChanel=0,t}o=t.redBag||(t.redBag={}),i=t.core.BaseCtrl,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){},s.prototype.sendData=function(){this.getRedEnvelopeInfo(),this.getRedEnvelopePerInfo(),this.getRedEnvelopeRecord()},s.prototype.getRedEnvelopeInfoReply=function(t){o.RedBagModel.instance.getRedEnvelopeInfoReply(t)},s.prototype.getRedEnvelopeRecordReply=function(t){o.RedBagModel.instance.getRedEnvelopeRecordReply(t)},s.prototype.getRedEnvelopePerInfoReply=function(t){o.RedBagModel.instance.getRedEnvelopePerInfoReply(t)},s.prototype.sysRedEnvelopeIssueReply=function(t){var e=this;setTimeout(function(){CommonUtil.noticeError(t[0],"红包已发送至"+o.RedBagUtils.chanelName[e.lastChanel]+"频道")},25)},s.prototype.activeRedEnvelopeIssueReply=function(t){var e=this;setTimeout(function(){CommonUtil.noticeError(t[0],"红包已发送至"+o.RedBagUtils.chanelName[e.lastChanel]+"频道")},25)},s.prototype.drawRedEnvelopeReply=function(t){0==t[0]||51907==t[0]?((WindowManager.instance.isOpened(1363)||WindowManager.instance.isOpened(1362)||WindowManager.instance.isOpened(1364))&&(o.RedBagModel.instance.isOpenDlog=!0),WindowManager.instance.open(1365),3===t[1]&&GlobalData.dispatcher.event("GER_PASSWAED_RED_BAG")):CommonUtil.noticeError(t[0])},s.prototype.reqRedDrawAgentReply=function(t){o.RedBagModel.instance.reqRedDrawAgentReply(t)},s.prototype.updateRedEnvelopeState=function(t){o.RedBagModel.instance.updateRedEnvelopeState(t)},s.prototype.addRedEnvelope=function(t){o.RedBagModel.instance.addRedEnvelope(t)},s.prototype.delRedEnvelope=function(t){o.RedBagModel.instance.delRedEnvelope(t)},s.prototype.updateRedEnvelopeRecord=function(t){o.RedBagModel.instance.updateRedEnvelopeRecord(t)},s.prototype.activeRedEnvelopeIssue=function(t){this.lastChanel=t[5],this.publish(2110064,t)},s.prototype.getRedEnvelopePerInfo=function(){this.publish(2110062,null)},s.prototype.drawRedEnvelope=function(t,e,i,n,s){void 0===s&&(s=""),o.RedBagModel.instance.showUidAndChannel.channel=e,o.RedBagModel.instance.showUidAndChannel.uid=i,this.publish(2110063,[t,e,i,s,n])},s.prototype.getRedEnvelopeInfo=function(){this.publish(4196204,null)},s.prototype.getRedEnvelopeRecord=function(){this.publish(4196205,null)},s.prototype.sysRedEnvelopeIssue=function(t,e){this.publish(4196206,[e,t]),this.lastChanel=t},s.prototype.reqRedDrawAgent=function(t,e){this.publish(4196207,[t,e])},s.prototype.chatSendPassWard=function(t,e,i,n){var s;return void 0===i&&(i=null),void 0===n&&(n=4),!!(s=i?o.RedBagModel.instance.getPkgByUid(i):o.RedBagModel.instance.getChannelAndContentByLastTmPkg(t,e,n))&&(this.drawRedEnvelope(n,t,s[0],s[6],e),!0)},s.prototype.updateRedEnvelopeExpire=function(t){o.RedBagModel.instance.updateRedEnvelopeExpire(t)},n=s,o.RedBagCtrl=n}(modules=modules||{});!function(h){var c,e,p,t,u,i,n,d,m,f,g,y,s,o,_,a;function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._index=0,t}c=h.chat||(h.chat={}),p=h.chat.ChatModel,t=ui.ChatViewUI,u=h.notice.SystemNoticeManager,i=h.common.CustomList,n=h.guide.GuideModel,d=h.config.BlendCfg,m=h.vip.VipModel,f=h.magicPosition.MagicPositionModel,g=h.exercise.ExerciseModel,y=h.vip_new.VipNewModel,s=h.common.CustomSlide,o=h.bottomTab.BottomTabCtrl,_=h.redBag.RedBagCtrl,e=t,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.bottom=113,this._slide=new s(this.con,this.box),this._list=i.create("v",89,63,614,547,c.ChatMessageItem),this.addChildAt(this._list,8),this.banBox.visible=this.blackListBox.visible=!1,this._maxInputChar=34,this.inputTxt.maxChars=this._maxInputChar,this.inputBox.visible=!0,this._type=1,this._selectBtn=this.jiuzhouBtn,this._selectBtnHandler=this.jiuzhouBtnHandler,this._messageType="JIUZHOU_MESSAGE_UPDATE",this.regGuideSpr(79,this.backBtn),this.regGuideSpr(93,this.sendBtn),this.sendBagBtn.visible=h.redBag.RedBagUtils.getActionopen(),this.sendBagBtn.visible?(this.inputBg.width=340,this.faceBtn.x=346,this.inputTxt.width=338):(this.inputBg.width=396,this.faceBtn.x=404,this.inputTxt.width=394),this.bagBox.visible=!1},r.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._info=t},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this.inputTxt,"enter",this,this.inputEnterHandler),this.onAutoEvt(this.inputTxt,"input",this,this.charNumCheck),this.onAutoClick(this.faceBtn,this,this.faceBtnHandler),this.onAutoClick(this.jiuzhouBtn,this,this.jiuzhouBtnHandler),this.onAutoClick(this.marryBtn,this,this.marryHandler),this.onAutoClick(this.benfuBtn,this,this.benfuBtnHandler),this.onAutoClick(this.xianmengBtn,this,this.xianmengBtnHandler),this.onAutoClick(this.xitongBtn,this,this.xitongBtnHandler),this.onAutoClick(this.blackListBtn,this,this.blackListBtnHandler),this.onAutoClick(this.sendBtn,this,this.sendBtnHandler),this.onAutoEvt(this.inputTxt,"mousedown",this,this.inputDownHandler),this.onAutoClick(this.teamBtn,this,this.teamBtnHandler),this.onAutoClick(this.sendBagBtn,this,this.sendBagHandler),this.onAutoClick(this.bagBox,this,this.bagBoxHandler),this.onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.setInputPrompt),this.onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.judgeCanInput),this.onAutoGlobalEvt(this._messageType,this,this.updateView),this.onAutoGlobalEvt("CHECKED_FACE",this,this.inputHandler),this.onAutoGlobalEvt("SEND_RESULT",this,this.chatSendResult),this.onAutoGlobalEvt("GUIDE_CUR_UPDATE",this,this.guideCurHandler),this.onAutoGlobalEvt("FACTION_MESSAGE_UPDATE",this,this.factionMessageHint),this.onAutoGlobalEvt("WARBAND_MESSAGE_UPDATE",this,this.teamMessageHint),this.onAutoGlobalEvt("GER_PASSWAED_RED_BAG",this,this.updataPassWeadView),this.regAutoRP(this.marryRP,["marryMessageRP"]),this._slide.initState(),this.onAutoClick(this._selectBtn,this,this._selectBtnHandler)},r.prototype.updataPassWeadView=function(t){t&&t instanceof Array?(this.bagBox.visible=0===h.redBag.RedBagModel.instance.getState(t),this.passwardTxt.text=h.redBag.RedBagUtils.redBagMsc(t)):this.bagBox.visible=!1},r.prototype.offEvt=function(){e.prototype.offEvt.call(this),this.maskImg.off("click",this,this.unlockHintWord),this._slide.removeListeners()},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.box.y=p.instance.selectListY||0,p.instance.currChatChannel=1,this._selectBtn.skin="chat/btn_lt_yqbtn_1.png",this.initListPos(),this.judgeCanInput(),this.guideCurHandler(),this.factionMessageHint(),this.teamMessageHint(),this.updataPassWeadView(this._info)},r.prototype.bagBoxHandler=function(){if(this._info){var t=[p.instance.currChatChannel,9,1,this.passwardTxt.text,h.chat.ChatModel.instance.virtualItem,[PlayerModel.instance.actorId],[],0,0];c.ChatCtrl.instance.sendChatMessage(t),_.instance.chatSendPassWard(this._info[10],this.passwardTxt.text,this._info[0]),this.bagBox.visible=!1}else console.log("????????")},r.prototype.sendBagHandler=function(){o.instance.openTabByFunc(906),_.instance.sendData()},r.prototype.guideCurHandler=function(){if(n.instance.curGuide&&3902==h.guide.GuideModel.instance.curGuide[0]){var t=h.config.BlendCfg.instance.chatMarkedWords;this._index=CommonUtil.getRandomInt(0,t.length-1);var e=t[this._index];e||(e=t[0],this._index=0),this.inputTxt.text=e}},r.prototype.judgeCanInput=function(){var t=h.mission.MissionModel.instance.finishLv,e=p.instance.getUnlockLv(0);this.inputTxt.editable=e<=t,t<e?this.maskImg.on("click",this,this.unlockHintWord):(this.maskImg.off("click",this,this.unlockHintWord),this.maskImg.removeSelf())},r.prototype.close=function(){p.instance.selectListY=this.box.y,this._info=null,e.prototype.close.call(this),WindowManager.instance.close(149),this._selectBtn.skin="chat/btn_lt_yqbtn_0.png",this._info=null},r.prototype.getListDatas=function(){return p.instance.jiuzhouChatRecord},r.prototype.updateView=function(){var t=this.getListDatas();t&&t.length&&(t[t.length-1][0]&&t[t.length-1][0][0]==PlayerModel.instance.actorId?this.initListPos():this.listMoveUp(t))},r.prototype.initListPos=function(){this.setInputPrompt();var t=this.getListDatas();t&&t.length&&(this._list.datas=t,this._list.conHeight>=this._list.height&&(this._list.scrollPos=this._list.conHeight-this._list.height),GlobalData.dispatcher.event("SELECT_CHAT_CHANNEL"))},r.prototype.listMoveUp=function(t){var e=this._list.scrollPos;(this._list.datas=t).length>=p.instance.maxCacheMessageNum[p.instance.currChatChannel]?this._list.scrollToIndex(t.length-1):(p.instance.chatItemIsShowTm(t[t.length-1]),this._list.scrollPos=e+145+38),GlobalData.dispatcher.event("SELECT_CHAT_CHANNEL")},r.prototype.unlockHintWord=function(){var t=h.mission.MissionModel.instance.finishLv,e=p.instance.getUnlockLv(1),i=p.instance.getUnlockLv(0);t<e?u.instance.addNotice("通过天关"+e+"关开启快捷语句功能",!0):t<i&&WindowManager.instance.open(146)},r.prototype.inputHandler=function(){var t=this.inputTxt.text,e=p.instance.checkedFace[p.instance.checkedFace.length-1];t.length+e.length>this._maxInputChar?u.instance.addNotice("最大输入字数"+this._maxInputChar+"个",!0):(this.inputTxt.text=t+e,this.inputTxt.focus=!0)},r.prototype.charNumCheck=function(){this.inputTxt.text.length>this._maxInputChar&&u.instance.addNotice("最大输入字数"+this._maxInputChar+"个",!0)},r.prototype.inputEnterHandler=function(){var o=this,t=h.mission.MissionModel.instance.finishLv,e=p.instance.getUnlockLv(0);p.instance.getUnlockLv(1),WindowManager.instance.isOpened(149)&&WindowManager.instance.close(149);var a,i=h.guide.GuideModel.instance.curGuide;if(a=i&&3902===i[0],t<e&&!a)this.unlockHintWord();else{var r=this.inputTxt.text;if(r)if(p.instance.isValidContent(r)){if(5===this._type)for(var n=h.marry.MarryModel.instance.half[0],s=0,l=p.instance.blackList.length;s<l;s++)if(p.instance.blackList[s][0]===n)return void u.instance.addNotice("您已将对方拉黑，请前往黑名单解除拉黑",!0);CommonUtil.checkWords(r,function(){var t=!1;a&&(t=Math.random()<d.instance.getCfgById(26010)[1][0]);var e=[p.instance.currChatChannel,0,0,r,p.instance.virtualItem,[],[],0,0];if(t){CommonUtil.runActorOper(1,[p.instance.currChatChannel,0]);var i=[PlayerModel.instance.actorId,"",PlayerModel.instance.roleName,PlayerModel.instance.occ,PlayerModel.instance.level,m.instance.vipLevel,f.Instance.position,g.instance.currLev,PlayerModel.instance.fight,PlayerModel.instance.serverPgId,y.instance.getVipLevelTrue(),0,0,0,0,PlayerModel.instance.eraLevel,0];c.ChatCtrl.instance.updateChat([[i,e]]),o.chatSendResult(1)}else if(a){var n=[p.instance.currChatChannel,1,o._index,r,p.instance.virtualItem,[],[],0,0];c.ChatCtrl.instance.sendChatMessage(n)}else{if(o.bagBox.visible){var s=_.instance.chatSendPassWard(h.redBag.RedBagUtils.ChatChannelTochannel(p.instance.currChatChannel),r);o.bagBox.visible=!s,s&&(e[1]=9)}else(s=_.instance.chatSendPassWard(h.redBag.RedBagUtils.ChatChannelTochannel(p.instance.currChatChannel),r))&&(e[1]=9);c.ChatCtrl.instance.sendChatMessage(e)}p.instance.sendChatInfo=r})}else u.instance.addNotice("包含非法字符",!0);else u.instance.addNotice("发送内容不能为空",!0)}},r.prototype.chatSendResult=function(t){t&&(p.instance.checkedFace.length=0,this.inputTxt.text="")},r.prototype.inputDownHandler=function(t){t.stopPropagation()},r.prototype.setInputPrompt=function(){var t=h.mission.MissionModel.instance.finishLv,e=p.instance.getUnlockLv(0),i=p.instance.getUnlockLv(1);t<i?this.inputTxt.focus||(this.inputTxt.prompt="通过天关"+i+"关可发送快捷语句"):t<e?this.inputTxt.focus||(this.inputTxt.prompt="点击选择快捷语("+e+"天关可自由聊天）"):this.inputTxt.focus||(this.inputTxt.prompt="点击输入聊天内容")},r.prototype.factionMessageHint=function(){this.factionRP.visible=p.instance.getNoseeMessage(4)},r.prototype.teamMessageHint=function(){this.teamRP.visible=p.instance.getNoseeMessage(6)},r.prototype.faceBtnHandler=function(){var t=p.instance.getUnlockLv(2);h.mission.MissionModel.instance.finishLv<t?u.instance.addNotice("通过天关"+t+"关解锁",!0):WindowManager.instance.isOpened(149)?WindowManager.instance.close(149):WindowManager.instance.open(149)},r.prototype.benfuBtnHandler=function(){WindowManager.instance.open(150)},r.prototype.teamBtnHandler=function(){h.warband.WarbandModel.instance.info?WindowManager.instance.open(761):u.instance.addNotice("请先加入战队",!0)},r.prototype.xianmengBtnHandler=function(){h.faction.FactionModel.instance.hasFaction?WindowManager.instance.open(276):u.instance.addNotice("请先加入仙盟",!0)},r.prototype.marryHandler=function(){h.marry.MarryModel.instance.isMarried?WindowManager.instance.open(513):u.instance.addNotice("结缘后开启仙缘聊天",!0)},r.prototype.xitongBtnHandler=function(){WindowManager.instance.open(151)},r.prototype.blackListBtnHandler=function(){WindowManager.instance.open(152)},r.prototype.jiuzhouBtnHandler=function(){WindowManager.instance.open(147)},r.prototype.sendBtnHandler=function(){this.inputEnterHandler()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this.maskImg=this.destroyElement(this.maskImg),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},a=r,c.ChatJiuzhouPanel=a}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.chat||(t.chat={}),i=e.ChatJiuzhouPanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._selectBtn=this.benfuBtn,this._selectBtnHandler=this.benfuBtnHandler,this._type=2,this._messageType="BENFU_MESSAGE_UPDATE"},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ChatModel.instance.currChatChannel=2,GlobalData.dispatcher.event("SELECT_CHAT_CHANNEL")},s.prototype.getListDatas=function(){return e.ChatModel.instance.benfuChatRecord},n=s,e.ChatBenfuPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.chat||(t.chat={}),i=e.ChatJiuzhouPanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._list.itemRender=e.ChatMessageItem,this._selectBtn=this.xianmengBtn,this._selectBtnHandler=this.xianmengBtnHandler,this._type=4,this._messageType="FACTION_MESSAGE_UPDATE"},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ChatModel.instance.currChatChannel=4,GlobalData.dispatcher.event("SELECT_CHAT_CHANNEL"),this.factionRP.visible=!1},s.prototype.getListDatas=function(){return e.ChatModel.instance.factionChatRecord},n=s,e.ChatFactionPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.chat||(t.chat={}),n=t.common.CustomList,i=e.ChatJiuzhouPanel,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.inputBox.visible=!1,this.banBox.visible=!0,this._list.removeSelf(),this._list.destroy(!0),this._list=n.create("v",89,63,614,547,e.SystemMessageItem,15),this.addChild(this._list),this._selectBtn=this.xitongBtn,this._selectBtnHandler=this.xitongBtnHandler,this._messageType="SYSTEM_MESSAGE_UPDATE"},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ChatModel.instance.currChatChannel=3,GlobalData.dispatcher.event("SELECT_CHAT_CHANNEL")},o.prototype.getListDatas=function(){return e.ChatModel.instance.systemChatRecord},s=o,e.ChatSystemPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.chat||(t.chat={}),n=t.config.BlendCfg,i=e.ChatJiuzhouPanel,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.inputBox.visible=!1,this.banBox.visible=this.blackListBox.visible=!0,this._list.itemRender=e.ChatBlackListItem,this._list.y=115,this._list.height=450,this._list.itemWidth=616,this._list.itemHeight=50,this._selectBtn=this.blackListBtn,this._selectBtnHandler=this.blackListBtnHandler,this._maxBlackListNum=n.instance.getCfgById(26007)[1][0]},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("CHAT_BLACK_LIST_UPDATE",this,this.updateView)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ChatModel.instance.currChatChannel=1,this.updateView()},o.prototype.offSelectFunc=function(){this.blackListBtnHandler()},o.prototype.getListDatas=function(){return null},o.prototype.updateView=function(){var t=e.ChatModel.instance.blackList;this.maxBlackListNumTxt.text="屏蔽上限:"+t.length+"/"+this._maxBlackListNum,t&&(this._list.datas=t)},s=o,e.ChatBlackListPanel=s}(modules=modules||{}),function(t){var e,a,i,r,n,s;function o(){return null!==a&&a.apply(this,arguments)||this}e=t.chat||(t.chat={}),i=ui.ChatMarkedWordsViewUI,r=t.config.BlendCfg,n=t.common.CustomList,a=i,__extends(o,a),o.prototype.initialize=function(){a.prototype.initialize.call(this),this.centerX=0,this.bottom=181,this._list=new n,this._list.width=490,this._list.height=323,this._list.hCount=1,this._list.itemRender=e.ChatMarkedWordsItem,this._list.x=10,this._list.y=12,this._list.spaceY=5,this.addChild(this._list)},o.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoEvt(Laya.stage,"mousedown",this,this.stageClickHandler)},o.prototype.onOpened=function(){a.prototype.onOpened.call(this);for(var t=r.instance.chatMarkedWords,e=[],i=[],n=0,s=t.length;n<s;n++)e.push(n);for(n=0;n<8;n++){var o=Math.floor(Math.random()*e.length);i.push([t[e[o]],e[o]]),e.splice(o,1)}this._list.datas=i},o.prototype.stageClickHandler=function(t){t.target instanceof e.ChatMarkedWordsItem||t.target===this._list||t.target===this||this.close()},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),a.prototype.destroy.call(this,t)},s=o,e.ChatMarkedWordsPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.chat||(t.chat={}),i=e.ChatJiuzhouPanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._selectBtn=this.marryBtn,this._selectBtnHandler=this.marryHandler,this._type=5,this._messageType="MARRY_MESSAGE_UPDATE"},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ChatModel.instance.currChatChannel=5,GlobalData.dispatcher.event("SELECT_CHAT_CHANNEL"),this.marryRP.visible=!1},s.prototype.getListDatas=function(){return e.ChatModel.instance.marryChatRecord},n=s,e.ChatMarryPanel=n}(modules=modules||{}),function(t){var n,e,i,s,o,a,r,l,h,c,p,u,d,m,f;function g(){return null!==e&&e.apply(this,arguments)||this}n=t.chat||(t.chat={}),i=ui.ChatFaceViewUI,s=t.common.CustomList,o=t.common.BtnGroup,a=t.config.ChatFaceCfg,r=t.vip.VipModel,l=t.bag.BagModel,h=t.config.ItemEquipCfg,c=t.config.ItemMaterialCfg,p=t.config.ItemRuneCfg,u=Laya.Handler,d=t.notice.SystemNoticeManager,m=t.config.ItemStoneCfg,e=i,__extends(g,e),g.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=-3,this.bottom=185,this._list=new s,this._list.width=600,this._list.x=100,this._list.spaceY=10,this._list.spaceX=12,this._list.itemRender=n.ChatFaceItem,this.addChild(this._list),this._itemList=new s,this._itemList.spaceX=2,this._itemList.spaceY=2,this._itemList.width=600,this._itemList.height=315,this._itemList.x=100,this._itemList.y=20,this._itemList.hCount=6,this._itemList.itemRender=n.ChatSendItem,this.addChild(this._itemList),this._tab=new o,this._tab.canSelectHandler=u.create(this,this.canSelectHandler,null,!1),this._tab.setBtns(this.btnGroup_0,this.btnGroup_1,this.btnGroup_2,this.btnGroup_3),this._tab.selectedIndex=0,this._facePkgList=s.create("v",0,0,this.listBox.width,this.listBox.height,n.ChatFacePkgItem,10,3),this._itemList.spaceX=10,this._itemList.spaceY=10,this.listBox.addChild(this._facePkgList),t.redBag.RedBagUtils.getActionopen()?this.pImg.x=437:this.pImg.x=497},g.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._tab,"change",this,this.updateView),this.onAutoGlobalEvt("VIP_UPDATE",this,this.updateVipLv),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView)},g.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},g.prototype.canSelectHandler=function(t){var e=PlayerModel.instance.level;if(1!=t&&2==t){var i=n.ChatModel.instance.getUnlockLv(3);if(e<i)return d.instance.addNotice("等级达到"+i+"解锁",!0),!1}return!0},g.prototype.updateView=function(){if(-1!==this._tab.oldSelectedIndex&&(this._tab.oldSelectedBtn.skin="chat/btn_lt_bqbtn_0.png"),this._tab.selectedBtn.skin="chat/btn_lt_bqbtn_1.png",this.hintBox.visible=!1,this._itemList.visible=this._list.visible=!1,this._list.height=315,this._list.y=20,this.listBox.visible=!1,0==this._tab.selectedIndex){this._list.visible=!0;var t=a.instance.getFaceCfgsByType(0);this._list.hCount=10,this._list.datas=t}else if(1==this._tab.selectedIndex){this.updateVipLv();var e=n.ChatModel.instance.maxExpertFaceTime-n.ChatModel.instance.sendVipFaceTime;this.timeTxt.text=e+"/"+n.ChatModel.instance.maxExpertFaceTime,this.timeTxt.color=0==e?"#ff3e3e":"#0ecf09",this._list.visible=!0,t=a.instance.getFaceCfgsByType(1),this.v4Txt.visible&&(this._list.height=277,this._list.y=60),this._list.hCount=8,this._list.datas=t}else if(2==this._tab.selectedIndex){this._itemList.visible=!0;var i=[];i=(i=(i=(i=(i=i.concat(this.judgeItem(1))).concat(this.judgeItem(0))).concat(this.judgeItem(5))).concat(this.judgeItem(2))).concat(this.judgeItem(3)),this._itemList.datas=i}else 3==this._tab.selectedIndex&&(t=a.instance.getFaceCfgsByType(2),this.updateVipLv(),this.listBox.visible=!0,r.instance.vipLevel<n.ChatModel.instance.chatVipPkg?(this._facePkgList.y=0,this._facePkgList.height=this.listBox.height):(this._facePkgList.y=-40,this._facePkgList.height=this.listBox.height+38),this._facePkgList.datas=t,e=n.ChatModel.instance.chatFacePKgMax-n.ChatModel.instance.sendVipPkgcnt,this.timeTxt.text=e+"/"+n.ChatModel.instance.chatFacePKgMax,this.timeTxt.color=0==e?"#ff3e3e":"#0ecf09")},g.prototype.judgeItem=function(t){for(var e=[],i=l.instance.getItemsByBagId(t),n=0,s=i.length;n<s;n++){var o=i[n][0],a=void 0;if(2==t)a=m.instance.getItemCfgById(o)[8];else if(5==t){var r=1e4*(1e-4*o>>0);a=p.instance.getCfgById(r)[6]}else 0==t?a=c.instance.getItemCfgById(o)[14]:1==t?a=h.instance.getItemCfgById(o)[16]:3==t&&(a=c.instance.getItemCfgById(o)[14]);a&&e.push(i[n])}return e},g.prototype.updateVipLv=function(){var t=r.instance.vipLevel;3!=this._tab.selectedIndex?(this.v4Txt.visible=this.hintBox.visible=!(t>=n.ChatModel.instance.minSendVipFaceLv),this.v4Txt.text="SVIP"+n.ChatModel.instance.minSendVipFaceLv+"无限制",this.msc.text="剩余发送高级表情次数:"):(this.v4Txt.visible=this.hintBox.visible=!(t>=n.ChatModel.instance.chatVipPkg),this.v4Txt.text="SVIP"+n.ChatModel.instance.chatVipPkg+"无限制",this.msc.text="剩余发送表情包次数:")},g.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._itemList=this.destroyElement(this._itemList),this._tab=this.destroyElement(this._tab),e.prototype.destroy.call(this,t)},f=g,n.ChatFacePanel=f}(modules=modules||{}),function(e){var i,t,n,s,o,a;function r(){return t.call(this)||this}i=e.activityPreview||(e.activityPreview={}),n=ui.ActivityPreViewUI,s=e.common.CommonUtil,o=Laya.Point,t=n,__extends(r,t),r.prototype.initialize=function(){t.prototype.initialize.call(this),this.right=15,this.bottom=680,this.closeByOthers=!1,this.layer=3},r.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("ACTIVITY_PRE_SCENE_UPDATE",this,this.updateState),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.updateState),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),this.onAutoClick(this,this,this.clickHandler)},r.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateState(),this.setActionPreviewPos()},r.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview)},r.prototype.setPosActionPreview=function(){o.TEMP.setTo(this.width/2,this.height/2);var t=this.localToGlobal(o.TEMP,!0);e.action_preview.ActionPreviewModel.instance._posSprite.set(10000003,t)},r.prototype.close=function(){t.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.updateState=function(){if(this._state=i.ActivityPreModel.instance.sceneState,this._state){var t=this._state[0],e=this._state[2];this._time=this._state[3],1===e?(this.tipTxt.text="即将开启",this.tipTxt.color=s.getColorByQuality(5),Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):2===e?(this.tipTxt.text="正在进行中",this.tipTxt.color=s.getColorByQuality(1),Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):this.close(),this.iconImg.skin="assets/icon/activity_preview/"+t+".png"}else this.close()},r.prototype.loopHandler=function(){this.timeTxt.text=s.timeStampToHHMMSS(this._time),this._time<GlobalData.serverTime&&Laya.timer.clear(this,this.loopHandler)},r.prototype.clickHandler=function(){if(this._state){var t=this._state[0];14===t?WindowManager.instance.open(158):16===t?e.ladder.LadderCtrl.instance.canOpenPanel():17===t?WindowManager.instance.open(194):21===t?WindowManager.instance.open(224):22===t?WindowManager.instance.open(194):23===t?WindowManager.instance.open(227):15===t?WindowManager.instance.open(194):38===t?WindowManager.instance.open(617):39===t?WindowManager.instance.open(865):32===t?e.ladder.LadderCtrl.instance.canOpenPanel():44===t?WindowManager.instance.open(1175):48===t?WindowManager.instance.open(1259):50===t?WindowManager.instance.open(1292):51===t?WindowManager.instance.open(1361):42===t||43===t?e.faction.FactionModel.instance.hasFaction?WindowManager.instance.open(1043):WindowManager.instance.open(262):56===t&&WindowManager.instance.open(1413)}},a=r,i.ActivityPrePanel=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("scene_homestead"),e=0,i=t.length;e<i;e++){var n=t[e][1],s=t[e][2];this._tab[n]||(this._tab[n]={}),this._tab[n][s]=t[e]}},n.prototype.getCfgByLvAndWheel=function(t,e){var i=this._tab[t];return i?i[e]:null},i=n,e.SceneHomesteadCfg=i}(modules=modules||{}),function(p){var s,e,t,i,o,a,u,d,m,f,g,y,n,r,l;function h(){return e.call(this)||this}s=p.scene||(p.scene={}),t=ui.GatherViewUI,i=Laya.Sprite,o=p.config.SceneCfg,a=p.config.SceneCopyNineCfg,u=p.config.NpcCfg,d=game.GameCenter,m=p.npc.NpcModel,f=p.config.BlendCfg,g=p.day_drop_treasure.DayDropTreasureModel,y=p.config.SceneHomesteadCfg,n=p.npc.NpcCtrl,r=p.common.CustomClip,e=t,__extends(h,e),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._handClip=this.destroyElement(this._handClip),e.prototype.destroy.call(this,t)},h.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.bottom=400,this.closeByOthers=!1,this._maskSpr=new i,this._maskSpr.pos(71,71,!0),this.lightCircle.mask=this._maskSpr,this.layer=3,this._handClip=r.createAndPlay("assets/effect/xianfu/hand.atlas","hand",4),this.addChildAt(this._handClip,3),this._handClip.pos(26,31,!0),r.thisStop(this._handClip)},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.clickHandler),this.onAutoGlobalEvt("SCENE_NPC_GATHER_STATE_UPDATE",this,this.updateGatherState),this.onAutoGlobalEvt("SCENE_TRIGGERED_NPC_UPDATE",this,this.updateTriggeredNpc)},h.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._objId=t||m.instance.triggeredNpcId,m.instance.triggeredNpcId=this._objId},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.grayImg.visible=this.timeText.visible=!1,this.descTxt.color="#50ff28",this.timeText.text="",this.mouseEnabled=!0,r.thisStop(this._handClip),this.img.visible=!0;var t=s.SceneModel.instance.enterScene[0];2121==t?this.bottom=520:2402==t||2403==t?this.bottom=549:2901==t?this.bottom=450:4401==t?(this.bottom=570,r.thisPlay(this._handClip),this.img.visible=!1):this.bottom=400,this.updateTriggeredNpc()},h.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.disappearLoopHandler),Laya.timer.clear(this,this.loopHandler),Laya.timer.clear(this,this.loogOther),this._isHaveOwn=0,this.reset(),m.instance.isGathering&&n.instance.gatherInterrupt(),p.team_warfare.TeamWarfareModel.instance._clickGathering=!1},h.prototype.setDescTxt=function(t){this.descTxt.text=t,this.descImg.width=this.descTxt.textWidth+40,this.descImg.visible=""!=this.descTxt.text},h.prototype.disappearLoopHandler=function(t){this.setDescTxt("宝箱于"+p.common.CommonUtil.timeStampToMMSS(t)+"后消失"),t<GlobalData.serverTime&&this.close()},h.prototype.clickHandler=function(){if(1===this._func)PlayerModel.instance.selectTarget(3,this._occ);else{if(m.instance.isGathering)return;this._totalTime=0;var t=s.SceneModel.instance.enterScene[0],e=o.instance.getCfgById(t)[7];if(14===e)this._totalTime=a.instance.getCfgByLevel(9)[7],this.startGather();else if(37===e)this._isHaveOwn;else if(56===e&&!p.team_warfare.TeamWarfareModel.instance._clickGathering){var i=d.instance.getRole(m.instance.triggeredNpcId);if(null==i)return void this.close();if(0!=p.team_warfare.TeamWarfareModel.instance.gatherOcc)return void CommonUtil.noticeError(0,"正在携带炎晶返回出生点，无法进行其他操作");p.team_warfare.TeamWarfareModel.instance._clickGathering=!0;var n=u.instance.getCfgById(i.property.get("occ"));console.log("点击操作采集采集：  "+n[0]),PlayerModel.instance.selectTarget(3,n[0])}}},h.prototype.reset=function(){this._maskSpr.graphics.clear(),this._maskSpr.graphics.drawCircle(0,360,71,"#FF0000"),this.pointImg.pos(71,14,!0),this.lightCircle.skin="gather/progress_jtzd_jdt_1.png",this._isHaveOwn=0},h.prototype.loopHandler=function(){if(GlobalData.serverTime<this._startTime+this._totalTime){7!==this._func&&8!==this._func&&9!==this._func||(this.grayImg.visible=this.timeText.visible=!0,this.timeText.text=CommonUtil.msToSSMS(this._startTime+this._totalTime-GlobalData.serverTime),this.setDescTxt(this.getPlayerIngTipsStr()),this.descTxt.color="#50ff28",this.lightCircle.skin="gather/progress_jtzd_jdt_1.png"),this._maskSpr.graphics.clear();var t=(GlobalData.serverTime-this._startTime)/this._totalTime*360;this._maskSpr.graphics.drawPie(0,0,71,-90,-90+t,"#FF0000"),t=t*Math.PI/180,this.pointImg.pos(71+57*Math.sin(t),71-57*Math.cos(t),!0)}else console.log("GlobalData.serverTime :"+GlobalData.serverTime+" this._startTime:"+this._startTime+" this._totalTime:"+this._totalTime),this.reset(),this.grayImg.visible=this.timeText.visible=!1,Laya.timer.clear(this,this.loopHandler)},h.prototype.loogOther=function(){if(GlobalData.serverTime<this._totalTime){this.grayImg.visible=this.timeText.visible=!0,this.timeText.text=CommonUtil.timeStampToSSMS(this._totalTime),this.lightCircle.skin="gather/progress_ssd_hy.png",this.setDescTxt(this.getStartPlayerIngTipsStr()),this.descTxt.color="#ff3e3e",this._maskSpr.graphics.clear();var t=360*(1-(this._totalTime-GlobalData.serverTime)/this._startTime);this._maskSpr.graphics.drawPie(0,0,71,-90,-90+t,"#FF0000"),t=t*Math.PI/180,this.pointImg.pos(71+57*Math.sin(t),71-57*Math.cos(t),!0)}else this.reset(),this.grayImg.visible=this.timeText.visible=!1,Laya.timer.clear(this,this.loogOther)},h.prototype.startGather=function(){n.instance.gather(m.instance.triggeredNpcId,0),this.setTipsUI()},h.prototype.setTipsUI=function(){this.setDescTxt(this.getPlayerIngTipsStr()),0<this._totalTime?(this._startTime=GlobalData.serverTime,Laya.timer.frameLoop(1,this,this.loopHandler),this.loopHandler()):Laya.timer.clear(this,this.loopHandler)},h.prototype.updateGatherState=function(){if(m.instance.isGathering){if(56===s.SceneUtil.currScene){var t=p.team_warfare.TeamWarfareModel.instance.tableCollectionPosByOcc[this._occ];this._totalTime=t[3],this.setTipsUI()}}else this.close()},h.prototype.updateTriggeredNpc=function(){this.setDescTxt(this.getStartTipsStr()),this._occ=0;var t=d.instance.getRole(m.instance.triggeredNpcId);if(null!=t){this.grayImg.visible=this.timeText.visible=!1,this._occ=t.property.get("occ");var e=u.instance.getCfgById(this._occ);if(this._func=e[6]||0,1===this._func){var i=t.property.get("liveTime");Laya.timer.loop(1e3,this,this.disappearLoopHandler,[i]),this.disappearLoopHandler(i)}else if(5===this._func)this._occ===g.instance.xianLingId?this._totalTime=f.instance.getCfgById(28003)[1][0]:this._occ===g.instance.xianFaId&&(this._totalTime=f.instance.getCfgById(28003)[1][1]),this.startGather();else if(6==this._func){var n=p.xianfu.XianfuModel.instance.xianfuEvent,s=n[0],o=p.xianfu.XianfuModel.instance.fengshuiLv,a=n[3],r=y.instance.getCfgByLvAndWheel(o,a);4==s?this._totalTime=r[6][5]:5==s&&(this._totalTime=r[7][5]),this.startGather()}else if(7===this._func){if(m.instance.isGathering)return;this._isHaveOwn=0,(l=p.beast_boss.BeastBossModel.instance.tableIdToType[this._occ])&&(this._totalTime=l[1],this.startGather())}else if(8===this._func){if(m.instance.isGathering)return;var l;this._totalTime=p.beast_boss.BeastBossModel.instance.isXiYouPlayer,(c=t.property.get("own"))&&c!==PlayerModel.instance.actorId?(this.mouseEnabled=!1,this._totalTime=p.beast_boss.BeastBossModel.instance.isXiYouPlayer,this._totalTime>GlobalData.serverTime?(this._startTime=this._totalTime-GlobalData.serverTime,Laya.timer.frameLoop(1,this,this.loogOther)):Laya.timer.clear(this,this.loogOther),p.halo.HaloModel.instance.haloOpen&&p.halo.HaloModel.instance.isForceEnter&&GlobalData.dispatcher.event("HALO_AUTO_BEAST_SELECT_TARGET",!0)):(l=p.beast_boss.BeastBossModel.instance.tableIdToType[this._occ])&&(this.timeText.visible=!0,this._totalTime=l[1],this.startGather())}else if(9===this._func){var h=p.union_war.UnionWarModel.instance.tableCollectionPosByOcc[this._occ];this._totalTime=1e3*h[2],console.log("仙盟争霸旗帜占领需要时间his._totalTime："+this._totalTime),(c=t.property.get("own"))&&c!==PlayerModel.instance.actorId?(this.mouseEnabled=!1,Laya.timer.clear(this,this.loogOther)):h&&(this.timeText.visible=!0,this.startGather())}else if(10===this._func){var c;h=p.team_warfare.TeamWarfareModel.instance.tableCollectionPosByOcc[this._occ],this._totalTime=h[3],console.log("战队逐鹿 帜占领需要时间his._totalTime："+this._totalTime),(c=t.property.get("own"))&&c!==PlayerModel.instance.actorId?(this.mouseEnabled=!1,Laya.timer.clear(this,this.loogOther)):h&&(this.timeText.visible=!0,p.team_warfare.TeamWarfareModel.instance._clickGathering&&m.instance.isGathering&&this.setTipsUI())}else this.setDescTxt(this.getStartTipsStr())}},h.prototype.getStartTipsStr=function(){var t="点击采集";return p.union_war.UnionWarModel.instance.ispreliminaryFactionWar()&&(t="点击夺取"),t},h.prototype.getStartPlayerIngTipsStr=function(){var t="其他玩家采集中";return(p.union_war.UnionWarModel.instance.ispreliminaryFactionWar()||p.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar())&&(t="敌方成员夺取中"),t},h.prototype.getPlayerIngTipsStr=function(){var t="采集中";return p.union_war.UnionWarModel.instance.ispreliminaryFactionWar()&&(t="夺取中"),t},l=h,s.GatherPanel=l}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.rune||(t.rune={}),n=ui.CommonTxtAlertUI,s=t.chat.ChatModel,o=t.common.CommonUtil,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),o.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24),this.contentTxt.style.valign="middle",this.contentTxt.style.lineHeight=28,this.contentTxt.mouseEnabled=!1,this.contentTxt.innerHTML="是否确认屏蔽该玩家聊天信息并将该玩家加入黑名单?",this.titleTxt.text="信息提示"},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoClick(this.cancelBtn,this,this.close)},r.prototype.okBtnHandler=function(){s.instance.blackListOpt=1,ChatCtrl.instance.blackListOpt([this._playerInfo,1]),this.close()},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._playerInfo=t},a=r,e.JoinBlackListHintAlert=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.nine||(t.nine={}),n=Laya.Image,s=Laya.HTMLDivElement,i=BaseView,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.top=260,this.closeByOthers=!1,this._bgImg=new n("common_sg/txtbg_common_tipsbg.png"),this._bgImg.sizeGrid="10,90,10,90",this.addChild(this._bgImg),this.width=this._bgImg.width=640,this.height=this._bgImg.height=44,this._txt=new s,this.addChild(this._txt),this._txt.mouseEnabled=!1,this._txt.size(560,24),this._txt.pos(40,10,!0),CommonUtil.setHTMLPro(this._txt,"#FFFFFF","SimHei",24,"center"),this._txt.innerHTML='战斗开始，点击下方<span style="color:#EA8706">搜敌按钮</span>或<span style="color:#EA8706">玩家列表</span>发起攻击！'},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.once(4e3,this,this.close)},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.close)},o=a,e.NineEnterTipPanel=o}(modules=modules||{}),function(s){var d,e,t,i,m,f,g,n,y,o,a,r,l,p,u,h;function c(){return null!==e&&e.apply(this,arguments)||this}d=s.illusion||(s.illusion={}),t=ui.IllusionViewUI,i=s.common.CommonUtil,m=s.pet.PetModel,f=s.config.PetMagicShowCfg,g=s.config.ExteriorCfg,n=s.bag.BaseItem,y=s.bag.BagModel,o=s.bag.BagUtil,a=s.common.CustomClip,r=s.common.AvatarClip,l=s.common.ListWithArrowCtrl,p=s.ride.RideModel,u=s.config.RideMagicShowCfg,e=t,__extends(c,e),Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),this._modelClip=this.destroyElement(this._modelClip),this._listCtrl=this.destroyElement(this._listCtrl),this.observationItem=this.destroyElement(this.observationItem),Laya.timer.clear(this,this.setBtnVisible),e.prototype.destroy.call(this,t)},c.prototype.onEvt=function(){this.onAutoClick(this.closeBtn,this,this.openJinjiePanel),e.prototype.onEvt.call(this),this.onAutoGlobalEvt("PET_UPDATE",this,this.updatePetInfo),this.onAutoGlobalEvt("PET_INITED",this,this.updatePetInfo),this.onAutoGlobalEvt("PET_HUANHUA_SHOWID",this,this.selectHandler),this.onAutoGlobalEvt("RIDE_HUANHUA_SHOWID",this,this.selectHandler),this.onAutoGlobalEvt("PET_HUANHUA_SHOWID",this,this.updatePetInfo),this.onAutoGlobalEvt("RIDE_HUANHUA_SHOWID",this,this.updatePetInfo),this.onAutoGlobalEvt("RIDE_UPDATE",this,this.updatePetInfo),this.onAutoClick(this.tipsBtn,this,this.tipsHandler),this.onAutoClick(this.upgradeBtn,this,this.upgrade),this.onAutoClick(this.switchBtn,this,this.switchHandler),this.onAutoClick(this.totalAttrTxt,this,this.totalAttrHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoClick(this.masterBtn,this,function(){WindowManager.instance.open(910)}),this.regAutoRP(this.illusionRP,["petIllusionRP"]),this.regAutoRP(this.masterRP,["petIllusionMasterRP"]),this._listCtrl.addListeners()},c.prototype.offEvt=function(){this._listCtrl.removeListeners(),e.prototype.offEvt.call(this)},c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._nameTxts=[this.nameTxt1,this.nameTxt2,this.nameTxt3,this.nameTxt4,this.nameTxt5,this.nameTxt6],this._valueTxts=[this.valueTxt1,this.valueTxt2,this.valueTxt3,this.valueTxt4,this.valueTxt5,this.valueTxt6],this._upImgs=[this.upImg1,this.upImg2,this.upImg3,this.upImg4,this.upImg5,this.upImg6],this._upTxts=[this.upTxt1,this.upTxt2,this.upTxt3,this.upTxt4,this.upTxt5,this.upTxt6],this.totalAttrTxt.underline=!0,this._list=s.common.SimpleList.create(d.IllusionItem,100,125,2,1,30,0),this._list.width=490,this._list.height=142,this._list.pos(114,762,!0),this.addChild(this._list),this._listCtrl=new l(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=this._list.width+this._list.spaceX,this._bagItem=new n,this.addChild(this._bagItem),this._bagItem.pos(320,900,!0),this._bagItem.scale(.8,.8),this._btnClip=a.create("assets/effect/btn_light.atlas","btn_light",16),this.upgradeBtn.addChild(this._btnClip),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this._modelClip=r.create(1024,1024,1024),this.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.y=475,this._curDistance=0},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),m.instance.panelType=1,this._btnClip.play(),this._selectedId=-1,this._tiaoZhuanItemId?this.selectQualityById(this._tiaoZhuanItemId):this.setListIndex(),this.updatePetInfo(),this._tiaoZhuanItemId=null,this._list.scrollTo(this._curDistance),Laya.timer.frameLoop(1,this,this.setBtnVisible)},c.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._tiaoZhuanItemId=t},c.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.setBtnVisible)},c.prototype.setListIndex=function(){var t=f.instance.showIds;this._maxDistance=130*t.length-520;for(var e=void 0,i=0,n=(this._list.datas=t).length;i<n;i++){var s=0,o=m.instance.getShowInfoById(t[i]);if(o&&(s=o[1]),f.instance.has(t[i],s+1)){var a=f.instance.getDataByIdLvField(t[i],s,1);if(y.instance.getItemCountById(a[0])>=a[1]){e=i,this._curDistance=130*i;break}}}if(null==e)for(i=0,n=t.length;i<n;i++){var r=t[i];if(-1==d.IllusionModel.instance.magicShowId||0==d.IllusionModel.instance.magicShowId){if(m.instance.getShowInfoById(r)){e=i,this._curDistance=130*i;break}}else if(d.IllusionModel.instance.magicShowId==r){e=i,this._curDistance=130*i;break}}this._list.selectedIndex=null==e?0:e},c.prototype.selectQualityById=function(t){var e=f.instance.showIds;this._maxDistance=130*e.length-520,this._list.datas=e;for(var i=this._list.selectedIndex=0,n=e.length;i<n;i++){var s=0,o=m.instance.getShowInfoById(e[i]);if(o&&(s=o[1]),f.instance.has(e[i],s+1)&&f.instance.getDataByIdLvField(e[i],s,1)[0]==t){this._list.selectedIndex=i,this._curDistance=130*i;break}}},c.prototype.openJinjiePanel=function(){WindowManager.instance.open(124)},c.prototype.selectShowModel=function(){var t=g.instance.getCfgById(this._list.selectedData);this._modelClip.reset(this._selectedId),this._modelClip.setActionType("show",0),this._modelClip.avatarScale=t[10]?t[10]:1,this._modelClip.avatarRotationX=t[6],this._modelClip.avatarRotationY=t[7],this._modelClip.avatarY=t[9],this._modelClip.avatarX=t[8],this.observationItem.data=[[this._modelClip,Math.round(this._selectedId/1e3)]]},c.prototype.updatePetInfo=function(){this._info=m.instance.magicShow;var t=f.instance.showIds;if(this._info){this.powerNum.value=""+this._info[1];var e=this._list.scrollPos;this._list.datas=t,this._list.scrollTo(e)}else this.powerNum.value="0";this.selectHandler()},c.prototype.selectHandler=function(){var t=this._list.selectedData;if(void 0!==t){this._selectedId=t;var e=m.instance.getShowInfoById(t),i=e?e[1]:0;if(f.instance.has(t,i+1)){this.fullLvImg.visible=!1,this._bagItem.visible=this.upgradeBtn.visible=!0;var n=f.instance.getDataByIdLvField(t,i,1),s=n[0],o=n[1];this._bagItem.dataSource=[s,o,0,null];var a=y.instance.getItemCountById(s);this._countDiff=a-o,this._btnClip.visible=0<=this._countDiff;var r="#ff7462";a<o||(r="#ffffff"),this._bagItem.setNum(a+"/"+o,r)}else this.fullLvImg.visible=!0,this._bagItem.visible=this.upgradeBtn.visible=!1;var l=g.instance.getCfgById(t);if(this.petNameTxt.text=l[2].toString(),d.IllusionModel.instance.magicShowId==this._selectedId?(this.useImg.visible=!0,this.switchBtn.visible=!1):(this.useImg.visible=!1,this.switchBtn.visible=!0),0===i)this.showTip(t),this.tipBox.visible=this.noActImg.visible=!0,this.switchBtn.visible=this.rankMsz.visible=this.rankNumMsz.visible=!1,this.upgradeBtn.label="激活";else{this.tipBox.visible=this.noActImg.visible=!1,this.rankMsz.visible=this.rankNumMsz.visible=!0,this.upgradeBtn.label="升阶",this.rankNumMsz.value=i.toString();var h=i.toString().length,c=22*h+this.rankNumMsz.spaceX*h,p=5+c+this.rankMsz.width,u=(this.width-p)/2;this.rankNumMsz.x=u,this.rankMsz.x=u+c+5}this.selectShowModel(),this.setAttrs(t,i)}},c.prototype.setAttrs=function(t,e){var i=f.instance.getDataByIdLvField(t,e+1,3),n=f.instance.getDataByIdLvField(t,e,3);s.common.AttrUtil.attrTxts(n,i,this._nameTxts,this._valueTxts,this._upImgs,this._upTxts)},c.prototype.showTip=function(t){for(var e=f.instance.getDataByIdLvField(t,Number.MIN_VALUE,2),i="",n="",s=e.length,o=0,a=e.length;o<a;o++)"#"!==e[o]?o<s==1?i+=e[o]:n+=e[o]:(n+="+",s=o);this.tipTxt_1.text=i,this.tipTxt_4.text=n;var r=15;for(o=0,a=this.tipBox._childs.length;o<a;o++)r+=this.tipBox._childs[o].textWidth;var l=(this.tipBox.width-r)/2;this.tipTxt_1.x=l,this.tipTxt_2.x=this.tipTxt_1.x+this.tipTxt_1.textWidth+5,this.tipTxt_3.x=this.tipTxt_2.x+this.tipTxt_2.textWidth+5,this.tipTxt_4.x=this.tipTxt_3.x+this.tipTxt_3.textWidth+5},c.prototype.totalAttrHandler=function(){this._info&&WindowManager.instance.openDialog(26,["灵宠幻化总属性",this._info[1],this._info[2],f.instance.attrIndices])},c.prototype.tipsHandler=function(){i.alertHelp(20004)},c.prototype.upgrade=function(){0<=this._countDiff?(d.IllusionCtrl.instance.riseMagicShow([this._selectedId]),d.IllusionModel.instance._magicSelectId=this._selectedId):o.openLackPropAlert(this._bagItem.itemData[0],-this._countDiff)},c.prototype.switchHandler=function(){var t=m.instance.getShowInfoById(this._selectedId);t&&0<t[1]&&d.IllusionCtrl.instance.changeMagicShow(this._selectedId)},c.prototype.setBtnVisible=function(){if(this.nextRp.visible=this.preRp.visible=this.nextBtn.visible=this.preBtn.visible=!1,this.preBtn.visible=0<this._list.scrollPos&&4<this._list.datas.length,this.nextBtn.visible=this._list.scrollPos<this._maxDistance&&4<this._list.datas.length,this.preBtn.visible&&0<this._list.startShowIndex){for(var t=[],e=0;e<this._list.datas.length;e++){var i=this._list.datas[e];e<this._list.startShowIndex&&t.push(i)}this.getHaveRp(t,this.preRp)}else this.preRp.visible=!1;var n=this._list.startShowIndex+4;if(this.nextBtn.visible&&n<this._list.datas.length){for(t=[],e=n;e<this._list.datas.length;e++)i=this._list.datas[e],t.push(i);this.getHaveRp(t,this.nextRp)}else this.nextRp.visible=!1},c.prototype.getHaveRp=function(t,e){e.visible=!1;for(var i=0;i<t.length;i++){var n=t[i],s=0,o=m.instance.panelType,a=0===o?p.instance.getShowInfoById(n):m.instance.getShowInfoById(n);a&&(s=a[1]);var r=0===o?u.instance.getDataByIdLvField(n,s,1):f.instance.getDataByIdLvField(n,s,1),l=0===o?!!u.instance.has(n,s+1):f.instance.has(n,s+1),h=r[0],c=r[1];if(0==s){if(y.instance.getItemCountById(h)>=c)return void(e.visible=!0)}else if(l&&y.instance.getItemCountById(h)>=c)return void(e.visible=!0)}},h=c,d.PetIllusionPanel=h}(modules=modules||{}),function(o){var t,e,i,s,a,n;function r(){return null!==e&&e.apply(this,arguments)||this}t=o.activity_all||(o.activity_all={}),i=o.common.CustomList,s=o.activity_all.ActivityAllModel,a=o.config.ActivityAllCfg,e=ui.ActivityAllViewUI,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new i,this._list.width=630,this._list.height=1004,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=t.ActivityAllItem,this._list.x=45,this._list.y=120,this.addChildAt(this._list,1)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateList()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.updateList),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.updateList),this.onAutoGlobalEvt("XIANFU_EVENT_UPDATE",this,this.updateList),this.onAutoGlobalEvt("MISSION_UPDATE_LV",this,this.updateList),this.onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.updateList),this.onAutoGlobalEvt("UPDATE_SERVER_DAY",this,this.updateList),this.onAutoGlobalEvt("VIP_UPDATE",this,this.updateList),this.onAutoGlobalEvt("PLAYER_BASE_ATTR_UPDATE",this,this.updateList),this.onAutoGlobalEvt("RUNE_COPY_UPDATE",this,this.updateList),this.onAutoGlobalEvt("BORN_LV_UPDATE",this,this.updateList),this.onAutoGlobalEvt("FLY_UP_UPDATA",this,this.updateList)},r.prototype.overSort=function(t,e){var i=s.instance.getState(t),n=s.instance.getState(e);return i!==n?n-i:t[13]-e[13]},r.prototype.updateList=function(){var t=a.instance.cfgs;if(t&&0<t.length){for(var e=o.peakDuel.PeakDuelCtrl.instance.isOpen?16:32,i=t.concat(),n=0,s=i.length;n<s;n++)if(i[n][7]===e){i.splice(n,1);break}i.sort(this.overSort),this._scrollPosOld1=this._list.scrollPos,this._list.datas=i,this._list.scrollPos=this._scrollPosOld1}},n=r,t.ActivityAllPanel=n}(modules=modules||{}),function(t){var s,e,i,n,o,a;function r(){return e.call(this)||this}s=t.day_drop_treasure||(t.day_drop_treasure={}),i=ui.DayDropTreasureRightViewUI,n=t.dungeon.DungeonModel,o=t.common.CommonUtil,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.right=0,this.bottom=464,this.rewardTxt.underline=!0,this.closeByOthers=!1,this.layer=3},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("DAY_DROP_TREASURE_GATHERCOUNT_UPDATE",this,this.upDateReward),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.loopHandler),this.onAutoClick(this.rewardTxt,this,this.rewardTxtHandler)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.DayDropTreasureCtrl.instance.getPayRewardInfo(),this.setValueTxt1(),this.updateTime(),this.loopHandler(),this.adaptiveaText()},r.prototype.loopHandler=function(){this.valueTxt.text=o.timeStampToSS(s.DayDropTreasureModel.instance.nextRefreshTime)+"秒";var t=n.instance.getCopySceneStateByType(17);if(null!=t){var e=t[3];this.valueTxt2.text=""+o.timeStampToMMSS(e)}},r.prototype.updateTime=function(){Laya.timer.loop(1e3,this,this.loopHandler)},r.prototype.setValueTxt1=function(){var t=s.DayDropTreasureModel.instance.gatherCount;t>=s.DayDropTreasureModel.instance.maxNum?(t=s.DayDropTreasureModel.instance.maxNum,this.valueTxt1.color="#ff3e3e"):this.valueTxt1.color="#55ff28",this.valueTxt1.text=t+"/"+s.DayDropTreasureModel.instance.maxNum},r.prototype.adaptiveaText=function(){this.valueTxt.x=this.nameTxt.x+this.nameTxt.width,this.valueTxt1.x=this.nameTxt1.x+this.nameTxt1.width,this.valueTxt2.x=this.nameTxt2.x+this.nameTxt2.width},r.prototype.rewardTxtHandler=function(){for(var t=s.DayDropTreasureModel.instance.rewardArr,e=[],i=0;i<t.length;i++){var n=[t[i][0],t[i][1],0,null];e.push(n)}WindowManager.instance.openDialog(1350,e)},r.prototype.upDateReward=function(){this.setValueTxt1(),WindowManager.instance.isOpened(212)&&(WindowManager.instance.close(212),this.rewardTxtHandler())},r.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},a=r,s.DayDropTreasureRightPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c;function p(){var t=i.call(this)||this;return t._occ=0,t}e=t.day_drop_treasure||(t.day_drop_treasure={}),n=t.notice.SystemNoticeManager,s=t.day_drop_treasure.DayDropTreasureModel,o=ui.DayDropTreasureBottomViewUI,a=t.npc.NpcCtrl,r=t.npc.NpcModel,l=game.GameCenter,h=t.common.CommonUtil,i=o,__extends(p,i),p.prototype.initialize=function(){i.prototype.initialize.call(this),this.zOrder=-1,this.centerX=0,this.bottom=219,this.closeByOthers=!1,this.layer=3},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.xianLingEarningsBtn,this,this.xianLingEarningsBtnHandler),this.onAutoClick(this.xianFaEarningsBtn,this,this.xianFaEarningsBtnHandler),this.onAutoClick(this.xianFaBtn,this,this.xianFaBtnHandler),this.onAutoClick(this.xianLingBtn,this,this.xianLingBtnHandler),this.onAutoGlobalEvt("DAY_DROP_TREASURE_UADATETIME_UPDATE",this,this.gatherEndUpdateHandler),this.onAutoGlobalEvt("SCENE_GATHER_END",this,this.gatherEndHandler),this.onAutoGlobalEvt("DAY_DROP_TREASURE_CAIJILOSE",this,this.caijiLose)},p.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._xianLingTipsImgTween&&(this._xianLingTipsImgTween.stop(),this._xianLingTipsImgTween=null),this._xianFaTipsImgTween&&(this._xianFaTipsImgTween.stop(),this._xianFaTipsImgTween=null),this._xianLingTipsImgEff&&this._xianLingTipsImgEff.stop(),this._xianFaTipsImgEff&&this._xianFaTipsImgEff.stop()},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.xianLingTipsImg.visible=!0,this.xianFaTipsImg.visible=!0,this.xianLingTipsImg.y=-109,this.xianFaTipsImg.y=-109,this._xianLingTipsImgTween=TweenJS.create(this.xianLingTipsImg).to({y:this.xianLingTipsImg.y-20},1e3).start().yoyo(!0).repeat(99999999),this._xianFaTipsImgTween=TweenJS.create(this.xianFaTipsImg).to({y:this.xianFaTipsImg.y-20},1e3).start().yoyo(!0).repeat(99999999),this._occ=0,this._xianLingTipsImgEff||(this._xianLingTipsImgEff=h.creatEff(this.xianLingBtn,"activityEnter",15),this._xianLingTipsImgEff.visible=!0,this._xianLingTipsImgEff.play(),this._xianLingTipsImgEff.scale(1.7,1.7),this._xianLingTipsImgEff.pos(-4,-4)),this._xianFaTipsImgEff||(this._xianFaTipsImgEff=h.creatEff(this.xianFaBtn,"activityEnter",15),this._xianFaTipsImgEff.visible=!0,this._xianFaTipsImgEff.play(),this._xianFaTipsImgEff.scale(1.7,1.7),this._xianFaTipsImgEff.pos(-4,-4))},p.prototype.caijiLose=function(t){11043==t&&(r.instance.isGathering||(Laya.timer.clear(this,this.anginGatherEndHandler),Laya.timer.once(500,this,this.anginGatherEndHandler)))},p.prototype.gatherEndUpdateHandler=function(){r.instance.isGathering||(Laya.timer.clear(this,this.anginGatherEndHandler),Laya.timer.once(500,this,this.anginGatherEndHandler))},p.prototype.anginGatherEndHandler=function(){r.instance.isGathering||this.gatherEndHandler()},p.prototype.gatherEndHandler=function(){s.instance.getGatherCountIsMax()?this._occ=0:0!=this._occ&&(this._occ===s.instance.xianFaId?Laya.timer.once(100,this,this.xianFaBtnHandler.bind(this)):this._occ===s.instance.xianLingId&&Laya.timer.once(100,this,this.xianLingBtnHandler.bind(this)))},p.prototype.disTipsImg=function(){this.xianLingTipsImg.visible=!1,this.xianFaTipsImg.visible=!1,this._xianLingTipsImgTween&&this._xianLingTipsImgTween.stop(),this._xianFaTipsImgTween&&this._xianFaTipsImgTween.stop(),this._xianLingTipsImgEff&&(this._xianLingTipsImgEff.visible=!1,this._xianLingTipsImgEff.stop()),this._xianFaTipsImgEff&&(this._xianFaTipsImgEff.visible=!1,this._xianFaTipsImgEff.stop())},p.prototype.xianFaBtnHandler=function(){if(this.disTipsImg(),Laya.timer.clear(this,this.selectTarget),s.instance.getGatherCountIsMax())return n.instance.addNotice("本次活动宝箱采集数量已达到上限",!0),void(this._occ=0);if(r.instance.isGathering){var t=l.instance.getRole(r.instance.triggeredNpcId);if((t?t.property.get("occ"):0)===s.instance.xianFaId)return;s.instance.xianLingId,a.instance.gatherInterrupt()}this._occ=s.instance.xianFaId,Laya.timer.once(300,this,this.selectTarget)},p.prototype.xianLingBtnHandler=function(){if(this.disTipsImg(),Laya.timer.clear(this,this.selectTarget),s.instance.getGatherCountIsMax())return n.instance.addNotice("本次活动宝箱采集数量已达到上限",!0),void(this._occ=0);if(r.instance.isGathering){var t=l.instance.getRole(r.instance.triggeredNpcId);if((t?t.property.get("occ"):0)===s.instance.xianLingId)return;s.instance.xianFaId,a.instance.gatherInterrupt()}this._occ=s.instance.xianLingId,Laya.timer.once(300,this,this.selectTarget)},p.prototype.selectTarget=function(){PlayerModel.instance.selectTarget(3,this._occ)},p.prototype.xianLingEarningsBtnHandler=function(){WindowManager.instance.open(217,0)},p.prototype.xianFaEarningsBtnHandler=function(){WindowManager.instance.open(217,1)},p.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clearAll(this)},p.prototype.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t),this._xianLingTipsImgEff=this.destroyElement(this._xianLingTipsImgEff),this._xianFaTipsImgEff=this.destroyElement(this._xianFaTipsImgEff)},c=p,e.DayDropTreasureBottomPanel=c}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("scene_riches"),this._reward=GlobalData.getConfig("scene_riches_reward")[0]},n.prototype.getlvDicLeng=function(){return this._table[0].length},n.prototype.get_reward=function(t){return void 0===t&&(t=0),t?this._reward[1]:this._reward[0]},i=n,e.SceneRichesCfg=i}(modules=modules||{}),function(i){var t,n,e,s,o;function a(){var t=n.call(this)||this;return t._timer=0,t}t=i.day_drop_treasure||(i.day_drop_treasure={}),e=i.common.CustomList,s=i.config.BlendCfg,n=ui.DayDropTreasureResultAlertUI,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),this._list=new e,this._list.width=520,this._list.height=224,this._list.hCount=4,this._list.spaceX=30,this._list.itemRender=t.DayDropTreasureItem,this._list.x=70,this._list.y=127,this.addChild(this._list)},a.prototype.close=function(t,e){n.prototype.close.call(this,t,e),i.scene.SceneCtrl.instance.exitDungeon(),Laya.timer.clear(this,this.loopHandler)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),n.prototype.destroy.call(this)},a.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t),t&&(this._list.datas=t),this._timer=.001*s.instance.getCfgById(10303)[1][0],Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close)},a.prototype.loopHandler=function(){this.okBtn.label="确定("+this._timer+")",this._timer<0&&this.close(),this._timer--},o=a,t.DayDropTreasureResultAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.day_drop_treasure||(t.day_drop_treasure={}),n=t.common.CustomList,s=t.config.SceneRichesCfg,i=ui.DayDropTreasureRewardAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.width=520,this._list.height=182,this._list.hCount=4,this._list.spaceX=30,this._list.itemRender=e.DayDropTreasureItem,this._list.x=70,this._list.y=151,this._list.scrollDir=1,this.addChild(this._list)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.updateList(t),this.titleTxt.text=1==t?"仙法宝箱产出奖励预览":"仙灵宝箱产出奖励预览"},a.prototype.updateList=function(t){var e=CommonUtil.formatItemData(s.instance.get_reward(t));e&&(this._list.datas=e)},o=a,e.DayDropTreasureRewardAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.day_drop_treasure||(t.day_drop_treasure={}),n=Laya.Image,s=Laya.HTMLDivElement,i=BaseView,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.top=260,this.closeByOthers=!1,this.layer=3,this._bgImg=new n("common_sg/txtbg_common_tipsbg.png"),this._bgImg.sizeGrid="10,90,10,90",this.addChild(this._bgImg),this.width=this._bgImg.width=640,this.height=this._bgImg.height=44,this._txt=new s,this.addChild(this._txt),this._txt.mouseEnabled=!1,this._txt.size(560,24),this._txt.pos(40,10,!0),CommonUtil.setHTMLPro(this._txt,"#FFFFFF","SimHei",24,"center"),this._txt.innerHTML='点击下方<span style="color:#EA8706">仙灵宝箱</span>或<span style="color:#EA8706">仙法宝箱</span>自动采集'},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.once(4e3,this,this.close)},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.close)},o=a,e.DayDropTreasureTipPanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.day_drop_treasure||(t.day_drop_treasure={}),n=t.common.CustomList,i=ui.DayDropTreasureGetRewardAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.width=520,this._list.height=182,this._list.hCount=4,this._list.spaceX=30,this._list.itemRender=e.DayDropTreasureItem,this._list.x=70,this._list.y=151,this._list.scrollDir=1,this.addChild(this._list)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t?(this._list.datas=t,this.text1.visible=0===t.length):(this._list.datas=[],this.text1.visible=!0)},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},s=o,e.DayDropTreasureGetRewardAlert=s}(modules=modules||{}),function(t){var e,i,n,s,o,f,g,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.commonAlert||(t.commonAlert={}),n=ui.CommonItemsAlertUI,s=t.common.CustomList,o=t.bag.BagItem,f=t.config.ItemMaterialCfg,g=t.config.CfgCtrl,i=n,__extends(r,i),r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._value=this._okHandler=this._cancelHandler=this._packageTab=null,i.prototype.destroy.call(this)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new s,this._list.spaceX=20,this._list.hCount=4,this._list.itemRender=o,this._list.scrollDir=1,this.addChild(this._list)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("GET_PACKAGE_ITEM_REPLY",this,this.updatePackage)},r.prototype.updatePackage=function(t){this._packageTab=this._packageTab||{},this._packageTab[t[0]]=t[1],this.updateItems(!1)},r.prototype.setOpenParam=function(t){if(t){this._value=t,this._okHandler=t[6],this._cancelHandler=t[7];var e=t[3];e?(this.tipsText.text=e,this.tipsText.visible=!0):this.tipsText.visible=!1,this.updateItems(!0),1<t.length&&(this.titleTxt.text=t[1])}},r.prototype.updateItems=function(t){var e=[],i=this._value[2],n=this._value[0],s=this._value[5];void 0===this._value[4]&&(this._value[4]=!0),void 0===this._value[5]&&(s=!0);for(var o=0,a=n.length;o<a;o++){var r=n[o][0];if(3!=CommonUtil.getItemTypeById(r)||i)e.push([r,n[o][1],0,null]);else t:for(var l=0,h=f.instance.getItemCfgById(r)[8];l<h.length;l++){var c=h[l];t&&g.instance.getPackageItem(c);var p=this._packageTab?this._packageTab[c]:null;if(p)for(var u=0,d=p.length/3;u<d;u++){var m=p[3*u];if(!CommonUtil.getItemCfgById(m)){e.push([r,n[o][1],0,null]);break t}e.push([m,p[3*u+1],0,null])}}}s?(this.listBG.height=e.length<=8?147*Math.ceil(e.length/4):321,this.alertBG.height=260+this.listBG.height,this.height=this.alertBG.height-13,this.sureBtn.y=this.alertBG.height-104,this.sureBtn.visible=this._value[4],this.blankText.y=this.alertBG.height+10,this._list.size(e.length<=4?120*e.length-20:460,e.length<=8?120*Math.ceil(e.length/4):300),this._list.pos((this.width-this._list.width)/2,161,!0)):(this.listBG.height=321,this.listBG.y=99,this.alertBG.height=469,this.height=454,this.sureBtn.visible=this._value[4],this._list.size(e.length<=4?120*e.length-20:460,e.length<=8?120*Math.ceil(e.length/4):300),this._list.pos(105,this.listBG.y+16,!0),this.blankText.y=this.alertBG.height+10),this._list.datas=e},r.prototype.sureBtnHandler=function(){this.close(),this._okHandler&&this._okHandler.run()},r.prototype.close=function(){CommonUtil.delayedButNoPutInBag(),i.prototype.close.call(this),this._cancelHandler&&this._cancelHandler.run()},a=r,e.CommonItemsAlert=a}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){var t=i.call(this)||this;return t._winEffectTime=2e3,t}e=t.kunlun||(t.kunlun={}),n=t.common.CustomClip,s=t.kunlun.KunLunModel,o=t.kunlun.KunLunCtrl,a=t.notice.SystemNoticeManager,r=t.config.BlendCfg,i=ui.KunLunGameViewUI,__extends(h,i),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),this._tween1&&(this._tween1.stop(),this._tween1=null),this._winEffect&&(this._winEffect.removeSelf(),this._winEffect.destroy(),this._winEffect=null),i.prototype.destroy.call(this,t)},h.prototype.initialize=function(){i.prototype.initialize.call(this),this.zOrder=-1,this.centerX=0,this.bottom=217,this.closeByOthers=!1,this.layer=3,this._winEffect=new n,this.addChildAt(this._winEffect,0),this._winEffect.skin="assets/effect/feizao.atlas",this._winEffect.frameUrls=["feizao/00000.png","feizao/00001.png","feizao/00002.png","feizao/00003.png","feizao/00004.png"],this._winEffect.visible=!1,this._winEffect.pos(260,0,!0),this._maxGrabTimes=r.instance.getCfgById(30002)[1][0],this._maxLen=r.instance.getCfgById(30004)[1][0],this._speed=r.instance.getCfgById(30009)[1][0],this._moveDuration=this._speed*this._maxLen,this._hasTimes=-1},h.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._hasTimes=-1,o.instance.GetSwimmingInfo(),this.startNewRound()},h.prototype.close=function(){i.prototype.close.call(this),this._tween&&this._tween.stop(),this._tween1&&this._tween1.stop(),this.stopWinEffect()},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("KUNLUN_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("KUNLUN_GRAB_SOAP_RESULT",this,this.grabSoapResultHandler),this.onAutoGlobalEvt("BAG_ADD_ITEM",this,this.addItemHandler),this.onAutoClick(this.okBtn,this,this.okBtnBtnHandler)},h.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.stopWinEffect)},h.prototype.addItemHandler=function(t,e){o.instance.addItemHandler(t,e)},h.prototype.okBtnBtnHandler=function(){this._isWaiting||(this._hasTimes?(this._isWaiting=!0,o.instance.GrabSoap(this.soapImg.x>=this.yellowBlockImg.x&&this.soapImg.x<=this.yellowBlockImg.x+this.yellowBlockImg.width?1:0)):a.instance.addNotice("达到抓取上限",!0))},h.prototype.updateInfo=function(){var t=s.instance.info;if(t){var e=this._maxGrabTimes-t[2];e=0<=e?e:0,-1===this._hasTimes&&0<e?(this._hasTimes=1,this.startNewRound()):this._hasTimes=0<e?1:0,this.restTimesTxt.color=0===e?"#ff3e3e":"#55ff28",this.restTimesTxt.text=e+"/"+this._maxGrabTimes,this.okBtn.gray=0===e}},h.prototype.playTween=function(){var t=this;this._tween||(this._tween=TweenJS.create(this.soapImg)),this.soapImg.alpha=1,this.soapImg.pos(110,58,!0),this.soapImg.visible=!0,this._tween.to({x:610},this._moveDuration).chain(this._tween1=TweenJS.create(this.soapImg).to({x:710,y:158,alpha:0},500).onComplete(function(){t.soapImg.visible=!1,t.startNewRound()})).start()},h.prototype.grabSoapResultHandler=function(){1===s.instance.result?(a.instance.addNotice("成功捡到肥皂，奖励双倍时间延长2分钟",!1,7,2e3),this.playWinEffect()):a.instance.addNotice("抓取失败",!0)},h.prototype.startNewRound=function(){if(1===this._hasTimes){this._isWaiting=!1;var t=500/this._maxLen;this.yellowBlockImg.width=(160*Math.random()+70)*t,this.yellowBlockImg.x=(500*Math.random()+250)*t,this.soapImg.visible=!0,this.playTween()}else this.soapImg.visible=!1,this._tween&&this._tween.stop(),this._tween1&&this._tween1.stop()},h.prototype.playWinEffect=function(){this.soapImg.visible=!1,this._tween&&this._tween.stop(),this._tween1&&this._tween1.stop(),this._winEffect.play(),this._winEffect.visible=!0,Laya.timer.clear(this,this.stopWinEffect),Laya.timer.once(this._winEffectTime,this,this.stopWinEffect)},h.prototype.stopWinEffect=function(){this._winEffect&&(this._winEffect.stop(),this._winEffect.visible=!1),this.startNewRound()},l=h,e.KunLunGamePanel=l}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return i.call(this)||this}e=t.kunlun||(t.kunlun={}),n=t.kunlun.KunLunModel,s=t.dungeon.DungeonModel,o=t.common.CommonUtil,a=t.config.BlendCfg,i=ui.KunLunBuffViewUI,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=572,this.closeByOthers=!1,this.layer=3,this._maxTime=a.instance.getCfgById(30001)[1][0]},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("KUNLUN_GETDROPRECORD",this,this.showReawad),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.buffImg,this,this.showBuffTipsAlert)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},l.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},l.prototype.getBtnHandler=function(){e.KunLunCtrl.instance.GetInCopyAward()},l.prototype.showBuffTipsAlert=function(){WindowManager.instance.open(238,0)},l.prototype.showReawad=function(){WindowManager.instance.open(239,n.instance.awardList)},l.prototype.loopHandler=function(){var t=s.instance.getCopySceneStateByType(22);null!=t&&(this.timeText1.text=""+o.timeStampToHHMMSS(t[3]));var e=n.instance.info;if(e){this.timeText2.text=""+o.timeStampToMMSS(e[0]),this.timeText.text=""+o.timeStampToMMSS(e[1]);var i=e[1]-GlobalData.serverTime;this.buffImg.visible=this.timeText.visible=0<i}else this.buffImg.visible=this.timeText.visible=!1},r=l,e.KunLunBuffPanel=r}(modules=modules||{}),function(c){var t,e,i,n,s,p,o;function a(){var t=e.call(this)||this;return t._bg=new i,t._bg.skin="common_sg/txtbg_common_tipsbg.png",t._bg.sizeGrid="10,90,10,90",t.addChild(t._bg),t._bg.width=400,t._bg.height=42,t._icon=new i,t.addChild(t._icon),t._icon.width=40,t._icon.height=40,t._icon.x=150,t._icon.centerY=0,t._getTxt=new s,t.addChild(t._getTxt),t._getTxt.height=24,t._getTxt.width=60,t._getTxt.pos(90,7,!0),t._getTxt.text="获得 ",t._getTxt.color="#b8b8b8",t._txt=new s,t.addChild(t._txt),t._txt.height=24,t._txt.y=7,t._txt.x=190,t.width=400,t.height=42,t}t=c.notice||(c.notice={}),i=Laya.Image,n=Laya.Sprite,s=Laya.Text,p=c.common.CommonUtil,e=n,__extends(a,e),a.prototype.setTxt=function(t,e){this._txt.text=t,this._txt.color=e},a.prototype.setItem=function(t){if(null!=t){var e=t[0];if(!e)return;var i=e[0],n=p.getItemCfgById(i),s=p.getItemTypeById(i),o="";switch(t[1]){case 190:o="(活动)";break;case 451:o="(周卡)"}switch(s){case 1:case 3:case 2:case 6:case 9:case 5:case 8:case 4:this._txt.text=" "+n[1]+"x"+e[1]+o,this._icon.skin=p.getIconById(i);break;case 7:var a=1e4*(1e-4*i>>0),r=c.config.ItemRuneCfg.instance.getCfgById(a),l=r[4];this._txt.text=" "+r[1]+"x"+e[1]+o,this._icon.skin="assets/icon/item/"+l+".png"}var h=p.getItemQualityById(i);this._txt.color=p.getColorByQuality(h)}else this._txt.text="",this._icon.skin=""},o=a,t.DropNoticePanel=o}(modules=modules||{}),function(t){var s,e,i,o,n,a;function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._panels=new Array,t}s=t.kunlun||(t.kunlun={}),i=ui.KunLunGainViewUI,o=t.notice.DropNoticePanel,n=utils.tween.TweenGroup,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.closeByOthers=!1,this.layer=3,this._tweenGroup=new n},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),Laya.timer.loop(300,this,this.loopHandler)},r.prototype.close=function(){this._tweenGroup.removeAll(),e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler),s.KunLunModel.instance.incomeItems.length=0},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._tweenGroup=this.destroyElement(this._tweenGroup),this._panels=this.destroyElement(this._panels),e.prototype.destroy.call(this,t)},r.prototype.loopHandler=function(){var t=this,e=s.KunLunModel.instance.incomeItems;if(e&&0!==e.length){var i=e.shift(),n=this._panels.shift()||new o;n.setItem([i[0],i[1]]),this.addChild(n),n.pos(0,this.height/2),n.visible=!0,TweenJS.create(n,this._tweenGroup).to({y:n.y-110},700).chain(TweenJS.create(n,this._tweenGroup).to({y:n.y-180,alpha:.6},300).onComplete(function(){n.visible=!1,n.removeSelf(),n.alpha=1,n.setItem(null),t._panels.push(n)})).start()}},a=r,s.KunLunGainPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){var t=i.call(this)||this;return t._timer=0,t}e=t.kunlun||(t.kunlun={}),n=t.common.CustomList,s=t.config.BlendCfg,o=t.dungeon.DungeonCtrl,i=ui.KunLunResultAlertUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.width=520,this._list.height=230,this._list.hCount=4,this._list.spaceX=30,this._list.itemRender=e.KunLunItme,this._list.x=70,this._list.y=173,this.addChild(this._list)},r.prototype.close=function(t,e){i.prototype.close.call(this,t,e),o.instance.reqEnterScene(0),Laya.timer.clear(this,this.loopHandler)},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t&&(this._list.datas=t),this._timer=.001*s.instance.getCfgById(10303)[1][0],Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler(),this.setText()},r.prototype.setText=function(){this.overText.visible=1==e.KunLunModel.instance.overType,this.upperText.visible=2==e.KunLunModel.instance.overType},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close)},r.prototype.loopHandler=function(){this.okBtn.label="确定("+this._timer+")",this._timer<0&&this.close(),this._timer--},a=r,e.KunLunResultAlert=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.kunlun||(t.kunlun={}),n=t.config.BlendCfg,i=ui.KunLunTipAlertUI,__extends(o,i),o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.tipHtml.mouseEnabled=!1,CommonUtil.setHTMLPro(this.tipHtml,"#FFFFFF","SimHei",24);var t=n.instance.getCfgById(30006)[1][0]/1e3>>0;this.tipHtml.innerHTML='<span style="color:#1f304d">双倍奖励BUFF:游泳速度提升50%，瑶池内获得的奖励翻倍，每个BUFF持续'+t+"秒，多个BUFF的持续时间可叠加</span>"},s=o,e.KunLunTipAlert=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.kunlun||(t.kunlun={}),n=t.common.CustomList,i=ui.KunLunRewordAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.width=520,this._list.height=230,this._list.hCount=4,this._list.spaceX=30,this._list.itemRender=e.KunLunItme1,this._list.x=80,this._list.y=129,this.addChild(this._list)},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t&&(this._list.datas=t)},s=o,e.KunLunRewordAlert=s}(modules=modules||{}),function(p){var u,t,d,m,e;function i(){return null!==t&&t.apply(this,arguments)||this}u=p.fairy||(p.fairy={}),d=p.vip.VipModel,m=p.config.BlendCfg,t=ui.FairyChooseAlertUI,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.titleTxt,"#4C5E8A","SimHei",26,"center"),this.titleTxt.style.wordWrap=!1,CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24),this.contentTxt.style.wordWrap=!1,this.contentTxt.style.leading=5,this._fairyImgs=[this.fairyImg_0,this.fairyImg_1,this.fairyImg_2,this.fairyImg_3,this.fairyImg_4]},i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.updateBtn,this,this.updateBtnHandler),this.onAutoClick(this.selectBtn,this,this.selectBtnHandler),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoGlobalEvt("FAIRY_UPDATE",this,this.updateView)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateView()},i.prototype.updateView=function(){var t=p.config.FairyCfg.instance.getCfgById(u.FairyModel.instance.fairyId),e=t[1],i=t[6];this.titleTxt.innerHTML="当前仙女<span style='color:"+CommonUtil.getColorByQuality(u.FairyModel.instance.fairyId)+"'>【"+e+"】</span>",this.titleTxt.style.width=this.titleTxt.contextWidth,this.titleTxt.x=(this.width-this.titleTxt.width)/2;for(var n="",s=0,o=i.length;s<o;s++)n+='<img src="'+CommonUtil.getIconById(i[s][0],!0)+'" width="40" height="40"/>'+i[s][1]+"&nbsp;&nbsp;";var a=t[5];this.contentTxt.innerHTML="护送时长:&nbsp;<span style='color:#168a17'>"+CommonUtil.getTimeTypeAndTime(a)+"</span><br/>护送奖励:&nbsp;"+n,this.residueTxt.text="今日还可护送"+(m.instance.getCfgById(31005)[1][0]-u.FairyModel.instance.escort)+"次";var r=p.config.BlendCfg.instance.getCfgById(31011)[1];this.consumImg_0.skin=CommonUtil.getIconById(r[0],!0),this.consumTxt_0.text=""+r[1];var l=p.config.BlendCfg.instance.getCfgById(31013)[1];this.consumImg_1.skin=CommonUtil.getIconById(l[0],!0),this.consumTxt_1.text=""+l[1];var h=p.config.BlendCfg.instance.getCfgById(31012)[1][0];h<=d.instance.vipLevel?(this.consumImg_1.x=435,this.consumTxt_1.x=this.consumImg_1.x+this.consumImg_1.width,this.needVipTxt.visible=!1):(this.needVipTxt.visible=!0,this.needVipTxt.text="SVIP"+h+"开启",this.consumImg_1.x=389,this.consumTxt_1.x=this.consumImg_1.x+this.consumImg_1.width,this.needVipTxt.x=this.consumTxt_1.x+this.consumTxt_1.width+10);var c=u.FairyModel.instance.fairyId-1;this.frameImg.skin="fairy/seltectd_hsxv_xv"+(1+c)+".png",this.frameImg.x=this._fairyImgs[c].x},i.prototype.updateBtnHandler=function(){u.FairyCtrl.instance.refreshFairy()},i.prototype.selectBtnHandler=function(){u.FairyCtrl.instance.selectBestFairy()},i.prototype.goBtnHandler=function(){var t=CommonUtil.getHoursNum(),e=CommonUtil.getMinutesNum();if(16==t&&e<=59||17==t&&e<=30||21==t&&40<=e||22==t&&e<=40)this.goBtnFunc();else if(10<=t&&t<=24){var i=Handler.create(this,this.goBtnFunc);CommonUtil.alert("提示","当前非双倍护送时间，是否继续护送？<br/>双倍时间：16:00-17:30, 21:40-22:40",[i,"继续护送"],[null,"我再想想"])}else this.goBtnFunc()},i.prototype.goBtnFunc=function(){u.FairyCtrl.instance.escortFairy(),this.close()},i.prototype.destroy=function(){this._fairyImgs=this.destroyElement(this._fairyImgs),t.prototype.destroy.call(this)},e=i,u.FairyChooseAlert=e}(modules=modules||{}),function(l){var h,e,t,c,i;function n(){return null!==e&&e.apply(this,arguments)||this}h=l.fairy||(l.fairy={}),t=l.config.BlendCfg,c=l.common.CommonUtil,e=ui.FairySendAlertUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._remainTime=0,c.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24),this.contentTxt.style.wordWrap=!1,this.contentTxt.mouseEnabled=!1,this.contentTxt.mouseThrough=!0,c.setHTMLPro(this.notHintTxt,"#4C5E8A","SimHei",24),this.notHintTxt.style.wordWrap=!1,this.notHintTxt.mouseEnabled=!1,this.notHintTxt.mouseThrough=!0,this._maxLootTime=t.instance.getCfgById(31007)[1][0]},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoGlobalEvt("CURR_LOOK_PLAYER_UPDATE",this,this.updateOtherInfo),this.onAutoGlobalEvt("FAIRY_UPDATE",this,this.updateView),Laya.timer.loop(1e3,this,this.loopHandler)},n.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._info=t},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},n.prototype.updateView=function(){this.contentTxt.visible=!0,this.loopHandler(),this._info?(this.updateOthers(),h.FairyCtrl.instance.getFairyPanelInfo([PlayerModel.instance.actorId,PlayerModel.instance.serverPgId,this._playerId])):this.updateMine()},n.prototype.updateOtherInfo=function(){var t=h.FairyModel.instance.currLookPlayerInfo[0],e=h.FairyModel.instance.currLookPlayerInfo[1];this._playerId==t&&(this.BlcokedTimeTxt.text=e+"/"+this._maxLootTime,this.BlcokedTimeTxt.color=e>=this._maxLootTime?"#ff3e3d":"#168a17")},n.prototype.updateMine=function(){this._playerId=0;var t=PlayerModel.instance.playerBaseAttr[0],e=PlayerModel.instance.level,i=h.FairyModel.instance.fairyId,n=l.config.FairyCfg.instance.getCfgById(i),s=n[1];this.sendObjTxt.text=""+s,this.sendObjTxt.color=c.getColorByQuality(i);var o=h.FairyModel.instance.per;this.BlcokedTimeTxt.text=h.FairyModel.instance.looting+"/"+this._maxLootTime,this.BlcokedTimeTxt.color=h.FairyModel.instance.looting>=this._maxLootTime?"#ff3e3d":"#168a17",this._remainTime=h.FairyModel.instance.endTime,this.remainTimeTxt.text=""+c.timeStampToMMSS(this._remainTime),this.remainTimeTxt.color="#3a5385",this.nameAndLvTxt.text=t+" Lv."+e,this.showTxt(n,o,h.FairyModel.instance.isDouble),this.yieldHintTxt.text="这是你所护送的仙女",this.cantHold()},n.prototype.updateOthers=function(){var t=this._info;this._playerId=t[1];var e=t[4],i=t[2],n=t[0],s=l.config.FairyCfg.instance.getCfgById(n);this.BlcokedTimeTxt.text=t[5]+"/"+this._maxLootTime,this.BlcokedTimeTxt.color=t[5]>=this._maxLootTime?"#ff3e3d":"#168a17",this._remainTime=t[3],this.nameAndLvTxt.text=e+" Lv."+i;var o=s[1];if(this.sendObjTxt.text=""+o,this.sendObjTxt.color=c.getColorByQuality(n),0<this._remainTime-GlobalData.serverTime?(this.remainTimeTxt.text=""+c.timeStampToMMSS(this._remainTime),this.remainTimeTxt.color="#3a5385"):this.remainTimeTxt.color="#168a17",this.initElementPos(),h.FairyModel.instance.intercept>=l.config.BlendCfg.instance.getCfgById(31006)[1][0])this.yieldHintTxt.text="您的拦截次数不足",this.cantHold();else if(t[5]>=l.config.BlendCfg.instance.getCfgById(31007)[1][0])this.yieldHintTxt.text="对方被拦截次数已满,当前为保护状态",this.cantHold();else{var a=this.calcPer(t[2]),r=t[6];this.showTxt(s,a,r),this.yieldHintTxt.text="目标等级越低,拦截收益越少",this.notHintTxt.innerHTML="是否拦截<span style='color:#ff3e3e'>【"+e+"】</span>的<span style='color:"+c.getColorByQuality(n)+"'>"+l.config.FairyCfg.instance.getCfgById(n)[1]+"</span>?"}},n.prototype.initElementPos=function(){for(var t=0,e=this._childs.length;t<e;t++)this._childs[t].visible=!0;this.fgxImg_0.y=340,this.fgxImg_1.y=440,this.yieldHintTxt.y=350,this.hintTxt.y=625,this.bgImg.height=this.height=575,this.frameBgImg.height=280,this.yieldHintTxt.color="#3a5385"},n.prototype.cantHold=function(){this.fgxImg_0.y=285,this.yieldHintTxt.y=300,this.frameBgImg.height=230,this.fgxImg_1.visible=this.goBtn.visible=this.contentTxt.visible=this.hintTxt.visible=this.notHintTxt.visible=!1,this.bgImg.height=this.height=380,this.hintTxt.y=430,this.yieldHintTxt.color="#ff3e3e"},n.prototype.calcPer=function(t){for(var e=PlayerModel.instance.level-t,i=l.config.BlendCfg.instance.getCfgById(31014)[1],n=0,s=i.length;n<s;n++)if(!(n%2)&&i[n]<=e){var o=i[n+2];if(null!=o){if(e<o)return i[n+1]}else if(null==o)return i[n+1]}},n.prototype.showTxt=function(t,e,i){for(var n="",s=t[6],o=0,a=s.length;o<a;o++){var r=s[o][0];n+="<img src='"+c.getIconById(r,!0)+'\' width="40" height="40"/>'+s[o][1]*e*(i?2:1)+"&nbsp;&nbsp;"}var l=this._info?"拦劫":"护送";this.contentTxt.innerHTML=l+"获得:"+n},n.prototype.loopHandler=function(){if(this._remainTime-GlobalData.serverTime<=0)return this.remainTimeTxt.text="已送达",void(this.remainTimeTxt.color="#168a17");this.remainTimeTxt.text=""+c.timeStampToMMSS(this._remainTime),this.remainTimeTxt.color="#3a5385"},n.prototype.goBtnHandler=function(){CommonGroupUtil.notTeamCopyIsTeaming()||(h.FairyCtrl.instance.interceptFairy([this._playerId]),this.close())},n.prototype.close=function(){e.prototype.close.call(this),h.FairyCtrl.instance.delFairyPanelInfoRecord([PlayerModel.instance.actorId,this._playerId])},i=n,h.FairySendAlert=i}(modules=modules||{}),function(e){var t,i,n;function s(){this.maxFairyNum=i.instance.getCfgById(31001)[1][0],this._logList=[],this._escortList=[],this._escortListFlags={},this._escortList.length=this.maxFairyNum}t=e.fairy||(e.fairy={}),i=e.config.BlendCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getFairyInfoReply=function(t){this._fairyId=t[0],this._sendState=t[4],this._escort=t[1],this._intercept=t[2],this._looting=t[3],this._isDouble=t[5],this._endTime=t[6],this._per=t[7],GlobalData.dispatcher.event("FAIRY_UPDATE"),e.redPoint.RedPointCtrl.instance.setRPProperty("fairyRP",2==this._sendState)},s.prototype.getFairyLogReply=function(t){this._logList=t[0],GlobalData.dispatcher.event("FAIRY_LOG_UPDATE")},s.prototype.updateFairyLog=function(t){this._logList.push(t[0]),GlobalData.dispatcher.event("FAIRY_LOG_UPDATE")},s.prototype.getFairyEscortListReply=function(t){for(var e=t[0],i=0,n=e.length;i<n;i++){var s=e[i][1];if(!this._escortListFlags[s]){this._escortListFlags[s]=!0;for(var o=0;o<this._escortList.length;o++)if(null==this._escortList[o]){this._escortList[o]=e[i];break}}}GlobalData.dispatcher.event("FAIRY_UPDATE")},s.prototype.updateOtherFairyInfo=function(t){this._currLookPlayerInfo=t,GlobalData.dispatcher.event("CURR_LOOK_PLAYER_UPDATE")},Object.defineProperty(s.prototype,"fairyId",{get:function(){return this._fairyId?this._fairyId:1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"currLookPlayerInfo",{get:function(){return this._currLookPlayerInfo},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sendState",{get:function(){return this._sendState},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"per",{get:function(){return this._per},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"escortListFlags",{get:function(){return this._escortListFlags},enumerable:!0,configurable:!0}),s.prototype.initeEscortListFlags=function(){this._escortListFlags={}},Object.defineProperty(s.prototype,"escort",{get:function(){return this._escort},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"endTime",{get:function(){return this._endTime},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"intercept",{get:function(){return this._intercept},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"looting",{get:function(){return this._looting},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isDouble",{get:function(){return this._isDouble},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"logList",{get:function(){return this._logList},enumerable:!0,configurable:!0}),s.prototype.initEscortList=function(){this._escortList=[],this._escortList.length=this.maxFairyNum},Object.defineProperty(s.prototype,"escortList",{get:function(){return this._escortList},enumerable:!0,configurable:!0}),s.prototype.formatDate=function(t){var e=new Date(t),i=e.getMonth(),n=e.getDate(),s=e.getHours(),o=e.getMinutes();return i+1+"-"+n+"  "+s+":"+(o<10?"0"+o:o.toString())},n=s,t.FairyModel=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("fairy"),e=0,i=t.length;e<i;e++)this._table[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.FairyCfg=i}(modules=modules||{}),function(i){var p,n,e,u,d,s,o,a,r,t;function l(){return null!==n&&n.apply(this,arguments)||this}p=i.fairy||(i.fairy={}),e=i.notice.SystemNoticeManager,u=i.config.FairyCfg,d=i.fairy.FairyModel,s=i.config.BlendCfg,o=i.common.CommonUtil,a=i.common.SimpleList,r=i.windCloud.PvpBtnItem,n=ui.FairyViewUI,__extends(l,n),l.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._yPoss=[];for(var t=0;t<7;t++)this._yPoss.push(80*t);for(this._fairyImgs=[],this._moveTween=[],this._shadeTween=[],t=0;t<d.instance.maxFairyNum;t++){var e=new Laya.Image("fairy/image_hsxv_xv1.png");e.visible=!1,this._fairyImgs.push(e),this.wayPanel.addChild(e),this._moveTween.push(TweenJS.create(e)),this._shadeTween.push(TweenJS.create(e))}this._selectFrame=new Laya.Image,this.wayPanel.addChild(this._selectFrame),this._selectFrame.visible=!1,this._cd=0,this._btnClip=o.creatEff(this.gotoBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,o.setHTMLPro(this.instructionsHTML,"#1f304d","SimHei",22),this.instructionsHTML.innerHTML=i.config.BlendCfg.instance.getCfgById(31015)[2][0],this._tabList=a.create(r,158,172,2,1,10),this._tabList.size(494,172),this._tabList.pos((this.width-this._tabList.width)/2,979),this.addChild(this._tabList),this._tabList.datas=[120,145,839]},l.prototype.onEvt=function(){n.prototype.onEvt.call(this),this._tabList.selectedIndex=1,this.onAutoEvt(this._tabList,"select",this,this.onTabChange,[1]),this.onAutoClick(this.updateBtn,this,this.updateBtnHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoClick(this.gotoBtn,this,this.gotoBtnHandler),this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler);for(var t=0;t<d.instance.maxFairyNum;t++)this.onAutoClick(this._fairyImgs[t],this,this.imgsClickHandler,[t]);this.onAutoGlobalEvt("FAIRY_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FAIRY_UPDATE",this,this.showFairyList),Laya.timer.loop(1e3,this,this.loopHandler)},l.prototype.onTabChange=function(t){switch(this._tabList.selectedData){case 120:this._tabList.selectedIndex!=t&&WindowManager.instance.open(158);break;case 145:this._tabList.selectedIndex!=t&&WindowManager.instance.open(227);break;case 839:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1259);break;case 901:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1361)}this._tabList.selectedIndex!=t&&(this._tabList.selectedIndex=t)},l.prototype.offEvt=function(){n.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},l.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._isNotice=!1,p.FairyCtrl.instance.getFairyInfo(),this.updateBtnHandler(),this.updateView(),this.showFairyList()},l.prototype.updateView=function(){var t=i.dungeon.DungeonModel.instance.getCopySceneStateByType(23);this.doubleImg.visible=!!t&&2==t[2];var e=s.instance.getCfgById(31005)[1][0];this.sendTimeTxt.text="护送次数:"+(e-d.instance.escort)+"/"+e,e=s.instance.getCfgById(31006)[1][0],this.holdupTimeTxt.text="拦截次数:"+(e-d.instance.intercept)+"/"+e,this._btnClip.stop(),this._btnClip.visible=!1,1==d.instance.sendState?this.gotoBtn.label="护送中...":0==d.instance.sendState?this.gotoBtn.label="挑选仙女":(this.gotoBtn.label="领取奖励",this._btnClip.play(),this._btnClip.visible=!0),this.timeTxt.visible=1==d.instance.sendState,1==d.instance.sendState&&(this._endTime=d.instance.endTime,this.timeTxt.text="护送时间:"+o.timeStampToMMSS(this._endTime))},l.prototype.showFairyList=function(){for(var h=this,t=function(e){var t=c._moveTween[e],i=c._shadeTween[e];if(t.isPlaying||i.isPlaying)return"continue";var n=d.instance.escortList[e];if(!n)return t.stop(),i.stop(),c._fairyImgs[e].visible=!1,c._fairyImgs[e].alpha=1,"continue";var s=n[0];c._fairyImgs[e].skin="fairy/image_hsxv_xv"+s+".png";var o,a=u.instance.getCfgById(s)[7],r=n[3]-GlobalData.serverTime,l=void 0;if(l=a<r?r%a/a:r/a,c._fairyImgs[e].x=670*(1-l)-70,o=l*a,c._fairyImgs[e].y=c._yPoss[Math.floor(Math.random()*c._yPoss.length)],c._fairyImgs[e].zOrder=c._fairyImgs[e].y,c._fairyImgs[e].visible=!0,c._fairyImgs[e].alpha=1,!t||!i)return{value:void 0};t.to({x:600},o).start().onComplete(function(){i.to({alpha:0},1e3).start().onComplete(function(){h._fairyImgs[e].visible=!1,h._fairyImgs[e].alpha=1;var t=d.instance.escortList[e][1];d.instance.escortListFlags[t]=null,d.instance.escortList[e]=null,p.FairyCtrl.instance.getFairyEscortList()}),d.instance.escortListFlags[s]=null})},c=this,e=0;e<d.instance.maxFairyNum;e++){var i=t(e);if("object"==typeof i)return i.value}},l.prototype.imgsClickHandler=function(t){var e=d.instance.escortList[t];WindowManager.instance.open(228,e)},l.prototype.updateBtnHandler=function(){if(0<this._cd)e.instance.addNotice("刷新CD中",!0);else{d.instance.initEscortList();for(var t=0;t<d.instance.maxFairyNum;t++)this._moveTween[t].stop(),this._shadeTween[t].stop(),d.instance.initeEscortListFlags(),this._fairyImgs[t].x=-70;p.FairyCtrl.instance.getFairyEscortList(),this._cd=s.instance.getCfgById(31004)[1][0],this._isNotice&&e.instance.addNotice("刷新成功"),this._isNotice=!0}},l.prototype.loopHandler=function(){this.timeTxt.text="护送时间:"+o.timeStampToMMSS(this._endTime),this.timeTxt.visible=0<this._endTime-GlobalData.serverTime,this._cd<=0?this._cd=0:this._cd-=1e3},l.prototype.gotoBtnHandler=function(){0==d.instance.sendState?s.instance.getCfgById(31005)[1][0]>d.instance.escort?WindowManager.instance.open(229):o.noticeError(34005):2==d.instance.sendState?p.FairyCtrl.instance.getFairyAward():1==d.instance.sendState&&e.instance.addNotice("正在护送中")},l.prototype.helpBtnHandler=function(){WindowManager.instance.open(234)},l.prototype.aboutBtnHandler=function(){o.alertHelp(20042)},l.prototype.close=function(){n.prototype.close.call(this);for(var t=this._cd=0,e=d.instance.maxFairyNum;t<e;t++)this._moveTween[t].stop(),this._shadeTween[t].stop()},l.prototype.destroy=function(){this._tabList=this.destroyElement(this._tabList),this._btnClip=this.destroyElement(this._btnClip),this._fairyImgs=this.destroyElement(this._fairyImgs),this._selectFrame=this.destroyElement(this._selectFrame),n.prototype.destroy.call(this);for(var t=0,e=d.instance.maxFairyNum;t<e;t++)this._moveTween[t]=null,this._shadeTween[t]=null},t=l,p.FairyPanel=t}(modules=modules||{}),function(a){var r,t,e,i,n,l,s;function o(){return null!==t&&t.apply(this,arguments)||this}r=a.fairy||(a.fairy={}),e=a.common.BtnGroup,i=ui.FairyLogAlertUI,n=a.common.CustomList,l=a.common.CommonUtil,t=i,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=new n,this._list.pos(55,125),this._list.width=550,this._list.height=310,this._list.hCount=1,this._list.spaceY=5,this._list.itemRender=r.FairyLogItem,this.addChild(this._list),this._btnGroup=new e,this._btnGroup.setBtns(this.btnGoup_0,this.btnGoup_1),this._maxLootTime=a.config.BlendCfg.instance.getCfgById(31007)[1][0],this._remainTime=0},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),t.prototype.destroy.call(this)},o.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,Laya.Event.CHANGE,this,this.updateView),this.onAutoGlobalEvt("FAIRY_LOG_UPDATE",this,this.updateView),this._btnGroup.selectedIndex=0,Laya.timer.loop(1e3,this,this.loopHandler)},o.prototype.offEvt=function(){t.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),r.FairyCtrl.instance.getFairyLog()},o.prototype.updateView=function(){if(this.noSendTxt.visible=!1,0==this._btnGroup.selectedIndex)if(this._list.visible=!1,1==r.FairyModel.instance.sendState){this.box.visible=!0;var t=r.FairyModel.instance.fairyId;this._remainTime=r.FairyModel.instance.endTime;var e=a.config.FairyCfg.instance.getCfgById(t),i=e[1],n=r.FairyModel.instance.looting>=this._maxLootTime?"#ff3e3d":"#168a17";this.nameTxt.text=i,this.nameTxt.color=l.getColorByQuality(t),this.countTxt.text=r.FairyModel.instance.looting+"/"+this._maxLootTime,this.countTxt.color=n,this.timeTxt.text=""+l.timeStampToMMSS(this._remainTime),this.doubleTxt.visible=r.FairyModel.instance.isDouble;var s=e[6];this.setProp(this.icon_0,this.propTxt_0,s[0]),this.setProp(this.icon_1,this.propTxt_1,s[1])}else this.noSendTxt.visible=!0,this.noSendTxt.text="当前并无护送",this.box.visible=!1;else{this._list.visible=!0,this.noSendTxt.visible=this.box.visible=!1;var o=r.FairyModel.instance.logList.concat();2==r.FairyModel.instance.sendState&&o.push(null),0==o.length&&(this.noSendTxt.text="当前并无拦截信息",this.noSendTxt.visible=!0),this._list.datas=o}},o.prototype.setProp=function(t,e,i){var n=i[0],s=i[1];t.skin=l.getIconById(n,!0),e.text=""+s*r.FairyModel.instance.per*(r.FairyModel.instance.isDouble?2:1)},o.prototype.loopHandler=function(){this._remainTime<=0||0==this._btnGroup.selectedIndex&&(this.timeTxt.text=""+l.timeStampToMMSS(this._remainTime))},s=o,r.FairyLogAlert=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.compose||(t.compose={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._nameTxt.visible=!1,this.needTip=!0},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),GlobalData.dispatcher.on("BAG_CHANGE_NUM",this,this.changeNumHandler)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),GlobalData.dispatcher.off("BAG_CHANGE_NUM",this,this.changeNumHandler)},o.prototype.changeNumHandler=function(t){this._itemData&&this._itemData[2]===t&&(this._numTxt.text=this._itemData[1].toString())},o.prototype.setData=function(t){1<t.length?i.prototype.setDataSource.call(this,t):i.prototype.setDataSource.call(this,[t,0,0,null])},s=o,e.ComposeItem=s}(modules=modules||{}),function(d){var r,l,m,t;function e(){return null!==l&&l.apply(this,arguments)||this}r=d.commonAlert||(d.commonAlert={}),m=d.player.PlayerModel,l=r.EquipBaseAlert,__extends(e,l),e.prototype.initialize=function(){l.prototype.initialize.call(this),this.isNeedContrast=!0},e.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this.item=t},Object.defineProperty(e.prototype,"item",{set:function(t){var e=t,i=e[0];this.teamIdTest=i;var n=d.common.CommonUtil.getPartById(i);this.myEquip=m.instance.getEquipByPart(n),this.setBaseInfo(e),this.setBaseAttr(e);var s=e[3],o=this.setBestAttr(s);0==o?(this.stoneBox.y=this.bestAttrBox.y,this.bestAttrBox.visible=!1):(this.bestAttrBox.visible=!0,this.stoneBox.y=this._bestAttrInitY+30*o+10);var a=this.myEquip?this.myEquip[3]:null;this.setStoneAttr(s),this.setStoneAttr(a,"my");var r=this.stoneTxt.y+this.stoneTxt.contextHeight,l=a?this.myStoneTxt.y+this.myStoneTxt.contextHeight:0;this.stoneBox.height=l<=r?r:l,this.xiLianBox.y=this.stoneBox.y+this.stoneBox.height;var h=this.setXiLian(s[3]),c=a?this.setXiLian(a[3],!0):0;(1<h||1<c)&&(this.xiLianBox.visible=!0),this.xiLianBox.height=c<h?h:c,this.zhuHunBox.y=this.xiLianBox.y+this.xiLianBox.height;var p=this.setZhuHun(e),u=a?this.setZhuHun(this.myEquip,!0):0;(1<p||1<u)&&(this.zhuHunBox.visible=!0),this.zhuHunBox.height=u<p?p:u,this.elseBox.y=this.conBox.y+this.setConHeight(this.xiLianBox.y+this.xiLianBox.height+this.zhuHunBox.height),this.setRank(i)},enumerable:!0,configurable:!0}),e.prototype.setBaseInfo=function(t){l.prototype.setBaseInfo.call(this,t);var e=0,i=0;this.myEquip&&(e=this.myEquip[3][6],i=this.myEquip[3][7]);var n=t[3][6],s=t[3][7],o=n-e;r.EquipAlertUtil.judgeDiff(o,this.myScoreTxt,this.scoreImg);var a=s-i;r.EquipAlertUtil.judgeDiff(a,this.mySumScoreTxt,this.sumScoreImg)},e.prototype.setBaseAttr=function(t){l.prototype.setBaseAttr.call(this,t);var e=t[0],i=d.config.ItemEquipCfg.instance.getItemCfgById(e)[8];if(this.myEquip)for(var n=d.config.ItemEquipCfg.instance.getItemCfgById(this.myEquip[0])[8],s=0;s<.5*n.length;s++)this.baseAttrImgs[s].visible=!0,r.EquipAlertUtil.judgeDiff(i[2*s+1]-n[2*s+1],this.myBaseAttrTxts[s],this.baseAttrImgs[s]);else for(s=0;s<this.myBaseAttrTxts.length;s++)this.myBaseAttrTxts[s].color="#cbcade",this.myBaseAttrTxts[s].text="无",this.baseAttrImgs[s].visible=!1},e.prototype.setBestAttr=function(t){var e,i=l.prototype.setBestAttr.call(this,t);if(this.myEquip){var n=this.myEquip[3];e=l.prototype.setBestAttr.call(this,n,"my")}else e=l.prototype.setBestAttr.call(this,null,"my");return e<=i?i:e},t=e,r.OtherEquipAlert=t}(modules=modules||{}),function(i){var s,e,t,n,o,a,r;function l(){var t=null!==e&&e.apply(this,arguments)||this;return t._itemIdArr=[20830001,20840001,20850001],t}s=i.adventure||(i.adventure={}),t=ui.AdventureViewUI,n=i.config.BlendCfg,o=i.bag.BagModel,a=i.common.CustomClip,e=t,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.descTxt.text=n.instance.getCfgById(29005)[2][0],this._items=[this.item1,this.item2,this.item3,this.item4],this.item1.index=0,this.item2.index=1,this.item3.index=2,this.item4.index=3,this._plusBtnClip=a.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.plusBtn.addChild(this._plusBtnClip),this._plusBtnClip.pos(-10,-10),this._plusBtnClip.visible=!1},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.plusBtn,this,this.plusHandler),this.onAutoGlobalEvt("ADVENTURE_EVENT_LIST_UPDATE",this,this.updateEventList),this.onAutoGlobalEvt("ADVENTURE_YUNLI_UPDATE",this,this.updateYunLi),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updatePlusState)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateEventList(),this.updateYunLi(),this.updatePlusState(),s.AdventureModel.instance.hasNewEvent=!1},l.prototype.helpHandler=function(){i.common.CommonUtil.alertHelp(20034)},l.prototype.plusHandler=function(){var t=this.hasItemId();if(null!=t){var e=o.instance.getItemsById(t);i.bag.BagUtil.openBagItemTip(e[0])}else WindowManager.instance.openDialog(106,[this._itemIdArr[0],1,!0])},l.prototype.hasItemId=function(){for(var t=void 0,e=0;e<this._itemIdArr.length;e++)if(0<o.instance.getItemCountById(this._itemIdArr[e])){t=this._itemIdArr[e];break}return t},l.prototype.updatePlusState=function(){this.hasItemId()?(this._plusBtnClip.isPlaying||a.thisPlay(this._plusBtnClip),this._plusBtnClip.visible=!0):(a.thisStop(this._plusBtnClip),this._plusBtnClip.visible=!1)},l.prototype.updateEventList=function(){for(var t=s.AdventureModel.instance.eventList,e=t?t.length:0,i=0,n=e;i<n;i++)this._items[i]&&(this._items[i].data=t[i],this.addChild(this._items[i]));for(i=e,n=this._items.length;i<n;i++)this._items[i].removeSelf();this.noQiYuBox.visible=e<=0},l.prototype.updateYunLi=function(){var t=s.AdventureModel.instance.yunLi||0;this.currencyTxt.text="运力值:"+t+"/"+n.instance.getCfgById(29004)[1][0],CommonUtil.centerChainArr(this.yunLiMc.width,[this.currencyTxt,this.plusBtn,this.resetDescTxt],5)},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._items=this.destroyElement(this._items),this._plusBtnClip=this.destroyElement(this._plusBtnClip),e.prototype.destroy.call(this,t)},r=l,s.AdventurePanel=r}(modules=modules||{}),function(t){var e,i;function n(){this._table=GlobalData.getConfig("adventure_child")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgById=function(t){return GlobalData.searchByIndex1(this._table,t)},i=n,e.AdventureChildCfg=i}(modules=modules||{}),function(s){var i,o,t,a,n,e;function r(){return null!==o&&o.apply(this,arguments)||this}i=s.adventure||(s.adventure={}),t=ui.FingerGuessAlertUI,a=s.config.AdventureChildCfg,n=s.notice.ScoreNoticeManager,o=t,__extends(r,o),r.prototype.initialize=function(){o.prototype.initialize.call(this),this.closeOnSide=!1,this.myHeadIcon.type=0,this._count=0,this._fingerImgs=["adventure/image_qy_qt.png","adventure/image_qy_jd.png","adventure/image_qy_b.png"]},r.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.rockBtn,this,this.selectHandler,[this.rockBtn]),this.onAutoClick(this.scissorsBtn,this,this.selectHandler,[this.scissorsBtn]),this.onAutoClick(this.paperBtn,this,this.selectHandler,[this.paperBtn]),this.onAutoClick(this.resultBtn,this,this.resultHandler),this.onAutoGlobalEvt("ADVENTURE_EVENT_UPDATE",this,this.updateEvent)},r.prototype.setOpenParam=function(t){o.prototype.setOpenParam.call(this,t),this._event=t},r.prototype.onOpened=function(){if(o.prototype.onOpened.call(this),this.selectedImg.visible=!1,this.equalImg.visible=!1,this.myFingerImg.visible=this.otherFingerImg.visible=!0,this.myFingerImg.skin=this.otherFingerImg.skin=this._fingerImgs[0],this.myResultImg.visible=this.otherResultImg.visible=!1,this.rockBtn.mouseEnabled=this.scissorsBtn.mouseEnabled=this.paperBtn.mouseEnabled=!0,this.selectBox.visible=!0,this.resultTxt.visible=this.resultBtn.visible=!1,this._event){var t=a.instance.getCfgById(this._event[2]),e=s.config.BlendCfg.instance.getCfgById(29007)[1],i=t[1],n=this._event[5];n&&0<n.length?this.item.dataSource=[i[n[0]][0],i[n[0]][1],0,null]:this.item.dataSource=[e[0],e[1],0,null]}},r.prototype.close=function(t,e){o.prototype.close.call(this,t,e),this._event&&0===this._result?i.AdventureCtrl.instance.getAdventureAward(this._event[0]):1===this._result&&n.instance.addNotice(1,i.AdventureModel.instance.adventurePoint),Laya.timer.clear(this,this.frameHandler)},r.prototype.selectHandler=function(t){this.selectedImg.pos(t.x-12,t.y-12,!0),this.selectedImg.visible=!0,i.AdventureCtrl.instance.challenge(this._event),this.rockBtn.mouseEnabled=this.scissorsBtn.mouseEnabled=this.paperBtn.mouseEnabled=!1,this._selectType=t===this.rockBtn?0:t===this.scissorsBtn?1:2},r.prototype.resultHandler=function(){this.close()},r.prototype.updateEvent=function(t){t[0][0]===this._event[0]&&(this._result=t[2],Laya.timer.frameLoop(4*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?.5:1),this,this.frameHandler),this.myFingerImg.visible=this.otherFingerImg.visible=!0,this._count=0,this._randomIndex=3*Math.random()>>0,this.frameHandler())},r.prototype.frameHandler=function(){var t=(this._randomIndex+this._count)%3;if(this.myFingerImg.skin=this._fingerImgs[t],this.otherFingerImg.skin=this._fingerImgs[1+t==3?0:1+t],this._count++,30<this._count)if(Laya.timer.clear(this,this.frameHandler),this.myFingerImg.skin=this._fingerImgs[this._selectType],0===this._result)this.otherFingerImg.skin=this._fingerImgs[this._selectType+1]||this._fingerImgs[0],this.myResultImg.skin="adventure/image_qy_sl.png",this.otherResultImg.skin="adventure/image_qy_sb.png",this.myResultImg.visible=this.otherResultImg.visible=!0,this.equalImg.visible=!1,this.selectBox.visible=!1,this.resultTxt.visible=this.resultBtn.visible=!0,this.resultBtn.label="领取奖励",this.resultTxt.text="恭喜您获得胜利",this.resultTxt.color="#ffec7c";else if(1===this._result)this.otherFingerImg.skin=this._fingerImgs[this._selectType-1]||this._fingerImgs[2],this.myResultImg.skin="adventure/image_qy_sb.png",this.otherResultImg.skin="adventure/image_qy_sl.png",this.myResultImg.visible=this.otherResultImg.visible=!0,this.equalImg.visible=!1,this.selectBox.visible=!1,this.resultTxt.visible=this.resultBtn.visible=!0,this.resultBtn.label="离开",this.resultTxt.text="很遗憾，您输了！",this.resultTxt.color="#eaf8ff";else{if(2!==this._result)throw new Error("不存在的事件状态:"+this._result);this.otherFingerImg.skin=this._fingerImgs[this._selectType],this.myResultImg.visible=this.otherResultImg.visible=!1,this.equalImg.visible=!0,this.rockBtn.mouseEnabled=this.scissorsBtn.mouseEnabled=this.paperBtn.mouseEnabled=!0,this.selectBox.visible=!0,this.resultTxt.visible=this.resultBtn.visible=!1}},e=r,i.FingerGuessAlert=e}(modules=modules||{}),function(h){var c,t,e,i;function n(){return null!==t&&t.apply(this,arguments)||this}c=h.fairy||(h.fairy={}),e=ui.FairyholdSucceedAlertUI,t=e,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",28),this.contentTxt.style.leading=10},n.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateView()},n.prototype.updateView=function(){var t=c.FairyModel.instance.logList,e=t[t.length-1],i=e[4];console.log("奖励扣除百分比"+i);var n=e[2],s=e[0],o=h.config.FairyCfg.instance.getCfgById(s),a=o[1];this.contentTxt.innerHTML="<span style='color:#ff3e3e'>【"+n+"】</span>对您护送的<span style='color:"+h.common.CommonUtil.getColorByQuality(s)+"'>【"+a+"】</span>发起拦劫并胜利,您被掠夺了:";var r=o[6],l=r[0][0];this.iconImg_0.skin=CommonUtil.getIconById(l,!0),this.numTxt_0.text=""+r[0][1]*i*(c.FairyModel.instance.isDouble?2:1),l=r[1][0],this.iconImg_1.skin=CommonUtil.getIconById(l,!0),this.numTxt_1.text=""+r[1][1]*i*(c.FairyModel.instance.isDouble?2:1),this.timeTxt.text=c.FairyModel.instance.formatDate(e[1])},i=n,c.FairyHoldSucceedAlert=i}(modules=modules||{}),function(t){var n,e,i,s,o,a,r,l;function h(){return null!==e&&e.apply(this,arguments)||this}n=t.guide||(t.guide={}),i=Laya.Sprite,s=Laya.Point,o=ui.GuideViewUI,a=t.notice.SystemNoticeManager,r=Laya.HitArea,e=o,__extends(h,e),h.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.closeByOthers=!1,this.hitArea=new r,this._bg=new i,this._bg.alpha=.5,this._eff=t.common.CommonUtil.creatEff(this,"dianji/dianji",11),this._eff.visible=!1,this._eff.stop(),this.girlImg.visible=this.talkBgImg.visible=this.cornerImg.visible=this.talkTxt.visible=!1,this.txtBgImg.visible=this.descTxt.visible=!1,this.layer=10},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GUIDE_CUR_UPDATE",this,this.updateCurGuide),this.onAutoGlobalEvt("RESIZE_UI",this,this.resizeHandler),this.onAutoClick(this,this,this.bgClickHandler)},h.prototype.bgClickHandler=function(){a.instance.addNotice("请点击箭头引导区域",!0,this.layer)},h.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.layer=0===t?10:t},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.resizeHandler(),this.updateCurGuide()},h.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.relayout),this._guide=null,this._spr=null,this._tween&&this._tween.stop(),this._eff.visible=!1,this._eff.stop()},h.prototype.updateCurGuide=function(){this.mouseEnabled=!1;var t=n.GuideModel.instance.curGuide;t?(this._guide=t,LayerManager.instance.lockAllLayer(!1),this._sprId=t[3],this.mouseEnabled=1===t[5],this.girlImg.visible=this.talkBgImg.visible=this.cornerImg.visible=this.talkTxt.visible="1"===t[8],this.txtBgImg.visible=this.descTxt.visible=this.arrowImg.visible=this.borderImg.visible=!1,this._spr=n.GuideModel.instance.getUIByid(t[3]),this._spr&&!this._spr.destroyed&&(this._spr.once(Laya.Event.CLICK,this,this.clickHandler),t[6]&&(this.txtBgImg.visible=this.descTxt.visible=!0,this.descTxt.text=t[7],this.descTxt.width=this.descTxt.textWidth,this.descTxt.height=this.descTxt.textHeight,this.txtBgImg.size(this.descTxt.width+32,this.descTxt.height+32)),this.arrowImg.visible=0!==t[4],this.borderImg.visible=96!==t[3],Laya.timer.loop(300,this,this.relayout),0<t[10].length?(this._eff.visible=!0,this._eff.play()):(this._eff.visible=!1,this._eff.stop()),this.relayout(),this._tween&&this._tween.stop(),this.descBox.pos(this._arrowStartPos[0],this._arrowStartPos[1],!0),this._tween=TweenJS.create(this.descBox),this.tweenToEnd())):this.close()},h.prototype.tweenToEnd=function(){this._tween.to({x:this._arrowStartPos[0],y:this._arrowStartPos[1]},200).onComplete(this.tweenToStart.bind(this)).start()},h.prototype.tweenToStart=function(){this._tween.to({x:this._arrowEndPos[0],y:this._arrowEndPos[1]},200).onComplete(this.tweenToEnd.bind(this)).start()},h.prototype.relayout=function(){if(!this._spr.destroyed){var t=s.TEMP;t.setTo(0,0),this._spr.localToGlobal(t),this.globalToLocal(t),this.borderImg.pos(t.x-26,t.y-26,!0),this.borderImg.size(this._spr.width+52,this._spr.height+52);var e=this._guide[10];0<e.length&&this._eff.pos(this.borderImg.x+e[0],this.borderImg.y+e[1],!0),this._guide&&"1"===this._guide[8]&&(this.talkTxt.text=this._guide[11],this.talkTxt.height=this.talkTxt.textHeight,this.girlImg.pos(this.borderImg.x+this._guide[9][0],this.borderImg.y+this._guide[9][1],!0),this.cornerImg.pos(this.girlImg.x+262,this.girlImg.y+20,!0),this.talkBgImg.size(this.talkTxt.width+32,this.talkTxt.height+32),this.talkBgImg.pos(this.cornerImg.x-42,this.cornerImg.y-this.talkBgImg.height+16,!0),this.talkTxt.pos(this.talkBgImg.x+16,this.talkBgImg.y+16,!0)),this.hitArea.unHit.clear(),this.hitArea.unHit.drawRect(t.x,t.y,this._spr.width,this._spr.height,"#000000"),this._guide&&this._guide[5]?(this._bg.graphics.clear(),this._bg.graphics.drawRect(0,0,t.x,CommonConfig.viewHeight,"#000000"),this._bg.graphics.drawRect(t.x,0,this._spr.width,t.y,"#000000"),this._bg.graphics.drawRect(t.x,t.y+this._spr.height,this._spr.width,CommonConfig.viewHeight-t.y-this._spr.height,"#000000"),this._bg.graphics.drawRect(t.x+this._spr.width,0,CommonConfig.viewWidth-t.x-this._spr.width,CommonConfig.viewHeight,"#000000"),this.addChildAt(this._bg,0)):this._bg.removeSelf();var i=n.GuideModel.instance.curGuide[4];this._arrowStartPos||(this._arrowStartPos=[],this._arrowEndPos=[]),1===i?(this._arrowStartPos[0]=this.borderImg.x+.5*this.borderImg.width,this._arrowStartPos[1]=this.borderImg.y,this._arrowEndPos[0]=this._arrowStartPos[0],this._arrowEndPos[1]=this._arrowStartPos[1]+20,this.arrowImg.rotation=90,this.txtBgImg.pos(.5*-this.txtBgImg.width,-124-this.txtBgImg.height,!0),this.descTxt.pos(this.txtBgImg.x+16,this.txtBgImg.y+16,!0)):2===i?(this._arrowStartPos[0]=this.borderImg.x+.5*this.borderImg.width,this._arrowStartPos[1]=this.borderImg.y+this.borderImg.height,this._arrowEndPos[0]=this._arrowStartPos[0],this._arrowEndPos[1]=this._arrowStartPos[1]-20,this.arrowImg.rotation=270,this.txtBgImg.pos(.5*-this.txtBgImg.width,124,!0),this.descTxt.pos(this.txtBgImg.x+16,this.txtBgImg.y+16,!0)):3===i?(this._arrowStartPos[0]=this.borderImg.x,this._arrowStartPos[1]=this.borderImg.y+.5*this.borderImg.height,this._arrowEndPos[0]=this._arrowStartPos[0]+20,this._arrowEndPos[1]=this._arrowStartPos[1],this.arrowImg.rotation=0,this.txtBgImg.pos(-124-this.txtBgImg.width,.5*-this.txtBgImg.height,!0),this.descTxt.pos(this.txtBgImg.x+16,this.txtBgImg.y+16,!0)):4===i&&(this._arrowStartPos[0]=this.borderImg.x+this.borderImg.width,this._arrowStartPos[1]=this.borderImg.y+.5*this.borderImg.height,this._arrowEndPos[0]=this._arrowStartPos[0]-20,this._arrowEndPos[1]=this._arrowStartPos[1],this.arrowImg.rotation=180,this.txtBgImg.pos(124,.5*-this.txtBgImg.height,!0),this.descTxt.pos(this.txtBgImg.x+16,this.txtBgImg.y+16,!0))}},h.prototype.clickHandler=function(){GlobalData.dispatcher.event("GUIDE_CLICK_TARGET",this._sprId)},h.prototype.resizeHandler=function(){this.width=CommonConfig.viewWidth,this.height=CommonConfig.viewHeight,this.hitArea.hit.drawRect(0,0,this.width,this.height,"#000000")},h.prototype.destroy=function(t){void 0===t&&(t=!0),this._spr&&(this._spr.destroy(!0),this._spr=null),this._tween&&(this._tween.stop(),this._tween=null),this._bg&&(this._bg.destroy(!0),this._bg=null),this._eff&&(this._eff.destroy(!0),this._eff=null),e.prototype.destroy.call(this,t)},l=h,n.GuidePanel=l}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.adventure||(t.adventure={}),n=ui.AdventureShopViewUI,s=t.common.SimpleList,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=s.create(e.AdventureShopItem,303,169,1,2,14,14),this.addChildAt(this._list,3),this._list.pos(50,118,!0),this._list.size(620,922),this._list.datas=e.AdventureExchangeCfg.instance.cfgs,this.icon.skin=t.common.CommonUtil.getIconById(92740001,!0)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ADVENTURE_POINT_UPDATE",this,this.updatePoint)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updatePoint()},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.updatePoint=function(){var t=e.AdventureModel.instance.point||0;this.pointTxt.text=t+""},o=a,e.AdventureShopPanel=o}(modules=modules||{}),function(t){var i,e,n,s,o,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}i=t.adventure||(t.adventure={}),n=ui.AdventureMonsterViewUI,s=t.common.CustomList,o=t.bag.BaseItem,a=t.common.ListWithArrowCtrl,e=n,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.bottom=232,this.closeByOthers=!1,this.zOrder=-1,this.layer=3,this._list=new s,this._list.vCount=1,this._list.spaceX=10,this._list.pos(92,90,!0),this._list.size(400,100),this._list.scale(.8,.8,!0),this._list.scrollDir=2,this.addChild(this._list),this._list.itemRender=o,this._arrowCtrl=new a(this._list,this.preBtn,this.nextBtn),this._arrowCtrl.scrollDis=400},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this._arrowCtrl.addListeners(),this.onAutoGlobalEvt("ADVENTURE_DROP_ITEMS_UPDATE",this,this.updateDropItems)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._arrowCtrl.removeListeners()},l.prototype.close=function(){e.prototype.close.call(this),this._list.datas=null},l.prototype.updateDropItems=function(){var t=i.AdventureModel.instance.dropItems;if(0!==t.length){var e=this._list.scrollPos;this._list.datas=t,this._list.scrollPos=e}},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._arrowCtrl=this.destroyElement(this._arrowCtrl),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},r=l,i.AdventureMonsterPanel=r}(modules=modules||{}),function(t){var e,a,i,n;function s(){return null!==a&&a.apply(this,arguments)||this}e=t.adventure||(t.adventure={}),i=t.common.NumInputCtrl,a=ui.StoreAlertUI,__extends(s,a),s.prototype.initialize=function(){a.prototype.initialize.call(this),this._input=new i(this.numInput,this.addBtn,this.reduceBtn,this.addTenBtn,this.reduceTenBtn)},s.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.purchaseBtn,this,this.purchaseHandler),this.onAutoEvt(this._input,"change",this,this.inputHandler),this._input.addListeners()},s.prototype.offEvt=function(){a.prototype.offEvt.call(this),this._input.removeListeners()},s.prototype.purchaseHandler=function(){this._handler.runWith(this._input.value),this.close()},s.prototype.inputHandler=function(){this.totalPriceTxt.text=(this._input.value*parseInt(this.priceTxt.text)).toString()},s.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t),this._handler=t[0];var e=t[1],i=t[2],n=t[3];this.baseItem.dataSource=[e[0],e[1],0,null],this.itemName.text=this.baseItem._nameTxt.text,this.totalPriceImg.skin=this.priceImg.skin=CommonUtil.getIconById(i[0],!0),this.priceTxt.text=i[1].toString();var s=CommonUtil.getPropCountById(i[0]),o=Math.floor(s/i[1]);this._input.max=0<n&&n<o?n:o,this._input.min=1,this._input.notice="购买数量",this._input.value=1,this.inputHandler()},n=s,e.AdventureShopAlert=n}(modules=modules||{}),function(t){var o,e,s,a,i,r,n;function l(){return e.call(this)||this}o=t.action_preview||(t.action_preview={}),s=t.common.CustomClip,a=t.config.ActionOpenCfg,i=t.common.SimpleList,r=t.config.ActionPreviewCfg,e=ui.ActionPreviewAlertUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(o.ActionPreviewItem,176,188,1,3,14,5),this._list.width=556,this._list.height=462,this._list.x=53,this._list.y=67,this._list.selectedIndex=-1,this.addChildAt(this._list,1),this._awardItems=new Array,this._awardItems=[this.rewrdBase1,this.rewrdBase2,this.rewrdBase3,this.rewrdBase4,this.rewrdBase5],this._challengeClip=s.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.receiveBtn.addChildAt(this._challengeClip,0),this._challengeClip.pos(-5,-9,!0),this._challengeClip.scale(.8,.8)},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._challengeClip=this.destroyElement(this._challengeClip),this._awardItems=this.destroyElement(this._awardItems),e.prototype.destroy.call(this)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("ACTION_PREVIEW_UPDATE",this,this.updateList),this.onAutoClick(this.receiveBtn,this,this.receiveBtnHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateList()},l.prototype.updateList=function(){this._list.datas=r.instance.cfgs,this.checkSelect()},l.prototype.checkSelect=function(){for(var t=r.instance.cfgs,e=0,i=!1,n=0,s=t.length;n<s;n++)if(2===o.ActionPreviewModel.instance.getState(t[n])){e=n,i=!0;break}if(!i)for(n=0,s=t.length;n<s;n++)if(1===o.ActionPreviewModel.instance.getState(t[n])){e=n;break}this._list.selectedIndex=e,this.selectHandler(),this._list.scrollToIndex(e)},l.prototype.selectHandler=function(){var t=r.instance.cfgs[this._list.selectedIndex];if(t){var e=t[4],i=t[6];this.actionImg.skin="assets/icon/ui/get_way/"+t[2]+".png",this.actionText.text=a.instance.getCfgById(t[0])[0],this.actionInstructionsImg.skin="assets/icon/ui/action_preview/"+t[3]+".png",this.actionText2.text=i;var n=o.ActionPreviewModel.instance.getState(t);this.actionText2.visible=1==n,this.receiveBtn.visible=2==n,this.receiveTrueImg.visible=0==n,2==n?s.thisPlay(this._challengeClip):s.thisStop(this._challengeClip),this.showAward(e)}},l.prototype.receiveBtnHandler=function(){if(-1!==this._list.selectedIndex){var t=r.instance.cfgs[this._list.selectedIndex];o.ActionPreviewCtrl.instance.getActionPreviesAward(t[0])}},l.prototype.showAward=function(t){if(t)for(var e=80*t.length+10*(t.length-1),i=(this.width-e)/2,n=0,s=this._awardItems.length;n<s;n++){var o=t[n]?t[n][0]:0,a=t[n]?t[n][1]:0,r=this._awardItems[n];r&&o&&a?(r.dataSource=[o,a,0,null],r.x=i,i+=.8*r.width+10,r.visible=!0):r.visible=!1}},n=l,o.ActionPreviewAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.action_preview||(t.action_preview={}),n=ui.ActionPreviewViewUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.right=15,this.bottom=810,this.closeByOthers=!1,this.layer=3},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ACTION_PREVIEW_UPDATE",this,this.updateState),this.onAutoGlobalEvt("MISSION_UPDATE_LV",this,this.updateState),this.onAutoGlobalEvt("PLAYER_UPDATE_LEVEL",this,this.updateState),this.onAutoClick(this,this,this.clickHandler),this.regAutoRP(this.RpImg,["actionPreviewEnterRP"])},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateState()},o.prototype.updateState=function(){if(e.ActionPreviewModel.instance.isNotAward())this.close();else{e.ActionPreviewModel.instance.showRp();var t=e.ActionPreviewModel.instance.getNotActionDate();t&&(this.timeTxt.text=t[5],this.bgImg.width=this.timeTxt.textWidth+20,this.iconImg.skin="assets/icon/ui/action_preview/"+t[1]+".png")}},o.prototype.clickHandler=function(){WindowManager.instance.open(255)},s=o,e.ActionPreviewPanel=s}(modules=modules||{}),function(t){var e,s,i,o,n;function a(){return null!==s&&s.apply(this,arguments)||this}e=t.action_preview||(t.action_preview={}),i=laya.maths.Point,o=t.config.ActionOpenCfg,s=ui.ActionPreviewNewAlertUI,__extends(a,s),a.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.closeOnSide=!1},a.prototype.close=function(){if(s.prototype.close.call(this),this._date){i.TEMP.setTo(0,0),this.actionImg.localToGlobal(i.TEMP);var t=this.height,e=[this._date,i.TEMP,t];GlobalData.dispatcher.event("ACTION_PREVIEW_EFFECT",[e])}},a.prototype.setOpenParam=function(t){if(s.prototype.setOpenParam.call(this,t),Laya.timer.clear(this,this.itemEffect),t){var e=(this._date=t)[0],i=t[2],n=o.instance.getCfgById(e);this.actionText.text=n[0],this.actionImg.skin="assets/icon/ui/get_way/"+i+".png"}Laya.timer.once(1500,this,this.itemEffect)},a.prototype.itemEffect=function(){this.close()},a.prototype.offEvt=function(){s.prototype.offEvt.call(this),Laya.timer.clear(this,this.itemEffect)},n=a,e.ActionPreviewNewAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){this.init()}e=t.config||(t.config={}),i=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._dic=new i,this._arr=new Array,this._arr=GlobalData.getConfig("online_reward_entrance");for(var t=0,e=this._arr.length;t<e;t++)this._dic.set(this._arr[t][0],this._arr[t])},s.prototype.getCfgById=function(t){return this._dic.get(t)},s.prototype.get_arr=function(){return this._arr},n=s,e.OnlineRewardEntranceCfg=n}(modules=modules||{}),function(h){var t,e,i,c,p,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=h.main||(h.main={}),i=ui.OnlineEeterViewUI,c=h.config.OnlineRewardEntranceCfg,p=h.funcOpen.FuncOpenModel,e=i,__extends(s,e),s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.initializeQuickToReceive()},s.prototype.initializeQuickToReceive=function(){this.rewardShowItem.setDataFun([1,.4,.25,.3,"assets/icon/ui/online_reward/"]),this.showQuickToReceive()},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.bgImg,this,this.QuickToReceiveBoxHandler),this.onAutoGlobalEvt("UPDATE_ONLINE_REWARD_REPLY",this,this.showQuickToReceive),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funOpenGetSprintRankInfo)},s.prototype.funOpenGetSprintRankInfo=function(t){for(var e=0;e<t.length;e++)5==t[e]&&(p.instance.getFuncIsOpen(5)||this.showQuickToReceive())},s.prototype.showQuickToReceive=function(){var t=h.player.PlayerModel.instance.getDay(),e=h.onlineGift.OnlineGiftModel.instance.isOver(),i=2===p.instance.getFuncStateById(5);if(4<=h.player.PlayerModel.instance.getDayNum())return this.removeSelf(),void this.close();if(e){if(i)return this.removeSelf(),void this.close();if(t)return this.removeSelf(),void this.close()}Laya.timer.clear(this,this.showQuickToReceiveLoopHandler);var n=h.onlineGift.OnlineGiftModel.instance.getTruerReward(),s=0,o=0,a=0;if(n)this._obtainId=n[0],this._obtainState=n[1],this._obtainTime=n[2],0==this._obtainState?(Laya.timer.loop(1e3,this,this.showQuickToReceiveLoopHandler),this.showQuickToReceiveLoopHandler()):1==this._obtainState&&(this.QuickToReceiveTimeText.text="可领取"),(r=h.config.OnlineGiftCfg.instance.getCfgsById(this._obtainId))&&(s=r[6],o=r[7],a=r[8]);else{this.QuickToReceiveTimeText.text="明日可领取";var r,l=h.player.PlayerModel.instance.getDayNum1();if(!(r=c.instance.getCfgById(l)))return this.removeSelf(),void this.close();s=r[1],o=r[2],a=r[3]}s||(a=o=s=0),this.rewardShowItem.stopTween(),this.rewardShowItem.showRewardObj(s,a,o)},s.prototype.showQuickToReceiveLoopHandler=function(){this._obtainTime?(this.QuickToReceiveTimeText.text=""+h.common.CommonUtil.timeStampToMMSS(this._obtainTime),this._obtainTime<GlobalData.serverTime&&(this.QuickToReceiveTimeText.text="可领取",Laya.timer.clear(this,this.showQuickToReceiveLoopHandler))):Laya.timer.clear(this,this.showQuickToReceiveLoopHandler)},s.prototype.QuickToReceiveBoxHandler=function(){if(h.onlineGift.OnlineGiftModel.instance.getTruerReward())0==this._obtainState?WindowManager.instance.open(31):1==this._obtainState&&WindowManager.instance.open(31);else{var t=h.player.PlayerModel.instance.getDay(),e=2===p.instance.getFuncStateById(5);if(t)return this.removeSelf(),void this.close();if(e)return void this.close();WindowManager.instance.open(34)}},s.prototype.close=function(){Laya.timer.clear(this,this.showQuickToReceiveLoopHandler),this.rewardShowItem.stopTween(),e.prototype.close.call(this)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this.rewardShowItem=this.destroyElement(this.rewardShowItem),e.prototype.destroy.call(this,t)},n=s,t.OnlineEeterPanel=n}(modules=modules||{}),function(i){var t,e,n,s,o;function a(){return e.call(this)||this}t=i.commonAlert||(i.commonAlert={}),n=ui.SetInputWordAlertUI,s=i.notice.SystemNoticeManager,e=n,__extends(a,e),a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.handler)},a.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.title=t[0],this.inputTxt.prompt=t[1],this._handler=t[2],this._limitLen=t[3],this.inputTxt.text=""},Object.defineProperty(a.prototype,"title",{set:function(t){this.titleTxt.text=t},enumerable:!0,configurable:!0}),a.prototype.handler=function(){var t=this,e=this.inputTxt.text;e?i.chat.ChatModel.instance.isValidContent(e)?null!=this._limitLen&&e.length>this._limitLen?s.instance.addNotice("最多输入"+this._limitLen+"个字符",!0):CommonUtil.checkWords(e,function(){t._handler&&t._handler.runWith(e),t.close()}):s.instance.addNotice("包含非法字符",!0):s.instance.addNotice("输入内容不能为空",!0)},o=a,t.SetInputWordAlert=o}(modules=modules||{}),function(t){var e,r,i;function n(){this.init()}e=t.config||(t.config={}),r=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._dic=new r,this._arr=new Array,this._arr1=new Array,this._tab={},this.attrIds=[],this._arr=GlobalData.getConfig("designation");for(var t=0,e=this._arr.length;t<e;t++){this._dic.set(this._arr[t][0],this._arr[t]);var i=this._arr[t][3],n=this._arr[t][13];this._tab[i]||(this._tab[i]=[]),this._tab[i].push(this._arr[t]),1===n&&this._arr1.push(this._arr[t]);for(var s=this._arr[t][5],o=0,a=s.length;o<a;o+=2)-1===this.attrIds.indexOf(s[o])&&this.attrIds.push(s[o])}},n.prototype.getAllCahtTitle=function(){return this._arr1},n.prototype.getCfgById=function(t){return this._dic.get(t)},n.prototype.getCfgByType=function(t){return this._tab[t]},n.prototype.get_arr=function(){return this._arr},n.prototype.getCfgAttrids=function(){return this.attrIds},i=n,e.DesignationCfg=i}(modules=modules||{}),function(t){var o,e,i,n,a,s;function r(){return e.call(this)||this}o=t.player_title||(t.player_title={}),i=t.common.CustomList,n=t.common.BtnGroup,a=t.config.DesignationCfg,e=ui.PlayerTitleViewUI,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new i,this._list.width=620,this._list.height=755,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=o.PlayerTitleItem,this._list.x=0,this._list.y=0,this.listBox.addChild(this._list),this._btnGroup=new n,this._btnGroup.setBtns(this.titleTypeBtn1,this.titleTypeBtn2,this.titleTypeBtn3)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this.updatRp(),this.updateList(),o.PlayerTitleCtrl.instance.GetDesignation(),this.RpImg1.visible?this._btnGroup.selectedIndex=0:this.RpImg2.visible?this._btnGroup.selectedIndex=1:this.RpImg3.visible&&(this._btnGroup.selectedIndex=2),this.setBtn.visible=!0,this.attrBtn.visible=!0},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this,t)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoClick(this.setBtn,this,this.setBtnHandler),this.onAutoClick(this.attrBtn,this,this.totalAttrHandler),this.onAutoGlobalEvt("PLAYER_TITLE_OPENUPDATE",this,this.updateOpenList),this.onAutoGlobalEvt("PLAYER_TITLE_UPDATE",this,this.updatRp)},r.prototype.setBtnHandler=function(){WindowManager.instance.open(702)},r.prototype.totalAttrHandler=function(){var t=o.PlayerTitleModel.instance.getAtkNum();WindowManager.instance.openDialog(26,["称号总属性",t,o.PlayerTitleModel.instance.getAttrs(),a.instance.getCfgAttrids()])},r.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(this._activityAllArray=a.instance.getCfgByType(1),this.updateList()):1===this._btnGroup.selectedIndex?(this._activityAllArray=a.instance.getCfgByType(2),this.updateList()):2===this._btnGroup.selectedIndex&&(this._activityAllArray=a.instance.getCfgByType(3),this._activityAllArray=this._activityAllArray.filter(function(t){return o.PlayerTitleModel.instance.AllDate[t[0]]}),this.updateList())},r.prototype.updatRp=function(){this.RpImg1.visible=o.PlayerTitleModel.instance.isRpOfType(1),this.RpImg2.visible=o.PlayerTitleModel.instance.isRpOfType(2),this.RpImg3.visible=o.PlayerTitleModel.instance.isRpOfType(3);var t=o.PlayerTitleModel.instance.getAtkNum();this.atkMsz.value=""+t,this.titleTypeBtn1.label=this.getJinDu(1),this.titleTypeBtn2.label=this.getJinDu(2),this.titleTypeBtn3.label=this.getJinDu(3)},r.prototype.getJinDu=function(t){var e=o.PlayerTitleModel.instance.getJjinDu(t),i="称号0/0",n="大荒",s=a.instance.getCfgByType(t);return s&&(n=s[0][4]),e&&(i=n+"("+e[0]+"/"+e[1]+")"),i},r.prototype.updateOpenList=function(){this._list.relayout()},r.prototype.overSort=function(t,e){var i=o.PlayerTitleModel.instance.getState(t),n=o.PlayerTitleModel.instance.getState(e);return i==n?1e7<=t[0]||1e7<=e[0]?e[0]-t[0]:t[0]-e[0]:n-i},r.prototype.updateList=function(){null!=this._activityAllArray&&0<this._activityAllArray.length&&(this._activityAllArray.sort(this.overSort),this._list.datas=this._activityAllArray,this._list.relayout())},s=r,o.PlayerTitlePanel=s}(modules=modules||{}),function(t){var s,o,e,i,n;function a(){return null!==o&&o.apply(this,arguments)||this}s=t.vip||(t.vip={}),e=t.common.SimpleList,i=Laya.Event,o=ui.VipMeiRiRewordAlertUI,__extends(a,o),a.prototype.initialize=function(){o.prototype.initialize.call(this),this._list=e.create(t.yunmeng.YunMengItem,100,122,1,4),this._list.width=522,this._list.height=120,this.addChild(this._list),this._list.spaceX=30,this._list.spaceY=17,this._list.pos(69,125,!0),this._challengeClip=CommonUtil.creatEff(this,"btn_light",15),this._challengeClip.pos(this.sureBtn.x-5,this.sureBtn.y-9,!0),this._challengeClip.visible=!1},a.prototype.onOpened=function(){o.prototype.onOpened.call(this);var t=s.VipModel.instance.vipLevel;t=0==t?1:t;var e=s.VipModel.instance.getVipCfgByLevel(t);if(e){var i=e[14];if(i){var n=CommonUtil.formatItemData(i);this._list.datas=n}}this.titleTxt.text="SVIP"+t+"每日奖励",this.showMeiRiBox(),this.showRewardList()},a.prototype.destroy=function(){this.destroyElement(this._list),this.destroyElement(this._challengeClip),o.prototype.destroy.call(this)},a.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.sureBtn.on(i.CLICK,this,this.sureBtnHandler),this.onAutoGlobalEvt("VIP_UPDATE",this,this.showMeiRiBox)},a.prototype.offEvt=function(){o.prototype.offEvt.call(this),this.sureBtn.on(i.CLICK,this,this.sureBtnHandler)},a.prototype.sureBtnHandler=function(){0<s.VipModel.instance.vipLevel?s.VipCtrl.instance.getVipDayReward():t.notice.SystemNoticeManager.instance.addNotice("SVIP1可领取",!0)},a.prototype.showMeiRiBox=function(){0==s.VipModel.instance.dayRewardState&&0<s.VipModel.instance.vipLevel?(this._challengeClip.play(),this._challengeClip.visible=!0):(this._challengeClip.stop(),this._challengeClip.visible=!1),this.sureBtn.visible=!s.VipModel.instance.dayRewardState,this.receiveImg.visible=s.VipModel.instance.dayRewardState},a.prototype.showRewardList=function(){var t=this._list.datas.length,e=100*(t=5<t?5:t)+(t-1)*this._list.spaceX;this._list.x=(this.width-e)/2},n=a,s.VipMeiRiRewordAlert=n}(modules=modules||{}),function(i){var l,e,n,t,s,o,a,r,h,c,p;function u(){return null!==e&&e.apply(this,arguments)||this}l=i.arena||(i.arena={}),n=i.arena.ArenaCtrl,t=ui.ArenaViewUI,s=i.common.AvatarClip,o=i.config.BlendCfg,a=Laya.Rectangle,r=i.redPoint.RedPointCtrl,h=i.customData.CustomDataCtrl,c=i.customData.CustomDataModel,e=t,__extends(u,e),u.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.cdTxt.text="",this._avatar1=s.create(1024,1024,1024),this.addChildAt(this._avatar1,3),this._avatar1.pos(146,540,!0),this._avatar1.anchorX=.5,this._avatar1.anchorY=.5,this._avatar1.avatarRotationY=180,this._avatar1.hitArea=new a(-100+this._avatar1.pivotX,-300+this._avatar1.pivotY,200,300),this._avatar2=s.create(1024,1024,1024),this.addChildAt(this._avatar2,3),this._avatar2.pos(366,450,!0),this._avatar2.anchorX=.5,this._avatar2.anchorY=.5,this._avatar2.avatarRotationY=180,this._avatar2.hitArea=new a(-100+this._avatar1.pivotX,-300+this._avatar1.pivotY,200,300),this._avatar3=s.create(1024,1024,1024),this.addChildAt(this._avatar3,3),this._avatar3.pos(582,540,!0),this._avatar3.anchorX=.5,this._avatar3.anchorY=.5,this._avatar3.avatarRotationY=180,this._avatar3.hitArea=new a(-100+this._avatar1.pivotX,-300+this._avatar1.pivotY,200,300),this._avatars=[this._avatar1,this._avatar2,this._avatar3],this._nameTxts=[this.nameTxt1,this.nameTxt2,this.nameTxt3],this._rankClips=[this.rankClip1,this.rankClip2,this.rankClip3],this._rankImgs=[this.rankImg1,this.rankImg2,this.rankImg3],this._fightClips=[this.fightClip1,this.fightClip2,this.fightClip3],this._rankXArr=[146,366,582],this._attClip1=CommonUtil.creatEff(this,"fight_effect",5),this._attClip1.pos(110,485,!0),this._attClip2=CommonUtil.creatEff(this,"fight_effect",5),this._attClip2.pos(330,400,!0),this._attClip3=CommonUtil.creatEff(this,"fight_effect",5),this._attClip3.pos(540,485,!0)},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.honorBtn,this,this.honorHandler),this.onAutoClick(this.recordsBtn,this,this.recordsHandler),this.onAutoClick(this.rankBtn,this,this.rankHandler),this.onAutoClick(this.addBtn,this,this.addHandler),this.onAutoClick(this.resetCDBtn,this,this.resetCDHandler),this.onAutoClick(this.refreshBtn,this,this.refreshHandler),this.onAutoClick(this._avatar1,this,this.avatarClickHandler,[0]),this.onAutoClick(this._avatar2,this,this.avatarClickHandler,[1]),this.onAutoClick(this._avatar3,this,this.avatarClickHandler,[2]),this.onAutoClick(this.ladderBtn,this,this.ladderHandler),this.onAutoClick(this.quickCheck,this,this.checkHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.closeBtn&&this.closeBtn.off(Laya.Event.CLICK,this,this.close),this.onAutoClick(this.closeBtn,this,this.closeHandler),this.backBtn&&this.backBtn.off(Laya.Event.CLICK,this,this.close),this.onAutoClick(this.backBtn,this,this.closeHandler),this.onAutoGlobalEvt("ARENA_TIMES_UPDATE",this,this.updateTimes),this.onAutoGlobalEvt("ARENA_OBJS_UPDATE",this,this.updateObjs),this.onAutoGlobalEvt("PLAYER_UPDATE_FIGHT",this,this.updateFight),this.onAutoGlobalEvt("BROADCAST_SCENE_OPEN_DAY_UPDATE",this,this.updatePeak),this.onAutoGlobalEvt("ARENA_QUICK_UPDATE",this,this.updateCheck),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.onAutoClick(this.xdBtn,this,function(){WindowManager.instance.open(1292)}),this.regAutoRP(this.jingjiRP,["arenaRP"]),this.regAutoRP(this.xdRP,["immortalContest"])},u.prototype.onOpened=function(){e.prototype.onOpened.call(this),n.instance.getArena(),h.instance.getCustomizeData([15]),this.updateTimes(),this.updateObjs(),this.updateFight(),this.updatePeak(),this.updateCheck(),this._attClip1.play(),this._attClip2.play(),this._attClip3.play(),PlatParams.isCloseRecharge&&(this.addBtn.visible=!1),24===i.scene.SceneUtil.currScene&&i.arena.ArenaModel.instance.waitState&&(PlayerModel.instance.selectTarget(0,-1),i.dungeon.DungeonCtrl.instance.reqEnterNextLevel())},u.prototype.updatePlatChangeRecharge=function(){this.addBtn.visible=!PlatParams.isCloseRecharge},u.prototype.updateCheck=function(){var t=c.instance.getCustomDataByKey(15);this.quickCheck.selected=t&&1===t[0]},u.prototype.updateTimes=function(){var t=l.ArenaModel.instance.arenaTimes;if(t){var e=t[2];this.timesTxt.text=e+"/"+t[1],this.timesTxt.color=0<e?"#50ff28":"#e6372e",this.maxRankTxt.text=""+t[4],t[0]>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.cdTxt.visible=this.resetCDBtn.visible=!0,this.refreshBtn.visible=!1,this.loopHandler()):(this.cdTxt.visible=this.resetCDBtn.visible=!1,this.refreshBtn.visible=!0,Laya.timer.clear(this,this.loopHandler))}},u.prototype.updateObjs=function(){var t=l.ArenaModel.instance.objs;if(t){var e=t[3][4];this.curRankTxt.text=""+e;var i=l.ArenaCfg.instance.getCfgByRank(e)[4];this.item1.dataSource=[i[0][0],i[0][1],0,null],this.item2.dataSource=[i[1][0],i[1][1],0,null];for(var n=0,s=t.length-1;n<s;n++){var o=t[n],a=o[5];this._avatars[n].reset(a[1],a[2]),this._nameTxts[n].text=o[2],this._rankClips[n].value=""+o[4],this._fightClips[n].value=""+o[3];var r=38*this._rankClips[n].value.length*.6;this._rankClips[n].x=this._rankXArr[n]-.5*(27+r),this._rankImgs[n].x=this._rankClips[n].x+r-5}}},u.prototype.updateFight=function(){this.myFightTxt.text=""+PlayerModel.instance.fight},u.prototype.addHandler=function(){WindowManager.instance.openDialog(59,73)},u.prototype.resetCDHandler=function(){var t=l.ArenaModel.instance.arenaTimes;if(t){var e=o.instance.getCfgById(37002)[1][0];e*=Math.ceil(.001*(t[0]-GlobalData.serverTime)),CommonUtil.alert("提示",'消除CD需要消耗<img src="'+CommonUtil.getIconById(90140001,!0)+'" width="40" height="40"/>'+e+"，是否消除？",[Handler.create(this,this.confirmResetCDHandler)])}},u.prototype.confirmResetCDHandler=function(){n.instance.resetEnterCD()},u.prototype.honorHandler=function(){WindowManager.instance.open(235)},u.prototype.recordsHandler=function(){WindowManager.instance.open(291)},u.prototype.rankHandler=function(){WindowManager.instance.open(290)},u.prototype.refreshHandler=function(){n.instance.flushArena()},u.prototype.checkHandler=function(){var t=this.quickCheck.selected?1:0;h.instance.setCustomData(15,[t])},u.prototype.helpHandler=function(){CommonUtil.alertHelp(19005)},u.prototype.loopHandler=function(){var t=l.ArenaModel.instance.arenaTimes[0];t>GlobalData.serverTime?(this.cdTxt.text=CommonUtil.msToHHMMSS(t-GlobalData.serverTime),this.cdTxt.visible=this.resetCDBtn.visible=!0,this.refreshBtn.visible=!1):(this.cdTxt.visible=this.resetCDBtn.visible=!1,this.refreshBtn.visible=!0,Laya.timer.clear(this,this.loopHandler))},u.prototype.updatePeak=function(t){2361!==t&&2281!==t&&null!=t||(i.peakDuel.PeakDuelCtrl.instance.isOpen?(this.ladderBtn.skin="arena/btn_dfdf_01.png",r.instance.retireRedPoint(this.tianTiRP),this.tianTiRP.visible=!1):(this.ladderBtn.skin="arena/btn_ttdf_ttdfbtn.png",this.regAutoRP(this.tianTiRP,["tianTiRP"])))},u.prototype.avatarClickHandler=function(t){var e=l.ArenaModel.instance.objs;e&&(CommonGroupUtil.notTeamCopyIsTeaming()||(24===i.scene.SceneUtil.currScene&&i.arena.ArenaModel.instance.waitState?n.instance.challengeArena(e[t][0],this.quickCheck.selected,!0):n.instance.challengeArena(e[t][0],this.quickCheck.selected)))},u.prototype.ladderHandler=function(){i.ladder.LadderCtrl.instance.canOpenPanel()},u.prototype.closeHandler=function(){this.close(),i.bottomTab.BottomTabCtrl.instance.clearStackPart()},u.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler),this._attClip1.stop(),this._attClip2.stop(),this._attClip3.stop()},u.prototype.destroy=function(t){void 0===t&&(t=!0),this._avatar1=this.destroyElement(this._avatar1),this._avatar2=this.destroyElement(this._avatar2),this._avatar3=this.destroyElement(this._avatar3),this._avatars=null,this._nameTxts=null,this._rankClips=null,this._rankImgs=null,this._fightClips=null,this._rankXArr=null,this._attClip1=this.destroyElement(this._attClip1),this._attClip2=this.destroyElement(this._attClip2),this._attClip3=this.destroyElement(this._attClip3),e.prototype.destroy.call(this,t)},p=u,l.ArenaPanel=p}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.arena||(t.arena={}),n=t.common.CustomList,s=ui.ArenaRankAlertUI,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.itemRender=e.ArenaRankItem,this._list.size(571,574),this._list.pos(50,160,!0),this.addChild(this._list)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ARENA_RANKS_UPDATE",this,this.updateRanks)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ArenaCtrl.instance.getArenaRank()},a.prototype.updateRanks=function(){var t=e.ArenaModel.instance.ranks;t.length=13,t&&(t.splice(3,t.length-3,null,null,null,null,null,null,null,null,null,null),this._list.datas=t)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.ArenaRankAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.arena||(t.arena={}),n=t.common.CustomList,s=ui.ArenaRecordsAlertUI,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.itemRender=e.ArenaRecordsItem,this._list.size(572,320),this._list.pos(40,110,!0),this.addChild(this._list)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ARENA_RECORDS_UPDATE",this,this.updateRecords)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateRecords()},a.prototype.updateRecords=function(){var t=e.ArenaModel.instance.records;t&&(this._list.datas=t)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.ArenaRecordsAlert=o}(modules=modules||{}),function(i){var s,n,t,e,o,a;function r(){return n.call(this)||this}s=i.arena||(i.arena={}),t=ui.ArenaWinAlertUI,e=i.config.BlendCfg,o=i.dungeon.DungeonCtrl,n=t,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this._duration=e.instance.getCfgById(10303)[1][0]},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close)},r.prototype.offEvt=function(){n.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),24===i.scene.SceneUtil.currScene&&(i.arena.ArenaModel.instance.waitState=!0),this._duration=e.instance.getCfgById(10303)[1][0],this.updateJudge(),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},r.prototype.updateJudge=function(){var t=s.ArenaModel.instance.arenaJudgeAward;if(t){this.changeTxt.visible=t[4];var e=t[2],i=t[3],n=t[1];this.curRankTxt.text=""+e,this.maxRankTxt.text=""+i,e<i?(this.upImg.visible=this.changeRankTxt.visible=!0,this.changeRankTxt.text=""+(i-e)):this.upImg.visible=this.changeRankTxt.visible=!1,n[0]&&(this.item1.dataSource=n[0]),n[1]&&(this.item2.dataSource=n[1]),t[5]?(this.item3.visible=!0,this.item3.dataSource=[90140001,t[5],0,null],this.item1.x=171,this.item2.x=317):(this.item3.visible=!1,this.item1.x=237,this.item2.x=396)}},r.prototype.close=function(t,e){if(n.prototype.close.call(this,t,e),24==i.scene.SceneUtil.currScene){if(s.ArenaModel.instance.isReturnCopy())return;o.instance.reqEnterScene(0)}},r.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},a=r,s.ArenaWinAlert=a}(modules=modules||{}),function(i){var n,s,t,e,a,r,o,l,h,c,p;function u(){return s.call(this)||this}n=i.arena||(i.arena={}),t=ui.ArenaLoseAlertUI,e=i.config.BlendCfg,a=i.config.FailureStrongerCfg,r=i.config.GetWayCfg,o=i.dungeon.DungeonCtrl,l=i.dungeon.DungeonModel,h=i.config.TipCfg,c=i.bottomTab.BottomTabCtrl,s=t,__extends(u,s),u.prototype.initialize=function(){s.prototype.initialize.call(this),this._wayBgs=[this.wayBg1,this.wayBg2,this.wayBg3,this.wayBg4],this._wayIcons=[this.wayIcon1,this.wayIcon2,this.wayIcon3,this.wayIcon4],this._wayNames=[this.wayName1,this.wayName2,this.wayName3,this.wayName4]},u.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),this.onAutoClick(this.wayBg1,this,this.wayClickHandler,[0]),this.onAutoClick(this.wayBg2,this,this.wayClickHandler,[1]),this.onAutoClick(this.wayBg3,this,this.wayClickHandler,[2]),this.onAutoClick(this.wayBg4,this,this.wayClickHandler,[3]),this.onAutoClick(this.gotoBtn,this,this.gotoHandler),this.onAutoGlobalEvt("TIPBIANQIANG_UPDATE",this,this.updateSpe),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},u.prototype.offEvt=function(){s.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},u.prototype.onOpened=function(){s.prototype.onOpened.call(this),24===i.scene.SceneUtil.currScene&&(i.arena.ArenaModel.instance.waitState=!0),this._duration=e.instance.getCfgById(10303)[1][0],this.updateJudge(),this.updateStrongWay(),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler(),o.instance.getTipsPriorInfo(),PlatParams.isCloseRecharge&&(this.speImg.visible=this.gotoBtn.visible=!1)},u.prototype.updatePlatChangeRecharge=function(){if(PlatParams.isCloseRecharge)this.speImg.visible=this.gotoBtn.visible=!1;else{var t=h.instance.getCfgByType(l.instance.tipType);this.speImg.visible=this.gotoBtn.visible=!!t}},u.prototype.updateJudge=function(){var t=n.ArenaModel.instance.arenaJudgeAward;if(t){var e=t[2];this.curRankTxt.text=""+e;var i=n.ArenaCfg.instance.getCfgByRank(e)[3];this.item1.dataSource=[i[0][0],i[0][1],0,null],this.item2.dataSource=[i[1][0],i[1][1],0,null],t[5]?(this.item3.visible=!0,this.item3.dataSource=[90140001,t[5],0,null],this.item1.x=161,this.item2.x=307):(this.item3.visible=!1,this.item1.x=237,this.item2.x=396)}},u.prototype.updateStrongWay=function(){for(var t=a.instance.getCfgByLevel(PlayerModel.instance.level),e=t[1],i=0,n=this._wayBgs.length;i<n;i++){var s=r.instance.getCfgById(e[i]);s&&(this._wayBgs[i].skin="assets/icon/ui/get_way/btn_ydrk_bg.png",this._wayIcons[i].skin="assets/icon/ui/get_way/"+s[1]+".png",this._wayNames[i].text=s[2])}var o=t[2];o&&(this.speImg.skin="assets/icon/ui/get_way/"+r.instance.getCfgById(o)[1]+".png")},u.prototype.updateSpe=function(){this._speCfg=h.instance.getCfgByType(l.instance.tipType),this._speCfg?(this.gotoBtn.visible=!0,this.speImg.visible=!0,this.speImg.skin="assets/icon/ui/failure_stronger/"+this._speCfg[3]+".jpg"):(this.gotoBtn.visible=!1,this.speImg.visible=!1),PlatParams.isCloseRecharge&&(this.speImg.visible=this.gotoBtn.visible=!1)},u.prototype.close=function(t,e){if(s.prototype.close.call(this,t,e),24==i.scene.SceneUtil.currScene){if(n.ArenaModel.instance.isReturnCopy())return;o.instance.reqEnterScene(0)}},u.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},u.prototype.wayClickHandler=function(t){var e=a.instance.getCfgByLevel(PlayerModel.instance.level)[1],i=r.instance.getCfgById(e[t]);this.close(),c.instance.addPanelByFunc(i[3][0])},u.prototype.gotoHandler=function(){this.close(),c.instance.addPanelByFunc(this._speCfg[4])},u.prototype.destroy=function(){this._wayBgs=null,this._wayIcons=null,this._wayNames=null,s.prototype.destroy.call(this)},p=u,n.ArenaLoseAlert=p}(modules=modules||{}),function(s){var t,e,o,i;function n(){return null!==e&&e.apply(this,arguments)||this}t=s.activity_all||(s.activity_all={}),o=Laya.Point,e=ui.ActivityAllAlertUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=1},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.closeOnSide=!0,this._bolll=!1},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.receiveBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("ACTIVITY_ALL_ALERT_OPEN",this,this.showUI)},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),t&&this.showUI(t)},n.prototype.showUI=function(t){if(console.log("活动预告弹窗接收到的数据",t),this._date=null,this._date=t,this.textImg.skin="",this.textPlayerImg.skin="",this.textPlayerImg.visible=this.textImg.visible=!1,this._date){if(this._date){this.scale(1,1,!0);var e=this._date[0];this.textImg.skin="assets/icon/ui/activity_all/txt_"+e+".png",this.textPlayerImg.skin="assets/icon/ui/activity_all/txt_player_"+e+".png",this.textPlayerImg.visible=this.textImg.visible=!0}}else this.superClose()},n.prototype.sureBtnHandler=function(){if(this._date){var t=this._date[11];120===t?WindowManager.instance.open(158):129===t?s.ladder.LadderCtrl.instance.canOpenPanel():131===t?WindowManager.instance.open(194):142===t?WindowManager.instance.open(224):144===t?WindowManager.instance.open(194):145===t?WindowManager.instance.open(227):116===t?WindowManager.instance.open(194):377===t?WindowManager.instance.open(617):569===t?WindowManager.instance.open(865):777===t?WindowManager.instance.open(1175):839===t?WindowManager.instance.open(1259):853===t?WindowManager.instance.open(1292):901===t?WindowManager.instance.open(1361):698===t||699===t||699===t||704===t?s.faction.FactionModel.instance.hasFaction?WindowManager.instance.open(1043):WindowManager.instance.open(262):939===t&&WindowManager.instance.open(1413)}this.superClose()},n.prototype.superClose=function(){e.prototype.close.call(this),this._sTween&&(this._sTween.stop(),this._sTween=null),this._date=null},n.prototype.close=function(){this._bolll||(this._bolll=!0,this._sTween?this.superClose():this.itemEffect()),this.closeOnSide=!1},n.prototype.destroy=function(){this._sTween&&(this._sTween.stop(),this._sTween=null),e.prototype.destroy.call(this)},n.prototype.itemEffect=function(){var t=this,e=s.action_preview.ActionPreviewModel.instance.getPosSprite(10000003);if(e){o.TEMP.setTo(e.x,e.y),LayerManager.instance.getLayerById(7).globalToLocal(o.TEMP);var i=o.TEMP.x,n=o.TEMP.y;this._sTween=TweenJS.create(this).to({x:i,y:n,scaleX:0,scaleY:0},500).onComplete(function(){t.superClose()}).start()}else this.superClose()},i=n,t.ActivityAllAlert=i}(modules=modules||{}),function(e){var t,n,i,s,o,a,r,l;function h(){return null!==n&&n.apply(this,arguments)||this}t=e.fashion||(e.fashion={}),i=e.abstract.AbstractShengJiPanel,s=e.fashion.FashionCtrl,o=e.fashion.FashionModel,a=e.config.FashionFeedCfg,r=e.bag.BagModel,n=i,__extends(h,n),h.prototype.doUpgrade=function(){s.instance.feedFashion()},h.prototype.getModelInfo=function(){return o.instance.fashionInfo},h.prototype.getCurShowId=function(){return o.instance.curShowId},h.prototype.getAtkValue=function(){return this.getModelInfo()[2]},h.prototype.getSkillList=function(){return this.getModelInfo()[1]},h.prototype.getShengjiCfgByLv=function(t){return a.instance.getCfgByLevel(t)},h.prototype.getShengjiSkillCfgByLev=function(t){return a.instance.getUpSkillCfgByLv(t)},h.prototype.getSkillIds=function(){return a.instance.skillPureIds},h.prototype.initialize=function(){this.v.titleTxt.text="时装",this.v.bgImg.skin="immortal/image_sz_bg1.jpg",this._aboutId=20047,this._cfgSkill=2,this._cfgLv=0,this._cfgAttr=3,this._cfgItems=1,this._cfgRpLv=0,this._feedSkillType=4,this._tabPanelIds=[null,320,321,879],this._upgradeRps=["fashionShengJiRP","fashionShengJiMatRP","showEquipFashion"],this._huanHuaRps=["fashionHuanHuaJiPinRP","fashionHuanHuaZhenPinRP","fashionHuanHuaJuePinRP","fashionHuanHuaTeShuRP"],this._fuhunRps=["fashionFuHunRP"],this._masterRps=["fashionMasterRP"],this._showEquipRps=["showEquipFashion"];var t=e.config.ShowEquipCfg.instance.getCfgByType(3);this.v.showEquipTxt.text=t?t[1]:"",this.v.showEquipBtn.skin="immortal/btn_showequip_3.png",n.prototype.initialize.call(this)},h.prototype.showEquipHandler=function(){WindowManager.instance.open(1283)},h.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("FASHION_INFO_UPDATE",this,this.updateUI)},h.prototype.updateUI=function(){n.prototype.updateUI.call(this);var t=this._consumables.itemData;if(t&&this._needMatCount){var e=r.instance.getItemCountById(t[0]),i="#ff7462";e<this._needMatCount||(i="#ffffff"),this._consumables.setNum(e+"/"+this._needMatCount,i),this._numDiff=e-this._needMatCount,this._btnClip.visible=0<=this._numDiff,0<=this._numDiff?this._btnClip.play():this._btnClip.stop()}},l=h,t.FashionShengJiPanel=l}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.fashion||(t.fashion={}),n=t.abstract.AbstractHuanhuaPanel,s=t.config.FashionMagicShowCfg,o=t.config.ExteriorCfg,i=n,__extends(r,i),r.prototype.getShowInfo=function(t){return e.FashionModel.instance.getMagicShowInfoById(t)},r.prototype.doUpgrade=function(){e.FashionCtrl.instance.addFashionMagicShow(this._showId)},r.prototype.changefunc=function(){e.FashionCtrl.instance.changeFashionMagicShow(this._showId)},r.prototype.getDataByIdLvField=function(t,e,i){return s.instance.getDataByIdLvField(t,e,i)},r.prototype.canUpgrade=function(t,e){return s.instance.has(t,e)},r.prototype.getOpenSumAttrParam=function(){return["幻化总属性",this.getModelInfo()[5],this.getModelInfo()[6],s.instance.attrIndices]},r.prototype.showModelClipAction=function(){},r.prototype.getModelInfo=function(){return e.FashionModel.instance.fashionInfo},r.prototype.getCurShowId=function(){return e.FashionModel.instance.fashionInfo[3]},r.prototype.isRpByQuality=function(t){return e.FashionModel.instance.getRPByQuality(t)},r.prototype.isActivation=function(t){return e.FashionModel.instance.qualityActivation(t)},r.prototype.panDuanPingZhi=function(t){return e.FashionModel.instance.panDuanpingzhi(t)},r.prototype.getAtkValue=function(){return e.FashionModel.instance.fashionInfo[5]},r.prototype.getShowIds=function(t){return s.instance.getSkinCfgByType(s.instance.qualitys[t])},r.prototype.getModelCfg=function(t){return o.instance.getCfgById(t+PlayerModel.instance.occ)},r.prototype.checkUseChangeImgShowing=function(){var t=this.getCurShowId(),e=this.getShowInfo(this._recordShowId);this.v.changeImg.visible=!!e&&this._showId+PlayerModel.instance.occ!==t,this.v.useImg.visible=this._showId+PlayerModel.instance.occ===t},r.prototype.initialize=function(){this.v.bgImg.skin="immortal/image_sz_bg1.jpg",this.v.titleTxt.text="时装",this._upgradeRps=["fashionShengJiRP","fashionShengJiMatRP","showEquipFashion"],this._huanHuaRps=["fashionHuanHuaJiPinRP","fashionHuanHuaZhenPinRP","fashionHuanHuaJuePinRP","fashionHuanHuaTeShuRP"],this._fuhunRps=["fashionFuHunRP"],this._masterRps=["fashionMasterRP"],this._tabPanelIds=[319,null,321,879],this._aboutId=20048,this._listItemRenderer=e.FashionHuanHuaItem,this._listPingZhiItemRenderer=e.FashionHuanHuaOptionsItem,i.prototype.initialize.call(this)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FASHION_INFO_UPDATE",this,this.updateUI)},a=r,e.FashionHuanHuaPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.fashion||(t.fashion={}),n=t.config.FashionRefineCfg,s=t.abstract.AbstractFuhunPanel,i=s,__extends(a,i),a.prototype.initialize=function(){this._refineTypeNames=["金碧衣魂","五彩衣魂","辉煌衣魂","霓裳衣魂"],this.v.titleTxt.text="时装",this.v.bgImg.skin="immortal/image_sz_szfh_bg.jpg",this._upgradeRps=["fashionShengJiRP","fashionShengJiMatRP","showEquipFashion"],this._huanHuaRps=["fashionHuanHuaJiPinRP","fashionHuanHuaZhenPinRP","fashionHuanHuaJuePinRP","fashionHuanHuaTeShuRP"],this._fuhunRps=["fashionFuHunRP"],this._masterRps=["fashionMasterRP"],this._aboutId=20049,this._feedSkilltype=4,this._infoEvent="FASHION_INFO_UPDATE",this._successEvent="FASHION_REFINE_SUCCESS",this._tabPanelIds=[319,320,null,879],i.prototype.initialize.call(this)},a.prototype.canUpgrade=function(t,e){return n.instance.has(t,e)},a.prototype.getModelInfo=function(){return e.FashionModel.instance.fashionInfo},a.prototype.getCfgDataByIdLvField=function(t,e,i){return n.instance.getDataByIdLvField(t,e,i)},a.prototype.getFunhuList=function(t){var e=this.getModelInfo();if(e)for(var i=e[7],n=0,s=i.length;n<s;n++)if(t===i[n][0])return i[n]},a.prototype.doUpgrade=function(){e.FashionCtrl.instance.addFashionRefine(this._curPitchHun)},a.prototype.getOpenSumAttrParam=function(){var t=this.getModelInfo();return["附魂总属性",t[8],t[9],n.instance.attrIndices]},o=a,e.FashionFuHunPanel=o}(modules=modules||{}),function(e){var t,n,i,s,o,a,r,l;function h(){return null!==n&&n.apply(this,arguments)||this}t=e.tianZhu||(e.tianZhu={}),i=e.abstract.AbstractShengJiPanel,s=e.tianZhu.TianZhuModel,o=e.tianZhu.TianZhuCtrl,a=e.config.TianZhuFeedCfg,r=e.bag.BagModel,n=i,__extends(h,n),h.prototype.doUpgrade=function(){o.instance.feedTianZhu()},h.prototype.getModelInfo=function(){return s.instance.tianZhuInfo},h.prototype.getCurShowId=function(){var t=s.instance.curShowId;return 0===t&&(t=e.config.BlendCfg.instance.getCfgById(15)[1][PlayerModel.instance.occ-1]),t},h.prototype.getAtkValue=function(){return this.getModelInfo()[2]},h.prototype.getSkillList=function(){return this.getModelInfo()[1]},h.prototype.getShengjiCfgByLv=function(t){return a.instance.getCfgByLevel(t)},h.prototype.getShengjiSkillCfgByLev=function(t){return a.instance.getUpSkillCfgByLv(t)},h.prototype.getSkillIds=function(){return a.instance.skillPureIds},h.prototype.initialize=function(){this.v.titleTxt.text="天珠",this.v.bgImg.skin="immortal/image_tz_bg1.jpg",this._aboutId=20050,this._cfgSkill=2,this._cfgLv=0,this._cfgAttr=3,this._cfgItems=1,this._cfgRpLv=0,this._feedSkillType=5,this._tabPanelIds=[null,323,324,907],this._upgradeRps=["tianZhuShengJiRP","tianZhuShengJiMatRP","showEquipPearl"],this._huanHuaRps=["tianZhuHuanHuaJiPinRP","tianZhuHuanHuaZhenPinRP","tianZhuHuanHuaJuePinRP"],this._fuhunRps=["tianZhuFuHunRP"],this._masterRps=["pearlMasterRP"],this._showEquipRps=["showEquipPearl"];var t=e.config.ShowEquipCfg.instance.getCfgByType(4);this.v.showEquipTxt.text=t?t[1]:"",this.v.showEquipBtn.skin="immortal/btn_showequip_4.png",n.prototype.initialize.call(this)},h.prototype.showEquipHandler=function(){WindowManager.instance.open(1285)},h.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("TIAN_ZHU_INFO_UPDATE",this,this.updateUI)},h.prototype.updateUI=function(){n.prototype.updateUI.call(this);var t=this._consumables.itemData;if(t&&this._needMatCount){var e=r.instance.getItemCountById(t[0]),i="#ff7462";e<this._needMatCount||(i="#ffffff"),this._consumables.setNum(e+"/"+this._needMatCount,i),this._numDiff=e-this._needMatCount,this._btnClip.visible=0<=this._numDiff,0<=this._numDiff?this._btnClip.play():this._btnClip.stop()}this.getCurShowId()&&this._showModelClip.setActionType("show")},l=h,t.TianZhuShengJiPanel=l}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.tianZhu||(t.tianZhu={}),n=t.abstract.AbstractHuanhuaPanel,s=t.config.TianZhuMagicShowCfg,i=n,__extends(a,i),a.prototype.getShowInfo=function(t){return e.TianZhuModel.instance.getMagicShowInfoById(t)},a.prototype.doUpgrade=function(){e.TianZhuCtrl.instance.addTianZhuMagicShow(this._showId)},a.prototype.changefunc=function(){e.TianZhuCtrl.instance.changeTianZhuMagicShow(this._showId)},a.prototype.getDataByIdLvField=function(t,e,i){return s.instance.getDataByIdLvField(t,e,i)},a.prototype.canUpgrade=function(t,e){return s.instance.has(t,e)},a.prototype.getOpenSumAttrParam=function(){return["幻化总属性",e.TianZhuModel.instance.tianZhuInfo[5],e.TianZhuModel.instance.tianZhuInfo[6],s.instance.attrIndices]},a.prototype.getModelInfo=function(){return e.TianZhuModel.instance.tianZhuInfo},a.prototype.getCurShowId=function(){return e.TianZhuModel.instance.tianZhuInfo[3]},a.prototype.isRpByQuality=function(t){return e.TianZhuModel.instance.getRPByQuality(t)},a.prototype.isActivation=function(t){return e.TianZhuModel.instance.qualityActivation(t)},a.prototype.panDuanPingZhi=function(t){return e.TianZhuModel.instance.panDuanpingzhi(t)},a.prototype.getAtkValue=function(){return e.TianZhuModel.instance.tianZhuInfo[5]},a.prototype.getShowIds=function(t){return s.instance.getSkinCfgByType(s.instance.qualitys[t])},a.prototype.showModelClipAction=function(){this._modelClip.setActionType("show")},a.prototype.initialize=function(){this.v.bgImg.skin="immortal/image_tz_bg1.jpg",this.v.titleTxt.text="天珠",this._upgradeRps=["tianZhuShengJiRP","tianZhuShengJiMatRP","showEquipPearl"],this._huanHuaRps=["tianZhuHuanHuaJiPinRP","tianZhuHuanHuaZhenPinRP","tianZhuHuanHuaJuePinRP"],this._fuhunRps=["tianZhuFuHunRP"],this._masterRps=["pearlMasterRP"],this._tabPanelIds=[322,null,324,907],this._aboutId=20051,this._listItemRenderer=e.TianZhuHuanHuaItem,this._listPingZhiItemRenderer=e.TianZhuHuanHuaOptionsItem,i.prototype.initialize.call(this)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("TIAN_ZHU_INFO_UPDATE",this,this.updateUI)},o=a,e.TianZhuHuanHuaPanel=o}(modules=modules||{}),function(t){var o,e,n,i,s;function a(){return null!==e&&e.apply(this,arguments)||this}o=t.tianZhu||(t.tianZhu={}),n=t.config.TianZhuRefineCfg,i=t.abstract.AbstractFuhunPanel,e=i,__extends(a,e),a.prototype.initialize=function(){this._refineTypeNames=["琥珀珠魂","琉璃珠魂","玲珑珠魂","天命珠魂"],this.v.titleTxt.text="天珠",this.v.bgImg.skin="immortal/image_tz_tzfh_bg.jpg",this._upgradeRps=["tianZhuShengJiRP","tianZhuShengJiMatRP","showEquipPearl"],this._huanHuaRps=["tianZhuHuanHuaJiPinRP","tianZhuHuanHuaZhenPinRP","tianZhuHuanHuaJuePinRP"],this._fuhunRps=["tianZhuFuHunRP"],this._masterRps=["pearlMasterRP"],this._aboutId=20052,this._feedSkilltype=5,this._infoEvent="TIAN_ZHU_INFO_UPDATE",this._successEvent="TIAN_ZHU_REFINE_SUCCESS",this._tabPanelIds=[322,323,null,907],e.prototype.initialize.call(this)},a.prototype.canUpgrade=function(t,e){return n.instance.has(t,e)},a.prototype.getModelInfo=function(){return o.TianZhuModel.instance.tianZhuInfo},a.prototype.getFunhuList=function(t){var e=o.TianZhuModel.instance.tianZhuInfo;if(!e)return null;for(var i=e[7],n=0,s=i.length;n<s;n++)if(t===i[n][0])return i[n]},a.prototype.getCfgDataByIdLvField=function(t,e,i){return n.instance.getDataByIdLvField(t,e,i)},a.prototype.doUpgrade=function(){o.TianZhuCtrl.instance.addTianZhuRefine(this._curPitchHun)},a.prototype.getOpenSumAttrParam=function(){var t=this.getModelInfo();return["附魂总属性",t[8],t[9],n.instance.attrIndices]},s=a,o.TianZhuFuHunPanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("xilian_rise")},n.prototype.getCfgByLv=function(t){return this._cfgs[t]},i=n,e.XiLianRiseCfg=i}(modules=modules||{}),function(t){var A,n,e,M,E,R,D,L,s,i,y,k,o;function a(){var t=n.call(this)||this;return t._openUnlockNum=0,t}A=t.xiLian||(t.xiLian={}),e=ui.XiLianViewUI,M=t.config.BlendCfg,E=t.config.XiLianRiseCfg,R=t.config.AttrItemCfg,D=t.bag.BagModel,L=t.common.CustomClip,s=t.vip.VipModel,i=t.notice.SystemNoticeManager,y=t.bag.BagUtil,k=t.common.CommonUtil,n=e,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=this.centerY=0,k.setHTMLPro(this.goldTxt,"#b15315","SimHei",24),this.goldTxt.style.wordWrap=!1,this._selectedPart=-1,this.openBtn1.visible=this.openBtn2.visible=this.openBtn3.visible=this.openBtn4.visible=this.openBtn5.visible=!1,this.lockBtn1.visible=this.lockBtn2.visible=this.lockBtn3.visible=this.lockBtn4.visible=this.lockBtn5.visible=!1,this.stateTxt1.visible=this.stateTxt2.visible=this.stateTxt3.visible=this.stateTxt4.visible=this.stateTxt5.visible=!1,this._attrTxts=[this.attrText1,this.attrText2,this.attrText3,this.attrText4,this.attrText5],this._stateTxts=[this.stateTxt1,this.stateTxt2,this.stateTxt3,this.stateTxt4,this.stateTxt5],this._equips=[this.equip1,this.equip2,this.equip3,this.equip4,this.equip5,this.equip6,this.equip7,this.equip8,this.equip9,this.equip10],this._openBtns=[this.openBtn1,this.openBtn2,this.openBtn3,this.openBtn4,this.openBtn5],this._lockBtns=[this.lockBtn1,this.lockBtn2,this.lockBtn3,this.lockBtn4,this.lockBtn5],this._conTxts=[this.conTxt1,this.conTxt2,this.conTxt3,this.conTxt4,this.conTxt5,this.conTxt6,this.conTxt7,this.conTxt8,this.conTxt9,this.conTxt10],this._partBgs=[this.partBg1,this.partBg2,this.partBg3,this.partBg4,this.partBg5,this.partBg6,this.partBg7,this.partBg8,this.partBg9,this.partBg10],this._qualityIcons=[[this.quality_1_1,this.quality_1_2,this.quality_1_3,this.quality_1_4,this.quality_1_5],[this.quality_2_1,this.quality_2_2,this.quality_2_3,this.quality_2_4,this.quality_2_5],[this.quality_3_1,this.quality_3_2,this.quality_3_3,this.quality_3_4,this.quality_3_5],[this.quality_4_1,this.quality_4_2,this.quality_4_3,this.quality_4_4,this.quality_4_5],[this.quality_5_1,this.quality_5_2,this.quality_5_3,this.quality_5_4,this.quality_5_5],[this.quality_6_1,this.quality_6_2,this.quality_6_3,this.quality_6_4,this.quality_6_5],[this.quality_7_1,this.quality_7_2,this.quality_7_3,this.quality_7_4,this.quality_7_5],[this.quality_8_1,this.quality_8_2,this.quality_8_3,this.quality_8_4,this.quality_8_5],[this.quality_9_1,this.quality_9_2,this.quality_9_3,this.quality_9_4,this.quality_9_5],[this.quality_10_1,this.quality_10_2,this.quality_10_3,this.quality_10_4,this.quality_10_5]],this._proEffect=new L,this.conBox.addChildAt(this._proEffect,0),this._proEffect.skin="assets/effect/wave.atlas",this._proEffect.frameUrls=["wave/0.png","wave/1.png","wave/2.png","wave/3.png","wave/4.png","wave/5.png","wave/6.png","wave/7.png"],this._proEffect.loop=!0,this._proEffect.pos(-10,100,!0),this.selectMatBox.visible=!1,this.matItem2.visible=!1,this.matItem2.needTip=!1,this._hasFreeOpen=!1,this._matType=0;for(var t=M.instance.getCfgById(38007)[1],e=0,i=this._conTxts.length;e<i;e++)t[e]&&(this._conTxts[e].text=k.numToUpperCase(Math.floor(.01*t[e]))+"转"+k.numToUpperCase(t[e]%100)+"重开启");this.addRingBtn.visible=this.addJadeBtn.visible=!1,this._btnClip=L.create("assets/effect/btn_light.atlas","btn_light",7),this._btnClip.pos(-5,-10,!0),this.xiLianBtn.addChild(this._btnClip),L.thisStop(this._btnClip)},a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.useGoldBtn,this,this.useGoldHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.xiLianBtn,this,this.xiLianHandler);for(var t=0,e=this._openBtns.length;t<e;t++)this.onAutoClick(this._openBtns[t],this,this.openSlotHandler,[t]),this.onAutoClick(this._lockBtns[t],this,this.lockSlot,[t]);for(t=0,e=this._equips.length;t<e;t++)this._equips[t].needTip=this._equips[t].valueDisplay=!1,this.onAutoClick(this._equips[t],this,this.equipClickHandler,[t+1]);this.onAutoClick(this.addMatBtn,this,this.addMatHandler),this.onAutoClick(this.closeBoxBtn,this,this.closeBoxHandler),this.onAutoClick(this.takeOffBtn,this,this.takeOffHandler),this.onAutoClick(this.matSelectItem1,this,this.selectMatHandler,[1]),this.onAutoClick(this.matSelectItem2,this,this.selectMatHandler,[2]),this.onAutoClick(Laya.stage,this,this.stageClickHandler),this.onAutoClick(this.selectMatBox,this,this.boxClickHandler),this.onAutoClick(this.matItem2,this,this.addMatHandler),this.onAutoClick(this.masterBg,this,this.masterClickHandler),this.onAutoClick(this.addRingBtn,this,this.gotoTreasure),this.onAutoClick(this.addJadeBtn,this,this.gotoTreasure),this.onAutoClick(this.propertyBtn,this,this.propertyHandler),this.onAutoGlobalEvt("XI_LIAN_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.updateEquip),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIP",this,this.updateEquip),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.updateEquip),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateMat),this.onAutoGlobalEvt("PLAYER_BORN_LEV",this,this.updateEra),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.regAutoRP(this.masterRPImg,["xiLianMaster"])},a.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._lockNum=0,this._selectedPart=-1,this.selectedImg.visible=!1,this.selectMatBox.visible=!1,this.matItem2.visible=!1,this._hasFreeOpen=!1,this._openUnlockNum=0,this._proEffect.play(),this.useGold=!1,this.updateEquip(),this.updateEra(),A.XiLianCtrl.instance.getXilian(),A.XiLianModel.instance.isTips=!0,A.XiLianModel.instance.checkRP()},a.prototype.close=function(){n.prototype.close.call(this),this._proEffect.stop()},Object.defineProperty(a.prototype,"useGold",{get:function(){return this._useGold},set:function(t){this._useGold=t,this.useGoldBtn.selected=t},enumerable:!0,configurable:!0}),a.prototype.equipClickHandler=function(t){this.selectPart(t)},a.prototype.useGoldHandler=function(){if(this.useGold)this.useGold=!this.useGold;else{var t=M.instance.getCfgById(38006)[1][this._lockNum];PlayerModel.instance.ingot>=t?this.useGold=!this.useGold:k.goldNotEnoughAlert()}},a.prototype.helpHandler=function(){k.alertHelp(20055)},a.prototype.propertyHandler=function(){WindowManager.instance.open(654)},a.prototype.updatePlatChangeRecharge=function(){this.attrText5.visible=this.stateTxt5.visible=this.openBtn5.visible=this.lockBtn5.visible=!PlatParams.isCloseRecharge},a.prototype.updateEra=function(){for(var t=PlayerModel.instance.bornLev,e=Math.floor(.01*t),i=t%100,n=M.instance.getCfgById(38007)[1],s=this.getChildIndex(this.xiLianBtn)+1,o=0,a=this._conTxts.length;o<a;o++){this._partBgs[o].off("click",this,this.partClickHandler);var r=!1;if(n[o]){var l=Math.floor(.01*n[o]),h=n[o]%100;l<e?r=!0:e===l&&h<=i&&(r=!0),r||this.onAutoClick(this._partBgs[o],this,this.partClickHandler,["转生达到"+k.numToUpperCase(l)+"转"+k.numToUpperCase(h)+"重开启"])}else r=!0;this._conTxts[o].visible=!r,r?this.addChildAt(this._equips[o],s):this._equips[o].removeSelf();for(var c=this._qualityIcons[o],p=0,u=c.length;p<u;p++)c[p].visible=r;o+1===9?this._ringOpen=r:o+1===10&&(this._jadeOpen=r)}this.updateEquip()},a.prototype.partClickHandler=function(t){i.instance.addNotice(t,!0)},a.prototype.updateEquip=function(){for(var t=PlayerModel.instance.level,e=M.instance.getCfgById(53001)[1],i=0,n=this._equips.length;i<n;i++){var s=i+1,o=PlayerModel.instance.getEquipByPart(s);o?(this._equips[i].dataSource=o,this._equips[i].mouseEnabled=!0,this._equips[i].visible=!0,-1===this._selectedPart&&this.selectPart(s),9===s?this.addRingBtn.visible=!1:10===s&&(this.addJadeBtn.visible=!1)):(this._equips[i].dataSource=null,this._equips[i].mouseEnabled=!1,this._equips[i].visible=!1,9===s&&t>=e[0]?this.addRingBtn.visible=this._ringOpen:10===s&&t>=e[0]&&(this.addJadeBtn.visible=this._jadeOpen))}},a.prototype.selectPart=function(t){this._selectedPart!==t&&(this._selectedPart=t,this.selectedImg.visible=!0,this.selectedImg.pos(this._equips[t-1].x-4,this._equips[t-1].y-5,!0),this._matType=0,this.addMatBtn.visible=!0,this.matItem2.visible=!1,this.updateInfo())},a.prototype.openSlotHandler=function(t){var e;if(-1!==this._selectedPart&&A.XiLianModel.instance.xiLianInfo)if(this._hasFreeOpen)e='第一条洗炼槽位<span color="#168a17">免费开启</span>，是否确定开启？',k.alert("提示",e,[Handler.create(this,this.openSlot,[0])]);else if(4===t){var i=M.instance.getCfgById(38010)[1][0];s.instance.vipLevel>=i?(e="您已达到第五槽位开启所需的SVIP等级，是否开启槽位？",k.alert("提示",e,[Handler.create(this,this.openSlot,[t])])):(e='<span color="#FF3E3E">达到SVIP'+i+"</span>即可开启第五槽位，是否前往提升SVIP等级？",k.alert("提示",e,[Handler.create(this,k.gotoVIP)]))}else{var n=M.instance.getCfgById(38008)[1][t];0<n&&(e='是否花费<span color="#FF3E3E">'+n+"元宝</span>开启该洗炼槽位？",k.alert("提示",e,[Handler.create(this,this.openSlot,[t])]))}},a.prototype.openSlot=function(t){var e=M.instance.getCfgById(38008)[1][t]||0;PlayerModel.instance.ingot>=e?A.XiLianCtrl.instance.openXilian(this._selectedPart,t):k.goldNotEnoughAlert()},a.prototype.lockSlot=function(t){if(-1!==this._selectedPart){var e=A.XiLianModel.instance.getSlotInfoByPartAndSlot(this._selectedPart,t);A.XiLianCtrl.instance.lockXilian(!e[4],this._selectedPart,t)}},a.prototype.xiLianHandler=function(){if(0<this._openUnlockNum){var t=M.instance.getCfgById(38005)[1][this._lockNum],e=D.instance.getItemCountById(10230001),i=A.XiLianModel.instance.xiLianInfo;if(t<=e||i&&0<i[0]){var n=!1;if(1===this._matType||2===this._matType){var s=1===this._matType?10240001:10250001,o=D.instance.getItemCountById(s),a=M.instance.getCfgById(1===this._matType?38011:38012)[1][this._lockNum];a<=o?n=!0:y.openLackPropAlert(s,a-o)}else n=!0;if(n){var r=-1;this._useGold?r=0:0<this._matType&&(r=this._matType);var l=!1,h=A.XiLianModel.instance.xilianTmp,c=A.XiLianModel.instance.xiLianInfo;if(c){for(var p=c[1],u=null,d=0,m=p.length;d<m;d++)if(p[d][0]===this._selectedPart){u=p[d];break}var f=u[1];if(h&&f){var g=A.XiLianModel.instance.xilianTmp[1];for(d=0,m=g.length;d<m;d++)if(4<=g[d][1][2]&&!f[d][4]){l=!0;break}}}WindowManager.instance.open(982,[this._selectedPart,r]),l||A.XiLianCtrl.instance.equipXilian(this._selectedPart,this._useGold,this._matType)}}else y.openLackPropAlert(10230001,t-e)}else k.alert("提示",'第一条洗炼槽位<span color="#168a17">免费开启</span>，是否确定开启？',[Handler.create(this,this.openSlot,[0])])},a.prototype.updateInfo=function(){this._openUnlockNum=0,this.fightClip.value="0",this._seniorUnlock=!1,this._hasFreeOpen=!1;var t=A.XiLianModel.instance.xiLianInfo;if(t){var e=t[0],i=M.instance.getCfgById(38009)[1][0];this.timesTxt.text=e+"/"+i,this.timesTxt.color=0===e?"#FF3E3E":"#168A17";var n=t[2],s=E.instance.getCfgByLv(n);if(0<s[2]){var o=A.XiLianModel.instance.getAttrCountByQuality(s[1]);this.masterProTxt.text=o+"/"+s[2],this._proEffect.y=o>=s[2]?0:100*(1-o/s[2])}else{var a=E.instance.getCfgByLv(n-1)[2];this.masterProTxt.text=a+"/"+a,this._proEffect.y=0}this.masterTxt.text="洗炼大师·"+n+"阶";for(var r,l=t[1],h=0,c=l.length;h<c;h++){var p=l[h];if(p){p[0]===this._selectedPart&&(r=p);for(var u=p[1],d=0,m=u.length;d<m;d++){var f=(b=u[d])[1],g=b[0],y=this._qualityIcons[p[0]-1][g];2===b[5]&&(y.skin="xi_lian/image_zbxl_"+f[2]+".png")}}}if(r){this.fightClip.value=r[2].toString();var _=r[1],v=0,I=-1;for(h=0,c=_.length;h<c;h++){f=(b=_[h])[1];var b,C=R.instance.getCfgById(f[0]),T=f[1];if(g=b[0],2===b[5]&&C){C[2]?this._attrTxts[g].text=C[1]+"+"+(100*T).toFixed(2)+"%("+(100*b[2]).toFixed(2)+"%~"+(100*b[3]).toFixed(2)+"%)":this._attrTxts[g].text=C[1]+"+"+Math.round(T)+"("+b[2]+"~"+b[3]+")",this._attrTxts[g].color=k.getColorByQuality(f[2]-1),this._stateTxts[g].visible=!1,this._openBtns[g].visible=!1,this._lockBtns[g].visible=!0;var w=b[4];this._lockBtns[g].skin=w?"xi_lian/btn_zbxl_lock_1.png":"xi_lian/btn_zbxl_lock_0.png",w?v++:(this._openUnlockNum++,I=h,4<=f[2]&&(this._seniorUnlock=!0))}else{if(this._stateTxts[g].visible=!0,4===g)this._attrTxts[g].text="第"+(g+1)+"条洗炼槽",this._stateTxts[g].text="(SVIP"+M.instance.getCfgById(38010)[1][0]+"开启)",this._openBtns[g].label="开启";else{var x=M.instance.getCfgById(38008)[1][g];0===x&&(this._hasFreeOpen=!0),this._attrTxts[g].text="第"+(g+1)+"条洗炼槽",this._stateTxts[g].text="(未开启)",this._openBtns[g].label=0<x?"开启":"免费"}this._attrTxts[g].color="#1f304d",this._openBtns[g].visible=!0,this._lockBtns[g].visible=!1}}1===this._openUnlockNum&&(this._lockBtns[I].visible=!1);var B=M.instance.getCfgById(38006)[1][v];if(0===this._matType)this.goldTxt.innerHTML='消耗<span color="#168A17">'+B+'元宝</span>必出一条<span color="#d738f4">紫色以上</span>属性',this.useGoldBtn.visible=!0;else{var P=1===this._matType?10240001:10250001,S=(a=D.instance.getItemCountById(P),M.instance.getCfgById(1===this._matType?38011:38012)[1][v]);this.matItem2.dataSource=[P,a,0,null],this.matItem2.setNum(a+"/"+S,S<=a?"#FFFFFF":"#FF3E3E")}this._lockNum=v,this.updateMat(),A.XiLianModel.instance.xilianTmp&&0<A.XiLianModel.instance.xilianTmp[0]&&0<A.XiLianModel.instance.xilianTmp[1].length&&A.XiLianModel.instance.isOpenDlog&&(WindowManager.instance.open(982,[A.XiLianModel.instance.xilianTmp[0],-1]),A.XiLianModel.instance.isOpenDlog=!1),PlatParams.isCloseRecharge&&(this.attrText5.visible=this.stateTxt5.visible=this.openBtn5.visible=this.lockBtn5.visible=!1),0<PlayerModel.instance.equipsDic.values.length&&0<t[0]?L.thisPlay(this._btnClip):L.thisStop(this._btnClip)}else this.addMatBtn.visible=!1}},a.prototype.updateMat=function(){var t=M.instance.getCfgById(38005)[1][this._lockNum];this.matItem1.dataSource=[10230001,t,0,null];var e=D.instance.getItemCountById(10230001);this.matItem1.setNum(e+"/"+t,t<=e?"#FFFFFF":"#FF3E3E")},a.prototype.addMatHandler=function(t){this.selectMatBox.visible=!0,this.matSelectItem1.setData(10240001),this.matSelectItem2.setData(10250001),t.stopPropagation()},a.prototype.closeBoxHandler=function(){this.selectMatBox.visible=!1},a.prototype.stageClickHandler=function(){this.selectMatBox.visible=!1},a.prototype.boxClickHandler=function(t){t.stopPropagation()},a.prototype.takeOffHandler=function(){this.matItem2.visible=!1,this.addMatBtn.visible=!0,this._matType=0,this.useGoldBtn.visible=!0;var t=M.instance.getCfgById(38006)[1][this._lockNum];this.goldTxt.innerHTML='消耗<span color="#168A17">'+t+'元宝</span>必出一条<span color="#d738f4">紫色及以上</span>属性',this.selectMatBox.visible=!1},a.prototype.selectMatHandler=function(t){var e=1===(this._matType=t)?10240001:10250001,i=D.instance.getItemCountById(e),n=M.instance.getCfgById(1===t?38011:38012)[1][this._lockNum];this.matItem2.dataSource=[e,i,0,null],this.matItem2.setNum(i+"/"+n,n<=i?"#FFFFFF":"#FF3E3E"),this.useGold=!1,1===t?this.goldTxt.innerHTML='消耗极品洗炼石必出一条<span color="#EA8706">橙色及以上</span>属性':2===t&&(this.goldTxt.innerHTML='消耗完美洗炼石必出一条<span color="#FF3E3E">红色</span>属性'),this.useGoldBtn.visible=!1,this.selectMatBox.visible=!1,this.addMatBtn.visible=!1,this.matItem2.visible=!0},a.prototype.masterClickHandler=function(){WindowManager.instance.openDialog(39,3)},a.prototype.gotoTreasure=function(){WindowManager.instance.open(93)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._attrTxts.length=0,this._attrTxts=null,this._stateTxts.length=0,this._stateTxts=null,this._equips.length=0,this._equips=null,this._openBtns.length=0,this._openBtns=null,this._lockBtns.length=0,this._lockBtns=null,this._qualityIcons.length=0,this._qualityIcons=null,this._conTxts.length=0,this._conTxts=null,this._partBgs.length=0,this._partBgs=null,this._proEffect.stop(),this._proEffect.destroy(),this._proEffect=null,n.prototype.destroy.call(this,t)},o=a,A.XiLianPanel=o}(modules=modules||{}),function(t){var f,i,s,g,e;function n(){return null!==i&&i.apply(this,arguments)||this}f=t.xiLian||(t.xiLian={}),s=laya.display.Text,g=t.config.AttrItemCfg,i=ui.XiLianAllAlertlUI,__extends(n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this._modelTextArr=[this.model1Txt,this.model2Txt],this.model1Txt.visible=this.model2Txt.visible=!1,this.showTextTab=[],this.createPropertyTab()},n.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updataView()},n.prototype.copyText=function(t){var e=t%2,i=Math.floor(t/2);if(this._modelTextArr[e]){var n=new s;return n.x=this._modelTextArr[e].x,n.y=this._modelTextArr[e].y+37*i,n.font=this._modelTextArr[e].font,n.fontSize=this._modelTextArr[e].fontSize,n.color=this._modelTextArr[e].color,n.align=this._modelTextArr[e].align,n.width=this._modelTextArr[e].width,n.height=this._modelTextArr[e].height,this.addChild(n),this.showTextTab.push(n),n}return null},n.prototype.updataView=function(){for(var t=f.XiLianModel.instance.xiLianInfo[1],e=t.length,i=0;i<e;i++)for(var n=t[i][1],s=n.length,o=0;o<s;o++){var a=n[o][1],r=0;(p=g.instance.getCfgById(a[0]))&&(r=(m=!!p[2])?a[1]:Math.round(a[1])),this._propertyTab[a[0]][1]+=r}var l=this._propertyTab.length,h=0;for(i=0;i<l;i++){var c=this._propertyTab[i];if(0<c[1]){var p,u=null;if(!(u=h<this.showTextTab.length?this.showTextTab[h]:this.copyText(h)))return;if(p=g.instance.getCfgById(c[0])){var d=p[1],m=!!p[2];u.text=m?d+":"+(100*c[1]).toFixed(2)+"%":d+":"+Math.round(c[1]),h++}}}this.tips.visible=0===h},n.prototype.createPropertyTab=function(){var t=GlobalData.getConfig("attr_item");this._propertyTab=[[0,0]];var e=1;for(var i in t){var n=[e++,0];this._propertyTab.push(n)}},n.prototype.destroy=function(){i.prototype.destroy.call(this);for(var t=this.showTextTab.length,e=0;e<t;e++)this.showTextTab[e]&&(this.showTextTab[e].removeSelf(),this.showTextTab[e].destroy,this.showTextTab[e]=null)},n.prototype.close=function(){i.prototype.close.call(this);for(var t=this._propertyTab.length,e=0;e<t;e++)this._propertyTab[e][1]=0},e=n,f.XiLianAllAlert=e}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("attr_buff")},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.AttrBuffCfg=i}(modules=modules||{}),function(t){var c,e,i,n,p,u,d,s,o,m,f,a;function r(){return null!==e&&e.apply(this,arguments)||this}c=t.shenqi||(t.shenqi={}),i=t.common.BtnGroup,n=t.common.AvatarClip,p=t.config.ShenqiCfg,u=t.config.ItemMaterialCfg,d=t.config.SkillCfg,s=t.config.AttrItemCfg,o=t.notice.SystemNoticeManager,m=t.config.ExteriorCfg,f=t.config.SkillPureCfg,e=ui.ShenQiViewUI,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._fragmentSelects=[this.fragmentSelect0,this.fragmentSelect1,this.fragmentSelect2,this.fragmentSelect3],this._fragmentBtns=new i,this._fragmentBtns.setBtns(this.fragment0,this.fragment1,this.fragment2,this.fragment3),this._fragmentLabelBgs=[this.fragmentLabelBg0,this.fragmentLabelBg1,this.fragmentLabelBg2,this.fragmentLabelBg3],this._fragmentIcons=[this.fragmentIcon0,this.fragmentIcon1,this.fragmentIcon2,this.fragmentIcon3],this._fragmentTxts=[this.fragmentTxt0,this.fragmentTxt1,this.fragmentTxt2,this.fragmentTxt3],this.totalAttr.underline=!0,this._fragmentBtnEff=CommonUtil.creatEff(this.fragmentCtrlBtn,"btn_light",15),this._fragmentBtnEff.pos(-5,-10),this._activateBtnEff=CommonUtil.creatEff(this.activateBtn,"btn_light",15),this._activateBtnEff.pos(-5,-10),this._showModelClip=n.create(1024,1024,1024),this.addChildAt(this._showModelClip,5),this._showModelClip.anchorX=.5,this._showModelClip.anchorY=.5,this._showModelClip.centerX=0,this._showModelClip.y=500,this._tween=TweenJS.create(this._showModelClip).yoyo(!0).repeat(Number.POSITIVE_INFINITY)},r.prototype.close=function(){this._tween&&this._tween.stop(),e.prototype.close.call(this)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._fragmentSelects=this.destroyElement(this._fragmentSelects),this._fragmentBtns=this.destroyElement(this._fragmentBtns),this._fragmentLabelBgs=this.destroyElement(this._fragmentLabelBgs),this._fragmentIcons=this.destroyElement(this._fragmentIcons),this._fragmentTxts=this.destroyElement(this._fragmentTxts),this._fragmentBtnEff=this.destroyElement(this._fragmentBtnEff),this._activateBtnEff=this.destroyElement(this._activateBtnEff),this._showModelClip=this.destroyElement(this._showModelClip),this._tween&&(this._tween=null),e.prototype.destroy.call(this,t)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._fragmentBtns,"change",this,this.selectFragment),this.onAutoClick(this.lastBtn,this,this.switchShenqi,[0]),this.onAutoClick(this.nextBtn,this,this.switchShenqi,[1]),this.onAutoClick(this.totalAttr,this,this.openShenqiAttr),this.onAutoClick(this.activateBtn,this,this.activate),this.onAutoClick(this.fragmentCtrlBtn,this,this.fragmentCtrl),this.onAutoGlobalEvt("SHENQI_UPDATE",this,this.update),this.onAutoGlobalEvt("SHENQI_JIHUO",this,this.switchShenqi,[1])},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._showModelClip.y=500,this._tween.to({y:this._showModelClip.y+10},1e3).start();for(var t=0;t<this._fragmentSelects.length;++t)this._fragmentSelects[t].visible=!1;this.index=c.ShenqiModel.instance.shenqi.length,this._fragmentBtns.selectedIndex=0,this.fragmentSelect(),this.selectFragment()},r.prototype.update=function(){this.index=c.ShenqiModel.instance.shenqi.length,this.fragmentSelect(),this.selectFragment()},r.prototype.selectFragment=function(){0<=this._fragmentBtns.oldSelectedIndex&&(this._fragmentSelects[this._fragmentBtns.oldSelectedIndex].visible=!1),this._fragmentSelects[this._fragmentBtns.selectedIndex].visible=!0;var t=p.instance.getCfgById(this.index),e=t[2][this._fragmentBtns.selectedIndex];if(e){this.fragmentName.text=u.instance.getItemCfgById(e)[1];var i=s.instance.getCfgById(t[4][this._fragmentBtns.selectedIndex][0]),n=s.instance.getCfgById(t[4][this._fragmentBtns.selectedIndex][2]);this.fragmentAttr0.text=i[1]+"+"+t[4][this._fragmentBtns.selectedIndex][1],this.fragmentAttr1.text=n[1]+"+"+t[4][this._fragmentBtns.selectedIndex][3],this.index<c.ShenqiModel.instance.shenqi.length||c.ShenqiModel.instance.equipFragmentsDic.get(e)?this.fragmentCtrlBtn.visible=!1:c.ShenqiModel.instance.fragmentsDic.get(e)?(this.fragmentCtrlBtn.skin="common/btn_tongyong_6.png",this.fragmentCtrlBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.fragmentCtrlBtn.label="放入碎片",this.fragmentCtrlBtn.visible=!0,this._fragmentBtnEff.visible=!0,this._fragmentBtnEff.play()):(this.fragmentCtrlBtn.skin="common/btn_tongyong_18.png",this.fragmentCtrlBtn.labelColors="#4c5e8a,#4c5e8a,#4c5e8a,#4c5e8a",this.fragmentCtrlBtn.label="前往获取",this.fragmentCtrlBtn.visible=!0,this._fragmentBtnEff.visible=!1),this.equiped.visible=!(this.activateBtn.visible||this.activated.visible)}},r.prototype.fragmentSelect=function(){var t=p.instance.getCfgById(this.index);if(c.ShenqiModel.instance.shenqi.length>this.index)this._fragmentBtns.selectedIndex=t[2].length-1;else{for(var e=0;e<t[2].length;++e)if(!c.ShenqiModel.instance.equipFragmentsDic.get(t[2][e]))return void(this._fragmentBtns.selectedIndex=e);this._fragmentBtns.selectedIndex=0}},r.prototype.showPower=function(){this.powerNum.value=c.ShenqiModel.instance.fighting.toString()},Object.defineProperty(r.prototype,"index",{get:function(){return this._index},set:function(t){if(this.showPower(),p.instance.count<=t&&(t=p.instance.count-1),t<=c.ShenqiModel.instance.shenqi.length+1){var e=p.instance.getCfgById(t);if(e){this._index=t,this.lastBtn.visible=!(t<=0),p.instance.count-1==t?this.nextBtn.visible=!1:this.nextBtn.visible=!0,t==c.ShenqiModel.instance.shenqi.length+1?this.nextBtn.gray=!0:this.nextBtn.gray=!1,this.shenqiName.text=e[1];var i=d.instance.getCfgById(e[3])[2],n=f.instance.getCfgById(CommonUtil.getSkillPureIdById(e[3]))[5];this.shenqiAttr.text=CommonUtil.stringFormat(n,i),this.AttrImg.skin="assets/icon/ui/shenqi/"+e[5]+".png";var s=e[8];if(s){var o=m.instance.getCfgById(s);this._showModelClip.avatarScale=o[10]?o[10]:1,this._showModelClip.avatarRotationX=o[6]?o[6]:0,this._showModelClip.avatarRotationY=o[7]?o[7]:0,this._showModelClip.avatarY=o[9]?o[9]:0,this._showModelClip.avatarX=o[8]?o[8]:0,this._showModelClip.reset(s),this._showModelClip.setActionType("show")}2<e[2].length?(this.fragment2.visible=!0,this.fragment3.visible=!0,this.fragmentIcon2.visible=!0,this.fragmentIcon3.visible=!0,this.fragmentLabelBg2.visible=!0,this.fragmentLabelBg3.visible=!0,this.fragmentTxt2.visible=!0,this.fragmentTxt3.visible=!0,this.fragment1.pos(122,192),this.fragmentSelect1.pos(108,162),this.fragmentIcon1.pos(217,245),this.fragmentTxt1.pos(126,305),this.fragmentLabelBg1.pos(140,303)):(this.fragment2.visible=!1,this.fragment3.visible=!1,this.fragmentIcon2.visible=!1,this.fragmentIcon3.visible=!1,this.fragmentLabelBg2.visible=!1,this.fragmentLabelBg3.visible=!1,this.fragmentTxt2.visible=!1,this.fragmentTxt3.visible=!1,this.fragment1.pos(this.fragment3.x,this.fragment3.y),this.fragmentSelect1.pos(this.fragmentSelect3.x,this.fragmentSelect3.y),this.fragmentIcon1.pos(this.fragmentIcon3.x,this.fragmentIcon3.y),this.fragmentTxt1.pos(this.fragmentTxt3.x,this.fragmentTxt3.y),this.fragmentLabelBg1.pos(this.fragmentLabelBg3.x,this.fragmentLabelBg3.y));for(var a=!0,r=0;r<e[2].length;++r){var l=e[2][r],h=u.instance.getItemCfgById(l);this._fragmentIcons[r].skin="assets/icon/item/"+h[7]+".png",l&&(t<c.ShenqiModel.instance.shenqi.length||c.ShenqiModel.instance.equipFragmentsDic.get(l)?(this._fragmentLabelBgs[r].visible=!1,this._fragmentIcons[r].gray=!1,this._fragmentTxts[r].color="#000000",this._fragmentTxts[r].text=""):a=c.ShenqiModel.instance.fragmentsDic.get(l)?(this._fragmentLabelBgs[r].visible=!0,this._fragmentIcons[r].gray=!0,this._fragmentTxts[r].color="#00FF00",!(this._fragmentTxts[r].text="可放入")):(this._fragmentLabelBgs[r].visible=!0,this._fragmentIcons[r].gray=!0,this._fragmentTxts[r].color="#FF0000",this._fragmentTxts[r].text="第"+e[7][r]+"关获取",!1))}t<c.ShenqiModel.instance.shenqi.length?(this._showModelClip.gray=!1,this.activateBtn.visible=!1,this._activateBtnEff.visible=!1,this.activated.visible=!0,this.unActivate.visible=!1):(t==c.ShenqiModel.instance.shenqi.length&&a?(this.activateBtn.visible=!0,this._activateBtnEff.visible=!0,this._activateBtnEff.play()):(this.activateBtn.visible=!1,this._activateBtnEff.visible=!1),this.unActivate.visible=!1,this.activated.visible=!1,this._showModelClip.gray=!0),(this.activateBtn.visible||this.activated.visible)&&(this.equiped.visible=!1,this.fragmentCtrlBtn.visible=!1)}}},enumerable:!0,configurable:!0}),r.prototype.switchShenqi=function(t){var e=this.index;t?this.index++:this.index--,this.index!=e?this.fragmentSelect():0!=this.index&&this.index!=e&&o.instance.addNotice("需激活上一个神器方可查看",!1)},r.prototype.fragmentCtrl=function(){var t=[p.instance.getCfgById(this.index)[2][this._fragmentBtns.selectedIndex]];c.ShenqiModel.instance.fragmentsDic.get(t[0])?this.index>c.ShenqiModel.instance.shenqi.length?o.instance.addNotice("请先激活上一个神器",!1):c.ShenqiCtrl.instance.equipFragment(t):WindowManager.instance.openByActionId(46)},r.prototype.activate=function(){c.ShenqiCtrl.instance.activateShenQi()},r.prototype.openShenqiAttr=function(){WindowManager.instance.openDialog(26,["神器总属性",c.ShenqiModel.instance.fighting,c.ShenqiModel.instance.attr,p.instance.attrIndices])},a=r,c.ShenqiPanel=a}(modules=modules||{}),function(n){var t,s,o,e;function i(){return null!==s&&s.apply(this,arguments)||this}t=n.player_title||(n.player_title={}),o=n.config.DesignationCfg,s=ui.PlayerTitileActiveAlertUI,__extends(i,s),i.prototype.destroy=function(){this._nameTextArry=this.destroyElement(this._nameTextArry),this.shuju=null,s.prototype.destroy.call(this)},i.prototype.initialize=function(){s.prototype.initialize.call(this),this._nameTextArry=[this.nameText1,this.valueText1,this.nameText2,this.valueText2,this.nameText3,this.valueText3,this.nameText4,this.valueText4,this.nameText5,this.valueText5,this.nameText6,this.valueText6,this.nameText7,this.valueText7,this.nameText8,this.valueText8]},i.prototype.close=function(){if(1===this.shuju[13]){var t=this.shuju[0],e=Handler.create(this,function(){}),i=Handler.create(this,function(){t&&n.chat.ChatCtrl.instance.selectChatDesignation(t)});CommonUtil.alert("提示","是否将该称号同步到聊天界面展示?",[i,"确认"],[e,"取消"])}s.prototype.close.call(this)},i.prototype.setOpenParam=function(t){if(s.prototype.setOpenParam.call(this,t),t&&(this.shuju=o.instance.getCfgById(t),this.shuju)){this.showImg.skin="assets/icon/ui/designation/"+this.shuju[2]+".png",this.showImg.visible=!0,this.atkValueMsz.value=""+this.shuju[12];var e=this.shuju[6],i=e.length/2;i=Math.round(i);var n=Math.round(i/2);0==n?n=1:2*n<i&&(n+=1),this.bg1.height=this.bg2.height=50*n,this.setArr(e)}},i.prototype.setArr=function(t){if(t){for(var e=0;e<this._nameTextArry.length;e++)this._nameTextArry[e].visible=!1;for(e=0;e<t.length;e++)this._nameTextArry[e]&&(this._nameTextArry[e].text=t[e],this._nameTextArry[e].visible=!0)}},e=i,t.PlayerTitleActiveAlert=e}(modules=modules||{}),function(t){var a,r,l,h,c,e;function i(){return null!==r&&r.apply(this,arguments)||this}a=t.pet||(t.pet={}),l=t.common.CommonUtil,h=t.config.StoreCfg,c=t.ride.RideModel,r=ui.AutoBuyAlertUI,__extends(i,r),i.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.operclose,[!0]),this.onAutoClick(this.noBtn,this,this.operclose,[!1]),this.onAutoClick(this.toggleBtn,this,this.toggleBtnHandler)},i.prototype.setOpenParam=function(t){r.prototype.setOpenParam.call(this,t),this.itemView.dataSource=t[0];var e=t[1];0===(this._type=e)?this._m=a.PetModel.instance:1===e&&(this._m=c.instance);var i=t[0][0],n=l.getItemCfgById(i),s=4===l.getItemTypeById(i),o=h.instance.getCfgByitemId(n[s?7:12])[8][1];this.moneyTxt.text=""+o},i.prototype.toggleBtnHandler=function(){this.toggleBtn.selected=this._m.noTipFlag=!this._m.noTipFlag},i.prototype.operclose=function(t){void 0===t&&(t=!1),r.prototype.close.call(this),this._m.autoBuyFlag=t,0===this._type?GlobalData.dispatcher.event("PET_ZIDONG"):1===this._type&&GlobalData.dispatcher.event("RIDE_ZIDONG")},e=i,a.AutoBuyAlert=e}(modules=modules||{}),function(h){var t,l,c,p,u,d,e;function i(){return l.call(this)||this}t=h.store||(h.store={}),c=h.config.StoreCfg,p=h.player.PlayerModel,u=h.bag.BagModel,d=h.common.CommonUtil,l=ui.StoreSpecialAlertUI,__extends(i,l),i.prototype.initialize=function(){l.prototype.initialize.call(this),d.setHTMLPro(this.descriptTxt,"#2c476a","SimHei",26,"center")},i.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this._itemCfg=t[0],this._count=t[1],this._openValue=t[2];var e=!1,i=h.config.ItemExCfg.instance.getAbnormalId(this._itemCfg[1]);if(-1!=i){var n=this._itemCfg[8][0],s=p.instance.getCurrencyById(n);null==s&&(s=u.instance.getItemCountById(n)),s<this._count*this._itemCfg[8][1]&&(this._itemCfg=c.instance.getCfgByitemId(i),e=!0)}var o=this._itemCfg[1],a=this._itemCfg[2];this._price=this._itemCfg[8],this.baseItem.dataSource=[o,a,0,null];var r=d.getItemTypeById(this._price[0]);this.totalPriceImg.skin=9==r?d.getIconById(this._price[0],!0):d.getIconById(this._price[0],!1),this.descriptTxt.innerHTML=e?"<span style='color:#b15315'>元宝不足</span>，是否花费<span style='color:#168a17'>"+d.getNameByItemId(this._price[0])+"</span>购买"+this._count+"个"+this.baseItem._nameTxt.text:"是否花费<span style='color:#168a17'>"+d.getNameByItemId(this._price[0])+"</span>购买"+this._count+"个"+this.baseItem._nameTxt.text,this._price[1],this.totalPriceTxt.text=(this._count*this._price[1]).toString(),this.dontShow.selected=!1},i.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.close),this.onAutoClick(this.conformBtn,this,this.conformBtnHandler),this.onAutoClick(this.dontShow,this,this.dontShowHandler)},i.prototype.close=function(){l.prototype.close.call(this),GlobalData.dispatcher.event("UPDATE_XUNBAOUI")},i.prototype.conformBtnHandler=function(){var t=this,e=this._itemCfg[0],i=this._price[0],n=p.instance.getCurrencyById(i);if(null==n&&(n=u.instance.getItemCountById(i)),n<this._count*this._price[1]){var s=h.config.ItemExCfg.instance.getAbnormalId(this._itemCfg[1]);if(-1!=s){var o=c.instance.getCfgByitemId(s),a=o[8],r=a[0],l=p.instance.getCurrencyById(r);null==l&&(l=u.instance.getItemCountById(i)),l>=a[1]?WindowManager.instance.openDialog(103,[o,Math.floor(l/a[1]),1]):WindowManager.instance.open(106,[r,0,!0]),this.close()}else d.goldNotEnoughAlert(Laya.Handler.create(this,function(){WindowManager.instance.open(111),t.close()}))}else Channel.instance.publish(2099353,[e,this._count]),this.close()},i.prototype.dontShowHandler=function(){if(h.treasure.TreasureModel.instance.getIdByTreasureCondition(this._itemCfg[1],this._openValue))switch(this._itemCfg[1]){case 13550003:t.StoreModel.instance.dontShowShenZun2=this.dontShow.selected=!this.dontShow.selected;break;case 13550004:t.StoreModel.instance.dontShowMiZang2=this.dontShow.selected=!this.dontShow.selected;break;case 13550005:t.StoreModel.instance.dontShowMarry2=this.dontShow.selected=!this.dontShow.selected}else switch(this._itemCfg[1]){case 13540001:t.StoreModel.instance.dontShowTreasure=this.dontShow.selected=!this.dontShow.selected;break;case 10340001:t.StoreModel.instance.dontShowTalisman=this.dontShow.selected=!this.dontShow.selected;break;case 13550002:t.StoreModel.instance.dontShowZhiZun=this.dontShow.selected=!this.dontShow.selected;break;case 13550001:t.StoreModel.instance.dontShowDianFeng=this.dontShow.selected=!this.dontShow.selected;break;case 13540002:t.StoreModel.instance.dontShowFuWen=this.dontShow.selected=!this.dontShow.selected;break;case 13550003:t.StoreModel.instance.dontShowShenZun1=this.dontShow.selected=!this.dontShow.selected;break;case 13550004:t.StoreModel.instance.dontShowMiZang1=this.dontShow.selected=!this.dontShow.selected;break;case 13550005:t.StoreModel.instance.dontShowMarry1=this.dontShow.selected=!this.dontShow.selected}},e=i,t.StoreSpecialAlert=e}(modules=modules||{}),function(i){var p,e,n,s,t,o,a;function r(){return e.call(this)||this}p=i.vip_new||(i.vip_new={}),n=i.bag.BagItem,s=i.common.CustomClip,t=i.common.ProgressBarCtrl,o=i.bag.BagUtil,e=ui.VipNewViewUI,__extends(r,e),r.prototype.close=function(){e.prototype.close.call(this),this.rewardShowItem.stopTween()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this.prizeEffect=this.destroyElement(this.prizeEffect),this._btnClip=this.destroyElement(this._btnClip),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t),this._proCtrl.destroy(),this._proCtrl=null},r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._showAward=new Array,this._increaseShow=new Array,this._increaseShow[0]=[this.increaseShow1,this.increaseNum1],this._increaseShow[1]=[this.increaseShow2,this.increaseNum2],this._increaseShow[2]=[this.increaseShow3,this.increaseNum3],this._showNum=5,this._showY=888,this._starX=60,this._interX=124,this._halfInterX=62,this._state=0,this._initX=65,this._initInterX=210,this._initAddX=18,this._initNum=3,this._initHalfInterX=105,this._progressWidth=330,this.allLink.underline=!0,this._isOdd=!0,this._initIsOdd=!0,this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.scale(.8,.8,!0),this._btnClip.pos(this.receiveBtn.x-5,this.receiveBtn.y-8,!0),this.prizeEffect=CommonUtil.creatEff(this,"ok_state",7),this.addChildAt(this.prizeEffect,2),this.prizeEffect.scale(2,2),this.prizeEffect.pos(113,249),this.prizeEffect.loop=!0,this._proCtrl=new t(this.progressUp,330,this.progressShow),this.initAward(),this.rewardShowItem.setDataFun([1,1,.8,1,"assets/icon/ui/privilege/"]),this.rewardShowItem.tuJianModelCenterY=-45},r.prototype.initAward=function(){for(var t=0;t<this._showNum;t++)this._showAward[t]=new n,this.addChild(this._showAward[t]),this._showAward[t].y=this._showY,this._showAward[t].dataSource=null,this._showAward[t].visible=!1},r.prototype.setIncreasePos=function(){if(this._initIsOdd)for(var t=0;t<this._initNum;t++){var e=this._initX+t*this._initInterX;this._increaseShow[t][0].x=e,this._increaseShow[t][1].x=e+this._initAddX,this._increaseShow[t][0].visible=this._increaseShow[t][1].visible=!1}else for(t=0;t<this._initNum;t++)t<this._initNum-1&&(e=this._initX+t*this._initInterX+this._initHalfInterX,this._increaseShow[t][0].x=e,this._increaseShow[t][1].x=e+this._initAddX),this._increaseShow[t][0].visible=this._increaseShow[t][1].visible=!1},r.prototype.setPos=function(){if(this._isOdd)for(var t=0;t<this._showNum;t++){var e=this._starX+t*this._interX;this._showAward[t].x=e,this._showAward[t].visible=!1}else for(t=0;t<this._showNum;t++)t<this._showNum-1&&(e=this._starX+t*this._interX+this._halfInterX,this._showAward[t].x=e),this._showAward[t].visible=!1},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.allLink,this,this.allLineHandler),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoClick(this.goBottomBtn,this,this.goBtnHandler),this.onAutoClick(this.leftBtn,this,this.leftBtnHandler),this.onAutoClick(this.rightBtn,this,this.rightBtnHandler),this.onAutoClick(this.receiveBtn,this,this.reciveBtnHandler),this.onAutoGlobalEvt("VIPF_UPDATE",this,this.updateShow),this.onAutoGlobalEvt("VIPF_GET_REWARD",this,this.updatePage)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),WindowManager.instance.closeDialogOnVipPanel(),this.updatePage(),this.levelUpdate()},r.prototype.updatePage=function(){this._showVip=p.VipNewModel.instance.getCanGetAward(),this.refreshShow()},r.prototype.updateShow=function(){this.levelUpdate(),this.updateState()},r.prototype.levelUpdate=function(){var t=p.VipNewModel.instance.vipLevel,e=p.VipNewModel.instance.haveNum,i=p.VipNewModel.instance.needNum;if(t-=50,this.levelNum.value=t.toString(),t==p.VipNewModel.instance.maxVipLevel-50)this.showTxt.visible=this.differNum.visible=this.rmbName.visible=this.turnTo.visible=this.vipName.visible=this.upLevel.visible=!1,this._proCtrl.maxValue=e,this._proCtrl.value=e,this.progressShow.text=""+e,this.maxBox.visible=!0;else{this.showTxt.visible=this.differNum.visible=this.rmbName.visible=this.turnTo.visible=this.vipName.visible=this.upLevel.visible=!0;var n=((this._proCtrl.maxValue=i)-(this._proCtrl.value=e)).toString();this.differNum.value=n,this.setTopNoticePos(n.length);var s=t+1;s=s>p.VipNewModel.instance.maxVipLevel-50?p.VipNewModel.instance.maxVipLevel-50:s,this.upLevel.value=s.toString(),this.maxBox.visible=!1}},r.prototype.setTopNoticePos=function(t){var e=254+24*t;this.rmbName.x=e,this.turnTo.x=50+e,this.vipName.x=150+e,this.upLevel.x=215+e},r.prototype.updateBtnShow=function(){this._showVip==p.VipNewModel.instance.maxVipLevel?(this.rightBtn.visible=!1,this.leftBtn.visible=!0):(51==this._showVip?this.leftBtn.visible=!1:this.leftBtn.visible=!0,this.rightBtn.visible=!0)},r.prototype.refreshShow=function(){this.updateBtnShow();var t=p.VipNewModel.instance.getVipCfgByLevel(this._showVip);this.levelGiftName.skin="assets/icon/ui/privilege/"+t[7]+".png";var e=this._showVip-50;this.levelGiftShow.value=""+e;var i=t[9],n=i.toString();0==i?this.levelGiftPower.visible=this.levelGiftPowerNum.visible=this.powerEnd.visible=!1:(this.levelGiftPowerNum.align="left",this.levelGiftPower.visible=this.levelGiftPowerNum.visible=!0,this.levelGiftPowerNum.value=n,this.powerEnd.visible=!1),this.levelPowerShow.value=""+e;var s=t[5],o=s.length;o%2==0?(this._initIsOdd=!1,this.setIncreasePos(),2==o&&this.setPowerShow(0,s)):(this._initIsOdd=!0,this.setIncreasePos(),1==o?this.setPowerShow(1,s):3==o&&this.setPowerShow(0,s));var a=t[4],r=.5*a.length;r%2==0?(this._isOdd=!1,this.setPos(),4==r?this.setRewardShow(0,a):2==r&&this.setRewardShow(1,a)):(this._isOdd=!0,this.setPos(),5==r?this.setRewardShow(0,a):3==r?this.setRewardShow(1,a):1==r&&this.setRewardShow(2,a)),this.updateState();var l=t[11],h=t[8],c=t[12];1==t[13]?(this.prizeEffect.visible=!0,this.prizeEffect.play()):(this.prizeEffect.visible=!1,this.prizeEffect.stop()),2==l&&(h=t[8]),this.observationItem.setRot(),this.rewardShowItem.showRewardObj(h,l,c),this.observationItem.data=[[this.rewardShowItem._modelClip,Math.round(h/1e3)]]},r.prototype.setPowerShow=function(t,e){for(var i=e.length+t,n=0,s=t;s<i;s++)this._increaseShow[s][1].text=e[n],this._increaseShow[s][0].visible=this._increaseShow[s][1].visible=!0,n++},r.prototype.setRewardShow=function(t,e){for(var i=.5*e.length+t,n=0,s=t;s<i;s++){var o=[e[2*n],e[2*n+1],0,null];this._showAward[s].dataSource=o,this._showAward[s].visible=!0,n++}},r.prototype.updateState=function(){this._state=p.VipNewModel.instance.checkCanReceive(this._showVip);var t=p.VipNewModel.instance.getVipCfgByLevel(this._showVip);if(0==this._state){this.receiveBtn.visible=!1,s.thisStop(this._btnClip),this.hasRecive.visible=!1,this.goBottomBtn.visible=!1,this.tipsText.visible=!0;var e=t[15];i.recharge.RechargeModel.instance._ischouzhi?this.tipsText.text="达到天关"+e+"关送VIP":this.tipsText.text="达到天关"+e+"关即可领取"}else 1==this._state?(this.receiveBtn.visible=!0,s.thisPlay(this._btnClip),this.hasRecive.visible=!1):(this.receiveBtn.visible=!1,s.thisStop(this._btnClip),this.hasRecive.visible=!0),this.goBottomBtn.visible=!1,this.tipsText.visible=!1},r.prototype.leftBtnHandler=function(){51!=this._showVip&&(this._showVip--,this.refreshShow())},r.prototype.rightBtnHandler=function(){this._showVip!=p.VipNewModel.instance.maxVipLevel&&(this._showVip++,this.refreshShow())},r.prototype.goBtnHandler=function(){WindowManager.instance.open(111)},r.prototype.reciveBtnHandler=function(){var t=p.VipNewModel.instance.getVipCfgByLevel(this._showVip)[4],e=[];if(t){for(var i=0,n=.5*t.length;i<n;i++)e.push([t[2*i],t[2*i+1],0,null]);o.canAddItemsByBagIdCount(e)&&p.VipNewCtrl.instance.GetVipFReward(this._showVip)}},r.prototype.allLineHandler=function(){WindowManager.instance.openDialog(368,this._showVip)},a=r,p.VipNewPanel=a}(modules=modules||{}),function(t){var i,e,n,s;function o(){return e.call(this)||this}i=t.vip_new||(t.vip_new={}),n=t.common.SimpleList,e=ui.VipAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(i.VipNewPowerItem,500,25,1,1,15),this._list.width=454,this._list.height=415,this.showPanel.addChild(this._list),this._list.pos(21,6,!0)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.leftBtn,this,this.leftBtnHandler),this.onAutoClick(this.rightBtn,this,this.rightBtnHandler)},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._showVip=t,this.refreshShow()},o.prototype.refreshShow=function(){this.updateBtnShow();var t=this._showVip-50;this.title.text="VIP"+t+"特权";var e=i.VipNewModel.instance.getVipCfgByLevel(this._showVip);this._list.datas=e[6]},o.prototype.updateBtnShow=function(){this._showVip==i.VipNewModel.instance.maxVipLevel?(this.rightBtn.visible=!1,this.leftBtn.visible=!0):(51==this._showVip?this.leftBtn.visible=!1:this.leftBtn.visible=!0,this.rightBtn.visible=!0)},o.prototype.leftBtnHandler=function(){51!=this._showVip&&(this._showVip--,this.refreshShow())},o.prototype.rightBtnHandler=function(){this._showVip!=i.VipNewModel.instance.maxVipLevel&&(this._showVip++,this.refreshShow())},o.prototype.destroy=function(){this.destroyElement(this._list),e.prototype.destroy.call(this)},s=o,i.VipNewAlert=s}(modules=modules||{}),function(r){var l,s,h,c,t,p,u,e,i;function n(){var t=null!==s&&s.apply(this,arguments)||this;return t.tenWidth=550,t.fifWidth=807,t}l=r.zxian_yu||(r.zxian_yu={}),h=r.notice.SystemNoticeManager,c=laya.maths.Point,t=r.bag.BagItem,p=r.config.TreasureCfg,u=r.bag.BagUtil,e=r.common.SimpleList,s=ui.ZXianYuAlertUI,__extends(n,s),n.prototype.initialize=function(){s.prototype.initialize.call(this),this._showIds=new Array,this._list=e.create(t,100,100,1,5,20,20),this._list.width=620,this._list.height=530,this.addChild(this._list),this._list.pos(40,90,!0)},n.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.fiftyBtn,this,this.xunBaoHandler,[2]),this.onAutoGlobalEvt("BLESSING_UPDATE",this,this.setItemNum),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setItemNum),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.setDiscount)},n.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.tenBtn.label="祈福10次",this.fiftyBtn.label="祈福50次",this.setItemNum(),this.setDiscount()},n.prototype.setOpenParam=function(t){if(s.prototype.setOpenParam.call(this,t),null!=t){var e=t[this._showIds.length=0];this._type=t[1],10==e.length?(this.height=this.bg.height=this.tenWidth,this._list.height=280,this.btn1.y=392):(this.height=this.bg.height=this.fifWidth,this._list.height=530,this.btn1.y=649);for(var i=0;i<e.length;i++){var n=[e[i],0,0,null];this._showIds.push(n)}this._list.datas=this._showIds,this._list.scrollTo(0),this.playEffect(e)}},n.prototype.xunBaoHandler=function(t){if(this._cdFlag)h.instance.addNotice("操作过于频繁",!0);else{var e,i,n;if(this._cdFlag=!0,Laya.timer.once(500,this,this.setFlag),r.festival.FestivalModel.instance.isXIanYu()[1]){var s=r.festival.FestivalModel.instance.getNowFestivalType(13);e=p.instance.getItemFestConditionByGrad(s,l.ZXianYuModel.instance.type,0)[2],i=p.instance.getItemFestConditionByGrad(s,l.ZXianYuModel.instance.type,1)[2],n=p.instance.getItemFestConditionByGrad(s,l.ZXianYuModel.instance.type,2)[2]}else e=l.ZXianYuModel.instance.oneNum,i=l.ZXianYuModel.instance.twoNum,n=l.ZXianYuModel.instance.threeNum;var o=!1,a=l.ZXianYuModel.instance.xianyu;switch(t){case 0:o=e<=a;break;case 1:o=i<=a;break;case 2:o=n<=a}o?r.treasure.TreasureCtrl.instance.runXunbao(this._type,t):u.openLackPropAlert(r.zxian_yu.ZXianYuModel.instance.id,1)}},n.prototype.setItemNum=function(){var t,e;if(r.festival.FestivalModel.instance.isXIanYu()[1]){var i=r.festival.FestivalModel.instance.getNowFestivalType(13);t=p.instance.getItemFestConditionByGrad(i,l.ZXianYuModel.instance.type,1)[2],e=p.instance.getItemFestConditionByGrad(i,l.ZXianYuModel.instance.type,2)[2]}else t=l.ZXianYuModel.instance.twoNum,e=l.ZXianYuModel.instance.threeNum;var n=l.ZXianYuModel.instance.xianyu;this.tenCount.text=n+"/"+t,this.fiftyCount.text=n+"/"+e,this.tenCount.color=t<=n?"#4c5e8a":"#FF3e3e",this.fiftyCount.color=e<=n?"#4c5e8a":"#FF3e3e",CommonUtil.adaptationImgAndText([[this.tenCountImg,2,0],[this.tenCount,1,0]],this.tenCountBox.width,0,"center"),CommonUtil.adaptationImgAndText([[this.fifityCountImg,2,0],[this.fiftyCount,1,0]],this.fiftyCountBox.width,0,"center")},n.prototype.playEffect=function(t){for(var e=t,i=0;i<this._list.items.length;i++){var n=this._list.items[i].x+this._list.items[i].width/2,s=this._list.items[i].y+this._list.items[i].height/2,o=new c(n,s),a=[e[i],o,this.height];GlobalData.dispatcher.event("ZXIANYU_EFFECT",[[a]])}},n.prototype.setFlag=function(){this._cdFlag=!1},n.prototype.close=function(){this.setFlag(),Laya.timer.clear(this,this.setFlag),s.prototype.close.call(this)},n.prototype.destroy=function(){this.destroyElement(this._list),s.prototype.destroy.call(this)},n.prototype.setDiscount=function(){if(r.festival.FestivalModel.instance.isXIanYu()[1]){var t=r.festival.FestivalModel.instance.getNowFestivalType(13),e=l.ZXianYuModel.instance.zekouTable[t];e&&(this.disCount1Img.skin="zxian_yu/"+e+".png",this.discount2Img.skin="zxian_yu/"+e+".png")}else this.disCount1Img.skin="zxian_yu/9.png",this.discount2Img.skin="zxian_yu/9.png",this.setItemNum()},i=n,l.ZXianYuAlert=i}(modules=modules||{}),function(t){var s,e,i,n,o,a,r,l,h,c;function p(){return null!==e&&e.apply(this,arguments)||this}s=t.zxian_yu||(t.zxian_yu={}),i=laya.events.Event,n=t.bag.BagModel,o=t.bag.BagUtil,a=t.notice.SystemNoticeManager,r=t.common.CommonUtil,l=t.common.BtnGroup,h=t.common.CustomList,e=ui.ZXianYuBagViewUI,__extends(p,e),p.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._bagList=h.create("v",100,100,620,714,s.ZXianYuBagItem,20,5),this._bagList.spaceX=20,this._bagList.spaceY=20,this.itemPanel.addChild(this._bagList),this._btnGroup=new l,this._bagList.x=27,this._bagList.y=0,this._btnGroup.setBtns(this.qiFuBtn,this.cangKuBtn)},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.getAllBtn,this,this.getAllBtnHandler),this.onAutoEvt(this._btnGroup,i.CHANGE,this,this.btnGroupHandler),this.onAutoGlobalEvt("ZXIANYU_REPLY",this,this.updateBag),this.onAutoGlobalEvt("ZXIANYU_ALL_REPLY",this,this.updateBag),this.regAutoRP(this.qiFuRpImg,["zxianYuTreasurePanelRP"]),this.regAutoRP(this.cangKuImg,["zxianYuBagPanelRP"])},p.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=1,this.updateBag()},p.prototype.btnGroupHandler=function(){0===this._btnGroup.selectedIndex?(WindowManager.instance.open(377),this._btnGroup.selectedIndex=1):this._btnGroup.selectedIndex},p.prototype.updateBag=function(){this._showIds=this.genGrids(),this._showIds&&(this._bagList.datas=this._showIds,s.ZXianYuModel.instance.selectItem.length=0)},p.prototype.genGrids=function(){if(n.instance.getItemsByBagId(6)){var t=n.instance.getItemsByBagId(6).concat();return(t=t.sort(this.sortFunc.bind(this))).length<100&&(t=t.concat(new Array(100-t.length))),t}return[]},p.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=r.getItemQualityById(i),o=r.getItemQualityById(n);return s!==o?o-s:n-i},p.prototype.getBtnHandler=function(){for(var t=s.ZXianYuModel.instance.selectItem,e=o.canAddItemsByBagIdCount(t),i=new Array,n=0;n<t.length;n++)i.push(t[n][2]);1==e&&(0<i.length?Channel.instance.publish(2097256,[i]):a.instance.addNotice("当前无选中道具",!0))},p.prototype.getAllBtnHandler=function(){var t=n.instance.getItemsByBagId(6);1==o.canAddItemsByBagIdCount(t)&&(t&&0<t.length?Channel.instance.publish(2097257,null):a.instance.addNotice("当前仓库无可取出的道具",!0))},p.prototype.destroy=function(t){void 0===t&&(t=!0),this.destroyElement(this._bagList),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this,t)},c=p,s.ZXianYuBagPanel=c}(modules=modules||{}),function(e){var n,t,i,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}n=e.zxian_yu||(e.zxian_yu={}),i=e.common.CommonUtil,s=e.vip.VipModel,t=ui.ZXianYuViewUI,__extends(a,t),a.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.maxNum=0,this._isFestival=!1,this.blendMaxNum=0,this.bgImg.skin="ios_1"===PlatParams.configs||"wechat"===PlatParams.configs?"zxian_yu/image_xy_bg_1.jpg":"zxian_yu/image_xy_bg.jpg"},a.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.tipsBtn,this,this.tipsBtnHandler),this.onAutoClick(this.goBottomBtn,this,this.goBottomBtnHandler),this.onAutoGlobalEvt("ZXIANYU_UPDATE",this,this.setTodayTipsText),this.onAutoGlobalEvt("VIPF_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.setTipTxt)},a.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.tipsText.style.align="center",this.tipsText.style.font="SimHei",this.tipsText.style.fontSize=23,this.titleTxt.text="仙玉",this.maxNum=0,this.blendMaxNum=0,this.updateView(),this.setTipTxt(),n.ZXianYuCtrl.instance.GetXianYuInfo()},a.prototype.updateView=function(){var t=s.instance.vipLevel,e=n.ZXianYuModel.instance._everydayMaxLimit;this.blendMaxNum=e[e.length-1];for(var i=e.length-1;0<i;i-=2)if(t>=e[i-1]){this.maxNum=e[i];break}this.tipsText.innerHTML='<span style="color:#50ff28">元宝充值</span><span style="color:#FFFFFF">可得仙玉每日最大获取上限为</span><span style="color:#50ff28">'+this.maxNum+"</span>",this.setTodayTipsText()},a.prototype.goBottomBtnHandler=function(){WindowManager.instance.open(111)},a.prototype.setTodayTipsText=function(){if(!this._isFestival){var t=n.ZXianYuModel.instance.xianyuLimit;t>=this.maxNum?(this.tiptxt2.color="#ffec7c",t=this.maxNum):this.tiptxt2.color="#50ff28",this.tip1.visible=this.maxNum!==this.blendMaxNum,this.tiptxt2.text=t+"/"+this.maxNum}},a.prototype.tipsBtnHandler=function(){i.alertHelp(20063)},a.prototype.setTipTxt=function(){var t=e.festival.FestivalModel.instance.isXIanYu();t[0]||t[3]?(t[0]?(this.festTxt1.text="活动内容：活动时间内，充值可获得",this.festTxt2.text="1.2倍仙玉收益！仙玉获取无上限限制!",this.festTxt3.text="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this.festTxt1.y=923,this.festTxt2.y=958,this.festTxt3.y=996,this.festTxt3.visible=!0):t[3]&&(this.festTxt1.text="活动时间内，充值获得",this.festTxt2.text="的仙玉无上限，累充再送大量仙玉！",this.festTxt3.text="",this.festTxt1.y=944,this.festTxt2.y=979,this.festTxt3.y=996,this.festTxt3.visible=!1),this._isFestival=!0,this.tiptxt1.visible=!1,this.tiptxt2.visible=!1,this.tiptxt3.visible=!1,this.tip1.visible=!1,this.tipsText.visible=!1,this.festTxt1.visible=!0,this.festTxt2.visible=!0):(this._isFestival=!1,this.tiptxt1.visible=!0,this.tiptxt2.visible=!0,this.tiptxt3.visible=!0,this.tip1.visible=!0,this.tipsText.visible=!0,this.festTxt1.visible=!1,this.festTxt2.visible=!1,this.festTxt3.visible=!1)},o=a,n.ZXianYuPanel=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("yuge"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.yuGeCfg=i}(modules=modules||{}),function(e){var i,n,s,t,o,a;function r(){return n.call(this)||this}i=e.zxian_yu||(e.zxian_yu={}),s=e.common.CommonUtil,t=e.common.CustomList,o=e.funcOpen.FuncOpenModel,n=ui.ZXianYuStoreViewUI,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=t.create("v",196,260,620,569,i.ZXianYuStoreItem,47,3),this._list.spaceY=47,this._list.spaceX=16,this.addChild(this._list),this._list.x=50,this._list.y=355},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.updateBtn,this,this.updateBtnHandler),this.onAutoGlobalEvt("ZXIANYU_YUGE_UPDATE",this,this.showUI)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),i.ZXianYuModel.instance.updateVlaue&&(this.moneyText.text=""+i.ZXianYuModel.instance.updateVlaue[1]),i.ZXianYuCtrl.instance.GetYuGeInfo()},r.prototype.sortDate=function(t,e){var i=t[1];return e[1]<i?1:-1},r.prototype.showUI=function(){var t=i.ZXianYuModel.instance.idList;t.sort(this.sortDate),this._list.datas=t,Laya.timer.clear(this,this.activityHandler),this.setActivitiTime()},r.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=o.instance.getFuncIsOpen(233);i.ZXianYuModel.instance.f5Time>=GlobalData.serverTime&&t?(this.timeUpdateText.visible=!0,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.timeUpdateText.visible=!1},r.prototype.activityHandler=function(){this.timeUpdateText.text=s.timeStampToHHMMSS(i.ZXianYuModel.instance.f5Time)+"后自动刷新",i.ZXianYuModel.instance.f5Time<GlobalData.serverTime&&(this.timeUpdateText.visible=!1,Laya.timer.clear(this,this.activityHandler))},r.prototype.updateBtnHandler=function(){var t=i.ZXianYuModel.instance.updateVlaue[1];e.player.PlayerModel.instance.ingot>=t?i.ZXianYuCtrl.instance.F5YuGe():s.goldNotEnoughAlert()},r.prototype.close=function(){Laya.timer.clear(this,this.activityHandler),n.prototype.close.call(this)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this.destroyElement(this._list),n.prototype.destroy.call(this,t)},a=r,i.ZXianYuStorePanel=a}(modules=modules||{}),function(m){var f,t,g,i,y,r,e,l,_,n,s,o,a;function h(){return null!==t&&t.apply(this,arguments)||this}function c(){var t=null!==o&&o.apply(this,arguments)||this;return t._bolll=!1,t._bolllPos=!1,t._index=0,t._index1=0,t}f=m.zxian_yu||(m.zxian_yu={}),g=m.config.TreasureCfg,i=m.common.BtnGroup,y=laya.maths.Point,r=m.bag.BagUtil,e=m.config.BlendCfg,l=m.notice.SystemNoticeManager,_=m.common.CommonUtil,n=m.common.SimpleList,t=ItemRender,__extends(h,t),h.prototype.initialize=function(){t.prototype.initialize.call(this),this.text=new laya.html.dom.HTMLDivElement,this.text.width=487,this.height=20,this.addChild(this.text),this.mouseEnabled=!1},h.prototype.setData=function(t){var e=t[0],i=t[1],n="<span style='color:#3a5385;font-size: 20px'>天赐鸿福,</span><span style='color:rgb(13,121,255);font-size: 20px;'>["+e+"]</span><span style='color:#3a5385;font-size: 20px'>获得了</span><span style='color:"+_.getColorById(i)+";font-size: 20px;'>"+_.getNameByItemId(i)+"</span>";this.text.innerHTML=n,this.visible=!0},s=h,o=ui.ZXianYuTreasureViewUI,__extends(c,o),c.prototype.initialize=function(){o.prototype.initialize.call(this),this._isReward=!1,this.centerX=this.centerY=0,this._bolll=!1,this._bolllPos=!1,this._index=0,this._index1=0,this._sevStringArr=new Array,this._btnGroup=new i,this._btnGroup.setBtns(this.qiFuBtn,this.cangKuBtn),this._jiLubtnGroup=new i,this._jiLubtnGroup.setBtns(this.severList,this.selfList),this._showItem=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item15],this._fuYuanshowItem=[this.item10,this.item11,this.item12,this.item13,this.item14],this._fuYuanshowImg=[this.ylqImg1,this.ylqImg2,this.ylqImg3,this.ylqImg4,this.ylqImg5],this._clipArr=new Array;for(var t=0;t<this._showItem.length;t++)(e=_.creatEff(this._showItem[t],"item_effect2",15)).pos(-14,-22,!0),e.durationFrame=6,e.name="clip",this._clipArr.push(e);for(t=0;t<this._fuYuanshowItem.length;t++){var e;(e=_.creatEff(this._fuYuanshowItem[t],"item_effect2",15)).pos(-14,-22,!0),e.durationFrame=6,e.visible=!1,e.name="clip",this._clipArr.push(e)}this._personalList=n.create(s,487,20,1,1,0,8),this._personalList.width=500,this._personalList.height=112,this.selfPanel.addChild(this._personalList),this._personalList.x=0,this._personalList.y=0,this.sp=new Laya.Sprite,this.sp.visible=!1,this.blessImg.addChild(this.sp),this.blessImg.mask=this.sp,this.probabilityTipsTxt.underline=!0},c.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupHandler),this.onAutoEvt(this._jiLubtnGroup,"change",this,this.jiLubtnGroupHandler),this.onAutoClick(this.oneBtn,this,this.xunBaoHandler,[0]),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.fiftyBtn,this,this.xunBaoHandler,[2]),this.onAutoClick(this.lingQuBtn,this,this.lingQuBtnHandler),this.onAutoClick(this.allRewardBtn,this,this.allRewardBtnHandler),this.onAutoClick(this.probabilityTipsTxt,this,this.probabilityHandler),this.onAutoGlobalEvt("SEVER_BROADCAST_LIST",this,this.updateSeverList),this.onAutoGlobalEvt("SELF_BROADCAST_LIST",this,this.updateSelfList),this.onAutoGlobalEvt("ZXIANYU__SHOWHTML",this,this.showHtml),this.onAutoGlobalEvt("RUN_XUNBAO_REPLY",this,this.xunBaoReply),this.onAutoGlobalEvt("BLESSING_UPDATE",this,this.setItemNum),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setItemNum),this.onAutoGlobalEvt("ZXIANYU_FUYUAN_UPDATE",this,this.setJinDu),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.setDiscount),this.regAutoRP(this.qiFuRpImg,["zxianYuTreasurePanelRP"]),this.regAutoRP(this.cangKuImg,["zxianYuBagPanelRP"])},c.prototype.probabilityHandler=function(){f.ZXianYuModel.instance.getZhanShi();var t="";m.festival.FestivalModel.instance.isXIanYu()[1]?t+=e.instance.getCfgById(f.ZXianYuModel.instance.gaiLvGongShi)[2]:t+=e.instance.getCfgById(66008)[2],WindowManager.instance.openDialog(443,["概率公示",t,695])},c.prototype.onOpened=function(){o.prototype.onOpened.call(this),f.ZXianYuModel.instance.getZhanShi(),this._bolll=!1,this._bolllPos=!1,this._index=0,this._index1=0,this._btnGroup.selectedIndex=0,this._jiLubtnGroup.selectedIndex=0,this._cdFlag=!1,this.showReward(),this.showFuYuanReward(),this.setItemNum(),this.getShuJu(),f.ZXianYuCtrl.instance.GetXianYuInfo(),f.ZXianYuCtrl.instance.GetXianYuFuYuInfo(),this.setActionPreviewPos(),this.setDiscount()},c.prototype.getShuJu=function(){Channel.instance.publish(2099052,[f.ZXianYuModel.instance.type]),Channel.instance.publish(7340332,[f.ZXianYuModel.instance.type])},c.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview)},c.prototype.setPosActionPreview=function(){y.TEMP.setTo(this.cangKuBtn.width/2,this.cangKuBtn.height/2);var t=this.cangKuBtn.localToGlobal(y.TEMP,!0);m.action_preview.ActionPreviewModel.instance._posSprite.set(10000004,t)},c.prototype.btnGroupHandler=function(){0===this._btnGroup.selectedIndex||1===this._btnGroup.selectedIndex&&(WindowManager.instance.open(374),this._btnGroup.selectedIndex=0)},c.prototype.jiLubtnGroupHandler=function(){0===this._jiLubtnGroup.selectedIndex?(this.severPanel.visible=!0,this.selfPanel.visible=!1):1===this._jiLubtnGroup.selectedIndex&&(this.severPanel.visible=!1,this.selfPanel.visible=!0)},c.prototype.allRewardBtnHandler=function(){WindowManager.instance.open(390)},c.prototype.xunBaoHandler=function(t){if(this._cdFlag)l.instance.addNotice("操作过于频繁",!0);else{var e,i,n;if(this._cdFlag=!0,Laya.timer.once(500,this,this.setFlag),m.festival.FestivalModel.instance.isXIanYu()[1]){var s=m.festival.FestivalModel.instance.getNowFestivalType(13);e=g.instance.getItemFestConditionByGrad(s,f.ZXianYuModel.instance.type,0)[2],i=g.instance.getItemFestConditionByGrad(s,f.ZXianYuModel.instance.type,1)[2],n=g.instance.getItemFestConditionByGrad(s,f.ZXianYuModel.instance.type,2)[2]}else e=f.ZXianYuModel.instance.oneNum,i=f.ZXianYuModel.instance.twoNum,n=f.ZXianYuModel.instance.threeNum;var o=!1,a=f.ZXianYuModel.instance.xianyu;switch(t){case 0:o=e<=a;break;case 1:o=i<=a;break;case 2:o=n<=a}o?m.treasure.TreasureCtrl.instance.runXunbao(f.ZXianYuModel.instance.type,t):r.openLackPropAlert(m.zxian_yu.ZXianYuModel.instance.id,1)}},c.prototype.xunBaoReply=function(){var t=m.treasure.TreasureModel.instance.runXunbaoReply;if(0==t[1]){this.getShuJu();var e=t[0],i=t[2];if(i.length<10){for(var n=[],s=new y(300,350),o=0;o<i.length;o++){var a=[i[o],s,this.height];n.push(a)}GlobalData.dispatcher.event("ZXIANYU_EFFECT",[n])}9<i.length&&WindowManager.instance.open(373,[i,f.ZXianYuModel.instance.type]);var r=g.instance.getBestIdByType(e);if(m.festival.FestivalModel.instance.isXIanYu()[1]){var l=m.festival.FestivalModel.instance.getNowFestivalType(13),h=m.festival.FestivalModel.instance.info[l],c=m.festival.FestivalModel.instance.getHuoDongType(l);if(!h||!c)return;var p=h[5],u=h[1];r=g.instance.getBestIdByType(e,0,l,p,u)}var d=new Array;for(o=0;o<i.length;o++)0<=r.indexOf(i[o])&&d.push(i[o]);0<d.length&&WindowManager.instance.open(95,d)}else _.noticeError(t[1])},c.prototype.setFlag=function(){this._cdFlag=!1},c.prototype.setItemNum=function(){var t,e,i;if(m.festival.FestivalModel.instance.isXIanYu()[1]){var n=m.festival.FestivalModel.instance.getNowFestivalType(13);t=g.instance.getItemFestConditionByGrad(n,f.ZXianYuModel.instance.type,0)[2],e=g.instance.getItemFestConditionByGrad(n,f.ZXianYuModel.instance.type,1)[2],i=g.instance.getItemFestConditionByGrad(n,f.ZXianYuModel.instance.type,2)[2]}else t=f.ZXianYuModel.instance.oneNum,e=f.ZXianYuModel.instance.twoNum,i=f.ZXianYuModel.instance.threeNum;var s=f.ZXianYuModel.instance.xianyu;this.oneCount.text=s+"/"+t,this.tenCount.text=s+"/"+e,this.fiftyCount.text=s+"/"+i,this.oneCount.color=t<=s?"#4c5e8a":"#FF3e3e",this.tenCount.color=e<=s?"#4c5e8a":"#FF3e3e",this.fiftyCount.color=i<=s?"#4c5e8a":"#FF3e3e",_.adaptationImgAndText([[this.oneCountImg,2,0],[this.oneCount,1,0]],this.oneCountBox.width,0,"center"),_.adaptationImgAndText([[this.tenCountImg,2,0],[this.tenCount,1,0]],this.tenCountBox.width,0,"center"),_.adaptationImgAndText([[this.fifityCountImg,2,0],[this.fiftyCount,1,0]],this.fiftyCountBox.width,0,"center")},c.prototype.lingQuBtnHandler=function(){var t=f.ZXianYuModel.instance.getFuYuanAward();t&&f.ZXianYuCtrl.instance.GetFuYuanAward(t[1])},c.prototype.setJinDu=function(){var t=f.ZXianYuModel.instance.getFuYuanAward();if(t){var e=t[0];this.blessTxt.text=f.ZXianYuModel.instance.fuyu+"/"+e;var i=f.ZXianYuModel.instance.fuyu/e;i=1<i?1:i,this.lingQuJinDuMaskImg.height=this.lingQuJinDuMaskImg.width*i,f.ZXianYuModel.instance.fuyu>=e?(this._isReward=!0,this.fuYuanRpImg.visible=!0):(this._isReward=!1,this.fuYuanRpImg.visible=!1);for(var n=0;n<this._fuYuanshowImg.length;n++)this._fuYuanshowImg[n].visible=n<t[1]}this.drawSomething()},c.prototype.drawSomething=function(){var t=f.ZXianYuModel.instance.getMaxVlaue(),e=f.ZXianYuModel.instance.fuyu/t,i=180*(e=1<e?1:e);this.sp.graphics.clear(),this.sp.graphics.drawPie(200,198,180,180,180+i,"#ff0000")},c.prototype.showReward=function(){for(var t=0;t<this._showItem.length;t++)(h=this._showItem[t])&&(h.visible=!1);var e=g.instance.getItemShow(f.ZXianYuModel.instance.type)[0],i=e[3];if(m.festival.FestivalModel.instance.isXIanYu()[1]){var n=m.festival.FestivalModel.instance.getNowFestivalType(13),s=m.festival.FestivalModel.instance.info[n],o=m.festival.FestivalModel.instance.getHuoDongType(n);if(!s||!o)return;var a=s[5],r=s[1],l=(e=g.instance.getItemShow(5,n,a,r)[0])[5];for(t=0;t<l.length;t++){var h;if((h=l[t])&&h[0]===n){i=h[1];break}}}else i=e[3];for(var c=0;c<i.length;c++){var p=i[c],u=this._showItem[c];if(u){u.dataSource=[p,1,0,null],u.visible=!0,u.isbtnClipIsPlayer=!1;var d=u.getChildByName("clip");d.play(),d.visible=!0}}},c.prototype.showFuYuanReward=function(){for(var t=0;t<this._fuYuanshowItem.length;t++)(s=this._fuYuanshowItem[t])&&(s.visible=!1);var e=0;f.ZXianYuModel.instance.getTask();for(var i=f.ZXianYuModel.instance.taskActivesAward,n=0;n<i.length;n++)if(i[n]){var s=i[n];for(t=0;t<s.length;t+=2){var o=s[t],a=s[t+1],r=this._fuYuanshowItem[e];if(r){r.dataSource=[o,a,0,null],r.visible=!0,r.isbtnClipIsPlayer=!1;var l=r.getChildByName("clip");l.play(),l.visible=!0,e++}}}},c.prototype.desDoryArr=function(){if(this._htmlArr){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&(e.closeTimer(),e.visible=!1,e.removeSelf(),e.destroy())}this._htmlArr.length=0,this._htmlArr=null}},c.prototype.setARR=function(){if(!this._htmlArr){this._htmlArr=new Array;for(var t=0;t<20;t++){var e=new f.HtmlReward(487,20,this._htmlArr);this.severPanel.addChild(e),e.name="数据："+t,this._htmlArr.push(e)}}},c.prototype.showHtml=function(){if(this._sevStringArr&&0<this._sevStringArr.length){var t=void 0;this.setARR(),t=this._htmlArr[this._index],this._index=this._index+1,this._index=this._index>this._htmlArr.length-1?0:this._index,t&&(t.setText(120,112,this.getSevStringArr()),this._bolllPos||(this._bolllPos=!0,Laya.timer.clear(this,this.updateList),Laya.timer.frameLoop(1,this,this.updateList)))}},c.prototype.getSevStringArr=function(){var t;return t=this._sevStringArr[this._index1],this._index1=this._index1+1,this._index1=this._index1>this._sevStringArr.length-1?0:this._index1,t},c.prototype.updateList=function(){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&e.updateList()}},c.prototype.updateSeverList=function(){var t=m.treasure.TreasureModel.instance.getSvrBroadcast(f.ZXianYuModel.instance.type);if(null!=t&&0<t.length){0<this._sevStringArr.length&&(this._sevStringArr.length=0),t.reverse();for(var e=0;e<10;e++)if(t[e]){var i=t[e][0],n=t[e][1],s=m.common.CommonUtil.getNameByItemId(n),o="<span style='color:#3a5385;'>天赐鸿福,</span>";o+="<span style='color:rgb(13,121,255);'>["+i+"]</span>",o+="<span style='color:#3a5385;'>获得了</span>",o+="<span style='color:"+m.common.CommonUtil.getColorById(n)+";'>"+s+"*1</span>",this._sevStringArr.push(o)}0<this._sevStringArr.length&&!this._bolll&&(this._bolll=!0,this.showHtml())}},c.prototype.updateSelfList=function(){var t=m.treasure.TreasureModel.instance.getSelfBroadcast(f.ZXianYuModel.instance.type);this._personalList.datas=t,this._personalList.scrollTo(28*this._personalList.datas.length)},c.prototype.close=function(){o.prototype.close.call(this),Laya.timer.clear(this,this.updateList),this.desDoryArr(),Laya.timer.clear(this,this.setFlag),this.setFlag()},c.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),this._jiLubtnGroup&&(this._jiLubtnGroup.destroy(),this._jiLubtnGroup=null),this._clipArr=this.destroyElement(this._clipArr),o.prototype.destroy.call(this,t)},c.prototype.setDiscount=function(){if(m.festival.FestivalModel.instance.isXIanYu()[1]){var t=m.festival.FestivalModel.instance.getNowFestivalType(13),e=f.ZXianYuModel.instance.zekouTable[t];e&&(this.disCount3Img||(this.disCount3Img=new Laya.Image("zxian_yu/"+e+".png")),this.addChild(this.disCount3Img),this.disCount3Img.pos(194,930),this.disCount1Img.skin="zxian_yu/"+e+".png",this.discount2Img.skin="zxian_yu/"+e+".png");var i="zxian_yu/iconbg_ys_tmzz.png";2===t?i="zxian_yu/iconbg_ys_tmzz.png":6===t?i="zxian_yu/iconbg_gexl_tmzz.png":8===t?i="zxian_yu/iconbg_mrkh_tmzz.png":16===t?i="zxian_yu/iconbg_cxss_tmzz.png":20===t&&(i="zxian_yu/iconbg_jlqf_tmzz.png"),16===t?(this.img6.skin=i,this.img6.scale(1.2,1.2),this.item6.scale(1.2,1.2),this.img15.skin=i,this.img15.scale(1.2,1.2),this.item15.scale(1.2,1.2),this.item15.visible=!0,this.img15.visible=!1,this.item5.pos(74,290,!0),this.img5.pos(45,262,!0),this.item6.pos(350,324,!0),this.img6.pos(342,316,!0)):(this.img6.skin=i,this.img6.scale(1.2,1.2),this.item6.scale(1.2,1.2),this.img15.skin=i,this.img15.scale(1.2,1.2),this.item15.scale(1.2,1.2),this.item15.visible=this.img15.visible=!0,this.item5.pos(74,290,!0),this.img5.pos(45,262,!0),this.item6.pos(269,343,!0),this.img6.pos(264,338,!0)),this.item7.pos(568,292,!0),this.img7.pos(534,262,!0),this.item8.pos(115,398,!0),this.img8.pos(84,368,!0),this.item9.pos(522,401,!0),this.img9.pos(490,373,!0),this.item15.pos(458,343,!0),this.img15.pos(449,340,!0)}else this.disCount3Img&&this.destroyElement(this.disCount3Img),this.disCount1Img.skin="zxian_yu/9.png",this.discount2Img.skin="zxian_yu/9.png",this.img6.skin="zxian_yu/image_xy_iconzz.png",this.img6.scale(.75,.75),this.item6.scale(.8,.8),this.item15.visible=this.img15.visible=!1,this.item5.pos(169,266,!0),this.img5.pos(139,235,!0),this.item6.pos(353,342,!0),this.img6.pos(348,336,!0),this.item7.pos(456,266,!0),this.img7.pos(426,237,!0),this.item8.pos(71,348,!0),this.img8.pos(40,317,!0),this.item9.pos(568,353,!0),this.img9.pos(536,322,!0);this.setItemNum(),this.showReward(),this.showFuYuanReward()},a=c,f.ZXianYuTreasurePanel=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("xianfu_mall2"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.XianFuMallCfg=i}(modules=modules||{}),function(n){var o,a,t,e,r,i,s,l,h,c;function p(){var t=a.call(this)||this;return t.typeNums=[1,2,3,4,6,7],t}o=n.store||(n.store={}),t=laya.events.Event,e=n.common.CustomList,r=n.funcOpen.FuncOpenModel,i=n.common.GlobalData,s=n.common.BtnGroup,l=n.config.StoreCfg,h=n.common.CommonUtil,a=ui.StoreXianFuViewUI,__extends(p,a),p.prototype.initialize=function(){a.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new e,this._list.hCount=2,this._list.itemRender=o.StoreXianFuItem,this._list.width=662,this._list.height=669,this._list.spaceY=6,this._list.spaceX=7,this._list.x=28,this._list.y=108,this.addChildAt(this._list,4),this.mallType=10,this._tab=new s,this._tab.setBtns(this.btn_1,this.btn_2,this.btn_3,this.btn_4,this.btn_5,this.btn_6,this.btn_7,this.btn_8,this.btn_9,this.btn_10),this._btnArr=[this.btn_1,this.btn_2,this.btn_3,this.btn_4,this.btn_5,this.btn_6,this.btn_7,this.btn_8,this.btn_9,this.btn_10]},Object.defineProperty(p.prototype,"mallType",{set:function(t){this._mallType=t,this._panels=0==t?[128,129,130]:10==t?[132,235,414,640,760,385,1169]:[345,346]},enumerable:!0,configurable:!0}),p.prototype.selectStore=function(){var t=this._tab.selectedIndex,e=this._panels[t];WindowManager.instance.open(e)},p.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoEvt(this._tab,t.CHANGE,this,this.selectStore),this.onAutoClick(this.updateBtn,this,this.updateBtnHandler),this.onAutoGlobalEvt("STORE_XIANFU_UPDATE",this,this.showUI),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.setHuobi),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.setHuobi),this._tab.selectedIndex=5,10===this._mallType&&this.regAutoRP(this.rp7,["auctionStoreRP"])},p.prototype.onOpened=function(){a.prototype.onOpened.call(this);for(var t=0;t<this._btnArr.length;t++){var e=this._btnArr[t];e&&(e.visible=!1)}for(var i=0;i<this.typeNums.length;i++){var n=this.typeNums[i],s=l.instance.getTypeStoreCfgByChildType(this._mallType,n);0<s.length?(this._btnArr[i].visible=!0,this._btnArr[i].label=s[0][6]):this._btnArr[i].visible=!1}10==this._mallType&&(this._btnArr[5].visible=!0,this._btnArr[5].label="仙府商店",r.instance.getFuncNeedShow(777)&&(this._btnArr[6].visible=!0,this._btnArr[6].label="拍卖商店")),o.StoreModel.instance.updateVlaue&&(this.moneyText.text=""+o.StoreModel.instance.updateVlaue[1]),this.setHuobi(),o.StoreCtrl.instance.GetYuGeInfo()},p.prototype.sortDate=function(t,e){return t[1]-e[1]},p.prototype.showUI=function(){var t=o.StoreModel.instance.idList;t.sort(this.sortDate),this._list.datas=t,Laya.timer.clear(this,this.activityHandler),this.setActivitiTime(),this.setHuobi()},p.prototype.setHuobi=function(){var t=h.bigNumToString(n.xianfu.XianfuModel.instance.treasureInfos(1)),e=h.bigNumToString(n.player.PlayerModel.instance.ingot);this.fuguiTxt.text="富贵值:"+t,this.currencyTxt.text="元宝:"+e;var i=new Array;i.push([this.fuguiImg,2,0]),i.push([this.fuguiTxt,1,0]),i.push([this.currencyImg,2,0]),i.push([this.currencyTxt,1,0]),h.adaptationImgAndText(i,this.width,65,"right")},p.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=r.instance.getFuncIsOpen(233);o.StoreModel.instance.f5Time>=i.serverTime&&t?(this.timeUpdateText.visible=!0,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.timeUpdateText.visible=!1},p.prototype.activityHandler=function(){this.timeUpdateText.text=h.timeStampToHHMMSS(o.StoreModel.instance.f5Time)+"后自动刷新",o.StoreModel.instance.f5Time<i.serverTime&&(this.timeUpdateText.visible=!1,Laya.timer.clear(this,this.activityHandler))},p.prototype.updateBtnHandler=function(){var t=o.StoreModel.instance.updateVlaue[1];n.player.PlayerModel.instance.ingot>=t?o.StoreCtrl.instance.F5YuGe():h.goldNotEnoughAlert()},p.prototype.close=function(){Laya.timer.clear(this,this.activityHandler),a.prototype.close.call(this)},p.prototype.destroy=function(t){if(void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),this._tab&&(this._tab.destroy(),this._tab=null),this._btnArr){for(var e=0,i=this._btnArr;e<i.length;e++){var n=i[e];n.destroy(),n.removeSelf()}this._btnArr=null}a.prototype.destroy.call(this,t)},c=p,o.StoreXianFuPanel=c}(modules=modules||{}),function(t){var a,r,e,i;function n(){return null!==r&&r.apply(this,arguments)||this}a=t.zxian_yu||(t.zxian_yu={}),e=t.common.CustomList,r=ui.ZXianYuAllRewardAlertUI,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),this._list=e.create("v",100,122,540,274,a.ZXianYuAllRewardItem,10,5),this.addChild(this._list),this._list.x=60,this._list.y=100,this._list.spaceX=10,this._list1=e.create("v",100,122,540,274,a.ZXianYuAllRewardItem,10,5),this._list1.spaceX=10,this.addChild(this._list1),this._list1.x=59,this._list1.y=463},n.prototype.destroy=function(){this.destroyElement(this._list),this.destroyElement(this._list1),r.prototype.destroy.call(this)},n.prototype.setOpenParam=function(t){r.prototype.setOpenParam.call(this,t),a.ZXianYuModel.instance.getZhanShi();for(var e=new Array,i=0;i<a.ZXianYuModel.instance._awardAee.length;i++){var n=[(o=a.ZXianYuModel.instance._awardAee[i])[0],o[1],0,null];e.push(n)}this._list.datas=e;var s=new Array;for(i=0;i<a.ZXianYuModel.instance._awardAee1.length;i++){var o;n=[(o=a.ZXianYuModel.instance._awardAee1[i])[0],o[1],0,null],s.push(n)}this._list1.datas=s},i=n,a.ZXianYuAllRewardAlert=i}(modules=modules||{}),function(s){var t,e,i,o,n,a;function r(){return e.call(this)||this}t=s.vip||(s.vip={}),i=ui.VIPAndSVIPUpViewUI,o=laya.maths.Point,n=utils.tween.TweenGroup,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.layer=7,this._tweenGroup=new n},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),GlobalData.dispatcher.on("RESIZE_UI",this,this.resizeHandler),this.onAutoClick(this.maskImg,this,function(){})},r.prototype.offEvt=function(){e.prototype.offEvt.call(this),GlobalData.dispatcher.off("RESIZE_UI",this,this.resizeHandler),Laya.timer.clear(this,this.itemEffect)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.alpha=1,this.resizeHandler(),this.vipBox.pos(360,640),this.vipBox.scale(1,1),this.tipText.visible=this.maskImg.visible=!0,this.updateLv(),Laya.timer.once(800,this,this.itemEffect)},r.prototype.updateLv=function(){if(1<=s.vip.VipModel.instance.vipLevel)this.vipBtn.skin="left_top/btn_zjm_svip.png",this.vipNum.value=""+s.vip.VipModel.instance.vipLevel;else{this.vipBtn.skin="left_top/btn_zjm_vip.png";var t=s.vip_new.VipNewModel.instance.getVipLevelTrue();this.vipNum.value=""+t}},r.prototype.resizeHandler=function(){this.maskImg.width=CommonConfig.viewWidth,this.maskImg.height=CommonConfig.viewHeight,this.maskImg.alpha=.8;var t=(CommonConfig.viewWidth-720)/2,e=(CommonConfig.viewHeight-1280)/2;this.maskImg.x=-t,this.maskImg.y=-e},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._tweenGroup=this.destroyElement(this._tweenGroup),e.prototype.destroy.call(this,t)},r.prototype.close=function(){this._tweenGroup.removeAll(),e.prototype.close.call(this)},r.prototype.itemEffect=function(){var t=this;this.maskImg.visible=!1;var e=s.action_preview.ActionPreviewModel.instance.getPosSprite(47);if(e){o.TEMP.setTo(e.x,e.y),this.globalToLocal(o.TEMP);var i=o.TEMP.x,n=o.TEMP.y;TweenJS.create(this.vipBox,this._tweenGroup).to({scaleX:1.5,scaleY:1.5},400).onComplete(function(){TweenJS.create(t.vipBox,t._tweenGroup).to({scaleX:1.1,scaleY:1.1},400).onComplete(function(){TweenJS.create(t.vipBox,t._tweenGroup).to({x:i,y:n,scaleX:.2,scaleY:.2},600).onComplete(function(){GlobalData.dispatcher.event("ACTION_PREVIEW_ENTER"),t.close()}).start()}).start()}).start()}else this.close()},a=r,t.VIPAndSVIPUpView=a}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.commonAlert||(t.commonAlert={}),i=ui.CommonTxtCatAlertUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler),this.onAutoClick(this.cancelBtn,this,this.cancelHandler)},s.prototype.okHandler=function(){WindowManager.instance.open(381),this.close()},s.prototype.cancelHandler=function(){WindowManager.instance.open(111),this.close()},n=s,e.CommonTxtCatAlert=n}(modules=modules||{}),function(i){var n,s,t,o,e,a,r,l,h,c;function p(){return null!==s&&s.apply(this,arguments)||this}n=i.rename||(i.rename={}),t=ui.RenameAlertUI,o=i.bag.BagModel,e=i.config.BlendCfg,a=i.notice.SystemNoticeManager,r=i.bag.BagUtil,l=i.rehead.ReheadCtrl,h=i.common.FuncBtnGroup,s=t,__extends(p,s),p.prototype.initialize=function(){s.prototype.initialize.call(this),this._itemId=e.instance.getCfgById(52001)[1][0],this.itemIcon.skin=CommonUtil.getIconById(this._itemId),this._btnGroup=new h,this._btnGroup.setFuncIds(242,260,353,261,462,623,783),this._btnGroup.setBtns(this.btnGroup_1,this.btnGroup_2,this.btnGroup_4,this.btnGroup_3,this.btnGroup_5,this.btnGroup_6,this.btnGroup_7),this.btnGroup_6.visible=i.rehead.ReheadModel.instance.showExitBtn()},p.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.maleBtn,this,this.selectOccHandler,[1]),this.onAutoClick(this.femaleBtn,this,this.selectOccHandler,[2]),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.onAutoGlobalEvt("RENAME_INFO_UPDATE",this,this.updateInfo),this.regAutoRP(this.rpImg2,["reHeadRP"]),this.regAutoRP(this.rpImg4,["reHead1RP"]),this.regAutoRP(this.rpImg3,["reChatFrameRP"])},p.prototype.onOpened=function(){s.prototype.onOpened.call(this),l.instance.closeOthers(this.dialogId),this._btnGroup.selectedIndex=0,this._occ=-1,this.selectOccHandler(PlayerModel.instance.occ),this.updateBag(),this.updateInfo()},p.prototype.close=function(t,e){s.prototype.close.call(this,t,e),Laya.timer.clear(this,this.loopHandler),this.nameTxt.text=""},p.prototype.selectOccHandler=function(t){this._occ!==t&&(this._occ=t,this.maleBtn.selected=1===t,this.femaleBtn.selected=2===t)},p.prototype.updateBag=function(){var t=o.instance.getItemCountById(this._itemId);this.itemNumTxt.text=t+"/1",this.itemNumTxt.color=1<=t?"#3d5981":"#ff3e3e"},p.prototype.updateInfo=function(){n.RenameModel.instance.renameInfo&&(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler())},p.prototype.loopHandler=function(){var t=n.RenameModel.instance.renameInfo,e=t[0];if(0===t[1]||e<GlobalData.serverTime)return this.cdTxt.visible=!1,this.okBtn.visible=!0,void Laya.timer.clear(this,this.loopHandler);this.cdTxt.visible=!0,this.okBtn.visible=!1,this.cdTxt.text="冷却中："+CommonUtil.timeStampToMMSS(e)},p.prototype.okHandler=function(){var t=this;if(o.instance.getItemCountById(this._itemId)<1)r.openLackPropAlert(this._itemId,1);else{var e=this.nameTxt.text;e?StringUtils.containSpace(e)?a.instance.addNotice("名字不能包含空格",!0):e.length<1||6<e.length?a.instance.addNotice("名字长度为1~6个字",!0):i.chat.ChatModel.instance.isValidContent(e)?CommonUtil.checkWords(e,function(){n.RenameCtrl.instance.setNameSex(e,t._occ)}):a.instance.addNotice("包含非法字符",!0):a.instance.addNotice("名字不能为空",!0)}},p.prototype.changeHandler=function(){0!=this._btnGroup.selectedIndex&&l.instance.openAlert(this.dialogId,this._btnGroup.selectedIndex)},p.prototype.helpHandler=function(){CommonUtil.alertHelp(20064)},c=p,n.RenameAlert=c}(modules=modules||{}),function(i){var t,c,p,u,d,e,m,f,n,s;function o(){var t=null!==c&&c.apply(this,arguments)||this;return t._isFristShow=!0,t._showNum=1,t._showColor=[6,7,8,9,10],t._restTm=0,t._bossOcc=0,t}t=i.main||(i.main={}),p=game.GameCenter,u=game.misc.LogUtils,d=i.config.MonsterResCfg,e=ui.BelongViewUI,m=i.scene.SceneModel,f=i.bossDungeon.BossDungeonModel,n=i.notice.SystemNoticeManager,c=e,__extends(o,c),o.prototype.initialize=function(){c.prototype.initialize.call(this),this._colorArr=new Array,this.layer=1,this.closeByOthers=!1,this.top=150,this.centerX=0,this.zOrder=-1,this._colorIndex=0,this._colorLength=0,this._playerTotalLen=242,this._bossTotalLen=378,this._playerProFactTween=TweenJS.create(this.playerProFact).to({width:0},100),this._playerProInterTween=TweenJS.create(this.playerProInter).to({width:0},300).onComplete(this.checkHP.bind(this)),this._bossProgressUpTween=TweenJS.create(this.bossProgressUp),this._bossProgressInterTween=TweenJS.create(this.bossProgressInter).onComplete(this.checkHP.bind(this)),this._bossProgressShowEffectTween=TweenJS.create(this.bossProgressUp)},o.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoGlobalEvt("BOSS_OWN_UPDATE",this,this.updateBelong),this.onAutoGlobalEvt("PLAYER_TARGET_CHANGE",this,this.updateBelong),this.onAutoGlobalEvt("BOSS_ATTACK_UPDATE",this,this.updateBelong),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateBossState),this.onAutoClick(this.btn,this,this.btnHandler)},o.prototype.resetBossTarget=function(t){null!=this._bossTarget&&this._bossTarget.off("hp",this,this.updateBoss).off("destroyed",this,this.close),this._bossTarget=t,null!=this._bossTarget&&this._bossTarget.on("hp",this,this.updateBoss).on("destroyed",this,this.close)},o.prototype.resetPlayerTarget=function(t){null!=this._playerTarget&&this._playerTarget.off("hp",this,this.updatePlayer),this._playerTarget=t,null!=this._playerTarget&&this._playerTarget.on("hp",this,this.updatePlayer)},o.prototype.closeRestTm=function(){Laya.timer.clear(this,this.activityHandler),this.bossBuffTextBox.visible=this.bossBuffText.visible=!1,this.bossNameTxt.visible=!0,this._restTm=0},o.prototype.onOpened=function(){c.prototype.onOpened.call(this),this.closeRestTm(),u.info(1,"___________________________打开界面");var t,e=m.instance.monsters;this._bossOcc=f.instance.selectLastBoss;for(var i=0,n=e;i<n.length;i++){var s=n[i];if(s[1]===this._bossOcc){t=s[0];break}}var o=p.instance.getRole(t);if(null==o||o.property.get("hp")[0]<=0||1024===o.property.get("status"))this.close();else{this.resetBossTarget(o.property),this.visible=!0,this._isFristShow=!0,this.updateBelong();var a=d.instance.getCfgById(this._bossOcc);this._showNum=d.instance.getMonsterHpNum(this._bossOcc);for(var r=0,l=0;l<this._showNum;l++){var h=this._showNum-1;l==h?this._colorArr[0]=this._showColor[4]:(this._colorArr[h-l]=this._showColor[r%4],r++)}a[3]?this.bossHeadImg.skin="assets/icon/monster/"+a[3]+".png":this.bossHeadImg.skin="assets/icon/monster/310001.png",this.bossNameTxt.text=d.instance.getMonsterName(this._bossOcc)+"    Lv."+this._bossTarget.get("level"),this.deptImg.skin=d.instance.getMonsterDeptType(this._bossOcc)?"assets/icon/ui/yuan_shen/icon_ysjt_"+d.instance.getMonsterDeptType(this._bossOcc)+".png":"",this.updateBoss(),this.updatePlayer(),this.updateBossState()}},o.prototype.updateBoss=function(){if(!this._bossProgressInterTween.isPlaying&&!this._bossProgressUpTween.isPlaying){var t=this._bossTarget.get("hp");this._bossNowHP=t[0];var e=t[1];this._bossNowHP==e&&(this.bossProgressUp.width=this.bossProgressInter.width=this._bossTotalLen,this._isFristShow=!0);var i,n=this._bossNowHP/e,s=(100*n).toFixed(2);if(this.bossPercentTxt.text=s+"%",0==n&&console.log("BOSS血量为0:"+t),1==n)i=this._showNum-1,this._colorLength=this._bossTotalLen;else{var o=n*this._showNum;i=Math.floor(o),this._colorLength=(o-i)*this._bossTotalLen}if(this._isFristShow)this._isFristShow=!1,this._colorIndex=i,this.bossProgressInter.width=this.bossProgressUp.width=this._colorLength,this.setColor(i);else{var a=this._colorIndex-i;a<0&&console.log("times 伤害异常"),this._colorIndex=i;var r=100;0<a?(r=Math.floor(100/a),this.bossProgressInter.visible=!1,this.showEffect(a,r)):this.endEffect(!1,r)}}},o.prototype.updatePlayer=function(){if(this._playerTarget){var t=this._playerTarget.get("hp"),e=t[0],i=t[1],n=Math.floor(e/i*this._playerTotalLen);this._isFristShow&&(this._isFristShow=!1,this.playerProInter.width=this.playerProFact.width=this._playerTotalLen),this._playerProFactTween.stop(),this._playerProInterTween.stop(),this._playerProFactTween.property.width=n,this._playerProInterTween.property.width=n,this._playerProFactTween.start(),this._playerProInterTween.start()}},o.prototype.updateBelong=function(){var t=this._bossTarget.get("occ");if(t){var e,i=f.instance.getOwnByBossId(t);if(i&&(e=i[1]),e){var n=p.instance.getRole(e);if(this.resetPlayerTarget(n?n.property:null),this._playerTarget){this.playerBox.visible=!0;var s=PlayerModel.instance.actorId,o=p.instance.getRole(s),a=this._playerTarget.get("id");a===s?(this.btn.visible=!1,this.setTxtShow("当前归属自己","#50ff28")):n.property.get("teamId")&&o.property.get("teamId")&&n.property.get("teamId")===o.property.get("teamId")?(this.btn.visible=!1,this.setTxtShow("当前归属队友","#50ff28")):f.instance.playerIsMeAttackGuiShu(a)?(this.btn.visible=!1,this.setTxtShow("正在抢夺归属","#ff3e3e")):(this.btn.visible=!0,this.tipTxt.visible=!1),this.nameTxt.text=this._playerTarget.get("name");var r=this._playerTarget.get("occ"),l=this._playerTarget.get("headIcon"),h=this._playerTarget.get("headPhotoframe");this.playerHead.visible=!0,this.playerHead.setInfo(l,r,h)}else this.playerBox.visible=!1}else this.playerBox.visible=!1}},o.prototype.setTxtShow=function(t,e){this.tipTxt.visible=!0,this.tipTxt.text=t,this.tipTxt.color=e},o.prototype.showEffect=function(t,e){var i=this,n=t-1;this.interColor(this._colorIndex+t),this._bossProgressShowEffectTween.stop(),this._bossProgressShowEffectTween.to({width:0},e).onComplete(function(){i.bossProgressUp.width=i._bossTotalLen,0<n?i.showEffect(n,e):i.endEffect(!0,e)}).start()},o.prototype.endEffect=function(t,e){t&&(this.bossProgressInter.width=this._bossTotalLen),this.setColor(this._colorIndex),this.bossProgressInter.visible=!0,this._bossProgressUpTween.stop(),this._bossProgressInterTween.stop();var i=this._colorLength>this._bossTotalLen?this._bossTotalLen:this._colorLength;this._bossProgressUpTween.to({width:i},e).start(),this._bossProgressInterTween.to({width:i},3*e).start()},o.prototype.interColor=function(t){null!=this._colorArr[t]&&(this.bossProgressUp.skin="health_point/dt_guaiwu_"+this._colorArr[t]+".png"),null!=this._colorArr[t-1]&&(this.bossProgressUnder.skin="health_point/dt_guaiwu_"+this._colorArr[t-1]+".png"),this.bossBloodNum.text="×"+(t+1).toString()},o.prototype.setColor=function(t){this.bossProgressUp.skin="health_point/dt_guaiwu_"+this._colorArr[t]+".png",0!=t?(this.bossProgressUnder.visible=!0,this.bossProgressUnder.skin="health_point/dt_guaiwu_"+this._colorArr[t-1]+".png"):this.bossProgressUnder.visible=!1,this.bossBloodNum.text="×"+(t+1).toString()},o.prototype.checkHP=function(){(this._bossNowHP<=0||this._bossTarget&&1024===this._bossTarget.get("status"))&&this.close()},o.prototype.btnHandler=function(){if(this._playerTarget){var t=this._playerTarget.get("id");if(!t)throw new Error("归属者没有id");var e=m.instance.enterScene[0];if(4501!==e&&4502!==e&&4503!==e&&i.faction.FactionModel.instance.isTongXianMeng(t))i.notice.SystemNoticeManager.instance.addNotice("不可攻击同一仙盟玩家",!0);else if(2121===e)BossHomeModel.instance.setSelectTarget(t,!1);else if(2351===e)i.sheng_yu.ShengYuBossModel.instance.setSelectTarget(t,!1);else if(2402===e||2403===e)i.halo.HaloModel.instance.isForceEnter=!1,i.beast_boss.BeastBossModel.instance.setSelectTarget(t,2);else if(2391===e||3501===e||3701===e)if(CommonGroupUtil.thePlayerIsMyTeam(t))n.instance.addNotice("不可攻击队友",!0);else{if(i.faction.FactionModel.instance.isTongXianMeng(t))return void i.notice.SystemNoticeManager.instance.addNotice("不可攻击同一仙盟玩家",!0);PlayerModel.instance.selectTarget(2,t)}else if(4501===e||4502===e||4503===e){if(i.faction.FactionModel.instance.isTongXianMeng(t))return void n.instance.addNotice("该玩家与您同一仙盟，不可攻击",!0);if(i.warband.WarbandModel.instance.isMyWarBandPeople(t))return void n.instance.addNotice("该玩家与您同一战队，不可攻击",!0);if(t===i.marry.MarryModel.instance.halfRoleID)return void n.instance.addNotice("该玩家为您的仙侣，不可攻击",!0);PlayerModel.instance.selectTarget(2,t)}}else i.notice.SystemNoticeManager.instance.addNotice("找不到归属者",!0)},o.prototype.updateBossState=function(){if(0!=this._bossOcc){var t=DungeonModel.instance.getBossInfoById(this._bossOcc);if(t){var e=t[2];if(e)return this._restTm!=e[4]&&(this._restTm=e[4]),void this.setActivitiTime()}}this.bossBuffTextBox.visible=this.bossBuffText.visible=!1,this.bossNameTxt.visible=!0},o.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),0!=this._restTm&&this._restTm>=GlobalData.serverTime?(this.bossBuffTextBox.visible=this.bossBuffText.visible=!0,this.bossNameTxt.visible=!1,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.bossBuffTextBox.visible=this.bossBuffText.visible=!1,this.bossNameTxt.visible=!0,this._restTm=0)},o.prototype.activityHandler=function(){this.bossBuffText.text="无敌:BOSS开始无敌，持续"+CommonUtil.timeStampToSS(this._restTm)+"秒",this._restTm<GlobalData.serverTime&&(this.bossBuffTextBox.visible=this.bossBuffText.visible=!1,this.bossNameTxt.visible=!0,this._restTm=0,Laya.timer.clear(this,this.activityHandler))},o.prototype.close=function(){this.resetBossTarget(null),this.resetPlayerTarget(null),this._playerProFactTween&&this._playerProFactTween.stop(),this._playerProInterTween&&this._playerProInterTween.stop(),this._bossProgressUpTween&&this._bossProgressUpTween.stop(),this._bossProgressInterTween&&this._bossProgressInterTween.stop(),this._bossProgressShowEffectTween&&this._bossProgressShowEffectTween.stop(),this.closeRestTm(),c.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},o.prototype.destroy=function(){this._playerProFactTween&&(this._playerProFactTween=null),this._playerProInterTween&&(this._playerProInterTween=null),this._bossProgressUpTween&&(this._bossProgressUpTween=null),this._bossProgressInterTween&&(this._bossProgressInterTween=null),this._bossProgressShowEffectTween&&(this._bossProgressShowEffectTween=null),c.prototype.destroy.call(this)},s=o,t.BelongPanel=s}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c;function p(){return null!==i&&i.apply(this,arguments)||this}e=t.bossHome||(t.bossHome={}),n=ui.BossHomeAwardAlertUI,s=t.common.CustomList,o=t.config.SceneHomeBossCfg,a=t.bag.BagModel,r=t.scene.SceneModel,l=t.common.CustomClip,h=t.bag.BaseItem,i=n,__extends(p,i),p.prototype.initialize=function(){i.prototype.initialize.call(this),this._showList=s.create("h",64,139,532,100,h,8),this.addChild(this._showList),this._itemList=s.create("v",64,315,532,270,h,8,5),this.addChild(this._itemList),this.noGoodsTxt.visible=!1,this._eff=CommonUtil.creatEff(this.btn,"btn_light",15),this._eff.pos(-5,-10)},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_UPDATE",this,this.update),this.onAutoClick(this.btn,this,this.btnHandler)},p.prototype.onOpened=function(){i.prototype.onOpened.call(this);var t=r.instance.enterScene[3];this.txt.text="("+t+"层)",this.showAwards(t),this.update()},p.prototype.showAwards=function(t){var e=o.instance.getCfgByFirstLayer(t);if(!e)throw new Error("boss之家取不到配置getCfgByFirstLayer layer---\x3e"+t);var i=e[12];if(i){var n=CommonUtil.formatItemData(i);this._showList.datas=n}},p.prototype.update=function(){var t=a.instance.getItemsByBagId(7);if(t){for(var e=new Array,i=0;i<t.length;i++){var n=t[i];n&&e.push([n[0],n[1],0,null])}this._itemList.datas=e,this.noGoodsTxt.visible=!(e&&0<e.length),0===t.length?(this.btn.disabled=!0,l.thisStop(this._eff)):(this.btn.disabled=!1,l.thisPlay(this._eff))}},p.prototype.btnHandler=function(){t.sheng_yu.ShenYuBossCtrl.instance.PickTempReward(),this.close()},p.prototype.destroy=function(){this._itemList=this.destroyElement(this._itemList),this._showList=this.destroyElement(this._showList),this._eff=this.destroyElement(this._eff),i.prototype.destroy.call(this)},c=p,e.BossHomeAwardAlert=c}(modules=modules||{}),function(t){var e,o,i;function n(){this.init()}e=t.config||(t.config={}),o=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._cengDictionary=new o;for(var t=GlobalData.getConfig("scene_temple_boss"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e];if(n){var s=n[1];this._cengDictionary.set(s,s),this._tab[s]||(this._tab[s]=[]),this._tab[s].push(n)}}},n.prototype.getCfgsByGrade=function(t,e){return this._tab[t][e]},n.prototype.getInfoByGrade=function(t){return this._tab[t]},n.prototype.getBossInfoByGrade=function(t){var e=this._tab[t],i=new Array;if(e)for(var n=0;n<e.length;n++){var s=e[n];if(s){var o=s[3].toString();o&&"2"==o[2]&&i.push(s)}}return i},n.prototype.getXiaoGuaiInfoByGrade=function(t){var e=this._tab[t],i=new Array;if(e)for(var n=0;n<e.length;n++){var s=e[n];if(s){var o=s[3].toString().substring(1,2);o&&"1"==o[2]&&i.push(s)}}return i},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCengDictionaryKeys=function(){return this._cengDictionary.keys},i=n,e.ClasSsceneTempleBossCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.commonAlert||(t.commonAlert={}),n=t.common.CustomList,i=ui.CommonHuoDeRewardAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.width=532,this._list.height=283,this._list.hCount=5,this._list.spaceX=8,this._list.itemRender=e.CommonHuoDeRewardItem,this._list.x=0,this._list.y=0,this.jinRShouYiBox.addChild(this._list)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t&&(this._list.datas=t)},o.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this)},s=o,e.CommonHuoDeRewardAlert=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.store||(t.store={}),i=e.StoreBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=10,this.currencyImg.skin="assets/icon/item/34_s.png"},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=2,this.onAutoGlobalEvt("PLAYER_CONTRIBUTION",this,this.updateMoney)},s.prototype.updateMoney=function(){this.currencyTxt.text="贡献值:"+CommonUtil.bigNumToString(PlayerModel.instance.contribution)},n=s,e.FactionStorePanel=n}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.commonAlert||(t.commonAlert={}),n=ui.CommonItemsAlert2UI,s=t.common.CustomList,o=t.bag.BaseItem,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create("v",71,128,520,258,o,5,5),this.addChild(this._list)},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._items=t},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},r.prototype.update=function(){this._items&&(this._list.datas=this._items)},r.prototype.close=function(){i.prototype.close.call(this),this._items=null},a=r,e.CommonItemsAlert2=a}(modules=modules||{}),function(t){var e,i,n,r,s;function o(){var t=i.call(this)||this;return t._modelClip=n.create(1024,1024,1024),t.addChild(t._modelClip),t._modelClip.anchorX=t._modelClip.anchorY=.5,t._modelClip.pos(250,400,!0),t}e=t.commonAlert||(t.commonAlert={}),n=t.common.AvatarClip,r=t.config.ExteriorCfg,i=ui.PropRoleAlertUI,__extends(o,i),o.prototype.setOpenParam=function(t){t&&6==t.length&&this.createModel(t[0],t[1],t[2],t[3],t[4],t[5])},o.prototype.createModel=function(t,e,i,n,s,o){var a=r.instance.getCfgById(t);this._modelClip.reset(t,e,i,n,s,o),this._modelClip.avatarRotationX=a[6],this._modelClip.avatarRotationY=a[7]+35,this._modelClip.avatarScale=2,this._modelClip.avatarY=-160,this._modelClip.avatarX=4,this.observationItem.data=[[this._modelClip,0]]},o.prototype.destroy=function(){this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),i.prototype.destroy.call(this)},s=o,e.PropRoleAlert=s}(modules=modules||{}),function(t){var e,o,i,n,s;function a(){return null!==o&&o.apply(this,arguments)||this}e=t.commonAlert||(t.commonAlert={}),i=t.common.CustomSlide,n=ui.XianfuSmeltDetailsAlertUI,o=n,__extends(a,o),a.prototype.createChildren=function(){View.regComponent("Text",laya.display.Text),View.regComponent("HTMLDivElement",laya.html.dom.HTMLDivElement),this.createView({type:"BaseDialog",props:{width:662,height:404},child:[{type:"Image",props:{y:0,x:0,width:661,var:"bgImg",skin:"common/panel_common_bg7.png",height:404,sizeGrid:"120,0,240,0"}},{type:"Image",props:{y:46,x:137,skin:"common_sg/txtbg_common_titlebg.png",sizeGrid:"0,70,0,70",width:395}},{type:"Image",props:{y:110,x:57,width:551,var:"borderImg",skin:"common_sg/9g_tongyong_1.png",height:245,sizeGrid:"28,22,26,24"}},{type:"Button",props:{y:14,x:598,var:"closeBtn",stateNum:1,skin:"common/btn_tongyong_13.png"}},{type:"Text",props:{y:54,x:197,width:276,var:"titleText",text:"炼制详情",height:28,fontSize:28,font:"SimHei",color:"#ffffff",align:"center"}},{type:"Text",props:{y:454,x:236,visible:!0,var:"hintTxt",text:"点击空白处退出",strokeColor:"#797daf",stroke:3,fontSize:28,font:"SimHei",color:"#ffffff"}},{type:"Panel",props:{y:127,x:76,width:512,var:"con",height:209},child:[{type:"HTMLDivElement",props:{y:0,x:0,width:512,var:"txt",height:209}}]}]})},a.prototype.initialize=function(){o.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.txt,"#4C5E8A","SimHei",24),this.txt.style.lineHeight=28,this._defaultTxtH=210,this._defaultThisH=405,this._offset=this._defaultThisH-this._defaultTxtH,this._slide=new i(this.con,this.txt)},a.prototype.offEvt=function(){this._slide.removeListeners(),o.prototype.offEvt.call(this)},a.prototype.destroy=function(){this._slide=this.destroyElement(this._slide),o.prototype.destroy.call(this)},a.prototype.setOpenParam=function(t){o.prototype.setOpenParam.call(this,t),this.txt.y=0,this.titleText.text=t[0],this.txt.innerHTML=t[1];var e=this.txt.contextHeight,i=t[2];if(null!=i){var n=e+this._offset>i?i:e+this._offset<this._defaultThisH?this._defaultThisH:e+this._offset;this.fit(n)}else this.fit();var s=t[3];this._slide.initState(e,s)},a.prototype.fit=function(t){void 0===t&&(t=this._defaultThisH),this.bgImg.height=this.height=t,this.hintTxt.y=t+50,this.borderImg.height=t-160,this.con.height=this.txt.style.height=this.borderImg.height-35},s=a,e.CommonSlideTxtAlert=s}(modules=modules||{}),function(m){var f,t,e,i,n,s,g,y,_,o;function a(){return null!==t&&t.apply(this,arguments)||this}f=m.rehead||(m.rehead={}),e=ui.ReheadAlertUI,i=m.common.SimpleList,n=m.common.FuncBtnGroup,s=m.notice.SystemNoticeManager,g=m.config.HeadiconCfg,y=m.config.HeadPhotoframeCfg,_=m.config.ChatPhotoframeCfg,t=e,__extends(a,t),a.prototype.initialize=function(){t.prototype.initialize.call(this),this.typeNum=1,this._attrNameTxts=[this.nameText1,this.nameText2],this._attrTxts=[this.valueText1,this.valueText2],this._upAttrTxts=[this.upText1,this.upText2],this._arrowImgs=[this.upImg1,this.upImg2],this._attrNameTxts1=[this.nameText4],this._attrTxts1=[this.valueText4],this._upAttrTxts1=[this.upText4],this._arrowImgs1=[this.upImg4],this._list=i.create(f.ReheadItem,100,100,1,5,10,5),this._list.size(540,272),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._listFrame=i.create(f.HeadFrameItem,535,118,1,1,0,5),this._listFrame.size(535,272),this.listFrameBox.addChild(this._listFrame),this._listFrame.pos(0,0,!0),CommonUtil.setHTMLPro(this.headTxt,"#FFFFFF","SimHei",24,"center"),this._btnGroup=new n,this._btnGroup.setFuncIds(242,260,353,261,462,623,783),this._btnGroup.setBtns(this.btnGroup_1,this.btnGroup_2,this.btnGroup_4,this.btnGroup_3,this.btnGroup_5,this.btnGroup_6,this.btnGroup_7),this.btnGroup_6.visible=f.ReheadModel.instance.showExitBtn()},a.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoEvt(this._list,"select",this,this.changeHead),this.onAutoEvt(this._listFrame,"select",this,this.changeHead),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.upBtn,this,this.upBtnHandler),this.onAutoGlobalEvt("REHEAD_UPDATE",this,this.setIndex),this.regAutoRP(this.rpImg2,["reHeadRP"]),this.regAutoRP(this.rpImg4,["reHead1RP"]),this.regAutoRP(this.rpImg3,["reChatFrameRP"])},a.prototype.upBtnHandler=function(){f.ReheadCtrl.instance.addHeadIconLevel(this.typeNum,this.getListDate())},a.prototype.onOpened=function(){t.prototype.onOpened.call(this),f.ReheadCtrl.instance.closeOthers(this.dialogId),this._btnGroup.selectedIndex=this.getInx(),this.formatTxt(this.headTxt,this.getId()),this.setImg(),this.update()},a.prototype.setImg=function(){switch(this.typeNum){case 1:this.headImg.skin=CommonUtil.headSkin(),this.frameImg.skin=CommonUtil.headFrameSkin(),this.titleText.text="头像";break;case 2:this.headImg.skin=CommonUtil.headSkin(),this.frameImg.skin=CommonUtil.headFrameSkin(),this.titleText.text="头像框";break;case 3:this.headImg.skin=CommonUtil.headSkin(),this.titleText.text="聊天框"}},a.prototype.getInx=function(){switch(this.typeNum){case 1:return 1;case 2:return 2;case 3:return 3}},a.prototype.getId=function(){switch(this.typeNum){case 1:return f.ReheadModel.instance.head;case 2:return f.ReheadModel.instance.headFrame;case 3:return f.ReheadModel.instance.chatFrame}},a.prototype.init=function(){var t=[];switch(this.typeNum){case 1:t=g.instance.ids;break;case 2:t=y.instance.ids;break;case 3:t=_.instance.ids}t=t.sort(this.sortFunc.bind(this));for(var e=new Array,i=0;i<t.length;i++){var n=t[i];e.push([n,this.typeNum])}this.listBox.visible=3!=this.typeNum,this.listFrameBox.visible=3===this.typeNum,3===this.typeNum?(this._listFrame.datas=e,this.listBox.mouseEnabled=!1,this.listBox.mouseThrough=!0,this.listFrameBox.mouseEnabled=!0,this.listFrameBox.mouseThrough=!1):(this._list.datas=e,this.listFrameBox.mouseEnabled=!1,this.listFrameBox.mouseThrough=!0,this.listBox.mouseEnabled=!0,this.listBox.mouseThrough=!1),this.setIndex()},a.prototype.setIndex=function(){3===this.typeNum?(this._listFrame.selectedIndex=this.getBow(),this._listFrame.scrollToIndex(this._listFrame.selectedIndex)):(this._list.selectedIndex=this.getBow(),this._list.scrollToIndex(this._list.selectedIndex))},a.prototype.getBow=function(){for(var t=0,e=3===this.typeNum?this._listFrame:this._list,i=0;i<e.datas.length;i++){var n=e.datas[i];if(n){if(f.ReheadModel.instance.getRp(this.typeNum,n[0]))return i;n[0]===this.getId()&&(t=i)}}return t},a.prototype.sortFunc=function(t,e){var i=f.ReheadModel.instance.getStateByTypeId(this.typeNum,t),n=f.ReheadModel.instance.getStateByTypeId(this.typeNum,e);return i===n?CommonUtil.smallToBigSort(t,e):CommonUtil.BigTosmallSort(1===i?999999:i,1===n?999999:n)},a.prototype.update=function(){this.init(),this.changeHead()},a.prototype.getListDate=function(){var t=3===this.typeNum?this._listFrame:this._list;return t.selectedData?t.selectedData[0]:null},a.prototype.changeHead=function(){var t=this.getListDate();if(null!=t){switch(this.typeNum){case 1:this.headImg.skin=CommonUtil.headSkin(t),this.titleText.text="头像";break;case 2:this.frameImg.skin=CommonUtil.headFrameSkin(),this.titleText.text="头像框";break;case 3:this.headImg.skin=0!==t?f.ReheadModel.instance.chatFrameSkin(t):"",this.titleText.text="聊天框"}this.formatTxt(this.headTxt,t),this.judgeState(),this.setArrt()}},a.prototype.judgeState=function(){this.btn.gray=!f.ReheadModel.instance.getStateByTypeId(this.typeNum,this.getListDate())},a.prototype.formatTxt=function(t,e){var i,n,s,o=f.ReheadModel.instance.getStateByTypeId(this.typeNum,e);switch(this.typeNum){case 1:i=g.instance.getCfgById(e);break;case 2:i=y.instance.getCfgById(e);break;case 3:i=_.instance.getCfgById(e)}if(i){switch(this.typeNum){case 1:n=(i=i)[1],s=i[2],this.headImg.skin=-1!==e?CommonUtil.headSkin(e,PlayerModel.instance.occ):"";break;case 2:n=(i=i)[1],s=i[2],this.frameImg.skin=-1!==e?CommonUtil.headFrameSkin(e):"";break;case 3:n=(i=i)[1],s=i[3],this.headImg.skin=0!==e?f.ReheadModel.instance.chatFrameSkin(e):""}var a="["+CommonUtil.formatHtmlStrByColor("#ffce7c",n)+"]"+(1===o?CommonUtil.formatHtmlStrByColor("#168a17","(已激活)"):CommonUtil.formatHtmlStrByColor("#ff3e3e","("+s+")"));t.innerHTML=a}},a.prototype.btnHandler=function(){if(this.btn.gray){if(!f.ReheadModel.instance.getStateByTypeId(this.typeNum,this.getListDate()))switch(this.typeNum){case 1:s.instance.addNotice("头像未激活",!0);break;case 2:s.instance.addNotice("头像框未激活",!0);break;case 3:s.instance.addNotice("聊天框未激活",!0)}}else{var t=this.getListDate();if(t!==this.getId())return void f.ReheadCtrl.instance.useHeadIcon(this.typeNum,t);switch(this.typeNum){case 1:s.instance.addNotice("该头像正在使用中",!0);break;case 2:s.instance.addNotice("该头像框正在使用中",!0);break;case 3:s.instance.addNotice("该聊天框正在使用中",!0)}}},a.prototype.changeHandler=function(){this._btnGroup.selectedIndex!=this.getInx()&&f.ReheadCtrl.instance.openAlert(this.dialogId,this._btnGroup.selectedIndex)},a.prototype.setArrt=function(){var t=this.getListDate(),e=f.ReheadModel.instance.getLvByTypeId(this.typeNum,t),i=f.ReheadModel.instance.getStateByTypeId(this.typeNum,t);this.jieMsz.visible=this.jieCharMsz.visible=1===i,this.jieMsz.value=""+(e-1<0?0:e-1),this.upBtn.label=0===i?"激活":"升阶",e=0===e?1:e;var n,s,o,a,r,l,h,c,p,u=0===i?1:e+1;switch(this.typeNum){case 1:if(s=g.instance.getMaxLvById(t),n=g.instance.getCfgById(t,e),o=g.instance.getCfgById(t,e+1),!n)return;r=g.instance.getIsHaveAtt(t),l=4,h=5,c=n[7],p=(a=g.instance.getCfgById(t,u))?a[6]:[];break;case 2:if(s=y.instance.getMaxLvById(t),n=y.instance.getCfgById(t,e),o=y.instance.getCfgById(t,e+1),!n)return;r=y.instance.getIsHaveAtt(t),l=4,h=5,c=n[7],p=(a=y.instance.getCfgById(t,u))?a[6]:[];break;case 3:if(s=_.instance.getMaxLvById(t),n=_.instance.getCfgById(t,e),o=_.instance.getCfgById(t,e+1),!n)return;r=_.instance.getIsHaveAtt(t),l=5,h=6,c=n[8],p=(a=_.instance.getCfgById(t,u))?a[7]:[]}if(r[0]){if(m.common.AttrUtil.setAttrTxts(n,o,this._attrNameTxts,this._attrTxts,this._arrowImgs,this._upAttrTxts,l),this.arrBox1.visible=!0,this.wuText.visible=!1,0===i)for(var d=0;d<this._upAttrTxts.length;d++)this._upAttrTxts[d].text=this._attrTxts[d].text,this._attrTxts[d].text="0"}else this.wuText.visible=!0,this.arrBox1.visible=!1,this.wuText.text="无";if(r[1]){if(m.common.AttrUtil.setAttrTxts(n,o,this._attrNameTxts1,this._attrTxts1,this._arrowImgs1,this._upAttrTxts1,h),this.arrBox2.visible=!0,this.wuText1.visible=!1,0===i)for(d=0;d<this._upAttrTxts.length;d++)this._upAttrTxts[d].text=this._attrTxts[d].text,this._attrTxts[d].text="0"}else this.wuText1.visible=!0,this.arrBox2.visible=!1,this.wuText1.text="无";s<=e?(this.manJieText.visible=!0,this.upBtn.visible=!1,this.tenCountBox.visible=!1,this.rpImg.visible=!1):(this.manJieText.visible=!1,this.upBtn.visible=!0,this.tenCountBox.visible=!0,this.rpImg.visible=f.ReheadModel.instance.getRp(this.typeNum,t),this.setCionNum(p[0],p[1])),this.fightMsz.value=""+c},a.prototype.setCionNum=function(t,e){var i=CommonUtil.getPropCountById(t)||0;this.tenCount.text=i+"/"+e,this.tenCount.color=e<=i?"#4c5e8a":"#FF3e3e",this.tenCountImg.skin=CommonUtil.getIconById(t);var n=this.tenCountImg.width+this.tenCount.width,s=(this.tenCountBox.width-n)/2;this.tenCountImg.x=s,this.tenCount.x=this.tenCountImg.x+this.tenCountImg.width},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._listFrame=this.destroyElement(this._listFrame),this._btnGroup=this.destroyElement(this._btnGroup),t.prototype.destroy.call(this)},o=a,f.ReheadAlert=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.rehead||(t.rehead={}),i=e.ReheadAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.typeNum=2},n=s,e.ReheadAlert1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.rehead||(t.rehead={}),i=e.ReheadAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.typeNum=3},n=s,e.RechatFrameAlert=n}(modules=modules||{}),function(t){var e,c,i,n,d,s,o;function a(){return null!==c&&c.apply(this,arguments)||this}e=t.commonAlert||(t.commonAlert={}),i=ui.TwiceConvertAlertUI,n=t.common.NumInputCtrl,d=t.common.AttrUtil,s=t.notice.SystemNoticeManager,c=i,__extends(a,c),a.prototype.initialize=function(){c.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.txt,"#4C5E8A","SimHei",26),CommonUtil.setHTMLPro(this.propTxt,"#2d1a1a","SimHei",26),this.txt.style.wordWrap=!0,this.propTxt.style.wordWrap=!1,this.propTxt.mouseThrough=this.txt.mouseThrough=!0,this._inputCtrl=new n(this.inputTxt,this.addBtn,this.lessBtn),this._inputCtrl.min=1,this.inputTxt.restrict="0-9"},a.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoEvt(this.inputTxt,"change",this,this.contentChangeHandler),this.onAutoEvt(this.inputTxt,"input",this,this.inputTxtHandler),this.onAutoClick(this.maxBtn,this,this.maxBtnHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoClick(this.lessBtn,this,this.lessBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoClick(this.cancelBtn,this,this.close),this._inputCtrl.addListeners()},a.prototype.offEvt=function(){this._inputCtrl.removeListeners(),c.prototype.offEvt.call(this)},a.prototype.setOpenParam=function(t){c.prototype.setOpenParam.call(this,t),this._info=t},a.prototype.onOpened=function(){c.prototype.onOpened.call(this);var t=this._info[0],e=this._info[2],i=this._info[1],n=Number.MAX_VALUE;if(t instanceof Array){for(var s="",o=0,a=t.length;o<a;o++){var r=t[o];s+="<img src='"+CommonUtil.getIconById(r,!0)+"' width= '40' height= '40'/>"+e[o]}for(this.propTxt.innerHTML=""+CommonUtil.formatHtmlStrByColor("#4C5E8A","单价:")+s,o=0,a=i.length;o<a;o++){var l=Math.floor(i[o]/e[o]);l<n&&(n=l)}}else this.propTxt.innerHTML=""+CommonUtil.formatHtmlStrByColor("#4C5E8A","单价:")+t+": "+e,n=Math.floor(i[0]/e[0]);CommonUtil.centerChainArr(this.width,[this.propTxt]);var h=this._info[5];this._inputCtrl.max=h&&h<n?h:n,this._inputCtrl.value=this._inputCtrl.min,this.contentChangeHandler(),this._info[6]&&0<this._info[6].length?(this.isTips.text=this._info[6],this.propTxt.y=305):(this.isTips.text="",this.propTxt.y=320)},a.prototype.contentChangeHandler=function(){var t=this._inputCtrl.value,e=this._info[0],i=this._info[2],n="";if(e instanceof Array)for(var s=0,o=e.length;s<o;s++){var a=e[s];n+="<img src='"+CommonUtil.getIconById(a,!0)+"' width= '40' height= '40'/>"+CommonUtil.formatHtmlStrByColor("#b15315",""+d.formatFloatNum(t*i[s],!0))}else n=""+CommonUtil.formatHtmlStrByColor("#b15315",""+d.formatFloatNum(t*i[0],!0)+e);var r=this._info[3],l=r[0],h="";if(r){var c=r[1]*this._inputCtrl.value;h=c?"*"+CommonUtil.bigNumToString(c):"",h=CommonUtil.formatHtmlStrByColor("#b15315",""+h)}var p=CommonUtil.getNameByItemId(l),u=CommonUtil.formatHtmlStrByColor("#b15315",""+p);this.txt.innerHTML="是否花费"+n+"兑换"+u+h+"?",this.txt.y=this.con.height-this.txt.contextHeight>>1,this.txt.contextWidth<this.txt.width?this.txt.x=this.con.width-this.txt.contextWidth>>1:this.txt.x=0},a.prototype.inputTxtHandler=function(){var t=parseInt(this.inputTxt.text);isNaN(t)?this._inputCtrl.value=this._inputCtrl.min:t>this._inputCtrl.max?s.instance.addNotice("已达最大兑换数量",!0):(this._inputCtrl.value=t,this.contentChangeHandler())},a.prototype.maxBtnHandler=function(){this.addBtnHandler()&&(this._inputCtrl.value=this._inputCtrl.max)},a.prototype.addBtnHandler=function(){return this._inputCtrl.value!==this._inputCtrl.max||(s.instance.addNotice("已达最大兑换数量",!0),!1)},a.prototype.lessBtnHandler=function(){this._inputCtrl.value===this._inputCtrl.min&&s.instance.addNotice("已达最小兑换数量",!0)},a.prototype.okBtnHandler=function(){this._info&&this._info[4]&&(this._info[4].runWith(this._inputCtrl.value),this.close())},o=a,e.TwiceConvertAlert=o}(modules=modules||{}),function(t){var e,v,i;function n(){this.init()}e=t.config||(t.config={}),v=laya.utils.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tableDatesById={},this._tableIdByType={},this._tableAttrsyId={};for(var t,e=GlobalData.getConfig("show_suit"),i=0,n=(this._cfgs=e).length;i<n;i++){var s=e[i];if(s){var o=s[0],a=s[1],r=s[2];0===r&&(t=e[i]);var l=t[4],h=t[5],c=s[7],p=s[8];c.push(183),c.push(p),this._tableIdByType[a]||(this._tableIdByType[a]=[]),-1==this._tableIdByType[a].indexOf(o)&&this._tableIdByType[a].push(o),this._tableDatesById[o]||(this._tableDatesById[o]={}),this._tableDatesById[o][r]=s,this._tableAttrsyId[o]||(this._tableAttrsyId[o]={}),this._tableAttrsyId[o][r]=[],this._tableAttrsyId[o][r][0]=[];for(var u=new v,d=0;d<l.length;d+=2){var m=l[d],f=l[d+1];m&&f&&((g=u.get(m))?u.set(m,g+f):u.set(m,f))}for(d=0;d<h.length;d+=2)m=h[d],f=h[d+1],m&&f&&((g=u.get(m))?u.set(m,g+f):u.set(m,f));for(d=0;d<c.length;d+=2){var g;m=c[d],f=c[d+1],m&&f&&((g=u.get(m))?u.set(m,g+f):u.set(m,f))}for(d=0;d<u.keys.length;d++){var y=u.keys[d],_=u.values[d];y&&_&&(this._tableAttrsyId[o][r][0].push(y),this._tableAttrsyId[o][r][0].push(_))}}}},n.prototype.getAllIdArrByType=function(t){return this._tableIdByType[t]},n.prototype.getCfgByIdAndLevel=function(t,e){return this._tableDatesById[t][e]},n.prototype.getAttrArrByIdAndLevel=function(t,e){return this._tableAttrsyId[t][e]},i=n,e.ShowSuitCfg=i}(modules=modules||{}),function(P){var S,a,A,M,E,t,e,i,n,s,o;function r(){var t=a.call(this)||this;return t._stateUp=0,t._caiLiaoItemId=0,t}S=P.fashion_suits||(P.fashion_suits={}),A=P.config.ShowSuitCfg,M=P.common.CustomClip,E=P.common.CommonUtil,t=laya.events.Event,e=P.common.SimpleList,i=P.common.AvatarClip,n=P.bag.BagUtil,s=P.common.ListWithArrowCtrl,a=ui.FashionSuitsViewUI,__extends(r,a),r.prototype.initialize=function(){a.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._type=1,this.titleTxt.text="极品套装",this._list=e.create(S.FashionSuitsItem,114,125,2,1,20,0),this.addChild(this._list),this._list.pos(102,1011,!0),this._list.size(516,125),this._listCaiLiao=e.create(S.FashionSuitsCaiLiaoItem,100,122,2,1,10,0),this.addChild(this._listCaiLiao),this._listCaiLiao.pos(90,562,!0),this._listCaiLiao.size(540,103),this._nameTxts=[this.attrName1,this.attrName3,this.attrName5,this.attrName7],this._nameTxts1=[this.attrName2,this.attrName4,this.attrName6,this.attrName8],this._nameTxts2=[this.attrName9,this.attrName10,this.attrName11,this.attrName12,this.attrName13],this._valueTxts2=[this.attrValue9,this.attrValue10,this.attrValue11,this.attrValue12,this.attrValue13],this._img2=[this.img1,this.img2,this.img3,this.img4,this.img5],E.setHTMLPro(this.leftTipHTML,"#1f304d","SimHei",24,"center"),E.setHTMLPro(this.rightTipHTML,"#1f304d","SimHei",24,"center"),E.setHTMLPro(this.tipsHTML,"#168a17","SimHei",24),this._avatarClip=i.create(1432,1432,1152),this.addChildAt(this._avatarClip,2),this._avatarClip.pos(368,600,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180,this.rewardShowItem.setDataFun([1,.5,.5,1,"assets/icon/ui/sprint_rank/"]),this._listCtrl=new s(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=this._list.width,this.creatEffect()},r.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.leftBtn,this,this.leftBtnHandler),this.onAutoClick(this.rightBtn,this,this.rightBtnHandler),this.onAutoClick(this.changeBtn,this,this.changeBtnHandler),this.onAutoClick(this.upBtn,this,this.upBtnHandler),this.onAutoClick(this.allAttrBtn,this,this.allAttrBtnHandler),this.onAutoEvt(this._list,t.SELECT,this,this.listHandler),this.onAutoGlobalEvt("FASHION_SUITS_UPDATE",this,this.showUI),this.onAutoGlobalEvt("PET_UPDATE",this,this.showUI),this.onAutoGlobalEvt("WING_UPDATE",this,this.showUI),this.onAutoGlobalEvt("SBHUANHUA_UPDATA",this,this.showUI),this.onAutoGlobalEvt("FASHION_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("TIAN_ZHU_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("SBCHANGE_HUANHUA",this,this.setConsumption),this.onAutoGlobalEvt("RIDE_HUANHUA_SHOWID",this,this.setConsumption),this.onAutoGlobalEvt("XYCHANGE_HUANHUA",this,this.setConsumption),this.onAutoGlobalEvt("PET_HUANHUA_SHOWID",this,this.setConsumption),this.onAutoGlobalEvt("FZHUANHUA_UPDATA",this,this.setConsumption),this.onAutoGlobalEvt("WEAPONFZHUANHUA_UPDATA",this,this.setConsumption),this.onAutoGlobalEvt("WEAPONFZCHANGE_HUANHUA",this,this.setConsumption),this.onAutoGlobalEvt("FZCHANGE_HUANHUA",this,this.setConsumption),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setConsumption),this._listCtrl.addListeners()},r.prototype.offEvt=function(){a.prototype.offEvt.call(this),this._listCtrl.removeListeners()},r.prototype.onOpened=function(){a.prototype.onOpened.call(this);for(var t=A.instance.getAllIdArrByType(this._type),e=new Array,i=0;i<t.length;i++){var n=t[i];e.push([n,this._type])}e.sort(this.sortFunc.bind(this)),this._list.datas=e;var s=0;for(i=0;i<e.length;i++){var o=e[i][0];if(S.FashionSuitsModel.instance.isKeJiHuo(o)){s=i;break}}this._list.selectedIndex=s,this.setListCenter(),this._maxDistance=this._list.datas.length*this._list.itemWidth+(this._list.datas.length-1)*this._list.spaceX-this._list.width,this.setBtnVisible(),Laya.timer.frameLoop(1,this,this.setBtnVisible),this._list.scrollToIndex(this._list.selectedIndex)},r.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=S.FashionSuitsModel.instance.getProgressByid(i)[0],o=S.FashionSuitsModel.instance.getProgressByid(n)[0];return s===o?n<i?1:-1:o<s?-1:1},r.prototype.setListCenter=function(){var t=Math.min(this._list.datas.length,4),e=t*this._list.itemWidth+(t-1)*this._list.spaceX;this._list.x=102+.5*(516-e)},r.prototype.listHandler=function(){-1!=this._list.selectedIndex&&(this._idTaoZhuang=this._list.datas[this._list.selectedIndex][0],this._dates=A.instance.getCfgByIdAndLevel(this._idTaoZhuang,0),this.showUI(),this.setItemUI())},r.prototype.allAttrBtnHandler=function(){WindowManager.instance.open(478,this._idTaoZhuang)},r.prototype.leftBtnHandler=function(){if(this._bollLeft)S.FashionSuitsCtrl.instance.ShowSuitPromote(this._idTaoZhuang,0);else{var t=S.FashionSuitsModel.instance.tableConditions[this._idTaoZhuang];P.notice.SystemNoticeManager.instance.addNotice("激活套装中任意"+t+"件外显，即可激活高级形态",!0)}},r.prototype.rightBtnHandler=function(){this._bollRight?S.FashionSuitsCtrl.instance.ShowSuitPromote(this._idTaoZhuang,1):P.notice.SystemNoticeManager.instance.addNotice("激活套装中全部外显，即可激活完美形态",!0)},r.prototype.changeBtnHandler=function(){var t=this._dates[3];S.FashionSuitsModel.instance.changeAllhow(t)},r.prototype.upBtnHandler=function(){0==this._stateUp?P.notice.SystemNoticeManager.instance.addNotice("套装中外显未全部达到"+this._conditionJie+"阶",!0):1==this._stateUp&&n.openLackPropAlert(this._caiLiaoItemId,1),2==this._stateUp&&S.FashionSuitsCtrl.instance.ShowSuitPromote(this._idTaoZhuang,1)},r.prototype.showUI=function(){this.showModle(),this.setAttributeAndBtn(),this.setConsumption()},r.prototype.showModle=function(){if(this._list.datas&&this._idTaoZhuang&&this._dates){var t=this._dates[3],e=S.FashionSuitsModel.instance.tableNameAndIcon[this._idTaoZhuang],i="";e&&(i=e[0]);for(var n=0,s=0,o=0,a=0,r=0,l=0,h=0;h<t.length;h++){var c=t[h];if(c){var p=Math.round(c/1e3);9==p||10==p||(2==p?l=c:3==p?o=c:4==p?a=c:5==p?s=c:90==p?n=c=c-c%10+PlayerModel.instance.occ:11==p&&(r=c))}}0!=l?(this.rewardShowItem.visible=!0,this.rewardShowItem.stopTween(),this.rewardShowItem.showRewardObj(l,0,0)):(this.rewardShowItem.disModel(),this.rewardShowItem.visible=!1),this._avatarClip.y=0!=a?500:470,this.observationItem.setRot(),this._avatarClip.reset(n,s,o,a,0,r),this.nameTxt.text=""+i,this.observationItem.data=0!=l?[[this._avatarClip,0],[this.rewardShowItem._modelClip,l]]:[[this._avatarClip,0]]}},r.prototype.setItemUI=function(){if(this._list.datas&&this._idTaoZhuang&&this._dates){for(var t=this._dates[3],e=new Array,i=0;i<t.length;i++){var n=t[i];if(n){var s=S.FashionSuitsModel.instance.getItemId(n);s&&e.push([n,[s,1,0,null]])}}this._listCaiLiao.datas=e;var o=Math.min(this._listCaiLiao.datas.length,5),a=100*o+(o-1)*this._listCaiLiao.spaceX;this._listCaiLiao.x=90+.5*(540-a)}},r.prototype.setAttributeAndBtn=function(){if(M.thisStop(this._btnClip),M.thisStop(this._btnClip1),M.thisStop(this._btnClip2),this._list.datas&&this._idTaoZhuang&&this._dates){var t=this._dates[3],e=S.FashionSuitsModel.instance.tableNameAndIcon[this._idTaoZhuang],i="";e&&(i=e[0]);var n=S.FashionSuitsModel.instance.getArrDate(this._idTaoZhuang),s=n[0],o=n[1],a=-1<s,r=-1<o,l=o<0?0:o;this.setadAttrs(this._dates,null),this.setperfectAttrs(this._dates,null),this.allAttrBgImg.visible=this.allAttrext.visible=this.allAttrBtn.visible=this.changeBtn.visible=a&&r,this.attrBox.visible=!a||!r,this.noActImg.visible=!r,this.attrUpBox.visible=a&&r;var h=S.FashionSuitsModel.instance.getJiHuoNum(t),c=S.FashionSuitsModel.instance.tableConditions[this._idTaoZhuang],p=t.length;this._bollLeft=c<=h,this._bollRight=p<=h,h<S.FashionSuitsModel.instance.tableConditions[this._idTaoZhuang]?(this.leftTipHTML.innerHTML="高级形态(<span style='color:#ff3e3e'>"+h+"/"+c+"</span>)",this.leftBtn.visible=!0,this.leftJiHuoImg.visible=!1):(this.leftTipHTML.innerHTML="高级形态(<span style='color:#168a17'>"+c+"/"+c+"</span>)",a||M.thisPlay(this._btnClip),this.leftBtn.visible=!a,this.leftJiHuoImg.visible=a),h<p?(this.rightTipHTML.innerHTML="完美形态(<span style='color:#ff3e3e'>"+h+"/"+p+"</span>)",this.rightBtn.visible=!0,this.rightJiHuoImg.visible=!1):(this.rightTipHTML.innerHTML="完美形态(<span style='color:#168a17'>"+h+"/"+p+"</span>)",r||M.thisPlay(this._btnClip1),this.rightBtn.visible=!r,this.rightJiHuoImg.visible=r);var u=A.instance.getCfgByIdAndLevel(this._idTaoZhuang,l),d=A.instance.getCfgByIdAndLevel(this._idTaoZhuang,l+1),m=d?d[7].length/2:u[7].length/2,f=u[6],g=f[0],y=f[1],_=f[2];if(this._caiLiaoItemId=y,this._conditionJie=g,d){this.huoBiImg.skin=E.getIconById(y,!0);var v=P.bag.BagModel.instance.getItemCountById(y),I=S.FashionSuitsModel.instance.getmanZhuNum(t,g);p<=I?(_<=v?(M.thisPlay(this._btnClip2),this._stateUp=2):this._stateUp=1,this.tipsHTML.innerHTML="<span style='color:#1f304d'>进阶条件:</span>["+i+"]中全部外显达到"+g+"阶(<span style='color:#168a17'>"+I+"/"+p+"</span>)"):(this._stateUp=0,this.tipsHTML.innerHTML="<span style='color:#1f304d'>进阶条件:</span>["+i+"]中全部外显达到"+g+"阶(<span style='color:#ff3e3e'>"+I+"/"+p+"</span>)"),this.maxText.visible=!1,this.upBtn.visible=!0,this.tipsHTML.visible=!0,this.setshengJieAttrs(u,d)}else{this.maxText.visible=!0,this.upBtn.visible=!1,this.tipsHTML.visible=!1;var b=A.instance.getAttrArrByIdAndLevel(this._idTaoZhuang,l);this.setperfectAllAttrs(b,null),m=b[0].length/2}for(var C=0;C<this._valueTxts2.length;C++){var T=this._nameTxts2[C],w=this._valueTxts2[C],x=this._img2[C];w&&T&&(T.visible=x.visible=w.visible,w.text="+"+w.text,T.color="#1F304D",C===m-1&&(T.text="["+i+"]套装系列全部外显属性",T.color="#b15315"),w.x=T.x+T.textWidth+10)}var B=S.FashionSuitsModel.instance.getfight(this._idTaoZhuang);this.atkMsz.value=""+(B[0]+B[1])}},r.prototype.setConsumption=function(){if(this._list.datas&&this._idTaoZhuang&&this._dates){var t=S.FashionSuitsModel.instance.getArrDate(this._idTaoZhuang),e=t[0],i=t[1],n=-1<e,s=-1<i,o=i<0?0:i;this.huoBiImg.visible=this.moneyText.visible=!1;var a=S.FashionSuitsModel.instance.isAllChuanDai(this._idTaoZhuang);this.useImg.visible=a,this.changeBtn.visible=s&&!a,this.jieCharMsz.visible=this.jieMsz.visible=n&&s,this.jieMsz.value=""+o;var r=A.instance.getCfgByIdAndLevel(this._idTaoZhuang,o);if(r){var l=r[6];if(0<l.length){var h=l[1],c=l[2];this.huoBiImg.skin=E.getIconById(h,!0);var p=P.bag.BagModel.instance.getItemCountById(h);this.moneyText.text=p+"/"+c,this.moneyText.color=c<=p?"#168a17":"#ff3e3e",this.huoBiImg.visible=this.moneyText.visible=!0;var u=this.huoBiImg.width+this.moneyText.textWidth,d=(this.attrUpBox.width-u)/2;this.huoBiImg.x=d,this.moneyText.x=this.huoBiImg.x+this.huoBiImg.width}}}},r.prototype.setadAttrs=function(t,e){P.common.AttrUtil.setAttrTxts(t,e,this._nameTxts,null,null,null,4)},r.prototype.setperfectAttrs=function(t,e){P.common.AttrUtil.setAttrTxts(t,e,this._nameTxts1,null,null,null,5)},r.prototype.setshengJieAttrs=function(t,e){P.common.AttrUtil.setAttrTxts(t,e,this._nameTxts2,this._valueTxts2,null,this._valueTxts2,7)},r.prototype.setperfectAllAttrs=function(t,e){P.common.AttrUtil.setAttrTxts(t,e,this._nameTxts2,this._valueTxts2,null,null,0)},r.prototype.creatEffect=function(){this._btnClip=M.create("assets/effect/btn_light.atlas","btn_light",16),this.attrBox.addChild(this._btnClip),this._btnClip.scale(.8,.8,!0),this._btnClip.pos(this.leftBtn.x-6,this.leftBtn.y-8,!0),this._btnClip1=M.create("assets/effect/btn_light.atlas","btn_light",16),this.attrBox.addChild(this._btnClip1),this._btnClip1.scale(.8,.8,!0),this._btnClip1.pos(this.rightBtn.x-6,this.rightBtn.y-8,!0),this._btnClip2=M.create("assets/effect/btn_light.atlas","btn_light",16),this.attrUpBox.addChild(this._btnClip2),this._btnClip2.scale(.8,.8,!0),this._btnClip2.pos(this.upBtn.x-6,this.upBtn.y-8,!0),this._btnClip2.visible=this._btnClip.visible=this._btnClip1.visible=!1},r.prototype.setBtnVisible=function(){this.preBtn.visible=!1,this.nextBtn.visible=!1,this.preBtn.visible=0<this._list.scrollPos&&4<this._list.datas.length,this.nextBtn.visible=this._list.scrollPos<this._maxDistance&&4<this._list.datas.length},r.prototype.close=function(){a.prototype.close.call(this),this.rewardShowItem.stopTween(),Laya.timer.clear(this,this.setBtnVisible)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._listCaiLiao=this.destroyElement(this._listCaiLiao),this._btnClip1=this.destroyElement(this._btnClip1),this._btnClip=this.destroyElement(this._btnClip),this._btnClip2=this.destroyElement(this._btnClip2),this._avatarClip=this.destroyElement(this._avatarClip),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this._listCtrl=this.destroyElement(this._listCtrl),this.observationItem=this.destroyElement(this.observationItem),a.prototype.destroy.call(this,t)},o=r,S.FashionSuitsPanel=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.fashion_suits||(t.fashion_suits={}),i=e.FashionSuitsPanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=2,this.titleTxt.text="绝品套装"},n=s,e.FashionSuitsJuePingPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.fashion_suits||(t.fashion_suits={}),i=e.FashionSuitsPanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=3,this.titleTxt.text="典藏套装"},n=s,e.FashionSuitsDianCangPanel=n}(modules=modules||{}),function(i){var _,v,I,t;function e(){return v.call(this)||this}_=i.fashion_suits||(i.fashion_suits={}),I=i.config.ShowSuitCfg,v=ui.FashionSuitsAlertUI,__extends(e,v),e.prototype.initialize=function(){v.prototype.initialize.call(this),this._nameTxts=[this.attrName9,this.attrName10,this.attrName11,this.attrName12,this.attrName13],this._valueTxts=[this.attrValue9,this.attrValue10,this.attrValue11,this.attrValue12,this.attrValue13],this._nameTxts2=[this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5],this._valueTxts2=[this.attrValue1,this.attrValue2,this.attrValue3,this.attrValue4,this.attrValue5]},e.prototype.setOpenParam=function(t){if(v.prototype.setOpenParam.call(this,t),t){for(var e=0;e<this._nameTxts.length;e++)this._nameTxts[e].visible=!1,this._valueTxts[e].visible=!1,this._nameTxts2[e].visible=!1,this._valueTxts2[e].visible=!1;var i=I.instance.getCfgByIdAndLevel(t,0),n=_.FashionSuitsModel.instance.tableNameAndIcon[t],s="";n&&(s=n[0]);var o=_.FashionSuitsModel.instance.getArrDate(t)[1],a=o<0?0:o,r=I.instance.getAttrArrByIdAndLevel(t,a),l=I.instance.getAttrArrByIdAndLevel(t,a+1);this.setadAttrs(r,null),l&&this.setperfectAttrs(l,null),this.maxText.visible=!l;var h=0,c=0;for(r&&(h=r[0].length/2),l&&(c=l[0].length/2),e=0;e<this._valueTxts.length;e++){var p=this._nameTxts[e],u=this._valueTxts[e];u&&p&&(p.visible=u.visible,p.color="#1F304D",e===h-1&&0!=a&&(p.text="["+s+"]系列套装属性加成",p.color="#b15315"),u.x=p.x+p.textWidth+5);var d=this._nameTxts2[e],m=this._valueTxts2[e];m&&d&&(d.visible=m.visible,d.color="#1F304D",e===c-1&&(d.text="["+s+"]系列套装属性加成",d.color="#b15315"),m.x=d.x+d.textWidth+5)}var f=I.instance.getCfgByIdAndLevel(t,a),g=i[9],y=f[10];this.atkMsz.value=""+(g+y)}},e.prototype.setadAttrs=function(t,e){i.common.AttrUtil.setAttrTxts(t,e,this._nameTxts,this._valueTxts,null,null,0)},e.prototype.setperfectAttrs=function(t,e){i.common.AttrUtil.setAttrTxts(t,e,this._nameTxts2,this._valueTxts2,null,null,0)},e.prototype.destroy=function(){(this._nameTxts.length=0)&&(this._nameTxts=null),(this._valueTxts.length=0)&&(this._valueTxts=null),(this._nameTxts2.length=0)&&(this._nameTxts2=null),(this._valueTxts2.length=0)&&(this._valueTxts2=null),v.prototype.destroy.call(this)},t=e,_.FashionSuitsAlert=t}(modules=modules||{}),function(t){var f,g,y,e,i,n;function s(){return null!==g&&g.apply(this,arguments)||this}f=t.fashion_suits||(t.fashion_suits={}),y=t.config.ShowSuitCfg,e=t.common.CustomClip,i=t.common.AvatarClip,g=ui.ExteriorActiveAlertUI,__extends(s,g),s.prototype.destroy=function(){this._effect=this.destroyElement(this._effect),this._modelClip=this.destroyElement(this._modelClip),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.observationItem=this.destroyElement(this.observationItem),this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),g.prototype.destroy.call(this)},s.prototype.initialize=function(){g.prototype.initialize.call(this),this._effect=e.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._effect,1),this._effect.scale(2.5,2.5,!0),this._effect.y=100,this._effect.centerX=0,this._modelClip=i.create(1432,1432,1152),this.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.y=500,this._modelClip.mouseEnabled=!1,this._modelClip.avatarRotationY=180,this._modelClip.visible=!0,this.clickCD=!0,this._modelClip.scale(1.2,1.2,!0),this._tweenJS=TweenJS.create(this._modelClip).yoyo(!0).repeat(99999999),this.rewardShowItem.setDataFun([1,.4,.5,1,"assets/icon/ui/sprint_rank/"])},s.prototype.onOpened=function(){g.prototype.onOpened.call(this),e.thisPlay(this._effect)},s.prototype.close=function(){g.prototype.close.call(this),this._tweenJS&&this._tweenJS.stop(),this.rewardShowItem.stopTween(),e.thisStop(this._effect)},s.prototype.changeAllhow=function(){var t=y.instance.getCfgByIdAndLevel(this._id,0)[3];f.FashionSuitsModel.instance.changeAllhow(t)},s.prototype.setOpenParam=function(t){g.prototype.setOpenParam.call(this,t),this.titleImage.skin="immortal/image_ydrk_jhtz.png";var e=t;this._id=e;var i=y.instance.getCfgByIdAndLevel(e,0)[3],n=f.FashionSuitsModel.instance.tableNameAndIcon[e],s="";n&&(s=n[0]);for(var o=0,a=0,r=0,l=0,h=0,c=0,p=0;p<i.length;p++){var u=i[p];if(u){var d=Math.round(u/1e3);9==d||10==d||(2==d?c=u:3==d?r=u:4==d?l=u:5==d?a=u:90==d?o=u=u-u%10+PlayerModel.instance.occ:11==d&&(h=u))}}0!=c?(this.rewardShowItem.visible=!0,this.rewardShowItem.stopTween(),this.rewardShowItem.showRewardObj(c,0,0)):(this.rewardShowItem.disModel(),this.rewardShowItem.visible=!1),this._modelClip.y=0!=l?600:550,this._modelClip.reset(o,a,r,l,0,h),this.nameTXt.text=""+s,this.closeBtn.visible=!1;var m=f.FashionSuitsModel.instance.getfight(e);this.atkValueMsz.value=""+(m[0]+m[1]),this.changeAllhow(),this.observationItem.data=[[this._modelClip,0],[this.rewardShowItem._modelClip,Math.round(c/1e3)]]},n=s,f.FashionSuitsTaoZhuangAlert=n}(modules=modules||{}),function(f){var A,e,t,M,E,c,R,D,n,i;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastPos=0,t._maxConH=616,t}A=f.chat||(f.chat={}),t=ui.OtherRingTipsUI,M=f.config.SkillPureCfg,E=f.config.SkillCfg,c=f.config.AttrItemCfg,R=f.config.BlendCfg,D=f.config.ItemMaterialCfg,n=Laya.Rectangle,e=t,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.item.dataSource=[12960001,1,0,null],this._str=R.instance.getCfgById(75503)[2][1],CommonUtil.setHTMLPro(this.markNameTxt,"#50ff28","SimHei",22),CommonUtil.setHTMLPro(this.markTimeTxt,"#50ff28","SimHei",22),CommonUtil.setHTMLPro(this.markStrTxt,"#FFFFFF","SimHei",22),CommonUtil.setHTMLPro(this.markAttrTxt,"#FFFFFF","SimHei",22),this.markNameTxt.style.leading=this.markTimeTxt.style.leading=this.markStrTxt.style.leading=this.markAttrTxt.style.leading=8},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this.conBox,"mousedown",this,this.downHandler),this.onAutoEvt(this.conBox,"mousewheel",this,this.wheelHandler),this.onAutoGlobalEvt("OTHER_PLAYER_INFO",this,this.updataView)},s.prototype.setOpenParam=function(t){this._value=t},s.prototype.downHandler=function(){this._lastPos=this.conBox.mouseY,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseup",this,this.upHandler),Laya.stage.on("mouseout",this,this.upHandler)},s.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scroll(e)},s.prototype.moveHandler=function(){var t=this._lastPos-this.conBox.mouseY;this.scroll(t),this._lastPos=this.conBox.mouseY},s.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseup",this,this.upHandler),Laya.stage.off("mouseout",this,this.upHandler)},s.prototype.setConHeight=function(t){var e=(this.conBox.height=t)>this._maxConH?this._maxConH:t,i=this.conBox.scrollRect;return i?i.setTo(0,0,this.conBox.width,e):i=new n(0,0,this.conBox.width,e),this.conBox.scrollRect=i,this.conBox.mouseEnabled=t>this._maxConH,e},s.prototype.scroll=function(t){var e=this.conBox.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.conBox.height-this._maxConH&&(e.y=this.conBox.height-this._maxConH),this.conBox.scrollRect=e},s.prototype.updataView=function(){if(this._value){var t=this._value[0],e=this._value[1],i=this.markBox.y;e&&0!==e[1]?(this.markBox.visible=!0,this.markNameTxt.innerHTML='<span color="#FF6DA7">刻印者：</span>'+e[0],this.markTimeTxt.innerHTML='<span color="#FF6DA7">刻印时间：</span>'+CommonUtil.timeStampToDate(e[1]),this.markStrTxt.innerHTML='<span color="#FF6DA7">结缘宣言：</span>'+e[2],this.markStrTxt.style.height=this.markStrTxt.contextHeight,this.markAttrTitleBg.y=this.markStrTxt.y+this.markStrTxt.contextHeight,this.markAttrTitleTxt.y=this.markAttrTitleBg.y+6,this.markAttrIcon.y=this.markAttrTitleBg.y+42,this.markAttrTxt.y=this.markAttrIcon.y-2,this.markAttrTxt.innerHTML=this._str+'<br/><span color="#50FF28">战力+'+e[3]+"</span>",i+=this.markAttrTxt.y+this.markAttrTxt.contextHeight):this.markBox.visible=!1,this.baseAttrBox.y=i,this.levelAttrBox.y=this.baseAttrBox.y+108,this.skillBox.y=this.levelAttrBox.y+108;for(var n=t[3],s=[this.property1HTML,this.property2HTML,this.nextProperty1HTML,this.nextProperty2HTML],o=0;o<s.length;o++)CommonUtil.setHTMLPro(s[o],"#ffffff","SimHei",22),s[o].innerHTML="";for(var a=[this.property1,this.property2,this.property3,this.property4,this.property5,this.property6,this.property7,this.property8],r=0;r<a.length;r++)CommonUtil.setHTMLPro(a[r],"#50ff28","SimHei",22),a[r].innerHTML="",a[r].style.leading=8,a[r].width=420;for(var l=[this.stoneIcon1,this.stoneIcon2,this.stoneIcon3,this.stoneIcon4,this.stoneIcon5,this.stoneIcon6,this.stoneIcon7,this.stoneIcon8],h=[2701,2702,2703,2704,2705,2706,2707,2708],c=a.length,p=0;p<c;p++)a[p].visible=!1,l[p].skin=l[p].skin="",l[p].gray=!0;for(var u=[],d=0;d<n.length;d++)if(n[d]){var m=M.instance.getCfgById(n[d][0]),f=E.instance.getCfgById(1e4*n[d][0]+n[d][1]),g=f[1],y=f[2],_=2<=g.length?g[1]+"":y+"";a[d].innerHTML="<span style='color:#FFFFFF'>"+m[1]+"</span>Lv."+n[d][1]+"："+CommonUtil.stringFormat(m[5],_),l[d].skin="assets/icon/skill/"+m[6]+".png",a[d].visible=l[d].visible=!0,l[d].gray=!1,a[d].color="#50ff28",u.push(n[d][0])}for(var v=this.checkArr(h,u),I=0;d<h.length;d++)m=M.instance.getCfgById(v[I]),l[d].skin="assets/icon/skill/"+m[6]+".png",a[d].innerHTML="<span style='color:#999999'>"+m[1]+" Lv.0</span>",a[d].visible=!0,l[d].gray=!0,I++;var b=A.ChatModel.instance.otherPlayerInfo;this.slefName.text=b[2],this.wifeName.text=t[4]?t[4]:"无";var C=[this.property1HTML,this.property2HTML];this.showRingBaseView(t[0],C,t[2]);var T=[this.nextProperty1HTML,this.nextProperty2HTML];this.showHtmlText(T,t[1],t[2]),this.fight.text="戒指等级:Lv."+t[1],this.fightClip.value=""+this.getFight(),this.updadataPostion(a,l);var w=R.instance.getCfgById(75010),x=t[0].sort(),B=x.length;if(0<B){var P=w[1][x[B-1]-1]||12950001;this.item.dataSource=[P,1,0,null];var S=D.instance.getItemCfgById(P);this.nameTxt.text=S[1]}}},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView()},s.prototype.showHtmlText=function(t,e,i){var n=this.getIdByRinglevelCfg(e);if(n){var s=n[2],o=0;for(l=0;l<s.length;l+=2){var a=c.instance.getCfgById(s[l])[1],r=f.config.RingResonanceCfg.instance.getCfgByLv(i)[2];(!r||r.length<2)&&(r=[0,0]),t[o].innerHTML=a+"+"+Math.floor(s[l+1]+s[l+1]*r[1])+"<span style='color:#50ff28'>（共鸣加成+"+Math.floor(s[l+1]*r[1])+"）</span>",o++}}else for(var l=0;l<2;l++)t[l].innerHTML="已达到最大等级"},s.prototype.destroy=function(){this.item=this.destroyElement(this.item),this._value=this._str=null,e.prototype.destroy.call(this)},s.prototype.checkArr=function(t,e){for(var i=[],n=0;n<t.length;n++){for(var s=!1,o=0;o<e.length;o++)if(t[n]==e[o]){s=!0;break}s||i.push(t[n])}return i},s.prototype.getFight=function(){for(var t=this._value[0],e=this.getIdByRinglevelCfg(t[1])[4],i=t[3],n=0,s=0;s<i.length;s++)n+=(c=E.instance.getCfgById(1e4*i[s][0]+i[s][1]))[3];for(var o=f.config.RingResonanceCfg.instance.getCfgByLv(t[2])[3]||0,a=0,r=1,l=75101,h=[];;){var c;if(!(c=R.instance.getCfgById(l++)))break;var p=parseInt(c[2][0]);h[r]=p,r++}for(var u=0,d=t[0];u<d.length;u++)a+=h[d[u]];var m=this._value[1];return e+n+a+o+(m?m[3]:0)},s.prototype.showRingBaseView=function(t,e,i){if(0<t.sort().length){var n=t[t.length-1]+75101-1,s=R.instance.getCfgById(n);if(s)for(var o=s[1],a=0,r=0;a<o.length;a+=2){var l=c.instance.getCfgById(o[a])[1];e[r].innerHTML=l+":"+o[a+1];var h=f.config.RingResonanceCfg.instance.getCfgByLv(i)[2];(!h||h.length<2)&&(h=[0,0]),e[r].innerHTML=l+"+"+Math.floor(o[a+1]+o[a+1]*h[1])+"<span style='color:#50ff28'>（共鸣加成+"+Math.floor(o[a+1]*h[1])+"）</span>",r++}}},s.prototype.getIdByRinglevelCfg=function(t){for(var e=GlobalData.getConfig("ring_level"),i=e.length,n=0;n<i;n++)if(e[n][0]==t)return e[n]},s.prototype.updadataPostion=function(t,e){for(var i=t.length,n=1;n<i;n++){var s=t[n-1].contextHeight;t[n].y=t[n-1].y+s+10,e[n].y=t[n].y+t[n].contextHeight/2-e[n].height/2,e[n].x=e[0].x,t[n].x=t[0].x}e[0].y=t[0].y+t[0].contextHeight/2-e[0].height/2,this.setConHeight(this.skillBox.y+this.property8.y+this.property8.contextHeight+4)},i=s,A.OtherRingTipsAlert=i}(modules=modules||{}),function(o){var t,e,i,n,s;function a(){return null!==e&&e.apply(this,arguments)||this}t=o.chat||(o.chat={}),i=ui.OtherCatTipsUI,n=o.common.CustomList,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.hCount=1,this._list.x=26,this._list.y=231,this._list.width=550,this._list.height=457,this._list.spaceY=474,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=t.OtherCatTipsItem,this.addChild(this._list),this.item.mouseEnabled=!1},a.prototype.setOpenParam=function(t){t&&-1!=t&&(this._value=t)},a.prototype.updataView=function(){if(this._value){var t=[];if(1==this._value[0]){this.nameTxt.text="招财猫",this.item.dataSource=[13250002,1,0,null];for(var e=(n=o.config.MoneyCatCfg.instance.arr).length,i=1;i<e;i++)this._value[1]<=n[i][0]?t.push([!0,n[i][0],n[i][1][0][1],"可获得元宝"]):t.push([!1,n[i][0],n[i][1][0][1],"可获得元宝"])}else if(2==this._value[0]){var n;for(this.nameTxt.text="战力护符",this.item.dataSource=[13250003,1,0,null],e=(n=GlobalData.getConfig("fight_talisman")).length,i=1;i<e;i++){var s=n[i];this._value[1]<=s[0]?t.push([!0,s[0],s[1],"可提升战力至"]):t.push([!1,s[0],s[1],"可提升战力至"])}}this._list.datas=t}},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView()},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._value=null,e.prototype.destroy.call(this)},s=a,t.OtherCatTips=s}(modules=modules||{}),function(t){var a,e,r,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}a=t.super_vip||(t.super_vip={}),r=t.config.BlendCfg,i=t.common.CustomClip,e=ui.SuperVipTipsUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.itemTab=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6];for(var t=0;t<this.itemTab.length;t++)this.itemTab[t].visible=!1;this.mscTab=["专属客服一对一贴心服务，意见建议直通策划！","silang"===PlatParams.platform?"VIP线下活动，优先获取！":"游戏第一手资料，优先获取！","成为超级会员，领取超级大礼包！","专属不定时活动和福利！"],this.becaomeMsc.visible=this.qqNum.visible=this.method1Msc.visible=this.condition1.visible=this.method2Msc.visible=this.condition2.visible=this.vipMsc.visible=!1,this.msc1.text=this.mscTab[0],this.msc2.text=this.mscTab[1],this.msc3.text=this.mscTab[2],this.msc4.text=this.mscTab[3],this.qqText.text="",this.creatEffect()},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.gotoBtn,this,this.gotoHandler),this.onAutoClick(this.closeBtn,this,this.close),this.onAutoGlobalEvt("SUPER_VIP_UPDATA",this,this.updataView)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView()},s.prototype.copyHandler=function(){a.SuperVipModel.instance.serviceNum&&t.common.MiniGameUtil.copyClipboard(a.SuperVipModel.instance.serviceNum.toString())},s.prototype.gotoHandler=function(){switch(a.SuperVipModel.instance.getState()){case 0:WindowManager.instance.open(111),a.SuperVipModel.instance.flag=!0,this.close();break;case 1:a.SuperVipCtrl.instance.UpdateLookupState();break;case 2:this.copyHandler()}},s.prototype.updataView=function(){if(a.SuperVipModel.instance.datas&&!(a.SuperVipModel.instance.activeCond.length<=0)&&a.SuperVipModel.instance.serviceNum&&a.SuperVipModel.instance.serviceHeadIcon){this.getStateShowView();var t=a.SuperVipModel.instance.activeCond;this.method1Msc.text="方法一:"+this.getTypeByString(t[0])+"元",this.condition1.text=a.SuperVipModel.instance.dayRecharge+"/"+t[0][1],this.method2Msc.text="方法二:"+this.getTypeByString(t[1])+"元",this.condition2.text=a.SuperVipModel.instance.monthRecharge+"/"+t[1][1];for(var e=r.instance.getCfgById(78001)[1],i=e.length,n=0,s=0;s<i;s+=2)this.itemTab[n].dataSource=[e[s],e[s+1],0,null],this.itemTab[n].visible=!0,n++;this.vipMsc.text="【具体活动规则请添加专属客服"+a.SuperVipModel.instance.getTypeByStr()+"后咨询】";var o="assets/others/head_icon/"+a.SuperVipModel.instance.serviceHeadIcon+".jpg";this.headImg.skin=o,1===PlatParams.control.changeSvipQQTxt?(this.qqNum.text="QQ公众号:",this.qqMsc.visible=!0,2===a.SuperVipModel.instance.getState()?(this.qqImg.visible=!1,this.qqGz.visible=!0):this.qqGz.visible=!1):(this.qqNum.text=a.SuperVipModel.instance.getTypeByStr()+"号:",this.qqMsc.visible=!1,this.qqGz.visible=!1)}},s.prototype.getTypeByString=function(t){var e="";switch(t[0]){case 1:e="单日充值"+t[1];break;case 2:e="历史累计充值"+t[1]}return e},s.prototype.getStateShowView=function(){this.vipimg.visible=this.becaomeMsc.visible=this.qqNum.visible=this.method1Msc.visible=this.condition1.visible=this.method2Msc.visible=this.condition2.visible=this.vipMsc.visible=!1,this.wxImg.visible=this.wxTxt.visible=!1;var t=a.SuperVipModel.instance.getState();switch(this.redImg.visible=1==t,i.thisStop(this._btnClip),this.qqText.text=this.wxTxt.text="",this.qqImg.visible=this.wxImg.visible=!1,t){case 0:this.qqImg.visible=!1,this.qqText.text="??????????",this.gotoBtn.label="立即获取",this.becaomeMsc.visible=this.qqNum.visible=this.method1Msc.visible=this.condition1.visible=this.method2Msc.visible=this.condition2.visible=!0,this.mscImg.skin="super_vip/txt_cjvip_06.png",this.cjkfImg.y=155,this.qqNum.y=205,this.qqText.y=202,this.qqText.fontSize=32,this.vipMsc.visible=!1;break;case 1:this.qqImg.visible=!1,this.qqText.text="??????????",this.vipimg.skin="super_vip/txt_cjvip_02.png",this.mscImg.skin="super_vip/txt_cjvip_01.png",this.gotoBtn.label="查看"+a.SuperVipModel.instance.getTypeByStr(),this.vipimg.visible=this.qqNum.visible=this.vipMsc.visible=!0,this.cjkfImg.y=185,this.qqNum.y=235,this.qqText.y=232,this.qqText.fontSize=32,i.thisPlay(this._btnClip);break;case 2:2!=PlatParams.control.changeSvipQQTxt?(this.qqImg.visible=!0,this.qqText.text=a.SuperVipModel.instance.serviceNum.toString()):(this.wxImg.visible=this.wxTxt.visible=!0,this.wxTxt.text=a.SuperVipModel.instance.serviceNum.toString()),this.vipimg.skin="super_vip/txt_cjvip_02.png",this.mscImg.skin="super_vip/txt_cjvip_01.png",this.gotoBtn.label=""+a.SuperVipModel.instance.serviceNum,this.gotoBtn.label="复制"+a.SuperVipModel.instance.getTypeByStr()+"号",this.cjkfImg.y=185,this.qqNum.y=235,this.qqText.y=244,this.vipMsc.visible=!0,this.qqText.fontSize=35}},s.prototype.creatEffect=function(){this._btnClip=i.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChildAt(this._btnClip,14),this._btnClip.pos(this.gotoBtn.x-6,this.gotoBtn.y-8,!0),this._btnClip.scale(.8,.8)},n=s,a.SuperVipAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.store||(t.store={}),n=t.common.CommonUtil,i=e.StoreBasePanel,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=10;var t=n.getIconById(94950001);this.currencyImg.skin=t},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=3,this.onAutoGlobalEvt("PLAYER_UPDATE_XIAN_MO_CION",this,this.updateMoney)},o.prototype.updateMoney=function(){var t=n.getNameByItemId(94950001);this.currencyTxt.text=t+":"+n.bigNumToString(PlayerModel.instance.getCurrencyById(94950001))},s=o,e.FaerieDemonStorePanel=s}(modules=modules||{}),function(t){var s,e,i,o,n;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=1,t.str="other_player_online/image_sxtx_gb01.png",t}s=t.other_player_online||(t.other_player_online={}),i=ui.OtherPlayerOnlineTipsViewUI,o=t.common.CustomClip,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.anchorX=.5,this.y=170,this.x=0,this._bgClip=o.createAndPlay("assets/effect/fireworks_effect.atlas","fireworks_effect",16),this.strongBox.addChildAt(this._bgClip,1),this._bgClip.pos(-72,-73,!0),o.thisStop(this._bgClip)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._bgClip=this.destroyElement(this._bgClip),e.prototype.destroy.call(this,t)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.img1.skin=this.str,Laya.timer.once(s.OtherPlayerOnlineModel.instance.continueTime,this,this.close),this.updataView()},a.prototype.updataView=function(){var t=s.OtherPlayerOnlineModel.instance.getInfoByType(this._type-1);t?t[0]===this._type&&this.showStrongView(t):this.close()},a.prototype.showStrongView=function(t){var e=this;null!=this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),Laya.timer.clear(this,this.close),this.box.x=32,this.strongBox.visible=!0,this.coupleBox.visible=!1,this.headIcon.setInfo(t[4],t[7],t[6]),this.battkeFont.value=t[5].toString(),this.headIcon.vipShowItem.setSVIPandVIP(t[8],t[3],t[9]),this.nameTxt.text=t[2],this.y=170,this.x=0;var i=this,n=s.OtherPlayerOnlineModel.instance.timeArr[this._type];this._modelClipTween=TweenJS.create(i).to({x:CommonConfig.viewWidth/2},n[0]).start().onComplete(function(){5===e._type&&o.thisPlay(e._bgClip),setTimeout(function(){o.thisStop(e._bgClip),i._modelClipTween=TweenJS.create(i).to({x:CommonConfig.viewWidth},n[2]).start().onComplete(function(){i.close()})},n[1])})},a.prototype.close=function(){e.prototype.close.call(this),null!=this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),Laya.timer.clear(this,this.close),this.img1.skin="",s.OtherPlayerOnlineModel.instance.nextWin()},n=a,s.OtherPlayerOnlinePanel=n}(modules=modules||{}),function(n){var e,t,i,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}e=n.other_player_online||(n.other_player_online={}),i=ui.OtherPlayerOnlineTipsViewUI,s=n.chat.ChatModel,t=i,__extends(a,t),a.prototype.initialize=function(){t.prototype.initialize.call(this),this.anchorX=.5,this.y=170,this.x=0},a.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.callbtn,this,this.callbtnHandler),this.onAutoClick(this.closeBtn,this,this.close)},a.prototype.onOpened=function(){t.prototype.onOpened.call(this),Laya.timer.once(e.OtherPlayerOnlineModel.instance.continueTime,this,this.close),this.updataView()},a.prototype.callbtnHandler=function(){var t=PlayerModel.instance.actorId,e=n.config.BlendCfg.instance.getCfgById(83003)[2],i=[5,0,0,e[Math.floor(Math.random()*e.length)],s.instance.virtualItem,[],[],0,0];Channel.instance.publish(3145728,[t,i]),this.close()},a.prototype.updataView=function(){var t=e.OtherPlayerOnlineModel.instance.getInfoByType(1);t||this.close(),2===t[0]&&this.showCoupleView(t)},a.prototype.showCoupleView=function(t){Laya.timer.clear(this,this.close),this.strongBox.visible=!1,this.coupleBox.visible=!0,this.x=CommonConfig.viewWidth/2,this.y=805,this.headCouple.setInfo(t[4],t[7],t[6]),this.coupleName.text=t[2],this.headCouple.vipShowItem.setSVIPandVIP(t[8],t[3],t[9]),Laya.timer.once(e.OtherPlayerOnlineModel.instance.continueTime,this,this.close)},a.prototype.close=function(){t.prototype.close.call(this),Laya.timer.clear(this,this.close)},o=a,e.OtherPlayerOnlineHalfPanel=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.other_player_online||(t.other_player_online={}),i=t.other_player_online.OtherPlayerOnlinePanel,__extends(s,i),s.prototype.onOpened=function(){this._type=3,this.str="other_player_online/image_sxtx_gb03.png",i.prototype.onOpened.call(this),this.box.x=32},n=s,e.OtherPlayerOnlinePanel1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.other_player_online||(t.other_player_online={}),i=t.other_player_online.OtherPlayerOnlinePanel,__extends(s,i),s.prototype.onOpened=function(){this._type=4,this.str="other_player_online/image_sxtx_gb04.png",i.prototype.onOpened.call(this),this.box.x=44},n=s,e.OtherPlayerOnlinePanel2=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.other_player_online||(t.other_player_online={}),i=t.other_player_online.OtherPlayerOnlinePanel,__extends(s,i),s.prototype.onOpened=function(){this._type=5,this.str="other_player_online/image_sxtx_gb05.png",i.prototype.onOpened.call(this),this.box.x=31},n=s,e.OtherPlayerOnlinePanel3=n}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.nine||(t.nine={}),n=ui.NineExitAlertUI,s=t.config.BlendCfg,o=t.dungeon.DungeonCtrl,i=n,__extends(r,i),r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler)},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.callBack=t},r.prototype.onOpened=function(){this._time=.001*s.instance.getCfgById(10812)[1][0],Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},r.prototype.close=function(t,e){i.prototype.close.call(this,t,e),Laya.timer.clear(this,this.loopHandler)},r.prototype.loopHandler=function(){this.okBtn.label="确定("+this._time+")",this._time--,this._time<0&&(Laya.timer.clear(this,this.loopHandler),o.instance.reqEnterScene())},r.prototype.exit=function(){this.close(),this.callBack()},r.prototype.okHandler=function(){this.exit()},a=r,e.NineExitAlert=a}(modules=modules||{}),function(e){var o,n,t,a,i,s,r,l;function h(){return null!==n&&n.apply(this,arguments)||this}o=e.dailyDungeon||(e.dailyDungeon={}),t=ui.DailyDungeonTextAlertUI,a=e.dungeon.DungeonModel,i=laya.events.Event,s=e.common.NumInputCtrl,r=e.dungeon.DungeonCtrl,n=t,__extends(h,n),h.prototype.initialize=function(){n.prototype.initialize.call(this),this.currencyNum=1,this._sdData=a.instance.getSdMoneyOrCishu(1),this._numInputCtrl=new s(this.numInput,this.addBtn,this.minusBtn,this.addTenBtn,this.minusTenBtn)},h.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.sureBtnHandler),this._numInputCtrl.addListeners(),this._numInputCtrl.on(i.CHANGE,this,this.sortcutBuy)},h.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._sdData=a.instance.getSdMoneyOrCishu(1);var t=a.instance.timesTable;t||(this._numInputCtrl.max=0);var e=0;for(var i in t)0<t[i][6]||t[i][8]>e&&(e=t[i][8]);this.currencyNum=e||1,this.maxCount=e,this._numInputCtrl.max=this.maxCount?this.maxCount:1,this._numInputCtrl.value=this.getMaxNum()||1,this.updataView()},h.prototype.updataView=function(){this.sortcutBuy()},h.prototype.sortcutBuy=function(){this.currencyNum=parseInt(this.numInput.text),this.noticeTxt.text="每个副本最大扫荡"+this.currencyNum+"次",this.numInput.text=this.currencyNum.toString();var t=this.getMoney(this.currencyNum);this.currencyCount.color=PlayerModel.instance.ingot>=t?"#1f304d":"#ff3e3e",this.currencyCount.text=""+t},h.prototype.getMoney=function(t){var e=0,i=a.instance.timesTable;for(var n in i)if(!(0<i[n][6])){var s=i[n][8]>t?t:i[n][8];e+=o.DailyDungeonModel.instance.getMapIdAndCoutByMoney(i[n][0],s,i[n][8],i[n][7])}return e},h.prototype.sureBtnHandler=function(){PlayerModel.instance.ingot<this.getMoney(this.currencyNum)?this.glodBtnHandler():PlayerModel.instance.ingot>=this.getMoney(this.currencyNum)&&(r.instance.oneKeySweepShilianCopy(this.currencyNum),this.close())},h.prototype.getMaxNum=function(){for(var t=0;t<this.maxCount;){if(this.getMoney(t)>PlayerModel.instance.ingot){t--;break}t++}return t===this.maxCount&&(t=this.getMoney(t)>PlayerModel.instance.ingot?t-1:t),t},h.prototype.glodBtnHandler=function(){if(!PlatParams.isCloseRecharge)if(0==e.first_pay.FirstPayModel.instance.giveState){var t=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);CommonUtil.alert("温馨提示","元宝不足，是否前往首充？",[t])}else e.money_cat.MoneyCatModel.instance.state?(t=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),CommonUtil.alert("温馨提示","元宝不足，是否前往充值界面充值？",[t])):WindowManager.instance.open(394)},l=h,o.DailyDungeonTextAlert=l}(modules=modules||{}),function(t){var s,i,n,e,o;function a(){return i.call(this)||this}s=t.player_title||(t.player_title={}),n=t.config.DesignationCfg,e=t.common.CustomList,i=ui.PlayerTitleChatAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new e,this._list.width=519,this._list.height=554,this._list.hCount=2,this._list.spaceX=16.8,this._list.spaceY=6,this._list.itemRender=s.PlayerTitleChatItem,this._list.x=0,this._list.y=0,this.listBox.addChild(this._list)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t);var e=n.instance.getAllCahtTitle().concat();e.sort(this.overSort),this._list.datas=e},a.prototype.overSort=function(t,e){var i=s.PlayerTitleModel.instance.getStateChat(t),n=s.PlayerTitleModel.instance.getStateChat(e);return(i=s.PlayerTitleModel.instance.nowChatId===t[0]?999:i)===(n=s.PlayerTitleModel.instance.nowChatId===e[0]?999:n)?1e7<=t[0]||1e7<=e[0]?e[0]-t[0]:t[0]-e[0]:n-i},a.prototype.destroy=function(){this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,s.PlayerTitleChatAlert=o}(modules=modules||{}),function(o){var i,n,t,e,s,a,r;function l(){var t=null!==n&&n.apply(this,arguments)||this;return t._maxConH=539,t._lastPos=0,t}i=o.rehead||(o.rehead={}),t=ui.SetTipsAlertUI,e=o.common.FuncBtnGroup,s=o.config.BlendCfg,a=Laya.Rectangle,n=t,__extends(l,n),l.prototype.initialize=function(){n.prototype.initialize.call(this),this._btnGroup=new e,this._btnGroup.setFuncIds(242,260,353,261,462,623,783),this._btnGroup.setBtns(this.btnGroup_1,this.btnGroup_2,this.btnGroup_4,this.btnGroup_3,this.btnGroup_5,this.btnGroup_6,this.btnGroup_7),this.btnGroup_6.visible=i.ReheadModel.instance.showExitBtn(),this.cfg=s.instance.getCfgById(68002),this.sbtn_tab=[this.sbtn1,this.sbtn2,this.sbtn3,this.sbtn4,this.sbtn5,this.sbtn6,this.sbtn7],this.txt_title_tab=[this.titile1,this.titile2,this.titile3,this.title4,this.title5,this.title6,this.titile7],this.txt_msc_tab=[this.tips1,this.tips2,this.tips3,this.tips4,this.tips5,this.tips6,this.tips7],this.link3.mouseEnabled=!0,this.link3.underline=!0},l.prototype.onEvt=function(){var t=this;n.prototype.onEvt.call(this),this.regAutoRP(this.rpImg2,["reHeadRP"]),this.regAutoRP(this.rpImg4,["reHead1RP"]),this.regAutoRP(this.rpImg3,["reChatFrameRP"]),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoClick(this.sbtn1,this,this.selectOccHandler),this.onAutoClick(this.sbtn2,this,this.selectOccHandler),this.onAutoClick(this.sbtn3,this,this.selectOccHandler3),this.onAutoClick(this.sbtn4,this,this.selectHandler4),this.onAutoClick(this.sbtn5,this,this.selectOccHandler),this.onAutoClick(this.sbtn6,this,this.selectOccHandler),this.onAutoClick(this.sbtn7,this,this.selectOccHandler),this.onAutoClick(this.link3,this,function(){WindowManager.instance.open(1302),t.close()}),this.onAutoEvt(this.listBox,"mousedown",this,this.downHandler),this.onAutoEvt(this.listBox,"mousewheel",this,this.wheelHandler)},l.prototype.downHandler=function(){this._lastPos=this.listBox.mouseY,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseup",this,this.upHandler),Laya.stage.on("mouseout",this,this.upHandler)},l.prototype.moveHandler=function(){if(this._isMouseMove){var t=this._lastPos-this.listBox.mouseY;this.scroll(t),this._lastPos=this.listBox.mouseY}},l.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseup",this,this.upHandler),Laya.stage.off("mouseout",this,this.upHandler)},l.prototype.wheelHandler=function(t){var e=-8*t.delta;this._isMouseMove&&this.scroll(e)},l.prototype.setConHeight=function(t,e){void 0===e&&(e=0),this.listBox.height=t;var i=this._maxConH,n=this.listBox.scrollRect;return n?n.setTo(0,0,this.listBox.width,i):n=new a(0,0,this.listBox.width,i),this.listBox.scrollRect=n,0!=e&&(this.listBox.scrollRect.y=e),this._isMouseMove=t>this._maxConH,i},l.prototype.scroll=function(t){var e=this.listBox.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.listBox.height-this._maxConH&&(e.y=this.listBox.height-this._maxConH),this.listBox.scrollRect=e},l.prototype.onOpened=function(){n.prototype.onOpened.call(this),i.ReheadCtrl.instance.closeOthers(this.dialogId),this._btnGroup.selectedIndex=4;var t=i.ReheadModel.instance.getSetTipsData(),e=o.customData.CustomDataModel.instance.getCustomDataByKey(26)||[];this.sbtn_tab[0].selected=!!o.player.PlayerModel.instance.playerBaseAttr[20],this.sbtn_tab[1].selected=!!o.player.PlayerModel.instance.playerBaseAttr[21],this.sbtn_tab[2].selected=!!t[2],this.sbtn_tab[3].selected=!e[0],this.sbtn_tab[4].selected=!!o.player.PlayerModel.instance.playerBaseAttr[22],this.sbtn_tab[5].selected=!!o.player.PlayerModel.instance.playerBaseAttr[24],this.sbtn_tab[6].selected=!!o.player.PlayerModel.instance.playerBaseAttr[25],this.initiMsc(),this.setConHeight(this.listBox.height)},l.prototype.selectOccHandler=function(){var t=this.sbtn1.selected?1:0,e=this.sbtn2.selected?1:0,i=this.sbtn5.selected?1:0,n=this.sbtn6.selected?1:0,s=this.sbtn7.selected?1:0;o.player.PlayerCtrl.instance.setOnlineRemind(t,e,i,n,s)},l.prototype.selectOccHandler3=function(){var t=this.sbtn3.selected?1:0;i.ReheadModel.instance.keepSetTipsData(2,t)},l.prototype.selectHandler4=function(){var t=this.sbtn4.selected?0:1;CustomDataCtrl.instance.setCustomData(26,[t])},l.prototype.initiMsc=function(){if(this.cfg)for(var t=this.cfg[2]||[],e=0;e<t.length;e+=2){var i=Math.floor(e/2);this.txt_title_tab[i].text=t[e],this.txt_msc_tab[i].text=t[e+1]}},l.prototype.changeHandler=function(){4!=this._btnGroup.selectedIndex&&i.ReheadCtrl.instance.openAlert(this.dialogId,this._btnGroup.selectedIndex)},l.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),n.prototype.destroy.call(this)},r=l,i.SetTipsAlert=r}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.rehead||(t.rehead={}),n=ui.SetSystemAlertUI,s=t.common.FuncBtnGroup,o=t.config.BlendCfg,a=t.customData.CustomDataCtrl,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this._btnGroup=new s,this._btnGroup.setFuncIds(242,260,353,261,462,623,783),this._btnGroup.setBtns(this.btnGroup_1,this.btnGroup_2,this.btnGroup_4,this.btnGroup_3,this.btnGroup_5,this.btnGroup_6,this.btnGroup_7),this.btnGroup_6.visible=e.ReheadModel.instance.showExitBtn(),this.cfg=o.instance.getCfgById(68003),this.sbtn_tab=[this.sbtn1],this.txt_title_tab=[this.titile1],this.txt_msc_tab=[this.tips1]},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.rpImg2,["reHeadRP"]),this.regAutoRP(this.rpImg4,["reHead1RP"]),this.regAutoRP(this.rpImg3,["reChatFrameRP"]),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoClick(this.sbtn1,this,this.selectHandler),this.onAutoClick(this.sbtn2,this,this.selectZhanhunHandler)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ReheadCtrl.instance.closeOthers(this.dialogId),this._btnGroup.selectedIndex=6,this.sbtn_tab[0].selected=GlobalData.noEff,this.sbtn2.selected=GlobalData.noOwnEff,this.initiMsc()},l.prototype.selectZhanhunHandler=function(){var t=this.sbtn2.selected?1:0;a.instance.setCustomData(35,[t])},l.prototype.selectHandler=function(){var t=this.sbtn1.selected?1:0;a.instance.setCustomData(22,[t])},l.prototype.initiMsc=function(){if(this.cfg)for(var t=this.cfg[2]||[],e=0;e<t.length;e+=2){var i=Math.floor(e/2);this.txt_title_tab[i].text=t[e],this.txt_msc_tab[i].text=t[e+1]}},l.prototype.changeHandler=function(){6!=this._btnGroup.selectedIndex&&e.ReheadCtrl.instance.openAlert(this.dialogId,this._btnGroup.selectedIndex)},l.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),i.prototype.destroy.call(this)},r=l,e.SetSystemAlert=r}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.store||(t.store={}),n=t.common.CommonUtil,i=e.StoreBasePanel,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.mallType=10;var t=n.getIconById(95030001);this.currencyImg.skin=t},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._tab.selectedIndex=4,this.onAutoGlobalEvt("WARBAND_COIN_UPDATE",this,this.updateMoney)},o.prototype.updateMoney=function(){var t=n.getNameByItemId(95030001);this.currencyTxt.text=t+":"+n.bigNumToString(PlayerModel.instance.getCurrencyById(95030001))},s=o,e.TeamStorePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.chat||(t.chat={}),i=e.ChatJiuzhouPanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._list.itemRender=e.ChatMessageItem,this._selectBtn=this.teamBtn,this._selectBtnHandler=this.teamBtnHandler,this._type=6,this._messageType="WARBAND_MESSAGE_UPDATE"},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ChatModel.instance.currChatChannel=6,GlobalData.dispatcher.event("SELECT_CHAT_CHANNEL"),this.teamRP.visible=!1,e.ChatModel.instance.setNoseeMessage(6,!1)},s.prototype.getListDatas=function(){return e.ChatModel.instance.warbandChatRecord},n=s,e.ChatTeamPanel=n}(modules=modules||{}),function(t){var e,i;function n(){this.cfgs=GlobalData.getConfig("show_master"),this.showIdsTab={};for(var i={},t=0,e=this.cfgs.length;t<e;t++){var n=this.cfgs[t];i[n[1]]=n[7];var s=n[0],o=this.showIdsTab[s];o||(this.showIdsTab[s]=o=[]),-1===o.indexOf(n[1])&&o.push(n[1])}this.showIdsTab[9]=this.showIdsTab[6].concat(this.showIdsTab[8]);for(t=1;t<=9;++t)this.showIdsTab[t].sort(function(t,e){return i[t]-i[e]})}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getShowIdsByType=function(t){return this.showIdsTab[t]},n.prototype.getCfgByTypeIdLv=function(t,e,i){for(var n=0,s=this.cfgs.length;n<s;n++)if(this.cfgs[n][0]===t&&this.cfgs[n][1]===e&&this.cfgs[n][2]===i)return this.cfgs[n];return null},n.prototype.getCfgByIdLv=function(t,e){for(var i=0,n=this.cfgs.length;i<n;i++)if(this.cfgs[i][1]===t&&this.cfgs[i][2]===e)return this.cfgs[i];return null},i=n,e.ShowMasterCfg=i}(modules=modules||{}),function(I){var b,e,t,i,C,T,w,x,B,P,n;function s(){return null!==e&&e.apply(this,arguments)||this}b=I.showMaster||(I.showMaster={}),t=ui.ShowMasterAlertUI,i=I.common.AvatarClip,C=I.config.ShowMasterCfg,T=I.config.ExteriorCfg,w=I.config.SkillCfg,x=I.bag.BagModel,B=I.common.CustomClip,P=I.config.SkillPureCfg,e=t,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.skillDescTxt,"#4c5e8a","SimHei",24),this.skillDescTxt.style.leading=10,this._modelClip=i.create(1024,1024,1024),this._modelClip.anchorX=this._modelClip.anchorY=.5,this._modelClip.avatarRotationY=180,this.addChildAt(this._modelClip,4),this._modelClip.pos(360,466,!0),CommonUtil.setHTMLPro(this.needTxt,"#ff3e3e","SimHei",28,"center"),this.needTxt.style.leading=3,this._btnClip=CommonUtil.creatEff(this.masterBtn,"btn_light",15),this._btnClip.pos(-5,-8),this._btnClip.scale(.8,.8),B.thisStop(this._btnClip)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.masterBtn,this,this.masterHandler),this.onAutoClick(this.img1,this,this.openDetail,[1]),this.onAutoClick(this.img2,this,this.openDetail,[2]),this.onAutoClick(this.img3,this,this.openDetail,[3]),this.onAutoClick(this.img4,this,this.openDetail,[4]),this.onAutoGlobalEvt("SHOW_MASTER_UPDATE",this,this.updateView)},s.prototype.openDetail=function(t){WindowManager.instance.open(912,[this._showId,t])},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._showId=t},s.prototype.masterHandler=function(){this._showId&&(this._isNotEnough?I.bag.BagUtil.openLackPropAlert(this._itemId,this._needCount):b.ShowMasterCtrl.instance.addShowMasterLevel(this._showId))},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},s.prototype.close=function(){this._modelClipTween&&this._modelClipTween.stop(),e.prototype.close.call(this)},s.prototype.updateView=function(){var t=b.ShowMasterModel.instance.masterTable[this._showId],e=t?t[1]:0;this.masterBtn.label=0<e?"升级":"认主",this.img1.gray=e<1,this.img2.gray=e<2,this.img3.gray=e<3,this.img4.gray=e<4;var i=C.instance.getCfgByIdLv(this._showId,e);this.titleTxt.text=["","神兵认主","仙翼认主","时装认主","天珠认主","仙器认主","仙器法阵认主","灵宠认主","灵宠法阵认主"][i[0]],this.fightClip.value=(i[9]||0).toString();var n=i[0];6===n||8===n?this._modelClip.reset(0,0,0,0,this._showId):this._modelClip.reset(this._showId);var s=T.instance.getCfgById(this._showId);this._modelClip.setActionType("show",4==n?Number.POSITIVE_INFINITY:0),this._modelClip.avatarRotationX=s[6],this._modelClip.avatarRotationY=s[7],this._modelClip.avatarScale=s[10]?s[10]:1,this._modelClip.avatarY=s[9],this._modelClip.avatarX=s[8],1===n?(this._modelClip.scale(.8,.8),this._modelClip.pos(320,460),this._modelClipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-20},1e3).yoyo(!0).repeat(99999999),this._modelClipTween.start()):2===n?(this._modelClip.scale(.8,.8),this._modelClip.pos(330,430)):3===n?(this._modelClip.scale(1,1),this._modelClip.pos(340,480)):4===n?(this._modelClip.scale(1,1),this._modelClip.pos(340,460)):5===n?(this._modelClip.scale(.8,.8),this._modelClip.pos(330,423)):6===n?(this._modelClip.scale(1,1),this._modelClip.pos(330,409)):7===n?(this._modelClip.scale(.8,.8),this._modelClip.pos(330,423)):8===n&&(this._modelClip.scale(1,1),this._modelClip.pos(330,409)),this.nameTxt.text=s[2];var o=b.ShowMasterModel.instance.getStarByShowId(this._showId,n);this.stageClip.value=o.toString();var a=i[6];a=a||C.instance.getCfgByIdLv(this._showId,1)[6];var r=w.instance.getCfgById(a)[2],l=P.instance.getCfgById(CommonUtil.getSkillPureIdById(a))[5];this.skillDescTxt.innerHTML=CommonUtil.formatHtmlStrByColor("#b15315",CommonUtil.getSkillName(a)+"：")+CommonUtil.stringFormat(l,r)+(0==e?CommonUtil.formatHtmlStrByColor("#ff3e3e","(未激活)"):""),this.skillDescTxt.y=824+(98-this.skillDescTxt.contextHeight>>1);var h=i[3];h?o<h?(this.needTxt.innerHTML=s[2]+"达到"+h+"阶可认主",this.masterBtn.visible=!1):(this.needTxt.innerHTML="",this.masterBtn.visible=!0):(this.needTxt.innerHTML=CommonUtil.formatHtmlStrByColor("#168a17","已满级"),this.masterBtn.visible=!1);for(var c=i[5],p=C.instance.getCfgByIdLv(this._showId,e+1),u=p?p[5]:null,d=1;d<=4;++d){var m=2*(d-1),f=2*(d-1)+1;if(c&&c.length>m){var g=(y=I.config.AttrItemCfg.instance.getCfgById(c[m]))[2];this.allBox.getChildByName("name"+d).text=y[1]+":",this.allBox.getChildByName("value"+d).text=g?I.common.AttrUtil.formatFloatNum(c[f])+"%":Math.round(c[f])+"",u&&u.length>m?(this.allBox.getChildByName("tips"+d).visible=!0,this.allBox.getChildByName("addValue"+d).text=g?I.common.AttrUtil.formatFloatNum(u[f])+"%":Math.round(u[f])+""):(this.allBox.getChildByName("tips"+d).visible=!1,this.allBox.getChildByName("addValue"+d).text="")}else if(u&&u.length>m){var y;g=(y=I.config.AttrItemCfg.instance.getCfgById(u[m]))[2],this.allBox.getChildByName("name"+d).text=y[1]+":",this.allBox.getChildByName("value"+d).text=g?"0%":"0",this.allBox.getChildByName("tips"+d).visible=!0,this.allBox.getChildByName("addValue"+d).text=g?I.common.AttrUtil.formatFloatNum(u[f])+"%":Math.round(u[f])+""}else this.allBox.getChildByName("name"+d).text="",this.allBox.getChildByName("value"+d).text="",this.allBox.getChildByName("tips"+d).visible=!1,this.allBox.getChildByName("addValue"+d).text=""}var _=i[4];if(_&&_.length){this.currenyImg.visible=this.currenyCount.visible=!0,this._itemId=_[0],this.currenyImg.skin=CommonUtil.getIconById(this._itemId,!0);var v=x.instance.getItemCountById(this._itemId);v<_[1]?this.currenyCount.color="#ff3e3e":this.currenyCount.color="#168a17",this.currenyCount.text=v+"/"+_[1],this._needCount=_[1]-v,this._isNotEnough=0<this._needCount,this.masterBtn.visible&&!this._isNotEnough?B.thisPlay(this._btnClip):B.thisStop(this._btnClip)}else this.currenyImg.visible=this.currenyCount.visible=!1,B.thisStop(this._btnClip)},n=s,b.ShowMasterAlert=n}(modules=modules||{}),function(y){var _,e,v,I,b,C,t;function T(){return null!==e&&e.apply(this,arguments)||this}_=y.showMaster||(y.showMaster={}),v=y.config.ShowMasterCfg,I=y.config.ExteriorCfg,b=y.config.SkillCfg,C=y.bag.BagModel,e=ui.ShowMasterDetailAlertUI,__extends(T,e),T.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.condTxt,"#4c5e8a","SimHei",26),this.condTxt.style.leading=10,CommonUtil.setHTMLPro(this.addTxt,"#4c5e8a","SimHei",26),this.addTxt.style.leading=10},T.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._showId=t[0],this._lv=t[1]},T.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},T.prototype.updateView=function(){var t,e,i=v.instance.getCfgByIdLv(this._showId,this._lv),n=v.instance.getCfgByIdLv(this._showId,this._lv-1);if(i&&n){this.icon.skin=T.iconArr[this._lv-1],this.titleTxt.text="认主进度";var s=I.instance.getCfgById(this._showId),o=n[4],a=_.ShowMasterModel.instance.getStarByShowId(this._showId),r=C.instance.getItemCountById(o[0]),l=CommonUtil.formatHtmlStrByColor(a<n[3]?"#ff3e3e":"#168a17","("+a+"/"+n[3]+")"),h=CommonUtil.formatHtmlStrByColor(r<o[1]?"#ff3e3e":"#168a17","("+r+"/"+o[1]+")");if(this.condTxt.innerHTML=CommonUtil.formatHtmlStrByColor("#ff3e3e",s[2])+"达到"+n[3]+"阶"+l+"<br>消耗"+o[1]+"个"+CommonUtil.formatHtmlStrByColor("#ff3e3e",CommonUtil.getNameByItemId(o[0]))+h,1==this._lv)t="激活"+s[2]+"认主属性",e="激活"+s[2]+"认主技能";else{var c=i[5],p=n[5],u=c[1]/p[1]-1,d=Math.round(100*u)+"%";i[10]&&(d=y.common.AttrUtil.formatFloatNum(i[10])+"%"),d=CommonUtil.formatHtmlStrByColor("#168a17",d),t=s[2]+"认主基础属性增加"+d;var m=b.instance.getCfgById(i[6]);if(m[1]&&m[1].length){var f=b.instance.getCfgById(n[6]),g=m[1][1]/f[1][1]-1;d=Math.round(100*g)+"%"}else d="";i[11]&&(d=y.common.AttrUtil.formatFloatNum(i[11])+"%"),d=CommonUtil.formatHtmlStrByColor("#168a17",d),e=s[2]+"认主技能效果提升"+d}this.addTxt.innerHTML=t+"<br/>"+e}},T.iconArr=["show_master/icon_wxrz_rh.png","show_master/icon_wxrz_jy.png","show_master/icon_wxrz_hy.png","show_master/icon_wxrz_gy.png"],t=T,_.ShowMasterDetailAlert=t}(modules=modules||{}),function(l){var h,e,t,c,p,u,i,n,s,o,a,r,d,m,f,g,y,_,v,I,b,C;function T(){return null!==e&&e.apply(this,arguments)||this}h=l.showMaster||(l.showMaster={}),t=ui.SbItemUI,c=l.config.ShowMasterCfg,p=l.bag.BagModel,u=l.config.ExteriorCfg,i=l.config.RideFazhenCfg,n=l.config.PetFazhenCfg,s=l.ride.RideModel,o=l.pet.PetModel,a=l.config.FashionMagicShowCfg,r=l.fashion.FashionModel,d=l.config.ShenbingMagicshowCfg,m=l.immortals.ImmortalsModel,f=l.tianZhu.TianZhuModel,g=l.config.TianZhuMagicShowCfg,y=l.illusion.IllusionModel,_=l.config.RideMagicShowCfg,v=l.config.PetMagicShowCfg,I=l.wing.WingModel,b=l.config.WingMagicshowCfg,e=t,__extends(T,e),T.prototype.initialize=function(){e.prototype.initialize.call(this),this.nameTxt.visible=!1},T.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SHOW_MASTER_CHANGE",this,this.updataViwe),this.onAutoGlobalEvt("SHOW_MASTER_UPDATE",this,this.updataViwe)},T.prototype.updataViwe=function(){var t=c.instance.getCfgByIdLv(this._showId,0);if(t){this._type=t[0];var e=h.ShowMasterModel.instance.getStarByShowId(this._showId,this._type),i=this.getCurIdByType();this.usingTxt.visible=i===this._showId;var n=u.instance.getCfgById(this._showId),s=this.getItemByType();if(this.wayTxt.color="#F4F1BB",this.wayTxt.fontSize=18,this.dotImg.visible=!1,0==e)this.wayTxt.text="未激活",this.maskImg.visible=!0,p.instance.getItemCountById(s[0])>=s[1]?(this.wayTxt.text="可激活",this.wayTxt.color="#00ad35",this.qualityImg.gray=this.icon.gray=!1):(this.qualityImg.gray=this.icon.gray=!0,this.wayTxt.text=this.getWay());else{this.maskImg.visible=!1,this.qualityImg.gray=this.icon.gray=!1;var o=h.ShowMasterModel.instance.masterTable[this._showId];if(o&&o[1]){var a=l.config.ShowMasterCfg.instance.getCfgByIdLv(o[0],o[1]);a&&(this.wayTxt.text="认主"+a[8],this.wayTxt.color="#ffffff")}else this.wayTxt.text="未认主",this.wayTxt.color="#ffffff";this.dotImg.visible=h.ShowMasterModel.instance.checkIsAvailable(this._showId)}this.icon.skin="assets/icon/skin/"+n[3]+".png",this.qualityImg.skin="common/dt_tongyong_"+n[4]+".png";var r=n[11]||0;0!=r&&r?(this.gradeImg.skin="common/xiyou"+r+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1}},T.prototype.setData=function(t){e.prototype.setData.call(this,t),this._showId=t,this.updataViwe()},T.prototype.getWay=function(){for(var t=this.getWayByType(),e="",i=0,n=t.length;i<n&&"#"!==t[i];i++)e+=t[i];return e},T.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},T.prototype.getWayByType=function(){switch(this._type){case 6:return i.instance.getDataByIdLvField(this._showId,0,2);case 8:return n.instance.getDataByIdLvField(this._showId,0,2);case 3:return a.instance.getDataByIdLvField(this._showId,0,2);case 1:return d.instance.getDataByIdLvField(this._showId,0,2);case 4:return g.instance.getDataByIdLvField(this._showId,0,2);case 5:return _.instance.getDataByIdLvField(this._showId,0,2);case 7:return v.instance.getDataByIdLvField(this._showId,0,2);case 2:return b.instance.getDataByIdLvField(this._showId,0,2);default:return""}},T.prototype.getCurIdByType=function(){switch(this._type){case 6:return s.instance.fazhenId;case 8:return o.instance.fazhenId;case 3:return r.instance.curShowId-PlayerModel.instance.occ;case 1:return m.instance.curShowId;case 4:return f.instance.curShowId;case 5:return y.instance.rideMagicShowId;case 7:return y.instance.magicShowId;case 2:return I.instance.curShowId;default:return-1}},T.prototype.getItemByType=function(){var t=h.ShowMasterModel.instance.getStarByShowId(this._showId,this._type);switch(this._type){case 6:return i.instance.getDataByIdLvField(this._showId,t,1);case 8:return n.instance.getDataByIdLvField(this._showId,t,1);case 3:return a.instance.getDataByIdLvField(this._showId,t,1);case 1:return d.instance.getDataByIdLvField(this._showId,t,1);case 4:return g.instance.getDataByIdLvField(this._showId,t,1);case 5:return _.instance.getDataByIdLvField(this._showId,t,1);case 7:return v.instance.getDataByIdLvField(this._showId,t,1);case 2:return b.instance.getDataByIdLvField(this._showId,t,1);default:return[]}},C=T,h.ShowMasterItem=C}(modules=modules||{}),function(e){var c,n,t,i,s,o,p,u,d,m,f,a;function r(){return null!==n&&n.apply(this,arguments)||this}c=e.showMaster||(e.showMaster={}),t=ui.ShowMasterBaseViewUI,i=e.common.AvatarClip,s=e.common.SimpleList,o=e.showMaster.ShowMasterItem,p=e.config.ShowMasterCfg,u=e.config.SkillCfg,d=e.config.ExteriorCfg,m=e.common.CustomClip,f=e.config.SkillPureCfg,n=t,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.skillDesTxt,"#4c5e8a","SimHei",24),this.skillDesTxt.style.leading=10,this.list=s.create(o,100,100,1,5,20,5),this.list.pos(66,800,!0),this.list.size(600,240),this.addChild(this.list),this._modelClip=i.create(1024,1024,1024),this._modelClip.anchorX=this._modelClip.anchorY=.5,this._modelClip.avatarRotationY=180,this.addChildAt(this._modelClip,2),this._modelClip.pos(360,466,!0),this._btnClip=CommonUtil.creatEff(this.masterBtn,"btn_light",15),this._btnClip.pos(-5,-8),this._btnClip.scale(.8,.8),m.thisStop(this._btnClip)},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.switchBtn,this,this.switchHandler),this.onAutoClick(this.masterBtn,this,this.masterHandler),this.onAutoEvt(this.list,"select",this,this.selectShow),this.onAutoGlobalEvt("SHOW_MASTER_UPDATE",this,this.updateInfo)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this);for(var t=this.list.datas,e=0,i=0;i<t.length;++i)if(c.ShowMasterModel.instance.checkIsAvailable(t[i])){e=i;break}this.list.datas=t,this.list.selectedIndex=e,this.updateInfo(this._type),this.updateCurShow()},r.prototype.setType=function(t){this._type=t,this.list.datas=e.config.ShowMasterCfg.instance.getShowIdsByType(t)},r.prototype.switchHandler=function(){},r.prototype.masterHandler=function(){WindowManager.instance.open(878,this.selectedShowId)},r.prototype.updateInfo=function(t){t===this._type&&this.selectShow()},r.prototype.updateCurShow=function(){for(var t=this.list.items,e=0;e<t.length;++e)t[e].data=t[e].data},r.prototype.selectShow=function(){var t=this;if(this.selectedShowId=this.list.selectedData,this.selectedShowId){this._modelClip.visible=!1;var e=Math.floor(.001*this.selectedShowId);10===e||9===e?this._modelClip.reset(0,0,0,0,this.selectedShowId):this._modelClip.reset(this.selectedShowId);var i=d.instance.getCfgById(this.selectedShowId);this._modelClip.avatarRotationX=i[6],this._modelClip.avatarRotationY=i[7],this._modelClip.avatarScale=i[10]?i[10]:1,this._modelClip.avatarY=i[9],this._modelClip.avatarX=i[8],Laya.timer.once(100,this,function(){t._modelClip.visible=!0}),this.observationItem.data=[[this._modelClip,Math.round(this.selectedShowId/1e3)]];var n=c.ShowMasterModel.instance.masterTable[this.selectedShowId],s=n?n[1]:0;this.nameTxt.text=i[2];var o=p.instance.getCfgByIdLv(this.selectedShowId,s),a=o[6];a?this.skillIcon.gray=!1:(a=p.instance.getCfgByIdLv(this.selectedShowId,1)[6],this.skillIcon.gray=!0);var r=u.instance.getCfgById(a)[2],l=f.instance.getCfgById(CommonUtil.getSkillPureIdById(a))[5];this.skillDesTxt.innerHTML=CommonUtil.formatHtmlStrByColor("#b15315",CommonUtil.getSkillName(a)+"：")+CommonUtil.stringFormat(l,r)+(0==s?CommonUtil.formatHtmlStrByColor("#ff3e3e","(未激活)"):""),this.skillDesTxt.y=644+(120-this.skillDesTxt.contextHeight>>1),this.skillIcon.skin="assets/icon/skill/"+CommonUtil.getSkillIcon(a)+".png",0===s?(this.gradeClip.visible=this.gradeImg.visible=!1,this.notActivedImg.visible=!0):(this.gradeClip.visible=this.gradeImg.visible=!0,this.notActivedImg.visible=!1,this.gradeClip.value=s+""),this.fightClip.value=c.ShowMasterModel.instance.getFightByType(this._type).toString();var h=c.ShowMasterModel.instance.getStarByShowId(this.selectedShowId,o[0]);h?(this.gradeClip.visible=this.gradeImg.visible=!0,this.notActivedImg.visible=!1,this.gradeClip.value=h.toString()):(this.gradeClip.visible=this.gradeImg.visible=!1,this.notActivedImg.visible=!0,this.switchBtn.visible=!1),c.ShowMasterModel.instance.checkIsAvailable(this.selectedShowId)?m.thisPlay(this._btnClip):m.thisStop(this._btnClip),this.updateCurShow()}},r.prototype.setCurShowId=function(t){9===Math.floor(1e-4*t)?this.usingImg.visible=Math.floor(.1*t)===Math.floor(.1*this.selectedShowId):this.usingImg.visible=t===this.selectedShowId;var e=c.ShowMasterModel.instance.getStarByShowId(this.selectedShowId);this.switchBtn.visible=!this.usingImg.visible&&0<e},r.prototype.gotoPanel=function(t){WindowManager.instance.open(t)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this.observationItem=this.destroyElement(this.observationItem),n.prototype.destroy.call(this,t)},a=r,c.ShowMasterBasePanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.fashion.FashionCtrl,s=t.fashion.FashionModel,o=t.showMaster.ShowMasterBasePanel,i=o,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(3)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn1,this,this.gotoPanel,[319]),this.onAutoClick(this.btn2,this,this.gotoPanel,[320]),this.onAutoClick(this.btn3,this,this.gotoPanel,[321]),this.onAutoGlobalEvt("FASHION_INFO_UPDATE",this,this.updateCurShow),this.regAutoRP(this.rp1,["fashionShengJiRP","fashionShengJiMatRP"]),this.regAutoRP(this.rp2,["fashionHuanHuaJiPinRP","fashionHuanHuaZhenPinRP","fashionHuanHuaJuePinRP","fashionHuanHuaTeShuRP"]),this.regAutoRP(this.rp3,["fashionFuHunRP"]),this.regAutoRP(this.rp4,["fashionMasterRP"])},r.prototype.switchHandler=function(){n.instance.changeFashionMagicShow(this.selectedShowId)},r.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show",0);var t=s.instance.fashionInfo;t&&this.setCurShowId(t[3])},a=r,e.FashionMasterPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.immortals.ImmortalsCtrl,s=t.immortals.ImmortalsModel,i=e.ShowMasterBasePanel,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(1)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),i.prototype.destroy.call(this,t)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._modelClip.y=466,this._modelClipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-20},1e3).yoyo(!0).repeat(99999999),this._modelClipTween.start()},a.prototype.close=function(){this._modelClipTween&&this._modelClipTween.stop(),i.prototype.close.call(this)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn1,this,this.gotoPanel,[83]),this.onAutoClick(this.btn2,this,this.gotoPanel,[120]),this.onAutoClick(this.btn3,this,this.gotoPanel,[121]),this.onAutoGlobalEvt("SHENBING_UPDATE",this,this.updateCurShow),this.onAutoGlobalEvt("SBCHANGE_HUANHUA",this,this.updateCurShow),this.regAutoRP(this.rp1,["immortalsShengjiRP"]),this.regAutoRP(this.rp2,["immortalsHuanhuaJipinRP","immortalsHuanhuaZhenpinRP","immortalsHuanhuaJuepinRP","immortalsHuanhuateShuRP"]),this.regAutoRP(this.rp3,["immortalsFuhunRP"]),this.regAutoRP(this.rp4,["immortalMasterRP"])},a.prototype.switchHandler=function(){n.instance.changeMagicShow(this.selectedShowId)},a.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show",0),s.instance.info&&this.setCurShowId(s.instance.curShowId)},o=a,e.ImmortalMasterPanel=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.wing.WingCtrl,s=t.wing.WingModel,o=t.showMaster.ShowMasterBasePanel,i=o,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(2)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn1,this,this.gotoPanel,[91]),this.onAutoClick(this.btn2,this,this.gotoPanel,[122]),this.onAutoClick(this.btn3,this,this.gotoPanel,[123]),this.onAutoGlobalEvt("WING_UPDATE",this,this.updateCurShow),this.onAutoGlobalEvt("XYCHANGE_HUANHUA",this,this.updateCurShow),this.regAutoRP(this.rp1,["wingShengjiRP"]),this.regAutoRP(this.rp2,["wingHuanhuaJipinRP","wingHuanhuaZhenpinRP","wingHuanhuaJuepinRP"]),this.regAutoRP(this.rp3,["wingFuhunRP"]),this.regAutoRP(this.rp4,["wingMasterRP"])},r.prototype.switchHandler=function(){n.instance.changeMagicShow(this.selectedShowId)},r.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show",0),s.instance.info&&this.setCurShowId(s.instance.curShowId)},a=r,e.WingMasterPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.tianZhu.TianZhuModel,s=t.tianZhu.TianZhuCtrl,o=t.showMaster.ShowMasterBasePanel,i=o,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(4)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn1,this,this.gotoPanel,[322]),this.onAutoClick(this.btn2,this,this.gotoPanel,[323]),this.onAutoClick(this.btn3,this,this.gotoPanel,[324]),this.onAutoGlobalEvt("TIAN_ZHU_INFO_UPDATE",this,this.updateCurShow),this.regAutoRP(this.rp1,["tianZhuShengJiRP","tianZhuShengJiMatRP"]),this.regAutoRP(this.rp2,["tianZhuHuanHuaJiPinRP","tianZhuHuanHuaZhenPinRP","tianZhuHuanHuaJuePinRP"]),this.regAutoRP(this.rp3,["tianZhuFuHunRP"]),this.regAutoRP(this.rp4,["pearlMasterRP"])},r.prototype.switchHandler=function(){s.instance.changeTianZhuMagicShow(this.selectedShowId)},r.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show");var t=n.instance.tianZhuInfo;t&&this.setCurShowId(t[3])},a=r,e.PearlMasterPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.showMaster.ShowMasterBasePanel,s=t.illusion.IllusionModel,o=t.pet.PetModel,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(5),this.btn1.visible=this.btn3.visible=this.rp1.visible=this.rp3.visible=!1,this.btn2.x=200,this.rp2.x=330,this.btn4.x=372,this.rp4.x=502,this._modelClip.y=422,this._modelClip.scale(.9,.9)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn2,this,this.gotoPanel,[11]),this.onAutoGlobalEvt("RIDE_HUANHUA_SHOWID",this,this.updateCurShow),this.regAutoRP(this.rp2,["weaponIllusionRP"]),this.regAutoRP(this.rp4,["weaponIllusionMasterRP"])},r.prototype.switchHandler=function(){IllusionCtrl.instance.changeRideMagicShow(this.selectedShowId)},r.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show",0),this.setCurShowId(s.instance.rideMagicShowId)},r.prototype.onOpened=function(){o.instance.panelType=0,i.prototype.onOpened.call(this)},a=r,e.WeaponIllusionMasterPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.showMaster.ShowMasterBasePanel,s=t.illusion.IllusionModel,o=t.pet.PetModel,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(7),this.btn1.visible=this.btn3.visible=this.rp1.visible=this.rp3.visible=!1,this.btn2.x=200,this.rp2.x=330,this.btn4.x=372,this.rp4.x=502,this._modelClip.y=446},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn2,this,this.gotoPanel,[168]),this.onAutoGlobalEvt("PET_HUANHUA_SHOWID",this,this.updateCurShow),this.regAutoRP(this.rp2,["petIllusionRP"]),this.regAutoRP(this.rp4,["petIllusionMasterRP"])},r.prototype.switchHandler=function(){IllusionCtrl.instance.changeMagicShow(this.selectedShowId)},r.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show",0),this.setCurShowId(s.instance.magicShowId)},r.prototype.onOpened=function(){o.instance.panelType=1,i.prototype.onOpened.call(this)},a=r,e.PetIllusionMasterPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.showMaster.ShowMasterBasePanel,s=t.ride.RideModel,o=t.ride.RideCtrl,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(6),this.btn1.visible=this.btn3.visible=this.rp1.visible=this.rp3.visible=!1,this.btn2.label="法阵",this.btn2.x=200,this.rp2.x=330,this.btn4.x=372,this.rp4.x=502,this._modelClip.y=423},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn2,this,this.gotoPanel,[179]),this.onAutoGlobalEvt("WEAPONFZCHANGE_HUANHUA",this,this.updateCurShow),this.regAutoRP(this.rp2,["weaponFazhenJipinRP","weaponFazhenZhenpinRP","weaponFazhenJuepinRP"]),this.regAutoRP(this.rp4,["weaponCircleMasterRP"])},r.prototype.switchHandler=function(){o.instance.changeMagic(this.selectedShowId)},r.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show",0),this.setCurShowId(s.instance.fazhenId)},a=r,e.WeaponCircleMasterPanel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.showMaster.ShowMasterBasePanel,s=t.pet.PetModel,o=t.pet.PetCtrl,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(8),this.btn1.visible=this.btn3.visible=this.rp1.visible=this.rp3.visible=!1,this.btn2.label="法阵",this.btn2.x=200,this.rp2.x=330,this.btn4.x=372,this.rp4.x=502,this._modelClip.y=423},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn2,this,this.gotoPanel,[169]),this.onAutoGlobalEvt("FZCHANGE_HUANHUA",this,this.updateCurShow),this.regAutoRP(this.rp2,["petFazhenJipinRP","petFazhenZhenpinRP","petFazhenJuepinRP"]),this.regAutoRP(this.rp4,["petCircleMasterRP"])},r.prototype.switchHandler=function(){o.instance.changeMagic(this.selectedShowId)},r.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show",0),this.setCurShowId(s.instance.fazhenId)},a=r,e.PetCircleMasterPanel=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.rehead||(t.rehead={}),n=t.common.FuncBtnGroup,i=ui.CancellationReturnAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._btnGroup=new n,this._btnGroup.setFuncIds(242,260,353,261,462,623,783),this._btnGroup.setBtns(this.btnGroup_1,this.btnGroup_2,this.btnGroup_4,this.btnGroup_3,this.btnGroup_5,this.btnGroup_6,this.btnGroup_7),this.btnGroup_6.visible=e.ReheadModel.instance.showExitBtn()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.rpImg2,["reHeadRP"]),this.regAutoRP(this.rpImg4,["reHead1RP"]),this.regAutoRP(this.rpImg3,["reChatFrameRP"]),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoClick(this.btn,this,this.btnHandler)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.ReheadCtrl.instance.closeOthers(this.dialogId),this._btnGroup.selectedIndex=5},o.prototype.btnHandler=function(){console.log("退出接口"),t.common.PlatParams.logout()},o.prototype.changeHandler=function(){5!=this._btnGroup.selectedIndex&&e.ReheadCtrl.instance.openAlert(this.dialogId,this._btnGroup.selectedIndex)},o.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),i.prototype.destroy.call(this)},s=o,e.CancellationReturnAlert=s}(modules=modules||{}),function(i){var y,n,m,_,v,I,f,t;function e(){return null!==n&&n.apply(this,arguments)||this}y=i.xiLian||(i.xiLian={}),m=i.config.AttrItemCfg,_=i.config.BlendCfg,v=i.bag.BagModel,I=i.bag.BagUtil,f=i.common.CustomClip,n=ui.XiLianAlertlUI,__extends(e,n),e.prototype.initialize=function(){n.prototype.initialize.call(this),this.attrArr=[this.attrText1,this.attrText2,this.attrText3,this.attrText4,this.attrText5],this.attrTempArr=[this.attrText6,this.attrText7,this.attrText8,this.attrText9,this.attrText10],this.stateTxtArr=[this.stateTxt1,this.stateTxt2,this.stateTxt3,this.stateTxt4,this.stateTxt5],this.lockBtnArr=[this.lockBtn1,this.lockBtn2,this.lockBtn3,this.lockBtn4,this.lockBtn5],this.btnMscArr=[this.btn1Msc,this.btn2Msc,this.btn3Msc],this.iconArr=[this.icon1,this.icon2,this.icon3],this.btnArr=[this.useGoldBtn,this.btn2,this.btn3];for(var t=0;t<this.stateTxtArr.length;t++)this.stateTxtArr[t].visible=!1;CommonUtil.setHTMLPro(this.useGoldMsc,"#b15315","SimHei",24),this.useGoldMsc.style.wordWrap=!1,this._openUnlockNum=0,this.btn1.selected=!0,this._btnClip=f.create("assets/effect/btn_light.atlas","btn_light",7),this._btnClip.pos(this.againXiLianBtn.x-5,this.againXiLianBtn.y-10,!0),this.addChild(this._btnClip),f.thisStop(this._btnClip)},e.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t),this.selectIndex=t[0],this.currencyType=t[1]},e.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.useGold=!1,this.updataView()},e.prototype.onEvt=function(){n.prototype.onEvt.call(this);for(var t=0;t<3;t++)this.onAutoClick(this.btnArr[t],this,this.btnHandler,[t]);t=0;for(var e=this.lockBtnArr.length;t<e;t++)this.onAutoClick(this.lockBtnArr[t],this,this.lockHandler,[t]);this.onAutoClick(this.againXiLianBtn,this,this.againXiLianHandler),this.onAutoClick(this.replaceBtn,this,this.replaceHandler),this.onAutoGlobalEvt("XI_LIAN_INFO_UPDATE",this,this.updataView),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.updataView),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIP",this,this.updataView),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.updataView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updataView),this.onAutoGlobalEvt("PLAYER_BORN_LEV",this,this.updataView),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},e.prototype.updatePlatChangeRecharge=function(){this.attrText5.visible=this.stateTxt5.visible=this.lockBtn5.visible=this.attrText10.visible=!PlatParams.isCloseRecharge},Object.defineProperty(e.prototype,"useGold",{get:function(){return this._useGold},set:function(t){this._useGold=t,this.useGoldBtn.selected=t},enumerable:!0,configurable:!0}),e.prototype.updataView=function(){var t=y.XiLianModel.instance.xiLianInfo;if(t){this._lockNum=0;var e=-1;this._openUnlockNum=0,this._seniorUnlock=!1,this._hasFreeOpen=!1;for(var i=0;i<this.stateTxtArr.length;i++)this.stateTxtArr[i].visible=!1;for(var n=t[1],s=null,o=(i=0,n.length);i<o;i++)if(n[i][0]===this.selectIndex){s=n[i];break}var a=s[1];for(i=0;i<a.length;i++){var r=a[i][0];if(1===a[i][5])4===r?(this.attrArr[r].text="第"+(r+1)+"条洗炼槽",this.stateTxtArr[r].text="(SVIP"+_.instance.getCfgById(38010)[1][0]+"开启)"):this.attrArr[r].text="第"+(r+1)+"条洗炼槽",this.attrArr[r].color="#1f304d",this.stateTxtArr[r].visible=!0,this.lockBtnArr[r].visible=!1;else if(2===a[i][5]){var l=(d=a[i])[1],h=m.instance.getCfgById(l[0]),c=l[1];h&&(h[2]?this.attrArr[r].text=h[1]+"+"+(100*c).toFixed(2)+"%("+(100*d[2]).toFixed(2)+"%~"+(100*d[3]).toFixed(2)+"%)":this.attrArr[r].text=h[1]+"+"+Math.round(c)+"("+d[2]+"~"+d[3]+")"),this.attrArr[r].color=CommonUtil.getColorByQuality(l[2]-1);var p=d[4];this.lockBtnArr[r].skin=p?"xi_lian/btn_zbxl_lock_1.png":"xi_lian/btn_zbxl_lock_0.png",p?this._lockNum++:(this._openUnlockNum++,e=i,4<=l[2]&&(this._seniorUnlock=!0)),this.stateTxtArr[r].visible=!1,this.lockBtnArr[r].visible=!0}else this.attrArr[r].visible=!0,4===r?(this.attrArr[r].text="第"+(r+1)+"条洗炼槽",this.stateTxtArr[r].text="(SVIP"+_.instance.getCfgById(38010)[1][0]+"开启)"):(0===_.instance.getCfgById(38008)[1][r]&&(this._hasFreeOpen=!0),this.attrArr[r].text="第"+(r+1)+"条洗炼槽",this.stateTxtArr[r].text="(未开启)"),this.stateTxtArr[r].visible=!0,this.attrArr[r].color="#1f304d",this.lockBtnArr[r].visible=!1}for(1===this._openUnlockNum&&(this.lockBtnArr[e].visible=!1),i=0,o=this.attrTempArr.length;i<o;i++)this.attrTempArr[i].text="";if(y.XiLianModel.instance.xilianTmp){var u=y.XiLianModel.instance.xilianTmp[1];for(i=0,o=u.length;i<o;i++){var d;r=(d=u[i])[0],l=d[1],h=m.instance.getCfgById(l[0]),c=l[1],h&&(h[2]?this.attrTempArr[r].text=h[1]+"+"+(100*c).toFixed(2)+"%("+(100*d[2]).toFixed(2)+"%~"+(100*d[3]).toFixed(2)+"%)":this.attrTempArr[r].text=h[1]+"+"+Math.round(c)+"("+d[2]+"~"+d[3]+")"),this.attrTempArr[r].color=CommonUtil.getColorByQuality(l[2]-1)}0<t[0]?f.thisPlay(this._btnClip):f.thisStop(this._btnClip)}this.updataBtnView(),PlatParams.isCloseRecharge&&(this.attrText5.visible=this.stateTxt5.visible=this.lockBtn5.visible=this.attrText10.visible=!1)}},e.prototype.updateMat=function(){for(var t=[38005,38011,38012],e=[10230001,10240001,10250001],i=0;i<3;i++){var n=_.instance.getCfgById(t[i])[1][this._lockNum],s=v.instance.getItemCountById(e[i]);this.iconArr[i].skin=CommonUtil.getIconById(e[i],!0),this.btnMscArr[i].text=s+"/"+n,this.btnMscArr[i].color=n<=s?"#1f304d":"#FF3E3E"}var o=y.XiLianModel.instance.xiLianInfo[0],a=_.instance.getCfgById(38009)[1][0];this.timesTxt.text=o+"/"+a,this.timesTxt.color=0===o?"#FF3E3E":"#168A17";var r=_.instance.getCfgById(38006)[1][this._lockNum];1===this.currencyType?(this.useGoldMsc.innerHTML='消耗极品洗炼石必出一条<span color="#EA8706">橙色及以上</span>属性',this.useGoldBtn.visible=!1):2===this.currencyType?(this.useGoldMsc.innerHTML='消耗完美洗炼石必出一条<span color="#FF3E3E">红色</span>属性',this.useGoldBtn.visible=!1):(this.useGoldMsc.innerHTML='消耗<span color="#168A17">'+r+'元宝</span>必出一条<span color="#d738f4">紫色以上</span>属性',this.useGoldBtn.visible=!0)},e.prototype.updataBtnView=function(){if(-1===this.currencyType)for(var t=0;t<3;t++)this.btnArr[t].selected=!1;else if(-1<this.currencyType&&this.currencyType<3)for(t=0;t<3;t++)t===this.currencyType?this.btnArr[t].selected=!0:this.btnArr[t].selected=!1;this.updateMat()},e.prototype.lockHandler=function(t){if(-1!==this.selectIndex){var e=y.XiLianModel.instance.getSlotInfoByPartAndSlot(this.selectIndex,t);if(y.XiLianModel.instance.xilianTmp&&0<y.XiLianModel.instance.xilianTmp[1].length){var i=Handler.create(y.XiLianCtrl.instance,y.XiLianCtrl.instance.lockXilian,[!e[4],this.selectIndex,t]);CommonUtil.alert("提示",'您有<span color="#FF3E3E">洗炼后属性没有替换</span>，重新锁定<span color="#b15315">将放弃这批属性</span>，是否确定继续锁定？',[i],[],null,!0,null,6)}else y.XiLianCtrl.instance.lockXilian(!e[4],this.selectIndex,t)}},e.prototype.btnHandler=function(t){if(t===this.currencyType?this.currencyType=-1:this.currencyType=t,0===this.currencyType){var e=_.instance.getCfgById(38006)[1][this._lockNum];PlayerModel.instance.ingot<e&&(CommonUtil.goldNotEnoughAlert(),this.currencyType=-1)}this.updataBtnView()},e.prototype.againXiLianHandler=function(){var t=!1,e=y.XiLianModel.instance.xilianTmp,i=y.XiLianModel.instance.xiLianInfo;if(i){for(var n=i[1],s=null,o=0,a=n.length;o<a;o++)if(n[o][0]===this.selectIndex){s=n[o];break}var r=s[1];if(e&&r){var l=y.XiLianModel.instance.xilianTmp[1];for(o=0,a=l.length;o<a;o++)if(4<=l[o][1][2]&&!r[o][4]){t=!0;break}}if(0<this._openUnlockNum){var h=_.instance.getCfgById(38005)[1][this._lockNum],c=v.instance.getItemCountById(10230001),p=y.XiLianModel.instance.xiLianInfo;if(h<=c||p&&0<p[0]){var u=!1;if(1===this.currencyType||2===this.currencyType){var d=1===this.currencyType?10240001:10250001,m=v.instance.getItemCountById(d),f=_.instance.getCfgById(1===this.currencyType?38011:38012)[1][this._lockNum];f<=m?u=!0:I.openLackPropAlert(d,f-m)}else u=!0;if(u)if(t){var g=Handler.create(y.XiLianCtrl.instance,y.XiLianCtrl.instance.equipXilian,[this.selectIndex,0===this.currencyType,0<this.currencyType?this.currencyType:0]);CommonUtil.alert("提示",'您有<span color="#FF3E3E">高级属性没有替换</span>，重新洗炼将生成新的属性，是否继续洗炼？',[g],[],null,!0,null,1)}else y.XiLianCtrl.instance.equipXilian(this.selectIndex,0===this.currencyType,0<this.currencyType?this.currencyType:0)}else I.openLackPropAlert(10230001,h-c)}else CommonUtil.alert("提示",'第一条洗炼槽位<span color="#168a17">免费开启</span>，是否确定开启？',[Handler.create(this,this.openSlot,[0])])}},e.prototype.replaceHandler=function(){if(y.XiLianModel.instance.xilianTmp)if(this._seniorUnlock){var t=Handler.create(y.XiLianCtrl.instance,y.XiLianCtrl.instance.XilianReplace,[this.selectIndex]);CommonUtil.alert("提示",'您有<span color="#FF3E3E">高级属性没有上锁</span>，新属性将替换该属性，是否继续替换？',[t],[],null,!0,null,4)}else y.XiLianCtrl.instance.XilianReplace(this.selectIndex)},e.prototype.close=function(){var t=!1;if(y.XiLianModel.instance.xilianTmp&&(t=0<y.XiLianModel.instance.xilianTmp[1].length),t){var e=Handler.create(this,this.close2,null);CommonUtil.alert("提示",'您有<span color="#FF3E3E">洗炼属性没有替换</span>，退出后将放弃这次替换，是否继续退出？',[e],[],null,!0,null,4)}else y.XiLianCtrl.instance.xilianClearTmpAttr(),n.prototype.close.call(this)},e.prototype.close2=function(){y.XiLianCtrl.instance.xilianClearTmpAttr(),n.prototype.close.call(this)},e.prototype.openSlot=function(t){var e=_.instance.getCfgById(38008)[1][t]||0;PlayerModel.instance.ingot>=e?y.XiLianCtrl.instance.openXilian(this.selectIndex,t):this.goldNotEnoughAlert(Handler.create(this,this.close2,null))},e.prototype.goldNotEnoughAlert=function(t){if(void 0===t&&(t=null),!PlatParams.isCloseRecharge)if(0==i.first_pay.FirstPayModel.instance.giveState){var e=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);t&&(e=t),CommonUtil.alert("温馨提示","元宝不足，是否前往首充？")}else i.money_cat.MoneyCatModel.instance.state?(e=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),t&&(e=t),CommonUtil.alert("温馨提示","元宝不足，是否前往充值界面充值？",[e])):WindowManager.instance.open(394)},e.prototype.destroy=function(){this.attrArr.length=0,this.attrArr=null,this.attrTempArr.length=0,this.attrTempArr=null,this.stateTxtArr.length=0,this.stateTxtArr=null,this.lockBtnArr.length=0,this.lockBtnArr=null,this.btnMscArr.length=0,this.btnMscArr=null,this.iconArr.length=0,this.iconArr=null,this.btnArr.length=0,this.btnArr=null,n.prototype.destroy.call(this)},t=e,y.XiLianAlert=t}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){return null!==i&&i.apply(this,arguments)||this}e=t.showMaster||(t.showMaster={}),n=t.showMaster.ShowMasterBasePanel,s=t.ride.RideModel,o=t.ride.RideCtrl,a=t.pet.PetModel,r=t.config.ShowMasterCfg,i=n,__extends(h,i),h.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.setType(9),this.btn1.visible=this.rp1.visible=!1,this.btn2.label="仙器法阵",this.btn2.x=113,this.rp2.x=247,this.btn3.label="灵宠法阵",this.btn3.x=284,this.rp3.x=418,this.btn4.x=455,this.rp4.x=589,this._modelClip.y=423},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn2,this,this.gotoPanel,[179]),this.onAutoClick(this.btn3,this,this.gotoPanel,[169]),this.onAutoGlobalEvt("WEAPONFZCHANGE_HUANHUA",this,this.updateCurShow),this.onAutoGlobalEvt("FZCHANGE_HUANHUA",this,this.updateCurShow),this.regAutoRP(this.rp2,["weaponFazhenJipinRP","weaponFazhenZhenpinRP","weaponFazhenJuepinRP"]),this.regAutoRP(this.rp3,["petFazhenJipinRP","petFazhenZhenpinRP","petFazhenJuepinRP"]),this.regAutoRP(this.rp4,["weaponCircleMasterRP","petCircleMasterRP"])},h.prototype.switchHandler=function(){var t=r.instance.getCfgByIdLv(this.selectedShowId,0);6===t[0]?o.instance.changeMagic(this.selectedShowId):8===t[0]&&PetCtrl.instance.changeMagic(this.selectedShowId)},h.prototype.updateCurShow=function(){i.prototype.updateCurShow.call(this),this._modelClip.setActionType("show",0);var t=r.instance.getCfgByIdLv(this.selectedShowId,0);6===t[0]?this.setCurShowId(s.instance.fazhenId):8===t[0]&&this.setCurShowId(a.instance.fazhenId)},l=h,e.CircleMasterPanel=l}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.commonAlert||(t.commonAlert={}),n=ui.CommonTxtAlertUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.okBtn.visible=this.cancelBtn.visible=this.noticeBtn.visible=this.closeBtn.visible=this.noticeTxt.visible=this.tipTxt.visible=this.hintTxt.visible=!1,CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24,"left","middle"),this.contentTxt.style.lineHeight=28,this.contentTxt.mouseEnabled=!1,this.closeOnSide=!1},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.titleTxt.text=t[0],this.contentTxt.innerHTML=t[1]},s=o,e.LockTxtAlert=s}(modules=modules||{}),function(t){var e,r,i;function n(){}e=t.common||(t.common={}),r=t.player.PlayerModel,n.askPay=function(t,e){var i=r.instance.playerBaseAttr,n=r.instance.actorId,s=i[0],o=i[4],a=i[1];ask_pay(n,s,o,a,t,e)},n.playerCreate=function(){var t=r.instance.playerBaseAttr;player_create(r.instance.actorId,t[0],t[4],t[14])},n.playerLogin=function(){var t=r.instance.playerBaseAttr,e=100*t[2]+t[3];player_login(r.instance.actorId,t[0],t[4],t[14],r.instance.fight,r.instance.ingot,e)},n.playerLevelUp=function(){var t=r.instance.playerBaseAttr,e=100*t[2]+t[3];player_level_up(r.instance.actorId,t[0],t[4],t[14],r.instance.fight,r.instance.ingot,e)},n.playerPowerChange=function(){if(player_power_up){var t=r.instance.playerBaseAttr;player_power_up(r.instance.actorId,t[0],t[4],t[14],r.instance.fight)}},n.recordStep=function(t){var e=r.instance.actorId||0;record_step(t,e)},n.playerShare=function(t){var e=r.instance.actorId;player_share(e,t)},n.playerRealName=function(t){player_realname(t)},n.playerFollow=function(t,e){player_follow(r.instance.actorId,t,e)},n.playerBindPhone=function(t){player_bindphone(t)},n.playerBindPhoneQuery=function(t){player_phonequery(t)},n.openYYB=function(){openYYB()},n.qqdtUserInfo=function(t){"9130qq"==this.platform&&qqdtUserInfo(t)},n.qqdtBlueVipInfo=function(t){"9130qq"==this.platform&&qqdtBlueVipInfo(t)},n.qqdtOpenVip=function(t){"9130qq"==this.platform&&qqdtOpenVip(t)},n.logout=function(){logout()},n.checkConn=function(t,e){_connection(t,e)},n.checkWords=function(t,e){checkWord?checkWord(t,e):e(0)},n.player_mini_share=function(){player_mini_share(r.instance.actorId)},n.player_mini_service=function(){player_mini_service()},n.changeCloseRecharge=function(){this.closeRecharge!=this.isCloseRecharge&&(WindowManager.instance.isOpened(3)&&(WindowManager.instance.close(3,null,!1,!0),WindowManager.instance.open(3)),WindowManager.instance.isOpened(4)&&(WindowManager.instance.close(4,null,!1,!0),WindowManager.instance.open(4)),WindowManager.instance.isOpened(5)&&(WindowManager.instance.close(5,null,!1,!0),WindowManager.instance.open(5)),this.closeRecharge=this.isCloseRecharge,e.GlobalData.dispatcher.event("PLAT_CHANGE_RECHARGE"))},Object.defineProperty(n,"isCloseRecharge",{get:function(){return null==this.closeRecharge&&(this.closeRecharge=window.isCloseRecharge&&isCloseRecharge()),window.isCloseRecharge&&isCloseRecharge()},enumerable:!0,configurable:!0}),n.beQuit=function(){beQuit()},n.onLaunchOptions=function(){return onLaunchOptions()},Object.defineProperty(n,"isCloseWZC",{get:function(){return 0!=n.control.screenSpokesperson},enumerable:!0,configurable:!0}),n.setClipboardData=function(t,e,i){setClipboardData({data:t,success:e,fail:i})},n.setOppoClipboardData=function(t,e,i){setOppoClipboardData({data:t,success:e,fail:i})},n.setVivoClipboardData=function(t,e,i){setVivoClipboardData({text:t,success:e,fail:i})},n.reloginSign=function(e,i){window.reLoginSign&&reLoginSign(function(t){t&&200===t.code?(console.log(t.data),e(t.data)):i()},i)},n.microtQuery=function(t){microtQuery(t)},n.microtOation=function(t){microtOation(r.instance.actorId,t)},n.isQQSpSource=function(t){isQQSpSource(t)},n.player_accountsecurity=function(){player_accountsecurity()},n.getBoxList=function(t,e){getBoxList(t,e)},n.openBox=function(){openBox()},n.clickBoxGame=function(t){clickBoxGame(t)},n.isQQRedpacket=function(t){isQQRedpacket(t)},n.qqRedpacketWithdraw=function(t,e,i,n){qqRedpacketWithdraw(t,e,i,n)},n.jump37BoxDownload=function(){jump37BoxDownload()},n.sign="",n.cdn="",n.package=0,n.newRegister=0,n.isNoCreate=0,n.configs="",n.isYyb=0,n.groupId=0,n.openid="",n.openkey="",n.ipCreate=0,n.accountCreate=0,n.closeRecharge=void 0,i=n,e.PlatParams=i}(modules=modules||{}),function(t){var e,i,n;function s(){}e=t.login||(t.login={}),i=t.common.PlatParams,s.setCopyright=function(t,e){t.text=i.control.miniGameCopyright1||"审批文号：国新出审[2019]3602号，著作权人：成都玖壹叁零网络科技有限公司，",e.text=i.control.miniGameCopyright2||"出版单位：上海同济大学电子音像出版社有限公司，出版物号：ISBN 978-7-498-07182-8"},n=s,e.LoginUtil=n}(modules=modules||{}),function(t){var e,s,i,n;function o(){return null!==s&&s.apply(this,arguments)||this}e=t.loading||(t.loading={}),i=t.login.LoginUtil,s=ui.LoadingViewUI,__extends(o,s),o.prototype.loadUI=function(t){this.createView({type:"BaseView",props:{width:720,height:1280},child:[{type:"Image",props:{y:-140,x:-120,var:"bgImg"}},{type:"Box",props:{x:0,width:720,height:100,bottom:140},child:[{type:"Image",props:{y:50,var:"progressBg2"}},{type:"Image",props:{var:"progressBg1"}},{type:"Image",props:{y:20,x:60,var:"progressBar1"}},{type:"Image",props:{y:70,x:60,var:"progressBar2"}},{type:"Text",props:{y:-18,x:10,width:700,var:"proLabel",strokeColor:"#A56A3E",stroke:3,fontSize:24,font:"SimHei",color:"#FFF8D7",align:"center"}},{type:"Text",props:{y:17,x:10,width:700,var:"proLabel1",strokeColor:"#430B51",stroke:3,fontSize:22,font:"SimHei",color:"#FFFFFF",align:"center"}},{type:"Text",props:{y:67,x:10,width:700,var:"proLabel2",strokeColor:"#430B51",stroke:3,fontSize:22,font:"SimHei",color:"#FFFFFF",align:"center"}},{type:"Text",props:{y:94,x:0,width:720,text:"首次加载耗时较长，再等等就好了哦~",strokeColor:"#430B51",stroke:3,fontSize:20,font:"SimHei",color:"#FFACAC",align:"center"}},{type:"Text",props:{y:120,x:0,width:720,text:"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。",strokeColor:"#430B51",stroke:3,fontSize:20,font:"SimHei",color:"#eaf8ff",align:"center"}},{type:"Text",props:{y:144,x:0,width:720,text:"适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",strokeColor:"#430B51",stroke:3,fontSize:20,font:"SimHei",color:"#eaf8ff",align:"center"}},{type:"Text",props:{y:178,x:0,width:720,var:"txt1",strokeColor:"#430B51",stroke:3,fontSize:16,font:"SimHei",color:"#eaf8ff",align:"center"}},{type:"Text",props:{y:198,x:0,width:720,var:"txt2",strokeColor:"#430B51",stroke:3,fontSize:16,font:"SimHei",color:"#eaf8ff",align:"center"}},{type:"Text",props:{y:218,x:10,width:720,var:"verTxt",text:"游戏版本：",strokeColor:"#430B51",stroke:3,fontSize:16,font:"SimHei",color:"#eaf8ff",align:"center"}}]}]})},o.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=this.centerY=0,this.bgImg.skin=t.common.VersionResUtlis.getRes(3),this.progressBg2.skin="progress_jz_jdt1_0.png",this.progressBg1.skin="progress_jz_jdt2_0.png",this.progressBar1.skin="progress_jz_jdt_1.png",this.progressBar2.skin="progress_jz_jdt_1.png",this.verTxt.text="游戏版本："+window.resVer+"."+window.codeVer,this.layer=10,i.setCopyright(this.txt1,this.txt2)},o.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t);var e=t[2],i=596*e;if(-1===t[0])this.progressBar1.width=596<i?596:i,this.proLabel1.text=(100*e>>0)+"%";else{var n=t[0]/t[1];this.progressBar1.width=596*n,this.proLabel1.text=(100*n>>0)+"%",this.progressBar2.width=596<i?596:i,this.proLabel.text=t[3],this.proLabel2.text=(100*e>>0)+"%"}},o.prototype.close=function(){s.prototype.close.call(this),window.subpackLoadBox&&(window.subpackLoadBox.destroy(!0),window.subpackLoadBox=null)},n=o,e.LoadingPanel=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.login||(t.login={}),n=ui.LoginViewUI,s=t.common.PlatParams,i=n,__extends(a,i),a.prototype.loadUI=function(t){this.createView({type:"BaseView",props:{width:720,height:1280},child:[{type:"Image",props:{y:-140,x:-120,var:"bgImg"}},{type:"Image",props:{y:986,x:103,var:"serverBtn",skin:"login/btn_xfy_xq.png"}},{type:"Image",props:{y:70,x:620,var:"noticeBtn",skin:"login/btn_xfy_gg.png"}},{type:"Image",props:{y:180,x:620,var:"privacyBtn",skin:"login/btn_xfy_ys.png"}},{type:"Image",props:{y:290,x:620,var:"agreementBtn",skin:"login/btn_xfy_xy.png"}},{type:"Image",props:{y:1083,x:220,var:"loginBtn",skin:"login/btn_xfy_dlyx.png"}},{type:"Image",props:{y:1004,x:123,var:"stateImg"}},{type:"Text",props:{y:1179,x:60,wordWrap:!0,width:620,text:"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",leading:6,height:22,fontSize:22,font:"SimHei",color:"#a298d0"}},{type:"Text",props:{y:1005,x:203,width:300,var:"serverName",height:35,fontSize:32,font:"SimHei",color:"#000000",align:"center"}},{type:"Text",props:{y:1005,x:517,text:"换区>",height:35,fontSize:32,font:"SimHei",color:"#000000"}},{type:"Text",props:{y:1238,x:0,wordWrap:!0,width:720,var:"txt1",leading:6,height:22,fontSize:18,font:"SimHei",color:"#a298d0",align:"center"}},{type:"Text",props:{y:1257,x:0,wordWrap:!0,width:720,var:"txt2",leading:6,height:22,fontSize:18,font:"SimHei",color:"#a298d0",align:"center"}},{type:"Text",props:{y:960,x:54,wordWrap:!0,width:620,var:"ageTip",text:"适龄提示：本游戏适合18周岁以上者参与",leading:6,height:22,fontSize:22,font:"SimHei",color:"#a298d0",align:"center"}}]})},a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.bgImg.skin=t.common.VersionResUtlis.getRes(4),e.LoginUtil.setCopyright(this.txt1,this.txt2),this.privacyBtn.visible=this.agreementBtn.visible="xunlu"===s.platform},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.serverBtn,this,this.serverHandler),this.onAutoClick(this.loginBtn,this,this.loginHandler),this.onAutoClick(this.noticeBtn,this,this.openUpdateNotice),this.onAutoClick(this.privacyBtn,this,this.openPrivacy),this.onAutoClick(this.agreementBtn,this,this.openAgreement),this.onAutoGlobalEvt("SELECT_SERVER",this,this.selectServer)},a.prototype.serverHandler=function(){e.LoginModel.instance.hasReq||(e.LoginModel.instance.hasReq=!0,req_server_list()),WindowManager.instance.open(245)},a.prototype.loginHandler=function(){var t=e.LoginModel.instance.selectedServer;t&&(-1!==t.status?(this.close(),Main.instance.startLogin()):alert("当前服务器正在维护中"))},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.ageTip.visible=1===s.control.ageTip,this.selectServer();var t=window.tparams.notice.version;window.localStorage&&window.localStorage.getItem("update_notice_ver")===t||(window.localStorage&&window.localStorage.setItem("update_notice_ver",t),this.openUpdateNotice())},a.prototype.openUpdateNotice=function(){if(this._updateNotice)WindowManager.instance.open(1331,["更新公告",this._updateNotice]);else{var e=this;window.getNotice(function(t){e._updateNotice=t.contents,e._updateNotice&&WindowManager.instance.open(1331,["更新公告",e._updateNotice])})}},a.prototype.selectServer=function(){var t=e.LoginModel.instance.selectedServer;this.serverName.text=t.name,2===t.status?this.stateImg.skin="login/image_xfy_ct.png":1===t.status?this.stateImg.skin="login/image_xfy_fm.png":-1===t.status&&(this.stateImg.skin="login/image_xfy_wh.png")},a.prototype.openPrivacy=function(){var e=this;this._privacyPolicy?WindowManager.instance.open(1331,["隐私政策",this._privacyPolicy]):window.sendXHR(window.tparams.select_server_cdn+"login/privacy_policy_3",null,function(t){e._privacyPolicy=t,WindowManager.instance.open(1331,["隐私政策",e._privacyPolicy])},"text")},a.prototype.openAgreement=function(){var e=this;this._userAgreement?WindowManager.instance.open(1331,["用户注册服务协议",this._userAgreement]):window.sendXHR(window.tparams.select_server_cdn+"login/user_agreement_3",null,function(t){e._userAgreement=t,WindowManager.instance.open(1331,["用户注册服务协议",e._userAgreement])},"text")},o=a,e.LoginPanel=o}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h;function c(){return null!==i&&i.apply(this,arguments)||this}e=t.login||(t.login={}),n=t.common.CustomSlide,s=Laya.Image,o=Laya.Text,a=t.core.BaseDialog,r=Laya.HTMLDivElement,l=Laya.Panel,i=a,__extends(c,i),c.prototype.initialize=function(){i.prototype.initialize.call(this),this.size(662,1090),this.bgImg=new s("login/panel_xfy_gxbg.png"),this.addChild(this.bgImg),this._titleTxt=new o,this.addChild(this._titleTxt),this._titleTxt.width=265,this._titleTxt.height=28,this._titleTxt.pos(198,54,!0),this._titleTxt.font="SimHei",this._titleTxt.align="center",this._titleTxt.fontSize=28,this._titleTxt.color="#ffffff";var t=new o;this.addChild(t),t.text="点击空白处退出",t.stroke=3,t.strokeColor="#797daf",t.fontSize=28,t.font="SimHei",t.color="#ffffff",t.pos(240,1100,!0),this._con=new l,this.addChild(this._con),this._con.pos(70,110,!0),this._con.size(520,910),this._txt=new r,this._con.addChild(this._txt),CommonUtil.setHTMLPro(this._txt,"#4C5E8A","SimHei",24),this._txt.style.lineHeight=28,this._txt.width=520,this._closeImg=new s("login/btn_tongyong_13.png"),this.addChild(this._closeImg),this._closeImg.pos(598,18,!0),this._defaultTxtH=210,this._defaultThisH=405,this._offset=this._defaultThisH-this._defaultTxtH,this._slide=new n(this._con,this._txt)},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this._closeImg,this,this.close)},c.prototype.offEvt=function(){this._slide.removeListeners(),i.prototype.offEvt.call(this)},c.prototype.destroy=function(){this._slide=this.destroyElement(this._slide),i.prototype.destroy.call(this)},c.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._titleTxt.text=t[0],this._txt.innerHTML=t[1];var e=this._txt.contextHeight;this._txt.style.height=this._txt.contextHeight,this._slide.initState(e,!1)},h=c,e.MiniGameUpdateAlert=h}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}n=t.login||(t.login={}),i=ui.SelectServerViewUI,s=t.common.SimpleList,e=i,__extends(a,e),a.prototype.loadUI=function(t){this.createView({type:"BaseView",props:{width:960,height:1560},child:[{type:"Image",props:{y:227,x:128,skin:"login/image_xfy_xfbg.png"}},{type:"Image",props:{y:254,x:763,var:"closeBtn",skin:"login/btn_tongyong_13.png"}}]})},a.prototype.destroy=function(){this._leftList&&(this._leftList.removeSelf(),this._leftList.destroy(),this._leftList=null),this._rightList&&(this._rightList.removeSelf(),this._rightList.destroy(),this._rightList=null),e.prototype.destroy.call(this)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._leftList=s.create(n.SelectServerLeftItem,192,76),this.addChild(this._leftList),this._leftList.pos(174,340,!0),this._leftList.size(192,932),this._rightList=s.create(n.SelectServerRightItem,381,66,1,1,0,4),this.addChild(this._rightList),this._rightList.pos(400,340,!0),this._rightList.size(381,932),this._rightList.canSelectSameItem=!0},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._leftList,"select",this,this.leftSelectHandler),this.onAutoEvt(this._rightList,"select",this,this.rightSelectHandler),this.onAutoGlobalEvt("SERVER_LIST_UPDATE",this,this.updateList),this.onAutoGlobalEvt("SERVER_ZONE_UPDATE",this,this.updateZone)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateList()},a.prototype.updateList=function(){var t=n.LoginModel.instance.serverZoneNames;t&&(this._leftList.datas=t,this._leftList.selectedIndex=0)},a.prototype.leftSelectHandler=function(){var t=n.LoginModel.instance.serverZones;if(t){var e=this._leftList.selectedData[0],i=t[e];i?this._rightList.datas=i:window.getZoneServer(e)}},a.prototype.rightSelectHandler=function(){n.LoginModel.instance.selectedServer=this._rightList.selectedData,this.close()},a.prototype.updateZone=function(t,e){t===this._leftList.selectedData[0]&&(this._rightList.datas=e)},o=a,n.SelectServerPanel=o}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.commonAlert||(t.commonAlert={}),i=ui.CommonBuyTxtAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",28),this.contentTxt.style.leading=12,this.contentTxt.style.wordWrap=!0,CommonUtil.setHTMLPro(this.needMsc,"#4C5E8A","SimHei",24,"center"),this.needMsc.style.leading=12,this.needMsc.style.wordWrap=!0},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler)},s.prototype.okHandler=function(){this.callBack&&this.callBack(),this.close()},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.titleTxt.text=t[0],this.contentTxt.innerHTML=t[1],this.needMsc.innerHTML=t[2],this.callBack=t[3]},n=s,e.CommonBuyTxtAlert=n}(modules=modules||{}),function(t){var i,e;function n(){}i=t.common||(t.common={}),n.getRes=function(t){var e=i.PlatParams.control.screenSpokesperson||0;switch(t){case 0:return 0<e?"top/bg0_"+e+"_mainui_top.png":"top/bg0_mainui_top.png";case 1:return n.getBottomRes(e);case 3:return 0===e?window.miniLoadingBg:window.arraignLoadingBg;case 4:return 0===e?window.miniLoginBg:window.arraignLoginBg;case 2:return 0<e?"bottom_"+e:"bottom";case 6:return 0<e?["fuliguan/image_xcxflg_02.png","fuliguan/txt_xcxflg_02.png","fuliguan/image_xcxflg_03.png","fuliguan/txt_xcxflg_01.png"]:["fuliguan/image_flg_02.png","fuliguan/txt_flg_02.png","fuliguan/image_flg_03.png","fuliguan/txt_flg_01.png"];case 7:return 0<e?"firt_login_alert/image_tc_bg1.png":"firt_login_alert/image_tc_bg2.png"}},n.getBottomRes=function(t){return 1<=t?["res/atlas/chat.atlas","res/atlas/bottom.atlas","res/atlas/bottom_"+t+".atlas","bottom_"+t+"/bg0_mainui_bottom.png"]:["res/atlas/chat.atlas","res/atlas/bottom.atlas","bottom/bg0_mainui_bottom.png"]},e=n,i.VersionResUtlis=e}(modules=modules||{}),function(s){var t,o,e,i;function n(){return null!==o&&o.apply(this,arguments)||this}t=s.da_zhao||(s.da_zhao={}),e=s.common.CustomList,o=ui.DaZhaoFengJieAlertUI,__extends(n,o),n.prototype.initialize=function(){o.prototype.initialize.call(this),this._list=new e,this._list.width=450,this._list.height=198,this._list.hCount=4,this._list.shiftingX=10,this._list.spaceX=10,this._list.spaceY=-18,this._list.itemRender=t.DaZhaoRewardItem,this._list.x=0,this._list.y=0,this.fengJieList2Box.addChild(this._list),CommonUtil.setHTMLPro(this.noticeTxt,"#4C5E8A","SimHei",24,"center"),this.noticeTxt.style.leading=10},n.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler)},n.prototype.setOpenParam=function(t){if(o.prototype.setOpenParam.call(this,t),t){this._typr=t[0],this._list.datas=t[1];var e=t[2];if(1===e)1==this._typr?this.noticeTxt.innerHTML="以下灵装为<span style='color:#b15315'>神品、圣品灵装</span>或评分比穿戴灵装<span style='color:#b15315'>评分高</span>，是否分解？":2==this._typr&&(this.noticeTxt.innerHTML="用于打造的灵装评分比穿戴灵装高,打造后将消失,是否确认？");else if(2===e)1==this._typr?this.noticeTxt.innerHTML="以下卦牌为<span style='color:#b15315'>神品、圣品卦牌</span>或评分比穿戴卦牌<span style='color:#b15315'>评分高</span>，是否分解？":2==this._typr&&(this.noticeTxt.innerHTML="用于打造的卦牌评分比穿戴卦牌高,打造后将消失,是否确认？");else if(3===e)1==this._typr?this.noticeTxt.innerHTML="以下异宝为<span style='color:#b15315'>神品、圣品异宝</span>或评分比穿戴异宝<span style='color:#b15315'>评分高</span>，是否分解？":2==this._typr&&(this.noticeTxt.innerHTML="用于打造的异宝评分比穿戴异宝高,打造后将消失,是否确认？");else if(4===e){var i=this._list.datas[0],n=s.config.ItemFantianCfg.instance.getItemByCfg(i[0])[1];this.noticeTxt.innerHTML="当前<span style='color:#b15315'>没有穿戴</span>"+n+"，穿戴后可<span style='color:#b15315'>增加大幅战力</span><br>是否确定继续分解？"}else 1==this._typr?this.noticeTxt.innerHTML="以下装备为<span style='color:#b15315'>四星彩装</span>或评分比穿戴装备<span style='color:#b15315'>评分高</span>，是否分解？":2==this._typr&&(this.noticeTxt.innerHTML="用于打造的装备评分比穿戴装备高,打造后将消失,是否确认？")}},n.prototype.cancelBtnHandler=function(){this.close()},n.prototype.okBtnHandler=function(){1==this._typr?GlobalData.dispatcher.event("DA_ZHAO_ADD_EQUIP_FENG_JIE_JIXU",[!1]):2==this._typr&&GlobalData.dispatcher.event("DA_ZHAO_ADD_EQUIP_DAZHAO_JIXU",[!1]),this.close()},n.prototype.destroy=function(){this._list=this.destroyElement(this._list),o.prototype.destroy.call(this)},i=n,t.DaZhaoFengJieAlert=i}(modules=modules||{}),function(i){var a,e,s,t;function n(){var t=e.call(this)||this;return t._maxConH=1004,t._lastPos=0,t}a=i.da_zhao||(i.da_zhao={}),s=Laya.Rectangle,e=ui.DaZhaoViewUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._allDaZhaoDaLeiItem=new Array,this._DaZhaoPanelClass=new a.DaZhaoPanelClass(this),this._DaZhaoPanelJieZiClass=new a.DaZhaoPanelJieZiClass(this),this._DaZhaoPanelFengJieClass=new a.DaZhaoPanelFengJieClass(this),this._DaZhaoPanelClass.initialize(),this._DaZhaoPanelJieZiClass.initialize(),this._DaZhaoPanelFengJieClass.initialize()},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("DA_ZHAO_OPENUPDATE",this,this.updateOpenList),this.onAutoGlobalEvt("DA_ZHAO_CHANGE_UI",this,this.switchUi),this.onAutoGlobalEvt("COMPOSE_REPLY",this,this.composeReply),this.onAutoGlobalEvt("BAG_UPDATE",this,this.UpDateOther),this.onAutoGlobalEvt("COMPOSE_REPLY",this,this.UpDateOther),this._DaZhaoPanelClass.addListeners(),this._DaZhaoPanelJieZiClass.addListeners(),this._DaZhaoPanelFengJieClass.addListeners(),this.onAutoEvt(this.listBox,"mousedown",this,this.downHandler),this.onAutoEvt(this.listBox,"mousewheel",this,this.wheelHandler)},n.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._DaZhaoPanelClass.removeListeners(),this._DaZhaoPanelJieZiClass.removeListeners(),this._DaZhaoPanelFengJieClass.removeListeners()},n.prototype.UpDateOther=function(){this._DaZhaoPanelClass.UpDateOther(),a.DaZhaoModel.instance.getHaveRpTclassBagUpdate(),a.DaZhaoModel.instance.getFenJieNum()},n.prototype.UpDateEquip=function(){},n.prototype.setOpenParam=function(t){void 0===t&&(t=0),e.prototype.setOpenParam.call(this,t),this._daZaoOpenType=t},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),a.DaZhaoModel.instance.setRP(),this._DaZhaoPanelClass.onOpened(),this._DaZhaoPanelFengJieClass.onOpened(),this.destroyThisDaZhaoDaLeiItem(),this.setDaLeiItem(),this.updateOpenList(),this.startShowUIByType(this._daZaoOpenType)},n.prototype.setDaLeiItem=function(){for(var t=0;t<a.DaZhaoModel.instance.allInfo.length;t++){var e=a.DaZhaoModel.instance.allInfo[t];if(e){var i=new a.DaZhaoDaLeiItem;i.setData([e,t]),this.listBox.addChild(i),this._allDaZhaoDaLeiItem.push(i)}}},n.prototype.destroyThisDaZhaoDaLeiItem=function(){for(var t=0;t<this._allDaZhaoDaLeiItem.length;t++){var e=this._allDaZhaoDaLeiItem[t];e&&(e.removeSelf(),e.destroy())}this._allDaZhaoDaLeiItem.length=0},n.prototype.updateOpenList=function(t){void 0===t&&(t=0);for(var e=null,i=0,n=0,s=0;s<this._allDaZhaoDaLeiItem.length;s++){var o=this._allDaZhaoDaLeiItem[s];o.y=e?e.y+e.height:0,0!=t&&s===t&&(n=i),i=(e=o).y+o.height}this.setConHeight(i,n)},n.prototype.startShowUIByType=function(t){if(1==t)GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[2,2],900]);else if(2==t)GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[1,7]]);else if(4==t)GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[2,3]]);else if(5==t)GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[1,a.DaZhaoModel.instance.findAawyRPIndex(19,23)]]);else if(6==t)GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[2,4]]);else if(7==t)GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[1,24]]);else if(8===t)GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[2,5]]);else if(9===t)GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[1,a.DaZhaoModel.instance.findAawyRPIndex(3,6)]]);else{var e=3==t,i=a.DaZhaoModel.instance.getFirstOpenOrRp(e);if(i){var n=a.DaZhaoModel.instance.allInfo;e&&(n=a.DaZhaoModel.instance.allInfoYuanShen);for(var s=0;s<n.length;s++){var o=n[s];if(o&&o[1]==i[0])return void GlobalData.dispatcher.event("DA_ZHAO_CLICK",[o])}}else e?GlobalData.dispatcher.event("DA_ZHAO_CLICK",[a.DaZhaoModel.instance.allInfo[a.DaZhaoModel.instance.allInfoYuanShen.length-1]]):GlobalData.dispatcher.event("DA_ZHAO_CLICK",[a.DaZhaoModel.instance.allInfo[a.DaZhaoModel.instance.allInfo.length-1]])}},n.prototype.composeReply=function(){var t=i.compose.ComposeModel.instance.ComposeReply[0],e=i.compose.ComposeModel.instance.ComposeReply[1];0==t&&e&&e[0]&&WindowManager.instance.open(67,["打造成功",[e[0],""]])},n.prototype.switchUi=function(){var t=a.DaZhaoModel.instance.uiTypeByTClassNow(a.DaZhaoModel.instance.ClassNow,a.DaZhaoModel.instance.tClassNow);switch(this.daZhaoBox.visible=!1,this.jieZiBox.visible=!1,this.fengJieBox.visible=!1,t){case 1:this._DaZhaoPanelClass.setOpenParam(null);break;case 2:this._DaZhaoPanelJieZiClass.setOpenParam(null);break;case 3:this._DaZhaoPanelFengJieClass.setOpenParam(null)}},n.prototype.downHandler=function(){this._lastPos=this.listBox.mouseY,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseup",this,this.upHandler),Laya.stage.on("mouseout",this,this.upHandler)},n.prototype.moveHandler=function(){if(this._isMouseMove){var t=this._lastPos-this.listBox.mouseY;this.scroll(t),this._lastPos=this.listBox.mouseY}},n.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseup",this,this.upHandler),Laya.stage.off("mouseout",this,this.upHandler)},n.prototype.wheelHandler=function(t){var e=-8*t.delta;this._isMouseMove&&this.scroll(e)},n.prototype.setConHeight=function(t,e){void 0===e&&(e=0),this.listBox.height=t;var i=this._maxConH,n=this.listBox.scrollRect;return n?n.setTo(0,0,this.listBox.width,i):n=new s(0,0,this.listBox.width,i),this.listBox.scrollRect=n,0!=e&&(this.listBox.scrollRect.y=e,this.scroll(0)),this._isMouseMove=t>this._maxConH,i},n.prototype.scroll=function(t){var e=this.listBox.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.listBox.height-this._maxConH&&(e.y=this.listBox.height-this._maxConH),this.listBox.scrollRect=e},n.prototype.close=function(){this._DaZhaoPanelClass.close(),this._DaZhaoPanelJieZiClass.close(),this._DaZhaoPanelFengJieClass.close(),this.destroyThisDaZhaoDaLeiItem(),e.prototype.close.call(this)},n.prototype.destroy=function(){this._DaZhaoPanelClass.destroy(),this._DaZhaoPanelJieZiClass.destroy(),this._DaZhaoPanelFengJieClass.destroy(),e.prototype.destroy.call(this)},t=n,a.DaZhaoPanel=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._arr=GlobalData.getConfig("beast");for(var t=0,e=this._arr.length;t<e;t++)this._tab[this._arr[t][0]]=this._arr[t]},Object.defineProperty(n.prototype,"arr",{get:function(){return this._arr},enumerable:!0,configurable:!0}),n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.BeastCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tongYongSkillMaxLv=0,this._tab={},this._tabKeyLv={};for(var t=GlobalData.getConfig("beast_skill"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[0],o=n[9],a=n[1];this._tab[s]=n,0===a&&(this._tabKeyLv[o]||(this._tabKeyLv[o]=[]),this._tabKeyLv[o].push(n),this._tongYongSkillMaxLv=o>this._tongYongSkillMaxLv?o:this._tongYongSkillMaxLv)}},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgByLv=function(t){return this._tabKeyLv[t]},n.prototype.getMaxLv=function(){return this._tongYongSkillMaxLv},i=n,e.BeastSkillCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("beast_strong"),this._cfgs.sort(function(t,e){return t[0]-e[0]})},n.prototype.getCfgByLv=function(e){var t=ArrayUtils.binarySearch(this._cfgs,function(t){return e-t[0]});return t<0?null:this._cfgs[t]},n.prototype.getAttrsByLvAndPart=function(t,e){var i=this.getCfgByLv(t);return i?i[e+2]:[]},n.prototype.getMaxLv=function(){return this._cfgs[this._cfgs.length-1][0]},i=n,e.BeastStrongCfg=i}(modules=modules||{}),function(t){var e,i,n;function s(){this._moHuIdToItemId=new i,this.init()}e=t.config||(t.config={}),i=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("beast_resolve"),e=0,i=t.length;e<i;e++){var n=t[e][0],s=t[e][1],o=t[e][2],a=new Array,r=this._moHuIdToItemId.get(n);if(!r){var l=1e3*(n/1e3>>0),h=(.1*n>>0)%100;if(99==h)for(var c=1;c<7;c++)for(var p=1;p<10;p++){var u=l+10*c+p;a.push(u)}else if(0==h)for(var d=1;d<11;d++)for(p=1;p<10;p++)u=void 0,u=10==d?l+d+p:l+10*d+p,a.push(u);else if(88==h)for(var m=9;m<11;m++)for(p=1;p<10;p++)u=void 0,u=10==m?l+m+p:l+10*m+p,a.push(u);else if(77==h)for(var f=7;f<9;f++)for(p=1;p<10;p++)u=l+10*f+p,a.push(u);else if(66==h)for(var g=1;g<9;g++)for(p=1;p<10;p++)u=l+10*g+p,a.push(u);this._moHuIdToItemId.set(n,a),r=a}for(var y=0;y<r.length;y++){var _=r[y];this._tab[_]||(this._tab[_]={}),this._tab[_][s]=o}}},s.prototype.getResolveItemsById=function(t,e){return this._tab[t]?this._tab[t][e]:null},n=s,e.BeastResolveCfg=n}(modules=modules||{}),function(L){var k,e,t,w,U,o,H,i,n,s,x,a,r;function l(){var t=null!==e&&e.apply(this,arguments)||this;return t._maxConH=125,t._lastPos=0,t}k=L.beast_equipment||(L.beast_equipment={}),t=L.config.BeastCfg,w=L.config.BeastSkillCfg,U=L.config.BeastStrongCfg,o=L.common.CustomClip,H=L.common.CommonUtil,i=L.common.SimpleList,n=L.common.ListWithArrowCtrl,s=Laya.Rectangle,x=L.config.ItemAttrPoolCfg,a=L.notice.SystemNoticeManager,e=ui.BeastEquipmentViewUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._helpId=20076,this._list=i.create(k.BeastEquipmentItem,214,189,1,1,0,0),this._list.size(214,811),this.listBox.addChild(this._list),this._listAttr=i.create(k.BeastEquipmentItem1,210,25,1,2,0,5),this._listAttr.size(420,125),this.arrListBox.addChild(this._listAttr),this._listSkill=i.create(k.BeastEquipmentUpgradeItem,85,85,2,1,0,0),this._listSkill.size(425,85),this.skillListBox.addChild(this._listSkill),this._listCtrl=new n(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=this._list.height+this._list.spaceY,this._listCtrl.scrollDisTime=500,this._rpImgs=[this.rpImg1,this.rpImg2,this.rpImg3,this.rpImg4,this.rpImg5],this._taskBase=[this.item1,this.item2,this.item3,this.item4,this.item5],this._nameBgImg=[this.nameBg1,this.nameBg2,this.nameBg3,this.nameBg4,this.nameBg5],this._taskImg=[this.addBtn1,this.addBtn2,this.addBtn3,this.addBtn4,this.addBtn5],this._nameTexts=[this.nameTxet1,this.nameTxet2,this.nameTxet3,this.nameTxet4,this.nameTxet5],this._upGradeEffect=[],this._btnClip=o.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.oneStrengBtn.x-6,this.oneStrengBtn.y-8,.8),this._btnClip1=o.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip1.setProperty(this,this.toPlayBtn.x-6,this.toPlayBtn.y-8)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.oneToUnloadBtn,this,this.oneToUnloadBtnHandler),this.onAutoClick(this.oneStrengBtn,this,this.oneStrengBtnHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoClick(this.toPlayBtn,this,this.toPlayBtnHandler),this.onAutoEvt(this.listBox,"mousedown",this,this.downHandler),this.onAutoEvt(this.listBox,"mousewheel",this,this.wheelHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler),this._listCtrl.addListeners();for(var t=0;t<this._taskImg.length;t++)this.onAutoClick(this._taskImg[t],this,this.openHandler,[t]);this.onAutoGlobalEvt("BEAST_EQUIPMENT_UPDATE",this,this.showUI),this.onAutoGlobalEvt("BEAST_EQUIPMENT_MAX_UPDATE",this,this.setChuZhanTextUI),this.onAutoGlobalEvt("BEAST_EQUIPMENT_UP",this,this.playUpEff),this.onAutoGlobalEvt("BEAST_EQUIPMENT_BEAST_JING_UPDATE",this,this.setCionNum),this.onAutoGlobalEvt("BEAST_EQUIPMENT_BEAST_JING_UPDATE",this,this.showUI),this.regAutoRP(this.rpImg,["beastsSpiritRP1"])},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._listCtrl.removeListeners()},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._list.datas=t.instance.arr,this.setTarget(),this._maxDistance=this._list.datas.length*this._list.itemHeight+(this._list.datas.length-1)*this._list.spaceY-this._list.height,this.setBtnVisible(),Laya.timer.frameLoop(1,this,this.setBtnVisible),this._list.scrollToIndex(this._list.selectedIndex),k.BeastEquipmentCtrl.instance.GetBeastInfo()},l.prototype.showUI=function(){if(this._datas){var t=this._datas[0],e=this._datas[7];this.beaetImg.skin="assets/icon/ui//beast/"+e+".png",this.showEuqip(t),this.setChuZhanTextUI(),this.setSikllTeShuOpen(t)}},l.prototype.setBtnVisible=function(){this.preBtn.visible=0<this._list.scrollPos&&4<this._list.datas.length,this.nextBtn.visible=this._list.scrollPos<this._maxDistance&&4<this._list.datas.length},l.prototype.setTarget=function(){for(var t=-1,e=-1,i=0;i<this._list.datas.length;i++){var n=this._list.datas[i];if(n){var s=n[0];-1===t&&k.BeastEquipmentModel.instance.getRpById(s)&&(t=i),-1===e&&k.BeastEquipmentModel.instance.isChuZhan(s)&&(e=i)}}this._list.selectedIndex=-1!=t?t:-1!=e?e:0,this._list.scrollToIndex(this._list.selectedIndex)},l.prototype.setSikllTeShuOpen=function(t){var e=this._datas[3],i=w.instance.getCfgById(e);this.beastSkillItem.data=[this._datas,i];var n=i[6],s=i[7],o=H.getColorByQuality(s),a=k.BeastEquipmentModel.instance.isChuZhan(t);a?(this.skillNameText.text=""+n,this.skillNameText.color=o):(this.skillNameText.text="出战激活",this.skillNameText.color="#ff3e3e"),this.beastSkillItem.gray=!a},l.prototype.setSikllTeShu=function(){for(var t=new Array,e=w.instance.getCfgByLv(0),i=0;i<e.length;i++){var n=e[i];n&&t.push([this._datas,n])}t&&(this._listSkill.datas=t)},l.prototype.showEuqip=function(P){for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=this._rpImgs[t].visible=this._nameBgImg[t].visible=!1;var S=new Array,A=new Array,e=this._datas[1],M=this._datas[2],E=this._datas[5],R=this._datas[4];this._allEqLv=999;for(var i=0,n=e.length;i<n;i+=2){for(var s=e[i],o=e[i+1],a=!1,r=0,l=S.length;r<l;r+=3)if(S[r]===s){a=!0,S[r+1]+=o;break}a||S.push(s,o,1)}var h=function(n){function t(t,e){s.color=H.getColorByQuality(t);var i=0<e?e+"星":"";s.text=H.getColorNameByQuality(t)+i+H.getNameByPartBeastEquip(n)}var e=D._taskBase[n-1],i=D._nameBgImg[n-1],s=D._nameTexts[n-1],o=D._rpImgs[n-1],a=k.BeastEquipmentModel.instance.isStrengthening(P,n),r=k.BeastEquipmentModel.instance.isWear(P,n),l=k.BeastEquipmentModel.instance.getItemByIdAndPart(P,n);if(l){i.visible=s.visible=!1;var h=l[0],c=l[3];o.visible=a||r,e.dataSource=l,e.visible=!0,e._numTxt.color="#ffffff",e._numTxt.strokeColor="#000000",e._numTxt.stroke=3;var p=0;c&&(p=c[5]),D._allEqLv=p<D._allEqLv?p:D._allEqLv,e._numTxt.text="+"+p,e._numTxt.visible=0<p,t(H.getItemQualityById(h),H.getStarById(h));var u=U.instance.getCfgByLv(p),d=L.config.ItemEquipCfg.instance.getItemCfgById(h)[5],m=u?u[2]:0;M+=m+d;var f=new Array,g=k.BeastEquipmentModel.instance.getConnectionAtrr(l,!0);f=g[0];for(var y=0;y<g[1].length;y++){var _=g[1][y];_&&A.push(_)}for(var v=0,I=f.length;v<I;v+=3){for(var b=f[v],C=f[v+1],T=f[v+2],w=!1,x=0,B=S.length;x<B;x+=3)if(S[x]===b){w=!0,S[x+1]+=C;break}w||S.push(b,C,T)}}else o.visible=r,i.visible=s.visible=!0,t(E[n-1],R[n-1])},D=this;for(t=1;t<=5;t++)h(t);var u=0,c=function(){for(var t=new Array,e=w.instance.getCfgByLv(0),i=0;i<e.length;i++)for(var n=e[i][0],s=k.BeastEquipmentModel.instance.getSkillLV(P,n),o=w.instance.getCfgByLv(s),a=0;a<o.length;a++){var r=o[a];if(r&&n===r[0]){var l=r[10];u+=r[11];for(var h=0;h<l.length;h+=2){var c=l[h],p=l[h+1];t.push([c,p,1])}}}return t}();for(i=0,n=c.length;i<n;i++){s=c[i][0],o=c[i][1];var p=c[i][2];for(a=!1,r=0,l=S.length;r<l;r+=3)if(k.BeastEquipmentModel.instance.arrtKeyAndKey[S[r]]===s){a=!0,S[r+1]+=o;break}a||S.push(s,o,p)}!function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=i[0],s=x.instance.getCfgById(n);if(s){for(var o=s[2],a=i[2],r=!1,l=0,h=S.length;l<h;l+=3)if(k.BeastEquipmentModel.instance.arrtKeyAndKey[S[l]]===o&&1<a){r=!0,S[l+1]+=a;break}r||S.push(n,a,2)}}}}(A);var d={};for(t=0;t<S.length;t+=3){var m=S[t],f=S[t+1],g=S[t+2],y=x.instance.getCfgById(m);if(y){var _=y[2];d[_]?d[_][1]+=f:d[_]=[m,f,g]}}var v=new Array;for(var I in d)if(d.hasOwnProperty(I)){var b=d[I];v.push([b[0],b[1],b[2]])}this._listAttr.datas=v,M+=u,this.fightMsz.value=""+M,this._allEqLv=999===this._allEqLv?0:this._allEqLv,this._xiaoHaoNum=0;var C=U.instance.getCfgByLv(this._allEqLv)[1];this._xiaoHaoNum=C[1],this.setCionNum(),this.setToPlayBtn();var T=24*S.length+6*(S.length-1);this.setConHeight(T)},l.prototype.setCionNum=function(){var t=H.getPropCountById(this._xiaoHaoId);if(t=t||0,this.tenCount.text=t+"/"+this._xiaoHaoNum,o.thisStop(this._btnClip),t>=this._xiaoHaoNum){this.tenCount.color="#4c5e8a";var e=U.instance.getMaxLv(),i=this._datas[0];e>this._allEqLv&&k.BeastEquipmentModel.instance.isChuan(i)&&o.thisPlay(this._btnClip)}else this.tenCount.color="#FF3e3e";this.tenCountImg.skin=H.getIconById(this._xiaoHaoId),this.tenCountImg.x=.5*(this.tenCountBox.width-this.tenCountImg.width-this.tenCount.width),this.tenCount.x=this.tenCountImg.x+this.tenCountImg.width},l.prototype.setToPlayBtn=function(){var t=U.instance.getCfgByLv(0)[1];this._xiaoHaoId=t[0],o.thisStop(this._btnClip1);var e=this._datas[0];if(k.BeastEquipmentModel.instance.isChuZhan(e))this.toPlayBtn.skin="common/btn_tongyong_18.png",this.toPlayBtn.labelColors="#465460,#465460,#465460,#465460",this.toPlayBtn.label="召回";else{this.toPlayBtn.skin="common/btn_tongyong_6.png",this.toPlayBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.toPlayBtn.label="出战";var i=k.BeastEquipmentModel.instance.getChuZhanNum()>=k.BeastEquipmentModel.instance.chuZhanMax,n=k.BeastEquipmentModel.instance.sLIdToPartItemsTable()[e];n&&5===n.length&&!i&&o.thisPlay(this._btnClip1)}var s=U.instance.getMaxLv();this.oneStrengBtn.visible=this.tenCountBox.visible=s>this._allEqLv,this.maxBox.visible=s<=this._allEqLv},l.prototype.setChuZhanTextUI=function(){var t=k.BeastEquipmentModel.instance.getChuZhanNum();this.numText.text=t+"/"+k.BeastEquipmentModel.instance.chuZhanMax,k.BeastEquipmentModel.instance.setRP()},l.prototype.selectHandler=function(){-1!=this._list.selectedIndex&&(this._datas=this._list.datas[this._list.selectedIndex],this.showUI(),this.setSikllTeShu())},l.prototype.oneToUnloadBtnHandler=function(){var t=this._datas[0];k.BeastEquipmentModel.instance.isChuan(t)?k.BeastEquipmentCtrl.instance.OneKeyTakeoff(t):L.notice.SystemNoticeManager.instance.addNotice("没有穿戴任何装备!",!0)},l.prototype.oneStrengBtnHandler=function(){var t=H.getPropCountById(this._xiaoHaoId);if(U.instance.getMaxLv()>this._allEqLv){var e=this._datas[0];t>=this._xiaoHaoNum?k.BeastEquipmentModel.instance.isChuan(e)?k.BeastEquipmentCtrl.instance.BeastStrong(e):a.instance.addNotice("没有穿戴任何装备!",!0):L.bag.BagUtil.openLackPropAlert(this._xiaoHaoId,1)}else a.instance.addNotice("穿戴的装备均已满级!",!0)},l.prototype.addBtnHandler=function(){k.BeastEquipmentModel.instance._tableConditions[k.BeastEquipmentModel.instance.exOnlineIndex]?WindowManager.instance.open(520):a.instance.addNotice("可出战兽灵已达最大数量！",!0)},l.prototype.zhaoHui=function(){var t=this._datas[0];k.BeastEquipmentCtrl.instance.BeastOnline(t,1)},l.prototype.toPlayBtnHandler=function(){var t=this._datas[0];if(k.BeastEquipmentModel.instance.isChuZhan(t))H.alert("提示","召回兽灵将 <span style='color:#b15315'>暂时封存</span>兽灵技能,可以转移下个兽灵使用",[Handler.create(this,this.zhaoHui)],[null],null,!0);else{var e=k.BeastEquipmentModel.instance.sLIdToPartItemsTable()[t];e&&5===e.length?k.BeastEquipmentModel.instance.getChuZhanNum()>=k.BeastEquipmentModel.instance.chuZhanMax?a.instance.addNotice("出战兽灵已满",!0):k.BeastEquipmentCtrl.instance.BeastOnline(t,0):a.instance.addNotice("穿戴全部兽装可出战，出战的兽灵属性和技能生效",!0)}},l.prototype.openHandler=function(t){var e=this._datas[0];if(k.BeastEquipmentModel.instance.getItemByIdAndPart(e,t+1)||k.BeastEquipmentModel.instance.isWear(e,t+1,!1))WindowManager.instance.open(517,[1,t+1,this._datas]);else{var i=this._datas[5],n=this._datas[4];WindowManager.instance.open(259,[[i[t],n[t],t+1],4])}},l.prototype.downHandler=function(){this._lastPos=this.arrListBox.mouseY,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseup",this,this.upHandler),Laya.stage.on("mouseout",this,this.upHandler)},l.prototype.moveHandler=function(){if(this._isMouseMove){var t=this._lastPos-this.arrListBox.mouseY;this.scroll(t),this._lastPos=this.arrListBox.mouseY}},l.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseup",this,this.upHandler),Laya.stage.off("mouseout",this,this.upHandler)},l.prototype.wheelHandler=function(t){var e=-8*t.delta;this._isMouseMove&&this.scroll(e)},l.prototype.setConHeight=function(t){var e=this._maxConH,i=this.arrListBox.scrollRect;return i?i.setTo(0,0,this.arrListBox.width,e):i=new s(0,0,this.arrListBox.width,e),this.arrListBox.scrollRect=i,this._isMouseMove=t>this._maxConH,e},l.prototype.scroll=function(t){var e=this.arrListBox.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.arrListBox.height-this._maxConH&&(e.y=this.arrListBox.height-this._maxConH),this.arrListBox.scrollRect=e},l.prototype.playUpEff=function(t){if(t)for(var e=0;e<t.length;++e){var i=t[e]-1,n=this._upGradeEffect[i];n||((n=o.create("assets/effect/activate.atlas","activate",4,!1)).setProperty(null,-75,-75,1,!0),n.autoRemove=!0,this._upGradeEffect[i]=n),this._taskBase[i].addChildAt(n,6),n.play()}},l.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.setBtnVisible),o.thisStop(this._btnClip),o.thisStop(this._btnClip1)},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._listSkill=this.destroyElement(this._listSkill),this._listAttr=this.destroyElement(this._listAttr),this._listCtrl=this.destroyElement(this._listCtrl),this._btnClip=this.destroyElement(this._btnClip),this._btnClip1=this.destroyElement(this._btnClip1),this._upGradeEffect=this.destroyElement(this._upGradeEffect),e.prototype.destroy.call(this,t)},r=l,k.BeastEquipmentPanel=r}(modules=modules||{}),function(r){var g,e,c,t,i,n,y,s,_,v,o;function a(){return null!==e&&e.apply(this,arguments)||this}g=r.beast_equipment||(r.beast_equipment={}),c=r.config.BeastResolveCfg,t=r.common.BtnGroup,i=laya.events.Event,n=r.common.CustomList,y=r.common.CommonUtil,s=r.common.SimpleList,_=r.config.BlendCfg,v=r.bag.BagModel,e=ui.BeastEquipmentResolveAndChangeAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=s.create(g.BeastEquipmentBagItem,552,138,1,1,0,5),this._list.width=552,this._list.height=612,this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list.visible=!0,this._list1=new n,this._list1.width=520,this._list1.height=458,this._list1.hCount=4,this._list1.spaceY=5,this._list1.itemRender=g.BeastEquipmentResolveItem,this.list1Box.addChild(this._list1),this._list1.pos(0,0,!0),this._list1.visible=!0,this._btnGroup=new t,this._btnGroup.setBtns(this.tiHuanBtn,this.fengJieBtn),this.colorSelectPanel.initData("color"),this.starSelectPanel.initData("star")},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyBtnHandler),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoEvt(this._list,i.CHANGE,this,this.selectHandler),this.onAutoEvt(this._list1,i.CHANGE,this,this.selectHandler1),this.onAutoEvt(this._btnGroup,i.CHANGE,this,this.btnGroupHandler),this.onAutoEvt(this.colorSelectPanel,"select_color",this,this.colorSelectChange),this.onAutoEvt(this.starSelectPanel,"select_star",this,this.starSelectChange),this.onAutoGlobalEvt("BEAST_EQUIPMENT_R_UPDATE",this,this.setXuanZhon),this.onAutoGlobalEvt("BEAST_EQUIPMENT_CHANG",this,this.setShouYi)},a.prototype.colorSelectChange=function(t){g.BeastEquipmentModel.instance.smeltColor=r.bag.BagSmeltUtil.colorIndex1[t],this.setXuanZhon()},a.prototype.starSelectChange=function(t){g.BeastEquipmentModel.instance.smeltStar=r.bag.BagSmeltUtil.starIndex1[t],this.setXuanZhon()},a.prototype.goBtnHandler=function(){this.close(),WindowManager.instance.open(413,2)},a.prototype.oneKeyBtnHandler=function(){var t=new Array;for(var e in g.BeastEquipmentModel.instance._rflags)g.BeastEquipmentModel.instance._rflags.hasOwnProperty(e)&&(s=g.BeastEquipmentModel.instance._rflags[e])&&t.push(parseInt(e));if(0<t.length){var i=!1,n=!1;for(var e in g.BeastEquipmentModel.instance._rflags){var s;if(g.BeastEquipmentModel.instance._rflags.hasOwnProperty(e)&&(s=g.BeastEquipmentModel.instance._rflags[e])){var o=y.getStarById(s[0]);if(5<=y.getItemQualityById(s[0])){i=!0;break}1<o&&(n=!0)}}if(i){var a=Handler.create(this.oneKeyBtnHandler,function(){g.BeastEquipmentCtrl.instance.BeastResolve(t)});y.alert("提示","您选择分解的装备中有红色或以上品质的兽装，是否继续分解？",[a,"确认"],[])}else n?(a=Handler.create(this.oneKeyBtnHandler,function(){g.BeastEquipmentCtrl.instance.BeastResolve(t)}),y.alert("提示","您选择分解的装备中有1星或或以上的兽装，是否继续分解？",[a,"确认"],[])):g.BeastEquipmentCtrl.instance.BeastResolve(t)}else r.notice.SystemNoticeManager.instance.addNotice("未选择兽装!",!0)},a.prototype.setShouYi=function(){var t={};for(var e in g.BeastEquipmentModel.instance._rflags)if(g.BeastEquipmentModel.instance._rflags.hasOwnProperty(e)&&(h=g.BeastEquipmentModel.instance._rflags[e])){var i=h[0],n=h[3],s=1;n&&(s=n[5]);var o=c.instance.getResolveItemsById(i,s);if(o)for(var a=0;a<o.length;a+=2){var r=o[a],l=o[a+1];r&&l&&(t[r]?t[r]+=l:t[r]=l)}}for(var e in this.propTxt.text="0",t){var h;t.hasOwnProperty(e)&&(h=t[e])&&(this.propImg.skin=y.getIconById(parseInt(e)),this.propTxt.text=""+h)}this.huoDeText.visible=this.propImg.visible=this.propTxt.visible="0"!=this.propTxt.text,this.huoDeText.x=.5*(this.width-this.huoDeText.width-this.propImg.width-this.propTxt.width),this.propImg.x=this.huoDeText.x+this.huoDeText.textWidth,this.propTxt.x=this.propImg.x+this.propImg.width},a.prototype.selectHandler=function(){this._list.selectedIndex},a.prototype.selectHandler1=function(){this._list1.selectedIndex},a.prototype.offEvt=function(){e.prototype.offEvt.call(this),g.BeastEquipmentModel.instance._rflags={}},a.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),void 0!==t&&(this._type=t[0],this._part=t[1],this._datas=t[2],1==this._type?this._btnGroup.selectedIndex=0:this._btnGroup.selectedIndex=1,this.btnGroupHandler())},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setUI()},a.prototype.btnGroupHandler=function(){0==this._btnGroup.selectedIndex?this.showBagList():1==this._btnGroup.selectedIndex&&this.setXuanZhon(),this.tiHuanBox.visible=0===this._btnGroup.selectedIndex,this.fengJieBox.visible=1===this._btnGroup.selectedIndex,this.titleText.text=0===this._btnGroup.selectedIndex?"替换列表":"兽装分解"},a.prototype.showBagList=function(){if(this._datas){var t=this._datas[0],e=this._datas[5],i=this._datas[4],n=v.instance.getItemsByBagId(8);this.capacityTxt.text="容量: "+(n?n.length:0)+"/"+_.instance.getCfgById(10012)[1][0];var s=new Array;if(n)for(var o=0;o<n.length;o++)if(d=n[o]){var a=d[0],r=y.getPartById(a),l=y.getItemQualityById(a),h=y.getStarById(a);if(r==this._part){var c=e[this._part-1],p=i[this._part-1];if(l<c)continue;if(l===c&&h<p)continue;s.push([t,c,p,d,g.BeastEquipmentModel.instance.compareTwo(t,this._part,!0,d)])}}var u=g.BeastEquipmentModel.instance.sLIdToPartItemsTable()[t];if(u)for(o=0;o<u.length;o++){var d;if(d=u[o]){var m=d[0],f=d[1];m==this._part&&s.push([t,e[this._part-1],i[this._part-1],f,!1])}}s.sort(this.sortFunc.bind(this)),this._list.datas=s,console.log("分解 分类操作后：  ",g.BeastEquipmentModel.instance._rflags)}},a.prototype.sortFunc=function(t,e){var i=t[3],n=e[3],s=this.getState(i),o=this.getState(n),a=s[0],r=s[1],l=s[2],h=s[3],c=s[4],p=o[0],u=o[1],d=o[2],m=o[3],f=o[4];return a===p?r===u?l===d?h===m?f<c?-1:1:m<h?-1:1:d<l?-1:1:u<r?-1:1:p<a?-1:1},a.prototype.getState=function(t){var e=0,i=t[3],n=0;i&&(n=i[6]);var s=t[0],o=y.getItemQualityById(s),a=y.getStarById(s);return g.BeastEquipmentModel.instance.getIsEquipment(t)&&(e=999999999),[e,o,a,o,n]},a.prototype.setXuanZhon=function(){if(this._datas){g.BeastEquipmentModel.instance._rflags={};var t=v.instance.getItemsByBagId(8),e=new Array;if(t)for(var i=0;i<t.length;i++){var n=t[i];if(n){var s=n[0],o=y.getItemQualityById(s),a=y.getStarById(s),r=999===g.BeastEquipmentModel.instance.smeltStar||a<=g.BeastEquipmentModel.instance.smeltStar,l=999===g.BeastEquipmentModel.instance.smeltColor||o<=g.BeastEquipmentModel.instance.smeltColor;r&&l&&e.push(n)}}this._list1.datas=e,this.setShouYi()}},a.prototype.close=function(){e.prototype.close.call(this),this.setUI()},a.prototype.setUI=function(){this.colorSelectPanel&&(this.colorSelectPanel._isOpen=!0,this.colorSelectPanel.setUI()),this.starSelectPanel&&(this.starSelectPanel._isOpen=!0,this.starSelectPanel.setUI())},a.prototype.destroy=function(){this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this.colorSelectPanel=this.destroyElement(this.colorSelectPanel),this.starSelectPanel=this.destroyElement(this.starSelectPanel),e.prototype.destroy.call(this)},o=a,g.BeastEquipmentResolveAndChangeAlert=o}(modules=modules||{}),function(o){var x,e,B,P,S,t;function i(){return null!==e&&e.apply(this,arguments)||this}x=o.beast_equipment||(o.beast_equipment={}),B=o.config.BeastSkillCfg,P=o.common.CommonUtil,S=o.common.CustomClip,e=ui.BeastEquipmentUpAlertUI,__extends(i,e),i.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._datas=null,e.prototype.destroy.call(this)},i.prototype.initialize=function(){e.prototype.initialize.call(this),this.creatEffect(),P.setHTMLPro(this.tipsHTML,"#1f304d","SimHei",22),P.setHTMLPro(this.tipsHTML1,"#1f304d","SimHei",22),P.setHTMLPro(this.tipsHTML2,"#1f304d","SimHei",22),P.setHTMLPro(this.tipsHTML4,"#1f304d","SimHei",22),this._arrtList=[this.arrt1,this.arrt2],this._arrtList1=[this.arrt3,this.arrt4],this._arrtList2=[this.arrt5,this.arrt6]},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BEAST_EQUIPMENT_UPDATE",this,this.showUI),this.onAutoClick(this.jiHuoBtn,this,this.jiHuoBtnHandler)},i.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._shouLingId=t[0],this._type=t[1],this._datas=t[2],this.showUI(),this.tipsHTML1.innerHTML="兽灵技能在召回后<span style='color:#b15315'>无损保留</span>到下一个出战兽灵"},i.prototype.jiHuoBtnHandler=function(){if(0===this._type)o.notice.SystemNoticeManager.instance.addNotice("兽灵未出战!",!0);else{var t=this._datas[0],e=this._datas[9],i=this._datas[4],n=i[0],s=i[1];B.instance.getMaxLv()<=e?o.notice.SystemNoticeManager.instance.addNotice("已满级",!0):s<=P.getPropCountById(n)?x.BeastEquipmentCtrl.instance.BeastSkillRefine(this._shouLingId,t):o.bag.BagUtil.openLackPropAlert(n,1)}},i.prototype.showUI=function(){if(this._datas){var n=this._datas[0],t=x.BeastEquipmentModel.instance.onlineList()[this._shouLingId];if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i){var s=i[0],o=i[1];if(s===n)for(var a=B.instance.getCfgByLv(o),r=0;r<a.length;r++)if((I=a[r])&&I[0]===s){this._datas=I;break}}}this.upBox.visible=!1,this.jiHuoBox.visible=!1,S.thisStop(this._btnClip),this.maxText.visible=this.tipsHTML1.visible=!1,this.numText.visible=this.numImg.visible=this.jiHuoBtn.visible=!0,this.tipsHTML4.innerHTML=this.tipsHTML2.innerHTML=this.tipsHTML1.innerHTML=this.tipsHTML.innerHTML="";var l=this._datas[8],h=this._datas[6],c=this._datas[3];n=this._datas[0];var p=this._datas[9],u=this._datas[4],d=u[0],m=u[1],f=0;d&&(f=P.getPropCountById(d)),this.skillImg2.skin=this.skillImg1.skin="assets/icon/skill/"+l+".png",this.nameText1.text=this.nameText.text=""+h,this.tipsHTML2.innerHTML=this.tipsHTML.innerHTML=c;var g=B.instance.getMaxLv(),y=function(t,e){for(var i=0;i<e.length;i++)(o=e[i]).visible=!1;if(t){var n=new Array,s=t[10];for(i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];n.push([o,a,1])}for(i=0;i<n.length;i++)o=n[i],(a=e[i])&&(a.data=o,a.visible=!0)}},_=function(){var t=B.instance.getCfgByLv(p+1);if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i&&i[0]===n)return i}return null};if(0===this._type)this.jiHuoBox.visible=!0,this.tipsHTML1.visible=!0,(v=_())&&y(v,this._arrtList);else if(g<=p)this.jiHuoBox.visible=!0,this.maxText.visible=!0,this.numText.visible=this.numImg.visible=this.jiHuoBtn.visible=!1,y(this._datas,this._arrtList);else if(0===p)this.jiHuoBox.visible=!0,this.jiHuoBtn.label="激活",m<=f&&S.thisPlay(this._btnClip),(v=_())&&y(v,this._arrtList);else{this.upBox.visible=!0,this.jiHuoBtn.label="升级",m<=f&&S.thisPlay(this._btnClip);var v=null;if(a=B.instance.getCfgByLv(p+1))for(r=0;r<a.length;r++){var I;if((I=a[r])&&I[0]===n){v=I;break}}if(y(this._datas,this._arrtList1),v){var b=v[8],C=v[6],T=v[3];this.skillImg3.skin="assets/icon/skill/"+b+".png",this.nameTex2.text=""+C,this.tipsHTML4.innerHTML=T,y(v,this._arrtList2)}}if(d){this.numImg.skin=P.getIconById(d);var w=P.getPropCountById(d);this.numText.text=w+"/"+m,this.numText.color=m<=w?"#168a17":"#ff3e3e"}this.numImg.x=.5*(this.width-this.numImg.width-this.numText.width),this.numText.x=this.numImg.x+this.numImg.width}},i.prototype.creatEffect=function(){this._btnClip=S.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.jiHuoBtn.x-6,this.jiHuoBtn.y-8,!0)},t=i,x.BeastEquipmentUpgradeSkillAlert=t}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.beast_equipment||(t.beast_equipment={}),n=t.common.CommonUtil,i=ui.BeastEquipmentSkillAlertUI,__extends(o,i),o.prototype.destroy=function(){this._datas=null,i.prototype.destroy.call(this)},o.prototype.initialize=function(){i.prototype.initialize.call(this),n.setHTMLPro(this.descTxt,"#1f304d","SimHei",24)},o.prototype.setOpenParam=function(t){if(i.prototype.setOpenParam.call(this,t),this._shouLingId=t[0],this._type=t[1],this._datas=t[2],this._datas){var e=[this._datas[3]];this.skillImg.skin="assets/icon/skill/"+this._datas[8]+".png",this.nameTxt.text=""+this._datas[6],this.nameTxt.color=n.getColorByQuality(this._datas[7]),0===this._type?(this.stateText.text="未激活",this.stateText.color="#ff3e3e"):(this.stateText.text="已激活",this.stateText.color="#168a17"),this.descTxt.innerHTML=e[0]}},s=o,e.BeastEquipmentSkillAlert=s}(modules=modules||{}),function(i){var o,e,a,r,t;function n(){return null!==e&&e.apply(this,arguments)||this}o=i.beast_equipment||(i.beast_equipment={}),a=i.common.CommonUtil,r=i.common.CustomClip,e=ui.BeastEquipmentUpCzNumAlertUI,__extends(n,e),n.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this.creatEffect(),a.setHTMLPro(this.tipsHTML,"#1f304d","SimHei",22,"center")},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BEAST_EQUIPMENT_MAX_UPDATE",this,this.showUI),this.onAutoClick(this.jiHuoBtn,this,this.jiHuoBtnHandler)},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.showUI()},n.prototype.jiHuoBtnHandler=function(){var t=0,e=o.BeastEquipmentModel.instance._tableConditions[o.BeastEquipmentModel.instance.exOnlineIndex];e&&(t=e[1]),t<=a.getPropCountById(o.BeastEquipmentModel.instance._chuZhanCaiLiao)?o.BeastEquipmentCtrl.instance.ExBeastOnline():i.bag.BagUtil.openLackPropAlert(o.BeastEquipmentModel.instance._chuZhanCaiLiao,1)},n.prototype.showUI=function(){var t=0,e=o.BeastEquipmentModel.instance._tableConditions[o.BeastEquipmentModel.instance.exOnlineIndex];e&&(t=e[1]),this.item1.dataSource=[o.BeastEquipmentModel.instance._chuZhanCaiLiao,1,0,null];var i=a.getPropCountById(o.BeastEquipmentModel.instance._chuZhanCaiLiao),n=t<=i?"#168a17":"#ff3e3e";this.item1._numTxt.text=i+"/"+t,this.item1._numTxt.color=n,this.maxText.visible=!e,this.tipsHTML.visible=this.item1._numTxt.visible=this.jiHuoBtn.visible=null!=e,r.thisStop(this._btnClip),t<=i&&e&&r.thisPlay(this._btnClip);var s=a.getNameByItemId(o.BeastEquipmentModel.instance._chuZhanCaiLiao);this.tipsHTML.innerHTML="消耗<span style='color:#b15315'>"+s+"</span><span style='color:#168a17'>x"+t+"</span>可永久增加一个出战兽灵"},n.prototype.creatEffect=function(){this._btnClip=r.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.jiHuoBtn.x-6,this.jiHuoBtn.y-8,!0)},t=n,o.BeastEquipmentUpNumAlert=t}(modules=modules||{}),function(d){var t,e,h,c,m,i,f,n,g,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._maxConH=600,t._lastPos=0,t.teamIdTest=0,t}t=d.beast_equipment||(d.beast_equipment={}),h=laya.display.Text,c=d.config.ItemAttrPoolCfg,m=d.common.CommonUtil,i=d.bag.BaseItem,f=d.config.AttrItemCfg,n=Laya.Rectangle,g=d.common.AttrUtil,e=ui.BeastEquipAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._contrastElementArr=[this.contrastBox,this.myEquipBgImg,this.myEquipBgTxt,this.myRankTxt,this.myYuanshenImg,this.myYuanshenTxt,this.myFulingNameTxt,this.myFulingImg],this._item=new i,this.addChild(this._item),this._item.pos(37,55,!0),this._item.nameVisible=!1,this._item.needTip=!1,this._baseAttrTxts=[this.baseAttrTxt_0,this.baseAttrTxt_1],this._intensiveTxts=[this.intenTxt_0,this.intenTxt_1],this.baseAttrImgs=[this.baseAttrImg_0,this.baseAttrImg_1],this.myBaseAttrTxts=[this.myBaseAttrTxt_0,this.myBaseAttrTxt_1],this.bestAttrTxts=[],this.myBestAttrTxts=[],this._stoneImgs=[],this._myStoneImgs=[],this._bestAttrInitY=40,m.setHTMLPro(this.lvHTML,"#1f304d","SimHei",22),m.setHTMLPro(this.myFulingTxt,"#1f304d","SimHei",22),m.setHTMLPro(this.fulingTxt,"#1f304d","SimHei",22),m.setHTMLPro(this.mySuitTxt,"#ffffff","SimHei",22,"center"),m.setHTMLPro(this.suitTxt,"#ffffff","SimHei",22),this.myFulingTxt.style.wordWrap=this.fulingTxt.style.wordWrap=this.mySuitTxt.style.wordWrap=this.suitTxt.style.wordWrap=!1,this.myFulingTxt.style.lineHeight=this.fulingTxt.style.lineHeight=this.mySuitTxt.style.lineHeight=this.suitTxt.style.lineHeight=28},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this.conBox,"mousedown",this,this.downHandler),this.onAutoEvt(this.conBox,"mousewheel",this,this.wheelHandler),this.onAutoClick(this.testGmBtn,this,this.addItemTest)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.testGmBtn.visible=!1},o.prototype.addItemTest=function(){this.teamIdTest},o.prototype.downHandler=function(){this._lastPos=this.conBox.mouseY,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseup",this,this.upHandler),Laya.stage.on("mouseout",this,this.upHandler)},o.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scroll(e)},o.prototype.moveHandler=function(){var t=this._lastPos-this.conBox.mouseY;this.scroll(t),this._lastPos=this.conBox.mouseY},o.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseup",this,this.upHandler),Laya.stage.off("mouseout",this,this.upHandler)},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._bestAttrLastY=-5,this.suitTxt.innerHTML=this.mySuitTxt.innerHTML="",this.suitTxt.style.height=this.mySuitTxt.style.height=0},o.prototype.setBaseInfo=function(t){var e,i,n=(this._item.dataSource=t)[0],s=d.config.ItemEquipCfg.instance.getItemCfgById(n);this.teamIdTest=n;var o=t[3];i=o?(o[5]?this.nameTxt.text=s[1]+" +"+t[3][5].toString():this.nameTxt.text=s[1],e=o[6],o[7]):(this.nameTxt.text=s[1],e=s[14][0]),this.nameTxt.color=m.getColorById(n),this.qualityImg.skin=m.getBgImgById(n);var a=m.getItemQualityById(n);this.qualityImg1.visible=this.qualityImg2.visible=this.qualityImg3.visible=6==a,this.scoreTxt.text=e.toString(),this.sumScoreTxt.text=i.toString();var r=s[3],l=s[4];this.lvHTML.innerHTML=m.JudgeWearingCondition(r,l)},o.prototype.setBaseAttr=function(t){for(var e=t[0],i=d.config.ItemEquipCfg.instance.getItemCfgById(e)[8],n=m.getPartById(e),s=t[3]?t[3][5]:0,o=d.config.BeastStrongCfg.instance.getAttrsByLvAndPart(s,n)||[],a=0;a<.5*i.length;a++){var r=i[2*a],l=i[2*a+1],h=f.instance.getCfgById(r);this._baseAttrTxts[a].text=h[1]+": "+l.toString();for(var c=!1,p=0,u=o.length;p<u;p+=2)if(r===o[p]){c=!0,this._intensiveTxts[a].text="(强化+"+o[p+1]+")";break}this._intensiveTxts[a].visible=c}},o.prototype.setBestAttr=function(t,e){for(var i=e?this.myBestAttrTxts:this.bestAttrTxts,n=0,s=i.length;n<s;n++)i[n].visible=!1;var o=0;return t&&(t[2]&&0<t[2].length&&(this.setBestAttrByColor(t[2],o,e,i),o+=t[2].length),t[1]&&0<t[1].length&&(this.setBestAttrByColor(t[1],o,e,i),o+=t[1].length),t[0]&&0<t[0].length&&(this.setBestAttrByColor(t[0],o,e,i),o+=t[0].length)),o},o.prototype.setBestAttrByColor=function(t,e,i,n){for(var s=0;s<t.length;s++){var o=t[s][0],a=c.instance.getCfgById(o),r=a[4];if(!n[e]){var l=new h;l.fontSize=22,l.font="SimHei",n[e]=l,this.bestAttrBox.addChild(l)}n[e].color=m.getColorByQuality(r),n[e].pos(i?340:44,this._bestAttrInitY+30*e),n[e].text=a[1],n[e].visible=!0,this._bestAttrLastY=n[e].y+n[e].height,e++}},o.prototype.setRank=function(t){var e=d.config.ItemEquipCfg.instance.getItemCfgById(t),i=e[6];this.rankTxt.text=i,this.myEquip?(i=(e=d.config.ItemEquipCfg.instance.getItemCfgById(this.myEquip[0]))[6],this.myRankTxt.text=i):this.myRankTxt.text="未穿戴",this.height=this.bgImg.height=this.elseBox.y+this.elseBox.height+10,this.backTxt.y=this.bgImg.height+40,this.qualityImg1.height=this.height+6},o.prototype.setYuanshenSuit=function(l,h){var c=this,t="my"===l?this.mySuitTxt:this.suitTxt,p=[],u=0;return d.config.YuanshenSuitCfg.instance.flags.forEach(function(t,e){var i="my"===l?"":t+"件效果:",n=c.matchSuit(t,h);if(n){var s=n[0],o=n[1],a=d.config.YuanshenSuitCfg.instance.getCfgByIdColor(s,o),r=g.getResultByAttrIndex(a[3],0);p[e]=i+r.name+"+"+r.value+" "+m.formatHtmlStrByColor(m.getYuanshenColorByQuality(o),"("+d.yuanShen.YuanShenUtil.qualityByIndex(o-1)+"品)"),u++}else p[e]=i+" "+m.formatHtmlStrByColor("#cbcade","无")}),"my"===l&&(this.mySuitTxt.x=0===u?438:340),t.innerHTML=p.join("<br/>"),t.style.height=t.contextHeight,this.yuanshenNameTxt.text=d.yuanShen.YuanShenUtil.typeNameByIndex(d.yuanShen.YuanShenUtil.getTypeById(this.itemData[0])-1)+"神套装",t.height},o.prototype.setXiLian=function(t,e){void 0===e&&(e=!1),this.fulingBox.visible=!0;for(var i=e?this.myFulingTxt:this.fulingTxt,n="",s=0,o=0,a=t.length;o<a;o++){var r=t[o];if(r){s++;var l=f.instance.getCfgById(r[0]),h=r[1],c=l[2]?(100*h).toFixed(2)+"%":Math.round(h)+"";n+='<span color="'+m.getYuanshenColorByQuality(r[2])+'">'+l[1]+"+"+c+"</span>",n+=o===a-1?"":"<br/>"}}return 0===s?(this.fulingBox.visible=!1,i.innerHTML=n,1):(i.innerHTML=n,i.style.height=i.contextHeight,i.y+i.height)},o.prototype.matchSuit=function(t,e){for(var i=0,n=e.length;i<n;i++){var s=e[i][0],o=e[i][1];if(d.config.YuanshenSuitCfg.instance.getCfgByIdColor(s,o)[1]===t)return e[i]}},o.prototype.destroy=function(){this._contrastElementArr=this.destroyElement(this._contrastElementArr),this._item=this.destroyElement(this._item),this._baseAttrTxts=this.destroyElement(this._baseAttrTxts),this.bestAttrTxts=this.destroyElement(this.bestAttrTxts),this._stoneImgs=this.destroyElement(this._stoneImgs),this._myStoneImgs=this.destroyElement(this._myStoneImgs),this._intensiveTxts=this.destroyElement(this._intensiveTxts),this.myBaseAttrTxts=this.destroyElement(this.myBaseAttrTxts),this.myBestAttrTxts=this.destroyElement(this.myBestAttrTxts),this.baseAttrImgs=this.destroyElement(this.baseAttrImgs),this.myEquip=null,e.prototype.destroy.call(this)},Object.defineProperty(o.prototype,"itemData",{get:function(){return this._item.itemData},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isNeedContrast",{set:function(t){for(var e=0,i=this._contrastElementArr.length;e<i;e++)this._contrastElementArr[e].visible=t},enumerable:!0,configurable:!0}),o.prototype.setConHeight=function(t){var e=(this.conBox.height=t)>this._maxConH?this._maxConH:t,i=this.conBox.scrollRect;return i?i.setTo(0,0,this.conBox.width,e):i=new n(0,0,this.conBox.width,e),this.conBox.scrollRect=i,this.conBox.mouseEnabled=t>this._maxConH,e},o.prototype.scroll=function(t){var e=this.conBox.scrollRect;e.y=e.y+t,e.y<0?e.y=0:e.y>this.conBox.height-this._maxConH&&(e.y=this.conBox.height-this._maxConH),this.conBox.scrollRect=e},s=o,t.BeastEquipBaseAlert=s}(modules=modules||{}),function(h){var t,e,i;function n(){return null!==e&&e.apply(this,arguments)||this}t=h.beast_equipment||(h.beast_equipment={}),e=t.BeastEquipBaseAlert,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.isNeedContrast=!1},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.item=t},Object.defineProperty(n.prototype,"item",{set:function(t){var e=t;this.setBaseInfo(e),this.setBaseAttr(e);var i=e[0];this.teamIdTest=i;var n=h.yuanShen.YuanShenUtil.isYuanshenEquip(i),s=e[3],o=0;if(0==this.setBestAttr(s)?this.bestAttrBox.visible=!1:(this.bestAttrBox.visible=!0,o=this.setConHeight(this._bestAttrLastY+this.bestAttrBox.y+this.bestAttrBox.height)),n){this.yuanshenBox.visible=!0;var a=h.yuanShen.YuanShenUtil.getTypeById(i),r=h.yuanShen.YuanShenModel.instance.getInfoById(a)[8],l=this.setYuanshenSuit(null,r);this.yuanshenBox.height=this.suitTxt.y+l,this.yuanshenBox.y=this._bestAttrLastY+5,o=this.setConHeight(this.yuanshenBox.y+this.yuanshenBox.height),this.fulingBox.y=o+5,this.fulingBox.height=this.setXiLian(t[3][3]?t[3][3]:[]),o=this.setConHeight(this.fulingBox.y+this.fulingBox.height)}else this.yuanshenBox.visible=this.fulingBox.visible=!1;this.elseBox.y=this.conBox.y+o+8,this.setRank(i)},enumerable:!0,configurable:!0}),i=n,t.BeastEquipWearAlert=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._bossIdTable={},this.occAll=new Array,this.arr=GlobalData.getConfig("scene_copy_infinite");for(var t=0,e=this.arr.length;t<e;t++){for(var i=this.arr[t],n=i[2],s=0;s<n.length;s+=2)this._bossIdTable[n[s+1]]=i;this.occAll.push(i[2][0])}},n.prototype.getCfgByBossId=function(t){return this._bossIdTable[t]},i=n,e.SceneCopyInfiniteCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=i.call(this)||this;return t._listState=!0,t}e=t.beast_boss||(t.beast_boss={}),n=t.common.CustomList,s=t.config.SceneCopyInfiniteCfg,i=ui.BeastBossSingleBossViewUI,__extends(a,i),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this.zOrder=-1,this.centerX=0,this.bottom=227,this.closeByOthers=!1,this.layer=3,this._list=new n,this._list.width=260,this._list.height=115,this._list.hCount=1,this._list.itemRender=e.BeastBossSingleBossItem,this._list.x=5,this._list.y=36,this._list.selectedIndex=-1,this.addChild(this._list)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.expandBtn,this,this.expandBtnHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateMyRecord(),this._list.selectedIndex=-1,this.setTarget()},a.prototype.setTarget=function(){e.BeastBossModel.instance.setSelectTargetSingleBoss(e.BeastBossModel.instance.wuxianChangeBossId,!0)},a.prototype.selectHandler=function(){-1!=this._list.selectedIndex&&(t.halo.HaloModel.instance.isForceEnter=!1)},a.prototype.expandBtnHandler=function(){this._listState=!this._listState,this.changUI()},a.prototype.changUI=function(){this._listState?(this.bgImg.height=155,this.bgImg.y=0,this._list.height=115,this._list.y=36,this.titleText.y=12,this.expandBtn.y=13,this.expandBtn.skin="common/btn_tonyong_28.png"):(this.bgImg.height=76,this.bgImg.y=78,this._list.height=43,this._list.y=108,this.titleText.y=88,this.expandBtn.y=87,this.expandBtn.skin="common/btn_tonyong_29.png"),this.updateMyRecord()},a.prototype.updateMyRecord=function(){this._list.datas=s.instance.arr},o=a,e.BeastBossSingleBossPanel=o}(modules=modules||{}),function(t){var e,l,i;function n(){this.maxLevel=0,this.init()}e=t.config||(t.config={}),l=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._bxIdToLevel={},this._bossIdTable={},this._boxTable={},this._tabLevelToBxCfgs={},this._bossIdToLevel={},this._tabLevelToBossId={},this._tabLevelToBoxId={},this._tabBxIdToRewatd={},this._cengDictionary=new l;for(var t=GlobalData.getConfig("scene_copy_mystical"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e];if(n){var s=n[1],o=n[3],a=n[7],r=n[8];a&&!this._bxIdToLevel[a]&&(this._bxIdToLevel[a]=s),a&&!this._tabBxIdToRewatd[a]&&(this._tabBxIdToRewatd[a]=[]),a&&(this._tabBxIdToRewatd[a]=r),this.maxLevel=s>this.maxLevel?s:this.maxLevel,this._cengDictionary.set(s,s),this._tab[s]||(this._tab[s]=[]),this._tabLevelToBxCfgs[s]||(this._tabLevelToBxCfgs[s]=[]),this._tabLevelToBossId[s]||(this._tabLevelToBossId[s]=[]),o&&-1===this._tabLevelToBossId[s].indexOf(o)&&this._tabLevelToBossId[s].push(o),this._tabLevelToBoxId[s]||(this._tabLevelToBoxId[s]=[]),a&&-1===this._tabLevelToBoxId[s].indexOf(a)&&this._tabLevelToBoxId[s].push(a),a&&-1===this._tabLevelToBxCfgs[s].indexOf(n)&&this._tabLevelToBxCfgs[s].push(n),this._tab[s].push(n),this._bossIdTable[o]=n,this._bossIdToLevel[o]=s,a&&(this._boxTable[a]=n)}}},n.prototype.getoLevelByBxId=function(t){return this._bxIdToLevel[t]},n.prototype.getCfgByBxId=function(t){return this._boxTable[t]},n.prototype.getRewardByBxId=function(t){return this._tabBxIdToRewatd[t]},n.prototype.getLevelById=function(t){return this._bossIdToLevel[t]},n.prototype.getBoosIdArrByLevel=function(t){return this._tabLevelToBossId[t]},n.prototype.getBoxIdsByLevel=function(t){return this._tabLevelToBoxId[t]},n.prototype.getBxArrByLevel=function(t){return this._tabLevelToBxCfgs[t]},n.prototype.getCfgByBossId=function(t){return this._bossIdTable[t]},n.prototype.getCfgsByGrade=function(t,e){return this._tab[t][e]},n.prototype.getInfoByGrade=function(t){return this._tab[t]},n.prototype.getBossInfoByGrade=function(t){var e=this._tab[t],i=new Array;if(e)for(var n=0;n<e.length;n++){var s=e[n];if(s){var o=s[3].toString();o&&"2"==o[2]&&i.push(s)}}return i},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCengDictionaryKeys=function(){return this._cengDictionary.keys},i=n,e.SceneCopyMysticalCfg=i}(modules=modules||{}),function(i){var s,e,o,a,t,n,r,l,h,c,p,u;function d(){return e.call(this)||this}s=i.beast_boss||(i.beast_boss={}),o=i.config.SceneCopyMysticalCfg,a=i.config.SceneCopyInfiniteCfg,t=Laya.Event,n=i.common.BtnGroup,r=i.dungeon.DungeonCtrl,l=i.common.CustomClip,h=i.common.SimpleList,c=i.common.CommonUtil,p=i.customData.CustomDataModel,e=ui.BeastBossViewUI,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._reviveTime=0,this._allBossPos={},this._allBossItem=[this.bossItem1,this.bossItem2,this.bossItem3,this.bossItem4,this.bossItem5,this.bossItem6,this.bossItem7],this._allBossPos[0]=[[98,161],[478,165],[256,404],[0,0],[0,0],[0,0],[0,0]],this._allBossPos[1]=[[169,107],[410,104],[95,266],[468,268],[392,434],[165,434],[0,0]],this._allBossPos[2]=[[169,107],[410,104],[95,266],[468,268],[534,437],[291,500],[40,435]],this._btnGroup=new n,this._btnGroup.setBtns(this.bossItem1,this.bossItem2,this.bossItem3,this.bossItem4,this.bossItem5,this.bossItem6,this.bossItem7),this._list=h.create(s.BeastBossChangeItem,180,63,2,1,10,0),this._list.width=560,this._list.height=63,this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list.visible=!0,this._listReward=h.create(s.BeastBossReawrdItem,100,100,2,1,8,0),this._listReward.width=640,this._listReward.height=100,this.listBox1.addChild(this._listReward),this._listReward.pos(0,0,!0),this._listReward.visible=!0,this.creatEffect(),this._copyTypeNum=new Array,this._copyTypeNum.push(0);for(var t=1;t<=o.instance.maxLevel;t++)this._copyTypeNum.push(t);this._listCtrl=new i.common.ListWithArrowCtrl(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=this._list.width+this._list.spaceX,this.autoCheckBox.visible=this.msc1.visible=this.msc2.visible=i.halo.HaloModel.instance.haloOpen},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,t.CHANGE,this,this.changeHandler),this.onAutoClick(this.killBtn,this,this.killBtnHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoClick(this.followBtn,this,this.followHandler),this._list.on(t.SELECT,this,this.selectHandler),this.onAutoClick(this.autoCheckBox,this,this.autoCheckBoxHandler),this.onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.followsUpdateHandler),this.onAutoGlobalEvt("HALO_INFO_UPDATE",this,this.updateHaloInfo),this._listCtrl.addListeners()},d.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._listCtrl.removeListeners()},d.prototype.killBtnHandler=function(){if(this._curCfg)switch(this._bossType){case 1:s.BeastBossModel.instance.wuxianChangeBossId=this._idToType,r.instance.reqEnterScene(this._curCfg[0]);break;case 2:s.BeastBossModel.instance.remainTimes?(s.BeastBossModel.instance.shenShouChangeBossId=[this._bossType,this._idToType],r.instance.reqEnterScene(this._curCfg[0],this._curCfg[1])):i.notice.SystemNoticeManager.instance.addNotice("BOSS收益次数已达上限,不能攻击BOSS",!0);break;case 3:var t=!1;switch(this._idToType){case 2402001:case 2402002:t=s.BeastBossModel.instance.caiJiPuTong>=s.BeastBossModel.instance.totalPuTong;break;case 2402003:t=s.BeastBossModel.instance.caiJiXiYou>=s.BeastBossModel.instance.totalXiYou}t?c.noticeError(46726):(s.BeastBossModel.instance.shenShouChangeBossId=[this._bossType,this._idToType],r.instance.reqEnterScene(this._curCfg[0],this._curCfg[1]))}},d.prototype.helpBtnHandler=function(){c.alertHelp(1===this._bossType?20082:20083)},d.prototype.followHandler=function(){if(this._curCfg)if(this.followBtn.selected=!this.followBtn.selected,3==this._bossType)r.instance.setFollowBoss(this._idToType,this.followBtn.selected,1);else if(1==this._bossType)for(var t=this._curCfg[2],e=0;e<t.length;e+=2){var i=t[e+1];i&&r.instance.setFollowBoss(i,this.followBtn.selected)}else r.instance.setFollowBoss(this._idToType,this.followBtn.selected)},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._list.datas=this._copyTypeNum,this._list.selectedIndex=s.BeastBossModel.instance.checkListIndex(),this.setBtnVisible(),Laya.timer.frameLoop(1,this,this.setBtnVisible),this._maxDistance=180*this._list.datas.length+(this._list.datas.length-1)*this._list.spaceX-this._list.width,s.BeastBossCtrl.instance.GetInfiniteCopyInfo(),s.BeastBossCtrl.instance.GetMysticalCopyInfo(),s.BeastBossCtrl.instance.GetMysticalGatherInfo()},d.prototype.selectHandler=function(){if(-1!=this._list.selectedIndex){switch(0===this._list.selectedIndex?this._allCfgs=a.instance.arr:this._allCfgs=o.instance.getInfoByGrade(this._list.selectedIndex),this._list.selectedIndex){case 0:this.bgImg.skin="beast_boss/image_ssd_bg1.jpg";break;case 1:this.bgImg.skin="beast_boss/image_ssd_bg3.jpg";break;case 2:this.bgImg.skin="beast_boss/image_ssd_bg2.jpg"}for(var t=0;t<this._allBossItem.length;t++){var e=this._allBossItem[t],i=this._allCfgs?this._allCfgs[t]:null,n=this._allBossPos[2<this._list.selectedIndex?2:this._list.selectedIndex][t];i?(e.type=0===this._list.selectedIndex?1:2,e.visible=!0,e.data=i):e.visible=!1,e.pos(n[0],n[1],!0)}this._btnGroup.selectedIndex=s.BeastBossModel.instance.getBossIndex(this._list.selectedIndex)}},d.prototype.changeHandler=function(){-1!=this._btnGroup.selectedIndex&&(this._btnGroup.oldSelectedBtn&&(this._btnGroup.oldSelectedBtn.selectedImg.visible=!1),this._btnGroup.selectedBtn&&(this._btnGroup.selectedBtn.selectedImg.visible=!0),this._curCfg=this._allCfgs[this._btnGroup.selectedIndex],this.setBossUI())},d.prototype.setBossUI=function(){if(this._curCfg){this.followBtn.selected=!1,l.thisStop(this._btnClip),this._idToType=0,this._reviveTime=0;var t=new Array;switch(this.reviveTimeTxt.visible=!1,this._bossType=0===this._list.selectedIndex?1:this._curCfg[7]?3:2,this.killBtn.label="挑战",this._bossType){case 1:this._idToType=s.BeastBossModel.instance.getId(this._curCfg),t=this._curCfg[6],this.xiYouText.visible=this.xiYouNumText.visible=this.timesTxt.visible=this.challengeTxt.visible=!1,this.showAward(t);var e=s.BeastBossModel.instance.singBossIdToTime[this._idToType];e=e||0,this._reviveTime=e;break;case 2:this._idToType=this._curCfg[3],t=this._curCfg[8],this.showAward(t);var i=s.BeastBossModel.instance.getBossSeversInfoById(this._idToType);if(i){var n=i[2];n[0]?(this._reviveTime=n[2],this.reviveTimeTxt.visible=!0):n[0]||(this.reviveTimeTxt.visible=!1)}this.showNum();break;case 3:this._idToType=this._curCfg[7],this.showAward(o.instance.getRewardByBxId(this._idToType)),this.killBtn.label="采集",this.showNum()}this.followsUpdateHandler(),this.setActivitiTime(),this.updateHaloInfo()}},d.prototype.showNum=function(){this.xiYouText.visible=this.xiYouNumText.visible=this.timesTxt.visible=this.challengeTxt.visible=!0;var t=s.BeastBossModel.instance.remainTimes,e=s.BeastBossModel.instance.totalTimes;this.timesTxt.text=t+"/"+e,this.timesTxt.color=0!=t?"#00ad35":"#e6372e";var i=s.BeastBossModel.instance.totalXiYou,n=i-s.BeastBossModel.instance.caiJiXiYou;n=n<0?0:n,this.xiYouNumText.text=n+"/"+i,this.xiYouNumText.color=0===n?"#e6372e":"#00ad35"},d.prototype.showAward=function(t){var e=new Array;if(t)for(var i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e.push([n,s,0,null])}this._listReward.datas=e,this.centerTheReward()},d.prototype.centerTheReward=function(){var t=this._listReward.datas.length,e=100*(t=6<t?6:t)+(t-1)*this._listReward.spaceX;this._listReward.x=(this.listBox1.width-e)/2},d.prototype.followsUpdateHandler=function(){if(this._curCfg)if(3===this._bossType)this.followBtn.selected=i.dungeon.DungeonModel.instance.isGuanZuBx(this._idToType);else if(1===this._bossType){var t=s.BeastBossModel.instance.getId(this._curCfg);this.followBtn.selected=!!t&&i.dungeon.DungeonModel.instance.isGuanZuBoss(t)}else this.followBtn.selected=i.dungeon.DungeonModel.instance.isGuanZuBoss(this._idToType)},d.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),this._reviveTime>=GlobalData.serverTime?(this.reviveTimeTxt.visible=!0,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.reviveTimeTxt.visible=!1},d.prototype.activityHandler=function(){if(3===this._bossType){var t=s.BeastBossModel.instance.tableIdToType[this._idToType][0];this.reviveTimeTxt.text=1===t?"刷新倒计时："+c.timeStampDDHHMMToHHMMSS(this._reviveTime):"已采完"}else this.reviveTimeTxt.text="复活倒计时："+c.timeStampDDHHMMToHHMMSS(this._reviveTime);this._reviveTime<GlobalData.serverTime&&(Laya.timer.clear(this,this.activityHandler),this.reviveTimeTxt.visible=!1)},d.prototype.setBtnVisible=function(){this.preBtn.visible=!1,this.nextBtn.visible=!1,this.preBtn.visible=0<this._list.scrollPos&&4<this._list.datas.length,this.nextBtn.visible=this._list.scrollPos<this._maxDistance&&4<this._list.datas.length},d.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.setBtnVisible)},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),this._listReward=this.destroyElement(this._listReward),this._listCtrl=this.destroyElement(this._listCtrl),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this,t)},d.prototype.creatEffect=function(){this._btnClip=l.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.killBtn.x-6,this.killBtn.y-8,!0)},d.prototype.onHaloBtnClick=function(){WindowManager.instance.open(1493)},d.prototype.updateHaloInfo=function(){i.halo.HaloModel.instance.haloOpen&&this.checkBoxState()},d.prototype.checkBoxState=function(){var t=p.instance.getCustomDataByKey(42),e=1==(t?t[0]:0);i.halo.HaloModel.instance.isHalo()?this.autoCheckBox.selected=e:this.autoCheckBox.selected=!1},d.prototype.autoCheckBoxHandler=function(){if(i.halo.HaloModel.instance.isHalo()){this.autoCheckBox.selected=!this.autoCheckBox.selected;var t=[[42,[this.autoCheckBox.selected?1:0]]];CustomDataCtrl.instance.setCustomizeData(t)}else c.alert("温馨提示","您未激活主角光环，不可自动挑战，是否前往激活？",[Handler.create(this,this.okBtnHandel),"确定"],[null,"取消"],null,!0)},d.prototype.okBtnHandel=function(){WindowManager.instance.open(1493)},u=d,s.BeastBossPanel=u}(modules=modules||{}),function(t){var p,e,s,i,n,c,o;function a(){var t=e.call(this)||this;return t._listState=!0,t._listPlayerState=!0,t}p=t.beast_boss||(t.beast_boss={}),s=t.config.SceneCopyMysticalCfg,i=t.common.CustomList,n=t.player.PlayerModel,c=t.bossDungeon.BossDungeonModel,e=ui.BeasstBossAndPlayerListViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=3,this.bottom=275,this.closeByOthers=!1,this.layer=3,this._list=new i,this._list.width=260,this._list.height=185,this._list.hCount=1,this._list.itemRender=p.BeastBossListItemItem,this._list.canSelectSameItem=!0,this.bossBox.addChildAt(this._list,1),this._list.x=5,this._list.y=44,this._list.selectedIndex=-1,this._listPlayer=new i,this._listPlayer.width=286,this._listPlayer.height=185,this._listPlayer.hCount=1,this._listPlayer.itemRender=p.BeastBossPlayerListItemItem,this._listPlayer.canSelectSameItem=!0,this.playerBox.addChildAt(this._listPlayer,1),this._listPlayer.x=8,this._listPlayer.y=45,this._listPlayer.selectedIndex=-1,CommonUtil.setHTMLPro(this.StatementHTML,"#ffffff","SimHei",22,"center"),this.StatementHTML.visible=!0,this._meId=0},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.expandBtn,this,this.expandBtnHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoClick(this.expandPlayerBtn,this,this.expandPlayerBtnHandler),this.onAutoEvt(this._listPlayer,"select",this,this.listPlayerHandler),this.onAutoGlobalEvt("BEAST_BOSS_SCENE_UPDATE",this,this.updateBossInfo),this.onAutoGlobalEvt("BOSS_OWN_UPDATE",this,this.updatePlayerInfo),this.onAutoGlobalEvt("BOSS_ATTACK_UPDATE",this,this.updatePlayerInfo),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayerInfo),this.onAutoGlobalEvt("BEAST_BOSS_SHENMI_UPDATE",this,this.showTipsHtmlUI),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.showTipsHtmlUI)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),p.BeastBossCtrl.instance.nowCengShu(),this._list.selectedIndex=-1,this._listPlayer.selectedIndex=-1,this._meId=n.instance.actorId,this.updateBossInfo(!0),this.updatePlayerInfo(),this._listState=!0,this._listPlayerState=!0,this.changUI(),this.changPlayerUI(),this.showTipsHtmlUI()},a.prototype.showTipsHtmlUI=function(){var t=p.BeastBossModel.instance.remainTimes,e=t+"/"+p.BeastBossModel.instance.totalTimes,i=0!=t?"#50ff28":"#FF3e3e",n=p.BeastBossModel.instance.totalXiYou,s=n-p.BeastBossModel.instance.caiJiXiYou,o=(s=s<0?0:s)+"/"+n,a=0===s?"#FF3e3e":"#50ff28",r=p.BeastBossModel.instance.totalPuTong,l=r-p.BeastBossModel.instance.caiJiPuTong,h=(l=l<0?0:l)+"/"+r,c=0===l?"#FF3e3e":"#50ff28";1===p.BeastBossModel.instance.curLayer?this.StatementHTML.innerHTML="boss疲劳:<span style='color:"+i+";font-size: 24px;stroke:2;strokeColor:#000000'>"+e+"</span><span>&nbsp;&nbsp;</span>\n                凤血水晶:<span style='color:"+c+";font-size: 24px;stroke:2;strokeColor:#000000'>"+h+"</span>":this.StatementHTML.innerHTML="boss疲劳:<span style='color:"+i+";font-size: 24px;stroke:2;strokeColor:#000000'>"+e+"</span><span>&nbsp;&nbsp;</span>\n               龙魄水晶:<span style='color:"+a+";font-size: 24px;stroke:2;strokeColor:#000000'>"+o+"</span><span>&nbsp;&nbsp;</span>\n                凤血水晶:<span style='color:"+c+";font-size: 24px;stroke:2;strokeColor:#000000'>"+h+"</span>",this.tipsBgImg.width=this.StatementHTML.contextWidth+5},a.prototype.selectHandler=function(){-1!=this._list.selectedIndex&&(this._listPlayer.selectedIndex=-1,t.halo.HaloModel.instance.isForceEnter=!1)},a.prototype.expandBtnHandler=function(){this._listState=!this._listState,this.changUI()},a.prototype.listPlayerHandler=function(){-1!=this._listPlayer.selectedIndex&&(this._list.selectedIndex=-1,t.halo.HaloModel.instance.isForceEnter=!1)},a.prototype.expandPlayerBtnHandler=function(){this._listPlayerState=!this._listPlayerState,this.changPlayerUI()},a.prototype.changUI=function(){this._listState?(this.bgImg.height=234,this.bgImg.y=0,this._list.height=185,this._list.y=45,this.titleText.y=12,this.expandBtn.y=13,this.expandBtn.skin="common/btn_tonyong_28.png"):(this.bgImg.height=96,this.bgImg.y=138,this._list.height=44,this._list.y=185,this.titleText.y=154,this.expandBtn.y=155,this.expandBtn.skin="common/btn_tonyong_29.png"),this.updateBossInfo()},a.prototype.changPlayerUI=function(){this._listPlayerState?(this.bgPlayerImg.height=234,this.bgPlayerImg.y=0,this._listPlayer.height=185,this._listPlayer.y=45,this.titleText1.y=12,this.expandPlayerBtn.y=13,this.expandPlayerBtn.skin="common/btn_tonyong_28.png"):(this.bgPlayerImg.height=96,this.bgPlayerImg.y=138,this._listPlayer.height=44,this._listPlayer.y=185,this.titleText1.y=154,this.expandPlayerBtn.y=155,this.expandPlayerBtn.skin="common/btn_tonyong_29.png"),this.updatePlayerInfo()},a.prototype.updateBossInfo=function(t){void 0===t&&(t=!1);var e=s.instance.getBossInfoByGrade(p.BeastBossModel.instance.curLayer);e.sort(this.sortOverd.bind(this));var i=s.instance.getBxArrByLevel(p.BeastBossModel.instance.curLayer);if(this._list.datas=i.concat(e),t){var n=p.BeastBossModel.instance.shenShouChangeBossId;2==n[0]?p.BeastBossModel.instance.setSelectTarget(n[1],1):3==n[0]&&p.BeastBossModel.instance.setSelectTarget(n[1],3)}},a.prototype.sortOverd=function(t,e){var i=t[2];return e[2]<i?1:-1},a.prototype.updatePlayerInfo=function(){for(var t=[],e=[],i=[],n=[],s=0,o=c.instance.getPlayerInfo();s<o.length;s++){var a=o[s],r=a[0];if(c.instance.isSelectBossOwner(r)){var l=c.instance.playerIsMeAttack(r)||c.instance.playerIsAttackMe(r);t.push([a[0],a[1],l?3:1])}else r!=this._meId&&(c.instance.playerIsMeAttack(r)?e.push([a[0],a[1],2]):c.instance.playerIsAttackMe(r)?i.push([a[0],a[1],2]):n.push([a[0],a[1],0]))}var h=t.concat(e,i,n);this._listPlayer.datas=h,this._data=h},a.prototype.close=function(){c.instance.resetShuJu(),e.prototype.close.call(this)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._listPlayer=this.destroyElement(this._listPlayer),e.prototype.destroy.call(this,t)},o=a,p.BeastBossAndPlayerListPanel=o}(modules=modules||{}),function(i){var t,n,e,s,o;function a(){return null!==n&&n.apply(this,arguments)||this}t=i.beast_boss||(i.beast_boss={}),e=ui.GatherHpViewUI,s=game.GameCenter,n=e,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),this.top=180,this.centerX=0,this.zOrder=-1,this._hpMaxW=242,this.btn.label="发起攻击",this._playerProFactTween=TweenJS.create(this.playerProFact).to({width:0},100),this._playerProInterTween=TweenJS.create(this.playerProInter).to({width:0},300)},a.prototype.setOpenParam=function(t){if(n.prototype.setOpenParam.call(this,t),this._npcId=t,this._isFristShow=!0,this._npc=s.instance.getRole(this._npcId),this._owner=this._npc?s.instance.getRole(this._npc.property.get("own")):null,this._owner){this.playerHead.setInfo(this._owner.property.get("headIcon"),this._owner.property.get("occ"),this._owner.property.get("headPhotoframe")),this.updateHP(),this.setBg();var e=this._owner.property.get("id");e===PlayerModel.instance.actorId?(this.btn.visible=!1,this.tipTxt.visible=!0,this.tipTxt.text=this.getTip1(),this.tipTxt.color="#50ff28"):e===PlayerModel.instance.selectTargetId?(this.btn.visible=!1,this.tipTxt.visible=!0,this.tipTxt.text=this.getTip2(),this.tipTxt.color="#ff3e3e"):i.union_war.UnionWarModel.instance.ispreliminaryFactionWar()&&i.faction.FactionModel.instance.isTongXianMeng(e)||i.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()&&i.warband.WarbandModel.instance.isMyWarBandPeople(e)?(this.btn.visible=!1,this.tipTxt.visible=!0,this.tipTxt.text="己方正在夺取",this.tipTxt.color="#ffec7c"):(this.btn.visible=!0,this.tipTxt.visible=!1),this.nameTxt.text=this._owner.property.get("name")}},a.prototype.onOpened=function(){n.prototype.onOpened.call(this),i.union_war.UnionWarModel.instance.ispreliminaryFactionWar()||i.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()?this.top=300:this.top=180,this._npc&&this._owner||this.close()},a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.clickHandler),this._owner&&this._owner.property.on("hp",this,this.updateHP),this._npc&&this._npc.property.on("own",this,this.updateOwn)},a.prototype.offEvt=function(){n.prototype.offEvt.call(this),this._owner&&this._owner.property.off("hp",this,this.updateHP),this._npc&&this._npc.property.off("own",this,this.updateOwn)},a.prototype.close=function(){n.prototype.close.call(this),this._npc=null,this._owner=null,this._playerProFactTween&&this._playerProFactTween.stop(),this._playerProInterTween&&this._playerProInterTween.stop()},a.prototype.clickHandler=function(){if(this._owner)if(i.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()||!i.faction.FactionModel.instance.isTongXianMeng(this._owner.id)){if(57===i.scene.SceneUtil.currScene){if(i.faction.FactionModel.instance.isTongXianMeng(this._owner.id))return void i.notice.SystemNoticeManager.instance.addNotice("不可攻击同一仙盟玩家",!0);if(i.warband.WarbandModel.instance.isMyWarBandPeople(this._owner.id))return void i.notice.SystemNoticeManager.instance.addNotice("不可攻击同一战队玩家",!0);if(this._owner.id===i.marry.MarryModel.instance.halfRoleID)return void i.notice.SystemNoticeManager.instance.addNotice("不可攻击仙缘",!0)}PlayerModel.instance.selectTarget(2,this._owner.property.get("id"))}else i.notice.SystemNoticeManager.instance.addNotice("不可攻击同一仙盟玩家",!0)},a.prototype.updateHP=function(){if(this._owner){var t=this._owner.property.get("hp"),e=Math.floor(t[0]/t[1]*this._hpMaxW);this._isFristShow&&(this._isFristShow=!1,this.playerProInter.width=this.playerProFact.width=e),this._playerProFactTween&&this._playerProFactTween.stop(),this._playerProInterTween&&this._playerProInterTween.stop(),this._playerProFactTween&&(this._playerProFactTween.property.width=e),this._playerProInterTween&&(this._playerProInterTween.property.width=e),this._playerProFactTween&&this._playerProFactTween.start(),this._playerProInterTween&&this._playerProInterTween.start()}},a.prototype.updateOwn=function(){this._npc&&this._owner&&(56!==i.scene.SceneUtil.currScene||0!==this._npc.property.get("own"))?this._npc.property.get("own")!==this._owner.id&&this.setOpenParam(this._npc.property.get("own")):this.close()},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._playerProFactTween&&(this._playerProFactTween=null),this._playerProInterTween&&(this._playerProInterTween=null),n.prototype.destroy.call(this,t)},a.prototype.setBg=function(){i.union_war.UnionWarModel.instance.ispreliminaryFactionWar()||i.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()?this.img.skin="health_point/txt_xmz_34.png":this.img.skin="health_point/txt_sdboss_gsz.png"},a.prototype.getTip1=function(){var t="当前归属自己";return(i.union_war.UnionWarModel.instance.ispreliminaryFactionWar()||i.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar())&&(t="自己正在夺取"),t},a.prototype.getTip2=function(){var t="正在攻击玩家";return i.union_war.UnionWarModel.instance.ispreliminaryFactionWar()?t="正在攻击敌方占领者":i.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()&&(t="正在攻击敌方夺取者"),t},o=a,t.GatherHpPanel=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tab1={},this._tab3={},this._tab5={},this._tab6={};for(var t=GlobalData.getConfig("xianfu"),e=0,i=t.length;e<i;e++){var n=t[e][4],s=t[e][5],o=this._tab[t[e][0]];(o=o||[]).push(t[e]),this._tab[t[e][0]]=o;var a=this._tab1[n];(a=a||{})[s]=t[e],this._tab1[n]=a,this._tab3[n]=t[e],t[e][9]&&(this._tab5[t[e][0]]=t[e][9],this._tab6[t[e][9]]=t[e])}},n.prototype.getCfgByLv=function(t){return this._tab[t]},n.prototype.getCfgByBuildIdAndLv=function(t,e){return this._tab1[t][e]},n.prototype.getMaxLvCfgById=function(t){return this._tab3[t]},Object.defineProperty(n.prototype,"PetOpenLv",{get:function(){return this._tab5},enumerable:!0,configurable:!0}),n.prototype.getCfgByPetId=function(t){return this._tab6[t]},i=n,e.XianfuCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tab2={},this._pureIds=[];for(var t=0,e=GlobalData.getConfig("xianfu_skill");t<e.length;t++){var i=e[t],n=i[0],s=(this._tab[n]=i)[1];if(s){null==this._firstLv&&(this._firstLv=n);var o=CommonUtil.getSkillPureIdById(s);-1===this._pureIds.indexOf(o)&&this._pureIds.push(o),this._tab2[s]=i}}},Object.defineProperty(n.prototype,"pureIds",{get:function(){return this._pureIds},enumerable:!0,configurable:!0}),n.prototype.getCfgByLv=function(t){return this._tab[t]},n.prototype.getCfgBySkillId=function(t){return this._tab2[t]},n.prototype.getNextSkillCfgByLv=function(t){var e=this._tab[t+1];return e?e[1]?e:this.getNextSkillCfgByLv(t+1):null},Object.defineProperty(n.prototype,"firstLv",{get:function(){return this._firstLv},enumerable:!0,configurable:!0}),i=n,e.XianfuSkillCfg=i}(modules=modules||{}),function(s){var c,e,t,i,p,u,l,a,n;function o(){return null!==e&&e.apply(this,arguments)||this}c=s.xianfu||(s.xianfu={}),t=ui.XianfuShengjiViewUI,i=s.common.ProgressBarCtrl,p=s.config.XianfuCfg,u=s.common.CommonUtil,l=s.config.XianfuSkillCfg,a=s.config.SkillPureCfg,e=t,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerY=this.centerX=0,this._barBoxArr=[this.barBox_1,this.barBox_1,this.barBox_2,this.barBox_3],this._conditonArr=[this.conditionTxt_0,this.conditionTxt_1,this.conditionTxt_2,this.conditionTxt_3],this._ratioBarArr=new Array,this._ratioBarArr[0]=new i(this.barImg_0,this.barImg_0.width,this.barTxt_0),this._ratioBarArr[1]=new i(this.barImg_1,this.barImg_1.width,this.barTxt_1),this._ratioBarArr[2]=new i(this.barImg_2,this.barImg_2.width,this.barTxt_2),this._ratioBarArr[3]=new i(this.barImg_3,this.barImg_3.width,this.barTxt_3),this._btnClip=u.creatEff(this.goBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this._flagArr=[],this._skillIcons=[this.icon_0,this.icon_1,this.icon_2,this.icon_3]},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.updateView),this.onAutoGlobalEvt("XIANFU_SKILL_UPDATE",this,this.updateSkill)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnClip.play(),this.updateView(),this.updateSkill()},o.prototype.updateSkill=function(){var t=c.XianfuModel.instance.skillList;if(t)for(var e=0,i=this._skillIcons.length;e<i;e++){for(var n=l.instance.pureIds[e],s=void 0,o=0,a=t;o<a.length;o++){var r=a[o];if(u.getSkillPureIdById(r)==n){s=r;break}}s=s||u.getSkillIdByPureIdAndLv(n),this._skillIcons[e].info=s}},o.prototype.updateView=function(){var t=c.XianfuModel.instance.lv;if(t){this.lvMsz.value=t.toString(),this.nextLvTxt.text="下一等级 Lv."+(t+1),this.setSkillDes(t);var e=p.instance.getCfgByLv(t+1);if(!e)return this.maxLvBox.visible=!1,void(this.maxLvTxt.visible=!0);var i=e[0],n=i[1];this.unLockTxt.text=n[0],this.unLockContentTxt.text=n[1];var s=i[4];this.buildIcon(s);var o=p.instance.getCfgByLv(c.XianfuModel.instance.lv)[0][3],a=0;this._flag=!0;for(var r=this._flagArr.length=0,l=o.length;r<l;r++){var h=o[r][0];this.setTaskBar(r,h),a++}for(r=0,l=this._barBoxArr.length;r<l;r++)this._barBoxArr[r].visible=r<a;this._btnClip.visible=this._flag,this.goBtn.label=this._flag?"升级":"前往"}},o.prototype.setSkillDes=function(t){var e=l.instance.getNextSkillCfgByLv(t);if(e){var i=e[0],n=e[1],s=a.instance.getCfgById(u.getSkillPureIdById(n))[1],o=n%100;this.needLvTxt.text=i-t+"级",this.skillTxt.text="【"+s+"】"+o+"级",u.centerChainArr(this.width,[this.tipTxt_0,this.needLvTxt,this.tipTxt_1,this.skillTxt],5)}else this.tipTxt_0.visible=this.needLvTxt.visible=this.tipTxt_1.visible=this.skillTxt.visible=!1},o.prototype.setTaskBar=function(t,e){for(var i,n=p.instance.getCfgByLv(c.XianfuModel.instance.lv)[0][3],s=0,o=0,a=n.length;o<a;o++)if(n[o][0]==e){s=n[o][1],i=n[o][2];break}var r,l=u.bigNumToString(s);0==e?r="累计消耗灵气值达到"+l:1==e?r="累计消耗富贵值达到"+l:2==e?r="完成"+l+"次仙府任务":3==e?r="仙府风水值达到"+l:4==e?r="累计消耗灵气值达到"+l:5==e&&(r="累计消耗富贵值达到"+l);var h=c.XianfuModel.instance.treasureInfos(e);this._ratioBarArr[t].maxValue=s,this._ratioBarArr[t].value=h,this._conditonArr[t].text=r,this._conditonArr[t].color=s<=h?"#168a17":"#ff3e3e",this._flagArr.push([s<=h,i]),this._flag&&(this._flag=s<=h)},o.prototype.buildIcon=function(t){var e;0==t?e="xianfu/btn_xf_hlz.png":1==t?e="xianfu/btn_xf_jbp.png":2==t?e="xianfu/btn_xf_ldl.png":3==t?e="xianfu/btn_xf_lhl.png":4==t&&(e="xianfu/btn_xf_lhl.png"),this.iconImg.skin=e},o.prototype.goBtnHandler=function(){if(this._flag)c.XianfuCtrl.instance.xianfuShengji();else{for(var t=!1,e=0,i=this._flagArr.length;e<i;e++)if(!this._flagArr[e][0]){t=!0;var n=this._flagArr[e][1];if(n)return void WindowManager.instance.openByActionId(n)}t&&s.notice.SystemNoticeManager.instance.addNotice("前往炼制崖、灵兽阁进行炼丹、游历可消耗灵气、富贵值",!0)}},o.prototype.aboutBtnHandler=function(){u.alertHelp(20030)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._barBoxArr=this.destroyElement(this._barBoxArr),this._conditonArr=this.destroyElement(this._conditonArr),this._ratioBarArr=this.destroyElement(this._ratioBarArr),this._btnClip=this.destroyElement(this._btnClip),this._skillIcons=this.destroyElement(this._skillIcons),e.prototype.destroy.call(this,t)},n=o,c.XianfuShengjiPanel=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.xianfu||(t.xianfu={}),n=ui.XianfuSmeltDetailsAlertUI,s=t.common.CustomSlide,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.txt,"#4C5E8A","SimHei",24,"left","middle"),this.txt.style.lineHeight=28,this._slide=new s(this.con,this.txt)},a.prototype.offEvt=function(){this._slide.removeListeners(),i.prototype.offEvt.call(this)},a.prototype.destroy=function(){this._slide=this.destroyElement(this._slide),i.prototype.destroy.call(this)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._param=t},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.txt.innerHTML=this._param;var t=this.txt.contextHeight;this._slide.initState(t)},o=a,e.XianfuSmeltDetailsAlert=o}(modules=modules||{}),function(t){var o,e,i,s,n,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}o=t.xianfu||(t.xianfu={}),i=ui.XianfuLeftBottomViewUI,s=t.config.XianfuAnimalCfg,n=t.npc.NpcCtrl,a=t.dungeon.DungeonCtrl,e=i,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.left=0,this.bottom=400,this.layer=3,this.closeByOthers=!1,this._time=0,this._arrTxt=[this.arrTxt_0,this.arrTxt_1],this._arrBoxs=[this.arrBox_0,this.arrBox_1]},l.prototype.destroy=function(){this._arrBoxs=this.destroyElement(this._arrBoxs),this._arrTxt=this.destroyElement(this._arrTxt),e.prototype.destroy.call(this)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),Laya.timer.loop(1e3,this,this.loopHandler),this.onAutoClick(this.btnBox_0,this,this.clickBtnHandler,[0]),this.onAutoClick(this.btnBox_1,this,this.clickBtnHandler,[1]),this.onAutoGlobalEvt("XIANFU_EVENT_UPDATE",this,this.updateEventIcon),this.onAutoGlobalEvt("XIANFU_EVENT_UPDATE",this,this.otherAreaMatch),this.onAutoGlobalEvt("SELECT_XIANFU_AREA",this,this.otherAreaMatch),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.otherAreaMatch)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._skinType=[0,1],this.clickBtnHandler(0),this.updateEventIcon()},l.prototype.loopHandler=function(){this._time<=0?this.eventBox.visible=!1:(this.timeTxt.text=t.common.CommonUtil.msToHHMMSS(this._time),this._time-=1e3)},Object.defineProperty(l.prototype,"checkIsHaveEvent",{get:function(){return!o.XianfuModel.instance.xianfuEvent||!o.XianfuModel.instance.xianfuEvent[1]},enumerable:!0,configurable:!0}),l.prototype.updateEventIcon=function(){if(this.checkIsHaveEvent)this.eventBox.visible=!1;else{this.eventBox.visible=!0;var t=o.XianfuModel.instance.xianfuEvent[0];this.eventIcon.skin="xianfu/event_"+t+".png",this._time=o.XianfuModel.instance.xianfuEvent[2]-GlobalData.serverTime,this.hintTxt.text=1==t?"离开倒计时":2==t||3==t?"撤退倒计时":"消失倒计时"}},l.prototype.otherAreaMatch=function(){var t=this.getOtherAreaId(),e=-1,i=o.XianfuModel.instance.checkEventRP();0!=i&&1!=i&&(e=o.XianfuModel.instance.areaId());for(var n=[],s=0;s<t.length;s++)e==t[s]?this.showEventArrImg(s,i-1):n[s]=t[s];for(s=0;s<n.length;s++)n[s]&&this.checkStateByArea(s,n[s])},l.prototype.checkStateByArea=function(t,e){this._arrBoxs[t].visible=!1,1==e?o.XianfuModel.instance.julingEvent&&this.showEventArrImg(t,o.XianfuModel.instance.julingEvent):2==e?o.XianfuModel.instance.lianzhiEvent?this.showEventArrImg(t,o.XianfuModel.instance.lianzhiEvent):o.XianfuModel.instance.lianzhiHaveTime&&this.showEventArrImg(t,o.XianfuModel.instance.lianzhiHaveTime):o.XianfuModel.instance.petEvent?this.showEventArrImg(t,o.XianfuModel.instance.petEvent):o.XianfuModel.instance.petHaveTime&&this.showEventArrImg(t,o.XianfuModel.instance.petHaveTime)},l.prototype.showEventArrImg=function(t,e){var i;null!=e?(this._arrBoxs[t].visible=!0,1==e?i="魔兵刷新":2==e?i="魔将刷新":3==e?i="灵脉刷新":4==e?i="宝矿刷新":5==e?i="可收获":6==e?i="可收获":7==e?i="可炼制":8==e?i="可收获":9==e&&(i="可游历"),this._arrTxt[t].text=i):this._arrBoxs[t].visible=!1},l.prototype.getOtherAreaId=function(){var t=o.XianfuModel.instance.panelType;return 0==t?[2,3]:1==t?[1,3]:[1,2]},l.prototype.setShowBtn=function(t,e){this.nameTxt_0.skin="xianfu/txt_xf_"+t+".png",this.iconImg_0.skin="xianfu/image_xf_"+t+".png",this.nameTxt_1.skin="xianfu/txt_xf_"+e+".png",this.iconImg_1.skin="xianfu/image_xf_"+e+".png"},l.prototype.clickBtnHandler=function(t){n.instance.gatherInterrupt(),PlayerModel.instance.selectTarget(0,-1),this.registerEvent(this._skinType[t]),GlobalData.dispatcher.event("SELECT_XIANFU_AREA")},l.prototype.registerEvent=function(t){if(a.instance.reqEnterScene(2241,t),0==(o.XianfuModel.instance.panelType=t))o.XianfuCtrl.instance.getBuildingInfo([0]),o.XianfuCtrl.instance.getBuildingInfo([1]),this.setShowBtn("lzy","lsg"),this._skinType=[1,2];else if(1==t)o.XianfuCtrl.instance.getBuildingInfo([2]),o.XianfuCtrl.instance.getBuildingInfo([3]),o.XianfuCtrl.instance.getBuildingInfo([4]),this.setShowBtn("jlt","lsg"),this._skinType=[0,2];else{for(var e=s.instance.ids,i=0,n=e.length;i<n;i++)o.XianfuCtrl.instance.getSpiritAnimalTravel([e[i]]);this.setShowBtn("jlt","lzy"),this._skinType=[0,1]}},r=l,o.XianfuLeftBottomPanel=r}(modules=modules||{}),function(e){var a,n,t,r,i;function s(){var t=null!==n&&n.apply(this,arguments)||this;return t._shouCi=!0,t}a=e.xianfu||(e.xianfu={}),t=ui.XianfuBottomViewUI,r=e.config.SceneHomesteadCfg,n=t,__extends(s,n),s.prototype.initialize=function(){n.prototype.initialize.call(this),this.zOrder=-1,this._shouCi=!0,this.centerX=0,this.bottom=234,this.closeByOthers=!1,this.layer=3;for(var t=[this.item_0,this.item_1,this.item_2,null,null,this.item_5,this.item_6,this.item_7,this.item_8],e=0,i=t.length;e<i;e++)t[e]&&(t[e].type=e);this._recordWheel=[]},s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.eventBtn,this,this.eventCkickHandler),this.onAutoGlobalEvt("SELECT_XIANFU_AREA",this,this.updateBuildInfo),this.onAutoGlobalEvt("SELECT_XIANFU_AREA",this,this.updateEventBtn),this.onAutoGlobalEvt("XIANFU_EVENT_UPDATE",this,this.updateEventBtn),this.onAutoGlobalEvt("SCENE_GATHER_END",this,this.continueGather)},s.prototype.offEvt=function(){n.prototype.offEvt.call(this),this._eventBtnTipImgTween&&(this._eventBtnTipImgTween.stop(),this._eventBtnTipImgTween=null),this._eventBtnTipImgEff&&this._eventBtnTipImgEff.stop()},s.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.updateBuildInfo(),this.updateEventBtn()},s.prototype.updateBuildInfo=function(){var t=a.XianfuModel.instance.panelType;this.JuLingTingBox.visible=this.LianZhiYaBox.visible=this.petBox.visible=!1,0==t?this.JuLingTingBox.visible=!0:1==t?this.LianZhiYaBox.visible=!0:this.petBox.visible=!0},s.prototype.updateEventBtn=function(){if(Laya.timer.clear(this,this.eventCkickHandler),this.checkSiteMate()){var t=a.XianfuModel.instance.xianfuEvent[0];this.eventBtn.skin="xianfu/event_btn_"+t+".png",this.eventBtn.visible=!0,this._shouCi&&(this.eventBtnTipImg.visible=!0,this.eventBtnTipImg.y=-99,2==t?this.eventBtnTipText.text="点击击败":3==t?this.eventBtnTipText.text="点击击败":4==t?this.eventBtnTipText.text="点击采集":5==t&&(this.eventBtnTipText.text="点击采集"),this._eventBtnTipImgTween=TweenJS.create(this.eventBtnTipImg).to({y:this.eventBtnTipImg.y-20},1e3).start().yoyo(!0).repeat(99999999),this._eventBtnTipImgEff?(this._eventBtnTipImgEff.visible=!0,this._eventBtnTipImgEff.play()):(this._eventBtnTipImgEff=e.common.CommonUtil.creatEff(this.eventBtnBOX,"activityEnter",15),this._eventBtnTipImgEff.visible=!0,this._eventBtnTipImgEff.play(),this._eventBtnTipImgEff.scale(1.2,1.2),this._eventBtnTipImgEff.pos(-2,-6)),this._shouCi=!1)}else this.eventBtn.visible=!1,PlayerModel.instance.selectTarget(0,-1),this.eventBtnTipImg.visible=!1,this._eventBtnTipImgTween&&this._eventBtnTipImgTween.stop(),this._eventBtnTipImgEff&&(this._eventBtnTipImgEff.visible=!1,this._eventBtnTipImgEff.stop()),this._shouCi=!0},s.prototype.eventCkickHandler=function(){Laya.timer.clear(this,this.eventCkickHandler);var t,e=a.XianfuModel.instance.xianfuEvent,i=e[0],n=a.XianfuModel.instance.fengshuiLv,s=e[3],o=r.instance.getCfgByLvAndWheel(n,s);this._recordWheel[i]=s,2==i?PlayerModel.instance.selectTarget(1,-1):3==i?PlayerModel.instance.selectTarget(1,-1):4==i?(t=o[6][1],PlayerModel.instance.selectTarget(3,t)):5==i&&(t=o[7][1],PlayerModel.instance.selectTarget(3,t)),this.eventBtnTipImg.visible=!1,this._eventBtnTipImgTween&&this._eventBtnTipImgTween.stop(),this._eventBtnTipImgEff&&(this._eventBtnTipImgEff.visible=!1,this._eventBtnTipImgEff.stop())},s.prototype.checkSiteMate=function(){var t=a.XianfuModel.instance.xianfuEvent;if(t&&t[1]&&1!==a.XianfuModel.instance.xianfuEvent[0]){var e=a.XianfuModel.instance.areaId();if(a.XianfuModel.instance.panelType==e-1)return!0}this.eventBtn.visible=!1},s.prototype.continueGather=function(){var t=a.XianfuModel.instance.xianfuEvent;if(t){var e=t[3],i=a.XianfuModel.instance.xianfuEvent[0];e>this._recordWheel[i]?this._recordWheel[i]=e:this.checkSiteMate()&&Laya.timer.once(200,this,this.eventCkickHandler)}},s.prototype.destroy=function(t){void 0===t&&(t=!0),n.prototype.destroy.call(this,t),this._eventBtnTipImgEff&&(this._eventBtnTipImgEff.removeSelf(),this._eventBtnTipImgEff.destroy(),this._eventBtnTipImgEff=null)},i=s,a.XianfuBottomPanel=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.xianfu||(t.xianfu={}),n=ui.XianfuRightBottomViewUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.right=0,this.bottom=540,this.closeByOthers=!1,this.layer=3,this._eventIds=[],CommonUtil.setHTMLPro(this.wordTxt,"#4C5E8A","SimHei",24,"left","middle"),this.wordTxt.style.wordWrap=!0,this._girlTween=TweenJS.create(this.girlBtn),this._wordBoxTween=TweenJS.create(this.wordBox),this._grilWords=t.config.BlendCfg.instance.getCfgById(27014)[2]},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.girlBtn,this,this.girlBtnHandler),this.onAutoClick(this.girlBtn1,this,this.girlBtnHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.checkRP),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.checkRP),this.onAutoGlobalEvt("XIANFU_SKILL_UPDATE",this,this.checkRP),this.onAutoGlobalEvt("XIANFU_WIND_WATER_UPTATE",this,this.checkRP),this.regAutoRP(this.rpImg,["xianfuShengjiRP","xianfuTaskRP"])},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.checkOperaEvent(),this.checkRP()},o.prototype.checkRP=function(t){null!=t&&0!==t||(this.rpImg.visible=e.XianfuModel.instance.checkShengjiRP()||e.XianfuModel.instance.checkTaskRP()||e.XianfuModel.instance.checkArticleRP())},o.prototype.initWord=function(){var t=this;this.wordTxt.innerHTML='<span style="color:rgb(56,54,53)">主人，点我可以查看</span><span style="color:rgb(191,79,3)">仙府升级、任务、风水</span><span style="color:rgb(56,54,53)">和总览哦</span>',this.wordTxtCenterY(),this.girlBtn.scale(0,0),this.wordBox.x=this.wordBox.width,this._girlTween.to({scaleX:1,scaleY:1},500).start().onComplete(function(){t._wordBoxTween.to({x:0},500).start(),t._wordTime=2e3,Laya.timer.loop(1e3,t,t.wordShow)})},o.prototype.wordShow=function(){if(this._wordTime<=0){if(0<this._eventIds.length){var t=this._eventIds.shift();return this.wordTxt.innerHTML=this._grilWords[t],this.wordTxtCenterY(),void(this._wordTime=2e3)}return Laya.timer.once(15e3,this,this.checkOperaEvent),this.wordBox.x=this.wordBox.width,void Laya.timer.clear(this,this.wordShow)}this._wordTime-=1e3},o.prototype.wordTxtCenterY=function(){this.wordTxt.style.height=this.wordTxt.contextHeight,this.wordTxt.y=(this.wordBox.height-this.wordTxt.height)/2},o.prototype.checkOperaEvent=function(){this._eventIds.length=0;var t=e.XianfuModel.instance.checkEventRP();0!==t&&this._eventIds.push(t-1),e.XianfuModel.instance.julingEvent&&this._eventIds.push(e.XianfuModel.instance.julingEvent),e.XianfuModel.instance.lianzhiEvent&&this._eventIds.push(e.XianfuModel.instance.lianzhiEvent),e.XianfuModel.instance.lianzhiHaveTime&&this._eventIds.push(e.XianfuModel.instance.lianzhiHaveTime),e.XianfuModel.instance.petEvent&&this._eventIds.push(e.XianfuModel.instance.petEvent),e.XianfuModel.instance.petHaveTime&&this._eventIds.push(e.XianfuModel.instance.petHaveTime),e.XianfuModel.instance.checkShengjiRP()&&this._eventIds.push(10),e.XianfuModel.instance.checkTaskRP()&&this._eventIds.push(11),e.XianfuModel.instance.checkArticleRP()&&this._eventIds.push(12),0<this._eventIds.length&&this.initWord()},o.prototype.girlBtnHandler=function(){WindowManager.instance.open(170)},o.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.checkOperaEvent),Laya.timer.clear(this,this.wordShow),this._girlTween.stop(),this._wordBoxTween.stop(),this.girlBtn.scale(0,0),this.wordBox.x=this.wordBox.width},o.prototype.destroy=function(){i.prototype.destroy.call(this),this._wordBoxTween=null,this._girlTween=null},s=o,e.XianfuRightBottomPanel=s}(modules=modules||{}),function(i){var h,t,e,n,c,s;function o(){return null!==t&&t.apply(this,arguments)||this}h=i.xianfu||(i.xianfu={}),e=ui.JulingAccountAlertUI,n=i.common.CustomClip,c=i.common.CommonUtil,t=e,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.getBtn.addChild(this._btnClip),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this.haloBtn.underline=!0,this.haloBtn.typeset(),this._time=0,this.haloBtn.visible=i.halo.HaloModel.instance.haloOpen},o.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.haloBtn,this,this.onHaloBtnClick),this.onAutoGlobalEvt("XIANFU_BUILD_UPDATE",this,this.updateView),this.onAutoGlobalEvt("HALO_INFO_UPDATE",this,this.updateHaloInfo),Laya.timer.loop(1e3,this,this.loopHandler)},o.prototype.offEvt=function(){t.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._btnClip.play(),this.updateView()},o.prototype.updateView=function(){var t=h.XianfuModel.instance.buildType;this.titleTxt.text=t?"聚宝盆":"汇灵阵",this.moneyImg.skin=t?"xianfu/19_s.png":"xianfu/18_s.png";var e=h.XianfuModel.instance.treasureInfos(t)||0;this.moneyTxt.text=e.toString();var i=h.XianfuModel.instance.getBuildInfo(t),n=this._time=i[2],s=i[3],o=i[4],a=i[6],r=i[5];if(this.continueTimeTxt.text=t?"聚宝盆已持续聚宝"+c.getTimeTypeAndTime(n):"汇灵阵已持续汇灵"+c.getTimeTypeAndTime(n),this.valueTxt_0.text=o.toString(),this.valueTxt_1.text=r.toString(),this.valueTxt_2.text=a.toString(),this.IconImg_0.skin=this.IconImg_1.skin=this.IconImg_2.skin=c.getIconById(t?91930001:91830001,!0),this.typeTxt.text=t?"聚宝":"汇灵",1==s){var l=h.XianfuModel.instance.stageOutput[t];this.hintTxt.text=this.typeTxt.text+"达到"+c.getTimeTypeAndTime(l)+"才可领取收益",this.hintTxt.visible=!0,this._btnClip.visible=this.getBtn.visible=!1}else 2!=s&&3!=s||(this.hintTxt.visible=!1,this._btnClip.visible=this.getBtn.visible=!0);this.updateHaloInfo()},o.prototype.loopHandler=function(){var t=h.XianfuModel.instance.buildType,e=h.XianfuModel.instance.maxOutput[t];i.halo.HaloModel.instance.haloOpen&&i.halo.HaloModel.instance.isHalo()&&(e+=i.config.HaloCfg.instance.getParams(3)[0==t?1:3]),this._time>=e?this.continueTimeTxt.text=t?"聚宝盆已持续聚宝"+c.getTimeTypeAndTime(this._time):"汇灵阵已持续汇灵"+c.getTimeTypeAndTime(this._time):(this.continueTimeTxt.text=t?"聚宝盆已持续聚宝"+c.getTimeTypeAndTime(this._time):"汇灵阵已持续汇灵"+c.getTimeTypeAndTime(this._time),this._time+=1e3)},o.prototype.getBtnHandler=function(){var t=h.XianfuModel.instance.buildType;h.XianfuCtrl.instance.getBuildProduceAward([t]),this.close()},o.prototype.onHaloBtnClick=function(){WindowManager.instance.open(1493)},o.prototype.updateHaloInfo=function(){var t=h.XianfuModel.instance.buildType;this.typeTxt.text=t?"聚宝":"汇灵",this.haloBtn.text=i.halo.HaloModel.instance.isHalo()?"已提升"+this.typeTxt.text+"上限":"提升"+this.typeTxt.text+"上限",this.haloBtn.mouseEnabled=!i.halo.HaloModel.instance.isHalo(),this.haloBtn.underline=!i.halo.HaloModel.instance.isHalo(),this.haloBtn.typeset();var e=h.XianfuModel.instance.maxOutput[t];i.halo.HaloModel.instance.haloOpen&&i.halo.HaloModel.instance.isHalo()&&(e+=i.config.HaloCfg.instance.getParams(3)[0==t?1:3]),this.timeTxt.text=c.getTimeTypeAndTime(e)},o.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),t.prototype.destroy.call(this)},s=o,h.JulingAccountAlert=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tab2={},this._tab3={};for(var t=GlobalData.getConfig("xianfu_build"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[0],o=n[1];this._tab[s]||(this._tab[s]={}),this._tab[s][o]=n,this._tab2[s]=o;var a=n[5];this._tab3[s]||(this._tab3[s]=[]);for(var r=0;r<a.length;r++)this._tab3[s][r]||(this._tab3[s][r]=t[e][1])}},n.prototype.getCfgByIdAndLv=function(t,e){return this._tab[t]?this._tab[t][e]:null},n.prototype.getMaxLvById=function(t){return this._tab2[t]},n.prototype.getOpenLvByTypeAndIndex=function(t,e){return this._tab3[t][e]},i=n,e.XianfuBuildCfg=i}(modules=modules||{}),function(n){var h,t,e,i,s,o,a,c,r;function l(){return null!==t&&t.apply(this,arguments)||this}h=n.xianfu||(n.xianfu={}),e=ui.XianfuSmeltAlertUI,i=n.bag.BaseItem,s=Laya.Event,o=n.common.CommonUtil,a=n.common.NumInputCtrl,c=n.config.XianfuBuildCfg,t=e,__extends(l,t),l.prototype.initialize=function(){t.prototype.initialize.call(this),this._centerItem=new i,this._centerItem.pos(280,111),this.addChild(this._centerItem),this._list=new n.common.CustomList,this._list.scrollDir=1,this._list.hCount=5,this._list.x=51,this._list.y=404,this._list.width=557,this._list.height=190,this._list.spaceX=13,this._list.itemRender=h.XianfuSmeltItem,this.addChild(this._list),this._numInputCtrl=new a(this.inputTxt,this.addBtn,this.subBtn),this._oldIndex=-1,this.inputTxt.restrict="0-9"},l.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._list,s.SELECT,this,this.selectListHandler),this.onAutoClick(this.smeltBtn,this,this.smeltBtnHandler),this.onAutoClick(this.attrBtn,this,this.attrBtnHandler),this.onAutoClick(this.maxBtn,this,this.maxBtnHandler),this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler),this.onAutoEvt(this.inputTxt,"change",this,this.changeHandler),this.onAutoEvt(this.inputTxt,"input",this,this.changeHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.setMax),this.onAutoGlobalEvt("XIANFU_WIND_WATER_UPTATE",this,this.setCfgLimit),this._numInputCtrl.addListeners()},l.prototype.offEvt=function(){this._numInputCtrl.removeListeners(),t.prototype.offEvt.call(this)},l.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._materialCount=h.XianfuModel.instance.treasureInfos(0),this.setCfgLimit(),this._numInputCtrl.value=1,this.updateView(),this._list.selectedIndex=0},l.prototype.setCfgLimit=function(){this._cfgLimit=h.XianfuModel.instance.maxOutput[2]+h.XianfuModel.instance.dailySmeltTimeAddValue,this._numInputCtrl.max=this._cfgLimit},l.prototype.setMax=function(){this._materialCount=h.XianfuModel.instance.treasureInfos(0);var t=this._list.selectedIndex,e=this._products[t][3];this._materialLimit=Math.floor(this._materialCount/e);var i=this._materialLimit>this._cfgLimit?this._cfgLimit:0==this._materialLimit?1:this._materialLimit;this._numInputCtrl.max=i},l.prototype.updateView=function(){var t=h.XianfuModel.instance.buildType,e=h.XianfuModel.instance.getBuildInfo(t)[1];this.titleTxt.text=2==t?"炼丹炉Lv."+e:3==t?"炼器炉Lv."+e:"炼魂炉Lv."+e;var i=c.instance.getMaxLvById(t),n=c.instance.getCfgByIdAndLv(t,i),s=c.instance.getCfgByIdAndLv(t,e),o=this._products=n[5];this._productsByLv=s[5];for(var a=[],r=0,l=o.length;r<l;r++)a.push([[o[r][0],1,0,null],r]);this._list.datas=a},l.prototype.maxBtnHandler=function(){this._numInputCtrl.value=this._numInputCtrl.max},l.prototype.selectListHandler=function(){var t=this._list.selectedIndex,e=this._list.selectedData;if(e){this._centerItem.itemData&&t!=this._oldIndex&&1<this._numInputCtrl.value&&(this._numInputCtrl.value=this._numInputCtrl.min);var i=e[0];this._centerItem.dataSource=i,this.conImg.skin=o.getIconById(this._products[t][2]),this.setConsume(),100*this._productsByLv[t][4]+h.XianfuModel.instance.successAddValue<=100?this.succeedPerTxt.text=n.common.AttrUtil.formatFloatNum((100*this._productsByLv[t][4]+h.XianfuModel.instance.successAddValue)/100)+"%":100<100*this._productsByLv[t][4]+h.XianfuModel.instance.successAddValue?this.succeedPerTxt.text="100%":this.succeedPerTxt.text="err",this.setMax(),this._oldIndex=t,this.changeHandler()}},l.prototype.setConsume=function(t){void 0===t&&(t=1);var e=this._list.selectedIndex,i=Math.floor(this._products[e][3]*t*(1-.01*h.XianfuModel.instance.smeltConsumeReduceValue));this.consumeTxt.text=o.bigNumToString(this._materialCount)+"/"+o.bigNumToString(i),this.consumeTxt.color=this._materialCount>=i?"#1f304d":"#ff3e3e"},l.prototype.addBtnHandler=function(){var t=parseInt(this.inputTxt.text);isNaN(t)&&(t=this._numInputCtrl.value=this._numInputCtrl.min),t>=this._materialLimit?n.notice.SystemNoticeManager.instance.addNotice("已达当前材料可炼最大上限"):t>=this._cfgLimit&&n.notice.SystemNoticeManager.instance.addNotice("已达每次开炉可炼最大上限")},l.prototype.changeHandler=function(){var t=parseInt(this.inputTxt.text);isNaN(t)&&(t=this._numInputCtrl.value=this._numInputCtrl.min);var e=this._list.selectedIndex,i=this._products[e][7];this.needTimeTxt.text=""+o.formatTime(i*t),this.setConsume(t)},l.prototype.smeltBtnHandler=function(){h.XianfuCtrl.instance.makeItem([h.XianfuModel.instance.buildType,[[this._list.selectedIndex,this._numInputCtrl.value]]]),this.close()},l.prototype.attrBtnHandler=function(){WindowManager.instance.open(370)},l.prototype.aboutBtnHandler=function(){o.alertHelp(20062)},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._centerItem=this.destroyElement(this._centerItem),t.prototype.destroy.call(this)},r=l,h.XianfuSmeltAlert=r}(modules=modules||{}),function(t){var c,e,p,i,n,s,u,o;function a(){return null!==e&&e.apply(this,arguments)||this}c=t.xianfu||(t.xianfu={}),p=t.common.GlobalData,i=ui.XianfuSmeltingAlertUI,n=t.bag.BaseItem,s=t.common.CommonUtil,u=t.config.XianfuBuildCfg,e=i,__extends(a,e),a.prototype.destroy=function(){this._centerItem=this.destroyElement(this._centerItem),e.prototype.destroy.call(this)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this._state=0,this._cdTime=-1,this._centerItem=new n,this._centerItem.pos(280,120),this.addChild(this._centerItem)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoGlobalEvt("XIANFU_BUILD_UPDATE",this,this.updateView),Laya.timer.loop(1e3,this,this.loopHandler)},a.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},a.prototype.updateView=function(){var t=c.XianfuModel.instance.buildType,e=c.XianfuModel.instance.getBuildInfo(t),i=e[1],n=e[2],s=this._state=e[3],o=u.instance.getCfgByIdAndLv(c.XianfuModel.instance.buildType,i)[5];if(this.titleTxt.text=2==t?"炼丹炉Lv."+i:3==t?"炼器炉Lv."+i:"炼魂炉Lv."+i,1==s){this._cdTime=n,this.loopHandler();var a=e[7][0][0];this._centerItem.dataSource=[o[a][0],0,0,null];var r=e[10],l=o[a][7],h=Math.ceil((n-p.serverTime)/l);this.countTxt.text="炼制次数: "+(r-h)+"/"+r}else 2==s&&(WindowManager.instance.open(371),this.close())},a.prototype.loopHandler=function(){this._cdTime-p.serverTime<=0?0==this._state&&(WindowManager.instance.open(178),this.close()):this.timeTxt.text="剩余时间: "+s.timeStampToMMSS(this._cdTime)},a.prototype.getBtnHandler=function(){c.XianfuCtrl.instance.endSmelt()},o=a,c.XianfuSmeltingAlert=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._ids=[];for(var t=GlobalData.getConfig("xianfu_travel"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e],this._ids.push(t[e][0])},n.prototype.getCfgById=function(t){return this._tab[t]},Object.defineProperty(n.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),i=n,e.XianfuTravelCfg=i}(modules=modules||{}),function(t){var l,e,i,h,n;function s(){return null!==e&&e.apply(this,arguments)||this}l=t.xianfu||(t.xianfu={}),i=ui.XianfuPetBuyPropAlertUI,h=t.config.XianfuTravelCfg,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.onceBox.visible=!1,this.contentTxt.visible=!0,CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24),this.contentTxt.style.wordWrap=!0,this.contentTxt.style.leading=5},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},s.prototype.updateView=function(){var t,e,i=l.XianfuModel.instance.selectSite,n=0==i?"方圆百里":1==i?"千里之遥":2==i?"四海八荒":"九州三界",s=l.XianfuModel.instance.selectBuyProp,o=this._travelId=h.instance.ids[i],a=h.instance.getCfgById(o),r=a[13];0==s?(t=a[3][1],e=a[3][2],this.contentTxt.innerHTML="游历终点:<span style='color:#168a17'>"+n+"</span>,"+r[0]+"<br/><br/>\n                 是否花费: <img src='"+CommonUtil.getIconById(t)+'\' width="40" height="40"/>'+e+" 进行购买?"):(t=a[7][1],e=a[7][2],this.contentTxt.innerHTML="游历终点:<span style='color:#168a17'>"+n+"</span>,"+r[1]+"<br/><br/>\n                是否花费: <img src='"+CommonUtil.getIconById(t)+'\' width="40" height="40"/>'+e+" 进行购买?")},s.prototype.okBtnHandler=function(){l.XianfuCtrl.instance.buyTravelItem([this._travelId,l.XianfuModel.instance.selectBuyProp])},n=s,l.XianfuPetBuyPropAlert=n}(modules=modules||{}),function(t){var g,i,e,y,_,v,n,I,b,s;function o(){return null!==i&&i.apply(this,arguments)||this}g=t.xianfu||(t.xianfu={}),e=ui.XianfuPetReadyGoAlertUI,y=t.config.XianfuAnimalCfg,_=t.config.ExteriorCfg,v=t.config.XianfuTravelCfg,n=t.bag.BaseItem,I=t.bag.BagModel,b=t.common.CommonUtil,i=e,__extends(o,i),o.prototype.destroy=function(){this._sites=this.destroyElement(this._sites),this._conItem=this.destroyElement(this._conItem),i.prototype.destroy.call(this)},o.prototype.initialize=function(){i.prototype.initialize.call(this),this.fsTxt.underline=!0,b.setHTMLPro(this.contentTxt_0,"#4C5E8A","SimHei",24),this.contentTxt_0.style.leading=5,b.setHTMLPro(this.countTxt,"#4C5E8A","SimHei",24),this._currIndex=0,this._ids=v.instance.ids,this._sites=[this.disImg_0,this.disImg_1,this.disImg_2,this.disImg_3],this._conItem=new n,this._conItem.centerX=0,this._conItem.y=595,this._conItem._numTxt.y=100,this._conItem._numTxt.width=500,this._conItem._numTxt.x=-200,this._conItem._numTxt.align="center",this._conItem.scale(.8,.8),this.addChild(this._conItem)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoClick(this.lpBtn,this,this.buyPropBtnHandler,[0]),this.onAutoClick(this.hsfBtn,this,this.buyPropBtnHandler,[1]),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView);for(var t=0,e=this._sites.length;t<e;t++)this.onAutoClick(this._sites[t],this,this.disHandler,[t])},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},o.prototype.updateView=function(){var t=g.XianfuModel.instance.selectPetIndex;this._petId=y.instance.ids[t];var e=_.instance.getCfgById(this._petId)[2],i=g.XianfuModel.instance.getPetInfos(this._petId),n=i[1];this.titleTxt.text=e+" Lv."+n;for(var s=v.instance.getCfgById(this._ids[this._currIndex]),o=s[10],a="",r=0,l=o.length;r<l;r++)a+='<img src="xianfu/1.png" />'+o[r]+"<br/>";var h=s[6];h+=Math.floor(h*g.XianfuModel.instance.travelExpAddValue*.01),this.contentTxt_0.innerHTML="<img src=\"xianfu/1.png\" />灵兽经验: <span style='color:#168a17'>"+h+"</span>点<br/>"+a;var c=s[4],p=Math.floor(c[1]*(1-.01*g.XianfuModel.instance.travelConsumeReduceValue)),u=g.XianfuModel.instance.treasureInfos(1);this._conItem.dataSource=[c[0],p,0,null],this._conItem.setNum(b.bigNumToString(u)+"/"+b.bigNumToString(p),0<=u-p?"#FDFDFF":"#ff7462"),this._lpId=0,this._isAmulet=!1;var d=s[5];if(this.timeTxt.text=""+b.getTimeTypeAndTime(d),this.countTxt.innerHTML="今日还可游历<span style='color:#168a17'>"+(g.XianfuModel.instance.maxRuningCount-i[6])+"</span>次",0==this._currIndex||1==this._currIndex)this.hsfBtn.visible=this.lpBtn.visible=this.hsfAddImg.visible=this.lpAddImg.visible=!1;else{this.lpBtn.visible=!0;var m=s[3][0],f=I.instance.getItemCountById(m);this.lpBtn.gray=this.lpAddImg.visible=!(0<f),this._lpId=this.lpBtn.gray?0:m}g.XianfuModel.instance.selectSite=this._currIndex},o.prototype.disHandler=function(t){this.frameImg.x=this._sites[t].x+1,this._currIndex=t,this.updateView()},o.prototype.goBtnHandler=function(){var t=v.instance.ids[g.XianfuModel.instance.selectSite];g.XianfuCtrl.instance.travel([this._petId,t,this._lpId,!!this._isAmulet])},o.prototype.buyPropBtnHandler=function(t){g.XianfuModel.instance.selectBuyProp=t,WindowManager.instance.open(189)},s=o,g.XianfuPetReadyGoAlert=s}(modules=modules||{}),function(t){var T,i,e,w,x,B,P,n,s,S,o;function a(){return null!==i&&i.apply(this,arguments)||this}T=t.xianfu||(t.xianfu={}),e=ui.XianfuPetTravelingAlertUI,w=t.config.XianfuAnimalCfg,x=t.config.ExteriorCfg,B=t.config.XianfuCfg,P=t.config.XianfuTravelCfg,n=Laya.Event,s=t.bag.BaseItem,S=t.common.CommonUtil,i=e,__extends(a,i),a.prototype.destroy=function(){this._items=this.destroyElement(this._items),i.prototype.destroy.call(this)},a.prototype.initialize=function(){i.prototype.initialize.call(this),S.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24),this.contentTxt.style.leading=5,S.setHTMLPro(this.awardTxt,"#4C5E8A","SimHei",24),this.awardTxt.style.leading=5,this._items=[];for(var t=0;t<2;t++){var e=new s;e.y=368,e.nameVisible=!1,this.addChild(e),this._items.push(e)}this._travelTxtlastY=0},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.contentTxt,n.MOUSE_DOWN,this,this.downHandler),this.onAutoEvt(this.contentTxt,n.MOUSE_WHEEL,this,this.wheelHandler),this.onAutoClick(this.endBtn,this,this.endBtnHandler),this.onAutoGlobalEvt("XIANFU_PET_UPDATE",this,this.updateView),Laya.timer.loop(1e3,this,this.loopHandler)},a.prototype.downHandler=function(){this._travelTxtlastY=this.contentTxt.mouseY,Laya.stage.on(n.MOUSE_MOVE,this,this.moveHandler),Laya.stage.on(n.MOUSE_UP,this,this.upHandler),Laya.stage.on(n.MOUSE_OUT,this,this.upHandler)},a.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scroll(e)},a.prototype.scroll=function(t){this.contentTxt.y=this.contentTxt.y-t,this.contentTxt.y<this.contentPanel.height-this.contentTxt.height?(this.contentTxt.y=this.contentPanel.height-this.contentTxt.height,this._travelTxtlastY=this.contentTxt.y):0<this.contentTxt.y&&(this._travelTxtlastY=this.contentTxt.y=0)},a.prototype.moveHandler=function(){var t=this._travelTxtlastY-this.contentTxt.mouseY;this.scroll(t),this._travelTxtlastY=this.contentTxt.mouseY},a.prototype.upHandler=function(){Laya.stage.off(n.MOUSE_MOVE,this,this.moveHandler),Laya.stage.off(n.MOUSE_UP,this,this.upHandler),Laya.stage.off(n.MOUSE_OUT,this,this.upHandler)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},a.prototype.updateView=function(){var t=T.XianfuModel.instance.selectPetIndex;this._petId=w.instance.ids[t];var e=x.instance.getCfgById(this._petId)[2],i=T.XianfuModel.instance.getPetInfos(this._petId),n=i[9],s=i[5];if(s){var o=P.instance.getCfgById(s),a=o[11],r=o[12],l=o[1],h=i[1];this.titleTxt.text=e+" Lv."+h,this._state=i[3];for(var c=B.instance.getCfgByPetId(this._petId)[11],p=a,u=0,d=n.length;u<d;u++)p+="<br/>"+c[n[u]];if(1==this._state){this.contentTxt.innerHTML=p,this._items[0].visible=this._items[1].visible=!1,this._cdTime=i[4],this.timeTxt.text=S.timeStampToHHMMSS(this._cdTime),this.goingBox.visible=!0,this.endBtn.y=570,this.height=this.bgImg.height=685,this.endBtn.label="立即结束",this.endPosTxt.text=l;var m=o[10],f=o[6],g="<img src=\"xianfu/1.png\" />灵兽经验: <span style='color:#168a17'>"+(f+=Math.floor(f*T.XianfuModel.instance.travelExpAddValue*.01))+"</span>点<br/>";for(u=0,d=m.length;u<d;u++)g+='<img src="xianfu/1.png" />'+m[u]+"<br/>";this.awardTxt.innerHTML=g,this.awardTxt.visible=!0}else{this.awardTxt.visible=this.goingBox.visible=!1,this.endBtn.y=500,this.height=this.bgImg.height=620,this.endBtn.label="领取",this.contentTxt.innerHTML=p+"<br/>"+r;var y=[],_=i[10],v=i[11],I=o[9],b=o[8];if(I[_][0]){var C=[I[_][0],I[_][1],0,null];y.push(C)}if(console.log("endBackIndex---"+v),console.log("endBacks.length---"+b.length),b[v][0]){var C=[b[v][0],b[v][1],0,null];y.push(C)}1==y.length?((C=this._items[0]).dataSource=y[0],this._items[0].visible=!0,this._items[1].visible=!1,C.x=281):(this._items[0].visible=this._items[1].visible=!0,this._items[0].dataSource=y[0],this._items[1].dataSource=y[1],this._items[0].x=180,this._items[1].x=380)}this.hintCloseTxt.y=this.height+50,this.contentTxt.style.height=this.contentTxt.contextHeight,this.contentTxt.height>this.contentPanel.height?this.contentTxt.y=this.contentPanel.height-this.contentTxt.height:this._travelTxtlastY=this.contentTxt.y=0}},a.prototype.endBtnHandler=function(){1==this._state?WindowManager.instance.open(193):(T.XianfuCtrl.instance.getTravelAward([this._petId]),this.close())},a.prototype.loopHandler=function(){this._cdTime<=0?this.timeTxt.visible=!1:(this.timeTxt.visible=!0,this.timeTxt.text=""+S.timeStampToHHMMSS(this._cdTime))},o=a,T.XianfuPetTravelingAlert=o}(modules=modules||{}),function(t){var o,e,i,a,r,n,s;function l(){return null!==e&&e.apply(this,arguments)||this}o=t.xianfu||(t.xianfu={}),i=ui.XianfuPetBuyPropAlertUI,a=t.config.XianfuAnimalCfg,r=t.config.BlendCfg,n=t.notice.SystemNoticeManager,e=i,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.onceBox.visible=!0,this.contentTxt.visible=!1,this.okBtn.label="立即结束"},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},l.prototype.updateView=function(){var t=o.XianfuModel.instance.selectPetIndex,e=this._id=a.instance.ids[t],i=o.XianfuModel.instance.getPetInfos(e)[4],n=Math.ceil((i-GlobalData.serverTime)/6e4)*r.instance.getCfgById(27005)[1][0],s=CommonUtil.getPropCountById(90140001);this._state=n<=s,this.numTxt.text=n.toString(),CommonUtil.chainArr([this.numTxt,this.desTxt])},l.prototype.okBtnHandler=function(){1===o.XianfuModel.instance.getPetInfos(this._id)[3]?this._state?o.XianfuCtrl.instance.travelFinish([a.instance.ids[o.XianfuModel.instance.selectPetIndex]]):CommonUtil.goldNotEnoughAlert():(n.instance.addNotice("灵兽已经游历归来，无需手动结束",!0),this.close())},s=l,o.XianfuPetAtOnceEndAlert=s}(modules=modules||{}),function(t){var n,s,e,o,a,r,i;function l(){return null!==s&&s.apply(this,arguments)||this}n=t.xianfu||(t.xianfu={}),e=ui.XianfuTaskViewUI,o=t.common.CustomList,a=t.common.ProgressBarCtrl,r=t.common.CustomClip,s=e,__extends(l,s),l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._pro=this.destroyElement(this._pro),this._activeTxts=this.destroyElement(this._activeTxts),this._dotImgs=this.destroyElement(this._dotImgs),this._effs=this.destroyElement(this._effs),s.prototype.destroy.call(this,t)},l.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=new o,this._list.pos(51,111),this._list.width=619,this._list.height=789,this._list.hCount=1,this._list.spaceX=5,this._list.itemRender=n.XianfuTaskItem,this.addChild(this._list),this._pro=new a(this.barImg,this.barImg.width,this.barTxt),this._activeTxts=[this.activeTxt_0,this.activeTxt_1,this.activeTxt_2,this.activeTxt_3];for(var t=0,e=this._activeTxts.length;t<e;t++)this._activeTxts[t].text="活跃度:"+n.XianfuModel.instance.taskActivesValue[t];for(this._pro.maxValue=n.XianfuModel.instance.taskActivesValue[3],this._dotImgs=[this.dotImg_0,this.dotImg_1,this.dotImg_2,this.dotImg_3],this._effs=[],t=0;t<4;t++){var i=new r;this.addChildAt(i,2),(this._effs[t]=i).pos(20+160*t,840),i.skin="assets/effect/availability.atlas",i.frameUrls=["availability/1.png","availability/2.png","availability/3.png","availability/4.png","availability/5.png","availability/6.png","availability/7.png","availability/8.png"],i.durationFrame=5,i.loop=!0,i.play()}},l.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoGlobalEvt("XIANFU_TASK_UPDATE",this,this.updateView),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.updateView),this.onAutoClick(this.activeBtn_0,this,this.activeBtnHandler,[0]),this.onAutoClick(this.activeBtn_1,this,this.activeBtnHandler,[1]),this.onAutoClick(this.activeBtn_2,this,this.activeBtnHandler,[2]),this.onAutoClick(this.activeBtn_3,this,this.activeBtnHandler,[3]),this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler)},l.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.updateView()},l.prototype.updateView=function(){var t=n.XianfuModel.instance.taskInfos.concat();t=t.sort(this.sortFunc.bind(this)),this._list.datas=t,this._pro.value=n.XianfuModel.instance.taskSchedule;for(var e=0,i=this._dotImgs.length;e<i;e++)n.XianfuModel.instance.taskSchedule>=n.XianfuModel.instance.taskActivesValue[e]&&-1==n.XianfuModel.instance.activeGrade.indexOf(e)?(this._effs[e].visible=this._dotImgs[e].visible=!0,this._effs[e].play()):(this._effs[e].visible=this._dotImgs[e].visible=!1,this._effs[e].stop())},l.prototype.activeBtnHandler=function(t){n.XianfuModel.instance.selectTaskActiveAward=t,n.XianfuCtrl.instance.getXianFuActivaAward([t])},l.prototype.aboutBtnHandler=function(){CommonUtil.alertHelp(20043)},l.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[2],o=e[2];return s==o?i-n:1==s&&1!=o?-1:1==o&&1!=s?1:0==s&&0!=o?-1:0==o&&0!=s?1:void 0},i=l,n.XianfuTaskPanel=i}(modules=modules||{}),function(c){var p,t,e,u,d,h,m,f,i,n;function s(){return null!==t&&t.apply(this,arguments)||this}p=c.xianfu||(c.xianfu={}),e=ui.XianfuPandectViewUI,u=c.config.XianfuCfg,d=c.config.XianfuAnimalCfg,h=c.config.AttrItemCfg,m=c.common.AttrUtil,f=c.config.XianfuBuildCfg,i=c.common.CustomSlide,t=e,__extends(s,t),s.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=this.centerY=0,this._slide=new i(this.con,this.box)},s.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("XIANFU_BUILD_UPDATE",this,this.updateBuild),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.updateView),this.onAutoGlobalEvt("XIANFU_PET_UPDATE",this,this.updatePet),this._slide.initState()},s.prototype.offEvt=function(){this._slide.removeListeners(),t.prototype.offEvt.call(this)},s.prototype.destroy=function(){this._slide=this.destroyElement(this._slide),t.prototype.destroy.call(this)},s.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateView(),this.updateBuild(),this.updatePet()},s.prototype.updatePet=function(){var t=d.instance.ids;this.show_5_To_8(t[0],this.box_5),this.show_5_To_8(t[1],this.box_6),this.show_5_To_8(t[2],this.box_7),this.show_5_To_8(t[3],this.box_8)},s.prototype.updateBuild=function(){this.show_0_Or_1_(1,this.box_0),this.show_0_Or_1_(0,this.box_1),this.show_2_To_4(2,this.box_2)},s.prototype.updateView=function(){this.lvMsz.value=p.XianfuModel.instance.lv.toString()},s.prototype.show_0_Or_1_=function(t,e){var i=p.XianfuModel.instance.getBuildInfo(t)[1];e.getChildByName("lvTxt").text="Lv."+i;var n=u.instance.getCfgByBuildIdAndLv(t,i),s=u.instance.getCfgByBuildIdAndLv(t,i+1);if(s){var o=s[8][0][1]-n[8][0][1],a=s[0];e.getChildByName("maxLvBox").getChildByName("upAttTxt").text=o.toString(),e.getChildByName("maxLvBox").getChildByName("needLvTxt").text="(仙府达到"+a+"级开启)"}else e.getChildByName("maxLvBox").visible=!1,e.getChildByName("maxLvTxt").visible=!0;var r=c.common.CommonUtil.getTimeTypeAndTime(p.XianfuModel.instance.intervalOutPutTime[t]),l=0==t?"聚灵":"聚宝",h=0==t?"灵气":"富贵";e.getChildByName("desTxt").text="每"+r+l+"一次,增加"+n[8][0][1]+"点"+h+"值"},s.prototype.show_2_To_4=function(t,e){var i=p.XianfuModel.instance.getBuildInfo(t),n=i?i[1]:1;e.getChildByName("lvTxt").text="Lv."+n;var s=i?i[11]:1,o=f.instance.getCfgByIdAndLv(t,n),a=f.instance.getCfgByIdAndLv(t,n+1),r=o[2];r=r||s,e.getChildByName("barImg").width=s/r*211,e.getChildByName("barTxt").text=s+"/"+r;var l=o[4],h=a?a[4]:null;this.formatEle(l,h,this.operatEle(e,o,a))},s.prototype.show_5_To_8=function(t,e){var i=p.XianfuModel.instance.getPetInfos(t),n=i?i[1]:1,s=i?i[2]:0;e.getChildByName("lvTxt").text="Lv."+n;var o=d.instance.getCfgByIdAndLv(t,n),a=d.instance.getCfgByIdAndLv(t,n+1),r=o[2];e.getChildByName("barImg").width=s/r*211,e.getChildByName("barTxt").text=s+"/"+r;var l=o[4],h=a?a[4]:null;this.formatEle(l,h,this.operatEle(e,o,a))},s.prototype.operatEle=function(t,e,i){var n=[t.getChildByName("attTxt_0"),t.getChildByName("attTxt_1")],s=[t.getChildByName("maxLvBox").getChildByName("upAttTxt_0"),t.getChildByName("maxLvBox").getChildByName("upAttTxt_1")];return i||(t.getChildByName("maxLvBox").visible=!1,t.getChildByName("maxLvTxt").visible=!0),[n,s]},s.prototype.formatEle=function(t,e,i){for(var n=0,s=.5*t.length;n<s;n++){var o=h.instance.getCfgById(t[2*n]),a=t[2*n+1],r=o[2];if(i[0][n].text=o[1]+" "+(r?m.formatFloatNum(a)+"%":Math.round(a)),e){var l=e[2*n+1]-a;i[1][n].text=""+(r?m.formatFloatNum(l)+"%":Math.round(l))}}},n=s,p.XianfuPandectPanel=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._arr=[];for(var t=[],e=GlobalData.getConfig("xianfu_decorate"),i=0,n=e.length;i<n;i++){this._tab[e[i][0]]=e[i];var s=e[i][0]/100>>0,o=e[i][0]/1e3>>0;t[o-1]||(t[o-1]={}),t[o-1][s]=100*s}for(i=0,n=t.length;i<n;i++){var a=t[i];for(var r in a)this._arr[i]||(this._arr[i]=[]),this._arr[i].push(a[r])}},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getIdsByBigType=function(t){return this._arr[t]},i=n,e.XianfuDecorateCfg=i}(modules=modules||{}),function(r){var c,e,t,i,n,s,l,a,u,d,o;function h(){return null!==e&&e.apply(this,arguments)||this}c=r.xianfu||(r.xianfu={}),t=r.bag.BaseItem,i=r.common.BtnGroup,n=r.common.CustomList,s=ui.XianfuWindWaterViewUI,l=r.config.XianfuDecorateCfg,a=r.common.CommonUtil,u=r.config.AttrItemCfg,d=r.common.AttrUtil,e=s,__extends(h,e),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._scheEff=this.destroyElement(this._scheEff),this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),this._item=this.destroyElement(this._item),this._nameArr=this.destroyElement(this._nameArr),this._liftArr=this.destroyElement(this._liftArr),this._upImgsArr=this.destroyElement(this._upImgsArr),this._valueArr=this.destroyElement(this._valueArr),this._btnClip=this.destroyElement(this._btnClip),this._btnGroupRPs=this.destroyElement(this._btnGroupRPs),e.prototype.destroy.call(this,t)},h.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._scheEff=a.creatEff(this.con,"wave",7),this._scheEff.visible=!0,this._scheEff.pos(0,-20),this._list=new n,this._list.pos(48,494),this._list.scrollDir=2,this._list.spaceX=8,this._list.vCount=1,this._list.width=621,this._list.height=181,this._list.itemRender=c.XianfuResItem,this.addChild(this._list),this._btnGroup=new i,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1,this.btnGroup_2),this._item=new t,this.addChild(this._item),this._item.pos(320,968),this._item.scale(.8,.8),this._btnClip=a.creatEff(this.upGradeBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this._nameArr=[this.attNameTxt_0,this.attNameTxt_1],this._liftArr=[this.proAttTxt_0,this.proAttTxt_1],this._upImgsArr=[this.arrImg_0,this.arrImg_1],this._valueArr=[this.attValue_0,this.attValue_1],this._btnGroupRPs=[this.dotImg_0,this.dotImg_1,this.dotImg_2],this._numDiff=0},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("XIANFU_WIND_WATER_UPTATE",this,this.setListDatas),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.updateFengshuiLv),this.onAutoEvt(this._btnGroup,Laya.Event.CHANGE,this,this.updateView),this.onAutoEvt(this._list,Laya.Event.SELECT,this,this.updateAttView),this.onAutoClick(this.upGradeBtn,this,this.upGradeBtnHandler),this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler),this.onAutoClick(this.attBtn,this,this.attBtnHandler),this.regAutoRP(this.dotImg_0,["xianfuArticleRP_0"]),this.regAutoRP(this.dotImg_1,["xianfuArticleRP_1"]),this.regAutoRP(this.dotImg_2,["xianfuArticleRP_2"])},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._scheEff.play(),this._btnClip.play(),this.updateFengshuiLv(),this.searchOne()},h.prototype.searchOne=function(){for(var t=0;t<this._btnGroupRPs.length;t++)if(this._btnGroupRPs[t].visible)return void(this._btnGroup.selectedIndex=t);this._btnGroup.selectedIndex=0},h.prototype.setListDatas=function(){for(var t=this._ids,e=c.XianfuModel.instance.fengshuiResList,i=0,n=0,s=e.length;n<s;n++){var o=e[n];i+=l.instance.getCfgById(o)[5];for(var a=0;a<t.length;a++)t[a]/100>>0==o/100>>0&&(t[a]=o)}this.atkMsz.value=i.toString(),this._list.datas=t,-1==this._list.selectedIndex&&(this._list.selectedIndex=0),this._list.selectedIndex=this._list.selectedIndex,this.updateAttView()},h.prototype.updateFengshuiLv=function(){var t=c.XianfuModel.instance.treasureInfos(3),e=c.XianfuModel.instance.fengshuiLv,i=r.config.XianfuFengShuiCfg.instance.getCfgById(e),n=i[4];this.flagImg.skin="assets/icon/ui/xianfu_fengshui/"+n+".png";var s=i[5];this.lvImg.skin="assets/icon/ui/xianfu_fengshui/"+s+".png";var o=i[1];if(o){var a=t/o;this._scheEff.y=120-140*a}else o=r.config.XianfuFengShuiCfg.instance.getCfgById(e-1)[1],this._scheEff.y=-20;this.scheduleTxt.text=t+"/"+o,this.updateAttView()},h.prototype.updateView=function(){var t=this._ids=l.instance.getIdsByBigType(this._btnGroup.selectedIndex);this.setListDatas();for(var e=0;e<t.length;e++){var i=t[e],n=r.config.XianfuDecorateCfg.instance.getCfgById(i),s=r.config.XianfuDecorateCfg.instance.getCfgById(i+1),o=n[1][0];if(n[1][1]<=r.bag.BagModel.instance.getItemCountById(o)&&s)return void(this._list.selectedIndex=e)}this._list.selectedIndex=0},h.prototype.updateAttView=function(){var t=this.getIds()[this._list.selectedIndex];if(null!=t){var e=t%100;this.upGradeBtn.label=e?"升级":"激活";var i=l.instance.getCfgById(t),n=l.instance.getCfgById(t+1);this.setAttr(i,n),this.fengshuiAddAttr(i,n);var s=i[1];if(n){this.fullLevelImg.visible=!1,this._item.visible=!0,this.upGradeBtn.visible=!0;var o=r.bag.BagModel.instance.getItemCountById(s[0]);this._item.dataSource=[s[0],0,0,null],this._numDiff=o-s[1],this._btnClip.visible=0<=this._numDiff,this._item.setNum(o+"/"+s[1],0<=this._numDiff?"#FDFDFF":"#ff7462")}else this._item.visible=!1,this.upGradeBtn.visible=!1,this.fullLevelImg.visible=!0;this._item.dataSource=[s[0],s[1],0,null],a.chainArr([this.attNameTxt_0,this.attValue_0,this.arrImg_0,this.proAttTxt_0]),a.chainArr([this.attNameTxt_1,this.attValue_1,this.arrImg_1,this.proAttTxt_1]),a.chainArr([this.attNameTxt_2,this.arrImg_2,this.proAttTxt_2]),a.chainArr([this.attNameTxt_3,this.arrImg_3,this.proAttTxt_3])}},h.prototype.fengshuiAddAttr=function(t,e){this.arrImg_2.visible=this.arrImg_3.visible=this.proAttTxt_2.visible=this.proAttTxt_3.visible=!0,e||(this.arrImg_2.visible=this.arrImg_3.visible=this.proAttTxt_2.visible=this.proAttTxt_3.visible=!1,e=t);var i=t[4];this.attNameTxt_2.text="风水值："+i,e[4]-i<=0?this.arrImg_2.visible=this.proAttTxt_2.visible=!1:this.proAttTxt_2.text=(e[4]-i).toString();var n=e[2],s=t[3],o=e[3],a=s[0];a=a||0;var r=o[0]-a;if(this.arrImg_3.visible=this.proAttTxt_3.visible=!(r<=0),t[0]%100)0==n?(l=o[0],h=o[1],a=(a=s[2])||0,r=o[2]-a,this.arrImg_3.visible=this.proAttTxt_3.visible=!(r<=0),this.attNameTxt_3.text=c.XianfuModel.instance.getType0AttAddStr(h,l,a,s),1==h?this.proAttTxt_3.text=r.toString():2==h?this.proAttTxt_3.text=r+"%":3==h&&(this.proAttTxt_3.text=r+"%")):(this.attNameTxt_3.text=c.XianfuModel.instance.getAttAddStr(n,a),1==n?this.proAttTxt_3.text=r+"%":2==n?this.proAttTxt_3.text=r+"%":3==n?this.proAttTxt_3.text=r.toString():4==n?this.proAttTxt_3.text=r+"%":5==n?this.proAttTxt_3.text=r+"%":6==n&&(this.proAttTxt_3.text=r.toString()));else if(this.attNameTxt_3.text="无加成",0==n){var l=o[0],h=o[1];r=o[2],this.arrImg_3.visible=this.proAttTxt_3.visible=!0,this.proAttTxt_3.text=c.XianfuModel.instance.getType0AttAddStr(h,l,r,o)}else this.proAttTxt_3.text=c.XianfuModel.instance.getAttAddStr(n,r)},h.prototype.setAttr=function(t,e,i){void 0===i&&(i=1);for(var n=0;n<this._nameArr.length;n++)this._nameArr[n].visible=!1,this._upImgsArr[n].visible=!1,this._liftArr[n].visible=!1,this._valueArr[n].visible=!1;for(var s=e?e[8]:t[8],o=t[8],a=e?e[8]:null,r=0,l=.5*s.length;r<l;r++){var h=u.instance.getCfgById(s[2*r]);this._nameArr[r].visible=this._valueArr[r].visible=this._liftArr[r].visible=!0,this._nameArr[r].text=h[1]+"：";var c=o[2*r+1]||0,p=a&&a.length>2*r+1?a[2*r+1]-c:0;e?(this._upImgsArr[r].visible=this._liftArr[r].visible=!0,this._liftArr[r].text=h[2]?d.formatFloatNum(p)+"%":Math.round(p)+""):this._upImgsArr[r].visible=this._liftArr[r].visible=!1,this._valueArr[r].text=h[2]?d.formatFloatNum(c)+"%":Math.round(c)+""}},h.prototype.attBtnHandler=function(){WindowManager.instance.open(251)},h.prototype.getIds=function(){for(var t=this._ids||[],e=c.XianfuModel.instance.fengshuiResList,i=0,n=e.length;i<n;i++){var s=e[i];l.instance.getCfgById(s)[5];for(var o=0;o<t.length;o++)t[o]/100>>0==s/100>>0&&(t[o]=s)}return t},h.prototype.upGradeBtnHandler=function(){for(var t=this._ids,e=c.XianfuModel.instance.fengshuiResList,i=0,n=e.length;i<n;i++){var s=e[i];l.instance.getCfgById(s)[5];for(var o=0;o<t.length;o++)t[o]/100>>0==s/100>>0&&(t[o]=s)}var a=this._item.itemData[0];0<=this._numDiff?c.XianfuCtrl.instance.upgradeFengShuiDecorate([this.getIds()[this._list.selectedIndex]]):r.bag.BagUtil.openLackPropAlert(a,-this._numDiff)},h.prototype.aboutBtnHandler=function(){a.alertHelp(20044)},o=h,c.XianfuWindWaterPanel=o}(modules=modules||{}),function(t){var i,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}i=t.xianfu||(t.xianfu={}),e=ui.XianfuTopViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.top=400,this._scaleTween=TweenJS.create(this.img),this._shadeTween=TweenJS.create(this.img)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SELECT_XIANFU_AREA",this,this.updataShowImg)},s.prototype.close=function(){e.prototype.close.call(this),this._scaleTween&&this._scaleTween.stop(),this._shadeTween&&this._shadeTween.stop()},s.prototype.destroy=function(){this._scaleTween=null,this._shadeTween=null,e.prototype.destroy.call(this)},s.prototype.updataShowImg=function(){var t=this;this._scaleTween.stop(),this._shadeTween.stop();var e=i.XianfuModel.instance.panelType;this.img.skin=0==e?"xianfu/image_xf_jlt1.png":1==e?"xianfu/image_xf_lzy1.png":"xianfu/image_xf_lsg1.png",this.img.alpha=1,this.img.scale(0,0),this._scaleTween.to({scaleX:1,scaleY:1},1e3).start().onComplete(function(){t._shadeTween.to({alpha:0},1500).start().onComplete(function(){t.img.alpha=1,t.img.scale(0,0),t.close()})})},n=s,i.XianfuTopPanel=n}(modules=modules||{}),function(l){var h,i,t,e,n,c,p,s;function o(){return null!==i&&i.apply(this,arguments)||this}h=l.xianfu||(l.xianfu={}),t=ui.FengshuiAttAlertUI,e=Laya.Event,n=l.common.BtnGroup,c=l.common.AttrUtil,p=l.config.AttrItemCfg,i=t,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._btnGroup=new n,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1),this._attTxts=[this.attTxt_0,this.attTxt_1,this.attTxt_2,this.attTxt_3,this.attTxt_4,this.attTxt_5,this.attTxt_6,this.attTxt_7],this._attValues=[],this._showAttIndexs=l.config.BlendCfg.instance.getCfgById(22011)[1],this._fengshuiLvNameStrs=["末等","九等","八等","七等","六等","五等","四等","三等","二等","一等"],this._lastY=0,this.title_0.tipTxt.text="聚灵厅",this.title_1.tipTxt.text="炼制涯",this.title_2.tipTxt.text="灵兽阁",this._attItems=[this.item_0,this.item_1,this.item_2,this.item_3,this.item_4,this.item_5,this.item_6,this.item_7,this.item_8,this.item_9,this.item_10,this.item_11];for(var t=0,e=this._attItems.length;t<e;t++)this._attItems[t].type=t},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("XIANFU_WIND_WATER_UPTATE",this,this.updateView),this.onAutoEvt(this.listBox,e.MOUSE_DOWN,this,this.downHandler),this.onAutoEvt(this.listBox,e.MOUSE_WHEEL,this,this.wheelHandler),this.onAutoEvt(this._btnGroup,e.CHANGE,this,this.updateView),this._btnGroup.selectedIndex=0},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},o.prototype.updateView=function(){if(0==this._btnGroup.selectedIndex)this.btnGroupBox_0.visible=!0,this.btnGroupBox_1.visible=!1;else{this.btnGroupBox_0.visible=!1,this.btnGroupBox_1.visible=!0,this.setAttTxt();var t=h.XianfuModel.instance.fengshuiLv,e=l.config.XianfuFengShuiCfg.instance.getCfgById(t);this.lvTxt.text=e[2]+"("+this._fengshuiLvNameStrs[t-1]+")";var i=e[3]-1;this.currAttTxt.text=Math.floor(100*i)+"%";var n=l.config.XianfuFengShuiCfg.instance.getCfgById(t+1);if(n){var s=n[3]-1;this.nextAttTxt.text=Math.floor(100*s)+"%",this.nextHintTxt.text="下级加成：所有风水属性加成",this.nextAttTxt.x=337}else this.nextHintTxt.text="下级加成：",this.nextAttTxt.text="已满级",this.nextAttTxt.x=150}},o.prototype.setAttTxt=function(){this._attValues.length=0,this._attValues=[];for(var t=h.XianfuModel.instance.fengshuiResList,e=0,i=t.length;e<i;e++){var n=t[e],s=l.config.XianfuDecorateCfg.instance.getCfgById(n);this.setAtts(s)}for(e=0,i=this._attTxts.length;e<i;e++){var o=this._attTxts[e];if(e>=this._showAttIndexs.length)o.visible=!1;else{var a=p.instance.getCfgById(this._showAttIndexs[e]);o.visible=!0;var r=this._attValues[e]||0;this._attTxts[e].text=a[1]+":"+(a[2]?c.formatFloatNum(r)+"%":Math.round(r))}}},o.prototype.setAtts=function(t){for(var e=t[8],i=0,n=this._showAttIndexs.length;i<n;i++){var s=e[2*c.getAttrIndexByType(this._showAttIndexs[i],e)+1]||0;this._attValues[i]||(this._attValues[i]=0),this._attValues[i]+=s}},o.prototype.downHandler=function(){this._lastY=this.listBox.mouseY,Laya.stage.on(e.MOUSE_MOVE,this,this.moveHandler),Laya.stage.on(e.MOUSE_UP,this,this.upHandler),Laya.stage.on(e.MOUSE_OUT,this,this.upHandler)},o.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scroll(e)},o.prototype.scroll=function(t){this.listBox.y=this.listBox.y-t,this.listBox.y<this.listCon.height-this.listBox.height?(this.listBox.y=this.listCon.height-this.listBox.height,this._lastY=this.listBox.y):0<this.listBox.y&&(this._lastY=this.listBox.y=0)},o.prototype.moveHandler=function(){var t=this._lastY-this.listBox.mouseY;this.scroll(t),this._lastY=this.listBox.mouseY},o.prototype.upHandler=function(){Laya.stage.off(e.MOUSE_MOVE,this,this.moveHandler),Laya.stage.off(e.MOUSE_UP,this,this.upHandler),Laya.stage.off(e.MOUSE_OUT,this,this.upHandler)},o.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),this._attTxts=this.destroyElement(this._attTxts),this._attItems=this.destroyElement(this._attItems),i.prototype.destroy.call(this)},s=o,h.FengshuiAttAlert=s}(modules=modules||{}),function(t){var e,o,i;function n(){this.init()}e=t.config||(t.config={}),o=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._dic=new o,this._ids=[],this._tab={};for(var t=GlobalData.getConfig("xianfu_illustrated_handbook"),e=0,i=t.length;e<i;e++){var n=t[e][0],s=t[e][5]-1;this._ids[s]||(this._ids[s]={}),this._ids[s][n]||(this._ids[s][n]=n),this._tab[n]||(this._tab[n]=[]),this._tab[n].push(t[e]),this._maxLv=t[e][4]}},n.prototype.getCfgById=function(t){return this._dic.get(t)},n.prototype.getCfgByIdAndLv=function(t,e){return this._tab[t][e]},Object.defineProperty(n.prototype,"typeLen",{get:function(){return this._ids.length},enumerable:!0,configurable:!0}),n.prototype.getIdsByType=function(t){return this._ids[t]},Object.defineProperty(n.prototype,"maxLv",{get:function(){return this._maxLv},enumerable:!0,configurable:!0}),i=n,e.XianfuHandBookCfg=i}(modules=modules||{}),function(p){var u,e,t,i,d,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}u=p.xianfu||(p.xianfu={}),t=ui.XianfuHandBookViewUI,i=p.common.CustomList,d=p.config.XianfuHandBookCfg,n=Laya.Event,s=p.common.ProgressBarCtrl,e=t,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new i,this._list.pos(54,163),this._list.width=611,this._list.height=462,this._list.hCount=4,this._list.spaceX=5,this._list.itemRender=u.XianfuHandBookItem,this.addChild(this._list),this._btnClip=CommonUtil.creatEff(this.upBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this._liftArr=[this.proAttTxt_0,this.proAttTxt_1,this.proAttTxt_2],this._upImgsArr=[this.arrImg_0,this.arrImg_1,this.arrImg_2],this._valueArr=[this.attValueTxt_0,this.attValueTxt_1,this.attValueTxt_2],this._attrNameTxts=[this.attNameTxt_0,this.attNameTxt_1,this.attNameTxt_2],this._ratioBar=new s(this.barImg,this.barImg.width,this.barTxt),this._currId=-1,this._btnGroup=[this.buleBtn,this.purpleBtn,this.orangeBtn,this.redBtn]},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("HAND_BOOK_UPDATE",this,this.setList),this.onAutoEvt(this._list,n.SELECT,this,this.updateView),this.onAutoClick(this.upBtn,this,this.upBtnHandler),this.onAutoClick(this._btnGroup[0],this,this.blueBtnHandle),this.onAutoClick(this._btnGroup[1],this,this.purpleHandle),this.onAutoClick(this._btnGroup[2],this,this.orangeBtnHandle),this.onAutoClick(this._btnGroup[3],this,this.redBtnHandle),this.regAutoRP(this.blueRP,["xianfuBlueHandBookRP"]),this.regAutoRP(this.purpleRP,["xianfuVioletHandBookRP"]),this.regAutoRP(this.orangeRP,["xianfuOrangeHandBookRP"]),this.regAutoRP(this.redRP,["xianfuRedHandBookRP"])},a.prototype.blueBtnHandle=function(){this._index=0,this.setList(),this.searchRPIndex(),this.updateView()},a.prototype.purpleHandle=function(){this._index=1,this.setList(),this.searchRPIndex(),this.updateView()},a.prototype.orangeBtnHandle=function(){this._index=2,this.setList(),this.searchRPIndex(),this.updateView()},a.prototype.redBtnHandle=function(){this._index=3,this.setList(),this.searchRPIndex(),this.updateView()},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),199==this.panelId?this._index=0:200==this.panelId?this._index=1:201==this.panelId?this._index=2:202==this.panelId&&(this._index=3),this._btnClip.play(),this.setList(),this.searchRPIndex(),this.updateView()},a.prototype.searchRPIndex=function(t){void 0===t&&(t=null);for(var e=this._list.datas,i=0,n=e.length;i<n;i++){var s=e[i][0];if(t){if(t==s)return void(this._list.selectedIndex=i)}else{var o=u.XianfuModel.instance.getHandbookStateById(s);if(4==o||3==o)return this._list.selectedIndex=i,void(this._currId=s)}}this._list.selectedIndex=0,this._currId=this._list.selectedData[0]},a.prototype.setList=function(){var t=d.instance.getIdsByType(this._index),e=[],i=0;for(var n in t){var s=t[n],o=u.XianfuModel.instance.handBook[s];o?i+=d.instance.getCfgByIdAndLv(s,o)[7]:o=0,e.push([s,o])}e=e.sort(this.sortFunc.bind(this)),this._list.datas=e,this.atkMsz.value=i.toString(),-1!=this._currId&&(this.checkIsHaveRP()?this.searchRPIndex(this._currId):this.searchRPIndex())},a.prototype.checkIsHaveRP=function(){var t=u.XianfuModel.instance.getHandbookStateById(this._currId);return 4==t||3==t},a.prototype.updateView=function(){var t=this._list.selectedData,e=this._currId=t[0],i=t[1],n=p.config.XianfuHandBookCfg.instance.getCfgByIdAndLv(e,i),s=d.instance.getCfgByIdAndLv(e,i+1),o=d.instance.getCfgByIdAndLv(e,0);this.desTxt.text=o[3],p.common.AttrUtil.setAttrTxts(n,s,this._attrNameTxts,this._valueArr,this._upImgsArr,this._liftArr,8);var a=n[6][0],r=n[6][1],l=u.XianfuModel.instance.handBookRes.get(a);l=l||0,this._ratioBar.maxValue=r,this._ratioBar.value=l,this._btnClip.visible=!!(r<=l&&s),this.showItem.setData(t),this.showItem.redDot.visible=!1,s?(this.maxLvBox.visible=!0,this.maxLvTxt.visible=!1,this.upBtn.label=i?"升级":"激活"):(this.maxLvBox.visible=!1,this.maxLvTxt.visible=!0);for(var h=0,c=this._btnGroup.length;h<c;h++)this._btnGroup[h].selected=this._index===h},a.prototype.sortFunc=function(t,e){var i=u.XianfuModel.instance.getHandbookStateById(t[0]),n=u.XianfuModel.instance.getHandbookStateById(e[0]);return i!==n?n-i:t[1]-e[1]},a.prototype.upBtnHandler=function(){var t=this._list.selectedData[0];u.XianfuCtrl.instance.PromoteIllustratedHandbook([t])},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._valueArr=this.destroyElement(this._valueArr),this._liftArr=this.destroyElement(this._liftArr),this._upImgsArr=this.destroyElement(this._upImgsArr),this._btnClip=this.destroyElement(this._btnClip),this._ratioBar=this.destroyElement(this._ratioBar),e.prototype.destroy.call(this,t)},o=a,u.XianfuHandBookPanel=o}(modules=modules||{}),function(t){var l,e,h,c,p,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}l=t.xianfu||(t.xianfu={}),h=t.config.SkillCfg,c=t.config.XianfuSkillCfg,p=t.config.SkillPureCfg,i=ui.SkillAlertUI,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.titleTxt.text="仙府技能"},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("XIANFU_SKILL_UPDATE",this,this.updateId)},s.prototype.btnHandler=function(){l.XianfuModel.instance.selectSkill=this._id,l.XianfuCtrl.instance.promoteXianFuSkill(this._id)},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._id=t},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateId(),this.updateView()},s.prototype.updateId=function(){var t=l.XianfuModel.instance.skillList;if(t)for(var e=0,i=t;e<i.length;e++){var n=i[e];if(CommonUtil.getSkillPureIdById(n)==CommonUtil.getSkillPureIdById(this._id)){this._id=n,this.updateView();break}}},s.prototype.updateView=function(){var t=this._id%100>>0,e=h.instance.getCfgById(this._id),i=h.instance.getCfgById(this._id+1),n=p.instance.getCfgById(CommonUtil.getSkillPureIdById(this._id));this.iconImg.skin="assets/icon/skill/"+n[6]+".png",this.nameTxt.text=n[1]+"  Lv."+t;var s=e[3];this.powerTxt.text="战力："+(0==t?0:s);var o=c.instance.getCfgBySkillId(this._id+1),a=o?o[0]:null,r=l.XianfuModel.instance.lv;o&&a<=r?t?(this.curLvDesc.text=CommonUtil.stringFormat(n[5],e[2]),o?(this.btn.visible=!0,this.btn.label="升级",this.conditionTxt.visible=!1,this.playEff(),this.nextLvDesc.text=CommonUtil.stringFormat(n[5],i[2])):this.fullLv()):(this.btn.visible=!0,this.btn.label="激活",this.playEff(),this.curLvDesc.text="无",this.nextLvDesc.text=CommonUtil.stringFormat(n[5],i[2]),this.conditionTxt.visible=!1):(this.curLvDesc.text=t?CommonUtil.stringFormat(n[5],e[2]):"无",o?(this.btn.gray=!0,this.btn.mouseEnabled=!1,this.conditionTxt.text="激活条件：仙府达到 Lv."+a,this.conditionTxt.color="#ff3e3e",this.conditionTxt.visible=!0,this.stopEff(),this.nextLvDesc.text=CommonUtil.stringFormat(n[5],i[2])):this.fullLv())},s.prototype.fullLv=function(){this.btn.visible=!1,this.conditionTxt.text="已满级",this.conditionTxt.color="#168a17",this.conditionTxt.visible=!0,this.nextLvDesc.text="已达最大等级",this.stopEff()},s.prototype.playEff=function(){this._eff||(this._eff=CommonUtil.creatEff(this.btn,"btn_light",15),this._eff.pos(-5,-10)),this._eff.play(),this._eff.visible=!0,this.btn.gray=!1,this.btn.mouseEnabled=!0,this.btn.y=485},s.prototype.stopEff=function(){this._eff&&(this._eff.play(),this._eff.visible=!1),this.btn.y=505},s.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this)},n=s,l.XianfuSkillAlert=n}(modules=modules||{}),function(p){var u,t,e,i,d,n;function s(){return null!==t&&t.apply(this,arguments)||this}u=p.xianfu||(p.xianfu={}),e=ui.XianfuDanluAttrAlertUI,i=p.common.ProgressBarCtrl,d=p.config.XianfuBuildCfg,t=e,__extends(s,t),s.prototype.initialize=function(){t.prototype.initialize.call(this),this._bar=new i(this.barImg,this.barImg.width,this.barTxt)},s.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("XIANFU_BUILD_UPDATE",this,this.updateView)},s.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateView()},s.prototype.updateView=function(){var t=u.XianfuModel.instance.getBuildInfo(2);if(t){var e=t[1];this.lvMsz.value=e.toString();var i=d.instance.getCfgByIdAndLv(2,e),n=i[6];this.fightMsz.value=n.toString();var s=i[2],o=t[11];this._bar.maxValue=s||o,this._bar.value=o;var a=d.instance.getCfgByIdAndLv(2,e+1),r=[this.attrNameTxt_0,this.attrNameTxt_1],l=[this.attTxt_0,this.attTxt_1],h=[this.arrImg_0,this.arrImg_1],c=[this.proTxt_0,this.proTxt_1];p.common.AttrUtil.setAttrTxts(i,a,r,l,h,c,4)}},s.prototype.destroy=function(){this._bar=this.destroyElement(this._bar),t.prototype.destroy.call(this)},n=s,u.XianfuDanluAttrAlert=n}(modules=modules||{}),function(t){var l,e,i,n,d,h,s,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}l=t.xianfu||(t.xianfu={}),i=ui.XianfuSmeltEndAlertUI,n=t.bag.BagUtil,d=t.common.CommonUtil,h=t.config.XianfuBuildCfg,s=t.common.CustomList,o=t.bag.BaseItem,e=i,__extends(r,e),r.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this.lineTxt.underline=!0,this._items=[],this._list=new s,this._list.spaceX=15,this._list.vCount=1,this._list.itemRender=o,this._list.scrollDir=2,this._list.y=165,this._list.height=100,this.addChild(this._list)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.lineTxt,this,this.lineTxtHandler)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},r.prototype.updateView=function(){var t=l.XianfuModel.instance.buildType,e=l.XianfuModel.instance.getBuildInfo(t),i=e[1],s=h.instance.getCfgByIdAndLv(l.XianfuModel.instance.buildType,i)[5],n=e[8],o={};for(var a in n.forEach(function(t){var e=t[0];if(t[1]){n=s[e][5];var i=s[e][6];o[n]?o[n]+=i:o[n]=i}else{var n=s[e][0];o[n]?o[n]+=1:o[n]=1}}),this._items.length=0,o)this._items.push([parseInt(a),o[a],0,null]);var r=100*this._items.length+(this._items.length-1)*this._list.spaceX;this._list.width=520<r?520:r,d.centerChainArr(this.width,[this._list]),this._list.datas=this._items},r.prototype.btnHandler=function(){n.canAddItemsByBagIdCount(this._items)&&(l.XianfuCtrl.instance.getBuildProduceAward([l.XianfuModel.instance.buildType]),this.close())},r.prototype.lineTxtHandler=function(){var t=l.XianfuModel.instance.buildType,e=l.XianfuModel.instance.getBuildInfo(t),i=e[1],p=h.instance.getCfgByIdAndLv(l.XianfuModel.instance.buildType,i)[5],n=e[8],u="";n.forEach(function(t,e){var i=t[0],n=t[1],s=0==n?p[i][0]:p[i][5],o=0==n?1:p[i][6],a=0==n?"#b15315":"#ff3e3e",r=0==n?"炼制成功":"炼制失败",l=d.getNameByItemId(s),h=d.getColorById(s),c="第"+(e+1)+"次炼制,"+d.formatHtmlStrByColor(a,r)+",获得"+d.formatHtmlStrByColor(h,l+"×"+o)+"<br/>";u+=c}),WindowManager.instance.open(382,u)},a=r,l.XianfuSmeltEndAlert=a}(modules=modules||{}),function(a){var r,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}r=a.faerie_demon||(a.faerie_demon={}),t=ui.FaerieDemonCopyLeftViewUI,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),this.zOrder=-1,this.left=0,this.bottom=500,this.closeByOthers=!1,this.layer=3,this._allPlayerInfo=[this.item1,this.item2,this.item3],this._type=1},i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_GOD_DEVIL_MAP",this,this.updatePlayers)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.winNum=0,this.scoreText.text="0",this.updatePlayers()},i.prototype.updatePlayers=function(){var t,e=!1,i=0;if(0<(t=1===this._type?r.FaerieDemonModel.instance.teamer1:r.FaerieDemonModel.instance.teamer2).length){var n=0;t[0][9]===a.common_group.CommonGroupModel.instance.teamId?(this.text1.text="我方队伍",this.text1.color="#0f81f5",this.BG1.skin="faerie_demon/icon_xmdj_wfjf.png",this.BG.skin="common/txtbg_common_wf_b.png",this.BG.x=190,this.BG.scaleX=-1):(this.text1.text="敌方队伍",this.text1.color="#ff6f6f",this.BG1.skin="faerie_demon/icon_xmdj_dfjf.png",this.BG.skin="common/txtbg_common_df_b.png",this.BG.x=0,this.BG.scaleX=1);for(var s=0;s<t.length;s++){var o=t[s];this._allPlayerInfo[s].data=[s,o],1===o[6]&&(n++,i+=r.FaerieDemonModel.instance.getInxScore(s)),this.winNum!=n&&(e=!0),this.winNum=n}}e&&this.addScore(i)},i.prototype.addScore=function(e){var i=this;this.sorceBoxAni.visible=!1,this.sorceBoxAni.scale(2.5,2.5,!0),this._tweenLeft1&&this._tweenLeft1.stop(),this._tweenLeft1=TweenJS.create(this.sorceBoxAni).to({scaleX:1,scaleY:1},300).onComplete(function(){var t=Math.round(e);i.scoreText.text=""+t}),this.sorceBoxAni.visible=!0,this._tweenLeft1.start()},i.prototype.close=function(){t.prototype.close.call(this),this._tweenLeft1&&this._tweenLeft1.stop(),this.winNum=0},i.prototype.destroy=function(){this._tweenLeft1&&(this._tweenLeft1.stop(),this._tweenLeft1=null),t.prototype.destroy.call(this)},e=i,r.FaerieDemonCopyLeftPanel=e}(modules=modules||{}),function(a){var r,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}r=a.faerie_demon||(a.faerie_demon={}),t=ui.FaerieDemonCopyRightViewUI,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=500,this.closeByOthers=!1,this.layer=3,this._allPlayerInfo=[this.item1,this.item2,this.item3],this._type=2},i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_GOD_DEVIL_MAP",this,this.updatePlayers)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.winNum=0,this.scoreText.text="0",this.updatePlayers(),r.FaerieDemonModel.instance.clearAllEnemyTeamDate()},i.prototype.updatePlayers=function(){var t,e=!1,i=0;if(0<(t=1===this._type?r.FaerieDemonModel.instance.teamer1:r.FaerieDemonModel.instance.teamer2).length){var n=0;t[0][9]===a.common_group.CommonGroupModel.instance.teamId?(this.text1.text="我方队伍",this.text1.color="#0f81f5",this.BG1.skin="faerie_demon/icon_xmdj_wfjf.png",this.BG.skin="common/txtbg_common_wf_b.png",this.BG.x=0,this.BG.scaleX=1):(this.text1.text="敌方队伍",this.text1.color="#ff6f6f",this.BG1.skin="faerie_demon/icon_xmdj_dfjf.png",this.BG.skin="common/txtbg_common_df_b.png",this.BG.x=190,this.BG.scaleX=-1);for(var s=0;s<t.length;s++){var o=t[s];this._allPlayerInfo[s].data=[s,o],1===o[6]&&(n++,i+=r.FaerieDemonModel.instance.getInxScore(s)),this.winNum!=n&&(e=!0),this.winNum=n}}e&&this.addScore(i)},i.prototype.addScore=function(e){var i=this;this.sorceBoxAni.visible=!1,this.sorceBoxAni.scale(2.5,2.5,!0),this._tweenLeft1&&this._tweenLeft1.stop(),this._tweenLeft1=TweenJS.create(this.sorceBoxAni).to({scaleX:1,scaleY:1},300).onComplete(function(){var t=Math.round(e);i.scoreText.text=""+t}),this.sorceBoxAni.visible=!0,this._tweenLeft1.start()},i.prototype.close=function(){t.prototype.close.call(this),this._tweenLeft1&&this._tweenLeft1.stop(),this.winNum=0},i.prototype.destroy=function(){this._tweenLeft1&&(this._tweenLeft1.stop(),this._tweenLeft1=null),t.prototype.destroy.call(this)},e=i,r.FaerieDemonCopyRightPanel=e}(modules=modules||{}),function(m){var f,n,o,a,e,t;function i(){var t=null!==n&&n.apply(this,arguments)||this;return t._times=9e3,t._isEff=!1,t}f=m.faerie_demon||(m.faerie_demon={}),o=m.config.HeadiconCfg,a=m.config.HeadPhotoframeCfg,e=m.common.CustomClip,n=ui.FaerieDemonMatchingAlertUI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this.closeOnSide=!1,this.creatEffect(),this.allPlayerInfoItemLeft=[this.leftItem1,this.leftItem2,this.leftItem3],this.allPlayerInfoItemRight=[this.rightItem1,this.rightItem2,this.rightItem3]},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("KICK_TEAMER_EX_REPLY",this,this.close),this.onAutoGlobalEvt("UPDAT_ETEAM_STATEEX_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("MATE_TEAM_ENEMY_EXREPLY",this,this.updateUI),this.onAutoGlobalEvt("CHANGE_ODLER",this,this.changeOdler),this.onAutoGlobalEvt("MATE_TEAM_ENEMY_EXREPLY_Eff",this,this.stopTwenn)},i.prototype.changeOdler=function(t,e){var i=!1;if(3==m.common_group.CommonGroupModel.instance.state){for(var n,s,o=t[0],a=0;a<this.allPlayerInfoItemRight.length;a++)(l=m.common_group.CommonGroupModel.instance.members[a][1][0])===o&&(n=a);for(a=0;a<this.allPlayerInfoItemRight.length;a++){var r=this.allPlayerInfoItemRight[a],l=m.common_group.CommonGroupModel.instance.members[a][1][0];Laya.Point.TEMP.setTo(r.inTheOrderBox.x,r.inTheOrderBox.y);var h=r.inTheOrderBox.localToGlobal(Laya.Point.TEMP,!0),c=h.y-r.height/2,p=h.y+r.height/2;e.y>=c&&e.y<=p&&o!=l&&(s=a,i=!0)}var u=new Array;for(a=0;a<m.common_group.CommonGroupModel.instance.members.length;a++)l=m.common_group.CommonGroupModel.instance.members[a][1][0],u.push(l);if(i){console.log("交换前的出战顺序："+u);var d=u[n];u[n]=u[s],u[s]=d,console.log("交换后的出战顺序："+u),f.FaerieDemonCtrl.instance.orderTeamerEx(u)}}},i.prototype.onOpened=function(){n.prototype.onOpened.call(this),GlobalData.dispatcher.event("CLOSE_ROOM_ALST"),this._isEff=!1,this.funAll(),WindowManager.instance.close(1533);for(var t=0;t<this.allPlayerInfoItemLeft.length;t++){var e=this.allPlayerInfoItemLeft[t],i=this.allPlayerInfoItemRight[t];e.data=null,i.data=null,e.mouseEnabled=!1,i.mouseEnabled=!1}this.updateUI()},i.prototype.btnHandler=function(){if(m.common_group.CommonGroupModel.instance.isHomeowners)if(2===m.common_group.CommonGroupModel.instance.state){var t=Handler.create(this,function(){}),e=Handler.create(this,function(){m.common_group.CommonGroupModel.instance.isAutomaticPlayer=!1,f.FaerieDemonCtrl.instance.giveupMatchEnemy()}),i="是否取消匹配队伍";CommonUtil.alert("提示",i,[e,"是"],[t,"否"])}else 3===m.common_group.CommonGroupModel.instance.state&&f.FaerieDemonCtrl.instance.endOrderTeamerEx();else 2===m.common_group.CommonGroupModel.instance.state&&(t=Handler.create(this,function(){}),e=Handler.create(this,function(){m.common_group.CommonGroupCtrl.instance.kickTeamerEx(PlayerModel.instance.actorId)}),i="是否取消匹配并退出队伍?",CommonUtil.alert("提示",i,[e,"是"],[t,"否"]))},i.prototype.funAll=function(){Laya.timer.clearAll(this),this.btn.visible=!1,this.tipsBg.visible=this.timeClip.visible=!1,e.thisStop(this._match_successful_effect),e.thisStop(this._matching_effect)},i.prototype.updateUI=function(){var t=this;if(!CommonGroupUtil.isMyHaveTeam())return this.close(),void console.log("没有队伍了关闭 仙魔对战匹配界面");e.thisStop(this._matching_effect),2===m.common_group.CommonGroupModel.instance.changType?(this.close(),console.log("队长取消匹配打开 房间界面"),CommonGroupUtil.isOpenRoom(1),m.common_group.CommonGroupModel.instance.isHomeowners||m.notice.SystemNoticeManager.instance.addNotice("队长【"+m.common_group.CommonGroupModel.instance.leaderName+"】取消了匹配对手",!0)):1===m.common_group.CommonGroupModel.instance.changType?(console.log("准备进入场景 等待服务器拉入场景:2501   "),WindowManager.instance.close(12),this.funAll()):4===m.common_group.CommonGroupModel.instance.state&&4===f.FaerieDemonModel.instance.enemyState?(this.funAll(),this.tipsText.text="战斗即将开始",this.stopTwenn(),this.updateLeftUI(!0),this.updateRightUI(!0)):4===m.common_group.CommonGroupModel.instance.state&&3===f.FaerieDemonModel.instance.enemyState?(e.thisStop(this._match_successful_effect),e.thisStop(this._matching_effect),this.changeDorwRihgt(!1),this.btn.visible=!1,this.tipsBg.visible=this.timeClip.visible=!0,this.tipsText.text="对方正在更改顺序",this.stopTwenn(),this.updateLeftUI(),this.updateRightUI(!0)):2===m.common_group.CommonGroupModel.instance.state?(e.thisPlay(this._matching_effect),this.tipsText.text="正在寻找势均力敌的对手",this.btn.visible=!0,this.btn.label="取消",0===f.FaerieDemonModel.instance.enemyLeader&&(console.log("开始随机匹配玩家！~~~~~~~~~~~~~~~~~~~~~~~~"),this.startRanDom()),this.updateRightUI(!0)):3===m.common_group.CommonGroupModel.instance.state&&(WindowManager.instance.close(12),this.btn.visible=m.common_group.CommonGroupModel.instance.isHomeowners,this.tipsText.text=m.common_group.CommonGroupModel.instance.isHomeowners?"拖动数字改动出战顺序":"队长正在更改出战顺序",this.btn.label="确认顺序",e.thisStop(this._matching_effect),this._isEff||(this._isEff=!0,e.thisPlay(this._match_successful_effect),Laya.timer.once(1e3,this.updateUI,function(){e.thisStop(t._match_successful_effect),t.tipsBg.visible=t.timeClip.visible=!0,t.getReadyForCountdown()}),this.stopTwenn(),m.common_group.CommonGroupModel.instance.isHomeowners&&this.playerTwenn()),this.updateLeftUI(),this.changeDorwRihgt(!0),this.updateRightUI())},i.prototype.stopTwenn=function(){this.tipsBox.visible=!1,this._tweenLeft3&&this._tweenLeft3.stop(),this._tweenLeft4&&this._tweenLeft4.stop(),this.tipsBox.x=577},i.prototype.playerTwenn=function(){var t=this;this._tweenLeft4=TweenJS.create(this.tipsBox).to({x:this.tipsBox.x+40},300).onComplete(function(){t._tweenLeft3.start()}),this._tweenLeft3=TweenJS.create(this.tipsBox).to({x:this.tipsBox.x-40},300).onComplete(function(){t._tweenLeft4.start()}),this._tweenLeft3.start(),this.tipsBox.visible=!0},i.prototype.updateRightUI=function(t){if(void 0===t&&(t=!1),t){for(var e=0;e<this.allPlayerInfoItemRight.length;e++)for(var i=this.allPlayerInfoItemRight[e],n=0;n<m.common_group.CommonGroupModel.instance.members.length;n++)if((s=m.common_group.CommonGroupModel.instance.members[n])&&s[1][0]===e+1){i.data=s;break}}else for(e=0;e<m.common_group.CommonGroupModel.instance.members.length;e++){var s;(s=m.common_group.CommonGroupModel.instance.members[e])&&(this.allPlayerInfoItemRight[e].data=s)}},i.prototype.startRanDom=function(){this.randomLeftUI(),this.randomLeftUIHandler()},i.prototype.updateLeftUI=function(t){if(void 0===t&&(t=!1),this._tweenLeft1&&this._tweenLeft1.stop(),this._tweenLeft2&&this._tweenLeft2.stop(),this.leftBox.alpha=1,this.changeDorwRihgt(!1),t){for(var e=0;e<this.allPlayerInfoItemLeft.length;e++)for(var i=this.allPlayerInfoItemLeft[e],n=0;n<f.FaerieDemonModel.instance.enemyMembers.length;n++)if((s=f.FaerieDemonModel.instance.enemyMembers[n])&&s[1][0]===e+1){i.data=s;break}}else for(e=0;e<f.FaerieDemonModel.instance.enemyMembers.length;e++){var s;(s=f.FaerieDemonModel.instance.enemyMembers[e])&&(this.allPlayerInfoItemLeft[e].data=s)}},i.prototype.randomLeftUIHandler=function(){var t=this;this.leftBox.alpha=1,this._tweenLeft2=TweenJS.create(this.leftBox).to({alpha:1},500).onComplete(function(){t._tweenLeft1.start()}),this._tweenLeft1=TweenJS.create(this.leftBox).to({alpha:0},500).onComplete(function(){t.randomLeftUI(),t._tweenLeft2.start()}).start()},i.prototype.randomLeftUI=function(){for(var t=0;t<this.allPlayerInfoItemLeft.length;t++){var e=this.allPlayerInfoItemLeft[t],i=o.instance.ids[CommonUtil.getRandomInt(1,o.instance.ids.length-1)],n=a.instance.ids[CommonUtil.getRandomInt(1,a.instance.ids.length-1)],s=CommonUtil.getRandomInt(1,2);e.setHeadIcon(i,s,n)}},i.prototype.getReadyForCountdown=function(){this._times=9e3,Laya.timer.clear(this,this.timerLoopHarle),this._times+=GlobalData.serverTime,Laya.timer.loop(1e3,this,this.timerLoopHarle),this.timerLoopHarle()},i.prototype.timerLoopHarle=function(){var t=Math.round((this._times-GlobalData.serverTime)/1e3);0<t?this.timeClip.value=""+t:(this.timeClip.value="",Laya.timer.clear(this,this.timerLoopHarle),this.tipsBg.visible=this.timeClip.visible=!1)},i.prototype.changeDorwRihgt=function(t){for(var e=0;e<this.allPlayerInfoItemRight.length;e++)this.allPlayerInfoItemRight[e].mouseEnabled=t},i.prototype.creatEffect=function(){this._match_successful_effect=e.createAndPlay("assets/effect/match_successful_effect.atlas","match_successful_effect",11,!1,!1),this.addChild(this._match_successful_effect),this._match_successful_effect.pos(33.5,140,!0),this._matching_effect=e.createAndPlay("assets/effect/matching_effect.atlas","matching_effect",4,!1,!0,10),this.addChild(this._matching_effect),this._matching_effect.pos(269.5,225,!0),this._match_successful_effect.visible=!1,this._matching_effect.visible=!1},i.prototype.close=function(){n.prototype.close.call(this),WindowManager.instance.close(12),this._tweenLeft1&&this._tweenLeft1.stop(),this._tweenLeft2&&this._tweenLeft2.stop(),this._tweenLeft3&&this._tweenLeft3.stop(),this._tweenLeft4&&this._tweenLeft4.stop(),Laya.timer.clear(this,this.timerLoopHarle),e.thisStop(this._match_successful_effect),e.thisStop(this._matching_effect)},i.prototype.destroy=function(){this._match_successful_effect=this.destroyElement(this._match_successful_effect),this._matching_effect=this.destroyElement(this._matching_effect),this._tweenLeft1&&(this._tweenLeft1.stop(),this._tweenLeft1=null),this._tweenLeft2&&(this._tweenLeft2.stop(),this._tweenLeft2=null),this._tweenLeft3&&(this._tweenLeft3.stop(),this._tweenLeft3=null),this._tweenLeft4&&(this._tweenLeft4.stop(),this._tweenLeft4=null),n.prototype.destroy.call(this)},t=i,f.FaerieDemonMatchingAlert=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){if(this._tab={},this._arr=GlobalData.getConfig("god_devil_task"),this._arr)for(var t=0,e=this._arr.length;t<e;t++){var i=this._arr[t],n=i[0];this._tab[n]=i}},n.prototype.getCfgsByid=function(t){return this._tab[t]},n.prototype.getCfgsByGrade=function(t){var e=new Array;if(this._arr)for(var i=0,n=this._arr.length;i<n;i++){var s=this._arr[i];if(s){var o=s[3],a=o[0],r=o[1];a<=t&&t<=r&&e.push(s)}}return e},i=n,e.GodDevilTaskCfg=i}(modules=modules||{}),function(t){var h,i,c,e,o,n;function s(){return i.call(this)||this}h=t.faerie_demon||(t.faerie_demon={}),c=t.config.GodDevilTaskCfg,e=t.common.ProgressBarCtrl,o=t.common.CustomClip,i=ui.FaerieDemonViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._joinProCtrl=new e(this.joinProImg,600,this.joinProTxt),this._gotImgs=[this.gotImg1,this.gotImg2,this.gotImg3,this.gotImg4],this._clips=[],CommonUtil.setHTMLPro(this.doubleTipsHTML,"#FFFFFF","SimHei",24,"center"),CommonUtil.setHTMLPro(this.timeTxtHTML,"#1f304d","SimHei",24,"center"),this._ciShu=[1,3,6,10],this.creatEffect()},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.sportAwardBtn,this,this.sportAwardHandler),this.onAutoClick(this.shopBtn,this,this.shopHandler),this.onAutoClick(this.rankBtn,this,this.rankHandler),this.onAutoClick(this.matchBtn,this,this.matchBtnHandler),this.onAutoClick(this.createRoomBtn,this,this.createRoomBtnHandler),this.onAutoClick(this.awardImg1,this,this.awardHandler,[0]),this.onAutoClick(this.awardImg2,this,this.awardHandler,[1]),this.onAutoClick(this.awardImg3,this,this.awardHandler,[2]),this.onAutoClick(this.awardImg4,this,this.awardHandler,[3]),this.onAutoClick(this.arenaBtn,this,this.arenaHandler),this.onAutoGlobalEvt("SINGLE_QUXIAO",this,this.createRoomBtnHandler),this.onAutoGlobalEvt("DRAW_GOD_DEVIL_REWARD_REPLY",this,this.uipdateUI),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.uipdateUI),this.regAutoRP(this.jingjiRP,["faerieDemonPKRP"])},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.doubleTipsHTML.innerHTML=t.config.BlendCfg.instance.getCfgById(84007)[2][0],h.FaerieDemonCtrl.instance.getGodDevil(),t.common_group.CommonGroupCtrl.instance.fetchTeamEx(),Laya.timer.loop(1e3,this,this.updatePkNum),this.titleTxt.text="仙魔对决",this.arenaBtn.selected=!0,this.uipdateUI()},s.prototype.uipdateUI=function(){o.thisStop(this._btnClip),CommonGroupUtil.isOpenTeamScene(38)&&(h.FaerieDemonModel.instance.isHaveNum()||h.FaerieDemonModel.instance.isHaveNum1())&&o.thisPlay(this._btnClip),this.updateJoinAward(),this.updatePkNum()},s.prototype.helpHandler=function(){CommonUtil.alertHelp(20086)},s.prototype.sportAwardHandler=function(){WindowManager.instance.open(623)},s.prototype.shopHandler=function(){WindowManager.instance.open(640)},s.prototype.rankHandler=function(){WindowManager.instance.open(622)},s.prototype.matchBtnHandler=function(){CommonGroupUtil.matchBtnHandler(1)},s.prototype.createRoomBtnHandler=function(){CommonGroupUtil.createRoom(1,!1,!1)},s.prototype.awardHandler=function(t){var e=h.FaerieDemonModel.instance.joinGodDevilTasks;if(e&&e[t]&&2===e[t][1]){var i=e[t]?e[t][0]:0;h.FaerieDemonCtrl.instance.drawGodDevilReward(i)}else if(!e||!e[t]||1===e[t][1]){i=e[t]?e[t][0]:0;var n=c.instance.getCfgsByid(i);if(n){for(var s=n[t]?n[2]:[],o=[],a=0;a<s.length;a+=2){var r=s[a],l=s[a+1];o.push([r,l,0,null])}WindowManager.instance.open(212,[o,"奖励预览"])}}},s.prototype.arenaHandler=function(){},s.prototype.updatePkNum=function(){if(h.FaerieDemonModel.instance.times){var t=h.FaerieDemonModel.instance.times[0],e=h.FaerieDemonModel.instance.times[1],i=h.FaerieDemonModel.instance.times[4],n=h.FaerieDemonModel.instance.times[2],s="#ff3e3e",o=t-n+i,a=e-h.FaerieDemonModel.instance.times[3];0<o?(s="#00ad35",this.timeTxtHTML.innerHTML="可获取奖励次数<span style='color:"+s+"'>\n            "+o+"/"+t+"</span>"):(0<a&&(s="#00ad35"),this.timeTxtHTML.innerHTML="可助战次数<span style='color:"+s+"'>\n            "+a+"/"+e+"</span>"),this._joinProCtrl.maxValue=t,this._joinProCtrl.value=n}},s.prototype.updateJoinAward=function(){for(var t=0,e=this._clips.length;t<e;t++)this._clips[t].stop(),this._clips[t].removeSelf();var i=h.FaerieDemonModel.instance.joinGodDevilTasks;if(i&&0!==i.length)for(t=0;t<4;t++){var n=i[t];if(this._gotImgs[t].visible=3===n[1],2===n[1]){var s=this._clips[t];s||(s=o.create("assets/effect/ok_state.atlas","ok_state",8),this._clips.push(s)),s.pos(this._gotImgs[t].x-82,this._gotImgs[t].y-96,!0),s.play(),this.addChildAt(s,13)}}},s.prototype.close=function(){i.prototype.close.call(this);for(var t=0,e=this._clips.length;t<e;t++)this._clips[t].stop(),this._clips[t].removeSelf();Laya.timer.clear(this,this.updatePkNum),o.thisStop(this._btnClip)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._joinProCtrl=this.destroyElement(this._joinProCtrl),this._btnClip=this.destroyElement(this._btnClip),this._gotImgs=this.destroyElement(this._gotImgs),this._clips=this.destroyElement(this._clips),i.prototype.destroy.call(this,t)},s.prototype.creatEffect=function(){this._btnClip=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.matchBtn.x-6,this.matchBtn.y-8,!0)},n=s,h.FaerieDemonPanel=n}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}n=t.faerie_demon||(t.faerie_demon={}),i=t.config.BlendCfg,s=t.common.SimpleList,e=ui.FaerieDemonRankAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=s.create(n.FaerieDemonRankItem,571,89),this._list.size(571,588),this.listBox.addChild(this._list),this._list.pos(0,0,!0),CommonUtil.setHTMLPro(this.tipTxt,"#3d5981","SimHei",22,"center"),this._rankCount=i.instance.getCfgById(20104)[1][0],this.tipTxt.innerHTML="每周日22点刷新排行数据并邮件发放排行奖励"},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GET_GODDEVIL_RANK_REPLY",this,this.updateRank)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),n.FaerieDemonCtrl.instance.getGodDevilRank(),this.updateRank()},a.prototype.updateRank=function(){var t=n.FaerieDemonModel.instance.rankers;if(t&&t.length===this._rankCount)this._list.datas=t;else{for(var e=[],i=0;i<this._rankCount;i++)e.push(t?t[i]:null);this._list.datas=e}this.showRankAndShow()},a.prototype.showRankAndShow=function(){this.myRankNumText.text="我的排名:"+(0===n.FaerieDemonModel.instance.rank||20<n.FaerieDemonModel.instance.rank?"未上榜":n.FaerieDemonModel.instance.rank.toString()),this.myIntegralText.text="积分:"+n.FaerieDemonModel.instance.score.toString()},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},o=a,n.FaerieDemonRankAlert=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._arr=GlobalData.getConfig("god_devil_rank")},n.prototype.getCfgsByGrade=function(t){var e=new Array;if(this._arr)for(var i=0,n=this._arr.length;i<n;i++){var s=this._arr[i];if(s){var o=s[2],a=o[0],r=o[1];a<=t&&t<=r&&e.push(s)}}return e},i=n,e.GodDevilRankCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.faerie_demon||(t.faerie_demon={}),n=t.config.GodDevilRankCfg,s=t.common.SimpleList,i=ui.FaerieDemonRankAwardAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create(e.FaerieDemonRankAwardItem,559,96),this._list.size(559,546),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._list.datas=n.instance.getCfgsByGrade(e.FaerieDemonModel.instance.openDay)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.FaerieDemonRankAwardAlert=o}(modules=modules||{}),function(n){var s,e,t;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeNum=0,t}s=n.faerie_demon||(n.faerie_demon={}),e=ui.FaerieDemonCopyCnterTopViewUI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.centerX=0,this.bottom=950,this.closeByOthers=!1,this.layer=3},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BROADCAST_BEGIN_COMBAT",this,this.setPlayerInfo)},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),n.common_group.CommonGroupCtrl.instance.giveupMatchTeamer(),this.setPlayerInfo()},i.prototype.showUI=function(){Laya.timer.callLater(this,this.setPlayerInfo)},i.prototype.setPlayerInfo=function(){var t=n.faerie_demon.FaerieDemonModel.instance.stage-1;t=t<=0?0:t;var e=s.FaerieDemonModel.instance.getPlayeringPlayerInfo(1,t),i=s.FaerieDemonModel.instance.getPlayeringPlayerInfo(2,t);e&&(this.item1.data=[t,e],this.item1.nameText.visible=this.item1.proCtrlImg.visible=this.item1.proImg.visible=!0),i&&(this.item2.data=[t,i],this.item2.nameText.visible=this.item2.proCtrlImg.visible=this.item2.proImg.visible=!0),this.levelClip.value=""+n.faerie_demon.FaerieDemonModel.instance.stage,this.timeNum=n.dungeon.DungeonModel.instance.broadcastBeginCombat?GlobalData.serverTime+n.dungeon.DungeonModel.instance.broadcastBeginCombat[0]:0,Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},i.prototype.loopHandler=function(){this.timeNum>GlobalData.serverTime?this.timeText.text=n.common.CommonUtil.msToMMSS(this.timeNum-GlobalData.serverTime):(this.timeText.text="00:00",Laya.timer.clear(this,this.loopHandler))},i.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},t=i,s.FaerieDemonCopyCnterTopPanel=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("faction"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e]},n.prototype.getCfgByLv=function(t){return this._tab[t]},i=n,e.FactionCfg=i}(modules=modules||{}),function(t){var e,i,r,l,h,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.faction||(t.faction={}),r=t.common.CommonUtil,l=t.config.BlendCfg,h=t.config.FactionCfg,n=ui.FactionJoinItemUI,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("FACTION_REQUEST_LIST_UPDATE",this,this.updateState)},o.prototype.setData=function(t){var e=t,i=e[3];this.lvTxt.text="Lv."+i,this.nameTxt.text=""+e[1],this.bossTxt.text="盟主:"+e[2];var n=h.instance.getCfgByLv(i)[2];this.numTxt.text="人数:"+e[4]+"/"+n,this.limitTxt.text="战力限制:"+r.bigNumToString(e[5]);var s=e[6];""==s&&(s=l.instance.getCfgById(36038)[2][0]),this.taglineTxt.text=s;var o=e[7],a=l.instance.getCfgById(36004)[2][o];this.iconImg.skin="assets/icon/ui/faction/"+a+".png",this._uUid=e[0],this.updateState()},o.prototype.updateState=function(){var t;t=e.FactionModel.instance.getStateByUuid(this._uUid)?1:0===e.FactionModel.instance.getRequestJoinState(this._uUid)?0:2,this.state=t},Object.defineProperty(o.prototype,"state",{set:function(t){2==(this._state=t)?(this.limitTxt.visible=!1,this.btn.skin="common/btn_tonyong_35.png",this.btn.labelColors="#9d5119",this.btn.label="申请",this.btn.visible=!0):1==t?(this.limitTxt.visible=!1,this.btn.skin="common/btn_tonyong_36.png",this.btn.labelColors="#465460",this.btn.label="取消",this.btn.visible=!0):(this.btn.visible=!1,this.limitTxt.visible=!0)},enumerable:!0,configurable:!0}),o.prototype.btnHandler=function(){e.FactionCtrl.instance.joinFaction([this._uUid,2==this._state?0:1])},s=o,e.FactionJoinItem=s}(modules=modules||{}),function(o){var l,e,a,i,n,t,s,r,h;function c(){return null!==e&&e.apply(this,arguments)||this}l=o.faction||(o.faction={}),a=o.core.WindowManager,i=o.faction.FactionJoinItem,n=o.common.CustomList,t=ui.FactionJoinViewUI,s=o.config.BlendCfg,r=o.common.CommonUtil,e=t,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.scrollDir=1,this._list.x=55,this._list.y=116,this._list.width=610,this._list.height=865,this._list.hCount=1,this._list.itemRender=i,this._list.spaceY=5,this.addChild(this._list),this._needVip=s.instance.getCfgById(36002)[1][0];var t=s.instance.getCfgById(36001)[1];this._needProp=[t[0],t[1]],this._timeCd=s.instance.getCfgById(36050)[1][0],this._timeCd=this._timeCd/36e5},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.creatBtn,this,this.creatBtnHandler),this.onAutoGlobalEvt("FACTION_LIST",this,this.updateList),this.onAutoGlobalEvt("SYNC_CREATE_FACTION_CD",this,this.updateList)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),l.FactionCtrl.instance.getFactionList(),this.updateView(),this.updateList()},c.prototype.updateView=function(){var t=o.vip.VipModel.instance.vipLevel;this.needVipLvTxt.visible=!0,this.propBox.visible=!1,Laya.timer.clear(this,this.loopHandler),t>=this._needVip?l.FactionModel.instance.updateTime<GlobalData.serverTime?this.needVipLvTxt.text="创建仙盟成功后,"+this._timeCd+"小时内不可重新创建":(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(this.propBox.visible=!1,this.needVipLvTxt.text="需达到SVIP"+this._needVip+",创建仙盟成功后"+this._timeCd+"小时内不可重新创建")},c.prototype.loopHandler=function(){l.FactionModel.instance.updateTime<GlobalData.serverTime?(Laya.timer.clear(this,this.loopHandler),this.needVipLvTxt.text="创建仙盟成功后,"+this._timeCd+"小时内不可重新创建"):this.needVipLvTxt.text="创建仙盟冷却时间:"+r.timeStampDDHHMMToHHMMSS(l.FactionModel.instance.updateTime)},c.prototype.updateList=function(){var t=l.FactionModel.instance.factionList;t&&(t=t.sort(this.sortFunc.bind(this)),this._list.datas=t,this.noImg.visible=this.noTxt.visible=!t.length)},c.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=l.FactionModel.instance.getRequestJoinState(i),o=l.FactionModel.instance.getRequestJoinState(n),a=t[3],r=e[3];return a!==r?r-a:o-s},c.prototype.creatBtnHandler=function(){if(o.vip.VipModel.instance.vipLevel<this._needVip){var t=Handler.create(this,r.gotoVIP);PlatParams.isCloseRecharge||r.alert("温馨提示","您的SVIP等级不足,是否前往提升?",[t])}else{var e=this._needProp[0],i=this._needProp[1],n=PlayerModel.instance.getCurrencyById(e);if(null==n&&(n=o.bag.BagModel.instance.getItemCountById(e)),n<=i){var s=o.config.ItemMaterialCfg.instance.getItemCfgById(e)[1];t=Handler.create(a.instance,a.instance.open,[111]),PlatParams.isCloseRecharge||r.alert("温馨提示","您的"+s+"不足,是否前往充值?",[t])}else l.FactionModel.instance.updateTime<GlobalData.serverTime?a.instance.open(265,"creat"):r.noticeError(36068,"")}},c.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},c.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},h=c,l.FactionJoinPanel=h}(modules=modules||{}),function(l){var h,i,c,t,e;function n(){return null!==i&&i.apply(this,arguments)||this}h=l.faction||(l.faction={}),c=l.core.WindowManager,t=ui.FactionManageViewUI,i=t,__extends(n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this._allBtns=[this.box_0,this.box_1,this.box_2,this.box_3,this.box_4,this.box_5,this.box_6,this.box_7],this.centerX=0,this.centerY=230,this.limitLv=l.config.BlendCfg.instance.getCfgById(36049)[1]},n.prototype.onEvt=function(){i.prototype.onEvt.call(this);for(var t=0,e=this._allBtns.length;t<e;t++)this.onAutoClick(this._allBtns[t],this,this.btnsHandler,[t]);this.regAutoRP(this.rpImg_0,["factionApplyJoinRP"]),this.regAutoRP(this.rpImg_1,["factionPostApplyRP"]),this.addStageListener()},n.prototype.offEvt=function(){Laya.stage.off("mousedown",this,this.hidePanel),i.prototype.offEvt.call(this)},n.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},n.prototype.addStageListener=function(){Laya.stage.on("mousedown",this,this.hidePanel)},n.prototype.hidePanel=function(t){t.target instanceof Laya.Button&&t.target.parent instanceof h.FactionPanel||t.target instanceof n||t.target instanceof Laya.Box||c.instance.close(272)},n.prototype.updateView=function(){1==h.FactionModel.instance.post?this._btns=[this.box_0,this.box_1,this.box_2,this.box_3,this.box_4,this.box_5,this.box_7]:2==h.FactionModel.instance.post?this._btns=[this.box_0,this.box_1,this.box_2,this.box_3,this.box_6,this.box_7]:3==h.FactionModel.instance.post?this._btns=[this.box_0,this.box_6,this.box_7]:this._btns=[this.box_7];for(var t=0,e=this._allBtns;t<e.length;t++)e[t].visible=!1;for(var i=0,n=this._btns.length;i<n;i++)this._btns[i].pos(42+i%4*151,24+136*Math.floor(i/4)),this._btns[i].visible=!0},n.prototype.btnsHandler=function(t){var e,i,n,s=this;switch(t){case 0:c.instance.open(266);break;case 1:c.instance.open(270);break;case 2:h.FactionModel.instance.lv<this.limitLv[0]?CommonUtil.noticeError(36066,""):c.instance.open(327);break;case 3:h.FactionModel.instance.lv<this.limitLv[1]?CommonUtil.noticeError(36067,""):c.instance.open(328);break;case 4:c.instance.open(265,"reset");break;case 5:n=(0<l.redBag.RedBagModel.instance.getChanlByRPpkg(2)?"您还有未发放的红包，解散仙盟时红包将由系统回收,":"")+"解散后该仙盟的数据将<span style='color:#ff3e3e'>全部清除且无法恢复</span>,是否继续?",e=Handler.create(this,function(){h.FactionCtrl.instance.dissolution()}),i=Handler.create(this,this.addStageListener),Laya.stage.off("mousedown",this,this.hidePanel),CommonUtil.alert("温馨提示",n,[e],[i,null,!0]);break;case 6:var o=PlayerModel.instance.actorId,a=h.FactionModel.instance.getMemberById(o)[5],r=h.FactionUtil.post.indexOf(a);n="卸任后,将<span style='color:#ff3e3e'>失去</span>该职位的所有<span style='color:#ff3e3e'>权限</span>,是否确定<span style='color:#ff3e3e'>卸任【"+h.FactionUtil.postNames[r]+"】职位</span>?",e=Handler.create(this,function(){h.FactionCtrl.instance.SetPosition([o,0]),s.close()}),i=Handler.create(this,this.addStageListener),Laya.stage.off("mousedown",this,this.hidePanel),CommonUtil.alert("卸任官职",n,[e],[i]);break;case 7:1==h.FactionModel.instance.post?l.notice.SystemNoticeManager.instance.addNotice("需将盟主转移给其他盟友方可退出仙盟",!0):(n=(0<l.redBag.RedBagModel.instance.getChanlByRPpkg(2)?"您还有未发放的红包，退出仙盟时将自动发放,":"")+"退出仙盟后,我的宝藏将<span style='color:#ff3e3e'>全部清空</span>,是否确定<span style='color:#ff3e3e'>退出该仙盟</span>?",e=Handler.create(h.FactionCtrl.instance,h.FactionCtrl.instance.exitFaction),i=Handler.create(this,this.addStageListener),Laya.stage.off("mousedown",this,this.hidePanel),CommonUtil.alert("退出仙盟",n,[e],[i]))}},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._allBtns=this.destroyElement(this._allBtns),this._btns=this.destroyElement(this._btns),i.prototype.destroy.call(this,t)},e=n,h.FactionManagePanel=e}(modules=modules||{}),function(t){var r,e,i,l,n,s,h,o,a,c,p;function u(){return null!==e&&e.apply(this,arguments)||this}r=t.faction||(t.faction={}),i=t.faction.FactionCtrl,l=t.common.CommonUtil,n=t.core.WindowManager,s=ui.FactionViewUI,h=t.config.FactionCfg,o=t.common.ProgressBarCtrl,a=t.common.CustomList,c=t.config.BlendCfg,e=s,__extends(u,e),u.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._bar=new o(this.expBarImg,this.expBarImg.width,this.expBarTxt),this._list=new a,this._list.scrollDir=1,this._list.x=52,this._list.y=480,this._list.width=616,this._list.height=525,this._list.hCount=1,this._list.itemRender=r.FactionFuncEnterItem,this._list.spaceY=5,this.addChild(this._list)},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.operaBtn,this,this.operaBtnHandler),this.onAutoClick(this.rankImg,this,this.rankImgHandler),this.onAutoClick(this.storeBtn,this,this.storeBtnHandler),this.onAutoClick(this.impeachBtn,this,this.impeachHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoGlobalEvt("FACTION_INFO",this,this.updateView),this.onAutoGlobalEvt("PLAYER_CONTRIBUTION",this,this.updateContribute),this.onAutoGlobalEvt("FACTION_UPDATE_IMPEACH",this,this.updateImpeach),this.onAutoGlobalEvt("FACTION_INFO",this,this.updateImpeach),this.regAutoRP(this.rpImg,["factionApplyJoinRP","factionPostApplyRP"])},u.prototype.helpHandler=function(){l.alertHelp(19016)},u.prototype.onOpened=function(){e.prototype.onOpened.call(this),i.instance.makeFactionPanel(!0),i.instance.getFactionPersonalInfo(),i.instance.getBoxInfo(),i.instance.getFactionCopyInfo(),i.instance.getFactionInfo(),this.updateView(),this.updateList(),this.updateImpeach()},u.prototype.updateImpeach=function(){var t=r.FactionModel.instance.checkImpeachState();if(1===t){this.impeachBtn.visible=!0,this.impeachBtn.disabled=!1,this.impeachBtn.label="弹劾盟主";var e=r.FactionModel.instance.getMemberById(PlayerModel.instance.actorId);e&&e[14]&&n.instance.open(948,!0)}else 2===t||3===t?(this.impeachBtn.visible=!0,this.impeachBtn.disabled=!0,this.impeachBtn.label="弹劾中"):this.impeachBtn.visible=!1},u.prototype.updateList=function(){this._list.datas=["baozang","zhuxian","zhengba",null]},u.prototype.close=function(){e.prototype.close.call(this),i.instance.makeFactionPanel(!1),n.instance.close(272)},u.prototype.updateView=function(){var t=r.FactionModel.instance.bossInfo;t&&(this.bossTxt.text="盟主:"+t[0]),this.iconImg.skin="assets/icon/ui/faction/"+c.instance.getCfgById(36004)[2][r.FactionModel.instance.flagIndex]+".png";var e=l.bigNumToString(r.FactionModel.instance.fight);this.fightTxt.text="仙盟战力:"+e;var i=r.FactionModel.instance.lv;this.lvMsz.value=i.toString();var n=h.instance.getCfgByLv(i);if(n){var s=n[2],o=r.FactionModel.instance.memberList.length;this.numTxt.text="人数:"+o+"/"+s,this._bar.maxValue=n[1];var a=r.FactionModel.instance.exp;this._bar.value=a,this.rankTxt.text="排名:"+r.FactionModel.instance.rank,this.noticeTxt.text=r.FactionModel.instance.notice,this.nameTxt.text=r.FactionModel.instance.name,this.updateContribute()}},u.prototype.updateContribute=function(){this.contributeTxt.text="我的贡献:"+PlayerModel.instance.contribution},u.prototype.operaBtnHandler=function(){n.instance.getPanelById(272)&&n.instance.isOpened(272)?n.instance.close(272):n.instance.open(272)},u.prototype.rankImgHandler=function(){n.instance.open(87,65536)},u.prototype.storeBtnHandler=function(){n.instance.open(414)},u.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._bar=this.destroyElement(this._bar),e.prototype.destroy.call(this,t)},u.prototype.impeachHandler=function(){n.instance.open(948)},p=u,r.FactionPanel=p}(modules=modules||{}),function(t){var h,s,c,o,e,a,r,p,l,i;function n(){return null!==s&&s.apply(this,arguments)||this}h=t.faction||(t.faction={}),c=utils.ArrayUtils,o=t.common.BtnGroup,e=ui.FactionCreateAlertUI,a=Laya.Image,r=t.notice.SystemNoticeManager,p=t.config.BlendCfg,l=t.bag.BagUtil,s=e,__extends(n,s),n.prototype.initialize=function(){var t;s.prototype.initialize.call(this),this._imgSpace=120;var e=p.instance.getCfgById(36004)[2].length;this._iconIndexs=[],this._imgs=[];for(var i=0;i<e;i++){this._iconIndexs.push(i);var n=new a;this._imgs.push(n),this.listBox.addChild(n),n.width=103,n.height=104,n.x=20+i*this._imgSpace}this._imgGroup=new o,(t=this._imgGroup).setBtns.apply(t,this._imgs),this.listBox.width=this._imgs[e-1].x+this._imgs[e-1].width,this._time=0},n.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoEvt(this._imgGroup,"change",this,this.selecetIconImg),this._imgGroup.selectedIndex=0,this.onAutoClick(this.lShiftImg,this,this.imgsShowHandler,[0]),this.onAutoClick(this.rShiftImg,this,this.imgsShowHandler,[1]),this.onAutoEvt(this.inputTxt,"mousedown",this,this.inputHandler),this.onAutoEvt(this.inputTxt,"blur",this,this.otherHandler)},n.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t),this.type=t},Object.defineProperty(n.prototype,"type",{set:function(t){this._type=t,"creat"===this._type?(this.titleTxt.text="创建仙盟",this.okBtn.label="确认创建",this.tipTxt.text="恭喜上仙开宗立派!请选择一个仙盟旗帜"):(this.titleTxt.text="仙盟改名",this.okBtn.label="确认",this.tipTxt.text="请选择一个仙盟旗帜")},enumerable:!0,configurable:!0}),n.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.listBox.x=0,this.updateView(),this.imgsShow()},n.prototype.updateView=function(){var t="creat"===this._type?36001:36045,e=p.instance.getCfgById(t)[1],i=e[0],n=e[1],s=CommonUtil.getPropCountById(i);this.propImg.skin=CommonUtil.getIconById(i,!0),"creat"===this._type?(this.propTxt.text=CommonUtil.bigNumToString(n),this.state=!0):(this.propTxt.text=s+"/"+n,this._time=h.FactionModel.instance.changeNameCD,this.state=this.state),this.propTxt.color=n<=s?"#2d1a1a":"#ff3e3e";var o=p.instance.getCfgById(36004)[2];this._iconIndexs=c.disturb(this._iconIndexs);for(var a=0,r=o.length;a<r;a++){var l=o[this._iconIndexs[a]];this._imgs[a].skin="assets/icon/ui/faction/"+l+".png"}},n.prototype.imgsShowHandler=function(t){var e=4*this._imgSpace;if(t){if(this.listBox.x<=500-this.listBox.width)return;this.listBox.x-=e}else{if(0<=this.listBox.x)return;this.listBox.x+=e}this.imgsShow()},n.prototype.loopHandler=function(){this._time<=GlobalData.serverTime?this.state=!0:this.timeTxt.text="冷却倒计时："+CommonUtil.timeStampDDHHMMToHHMMSS(this._time)},Object.defineProperty(n.prototype,"state",{get:function(){return this._time<=GlobalData.serverTime},set:function(t){t?(this.timeTxt.visible=!1,this.okBtn.visible=this.propBox.visible=!0,Laya.timer.clear(this,this.loopHandler)):(Laya.timer.loop(1e3,this,this.loopHandler),this.timeTxt.visible=!0,this.okBtn.visible=this.propBox.visible=!1,this.loopHandler())},enumerable:!0,configurable:!0}),n.prototype.imgsShow=function(){this.rShiftImg.visible=!(this.listBox.x<=500-this.listBox.width),this.lShiftImg.visible=!(0<=this.listBox.x)},n.prototype.inputHandler=function(){this.inputTxt.prompt=" "},n.prototype.otherHandler=function(){this.inputTxt.prompt="输入仙盟名称"},n.prototype.selecetIconImg=function(){this.selectImg.x=this._imgGroup.selectedBtn.x-7},n.prototype.okBtnHandler=function(){var i=this,n=this.inputTxt.text;n?StringUtils.containSpace(n)?r.instance.addNotice("名字不能包含空格",!0):t.chat.ChatModel.instance.isValidContent(n)?n.length<1||6<n.length?r.instance.addNotice("名字长度为1~6个字",!0):CommonUtil.checkWords(n,function(){if("creat"===i._type)h.FactionCtrl.instance.createFaction([n,i._iconIndexs[i._imgGroup.selectedIndex]]);else{var t=p.instance.getCfgById(36045)[1][0],e=p.instance.getCfgById(36045)[1][1];if(!(e<=CommonUtil.getPropCountById(t)))return void l.openLackPropAlert(t,e);h.FactionCtrl.instance.changeFactionName(n,i._iconIndexs[i._imgGroup.selectedIndex])}i.close()}):r.instance.addNotice("包含非法字符",!0):r.instance.addNotice("请先给仙盟起个名字",!0)},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._imgs=this.destroyElement(this._imgs),this._imgGroup=this.destroyElement(this._imgGroup),this._iconIndexs&&(this._iconIndexs.length=0,this._iconIndexs=null),s.prototype.destroy.call(this)},i=n,h.FactionCreateAlert=i}(modules=modules||{}),function(t){var i,e,n,s,o,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}i=t.faction||(t.faction={}),n=t.faction.FactionCtrl,s=t.core.WindowManager,o=ui.FactionAskAlertUI,a=t.common.CustomList,e=o,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new a,this._list.scrollDir=1,this._list.width=560,this._list.height=545,this._list.hCount=1,this._list.itemRender=i.FactionAskItem,this._list.x=51,this._list.y=180,this._list.spaceY=5,this.addChild(this._list),this._cd=0},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.limitBtn,this,this.limitBtnHandler),this.onAutoClick(this.flagBtn,this,this.flagBtnHandler),this.onAutoClick(this.searchBtn,this,this.searchBtnHandler),this.onAutoGlobalEvt("FACTION_INFO",this,this.updateView),this.onAutoGlobalEvt("FACTION_JOIN_LIST",this,this.updateList),Laya.timer.loop(1e3,this,this.loopHandler)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),n.instance.getFactionJoinList(),this.updateView(),this.updateList()},l.prototype.updateView=function(){this.flagBtn.selected=!i.FactionModel.instance.examine,this._cd=i.FactionModel.instance.cd,this.loopHandler();var t=i.FactionModel.instance.limit;if(t<=0)this.limitTxt.text="无限制";else{var e=CommonUtil.bigNumToString(t);this.limitTxt.text="需达到"+e+"战力"}},l.prototype.updateList=function(){var t=i.FactionModel.instance.requestJoinList;t&&(t=t.concat().sort(this.sortFunc.bind(this)),this._list.datas=t,this.noImg.visible=this.noTxt.visible=!(0<t.length))},l.prototype.sortFunc=function(t,e){var i=t[3],n=e[3];return i!==n?n-i:e[5]-t[5]},l.prototype.loopHandler=function(){i.FactionModel.instance.cd<=GlobalData.serverTime?this.timeTxt.visible=!1:(this.timeTxt.visible=!0,this.timeTxt.text=CommonUtil.timeStampToMMSS(this._cd))},l.prototype.limitBtnHandler=function(){s.instance.open(267)},l.prototype.flagBtnHandler=function(){n.instance.setExamine([this.flagBtn.selected])},l.prototype.searchBtnHandler=function(){n.instance.broadcastRecruit()},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},l.prototype.close=function(){s.instance.open(272),e.prototype.close.call(this)},r=l,i.FactionAskAlert=r}(modules=modules||{}),function(e){var i,t,n,s;function o(){return t.call(this)||this}i=e.faction||(e.faction={}),n=ui.FactionJoinLimitSetAlertUI,t=n,__extends(o,t),o.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler)},o.prototype.okBtnHandler=function(){var t=this.inputTxt.text;t?(i.FactionCtrl.instance.setFight([parseInt(t)]),this.close()):e.notice.SystemNoticeManager.instance.addNotice("输入内容不能为空",!0)},s=o,i.FactionJoinLimitSetAlert=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.faction||(t.faction={}),n=ui.FactionMemberItemUI,s=t.rename.RenameModel,i=n,__extends(a,i),a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName)},a.prototype.setData=function(t){var e=(this._info=t)[9],i=t[10];this.vipShowItem.setSVIPandVIP(i,e,t[15]),this.nameTxt.text=t[0];var n=CommonUtil.bigNumToString(t[4]);this.fightTxt.text=""+n,this.contributeTxt.text=""+t[7];var s=t[8];if(this.stateTxt.color="#344c6f",s)this.stateTxt.text="在线",this.stateTxt.color="#0ecf09";else{var o=t[6];if(0==o)this.stateTxt.text="离线";else{var a=GlobalData.serverTime-o;a=a<0?0:a;var r=CommonUtil.getTimeTypeAndTime(a);this.stateTxt.text=r+"前"}}},a.prototype.updateName=function(){if(this._info){var t=s.instance.updateNameReply;t&&this._info[1]===t[0]&&(this.nameTxt.text=t[1])}},o=a,e.FactionMemberItem=o}(modules=modules||{}),function(t){var e,i,h,c,p,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.faction||(t.faction={}),h=t.faction.FactionModel,c=t.common.GlobalData,p=t.common.CommonUtil,n=t.faction.FactionMemberItem,s=ui.FactionMemberViewUI,o=t.rename.RenameModel,a=t.common.SimpleList,i=s,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=a.create(n,650,42,1,1,0,5),this._list.x=0,this._list.y=122,this._list.width=650,this.selectBox_1.addChild(this._list),this._hufas=[this.huFa_0,this.huFa_1,this.huFa_2],this.huFa_0.post=3,this.huFa_1.post=3,this.huFa_2.post=3,this.fuMeng.post=2,this._endY=1135},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.selectBtn_0,this,this.selectBtn_0Handler),this.onAutoClick(this.arrowBtn_0,this,this.selectBtn_0Handler),this.onAutoGlobalEvt("FACTION_INFO",this,this.updateView),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc)},l.prototype.selectBtn_0Handler=function(){this.selectBtn_0.selected=!this.selectBtn_0.selected,this.showSelectBtn_0()},l.prototype.showSelectBtn_0=function(){this.selectBtn_0.selected?(this.arrowBtn_0.skin="common/btn_common_arrow_sjt4.png",this.selectBox_0.visible=!0,this.selectBox_1.y=this.selectBox_0.y+this.selectBox_0.height):(this.arrowBtn_0.skin="common/btn_common_arrow_sjt3.png",this.selectBox_0.visible=!1,this.selectBox_1.y=this.selectBox_0.y),this.selectBox_1.height=this._endY-this.selectBox_1.y,this._list.height=this.selectBox_1.height-this._list.y-10,this.bgImg_1.height=this.selectBox_1.height-this.bgImg_1.y,this._commonInfos&&(this._list.datas=this._commonInfos)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.FactionCtrl.instance.makeFactionPanel(!0),e.FactionCtrl.instance.getFactionInfo(),e.FactionCtrl.instance.getFactionPersonalInfo(),this.updateView(),this.showSelectBtn_0(),this.updateMemberList()},l.prototype.updateView=function(){var t=h.instance.bossInfo;if(t){this.bossInfo=t;var e=h.instance.deputyInfo;this.fuMeng.setData(e);var i=h.instance.manageInfos,n=0,s=0;if(e&&(e[8]&&n++,s++),i){for(var o=0,a=i=i.sort(h.instance.sortByFightAndLv.bind(this));o<a.length;o++)a[o][8]&&n++;s+=i.length}for(var r=0,l=this._hufas.length;r<l;r++)this._hufas[r].setData(i[r]);this.selectBtn_0.label="官员("+n+"/"+s+")"}},l.prototype.updateMemberList=function(){this._commonInfos=h.instance.commonInfos.concat(),this._commonInfos=this._commonInfos.sort(this.sortFunc.bind(this)),this._list.datas=this._commonInfos;for(var t=this._commonInfos.length,e=0,i=0,n=this._commonInfos;i<n.length;i++)n[i][8]&&e++;this.selectBtn_1.label="成员("+e+"/"+t+")"},l.prototype.sortFunc=function(t,e){var i=t[8],n=e[8];if(i!=n)return i?-1:n?1:0;var s=t[4],o=e[4];return o<s?-1:s<o?1:0},Object.defineProperty(l.prototype,"bossInfo",{set:function(t){var e=(this._bossInfo=t)[9],i=t[10];this.vipShowItem.setSVIPandVIP(i,e,t[15]);var n=t[0];this.nameTxt.text=n;var s=t[3],o=t[11],a=t[12];if(this.headIcon.setInfo(o,s,a),this.fightMsz.value=t[4].toString(),t[8])this.stateTxt.text="在线",this.stateTxt.color="#50ff28";else{var r=t[6],l=c.serverTime-r,h=p.getTimeTypeAndTime(l);this.stateTxt.text=h+"前",this.stateTxt.color="#c6c6c6"}},enumerable:!0,configurable:!0}),l.prototype.updateName=function(){if(this._bossInfo){var t=o.instance.updateNameReply;t&&this._bossInfo[1]===t[0]&&(this.nameTxt.text=t[1])}},l.prototype.updateOcc=function(){if(this._bossInfo){var t=o.instance.updateOccReply;if(t&&this._bossInfo[1]===t[0]){var e=t[1],i=this._bossInfo[11],n=this._bossInfo[12];this.headIcon.setInfo(i,e,n)}}},l.prototype.close=function(){e.FactionCtrl.instance.makeFactionPanel(!1),i.prototype.close.call(this)},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._hufas=this.destroyElement(this._hufas),this._commonInfos&&(this._commonInfos.length=0,this._commonInfos=null),i.prototype.destroy.call(this,t)},r=l,e.FactionMemberPanel=r}(modules=modules||{}),function(o){var t,a,h,r,l,c,e,i,p,u,d,m,f,n;function s(){return null!==a&&a.apply(this,arguments)||this}t=o.faction||(o.faction={}),h=o.common.CommonUtil,r=o.core.WindowManager,l=o.notice.SystemNoticeManager,c=o.common.BtnGroup,e=ui.FactionWealViewUI,i=o.common.CustomClip,p=o.common.ProgressBarCtrl,u=o.config.BlendCfg,d=o.faction.FactionModel,m=o.faction.FactionCtrl,f=o.config.ItemMaterialCfg,a=e,__extends(s,a),s.prototype.initialize=function(){a.prototype.initialize.call(this),this.centerX=this.centerY=0,this._angleArr=[];for(var t=0;t<10;t++)this._angleArr.push(36*t);var e=u.instance.getCfgById(36033)[1];this._itemDatas=[],t=0;for(var i=e.length;t<i;t+=3)this._itemDatas.push([e[t],e[t+1],0,null]);for(this._showItems=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10],t=0,i=this._showItems.length;t<i;t++)this._showItems[t].dataSource=this._itemDatas[t];this._proCtrl=new p(this.barImg,this.barImg.width,this.barTxt);var n=u.instance.getCfgById(36031)[1][0];for(this._proCtrl.maxValue=n,this._btnGroup=new c,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1),this._sevTexts=[],this._txtContens=[],this._sevShowLen=4,this._loopTxtSpaceY=50,t=0;t<this._sevShowLen;t++){var s=new laya.html.dom.HTMLDivElement;s.width=330,s.style.height=this._loopTxtSpaceY,s.pos(0,t*this._loopTxtSpaceY),s.style.fontFamily="SimHei",s.style.fontSize=20,s.style.wordWrap=!0,this._sevTexts.push(s),this.severPanel.addChild(s)}this.updateSeverList(),this._turnIndex=0,this._eff=h.creatEff(null,"ok_state",7),this._eff.pos(445,680),this.addChildAt(this._eff,3),this._oneClip=h.creatEff(this.oneBtn,"btn_light",15),this._oneClip.pos(-5,-10,!0),this._tenClip=h.creatEff(this.tenBtn,"btn_light",15),this._tenClip.pos(-5,-10,!0)},s.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.updateView),this._btnGroup.selectedIndex=1,this.onAutoGlobalEvt("FACTION_WEAL_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FACTION_TURN_LIST",this,this.updateRecordList),this.onAutoGlobalEvt("FACTION_TURN_RESULT",this,this.turnResultHandler),this.onAutoClick(this.oneBtn,this,this.turnBtnHandler,[1]),this.onAutoClick(this.tenBtn,this,this.turnBtnHandler,[10]),this.onAutoClick(this.awardBtn,this,this.awardBtnHandler),this.regAutoRP(this.wealRPImg,["factionDialRP"]),this.regAutoRP(this.skillRPImg,["factionSkillRP"]),Laya.timer.frameLoop(1,this,this.updateSeverList)},s.prototype.offEvt=function(){a.prototype.offEvt.call(this),Laya.timer.clear(this,this.updateSeverList)},s.prototype.onOpened=function(){a.prototype.onOpened.call(this),m.instance.getFactionTurn(),m.instance.getFactionTurnRecord(),this.frameImg.rotation=this._angleArr[this._index],this.frameImg.visible=!1,this.updateView()},s.prototype.turnBtnHandler=function(t){var e=this.getNeedProp(t);if(e){var i=e[0],n=e[1],s=h.getPropCountById(i);n<=s?m.instance.factionTurn(t):o.bag.BagUtil.openLackPropAlert(i,n-s)}else{if(this._tweenJS&&this._tweenJS.isPlaying)return void l.instance.addNotice("操作过于频繁",!0);m.instance.factionTurn(t)}},s.prototype.turnResultHandler=function(){var t=this,e=d.instance.turnResult;this._isTen=1<e.length,this._isTen?r.instance.open(300,e):(this._index=e[e.length-1],this._tweenJS&&this._tweenJS.stop(),this._tweenJS=TweenJS.create(this).to({turnToIndex:6*this._showItems.length+this._index},4e3).start().onStart(function(){t.frameImg.visible=!0}).easing(utils.tween.easing.quadratic.InOut).onUpdate(function(){t.frameImg.rotation=t._angleArr[t.turnToIndex]}).onComplete(function(){h.delayedPutInBag(),t._tweenJS.stop(),t._tweenJS=null}))},Object.defineProperty(s.prototype,"turnToIndex",{get:function(){return Math.floor(this._turnIndex)%this._showItems.length},set:function(t){this._turnIndex=t},enumerable:!0,configurable:!0}),s.prototype.updateView=function(){if(0!=this._btnGroup.selectedIndex){var t=d.instance.dialInfo;if(t){this._proCtrl.value=t[0];var e=t[3],i=u.instance.getCfgById(36030)[1][0],n=u.instance.getCfgById(36030)[1][1],s=h.getPropCountById(i);e<=0?(this.oneBtn.label="转一次",this.onePropBox.visible=!0,this.onePropTxt.text=s+"/"+n,this.onePropTxt.color=n<=s?"#168a17":"#ff3e3e",this.setEffState(n<=s,this._oneClip)):(this.oneBtn.label="免费",this.onePropBox.visible=!1,this.setEffState(!0,this._oneClip)),this.onePropImg.skin=this.tenPropImg.skin=h.getIconById(i,!0),this.tenPropTxt.text=s+"/"+10*n,this.tenPropTxt.color=10*n<=s?"#168a17":"#ff3e3e",this.setEffState(10*n<=s,this._tenClip);var o=t[2];this.setEffState(!!o,this._eff)}}else r.instance.open(295)},s.prototype.setEffState=function(t,e){t?i.thisPlay(e):i.thisStop(e)},s.prototype.getNeedProp=function(t){var e=d.instance.dialInfo;if(e){var i=e[3],n=u.instance.getCfgById(36030)[1][0],s=u.instance.getCfgById(36030)[1][1],o=h.getPropCountById(n);return 1==t?0<i?null:[n,s-o]:(s*=10)<=o?null:[n,s]}},s.prototype.updateSeverList=function(){if(0<this._txtContens.length)for(var t=0;t<this._sevTexts.length;t++)this._sevTexts[t].y-=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this._sevTexts[t].y<=-(this._loopTxtSpaceY+1)&&(this._sevTexts[t].y=this.severPanel.height+1,this._sevShowLen<this._txtContens.length?this._sevShowLen++:this._sevShowLen=1,this._sevTexts[t].innerHTML=this._txtContens[this._sevShowLen-1])},s.prototype.updateRecordList=function(){var t=d.instance.turnList;if(t&&0<t.length){0<this._txtContens.length&&(this._txtContens.length=0),t.reverse();for(var e=t.length>this._sevTexts.length?t.length:this._sevTexts.length,i=0;i<e;i++){var n=void 0;if(t[i]){var s=t[i][0],o=t[i][1];if(!this._itemDatas[o])continue;var a=this._itemDatas[o][0],r=f.instance.getItemCfgById(a)[1],l=this._itemDatas[o][1];n="<span style='color:#1F304d;'>天赐鸿福,</span><span style='color:rgb(13,121,255);'>"+s+"</span><span style='color:#1F304d;'>获得了</span><br/><span style='color:"+h.getColorById(a)+";'>"+r+"*"+l+"</span>"}else n="<br/>";this._txtContens.push(n)}}},s.prototype.awardBtnHandler=function(){if(d.instance.dialInfo[2])m.instance.getBlessAward();else{var t=u.instance.getCfgById(36032)[1],e=[t[0],t[1],0,null];r.instance.open(212,[[e],"奖励预览"])}},s.prototype.close=function(){this._tweenJS&&this._tweenJS.stop(),h.delayedPutInBag(),a.prototype.close.call(this)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._angleArr&&(this._angleArr.length=0,this._angleArr=null),this._txtContens&&(this._txtContens.length=0,this._txtContens=null),this._itemDatas&&(this._itemDatas.length=0,this._itemDatas=null),this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),this._eff=this.destroyElement(this._eff),this._oneClip=this.destroyElement(this._oneClip),this._tenClip=this.destroyElement(this._tenClip),this._sevTexts=this.destroyElement(this._sevTexts),this._proCtrl=this.destroyElement(this._proCtrl),this._showItems=this.destroyElement(this._showItems),this._btnGroup=this.destroyElement(this._btnGroup),a.prototype.destroy.call(this,t)},n=s,t.FactionWealPanel=n}(modules=modules||{}),function(t){var o,e,i,n,s,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}o=t.faction||(t.faction={}),i=t.common.GlobalData,n=ui.FactionMemberOperaItemUI,s=Laya.Point,a=t.notice.SystemNoticeManager,e=n,__extends(l,e),l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler)},l.prototype.setData=function(t){var e=(this._info=t)[9],i=t[10];this.vipShowItem.setSVIPandVIP(i,e,t[15]),this.nameTxt.text=t[0];var n=CommonUtil.bigNumToString(t[4]);this.fightTxt.text=n,this.contributeTxt.text=t[7].toString();var s=o.FactionUtil.post.indexOf(t[5]);this.postTxt.text=o.FactionUtil.postNames[s]},l.prototype.btnHandler=function(){o.FactionModel.instance.getMemberById(this._info[1])?(o.FactionModel.instance.tempPos=this.localToGlobal(new s(0,0)),i.dispatcher.event("FACTION_SHOW_OPERA_PANEL",[this._info])):(a.instance.addNotice("仙盟无此成员",!0),i.dispatcher.event("FACTION_UPDATE_MEMBER_OPERAT_LIST"))},r=l,o.FactionMemberOperaItem=r}(modules=modules||{}),function(t){var a,e,i,n;function s(){return e.call(this)||this}a=t.faction||(t.faction={}),i=ui.FactionAskItemUI,e=i,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.passBtn,this,this.btnHandler,[1]),this.onAutoClick(this.refuseBtn,this,this.btnHandler,[0])},s.prototype.setData=function(t){this._post=t[0];var e=a.FactionUtil.post.indexOf(this._post);this.lvTxt.text=a.FactionUtil.postNames[e];var i=t[1];this._agendId=i[1];var n=i[9],s=i[10];this.vipShowItem.setSVIPandVIP(s,n,i[15]),this.nameTxt.text=i[0];var o=CommonUtil.bigNumToString(i[4]);this.fightTxt.text=o},s.prototype.btnHandler=function(t){a.FactionCtrl.instance.applyForPosResult([this._agendId,this._post,t])},n=s,a.FactionApplyPostItem=n}(modules=modules||{}),function(t){var l,h,o,a,e,i;function n(){return null!==h&&h.apply(this,arguments)||this}l=t.faction||(t.faction={}),o=t.common.CommonUtil,a=t.faction.FactionCtrl,e=ui.FactionMemberOperaViewUI,h=e,__extends(n,h),n.prototype.initialize=function(){h.prototype.initialize.call(this),this.centerX=60},n.prototype.setOpenParam=function(t){h.prototype.setOpenParam.call(this,t),this._info=t,this.nameTxt.text=""+t[0];var e=t[9],i=t[10];this.vipShowItem.setSVIPandVIP(i,e,t[15]);var n,s,o=t[5];this.btn_0.visible=this.btn_1.visible=this.btn_2.visible=this.btn_3.visible=!1,1==l.FactionModel.instance.post?(this._btns=[this.btn_0,this.btn_1,this.btn_2,this.btn_3],n=2==o?(s=["任命为护法","任命为成员","转移盟主","踢出仙盟"],[3,0,1,null]):3==o?(s=["任命为副盟主","任命为成员","转移盟主","踢出仙盟"],[2,0,1,null]):(s=["任命为副盟主","任命为护法","转移盟主","踢出仙盟"],[2,3,1,null])):2==l.FactionModel.instance.post&&(this._btns=[this.btn_0,this.btn_2],n=3==o?(s=["任命为成员","踢出仙盟"],[0,null]):(s=["任命为护法","踢出仙盟"],[3,null]));for(var a=0,r=this._btns.length;a<r;a++)this._btns[a].y=80+50*a,this._btns[a].label=s[a],this._btns[a].visible=!0,this.onAutoClick(this._btns[a],this,this.btnHandler,[n[a]]);this.bgImg.height=this.height=this._btns[this._btns.length-1].y+this._btns[this._btns.length-1].height+20},n.prototype.btnHandler=function(t){var e=this._info[1],i=this._info[0];if(1==t){var n=Handler.create(a.instance,a.instance.SetPosition,[[e,t]]),s="转移后您将<span style='color:#ff3e3e'>失去仙盟控制权</span>,是否将盟主转移给<span style='color:#ffec7c'>"+i+"</span>?";o.alert("转移盟主",s,[n],[])}else null==t?(n=Handler.create(a.instance,a.instance.kick,[[e]]),s="是否确定将<span style='color:#b15315'>"+i+"</span><span style='color:#ff3e3e'>踢出仙盟</span>?",o.alert("踢出仙盟",s,[n],[])):a.instance.SetPosition([e,t]);this.close()},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btns=this.destroyElement(this._btns),h.prototype.destroy.call(this,t)},i=n,l.FactionMemberOperaPanel=i}(modules=modules||{}),function(t){var l,e,i,h,n,s,o,c,a;function r(){return null!==e&&e.apply(this,arguments)||this}l=t.faction||(t.faction={}),i=t.faction.FactionMemberOperaPanel,h=t.faction.FactionApplyPostItem,n=t.common.BtnGroup,s=t.faction.FactionMemberOperaItem,o=ui.FactionMemberOperaAlertUI,c=t.common.CustomList,e=o,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnGroup=new n,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1),this._operalist=new c,this._operalist.scrollDir=1,this._operalist.x=36,this._operalist.y=173,this._operalist.width=590,this._operalist.height=377,this._operalist.hCount=1,this._operalist.itemRender=s,this._operalist.spaceY=5},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.updateView),this._btnGroup.selectedIndex=0,this.onAutoClick(this.operaBtn,this,this.operaBtnHandler),this.onAutoClick(GlobalData.dispatcher,this,this.updateView),this.onAutoGlobalEvt("FACTION_SHOW_OPERA_PANEL",this,this.showOperaPanel),this.onAutoGlobalEvt("FACTION_APPLY_POST_LIST",this,this.updateApplyList),this.onAutoGlobalEvt("FACTION_UPDATE_MEMBER_OPERAT_LIST",this,this.updateMemberList),this.onAutoEvt(Laya.stage,"mousedown",this,this.hidePanel),this.regAutoRP(this.applyRPImg,["factionPostApplyRP"])},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},r.prototype.updateView=function(){0==this._btnGroup.selectedIndex?(this.txtShow=0,this.updateMemberList()):(this.txtShow=1,l.FactionCtrl.instance.getApplyForPosList(),this.updateApplyList())},r.prototype.updateMemberList=function(){if(1!=this._btnGroup.selectedIndex){this.operaBtn.visible=!0,this.bgImg.height=480,this._askList&&this._askList.removeSelf(),this.addChildAt(this._operalist,5);var t=[];1==l.FactionModel.instance.post&&l.FactionModel.instance.deputyInfo&&t.push(l.FactionModel.instance.deputyInfo),this.screen(t),0<t.length?this.noBox.visible=!1:(this.noBox.visible=!0,this.noTxt.text="暂无其他成员",this.noBox.y=120),this._operalist.datas=t}},r.prototype.updateApplyList=function(){if(0!=this._btnGroup.selectedIndex){var t=l.FactionModel.instance.applyForPosList;if(t){0<t.length?this.noBox.visible=!1:(this.noBox.visible=!0,this.noTxt.text="暂时无人申请",this.noBox.y=175),this._askList||(this._askList=new c,this._askList.scrollDir=1,this._askList.x=50,this._askList.y=173,this._askList.width=590,this._askList.height=470,this._askList.hCount=1,this._askList.itemRender=h,this._askList.spaceY=5),this.addChild(this._askList),this._operalist.removeSelf(),this.operaBtn.visible=!1,this.bgImg.height=560;for(var e=[],i=0,n=t;i<n.length;i++){var s=n[i],o=s[0],a=l.FactionModel.instance.getMemberById(o),r=s[1];a&&e.push([r,a])}e=e.sort(this.askSort.bind(this)),this._askList.datas=e}}},r.prototype.screen=function(t){var e=l.FactionModel.instance.manageInfos.concat();1<e.length&&(e=e.sort(this.sortFunc.bind(this))),t.push.apply(t,e),1<(e=l.FactionModel.instance.commonInfos.concat()).length&&(e=e.sort(this.sortFunc.bind(this))),t.push.apply(t,e)},r.prototype.askSort=function(t,e){var i=t[0],n=e[0];return i!==n?i-n:e[1][4]-t[1][4]},r.prototype.sortFunc=function(t,e){var i=t[7],n=e[7];return i!==n?n-i:e[4]-t[4]},r.prototype.showOperaPanel=function(t){this._panel||(this._panel=new i),this.addChild(this._panel);var e=this.globalToLocal(l.FactionModel.instance.tempPos,!0).y;this._panel.y=e,this._panel.setOpenParam(t)},r.prototype.hidePanel=function(t){t.target instanceof Laya.Button&&t.target.parent instanceof s||t.target instanceof i||t.target instanceof Laya.Button&&t.target.parent instanceof i||this._panel&&this._panel.removeSelf()},Object.defineProperty(r.prototype,"txtShow",{set:function(t){this.fightTxt.x=t?310:266,this.contributeTxt.visible=!t,this.postTxt.x=t?430:468,this.operaTxt.x=t?530:552},enumerable:!0,configurable:!0}),r.prototype.operaBtnHandler=function(){WindowManager.instance.open(271)},r.prototype.destroy=function(){this._operalist=this.destroyElement(this._operalist),this._askList=this.destroyElement(this._askList),this._btnGroup=this.destroyElement(this._btnGroup),this._panel=this.destroyElement(this._panel),e.prototype.destroy.call(this)},r.prototype.close=function(){WindowManager.instance.open(272),e.prototype.close.call(this)},a=r,l.FactionMemberOperaAlert=a}(modules=modules||{}),function(t){var a,e,r,i,n,s;function o(){return e.call(this)||this}a=t.faction||(t.faction={}),r=t.config.BlendCfg,i=t.common.CustomList,n=ui.FactionPostLimitsAlertUI,e=n,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.scrollDir=1,this._list.x=46,this._list.y=170,this._list.width=570,this._list.height=500,this._list.hCount=1,this._list.itemRender=a.FactionPostLimitsItem,this._list.spaceY=5,this.addChild(this._list),this.initLimitList()},o.prototype.initLimitList=function(){for(var t=r.instance.getCfgById(36003)[1],e=[],i=0,n=t.length;i<n;i++)for(var s=0;s<a.FactionUtil.limitShowList.length;s++){var o=!!(t[i]>>a.FactionUtil.limitShowList[s]&1);e[s]||(e[s]=[]),e[s][i]=o}this._list.datas=e},o.prototype.destroy=function(){this._list&&(this._list.destroy(),this._list=null),e.prototype.destroy.call(this)},s=o,a.FactionPostLimitsAlert=s}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.faction||(t.faction={}),n=utils.ArrayUtils,s=t.config.BlendCfg,o=ui.FactionAutoInviteViewUI,i=o,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.flagBtn.selected=!1,this.centerX=0,this.bottom=300,this.layer=3},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoClick(this.flagBtn,this,this.flagBtnHandler)},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t);var e=t[1];this._id=t[0],this.nameTxt.text=e},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},r.prototype.updateView=function(){var t=s.instance.getCfgById(36036)[2];this.contentTxt.text=n.random(t)},r.prototype.okBtnHandler=function(){e.FactionCtrl.instance.joinFaction([this._id,0]),this.close()},r.prototype.flagBtnHandler=function(){this.flagBtn.selected=!this.flagBtn.selected,e.FactionCtrl.instance.selectPush([this.flagBtn.selected])},a=r,e.FactionAutoInvitePanel=a}(modules=modules||{}),function(t){var s,e,r,o,l,i,n,h,a;function c(){return null!==e&&e.apply(this,arguments)||this}s=t.faction||(t.faction={}),r=t.common.CommonUtil,o=t.core.WindowManager,l=t.faction.FactionModel,i=ui.BaozangListViewUI,n=t.common.CustomList,h=t.config.BlendCfg,e=i,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.scrollDir=1,this._list.x=40,this._list.y=237,this._list.width=636,this._list.height=705,this._list.hCount=1,this._list.itemRender=s.BaozangItem,this._list.spaceY=5,this.addChild(this._list),this._freeTime=this._time=0,r.setHTMLPro(this.freeCDTxt,"#1f304d","SimHei",26),this.freeCDTxt.mouseEnabled=!1,this.freeCDTxt.style.wordWrap=!1},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAOZANG_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("BAOZANG_INFO_UPDATE",this,this.updateList),this.onAutoGlobalEvt("BAOZANG_LIST_UPDATE",this,this.updateList),this.onAutoGlobalEvt("BAOZANG_HELP_LIST_UPDATE",this,this.updateF5Time),this.onAutoClick(this.btn,this,this.btnHandler),Laya.timer.loop(1e3,this,this.updateF5)},c.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.updateF5)},c.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._searchBoxId=t},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.FactionCtrl.instance.checkIsHaveFaction()?(s.FactionCtrl.instance.getBoxInfo(),s.FactionCtrl.instance.getBoxList(),s.FactionCtrl.instance.getAssistBoxList(),this.updateView(),this.updateList(),this.updateF5Time()):this.close()},c.prototype.updateView=function(){var t=l.instance.boxInfo;if(t){var e=h.instance.getCfgById(36014)[1][0]-t[0];this.remainTimeTxt.text=""+e,this.remainTimeTxt.color=0<e?"#168a17":"#ff3e3e",this._freeCount=t[1],this.freeTimeTxt.text=""+this._freeCount,this._freeTime=t[4],Laya.timer.loop(1e3,this,this.updateFree),this.updateFree();var i=h.instance.getCfgById(36011)[1][0],n=t[2];if(n<i)this.f5TimeTxt.text="免费刷新次数:"+(i-n),this.f5TimeTxt.visible=!0,this.propBox.visible=!1;else{this.f5TimeTxt.visible=!1,this.propBox.visible=!0;var s=h.instance.getCfgById(36012)[1][0],o=h.instance.getCfgById(36012)[1][1],a=r.getPropCountById(s);this.propImg.skin=r.getIconById(s,!0),this.propTxt.text=r.bigNumToString(o),this.propTxt.color=o<=a?"#2d1a1a":"#ff3e3e"}}},c.prototype.updateF5Time=function(){var t=l.instance.boxListF5Time;null!=t&&(this._time=t,this.updateF5())},c.prototype.updateList=function(){var t=l.instance.boxList;if(t&&l.instance.boxInfo){for(var e,i=[],n=0;n<t.length;n++)i.push([t[n],0]),t[n][0]==this._searchBoxId&&(e=n);this._list.datas=i,null!=e&&this._list.scrollToIndex(e)}},c.prototype.btnHandler=function(){var t=!1,e=this._list.datas;if(e)for(var i=0,n=e.length;i<n;i++)if(3<=e[i][0][2]){t=!0;break}l.instance.isTipF5Alert&&t?o.instance.open(331):s.FactionCtrl.instance.f5Box()},c.prototype.updateF5=function(){this.timeTxt.text="自动刷新倒计时: "+r.timeStampToHHMMSS(this._time)},c.prototype.updateFree=function(){var t=GlobalData.serverTime>=this._freeTime||0<this._freeCount;this.freeTimeBox.visible=t,this.freeCDTxt.visible=!t,t?Laya.timer.clear(this,this.updateFree):(this.freeCDTxt.innerHTML="免费挖掘:<span style='color:#ff3e3e'>"+r.timeStampToHHMMSS(this._freeTime)+"后恢复1次</span>",r.centerChainArr(720,[this.freeCDTxt]))},c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},a=c,s.BaozangListPanel=a}(modules=modules||{}),function(t){var o,e,i,n,s;function a(){return e.call(this)||this}o=t.faction||(t.faction={}),i=ui.BaozangMineViewUI,n=t.common.CustomList,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.scrollDir=1,this._list.x=40,this._list.y=185,this._list.width=636,this._list.height=940,this._list.hCount=1,this._list.itemRender=o.BaozangItem,this._list.spaceY=5,this.addChild(this._list)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAOZANG_LIST_UPDATE",this,this.updateList)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),o.FactionCtrl.instance.checkIsHaveFaction()?this.updateList():this.close()},a.prototype.updateList=function(){var t=o.FactionModel.instance.mineBoxList;if(t){this.noBox.visible=!(0<t.length);for(var e=[],i=0,n=t=t.concat().sort(o.FactionModel.instance.sortByState.bind(this));i<n.length;i++){var s=n[i];e.push([s,1])}this._list.datas=e}},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),e.prototype.destroy.call(this,t)},s=a,o.BaozangMinePanel=s}(modules=modules||{}),function(t){var u,e,i,n,s,o;function a(){return e.call(this)||this}u=t.faction||(t.faction={}),i=ui.BaozangHelpListViewUI,n=t.common.CustomList,s=t.config.BlendCfg,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.scrollDir=1,this._list.x=40,this._list.y=185,this._list.width=636,this._list.height=940,this._list.hCount=1,this._list.itemRender=u.BaozangItem,this._list.spaceY=5,this.addChild(this._list),CommonUtil.setHTMLPro(this.divTip,"#3a5385","SimHei",20,"center");var t=u.FactionModel.instance.ableHelpNum;this.divTip.innerHTML="同时最多帮助盟友开启<span style='color:#168a17'>"+t+"</span>个宝藏"},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAOZANG_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("BAOZANG_HELP_LIST_UPDATE",this,this.updateList),this.onAutoGlobalEvt("BAOZANG_LIST_UPDATE",this,this.updateList)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),u.FactionCtrl.instance.checkIsHaveFaction()?(u.FactionCtrl.instance.getBoxInfo(),u.FactionCtrl.instance.getBoxList(),u.FactionCtrl.instance.getAssistBoxList(),this.updateView(),this.updateList()):this.close()},a.prototype.updateView=function(){var t=u.FactionModel.instance.boxInfo;if(t){var e=s.instance.getCfgById(36020)[1][0];this.countTxt.text=(e-t[3]).toString()}},a.prototype.updateList=function(){var t=u.FactionModel.instance.boxHelpList;if(t){t=t.concat().sort(u.FactionModel.instance.sortByState.bind(this));for(var e=u.FactionModel.instance.ableHelpNum,i=u.FactionModel.instance.holpBoxes,n=PlayerModel.instance.actorId,s=!i||i.length<e?2:3,o=[],a=0,r=i;a<r.length;a++){var l=r[a];o.push([l,2])}for(var h=0,c=t;h<c.length;h++){var p=c[h];p[1]!=n&&o.push([p,s])}this.noBox.visible=!(0<o.length),this._list.datas=o}},a.prototype.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null)},o=a,u.BaozangHelpListPanel=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this.indexs=[];for(var t=0,e=GlobalData.getConfig("scene_copy_faction");t<e.length;t++){var i=e[t];this.indexs.push(i[0]),this._tab[i[0]]=i}},n.prototype.getCfgByIndex=function(t){return this._tab[t]},i=n,e.SceneCopyFactionCfg=i}(modules=modules||{}),function(p){var u,e,a,i,d,m,t,n,r,f,s,o,l;function h(){return null!==e&&e.apply(this,arguments)||this}u=p.faction||(p.faction={}),a=p.common.CommonUtil,i=p.bag.BagUtil,d=p.config.BlendCfg,m=p.config.MonsterResCfg,t=p.common.ProgressBarCtrl,n=ui.FactionCopyViewUI,r=p.bag.BaseItem,f=p.config.SceneCopyFactionCfg,s=p.common.AvatarClip,o=p.dungeon.DungeonCtrl,e=n,__extends(h,e),h.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._items=[],this._time=0,this._bar=new t(this.barImg,this.barImg.width,this.barTxt),a.setHTMLPro(this.tipTxt,"#3d5981","SimHei",26),this.tipTxt.mouseEnabled=!1,this.tipTxt.style.wordWrap=!1,this._modelClip=s.create(1024,1024,1024),this.addChildAt(this._modelClip,5),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.x=360,this._modelClip.y=497},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler),this.onAutoClick(this.scheduleBtn,this,this.scheduleBtnHandler),this.onAutoGlobalEvt("FACTION_INFO",this,this.updateView),this.onAutoGlobalEvt("FACTION_COPY_INFO",this,this.updateInfo)},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),u.FactionCtrl.instance.checkIsHaveFaction()?(u.FactionCtrl.instance.makeFactionPanel(!0),u.FactionCtrl.instance.getFactionCopyInfo(),u.FactionCtrl.instance.getFactionCopyData(),u.FactionCtrl.instance.getFactionCopyPanelInfo(),this.updateView()):this.close()},h.prototype.updateView=function(){if(u.FactionModel.instance.copyPanelInfo){var t=u.FactionModel.instance.bossIndex,e=f.instance.getCfgByIndex(t);if(e){for(var i=e[2],n=0,s=i.length;n<s;n++){if(!this._items[n]){var o=new r;this.addChild(o),this._items.push(o),o.y=840}this._items[n].dataSource=[i[n][0],i[n][1],0,null]}a.centerChainArr(720,this._items,35),this.updateInfo(),this.updateData()}}},h.prototype.updateInfo=function(){u.FactionModel.instance.copyInfo&&(this._time=u.FactionModel.instance.copyInfo[0],this.timeTxt.text="剩余诛仙时长 "+a.msToMMSS(this._time),this.timeTxt.color=999<this._time?"#168a17":"#ff3e3e")},h.prototype.updateData=function(){var t=u.FactionModel.instance.bossIndex,e=f.instance.getCfgByIndex(t)[1],i=(p.config.MonsterCfg.instance.getMonsterById(e),u.FactionModel.instance.copyPanelInfo[3]),n=(this._bar.maxValue=i)-u.FactionModel.instance.bossHp;this._bar.value=n;var s=m.instance.getMonsterName(e);this.nameTxt.text=s;var o=m.instance.getMonsterRes(e);this._modelClip.reset(o);var a=p.config.ExteriorCfg.instance.getCfgById(o);this._modelClip.avatarScale=a[10]?a[10]:1,this._modelClip.avatarRotationX=a[6]?a[6]:0,this._modelClip.avatarRotationY=a[7]?a[7]:180,this._modelClip.avatarY=a[9]?a[9]:0,this._modelClip.avatarX=a[8]?a[8]:0,this.observationItem.data=[[this._modelClip,0]];var r=u.FactionModel.instance.copyManCount;this.goingNumTxt.text="正在进攻:"+r+"人";var l=d.instance.getCfgById(36025)[1][0],h=d.instance.getCfgById(36025)[2][0],c="(正在进攻超过<span style='color:#b15315'>"+l+"人</span>即可激活<span style='color:#b15315'>【"+(h||"山鸡哥")+"】</span>BUFF,<span style='color:#b15315'>攻击暴涨</span>!)";this.tipTxt.innerHTML=c,this.tipTxt.x=(this.width-this.tipTxt.width)/2},h.prototype.btnHandler=function(){o.instance.reqEnterScene(2291)},h.prototype.addBtnHandler=function(){var t=d.instance.getCfgById(36035)[1][0],e=p.bag.BagModel.instance.getItemCountById(t);0<e?WindowManager.instance.open(15,[[t,e,0,null],!0]):i.openLackPropAlert(t,1)},h.prototype.aboutBtnHandler=function(){a.alertHelp(20053)},h.prototype.scheduleBtnHandler=function(){WindowManager.instance.open(475)},h.prototype.close=function(){a.whetherInCopy()||u.FactionCtrl.instance.makeFactionPanel(!1),e.prototype.close.call(this)},h.prototype.destroy=function(t){void 0===t&&(t=!0),this._items=this.destroyElement(this._items),this._bar=this.destroyElement(this._bar),this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},l=h,u.FactionCopyPanel=l}(modules=modules||{}),function(t){var c,e,i,n,p,s;function o(){return null!==e&&e.apply(this,arguments)||this}c=t.faction||(t.faction={}),i=ui.FactionTaskViewUI,n=t.common.CustomList,p=t.config.FactionBossAwardCfg,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.scrollDir=1,this._list.x=46,this._list.y=105,this._list.width=625,this._list.height=915,this._list.hCount=1,this._list.itemRender=c.FactionTaskItem,this._list.spaceY=5,this.addChild(this._list),this.addChild(this.closeBtn)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_HURT_INFO",this,this.updateView)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),c.FactionCtrl.instance.getHurtAwardList(),this.updateView()},o.prototype.updateView=function(){var t=c.FactionModel.instance.hurtAwardList;if(t){var e=c.FactionModel.instance.hurt,i=c.FactionModel.instance.hurtLv,n=p.instance.getCfgBylv(i);if(n){for(var s=n[1],o=s.length,a=[],r=0;r<o;r++){var l=void 0;-1==t.indexOf(r)&&e>=s[r]?l=2:-1==t.indexOf(r)&&e<s[r]?l=1:-1!=t.indexOf(r)&&(l=0),a.push([r,l])}a=a.sort(this.sortFunc.bind(this)),this._list.datas=a;var h=CommonUtil.bigNumToString(e);this.txt.text="今日累计诛仙伤害:"+h}}},o.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1];return o<s?-1:s<o?1:i<n?-1:1},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},s=o,c.FactionTaskPanel=s}(modules=modules||{}),function(t){var r,s,e,o,a,l,h,i,n,c;function p(){return null!==s&&s.apply(this,arguments)||this}r=t.faction||(t.faction={}),e=ui.BaozangSpeedAlertUI,o=t.bag.BaseItem,a=t.config.ItemMaterialCfg,l=t.common.BtnGroup,h=t.bag.BagModel,i=t.bag.BagUtil,n=t.notice.SystemNoticeManager,s=e,__extends(p,s),p.prototype.initialize=function(){var t;s.prototype.initialize.call(this),this._items=[];for(var e=0,i=a.instance.speedItemIds.length;e<i;e++){var n=new o;this.addChild(n),this._items.push(n),n.needTip=!1,n.nameVisible=!0,n.y=180}CommonUtil.autoFitBySumWidth(661,100,this._items),this._btnGroup=new l,(t=this._btnGroup).setBtns.apply(t,this._items),this._time=0},p.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoEvt(this._btnGroup,"change",this,this.itemHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateCounts),this.onAutoGlobalEvt("BAOZANG_LIST_UPDATE",this,this.updateInfo),Laya.timer.loop(1e3,this,this.loopHandler)},p.prototype.offEvt=function(){s.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},p.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t),this._boxId=t},p.prototype.onOpened=function(){s.prototype.onOpened.call(this),this._btnGroup.selectedIndex=this.searchOne(),this.updateCounts(),this.updateInfo()},p.prototype.loopHandler=function(){if(this._time<=GlobalData.serverTime)return n.instance.addNotice("宝藏已开启完毕,可领取奖励",!0),void this.close();this.txt.text=CommonUtil.timeStampToHHMMSS(this._time)},p.prototype.updateCounts=function(){for(var t=0,e=this._items.length;t<e;t++){var i=a.instance.speedItemIds[t],n=h.instance.getItemCountById(i);this._items[t].dataSource=[i,n,0,null],this._items[t]._numTxt.visible=!0,this._items[t]._numTxt.color=0<n?"#ffffff":"#ff3e3e"}},p.prototype.updateInfo=function(){for(var t,e=r.FactionModel.instance.mineBoxList,i=0,n=e;i<n.length;i++)if((a=n[i])[0]==this._boxId){t=a;break}if(!t)for(var s=0,o=e=r.FactionModel.instance.holpBoxes;s<o.length;s++){var a;if((a=o[s])[0]==this._boxId){t=a;break}}this._time=t[3],this.loopHandler()},p.prototype.searchOne=function(){for(var t=0,e=this._items.length;t<e;t++){var i=a.instance.speedItemIds[t];if(0<h.instance.getItemCountById(i))return t}return-1},p.prototype.btnHandler=function(){var t=this._btnGroup.selectedIndex;if(-1==t)n.instance.addNotice("请先选择加速卡");else{var e=a.instance.speedItemIds[t];0<CommonUtil.getPropCountById(e)?r.FactionCtrl.instance.addSpeedBox(this._boxId,e):i.openLackPropAlert(e,1)}},p.prototype.itemHandler=function(){var t=this._btnGroup.selectedIndex,e=this._btnGroup.oldSelectedBtn,i=this._btnGroup.selectedBtn;-1==t?(e&&(e.frameImg.visible=!1),i&&(i.frameImg.visible=!1)):(e&&(e.frameImg.visible=!1),i&&(i.frameImg.visible=!0))},p.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnGroup=this.destroyElement(this._btnGroup),s.prototype.destroy.call(this)},c=p,r.BaozangSpeedAlert=c}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.faction||(t.faction={}),n=t.common.CommonUtil,s=t.common.BtnGroup,o=ui.FactionSkillViewUI,a=t.common.CustomList,i=o,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new a,this._list.scrollDir=1,this._list.x=40,this._list.y=103,this._list.width=635,this._list.height=850,this._list.hCount=2,this._list.itemRender=e.FactionSkillItem,this._list.spaceY=5,this.addChildAt(this._list,3),this._btnGroup=new s,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_SKILL_LIST",this,this.updateList),this.onAutoGlobalEvt("PLAYER_CONTRIBUTION",this,this.updateCurrency),this.onAutoEvt(this._btnGroup,"change",this,this.updateView),this._btnGroup.selectedIndex=0,this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler),this.regAutoRP(this.wealRPImg,["factionDialRP"]),this.regAutoRP(this.skillRPImg,["factionSkillRP"])},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.FactionCtrl.instance.getFactionSkillList(),this.updateView()},l.prototype.updateView=function(){1!=this._btnGroup.selectedIndex?this.updateCurrency():WindowManager.instance.open(269)},l.prototype.updateList=function(){var t=e.FactionModel.instance.getShowSkillIds;this._list.datas=t,this._list.scrollPos=this._list.scrollPos},l.prototype.updateCurrency=function(){var t=PlayerModel.instance.contribution;this.iconImg.skin=n.getIconById(93430001,!0),this.countTxt.text="贡献:"+t},l.prototype.aboutBtnHandler=function(){n.alertHelp(20054)},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),i.prototype.destroy.call(this,t)},r=l,e.FactionSkillPanel=r}(modules=modules||{}),function(e){var i,o,t,n,a,s,r;function l(){return null!==o&&o.apply(this,arguments)||this}i=e.faction||(e.faction={}),t=ui.FactionTenAlertUI,n=e.bag.BaseItem,a=e.config.BlendCfg,s=e.common.CustomClip,o=t,__extends(l,o),l.prototype.initialize=function(){o.prototype.initialize.call(this),this._items=[];for(var t=0;t<10;t++){var e=new n;e.pos(45+t%5*115,75+108*Math.floor(t/5)),this.addChild(e),this._items.push(e)}this._clip=CommonUtil.creatEff(this.tenBtn,"btn_light",15),this._clip.pos(-5,-10,!0)},l.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.tenBtn,this,this.tenBtnHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.update)},l.prototype.setOpenParam=function(t){o.prototype.setOpenParam.call(this,t);for(var e=a.instance.getCfgById(36033)[1],i=[],n=0,s=e.length;n<s;n+=3)i.push([e[n],e[n+1],0,null]);for(n=0,s=t.length;n<s;n++)this._items[n].dataSource=i[t[n]];this.update()},l.prototype.update=function(){var t=a.instance.getCfgById(36030)[1][0],e=a.instance.getCfgById(36030)[1][1],i=CommonUtil.getPropCountById(t);10*e<=i?s.thisPlay(this._clip):s.thisStop(this._clip),this.propImg.skin=CommonUtil.getIconById(t,!0),this.propTxt.text=i+"/"+10*e,this.propTxt.color=10*e<=i?"#168a17":"#ff3e3e",this._flag=10*e<=i},l.prototype.tenBtnHandler=function(){if(this._flag)i.FactionCtrl.instance.factionTurn(10),this.close();else{var t=a.instance.getCfgById(36030)[1][0];e.bag.BagUtil.openLackPropAlert(t,1)}},l.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._clip=this.destroyElement(this._clip),o.prototype.destroy.call(this)},r=l,i.FactionTenAlert=r}(modules=modules||{}),function(r){var l,t,e,h,i;function n(){return t.call(this)||this}l=r.faction||(r.faction={}),e=ui.FactionCopyRBViewUI,h=r.config.BlendCfg,t=e,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),this.right=0,this.bottom=540,this.closeByOthers=!1,this.layer=3},n.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_COPY_DATA",this,this.updateView),this.onAutoGlobalEvt("FACTION_INFO",this,this.updateManCount),this.onAutoClick(this.luxianBtn,this,this.luxianBtnHandler),this.onAutoClick(this.allComeOnBtn,this,this.allComeOnBtnHandler),this.onAutoClick(this.comeOnBtn,this,this.comeOnBtnHandler)},n.prototype.onOpened=function(){t.prototype.onOpened.call(this),l.FactionCtrl.instance.makeFactionPanel(!0),this.updateView(),this.updateManCount()},n.prototype.updateManCount=function(){var t=h.instance.getCfgById(36025)[1][0];if(l.FactionModel.instance.copyManCount>=t){var e=100*h.instance.getCfgById(36024)[1][0];this.luxianTxt.text="攻击+"+e+"%",this.luxianTxt.color="#168a17"}else this.luxianTxt.text="未激活",this.luxianTxt.color="#ff3e3e"},n.prototype.updateView=function(){var t=l.FactionModel.instance.copyData;if(t){if(t[0]<=GlobalData.serverTime)this.allComeOnTxt.text="攻击+0%";else{var e=100*h.instance.getCfgById(36028)[1][1];this.allComeOnTxt.text="攻击+"+e+"%"}var i=0,n=t[1],s=t[2];n&&(i+=100*h.instance.getCfgById(36026)[1][1]*n),s&&(i+=100*h.instance.getCfgById(36027)[1][1]*s),this.comeOnTxt.text="攻击+"+i+"%"}},n.prototype.luxianBtnHandler=function(){var t,e,i=h.instance.getCfgById(36025)[1][0],n="正在进攻人数<span style='color:#168a17'>≥"+i+"</span>时,激活戮仙状态,<span style = 'color:#168a17'>全员攻击增加"+100*h.instance.getCfgById(36024)[1][0]+"%</span>!";e=l.FactionModel.instance.copyManCount>=i?(t="当前已激活","#168a17"):(t="当前未激活","#ff3e3e"),CommonUtil.alert("戮仙状态",n,null,null,null,!0,[t,e])},n.prototype.allComeOnBtnHandler=function(){var t=l.FactionModel.instance.copyData;if(t){var e=h.instance.getCfgById(36028)[1],i=e[0],n=100*e[1],s=e[2],o='全员鼓舞需要消耗<img src="assets/icon/item/1_s.png" width="40" height="40"/><span style=\'color:#168a17\'>'+i+"</span>，<span style='color:#168a17'>全员攻击增加"+n+"%</span>,<span style='color:#168a17'>鼓舞持续"+CommonUtil.getTimeTypeAndTime(s)+"</span>!";if(t[0]<=GlobalData.serverTime){var a=void 0;a=i<=r.common.CommonUtil.getPropCountById(90140001)?Handler.create(l.FactionCtrl.instance,l.FactionCtrl.instance.factionAllInspire):Handler.create(this,function(){CommonUtil.goldNotEnoughAlert()}),CommonUtil.alert("鼓舞",o,[a])}else CommonUtil.alert("鼓舞",o,null,null,null,!0,["全员鼓舞生效中,无需重复","#ff3e3e"])}},n.prototype.comeOnBtnHandler=function(){WindowManager.instance.open(301)},n.prototype.close=function(){l.FactionCtrl.instance.makeFactionPanel(!1),t.prototype.close.call(this)},i=n,l.FactionCopyRBPanel=i}(modules=modules||{}),function(i){var n,t,s,e,o,a;function r(){return t.call(this)||this}n=i.faction||(i.faction={}),s=i.common.CommonUtil,e=i.common.GlobalData,o=ui.FactionCopyBottomViewUI,t=o,__extends(r,t),r.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=0,this.bottom=300,this.zOrder=-1,this.layer=3,this._time=0,this.closeByOthers=!1},r.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_HURT_INFO",this,this.updateView),this.onAutoGlobalEvt("FACTION_COPY_INFO",this,this.updateTime),this.onAutoClick(this.btn,this,this.btnHandler),Laya.timer.loop(1e3,this,this.loopHandler)},r.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),t.prototype.offEvt.call(this)},r.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateView(),this.updateTime()},r.prototype.updateView=function(){var t=n.FactionModel.instance.hurt;if(null!=t){var e=s.bigNumToString(t);this.txt.text="本日累计诛仙伤害:"+e}},r.prototype.updateTime=function(){var t=n.FactionModel.instance.copyInfo;t&&(this._time=t[0]+e.serverTime,this.loopHandler())},r.prototype.btnHandler=function(){var t=i.config.BlendCfg.instance.getCfgById(36035)[1][0],e=i.bag.BagModel.instance.getItemCountById(t);0<e?WindowManager.instance.open(15,[[t,e,0,null],!0]):i.bag.BagUtil.openLackPropAlert(t,1)},r.prototype.loopHandler=function(){this._time<=e.serverTime||(this.timeTxt.text=s.msToMMSS(this._time-e.serverTime))},a=r,n.FactionCopyBottomPanel=a}(modules=modules||{}),function(t){var s,i,e,n,o,a,r;function l(){return i.call(this)||this}s=t.faction||(t.faction={}),e=t.dungeon.InspireAlert,n=t.config.BlendCfg,o=t.player.PlayerModel,a=t.common.CommonUtil,i=e,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this._coinParams=n.instance.getCfgById(36026)[1],this._ingotParams=n.instance.getCfgById(36027)[1],this.coinTxt.text=this._coinParams[0]+"/次",this.ingotTxt.text=this._ingotParams[0]+"/次";var t=this._coinParams[2];t+=this._ingotParams[2];var e=Math.floor(100*this._coinParams[1]);this.decTxt.text="每次鼓舞增加角色"+e+"%攻击 (上限"+e*t+"%)"},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_COPY_DATA",this,this.inspireUpdate)},l.prototype.inspireHandler=function(){if(0===this._btnGroup.selectedIndex){if(o.instance.copper<this._coinParams[0])return void a.noticeError(12106)}else{if(1!==this._btnGroup.selectedIndex)return;if(o.instance.ingot<this._ingotParams[0])return void a.noticeError(12107)}s.FactionCtrl.instance.factionReqInspire([this._btnGroup.selectedIndex])},l.prototype.inspireUpdate=function(){var t=s.FactionModel.instance.copyData;if(t){var e=0,i=t[1],n=t[2];i&&(e+=100*this._coinParams[1]*i),n&&(e+=100*this._ingotParams[1]*n),this.curInspireTxt.text="当前鼓舞：攻击+"+e+"%"}},r=l,s.FactionInspireAlert=r}(modules=modules||{}),function(i){var n,t,e,s,o,a;function r(){return t.call(this)||this}n=i.faction||(i.faction={}),e=ui.FactionSetNoticeAlertUI,s=i.config.BlendCfg,o=i.notice.SystemNoticeManager,t=e,__extends(r,t),r.prototype.initialize=function(){t.prototype.initialize.call(this),this._maxChars=s.instance.getCfgById(36040)[1][0],this.inputTxt.maxChars=this._maxChars,this.inputTxt.multiline=!0},r.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.handler),this.onAutoEvt(this.inputTxt,"input",this,this.charNumCheck)},r.prototype.handler=function(){var t=this,e=this.inputTxt.text;e?i.chat.ChatModel.instance.isValidContent(e)?CommonUtil.checkWords(e,function(){n.FactionCtrl.instance.setNotice(e),t.close()}):o.instance.addNotice("包含非法字符",!0):o.instance.addNotice("输入内容不能为空",!0)},r.prototype.charNumCheck=function(){this.inputTxt.text.length>this._maxChars&&o.instance.addNotice("最大输入字数"+this._maxChars+"个",!0)},r.prototype.close=function(){t.prototype.close.call(this),WindowManager.instance.open(272)},a=r,n.FactionSetNoticeAlert=a}(modules=modules||{}),function(i){var n,e,t,s,o,a;function r(){return e.call(this)||this}n=i.faction||(i.faction={}),t=ui.FactionSetTitleAlertUI,s=i.config.BlendCfg,o=i.notice.SystemNoticeManager,e=t,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._maxChars=s.instance.getCfgById(36039)[1][0],this.inputTxt.maxChars=this._maxChars},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.handler),this.onAutoEvt(this.inputTxt,"input",this,this.charNumCheck)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this);var t=n.FactionModel.instance.title;this.currTitleTxt.text="当前宣传语:"+t},r.prototype.handler=function(){var t=this,e=this.inputTxt.text;e?i.chat.ChatModel.instance.isValidContent(e)?CommonUtil.checkWords(e,function(){n.FactionCtrl.instance.setTitle(e),t.close()}):o.instance.addNotice("包含非法字符",!0):o.instance.addNotice("输入内容不能为空",!0)},r.prototype.charNumCheck=function(){this.inputTxt.text.length>this._maxChars&&o.instance.addNotice("最大输入字数"+this._maxChars+"个",!0)},r.prototype.close=function(){e.prototype.close.call(this),WindowManager.instance.open(272)},a=r,n.FactionSetTitleAlert=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.faction||(t.faction={}),n=t.faction.FactionCtrl,s=ui.BaozangF5AlertUI,i=s,__extends(a,i),a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoClick(this.backBtn,this,this.close),this.onAutoClick(this.flagBtn,this,this.flagBtnHandler)},a.prototype.flagBtnHandler=function(){this.flagBtn.selected=!this.flagBtn.selected,e.FactionModel.instance.isTipF5Alert=!this.flagBtn.selected},a.prototype.sureBtnHandler=function(){n.instance.f5Box(),this.close()},o=a,e.BaozangF5Alert=o}(modules=modules||{}),function(s){var o,e,t,a,i,n;function r(){return null!==e&&e.apply(this,arguments)||this}o=s.faction||(s.faction={}),t=ui.FactionCopyPlanAlertUI,a=s.config.SceneCopyFactionCfg,i=s.common.SimpleList,e=t,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(o.FactionCopyPlanItem,535,55,1,1,0,5),this._list.size(535,545),this._list.pos(63,113,!0),this.addChild(this._list)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_INFO",this,this.update)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),o.FactionCtrl.instance.getFactionInfo(),this.update();var t=o.FactionModel.instance.bossIndex;this._list.datas=a.instance.indexs,this._list.scrollToIndex(a.instance.indexs.indexOf(t)-1)},r.prototype.update=function(){var t=o.FactionModel.instance.maxBossCount,e=a.instance.getCfgByIndex(t);if(e){var i=e[1];if(!s.config.MonsterCfg.instance.getMonsterById(i))throw new Error("没有bossid ->"+i);var n=s.config.MonsterResCfg.instance.getMonsterName(i);this.txt.text="个人诛仙进度："+n}else this.txt.text="个人诛仙进度：无"},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n=r,o.FactionCopyPlanAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.faction||(t.faction={}),n=t.notice.SystemNoticeManager,i=ui.FactionImpeachAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24),this.contentTxt.style.lineHeight=28,this.contentTxt.mouseEnabled=!1},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.noticeBtn,this,this.noticeHandler),this.onAutoClick(this.okBtn,this,this.okHandler),this.onAutoClick(this.cancelBtn,this,this.close),this.onAutoGlobalEvt("FACTION_INFO",this,this.updateImpeach),this.onAutoGlobalEvt("FACTION_UPDATE_IMPEACH",this,this.updateImpeach)},o.prototype.okHandler=function(){this.isOk=!0,e.FactionCtrl.instance.getFactionInfo()},o.prototype.noticeHandler=function(){this.noticeBtn.selected=!this.noticeBtn.selected},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.isOk=!1,e.FactionModel.instance.getMemberById(PlayerModel.instance.actorId)[14]=!1,e.FactionCtrl.instance.SetImpeachWindow(0)},o.prototype.close=function(){i.prototype.close.call(this),this.noticeBtn.selected&&!this.isOk&&e.FactionCtrl.instance.SetImpeachWindow(1)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t?(this.noticeBtn.visible=!0,this.okBtn.label="发起弹劾",this.cancelBtn.label="放弃弹劾",this.contentTxt.innerHTML="<br>盟主云游失联，是否现在发起弹劾"):(this.noticeBtn.visible=!1,this.okBtn.label="确定",this.cancelBtn.label="取消",this.contentTxt.innerHTML="<br>是否确认对盟主发起弹劾"),this.contentTxt.x=76+(512-this.contentTxt.contextWidth>>1)},o.prototype.updateImpeach=function(){var t=e.FactionModel.instance.checkImpeachState();1===t?this.isOk&&(e.FactionCtrl.instance.ImpeachFactionLeader(),this.close()):2===t||3===t?(this.close(),!this.isOk&&this.noticeBtn.visible||n.instance.addNotice("已经在弹劾中",!0)):(this.close(),!this.isOk&&this.noticeBtn.visible||n.instance.addNotice("失去弹劾权限",!0))},s=o,e.FactionImpeachAlert=s}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.dungeon||(t.dungeon={}),i=ui.DungeonShieldViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.left=20,this.bottom=340,this.layer=3,this.closeByOthers=!1},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.onBtnClick)},s.prototype.onBtnClick=function(){WindowManager.instance.open(1189)},n=s,e.DungeonShieldPanel=n}(modules=modules||{}),function(c){var p,e,t,u,d,m,i,n,f,r,s;function o(){return null!==e&&e.apply(this,arguments)||this}p=c.chat||(c.chat={}),t=ui.OtherPlayerInfoBaseAlertUI,u=c.config.XianweiRiseCfg,d=c.config.BornCfg,m=c.config.ExerciseCfg,i=c.common.BtnGroup,n=Laya.Event,f=c.bag.BagItem,r=c.common.CustomClip,e=t,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._equipItems=new Array,this._btnGroup=new i,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1,this.btnGroup_2,this.btnGroup_3),this._nameStrs=["神兵","仙翼","仙器","灵宠","时装","天珠"]},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.value=t||[1,1,!1]},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("OTHER_PLAYER_INFO",this,this.updateView),this.onAutoEvt(this._btnGroup,n.CHANGE,this,this.btnGroupHanlder)},o.prototype.btnGroupHanlder=function(){0!==this._btnGroup.selectedIndex&&p.ChatUtil.openTypePanel(this._btnGroup.selectedIndex,this.value)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this.updateView(),p.ChatUtil.closeOtherPanl(0)},o.prototype.gotoAlert=function(t){WindowManager.instance.openDialog(16,[t,1,0,null])},o.prototype.updateView=function(){var t=p.ChatModel.instance.otherPlayerInfo;if(t){var e=t[7],i=t[8],n=t[10];this.atkMsz.value=t[9].toString(),this.nameTxt.text=t[2],this.headIcon.setInfo(t[29],t[3],t[30]),this.lvTxt.text="等级:"+t[4],this.bornTxt.text="转生:"+d.instance.getCfgByLv(t[5])[1],this.flyTxt.text="飞升:"+c.fly_up.FlyUpModel.instance.getFlyStr(t[38]),this.vipShowItem.setSVIPandVIP(this.value[1],this.value[0],t[41]);var s=p.ChatModel.instance.chatPlayerCrossInfo,o=p.ChatModel.instance.chatPlayerCenterInfo;s&&o&&(this.halfName.text="仙侣:"+(s[4]?s[4]:"无"),this.teamName.text="战队:"+(s[0]?s[0]:"未加入战队"),this.teamjob.text=s[0]?1===s[1]?"职位:队长":"职位:队员":"",this.factionJob.text="仙盟:"+(o[0]?o[0]:"未加入仙盟"),this.factionName.text=o[0]?"职位:"+["普通成员","盟主","副盟主","护法"][o[1]]:"",this.qunxianTxt.text="群仙竞技:"+(o[2]?"第"+o[2]+"名":"--"),this.tiantiTxt.text="天梯斗法:"+this.getStageName(t[39],"--"),this.dianfengTxt.text="巔峰斗法:"+(s[3]?"天组第"+s[3]+"名":"--"),this.xianluTxt.text="仙侣竞技:"+this.getStageName(s[5]),this.fenyunTxt.text="风云擂台:"+(o[3]?"第"+o[3]+"名":"--"),this.leitaiTxt.text="擂台轮次:"+(o[3]?"1V"+o[4]:"--")),0==e?this.xianweiTxt.visible=!1:(this.xianweiTxt.visible=!0,this.xianweiTxt.text="仙位:"+u.instance.getXianweiRiseByLevel(e)[1]),i?(this.daohangTxt.text="道行:"+m.instance.getZLLCfgByLev(i)[6],this.daohangTxt.visible=!0):this.daohangTxt.visible=!1;for(var a=0,r=n.length;a<r;a++){if(!this._equipItems[a]){var l=new f;l.nameVisible=!1,l.needTip=!0,this.addChild(l),this._equipItems.push(l),l.pos(58+108*Math.floor(a%5),811+108*Math.floor(a/5))}this._equipItems[a].visible=!0,t[0]===PlayerModel.instance.actorId?this._equipItems[a].type=0:this._equipItems[a].type=2,this._equipItems[a].dataSource=n[a]}var h=n.length;for(a=0,r=this._equipItems.length;a<r;a++)h<=a&&(this._equipItems[a].visible=!1);this.initItemView()}},o.prototype.getStageName=function(t,e){void 0===e&&(e="--");var i=c.config.TiantiCfg.instance.getCfgById(t);return i&&i[1]||e},o.prototype.initItemView=function(){var t=[[12960001,1,9999,null],[13250004,1,9999,null],[13250002,1,9999,null],[13250003,1,9999,null]],e=["永恒义戒","无限手套","招财仙猫","战力护符"];this.itemTab=[this.item1,this.item2,this.item3,this.item4],this.itemTextTab=[this.item1Text,this.item2Text,this.item3Text,this.item4Text];for(var i=0;i<4;i++)this.itemTextTab[i].text=e[i],this.itemTab[i].dataSource=t[i],this.itemTab[i].gray=!1,this.itemTextTab[i].color="#344c6f",r.thisPlay(this.item1.clip);var n=p.ChatModel.instance.otherPlayerInfo,s=c.bag.BagUtil.getRingNameAndId(n);s&&(this.item1.dataSource=[s[0],1,9999,null],this.item1Text.text=s[1]);var o=n[34];(!o||o.length<=0||!o[0]||o[0].length<=0)&&(this.item1.gray=!0,this.item1Text.color="#999999",r.thisStop(this.item1.clip));var a=n[33];a&&!(a.length<=0)&&a[0]||(this.item2.gray=!0,this.item2Text.color="#999999",r.thisStop(this.item2.clip)),null!=n[32]&&-1!=n[32]||(this.item3.gray=!0,this.item3Text.color="#999999",r.thisStop(this.item3.clip)),null!=n[31]&&-1!=n[31]||(this.item4.gray=!0,this.item4Text.color="#999999",r.thisStop(this.item4.clip))},o.prototype.destroy=function(){this._equipItems=this.destroyElement(this._equipItems),this._btnGroup=this.destroyElement(this._btnGroup),this.itemTab=this.destroyElement(this.itemTab),this._yuanshenImgs=this.destroyElement(this._yuanshenImgs),this._yuanshenItems=this.destroyElement(this._yuanshenItems),this._nameStrs&&(this._nameStrs.length=0,this._nameStrs=null),e.prototype.destroy.call(this)},s=o,p.OtherPlayerInfoBaseAlert=s}(modules=modules||{}),function(n){var d,e,t,i,s,o,a,r;function l(){var t=null!==e&&e.apply(this,arguments)||this;return t.showPage=0,t}d=n.chat||(n.chat={}),t=ui.OtherPlayerInfoModelAlertUI,i=n.common.BtnGroup,s=Laya.Event,o=n.common.CustomList,a=n.common.AvatarClip,e=t,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.showModel=[this.rewardShowItem1,this.rewardShowItem2,this.rewardShowItem3,this.rewardShowItem4],this.showModel1=[this.observationItem1,this.observationItem2,this.observationItem3,this.observationItem4],this.items=[this.card1,this.card2,this.card3,this.card4],this._btnGroup=new i,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1,this.btnGroup_2,this.btnGroup_3),this._btns=new i,this._btns.setBtns(this.btn1,this.btn2,this.btn3,this.btn4,this.btn5,this.btn6),this._btns.selectedIndex=0,this._nameStrs=["神兵","仙翼","仙器","灵宠","时装","天珠"],this._avatarClip=a.create(1024,1024,768),this.fashionBox.addChild(this._avatarClip),this._avatarClip.pos(340,620,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180,this._list=new o,this._list.hCount=1,this._list.x=56,this._list.y=710,this._list.width=550,this._list.height=203,this._list.spaceY=10,this._list.itemRender=d.PlayerInfoTxtItem,this.fashionBox.addChild(this._list)},l.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.value=t||[1,1,!1]},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("OTHER_PLAYER_INFO",this,this.updateView),this.onAutoEvt(this._btnGroup,s.CHANGE,this,this.btnGroupHanlder),this.onAutoEvt(this._btns,s.CHANGE,this,this.updateView),this.onAutoEvt(this.lastPage,s.CLICK,this,this.updataPage,["-"]),this.onAutoEvt(this.nextPage,s.CLICK,this,this.updataPage,["+"])},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=1,this._btns.selectedIndex=0,this.updateView(),d.ChatUtil.closeOtherPanl(1)},l.prototype.btnGroupHanlder=function(){1!==this._btnGroup.selectedIndex&&d.ChatUtil.openTypePanel(this._btnGroup.selectedIndex,this.value)},l.prototype.gotoAlert=function(t){WindowManager.instance.openDialog(16,[t,1,0,null])},l.prototype.updataPage=function(t){var e=d.ChatModel.instance.otherPlayerInfo;if(e){this.fashionBox.visible=!1,this.listBoxBase.visible=this.listBox.visible=!0;var i=this.getList(e[37]),n=i.length;if(this.noShowBox.visible=0===n,this.listBox.visible=0!=n,this.noShowTxt.text="暂无典藏"+["","天珠","神兵","时装","仙器","灵宠"][this._btns.selectedIndex],0!==n){var s=Math.ceil(i.length/4);if("-"===t){if(--this.showPage<0)return void(this.showPage=0)}else if("+"===t){if(++this.showPage>=s)return void(this.showPage=s-1)}else this.showPage=0;this.lastPage.visible=0!=this.showPage,this.nextPage.visible=this.showPage!=s-1;for(var o=4*this.showPage,a=o+4>=i.length?i.length:o+4,r=[];o<a;o++)r.push(i[o]);for(var l=r.length,h=0;h<4;h++)if(h<l){this.items[h].setData(r[h]);var c=Math.round(r[h][0]/1e3);this.showModel[h].modelRest(r[h][0],0),this.showModel[h].showRewardObj(r[h][0],0,5===c?1:0,e[3]),this.items[h].visible=this.showModel[h].visible=this.showModel1[h].visible=!0,this.showModel[h].y=2===c?this.items[h].y+260:this.items[h].y+233,this.showModel1[h].data=[[this.showModel[h]._modelClip,c]]}else this.items[h].visible=this.showModel[h].visible=this.showModel1[h].visible=!1;h=0;for(var p=r.length;h<p;h++){var u=this.showModel[h];u.scaleX=this.items[h].model.scaleX*this.items[h].scaleX,u.scaleY=this.items[h].model.scaleY*this.items[h].scaleY}}}},l.prototype.updateView=function(){var t=d.ChatModel.instance.otherPlayerInfo;if(t){this.sectImg.x=this._btns.selectedBtn.x-10,this.fashionBox.visible=!0,this.listBoxBase.visible=this.listBox.visible=!1;var e=t[21],i=[];i.push([this._nameStrs[0],t[11],t[12]]),i.push([this._nameStrs[1],t[13],t[14]]),i.push([this._nameStrs[2],t[15],t[16]]),i.push([this._nameStrs[3],t[17],t[18]]),i.push([this._nameStrs[4],t[24],t[25]]),i.push([this._nameStrs[5],t[26],t[27]]),this._list.datas=i,0==e&&(e=5001),this._avatarClip.reset(t[19],e,t[22],t[23]),this.observationItem.data=[[this._avatarClip,0]],0===this._btns.selectedIndex?this.noShowBox.visible=!1:(this.showPage=0,this.updataPage())}},l.prototype.getList=function(t){if(!t)return[];var e=this._btns.selectedIndex,i=[];if(1<=e)for(var n=[null,11,5,90,4,2][e],s=0,o=t.length;s<o;s++)Math.floor(t[s][0]/1e3)===n&&i.push(t[s]);return i},l.prototype.getStageName=function(t,e){void 0===e&&(e="--");var i=n.config.TiantiCfg.instance.getCfgById(t);return i&&i[1]||e},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),this._avatarClip=this.destroyElement(this._avatarClip),this.itemTab=this.destroyElement(this.itemTab),this.showModel=this.destroyElement(this.showModel),this.items=this.destroyElement(this.items),this.observationItem=this.destroyElement(this.observationItem),this.observationItem1=this.destroyElement(this.observationItem1),this.observationItem2=this.destroyElement(this.observationItem2),this.observationItem3=this.destroyElement(this.observationItem3),this.observationItem3=this.destroyElement(this.observationItem4),this._nameStrs&&(this._nameStrs.length=0,this._nameStrs=null),e.prototype.destroy.call(this)},r=l,d.OtherPlayerInfoModelAlert=r}(modules=modules||{}),function(t){var c,e,i,n,s,p,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}c=t.chat||(t.chat={}),i=ui.OtherPlayerInfoYuanShenAlertUI,n=t.common.BtnGroup,s=Laya.Event,p=t.bag.BagItem,o=t.common.CustomSlide,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnGroup=new n,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1,this.btnGroup_2,this.btnGroup_3),this._yuanshenItems=[],this._yuanshenImgs=[this.item_1,this.item_2,this.item_3,this.item_4,this.item_5,this.item_6,this.item_7,this.item_8,this.item_9,this.item_10,this.item_11,this.item_12,this.item_13,this.item_14,this.item_15,this.item_16,this.item_17,this.item_18,this.item_19,this.item_20,this.item_21,this.item_22,this.item_23,this.item_24,this.item_25,this.item_26,this.item_27,this.item_28,this.item_29,this.item_30,this.item_31,this.item_32,this.item_33,this.item_34,this.item_35,this.item_36,this.item_37,this.item_38,this.item_39,this.item_40],this._yuanshenStateTxts=[this.noTxt_1,this.noTxt_2,this.noTxt_3,this.noTxt_4,this.noTxt_5],this._slide=new o(this.con,this.box)},r.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.value=t||[1,1,!1]},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("OTHER_PLAYER_INFO",this,this.updateView),this.onAutoEvt(this._btnGroup,s.CHANGE,this,this.btnGroupHanlder),this._slide.initState()},r.prototype.btnGroupHanlder=function(){2!==this._btnGroup.selectedIndex&&c.ChatUtil.openTypePanel(this._btnGroup.selectedIndex,this.value)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=2,this.updateView(),c.ChatUtil.closeOtherPanl(2)},r.prototype.updateView=function(){var t=c.ChatModel.instance.otherPlayerInfo;if(t)for(var e=t[35],i=0;i<5;i++){var n=e[i]&&e[i][0],s=8*i;if(this._yuanshenStateTxts[i].visible=!n,n)for(var o=e[i][1],a=1;a<9;a++){var r=this.searchMatchedEquip(a,o);if(s=s+a-1,r){if(!this._yuanshenItems[s]){var l=new p;l.nameVisible=!1,this.box.addChild(l),l.pos(this._yuanshenImgs[s].x,this._yuanshenImgs[s].y,!0),this._yuanshenItems[s]=l}this._yuanshenItems[s].type=t[0]===PlayerModel.instance.actorId?0:2,this._yuanshenItems[s].visible=!0,this._yuanshenItems[s].dataSource=r}else this._yuanshenItems[s]&&(this._yuanshenItems[s].visible=!1),this._yuanshenImgs[s].visible=!0;s=8*i}else for(var h=(a=s)+8;a<h;a++)this._yuanshenItems[a]&&(this._yuanshenItems[a].visible=!1),this._yuanshenImgs[a].visible=!1}},r.prototype.searchMatchedEquip=function(t,e){for(var i=0,n=e;i<n.length;i++){var s=n[i];if(CommonUtil.getPartById(s[0])===t)return s}return null},r.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),this._yuanshenImgs=this.destroyElement(this._yuanshenImgs),this._yuanshenItems=this.destroyElement(this._yuanshenItems),this._yuanshenStateTxts=this.destroyElement(this._yuanshenItems),this._slide=this.destroyElement(this._slide),this.items=this.destroyElement(this.items),e.prototype.destroy.call(this)},a=r,c.OtherPlayerInfoYuanShenAlert=a}(modules=modules||{}),function(r){var a,e,t,i,n,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.showPage=0,t}a=r.chat||(r.chat={}),t=ui.OtherPlayerInfoFantianAlertUI,i=r.common.BtnGroup,n=Laya.Event,e=t,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnGroup=new i,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1,this.btnGroup_2,this.btnGroup_3),this.fanTianequipItems=[this.part_1,this.part_2,this.part_3,this.part_4,this.part_5,this.part_6,this.part_7,this.part_8,this.part_9,this.part_10,this.part_11,this.part_12]},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.value=t||[1,1,!1]},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("OTHER_PLAYER_INFO",this,this.updateView),this.onAutoEvt(this._btnGroup,n.CHANGE,this,this.btnGroupHanlder),this.onAutoEvt(this.fanTianSkillBtn,n.CLICK,this,this.fanTianSkillHanlder),this.onAutoEvt(this.neidan1,n.CLICK,this,this.gotoAlert,[17050003]),this.onAutoEvt(this.neidan2,n.CLICK,this,this.gotoAlert,[17040004])},o.prototype.btnGroupHanlder=function(){3!==this._btnGroup.selectedIndex&&a.ChatUtil.openTypePanel(this._btnGroup.selectedIndex,this.value)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=3,this.updateView(),a.ChatUtil.closeOtherPanl(3)},o.prototype.gotoAlert=function(t){WindowManager.instance.openDialog(16,[t,1,0,null])},o.prototype.updateView=function(){var t=a.ChatModel.instance.otherPlayerInfo;if(t){var e=t[40],i=r.brahma_equip.BrahmaEquipUtlis.showAttrs;this.fanTianAttr=[[i[0],e[6]],[i[1],e[7]],[i[2],e[8]],[i[3],e[9]],[i[4],e[10]]];for(var n=0,s=this.fanTianequipItems.length;n<s;n++){var o=r.brahma_equip.BrahmaEquipUtlis.getPartByStrong(e[1][n][0],e[1]);this.fanTianequipItems[n].setData([e[1][n],o,2])}this.neidanTxt1.text=(e[2]||0).toString(),this.neidanTxt2.text=(e[3]||0).toString()}},o.prototype.fanTianSkillHanlder=function(){if(this.fanTianAttr){for(var t="",e=0,i=r.brahma_equip.BrahmaEquipUtlis.showAttrs.length;e<i;e++){for(var n=0,s=this.fanTianAttr,o=0,a=s.length;o<a;o++)if(r.brahma_equip.BrahmaEquipUtlis.showAttrs[e]===s[o][0]){n=s[o][1];break}t+="<span style='color:"+CommonUtil.getBrahmaColor(r.brahma_equip.BrahmaEquipUtlis.showAttrs[e])+"'>"+r.config.AttrItemCfg.instance.getCfgById(r.brahma_equip.BrahmaEquipUtlis.showAttrs[e])[1]+":"+n+"</span><br/>"}WindowManager.instance.open(1596,t)}},o.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),this.fanTianequipItems=this.destroyElement(this.fanTianequipItems),e.prototype.destroy.call(this)},s=o,a.OtherPlayerInfoFantianAlert=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.nine||(t.nine={}),n=t.scene.SceneModel,s=t.config.SceneCopyNineCfg,i=ui.NineRBView1UI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=678,this.closeByOthers=!1,this.layer=3},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("NINE_SCORE_UPDATE",this,this.updateScore),this.onAutoGlobalEvt("NINE_COPY_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("SCENE_ENTER",this,this.enterScene)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateInfo(),this.enterScene(),this.updateScore()},a.prototype.updateScore=function(){if(e.NineModel.instance.score){var t=n.instance.enterScene[3];this.scoreTxt.text=e.NineModel.instance.score[0]+"/"+s.instance.getCfgByLevel(t)[3]}},a.prototype.updateInfo=function(){var t=e.NineModel.instance.nineCopy;this.lifeTxt.text=t[0]+"/"+t[1]},a.prototype.enterScene=function(){this.lvTxt.text="第"+n.instance.enterScene[3]+"层"},o=a,e.NineRBPanel1=o}(modules=modules||{}),function(t){var i,e,n;function s(){var t=e.call(this)||this;return t.lastIndex=-1,t}i=t.nine||(t.nine={}),e=ui.NineCBViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.centerX=0,this.bottom=460,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.killBtn,this,this.killHandler),this.onAutoClick(this.findBtn,this,this.findHandler),this.onAutoClick(this.autoPlayer,this,this.autoHander,[0]),this.onAutoClick(this.autoMonster,this,this.autoHander,[1]),this.onAutoClick(this.findBtn,this,this.findHandler),this.onAutoGlobalEvt("CANCEL_AUTO",this,this.cancelAuto)},s.prototype.autoHander=function(t){var e=!1;0===t?(e=1!=i.NineModel.instance.autoAtt,i.NineModel.instance.setAutoAtt(this.autoPlayer.selected?0:1)):1===t&&(e=2!=i.NineModel.instance.autoAtt,i.NineModel.instance.setAutoAtt(this.autoMonster.selected?0:2),GlobalData.dispatcher.event("NINE_DEFEAT_CLICK")),this.autoPlayer.selected=1===i.NineModel.instance.autoAtt,this.autoMonster.selected=2===i.NineModel.instance.autoAtt,e&&(i.NineModel.instance.autoAttClick=0),this.lastIndex==t&&!e||i.NineModel.instance.autoCtrl(),this.lastIndex=t},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),i.NineModel.instance.autoAttClick=i.NineModel.instance.autoAtt,this.autoPlayer.selected=1===i.NineModel.instance.autoAtt,this.autoMonster.selected=2===i.NineModel.instance.autoAtt},s.prototype.killHandler=function(){1===i.NineModel.instance.autoAtt&&i.NineModel.instance.setAutoAtt(0),i.NineModel.instance.autoAttClick=2,this.setAut(),PlayerModel.instance.selectTarget(1,-1)},s.prototype.findHandler=function(){2===i.NineModel.instance.autoAtt&&i.NineModel.instance.setAutoAtt(0),i.NineModel.instance.autoAttClick=1,this.setAut(),PlayerModel.instance.selectTarget(2,-1)},s.prototype.setAut=function(){this.autoPlayer.selected=1===i.NineModel.instance.autoAtt,this.autoMonster.selected=2===i.NineModel.instance.autoAtt},s.prototype.cancelAuto=function(t){1===t&&2===i.NineModel.instance.autoAtt?i.NineModel.instance.setAutoAtt(0):2===t&&1===i.NineModel.instance.autoAtt&&i.NineModel.instance.setAutoAtt(0),1===t&&2===i.NineModel.instance.autoAttClick?i.NineModel.instance.autoAttClick=0:2===t&&1===i.NineModel.instance.autoAttClick&&(i.NineModel.instance.autoAttClick=0),this.setAut()},n=s,i.NineCBPanel=n}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c,p,u,d,m,f,g,y,_,v,I,b,C,T,w,x,B,P,S,A,M,E,R,D,L,k,U,H,O,F,G,V,N,W,z,q,j,X,Y,Z,J,Q,K,$,tt,et,it,nt,st,ot,at,rt,lt,ht,ct,pt,ut,dt,mt,ft,gt,yt,_t,vt,It,bt,Ct,Tt,wt,xt,Bt,Pt,St,At,Mt,Et,Rt,Dt,Lt,kt,Ut,Ht,Ot,Ft,Gt,Vt,Nt,Wt,zt,qt,jt,Xt,Yt,Zt,Jt,Qt,Kt,$t,te,ee,ie,ne,se,oe,ae,re,le,he,ce,pe,ue,de,me,fe,ge,ye,_e,ve,Ie,be,Ce,Te,we,xe,Be,Pe,Se,Ae,Me,Ee,Re,De,Le,ke,Ue,He,Oe,Fe,Ge,Ve,Ne,We,ze,qe,je,Xe,Ye,Ze,Je,Qe,Ke,$e,ti,ei,ii,ni,si,oi,ai,ri,li,hi,ci,pi,di,mi,fi,gi,yi,_i,vi,Ii,bi,Ci,Ti,wi,xi,Bi,Pi,Si,Ai,Mi,Ei,Ri,Di,Li,ki,Ui,Hi,Oi,Fi,Gi,Vi,Ni,Wi,zi,qi,ji,Xi,Yi,Zi,Ji,Qi,Ki,$i,tn,en,nn,sn,on,an,rn,ln,hn,cn,pn,un,dn,mn,fn,gn,yn,_n,vn,In,bn,Cn,Tn,wn,xn,Bn,Pn,Sn,An,Mn,En,Rn,Dn,Ln,kn,Un,Hn,On,Fn,Gn,Vn,Nn,Wn,zn,qn,jn,Xn,Yn,Zn,Jn,Qn,Kn,$n,ts,es,is,ns,ss,os,as,rs,ls,hs,cs,ps,us,ds,ms,fs,gs,ys,_s,vs,Is,bs,Cs,Ts,ws,xs,Bs,Ps,Ss,As,Ms,Es,Rs,Ds,Ls,ks,Us,Hs,Os,Fs,Gs,Vs,Ns,Ws,zs,qs,js,Xs,Ys,Zs,Js,Qs;function Ks(){this._windowInfos=[[244,1,i,null,null,0,0,0],[245,1,n,null,null,0,0,6e4],[1265,1,Ln,null,null,0,0,6e4],[7,1,It,null,["res/atlas/player.atlas","player/bg_5.jpg"],1,108,6e4],[8,1,L,null,["res/atlas/create_role.atlas","create_role/image_cj_cjbg.jpg"],0,0,2e3],[9,1,d,null,["res/atlas/bag.atlas"],1,48,0],[1,1,_t,null,["res/atlas/top.atlas",kn.getRes(0)],0,0,0],[2,1,ut,null,kn.getRes(1),0,0,0],[3,1,ft,null,["res/atlas/left_top.atlas","qq/img_nf_blue_icon.png","qq/clip_blue_vip_icon1.png","qq/clip_blue_vip_icon2.png","qq/clip_blue_vip_icon3.png"],0,0,0],[4,1,mt,null,["res/atlas/left_bottom.atlas","right_top/msz_tongyong_4.png"],0,0,0],[5,1,yt,null,["res/atlas/right_top.atlas","right_top/msz_tongyong_4.png"],0,0,0],[6,1,gt,null,"res/atlas/right_bottom.atlas",0,0,0],[20,1,et,null,["res/atlas/email.atlas","email/image_yj_zwyj.jpg"],1,1007,6e4],[46,1,wt,null,["res/atlas/talisman.atlas","talisman/bj_fabao_1.jpg"],1,15,6e4],[10,1,Yt,null,["res/atlas/magic_pet.atlas","magic_pet/bj_linbgchong.png"],1,2,6e4],[124,1,Zt,null,["res/atlas/magic_pet.atlas","magic_pet/bj_linbgchong.png"],1,44,6e4],[125,1,Jt,null,["res/atlas/magic_pet.atlas","magic_pet/bj_linbgchong.png","magic_pet/bj_lingchong_02.jpg"],1,4,6e4],[169,1,Qt,null,["res/atlas/immortal.atlas","res/atlas/magic_pet.atlas","magic_pet/bj_linbgchongFaZhen.jpg"],1,122,6e4],[11,1,Ee,null,["res/atlas/magic_pet.atlas","magic_pet/bj_linbgchong.png"],1,13,6e4],[168,1,Re,null,["res/atlas/magic_pet.atlas","magic_pet/bj_linbgchong.png"],1,3,6e4],[27,1,Kt,null,["res/atlas/magic_weapon.atlas","res/atlas/magic_pet.atlas","magic_weapon/bj_xianqi.jpg"],1,12,6e4],[126,1,$t,null,["res/atlas/magic_weapon.atlas","res/atlas/magic_pet.atlas","magic_weapon/bj_xianqi.jpg"],1,45,6e4],[127,1,te,null,["res/atlas/magic_weapon.atlas","res/atlas/magic_pet.atlas","magic_weapon/bj_xianqi.jpg","magic_weapon/bj_xianqi_02.jpg"],1,14,6e4],[179,1,ee,null,["res/atlas/immortal.atlas","res/atlas/magic_weapon.atlas","magic_weapon/bj_xianqi.jpg"],1,126,6e4],[28,1,W,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[1452,1,z,null,["res/atlas/common.atlas"],0,0,6e4],[33,1,bt,null,["res/atlas/singleboss.atlas"],1,1,6e4],[40,1,vt,null,["res/atlas/singleboss.atlas"],1,20,6e4],[45,1,dt,null,["res/atlas/health_point.atlas","ladder/txt_ttdf_txt.png"],0,0,1e4],[43,1,rt,null,["res/atlas/magic_art.atlas"],1,11,6e4],[48,1,q,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[41,1,g,null,["res/atlas/born.atlas","born/msz_tongyong_3.png"],1,26,6e4],[44,1,at,null,["res/atlas/magic_art.atlas"],0,0,6e4],[56,1,ot,null,["res/atlas/intensive.atlas"],1,17,0],[57,1,H,null,["res/atlas/common.atlas","res/atlas/big_tower.atlas","big_tower/8.jpg"],1,63,6e4],[62,1,k,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[63,1,F,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[64,1,j,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[65,1,O,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[74,1,N,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,0],[75,1,Bt,null,["res/atlas/three_worlds.atlas","res/atlas/forbidden_boss.atlas","three_worlds/bj_sanjieboss_1.jpg"],1,41,6e4],[72,1,nt,null,["res/atlas/exercise.atlas","exercise/bj_lilian_1.jpg","exercise/msz_tongyong_3.png"],1,9,0],[66,1,A,null,["res/atlas/compose.atlas"],1,27,6e4],[78,1,pt,null,"res/atlas/magic_position.atlas",1,10,6e4],[89,1,St,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[86,1,At,null,"res/atlas/common.atlas",0,0,0],[80,1,y,null,["res/atlas/boss_home.atlas","res/atlas/forbidden_boss.atlas","res/atlas/player.atlas","boss_home/msz_bosszhijia_2.png"],1,42,6e4],[83,1,Vt,ui.ImmortalShengjiViewUI,["res/atlas/immortal.atlas","immortal/image_sb_bg1.jpg"],1,29,6e4],[120,1,Nt,ui.ImmortalHuanhuaViewUI,["res/atlas/immortal.atlas","immortal/image_sb_bg1.jpg"],1,30,6e4],[121,1,Wt,ui.ImmortalFuhunViewUI,["res/atlas/immortal.atlas","immortal/bj_shengbing_1.jpg","immortal/bj_shengbing_2.jpg"],1,31,6e4],[91,1,zt,ui.ImmortalShengjiViewUI,["res/atlas/immortal.atlas","immortal/bj_xianyi_2.jpg"],1,32,6e4],[122,1,qt,ui.ImmortalHuanhuaViewUI,["res/atlas/immortal.atlas","immortal/bj_xianyi_2.jpg"],1,33,6e4],[123,1,jt,ui.ImmortalFuhunViewUI,["res/atlas/immortal.atlas","immortal/bj_xianyi_1.jpg","immortal/bj_xianyi_2.jpg"],1,34,6e4],[104,1,Lt,null,["res/atlas/vip.atlas","res/atlas/common.atlas","vip/bg_vip_dt.jpg","vip/image_vip_bg.jpg"],1,47,6e4],[367,1,Ai,null,["res/atlas/vip.atlas","res/atlas/common.atlas","vip/bg_vip_dt.jpg","vip/image_vip_bg.jpg"],1,230,6e4],[128,1,ie,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,53,6e4],[129,1,ne,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,54,6e4],[130,1,se,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,55,6e4],[131,1,ae,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,56,6e4],[132,1,oe,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,72,6e4],[346,1,o,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,75,6e4],[345,1,xi,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,74,6e4],[108,1,Ut,null,["res/atlas/common.atlas","res/atlas/bag.atlas"],1,19,6e4],[111,1,Ft,null,["res/atlas/common.atlas","res/atlas/recharge.atlas","recharge/imge_cz_txtbg.png","res/atlas/vip.atlas","vip/bg_vip_dt.jpg","qq/img_ktlz.png"],1,50,6e4],[112,1,Gt,null,["res/atlas/common.atlas","res/atlas/buff.atlas"],0,0,6e4],[134,1,Xt,null,["res/atlas/common.atlas"],1,110,6e4],[158,1,le,null,["res/atlas/nine.atlas","nine/image_jtzd_bg.jpg","res/atlas/pvp_tab.atlas"],1,120,6e4],[161,1,pe,null,["res/atlas/common.atlas","res/atlas/nine.atlas","nine/image_jtzd_bg.jpg"],0,0,6e4],[1505,1,ue,null,["res/atlas/common.atlas","res/atlas/nine.atlas","nine/image_jtzd_bg.jpg"],0,0,6e4],[1506,1,de,null,["res/atlas/common.atlas","res/atlas/nine.atlas","nine/image_jtzd_bg.jpg"],0,0,6e4],[162,1,me,null,["res/atlas/nine.atlas","nine/image_jtzd_bg.jpg"],0,0,6e4],[165,1,ye,null,"res/atlas/common.atlas",0,0,6e4],[146,1,ve,null,["res/atlas/chat.atlas"],0,0,6e4],[147,1,_e,null,["res/atlas/chat.atlas"],1,113,0],[150,1,be,null,["res/atlas/chat.atlas"],1,114,0],[276,1,a,null,["res/atlas/chat.atlas"],1,166,0],[761,1,r,null,["res/atlas/chat.atlas"],1,491,0],[513,1,s,null,["res/atlas/chat.atlas","marry/panel_common_bg12.png"],1,0,0],[151,1,Ce,null,["res/atlas/chat.atlas"],1,0,0],[152,1,Te,null,["res/atlas/chat.atlas"],1,0,6e4],[149,1,Ie,null,["res/atlas/chat.atlas"],0,0,6e4],[166,1,we,null,"res/atlas/gather.atlas",0,0,6e4],[167,1,Me,null,"res/atlas/common.atlas",0,0,6e4],[194,1,De,null,["res/atlas/activityall.atlas","res/atlas/common.atlas","activityall/image_xshd_ddt.png"],1,128,6e4],[214,1,Fe,null,"res/atlas/common.atlas",0,0,6e4],[215,1,Oe,null,"res/atlas/day_drop.atlas",0,0,6e4],[216,1,ke,null,"res/atlas/common.atlas",0,0,6e4],[219,1,Ge,null,["res/atlas/common.atlas","res/atlas/kunlun.atlas","res/atlas/gather.atlas"],0,0,6e4],[220,1,Ve,null,["res/atlas/common.atlas","res/atlas/kunlun.atlas"],0,0,6e4],[221,1,Ne,null,["res/atlas/common.atlas","res/atlas/kunlun.atlas"],0,0,6e4],[227,1,u,null,["res/atlas/common.atlas","res/atlas/fairy.atlas","fairy/image_hsxv_bg1.png","fairy/image_hsxv_bg2.png","res/atlas/pvp_tab.atlas"],1,145,6e4],[235,1,je,null,["res/atlas/store.atlas"],1,73,6e4],[246,1,Ze,null,["res/atlas/adventure.atlas","adventure/image_qy_bannerbg.jpg","adventure/image_qy_cqbg.jpg","adventure/title_qy_cq.png"],1,141,0],[248,1,Qe,null,"res/atlas/guide.atlas",0,0,0],[249,1,Ke,null,["res/atlas/store.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,149,6e4],[250,1,$e,null,["res/atlas/adventure.atlas","adventure/image_qy_bannerbg.jpg","adventure/image_qy_cqbg.jpg","adventure/title_qy_cq.png"],0,0,6e4],[256,1,ni,null,"res/atlas/common.atlas",0,0,6e4],[264,1,ri,null,["res/atlas/common.atlas","res/atlas/player_title.atlas"],1,163,6e4],[289,1,hi,null,"res/atlas/arena.atlas",1,165,6e4],[319,1,gi,ui.ImmortalShengjiViewUI,"res/atlas/immortal.atlas",1,174,6e4],[320,1,yi,ui.ImmortalHuanhuaViewUI,"res/atlas/immortal.atlas",1,175,6e4],[321,1,_i,ui.ImmortalFuhunViewUI,"res/atlas/immortal.atlas",1,176,6e4],[322,1,vi,ui.ImmortalShengjiViewUI,"res/atlas/immortal.atlas",1,177,6e4],[323,1,Ii,ui.ImmortalHuanhuaViewUI,"res/atlas/immortal.atlas",1,178,6e4],[324,1,bi,ui.ImmortalFuhunViewUI,"res/atlas/immortal.atlas",1,179,6e4],[326,1,Ci,null,"res/atlas/xi_lian.atlas",1,190,6e4],[333,1,wi,null,["res/atlas/shenqi.atlas"],1,189,6e4],[374,1,Ri,null,["res/atlas/common.atlas","res/atlas/zxian_yu.atlas"],1,236,6e4],[375,1,Di,null,["res/atlas/common.atlas","res/atlas/zxian_yu.atlas","ios_1"===PlatParams.configs||"wechat"===PlatParams.configs?"zxian_yu/image_xy_bg_1.jpg":"zxian_yu/image_xy_bg.jpg"],1,233,6e4],[376,1,Li,null,["res/atlas/store.atlas","res/atlas/common.atlas","res/atlas/zxian_yu.atlas","zxian_yu/image_xy_bg02.jpg","zxian_yu/image_xy_bg04.jpg"],1,235,6e4],[377,1,ki,null,["res/atlas/zxian_yu.atlas","treasure/imge_xb_bgbottom.png","zxian_yu/image_xy_xsbg.jpg"],1,234,6e4],[385,1,Hi,null,["res/atlas/store.atlas","res/atlas/common.atlas","res/atlas/zxian_yu.atlas"],1,239,6e4],[392,1,Fi,null,["res/atlas/common.atlas","res/atlas/vip.atlas"],0,0,0],[407,1,Wi,null,["res/atlas/health_point.atlas"],0,0,0],[414,1,qi,null,["res/atlas/store.atlas"],1,77,6e4],[473,1,$i,null,["res/atlas/immortal.atlas","res/atlas/fashion_suits.atlas","immortal/image_sb_bg1.jpg"],1,288,6e4],[476,1,tn,null,["res/atlas/immortal.atlas","res/atlas/fashion_suits.atlas","immortal/image_sb_bg1.jpg"],1,289,6e4],[477,1,en,null,["res/atlas/immortal.atlas","res/atlas/fashion_suits.atlas","immortal/image_sb_bg1.jpg"],1,290,6e4],[640,1,ln,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,387,6e4],[669,1,hn,null,["res/atlas/common.atlas","res/atlas/other_player_online.atlas"],0,0,0],[699,1,cn,null,["res/atlas/common.atlas","res/atlas/other_player_online.atlas"],0,0,0],[1301,1,pn,null,["res/atlas/common.atlas","res/atlas/other_player_online.atlas"],0,0,0],[1454,1,un,null,["res/atlas/common.atlas","res/atlas/other_player_online.atlas"],0,0,0],[1507,1,dn,null,["res/atlas/common.atlas","res/atlas/other_player_online.atlas"],0,0,0],[760,1,_n,null,["res/atlas/store.atlas","res/atlas/common.atlas"],1,490,6e4],[879,1,bn,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,563,6e4],[905,1,Cn,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,561,6e4],[906,1,Tn,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,562,6e4],[907,1,wn,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,564,6e4],[908,1,xn,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,565,6e4],[910,1,Bn,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,567,6e4],[909,1,Pn,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,566,6e4],[911,1,Sn,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,568,6e4],[983,1,En,null,["res/atlas/show_master.atlas","immortal/image_sb_bg1.jpg"],1,650,6e4],[1169,1,t.store.AuctionStorePanel,null,["res/atlas/store.atlas"],1,778,6e4],[1259,1,t.windCloud.WindCloudPanel,null,["res/atlas/windcloud.atlas","res/atlas/pvp_tab.atlas"],1,839,6e4],[1264,1,t.windCloud.WindCloudScenePanel,ui.WindCloudSceneViewUI,["res/atlas/windcloud.atlas"],0,0,6e4],[1270,1,t.windCloud.WindCloudWaitEnemyPanel,null,["res/atlas/windcloud.atlas"],0,0,6e4],[413,1,Hn,null,["res/atlas/compose.atlas"],1,249,6e4],[170,1,Fn,null,["res/atlas/xianfu.atlas","xianfu/image_xf_bg.jpg"],1,152,6e4],[171,1,Gn,null,["res/atlas/xianfu.atlas","xianfu/image_xf_bg.jpg"],0,0,6e4],[172,1,Vn,null,["res/atlas/xianfu.atlas","res/atlas/day_drop.atlas","xianfu/image_xf_bg.jpg"],0,0,6e4],[173,1,Nn,null,["res/atlas/xianfu.atlas","xianfu/image_xf_bg.jpg"],0,0,6e4],[199,1,Jn,null,["res/atlas/talisman.atlas","talisman/bj_fabao_1.jpg"],1,281,6e4],[200,1,Jn,null,["res/atlas/talisman.atlas","talisman/bj_fabao_1.jpg"],1,282,6e4],[201,1,Jn,null,["res/atlas/talisman.atlas","talisman/bj_fabao_1.jpg"],1,283,6e4],[202,1,Jn,null,["res/atlas/talisman.atlas","talisman/bj_fabao_1.jpg"],1,284,6e4],[208,1,Kn,null,["res/atlas/xianfu.atlas","xianfu/image_xf_bg.jpg"],1,0,6e4],[209,1,$n,null,["res/atlas/xianfu.atlas","xianfu/image_xf_bg.jpg"],1,151,6e4],[211,1,ts,null,["res/atlas/xianfu.atlas","xianfu/image_xf_bg.jpg"],1,150,6e4],[243,1,Qn,null,["res/atlas/xianfu.atlas","xianfu/image_xf_bg.jpg"],1,0,6e4],[617,1,hs,null,["res/atlas/faerie_demon.atlas","res/atlas/ladder.atlas","faerie_demon/image_xmdj_bg1.jpg"],1,377,0],[618,1,as,null,["res/atlas/faerie_demon.atlas"],0,0,0],[619,1,rs,null,["res/atlas/faerie_demon.atlas"],0,0,0],[984,1,us,null,["res/atlas/faerie_demon.atlas","res/atlas/big_tower.atlas"],0,0,0],[262,1,Ds,null,["res/atlas/faction.atlas","res/atlas/common.atlas"],1,159,6e4],[263,1,Rs,null,"res/atlas/faction.atlas",1,160,6e4],[268,1,Ss,null,"res/atlas/faction.atlas",1,161,6e4],[269,1,Ps,null,"res/atlas/faction.atlas",1,162,6e4],[272,1,ws,null,"res/atlas/faction.atlas",0,0,6e4],[275,1,Ts,null,"res/atlas/bottom.atlas",0,0,6e4],[277,1,Cs,null,"res/atlas/faction.atlas",1,184,6e4],[278,1,bs,null,"res/atlas/faction.atlas",1,185,6e4],[279,1,Is,null,"res/atlas/faction.atlas",1,186,6e4],[280,1,Ls,null,"res/atlas/faction.atlas",1,187,6e4],[281,1,ks,null,"res/atlas/faction.atlas",1,188,6e4],[295,1,_s,null,"res/atlas/faction.atlas",1,183,6e4],[296,1,ys,null,"res/atlas/faction.atlas",0,0,6e4],[297,1,gs,null,"res/atlas/faction.atlas",0,0,6e4],[516,1,Gs,null,["res/atlas/common.atlas","res/atlas/boss_home.atlas","res/atlas/beast.atlas","res/atlas/equip_suit.atlas","beast/image_slxt_bg01.jpg"],1,318,6e4],[587,1,js,null,["res/atlas/common.atlas","res/atlas/boss_home.atlas","boss_home/msz_bosszhijia_2.png"],0,0,0],[589,1,Ys,null,["res/atlas/common.atlas","res/atlas/yunmeng.atlas","yunmeng/image_ymmj_bg.jpg"],0,0,6e4],[599,1,Xs,null,["res/atlas/beast_boss.atlas","beast_boss/image_ssd_bg1.jpg","beast_boss/image_ssd_bg2.jpg","beast_boss/image_ssd_bg3.jpg"],1,365,6e4],[616,1,Zs,null,["res/atlas/health_point.atlas"],0,0,6e4],[394,2,Gi,null,["res/atlas/common.atlas","res/atlas/vip.atlas"],0,0,6e4],[12,2,C,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[274,2,l,null,["res/atlas/common.atlas"],0,0,6e4],[153,2,xe,null,["res/atlas/common.atlas"],0,0,6e4],[15,2,B,null,["res/atlas/common.atlas"],0,0,6e4],[16,2,x,null,["res/atlas/common.atlas"],0,0,6e4],[259,2,ai,null,["res/atlas/common.atlas"],0,0,6e4],[17,2,T,null,"res/atlas/common.atlas",0,0,6e4],[18,2,b,null,"res/atlas/common.atlas",0,0,6e4],[236,2,h,null,"res/atlas/common.atlas",0,0,6e4],[85,2,w,null,"res/atlas/common.atlas",0,0,6e4],[21,2,tt,null,"res/atlas/common.atlas",0,0,6e4],[22,2,$,null,"res/atlas/win.atlas",0,0,0],[258,2,oi,null,"res/atlas/win.atlas",0,0,0],[23,2,Z,null,"res/atlas/lose.atlas",0,0,0],[24,2,lt,null,"res/atlas/common.atlas",0,0,6e4],[25,2,ht,null,"res/atlas/common.atlas",0,0,6e4],[26,2,I,null,"res/atlas/common.atlas",0,0,6e4],[76,2,m,null,"res/atlas/common.atlas",0,0,6e4],[42,2,f,null,["res/atlas/born.atlas","born/msz_tongyong_3.png"],0,0,6e4],[384,2,Ui,null,["res/atlas/born.atlas","born/msz_tongyong_3.png","born/image_common_title3.png"],0,0,6e4],[47,2,Ct,null,["res/atlas/common.atlas"],0,0,6e4],[53,2,Tt,null,["res/atlas/common.atlas","res/atlas/talisman.atlas","talisman/bj_fabao_1.jpg"],0,0,6e4],[54,2,xt,null,["res/atlas/talisman.atlas","talisman/bj_fabao_1.jpg"],0,0,6e4],[49,2,J,null,["res/atlas/common.atlas","res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[50,2,Y,null,["res/atlas/common.atlas","res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[51,2,X,null,["res/atlas/common.atlas","res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[52,2,Q,null,["res/atlas/common.atlas","res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,0],[58,2,V,null,"res/atlas/common.atlas",0,0,0],[59,2,P,null,"res/atlas/common.atlas",0,0,6e4],[60,2,U,null,["res/atlas/win.atlas","res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[61,2,G,null,["res/atlas/win.atlas","res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[68,2,S,null,["res/atlas/common.atlas","res/atlas/compose.atlas"],0,0,6e4],[69,2,M,null,["res/atlas/common.atlas","res/atlas/compose.atlas"],0,0,6e4],[67,2,E,null,["res/atlas/common.atlas"],0,0,6e4],[70,2,R,null,["res/atlas/common.atlas"],0,0,6e4],[71,2,D,null,["res/atlas/common.atlas"],0,0,6e4],[73,2,it,null,["res/atlas/exercise.atlas","exercise/bj_lilian_1.jpg","exercise/msz_tongyong_3.png"],0,0,6e4],[77,2,K,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[79,2,ct,null,["res/atlas/magic_position.atlas","res/atlas/common.atlas"],0,0,6e4],[88,2,Pt,null,"res/atlas/common.atlas",0,0,6e4],[81,2,_,null,["res/atlas/common.atlas"],0,0,6e4],[82,2,v,null,["res/atlas/dungeon.atlas","boss_home/msz_bosszhijia_2.png","res/atlas/common.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[84,2,st,null,"res/atlas/common.atlas",0,0,6e4],[90,2,Mt,null,["res/atlas/common.atlas","res/atlas/damage_fonts.atlas"],0,0,6e4],[92,2,Et,null,["res/atlas/immortal.atlas"],0,0,6e4],[106,2,Rt,null,["res/atlas/common.atlas","res/atlas/exercise.atlas","exercise/bj_lilian_1.jpg","exercise/msz_tongyong_3.png"],0,0,6e4],[103,2,Dt,null,["res/atlas/store.atlas","res/atlas/common.atlas"],0,0,6e4],[105,2,kt,null,["res/atlas/vip.atlas","res/atlas/common.atlas","vip/bg_vip_dt.jpg"],0,0,6e4],[368,2,Mi,null,["res/atlas/vip.atlas","res/atlas/common.atlas","vip/bg_vip_dt.jpg"],0,0,6e4],[110,2,Ot,null,["res/atlas/vip.atlas","res/atlas/common.atlas","vip/bg_vip_dt.jpg"],0,0,6e4],[138,2,re,null,["res/atlas/common.atlas"],0,0,6e4],[159,2,he,null,["res/atlas/nine.atlas","res/atlas/common.atlas","nine/image_jtzd_bg.jpg"],0,0,6e4],[160,2,ce,null,["res/atlas/common.atlas","res/atlas/nine.atlas","nine/image_jtzd_bg.jpg"],0,0,6e4],[163,2,fe,null,"res/atlas/common.atlas",0,0,6e4],[164,2,ge,null,["res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[154,2,Be,null,["res/atlas/chat.atlas"],0,0,6e4],[1502,2,Pe,null,["res/atlas/chat.atlas","res/atlas/other_player_tips.atlas"],0,0,6e4],[1503,2,Se,null,["res/atlas/chat.atlas","res/atlas/equip_part.atlas"],0,0,6e4],[1504,2,Ae,null,["res/atlas/chat.atlas","res/atlas/brahma_equip.atlas"],0,0,6e4],[522,2,an,null,["res/atlas/chat.atlas","res/atlas/common.atlas"],0,0,6e4],[515,2,on,null,["res/atlas/marry.atlas","res/atlas/common.atlas"],0,0,6e4],[217,2,He,null,["res/atlas/common.atlas"],0,0,6e4],[218,2,Ue,null,["res/atlas/common.atlas"],0,0,6e4],[212,2,Le,null,"res/atlas/common.atlas",0,0,6e4],[229,2,p,null,["res/atlas/common.atlas"],0,0,6e4],[228,2,c,null,["res/atlas/common.atlas"],0,0,6e4],[234,2,Ye,null,["res/atlas/common.atlas"],0,0,6e4],[240,2,Xe,null,["res/atlas/common.atlas"],0,0,6e4],[237,2,We,null,["res/atlas/common.atlas"],0,0,6e4],[238,2,ze,null,["res/atlas/common.atlas"],0,0,6e4],[239,2,qe,null,["res/atlas/common.atlas"],0,0,6e4],[729,2,ti,null,["res/atlas/common.atlas"],0,0,6e4],[247,2,Je,null,["res/atlas/adventure.atlas","adventure/image_qy_bannerbg.jpg","adventure/image_qy_cqbg.jpg","adventure/title_qy_cq.png"],0,0,6e4],[252,2,ei,null,["res/atlas/immortal.atlas","immortal/bj_lingchong_01.png"],0,0,6e4],[255,2,ii,null,["res/atlas/common.atlas","res/atlas/preview_series.atlas","res/atlas/store.atlas"],0,0,6e4],[257,2,si,null,["res/atlas/common.atlas","res/atlas/preview_series.atlas","res/atlas/store.atlas"],0,0,6e4],[260,2,Ht,null,["res/atlas/common.atlas","res/atlas/bag.atlas"],0,0,6e4],[273,2,li,null,["res/atlas/common.atlas"],0,0,6e4],[290,2,ci,null,"res/atlas/arena.atlas",0,0,6e4],[291,2,pi,null,"res/atlas/arena.atlas",0,0,6e4],[292,2,di,null,"res/atlas/win.atlas",0,0,6e4],[293,2,mi,null,"res/atlas/lose.atlas",0,0,6e4],[288,2,fi,null,["res/atlas/activityall.atlas","res/atlas/common.atlas","activityall/image_xshd_ddt.png"],0,0,6e4],[352,2,Bi,null,["res/atlas/common.atlas","res/atlas/player_title.atlas","player_title/image_chxt_bg1.png","player_title/txt_chxt_gxhdxch.png"],0,0,6e4],[361,2,Pi,null,"res/atlas/common.atlas",0,0,6e4],[366,2,Si,null,"res/atlas/store.atlas",0,0,6e4],[373,2,Ei,null,["res/atlas/common.atlas","res/atlas/common.atlas","res/atlas/zxian_yu.atlas","treasure/title0_xunbao.png","zxian_yu/image_xy_bg.jpg","zxian_yu/image_xy_bg02.jpg","treasure/imge_xb_bgbottom.png","zxian_yu/image_xy_bg04.jpg","zxian_yu/image_xy_xsbg.jpg"],1,0,6e4],[390,2,Oi,null,["res/atlas/common.atlas"],0,0,6e4],[395,2,Vi,null,"res/atlas/common.atlas",0,242,6e4],[408,2,Ni,null,["res/atlas/common.atlas"],0,0,6e4],[411,2,zi,null,["res/atlas/common.atlas"],0,0,6e4],[415,2,ji,null,["res/atlas/common.atlas"],0,0,6e4],[435,2,Xi,null,["res/atlas/common.atlas"],0,0,6e4],[443,2,Yi,null,"res/atlas/common.atlas",0,0,6e4],[454,2,Zi,null,["res/atlas/rehead.atlas"],0,260,6e4],[568,2,Ji,null,["res/atlas/rehead.atlas"],0,353,6e4],[455,2,Qi,null,["res/atlas/rehead.atlas"],0,261,6e4],[469,2,Ki,null,"res/atlas/common.atlas",0,0,6e4],[478,2,nn,null,["res/atlas/common.atlas"],0,0,6e4],[479,2,sn,null,["res/atlas/immortal.atlas"],0,0,6e4],[523,2,rn,null,["res/atlas/dragon.atlas","res/atlas/super_vip.atlas"],0,319,6e4],[654,2,Ti,null,["res/atlas/xi_lian.atlas"],0,0,6e4],[700,2,mn,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[701,2,fn,null,["res/atlas/common.atlas"],0,0,6e4],[702,2,gn,null,["res/atlas/common.atlas","res/atlas/player_title.atlas","player_title/image_chxt_bg1.png"],0,0,6e4],[728,2,yn,null,["res/atlas/common.atlas"],0,462,6e4],[878,2,vn,null,["res/atlas/show_master.atlas"],0,0,6e4],[912,2,In,null,["res/atlas/show_master.atlas"],0,0,6e4],[947,2,An,null,["res/atlas/common.atlas"],0,623,6e4],[982,2,Mn,null,["res/atlas/xi_lian.atlas","res/atlas/common.atlas"],0,0,6e4],[1019,2,Rn,null,["res/atlas/common.atlas"],0,0,6e4],[1170,2,t.store.AuctionAlert,null,["res/atlas/store.atlas"],0,0,6e4],[1271,2,t.store.AuctionStoreLogAlert,null,["res/atlas/store.atlas"],0,0,6e4],[1189,2,Dn,null,["res/atlas/common.atlas"],0,783,6e4],[1260,2,t.windCloud.WindCloudVserAlert,ui.WindCloudVserAlertUI,["res/atlas/windcloud.atlas"],0,0,6e4],[1261,2,t.windCloud.WindCloudRankAlert,ui.WindCloudRankAlertUI,["res/atlas/windcloud.atlas"],0,0,6e4],[1262,2,t.windCloud.WindCloudRankRwdAlert,ui.WindCloudRankAlertUI,["res/atlas/windcloud.atlas"],0,0,6e4],[1263,2,t.windCloud.WindCloudMatchAlert,ui.WindCloudWaitAlertUI,["res/atlas/windcloud.atlas"],0,0,6e4],[1267,2,t.windCloud.WindCloudEnterAlert,null,["res/atlas/windcloud.atlas"],0,0,6e4],[1268,2,t.windCloud.WindCloudEnterAlert1,null,["res/atlas/windcloud.atlas"],0,0,6e4],[1269,2,t.commonAlert.CommonBuyTxtAlert,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1331,2,Un,null,null,0,0,6e4],[622,2,cs,null,"res/atlas/common.atlas",0,0,6e4],[623,2,ps,null,"res/atlas/common.atlas",0,0,6e4],[620,2,ls,null,["res/atlas/faerie_demon.atlas","res/atlas/guide.atlas","res/atlas/boss_home.atlas","faerie_demon/image_xmdj_bg2.jpg"],0,0,6e4],[369,2,is,null,"res/atlas/common.atlas",0,0,6e4],[370,2,ns,null,"res/atlas/common.atlas",0,0,6e4],[371,2,ss,null,"res/atlas/common.atlas",0,0,6e4],[382,2,os,null,"res/atlas/common.atlas",0,0,6e4],[177,2,Wn,null,"res/atlas/common.atlas",0,0,6e4],[178,2,zn,null,["res/atlas/common.atlas","res/atlas/xianfu.atlas","xianfu/image_xf_bg.jpg"],0,0,6e4],[187,2,qn,null,"res/atlas/common.atlas",0,0,6e4],[189,2,jn,null,"res/atlas/common.atlas",0,0,6e4],[190,2,Xn,null,"res/atlas/common.atlas",0,0,6e4],[192,2,Yn,null,"res/atlas/common.atlas",0,0,6e4],[193,2,Zn,null,"res/atlas/common.atlas",0,0,6e4],[251,2,es,null,["res/atlas/common.atlas"],0,0,6e4],[265,2,Es,null,["res/atlas/faction.atlas"],0,0,6e4],[266,2,Ms,null,["res/atlas/faction.atlas"],0,0,6e4],[267,2,As,null,["res/atlas/faction.atlas"],0,0,6e4],[270,2,Bs,null,["res/atlas/faction.atlas"],0,0,6e4],[271,2,xs,null,["res/atlas/faction.atlas"],0,0,6e4],[299,2,vs,null,["res/atlas/faction.atlas"],0,0,6e4],[300,2,Us,null,["res/atlas/faction.atlas"],0,0,6e4],[301,2,fs,null,["res/atlas/faction.atlas"],0,0,6e4],[327,2,ms,null,["res/atlas/faction.atlas"],0,0,6e4],[328,2,Hs,null,["res/atlas/faction.atlas"],0,0,6e4],[331,2,ds,null,["res/atlas/faction.atlas"],0,0,6e4],[475,2,Os,null,["res/atlas/common.atlas"],0,0,6e4],[948,2,Fs,null,["res/atlas/common.atlas"],0,0,6e4],[418,2,On,null,["res/atlas/common.atlas"],0,0,6e4],[517,2,Vs,null,["res/atlas/rune.atlas","res/atlas/beast.atlas","res/atlas/common.atlas"],0,0,6e4],[518,2,Ns,null,["res/atlas/common.atlas","res/atlas/beast.atlas"],0,0,6e4],[519,2,Ws,null,["res/atlas/common.atlas","res/atlas/beast.atlas"],0,0,6e4],[520,2,zs,null,["res/atlas/common.atlas","res/atlas/beast.atlas"],0,0,6e4],[521,2,qs,null,"res/atlas/common.atlas",0,0,6e4],[1350,2,Js,null,["res/atlas/common.atlas"],0,0,6e4]],this._arr=[],GlobalData.funcTable={},this.checkInfo(this._windowInfos),this.checkInfo((new t.subpack.SubWindowConfig).windowInfos),this.checkInfo((new t.subpack1.Sub1WindowConfig).windowInfos)}e=t.core||(t.core={}),i=t.login.LoginPanel,n=t.login.SelectServerPanel,s=t.chat.ChatMarryPanel,o=t.store.ShengyinStorePanel,a=t.chat.ChatFactionPanel,r=t.chat.ChatTeamPanel,l=t.commonAlert.SetInputWordAlert,h=t.commonAlert.OtherEquipAlert,c=t.fairy.FairySendAlert,p=t.fairy.FairyChooseAlert,u=t.fairy.FairyPanel,d=t.bag.BagPanel,m=t.bag.SmeltSuccessAlert,f=t.born.BornAlert,g=t.born.BornPanel,y=t.bossHome.BossHomePanel,_=t.bossHome.BoxOpenAlert,v=t.bossHome.LeaveScenceAlert,I=t.commonAlert.AttrAlert,b=t.commonAlert.BagEquipAlert,C=t.commonAlert.CommonTxtAlert,T=t.commonAlert.EquipWearAlert,w=t.commonAlert.NotGeneratedAlert,x=t.commonAlert.PropAlert,B=t.commonAlert.PropUseAlert,P=t.commonAlert.VipTimesAlert,S=t.compose.ComposeEquipAlert,A=t.compose.ComposePanel,M=t.compose.ComposeStoneAlert,E=t.compose.ComposeSuccessAlert,R=t.compose.DecomposeAlert,D=t.compose.DecomposeSuccessAlert,L=t.createRole.CreateRolePanel,k=t.dailyDungeon.CoinRBPanel,U=t.dailyDungeon.CoinWinPanel,H=t.dailyDungeon.DailyDungeonPanel,O=t.dailyDungeon.PetLTPanel,F=t.dailyDungeon.PetRBPanel,G=t.dailyDungeon.PetWinPanel,V=t.dungeon.DungeonDegreeAlert,N=t.dungeon.DungeonEnterEffect,W=t.dungeon.DungeonLBPanel,z=t.dungeon.DungeonShieldPanel,q=t.dungeon.DungeonRBPanel,j=t.dungeon.EndTimePanel,X=t.dungeon.InspireAlert,Y=t.dungeon.LastHitAwardAlert,Z=t.dungeon.LosePanel,J=t.dungeon.MvpAwardAlert,Q=t.dungeon.ReviveAlert,K=t.dungeon.SingleInspireAlert,$=t.dungeon.WinPanel,tt=t.email.EmailDetailPanel,et=t.email.EmailPanel,it=t.exercise.ExerciseAlert,nt=t.exercise.ExercisePanel,st=t.immortals.ImmortalsUpgradeAlert,ot=t.intensive.IntensivePanel,at=t.magicArt.MagicArtGetPanel,rt=t.magicArt.MagicArtPanel,lt=t.pet.PetFeedSkillAlert,ht=t.pet.PetUpgradeSkillAlert,ct=t.magicPosition.MagicPositionAlter,pt=t.magicPosition.MagicPositionPanel,ut=t.main.BottomPanel,dt=t.main.HealthPointPanel,mt=t.main.LeftBottomPanel,ft=t.main.LeftTopPanel,gt=t.main.RightBottomPanel,yt=t.main.RightTopPanel,_t=t.main.TopPanel,vt=t.multiBoss.MultiBossPanel,It=t.player.PlayerPanel,bt=t.single_boss.SingleBossPanel,Ct=t.talisman.TalismanAlert,Tt=t.talisman.TalismanGetAlert,wt=t.talisman.TalismanPanel,xt=t.talisman.TalismanUpAlert,Bt=t.threeWorlds.ThreeWorldsPanel,Pt=t.threeWorlds.ThreeWorldsRankPanel,St=t.threeWorlds.ThreeWorldsRBPanel,At=t.warDisplay.WarDisplay,Mt=t.player.PlayerAttrAlert,Et=t.commonAlert.ExteriorActiveAlert,Rt=t.commonAlert.LackPropAlert,Dt=t.store.StoreAlert,Lt=t.vip.VipPanel,kt=t.vip.VipAlert,Ut=t.bag.SmeltPanel,Ht=t.bag.SmeltUpgradeAlert,Ot=t.bag.BoxAwardAlert,Ft=t.recharge.RechargePanel,Gt=t.buff.BuffAlert,Vt=t.immortals.ImmortalShengjiPanel,Nt=t.immortals.ImmortalHuanhuaPanel,Wt=t.immortals.ImmortalFuhunPanel,zt=t.wing.WingShengjiPanel,qt=t.wing.WingHuanhuaPanel,jt=t.wing.WingFuhunPanel,Xt=t.dailyDemon.DailyDemonPanel,Yt=t.pet.PetFeedPanel,Zt=t.pet.PetRankPanel,Jt=t.pet.PetRefinePanel,Qt=t.pet.PetCirclePanel,Kt=t.ride.RideFeedPanel,$t=t.ride.RideRankPanel,te=t.ride.RideRefinePanel,ee=t.ride.RideCirclePanel,ie=t.store.LimitStorePanel,ne=t.store.UsualStorePanel,se=t.store.GoldStorePanel,oe=t.store.BossStorePanel,ae=t.store.VipStorePanel,re=t.commonAlert.ManualGiftAlert,le=t.nine.NinePanel,he=t.nine.NineTopAwardAlert,ce=t.nine.ImgTitleAlert,pe=t.nine.NineRBPanel,ue=t.nine.NineRBPanel1,de=t.nine.NineCBPanel,me=t.nine.NineDefeatPanel,fe=t.nine.NineResultAlert,ge=t.nine.NineKilledAlert,ye=t.activityPreview.ActivityPrePanel,_e=t.chat.ChatJiuzhouPanel,ve=t.chat.ChatMarkedWordsPanel,Ie=t.chat.ChatFacePanel,be=t.chat.ChatBenfuPanel,Ce=t.chat.ChatSystemPanel,Te=t.chat.ChatBlackListPanel,we=t.scene.GatherPanel,xe=t.rune.JoinBlackListHintAlert,Be=t.chat.OtherPlayerInfoBaseAlert,Pe=t.chat.OtherPlayerInfoModelAlert,Se=t.chat.OtherPlayerInfoYuanShenAlert,Ae=t.chat.OtherPlayerInfoFantianAlert,Me=t.nine.NineEnterTipPanel,Ee=t.illusion.WeaponIllusionPanel,Re=t.illusion.PetIllusionPanel,De=t.activity_all.ActivityAllPanel,Le=t.commonAlert.CommonItemsAlert,ke=t.day_drop_treasure.DayDropTreasureRightPanel,Ue=t.day_drop_treasure.DayDropTreasureResultAlert,He=t.day_drop_treasure.DayDropTreasureRewardAlert,Oe=t.day_drop_treasure.DayDropTreasureBottomPanel,Fe=t.day_drop_treasure.DayDropTreasureTipPanel,Ge=t.kunlun.KunLunGamePanel,Ve=t.kunlun.KunLunBuffPanel,Ne=t.kunlun.KunLunGainPanel,We=t.kunlun.KunLunResultAlert,ze=t.kunlun.KunLunTipAlert,qe=t.kunlun.KunLunRewordAlert,je=t.store.HonorStorePanel,Xe=t.fairy.FairyHoldSucceedAlert,Ye=t.fairy.FairyLogAlert,Ze=t.adventure.AdventurePanel,Je=t.adventure.FingerGuessAlert,Qe=t.guide.GuidePanel,Ke=t.adventure.AdventureShopPanel,$e=t.adventure.AdventureMonsterPanel,ti=t.adventure.AdventureShopAlert,ei=t.commonAlert.CommonActiveAlert,ii=t.action_preview.ActionPreviewAlert,ni=t.action_preview.ActionPreviewPanel,si=t.action_preview.ActionPreviewNewAlert,oi=t.dungeon.FirstWinPanel,ai=t.compose.ComposeEquipGetAlert,ri=t.player_title.PlayerTitlePanel,li=t.vip.VipMeiRiRewordAlert,hi=t.arena.ArenaPanel,ci=t.arena.ArenaRankAlert,pi=t.arena.ArenaRecordsAlert,di=t.arena.ArenaWinAlert,mi=t.arena.ArenaLoseAlert,fi=t.activity_all.ActivityAllAlert,gi=t.fashion.FashionShengJiPanel,yi=t.fashion.FashionHuanHuaPanel,_i=t.fashion.FashionFuHunPanel,vi=t.tianZhu.TianZhuShengJiPanel,Ii=t.tianZhu.TianZhuHuanHuaPanel,bi=t.tianZhu.TianZhuFuHunPanel,Ci=t.xiLian.XiLianPanel,Ti=t.xiLian.XiLianAllAlert,wi=t.shenqi.ShenqiPanel,xi=t.store.ShenhunStorePanel,Bi=t.player_title.PlayerTitleActiveAlert,Pi=t.pet.AutoBuyAlert,Si=t.store.StoreSpecialAlert,Ai=t.vip_new.VipNewPanel,Mi=t.vip_new.VipNewAlert,Ei=t.zxian_yu.ZXianYuAlert,Ri=t.zxian_yu.ZXianYuBagPanel,Di=t.zxian_yu.ZXianYuPanel,Li=t.zxian_yu.ZXianYuStorePanel,ki=t.zxian_yu.ZXianYuTreasurePanel,Ui=t.born.BornSuccessAlert,Hi=t.store.StoreXianFuPanel,Oi=t.zxian_yu.ZXianYuAllRewardAlert,Fi=t.vip.VIPAndSVIPUpView,Gi=t.commonAlert.CommonTxtCatAlert,Vi=t.rename.RenameAlert,Ni=t.bossHome.BossHomeAwardAlert,Wi=t.main.BelongPanel,zi=t.commonAlert.CommonHuoDeRewardAlert,qi=t.store.FactionStorePanel,ji=t.commonAlert.CommonItemsAlert2,Xi=t.commonAlert.PropRoleAlert,Yi=t.commonAlert.CommonSlideTxtAlert,Zi=t.rehead.ReheadAlert,Ji=t.rehead.ReheadAlert1,Qi=t.rehead.RechatFrameAlert,Ki=t.commonAlert.TwiceConvertAlert,$i=t.fashion_suits.FashionSuitsPanel,tn=t.fashion_suits.FashionSuitsJuePingPanel,en=t.fashion_suits.FashionSuitsDianCangPanel,nn=t.fashion_suits.FashionSuitsAlert,sn=t.fashion_suits.FashionSuitsTaoZhuangAlert,on=t.chat.OtherRingTipsAlert,an=t.chat.OtherCatTips,rn=t.super_vip.SuperVipAlert,ln=t.store.FaerieDemonStorePanel,hn=t.other_player_online.OtherPlayerOnlinePanel,cn=t.other_player_online.OtherPlayerOnlineHalfPanel,pn=t.other_player_online.OtherPlayerOnlinePanel1,un=t.other_player_online.OtherPlayerOnlinePanel2,dn=t.other_player_online.OtherPlayerOnlinePanel3,mn=t.nine.NineExitAlert,fn=t.dailyDungeon.DailyDungeonTextAlert,gn=t.player_title.PlayerTitleChatAlert,yn=t.rehead.SetTipsAlert,_n=t.store.TeamStorePanel,vn=t.showMaster.ShowMasterAlert,In=t.showMaster.ShowMasterDetailAlert,bn=t.showMaster.FashionMasterPanel,Cn=t.showMaster.ImmortalMasterPanel,Tn=t.showMaster.WingMasterPanel,wn=t.showMaster.PearlMasterPanel,xn=t.showMaster.WeaponIllusionMasterPanel,Bn=t.showMaster.PetIllusionMasterPanel,Pn=t.showMaster.WeaponCircleMasterPanel,Sn=t.showMaster.PetCircleMasterPanel,An=t.rehead.CancellationReturnAlert,Mn=t.xiLian.XiLianAlert,En=t.showMaster.CircleMasterPanel,Rn=t.commonAlert.LockTxtAlert,Dn=t.rehead.SetSystemAlert,Ln=t.loading.LoadingPanel,kn=t.common.VersionResUtlis,Un=t.login.MiniGameUpdateAlert,Hn=t.da_zhao.DaZhaoPanel,On=t.da_zhao.DaZhaoFengJieAlert,Fn=t.xianfu.XianfuShengjiPanel,Gn=t.xianfu.XianfuLeftBottomPanel,Vn=t.xianfu.XianfuBottomPanel,Nn=t.xianfu.XianfuRightBottomPanel,Wn=t.xianfu.JulingAccountAlert,zn=t.xianfu.XianfuSmeltAlert,qn=t.xianfu.XianfuSmeltingAlert,jn=t.xianfu.XianfuPetBuyPropAlert,Xn=t.xianfu.XianfuPetReadyGoAlert,Yn=t.xianfu.XianfuPetTravelingAlert,Zn=t.xianfu.XianfuPetAtOnceEndAlert,Jn=t.xianfu.XianfuHandBookPanel,Qn=t.xianfu.XianfuTopPanel,Kn=t.xianfu.XianfuPandectPanel,$n=t.xianfu.XianfuTaskPanel,ts=t.xianfu.XianfuWindWaterPanel,es=t.xianfu.FengshuiAttAlert,is=t.xianfu.XianfuSkillAlert,ns=t.xianfu.XianfuDanluAttrAlert,ss=t.xianfu.XianfuSmeltEndAlert,os=t.xianfu.XianfuSmeltDetailsAlert,as=t.faerie_demon.FaerieDemonCopyLeftPanel,rs=t.faerie_demon.FaerieDemonCopyRightPanel,ls=t.faerie_demon.FaerieDemonMatchingAlert,hs=t.faerie_demon.FaerieDemonPanel,cs=t.faerie_demon.FaerieDemonRankAlert,ps=t.faerie_demon.FaerieDemonRankAwardAlert,us=t.faerie_demon.FaerieDemonCopyCnterTopPanel,ds=t.faction.BaozangF5Alert,ms=t.faction.FactionSetNoticeAlert,fs=t.faction.FactionInspireAlert,gs=t.faction.FactionCopyBottomPanel,ys=t.faction.FactionCopyRBPanel,_s=t.faction.FactionSkillPanel,vs=t.faction.BaozangSpeedAlert,Is=t.faction.BaozangHelpListPanel,bs=t.faction.BaozangMinePanel,Cs=t.faction.BaozangListPanel,Ts=t.faction.FactionAutoInvitePanel,ws=t.faction.FactionManagePanel,xs=t.faction.FactionPostLimitsAlert,Bs=t.faction.FactionMemberOperaAlert,Ps=t.faction.FactionWealPanel,Ss=t.faction.FactionMemberPanel,As=t.faction.FactionJoinLimitSetAlert,Ms=t.faction.FactionAskAlert,Es=t.faction.FactionCreateAlert,Rs=t.faction.FactionPanel,Ds=t.faction.FactionJoinPanel,Ls=t.faction.FactionCopyPanel,ks=t.faction.FactionTaskPanel,Us=t.faction.FactionTenAlert,Hs=t.faction.FactionSetTitleAlert,Os=t.faction.FactionCopyPlanAlert,Fs=t.faction.FactionImpeachAlert,Gs=t.beast_equipment.BeastEquipmentPanel,Vs=t.beast_equipment.BeastEquipmentResolveAndChangeAlert,Ns=t.beast_equipment.BeastEquipmentUpgradeSkillAlert,Ws=t.beast_equipment.BeastEquipmentSkillAlert,zs=t.beast_equipment.BeastEquipmentUpNumAlert,qs=t.beast_equipment.BeastEquipWearAlert,js=t.beast_boss.BeastBossAndPlayerListPanel,Xs=t.beast_boss.BeastBossPanel,Ys=t.beast_boss.BeastBossSingleBossPanel,Zs=t.beast_boss.GatherHpPanel,Js=t.day_drop_treasure.DayDropTreasureGetRewardAlert,Object.defineProperty(Ks,"instance",{get:function(){return this._instance=this._instance||new Ks},enumerable:!0,configurable:!0}),Ks.prototype.getWindowConfigById=function(t){return this._arr[t]},Ks.prototype.checkInfo=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e][0];if(this._arr[n])throw new Error("面板id--"+n+"重复!");this._arr[n]=t[e],GlobalData.funcTable[t[e][6]]=t[e]}},Qs=Ks,e.WindowConfig=Qs}(modules=modules||{}),function(l){var c,e,t,h,p,n,u,d,i;function s(){var t=e.call(this)||this;return t._delayedArrItem=new Array,t}c=l.player||(l.player={}),t=l.core.BaseCtrl,h=l.notice.DropNoticeManager,p=l.bag.BagModel,n=l.redPoint.RedPointCtrl,u=l.scene.SceneUtil,d=l.common.AttrUtil,e=t,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return s._instance=s._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16777318,this.updateTotalAttr),this.subscribe(16777320,this.updateExp),this.subscribe(16777328,this.UpdateMoney),this.subscribe(16777324,this.GetActorEquipReply),this.subscribe(16777323,this.updateActorEquip),this.subscribe(16782974,this.updateContribution),this.subscribe(16777329,this.UpdateFight),this.subscribe(16778119,this.updateZQ),this.subscribe(16777342,this.updateIncome),this.subscribe(16777377,this.updateCharm),this.subscribe(16777473,this.updateXianmoCoin),this.subscribe(16790632,this.updateFactionPrestige),this.subscribe(16791928,this.UpdateFameValue),this.onGlobal("BAG_DATA_GOT",this.updateBag),this.onGlobal("BAG_UPDATE",this.updateBag),this.subscribe(16777365,this.UpdateServerDay),this.subscribe(16777364,this.GetServerDayReply),this.subscribe(16777379,this.setOnlineRemindReply),this.subscribe(16777217,this.CloseClient),this.subscribe(16777220,this.getSystemStateReply),this.subscribe(16777219,this.updateSystemState)},s.prototype.getServerDay=function(){this.publish(2097179,null)},s.prototype.GetServerDayReply=function(t){c.PlayerModel.instance.openDay=t[0],c.PlayerModel.instance.nDay=t[1],c.PlayerModel.instance.cDay=t[2],c.PlayerModel.instance.cBgDay=t[4],GlobalData.timeZoneOffset=6e4*t[3],console.log("请求GetServerDayReply ",t),GlobalData.dispatcher.event("UPDATE_SERVER_DAY")},s.prototype.UpdateServerDay=function(t){c.PlayerModel.instance.openDay&&(c.PlayerModel.instance.openDay=t[0],c.PlayerModel.instance.nDay=t[1],c.PlayerModel.instance.cDay=t[2],c.PlayerModel.instance.cBgDay=t[3],GlobalData.dispatcher.event("UPDATE_SERVER_DAY"))},s.prototype.initBaseInfo=function(t,e,i){c.PlayerModel.instance.actorId=t,c.PlayerModel.instance.playerBaseAttr=e,this.publish(1048677,[Browser.now()]),i?(PlatParams.playerCreate(),PlatParams.playerLogin(),PlatParams.recordStep(11)):PlatParams.playerLogin(),PlatParams.recordStep(7),GlobalData.dispatcher.event("LOGIN_SUCCESS"),CustomDataCtrl.instance.getCustomizeData([22,35,26])},s.prototype.updateTotalAttr=function(t){var e=t[0],i=c.PlayerModel.instance.playerTotolAttrs;if(i){var n=!1;for(a=0,r=e.length;a<r;a++){l=e[a][1],h=e[a][0];var s=d.getAttrByType(h,i);if(s){var o=s[1];n=o!==l,s[1]=l}else n=!0,i.push(e[a]);c.PlayerModel.instance.playerTotolTable[h]=l}n&&(c.PlayerModel.instance.playerTotolAttrs=c.PlayerModel.instance.playerTotolAttrs)}else{for(var a=0,r=e.length;a<r;a++){var l=e[a][1],h=e[a][0];c.PlayerModel.instance.playerTotolTable[h]=l}c.PlayerModel.instance.playerTotolAttrs=e}},s.prototype.updateExp=function(t){var e=t[3];c.PlayerModel.instance.updateLevel(e);var i=t[0];c.PlayerModel.instance.updateExp(i)},s.prototype.UpdateMoney=function(t){c.PlayerModel.instance.UpdateMoney(t)},s.prototype.updateContribution=function(t){c.PlayerModel.instance.contribution=t[0]},s.prototype.UpdateFight=function(t){c.PlayerModel.instance.UpdateFight(t[0])},s.prototype.updateZQ=function(t){c.PlayerModel.instance.updateZQ(t[0])},s.prototype.updateCharm=function(t){c.PlayerModel.instance.updateCharm(t[0])},s.prototype.updateXianmoCoin=function(t){console.log("更新仙魔币.................",t),c.PlayerModel.instance.xianmoCoin=t[0]},s.prototype.UpdateFameValue=function(t){console.log("更新人气值.................",t),c.PlayerModel.instance.renQiNum=t[0]},s.prototype.updateFactionPrestige=function(t){console.log("更新仙盟声望.................",t),c.PlayerModel.instance.factionPrestige=t[0]},s.prototype.updateIncome=function(t){var e=t[1];if(-1===p.instance.noTipSources.indexOf(e)){for(var i=new Array,n=0,s=t[0].length;n<s;n++){var o=t[0][n];2===o[0]?i.push([90240001,o[1],0,null]):3===o[0]?i.push([90330001,o[1],0,null]):4===o[0]?i.push([90430001,o[1],0,null]):1===o[0]?i.push([90140001,o[1],0,null]):5===o[0]?i.push([90530001,o[1],0,null]):17===o[0]?i.push([91740001,o[1],0,null]):23===o[0]?i.push([92340001,o[1],0,null]):18===o[0]?i.push([91830001,o[1],0,null]):19===o[0]?i.push([91930001,o[1],0,null]):27===o[0]?i.push([92740001,o[1],0,null]):28===o[0]?i.push([92830001,o[1],0,null]):34===o[0]?i.push([93430001,o[1],0,null]):37===o[0]?i.push([93730001,o[1],0,null]):38===o[0]?i.push([o[2],o[1],0,null]):42===o[0]?i.push([o[2],o[1],0,null]):41===o[0]?i.push([o[2],o[1],0,null]):45===o[0]?i.push([o[2],o[1],0,null]):44===o[0]?i.push([o[2],o[1],0,null]):46===o[0]?i.push([o[2],o[1],0,null]):49===o[0]?i.push([o[2],o[1],0,null]):50===o[0]?i.push([o[2],o[1],0,null]):53===o[0]?i.push([o[2],o[1],0,null]):-1<p.instance.treasureSocreSource.indexOf(e)&&i.push([o[2],o[1],0,null])}if(2===e)0<i.length&&0===LayerManager.instance.getLayerById(4).numChildren&&h.instance.addItems(i);else if(190===e)22===u.currScene?l.kunlun.KunLunModel.instance.addItems(i,e):h.instance.addItems(i,e);else if(93===e)l.kunlun.KunLunModel.instance.addItems(i,e);else if(81===e||112===e||60===e||135===e||146===e||151===e)for(var a=0;a<i.length;a++){var r=i[a];r&&this._delayedArrItem.push(r)}else h.instance.addItems(i)}},s.prototype.delayedPutInAddItems=function(){this._delayedArrItem&&(h.instance.addItems(this._delayedArrItem),s.instance._delayedArrItem.length=0)},s.prototype.delayedButNoPutInBag=function(){s.instance._delayedArrItem.length=0},s.prototype.getActorEquip=function(){this.publish(2097154,null)},s.prototype.GetActorEquipReply=function(t){var e=t[0];c.PlayerModel.instance.setEquips(e),this.checkPartRP()},s.prototype.updateActorEquip=function(t){c.PlayerModel.instance.wearEquips(t[0]),this.checkPartRP()},s.prototype.updateBag=function(){this.checkPartRP()},s.prototype.checkPartRP=function(){for(var t=!1,e=p.instance.getBestEquipDic(),i=0;i<10;i++)if(e.get(i+1)){t=!0;break}n.instance.setRPProperty("equipPartRP",t)},s.prototype.setOnlineRemindReply=function(t){t&&(c.PlayerModel.instance.playerBaseAttr[20]=t[0],c.PlayerModel.instance.playerBaseAttr[21]=t[1],c.PlayerModel.instance.playerBaseAttr[22]=t[2],c.PlayerModel.instance.playerBaseAttr[24]=t[3],c.PlayerModel.instance.playerBaseAttr[25]=t[4],console.log("改变成功"))},s.prototype.CloseClient=function(t){9===t[0]&&(1===PlatParams.control.beQuit&&(CommonUtil.alert("提示","该帐号已在其他地方登录",[Handler.create(Main.instance,Main.instance.checkConn)],null,null,!1),s.lostFlag=!0),PlatParams.beQuit())},s.prototype.setOnlineRemind=function(t,e,i,n,s){this.publish(2097193,[t,e,i,n,s])},s.prototype.getSystemStateReply=function(t){c.PlayerModel.instance.getSystemStateReply(t)},s.prototype.updateSystemState=function(t){c.PlayerModel.instance.updateSystemState(t)},s.prototype.getSystemState=function(){this.publish(1048678,null)},s.lostFlag=!1,i=s,c.PlayerCtrl=i}(modules=modules||{}),function(n){var l,e,t,h,i,s,o,c,a,r;function p(){var t=e.call(this)||this;return t._copyCoupons=[20730003,20730004,20730005,20730006,20730007,20730008,20730009,20730010,20730016,20730024,20730038,20730040,20730052],t}l=n.bag||(n.bag={}),t=n.core.BaseCtrl,h=n.notice.SystemNoticeManager,i=n.common.CommonUtil,s=n.config.ItemMaterialCfg,o=n.player.PlayerModel,c=game.misc.LogUtils,a=n.vip.VipModel,e=t,__extends(p,e),Object.defineProperty(p,"instance",{get:function(){return this._instance=this._instance||new p},enumerable:!0,configurable:!0}),p.prototype.setup=function(){this.subscribe(16777516,this.getBagReply),this.subscribe(16777517,this.updateBag),this.subscribe(16777322,this.wearEquipReply),this.subscribe(16778818,this.getSmeltInfoReply),this.subscribe(16778819,this.smeltReply),this.subscribe(16777520,this.useBagItemReply),this.subscribe(16777521,this.updateBagItemShow),this.subscribe(16777526,this.openGiftReply),this.subscribe(16777527,this.getBagFinishReply),this.onGlobal("PLAYER_EQUIPS_INITED",this.equipsInitedHandler),GlobalData.dispatcher.on("SMELT_UPDATE",this,this.showSmelt_upgrade_alert,[0]),this.onGlobal("BAG_UPDATE",this.updateSmelt),this.onGlobal("BAG_DATA_GOT",this.updateSmelt),this.onGlobal("SELECT_SMELT_UPDATE",this.updateSmelt),this.onGlobal("PLAYER_EQUIPS_INITED",this.updateSmelt),this.onGlobal("SMELT_UPDATE",this.updateSmelt),this.onGlobal("ZHIZUN_UPDATE",this.updateSmelt),this.onGlobal("BAG_UPDATE",this.checkRP),this.onGlobal("BAG_DATA_GOT",this.checkRP),this.onGlobal("PLAYER_UPDATE_LEVEL",this.checkRP),this.onGlobal("VIP_UPDATE",this.checkRP),this.getBag(0),this.getBag(1),this.getBag(2),this.getBag(3),this.getBag(4),this.getBag(5),this.getBag(6),this.getBag(7),this.getBag(8),this.getBag(9),this.getBag(10),this.getBag(11),this.getBag(12),this.getBag(13),this.getBag(14),this.getBag(15),PlayerCtrl.instance.getActorEquip(),this.getSmeltInfo()},p.prototype.showSmelt_upgrade_alert=function(t){l.BagModel.instance._isUp&&(0==t?WindowManager.instance.isOpened(108)||(WindowManager.instance.open(260),l.BagModel.instance._isUp=!1):1==t?WindowManager.instance.isOpened(108)&&(WindowManager.instance.open(260),l.BagModel.instance._isUp=!1):2==t&&(WindowManager.instance.open(260),l.BagModel.instance._isUp=!1))},p.prototype.getBag=function(t){this.publish(2097252,[t])},p.prototype.getSmeltInfo=function(){this.publish(2098454,null)},p.prototype.getSmeltInfoReply=function(t){l.BagModel.instance.initSmeltInfo(t[0],t[1])},p.prototype.getBagReply=function(t){if(t){var e=t[0],i=t[1];l.BagModel.instance.addItemsByBagId(e,i)}},p.prototype.getBagFinishReply=function(t){l.BagModel.instance.getBagFinishReply(t[0]),l.BagModel.instance.bagInited&&this.checkRP()},p.prototype.updateBag=function(t){c.info(7,"更新背包................"+t),l.BagModel.instance.updateBag(t)},p.prototype.oneKeySmelt=function(t){this.publish(2098455,[t])},p.prototype.smeltReply=function(t){var e=t[0];e?12004!=e?i.noticeError(e):console.log("熔炼返回错误码为---"+e):(l.BagModel.instance.updateSmeltInfo(t),GlobalData.dispatcher.event("SMELT_SUCCEED"))},p.prototype.wearEquip=function(t){this.publish(2097155,[t])},p.prototype.wearEquipReply=function(t){var e=t[0];0===e?(h.instance.addNotice("装备成功"),WindowManager.instance.close(17)):i.noticeError(e)},p.prototype.fastWearEquip=function(){for(var t=new Array,e=l.BagModel.instance.getBestEquipDic(),i=0,n=e.values.length;i<n;i++)t.push(e.values[i][2]);this.publish(2097156,[t])},p.prototype.useBagItem=function(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=0),null!=t?(c.info(7,"使用背包物品................"+t+"     "+e+"    "+i+"   "+n),this._recodeId=e,this.publish(2097255,[t,e,i,n])):h.instance.addNotice("物品不存在",!0)},p.prototype.useBagItemReply=function(t){c.info(7,"使用背包物品返回......................."+t);var e=t[0];0===e?n.rehead.ReheadCtrl.instance.itemHandler(this._recodeId)||(-1!=this._copyCoupons.indexOf(this._recodeId)?i.noticeError(e,"使用成功"):i.noticeError(e)):i.noticeError(e)},p.prototype.useBagItemById=function(t,e){if(void 0===e&&(e=1),c.info(7,"根据道具ID使用背包物品..............."+t+"     "+e),!(e<1)){for(var i=l.BagModel.instance.getItemsById(t),n=0,s=!1,o=0,a=i.length;o<a;o++)if(e<=(n+=(r=i[o])[1])){0===o?this.useBagItem(r[2],t,e):s=!0;break}if(s)for(o=0,a=i.length;o<a;o++){var r;(n=(r=i[o])[1])<e?(this.useBagItem(r[2],t,n),e-=n):this.useBagItem(r[2],t,e)}else h.instance.addNotice("物品数量不足",!0)}},p.prototype.useBagItemByIdUid=function(t,e,i){void 0===i&&(i=1);var n=s.instance.getItemCfgById(t);o.instance.level<n[2]?h.instance.addNotice("等级不足",!0):a.instance.vipLevel<n[3]?h.instance.addNotice("SVIP等级不足",!0):this.useBagItem(e,t,i)},p.prototype.equipsInitedHandler=function(){l.BagModel.instance.setSmeltRank()},p.prototype.updateBagItemShow=function(t){var e=t[0];4001!=e&&WindowManager.instance.openDialog(252,e)},p.prototype.updateSmelt=function(t){if(null==t||1===t){var e=l.BagModel.instance.getBagEnoughById(1)>n.config.BlendCfg.instance.getCfgById(10007)[1][0],i=1==n.zhizun.ZhizunModel.instance.state;!e&&i&&l.BagModel.instance.quicklyOneKeySmelt()}},p.prototype.checkRP=function(){l.BagModel.instance.checkRP()},p.prototype.openGiftReply=function(t){if(t){for(var e=[],i=0,n=t[0];i<n.length;i++){for(var s=n[i],o=s[0],a=s[1],r=!1,l=0,h=e;l<h.length;l++){var c=h[l];if(o===c[0]){c[1]+=a,r=!0;break}}r||e.push([o,a,0,null])}0<e.length&&WindowManager.instance.open(415,e)}},r=p,l.BagCtrl=r}(modules=modules||{}),function(t){var a,e,i,n,o,r,s;function l(){return e.call(this)||this}a=t.task||(t.task={}),i=t.core.BaseCtrl,n=t.effect.SuccessEffectCtrl,o=t.config.TaskCfg,r=t.bag.BagUtil,e=i,__extends(l,e),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16777325,this.getTaskReply),this.subscribe(16777326,this.getTaskAwardReply),this.subscribe(16777327,this.updateTask),this.getTask()},l.prototype.getTask=function(){this.publish(2097157,null)},l.prototype.getTaskReply=function(t){var e=t[0];a.TaskModel.instance.updateTaskInfo(e[0])},l.prototype.updateTask=function(t){for(var e,i=t[0],n=0,s=i.length;n<s;n++){var o=i[n];2===o[0]||(e=o[1])}e&&a.TaskModel.instance.updateTaskInfo(e)},l.prototype.getTaskAward=function(t){for(var e=o.instance.getTaskCfgById(t)[2],i=new Array,n=0,s=.5*e.length;n<s;n++)i.push([e[2*n],e[2*n+1],0,null]);r.canAddItemsByBagIdCount(i)&&this.publish(2097158,[t])},l.prototype.getTaskAwardReply=function(t){0===t[0]&&n.instance.play("assets/others/tx_jinjiechengong6.png")},s=l,a.TaskCtrl=s}(modules=modules||{}),function(t){var i,e,n,s,o,a,r;function l(){return e.call(this)||this}i=t.illusion||(t.illusion={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.pet.PetModel,a=t.ride.RideModel,e=n,__extends(l,e),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16777622,this.riseMagicShowReply),this.subscribe(16777722,this.riseRideMagicShowReply),this.subscribe(16777623,this.changeMagicShowReply),this.subscribe(16777723,this.changeRideMagicShowReply)},l.prototype.riseMagicShow=function(t){this.publish(2097357,t)},l.prototype.riseRideMagicShow=function(t){this.publish(2097457,t)},l.prototype.riseMagicShowReply=function(t){if(!t[0]){var e=o.instance.getShowInfoById(i.IllusionModel.instance._magicSelectId);e&&1===e[1]&&(WindowManager.instance.openDialog(92,[i.IllusionModel.instance._magicSelectId,4]),this.changeMagicShow(i.IllusionModel.instance._magicSelectId))}},l.prototype.riseRideMagicShowReply=function(t){if(!t[0]){var e=a.instance.getShowInfoById(i.IllusionModel.instance._rideMagicSelectId);e&&1===e[1]&&(WindowManager.instance.openDialog(92,[i.IllusionModel.instance._rideMagicSelectId,3]),this.changeRideMagicShow(i.IllusionModel.instance._rideMagicSelectId))}},l.prototype.changeMagicShow=function(t){this.publish(2097358,[t])},l.prototype.changeRideMagicShow=function(t){this.publish(2097458,[t])},l.prototype.changeMagicShowReply=function(t){t[0]||(s.instance.addNotice("更换成功"),i.IllusionModel.instance.magicShowId=t[1],GlobalData.dispatcher.event("SHOW_MASTER_CHANGE"))},l.prototype.changeRideMagicShowReply=function(t){t[0]||(s.instance.addNotice("更换成功"),i.IllusionModel.instance.rideMagicShowId=t[1],GlobalData.dispatcher.event("SHOW_MASTER_CHANGE"))},r=l,i.IllusionCtrl=r}(modules=modules||{}),function(t){var a,e,i,n;function s(){return e.call(this)||this}a=t.funcOpen||(t.funcOpen={}),i=t.core.BaseCtrl,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16777336,this.getActionOpenReply),this.subscribe(16777337,this.updateActionOpen),this.subscribe(16777368,this.getActionStateReply),this.getActionOpen()},s.prototype.getActionOpen=function(){this.publish(2097163,null)},s.prototype.getActionOpenReply=function(t){console.log("获取功能开启返回",t),a.FuncOpenModel.instance.getActionOpenReply(t)},s.prototype.getActionState=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.publish(2097180,[t])},s.prototype.getActionStateReply=function(t){for(var e=0,i=t[0];e<i.length;e++){var n=i[e],s=n[0],o=n[1];a.FuncOpenModel.instance.setActionOpen(s,o)}GlobalData.dispatcher.event("FUNC_OPEN_ASSIGN_UPDATE")},s.prototype.updateActionOpen=function(t){for(var e=t[0],i=0,n=e.length;i<n;i++){var s=e[i][1];if(!a.FuncOpenModel.instance.getFuncIsOpen(e[i][0])&&1===s){var o=this._funcReqTable[e[i][0]];o&&this.publish(o[1],o[2])}}a.FuncOpenModel.instance.updateActionOpen(t)},s.prototype.registeFuncReq=function(t,e,i){void 0===i&&(i=null),this._funcReqTable=this._funcReqTable||{},this._funcReqTable[t]=[t,e,i]},n=s,a.FuncOpenCtrl=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.email||(t.email={}),n=t.core.BaseCtrl,s=t.common.CommonUtil,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16778516,this.getEmailHeadsReply),this.subscribe(16778518,this.updateEmailsState),this.subscribe(16778517,this.readEmailReply),this.subscribe(16778519,this.getEmailsAttachReply),this.subscribe(16778520,this.oneKeyDeleteReply),this.subscribe(16778521,this.updateAddEmail),this.subscribe(16778522,this.delEmailsReply),this.getEmailHeads()},a.prototype.getEmailHeads=function(){this.publish(7340032,null)},a.prototype.getEmailHeadsReply=function(t){e.EmailModel.instance.getEmailHeadsReply(t)},a.prototype.readEmail=function(t){this.publish(7340033,[t])},a.prototype.readEmailReply=function(t){e.EmailModel.instance.newShowEmail=t[0]},a.prototype.updateEmailsState=function(t){e.EmailModel.instance.updateEmailsState(t)},a.prototype.getAward=function(t){this.publish(7340036,[t])},a.prototype.getAwardAll=function(){this.publish(7340034,null)},a.prototype.getEmailsAttachReply=function(t){var e=t[0];0!=e&&s.noticeError(e)},a.prototype.oneKeyDelete=function(){this.publish(7340035,null)},a.prototype.oneKeyDeleteReply=function(t){e.EmailModel.instance.emailDeleteChange(t)},a.prototype.delEmailsReply=function(t){var e=t[0];0!=e&&s.noticeError(e)},a.prototype.updateAddEmail=function(t){e.EmailModel.instance.addUuidAndEmailData(t)},o=a,e.EmailCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.born||(t.born={}),n=t.core.BaseCtrl,s=t.common.CommonUtil,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16778616,this.getEraInfoReply),this.subscribe(16778617,this.updateInfo),this.subscribe(16778618,this.errReply),this.subscribe(16778620,this.fastEraReply),this.subscribe(16778621,this.drawEraTaskReply),this.onGlobal("BAG_UPDATE",e.BornModel.instance.checkRP,e.BornModel.instance),this.getEraInfo()},a.prototype.getEraInfo=function(){this.publish(2098252,null)},a.prototype.getEraInfoReply=function(t){if(!t)throw new Error("协议 16778616 转生信息返回包为空");e.BornModel.instance.updateInfo(t)},a.prototype.updateInfo=function(t){if(!t)throw new Error("协议 16778617 转生信息更新包为空");e.BornModel.instance.updateInfo(t)},a.prototype.era=function(){this.publish(2098253,null)},a.prototype.errReply=function(t){var e=t[0];s.codeDispose(e,"转生成功")},a.prototype.fastEra=function(){this.publish(2098255,null)},a.prototype.fastEraReply=function(t){var e=t[0];e||WindowManager.instance.close(42),s.codeDispose(e,"使用成功")},a.prototype.drawEraTask=function(t){this.publish(2098256,[t])},a.prototype.drawEraTaskReply=function(t){var e=t[0];s.codeDispose(e,"领取成功")},o=a,e.BornCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.exercise||(t.exercise={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.common.CommonUtil,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16779016,this.updataReply),this.subscribe(16779017,this.updataReply),this.subscribe(16779018,this.updataTask),this.subscribe(16779019,this.LLTaskAward),this.subscribe(16779020,this.LLDayAward),this.getLilianInfo()},r.prototype.getLilianInfo=function(){this.publish(2098652,null)},r.prototype.updataReply=function(t){e.ExerciseModel.instance.saveData(t)},r.prototype.updataTask=function(t){e.ExerciseModel.instance.saveTaskData(t)},r.prototype.LLTaskAward=function(t){t[0]?o.noticeError(t[0]):(GlobalData.dispatcher.event("LILIAN_UPDATA_TASK_LIST"),e.ExerciseModel.instance.setDotDis())},r.prototype.LLDayAward=function(t){t[0]?o.noticeError(t[0]):(s.instance.addNotice("领取成功"),e.ExerciseModel.instance.setDotDis())},r.prototype.getLiLianTaskAward=function(t){this.publish(2098653,[t])},r.prototype.getLiLianDayAward=function(){this.publish(2098654,null)},a=r,e.ExerciseCrtl=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.magicPosition||(t.magicPosition={}),n=t.core.BaseCtrl,s=t.common.CommonUtil,i=n,__extends(a,i),Object.defineProperty(a,"Instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16779116,this.getXianweiInfoReply),this.subscribe(16779117,this.updateXianweiAll),this.subscribe(16779118,this.updateXianweiTask),this.subscribe(16779119,this.getXianweiTaskAwardReply),this.subscribe(16779120,this.getXianweiDayAwardReply),FuncOpenCtrl.instance.registeFuncReq(10,2098752),this.getXianweiInfo()},a.prototype.getXianweiInfo=function(){this.publish(2098752,null)},a.prototype.getXianweiInfoReply=function(t){e.MagicPositionModel.Instance.dataInit(t)},a.prototype.updateXianweiAll=function(t){e.MagicPositionModel.Instance.updateData(t)},a.prototype.updateXianweiTask=function(t){e.MagicPositionModel.Instance.updataXianweiTask(t[0])},a.prototype.getXianweiTaskAwardReply=function(t){var e=t[0];0!=e?s.noticeError(e):GlobalData.dispatcher.event("MAGIC_POSITION_GET_AWARD")},a.prototype.getXianweiDayAwardReply=function(t){var e=t[0];0!=e&&s.noticeError(e)},a.prototype.getTaskAward=function(t){this.publish(2098753,[t])},a.prototype.getDailyAward=function(t){this.publish(2098754,[t])},a._instance=new a,o=a,e.MagicPositionCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.warDisplay||(t.warDisplay={}),n=t.core.BaseCtrl,s=t.player.PlayerModel,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return a._instance=a._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("PLAYER_UPDATE_FIGHT",this.openwardisplay)},a.prototype.openwardisplay=function(){if(s.instance.fight>s.instance.beforefight)if(WindowManager.instance.isOpened(86)){var t=WindowManager.instance.getPanelById(86);t&&t.updataWar()}else WindowManager.instance.open(86)},o=a,e.WarDisplayCtrl=o}(modules=modules||{}),function(a){var r,t,e,i,n,s,o,l,h;function c(){return null!==t&&t.apply(this,arguments)||this}r=a.bossHome||(a.bossHome={}),e=a.core.BaseCtrl,i=a.dungeon.DungeonCtrl,n=game.misc.LogUtils,s=a.bossDungeon.BossDungeonModel,o=a.config.SceneHomeBossCfg,l=a.notice.SystemNoticeManager,t=e,__extends(c,t),Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.setup=function(){CustomDataCtrl.instance.getCustomizeData([45]),this.subscribe(16777440,this.updateOpenTimes),this.subscribe(16777439,this.getOpenTimesReply),this.subscribe(16778431,this.updateBossState),this.subscribe(16778432,this.updateBossDropOwns),this.onGlobal("PLAYER_UPDATE_LEVEL",this.updateLevel),this.onGlobal("BOSS_HOME_BOSS_DEAD",this.bossDeadHandler),this.onGlobal("BOSS_HOME_FIND_PATH_STATE_CHANGE",this.stateChangeHandler),this.getOpenTimes()},c.prototype.updateBossDropOwns=function(t){console.log("更新怪物归属...................",t),s.instance.updateBossDropOwns(t[0])},c.prototype.updateBossState=function(t){a.forbiddenBoss.ForbiddenBossModel.instance.layerBossLevel=t[1],DungeonModel.instance.updateBossInfos(t[0])},c.prototype.getOpenTimes=function(){n.info(10,"获取宝箱打开次数............."),this.publish(2097166,null)},c.prototype.getOpenTimesReply=function(t){n.info(10,"获取副本次数返回................."+t),r.BossHomeModel.instance.updateOpenTimes(t[0])},c.prototype.updateOpenTimes=function(t){n.info(10,"更新副本次数................."+t),r.BossHomeModel.instance.updateOpenTimes(t[0])},c.prototype.setFollowBoss=function(t,e){i.instance.setFollowBoss(t,e)},c.prototype.reqEnterScene=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),i.instance.reqEnterScene(t,e)},c.prototype.updateLevel=function(){var t=DungeonModel.instance.follows;if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n[1]){var s=n[0];o.instance.getCfgByBossId(s)&&r.BossHomeModel.instance.checkPlayerLevelHeigh(s)&&this.setFollowBoss(s,!1)}}},c.prototype.bossDeadHandler=function(t){if(a.zhizun.ZhizunModel.instance.state)if(s.instance.getBossOnwer(t)!==PlayerModel.instance.actorId||r.BossHomeModel.instance.checkPlayerLevelHeigh(t))this.findPath(t);else{r.BossHomeModel.instance.findPathState=0;var e=a.customData.CustomDataModel.instance.getCustomDataByKey(45),i=!!e&&!!e[0],n=a.zhizun.ZhizunModel.instance.state;i&&n?this.findPath(t):Laya.timer.once(6e4,this,this.findPath)}},c.prototype.findPath=function(t){if(void 0===t&&(t=0),12==a.scene.SceneUtil.currScene){var e=!(r.BossHomeModel.instance.findPathState=3),i=r.BossHomeModel.instance.bossIds;if(i){for(var n=i.length-1;0<=n;n--){var s=i[n];if(s!==t){var o=DungeonModel.instance.getBossInfoById(s);if(o&&!o[2][0]&&DungeonModel.instance.getFollowBossById(s)){r.BossHomeModel.instance.setSelectTarget(s,!0),e=!0;break}}}e||!DungeonModel.instance.enterSceneBySupreme||r.BossHomeModel.instance.manual||(l.instance.addNotice("当前无已关注的存活BOSS，5秒后自动退出副本",!0),Laya.timer.once(5e3,this,this.exit))}}else console.log("当前非 boss直接场景 中断逻辑！")},c.prototype.exit=function(){DungeonModel.instance.enterSceneBySupreme&&!r.BossHomeModel.instance.manual&&i.instance.reqEnterScene()},c.prototype.stateChangeHandler=function(){var t=r.BossHomeModel.instance.findPathState;1===t?Laya.timer.clear(this,this.findPath):2===t&&(Laya.timer.clear(this,this.findPath),this.findPath())},c.prototype.clearFindPath=function(){Laya.timer.clear(this,this.findPath),Laya.timer.clear(this,this.exit)},h=c,r.BossHomeCtrl=h}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.store||(t.store={}),n=t.core.BaseCtrl,s=game.misc.LogUtils,o=t.common.CommonUtil,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16779716,this.GetMallInfoReply),this.subscribe(16779717,this.UpdateMallInfo),this.subscribe(16779718,this.BuyMallItemReply),s.enable(5),this.subscribe(16781146,this.GetXianFuMall2InfoReply),this.subscribe(16781147,this.BuyXianFuMall2GoodsReply),this.subscribe(16781148,this.F5XianFuMall2Reply),this.GetYuGeInfo(),this.publish(2099352,null)},r.prototype.GetMallInfoReply=function(t){e.StoreModel.instance.GetMallInfo=t[0]},r.prototype.UpdateMallInfo=function(t){e.StoreModel.instance.UpdateMallInfo=t[0]},r.prototype.BuyMallItemReply=function(t){12012==(e.StoreModel.instance.PurchaseReply=t)[0]?o.goldNotEnoughAlert():o.noticeError(t[0])},r.prototype.GetYuGeInfo=function(){this.publish(2100773,null)},r.prototype.BuyYuGeGoods=function(t){this.publish(2100774,[t])},r.prototype.F5YuGe=function(){this.publish(2100775,null)},r.prototype.GetXianFuMall2InfoReply=function(t){e.StoreModel.instance.idList=t[0],e.StoreModel.instance.f5Time=t[1],GlobalData.dispatcher.event("STORE_XIANFU_UPDATE")},r.prototype.BuyXianFuMall2GoodsReply=function(t){var e=t[0];o.codeDispose(e,"购买成功")},r.prototype.F5XianFuMall2Reply=function(t){var e=t[0];o.codeDispose(e,"刷新成功")},a=r,e.StoreCtrl=a}(modules=modules||{}),function(e){var i,t,n,s,o,a,r,l;function h(){return t.call(this)||this}i=e.vip||(e.vip={}),n=e.core.BaseCtrl,s=e.common.CommonUtil,o=e.funcOpen.FuncOpenModel,a=e.scene.SceneModel,r=e.config.SceneCfg,t=n,__extends(h,t),Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.setup=function(){this.subscribe(16779816,this.getVipInfoReply),this.subscribe(16779817,this.updateVipInfo),this.subscribe(16779818,this.getVipRewardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.redPointControl),this.subscribe(16779820,this.updatePrivilege),this.subscribe(16779819,this.getPrivilegeReply),this.subscribe(16779821,this.getVipDayRewardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("VIPF_UPDATE",i.VipModel.instance.setActionOpen),this.getPrivilege(),this.getVIPInfo()},h.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(47==t[e]&&o.instance.getFuncIsOpen(47))return i.VipModel.instance.setActionOpen(),void i.VipModel.instance.checkHasRP()},h.prototype.getPrivilege=function(){this.publish(2099454,null)},h.prototype.getVipDayReward=function(){this.publish(2099455,null)},h.prototype.getVIPInfo=function(){this.publish(2099452,null)},h.prototype.redPointControl=function(){i.VipModel.instance.checkHasRP()},h.prototype.getVipDayRewardReply=function(t){var e=t[0];0!=e&&s.noticeError(e)},h.prototype.getVipInfoReply=function(t){i.VipModel.instance.initVipInfo(t)},h.prototype.updateVipInfo=function(t){console.log("更新vip信息",t),e.vip.VipModel.instance.vipLevel!=t[0]&&this.showVipAndSvipUpItem(),i.VipModel.instance.updateVipInfo(t)},h.prototype.showVipAndSvipUpItem=function(){e.vip_new.VipNewModel.instance.isUp=!0,0===r.instance.getCfgById(a.instance.enterScene[0])[7]&&(e.scene.SceneModel.instance.isInMission||(WindowManager.instance.open(392),e.vip_new.VipNewModel.instance.isUp=!1))},h.prototype.getVipReward=function(t){this.publish(2099453,[t])},h.prototype.getVipRewardReply=function(t){var e=t[0];0!=e?s.noticeError(e):GlobalData.dispatcher.event("VIP_GET_REWARD")},h.prototype.getPrivilegeReply=function(t){i.VipModel.instance.setPrivilegeInfo(t[0])},h.prototype.updatePrivilege=function(t){i.VipModel.instance.updatePrivilegeInfo(t[0])},l=h,i.VipCtrl=l}(modules=modules||{}),function(e){var i,t,n,s;function o(){return t.call(this)||this}i=e.dailyDemon||(e.dailyDemon={}),n=e.core.BaseCtrl,t=n,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16780516,this.updateXiangyaoDataReply),this.subscribe(16780517,this.getXiangyaoRewardReply),this.getXiangyaoState()},o.prototype.getXiangyaoState=function(){this.publish(2100052,null)},o.prototype.updateXiangyaoDataReply=function(t){t&&i.DailyDemonModel.instance.saveData(t)},o.prototype.getXiangyaoReward=function(t){this.publish(2100053,t)},o.prototype.getXiangyaoRewardReply=function(t){e.common.CommonUtil.noticeError(t[0])},s=o,i.DailyDemonCtrl=s}(modules=modules||{}),function(t){var e,i;function n(){}e=t.login||(t.login={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"serverZones",{get:function(){return this._serverZones},set:function(t){this._serverZones=t,GlobalData.dispatcher.event("SERVER_LIST_UPDATE")},enumerable:!0,configurable:!0}),n.prototype.updateZone=function(t,e){this._serverZones[t]=e,GlobalData.dispatcher.event("SERVER_ZONE_UPDATE",[t,e])},Object.defineProperty(n.prototype,"serverZoneNames",{get:function(){return this._serverZoneNames},set:function(t){this._serverZoneNames=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedServer",{get:function(){return this._selectedServer},set:function(t){this._selectedServer=t,GlobalData.dispatcher.event("SELECT_SERVER")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasReq",{get:function(){return this._hasReq},set:function(t){this._hasReq=t},enumerable:!0,configurable:!0}),i=n,e.LoginModel=i}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return i.call(this)||this}e=t.fairy||(t.fairy={}),n=t.core.WindowManager,s=t.notice.SystemNoticeManager,o=t.core.BaseCtrl,a=t.common.CommonUtil,i=o,__extends(l,i),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.subscribe(16782326,this.updateFairyInfo),this.subscribe(16782333,this.updateFairyInfo),this.subscribe(16782331,this.refreshFairyReply),this.subscribe(16782330,this.interceptFairyReply),this.subscribe(16782327,this.getFairyLogReply),this.subscribe(16782328,this.updateFairyLog),this.subscribe(16782329,this.escortFairyReply),this.subscribe(16782332,this.selectFairyReply),this.subscribe(16782335,this.getFairyAwardReply),this.subscribe(16782334,this.getFairyEscortListReply),this.subscribe(16782336,this.updateOtherFairyInfo),this.getFairyInfo()},l.prototype.getFairyInfo=function(){this.publish(2102062,null)},l.prototype.updateFairyInfo=function(t){e.FairyModel.instance.getFairyInfoReply(t)},l.prototype.getFairyEscortList=function(){this.publish(3145828,[PlayerModel.instance.actorId,0])},l.prototype.getFairyEscortListReply=function(t){e.FairyModel.instance.getFairyEscortListReply(t)},l.prototype.refreshFairy=function(){this.publish(2102066,null)},l.prototype.refreshFairyReply=function(t){var e=t[0];e?a.noticeError(e):s.instance.addNotice("刷新成功")},l.prototype.getFairyLog=function(){this.publish(2102063,null)},l.prototype.getFairyLogReply=function(t){e.FairyModel.instance.getFairyLogReply(t)},l.prototype.updateFairyLog=function(t){e.FairyModel.instance.updateFairyLog(t),n.instance.isOpened(227)&&t[0][3]&&n.instance.open(240)},l.prototype.getFairyPanelInfo=function(t){this.publish(3145829,t)},l.prototype.delFairyPanelInfoRecord=function(t){this.publish(3145830,t)},l.prototype.updateOtherFairyInfo=function(t){e.FairyModel.instance.updateOtherFairyInfo(t)},l.prototype.escortFairy=function(){this.publish(2102064,null)},l.prototype.escortFairyReply=function(t){var e=t[0];e?a.noticeError(e):s.instance.addNotice("开始护送")},l.prototype.interceptFairy=function(t){this.publish(2102065,t)},l.prototype.interceptFairyReply=function(t){var e=t[0];e?a.noticeError(e):(s.instance.addNotice("开始拦截"),n.instance.close(228))},l.prototype.selectBestFairy=function(){this.publish(2102067,null)},l.prototype.selectFairyReply=function(t){var e=t[0];e?a.noticeError(e):s.instance.addNotice("选择最高品质仙女")},l.prototype.getFairyAward=function(){this.publish(2102068,null)},l.prototype.getFairyAwardReply=function(t){var e=t[0];e?a.noticeError(e):s.instance.addNotice("领取奖励成功")},r=l,e.FairyCtrl=r}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.shenqi||(t.shenqi={}),n=t.core.BaseCtrl,s=t.config.ShenqiCfg,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16783927,this.getFragmentReply),this.subscribe(16783926,this.ShenqiReply),this.subscribe(16783928,this.activateShenQiReply),this.subscribe(16783929,this.updateFragmentList),this.publish(2103662,null)},a.prototype.ShenqiReply=function(t){i.ShenqiModel.instance.getShenQiInfoReply(t)},a.prototype.getFragmentReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.activateShenQiReply=function(t){if(0==t[0]){var e=s.instance.getCfgById(i.ShenqiModel.instance.shenqi.length-1);WindowManager.instance.openDialog(92,[e[8],11])}else CommonUtil.noticeError(t[0])},a.prototype.updateFragmentList=function(t){i.ShenqiModel.instance.updateFragmentList(t)},a.prototype.activateShenQi=function(){this.publish(2103664,null)},a.prototype.equipFragment=function(t){this.publish(2103663,t)},a.prototype.getShenQiInfo=function(){this.publish(2103662,null)},o=a,i.ShenqiCtrl=o}(modules=modules||{}),function(h){var l,o,t;function c(){}l=h.common_group||(h.common_group={}),o=Laya.Handler,c.getNoMoreNoticeIdByTeamType=function(t){return this.NoMoreNoticeIdArr[this.TeamTypeArr.indexOf(t)]},c.getActionOpenIdBySceneId=function(t){return this.ActionOpenIdArr[this.SceneIdArr.indexOf(t)]},c.getTeamTypeByBroadcastId=function(t){return this.TeamTypeArr[this.BroadcastIdArr.indexOf(t)]},c.getTeamTypeExByActionOpenId=function(t){return this.TeamTypeArr[this.ActionOpenIdArr.indexOf(t)]},c.getSceneTypeExByTeamType=function(t){return this.SceneTypeExArr[this.TeamTypeArr.indexOf(t)]},c.getSceneIdBySceneTypeEx=function(t){return this.SceneIdArr[this.SceneTypeExArr.indexOf(t)]},c.getSceneIdByTeamType=function(t){return this.SceneIdArr[this.TeamTypeArr.indexOf(t)]},c.getBroadcastIdByTeamType=function(t){return this.BroadcastIdArr[this.TeamTypeArr.indexOf(t)]},c.getTeamTypeBySceneId=function(t){return this.TeamTypeArr[this.SceneIdArr.indexOf(t)]},c.isOpenTeamScene=function(t,e){void 0===e&&(e=!1);var i=DungeonModel.instance.getCopySceneStateByType(t),n=i?i[2]:4;return e&&1===n||2===n},c.notTeamCopyIsMatching=function(){return 1===l.CommonGroupModel.instance.state},c.closeAllTeamAlert=function(){WindowManager.instance.close(1534),WindowManager.instance.close(1535),WindowManager.instance.close(1536),WindowManager.instance.close(1537),WindowManager.instance.close(1538),WindowManager.instance.close(1539),WindowManager.instance.close(1540),WindowManager.instance.close(1541),WindowManager.instance.close(1543)},c.notTeamCopyIsTeaming=function(){return!!this.isMyHaveTeam()&&(WindowManager.instance.open(1536,[0,0]),!0)},c.isOtherTeam=function(t,e){return void 0===e&&(e=!0),!!this.isMyHaveTeam()&&(l.CommonGroupModel.instance.teamType!=t[0]||l.CommonGroupModel.instance.teamType===t[0]&&l.CommonGroupModel.instance.sceneLevelTeam!=t[1])&&(l.CommonGroupModel.instance.isHomeowners?e?WindowManager.instance.open(1535,t):l.CommonGroupCtrl.instance.TeamSetType(t):e?WindowManager.instance.open(1536,t):l.CommonGroupCtrl.instance.kickTeamerEx(PlayerModel.instance.actorId),!0)},c.teamBtnHearl=function(t){if(c.isOtherTeam([t,0]))return!0;this.isOpenRoom(t)},c.OldCopyTeamIsOtherTeam=function(t){return CommonUtil.whetherInCopy()?(CommonUtil.notChangeTips(),!0):!!c.isOtherTeam([t,0])||!!this.isMyHaveTeam()&&(l.CommonGroupCtrl.instance.teamEnterScene(),!0)},c.OldCopyTeamIsOtherTeam1=function(t,e){CommonUtil.whetherInCopy()?CommonUtil.notChangeTips():c.isOtherTeam([t,e])||(this.isMyHaveTeam()?l.CommonGroupCtrl.instance.teamEnterScene():h.dungeon.DungeonCtrl.instance.reqEnterScene(this.getSceneIdByTeamType(t),e))},c.thePlayerIsMyTeam=function(t){return-1!=l.CommonGroupModel.instance.membersObjId.indexOf(t)},c.isMyHaveTeam=function(){return this.thePlayerIsMyTeam(PlayerModel.instance.actorId)},c.getTextByType=function(t){var e=t[0],i=t[1];c.isPublicTsScene(c.getSceneTypeExByTeamType(e))&&(i=0);var n=this.getSceneIdByTeamType(e),s=h.config.TeamSceneCfg.instance.getCfg(n,i);if(s){var o=s[3];return 2801===n?o[0]+"·"+o[1]:0===i?""+o[0]:o[0]+"·"+o[1]+"·"+o[2]}return"无"},c.isOpenTeamWin=function(t){this.createRoom(t,!0)},c.createRoomOrMatch=function(t,e){if(void 0===e&&(e=!0),CommonUtil.whetherInCopy())return CommonUtil.notChangeTips(),!0;if(c.isOtherTeam([t,0]))return!0;if(e)switch(t){case 1:if(!h.faerie_demon.FaerieDemonModel.instance.isHaveNum()&&!h.faerie_demon.FaerieDemonModel.instance.isHaveNum1())return CommonUtil.noticeError(11020),!0;break;case 3:if(h.teamBattle.TeamBattleModel.Instance.remainTimes<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 2:if(h.nothingness_world.NothingnessWorldModel.instance.nowChallengeNum<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 4:if(h.nether_world.NetherWorldModel.instance.nowChallengeNum<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0}return!1},c.createRoom=function(t,e,i,n){var s=this;void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),this.createRoomOrMatch(t,!1)||(e||!i||!h.windCloud.WindCloudModel.instance.isWaitingForMatch||n?e?c.isMyHaveTeam()||l.CommonGroupCtrl.instance.createTeamEx(t,0,0):this.isOpenRoom(t):CommonUtil.alert("温馨提示","风云擂台的擂台赛即将开始，进入副本内将无法进入擂台赛，是否仍然继续？"+CommonUtil.formatHtmlStrByColor("#ff3e3e","（未进入擂台赛将视作放弃本轮挑战）"),[o.create(this,function(){s.matchBtnHandler(t,i,!0)})],[]))},c.matchBtnHandler=function(t,e,i){var n=this;if(void 0===e&&(e=!1),void 0===i&&(i=!1),c.isMyHaveTeam()&&t===l.CommonGroupModel.instance.teamType)CommonUtil.noticeError(0,"已加入队伍",!0);else if(!this.createRoomOrMatch(t))if(e&&h.windCloud.WindCloudModel.instance.isWaitingForMatch&&!i)CommonUtil.alert("温馨提示","风云擂台的擂台赛即将开始，进入副本内将无法进入擂台赛，是否仍然继续？"+CommonUtil.formatHtmlStrByColor("#ff3e3e","（未进入擂台赛将视作放弃本轮挑战）"),[o.create(this,function(){n.matchBtnHandler(t,e,!0)})],[]);else if(c.isMyHaveTeam())this.isOpenRoom(t);else{if(1===t&&!c.isOpenTeamScene(38))return void CommonUtil.noticeError(0,"活动未开启",!0);h.common_group.CommonGroupCtrl.instance.mateTeamerEx(t),WindowManager.instance.open(1533,t)}},c.getTpyeAndLevel=function(t){return[0<t?Math.floor(t/10):0,0<t?t%10:0]},c.getTpyeAndLevelInx=function(t){var e=this.getTpyeAndLevel(t);return[e[0],0<e[1]?e[1]-1:0]},c.isPublicScene=function(t){return-1!=this.PublicScene.indexOf(t)&&(42!==t||1===h.scene.SceneUtil.curSceneLv)},c.inCopyIsTeamScence=function(t){return void 0===t&&(t=h.scene.SceneUtil.currScene),-1!=this.SceneTypeExArr.indexOf(t)&&(42!==t||1===h.scene.SceneUtil.curSceneLv)},c.isPublicTsScene=function(t){return-1!=this.PublicTsScene.indexOf(t)},c.getIsOpenBySceneID=function(t,e,i,n,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=0),void 0===s&&(s=!1);var o=h.config.TeamSceneCfg.instance.getCfgFirst(t);if(o){var a=o[2];if(h.funcOpen.FuncOpenModel.instance.getFuncIsOpen(a)){switch(t){case 2501:if(e&&!this.isOpenTeamScene(38,!0))return s&&CommonUtil.noticeError(0,"活动未开启",!0),!1;break;case 2801:if(e&&!this.isOpenTeamScene(42,!0))return s&&CommonUtil.noticeError(0,"活动未开启",!0),!1;break;case 4201:if(e&&!h.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(s))return!1;break;case 3201:if(e&&!this.isOpenTeamScene(44,!0))return s&&CommonUtil.noticeError(0,"活动未开启",!0),!1;break;case 2391:if(i&&h.spiritDungeon.SpiritDungeonModel.instance.selectType(c.getTpyeAndLevel(n)[0]+1))return!1;break;case 3501:var r=c.getTpyeAndLevel(n)[0]+1;if(i&&!h.divinatory_card.DivinatoryCardModel.instance.getState(r))return h.config.DivinatoryCardActionCfg.instance.feishengNotice(r,!0),!1;break;case 3701:var l=h.config.SceneShowEquipBossCfg.instance.tab[c.getTpyeAndLevel(n)[0]];if(i&&h.showEquip.ShowEquipModel.instance.IsShowNoticeTipsByType(l))return!1}return!0}s&&CommonUtil.noticeError(0,h.funcOpen.FuncOpenModel.instance.getFuncOpenTipById(a),!0)}return!1},c.isOpenRoom=function(t){void 0===t&&(t=null),WindowManager.instance.isOpened(1542)||WindowManager.instance.open(1542,t)},c.inTeamCopyOpen=function(t){if(void 0===t&&(t=!0),CommonUtil.whetherInCopy()&&c.isPublicScene(h.scene.SceneUtil.currScene)&&!this.isMyHaveTeam()){var e=h.scene.SceneUtil.currScene,i=h.scene.SceneUtil.curSceneLv;switch(l.CommonGroupModel.instance.sceneId=c.getSceneIdBySceneTypeEx(e),e){case 35:var n=h.config.SceneYuanShenBossCfg.instance.getCfgByLayer(i);l.CommonGroupModel.instance.sceneLevel=n[1];break;case 47:var s=h.config.SceneDivinatoryBossCfg.instance.bosslist[i][0];l.CommonGroupModel.instance.sceneLevel=s[1];break;case 49:var o=h.config.SceneShowEquipBossCfg.instance.bosslist[i-1][0];l.CommonGroupModel.instance.sceneLevel=o[1];break;case 54:case 44:case 42:l.CommonGroupModel.instance.sceneLevel=0}}t&&WindowManager.instance.open(1542)},c.getHanHuaName=function(t){var e="";switch(t){case 1:e="九州频道";break;case 4:e="仙盟频道";break;case 6:e="战队频道"}return e},c.getLeaderwhetherInCopy=function(){if(this.isMyHaveTeam()){var t=l.CommonGroupModel.instance.leaderTeamer;if(t){var e=t[4];return 4===e?0:1===e?1:e}}return 0},c.getMywhetherInCopy=function(){return CommonUtil.whetherInCopy()?c.isPublicScene(h.scene.SceneUtil.currScene)?3:2:1},c.chatHyperlinksClick=function(t,e,i,n,s,o){void 0===t&&(t=!0),void 0===e&&(e=!0);var a=this.getTeamTypeExByActionOpenId(i),r=this.getSceneIdByTeamType(a);if(this.isMyHaveTeam())return n===l.CommonGroupModel.instance.teamId?CommonUtil.noticeError(0,"已在队伍中",!1):CommonUtil.noticeError(0,"已有队伍",!1),!0;if(e&&!l.CommonGroupModel.instance.inApplied(n))return CommonUtil.noticeError(0,"已在审核列表中请稍等",!0),!0;if(CommonUtil.whetherInCopy()){if(!c.isPublicScene(h.scene.SceneUtil.currScene))return CommonUtil.noticeError(0,e?"正在进行副本不可发起申请":"正在进行副本",!0),!0;if(this.getSceneTypeExByTeamType(a)!=h.scene.SceneUtil.currScene)return CommonUtil.noticeError(0,e?"当前场景不可申请此目标队伍":"当前场景无法加入此队伍",!0),!0}if(!this.getIsOpenBySceneID(r,!1,!0,o,!0))return!0;switch(a){case 1:if(t&&!h.faerie_demon.FaerieDemonModel.instance.isHaveNum()&&!h.faerie_demon.FaerieDemonModel.instance.isHaveNum1())return CommonUtil.noticeError(11020),!0;break;case 2:if(t&&h.nothingness_world.NothingnessWorldModel.instance.nowChallengeNum<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 3:if(t&&h.teamBattle.TeamBattleModel.Instance.remainTimes<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 4:if(t&&h.nether_world.NetherWorldModel.instance.nowChallengeNum<=0)return CommonUtil.noticeError(0,"挑战次数不足",!0),!0;break;case 5:case 6:case 7:case 8:break;case 9:if(-1===h.warband.WarbandModel.instance.leaderId?(CommonUtil.noticeError(0,"此玩法只能加入自己战队队伍,您尚未加入战队",!0),1):!h.warband.WarbandModel.instance.isMyWarBandPeople(s)&&(CommonUtil.noticeError(0,"此玩法只能加入自己战队队伍",!0),1))return!0;break;case 10:if(h.faction.FactionModel.instance.hasFaction?!h.faction.FactionModel.instance.isTongXianMeng(s)&&(CommonUtil.noticeError(0,"此玩法只能加入自己仙盟队伍",!0),1):(CommonUtil.noticeError(0,"此玩法只能加入自己仙盟队伍,您尚未加入仙盟",!0),1))return!0}return e&&(n&&s&&(l.CommonGroupCtrl.instance.applyTeamerEx(n,s,a,o),l.CommonGroupModel.instance.TeamsThatHaveAlreadyApplied.set(n,[n,GlobalData.serverTime])),GlobalData.dispatcher.event("GET_TEAM_LIST_REPLY")),!1},c.IsItSatisfied=function(){return 1==c.getMywhetherInCopy()&&3==c.getLeaderwhetherInCopy()&&c.isPublicScene(c.getSceneTypeExByTeamType(l.CommonGroupModel.instance.teamType))},c.IsItSatisfied1=function(){return 1==c.getMywhetherInCopy()&&c.teammateInCopy()&&!c.isPublicScene(c.getSceneTypeExByTeamType(l.CommonGroupModel.instance.teamType))},c.teammateInCopy=function(){if(this.isMyHaveTeam())for(var t=0;t<l.CommonGroupModel.instance.members.length;t++){var e=l.CommonGroupModel.instance.members[t];if(e&&3===e[4])return!0}return!1},c.changLose=function(){c.isMyHaveTeam()&&h.common_group.CommonGroupModel.instance.isHomeowners&&(h.common_group.CommonGroupModel.instance.changeLose(),WindowManager.instance.close(1541))},c.SceneIdArr=[2501,2701,2091,4001,2391,3501,3701,3201,4201,2801],c.TeamTypeArr=[1,2,3,4,5,6,7,8,9,10],c.SceneTypeExArr=[38,40,9,52,35,47,49,44,54,42],c.BroadcastIdArr=[49,68,94,98,129,130,131,132,133,134],c.ActionOpenIdArr=[377,633,43,918,354,837,852,777,943,698],c.NoMoreNoticeIdArr=[18,9,10,11,12,13,14,15,16,17],c.PublicScene=[35,47,49,54,44,42],c.PublicTsScene=[54,44,42],t=c,l.CommonGroupUtil=t}(modules=modules||{});var ResourcePool=base.assets.ResourcePool,MaterialInitializer=base.materials.MaterialInitializer,Browser=Laya.Browser,Font=Laya.Font,BagCtrl=modules.bag.BagCtrl,BornCtrl=modules.born.BornCtrl,BossHomeCtrl=modules.bossHome.BossHomeCtrl,ChatCtrl=modules.chat.ChatCtrl,CommonConfig=modules.common.CommonConfig,GlobalData=modules.common.GlobalData,PlatParams=modules.common.PlatParams,WindowManager=modules.core.WindowManager,CreateRoleCtrl=modules.createRole.CreateRoleCtrl,EmailCtrl=modules.email.EmailCtrl,ExerciseCrtl=modules.exercise.ExerciseCrtl,FuncOpenCtrl=modules.funcOpen.FuncOpenCtrl,IllusionCtrl=modules.illusion.IllusionCtrl,LayerManager=modules.layer.LayerManager,MagicArtCtrl=modules.magicArt.MagicArtCtrl,PetCtrl=modules.pet.PetCtrl,MagicPositionCtrl=modules.magicPosition.MagicPositionCtrl,PlayerCtrl=modules.player.PlayerCtrl,PlayerModel=modules.player.PlayerModel,SceneCtrl=modules.scene.SceneCtrl,StoreCtrl=modules.store.StoreCtrl,TaskCtrl=modules.task.TaskCtrl,VipCtrl=modules.vip.VipCtrl,WarDisplayCtrl=modules.warDisplay.WarDisplayCtrl,Channel=net.Channel,ArrayUtils=utils.ArrayUtils,TweenJS=utils.tween.TweenJS,DailyDemonCtrl=modules.dailyDemon.DailyDemonCtrl,InitCommand=base.background.InitCommand,InitCompleteCommand=base.background.InitCompleteCommand,LoginModel=modules.login.LoginModel,FairyCtrl=modules.fairy.FairyCtrl,TraceUtils=utils.TraceUtils,StringUtils=utils.StringUtils,SnowflakeParticleBundle=base.particle.snowflake.SnowflakeParticleBundle,MapUtils=game.map.MapUtils,Input=Laya.Input,Render=Laya.Render,Handler=Laya.Handler,AssetPoolBase=base.assets.AssetPoolBase,CommonUtil=modules.common.CommonUtil,CommonGroupUtil=modules.common_group.CommonGroupUtil,AvatarDataPool=base.mesh.AvatarDataPool,ShenqiCtrl=modules.shenqi.ShenqiCtrl,BossHomeModel=modules.bossHome.BossHomeModel,DungeonModel=modules.dungeon.DungeonModel,ErrorCodeCfg=modules.config.ErrorCodeCfg,Role=game.role.Role,GameCenter=game.GameCenter,SoundManager=Laya.SoundManager,CustomDataCtrl=modules.customData.CustomDataCtrl,t=window;t.ResourcePool=ResourcePool,t.MaterialInitializer=MaterialInitializer,t.Browser=Browser,t.Font=Font,t.BagCtrl=BagCtrl,t.BornCtrl=BornCtrl,t.BossHomeCtrl=BossHomeCtrl,t.ChatCtrl=ChatCtrl,t.CommonConfig=CommonConfig,t.GlobalData=GlobalData,t.PlatParams=PlatParams,t.WindowManager=WindowManager,t.CreateRoleCtrl=CreateRoleCtrl,t.EmailCtrl=EmailCtrl,t.ExerciseCrtl=ExerciseCrtl,t.FuncOpenCtrl=FuncOpenCtrl,t.IllusionCtrl=IllusionCtrl,t.LayerManager=LayerManager,t.MagicArtCtrl=MagicArtCtrl,t.PetCtrl=PetCtrl,t.MagicPositionCtrl=MagicPositionCtrl,t.PlayerCtrl=PlayerCtrl,t.PlayerModel=PlayerModel,t.SceneCtrl=SceneCtrl,t.StoreCtrl=StoreCtrl,t.TaskCtrl=TaskCtrl,t.VipCtrl=VipCtrl,t.WarDisplayCtrl=WarDisplayCtrl,t.Channel=Channel,t.ArrayUtils=ArrayUtils,t.TweenJS=TweenJS,t.DailyDemonCtrl=DailyDemonCtrl,t.LoginModel=LoginModel,t.FairyCtrl=FairyCtrl,t.TraceUtils=TraceUtils,t.StringUtils=StringUtils,t.SnowflakeParticleBundle=SnowflakeParticleBundle,t.MapUtils=MapUtils,t.Input=Input,t.Render=Render,t.Handler=Handler,t.AssetPoolBase=AssetPoolBase,t.CommonUtil=CommonUtil,t.AvatarDataPool=AvatarDataPool,t.ShenqiCtrl=ShenqiCtrl,t.BossHomeModel=BossHomeModel,t.DungeonModel=DungeonModel,t.ErrorCodeCfg=ErrorCodeCfg,t.Role=Role,t.GameCenter=GameCenter,t.SoundManager=SoundManager,t.CustomDataCtrl=CustomDataCtrl,t.modules=modules,t.ui=ui,t.game=game;var game,modules,Launcher=function(){function t(){Channel.instance.subscribe(16777216,this,this.authClientReply),Channel.instance.subscribe(16777338,this,this.synTimeReply),CreateRoleCtrl.instance.setup(),PlayerCtrl.instance.setup(),CustomDataCtrl.instance.setup(),SceneCtrl.instance.setup()}return Object.defineProperty(t,"instance",{get:function(){return t._instance=t._instance||new t},enumerable:!0,configurable:!0}),t.prototype.auth=function(t,e,i){var n=LoginModel.instance.selectedServer;Channel.instance.publish(1048576,[t,n.channel_num,n.server_num,n.sign,n.tick,PlatParams.package||0,i,n.is_white||0,n.ip_create||0,n.account_create||0])},t.prototype.authClientReply=function(t){TraceUtils.trace("authClientReply");var e=t[0];switch(e){case 0:PlayerCtrl.instance.initBaseInfo(t[1],t[2],!1);break;case 11001:PlatParams.recordStep(8),MaterialInitializer.setup(function(){base.particle.snowflake.SnowflakeParticleUtils.init(),base.particle.snowflake.SnowflakeParticleUtils.precompileShaderWithCreate(),1===PlatParams.isNoCreate?CreateRoleCtrl.instance.noCreateRoleLogin():WindowManager.instance.open(8)});break;case 10013:var i=Handler.create(this,function(){modules.common.MiniGameUtil.isMiniGame()?(WindowManager.instance.close(8),WindowManager.instance.open(244)):window.location.reload()});CommonUtil.alert("温馨提示",CommonUtil.formatHtmlStrByColor("#ff3e3e","该区服开服过久,为保证游戏体验,请前往最新区服!"),[i],null,i);break;default:if(PlatParams.recordStep(9),modules.common.MiniGameUtil.isMiniGame())Main.instance.reconnectHandler();else{var n=ErrorCodeCfg.instance.getErrorCfgById(e);n?alert("服务器登陆失败: "+n[1]):alert("服务器登陆失败: "+e)}}},t.prototype.synTimeReply=function(t){var e=Browser.now()-t[0];GlobalData.serverTime=Math.floor(t[1]+.5*e),GlobalData.localTime=Browser.now(),Laya.timer.once(6e4,this,this.syncTimeHandler)},t.prototype.syncTimeHandler=function(){Channel.instance.publish(1048677,[Browser.now()])},t}(),Main=function(){function i(t,e){this.user=t,this._statShow=!1,this._preloadOver=!1,this._channelOpen=!1,this._intervalId=0,this.assets=[],i.instance=this,GlobalData.user=t,GlobalData.startTime=Date.now(),this.init(e)}return i.prototype.openChannel=function(){PlatParams.recordStep(5),showProgressInterface(1,4,0,"正在连接服务器......"),TraceUtils.trace("Channel.instance.open"),Channel.instance.open(("https:"===Browser.window.location.protocol||modules.common.MiniGameUtil.isMiniGame()?"wss://":"ws://")+LoginModel.instance.selectedServer.server_addr+":"+LoginModel.instance.selectedServer.server_port,this,this.onChannelOpen,this.onChannelClose,this.onChannelError)},i.prototype.startLogin=function(){var o=this;Browser.container.setAttribute("style","visibility: hidden;"),MaterialInitializer.setup();var a=[["assets/entity/entity.pack",function(t,e,i){AvatarDataPool.instance.entityPack=msgpack.decode(new Uint8Array(i))},1],[PlatParams.control.words?"words_"+PlatParams.control.words+".bin":"words.bin",function(t,e,i){GlobalData.wordsStatus=i?1:-1,StringUtils.init(msgpack.decode(new Uint8Array(i)))},1],["assets/u.obj",function(t,e,i){Laya.View.uiMap=msgpack.decode(new Uint8Array(i)),o.openChannel()},1]];if(1,a.push(["assets/ps.obj",function(t,e,i){var n=msgpack.decode(new Uint8Array(i));SnowflakeParticleBundle.config=n.config;var s=Laya.Loader.preLoadedMap,o=n.meshs;for(var a in o)s[a]=o[a];for(var r in o=n.materials)s[r]=o[r]},1]),a.push(["assets/as.obj",function(t,e,i){var n=msgpack.decode(new Uint8Array(i)),s=Laya.Loader.preLoadedMap;for(var o in n)s[o]=n[o]},1]),a.push(["assets/mb.obj",function(t,e,i){var n=msgpack.decode(new Uint8Array(i));MapUtils.init(n)},1]),1!==PlatParams.isNoCreate){for(var t=["assets/entity/nvzhu_02/nvzhu_02_skin.mbd","assets/entity/nvzhu_02/nvzhu_02_stand.abd","assets/entity/sb_10/sb_10_skin.mbd","assets/entity/nanzhu_02/nanzhu_02_skin.mbd","assets/entity/nanzhu_02/nanzhu_02_stand.abd","assets/entity/sb_09/sb_09_skin.mbd"],e=function(t,e,i){null!=i&&(base.assets.HandlePool.instance.lock(e),o.assets.push(e))},i=0,n=t;i<n.length;i++){var s=n[i];a.push([s,e,1])}for(var r=0,l=t=["assets/entity/nvzhu_02/nvzhu_02.jpg","assets/entity/nanzhu_02/nanzhu_02.jpg","assets/entity/sb_09/sb_09.jpg","assets/entity/sb_10/sb_10.jpg","assets/particle/texture/dcf06a96dfc6bc6a6f1a520ebb0b09d.png","assets/particle/texture/b2b3bf7aa4c974ffd4281ac8e114ccbd.png","assets/particle/texture/8bbf71b26ecaf75b6df6adc9cee3e34c.png","assets/particle/texture/76e662685c6c59adf2a4ae381b55e.png","assets/particle/texture/8c287dfa6d3e75c49de6291ddb78a.png","assets/particle/texture/b954f454e8e370b165bf51dde713b610.png","assets/particle/texture/13968671d49ae1f791afebb42cc8388.png","assets/particle/texture/361af1bd584cc7fc446f661d137d0.png","assets/particle/texture/d1927de7651866c88bdd1bdcad803bfd.png","assets/particle/texture/be132d5b3259d8f0c9ffe063a5d198cc.png"];r<l.length;r++){s=l[r];a.push([s])}}PlatParams.recordStep(4),showProgressInterface(0,4,0,"正在加载配置文件......"),updateTotalProgress(-1),TraceUtils.reset("init");for(var h=a.length,c=function(t,e,i){for(var n=0;n<a.length;++n){var s=a[n];s[0]==t&&(null!=i&&(s[1]?s[1](t,e,i):(base.assets.HandlePool.instance.lock(e),o.assets.push(e))),ArrayUtils.removeAt(a,n))}showProgressInterface(0,4,(h-a.length)/h,"正在加载配置文件......"),0==a.length&&(o._preloadOver=!0,o.tryToAuth())},p=0;p<a.length;++p){var u=a[p];ResourcePool.instance.load(u[0],c,0,!1,!1,null!=u[2]?u[2]:0)}},i.prototype.resetUI=function(){var t=Laya.stage,e=Math.floor(t.width),i=Math.floor(t.height);i/e<1.7777778?(CommonConfig.viewWidth=Math.floor(e/(i/1280)),CommonConfig.viewHeight=1280,CommonConfig.viewScale=i/1280):(CommonConfig.viewWidth=720,CommonConfig.viewHeight=Math.floor(i/(e/720)),CommonConfig.viewScale=e/720),modules.common.MiniGameUtil.miniSystemInfoSync(),GlobalData.dispatcher.event("RESIZE_UI")},i.prototype.resetStage=function(){if(Input.isInputting&&Browser.onMobile&&!modules.common.MiniGameUtil.isMiniGame()){Browser.container.style.position="absolute";var t=parseInt(Input.inputContainer.style.top.replace("px","")),e=parseInt(Input.inputElement.style.height.replace("px",""))*CommonConfig.viewScale,i=Browser.clientWidth/Render.canvas.width;return 0<(t=Browser.clientHeight-e*i-t)&&(t=0),void(Browser.container.style.top=t+"px")}modules.common.MiniGameUtil.isMiniGame()||(Browser.container.style.top="0px");var n=Math.floor(Browser.width),s=Math.floor(Browser.height);n=n+1&2147483646,s=s+1&2147483646;var o=Laya.stage;s<n?(o.scaleMode=Laya.Stage.SCALE_NOSCALE,o.width=n,o.height=s):(o.scaleMode=Laya.Stage.SCALE_FIXED_WIDTH,modules.common.MiniGameUtil.onOppoMiniGame()||modules.common.MiniGameUtil.onVivoMiniGame()?(o.width=n,o.height=Math.floor(s/(n/n))+1&2147483646):(o.width=840,o.height=Math.floor(s/(n/840))+1&2147483646)),this.resetUI()},i.prototype.init=function(i){var o=this;if(modules.common.MiniGameUtil.initMiniGameAdpter(),Laya3D.init(0,0,!1,!1,!1)){Render.canvas.addEventListener("webglcontextlost",function(t){Render.canvas.remove(),GlobalData.isContextLost=!0,GlobalData.lostMessage=t.statusMessage}),Render.canvas.addEventListener("webglcontaxtrestored",function(t){Render.canvas.remove(),GlobalData.isContaxtRestored=!0}),Browser.container.setAttribute("style","visibility: hidden;"),Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_WIDTH,Laya.stage.screenMode=Laya.Stage.SCREEN_NONE,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,modules.common.MiniGameUtil.onOppoMiniGame()||modules.common.MiniGameUtil.onVivoMiniGame()?Laya.stage.frameRate=Laya.Stage.FRAME_FAST:Laya.stage.frameRate=Laya.Stage.FRAME_SLOW,Laya.stage.on("visibilitychange",this,function(){o._channelOpen&&Channel.instance.publish(4195125,[!Laya.stage.isVisibility])});var a=Laya.alertGlobalError=!1;Browser.window.onerror=function(t,e,i,n,s){a||(a=!0,GlobalData.recordError(t,s),CommonUtil.alert("提示","与服务器断开连接！<br/>错误码：-1",[Handler.create(o,o.reconnectHandler)],null,null,!1),modules.wx_module.wxShareCtrl.instance.openLostView(1),PlatParams.beQuit())},this.resetStage();var n=PlatParams.cdn;""!=n&&"/"!=n[n.length-1]&&(PlatParams.cdn=n+="/"),Laya.URL.rootPath=Laya.URL.basePath=modules.common.MiniGameUtil.isMiniGame()?n:"";base.background.system.IndexedDBCache.initCache(!0,function(t){modules.common.MiniGameUtil.isMiniGame()&&(t=!1),base.background.system.HttpFileSystem.init(n,!0,t,function(t){var e=new base.background.ForwardActor(base.background.system.HttpFileSystem.enableRaw&&!modules.common.MiniGameUtil.isMiniGame()?new base.background.Actor(i||n+"routine.js?v="+Date.now()):new base.background.routine.RoutineActor);o.initDevice(e),modules.common.MiniGameUtil.isMiniGame()?1===PlatParams.newRegister?o.startLogin():WindowManager.instance.open(244):o.startLogin(),i&&URL.revokeObjectURL(i)})})}else{var t=0;if(WebGLRenderingContext){var e=document.createElement("canvas");if(e.getContext("webgl")||e.getContext("webgl2"))t=2;else t=e.getContext("2d")?4:3}else t=1;var s=new Error("Webgl failure: "+t);switch(GlobalData.recordError("Uncaught Error: "+s.message,s),t){case 1:alert("WebGL环境不支持！");break;case 2:alert("渲染环境异常！");break;case 3:alert("渲染环境无法正常启动！");break;case 4:alert("3D环境初始化失败，请重启后再打开游戏！")}window.location.replace(location.href+"&random="+Math.random())}},i.prototype.initDevice=function(t){var e=this;ResourcePool.instance.init(t),Laya.timer.frameLoop(1,ResourcePool.instance,ResourcePool.instance.update),Laya.timer.frameLoop(1,null,AssetPoolBase.onUpdate),Laya.timer.frameLoop(1,null,TweenJS.update),Laya.Browser.window.addEventListener(Laya.Event.RESIZE,function(){e.resetStage()}),UIConfig.popupBgAlpha=.8,LayerManager.instance.init(),GlobalData.dispatcher.once("LOGIN_SUCCESS",this,this.loginHandler)},i.prototype.statHandler=function(t){220===t.keyCode&&(this._statShow=!this._statShow,this._statShow?Laya.Stat.show():Laya.Stat.hide())},i.prototype.onChannelOpen=function(t){PlatParams.recordStep(6),this._intervalId&&clearInterval(this._intervalId),this._intervalId=setInterval(function(){var t=GameCenter.instance.getRole(PlayerModel.instance.actorId);Channel.instance.publish(1048676,[t?t.property.get("speed"):0])},6e3),this._channelOpen=!0,this.tryToAuth()},i.prototype.tryToAuth=function(){this._channelOpen&&this._preloadOver&&(TraceUtils.trace("auth"),Launcher.instance.auth(this.user,LoginModel.instance.selectedServer.server_num,LoginModel.instance.selectedServer.status))},i.prototype.onChannelClose=function(t){this._channelOpen=!1,PlayerCtrl.lostFlag?PlayerCtrl.lostFlag=!1:(CommonUtil.alert("提示","与服务器断开连接！<br/>错误码："+t.code+"<br/>"+t.reason,[Handler.create(this,this.checkConn)],null,null,!1),modules.wx_module.wxShareCtrl.instance.openLostView(1),PlatParams.beQuit())},i.prototype.onChannelError=function(t){this._channelOpen=!1,CommonUtil.alert("提示","连接失败！",[Handler.create(this,this.reconnectHandler)],null,null,!1)},i.prototype.checkConn=function(){WindowManager.instance.open(1019,["提示","正在检测网络连接，请稍候"]),PlatParams.checkConn(this.reconnectHandler.bind(this),this.failedHandler.bind(this))},i.prototype.failedHandler=function(){var t=this;Laya.timer.once(2e3,this,function(){PlatParams.checkConn(t.reconnectHandler.bind(t),t.failedHandler.bind(t))})},i.prototype.reconnectHandler=function(){var i=this;modules.common.MiniGameUtil.isMiniGame()?(WindowManager.instance.close(1019),SceneCtrl.instance.leaveScene([MapUtils.currentID,0]),this._preloadOver=this._channelOpen=!1,window.enterFlag=!1,PlatParams.reloginSign(function(t){if(-1===t.status)alert("服务器维护中，请稍候再试"),WindowManager.instance.open(244);else{var e=LoginModel.instance.selectedServer;e.tick=t.tick,e.sign=t.sign,e.status=t.status,e.account_create=t.account_create,e.is_white=t.is_white,e.ip_create=t.ip_create,i.startLogin()}},function(){alert("重连失败，请稍候再试"),WindowManager.instance.open(244)})):-1!==window.location.href.indexOf("autoLogin")?window.location.reload():window.location.href=window.location.href+"&autoLogin=1"},i.prototype.loginHandler=function(t){Browser.container.setAttribute("style","visibility: hidden;"),Font.defaultFamily="SimHei",Font.defaultSize=24,Font.defaultColor="#4C5E8A"},i}();t.Main=Main,function(t){var e,i,n,s;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._fields={},t}e=t.role||(t.role={}),n=Laya.EventDispatcher,i=n,__extends(o,i),o.prototype.reset=function(){this.offAll(),this._fields={}},o.prototype.set=function(t,e){return this._fields[t]==e||(this._fields[t]=e,this.event(t,e)),e},o.prototype.get=function(t){return this._fields[t]},o.prototype.has=function(t){return void 0!==this._fields[t]},s=o,e.Property=s}(game=game||{}),function(e){var t,i,n,s,o;function a(t){return n.call(this,t)||this}t=e.role||(e.role={}),i=t.component||(t.component={}),s=modules.config.BlendCfg,n=t.RoleComponent,__extends(a,n),a.prototype.setup=function(){this._cd=s.instance.getCfgById(303)[1][0],this._intervals=s.instance.getCfgById(304)[1];var t=s.instance.getCfgById(302);this._talkStrs=t[2],this._lvs=t[1],this._transform=this.property.get("avatar").title.transform,this._transform.localPosition=new Laya.Vector3(0,150,0),this.owner.on("visible",this,this.visible),GlobalData.dispatcher.on("SCENE_ENTER",this,this.talk,[!0]),this.talk(!0)},a.prototype.teardown=function(){this.owner.off("visible",this,this.visible),GlobalData.dispatcher.off("SCENE_ENTER",this,this.talk)},a.prototype.talk=function(t){t?(this._bubbleBg||(this._bubbleBg=new Laya.Image,this._bubbleBg.skin="common_sg/frame_mainui_qpk.png",this._bubbleBg.sizeGrid="10,10,10,10",this._bubbleBg.width=288,this._txt=new Laya.HTMLDivElement,this._txt.pos(1e3,1500,!0),CommonUtil.setHTMLPro(this._txt,"#eaf8ff","SimHei",24),this._txt.width=264),this._txt.innerHTML=this.getTalkStr(),this._txt.style.height=this._txt.contextHeight,this._bubbleBg.height=this._txt.height+24,e.GameCenter.instance.world.publish("addToHUD",this._bubbleBg),e.GameCenter.instance.world.publish("addToHUD",this._txt),this._isShow=!0,this._time=GlobalData.serverTime+this._cd):(this._bubbleBg&&this._bubbleBg.removeSelf(),this._txt&&this._txt.removeSelf(),this._isShow=!1,this._time=GlobalData.serverTime+this._intervals[0]+Math.random()*(this._intervals[1]-this._intervals[0]))},a.prototype.visible=function(t){this._bubbleBg&&(this._bubbleBg.visible=t),this._txt&&(this._txt.visible=t)},a.prototype.update=function(){this._isShow?(this._bubbleBg.pos(this._transform.position.x-.5*this._bubbleBg.width,-this._transform.position.y-this._bubbleBg.height,!0),this._txt.pos(this._bubbleBg.x+12,this._bubbleBg.y+12,!0),GlobalData.serverTime>this._time&&this.talk(!1)):GlobalData.serverTime>this._time&&this.talk(!0)},a.prototype.getTalkStr=function(){for(var t="",e=PlayerModel.instance.level,i=0,n=this._lvs.length;i<n;i++)if(e<this._lvs[i]){var s=this._talkStrs[i].split("|");t=s[Math.floor(Math.random()*s.length)];break}return t},a.prototype.destory=function(){this._bubbleBg&&(this._bubbleBg.destroy(!0),this._bubbleBg=null),this._txt&&(this._txt.destroy(!0),this._txt=null),this._transform=null,this._talkStrs=null,this._lvs=null,this._intervals=null},o=a,i.BubbleComponent=o}(game=game||{}),function(o){var t,n,e,i,s,a,r,l;function h(t,e){var i=s.call(this,"BossChaseAndAttack")||this;return i._combat=t.getComponent(n.CombatComponent),i._locomotor=t.getComponent(n.LocomotorComponent),i._skill=t.getComponent(n.SkillComponent),i._transform=t.property.get("transform"),i._radius=e,i._model=PlayerModel.instance,i._step=0,i}t=o.role||(o.role={}),n=t.component||(t.component={}),e=n.brain||(n.brain={}),i=e.behavior||(e.behavior={}),a=o.ai.behavior.Action,r=o.map.MapUtils,s=a,__extends(h,s),h.prototype.onEnter=function(){return this._combat.owner.on("hurt",this,this.toRevenge),1===this._model.selectTargetType},h.prototype.onUpdate=function(){if(this._combat.isCooldown())return 3;if(1!=this._model.selectTargetType)return 2;switch(this._step){case 0:if(this.isValidRadius(this._transform)){var t=this.getTarget();if(this._combat.testTarget(t))this.enterAttackToBoss(t);else if(3!=this.gotoStatus())return 2}break;case 2:this._combat.isValidTarget()?this.tryGoHome():(t=this.getTarget(),this._combat.testTarget(t)?this.enterAttackToBoss(t):this.enterMoveToSpawnpoint());break;case 1:this._combat.isValidTarget()||(this.enterMoveToSpawnpoint(),WindowManager.instance.close(45))}switch(this._step){case 0:if(!this._locomotor.running()){var e=this.getTarget().property.get("pos"),i=r.nearbyPathNode(e);if(-1==i[0])return 2;e=i[1],this._locomotor.running()||((n=this._locomotor.property.get("avatar")).getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveToCoordinate(e))}break;case 2:case 1:if(this._combat.isValidRange())this._locomotor.stop(),this._combat.combat(this._skill.selectSkill());else if(!this._locomotor.running()){var n,s=this._combat.target.property.get("transform").localPosition;(n=this._locomotor.property.get("avatar")).getActionTween(0==n.immortals?"run":"stand").repeat(Number.POSITIVE_INFINITY).start(),this._locomotor.moveTo(s.x,s.y)}}return 3},h.prototype.onExit=function(){this._locomotor.stop(),this._combat.setTarget(null),this._step=0,this._combat.owner.off("hurt",this,this.toRevenge)},h.prototype.enterMoveToSpawnpoint=function(){this._locomotor.stop(),this._step=0},h.prototype.enterAttackToBoss=function(t){this._locomotor.stop(),this._combat.setTarget(t),this._step=1},h.prototype.tryGoHome=function(){if(this.isValidRadius(this._transform))return!1;var t=this.getTarget();return this._combat.testTarget(t)?this.enterAttackToBoss(t):this.enterMoveToSpawnpoint(),!0},h.prototype.gotoStatus=function(){var t=this.getTarget();if(!t)return 2;var e=t.property.get("pos");if(!e)return 2;var i=r.nearbyPathNode(e);return-1==i[0]?2:(e=i[1],this._locomotor.testCoordinate(e.x,e.y)?1:3)},h.prototype.isValidRadius=function(t){var e=this.getTarget();if(!e)return!1;var i=e.property.get("pos");if(!i)return!1;var n=t.localPosition;return r.testDistance(i.x,-i.y,n.x,n.y,this._radius)},h.prototype.getTarget=function(){var t=this._transform.localPosition;return o.GameCenter.instance.findNearbyRole(t.x,t.y,this._radius,1,this._model.selectTargetId)},h.prototype.toRevenge=function(t,e,i,n){if(1==this._step){var s=o.GameCenter.instance.getRole(t);this._combat.testTarget(s)&&3==s.property.get("type")&&(this._combat.setTarget(s),this._locomotor.stop(),this._step=2)}},l=h,i.TrahmanBossChaseAndAttack=l}(game=game||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.action_preview||(t.action_preview={}),n=t.config.ActionOpenCfg,s=t.action_preview.ActionPreviewModel,i=ui.ActionPreviewItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22,"center")},a.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.xuanZhonImg.visible=t},a.prototype.InitializeUI=function(){this.receiveTrueImg.visible=!1,this.weiJiHuoText.visible=!1,this.keLingQuText.visible=!1,this.weiJiHuoImg.visible=!0,this.xuanZhonImg.visible=!1},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this.InitializeUI(),this._date=t,this._actionID=this._date[0],this.actionImg.skin="assets/icon/ui/get_way/"+this._date[2]+".png",this.openText.text=this._date[5],this.actionText.text=n.instance.getCfgById(this._actionID)[0],this.changUI()},a.prototype.changUI=function(){var t=s.instance.getState(this._date);this.receiveTrueImg.visible=0==t,this.weiJiHuoText.visible=1==t,this.keLingQuText.visible=2==t,this.weiJiHuoImg.visible=1==t,this.RpImg.visible=2==t},o=a,e.ActionPreviewItem=o}(modules=modules||{}),function(i){var t,c,e,n,s,o,a,r,l;function h(){return null!==c&&c.apply(this,arguments)||this}t=i.activity_all||(i.activity_all={}),e=i.common.CommonUtil,n=i.common.CustomClip,s=i.notice.SystemNoticeManager,o=i.activity_all.ActivityAllModel,a=i.dungeon.DungeonCtrl,r=i.funcOpen.FuncOpenModel,c=ui.ActivityAllItemUI,__extends(h,c),h.prototype.initialize=function(){c.prototype.initialize.call(this),this._items=new Array,this._items=[this.rewardBase1,this.rewardBase2,this.rewardBase3,this.rewardBase4],this._challengeClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._challengeClip.setProperty(null,-5,-9,.8),this.challengeBtn.addChildAt(this._challengeClip,0),this._activities=[17,22,15,23]},h.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoClick(this.instructionsBtn,this,this.instructionsBtnHandler),this.onAutoClick(this.challengeBtn,this,this.challengeBtnHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.setImg)},h.prototype.close=function(){c.prototype.close.call(this),n.thisStop(this._challengeClip)},h.prototype.destroy=function(t){void 0===t&&(t=!0),this._challengeClip=this.destroyElement(this._challengeClip),this._items=this.destroyElement(this._items),this._img=this.destroyElement(this._img),c.prototype.destroy.call(this,t)},h.prototype.InitializeUI=function(){this.timeText.text="",this.timeText1.text="",this.instructionsText.text="",this.instructionsText1.text="",this.timeText3.text="",this.timeText.visible=!1,this.timeText1.visible=!1,this.instructionsText.visible=!1,this.instructionsText1.visible=!1,this.timeText3.visible=!1;for(var t=0;t<this._items.length;t++){var e=this._items[t];e&&(e.visible=!1)}},h.prototype.setData=function(t){c.prototype.setData.call(this,t),this.isDoubleImg.visible=!1,this.InitializeUI(),this._date=t,this._instructionsID=this._date[10],this._actionOpenId=this._date[11];var e=this._date[0],i=this._date[1],n=this._date[2];if(n){var s=n.split("#");this.instructionsText.text=s[0],this.timeText.text=s[1],this.instructionsText.visible=!0,this.timeText.visible=!0}var o=this._date[3];o&&(s=o.split("#"),this.instructionsText1.text=s[0],this.timeText1.text=s[1],this.instructionsText1.visible=!0,this.timeText1.visible=!0),this.BGImg.skin="assets/icon/ui/activity_all/"+i+".png",this.nameImg.skin="assets/icon/ui/activity_all/"+e+".png",this.setImg();var a=this._date[5];if(a)for(var r=0,l=a.length;r<l;r++){var h=this._items[r];h&&(h.dataSource=[a[r][0],a[r][1],0,null],h.visible=!0)}this.updateTxtePos(),this.UpdateUI()},h.prototype.UpdateUI=function(){this._state=o.instance.getState(this._data),this.challengeBtn.visible=1!=this._state,this.overImg.visible=1==this._state,0==this._state&&(this.OpenConditionText.text=r.instance.getActionUnCondition(this._actionOpenId)),this.OpenConditionText.visible=0==this._state,this.tispBox.visible=0!=this._state,this._actionOpenId=this._date[11],116==this._actionOpenId&&i.xianfu.XianfuModel.instance.xianfuEventIsOpen()||4===this._state?(n.thisPlay(this._challengeClip),this.jXImg.visible=!0):(n.thisStop(this._challengeClip),this.jXImg.visible=!1),this.sBImg.visible=!1},h.prototype.instructionsBtnHandler=function(){null!=this._instructionsID&&e.alertHelp(this._instructionsID)},h.prototype.challengeBtnHandler=function(){if(1!=this._state){var t=this._data[8],e=this._data[9];1==t?698===e?i.faction.FactionModel.instance.hasFaction?WindowManager.instance.openByActionId(e):WindowManager.instance.open(262):WindowManager.instance.openByActionId(e):2==t&&(2241==e?i.scene.SceneUtil.isCommonScene?(i.xianfu.XianfuModel.instance.panelType=0,a.instance.reqEnterScene(2241,0)):15==i.scene.SceneUtil.currScene&&s.instance.addNotice("您已在该场景中",!0):a.instance.reqEnterScene(e))}else s.instance.addNotice(r.instance.getFuncOpenTipById(this._actionOpenId),!0)},h.prototype.updateTxtePos=function(){this.timeText.x=this.instructionsText.x+this.instructionsText.width,this.timeText1.x=this.instructionsText1.x+this.instructionsText1.width},h.prototype.setImg=function(){var t=i.festival.FestivalModel.instance.isXIanYu();this.isDoubleImg.visible=t[2]&&-1!=this._activities.indexOf(this._data[7])},l=h,t.ActivityAllItem=l}(modules=modules||{}),function(t){var e,i;function n(){}e=t.activityPreview||(t.activityPreview={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sceneState",{get:function(){return this._sceneState},set:function(t){this._sceneState=t},enumerable:!0,configurable:!0}),i=n,e.ActivityPreModel=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("adventure_task")},n.prototype.getCfgById=function(t){return this._cfgs[t-1]},i=n,e.AdventureTaskCfg=i}(modules=modules||{}),function(_){var r,v,t,I,b,l,C,e;function i(){return null!==v&&v.apply(this,arguments)||this}r=_.adventure||(_.adventure={}),t=ui.AdventureItemUI,I=_.config.AdventureChildCfg,b=_.config.AdventureTaskCfg,l=_.notice.SystemNoticeManager,C=_.common.CustomClip,v=t,__extends(i,v),i.prototype.initialize=function(){v.prototype.initialize.call(this),this._items=[this.item1,this.item2,this.item3,this.item4],CommonUtil.setHTMLPro(this.taskDescTxt,"#50ff28","SimHei",22),this.taskDescTxt.style.wordWrap=!0,this._btnClip=C.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.btn.addChild(this._btnClip),this._btnClip.pos(-5,-8),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},i.prototype.onEvt=function(){v.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnClickHandler),this.onAutoGlobalEvt("ADVENTURE_EVENT_UPDATE",this,this.updateEvent),this.regGuideSpr(76,this.btn)},i.prototype.close=function(){v.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},i.prototype.destroy=function(t){void 0===t&&(t=!0),this._items=this.destroyElement(this._items),v.prototype.destroy.call(this,t)},i.prototype.btnClickHandler=function(){var t=this._data,e=t[0],i=t[1];if(0===i)WindowManager.instance.open(247,t);else if(1===i)if(1===t[4])r.AdventureCtrl.instance.getAdventureAward(e);else{var n=t[7];if(0===n)r.AdventureCtrl.instance.challenge(t);else{var s=b.instance.getCfgById(n)[3];if(0===s)return void WindowManager.instance.close(246);var o=GlobalData.getWindowConfigByFuncId(s);if(o){var a=o[0];WindowManager.instance.open(a)}else l.instance.addNotice("找不到功能id:"+s+"对应的面板信息",!0)}}else 2===i?r.AdventureCtrl.instance.challenge(t):3===i?r.AdventureCtrl.instance.challenge(t):4===i?r.AdventureCtrl.instance.challenge(t):5===i&&(0===t[3]?r.AdventureCtrl.instance.challenge(t):t[3]<GlobalData.serverTime&&r.AdventureCtrl.instance.getAdventureAward(e))},i.prototype.setData=function(t){v.prototype.setData.call(this,t);var e,i=t,n=I.instance.getCfgById(i[2]);this.bgImg.skin="assets/icon/ui/adventure/"+n[3]+".jpg",this.titleImg.skin="assets/icon/ui/adventure/"+n[2]+".png";var s=i[5],o=i[1];if(0===o&&(s=null),s&&0<s.length)for(var a=n[1],r=0<(e=s.length)?72*e:0,l=0;l<e;l++){var h=s[l];this._items[l].dataSource=[a[h][0],a[h][1],0,null],this._items[l].visible=!0,this._items[l].x=15+.5*(284-r)+72*l}else{var c=_.config.BlendCfg.instance.getCfgById(29007)[1];for(r=0<(e=c.length/2)?72*e:0,l=0;l<e;l++)this._items[l].dataSource=[c[2*l+0],c[2*l+1],0,null],this._items[l].visible=!0,this._items[l].x=15+.5*(284-r)+72*l}l=e;for(var p=this._items.length;l<p;l++)this._items[l].visible=!1;if(this._btnClip.visible=!1,C.thisStop(this._btnClip),this.resetVisible(),0===o)this.btn.label="小赌怡情",this.btn.visible=!0;else if(1===o){this.btn.visible=!0,1===i[4]?(this.btn.label="领取奖励",this._btnClip.visible=!0,C.thisPlay(this._btnClip)):this.btn.label=0===i[7]?"接受考验":"前往";var u=i[7];if(0!==u){this.taskBg1.visible=this.taskDescTxt.visible=!0;var d=b.instance.getCfgById(u),m=d[4],f=d[2][0][1][0],g=i[3];this.taskDescTxt.innerHTML=m+'<span style="color:'+(g<f?"#FF3E3D":"#50ff28")+'">('+g+"/"+f+")</span>"}}else if(2===o)this.bg1.visible=this.revengeTxt.visible=0<i[3],this.revengeTxt.text=i[3]+"倍复仇",this.btn.label="前往应战",this.btn.visible=!0;else if(3===o)this.bg1.visible=this.revengeTxt.visible=0<i[3],this.revengeTxt.text=i[3]+"倍复仇",this.btn.label="前往击败",this.btn.visible=!0;else if(4===o)this.btn.label="探索一番",this.btn.visible=!0;else if(5===o){var y=i[3];0===y?(this.btn.label="解除封印",this.btn.visible=!0):y<GlobalData.serverTime?(this.btn.visible=!0,this.btn.label="领取奖励",this._btnClip.visible=!0,C.thisPlay(this._btnClip)):(this.btn.visible=!1,this.cdBg1.visible=this.cdDescTxt.visible=this.cdTxt.visible=!0,Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler())}},i.prototype.loopHandler=function(){var t=this._data[3]-GlobalData.serverTime;0<=t?this.cdTxt.text=CommonUtil.msToMMSS(t):(Laya.timer.clear(this,this.loopHandler),this.btn.visible=!0,this.btn.label="领取奖励",this._btnClip.visible=!0,C.thisPlay(this._btnClip),this.cdBg1.visible=this.cdDescTxt.visible=this.cdTxt.visible=!1)},i.prototype.resetVisible=function(){this.bg1.visible=this.revengeTxt.visible=!1,this.btn.visible=!1,this.taskBg1.visible=this.taskDescTxt.visible=!1,this.cdBg1.visible=this.cdDescTxt.visible=this.cdTxt.visible=!1},i.prototype.updateEvent=function(t){if(this._data&&1!==t[1]){var e=t[0];this._data[0]===e[0]&&(this.data=e)}},e=i,r.AdventureItem=e}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){}e=t.adventure||(t.adventure={}),i=t.scene.SceneModel,n=t.config.SceneCfg,s=Laya.Point,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.addNotice=function(){var t=i.instance.enterScene[0];0===n.instance.getCfgById(t)[7]&&e.AdventureModel.instance.flyTarget&&(Laya.timer.clear(this,this.delayHandler),this._tweenMove&&this._tweenMove.stop(),this._img||(this._img=new Laya.Image("assets/others/adventure/tips_mainui_cfqy.png"),this._img.anchorX=this._img.anchorY=.5),this._img.pos(.5*CommonConfig.viewWidth,350,!0),LayerManager.instance.addToNoticeLayer(this._img),this._img.scaleX=2.5,this._img.scaleY=2.5,this._tween||(this._tween=TweenJS.create(this._img).to({scaleX:1,scaleY:1},300).onComplete(this.tweenEndHandler.bind(this))),this._tween.start())},a.prototype.tweenEndHandler=function(){Laya.timer.once(3e3,this,this.delayHandler)},a.prototype.delayHandler=function(){this._tweenMove||(this._tweenMove=TweenJS.create(this._img).onComplete(this.moveEndHandler.bind(this)));var t=e.AdventureModel.instance.flyTarget;t?(s.TEMP.setTo(67,27),t.localToGlobal(s.TEMP),LayerManager.instance.getLayerById(5).globalToLocal(s.TEMP),this._tweenMove.to({scaleX:.4,scaleY:.4,x:s.TEMP.x,y:s.TEMP.y},400).start()):this.moveEndHandler()},a.prototype.moveEndHandler=function(){this._img.removeSelf()},o=a,e.AdventureNoticeManager=o}(modules=modules||{}),function(t){var o,i,e,n,a,s;function r(){return i.call(this)||this}o=t.adventure||(t.adventure={}),e=ui.TreasureChangeItemUI,n=t.common.CustomClip,a=t.notice.SystemNoticeManager,i=e,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.triggerT.visible=!1,this._upClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this._upClip.pos(158,92,!0),this._upClip.scale(.6,.6),this.currencyIcon.visible=!0,this.currencyIcon.skin=CommonUtil.getIconById(92740001,!0),this.priceTxt.align="left"},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.puchaseBtn,this,this.puchaseHandler),this.onAutoClick(this.trigger,this,this.hintHandler),this.onAutoGlobalEvt("ADVENTURE_HINT_LIST_UPDATE",this,this.updateHint),this.onAutoGlobalEvt("ADVENTURE_POINT_UPDATE",this,this.updatePoint)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateHint(),this.updatePoint()},r.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=t[1];this.item.dataSource=[e[0],e[1],0,null],this.itemName.text=this.item._nameTxt.text,this.itemName.color=this.item._nameTxt.color,this.priceTxt.text=t[2][1]+"",this.priceTxt.width=this.priceTxt.textWidth,this.currencyIcon.x=130+.5*(166-this.priceTxt.width-34),this.priceTxt.x=this.currencyIcon.x+34},r.prototype.puchaseHandler=function(){var e=this,t=this.data[2],i=CommonUtil.getPropCountById(t[0]);if(i<t[1]){var n=CommonUtil.getNameByItemId(t[0]);a.instance.addNotice(n+"不足",!0)}else if(0===this.data[4]){var s=[[t[0]],[i],[t[1]],[this.data[1][0],this.data[1][1],0,null],Handler.create(this,function(t){o.AdventureCtrl.instance.adventureExchange(e._data[0],t)})];WindowManager.instance.open(469,s)}else o.AdventureCtrl.instance.adventureExchange(this._data[0],1)},r.prototype.hintHandler=function(){var t=o.AdventureModel.instance.hintList||[],e=this._data[0],i=t.indexOf(e);-1===i?t.push(e):t.splice(i,1),o.AdventureCtrl.instance.setAdventureHint(t),o.AdventureModel.instance.hintList=t},r.prototype.updateHint=function(){var t=o.AdventureModel.instance.hintList||[];this.triggerT.visible=-1!==t.indexOf(this._data[0]),this.updateEffect()},r.prototype.updatePoint=function(){this.updateEffect();var t=o.AdventureModel.instance.point||0;this.priceTxt.color=t>=this._data[2][1]?"#4c5e8a":"#ff3e3e"},r.prototype.updateEffect=function(){var t=o.AdventureModel.instance.point||0;this.triggerT.visible&&t>=this._data[2][1]?(this.addChild(this._upClip),this._upClip.play()):(this._upClip.removeSelf(),this._upClip.stop())},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._upClip=this.destroyElement(this._upClip),i.prototype.destroy.call(this,t)},s=r,o.AdventureShopItem=s}(modules=modules||{}),function(t){var e,i,n;function s(){this.waitState=!1}e=t.arena||(t.arena={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"arenaTimes",{get:function(){return this._arenaTimes},set:function(t){this._arenaTimes=t,i.instance.setRPProperty("arenaRP",0<t[2]),GlobalData.dispatcher.event("ARENA_TIMES_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"objs",{get:function(){return this._objs},set:function(t){this._objs=t,GlobalData.dispatcher.event("ARENA_OBJS_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ranks",{get:function(){return this._ranks},set:function(t){this._ranks=t,GlobalData.dispatcher.event("ARENA_RANKS_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"records",{get:function(){return this._records},set:function(t){this._records=t,this._records.reverse(),GlobalData.dispatcher.event("ARENA_RECORDS_UPDATE")},enumerable:!0,configurable:!0}),s.prototype.isReturnCopy=function(){var t=!0,e=s.instance.arenaTimes;return e?0<e[2]&&(t=!1):t=!1,!t&&(WindowManager.instance.open(289),!0)},n=s,e.ArenaModel=n}(modules=modules||{}),function(t){var s,o,e,i;function n(){return o.call(this)||this}s=t.arena||(t.arena={}),e=ui.ArenaRankItemUI,o=e,__extends(n,o),n.prototype.initialize=function(){o.prototype.initialize.call(this),this._tmpArr=[4,"第4~10名",11,"第11~50名",51,"第51~100名",101,"第101~200名",201,"第201~500名",501,"第501~1000名",1001,"第1001~1500名",1501,"第1501~2000名",2001,"第2001~5000名",5001,"第5001~10000名"]},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._tmpArr.length=0,this._tmpArr=null,o.prototype.destroy.call(this,t)},n.prototype.setData=function(t){o.prototype.setData.call(this,t);var e,i=t;if(i?(this.nameTxt.text=i[1],e=i[0],this.nameTxt.x=152):(e=this.index+1,this.nameTxt.x=-10),1===e)this.rankImg.skin="common/zs_tongyong_7.png";else if(2===e)this.rankImg.skin="common/zs_tongyong_8.png";else if(3===e)this.rankImg.skin="common/zs_tongyong_9.png";else{this.rankImg.skin="";var n=2*(e-4);e=this._tmpArr[n],this.nameTxt.text=this._tmpArr[1+n]}this.awardTxt1.text=""+s.ArenaCfg.instance.getCfgByRank(e)[4][0][1],this.awardTxt2.text=""+s.ArenaCfg.instance.getCfgByRank(e)[4][1][1],this.iconImg1.skin="assets/icon/item/23_s.png",this.iconImg1.x=this.awardTxt1.x-40,this.iconImg2.skin="assets/icon/item/3_s.png",this.iconImg2.x=this.iconImg1.x},i=n,s.ArenaRankItem=i}(modules=modules||{}),function(t){var e,a,i,n;function s(){return a.call(this)||this}e=t.arena||(t.arena={}),i=ui.ArenaRecordsItemUI,a=i,__extends(s,a),s.prototype.initialize=function(){a.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#344c6f","SimHei",24),this.contentTxt.mouseEnabled=!1},s.prototype.setData=function(t){a.prototype.setData.call(this,t);var e=t,i=e[3],n=[],s=e[2];n[0]=s?e[1]+"挑战您":"您挑战"+e[1],n[1]=(i!==s?"成功":"失败")+"，";var o=e[5]-e[4];o<0&&(o=-o),n[2]=0===o?"排名不变。":i?'排名上升<span color="#168a17">'+o+"</span>。":'排名下降<span color="#ff3e3e">'+o+"</span>。",this.contentTxt.innerHTML=n.join(""),this.timeTxt.text=CommonUtil.timeStampToDate(e[6]),this.resultImg.skin=i?"arena/image_qxjj_s.png":"arena/image_qxjj_f.png",this.upImg.skin=0===o?"common/zs_tongyong_16.png":i?"common/zs_tongyong_3.png":"common/zs_tongyong_5.png",this.rankTxt.text=""+e[4]},n=s,e.ArenaRecordsItem=n}(modules=modules||{}),function(t){function e(){}(t.bag||(t.bag={})).BagItemCtrl=e}(modules=modules||{}),function(t){!function(t){function e(){}var i=ui.BagSelectItemUI;t.BagSelectData=e;var n,s=(n=i,__extends(o,n),o.prototype.initialize=function(){n.prototype.initialize.call(this),this._fontWidth=24,this._posX=120,this._showColor="#4c5e8a"},o.prototype.setData=function(t){n.prototype.setData.call(this,t),this._bagSelectData=t,this._bagSelectData.showNum?(this.showNum.visible=!0,this.showNum.x=this._posX-this._bagSelectData.txtNum*this._fontWidth,this.showNum.text=this._bagSelectData.showNum,this._bagSelectData.firstColor?this.showNum.color=this._bagSelectData.firstColor:this.showNum.color=this._showColor):this.showNum.visible=!1,this.showTxt.text=this._bagSelectData.showTxt},o);function o(){return n.call(this)||this}t.BagSelectItem=s}(t.bag||(t.bag={}))}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=null!==i&&i.apply(this,arguments)||this;return t._dataInit=0,t}e=t.bag||(t.bag={}),n=t.common.SimpleList,s=ui.BagSelectViewUI,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(e.BagSelectItem,150,46,1,2),this._list.width=200,this._list.height=89,this._list.vCount=2,this._list.hCount=1,this.addChildAt(this._list,4),this._list.pos(23,504,!0),this._isOpen=!1,this._list.visible=!1,this._fontWidth=24,this._posX=143,this._showColor="#4c5e8a",this._openBtnSkin="common/btn_tonyong_34.png",this._rowH=46,this._unOpenBtnSkin="common/btn_tonyong_33.png",this._colorName=["紫色","橙色","红色"]},Object.defineProperty(a.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!0,configurable:!0}),a.prototype.changeShow=function(){if(this._bagSelectData&&0<this._bagSelectData.length)if(-1!=this._list.selectedIndex&&this._bagSelectData[this._list.selectedIndex]&&this._bagSelectData[this._list.selectedIndex].showNum){var t=this._bagSelectData[this._list.selectedIndex];this.showNum.visible=!0,this.showNum.x=this._posX-t.txtNum*this._fontWidth,this.showNum.text=t.showNum.toString(),this.showTxt.text=t.showTxt,this.showTxt.visible=!0,t.firstColor?this.showNum.color=t.firstColor:this.showNum.color=this._showColor}else if(this.showNum.visible=!1,this.showTxt.visible=!0,-1==this._list.selectedIndex){var e=this._bagSelectData[this._dataLength-1-this._dataInit];this.showTxt.text=e?e.showTxt:""}else this.showTxt.text=this._bagSelectData[this._list.selectedIndex]?this._bagSelectData[this._list.selectedIndex].showTxt:""},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.selectImg,this,this.openHandler),this.onAutoClick(this.controlBtn,this,this.openHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler)},a.prototype.openHandler=function(t){t&&t.stopPropagation(),this.setUI()},a.prototype.setUI=function(){this._isOpen?(this.controlBtn.skin=this._unOpenBtnSkin,this.bgImg.visible=this._isOpen=this._list.visible=!1,this.changeShow()):(this.controlBtn.skin=this._openBtnSkin,this.bgImg.visible=this._isOpen=this._list.visible=!0,this.bgImg.height=this._changeH,this.showNum.visible=this.showTxt.visible=!1)},a.prototype.selectHandler=function(t){-1!=this._list.selectedIndex&&(this.openHandler(t),this.changeShow(),this.event("select_"+this._selectType,this._list.selectedIndex))},a.prototype.setRowData=function(t){if(this._bagSelectData=new Array,t){this._dataLength=t.length;var e=(this._bagSelectData=t).length;this._list.vCount=e,this._list.height=e*this._rowH,this._changeH=e*this._rowH,this._list.y=2!=e?504-(e-2)*this._rowH:504,this._list.datas=this._bagSelectData}},a.prototype.initData1=function(t){this.initData(t)},a.prototype.initData=function(t){},a.prototype.destroy=function(t){void 0===t&&(t=!0),this.removeSelf(),this._list=this.destroyElement(this._list),this._bagSelectData&&(this._bagSelectData.length=0),i.prototype.destroy.call(this,t)},o=a,e.BagSelectPanel=o}(modules=modules||{}),function(t){var e,i;function n(){}e=t.bag||(t.bag={}),n.colorIndex=[6,5,4,3],n.starIndex=[5,4,3,2,1],n.colorIndex1=[999,5,4,3,2],n.starIndex1=[999,4,3,2,1,0],i=n,e.BagSmeltUtil=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bag||(t.bag={}),i=e.BaseItem,__extends(s,i),s.prototype.setData=function(t){i.prototype.setData.call(this,t[0]),this.showFlag(t[1])},n=s,e.BaseItemEx=n}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return e.call(this)||this}n=t.beast_boss||(t.beast_boss={}),i=t.config.NpcCfg,s=t.config.MonsterResCfg,e=ui.BossListItemUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.updateState()},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("BEAST_BOSS_WUXIAN_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("BEAST_BOSS_SHENMI_UPDATE",this,this.updateInfo)},a.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.setData=function(t){if(e.prototype.setData.call(this,t),t){switch(this._type=t[7]?3:2,this._type){case 2:this._idToType=t[3],this.bossName.text=s.instance.getMonsterName(this._idToType),this.bossLevel.text="Lv."+s.instance.getMonsterLevel(this._idToType),this.bossLevel.visible=!0;break;case 3:this._idToType=t[7],this._level=t[1],this.bossName.text=i.instance.getCfgById(this._idToType)[4],this.bossLevel.visible=!1}this.hasRefreshTxt.visible=!0,this._isDead=!1,this.remainTime.visible=!1,this.isSelect.visible=this.selected,this.updateState()}},a.prototype.setSelected=function(t){this.selectEnable=!0,e.prototype.setSelected.call(this,t),this.selectShow()},a.prototype.selectShow=function(){if(this.selected){if(this.isSelect.visible=!0,this._idToType)if(2==this._type){if(!n.BeastBossModel.instance.remainTimes)return void t.notice.SystemNoticeManager.instance.addNotice("BOSS收益次数已达上限,不能寻路攻击BOSS",!0);n.BeastBossModel.instance.setSelectTarget(this._idToType,1)}else n.BeastBossModel.instance.isZiDong=!1,n.BeastBossModel.instance.nowCaiJiOcc=this._idToType,n.BeastBossModel.instance.setSelectTarget(this._idToType,3)}else this.isSelect.visible=!1},a.prototype.updateInfo=function(){this.updateState()},a.prototype.updateState=function(){switch(this._reviveTime=0,this._type){case 2:var t=DungeonModel.instance.getBossInfoById(this._idToType);if(t){var e=t[2];this._isDead=e[0],this._isDead?(this._reviveTime=e[2],console.log("无限岛boss死亡复活时间this._reviveTime :"+this._reviveTime),this.hasRefreshTxt.visible=!1,this.remainTime.visible=!0):e[0]||(this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1)}break;case 3:var i=n.BeastBossModel.instance.getBxIsOver(this._level);(1===n.BeastBossModel.instance.tableIdToType[this._idToType][0]?i[0]:i[1])?(this._isDead=!0,this._reviveTime=n.BeastBossModel.instance.getBxUpdateTime(this._idToType,this._level)):this._isDead=!1}this.setActivitiTime()},a.prototype.setActivitiTime=function(){if(Laya.timer.clear(this,this.activityHandler),this._reviveTime>=GlobalData.serverTime&&this._isDead)this.hasRefreshTxt.visible=!1,this.remainTime.visible=!0,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler);else if(3===this._type){var t=n.BeastBossModel.instance.tableIdToType[this._idToType][0];0<n.BeastBossModel.instance.isXiYouPlayer&&1===t?(this.remainTime.text="被采集中",this.hasRefreshTxt.visible=!1,this.remainTime.visible=!0):(this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1)}else this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1},a.prototype.activityHandler=function(){this.remainTime.text=""+CommonUtil.timeStampDDHHMMToHHMMSS(this._reviveTime),(this._reviveTime<GlobalData.serverTime||!this._isDead)&&(Laya.timer.clear(this,this.activityHandler),this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1)},o=a,n.BeastBossListItemItem=o}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return i.call(this)||this}t=e.beast_boss||(e.beast_boss={}),n=e.player.PlayerModel,s=e.rename.RenameModel,i=ui.PlayerListItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.layer=1},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName)},a.prototype.setSelected=function(t){this._playerId!=n.instance.actorId&&(e.faction.FactionModel.instance.isTongXianMeng(this._playerId)?e.notice.SystemNoticeManager.instance.addNotice("不可攻击同一仙盟玩家",!0):(i.prototype.setSelected.call(this,t),this.selectShow()))},a.prototype.selectShow=function(){if(this.selected){if(this.isSelect.visible=!0,this._playerId){if(e.faction.FactionModel.instance.isTongXianMeng(this._playerId))return void e.notice.SystemNoticeManager.instance.addNotice("不可攻击同一仙盟玩家",!0);t.BeastBossModel.instance.setSelectTarget(this._playerId,2)}}else this.isSelect.visible=!1},a.prototype.setData=function(t){i.prototype.setData.call(this,t),t?(this.isOwnTxt.visible=!1,this.visible=!0,this._infos=t,this._playerId=this._infos[0],this.isSelect.visible=this.selected,this.updateName()):this.visible=!1},a.prototype.updateName=function(){if(this._infos){0==this._infos[2]?(this.playerName.color="#ffffff",this.isOwnTxt.visible=!1):1==this._infos[2]?(this.playerName.color="#ffffff",this.isOwnTxt.visible=!0):2==this._infos[2]?(this.playerName.color="#e6372e",this.isOwnTxt.visible=!1):(this.playerName.color="#e6372e",this.isOwnTxt.visible=!0),this.playerName.text=this._infos[1];var t=s.instance.updateNameReply;t&&t[0]===this._infos[0]&&(this.playerName.text=t[1])}},o=a,t.BeastBossPlayerListItemItem=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.beast_boss||(t.beast_boss={}),n=t.redPoint.RedPointCtrl,i=ui.BeastBossChangeItemUI,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("BEAST_BOSS_WUXIAN_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("BEAST_BOSS_SHENMI_UPDATE_BXRP",this,this.updateUI),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateUI)},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._type=t,this.updateUI()},o.prototype.updateUI=function(){0==this._type?(this.dataText.text="无限岛",this.tbnRp.visible=n.instance.getRPProperty("beastBossWuXianCopyRP")):(this.dataText.text="神兽岛"+this._type+"层",this.tbnRp.visible=t.beast_boss.BeastBossModel.instance.bxToLeveleRp[this._type]||t.beast_boss.BeastBossModel.instance.bossToLeveleRp[this._type])},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.setTheSelected()},o.prototype.setTheSelected=function(){this.btn.selected=this.selected},s=o,e.BeastBossChangeItem=s}(modules=modules||{}),function(o){var a,i,e,r,t;function n(){var t=i.call(this)||this;return t._reviveTime=0,t}a=o.beast_boss||(o.beast_boss={}),e=o.config.NpcCfg,r=o.config.MonsterResCfg,i=ui.BeastBossItemUI,__extends(n,i),n.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("BEAST_BOSS_WUXIAN_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("BORN_LV_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("BEAST_BOSS_SHENMI_UPDATE_BXRP",this,this.updateUI),this.onAutoGlobalEvt("BEAST_BOSS_SHENMI_UPDATE",this,this.updateUI)},n.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.lockImg.visible=!1,t){if(this._cfg=t,this.setNmae(),2===this.type){this._cfg=this._cfg;var e=this._cfg[7];this.type=e?3:2}this.updateUI()}},n.prototype.updateUI=function(){if(1===this.type)this._occ=a.BeastBossModel.instance.getId(this._cfg),this.setBossUI();else if(2===this.type)this._cfg=this._cfg,this.type=2,this._occ=this._cfg[3],this.setBossUI();else if(3===this.type){this._cfg=this._cfg;var t=this._cfg[7];if(this.type=3,this._occ=t,this.updateBoxUI(),this._isDead)this.rpImg.visible=!1;else{var e=a.BeastBossModel.instance.tableIdToType[this._occ][0];this.rpImg.visible=o.dungeon.DungeonModel.instance.isGuanZuBx(this._occ)&&!a.BeastBossModel.instance.getGatherCountIsMax(e)}}this.setActivitiTime()},n.prototype.setBossUI=function(){var t=r.instance.getCfgById(this._occ);if(this.iconImg.skin="assets/icon/monster/"+t[3]+".png",this.lvTxt.text="已刷新",this.lvTxt.color="#168A17",this.nameText.text="Lv."+r.instance.getMonsterLevel(this._occ),1===this.type){var e=a.BeastBossModel.instance.singBossIdToTime[this._occ];if(e=e||0,this._isDead=0<e,this._reviveTime=e,o.dungeon.DungeonModel.instance.isGuanZuBoss(this._occ)){var i=o.beast_boss.BeastBossModel.instance.singBossIdToTime[this._occ];this.rpImg.visible=!i}else this.rpImg.visible=!1}else{var n=a.BeastBossModel.instance.getBossSeversInfoById(this._occ);if(n){var s=n[2];this._reviveTime=0,this._isDead=s[0],this._isDead?(this._reviveTime=s[2],this.rpImg.visible=!1):this.rpImg.visible=o.dungeon.DungeonModel.instance.isGuanZuBoss(this._occ)&&0<o.beast_boss.BeastBossModel.instance.remainTimes}}},n.prototype.updateBoxUI=function(){this.iconImg.skin="assets/icon/ui/scene_copy_mystical/"+this._occ+".png",this.lvTxt.text="已刷新",this.nameText.text=e.instance.getCfgById(this._occ)[4],this.lvTxt.color="#FFFFFF";var t=a.BeastBossModel.instance.getBxIsOver(this._cfg[1]);(1===(a.BeastBossModel.instance.tableIdToType[this._occ]?a.BeastBossModel.instance.tableIdToType[this._occ][0]:0)?t[0]:t[1])?(this._isDead=!0,this._reviveTime=a.BeastBossModel.instance.getBxUpdateTime(this._occ,this._cfg[1])):this._isDead=!1},n.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),this._reviveTime>=GlobalData.serverTime&&this._isDead?(this.lvTxt.color="#FF3E3E",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.setNmae()},n.prototype.activityHandler=function(){if(3===this.type){var t=a.BeastBossModel.instance.tableIdToType[this._occ]?a.BeastBossModel.instance.tableIdToType[this._occ][0]:0;this.lvTxt.text=1===t?CommonUtil.timeStampDDHHMMToHHMMSS(this._reviveTime)+" ":"已采完"}else this.lvTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(this._reviveTime)+" ";(this._reviveTime<GlobalData.serverTime||!this._isDead)&&(Laya.timer.clear(this,this.activityHandler),this.setNmae())},n.prototype.setNmae=function(){this.lvTxt.text="已刷新",this.lvTxt.color="#168A17"},n.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},n.prototype.destroy=function(){i.prototype.destroy.call(this,!0)},t=n,a.BeastBossItem=t}(modules=modules||{}),function(w){var t,m,x,e,n,f,g,h,c,y,i;function _(){this.totalTimes=0,this.remainTimes=0,this.totalXiYou=0,this.totalPuTong=0,this.caiJiXiYou=0,this.caiJiPuTong=0,this.wuxianChangeBossId=0,this.shenShouChangeBossId=[0,0],this.era=0,this.nowCaiJiOcc=0,this.isZiDong=!1,this.tableIdToType={},this.singBossIdToTime={},this._oldSingBossIdToTime={},this.bxToLeveleBefore={},this.bxToLevele={},this.bxToLeveleRp={},this.bxToUpdateTime={},this.wuXianBossDate=new Array,this.bossToLeveleRp={},this.totalTimes=w.config.BlendCfg.instance.getCfgById(81004)[1][0];for(var t=w.config.BlendCfg.instance.getCfgById(81011)[1],e=0;e<t.length;e+=2){var i=t[e],n=t[e+1];1===i?this.totalXiYou=n||0:2===i&&(this.totalPuTong=n||0)}var s=w.config.BlendCfg.instance.getCfgById(81006)[1],o=w.config.BlendCfg.instance.getCfgById(81007)[1],a=w.config.BlendCfg.instance.getCfgById(81008)[1],r=w.config.BlendCfg.instance.getCfgById(81010)[2],l=w.config.BlendCfg.instance.getCfgById(81009)[2],h=w.config.BlendCfg.instance.getCfgById(81009)[1];for(e=0;e<s.length;e++){for(var c=s[e],p=o[e],u=a[e],d=0<h[e],m=new Array,f=r[e].substr(1,r[e].length-2).split("#"),g=0;g<f.length;g+=2){var y=parseInt(f[g]),_=parseInt(f[g+1]);m.push([y,_,0,null])}var v=new Array,I=l[e].substr(1,l[e].length-2).split("#");for(g=0;g<I.length;g+=2){var b=parseInt(I[g]),C=parseInt(I[g+1]);v.push([b,C])}this.tableIdToType[c]=[p,u,m,v,d]}for(e=0;e<x.instance.arr.length;e++){var T=x.instance.arr[e];this.wuXianBossDate.push([1,T])}}t=w.beast_boss||(w.beast_boss={}),m=w.config.SceneCopyMysticalCfg,x=w.config.SceneCopyInfiniteCfg,e=w.config.MonsterResCfg,n=w.dungeon.DungeonModel,f=w.common.CommonUtil,g=w.player.PlayerModel,h=w.scene.SceneUtil,c=w.scene.SceneModel,y=w.customData.CustomDataModel,Object.defineProperty(_,"instance",{get:function(){return this._instance=this._instance||new _},enumerable:!0,configurable:!0}),_.prototype.getInfo2=function(t){if(t){var e=!1;this.allBxDateOld&&(e=!0);for(var i=t[0],n=0;n<i.length;n++){var s=i[n],o=s[0],a=s[1],r=s[2];this.bxToLevele[o]||(this.bxToLevele[o]={}),this.bxToUpdateTime[o]||(this.bxToUpdateTime[o]={});for(var l=0;l<a.length;l++)if(f=a[l]){var h=f[0],c=f[1];this.bxToLevele[o][h]=c}for(l=0;l<r.length;l++)if(f=r[l]){var p=f[0],u=f[1];this.bxToUpdateTime[o][p]=u}}for(e&&this.shenShouBxReviveTip(),this.allBxDateOld=i,n=0;n<this.allBxDateOld.length;n++){var d=this.allBxDateOld[n],m=(o=d[0],d[1]);for(this.bxToLeveleBefore[o]||(this.bxToLeveleBefore[o]={}),l=0;l<m.length;l++){var f;(f=m[l])&&(h=f[0],c=f[1],this.bxToLeveleBefore[o][h]=c)}}this.shenShouBxRP(),GlobalData.dispatcher.event("BEAST_BOSS_SHENMI_UPDATE"),this.targetToXiyou()}},_.prototype.getInfo3=function(t){t&&(this.isXiYouPlayer=t[0],GlobalData.dispatcher.event("BEAST_BOSS_SHENMI_UPDATE"))},_.prototype.checkListIndex=function(){for(var t=x.instance.arr,e=0;e<t.length;e++){var i=t[e],n=_.instance.getId(i);if(w.dungeon.DungeonModel.instance.isGuanZuBoss(n)&&!w.beast_boss.BeastBossModel.instance.singBossIdToTime[n])return 0}for(e=0;e<2;e++)for(var s=m.instance.getInfoByGrade(e+1),o=0;o<s.length;o++)if(n=(i=s[o])[3]){var a=_.instance.getBossSeversInfoById(n);if(a&&!a[2][0]&&w.dungeon.DungeonModel.instance.isGuanZuBoss(n)&&0<w.beast_boss.BeastBossModel.instance.remainTimes)return e+1}var r=[];for(e=0;e<2;e++)for(s=m.instance.getInfoByGrade(e+1),o=0;o<s.length;o++)if(n=(i=s[o])[7]){var l=_.instance.getBxIsOver(i[1]),h=_.instance.tableIdToType[n]?_.instance.tableIdToType[n][0]:0;(1===h?l[0]:l[1])||w.dungeon.DungeonModel.instance.isGuanZuBx(n)&&!_.instance.getGatherCountIsMax(h)&&r.push([e+1,h,o])}if(0<r.length)for(e=0;e<r.length;e++)if(1==(i=r[e])[1])return i[0];return r[0]?r[0][0]:0},_.prototype.getBossIndex=function(t){if(0==t)for(var e=x.instance.arr,i=0;i<e.length;i++){var n=e[i],s=_.instance.getId(n);if(w.dungeon.DungeonModel.instance.isGuanZuBoss(s)&&!w.beast_boss.BeastBossModel.instance.singBossIdToTime[s])return i}else if(1==t||2==t){var o=m.instance.getInfoByGrade(t);for(i=0;i<o.length;i++)if(s=(n=o[i])[3]){var a=_.instance.getBossSeversInfoById(s);if(a&&!a[2][0]&&w.dungeon.DungeonModel.instance.isGuanZuBoss(s)&&0<w.beast_boss.BeastBossModel.instance.remainTimes)return i}for(var r=[],l=0;l<o.length;l++)if(s=(n=o[l])[7]){var h=_.instance.getBxIsOver(n[1]),c=_.instance.tableIdToType[s]?_.instance.tableIdToType[s][0]:0;(1===c?h[0]:h[1])||w.dungeon.DungeonModel.instance.isGuanZuBx(s)&&!_.instance.getGatherCountIsMax(c)&&r.push([c,l])}if(0<r.length){for(i=0;i<r.length;i++)if(1==(n=r[i])[0])return n[1];for(i=0;i<r.length;i++)if(1!=(n=r[i])[0])return n[1]}}return 0},_.prototype.clearIsXiYouPlayer=function(){this.isXiYouPlayer=0,GlobalData.dispatcher.event("BEAST_BOSS_SHENMI_UPDATE")},_.prototype.shenShouBxReviveTip=function(){for(var t in this.bxToLevele)if(this.bxToLevele.hasOwnProperty(t)){var e=this.bxToLevele[t];for(var i in e)if(e.hasOwnProperty(i)){var n=e[i],s=0;if(this.bxToLeveleBefore[t]&&(s=this.bxToLeveleBefore[t][i]),n!=s){1===parseInt(i)&&0<n&&(this.clearIsXiYouPlayer(),this.boxRevivesForce(parseInt(t),parseInt(i))),1!=parseInt(i)&&0<n&&this.boxRevivesForce(parseInt(t),parseInt(i));for(var o=m.instance.getBxArrByLevel(parseInt(t)),a=0;a<o.length;a++){var r=o[a][7];(this.tableIdToType[r]?this.tableIdToType[r][0]:0)==parseInt(i)&&w.dungeon.DungeonModel.instance.shenShouBxReviveTip(r,0<n)}}}}},_.prototype.shenShouBxRP=function(){for(var t=!(this.bxToLeveleRp={}),e=1;e<=m.instance.maxLevel;e++){for(var i=!1,n=m.instance.getBxArrByLevel(e),s=0;s<n.length;s++){var o=n[s][7];if(this.tableIdToType[o]){var a=this.tableIdToType[o][0];w.dungeon.DungeonModel.instance.isGuanZuBx(o)&&0<(this.bxToLevele[e]?this.bxToLevele[e][a]:0)&&!this.getGatherCountIsMax(a)&&(t=i=!0)}}this.bxToLeveleRp[e]=i}w.redPoint.RedPointCtrl.instance.setRPProperty("beastBossBxRP",t),GlobalData.dispatcher.event("BEAST_BOSS_SHENMI_UPDATE_BXRP")},_.prototype.getInfo1=function(t){if(t){var e=!1;this._oldListBossWuXian&&(e=!0),this.singBossIdToTime={};var i={},n=t[0];this.era=t[1];for(var s=0;s<n.length;s++)if(l=n[s]){var o=l[0],a=l[1];i[o]=a}var r=0;for(s=0;s<x.instance.arr.length;s++){var l;if(l=x.instance.arr[s]){var h=w.beast_boss.BeastBossModel.instance.getId(l);e&&this.singBossIdToTime[h]!=i[h]&&w.dungeon.DungeonModel.instance.xuXianReviveTip(h,i[h]),e&&this._oldSingBossIdToTime[h]!=i[h]&&this._oldSingBossIdToTime[h]&&!i[h]&&(r=h)}}this.singBossIdToTime=i,this._oldSingBossIdToTime=i,this._oldListBossWuXian=n,w.dungeon.DungeonModel.instance.xuXianCheckBossRP(),GlobalData.dispatcher.event("BEAST_BOSS_WUXIAN_UPDATE"),0!=r&&w.halo.HaloModel.instance.haloOpen&&this.forceToWuxian(r)}},_.prototype.forceToWuxian=function(t){if(w.halo.HaloModel.instance.isHalo()&&w.dungeon.DungeonModel.instance.isGuanZuBoss(t)&&0!=(y.instance.getCustomDataByKey(42)?y.instance.getCustomDataByKey(42)[0]:0)){var e=w.config.SceneCopyInfiniteCfg.instance.getCfgByBossId(t);e&&-1!==w.beast_boss.BeastBossModel.instance.getAllBossIdByEraLv().indexOf(t)&&(!h.isCommonScene||c.instance.isInMission||w.windCloud.WindCloudModel.instance.isWaitingForMatch||w.foreign_boss_panel.ForeignBossModel.instance.autoCall||(w.halo.HaloModel.instance.isForceEnter=!0,w.dungeon.DungeonCtrl.instance.reqEnterScene(e[0])))}},_.prototype.getInfo=function(t){if(t){this.remainTimes=this.totalTimes-t[0];for(var e=t[1],i=0,n=0,s=0;s<e.length;s++){var o=e[s];if(o){var a=o[0],r=o[1];1===a?i+=r:2===a&&(n+=r)}}this.caiJiXiYou=i,this.caiJiPuTong=n,w.dungeon.DungeonModel.instance.shenShouCheckBossRP(),GlobalData.dispatcher.event("BEAST_BOSS_SHENMI_UPDATE")}},_.prototype.getBossSeversInfoById=function(t){return n.instance.getBossInfoById(t)},_.prototype.getCfgByid=function(t){return e.instance.getCfgById(t)},_.prototype.setSelectTarget=function(t,e){var i=g.instance;1===e?n.instance.getBossInfoById(t)?i.selectTarget(1,t):w.notice.SystemNoticeManager.instance.addNotice("BOSS: "+t+" 拿不到信息 或者 "+t+" 不是boss ",!0):i.selectTarget(e,t)},_.prototype.setSelectTargetSingleBoss=function(t,e){g.instance.selectTarget(1,t)},_.prototype.getGatherCountIsMax=function(t){return 1===t?this.caiJiXiYou>=this.totalXiYou:this.caiJiPuTong>=this.totalPuTong},_.prototype.getBxIsOver=function(t){for(var e=0,i=0,n=m.instance.getBxArrByLevel(t),s=0;s<n.length;s++){var o=n[s][7],a=this.tableIdToType[o]?this.tableIdToType[o][0]:0,r=this.bxToLevele[t]&&this.bxToLevele[t][a]?this.bxToLevele[t][a]:0;1===a?e+=r:2===a&&(i+=r)}return[e<=0,i<=0]},_.prototype.getBxUpdateTime=function(t,e){var i=0,n=this.tableIdToType[t][4];if(this.tableIdToType[t][0],w.config.NpcCfg.instance.getCfgById(t)[4],n)i=this.bxToUpdateTime[e]?this.bxToUpdateTime[e][t]:0;else for(var s=this.tableIdToType[t][3],o=f.getZero0clockTimeStamp(),a=s.length-1,r=0;r<=a;r++){var l=s[r];if(l){var h=l[0],c=l[1],p=o-(864e5-(36e5*h+6e4*c));if(GlobalData.serverTime>p)if(r===a){var u=36e5*(h=s[0][0])+6e4*(c=s[0][1]);i=GlobalData.serverTime+(o-GlobalData.serverTime)+u}else{var d=s[r+1],m=o-(864e5-(36e5*d[0]+6e4*d[1]));if(GlobalData.serverTime<=m){i=m;break}}0===r&&(i=p)}}return i},_.prototype.getId=function(t){for(var e=this.era,i=t[2][1],n=t[2],s=0;s<n.length;s+=2){var o=n[s],a=n[s+1];o<=e&&(i=a)}return i},_.prototype.getAllBossIdByEraLv=function(){for(var t=new Array,e=0;e<x.instance.arr.length;e++){var i=x.instance.arr[e];if(i){var n=this.getId(i);t&&t.push(n)}}return t},_.prototype.autoSelectTarget=function(t){if(void 0===t&&(t=!1),w.halo.HaloModel.instance.haloOpen&&0!=(y.instance.getCustomDataByKey(42)?y.instance.getCustomDataByKey(42)[0]:0)&&w.halo.HaloModel.instance.isForceEnter){var e=w.scene.SceneModel.instance.enterScene[0],i=w.config.SceneCfg.instance.getCfgById(e)[7];if(37==i){for(var n=0,s=0;s<2;s++){var o=m.instance.getInfoByGrade(s+1);if(o[0][0]==e){n=o[0][1];break}}if(1==n){for((h=m.instance.getBoosIdArrByLevel(n)).sort(function(t,e){return e-t}),s=0;s<h.length;s++){var a=h[s];if(w.dungeon.DungeonModel.instance.isGuanZuBoss(a)&&0<w.beast_boss.BeastBossModel.instance.remainTimes&&(c=_.instance.getBossSeversInfoById(a))&&!c[2][0])return void _.instance.setSelectTarget(a,1)}var r=m.instance.getBoxIdsByLevel(n);for(s=0;s<r.length;s++)if(a=r[s],w.dungeon.DungeonModel.instance.isGuanZuBx(a)){var l=_.instance.getBxIsOver(n);if(!(1===(p=_.instance.tableIdToType[a]?_.instance.tableIdToType[a][0]:0)?l[0]:l[1])&&!_.instance.getGatherCountIsMax(p))return void _.instance.setSelectTarget(a,3)}}else if(2==n){var h;if(r=m.instance.getBoxIdsByLevel(n),t&&!this.isHaveBossAndBox(n))return;if(!t)for(s=0;s<r.length;s++)if(a=r[s],w.dungeon.DungeonModel.instance.isGuanZuBx(a)&&(l=_.instance.getBxIsOver(n),1==(p=_.instance.tableIdToType[a]?_.instance.tableIdToType[a][0]:0)&&!(1===p?l[0]:l[1])&&!_.instance.getGatherCountIsMax(p)))return void _.instance.setSelectTarget(a,3);for((h=m.instance.getBoosIdArrByLevel(n)).sort(function(t,e){return e-t}),s=0;s<h.length;s++){var c;if(a=h[s],w.dungeon.DungeonModel.instance.isGuanZuBoss(a)&&0<w.beast_boss.BeastBossModel.instance.remainTimes&&(c=_.instance.getBossSeversInfoById(a))&&!c[2][0])return void _.instance.setSelectTarget(a,1)}for(s=0;s<r.length;s++){var p;if(a=r[s],w.dungeon.DungeonModel.instance.isGuanZuBx(a))if(l=_.instance.getBxIsOver(n),2==(p=_.instance.tableIdToType[a]?_.instance.tableIdToType[a][0]:0)&&!(2===p?l[1]:l[0])&&!_.instance.getGatherCountIsMax(p))return void _.instance.setSelectTarget(a,3)}}}if(36==i){var u=x.instance.arr;for(s=0;s<u.length;s++){var d=u[s];if(a=_.instance.getId(d),w.dungeon.DungeonModel.instance.isGuanZuBoss(a)&&!w.beast_boss.BeastBossModel.instance.singBossIdToTime[a])return void _.instance.setSelectTarget(a,1)}}w.halo.HaloModel.instance.isForceEnter=!1,g.instance.selectTarget(0,-1),WindowManager.instance.close(407),SceneCtrl.instance.exitDungeon()}},_.prototype.isHaveBossAndBox=function(t){for(var e=m.instance.getBoosIdArrByLevel(t),i=0;i<e.length;i++){var n=e[i];if(w.dungeon.DungeonModel.instance.isGuanZuBoss(n)&&0<w.beast_boss.BeastBossModel.instance.remainTimes){var s=_.instance.getBossSeversInfoById(n);if(s&&!s[2][0])return!0}}var o=m.instance.getBoxIdsByLevel(t);for(i=0;i<o.length;i++)if(n=o[i],w.dungeon.DungeonModel.instance.isGuanZuBx(n)){var a=_.instance.getBxIsOver(t),r=_.instance.tableIdToType[n]?_.instance.tableIdToType[n][0]:0;if(2==r&&!(2===r?a[1]:a[0])&&!_.instance.getGatherCountIsMax(r))return!0}return!1},_.prototype.boxRevivesForce=function(t,e){if(w.halo.HaloModel.instance.haloOpen&&0!=(y.instance.getCustomDataByKey(42)?y.instance.getCustomDataByKey(42)[0]:0)&&w.halo.HaloModel.instance.isHalo()&&h.isCommonScene&&!c.instance.isInMission&&!w.windCloud.WindCloudModel.instance.isWaitingForMatch&&!w.foreign_boss_panel.ForeignBossModel.instance.autoCall){var i=m.instance.getBoxIdsByLevel(t);if(1==e)for(var n=0;n<i.length;n++){var s=i[n];if(w.dungeon.DungeonModel.instance.isGuanZuBx(s)){var o=_.instance.getBxIsOver(2),a=_.instance.tableIdToType[s]?_.instance.tableIdToType[s][0]:0;if(1==a&&!(1===a?o[0]:o[1])&&!_.instance.getGatherCountIsMax(a)){w.halo.HaloModel.instance.isForceEnter=!0,w.beast_boss.BeastBossModel.instance.shenShouChangeBossId=[0,0];var r=w.config.SceneCopyMysticalCfg.instance.getCfgByBxId(s);return void w.dungeon.DungeonCtrl.instance.reqEnterScene(r[0],r[1])}}}else for(n=0;n<i.length;n++)if(s=i[n],w.dungeon.DungeonModel.instance.isGuanZuBx(s)){o=_.instance.getBxIsOver(t);var l=_.instance.tableIdToType[s]?_.instance.tableIdToType[s][0]:0;if(2==l&&!(2===l?o[1]:o[0])&&!_.instance.getGatherCountIsMax(l))return w.halo.HaloModel.instance.isForceEnter=!0,w.beast_boss.BeastBossModel.instance.shenShouChangeBossId=[0,0],r=w.config.SceneCopyMysticalCfg.instance.getCfgByBxId(s),void w.dungeon.DungeonCtrl.instance.reqEnterScene(r[0],r[1])}}},_.prototype.isSpectcalBox=function(){var t=w.npc.NpcModel.instance.triggeredNpcOcc;return 1==(_.instance.tableIdToType[t]?_.instance.tableIdToType[t][0]:0)},_.prototype.targetToXiyou=function(){if(w.halo.HaloModel.instance.haloOpen&&0!=(y.instance.getCustomDataByKey(42)?y.instance.getCustomDataByKey(42)[0]:0)&&w.halo.HaloModel.instance.isForceEnter){var t=w.scene.SceneModel.instance.enterScene[0];if(37==w.config.SceneCfg.instance.getCfgById(t)[7]){for(var e=0,i=0;i<2;i++){var n=m.instance.getInfoByGrade(i+1);if(n[0][0]==t){e=n[0][1];break}}2==e&&0==this.bxToLevele[e][1]&&3==g.instance.selectTargetType&&2402003==g.instance.selectTargetId&&this.autoSelectTarget(!1)}}},i=_,t.BeastBossModel=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.beast_boss||(t.beast_boss={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},o.prototype.setDataSource=function(t){t=[t[0],0,0,null],i.prototype.setDataSource.call(this,t),this._nameTxt.visible=!1},o.prototype.destroy=function(){i.prototype.destroy.call(this,!0)},s=o,e.BeastBossReawrdItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.beast_boss||(t.beast_boss={}),n=t.config.MonsterResCfg,i=ui.BossListItemUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.updateState()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BEAST_BOSS_WUXIAN_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateInfo)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},o.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._bossId=e.BeastBossModel.instance.getId(t),this._reviveTime=0,this.isSelect.visible=this.selected,n.instance.getCfgById(this._bossId),this.bossName.text=n.instance.getMonsterName(this._bossId),this.bossLevel.text="Lv."+n.instance.getMonsterLevel(this._bossId),this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1,this._isDead=!0,this.updateState())},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectShow()},o.prototype.selectShow=function(){this.isSelect.visible=this.selected,this.selected&&this._bossId&&e.BeastBossModel.instance.setSelectTargetSingleBoss(this._bossId,!0)},o.prototype.updateInfo=function(){this.updateState()},o.prototype.updateState=function(){var t=DungeonModel.instance.getBossInfoById(this._bossId);if(t){var e=t[2];this._isDead=e[0],this._isDead?(this._reviveTime=e[2],console.log("无限岛boss死亡复活时间this._reviveTime :"+this._reviveTime),this.hasRefreshTxt.visible=!1,this.remainTime.visible=!0):e[0]||(this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1,this.selectEnable=!0),this.setActivitiTime()}},o.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),this._reviveTime>=GlobalData.serverTime&&this._isDead?(this.hasRefreshTxt.visible=!1,this.remainTime.visible=!0,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1)},o.prototype.activityHandler=function(){this.remainTime.text=""+CommonUtil.timeStampDDHHMMToHHMMSS(this._reviveTime),(this._reviveTime<GlobalData.serverTime||!this._isDead)&&(Laya.timer.clear(this,this.activityHandler),this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1)},s=o,e.BeastBossSingleBossItem=s}(modules=modules||{}),function(h){var c,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}c=h.beast_equipment||(h.beast_equipment={}),t=h.bag.BagSelectPanel,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),this._colorName=["白色","绿色","蓝色","紫色","橙色","红色","黄色"]},i.prototype.initData=function(t){if(this._isOpen=!1,"color"==(this._selectType=t)){for(var e=new Array,i=5;2<=i;i--){var n=new h.bag.BagSelectData;n.firstColor=CommonUtil.getColorByQuality(i),n.showNum=this._colorName[i],n.txtNum=3,n.showTxt="及以下",e.push(n)}var s=new h.bag.BagSelectData;s.showTxt="全部颜色",e.unshift(s),this.setRowData(e),this._list.selectedIndex=h.bag.BagSmeltUtil.colorIndex1.indexOf(c.BeastEquipmentModel.instance.smeltColor)}else{for(var o=new Array,a=4;0<=a;a--){var r=new h.bag.BagSelectData;r.showNum=0===a?null:""+a,r.txtNum=4,r.showTxt=0===a?"无星级":"星及以下",o.push(r)}var l=new h.bag.BagSelectData;l.showTxt="全部星级",o.unshift(l),this.setRowData(o),this._list.selectedIndex=h.bag.BagSmeltUtil.starIndex1.indexOf(c.BeastEquipmentModel.instance.smeltStar)}this._list.selectedIndex=this._list.selectedIndex},e=i,c.BagSelectPanel=e}(modules=modules||{}),function(i){var m,e,f,g,t;function n(){return e.call(this)||this}m=i.beast_equipment||(i.beast_equipment={}),f=i.common.CustomClip,g=i.common.CommonUtil,e=ui.BeastEquipmentBagItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._nameTxts=[this.attrName1,this.attrName2,this.attrName3],this._btnClip=g.creatEff(this.inalyBtn,"btn_light",15),this._btnClip.scale(.65,.65),this._btnClip.pos(-5,-5),this._btnClip.visible=!1,this._runeInfo=[0,0]},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.inalyBtn,this,this.inalyBtnHandler),this.onAutoClick(this.demountBtn,this,this.demountBtnHandler)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this)},n.prototype.setData=function(t){var e=this;if(this.hintTxt.visible=this.lockTxt.visible=this.inalyBtn.visible=this.demountBtn.visible=!1,f.thisStop(this._btnClip),t){this._id=t[0];var i=t[1],n=t[2],s=t[3];this.item1.dataSource=s,t[4]&&f.thisPlay(this._btnClip);var o=s[0],a=g.getItemQualityById(o),r=g.getStarById(o),l=g.getColorByQuality(a),h=g.getItemCfgById(o)[1];this.attTxt.color=""+l;var c=s[3];this._uid=s[2];var p=c?c[5]:0;this.attTxt.text=h+"  Lv"+p,this._peatNum=g.getPartById(o);var u=m.BeastEquipmentModel.instance.getConnectionAtrr(s)[0];this.setperfectAllAttrs([u],null);var d=function(){var t=m.BeastEquipmentModel.instance.getIsEquipment(s);e.demountBtn.visible=t,e.inalyBtn.visible=!t};i<a?d():a===i&&n<=r?d():this.lockTxt.visible=!0}},n.prototype.setperfectAllAttrs=function(t,e){i.common.AttrUtil.setAttrTxts(t,e,this._nameTxts,null,null,null,0)},n.prototype.inalyBtnHandler=function(){m.BeastEquipmentCtrl.instance.WearBeastEquip(this._id,this._uid,0),WindowManager.instance.close(517)},n.prototype.demountBtnHandler=function(){m.BeastEquipmentCtrl.instance.WearBeastEquip(this._id,this._peatNum,1),WindowManager.instance.close(517)},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._attNameArr=this.destroyElement(this._attNameArr),this._btnClip=this.destroyElement(this._btnClip),this._attFitArr=this.destroyElement(this._attFitArr),e.prototype.destroy.call(this,t)},t=n,m.BeastEquipmentBagItem=t}(modules=modules||{}),function(t){var s,e,i;function n(){return null!==e&&e.apply(this,arguments)||this}s=t.beast_equipment||(t.beast_equipment={}),e=ui.BeastEquipmentItemUI,__extends(n,e),n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BEAST_EQUIPMENT_UPDATE",this,this.showUI),this.onAutoGlobalEvt("BEAST_EQUIPMENT_R_UPDATE",this,this.showUI)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&this.showUI()},n.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.selectedImg.visible=this.selected},n.prototype.showUI=function(){if(this.data){var t=this.data[0],e=this.data[6],i=this.data[7];this.nameText.text=""+e,this.iconImg.skin=i?"assets/icon/ui/beast/"+i+".png":"";var n=s.BeastEquipmentModel.instance.isChuZhan(t);this.chuZhantext.visible=this.chuZhanImg.visible=n,this.rpImg.visible=s.BeastEquipmentModel.instance.getRpById(t)}},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},i=n,s.BeastEquipmentItem=i}(modules=modules||{}),function(c){var t,p,u,d,e;function i(){return null!==p&&p.apply(this,arguments)||this}t=c.beast_equipment||(c.beast_equipment={}),u=c.config.AttrItemCfg,d=c.config.ItemAttrPoolCfg,p=ui.BeastEquipmentItem1UI,__extends(i,p),i.prototype.setData=function(t){if(p.prototype.setData.call(this,t),t){var e=t[0],i=t[1],n=t[2],s=null,o=0,a="",r="",l="#3a5385";if(1===n)(s=u.instance.getCfgById(e))&&(o=s[2],a=s[1],r=o?c.common.AttrUtil.formatFloatNum(i)+"%":Math.round(i)+"");else if(2===n&&(s=d.instance.getCfgById(e))){o=i<1?1:0,a=s[1].split("+")[0];var h=s[4];l=CommonUtil.getColorByQuality(h),r=o?c.common.AttrUtil.formatFloatNum(i)+"%":Math.round(i)+""}this.attrName.text=a,this.attrValue.text=r,this.attrName.color=this.attrValue.color=l}},e=i,t.BeastEquipmentItem1=e}(modules=modules||{}),function(l){var t,h,c,p,e;function i(){return null!==h&&h.apply(this,arguments)||this}t=l.beast_equipment||(l.beast_equipment={}),c=l.config.AttrItemCfg,p=l.config.ItemAttrPoolCfg,h=ui.BeastEquipmentItem2UI,__extends(i,h),i.prototype.setData=function(t){if(h.prototype.setData.call(this,t),t){var e=t[0],i=t[1],n=t[2],s=null,o=0,a="",r="";1===n?(s=c.instance.getCfgById(e))&&(o=s[2],a=s[1],r=o?l.common.AttrUtil.formatFloatNum(i)+"%":Math.round(i)+""):2===n&&(s=p.instance.getCfgById(e))&&(o=i<1?1:0,a=s[1].split("+")[0],r=o?l.common.AttrUtil.formatFloatNum(i)+"%":Math.round(i)+""),this.attrName.text=a,this.attrValue.text="+"+r,this.attrValue.x=this.attrName.textWidth}},e=i,t.BeastEquipmentItem2=e}(modules=modules||{}),function(C){var t,_,a,T,e,i,w,r,o,n;function l(){this._smeltColor=2,this._smeltStar=0,this.equipsDic=new o,this._nowChuZhan=0,this._beastJing=0,this._slIdToPartItemsTable={},this._slIdToPartItemTable={},this._onlineList={},this._rflags={},this._tableConditions={},this._slIdToSkillIdPairTable={},this._chuZhanMax=C.config.BlendCfg.instance.getCfgById(77001)[1][0],this._chuZhanCaiLiao=C.config.BlendCfg.instance.getCfgById(77002)[1][0];for(var t=C.config.BlendCfg.instance.getCfgById(77003)[1],e=0,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];this._tableConditions[e]||(this._tableConditions[e]=[]),this._tableConditions[e]=[n,s],e++}this.arrtKeyAndKey=new Array,this.arrtKeyAndKey[1]=193,this.arrtKeyAndKey[2]=195,this.arrtKeyAndKey[3]=194,this.arrtKeyAndKey[4]=196,this.arrtKeyAndKey[5]=199,this.arrtKeyAndKey[6]=200,this.arrtKeyAndKey[7]=197,this.arrtKeyAndKey[8]=198}t=C.beast_equipment||(C.beast_equipment={}),_=C.config.BeastCfg,a=C.config.BeastSkillCfg,T=C.config.BeastStrongCfg,e=C.redPoint.RedPointCtrl,i=C.funcOpen.FuncOpenModel,w=C.common.CommonUtil,r=C.bag.BagModel,o=Laya.Dictionary,Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.getEquipByPart=function(t){var e=null;for(var i in this._onlineList)if(this._onlineList.hasOwnProperty(i)&&i){var n=this.getItemByIdAndPart(parseInt(i),t);if(n)if(e){var s=e[3][7];n[3][7]<s&&(e=n)}else e=n}return e},Object.defineProperty(l.prototype,"smeltColor",{get:function(){return this._smeltColor},set:function(t){this._smeltColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"smeltStar",{get:function(){return this._smeltStar},set:function(t){this._smeltStar=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"beastJing",{get:function(){return this._beastJing},enumerable:!0,configurable:!0}),l.prototype.sLIdToPartItemsTable=function(){return this._slIdToPartItemsTable},Object.defineProperty(l.prototype,"exOnlineIndex",{get:function(){return this._exOnlineIndex},set:function(t){this._exOnlineIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"chuZhanMax",{get:function(){if(0==this._exOnlineIndex)return this._chuZhanMax;var t=this._chuZhanMax,e=this._tableConditions[this._exOnlineIndex-1];return e&&(t+=e[0]),t},enumerable:!0,configurable:!0}),l.prototype.onlineList=function(){return this._onlineList},l.prototype.isChuan=function(t){var e=l.instance.sLIdToPartItemsTable()[t];return e&&1<=e.length},l.prototype.getChuZhanNum=function(){return this._nowChuZhan},l.prototype.isChuZhan=function(t){return!!this._onlineList[t]},l.prototype.isJiChenChuZhan=function(t){var e=this._onlineList[t];return!!e&&0<e.length},l.prototype.getIsEquipment=function(t){if(t)for(var e=w.getPartById(t[0]),i=_.instance.arr,n=0;n<i.length;n++){var s=i[n];if(s){var o=s[0],a=this.getItemByIdAndPart(o,e);if(t&&a&&t[0]===a[0]&&t[3]===a[3])return!0}}return!1},l.prototype.getItemByIdAndPart=function(t,e){return this._slIdToPartItemTable[t]?this._slIdToPartItemTable[t][e]:null},l.prototype.getLoseScoreEquipByPart=function(t){var e=null;for(var i in this._onlineList)if(this._onlineList.hasOwnProperty(i)&&this._onlineList[i]){var n=this.getItemByIdAndPart(parseInt(i),t);if(n)if(e){var s=e[3][6];n[3][6]<s&&(e=n)}else e=n}return e},l.prototype.getInfo=function(t){this._slIdToPartItemsTable={},this._onlineList={},this._slIdToPartItemTable={},this._slIdToSkillIdPairTable={};for(var e=t[0],i=0;i<e.length;i++)if(h=e[i]){var n=h[0],s=h[1];this._slIdToPartItemsTable[n]=s,this._slIdToPartItemTable[n]||(this._slIdToPartItemTable[n]={});for(var o=0;o<s.length;o++)if(p=s[o]){var a=p[0],r=p[1];this._slIdToPartItemTable[n][a]=r}}this.exOnlineIndex=t[1];var l=t[2];for(this._nowChuZhan=l?l.length:0,i=0;i<l.length;i++){var h;if(h=l[i]){n=h[0];var c=h[1];if(0<(this._onlineList[n]=c).length)for(this._slIdToSkillIdPairTable[n]||(this._slIdToSkillIdPairTable[n]={}),o=0;o<c.length;o++){var p;if(p=c[o]){var u=p[0],d=p[1];this._slIdToSkillIdPairTable[n][u]=d}}}}this._beastJing=t[3],this.setRP(),GlobalData.dispatcher.event("BEAST_EQUIPMENT_UPDATE")},l.prototype.updateInfo=function(t){this._onlineList={},this._slIdToSkillIdPairTable={};var e=t[0];this._nowChuZhan=e?e.length:0;for(var i=0;i<e.length;i++){var n=e[i];if(n){var s=n[0],o=n[1];if(0<(this._onlineList[s]=o).length){this._slIdToSkillIdPairTable[s]||(this._slIdToSkillIdPairTable[s]={});for(var a=0;a<o.length;a++){var r=o[a];if(r){var l=r[0],h=r[1];this._slIdToSkillIdPairTable[s][l]=h}}}}}this.setRP(),GlobalData.dispatcher.event("BEAST_EQUIPMENT_UPDATE")},l.prototype.uodateInfo1=function(t){this._slIdToPartItemsTable={},this._slIdToPartItemTable={};for(var e=t[0],i=0;i<e.length;i++){var n=e[i];if(n){var s=n[0],o=n[1];this._slIdToPartItemsTable[s]=o,this._slIdToPartItemTable[s]||(this._slIdToPartItemTable[s]={});for(var a=0;a<o.length;a++){var r=o[a];if(r){var l=r[0],h=r[1];this._slIdToPartItemTable[s][l]=h}}}}this.setRP(),GlobalData.dispatcher.event("BEAST_EQUIPMENT_UPDATE")},l.prototype.uodateInfo2=function(t){this.exOnlineIndex=t[0],GlobalData.dispatcher.event("BEAST_EQUIPMENT_MAX_UPDATE")},l.prototype.uodateInfo3=function(t){this._beastJing=t[0],GlobalData.dispatcher.event("BEAST_EQUIPMENT_BEAST_JING_UPDATE")},l.prototype.getConnectionAtrr=function(t,e){void 0===e&&(e=!1);var i=new Array,n=new Array,s=new Array,o=t[0],a=w.getPartById(o),r=t[3],l=1;r&&(l=r[5]);for(var h=C.config.ItemEquipCfg.instance.getItemCfgById(o)[8],c=T.instance.getAttrsByLvAndPart(l,a),p=0,u=c.length;p<u;p+=2){var d=c[p],m=c[p+1],f=!1;if(e){for(g=0,y=n.length;g<y;g+=3)if(n[g]===d){f=!0,n[g+1]+=m;break}f||n.push(d,m,1)}else{for(var g=0,y=i.length;g<y;g+=2)if(i[g]===d){f=!0,i[g+1]+=m;break}f||i.push(d,m)}}for(p=0,u=h.length;p<u;p+=2)if(d=h[p],m=h[p+1],f=!1,e){for(g=0,y=n.length;g<y;g+=3)if(n[g]===d){f=!0,n[g+1]+=m;break}f||n.push(d,m,1)}else{for(var g=0,y=i.length;g<y;g+=2)if(i[g]===d){f=!0,i[g+1]+=m;break}f||i.push(d,m)}if(r&&e){var _=r[0],v=r[1],I=r[2],b=function(t){for(var e=0;e<t.length;e++){var i=t[e];i&&s.push(i)}};_&&0<_.length&&b(_),v&&0<v.length&&b(v),I&&0<I.length&&b(I)}return e?[n,s]:[i,s]},l.prototype.getCfgByDate=function(t){if(t)for(var e=t[0],i=t[1],n=a.instance.getCfgByLv(i),s=0;s<n.length;s++){var o=n[s];if(o&&o[0]===e)return o}return null},l.prototype.getSkillLV=function(t,e){var i=this._slIdToSkillIdPairTable[t]?this._slIdToSkillIdPairTable[t][e]:0;return i||0},l.prototype.isChuanDai=function(t){for(var e=1;e<=5;e++)if(this.isWear(t,e))return!0;return!1},l.prototype.isQiangHua=function(t){for(var e=1;e<=5;e++)if(this.isStrengthening(t,e))return!0;return!1},l.prototype.isUpSikll=function(t){for(var e=a.instance.getCfgByLv(0),i=0;i<e.length;i++){var n=e[i];if(n){var s=n[0];if(this.isSkillUp(t,s))return!0}}return!1},l.prototype.isChuZhanRp=function(t){var e=l.instance.sLIdToPartItemsTable()[t];return!(l.instance.getChuZhanNum()>=l.instance.chuZhanMax)&&!l.instance.isChuZhan(t)&&e&&5===e.length},l.prototype.isSkillUp=function(t,e){if(this._onlineList[t]){var i=this.getSkillLV(t,e),n=l.instance.getCfgByDate([e,i]);if(i<a.instance.getMaxLv()&&n){var s=n[4],o=s[0];if(s[1]<=w.getPropCountById(o))return!0}return!1}return!1},l.prototype.isStrengthening=function(t,e){var i=this.getItemByIdAndPart(t,e);if(i){var n=T.instance.getMaxLv(),s=i[3][5];if(n<=s)return!1;var o=T.instance.getCfgByLv(s)[1],a=o[0];return o[1]<=w.getPropCountById(a)}return!1},l.prototype.compareTwo=function(t,e,i,n){if(!n)return!1;var s=n[0];if(w.getPartById(s)===e){var o=_.instance.getCfgById(t),a=o[5],r=o[4],l=-1,h=-1,c=-1,p=a[e-1],u=r[e-1],d=this.getItemByIdAndPart(t,e);if(d){var m=d[3];m&&(l=m[5]),h=w.getStarById(d[0]),c=w.getItemQualityById(d[0])}var f=w.getStarById(s),g=w.getItemQualityById(s),y=function(){if(c<g)return!0;if(g===c){if(h<f)return!0;if(f===h){var t=n[3],e=t?t[5]:0;if(l<e)return!0}}};if(i){if(p<g&&y())return!0;if(g===p&&u<f&&y())return!0;if(g===p&&f===u&&y())return!0}else if(p<g||g===p&&u<=f)return!0}return!1},l.prototype.isWear=function(t,e,i){void 0===i&&(i=!0);var n=r.instance.getItemsByBagId(8);if(n)for(var s=0;s<n.length;s++){var o=n[s];if(o&&this.compareTwo(t,e,i,o))return!0}return!1},l.prototype.getRp=function(){for(var t=_.instance.arr,e=0;e<t.length;e++){var i=t[e];if(i){var n=i[0];if(this.getRpById(n))return!0}}return!1},l.prototype.getRp1=function(){var t=!1,e=l.instance._tableConditions[l.instance.exOnlineIndex];return e&&(t=e[1]<=w.getPropCountById(l.instance._chuZhanCaiLiao)),t},l.prototype.getRpById=function(t){var e=l.instance.getChuZhanNum()>=l.instance.chuZhanMax,i=l.instance.isChuZhan(t);return!(!l.instance.isChuZhanRp(t)||i)||(!!(e?i&&l.instance.isChuanDai(t):l.instance.isChuanDai(t))||!(!i||!l.instance.isQiangHua(t))||!!l.instance.isUpSikll(t)||void 0)},l.prototype.setRP=function(){var t=i.instance.getFuncIsOpen(318);e.instance.setRPProperty("beastsSpiritRP",t&&this.getRp()),e.instance.setRPProperty("beastsSpiritRP1",t&&this.getRp1())},l.prototype.setTarget=function(){for(var t=_.instance.arr,e=-1,i=-1,n=0;n<t.length;n++){var s=t[n];if(s){var o=s[0];-1===e&&l.instance.getRpById(o)&&(e=n),-1===i&&l.instance.isChuZhan(o)&&(i=n)}}return-1!=e?e:-1!=i?i:0},n=l,t.BeastEquipmentModel=n}(modules=modules||{}),function(t){var s,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}s=t.beast_equipment||(t.beast_equipment={}),o=ui.BeastEquipmentResolveItemUI,__extends(i,o),i.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler)},i.prototype.setData=function(t){o.prototype.setData.call(this,t),this._datas=t,this.item1.needTip=!1,this.item1.dataSource=[this._datas[0],this._datas[1],0,null],this.item1.nameVisible=!0,this.selectImg.visible=!0;var e=this._datas[2],i=this._datas[3],n=1;i&&(n=i[5]),this.item1.setNum("LV"+n),s.BeastEquipmentModel.instance._rflags[e]=this._datas},i.prototype.btnHandler=function(){var t=this._datas[2];this.selectImg.visible?(this.selectImg.visible=!1,s.BeastEquipmentModel.instance._rflags[t]=null):(this.selectImg.visible=!0,s.BeastEquipmentModel.instance._rflags[t]=this._datas),GlobalData.dispatcher.event("BEAST_EQUIPMENT_CHANG"),console.log("分解单独操作后：  ",s.BeastEquipmentModel.instance._rflags)},e=i,s.BeastEquipmentResolveItem=e}(modules=modules||{}),function(d){var m,e,f,g,t;function i(){return null!==e&&e.apply(this,arguments)||this}m=d.beast_equipment||(d.beast_equipment={}),f=d.config.BeastSkillCfg,g=d.common.CustomClip,e=ui.BeastEquipmentUpgradeItemUI,__extends(i,e),i.prototype.close=function(){g.thisStop(this._eff),e.prototype.close.call(this)},i.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this)},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BEAST_EQUIPMENT_UPDATE",this,this.showUI)},i.prototype.clickHandler=function(){var t=this._datasShou[0];WindowManager.instance.open(518,[t,this._type,this._datas])},i.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._datasShou=t[0],this._datas=t[1],this.showUI())},i.prototype.showUI=function(){if(this._datas){for(var t=this._datasShou[0],e=this._datas[0],i=m.BeastEquipmentModel.instance.getSkillLV(t,e),n=f.instance.getCfgByLv(i),s=0;s<n.length;s++){var o=n[s];if(o&&e===o[0]){this._datas=o;break}}var a=this._datas[8],r=this._datas[9],l=this._datas[4],h=l[0],c=l[1],p=f.instance.getMaxLv();if(this.iconImg.skin="assets/icon/skill/"+a+".png",m.BeastEquipmentModel.instance.isChuZhan(t)){this._type=1,this.iconImg.gray=0===r;var u=0;h&&(u=CommonUtil.getPropCountById(h)),c<=u&&r<p?(this._eff||(this._eff=d.common.CommonUtil.creatEff(this,"activityEnter",15),this._eff.pos(2,2,!0)),this.stateImg.visible=this.tipsImg.visible=!0,this.stateImg.skin=0===r?"common/txt_xq_kjh.png":"common/txt_xq_ksj.png",g.thisPlay(this._eff)):(g.thisStop(this._eff),this.stateImg.visible=this.tipsImg.visible=!1)}else this.iconImg.gray=!0,this.stateImg.visible=this.tipsImg.visible=!1,g.thisStop(this._eff),this._type=0}},t=i,m.BeastEquipmentUpgradeItem=t}(modules=modules||{}),function(t){var n,e,i;function s(){return e.call(this)||this}n=t.beast_equipment||(t.beast_equipment={}),e=ui.BeastEquipmentUpgradeItemUI,__extends(s,e),s.prototype.destroy=function(){this._datas=null,this._datasShou=null,e.prototype.destroy.call(this)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.clickHandler),this.onAutoGlobalEvt("BEAST_EQUIPMENT_UPDATE",this,this.showUI)},s.prototype.clickHandler=function(){var t=this._datasShou[0];WindowManager.instance.open(519,[t,this._type,this._datas])},s.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._datasShou=t[0],this._datas=t[1],this.showUI())},s.prototype.showUI=function(){if(this._datas){var t=this._datas[8];this.iconImg.skin="assets/icon/skill/"+t+".png";var e=this._datasShou[0],i=n.BeastEquipmentModel.instance.isChuZhan(e);this._type=i?1:0}},i=s,n.BeastEquipmentUpgradeItem1=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=0,e=GlobalData.getConfig("era_task");t<e.length;t++){var i=e[t],n=i[0];this._tab[n]=i}},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.EraTaskCfg=i}(modules=modules||{}),function(t){var r,e,i,l,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}r=t.born||(t.born={}),i=ui.BornItemUI,l=t.config.EraTaskCfg,n=t.notice.SystemNoticeManager,e=i,__extends(o,e),o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler)},Object.defineProperty(o.prototype,"line",{set:function(t){this._type=t,this.lineImg.visible=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"id",{set:function(t){var e,i;this._taskNode=r.BornModel.instance.getEraNode(t);var n=l.instance.getCfgById(t);if(!n)throw new Error("转生任务配置不存在! id---\x3e"+t);var s=n[1];this.desTxt.text=s;var o=n[2][1];i=this._taskNode?(e=this._taskNode[1],this._taskNode[2]):(e=2,o),this.barTxt.text="("+CommonUtil.bigNumToString(i)+"/"+CommonUtil.bigNumToString(o)+")",this.barTxt.color=0==e?"#ff3e3e":"#168a17";var a=n[3][0];this.item.dataSource=[a[0],a[1],0,null],0==e?(this.btn.visible=!0,this.img.visible=!1,this.btn.label=this._type?"直接领取":"前往",this.btn.skin="common/btn_tongyong_24.png",this.btn.labelColors="#465460",this.stopEff()):1==e?this._type?(this.btn.visible=!1,this.img.visible=!0,this.img.skin="common/txt_commmon_ywc.png",this.stopEff()):(this.btn.visible=!0,this.img.visible=!1,this.btn.label="领取",this.btn.skin="common/btn_tongyong_23.png",this.btn.labelColors="#9d5119",this.playEff()):(this.btn.visible=!1,this.img.visible=!0,this.img.skin="common/txt_commmon_ylq.png",this.stopEff())},enumerable:!0,configurable:!0}),o.prototype.btnHandler=function(){var t=this._taskNode[0];if(1==this._taskNode[1])r.BornCtrl.instance.drawEraTask(t);else if(this._type)n.instance.addNotice("使用转生丹可领取当前的全部奖励",!0);else{var e=l.instance.getCfgById(t)[2][2];-1===e?WindowManager.instance.open(106,[90430001,0,!0]):WindowManager.instance.openByActionId(e),WindowManager.instance.close(42)}},o.prototype.playEff=function(){this._btnClip||(this._btnClip=CommonUtil.creatEff(this.btn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(.8,.8,!0)),this._btnClip.play(),this._btnClip.visible=!0},o.prototype.stopEff=function(){this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1)},o.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},s=o,r.BornItem=s}(modules=modules||{}),function(t){var n,i,e,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}n=t.bossHome||(t.bossHome={}),e=ui.BossHomeItemUI,s=t.dungeon.DungeonModel,o=t.config.MonsterResCfg,i=e,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._reviveTime=0},r.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectShow()},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateTime),this.onAutoGlobalEvt("MULTI_BOSS_FOLLOWS_UPDATE",this,this.followsUpdateHandler)},r.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),i.prototype.offEvt.call(this)},r.prototype.close=function(){i.prototype.close.call(this),this.rpImg.visible=!1},r.prototype.setData=function(t){i.prototype.setData.call(this,t),this._bossInfo=t,this._bossId=this._bossInfo[2];var e=n.BossHomeModel.instance.getCfgByid(this._bossId)[3];this.bossIconImg.skin=e?"assets/icon/monster/"+e+".png":"assets/icon/monster/310001.png",this.bossLevel.text="Lv."+o.instance.getMonsterLevel(this._bossId),this.bossName.text=o.instance.getMonsterName(this._bossId),this.stageNum.value=parseInt(this._bossInfo[7]).toString(),this._isDead=!1,this.timeToRevive.visible=!1,this.updateTime(),this.selectShow()},r.prototype.updateTime=function(){var t=n.BossHomeModel.instance.getBossSeversInfoById(this._bossId);if(t){var e=t[2];if(e[0]&&!this._isDead){Laya.timer.clear(this,this.loopHandler),this._reviveTime=e[2];var i=this._reviveTime-GlobalData.serverTime;if(i<=0)return;this.setTime(i),this._isDead=!0,this.timeToRevive.visible=!0,Laya.timer.loop(1e3,this,this.loopHandler)}else!e[0]&&this._isDead&&(this._isDead=!1,this.timeToRevive.visible=!1);this.checkRP()}},r.prototype.followsUpdateHandler=function(){this.checkRP()},r.prototype.getRed=function(){return this._isRed},r.prototype.checkRP=function(){var t=!1;if(this._bossId&&!this._isDead&&s.instance.getBossInfoById(this._bossId)){var e=s.instance.getFollowBossById(this._bossId);e&&e[1]&&(t=!0)}this.rpImg.visible=t,this._isRed=t},r.prototype.selectShow=function(){this.selected?(this.unselectBtn.visible=!1,this.selectBtn.visible=!0):(this.unselectBtn.visible=!0,this.selectBtn.visible=!1)},r.prototype.setTime=function(t){var e=Math.floor(t/36e5),i=Math.floor(t%36e5/6e4),n=Math.floor(t%6e4/1e3);this.timeToRevive.text=this.formateData(e)+":"+this.formateData(i)+":"+this.formateData(n)},r.prototype.loopHandler=function(){var t=this._reviveTime-GlobalData.serverTime;if(t<=0)return Laya.timer.clear(this,this.loopHandler),void(this.timeToRevive.visible=!1);this.setTime(t)},r.prototype.formateData=function(t){var e=t.toString();return e.length<2?"0"+e:e},a=r,n.BossHomeItem=a}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,p,c;function u(){var t=i.call(this)||this;return t._isShowList=!1,t._showPanel=new n,t.addChild(t._showPanel),t._showPanel.pos(0,0),t._bg=new s("common_sg/9g_tongyong_10.png"),t._showPanel.addChild(t._bg),t._bg.x=0,t._bg.sizeGrid="12,12,12,12,1",t._txt=new l,t._showPanel.addChild(t._txt),t._txt.pos(95,14),t._txt.font="SimHei",t._txt.fontSize=20,t._txt.color="#ffec7c",t._interImg=new s("common_sg/split_common_fgx3.png"),t._showPanel.addChild(t._interImg),t._interImg.pos(12,42),t._btn=new r("common/btn_tonyong_28.png",""),t._showPanel.addChild(t._btn),t._btn.stateNum=1,t._btn.pos(230,16),t._list=new o,t._showPanel.addChild(t._list),t._list.x=7,t._list.y=43,t._list.scrollDir=1,t._list.hCount=1,t._list.spaceY=-1,t._list.canSelectSameItem=!0,t.bottom=280,t._meId=0,t._selectId=t._selectIndex=-1,t.on(a.DISPLAY,t,t.displayHandler),t.on(a.UNDISPLAY,t,t.undisplayHandler),t}e=t.bossHome||(t.bossHome={}),n=Laya.Panel,s=Laya.Image,o=t.common.CustomList,a=Laya.Event,r=Laya.Button,l=Laya.Text,h=t.player.PlayerModel,p=t.bossDungeon.BossDungeonModel,i=n,__extends(u,i),u.prototype.displayHandler=function(){this._btn.on(a.CLICK,this,this.downHandler),this._list.on(a.SELECT,this,this.selectHandler),GlobalData.dispatcher.on("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayerShow),GlobalData.dispatcher.on("BOSS_OWN_UPDATE",this,this.updatePlayerShow),GlobalData.dispatcher.on("BOSS_ATTACK_UPDATE",this,this.updatePlayerShow)},u.prototype.undisplayHandler=function(){this._btn.off(a.CLICK,this,this.downHandler),this._list.off(a.SELECT,this,this.selectHandler),GlobalData.dispatcher.off("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayerShow),GlobalData.dispatcher.off("BOSS_OWN_UPDATE",this,this.updatePlayerShow),GlobalData.dispatcher.off("BOSS_ATTACK_UPDATE",this,this.updatePlayerShow)},u.prototype.downHandler=function(){this._isShowList?(this._isShowList=!1,this._bg.height=this.height=this._showPanel.height=90,this._list.height=40,this._list.vCount=1,this._btn.skin="common/btn_tonyong_29.png"):(this._isShowList=!0,this._list.height=184,this._list.vCount=5,this._bg.height=this.height=this._showPanel.height=234,this._btn.skin="common/btn_tonyong_28.png"),this._list.datas=this._data},u.prototype.updatePlayerShow=function(){if(this._isPlayer){for(var t=p.instance,e=[],i=[],n=[],s=[],o=0,a=p.instance.getPlayerInfo();o<a.length;o++){var r=a[o],l=r[0];if(t.isSelectBossOwner(l)){var h=t.playerIsMeAttack(l)||p.instance.playerIsAttackMe(l);e.push([r[0],r[1],h?3:1])}else l!=this._meId&&(t.playerIsMeAttack(l)?i.push([r[0],r[1],2]):t.playerIsAttackMe(l)?n.push([r[0],r[1],2]):s.push([r[0],r[1],0]))}var c=e.concat(i,n,s);this._list.datas=c,this._data=c,this.getIndexById()}},u.prototype.getIndexById=function(){if(0<this._selectId&&this._data&&0<this._data.length)for(var t=0;t<this._data.length;t++){var e=this._data[t];this._selectId==e[0]&&this._list.selectedIndex!=t&&(this._list.selectedIndex=t,this._selectIndex=t)}},u.prototype.selectHandler=function(){if(-1!=this._list.selectedIndex)if(this._isPlayer){if((t=this._data[this._list.selectedIndex])[0]==this._meId)return void(this._list.selectedIndex=this._selectIndex);this._selectId!=t[0]&&(this._selectId=t[0],this._selectIndex=this._list.selectedIndex,e.BossHomeModel.instance.manual=!0,e.BossHomeModel.instance.setSelectTarget(this._selectId,!1))}else{e.BossHomeModel.instance.findPathState=1,e.BossHomeModel.instance.manual=!0;var t=this._data[this._list.selectedIndex];e.BossHomeModel.instance.setSelectTarget(t,!0)}},u.prototype.setWidth=function(t){this.width=this._showPanel.width=this._bg.width=t,this._list.width=t-10,this._interImg.width=t-20,this._btn.x=t-40},u.prototype.initSelectIndex=function(){this._list.selectedIndex=-1,this._selectId=-1,this._selectIndex=-1},u.prototype.setShowName=function(t){this._txt.text=t},u.prototype.destroy=function(){this.undisplayHandler(),this.off(a.DISPLAY,this,this.displayHandler),this.off(a.UNDISPLAY,this,this.undisplayHandler),i.prototype.destroy.call(this,!0)},u.prototype.setCenter=function(t){this.centerX=t},u.prototype.setPlayerData=function(){this._isPlayer=!0,this._list.itemRender=e.PlayerListItem,this._meId=h.instance.actorId,this._txt.x=70,this.updatePlayerShow(),this.downHandler()},u.prototype.setBossData=function(t){this._isPlayer=!1,this._list.itemRender=e.BossListItem,this._list.datas=t,this._data=t,this._txt.x=95,this.downHandler()},c=u,e.BossHomeList=c}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}n=t.bossHome||(t.bossHome={}),i=ui.BossListItemUI,s=t.config.MonsterResCfg,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.updateState()},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),GlobalData.dispatcher.on("DUNGEON_BOSS_UPDATE",this,this.updateInfo)},a.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler),GlobalData.dispatcher.off("DUNGEON_BOSS_UPDATE",this,this.updateInfo)},a.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.selectShow()},a.prototype.updateInfo=function(){this.updateState()},a.prototype.selectShow=function(){this.isSelect.visible=this.selected},a.prototype.updateState=function(){var t=n.BossHomeModel.instance.getBossSeversInfoById(this._bossId);if(t){var e=t[2];if(e[0]&&!this._isDead){Laya.timer.clear(this,this.loopHandler),this._reviveTime=e[2];var i=this._reviveTime-GlobalData.serverTime;if(i<=0)return;this.setTime(i),this._isDead=!0,this.hasRefreshTxt.visible=!1,this.remainTime.visible=!0,Laya.timer.loop(1e3,this,this.loopHandler)}else!e[0]&&this._isDead&&(this._isDead=!1,this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1)}},a.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._bossId=t,this._reviveTime=0,this.selectShow(),s.instance.getCfgById(this._bossId),this.bossName.text=s.instance.getMonsterName(this._bossId),this.bossLevel.text="Lv."+s.instance.getMonsterLevel(this._bossId),this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1,this._isDead=!1,this.updateState())},a.prototype.loopHandler=function(){var t=this._reviveTime-GlobalData.serverTime;if(t<=0)return this.remainTime.visible=!1,this.hasRefreshTxt.visible=!0,void Laya.timer.clear(this,this.loopHandler);this.setTime(t)},a.prototype.setTime=function(t){this.remainTime.text=CommonUtil.msToHHMMSS(t)},o=a,n.BossListItem=o}(modules=modules||{}),function(e){var t,i,n,s,o,a,r;function l(){return i.call(this)||this}t=e.bossHome||(e.bossHome={}),n=ui.PlayerListItemUI,s=e.player.PlayerModel,o=e.rename.RenameModel,a=e.notice.SystemNoticeManager,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.layer=1},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName)},l.prototype.setSelected=function(t){if(this._playerId!=s.instance.actorId){if(t){if(e.faction.FactionModel.instance.isTongXianMeng(this._playerId))return void a.instance.addNotice("不可攻击同一仙盟玩家",!0);if(CommonGroupUtil.thePlayerIsMyTeam(this._playerId))return void a.instance.addNotice("不可攻击队友",!0)}i.prototype.setSelected.call(this,t),this.selectShow()}},l.prototype.selectShow=function(){this.isSelect.visible=this.selected},l.prototype.setData=function(t){i.prototype.setData.call(this,t),t?(this.visible=!0,this._infos=t,this._playerId=this._infos[0],this.selectShow(),0==this._infos[2]?(this.playerName.color="#ffffff",this.isOwnTxt.visible=!1):1==this._infos[2]?(this.playerName.color="#ffffff",this.isOwnTxt.visible=!0):2==this._infos[2]?(this.playerName.color="#e6372e",this.isOwnTxt.visible=!1):(this.playerName.color="#e6372e",this.isOwnTxt.visible=!0),this.playerName.text=this._infos[1]):this.visible=!1},l.prototype.updateName=function(){if(this._infos){var t=o.instance.updateNameReply;t&&t[0]===this._infos[0]&&(this.playerName.text=t[1])}},r=l,t.PlayerListItem=r}(modules=modules||{}),function(g){var y,r,n,e,m,i,_,v,I,b,t,s,o,f,C,a;function l(){var t=this;if(l._instance)throw new Error("重复构造");return(t=r.call(this)||this).width=680,t.height=136,t.centerX=0,t._dotArr=new Array,t._skin="0.png",t._selectedSkin="1.png",t._iconDir="assets/others/tab/",t._btnGroup=new i,t._btnGroup.on(n.CHANGE,t,t.selectedHandler),t._btnGroup.canSelectHandler=e.create(t,t.canSelectHandler,null,!1),t._bgs=new Array,t._imgs=new Array,t.on(n.DISPLAY,t,t.displayHandler),t.on(n.UNDISPLAY,t,t.undisplayHandler),t._con=new s,t.addChild(t._con),t._con.height=136,t._w=550,t._con.scrollRect=new o(0,0,t._w,136),t}y=g.bottomTab||(g.bottomTab={}),n=Laya.Event,e=Laya.Handler,m=Laya.Image,i=g.common.BtnGroup,_=g.config.ActionOpenCfg,v=g.funcOpen.FuncOpenModel,I=g.notice.SystemNoticeManager,b=g.redPoint.RedPointCtrl,t=Laya.Panel,s=Laya.Sprite,o=Laya.Rectangle,f=g.guide.GuideModel,C=g.config.SceneCopyOpenBossCfg,r=t,__extends(l,r),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.displayHandler=function(){this._tabInfo&&(this._con.on(n.MOUSE_DOWN,this,this.downHandler),this._con.on(n.MOUSE_WHEEL,this,this.wheelHandler))},l.prototype.undisplayHandler=function(){if(this._tabInfo){for(var t=0,e=this._dotArr.length;t<e;t++)b.instance.retireRedPoint(this._dotArr[t]);this._con.off(n.MOUSE_DOWN,this,this.downHandler),this._con.off(n.MOUSE_WHEEL,this,this.wheelHandler),f.instance.removeUI(8),f.instance.removeUI(13),f.instance.removeUI(21),f.instance.removeUI(31),f.instance.removeUI(33),f.instance.removeUI(36),f.instance.removeUI(40),f.instance.removeUI(44),f.instance.removeUI(54),f.instance.removeUI(58),f.instance.removeUI(63),f.instance.removeUI(69),f.instance.removeUI(70),f.instance.removeUI(71),f.instance.removeUI(75),f.instance.removeUI(77),f.instance.removeUI(81),f.instance.removeUI(90),f.instance.removeUI(92)}},Object.defineProperty(l.prototype,"selectedIndex",{get:function(){return this._btnGroup.selectedIndex},set:function(t){this._btnGroup.selectedIndex=t,this._panelId=0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"imgs",{get:function(){return this._imgs},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"panelId",{get:function(){return this._panelId},set:function(t){this._panelId=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"tabInfo",{get:function(){return this._tabInfo},set:function(t){this.scrollConTo(0),t&&(this._tabInfo=t,this.setPanels(t[0]))},enumerable:!0,configurable:!0}),l.prototype.updatePanels=function(){this._tabInfo&&this.setPanels(this._tabInfo[0])},l.prototype.setPanels=function(t){var e,i,n;if(this._panelId=0,this._bgs&&0<this._bgs.length)for(var s=0,o=this._bgs.length;s<o;s++)this._bgs[s].removeSelf(),this._imgs[s].skin="",this._imgs[s].removeSelf(),this._dotArr[s].removeSelf();this._panelIdsArr=t;var a=this._tabInfo[2],r=0;for(this._tab={},s=0,o=this._panelIdsArr.length;s<o;s++){for(var l=t[s],h=!0,c=0,p=l.length;c<p;c++)if(!this.isFuncClose(l[c])){h=!1;break}if(!h){if(this._imgs.length>r?(i=this._imgs[r],n=this._bgs[r]):(i=new m,this._imgs.push(i),i.pos(0+114*r,0,!0),n=new m,this._bgs.push(n),n.pos(0+114*r,0,!0),this._dotArr[r]=new m("common/image_common_xhd.png"),this._dotArr[r].anchorX=.5,this._dotArr[r].anchorY=.5,this._dotArr[r].pos(114*(r+1)-20,18)),n.skin="bottom_tab/btn_common_yqbg_0.png",this._con.addChild(n),this._con.addChild(i),139===this._tabInfo[4]){if(1===s){var u=g.kuanghuan.KuangHuanModel.instance.getType();this._tabInfo[3][s]=u}}else 49===this._tabInfo[4]?1===s&&n&&g.action_preview.ActionPreviewModel.instance._posSprite.set(10000005,n):266===this._tabInfo[4]&&0!=g.openChallenge.OpenChallengeModel.instance.endTime&&(u=C.instance.getBottomTab(g.openChallenge.OpenChallengeModel.instance.minLevel),this._tabInfo[3][s]=u);if(i.skin=this._iconDir+this._tabInfo[3][s]+this._skin,this._con.addChild(this._dotArr[r]),this._dotArr[r].visible=!1,a[s]&&0<a[s].length){var d=[];for(c=0,p=a[s].length;c<p;c++)d=d.concat(a[s][c]);b.instance.registeRedPoint(this._dotArr[r],d)}this._tab[r]=s,r++,-1!==l.indexOf(46)?f.instance.registeUI(8,n):-1!==l.indexOf(27)?f.instance.registeUI(13,n):-1!==l.indexOf(10)?f.instance.registeUI(21,n):-1!==l.indexOf(56)?f.instance.registeUI(31,n):-1!==l.indexOf(37)?f.instance.registeUI(33,n):-1!==l.indexOf(108)?f.instance.registeUI(36,n):-1!==l.indexOf(41)?f.instance.registeUI(40,n):-1!==l.indexOf(38)?f.instance.registeUI(44,n):-1!==l.indexOf(97)?f.instance.registeUI(54,n):-1!==l.indexOf(33)?f.instance.registeUI(58,n):-1!==l.indexOf(75)?f.instance.registeUI(63,n):-1!==l.indexOf(72)?f.instance.registeUI(69,n):-1!==l.indexOf(194)?f.instance.registeUI(70,n):-1!==l.indexOf(134)?f.instance.registeUI(71,n):-1!==l.indexOf(246)?f.instance.registeUI(75,n):-1!==l.indexOf(249)?f.instance.registeUI(77,n):-1!==l.indexOf(93)?f.instance.registeUI(81,n):-1!==l.indexOf(114)?f.instance.registeUI(90,n):-1!==l.indexOf(109)&&f.instance.registeUI(92,n)}}this._con.width=0===r?0:114*r-4,this._con.width<=this._w&&(this._con.scrollRect.x=0),(e=this._btnGroup).setBtns.apply(e,this._bgs)},l.prototype.canSelectHandler=function(t){var e=this._tab[t],i=this._tabInfo[0][e];if(!i||0===i.length)return!1;var n=!1,s=this._panelId;if(-1!==i.indexOf(this._panelId))return 1408!==this._panelId||g.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen();for(var o=-1,a=-1,r=0,l=i.length;r<l;r++){var h=i[r];if(this.isFuncOpen(h)){n=!0;var c=y.BottomTabConfig.instance.getRpsByPanelId(h);if(c&&0<c.length)for(var p=0,u=c.length;p<u;p++)if(b.instance.getRPProperty(c[p])){a=h;break}if(-1!==a){this._panelId=a;break}-1===o&&(o=h,this._panelId=h)}}if(!n&&0!==this._tabInfo[4]){var d=_.instance.getCfgById(this._tabInfo[4])[9],m=v.instance.getFuncOpenTipById(d[e+1]);m?I.instance.addNotice(m,!0):I.instance.addNotice("已结束",!0)}if(n&&1408===this._panelId){var f=g.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen();return f||(this._panelId=s),f}return n},l.prototype.isFuncOpen=function(t){var e=!0,i=WindowManager.instance.getWindowConfigById(t),n=i?i[6]:-1;return 0!==n&&(v.instance.getFuncIsOpen(n)||(e=!1)),e},l.prototype.isFuncClose=function(t){var e=!1,i=WindowManager.instance.getWindowConfigById(t),n=i?i[6]:-1;return v.instance.getFuncNeedShow(n)||(e=!0),e},l.prototype.selectedHandler=function(){if(104==this._panelId&&v.instance.getFuncIsOpen(47)&&g.vip_new.VipNewModel.instance.getVipLevelTrue()<10&&g.vip.VipModel.instance.vipLevel<1)I.instance.addNotice("VIP10开启SVIP功能",!0);else{var t=this._btnGroup.btns.indexOf(this._btnGroup.oldSelectedBtn),e=this._bgs[t],i=this._imgs[t];i&&i.parent&&(e.skin="bottom_tab/btn_common_yqbg_0.png",i.skin=this._iconDir+this._tabInfo[3][this._tab[t]]+this._skin),t=this._btnGroup.selectedIndex,e=this._bgs[t],(i=this._imgs[t])&&(e.skin="bottom_tab/btn_common_yqbg_1.png",i.skin=this._iconDir+this._tabInfo[3][this._tab[t]]+this._selectedSkin),this.event(n.CHANGE),this._tabInfo&&(0!==this._panelId&&(WindowManager.instance.isOpened(this._panelId)||(93===this._panelId?WindowManager.instance.open(this._panelId,99999):WindowManager.instance.open(this._panelId))),this.scrollConTo(114*t-275))}},l.prototype.downHandler=function(){this._lastX=this._con.mouseX,Laya.stage.on(n.MOUSE_MOVE,this,this.moveHandler),Laya.stage.on(n.MOUSE_UP,this,this.upHandler),Laya.stage.on(n.MOUSE_OUT,this,this.upHandler)},l.prototype.wheelHandler=function(t){var e=-8*t.delta;this.scrollX(e)},l.prototype.moveHandler=function(){var t=this._lastX-this._con.mouseX;this.scrollX(t),this._lastX=this._con.mouseX},l.prototype.upHandler=function(){Laya.stage.off(n.MOUSE_MOVE,this,this.moveHandler),Laya.stage.off(n.MOUSE_UP,this,this.upHandler),Laya.stage.off(n.MOUSE_OUT,this,this.upHandler)},l.prototype.scrollX=function(t){if(!(this._con.width<this._w)){var e=this._con.scrollRect;e.x=e.x+t,e.x<0?e.x=0:e.x>this._con.width-this._w&&(e.x=this._con.width-this._w),this._con.scrollRect=e}},l.prototype.scrollConTo=function(t){if(!(this._con.width<this._w)){var e=this._con.scrollRect;e.x=t,e.x<0?e.x=0:e.x>this._con.width-this._w&&(e.x=this._con.width-this._w),this._con.scrollRect=e}},l.prototype.destroy=function(t){if(this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),this._bgs){for(var e=0,i=this._bgs;e<i.length;e++)i[e].destroy(!0);this._bgs=null}if(this._imgs){for(var n=0,s=this._imgs;n<s.length;n++)s[n].destroy(!0);this._imgs=null}if(this._dotArr){for(var o=0,a=this._dotArr;o<a.length;o++)a[o].destroy(!0);this._dotArr=null}r.prototype.destroy.call(this,t)},a=l,y.BottomTab=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.bottomTab||(t.bottomTab={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={}},i=n,e.BottomTabModel=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.chat||(t.chat={}),n=ui.BlackListItemUI,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler)},o.prototype.setData=function(t){this._playerInfo=t,this.nameTxt.text=this._playerInfo[1]},o.prototype.cancelBtnHandler=function(){e.ChatModel.instance.blackListOpt=2,e.ChatCtrl.instance.blackListOpt([this._playerInfo,2])},s=o,e.ChatBlackListItem=s}(modules=modules||{}),function(p){!function(n){var s,i=p.common.CustomClip,o=Laya.Image,a=p.notice.SystemNoticeManager,r=p.vip.VipModel,t=(s=ItemRender,__extends(e,s),e.prototype.setData=function(t){s.prototype.setData.call(this,t);var e=t[0];(.001*e>>0)-1==0?(i.thisStop(this._btnClip),this._img||(this._img=new o("assets/icon/expression/"+e+".png"),this._img.scale(1.2,1.2),this.addChild(this._img)),this._img.skin="assets/icon/expression/"+e+".png",this._img.visible=!0,this.width=this.height=48):(this._img&&(this._img.visible=!1),this._btnClip||(this._btnClip=new i,this.addChild(this._btnClip),this._btnClip.durationFrame=5,this._btnClip.loop=!0),n.ChatModel.instance.setFaceEffFrame(this._btnClip,e),i.thisPlay(this._btnClip),this.width=this.height=64)},e.prototype.offEvt=function(){s.prototype.offEvt.call(this),i.thisStop(this._btnClip)},e.prototype.clickHandler=function(){s.prototype.clickHandler.call(this);var t=this._data[0];if((.001*t>>0)-1==0)n.ChatModel.instance.checkedFace.push(this._data[1]),GlobalData.dispatcher.event("CHECKED_FACE");else{var e=r.instance.vipLevel;if(n.ChatModel.instance.sendVipFaceTime==n.ChatModel.instance.maxExpertFaceTime&&e<n.ChatModel.instance.minSendVipFaceLv)return void a.instance.addNotice("发送高级表情次数已达上限",!0);var i=[n.ChatModel.instance.currChatChannel,2,t,"",n.ChatModel.instance.virtualItem,[],[],0,0];n.ChatCtrl.instance.sendChatMessage(i),WindowManager.instance.close(149)}},e.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),s.prototype.destroy.call(this,t)},e);function e(){return s.call(this)||this}n.ChatFaceItem=t;var l,h=(l=ui.ChatFacePkgItemUI,__extends(c,l),c.prototype.setData=function(t){var i=this;l.prototype.setData.call(this,t),this._img.skin="assets/icon/expression/"+t[0]+".png";var n=function(){var t=350*.55/i._img.width,e=70/i._img.height;e<t&&(t=e),i._img.scale(t,t,!0),i.off(Laya.Event.LOADED,i,n)};n(),this._img.on(Laya.Event.LOADED,this,n)},c.prototype.destroy=function(t){void 0===t&&(t=!0),this.base=this.destroyElement(this.base),this._img=this.destroyElement(this._img),l.prototype.destroy.call(this,t)},c.prototype.clickHandler=function(){l.prototype.clickHandler.call(this);var t=r.instance.vipLevel;if(n.ChatModel.instance.sendVipPkgcnt==n.ChatModel.instance.chatFacePKgMax&&t<n.ChatModel.instance.chatVipPkg)a.instance.addNotice("发送表情包次数已达上限",!0);else{var e=[n.ChatModel.instance.currChatChannel,6,this._data[0],"",n.ChatModel.instance.virtualItem,[],[],0,0];n.ChatCtrl.instance.sendChatMessage(e),WindowManager.instance.close(149)}},c);function c(){return l.call(this)||this}n.ChatFacePkgItem=h}(p.chat||(p.chat={}))}(modules=modules||{}),function(t){var s,e,i,n,o;function a(){return e.call(this)||this}s=t.chat||(t.chat={}),i=ui.ChatMarkedWordsItemUI,n=t.config.BlendCfg,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._index=-1,CommonUtil.setHTMLPro(this.conTxt,"#4C5E8A","SimHei",22),this.conTxt.style.lineHeight=40,this.conTxt.style.wordWrap=!0,this.conTxt.mouseEnabled=!1},a.prototype.setData=function(t){var e=t[0];this._index=t[1];try{this.conTxt.innerHTML=s.ChatModel.instance.chatFaceformatStr(e)}catch(t){console.log("chat_marked_words_item  html格式错误！！！")}this.conTxt.style.height=40;for(var i=0,n=this.conTxt.numChildren;i<n;i++)if(this.conTxt.getChildAt(i)instanceof Laya.HTMLImageElement){this.txtMiddle();break}},a.prototype.txtMiddle=function(){for(var t=0,e=this.conTxt.numChildren;t<e;t++){var i=this.conTxt.getChildAt(t);i instanceof Laya.HTMLImageElement||(i.y=-(this.conTxt.height-this.conTxt.style.fontSize)/2)}},a.prototype.clickHandler=function(){WindowManager.instance.close(146);var t=n.instance.getCfgById(26004)[2][this._index],e=[s.ChatModel.instance.currChatChannel,1,this._index,t,s.ChatModel.instance.virtualItem,[],[],0,0];s.ChatCtrl.instance.sendChatMessage(e)},o=a,s.ChatMarkedWordsItem=o}(modules=modules||{}),function(D){var L,e,t,k,U,H,O,F,i,G,n;function s(){return null!==e&&e.apply(this,arguments)||this}L=D.chat||(D.chat={}),t=ui.ChatMessageItemUI,k=D.config.BlendCfg,U=D.common.CustomClip,H=D.config.ItemMaterialCfg,O=D.config.ItemEquipCfg,F=D.config.ItemRuneCfg,i=D.bag.BagUtil,G=D.config.XianweiRiseCfg,e=t,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#1f304d","SimHei",22,"left","middle"),this.contentTxt.style.wordWrap=!0,this.contentTxt.style.leading=5,this._initFrameH=106,this.pkgMsc=["幸运","激励","拼手气","口令"]},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.shieldImg,this,this.shieldImgHandler),this.onAutoEvt(this.contentTxt,"link",this,this.linkHandler),this.onAutoClick(this.headIcon,this,this.playerInfoAlert),this.onAutoClick(this.redBagBox,this,this.redBagHanlder),this.onAutoGlobalEvt("RED_BAG_INFO_UPDTE",this,this.updateViewBag)},s.prototype.updateViewBag=function(){this.value&&this.updateView(this.value)},s.prototype.redBagHanlder=function(){var t=this.value[1];D.redBag.RedBagModel.instance.getPkgByUid(t[2])?(D.redBag.RedBagModel.instance.getUidOpenPanl(t[2]),D.redBag.RedBagCtrl.instance.sendData()):D.notice.SystemNoticeManager.instance.addNotice("该红包已过期",!0)},s.prototype.setData=function(t){t=t,this.value=t,this.updateView(t)},s.prototype.updateView=function(t){var e=PlayerModel.instance.actorId,i=t[0],n=t[1];this._otherPlayerPgId=i[9];var s=i[5],o=i[10];this.vipShowItem.setSVIPandVIP(o,s,i[16]);var a=i[0],r=0===a?"系统消息":i[2];if(this._playerInfo=[a,r],this.shieldImg.visible=!(a===e||0===a),0===a)this.headIcon.headImg.skin="assets/icon/head/xtxx.png",this.sexImg.skin=this.headIcon.frameImg.skin="";else{var l=i[3];this.sexImg.skin="chat/sex_"+l+".png";var h=i[11],c=i[12];this.headIcon.setInfo(h,l,c)}this._frameId=i[13],this.frameImg.skin=CommonUtil.chatFrameSkin(this._frameId);var p=i[6],u=G.instance.getXianweiRiseByLevel(p),d=u?"["+u[1]+"]":"";this.nameTxt.text=d+r,this.nameTxt.x=0===a?115:150;var m,f=n[1];this.contentTxt.visible=!0,this._expendFace&&(this._expendFace.visible=!1,this._expendFace.stop()),this.bgImg.height=75,this.contentTxt.style.height=55,this.contentTxt.y=45,this.facePkgImg.visible=!1,this.redBagBox.visible=!1,this.bgImg.visible=!0,this.bgImg2.visible=!0,this.height=140,this.box.y=0;var g=n[8],y=CommonUtil.timeFormat(g),_=g&&L.ChatModel.instance.chatItemIsShowTm(this.value);if(this.sendTmTxt.text=_?y:"",this.showTmBox.visible=_,0==f||9===f)m=n[3],this.setContent(m);else if(1==f){var v=n[2];m=L.ChatModel.instance.chatFaceformatStr(k.instance.chatMarkedWords[v]),this.setContent(m)}else if(2==f)v=n[2],this.contentTxt.visible=!1,this._expendFace||(this._expendFace=new U,this._expendFace.pos(140,35+(_?38:0)),this.addChild(this._expendFace)),this._expendFace.visible=!0,L.ChatModel.instance.setFaceEffFrame(this._expendFace,v),this._expendFace.play();else if(3==f){var I=n[4],b=(this._itemData=I)[0],C=CommonUtil.getItemTypeById(b),T=CommonUtil.getColorById(b),w=void 0;if(1==C||6==C||3==C)w=H.instance.getItemCfgById(b)[1];else if(5==C)w=O.instance.getItemCfgById(b)[1];else if(7==C){var x=1e4*(1e-4*b>>0);w=F.instance.getCfgById(x)[1]+"符文"}else 4==C&&(w=D.config.StoneCfg.instance.getCfgById(b)[2]);this.setContent("<a href= null ><span style='color:"+T+"'>["+w+"]</span></a>")}else if(4==f){var B=L.ChatUtil.parseBroadcaset(n);this.setContent(B)}else if(5==f)B=L.ChatUtil.parseBroadcaset(n),this.setContent(B);else if(6===f)this.facePkgImg.visible=!0,this.setContent(""),v=n[2],this.facePkgImg.skin="assets/icon/expression/"+v+".png";else if(7===f){this.setContent(""),v=n[2];var P=D.redBag.RedBagModel.instance.getPkgByUid(v);if(this.redBagBox.visible=!0,this.bgImg2.visible=this.bgImg.visible=!1,this.height=160,this.frameImg.skin="",P){var S=P[1];this.bagTxt3.text=this.pkgMsc[S-1]+"红包",this.bagTxt1.text=D.redBag.RedBagUtils.redBagMsc(P),this.bagTxt2.text=D.redBag.RedBagModel.instance.getPkgByNotice(P),this.redBagBg.skin=90140001===P[6]?"bottom/image_hbxt_01.png":"bottom/image_hbxt_10.png",this.bagTxt3.x=53,this.showIcon.skin=D.redBag.RedBagUtils.getStr(P[6])}else this.bagTxt3.text="过期红包",this.bagTxt1.text="红包已过期",this.bagTxt2.text="已过期",this.redBagBg.skin="bottom/image_hbxt_01.png",this.bagTxt3.x=19,this.showIcon.skin=""}else 8===f&&(v=n[2],(P=D.redBag.RedBagModel.instance.getPkgByUid(v))?(B="感谢<span style='color:#0ecf09'>【"+P[3][2]+"】</span>红包:"+n[3],this.setContent(B)):this.setContent(n[3]));var A=i[14];if(A)if(this.playerTitleBox.visible=!0,1e7<=A)this.playerTitleImg.skin="assets/icon/ui/designation_special/"+D.player_title.PlayerTitleModel.instance.getSpecialTitleSrcById(A)+".png";else{var M=D.config.DesignationCfg.instance.getCfgById(A);this.playerTitleImg.skin="assets/icon/ui/designation/"+M[2]+".png"}else this.playerTitleBox.visible=!1;this.setSize();var E=i[16],R=0===(E=void 0===E?0:E);this.isHideVip=!1,0<s?0!==a&&R?this.vipShowItem.vipBox.visible=!0:(this.vipShowItem.setChatSvipDis(),this.isHideVip=!0):this.vipShowItem.vipBox.visible=!(0===a),_&&(this.height+=38,this.box.y=38)},s.prototype.setSize=function(){55<this.contentTxt.height?(this.bgImg.height=this.contentTxt.height+20,this._frameId&&(this.frameImg.height=this._initFrameH+15),75<this.bgImg.height&&(this.height=this.bgImg.height+30+20,this.bgImg.height-=10)):this.frameImg.height=this._initFrameH},s.prototype.setContent=function(t){try{this.contentTxt.innerHTML=t}catch(t){console.log("聊天内容html格式错误！！！")}},s.prototype.linkHandler=function(t){t?L.ChatUtil.linkHandler(t):i.openBagItemTip([this._itemData[0],this._itemData[1],0,null])},s.prototype.shieldImgHandler=function(){L.ChatModel.instance.blackList.length>=k.instance.getCfgById(26007)[1][0]&&D.notice.SystemNoticeManager.instance.addNotice("黑名单已达上限",!0),WindowManager.instance.open(153,this._playerInfo)},s.prototype.playerInfoAlert=function(){if(0!==this._playerInfo[0]){L.ChatCtrl.instance.getChatDetailedInfo([PlayerModel.instance.actorId,this._playerInfo[0],this._otherPlayerPgId]);var t=this.value[0],e=t[5],i=t[10];WindowManager.instance.open(154,[e,i,this.isHideVip])}},s.prototype.close=function(){this.frameImg.skin="",e.prototype.close.call(this)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._expendFace=this.destroyElement(this._expendFace),e.prototype.destroy.call(this,t)},n=s,L.ChatMessageItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.chat||(t.chat={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.scale(.8,.8)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.needTip=!1},o.prototype.clickHandler=function(){i.prototype.clickHandler.call(this),WindowManager.instance.close(149),this.itemData[3]?(this.itemData[3][0]||(this.itemData[3][0]=[]),this.itemData[3][1]||(this.itemData[3][1]=[]),this.itemData[3][2]||(this.itemData[3][2]=[]),this.itemData[3][4]?this.itemData[3][4][1]||(this.itemData[3][4][1]=[]):this.itemData[3][4]=[0,[]]):this.itemData[3]=[[],[],[],[],[0,[]],0,0,0,0];var t=[e.ChatModel.instance.currChatChannel,3,0,"",this.itemData,[],[],0,0];e.ChatCtrl.instance.sendChatMessage(t)},s=o,e.ChatSendItem=s}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._dic=new n;for(var t=GlobalData.getConfig("broadcast"),e=0,i=t.length;e<i;e++)this._dic.set(t[e][0],t[e])},s.prototype.getCfgById=function(t){return this._dic.get(t)},i=s,e.BroadcastCfg=i}(modules=modules||{}),function(R){var t,c,D,L,k,U,H,O,F,G,e;function n(){}t=R.chat||(R.chat={}),c=R.core.WindowManager,D=R.config.BroadcastCfg,L=R.config.ExteriorCfg,k=R.config.BlendCfg,U=R.config.ItemMaterialCfg,H=R.config.ItemStoneCfg,O=R.config.ComposeCfg,F=R.config.BornCfg,G=R.config.ExerciseCfg,n.formatStr=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,s=e.length;n<s;n++)t=t.replace("#"+n+"#",e[n]);return t},n.parseBroadcaset=function(t,e){var i=t[2];if(0==i)return t[3];var n=t[0],s=t[6],o=t[5],a=D.instance.getCfgById(i);if(a){var r,l=a[1],h=[],c=null;switch(i){case 1:case 21:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 39:case 40:case 41:case 42:case 44:case 46:case 53:case 47:case 65:h=[s[0]];break;case 2:case 3:case 6:case 12:case 19:h=[s[0],o[0].toString()];break;case 83:case 89:case 100:h=[s[0]];break;case 106:case 107:case 108:case 110:case 114:case 115:case 116:case 117:case 126:h=[s[0]];break;case 113:h=[s[0],s[1].toString()];break;case 120:case 121:h=[s[0],o[0].toString(),o[1].toString(),s[1]];break;case 84:case 85:case 87:h=[s[0],s[1].toString()];break;case 15:case 17:case 7:case 34:case 36:case 4:var p=o[0],u=L.instance.getCfgById(p)[2],d=L.instance.getCfgById(p)[4];h=[s[0],"<span style='color:"+CommonUtil.getColorByQuality(d)+"'>"+u+"</span>"];break;case 5:c=null==c?21001:c;case 18:c=null==c?21004:c;case 16:c=null==c?21003:c;case 35:c=null==c?21005:c;case 37:c=null==c?21006:c;case 8:c=null==c?21002:c;var m=o[0],f=k.instance.getCfgById(c)[2][m];h=[s[0],f,o[1].toString()];break;case 9:p=o[0];var g=U.instance.getItemCfgById(p)[1];d=CommonUtil.getItemQualityById(p),h=[s[0],"<span style='color:"+CommonUtil.getColorByQuality(d)+"'>"+g+"</span>"];break;case 10:var y=R.config.AmuletRiseCfg.instance.getCfgBylevel(o[0])[4];h=[s[0],y];break;case 11:h=[s[0],""+R.config.SkillPureCfg.instance.getCfgById(o[0])[1]];break;case 13:p=o[0];var _=H.instance.getItemCfgById(p)[1];d=CommonUtil.getItemQualityById(p),h=[s[0],"<span style='color:"+CommonUtil.getColorByQuality(d)+"'>"+_+"</span>"];break;case 14:p=o[0];var v=O.instance.getCfgById(p)[2];d=CommonUtil.getItemQualityById(p),h=[s[0],"<span style='color:"+CommonUtil.getColorByQuality(d)+"'>"+v+"</span>"];break;case 20:var I=R.config.MonsterResCfg.instance.getMonsterName(o[0]);h=[s[0],I];break;case 22:var b=R.config.XianweiRiseCfg.instance.getXianweiRiseByLevel(o[0])[1];h=[s[0],b];break;case 23:var C=o[0],T=F.instance.getCfgByLv(C),w=T?T[1]:"转生等级未配置";h=[s[0],w];break;case 24:C=o[0];var x=G.instance.getZLLCfgByLev(C)[6];h=[s[0],x];break;case 32:r=s[1],h=[s[0]];break;case 33:r=s[1];var B=s[0],P=o[0],S=R.faction.FactionUtil.boxName[P];h=["<span style='color:"+(3===n?"#ffec7c":"#ea8706")+"'>"+B+"</span>","<span style='color:"+CommonUtil.getColorByQuality(P+1)+"'>"+S+"</span>"];break;case 52:case 45:case 43:r=o[1]+"#"+o[2],h=[o[0].toString()];break;case 48:case 54:case 57:case 70:case 55:case 61:case 64:case 69:case 63:case 72:case 76:case 79:case 91:case 96:case 93:case 73:case 78:case 80:case 95:case 97:case 102:case 99:case 103:case 122:case 124:case 125:case 127:case 128:case 135:case 136:case 137:case 138:case 77:r=""+o[0],h=[o[0].toString()];break;case 67:break;case 94:case 49:case 98:case 68:case 129:case 130:case 131:case 132:case 133:case 134:r="\n                    "+(s?s[1]:0)+"\n                    #"+(s?s[0]:"")+"\n                    #"+(s?s[2]:0)+"\n                    #"+(s?s[3]:0)+"\n                }\n                    ";var A=0;s[3]&&(A=parseInt(s[3])),h=[CommonGroupUtil.getTextByType([CommonGroupUtil.getTeamTypeByBroadcastId(i),A])];break;case 50:h=[s[0],s[1]];break;case 51:h=[s[0]];break;case 56:h=[s[0],s[1]];break;case 58:case 60:case 59:case 4158:case 4159:case 4160:case 4958:case 4959:case 4960:case 71:h=[s[0],s[1]];break;case 74:h=[s[0],o[0].toString()];break;case 75:h=[s[0]]}l=this.formatStr.apply(this,[l].concat(h));var M=D.instance.getCfgById(i)[2],E='<a href="'+(r=M[1]+"#"+r)+"\"><span style='color:"+(3===n?"#50ff28":"#168a17")+"'>"+(M[0]?M[0]:"")+"</span></a>";return E=E||"",l+=e?"":E}},n.linkHandler=function(t){var e=t.split("#"),i=parseInt(e[0]);if(159==i){var n=e[1];R.faction.FactionCtrl.instance.joinFaction([n,0])}else if(186==i){var s=e[1];c.instance.open(279,s)}else if(187==i)c.instance.open(280);else if(263===i){var o=parseInt(e[1]),a=parseInt(e[2]);R.mission.MissionCtrl.instance.tianguanAssist(o,a)}else if(-1!=CommonGroupUtil.ActionOpenIdArr.indexOf(i)){var r=parseInt(e[1]),l=parseInt(e[3]),h=parseInt(e[4]);CommonGroupUtil.chatHyperlinksClick(!1,!0,i,r,l,h)}else 338===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,4)):397===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,R.festival.FestivalModel.instance.zhiZhenType)):1030===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,R.festival.FestivalModel.instance.PerfectestTenType)):797===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,33)):842===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,36)):859===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,40)):985===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,R.festival.FestivalModel.instance.ChildrensDayType)):871===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,R.festival.FestivalModel.instance.AnniversaryDayType)):810===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,12)):832===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,34)):843===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,37)):904===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,46)):991===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,55)):1028===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,R.festival.FestivalModel.instance.BarDayType)):1047===i?(o=parseInt(e[1]),R.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(o,R.festival.FestivalModel.instance.SpringSceneryType)):569===i?c.instance.open(865):464===i?c.instance.openByActionId(464):469===i?(o=parseInt(e[0]),R.hit_engineer.HitEngineerModel.instance.openAlert(o,R.hit_engineer.HitEngineerModel.instance.festivalType)):0===i?window.open(e[1]):971===i?c.instance.open(1474):c.instance.openByActionId(i)},n.getChatPanelByChatType=function(t){var e;switch(t){case 1:e=147;break;case 2:e=150;break;case 4:e=276;break;case 3:e=151;break;case 5:e=513;break;case 6:e=761}return e},n.openTypePanel=function(t,e){c.instance.open(n.jumpWinDowEnum[t],e)},n.closeOtherPanl=function(t){for(var e=0,i=n.jumpWinDowEnum.length;e<i;e++)e!=t&&c.instance.close(n.jumpWinDowEnum[e])},n.jumpWinDowEnum=[154,1502,1503,1504],e=n,t.ChatUtil=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.chat||(t.chat={}),i=ui.MoneyCatItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.goldImg.skin="assets/icon/item/1_s.png"},s.prototype.setData=function(t){var e="零一二三四五六七八九十";this.goldImg.visible=this.valueText.visible=!1,this.valueTxt.text="转生重数达到"+e[Math.floor(t[1]/100)]+"转"+e[t[1]%100]+t[3]+t[2],t[0]?(this.stateTxt.text="未激活",this.stateTxt.color="#b0b0b0",this.valueTxt.color="#b0b0b0",this.valueText.color="#b0b0b0"):(this.stateTxt.text="已激活",this.stateTxt.color="#0ecf09",this.valueTxt.color="#0ecf09",this.valueText.color="#0ecf09")},n=s,e.OtherCatTipsItem=n}(modules=modules||{}),function(t){var i,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}i=t.chat||(t.chat={}),e=ui.OtherPlayerInfoItemUI,__extends(s,e),s.prototype.setData=function(t){var e=90===Math.floor(t[0]/1e3)?.6:.4;this.model.scaleX=this.model.scaleY=e,this.testTxt.text=t[1]+"阶",this.nameTxt.skin="assets/icon/ui/show_txt/"+(-1===i.ChatModel.instance.showIds.indexOf(t[0])?"0000":t[0])+".png"},n=s,i.OtherPlayerInfoItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.chat||(t.chat={}),n=ui.PlayerInfoTxtItemUI,i=n,__extends(o,i),o.prototype.setData=function(t){var e=(t=t)[0];this.attTxt_0.text=e+"激活数量:",this.attTxt_1.text=e+"总战力:",this.valueTxt_0.text=t[1].toString(),this.valueTxt_1.text=CommonUtil.bigNumToString(t[2])},s=o,e.PlayerInfoTxtItem=s}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.chat||(t.chat={}),n=t.chat.ChatUtil,s=Laya.HTMLDivElement,o=Laya.Image,i=ItemRender,__extends(r,i),r.prototype.destroy=function(){this._txt=this.destroyElement(this._txt),this._img=this.destroyElement(this._img),i.prototype.destroy.call(this)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this.width=612,this._img=new o("chat/image_lt_xt.png"),this.addChild(this._img),this._txt=new s,this._txt.style.width=this.width-this._img.width,this._txt.x=this._img.width+6,CommonUtil.setHTMLPro(this._txt,"#ffffff","SimHei",22),this._txt.style.wordWrap=!0,this.addChild(this._txt)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._txt,"link",this,this.linkHandler)},r.prototype.setData=function(t){t=t,this.updateView(t)},r.prototype.updateView=function(t){var e=n.parseBroadcaset(t[1]);this._txt.innerHTML=e,this._txt.style.height=this.height=this._txt.contextHeight},r.prototype.linkHandler=function(t){n.linkHandler(t)},a=r,e.SystemMessageItem=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.common||(t.common={}),n=Laya.Loader,i=Laya.Image,__extends(o,i),Object.defineProperty(o.prototype,"atlas",{get:function(){return this._atlas||null},set:function(t){if(this._atlas!=t)if(n.clearCache(this,this._atlas),this._atlas=t)if(n.keepCache(this,this._atlas),n.getRes(t)&&this._skin){var e=n.getRes(this._skin);e&&(this.source=e,this.onCompResize())}else Laya.loader.load(this._atlas,Handler.create(this,this.setSource,[this._atlas]));else this.source=null},enumerable:!0,configurable:!0}),o.prototype.setSource=function(t,e){if(t===this._atlas&&e&&this._skin){var i=n.getRes(this._skin);i&&(this.source=i,this.onCompResize())}},Object.defineProperty(o.prototype,"skin",{set:function(t){if(this._skin!=t)if(n.clearCache(this,this._skin),this._skin=t){n.keepCache(this,this._skin);var e=n.getRes(t);e&&(this.source=e,this.onCompResize())}else this.source=null},enumerable:!0,configurable:!0}),o.prototype.destroy=function(t){i.prototype.destroy.call(this,!0),n.clearCache(this,this._atlas)},s=o,e.AtlasImage=s}(modules=modules||{}),function(t){var l,h,e;function i(){}l=t.common||(t.common={}),h=utils.tween.TweenGroup,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.addNotice=function(t,e){var i=this;if(t){this._tweenGroup||(this._tweenGroup=new h);for(var n=0,s=this._tweenGroup.getAll();n<s.length;n++)if(s[n].isPlaying)return;var o=t.x,a=t.x,r=a+t.width+70;TweenJS.create(t,this._tweenGroup).to({x:r,alpha:.5},300).onComplete(function(){t.x=70-r,TweenJS.create(t,i._tweenGroup).to({x:a,alpha:1},300).onComplete(function(){i.index=null,l.GlobalData.dispatcher.event(e),i._tweenGroup.destroy(),i._tweenGroup=null}).onStop(function(){i.index=null,t&&(t.alpha=1,t.x=o)}).easing(utils.tween.easing.circular.InOut).start()}).onStop(function(){i.index=null,t&&(t.alpha=1,t.x=o)}).start()}},i.prototype.stop=function(){this.index=null,this._tweenGroup&&(this._tweenGroup.removeAll(),this._tweenGroup.destroy(),this._tweenGroup=null)},Object.defineProperty(i.prototype,"isPlaying",{get:function(){if(!this._tweenGroup)return!1;for(var t=0,e=this._tweenGroup.getAll();t<e.length;t++)if(e[t].isPlaying)return!0;return!1},enumerable:!0,configurable:!0}),e=i,l.ItemRenderNoticeManager=e}(modules=modules||{}),function(i){var n,t;function s(){}n=i.common||(i.common={}),s.getMiniGameType=function(){return window&&window.JZ_MiniGameType?window.JZ_MiniGameType:1},s.initMiniGameAdpter=function(){var t=s.getMiniGameType();2==t?Laya.MiniAdpter.init():3==t?Laya.QGMiniAdapter.init():4==t&&Laya.VVMiniAdapter.init()},s.miniSystemInfoSync=function(){var t=s.getMiniGameType();if(2==t)20<(e=window.wx.getSystemInfoSync()).statusBarHeight&&(n.CommonConfig.topOffset=e.statusBarHeight/e.screenHeight*n.CommonConfig.viewHeight);else if(3==t)20<(e=window.qg.getSystemInfoSync()).statusBarHeight&&(n.CommonConfig.topOffset=e.statusBarHeight/e.screenHeight*n.CommonConfig.viewHeight);else if(4==t){var e;20<(e=window.qg.getSystemInfoSync()).statusBarHeight&&(n.CommonConfig.topOffset=e.statusBarHeight/e.screenHeight*n.CommonConfig.viewHeight)}},s.isMiniGame=function(){return 1!=s.getMiniGameType()},s.onWxMiniGame=function(){return 2==s.getMiniGameType()},s.onOppoMiniGame=function(){return 3==s.getMiniGameType()},s.onVivoMiniGame=function(){return 4==s.getMiniGameType()},s.copyClipboard=function(e){if(s.onWxMiniGame())n.PlatParams.setClipboardData(e,function(){i.notice.SystemNoticeManager.instance.addNotice("复制成功",!1)},function(){console.log("复制失败")});else if(s.onOppoMiniGame())n.PlatParams.setOppoClipboardData(e,function(){i.notice.SystemNoticeManager.instance.addNotice("复制成功",!1)},function(){console.log("复制失败")});else if(s.onVivoMiniGame())n.PlatParams.setVivoClipboardData(e,function(){i.notice.SystemNoticeManager.instance.addNotice("复制成功",!1)},function(){console.log("复制失败")});else{var t=function(t){t.clipboardData.setData("text/plain",e),t.preventDefault(),i.notice.SystemNoticeManager.instance.addNotice("复制成功",!1)};document.addEventListener("copy",t),document.execCommand("copy"),document.removeEventListener("copy",t)}},t=s,n.MiniGameUtil=t}(modules=modules||{}),function(t){var e,r,i,n,s;function o(t,e,i,n,s,o){void 0===n&&(n=1),void 0===s&&(s=null),void 0===o&&(o=null);var a=r.call(this,t,e,i,s,o)||this;return a.valueUnit=n,a}e=t.common||(t.common={}),i=Laya.Event,n=t.notice.SystemNoticeManager,r=e.NumInputCtrl,__extends(o,r),o.prototype.addHandler=function(){this.value+=this.valueUnit},o.prototype.minusHandler=function(){this.value-=this.valueUnit},o.prototype.addTenHandler=function(){this.value+=10*this.valueUnit},o.prototype.minusTenHandler=function(){this.value-=10*this.valueUnit},Object.defineProperty(o.prototype,"value",{get:function(){return this._value},set:function(t){t<this.min&&(t=this.min,null!=this._noticeError&&n.instance.addNotice("加价金额不能低于当前数额",!0)),t>this.max&&(t=this.max,null!=this._noticeError&&t===this._value&&n.instance.addNotice("当前加价已可一口价购买该物品",!0)),this._value=t,this._txt.text=this._value.toString(),this.event(i.CHANGE)},enumerable:!0,configurable:!0}),s=o,e.NumLabelCtrl=s}(modules=modules||{}),function(t){var e,c,i,n;function s(t,e,i,n,s,o,a,r,l){void 0===r&&(r=null),void 0===l&&(l=null);var h=c.call(this)||this;if(!i)throw new Error("step值不合法");if(!e||e<0)throw new Error("max值不合法");if(!t&&0!==t)throw new Error("min值不合法");if(!a)throw new Error("滑动底图空");return h._step=i,h._max=e,h._min=t,h._copies=h._max-h._min,h._startPos=n,h._endPos=s,h._value=0,h._slideBtn=o,h._slideBackImg=a,h._addBtn=r,h._minusBtn=l,h._slideBtn&&(h._slideBtn.x=h._startPos),h}e=t.common||(t.common={}),i=Laya.EventDispatcher,c=i,__extends(s,c),s.prototype.addListeners=function(){this._addBtn&&this._addBtn.on("click",this,this.addHandler),this._minusBtn&&this._minusBtn.on("click",this,this.minusHandler),this._slideBtn.on("mousedown",this,this.downHandler),this._slideBackImg.on("mousedown",this,this.downHandler),Laya.stage.on("mouseup",this,this.upHandler)},s.prototype.removeListeners=function(){this._addBtn&&this._addBtn.off("click",this,this.addHandler),this._minusBtn&&this._minusBtn.off("click",this,this.minusHandler),this._slideBtn.off("mousedown",this,this.downHandler),this._slideBackImg.off("mousedown",this,this.downHandler),Laya.stage.off("mouseup",this,this.upHandler),this.upHandler()},Object.defineProperty(s.prototype,"step",{get:function(){return this._step},set:function(t){this._step!==t&&(this._step=t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"max",{get:function(){return this._max},set:function(t){this._max!==t&&(this._max=t,this._copies=this._max-this._min)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"min",{get:function(){return this._min},set:function(t){this._min!==t&&(this._min=t,this._copies=this._max-this._min)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){return this._value},set:function(t){t>this._max&&(t=this._max),t<this._min&&(t=this._min),this._value=t,this._slideBtn.x=this._startPos+(this._endPos-this._startPos)/this._copies*this.index,this.event("change")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){for(var t=0,e=this._min;e<=this._max;e++){if(e===this._value)return t;t++}return-1},enumerable:!0,configurable:!0}),s.prototype.addHandler=function(){this.value=this._value+this._step},s.prototype.minusHandler=function(){this.value=this._value-this._step},s.prototype.downHandler=function(){this._downPos=Laya.stage.mouseX,Laya.stage.on("mousemove",this,this.moveHandler),Laya.stage.on("mouseout",this,this.upHandler)},s.prototype.upHandler=function(){Laya.stage.off("mousemove",this,this.moveHandler),Laya.stage.off("mouseout",this,this.upHandler)},s.prototype.moveHandler=function(){var t=Laya.stage.mouseX,e=t-this._downPos,i=(this._endPos-this._startPos)/this._copies;if(!(Math.abs(e)<i)){var n=e/i>>0;this.value=this._value+n,this._downPos=t}},s.prototype.destroy=function(){this.removeListeners(),this._addBtn=null,this._minusBtn=null,this._slideBtn=null},n=s,e.SlideCtrl=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.commonAlert||(t.commonAlert={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!1,this.needTip=!0},o.prototype.setDataSource=function(t){t&&(t=[t[0],1,0,null],i.prototype.setDataSource.call(this,t))},s=o,e.CommonHuoDeRewardItem=s}(modules=modules||{}),function(t){var e,s,i;function n(){var t=null!==s&&s.apply(this,arguments)||this;return t._modelClipArr=[],t._avatarRotationYArr=[],t._typeNumArr=[],t.isObservation=!1,t}e=t.commonAlert||(t.commonAlert={}),s=ui.CommonObservationItemUI,__extends(n,s),n.prototype.initialize=function(){s.prototype.initialize.call(this),this.setui()},n.prototype.setui=function(){this.isObservation=1===t.config.BlendCfg.instance.getCfgById(99801)[1][0],this.showRangeImg.visible=!1},n.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoEvt(this,"mousedown",this,this.itemDownHandler),this.onAutoEvt(this,"mouseup",this,this.itemUpHandler),this.onAutoEvt(this,"mousemove",this,this.itemMoveHandler),this.onAutoEvt(this,"mouseout",this,this.outHandler)},n.prototype.setData=function(t){if(s.prototype.setData.call(this,t),t&&(this.setui(),this.claerAll(),this.isObservation)){for(var e=0;e<t.length;e++){var i=t[e];this._modelClipArr.push(i[0]),this._typeNumArr.push(i[1])}if(this.getBoll())for(e=0;e<this._modelClipArr.length;e++){i=this._modelClipArr[e];var n=this._typeNumArr[e];i&&(9==n||10==n||8===n||(15===n?i.avatarRotationZHXY2():this._avatarRotationYArr[e]=i.avatarRotationY))}this._isMove=!1,this.setRot()}},n.prototype.itemDownHandler=function(){this.isObservation&&(this._isMove=!1,this._downPosX=this.mouseX,this._time=Browser.now(),this.isRotate()&&(this._isMove=!0))},n.prototype.itemUpHandler=function(){this.isObservation&&(this._time=Browser.now(),this._isMove=!1)},n.prototype.outHandler=function(){this.isObservation&&this.itemUpHandler()},n.prototype.itemMoveHandler=function(t){var n=this;if(this.isObservation&&this._isMove){var e=this.mouseX-this._downPosX;if(this.isObservation&&this.isRotate()){if(this.getBoll()){var s=e/this.width*900;s=s;var i=function(t){var e=n._modelClipArr[t],i=n._typeNumArr[t];e&&(9==i||10==i||8===i||(15===i?e.avatarRotationZHXY(s):11!=i&&(e.avatarRotationY+=s)))};if(1<this._modelClipArr.length)for(var o=0;o<this._modelClipArr.length;o++)i(o);else i(0)}this._downPosX=this.mouseX}}},n.prototype.isRotate=function(){laya.maths.Point.TEMP.setTo(this.mouseX,this.mouseY);var t=this.localToGlobal(laya.maths.Point.TEMP,!0);return this.hitTestPoint(t.x,t.y)},n.prototype.setRot=function(){if(this.getBoll())for(var t=0;t<this._modelClipArr.length;t++){var e=this._modelClipArr[t],i=this._typeNumArr[t];if(e&&9!=i&&10!=i&&8!==i)if(15===i)e.avatarRotationZHXY1();else{var n=this._avatarRotationYArr[t];null!=n&&(e.avatarRotationY=n)}}},n.prototype.isPlayerTween=function(t){if(this.getBoll())for(var e=0;e<this._modelClipArr.length;e++){var i=this._modelClipArr[e],n=this._typeNumArr[e];i&&11===n&&(t?(i.isPlayerTween(!0),i.setActionType("show")):i.isPlayerTween(!1))}},n.prototype.getBoll=function(){return this._modelClipArr&&this._typeNumArr&&this._modelClipArr.length===this._typeNumArr.length},n.prototype.destroy=function(){this.claerAll(),s.prototype.destroy.call(this,!0)},n.prototype.close=function(){s.prototype.close.call(this),this.setRot(),this.claerAll(),this.isObservation=!1},n.prototype.claerAll=function(){this._isMove=!1,this._modelClipArr&&(this._modelClipArr.length=0),this._modelClipArr&&(this._typeNumArr.length=0),this._avatarRotationYArr&&(this._avatarRotationYArr.length=0)},i=n,e.CommonObservationItem=i}(modules=modules||{}),function(r){var t,e,i,l,n;function s(){var t=e.call(this)||this;return t._showId=null,t._isModel=null,t._isMove=null,t._faZhenModelPosY=60,t._fashionModelPosY=100,t._lingChongModelPosY=80,t._xianYiModelPosY=80,t._xainQiModelPosY=80,t._shenBingModelPosY=80,t._tianZhuModelPosY=80,t._tuJianModelCenterY=0,t._imgCenterY=0,t._isUpdate=!0,t}t=r.commonAlert||(r.commonAlert={}),i=r.common.AvatarClip,l=r.config.ExteriorCfg,e=ui.CommonRewardShowItemUI,__extends(s,e),Object.defineProperty(s.prototype,"imgCenterY",{set:function(t){t&&(this._imgCenterY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"faZhenModelPosY",{set:function(t){t&&(this._faZhenModelPosY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fashionModelPosY",{set:function(t){t&&(this._fashionModelPosY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lingChongModelPosY",{set:function(t){t&&(this._lingChongModelPosY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xianYiModelPosY",{set:function(t){t&&(this._xianYiModelPosY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xainQiModelPosY",{set:function(t){t&&(this._xainQiModelPosY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"shenBingModelPosY",{set:function(t){t&&(this._shenBingModelPosY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tianZhuModelPosY",{set:function(t){t&&(this._tianZhuModelPosY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tuJianModelCenterY",{set:function(t){t&&(this._tuJianModelCenterY=t),this.upDateRewardObj()},enumerable:!0,configurable:!0}),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._modelClip=i.create(1024,1024,1024),this.moXingBox.addChild(this._modelClip),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.y=110,this._modelClip.visible=!1,this.setDataFun()},s.prototype.setDataFun=function(t){if(void 0===t&&(t=[1,1,1,1,"assets/icon/ui/sprint_rank/"]),t&&(this._date=t),this._date){var e=this._date[0],i=this._date[1];this.modelImg.scale(e,e,!0),this.archiveItem.scale(i,i,!0)}},s.prototype.stopTween=function(){this._modelClipTween&&this._modelClipTween.stop(),this._modeBaseImgTween&&this._modeBaseImgTween.stop()},s.prototype.disModel=function(){this.stopTween(),this.modelImg.visible=!1,this.archiveItem.visible=!1,this._modelClip&&(this._modelClip.visible=!1)},s.prototype.upDateRewardObj=function(){null!=this._showId&&null!=this._isModel&&null!=this._isMove&&this._isUpdate&&this.showRewardObj(this._showId,this._isModel,this._isMove)},s.prototype.showRewardObj=function(t,e,i,n){void 0===n&&(n=-1),this._showId=t,this._isModel=e,this._isMove=i,this.stopTween(),this.modelImg.visible=!1,this.archiveItem.visible=!1,this._modelClip&&(this._modelClip.visible=!1);var s=this._date[4];if(0===e||1===e)this.showModelClip(t,e,i,n);else if(2===e||4===e)this.modelImg.skin=2===e?""+s+t+".png":""+s+t+".jpg",this.modelImg.visible=!0,this.modelImg.centerY=this._imgCenterY,this.isModeBaseImgTween(i);else if(3===e){this.archiveItem.centerY=this._tuJianModelCenterY;var o=r.config.ArchiveCfg.instance.getCfgByIdAndLv(t,0);if(o){var a=this._date[1];this.archiveItem.data=o,this.archiveItem.setVisible(),this.archiveItem.visible=!0,this.archiveItem.scale(a,a,!0),this.isModeBaseImgTween(i)}}},s.prototype.modelRest=function(t,e){Math.round(t/1e3),1==e?this._modelClip.reset(0,0,0,0,t):this._modelClip.reset(t)},s.prototype.isModeBaseImgTween=function(t){this._modeBaseImgTween&&this._modeBaseImgTween.stop(),this.modeBaselImg.y=-35,1==t&&(this._modeBaseImgTween?this._modeBaseImgTween.to({y:this.modeBaselImg.y-10},1e3).yoyo(!0).repeat(99999999):this._modeBaseImgTween=TweenJS.create(this.modeBaselImg).to({y:this.modeBaselImg.y-10},1e3).yoyo(!0).repeat(99999999),this._modeBaseImgTween.start())},s.prototype.showModelClip=function(t,e,i,n){void 0===n&&(n=-1);var s=this._date[2],o=this._date[3];this._modelClipTween&&this._modelClipTween.stop();var a=Math.floor(t/1e3);90===a&&(t=-1===n?t-t%10+PlayerModel.instance.occ:t-t%10+n);var r=l.instance.getCfgById(t);this._modelClip.y=80,this._modelClip.avatarScale=r[10]*s,1==e?9!=a&&10!=a||(this._modelClip.reset(0,0,0,0,t),this._modelClip.y=this._faZhenModelPosY):(this._modelClip.reset(t),2==a?this._modelClip.y=this._lingChongModelPosY:3==a?this._modelClip.y=this._xianYiModelPosY:4==a?this._modelClip.y=this._xainQiModelPosY:5==a?this._modelClip.y=this._shenBingModelPosY:90==a?(this._modelClip.avatarScale=r[10]*o,this._modelClip.y=this._fashionModelPosY):11==a&&(this._modelClip.setActionType("show"),this._modelClip.y=this._tianZhuModelPosY)),this._modelClip.avatarRotationX=r[6],this._modelClip.avatarRotationY=r[7],this._modelClip.avatarY=r[9],this._modelClip.avatarX=r[8],1==i&&(this._modelClipTween?this._modelClipTween.to({y:this._modelClip.y-10},1e3).start().yoyo(!0).repeat(99999999):this._modelClipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-10},1e3).start().yoyo(!0).repeat(99999999)),this._modelClip&&(this._modelClip.visible=!0)},s.prototype.setActionType=function(){0===this._isModel&&this._modelClip.setActionType("show",0)},s.prototype.close=function(){e.prototype.close.call(this),this.stopTween()},s.prototype.destroy=function(){this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),this._modeBaseImgTween&&(this._modeBaseImgTween.stop(),this._modeBaseImgTween=null),this._modelClip=this.destroyElement(this._modelClip),e.prototype.destroy.call(this,!0)},n=s,t.CommonRewardShowItem=n}(modules=modules||{}),function(t){var e,a,i,r,n;function s(){return null!==a&&a.apply(this,arguments)||this}e=t.commonAlert||(t.commonAlert={}),i=t.bag.BagItem,r=t.config.ItemEquipCfg,a=i,__extends(s,a),s.prototype.setDataSource=function(t){if(a.prototype.setDataSource.call(this,t),null!=t){var e=t[0];if(1===CommonUtil.getBagIdById(e)){var i=CommonUtil.getPartById(e),n=PlayerModel.instance.getEquipByPart(i),s=r.instance.getItemCfgById(e)[14][0],o=n?r.instance.getItemCfgById(n[0])[14][0]:0;this.upImgVisible=o<s}}},n=s,e.ManualGiftBagItem=n}(modules=modules||{}),function(t){var e,s,o,a,r,i;function n(){return s.call(this)||this}e=t.commonAlert||(t.commonAlert={}),o=t.common.CommonUtil,a=t.config.ItemRuneCfg,r=t.commonAlert.ManualGiftBagItem,s=ui.ManualGiftAlertItemUI,__extends(n,s),n.prototype.destroy=function(){this._BagItem=this.destroyElement(this._BagItem),this._date=null,s.prototype.destroy.call(this)},n.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.changBtn,this,this.checkBoxHandler)},n.prototype.setData=function(t){s.prototype.setData.call(this,t);var e=(this._date=t)[0];if(this._BagItem||(this._BagItem=new r,this.addChild(this._BagItem),this._BagItem.pos(10,0)),this._BagItem.dataSource=[e,this._date[1],0,null],7===o.getItemTypeById(e)){var i=1e4*(1e-4*e>>0),n=a.instance.getCfgById(i);this._BagItem._nameTxt.text=n[1]+" Lv."+e%1e4}this.changBtn.selected=!1,this._selectEnable=!1},n.prototype.setSelected=function(t){s.prototype.setSelected.call(this,t),this.chooseFun()},n.prototype.checkBoxHandler=function(){this._date&&this.chooseFun()},n.prototype.chooseFun=function(){e.ManualGiftModel.instance._selectedCheckBox&&(e.ManualGiftModel.instance._selectedCheckBox.selected=!1),this.changBtn.selected=!0,e.ManualGiftModel.instance._selectedCheckBox=this.changBtn,e.ManualGiftModel.instance._selectedItem=this._date},i=n,e.ManualGiftItem=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.compose||(t.compose={}),n=t.common.CustomList,s=Laya.Event,i=ui.ComposeAddAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._showIds=new Array,this._list=new n,this._list.scale(.7,.7),this._list.scrollDir=1,this._list.itemRender=e.ComposeAddItem,this._list.spaceY=3,this._list.width=300,this._list.height=300,this._list.hCount=1,this._list.x=25,this._list.y=95,this.addChild(this._list)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),GlobalData.dispatcher.on("ADD_EQUIP",this,this.close),Laya.stage.on(s.MOUSE_DOWN,this,this.stageClickHandler),this.deleteBtn.on(s.MOUSE_DOWN,this,this.unloadHandler)},a.prototype.offEvt=function(){GlobalData.dispatcher.off("ADD_EQUIP",this,this.close),Laya.stage.off(s.MOUSE_DOWN,this,this.stageClickHandler),this.deleteBtn.off(s.MOUSE_DOWN,this,this.unloadHandler)},a.prototype.unloadHandler=function(){var t=e.ComposeModel.instance.currEquipId;t[e.ComposeModel.instance.currEquipPic]=null,e.ComposeModel.instance.currEquipId=t,GlobalData.dispatcher.event("ADD_EQUIP")},a.prototype.stageClickHandler=function(t){t.target instanceof e.ComposeAddItem||t.target===this._list||t.target===this||this.close()},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),0==t[0]||2==t[0]||3==t[0]?this.pos(300,383):this.pos(105,383),e.ComposeModel.instance.currEquipPic=t[0],this._cfg=t[1],this.updataBagValue(this._cfg)},a.prototype.updataBagValue=function(t){this._showIds=e.ComposeModel.instance.getEquip(t),0<this._showIds.length?this.updateText(!1,t[7]):this.updateText(!0,t[7]),this._list.datas=this._showIds},a.prototype.updateText=function(t,e){var i="<span style='color:#fdfdff;font-size: 20px'>背包中缺少</span>";i+="<span style='color:#c96300;font-size: 20px'>"+e+"</span>",this.tipsText.innerHTML=i,this.tipsText.visible=t},Object.defineProperty(a.prototype,"showDelBtn",{set:function(t){this.deleteBtn.visible=t,this.height=this.bgImg.height=t?401:325},enumerable:!0,configurable:!0}),a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.ComposeAddAlert=o}(modules=modules||{}),function(t){var o,a,e;function i(){return a.call(this)||this}o=t.compose||(t.compose={}),a=ui.ComposeEquipItemUI,__extends(i,a),i.prototype.initialize=function(){a.prototype.initialize.call(this),this.itemBtn.selected=!0,this._nameArray=["武器","帽子","衣服","护手","鞋子","腰带","项链","手镯","戒指","玉佩"],this._item=new o.ComposeItem,this._item.needTip=!1,this._item.scale(.8,.8),this._item.pos(5,5),this.addChild(this._item)},i.prototype.setData=function(t){a.prototype.setData.call(this,t);var e=t;this._itemId=e[1],this._item.setData(this._itemId);var i=(.1*this._itemId>>0)%100;this.typeLabel.text=this._nameArray[i-1];var n=e[0],s=o.ComposeModel.instance.setNum(n);this.redDot.visible=3<=s},i.prototype.setSelected=function(t){a.prototype.setSelected.call(this,t),this.itemBtn.selected=!t},e=i,o.ComposeEquipItem=e}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.compose||(t.compose={}),n=t.bag.BagItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!1,this.needTip=!0},o.prototype.setDataSource=function(t){var e=[t[0],t[1],0,null];i.prototype.setDataSource.call(this,e),this._nameTxt.visible=!1},o.prototype.destroy=function(){i.prototype.destroy.call(this,!0)},s=o,e.ComposeRewardItem=s}(modules=modules||{}),function(t){var s,o,e,i;function n(){return null!==o&&o.apply(this,arguments)||this}s=t.compose||(t.compose={}),e=ui.ComposeSelectItemUI,o=e,__extends(n,o),n.prototype.initialize=function(){o.prototype.initialize.call(this),this.redDot.visible=!1},n.prototype.setData=function(t){o.prototype.setData.call(this,t);var e=t[1],i=t[2];if(0==t[3]){var n=t[0];this.redDot.visible=s.ComposeModel.instance.checkPoint(e,i),this._bagSelectData=n[4][1]}else n=t[0],this._bagSelectData=n[2];this.dataText.text=this._bagSelectData},i=n,s.ComposeSelectItem=i}(modules=modules||{}),function(i){var c,p,u,t,e,d,n,s,o,a;function r(){return null!==p&&p.apply(this,arguments)||this}c=i.compose||(i.compose={}),u=i.common.CustomList,t=ui.ComposeSelectViewUI,e=Laya.Event,d=i.config.ComposeCfg,n=i.notice.SystemNoticeManager,s=i.config.BlendCfg,o=i.funcOpen.FuncOpenModel,p=t,__extends(r,p),r.prototype.initialize=function(){p.prototype.initialize.call(this),this._list=new u,this._list.scrollDir=1,this._list.itemRender=c.ComposeSelectItem,this._list.vCount=2,this._list.hCount=1,this._list.width=607,this._list.height=89,this._list.x=0,this._rowH=56,this._list.visible=!1,this._list.y=63,this.addChild(this._list),this._isOpen=!1,this._list.visible=!1,this._selectIndex=-1,this._bottom=new Array,this._bottom1=new Array;for(var t=d.instance.getComposeTclassLength(),e=1;e<t.length;e++){var i=t[e];if(i){for(var n=new Array,s=0;s<i.length;s++)null==n[(h=(l=i[s])[4][0])-1]&&(n[h-1]=l);this._bottom.push(n)}}var o=d.instance.getResolveTclassLength();for(e=1;e<o.length;e++){var a=o[e],r=new Array;for(s=0;s<a.length;s++){var l,h;null==r[(h=(l=a[s])[3][0])-1]&&(r[h-1]=l)}this._bottom1.push(r)}},r.prototype.onEvt=function(){p.prototype.onEvt.call(this),this.btn.on(e.CLICK,this,this.openHandler),this._list.on(e.SELECT,this,this.selectHandler),GlobalData.dispatcher.on("BAG_UPDATE",this,this.setRowData)},r.prototype.offEvt=function(){p.prototype.offEvt.call(this),this.btn.off(e.CLICK,this,this.openHandler),this._list.off(e.SELECT,this,this.selectHandler),GlobalData.dispatcher.off("BAG_UPDATE",this,this.setRowData)},r.prototype.onOpened=function(){p.prototype.onOpened.call(this),this.setRowData()},r.prototype.openHandler=function(){if(this._tClass){if(!o.instance.getFuncIsOpen(343))return void n.instance.addNotice(o.instance.getFuncOpenTipById(343),!0);var t=this._tClass-12;if(!i.yuanShen.YuanShenModel.instance.getIsOpenById(t)){var e=s.instance.getCfgById(8e4+t)[1];return void n.instance.addNotice(i.yuanShen.YuanShenUtil.typeStrs(e[0]-1)+"达到"+(e[1]/1e3>>0)+"阶"+e[1]%100+"重开启",!0)}}this._isOpen?(this._isOpen=this._list.visible=!1,this.btn.selected=!1,this.height=this._rowH):(this._isOpen=this._list.visible=!0,this.btn.selected=!0,this.height=this._changeH),this._type<1?this.event("COMPOSE_RESIZW",this._index):this.event("RESOLVE_RESIZW",this._index)},r.prototype.selectHandler=function(){-1!=this._list.selectedIndex&&(this._selectIndex=this._list.selectedIndex,this._type<1?this.event("COMPOSE_SELECT",[this._index,this._selectIndex,this._type]):this.event("RESOLVE_SELECT",[this._index,this._selectIndex,this._type]),this._list.selectedIndex=-1)},r.prototype.closeList=function(){this._isOpen=this._list.visible=!1,this.btn.selected=!1,this.height=this._rowH},r.prototype.setRowData=function(){var t;if(t=0==this._type?this._bottom[this._index]:this._bottom1[this._index]){var e=(this._bagSelectData=t).length;this._list.vCount=e,this._list.height=e*this._rowH,this._changeH=(e+1)*this._rowH;for(var i=new Array,n=0;n<this._bagSelectData.length;n++)i.push([this._bagSelectData[n],d.instance.tIds[this._index]-1,n,this._type]);this._list.datas=i,this.setDot()}},r.prototype.setDot=function(){for(var t=this._list.datas,e=!1,i=0;i<t.length;i++){var n=t[i],s=n[1],o=n[2];if(0==n[3]&&(e=c.ComposeModel.instance.checkPoint(s,o)))break}this.redDot.visible=e},r.prototype.initData=function(t,e,i){var n;if(0==i){n=t[3][1];var s=t[3][0];13<=s&&s<=17&&(this._tClass=s)}else n=t[1][1];this.btn.label=n,this._index=e,this._type=i,this.setRowData()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),p.prototype.destroy.call(this,t)},a=r,c.ComposeSelectPanel=a}(modules=modules||{}),function(t){var e,l,h,i;function n(){return null!==l&&l.apply(this,arguments)||this}e=t.compose||(t.compose={}),h=t.bag.BagModel,l=ui.ComposeStoneItemUI,__extends(n,l),n.prototype.initialize=function(){l.prototype.initialize.call(this),this.itemBtn.selected=!0},n.prototype.setData=function(t){l.prototype.setData.call(this,t);var e=t[0];if(0==t[1]){for(var i=e[6],n=new Array,s=0;s<i.length;s++){var o=i[s][0],a=h.instance.getItemCountById(o)/i[s][1]>>0;n.push(a)}n.sort(function(t,e){return e<t?-1:1});var r=n.pop();this.redDot.visible=0<r,this.itemBtn.label=e[2].toString()}else this.itemBtn.label=e[3][1].toString(),this.redDot.visible=!1},n.prototype.setSelected=function(t){l.prototype.setSelected.call(this,t),this.itemBtn.selected=!t},i=n,e.ComposeStoneItem=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.adventure||(t.adventure={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("adventure_exchange"),this._cfgs.sort(this.sortFunc)},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.sortFunc=function(t,e){return t[2][1]-e[2][1]},i=n,e.AdventureExchangeCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.arena||(t.arena={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("arena")},n.prototype.getCfgByRank=function(t){for(var e,i=0,n=this._cfgs.length;i<n;i++){var s=(e=this._cfgs[i])[0];if(1===s.length){if(s[0]===t)break}else if(2===s.length&&t>=s[0]&&t<=s[1])break}return e},i=n,e.ArenaCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.maxTclass=1,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._resolveCfgs=new Array,this._tsClassComposeTab={},this._tsClassResolveTab={},this._tsClassComposeArr=[],this._tsClassResolveArr=[],this._composeCfgs=[],this._tsClassName={},this._resolveName={};for(var t,e,i,n,s=GlobalData.getConfig("item_compose"),o=0,a=s.length;o<a;o++)e=(t=s[o])[3][0],i=t[4][0],n=t[3][1],this._tsClassComposeTab[e]||(this._tsClassComposeTab[e]={},this._composeCfgs[e]=[],this._tsClassComposeArr[e]=[]),this._tsClassComposeTab[e][i]||(this._tsClassComposeTab[e][i]=[],this._tsClassComposeArr[e].push(this._tsClassComposeTab[e][i])),this._tsClassComposeTab[e][i].push(t),this._composeCfgs[e].push(t),this._tsClassName[e]=n,this.maxTclass=e>this.maxTclass?e:this.maxTclass;var r,l=GlobalData.getConfig("item_resolve");for(o=0,a=l.length;o<a;o++)e=(r=l[o])[1][0],i=r[3][0],n=r[1][1],this._tsClassResolveTab[e]||(this._tsClassResolveTab[e]={},this._resolveCfgs[e]=[],this._tsClassResolveArr[e]=[]),this._tsClassResolveTab[e][i]||(this._tsClassResolveTab[e][i]=[],this._tsClassResolveArr[e].push(this._tsClassResolveTab[e][i])),this._resolveCfgs[e].push(r),this._tsClassResolveTab[e][i].push(r),this._resolveName[e]=n},n.prototype.getResolveCfgBySclass=function(t,e){return this._tsClassResolveTab[t]?this._tsClassResolveTab[t][e]:null},n.prototype.getComposeCfgBySclass=function(t,e){return this._tsClassComposeTab[t]?this._tsClassComposeTab[t][e]:null},n.prototype.getComposeTclassByTid=function(t){return this._composeCfgs[t]},n.prototype.getResolveCfgsCfgById=function(t){return this._resolveCfgs[t]},n.prototype.getsClassComposeCfgsValues=function(t){return this._tsClassComposeArr[t]},n.prototype.getTsClassName=function(t){return this._tsClassName[t]},n.prototype.getNextCfg=function(t,e,i,n){var s=this.getComposeCfgBySclass(e,i);if(!s)return[1,null];for(var o=0;o<s.length;o++){var a=s[o];if(a){var r=a[5];if(a[4][0]===i&&(r[0]?r[0][0]:0)==n)return[0,a]}}var l=s[0],h=s[s.length-1],c=(.001*l[1]>>0)%10,p=(1e-5*h[1]>>0)%100,u=(.001*h[1]>>0)%10,d=(.001*n>>0)%10;return 1==t?p<=(1e-5*n>>0)%100?[1,s[0]]:[0,s[0]]:d<c?[3,s[0]]:u<=d?[2,s[0]]:[0,s[0]]},n.prototype.gettsClassResolveCfgsValues=function(t){return this._tsClassResolveArr[t]},n.prototype.getResolveName=function(t){return this._resolveName[t]},i=n,e.DaZhaoCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab=new Array,this._cfgs=GlobalData.getConfig("consume_reward2");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t][2];this._tab[i]||(this._tab[i]=new Array),this._tab[i].push(this._cfgs[t])}},n.prototype.getCfgByServerDay=function(t){return this._tab[t]},i=n,e.DayConsumeRewardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("day_pay"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.DayPayCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){if(this._tab={},this._Dates=new Array,this._Dates=GlobalData.getConfig("designation_refine"),this._Dates)for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t],i=e[0],n=e[1];this._tab[i]||(this._tab[i]=new Array),this._tab[i][n]=e}},n.prototype.isShengJie=function(t){return!!this._tab[t]},n.prototype.getDateByPartAndLevel=function(t,e){return this._tab[t][e]},n.prototype.getMaxLevelByPart=function(t){var e=this._tab[t];return e[e.length-1][1]},i=n,e.DesignationRefineCfg=i}(modules=modules||{}),function(t){var e,o,i;function n(){this.init()}e=t.config||(t.config={}),o=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._discountGift={},this._typeDicDiscountGift=new o;for(var t=GlobalData.getConfig("discount_gift"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[1];null==this._discountGift[s]?this._discountGift[s]=[n]:this._discountGift[s].push(n),this._typeDicDiscountGift.set(s,this._discountGift[s])}},n.prototype.getName=function(t){return 0==t?"":this._typeDicDiscountGift.get(t)[0][2]},n.prototype.getLastTime=function(t){return this._typeDicDiscountGift.get(t)[0][4]},n.prototype.empty=function(){},n.prototype.getGifts=function(t,e){if(!(this._typeDicDiscountGift.indexOf(t)<0)){for(var i=this._typeDicDiscountGift.get(t),n=new Array,s=0,o=i;s<o.length;s++){var a=o[s];if(a[0]==e)for(var r=0,l=a[6];r<l.length;r++){var h=l[r];n.push(h)}}return n}},n.prototype.getZhekouQujian=function(t){if(!(this._typeDicDiscountGift.indexOf(t)<0)){for(var e=this._typeDicDiscountGift.get(t),i=new Array,n=0,s=e;n<s.length;n++){var o=s[n];i.push(o[5][1])}return i}},n.prototype.getThisMaxBuyNum=function(t,e){if(!(this._typeDicDiscountGift.indexOf(t)<0))for(var i=0,n=this._typeDicDiscountGift.get(t);i<n.length;i++){var s=n[i];if(s[0]==e)return s[5][1]}},n.prototype.getIndexBuyNum=function(t,e){if(!(this._typeDicDiscountGift.indexOf(t)<0))for(var i=this._typeDicDiscountGift.get(t),n=0;n<i.length;n++)if(i[n][0]==e)return n},n.prototype.getThisMinBuyNum=function(t,e){if(!(this._typeDicDiscountGift.indexOf(t)<0))for(var i=0,n=this._typeDicDiscountGift.get(t);i<n.length;i++){var s=n[i];if(s[0]==e)return s[5][0]}},n.prototype.getTypeMaxBuyNum=function(t){if(!(this._typeDicDiscountGift.indexOf(t)<0)){var e=this._typeDicDiscountGift.get(t);return e[e.length-1][5][1]}},n.prototype.getNextMaxCanBuy=function(t,e){if(!(this._typeDicDiscountGift.indexOf(t)<0))for(var i=0,n=this._typeDicDiscountGift.get(t);i<n.length;i++){var s=n[i];if(s[0]==e+1)return s[5][1]}},n.prototype.getZhekou=function(t){if(!(this._typeDicDiscountGift.indexOf(t)<0)){for(var e=this._typeDicDiscountGift.get(t),i=new Array,n=0,s=e;n<s.length;n++){var o=s[n];i.push(o[9])}return i}},n.prototype.getOriAndRealPrice=function(t,e){for(var i=this._typeDicDiscountGift.get(t),n=new Array,s=0,o=i;s<o.length;s++){var a=o[s];a[0]==e&&(n.push(a[7]),n.push(a[8]),n.push(a[9]))}return n},n.prototype.getNextOriAndRealPrice=function(t,e){for(var i=this._typeDicDiscountGift.get(t),n=new Array,s=0,o=i;s<o.length;s++){var a=o[s];a[0]==e+1&&(n.push(a[7]),n.push(a[8]),n.push(a[9]))}return n},i=n,e.DiscountGiftCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab3={};var t=GlobalData.getConfig("empty_blend");if(t)for(var e=0,i=t.length;e<i;e++)this._tab3[t[e][0]]=t[e]},n.prototype.getEmptyBlendCfgById=function(t){return this._tab3[t]},i=n,e.EmptyBlendCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._arr=GlobalData.getConfig("empty_mall");for(var t=0;t<this._arr.length;t++){var e=this._arr[t];this._tab[e[0]]=e}},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getArr=function(){return this._arr},i=n,e.EmptyMallCfg=i}(modules=modules||{}),function(l){var t,e;function i(){this.init()}t=l.config||(l.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._arr=GlobalData.getConfig("empty_person_reward")},i.prototype.getCfgByRank=function(t,e){void 0===e&&(e=l.nothingness_world.NothingnessWorldModel.instance.cDayCopy);for(var i=0;i<this._arr.length;i++){var n=this._arr[i];if(n){var s=n[0][0],o=n[0][1],a=n[3][0],r=n[3][1];if(a<=e&&e<=r&&s<=t&&t<=o)return n}}return null},i.prototype.getArr=function(t){void 0===t&&(t=l.nothingness_world.NothingnessWorldModel.instance.cDayCopy);for(var e=[],i=0;i<this._arr.length;i++){var n=this._arr[i];if(n){var s=n[3][0],o=n[3][1];s<=t&&t<=o&&e.push(n)}}return e},e=i,t.EmptyPersonRewardCfg=e}(modules=modules||{}),function(l){var t,e;function i(){this.init()}t=l.config||(l.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._arr=GlobalData.getConfig("empty_warband_reward")},i.prototype.getCfgByRank=function(t,e){void 0===e&&(e=l.nothingness_world.NothingnessWorldModel.instance.cDayCopy);for(var i=0;i<this._arr.length;i++){var n=this._arr[i];if(n){var s=n[0][0],o=n[0][1],a=n[4][0],r=n[4][1];if(a<=e&&e<=r&&s<=t&&t<=o)return n}}return null},i.prototype.getArr=function(t){void 0===t&&(t=l.nothingness_world.NothingnessWorldModel.instance.cDayCopy);for(var e=[],i=0;i<this._arr.length;i++){var n=this._arr[i];if(n){var s=n[4][0],o=n[4][1];s<=t&&t<=o&&e.push(n)}}return e},e=i,t.EmptyWarbandRewardCfg=e}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._cfg={},this._bClassIds=[],this._sClassIds={},this._ids=[],this._tab2={};for(var t=GlobalData.getConfig("equip_suit"),e=0,i=t.length;e<i;e++){var n=t[e][0],s=t[e][2];this._tab2[s]||(this._tab2[s]=[]),this._tab2[s].push(n),this._ids.push(n),this._cfg[n]=t[e];var o=n/10>>0;-1==this._bClassIds.indexOf(o)&&this._bClassIds.push(o);var a=n%10;this._sClassIds[o]||(this._sClassIds[o]=[]),this._sClassIds[o].push(n),this._tab[o]||(this._tab[o]={}),this._tab[o][a]=t[e]}},n.prototype.getCfgBybsClass=function(t,e){return this._tab[t][e]},Object.defineProperty(n.prototype,"bClassIds",{get:function(){return this._bClassIds},enumerable:!0,configurable:!0}),n.prototype.getIdsBybClass=function(t){return this._sClassIds[t]},n.prototype.getCfgById=function(t){return this._cfg[t]},Object.defineProperty(n.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),n.prototype.getActiveIdsByYetId=function(t){var e=this._tab2[t];return e||this.getActiveIdsByYetId(this.getIdById(t,-1))},n.prototype.getIdById=function(t,e){var i=this._ids.indexOf(t);return-1===i?null:(i=-1===e?--i:++i,this._ids[i])},i=n,e.EquipSuitCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._levels=[],this._table=GlobalData.getConfig("shihun")},n.prototype.getDateByPartAndLevel=function(t,e){return GlobalData.searchByIndex2(this._table,t,e)},n.prototype.getOpenLvByPartAndLevel=function(t){return this.getDateByPartAndLevel(t,0)[5]},n.prototype.getMaxLevelByPartAndLevel=function(t,e){for(var i=this.getDateByPartAndLevel(t,e)[5];;){var n=this.getDateByPartAndLevel(t,e+1);if(!n)break;if(e++,i!=n[5])break}return e},n.prototype.getMaxLevelByPart=function(t){var e=t;if(void 0!==this._levels[e])return this._levels[e];var i=this._table[0],n=ArrayUtils.binarySearch(i,function(t){return e-t});if((this._levels[e]=0)<=n)for(var s=i.length-1,o=n;o<i.length;++o){if(i[o]!=e){this._levels[e]=this._table[1][o-1];break}if(o==s){this._levels[e]=this._table[1][o];break}}return this._levels[e]},i=n,e.EquipmentShiHunCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("zhuhun"),this._levels=[],this.cost=GlobalData.getConfig("zhuhuncostitems")[0][0]},n.prototype.getDateByPartAndLevel=function(t,e){return GlobalData.searchByIndex2(this._table,t,e)},n.prototype.getMaxLevelByPart=function(e){if(void 0!==this._levels[e])return this._levels[e];var t=this._table[0],i=ArrayUtils.binarySearch(t,function(t){return e-t});if((this._levels[e]=0)<=i)for(var n=t.length-1,s=i;s<t.length;++s){if(t[s]!=e){this._levels[e]=this._table[1][s-1];break}if(s==n){this._levels[e]=this._table[1][s];break}}return this._levels[e]},n.prototype.getItems=function(){return this.cost},i=n,e.EquipmentZhuHunCfg=i}(modules=modules||{}),function(t){var e,i;function r(){this.init()}e=t.config||(t.config={}),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.init=function(){this._tab={},this._tabByLunShu={};for(var t=GlobalData.getConfig("everyday_rebate"),e=0,i=t.length;e<i;e++){var n=t[e],s=(this._tab[n[0]]=n)[5],o=s[0],a=s[1];if(a)for(var r=o;r<=a;r++)this._tabByLunShu[r]||(this._tabByLunShu[r]=new Array),this._tabByLunShu[r].push(n);else this._tabByLunShu[o]||(this._tabByLunShu[o]=new Array),this._tabByLunShu[o].push(n)}this.getArr=t},r.prototype.getCfgById=function(t){return this._tab[t]},r.prototype.getArrDate=function(t){return this._tabByLunShu[t]},r.prototype.getBigRewardDay=function(t,e){var i=r.instance.getArrDate(e);if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=s[1],a=s[6];if(t<o&&a)return o-t}}return 0},i=r,e.EveryDayRebateCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("faction_box"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[0];this._tab[s]=n}},n.prototype.getCfgBylv=function(t){return this._tab[t]},i=n,e.FactionBoxCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab3={};var t=GlobalData.getConfig("faction_item");if(t)for(var e=0;e<t.length;e++){var i=t[e];this._tab3[i[0]]=i[1]}},n.prototype.getEmptyBlendCfgById=function(t){return this._tab3[t]},i=n,e.FactionItemCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab3={};var t=GlobalData.getConfig("faction_war_blend");if(t)for(var e=0,i=t.length;e<i;e++)this._tab3[t[e][0]]=t[e]},n.prototype.getBlendCfgById=function(t){return this._tab3[t]},i=n,e.FactionWarBlendCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){if(this._tab3={},this.arr3=new Array,this.arr2=GlobalData.getConfig("faction_war_rank"),this.arr2)for(var t=0,e=this.arr2.length;t<e;t++){var i=this.arr2[t][4];this._tab3[i]||(this._tab3[i]=new Array);var n=this.arr2[t][0];this._tab3[i].push([n,this.arr2[t]]),this.arr3.push([n,this.arr2[t]])}},n.prototype.getEmptyBlendCfgById=function(t,e){return this._tab3[t]?this._tab3[t][e]:null},n.prototype.getArrCfg=function(){return this.arr3},i=n,e.FactionWarRankCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("feisheng_task")},n.prototype.getCfgById=function(t){for(var e=0,i=this._cfg.length;e<i;e++)if(t===this._cfg[e][0])return this._cfg[e];return null},i=n,e.FeiShengTaskCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._arr.length},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._arr=GlobalData.getConfig("fight_talisman");for(var t=0;t<this._arr.length;++t)this._table[this._arr[t][0]]=this._arr[t]},n.prototype.getCfgByEra=function(t){return this._table[t]},n.prototype.getCfgByIndex=function(t){return this._arr[t]},Object.defineProperty(n.prototype,"arr",{get:function(){return this._arr},enumerable:!0,configurable:!0}),i=n,e.FightTalismanCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("soul_refine")},n.prototype.getCfgByTypeAndLv=function(t,e){return GlobalData.searchByIndex2(this._table,t,e)},i=n,e.GoldBodyRefineCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._levelArrs=GlobalData.getConfig("soul_rise")},n.prototype.getCfgByLv=function(t){return this._levelArrs[t]},n.prototype.getMaxLvByLv=function(){return this._levelArrs.length-1},i=n,e.GoldBodyUnbeatenCfg=i}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._dic=new n;for(var t=GlobalData.getConfig("gushen"),e=0,i=t.length;e<i;e++)this._dic.set(t[e][0],t[e])},s.prototype.getCfgBytype=function(t){return this._dic.get(t)},i=s,e.GuShenCfg=i}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._dic=new n;for(var t=GlobalData.getConfig("gushen_task"),e=0,i=t.length;e<i;e++)this._dic.set(t[e][0],t[e]);this.getTab=t},s.prototype.getCfgBytype=function(t){for(var e=[],i=0,n=this.getTab.length;i<n;i++)t==this.getTab[i][1]&&e.push(this.getTab[i]);return e},s.prototype.getCfgById=function(t){return this._dic.get(t)},i=s,e.GuShenTaskCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("half_month")},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByDay=function(t){for(var e,i=0,n=this._cfgs.length;i<n;i++){var s=this._cfgs[i];if(t===s[0]){e=s;break}}return e},i=n,e.HalfMonthCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("heart_contact"),e=0,i=t.length;e<i;e++){var n=t[e][0],s=t[e][1];this._tab[n]||(this._tab[n]=[]),this._tab[n][s]=t[e]}},n.prototype.has=function(t,e){return!!this._tab[t]&&!!this._tab[t][e]},n.prototype.getCfgByIdLv=function(t,e){return this._tab[t][e]},i=n,e.HeartContactCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._table1={},this._tableLv={},this._cfgs=new Array;for(var t=GlobalData.getConfig("heaven_season"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e];if(n){for(var s=n[0],o=s[0],a=s[1],r=n[6],l=n[7],h=o;h<=a;h++)this._table[h]=n,this._tableLv[h]=l.length;var c=n[19],p=n[21],u=n[20],d=u[0],m=u[1],f=0;for(h=0;h<d.length;h+=2){for(var g=d[h],y=d[h+1],_=c[f]?c[f]:[],v=g;v<=y;v++)r.push(_);f++}for(h=f=0;h<m.length;h+=2){g=m[h],y=m[h+1];var I=p[f]?p[f]:[];for(v=g;v<=y;v++)l.push(I)}}}},n.prototype.getCfgBySeason=function(t){return this._table[t]},n.prototype.getLvBySeason=function(t){return this._tableLv[t]},n.prototype.getNeedNum=function(t,e,i){var n=0,s=this.getCfgBySeason(t);if(s)for(var o=s[8],a=0;a<o.length;a++){var r=o[a],l=a+1;r&&e<l&&l<=i&&(n+=r)}return n},i=n,e.HeavenSeasonCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("heaven_task")},n.prototype.getCfgById=function(t){if(!this._table[t])throw new Error("heaven_task表中没有任务id："+t);return this._table[t]},i=n,e.HeavenTaskCfg=i}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=laya.utils.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._dic=new n;for(var t=GlobalData.getConfig("invest_reward"),e=0,i=t.length;e<i;e++)this._dic.set(t[e][0],t[e]);this.getTab=t},s.prototype.getCfgBytype=function(t){for(var e=[],i=0,n=this.getTab.length;i<n;i++)t==this.getTab[i][1]&&e.push(this.getTab[i]);return e},s.prototype.getCfgById=function(t){return this._dic.get(t)},i=s,e.InvestRewardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("item_ex")},n.prototype.getCfgById=function(t){return this._table[t]},n.prototype.getAbnormalId=function(t){var e=this._table[t];return e?e[2]:-1},i=n,e.ItemExCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("lilian_rise"),e=0,i=t.length;e<i;e++){var n=t[e];this._table[n[0]]=n}},n.prototype.getLilianRiseCfgByRiseLevel=function(t){return this._table[t]},n.prototype.getLilianNameByRiseLevel=function(t){return this._table[t]?this._table[t][6]:"太极无极·一重"},i=n,e.LilianRiseCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg={};for(var t=GlobalData.getConfig("limit_pack"),e=0;e<t.length;++e)this._cfg[t[e][0]]=t[e]},n.prototype.getCfgByLevel=function(t){return this._cfg[t]},i=n,e.LimitPackCfg=i}(modules=modules||{}),function(t){var e,s,i;function n(){this.init()}e=t.config||(t.config={}),s=laya.utils.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._dates=new Array;var t=GlobalData.getConfig("login_reward");this._dates=t,this.getTab=t,this._idDic=new s;for(var e=0;e<t.length;e++){var i=t[e],n=i[0];this._idDic.set(n,i)}},n.prototype.byIndex=function(t){return this.getTab[t]},n.prototype.getCfgBytype=function(t,e){for(var i=[],n=0,s=this.getTab.length;n<s;n++){var o=this.getTab[n][3];t==o[0]&&e==o[1]&&i.push(this.getTab[n])}return i},n.prototype.getCfgById=function(t){return this._idDic.get(t)},i=n,e.LoginRewardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg={};for(var t=GlobalData.getConfig("monster_res_ex"),e=0,i=t.length;e<i;e++)this._cfg[t[e][0]]=t[e]},n.prototype.getCfgByItemType=function(t){return this._cfg[t]},i=n,e.MonsterResExCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("mysterious_mall")},n.prototype.getCfgByFestivalTypeAndId=function(t,e){for(var i=0,n=this._cfg.length;i<n;i++)if(this._cfg[i][0]===t&&this._cfg[i][3]===e)return this._cfg[i];return null},i=n,e.MysteriousMallCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("one_buy"),e=0,i=this.getTab=t;e<i.length;e++){var n=i[e],s=n[0];this._tab[s]=n}},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.OneBuyCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("onhook_drop")},n.prototype.getCfgByLv=function(t){for(var e,i=this._cfgs.length,n=0;n<i;n++)if(t<(e=this._cfgs[n])[0])return e;return this._cfgs[i-1]},i=n,e.OnhookDropCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._ids=[];for(var t=GlobalData.getConfig("open_reward"),e=0,i=t.length;e<i;e++){var n=t[e][0];this._ids.push(n),this._tab[n]=t[e]}},n.prototype.getCfgById=function(t){return this._tab[t]},Object.defineProperty(n.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),i=n,e.OpenAwardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.lobbyDailyIds=[],this.lobbyLevelIds=[],this.blueDailyIds=[],this.blueLevelIds=[],this.configs={};for(var t=GlobalData.getConfig("qq_privilege_reward"),e=0;e<t.length;++e){var i=Math.floor(.001*t[e][0]),n=t[e][1];1===n?1===i?this.lobbyStartId=t[e][0]:2===i?this.lobbyDailyIds.push(t[e][0]):3===i&&this.lobbyLevelIds.push(t[e][0]):2===n&&(1===i?this.blueStartId=t[e][0]:2===i?this.blueDailyIds.push(t[e][0]):3===i&&this.blueLevelIds.push(t[e][0])),this.configs[t[e][0]]=t[e]}}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),i=n,e.QQPrivilegeRewardCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){this.init()}e=t.config||(t.config={}),i=t.config.BlendCfg,n=t.vip.VipModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.init=function(){this._tab1=GlobalData.getConfig("retrieve_lilian"),this._tab2=GlobalData.getConfig("retrieve_res"),this.halfVip=i.instance.getCfgById(55001)[1][0]},o.prototype.getLilianCfgById=function(t){return this._tab1[t]},o.prototype.getResCfgById=function(t){return this._tab2[t]},o.prototype.getUnitPriceByTypeIdCount=function(t,e,i){for(var n=1===t?this._tab2[e][3]:this._tab1[e][3],s=0,o=n;s<o.length;s++){var a=o[s],r=a[0],l=a[1];if(i===r)return this.disCount(l)}return this.disCount(n[n.length-1][1])},o.prototype.getTotalPriceByTypeIdCount=function(t,e,i,n){if(1!==t)return Math.ceil(this.getUnitPriceByTypeIdCount(t,e,n)*n);for(var s=0,o=i;o<i+n;o++)s+=this.getUnitPriceByTypeIdCount(t,e,o);return s},o.prototype.disCount=function(t){return n.instance.vipLevel>=this.halfVip?Math.ceil(t/2):t},s=o,e.RetrieveCfg=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tab2={},this._tab3={},this._tIds=[];for(var t=0,e=GlobalData.getConfig("rune_compose");t<e.length;t++){var i=e[t],n=i[0],s=i[1],o=i[2];this._tab[s]||(this._tab[s]={}),this._tab[s][o]||(this._tab[s][o]=[]),this._tab3[s]||(this._tab3[s]=[]),-1===this._tab3[s].indexOf(o)&&this._tab3[s].push(o),-1===this._tIds.indexOf(s)&&this._tIds.push(s),this.propItemId||(this.propItemId=i[4][0]),this._tab[s][o].push(i),this._tab2[n]=i}},Object.defineProperty(n.prototype,"tIds",{get:function(){return this._tIds},enumerable:!0,configurable:!0}),n.prototype.getCfgsByTIdSId=function(t,e){if(!this._tab[t])throw new Error("tId不存在---\x3e"+t);if(!this._tab[t][e])throw new Error("sId不存在---\x3e"+e);return this._tab[t][e]},n.prototype.getCfgById=function(t){return this._tab2[t]},n.prototype.getSIdsByTId=function(t){return this._tab3[t]},i=n,e.RuneComposeCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("rune_dial"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e]},n.prototype.getCfgByRound=function(t){return this._tab[t]?this._tab[t]:this.getCfgByRound(--t)},i=n,e.RuneDialCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._arr=GlobalData.getConfig("rune_dictionary")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getInfo=function(t){for(var e,i=0,n=this._arr.length;i<n;i++)if(t[0]===this._arr[i][0]){if(4*t[1]+t[2]+1<=4*this._arr[i][1]+this._arr[i][2])return this._arr[i];e=this._arr[i]}return e},n.prototype.isMaxLevel=function(t){for(var e=4*t[1]+t[2],i=0,n=0,s=this._arr.length;n<s;n++)if(t[0]===this._arr[n][0]){var o=4*this._arr[n][1]+this._arr[n][2];i<o&&(i=o)}return e===i},n.prototype.getAllBaseInfo=function(){for(var t=[],e=0,i=this._arr.length;e<i;e++){var n=!0,s=[this._arr[e][0],0,0],o=t.length;if(o){for(var a=0;a<o;a++)if(t[a][0]===s[0]){n=!1;break}n&&t.push(s)}else t.push(s)}return t},n.prototype.getRuneFight=function(t){for(var e=4*t[1]+t[2],i=0,n=[],s=0,o=this._arr.length;s<o;s++)t[0]===this._arr[s][0]&&n.push([4*this._arr[s][1]+this._arr[s][2],this._arr[s][5]]);var a=0;for(s=0,o=n.length;s<o;s++){if(!(e>n[s][0])){i+=(e-a)*n[s][1];break}i+=(n[s][0]-a)*n[s][1],a=n[s][0]}return i},n.prototype.getAttr=function(t){for(var e=4*t[1]+t[2],i={},n=[],s=0,o=this._arr.length;s<o;s++)t[0]===this._arr[s][0]&&n.push([4*this._arr[s][1]+this._arr[s][2],this._arr[s][4]]);for(var a=0,r=(s=0,n.length);s<r;s++){if(!(e>n[s][0])){for(l=0,h=n[s][1].length;l<h;l+=2)i[n[s][1][l]]?i[n[s][1][l]]+=(e-a)*n[s][1][l+1]:i[n[s][1][l]]=(e-a)*n[s][1][l+1];break}for(var l=0,h=n[s][1].length;l<h;l+=2)i[n[s][1][l]]?i[n[s][1][l]]+=(n[s][0]-a)*n[s][1][l+1]:i[n[s][1][l]]=(n[s][0]-a)*n[s][1][l+1];a=n[s][0]}return i},n.prototype.getSingleAttr=function(t,e){for(var i=this.getInfo(t)[4],n=0;n<i.length;n+=2)if(e===i[n])return i[n+1];return 0},i=n,e.RuneDictionaryCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._arr=GlobalData.getConfig("rune_rise")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getInfoByGrade=function(t){for(var e=0,i=this._arr.length;e<i;e++)if(t===this._arr[e][0])return this._arr[e];return null},i=n,e.RuneRiseCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};var t=GlobalData.getConfig("scene_copy_marry");this.awards=t[0][2];for(var e=0,i=t.length;e<i;e++)this._tab[t[e][1]]=t[e]},n.prototype.getCfgByWare=function(t){return this._tab[t]},i=n,e.SceneCopyMarryCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._cfgstable={},this._cfgsScoretable={};for(var t=GlobalData.getConfig("scene_copy_nine_boss"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[0],o=n[1],a=n[3];this._table[o]=n,this._cfgstable[s]||(this._cfgstable[s]=[]),this._cfgstable[s].push(o),this._cfgsScoretable[s]=a}},n.prototype.getArrOccByLevel=function(t){return this._cfgstable[t]},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.SceneCopyNineBOSSCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("scene_copy_shilian"),e=0,i=t.length;e<i;e++){var n=this._table[t[e][0]];n||(n={},this._table[t[e][0]]=n),n[t[e][2]]=t[e]}},n.prototype.getCfgGetMapAndWare=function(t,e){return this._table[t][e]},i=n,e.SceneCopyShilianCfg=i}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){var t=GlobalData.getConfig("scene_copy_team");this.awards=t[0][2],this._dic=new n;for(var e=0,i=t.length;e<i;e++)this._dic.set(t[e][1],t[e])},s.prototype.getCfgByWare=function(t){return this._dic.get(t)},i=s,e.SceneCopyTeamCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){},i=n,e.SceneCopyTiantiCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.maxLv=0,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabByLevel={},this._cfgs=GlobalData.getConfig("scene_empty");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];if(i){var n=i[3],s=i[1];this._tab[n]=i,this._tabByLevel[s]=i,this.maxLv=s>this.maxLv?s:this.maxLv}}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByOcc=function(t){return this._tab[t]},n.prototype.getCfgByLevel=function(t){return this._tabByLevel[t]},n.prototype.getUpLevle=function(t){var e=0,i=this.getCfgByOcc(t);return i&&(e=i[9]),e},n.prototype.getUpMaxTime=function(t){var e=0,i=this.getCfgByLevel(t);if(i)for(var n=i[8],s=0;s<n.length-1;s++){var o=n[s];e=e<o?o:e}return e},i=n,e.SceneEmptyCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._cfgs=GlobalData.getConfig("scene_faction_war");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];if(i){var n=i[0];this._tab[n]=i}}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByOcc=function(t){return this._tab[t]},i=n,e.SceneFactionWarCfg=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgByLayer=function(t){for(var e=GlobalData.getConfig("scene_forbidden_boss"),i=0;i<e.length;++i)if(e[i][1]===t)return e[i];return null},n.prototype.getCfgByStage=function(t){for(var e=GlobalData.getConfig("scene_forbidden_boss"),i=0;i<e.length;++i)if(e[i][3]===t)return e[i];return null},n.prototype.getCfgByBossId=function(t){for(var e=GlobalData.getConfig("scene_forbidden_boss"),i=0;i<e.length;++i)if(e[i][4]===t)return e[i];return null},i=n,e.SceneForbiddenBossCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("scene_foreign_boss"),e=0;e<t.length;++e)this._table[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.SceneForeignBossCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._cfgs=GlobalData.getConfig("scene_limittime");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t][0];this._table[i]=this._cfgs[t]}},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.SceneLimittimeCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._littleMonster=[],this._cfgs=GlobalData.getConfig("scene_warfire");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];if(i){var n=i[3];2===(this._tab[n]=i)[5]&&this._littleMonster.push(i)}}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByOcc=function(t){return this._tab[t]},Object.defineProperty(n.prototype,"allCfgs",{get:function(){return this._littleMonster},enumerable:!0,configurable:!0}),i=n,e.SceneWarfireCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("seven_day")},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByDay=function(t){for(var e,i=0,n=this._cfgs.length;i<n;i++){var s=this._cfgs[i];if(t===s[0]){e=s;break}}return e},i=n,e.SevenDayCfg=i}(modules=modules||{}),function(t){var e,o,i;function n(){this.init()}e=t.config||(t.config={}),o=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._signDic=new o,this._signcfgs=new Array;for(var t=GlobalData.getConfig("sign_reward"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[1];null==this._signcfgs[s]?this._signcfgs[s]=[n]:this._signcfgs[s].push(n)}for(e=0;e<this._signcfgs.length;e++)this._signDic.set(e,this._signcfgs[e])},n.prototype.getCfgByLevel=function(t){return this._signDic.get(t)},n.prototype.getCfgByReward=function(t){this._addCountArr=new Array;var e=this.getCfgByLevel(t);if(e)for(var i=0;i<31;i++){var n=e[i];0!=n[3].length&&this._addCountArr.push(n)}return this._addCountArr},i=n,e.SignRewardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("single_pay_jade"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.SinglePayJadeCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("single_pay_print"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.SinglePayPrintCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("tianti_awards")},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),i=n,e.TiantiAwardsCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.getArr=GlobalData.getConfig("vip_seckill")},n.prototype.getArrDateByOpenDayAndGrade=function(t,e){for(var i=0,n=this.getArr.length;i<n;i++)if(t===this.getArr[i][0]&&e>=this.getArr[i][2][0]&&e<=this.getArr[i][2][1])return this.getArr[i]},i=n,e.VipBuyCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._cfgs=GlobalData.getConfig("warband_donate")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgByLv=function(t){return this._cfgs[t-1]},i=n,e.WarbandDonateCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.cfgs=GlobalData.getConfig("warband_item")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),i=n,e.WarbandItemCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.cfgs=GlobalData.getConfig("warband_level")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgByLv=function(t){return this.cfgs[t-1]},i=n,e.WarbandLevelCfg=i}(modules=modules||{}),function(t){var e,i;function n(){for(var t=GlobalData.getConfig("week_card_exp"),e=0,i=0;i<t.length;++i)e=Math.max(t[i][0],e);this._maxLevel=e}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxLevel",{get:function(){return this._maxLevel},enumerable:!0,configurable:!0}),n.prototype.getWeekCardExpMax=function(t){for(var e=GlobalData.getConfig("week_card_exp"),i=0;i<e.length;++i)if(e[i][0]==t)return e[i][2];return-1},n.prototype.getWeekCardLoginExp=function(t){for(var e=GlobalData.getConfig("week_card_exp"),i=0;i<e.length;++i)if(e[i][0]==t)return e[i][1];return-1},n.prototype.getTaskInfo=function(t,e){for(var i=GlobalData.getConfig("week_card_task"),n=0;n<i.length;++n)if(i[n][0]==t&&i[n][1]==e)return i[n];return null},n.prototype.getFirstTaskInfo=function(t,e){void 0===e&&(e=1);for(var i=GlobalData.getConfig("week_card_task"),n=0;n<i.length;++n)if(i[n][5]==t&&i[n][0]==e)return i[n];return null},i=n,e.WeekCardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var n=this;this._tab={},this._sIds=[],this._sIdTab={},this._ids=[],GlobalData.getConfig("xiandan").forEach(function(t){var e=t[0];n._ids.push(e);var i=e%100>>0;-1==n._sIds.indexOf(i)&&n._sIds.push(i),n._sIdTab[i]||(n._sIdTab[i]=[]),n._sIdTab[i].push(e),n._tab[e]=t})},Object.defineProperty(n.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),n.prototype.getCfgById=function(t){return this._tab[t]},Object.defineProperty(n.prototype,"sIds",{get:function(){return this._sIds},enumerable:!0,configurable:!0}),n.prototype.getIdsBySId=function(t){return this._sIdTab[t]},i=n,e.XianDanCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("xianfu_fengshui"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.XianfuFengShuiCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("xianfu_task"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.XianfuTaskCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._reward_cfg=GlobalData.getConfig("festival_xunbao_discount_reward"),this._cfg=GlobalData.getConfig("festival_xunbao_discount")},n.prototype.getDiscountAll=function(){return this._cfg},n.prototype.getDiscountRewardAll=function(){return this._reward_cfg},n.prototype.getRewardCfgByIdandDay=function(t,e){for(var i in this._reward_cfg)if(this._reward_cfg[i][1]===t&&this._reward_cfg[i][0]===e)return this._reward_cfg[i]},n.prototype.getDayByXunBaoCfg=function(t,e){for(var i in this._cfg){var n=this._cfg[i][1];if(this._cfg[i][0]===e&&n[0]<=t&&n[1]>=t)return this._cfg[i]}},i=n,e.XunBaoHappyCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._weight={};for(var t=0,e=GlobalData.getConfig("xunbao_weight");t<e.length;t++){var i=e[t],n=i[0],s=i[1][1];(!this._weight[n]||s>this._weight[n])&&(this._weight[n]=s)}},n.prototype.getWeightByType=function(t){return this._weight[t]},i=n,e.XunbaoWeightCfg=i}(modules=modules||{}),function(y){var _,t;function e(){this.rankCfg=[],this.extraCfg=[],this.luckyCfg=[],this.joinCfg=[],this.endTime=0,this.maxRank=1,this.rankLen=100,this.init()}_=y.config||(y.config={}),Object.defineProperty(e,"instance",{get:function(){return this._instance=this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=y.yearEndRank.YearEndRankModel.instance;if(t.typeId&&t.crossDay){for(var e=0,i=GlobalData.getConfig("pay_rank");e<i.length;e++)(g=i[e])[0]==t.typeId&&t.crossDay>=g[1][0]&&t.crossDay<=g[1][1]&&this.rankCfg.push(g);for(var n=0,s=GlobalData.getConfig("pay_rank_extra");n<s.length;n++)(g=s[n])[0]==t.typeId&&t.crossDay>=g[1][0]&&t.crossDay<=g[1][1]&&this.extraCfg.push(g);for(var o=0,a=GlobalData.getConfig("pay_rank_lucky");o<a.length;o++)(g=a[o])[0]==t.typeId&&t.crossDay>=g[1][0]&&t.crossDay<=g[1][1]&&this.luckyCfg.push(g);for(var r=0,l=GlobalData.getConfig("pay_rank_join");r<l.length;r++)(g=l[r])[0]==t.typeId&&t.crossDay>=g[1][0]&&t.crossDay<=g[1][1]&&this.joinCfg.push(g);for(var h=0,c=GlobalData.getConfig("pay_rank_help");h<c.length;h++)(g=c[h])[0]==t.typeId&&(this.helpCfg=g);for(var p=_.BlendCfg.instance.getCfgById(99903)[1],u=0;u<p.length;u+=2)if(p[u]==y.yearEndRank.YearEndRankModel.instance.typeId){this.endTime=p[u+1];break}var d=_.BlendCfg.instance.getCfgById(99905)[1];for(u=0;u<d.length;u+=2)if(d[u]==y.yearEndRank.YearEndRankModel.instance.typeId){this.rankLen=d[u+1];break}for(var m=0,f=this.rankCfg;m<f.length;m++){var g;(g=f[m])[2][1]>this.maxRank&&(this.maxRank=g[2][1])}}else console.log("年终活动配置初始化失败，没有活动id或开服天数")},e.prototype.getCfgByRank=function(t){for(var e=0,i=this.rankCfg;e<i.length;e++){var n=i[e];if(t>=n[2][0]&&t<=n[2][1])return n}return null},e.prototype.getAwardModelCfgById=function(t){for(var e=_.BlendCfg.instance.getCfgById(t),i=[],n=0;n<e[1].length;n+=4)i.push(e[1].slice(n,n+4));for(var s=0,o=i;s<o.length;s++){var a=o[s];if(a[0]==y.yearEndRank.YearEndRankModel.instance.typeId)return a}},t=e,_.YearEndRankCfg=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg={};for(var t=GlobalData.getConfig("zhizun_equip"),e=0,i=t.length;e<i;e++){var n=t[e][0]-1e3,s=t[e][1];this._cfg[1e3*n+s]=t[e]}},n.prototype.getCfgByIdAndLevel=function(t,e){return this._cfg[Math.round(1e3*(t-1e3)+e)]},n.prototype.findSkillCondtion=function(t,e){for(var i=1;i<99999;i++){var n=this._cfg[Math.round(1e3*(t-1e3)+i)];if(!n)return 99999;if(-1<n[5].indexOf(e))return n[1]}return console.log("死循环？....."),99999},i=n,e.ZhiZunEquipCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._dispatcher=new Laya.EventDispatcher}e=t.core||(t.core={}),n.prototype.onAutoEvt=function(t,e,i,n){void 0===n&&(n=!1);var s=e.onAutoEvt;return s?(s.call(e,this._dispatcher,t.toString(),e,i),n&&i.call(e,{event:t.toString(),value:this[t]})):console.log("监听失败！不存在onAutoEvt函数！！！"),this},n.prototype.once=function(t,e,i,n){return void 0===n&&(n=!1),this._dispatcher.once(t.toString(),e,i),n&&i.call(e,{event:t.toString(),value:this[t]}),this},n.prototype.on=function(t,e,i,n){return void 0===n&&(n=!1),this._dispatcher.on(t.toString(),e,i),n&&i.call(e,{event:t.toString(),value:this[t]}),this},n.prototype.off=function(t,e,i,n){return void 0===n&&(n=!1),this._dispatcher.off(t.toString(),e,i,n),this},n.prototype.try2Set=function(t,e,i){void 0===i&&(i=!1);var n="_"+t;this[n]===e&&!i||(this[n]=e,this.emit(t,e))},n.prototype.emit=function(t,e){var i=t.toString();if(this._dispatcher.hasListener(i)){var n={event:i,value:e};this._dispatcher.event(n.event,n)}},n.prototype.destroy=function(){this._dispatcher&&(this._dispatcher.offAll(),this._dispatcher=null)},i=n,e.AbstractModel=i}(modules=modules||{}),function(t){var r,e,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}r=t.da_zhao||(t.da_zhao={}),i=t.common.CustomList,e=ui.ComposeAddAlertUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._showIds=new Array,this._list=new i,this._list.scale(.7,.7),this._list.scrollDir=1,this._list.itemRender=r.DaZhaoAddItem,this._list.spaceY=3,this._list.width=300,this._list.height=300,this._list.hCount=1,this._list.x=25,this._list.y=95,this.addChild(this._list)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("ADD_EQUIP",this,this.close),this.onAutoEvt(Laya.stage,"mousedown",this,this.stageClickHandler),this.onAutoGlobalEvt("DA_ZHAO_ADD_EQUIP",this,this.uodateUI)},s.prototype.uodateUI=function(){this.updataBagValue(this._cfg)},s.prototype.stageClickHandler=function(t){t.target instanceof r.DaZhaoAddItem||t.target===this._list||t.target===this||this.close()},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.pos(-44,250),r.DaZhaoModel.instance.currEquipPic=t[0],this._cfg=t[1],this.updataBagValue(this._cfg)},s.prototype.updataBagValue=function(t){if(this._cfg){var e=t[3][0],i=t[5],n=null;i[0]&&(n=i[0][0]),this._showIds=r.DaZhaoModel.instance.getEquipAnyDesCurrEquipId(n,e),this._showIds.sort(r.DaZhaoModel.instance.sortFunc.bind(r.DaZhaoModel.instance)),0<this._showIds.length?this.updateText(!1,t[7]):this.updateText(!0,t[7]);for(var s=new Array,o=0;o<this._showIds.length;o++){var a=this._showIds[o];a&&s.push([e,a])}this._list.datas=s}},s.prototype.updateText=function(t,e){var i="<span style='color:#fdfdff;font-size: 20px'>背包中缺少</span>";i+="<span style='color:#c96300;font-size: 20px'>"+e+"</span>",this.tipsText.innerHTML=i,this.tipsText.visible=t},Object.defineProperty(s.prototype,"showDelBtn",{set:function(t){this.deleteBtn.visible=t,this.height=this.bgImg.height=t?401:325},enumerable:!0,configurable:!0}),s.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._showIds&&(this._showIds.length=0)&&(this._showIds=null),this._cfg=null,e.prototype.destroy.call(this)},n=s,r.ComposeAddAlert=n}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.da_zhao||(t.da_zhao={}),n=Laya.Event,s=t.common.CommonUtil,o=ui.ComposeAddItemUI,e=o,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._item=new i.DaZhaoItem,this._item.mouseEnabled=!1,this._item.pos(10,8),this.addChild(this._item)},r.prototype.onEvt=function(){this.on(n.CLICK,this,this.inlay)},r.prototype.offEvt=function(){this.off(n.CLICK,this,this.inlay)},r.prototype.inlay=function(){var t=i.DaZhaoModel.instance.currEquipId,e=i.DaZhaoModel.instance.currEquipPic;switch(i.DaZhaoModel.instance.nowGeShu){case 5:t.length<=5&&(t[e]=this._itemF);break;case 4:t.length<=4&&(t[e]=this._itemF);break;case 3:t.length<=3&&(t[e]=this._itemF);break;case 2:t.length<=2&&(t[e]=this._itemF);break;case 1:t.length<=1&&(t[e]=this._itemF)}i.DaZhaoModel.instance.currEquipId=t,GlobalData.dispatcher.event("DA_ZHAO_ADD_EQUIP")},r.prototype.setData=function(t){this._itemF=t[1];var e=t[1][0];this._item.setData(t);var i=s.getItemCfgById(e);if(!i)throw new Error("不存在的道具ID："+e);this.nameText.text=i[1].toString()},a=r,i.DaZhaoAddItem=a}(modules=modules||{}),function(n){var s,o,a,t;function e(){return o.call(this)||this}s=n.da_zhao||(n.da_zhao={}),a=n.common.CommonUtil,o=ui.DaZhaoBuWeiItemUI,__extends(e,o),e.prototype.setData=function(t){if(o.prototype.setData.call(this,t),t){this._datesCfg=t,this._part=a.getPartById(this._datesCfg[1]);var e=this._datesCfg[3][0];if(7===e?this.dataText.text=a.getNameByPartBeastEquip(this._part):s.DaZhaoModel.instance.isLingZhuang(e)?this.dataText.text=a.getYuanShenNameByPart(this._part):s.DaZhaoModel.instance.isdivinatory(e)?this.dataText.text=n.divinatory_card.DivinatoryUtil.getDivinatoryPartName(this._part):s.DaZhaoModel.instance.isShowEquip(e)?this.dataText.text=n.showEquip.ShowEquipModel.instance.getPartNameByComposeClass(e,this._part):this.dataText.text=a.getNameByPart(this._part),this.btn.selected=!this.selected,s.DaZhaoModel.instance.isLingZhuang(e)||s.DaZhaoModel.instance.isShowEquip(e))this.tbnRp.visible=!1,this.redDot.visible=s.DaZhaoModel.instance.getSlassIsRPByDate(this._datesCfg);else{this.redDot.visible=!1;var i=a.getNotGeneratedScore(this._datesCfg[1]);this.tbnRp.visible=s.DaZhaoModel.instance.getChaoYueByNotGeneratedScore(e,i,this._datesCfg[1])}}},e.prototype.setSelected=function(t){var e=this;this.selectEnable=!t,o.prototype.setSelected.call(this,t),this.btn.selected=!this.selected,this._datesCfg&&(s.DaZhaoModel.instance.nowBuWei=this._part,Laya.timer.callLater(this,function(){GlobalData.dispatcher.event("DA_ZHAO_BUWEI_SWITCH",[e._datesCfg])}))},e.prototype.destroy=function(t){void 0===t&&(t=!0),this._datesCfg=null,o.prototype.destroy.call(this,t)},t=e,s.DaZhaoBuWeiItem=t}(modules=modules||{}),function(s){var c,e,i,t,o,n,a;function r(){var t=e.call(this)||this;return t._setSelectedInx=0,t}c=s.da_zhao||(s.da_zhao={}),i=s.config.DaZhaoCfg,t=laya.events.Event,o=s.notice.SystemNoticeManager,n=s.common.CustomList,e=ui.DaZhaoDaLeiItemUI,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.width=150,this._list.height=50,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=c.DaZhaoXiaoLeiItem,this._list.x=0,this._list.y=0,this.listBox.addChild(this._list),this._isChuange=!1},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoEvt(this._list,t.SELECT,this,this.listHandler),this.onAutoGlobalEvt("COMPOSE_REPLY",this,this.setRpLay),this.onAutoGlobalEvt("DA_ZHAO_BAG_UPDATE",this,this.setRpBagUpdate),this.onAutoGlobalEvt("DA_ZHAO_CLICK",this,this.setSelectedFun)},r.prototype.setData=function(t){e.prototype.setData.call(this,t),this.tbnRp.visible=!1,t&&(this._setSelectedInx=t[1],this._speciesClass=t[0][0],this._tClass=t[0][1],1==this._speciesClass?(this._datesCfg=i.instance.getsClassComposeCfgsValues(this._tClass),this.dataText.text=i.instance.getTsClassName(this._tClass),this.setRp()):2==this._speciesClass&&(this._datesCfg=i.instance.gettsClassResolveCfgsValues(this._tClass),this.dataText.text=i.instance.getResolveName(this._tClass)))},r.prototype.listHandler=function(){this._list.selectedIndex},r.prototype.setRpLay=function(){var t=this;c.DaZhaoModel.instance.tClassNow==this._tClass&&Laya.timer.once(300,this,function(){t.reglyAutomaticChoose()})},r.prototype.setRp=function(){1==this._speciesClass&&(this.tbnRp.visible=c.DaZhaoModel.instance.getTClassIsRP(this._tClass))},r.prototype.setRpBagUpdate=function(){this.tbnRp.visible=!1,1==this._speciesClass&&(this.tbnRp.visible=c.DaZhaoModel.instance._RpByTclass.get(this._tClass))},r.prototype.setSelectedFun=function(t){this._setSelectedFunTClass=t[1],t[0]==this._speciesClass?this._setSelectedFunTClass==this._tClass?(this.btn.selected=!0,this._isChuange=!this._isChuange):this._isChuange=this.btn.selected=!1:(this.btn.selected=!1,this._isChuange=!1),this.toCalculateListHight(),this.setTheHeight()},r.prototype.btnHandler=function(){if(c.DaZhaoModel.instance.getTclassIsOpen(this._tClass)||1!=this._speciesClass){if(2==this._speciesClass&&c.DaZhaoModel.instance.isFantianEquip(this._tClass)&&(i=this._datesCfg[0][0][7],s.born.BornModel.instance.lv<i&&0!=i))return n=s.config.BornCfg.instance.getCfgByLv(i)[1],void o.instance.addNotice(n+"开启",!0);c.DaZhaoModel.instance.ClassNow=this._speciesClass,c.DaZhaoModel.instance.tClassNow=this._tClass,GlobalData.dispatcher.event("DA_ZHAO_CHANGE_UI"),GlobalData.dispatcher.event("DA_ZHAO_CLICK",[[this._speciesClass,this._tClass,this._setSelectedInx]])}else if(this._datesCfg[0][0])if(c.DaZhaoModel.instance.isLingZhuang(this._tClass)){var t=s.config.BlendCfg.instance.getCfgById(80001+this._tClass-8)[1];0!=t[0]?o.instance.addNotice(s.yuanShen.YuanShenUtil.typeStrs(t[0]-1)+"达到"+(t[1]/1e3>>0)+"阶"+t[1]%100+"重开启",!0):o.instance.addNotice(s.funcOpen.FuncOpenModel.instance.getFuncOpenTipById(343),!0)}else if(c.DaZhaoModel.instance.isdivinatory(this._tClass))s.config.DivinatoryCardActionCfg.instance.feishengNotice(this._tClass-18,!0);else if(c.DaZhaoModel.instance.isShowEquip(this._tClass)){var e=s.funcOpen.FuncOpenModel.instance.getFuncOpenTipById(s.config.ShowEquipCfg.instance.type2ActId[c.DaZhaoModel.instance.getShowEquipTypeByTClass(this._tClass)]);o.instance.addNotice(e,!0)}else{var i=this._datesCfg[0][0][9];if(s.born.BornModel.instance.lv<i&&0!=i){var n=s.config.BornCfg.instance.getCfgByLv(i)[1];o.instance.addNotice(n+"开启",!0)}}},r.prototype.toCalculateListHight=function(){for(var t=this._datesCfg,e=50*t.length+6*(t.length-1),i=new Array,n=0;n<t.length;n++){var s=t[n];s&&i.push([this._speciesClass,s])}this._listHight=e},r.prototype.setTheHeight=function(){if(this.btn.selected)if(this._isChuange){this.listBox.visible=!0,this.height=63+this._listHight;var t=this._datesCfg;this._list.height=50*t.length+(t.length-1)*this._list.spaceY;for(var e=new Array,i=0;i<t.length;i++){var n=t[i];n&&e.push([this._speciesClass,n])}c.DaZhaoModel.instance.ClassNow=this._speciesClass,c.DaZhaoModel.instance.tClassNow=this._tClass,this._list.datas=e,this.automaticChoose()}else this.listBox.visible=!1,this.height=63,this.automaticChoose();else this.listBox.visible=!1,this.height=63},r.prototype.reglyAutomaticChoose=function(){1==this._speciesClass&&6!=this._tClass&&c.DaZhaoModel.instance.tClassNow==this._tClass&&this.automaticChoose(!1)},r.prototype.automaticChoose=function(t){var e=this;void 0===t&&(t=!0);for(var i=-1,n=new Array,s=0;s<this._datesCfg.length;s++)if(h=this._datesCfg[s]){var o=0,a=0,r=!1;if(1==this._speciesClass?(o=h[0][3][0],a=h[0][4][0],r=c.DaZhaoModel.instance.getSlassIsRP(o,a)):2==this._speciesClass&&(o=h[0][1][0],a=h[0][3][0],r=0<c.DaZhaoModel.instance.getAllResolveItem(o,a).length),r){if(t){i=s;break}n.push([s,a])}}if(!t&&c.DaZhaoModel.instance.tClassNow==this._tClass&&0<n.length){for(var l=0;l<n.length;l++)if((h=n[l])&&h[1]==c.DaZhaoModel.instance.sClassNow)return;0<n.length&&(i=n[0][0])}if(-1===i&&(r=1!=this._speciesClass||6!=this._tClass)){for(s=0;s<this._datesCfg.length;s++){var h;(h=this._datesCfg[s])&&(a=o=0,1==this._speciesClass?(o=h[0][3][0],a=h[0][4][0]):2==this._speciesClass&&(o=h[0][1][0],a=h[0][3][0]),c.DaZhaoModel.instance.getSclassIsOpen(o,a)&&(i=s))}this._list.selectedIndex=i}this._list.selectedIndex=-1!==i?i:0,Laya.timer.callLater(this,function(){GlobalData.dispatcher.event("DA_ZHAO_OPENUPDATE",[e._setSelectedInx])})},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},a=r,c.DaZhaoDaLeiItem=a}(modules=modules||{}),function(t){var n,s,e,i,o;function a(){return s.call(this)||this}n=t.da_zhao||(t.da_zhao={}),e=t.bag.BagItem,i=laya.ui.Image,s=e,__extends(a,s),a.prototype.initialize=function(){s.prototype.initialize.call(this),this.needTip=!1,this._select=!1,this._selectImg=new i,this._selectImg.skin="common/image_common_dg.png",this._selectImg.pos(13,15),this._selectImg.visible=!0,this.addChild(this._selectImg),this.nameVisible=!1},a.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoGlobalEvt("DA_ZHAO_ADD_EQUIP_FENG_JIE",this,this.updateUi)},a.prototype.setDataSource=function(t){s.prototype.setDataSource.call(this,t),this._cfg=t,this.updateUi()},a.prototype.updateUi=function(){this._cfg?this._select=this._selectImg.visible=0<=n.DaZhaoModel.instance.selectItem.indexOf(this._cfg):(this._select=!1,this._selectImg.visible=!1)},a.prototype.clickHandler=function(){if(s.prototype.clickHandler.call(this),this._cfg){var t=n.DaZhaoModel.instance.selectItem.length,e=n.DaZhaoModel.instance.selectItem;if(0==this._select){if(t>=n.DaZhaoModel.instance.maxNum)return;this._select=!0,this._selectImg.visible=!0,e.push(this._cfg),n.DaZhaoModel.instance.selectItem=e}else{this._select=!1,this._selectImg.visible=!1;var i=e.indexOf(this._cfg);e.splice(i,1),n.DaZhaoModel.instance.selectItem=e}GlobalData.dispatcher.event("DA_ZHAO_ADD_EQUIP_FENG_JIE")}},a.prototype.destroy=function(){this._selectImg=this.destroyElement(this._selectImg),s.prototype.destroy.call(this,!0)},o=a,n.DaZhaoPanelFengJieItem=o}(modules=modules||{}),function(t){var a,r,e,i;function n(){return null!==r&&r.apply(this,arguments)||this}a=t.da_zhao||(t.da_zhao={}),e=t.bag.BagItem,r=e,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),this._nameTxt.visible=!1,this.needTip=!0},n.prototype.onEvt=function(){r.prototype.onEvt.call(this),GlobalData.dispatcher.on("BAG_CHANGE_NUM",this,this.changeNumHandler1)},n.prototype.offEvt=function(){r.prototype.offEvt.call(this),GlobalData.dispatcher.off("BAG_CHANGE_NUM",this,this.changeNumHandler1)},n.prototype.changeNumHandler1=function(t){this._itemData&&this._itemData[2]===t&&(this._numTxt.text=this._itemData[1].toString())},n.prototype.setData=function(t){var e=t[1];r.prototype.setDataSource.call(this,e),this.upImgVisible=a.DaZhaoModel.instance.getChaoYue(e);var i=this._itemCfg[4],n=this._itemCfg[3],s=PlayerModel.instance.level,o=PlayerModel.instance.eraLevel;this.maskImg.visible=s<i||o<n},i=n,a.DaZhaoItem=i}(modules=modules||{}),function(d){var t,m,e,f,l,i,g,y,n;function _(){this.maxTclass=0,this.sClassNow=0,this.tClassNow=-1,this.ClassNow=1,this.nowBuWei=-1,this.nowGeShu=0,this.maxNum=8,this.selectItem=new Array,this.currEquipId=new Array,this._huoQuName=new Array,this._moHuIdToItemId=new l,this._RpByTclass=new l,this._RpByTclassAndClass={},this._RpByTclassAndClassFenJie={},this._arrTclassAndSclassOpen={},this.maxTclass=m.instance.maxTclass,this.biLiArr=new l;for(var t=d.config.BlendCfg.instance.getCfgById(61001)[1],e=0;e<t.length;e+=2){var i=t[e],n=t[e+1];this.biLiArr.set(i,n)}var s=d.config.BlendCfg.instance.getCfgById(61002)[2];for(e=0;e<s.length;e+=2){i=s[e],n=s[e+1];this._huoQuName[parseInt(i)]=n}var o=d.config.BlendCfg.instance.getCfgById(61003)[1];this.allInfo=new Array,this.allInfoYuanShen=new Array;for(e=3;e<=this.maxTclass;e++)-1===o.indexOf(e)&&this.allInfo.push([1,e]),this.isLingZhuang(e)&&this.allInfoYuanShen.push([1,e]);var a=d.config.BlendCfg.instance.getCfgById(61005)[1];for(e=0;e<a.length;e++){var r=a[e];this.allInfo.push([2,r])}}t=d.da_zhao||(d.da_zhao={}),m=d.config.DaZhaoCfg,e=d.redPoint.RedPointCtrl,f=d.bag.BagModel,l=Laya.Dictionary,i=d.funcOpen.FuncOpenModel,g=d.player.PlayerModel,y=d.common.CommonUtil,Object.defineProperty(_,"instance",{get:function(){return this._instance=this._instance||new _},enumerable:!0,configurable:!0}),_.prototype.findAawyRPIndex=function(t,e){for(var i=t,n=t;n<=e;n++)if(_.instance.getTClassIsRP(n)){i=n;break}return i},_.prototype.huoQuName=function(t){return this._huoQuName[t]?this._huoQuName[t]:""},_.prototype.uiTypeByTClassNow=function(t,e){if(1==t){if(6!=e)return 1;if(6==e)return 2}else if(2==t)return 3},Object.defineProperty(_.prototype,"getTrueItemByCurrEquipId",{get:function(){for(var t=new Array,e=0;e<_.instance.currEquipId.length;e++){var i=_.instance.currEquipId[e];i&&t.push(i)}return t},enumerable:!0,configurable:!0}),_.prototype.isLingZhuang=function(t){return 8===t||9===t||10===t||11===t||12===t},_.prototype.isdivinatory=function(t){return 19<=t&&t<=23},_.prototype.isShowEquip=function(t){return 24<=t&&t<=29},_.prototype.isFantianEquip=function(t){return 6===t},_.prototype.sortFunc=function(t,e){var i=t[3],n=e[3];if(i&&n){var s=t[3][6];return e[3][6]<s?1:-1}return-1},_.prototype.getMoHuAllId=function(t,e,i,n,s){void 0===s&&(s=!1);var o,a=new Array,r=new Array;if(o=7===t?f.instance.getItemsByBagId(8):this.isdivinatory(t)?f.instance.getItemsByBagId(12):f.instance.getItemsByBagId(1))for(var l=0;l<o.length;l++){var h=o[l];if(h){var c=1e3*(h[0]/1e3>>0),p=y.getPartById(h[0]);c===n&&(99===i&&1<=p&&p<=6||0===i&&1<=p&&p<=10||88===i&&9<=p&&p<=10||77===i&&7<=p&&p<=8||66===i&&1<=p&&p<=8)&&r.push(h)}}if(s){var u=this._moHuIdToItemId.get(e);return u?a=u:(a=this.getAllMoHuToId(i,n),this._moHuIdToItemId.set(e,a)),a}return r},_.prototype.getAllMoHuToId=function(t,e){var i=new Array;if(99===t)for(var n=1;n<7;n++)for(var s=1;s<10;s++){var o=e+10*n+(a=s);i.push(o)}else if(0===t)for(n=1;n<11;n++)for(s=1;s<10;s++){var a=s;o=void 0,o=10==n?e+n+a:e+10*n+a,i.push(o)}else if(88===t)for(n=9;n<11;n++)for(s=1;s<10;s++)a=s,o=void 0,o=10==n?e+n+a:e+10*n+a,i.push(o);else if(77===t)for(n=7;n<9;n++)for(s=1;s<10;s++)i.push(e+10*n+s);else if(66===t)for(n=1;n<9;n++)for(s=1;s<10;s++)o=e+10*n+(a=s),i.push(o);return i},_.prototype.getEquip=function(t,e,i){if(void 0===i&&(i=!1),e&&"5"===e.toString()[0]||"8"===e.toString()[0]){var n=1e3*(e/1e3>>0),s=(.1*e>>0)%100;return(this.isMohu(e)?this.getMoHuAllId(t,e,s,n,i):f.instance.getItemsById(e))||[]}return[]},_.prototype.getEquipAnyDesCurrEquipId=function(t,e){if(!t)return[];for(var i=this.getEquip(e,t),n=this.currEquipId,s=i.length;s--;)for(var o=0;o<n.length;o++)i[s]==n[o]&&i.splice(s,1);return i},_.prototype.isMohu=function(t){var e=(.1*t>>0)%100;return!("5"!==t.toString()[0]&&"8"!==t.toString()[0]||99!=e&&0!=e&&88!=e&&77!=e&&66!=e)},_.prototype.setNum=function(t,e){var i,n=1e3*(t/1e3>>0),s=(.1*t>>0)%100;return this.isMohu(t)?i=this.getMoHuAllId(e,t,s,n).length:(i=f.instance.getItemCountById(t),this.getIsEquiped(t)&&(i+=1)),i},_.prototype.setRP=function(){e.instance.setRPProperty("daZhaoRP",i.instance.getFuncIsOpen(249)&&this.getAllRp())},_.prototype.getHaveRpTclassBagUpdate=function(){for(var t=0;t<this.allInfo.length;t++){var e=this.allInfo[t];if(e&&1==e[0]){var i=e[1];this.getTClassIsRP(e[1],!0)?this._RpByTclass.set(i,!0):this._RpByTclass.set(i,!1)}}GlobalData.dispatcher.event("DA_ZHAO_BAG_UPDATE")},_.prototype.getFenJieNum=function(){for(var t=0;t<this.allInfo.length;t++){var e=this.allInfo[t];if(e&&2==e[0]){var i=e[1],n=m.instance.getResolveCfgsCfgById(i);if(n)for(var s=0;s<n.length;s++){var o=n[s];if(o){var a=o[3][0];this.getFenJieNumSclass(i,a)}}}}GlobalData.dispatcher.event("DA_ZHAO_BAG_UPDATE_FENGJIE")},_.prototype.getFenJieNumSclass=function(t,e){var i=this.getAllResolveItem(t,e);this._RpByTclassAndClassFenJie[t]||(this._RpByTclassAndClassFenJie[t]={}),this._RpByTclassAndClassFenJie[t][e]||(this._RpByTclassAndClassFenJie[t][e]=0),this._RpByTclassAndClassFenJie[t][e]=i.length},_.prototype.getAllRp=function(){for(var t=0;t<this.allInfo.length;t++){var e=this.allInfo[t];if(e&&1==e[0]&&this.getTClassIsRP(e[1]))return!0}return!1},_.prototype.getTClassIsRP=function(t,e){void 0===e&&(e=!1);var i=m.instance.getComposeTclassByTid(t),n=!1;if(i)for(var s=0;s<i.length;s++){var o=i[s];if(o){var a=o[3][0],r=o[4][0],l=this.getTclassIsOpen(a);if(e&&(this._RpByTclassAndClass[a]||(this._RpByTclassAndClass[a]={}),this._RpByTclassAndClass[a][r]||(this._RpByTclassAndClass[a][r]=!1)),l)if(this.getSlassIsRP(a,r)){if(!e)return!0;n=this._RpByTclassAndClass[a][r]=!0}else e&&(this._RpByTclassAndClass[a][r]=!1);else e&&(this._RpByTclassAndClass[a][r]=!1)}}return!!e&&n},_.prototype.getSlassIsRP=function(t,e){for(var i=m.instance.getComposeCfgBySclass(t,e),n=0;n<i.length;n++){var s=i[n];if(s&&this.isOpenCom(s)&&_.instance.getSlassIsRPByDate(s)){if(5!==t)return!0;var o=y.getNotGeneratedScore(s[1]);if(_.instance.getChaoYueByNotGeneratedScore(t,o,s[1]))return!0}}return!1},_.prototype.getSlassIsRPByDate=function(t){if(!t)return!1;for(var e=!0,i=t[3][0],n=t[4][0],s=t[5],o=0;o<s.length;o++)if(l=s[o])if(6==i){var a=this.getIsEquiped(l[0]);(_.instance.setNum(l[0],i)<l[1]||!a)&&(e=!1)}else _.instance.setNum(l[0],i)<l[1]&&(e=!1);if(e){var r=t[6];for(o=0;o<r.length;o++){var l;(l=r[o])&&_.instance.setNum(l[0],i)<l[1]&&(e=!1)}}if(e&&6==i){var h=1==n||3==n?9:10,c=1==n||2==n?1:2,p=g.instance.equipsDic?g.instance.equipsDic.get(h):null;if(p){var u=m.instance.getNextCfg(c,i,n,p[0])[0];return 1!=u&&2!=u&&e}return!1}return e},_.prototype.isUpMe=function(t,e){void 0===e&&(e=!1);var i=new Array;if(t)for(var n=0;n<t.length;n++){var s=t[n];e?s&&(this.getChaoYue(s)||this.isCaiZhuang(s))&&i.push(s):s&&this.getChaoYue(s)&&i.push(s)}return i},_.prototype.isCaiZhuang=function(t){return 6<=y.getItemQualityById(t[0])},_.prototype.getChaoYue=function(t){if(!t)return!1;if(!this.isMohu(t[0])){var e=t[0],i=t[3][6],n=y.getBagIdById(e);if(1==n)return _.instance.getChaoYueByNotGeneratedScore(3,i,e,!0);if(9==n)return _.instance.getChaoYueByNotGeneratedScore(8,i,e,!0);if(8==n)return _.instance.getChaoYueByNotGeneratedScore(7,i,e,!0);if(12==n)return _.instance.getChaoYueByNotGeneratedScore(19,i,e,!0);if(15==n)return d.brahma_equip.BrahmaEquipModel.instance.getIsWarEquip(t)}},_.prototype.getChaoYueByNotGeneratedScore=function(t,e,i,n){if(void 0===n&&(n=!1),this.isMohu(i))return!1;var s,o=y.getPartById(i),a=void 0;if(s=null==(a=7===t?d.beast_equipment.BeastEquipmentModel.instance.getLoseScoreEquipByPart(o):this.isLingZhuang(t)?d.yuanShen.YuanShenModel.instance.getEquipByTypePart(d.yuanShen.YuanShenUtil.getTypeById(i),o):this.isdivinatory(t)?d.divinatory_card.DivinatoryCardModel.instance.getEquipById(i):g.instance.getEquipByPart(o))?0:a[3][6],n)return s<e;if(e<=s)return!1;if(7===t)return!0;var r=void 0;if(this.isdivinatory(t)){if(r=f.instance.getItemsByBagId(12))for(var l=d.divinatory_card.DivinatoryUtil.getType(i),h=0;h<r.length;h++)if((c=r[h])&&d.divinatory_card.DivinatoryUtil.getType(c[0])===l&&y.getPartById(c[0])===o&&(p=c[3][6])&&e<=p)return!1}else if(r=f.instance.getItemsByBagId(1))for(h=0;h<r.length;h++){var c,p;if((c=r[h])&&y.getPartById(c[0])===o&&(p=c[3][6])&&e<=p)return!1}return!0},_.prototype.getFirstOpenOrRp=function(t){void 0===t&&(t=!1);var e=new Array,i=null,n=_.instance.allInfo;t&&(n=_.instance.allInfoYuanShen);for(var s=0;s<n.length;s++)(o=n[s])&&1==o[0]&&(a=this.getTclassIsOpen(o[1]))&&(i=i||a,e.push(o));if(0<e.length){for(s=0;s<e.length;s++){var o,a;if((o=e[s])&&this.getTClassIsRP(o[1])&&(a=this.getTclassIsOpen(o[1])))return a}return i}return null},_.prototype.isOpenCom=function(t){return!!t&&d.born.BornModel.instance.lv>=t[9]},_.prototype.getIsEquiped=function(t){var e=g.instance.getEquipByPart(y.getPartById(t));return!!e&&t===e[0]},_.prototype.getAllResolveItem=function(t,e,i){void 0===i&&(i=null),i=i||m.instance.getResolveCfgBySclass(t,e);var n=new Array;if(i)for(var s=0;s<i.length;s++){var o=i[s];if(o){var a=o[0],r=new Array;if(_.instance.isMohu(a)){if(r=_.instance.getEquip(t,a))for(var l=0;l<r.length;l++)(h=r[l])&&n.push(h)}else if(r=d.bag.BagModel.instance.getItemsById(a))for(l=0;l<r.length;l++){var h;(h=r[l])&&n.push(h)}}}return n},_.prototype.setArrTclassAndSclassOpen=function(){for(var t=0;t<this.allInfo.length;t++){var e=this.allInfo[t];if(e&&1==e[0]){var i=e[1],n=e[0],s=m.instance.getComposeTclassByTid(i);if(s)for(var o=0;o<s.length;o++){var a=s[o];if(a){var r=a[3][0],l=a[4][0],h=m.instance.getComposeCfgBySclass(r,l);if(h)for(var c=0;c<h.length;c++){var p=h[c];if(p){this._arrTclassAndSclassOpen[r]||(this._arrTclassAndSclassOpen[r]={});var u=this.isOpenCom(p);1===n&&(this.isLingZhuang(r)?u=d.yuanShen.YuanShenModel.instance.getIsOpenById(r-7)&&u:this.isdivinatory(r)?u=d.divinatory_card.DivinatoryCardModel.instance.getState(r-18)&&u:this.isShowEquip(r)&&(u=d.funcOpen.FuncOpenModel.instance.getFuncIsOpen(d.config.ShowEquipCfg.instance.type2ActId[this.getShowEquipTypeByTClass(r)]))),this._arrTclassAndSclassOpen[r][l]=u}}}}}}},_.prototype.getTclassIsOpen=function(t){var e=this._arrTclassAndSclassOpen[t];if(e)for(var i in e)if(e[i])return[t,parseInt(i)];return null},_.prototype.getSclassIsOpen=function(t,e){var i=this._arrTclassAndSclassOpen[t];return!!i&&!!i[e]},_.prototype.getShowEquipTypeByTClass=function(t){if(24<=t&&t<=29)switch(t){case 26:return 1;case 27:return 2;case 29:return 4;case 28:return 3;case 25:return 7;case 24:return 5}return 0},_.prototype.getNoMoreNoticeId=function(t){return 18+t},n=_,t.DaZhaoModel=n}(modules=modules||{}),function(f){var g,a,n,y,r,l,h,c,_,p,t;function e(t){this._Panel=t}g=f.da_zhao||(f.da_zhao={}),a=f.config.DaZhaoCfg,n=Laya.Event,y=f.common.CustomClip,r=f.bag.BagUtil,l=f.notice.SystemNoticeManager,h=f.common.CustomList,c=Laya.Point,_=f.common.CommonUtil,p=function(t,e){this.item=t,this.uid=e},e.prototype.initialize=function(){this._buWeiDate=[1,2,3,4,5,6,7,8],this._oneImgAndItem=new Array,this._twoImgAndItem=new Array,this._fiveImgAndItem=new Array,this._threeImgAndItem=new Array,this._fourImgAndItem=new Array,this.initializeClip(),this._BuWeiXuanZeList=new h,this._BuWeiXuanZeList.width=422,this._BuWeiXuanZeList.height=120,this._BuWeiXuanZeList.hCount=4,this._BuWeiXuanZeList.spaceX=13,this._BuWeiXuanZeList.spaceY=0,this._BuWeiXuanZeList.itemRender=g.DaZhaoBuWeiItem,this._BuWeiXuanZeList.x=0,this._BuWeiXuanZeList.y=0,this._Panel.buWeiXuanZeListBox.addChild(this._BuWeiXuanZeList),_.setHTMLPro(this._Panel.daZhaoBoxHTML,"#3a5385","SimHei",22),_.setHTMLPro(this._Panel.daZhaoTipsHTML,"#3a5385","SimHei",22,"center"),this._stoneDia=new g.ComposeAddAlert,this._Panel.daZhaoFangRuBox.addChild(this._stoneDia),this._stoneDia.visible=!1,this._isCilao=!1,this.tableImgAndItemKeyType={};for(var t=[new c(5,280),new c(285,280),new c(5.4,395),new c(142,395),new c(285,395)],e=[new c(5,280),new c(285,280),new c(5.4,395),new c(285,395)],i=[new c(5.4,395),new c(142,395),new c(285,395)],n=[new c(5.4,395),new c(285,395)],s=[new c(142,395)],o=0;o<1;o++)this.addItemPit(s,this._Panel.oneImgAndItemBox,this._oneImgAndItem,o);for(o=0;o<2;o++)this.addItemPit(n,this._Panel.twoImgAndItemBox,this._twoImgAndItem,o);for(o=0;o<3;o++)this.addItemPit(i,this._Panel.threeImgAndItemBox,this._threeImgAndItem,o);for(o=0;o<4;o++)this.addItemPit(e,this._Panel.fourImgAndItemBox,this._fourImgAndItem,o);for(o=0;o<5;o++)this.addItemPit(t,this._Panel.fiveImgAndItemBox,this._fiveImgAndItem,o);this.tableImgAndItemKeyType[1]=this._oneImgAndItem,this.tableImgAndItemKeyType[2]=this._twoImgAndItem,this.tableImgAndItemKeyType[3]=this._threeImgAndItem,this.tableImgAndItemKeyType[4]=this._fourImgAndItem,this.tableImgAndItemKeyType[5]=this._fiveImgAndItem},e.prototype.addItemPit=function(t,e,i,n){var s=this.newDaZhaoItem();s.pos(t[n].x,t[n].y),e.addChild(s);var o=new p(s,null);i.push(o)},e.prototype.newDaZhaoItem=function(){var t=new g.DaZhaoItem;return t._qualityBg.skin="compose/btn_tanchuang_01.png",t.dataSource=null,t.scale(.8,.8),t.needTip=!1,t},e.prototype.addListeners=function(){for(var t in this.tableImgAndItemKeyType)if(this.tableImgAndItemKeyType.hasOwnProperty(t)){var e=this.tableImgAndItemKeyType[t];if(e)for(var i=0;i<e.length;i++)e[i].item.on(n.CLICK,this,this.addDiolg,[i])}this._Panel.daZhaoOneKeyBtn.on(n.CLICK,this,this.daZhaoOneKeyBtnHandler),this._Panel.daZhaoOneKey1Btn.on(n.CLICK,this,this.daZhaoOneKey1BtnHandler),GlobalData.dispatcher.on("DA_ZHAO_BUWEI_SWITCH",this,this.showUI),GlobalData.dispatcher.on("DA_ZHAO_ADD_EQUIP",this,this.updatePitArr),GlobalData.dispatcher.on("COMPOSE_REPLY",this,this.composeReply),GlobalData.dispatcher.on("PLAYER_WEAR_EQUIP",this,this.updateList),GlobalData.dispatcher.on("PLAYER_WEAR_EQUIPS",this,this.updateList),GlobalData.dispatcher.on("DA_ZHAO_ADD_EQUIP_DAZHAO_JIXU",this,this.daZhaoOneKey1BtnHandler)},e.prototype.removeListeners=function(){for(var t in this.tableImgAndItemKeyType)if(this.tableImgAndItemKeyType.hasOwnProperty(t)){var e=this.tableImgAndItemKeyType[t];if(e)for(var i=0;i<e.length;i++)e[i].item.off(n.CLICK,this,this.addDiolg)}this._Panel.daZhaoOneKeyBtn.off(n.CLICK,this,this.daZhaoOneKeyBtnHandler),this._Panel.daZhaoOneKey1Btn.off(n.CLICK,this,this.daZhaoOneKey1BtnHandler),GlobalData.dispatcher.off("DA_ZHAO_BUWEI_SWITCH",this,this.showUI),GlobalData.dispatcher.off("DA_ZHAO_ADD_EQUIP",this,this.updatePitArr),GlobalData.dispatcher.off("COMPOSE_REPLY",this,this.composeReply),GlobalData.dispatcher.off("PLAYER_WEAR_EQUIP",this,this.updateList),GlobalData.dispatcher.off("PLAYER_WEAR_EQUIPS",this,this.updateList),GlobalData.dispatcher.off("DA_ZHAO_ADD_EQUIP_DAZHAO_JIXU",this,this.daZhaoOneKey1BtnHandler)},e.prototype.onOpened=function(){y.thisStop(this._tenBtnBtnClip)},e.prototype.setOpenParam=function(t){this._Panel.daZhaoBox.visible=!0,this._Panel.jieZiBox.visible=!1,this._Panel.fengJieBox.visible=!1;var e=a.instance.getComposeCfgBySclass(g.DaZhaoModel.instance.tClassNow,g.DaZhaoModel.instance.sClassNow);e&&(this.showUI(e[0]),this.setBuWeiXuanZeList())},e.prototype.composeReply=function(){var t=f.compose.ComposeModel.instance.ComposeReply[0];0!=t&&_.noticeError(t),this.updateList()},e.prototype.updateList=function(){this._datesCfg&&(this.showUI(this._datesCfg),this.setBuWeiXuanZeList())},e.prototype.showUI=function(t){if(this._datesCfg=t,this._datesCfg&&this._Panel.daZhaoBox.visible&&1==g.DaZhaoModel.instance.ClassNow){var e=this._datesCfg[7],i=this._datesCfg[8],n=this._datesCfg[1],s=this._datesCfg[6],o=this._datesCfg[4][0],a=this._datesCfg[3][0],r=this._datesCfg[5];if(g.DaZhaoModel.instance.itemId=this._datesCfg[1],g.DaZhaoModel.instance.isLingZhuang(a)?this._Panel.daZhaoTipsHTML.innerHTML="可放入<span style='color:#ff3e3e'>"+e+"</span>灵装":g.DaZhaoModel.instance.isdivinatory(a)?this._Panel.daZhaoTipsHTML.innerHTML="可放入<span style='color:#ff3e3e'>"+e+"</span>卦牌":this._Panel.daZhaoTipsHTML.innerHTML="可放入<span style='color:#ff3e3e'>"+e+"</span>装备",this._Panel.laiYuanTipsText.text=g.DaZhaoModel.instance.huoQuName(g.DaZhaoModel.instance.tClassNow),g.DaZhaoModel.instance.isMohu(n)){this._isCilao=!0,g.DaZhaoModel.instance.isLingZhuang(a)?this._Panel.daZhaoBoxHTML.innerHTML="必定获得<span style='color:#ff3e3e'>"+i+"</span>灵装一件(随机部位)":g.DaZhaoModel.instance.isdivinatory(a)?this._Panel.daZhaoBoxHTML.innerHTML="必定获得<span style='color:#ff3e3e'>"+i+"</span>卦牌一件(随机部位)":this._Panel.daZhaoBoxHTML.innerHTML="必定获得<span style='color:#ff3e3e'>"+i+"</span>装备一件(随机部位)",this._Panel.nameText.text="随机部位";var l=g.DaZhaoModel.instance.biLiArr.get(o);if(l){this._Panel.muBiaoItem.dataSource=[l,1,0,null],this._Panel.muBiaoItem.visible=!0,this._Panel.suiJiText.visible=!1;var h=[];if(r[0]&&(h=g.DaZhaoModel.instance.getEquip(a,r[0][0],!0)),0<h.length){var c=h[0],p=(1e-5*c>>0)%100;this._Panel.muBiaoItem._levelTxt.value=p.toString(),this._Panel.muBiaoItem.setLevel(c,!0),this._Panel.muBiaoItem._levelTxt.visible=!0,this._Panel.muBiaoItem.lvImg.visible=!0}}else this._Panel.muBiaoItem.dataSource=null,this._Panel.muBiaoItem.visible=!1,this._Panel.suiJiText.visible=!0;this.changePaiBan(1)}else g.DaZhaoModel.instance.isLingZhuang(a)?this._Panel.daZhaoBoxHTML.innerHTML="必定获得<span style='color:#ff3e3e'>"+i+"</span>灵装一件(指定部位)":g.DaZhaoModel.instance.isdivinatory(a)?this._Panel.daZhaoBoxHTML.innerHTML="必定获得<span style='color:#ff3e3e'>"+i+"</span>卦牌一件(指定部位)":this._Panel.daZhaoBoxHTML.innerHTML="必定获得<span style='color:#ff3e3e'>"+i+"</span>装备一件(指定部位)",this._Panel.muBiaoItem.dataSource=[n,1,0,null],this._Panel.suiJiText.visible=!1,this._Panel.muBiaoItem.visible=!0,this._Panel.nameText.text=_.getNameByItemId(n),this.changePaiBan(2);if(r[0]&&(g.DaZhaoModel.instance.nowGeShu=r[0][1],this.setDaZaoUI(g.DaZhaoModel.instance.nowGeShu)),s[0]){this._Panel.caiLiaoItemNumTextBox.visible=this._Panel.caiLiaoItem.visible=!0;var u=s[0];this._Panel.caiLiaoItem.dataSource=[u[0],u[1],0,null];var d=f.bag.BagModel.instance.getItemCountById(u[0]),m="#ff7462";this._isCilao=d>=u[1],d<u[1]||(m="#ffffff"),this._Panel.caiLiaoItem.setNum(d+"/"+u[1],m),this._Panel.caiLiaoItemNumText.text=this._Panel.caiLiaoItem._numTxt.text,this._Panel.caiLiaoItemNumText.color=this._Panel.caiLiaoItem._numTxt.color,this._Panel.caiLiaoItem._numTxt.visible=!1}else this._isCilao=!0,this._Panel.caiLiaoItemNumTextBox.visible=this._Panel.caiLiaoItem.visible=!1;g.DaZhaoModel.instance.currEquipId.length=0,y.thisStop(this._tenBtnBtnClip),this.UpDateOther()}},e.prototype.setBuWeiXuanZeList=function(){var t=a.instance.getComposeCfgBySclass(g.DaZhaoModel.instance.tClassNow,g.DaZhaoModel.instance.sClassNow);if(t){this._BuWeiXuanZeList.datas=t;for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=this._datesCfg[3][0];if(g.DaZhaoModel.instance.isLingZhuang(n)||g.DaZhaoModel.instance.isShowEquip(n)){if(g.DaZhaoModel.instance.getSlassIsRPByDate(i))return void(this._BuWeiXuanZeList.selectedIndex=e)}else{var s=_.getNotGeneratedScore(i[1]),o=i[3][0];if(g.DaZhaoModel.instance.getChaoYueByNotGeneratedScore(o,s,i[1]))return void(this._BuWeiXuanZeList.selectedIndex=e)}}}this._BuWeiXuanZeList.selectedIndex=0}},e.prototype.UpDateOther=function(){if(this._datesCfg&&this._Panel.daZhaoBox.visible&&1==g.DaZhaoModel.instance.ClassNow){var t=this._datesCfg[5],e=this._datesCfg[3][0],i=t[0]?g.DaZhaoModel.instance.setNum(t[0][0],e):0;this._Panel.NowHaveNumText.text="拥有:"+i}},e.prototype.setDaZaoUI=function(t){for(var e in this._Panel.fiveImgAndItemBox.visible=5==t,this._Panel.fourImgAndItemBox.visible=4==t,this._Panel.threeImgAndItemBox.visible=3==t,this._Panel.twoImgAndItemBox.visible=2==t,this._Panel.oneImgAndItemBox.visible=1==t,5==t?(this._Panel.shuImg.skin="compose/image_zbdz_hcline2.png",this._Panel.shuImg.pos(76,259)):4==t?(this._Panel.shuImg.skin="compose/image_zbdz_hcline2.png",this._Panel.shuImg.pos(76,259)):3==t?(this._Panel.shuImg.skin="compose/image_zbdz_hcline1.png",this._Panel.shuImg.pos(68,259)):2==t?(this._Panel.shuImg.skin="compose/image_zbdz_hcline1.png",this._Panel.shuImg.pos(68,259)):1==t&&(this._Panel.shuImg.skin="compose/image_zbdz_hcline1.png",this._Panel.shuImg.pos(68,259)),this.tableImgAndItemKeyType)if(this.tableImgAndItemKeyType.hasOwnProperty(e)){var i=this.tableImgAndItemKeyType[e];if(i)for(var n=0;n<i.length;n++){var s=i[n];s.item.dataSource=null,s.uid=null,s.item._qualityBg.skin="compose/btn_tanchuang_01.png"}}},e.prototype.changePaiBan=function(t){switch(this._Panel.buWeiXuanZeBox.visible=1!=t,this._Panel.caiLiaoItem.visible=1!=t,t){case 1:this._Panel.daZhaoFangRuBox.y=366,this._Panel.daZhaoBoxBottonsBox.y=965;break;case 2:this._Panel.daZhaoFangRuBox.y=318,this._Panel.daZhaoBoxBottonsBox.y=998}},e.prototype.addDiolg=function(t){if(this.tableImgAndItemKeyType[g.DaZhaoModel.instance.nowGeShu][t].item.itemData)this.showTipsFangRu(t);else{var e=this._datesCfg[3][0],i=this._datesCfg[5];i[0]&&0<g.DaZhaoModel.instance.getEquipAnyDesCurrEquipId(i[0][0],e).length?this.showTipsFangRu(t):this.tipsFun()}},e.prototype.showTipsFangRu=function(t){this._stoneDia?(this._stoneDia.setOpenParam([t,this._datesCfg]),this._stoneDia.showDelBtn=!1,this._Panel.daZhaoFangRuBox.addChild(this._stoneDia)):(this._stoneDia=new g.ComposeAddAlert,this._Panel.daZhaoFangRuBox.addChild(this._stoneDia),this._stoneDia.setOpenParam([t,this._datesCfg]),this._stoneDia.showDelBtn=!1),this._stoneDia.visible=!0},e.prototype.updatePitArr=function(){var t=g.DaZhaoModel.instance.currEquipId;this._changDu=0;var e=this.tableImgAndItemKeyType[g.DaZhaoModel.instance.nowGeShu],i=this._datesCfg[3][0];if(0<t.length){for(var n=0;n<t.length;n++){var s=t[n];null!=s?(e&&(e[n].item.setData([i,s]),e[n].uid=s[2]),this._changDu++):e&&(e[n].item.dataSource=null,e[n].uid=null,e[n].item._qualityBg.skin="compose/btn_tanchuang_01.png")}this._isCilao&&this._changDu==g.DaZhaoModel.instance.nowGeShu?y.thisPlay(this._tenBtnBtnClip):y.thisStop(this._tenBtnBtnClip)}else y.thisStop(this._tenBtnBtnClip)},e.prototype.daZhaoOneKeyBtnHandler=function(){var t=this._datesCfg[3][0],e=this._datesCfg[5],i=new Array;if(e[0]&&(i=g.DaZhaoModel.instance.getEquipAnyDesCurrEquipId(e[0][0],t)),i.sort(g.DaZhaoModel.instance.sortFunc.bind(g.DaZhaoModel.instance)),0<i.length){var n=this.tableImgAndItemKeyType[g.DaZhaoModel.instance.nowGeShu];if(n)for(var s=0;s<n.length;s++)if(null==n[s].uid){var o=ArrayUtils.random(i);i.splice(i.indexOf(o),1),g.DaZhaoModel.instance.currEquipId[s]=o}GlobalData.dispatcher.event("DA_ZHAO_ADD_EQUIP")}else g.DaZhaoModel.instance.currEquipId.length!=g.DaZhaoModel.instance.nowGeShu&&this.tipsFun()},e.prototype.daZhaoOneKey1BtnHandler=function(t){void 0===t&&(t=!0);for(var e=new Array,i=this.tableImgAndItemKeyType[g.DaZhaoModel.instance.nowGeShu],n=0;n<i.length;n++)null!=i[n].uid&&e.push(i[n].uid);if(0<e.length)if(this._changDu==g.DaZhaoModel.instance.nowGeShu&&this._isCilao){var s=g.DaZhaoModel.instance.isUpMe(g.DaZhaoModel.instance.getTrueItemByCurrEquipId);if(t)if(0<s.length){var o=this._datesCfg[3][0],a=0;g.DaZhaoModel.instance.isLingZhuang(o)?a=1:g.DaZhaoModel.instance.isdivinatory(o)?a=2:g.DaZhaoModel.instance.isShowEquip(o)&&(a=3),WindowManager.instance.open(418,[2,s,a])}else Channel.instance.publish(2098452,[this._datesCfg[0],e,1]);else Channel.instance.publish(2098452,[this._datesCfg[0],e,1])}else this._changDu!=g.DaZhaoModel.instance.nowGeShu&&this._isCilao?this.tipsFun():this._changDu==g.DaZhaoModel.instance.nowGeShu||this._isCilao?this._changDu!=g.DaZhaoModel.instance.nowGeShu||this._isCilao||(this._Panel.caiLiaoItem.itemData?r.openLackPropAlert(this._Panel.caiLiaoItem.itemData[0],1):l.instance.addNotice("道具不足",!0)):this.tipsFun();else o=this._datesCfg[3][0],g.DaZhaoModel.instance.isLingZhuang(o)?l.instance.addNotice("未放入灵装",!0):g.DaZhaoModel.instance.isdivinatory(o)?l.instance.addNotice("未放入卦牌",!0):l.instance.addNotice("未放入装备",!0)},e.prototype.tipsFun=function(){var t=this._datesCfg[3][0],e=1;7===t?e=2:g.DaZhaoModel.instance.isLingZhuang(t)?e=3:g.DaZhaoModel.instance.isdivinatory(t)?e=6:g.DaZhaoModel.instance.isShowEquip(t)&&(e=7),WindowManager.instance.open(259,[this._datesCfg,e])},e.prototype.initializeClip=function(){this._tenBtnBtnClip=y.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._Panel.daZhaoOneKey1Btn.addChild(this._tenBtnBtnClip),this._tenBtnBtnClip.scale(1,1,!0),this._tenBtnBtnClip.pos(-6,-8,!0)},e.prototype.close=function(){},e.prototype.destroy=function(){this._tenBtnBtnClip&&(this._tenBtnBtnClip.removeSelf(),this._tenBtnBtnClip.destroy(),this._tenBtnBtnClip=null),this._BuWeiXuanZeList&&(this._BuWeiXuanZeList.removeSelf(),this._BuWeiXuanZeList.destroy(),this._BuWeiXuanZeList=null)},t=e,g.DaZhaoPanelClass=t}(modules=modules||{}),function(d){var v,c,t,m,e,f,I,i;function n(t){this._Panel=t}v=d.da_zhao||(d.da_zhao={}),c=d.config.DaZhaoCfg,t=Laya.Event,m=d.notice.SystemNoticeManager,e=d.common.CustomList,f=d.common.CommonUtil,I=Laya.Dictionary,n.prototype.initialize=function(){this._list=new e,this._list.width=450,this._list.height=247,this._list.hCount=4,this._list.spaceX=10,this._list.shiftingX=10,this._list.spaceY=-18,this._list.itemRender=v.DaZhaoPanelFengJieItem,this._list.x=0,this._list.y=0,this._Panel.fengJieList1Box.addChild(this._list),this._listYiXuan=new e,this._listYiXuan.width=450,this._listYiXuan.height=198,this._listYiXuan.hCount=4,this._listYiXuan.shiftingX=10,this._listYiXuan.spaceX=10,this._listYiXuan.spaceY=-18,this._listYiXuan.itemRender=v.DaZhaoRewardItem,this._listYiXuan.x=0,this._listYiXuan.y=0,this._Panel.fengJieList2Box.addChild(this._listYiXuan),this._listJiangLi=new e,this._listJiangLi.width=450,this._listJiangLi.height=106,this._listJiangLi.hCount=4,this._listJiangLi.shiftingX=10,this._listJiangLi.spaceX=10,this._listJiangLi.spaceY=-18,this._listJiangLi.itemRender=v.DaZhaoRewardItem1,this._listJiangLi.x=0,this._listJiangLi.y=0,this._Panel.fengJieList3Box.addChild(this._listJiangLi),this._nowArr=new Array,this._arrItemToItemResolve=new Array},n.prototype.addListeners=function(){this._Panel.fengJieOneKeyBtn.on(t.CLICK,this,this.daZhaoOneKeyBtnHandler),this._Panel.fengJieOkBtn.on(t.CLICK,this,this.daZhaoOneKey1BtnHandler),this._list.on(t.SELECT,this,this.selectHandler),GlobalData.dispatcher.on("RESOLVE_REPLY",this,this.resolveReply),GlobalData.dispatcher.on("DA_ZHAO_ADD_EQUIP_FENG_JIE",this,this.upDateListYiXuanAndShouYi),GlobalData.dispatcher.on("DA_ZHAO_ADD_EQUIP_FENG_JIE_JIXU",this,this.daZhaoOneKey1BtnHandler),GlobalData.dispatcher.on("PLAYER_WEAR_EQUIP",this,this.updateList),GlobalData.dispatcher.on("PLAYER_WEAR_EQUIPS",this,this.updateList)},n.prototype.removeListeners=function(){this._Panel.fengJieOneKeyBtn.off(t.CLICK,this,this.daZhaoOneKeyBtnHandler),this._Panel.fengJieOkBtn.off(t.CLICK,this,this.daZhaoOneKey1BtnHandler),this._list.off(t.SELECT,this,this.selectHandler),GlobalData.dispatcher.off("RESOLVE_REPLY",this,this.resolveReply),GlobalData.dispatcher.off("DA_ZHAO_ADD_EQUIP_FENG_JIE",this,this.upDateListYiXuanAndShouYi),GlobalData.dispatcher.off("DA_ZHAO_ADD_EQUIP_FENG_JIE_JIXU",this,this.daZhaoOneKey1BtnHandler),GlobalData.dispatcher.off("PLAYER_WEAR_EQUIP",this,this.updateList),GlobalData.dispatcher.off("PLAYER_WEAR_EQUIPS",this,this.updateList)},n.prototype.selectHandler=function(){v.DaZhaoModel.instance.selectItem.length,-1==this._list.selectedIndex||v.DaZhaoModel.instance.maxNum},n.prototype.onOpened=function(){this.showList()},n.prototype.setOpenParam=function(t){this._Panel.fengJieBox.visible=!0,v.DaZhaoModel.instance.selectItem.length=0,this._nowArr.length=0;var e=c.instance.getResolveCfgBySclass(v.DaZhaoModel.instance.tClassNow,v.DaZhaoModel.instance.sClassNow);e&&this.showUI(e[0])},n.prototype.resolveReply=function(){var t=d.compose.ComposeModel.instance.ResolveReply[0],e=d.compose.ComposeModel.instance.ResolveReply[1];0!=t?f.noticeError(t):WindowManager.instance.open(212,[e,"分解成功",!0,"",!1,!0]),v.DaZhaoModel.instance.selectItem.length=0,this.updateList()},n.prototype.getAllItem=function(){console.log("tClassNow:"+v.DaZhaoModel.instance.tClassNow+", sClassNow:"+v.DaZhaoModel.instance.sClassNow);var t=c.instance.getResolveCfgBySclass(v.DaZhaoModel.instance.tClassNow,v.DaZhaoModel.instance.sClassNow);if(t){for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=i[0],s=i[1][0],o=new Array;if(v.DaZhaoModel.instance.isMohu(n)){if(o=v.DaZhaoModel.instance.getEquip(s,n))for(var a=0;a<o.length;a++)(l=o[a])&&this._nowArr.push(l);for(var r=0;r<o.length;r++)(h=o[r])&&(this._arrItemToItemResolve[h[0]]=i)}else if(o=d.bag.BagModel.instance.getItemsById(n)){for(a=0;a<o.length;a++){var l;(l=o[a])&&this._nowArr.push(l)}for(r=0;r<o.length;r++){var h;(h=o[r])&&(this._arrItemToItemResolve[h[0]]=i)}}}}this._nowArr.sort(v.DaZhaoModel.instance.sortFunc.bind(v.DaZhaoModel.instance))}},n.prototype.updateList=function(){this._datesCfg&&this.showUI(this._datesCfg)},n.prototype.showUI=function(t){if(this._datesCfg=t,this._datesCfg&&this._Panel.fengJieBox.visible&&2==v.DaZhaoModel.instance.ClassNow){v.DaZhaoModel.instance.selectItem.length=0,this._nowArr.length=0,this.getAllItem(),this._list.datas=this._nowArr,this.upDateListYiXuanAndShouYi();var e=this._datesCfg[1][0],i=this._datesCfg[3][0];if(this._Panel.text3.visible=!0,this._Panel.text4.text=this._Panel.text5.text="",3===e)this._Panel.text2.text="点击选择要分解的灵装,再次点击取消",this._Panel.noTipsText.text="无可分解灵装",this._Panel.text3.text="分解必定获得神识";else if(4===e)this._Panel.text2.text="点击选择要分解的卦牌,再次点击取消",this._Panel.noTipsText.text="无可分解卦牌",this._Panel.text3.text="分解必定获得强化水晶";else if(5===e)this._Panel.text2.text="点击选择要分解的异宝,再次点击取消",this._Panel.noTipsText.text="无可分解异宝",this._Panel.text3.text="分解必定获得异宝精华";else if(6===e){var n=this._datesCfg[3][1],s=n[2]+n[3];this._Panel.text3.text="分解必定获得梵天神石",this._Panel.text2.text="点击选择要分解的"+s+",再次点击取消",this._Panel.noTipsText.text="无可分解"+s,this._Panel.text4.text="",this._Panel.text5.text=""}else this._Panel.text2.text="点击选择要分解的装备,再次点击取消",this._Panel.noTipsText.text="无可分解装备",this._Panel.text3.text="分解必定获得BOSS精魄",2===e&&(this._Panel.text3.visible=5!=i&&6!=i)}},n.prototype.upDateListYiXuanAndShouYi=function(){this._Panel.noTipsText.visible=0==this._nowArr.length,this._listYiXuan.datas=v.DaZhaoModel.instance.selectItem;var t=new I,e=new I,i=new Array,n=v.DaZhaoModel.instance.selectItem.length,s=this._datesCfg[1][0];if(3===s)this._Panel.xuanZeText.text="已选择的灵装("+n+"/"+v.DaZhaoModel.instance.maxNum+")";else if(4===s)this._Panel.xuanZeText.text="已选择的卦牌("+n+"/"+v.DaZhaoModel.instance.maxNum+")";else if(5===s)this._Panel.xuanZeText.text="已选择的异宝("+n+"/"+v.DaZhaoModel.instance.maxNum+")";else if(6===s){var o=this._datesCfg[3][1],a=o[2]+o[3];this._Panel.xuanZeText.text="已选择的"+a+"("+n+"/"+v.DaZhaoModel.instance.maxNum+")"}else this._Panel.xuanZeText.text="已选择的装备("+n+"/"+v.DaZhaoModel.instance.maxNum+")";if(0<n)for(var r=0;r<v.DaZhaoModel.instance.selectItem.length;r++){var l=v.DaZhaoModel.instance.selectItem[r];if(l){var h=l[0],c=this._arrItemToItemResolve[h];if(c){for(var p=c[4],u=c[6],d=0;d<p.length;d++){var m=p[d];if(m){var f=m[0],g=m[1];t.get(f)?t.get(f)[1][1]+=g:t.set(f,[1,[f,g,0,null]])}}for(var y=0;y<u.length;y++){var _=u[y];_&&(e.get(_)||e.set(_,[2,[_,1,0,null]]))}}}}t.values.forEach(function(t){t&&i.push(t)}),e.values.forEach(function(t){t&&i.push(t)}),this._listJiangLi.datas=i},n.prototype.showList=function(){},n.prototype.daZhaoOneKeyBtnHandler=function(){if((v.DaZhaoModel.instance.selectItem.length=0)<this._nowArr.length){for(var t=0;t<this._nowArr.length;t++){var e=this._nowArr[t];e&&v.DaZhaoModel.instance.selectItem.length<v.DaZhaoModel.instance.maxNum&&v.DaZhaoModel.instance.selectItem.push(e)}GlobalData.dispatcher.event("DA_ZHAO_ADD_EQUIP_FENG_JIE")}else{var i=this._datesCfg[1][0];if(3===i)m.instance.addNotice("无可分解灵装",!0);else if(4===i)m.instance.addNotice("无可分解卦牌",!0);else if(5===i)m.instance.addNotice("无可分解异宝",!0);else if(6===i){var n=this._datesCfg[3][1],s=n[2]+n[3];m.instance.addNotice("无可分解"+s,!0)}else m.instance.addNotice("无可分解装备",!0)}},n.prototype.daZhaoOneKey1BtnHandler=function(t){if(void 0===t&&(t=!0),0<v.DaZhaoModel.instance.selectItem.length){for(var e=new Array,i=0;i<v.DaZhaoModel.instance.selectItem.length;i++){var n=v.DaZhaoModel.instance.selectItem[i][2];e.push(n)}if(0<e.length){var s=this._datesCfg[0],o=v.DaZhaoModel.instance.isUpMe(v.DaZhaoModel.instance.selectItem,!0),a=this._datesCfg[1][0];if(0<o.length&&t){var r=0;3===a?r=1:4===a?r=2:5===a?r=3:6===a&&(r=4),WindowManager.instance.open(418,[1,o,r])}else if(6===a&&t){var l=Handler.create(null,function(){Channel.instance.publish(2098453,[s,e,1])},null),h=this._datesCfg[3][0],c=d.config.ItemFantianCfg.instance.getItemByCfg(v.DaZhaoModel.instance.selectItem[0][0]),p=c[1],u=c[6]+"<span style='color:#b15315'>珍稀装备</span>,可用于"+p+"<span style='color:#b15315'>升阶</span>,分解后<span style='color:#b15315'>必定</span>获得<span style='color:#b15315'>梵天神石</span>和梵天强化石,是否分解?";f.alert("温馨提示",u,[l],[],null,!0,null,v.DaZhaoModel.instance.getNoMoreNoticeId(h))}else Channel.instance.publish(2098453,[s,e,1])}else f.noticeError(17007)}else 3===(a=this._datesCfg[1][0])?m.instance.addNotice("请选择你要分解的灵装",!0):4===a?m.instance.addNotice("请选择你要分解的卦牌",!0):5===a?m.instance.addNotice("请选择你要分解的异宝",!0):6===a?m.instance.addNotice("请选择你要分解的梵天装备",!0):m.instance.addNotice("请选择你要分解的装备",!0)},n.prototype.close=function(){},n.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),this._listYiXuan&&(this._listYiXuan.removeSelf(),this._listYiXuan.destroy(),this._listYiXuan=null),this._listJiangLi&&(this._listJiangLi.removeSelf(),this._listJiangLi.destroy(),this._listJiangLi=null)},i=n,v.DaZhaoPanelFengJieClass=i}(modules=modules||{}),function(c){var p,a,t,l,i,e,n;function s(t){this._Panel=t}p=c.da_zhao||(c.da_zhao={}),a=c.config.DaZhaoCfg,t=Laya.Event,l=c.common.CustomClip,i=c.notice.SystemNoticeManager,e=c.common.CommonUtil,s.prototype.initialize=function(){e.setHTMLPro(this._Panel.jieZiBoxHTML,"#3a5385","SimHei",22),this._taskBaseOne=[this._Panel.caiLiaoItem1,this._Panel.caiLiaoItem2,this._Panel.caiLiaoItem3,this._Panel.caiLiaoItem4],this._taskBaseOne1=[this._Panel.caiLiaoItem5,this._Panel.caiLiaoItem6,this._Panel.caiLiaoItem7,this._Panel.additionalCaiLiaoItem],this._tenBtnBtnClip=l.create("assets/effect/btn_light.atlas","btn_light",16),this._tenBtnBtnClip.setProperty(this._Panel.jieZiOneKeyBtn,-6,-8),this._isCilao=new Array},s.prototype.addListeners=function(){this._Panel.addTipsBtn.on(t.CLICK,this,this.addTipsBtnHandler),this._Panel.addTipsBtn1.on(t.CLICK,this,this.addTipsBtnHandler),this._Panel.jieZiOneKeyBtn.on(t.CLICK,this,this.daZhaoOneKey1BtnHandler),GlobalData.dispatcher.on("COMPOSE_REPLY",this,this.composeReply),GlobalData.dispatcher.on("PLAYER_WEAR_EQUIP",this,this.updateList),GlobalData.dispatcher.on("PLAYER_WEAR_EQUIPS",this,this.updateList)},s.prototype.removeListeners=function(){this._Panel.addTipsBtn.off(t.CLICK,this,this.addTipsBtnHandler),this._Panel.addTipsBtn1.off(t.CLICK,this,this.addTipsBtnHandler),this._Panel.jieZiOneKeyBtn.off(t.CLICK,this,this.daZhaoOneKey1BtnHandler),GlobalData.dispatcher.off("COMPOSE_REPLY",this,this.composeReply),GlobalData.dispatcher.off("PLAYER_WEAR_EQUIP",this,this.updateList),GlobalData.dispatcher.off("PLAYER_WEAR_EQUIPS",this,this.updateList)},s.prototype.composeReply=function(){var t=c.compose.ComposeModel.instance.ComposeReply[0];0!=t?(e.noticeError(t),17004==t&&this.updateList()):this.updateList()},s.prototype.updateList=function(){var t;this._isCilao.length=0,1==p.DaZhaoModel.instance.sClassNow||3==p.DaZhaoModel.instance.sClassNow?(t=9,this._Panel.addTipsBtn1.skin=this._Panel.addTipsBtn.skin="compose/iconbox_common_jz.png",this._Panel.buManZuText.text="9阶以上戒指可升星"):(t=10,this._Panel.addTipsBtn1.skin=this._Panel.addTipsBtn.skin="compose/iconbox_common_yp.png",this._Panel.buManZuText.text="9阶以上玉佩可升星"),1==p.DaZhaoModel.instance.sClassNow||2==p.DaZhaoModel.instance.sClassNow?(this._Panel.MaxText.text="已达最大阶数",this._Panel.newText.text="升阶后"):(this._Panel.MaxText.text="已达最大星级",this._Panel.newText.text="升星后"),this._buWeiInfo=null,this._isManJie=0;var e=PlayerModel.instance.equipsDic;if(e){var i=e.get(t);i&&(this._buWeiInfo=i)}if(this._buWeiInfo){var n=1==p.DaZhaoModel.instance.sClassNow||2==p.DaZhaoModel.instance.sClassNow?1:2,s=a.instance.getNextCfg(n,p.DaZhaoModel.instance.tClassNow,p.DaZhaoModel.instance.sClassNow,this._buWeiInfo[0]);this._isManJie=s[0],s[1]&&this.showUI(s[1])}else{var o=a.instance.getComposeCfgBySclass(p.DaZhaoModel.instance.tClassNow,p.DaZhaoModel.instance.sClassNow);o&&this.showUI(o[0])}},s.prototype.setOpenParam=function(t){this._Panel.jieZiBox.visible=!0,this.updateList()},s.prototype.showUI=function(t){if(this._datesCfg=t,this._datesCfg&&this._Panel.jieZiBox.visible&&1==p.DaZhaoModel.instance.ClassNow){var e=this._datesCfg[8],i=this._datesCfg[1],n=this._datesCfg[6],s=this._datesCfg[5];p.DaZhaoModel.instance.itemId=this._datesCfg[1],this._Panel.laiYuanTipsText1.text=p.DaZhaoModel.instance.huoQuName(p.DaZhaoModel.instance.tClassNow),this._Panel.jieZiBoxHTML.innerHTML="必定获得<span style='color:#ff3e3e'>"+e+"</span>装备一件";for(var o=new Array,a=0;a<s.length;a++)(r=s[a])&&o.push(r);for(a=0;a<n.length;a++){var r;(r=n[a])&&o.push(r)}this.caiShowNow(o),this._Panel.caiLiaoItemBox.visible=!0,this._Panel.newText.visible=!0,this._Panel.jieZiBoxHTML.visible=!0,this._Panel.buManZuText.visible=!1,l.thisStop(this._tenBtnBtnClip),this._buWeiInfo?(this._Panel.nowItem.dataSource=this._buWeiInfo,this._Panel.newItem.dataSource=[i,1,0,null],this._Panel.addTipsBtn1.visible=this._Panel.addTipsBtn.visible=!1,this._Panel.nowItem.visible=!0,0==this._isManJie?(this._Panel.newItem.visible=!0,this._Panel.MaxText.visible=!1,0==this._isCilao.length?l.thisPlay(this._tenBtnBtnClip):l.thisStop(this._tenBtnBtnClip)):1==this._isManJie?(this._Panel.newItem.visible=!1,this._Panel.MaxText.visible=!0,this._Panel.caiLiaoItemBox.visible=!1,this._Panel.newText.visible=!1,this._Panel.jieZiBoxHTML.visible=!1):2==this._isManJie?(this._Panel.newItem.visible=!1,this._Panel.MaxText.visible=!0,this._Panel.caiLiaoItemBox.visible=!1,this._Panel.newText.visible=!1,this._Panel.jieZiBoxHTML.visible=!1):3==this._isManJie&&(this._Panel.newItem.visible=!1,this._Panel.newText.visible=!1,this._Panel.MaxText.visible=!1,this._Panel.buManZuText.visible=!0)):(this._Panel.newItem.visible=this._Panel.nowItem.visible=!1,this._Panel.MaxText.visible=!1,this._Panel.addTipsBtn1.visible=this._Panel.addTipsBtn.visible=!0),this.setUIAdditional()}},s.prototype.setUIAdditional=function(){1==p.DaZhaoModel.instance.sClassNow||2==p.DaZhaoModel.instance.sClassNow?(this._Panel.additionalBox.visible=!1,this._Panel.caiLiaoItemBox.visible=!0,this._Panel.text6.y=770):(this._Panel.additionalBox.visible=!0,this._Panel.caiLiaoItemBox.visible=!1,this._Panel.text6.y=894)},s.prototype.caiShowNow=function(t){var e=new Array;this._Panel.additionalCaiLiaoItemBox.visible=!1,this._Panel.maskImg.y=164,this._Panel.maskImg.height=34;for(var i=0;i<this._taskBaseOne.length;i++)this._taskBaseOne[i].visible=this._taskBaseOne1[i].visible=!1;for(i=0;i<t.length;i++){var n=t[i],s=this._taskBaseOne[i],o=this._taskBaseOne1[i];if(s){o.dataSource=s.dataSource=[n[0],1,0,null],o._numTxt.text=s._numTxt.text=""+n[1],o.visible=s.visible=!0,e.push(s);var a=c.bag.BagModel.instance.getItemCountById(n[0]);p.DaZhaoModel.instance.getIsEquiped(n[0])&&(a+=1);var r="#ff7462";a<n[1]?this._isCilao.push(n[0]):r="#ffffff",s.setNum(a+"/"+n[1],r),o.setNum(a+"/"+n[1],r),3===i&&(o._numTxt.visible=!1,this._Panel.additionalCaiLiaoItemBox.visible=!0,this._Panel.additionalCaiLiaoNumText.text=o._numTxt.text,this._Panel.additionalCaiLiaoNumText.color=o._numTxt.color,this._Panel.maskImg.y=-24,this._Panel.maskImg.height=222)}}var l=80*e.length+10*(e.length-1),h=(this._Panel.caiLiaoItemBox.width-l)/2;for(i=0;i<e.length;i++)(n=e[i]).x=h,h+=90},s.prototype.addTipsBtnHandler=function(){WindowManager.instance.open(93)},s.prototype.daZhaoOneKey1BtnHandler=function(){if(this._buWeiInfo){if(1==this._isManJie)return void i.instance.addNotice("已满阶",!0);if(2==this._isManJie)return void i.instance.addNotice("已达最大星级",!0);if(3==this._isManJie)return void(1==p.DaZhaoModel.instance.sClassNow||3==p.DaZhaoModel.instance.sClassNow?i.instance.addNotice("9阶一星及以上戒指才能升星",!0):i.instance.addNotice("9阶一星及以上玉佩才能升星",!0));if(0==this._isCilao.length)return void Channel.instance.publish(2098452,[this._datesCfg[0],[],1]);for(var t=0;t<this._isCilao.length;t++)if(this._isCilao[t])return void i.instance.addNotice("道具不足",!0);Channel.instance.publish(2098452,[this._datesCfg[0],[],1])}else{var e=1==p.DaZhaoModel.instance.sClassNow||2==p.DaZhaoModel.instance.sClassNow?"升阶":"升星";1==p.DaZhaoModel.instance.sClassNow||3==p.DaZhaoModel.instance.sClassNow?i.instance.addNotice("穿戴戒指后才能"+e,!0):i.instance.addNotice("穿戴玉佩后才能"+e,!0)}},s.prototype.close=function(){l.thisStop(this._tenBtnBtnClip)},s.prototype.destroy=function(){this._tenBtnBtnClip&&(this._tenBtnBtnClip.removeSelf(),this._tenBtnBtnClip.destroy(),this._tenBtnBtnClip=null)},n=s,p.DaZhaoPanelJieZiClass=n}(modules=modules||{}),function(t){var a,r,e,l,i;function n(){return r.call(this)||this}a=t.da_zhao||(t.da_zhao={}),e=t.bag.BagItem,l=t.player.PlayerModel,r=e,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),this.nameVisible=!1,this.needTip=!0},n.prototype.setDataSource=function(t){var e=[t[0],t[1],0,t[3]];r.prototype.setDataSource.call(this,e),this._nameTxt.visible=!1,this.upImgVisible=a.DaZhaoModel.instance.getChaoYue(t);var i=this._itemCfg[4],n=this._itemCfg[3],s=l.instance.level,o=l.instance.eraLevel;this.maskImg.visible=s<i||o<n},n.prototype.clickHandler=function(){if(this.needTip){if(null==this._itemData)return;t.bag.BagUtil.openBagItemTip(this._itemData)}},n.prototype.destroy=function(){r.prototype.destroy.call(this,!0)},i=n,a.DaZhaoRewardItem=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.da_zhao||(t.da_zhao={}),n=t.bag.BagItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!1,this.needTip=!0},o.prototype.setDataSource=function(t){if(i.prototype.setDataSource.call(this,t[1]),2==t[0]){var e=new Laya.Image;e.skin="common/txt_commmon_gl.png",this.addChild(e),e.visible=!0,this.upImgVisible=!1}},o.prototype.clickHandler=function(){if(this.needTip){if(null==this._itemData)return;t.bag.BagUtil.openBagItemTip(this._itemData)}},o.prototype.destroy=function(){i.prototype.destroy.call(this,!0)},s=o,e.DaZhaoRewardItem1=s}(modules=modules||{}),function(e){var s,i,n,o,t;function a(){var t=i.call(this)||this;return t._eraCondition=0,t}s=e.da_zhao||(e.da_zhao={}),n=e.notice.SystemNoticeManager,o=e.config.BornCfg,i=ui.DaZhaoXiaoLeiItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.dataTextHTML,"#3a5385","SimHei",22,"center")},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("COMPOSE_REPLY",this,this.setRpLay),this.onAutoGlobalEvt("RESOLVE_REPLY",this,this.setRpLay),this.onAutoGlobalEvt("DA_ZHAO_BAG_UPDATE",this,this.setRpBagUpdate),this.onAutoGlobalEvt("DA_ZHAO_BAG_UPDATE_FENGJIE",this,this.setKeFenJie)},a.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.redDot.visible=!1,this.gray=!1,t){if(this._speciesClass=t[0],this._datesCfg=t[1][0],1==this._speciesClass){this._tClass=this._datesCfg[3][0],this._sClass=this._datesCfg[4][0];var e=this._datesCfg[4][1];this.dataTextHTML.innerHTML=""+e,this.setRp()}else 2==this._speciesClass&&(this._tClass=this._datesCfg[1][0],this._sClass=this._datesCfg[3][0],this.setKeFenJieNum());this.isOpen(),this.setTheSelected()}},a.prototype.isOpen=function(){var t=this._datesCfg[9];this._eraCondition=t,e.born.BornModel.instance.lv<t&&0!=t?(this._selectEnable=!1,1===this._speciesClass&&(this.gray=!0)):(this._selectEnable=!0,1===this._speciesClass&&(this.gray=!1))},a.prototype.setKeFenJieNum=function(t){if(void 0===t&&(t=!1),this._datesCfg&&2==this._speciesClass){var e=this._datesCfg[3][1];if(t){var i=s.DaZhaoModel.instance._RpByTclassAndClassFenJie[this._tClass][this._sClass];this.dataTextHTML.innerHTML=0<i?e+"<span style='color:#168a17'>("+i+")</span>":""+e}else{var n=s.DaZhaoModel.instance.getAllResolveItem(this._tClass,this._sClass);0<n.length?this.dataTextHTML.innerHTML=e+"<span style='color:#168a17'>("+n.length+")</span>":this.dataTextHTML.innerHTML=""+e}}},a.prototype.setRpLay=function(){},a.prototype.setRp=function(){if(1==this._speciesClass){var t=s.DaZhaoModel.instance.getSlassIsRP(this._tClass,this._sClass);this.redDot.visible=t}},a.prototype.setRpBagUpdate=function(){if(this.redDot.visible=!1,1==this._speciesClass){var t=s.DaZhaoModel.instance._RpByTclassAndClass[this._tClass][this._sClass];this.redDot.visible=t}},a.prototype.setKeFenJie=function(){this.setKeFenJieNum(!0)},Object.defineProperty(a.prototype,"selectEnable",{get:function(){if(!this._selectEnable){var t=o.instance.getCfgByLv(this._eraCondition)[1];n.instance.addNotice(t+"开启",!0)}return this._selectEnable&&!this.selected},enumerable:!0,configurable:!0}),a.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.setTheSelected(),s.DaZhaoModel.instance.sClassNow=this._sClass,GlobalData.dispatcher.event("DA_ZHAO_CHANGE_UI")},a.prototype.setTheSelected=function(){this.btn.selected=!this.selected},t=a,s.DaZhaoXiaoLeiItem=t}(modules=modules||{}),function(t){var e,l,h,i;function c(){this._killNumber=[0,0],this._grade=[1,1],this._receivedTimes=[0,0]}e=t.dailyDemon||(t.dailyDemon={}),l=t.config.DailyDemonCfg,h=t.redPoint.RedPointCtrl,Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.saveData=function(t){this._killNumber=[t[0],t[1]],this._grade=[t[2]+1,t[3]+1],this._receivedTimes=[t[2],t[3]],this._maxReceivedTimes=[t[4],t[5]],this._bornLv=t[6],this.checkRP(),GlobalData.dispatcher.event("DAILY_DEMON_UPDATE")},Object.defineProperty(c.prototype,"bornLv",{get:function(){return this._bornLv},enumerable:!0,configurable:!0}),c.prototype.checkRP=function(){var t=this._bornLv,e=this._killNumber[0],i=this._grade[0],n=l.instance.getLittleCfgByEraLvAndGrade(t,i),s=c.instance.receivedTimes[0],o=c.instance.maxReceivedTimes[0],a=c.instance.receivedTimes[1],r=c.instance.maxReceivedTimes[1];s<o&&n[3]<=e?h.instance.setRPProperty("dailyDemonRP",!0):a<r&&(e=this._killNumber[1],i=this._grade[1],(n=l.instance.getBossCfgByEraLvAndGrade(t,i))[3]<=e)?h.instance.setRPProperty("dailyDemonRP",!0):h.instance.setRPProperty("dailyDemonRP",!1)},Object.defineProperty(c.prototype,"killNumber",{get:function(){return this._killNumber},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"grade",{get:function(){return this._grade},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"receivedTimes",{get:function(){return this._receivedTimes},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"maxReceivedTimes",{get:function(){return this._maxReceivedTimes},enumerable:!0,configurable:!0}),i=c,e.DailyDemonModel=i}(modules=modules||{}),function(d){var m,e,i,t,f,n,g,y,s,_,o,v,a;function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._coinNum=0,t}m=d.dailyDungeon||(d.dailyDungeon={}),i=d.dungeon.DungeonUtil,t=ui.DailyDungeonItemUI,f=d.dungeon.DungeonModel,n=d.dungeon.DungeonCtrl,g=d.common.CustomClip,y=d.funcOpen.FuncOpenModel,s=d.notice.SystemNoticeManager,_=d.config.ShilianCfg,o=d.bag.BagModel,v=d.config.PrivilegeCfg,e=t,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._baseItems=this.destroyElement(this._baseItems),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this._strs=["简单","普通","困难","噩梦","炼狱","深渊","虚空"],this._numStrs=["零","一","二","三","四","五","六","七","八","九","十"],this._btnClip=g.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,0,0,.8),this._funcIsOpen=!1,this._baseItems=[this.item1,this.item2,this.item3,this.item4]},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_TIMES_UPDATE",this,this.showUI),this.onAutoGlobalEvt("DUNGEON_TIMES_UPDATE",this,this.timesUpdate),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funcOpenUpdate),this.onAutoClick(this.coinAddBtn,this,this.addHandler),this.onAutoClick(this.coinChallengeBtn,this,this.challengeHandler),this.onAutoClick(this.petChallengeBtn,this,this.challengeHandler),this.onAutoClick(this.cleanBtn,this,this.cleanHandler),this.onAutoClick(this.lookBtn,this,this.lookHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler)},r.prototype.close=function(){e.prototype.close.call(this),g.thisStop(this._btnClip)},r.prototype.timesUpdate=function(){if(this._mapId&&f.instance.timesTable){var t=f.instance.timesTable[this._mapId];if(t){var e,i=t[6],n=t[5],s=t[8],o=t[7],a=t[10];if(this.petChallengeBtn.gray=this.coinChallengeBtn.gray=!1,this.coinOpenConditionImg.visible=this.petOpenConditionImg.visible=!1,this.coinOpenConditionText.visible=this.petOpenConditionText.visible=!1,this.petChallengeBtn.visible=this.coinChallengeBtn.visible=!0,0<i)if(this._state=1,this.coinXiaoHaoImg.visible=this.coinXiaoHaoText.visible=!1,this.petXiaoHaoImg.visible=this.petXiaoHaoText.visible=!1,this.coinChallengeBtn.label=this.petChallengeBtn.label="挑战",this.coinTimesTxt.text=this.petTimesTxt.text="今日挑战次数:"+i+"/"+n,0<t[6]&&this._funcIsOpen)g.thisPlay(this._btnClip),this.coinTimesTxt.visible=this.petTimesTxt.visible=!0,this.coinOpenConditionText.visible=this.petOpenConditionText.visible=!1,this.coinOpenConditionImg.visible=this.petOpenConditionImg.visible=!1;else{g.thisStop(this._btnClip),this.coinTimesTxt.visible=this.petTimesTxt.visible=!1,this.coinOpenConditionText.visible=this.petOpenConditionText.visible=!0,this.coinOpenConditionImg.visible=this.petOpenConditionImg.visible=!0;var r=y.instance.getFuncOpenTipById(this._openId);this.coinOpenConditionText.text=this.petOpenConditionText.text=""+r,this.coinOpenConditionImg.width=this.coinOpenConditionText.textWidth+60,this.petOpenConditionImg.width=this.petOpenConditionText.textWidth+60,this.coinOpenConditionImg.x=this.coinBox.width-this.coinOpenConditionImg.width+10,this.petOpenConditionImg.x=this.petBox.width-this.petOpenConditionImg.width+10,this.petChallengeBtn.visible=this.coinChallengeBtn.visible=this._funcIsOpen}else if(this._state=2,this.coinXiaoHaoImg.visible=this.coinXiaoHaoText.visible=!0,this.petXiaoHaoImg.visible=this.petXiaoHaoText.visible=!0,this._coinNum=m.DailyDungeonModel.instance.getNum(this._mapId,a,o)[0],this.coinXiaoHaoText.text=this.petXiaoHaoText.text=""+this._coinNum,this.coinChallengeBtn.label=this.petChallengeBtn.label="扫荡",this.coinTimesTxt.text=this.petTimesTxt.text="今日扫荡次数:"+s+"/"+o,0<t[8]&&this._funcIsOpen)this._btnClip.visible=!0,this._btnClip.play();else{this._btnClip.visible=!1,this._btnClip.stop();var l=61,h="";2051===this._mapId?(l=61,h="金币副本 ："):2061===this._mapId?(l=62,h="真气副本 ："):2081===this._mapId?(l=63,h="灵宠副本 ："):2071===this._mapId?(l=64,h="仙器副本 ："):2301===this._mapId?(l=74,h="神兵副本 ："):2311===this._mapId?(l=75,h="仙翼副本 ："):2321===this._mapId?(l=76,h="时装副本 ："):2331===this._mapId?(l=77,h="天珠副本 ："):2341===this._mapId&&(l=78,h="洗练副本 ：");var c=v.instance.getCopyCiShuByLevelAndType(d.vip.VipModel.instance.vipLevel,l);console.log(""+h,c),c?(this.coinTimesTxt.text=this.petTimesTxt.text="svip"+c[0]+"增加扫荡次数:"+c[1],this.coinTimesTxt.visible=this.petTimesTxt.visible=!0,this.petChallengeBtn.gray=this.coinChallengeBtn.gray=!0):(this.coinTimesTxt.visible=this.petTimesTxt.visible=!0,this.petChallengeBtn.gray=this.coinChallengeBtn.gray=!0,this.coinTimesTxt.text=this.petTimesTxt.text="今日扫荡次数:"+s+"/"+o)}if(this.degreeTxt.text=this._strs[t[1]-1]+"·"+this._numStrs[t[4]]+"星",this.degreeTxt.color=CommonUtil.getColorByQuality(t[1]),this.coinTxt.text=Math.ceil(t[3])+"",2081===this._mapId?e=_.instance.getCfgByLv(t[1])[3]:2071===this._mapId?e=_.instance.getCfgByLv(t[1])[2]:2301===this._mapId?e=_.instance.getCfgByLv(t[1])[4]:2311===this._mapId?e=_.instance.getCfgByLv(t[1])[5]:2321===this._mapId?e=_.instance.getCfgByLv(t[1])[6]:2331===this._mapId?e=_.instance.getCfgByLv(t[1])[7]:2341===this._mapId&&(e=_.instance.getCfgByLv(t[1])[8]),e)for(var p=0,u=e.length;p<u;p++)this._baseItems[p].visible=!0,this._baseItems[p].dataSource=[e[p][0],e[p][1],0,null];for(p=e?e.length:0,u=this._baseItems.length;p<u;p++)this._baseItems[p].visible=!1}}},r.prototype.funcOpenUpdate=function(){this._funcIsOpen=y.instance.getFuncNeedShow(this._funcId)},r.prototype.setData=function(t){e.prototype.setData.call(this,t),this._data&&(this._mapId=this._data[0],this._openId=this._data[1],this.showUI())},r.prototype.showUI=function(){var t=this._mapId;switch(this.bgImg.skin="assets/others/daily_dungeon/"+t+".png",2051===t||2061===t?(this.coinBox.visible=!0,this.petBox.visible=!1,this.coinImg.skin=2051===t?"common/icon_tongyong_1.png":"common/icon_tongyong_10.png",this.addChild(this._btnClip),this._btnClip.pos(this.coinChallengeBtn.x-6,this.coinChallengeBtn.y-8,!0)):(this.coinBox.visible=!1,this.petBox.visible=!0,this.addChild(this._btnClip),this._btnClip.pos(this.petChallengeBtn.x-6,this.petChallengeBtn.y-8,!0)),this.removeGuideSpr(48,this.coinChallengeBtn),this.removeGuideSpr(49,this.coinChallengeBtn),this.removeGuideSpr(51,this.petChallengeBtn),this.removeGuideSpr(50,this.petChallengeBtn),t){case 2051:this._type=61,this._funcId=22,this.regGuideSpr(48,this.coinChallengeBtn);break;case 2061:this._type=62,this._funcId=23,this.regGuideSpr(49,this.coinChallengeBtn);break;case 2081:this._type=63,this._funcId=24,this.regGuideSpr(51,this.petChallengeBtn);break;case 2071:this._type=64,this._funcId=25,this.regGuideSpr(50,this.petChallengeBtn);break;case 2301:this._type=74,this._funcId=219;break;case 2311:this._type=75,this._funcId=220;break;case 2321:this._type=76,this._funcId=221;break;case 2331:this._type=77,this._funcId=222;break;case 2341:this._type=78,this._funcId=223}this._state=1,this.funcOpenUpdate(),this.timesUpdate()},r.prototype.addHandler=function(){var t=0;switch(this._mapId){case 2051:t=20730005;break;case 2061:t=20730006;break;case 2081:t=20730008;break;case 2071:t=20730007}if(0<o.instance.getItemCountById(t)){var e=o.instance.getItemsById(t);e?d.bag.BagUtil.openBagItemTip(e[0]):WindowManager.instance.openDialog(59,this._type)}else WindowManager.instance.openDialog(59,this._type)},r.prototype.challengeHandler=function(){if(1==this._state)if(2051===this._mapId||2061===this._mapId){if(this.coinChallengeBtn.gray)return;i.checkUseTicketBySceneId(this._mapId)||(this._funcIsOpen?n.instance.reqEnterScene(this._mapId):s.instance.addNotice(y.instance.getFuncOpenTipById(this._funcId),!0))}else{if(this.petChallengeBtn.gray)return;if(!f.instance.timesTable)return;var t=f.instance.timesTable[this._mapId];i.checkUseTicketBySceneId(this._mapId)||(this._funcIsOpen?n.instance.reqEnterScene(this._mapId,t[1]):s.instance.addNotice(y.instance.getFuncOpenTipById(this._funcId),!0))}else{if(2051===this._mapId||2061===this._mapId){if(this.coinChallengeBtn.gray)return}else if(this.petChallengeBtn.gray)return;this.cleanHandler()}},r.prototype.cleanHandler=function(){f.instance.timesTable&&(this._funcIsOpen?d.player.PlayerModel.instance.ingot>=this._coinNum?n.instance.sweepCopy(this._mapId):CommonUtil.goldNotEnoughAlert():s.instance.addNotice(y.instance.getFuncOpenTipById(this._funcId),!0))},r.prototype.lookHandler=function(){if(f.instance.timesTable){var t=f.instance.timesTable[this._mapId];t&&WindowManager.instance.openDialog(58,t)}},r.prototype.helpHandler=function(){2051===this._mapId?CommonUtil.alertHelp(20008):2061===this._mapId?CommonUtil.alertHelp(20009):2081===this._mapId?CommonUtil.alertHelp(20011):2071===this._mapId?CommonUtil.alertHelp(20010):2301===this._mapId?CommonUtil.alertHelp(20057):2311===this._mapId?CommonUtil.alertHelp(20058):2321===this._mapId?CommonUtil.alertHelp(20059):2331===this._mapId?CommonUtil.alertHelp(20060):2341===this._mapId&&CommonUtil.alertHelp(20061)},a=r,m.DailyDungeonItem=a}(modules=modules||{}),function(h){var t,e;function i(){this._awardAee=new Array;var t=h.config.BlendCfg.instance.getCfgById(10311)[1],e=h.config.BlendCfg.instance.getCfgById(10312)[1],i=h.config.BlendCfg.instance.getCfgById(10313)[1],n=h.config.BlendCfg.instance.getCfgById(10314)[1],s=h.config.BlendCfg.instance.getCfgById(10319)[1],o=h.config.BlendCfg.instance.getCfgById(10320)[1],a=h.config.BlendCfg.instance.getCfgById(10321)[1],r=h.config.BlendCfg.instance.getCfgById(10322)[1],l=h.config.BlendCfg.instance.getCfgById(10323)[1];this._awardAee[2051]=t,this._awardAee[2061]=e,this._awardAee[2071]=n,this._awardAee[2081]=i,this._awardAee[2301]=s,this._awardAee[2311]=o,this._awardAee[2321]=a,this._awardAee[2331]=r,this._awardAee[2341]=l}t=h.dailyDungeon||(h.dailyDungeon={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getNum=function(t,e,i){var n=50,s=0,o=this._awardAee[t];if(o){n=(n=o[(e=e||0)+1])||o[o.length-1];for(var a=e+1;a<=i;a++){var r=o[a];s+=r=r||o[o.length-1]}return[n,s]}return[n,s]},i.prototype.getMapIdAndCoutByMoney=function(t,e,i,n){var s=this._awardAee[t];if(!s)return 0;for(var o=0,a=n-i+1,r=a+e,l=a;l<r;l++)o+=s[l];return o},Object.defineProperty(i.prototype,"extraAwards",{get:function(){var t=this._extraAwards?this._extraAwards.concat():[];return this._extraAwards=[],t},enumerable:!0,configurable:!0}),i.prototype.addExtraAwards=function(t,e){this._extraAwards||(this._extraAwards=[]),this._extraAwards[t]||(this._extraAwards[t]=[]),this._extraAwards[t]=this._extraAwards[t].concat(e)},e=i,t.DailyDungeonModel=e}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.day_drop_treasure||(t.day_drop_treasure={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},s=o,e.DayDropTreasureItem=s}(modules=modules||{}),function(t){var e,i;function n(){GlobalData.dispatcher.on("PANEL_CLOSE",this,this.panelCloseHandler)}e=t.dungeon||(t.dungeon={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.addResult=function(t){if(t){this._table||(this._table={});var e=t[2],i=(this._table[e]=t)[1];if(1===e)WindowManager.instance.open(50,i||[]),WindowManager.instance.close(49),WindowManager.instance.close(22),WindowManager.instance.close(88);else if(2===e){if(WindowManager.instance.isOpened(50))return;WindowManager.instance.open(49,i||[]),WindowManager.instance.close(22),WindowManager.instance.close(88)}else if(3===e){if(WindowManager.instance.isOpened(50))return;if(WindowManager.instance.isOpened(49))return;WindowManager.instance.open(258,t)}else if(18==e){if(WindowManager.instance.isOpened(50))return;if(WindowManager.instance.isOpened(49))return;WindowManager.instance.open(1496,t)}else if(4===e){if(WindowManager.instance.isOpened(50))return;if(WindowManager.instance.isOpened(49))return;if(WindowManager.instance.isOpened(1496))return;WindowManager.instance.open(88,[0,2])}else if(5===e){if(WindowManager.instance.isOpened(76))return;var n=t[1];WindowManager.instance.open(110,[n])}else 13===e&&WindowManager.instance.open(88,[t[3],3])}},n.prototype.panelCloseHandler=function(t){if(this._table)if(50===t){var e=void 0;if(e=this._table[2])return WindowManager.instance.open(49,e[1]||[]),void delete this._table[2];if(e=this._table[3])return WindowManager.instance.open(258,e),void delete this._table[3];if(e=this._table[18])return WindowManager.instance.open(1496,e),void delete this._table[18];if(e=this._table[4])return WindowManager.instance.open(88,[0,2]),void delete this._table[4]}else if(49===t){if(e=this._table[3])return WindowManager.instance.open(258,e),void delete this._table[3];if(e=this._table[18])return WindowManager.instance.open(1496,e),void delete this._table[18];if(e=this._table[4])return WindowManager.instance.open(88,[0,2]),void delete this._table[4]}else if(1496===t&&(e=this._table[4]))return WindowManager.instance.open(88,[0,2]),void delete this._table[4]},i=n,e.DungeonResultManager=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.dungeon||(t.dungeon={}),n.prototype.hasEnterTimes=function(t,e){void 0===e&&(e=null);var i=e&&e[t];return!!i&&!!i[2]},i=n,e.DungeonCopyMethod=i}(modules=modules||{}),function(s){var o,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}o=s.dungeon||(s.dungeon={}),t=o.DungeonCopyMethod,__extends(i,t),i.prototype.enterByBossId=function(t){if(!s.customData.CustomDataModel.instance.getCustomDataByKey(36)||!s.customData.CustomDataModel.instance.getCustomDataByKey(36)[0])return!1;var e=s.config.SceneBrahmaBossCfg.instance.getCfgByOcc(t),i=e[0],n=e[1];return!(!s.trahman_boss.TrahmanBossModel.instance.isChange()||1!=s.trahman_boss.TrahmanBossModel.instance.isOpenBoss(t)||(console.log("梵天boss 至尊特权 拉入场景:"+i+" "),o.DungeonCtrl.instance.reqEnterScene(i,n,[],!0),0))},i.prototype.hasEnterTimes=function(t,e){return void 0===e&&(e=null),s.trahman_boss.TrahmanBossModel.instance.isChange(!0)},i.prototype.isAbleShowReviveTip=function(){return!0},e=i,o.DungeonBrahmaMethod=e}(modules=modules||{}),function(s){var o,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}o=s.dungeon||(s.dungeon={}),t=o.DungeonCopyMethod,__extends(i,t),i.prototype.enterByBossId=function(t){if(!s.customData.CustomDataModel.instance.getCustomDataByKey(2)||!s.customData.CustomDataModel.instance.getCustomDataByKey(2)[0])return!1;var e=s.config.SceneCrossBossCfg.instance.getCfgByBossId(t),i=e[0],n=e[1];return s.halo.HaloModel.instance.isHalo()?Laya.timer.once(300,this,this.haloSpecialDeal,[i,n]):o.DungeonCtrl.instance.reqEnterScene(i,n,[],!0),!0},i.prototype.isAbleShowReviveTip=function(){return!0},i.prototype.haloSpecialDeal=function(t,e){var i=s.scene.SceneModel.instance.enterScene[0];2401!=i&&2402!=i&&2403!=i&&(console.log("至尊特权有主角光环时 三界boss 拉入场景:"+t+" "),o.DungeonCtrl.instance.reqEnterScene(t,e,[],!0))},e=i,o.DungeonCrossBossMethod=e}(modules=modules||{}),function(s){var o,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}o=s.dungeon||(s.dungeon={}),t=o.DungeonCopyMethod,__extends(i,t),i.prototype.enterByBossId=function(t){if(!s.customData.CustomDataModel.instance.getCustomDataByKey(0)||!s.customData.CustomDataModel.instance.getCustomDataByKey(0)[0])return!1;var e=s.config.SceneHomeBossCfg.instance.getCfgByBossId(t),i=e[0],n=e[1];return!(PlayerModel.instance.eraLevel<e[5][0]||0<e[13]&&s.vip.VipModel.instance.vipLevel<e[4]||(BossHomeModel.instance.getBossInfoByLayer(n-1),BossHomeModel.instance.setSelectTarget(t,!0),o.DungeonCtrl.instance.reqEnterScene(i,n,[],!0),0))},i.prototype.hasEnterTimes=function(){return!0},i.prototype.isAbleShowReviveTip=function(t){return!BossHomeModel.instance.checkPlayerLevelHeigh(t)},e=i,o.DungeonHomeBossMethod=e}(modules=modules||{}),function(s){var o,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}o=s.dungeon||(s.dungeon={}),t=o.DungeonCopyMethod,__extends(i,t),i.prototype.enterByBossId=function(t){if(!s.customData.CustomDataModel.instance.getCustomDataByKey(1)||!s.customData.CustomDataModel.instance.getCustomDataByKey(1)[0])return!1;var e=s.config.SceneMultiBossCfg.instance.getCfgByBossId(t),i=e[0],n=e[1];return o.DungeonCtrl.instance.reqEnterScene(i,n,[],!0),!0},i.prototype.isAbleShowReviveTip=function(){return!0},e=i,o.DungeonMutilBossMethod=e}(modules=modules||{}),function(i){var n,t,e;function s(){return null!==t&&t.apply(this,arguments)||this}n=i.dungeon||(i.dungeon={}),t=n.DungeonCopyMethod,__extends(s,t),s.prototype.enterByBossId=function(t){if(!i.customData.CustomDataModel.instance.getCustomDataByKey(42)||!i.customData.CustomDataModel.instance.getCustomDataByKey(42)[0])return!1;var e=i.config.SceneCopyMysticalCfg.instance.getCfgByBossId(t);return i.halo.HaloModel.instance.isForceEnter=!0,i.beast_boss.BeastBossModel.instance.shenShouChangeBossId=[0,0],n.DungeonCtrl.instance.reqEnterScene(e[0],e[1]),!0},s.prototype.hasEnterTimes=function(){return!!i.beast_boss.BeastBossModel.instance.remainTimes},s.prototype.isAbleShowReviveTip=function(){return!0},e=s,n.DungeonShenshowBossMethod=e}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(t){void 0===t&&(t=226);var e=i.call(this)||this;return e._posY=t,e}e=t.effect||(t.effect={}),n=t.common.CustomClip,s=Laya.Image,o=Laya.Event,i=BaseView,__extends(r,i),r.prototype.setPosY=function(t,e){void 0===e&&(e=0),this._posY=t,this._txtImg.pos(400+e,this._posY,!0),this._effect.pos(55+e,this._posY-211)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this.width=800,this.height=400,this.top=140,this.centerX=0,this.mouseEnabled=!1,this._effect=n.create(null,"assets/effect/success",8,!1),this.addChild(this._effect),this._effect.pos(55,15),this._effect.scale(2,2,!0),this._txtImg=new s,this._txtImg.anchorX=this._txtImg.anchorY=.5,this._txtImg.pos(400,this._posY,!0)},r.prototype.play=function(){this._tween&&this._tween.stop(),this._txtImg.removeSelf(),this._effect.on(o.COMPLETE,this,this.effectCompleteHandler),this.addChild(this._effect),this._effect.play(),Laya.timer.frameOnce(this._effect.durationFrame,this,this.delayHandler)},r.prototype.delayHandler=function(){this._txtImg.alpha=1,this.addChildAt(this._txtImg,0)},Object.defineProperty(r.prototype,"txtUrl",{set:function(t){this._txtImg.skin=t},enumerable:!0,configurable:!0}),r.prototype.effectCompleteHandler=function(){this._effect.off(o.COMPLETE,this,this.effectCompleteHandler),this._tween=TweenJS.create(this._txtImg).to({alpha:0},300).onComplete(this.txtDisapper.bind(this)).start()},r.prototype.txtDisapper=function(){this._txtImg.skin="",this._txtImg.removeSelf(),this.close()},r.prototype.close=function(){this._effect.stop(),this._effect.off(o.COMPLETE,this,this.effectCompleteHandler),this._tween&&(this._tween.stop(),this._tween=null),i.prototype.close.call(this)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._txtImg=this.destroyElement(this._txtImg),this._effect=this.destroyElement(this._effect),i.prototype.destroy.call(this,t)},a=r,e.SuccessEffect=a}(modules=modules||{}),function(t){var e,n,i,s;function o(){return n.call(this)||this}e=t.email||(t.email={}),i=ui.EmailItemUI,n=i,__extends(o,n),o.prototype.clickHandler=function(){n.prototype.clickHandler.call(this),this._dataSource&&WindowManager.instance.openDialog(21,this._dataSource[0])},o.prototype.setData=function(t){n.prototype.setData.call(this,t),this._dataSource=t,this.titleTxt1.text=t[1];var e=t[3]-GlobalData.serverTime;this.timeTxt.text="剩余"+Math.ceil(e/864e5)+"天";var i=t[5];t[4]?(this.awardImg.visible=!0,0===i?(this.isNewImg.visible=!0,this.readImg.skin="email/btn_youjian_1.png",this.awardImg.skin="email/zs_youjian_1.png"):1===i?(this.isNewImg.visible=!1,this.readImg.skin="email/btn_youjian_2.png",this.awardImg.skin="email/zs_youjian_1.png"):2===i&&(this.isNewImg.visible=!1,this.readImg.skin="email/btn_youjian_2.png",this.awardImg.skin="email/zs_youjian_2.png")):(this.awardImg.visible=!1,0===i?(this.isNewImg.visible=!0,this.readImg.skin="email/btn_youjian_1.png"):1===i&&(this.isNewImg.visible=!1,this.readImg.skin="email/btn_youjian_2.png"))},s=o,e.EmailItem=s}(modules=modules||{}),function(e){var i,n,t,s,a,o;function r(){return null!==n&&n.apply(this,arguments)||this}i=e.exercise||(e.exercise={}),t=e.common.CommonUtil,s=ui.ExerciseItemUI,a=e.config.ExerciseCfg,n=s,__extends(r,n),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),n.prototype.destroy.call(this,t)},r.prototype.initialize=function(){n.prototype.initialize.call(this),this._btnClip=t.creatEff(this.btn,"btn_light",15),this._btnClip.scale(.65,.65),this._btnClip.pos(-5,-5)},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler)},r.prototype.setData=function(t){var e=t,i=this._taskId=e[0];this._state=e[1];var n=e[2],s=a.instance.getTaskCfgById(i);this.taskTxt.text=s[2];var o=s[3];this.ratioTxt.text=n+"/"+o,this.ratioTxt.color=n<o?"#ff3e3e":"#00ad35",this.DHTxt.text="道行+"+s[4],0==this._state?(this.btn.skin="common/btn_tonyong_36.png",this.btn.label="前往",this.btn.labelColors="#465460",this.btn.pos(465,11,!0),this._btnClip.visible=!1,this._btnClip.stop()):1==this._state?(this.btn.skin="common/btn_tonyong_35.png",this.btn.label="领取",this.btn.labelColors="#9d5119",this.btn.pos(465,11,!0),this._btnClip.visible=!0,this._btnClip.play()):(this.btn.skin="common/txt_commmon_ylq.png",this.btn.label="",this.btn.pos(476,6,!0),this._btnClip.visible=!1,this._btnClip.stop())},r.prototype.btnHandler=function(){if(0==this._state){var t=a.instance.getTaskCfgById(this._taskId)[7];if(!t[0])return;WindowManager.instance.openByActionId(t[0])}else 1==this._state&&(e.common.ItemRenderNoticeManager.instance.index=this.index,i.ExerciseCrtl.instance.getLiLianTaskAward(this._taskId))},o=r,i.ExerciseItem=o}(modules=modules||{}),function(t){var r,e,l,i,c,n,s,o,h,a;function p(){return null!==e&&e.apply(this,arguments)||this}r=t.faction||(t.faction={}),l=t.common.CommonUtil,i=ui.BaozangItemUI,c=t.config.FactionBoxCfg,n=t.common.CustomList,s=t.bag.BaseItem,o=t.notice.SystemNoticeManager,h=t.config.BlendCfg,e=i,__extends(p,e),p.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=2,this._list.x=247,this._list.y=60,this._list.width=460,this._list.height=100,this._list.hCount=1,this._list.itemRender=s,this._list.spaceY=5,this._list.scale(.9,.9),this.addChild(this._list),this._resNames={},this._resNames[0]="",this._cfgFields={},this._cfgFields[0]=1,this._cfgFields[1]=2,this._cfgFields[2]=3,this._cfgFields[3]=4,this._cfgFields[4]=5,this._time=0},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),Laya.timer.loop(1e3,this,this.loopHandler)},p.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},p.prototype.setData=function(t){var e=t[0];this._type=t[1];for(var i=0,n=this._childs;i<n.length;i++)n[i].visible=!0;this._id=e[0],this._state=e[5];var s=c.instance.getCfgBylv(e[4]),o=e[2];this.boxNameImg=o;for(var a=s?s[this._cfgFields[o]]:[],r=[],l=0,h=a.length;l<h;l++)r.push([a[l][0],a[l][1],0,null]);this.btn.visible=!0,this.helpManTxt.visible=this.propBox.visible=this.helpedTxt.visible=!1,this._eff&&(this._eff.visible=!1),this._list.datas=r,0==this._type?this.list=e:1==this._type?this.mine=e:2==this._type?this.helpList=e:3==this._type&&(this.cantHelp=e),this.loopHandler()},Object.defineProperty(p.prototype,"boxNameImg",{set:function(t){0===t?this.typeImg.skin="faction/txt_xm_shbz.png":1===t?this.typeImg.skin="faction/txt_xm_hmbz.png":2===t?this.typeImg.skin="faction/txt_xm_tgbz.png":3===t?this.typeImg.skin="faction/txt_xm_ktbz.png":4===t&&(this.typeImg.skin="faction/txt_xm_sxbz.png")},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"list",{set:function(t){this.headBox.visible=!1;var e=l.getTimeTypeAndTime(t[3]);if(this.tipTxt.text="打开需要"+e,this.btn.skin="common/btn_tongyong_24.png",this.btn.labelColors="#465460",0<r.FactionModel.instance.boxInfo[1])this.btn.label="免费挖掘",this.propBox.visible=!1;else{this.btn.label="",this.propBox.visible=!0;var i=t[2],n=h.instance.getCfgById(36019)[1],s=n[2*i],o=n[2*i+1],a=l.getPropCountById(s);this.propImg.skin=l.getIconById(s,!0),this.propTxt.text=""+o,this.propTxt.color=o<=a?"#2d1a1a":"#ff3e3e",this._goldEnough=o<=a}},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"mine",{set:function(t){this.headBox.visible=!1,this._time=t[3],3==this._state?(this.btn.skin="common/btn_tongyong_23.png",this.btn.label="加速",this.btn.labelColors="#9d5119",this.showHelpMan(t)):1==this._state?(this.btn.skin="common/btn_tongyong_24.png",this.btn.label="求助",this.btn.labelColors="#465460"):2==this._state?(this.btn.visible=!1,this.helpedTxt.visible=!0):4==this._state&&(this.btn.skin="common/btn_tongyong_23.png",this.btn.label="领取",this.btn.labelColors="#9d5119",this.showHelpMan(t),this.playEff())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"helpList",{set:function(t){this.iconImg.visible=!1;var e=t[6],i=t[9],n=t[10];this.headIcon.setInfo(i,e,n),this.nameTxt.text=""+t[7],this._time=t[3],this.btn.gray=!1,3==this._state?(this.btn.skin="common/btn_tongyong_23.png",this.btn.label="加速",this.btn.labelColors="#9d5119"):2==this._state?(this.btn.skin="common/btn_tongyong_24.png",this.btn.label="帮助",this.btn.labelColors="#465460"):4==this._state&&(this.btn.skin="common/btn_tongyong_23.png",this.btn.label="领取",this.btn.labelColors="#9d5119",this.playEff())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"cantHelp",{set:function(t){this.iconImg.visible=!1;var e=t[6],i=t[9],n=t[10];this.headIcon.setInfo(i,e,n),this.nameTxt.text=""+t[7],this._time=t[3],this.btn.gray=!0,this.btn.skin="common/btn_tongyong_24.png",this.btn.label="帮助",this.btn.labelColors="#465460"},enumerable:!0,configurable:!0}),p.prototype.showHelpMan=function(t){this.helpManTxt.text="协助者:"+t[7],this.helpManTxt.visible=!0},p.prototype.playEff=function(){this._eff||(this._eff=l.creatEff(this.btn,"btn_light",15),this._eff.pos(-6,-8,!0),this._eff.scale(.8,.8)),this._eff.play(),this._eff.visible=!0},p.prototype.loopHandler=function(){if(0!=this._state){var t=l.timeStampToHHMMSS(this._time);3==this._state?(this.tipTxt.text=t+"后可领奖",this.tipTxt.color="#168a17"):1==this._state?(this.tipTxt.text=t+"后宝藏消失",this.tipTxt.color="#ff3e3e"):4==this._state?(this.tipTxt.text="可领取",this.tipTxt.color="#168a17"):2==this._state&&(this.tipTxt.text=t+"后宝藏消失",this.tipTxt.color="#ff3e3e")}else this.tipTxt.color="#ffec7c"},p.prototype.btnHandler=function(){if(3!=this._state){if(0==this._type)0==this._goldEnough?l.goldNotEnoughAlert():r.FactionCtrl.instance.openBox([this._id]);else if(1==this._type)1==this._state?r.FactionCtrl.instance.askAssist([this._id]):4==this._state&&r.FactionCtrl.instance.getBoxAward([this._id]);else if(2==this._type)2==this._state?r.FactionCtrl.instance.assistOpenBox([this._id]):4==this._state&&r.FactionCtrl.instance.getBoxAward([this._id]);else if(3==this._type)if(4==this._state)l.noticeError(36035);else{var t=r.FactionModel.instance.ableHelpNum;o.instance.addNotice("最多可同时协助开启"+t+"个宝藏",!0)}}else WindowManager.instance.open(299,this._id)},p.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this,t)},a=p,r.BaozangItem=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.faction||(t.faction={}),n=ui.FactionAskItemUI,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.passBtn,this,this.btnHandler,[1]),this.onAutoClick(this.refuseBtn,this,this.btnHandler,[0])},o.prototype.setData=function(t){var e=t[5],i=t[6];this.vipShowItem.setSVIPandVIP(i,e,t[7]),this.nameTxt.text=t[1];var n=CommonUtil.bigNumToString(t[3]);this.fightTxt.text=n,this.lvTxt.text=""+t[2],this._agendId=t[0]},o.prototype.btnHandler=function(t){e.FactionCtrl.instance.examine([this._agendId,t])},s=o,e.FactionAskItem=s}(modules=modules||{}),function(o){var a,t,e,r,i;function n(){return null!==t&&t.apply(this,arguments)||this}a=o.faction||(o.faction={}),e=ui.FactionCopyPlanItemUI,r=o.config.SceneCopyFactionCfg,t=e,__extends(n,t),n.prototype.setData=function(t){var e=r.instance.getCfgByIndex(t);if(!e)throw new Error("scene_copy_faction配置不存在 index--\x3e"+t);var i=e[1];if(!o.config.MonsterCfg.instance.getMonsterById(i))throw new Error("没有bossid faction_copy_plan_item ->"+i);var n=o.config.MonsterResCfg.instance.getMonsterName(i);this.nameTxt.text=n,this.rankTxt.text=t.toString();var s=a.FactionModel.instance.bossIndex;this.img.visible=t<s,this.nameTxt.color=t<s?"#ff3e3e":"#344c6f"},i=n,a.FactionCopyPlanItem=i}(modules=modules||{}),function(a){var r,t,e,l,i;function n(){return null!==t&&t.apply(this,arguments)||this}r=a.faction||(a.faction={}),e=ui.FactionFuncEnterItemUI,l=a.config.BlendCfg,t=e,__extends(n,t),n.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAOZANG_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FACTION_COPY_INFO",this,this.updateView),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this,this.updateView)},n.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)704==t[e]&&this.updateView()},n.prototype.setData=function(t){this._type=t,this.updateView()},n.prototype.updateView=function(){var t,e;if("baozang"==this._type){if(this.bgImg.skin="faction/image_xm_bzbg.jpg",!(i=r.FactionModel.instance.boxInfo))return;t="剩余挖掘次数："+(l.instance.getCfgById(36014)[1][0]-i[0]),e=["factionBaozangListRP","mineBaozangListRP","helpBaozangListRP"]}else if("zhuxian"==this._type){var i;if(this.bgImg.skin="faction/image_xm_zhuxbg.jpg",!(i=r.FactionModel.instance.copyInfo))return;var n=i[0];t="剩余诛仙时长 "+CommonUtil.msToMMSS(n),e=["factionCopyRP","factionHurtAwardRP"]}else if("zhengba"==this._type)if(this.bgImg.skin="faction/image_xmz_bg08.png",e=["unionWarRP","unionWarRP1","unionWarRP2","unionWarRP3"],a.funcOpen.FuncOpenModel.instance.getFuncIsOpen(704)){var s=a.union_war.UnionWarModel.instance.getWarCopyState();if(9===s||10===s)t="本周已结束";else if(3===s)t="积分赛正在进行中";else if(8===s)t="精英赛正在进行中";else if(2===s||4===s||5===s)t="今日"+(o=a.union_war.UnionWarModel.instance.getWarCopyTimeStr(13))[1]+"开启积分赛";else if(1===s){var o=a.union_war.UnionWarModel.instance.getWarCopyTimeStr(13);t="周"+a.union_war.UnionWarModel.instance.getStr(o[0])+o[1]+"开启积分赛"}else 6===s?(o=a.union_war.UnionWarModel.instance.getWarCopyTimeStr(14),t="周"+a.union_war.UnionWarModel.instance.getStr(o[0])+o[1]+"开启精英赛"):7===s&&(t="今日"+(o=a.union_war.UnionWarModel.instance.getWarCopyTimeStr(14))[1]+"开启精英赛")}else t=a.config.ActionOpenCfg.instance.getCfgById(704)[6][0][0];else null==this._type&&(this.bgImg.skin="faction/image_xm_jqqd.jpg",t="");this.txt.text=t,e?this.regAutoRP(this.rpImg,e):this.rpImg.visible=!1},n.prototype.clickHandler=function(){"baozang"==this._type?a.redPoint.RedPointCtrl.instance.getRPProperty("mineBaozangListRP")?WindowManager.instance.open(278):a.redPoint.RedPointCtrl.instance.getRPProperty("helpBaozangListRP")?WindowManager.instance.open(279):WindowManager.instance.open(277):"zhuxian"==this._type?WindowManager.instance.open(280):"zhengba"==this._type&&WindowManager.instance.open(1043)},i=n,r.FactionFuncEnterItem=i}(modules=modules||{}),function(t){var u,e,d,i,s,n;function o(){return null!==e&&e.apply(this,arguments)||this}u=t.faction||(t.faction={}),d=t.common.GlobalData,i=ui.FactionLeaderItemUI,s=t.rename.RenameModel,e=i,__extends(o,e),o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.requestBtn,this,this.requestBtnHandler),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc)},o.prototype.setData=function(t){if(this._info=t){this.fightMsz.visible=this.nameTxt.visible=this.stateTxt.visible=this.headIcon.visible=!0,this.requestBtn.visible=this.noImg.visible=!1;var e=t[9],i=t[10];this.vipShowItem.setSVIPandVIP(i,e,t[15]);var n=t[0];this.nameTxt.text=n;var s=t[3],o=t[11],a=t[12];if(this.headIcon.setInfo(o,s,a),this.fightMsz.value=t[4].toString(),t[8])this.stateTxt.text="在线",this.stateTxt.color="#50ff28";else{var r=t[6],l=d.serverTime-r,h=CommonUtil.getTimeTypeAndTime(l);this.stateTxt.text=h+"前",this.stateTxt.color="#c6c6c6"}}else{this.vipShowItem.vipBox.visible=this.fightMsz.visible=this.nameTxt.visible=this.stateTxt.visible=this.headIcon.visible=!1,this.noImg.visible=!0;var c=u.FactionModel.instance.post,p=3===c&&3===this._post||2===c;this.requestBtn.visible=!p}},Object.defineProperty(o.prototype,"post",{set:function(t){this._post=t,this.postBgImg.skin=2==t?"faction/image_xm_fmz.png":"faction/image_xm_hf.png"},enumerable:!0,configurable:!0}),o.prototype.requestBtnHandler=function(){1!=u.FactionModel.instance.post?2!=u.FactionModel.instance.post?u.FactionCtrl.instance.applyForPos(this._post):t.notice.SystemNoticeManager.instance.addNotice("你已是副盟主，无法申请其他职位",!0):t.notice.SystemNoticeManager.instance.addNotice("你已是盟主，无法申请其他职位",!0)},o.prototype.updateName=function(){if(this._info){var t=s.instance.updateNameReply;t&&t[0]===this._info[1]&&(this.nameTxt.text=t[1])}},o.prototype.updateOcc=function(){if(this._info){var t=s.instance.updateOccReply;if(t&&this._info[1]===t[0]){var e=t[1],i=this._info[11],n=this._info[12];this.headIcon.setInfo(i,e,n)}}},n=o,u.FactionLeaderItem=n}(modules=modules||{}),function(t){var n,s,e,i;function o(){return s.call(this)||this}n=t.faction||(t.faction={}),e=ui.FactionPostLimitsItemUI,s=e,__extends(o,s),o.prototype.initialize=function(){s.prototype.initialize.call(this),this._txts=[this.flagTxt_3,this.flagTxt_0,this.flagTxt_1,this.flagTxt_2]},o.prototype.setData=function(t){this.nameTxt.text=n.FactionUtil.limitShowNames[this.index];for(var e=0,i=t.length;e<i;e++)this._txts[e].text=t[e]?"√":"×",this._txts[e].color=t[e]?"#168a17":"#ff3e3e"},o.prototype.destroy=function(t){if(void 0===t&&(t=!0),this._txts){for(var e=0,i=this._txts;e<i.length;e++){var n=i[e];n.removeSelf(),n.destroy()}this._txts=null}s.prototype.destroy.call(this,t)},i=o,n.FactionPostLimitsItem=i}(modules=modules||{}),function(o){var a,t,r,e,i;function n(){return null!==t&&t.apply(this,arguments)||this}a=o.faction||(o.faction={}),r=o.common.CommonUtil,e=ui.PlayerRankingItemUI,t=e,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),r.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),this.headIcon.headImg.skin=this.headIcon.frameImg.skin="",this.lookBtn.visible=!1},n.prototype.setData=function(t){this._tpye=t[0],this._mingci=t[1],0==this._mingci?(this.rankImg.skin="common/zs_tongyong_8.png",this.rankMsz.value=""):1==this._mingci?(this.rankImg.skin="common/zs_tongyong_9.png",this.rankMsz.value=""):(this.rankImg.skin="common/dt_tongyong_15.png",this.rankMsz.value=""+this._mingci),this.vipShowItem.vipBox.visible=!1;var e=a.FactionModel.instance.getRanksByTypeAndMingCi(this._mingci);if(!e)return this.vipShowItem.vipBox.visible=this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!1,void(this.noTxt.visible=!0);this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!0,this.StatementHTML.visible=this.noTxt.visible=!1,this.playerName.text=e[0];var i=e[3],n=o.config.BlendCfg.instance.getCfgById(36004)[2][i];this.headIcon.frameImg.skin="assets/icon/ui/faction/"+n+".png",this.headIcon.frameImg.width=100,this.headIcon.frameImg.height=100;var s=r.bigNumToString(e[2]);this.valueTxt.text="仙盟战力:"+s},i=n,a.FactionRankListItem=i}(modules=modules||{}),function(t){var f,e,g,i,y,_,v,I,b,n;function s(){return null!==e&&e.apply(this,arguments)||this}f=t.faction||(t.faction={}),g=t.common.CommonUtil,i=ui.FactionSkillItemUI,y=t.config.SkillCfg,_=t.common.AttrUtil,v=t.config.AttrSkillCfg,I=t.config.SkillPureCfg,b=t.config.FactionSkillCfg,e=i,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("PLAYER_CONTRIBUTION",this,this.updateProp)},s.prototype.setData=function(t){this._skillId=t;var e=y.instance.getCfgById(t),i=I.instance.getCfgById(g.getSkillPureIdById(t)),n=t%100;this.nameTxt.text=i[1]+" Lv."+n,this.iconImg.skin="assets/icon/skill/"+i[6]+".png";var s,o=e[1],a=o[0],r=o[1]?o[1]:0,l=v.instance.getCfgById(a),h=l[1],c=l[2];s=r?c?_.formatFloatNum(r)+"%":""+r:"0",this.attrTxt.text=h+" "+s;var p=y.instance.getCfgById(t+1);if(p){this.nextLvBox.visible=!0;var u=p[1][1]-r;this.nextLvTxt.text=c?_.formatFloatNum(u)+"%":""+u;var d=b.instance.getCfgById(t),m=d[2];m<=f.FactionModel.instance.lv?(this.conditionTxt.visible=!1,this.propBox.visible=this.btn.visible=!0,this._needProp=d[1],this.updateProp()):(this.conditionTxt.visible=!0,this.propBox.visible=this.btn.visible=!1,this.conditionTxt.color="#ff3e3e",this.conditionTxt.text="仙盟达到Lv."+m+"方可继续升级",g.centerChainArr(this.width,[this.conditionTxt]))}else this.propBox.visible=this.btn.visible=this.nextLvBox.visible=!1,this.conditionTxt.visible=!0,this.conditionTxt.color="#168a17",this.conditionTxt.text="已满级",g.centerChainArr(this.width,[this.conditionTxt])},s.prototype.updateProp=function(){if(this._needProp){var t=this._needProp[0],e=this._needProp[1],i=PlayerModel.instance.contribution;this.propImg.skin=g.getIconById(t),this.propTxt.text=e.toString(),this.propTxt.color=e<=i?"#168a17":"#ff3e3e"}},s.prototype.btnHandler=function(){f.FactionCtrl.instance.promoteFactionSkill(this._skillId)},n=s,f.FactionSkillItem=n}(modules=modules||{}),function(t){var p,u,e,i,n,d,s;function o(){return null!==u&&u.apply(this,arguments)||this}p=t.faction||(t.faction={}),e=t.bag.BaseItem,i=t.common.CustomList,n=ui.FactionTaskItemUI,d=t.config.FactionBossAwardCfg,u=n,__extends(o,u),o.prototype.initialize=function(){u.prototype.initialize.call(this),this._btnClip=CommonUtil.creatEff(this.btn,"btn_light",15),this._btnClip.scale(.62,.62,!0),this._btnClip.pos(-2,-5),this._list=new i,this._list.scrollDir=2,this._list.x=275,this._list.y=14,this._list.width=210,this._list.height=100,this._list.vCount=1,this._list.itemRender=e,this._list.spaceY=5,this.addChild(this._list)},o.prototype.onEvt=function(){this.onAutoClick(this.btn,this,this.btnHandler),u.prototype.onEvt.call(this)},o.prototype.setData=function(t){u.prototype.setData.call(this,t),this._index=t[0];var e=t[1],i=p.FactionModel.instance.hurtLv,n=d.instance.getCfgBylv(i),s=n[1];this.txt.text=CommonUtil.bigNumToString(s[this._index]),this._btnClip.stop(),this._btnClip.visible=this.btn.visible=this.img.visible=!1,2==e?(this._btnClip.visible=this.btn.visible=!0,this._btnClip.play()):1==e?(this.img.visible=!0,this.img.skin="common/txt_commmon_wdc.png"):(this.img.visible=!0,this.img.skin="common/txt_commmon_ylq.png");for(var o=[],a=0,r=n[2][this._index];a<r.length;a++){var l=r[a],h=l[0],c=l[1];o.push([h,c,0,null])}this._list.datas=o},o.prototype.btnHandler=function(){p.FactionCtrl.instance.getHurtAward(this._index)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip&&(this._btnClip.destroy(),this._btnClip=null),this._list&&(this._list.destroy(),this._list=null),u.prototype.destroy.call(this,t)},s=o,p.FactionTaskItem=s}(modules=modules||{}),function(t){var e,i;function n(){}e=t.faction||(t.faction={}),n.limitShowNames=["解散仙盟","审批入盟申请","广播招人","设定入盟条件","修改公告","修改宣传语","踢出仙盟","任命副盟主","任命护法"],n.limitShowList=[0,1,2,3,4,5,6,7,8],n.post=[0,1,2,3],n.postNames=["成员","盟主","副盟主","护法"],n.boxName=["四海宝藏","蛮荒宝藏","太古宝藏","开天宝藏","圣墟宝藏"],n.shieldPanels=[277,278,279,280],n.shieldFuncs=[184,185,186,187,698,699,700],i=n,e.FactionUtil=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.faerie_demon||(t.faerie_demon={}),n=t.common.ProgressBarCtrl,s=game.GameCenter,i=ui.FaerieDemonCopyPlayerInfoItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,93)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._npc&&this._npc.property.on("hp",this,this.updateHP),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayers)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._proCtrl.value=this._proCtrl.maxValue=1,this.updatePlayers(),this.proCtrlImg.visible=this.proImg.visible=!1},a.prototype.updatePlayers=function(){if(this.rankText.text=""+e.FaerieDemonModel.instance.getInxScore(this._onder),this._dates){this._objId=this._dates[0];var t=this._dates[6];this.nameText.text=this._dates[2],this.headIcon.setInfo(this._dates[5],this._dates[3],this._dates[4]),this.tipsText.text="战"+CommonUtil.bigNumToString(this._dates[10],!0),this.isJingXiangImg.visible=!1,this.headIcon.isJingXinagImg.visible=1===this._dates[11],this.overImg.visible=0<t,1===t?this.overImg.skin="common/txt_commmon_sl.png":2===t&&(this.overImg.skin="common/txt_commmon_sb.png",this._proCtrl.maxValue=1,this._proCtrl.value=0),this.updateHP()}else console.log("仙魔对决场景内 玩家信息为null")},a.prototype.updateHP=function(){if(this._objId&&(this._npc=s.instance.getRole(this._objId),this._npc&&(this._isAdd||(this._isAdd=!0,this._npc.property.on("hp",this,this.updateHP)),this._npc.property))){var t=this._npc.property.get("hp");this._proCtrl.maxValue=t[1],this._proCtrl.value=t[0]}},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this._dates=t[1],this._onder=t[0],Laya.timer.callLater(this,this.updatePlayers)},a.prototype.destroy=function(){this._proCtrl&&(this._proCtrl.destroy(),this._proCtrl=null),i.prototype.destroy.call(this)},o=a,e.FaerieDemonCopyPlayerInfoItem=o}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return i.call(this)||this}t=e.faerie_demon||(e.faerie_demon={}),n=e.common.ProgressBarCtrl,s=game.GameCenter,i=ui.FaerieDemonCopyPlayerInfoItem1UI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,203)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._npc&&this._npc.property.on("hp",this,this.updateHP),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayers)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1},a.prototype.updatePlayers=function(){if(this._dates){this._objId=this._dates[0];var t=this._dates[6];this.nameText.text=this._dates[2],this.headIcon.setInfo(this._dates[5],this._dates[3],this._dates[4]),this.tipsText.text="战"+CommonUtil.bigNumToString(this._dates[10],!0),this.isJingXiangImg.visible=!1,this.headIcon.isJingXinagImg.visible=1===this._dates[11],2===t&&(this._proCtrl.maxValue=1,this._proCtrl.value=0),this.updateHP(),this._dates[9]===e.common_group.CommonGroupModel.instance.teamId?(this.bgImg.skin="faerie_demon/txtbg_xmdj_ld.png",this.bgImg.scaleX=-1,this.bgImg.x=306):(this.bgImg.skin="faerie_demon/txtbg_xmdj_hd.png",this.bgImg.scaleX=0,this.bgImg.x=0)}else console.log("仙魔对决场景内 玩家信息为null")},a.prototype.updateHP=function(){if(this._objId&&(this._npc=s.instance.getRole(this._objId),this._npc&&(this._isAdd||(this._isAdd=!0,console.log("监听飘血事件~~~~~~"),this._npc.property.on("hp",this,this.updateHP)),this._npc.property))){var t=this._npc.property.get("hp");this._proCtrl.maxValue=t[1],this._proCtrl.value=t[0]}},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1,this._dates=t[1],this._onder=t[0],this._proCtrl.value=this._proCtrl.maxValue=1,Laya.timer.callLater(this,this.updatePlayers)},a.prototype.destroy=function(){this._proCtrl&&(this._proCtrl.destroy(),this._proCtrl=null),i.prototype.destroy.call(this)},o=a,t.FaerieDemonCopyPlayerInfoItem1=o}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return i.call(this)||this}t=e.faerie_demon||(e.faerie_demon={}),n=e.common.ProgressBarCtrl,s=game.GameCenter,i=ui.FaerieDemonCopyPlayerInfoItem2UI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,203)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._npc&&this._npc.property.on("hp",this,this.updateHP),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayers)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1},a.prototype.updatePlayers=function(){if(this._dates){this._objId=this._dates[0];var t=this._dates[6];this.nameText.text=this._dates[2],this.headIcon.setInfo(this._dates[5],this._dates[3],this._dates[4]),this.tipsText.text="战"+CommonUtil.bigNumToString(this._dates[10],!0),this.isJingXiangImg.visible=!1,this.headIcon.isJingXinagImg.visible=1===this._dates[11],2===t&&(this._proCtrl.maxValue=1,this._proCtrl.value=0),this.updateHP(),this._dates[9]===e.common_group.CommonGroupModel.instance.teamId?(this.bgImg.skin="faerie_demon/txtbg_xmdj_ld.png",this.bgImg.scaleX=0,this.bgImg.x=0):(this.bgImg.skin="faerie_demon/txtbg_xmdj_hd.png",this.bgImg.scaleX=-1,this.bgImg.x=306)}else console.log("仙魔对决场景内 玩家信息为null")},a.prototype.updateHP=function(){if(this._objId&&(this._npc=s.instance.getRole(this._objId),this._npc&&(this._isAdd||(this._isAdd=!0,this._npc.property.on("hp",this,this.updateHP)),this._npc.property))){var t=this._npc.property.get("hp");this._proCtrl.maxValue=t[1],this._proCtrl.value=t[0]}},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1,this._dates=t[1],this._onder=t[0],this._proCtrl.value=this._proCtrl.maxValue=1,Laya.timer.callLater(this,this.updatePlayers)},a.prototype.destroy=function(){this._proCtrl&&(this._proCtrl.destroy(),this._proCtrl=null),i.prototype.destroy.call(this)},o=a,t.FaerieDemonCopyPlayerInfoItem2=o}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.faerie_demon||(t.faerie_demon={}),i=ui.FaerieDemonMatchingLeftItemUI,__extends(s,i),s.prototype.setData=function(t){i.prototype.setData.call(this,t),this._date=t,this._date&&(this._baseInfo=this._date[0],this._godDevil=this._date[1]),this.scoreText.text="?",this.updateUI()},s.prototype.updateUI=function(){if(this._date){this.tipsText.text="战"+CommonUtil.bigNumToString(this._baseInfo[5],!0),this.headIcon.setInfo(this._baseInfo[7],this._baseInfo[2],this._baseInfo[6]),this.scoreText.text=""+e.FaerieDemonModel.instance.getInxScore(this._godDevil[0]-1);var t=4===e.FaerieDemonModel.instance.enemyState;this.rankText.text=t?""+this._godDevil[0]:"?",this.headIcon.isJingXinagImg.visible=1===this._baseInfo[8],this.isJingXiangImg.visible=!1}else this.tipsText.text="???",this.rankText.text="?",this.isJingXiangImg.visible=!1},s.prototype.setHeadIcon=function(t,e,i){this.headIcon.setInfo(t,e,i)},n=s,e.FaerieDemonMatchingLeftItem=n}(modules=modules||{}),function(e){var t,i,n;function s(){return i.call(this)||this}t=e.faerie_demon||(e.faerie_demon={}),i=ui.FaerieDemonMatchingRightItemUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.parent.parent,"mousedown",this,this.itemDownHandler),this.onAutoEvt(this.parent.parent,"mouseup",this,this.itemUpHandler),this.onAutoEvt(this.parent.parent,"mousemove",this,this.itemMoveHandler)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._posY=this.inTheOrderBox.y,this._isMove=!1},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this._isMove=!1,this.inTheOrderBox.y=this._posY,this._date=t,this._date&&(this._baseInfo=this._date[0],this._godDevil=this._date[1]),this.scoreText.text="?",this.updateUI()},s.prototype.updateUI=function(){this._date?(this.tipsText.text="战"+CommonUtil.bigNumToString(this._baseInfo[5],!0),this.headIcon.setInfo(this._baseInfo[7],this._baseInfo[2],this._baseInfo[6]),this.rankText.text=""+this._godDevil[0],this.scoreText.text=""+t.FaerieDemonModel.instance.getInxScore(this._godDevil[0]-1),this.headIcon.isJingXinagImg.visible=1===this._baseInfo[8]):(this.tipsText.text="???",this.rankText.text="?"),this.isJingXiangImg.visible=!1},s.prototype.itemDownHandler=function(){this._time=Browser.now(),this._isMove=!1,3===e.common_group.CommonGroupModel.instance.state&&this.mouseX>=this.inTheOrderBox.x&&this.mouseX<=this.inTheOrderBox.x+this.inTheOrderBox.width&&this.mouseY>=this.inTheOrderBox.y&&this.mouseY<=this.inTheOrderBox.y+this.inTheOrderBox.height&&(this._isMove=!0,this._downPosY=this.mouseY,GlobalData.dispatcher.event("MATE_TEAM_ENEMY_EXREPLY_Eff"))},s.prototype.itemUpHandler=function(){if(this._time=Browser.now(),this._isMove){if(3===e.common_group.CommonGroupModel.instance.state){Laya.Point.TEMP.setTo(this.inTheOrderBox.x,this._posY);var t=this.inTheOrderBox.localToGlobal(Laya.Point.TEMP,!0);this.inTheOrderBox.y=this._posY,this._isMove=!1,GlobalData.dispatcher.event("CHANGE_ODLER",[this._godDevil,t])}}else this.inTheOrderBox.y=this._posY,this._isMove=!1},s.prototype.itemMoveHandler=function(){if(3===e.common_group.CommonGroupModel.instance.state)if(this._isMove&&100<Browser.now()-this._time){var t=this.mouseY-this._downPosY;this.inTheOrderBox.y=this._posY+t}else this.inTheOrderBox.y=this._posY},s.prototype.close=function(){i.prototype.close.call(this),this._isMove=!1},s.prototype.destroy=function(){this._date=this._baseInfo=this._godDevil=null,i.prototype.destroy.call(this)},n=s,t.FaerieDemonMatchingRightItem=n}(modules=modules||{}),function(i){var t,r,l,e;function h(){this.nextTime=0,this.allInxScore=0,this.enemyMembers=[],this.enemyState=0,this.enemyTeamId=0,this.enemyLeader=0,this.enemyLeaderName="",this.teamer1=new Array,this.teamer2=new Array,this.stage=0,this.stageTick=0,this.rankers=new Array,this.score=0,this.rank=0,this.joinGodDevilTasks=new Array,this.openDay=1,this.chuZhnWeiScoreByInx=new Array,this.scoreNum=0,this.winTimesNum=0;for(var t=i.config.BlendCfg.instance.getCfgById(84005)[1],e=0;e<t.length;e++)this.chuZhnWeiScoreByInx.push(t[e]),this.allInxScore+=t[e]}t=i.faerie_demon||(i.faerie_demon={}),r=i.redPoint.RedPointCtrl,l=i.funcOpen.FuncOpenModel,Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.getInxScore=function(t){return this.chuZhnWeiScoreByInx[t]?this.chuZhnWeiScoreByInx[t]:0},h.prototype.clearAllEnemyTeamDate1=function(){Laya.timer.clear(this,this.setAutomatic),this.clearAllEnemyTeamDate()},h.prototype.clearAllEnemyTeamDate=function(){this.enemyMembers=[],this.enemyState=0,this.enemyTeamId=0,this.enemyLeader=0,this.enemyLeaderName=""},h.prototype.clearAllCopyTeamDate=function(){this.teamer1.length=0,this.teamer2.length=0,this.stage=0},h.prototype.getGodDevilReply=function(t){t&&(this.times=t[0],this.joinGodDevilTasks=t[1],this.setRP(),this.laterAutomatic(),GlobalData.dispatcher.event("DRAW_GOD_DEVIL_REWARD_REPLY"))},h.prototype.setRP=function(){for(var t=!1,e=!1,i=0;i<h.instance.joinGodDevilTasks.length;i++){var n=h.instance.joinGodDevilTasks[i];if(n&&2===n[1]){t=l.instance.getFuncIsOpen(377);break}}if(h.instance.times){var s=h.instance.times[0],o=h.instance.times[4],a=s-h.instance.times[2]+o;e=CommonGroupUtil.isOpenTeamScene(38)&&0<a&&l.instance.getFuncIsOpen(377)}r.instance.setRPProperty("faerieDemonPKRP",t||e)},h.prototype.updateGodDevilCopyTimes=function(t){t&&(this.times=t[0],this.laterAutomatic(),GlobalData.dispatcher.event("DRAW_GOD_DEVIL_REWARD_REPLY"))},h.prototype.getGodDevilRankReply=function(t){t&&(this.rankers=t[0],this.score=t[1],this.rank=t[2],this.openDay=t[3],GlobalData.dispatcher.event("GET_GODDEVIL_RANK_REPLY"))},h.prototype.judgeGodDevilAward=function(t){t&&(this.scoreAdd=t[0])},h.prototype.updateGodDevilMap=function(t){t&&(this.teamer1=t[0],this.teamer2=t[1],t[2]!=this.stage&&0!=t[2]&&(this.stage=t[2]),this.stage=t[2],GlobalData.dispatcher.event("UPDATE_GOD_DEVIL_MAP"))},h.prototype.updateMateResult=function(t){if(this.clearAllEnemyTeamDate(),t){this.enemyLeaderName="";var e=t[0];this.enemyTeamId=e[1],this.enemyLeader=e[2],this.enemyState=e[3],this.enemyMembers=e[4];for(var i=0;i<this.enemyMembers.length;i++){var n=this.enemyMembers[i];if(n){var s=n[0],o=s[0],a=s[1];this.enemyLeader===o&&(this.enemyLeaderName=a)}}GlobalData.dispatcher.event("MATE_TEAM_ENEMY_EXREPLY")}},h.prototype.godDevilScoreWinReply=function(t){t&&(this.scoreNum=t[0],this.winTimesNum=t[1],GlobalData.dispatcher.event("GOD_DEVIL_SCORE_WIN_REPLY"))},h.prototype.isHaveNum=function(){return!h.instance.times||0<h.instance.times[0]-h.instance.times[2]},h.prototype.isHaveNum1=function(){return!h.instance.times||0<h.instance.times[1]-h.instance.times[3]},h.prototype.laterAutomatic=function(){Laya.timer.clear(this,this.setAutomatic),1===i.common_group.CommonGroupModel.instance.teamType&&(Laya.timer.once(500,this,this.setAutomatic),this.setAutomatic())},h.prototype.setAutomatic=function(){var t=i.common_group.CommonGroupModel.instance;t.isHomeowners&&(h.instance.isHaveNum()||h.instance.isHaveNum1())||(t.isAutomaticMatching=t.isAutomaticPlayer=!1),0!=t.teamId&&t.isAutomaticMatching&&(!t.isHomeowners||3==t.members.length||CommonUtil.whetherInCopy()||WindowManager.instance.isOpened(620)||1===t.teamType&&i.common_group.CommonGroupCtrl.instance.mateTeamerEx(t.teamType))},h.prototype.getPlayeringPlayerInfo=function(t,e){var i=null;return 1===t?i=h.instance.teamer1[e]:2===t&&(i=h.instance.teamer2[e]),i},h.prototype.kickTeamerEx=function(){var t=Handler.create(this,function(){i.common_group.CommonGroupCtrl.instance.kickTeamerEx(PlayerModel.instance.actorId)});CommonUtil.alert("提示","是否确定退出队伍?",[t],[])},e=h,t.FaerieDemonModel=e}(modules=modules||{}),function(t){var e,h,i,n;function s(){return h.call(this)||this}e=t.faerie_demon||(t.faerie_demon={}),i=ui.NineTopAwardItemUI,h=i,__extends(s,h),s.prototype.setData=function(t){h.prototype.setData.call(this,t);var e=t,i=e[1];if(0!==i.length){this.visible=!0;var n=e[0];if(n){1===n[0]&&1===n[1]?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===n[0]&&2===n[1]?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===n[0]&&3===n[1]?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.rankTxt.visible=!0,n[0]===n[1]?this.rankTxt.text="第"+n[0]+"名":this.rankTxt.text="第"+n[0]+"-"+n[1]+"名");for(var s=[this.item3,this.item2,this.item1,this.item0],o=0;o<s.length;o++)(r=s[o]).visible=!1;var a=[];for(o=0;o<i.length;o+=2){var r=i[o],l=i[o+1];a.push([r,l,0,null])}for(o=0;o<a.length;o++)r=a[o],(l=s[o])&&r&&(l.dataSource=r,l.visible=!0)}}else this.visible=!1},n=s,e.FaerieDemonRankAwardItem=n}(modules=modules||{}),function(t){var e,n,i,s;function o(){return n.call(this)||this}e=t.faerie_demon||(t.faerie_demon={}),i=ui.LadderRankItemUI,n=i,__extends(o,n),o.prototype.setData=function(t){n.prototype.setData.call(this,t);var e=t,i=this.index+1;1===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_7.png"):2===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_8.png"):3===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankClip.visible=!0,this.rankImg.skin="common/dt_tongyong_15.png",this.rankClip.value=""+i),e?(this.nameTxt.text=e[2],this.scoreTxt.text=""+e[5]):(this.nameTxt.text="虚位以待...",this.scoreTxt.text="")},s=o,e.FaerieDemonRankItem=s}(modules=modules||{}),function(t){var o,e,i,a,n;function s(){return null!==e&&e.apply(this,arguments)||this}o=t.fairy||(t.fairy={}),i=ui.FairyItemUI,a=t.config.FairyCfg,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._moveTween=TweenJS.create(this),this._shadeTween=TweenJS.create(this),this._yPoss=[];for(var t=0;t<7;t++)this._yPoss.push(80*t);this._endTime=0},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.imgsClickHandler,[-1]),this.onAutoGlobalEvt("FAIRY_UPDATE",this,this.updateView)},s.prototype.offEvt=function(){e.prototype.offEvt.call(this)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},s.prototype.updateView=function(){var t=o.FairyModel.instance.fairyId;this.bgImg.skin="fairy/seltectd_hsxv_xv"+t+".png",this.fairyImg.skin="fairy/image_hsxv_xv"+t+".png",1==o.FairyModel.instance.sendState?(this._endTime=o.FairyModel.instance.endTime,this.timeTxt.text="我的仙女",this._moveTween.isPlaying||this._shadeTween.isPlaying||this.mineFairyShow()):this.visible=!1},s.prototype.loopHandler=function(){this._endTime-GlobalData.serverTime<=0?this.visible=!1:this.timeTxt.text=CommonUtil.timeStampToMMSS(this._endTime)},s.prototype.mineFairyShow=function(){var t=this,e=o.FairyModel.instance.endTime-GlobalData.serverTime;if(!((e=1e3*(e/1e3>>0)-500)<=0)){var i,n,s=a.instance.getCfgById(o.FairyModel.instance.fairyId)[7];this.alpha=1,this.visible=!0,n=s<e?e%s/s:e/s,this.x=670*(1-n)-70,i=n*s,this.y=this._yPoss[Math.floor(Math.random()*this._yPoss.length)],this.zOrder=this.y,this._moveTween.to({x:600},i).start().onComplete(function(){t.alpha=1,t._shadeTween.to({alpha:0},1e3).start().onComplete(function(){t.alpha=1,t.visible=!1,t.x=-70,t.mineFairyShow()}),o.FairyCtrl.instance.getFairyEscortList()})}},s.prototype.imgsClickHandler=function(t){var e=o.FairyModel.instance.escortList[t];WindowManager.instance.open(228,e)},s.prototype.destroy=function(){this._moveTween=null,this._shadeTween=null,e.prototype.destroy.call(this)},s.prototype.close=function(){e.prototype.close.call(this),this._moveTween.stop(),this._shadeTween.stop()},n=s,o.FairyItem=n}(modules=modules||{}),function(C){var T,t,e,i;function n(){return null!==t&&t.apply(this,arguments)||this}T=C.fairy||(C.fairy={}),e=ui.FairyLogItemUI,t=e,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24,"left","middle"),this.contentTxt.style.leading=5},n.prototype.setData=function(t){if(!t){for(var e=T.FairyModel.instance.fairyId,i=C.config.FairyCfg.instance.getCfgById(e),n=i[1],s=CommonUtil.getColorByQuality(e),o=i[6],a=T.FairyModel.instance.per,r=T.FairyModel.instance.formatDate(T.FairyModel.instance.endTime),l="您护送的<span style='color:"+s+"'>【"+n+"】</span>抵达终点,获得收益:<br/>",h="",c=0,p=o.length;c<p;c++){var u=o[c][0];h+="<img src='"+CommonUtil.getIconById(u,!0)+'\' width="40" height="40"/>'+o[c][1]*a*(T.FairyModel.instance.isDouble?2:1)+"&nbsp;&nbsp;"}return this.contentTxt.innerHTML=l+h,this.dateTxt.text=r,this.fitView(),void(this.fgxImg.visible=!1)}var d=t,m=d[0],f=T.FairyModel.instance.formatDate(d[1]),g=d[2],y=d[3],_=C.config.FairyCfg.instance.getCfgById(m),v=_[1],I=d[4],b=CommonUtil.getColorByQuality(m);if(y){for(l="<span style='color:#ff3e3e'>【"+g+"】</span>对您护送的<span style='color:"+b+"'>【"+v+"】</span>发起拦截并胜利,你被掠夺了:<br/>",h="",c=0,p=(o=_[6]).length;c<p;c++)h+="<img src='"+CommonUtil.getIconById(o[c][0])+'\' width="40" height="40"/>'+o[c][1]*I*(T.FairyModel.instance.isDouble?2:1)+"&nbsp;&nbsp;";this.contentTxt.innerHTML=l+h}else this.contentTxt.innerHTML="<span style='color:#ff3e3e'>【"+g+"】</span>对您护送的<span style='color:"+b+"'>【"+v+"】</span>发起拦截但失败了,您无损失。";this.dateTxt.text=f,this.fitView(),this.fgxImg.visible=!0},n.prototype.fitView=function(){this.contentTxt.style.height=this.contentTxt.contextHeight,this.dateBox.y=this.contentTxt.y+this.contentTxt.height,this.fgxImg.y=this.dateBox.y+5,this.height=this.fgxImg.y+7},i=n,T.FairyLogItem=i}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.fashion||(t.fashion={}),n=t.abstract.AbstractHuanHuaItem,s=t.config.FashionMagicShowCfg,o=t.fashion.FashionModel,i=n,__extends(r,i),r.prototype.getShowInfo=function(t){return o.instance.getMagicShowInfoById(t)},r.prototype.getModelInfo=function(){return o.instance.fashionInfo},r.prototype.getCurShowId=function(){return o.instance.curShowId},r.prototype.getDataByIdLvField=function(t,e,i){return s.instance.getDataByIdLvField(t,e,i)},r.prototype.canUpgrade=function(t,e){return s.instance.has(t,e)},r.prototype.isUsing=function(){return this._showId+PlayerModel.instance.occ===this.getCurShowId()},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FASHION_INFO_UPDATE",this,this.showUI)},a=r,e.FashionHuanHuaItem=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.fashion||(t.fashion={}),n=t.abstract.AbstractHuanHuaOptionsItem,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FASHION_INFO_UPDATE",this,this.upDateRp)},o.prototype.upDateRp=function(){this.rpImg.visible=e.FashionModel.instance.getRPByQuality(this._typeNum)},s=o,e.FashionHuanHuaOptionsItem=s}(modules=modules||{}),function(t){var i,e,n;function s(){return e.call(this)||this}i=t.fashion_suits||(t.fashion_suits={}),e=ui.FashionSuitsCaiLiaoItemUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.item.maskImg.skin="common_sg/9g_tongyong_18.png"},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SBCHANGE_HUANHUA",this,this.showUI),this.onAutoGlobalEvt("RIDE_HUANHUA_SHOWID",this,this.showUI),this.onAutoGlobalEvt("XYCHANGE_HUANHUA",this,this.showUI),this.onAutoGlobalEvt("PET_HUANHUA_SHOWID",this,this.showUI),this.onAutoGlobalEvt("FZHUANHUA_UPDATA",this,this.showUI),this.onAutoGlobalEvt("WEAPONFZHUANHUA_UPDATA",this,this.showUI),this.onAutoGlobalEvt("WEAPONFZCHANGE_HUANHUA",this,this.showUI),this.onAutoGlobalEvt("FZCHANGE_HUANHUA",this,this.showUI)},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this._dates=t,this.showUI()},s.prototype.showUI=function(){if(this._dates){this.item.dataSource=this._dates[1];var t=this._dates[0];if(i.FashionSuitsModel.instance.getItemId(t)){var e=i.FashionSuitsModel.instance.getJieShu(t);this.text1.text=e+"阶",0<e?(this.text1.visible=!0,this.item.maskImg.visible=!1):(this.text1.visible=!1,this.item.maskImg.visible=!0)}}},s.prototype.destroy=function(){e.prototype.destroy.call(this,!0)},n=s,i.FashionSuitsCaiLiaoItem=n}(modules=modules||{}),function(t){var o,e,i,n;function s(){return e.call(this)||this}o=t.fashion_suits||(t.fashion_suits={}),i=t.config.ShowSuitCfg,e=ui.FashionSuitsItemUI,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FASHION_SUITS_UPDATE",this,this.showUI),this.onAutoGlobalEvt("SBCHANGE_HUANHUA",this,this.showUI),this.onAutoGlobalEvt("RIDE_HUANHUA_SHOWID",this,this.showUI),this.onAutoGlobalEvt("XYCHANGE_HUANHUA",this,this.showUI),this.onAutoGlobalEvt("PET_HUANHUA_SHOWID",this,this.showUI),this.onAutoGlobalEvt("FZHUANHUA_UPDATA",this,this.showUI),this.onAutoGlobalEvt("WEAPONFZHUANHUA_UPDATA",this,this.showUI),this.onAutoGlobalEvt("WEAPONFZCHANGE_HUANHUA",this,this.showUI),this.onAutoGlobalEvt("FZCHANGE_HUANHUA",this,this.showUI)},s.prototype.setData=function(t){if(e.prototype.setData.call(this,t),t){if(this._id=t[0],this._type=t[1],this._Datas=i.instance.getCfgByIdAndLevel(this._id,0),!this._Datas)return;this.showUI()}},s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.selectedImg.visible=this.selected},s.prototype.showUI=function(){var t=this._Datas[3];this.rpImg.visible=o.FashionSuitsModel.instance.isKeJiHuo(this._id);var e=o.FashionSuitsModel.instance.tableNameAndIcon[this._id],i="",n=0;if(e&&(i=e[0],n=e[1]),this.nameText.text=i,0===n){var s=o.FashionSuitsModel.instance.getFashionId(t);s&&(this.iocnImg.skin=CommonUtil.getIconById(s,!0))}else this.iocnImg.skin="assets/icon/ui/suit/"+n+".png";this.setProgressText()},s.prototype.setProgressText=function(){var t=o.FashionSuitsModel.instance.getProgressByid(this._id);if(t){var e=t[0],i=t[1];this.progressText.color=e<i?"#ff3e3e":"#168a17",this.progressText.text=e+"/"+i}},n=s,o.FashionSuitsItem=n}(modules=modules||{}),function(g){var t,y,a,r,n,s,o,l,h,c,p,u,d,e;function _(){this._arrDate={},this.tableNameAndIcon={},this.tableConditions={};for(var t=g.config.BlendCfg.instance.getCfgById(74001)[2],e=0;e<t.length;e+=3){var i=parseInt(t[e]),n=t[e+1],s=parseInt(t[e+2]);i&&(this.tableNameAndIcon[i]=[n,s])}var o=g.config.BlendCfg.instance.getCfgById(74002)[1];for(e=0;e<o.length;e+=2){i=o[e];var a=o[e+1];i&&(this.tableConditions[i]=a)}}t=g.fashion_suits||(g.fashion_suits={}),y=g.config.ShowSuitCfg,a=g.funcOpen.FuncOpenModel,r=g.redPoint.RedPointCtrl,n=g.config.TianZhuMagicShowCfg,s=g.config.FashionMagicShowCfg,o=g.config.RideMagicShowCfg,l=g.config.PetFazhenCfg,h=g.config.PetMagicShowCfg,c=g.config.RideFazhenCfg,p=g.config.ShenbingMagicshowCfg,u=g.config.WingMagicshowCfg,d=g.ride.RideModel,Object.defineProperty(_,"instance",{get:function(){return this._instance=this._instance||new _},enumerable:!0,configurable:!0}),_.prototype.getArrDate=function(t){var e=this._arrDate[t];return e||[-1,-1]},_.prototype.upDateReply=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i){var n=i[0],s=i[1],o=i[2],a=!1;this._isUpdate&&!this._arrDate[n]&&-1<o&&(a=!0),this._isUpdate&&this._arrDate[n]&&-1===this._arrDate[n][1]&&-1<o&&(a=!0),this._arrDate[n]=[s,o],a&&(console.log("激活了: 外装套装 "+n),WindowManager.instance.openDialog(479,n))}}GlobalData.dispatcher.event("FASHION_SUITS_UPDATE"),this._isUpdate=!0,console.log("外装套装 数据更新：",this._arrDate)},_.prototype.changeAllhow=function(t){for(var e=0;e<t.length;e++){var i=t[e];this.changeShow(i)}},_.prototype.changeShow=function(t,e){void 0===e&&(e=!1);var i=Math.round(t/1e3);9==i?e?PetCtrl.instance.magicLev(t):PetCtrl.instance.changeMagic(t):10==i?e?g.ride.RideCtrl.instance.magicLev(t):g.ride.RideCtrl.instance.changeMagic(t):2==i?e?IllusionCtrl.instance.riseMagicShow([t]):IllusionCtrl.instance.changeMagicShow(t):3==i?e?g.wing.WingCtrl.instance.magicLev([t]):g.wing.WingCtrl.instance.changeMagicShow(t):4==i?e?IllusionCtrl.instance.riseRideMagicShow([t]):IllusionCtrl.instance.changeRideMagicShow(t):5==i?e?g.immortals.ImmortalsCtrl.instance.magicLev([t]):g.immortals.ImmortalsCtrl.instance.changeMagicShow(t):90==i?e?g.fashion.FashionCtrl.instance.addFashionMagicShow(t):g.fashion.FashionCtrl.instance.changeFashionMagicShow(t):11==i&&(e?g.tianZhu.TianZhuCtrl.instance.addTianZhuMagicShow(t):g.tianZhu.TianZhuCtrl.instance.changeTianZhuMagicShow(t))},_.prototype.isAllChuanDai=function(t){for(var e=y.instance.getCfgByIdAndLevel(t,0)[3],i=0;i<e.length;i++){var n=e[i];if(!this.isChuanDai(n))return!1}return!0},_.prototype.isChuanDai=function(t){var e=Math.round(t/1e3),i=!1;return 9==e?i=t==g.pet.PetModel.instance.fazhenId:10==e?i=t==d.instance.fazhenId:2==e?i=t==g.illusion.IllusionModel.instance.magicShowId:3==e?i=t==g.wing.WingModel.instance.curShowId:4==e?i=t==g.illusion.IllusionModel.instance.rideMagicShowId:5==e?i=t==g.immortals.ImmortalsModel.instance.curShowId:90==e?i=(t=t-t%10+PlayerModel.instance.occ)==g.fashion.FashionModel.instance.fashionInfo[3]:11==e&&(i=t==g.tianZhu.TianZhuModel.instance.tianZhuInfo[3]),i},_.prototype.getFashionId=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];if(90==Math.round(n/1e3))return e=this.getItemId(n)}return e},_.prototype.getItemId=function(t){var e=Math.round(t/1e3),i=0;return 9==e?i=l.instance.getDataByIdLvField(t,Number.MIN_VALUE,1)[0]:10==e?i=c.instance.getDataByIdLvField(t,Number.MIN_VALUE,1)[0]:2==e?i=h.instance.getDataByIdLvField(t,Number.MIN_VALUE,1)[0]:3==e?i=u.instance.getDataByIdLvField(t,Number.MIN_VALUE,1)[0]:4==e?i=o.instance.getDataByIdLvField(t,Number.MIN_VALUE,1)[0]:5==e?i=p.instance.getDataByIdLvField(t,Number.MIN_VALUE,1)[0]:90==e?i=s.instance.getDataByIdLvField(t,Number.MIN_VALUE,1)[0]:11==e&&(i=n.instance.getDataByIdLvField(t,Number.MIN_VALUE,1)[0]),i},_.prototype.getJieShu=function(t){var e=Math.round(t/1e3),i=0;return 9==e?i=_.instance.getPetFaZhenJieShu(t):10==e?i=_.instance.getMagicWeaponFaZhenJieShu(t):2==e?i=_.instance.getPetJieShu(t):3==e?i=_.instance.getWingJieShu(t):4==e?i=_.instance.getMagicWeaponJieShu(t):5==e?i=_.instance.getShenbingJieShu(t):90==e?i=_.instance.getFashionJieShu(t):11==e&&(i=_.instance.getTianZhuJieShu(t)),i||0},_.prototype.getShenbingJieShu=function(t){var e=0,i=g.immortals.ImmortalsModel.instance.huanhuaList.get(t);return i&&(e=i[1]),e},_.prototype.getWingJieShu=function(t){var e=0,i=g.wing.WingModel.instance.huanhuaList.get(t);return i&&(e=i[1]),e},_.prototype.getTianZhuJieShu=function(t){var e=0,i=g.tianZhu.TianZhuModel.instance.getMagicShowInfoById(t);return i&&(e=i[1]),e},_.prototype.getFashionJieShu=function(t){var e=0,i=g.fashion.FashionModel.instance.getMagicShowInfoById(t);return i&&(e=i[1]),e},_.prototype.getMagicWeaponJieShu=function(t){var e=0,i=d.instance.getShowInfoById(t);return i&&(e=i[1]),e},_.prototype.getPetJieShu=function(t){var e=0,i=g.pet.PetModel.instance.getShowInfoById(t);return i&&(e=i[1]),e},_.prototype.getMagicWeaponFaZhenJieShu=function(t){var e=0,i=d.instance.huanhuaList.get(t);return i&&(e=i[1]),e},_.prototype.getPetFaZhenJieShu=function(t){var e=0,i=g.pet.PetModel.instance.huanhuaList.get(t);return i&&(e=i[1]),e},_.prototype.getJiHuoNum=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];0<this.getJieShu(n)&&e++}return e},_.prototype.getmanZhuNum=function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n];e<=this.getJieShu(s)&&i++}return i},_.prototype.getAllFight=function(){for(var t=0,e=1;e<=3;e++){var i=y.instance.getAllIdArrByType(e);if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=this.getfight(s);t+=o[0],t+=o[1]}}}return t},_.prototype.getfight=function(t){var e=_.instance.getArrDate(t),i=e[0],n=e[1],s=n<0?0:n,o=0,a=0,r=y.instance.getCfgByIdAndLevel(t,s),l=y.instance.getCfgByIdAndLevel(t,0);return r&&l&&(-1<i&&(o=l[9]),-1<n&&(a=r[10])),[o=o||0,a=a||0]},_.prototype.getProgressBytype=function(t){var e=y.instance.getAllIdArrByType(t),i=e.length,n=0;if(e)for(var s=0;s<e.length;s++){var o=e[s];if(o){var a=_.instance.getArrDate(o),r=a[0],l=a[1];-1<r&&-1<l&&n++}}return[n,i]},_.prototype.getProgressByid=function(t){for(var e=y.instance.getCfgByIdAndLevel(t,0)[3],i=e.length,n=0,s=0;s<e.length;s++){var o=e[s];0<this.getJieShu(o)&&n++}return[n,i]},_.prototype.isKeJiHuo=function(t){var e=y.instance.getCfgByIdAndLevel(t,0)[3],i=_.instance.getArrDate(t),n=i[0],s=i[1],o=-1<n,a=-1<s,r=_.instance.getJiHuoNum(e);if(r>=this.tableConditions[t]&&!o)return!0;if(r>=e.length&&!a)return!0;if(o&&a){var l=s<0?0:s,h=y.instance.getCfgByIdAndLevel(t,l),c=y.instance.getCfgByIdAndLevel(t,l+1),p=h[6],u=p[0],d=p[1],m=p[2];if(c){var f=g.bag.BagModel.instance.getItemCountById(d);if(_.instance.getmanZhuNum(e,u)>=e.length&&m<=f)return!0}}return!1},_.prototype.getTypeRp=function(t){var e=y.instance.getAllIdArrByType(t);if(e)for(var i=0;i<e.length;i++){var n=e[i];if(n&&this.isKeJiHuo(n))return!0}return!1},_.prototype.setRP=function(){var t=a.instance.getFuncIsOpen(288),e=a.instance.getFuncIsOpen(289),i=a.instance.getFuncIsOpen(290),n=this.getTypeRp(1),s=this.getTypeRp(2),o=this.getTypeRp(3);r.instance.setRPProperty("fashionSuitsRP",t&&n),r.instance.setRPProperty("fashionSuits1RP",e&&s),r.instance.setRPProperty("fashionSuits2RP",i&&o)},e=_,t.FashionSuitsModel=e}(modules=modules||{}),function(t){var p,u,e,d,m,f,g,y,_,v,i;function n(){return null!==u&&u.apply(this,arguments)||this}p=t.illusion||(t.illusion={}),e=ui.IllusionItemUI,d=t.pet.PetModel,m=t.config.PetMagicShowCfg,f=t.config.ExteriorCfg,g=t.bag.BagModel,y=t.common.CommonUtil,_=t.ride.RideModel,v=t.config.RideMagicShowCfg,u=e,__extends(n,u),n.prototype.initialize=function(){u.prototype.initialize.call(this),this.selectedImg.visible=!1},n.prototype.setSelected=function(t){u.prototype.setSelected.call(this,t),this.selectedImg.visible=t},n.prototype.setData=function(t){u.prototype.setData.call(this,t),this._showId=t;var e=0,i=d.instance.panelType,n=0===i?_.instance.getShowInfoById(this._showId):d.instance.getShowInfoById(this._showId);n&&(e=n[1]);var s=-1;0===i&&_.instance.magicShow?s=p.IllusionModel.instance.rideMagicShowId:1===i&&d.instance.magicShow&&(s=p.IllusionModel.instance.magicShowId),this.usingTxt.visible=s===this._showId;var o=0===i?v.instance.getDataByIdLvField(this._showId,e,1):m.instance.getDataByIdLvField(this._showId,e,1),a=0===i?!!v.instance.has(this._showId,e+1):m.instance.has(this._showId,e+1),r=o[0],l=o[1],h=f.instance.getCfgById(this._showId);this.wayTxt.color="#F4F1BB",this.wayTxt.fontSize=18,this.nameTxt.color=y.getColorByQuality(h[4]),0===e?(this.wayTxt.text="未激活",this.maskImg.visible=!0,g.instance.getItemCountById(r)>=l?(this.wayTxt.text="可激活",this.wayTxt.color="#00ad35",this.qualityImg.gray=this.iconImg.gray=!1,this.dotImg.visible=!0):(this.qualityImg.gray=this.iconImg.gray=!0,this.wayTxt.text=this.getWay(i,this._showId),this.dotImg.visible=!1)):(this.maskImg.visible=!1,this.qualityImg.gray=this.iconImg.gray=!1,this.wayTxt.text=e+"阶",this.wayTxt.fontSize=20,this.dotImg.visible=!!a&&g.instance.getItemCountById(r)>=l),this.nameTxt.text=h[2],this.nameTxt.color=y.getColorByQuality(h[4]),this.iconImg.skin="assets/icon/skin/"+h[3]+".png",this.qualityImg.skin="common/dt_tongyong_"+h[4]+".png";var c=h[11];c?(this.gradeImg.skin="common/xiyou"+c+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1},n.prototype.getWay=function(t,e){for(var i=0===t?v.instance.getDataByIdLvField(e,0,2):m.instance.getDataByIdLvField(e,0,2),n="",s=0,o=i.length;s<o&&"#"!==i[s];s++)n+=i[s];return n},i=n,p.IllusionItem=i}(modules=modules||{}),function(t){var e,i,n,h,c,p,u,d,m,s;function o(){return i.call(this)||this}e=t.immortals||(t.immortals={}),n=ui.BinghunIconUI,h=t.bag.BagModel,c=t.player.PlayerModel,p=t.config.ShenbingRefineCfg,u=t.config.WingRefineCfg,d=t.config.FashionRefineCfg,m=t.config.TianZhuRefineCfg,i=n,__extends(o,i),o.prototype.setIndex=function(t){this._index=t-1,2===this._type?this.icon.skin="immortal/btn_shengbing_"+t+".png":3===this._type?this.icon.skin="immortal/btn_xianyi_"+t+".png":4===this._type?this.icon.skin="immortal/icon_sz_"+t+".png":5===this._type&&(this.icon.skin="immortal/icon_tz_"+t+".png")},o.prototype.setType=function(t){this._type=t},Object.defineProperty(o.prototype,"refineInfo",{set:function(t){var e;this._refineInfo=t;var i,n,s,o=this._refineInfo?this._refineInfo[1]:0;2===this._type?(i=p.instance.getMaxLvByLv(this._index,o),s=p.instance.getDataByIdLvField(this._index,o,1),e=p.instance.has(this._index,o+1),n=p.instance.getDataByIdLvField(this._index,o,6)):3===this._type?(i=u.instance.getMaxLvByLv(this._index,o),s=u.instance.getDataByIdLvField(this._index,o,1),e=u.instance.has(this._index,o+1),n=u.instance.getDataByIdLvField(this._index,o,6)):4===this._type?(i=d.instance.getMaxLvByLv(this._index,o),s=d.instance.getDataByIdLvField(this._index,o,1),e=d.instance.has(this._index,o+1),n=d.instance.getDataByIdLvField(this._index,o,6)):5===this._type&&(i=m.instance.getMaxLvByLv(this._index,o),s=m.instance.getDataByIdLvField(this._index,o,1),e=m.instance.has(this._index,o+1),n=m.instance.getDataByIdLvField(this._index,o,6));var a=n<=c.instance.level;this.ratioTxt.text=a?o+"/"+i:o+"/"+o;var r=s[0],l=s[1];this.dotImg.visible=!!e&&h.instance.getItemCountById(r)>=l&&a},enumerable:!0,configurable:!0}),s=o,e.BinghunItem=s}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.immortals||(t.immortals={}),n=ui.SkillIconUI,s=Laya.Event,o=t.config.SkillPureCfg,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=-1},r.prototype.close=function(){this._eff&&this._eff.stop(),i.prototype.close.call(this)},r.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),i.prototype.destroy.call(this)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.on(s.CLICK,this,this.clickHandler)},r.prototype.offEvt=function(){this.off(s.CLICK,this,this.clickHandler),i.prototype.offEvt.call(this)},r.prototype.clickHandler=function(){-1!==this._type&&WindowManager.instance.openDialog(24,[this._skillInfo||[this._skillId,0,0],this._type])},Object.defineProperty(r.prototype,"type",{set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"skillId",{set:function(t){this._skillId=t;var e=o.instance.getCfgById(CommonUtil.getSkillPureIdById(t));this.iconImg.skin="assets/icon/skill/"+e[6]+".png"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"skillInfo",{set:function(t){if(this._skillInfo=t){var e=t[1];this.levTxt.text=t[1].toString(),this.iconImg.gray=0==e,this.levBox.visible=!this.iconImg.gray,0<t[2]?(this._eff||(this._eff=CommonUtil.creatEff(this,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0),this._eff.visible=!0),this._eff.play(),this.stateImg.visible=this._eff.visible=this.dotImg.visible=!0,this.stateImg.skin=0===e?"common/txt_xq_kjh.png":"common/txt_xq_ksj.png"):(this._eff&&(this._eff.visible=!1,this._eff.stop()),this.stateImg.visible=this.dotImg.visible=!1)}else this.iconImg.gray=!0,this.stateImg.visible=this.dotImg.visible=this.levBox.visible=!1,this._eff&&(this._eff.visible=!1,this._eff.stop())},enumerable:!0,configurable:!0}),a=r,e.SkillItem=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.kunlun||(t.kunlun={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},o.prototype.destroy=function(){i.prototype.destroy.call(this,!0)},s=o,e.KunLunItme=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.kunlun||(t.kunlun={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},o.prototype.destroy=function(){i.prototype.destroy.call(this,!0)},s=o,e.KunLunItme1=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.loading||(t.loading={}),n=t.common.CustomClip,s=Laya.Sprite,i=BaseView,__extends(a,i),a.prototype.destroy=function(){this._clip=this.destroyElement(this._clip),this._bg=this.destroyElement(this._bg),i.prototype.destroy.call(this)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this._bg=new s,this.addChild(this._bg),this._bg.alpha=0,this._clip=n.create("assets/effect/loading_black.atlas","loading_black",8),this.addChild(this._clip),this._clip.scale(2,2,!0),this._clip.centerX=this._clip.centerY=0},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("RESIZE_UI",this,this.resizeHandler),this.onAutoClick(this._bg,this,this.bgClickHandler),this.resizeHandler(),this._clip.play()},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._clip.stop()},a.prototype.bgClickHandler=function(){},a.prototype.resizeHandler=function(){this.width=CommonConfig.viewWidth,this.height=CommonConfig.viewHeight,this._bg.width=CommonConfig.viewWidth,this._bg.height=CommonConfig.viewHeight,this._bg.graphics.clear(),this._bg.graphics.drawRect(0,0,this.width,this.height,"#ff0000")},o=a,e.LoadingBlackPanel=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.loading||(t.loading={}),n=Laya.Sprite,s=t.common.CustomClip,i=BaseView,__extends(a,i),a.prototype.destroy=function(){this._clip&&(this._clip.removeSelf(),this._clip.destroy(),this._clip=null),i.prototype.destroy.call(this)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this._bg=new n,this.addChild(this._bg),this._bg.alpha=.8,this._clip=s.create("assets/effect/loading_white.atlas","loading_white",8),this.addChild(this._clip),this._clip.centerX=0,this._clip.centerY=0},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),GlobalData.dispatcher.on("RESIZE_UI",this,this.resizeHandler),this.resizeHandler(),this._clip.play()},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),GlobalData.dispatcher.off("RESIZE_UI",this,this.resizeHandler),this._clip.stop()},a.prototype.resizeHandler=function(){this.width=this._bg.width=CommonConfig.viewWidth,this.height=this._bg.height=CommonConfig.viewHeight,this._bg.graphics.clear(),this._bg.graphics.drawRect(0,0,this.width,this.height,"#000000")},o=a,e.LoadingWhitePanel=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.login||(t.login={}),i=ItemRender,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._img=new Laya.Image("login/btn_xfy_qf_0.png"),this.addChild(this._img),this._txt=new Laya.Text,this.addChild(this._txt),this._txt.fontSize=30,this._txt.font="SimHei",this._txt.color="#010101",this._txt.width=192,this._txt.align="center",this._txt.y=23,this.width=192,this.height=76},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this._img.skin=t?"login/btn_xfy_qf_1.png":"login/btn_xfy_qf_0.png"},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this._txt.text=t[1]},n=s,e.SelectServerLeftItem=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.login||(t.login={}),n=Laya.Image,s=t.notice.SystemNoticeManager,i=ItemRender,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._bg=new n("login/btn_xfy_fwq.png"),this.addChild(this._bg),this._stateImg=new n,this.addChild(this._stateImg),this._stateImg.pos(18,16,!0),this._serverName=new Laya.Text,this.addChild(this._serverName),this._serverName.pos(80,18,!0),this._serverName.font="SimHei",this._serverName.color="#000000",this._serverName.fontSize=30,this.width=381,this.height=66},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this._serverName.text=t.name,2===t.status?(this._stateImg.skin="login/image_xfy_ct.png",this.selectEnable=!0):1===t.status?(this._stateImg.skin="login/image_xfy_fm.png",this.selectEnable=!0):-1===t.status&&(this._stateImg.skin="login/image_xfy_wh.png",this.selectEnable=!1)},a.prototype.clickHandler=function(){i.prototype.clickHandler.call(this),this._selectEnable||s.instance.addNotice("当前服务器正在维护中")},o=a,e.SelectServerRightItem=o}(modules=modules||{}),function(t){var s,o,e,i;function n(){var t=null!==o&&o.apply(this,arguments)||this;return t._rowWidth=478,t._rowX=150,t}s=t.magicArt||(t.magicArt={}),e=ui.MagicArtItemViewUI,o=e,__extends(n,o),n.prototype.setData=function(t){o.prototype.setData.call(this,t);var e=t;this.skillNameTxt.text=e[1];var i=e[0];s.MagicArtModel.instance.checkHasSkill(i)?(this.hasOpen.visible=!0,this.skillGetCondition.visible=!1):(this.hasOpen.visible=!1,this.skillGetCondition.visible=!0,this.skillGetCondition.text=e[7]),this.skillIcon.skin="assets/icon/skill/"+e[6]+".png";var n=e[5];(this.skillDescribeTxt.text=n).length<=19?(this.skillDescribeTxt.width=this._rowWidth,this.skillDescribeTxt.x=this._rowX):n.length<=26?(this.skillDescribeTxt.width=332,this.skillDescribeTxt.x=this._rowX+Math.floor((this._rowWidth-332)/2)):n.length<=32?(this.skillDescribeTxt.width=405,this.skillDescribeTxt.x=this._rowX+Math.floor((this._rowWidth-405)/2)):(this.skillDescribeTxt.width=this._rowWidth,this.skillDescribeTxt.x=this._rowX)},i=n,s.MagicArtItem=i}(modules=modules||{}),function(t){var a,r,e,i,l,n,s;function o(){return null!==r&&r.apply(this,arguments)||this}a=t.magicPosition||(t.magicPosition={}),e=t.common.ProgressBarCtrl,i=ui.MagicPositionItemUI,l=t.config.XianweiTaskCfg,n=Laya.Point,r=i,__extends(o,r),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._bar=this.destroyElement(this._bar),r.prototype.destroy.call(this,t)},o.prototype.initialize=function(){r.prototype.initialize.call(this),this._bar=new e(this.progressImg,this.progressImg.width,this.showProgress),this._btnClip=CommonUtil.creatEff(this.getBtn,"btn_light",15),this._btnClip.scale(.65,.65),this._btnClip.pos(-6,-7)},o.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getAward),this.onAutoClick(this.goBtn,this,this.goOtherPanel)},o.prototype.getAward=function(){t.common.ItemRenderNoticeManager.instance.isPlaying||(a.MagicPositionModel.Instance.showPoint=this.localToGlobal(new n(0,0)),t.common.ItemRenderNoticeManager.instance.index=this.index,a.MagicPositionCtrl.Instance.getTaskAward(this.taskId))},o.prototype.goOtherPanel=function(){-1===this.linkTo?WindowManager.instance.open(106,[90430001,0,!0]):0!=this.linkTo&&WindowManager.instance.openByActionId(this.linkTo)},o.prototype.setData=function(t){r.prototype.setData.call(this,t);var e=t;this.taskId=e[0];var i=e[2],n=l.instance.getXianweiTaskDataById(this.taskId),s=n[6]<100;this.showBg.skin=s?"magic_position/dt_xianwei_1.png":"magic_position/dt_xianwei_2.png",this.linkTo=n[7][0],this.teskName.text=a.MagicPositionModel.Instance.getMsc(n),this.achieveValue.value=n[5][1].toString(),this.goldNum.text=n[5][3].toString();var o=n[8];this._bar.maxValue=o,1==e[1]?(this.getBtn.visible=!0,this._btnClip.play(),this.goBtn.visible=!1,this._bar.value=1==o?1:i):(this.getBtn.visible=!1,this._btnClip.stop(),this.goBtn.visible=!0,this._bar.value=1==o?0:i)},s=o,a.MagicPositionItem=s}(modules=modules||{}),function(t){var e,i;function n(){}e=t.magicPosition||(t.magicPosition={}),n.getSkinByLv=function(t){var e=t%10;return"magic_position/"+(1==e?"txt_xw_cq":2==e?"txt_xw_zq":3==e?"txt_xw_df":"txt_xw_dym")+".png"},i=n,e.MagicPositionUtil=i}(modules=modules||{}),function(i){var t,n,e,s,o,a,r,l,h,c,p,u;function d(t){var e=n.call(this)||this;e._id=t;var i=o.instance.getCfgById(e._funcId=t)[8];return 472===e._funcId&&1<=PlatParams.control.screenSpokesperson?e.icon.skin="left_top/btn_mainui_gcfl.png":e.icon.skin="left_top/"+i,49===e._funcId&&e.regGuideSpr(80,e),e}t=i.main||(i.main={}),e=t.LeftTopRPConfig,s=ui.ActivityIconItemUI,o=i.config.ActionOpenCfg,a=i.redPoint.RedPointCtrl,r=i.bottomTab.BottomTabCtrl,l=i.common.CustomClip,h=Laya.Point,c=i.config.SceneCopyOpenBossCfg,p=i.config.QQPrivilegeRewardCfg,n=s,__extends(d,n),d.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.setActionPreviewPos(),this.showPrizeEffect(),this.setOpenChallengeIcon(),this.setBlueIcon(),this.updateAuctionShop(),this.updateWindCloud(),this.setMianFeiImg(),this.showSanshengTime(),this.hudiePlatformCtrl()},d.prototype.hudiePlatformCtrl=function(){986===this._funcId?CustomDataCtrl.instance.getCustomizeData([39]):1023===this._funcId&&i.phone_qq_red_bag.PhoneQQRedBagCtrl.instance.showOpen()},d.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview)},d.prototype.setPosActionPreview=function(){var t=i.action_preview.ActionPreviewModel.instance._posSprite;h.TEMP.setTo(this.width/2,this.height/2);var e=this.localToGlobal(h.TEMP,!0);6===this._funcId?(t.set(6,e),t.set(7,e),t.set(8,e)):5===this._funcId?t.set(5,e):39===this._funcId?t.set(39,e):40===this._funcId?t.set(40,e):49===this._funcId?(t.set(49,e),t.set(92,e),t.set(93,e),t.set(94,e),t.set(91,e),t.set(95,e),t.set(882,e),t.set(883,e),t.set(892,e)):147===this._funcId?(t.set(147,e),t.set(143,e),t.set(127,e),t.set(118,e),t.set(140,e),t.set(112,e),t.set(146,e)):115===this._funcId?t.set(115,e):117===this._funcId?t.set(117,e):130===this._funcId?t.set(130,e):121===this._funcId?(t.set(153,e),t.set(154,e),t.set(121,e)):139===this._funcId?(t.set(155,e),t.set(139,e)):62===this._funcId?(t.set(62,e),t.set(71,e),t.set(72,e),t.set(73,e),t.set(74,e),t.set(75,e)):180===this._funcId&&i.action_preview.ActionPreviewModel.instance._posSprite.set(180,e)},d.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this,this,this.openEventHandler);var t=e.instance.getRps(this._funcId);t&&this.regAutoRP(this.dotImg,t),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),266===this._funcId&&this.onAutoGlobalEvt("OPEN_CHALLENGE_CHANGE_STATE",this,this.setOpenChallengeIcon),632===this._funcId&&(this.onAutoGlobalEvt("QQ_REWARD_UPDATE",this,this.setBlueIcon),this.onAutoEvt(this,"mouseover",this,this.overHandler),this.onAutoEvt(this,"mouseout",this,this.outHandler),this.onAutoEvt(this,"mousemove",this,this.moveHandler)),49===this._funcId&&(this.onAutoGlobalEvt("BLESSING_UPDATE",this,this.setMianFeiImg),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.setMianFeiImg)),923===this._funcId&&this.regAutoRP(this.dotImg,["fightSoulPayRP"]),986===this._funcId&&this.regAutoRP(this.dotImg,["hudieRP"]),778===this._funcId&&this.onAutoGlobalEvt("AUCTION_STORE_UPDATE",this,this.updateAuctionShop)},d.prototype.setOpenChallengeIcon=function(){if(266===this._id&&0!=i.openChallenge.OpenChallengeModel.instance.endTime){this.initElement();var t=c.instance.getAtivityIcon(i.openChallenge.OpenChallengeModel.instance.minLevel);this.icon.skin="left_top/"+t,this._time=i.openChallenge.OpenChallengeModel.instance.endTime,this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(Laya.timer.clear(this,this.loopHandler),this._timerTxt.text="00:00:00")}},d.prototype.updateAuctionShop=function(){778===this._id&&0!=i.store.AuctionStoreModel.instance.endTime&&(this.initElement(),this._time=i.store.AuctionStoreModel.instance.endTime,this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(Laya.timer.clear(this,this.loopHandler),this._timerTxt.text="00:00:00"))},d.prototype.updateWindCloud=function(){839===this._id&&(this.initElement(),this._time=i.windCloud.WindCloudModel.instance.enrollTime[1],Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler())},d.prototype.setBlueIcon=function(){if(632===this._id){var t=0,e=i.qq.QQModel.instance.qqBlueStartReward||0;e&&++t,e=i.qq.QQModel.instance.qqBlueDailyReward?i.qq.QQModel.instance.qqBlueDailyReward.length:0,p.instance.blueDailyIds.length===e&&++t,e=i.qq.QQModel.instance.qqBlueLevelReward?i.qq.QQModel.instance.qqBlueLevelReward.length:0,p.instance.blueLevelIds.length===e&&++t,this.icon.skin=3===t?"left_top/btn_mainui_laztdk.png":"left_top/btn_mainui_laztwlq.png"}},d.prototype.loopHandler=function(){this._time>GlobalData.serverTime?this._timerTxt.text=i.common.CommonUtil.timeStampDDHHToHHMMSS(this._time):(this._timerTxt.text="00:00:00",Laya.timer.clear(this,this.loopHandler),839===this._funcId&&GlobalData.dispatcher.event("WINDCLOUD_TIMER"))},d.prototype.openEventHandler=function(){121==this._funcId?a.instance.getRPProperty("investLoginRP")?WindowManager.instance.open(174):a.instance.getRPProperty("investRecruitRP")?WindowManager.instance.open(175):a.instance.getRPProperty("investGrowthRP")?WindowManager.instance.open(176):WindowManager.instance.open(174):296===this._funcId?i.marry.MarryCtrl.instance.openRingBuyAlert():785===this._funcId?i.wx_module.wxShareCtrl.instance.openCustomerServiceConversation():784===this._funcId?(i.wx_module.wxShareModel.instance.openTabAlert(),WindowManager.instance.open(1165)):786===this._funcId?WindowManager.instance.open(1191):891===this._funcId?WindowManager.instance.open(1341):965===this._funcId?WindowManager.instance.open(1451):49===this._funcId?a.instance.getRPProperty("treasureRP")?WindowManager.instance.open(113,99999):r.instance.openTabByFunc(49):1001===this._funcId?PlatParams.player_accountsecurity():1023===this._funcId?WindowManager.instance.open(1527):1025===this._funcId?i.three_seven_box.ThreeSevenBoxModel.instance.openDlog():o.instance.getCfgById(this._funcId)[10]||194===this._funcId?WindowManager.instance.openByActionId(this._funcId):r.instance.openTabByFunc(this._funcId),this.setEffState(),this.outHandler()},d.prototype.setEffState=function(){switch(this._funcId){case 117:case 115:case 121:case 244:case 216:case 193:case 266:case 296:case 472:case 786:case 785:case 784:case 886:case 891:case 923:case 965:case 967:case 969:case 298:case 986:case 1023:case 1025:GlobalData.effState[this._funcId]=!1}this.showPrizeEffect()},d.prototype.showPrizeEffect=function(){switch(this._funcId){case 117:case 115:case 121:case 244:case 193:case 266:case 296:case 472:case 786:case 785:case 784:case 886:case 891:case 965:case 986:case 1023:case 1025:!1===GlobalData.effState[this._funcId]?l.thisStop(this._eff):this.playEff();break;case 215:case 139:case 147:this.playEff();break;case 298:case 923:case 967:case 969:!1===GlobalData.effState[this._funcId]?l.thisStop(this._eff):this.playEff()}},d.prototype.showSanshengTime=function(){298===this._funcId?this._time=i.susan_slade.SusanSladeModel.instance.restTm||0:923===this._funcId?this._time=i.fight_soul_pay.FightSoulPayModel.instance.restTm||0:967===this._funcId?this._time=i.sky_book_pay.SkyBookPayModel.instance.restTm||0:969===this._funcId&&(this._time=i.brahma_pay.BrahmaPayModel.instance.restTm||0),this._time>GlobalData.serverTime&&(this.initElement(),Laya.timer.loop(1e3,this,this.updateSanshengTime))},d.prototype.updateSanshengTime=function(){var t;298===this._funcId?t=i.susan_slade.SusanSladeModel.instance.restTm||0:923===this._funcId?t=i.fight_soul_pay.FightSoulPayModel.instance.restTm||0:967===this._funcId?t=i.sky_book_pay.SkyBookPayModel.instance.restTm||0:969===this._funcId&&(t=i.brahma_pay.BrahmaPayModel.instance.restTm||0),t>GlobalData.serverTime?this._timerTxt.text=i.common.CommonUtil.timeStampDDHHToHHMMSS(t):(this._timerTxt.text="",Laya.timer.clear(this,this.updateSanshengTime))},d.prototype.playEff=function(){this._eff||(this._eff=new l,this.addChildAt(this._eff,1),this._eff.frameUrls=["left_top/eff_0.png","left_top/eff_2.png","left_top/eff_4.png","left_top/eff_6.png","left_top/eff_8.png","left_top/eff_10.png","left_top/eff_12.png","left_top/eff_14.png"],this._eff.durationFrame=7,this._eff.loop=!0,this._eff.x=4),this._eff.play(),this._eff.visible=!0},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._tip=this.destroyElement(this._tip),this._eff=this.destroyElement(this._eff),this._bgImg=this.destroyElement(this._bgImg),Laya.timer.clear(this,this.loopHandler),n.prototype.destroy.call(this,t)},d.prototype.initElement=function(){this._bgImg||(this._bgImg=new Laya.Image("common_sg/txtbg_common_tipsbg.png"),this.icon.addChild(this._bgImg),this._bgImg.width=188,this._bgImg.height=43,this._bgImg.scale(.5,.5,!0),this._bgImg.pos(-4,76,!0)),this._timerTxt||(this._timerTxt=new Laya.Text,this.icon.addChild(this._timerTxt),this._timerTxt.width=100,this._timerTxt.height=16,this._timerTxt.pos(-6,76,!0),this._timerTxt.color="#50ff28",this._timerTxt.font="SimHei",this._timerTxt.fontSize=20,this._timerTxt.align="center")},d.prototype.overHandler=function(){632===this._id?(this._tip||(this._tip=new ui.QQBlueIntroUI),this._tip.pos(Laya.stage.mouseX,Laya.stage.mouseY),Laya.stage.addChild(this._tip)):627===this._id&&(this._tip||(this._tip=new ui.QQLobbyIntroUI),this._tip.pos(Laya.stage.mouseX,Laya.stage.mouseY),Laya.stage.addChild(this._tip))},d.prototype.outHandler=function(){632===this._id?this._tip&&this._tip.parent&&this._tip.parent.removeChild(this._tip):627===this._id&&this._tip&&this._tip.parent&&this._tip.parent.removeChild(this._tip)},d.prototype.moveHandler=function(){this._tip&&this._tip.parent&&this._tip.pos(Laya.stage.mouseX,Laya.stage.mouseY)},d.prototype.setMianFeiImg=function(){49===this._funcId?(this.dotImg1.visible=i.treasure.TreasureModel.instance.isMianFeiEnter(!0)[0],this.dotImg1.pos(3,25)):970===this._funcId?(this.dotImg1.visible=!0,i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(983)?this.dotImg1.skin="left_top/image_common_kq.png":i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(982)?this.dotImg1.skin="left_top/image_common_bq.png":this.dotImg1.skin="left_top/image_common_bf.png",this.dotImg1.pos(0,0)):this.dotImg1.visible=!1},u=d,t.ActivityIconItem=u}(modules=modules||{}),function(i){var e,n,s,o,t;function a(){var t=n.call(this)||this;return t._model=e.BottomModel.instance,t._tweenMap=new s,t._curShowingIcons=[],t._curShowingBtns=[],t._iconParentTotalWidth=0,t.ICON_X_OFFSET=34,t.TIP_BTN_Y_OFFSET=63,t.TIP_BTN_Y_INIT=-85,t._iconParentTotalWidth=t.iconsParent.width,t.tipParent.visible=!1,t.tipParent.alpha=0,[t.marryIcon,t.warbandIcon,t.factionIcon,t.marryTipBtn,t.warbandTipBtn,t.factionTipBtn].forEach(function(t){t.alpha=0,t.visible=!1}),t.arrangeIcons(),t.arrangeTipBtns(),t}e=i.main||(i.main={}),s=Laya.Dictionary,o=i.chat.ChatModel,n=ui.BottomChatNoticeUI,__extends(a,n),a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.factionIcon,this,this.onIconClick).onAutoClick(this.marryIcon,this,this.onIconClick).onAutoClick(this.warbandIcon,this,this.onIconClick).onAutoClick(this.ignoreTipBtn,this,this.onTipBtnClick).onAutoClick(this.factionTipBtn,this,this.onTipBtnClick).onAutoClick(this.marryTipBtn,this,this.onTipBtnClick).onAutoClick(this.warbandTipBtn,this,this.onTipBtnClick),this.onAutoGlobalEvt("FACTION_MESSAGE_UPDATE",this,this.onMsg2ShowIcon,[this.factionIcon]).onAutoGlobalEvt("MARRY_MESSAGE_UPDATE",this,this.onMsg2ShowIcon,[this.marryIcon]).onAutoGlobalEvt("WARBAND_MESSAGE_UPDATE",this,this.onMsg2ShowIcon,[this.warbandIcon]).onAutoGlobalEvt("MARRY_INFO_UPDATE",this,this.onMarryInfoUpdate).onAutoGlobalEvt("PANEL_OPEN",this,this.onPanelOpen),this._model.onAutoEvt("isShowingChatFactionNotice",this,this.onIconShowingChanged).onAutoEvt("isShowingChatMarryNotice",this,this.onIconShowingChanged).onAutoEvt("isShowingChatWarbandNotice",this,this.onIconShowingChanged).onAutoEvt("isShowingChatTip",this,this.onChatTipShowingChanged)},a.prototype.offEvt=function(){n.prototype.offEvt.call(this),Laya.stage.off(Laya.Event.CLICK,this,this.onStageClick)},a.prototype.onChatTipShowingChanged=function(){var t=this;this._model.isShowingChatTip?(this.tweenIt(this.tipParent,TweenJS.create(this.tipParent).to({alpha:1},200)),this.tipParent.visible=!0,Laya.stage.on(Laya.Event.CLICK,this,this.onStageClick)):(Laya.stage.off(Laya.Event.CLICK,this,this.onStageClick),this.tweenIt(this.tipParent,TweenJS.create(this.tipParent).to({alpha:0},200).onComplete(function(){return t.tipParent.visible=!1})))},a.prototype.onIconShowingChanged=function(t){var e=t.event,i=t.value;switch(e){case"isShowingChatFactionNotice":this.changeIconShowing(this.factionIcon,i),this.changeTipBtnShowing(this.factionTipBtn,i);break;case"isShowingChatMarryNotice":this.changeIconShowing(this.marryIcon,i),this.changeTipBtnShowing(this.marryTipBtn,i);break;case"isShowingChatWarbandNotice":this.changeIconShowing(this.warbandIcon,i),this.changeTipBtnShowing(this.warbandTipBtn,i)}},a.prototype.onMsg2ShowIcon=function(t){var e=!1;switch(t){case this.factionIcon:e=o.instance.getNoseeMessage(4),this._model.isShowingChatFactionNotice=e&&!WindowManager.instance.isOpened(276)&&i.faction.FactionModel.instance.hasFaction;break;case this.marryIcon:e=o.instance.getNoseeMessage(5),this._model.isShowingChatMarryNotice=e&&!WindowManager.instance.isOpened(513)&&i.marry.MarryModel.instance.isMarried;break;case this.warbandIcon:e=o.instance.getNoseeMessage(6),this._model.isShowingChatWarbandNotice=e&&!WindowManager.instance.isOpened(761)&&!!i.warband.WarbandModel.instance.info}},a.prototype.changeIconShowing=function(t,e){var i=this._curShowingIcons.indexOf(t);e!==(-1!==i)&&(e?(this._curShowingIcons.push(t),t.visible=!0,t.alpha=0,t.x=this._curShowingIcons.length*this.ICON_X_OFFSET):(this._curShowingIcons.splice(i,1),this.tweenIt(t,TweenJS.create(t).to({alpha:0},200).onComplete(function(){return t.visible=!1}))),this.arrangeIcons())},a.prototype.arrangeIcons=function(){var n=this,s=this._curShowingIcons.length,o=0;this._curShowingIcons.forEach(function(t,e){t.zOrder=s-e-1;var i=e*n.ICON_X_OFFSET;n.tweenIt(t,TweenJS.create(t).to({x:i,alpha:1},200)),o=Math.max(i+t.width)}),TweenJS.create(this.iconsParent).to({x:this._iconParentTotalWidth-o>>1},200).start()},a.prototype.changeTipBtnShowing=function(t,e){var i=this._curShowingBtns.indexOf(t);e!==(-1!==i)&&(e?(t.y=this.TIP_BTN_Y_INIT-this._curShowingBtns.length*this.TIP_BTN_Y_OFFSET,t.visible=!0,t.alpha=0,this._curShowingBtns.push(t),this.tweenIt(t,TweenJS.create(t).delay(100).to({alpha:1},200))):(this.tweenIt(t,TweenJS.create(t).to({alpha:0},200).onComplete(function(){return t.visible=!1})),this._curShowingBtns.splice(i,1)),this.arrangeTipBtns(t),this._curShowingBtns.length||(this._model.isShowingChatTip=!1))},a.prototype.arrangeTipBtns=function(n){var s=this;this._curShowingBtns.forEach(function(t,e){if(n!==t){var i=s.TIP_BTN_Y_INIT-e*s.TIP_BTN_Y_OFFSET;s.tweenIt(t,TweenJS.create(t).to({y:i,alpha:1},200))}});var t=this.TIP_BTN_Y_INIT-(this._curShowingBtns.length-1)*this.TIP_BTN_Y_OFFSET-this.ignoreTipBtn.height;this.tweenIt(this.ignoreTipBtn,TweenJS.create(this.ignoreTipBtn).to({y:t},200));var e=this._curShowingBtns[0]||this.ignoreTipBtn,i=this.TIP_BTN_Y_INIT+e.height-t+38;this.tweenIt(this.tipBg,TweenJS.create(this.tipBg).to({height:i},200))},a.prototype.tweenIt=function(t,e){var i=this._tweenMap.get(t);i&&i.stop(),this._tweenMap.set(t,e),e.start()},a.prototype.onTipBtnClick=function(t){if(this._model.isShowingChatTip){var e=t.currentTarget;if(-1!==this._curShowingBtns.indexOf(e))switch(e){case this.factionTipBtn:this._model.isShowingChatFactionNotice=!1,WindowManager.instance.open(276);break;case this.marryTipBtn:this._model.isShowingChatMarryNotice=!1,WindowManager.instance.open(513);break;case this.warbandTipBtn:this._model.isShowingChatWarbandNotice=!1,WindowManager.instance.open(761)}else e===this.ignoreTipBtn&&(this._model.isShowingChatWarbandNotice=!1,this._model.isShowingChatFactionNotice=!1,this._model.isShowingChatMarryNotice=!1)}},a.prototype.onIconClick=function(t){var e=t.currentTarget;-1!==this._curShowingIcons.indexOf(e)&&(this._model.isShowingChatTip=!0),t.stopPropagation()},a.prototype.onStageClick=function(){this._model.isShowingChatTip=!1},a.prototype.onMarryInfoUpdate=function(){i.marry.MarryModel.instance.isMarried||(this._model.isShowingChatMarryNotice=!1)},a.prototype.onPanelOpen=function(t){switch(t){case 276:this._model.isShowingChatFactionNotice=!1;break;case 513:this._model.isShowingChatMarryNotice=!1;break;case 761:this._model.isShowingChatWarbandNotice=!1}},t=a,e.BottomChatNoticePanel=t}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._isShowingChatFactionNotice=!1,t._isShowingChatWarbandNotice=!1,t._isShowingChatMarryNotice=!1,t._isShowingChatTip=!1,t}e=t.main||(t.main={}),n=t.core.AbstractModel,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance||(this._instance=new o)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isShowingChatTip",{get:function(){return this._isShowingChatTip},set:function(t){this.try2Set("isShowingChatTip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isShowingChatMarryNotice",{get:function(){return this._isShowingChatMarryNotice},set:function(t){this.try2Set("isShowingChatMarryNotice",t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isShowingChatWarbandNotice",{get:function(){return this._isShowingChatWarbandNotice},set:function(t){this.try2Set("isShowingChatWarbandNotice",t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isShowingChatFactionNotice",{get:function(){return this._isShowingChatFactionNotice},set:function(t){this.try2Set("isShowingChatFactionNotice",t)},enumerable:!0,configurable:!0}),s=o,e.BottomModel=s}(modules=modules||{}),function(i){var t,n,s,e,o,a,r,l,h,c,p,u;function d(t){var e=n.call(this)||this;return e.iconImg.skin="right_bottom/icon_"+(e._id=t)+".png",e.nameTxt.skin="right_bottom/"+a.instance.getCfgById(t)[8],59===e._id?e.regGuideSpr(43,e):61===e._id?e.regGuideSpr(57,e):60===e._id?e.regGuideSpr(68,e):148===e._id&&e.regGuideSpr(74,e),e.tipsBox.visible=!1,e.tipsBox1.visible=!1,e}t=i.main||(i.main={}),s=i.bag.BagModel,e=ui.EnterItemUI,o=Laya.Event,a=i.config.ActionOpenCfg,r=i.redPoint.RedPointCtrl,l=i.bottomTab.BottomTabCtrl,h=Laya.Sprite,c=i.adventure.AdventureModel,p=Laya.Point,n=e,__extends(d,n),d.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.on(o.CLICK,this,this.clickHandler),148===this._id&&this.onAutoGlobalEvt("ADVENTURE_HAS_NEW_EVENT_UPDATE",this,this.updateHasNewEvent),this.onAutoGlobalEvt("RESIZE_UI",this,this.setActionPreviewPos),this.onAutoGlobalEvt("ACTION_PREVIEW_RESIZE_UI",this,this.setActionPreviewPos),119===this._id&&(this.updateBox(),this.onAutoGlobalEvt("FAIRY_UPDATE",this,this.updateBox)),119===this._id&&(this.updateBox1(),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this,this.updateBox1),this.onAutoGlobalEvt("WARBAND_WARBOSS_HURT_DRAW_INFO_REPLY",this,this.updateBox1),Laya.timer.loop(1e3,this,this.updateBox1)),this.addRedPotListeners()},d.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(939==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(939))return void this.updateBox1()},d.prototype.closeTips=function(){null!=this._modelClipTween1&&(this._modelClipTween1.stop(),this._modelClipTween1=null),this.tipsBox1.visible=!1,this.tipsBox1.x=-157},d.prototype.updateBox1=function(){i.team_warfare.TeamWarfareModel.instance.isOpenWar()&&3===i.team_warfare.TeamWarfareModel.instance.getWarCopyState()&&i.team_warfare.TeamWarfareModel.instance.surplusTime&&i.team_warfare.TeamWarfareModel.instance.showTime+i.team_warfare.TeamWarfareModel.instance.tipsTime<GlobalData.serverTime?this._modelClipTween1||(this.tipsBox1.visible=!0,this.tipsBox1.x=-157,null!=this._modelClipTween1&&(this._modelClipTween1.stop(),this._modelClipTween1=null),this.updateBox(),this._modelClipTween1=TweenJS.create(this.tipsBox1).to({x:-177},200).yoyo(!0).repeat(Number.MAX_VALUE).start()):(this.closeTips(),this.updateBox())},d.prototype.updateBox=function(){var t=2==i.fairy.FairyModel.instance.sendState&&!this.tipsBox1.visible;this.tipsBox.visible=t,this.tipsBox.x=-130,null!=this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),t&&(this._modelClipTween=TweenJS.create(this.tipsBox).to({x:-150},200).yoyo(!0).repeat(Number.MAX_VALUE).start())},d.prototype.offEvt=function(){this.off(o.CLICK,this,this.clickHandler),r.instance.retireRedPoint(this.dotImg),n.prototype.offEvt.call(this)},d.prototype.onOpened=function(){n.prototype.onOpened.call(this),148===this._id&&(this.updateHasNewEvent(),c.instance.flyTarget=this),this.setActionPreviewPos()},d.prototype.setActionPreviewPos=function(){this.callLater(this.setPosActionPreview)},d.prototype.setPosActionPreview=function(){if(61===this._id){p.TEMP.setTo(67,27);var t=this.localToGlobal(p.TEMP,!0);i.action_preview.ActionPreviewModel.instance._posSprite.set(61,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(1,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(20,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(142,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(41,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(42,t)}else 59===this._id?(p.TEMP.setTo(67,27),t=this.localToGlobal(p.TEMP,!0),i.action_preview.ActionPreviewModel.instance._posSprite.set(59,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(21,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(22,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(23,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(24,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(25,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(109,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(43,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(63,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(219,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(220,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(221,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(222,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(223,t)):60===this._id?(p.TEMP.setTo(67,27),t=this.localToGlobal(p.TEMP,!0),i.action_preview.ActionPreviewModel.instance._posSprite.set(60,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(9,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(110,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(128,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(131,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(144,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(145,t)):119===this._id?(p.TEMP.setTo(67,27),t=this.localToGlobal(p.TEMP,!0),i.action_preview.ActionPreviewModel.instance._posSprite.set(119,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(120,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(129,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(145,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(165,t)):148===this._id?(p.TEMP.setTo(67,27),t=this.localToGlobal(p.TEMP,!0),i.action_preview.ActionPreviewModel.instance._posSprite.set(148,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(141,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(149,t)):158===this._id&&(p.TEMP.setTo(67,27),t=this.localToGlobal(p.TEMP,!0),i.action_preview.ActionPreviewModel.instance._posSprite.set(160,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(161,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(158,t),i.action_preview.ActionPreviewModel.instance._posSprite.set(158,t))},d.prototype.destroy=function(){this._con&&(this._con.destroy(!0),this._con=null),n.prototype.destroy.call(this),this._tween=null},d.prototype.close=function(){n.prototype.close.call(this),this._tween&&(this._tween.stop(),this._tween=null),null!=this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),this._con&&this._con.removeSelf(),c.instance.flyTarget=null,this.closeTips(),i.team_warfare.TeamWarfareModel.instance.showTime=GlobalData.serverTime,Laya.timer.clear(this,this.updateBox1)},d.prototype.clickHandler=function(){119===this._id&&(this.closeTips(),i.team_warfare.TeamWarfareModel.instance.showTime=GlobalData.serverTime),l.instance.openTabByFunc(this._id)},d.prototype.addRedPotListeners=function(){60===this._id?r.instance.registeRedPoint(this.dotImg,["exerciseRP","activityAllItemRP","resBackRP","lilianBackRP","dailyDemonRP"]):59===this._id?r.instance.registeRedPoint(this.dotImg,["netherWorldRP","nothingnessWorldRP","beastBossBxRP","beastBossWuXianCopyRP","beastBossCopyRP","bigTowerRP","dailyDungeonRP","runeCopyRP","teamBattleRP"]):61===this._id?r.instance.registeRedPoint(this.dotImg,["shenYuBossRP1","trahmanBossRP","singleBossRP","multiBossRP","threeWorldsRP","bossHomeRP","yunMengBossRP","spiritDungeonRP","foreignRP","foreignTaskRP","foreignBossComRP","foreignBossFameRP","forbiddenBossRP","divinatoryCardBossRP","outsideShowDungeonRP"]):119===this._id?r.instance.registeRedPoint(this.dotImg,["nineCopyRP","teamWarfareRP7","teamWarfareRP","teamWarfareRP1","teamWarfareRP2","teamWarfareRP3","teamWarfareRP4","teamWarfareRP5","windCloudRP","strongestMarryRP","strongestMarryRP1","strongestMarryRP2","arenaRP","ladderJoinAwardRP","fairyRP","tianTiRP","faerieDemonPKRP","fireContentionRP","fireContentionAchievementRP","marryArenaFightCountRP"]):148===this._id?r.instance.registeRedPoint(this.dotImg,["adventureRP","adventureShopRP"]):158===this._id&&r.instance.registeRedPoint(this.dotImg,["unionWarRP","unionWarRP1","unionWarRP2","unionWarRP3","factionBaozangListRP","mineBaozangListRP","helpBaozangListRP","factionCopyRP","factionHurtAwardRP","factionApplyJoinRP","factionPostApplyRP","factionSkillRP","factionDialRP"])},d.prototype.updateHasNewEvent=function(){var t=c.instance.hasNewEvent,e=!0;if(0==c.instance.yunLi&&s.instance.getItemCountById(20830001)<=0&&s.instance.getItemCountById(20840001)<=0&&s.instance.getItemCountById(20850001)<=0&&(e=!1),t&&e){if(!this._con){this._con=new h;var i=new Laya.Image("common/txtbg_mainui_jt_1.png");this._con.addChild(i);var n=new Laya.Text;n.font="SimHei",n.fontSize=22,n.color="#000000",n.width=i.width,n.align="center",n.height=i.height,n.valign="middle",n.text="触发新奇遇",this._con.addChild(n),this._con.y=7}this.addChild(this._con),this._con.x=-150,this._tween||(this._tween=TweenJS.create(this._con).to({x:-130},200).yoyo(!0).repeat(Number.MAX_VALUE).start())}else this._tween&&(this._tween.stop(),this._tween=null),this._con&&this._con.removeSelf()},u=d,t.EnterItem=u}(modules=modules||{}),function(s){var t,e,i,o,n,a;function r(){return null!==e&&e.apply(this,arguments)||this}t=s.main||(s.main={}),i=ui.GuaJiearningsUpItemUI,o=laya.maths.Point,n=s.sweeping_income.SweepingIncomeModel,e=i,__extends(r,e),r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateLv(),this.pos(CommonConfig.viewWidth/2,372),Laya.timer.once(1500,this,this.itemEffect)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SWEEPING_INCOME",this,this.updateLv)},r.prototype.updateLv=function(){this.coinTxt.text=n.instance.coinIncome+"/小时",this.expTxt.text=n.instance.exeIncome+"/小时",this.coinNextTxt.text=""+n.instance.coinIncomeNext,this.expNextTxt.text=""+n.instance.exeIncomeNext},r.prototype.itemEffect=function(){var t=this,e=s.action_preview.ActionPreviewModel.instance.getPosSprite(10000002);if(e){o.TEMP.setTo(e.x,e.y),LayerManager.instance.getLayerById(7).globalToLocal(o.TEMP);var i=o.TEMP.x,n=o.TEMP.y;this._tween&&this._tween.stop(),this._tween=TweenJS.create(this).to({x:i,y:n,scaleX:.1,scaleY:.1},600).onComplete(function(){t.visible=!1,s.vip_new.VipNewModel.instance.isUp&&(WindowManager.instance.open(392),s.vip_new.VipNewModel.instance.isUp=!1),t.destroy(!0)}).start()}else this.removeSelf(),this.destroy(!0)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),e.prototype.destroy.call(this,t)},a=r,t.GuaJiearningsUpItem=a}(modules=modules||{}),function(i){var t,n,e;function s(){return null!==n&&n.apply(this,arguments)||this}t=i.main||(i.main={}),n=ui.HuoQuItemUI,__extends(s,n),s.prototype.setOpenParam=function(t){if(n.prototype.setOpenParam.call(this,t),2==i.day_pay.DayPayModel.instance.giveState){if(t){this._date=t;var e=this._date[3];this.item1.dataSource=[e,1,0,null],this.nameText.text=CommonUtil.getNameByItemId(e)}}else this.close()},s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.huoQuBtn,this,this.huoQuBtnHandler)},s.prototype.huoQuBtnHandler=function(){2==i.day_pay.DayPayModel.instance.giveState&&(WindowManager.instance.open(145,this._date[2]-1),WindowManager.instance.close(124),WindowManager.instance.close(126))},e=s,t.HuoQuItemItem=e}(modules=modules||{}),function(l){!function(t){var s,e=l.common.CustomClip,i=(s=ui.LeftBottomItemUI,__extends(n,s),n.prototype.setFun=function(t,e){this._fun=t,this._isShowFun=e},n.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.regAutoRP(this.rpimg,this._propertyNames)},n.prototype.btnHandler=function(){this._itemEff=this.destroyElement(this._itemEff),this._fun&&this._fun.run()},n.prototype.showIcon=function(){var t=l.funcOpen.FuncOpenModel.instance.getFuncIsOpen(this._id),e=!this._isShowFun||this._isShowFun.run();this.show=t&&e},n.prototype.getIsOpen=function(){var t=l.funcOpen.FuncOpenModel.instance.getFuncIsOpen(this._id),e=!this._isShowFun||this._isShowFun.run();return t&&e},Object.defineProperty(n.prototype,"show",{set:function(t){this._isShow!=t&&(this._isShow=this.visible=t,this.relayoutEnters(),GlobalData.dispatcher.event("LEFT_BOTTON_UPDATE_UI"))},enumerable:!0,configurable:!0}),n.prototype.getIsShow=function(){return this._isShow},n.prototype.relayoutEnters=function(){this._isShow?(this._itemEff||(this._itemEff=this.createEff()),this.addChild(this._itemEff),this._itemEff.play(),this._itemEff.pos(this.btn.x,this.btn.y,!0)):this._itemEff=this.destroyElement(this._itemEff)},n.prototype.createEff=function(){var t=new e;return t.frameUrls=["left_bottom/eff_0.png","left_bottom/eff_2.png","left_bottom/eff_4.png","left_bottom/eff_6.png","left_bottom/eff_8.png","left_bottom/eff_10.png","left_bottom/eff_12.png","left_bottom/eff_14.png"],t.durationFrame=7,t.loop=!0,t.anchorX=t.anchorY=.5,t},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._itemEff=this.destroyElement(this._itemEff),this._fun&&this._fun.clear(),this._isShowFun&&this._isShowFun.clear(),s.prototype.destroy.call(this,t)},n.prototype.setActivitiTime=function(t){this._id=t,Laya.timer.clear(this,this.activityHandler);var e=0;922===this._id&&(e=l.fight_soul_buy.FightSoulBuyMoel.instance.endTm),e>=GlobalData.serverTime?(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.text.text=""},n.prototype.activityHandler=function(){var t=0;922===this._id&&(t=l.fight_soul_buy.FightSoulBuyMoel.instance.endTm),t>=GlobalData.serverTime?this.text.text=CommonUtil.timeStampDDHHMMToHHMMSS(t):this.text.text=""},n);function n(t,e,i){var n=s.call(this)||this;return n._propertyNames=[],t&&e&&i&&(n.btn.skin=t,n._id=e,n._propertyNames=i),n}t.LeftBottomItem=i;var o,a=(o=ui.LeftBottomItemUI,__extends(r,o),r.prototype.close=function(){Laya.timer.clear(this,this.activityHandler),o.prototype.close.call(this)},r.prototype.setActivitiTime=function(t){this._id=t,this.box1.visible=!0,Laya.timer.clear(this,this.activityHandler);var e=0;922===this._id?e=l.fight_soul_buy.FightSoulBuyMoel.instance.endTm:966===this._id?e=l.sky_book_buy.SkyBookBuyModel.instance.endTm:968===this._id?e=l.brahma_buy.BrahmaBuyModel.instance.endTm:989===this._id?e=l.send_q_coins.SendQCoinsModel.instance.endTime:-1===this._id&&(e=l.direct_ex.DirectExModel.instance.endTm),e>=GlobalData.serverTime?(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.text.text=""},r.prototype.activityHandler=function(){var t=0;922===this._id?t=l.fight_soul_buy.FightSoulBuyMoel.instance.endTm:966===this._id?t=l.sky_book_buy.SkyBookBuyModel.instance.endTm:968===this._id?t=l.brahma_buy.BrahmaBuyModel.instance.endTm:989===this._id&&(t=l.send_q_coins.SendQCoinsModel.instance.endTime),-1===this._id&&(t=l.direct_ex.DirectExModel.instance.endTm),t>=GlobalData.serverTime?this.text.text=CommonUtil.timeStampDDHHToHHMMSS(t):this.text.text=""},r);function r(){return o.call(this)||this}t.LeftBottomItem2=a}(l.main||(l.main={}))}(modules=modules||{}),function(t){var e,i;function n(){}e=t.main||(t.main={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),i=n,e.LeftBottomModel=i}(modules=modules||{}),function(o){var t,e;function i(){this._isCloseShouDong=!1,this._isCloseShouDongTTime=3e5,this._lastTime=GlobalData.serverTime,this._isshouci=!1,this._isshouciLv=!1,this._lastTime1=GlobalData.serverTime,this._isshouci1=!1,this._isshouciLv1=!1,this._kaiFuRankList=new Array,this._feiShengRankList=new Array,this._kaiFuTimeList=new Array,this._kaiFuTimeList1=new Array,this._feiShengTimeList=new Array,this._feiShengTimeList1=new Array;for(var t=o.config.BlendCfg.instance.getCfgById(56001)[1],e=0;e<t.length;e+=2){var i=t[e],n=t[e+1];i&&n&&(this._kaiFuRankList[i]=n)}t=o.config.BlendCfg.instance.getCfgById(56002)[1];for(e=0;e<t.length;e+=2){i=t[e],n=t[e+1];i&&n&&(this._feiShengRankList[i]=n)}this._kaiFuTimeList=o.config.BlendCfg.instance.getCfgById(56003)[1],this._feiShengTimeList=o.config.BlendCfg.instance.getCfgById(56004)[1],this._kaiFuTimeList1=o.config.BlendCfg.instance.getCfgById(56005)[1],this._feiShengTimeList1=o.config.BlendCfg.instance.getCfgById(56006)[1]}t=o.main||(o.main={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getZhanLiByType=function(t,e){var i=0;return 0==t?i=(i=this._kaiFuRankList[e])||0:1==t&&(i=(i=this._feiShengRankList[e])||0),i},i.prototype.getTimeList=function(t){var e=[3e3,2e4,6e5];if(0==t){var i=o.sprint_rank.SprintRankModel.instance.openState,n=o.sprint_rank.SprintRankModel.instance.restTm,s=o.soaring_rank.SoaringRankModel.instance.endFlag;o.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()&&1==i&&0!=n&&n>=GlobalData.serverTime?e=this._kaiFuTimeList?this._kaiFuTimeList:[3e3,2e4,6e5]:o.funcOpen.FuncOpenModel.instance.getFuncIsOpen(164)&&0==s&&(e=this._feiShengTimeList?this._feiShengTimeList:[1500,1e4,3e5])}else 1==t&&(i=o.sprint_rank.SprintRankModel.instance.openState,n=o.sprint_rank.SprintRankModel.instance.restTm,s=o.soaring_rank.SoaringRankModel.instance.endFlag,o.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()&&1==i&&0!=n&&n>=GlobalData.serverTime?e=this._kaiFuTimeList1?this._kaiFuTimeList1:[3e3,2e4,6e5]:o.funcOpen.FuncOpenModel.instance.getFuncIsOpen(164)&&0==s&&(e=this._feiShengTimeList1?this._feiShengTimeList1:[1500,1e4,3e5]));return e},i.prototype.closeTipsShouDongHar=function(){var t=this;this._isCloseShouDong||(this._isCloseShouDong=!0,Laya.timer.once(this._isCloseShouDongTTime,this,function(){t._isCloseShouDong=!1}))},i.prototype.getState=function(){var t=!1,e=o.sprint_rank.SprintRankModel.instance.openState,i=o.sprint_rank.SprintRankModel.instance.restTm,n=o.soaring_rank.SoaringRankModel.instance.endFlag;return o.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()&&1==e&&0!=i&&i>=GlobalData.serverTime?t=!0:o.funcOpen.FuncOpenModel.instance.getFuncIsOpen(164)&&0==n&&(t=!0),t},e=i,t.RightTopModel=e}(modules=modules||{}),function(t){var e,i,n,o,s;function a(){var t=i.call(this)||this;return t.Initialize(),t}e=t.main||(t.main={}),n=t.core.BaseCtrl,o=t.config.BlendCfg,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){},a.prototype.Initialize=function(){this._tab1={};for(var t=o.instance.getCfgById(39001)[1],e=1,i=0,n=0;n<t.length;n++){var s=t[n];1==e&&(this._tab1[1]||(this._tab1[1]=new Array),this._tab1[1][s]||(i=s,this._tab1[1][i]=new Array)),this._tab1[1][i].push(s),e=5==++e?1:e}for(t=o.instance.getCfgById(39002)[1],e=1,n=i=0;n<t.length;n++)s=t[n],1==e&&(this._tab1[2]||(this._tab1[2]=new Array),this._tab1[2][s]||(i=s,this._tab1[2][i]=new Array)),this._tab1[2][i].push(s),e=5==++e?1:e},a.prototype.getDateByPartAndLevel=function(t,e){return this._tab1[t][e]},s=a,e.tipDateCtrl=s}(modules=modules||{}),function(o){var e,i,t,n,s;function a(){return null!==i&&i.apply(this,arguments)||this}e=o.nine||(o.nine={}),t=o.common.ProgressBarCtrl,n=o.config.MonsterResCfg,i=ui.NineRBBossItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new t(this.proCtrlImg,155)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_NINE_SCENE_INFO",this,this.setText),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateState),this.onAutoGlobalEvt("NINE_COPY_BOSS_LIST_UPDATE",this,this.updateXz)},a.prototype.updateXz=function(t){this._bossId!=t&&(this.xuanZeImg.visible=!1)},a.prototype.setData=function(t){if(i.prototype.setData.call(this,t),t){this._bossId=t,this.nameText.text=n.instance.getMonsterName(this._bossId);var e=o.config.MonsterCfg.instance.getMonsterById(this._bossId)[1];this.nameText.color=28===e?"#ea8706":"#168a17",this.proImg.visible=!0,this.valueText.visible=!0,this.remainTime.visible=!1,this._proCtrl.maxValue=1e4,this._proCtrl.value=1e4,this.valueText.text="100%",this.updateState()}},a.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectShow()},a.prototype.selectShow=function(){this.xuanZeImg.visible=this.selected},a.prototype.setText=function(){if(28===o.config.MonsterCfg.instance.getMonsterById(this._bossId)[1]){var t=o.config.SceneCopyNineBOSSCfg.instance.getCfgById(this._bossId);t&&0===t[4]?this.remainTime.text="再进入"+(0===e.NineModel.instance.haveNum?t[5]:e.NineModel.instance.haveNum)+"名玩家后刷新":this.remainTime.text="被击败玩家达到"+(0===e.NineModel.instance.killNum?t[5]:e.NineModel.instance.killNum)+"个刷新"}},a.prototype.updateState=function(){var t=!0,e=0,i=o.dungeon.DungeonModel.instance.getBossInfoById(this._bossId);if(i){var n=i[2];t=n[0],e=n[1]}this.valueText.visible=this.proImg.visible=this.proCtrlImg.visible=!t;var s=o.config.MonsterCfg.instance.getMonsterById(this._bossId)[1];this.remainTime.visible=t&&28===s,this.setText(),t?(this._proCtrl.maxValue=1e4,this._proCtrl.value=1e4,this.valueText.text="100%"):(this._proCtrl.maxValue=1e4,this._proCtrl.value=1e4*e,this.valueText.text=(100*e>>0)+"%"),this.selectShow()},a.prototype.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t),this._proCtrl.destroy(),this._proCtrl=null},s=a,e.NineRbBossItem=s}(modules=modules||{}),function(n){var t,s,e,i;function o(){return s.call(this)||this}t=n.nine||(n.nine={}),e=ui.NineRBPlayerItemUI,s=e,__extends(o,s),o.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoGlobalEvt("NINE_COPY_PLAYER_DEADED",this,this.updateCopyPlayerDeaded)},o.prototype.updateCopyPlayerDeaded=function(t){(PlayerModel.instance.actorId==t||this._data&&this._data[5][0]==t)&&(this.isSelect.visible=!1)},o.prototype.setSelected=function(t){s.prototype.setSelected.call(this,t),this.isSelect.visible=this.selected},o.prototype.clickHandler=function(){s.prototype.clickHandler.call(this),GlobalData.dispatcher.event("CANCEL_AUTO",[1]);var t=this._data,e=t[5][0],i=GameCenter.instance.getRole(e);i&&1024==i.property.get("status")?n.notice.SystemNoticeManager.instance.addNotice("玩家已离开攻击范围",!0):(this.isSelect.visible=this.selected,PlayerModel.instance.selectTarget(2,t[5][0]))},o.prototype.setData=function(t){s.prototype.setData.call(this,t);var e=t;this.nameTxt.text=e[5][5];var i=e[5][13]/PlayerModel.instance.fight;3<=i?(this.gradeTxt.text="超强",this.gradeTxt.color=CommonUtil.getColorByQuality(4)):1.5<=i?(this.gradeTxt.text="强者",this.gradeTxt.color=CommonUtil.getColorByQuality(3)):.8<=i?(this.gradeTxt.text="均等",this.gradeTxt.color=CommonUtil.getColorByQuality(2)):(this.gradeTxt.text="弱小",this.gradeTxt.color=CommonUtil.getColorByQuality(1))},i=o,t.NineRBPlayerItem=i}(modules=modules||{}),function(t){var e,s,i,o,n;function a(){return s.call(this)||this}e=t.nine||(t.nine={}),i=ui.NineResultItemUI,o=t.config.SceneCopyNineCfg,s=i,__extends(a,s),a.prototype.setData=function(t){s.prototype.setData.call(this,t);var e=t,i=e[4];1===i?this.rankImg.skin="common/zs_tongyong_7.png":2===i?this.rankImg.skin="common/zs_tongyong_8.png":3===i&&(this.rankImg.skin="common/zs_tongyong_9.png"),this.nameTxt.text=e[1];var n=o.instance.getCfgByLevel(9)[4][i-1][1][0];this.item.dataSource=[n[0],n[1],0,null]},n=a,e.NineResultItem=n}(modules=modules||{}),function(t){var e,a,i,n;function s(){return a.call(this)||this}e=t.nine||(t.nine={}),i=ui.NineTopAwardItemUI,a=i,__extends(s,a),s.prototype.setData=function(t){a.prototype.setData.call(this,t);var e=t[0];1===e?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===e?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===e?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):4===e?(this.rankImg.visible=!1,this.rankTxt.visible=!0,this.rankTxt.text="4-10名"):5===e&&(this.rankImg.visible=!1,this.rankTxt.visible=!0,this.rankTxt.text="11名后");for(var i=t[1][1],n=[this.item3,this.item2,this.item1,this.item0],s=0;s<4;s++){var o=i.length-s-1;i[o]?(n[s].visible=!0,n[s].dataSource=[i[o][0],i[o][1],0,null]):n[s].visible=!1}},n=s,e.NineTopAwardItem=n}(modules=modules||{}),function(i){var e,t,n,s,o,a,r,l,h;function c(){return t.call(this)||this}e=i.notice||(i.notice={}),n=ui.BossReviveUI,s=Laya.Event,o=i.config.MonsterResCfg,a=i.config.SceneMultiBossCfg,r=i.config.SceneCrossBossCfg,l=i.config.SceneHomeBossCfg,t=n,__extends(c,t),c.prototype.initialize=function(){t.prototype.initialize.call(this),this.right=20,this.bottom=200},c.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.gotoBtn.on(s.CLICK,this,this.gotoHandler),this.closeBtn1.on(s.CLICK,this,this.closeHandler)},c.prototype.offEvt=function(){t.prototype.offEvt.call(this),this.gotoBtn.off(s.CLICK,this,this.gotoHandler),this.closeBtn1.off(s.CLICK,this,this.closeHandler)},c.prototype.gotoHandler=function(){if(this._bossId){if(o.instance.getCfgById(this._bossId))if(a.instance.getCfgByBossId(this._bossId))WindowManager.instance.open(40,this._bossId);else if(r.instance.getCfgByBossId(this._bossId))WindowManager.instance.open(75);else if(l.instance.getCfgByBossId(this._bossId)){var t=[];t[0]=l.instance.getCfgByBossId(this._bossId)[1]-1,t[1]=this._bossId,WindowManager.instance.open(80,t)}else i.config.SceneCopyInfiniteCfg.instance.getCfgByBossId(this._bossId)||i.config.SceneCopyMysticalCfg.instance.getCfgByBossId(this._bossId)?WindowManager.instance.open(599):i.config.SceneBrahmaBossCfg.instance.getCfgByOcc(this._bossId)&&WindowManager.instance.open(1474,this._bossId);else WindowManager.instance.open(599);e.BossReviveManager.instance.passAll()}},c.prototype.closeHandler=function(){e.BossReviveManager.instance.passOne()},c.prototype.setBoss=function(t){this._bossId=t;var e=o.instance.getCfgById(t);e?(this.headImg.skin="assets/icon/monster/"+e[3]+".png",this.nameTxt.text=o.instance.getMonsterName(t),this.gotoBtn.label="前往击败"):(this.headImg.skin="assets/icon/ui/scene_copy_mystical/"+t+".png",this.nameTxt.text=i.config.NpcCfg.instance.getCfgById(t)[4],this.gotoBtn.label="前往采集")},h=c,e.BossRevivePanel=h}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h;function c(){var t=i.call(this)||this;return t._broadcasts=new Array,t._isPlaying=!1,t.centerX=.5,t.top=150,t._bg=new a("common/txtbg_mainui_pmd.png"),t._bg.sizeGrid="20,20,14,14",t.addChild(t._bg),t._bg.width=640,t._bg.height=40,t.width=t._bg.width,t.height=t._bg.height,t._html=new r,t.addChild(t._html),t._html.style.height=24,t._html.pos(46,8,!0),t._html.style.wordWrap=!1,CommonUtil.setHTMLPro(t._html,"#FFFFFF","SimHei",22),t.maskImg=new a("common_sg/image_common_zz.png"),t.maskImg.width=640,t.maskImg.height=40,t.maskImg.sizeGrid="1,1,1,1",t.mask=t.maskImg,t._effect=new s,t.addChild(t._effect),t.anchorX=t.anchorY=.5,t.on(l.DISPLAY,t,t.displayHandler),t.on(l.UNDISPLAY,t,t.undisplayHandler),t}e=t.notice||(t.notice={}),n=t.chat.ChatUtil,s=Laya.Clip,o=Laya.Component,a=Laya.Image,r=Laya.HTMLDivElement,l=Laya.Event,i=o,__extends(c,i),c.prototype.displayHandler=function(){this._html.on(l.LINK,this,this.linkHandler)},c.prototype.undisplayHandler=function(){this._html.off(l.LINK,this,this.linkHandler)},c.prototype.linkHandler=function(t){n.linkHandler(t)},c.prototype.setTxt=function(t){this._html.innerHTML=t},c.prototype.addBroadcast=function(t){this._broadcasts.push(t),this._isPlaying||this.tween()},c.prototype.tween=function(){this._isPlaying=!0,this._html.pos(640,this._html.y);var t=this._broadcasts.shift();this.setTxt(t),TweenJS.create(this._html).to({x:20},600).chain(TweenJS.create(this._html).to({x:0-this._html.contextWidth},5e3).chain(TweenJS.create(this._html).delay(0).onComplete(this.delayHandler.bind(this))).delay(2e3)).start()},c.prototype.delayHandler=function(){0<this._broadcasts.length?this.tween():(this._isPlaying=!1,this.removeSelf())},h=c,e.ServerBroadcastPanel=h}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){var t=i.call(this)||this;return t.mouseEnabled=!1,t._bg=new n,t._bg.skin="common_sg/txtbg_common_tipsbg.png",t._bg.sizeGrid="10,90,10,90",t.addChild(t._bg),t._txt=new o,t.addChild(t._txt),t._txt.bold=!0,t._warnImg=new n("common/icon_tongyong_9.png"),t.addChild(t._warnImg),t}e=t.notice||(t.notice={}),n=Laya.Image,s=Laya.Sprite,o=Laya.Text,i=s,__extends(r,i),r.prototype.setTxt=function(t,e,i){this._txt.text=t,this._txt.color=e,this._txt.width=this._txt.textWidth,this._txt.height=this._txt.textHeight,(this._warnImg.visible=i)?(this.width=this._bg.width=this._warnImg.width+4+this._txt.width+60,this.height=this._bg.height=this._txt.height+20,this._warnImg.pos(30,4,!0),this._txt.pos(73,10,!0)):(this.width=this._bg.width=this._txt.width+60,this.height=this._bg.height=this._txt.height+20,this._txt.pos(30,10,!0))},a=r,e.SystemNoticePanel=a}(modules=modules||{}),function(t){var e,a,i;function n(){this.strArr=[],this.isAdd=!0,this.isFirst=!0,this._info=[],this._infoIsTip=[],this.continueTime=a.instance.getCfgById(83002)[1][1],this.timeArr={};for(var t=a.instance.getCfgById(83004)[1],e=0;e<t.length;e+=4){var i=t[e],n=t[e+1],s=t[e+2],o=t[e+3];this.timeArr[i]=[n,s,o]}}e=t.other_player_online||(t.other_player_online={}),a=t.config.BlendCfg,Object.defineProperty(n,"instance",{get:function(){return n._instance=n._instance||new n},enumerable:!0,configurable:!0}),n.prototype.pushData=function(t){var e=t[0];this._info[e-1]=t,this._infoIsTip[e-1]=!0,2===e&&WindowManager.instance.open(699),this._info[0]&&this._info[4]&&this._info[0][1]===this._info[4][1]&&(this._info[0]=null),this.isAdd&&(this.isAdd=!1,Laya.timer.once(1e3,this,this.startTween))},n.prototype.startTween=function(){var n=this;console.log("最强提示 动画开始~~~~~~~~~~~~"),this.isAdd=!0,this._info.forEach(function(t){if(t){var e=t[0];if(n._infoIsTip[e-1]&&2!=e){var i=function(t){0===n.strArr.length?(n.strArr.push(t),WindowManager.instance.open(t)):n.strArr.push(t)};n._infoIsTip[e-1]=!1,1===e?i(669):3===e?i(1301):4===e&&i(1454)}}})},n.prototype.nextWin=function(){0<this.strArr.length&&this.strArr.shift(),this.strArr&&0<this.strArr.length&&(console.log("弹出下一个"),WindowManager.instance.open(this.strArr[0]))},n.prototype.getInfoByType=function(t){return this._info[t]},i=n,e.OtherPlayerOnlineModel=i}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._nameStr=new Array,t._nameStr[3]="珍品",t._nameStr[4]="极品",t._nameStr[5]="绝品",t._nameStr[6]="典藏",t}e=t.pet||(t.pet={}),i=ui.ImmortalsHuanHuaItemUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt(this._evtType,this,this.updateRP)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._typeNum=t,this.btn.label=""+this._nameStr[this._typeNum],this.updateRP())},s.prototype.updateRP=function(){this.rpImg.visible=this._model.qualityType(this._typeNum)},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.btn.selected=this.selected},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._nameStr.length=0,this._nameStr=null,this._model=null,i.prototype.destroy.call(this,t)},n=s,e.CircleOptionsItem=n}(modules=modules||{}),function(t){var e,c,i,p,u,d,m,n;function s(){return null!==c&&c.apply(this,arguments)||this}e=t.pet||(t.pet={}),i=ui.SbItemUI,p=t.config.ExteriorCfg,u=t.bag.BagModel,d=t.config.PetFazhenCfg,m=t.pet.PetModel,c=i,__extends(s,c),s.prototype.setData=function(t){c.prototype.setData.call(this,t),this._showId=t;var e=0,i=m.instance.huanhuaList.get(this._showId);i&&(e=i[1]);var n=m.instance.fazhenId;this.usingTxt.visible=n===this._showId;var s=d.instance.getDataByIdLvField(this._showId,e,1),o=d.instance.has(this._showId,e+1),a=p.instance.getCfgById(this._showId),r=s[0],l=s[1];this.wayTxt.color="#F4F1BB",this.wayTxt.fontSize=18,this.nameTxt.color=CommonUtil.getColorByQuality(a[4]),0==e?(this.wayTxt.text="未激活",this.maskImg.visible=!0,u.instance.getItemCountById(r)>=l?(this.wayTxt.text="可激活",this.wayTxt.color="#00ad35",this.qualityImg.gray=this.icon.gray=!1,this.dotImg.visible=!0):(this.qualityImg.gray=this.icon.gray=!0,this.wayTxt.text=this.getWay(this._showId),this.dotImg.visible=!1)):(this.maskImg.visible=!1,this.qualityImg.gray=this.icon.gray=!1,this.wayTxt.text=e+"阶",this.wayTxt.fontSize=20,this.dotImg.visible=!!o&&u.instance.getItemCountById(r)>=l),this.nameTxt.text=a[2],this.nameTxt.color=CommonUtil.getColorByQuality(a[4]),this.icon.skin="assets/icon/skin/"+a[3]+".png",this.qualityImg.skin="common/dt_tongyong_"+a[4]+".png";var h=a[11];0!=h&&h?(this.gradeImg.skin="common/xiyou"+h+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1},s.prototype.getWay=function(t){for(var e=d.instance.getDataByIdLvField(t,Number.MIN_VALUE,2),i="",n=0,s=e.length;n<s&&"#"!==e[n];n++)i+=e[n];return i},s.prototype.setSelected=function(t){c.prototype.setSelected.call(this,t),this.frameImg.visible=t},n=s,e.MPItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._evtType="FZHUANHUA_UPDATA",t._model=e.PetModel.instance,t}e=t.pet||(t.pet={}),i=e.CircleOptionsItem,__extends(s,i),n=s,e.PetCircleOptionsItem=n}(modules=modules||{}),function(t){var a,r,l,h,e;function i(){return r.call(this)||this}a=t.player||(t.player={}),l=t.common.AttrUtil,h=t.config.AttrItemCfg,r=ui.PlayerAttrItemUI,__extends(i,r),i.prototype.initialize=function(){r.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",24)},i.prototype.setData=function(e){r.prototype.setData.call(this,e);var t=a.PlayerModel.instance.playerTotolAttrs,i=l.getAttrByType(e,t),n=h.instance.getCfgById(e),s=i?i[1]:0;this.nameText.text="【"+n[1]+"】",this.numText.text=""+(n[2]?l.formatFloatNum(s)+"%":Math.round(s));var o=""+n[4];try{this.StatementHTML.innerHTML=o||""}catch(t){console.log(e+"的属性说明html格式错误!!!")}},e=i,a.PlayerAttrItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.player||(t.player={}),i=ui.PlayerAttrItem1UI,__extends(s,i),s.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=t[5];this.img.visible=0!=t[0],this.nameText.text=t[1],this.numText.text=t[2],this.img.skin=1===e?"":t[3],this.img1.skin=t[4],this.img.x=26,this.img.centerY=0,this.img1.x=135,1===e?this.img1.size(220,35):2===e?(this.img.size(136*.7,50.4),this.img1.size(259,44.8)):3===e?(this.img.size(107.8,56),this.img1.size(350,44.8)):4===e?(this.img1.size(220,35),this.img.size(80,44)):7===e?(this.img.size(137*.7,71*.7),this.img1.size(259,44.8)):5===e?(this.img.size(22,10),this.img1.size(180,26)):6===e?(this.img.size(22,21),this.img1.size(180,26)):8===e&&(this.img.size(107.8,56),this.img1.size(350,44.8)),this.img.right=0},n=s,e.PlayerAttrItem1=n}(modules=modules||{}),function(e){var n,i,s,t;function o(){return i.call(this)||this}n=e.player_title||(e.player_title={}),s=e.notice.SystemNoticeManager,i=ui.PlayerTitleChatItemUI,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("PLAYER_TITLE_UPDATE",this,this.UpdateUI),this.onAutoClick(this.BGImg,this,this.setSelectedHarl)},o.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._designationDate=t,this.UpdateUI())},o.prototype.setSelectedHarl=function(){var t=this._designationDate[0];this._designationProtocolsDate=n.PlayerTitleModel.instance.AllDate[t],this._designationProtocolsDate&&(3<=this._designationProtocolsDate[1]?n.PlayerTitleModel.instance.nowChatId!=t?e.chat.ChatCtrl.instance.selectChatDesignation(t):e.chat.ChatCtrl.instance.selectChatDesignation(0):s.instance.addNotice("称号激活后才能在聊天栏展示",!0))},o.prototype.UpdateUI=function(){var t=this._designationDate[2],e=this._designationDate[0];this.playerTitleImg.skin=1e7<=e?"assets/icon/ui/designation_special/"+n.PlayerTitleModel.instance.getSpecialTitleSrcByCfgId(e)+".png":"assets/icon/ui/designation/"+t+".png",this._designationProtocolsDate=n.PlayerTitleModel.instance.AllDate[e];var i=this._designationProtocolsDate[1];this.isJHImg.visible=i<3,this.jXImg.visible=n.PlayerTitleModel.instance.nowChatId===(1e7<=e&&n.PlayerTitleModel.instance.AllDate[e][3]||e)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._designationDate=null,this._designationProtocolsDate=null,i.prototype.destroy.call(this,t)},t=o,n.PlayerTitleChatItem=t}(modules=modules||{}),function(f){var p,e,g,t,h,i;function n(){var t=e.call(this)||this;return t.isOpen=!1,t._isShengJie=!1,t._hight=t.height,t}p=f.player_title||(f.player_title={}),g=f.config.DesignationRefineCfg,t=f.common.CustomClip,h=f.notice.SystemNoticeManager,e=ui.PlayerTitleItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._attrNameTxts=[this.nameText1,this.nameText2,this.nameText3,this.nameText4,this.nameText5,this.nameText6,this.nameText7,this.nameText8],this._attrTxts=[this.valueText1,this.valueText2,this.valueText3,this.valueText4,this.valueText5,this.valueText6,this.valueText7,this.valueText8],this._upAttrTxts=[this.upText1,this.upText2,this.upText3,this.upText4,this.upText5,this.upText6,this.upText7,this.upText8],this._arrowImgs=[this.upImg1,this.upImg2,this.upImg3,this.upImg4,this.upImg5,this.upImg6,this.upImg7,this.upImg8],this._nameTextArry=[this.nameText1,this.valueText1,this.nameText2,this.valueText2,this.nameText3,this.valueText3,this.nameText4,this.valueText4,this.nameText5,this.valueText5,this.nameText6,this.valueText6,this.nameText7,this.valueText7,this.nameText8,this.valueText8],this._challengeClip=t.create("assets/effect/btn_light.atlas","btn_light",16),this._challengeClip.setProperty(this,this.AllBtn.x-6,this.AllBtn.y-8),this._challengeClip1=t.create("assets/effect/btn_light.atlas","btn_light",16),this._challengeClip1.setProperty(this.jinJiebtnBox,this.jinJiebtn.x-6,this.jinJiebtn.y-8,.8),CommonUtil.setHTMLPro(this.moneyText,"#2d1a1a","SimHei",30)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.OpenBtn,this,this.OpenBtnHandler),this.onAutoClick(this.AllBtn,this,this.AllBtnHandler),this.onAutoClick(this.jinJiebtn,this,this.jinJiebtnHandler),this.onAutoGlobalEvt("PLAYER_TITLE_UPDATE",this,this.UpdateUI),this.onAutoGlobalEvt("PLAYER_TITLE_OPENUPDATE_CHANG",this,this.showUI)},n.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._challengeClip=this.destroyElement(this._challengeClip),this._challengeClip1=this.destroyElement(this._challengeClip1),e.prototype.destroy.call(this,t)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this.isOpen=!1,this.OpenBtn.skin="common/btn_common_arrow_sjt4.png",this.height=this._hight,this.jinJiebtnBox.visible=this.jieBox.visible=this.shengJiebox.visible=this.bonusesBox.visible=!1,this.isJHImg.height=this.height,t&&(this._designationDate=t,this.UpdateUI(),this.height=this._hight,this.isJHImg.height=this.height,this.BGImg.height=this.height)},n.prototype.OpenBtnHandler=function(){var t=this._designationDate[6],e=this._designationDate[0];t||0!=t.length?GlobalData.dispatcher.event("PLAYER_TITLE_OPENUPDATE_CHANG",[e]):h.instance.addNotice("无属性加成或配置出错",!0)},n.prototype.showUpArr=function(){if(this.isOpen&&this._isShengJie){var t=this._designationProtocolsDate[5],e=this._designationProtocolsDate[1],i=this._designationDate[0],n=20117===i,s=g.instance.getMaxLevelByPart(i);t=s<t?s:t,this.jieClip.value=1==e||2==e?"0":""+t;var o=void 0,a=void 0,r=g.instance.getDateByPartAndLevel(i,t),l=g.instance.getDateByPartAndLevel(i,t+1);r&&(o=[r[0],r[1],r[2],r[3],r[4],r[5]]),l&&(a=[l[0],l[1],l[2],l[3],l[4],l[5]]),1===t&&(1==e||2==e?a[3]=this._designationDate[5]:o[3]=this._designationDate[5]),f.common.AttrUtil.setAttrTxts(o,a,this._attrNameTxts,this._attrTxts,this._arrowImgs,this._upAttrTxts,3);var h=g.instance.getDateByPartAndLevel(i,1)[2],c=o[5],p=n?0:h[0],u=n?0:h[1],d=n?PlayerModel.instance.renQiNum:f.bag.BagModel.instance.getItemCountById(p);n&&(u=c),this._challengeClip1.stop(),this._challengeClip1.visible=!1,n||(this.huoBiImg.skin=CommonUtil.getIconById(p)),this.huoBiImg.visible=!n&&t<s;var m="#ff3e3e";u<=d&&(m="#2d1a1a",t<s&&1!=e&&2!=e&&(this._challengeClip1.play(),this._challengeClip1.visible=!0)),this.moneyText.innerHTML=n?"人气值:<span style='color:"+m+";'>"+d+"/"+u+"</span> ":"<span style='color:"+m+";'>"+d+"/"+u+"</span> ",n?CommonUtil.adaptationImgAndText([[this.moneyText,5,0]],this.shengJiebox.width,0,"center",0):CommonUtil.adaptationImgAndText([[this.huoBiImg,2,0],[this.moneyText,5,0]],this.shengJiebox.width,0,"center",0)}},n.prototype.showUI=function(t){var e=this._designationDate[0];this.isOpen=e===t&&!this.isOpen,this.setUI(),e===t&&Laya.timer.callLater(this,function(){GlobalData.dispatcher.event("PLAYER_TITLE_OPENUPDATE")})},n.prototype.setUI=function(){var t=this._designationProtocolsDate[1],e=this._designationProtocolsDate[5],i=this._designationDate[6];if(this.isOpen){this.bonusesBox.visible=!0,this.OpenBtn.skin="common/btn_common_arrow_sjt3.png";var n=i.length/2;n=Math.round(n);var s=Math.round(n/2),o=void 0,a=void 0;if(0==s?s=1:2*s<n&&(s+=1),a=o=50*s+this.biaoTiBox.height,this._isShengJie){if(this.jieBox.visible=!0,this.arrBox.y=95,a=o+=this.jieBox.height,this._isShengJie&&1!=t&&2!=t){var r=this._designationDate[0],l=g.instance.getMaxLevelByPart(r);l<=(e=l<e?l:e)?(this.maxText.visible=!0,this.shengJiebox.visible=!0,this.huoBiImg.visible=this.moneyText.visible=this.jinJiebtnBox.visible=!1,o+=this.shengJiebox.height):(this.maxText.visible=!1,this.shengJiebox.visible=!0,this.huoBiImg.visible=this.moneyText.visible=this.jinJiebtnBox.visible=!0,o+=this.jinJiebtnBox.height+this.shengJiebox.height)}else this.jinJiebtnBox.visible=this.shengJiebox.visible=!1;this.height=this._hight+o,this.shengJiebox.y=a,this.jinJiebtnBox.y=this.shengJiebox.y+this.shengJiebox.height}else this.shengJiebox.visible=this.jinJiebtnBox.visible=this.jieBox.visible=!1,this.height=this._hight+o,this.arrBox.y=45}else this.OpenBtn.skin="common/btn_common_arrow_sjt4.png",this.height=this._hight,this.arrBox.y=45,this.jinJiebtnBox.visible=this.jieBox.visible=this.shengJiebox.visible=this.bonusesBox.visible=!1;this.isJHImg.height=this.height,this.BGImg.height=this.height,this._isShengJie?this.showUpArr():this.setArr(i)},n.prototype.setArr=function(t){for(var e=0;e<this._upAttrTxts.length;e++){var i=this._upAttrTxts[e],n=this._arrowImgs[e];i&&(i.visible=!1),n&&(n.visible=!1)}if(t){for(e=0;e<this._nameTextArry.length;e++)(i=this._nameTextArry[e]).visible=!1;for(e=0;e<t.length;e++)i=t[e],this._nameTextArry[e]&&(this._nameTextArry[e].text=i,this._nameTextArry[e].visible=!0)}},n.prototype.jinJiebtnHandler=function(){var t=this._designationProtocolsDate[1];if(1!==t&&2!==t){var e=this._designationDate[0],i=20117===e,n=this._designationProtocolsDate[5],s=g.instance.getDateByPartAndLevel(e,n);if(s){var o=s[2],a=s[5],r=i?0:o[0],l=i?0:o[1];i&&(l=a),l<=(i?PlayerModel.instance.renQiNum:f.bag.BagModel.instance.getItemCountById(r))?p.PlayerTitleCtrl.instance.RefineDesignation(e):i?h.instance.addNotice("人气值不足，不能升级",!0):f.bag.BagUtil.openLackPropAlert(r,1)}}else h.instance.addNotice("称号未激活",!0)},n.prototype.AllBtnHandler=function(){if(this._designationProtocolsDate){var t=this._designationProtocolsDate[1],e=this._designationDate[0],i=this._designationDate[10];switch(t){case 1:i?h.instance.addNotice(i,!0):h.instance.addNotice("条件不满足",!0);break;case 2:p.PlayerTitleCtrl.instance.ActiveDesignation(e);break;case 3:p.PlayerTitleCtrl.instance.WearDesignation(e);break;case 4:p.PlayerTitleCtrl.instance.TakeoffDesignation(e)}}else h.instance.addNotice("无法获取称号数据",!0)},n.prototype.UpdateUI=function(){var t=this._designationDate[2],e=this._designationDate[10],i=this._designationDate[11],n=this._designationDate[7],s=this._designationDate[0];if(this._isShengJie=g.instance.isShengJie(s),this.playerTitleImg.skin=1e7<=s?"assets/icon/ui/designation_special/"+p.PlayerTitleModel.instance.getSpecialTitleSrcByCfgId(s)+".png":"assets/icon/ui/designation/"+t+".png",this._designationProtocolsDate=p.PlayerTitleModel.instance.AllDate[s],!this._designationProtocolsDate)return CommonUtil.setHTMLPro(this.jinDuHTML,"#1f304d","SimHei",22),this.jinDuHTML.innerHTML="激活条件:<span style='color:#ff3e3e;'>"+e+"</span>",void(this.isJHImg.visible=!0);var o=this._designationProtocolsDate[1],a=this._designationProtocolsDate[3],r=this._designationProtocolsDate[4],l=this._designationProtocolsDate[5];if(this.rpImg.visible=p.PlayerTitleModel.instance.getShengjieRp(s,l),this.AllBtn.visible=!1,1==o?(this.AllBtn.skin="common/btn_tongyong_18.png",this.AllBtn.labelColors="#465460,#465460,#465460,#465460",this.AllBtn.label="激活"):2==o?(this.AllBtn.skin="common/btn_tongyong_6.png",this.AllBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.AllBtn.label="激活"):3==o?(this.AllBtn.skin="common/btn_tongyong_6.png",this.AllBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.AllBtn.label="穿戴"):4==o&&(this.AllBtn.skin="common/btn_tongyong_18.png",this.AllBtn.labelColors="#465460,#465460,#465460,#465460",this.AllBtn.label="卸下"),this.AllBtn.visible=!0,2==o?(this._challengeClip.play(),this._challengeClip.visible=!0):(this._challengeClip.stop(),this._challengeClip.visible=!1),this.isJHImg.visible=1==o,this.nowBox.visible=4==o,this.jinDuHTML.visible=1==o||2==o,this.timeText2.visible=1!=o&&2!=o,this.timeText2.text=e,CommonUtil.setHTMLPro(this.jinDuHTML,"#1f304d","SimHei",22),1==o||2==o){var h="激活条件:",c=1==o?"#ff3e3e":"#168a17";h+=1==i?"<span style='color:"+c+";'>"+e+"("+a+"/"+r+")</span>":"<span style='color:"+c+";'>"+e+"</span>",this.jinDuHTML.innerHTML=h}this.timeText3.visible=4==o||3==o,Laya.timer.clear(this,this.loopHandler),0==n?this.timeText3.text="过期时间:永久有效":(this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler)),this.showUpArr(),this.setUI(),this.isOpen&&Laya.timer.callLater(this,function(){GlobalData.dispatcher.event("PLAYER_TITLE_OPENUPDATE")})},n.prototype.loopHandler=function(){var t=this._designationProtocolsDate[2];30100==this._designationProtocolsDate[0]?this.timeText3.text="过期时间:"+CommonUtil.timeStampToDayHour(t):this.timeText3.text="过期时间:"+Math.ceil((t-GlobalData.serverTime)/864e5)+"天"},i=n,p.PlayerTitleItem=i}(modules=modules||{}),function(c){var t,m,a,i,f,e;function n(){this._id=0,this._AllDate={},this._returnDtate=!1,this._returnDtate=!1,this._AllDate={},this._arr=[],this.nowChatId=0}t=c.player_title||(c.player_title={}),m=c.config.DesignationRefineCfg,a=c.funcOpen.FuncOpenModel,i=c.redPoint.RedPointCtrl,f=c.config.DesignationCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"AllDate",{get:function(){return this._AllDate},enumerable:!0,configurable:!0}),n.prototype.setAllDate=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=i[0];this._AllDate[n]=i}this.updateArr()},n.prototype.updateArr=function(){for(var t in this._arr.length=0,this._AllDate){var e=this._AllDate[t];this._arr.push(e)}this.setRp(),GlobalData.dispatcher.event("PLAYER_TITLE_UPDATE")},n.prototype.getAttrs=function(){for(var t=this._arr,e=[],i=0;i<t.length;i++){var n=t[i],s=n[0],o=n[1];if(3==o||4==o){var a=f.instance.getCfgById(s),r=this._AllDate[s][5],l=void 0;l=m.instance.isShengJie(s)&&1!==r?m.instance.getDateByPartAndLevel(s,r)[3]||[]:a[5]||[];for(var h=0,c=l.length;h<c;h+=2){for(var p=!1,u=0,d=e.length;u<d;u++)if(e[u][0]===l[h]){p=!0;break}p?e[u][1]+=l[h+1]:e.push([l[h],l[h+1]])}}}return e},n.prototype.getAtkNum=function(){for(var t=0,e=0,i=this._arr;e<i.length;e++){var n=i[e];if(3==n[1]||4==n[1]){var s=f.instance.getCfgById(n[0]),o=s[0],a=this._AllDate[o][5];m.instance.isShengJie(o)?t+=m.instance.getDateByPartAndLevel(o,a)[4]:t+=s[12]}}return t},n.prototype.isJiHuo=function(){if(a.instance.getFuncIsOpen(163))for(var t=this._arr,e=0;e<t.length;e++){var i=t[e];if(i){var n=i[1],s=i[0],o=i[5];if(2==n||this.getShengjieRp(s,o))return!0}}return!1},n.prototype.setRp=function(){var t=this.isJiHuo(),e=a.instance.getFuncIsOpen(163);i.instance.setRPProperty("playerTitleRP",t&&e)},n.prototype.isRpOfType=function(t){for(var e=f.instance.getCfgByType(t),i=0;i<e.length;i++){var n=e[i][0],s=this._AllDate[n];if(s){var o=s[1],a=s[5];if(2==o||this.getShengjieRp(n,a))return!0}}return!1},n.prototype.getShengjieRp=function(t,e){var i=m.instance.isShengJie(t);if(!i)return i;var n=this._AllDate[t][1];if(2!=n&&1!=n){if(m.instance.getMaxLevelByPart(t)<=e)return!1;var s=m.instance.getDateByPartAndLevel(t,e);if(s){var o=20117===t,a=s[2],r=s[5],l=o?0:a[0],h=o?0:a[1];return o&&(h=r),h<=(o?PlayerModel.instance.renQiNum:c.bag.BagModel.instance.getItemCountById(l))}}return!1},n.prototype.getJjinDu=function(t){var e=f.instance.getCfgByType(t),i=new Array;i[0]=0,i[1]=e.length;for(var n=0,s=e;n<s.length;n++){var o=s[n],a=this._AllDate[o[0]][1];2!=a&&1!=a&&i[0]++}return i},n.prototype.getState=function(t){var e=1;if(t){var i=t[0],n=this._AllDate[i];if(n)switch(e=n[1]){case 1:e=1;break;case 2:e=3;break;case 3:e=2;break;case 4:e=4}}return e},n.prototype.getStateChat=function(t){return this._AllDate[t[0]][1]||0},n.prototype.getSpecialTitleSrcById=function(t){return(t+"").substr(-4)},n.prototype.getSpecialTitleSrcByCfgId=function(t){var e=this._AllDate[t][3]+"";return+e?e.substr(-4):"9999"},e=n,t.PlayerTitleModel=e}(modules=modules||{}),function(t){var e,n,s,o,a,r,l,i;function h(){}e=t.quickUse||(t.quickUse={}),n=t.immortals.ImmortalsModel,s=t.wing.WingModel,o=t.tianZhu.TianZhuModel,a=t.fashion.FashionModel,r=t.pet.PetModel,l=t.ride.RideModel,Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.screeningHuanHua=function(t,e){if(void 0===e&&(e=!0),!t)return[!1,0];var i=t[0];return n.instance.haveItem(i,e)?[!0,1]:s.instance.haveItem(i,e)?[!0,2]:o.instance.haveItem(i,e)?[!0,4]:a.instance.haveItem(i,e)?[!0,3]:r.instance.haveItemHh(i,e)?[!0,5]:r.instance.haveItem(i,e)?[!0,6]:l.instance.haveItemHh(i,e)?[!0,7]:l.instance.haveItem(i,e)?[!0,8]:[!1,0]},h.prototype.useHandler=function(t){var e=this.screeningHuanHua(t);if(!e[0])return null;switch(e[1]){case 1:return 120;case 2:return 122;case 3:return 320;case 4:return 323;case 5:return 168;case 6:return 169;case 7:return 11;case 8:return 179;default:return null}},i=h,e.QuickUseHuanHuaModel=i}(modules=modules||{}),function(o){var a,t,e,n,r,i,l,h,c,s;function p(){return t.call(this)||this}a=o.quickUse||(o.quickUse={}),e=Laya.Event,n=o.bag.BaseItem,r=o.common.CommonUtil,i=ui.QuickUseUI,l=o.bag.BagUtil,h=o.config.ItemMaterialCfg,c=o.notice.SystemNoticeManager,t=i,__extends(p,t),p.prototype.initialize=function(){t.prototype.initialize.call(this),this.right=20,this.bottom=200,this.width=245,this.height=304,this._timer=8,this._useType=0},p.prototype.onEvt=function(){this.useBtn.on(e.CLICK,this,this.useHandler),this.closeBtn.on(e.CLICK,this,this.closeHandler)},p.prototype.offEvt=function(){this.useBtn.off(e.CLICK,this,this.useHandler),this.closeBtn.off(e.CLICK,this,this.closeHandler)},p.prototype.useHandler=function(){if(this._item){Laya.timer.clear(this,this.loopHandler);var t=r.getItemTypeById(this._item[0]);if(5===t)BagCtrl.instance.wearEquip(this._item[2]);else if(l.checkIsManualGift(this._item[0]))WindowManager.instance.openDialog(138,this._item);else if(2===t||3===t){var e=this._item[0],i=h.instance.getItemCfgById(e);i&&1<i[11]?WindowManager.instance.openByActionId(i[11]):BagCtrl.instance.useBagItemByIdUid(this._item[0],this._item[2],this._item[1])}else if(1===t){var n=a.QuickUseHuanHuaModel.instance.useHandler(this._item);n&&(WindowManager.instance.open(n,this._item[0]),WindowManager.instance.closeAllDialog())}else if(8===t)if(e=this._item[0],o.divinatory_card.DivinatoryUtil.isDivinatoryEquip(e))o.divinatory_card.DivinatoryCardCtrl.instance.divinatoryWear(o.divinatory_card.DivinatoryUtil.getType(e),this._item[2]);else if(o.showEquip.ShowEquipModel.instance.isShowEquip(e))o.showEquip.ShowEquipCtrl.instance.ShowEquipWear(o.config.ShowEquipCfg.instance.getTypeByItemId(e),this._item[2]);else if(o.brahma_equip.BrahmaEquipUtlis.isBrahmaEquip(e))o.brahma_equip.BrahmaEquipCtrl.instance.fantianWearEquip(this._item[2]);else{var s=o.yuanShen.YuanShenUtil.getTypeById(e);0===o.yuanShen.YuanShenModel.instance.getInfoById(s)[3]?c.instance.addNotice("元神未开启",!0):o.yuanShen.YuanShenCtrl.instance.wearYuanShenEquip(this._item[2],s)}else 4==this._useType&&(WindowManager.instance.open(333),WindowManager.instance.closeAllDialog(),a.QuickUseCtrl.instance.removeShenQiItem());a.QuickUseCtrl.instance.useOne()}},p.prototype.close=function(){this.setItem(null),t.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},p.prototype.closeHandler=function(){a.QuickUseCtrl.instance.useOne()},p.prototype.setItem=function(t){if(this.closeBtn.visible=!0,!(this._item=t))return this.titleImg.skin="",this.nameTxt.text="",this.useBtn.label="",void(this._baseItem&&(this._baseItem.dataSource=null));var e=r.getItemTypeById(t[0]),i=t[0];5===e||8===e?(this._useType=1,this.titleImg.skin="quick_use/msz_tanchuang_1.png",this.nameTxt.text=r.getItemCfgById(i)[1].toString(),this.resetTimer()):(2===e||3===e?(this._useType=2,this.titleImg.skin="quick_use/txt_common_kjsy.png",this.nameTxt.text=r.getItemCfgById(i)[1].toString(),this.useBtn.label="使用"):1===e?(this._useType=3,this.titleImg.skin="quick_use/txt_common_xwg.png",this.nameTxt.text=r.getItemCfgById(i)[1].toString(),this.useBtn.label="前往激活"):(this._useType=4,this.titleImg.skin="quick_use/txt_common_kjsy.png",this.nameTxt.text=r.getItemCfgById(i)[1].toString(),this.useBtn.label="使用"),Laya.timer.clear(this,this.loopHandler)),this.nameTxt.color=r.getColorById(i),this._baseItem||(this._baseItem=new n,this.addChild(this._baseItem),this._baseItem.pos(72,70,!0),this._baseItem.nameVisible=!1),this._baseItem.dataSource=t},p.prototype.resetTimer=function(){this._timer=8,Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},p.prototype.loopHandler=function(){this.useBtn.label="穿戴("+this._timer+")",0===this._timer&&this.useHandler(),this._timer--},s=p,a.QuickUsePanel=s}(modules=modules||{}),function(t){var e,n,s,i;function o(){return n.call(this)||this}e=t.recharge||(t.recharge={}),s=t.config.RechargeCfg,n=ui.RechargeItemUI,__extends(o,n),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.clickHandler=function(){n.prototype.clickHandler.call(this),this.rechargeMoney()},o.prototype.initialize=function(){n.prototype.initialize.call(this),this.iconImg.width=this.iconImg.height=32},o.prototype.rechargeMoney=function(){var t=this._cfg[0];1==t?WindowManager.instance.open(100):2==t?WindowManager.instance.open(351):140==t?WindowManager.instance.open(1494):150==t?WindowManager.instance.open(1493):PlatParams.askPay(this._cfg[0],this._cfg[2])},o.prototype.setData=function(t){n.prototype.setData.call(this,t);var e=s.instance.getRecharCfgByIndex(t[0]);if(this._cfg=e,this.baseImg.skin="assets/icon/ui/recharge/"+e[5]+".png",this.icoImg.skin="assets/icon/ui/recharge/"+e[4]+".png",this.flagImg.skin=2===e[8]?"recharge/icon_cz_yjeb.png":"recharge/icon_cz_ebfl.png",this.flagImg.visible=!0,this.nameTxt.text=e[1],this.priceTxt.text="￥"+e[2].toString(),e[3]){this.decTxt.visible=!0,this.icoImg.pos(22,26),this.decTxt.text=e[3];var i=t[0];140!=i&&150!=i||(this.decTxt.x=120,150==i&&this.icoImg.pos(10,26))}else this.decTxt.visible=!1,this.icoImg.pos(80,40);0<e[7].length&&0===t[1]?(this.iconImg.visible=this.tipImg.visible=this.tipTxt.visible=!0,2!==e[8]&&(this.flagImg.visible=!0),this.tipTxt.text=e[7][0][1].toString(),this.tipTxt.width=this.tipTxt.textField.textWidth,CommonUtil.centerChainArr(115,[this.tipTxt,this.iconImg])):(this.iconImg.visible=this.tipImg.visible=this.tipTxt.visible=!1,2!==e[8]&&(this.flagImg.visible=!1))},i=o,e.RechargeItem=i}(modules=modules||{}),function(t){var e,i;function n(){this._rechargeTable={},this._ischouzhi=!1}e=t.recharge||(t.recharge={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getRechargeInfoReply=function(t){for(var e=(this.rechargeInfoReply=t)[this.type=0],i=0,n=e.length;i<n;i++){var s=e[i];this._rechargeTable[s[0]]=s[1],this._ischouzhi=!0}GlobalData.dispatcher.event("UPDATE_RECHARGE_INFO")},n.prototype.updateRechargeInfo=function(t){this.updateRecharge=t,this.type=0,this._ischouzhi=!0,this._rechargeTable[t[0]]=t[1],GlobalData.dispatcher.event("UPDATE_RECHARGE_INFO")},n.prototype.getRechargeCountByIndex=function(t){return this._rechargeTable[t]},i=n,e.RechargeModel=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.rehead||(t.rehead={}),n=ui.RechatFrameItemUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.frameImg.visible=!1,this.iconImg.scale(.8,.8,!0)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("REHEAD_UPDATE",this,this.update)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},o.prototype.setData=function(t){this._id=t[0],this._type=t[1],this.iconImg.skin=CommonUtil.chatFrameSkin(this._id)},o.prototype.update=function(){var t=e.ReheadModel.instance.getStateByTypeId(3,this._id);this.lockImg.visible=0===t,this.flagImg.visible=this._id===e.ReheadModel.instance.chatFrame,this.rpImg.visible=e.ReheadModel.instance.getRp(3,this._id)},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.frameImg.visible=t},s=o,e.HeadFrameItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.rehead||(t.rehead={}),n=ui.HeadIconUI,i=n,__extends(o,i),o.prototype.update=function(){this.headImg.skin=CommonUtil.headSkin(),this.frameImg.skin=CommonUtil.headFrameSkin()},o.prototype.setInfo=function(t,e,i){this.headImg.skin=-1!==t?CommonUtil.headSkin(t,e):"",this.frameImg.skin=-1!==i?CommonUtil.headFrameSkin(i):""},Object.defineProperty(o.prototype,"type",{set:function(t){0===(this._type=t)&&(this.onAutoGlobalEvt("REHEAD_UPDATE",this,this.update),this.onAutoGlobalEvt("PLAYER_UPDATE_OCC",this,this.update),this.update())},enumerable:!0,configurable:!0}),s=o,e.HeadIcon=s}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.rehead||(t.rehead={}),n=t.config.HeadiconCfg,s=t.config.HeadPhotoframeCfg,o=ui.ReheadItemUI,a=t.config.ChatPhotoframeCfg,i=o,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.iconImg.height=this.iconImg.width=80},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("REHEAD_UPDATE",this,this.update)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.lockImg.visible=!1,this.maskImg.visible=!1,this.update()},l.prototype.setData=function(t){this._id=t[0],this._type=t[1],this.update()},l.prototype.update=function(){this.usingTxt.visible=this.rpImg.visible=!1,1==this._type?(this.lockImg.visible=!1,this.maskImg.visible=!0):2==this._type&&(this.lockImg.visible=!0,this.maskImg.visible=!1),this.usingTxt.pos(9,9);var t=0;if(1===this._type){if(!n.instance.getCfgById(this._id))return;this.iconImg.skin=CommonUtil.headSkin(this._id),t=e.ReheadModel.instance.getStateByTypeId(1,this._id),this.usingTxt.visible=this._id===e.ReheadModel.instance.head}else if(2===this._type){if(!s.instance.getCfgById(this._id))return;this.iconImg.skin=CommonUtil.headFrameSkin(this._id),t=e.ReheadModel.instance.getStateByTypeId(2,this._id),this.usingTxt.visible=this._id===e.ReheadModel.instance.headFrame,this.usingTxt.pos(23,41)}else if(3===this._type){if(!a.instance.getCfgById(this._id))return;this.iconImg.skin=0!==this._id?e.ReheadModel.instance.chatFrameSkin(this._id):"",t=e.ReheadModel.instance.getStateByTypeId(3,this._id),this.usingTxt.visible=this._id===e.ReheadModel.instance.chatFrame}1==this._type?this.maskImg.visible=0===t:2==this._type&&(this.lockImg.visible=0===t),this.rpImg.visible=e.ReheadModel.instance.getRp(this._type,this._id)},l.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.frameImg.visible=t},r=l,e.ReheadItem=r}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t._evtType="RIDE_UPDATE",t._model=e.RideModel.instance,t}e=t.ride||(t.ride={}),n=t.pet.CircleOptionsItem,i=n,__extends(o,i),s=o,e.RideCircleOptionsItem=s}(modules=modules||{}),function(s){var t,l,h,e;function c(){this.infoTable={},this.masterTable={}}t=s.showMaster||(s.showMaster={}),l=s.config.ShowMasterCfg,h=s.bag.BagModel,Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.getShowMasterInfoReply=function(t){if(t){for(var e=t[0],i=t[1],n=0,s=(this.infoTable[e]=i).length;n<s;n++)this.masterTable[i[n][0]]=i[n];this.checkIsAvailableByType(e),8!==e&&6!==e||(e=9),GlobalData.dispatcher.event("SHOW_MASTER_UPDATE",e)}},c.prototype.updateShowMasterLevel=function(t){var e=t[1],i=this.infoTable[e];if(i){for(var n=0,s=i.length;n<s;n++)if(i[n][0]===t[0]){i[n][1]=t[2];break}this.checkIsAvailableByType(e),8!==e&&6!==e||(e=9),GlobalData.dispatcher.event("SHOW_MASTER_UPDATE",e)}},c.prototype.getFightByType=function(t){var e=0,i=this.infoTable[t]||[];9===t&&(i=this.infoTable[6].concat(this.infoTable[8]));for(var n=0;n<i.length;++n)e+=l.instance.getCfgByIdLv(i[n][0],i[n][1])[9]||0;return e},c.prototype.getStarByShowId=function(t,e){var i;switch(e=e||l.instance.getCfgByIdLv(t,this.masterTable[t]?this.masterTable[t][1]:0)[0]){case 1:i=s.immortals.ImmortalsModel.instance.huanhuaList.get(t);break;case 2:i=s.wing.WingModel.instance.huanhuaList.get(t);break;case 3:i=s.fashion.FashionModel.instance.getMagicShowInfoById(t);break;case 4:i=s.tianZhu.TianZhuModel.instance.getMagicShowInfoById(t);break;case 5:i=s.ride.RideModel.instance.getShowInfoById(t);break;case 6:i=s.ride.RideModel.instance.huanhuaList.get(t);break;case 7:i=s.pet.PetModel.instance.getShowInfoById(t);break;case 8:i=s.pet.PetModel.instance.huanhuaList.get(t)}return i?i[1]:0},c.prototype.checkIsAvailable=function(t){var e=c.instance.getStarByShowId(t),i=c.instance.masterTable[t],n=i?i[1]:0,s=l.instance.getCfgByIdLv(t,n),o=s[3],a=s[4],r=h.instance.getItemCountById(a[0]);return o<=e&&r>=a[1]},c.prototype.setRedPointByType=function(t,e){switch(t){case 1:s.redPoint.RedPointCtrl.instance.setRPProperty("immortalMasterRP",e);break;case 2:s.redPoint.RedPointCtrl.instance.setRPProperty("wingMasterRP",e);break;case 3:s.redPoint.RedPointCtrl.instance.setRPProperty("fashionMasterRP",e);break;case 4:s.redPoint.RedPointCtrl.instance.setRPProperty("pearlMasterRP",e);break;case 5:s.redPoint.RedPointCtrl.instance.setRPProperty("weaponIllusionMasterRP",e);break;case 6:s.redPoint.RedPointCtrl.instance.setRPProperty("weaponCircleMasterRP",e);break;case 7:s.redPoint.RedPointCtrl.instance.setRPProperty("petIllusionMasterRP",e);break;case 8:s.redPoint.RedPointCtrl.instance.setRPProperty("petCircleMasterRP",e)}},c.prototype.checkIsAvailableByType=function(t){for(var e=s.config.ShowMasterCfg.instance.getShowIdsByType(t),i=!1,n=0;n<e.length;++n)i=i||this.checkIsAvailable(e[n]);this.setRedPointByType(t,i)},e=c,t.ShowMasterModel=e}(modules=modules||{}),function(i){var h,t,n,c,e,p,s,o,u,a,r,d,m,l;function f(t,e,i,n,s){this._challengeCount=t,this._restTime=e,this._lockImg=i,this._challengeBtn=n,this._challengeClip=s}function g(){return m.call(this)||this}h=i.single_boss||(i.single_boss={}),t=laya.events.Event,n=Laya.Point,c=i.player.PlayerModel,e=i.common.CommonUtil,p=i.config.SceneCopySingleBossCfg,s=i.common.CustomClip,o=i.notice.SystemNoticeManager,u=i.config.MonsterResCfg,a=i.bag.BagUtil,r=i.dungeon.DungeonCtrl,Object.defineProperty(f.prototype,"status",{get:function(){return this._status},set:function(t){if(this._status!=t)switch(this._status=t,this._status){case 0:this._challengeCount.color="#00AD35",this._challengeCount.visible=!0,this._restTime.visible=!1,this._lockImg.visible=!1,this._challengeBtn.visible=!0,this._challengeClip.visible=!0;break;case 1:this._challengeCount.color="#00AD35",this._challengeCount.visible=!0,this._restTime.visible=!0,this._lockImg.visible=!1,this._challengeBtn.visible=!0,this._challengeClip.visible=!1;break;case 3:this._challengeCount.visible=!1,this._restTime.visible=!1,this._lockImg.visible=!0,this._challengeBtn.visible=!1,this._challengeClip.visible=!1;break;case 2:this._challengeCount.color="#ab2800",this._challengeCount.visible=!0,this._restTime.visible=!1,this._lockImg.visible=!1,this._challengeBtn.visible=!0,this._challengeClip.visible=!1}},enumerable:!0,configurable:!0}),d=f,m=ui.SingleBossItemUI,__extends(g,m),g.prototype.initialize=function(){m.prototype.initialize.call(this),this._startPos=new n(151,69),this._imgWidth=100,this._spaceX=20,this._interval=103,this._cfg=new Array,this._resurrectiontime=null,this._challengeCount=null,this._scale=.8,this._items=new Array;for(var t=0;t<3;t++){var e=new i.sign.SignItem;e.pos(this._startPos.x+t*this._interval,this._startPos.y),e.scale(this._scale,this._scale),this._items.push(e),this.addChild(e)}this._challengeClip=s.create("assets/effect/btn_light.atlas","btn_light",16),this.addChildAt(this._challengeClip,5),this._challengeClip.scale(.8,.8),this._challengeClip.pos(this.challengeBtn.x-5,this.challengeBtn.y-9,!0),this._challengeClip.play(),this._challengeClip.visible=!0},g.prototype.updatetime=function(){this.resurrectionTime.text="复活时间: "+e.timeStampToMMSS(this._resurrectiontime),this._resurrectiontime-GlobalData.serverTime<=0&&(this._awardArr.status=0,Laya.timer.clear(this,this.updatetime))},g.prototype.setData=function(t){m.prototype.setData.call(this,t);var e=t[0];this._awardArr=new d(this.challengeCount,this.resurrectionTime,this.lockImg,this.challengeBtn,this._challengeClip),this._awardArr.status=t[1];var i=h.SingleBossModel.instance.getSingleBossDic().get(e);this._cfg=p.instance.getCfgByLv(e-1),c.instance.eraLevel>=this._cfg[3]&&c.instance.level>=this._cfg[4]&&(this._challengeCount=i[1],this.challengeCount.text=this._challengeCount.toString()),this._count=e;var n=this._cfg[2],s=u.instance.getCfgById(n);this.bossHead.skin="assets/icon/monster/"+s[3]+".png",this.eraLevel.text=this._cfg[6],this.eraLvPoint.text=this.eraLevel.text+"开启",this._resurrectiontime=i[2],1==this._awardArr.status&&(Laya.timer.clear(this,this.updatetime),Laya.timer.loop(1e3,this,this.updatetime));for(var o=this._cfg[5],a=0;a<this._items.length;a++)if(a<o.length){var r=this._items[a],l=[o[a][0],0,0,null];r.dataSource=l}0===this.index?this.regGuideSpr(60,this.challengeBtn):this.removeGuideSpr(60,this.challengeBtn)},g.prototype.onOpened=function(){m.prototype.onOpened.call(this),this._challengeClip.play()},g.prototype.close=function(){m.prototype.close.call(this),this._challengeClip.stop(),Laya.timer.clear(this,this.updatetime)},g.prototype.onEvt=function(){m.prototype.onEvt.call(this),this.challengeBtn.on(t.CLICK,this,this.challengeHandler)},g.prototype.offEvt=function(){m.prototype.offEvt.call(this),this.challengeBtn.off(t.CLICK,this,this.challengeHandler),Laya.timer.clear(this,this.updatetime)},g.prototype.challengeHandler=function(){switch(this._awardArr.status){case 0:a.checkNeedSmeltTip()||r.instance.reqEnterScene(this._cfg[0],this._cfg[1]);break;case 1:o.instance.addNotice("BOSS已被击败，等待复活继续挑战",!0);break;case 3:break;case 2:o.instance.addNotice("Boss挑战次数不足",!0)}},l=g,h.SingleBossItem=l}(modules=modules||{}),function(t){var e,i,h,c,p,n;function s(){this._singledic=new i}e=t.single_boss||(t.single_boss={}),i=Laya.Dictionary,h=t.player.PlayerModel,c=t.redPoint.RedPointCtrl,p=t.config.SceneCopySingleBossCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"SingleBossCopy",{get:function(){return this._singleBossArr},set:function(t){this._singleBossArr=t;for(var e=0,i=0;i<this._singleBossArr.length;i++){this._singledic.set(this._singleBossArr[i][0],this._singleBossArr[i]);var n=this._singleBossArr[i][2]-GlobalData.serverTime;0<n&&(e=0===e?n:n<e?n:e)}0<e&&Laya.timer.once(e,this,this.refreshData),this.setDotDic(),GlobalData.dispatcher.event("GET_SINGLE_BOSS")},enumerable:!0,configurable:!0}),s.prototype.refreshData=function(){Channel.instance.publish(2097955,null)},Object.defineProperty(s.prototype,"UpdateSingleBossCopy",{get:function(){return this._updatesingleBossArr},set:function(t){this._updatesingleBossArr=t;for(var e=0;e<this._updatesingleBossArr.length;e++){var i=this._updatesingleBossArr[e];this._singledic.set(i[0],i)}this.setDotDic(),GlobalData.dispatcher.event("UPDATE_SINGLE_BOSS")},enumerable:!0,configurable:!0}),s.prototype.getSingleBossDic=function(){if(null!=this._singledic)return this._singledic},s.prototype.setDotDic=function(){var t=0,e=this._singleBossArr;if(e){for(var i=this._singledic,n=0;n<e.length;n++){var s=i.get(e[n][0]),o=s[0],a=p.instance.getCfgByLv(o-1),r=a[3],l=a[4];h.instance.eraLevel>=r&&h.instance.level>=l&&0<s[1]&&0<GlobalData.serverTime-s[2]&&t++}this._redDot=0<t,c.instance.setRPProperty("singleBossRP",this._redDot)}},n=s,e.SingleBossModel=n}(modules=modules||{}),function(a){!function(l){var t,e=a.common.CustomList,i=(t=ui.AuctionLogAlertUI,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=e.create("v",0,0,this.listBox.width,this.listBox.height,s),this.listBox.addChild(this._list)},n.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("AUCTION_STORE_LOGS_UPDATE",this,this.updateList),l.AuctionStoreCtrl.instance.MallAuctionLogs()},n.prototype.updateList=function(){for(var t=[],e=l.AuctionStoreModel.instance.logs,i=0;i<e.length;++i)t.unshift(e[i]);this._list.datas=t,this.noImg.visible=this.noTxt.visible=0===t.length},n);function n(){return null!==t&&t.apply(this,arguments)||this}l.AuctionStoreLogAlert=i;var h,s=(h=ui.AuctionLogItemUI,__extends(o,h),o.prototype.initialize=function(){h.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.txt,"#3d5981","SimHei",22),this.txt.style.wordWrap=!0,this.txt.style.leading=15},o.prototype.setData=function(t){h.prototype.setData.call(this,t);var e=t[1],i="",n='<img src=\'common/icon_tongyong_2.png\' width="28" height="28"/>';if(t[5])90140001!==t[5]&&(n="<img src='"+CommonUtil.getIconById(t[5])+'\' width="28" height="28"/>');else{var s=l.AuctionStoreModel.instance.getMallCfgByItemId(t[2]);s&&90140001!==s[16][0]&&(n="<img src='"+CommonUtil.getIconById(s[16][0])+'\' width="28" height="28"/>')}var o=new Date(t[0]),a=o.getFullYear()+"年"+(o.getMonth()+1)+"月"+o.getDate()+"日"+("0"+o.getHours()).substr(-2)+":"+("0"+o.getMinutes()).substr(-2),r=CommonUtil.formatHtmlStrByColor(CommonUtil.getColorById(t[2]),CommonUtil.getNameByItemId(t[2]));switch(e){case 1:i=a+"&nbsp;您对"+r+"出价"+n+t[3]+"。";break;case 2:i=a+"&nbsp;您对"+r+"加价"+n+t[3]+"，总共已出价"+n+t[4]+"。";break;case 3:i=a+"&nbsp;恭喜您花费"+n+t[3]+"成功竞拍得到"+r+"。";break;case 4:i=a+"&nbsp;很遗憾您对"+r+"的出价不是最高，未能竞拍成功，返还您竞拍消耗的"+n+t[3]+"。"}this.txt.innerHTML=i,this.height=this.txt.style.height=this.txt.contextHeight},o);function o(){return null!==h&&h.apply(this,arguments)||this}l.AuctionStoreLogItem=s}(a.store||(a.store={}))}(modules=modules||{}),function(t){var i,e;function n(){this.checked={}}i=t.store||(t.store={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bidCount",{get:function(){return(this.bidList||[]).length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"available",{get:function(){return this.endTime>GlobalData.serverTime&&this.items&&0<this.items.length},enumerable:!0,configurable:!0}),n.prototype.getMallCfgByItemId=function(t){var e=GlobalData.getConfig("mall");for(var i in e)if(e[i][1]===t&&7===e[i][5])return e[i];return null},n.prototype.checkMyPrice=function(){var t=this.items||[];for(var e in t)if(1===t[e][1]){var i=this.getMyPrice(t[e][0]);if(0<i&&t[e][3]>i&&!this.checked[t[e][0]])return!0}return!1},n.prototype.setAllChecked=function(){var t=this.items||[];for(var e in t)this.checked[t[e][0]]=!0;i.AuctionStoreCtrl.instance.setRP()},n.prototype.getMyPrice=function(t){var e=this.bidList||[];for(var i in e)if(e[i][0]===t)return e[i][1];return 0},e=n,i.AuctionStoreModel=e}(modules=modules||{}),function(c){!function(m){var e,f=c.config.StoreCfg,g=c.notice.SystemNoticeManager,i=Laya.Button,y=c.bag.BagUtil,t=(e=m.StoreBasePanel,__extends(n,e),n.prototype.destroy=function(t){void 0===t&&(t=!0),this._helpBtn=this.destroyElement(this._helpBtn),this._panel=this.destroyElement(this._panel),this._timeTxt=this._timeBg=null,e.prototype.destroy.call(this,t)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this._list.itemRender=s,this.currencyImg.skin="assets/icon/item/1_s.png",this.fuguiImg.skin=CommonUtil.getIconById(94150001,!0),this.mallType=10,this._helpBtn=new i("common/btn_tongyong_16.png"),this._helpBtn.stateNum=1,this._helpBtn.pos(652,957,!0),this.addChild(this._helpBtn),this._helpId=19038;var t=c.config.ForbiddenBossCfg.instance.getBlendCfg(13)[1][0];this.descHtml.innerHTML='<span style="font-family:SimHei;font-size:24px;color:#ffffff">最多可对</span>&nbsp;<span style="font-family:SimHei;font-size:24px;color:#ff3e3e">'+t+'</span>&nbsp;<span style="font-family:SimHei;font-size:24px;color:#ffffff">个物品进行竞价</span>',this.currencyImg.x=430,this.currencyTxt.x=470,this._panel=new ui.auction_store_addonUI,this._panel.y=860,this._panel.centerX=0,this.addChild(this._panel),this._timeBg=this._panel.txt_bg,this._timeTxt=this._panel.txt,this.fuguiImg.visible=this.fuguiTxt.visible=!0,this.fuguiImg.x=220,this.fuguiTxt.x=260},n.prototype.showUI=function(){this.updateView(),this.updateMoney(),this.loopHandler()},n.prototype.onEvt=function(){this._tab.selectedIndex=6,e.prototype.onEvt.call(this),this.onAutoClick(this._helpBtn,this,this.onHelp),this.onAutoClick(this._panel.btn,WindowManager.instance,WindowManager.instance.openDialog,[1271]),this.onAutoGlobalEvt("AUCTION_STORE_UPDATE",this,this.updateView),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateMoney),this.onAutoGlobalEvt("ZXIANYU_UPDATE",this,this.updateMoney),Laya.timer.loop(1e3,this,this.loopHandler)},n.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler),m.AuctionStoreModel.instance.setAllChecked(),m.AuctionStoreCtrl.instance.setRP()},n.prototype.loopHandler=function(){m.AuctionStoreModel.instance.endTime>GlobalData.serverTime?(this._timeBg.visible=this._timeTxt.visible=!0,this._timeTxt.text="倒计时:"+CommonUtil.timeStampDDHHToHHMMSS(m.AuctionStoreModel.instance.endTime)):this._timeBg.visible=this._timeTxt.visible=!1},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),m.AuctionStoreCtrl.instance.GetMallAuctionInfo()},n.prototype.updateView=function(){var t=c.config.ForbiddenBossCfg.instance.getBlendCfg(13)[1][0],e=m.AuctionStoreModel.instance.bidCount;this.descHtml.innerHTML='<span style="font-family:SimHei;font-size:24px;color:#ffffff">竞价个数:</span>&nbsp;<span style="font-family:SimHei;font-size:24px;color:'+(e<t?"#50ff28":"#ff3e3e")+'">'+(t-e)+"/"+t+"</span>";var i=m.AuctionStoreModel.instance.items||[];0===(this._list.datas=i).length?(this.noTipImg.visible=this.noTipTxt.visible=!0,this.noTipTxt.text="终极BOSS未被击杀不产生拍卖物品",WindowManager.instance.close(1170)):(this.noTipImg.visible=!1,this.noTipTxt.text="")},n.prototype.updateMoney=function(){this.currencyTxt.text="元宝:"+CommonUtil.bigNumToString(PlayerModel.instance.ingot),this.fuguiTxt.text="仙玉:"+CommonUtil.bigNumToString(CommonUtil.getPropCountById(94150001))},n);function n(){return null!==e&&e.apply(this,arguments)||this}m.AuctionStorePanel=t;var a,s=(a=ui.StoreItemUI,__extends(o,a),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._rp=this.destroyElement(this._rp),a.prototype.destroy.call(this,t)},o.prototype.initialize=function(){a.prototype.initialize.call(this),this.zeKouHTml.visible=this.zeKouImg.visible=!1,this.limit.visible=!0,this.limitCount.text="",this.limitTxt.text="最低出价",this.limit.y=this.price.y,this.vipBox.visible=this.maxCountTxt.visible=!1,this.price.visible=!1,this.nowPrice.visible=!0,this.nowPriceImg.skin="assets/icon/item/1_s.png",this.limit.y-=10,this.nowPrice.y-=6,this._rp=new Laya.Image("common/image_common_xhd.png"),this._rp.pos(245,102,!0),this.addChild(this._rp),this._rp.visible=!1},o.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.puchaseBtn,this,this.bidHandler)},o.prototype.setData=function(t){a.prototype.setData.call(this,t);var e=f.instance.getCfgByitemId(t[0]);this.nowPriceImg.skin=90140001===e[16][0]?"assets/icon/item/1_s.png":CommonUtil.getIconById(e[16][0],!0);var i=m.AuctionStoreModel.instance.getMyPrice(t[0]);this.puchaseBtn.label=i?"加价":"竞价";var n=t[3];this.limitTxt.text=n&&i<n?"当前最高价":i?"当前最高价":"最低出价",this.limitTxt.color="#4c5e8a";var s=e[1];s&&(this.item.dataSource=[s,e[2],0,null],this.itemName.text=CommonUtil.getNameByItemId(s),this.itemName.color=CommonUtil.getColorById(s));var o=n||e[16][1]||0;this.nowPriceTxt.text=o.toString(),2===t[1]?(this.nowPriceTxt.text=""+(e[17][1]||0),this.limitTxt.text="一口价",this.puchaseBtn.label="已售出",this.puchaseBtn.gray=!0,this.zeKouImg.visible=!1):(this.puchaseBtn.gray=!1,i?(this.zeKouImg.visible=!0,this.zeKouImg.skin=i<n?"store/image_common_bc.png":"store/image_common_lx.png"):this.zeKouImg.visible=!1),this._rp.visible=i&&i<n&&!m.AuctionStoreModel.instance.checked[t[0]]},o.prototype.bidHandler=function(){var t=c.config.ForbiddenBossCfg.instance.getBlendCfg(13)[1][0],e=m.AuctionStoreModel.instance.bidCount,i=m.AuctionStoreModel.instance.getMyPrice(this.data[0]);2!==this.data[1]?!i&&t<=e?g.instance.addNotice("竞价物品已达上限",!0):(WindowManager.instance.openDialog(1170,this.data),m.AuctionStoreModel.instance.checked[this.data[0]]=!0,this._rp.visible=!1,m.AuctionStoreCtrl.instance.setRP()):g.instance.addNotice("该物品已被一口价购买",!0)},o);function o(){return null!==a&&a.apply(this,arguments)||this}m.AuctionStoreItem=s;var r,l=(r=ui.AuctionAlertUI,__extends(h,r),h.prototype.initialize=function(){r.prototype.initialize.call(this),this.labelCtrl=new c.common.NumLabelCtrl(this.numInput,this.addBtn,this.reduceBtn,30,this.addTenBtn,this.reduceTenBtn),this.labelCtrl.notice="xxxx"},h.prototype.setOpenParam=function(t){this._data=t,this.labelCtrl.min=0,this.labelCtrl.max=Number.POSITIVE_INFINITY,this.labelCtrl.value=0,this.isPopup&&this.updateView()},h.prototype.updateView=function(){if(this._data){var t=f.instance.getCfgByitemId(this._data[0]),e=90140001===t[16][0]?"assets/icon/item/1_s.png":CommonUtil.getIconById(t[16][0],!0);this.buyoutImg.skin=this.soldImg.skin=this.noticeImg.skin=this.noticeImg1.skin=e,this.baseItem.dataSource=[t[1],t[2],0,null],this.itemName.text=CommonUtil.getNameByItemId(t[1]),this.itemName.color=CommonUtil.getColorById(t[1]);var i=m.AuctionStoreModel.instance.getMyPrice(this._data[0]),n=t[17][1]||0,s=this._data[3];if(s?(this.buyoutTxt.text="当前最高价:",this.buyoutPrice.visible=this.buyoutImg.visible=!0,this.buyoutPrice.text=s.toString()):(this.buyoutTxt.text="当前最高价：未有出价",this.buyoutPrice.visible=this.buyoutImg.visible=!1),this.buyoutTxt.x=0,this.buyoutImg.x=this.buyoutTxt.width,this.buyoutPrice.x=this.buyoutImg.x+40,this.buyout.width=this.buyoutTxt.width+this.buyoutPrice.width+40,this.soldTxt.text="您已出价:",i?(this.soldPrice.text=i.toString(),this.soldImg.visible=!0,this.soldPrice.color="#0ecf09"):(this.soldPrice.text="未有出价",this.soldPrice.color="#2c476a",this.soldImg.visible=!1),this.labelCtrl.max=n-(i||0),this.labelCtrl.valueUnit=t[18],this.addBtn.label="+"+t[18],this.addTenBtn.label="+"+(10*t[18]>>0),this.reduceBtn.label="-"+t[18],this.reduceTenBtn.label="-"+(10*t[18]>>0),this.onceIcon.skin=e,this.onceNum.text=n.toString(),s)if(i){var o=s-i+t[18];this.labelCtrl.min=o,this.labelCtrl.value=o}else o=n<(o=s+t[18])?n:o,this.labelCtrl.min=o,this.labelCtrl.value=o;else this.labelCtrl.min=t[16][1]||0,this.labelCtrl.value=t[16][1]||0;if(this.soldTxt.x=0,this.soldImg.x=this.soldTxt.width,this.soldPrice.x=this.soldImg.x+(this.soldImg.visible?40:0),this.sold.width=this.soldTxt.width+this.soldPrice.width+(this.soldImg.visible?40:0),i<s)i?((a=t[18])<s-i+1&&(a=s-i+1),n<a+i&&(a=n-i),this.noticTxt.text="已出价",this.noticePrice.text=i.toString()+",",this.purchaseBtn.label="加价",this.noticeImg.visible=!0,this.noticeImg1.visible=!0,this.noticePrice1.text=a.toString(),this.noticTxt1.text="最少加价"):(this.noticTxt.text="竞价金额不能低于当前最高价",this.noticePrice.text="",this.purchaseBtn.label="竞价",this.noticeImg.visible=!1,this.noticeImg1.visible=!1,this.noticePrice1.text="",this.noticTxt1.text="");else if(i){var a;n<(a=t[18])+i&&(a=n-i),this.noticTxt.text="当前您是最高价,",this.noticePrice.text="",this.purchaseBtn.label="加价",this.noticeImg.visible=!1,this.noticeImg1.visible=!0,this.noticePrice1.text=a.toString(),this.noticTxt1.text="最少加价"}else this.noticTxt.text="最低出价不能少于",this.noticePrice.text=(t[16][1]||0).toString(),this.purchaseBtn.label="竞价",this.noticeImg.visible=!0,this.noticeImg1.visible=!1,this.noticePrice1.text="",this.noticTxt1.text="";this.noticTxt.x=0,this.noticeImg.x=this.noticTxt.width,this.noticePrice.x=this.noticeImg.x+(this.noticeImg.visible?40:0),this.noticTxt1.x=this.noticePrice.x+this.noticePrice.width,this.noticeImg1.x=this.noticTxt1.x+this.noticTxt1.width,this.noticePrice1.x=this.noticeImg1.x+(this.noticeImg1.visible?40:0),this.notic.width=this.noticTxt.width+this.noticePrice.width+(this.noticeImg.visible?40:0)+this.noticTxt1.width+this.noticePrice1.width+(this.noticeImg1.visible?40:0)}},h.prototype.onOpened=function(){r.prototype.onOpened.call(this),this.labelCtrl.min=0,this.labelCtrl.max=Number.POSITIVE_INFINITY,this.labelCtrl.value=0,this.updateView()},h.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.purchaseBtn,this,this.buyHandler,[!1]),this.onAutoClick(this.onceBtn,this,this.buyHandler,[!0]),this.onAutoClick(this.numInput,this,function(){g.instance.addNotice("请通过加价按钮对物品进行竞价",!0)}),this.labelCtrl.addListeners()},h.prototype.offEvt=function(){r.prototype.offEvt.call(this),this.labelCtrl.removeListeners()},h.prototype.buyHandler=function(t){var e=parseInt(this.numInput.text)||0;if(t&&(e=this.labelCtrl.max),0!==e){var i=m.AuctionStoreModel.instance.getMyPrice(this._data[0]),n=this._data[3]||0,s=f.instance.getCfgByitemId(this._data[0]),o=s[16][1]||0;if(0===n&&e<o)g.instance.addNotice("出价小于最低竞拍价",!0);else if(0===i&&e<=n)g.instance.addNotice("出价未超过当前最高价",!0);else{var a=s[16][0];if(CommonUtil.getPropCountById(a)<e)90140001===a?CommonUtil.goldNotEnoughAlert():y.openLackPropAlert(a,1);else{var r=s[17][1]||0;if(r&&r<=e+i)e=r-i;else{var l=s[18];if(i&&e<l)return void g.instance.addNotice("该物品每次加价不能低于"+l+CommonUtil.getNameByItemId(a),!0);if(i+e<=n)return void g.instance.addNotice("加价后未能超过当前最高价，加价失败",!0)}var h=CommonUtil.formatHtmlStrByColor(CommonUtil.getColorById(s[1]),CommonUtil.getNameByItemId(s[1])),c=CommonUtil.formatHtmlStrByColor("#0ecf09",e.toString()),p=CommonUtil.formatHtmlStrByColor("#0ecf09",(e+i).toString()),u=CommonUtil.formatHtmlStrByColor("#0ecf09",i.toString()),d=90140001===a?'<img src=\'common/icon_tongyong_2.png\' width="40" height="40"/>':"<img src='"+CommonUtil.getIconById(a,!0)+'\' width="40" height="40"/>';t?0<i?CommonUtil.alert("温馨提示","您当前已出价"+d+u+"，再花费"+d+c+"可直接购买"+h+"，是否确认购买？",[Handler.create(this,this.okHandler,[e,2])],null,null,!0,null,0,"","center"):CommonUtil.alert("温馨提示","是否以一口价"+d+p+"直接购买"+h+"，是否确认购买？",[Handler.create(this,this.okHandler,[e,1])],null,null,!0,null,0,"","center"):r<=i+e?0<i?CommonUtil.alert("温馨提示","当前已出价"+d+u+",再加价"+d+c+"将以一口价直接购买,是否确认加价？",[Handler.create(this,this.okHandler,[e,2])],null,null,!0,null,0,"","center"):CommonUtil.alert("温馨提示","总出价已超过一口价，将以"+d+c+"直接购买"+h+"，是否确认购买？",[Handler.create(this,this.okHandler,[e,1])],null,null,!0,null,0,"","center"):0<i?CommonUtil.alert("温馨提示","是否对"+h+"加价"+d+c+",加价后将以总价格"+d+p+"进行竞价，是否确认购买？",[Handler.create(this,this.okHandler,[e,2])],null,null,!0,null,0,"","center"):CommonUtil.alert("温馨提示","是否花费"+d+c+"竞价"+h+"？",[Handler.create(this,this.okHandler,[e,1])],null,null,!0,null,0,"","center")}}}else g.instance.addNotice("请先输入金额",!0)},h.prototype.okHandler=function(t,e){m.AuctionStoreCtrl.instance.bidType=e,m.AuctionStoreCtrl.instance.BuyMallAuctionItem(this._data[0],t),this.close()},h);function h(){return null!==r&&r.apply(this,arguments)||this}m.AuctionAlert=l}(c.store||(c.store={}))}(modules=modules||{}),function(t){var d,m,f,g,y,_,e;function i(){return null!==m&&m.apply(this,arguments)||this}d=t.store||(t.store={}),f=t.config.ItemMaterialCfg,g=t.vip.VipModel,y=t.common.CommonUtil,_=t.common.CustomClip,m=ui.StoreItemUI,__extends(i,m),i.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._boxArr=this.destroyElement(this._boxArr),m.prototype.destroy.call(this,t)},i.prototype.initialize=function(){m.prototype.initialize.call(this),this._pos=[[60],[35,70],[13,41,69]],this._boxArr=[this.limit,this.price,this.nowPrice],y.setHTMLPro(this.zeKouHTml,"#ffffff","SimHei",25,"center","middle"),this.zeKouHTml.style.strokeColor="#610101",this.zeKouHTml.style.stroke=3},i.prototype.setData=function(t){m.prototype.setData.call(this,t),this.zeKouHTml.visible=this.zeKouImg.visible=!1,this._posCount=0,this.vipBox.visible=!1,this.itemCfg=t;var e=this.itemCfg[1];this._id=this.itemCfg[0];var i=[e,this.itemCfg[2],0,null],n=this.itemCfg[7],s=this.itemCfg[8],o=this.itemCfg[9],a=this.itemCfg[10],r=this.itemCfg[14],l=f.instance.getItemCfgById(e);if(l){var h=1===l[13];this.item.pieceImg.x=h?66:4}this.item.dataSource=i,this.itemName.color=y.getColorById(e),this.itemName.text=this.item._nameTxt.text,this.puchaseBtn.visible=!0;var c=y.getItemTypeById(s[0]);if(this.nowPriceImg.skin=this.priceImg.skin=9==c?y.getIconById(s[0],!0):y.getIconById(s[0],!1),0<n.length){this.price.visible=!0,this.zeKouHTml.visible=this.zeKouImg.visible=!0,this._posCount++,this.priceTxt.text=y.bigNumToString(n[1]),this.zeKouImg.skin=1==r?"common/image_common_hongbq.png":2==r?"common/image_common_hbq.png":"common/image_common_hongbq.png";var p=this.itemCfg[12];this.zeKouHTml.innerHTML=p+"<span style='color:#ffffff;font-size: 22px'>折</span>",this.underLine.width=this.priceImg.width+this.priceTxt.width}else this.price.visible=!1,this.zeKouHTml.visible=this.zeKouImg.visible=!1;this.nowPriceTxt.text=y.bigNumToString(s[1]),0==s[1]?(this.zeKouHTml.visible=this.zeKouImg.visible=!0,this.zeKouImg.skin="common/image_common_hbq.png",this.zeKouHTml.innerHTML="免费",this.puchaseBtn.label="免费",this.puchaseBtn.labelColors="#1f304d",this.puchaseBtn.skin="common/btn_tonyong_36.png",this.effectInit(),_.thisPlay(this._btnClip)):(this.puchaseBtn.label="购买",this.puchaseBtn.labelColors="#fffde1",this.puchaseBtn.skin="store/btn0_common.png",_.thisStop(this._btnClip)),this._limitCount=o[1];var u=d.StoreModel.instance.getLimitById(this._id);this._nowCount=null!=u?u[1]:0,0<o[0]?(2==o[0]?this.limitTxt.text="本周限购:":this.limitTxt.text="每日限购:",this.limit.visible=!0,this._posCount++,null!=u?(this.limitCount.text=this._nowCount+"/"+this._limitCount,this._nowCount>=this._limitCount?(this.limitCount.color="#E6372E",this.puchaseBtn.visible=!1,this.maxCountTxt.visible=!0,_.thisStop(this._btnClip)):(this.limitCount.color="#00AD35",this.maxCountTxt.visible=!1)):(this.limitCount.text="0/"+o[1],this.limitCount.color="#00AD35",this.maxCountTxt.visible=!1)):this.maxCountTxt.visible=this.limit.visible=!1,g.instance.vipLevel<a?(this.vipLv.text="SVIP"+a+"专享",this.vipBox.visible=!0,this.puchaseBtn.visible=!1):this.vipBox.visible=!1,this.setPos()},i.prototype.setPos=function(){for(var t=0,e=0;e<this._boxArr.length;e++)1==this._boxArr[e].visible&&(this._boxArr[e].x=122,this._boxArr[e].y=this._pos[this._posCount][t],t<=this._posCount&&t++)},i.prototype.onEvt=function(){m.prototype.onEvt.call(this),this.onAutoClick(this.puchaseBtn,this,this.puchaseHandler),this.onAutoGlobalEvt("UPDATE_MALLINFO",this,this.updateMallHandler),this.onAutoGlobalEvt("PURCHASE_REPLY",this,this.puchaseReply),this.onAutoGlobalEvt("VIP_UPDATE",this,this.updateVip)},i.prototype.puchaseHandler=function(){var t=this.itemCfg[11],e=this.itemCfg[8],i=e[0];if(y.judgeCurrency(i,e[1]))if(0==t){var n=this._limitCount-this._nowCount;WindowManager.instance.openDialog(103,[this.itemCfg,n,1])}else Channel.instance.publish(2099353,[this.itemCfg[0],1])},i.prototype.puchaseReply=function(){var t=d.StoreModel.instance.PurchaseReply,e=t[1],i=t[2];if(e==this._id){var n=[e,i];this.changeLimit(n)}},i.prototype.updateMallHandler=function(){var t=d.StoreModel.instance.getLimitById(this._id);null!=t&&this.changeLimit(t)},i.prototype.updateVip=function(){var t=g.instance.vipLevel,e=this.itemCfg[10];t<e?(this.vipLv.text="SVIP"+e+"专享",this.vipBox.visible=!0,this.puchaseBtn.visible=!1):(this.vipBox.visible=!1,this.puchaseBtn.visible=!0)},i.prototype.changeLimit=function(t){this._nowCount=t[1],null!=t&&(this.limitCount.text=this._nowCount+"/"+this._limitCount,this._nowCount>=this._limitCount?(this.limitCount.color="#E6372E",this.puchaseBtn.visible=!1,this.maxCountTxt.visible=!0,_.thisStop(this._btnClip)):(this.limitCount.color="#00AD35",this.puchaseBtn.visible=!0,this.maxCountTxt.visible=!1))},i.prototype.effectInit=function(){this._btnClip||(this._btnClip=_.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.scale(.6,.6),this._btnClip.pos(this.puchaseBtn.x,this.puchaseBtn.y-5))},e=i,d.StoreItem=e}(modules=modules||{}),function(r){var l,u,d,h,t;function e(){return u.call(this)||this}l=r.store||(r.store={}),d=r.config.XianFuMallCfg,h=r.bag.BagUtil,u=ui.StoreXianFuItemUI,__extends(e,u),e.prototype.initialize=function(){u.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.zeKouHTml,"#ffffff","SimHei",25,"center","middle"),this.zeKouHTml.style.strokeColor="#610101",this.zeKouHTml.style.stroke=3},e.prototype.onEvt=function(){u.prototype.onEvt.call(this),this.onAutoClick(this.puchaseBtn,this,this.puchaseBtnHandler)},e.prototype.setData=function(t){if(u.prototype.setData.call(this,t),t){this._cfg=t;var e=this._cfg[0],i=this._cfg[1],n=d.instance.getCfgById(e),s=n[1],o=[s[0],s[1],0,null];this.item.dataSource=o;var a=n[2],r=n[3][1],l=n[3][0],h=n[4],c=n[5];this.priceTxt.text=""+a,this.nowPriceTxt.text=""+r;var p=Math.round(h);this.zeKouHTml.innerHTML=p+"<span style='color:#ffffff;font-size: 22px'>折</span>",this.zeKouImg.skin=1==c?"common/image_common_hongbq.png":2==c?"common/image_common_hbq.png":"common/image_common_hongbq.png",91930001==l?this.nowPriceImg.skin=this.priceImg.skin="common/icon_tongyong_caifu.png":90140001==l&&(this.nowPriceImg.skin=this.priceImg.skin="common/icon_tongyong_2.png"),this.itemName.color=CommonUtil.getColorById(s[0]),this.itemName.text=this.item._nameTxt.text,this.underLine.width=this.priceImg.width+this.priceTxt.width,this.maxCountTxt.visible=1==i,this.puchaseBtn.visible=1!=i}},e.prototype.puchaseBtnHandler=function(){if(this._cfg){var t=this._cfg[0],e=this._cfg[1],i=d.instance.getCfgById(t),n=i[1],s=i[3][1],o=i[3][0],a=i[6];if(1==e)return void r.notice.SystemNoticeManager.instance.addNotice("此商品购买已达上限",!0);91930001==o?r.xianfu.XianfuModel.instance.treasureInfos(1)>=s?h.canAddItemsByBagIdCount([[n[0],1,0,null]])&&(0==a?WindowManager.instance.openDialog(103,[i,1,2]):CommonUtil.alert("温馨提示","是否花费<img src='common/icon_tongyong_caifu.png'/><span style='color:#b15315'>"+s+"</span>购买<span style='color:#b15315'>"+CommonUtil.getNameByItemId(n[0])+"</span>",[Handler.create(this,function(){l.StoreCtrl.instance.BuyYuGeGoods(t)})])):h.openLackPropAlert(91930001,1):90140001==o&&(r.player.PlayerModel.instance.ingot>=s?h.canAddItemsByBagIdCount([[n[0],1,0,null]])&&(0==a?WindowManager.instance.openDialog(103,[i,1,2]):CommonUtil.alert("温馨提示","是否花费<img src='common/icon_tongyong_2.png'/><span style='color:#b15315'>"+s+"</span>购买<span style='color:#b15315'>"+CommonUtil.getNameByItemId(n[0])+"</span>",[Handler.create(this,function(){l.StoreCtrl.instance.BuyYuGeGoods(t)})])):CommonUtil.goldNotEnoughAlert())}},e.prototype.destroy=function(){this._cfg=null,u.prototype.destroy.call(this,!0)},t=e,l.StoreXianFuItem=t}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.talisman||(t.talisman={}),i=ui.TalismanTextItemUI,__extends(s,i),s.prototype.setData=function(t){i.prototype.setData.call(this,t),this.nowName.text=t[0],this.nextName.text=t[1],this.nextName.color=t[2]},n=s,e.ItemText=n}(modules=modules||{}),function(o){!function(t){var a=o.common.CommonUtil,r=o.bag.BagModel,l=o.common.CustomClip,e=o.guide.GuideModel,h=(Object.defineProperty(i.prototype,"status",{get:function(){return this._status},set:function(t){if(this._status!=t)switch(this._status=t,this._status){case 2:this.level.visible=!0,this.mask.visible=!1,this.active.visible=!1,this.redDot.visible=!1;break;case 3:this.level.visible=!0,this.mask.visible=!1,this.active.visible=!1,this.redDot.visible=!0;break;case 1:this.level.visible=!1,this.mask.visible=!0,this.active.visible=!1,this.redDot.visible=!1;break;case 4:this.level.visible=!1,this.mask.visible=!0,this.active.visible=!0,this.redDot.visible=!0;break;case 0:this.level.visible=!0,this.mask.visible=!1,this.active.visible=!1,this.redDot.visible=!1}},enumerable:!0,configurable:!0}),i);function i(t,e,i,n){this.level=t,this.mask=e,this.active=i,this.redDot=n}t.HandBookItem=h;var c,n=(c=ui.TalismanItemUI,__extends(s,c),s.prototype.initialize=function(){c.prototype.initialize.call(this),this.icon.anchorX=this.icon.anchorY=.5,this.icon.pos(88,96,!0)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._upClip=this.destroyElement(this._upClip),c.prototype.destroy.call(this,t)},s.prototype.setData=function(t){c.prototype.setData.call(this,t),this.cfg=t[0],this.itemId=this.cfg[0],this.level=this.cfg[2],this._item=new h(this.levelText,this.isExit,this.activeTxt,this.redDot);var e=a.getItemQualityById(this.itemId)-1,i=a.getItemCfgById(this.itemId);if(!i)throw new Error("不存在的道具ID："+this.itemId);5<e&&(e=5),this.bg.skin="talisman/dt_fabao_"+e+".png",this.icon.skin=a.getIconById(this.itemId),this.maxLvImg.visible=!1,this.icon.scale(1.2,1.2),this.nameText.text=i[1].toString();var n=this.itemId.toString();3<=e?(this.icon.visible=!1,this._upClip||(this._upClip=new l,this.addChildAt(this._upClip,1),this._upClip.centerX=0,this._upClip.centerY=0,this._upClip.visible=!1),this._upClip.skin="assets/effect/fa_bao/"+n+".atlas",this._upClip.frameUrls=[n+"/1.png",n+"/2.png",n+"/3.png",n+"/4.png",n+"/5.png",n+"/6.png",n+"/7.png",n+"/8.png"],l.thisPlay(this._upClip)):(l.thisStop(this._upClip),this.icon.visible=!0),this.levelText.text="Lv."+this.level;var s=r.instance.getItemCountById(this.itemId)+r.instance.getItemCountById(this.cfg[4]),o=this.cfg[3][1];this._item.status=t[1],null!=o?(this.nowExp.text=s.toString()+"/"+o,this.expProgress.width=1<=s/o?119:s/o*119):(this.nowExp.text="已满级",this.expProgress.width=119,this.maxLvImg.skin="talisman/txt_common_ymj_"+e+".png",this.maxLvImg.visible=!0)},s.prototype.onEvt=function(){c.prototype.onEvt.call(this),0===this.index&&e.instance.registeUI(9,this)},s.prototype.offEvt=function(){c.prototype.offEvt.call(this),0===this.index&&e.instance.removeUI(9)},s.prototype.clickHandler=function(){var t=this.itemId;WindowManager.instance.openDialog(47,t)},Object.defineProperty(s.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),s);function s(){var t=c.call(this)||this;return t.width=149,t.height=209,t}t.TalismanItem=n}(o.talisman||(o.talisman={}))}(modules=modules||{}),function(t){var e,s,i,o,a,n;function r(){return null!==s&&s.apply(this,arguments)||this}e=t.threeWorlds||(t.threeWorlds={}),i=ui.MultiBossItemUI,o=t.config.MonsterResCfg,a=t.player.PlayerModel,s=i,__extends(r,s),r.prototype.initialize=function(){s.prototype.initialize.call(this),this.lockImg.visible=!1},r.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.selectedImg.visible=!1},r.prototype.setSelected=function(t){s.prototype.setSelected.call(this,t),this.selectedImg.visible=t,this.lvTxt.color=t?"#9d5119":"#FFFFFF"},r.prototype.setData=function(t){s.prototype.setData.call(this,t);var e=t,i=o.instance.getCfgById(e[2]);this.iconImg.skin="assets/icon/monster/"+i[3]+".png",this.lvTxt.text=e[4];var n=e[3];a.instance.eraLevel>=n[0]&&a.instance.eraLevel<=n[1]?this.iconImg.gray=!1:this.iconImg.gray=!0},n=r,e.ThreeWorldsItem=n}(modules=modules||{}),function(t){var p,u,e,i,d,m,n;function s(){return u.call(this)||this}p=t.threeWorlds||(t.threeWorlds={}),e=ui.ThreeWorldsRankItemUI,i=t.bag.BaseItem,d=t.config.SceneCrossBossCfg,m=t.config.ForbiddenBossCfg,u=e,__extends(s,u),s.prototype.initialize=function(){u.prototype.initialize.call(this),this._bagItem=new i,this.addChild(this._bagItem),this._bagItem.scale(.8,.8,!0),this._bagItem.pos(400,8,!0)},s.prototype.setData=function(t){if(u.prototype.setData.call(this,t),this.rankTxt.visible=!1,1===p.ThreeWorldsRankPanel.type||3===p.ThreeWorldsRankPanel.type){var e=t,i=e[0];this.nameTxt.text=i[1],this.damageTxt.text="伤害："+CommonUtil.bigNumToString(e[1]),1===(r=i[2])?this.rankImg.skin="common/zs_tongyong_7.png":2===r?this.rankImg.skin="common/zs_tongyong_8.png":3===r?this.rankImg.skin="common/zs_tongyong_9.png":(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.visible=!0,this.rankTxt.text=r.toString());var n=e[2];this._bagItem.dataSource=n&&0<n.length?n[0]:null}else if(2===p.ThreeWorldsRankPanel.type){var s=t;this.nameTxt.text=s[0][1],this.damageTxt.text="伤害："+CommonUtil.bigNumToString(s[1]),1===(r=s[0][2])?this.rankImg.skin="common/zs_tongyong_7.png":2===r?this.rankImg.skin="common/zs_tongyong_8.png":3===r?this.rankImg.skin="common/zs_tongyong_9.png":(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.visible=!0,this.rankTxt.text=r.toString());var o=p.ThreeWorldsModel.instance.mapId,a=p.ThreeWorldsModel.instance.mapLv;(l=d.instance.getCfgByMapIdAndLv(o,a))&&(n=l[8][r-1][1],this._bagItem.dataSource=n&&0<n.length?[n[0][0],n[0][1],0,null]:null)}else if(4===p.ThreeWorldsRankPanel.type){var r;s=t,this.nameTxt.text=s[0][1]+"的队伍",this.damageTxt.text="伤害："+CommonUtil.bigNumToString(s[1]),1===(r=s[0][2])?this.rankImg.skin="common/zs_tongyong_7.png":2===r?this.rankImg.skin="common/zs_tongyong_8.png":3===r?this.rankImg.skin="common/zs_tongyong_9.png":(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.visible=!0,this.rankTxt.text=r.toString()),this._bagItem.dataSource=null;for(var l=m.instance.getBlendCfg(5)[2],h=0;h<l.length;++h){var c=l[h].slice(1,-1).split("#");parseInt(c[0])<=r&&parseInt(c[1])>=r&&(this._bagItem.dataSource=[parseInt(c[2]),parseInt(c[3]),0,null])}}},n=s,p.ThreeWorldsRankItem=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.tianZhu||(t.tianZhu={}),n=t.abstract.AbstractHuanHuaItem,s=t.config.TianZhuMagicShowCfg,i=n,__extends(a,i),a.prototype.getModelInfo=function(){return e.TianZhuModel.instance.tianZhuInfo},a.prototype.getShowInfo=function(t){return e.TianZhuModel.instance.getMagicShowInfoById(t)},a.prototype.getCurShowId=function(){return e.TianZhuModel.instance.curShowId},a.prototype.getDataByIdLvField=function(t,e,i){return s.instance.getDataByIdLvField(t,e,i)},a.prototype.canUpgrade=function(t,e){return s.instance.has(t,e)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("TIAN_ZHU_INFO_UPDATE",this,this.showUI)},o=a,e.TianZhuHuanHuaItem=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.tianZhu||(t.tianZhu={}),n=t.abstract.AbstractHuanHuaOptionsItem,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("TIAN_ZHU_INFO_UPDATE",this,this.upDateRp)},o.prototype.upDateRp=function(){this.rpImg.visible=e.TianZhuModel.instance.getRPByQuality(this._typeNum)},s=o,e.TianZhuHuanHuaOptionsItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.vip||(t.vip={}),n=ui.VipPowerItemUI,i=n,__extends(o,i),o.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=t;this.showTxt.text=e},s=o,e.VipPowerItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.vip||(t.vip={}),n=ui.VipShowItemUI,i=n,__extends(o,i),o.prototype.setSVIPandVIP=function(t,e,i){this.vipMsz.sheet="0123456789",this.vipMsz.visible=!0,1<=e?(this.vipBg.skin="common_sg/image_common_svip1.png",this.vipMsz.skin="common/num_common_svip.png",this.vipMsz.value=e.toString(),this.vipMsz.x=65,this.svipImg.visible=!0,this.svipImg.x=6):(this.vipBg.skin="common/image_common_vip.png",this.vipMsz.skin="common/num_common_vip.png",this.vipMsz.value=t.toString(),this.vipMsz.x=61,this.svipImg.visible=!1),this.vipBox.visible=!0,i&&this.setChatSvipDis()},o.prototype.setChatSvipDis=function(){this.vipMsz.visible=!1,this.svipImg.x=20},s=o,e.VipShowItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.vip_new||(t.vip_new={}),n=ui.VipPowerItemUI,i=n,__extends(o,i),o.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=t;this.showTxt.text=e},s=o,e.VipNewPowerItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.windCloud||(t.windCloud={}),n=t.common.SimpleList,i=Laya.Component,__extends(o,i),o.prototype.initialize=function(){this.width=720,this.height=172,this.list=n.create(e.PvpBtnItem,158,172,2,1,20),this.addChild(this.list)},o.prototype.setDate=function(t){var e=t.length;this.list.datas=t,this.list.size(158*e+20*(e-1),172),this.list.pos(720-158*e-20*(e-1)>>1,0)},s=o,e.PvpBtnTabs=s}(modules=modules||{}),function(c){!function(t){var e,i=c.commonAlert.CommonTxtAlert,n=ui.CommonTxtAlertUI,s=c.dungeon.DungeonCtrl,o=(e=i,__extends(a,e),a);function a(){return null!==e&&e.apply(this,arguments)||this}t.WindCloudEnterAlert=o;var r,l=(r=n,__extends(h,r),h.prototype.initialize=function(){r.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24,"center","middle"),this.contentTxt.style.lineHeight=28,this.contentTxt.mouseEnabled=!1,this.noticeBtn.visible=this.noticeTxt.visible=!1,this.hintTxt.visible=this.tipTxt.visible=!1,this.titleTxt.text="温馨提示",this.closeOnSide=!1},h.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler),this.onAutoClick(this.cancelBtn,this,this.close),Laya.timer.loop(1e3,this,this.countDownHandler)},h.prototype.offEvt=function(){r.prototype.offEvt.call(this),Laya.timer.clear(this,this.countDownHandler)},h.prototype.countDownHandler=function(){if(!(this._countDown<0)){var t=CommonUtil.formatHtmlStrByColor("#ff3e3e",this._countDown.toString()),e=CommonUtil.formatHtmlStrByColor("#ff3e3e","（未进入战斗将视作放弃本轮挑战）");1===this.dataSource?this.contentTxt.innerHTML="风云擂台的擂台赛将于"+t+"秒后开始，处于副本内将无法进入擂台赛，是否退出当前副本？"+e:2===this.dataSource&&(this.contentTxt.innerHTML="风云擂台的擂台赛将于"+t+"秒后开始，进入副本内将无法进入擂台赛，是否退出当前队伍？"+e),0!=this._countDown?this._countDown--:r.prototype.close.call(this)}},h.prototype.okHandler=function(){r.prototype.close.call(this),1===this.dataSource?(s.instance.reqEnterScene(),c.foreign_boss_panel.ForeignBossModel.instance.setAutoCall(!1),c.mission.MissionModel.instance.auto=!1):2===this.dataSource&&(c.teamBattle.TeamBattleModel.Instance.isHaveRoom?c.teamBattle.TeamBattleCtrl.instance.leaveTeam():CommonGroupUtil.isMyHaveTeam()&&c.common_group.CommonGroupCtrl.instance.kickTeamerEx(PlayerModel.instance.actorId))},h.prototype.setOpenParam=function(t){this.dataSource=t},h.prototype.onOpened=function(){r.prototype.onOpened.call(this),this._countDown=60,this.countDownHandler()},h.prototype.close=function(t,e){r.prototype.close.call(this,t,e)},h);function h(){return null!==r&&r.apply(this,arguments)||this}t.WindCloudEnterAlert1=l}(c.windCloud||(c.windCloud={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.windCloud||(t.windCloud={}),i=t.core.BaseDialogEx,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1},s.prototype.count=function(){this.v.timeTxt.text=CommonUtil.msToMMSS(1e3*this._time),this._time++,GlobalData.serverTime>e.WindCloudModel.instance.eventTime[0]+t.config.WindCloudCfg.instance.preTotalTime&&this.cancelHandler()},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._time=0,this.count(),Laya.timer.loop(1e3,this,this.count)},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.count)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.v.cancelBtn,this,this.cancelHandler)},s.prototype.cancelHandler=function(){t.teamBattle.TeamBattleCtrl.instance.reqCancelMatch(),this.close()},n=s,e.WindCloudMatchAlert=n}(modules=modules||{}),function(g){var t,e,y,i,n;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMaster=!1,t}t=g.windCloud||(g.windCloud={}),y=g.config.WindCloudCfg,i=g.core.AbstractModel,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getRecordByRound=function(t){for(var e=[],i=this.recordList||[],n=0;n<i.length;++n)i[n][0]===t&&e.push([t,i[n][1][0]]);return e},s.prototype.getRecordByRoundAndMasterId=function(t,e){for(var i=this.recordList||[],n=0;n<i.length;++n)if(i[n][0]===t&&i[n][1][0]===e)return i[n];return null},Object.defineProperty(s.prototype,"enrollTime",{get:function(){for(var t,e=GlobalData.serverTime,i=new Date(e),n=i.getUTCDay()||7,s=g.config.BlendCfg.instance.getCfgById(96101)[1],o=Number.POSITIVE_INFINITY,a=0;a<s.length;a+=6){var r=s[a],l=s[a+1]-8;l<0&&(l+=24,--r),24<=l&&(l-=24,r+=1),r<=0&&(r+=7),7<r&&(r-=7);var h=new Date;h.setTime(i.getTime()+24*(r-n)*60*60*1e3),h.setUTCHours(l),h.setMinutes(s[a+2]),h.setSeconds(0,0);var c=s[a+3],p=s[a+4]-8;p<0&&(p+=24,--c),24<=p&&(p-=24,c+=1),c<=0&&(c+=7),7<c&&(c-=7),c<r&&(c+=7);var u=new Date;u.setTime(i.getTime()+24*(c-n)*60*60*1e3),u.setUTCHours(p),u.setMinutes(s[a+5]),u.setSeconds(0,0);var d=s[a+3],m=y.instance.closeTime[0]-8;m<0&&(m+=24,--d),24<=m&&(m-=24,d+=1),d<=0&&(d+=7),7<d&&(d-=7),d<r&&(d+=7);var f=new Date;if(f.setTime(i.getTime()+24*(d-n)*60*60*1e3),f.setUTCHours(m),f.setMinutes(y.instance.closeTime[1]),f.setSeconds(0,0),h.getTime()<=e&&f.getTime()>=e)return[h.getTime(),u.getTime()];e<h.getTime()&&o>h.getTime()-e?(o=h.getTime()-e,t=[h.getTime(),u.getTime()]):e<h.getTime()+6048e5&&o>h.getTime()+6048e5-e&&(o=h.getTime()+6048e5-e,t=[h.getTime()+6048e5,u.getTime()+6048e5])}return o<Number.POSITIVE_INFINITY?t:[0,0]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"eventTime",{get:function(){var t=new Date(this.enrollTime[1]),e=y.instance.openTime[0]-8;t.setUTCHours(e),t.setMinutes(y.instance.openTime[1]),t.setSeconds(0,0);var i=t.getTime();return e=y.instance.closeTime[0]-8,t.setUTCHours(e),t.setMinutes(y.instance.closeTime[1]),t.setSeconds(0,0),[i,t.getTime()]},enumerable:!0,configurable:!0}),s.prototype.getEndTimeByRound=function(t){return s.instance.eventTime[0]+y.instance.preTotalTime+t*(y.instance.vsGuessTime+y.instance.vsBattleTime)},Object.defineProperty(s.prototype,"isInEnrollTime",{get:function(){var t=this.enrollTime,e=GlobalData.serverTime;return t[0]>e?(Laya.timer.once(t[0]-e,this,this.delayUpdateFunc),!1):!(t[1]<e)},enumerable:!0,configurable:!0}),s.prototype.delayUpdateFunc=function(){GlobalData.dispatcher.event("WINDCLOUD_TIMER")},s.prototype.getGuessRecord=function(t,e){for(var i=this.guessRecord||[],n=0;n<i.length;++n)if(i[n][0]===t&&i[n][1]===e)return i[n];return null},Object.defineProperty(s.prototype,"isWaitingForMatch",{get:function(){return this.isMaster&&2===this.matchStage},enumerable:!0,configurable:!0}),n=s,t.WindCloudModel=n}(modules=modules||{}),function(t){var o,e,a,i;function n(){return null!==e&&e.apply(this,arguments)||this}o=t.windCloud||(t.windCloud={}),a=t.config.WindCloudCfg,e=ui.WindCloudVsItemUI,__extends(n,e),n.prototype.setData=function(t){e.prototype.setData.call(this,t),this.updateView()},n.prototype.updateView=function(){if(this._data){var t=o.WindCloudModel.instance.getRecordByRoundAndMasterId(this._data[0],this._data[1]);if(t){var e=t[1];this.vipShowItem.setSVIPandVIP(0,e[5]),this.head.setInfo(e[3],e[1],e[4]);var i=t[2].length;switch(i<=2?this.vsCountImg.skin="windcloud/txt_fylt_1.png":i<=4?this.vsCountImg.skin="windcloud/txt_fylt_2.png":i<=8?this.vsCountImg.skin="windcloud/txt_fylt_3.png":i<=12?this.vsCountImg.skin="windcloud/txt_fylt_4.png":i<=16?this.vsCountImg.skin="windcloud/txt_fylt_5.png":i<=24?this.vsCountImg.skin="windcloud/txt_fylt_8.png":i<=32&&(this.vsCountImg.skin="windcloud/txt_fylt_6.png"),this.nameTxtR.text=i+"名挑战者",this.nameTxtL.text=e[2],this.noResImg.visible=this.fullMask.visible=!1,this.betBtnL.visible=this.betBtnR.visible=!0,t[3]){case 1:this.leftMask.visible=!1,this.rightMask.visible=!0,this.resImgL.skin="windcloud/txt_dfdf_sl.png",this.resImgR.skin="windcloud/txt_dfdf_fu.png",this.resImgL.visible=this.resImgR.visible=!0,this.betBtnL.visible=this.betBtnR.visible=!1;break;case 2:this.leftMask.visible=!0,this.rightMask.visible=!1,this.resImgL.skin="windcloud/txt_dfdf_fu.png",this.resImgR.skin="windcloud/txt_dfdf_sl.png",this.resImgL.visible=this.resImgR.visible=!0,this.betBtnL.visible=this.betBtnR.visible=!1;break;case 3:this.leftMask.visible=this.rightMask.visible=this.resImgL.visible=this.resImgR.visible=!1,this.noResImg.visible=this.fullMask.visible=this.betBtnL.visible=this.betBtnR.visible=!0;break;default:this.leftMask.visible=this.rightMask.visible=this.resImgL.visible=this.resImgR.visible=!1,(t[0]<o.WindCloudModel.instance.curRound||o.WindCloudModel.instance.getEndTimeByRound(t[0])<GlobalData.serverTime)&&(this.noResImg.visible=this.fullMask.visible=!0,this.betBtnL.visible=this.betBtnR.visible=!0)}this.countTxtL.text="支持数:"+t[4],this.countTxtR.text="支持数:"+t[5];var n=a.instance.getCfgByRound(t[0])[4][1],s=o.WindCloudModel.instance.getGuessRecord(t[0],this.index+1);this.goldTxtL.text=((s&&s[2]||0)*n).toString(),this.goldTxtR.text=((s&&s[3]||0)*n).toString()}}},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.chkBtn,this,this.checkHandler),this.onAutoClick(this.betBtnL,this,this.betHandler,[1]),this.onAutoClick(this.betBtnR,this,this.betHandler,[2]),this.onAutoGlobalEvt("WINDCLOUD_INFO_UPDATE",this,this.updateView)},n.prototype.checkHandler=function(){var t=o.WindCloudModel.instance.getRecordByRoundAndMasterId(this.data[0],this.data[1]);t&&WindowManager.instance.open(1260,t[2])},n.prototype.betHandler=function(t){var e=o.WindCloudModel.instance.getRecordByRoundAndMasterId(this.data[0],this.data[1]);if(e){var i=a.instance.getCfgByRound(e[0])[4];CommonUtil.getPropCountById(i[0])<i[1]?CommonUtil.goldNotEnoughAlert():o.WindCloudCtrl.instance.WindCloudGuess(e[0],this.index,t)}},i=n,o.WindCloudVsItem=i}(modules=modules||{}),function(B){var P,e,l,S,n,h,t;function i(){return null!==e&&e.apply(this,arguments)||this}P=B.windCloud||(B.windCloud={}),l=B.common.SimpleList,S=B.config.WindCloudCfg,n=B.notice.SystemNoticeManager,h=B.config.BlendCfg,e=B.core.BaseViewEx,__extends(i,e),i.prototype.destroy=function(t){void 0===t&&(t=!0),this._vsList=this.destroyElement(this._vsList),this._tabList=this.destroyElement(this._tabList),this._prePanel=this.destroyElement(this._prePanel),this._vsPanel=this.destroyElement(this._vsPanel),this._itemList=this.destroyElement(this._itemList),e.prototype.destroy.call(this,t)},i.prototype.createChildren=function(){this._prePanel=new ui.WindCloudViewUI;for(var t=h.instance.getCfgById(96116)[1],e=[this._prePanel.item1,this._prePanel.item2,this._prePanel.item3,this._prePanel.item4],i=0,n=0;n<t.length;n+=2)e[i].dataSource=[t[n],t[n+1],0,null],i++;this._vsPanel=new ui.WindCloudView1UI,this._vsList=l.create(P.WindCloudVsItem,644,210,1,1,0,3),this._vsList.size(this._vsPanel.listBox.width,this._vsPanel.listBox.height),this._vsPanel.listBox.addChild(this._vsList),this._itemList=[];var s=GlobalData.getConfig("wind_cloud_arean");for(n=0;n<s.length;++n){var o=new ui.WindCloudTimeItemUI;o.pos(150+n*(600/s.length)-50,695),this._vsPanel.addChild(o),this._itemList.push(o);var a=s[n][1],r=a[0]+a[1]+a[2]+a[3];o.txt.text="1V"+r}CommonUtil.setHTMLPro(this._prePanel.timeHtml,"#1f304d","SimHei",24,"center")},i.prototype.initialize=function(){this.size(720,1280),this.centerX=this.centerY=0,this.layer=4,this.closeByOthers=!0,this._tabList=l.create(P.PvpBtnItem,158,172,2,1,10),this._tabList.size(494,172),this._tabList.pos((this.width-this._tabList.width)/2,979),this.addChild(this._tabList),this._tabList.datas=[120,145,839]},i.prototype.onEvt=function(){this._tabList.selectedIndex=2,this.onAutoEvt(this._tabList,"select",this,this.onTabChange,[2]).onAutoClick(this._prePanel.helpBtn,this,this.helpHandler).onAutoClick(this._vsPanel.helpBtn,this,this.helpHandler).onAutoClick(this._prePanel.rankBtn,this,this.rankHandler).onAutoClick(this._vsPanel.rankBtn,this,this.rankHandler).onAutoClick(this._prePanel.rwdBtn,this,this.rankRwdHandler).onAutoClick(this._vsPanel.rwdBtn,this,this.rankRwdHandler).onAutoClick(this._prePanel.goBtn,this,this.goHandler).onAutoClick(this._vsPanel.closeBtn,this,this.close).onAutoClick(this._prePanel.closeBtn,this,this.close).onAutoGlobalEvt("WINDCLOUD_INFO_UPDATE",this,this.updateView);for(var t=0;t<this._itemList.length;++t)this.onAutoClick(this._itemList[t],this,this.btnHandler,[t])},i.prototype.onTabChange=function(t){switch(this._tabList.selectedData){case 120:this._tabList.selectedIndex!=t&&WindowManager.instance.open(158);break;case 145:this._tabList.selectedIndex!=t&&WindowManager.instance.open(227);break;case 839:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1259);break;case 901:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1361)}this._tabList.selectedIndex!=t&&(this._tabList.selectedIndex=t)},i.prototype.showPrePanel=function(){this._vsPanel&&this._vsPanel.parent&&this._vsPanel.removeSelf(),this._prePanel&&!this._prePanel.parent&&this.addChildAt(this._prePanel,0)},i.prototype.showVsPanel=function(){this._prePanel&&this._prePanel.parent&&this._prePanel.removeSelf(),this._vsPanel&&!this._vsPanel.parent&&this.addChildAt(this._vsPanel,0)},i.prototype.rankHandler=function(){WindowManager.instance.open(1261)},i.prototype.rankRwdHandler=function(){WindowManager.instance.open(1262)},i.prototype.helpHandler=function(){CommonUtil.alertHelp(19045)},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),P.WindCloudCtrl.instance.GetWindCloudInfo(),P.WindCloudCtrl.instance.GetWindCloudCopyData(),P.WindCloudCtrl.instance.WindCloudInterfaceState(1),P.WindCloudModel.instance.selectedRound=P.WindCloudModel.instance.curRound||1,this._vsList.datas=[],this.updateView()},i.prototype.close=function(){e.prototype.close.call(this),P.WindCloudCtrl.instance.WindCloudInterfaceState(0)},i.prototype.updateView=function(){switch(P.WindCloudModel.instance.matchStage){case 1:this.showPrePanel();var t=B.config.BlendCfg.instance.getCfgById(96102)[1][0],e=P.WindCloudModel.instance.eventTime[0],i=e+S.instance.preTotalTime,n=new Date(e),s=new Date(i),o=CommonUtil.formatHtmlStrByColor("#00ad35",this.getDoubleStr(n.getHours())+":"+this.getDoubleStr(n.getMinutes())+"-"+this.getDoubleStr(s.getHours())+":"+this.getDoubleStr(s.getMinutes())),a=t-(P.WindCloudModel.instance.matchTimes||0),r=CommonUtil.formatHtmlStrByColor(0<a?"#00ad35":"#ff3e3e",a.toString());this._prePanel.timeHtml.innerHTML="资格赛阶段: "+o+",剩余"+r+"次匹配次数",this._prePanel.goBtn.label="匹配";break;case 3:this.showPrePanel();var l=P.WindCloudModel.instance.eventTime[0],h=l+S.instance.preTotalTime,c=new Date(l),p=new Date(h),u=CommonUtil.formatHtmlStrByColor("#00ad35",this.getDoubleStr(c.getHours())+":"+this.getDoubleStr(c.getMinutes())+"-"+this.getDoubleStr(p.getHours())+":"+this.getDoubleStr(p.getMinutes()));this._prePanel.timeHtml.innerHTML="资格赛阶段: "+u,this._prePanel.goBtn.label="匹配";break;case 2:this.showVsPanel(),this._vsPanel.noTipImg.visible=this._vsPanel.noTipTxt.visible=!1;var d=P.WindCloudModel.instance.getRecordByRound(P.WindCloudModel.instance.selectedRound)||[];this._vsList.datas&&this._vsList.datas.length&&d.length&&this._vsList.datas[0][0]===d[0][0]?this._vsList.updateShowItem():this._vsList.datas=d,this._vsPanel.bar.width=P.WindCloudModel.instance.curRound/6*599;var m=S.instance.getCfgByRound(P.WindCloudModel.instance.selectedRound||1),f=m[5][0],g=m[5][1];this._vsPanel.countTxt.text=(f-(P.WindCloudModel.instance.guessTimes||0)).toString()+"/"+f.toString(),this._vsPanel.countTxt.color=P.WindCloudModel.instance.guessTimes<f?"#148b14":"#ff3e3e",this._vsPanel.betTxt.text=g.toString();var y=P.WindCloudModel.instance.getEndTimeByRound(P.WindCloudModel.instance.curRound-1)+S.instance.vsGuessTime,_=new Date(y);this._vsPanel.timeTxt.text=this.getDoubleStr(_.getHours())+":"+this.getDoubleStr(_.getMinutes()),this._vsPanel.timeTxtL.text="第"+(P.WindCloudModel.instance.curRound||1)+"轮擂台赛将于",this._vsPanel.timeTxtR.text="开始",CommonUtil.chainArr([this._vsPanel.timeTxtL,this._vsPanel.timeTxt,this._vsPanel.timeTxtR]);for(var v=0,I=GlobalData.serverTime,b=0;b<this._itemList.length;++b)this._itemList[b].img.visible=P.WindCloudModel.instance.selectedRound-1===b,P.WindCloudModel.instance.curRound>b+1?(this._itemList[b].time.text="已结束",this._itemList[b].time.color="#3a5385"):(y=P.WindCloudModel.instance.getEndTimeByRound(b)+S.instance.vsGuessTime,_=new Date(y),I<y?(this._itemList[b].time.text=this.getDoubleStr(_.getHours())+":"+this.getDoubleStr(_.getMinutes()),this._itemList[b].time.color="#3a5385",(0===v||y<v)&&(v=y)):(this._itemList[b].time.text="进行中",this._itemList[b].time.color="#b15315"));v&&Laya.timer.once(v-I,P.WindCloudCtrl.instance,P.WindCloudCtrl.instance.GetWindCloudInfo);break;case 4:for(this.showVsPanel(),this._vsPanel.noTipImg.visible=this._vsPanel.noTipTxt.visible=!1,d=P.WindCloudModel.instance.getRecordByRound(P.WindCloudModel.instance.selectedRound)||[],this._vsList.datas&&this._vsList.datas.length&&d.length&&this._vsList.datas[0][0]===d[0][0]?this._vsList.updateShowItem():this._vsList.datas=d,0===d.length&&(this._vsPanel.noTipImg.visible=this._vsPanel.noTipTxt.visible=!1,this._vsPanel.noTipTxt.text="擂主已全部战败，擂台赛结束"),this._vsPanel.bar.width=599,f=(m=S.instance.getCfgByRound(P.WindCloudModel.instance.selectedRound||1))[5][0],g=m[5][1],this._vsPanel.countTxt.text=(f-(P.WindCloudModel.instance.guessTimes||0)).toString()+"/"+f.toString(),this._vsPanel.countTxt.color=P.WindCloudModel.instance.guessTimes<f?"#148b14":"#ff3e3e",this._vsPanel.betTxt.text=g.toString(),this._vsPanel.timeTxtL.text="擂台赛已结束",this._vsPanel.timeTxt.text="",this._vsPanel.timeTxtR.text="",b=0;b<this._itemList.length;++b)this._itemList[b].time.text="已结束",this._itemList[b].time.color="#3a5385",this._itemList[b].img.visible=P.WindCloudModel.instance.selectedRound===b+1;break;case 5:for(this.showVsPanel(),this._vsPanel.noTipImg.visible=this._vsPanel.noTipTxt.visible=!0,this._vsPanel.noTipTxt.text="挑战者数量不足不能开启擂台赛",this._vsList.datas=[],this._vsPanel.bar.width=599,f=(m=S.instance.getCfgByRound(P.WindCloudModel.instance.selectedRound||1))[5][0],g=m[5][1],this._vsPanel.countTxt.text=(f-(P.WindCloudModel.instance.guessTimes||0)).toString()+"/"+f.toString(),this._vsPanel.countTxt.color=P.WindCloudModel.instance.guessTimes<f?"#148b14":"#ff3e3e",this._vsPanel.betTxt.text=g.toString(),this._vsPanel.timeTxtL.text="擂台赛已结束",this._vsPanel.timeTxt.text="",this._vsPanel.timeTxtR.text="",b=0;b<this._itemList.length;++b)this._itemList[b].time.text="已结束",this._itemList[b].time.color="#3a5385",this._itemList[b].img.visible=!1;break;default:this.showPrePanel();var C=P.WindCloudModel.instance.enrollTime,T=new Date(C[0]),w=new Date(C[1]),x=CommonUtil.formatHtmlStrByColor("#00ad35","周"+"日一二三四五六日"[T.getDay()]+"&nbsp;"+this.getDoubleStr(T.getHours())+":"+this.getDoubleStr(T.getMinutes())+"-"+this.getDoubleStr(w.getHours())+":"+this.getDoubleStr(w.getMinutes()));this._prePanel.timeHtml.innerHTML="报名时间:"+x,this._prePanel.goBtn.label=P.WindCloudModel.instance.isEnroll?"已报名":"报名"}},i.prototype.goHandler=function(){var t=GlobalData.serverTime;if(1===P.WindCloudModel.instance.matchStage){var e=B.config.BlendCfg.instance.getCfgById(96102)[1][0];P.WindCloudModel.instance.matchTimes<e?P.WindCloudModel.instance.isEnroll?B.teamBattle.TeamBattleCtrl.instance.reqBeginMatch(3601):n.instance.addNotice("报名后才可参与资格赛匹配！",!0):n.instance.addNotice("资格赛最多可匹配"+e+"轮！",!0)}else 3===P.WindCloudModel.instance.matchStage?P.WindCloudModel.instance.isEnroll?n.instance.addNotice("报名人数过少,您已直接晋级为擂主",!0):n.instance.addNotice("报名后才可参与资格赛匹配！",!0):0===P.WindCloudModel.instance.matchStage&&P.WindCloudModel.instance.eventTime[0]<t&&P.WindCloudModel.instance.eventTime[1]>=t?n.instance.addNotice("因无人报名,活动直接结束",!0):P.WindCloudModel.instance.isEnroll?n.instance.addNotice("您已报名",!0):P.WindCloudModel.instance.enrollTime[1]<t||P.WindCloudModel.instance.enrollTime[0]>t?n.instance.addNotice("不在报名时间内不能报名",!0):P.WindCloudModel.instance.isEnroll||P.WindCloudCtrl.instance.WindCloudEnroll()},i.prototype.getDoubleStr=function(t){return t<10?"0"+t:""+t},i.prototype.btnHandler=function(t){if(5!==P.WindCloudModel.instance.matchStage)if(t<P.WindCloudModel.instance.curRound||4===P.WindCloudModel.instance.matchStage){this._itemList[P.WindCloudModel.instance.selectedRound-1].img.visible=!1,P.WindCloudModel.instance.selectedRound=t+1,this._itemList[P.WindCloudModel.instance.selectedRound-1].img.visible=!0;var e=P.WindCloudModel.instance.getRecordByRound(P.WindCloudModel.instance.selectedRound)||[];this._vsList.datas&&this._vsList.datas.length&&e.length&&this._vsList.datas[0][0]===e[0][0]?this._vsList.updateShowItem():this._vsList.datas=e,0===e.length?(this._vsPanel.noTipImg.visible=this._vsPanel.noTipTxt.visible=!0,this._vsPanel.noTipTxt.text="擂主已全部战败，擂台赛结束"):this._vsPanel.noTipImg.visible=this._vsPanel.noTipTxt.visible=!1;var i=S.instance.getCfgByRound(P.WindCloudModel.instance.selectedRound||1)[5][1];this._vsPanel.betTxt.text=i.toString()}else 2===P.WindCloudModel.instance.matchStage&&t>=P.WindCloudModel.instance.curRound&&n.instance.addNotice("该轮挑战尚未开始",!0);else n.instance.addNotice("挑战者数量不足不能开起擂台赛",!0)},t=i,P.WindCloudPanel=t}(modules=modules||{}),function(c){!function(r){var t,e=c.core.BaseDialogEx,i=c.common.SimpleList,l=c.config.BlendCfg,n=(t=e,__extends(s,t),s.prototype.destroy=function(){this.list=this.destroyElement(this.list),t.prototype.destroy.call(this)},s.prototype.initialize=function(){t.prototype.initialize.call(this),this.list=i.create(a,571,89),this.list.size(this.v.listBox.width,this.v.listBox.height),this.v.listBox.addChild(this.list),this.v.rwdBox.visible=!1,CommonUtil.setHTMLPro(this.v.tipTxt,"#1f304d","SimHei",24,"center")},s.prototype.updateRank=function(){if(!r.WindCloudModel.instance.preRankInfo){for(var t=[];t.length<20;)t.push(null);return this.list.datas=t,this.v.myRankNumText.text="我的排名:未上榜",void(this.v.myIntegralText.text="积分:0")}for(var e=r.WindCloudModel.instance.preRankInfo[0];e.length<20;)e.push(null);if(this.list.datas=e,this.v.myRankNumText.text="我的排名:"+(r.WindCloudModel.instance.preRankInfo[2]?r.WindCloudModel.instance.preRankInfo[2].toString():"未上榜"),this.v.myIntegralText.text="积分:"+r.WindCloudModel.instance.preRankInfo[1].toString(),r.WindCloudModel.instance.eventTime[0]>GlobalData.serverTime)this.v.tipTxt.innerHTML="资格赛尚未开始";else{var i=r.WindCloudModel.instance.enrollCount||0,n=c.config.BlendCfg.instance.getCfgById(96107)[1][0];if(0===i)0===r.WindCloudModel.instance.matchStage?this.v.tipTxt.innerHTML="因无人报名,活动直接结束":this.v.tipTxt.innerHTML="";else if(i<=n)this.v.tipTxt.innerHTML="只有"+i+"名玩家报名,将全部自动晋升为擂主";else{var s=l.instance.getCfgById(96103)[1],o=Math.ceil(i*s[0]);o=o>s[1]?s[1]:o;var a=CommonUtil.formatHtmlStrByColor("#0ecf09",o.toString());this.v.tipTxt.innerHTML="共"+i+"名玩家报名,排名前"+a+"名将成为擂主"}}},s.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateRank(),r.WindCloudCtrl.instance.GetWindCloudRank()},s.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("WINDCLOUD_PRERANK_UPDATE",this,this.updateRank)},s);function s(){return null!==t&&t.apply(this,arguments)||this}r.WindCloudRankAlert=n;var o,a=(o=ui.LadderRankItemUI,__extends(h,o),h.prototype.setData=function(t){o.prototype.setData.call(this,t);var e=this.index+1;1===e?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_7.png"):2===e?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_8.png"):3===e?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankClip.visible=!0,this.rankImg.skin="common/dt_tongyong_15.png",this.rankClip.value=""+e),t?(this.nameTxt.text=t[2],this.scoreTxt.text=""+t[5]):(this.nameTxt.text="虚位以待...",this.scoreTxt.text="")},h);function h(){return null!==o&&o.apply(this,arguments)||this}r.WindCloudRankItem=a}(c.windCloud||(c.windCloud={}))}(modules=modules||{}),function(l){!function(i){var t,e=l.common.SimpleList,n=(t=l.core.BaseDialogEx,__extends(s,t),s.prototype.destroy=function(){this.list=this.destroyElement(this.list),t.prototype.destroy.call(this)},s.prototype.initialize=function(){t.prototype.initialize.call(this),this.list=e.create(a,571,113),this.list.size(this.v.listBox.width,this.v.listBox.height),this.v.listBox.addChild(this.list),this.v.titleTxt.text="擂台赛排行奖励",this.v.rankBox.visible=!1},s.prototype.updateRank=function(){if(!i.WindCloudModel.instance.vsRankInfo){var t=new Array(20);return this.list.datas=t,this.v.myRankNumText.text="我的排名:未上榜",void(this.v.myIntegralText.text="挑战人数:0")}var e=i.WindCloudModel.instance.vsRankInfo[0];e.length=20,this.list.datas=e,this.v.myRankNumText.text="我的排名:"+(i.WindCloudModel.instance.vsRankInfo[2]?i.WindCloudModel.instance.vsRankInfo[2].toString():"未上榜"),this.v.myIntegralText.text="挑战人数:"+i.WindCloudModel.instance.vsRankInfo[1].toString()},s.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateRank(),i.WindCloudCtrl.instance.GetWindCloudAreanRank()},s.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("WINDCLOUD_VSRANK_UPDATE",this,this.updateRank)},s);function s(){return null!==t&&t.apply(this,arguments)||this}i.WindCloudRankRwdAlert=n;var o,a=(o=ui.MarryArenaRankItemUI,__extends(r,o),r.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.item,this,this.onAwardItemclick)},r.prototype.onAwardItemclick=function(t){for(var e=l.config.WindCloudCfg.instance.getRewardByRank(this.getRank()),i=[],n=0;n<e.length;n+=2)i.push([e[n],e[n+1],0,null]);WindowManager.instance.open(212,[i,"奖励预览",!0])},r.prototype.getRank=function(){return this._data&&this._data[6]?this._data[6]:this.index+1},r.prototype.setData=function(t){o.prototype.setData.call(this,t),t?(this.playerInfoBox.visible=!0,this.empyTxt.visible=!1,this.nameTxt1.text=t[2],this.nameTxt2.text="",this.scoreTxt.text=t[5].toString(),this.nameTxt1.y=this.scoreTxt.y):(this.playerInfoBox.visible=!1,this.empyTxt.visible=!0);var e=this.getRank(),i=l.config.WindCloudCfg.instance.getItemByRank(e);this.item.dataSource=i?[i,1,0,null]:null,CommonUtil.setRank(e,this.rankImg,this.commonRank,this.rankClip)},r);function r(){var t=o.call(this)||this;return t.item.needTip=!1,t.scoreTxt.fontSize=28,t}i.WindCloudRankRwdItem=a}(l.windCloud||(l.windCloud={}))}(modules=modules||{}),function(n){var t,e,s,i;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._num=0,t}t=n.windCloud||(n.windCloud={}),s=n.config.WindCloudCfg,e=n.core.BaseViewEx,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.layer=1,this.closeByOthers=!1,this.top=350,this.centerX=0,this.zOrder=-1},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SCENE_ENTER",this,this.setUI)},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._num=t,this.setUI()},o.prototype.setUI=function(){var t=n.scene.SceneUtil.curSceneLv-1;t=t||1;var e=s.instance.getCfgByRound(t);if(e){var i=e[1][0]+e[1][1]+e[1][2]+e[1][3];this.v.lastCountTxt.text=this._num+"/"+i}},i=o,t.WindCloudScenePanel=i}(modules=modules||{}),function(h){!function(t){var e,i=h.core.BaseDialogEx,n=h.common.SimpleList,s=(e=i,__extends(o,e),o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(r,280,113,1,2,0,0),this._list.size(this.v.listBox.width,this.v.listBox.height),this.v.listBox.addChild(this._list)},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._list.datas=t},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.WindCloudVserAlert=s;var a,r=(a=ui.WindCloudEnemyItemUI,__extends(l,a),l.prototype.setData=function(t){a.prototype.setData.call(this,t),this.vipShowItem.setSVIPandVIP(0,t[5],t[8]),this.headIcon.setInfo(t[3],t[1],t[4]),this.nameTxt.text=t[2],this.lvTxt.text="战力:"+CommonUtil.bigNumToString(t[6])},l);function l(){return null!==a&&a.apply(this,arguments)||this}t.WindCloudVserItem=r}(h.windCloud||(h.windCloud={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.windCloud||(t.windCloud={}),i=ui.LadderNotFoundViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.width=this.bg.width=this.txt.width=720,this.centerX=0,this.top=320,this.txt.text="等待对手进入请勿退出，若对手进入不了战斗您将直接胜利",this.visible=!1},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("PANEL_OPEN",this,this.onPanelOpen)},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.visible=!1},s.prototype.onPanelOpen=function(t){45===t&&this.close()},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),WindowManager.instance.isOpened(45)?this.close():this.visible=!0},n=s,e.WindCloudWaitEnemyPanel=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.wing||(t.wing={}),n=t.abstract.AbstractHuanHuaItem,s=t.config.WingMagicshowCfg,i=n,__extends(a,i),a.prototype.getShowInfo=function(t){return e.WingModel.instance.huanhuaList.get(t)},a.prototype.getModelInfo=function(){return e.WingModel.instance.info},a.prototype.getCurShowId=function(){return e.WingModel.instance.curShowId},a.prototype.getDataByIdLvField=function(t,e,i){return s.instance.getDataByIdLvField(t,e,i)},a.prototype.canUpgrade=function(t,e){return s.instance.has(t,e)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("WING_UPDATE",this,this.showUI)},o=a,e.WingSkinItem=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.wing||(t.wing={}),n=t.abstract.AbstractHuanHuaOptionsItem,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("WING_UPDATE",this,this.upDateRp)},o.prototype.upDateRp=function(){this.rpImg.visible=e.WingModel.instance.qualityType(this._typeNum)},s=o,e.WingHuanHuaOptionsItem=s}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.xiLian||(t.xiLian={}),n=ui.XiLianMatItemUI,s=t.bag.BagModel,o=t.config.ItemMaterialCfg,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.item.mouseEnabled=!1},r.prototype.setData=function(t){this.item.dataSource=[t,s.instance.getItemCountById(t),0,null];var e=o.instance.getItemCfgById(t);this.nameTxt.text=e[1];var i=CommonUtil.getItemQualityById(t);this.nameTxt.color=this.qualityTxt.color=CommonUtil.getColorByQuality(i),this.qualityTxt.text=4===i?"橙色":"红色"},a=r,e.XiLianMatItem=a}(modules=modules||{}),function(t){var e,i,n;function s(){this._partTable={},this.isOpenDlog=!0,this.isTips=!1}e=t.xiLian||(t.xiLian={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xiLianInfo",{get:function(){return this._xiLianInfo},set:function(t){var e=(this._xiLianInfo=t)[1];if(e){for(var i=0,n=e.length;i<n;i++){var s=e[i],o=s[0];this._partTable[o]=s}GlobalData.dispatcher.event("XI_LIAN_INFO_UPDATE"),this.checkRP()}},enumerable:!0,configurable:!0}),s.prototype.updateXiLian=function(t){if(console.log("更新洗炼:info  ",t),console.log("更新洗炼:this._xiLianInfo   ",this._xiLianInfo),this._xiLianInfo){this._xiLianInfo[0]=t[0],this._xiLianInfo[2]=t[2],this._xiLianInfo[3]=t[3];for(var e=t[1],i=this._xiLianInfo[1],n=0,s=e.length;n<s;n++){this._partTable[e[n][0]]=e[n];for(var o=0,a=i.length;o<a;o++)if(e[n][0]===i[o][0]){i[o]=e[n];break}}GlobalData.dispatcher.event("XI_LIAN_INFO_UPDATE"),this.checkRP()}},s.prototype.getAttrCountByQuality=function(t){var e=0;if(this._xiLianInfo)for(var i=this._xiLianInfo[1],n=0,s=i.length;n<s;n++)for(var o=i[n][1],a=0,r=o.length;a<r;a++)o[a][1][2]>=t&&e++;return e},s.prototype.getInfoPyPart=function(t){return this._partTable[t]},s.prototype.getSlotInfoByPartAndSlot=function(t,e){var i,n=this._partTable[t];if(t)for(var s=n[1],o=0,a=s.length;o<a;o++){var r=s[o];if(r[0]===e){i=r;break}}return i},s.prototype.updateXilianTmpAttr=function(t){this.xilianTmp=t,GlobalData.dispatcher.event("XI_LIAN_INFO_UPDATE"),this.checkRP()},s.prototype.checkRP=function(){if(this._xiLianInfo){var t=!this.isTips&&0<PlayerModel.instance.equipsDic.values.length&&0<this._xiLianInfo[0];i.instance.setRPProperty("xiLianMaster",this._xiLianInfo[3]||t)}},n=s,e.XiLianModel=n}(modules=modules||{}),function(r){var l,t,e,i;function n(){return null!==t&&t.apply(this,arguments)||this}l=r.xianfu||(r.xianfu={}),e=ui.FengshuiAttItemUI,t=e,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),this._type=-1},n.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("XIANFU_WIND_WATER_UPTATE",this,this.setList)},n.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.setList()},n.prototype.setList=function(){for(var t=l.XianfuModel.instance.fengshuiResList,e=0,i=t.length;e<i;e++)if(t[e]/100>>0===this._type)return void this.updateView(t[e]);this.lvTxt.text="(未激活)",this.lvTxt.color="#ff3e3e",this.desTxt.text="效果:无加成"},n.prototype.updateView=function(t){var e=r.config.XianfuDecorateCfg.instance.getCfgById(t),i=e[2],n=e[3],s=n[0];if(this.lvTxt.text="Lv."+(t%100).toString(),0==i){var o=n[0],a=n[1];s=n[2],this.desTxt.text="效果:"+l.XianfuModel.instance.getType0AttAddStr(a,o,s,n)}else this.desTxt.text="效果:"+l.XianfuModel.instance.getAttAddStr(i,s);this.lvTxt.color=this.desTxt.color="#168a17"},Object.defineProperty(n.prototype,"type",{set:function(t){var e;0==t?(e="fym",this._type=11):1==t?(e="bbg",this._type=12):2==t?(e="ncp",this._type=21):3==t?(e="xlq",this._type=22):4==t?(e="fgb",this._type=31):5==t?(e="fss",this._type=32):6==t?(e="csd",this._type=13):7==t?(e="jxh",this._type=23):8==t?(e="zyt",this._type=33):9==t?(e="ryp",this._type=14):10==t?(e="sht",this._type=24):11==t&&(e="zzs",this._type=34),this.iconImg.skin="assets/icon/ui/xianfu_decorate/txt_xf_"+e+".png"},enumerable:!0,configurable:!0}),i=n,l.FengshuiAttItem=i}(modules=modules||{}),function(t){var a,i,o,r,l,h,c,e,n;function s(){return null!==i&&i.apply(this,arguments)||this}a=t.xianfu||(t.xianfu={}),o=t.common.CustomClip,r=t.notice.SystemNoticeManager,l=t.config.XianfuCfg,h=t.config.XianfuAnimalCfg,c=t.config.XianfuBuildCfg,e=t.config.ExteriorCfg,i=ui.XianfuBottomItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=-1,this._effs=[],this._effs[0]=this.creatEff("hand"),this._endTime=0},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),Laya.timer.loop(1e3,this,this.loopHandler),this.onAutoClick(this.arrImg,this,this.speedUpHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.lockImg,this,this.lockImgHandler),this.onAutoGlobalEvt("XIANFU_BUILD_UPDATE",this,this.updateBuildInfo),this.onAutoGlobalEvt("XIANFU_PET_UPDATE",this,this.updateBuildInfo),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.updateBuildInfo)},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this);for(var t=0,e=this._effs.length;t<e;t++)this._effs[t].play();this.updateBuildInfo()},Object.defineProperty(s.prototype,"type",{set:function(t){this._type=t,this.initShow(),this.addChild(this.nameTxt)},enumerable:!0,configurable:!0}),s.prototype.playEff=function(t){void 0===t&&(t=0);for(var e=0,i=this._effs.length;e<i;e++)this._effs[e].visible=e==t},s.prototype.updateBuildInfo=function(){var t=a.XianfuModel.instance.panelType;this.iconImg.gray=this.iconImg.visible=this.lockImg.visible=!0,this.signImg.visible=!1,this.playEff(-1),0==t&&this._type<2?this.updateView_0():1==t&&2<=this._type&&this._type<=4?this.updateView_1():2==t&&5<=this._type&&this._type<=8&&this.updateView_2()},s.prototype.updateView_0=function(){var t=a.XianfuModel.instance.getBuildInfo(this._type);if(t){var e=t[3];this.awardBox.visible=this.signImg.visible=!0,this.lockImg.visible=this.gray=this.iconImg.visible=!1,this.signImg.skin=3==e?"xianfu/txt_xf_ydsx.png":0==this._type?"xianfu/txt_xf_hlz.png":"xianfu/txt_xf_jbz.png",3==e?this.playEff():this.playEff(1);var i=t[6];this.awardTxt.text=i.toString();var n=this.awardIconImg.width+this.awardTxt.width+5;this.awardIconImg.x=(this.width-n)/2,this.awardTxt.x=this.awardIconImg.x+this.awardIconImg.width+5}else this.awardBox.visible=!1},s.prototype.updateView_1=function(){var t=a.XianfuModel.instance.getBuildInfo(this._type);if(t){this.signImg.visible=!0,this.arrImg.visible=this.iconImg.gray=this.iconImg.visible=this.lockImg.visible=!1;var e=t[3];this.signImg.skin=2==e?"xianfu/txt_xf_ksh.png":1==e?"xianfu/txt_xf_lzz.png":"xianfu/image_xf_xzz.png",1==e?(this.arrImg.visible=this.timeBox.visible=!0,this._endTime=t[2],this.playEff(2)):0==e?(this._endTime=0,this.playEff(1)):(this._endTime=0,this.playEff())}},s.prototype.updateView_2=function(){var t=h.instance.ids,e=a.XianfuModel.instance.getPetInfos(t[this._type-5]);if(e){var i=e[3];if(this.signImg.visible=!0,this.timeBox.visible=this.arrImg.visible=this.lockImg.visible=this.iconImg.gray=this.iconImg.visible=!1,this.signImg.skin=2==i?"xianfu/txt_xf_ksh.png":1==i?"xianfu/txt_xf_ylz.png":"xianfu/txt_xf_xxz.png",2==i)this.playEff();else if(1==i)this.arrImg.visible=this.timeBox.visible=!0,this._endTime=e[4],this.playEff(1);else{this.playEff(-1);var n=5==this._type?"ls_04":6==this._type?"ls_03":7==this._type?"ls_02":"ls_01";this.iconImg.skin="xianfu/"+n+".png",this.iconImg.visible=!0}}},s.prototype.loopHandler=function(){0!=this._type&&1!=this._type?this._endTime<=GlobalData.serverTime?this.timeBox.visible=!1:this.timeTxt.text=CommonUtil.msToMMSS(this._endTime-GlobalData.serverTime):Laya.timer.clear(this,this.loopHandler)},s.prototype.initShow=function(){this.iconImg.visible=this.arrImg.visible=this.timeBox.visible=this.awardBox.visible=!1,this._type<=1?0==this._type?(this.nameTxt.text="汇灵阵",this.awardIconImg.skin="xianfu/18_s.png",this._effs[1]=this.creatEff("huiling")):(this.nameTxt.text="聚宝盆",this.awardIconImg.skin="xianfu/19_s.png",this._effs[1]=this.creatEff("gold")):this._type<=4?(this.iconImg.visible=!0,this._effs[1]=this.creatEff("liandanlu"),this._effs[2]=this.creatEff("refine"),2==this._type?(this.nameTxt.text="炼丹炉",this.iconImg.skin="xianfu/icon_xf_ldl.png"):3==this._type?(this.nameTxt.text="炼器炉",this.iconImg.skin="xianfu/icon_xf_lql.png"):4==this._type&&(this.nameTxt.text="炼魂炉",this.iconImg.skin="xianfu/icon_xf_lhl.png")):(this._effs[1]=this.creatEff("footPrint"),5==this._type?(this.nameTxt.text=e.instance.getCfgById(8013)[2],this.iconImg.skin="xianfu/ls_04.png"):6==this._type?(this.nameTxt.text=e.instance.getCfgById(8014)[2],this.iconImg.skin="xianfu/ls_03.png"):7==this._type?(this.nameTxt.text=e.instance.getCfgById(8015)[2],this.iconImg.skin="xianfu/ls_02.png"):8==this._type&&(this.nameTxt.text=e.instance.getCfgById(8016)[2],this.iconImg.skin="xianfu/ls_01.png"))},s.prototype.creatEff=function(t){var e=new o;e.skin="assets/effect/xianfu/"+t+".atlas";var i=[],n=0;"hand"==t?n=4:"gold"==t?n=8:"huiling"==t?n=10:"footPrint"==t?n=20:"liandanlu"==t?n=12:"refine"==t&&(n=12);for(var s=0;s<n;s++)i.push(t+"/"+s+".png");return e.frameUrls=i,this.addChild(e),e.durationFrame=5,e.loop=!0,e.play(),e.pos(44,55),e.visible=!1,e},s.prototype.btnHandler=function(){if(this._type<5){var t=a.XianfuModel.instance.getBuildInfo(this._type);if(!t)return void r.instance.addNotice("仙府等级不足",!0);var e=t[1],i=void 0;i=this._type<2?l.instance.getCfgByBuildIdAndLv(this._type,e)[6]:c.instance.getCfgByIdAndLv(this._type,e)[3],a.XianfuModel.instance.buildType=this._type,a.XianfuCtrl.instance.getBuildingInfo([this._type]),PlayerModel.instance.selectTarget(3,i)}else{var n=h.instance.ids[this._type-5],s=a.XianfuModel.instance.getPetInfos(n);if(!s)return void r.instance.addNotice("仙府等级不足",!0);var o=s[3];a.XianfuModel.instance.selectPetIndex=this._type-5,0==o?WindowManager.instance.open(190):WindowManager.instance.open(192)}},s.prototype.lockImgHandler=function(){var t;if(this._type<5)t=l.instance.getCfgByBuildIdAndLv(this._type,1)[0];else{var e=h.instance.ids[this._type-5];t=l.instance.getCfgByPetId(e)[0]}r.instance.addNotice("仙府达到"+t+"级时解锁",!0)},s.prototype.speedUpHandler=function(){this._type<5?(a.XianfuModel.instance.buildType=this._type,a.XianfuCtrl.instance.endSmelt()):(a.XianfuModel.instance.selectPetIndex=this._type-5,WindowManager.instance.open(193))},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._effs=this.destroyElement(this._effs),i.prototype.destroy.call(this,t)},n=s,a.XianfuBottomItem=n}(modules=modules||{}),function(p){var u,e,d,t;function i(){return null!==e&&e.apply(this,arguments)||this}u=p.xianfu||(p.xianfu={}),d=p.config.XianfuHandBookCfg,e=ui.TalismanItemUI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.icon.x=this.icon.y=0,this.frameImg.skin="common/selected_xf_kpxzk.png"},i.prototype.setData=function(t){var e=(this._data=t)[0],i=t[1],n=p.config.XianfuHandBookCfg.instance.getCfgByIdAndLv(e,i),s=n[1],o=new p.talisman.HandBookItem(this.levelText,this.isExit,this.activeTxt,this.redDot),a=n[5];5<a&&(a=5),this.bg.skin="talisman/dt_fabao_"+a+".png",this.icon.skin="assets/icon/item/"+s+".png",this.maxLvImg.visible=!1;var r=d.instance.getCfgByIdAndLv(e,0);this.nameText.text=r[2],this.levelText.text="Lv."+i;var l=n[6][0],h=n[6][1],c=u.XianfuModel.instance.handBookRes.get(l);o.status=u.XianfuModel.instance.getHandbookStateById(e),i!==d.instance.maxLv?(c=c||0,this.nowExp.text=c.toString()+"/"+h,this.expProgress.width=1<=c/h?119:c/h*119):(this.nowExp.text="已满级",this.expProgress.width=119,this.maxLvImg.skin="talisman/txt_common_ymj_"+a+".png",this.maxLvImg.visible=!0)},i.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},t=i,u.XianfuHandBookItem=t}(modules=modules||{}),function(u){var e,d,r,m,l,o,c,f,h,t;function g(){this.successAddValue=0,this.maxRuningCountAddValue=0,this.dailySmeltTimeAddValue=0,this.smeltConsumeReduceValue=0,this.travelConsumeReduceValue=0,this.travelExpAddValue=0,this._lv=0,this._fengshuiLv=0,this._panelType=0,this._taskSchedule=0,this._buildInfo={},this._petInfos={},this.maxOutput=[],this.stageOutput=[],this.intervalOutPutTime=[],this._treasureInfos=[],this._activeGrade=[],this._taskInfos=[],this._xianfuMallList=[],this._fengshuiResList=[],this._handBookList={},this._handBookRes=new l,this._maxRuningCount=r.instance.getCfgById(27007)[1][0];var t=r.instance.getCfgById(27001)[1];this.maxOutput[0]=t[2],this.stageOutput[0]=t[1],this.intervalOutPutTime[0]=t[1],this.maxOutput[1]=t[5],this.stageOutput[1]=t[4],this.intervalOutPutTime[1]=t[4],t=r.instance.getCfgById(27002)[1],this.maxOutput[2]=t[1],this.maxOutput[3]=t[3],this.maxOutput[4]=t[5],t=r.instance.getCfgById(27004)[1],this.intervalOutPutTime[2]=t[0],this.intervalOutPutTime[3]=t[0],this.intervalOutPutTime[4]=t[0],this.taskActivesValue=[],this.taskActivesAward=[];for(var e=r.instance.getCfgById(27011)[2],i=0,n=e.length;i<n;i++){var s=e[i].substr(1,e[i].length-2).split("#"),o=parseInt(s[0]);this.taskActivesValue[i]=o,this.taskActivesAward[i]||(this.taskActivesAward[i]=[]);for(var a=1;a<s.length;a++)this.taskActivesAward[i].push(parseInt(s[a]))}this.buildType=-1,this.selectSite=-1,this.selectBuyProp=-1,this._handbookRPStrs=["xianfuBlueHandBookRP","xianfuVioletHandBookRP","xianfuOrangeHandBookRP","xianfuRedHandBookRP"],this._resListRPStrs=["xianfuArticleRP_0","xianfuArticleRP_1","xianfuArticleRP_2"],this.eventIds=[]}e=u.xianfu||(u.xianfu={}),d=u.redPoint.RedPointCtrl,r=u.config.BlendCfg,m=u.config.XianfuCfg,l=Laya.Dictionary,o=u.config.SceneHomesteadCfg,c=u.notice.DropNoticeManager,f=u.config.XianfuSkillCfg,h=u.config.XianfuBuildCfg,Object.defineProperty(g,"instance",{get:function(){return this._instance=this._instance||new g},enumerable:!0,configurable:!0}),g.prototype.updateProduceCoin=function(t){this._treasureInfos[0]=t[0],this._treasureInfos[1]=t[1],this._treasureInfos[3]=t[2],this._treasureInfos[4]=t[4],this._treasureInfos[5]=t[5],this._taskSchedule=t[3],GlobalData.dispatcher.event("XIANFU_SHENGJI_UPDATE"),GlobalData.dispatcher.event("XIANFU_BUILD_UPDATE"),this.checkShengjiRP()},g.prototype.getXianFuInfoReply=function(t){this._lv=t[0],this._treasureInfos[0]=t[1],this._treasureInfos[1]=t[2],this._treasureInfos[2]=t[4],this._treasureInfos[3]=t[3],this._treasureInfos[4]=t[7],this._treasureInfos[5]=t[8],this._taskSchedule=t[5],this._activeGrade=t[6],GlobalData.dispatcher.event("XIANFU_SHENGJI_UPDATE"),GlobalData.dispatcher.event("XIANFU_BUILD_UPDATE"),this.checkShengjiRP(),this.checkTaskRP()},g.prototype.updateInfo=function(t){this._lv=t[0],this._treasureInfos[2]=t[1],this._activeGrade=t[2],GlobalData.dispatcher.event("XIANFU_SHENGJI_UPDATE"),this.checkShengjiRP(),this.checkTaskRP(),m.instance.PetOpenLv[this._lv]&&e.XianfuCtrl.instance.getSpiritAnimalTravel([m.instance.PetOpenLv[this._lv]])},g.prototype.getBuildingInfoReply=function(t){var e=t[0];this._buildInfo[e]=t,this.checkAllRPEvent(),GlobalData.dispatcher.event("XIANFU_BUILD_UPDATE")},g.prototype.updateXianFuFengShuiInfo=function(t){this._fengshuiLv=t[0];for(var e=t[1],i=0,n=e.length;i<n;i++){var s=this._fengshuiResList[i]=e[i],o=u.config.XianfuDecorateCfg.instance.getCfgById(s),a=u.config.XianfuDecorateCfg.instance.getCfgById(s+1);this.fengshuiAddAttr(o,a)}this.checkArticleRP(),GlobalData.dispatcher.event("XIANFU_WIND_WATER_UPTATE")},g.prototype.xianFuEvent=function(t){1==(this._xianfuEvents=t)[0]&&e.XianfuCtrl.instance.getXianfuMall(),this.checkAllRPEvent(),GlobalData.dispatcher.event("XIANFU_EVENT_UPDATE")},g.prototype.updateSpiritAnimalTravel=function(t){this._petInfos[t[0]]=t,this.checkAllRPEvent(),GlobalData.dispatcher.event("XIANFU_PET_UPDATE")},g.prototype.updateXianFuTaskState=function(t){this._taskInfos=t[0],this.checkTaskRP(),GlobalData.dispatcher.event("XIANFU_TASK_UPDATE")},Object.defineProperty(g.prototype,"skillList",{get:function(){return this._skillList},set:function(t){this._skillList=t,this.checkShengjiRP(),GlobalData.dispatcher.event("XIANFU_SKILL_UPDATE")},enumerable:!0,configurable:!0}),g.prototype.xianfuMallReply=function(t){this._xianfuMallList=t},g.prototype.checkAllRPEvent=function(){var t=[];d.instance.setRPProperty("xianfuEventRP",!1);var e=this.checkEventRP();if(1==e)t.push(e-1);else if(0!==e)return-1!==this.eventIds.indexOf(e-1)?void d.instance.setRPProperty("xianfuEventRP",!0):(t.push(e-1),this.eventIds=t,d.instance.setRPProperty("xianfuEventRP",!0),void GlobalData.dispatcher.event("XIANFU_ALL_RP_EVENT"));this.julingEvent&&t.push(this.julingEvent),this.lianzhiEvent&&t.push(this.lianzhiEvent),this.lianzhiHaveTime&&t.push(this.lianzhiHaveTime),this.petEvent&&t.push(this.petEvent),this.petHaveTime&&t.push(this.petHaveTime),d.instance.setRPProperty("xianfuEventRP",0<t.length);for(var i=0,n=t.length;i<n;i++){var s=t[i];if(-1==this.eventIds.indexOf(s))return this.eventIds=t,void GlobalData.dispatcher.event("XIANFU_ALL_RP_EVENT")}this.eventIds=t},g.prototype.checkEventRP=function(){var t=this._xianfuEvents;return t&&t[1]?t[0]:0},Object.defineProperty(g.prototype,"julingEvent",{get:function(){for(var t=0;t<2;t++)if(this._buildInfo[t]&&3==this._buildInfo[t][3])return 5;return null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"lianzhiEvent",{get:function(){for(var t=2;t<5;t++)if(this._buildInfo[t]&&2==this._buildInfo[t][3])return 6;return null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"lianzhiHaveTime",{get:function(){for(var t=2;t<5;t++)if(this._buildInfo[t]&&0==this._buildInfo[t][3]){var e=this.getBuildInfo(t)[1],i=h.instance.getCfgByIdAndLv(t,e);if(!i)continue;for(var n=0,s=i[5];n<s.length;n++){var o=s[n],a=o[2];if(o[3]<=CommonUtil.getPropCountById(a))return 7}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"petEvent",{get:function(){for(var t in this._petInfos)if(2==this._petInfos[t][3])return 8;return null},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"petHaveTime",{get:function(){for(var t in this._petInfos)if(0==this._petInfos[t][3]){var e=this._petInfos[t][6];if(0<this._maxRuningCount-e)for(var i=u.config.XianfuTravelCfg.instance.ids,n=0,s=i.length;n<s;n++){var o=u.config.XianfuTravelCfg.instance.getCfgById(i[n])[4];if(Math.floor(o[1]*(1-.01*g.instance.travelConsumeReduceValue))<=this._treasureInfos[1])return 9}}return null},enumerable:!0,configurable:!0}),g.prototype.getIllustratedHandbookReply=function(t){for(var e=t[0],i=t[1],n=0,s=e.length;n<s;n++){var o=e[n][0],a=e[n][1];this._handBookList[o]=a}for(n=0,s=i.length;n<s;n++){o=i[n][0];var r=i[n][1];this._handBookRes.set(o,r)}this.checkHandBookRP(),GlobalData.dispatcher.event("HAND_BOOK_UPDATE")},g.prototype.updateIllustratedHandbook=function(t){for(var e=t[0],i=t[1],n=0,s=e.length;n<s;n++){var o=e[n][0],a=e[n][1];this._handBookList[o]=a}var r=new Array;for(n=0,s=i.length;n<s;n++){o=i[n][0];var l=i[n][1],h=this._handBookRes.get(o);null==h&&(h=0),0<l-h&&r.push([o,l-h,0,null]),this._handBookRes.set(o,l)}c.instance.addItems(r),this.checkHandBookRP(),GlobalData.dispatcher.event("HAND_BOOK_UPDATE")},g.prototype.checkShengjiRP=function(){if(this._lv){if(this._skillList&&!this._skillList.length){if(this._lv>=f.instance.firstLv)return d.instance.setRPProperty("xianfuShengjiRP",!0),!0}else if(this._skillList)for(var t=0;t<4;t++){for(var e=f.instance.pureIds[t],i=void 0,n=0,s=this._skillList;n<s.length;n++){var o=s[n];if(CommonUtil.getSkillPureIdById(o)==e){i=o;break}}i=i||CommonUtil.getSkillIdByPureIdAndLv(e);var a=f.instance.getCfgBySkillId(i+1),r=a?a[0]:null;if(a&&this._lv>=r)return d.instance.setRPProperty("xianfuShengjiRP",!0),!0}if(!m.instance.getCfgByLv(this._lv+1))return d.instance.setRPProperty("xianfuShengjiRP",!1),!1;for(var l=m.instance.getCfgByLv(this._lv)[0][3],h=(t=0,l.length);t<h;t++){var c=l[t][0],p=l[t][1];if(this._treasureInfos[c]<p)return d.instance.setRPProperty("xianfuShengjiRP",!1),!1}return d.instance.setRPProperty("xianfuShengjiRP",!0),!0}},g.prototype.checkTaskRP=function(){for(var t=0,e=this._taskInfos.length;t<e;t++)if(1==this._taskInfos[t][2])return d.instance.setRPProperty("xianfuTaskRP",!0),!0;for(t=0,e=this.taskActivesValue.length;t<e;t++)if(g.instance.taskSchedule>=g.instance.taskActivesValue[t]&&-1==g.instance.activeGrade.indexOf(t))return d.instance.setRPProperty("xianfuTaskRP",!0),!0;return d.instance.setRPProperty("xianfuTaskRP",!1),!1},g.prototype.checkHandBookRP=function(){for(var t=0;t<4;t++){d.instance.setRPProperty(this._handbookRPStrs[t],!1);var e=u.config.XianfuHandBookCfg.instance.getIdsByType(t);for(var i in e){var n=e[i],s=this._handBookList[n];s=s||0;var o=u.config.XianfuHandBookCfg.instance.getCfgByIdAndLv(n,s),a=u.config.XianfuHandBookCfg.instance.getCfgByIdAndLv(n,s+1),r=o[6][0];o[6][1]<=this._handBookRes.get(r)&&a&&d.instance.setRPProperty(this._handbookRPStrs[t],!0)}}},Object.defineProperty(g.prototype,"handbookRPStrs",{get:function(){return this._handbookRPStrs},enumerable:!0,configurable:!0}),g.prototype.checkArticleRP=function(){for(var t=!1,e=0;e<3;e++){for(var i=u.config.XianfuDecorateCfg.instance.getIdsByBigType(e),n=g.instance.fengshuiResList,s=0,o=n.length;s<o;s++)for(var a=n[s],r=0;r<i.length;r++)i[r]/100>>0==a/100>>0&&(i[r]=a);for(d.instance.setRPProperty(this._resListRPStrs[e],!1),s=0,o=i.length;s<o;s++){var l=u.config.XianfuDecorateCfg.instance.getCfgById(i[s])[1][0],h=u.config.XianfuDecorateCfg.instance.getCfgById(i[s])[1][1],c=u.bag.BagModel.instance.getItemCountById(l),p=u.config.XianfuDecorateCfg.instance.getCfgById(i[s]+1);if(h<=c&&p){d.instance.setRPProperty(this._resListRPStrs[e],!0),t=!0;break}}}return t},Object.defineProperty(g.prototype,"lv",{get:function(){return this._lv},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fengshuiLv",{get:function(){return this._fengshuiLv},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fengshuiResList",{get:function(){return this._fengshuiResList},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"taskSchedule",{get:function(){return this._taskSchedule},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"taskInfos",{get:function(){return this._taskInfos},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"handBook",{get:function(){return this._handBookList},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"xianfuEvent",{get:function(){return this._xianfuEvents},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"handBookRes",{get:function(){return this._handBookRes},enumerable:!0,configurable:!0}),g.prototype.treasureInfos=function(t){return this._treasureInfos[t]},g.prototype.getBuildInfo=function(t){return this._buildInfo[t]},Object.defineProperty(g.prototype,"panelType",{get:function(){return this._panelType},set:function(t){this._panelType=t},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"selectTaskActiveAward",{get:function(){return this._selectTaskActiveAward},set:function(t){this._selectTaskActiveAward=t},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"activeGrade",{get:function(){return this._activeGrade},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"xianfuMallIds",{get:function(){return this._xianfuMallList},enumerable:!0,configurable:!0}),g.prototype.getPetInfos=function(t){return this._petInfos[t]},Object.defineProperty(g.prototype,"maxRuningCount",{get:function(){return this._maxRuningCount+this.maxRuningCountAddValue},enumerable:!0,configurable:!0}),g.prototype.getAllPetInfos=function(){return this._petInfos},g.prototype.areaId=function(){if(!this._xianfuEvents)return-1;var t=this._xianfuEvents[0],e=this._xianfuEvents[3],i=this._xianfuEvents[4],n=o.instance.getCfgByLvAndWheel(this._fengshuiLv,e);if(!n)return-1;var s=-1;return 2==t?s=n[4][i-1][4]:3==t?s=n[5][i-1][2]:4==t?s=n[6][6]:5==t&&(s=n[6][6]),s},g.prototype.getHandbookStateById=function(t){var e=g.instance.handBook[t];e=e||0;var i=u.config.XianfuHandBookCfg.instance.getCfgByIdAndLv(t,e),n=i[6][0],s=i[6][1],o=g.instance.handBookRes.get(n);return e?e>=u.config.XianfuHandBookCfg.instance.maxLv?0:o&&s<=o?3:2:o&&s<=o?4:1},g.prototype.fengshuiAddAttr=function(t,e){var i=(e=e||t)[2],n=t[3][0];n=n||0,1==i?this.smeltConsumeReduceValue=n:2==i?this.successAddValue=n:3==i?this.dailySmeltTimeAddValue=n:4==i?this.travelConsumeReduceValue=n:5==i?this.travelExpAddValue=n:6==i&&(this.maxRuningCountAddValue=n)},g.prototype.getType0AttAddStr=function(t,e,i,n){var s,o=e?"聚宝":"汇灵";return 1==t?s="每秒"+o+"收益增加"+i+"点":2==t?s="每秒"+o+"收益增加"+i+"%":3==t&&(s="每秒"+o+"有"+i+"%概率"+n[3]+"倍暴击"),s},g.prototype.getAttAddStr=function(t,e){var i;return 1==t?i="炼制消耗灵气值减少"+e+"%":2==t?i="所有炼制成功率提升"+e+"%":3==t?i="开炉一次炼制次数上限增加"+e+"次":4==t?i="所有灵兽游历花费减少"+e+"%":5==t?i="所有灵兽游历经验增加"+e+"%":6==t&&(i="所有灵兽游历次数增加"+e+"次"),i},g.prototype.xianfuEventIsOpen=function(){return!!this.xianfuEvent&&this._xianfuEvents[1]},t=g,e.XianfuModel=t}(modules=modules||{}),function(h){var t,e,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=h.xianfu||(h.xianfu={}),i=ui.XianfuResItemUI,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.frameImg.visible=!1},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this.value=t,this.updateView()},s.prototype.updateView=function(){var t=this.value,e=h.config.XianfuDecorateCfg.instance.getCfgById(t),i=h.config.XianfuDecorateCfg.instance.getCfgById(t+1),n=e[6],s=e[7];this.iconImg.skin="assets/icon/ui/xianfu_decorate/"+s+".png",this.nameImg.skin="assets/icon/ui/xianfu_decorate/"+n+".png";var o=t%100;o?(this.lvTxt.text="Lv."+o,this.lvTxt.color="#4c5e8a",this.iconImg.gray=!1):(this.iconImg.gray=!0,this.lvTxt.text="未激活",this.lvTxt.color="#ff3e3e");var a=e[1][0],r=e[1][1],l=h.bag.BagModel.instance.getItemCountById(a);this.RPImg.visible=!!(r<=l&&i)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("XIANFU_WIND_WATER_UPTATE",this,this.updateView)},s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},n=s,t.XianfuResItem=n}(modules=modules||{}),function(t){var o,e,i,a,r,n;function s(){return null!==e&&e.apply(this,arguments)||this}o=t.xianfu||(t.xianfu={}),i=ui.SkillIconUI,a=t.config.XianfuSkillCfg,r=t.config.SkillPureCfg,e=i,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.handler),this.onAutoGlobalEvt("XIANFU_SHENGJI_UPDATE",this,this.update)},Object.defineProperty(s.prototype,"info",{set:function(t){this._id=t,this.update()},enumerable:!0,configurable:!0}),s.prototype.update=function(){var t=this._id%100>>0,e=r.instance.getCfgById(CommonUtil.getSkillPureIdById(this._id));this.iconImg.skin="assets/icon/skill/"+e[6]+".png";var i=o.XianfuModel.instance.lv,n=a.instance.getCfgBySkillId(this._id+1),s=n?n[0]:null;this.levTxt.text=t.toString(),this.iconImg.gray=0==t,this.levBox.visible=!this.iconImg.gray,n&&s<=i?t?n?(this.stateImg.skin="common/txt_xq_ksj.png",this.state=!0):this.state=!1:(this.stateImg.skin="common/txt_xq_kjh.png",this.state=!0):this.state=!1},Object.defineProperty(s.prototype,"state",{set:function(t){t?(this._eff||(this._eff=CommonUtil.creatEff(this,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0),this._eff.visible=!0),this._eff.play(),this.stateImg.visible=this._eff.visible=this.dotImg.visible=!0):(this._eff&&(this._eff.visible=!1,this._eff.stop()),this.stateImg.visible=this.dotImg.visible=!1)},enumerable:!0,configurable:!0}),s.prototype.handler=function(){WindowManager.instance.open(369,this._id)},s.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this)},n=s,o.XianfuSkillItem=n}(modules=modules||{}),function(t){var a,e,i,n,r,s;function o(){return null!==e&&e.apply(this,arguments)||this}a=t.xianfu||(t.xianfu={}),i=t.bag.BagItem,n=t.notice.SystemNoticeManager,r=t.config.XianfuBuildCfg,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.lvImg.visible=this.needTip=!1,this.addChild(this._numTxt)},o.prototype.setData=function(t){var e=(t=t)[0],i=t[1];this._index=i;var n=a.XianfuModel.instance.buildType,s=a.XianfuModel.instance.getBuildInfo(n)[1],o=r.instance.getCfgByIdAndLv(n,s)[5].length;this._state=i<o,this._qualityBg.gray=this._icon.gray=this.lockImg.gray=this.lockImg.visible=!this._state,this.selectEnable=this._state,this.dataSource=e,this.isbtnClipIsPlayer=!1},o.prototype.clickHandler=function(){e.prototype.clickHandler.call(this),this._state||n.instance.addNotice("丹炉达到"+r.instance.getOpenLvByTypeAndIndex(a.XianfuModel.instance.buildType,this._index)+"级解锁",!0)},o.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},s=o,a.XianfuSmeltItem=s}(modules=modules||{}),function(t){var e,i,n,h,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.xianfu||(t.xianfu={}),n=ui.XianfuTaskItemUI,h=t.config.XianfuTaskCfg,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._btnClip=CommonUtil.creatEff(this.getBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnClip.play()},o.prototype.setData=function(t){var e=t,i=this._taskId=e[0],n=e[2],s=h.instance.getCfgById(i),o=s[2];this.nameTxt.text=o;var a,r=e[1];a=1==s[1]?s[3][0]:s[3][1],this.rotioTxt.text=r+"/"+a;var l=s[4];this.iconImg.skin=CommonUtil.getIconById(l[0][0]),this.awardTxt.text=l[0][1].toString(),this._btnClip.visible=this.receivedImg.visible=this.getBtn.visible=!1,this._btnClip.visible=1==n,0==n?(this.receivedImg.visible=!0,this.receivedImg.skin="common/txt_commmon_wdc.png"):1==n?this.getBtn.visible=this._btnClip.visible=!0:(this.receivedImg.visible=!0,this.receivedImg.skin="common/txt_commmon_ylq.png")},o.prototype.getBtnHandler=function(){e.XianfuCtrl.instance.getXianFuTaskAward([this._taskId])},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this,t)},s=o,e.XianfuTaskItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.zxian_yu||(t.zxian_yu={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.height=122,this.nameVisible=!0,this.needTip=!0},o.prototype.setDataSource=function(t){i.prototype.setDataSource.call(this,t),this._nameTxt.visible=!1},s=o,e.ZXianYuAllRewardItem=s}(modules=modules||{}),function(t){var i,n,e,s,o;function a(){return null!==n&&n.apply(this,arguments)||this}i=t.zxian_yu||(t.zxian_yu={}),e=t.bag.BaseItem,s=laya.ui.Image,n=e,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),this.needTip=!1,this._select=!1,this._selectImg=new s,this._selectImg.skin="common/image_common_dg.png",this._selectImg.pos(13,15),this._selectImg.visible=!0,this.addChild(this._selectImg),this.nameVisible=!0},a.prototype.setDataSource=function(t){n.prototype.setDataSource.call(this,t),this._cfg=t,null==this._cfg?(this._select=!1,this._selectImg.visible=!1):0<=i.ZXianYuModel.instance.selectItem.indexOf(this._cfg)?(this._select=!0,this._selectImg.visible=!0):(this._select=!1,this._selectImg.visible=!1)},a.prototype.clickHandler=function(){if(n.prototype.clickHandler.call(this),null!=this._cfg){var t=i.ZXianYuModel.instance.selectItem;if(0==this._select)this._select=!0,this._selectImg.visible=!0,t.push(this._cfg),i.ZXianYuModel.instance.selectItem=t;else{this._select=!1,this._selectImg.visible=!1;var e=t.indexOf(this._cfg);t.splice(e,1),i.ZXianYuModel.instance.selectItem=t}}},a.prototype.destroy=function(){this._selectImg&&(this._selectImg.destroy(!0),this._selectImg=null),n.prototype.destroy.call(this,!0)},o=a,i.ZXianYuBagItem=o}(modules=modules||{}),function(t){var e,s,i;function n(t,e,i){var n=s.call(this)||this;return n.startY=0,n._hight=0,n._oneBoll=!0,n._twoBoll=!0,n._threeBoll=!0,n._htmlArr=i,n.innerHTML="",n.width=t,n.style.fontFamily="SimHei",n.style.align="left",n.style.fontSize=e,n}e=t.zxian_yu||(t.zxian_yu={}),s=laya.html.dom.HTMLDivElement,__extends(n,s),n.prototype.setText=function(t,e,i){i&&(this.innerHTML=i),this.startY=t,this._hight=e,this._oneBoll=!1,this._twoBoll=!1,this._threeBoll=!1,this.pos(0,this.startY),this.visible=!0},n.prototype.closeTimer=function(){this._oneBoll=!0,this._twoBoll=!0,this._threeBoll=!0},n.prototype.updateList=function(){this._threeBoll||(this.y-=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this.y<=this._hight-this.contextHeight&&!this._oneBoll&&(this._oneBoll=!0,GlobalData.dispatcher.event("ZXIANYU__SHOWHTML")),this.y<=-this.contextHeight&&!this._twoBoll&&(this._twoBoll=!0,this._threeBoll=!0,this.visible=!1))},n.prototype.destroy=function(t){void 0===t&&(t=!0),Laya.timer.clear(this,this.updateList),s.prototype.destroy.call(this,t)},i=n,e.HtmlReward=i}(modules=modules||{}),function(r){var t,l,e;function i(){return null!==l&&l.apply(this,arguments)||this}t=r.zxian_yu||(r.zxian_yu={}),l=ui.ZXianYuItemUI,__extends(i,l),i.prototype.setData=function(t){if(l.prototype.setData.call(this,t),t){var e=t[0],i=t[1],n=r.config.RechargeCfg.instance.getRecharCfgByIndex(e),s=n?n[1]:"";this.nameTxt.text="充"+s+"可获得",this.awardTxt.text="*"+i;var o=this.nameTxt.textWidth+this.iconImg.width+this.awardTxt.textWidth,a=(this.width-o)/2;this.nameTxt.x=a,this.iconImg.x=this.nameTxt.x+this.nameTxt.textWidth,this.awardTxt.x=this.iconImg.x+this.iconImg.width}},e=i,t.ZXianYuItem=e}(modules=modules||{}),function(a){var r,l,h,c,t;function e(){return l.call(this)||this}r=a.zxian_yu||(a.zxian_yu={}),h=a.config.yuGeCfg,c=a.bag.BagUtil,l=ui.ZXianYuStoreItemUI,__extends(e,l),e.prototype.initialize=function(){l.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.zeKouHTml,"#ffffff","SimHei",25,"center"),this.zeKouHTml.style.strokeColor="#610101",this.zeKouHTml.style.stroke=3,this.zeKouHTml.style.valign="middle"},e.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.puchaseBtn,this,this.puchaseBtnHandler)},e.prototype.setData=function(t){if(l.prototype.setData.call(this,t),t){this._cfg=t;var e=this._cfg[0],i=this._cfg[1],n=h.instance.getCfgById(e),s=n[1],o=[s[0],s[1],0,null];this.item.dataSource=o;var a=n[6];this.priceTxt.text=""+n[3],this.nowPriceTxt.text=""+n[4],this.zeKouHTml.innerHTML=Math.round(n[5])+"<span style='color:#ffffff;font-size: 22px'>折</span>",this.zeKouImg.skin=1==a?"common/image_common_hongbq.png":2==a?"common/image_common_hbq.png":"common/image_common_hongbq.png",this.itemName.color=CommonUtil.getColorById(s[0]),this.itemName.text=this.item._nameTxt.text,this.underLine.width=this.priceImg.width+this.priceTxt.width,this.maxCountTxt.visible=1==i,this.puchaseBtn.visible=1!=i}},e.prototype.puchaseBtnHandler=function(){if(this._cfg){var t=this._cfg[0],e=this._cfg[1],i=h.instance.getCfgById(t),n=i[1],s=i[4];if(1==e)return void a.notice.SystemNoticeManager.instance.addNotice("此商品购买已达上限",!0);if(r.ZXianYuModel.instance.xianyu>=s){var o=[];o.push([n[0],1,0,null]),c.canAddItemsByBagIdCount(o)&&CommonUtil.alert("温馨提示","是否花费<img src='common/shenghuyu.png'/><span style='color:#b15315'>"+s+"</span>购买<span style='color:#b15315'>"+CommonUtil.getNameByItemId(n[0])+"</span>",[Handler.create(this,function(){r.ZXianYuCtrl.instance.BuyYuGeGoods(t)})])}else c.openLackPropAlert(a.zxian_yu.ZXianYuModel.instance.id,1)}},t=e,r.ZXianYuStoreItem=t}(modules=modules||{});