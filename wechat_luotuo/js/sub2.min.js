"use strict";var modules;!function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.single_dog_continuous_pay||(t.single_dog_continuous_pay={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(323==t[e]&&s.instance.getFuncIsOpen(323))return void i.SingleDogContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log(" 单身狗 连续充值 领取奖励 请求...............:   "+t),this.publish(2106269,[4,t])},o=a,i.SingleDogContinuousPayCtrl=o}(modules=(modules=window.modules)||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.single_dog_cumulate_pay||(t.single_dog_cumulate_pay={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(324==t[e]&&s.instance.getFuncIsOpen(324))return void i.SingleDogCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log(" 单身狗 累计充值 领取奖励 请求...............:   "+t),this.publish(2106268,[4,t])},o=a,i.SingleDogCumulatePayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.single_dog_seven_days_consume||(t.single_dog_seven_days_consume={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(325==t[e]&&s.instance.getFuncIsOpen(325))return void i.SingleDogSevenDaysConsumeModel.instance.setRP()},a.prototype.DrawFestCostTotal=function(t){console.log(" 单身狗 七日消费 领取奖励 请求...............:   "+t),this.publish(2106272,[4,t])},o=a,i.SingleDogSevenDaysConsumeCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.single_dog_seven_days_pay||(t.single_dog_seven_days_pay={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(326==t[e]&&s.instance.getFuncIsOpen(326))return void i.SingleDogSevenDaysPayModel.instance.setRP()},a.prototype.DrawFestPayTotal=function(t){console.log(" 单身狗 七日累充 领取奖励 请求...............:   "+t),this.publish(2106271,[4,t])},o=a,i.SingleDogSevenDaysPayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.single_dog_single_pay||(t.single_dog_single_pay={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(327==t[e]&&s.instance.getFuncIsOpen(327))return void i.SingleDogSinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 单身狗 单笔充值 领取奖励 请求...............:   "+t),this.publish(2106267,[4,t])},o=a,i.SingleDogSinglePayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.single_dog_treasure||(t.single_dog_treasure={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("BAG_UPDATE",this.setRP),i.SingleDogTreasureModel.instance,this.getNationalXunbaoRank(),this.GetNationalXunbaoScoreList(),this.GetNationalXunbaoScoreAndState()},a.prototype.setRP=function(){i.SingleDogTreasureModel.instance.setRP()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(328==t[e]&&s.instance.getFuncIsOpen(328))return void i.SingleDogTreasureModel.instance.setRP()},a.prototype.GetNationalXunbaoScoreAndState=function(){this.publish(4194808,[i.SingleDogTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoBroadcastRecords=function(){this.publish(4194807,[i.SingleDogTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoScoreList=function(){this.publish(4194806,[i.SingleDogTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoRank=function(){this.publish(4194804,[i.SingleDogTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoScoreAward=function(){this.publish(4194805,[i.SingleDogTreasureModel.instance.festivalType])},a.prototype.festivalNationalXunbao=function(t){this.publish(2106273,[i.SingleDogTreasureModel.instance.festivalType,t])},o=a,i.SingleDogTreasureCtrl=o}(modules=modules||{}),function(n){var s,t,e,i,o,a;function r(){return t.call(this)||this}s=n.single_dog_collection||(n.single_dog_collection={}),e=n.core.BaseCtrl,i=n.notice.SystemNoticeManager,o=n.funcOpen.FuncOpenModel,t=e,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16788334,this.GetCollectionTaskReply),this.subscribe(16788335,this.DrawCollectionReply),this.GetCollection(61),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(341==i){if(o.instance.getFuncIsOpen(341))return this.GetCollection(4),void s.SingleDogCollectionModel.instance.setRP()}else if(1021==i&&o.instance.getFuncIsOpen(1021))return this.GetCollection(n.festival.FestivalModel.instance.AnniversaryDayType),void s.SingleDogCollectionModel.instance.setRP()}},r.prototype.GetCollectionTaskReply=function(t){console.log("奖励预览 : ",t),s.SingleDogCollectionModel.instance.pushData(t)},r.prototype.DrawCollectionReply=function(t){0==t[0]?i.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},r.prototype.DrawCollection=function(t){this.publish(2107566,[t,0])},r.prototype.GetCollection=function(t){this.publish(2107565,[t])},a=r,s.SingleDogCollectionCtrl=a}(modules=modules||{}),function(a){var e,t,i,n,s;function o(){return t.call(this)||this}e=a.single_dog_good_man||(a.single_dog_good_man={}),i=a.core.BaseCtrl,n=a.notice.SystemNoticeManager,t=i,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16788327,this.GetGoodRecommandReply),this.subscribe(16788328,this.GetReceiveRecordReply),this.subscribe(16788329,this.GetSendRecordReply),this.subscribe(16788333,this.GiveGoodCardReply),this.subscribe(16788331,this.FindGooderReply),this.subscribe(16788332,this.GetGooderShowReply),o.instance.GetSendRecord(12),o.instance.GetSendRecord(54),o.instance.GetSendRecord(64),o.instance.GetSendRecord(65),o.instance.GetSendRecord(61),o.instance.GetSendRecord(67)},o.prototype.GiveGoodCard=function(t,e,i){console.log("送好人卡................. festivalType: "+t+" roleId: "+e+"  count:"+i),this.publish(2107562,[t,e,i])},o.prototype.FindGooder=function(t,e,i){console.log("搜索好人.................:groupId:"+t+" name:"+e+" festivalType:"+i+" "),this.publish(4195007,[t,e,i])},o.prototype.GetGooderShow=function(t,e){console.log("获得好人信息.................:objId:"+t+" festivalType:"+e),this.publish(4195008,[t,e])},o.prototype.GetGoodRecommand=function(t){var o=new Array;function e(t){if(a.faction.FactionModel.instance.hasFaction&&1<a.faction.FactionModel.instance.memberList.length)for(var i=[],e=function(){for(var t=i.length=0;t<a.faction.FactionModel.instance.memberList.length;t++){var e=a.faction.FactionModel.instance.memberList[t][1];e!=PlayerModel.instance.actorId&&-1===o.indexOf(e)&&i.push(e)}},n=function(){if(0<i.length){var t=i[CommonUtil.getRandomInt(0,i.length-1)];o.push(t)}},s=0;s<t;s++)e(),n()}if(a.marry.MarryModel.instance.isMarried&&o.push(a.marry.MarryModel.instance.half[0]),console.log("筛选仙缘之后:"+o+"剩余位置:"+(3-o.length)),3==3-o.length?(e(2),console.log("没有仙侣 首次筛选 两个 盟友 之后:"+o+"剩余位置:"+(3-o.length))):(e(1),console.log("有仙侣 首次筛选 一个 盟友 之后:"+o+"剩余位置:"+(3-o.length))),a.warband.WarbandModel.instance.info&&1<a.warband.WarbandModel.instance.info[4].length){var i=3-o.length;i&&(function(t){if(a.warband.WarbandModel.instance.info&&1<a.warband.WarbandModel.instance.info[4].length)for(var i=[],e=function(){for(var t=i.length=0;t<a.warband.WarbandModel.instance.info[4].length;t++){var e=a.warband.WarbandModel.instance.info[4][t][0];e!=PlayerModel.instance.actorId&&-1===o.indexOf(e)&&i.push(e)}},n=function(){if(0<i.length){var t=i[CommonUtil.getRandomInt(0,i.length-1)];o.push(t)}},s=0;s<t;s++)e(),n()}(i),console.log("有战队 并且还有剩余位置 筛选战友后:"+o+"剩余位置:"+(3-o.length)),(i=3-o.length)&&(e(i),console.log("筛选战友后 还有位置 最后一次尝试筛选盟友:"+o+"剩余位置:"+(3-o.length))))}else{var n=3-o.length;n&&(e(n),console.log("无战队 还有位置 最后一次尝试筛选盟友:"+o+"剩余位置:"+(3-o.length)))}console.log("好人卡推荐 最终筛选数据.................outlist:"+o),this.publish(4195006,[t,o])},o.prototype.GetSendRecord=function(t){console.log("赠送好人卡记录................."),this.publish(4195010,[t])},o.prototype.GetReceiveRecord=function(t){console.log("获取好人卡记录................."),this.publish(4195009,[t])},o.prototype.GetGoodRecommandReply=function(t){console.log("好人卡推荐返回 :   ",t),e.SingleDogGoodManModel.instance.uodateInfo(t)},o.prototype.GetReceiveRecordReply=function(t){console.log("获取好人卡记录返回 :   ",t),e.SingleDogGoodManModel.instance.uodateInfo1(t)},o.prototype.GetSendRecordReply=function(t){console.log("赠送好人卡记录返回 :   ",t),e.SingleDogGoodManModel.instance.uodateInfo2(t)},o.prototype.FindGooderReply=function(t){console.log("搜索好人返回 :   ",t),0==t[0]?(n.instance.addNotice("搜索成功",!1),GlobalData.dispatcher.event("FIND_GOODER_REPLY",[t[1]])):CommonUtil.noticeError(t[0])},o.prototype.GetGooderShowReply=function(t){console.log("获取好人信息返回 :   ",t),0==t[0]&&GlobalData.dispatcher.event("GET_GOODER_SHOW_REPLY",[t[1]])},o.prototype.GiveGoodCardReply=function(t){0==t[0]?n.instance.addNotice("赠送成功",!1):CommonUtil.noticeError(t[0])},s=o,e.SingleDogGoodManCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.single_dog_sart||(t.single_dog_sart={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16788326,this.GetGoodRankReply)},o.prototype.GetGoodRank=function(t){console.log("获取好人榜................."+t),this.publish(4195004,[t])},o.prototype.GetGoodRankReply=function(t){console.log("获取好人榜 返回 :   ",t),e.SingleDogSartModel.instance.uodateInfo(t)},s=o,e.SingleDogSartCtrl=s}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return e.call(this)||this}n=t.single_dog_score_rank||(t.single_dog_score_rank={}),i=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=i,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16788330,this.GetHelperRankReply),this.subscribe(16788336,this.GetGiveTaskReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getDate(),Laya.timer.loop(2e3,this,function(){n.SingleDogScoreRankModel.instance.setAllRP()})},a.prototype.getDate=function(){this.GetGiveTask(12),this.GetGiveTask(54),this.GetGiveTask(64),this.GetGiveTask(48),this.GetGiveTask(52),this.GetGiveTask(65),this.GetGiveTask(61),this.GetGiveTask(67)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];if((340==i||399==i||799==i||812==i||834==i||1049==i||873==i)&&(s.instance.getFuncIsOpen(340)||s.instance.getFuncIsOpen(399)||s.instance.getFuncIsOpen(799)||s.instance.getFuncIsOpen(812)||s.instance.getFuncIsOpen(873)||s.instance.getFuncIsOpen(834)||s.instance.getFuncIsOpen(1049)))return void n.SingleDogScoreRankModel.instance.setAllRP()}},a.prototype.GetHelperRank=function(t){console.log("获取助攻榜................."),this.publish(4195005,[t])},a.prototype.GetGiveTask=function(t){console.log("赠送任务................."+t),this.publish(2107563,[t])},a.prototype.DrawGiveTask=function(t,e){console.log("领取赠送任务奖励................."),this.publish(2107564,[t,e])},a.prototype.GetHelperRankReply=function(t){console.log("获取助攻榜返回 :   ",t),n.SingleDogScoreRankModel.instance.uodateInfo(t)},a.prototype.GetGiveTaskReply=function(t){console.log("赠送任务返回 :   ",t),n.SingleDogScoreRankModel.instance.uodateInfo1(t)},o=a,n.SingleDogScoreRankCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.zhiZhenSinglePay||(e.zhiZhenSinglePay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(390==t[e]&&s.instance.getFuncIsOpen(390))return void i.ZhiZhenSinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 至臻 单笔充值 领取奖励 请求...............:   "+t),this.publish(2106267,[e.festival.FestivalModel.instance.zhiZhenType,t])},o=a,i.ZhiZhenSinglePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.zhiZhenCumulatePay||(e.zhiZhenCumulatePay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(391==t[e]&&s.instance.getFuncIsOpen(391))return void i.ZhiZhenCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log(" 至臻 累计充值 领取奖励 请求...............:   "+t),this.publish(2106268,[e.festival.FestivalModel.instance.zhiZhenType,t])},o=a,i.ZhiZhenCumulatePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.zhiZhenContinuousPay||(e.zhiZhenContinuousPay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(392==t[e]&&s.instance.getFuncIsOpen(392))return void i.ZhiZhenContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log(" 至臻 连续充值 领取奖励 请求...............:   "+t),this.publish(2106270,[e.festival.FestivalModel.instance.zhiZhenType,t])},o=a,i.ZhiZhenContinuousPayCtrl=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.dataArr=GlobalData.getConfig("consume_rank")},n.prototype.getCfgByRank=function(t){for(var e=0;e<this.dataArr.length;++e)if(t+1<=this.dataArr[e][0][1])return this.dataArr[e]},i=n,e.ConsumeRankCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.ZhiZhenPayRank||(t.ZhiZhenPayRank={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){},s=o,e.ZhiZhenPayRankCtrl=s}(modules=modules||{}),function(t){var e,i;function n(){}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getTaskList=function(t,e,i){for(var n=[],s=GlobalData.getConfig("hide_treasure_reward"),o=0;o<s.length;++o)s[o][1]===t&&s[o][2][0]<=e&&s[o][2][1]>=e&&s[o][3][0]<=i&&s[o][3][1]>=i&&n.push(s[o]);return n},n.prototype.getRankCfg=function(t,e,i){for(var n=GlobalData.getConfig("hide_treasure_rank"),s=0;s<n.length;++s)if(n[s][1]===t&&n[s][2][0]<=e&&n[s][2][1]>=e&&n[s][0][0]<=i&&n[s][0][1]>=i)return n[s];return null},n.prototype.getLayerCfg=function(t,e,i,n){for(var s=GlobalData.getConfig("hide_treasure"),o=0;o<s.length;++o)if(s[o][1]===t&&s[o][0]===e&&s[o][2][0]<=i&&s[o][2][1]>=i&&s[o][3][0]<=n&&s[o][3][1]>=n)return s[o];return null},n.prototype.getLayerList=function(t,e,i){for(var n=[],s=GlobalData.getConfig("hide_treasure"),o=0;o<s.length;++o)s[o][1]===t&&s[o][2][0]<=e&&s[o][2][1]>=e&&s[o][3][0]<=i&&s[o][3][1]>=i&&n.push(s[o]);return n},i=n,e.TreasureLandCfg=i}(modules=modules||{}),function(a){var t,e,r,i,l,n,s;function o(){this.diceIds=e.instance.getCfgById(92001)[1],this.skipCheck=!1}t=a.treasureLand||(a.treasureLand={}),e=a.config.BlendCfg,r=a.redPoint.RedPointCtrl,i=a.bag.BagModel,l=a.config.TreasureLandCfg,n=a.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.updateFestivalInfo=function(){this.fType?(n.instance.setActionOpen(678,1),n.instance.setActionOpen(679,1),n.instance.setActionOpen(680,1),n.instance.setActionOpen(681,1),t.TreasureLandCtrl.instance.GetHideTreasure(this.fType),t.TreasureLandCtrl.instance.GetHTRewardInfo(this.fType),t.TreasureLandCtrl.instance.GetHideTreasureRank(this.fType)):(n.instance.setActionOpen(678,2),n.instance.setActionOpen(679,2),n.instance.setActionOpen(680,2),n.instance.setActionOpen(681,2),r.instance.setRPProperty("treasureLandRP",!1),r.instance.setRPProperty("treasureLandBagRP",!1),r.instance.setRPProperty("treasureLandTaskRP",!1))},o.prototype.checkDiceRP=function(){if(this.fType){var t=0<CommonUtil.getPropCountById(this.diceIds[0])+CommonUtil.getPropCountById(this.diceIds[1]);r.instance.setRPProperty("treasureLandRP",t)}},o.prototype.checkBagRP=function(){if(this.fType){var t=i.instance.getItemsByBagId(11)||[],e=t&&0<t.length;r.instance.setRPProperty("treasureLandBagRP",e)}},o.prototype.checkTaskRP=function(){if(this.fType){for(var t=l.instance.getTaskList(this.fType,a.festival.FestivalModel.instance.getCrossOpenServerDay(this.fType),a.festival.FestivalModel.instance.getDayByFestivalType(this.fType)),e=this.rewardInfo?this.rewardInfo[0]:[],i=!1,n=0;n<t.length;++n){var s=this.rewardInfo?this.rewardInfo[1]:0,o=t[n][4];if(-1===e.indexOf(t[n][0])&&o<=s){i=!0;break}}r.instance.setRPProperty("treasureLandTaskRP",i)}},s=o,t.TreasureLandModel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("festival_open")},n.prototype.getCfgByType=function(t){return this._table[t]},n.prototype.isPlatFestival=function(t){var e=this._table[t];return!!e&&!!e[9]},i=n,e.FestivalOpenCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._table=GlobalData.getConfig("festival_swap")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgbyTypeDay=function(t,e){var i=[];for(var n in this._table){var s=this._table[n],o=s[2][0],a=s[2][1];t===s[1]&&o<=e&&e<=a&&i.push(s)}return i},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.FestivalSwapCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._typeTable={},this._cfgs=GlobalData.getConfig("festival_daily");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t],n=i[0],s=this._typeTable[n];s||(s=[],this._typeTable[n]=s),s.push(i)}}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgsByType=function(t){return this._typeTable[t]},n.prototype.getCfgsByTypeDay=function(t,e){var i=[],n=this._typeTable[t];if(!n)return i;for(var s=0,o=n.length;s<o;s++){var a=n[s];e>=a[1][0]&&e<=a[1][1]&&i.push(a)}return i},n.prototype.getCfgByTypeDayCount=function(t,e,i){var n=this._typeTable[t];if(!n)return null;for(var s=0,o=n.length;s<o;s++){var a=n[s],r=a[1][0],l=a[1][1];if(r<=e&&e<=l&&i===a[2])return a}return null},i=n,e.FestivalDailyCfg=i}(modules=modules||{}),function(C){var t,x,n,d,y,g,p,u,B,S,e;function i(){this.zhiZhenType=48,this.zhiZhenTypeEx=31,this.PerfectestTenType=65,this.PerfectestTenTypeEx=46,this.BarDayType=64,this.BarDayTypeEx=43,this.SpringSceneryType=67,this.SpringSceneryTypeEx=47,this.AnniversaryDayType=61,this.GrainFullType=47,this.ChildrensDayType=54,this.SpaceTravelType=66,this.info={},this.curPayState={}}t=C.festival||(C.festival={}),x=C.funcOpen.FuncOpenModel,n=C.customData.CustomDataModel,d=C.config.FestivalSwapCfg,y=C.bag.BagModel,g=C.redPoint.RedPointCtrl,p=C.config.FestivalDailyCfg,u=C.vip.VipModel,B=C.config.FestivalOpenCfg,S=C.treasureLand.TreasureLandModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"zhiZhenHintArr",{get:function(){return i.instance.hintArr16},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"PerfectestTenHintArr",{get:function(){return i.instance.hintArr18},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"BarDayHintArr",{get:function(){return i.instance.hintArr17},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"SpringSceneryHintArr",{get:function(){return i.instance.hintArr19},enumerable:!0,configurable:!0}),i.prototype.updateAll=function(){C.national_day_treasure.NationalDayTreasureModel.instance.uodateInfo(),C.single_dog_continuous_pay.SingleDogContinuousPayModel.instance.uodateInfo(),C.single_dog_cumulate_pay.SingleDogCumulatePayModel.instance.uodateInfo(),C.single_dog_seven_days_consume.SingleDogSevenDaysConsumeModel.instance.uodateInfo(),C.single_dog_seven_days_pay.SingleDogSevenDaysPayModel.instance.uodateInfo(),C.single_dog_single_pay.SingleDogSinglePayModel.instance.uodateInfo(),C.single_dog_treasure.SingleDogTreasureModel.instance.uodateInfo(),C.single_dog_store.SingleDogStoreModel.instance.uodateInfo(),C.zhiZhenSinglePay.ZhiZhenSinglePayModel.instance.uodateInfo(),C.zhiZhenContinuousPay.ZhiZhenContinuousPayModel.instance.uodateInfo(),C.zhiZhenCumulatePay.ZhiZhenCumulatePayModel.instance.uodateInfo(),C.zhiZhenStore.ZhiZhenStoreModel.instance.uodateInfo(),C.ZhiZhenPayRank.ZhiZhenPayRankModel.instance.uodateInfo(),C.he_qu_continuous_pay.HeQuContinuousPayModel.instance.uodateInfo(),C.he_qu_cumulate_pay.HeQuCumulatePayModel.instance.uodateInfo(),C.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.uodateInfo(),C.he_qu_online_reward.HeQuOnlineRewardModel.instance.uodateInfo(),C.zadan.ZaDanModel.instance.updateFestivalInfo(),C.mysterious_store.MysteriousStoreModel.instance.updateInfo(),C.treasureLand.TreasureLandModel.instance.updateFestivalInfo(),C.ruins.RuinsModel.instance.updateFestivalInfo(),C.grain_full_store.GrainFullStoreModel.instance.uodateInfo(),C.grain_full_treasure.GrainFullTreasureModel.instance.uodateInfo(),C.grain_full_single_pay.GrainFullSinglePayModel.instance.uodateInfo(),C.grain_full_cumulate_pay.GrainFullCumulatePayModel.instance.uodateInfo(),C.grain_full_continuous_pay.GrainFullContinuousPayModel.instance.uodateInfo(),C.grain_full_seven_days_consume.GrainFullSevenDaysConsumeModel.instance.uodateInfo(),C.childrens_day_continuous_pay.ChildrensDayContinuousPayModel.instance.uodateInfo(),C.childrens_day_cumulate_pay.ChildrensDayCumulatePayModel.instance.uodateInfo(),C.childrens_day_seven_days_consume.ChildrensDaySevenDaysConsumeModel.instance.uodateInfo(),C.childrens_day_seven_days_pay.ChildrensDaySevenDaysPayModel.instance.uodateInfo(),C.childrens_day_single_pay.ChildrensDaySinglePayModel.instance.uodateInfo(),C.childrens_day_treasure.ChildrensDayTreasureModel.instance.uodateInfo(),C.childrens_day_store.ChildrensDayStoreModel.instance.uodateInfo(),C.childrens_day_pay_rank.ChildrensDayPayRankModel.instance.uodateInfo(),C.he_qu_store.HeQuStoreModel.instance.uodateInfo(),C.bar_day_continuous_pay.BarDayContinuousPayModel.instance.uodateInfo(),C.bar_day_cumulate_pay.BarDayCumulatePayModel.instance.uodateInfo(),C.bar_day_store.BarDayStoreModel.instance.uodateInfo(),C.bar_day_single_pay.BarDaySinglePayModel.instance.uodateInfo(),C.bar_day_seven_days_consume.BarDaySevenDaysConsumeModel.instance.uodateInfo(),C.anniversary_day_continuous_pay.AnniversaryDayContinuousPayModel.instance.uodateInfo(),C.anniversary_day_cumulate_pay.AnniversaryDayCumulatePayModel.instance.uodateInfo(),C.anniversary_day_seven_days_consume.AnniversaryDaySevenDaysConsumeModel.instance.uodateInfo(),C.anniversary_day_seven_days_pay.AnniversaryDaySevenDaysPayModel.instance.uodateInfo(),C.anniversary_day_single_pay.AnniversaryDaySinglePayModel.instance.uodateInfo(),C.anniversary_day_treasure.AnniversaryDayTreasureModel.instance.uodateInfo(),C.anniversary_day_store.AnniversaryDayStoreModel.instance.uodateInfo(),C.anniversary_day_pay_rank.AnniversaryDayPayRankModel.instance.uodateInfo(),C.space_travel_store.SpaceTravelStoreModel.instance.uodateInfo(),C.space_travel_treasure.SpaceTravelTreasureModel.instance.uodateInfo(),C.space_travel_single_pay.SpaceTravelSinglePayModel.instance.uodateInfo(),C.space_travel_cumulate_pay.SpaceTravelCumulatePayModel.instance.uodateInfo(),C.space_travel_continuous_pay.SpaceTravelContinuousPayModel.instance.uodateInfo(),C.space_travel_seven_days_consume.SpaceTravelSevenDaysConsumeModel.instance.uodateInfo(),C.perfectest_ten_single_pay.PerfectestTenSinglePayModel.instance.uodateInfo(),C.perfectest_ten_continuous_pay.PerfectestTenContinuousPayModel.instance.uodateInfo(),C.perfectest_ten_cumulate_pay.PerfectestTenCumulatePayModel.instance.uodateInfo(),C.perfectest_ten_store.PerfectestTenStoreModel.instance.uodateInfo(),C.perfectest_ten_pay_rank.PerfectestTenPayRankModel.instance.uodateInfo(),C.nian_end_happy_seven_days_pay.NianEndHappySevenDaysPayModel.instance.uodateInfo(),C.nian_end_one_buy.NianEndOneBuyCtrl.instance.requestData(),C.family_party.FamilyPartyCtrl.instance.getAllPartyInfo(),C.spring_scenery_continuous_pay.SpringSceneryContinuousPayModel.instance.uodateInfo(),C.spring_scenery_cumulate_pay.SpringSceneryCumulatePayModel.instance.uodateInfo(),C.spring_scenery_store.SpringSceneryStoreModel.instance.uodateInfo(),C.spring_scenery_single_pay.SpringScenerySinglePayModel.instance.uodateInfo(),C.spring_scenery_seven_days_consume.SpringScenerySevenDaysConsumeModel.instance.uodateInfo()},i.prototype.getFestInfoReply=function(t){var e=t[0],i=!1;if(e)if(0<e.length)for(var n=0;n<e.length;n++){var s=e[n];if(s&&0!=(o=s[0])&&(i=this.isChange(s)))break}else i=!0;for(this.info={},this.curPayState={},n=0;n<e.length;n++){var o,a=e[n];a&&0!=(o=a[0])&&(this.info[o]=a)}for(n=1;n<68;n++)this.setFestDailyRwardOpen(n);0<this.openFestivalType&&this.setFestDailyRwardOpen(this.openFestivalType),this.updateAll(),GlobalData.dispatcher.event("FESTIVAL_INFO_UPDATE"),this.setAllRp(),i&&GlobalData.dispatcher.event("FESTIVAL_INFO_CHANG_UPDATE")},i.prototype.updateFestInfo=function(t){if(t){var e=t[0],i=e[0],n=this.isChange(e);this.info[i]=e,this.setFestDailyRwardOpen(i),this.updateAll(),GlobalData.dispatcher.event("FESTIVAL_INFO_UPDATE"),this.setAllRp(),n&&GlobalData.dispatcher.event("FESTIVAL_INFO_CHANG_UPDATE")}},i.prototype.updateFestSwap=function(t){if(t){var e=t[0];this.info[e]&&(this.info[e][10]=t[1],0!==e&&(this.setFestDailyRwardOpen(e),GlobalData.dispatcher.event("FESTIVAL_SWAP_UPDATE")))}},i.prototype.updateFestivalConsume=function(t){t&&(C.ZhiZhenPayRank.ZhiZhenPayRankModel.instance.uodateInfoConsume(t),C.childrens_day_pay_rank.ChildrensDayPayRankModel.instance.uodateInfoConsume(t),C.anniversary_day_pay_rank.AnniversaryDayPayRankModel.instance.uodateInfoConsume(t),C.perfectest_ten_pay_rank.PerfectestTenPayRankModel.instance.uodateInfoConsume(t))},i.prototype.getFestivalConsumeRankReply=function(t){t&&(C.ZhiZhenPayRank.ZhiZhenPayRankModel.instance.uodateInfoDate(t),C.childrens_day_pay_rank.ChildrensDayPayRankModel.instance.uodateInfoDate(t),C.anniversary_day_pay_rank.AnniversaryDayPayRankModel.instance.uodateInfoDate(t),C.perfectest_ten_pay_rank.PerfectestTenPayRankModel.instance.uodateInfoDate(t))},i.prototype.updateFestCostTotal=function(t){if(t){var e=t[0];this.info[e]&&(this.info[e][15]=t[1],C.single_dog_seven_days_consume.SingleDogSevenDaysConsumeModel.instance.uodateInfo(),C.grain_full_seven_days_consume.GrainFullSevenDaysConsumeModel.instance.uodateInfo(),C.childrens_day_seven_days_consume.ChildrensDaySevenDaysConsumeModel.instance.uodateInfo(),C.bar_day_seven_days_consume.BarDaySevenDaysConsumeModel.instance.uodateInfo(),C.anniversary_day_seven_days_consume.AnniversaryDaySevenDaysConsumeModel.instance.uodateInfo(),C.space_travel_seven_days_consume.SpaceTravelSevenDaysConsumeModel.instance.uodateInfo(),C.spring_scenery_seven_days_consume.SpringScenerySevenDaysConsumeModel.instance.uodateInfo(),GlobalData.dispatcher.event("FESTIVAL_UPDATE_FEST_COST_TOTAL"))}},i.prototype.updateFestivalMallBuyInfo=function(t){if(t){var e=t[0];this.info[e]&&(this.info[e][17]=t[1],C.single_dog_store.SingleDogStoreModel.instance.uodateInfo(),C.zhiZhenStore.ZhiZhenStoreModel.instance.uodateInfo(),C.grain_full_store.GrainFullStoreModel.instance.uodateInfo(),C.childrens_day_store.ChildrensDayStoreModel.instance.uodateInfo(),C.he_qu_store.HeQuStoreModel.instance.uodateInfo(),C.bar_day_store.BarDayStoreModel.instance.uodateInfo(),C.anniversary_day_store.AnniversaryDayStoreModel.instance.uodateInfo(),C.space_travel_store.SpaceTravelStoreModel.instance.uodateInfo(),C.perfectest_ten_store.PerfectestTenStoreModel.instance.uodateInfo(),C.spring_scenery_store.SpringSceneryStoreModel.instance.uodateInfo(),GlobalData.dispatcher.event("FESTIVAL_UPDATE_STORE"))}},i.prototype.setFestDailyRwardOpen=function(t){var e=this.info[t],i=B.instance.getCfgByType(t);if(i)for(var n=e?e[2]:0,s=0<n-GlobalData.serverTime?1:2,o=i[5],a=i[6],r=i[7],l=i[8],h=0;h<o.length;h++){var c=o[h],p=a[h];if(c&&p)if(e)if(3===c){var u=e?e[10]:null;if(u){var d=0<u[1]-GlobalData.serverTime?1:2;x.instance.setActionOpen(p,d)}else x.instance.setActionOpen(p,2)}else if(4===c){var y=e[7],g=!this.curPayState[t]&&1===this.curPayState[t],f=y?y[0]:2;g&&2===f?x.instance.setActionOpen(p,s):2===f?x.instance.setActionOpen(p,2):x.instance.setActionOpen(p,s),this.curPayState[t]=f}else 27===c?1==(0<n+864e5-GlobalData.serverTime?1:2)?C.zadan.ZaDanModel.instance.fType=t:C.zadan.ZaDanModel.instance.fType===t&&(C.zadan.ZaDanModel.instance.fType=0):33===c?1==s?S.instance.fType=t:S.instance.fType===t&&(S.instance.fType=0):38===c?1==s?C.ruins.RuinsModel.instance.fType=t:C.ruins.RuinsModel.instance.fType===t&&(C.ruins.RuinsModel.instance.fType=0):1011===p?1==s&&x.instance.setActionOpen(p,C.nian_end_one_buy.NianEndOneBuyModel.instance.getActionOpen()?1:2):x.instance.setActionOpen(p,s);else 27===c?C.zadan.ZaDanModel.instance.fType===t&&(C.zadan.ZaDanModel.instance.fType=0):33===c?S.instance.fType===t&&(S.instance.fType=0):38===c?C.ruins.RuinsModel.instance.fType===t&&(C.ruins.RuinsModel.instance.fType=0):32===c?1==s&&x.instance.setActionOpen(p,C.mysterious_store.MysteriousStoreModel.instance.getActionOpen()?1:2):x.instance.setActionOpen(p,2);for(var _=0;_<r.length;_++){var m=r[_],v=l[_];if(g=!1,v)for(var b=0;b<v.length;b++){var T=v[b];if(T&&x.instance.getFuncIsOpen(T)){g=!0;break}}var I=v&&g?1:2;x.instance.setActionOpen(m,I)}}},i.prototype.isXIanYu=function(){var t=!1,e=!1,i=!1,n=!1,s=!1,o=0;for(var a in this.info){var r=this.info[a];if(r){var l=r[0],h=0<r[2]-GlobalData.serverTime,c=B.instance.getCfgByType(l);if(c)for(var p=c[5],u=0;u<p.length;u++){var d=p[u];if(11===d&&h&&!t&&(t=!0),13===d&&h&&!e&&(e=!0),12===d&&h&&!i&&(i=!0),30===d&&h&&!n&&(n=!0),14===d&&h&&!s&&(s=!0,o=l),t&&e&&i&&n&&s)return[t,e,i,n,[s,o]]}}}return[t,e,i,n,[s,o]]},i.prototype.getNowFestivalType=function(t){for(var e in void 0===t&&(t=-1),this.info){var i=this.info[e];if(i){var n=i[0],s=0<i[2]-GlobalData.serverTime,o=B.instance.getCfgByType(n);if(o)for(var a=o[5],r=0;r<a.length;r++)if(a[r]===t&&s)return parseInt(e)}}return 0},i.prototype.getCrossOpenServerDay=function(t){var e=1,i=this.info[t];return i&&(e=i[5]),e},i.prototype.getOpenServerDay=function(t){var e=1,i=this.info[t];return i&&(e=i[4]),e},i.prototype.getDayByFestivalType=function(t){var e=0,i=this.info[t];return i?e=i[1]:e},i.prototype.isChange=function(t){var e=!1,i=t[0],n=this.info[i];if(!n&&t||n&&!t)e=!0;else{var s=t[2]-GlobalData.serverTime<=0,o=t[3]!=n[3];s&&o&&(e=!0)}return e},i.prototype.updateTabByPanel=function(){C.bottomTab.BottomTabCtrl.instance.updateTabByPanel()},i.prototype.getHuoDongType=function(t){var e=this.info[t];return!!e&&0<e[2]-GlobalData.serverTime},i.prototype.getDelayTimeStamp=function(t){var e=0,i=this.info[t];return i&&i[10]&&(e=i[10][1]),e},i.prototype.updateHint=function(t){var e=[],i=0;5===t?(e=this.hintArr=n.instance.getCustomDataByKey(t),i=1):7===t?(e=this.hintArr1=n.instance.getCustomDataByKey(t),i=4):10===t?(e=this.hintArr2=n.instance.getCustomDataByKey(t),i=17):t===C.festival.FestivalModel.instance.zhiZhenTypeEx?(e=this.hintArr16=n.instance.getCustomDataByKey(t),i=C.festival.FestivalModel.instance.zhiZhenType):t===C.festival.FestivalModel.instance.PerfectestTenTypeEx?(e=this.hintArr18=n.instance.getCustomDataByKey(t),i=C.festival.FestivalModel.instance.PerfectestTenType):16===t?(e=this.hintArr6=n.instance.getCustomDataByKey(t),i=22):20===t?(e=this.hintArr10=n.instance.getCustomDataByKey(t),i=30):23===t?(e=this.hintArr12=n.instance.getCustomDataByKey(t),i=34):24===t?(e=this.hintArr13=n.instance.getCustomDataByKey(t),i=37):t===C.festival.FestivalModel.instance.BarDayTypeEx?(e=this.hintArr17=n.instance.getCustomDataByKey(t),i=C.festival.FestivalModel.instance.BarDayType):t===C.festival.FestivalModel.instance.SpringSceneryTypeEx&&(e=this.hintArr19=n.instance.getCustomDataByKey(t),i=C.festival.FestivalModel.instance.SpringSceneryType),0!==i&&this.checkRP(i,e)},i.prototype.getSwapTimesById=function(t,e){if(this.info[t])for(var i=this.info[t][10][0],n=0,s=i.length;n<s;n++)if(i[n][0]===e)return i[n][1];return 0},i.prototype.setAllRp=function(){this.checkRP4(),this.checkRP7(),this.checkRP22(),this.checkRP23(),this.checkRP24(),this.checkRP25(),this.checkRP26(),this.checkRP27(),this.checkRP28(),this.checkRP29(),this.setRP()},i.prototype.setRP=function(){},i.prototype.checkRP=function(t,e){var i=!1,n=this.info[t];if(e&&0<e.length&&n&&this.getDelayTimeStamp(t)>GlobalData.serverTime)for(var s=d.instance.getCfgbyTypeDay(t,n[5]),o=0,a=s.length;o<a;o++){var r=s[o];if(r&&-1!==e.indexOf(r[0])){for(var l=0,h=r[3].length;l<h;l++){var c=r[3][l],p=y.instance.getItemCountById(c[0]),u=r[5]-this.getSwapTimesById(t,r[0]);if(!(p>=c[1]&&0<u)){i=!1;break}i=!0}if(i)break}}t===C.festival.FestivalModel.instance.zhiZhenType?g.instance.setRPProperty("zhiZhenConvert1RP",i):t===C.festival.FestivalModel.instance.PerfectestTenType?g.instance.setRPProperty("perfectestTenConvert1RP",i):t===C.festival.FestivalModel.instance.BarDayType?g.instance.setRPProperty("barDayConvertRP",i):t===C.festival.FestivalModel.instance.SpringSceneryType&&g.instance.setRPProperty("springSceneryConvertRP",i)},i.prototype.checkRP4=function(){var t=this.info[C.festival.FestivalModel.instance.zhiZhenType],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(389)?g.instance.setRPProperty("zhiZhenFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("zhiZhenFirstPayRP",!1),x.instance.getFuncIsOpen(782)?g.instance.setRPProperty("zhiZhenFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("zhiZhenFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(388)){var s=p.instance.getCfgByTypeDayCount(C.festival.FestivalModel.instance.zhiZhenType,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("zhiZhenDailyRewardRP",n)},i.prototype.checkRP7=function(){var t=this.info[12],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(444)?g.instance.setRPProperty("heQuFestFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("heQuFestFirstPayRP",!1),x.instance.getFuncIsOpen(443)?g.instance.setRPProperty("heQuFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("heQuFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(445)){var s=p.instance.getCfgByTypeDayCount(12,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("heQuFestDailyRewardRP",n)},i.prototype.checkRP22=function(){var t=this.info[C.festival.FestivalModel.instance.GrainFullType],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(769)?g.instance.setRPProperty("grainFullFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("grainFullFirstPayRP",!1),x.instance.getFuncIsOpen(775)?g.instance.setRPProperty("grainFullFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("grainFullFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(768)){var s=p.instance.getCfgByTypeDayCount(C.festival.FestivalModel.instance.GrainFullType,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("grainFullDailyRewardRP",n)},i.prototype.checkRP23=function(){var t=this.info[C.festival.FestivalModel.instance.ChildrensDayType],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(804)?g.instance.setRPProperty("childrensDayFestFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("childrensDayFestFirstPayRP",!1),x.instance.getFuncIsOpen(800)?g.instance.setRPProperty("childrensDayFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("childrensDayFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(803)){var s=p.instance.getCfgByTypeDayCount(C.festival.FestivalModel.instance.ChildrensDayType,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("childrensDayFestDailyRewardRP",n)},i.prototype.checkRP24=function(){var t=this.info[C.festival.FestivalModel.instance.BarDayType],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(828)?g.instance.setRPProperty("barDayFestFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("barDayFestFirstPayRP",!1),x.instance.getFuncIsOpen(824)?g.instance.setRPProperty("barDayFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("barDayFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(827)){var s=p.instance.getCfgByTypeDayCount(C.festival.FestivalModel.instance.BarDayType,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("barDayFestDailyRewardRP",n)},i.prototype.checkRP25=function(){var t=this.info[C.festival.FestivalModel.instance.AnniversaryDayType],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(878)?g.instance.setRPProperty("anniversaryDayFestFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("anniversaryDayFestFirstPayRP",!1),x.instance.getFuncIsOpen(874)?g.instance.setRPProperty("anniversaryDayFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("anniversaryDayFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(877)){var s=p.instance.getCfgByTypeDayCount(C.festival.FestivalModel.instance.AnniversaryDayType,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("anniversaryDayFestDailyRewardRP",n)},i.prototype.checkRP26=function(){var t=this.info[C.festival.FestivalModel.instance.SpaceTravelType],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(932)?g.instance.setRPProperty("spaceTravelFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("spaceTravelFirstPayRP",!1),x.instance.getFuncIsOpen(938)?g.instance.setRPProperty("spaceTravelFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("spaceTravelFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(931)){var s=p.instance.getCfgByTypeDayCount(C.festival.FestivalModel.instance.SpaceTravelType,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("spaceTravelDailyRewardRP",n)},i.prototype.checkRP27=function(){var t=this.info[C.festival.FestivalModel.instance.PerfectestTenType],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(951)?g.instance.setRPProperty("perfectestTenFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("perfectestTenFirstPayRP",!1),x.instance.getFuncIsOpen(964)?g.instance.setRPProperty("perfectestTenFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("perfectestTenFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(950)){var s=p.instance.getCfgByTypeDayCount(C.festival.FestivalModel.instance.PerfectestTenType,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("perfectestTenDailyRewardRP",n)},i.prototype.checkRP28=function(){var t=this.info[this.openFestivalType],e=t?t[8]:null;x.instance.getFuncIsOpen(1015)?g.instance.setRPProperty("nianEndDailylogRP",t&&e&&1===e[1]):g.instance.setRPProperty("nianEndDailylogRP",!1)},i.prototype.checkRP29=function(){var t=this.info[C.festival.FestivalModel.instance.SpringSceneryType],e=t?t[7]:null,i=t?t[8]:null;x.instance.getFuncIsOpen(1043)?g.instance.setRPProperty("springSceneryFestFirstPayRP",t&&e&&1===e[0]):g.instance.setRPProperty("springSceneryFestFirstPayRP",!1),x.instance.getFuncIsOpen(1039)?g.instance.setRPProperty("springSceneryFestConLoginRP",t&&i&&1===i[1]):g.instance.setRPProperty("springSceneryFestConLoginRP",!1);var n=!1;if(t&&x.instance.getFuncIsOpen(1042)){var s=p.instance.getCfgByTypeDayCount(C.festival.FestivalModel.instance.SpringSceneryType,t[5],t[1]);if(s){var o=s[3],a=t[9]?t[9][0]:[];a=a||[];for(var r=u.instance.vipLevel,l=0,h=o.length;l<h;l++){var c=o[l][2];if(c<=r&&-1===a.indexOf(c)){n=!0;break}}}}g.instance.setRPProperty("springSceneryFestDailyRewardRP",n)},i.prototype.getDayNum=function(t){return PlayerModel.instance.openDay-t+1},Object.defineProperty(i.prototype,"openFestivalType",{get:function(){for(var t in this.info){var e=this.info[t];if(e){var i=e[0];if(C.config.FestivalOpenCfg.instance.isPlatFestival(i))return i}}return 0},enumerable:!0,configurable:!0}),e=i,t.FestivalModel=e}(modules=modules||{}),function(r){var i,e,t;function n(){this.shopIsFirst=!0,this._isCloseWithExchange=-1,this._smashEggInfo={},this._smashEggMallList={},this._smashEggTask={},this._smashEggExchange={},this._smashEggValue={},this._rankMyValue=0,this._rankEndTime=0,this._serOpenDay=0}i=r.zadan||(r.zadan={}),e=r.festival.FestivalModel,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateFestivalInfo=function(){if(this.fType){var t=this.endTime>GlobalData.serverTime?1:2;r.funcOpen.FuncOpenModel.instance.setActionOpen(463,t),r.funcOpen.FuncOpenModel.instance.setActionOpen(465,t),r.funcOpen.FuncOpenModel.instance.setActionOpen(466,t),this.isCloseWithExchange||r.funcOpen.FuncOpenModel.instance.setActionOpen(464,t),2==t&&(this.setShopRP(!1),this.setTaskRP(!1),this.isCloseWithExchange||this.setZadanRP([!1,!1,!1,!1]));var e=this.exchangeEndTime>GlobalData.serverTime?1:2;this.isCloseWithExchange&&r.funcOpen.FuncOpenModel.instance.setActionOpen(464,e),r.funcOpen.FuncOpenModel.instance.setActionOpen(579,e),r.funcOpen.FuncOpenModel.instance.setActionOpen(453,e),2==e&&(this.setExchangeRP(!1),this.isCloseWithExchange&&this.setZadanRP([!1,!1,!1,!1])),i.ZaDanCtrl.instance.GetLuckSmashEgg(this.fType),i.ZaDanCtrl.instance.GetSmashEggRank(this.fType)}else r.funcOpen.FuncOpenModel.instance.setActionOpen(463,2),r.funcOpen.FuncOpenModel.instance.setActionOpen(465,2),r.funcOpen.FuncOpenModel.instance.setActionOpen(466,2),r.funcOpen.FuncOpenModel.instance.setActionOpen(464,2),r.funcOpen.FuncOpenModel.instance.setActionOpen(579,2),r.funcOpen.FuncOpenModel.instance.setActionOpen(453,2),this.setExchangeRP(!1),this.setShopRP(!1),this.setTaskRP(!1),this.setZadanRP([!1,!1,!1,!1])},n.prototype.updateMainInfo=function(t){var e=t[0],i=t[1],n=t[2];this._exchangeEndTime=t[3];for(var s=0;s<e.length;++s){var o=e[s][0];this._smashEggInfo[o]=e[s];for(var a=e[s][2],r=0;r<a.length;++r)this._smashEggExchange[a[r][0]]=a[r][1]}for(s=0;s<i.length;++s){var l=i[s][0];this._smashEggMallList[l]=i[s][1]}var h=n[0];for(s=0;h&&s<h.length;++s)this._smashEggValue[h[s][0]]=h[s][1];var c=n[1];for(s=0;s<c.length;++s)l=c[s][0],this._smashEggTask[l]=c[s][1];GlobalData.dispatcher.event("ZADAN_UPDATE"),this.checkTaskRP(),this.checkExchangeRP(),this.checkZaDanRP()},n.prototype.updateHintList=function(t){for(var e=t[0],i=0;i<e.length;++i){var n=e[i];this._smashEggInfo[n[0]][3]=n[1]}GlobalData.dispatcher.event("ZADAN_HINT_UPDATE"),this.checkExchangeRP()},n.prototype.updateExchange=function(t){var e=t[1],i=t[2],n=t[3];0==n?(this._smashEggExchange[e]=i,GlobalData.dispatcher.event("ZADAN_EXCHANGE_UPDATE"),this.checkExchangeRP()):CommonUtil.noticeError(n)},n.prototype.updateMall=function(t){var e=t[0],i=t[1],n=t[2];0==e?(this._smashEggMallList[i]=n,GlobalData.dispatcher.event("ZADAN_MALL_UPDATE")):(CommonUtil.noticeError(e),12012==e?CommonUtil.goldNotEnoughAlert():12015==e&&r.bag.BagUtil.openLackPropAlert(94150001,1))},n.prototype.updateTask=function(t){for(var e=t[0],i=e[0],n=0;i&&n<i.length;++n)this._smashEggValue[i[n][0]]=i[n][1];var s=e[1];for(n=0;n<s.length;++n){var o=s[n][0];this._smashEggTask[o]=s[n][1]}GlobalData.dispatcher.event("ZADAN_TASK_UPDATE"),this.checkTaskRP()},n.prototype.updateInfo=function(t){var e=t[0],i=t[1];this._smashEggInfo[e][1]=i,GlobalData.dispatcher.event("ZADAN_INFO_UPDATE"),this.checkExchangeRP()},n.prototype.updateRank=function(t){this._rankList=t[0],this._rankFirstShow=t[1],this._rankEndTime=t[2],this._serOpenDay=t[3],this._rankMyValue=t[4],this.rankRound=t[5]?t[5]-1:0,GlobalData.dispatcher.event("ZADAN_RANK_UPDATE")},n.prototype.updateRewards=function(t){var e=t[2];if(0==e){var i=t[0],n=t[1];this.openReward(i,n),this.checkExchangeRP()}else CommonUtil.noticeError(e)},n.prototype.getInfoByType=function(t){return this._smashEggInfo[t]},n.prototype.getHintList=function(t){var e=this._smashEggInfo[t];return e?e[3]:null},Object.defineProperty(n.prototype,"endTime",{get:function(){var t=e.instance.info[this.fType];return t?t[2]:0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"exchangeEndTime",{get:function(){return this.endTime+864e5},enumerable:!0,configurable:!0}),n.prototype.getRankEndTime=function(){return this._rankEndTime},n.prototype.getOpenDay=function(){return this._serOpenDay},n.prototype.getRankMyValue=function(){return this._rankMyValue},n.prototype.getEggValue=function(t){return this._smashEggValue[t]||0},n.prototype.setTaskStateById=function(t,e){this._smashEggTask[t]=e},n.prototype.getTaskStateById=function(t){return this._smashEggTask[t]},n.prototype.getMallBuyCountById=function(t){return this._smashEggMallList[t]||0},n.prototype.getExchangeCountById=function(t){return this._smashEggExchange[t]||0},n.prototype.getRankList=function(){return this._rankList},n.prototype.getRankShow=function(){return this._rankFirstShow},n.prototype.checkTaskRP=function(){if(this.fType){for(var t=!1,e=r.config.ZaDanCfg.instance.getTaskList(this.fType),i=0;i<e.length;++i)if(1==this._smashEggTask[e[i][0]]){t=!0;break}this.setTaskRP(t)}},n.prototype.checkZaDanRP=function(){if(this.fType){for(var t=[!1,!1,!1,!1],e=r.config.ZaDanCfg.instance.getOper(this.fType),i=0;i<e.length;++i){var n=Math.floor(e[i][0]/1e3);if(!t[n]){var s=e[i][2];r.bag.BagModel.instance.getItemCountById(s[0])>=s[1]&&(t[n]=!0)}}t[0]=t[1]||t[2]||t[3],this.setZadanRP(t)}},n.prototype.checkExchangeRP=function(){if(this.fType){for(var t=!1,e=r.config.ZaDanCfg.instance.getExchange(this.fType),i=0;i<e.length;++i){var n=e[i][4];if(r.bag.BagModel.instance.getItemCountById(n[0])>=n[1]){var s=Math.floor(e[i][0]/1e3),o=e[i][2];if(this._smashEggInfo[s]&&0<=this._smashEggInfo[s][3].indexOf(o)){var a=this._smashEggExchange[o]||0;if(0==e[i][5]||0<e[i][5]&&a<e[i][6]){t=!0;break}}}}this.setExchangeRP(t)}},n.prototype.setTaskRP=function(t){r.redPoint.RedPointCtrl.instance.setRPProperty("zadanTaskRP",t)},n.prototype.setZadanRP=function(t){r.redPoint.RedPointCtrl.instance.setRPProperty("zadanRP",t[0]),r.redPoint.RedPointCtrl.instance.setRPProperty("zadanRP1",t[1]),r.redPoint.RedPointCtrl.instance.setRPProperty("zadanRP2",t[2]),r.redPoint.RedPointCtrl.instance.setRPProperty("zadanRP3",t[3])},n.prototype.setExchangeRP=function(t){r.redPoint.RedPointCtrl.instance.setRPProperty("zadanChangeRP",t)},n.prototype.setShopRP=function(t){r.redPoint.RedPointCtrl.instance.setRPProperty("zadanShopRP",t)},n.prototype.openReward=function(t,e){WindowManager.instance.open(724,[t,e])},n.prototype.getShowData=function(){var t=null,e=r.config.BlendCfg.instance.getCfgById(85003)[2],i=r.festival.FestivalModel.instance.getDayByFestivalType(this.fType);i=i||0;for(var n=0;n<e.length;n+=7){var s=parseInt(e[n+5]),o=parseInt(e[n+6]);if(parseInt(e[n])==this.fType&&s<=i&&i<=o){t=[parseInt(e[n+1]),parseInt(e[n+2]),parseInt(e[n+3]),e[n+4]];break}}return t},Object.defineProperty(n.prototype,"isCloseWithExchange",{get:function(){if(-1==this._isCloseWithExchange){this._isCloseWithExchange=0;for(var t=r.config.BlendCfg.instance.getCfgById(85004)[1],e=0;e<t.length;e+=2)if(t[e]==this.fType){this._isCloseWithExchange=t[e+1];break}}return 1==this._isCloseWithExchange},enumerable:!0,configurable:!0}),t=n,i.ZaDanModel=t}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.zadan||(e.zadan={}),n=e.core.BaseCtrl,s=e.notice.SystemNoticeManager,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16788726,this.GetLuckSmashEggReply),this.subscribe(16788727,this.LuckSmashEggReply),this.subscribe(16788728,this.SmashEggExchangeReply),this.subscribe(16788729,this.SmashEggMallReply),this.subscribe(16788730,this.SmashEggTaskDrawReply),this.subscribe(16788734,this.UpdateLuckSmashEgg),this.subscribe(16788732,this.GetSmashEggRankReply),this.subscribe(16788733,this.UpdateSmashEggExchangeHint),this.subscribe(16788735,this.SmashEggExchangeHintReply),this.subscribe(16788731,this.UpdateSmashEggTask),this.onGlobal("BAG_UPDATE",this.onBagUpdate),this.onGlobal("FUNC_OPEN_UPDATE",this.onFuncOpenUpdate)},a.prototype.GetLuckSmashEggReply=function(t){i.ZaDanModel.instance.updateMainInfo(t)},a.prototype.LuckSmashEggReply=function(t){i.ZaDanModel.instance.updateRewards(t)},a.prototype.SmashEggExchangeReply=function(t){i.ZaDanModel.instance.updateExchange(t)},a.prototype.SmashEggMallReply=function(t){i.ZaDanModel.instance.updateMall(t)},a.prototype.SmashEggTaskDrawReply=function(t){var e=t[0];0==e?(s.instance.addNotice("领取成功"),i.ZaDanModel.instance.setTaskStateById(this.lastDrawTaskId,2),i.ZaDanModel.instance.checkTaskRP(),GlobalData.dispatcher.event("ZADAN_TASK_UPDATE")):CommonUtil.noticeError(e)},a.prototype.UpdateSmashEggTask=function(t){i.ZaDanModel.instance.updateTask(t)},a.prototype.UpdateLuckSmashEgg=function(t){i.ZaDanModel.instance.updateInfo(t)},a.prototype.GetSmashEggRankReply=function(t){i.ZaDanModel.instance.updateRank(t)},a.prototype.UpdateSmashEggExchangeHint=function(t){i.ZaDanModel.instance.updateHintList(t)},a.prototype.SmashEggExchangeHintReply=function(t){var e=t[0];0==e?s.instance.addNotice("设置成功"):CommonUtil.noticeError(e)},a.prototype.GetLuckSmashEgg=function(t){this.publish(2107862,[t])},a.prototype.LuckSmashEgg=function(t,e,i){this.publish(2107863,[t,e,i]),this.lastZaDanType=t},a.prototype.SmashEggExchange=function(t,e,i,n){this.publish(2107864,[t,e,i,n])},a.prototype.SmashEggMall=function(t,e,i){this.publish(2107865,[t,e,i])},a.prototype.SmashEggTaskDraw=function(t,e){this.publish(2107866,[t,e]),this.lastDrawTaskId=t},a.prototype.SmashEggExchangeHint=function(t,e,i){this.publish(2107867,[t,e,i])},a.prototype.GetSmashEggRank=function(t){this.publish(4195304,[t])},a.prototype.onBagUpdate=function(t){0==t&&(i.ZaDanModel.instance.checkZaDanRP(),i.ZaDanModel.instance.checkExchangeRP())},a.prototype.onFuncOpenUpdate=function(t){0<=t.indexOf(453)&&e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(465)&&i.ZaDanModel.instance.shopIsFirst&&e.redPoint.RedPointCtrl.instance.setRPProperty("zadanShopRP",!0)},o=a,i.ZaDanCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}i=t.he_qu_continuous_pay||(t.he_qu_continuous_pay={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(441==t[e]&&s.instance.getFuncIsOpen(441))return void i.HeQuContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log(" 合区 连续充值 领取奖励 请求...............:   "+t),this.publish(2106270,[12,t])},o=a,i.HeQuContinuousPayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}i=t.he_qu_cumulate_pay||(t.he_qu_cumulate_pay={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(442==t[e]&&s.instance.getFuncIsOpen(442))return void i.HeQuCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log(" 合区 累计充值 领取奖励 请求...............:   "+t),this.publish(2106268,[12,t])},o=a,i.HeQuCumulatePayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.he_qu_xunbao_happy||(t.he_qu_xunbao_happy={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.funcOpen.FuncOpenModel,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return r._instance=r._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16786855,this.UpdateFestivalXunbaoDiscountTimes),this.subscribe(16786856,this.UpdateFestivalXunbaoDiscountState),this.subscribe(16786857,this.DrawFestivalXunbaoDiscountReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(449==t[e]&&o.instance.getFuncIsOpen(449))return void i.HeQuXunBaoHappyModel.instance.setRP()},r.prototype.UpdateFestivalXunbaoDiscountTimes=function(t){i.HeQuXunBaoHappyModel.instance.updataXunBaocountTimes(t)},r.prototype.UpdateFestivalXunbaoDiscountState=function(t){i.HeQuXunBaoHappyModel.instance.updataXunBaoscountState(t)},r.prototype.DrawFestivalXunbaoDiscountReply=function(t){0==t[0]?s.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},r.prototype.GetSinglePaySanshengAward=function(t){this.publish(2106276,[12,t])},a=r,i.HeQuXunBaoHappyCtrl=a}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.he_qu_online_reward||(t.he_qu_online_reward={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.funcOpen.FuncOpenModel,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return r._instance=r._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16786854,this.drawFestivalOnlineRewardReply),this.subscribe(16786853,this.updateFestivalOnlineReward)},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(448==t[e]&&o.instance.getFuncIsOpen(448))return void i.HeQuOnlineRewardModel.instance.setRP()},r.prototype.updateFestivalOnlineReward=function(t){i.HeQuOnlineRewardModel.instance.updataReward(t)},r.prototype.drawFestivalOnlineRewardReply=function(t){0==t[0]?s.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},r.prototype.getOnlineReward=function(t){this.publish(2106275,[12,t])},r.prototype.getFestivalOnlineState=function(){this.publish(2106277,[12])},a=r,i.HeQuOnLineRewardCtrl=a}(modules=modules||{}),function(r){var i,e,t,n,s,o;function a(){var t=e.call(this)||this;return t.festivalType=r.festival.FestivalModel.instance.AnniversaryDayType,t}i=r.hit_engineer||(r.hit_engineer={}),t=r.core.BaseCtrl,n=r.funcOpen.FuncOpenModel,s=r.notice.SystemNoticeManager,e=t,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return a._instance=a._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16789026,this.getHuntingPlannerInfoReply),this.subscribe(16789027,this.huntingPlannerReply),this.subscribe(16789028,this.drawStageRewardReply),this.subscribe(16789029,this.drawHuntingPerRewardReply),this.subscribe(16789030,this.getHuntingRankReply),this.subscribe(16789031,this.updateHuntingPlanner),this.subscribe(16789033,this.GetHuntingLogReply),this.subscribe(16789034,this.updateHuntingPerInfo),this.subscribe(16789036,this.BuyHuntingItemReply),this.subscribe(16789035,this.UpdateStageReward),this.subscribe(16789032,this.UpdatePlannerKillCount),this.subscribe(16789037,this.getHuntingUseSetReply),this.subscribe(16789038,this.huntingUseSetReply),this.onGlobal("BAG_UPDATE",this.checkRP),this.GetHuntingPlannerInfo(),this.GetHuntingRank(),this.GetHuntingLog(),this.getHuntingUseSet(),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(469==t[e]&&n.instance.getFuncIsOpen(469))return this.GetHuntingRank(),this.GetHuntingPlannerInfo(),this.GetHuntingLog(),void i.HitEngineerModel.instance.setRP()},a.prototype.huntingUseSet=function(t){this.publish(2108165,[this.festivalType,t])},a.prototype.huntingUseSetReply=function(t){CommonUtil.noticeError(t[0],"设置成功")},a.prototype.getHuntingUseSetReply=function(t){i.HitEngineerModel.instance.getHuntingUseSetReply(t)},a.prototype.getFestivalType=function(){return r.festival.FestivalModel.instance.AnniversaryDayType},a.prototype.checkRP=function(){i.HitEngineerModel.instance.setRP()},a.prototype.UpdatePlannerKillCount=function(t){var e=this.getFestivalType();e===this.festivalType?i.HitEngineerModel.instance.UpdatePlannerKillCount(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.UpdatePlannerKillCount(t)},a.prototype.updateHuntingPerInfo=function(t){var e=this.getFestivalType();e===this.festivalType?i.HitEngineerModel.instance.updateHuntingPerInfo(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.updateHuntingPerInfo(t)},a.prototype.getHuntingPlannerInfoReply=function(t){var e=this.getFestivalType();e===this.festivalType?i.HitEngineerModel.instance.updataInfo(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.updataInfo(t)},a.prototype.huntingPlannerReply=function(t){var e=this.getFestivalType();0==t[0]?1===t[1]&&(console.log(".....................狩猎策划",t[1]),e===this.festivalType?WindowManager.instance.open(772):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&WindowManager.instance.open(819)):CommonUtil.noticeError(t[0])},a.prototype.drawStageRewardReply=function(t){var e=this.getFestivalType();0==t[0]?e===this.festivalType?i.HitEngineerModel.instance.updataDrawStageReward(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.updataDrawStageReward(t):CommonUtil.noticeError(t[0])},a.prototype.drawHuntingPerRewardReply=function(t){if(0==t[0]){s.instance.addNotice("领取成功",!1);var e=this.getFestivalType();e===this.festivalType?i.HitEngineerModel.instance.updataDrawHuntingPerReward(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.updataDrawHuntingPerReward(t)}else CommonUtil.noticeError(t[0])},a.prototype.getHuntingRankReply=function(t){var e=this.getFestivalType();e===this.festivalType?i.HitEngineerModel.instance.updataHuntingRank(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.updataHuntingRank(t)},a.prototype.updateHuntingPlanner=function(t){var e=this.getFestivalType();e===this.festivalType?i.HitEngineerModel.instance.updateHuntingPlanner(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.updateHuntingPlanner(t)},a.prototype.GetHuntingLogReply=function(t){var e=this.getFestivalType();e===this.festivalType?i.HitEngineerModel.instance.GetHuntingLogReply(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.GetHuntingLogReply(t)},a.prototype.UpdateStageReward=function(t){var e=this.getFestivalType();e===this.festivalType?i.HitEngineerModel.instance.UpdateStageReward(t):e===r.hit_birthday_cake.HitBirthdayCakeCtrl.instance.festivalType&&r.hit_birthday_cake.HitBirthdayCakeModel.instance.UpdateStageReward(t)},a.prototype.GetHuntingPlannerInfo=function(){this.publish(4195504,[this.festivalType])},a.prototype.HuntingPlanner=function(s,o){var a=this;void 0===o&&(o=0);var t=i.HitEngineerModel.instance.rankData;if(t){var e=t[2];GlobalData.serverTime>=e&&!i.HitEngineerModel.instance.isNotice?WindowManager.instance.open(771,function(){a.publish(2108162,[a.festivalType,s,o,0]);var t=WindowManager.instance.getPanelById(736);if(t)if(t.clearTimer(),1===s){for(var e=r.config.ItemMaterialCfg.instance.getItemCfgById(o)[9],i=r.config.HuntingConstCfg.instance.getCfgByFestivalType(a.festivalType)[1],n=0;n<3&&o!==i[n];n++);t.faKeLHpUpdata(e[0],n,!1,!0)}else 2===s&&(e=r.config.HuntingConstCfg.instance.getCfgByFestivalType(a.festivalType)[2],t.faKeLHpUpdata(e,3,!0,!0))}):this.publish(2108162,[this.festivalType,s,o,0])}},a.prototype.getHuntingUseSet=function(){this.publish(2108164,[this.festivalType])},a.prototype.DrawStageReward=function(){this.publish(4195505,[this.festivalType])},a.prototype.DrawHuntingPerReward=function(t){this.publish(4195506,[this.festivalType,t])},a.prototype.GetHuntingRank=function(){this.publish(4195507,[this.festivalType])},a.prototype.BuyHuntingItem=function(t,e){this.publish(2108163,[this.festivalType,t,e])},a.prototype.GetHuntingLog=function(){this.publish(4195508,[this.festivalType])},a.prototype.BuyHuntingItemReply=function(t){0==t[0]?(s.instance.addNotice("购买成功",!1),i.HitEngineerModel.instance.BuyHuntingItemReply()):CommonUtil.noticeError(t[0])},o=a,i.HitEngineerCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.treasureLand||(t.treasureLand={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16786861,this.GetHideTreasureReply),this.subscribe(16786862,this.HideTreasureDiceReply),this.subscribe(16786863,this.GetHideTreasureRankReply),this.subscribe(16786864,this.DrawHideTreasureRewardReply),this.subscribe(16786865,this.GetHTRewardInfoReply),this.subscribe(16786866,this.UpdateHTStepNum),this.onGlobal("BAG_UPDATE",this.bagUpdateHandler)},o.prototype.GetHideTreasureReply=function(t){console.log("GetHideTreasureReply:",t),e.TreasureLandModel.instance.layerInfo=t,GlobalData.dispatcher.event("TREASURE_LAND_LAYER_UPDATE"),e.TreasureLandModel.instance.checkBagRP(),e.TreasureLandModel.instance.checkDiceRP()},o.prototype.HideTreasureDiceReply=function(t){console.log("HideTreasureDiceReply:",t);var e=t[1];if(0===e){var i=t[0];GlobalData.dispatcher.event("TREASURE_LAND_DICE_RESULT",[i])}else CommonUtil.noticeError(e),GlobalData.dispatcher.event("TREASURE_LAND_DICE_RESULT",[0])},o.prototype.GetHideTreasureRankReply=function(t){console.log("GetHideTreasureRankReply:",t),e.TreasureLandModel.instance.rankInfo=t,GlobalData.dispatcher.event("TREASURE_LAND_RANK_UPDATE")},o.prototype.DrawHideTreasureRewardReply=function(t){console.log("DrawHideTreasureRewardReply:",t);var e=t[0];CommonUtil.noticeError(e,"领取成功")},o.prototype.GetHTRewardInfoReply=function(t){console.log("GetHTRewardInfoReply:",t),e.TreasureLandModel.instance.rewardInfo=t,GlobalData.dispatcher.event("TREASURE_LAND_REWARD_UPDATE"),e.TreasureLandModel.instance.checkTaskRP()},o.prototype.UpdateHTStepNum=function(t){console.log("UpdateHTStepNum:",t),e.TreasureLandModel.instance.rewardInfo||(e.TreasureLandModel.instance.rewardInfo=[[],0]),e.TreasureLandModel.instance.rewardInfo[1]=t[0],GlobalData.dispatcher.event("TREASURE_LAND_REWARD_UPDATE"),e.TreasureLandModel.instance.checkTaskRP()},o.prototype.GetHideTreasure=function(t){this.publish(2106280,[t])},o.prototype.HideTreasureDice=function(t,e,i){this.lastDiceType=e,this.publish(2106281,[t,e,i])},o.prototype.TaskHideTreasureBagAllItem=function(){this.publish(2097258,null)},o.prototype.GetHideTreasureRank=function(t){this.publish(4194810,[t])},o.prototype.DrawHideTreasureReward=function(t,e){this.publish(4194811,[t,e])},o.prototype.GetHTRewardInfo=function(t){this.publish(4194812,[t])},o.prototype.bagUpdateHandler=function(t){e.TreasureLandModel.instance.fType&&(11===t?e.TreasureLandModel.instance.checkBagRP():0===t&&e.TreasureLandModel.instance.checkDiceRP())},s=o,e.TreasureLandCtrl=s}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.mysterious_store||(t.mysterious_store={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16786858,this.mysteriousMallBuyReply),this.subscribe(16786859,this.updateMysteriousMallBuyInfo),this.subscribe(16786860,this.mysteriousMallDrawDisReply)},a.prototype.mysteriousMallBuyReply=function(t){0===t[0]?s.instance.addNotice("购买成功",!1):CommonUtil.noticeError(t[0])},a.prototype.updateMysteriousMallBuyInfo=function(t){i.MysteriousStoreModel.instance.updateMysteriousMallBuyInfo(t)},a.prototype.mysteriousMallBuy=function(t,e){this.publish(2106278,[i.MysteriousStoreModel.instance.festivalType,t,e])},a.prototype.mysteriousMallDrawDis=function(){this.publish(2106279,[i.MysteriousStoreModel.instance.festivalType])},a.prototype.mysteriousMallDrawDisReply=function(t){0===t[0]?(GlobalData.dispatcher.event("MYSTERIOUS_STORE_LOTTERY"),i.MysteriousStoreModel.instance.setRP()):CommonUtil.noticeError(t[0])},o=a,i.MysteriousStoreCtrl=o}(modules=modules||{}),function(r){var l,e,t,i,n;function s(){var t=e.call(this)||this;return t.isInit=!1,t}l=r.family_party||(r.family_party={}),t=r.core.BaseCtrl,i=r.notice.SystemNoticeManager,e=t,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16786731,this.getFamilyPartyInfoReply),this.subscribe(16786732,this.drawFamilyPartyTaskRewardReply),this.subscribe(16786733,this.getFamilyPartyCntRewardReply),this.subscribe(16786734,this.getFamilyPartyFinalRewardReply),this.subscribe(16786736,this.FastCompletePartyTaskReply),this.subscribe(16786735,this.syncFamilyPartyTaskFinish),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},s.prototype.funOpenSetSprintType=function(t){for(var e=l.FamilyPartyModel.instance.actionOpenId.length,i=0,n=0;n<t.length;n++){var s=t[n],o=l.FamilyPartyModel.instance.actionOpenId,a=o.indexOf(s);if(0<=a&&r.funcOpen.FuncOpenModel.instance.getFuncIsOpen(o[a])&&(l.FamilyPartyModel.instance.init(),this.getFamilyPartyInfo(l.FamilyPartyModel.instance.festivalType[a]),l.FamilyPartyModel.instance.setRP(l.FamilyPartyModel.instance.festivalType[a]),++i>=e))return}},s.prototype.FastCompletePartyTaskReply=function(t){0==t[0]?i.instance.addNotice("完成成功",!1):CommonUtil.noticeError(t[0])},s.prototype.getAllPartyInfo=function(){if(!this.isInit){l.FamilyPartyModel.instance.init();for(var t=0,e=l.FamilyPartyModel.instance.festivalType.length;t<e;t++)this.getFamilyPartyInfo(l.FamilyPartyModel.instance.festivalType[t]);this.isInit=!0}},s.prototype.getFamilyPartyInfoReply=function(t){l.FamilyPartyModel.instance.getFamilyPartyInfoReply(t)},s.prototype.drawFamilyPartyTaskRewardReply=function(t){0==t[0]?i.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},s.prototype.getFamilyPartyCntRewardReply=function(t){0==t[0]?i.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},s.prototype.getFamilyPartyFinalRewardReply=function(t){0==t[0]?i.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},s.prototype.syncFamilyPartyTaskFinish=function(t){l.FamilyPartyModel.instance.syncFamilyPartyTaskFinish(t)},s.prototype.getFamilyPartyInfo=function(t){this.publish(2109062,[t])},s.prototype.getFamilyPartyCntReward=function(t,e){this.publish(2109063,[e,t])},s.prototype.getFamilyPartyFinalReward=function(t){this.publish(2109064,[t])},s.prototype.drawFamilyPartyTaskReward=function(t,e){this.publish(2109065,[e,t])},s.prototype.fastCompletePartyTask=function(t,e){this.publish(2109066,[t,e])},n=s,l.FamilyPartyCtrl=n}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.childrens_day_continuous_pay||(e.childrens_day_continuous_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(790==t[e]&&s.instance.getFuncIsOpen(790))return void i.ChildrensDayContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log(" 光棍节 连续充值 领取奖励 请求...............:   "+t),this.publish(2106270,[e.festival.FestivalModel.instance.ChildrensDayType,t])},o=a,i.ChildrensDayContinuousPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.childrens_day_cumulate_pay||(e.childrens_day_cumulate_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(791==t[e]&&s.instance.getFuncIsOpen(791))return void i.ChildrensDayCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log(" 光棍节 累计充值 领取奖励 请求...............:   "+t),this.publish(2106268,[e.festival.FestivalModel.instance.ChildrensDayType,t])},o=a,i.ChildrensDayCumulatePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.childrens_day_seven_days_consume||(e.childrens_day_seven_days_consume={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(792==t[e]&&s.instance.getFuncIsOpen(792))return void i.ChildrensDaySevenDaysConsumeModel.instance.setRP()},a.prototype.DrawFestCostTotal=function(t){console.log("光棍节 七日消费 领取奖励 请求...............:   "+t),this.publish(2106272,[e.festival.FestivalModel.instance.ChildrensDayType,t])},o=a,i.ChildrensDaySevenDaysConsumeCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.childrens_day_seven_days_pay||(e.childrens_day_seven_days_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(793==t[e]&&s.instance.getFuncIsOpen(793))return void i.ChildrensDaySevenDaysPayModel.instance.setRP()},a.prototype.DrawFestPayTotal=function(t){console.log("光棍节 七日累充 领取奖励 请求...............:   "+t),this.publish(2106271,[e.festival.FestivalModel.instance.ChildrensDayType,t])},o=a,i.ChildrensDaySevenDaysPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.childrens_day_single_pay||(e.childrens_day_single_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(794==t[e]&&s.instance.getFuncIsOpen(794))return void i.ChildrensDaySinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 光棍节 单笔充值 领取奖励 请求...............:   "+t),this.publish(2106267,[e.festival.FestivalModel.instance.ChildrensDayType,t])},o=a,i.ChildrensDaySinglePayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.childrens_day_treasure||(t.childrens_day_treasure={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("BAG_UPDATE",this.setRP),i.ChildrensDayTreasureModel.instance,this.getNationalXunbaoRank(),this.GetNationalXunbaoScoreList(),this.GetNationalXunbaoScoreAndState()},a.prototype.setRP=function(){i.ChildrensDayTreasureModel.instance.setRP()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(795==t[e]&&s.instance.getFuncIsOpen(795))return void i.ChildrensDayTreasureModel.instance.setRP()},a.prototype.GetNationalXunbaoScoreAndState=function(){this.publish(4194808,[i.ChildrensDayTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoBroadcastRecords=function(){this.publish(4194807,[i.ChildrensDayTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoScoreList=function(){this.publish(4194806,[i.ChildrensDayTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoRank=function(){this.publish(4194804,[i.ChildrensDayTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoScoreAward=function(){this.publish(4194805,[i.ChildrensDayTreasureModel.instance.festivalType])},a.prototype.festivalNationalXunbao=function(t){this.publish(2106273,[i.ChildrensDayTreasureModel.instance.festivalType,t])},o=a,i.ChildrensDayTreasureCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_pay_rank||(t.childrens_day_pay_rank={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){},s=o,e.ChildrensDayPayRankCtrl=s}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.bar_day_continuous_pay||(e.bar_day_continuous_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(820==t[e]&&s.instance.getFuncIsOpen(820))return void i.BarDayContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log("乘风破浪 连续充值 领取奖励 请求...............:   "+t),this.publish(2106270,[e.festival.FestivalModel.instance.BarDayType,t])},o=a,i.BarDayContinuousPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.bar_day_cumulate_pay||(e.bar_day_cumulate_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(821==t[e]&&s.instance.getFuncIsOpen(821))return void i.BarDayCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log("重阳节 累计充值 领取奖励 请求...............:   "+t),this.publish(2106268,[e.festival.FestivalModel.instance.BarDayType,t])},o=a,i.BarDayCumulatePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.bar_day_single_pay||(e.bar_day_single_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(822==t[e]&&s.instance.getFuncIsOpen(822))return void i.BarDaySinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 重阳节 单笔充值 领取奖励 请求...............:   "+t),this.publish(2106267,[e.festival.FestivalModel.instance.BarDayType,t])},o=a,i.BarDaySinglePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.bar_day_seven_days_consume||(e.bar_day_seven_days_consume={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(823==t[e]&&s.instance.getFuncIsOpen(823))return void i.BarDaySevenDaysConsumeModel.instance.setRP()},a.prototype.DrawFestCostTotal=function(t){console.log("重阳节 七日消费 领取奖励 请求...............:   "+t),this.publish(2106272,[e.festival.FestivalModel.instance.BarDayType,t])},o=a,i.BarDaySevenDaysConsumeCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.susan_slade||(t.susan_slade={}),n=t.funcOpen.FuncOpenModel,s=t.notice.SystemNoticeManager,o=t.core.BaseCtrl,e=o,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16788026,this.GetSinglePaySanShengReply),this.subscribe(16788027,this.GetSinglePaySanShengAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetPaySingleFSReward()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(295==t[e]&&n.instance.getFuncIsOpen(295))return void i.SusanSladeModel.instance.setRP()},r.prototype.GetSinglePaySanShengReply=function(t){i.SusanSladeModel.instance.pushData(t)},r.prototype.GetSinglePaySanShengAwardReply=function(t){0==t[0]?s.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},r.prototype.GetPaySingleFSReward=function(){this.publish(2107362,null)},r.prototype.GetSinglePaySanshengAward=function(t){this.publish(2107363,[t])},a=r,i.SusanSladeCtrl=a}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.soaring_cumulatePay||(t.soaring_cumulatePay={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.funcOpen.FuncOpenModel,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16783026,this.getCumulatepayFSInfoReply),this.subscribe(16783027,this.updateCumulatepayFSInfo),this.subscribe(16783028,this.getCumulatepayFSRewardReply),this.getCumulatepayFSInfo()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(168==t[e]&&o.instance.getFuncIsOpen(168))return void i.SoaringCumulatePayModel.instance.setRP()},r.prototype.getCumulatepayFSReward=function(t){this.publish(2102563,[t])},r.prototype.getCumulatepayFSInfo=function(){this.publish(2102562,null)},r.prototype.getCumulatepayFSInfoReply=function(t){i.SoaringCumulatePayModel.instance.getInfo(t)},r.prototype.updateCumulatepayFSInfo=function(t){i.SoaringCumulatePayModel.instance.updateInfo(t)},r.prototype.getCumulatepayFSRewardReply=function(t){0==t[0]?s.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},a=r,i.SoaringCumulatePayCtrl=a}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.soaring_singlePay||(t.soaring_singlePay={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.funcOpen.FuncOpenModel,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16783029,this.GetPaySingleFSInfoReply),this.subscribe(16783030,this.UpdatePaySingleFSInfo),this.subscribe(16783031,this.GetPaySingleFSRewardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetPaySingleFSInfo()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(169==t[e]&&o.instance.getFuncIsOpen(169))return void i.SoaringSinglePayModel.instance.setRP()},r.prototype.GetPaySingleFSReward=function(t){this.publish(2102663,[t])},r.prototype.GetPaySingleFSInfo=function(){this.publish(2102662,null)},r.prototype.GetPaySingleFSInfoReply=function(t){i.SoaringSinglePayModel.instance.getInfo(t)},r.prototype.UpdatePaySingleFSInfo=function(t){i.SoaringSinglePayModel.instance.updateInfo(t)},r.prototype.GetPaySingleFSRewardReply=function(t){0==t[0]?s.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},a=r,i.SoaringSinglePayCtrl=a}(modules=modules||{}),function(i){var n,t,e,s,o,a;function r(){return t.call(this)||this}n=i.soaring_specialGift||(i.soaring_specialGift={}),e=i.core.BaseCtrl,s=i.notice.SystemNoticeManager,o=i.funcOpen.FuncOpenModel,t=e,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16783226,this.GetDiscountGiftFSInfoReply),this.subscribe(16783227,this.UpdateDiscountGiftFSInfo),this.subscribe(16783228,this.BuyDiscountGiftFSReply),this.GetDiscountGiftFSInfo(),Laya.timer.loop(1e3,this,function(){var t=i.player.PlayerModel.instance.actorId+"_SoaringSpecialGiftRedLook",e=parseInt(localStorage.getItem(t));e&&GlobalData.serverTime>e&&(localStorage.removeItem(t),n.SoaringSpecialGiftModel.instance.isFirstOpen=!0,i.redPoint.RedPointCtrl.instance.setRPProperty("soaringSpecialGiftRP",!0))})},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(172==t[e]&&o.instance.getFuncIsOpen(172))return},r.prototype.BuyDiscountGiftFS=function(t){this.publish(2102963,[t])},r.prototype.GetDiscountGiftFSInfo=function(){this.publish(2102962,null)},r.prototype.GetDiscountGiftFSInfoReply=function(t){n.SoaringSpecialGiftModel.instance.getInfo(t)},r.prototype.UpdateDiscountGiftFSInfo=function(t){n.SoaringSpecialGiftModel.instance.updateInfo(t)},r.prototype.BuyDiscountGiftFSReply=function(t){0==t[0]?s.instance.addNotice("购买成功",!1):CommonUtil.noticeError(t[0])},a=r,n.SoaringSpecialGiftCtrl=a}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.soaring_dayConsumeReward||(t.soaring_dayConsumeReward={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.funcOpen.FuncOpenModel,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16783032,this.GetConsumeRewardFSInfoReply),this.subscribe(16783033,this.UpdateConsumeRewardFSInfo),this.subscribe(16783034,this.GetConsumeRewardFSRewardReply),this.GetConsumeRewardFSInfo()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(170==t[e]&&o.instance.getFuncIsOpen(170))return void i.SoaringDayConsumeRewardModel.instance.setRP()},r.prototype.GetConsumeRewardFSReward=function(t){this.publish(2102763,[t])},r.prototype.GetConsumeRewardFSInfo=function(){this.publish(2102762,null)},r.prototype.GetConsumeRewardFSInfoReply=function(t){i.SoaringDayConsumeRewardModel.instance.getInfo(t)},r.prototype.UpdateConsumeRewardFSInfo=function(t){i.SoaringDayConsumeRewardModel.instance.updateInfo(t)},r.prototype.GetConsumeRewardFSRewardReply=function(t){0==t[0]?s.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},a=r,i.SoaringDayConsumeRewardCtrl=a}(modules=modules||{}),function(i){var n,t,e,s,o,a;function r(){return t.call(this)||this}n=i.soaring_panicBuyingGift||(i.soaring_panicBuyingGift={}),e=i.core.BaseCtrl,s=i.notice.SystemNoticeManager,o=i.funcOpen.FuncOpenModel,t=e,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16783126,this.GetRushBuyFSInfoReply),this.subscribe(16783127,this.UpdateRushBuyFSInfo),this.subscribe(16783128,this.BuyRushBuyFSReply),this.onGlobal("SOARING_PANICBUYINGGIFT_NEXT_DAY_UPDATE",this.DateUpdate),this.GetRushBuyFSInfo(),Laya.timer.loop(1e3,this,function(){var t=i.player.PlayerModel.instance.actorId+"_SoaringPanicBuyRedLook",e=parseInt(localStorage.getItem(t));e&&GlobalData.serverTime>e&&(localStorage.removeItem(t),n.SoaringPanicBuyingGiftModel.instance.isFirstOpen=!0,i.redPoint.RedPointCtrl.instance.setRPProperty("soaringPanicBuyingGifRP",!0))})},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(171==t[e]&&o.instance.getFuncIsOpen(171))return},r.prototype.BuyRushBuyFS=function(){this.publish(2102863,null)},r.prototype.GetRushBuyFSInfo=function(){this.publish(2102862,null),n.SoaringPanicBuyingGiftModel.instance.openPanel()},r.prototype.GetRushBuyFSInfoReply=function(t){n.SoaringPanicBuyingGiftModel.instance.getInfo(t)},r.prototype.UpdateRushBuyFSInfo=function(t){n.SoaringPanicBuyingGiftModel.instance.updateInfo(t)},r.prototype.DateUpdate=function(){n.SoaringPanicBuyingGiftModel.instance.dateUpdate()},r.prototype.BuyRushBuyFSReply=function(t){0==t[0]?(s.instance.addNotice("购买成功",!1),n.SoaringPanicBuyingGiftModel.instance.isBuy()):CommonUtil.noticeError(t[0])},a=r,n.SoaringPanicBuyingGiftCtrl=a}(modules=modules||{}),function(i){var n,t,e,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=i.announcement||(i.announcement={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16785127,this.GetNoticeReply),this.subscribe(16785126,this.ExchangeCdkeyReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetNotice()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(225==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(225))return void n.AnnouncementModel.instance.setRP()},o.prototype.GetNotice=function(){this.publish(7341035,null)},o.prototype.ExchangeCdkey=function(t){this.publish(7341132,[t])},o.prototype.GetNoticeReply=function(t){n.AnnouncementModel.instance.getInfo(t)},o.prototype.ExchangeCdkeyReply=function(t){0==t[1]?(i.notice.SystemNoticeManager.instance.addNotice("激活码使用成功，奖励已发放",!1),n.AnnouncementModel.instance.getCdkeyReply(t)):CommonUtil.noticeError(t[1])},s=o,n.AnnouncementCtrl=s}(modules=modules||{}),function(t){var a,e,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}a=t.divinatory_card||(t.divinatory_card={}),i=t.core.BaseCtrl,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16790326,this.GetDivinatoryCardInfoReply).subscribe(16790327,this.DivinatoryIntensifyReply).subscribe(16790328,this.DivinatoryMysteryReply).subscribe(16790329,this.DivinatoryWearReply).subscribe(16790330,this.UpdateDivinatoryCard).subscribe(16790331,this.UpdateDivinatoryGrade).subscribe(16790332,this.UpdateDivinatoryState).subscribe(16790333,this.GetDivinatoryValueRelpy).subscribe(16790334,this.UpdateDivinatoryValue).subscribe(16790335,this.UseDivinatoryItemReply).subscribe(16790336,this.UpdateDivinatoryBossRewardLeft),this.getDivinatoryCardInfo(),this.getDivinatoryValue(),this.onGlobal("BAG_UPDATE",this.setRP),this.onGlobal("PLAYER_UPDATE_LEVEL",this.setRP)},s.prototype.setRP=function(t){12!=t&&0!=t&&t||(a.DivinatoryCardModel.instance.checkItemRed(),a.DivinatoryCardModel.instance.checkStrongRP())},s.prototype.UpdateDivinatoryBossRewardLeft=function(t){0===t[0]?WindowManager.instance.open(412,47):WindowManager.instance.open(416,47)},s.prototype.UseDivinatoryItemReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.UpdateDivinatoryValue=function(t){a.DivinatoryCardModel.instance.setYuanli(t[0]),GlobalData.dispatcher.event("DIVINATORY_BOSS_DILL")},s.prototype.GetDivinatoryValueRelpy=function(t){a.DivinatoryCardModel.instance.setYuanli(t[0]),a.DivinatoryCardModel.instance.autoUse=t[1],GlobalData.dispatcher.event("DIVINATORY_BOSS_DILL")},s.prototype.GetDivinatoryCardInfoReply=function(t){var e=t[0];a.DivinatoryCardModel.instance.list=e,a.DivinatoryCardModel.instance.checkItemRed(),a.DivinatoryCardModel.instance.checkStrongRP(),GlobalData.dispatcher.event("DIVINATORY_CARD_INFO")},s.prototype.DivinatoryIntensifyReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.DivinatoryMysteryReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.DivinatoryWearReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.UpdateDivinatoryCard=function(t){for(var e=t[0],i=t[1],n=t[2],s=a.DivinatoryCardModel.instance.list,o=0;o<s.length;o++)if(s[o][0]==e){s[o][4]=i,s[o][5]=n,s[o][8]=t[3];break}a.DivinatoryCardModel.instance.checkItemRed(),a.DivinatoryCardModel.instance.checkStrongRP(),GlobalData.dispatcher.event("DIVINATORY_CARD_WEAR")},s.prototype.UpdateDivinatoryGrade=function(t){for(var e=t[0],i=a.DivinatoryCardModel.instance.list,n=0;n<i.length;n++)if(i[n][0]==e){i[n][1]=t[1],i[n][3]=t[2],i[n][6]=t[3],i[n][7]=t[4],i[n][8]=t[5];break}a.DivinatoryCardModel.instance.checkStrongRP(),GlobalData.dispatcher.event("DIVINATORY_GRADE")},s.prototype.UpdateDivinatoryState=function(t){for(var e=t[0],i=a.DivinatoryCardModel.instance.list,n=0;n<i.length;n++)if(i[n][0]==e){i[n][2]=t[1];break}a.DivinatoryCardModel.instance.checkItemRed(),a.DivinatoryCardModel.instance.checkStrongRP(),GlobalData.dispatcher.event("DIVINATORY_CARD_STATE")},s.prototype.getDivinatoryCardInfo=function(){this.publish(2109362,null)},s.prototype.divinatoryIntensify=function(t,e,i){this.publish(2109363,[t,e,i])},s.prototype.divinatoryMystery=function(t){s.gapmystery=!0,this.publish(2109364,[t])},s.prototype.divinatoryWear=function(t,e){this.publish(2109365,[t,e])},s.prototype.divinatoryFastWear=function(t,e){this.publish(2109366,[t,e])},s.prototype.getDivinatoryValue=function(){this.publish(2109367,null)},s.prototype.setAutoUserDivinatory=function(t){this.publish(2109368,[t])},s.prototype.useDivinatoryItem=function(t){this.publish(2109369,[t])},s.gapmystery=!1,n=s,a.DivinatoryCardCtrl=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.discountGift||(t.discountGift={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16782126,this.GetDiscountGiftInfoReply),this.subscribe(16782127,this.UpdateDiscountGiftInfo),this.subscribe(16782128,this.DiscountGiftBuyReply),this.GetDiscountGiftInfo()},o.prototype.GetDiscountGiftInfoReply=function(t){e.discountGiftModel.instance.updateData(t)},o.prototype.UpdateDiscountGiftInfo=function(t){e.discountGiftModel.instance.updateData(t)},o.prototype.DiscountGiftBuyReply=function(t){e.discountGiftModel.instance.ReceiveResult=t[0]},o.prototype.GetDiscountGiftInfo=function(){this.publish(2101862,null)},o.prototype.DiscountGiftBuy=function(){this.publish(2101863,null)},o.prototype.GetVipInfo=function(){e.discountGiftModel.instance.curVip=t.vip.VipModel.instance.vipLevel,e.discountGiftModel.instance.maxVip=t.vip.VipModel.instance.maxVipLevel},s=o,e.DiscountGiftCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.archive||(t.archive={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16787226,this.getIllustratedHandbookReply),this.subscribe(16787227,this.promoteIllustratedHandbookReply),this.getIllustratedHandbookSystem()},o.prototype.getIllustratedHandbookReply=function(t){e.ArchiveModel.instance.getIllustratedHandbookReply(t)},o.prototype.promoteIllustratedHandbookReply=function(t){var e=t[0];CommonUtil.noticeError(e)},o.prototype.getIllustratedHandbookSystem=function(){this.publish(2106662,null)},o.prototype.promoteIllustratedHandbookSystem=function(t){this.publish(2106663,t)},s=o,e.ArchiveCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.dragon||(t.dragon={}),n=t.core.BaseCtrl,s=t.config.RechargeCfg,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16787426,this.getDragonInfoReply),this.subscribe(16787427,this.getDragonAwardReply),this.getDragonInfo()},a.prototype.getDragonInfoReply=function(t){e.DragonModel.instance.getDragonInfoReply(t)},a.prototype.getDragonAwardReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.getDragonInfo=function(){this.publish(2106762,null)},a.prototype.getDragonAward=function(){this.publish(2106763,null)},a.prototype.buy=function(t){PlatParams.askPay(t,s.instance.getRecharCfgByIndex(t)[2])},o=a,e.DragonCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.cumulate_pay||(t.cumulate_pay={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16780716,this.getCumulatepayInfoReply),this.subscribe(16780717,this.updateCumulatepayInfo),this.subscribe(16780718,this.getCumulatepayRewardReply),this.publish(2100252,null)},a.prototype.getCumulatepayInfoReply=function(t){e.CumulatePayModel.instance.updateInfo(t)},a.prototype.updateCumulatepayInfo=function(t){e.CumulatePayModel.instance.updateInfo(t)},a.prototype.getCumulatepayRewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getCumulatepayReward=function(t){this.publish(2100253,t)},a.prototype.getCumulatepayInfo=function(){this.publish(2100252,null)},o=a,e.CumulatePayModelCtrl=o}(modules=modules||{}),function(t){var e,l,i;function n(){this._giveState=-1,this._endTime=0,this._totalMoney=-1,this._rewardArr=[],this._gradeRewardArray=new Array}e=t.continue_pay||(t.continue_pay={}),l=t.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateInfo=function(t){this._giveState=t[0],this._totalMoney=t[1],this._rewardArr=t[2];for(var e=!1,i=!1,n=!1,s=0,o=this._rewardArr.length;s<o;s++){var a=this._rewardArr[s],r=a[0];null==this._gradeRewardArray[r]&&(this._gradeRewardArray[r]=[]),1===(this._gradeRewardArray[r][a[1]]=a)[2]&&(0===r?e=!0:1===r?i=!0:2===r&&(n=!0))}l.instance.setRPProperty("continuePayRP",e||i||n),l.instance.setRPProperty("continuePayGrade1RP",e),l.instance.setRPProperty("continuePayGrade2RP",i),l.instance.setRPProperty("continuePayGrade3RP",n),this._endTime=t[3],this._progressList=t[4],GlobalData.dispatcher.event("CONTINUE_PAY_UPDATE")},Object.defineProperty(n.prototype,"getgiveState",{get:function(){return this._giveState},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalMoney",{get:function(){return this._totalMoney},enumerable:!0,configurable:!0}),n.prototype.getOneTrue=function(){for(var t=0;t<this._gradeRewardArray.length;t++)for(var e=this._gradeRewardArray[t],i=0;i<e.length;i++)if(1==e[i][2])return t;return 0},n.prototype.getRewardsByGrade=function(t){return this._gradeRewardArray[t]},n.prototype.getRewardByGradeAndDay=function(t,e){return this._gradeRewardArray[t]?this._gradeRewardArray[t][e]:null},Object.defineProperty(n.prototype,"endTime",{get:function(){return this._endTime},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"progressList",{get:function(){return this._progressList},enumerable:!0,configurable:!0}),i=n,e.ContinuePayModel=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.continue_pay||(t.continue_pay={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16780816,this.getContinuepayInfoReply),this.subscribe(16780817,this.updateContinuepayInfo),this.subscribe(16780818,this.getContinuepayRewardReply),this.publish(2100452,null)},a.prototype.getContinuepayInfoReply=function(t){e.ContinuePayModel.instance.updateInfo(t)},a.prototype.updateContinuepayInfo=function(t){e.ContinuePayModel.instance.updateInfo(t)},a.prototype.getContinuepayRewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getContinueReward=function(t,e){this.publish(2100453,[t,e])},a.prototype.getContinuepayInfo=function(){this.publish(2100452,null)},o=a,e.ContinuePayCtrl=o}(modules=modules||{}),function(t){var e,o,i;function n(){this._giveState=-1,this._totalMoney=-1,this._rewarTable={},this._activityTime=0}e=t.cousume_reward||(t.cousume_reward={}),o=t.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateInfo=function(t){this._giveState=t[0],this._totalMoney=t[1];for(var e=t[2],i=!1,n=0,s=e.length;n<s;n++)this._rewarTable[e[n][0]]=e[n],1===e[n][1]&&(i=!0);o.instance.setRPProperty("consumeRP",i),this._activityTime=t[3],GlobalData.dispatcher.event("CONSUME_REWARD_UPDATE")},Object.defineProperty(n.prototype,"giveState",{get:function(){return this._giveState},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalMoney",{get:function(){return this._totalMoney},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rewarTable",{get:function(){return this._rewarTable},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activityTime",{get:function(){return this._activityTime},enumerable:!0,configurable:!0}),i=n,e.ConsumeRewardModel=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.cousume_reward||(t.cousume_reward={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16781016,this.getConsumeRewardInfoReply),this.subscribe(16781017,this.updateConsumeRewardInfo),this.subscribe(16781018,this.getConsumeRewardReply),this.publish(2100652,null)},a.prototype.getConsumeRewardInfoReply=function(t){e.ConsumeRewardModel.instance.updateInfo(t)},a.prototype.updateConsumeRewardInfo=function(t){e.ConsumeRewardModel.instance.updateInfo(t)},a.prototype.getConsumeRewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getConsumeReward=function(t){this.publish(2100653,t)},a.prototype.getConsumeRewardInfo=function(){this.publish(2100652,null)},o=a,e.ConsumeRewardCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.cumulate2_pay||(t.cumulate2_pay={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16781926,this.getCumulatepay2InfoReply),this.subscribe(16781927,this.updateCumulatepay2Info),this.subscribe(16781928,this.getCumulatepay2RewardReply),this.publish(2101662,null)},a.prototype.getCumulatepay2InfoReply=function(t){e.CumulatePay2Model.instance.updateInfo(t)},a.prototype.updateCumulatepay2Info=function(t){e.CumulatePay2Model.instance.updateInfo(t)},a.prototype.getCumulatepay2RewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getCumulatepay2Reward=function(t){this.publish(2101663,t)},a.prototype.getCumulatepay2Info=function(){this.publish(2101662,null)},o=a,e.Cumulate2PayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.every_day_rebate||(t.every_day_rebate={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.funcOpen.FuncOpenModel,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16783626,this.GetEverydayRebateInfoReply),this.subscribe(16783627,this.UpdateEverydayRebateInfo),this.subscribe(16783628,this.GetEverydayRebateRewardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetEverydayRebateInfo()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(173==t[e]&&o.instance.getFuncIsOpen(173))return void i.EveryDayRebateModel.instance.setRP()},r.prototype.GetEverydayRebateReward=function(t){this.publish(2103363,[t])},r.prototype.GetEverydayRebateInfo=function(){this.publish(2103362,null)},r.prototype.GetEverydayRebateInfoReply=function(t){i.EveryDayRebateModel.instance.getInfo(t)},r.prototype.UpdateEverydayRebateInfo=function(t){i.EveryDayRebateModel.instance.updateInfo(t)},r.prototype.GetEverydayRebateRewardReply=function(t){0==t[0]?s.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},a=r,i.EveryDayRebateCtrl=a}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}i=t.cumulatePay_shenHun||(t.cumulatePay_shenHun={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16784426,this.getCumulatepayFSInfoReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetSinglePayJade()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(196==t[e]&&s.instance.getFuncIsOpen(196))return i.CumulatePayShenHunModel.instance.setActionOpen(),void i.CumulatePayShenHunModel.instance.setRP()},a.prototype.GetSinglePayJade=function(){this.publish(2104162,null)},a.prototype.GetSinglePayJadeAward=function(t){this.publish(2104163,[t])},a.prototype.getCumulatepayFSInfoReply=function(t){i.CumulatePayShenHunModel.instance.getInfo(t)},o=a,i.CumulatePayShenHunCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}i=t.cumulatePay_tianZhu||(t.cumulatePay_tianZhu={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16784428,this.getCumulatepayFSInfoReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetSinglePayJade()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(197==t[e]&&s.instance.getFuncIsOpen(197))return i.CumulatePayTianZhuModel.instance.setActionOpen(),void i.CumulatePayTianZhuModel.instance.setRP()},a.prototype.GetSinglePayJade=function(){this.publish(2104164,null)},a.prototype.GetSinglePayJadeAward=function(t){this.publish(2104165,[t])},a.prototype.getCumulatepayFSInfoReply=function(t){i.CumulatePayTianZhuModel.instance.getInfo(t)},o=a,i.CumulatePayTianZhuCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.day_pay||(t.day_pay={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16780616,this.getDaypayInfoReply),this.subscribe(16780617,this.updateDaypayInfo),this.subscribe(16780618,this.getDaypayRewardReply),this.publish(2100152,null)},a.prototype.getDaypayInfoReply=function(t){e.DayPayModel.instance.updateInfo(t)},a.prototype.updateDaypayInfo=function(t){e.DayPayModel.instance.updateInfo(t)},a.prototype.getDaypayRewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getDaypayReward=function(t){this.publish(2100153,[t])},o=a,e.DayPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o,a;function r(){return t.call(this)||this}i=e.mission||(e.mission={}),n=e.core.BaseCtrl,s=e.bag.BagUtil,o=e.dungeon.DungeonCtrl,t=n,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16777332,this.getCopyTianguanReply),this.subscribe(16777334,this.updateTianguanCopy),this.subscribe(16777335,this.updateKillMonstetWare),this.subscribe(16786926,this.updateTianguanSeekhelp),this.subscribe(16786928,this.tianguanAssistReply),this.subscribe(16786927,this.tianguanSeekhelpReply),this.getCopyTianguan(),e.player.PlayerCtrl.instance.getServerDay(),this.getTianguanSeekhelp()},r.prototype.getCopyTianguan=function(){this.publish(2097160,null)},r.prototype.getRank=function(){this.publish(7340132,[1024])},r.prototype.getCopyTianguanReply=function(t){i.MissionModel.instance.curLv=t[0][0]+1,i.MissionModel.instance.curWare=t[1],i.MissionModel.instance.awardLvs=t[0][1]},r.prototype.updateTianguanCopy=function(t){i.MissionModel.instance.curLv==t[0][0]&&(e.action_preview.ActionPreviewModel.instance._tianGuaIsUp=!0),i.MissionModel.instance.curLv=t[0][0]+1,i.MissionModel.instance.awardLvs=t[0][1]},r.prototype.updateKillMonstetWare=function(t){i.MissionModel.instance.curWare=t[0]},r.prototype.challenge=function(t){s.checkNeedSmeltTip()?Laya.timer.callLater(this,this.cancelAuto):(WindowManager.instance.close(19),o.instance.reqEnterScene(t,1))},r.prototype.cancelAuto=function(){i.MissionModel.instance.auto=!1},r.prototype.getTianguanSeekhelp=function(){this.publish(8388708,null)},r.prototype.updateTianguanSeekhelp=function(t){t&&(i.MissionModel.instance.updateTianguanSeekhelp=t)},r.prototype.tianguanSeekhelp=function(t){this._seekType=t,this.publish(2106362,[t])},r.prototype.tianguanSeekhelpReply=function(t){var e=t[0];0===e&&WindowManager.instance.close(442);var i=r.channelName[this._seekType];CommonUtil.noticeError(e,"求助链接已发送到"+i+"聊天频道，请前往查看")},r.prototype.tianguanAssist=function(t,e){this.publish(2106363,[t,e])},r.prototype.tianguanAssistReply=function(t){var e=t[0],i=t[1];CommonUtil.noticeError(e,"协助成功，魅力值+"+i)},r.channelName=["","仙盟","九州","仙缘"],a=r,i.MissionCtrl=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.first_login_alert||(t.first_login_alert={}),n=t.core.BaseCtrl,s=t.vip_new.VipNewModel,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("VIPF_UPDATE",this.updata)},a.prototype.updata=function(){s.instance.vipLevel<51?WindowManager.instance.open(363):WindowManager.instance.close(363)},o=a,e.FirstLoginAlertCtrl=o}(modules=modules||{}),function(n){var s,t,o,e,i;function a(){return t.call(this)||this}s=n.onceReward||(n.onceReward={}),o=n.notice.SystemNoticeManager,e=n.core.BaseCtrl,t=e,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16785326,this.getOnceRewardReply),this.subscribe(16785328,this.drawOnceRewardReply),this.subscribe(16785327,this.setOnceRewardDataReply),this.getOnceReward()},a.prototype.getOnceReward=function(){this.publish(2104862,null)},a.prototype.getOnceRewardReply=function(t){s.OnceRewardModel.instance.gotAwardIds=t[0],s.OnceRewardModel.instance.datas=t[1]},a.prototype.drawOnceReward=function(t){this.publish(2104863,[t])},a.prototype.drawOnceRewardReply=function(t){var e=t[1];if(0===e){var i=t[0];s.OnceRewardModel.instance.drawOnceRewardReply(i),46001===i?(o.instance.addNotice("领取成功"),WindowManager.instance.close(364)):46002===i?(o.instance.addNotice("领取成功"),WindowManager.instance.close(365)):46003===i?o.instance.addNotice("领取成功"):46004===i?(o.instance.addNotice("领取成功"),n.hudie_platform.HudiePlatformCtrl.instance.requestState=1001):46005===i&&(o.instance.addNotice("领取成功"),WindowManager.instance.close(1498))}else CommonUtil.noticeError(e)},a.prototype.setOnceRewardData=function(t,e){this.publish(2104864,[e,t])},a.prototype.setOnceRewardDataReply=function(t){0===t[2]&&s.OnceRewardModel.instance.setOnceRewardDataReply(t[0],t[1])},i=a,s.OnceRewardCtrl=i}(modules=modules||{}),function(t){var e,i;function a(){}e=t.onceReward||(t.onceReward={}),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gotAwardIds",{get:function(){return this._gotAwardIds},set:function(t){this._gotAwardIds=t,GlobalData.dispatcher.event("ONCE_REWARD_UPDATE")},enumerable:!0,configurable:!0}),a.prototype.drawOnceRewardReply=function(t){this._gotAwardIds&&-1===this._gotAwardIds.indexOf(t)&&(this._gotAwardIds.push(t),GlobalData.dispatcher.event("ONCE_REWARD_UPDATE"))},Object.defineProperty(a.prototype,"datas",{get:function(){return this._datas},set:function(t){this._datas=t,GlobalData.dispatcher.event("ONCE_REWARD_UPDATE")},enumerable:!0,configurable:!0}),a.prototype.setOnceRewardDataReply=function(t,e){for(var i=a.instance.datas,n=!1,s=0,o=i.length;s<o;s++)if(t===i[s][1]){i[s][0]=e,n=!0;break}n||i.push([e,t]),GlobalData.dispatcher.event("ONCE_REWARD_UPDATE")},a.prototype.getDataById=function(t){var e=null;if(this._datas)for(var i=0,n=this._datas.length;i<n;i++)if(t===this._datas[i][1]){e=this._datas[i][0];break}return e},i=a,e.OnceRewardModel=i}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return i.call(this)||this}e=t.officialAccount||(t.officialAccount={}),n=t.onceReward.OnceRewardModel,s=t.funcOpen.FuncOpenModel,o=t.onceReward.OnceRewardCtrl,a=t.core.BaseCtrl,i=a,__extends(l,i),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.onGlobal("ONCE_REWARD_UPDATE",this.onceRewardUpdate),this.focusOfficialAccount(1)},l.prototype.focusOfficialAccount=function(t){PlatParams.playerFollow(t,this.focusOfficialAccountBack.bind(this))},l.prototype.focusOfficialAccountBack=function(t,e){console.log("关注公众号返回................"+t),0===t&&o.instance.setOnceRewardData(46002,"1")},l.prototype.getAward=function(){o.instance.drawOnceReward(46002)},l.prototype.onceRewardUpdate=function(){e.OfficialAccountModel.instance.status="1"===n.instance.getDataById(46002)?0:1,this.checkFuncOpen()},l.prototype.checkFuncOpen=function(){var t=n.instance.gotAwardIds;t&&-1!==t.indexOf(46002)&&s.instance.setActionOpen(653,2)},r=l,e.OfficialAccountCtrl=r}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.gloves||(t.gloves={}),n=t.config.RechargeCfg,s=t.effect.SuccessEffectCtrl,o=t.core.BaseCtrl,i=o,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16785826,this.getGauntletReply),this.subscribe(16785828,this.inlayGauntletReply),this.subscribe(16785827,this.drawGauntletReply),this.onGlobal("BAG_UPDATE",this.checkRP),this.getGauntletInfo()},r.prototype.getGauntletInfo=function(){this.publish(2105362,null)},r.prototype.getGauntletReply=function(t){e.GlovesModel.instance.glovesInfo=t},r.prototype.inlayGauntlet=function(t){this.publish(2105363,[t])},r.prototype.inlayGauntletReply=function(t){var e=t[0];0===e?s.instance.play("assets/others/tx_jinjiechengong4.png"):CommonUtil.noticeError(e)},r.prototype.buy=function(t){PlatParams.askPay(t,n.instance.getRecharCfgByIndex(t)[2])},r.prototype.drawGauntlet=function(t){this.publish(2105364,[t])},r.prototype.drawGauntletReply=function(t){CommonUtil.noticeError(t[0])},r.prototype.checkRP=function(){e.GlovesModel.instance.checkRP()},a=r,e.GlovesCtrl=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.one_buy||(t.one_buy={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16785426,this.getOneBuyInfoReply),this.subscribe(16785427,this.updateOneBuyInfo),this.subscribe(16785428,this.getOneBuyRewardReply),this.getLoginRewad()},o.prototype.getOneBuyInfoReply=function(t){e.OneBuyModel.instance.updateInfo(t[0])},o.prototype.updateOneBuyInfo=function(t){e.OneBuyModel.instance.updateInfo(t[0])},o.prototype.getOneBuyRewardReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.getLoginRewad=function(){this.publish(2104962,null)},o.prototype.getLoginRewardReward=function(t){this.publish(2104963,[t])},s=o,e.OneBuyCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.fight_talisman||(t.fight_talisman={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16785526,this.updateTalismanState),this.subscribe(16785527,this.getTalismanInfoReply),this.subscribe(16785528,this.activeTalismanReply),this.getTalismanState(),this.getTalismanInfo()},o.prototype.getTalismanState=function(){this.publish(2105062,null)},o.prototype.getTalismanInfo=function(){this.publish(2105063,null)},o.prototype.activeTalisman=function(){this.publish(2105064,null)},o.prototype.updateTalismanState=function(t){e.FightTalismanModel.instance.updateTalismanState(t[0])},o.prototype.getTalismanInfoReply=function(t){e.FightTalismanModel.instance.getTalismanInfoReply(t)},o.prototype.activeTalismanReply=function(t){},s=o,e.FightTalismanCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.money_cat||(t.money_cat={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16785626,this.updateMoneyCatState),this.subscribe(16785627,this.getMoneyCatInfoReply),this.subscribe(16785628,this.activeMoneyCatReply),this.getMoneyCatState(),this.getMonthCardInfo()},o.prototype.getMoneyCatState=function(){this.publish(2105162,null)},o.prototype.getMonthCardInfo=function(){this.publish(2105163,null)},o.prototype.activeMoneyCat=function(){this.publish(2105164,null)},o.prototype.updateMoneyCatState=function(t){e.MoneyCatModel.instance.updateMoneyCatState(t[0])},o.prototype.getMoneyCatInfoReply=function(t){e.MoneyCatModel.instance.getMoneyCatInfoReply(t)},o.prototype.activeMoneyCatReply=function(t){},s=o,e.MoneyCatCtrl=s}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.the_carnival||(t.the_carnival={}),n=t.funcOpen.FuncOpenModel,s=t.core.BaseCtrl,e=s,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16786326,this.getKuanghaiInfoReply),this.subscribe(16786327,this.updateKuanghaiTask),this.subscribe(16786328,this.getKuanghaiTaskAwardReply),this.subscribe(16786329,this.getKuanghaiAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getKuanghaiInfo()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(244==t[e]&&n.instance.getFuncIsOpen(244))return this.getKuanghaiInfo(),void i.TheCarnivalModel.instance.setFuncState()},a.prototype.getKuanghaiInfoReply=function(t){i.TheCarnivalModel.instance.getdateInfo(t),i.TheCarnivalModel.instance.setPayRewardRP()},a.prototype.updateKuanghaiTask=function(t){i.TheCarnivalModel.instance.singleTaskUpdate(t)},a.prototype.getKuanghaiTaskAwardReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.getKuanghaiAwardReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.getKuanghaiInfo=function(){this.publish(2105862,null)},a.prototype.getKuanghaiTaskAward=function(t){this.publish(2105863,[t])},a.prototype.getKuanghaiAward=function(t){this.publish(2105864,[t])},o=a,i.TheCarnivalCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.familiars_down||(t.familiars_down={}),n=t.core.BaseCtrl,s=t.config.RechargeCfg,o=t.customData.CustomDataCtrl,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16786526,this.getFashionBuyReply),this.subscribe(16786527,this.drawFashionBuyReply),o.instance.getCustomizeData([4]),this.getFashionBuy()},r.prototype.getFashionBuyReply=function(t){e.FamiliarsDownModel.instance.updateGetFashionBuy(t)},r.prototype.drawFashionBuyReply=function(t){CommonUtil.noticeError(t[0]),GlobalData.dispatcher.event("MTJS_DRAW_FASHION_BUY")},r.prototype.getFashionBuy=function(){this.publish(2105962,null)},r.prototype.drawFashionBuy=function(t){this.publish(2105963,[t])},r.prototype.buy=function(t){PlatParams.askPay(t,s.instance.getRecharCfgByIndex(t)[2])},a=r,e.FamiliarsDownCtrl=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.newOfficialAccount||(t.newOfficialAccount={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16785131,this.getPublicNumReply),this.getPublicNum()},o.prototype.getPublicNum=function(){this.publish(7341133,null)},o.prototype.getPublicNumReply=function(t){e.NewOfficialAccountModel.instance.getPublicNumReply(t)},s=o,e.NewOfficialAccountCtrl=s}(modules=modules||{}),function(t){var s,e,i,o,n;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.redPack||(t.redPack={}),i=t.core.BaseCtrl,o=Laya.Image,e=i,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16787326,this.getRedpackListReply),this.subscribe(16787328,this.openRedPackReply),this.subscribe(16787327,this.getRedpackInfoReply),this.getRepackList()},a.prototype.getRedpackInfo=function(){this.publish(7341233,null)},a.prototype.getRedpackInfoReply=function(t){t&&s.RedPackModel.instance.getRedpackInfoReply(t)},a.prototype.getRepackList=function(){this.publish(7341232,null)},a.prototype.getRedpackListReply=function(t){t&&s.RedPackModel.instance.getRepackListReply(t)},a.prototype.openRedPack=function(){this.publish(7341234,null)},a.prototype.openRedPackReply=function(t){t&&s.RedPackModel.instance.openRedPackReply(t)},a.prototype.beginRain=function(){if(s.RedPackModel.instance.times&&!(s.RedPackModel.instance.times.length<=0)&&(!(GlobalData.serverTime>=s.RedPackModel.instance.endTime)||this.next())){for(var t=0;t<s.RedPackModel.instance.countOfWave;t++){var e=Math.floor(Math.random()*s.RedPackManager.instance.creatTime),i=.5*(CommonConfig.viewWidth-720);Laya.timer.once(e,this,this.creatImg,[i],!1)}this.next()}},a.prototype.next=function(){var t=this.delay();return-1!==t&&(Laya.timer.once(t,this,this.beginRain,null,!1),!0)},a.prototype.delay=function(){if(!s.RedPackModel.instance.times||s.RedPackModel.instance.times.length<=0)return-1;var t=s.RedPackModel.instance.times.pop()-GlobalData.serverTime;return t<0?this.delay():t},a.prototype.creatImg=function(t){if(!(15<=s.RedPackManager.instance.imgs.length)){var e,i=Math.floor(721*Math.random())+t,n=Math.floor(10*Math.random()+200);0<s.RedPackManager.instance.idleImgs.length?e=s.RedPackManager.instance.idleImgs.pop():((e=new o("assets/icon/ui/red_pack/img.png")).on("click",this,this.openPanel),e.anchorX=e.anchorY=.5),e.pos(i,n,!0),LayerManager.instance.addToUpUILayer(e),s.RedPackManager.instance.add(e),s.RedPackManager.instance.start()}},a.prototype.openPanel=function(){WindowManager.instance.open(468)},n=a,s.RedPackCtrl=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.rush_to_purchase||(t.rush_to_purchase={}),n=t.core.BaseCtrl,s=t.config.RechargeCfg,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16787526,this.getOneMoneyBuyInfoReply),this.subscribe(16787527,this.getOneMoneyBuyAwardReply),this.getOneMoneyBuyInfo()},a.prototype.getOneMoneyBuyInfoReply=function(t){e.RushToPurchaseModel.instance.GetOneMoneyBuyInfoReply(t)},a.prototype.getOneMoneyBuyAwardReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.getOneMoneyBuyInfo=function(){this.publish(2106862,null)},a.prototype.getOneMoneyBuyAward=function(){this.publish(2106863,null)},a.prototype.buy=function(t){PlatParams.askPay(t,s.instance.getRecharCfgByIndex(t)[2])},o=a,e.RushToPurchaseCtrl=o}(modules=modules||{}),function(t){var s,e,i,n;function o(){return null!==e&&e.apply(this,arguments)||this}s=t.qq||(t.qq={}),i=t.core.BaseCtrl,e=i,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){if("9130qq"===PlatParams.platform){this.subscribe(16789426,this.GetQQInfoReply),this.subscribe(16789427,this.DrawHallRewardReply),this.subscribe(16789428,this.DrawBlueVipRewardReply),this.subscribe(16789429,this.UpdateQQPrivilegeReward),this.onGlobal("PLAYER_UPDATE_LEVEL",function(){s.QQModel.instance.checkRP()}),this.GetQQInfo();var t=PlatParams.openid;console.log("openid:",t);var e=PlatParams.openkey;console.log("openkey:",e),"9130qq"===PlatParams.platform&&t&&e&&this.publish(2108565,[t,e])}},o.prototype.GetQQInfo=function(){console.log("获取qq大厅奖励信息..................."),this.publish(2108562,null)},o.prototype.DrawHallReward=function(t,e){console.log("领取qq大厅奖励..................."),this.publish(2108563,[t,e])},o.prototype.DrawBlueVipReward=function(t,e){console.log("领取qq蓝钻奖励..................."),this.publish(2108564,[t,e])},o.prototype.GetQQInfoReply=function(t){console.log("获取qq大厅奖励信息返回...................",t),s.QQModel.instance.qqLobbyStartReward=t[0][0][0],s.QQModel.instance.qqLobbyDailyReward=t[0][0][2],s.QQModel.instance.qqLobbyLevelReward=t[0][0][1],s.QQModel.instance.qqBlueStartReward=t[0][1][0],s.QQModel.instance.qqBlueDailyReward=t[0][1][2],s.QQModel.instance.qqBlueLevelReward=t[0][1][1],GlobalData.dispatcher.event("QQ_REWARD_UPDATE"),s.QQModel.instance.checkRP()},o.prototype.DrawHallRewardReply=function(t){console.log("领取qq大厅奖励返回...................",t),CommonUtil.noticeError(t[0],"领取成功")},o.prototype.DrawBlueVipRewardReply=function(t){console.log("领取qq蓝钻奖励返回...................",t),CommonUtil.noticeError(t[0],"领取成功")},o.prototype.UpdateQQPrivilegeReward=function(t){var e=t[0];switch(e){case 1:s.QQModel.instance.qqLobbyStartReward=t[1][0],s.QQModel.instance.qqLobbyDailyReward=t[1][2],s.QQModel.instance.qqLobbyLevelReward=t[1][1];break;case 2:s.QQModel.instance.qqBlueStartReward=t[1][0],s.QQModel.instance.qqBlueDailyReward=t[1][2],s.QQModel.instance.qqBlueLevelReward=t[1][1]}GlobalData.dispatcher.event("QQ_REWARD_UPDATE",e),s.QQModel.instance.checkRP()},o.prototype.getLobbyInfo=function(){PlatParams.qqdtUserInfo(this.lobbyInfoCallback.bind(this))},o.prototype.lobbyInfoCallback=function(t){console.log("大厅信息返回................",t),s.QQModel.instance.qqLobbyInfo=[t.is_blue_vip,t.is_blue_year_vip,t.is_super_blue_vip,t.blue_vip_level],GlobalData.dispatcher.event("QQ_UPDATE"),s.QQModel.instance.checkRP(),GlobalData.dispatcher.event("QQ_REWARD_UPDATE")},o.prototype.getBlueInfo=function(){PlatParams.qqdtBlueVipInfo(this.blueInfoCallback.bind(this))},o.prototype.blueInfoCallback=function(t){var e=this;console.log("蓝钻信息返回.................",t),s.QQModel.instance.qqBlueInfo=[t.is_blue_vip,t.is_blue_year_vip,t.is_super_blue_vip,t.is_expand_blue_vip,t.blue_vip_level,t.is_have_growth,t.is_mobile_blue_vip,t.server_time,t.vip_reg_time,t.year_vip_reg_time,t.super_vip_reg_time,t.expand_vip_reg_time,t.vip_valid_time,t.year_vip_valid_time,t.super_vip_valid_time,t.expand_vip_valid_time],GlobalData.dispatcher.event("QQ_UPDATE"),s.QQModel.instance.checkRP(),GlobalData.dispatcher.event("QQ_REWARD_UPDATE");var i=Number.POSITIVE_INFINITY,n=t.vip_valid_time-t.server_time;0<n&&n<i&&(i=n),0<(n=t.year_vip_valid_time-t.server_time)&&n<i&&(i=n),0<(n=t.super_vip_valid_time-t.server_time)&&n<i&&(i=n),0<i&&i<Number.POSITIVE_INFINITY&&Laya.timer.once(1e3*i,this,function(){e.getLobbyInfo(),e.getBlueInfo()})},o.prototype.openVip=function(){PlatParams.qqdtOpenVip(this.openVipCallback.bind(this))},o.prototype.openVipCallback=function(t){0==t?console.log("调起成功"):console.log("调起失败")},n=o,s.QQCtrl=n}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return e.call(this)||this}n=t.welfare_officer||(t.welfare_officer={}),i=t.redPoint.RedPointCtrl,s=t.notice.SystemNoticeManager,e=t.core.BaseCtrl,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16788826,this.GetWelfareOfficerLoginReply),this.subscribe(16788827,this.GetWelfareOfficerLoginAwardReply),this.subscribe(16788828,this.GetWelfareOfficerDialReply),this.subscribe(16788829,this.WelfareOfficerDialRunReply),this.onGlobal("PLAYER_UPDATE_FIGHT",this.onPlayerFightUpdate),this.GetWelfareOfficerLogin(),this.GetWelfareOfficerDial()},a.prototype.GetWelfareOfficerLoginReply=function(t){n.WelfareOfficerModel.instance.setLoginInfo(t)},a.prototype.GetWelfareOfficerLoginAwardReply=function(t){var e=t[0];0==e?s.instance.addNotice("成功领取奖励"):CommonUtil.noticeError(e)},a.prototype.GetWelfareOfficerDialReply=function(t){n.WelfareOfficerModel.instance.setFightInfo(t)},a.prototype.WelfareOfficerDialRunReply=function(t){var e=t[0];if(0==e){var i=t[1];GlobalData.dispatcher.event("WELFARE_OFFICER_PLAY_ANIMATION",i)}else CommonUtil.noticeError(e);n.WelfareOfficerModel.instance.waitForAnimation=!1},a.prototype.GetWelfareOfficerLogin=function(){this.publish(2107962,null)},a.prototype.GetWelfareOfficerLoginAward=function(t){this.publish(2107963,[t])},a.prototype.GetWelfareOfficerDial=function(){this.publish(2107964,null)},a.prototype.WelfareOfficerDialRun=function(){this.publish(2107965,null)},a.prototype.onPlayerFightUpdate=function(){i.instance.setRPProperty("fuliguanFightRP",n.WelfareOfficerModel.instance.indexCount<12&&PlayerModel.instance.fight>=n.WelfareOfficerModel.instance.nowFight)},o=a,n.WelfareOfficerCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return i.call(this)||this}e=t.realName||(t.realName={}),n=t.funcOpen.FuncOpenModel,s=t.onceReward.OnceRewardModel,o=t.onceReward.OnceRewardCtrl,a=t.core.BaseCtrl,i=a,__extends(l,i),Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.setup=function(){this.onGlobal("ONCE_REWARD_UPDATE",this.onceRewardUpdate)},l.prototype.realName=function(){PlatParams.playerRealName(this.realNameBack.bind(this))},l.prototype.realNameBack=function(t,e){console.log("实名认证回调................."+t+"   "+e),1===t&&e&&e.isTruename&&o.instance.setOnceRewardData(46001,"1")},l.prototype.getAward=function(){o.instance.drawOnceReward(46001)},l.prototype.onceRewardUpdate=function(){e.RealNameModel.instance.status="1"===s.instance.getDataById(46001)?0:1,this.checkFuncOpen()},l.prototype.checkFuncOpen=function(){var t=s.instance.gotAwardIds;t&&-1!==t.indexOf(46001)&&n.instance.setActionOpen(228,2),t&&-1!==t.indexOf(46004)&&n.instance.setActionOpen(986,2)},r=l,e.RealNameCtrl=r}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.openAward||(t.openAward={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16784326,this.updateOpenReward),this.subscribe(16784327,this.updateOpenReward),this.subscribe(16784328,this.buyOpenRewardReply),this.getOpenReward()},o.prototype.getOpenReward=function(){this.publish(2104062,null)},o.prototype.updateOpenReward=function(t){e.OpenAwardModel.instance.update(t)},o.prototype.buyOpenReward=function(t){this.publish(2104063,[t])},o.prototype.buyOpenRewardReply=function(t){var e=t[0];CommonUtil.noticeError(e,"购买成功")},s=o,e.OpenAwardCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.sign||(t.sign={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16778217,this.SignError),this.subscribe(16778216,this.getSign),this.publish(2097952,null)},a.prototype.getSign=function(t){e.SignModel.instance.getSign(t),GlobalData.dispatcher.event("GET_SIGN")},a.prototype.SignError=function(t){switch(t[0]){case 12701:s.instance.addNotice("签到未开启",!0);break;case 0:s.instance.addNotice("签到成功",!1)}},o=a,e.SignCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.onlineGift||(t.onlineGift={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16778917,this.updateOnlineReward),this.subscribe(16778918,this.getOnlineRewadAwardReply),this.subscribe(16778916,this.getOnlineRewardReply),this.publish(2098552,null)},o.prototype.updateOnlineReward=function(t){e.OnlineGiftModel.instance.UpdateRewardReply=t[0]},o.prototype.getOnlineRewadAwardReply=function(t){e.OnlineGiftModel.instance.AwardReply=t[0]},o.prototype.getOnlineRewardReply=function(t){e.OnlineGiftModel.instance.UpdateRewardReply=t[0]},s=o,e.OnlineGiftCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.monthCard||(t.monthCard={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16779616,this.getMouthCardInfoReply),this.subscribe(16779619,this.getMouthCardRewardReply),this.subscribe(16779617,this.updateMonthCardInfo),this.publish(2099252,null)},o.prototype.getMouthCardInfoReply=function(t){e.MonthCardModel.instance.getMonthCardInfoReply(t)},o.prototype.getMouthCardRewardReply=function(t){e.MonthCardModel.instance.getMonthCardRewardReply(t)},o.prototype.updateMonthCardInfo=function(t){e.MonthCardModel.instance.updateMonthCardInfo(t)},o.prototype.getMonthCardReward=function(t){this.publish(2099254,[t])},s=o,e.MonthCardCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=i.call(this)||this;return t._showIds=[],t._isAlert=!0,t}e=t.first_pay||(t.first_pay={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){Channel.instance.subscribe(16780116,this,this.getFirstPayInfoReply),Channel.instance.subscribe(16780117,this,this.updateFirstPayInfo),Channel.instance.subscribe(16780118,this,this.updateFirstPayShow),Channel.instance.subscribe(16780119,this,this.getFirstPayRewardReply),Channel.instance.publish(2099652,null),GlobalData.dispatcher.on("PANEL_CLOSE",this,this.openAlert)},a.prototype.getFirstPayInfoReply=function(t){e.FirstPayModel.instance.updateInfo(t)},a.prototype.updateFirstPayInfo=function(t){e.FirstPayModel.instance.updateInfo(t)},a.prototype.updateFirstPayShow=function(t){this._isAlert&&(WindowManager.instance.open(92,[t[1],-1]),this._isAlert=!1),this._showIds.push(t[1])},a.prototype.openAlert=function(t){92===t&&(this._showIds.shift(),this._showIds.length&&WindowManager.instance.open(92,[this._showIds[0],-1]))},a.prototype.getFirstPayRewardReply=function(t){t[0]||(s.instance.addNotice("领取成功"),GlobalData.dispatcher.event("FIRST_PAY_UPDATE_TIME"))},a.prototype.getFirstPayReward=function(t){Channel.instance.publish(2099653,[t])},o=a,e.FirstPayCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.invest_reward||(t.invest_reward={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16781216,this.getInvestRewardInfoReply),this.subscribe(16781217,this.updateInvestRewardInfo),this.subscribe(16781219,this.getInvestRewardReply),this.subscribe(16781218,this.getInvestBuyRewardReply),this.publish(2100952,null),this.onGlobal("VIP_UPDATE",this.investRewardPRState),this.onGlobal("PLAYER_UPDATE_MONEY",this.investRewardPRState)},a.prototype.investRewardPRState=function(){e.InvestRewardModel.instance.investRewardPRState()},a.prototype.getInvestRewardInfoReply=function(t){e.InvestRewardModel.instance.updateInfo(t)},a.prototype.updateInvestRewardInfo=function(t){e.InvestRewardModel.instance.updateInfo(t)},a.prototype.getInvestRewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getInvestBuyRewardReply=function(t){t[0]||s.instance.addNotice("投资成功"),e.InvestRewardModel.instance._result=t[0]},a.prototype.getInvestReward=function(t){this.publish(2100954,t)},a.prototype.getBuyInvestReward=function(t){this.publish(2100953,t)},o=a,e.InvestRewardCtrl=o}(modules=modules||{}),function(t){var e,i,n;function s(){}e=t.pay_reward||(t.pay_reward={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"PayRewardNoteList",{get:function(){return this._PayRewardNoteList},set:function(t){this._PayRewardNoteList=t.reverse()},enumerable:!0,configurable:!0}),s.prototype.setPayRewardRP=function(){var t=0<this.rewardCount||this.getgRadeRP();i.instance.setRPProperty("payRewardRP",t)},s.prototype.getgRadeRP=function(){if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&1==e[1])return!0}return!1},s.prototype.getRewardStart=function(t){if(this.rewardList){for(var e=0;e<this.rewardList.length;e++){var i=this.rewardList[e];if(i&&t==i[0])return i[1]}return 0}},s.prototype.getgRade=function(){for(var t=!1,e=0;e<this.rewardList.length;e++){var i=this.rewardList[e];if(i){if(1==(s=i[1]))return[i[0],s];2==s&&(t=!0)}}var n=this.rewardList[this.rewardList.length-1];if(t)for(e=0;e<this.rewardList.length;e++){var s,o=this.rewardList[e];if(o&&0==(s=o[1]))return[o[0],s]}else n=this.rewardList[0];return n?[n[0],n[1]]:[1,0]},s.prototype.getNoteList=function(){for(var t=new Array,e=0;e<this.noteList.length;e++){var i=this.noteList[e];t.push([i[0],i[1],i[2]])}return t},s.prototype.UpdatePayRewardInfo=function(){GlobalData.dispatcher.event("PAYREWARD_UPDATE")},s.prototype.PayRewardRunReply=function(){GlobalData.dispatcher.event("PAYREWARD_RUNREPLY")},s.prototype.openMyRecord=function(){GlobalData.dispatcher.event("PAYREWARD_OPENRECORD")},s.prototype.updateSeverList=function(){GlobalData.dispatcher.event("PAYREWARD_BROADCAST_LIST")},n=s,e.PayRewardModel=n}(modules=modules||{}),function(c){var t,e,p,u,i,n,d,s;function o(){var t=e.call(this)||this;return t.destin=new u(150,21),n.instance.money=c.config.BlendCfg.instance.getCfgById(15502)[1][0],t}t=c.pay_reward||(c.pay_reward={}),p=laya.ui.Image,u=laya.maths.Point,i=c.core.BaseCtrl,n=c.pay_reward.PayRewardModel,d=c.common.CommonUtil,e=i,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16781416,this.GetPayRewardInfoReply),this.subscribe(16781417,this.UpdatePayRewardInfo),this.subscribe(16781418,this.PayRewardRunReply),this.subscribe(16781419,this.GetPayRewardNotesReply),this.subscribe(16781420,this.GetPayRewardRewardReply),this.subscribe(16781421,this.GetPayRewardServerBroadcastReply),this.getPayRewardInfo(),this.GetPayRewardServerBroadcast(),this.onGlobal("PAY_REWARD_EFFECT",this.itemEffect)},o.prototype.getPayRewardInfo=function(){this.publish(2101152,null)},o.prototype.payRewardRun=function(t){this.publish(2101153,[t])},o.prototype.getPayRewardNotes=function(){this.publish(2101154,null)},o.prototype.getPayRewardReward=function(){this.publish(2101155,null)},o.prototype.GetPayRewardServerBroadcast=function(){this.publish(7340632,null)},o.prototype.GetPayRewardInfoReply=function(t){n.instance.rewardCount=t[1],n.instance.caifu=t[2],n.instance.rewardList=t[3],n.instance.setPayRewardRP()},o.prototype.UpdatePayRewardInfo=function(t){n.instance.rewardCount=t[1],n.instance.caifu=t[2],n.instance.rewardList=t[3],n.instance.UpdatePayRewardInfo(),n.instance.setPayRewardRP()},o.prototype.PayRewardRunReply=function(t){0==t[0]?(n.instance.noteList=t[1],n.instance.PayRewardRunReply(),this.GetPayRewardServerBroadcast()):d.noticeError(t[0])},o.prototype.GetPayRewardNotesReply=function(t){n.instance.PayRewardNoteList=t[0],n.instance.openMyRecord()},o.prototype.GetPayRewardRewardReply=function(t){var e=t[0],i=t[1];if(0==e){var n=new Array;if(i)for(var s=0;s<i.length;s++){var o=i[s];o&&n.push([o[0],o[1],0,null])}WindowManager.instance.open(212,[n,"恭喜获得",!0,"恭喜您获得",!1,!0])}else d.noticeError(t[0])},o.prototype.GetPayRewardServerBroadcastReply=function(t){t&&(n.instance.svrBroadcastList=t[0],n.instance.updateSeverList())},o.prototype.itemEffect=function(t){var e,i=new p,n=t[0],s=t[1],o=t[2];if(null!=n&&(e=c.action_preview.ActionPreviewModel.instance.getPosSprite(10000001))){i.skin=d.getIconById(n),i.anchorX=i.anchorY=.5;var a=s.x+40+(CommonConfig.viewWidth-663)/2,r=s.y+90+(CommonConfig.viewHeight-o)/2;i.pos(a,r),LayerManager.instance.addToEffectLayer(i),u.TEMP.setTo(e.x,e.y),LayerManager.instance.getLayerById(7).globalToLocal(u.TEMP);var l=u.TEMP.x,h=u.TEMP.y;TweenJS.create(i).to({x:l,y:h,scaleX:.2,scaleY:.2},500).onComplete(function(){i.destroy(!0)}).start()}},s=o,t.PayRewardCtrl=s}(modules=modules||{}),function(t){var e,l,i;function o(){this._multipleType=0}e=t.kuanghuan||(t.kuanghuan={}),l=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.updateInfo=function(t){var e;this._openState=t[0],this._nodeList=t[1],GlobalData.dispatcher.event("KUANGHUAN");for(var i=!1,n=!1,s=!1,o=!1,a=0;a<this._nodeList.length;a++)if(1==this._nodeList[a][0]){e=this._nodeList[a][2];for(var r=0;r<e.length;r++)1==e[r][1]&&(n=!0)}else if(9==this._nodeList[a][0])for(e=this._nodeList[a][2],r=0;r<e.length;r++)1==e[r][1]&&(s=!0);else for(0!=this._multipleType&&this._multipleType!=this._nodeList[a][0]&&(o=!0),this._multipleType=this._nodeList[a][0],e=this._nodeList[a][2],r=0;r<e.length;r++)1==e[r][1]&&(i=!0);l.instance.setRPProperty("kuangHuanRP",i),l.instance.setRPProperty("kuangHuanLevelRP",n),l.instance.setRPProperty("kuangHuanPowarRP",s),o&&GlobalData.dispatcher.event("KUANGHUAN_UPDATE_TAB")},o.prototype.updateTabByPanel=function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()},Object.defineProperty(o.prototype,"openState",{get:function(){return this._openState},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nodeList",{get:function(){return this._nodeList},enumerable:!0,configurable:!0}),o.prototype.getType=function(){for(var t=o.instance.nodeList,e=1,i="image_common_djkh_",n=0;n<t.length;n++){var s=t[n];if(s&&(e=s[0]),1!=(e=e||1)&&9!=e)break}switch(e){case 1:i="image_common_djkh_";break;case 2:i="image_common_tgkh_";break;case 3:i="image_common_gtkh_";break;case 4:i="image_common_bosskh_";break;case 5:i="image_common_zdkh_";break;case 6:i="image_common_jbkh_";break;case 7:i="image_common_zqkh_";break;case 8:case 9:i="image_common_fzkh_"}return i},i=o,e.KuangHuanModel=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.kuanghuan||(t.kuanghuan={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16781816,this.getKuangHuanInfoReply),this.subscribe(16781817,this.updateKuangHuanInfo),this.subscribe(16781818,this.getKuangHuanRewardReply),this.GetKuanghuanInfo()},a.prototype.GetKuanghuanInfo=function(){this.publish(2101552,null)},a.prototype.getKuangHuanInfoReply=function(t){e.KuangHuanModel.instance.updateInfo(t)},a.prototype.updateKuangHuanInfo=function(t){e.KuangHuanModel.instance.updateInfo(t)},a.prototype.getKuangHuanRewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getKuangHuanReward=function(t){this.publish(2101553,t)},a.prototype.getKuangHuanInfo=function(){this.publish(2101552,null)},o=a,e.KuangHuanCtrl=o}(modules=modules||{}),function(s){var t,o,e;function i(){this._giveState=0,this._totalGold=0,this._rewarTable=new Array,this._activityTime=0,this._serverDay=0,this._rewarList=new Array}t=s.day_consume_reward||(s.day_consume_reward={}),o=s.redPoint.RedPointCtrl,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.updateInfo=function(t){t&&(this._giveState=t[0],this._totalGold=t[1],this._serverDay=t[4],this._activityTime=t[3]+GlobalData.serverTime,this._rewarList=t[2],this.setRP(),GlobalData.dispatcher.event("DAY_CONSUME_REWARD_UPDATE"))},i.prototype.setRP=function(){var t=s.funcOpen.FuncOpenModel.instance.getFuncIsOpen(146),e=!1;if(this._rewarList)for(var i=0,n=this._rewarList.length;i<n;i++)this._rewarTable[this._rewarList[i][0]]=this._rewarList[i],1===this._rewarList[i][1]&&(e=!0);o.instance.setRPProperty("dayconsumeRP",t&&e)},Object.defineProperty(i.prototype,"giveState",{get:function(){return this._giveState},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"totalGold",{get:function(){return this._totalGold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"serverDay",{get:function(){return this._serverDay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewarTable",{get:function(){return this._rewarTable},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"activityTime",{get:function(){return this._activityTime},enumerable:!0,configurable:!0}),e=i,t.DayConsumeRewardModel=e}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.day_consume_reward||(t.day_consume_reward={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.day_consume_reward.DayConsumeRewardModel,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16782426,this.GetConsumeReward2InfoReply),this.subscribe(16782427,this.UpdateConsumeReward2Info),this.subscribe(16782428,this.GetConsumeReward2RewardReply),this.GetConsumeReward2Info()},r.prototype.GetConsumeReward2Info=function(){this.publish(2102162,null)},r.prototype.GetConsumeReward2Reward=function(t){this.publish(2102163,t)},r.prototype.GetConsumeReward2InfoReply=function(t){o.instance.updateInfo(t)},r.prototype.UpdateConsumeReward2Info=function(t){o.instance.updateInfo(t)},r.prototype.GetConsumeReward2RewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a=r,e.DayConsumeRewardCtrl=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.halfMonthGift||(t.halfMonthGift={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16783526,this.getHalfMonthInfoReply),this.subscribe(16783527,this.updateHalfMonthInfo),this.subscribe(16783528,this.getHalfMonthRewardReply),FuncOpenCtrl.instance.registeFuncReq(180,2103262),this.getHalfMonthInfo()},a.prototype.getHalfMonthInfo=function(){this.publish(2103262,null)},a.prototype.getHalfMonthInfoReply=function(t){e.HalfMonthGiftModel.instance.halfMonthInfo=t},a.prototype.updateHalfMonthInfo=function(t){e.HalfMonthGiftModel.instance.halfMonthInfo=t},a.prototype.getHalfMonthReward=function(t){this.publish(2103263,[t])},a.prototype.getHalfMonthRewardReply=function(t){var e=t[0];0===e?s.instance.addNotice("领取成功"):CommonUtil.noticeError(e)},o=a,e.HalfMonthGiftCtrl=o}(modules=modules||{}),function(c){var e,t,p,u,i,d,n;function s(){return t.call(this)||this}e=c.rotary_table_soraing||(c.rotary_table_soraing={}),p=laya.ui.Image,u=laya.maths.Point,i=c.core.BaseCtrl,d=c.common.CommonUtil,t=i,__extends(s,t),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16784126,this.GetDuobaoInfoReply),this.subscribe(16784127,this.UpdateDuobaoInfo),this.subscribe(16784128,this.DuobaoRunReply),this.subscribe(16784129,this.GetDuobaoNotesReply),this.subscribe(16784130,this.GetDuobaoRewardReply),this.subscribe(16784131,this.GetDuobaoServerBroadcastReply),this.subscribe(16784132,this.GetDuobaoRankInfoReply),this.onGlobal("ROTARYTABLE_SOARING_EFFECT",this.itemEffect),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetDuobaoInfo(),this.GetDuobaoServerBroadcast()},s.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)t[e]},s.prototype.GetDuobaoInfo=function(){this.publish(2103862,null)},s.prototype.DuobaoRun=function(t){this.publish(2103863,[t])},s.prototype.GetDuobaoNotes=function(){this.publish(2103864,null)},s.prototype.GetDuobaoReward=function(){this.publish(2103865,null)},s.prototype.GetDuobaoServerBroadcast=function(){this.publish(7340633,null)},s.prototype.getDuobaoRankCharInfo=function(t){this.publish(4194504,[t])},s.prototype.GetDuobaoInfoReply=function(t){e.RotaryTableSoaringModel.instance.getInfo(t)},s.prototype.UpdateDuobaoInfo=function(t){e.RotaryTableSoaringModel.instance.updateInfo(t)},s.prototype.DuobaoRunReply=function(t){0==t[0]?(e.RotaryTableSoaringModel.instance.noteList=t[1],e.RotaryTableSoaringModel.instance.PayRewardRunReply(),this.GetDuobaoServerBroadcast()):d.noticeError(t[0])},s.prototype.GetDuobaoNotesReply=function(t){e.RotaryTableSoaringModel.instance.PayRewardNoteList=t[0],e.RotaryTableSoaringModel.instance.openMyRecord()},s.prototype.GetDuobaoRewardReply=function(t){var e=t[0],i=t[1];if(0==e){var n=new Array;if(i)for(var s=0;s<i.length;s++){var o=i[s];o&&n.push([o[0],o[1],0,null])}WindowManager.instance.open(212,[n,"恭喜获得",!0,"恭喜您获得",!1,!0])}else d.noticeError(t[0])},s.prototype.GetDuobaoServerBroadcastReply=function(t){t&&(e.RotaryTableSoaringModel.instance.svrBroadcastList=t[0],e.RotaryTableSoaringModel.instance._totalScore=t[1],t[1]||(e.RotaryTableSoaringModel.instance._totalScore=0),e.RotaryTableSoaringModel.instance.updateSeverList())},s.prototype.GetDuobaoRankInfoReply=function(t){0==t[0]?e.RotaryTableSoaringModel.instance.getInfoMyNodeList(t[1]):1==t[0]&&e.RotaryTableSoaringModel.instance.getInfoQuNodeList(t[1])},s.prototype.itemEffect=function(t){var e=new p,i=t[0],n=t[1],s=t[2];if(null!=i){var o=c.action_preview.ActionPreviewModel.instance.getPosSprite(10000001);if(o){e.skin=d.getIconById(i),e.anchorX=e.anchorY=.5;var a=n.x+40+(CommonConfig.viewWidth-663)/2,r=n.y+90+(CommonConfig.viewHeight-s)/2;e.pos(a,r),LayerManager.instance.addToEffectLayer(e),u.TEMP.setTo(o.x,o.y),LayerManager.instance.getLayerById(7).globalToLocal(u.TEMP);var l=u.TEMP.x,h=u.TEMP.y;TweenJS.create(e).to({x:l,y:h,scaleX:.2,scaleY:.2},500).onComplete(function(){e.destroy(!0)}).start()}}},n=s,e.RotaryTableSoaringCtrl=n}(modules=modules||{}),function(c){var i,t,p,u,e,d,n,s;function o(){return t.call(this)||this}i=c.rotary_table_jiuzhou||(c.rotary_table_jiuzhou={}),p=laya.ui.Image,u=laya.maths.Point,e=c.core.BaseCtrl,d=c.common.CommonUtil,n=c.funcOpen.FuncOpenModel,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16784726,this.GetJzduobaoInfoReply),this.subscribe(16784727,this.UpdateJzduobaoInfo),this.subscribe(16784728,this.JzduobaoRunReply),this.subscribe(16784729,this.GetJzduobaoNotesReply),this.subscribe(16784730,this.GetJzduobaoRewardReply),this.subscribe(16784731,this.GetJzduobaoServerBroadcastReply),this.subscribe(16784732,this.GetJzduobaoRankInfoReply),this.subscribe(16784733,this.UpdateJzduobaoJackpot),this.subscribe(16777525,this.updateBagItemInfo),this.onGlobal("ROTARYTABLE_JIUZHOU_EFFECT",this.itemEffect),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetDuobaoInfo(),this.GetDuobaoServerBroadcast()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(217==t[e]&&n.instance.getFuncIsOpen(217))return i.RotaryTableJiuZhouModel.instance.setActionOpen(),void i.RotaryTableJiuZhouModel.instance.setRP()},o.prototype.GetDuobaoInfo=function(){this.publish(2104462,null)},o.prototype.DuobaoRun=function(t){this.publish(2104463,[t])},o.prototype.GetDuobaoNotes=function(){this.publish(2104464,null)},o.prototype.GetDuobaoReward=function(){this.publish(2104465,null)},o.prototype.GetDuobaoServerBroadcast=function(){this.publish(7340634,null)},o.prototype.getDuobaoRankCharInfo=function(t){this.publish(4194505,[t])},o.prototype.GetJzduobaoInfoReply=function(t){i.RotaryTableJiuZhouModel.instance.updateInfo(t)},o.prototype.UpdateJzduobaoInfo=function(t){i.RotaryTableJiuZhouModel.instance.updateInfo(t)},o.prototype.UpdateJzduobaoJackpot=function(t){i.RotaryTableJiuZhouModel.instance.jackPot=t[0],GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_UPDATE_JACKPOT")},o.prototype.JzduobaoRunReply=function(t){0==t[0]?(i.RotaryTableJiuZhouModel.instance.noteList=t[1],i.RotaryTableJiuZhouModel.instance.PayRewardRunReply(),this.GetDuobaoServerBroadcast()):d.noticeError(t[0])},o.prototype.GetJzduobaoNotesReply=function(t){i.RotaryTableJiuZhouModel.instance.PayRewardNoteList=t[0],i.RotaryTableJiuZhouModel.instance.openMyRecord()},o.prototype.GetJzduobaoRewardReply=function(t){var e=t[0],i=t[1];if(0==e){var n=new Array;if(i)for(var s=0;s<i.length;s++){var o=i[s];o&&n.push([o[0],o[1],0,null])}WindowManager.instance.open(212,[n,"恭喜获得",!0,"恭喜您获得",!1,!0])}else d.noticeError(t[0])},o.prototype.GetJzduobaoServerBroadcastReply=function(t){t&&(i.RotaryTableJiuZhouModel.instance.svrBroadcastList=t[0],i.RotaryTableJiuZhouModel.instance._totalScore=t[1],t[1]||(i.RotaryTableJiuZhouModel.instance._totalScore=0),i.RotaryTableJiuZhouModel.instance.updateSeverList())},o.prototype.GetJzduobaoRankInfoReply=function(t){0==t[0]?i.RotaryTableJiuZhouModel.instance.getInfoMyNodeList(t[1]):1==t[0]&&i.RotaryTableJiuZhouModel.instance.getInfoQuNodeList(t[1])},o.prototype.updateBagItemInfo=function(t){i.RotaryTableJiuZhouModel.instance.getUpdateBagItemInfo(t)},o.prototype.itemEffect=function(t){var e=new p,i=t[0],n=t[1],s=t[2];if(null!=i){var o=c.action_preview.ActionPreviewModel.instance.getPosSprite(10000001);if(o){e.skin=d.getIconById(i),e.anchorX=e.anchorY=.5;var a=n.x+40+(CommonConfig.viewWidth-663)/2,r=n.y+90+(CommonConfig.viewHeight-s)/2;e.pos(a,r),LayerManager.instance.addToEffectLayer(e),u.TEMP.setTo(o.x,o.y),LayerManager.instance.getLayerById(7).globalToLocal(u.TEMP);var l=u.TEMP.x,h=u.TEMP.y;TweenJS.create(e).to({x:l,y:h,scaleX:.2,scaleY:.2},500).onComplete(function(){e.destroy(!0)}).start()}}},s=o,i.RotaryTableJiuZhouCtrl=s}(modules=modules||{}),function(e){var t,i,n;function s(){this.endText=!1,this.rankedType=0,this.typeParame=1,this.restTm=0,this.nodeList=[],this.state=!1}t=e.login_reward||(e.login_reward={}),i=e.funcOpen.FuncOpenModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.updateInfo=function(t){this.rankedType=t[0],this.typeParame=t[1],this.restTm=t[2]+GlobalData.serverTime,this.nodeList=t[3],this.state=0<this.nodeList.length&&this.restTm>=GlobalData.serverTime,this.setFuncState(),GlobalData.dispatcher.event("LOGIN_REWARD_UPADTE")},s.prototype.getNodeInfoById=function(t){var e=null;if(this.nodeList)for(var i=0,n=this.nodeList.length;i<n;i++){var s=this.nodeList[i];if(t===s[0]){e=s;break}}return e},s.prototype.setPayRewardRP=function(){var t=this.getgRadeRP();e.redPoint.RedPointCtrl.instance.setRPProperty("loginRewardRP",t)},s.prototype.getgRadeRP=function(){if(i.instance.getFuncNeedShow(191)&&this.nodeList)for(var t=0;t<this.nodeList.length;t++){var e=this.nodeList[t];if(e&&1==e[1])return!0}return!1},s.prototype.setFuncState=function(){var t=this.state?1:2;e.funcOpen.FuncOpenModel.instance.setActionOpen(191,t)},n=s,t.LoginRewardModel=n}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.login_reward||(t.login_reward={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16784026,this.getLoginRewardInfoReply),this.subscribe(16784027,this.updateLoginRewardInfo),this.subscribe(16784028,this.getLoginRewardRewardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getLoginRewad()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(191==t[e]&&s.instance.getFuncIsOpen(191))return i.LoginRewardModel.instance.setFuncState(),void i.LoginRewardModel.instance.setPayRewardRP()},a.prototype.getLoginRewardInfoReply=function(t){i.LoginRewardModel.instance.updateInfo(t),i.LoginRewardModel.instance.setFuncState(),i.LoginRewardModel.instance.setPayRewardRP()},a.prototype.updateLoginRewardInfo=function(t){i.LoginRewardModel.instance.updateInfo(t),i.LoginRewardModel.instance.setFuncState(),i.LoginRewardModel.instance.setPayRewardRP()},a.prototype.getLoginRewardRewardReply=function(t){CommonUtil.noticeError(t[0])},a.prototype.getLoginRewad=function(){this.publish(2103762,null)},a.prototype.getLoginRewardReward=function(t){this.publish(2103763,[t])},o=a,i.LoginRewardCtrl=o}(modules=modules||{}),function(t){var n,e,i,s;function o(){return e.call(this)||this}n=t.week_login||(t.week_login={}),i=t.core.BaseCtrl,e=i,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16784528,this.getWeekLoginReply),this.subscribe(16784529,this.getWeekLoginAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.setFuncState),this.getWeekLogin()},o.prototype.getWeekLoginReply=function(t){n.WeekLoginModel.instance.updateInfo(t),n.WeekLoginModel.instance.setPayRewardRP()},o.prototype.getWeekLoginAwardReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.getWeekLogin=function(){this.publish(2104264,null)},o.prototype.getWeekLoginReward=function(t){this.publish(2104265,[t])},o.prototype.setFuncState=function(t){for(var e=0,i=t;e<i.length;e++)if(210===i[e])return void n.WeekLoginModel.instance.setFuncState()},s=o,n.WeekLoginCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.sevenDayGift||(t.sevenDayGift={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16778316,this.getSevenDayReply),this.subscribe(16778317,this.updateSevenDay),this.subscribe(16778318,this.getSevenDayAwardReply),FuncOpenCtrl.instance.registeFuncReq(5,2098052),this.getSevenDay()},o.prototype.getSevenDay=function(){this.publish(2098052,null)},o.prototype.getSevenDayReply=function(t){e.SevenDayGiftModel.instance.sevenDayInfo=t},o.prototype.updateSevenDay=function(t){e.SevenDayGiftModel.instance.sevenDayInfo=t},o.prototype.getSevenDayAward=function(t){this.publish(2098053,[t])},o.prototype.getSevenDayAwardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},s=o,e.SevenDayGiftCtrl=s}(modules=modules||{}),function(t){var n,e,i,s;function o(){return e.call(this)||this}n=t.singlePay||(t.singlePay={}),i=t.core.BaseCtrl,e=i,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16784526,this.getWeekSinglePayReply),this.subscribe(16784527,this.getWeekSinglePayAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.setFuncState),this.getWeekSinglePay()},o.prototype.getWeekSinglePay=function(){this.publish(2104262,null)},o.prototype.getWeekSinglePayReply=function(t){n.SinglePayModel.instance.getWeekSinglePayReply(t)},o.prototype.getWeekSinglePayAward=function(t){this.publish(2104263,[t])},o.prototype.getWeekSinglePayAwardReply=function(t){var e=t[0];CommonUtil.noticeError(e,"领取成功")},o.prototype.setFuncState=function(t){for(var e=0,i=t;e<i.length;e++)if(210===i[e])return void n.SinglePayModel.instance.setFuncState()},s=o,n.SinglePayCtrl=s}(modules=modules||{}),function(t){var n,e,i,s;function o(){return null!==e&&e.apply(this,arguments)||this}n=t.repeatPay||(t.repeatPay={}),i=t.core.BaseCtrl,e=i,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16784530,this.getWeekAccumulateReply),this.subscribe(16784531,this.getWeekAccumulateAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.setFuncState),this.getWeekAccumulate()},o.prototype.getWeekAccumulate=function(){this.publish(2104266,null)},o.prototype.getWeekAccumulateReply=function(t){n.RepeatPayModel.instance.getWeekAccumulateReply(t)},o.prototype.getWeekAccumulateAward=function(t){this.publish(2104267,[t])},o.prototype.getWeekAccumulateAwardReply=function(t){var e=t[0];CommonUtil.noticeError(e,"领取成功")},o.prototype.setFuncState=function(t){for(var e=0,i=t;e<i.length;e++)if(212===i[e])return void n.RepeatPayModel.instance.setFuncState()},s=o,n.RepeatPayCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.limit_pack||(t.limit_pack={}),n=t.notice.SystemNoticeManager,i=t.core.BaseCtrl,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16784826,this.getLimitPackInfoReply),this.subscribe(16784827,this.buyLimitPackReply),this.getLimitPackInfo()},o.prototype.getLimitPackInfoReply=function(t){e.LimitPackModel.instance.getLimitPackInfoReply(t)},o.prototype.buyLimitPackReply=function(t){12012==t[0]?CommonUtil.goldNotEnoughAlert(Laya.Handler.create(this,function(){WindowManager.instance.open(111),WindowManager.instance.close(357)})):0==t[0]&&n.instance.addNotice("购买成功",!1),e.LimitPackModel.instance.isBuyReply=!1},o.prototype.getLimitPackInfo=function(){this.publish(2104562,null)},o.prototype.buyLimitPack=function(t){this.publish(2104563,t),e.LimitPackModel.instance.isBuyReply=!0},s=o,e.LimitPackCtrl=s}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return e.call(this)||this}n=t.payRank||(t.payRank={}),i=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=i,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return a._instance=a._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16784626,this.getConsumeRankReply),this.subscribe(16784627,this.getConsumeCountReply),FuncOpenCtrl.instance.registeFuncReq(213,2104362),FuncOpenCtrl.instance.registeFuncReq(213,4194604),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getConsumeCount(),this.getConsumeRank()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(213==t[e])return void(s.instance.getFuncIsOpen(213)&&n.PayRankModel.Instance.setActionOpen())},a.prototype.getConsumeRankReply=function(t){n.PayRankModel.Instance.activityTime=t[0],n.PayRankModel.Instance.rankList=t[1],n.PayRankModel.Instance.setActionOpen();var e=(GlobalData.serverTime-GlobalData.timeZoneOffset)%864e5,i=Math.floor(1e3*Math.random())+500;0!=e&&(i+=864e5-e),Laya.timer.once(i,this,this.getConsumeRank)},a.prototype.getConsumeCountReply=function(t){n.PayRankModel.Instance.totalPay=t[0]},a.prototype.getConsumeCount=function(){this.publish(2104362,null)},a.prototype.getConsumeRank=function(){this.publish(4194604,null)},o=a,n.PayRankCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.invitation||(t.invitation={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.funcOpen.FuncOpenModel,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16785128,this.GetInviteGiftReply),this.subscribe(16785130,this.DrawInviteGiftReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetInviteGift()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(227==t[e]&&o.instance.getFuncIsOpen(227))return void i.InvitationModel.instance.setRP()},r.prototype.GetInviteGift=function(){this.publish(2104564,null)},r.prototype.callBask=function(t,e){0===t?r.instance.InviteFriend():s.instance.addNotice("分享失败",!0)},r.prototype.DrawInviteGift=function(){this.publish(2104566,null)},r.prototype.InviteFriend=function(){this.publish(2104565,null)},r.prototype.GetInviteGiftReply=function(t){i.InvitationModel.instance.getInfo(t)},r.prototype.DrawInviteGiftReply=function(t){0==t[0]?s.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},a=r,i.InvitationCtrl=a}(modules=modules||{}),function(t){var n,e,i;function s(){return e.call(this)||this}n=t.weekConsume||(t.weekConsume={}),e=t.core.BaseCtrl,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16784532,this.getWeekConsumeReply),this.subscribe(16784533,this.getWeekConsumeAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.setFuncState),this.getWeekConsume()},s.prototype.getWeekConsumeReply=function(t){n.WeekConsumeModel.instance.getWeekConsumeReply(t)},s.prototype.getWeekConsumeAwardReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.getWeekConsume=function(){this.publish(2104268,null)},s.prototype.getWeekConsumeAward=function(t){this.publish(2104269,[t])},s.prototype.setFuncState=function(t){for(var e=0,i=t;e<i.length;e++)if(209===i[e])return void n.WeekConsumeModel.instance.setFuncState()},i=s,n.WeekConsumeCtrl=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.goldBody||(t.goldBody={}),n=t.common.CommonUtil,s=t.core.BaseCtrl,i=s,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16777816,this.getSoulInfoReply),this.subscribe(16777817,this.updateSoulInfo),this.subscribe(16777818,this.refineSoulReply),this.subscribe(16777820,this.autoRefineSoulReply),this.subscribe(16777819,this.riseSoulReply),this.onGlobal("PLAYER_UPDATE_MONEY",this.redPointControl),this.onGlobal("FUNC_OPEN_UPDATE",this.redPointControl),this.getSoulInfo()},a.prototype.getSoulInfo=function(){this.publish(2097552,null)},a.prototype.redPointControl=function(){e.GoldBodyModel.instance.checkRefineCanTraining()},a.prototype.getSoulInfoReply=function(t){e.GoldBodyModel.instance.dataInit(t[0],t[1],t[2])},a.prototype.updateSoulInfo=function(t){e.GoldBodyModel.instance.updateSoulInfo(t)},a.prototype.refineSoul=function(t){this.publish(2097553,[t])},a.prototype.refineSoulReply=function(t){var e=t[0];0!=e&&n.noticeError(e)},a.prototype.autoRefineSoul=function(t){this.publish(2097555,[t])},a.prototype.autoRefineSoulReply=function(t){var e=t[0];0!=e&&n.noticeError(e)},a.prototype.riseSoul=function(){this.publish(2097554,null)},a.prototype.riseSoulReply=function(t){var e=t[0];0!=e?n.noticeError(e):this.redPointControl()},o=a,e.GoldBodyCtrl=o}(modules=modules||{}),function(u){var l,e,t,d,y,i,n,g,a,s;function o(){var t=e.call(this)||this;return t.destin=new y(180,60),t}l=u.treasure||(u.treasure={}),t=u.core.BaseCtrl,d=laya.ui.Image,y=laya.maths.Point,i=u.bag.BagModel,n=u.redPoint.RedPointCtrl,g=u.common.CommonUtil,a=u.funcOpen.FuncOpenModel,e=t,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.publish(2099055,null),this.subscribe(16779419,this.SelfBroadcast),this.subscribe(16779418,this.UpdateXunbaoInfo),this.subscribe(16777346,this.SeverBroadcast),this.subscribe(16779416,this.GetXunbaoInfo),this.subscribe(16779420,this.RunXunbaoReply),this.subscribe(16777518,this.TaskXunBaoBagItemReply),this.subscribe(16777519,this.TaskXunbaoBagAllItemReply),this.subscribe(16779421,this.ExchangeReply),this.subscribe(16779417,this.GetHintList),this.subscribe(16779422,this.GetXunbaoRebateInfoReply),this.subscribe(16779423,this.GetXunbaoRebateRewardReply),this.subscribe(16779424,this.UpdateXunbaoRebateTimes),this.subscribe(16779425,this.UpdateXunbaoRebateAreadyTaskIds),this.onGlobal("BAG_DATA_GOT",this.setDotDic),this.onGlobal("BAG_UPDATE",this.setDotDic),this.setDotDic(),this.onGlobal("XUNBAO_EFFECT",this.itemEffect),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},o.prototype.funOpenSetSprintType=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];91===n&&a.instance.getFuncIsOpen(n)?this.publish(2099052,[4]):92===n&&a.instance.getFuncIsOpen(n)?this.publish(2099052,[0]):93===n&&a.instance.getFuncIsOpen(n)?this.publish(2099052,[1]):94===n&&a.instance.getFuncIsOpen(n)?this.publish(2099052,[2]):95===n&&a.instance.getFuncIsOpen(n)?this.publish(2099052,[3]):882===n&&a.instance.getFuncIsOpen(n)?(this.publish(2099052,[6]),this.GetXunbaoRebateInfo(6)):883===n&&a.instance.getFuncIsOpen(n)?(this.publish(2099052,[7]),this.GetXunbaoRebateInfo(7)):892===n&&a.instance.getFuncIsOpen(n)&&(this.publish(2099052,[8]),this.GetXunbaoRebateInfo(8))}},o.prototype.TaskXunBaoBagItemReply=function(t){l.TreasureModel.instance.taskXunbao=t[0]},o.prototype.TaskXunbaoBagAllItemReply=function(t){l.TreasureModel.instance.taskAllXunbao=t[0]},o.prototype.RunXunbaoReply=function(t){l.TreasureModel.instance.runXunbaoReply=t},o.prototype.SelfBroadcast=function(t){var e=t[1],i=t[0];l.TreasureModel.instance.setSelfBroadcast(i,e)},o.prototype.SeverBroadcast=function(t){var e=t[0],i=t[1];l.TreasureModel.instance.setSvrBroadcast(e,i)},o.prototype.UpdateXunbaoInfo=function(t){var e=t[0],i=t[1],n=t[2],s=t[3],o=t[4];l.TreasureModel.instance.setXunbaoInfo(e,i,n,s,o)},o.prototype.GetXunbaoInfo=function(t){var e=t[0],i=t[2],n=t[1],s=t[4],o=t[3],a=t[5],r=t[6];l.TreasureModel.instance.setXunbaoInfo(e,i,o,a,r),l.TreasureModel.instance.restTime=n,l.TreasureModel.instance.setSelfBroadcast(e,s)},o.prototype.GetHintList=function(t){var e=t[0];l.TreasureModel.instance.setHintList(e)},o.prototype.ExchangeReply=function(t){var e=t[0];l.TreasureModel.instance.xunBaoExchangeReply=e},o.prototype.setDotDic=function(){var t=i.instance.getItemsByBagId(4);null!=t&&0<t.length?this._redDot=!0:this._redDot=!1,n.instance.setRPProperty("treasureBagRP",this._redDot),l.TreasureModel.instance.panduianRp()},o.prototype.runXunbao=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.publish(2099053,[t,e,i,n])},o.prototype.exchange=function(t,e,i){this.publish(2099054,[t,e,i])},o.prototype.itemEffect=function(t){var e=new d,i=t[0],n=t[1],s=t[2];if(null!=i){var o=u.action_preview.ActionPreviewModel.instance.getPosSpriteAny(10000005);if(o){e.skin=g.getIconById(i),e.anchorX=e.anchorY=.5;var a=n.x+40+(CommonConfig.viewWidth-663)/2,r=n.y+90+(CommonConfig.viewHeight-s)/2;e.pos(a,r),LayerManager.instance.addToEffectLayer(e);var l=o;Laya.Point.TEMP.setTo(l.width/2,l.height/2);var h=l.localToGlobal(Laya.Point.TEMP,!0);y.TEMP.setTo(h.x,h.y),LayerManager.instance.getLayerById(7).globalToLocal(y.TEMP);var c=y.TEMP.x,p=y.TEMP.y;TweenJS.create(e).to({x:c,y:p,scaleX:.2,scaleY:.2},500).onComplete(function(){e.destroy(!0)}).start()}}},o.prototype.GetXunbaoRebateInfo=function(t){console.log("GetXunbaoRebateInfo",t),this.publish(2099057,[t])},o.prototype.GetXunbaoRebateInfoReply=function(t){var e=this;console.log("GetXunbaoRebateInfoReply",t);var i=t[0],n=t[1],s=t[3],o=t[2];if(l.TreasureModel.instance.rebateList[i]=[s,n,o],GlobalData.dispatcher.event("TREASURE_REBATE_UPDATE"),o>GlobalData.serverTime){switch(i){case 6:a.instance.setActionOpen(884,1),Laya.timer.once(o-GlobalData.serverTime,this,function(){a.instance.setActionOpen(884,2),e.checkTreasureRebateOpen()});break;case 7:a.instance.setActionOpen(885,1),Laya.timer.once(o-GlobalData.serverTime,this,function(){a.instance.setActionOpen(885,2),e.checkTreasureRebateOpen()});break;case 8:a.instance.setActionOpen(893,1),Laya.timer.once(o-GlobalData.serverTime,this,function(){a.instance.setActionOpen(893,2),e.checkTreasureRebateOpen()})}this.checkTreasureRebateOpen()}else{switch(i){case 6:a.instance.setActionOpen(884,2);break;case 7:a.instance.setActionOpen(885,2);break;case 8:a.instance.setActionOpen(893,2)}this.checkTreasureRebateOpen()}},o.prototype.checkTreasureRebateOpen=function(){var t=a.instance.getFuncIsOpen(884)||a.instance.getFuncIsOpen(885)||a.instance.getFuncIsOpen(893);a.instance.setActionOpen(886,t?1:2),this.checkRebateRP()},o.prototype.GetXunbaoRebateReward=function(t,e){console.log("GetXunbaoRebateReward",t,e),this.publish(2099058,[t,e])},o.prototype.GetXunbaoRebateRewardReply=function(t){console.log("GetXunbaoRebateRewardReply",t),g.noticeError(t[0],"领取成功")},o.prototype.UpdateXunbaoRebateTimes=function(t){console.log("UpdateXunbaoRebateTimes",t),l.TreasureModel.instance.rebateList[t[0]]?(l.TreasureModel.instance.rebateList[t[0]][1]=t[1],GlobalData.dispatcher.event("TREASURE_REBATE_UPDATE"),this.checkRebateRP()):this.GetXunbaoRebateInfo(t[0])},o.prototype.UpdateXunbaoRebateAreadyTaskIds=function(t){console.log("UpdateXunbaoRebateAreadyTaskIds",t),l.TreasureModel.instance.rebateList[t[0]]?(l.TreasureModel.instance.rebateList[t[0]][0]=t[1],GlobalData.dispatcher.event("TREASURE_REBATE_UPDATE"),this.checkRebateRP()):this.GetXunbaoRebateInfo(t[0])},o.prototype.checkRebateRP=function(){var t=!1,e=l.TreasureModel.instance.rebateList[6]||[[],0,0];if(e[2]>GlobalData.serverTime){var i=u.config.TreasureCfg.instance.getRebateTaskList(6);for(var n in i)if(i[n][2]<=e[1]&&-1===e[0].indexOf(i[n][1])){t=!0;break}}if(u.redPoint.RedPointCtrl.instance.setRPProperty("treasureRebateRP6",t),t=!1,(e=l.TreasureModel.instance.rebateList[7]||[[],0,0])[2]>GlobalData.serverTime)for(var n in i=u.config.TreasureCfg.instance.getRebateTaskList(7))if(i[n][2]<=e[1]&&-1===e[0].indexOf(i[n][1])){t=!0;break}if(u.redPoint.RedPointCtrl.instance.setRPProperty("treasureRebateRP7",t),t=!1,(e=l.TreasureModel.instance.rebateList[8]||[[],0,0])[2]>GlobalData.serverTime)for(var n in i=u.config.TreasureCfg.instance.getRebateTaskList(8))if(i[n][2]<=e[1]&&-1===e[0].indexOf(i[n][1])){t=!0;break}u.redPoint.RedPointCtrl.instance.setRPProperty("treasureRebateRP8",t)},s=o,l.TreasureCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.xianDan||(t.xianDan={}),n=t.config.XianDanCfg,s=t.core.BaseCtrl,i=s,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16785927,this.getXianDanInfoReply),this.subscribe(16785926,this.getXianDanListReply),this.subscribe(16785928,this.oneKeyUseXianDanReply),this.onGlobal("MAGIC_POSITION_UPDATE",e.XianDanModel.instance.checkRP,e.XianDanModel.instance),this.onGlobal("VIP_UPDATE",e.XianDanModel.instance.checkRP,e.XianDanModel.instance),this.getXianDanInfo(),this.getXianDanList()},a.prototype.getXianDanInfo=function(){for(var t=0,e=n.instance.sIds;t<e.length;t++){var i=e[t];this.publish(2105463,[i])}},a.prototype.getXianDanInfoReply=function(t){e.XianDanModel.instance.updateInfo(t)},a.prototype.getXianDanList=function(){this.publish(2105462,null)},a.prototype.getXianDanListReply=function(t){e.XianDanModel.instance.items=t[0]},a.prototype.oneKeyUseXianDan=function(t){this.publish(2105464,[t])},a.prototype.oneKeyUseXianDanReply=function(t){var e=t[0];CommonUtil.noticeError(e,"使用成功")},o=a,e.XianDanCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.resBack||(t.resBack={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.config.RetrieveCfg,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16786026,this.updateRetrieve),this.subscribe(16786027,this.updateSingleRetrieve),this.subscribe(16786028,this.getrieveResReply),this.getRetrieve()},r.prototype.getRetrieve=function(){this.publish(2105562,null)},r.prototype.updateRetrieve=function(t){t&&e.ResBackModel.instance.update(t)},r.prototype.updateSingleRetrieve=function(t){t&&e.ResBackModel.instance.singleUpdate(t)},r.prototype.getrieveRes=function(t){this._info=t[0],this.publish(2105563,t)},r.prototype.getrieveResReply=function(t){var e=t[0];if(0===e&&this._info&&2===this._info[0]){var i=this._info[1],n=o.instance.getLilianCfgById(i);if(!n)throw new Error("找回成功,道行找回id为"+i+",配置为空!");s.instance.addNotice("道行找回"+n[4]+"点")}else CommonUtil.noticeError(e,"找回成功")},r.prototype.closeRP=function(){t.redPoint.RedPointCtrl.instance.setRPProperty("lilianBackRP",!1),t.redPoint.RedPointCtrl.instance.setRPProperty("resBackRP",!1)},a=r,e.ResBackCtrl=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.vip_buy||(t.vip_buy={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16786626,this.getVipSeckillReply),this.subscribe(16786627,this.drawVipSeckillReply),this.getVipSeckillRewad()},o.prototype.getVipSeckillReply=function(t){e.VipBuyModel.instance.updateInfo(t)},o.prototype.drawVipSeckillReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.getVipSeckillRewad=function(){this.publish(2106062,null)},o.prototype.getVipSeckillRewadRewad=function(t){this.publish(2106063,[t])},s=o,e.VipBuyCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.openChallenge||(t.openChallenge={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16787030,this.getOpenBossReply),this.subscribe(16787031,this.enterOpenBossReply),this.getOpenBoss()},o.prototype.getOpenBossReply=function(t){e.OpenChallengeModel.instance.getOpenBossInfo(t)},o.prototype.enterOpenBossReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.getOpenBoss=function(){this.publish(2106562,null)},o.prototype.enterOpenBoss=function(){this.publish(2106563,null)},s=o,e.OpenChallengeCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.yybPrivilege||(t.yybPrivilege={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16789126,this.getStartPrivilegeInfoReply),this.subscribe(16789127,this.getStartPrivilegeAwardReply),this.getStartPrivilegeInfo()},o.prototype.getStartPrivilegeInfo=function(){console.log("获取启动特权信息................."),this.publish(2108262,null)},o.prototype.getStartPrivilegeInfoReply=function(t){console.log("获取启动特权信息返回................",t),e.YybPrivilegeModel.instance.setState(t[0])},o.prototype.getStartPrivilegeAward=function(){console.log("领取启动特权奖励................."),this.publish(2108263,null)},o.prototype.getStartPrivilegeAwardReply=function(t){console.log("获取启动特权奖励返回................",t),CommonUtil.noticeError(t[0],"领取成功")},s=o,e.YybPrivilegeCtrl=s}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.thunderbolt_equip||(t.thunderbolt_equip={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16789526,this.leitingGetInfoReply),this.subscribe(16789527,this.leitingAddCuilianLevelReply),this.subscribe(16789528,this.leitingAddSuitLevelReply),this.subscribe(16789529,this.leitingUpdateCuilian),this.subscribe(16789530,this.leitingUpdateSuit),this.onGlobal("BAG_UPDATE",i.ThunderboltEquipModel.instance.setRP,i.ThunderboltEquipModel.instance),this.leitingGetInfo()},a.prototype.leitingGetInfoReply=function(t){i.ThunderboltEquipModel.instance.leitingGetInfoReply(t)},a.prototype.leitingAddCuilianLevelReply=function(t){0==t[0]?s.instance.addNotice("淬炼成功",!1):CommonUtil.noticeError(t[0])},a.prototype.leitingAddSuitLevelReply=function(t){if(0==t[0]){var e=t[1];1===i.ThunderboltEquipModel.instance.data[0][1][e-1][1]?s.instance.addNotice("激活成功",!1):s.instance.addNotice("升级成功",!1)}else CommonUtil.noticeError(t[0])},a.prototype.leitingUpdateCuilian=function(t){i.ThunderboltEquipModel.instance.leitingUpdateCuilian(t)},a.prototype.leitingUpdateSuit=function(t){i.ThunderboltEquipModel.instance.leitingUpdateSuit(t)},a.prototype.leitingGetInfo=function(){this.publish(2108662,null)},a.prototype.leitingAddCuilianLevel=function(t,e){this.publish(2108663,[t,e])},a.prototype.leitingAddSuitLevel=function(t){this.publish(2108664,[t])},o=a,i.ThunderboltEquipCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.thunderbolt_buy||(t.thunderbolt_buy={}),n=t.config.RechargeCfg,s=t.core.BaseCtrl,o=t.funcOpen.FuncOpenModel,e=s,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16789531,this.getLTDirectBuyReply),this.subscribe(16789532,this.drawLTDirectBuyReply),this.onGlobal("BAG_UPDATE",i.ThunderboltBuyCtrlModel.instance.setRP,i.ThunderboltBuyCtrlModel.instance),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getGauntletInfo()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(677==t[e]&&o.instance.getFuncIsOpen(677))return i.ThunderboltBuyCtrlModel.instance.setActionOpen(),void i.ThunderboltBuyCtrlModel.instance.setRP()},r.prototype.buy=function(t){PlatParams.askPay(t,n.instance.getRecharCfgByIndex(t)[2])},r.prototype.getGauntletInfo=function(){console.log("获取雷霆直购信息.........."),this.publish(2108665,null)},r.prototype.drawGauntlet=function(t){console.log("雷霆直购 领取奖励............"),this.publish(2108666,[t])},r.prototype.getLTDirectBuyReply=function(t){console.log("雷霆直购 获取雷霆直购信息返回................",t),i.ThunderboltBuyCtrlModel.instance.getLTDirectBuyReply(t)},r.prototype.drawLTDirectBuyReply=function(t){console.log("雷霆直购 说领取奖励返回................",t),CommonUtil.noticeError(t[0])},a=r,i.ThunderboltBuyCtrl=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.fly_up||(t.fly_up={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16790226,this.getFeiShengInfoReply),this.subscribe(16790227,this.getFeiShengTaskRewardReply),this.subscribe(16790228,this.feiShengChallengeReply),this.getFeiShengInfo()},o.prototype.getFeiShengInfoReply=function(t){e.FlyUpModel.instance.getFeiShengInfoReply(t)},o.prototype.getFeiShengTaskRewardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},o.prototype.feiShengChallengeReply=function(t){CommonUtil.noticeError(t[0],"挑战成功")},o.prototype.getFeiShengInfo=function(){this.publish(2109262,null)},o.prototype.getFeiShengTaskReward=function(t){this.publish(2109263,[t])},o.prototype.feiShengChallenge=function(t){if(!t)for(var e=[1158,1159],i=0,n=e.length;i<n;i++)WindowManager.instance.close(e[i]);this.publish(2109264,[t])},s=o,e.FlyUpCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16781316,this.getdateSprintRankInfoReply),this.subscribe(16781317,this.updateSprintRankInfo),this.subscribe(16781318,this.getSprintRankRewardReply),this.publish(2101052,null)},a.prototype.getdateSprintRankInfoReply=function(t){e.SprintRankTaskModel.instance.getInfo(t)},a.prototype.updateSprintRankInfo=function(t){e.SprintRankTaskModel.instance.updateInfo(t)},a.prototype.getSprintRankRewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getSprintRankRewar=function(){this.publish(2101053,null)},a.prototype.getSprintRankInfo=function(){this.publish(2101052,null)},a.prototype.funOpenGetSprintRankInfo=function(t){for(var e=0;e<t.length;e++)t[e]},o=a,e.SprintRankTaskCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.zhizun||(t.zhizun={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16784926,this.updateZhizunCardInfo),this.subscribe(16784927,this.updateZhizunCardInfo),this.subscribe(16784928,this.buyZhizunCardReply),this.getZhizunCardInfo()},o.prototype.getZhizunCardInfo=function(){this.publish(2104662,null)},o.prototype.updateZhizunCardInfo=function(t){e.ZhizunModel.instance.updateZhizunCardInfo(t)},o.prototype.buyZhizunCard=function(){this.publish(2104663,null)},o.prototype.buyZhizunCardReply=function(t){var e=t[0];CommonUtil.noticeError(e,"购买成功")},s=o,e.ZhizunCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.gushen||(t.gushen={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16781516,this.getGushenInfo),this.subscribe(16781517,this.updateGushenInfo),this.subscribe(16781518,this.getGuShenTaskRewardReply),this.subscribe(16781519,this.getGuShenActiveRewardReply),this.publish(2101252,null)},a.prototype.getGushenInfo=function(t){e.GuShenModel.instance.updateInfo(t)},a.prototype.updateGushenInfo=function(t){e.GuShenModel.instance.updateInfo(t)},a.prototype.getGuShenTaskRewardReply=function(t){t[0]||s.instance.addNotice("领取成功")},a.prototype.getGuShenActiveRewardReply=function(t){t[0]||s.instance.addNotice("激活成功")},a.prototype.getGuShenTaskReward=function(t){this.publish(2101253,t)},a.prototype.getGushenActiveReward=function(t){this.publish(2101254,t)},a.prototype.getCumulatepayInfo=function(){this.publish(2101252,null)},o=a,e.GushenCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o,a;function r(){return t.call(this)||this}i=e.lineClearOut||(e.lineClearOut={}),n=e.core.BaseCtrl,s=e.notice.SystemNoticeManager,o=e.common.CommonUtil,t=n,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16780416,this.oneKeySweepingReply),this.subscribe(16780419,this.updateSweepingBaseInfo),this.subscribe(16780420,this.updateSweepingBaseInfo),this.subscribe(16780418,this.getSweepingStateReply),this.subscribe(16780417,this.buySweepingtimesReply),FuncOpenCtrl.instance.registeFuncReq(107,2099955),this.getSweepingBaseInfo()},r.prototype.getSweepingBaseInfo=function(){this.publish(2099955,null)},r.prototype.getSweepingStateReply=function(t){i.LineClearOutModel.instance.getSweepingStateReply(t)},r.prototype.updateSweepingBaseInfo=function(t){i.LineClearOutModel.instance.updateSweepingBaseInfo(t)},r.prototype.oneKeySweepingReply=function(t){0==t[0]?(s.instance.addNotice("扫荡成功"),e.dailyDemon.DailyDemonCtrl.instance.getXiangyaoState()):12107==t[0]?o.goldNotEnoughAlert():o.noticeError(t[0])},r.prototype.buySweepingtimesReply=function(t){0==t[0]?s.instance.addNotice("购买成功"):12012==t[0]?o.goldNotEnoughAlert():o.noticeError(t[0])},a=r,i.LineClearOutCtrl=a}(modules=modules||{}),function(n){var e,t,i,s;function o(){return t.call(this)||this}e=n.rankingList||(n.rankingList={}),i=n.core.BaseCtrl,t=i,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16777339,this.getRankReply),this.subscribe(16777344,this.getActorRankShowRely),this.subscribe(16777347,this.getActorRankDataReply),this.subscribe(16782727,this.getActorCrossRankShowReply),this.subscribe(16782726,this.GetCrossRankReply),this.subscribe(16782729,this.GetCrossGRankReply),this.subscribe(16782731,this.GetCrossGFactionRankReply),this.subscribe(16782733,this.GetCrossGPlayerDetailedInfoReply),this.subscribe(16782730,this.GetActorCrossGRankShowReply),this.subscribe(16782732,this.GetCrossFactionRankReply),this.subscribe(16791927,this.PraiseSelectReply),this.subscribe(16791926,this.GetPraiseInfoReply),this.subscribe(16782734,this.GetCrossActorFameValueReply),this.subscribe(16782735,this.GetCrossGActorFameValueReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetPraiseInfo()},o.prototype.getRank=function(t){console.log("本服 排行榜 请求.............."+t),this.publish(7340132,[t])},o.prototype.getRankReply=function(t){console.log("本服 排行榜 返回.............."+t),e.PlayerRankingModel.instance.getRankReply(t)},o.prototype.getActorRankShow=function(t){this.publish(7340133,[t])},o.prototype.getActorRankShowRely=function(t){e.PlayerRankingModel.instance.getActorRankShowRely(t)},o.prototype.getActorRankData=function(t){this.publish(7340134,[t])},o.prototype.getActorRankDataReply=function(t){e.PlayerRankingModel.instance.getActorRankDataReply(t)},o.prototype.GetCrossRank=function(t){console.log("本区(跨服) 排行榜 请求..............",t),this.publish(4194304,[t])},o.prototype.GetCrossRankReply=function(t){console.log("本区(跨服)  排行榜 返回..............",t),e.PlayerRankingModel.instance.GetCrossRankReply(t)},o.prototype.GetCrossFactionRank=function(){console.log("本区(跨服)  仙盟 排行榜 请求.............."),this.publish(4194308,null)},o.prototype.GetCrossFactionRankReply=function(t){console.log("本区(跨服)  仙盟 排行榜 返回..............",t),e.PlayerRankingModel.instance.GetCrossFactionRankReply(t)},o.prototype.getActorCrossRankShow=function(t){console.log("本区(跨服) 排行榜外观 请求..............",t),this.publish(4194305,[t])},o.prototype.getActorCrossRankShowReply=function(t){console.log("本区(跨服) 排行榜外观 返回..............",t),e.PlayerRankingModel.instance.getActorCrossRankShowReply(t)},o.prototype.GetCrossGRank=function(t){console.log("跨区 排行榜 请求..............",t),this.publish(9437784,[t])},o.prototype.GetCrossGRankReply=function(t){console.log("跨区 排行榜 返回..............",t),e.PlayerRankingModel.instance.GetCrossGRankReply(t)},o.prototype.GetCrossGFactionRank=function(){console.log("跨区 仙盟 排行榜 请求.............."),this.publish(9437786,null)},o.prototype.GetCrossGFactionRankReply=function(t){console.log("跨区 仙盟 排行榜 返回..............",t),e.PlayerRankingModel.instance.GetCrossGFactionRankReply(t)},o.prototype.GetActorCrossGRankShow=function(t){console.log("跨区 排行榜外观 请求..............",t),this.publish(9437785,[t])},o.prototype.GetActorCrossGRankShowReply=function(t){console.log("跨区 排行榜外观 返回..............",t),e.PlayerRankingModel.instance.GetActorCrossGRankShowReply(t)},o.prototype.GetCrossGPlayerDetailedInfo=function(t){console.log("跨区 角色排行榜数据 角色详情 请求..............",t),this.publish(9437787,[t])},o.prototype.GetCrossGPlayerDetailedInfoReply=function(t){console.log("跨区 角色排行榜数据 角色详情 返回..............",t),t[0]?n.chat.ChatModel.instance.initOtherPlayerInfo([null,null,null]):n.chat.ChatModel.instance.initOtherPlayerInfo([t[1],t[2],t[3]])},o.prototype.GetPraiseInfo=function(){console.log("获取点赞信息 请求.............."),this.publish(2110662,null)},o.prototype.GetPraiseInfoReply=function(t){console.log("获取点赞信息 返回..............",t),e.PlayerRankingModel.instance.GetPraiseInfoReply(t)},o.prototype.PraiseSelect=function(t,e,i){console.log("获取点赞信息 请求.............."+t+"   "+e+"  "+i),this.publish(2110663,[t-1,e,i])},o.prototype.PraiseSelectReply=function(t){console.log("点赞 返回..............",t),CommonUtil.noticeError(t[0],"点赞成功"),0===t[0]&&GlobalData.dispatcher.event("PRAISE_SELECT_REPLY")},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];if((982==i||983==i)&&n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(939))return void this.GetPraiseInfo}},o.prototype.GetCrossActorFameValue=function(t){console.log("获取 本区 玩家人气值 请求..............",t),this.publish(4194309,[t])},o.prototype.GetCrossGActorFameValue=function(t){console.log("获取 跨区 玩家人气值 请求..............",t),this.publish(9437788,[t])},o.prototype.GetCrossActorFameValueReply=function(t){console.log("获取 本区 玩家人气值 返回..............",t),GlobalData.dispatcher.event("GET_CROSS_ACTOR_FAME_VALUE_REPLY",[t[0]])},o.prototype.GetCrossGActorFameValueReply=function(t){console.log("获取 跨区 玩家人气值 返回..............",t),GlobalData.dispatcher.event("GET_CROSSG_ACTOR_FAME_VALUE_REPLY",[t[0]])},s=o,e.PlayerRankingCtrl=s}(modules=modules||{}),function(t){var n,e,i,s,o,a;function r(){return e.call(this)||this}n=t.Offline||(t.Offline={}),i=t.core.BaseCtrl,s=t.config.BlendCfg,o=t.guide.GuideModel,e=i,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16779516,this.getOutlineInfoReply),this.publish(2099152,null),this.checkGuide()},r.prototype.checkGuide=function(){o.instance.curGuide&&WindowManager.instance.close(96)},r.prototype.getOutlineInfoReply=function(t){if(!o.instance.curGuide){var e=s.instance.getCfgById(15101);n.OfflineModel.instance.getOutlineInfoReply(t);var i=e[1][1];t[2]>i&&WindowManager.instance.open(96)}},a=r,n.OfflineCtrl=a}(modules=modules||{}),function(i){var n,e,t,s,o;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._record=!1,t}n=i.marry||(i.marry={}),t=i.core.BaseCtrl,s=i.notice.SystemNoticeManager,e=t,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16787729,this.getMarryInfoReply).subscribe(16787727,this.requestMarriageSeekReply).subscribe(16787730,this.requestDivorceReply).subscribe(16787731,this.getMarryTaskReply).subscribe(16787732,this.updateMarryTask).subscribe(16787733,this.drawMarryTaskReply).subscribe(16787734,this.growMarryLevelReply).subscribe(16787736,this.swapRingReply).subscribe(16787737,this.growRingLevelReply).subscribe(16787738,this.activeRingSkillReply).subscribe(16787739,this.growRingSkillReply).subscribe(16787726,this.getMarriageSeekReply).subscribe(16787926,this.getWeddingRingBuyInfoReply).subscribe(16787927,this.buyWeddingRingReply).subscribe(16787735,this.drawMarryLevelReply).subscribe(16777464,this.updateMarryCopyTimes).subscribe(16777465,this.updateMarryCopyTimes).subscribe(16787740,this.getMarryGiftPackReply).subscribe(16787741,this.drawMarryGiftPackReply).subscribe(16787742,this.updateMarryGiftPack).subscribe(16787743,this.growResonanceReply).subscribe(16787728,this.requestMarryReply).subscribe(16787746,this.activeMarryTokenReply).subscribe(16787747,this.growMarryTokenReply).subscribe(16787748,this.gradeMarryTokenReply).subscribe(16787749,this.growMarryTokenSkillReply).subscribe(16787750,this.growMarryHeartContactReply).subscribe(16787745,this.updateMarryTokenReply).subscribe(16787751,this.getMarryTokenAttrReply).subscribe(16787752,this.getMarryListReply).subscribe(16787754,this.marryResultReply).subscribe(16787753,this.updateMarryList).subscribe(16787755,this.getRequestMarryListReply).subscribe(16787756,this.updateRequestMarryList).subscribe(16787928,this.drawWeddingRingAccAwardReply).subscribe(16787757,this.markMarryRingReply).subscribe(16787758,this.copyMarryMatchReply),this.onGlobal("BAG_UPDATE",this.bagUpdateHandler).onGlobal("PLAYER_UPDATE_MONEY",this.moneyUpdateHandler).onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getMarryInfo(),this.getWeddingRingBuyInfo(),this.getMarryGiftPack(),this.getMarryCopyTimes()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(320==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(320))return this.getMarryInfo(),this.getWeddingRingBuyInfo(),this.getMarryGiftPack(),void this.getMarryCopyTimes()},a.prototype.onLogin=function(){this.getMarryTask(),this.getMarryCopyTimes(),ChatCtrl.instance.getChatRecord(5)},a.prototype.copyMarryMatch=function(){console.log("仙缘副本 玩家未婚 匹配....................."),this.publish(4194909,null)},a.prototype.getMarryInfo=function(){this.publish(2107065,null)},a.prototype.getMarryInfoReply=function(t){console.log("获取结缘信息返回.....................",t),n.MarryModel.instance.info=t,this._record||(this._record=!0,n.MarryModel.instance.isMarried&&this.onLogin())},a.prototype.getMarriageSeek=function(t){null==t?(this.publish(4194904,[PlayerModel.instance.serverPgId]),this.publish(4194904,[0])):this.publish(4194904,[PlayerModel.instance.serverPgId])},a.prototype.getMarriageSeekReply=function(t){n.MarryModel.instance.marriageSeeks=t},a.prototype.requestMarriageSeek=function(t,e){this.publish(2107062,[t,e])},a.prototype.requestMarriageSeekReply=function(t){var e=t[1];0===e?(this.getMarriageSeek(),n.MarryModel.instance.seekCD=t[0],GlobalData.dispatcher.event("MARRY_SELECT_SQUARE_TAB",1)):46601===e?s.instance.addNotice("您已结缘，不可发布",!0):CommonUtil.noticeError(e)},a.prototype.requestMarry=function(t,e){this.publish(2107063,[t,e])},a.prototype.requestMarryReply=function(t){var e=t[0];0===e?(WindowManager.instance.open(490),WindowManager.instance.close(491)):46611!==e&&46601!==e||this.getMarriageSeek(),CommonUtil.noticeError(e,"结缘成功")},a.prototype.requestDivorce=function(){this.publish(2107064,null)},a.prototype.requestDivorceReply=function(t){var e=t[0];0===e&&WindowManager.instance.close(501),CommonUtil.noticeError(e,"分离成功")},a.prototype.getMarryTask=function(){this.publish(2107066,null)},a.prototype.getMarryTaskReply=function(t){n.MarryModel.instance.tasks=t[0]},a.prototype.updateMarryTask=function(t){var e=t[0],i=t[1];n.MarryModel.instance.updateTask(e,i)},a.prototype.drawMarryTask=function(t){this.publish(2107067,[t])},a.prototype.drawMarryTaskReply=function(t){var e=t[0];CommonUtil.noticeError(e,"领取成功")},a.prototype.growMarryLevel=function(){this.publish(2107068,null)},a.prototype.growMarryLevelReply=function(t){var e=t[0];CommonUtil.noticeError(e,"亲密度升级成功"),n.MarryModel.instance.intimacy=t[1]},a.prototype.swapRing=function(t){this.publish(2107070,[t])},a.prototype.swapRingReply=function(t){var e=t[0];CommonUtil.noticeError(e,"义戒替换成功"),n.MarryModel.instance.ring=t[1]},a.prototype.growRingLevel=function(){this.publish(2107071,null)},a.prototype.growRingLevelReply=function(t){var e=t[0];CommonUtil.noticeError(e,"义戒升级成功"),n.MarryModel.instance.ring=t[1]},a.prototype.activeRingSkill=function(t){this._skillId=t,this.publish(2107072,[t])},a.prototype.activeRingSkillReply=function(t){var e=t[0];0===e?(n.MarryModel.instance.setSkills(t[1]),s.instance.addNotice("义戒技能激活成功")):CommonUtil.noticeError(e)},a.prototype.growRingSkill=function(t){this.publish(2107073,[t])},a.prototype.growRingSkillReply=function(t){var e=t[0];CommonUtil.noticeError(e,"义戒技能升级成功"),n.MarryModel.instance.setSkills(t[1])},a.prototype.getWeddingRingBuyInfo=function(){this.publish(2107262,null)},a.prototype.getWeddingRingBuyInfoReply=function(t){n.MarryModel.instance.getWeddingRingBuyInfoReply=t},a.prototype.buyWeddingRing=function(t){this.publish(2107263,[t])},a.prototype.buyWeddingRingReply=function(t){var e=t[0];CommonUtil.noticeError(e,"购买成功")},a.prototype.drawWeddingRingAccAward=function(t){this.publish(2107264,[t])},a.prototype.drawWeddingRingAccAwardReply=function(t){CommonUtil.noticeError(t[0],"购买成功")},a.prototype.openRingBuyAlert=function(){WindowManager.instance.open(484)},a.prototype.drawMarryLevel=function(){this.publish(2107069,null)},a.prototype.drawMarryLevelReply=function(t){var e=t[0];n.MarryModel.instance.intimacy=t[1],CommonUtil.noticeError(e,"领取成功")},a.prototype.getMarryCopyTimes=function(){this.publish(2097190,null)},a.prototype.updateMarryCopyTimes=function(t){console.log("更新仙缘副本次数",t),n.MarryModel.instance.copyInfo=t[0]},a.prototype.getMarryGiftPack=function(){this.publish(4194905,null)},a.prototype.getMarryGiftPackReply=function(t){n.MarryModel.instance.getMarryGiftPackReply(t)},a.prototype.updateMarryGiftPack=function(t){n.MarryModel.instance.updateMarryGiftPack(t)},a.prototype.drawMarryGiftPack=function(t,e){this.publish(2107074,[t,e])},a.prototype.drawMarryGiftPackReply=function(t){var e=t[0];0===e?n.MarryModel.instance.drawMarryGiftPackReply(t[1]):CommonUtil.noticeError(e)},a.prototype.growResonance=function(){this.publish(2107075,null)},a.prototype.growResonanceReply=function(t){var e=t[0];0===e?(n.MarryModel.instance.ring=t[1],s.instance.addNotice("升阶成功")):CommonUtil.noticeError(e)},a.prototype.bagUpdateHandler=function(t){0===t&&(n.MarryModel.instance.checkFeedRP(),n.MarryModel.instance.checkSkillRP(),n.MarryModel.instance.checkRingFeedRP(),n.MarryModel.instance.checkTokenRPs(),n.MarryModel.instance.checkMarkRP())},a.prototype.moneyUpdateHandler=function(){n.MarryModel.instance.checkTokenRPs()},a.prototype.updateMarryTokenReply=function(t){this._record&&(n.MarryModel.instance.tokens=t)},a.prototype.activeMarryToken=function(t){this.publish(2107076,[t])},a.prototype.activeMarryTokenReply=function(t){var e=t[0];CommonUtil.noticeError(e,"激活成功")},a.prototype.growMarryToken=function(t){this.publish(2107077,[t])},a.prototype.growMarryTokenReply=function(t){var e=t[0];CommonUtil.noticeError(e,"升级成功")},a.prototype.gradeMarryToken=function(t){this.publish(2107078,[t])},a.prototype.gradeMarryTokenReply=function(t){var e=t[0];CommonUtil.noticeError(e,"升阶成功")},a.prototype.growMarryTokenSkill=function(t,e){this.publish(2107079,[t,e])},a.prototype.growMarryTokenSkillReply=function(t){var e=t[0];CommonUtil.noticeError(e,"技能升级成功")},a.prototype.growMarryHeartContact=function(t){this.publish(2107080,[t])},a.prototype.growMarryHeartContactReply=function(t){var e=t[0];CommonUtil.noticeError(e,"心有灵犀升级成功")},a.prototype.getMarryTokenAttr=function(){this.publish(2107081,null)},a.prototype.getMarryTokenAttrReply=function(t){n.MarryModel.instance.totalAttrs=t},a.prototype.getMarryList=function(){this.publish(4194906,null)},a.prototype.getMarryListReply=function(t){n.MarryModel.instance.proposeList=t[0]},a.prototype.marryResult=function(t,e){void 0===e&&(e=0),this._marryResult=e,this.publish(4194907,[t,e])},a.prototype.marryResultReply=function(t){var e,i=t[0];0===this._marryResult?e="拒绝结缘成功":(e="结缘成功",n.MarryModel.instance.proposeList=[],WindowManager.instance.close(636),WindowManager.instance.open(490)),CommonUtil.noticeError(i,e)},a.prototype.updateMarryList=function(t){n.MarryModel.instance.addProposeObj(t)},a.prototype.getRequestMarryList=function(){this.publish(4194908,null)},a.prototype.getRequestMarryListReply=function(t){n.MarryModel.instance.requestMarryList=t[0]},a.prototype.updateRequestMarryList=function(t){n.MarryModel.instance.updateRequestMarryList(t)},a.prototype.markMarryRing=function(t){console.log("义戒刻印.......................",t),this.publish(2107082,[t])},a.prototype.markMarryRingReply=function(t){console.log("义戒刻印返回..................",t);var e=t[0];0===e&&(n.MarryModel.instance.setMark(t[1]),WindowManager.instance.close(842),WindowManager.instance.close(843),t[1]&&0!=t[1][1]&&CommonUtil.noticeError(e,"刻印成功，前往聊天查看信息界面点击义戒进行查看"))},a.prototype.copyMarryMatchReply=function(t){if(console.log("仙缘副本匹配返回..................",t),t[0])s.instance.addNotice("暂无合适仙友",!0);else{var e=t[1];GlobalData.dispatcher.event("COPY_MARRY_MATCH_REPLY",[e]),CommonUtil.whetherInCopy()||i.common_group.CommonGroupUtil.notTeamCopyIsTeaming()?console.log("进入失败 已有其他队伍"):(i.dungeon.DungeonCtrl.instance.reqEnterScene(2381),console.log("请求进入副本"))}},o=a,n.MarryCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.yuanShen||(t.yuanShen={}),n=t.core.BaseCtrl,s=t.effect.SuccessEffectCtrl,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16788426,this.getYuanShenInfoReply).subscribe(16788427,this.yuanShenRefineReply).subscribe(16788429,this.wearYuanShenEquipReply).subscribe(16788430,this.updateYuanShenEquip).subscribe(16788431,this.updateYuanShenState).subscribe(16788432,this.updateYuanShenGrade).subscribe(16788433,this.immortalYuanShenStageReply).subscribe(16788453,this.updateYuanshenFuling).subscribe(16788452,this.getYuanshenFulingReply).subscribe(16788454,this.openYuanshenFulingSlotReply).subscribe(16788455,this.inlayYuanshenFulingReply).subscribe(16788456,this.oneKeyInlayYuanshenFulingReply).subscribe(16788428,this.yuanShenQuenchingReply).subscribe(16788457,this.getYuanShenSkillReply).subscribe(16788458,this.addYuanShenSkillReply).subscribe(16788459,this.updateYuanShenSkill),this.onGlobal("BAG_UPDATE",e.YuanShenModel.instance.checkRP,e.YuanShenModel.instance).onGlobal("PLAYER_UPDATE_MONEY",e.YuanShenModel.instance.checkRP,e.YuanShenModel.instance),Channel.instance.subscribe(16788460,this,this.yuanShenArtifactReply),Channel.instance.subscribe(16788461,this,this.yuanShenArtifactSkillReply),Channel.instance.subscribe(16788462,this,this.updateYuanShenArtifact),this.onGlobal("YUAN_SHEN_INFO_UPDATE",this.setRp),FuncOpenCtrl.instance.registeFuncReq(5,2098052),this.onLoginSuccess()},a.prototype.setRp=function(){t.spiritDungeon.SpiritDungeonModel.instance.setRp()},a.prototype.onLoginSuccess=function(){this.getYuanShenInfo(),this.getYuanshenFuling(),this.requestYuanShenSkillReply()},a.prototype.getYuanShenInfo=function(){this.publish(2107662,null)},a.prototype.getYuanShenInfoReply=function(t){e.YuanShenModel.instance.infos=t[0]},a.prototype.yuanShenRefine=function(t){this.publish(2107663,[t])},a.prototype.yuanShenRefineReply=function(t){var e=t[0];CommonUtil.noticeError(e)},a.prototype.updateYuanShenGrade=function(t){e.YuanShenModel.instance.grade=t},a.prototype.updateYuanShenState=function(t){e.YuanShenModel.instance.state=t},a.prototype.yuanShenQuenching=function(t,e){this.publish(2107664,[t,e?1:0])},a.prototype.yuanShenQuenchingReply=function(t){var e=t[0];CommonUtil.noticeError(e,"淬神成功")},a.prototype.wearYuanShenEquip=function(t,e){this.publish(2107665,[t,e])},a.prototype.wearYuanShenEquipReply=function(t){var e=t[0];CommonUtil.noticeError(e,"穿戴成功")},a.prototype.updateYuanShenEquip=function(t){e.YuanShenModel.instance.equip=t},a.prototype.fastWearYuanShenEquip=function(t,e){this.publish(2107666,[t,e])},a.prototype.immortalYuanShenStage=function(t){this.publish(2107667,[t])},a.prototype.immortalYuanShenStageReply=function(t){var e=t[0];CommonUtil.noticeError(e,"升阶成功")},a.prototype.getYuanshenFuling=function(){this.publish(2107672,null)},a.prototype.getYuanshenFulingReply=function(t){e.YuanShenModel.instance.fulingList=t[0]},a.prototype.updateYuanshenFuling=function(t){e.YuanShenModel.instance.updateFuling(t)},a.prototype.openYuanshenFulingSlot=function(t,e,i){this.publish(2107673,[t,e,i])},a.prototype.openYuanshenFulingSlotReply=function(t){var e=t[0];CommonUtil.noticeError(e,"开启成功!")},a.prototype.inlayYuanshenFuling=function(t,e,i,n){this.publish(2107674,[t,e,i,n])},a.prototype.inlayYuanshenFulingReply=function(t){var e=t[0];CommonUtil.noticeError(e,"附灵成功!")},a.prototype.oneKeyInlayYuanshenFuling=function(t,e){this.publish(2107675,[t,e])},a.prototype.oneKeyInlayYuanshenFulingReply=function(t){var e=t[0];CommonUtil.noticeError(e,"一键附灵成功!")},a.prototype.updateYuanShenSkill=function(t){e.YuanShenModel.instance.updateYuanShenSkill(t)},a.prototype.getYuanShenSkillReply=function(t){e.YuanShenModel.instance.pushSkillData(t)},a.prototype.addYuanShenSkillReply=function(t){var e=t[0];CommonUtil.noticeError(e,"技能升级成功!")},a.prototype.addYuanShenSkill=function(t,e){this.publish(2107677,[t,e])},a.prototype.requestYuanShenSkillReply=function(){this.publish(2107676,[0])},a.prototype.yuanShenArtifactReply=function(t){if(0===t[1]){var e=WindowManager.instance.getPanelById(552);if(e){var i=e.getSkillId();WindowManager.instance.open(1257,[i])}}else s.instance.play("assets/others/tx_jinjiechengong7.png")},a.prototype.updateYuanShenArtifact=function(t){e.YuanShenModel.instance.updateYuanShenArtifact(t)},a.prototype.yuanShenArtifactSkillReply=function(t){var e=t[0];0===e?0===t[1]?s.instance.play("assets/others/tx_jinjiechengong5.png"):s.instance.play("assets/others/tx_jinjiechengong4.png"):CommonUtil.noticeError(e)},a.prototype.yuanShenArtifact=function(t){Channel.instance.publish(2107678,[t])},a.prototype.yuanShenArtifactSkill=function(t){Channel.instance.publish(2107679,[t])},o=a,e.YuanShenCtrl=o}(modules=modules||{}),function(t){var e,i;function n(){var t=GlobalData.getConfig("fairy_doll_culture");this._growth={},this.growthAttrIds=[];for(var e=0;e<t.length;++e){this._growth[t[e][0]]=this._growth[t[e][0]]||[],this._growth[t[e][0]].push(t[e]);for(var i=t[e][4],n=0;n<i.length;n+=2)-1===this.growthAttrIds.indexOf(i[n])&&this.growthAttrIds.push(i[n])}this.growthAttrIds.sort(function(t,e){return t-e});var s=GlobalData.getConfig("fairy_doll_refine");this._grade={},this.babyIds=[],this.gradeAttrIds=[];for(e=0;e<s.length;++e){-1===this.babyIds.indexOf(s[e][0])&&this.babyIds.push(s[e][0]),this._grade[s[e][0]]=this._grade[s[e][0]]||[],this._grade[s[e][0]].push(s[e]);for(i=s[e][3],n=0;n<i.length;n+=2)-1===this.gradeAttrIds.indexOf(i[n])&&this.gradeAttrIds.push(i[n])}this.gradeAttrIds.sort(function(t,e){return t-e});var o=GlobalData.getConfig("fairy_doll_supplement");this._tonic={},this.maxTonics={},this.tonicAttrIds=[];for(e=0;e<o.length;++e){this._tonic[o[e][0]]=this._tonic[o[e][0]]||[],this._tonic[o[e][0]].push(o[e]),o[e][1]>(this.maxTonics[o[e][0]]||0)&&(this.maxTonics[o[e][0]]=o[e][1]);for(i=o[e][5],n=0;n<i.length;n+=2)-1===this.tonicAttrIds.indexOf(i[n])&&this.tonicAttrIds.push(i[n])}this.tonicAttrIds.sort(function(t,e){return t-e});var a=GlobalData.getConfig("fairy_doll_skill");this._skill={},this._skill1={},this.skillIds={};for(e=0;e<a.length;++e){this._skill[a[e][1]]=a[e],this._skill1[a[e][0]]=this._skill1[a[e][0]]||[],this._skill1[a[e][0]].push(a[e]),this.skillIds[a[e][0]]=this.skillIds[a[e][0]]||{},this.skillIds[a[e][0]][a[e][4]]=this.skillIds[a[e][0]][a[e][4]]||[];var r=1e-4*a[e][1]>>0;-1===this.skillIds[a[e][0]][a[e][4]].indexOf(r)&&this.skillIds[a[e][0]][a[e][4]].push(r)}this._fairyConfig=GlobalData.getConfig("fairy_doll_active_skill"),this._activeSkill={};for(var l=0;l<this._fairyConfig.length;l++){var h=this._fairyConfig[l];h&&(this._activeSkill[h[0]]=h)}}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgByActiveSkillById=function(t){return this._activeSkill[t]},n.prototype.getActiveSkillCfg=function(){return this._fairyConfig},n.prototype.get=function(t){return this._activeSkill[t]},n.prototype.getShowId=function(t){return this._grade&&this._grade[t]&&this._grade[t][0]?this._grade[t][0][4]:0},n.prototype.getGradeItem=function(t,e){return this._grade&&this._grade[t]&&this._grade[t][e-1]?this._grade[t][e-1][2]:null},n.prototype.getGradeMoney=function(t,e){return this._grade&&this._grade[t]&&this._grade[t][e-1]?this._grade[t][e-1][7]:null},n.prototype.getWay=function(t){return this._grade&&this._grade[t]&&this._grade[t][0]?this._grade[t][0][6]:""},n.prototype.getGradeFight=function(t,e){return this._grade&&this._grade[t]&&this._grade[t][e-1]?this._grade[t][e-1][5]:0},n.prototype.getGradeAttr=function(t,e){return this._grade&&this._grade[t]&&this._grade[t][e-1]?this._grade[t][e-1][3]:[]},n.prototype.getMaxGrade=function(t){return this._grade&&this._grade[t]?this._grade[t].length:0},n.prototype.getGrowthItem=function(t,e){return this._growth&&this._growth[t]&&this._growth[t][e-1]?this._growth[t][e-1][2]:null},n.prototype.getGrowthExp=function(t,e){return this._growth&&this._growth[t]&&this._growth[t][e-1]?this._growth[t][e-1][3]:0},n.prototype.getGrowthAttr=function(t,e){return this._growth&&this._growth[t]&&this._growth[t][e-1]?this._growth[t][e-1][4]:null},n.prototype.getGrowthFight=function(t,e){return this._growth&&this._growth[t]&&this._growth[t][e-1]?this._growth[t][e-1][6]:0},n.prototype.getIdBySkill=function(t){return this._skill[t][0]},n.prototype.getTypeBySkill=function(t){return this._skill[t][4]},n.prototype.getCfgBySkill=function(t){return this._skill[t]},n.prototype.getNextSkillByIdAndLv=function(t,e){for(var i=this._skill1[t]||[],n=0,s=Number.POSITIVE_INFINITY,o=0;o<i.length;++o){var a=i[o][2]-e;1<i[o][2]&&0<a&&a<s&&(s=a,n=i[o][1])}return[n,s]},n.prototype.getNextSkillByIdAndGrade=function(t,e){for(var i=this._skill1[t]||[],n=0,s=Number.POSITIVE_INFINITY,o=0;o<i.length;++o){var a=i[o][3]-e;1<i[o][3]&&0<a&&a<s&&(s=a,n=i[o][1])}return[n,s]},n.prototype.getTonicCfgByType=function(t){return this._tonic[t]},n.prototype.getTonicCfgByTypeAndLv=function(t,e){for(var i=0;i<this._tonic[t].length;++i)if(e<=this._tonic[t][i][1])return this._tonic[t][i];return null},i=n,e.BabyCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab=GlobalData.getConfig("marry_task")},n.prototype.getCfgById=function(t){if(!this._tab)throw new Error("仙缘任务不存在!"+t);return this._tab[t]},i=n,e.MarryTaskCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._arr=GlobalData.getConfig("ring_resonance"),this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){},n.prototype.getCfgByLv=function(t){return this._arr[t]},i=n,e.RingResonanceCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.ids=[],this.attrs=e.BlendCfg.instance.getCfgById(22017)[1],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("marry_token"),e=0,i=t.length;e<i;e++){var n=t[e][0];this._tab[n]=t[e],-1===this.ids.indexOf(n)&&this.ids.push(n)}},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.MarryTokenCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=[];for(var t=GlobalData.getConfig("marry_token_level"),e=0,i=t.length;e<i;e++){var n=t[e][0];this._cfgs[n]||(this._cfgs[n]=[]),this._cfgs[n][t[e][1]]=t[e]}},n.prototype.getCfgByIdLv=function(t,e){return this._cfgs[t][e]},n.prototype.has=function(t,e){return!!this._cfgs[t]&&!!this._cfgs[t][e]},i=n,e.MarryTokenLevelCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._skills={},this._skillActive={};for(var t=GlobalData.getConfig("marry_token_grade"),e=0,i=t.length;e<i;e++){var n=t[e][0];this._tab[n]||(this._tab[n]=[]),this._tab[n][t[e][1]]=t[e];var s=t[e][3];s&&(this._skills[n]||(this._skills[n]=[]),this._skills[n].push(s),this._skillActive[s]=t[e][1])}},n.prototype.getCfgByIdLv=function(t,e){return this._tab[t][e]},n.prototype.has=function(t,e){return!!this._tab[t]&&!!this._tab[t][e]},n.prototype.getSkillIdsById=function(t){return this._skills[t]},n.prototype.getSkillActiveLv=function(t){return this._skillActive[t]||Number.MAX_VALUE},i=n,e.MarryTokenGradeCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("marry_token_skill"),e=0,i=t.length;e<i;e++){var n=t[e][0],s=t[e][1];this._tab[n]||(this._tab[n]=[]),this._tab[n][s]=t[e]}},n.prototype.has=function(t,e){return!!this._tab[t]&&!!this._tab[t][e]},n.prototype.getCfgByIdLv=function(t,e){return this._tab[t][e]},i=n,e.MarryTokenSkillCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._arr=GlobalData.getConfig("marry_intimacy"),this.intimacyId=this._arr[0][3][0]},n.prototype.getCfgByLv=function(t){if(!this._arr[t-1])throw new Error("亲密度配置不存在! ---\x3e"+t);return this._arr[t-1]},n.prototype.has=function(t){return!!this._arr[t-1]},n.prototype.getAwardsByCfg=function(t){for(var e=t[2],i=0,n=e.length;i<n;i++){var s=e[i][0],o=e[i][1];if(PlayerModel.instance.level>=s&&PlayerModel.instance.level<=o)return e[i].slice(2)}throw new Error("人物等级"+PlayerModel.instance.level+" 找不到匹配奖励!"+e)},i=n,e.MarryIntimacyCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this.commonSkillIds=[],this.commonSkillActiveLv=[];for(var t=GlobalData.getConfig("ring_level"),e=0,i=t.length;e<i;e++){this._tab[t[e][0]]=t[e];var n=t[e][3];n&&-1===this.commonSkillIds.indexOf(n)&&(this.commonSkillIds.push(n),this.commonSkillActiveLv.push(t[e][0]))}this.costItemId=t[1][1][0]},n.prototype.has=function(t){return!!this._tab[t]},n.prototype.getCfgByLv=function(t){if(!this._tab[t])throw new Error("配置等级不存在 ---\x3e"+t);return this._tab[t]},i=n,e.RingLevelCfg=i}(modules=modules||{}),function(t){var r,e;function i(){this.skillIds=[],this.typeSkillIds=[],this.init()}r=t.config||(t.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("ring_skill"),e=0,i=t.length;e<i;e++){var n=t[e][0];this._tab[n]||(this._tab[n]=[]);var s=t[e][1];this._tab[n][s]=t[e],-1===this.skillIds.indexOf(n)&&this.skillIds.push(n)}for(var o=75201;;){var a=r.BlendCfg.instance.getCfgById(o++);if(!a||!a[1][0])break;this.typeSkillIds.push(a[1][0])}},i.prototype.has=function(t,e){return!!this._tab[t]&&!!this._tab[t][e]},i.prototype.getCfgByIdLv=function(t,e){return this._tab[t][e]},Object.defineProperty(i.prototype,"commonSkillIds",{get:function(){return r.RingLevelCfg.instance.commonSkillIds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commonSkillActiveLv",{get:function(){return r.RingLevelCfg.instance.commonSkillActiveLv},enumerable:!0,configurable:!0}),e=i,r.RingSkillCfg=e}(modules=modules||{}),function(e){var t,g,o,f,a,n,s,r,l,d,h,_,m,v,b,T,i;function c(){this.seekCD=0,this.inx=-1,this._tasks=[{},{}],this._skills={},this._seeks={cross:{arr:[],tab:{}},local:{arr:[],tab:{}}},this._taskRPs={},this._fightByRingType=[],this.requestMarryList=[],this._tokens={},this.seekCD=0,this._proposeList=[];for(var t=1,e=75101;;){var i=r.instance.getCfgById(e++);if(!i)break;var n=parseInt(i[2][0]);this._fightByRingType[t]=n,t++}this.markId=r.instance.getCfgById(75501)[1][0]}t=e.marry||(e.marry={}),g=utils.TableUtils,o=e.config.MarryTaskCfg,f=e.redPoint.RedPointCtrl,a=e.config.RingResonanceCfg,n=e.config.MarryIntimacyCfg,s=e.bag.BagModel,r=e.config.BlendCfg,l=e.config.RingLevelCfg,d=e.config.SkillCfg,h=e.config.RingSkillCfg,_=e.config.MarryTokenCfg,m=e.config.MarryTokenLevelCfg,v=e.config.MarryTokenGradeCfg,b=e.config.HeartContactCfg,T=e.config.MarryTokenSkillCfg,Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"info",{set:function(t){this.half=t[0],this.intimacy=t[1],this.ring=t[2],this._marryDay=t[3],this._marryId=t[4],this.tokens=t[5][0],this.setMark(t[6]),this.checkCopyRP(),this.isMarried||(this._taskRPs={},f.instance.setRPProperty("marryTaskRP",!1)),(!this.half||this.half&&0===this._half[0])&&localStorage.setItem(e.player.PlayerModel.instance.actorId+"_UpdateHaloSkillOfMarrier",""),e.baby.BabyCtrl.instance.localUpdateChat(),GlobalData.dispatcher.event("MARRY_INFO_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tokens",{set:function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e][0];this._tokens[n]=t[e]}this.checkTokenRPs(),GlobalData.dispatcher.event("MARRY_TOKEN_UPDATE")},enumerable:!0,configurable:!0}),c.prototype.setMark=function(t){this.mark=t,GlobalData.dispatcher.event("MARRY_MARK_UPDATE"),this.checkMarkRP()},c.prototype.getTokenSkillLv=function(t,e){for(var i=0,n=this._tokens[t][6];i<n.length;i++){var s=n[i];if(s[0]===e)return s[1]}return 0},c.prototype.checkTokenRPs=function(){if(!g.isEmpty(this._tokens)){this.tokenRPIndexs={feed:[],rank:[]};for(var t=_.instance.ids,e=0,i=t.length;e<i;e++){var n=t[e],s=this._tokens[n],o=s[1];if(0===o){var a=v.instance.getCfgByIdLv(n,0);CommonUtil.conditionItemIsEnough(a[2])&&-1==this.tokenRPIndexs.feed.indexOf(e)&&this.tokenRPIndexs.feed.push(e)}else{m.instance.has(n,o+1)&&(a=m.instance.getCfgByIdLv(n,o),CommonUtil.conditionItemIsEnough(a[2])&&-1==this.tokenRPIndexs.feed.indexOf(e)&&this.tokenRPIndexs.feed.push(e));var r=s[2];v.instance.has(n,r+1)&&(a=v.instance.getCfgByIdLv(n,r),CommonUtil.conditionItemIsEnough(a[2])&&-1==this.tokenRPIndexs.rank.indexOf(e)&&this.tokenRPIndexs.rank.push(e))}var l=s[5],h=b.instance.getCfgByIdLv(n,l)[2];h&&s[4]>=h&&s[3]>=h&&this.isMarried&&-1==this.tokenRPIndexs.rank.indexOf(e)&&this.tokenRPIndexs.rank.push(e);for(var c=v.instance.getSkillIdsById(n),p=0,u=c.length;p<u;p++){var d=c[p],y=this.getTokenSkillLv(n,d);0===y?(r=s[2])>=v.instance.getSkillActiveLv(d)&&-1==this.tokenRPIndexs.rank.indexOf(e)&&this.tokenRPIndexs.rank.push(e):T.instance.has(d,y+1)&&(a=T.instance.getCfgByIdLv(d,y),CommonUtil.conditionItemIsEnough(a[2])&&-1==this.tokenRPIndexs.rank.indexOf(e)&&this.tokenRPIndexs.rank.push(e))}}f.instance.setRPProperty("marryTokenFeedRP",this.getFuncOpen()&&!!this.tokenRPIndexs.feed.length),f.instance.setRPProperty("marryTokenRankRP",this.getFuncOpen()&&!!this.tokenRPIndexs.rank.length)}},c.prototype.getHeartFinishCount=function(t){var e=this._tokens[t],i=e[5],n=b.instance.getCfgByIdLv(t,i)[2];return n?e[4]>=n?2:e[2]>=n||e[3]>=n?1:0:-1},c.prototype.getTokenInofById=function(t){return this._tokens[t]},Object.defineProperty(c.prototype,"copyInfo",{get:function(){return this._copyInfo},set:function(t){this._copyInfo=t,this.checkCopyRP(),GlobalData.dispatcher.event("MARRY_COPY_UPDATE")},enumerable:!0,configurable:!0}),c.prototype.checkCopyRP=function(){f.instance.setRPProperty("marryCopyRP",this.getFuncOpen()&&this._copyInfo&&0<this._copyInfo[1])},Object.defineProperty(c.prototype,"half",{get:function(){return this._half},set:function(t){this._half=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"intimacy",{set:function(t){this._intimacy=t,this.checkFeedRP(),f.instance.setRPProperty("marryIntimacyAwardsRP",this.getFuncOpen()&&t[1]>t[2]),GlobalData.dispatcher.event("MARRY_INTIMACY_UPDATE")},enumerable:!0,configurable:!0}),c.prototype.checkFeedRP=function(){var t=!1;if(n.instance.has(this.intimacyLv+1)&&this.isMarried){var e=s.instance.getItemCountById(n.instance.intimacyId),i=n.instance.getCfgByLv(c.instance.intimacyLv)[1];(i-=this.intimacyValue)<=e&&(t=!0)}f.instance.setRPProperty("marryIntimacyFeedRP",this.getFuncOpen()&&t)},Object.defineProperty(c.prototype,"isSeekMan",{get:function(){return this._marryId===PlayerModel.instance.actorId},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"marryId",{get:function(){return this._marryId},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ring",{set:function(t){this._ring=t,this.setSkills(t[3]),this.calcResonance(),this.checkRingFeedRP(),GlobalData.dispatcher.event("MARRY_RING_UPDATE")},enumerable:!0,configurable:!0}),c.prototype.calcResonance=function(){if(this.resonanceIsCanUp=!1,this.isMarried){var t=a.instance.getCfgByLv(this.resonanceLevel+1);if(t&&this.ringType>=r.instance.getCfgById(75014)[1][0]){var e=t[1];this.resonanceIsCanUp=this.resonanceProgress>=e}}f.instance.setRPProperty("marryRingResonanceRP",this.getFuncOpen()&&this.resonanceIsCanUp)},c.prototype.checkSkillRP=function(){for(var t=!1,e=h.instance.commonSkillIds,i=0,n=e.length;i<n;i++)if(this.checkSkill(e[i],i,!0)){t=!0;break}for(i=0,n=(e=h.instance.typeSkillIds).length;i<n;i++)if(this.checkSkill(e[i],i,!1)){t=!0;break}f.instance.setRPProperty("marrySkillRP",this.getFuncOpen()&&t)},c.prototype.checkRingFeedRP=function(){var t=!1;if(l.instance.has(c.instance.ringLv+1)){var e=s.instance.getItemCountById(l.instance.costItemId),i=l.instance.getCfgByLv(c.instance.ringLv)[1][1];(i-=this.ringSchedule)<=e&&(t=!0)}f.instance.setRPProperty("marryRingFeedRP",this.getFuncOpen()&&t&&-1!==c.instance.ringType)},c.prototype.checkSkill=function(t,e,i){var n=!1,s=c.instance.getSkillLvById(t);if(0===s)if(i)c.instance.ringLv>=h.instance.commonSkillActiveLv[e]&&(n=!0);else{var o=r.instance.getCfgById(75010)[1][e];0<CommonUtil.getPropCountById(o)&&(n=this.isMarried)}else{var a=h.instance.getCfgByIdLv(t,s);h.instance.has(t,s+1)&&CommonUtil.conditionItemIsEnough(a[2])&&(n=!0)}return n},Object.defineProperty(c.prototype,"proposeList",{get:function(){return this._proposeList},set:function(t){this._proposeList=t,GlobalData.dispatcher.event("MARRY_PROPOSE_LIST_UPDATE")},enumerable:!0,configurable:!0}),c.prototype.addProposeObj=function(t){for(var e=t[1],i=t[0],n=i[0],s=-1,o=0,a=this._proposeList.length;o<a;o++)if(n===this._proposeList[o][0]){s=o;break}0===e?-1!=s&&this._proposeList.splice(s,1):(-1!=s?this._proposeList[s]=i:this._proposeList.push(i),WindowManager.instance.open(635,i)),GlobalData.dispatcher.event("MARRY_PROPOSE_LIST_UPDATE")},Object.defineProperty(c.prototype,"tasks",{set:function(t){this._taskRPs={};for(var e=0,i=t.length;e<i;e++){var n=t[e],s=o.instance.getCfgById(n[0])[2];2===(this._tasks[s][n[0]]=n)[1]&&(this._taskRPs[n[0]]=!0)}f.instance.setRPProperty("marryTaskRP",this.getFuncOpen()&&!g.isEmpty(this._taskRPs)),GlobalData.dispatcher.event("MARRY_TASK_UPDATE")},enumerable:!0,configurable:!0}),c.prototype.updateTask=function(t,e){var i=e[0],n=o.instance.getCfgById(i)[2];2===t?delete this._tasks[n][i]:this._tasks[n][i]=e,2===e[1]?this._taskRPs[i]=!0:delete this._taskRPs[i],f.instance.setRPProperty("marryTaskRP",this.getFuncOpen()&&!g.isEmpty(this._taskRPs)),GlobalData.dispatcher.event("MARRY_TASK_UPDATE")},c.prototype.getTasksByType=function(t){return g.values(this._tasks[t])},c.prototype.getTaskById=function(t){return this._tasks[0][t]||this._tasks[1][t]},Object.defineProperty(c.prototype,"marriageSeeks",{set:function(t){var e=t[2],i=t[0];0===i.length&&(t[3]=e);var n=t[1]===PlayerModel.instance.serverPgId;1===e&&(n?(this._seeks.local.tab={},this._seeks.local.arr.length=0):(this._seeks.cross.tab={},this._seeks.cross.arr.length=0));for(var s=n?this._seeks.local.tab:this._seeks.cross.tab,o=n?this._seeks.local.arr:this._seeks.cross.arr,a=0,r=i.length;a<r;a++)s[i[a][0][2]]=i[a],o.push(i[a]);e===t[3]&&(n||o.push.apply(o,this._seeks.local.arr),o.sort(this.sortFunc.bind(this)),GlobalData.dispatcher.event("MARRIAGE_SEEKS_INIT"))},enumerable:!0,configurable:!0}),c.prototype.sortFunc=function(t,e){return t[3]>e[3]?-1:1},c.prototype.getMarriageSeekByName=function(t){return this._seeks.local.tab[t]||this._seeks.cross.tab[t]},Object.defineProperty(c.prototype,"localMarriageSeeks",{get:function(){return this._seeks.local.arr},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"crossMarriageSeeks",{get:function(){return this._seeks.cross.arr},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"intimacyValue",{get:function(){return this._intimacy?n.instance.has(this.intimacyLv+1)?this._intimacy[0]:n.instance.getCfgByLv(this.intimacyLv)[1]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"intimacyLv",{get:function(){return this._intimacy?this._intimacy[1]:1},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"intimacyDrawLv",{get:function(){return this._intimacy?this._intimacy[2]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"marryDay",{get:function(){return this._marryDay||0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"halfRingLv",{get:function(){return this._half?this._half[9]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"halfRoleID",{get:function(){return this._half?this._half[0]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isMarried",{get:function(){var t=!!this._half&&0!==this._half[0];return t||f.instance.setRPProperty("marryMessageRP",!1),t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ringTypes",{get:function(){return this._ring?this._ring[0]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ringType",{get:function(){if(!this._ring)return 0;for(var t=-1,e=0,i=this._ring[0];e<i.length;e++){var n=i[e];t<n&&(t=n)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ringSchedule",{get:function(){return this._ring?this._ring[1]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"resonanceProgress",{get:function(){return this._ring?this._ring[4]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"resonanceLevel",{get:function(){return this._ring?this._ring[5]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ringLv",{get:function(){return this._ring?this._ring[2]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"resonanceFinishCount",{get:function(){var t=a.instance.getCfgByLv(this.resonanceLevel+1);if(!t)return 0;var e=t[1];return this.resonanceProgress>=e?2:this.ringLv>=e||this.halfRingLv>=e?1:0},enumerable:!0,configurable:!0}),c.prototype.setSkills=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];this._skills[n[0]]=n[1]}this.checkSkillRP(),GlobalData.dispatcher.event("MARRY_RING_SKILL_UPDATE")},c.prototype.getSkillLvById=function(t){return this._skills[t]||0},Object.defineProperty(c.prototype,"getWeddingRingBuyInfoReply",{set:function(t){var e=(this._buyInfo=t)[3],i=!1;if(t[1]>GlobalData.serverTime){for(var n=0,s=e.length;n<s;n++)if(1===e[n][1]){i=!0;break}Laya.timer.once(t[1]-GlobalData.serverTime,this,function(){f.instance.setRPProperty("ringBuyRP",!1)})}f.instance.setRPProperty("ringBuyRP",this.getFuncOpen()&&i),GlobalData.dispatcher.event("MARRY_RING_BUY_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ringBuyTime",{get:function(){return this._buyInfo?this._buyInfo[1]:0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ringBuyMoney",{get:function(){return this._buyInfo?this._buyInfo[2]:0},enumerable:!0,configurable:!0}),c.prototype.getRingBuyState=function(t){if(!this._buyInfo)return 0;for(var e=0,i=this._buyInfo[3];e<i.length;e++){var n=i[e];if(n[0]===t)return n[1]}return 0},c.prototype.getBuyCount=function(t){if(!this._buyInfo)return 0;for(var e=0,i=this._buyInfo[0];e<i.length;e++){var n=i[e];if(n[0]===t)return n[1]}return 0},c.prototype.getMarryGiftPackReply=function(t){this.packList=t[0];for(var e=0,i=this.packList.length;e<i;e++)if(this.packList[e][1]===PlayerModel.instance.actorId||this.packList[e][6]===PlayerModel.instance.actorId){this.packList.splice(e);break}GlobalData.dispatcher.event("MARRY_GIFT_PACK_UPDATE")},c.prototype.updateMarryGiftPack=function(t){var e=t[0];e[6]!==PlayerModel.instance.actorId&&e[1]!==PlayerModel.instance.actorId&&(this.packList||(this.packList=[]),this.packList.push(t[0]),GlobalData.dispatcher.event("MARRY_GIFT_PACK_UPDATE"))},c.prototype.clearAllGiftPack=function(){this.packList=null,GlobalData.dispatcher.event("MARRY_GIFT_PACK_UPDATE")},c.prototype.drawMarryGiftPackReply=function(t){if(this.packList&&0<this.packList.length)for(var e=0,i=this.packList.length;e<i;e++)if(this.packList[e][0]===t){this.packList.splice(e,1),this.packList.length?(WindowManager.instance.close(510),WindowManager.instance.open(510)):GlobalData.dispatcher.event("MARRY_GIFT_PACK_UPDATE");break}},Object.defineProperty(c.prototype,"totalAttrs",{get:function(){return this._totalAttrs},set:function(t){this._totalAttrs=t,GlobalData.dispatcher.event("MARRY_TOKEN_ATTRS_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ringFight",{get:function(){for(var t=0,e=0,i=this.ringTypes;e<i.length;e++){var n=i[e];t+=this._fightByRingType[n]}for(var s in t+=l.instance.getCfgByLv(this.ringLv)[4],this._skills)t+=d.instance.getCfgById(CommonUtil.getSkillIdByPureIdAndLv(parseInt(s),this._skills[s]))[3];return t+=a.instance.getCfgByLv(this.resonanceLevel)[3]},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tokenFeedFight",{get:function(){for(var t=0,e=0,i=_.instance.ids;e<i.length;e++){var n=i[e],s=this._tokens[n]?this._tokens[n][1]:0;0!==s&&(t+=m.instance.getCfgByIdLv(n,s)[4])}return t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tokenRankFight",{get:function(){for(var t=0,e=0,i=_.instance.ids;e<i.length;e++){var n=i[e],s=this._tokens[n]?this._tokens[n][2]:0;if(0!==s){t+=v.instance.getCfgByIdLv(n,s)[5];var o=this._tokens[n][5];t+=b.instance.getCfgByIdLv(n,o)[4];for(var a=v.instance.getSkillIdsById(n),r=0,l=a.length;r<l;r++){var h=a[r],c=this.getTokenSkillLv(n,h),p=CommonUtil.getSkillIdByPureIdAndLv(h,c),u=d.instance.getCfgById(p);u&&(t+=u[3])}}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"requestMarryList",{get:function(){return this._requestMarryList},set:function(t){this._requestMarryList=t},enumerable:!0,configurable:!0}),c.prototype.updateRequestMarryList=function(t){var e=t[1],i=t[0];if(0===e){var n=this._requestMarryList.indexOf(i);if(-1===n)return;this._requestMarryList.splice(n,1)}else this._requestMarryList.push(i)},c.prototype.isRequestMarry=function(t){return-1!==this._requestMarryList.indexOf(t)},c.prototype.checkMarkRP=function(){f.instance.setRPProperty("marryMarkRP",this.getFuncOpen()&&this.isMarried&&(!this.mark||0===this.mark[1])&&0<s.instance.getItemCountById(this.markId))},c.prototype.getFuncOpen=function(){return e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(320)},i=c,t.MarryModel=i}(modules=modules||{}),function(_){var h,e,t,s,m,v,c,b,i;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._isFirst=!0,t}h=_.baby||(_.baby={}),t=_.core.BaseCtrl,s=_.effect.SuccessEffectCtrl,m=_.chat.ChatModel,v=_.marry.MarryModel,c=_.customData.CustomDataModel,b=_.config.SkillPureCfg,e=t,__extends(n,e),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setup=function(){this.subscribe(16789726,this.GetFairyDollInfoReply),this.subscribe(16789727,this.FairyDollCultureReply),this.subscribe(16789728,this.FairyDollRefineReply),this.subscribe(16789729,this.FairyDollSkillUpReply),this.subscribe(16789730,this.FairyDollSupplementReply),this.subscribe(16789731,this.UpdateFairyDollSkill),this.subscribe(16789732,this.UpdateFairyDollSupplement),this.subscribe(16789733,this.FairyDollChangeReply),this.subscribe(16789735,this.UpdateFairyDollShow),this.subscribe(16789734,this.UpdateHaloSkillOfMarrier),this.subscribe(16789736,this.FairyDollActivaSkillReply),this.subscribe(16789738,this.FairyDollRuneSkillReply),this.subscribe(16789739,this.onUpdateFairyDollActiveSkill),this.subscribe(16789740,this.UpdateFairyDollSkillSet),this.onGlobal("BAG_UPDATE",this.bagHandler),this.onGlobal("PLAYER_UPDATE_MONEY",this.moneyHandler),this.GetFairyDollInfo()},n.prototype.FairyDollActivaSkillUp=function(t){console.log("FairyDollActivaSkillUp:",t),this._isNewActive=!h.BabyModel.instance.getActivationFlagByActiveSkillId(t),this.publish(2108868,[t])},n.prototype.FairyDollActivaSkillReply=function(t){console.log("FairyDollActivaSkillReply:",t);var e=t[0];0===e?this._isNewActive?s.instance.play("assets/others/tx_jinjiechengong5.png"):s.instance.play("assets/others/tx_jinjiechengong4.png"):CommonUtil.noticeError(e)},n.prototype.FairyDollRuneSkillUp=function(t,e){console.log("FairyDollRuneSkillUp:",e),this._isNewRune=!h.BabyModel.instance.getActivationFlagByActiveSkillIdAndRuneSkillId(t,e),this._isNewRuneLevel=h.BabyModel.instance.getLevelByActiveSkillIdAndRuneSkillId(t,e),this.publish(2108870,[e,t])},n.prototype.FairyDollRuneSkillReply=function(t){console.log("FairyDollRuneSkillReply:",t);var e=t[0];0===e?(this._isNewRune?s.instance.play("assets/others/txt_xwxt_fyjh.png"):s.instance.play("assets/others/tx_jinjiechengong4.png"),GlobalData.dispatcher.event("BABY_UPDATE_RUNE_EFFECT",this._isNewRuneLevel+1)):CommonUtil.noticeError(e)},n.prototype.onUpdateFairyDollActiveSkill=function(t){h.BabyModel.instance.activaSkill=t[0],GlobalData.dispatcher.event("BABY_INFO_UPDATE"),h.BabyModel.instance.checkAllActiveSkillRp()},n.prototype.FairyDollActivaSkillSet=function(t){console.log("FairyDollActivaSkillSet:",t),this.publish(2108869,[t])},n.prototype.UpdateFairyDollSkillSet=function(t){console.log("UpdateFairyDollSkillSet:",t);var e=t[0];h.BabyModel.instance.activeSkillSetList=e,GlobalData.dispatcher.event("BABY_ACTIVE_SKILL_SET_UPDATE")},n.prototype.GetFairyDollInfo=function(){this.publish(2108862,null)},n.prototype.FairyDollCulture=function(t){console.log("FairyDollCulture:",t),this._curId=t,this.publish(2108863,[t])},n.prototype.FairyDollRefine=function(t){console.log("FairyDollRefine:",t),this._curId=t,this.publish(2108864,[t])},n.prototype.FairyDollSupplement=function(t){console.log("FairyDollSupplement:",t),this.publish(2108865,[t])},n.prototype.FairyDollSkillUp=function(t,e,i){console.log("FairyDollSkillUp:",t,e,i),this._isNew=0===h.BabyModel.instance.getSkillLvBySkillId(e),this.publish(2108866,[t,e,i])},n.prototype.FairyDollChange=function(t){console.log("FairyDollChange:",t),this.publish(2108867,[t])},n.prototype.GetFairyDollInfoReply=function(t){console.log("GetFairyDollInfoReply:",t);for(var e=t[0]||[],i=0;i<e.length;++i){h.BabyModel.instance.babyTab[e[i][0]]=e[i];for(var n=e[i][4],s=0;s<n.length;++s)h.BabyModel.instance.babySkillTab[n[s][0]]=n[s];for(n=e[i][5],s=0;s<n.length;++s)h.BabyModel.instance.babySkillTab[n[s][0]]=n[s];for(n=e[i][6],s=0;s<n.length;++s)h.BabyModel.instance.babySkillTab[n[s][0]]=n[s]}h.BabyModel.instance.tonic=t[1],h.BabyModel.instance.curBaby=t[2],h.BabyModel.instance.activaSkill=t[3],h.BabyModel.instance.activeSkillSetList=t[4],GlobalData.dispatcher.event("BABY_INFO_UPDATE"),GlobalData.dispatcher.event("BABY_ACTIVE_SKILL_SET_UPDATE"),h.BabyModel.instance.checkGradeRP(),h.BabyModel.instance.checkGrowthRP(),h.BabyModel.instance.checkTonicRP(),h.BabyModel.instance.checkSkillRP(),h.BabyModel.instance.checkAllActiveSkillRp()},n.prototype.FairyDollCultureReply=function(t){console.log("FairyDollCultureReply:",t);var e=t[0];if(0===e){var i=h.BabyModel.instance.getBabyById(this._curId),n=i[1];i[3]=t[2],i[1]=t[3],GlobalData.dispatcher.event("BABY_INFO_UPDATE"),n<i[1]&&s.instance.play("assets/others/tx_jinjiechengong4.png"),GlobalData.dispatcher.event("BABY_LEVEL_UP",[0<t[1],n<i[1]]),h.BabyModel.instance.checkGrowthRP(),h.BabyModel.instance.checkSkillRP(),h.BabyModel.instance.checkTonicRP(),h.BabyModel.instance.checkAllActiveSkillRp()}else CommonUtil.noticeError(e)},n.prototype.FairyDollRefineReply=function(t){console.log("FairyDollRefineReply:",t);var e=t[0];if(0===e){var i=h.BabyModel.instance.getBabyById(this._curId);i[2]=t[1],0===i[1]&&1===i[2]&&(i[1]=1),GlobalData.dispatcher.event("BABY_INFO_UPDATE"),1<i[2]?s.instance.play("assets/others/tx_jinjiechengong7.png"):(WindowManager.instance.open(92,[this._curId,12]),h.BabyModel.instance.checkGrowthRP(),h.BabyModel.instance.checkTonicRP()),h.BabyModel.instance.checkGradeRP(),h.BabyModel.instance.checkSkillRP()}else CommonUtil.noticeError(e)},n.prototype.FairyDollSkillUpReply=function(t){console.log("FairyDollSkillUpReply:",t);var e=t[0];0===e?this._isNew?s.instance.play("assets/others/tx_jinjiechengong5.png"):s.instance.play("assets/others/tx_jinjiechengong4.png"):CommonUtil.noticeError(e)},n.prototype.UpdateFairyDollSkill=function(t){console.log("UpdateFairyDollSkill:",t);var e=h.BabyModel.instance.getBabyById(t[0]);e&&(1===t[1]?e[4]=t[2]:2===t[1]?e[5]=t[2]:3===t[1]&&(e[6]=t[2]));for(var i=t[2],n=0;n<i.length;++n)h.BabyModel.instance.babySkillTab[i[n][0]]=i[n];GlobalData.dispatcher.event("BABY_INFO_UPDATE"),h.BabyModel.instance.checkSkillRP()},n.prototype.FairyDollSupplementReply=function(t){console.log("FairyDollSupplementReply:",t);var e=t[0];0===e||CommonUtil.noticeError(e)},n.prototype.UpdateFairyDollSupplement=function(t){console.log("UpdateFairyDollSupplement:",t),h.BabyModel.instance.tonic=t[0],GlobalData.dispatcher.event("BABY_INFO_UPDATE"),h.BabyModel.instance.checkTonicRP()},n.prototype.FairyDollChangeReply=function(t){console.log("FairyDollChangeReply:",t);var e=t[0];0===e||CommonUtil.noticeError(e)},n.prototype.UpdateFairyDollShow=function(t){h.BabyModel.instance.curBaby=t[0],GlobalData.dispatcher.event("BABY_INFO_UPDATE")},n.prototype.UpdateHaloSkillOfMarrier=function(t){if(console.log("UpdateHaloSkillOfMarrier:",t),h.BabyModel.instance.halos=t[1],GlobalData.dispatcher.event("UPDATE_HALO_LIST"),this._isFirst)this._noticeData=t;else if(!(c.instance.getCustomDataByKey(26)||[])[0]){var e=t[2],i=t[0];if(0!==e.length){var n=h.BabyModel.instance.halos?h.BabyModel.instance.halos.length:0,s=v.instance.half;if(n&&s&&i==s[0])for(var o=0;o<e.length;o++){var a=e[o];this.updateChat(a);var r=localStorage.getItem(_.player.PlayerModel.instance.actorId+"_UpdateHaloSkillOfMarrier"),l=(r=r||"")+(0<r.length?"#":"")+i+"#"+a[0]+"#"+a[1];console.log("更新 本地的仙娃光环技能升级数据："+l),localStorage.setItem(_.player.PlayerModel.instance.actorId+"_UpdateHaloSkillOfMarrier",l)}}}},n.prototype.localUpdateChat=function(){if(h.BabyModel.instance.isfirstTips){h.BabyModel.instance.isfirstTips=!1;var t=v.instance.half;if(!t)return;if(_.marry.MarryModel.instance.isMarried){var e=localStorage.getItem(_.player.PlayerModel.instance.actorId+"_UpdateHaloSkillOfMarrier");if(e=e||"",console.log("展示 本地的仙娃光环技能升级数据："+e),e&&0<e.length)for(var i=e.split("#"),n=0;n<i.length;n+=3){var s=parseInt(i[n]),o=parseInt(i[n+1]),a=parseInt(i[n+2]);s==t[0]&&this.updateChat([o,a],!0)}}}},n.prototype.updateChat=function(t,e){void 0===e&&(e=!1);var i=v.instance.half,n=[i[0],"",i[2],i[3],i[1],i[4],0,0,0,i[11],i[5],i[6],i[7],0,0,0,0],s=t[0],o=t[1],a=o%1e4,r=_.config.ExteriorCfg.instance.getCfgById(_.config.BabyCfg.instance.getShowId(s)),l=r[2],h=CommonUtil.getColorByQuality(r[4]),c=b.instance.getCfgById(CommonUtil.getSkillPureIdById(o))[1],p=_.config.SkillCfg.instance.getCfgById(o)[1],u=p[1]?p[1]:0,d=_.config.AttrSkillCfg.instance.getCfgById(p[0]),y=d[1],g=d[2]?_.common.AttrUtil.formatFloatNum(u)+"%":""+u,f=[n,[5,0,0,"我的仙娃"+CommonUtil.formatHtmlStrByColor(h,l)+"已将光环技能【"+CommonUtil.formatHtmlStrByColor("#0ecf09",c)+"】提升至"+a+"级，使双方"+CommonUtil.formatHtmlStrByColor("#0ecf09",y)+"提升到"+CommonUtil.formatHtmlStrByColor("#0ecf09",g)+"!",null,null,null,0,0]];m.instance.updateChat([f],e)},n.prototype.bagHandler=function(t){0===t&&(h.BabyModel.instance.checkGrowthRP(),h.BabyModel.instance.checkGradeRP(),h.BabyModel.instance.checkTonicRP(),h.BabyModel.instance.checkAllActiveSkillRp())},n.prototype.moneyHandler=function(){h.BabyModel.instance.checkGrowthRP(),h.BabyModel.instance.checkGradeRP(),h.BabyModel.instance.checkTonicRP(),h.BabyModel.instance.checkAllActiveSkillRp()},n.prototype.updateSkillNotice=function(){this._isFirst&&(this._isFirst=!1,this._noticeData&&this.UpdateHaloSkillOfMarrier(this._noticeData))},i=n,h.BabyCtrl=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("foreign_boss_blend"),e=0;e<t.length;++e)this._table[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.ForeignBossCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._dic={},this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("foreign_boss_task")},n.prototype.getCfgById=function(t){return this._table[t]},n.prototype.getCfgList=function(t){var e;if(!this._dic[t]){e=[];for(var i=0,n=this._table.length;i<n;i++)this._table[i][1]==t&&e.push(this._table[i]);this._dic[t]=e}return e=this._dic[t]},i=n,e.ForeignBossTaskCfg=i}(modules=modules||{}),function(l){var o,a,n,h,t;function c(){this.helpCount=0,this.callNum=0,this.killNum=0,this.drawList={},this.helpList={},this.rankList={},this.selfRank={},this.broadcastList=[],this.callBossName="",this._lessItem={},this.taskRP={},this._maxHelpNum=0}o=l.foreign_boss_panel||(l.foreign_boss_panel={}),a=l.redPoint.RedPointCtrl,n=l.config.ForeignBossCfg,h=l.config.ForeignBossTaskCfg,Object.defineProperty(c,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),c.prototype.addBroadCast=function(t){if(t[1]!=PlayerModel.instance.roleName){var e=t[0];if(e==c.CALL_TYPE){if(this.helpCount>=this.maxHelpNum)return;0==this.broadcastList.length?this.broadcastList.push(t):this.broadcastList[0][0]==c.CALL_TYPE?this.broadcastList[0]=t:this.broadcastList[1]=t}else e==c.CALL_FAME_TYPE&&(this.broadcastList[0]=t);WindowManager.instance.open(1134,e)}},c.prototype.checkTaskRP=function(){for(var t,e,i=[c.CALL_BOSS,c.KILL_BOSS],n=0;n<i.length;n++)e=i[n],this.taskRP[e]=!1,this.checkTask(e)&&(t=!0,this.taskRP[e]=t);a.instance.setRPProperty("foreignTaskRP",t)},c.prototype.checkTask=function(t){var e,i,n=!1;t==c.CALL_BOSS?e=this.callNum:t==c.KILL_BOSS&&(e=this.killNum);for(var s=h.instance.getCfgList(t),o=0,a=s.length;o<a;o++){var r=(i=s[o])[0];if(!this.drawList[r]&&i[2]<=e){n=!0;break}}return n},c.prototype.lossTimeRP=function(){var t=this.losseItem(3),e=this.losseItem(4);a.instance.setRPProperty("foreignRP",t||e)},c.prototype.losseItem=function(t){var e=n.instance.getCfgById(t)[1],i=e[0];return e[1]<=l.bag.BagModel.instance.getItemCountById(i)},c.prototype.updCallBossInfo=function(t){var e=t[1];this.helpList[c.CALL_TYPE]=[],this.helpList[c.CALL_FAME_TYPE]=[];for(var i=e.length-1;-1<i;i--){var n=e[i][7];this.helpList[n]&&this.helpList[n].push(e[i])}this.setRp()},c.prototype.setRp=function(){var t,e,i;if(this.helpList){t=0<this.helpList[c.CALL_TYPE].length,e=this.helpCount<this.maxHelpNum;for(var n=this.helpList[c.CALL_TYPE],s=n.length-1;-1<s;s--)if(n[s][0]==PlayerModel.instance.roleName){e=!0;break}i=0<this.helpList[c.CALL_FAME_TYPE].length}a.instance.setRPProperty("foreignBossComRP",t&&e),a.instance.setRPProperty("foreignBossFameRP",i)},Object.defineProperty(c.prototype,"maxHelpNum",{get:function(){return 0==this._maxHelpNum&&(this._maxHelpNum=this.getBlenNum(2)[0]),this._maxHelpNum},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"maxln",{get:function(){return this._maxcall||(this._maxcall=this.getBlenNum(1)[0]),this._maxcall},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"callCD",{get:function(){return this._callCD||(this._callCD=this.getBlenNum(13)[0]),this._callCD},enumerable:!0,configurable:!0}),c.prototype.getBlenNum=function(t){return n.instance.getCfgById(t)[1]},c.prototype.setAutoCall=function(t,e){if(void 0===e&&(e=!1),t){var i=this._copyId=0;for(var n in this.helpList){var s=this.helpList[n];if(i+=s.length,!(0<this._copyId))for(var o=s.length-1;-1<o;o--)s[o][8]==PlayerModel.instance.actorId&&(this._copyId=s[o][1],this._autoCD=this.callCD,Laya.timer.loop(1e3,this,this.autoCallTips,null,!0))}if(0==this._copyId)if(i>=this.maxln)t=!1,l.notice.SystemNoticeManager.instance.addNotice("召唤boos总数达到上限,请击败后再召唤",!0);else{var a=void 0,r=void 0;r=this.selectFame?(a=this.getLossItem(4)[0],this._lessItem[4][1]):(a=this.getLossItem(3)[0],this._lessItem[3][1]),CommonUtil.getPropCountById(a)>=r?(this._autoCD=this.callCD,Laya.timer.loop(1e3,this,this.autoCallTips,null,!0)):(t=!1,e&&l.bag.BagUtil.openLackPropAlert(a,1))}}return this.autoCall=t,this.autoCallTips(),GlobalData.dispatcher.event("FOREIGN_BOSS_AUTOCALL"),this.autoCall},c.prototype.autoCallTips=function(){var t=this;if(this.autoCall)if(0<this._autoCD){this._autoCD--;var e=CommonUtil.formatHtmlStrByColor("#168a17",this._autoCD+"秒"),i=Handler.create(this,function(){t.setAutoCall(!1)});0==this._copyId?e+="自动召唤boss":e="你当前召唤的BOSS未击败，"+e+"自动进入该召唤场景";var n=["自动召唤",e,null,[i,"取消召唤"],null,!0,null,0,"本次登录不再提示","left",-1];WindowManager.instance.openDialog(1266,n)}else{if(0==this._copyId){var s=void 0;s=this.selectFame?c.CALL_FAME_TYPE:c.CALL_TYPE,o.ForeignBossCtrl.instance.foreignBossCall(s)}else o.ForeignBossCtrl.instance.foreignBossHelp(this._copyId);Laya.timer.clear(this,this.autoCallTips),WindowManager.instance.close(1266)}else Laya.timer.clear(this,this.autoCallTips)},c.prototype.getLossItem=function(t){if(!this._lessItem[t]){var e=this.getBlenNum(t);this._lessItem[t]=[e[0],e[1],null,null]}return this._lessItem[t]},c._instance=new c,c.CALL_TYPE=1,c.CALL_FAME_TYPE=2,c.CALL_BOSS=1,c.KILL_BOSS=2,t=c,o.ForeignBossModel=t}(modules=modules||{}),function(r){var t,e,i,l,n,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._taskId=0,t}t=r.foreign_boss_panel||(r.foreign_boss_panel={}),i=r.core.BaseCtrl,l=r.foreign_boss_panel.ForeignBossModel,n=r.funcOpen.FuncOpenModel,e=i,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16789827,this.ForeignBossCallReply),this.subscribe(16789829,this.ForeignBossTaskDrawReply),this.subscribe(16789828,this.ForeignBossTaskInfoReply),this.subscribe(16789826,this.GetForeignBossInfoReply),this.subscribe(16789830,this.GetForeignBossListReply),this.subscribe(16789831,this.GetForeignBossRankReplay),this.subscribe(16789832,this.BroadForeignBossAdd),this.subscribe(16789833,this.SendForeignBossOwner),this.bossInfo(),this.foreignBossTaskInfo(),this.getForeignBossList(),this.onGlobal("BAG_UPDATE",this.setRP),this.onGlobal("BAG_DATA_GOT",this.initBag),this.onGlobal("FOREIGN_BOSS_UPDATE",this.initBag)},o.prototype.initBag=function(){this.setRP(0)},o.prototype.setRP=function(t){0==t&&l.instance.lossTimeRP()},o.prototype.SendForeignBossOwner=function(t){l.instance.callBossName=t[0],GlobalData.dispatcher.event("FOREIGN_BOSS_CALL_NAME")},o.prototype.BroadForeignBossAdd=function(t){n.instance.getFuncIsOpen(723)&&l.instance.addBroadCast(t)},o.prototype.GetForeignBossRankReplay=function(t){var e=t[0],i=t[1];if(i&&0<i.length){var n=i.splice(i.length-1,1)[0];l.instance.selfRank[e]=n;var s={};if(3==e){if(1<i.length){for(var o=void 0,a=0;a<i.length;a++)if(1==i[a][0][2]){o=i.splice(a,1)[0];break}if(1<i.length){var h=[];r.warband.WarbandModel.instance.info&&(h=r.warband.WarbandModel.instance.info[4]),i.sort(function(t,e){var i=t[1],n=e[1];if(i!=n)return n<i?-1:1;for(var s=t[0][0],o=e[0][0],a=void 0,r=void 0,l=h.length-1;-1<l;l--)h[l][0]!=s?h[l][0]==o&&(r=h[l][4]):a=h[l][4];return r<a?-1:1})}i.unshift(o)}s=i}else for(a=0;a<i.length;a++)s[i[a][0][2]]=i[a];l.instance.rankList[e]=s,GlobalData.dispatcher.event("FOREIGN_BOSS_RANK")}},o.prototype.ForeignBossCallReply=function(t){var e=t[0];0==e?(l.instance.currentType=t[1],l.instance.checkTaskRP(),WindowManager.instance.isOpened(1129)&&WindowManager.instance.close(1129)):(CommonUtil.noticeError(e),50101==e&&l.instance.setAutoCall(!1))},o.prototype.ForeignBossTaskDrawReply=function(t){var e=t[0];0==e?(l.instance.drawList[this._taskId]=!0,this._taskId=0,l.instance.checkTaskRP(),GlobalData.dispatcher.event("FOREIGN_BOSS_TASK")):CommonUtil.noticeError(e)},o.prototype.ForeignBossTaskInfoReply=function(t){l.instance.callNum=t[0],l.instance.killNum=t[1];var e=t[2];if(e)for(var i=e.length-1;-1<i;i--)l.instance.drawList[e[i]]=!0;l.instance.checkTaskRP(),GlobalData.dispatcher.event("FOREIGN_BOSS_TASK")},o.prototype.GetForeignBossInfoReply=function(t){var e=t[0];l.instance.helpCount=e,GlobalData.dispatcher.event("FOREIGN_BOSS_INFO")},o.prototype.GetForeignBossListReply=function(t){l.instance.updCallBossInfo(t),3==t[0]&&l.instance.setAutoCall(l.instance.autoCall,!0),GlobalData.dispatcher.event("FOREIGN_BOSS_BOSSLIST")},o.prototype.bossInfo=function(){this.publish(2108962,null)},o.prototype.foreignBossCall=function(t,e){var i=this;void 0===e&&(e=!1),r.common_group.CommonGroupUtil.notTeamCopyIsTeaming()||(e||!r.windCloud.WindCloudModel.instance.isWaitingForMatch?this.publish(2108963,[t]):CommonUtil.alert("温馨提示","风云擂台的擂台赛即将开始，进入副本内将无法进入擂台赛，是否仍然进入副本？"+CommonUtil.formatHtmlStrByColor("#ff3e3e","（未进入擂台赛将视作放弃本轮挑战）"),[Handler.create(this,function(){i.foreignBossCall(t,!0)})],[Handler.create(this,function(){l.instance.setAutoCall(!1)})],Handler.create(this,function(){l.instance.setAutoCall(!1)})))},o.prototype.foreignBossHelp=function(t,e){var i=this;void 0===e&&(e=!1),r.common_group.CommonGroupUtil.notTeamCopyIsTeaming()||(e||!r.windCloud.WindCloudModel.instance.isWaitingForMatch?this.publish(2108964,[t]):CommonUtil.alert("温馨提示","风云擂台的擂台赛即将开始，进入副本内将无法进入擂台赛，是否仍然进入副本？"+CommonUtil.formatHtmlStrByColor("#ff3e3e","（未进入擂台赛将视作放弃本轮挑战）"),[Handler.create(this,function(){i.foreignBossHelp(t,!0)})],[Handler.create(this,function(){l.instance.setAutoCall(!1)})],Handler.create(this,function(){l.instance.setAutoCall(!1)})))},o.prototype.foreignBossTaskInfo=function(){this.publish(2108965,null)},o.prototype.foreignBossTaskDraw=function(t){this._taskId=t,this.publish(2108966,[t])},o.prototype.getForeignBossList=function(t){void 0===t&&(t=0),this.publish(4195704,[t])},o.prototype.getForeignBossRank=function(t){this.publish(4195705,[t])},s=o,t.ForeignBossCtrl=s}(modules=modules||{}),function(i){var n,t,e,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=i.forbiddenBoss||(i.forbiddenBoss={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16777380,this.GetForbiddenBossCopyInfoReply).subscribe(16790026,this.UpdateSceneStageInfo),this.onGlobal("DUNGEON_SCENE_STATE_UPDATE",this.setRP),this.GetForbiddenBossCopyInfo()},o.prototype.GetForbiddenBossCopyInfoReply=function(t){console.log("GetForbiddenBossCopyInfoReply:",t),n.ForbiddenBossModel.instance.finishLevel=t[0],n.ForbiddenBossModel.instance.finalBossDead=1===t[1],n.ForbiddenBossModel.instance.stage=t[2],this.setRP(),GlobalData.dispatcher.event("FORBIDDEN_BOSS_STAGE_UPDATE1")},o.prototype.GetForbiddenBossCopyInfo=function(){this.publish(2097194,null)},o.prototype.UpdateSceneStageInfo=function(t){console.log("UpdateSceneStageInfo:",t),n.ForbiddenBossModel.instance.info=t,n.ForbiddenBossModel.instance.stage=t[3],GlobalData.dispatcher.event("FORBIDDEN_BOSS_STAGE_UPDATE")},o.prototype.setRP=function(){var t=DungeonModel.instance.getCopySceneStateByType(44),e=t&&2===t[2]&&!n.ForbiddenBossModel.instance.finalBossDead;i.redPoint.RedPointCtrl.instance.setRPProperty("forbiddenBossRP",e)},s=o,n.ForbiddenBossCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){var t=i.call(this)||this;return t._canFightCount=0,t._buyFightCount=0,t._myRank=-1,t._myScore=0,t._coupleFight=0,t._fightCountRecoverDate=0,t._coupleScore=0,t._rankData=[],t._rankDataShow=[],t._awardShowingTab=0,t._enemyList=[],t._myGrade=0,t._refreshCountRecoverDate=0,t._refreshCount=0,t._mateScore=0,t._refreshBuyCount=0,t._totalScore=0,t.myCoupleScoreBeforeFight=0,t.coupleSeasonState=0,t.myScoreBeforeFight=0,t}e=t.marry_arena||(t.marry_arena={}),n=t.core.AbstractModel,s=t.config.BlendCfg,o=t.marry.MarryModel,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"totalScore",{get:function(){return this._totalScore},set:function(t){this.try2Set("totalScore",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"updateCoupleMap",{get:function(){return this._updateCoupleMap},set:function(t){this.try2Set("updateCoupleMap",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"refreshBuyCount",{get:function(){return this._refreshBuyCount},set:function(t){this.try2Set("refreshBuyCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mateScore",{get:function(){return this._mateScore},set:function(t){this.try2Set("mateScore",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"coupleJudgeAward",{get:function(){return this._coupleJudgeAward},set:function(t){this.try2Set("coupleJudgeAward",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"refreshCount",{get:function(){return this._refreshCount},set:function(t){this.try2Set("refreshCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"refreshCountRecoverDate",{get:function(){return this._refreshCountRecoverDate},set:function(t){this.try2Set("refreshCountRecoverDate",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"myGrade",{get:function(){return this._myGrade},set:function(t){this.try2Set("myGrade",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"headInfos",{get:function(){return this._headInfos},set:function(t){this.try2Set("headInfos",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"enemyList",{get:function(){return this._enemyList},set:function(t){this.try2Set("enemyList",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"awardShowingTab",{get:function(){return this._awardShowingTab},set:function(t){this.try2Set("awardShowingTab",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rankData",{get:function(){return this._rankData},set:function(t){this._rankDataShow=[];for(var e=s.instance.getCfgById(95005)[1][0],i=0;i<e;i++)this._rankDataShow.push(t[i]||i+1);this.try2Set("rankData",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rankDataShow",{get:function(){return this._rankDataShow},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"coupleScore",{get:function(){return this._coupleScore},set:function(t){this.try2Set("coupleScore",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fightCountRecoverDate",{get:function(){return this._fightCountRecoverDate},set:function(t){this.try2Set("fightCountRecoverDate",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"coupleFight",{get:function(){return this._coupleFight},set:function(t){this.try2Set("coupleFight",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"myScore",{get:function(){return this._myScore},set:function(t){this.try2Set("myScore",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"myRank",{get:function(){return this._myRank},set:function(t){this.try2Set("myRank",t)},enumerable:!0,configurable:!0}),r.prototype.getMyRankTxt=function(){var t=o.instance.isMarried,e=s.instance.getCfgById(95005)[1][0];return t&&0<this._myRank&&this.myRank<=e?this._myRank.toString():"未上榜"},Object.defineProperty(r.prototype,"buyFightCount",{get:function(){return this._buyFightCount},set:function(t){this.try2Set("buyFightCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canFightCount",{get:function(){return this._canFightCount},set:function(t){this.try2Set("canFightCount",t)},enumerable:!0,configurable:!0}),r.prototype.getRankAwardBy=function(t){for(var e=GlobalData.getConfig("couple_rank_awards"),i=e.length,n=0;n<i;n++){var s=e[n],o=s[0];if(t>=o[0]&&t<=o[1])return s}return null},r.prototype.getFreeFightCount=function(){var t=0,e=s.instance.getCfgById(95002);return e&&(t=e[1][0]||0),t},r.prototype.cookBattleWinResultScoreTxt=function(){var t="",e=this.coupleJudgeAward;return e&&(t='段位积分<span color="#50ff28">+'+e[1]+'</span>，排行积分<span color="#50ff28">+'+e[2]+"</span>"),t},a=r,e.MarryArenaModel=a}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c,p;function u(){var t=null!==i&&i.apply(this,arguments)||this;return t._model=s.instance,t}e=t.marry_arena||(t.marry_arena={}),n=t.marry.MarryModel,s=t.marry_arena.MarryArenaModel,o=t.config.BlendCfg,a=t.core.BaseCtrl,r=t.dungeon.DungeonCtrl,l=t.notice.SystemNoticeManager,h=t.redPoint.RedPointCtrl,c=t.funcOpen.FuncOpenModel,i=a,__extends(u,i),Object.defineProperty(u,"instance",{get:function(){return this._instance||(this._instance=new u)},enumerable:!0,configurable:!0}),u.prototype.setup=function(){this.subscribe(16790128,this.onGetCoupleJJRankReply).subscribe(16790129,this.onCoupleJJBuyFightTimesReply).subscribe(16790130,this.onCoupleJJBuyFreshTimesReply).subscribe(16790131,this.onCoupleJJFreshReply).subscribe(16781627,this.onUpdateCoupleJJData).subscribe(16790126,this.onUpdateCoupleGradeScore).subscribe(16790127,this.onGetCoupleBaseInfoReply).subscribe(16790132,this.onSyncCoupleEnemyData).subscribe(16790133,this.onCoupleJudgeAward).subscribe(16790134,this.onUpdateCoupleMap).subscribe(16790135,this.onSyncCoupleSeasonState),this.onGlobal("MARRY_INFO_UPDATE",this.checkRP).onGlobal("FUNC_OPEN_UPDATE",this.checkRP),this._model.rankData=[],this.reqCoupleJJBaseInfo(),this.reqSV_CoupleSeasonState()},u.prototype.onSyncCoupleSeasonState=function(t){console.log("仙缘竞技，onSyncCoupleSeasonState",t),this._model.coupleSeasonState=t[0],this.checkRP()},u.prototype.onUpdateCoupleMap=function(t){console.log("仙缘竞技，onUpdateCoupleMap",t),this._model.updateCoupleMap=t},u.prototype.onCoupleJudgeAward=function(t){console.log("仙缘竞技，onCoupleJudgeAward",t),this._model.coupleJudgeAward=t},u.prototype.onUpdateCoupleJJData=function(t){console.log("仙缘竞技，onUpdateCoupleJJData",t),this._model.refreshCount=t[2],this._model.refreshBuyCount=t[3],this._model.refreshCountRecoverDate=t[5],this._model.buyFightCount=t[1],this._model.canFightCount=t[0],this._model.fightCountRecoverDate=t[4],this.checkRP()},u.prototype.checkRP=function(){h.instance.setRPProperty("marryArenaFightCountRP",c.instance.getFuncIsOpen(779)&&1===this._model.coupleSeasonState&&n.instance.isMarried&&0<this._model.canFightCount)},u.prototype.onGetCoupleBaseInfoReply=function(t){console.log("仙缘竞技，onGetCoupleBaseInfoReply",t),this._model.myScore=t[0],this._model.mateScore=t[5],this._model.myGrade=t[2],this._model.coupleScore=t[1],this._model.totalScore=t[6],this._model.coupleFight=t[3],this._model.headInfos=t[4]},u.prototype.onUpdateCoupleGradeScore=function(t){console.log("仙缘竞技，onUpdateCoupleGradeScore",t),this._model.myScore=t[0],this._model.myGrade=t[2],this._model.coupleScore=t[1]},u.prototype.onSyncCoupleEnemyData=function(t){console.log("仙缘竞技，onSyncCoupleEnemyData",t);var e=t[0];e.sort(function(t,e){return e[1]-t[1]}),this._model.enemyList=e},u.prototype.onGetCoupleJJRankReply=function(t){console.log("仙缘竞技，onGetCoupleJJRankReply",t),this._model.rankData=t[0]||[],this._model.myRank=t[2]},u.prototype.onCoupleJJBuyFightTimesReply=function(t){console.log("仙缘竞技，onCoupleJJBuyFightTimesReply",t),CommonUtil.noticeError(t[0])},u.prototype.onCoupleJJBuyFreshTimesReply=function(t){console.log("仙缘竞技，onCoupleJJBuyFreshTimesReply",t),CommonUtil.noticeError(t[0],"购买成功")},u.prototype.onCoupleJJFreshReply=function(t){console.log("仙缘竞技，onCoupleJJFreshReply",t),CommonUtil.noticeError(t[0],"刷新成功")},u.prototype.reqSV_CoupleSeasonState=function(){this.publish(2109166,null)},u.prototype.reqCoupleJJBaseInfo=function(){this.publish(2109162,null)},u.prototype.reqCoupleJJBuyFightTimes=function(){this.publish(2109163,null)},u.prototype.reqCoupleJJBuyFreshTimes=function(){var t=o.instance.getCfgById(95010)[1][1];CommonUtil.judgeCurrency(90140001,t)&&this.publish(2109164,null)},u.prototype.reqCoupleJJFresh=function(){if(this._model.refreshCountRecoverDate>GlobalData.serverTime){var t="是否花费<img src='common/icon_tongyong_2.png'/><span style='color:#b15315'>"+o.instance.getCfgById(95010)[1][1]+"</span>购买刷新次数？";CommonUtil.alert("温馨提示",t,[Laya.Handler.create(this,this.reqCoupleJJBuyFreshTimes)])}else this.publish(2109165,null)},u.prototype.reqGetCoupleJJRank=function(){this.publish(4195804,null)},u.prototype.reqGetCoupleBaseInfo=function(){this.publish(4195805,null)},u.prototype.reqGetCoupleJJEnemys=function(){this.publish(4195806,null)},u.prototype.reqFight=function(t){0<this._model.canFightCount?(this._model.updateCoupleMap=null,this._model.myScoreBeforeFight=this._model.myScore,this._model.myCoupleScoreBeforeFight=this._model.coupleScore,r.instance.reqEnterScene(3301,1,[t])):l.instance.addNotice("您的挑战次数为0，可通过购买增加次数。",!0)},u.prototype.showPlayerInfo=function(t){t&&(ChatCtrl.instance.getChatDetailedInfo([PlayerModel.instance.actorId,t[0],t[7]]),WindowManager.instance.open(154,[t[3],t[4],t[8]]))},p=u,e.MarryArenaCtrl=p}(modules=modules||{}),function(i){var n,e,s,t,o,a,r,l,h;function c(){var t=e.call(this)||this;return t.destin=new s(180,60),t}n=i.sheng_yu||(i.sheng_yu={}),s=laya.maths.Point,t=i.core.BaseCtrl,o=i.redPoint.RedPointCtrl,a=i.scene.SceneModel,r=i.config.ClasSsceneTempleBossCfg,l=i.bossDungeon.BossDungeonModel,e=t,__extends(c,e),Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.setup=function(){this.subscribe(16786226,this.GetStrengthRelpy),this.subscribe(16786227,this.UpdateStrongInfoReply),this.subscribe(16786228,this.PickTempRewardReply),this.subscribe(16786229,this.UseStrengthItemReply),this.subscribe(16786230,this.updateBossRewardLeft),this.onGlobal("BAG_UPDATE",this.updateRP),this.onGlobal("SCENE_ENTER",this.nowCengShu),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetStrength()},c.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(246==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(246))return void this.setRp()},c.prototype.setRp=function(){o.instance.setRPProperty("shenYuBossRP1",i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(246)&&n.ShengYuBossModel.instance.getIsOver())},c.prototype.GetStrength=function(){this.publish(2105762,null)},c.prototype.SetStrength=function(t){this.publish(2105763,[t])},c.prototype.PickTempReward=function(){this.publish(2105764,null)},c.prototype.UseStrengthItem=function(t){this.publish(2105765,[t])},c.prototype.updateBossRewardLeft=function(t){null!=t&&(0===t[0]?WindowManager.instance.open(412,31):WindowManager.instance.open(416,31))},c.prototype.GetStrengthRelpy=function(t){if(t){n.ShengYuBossModel.instance.stength=t[0];var e=t[1];n.ShengYuBossModel.instance._bollZiDong=1==e,GlobalData.dispatcher.event("SHENG_YU_BOSS_ZIDONG_UPDATE"),GlobalData.dispatcher.event("SHENG_YU_BOSS_UPDATE"),this.updateRP(),this.setRp()}},c.prototype.UpdateStrongInfoReply=function(t){t&&(n.ShengYuBossModel.instance.stength=t[0],GlobalData.dispatcher.event("SHENG_YU_BOSS_UPDATE"),this.updateRP(),this.setRp())},c.prototype.PickTempRewardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},c.prototype.UseStrengthItemReply=function(t){CommonUtil.noticeError(t[0],"使用成功")},c.prototype.nowCengShu=function(){i.scene.SceneModel.instance.enterScene&&2351===a.instance.enterScene[0]&&(n.ShengYuBossModel.instance.nowCeng=i.scene.SceneModel.instance.enterScene[3],this.nullChuLi(),GlobalData.dispatcher.event("SHENG_YU_BOSS_SCENE_UPDATE"))},c.prototype.getState=function(){if(i.bag.BagModel.instance.getItemsByBagId(7)){var t=i.bag.BagModel.instance.getItemsByBagId(7);return!!t&&0<t.length}return!1},c.prototype.updateRP=function(t){void 0===t&&(t=7),7==t&&o.instance.setRPProperty("shenYuBossRP",this.getState())},c.prototype.nullChuLi=function(){if(2351===a.instance.enterScene[0]){PlayerModel.instance.selectTarget(0,-1);var t=r.instance.getBossInfoByGrade(n.ShengYuBossModel.instance.nowCeng);t&&(l.instance.selectLastBoss=t[0][3],DungeonModel.instance.getBossInfoById(l.instance.selectLastBoss)&&(l.instance.selectTargetPos=DungeonModel.instance.getBossInfoById(l.instance.selectLastBoss)[3]))}},h=c,n.ShenYuBossCtrl=h}(modules=modules||{}),function(t){var e,i;function n(){this.teamInvites=[]}e=t.teamInvite||(t.teamInvite={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.addTeamInvite=function(t){for(var e,i=this.teamInvites.length-1;0<=i;--i){if((e=this.teamInvites[i])[2]===t[2]&&e[4]===t[4]){this.teamInvites.splice(i,1);break}if(e[1]===t[1]&&e[2]===t[2]){this.teamInvites.splice(i,1);break}}this.teamInvites.unshift(t),GlobalData.dispatcher.event("TEAM_INVITES_UPDATE")},n.prototype.delInvite=function(t){if(t&&this.teamInvites){var e=this.teamInvites.indexOf(t);-1!==e&&(this.teamInvites.splice(e,1),GlobalData.dispatcher.event("TEAM_INVITES_UPDATE"))}},n.prototype.delAllInvites=function(){this.teamInvites.length=0,GlobalData.dispatcher.event("TEAM_INVITES_UPDATE")},i=n,e.TeamInviteModel=i}(modules=modules||{}),function(t){var s,e,o,i,n,a;function r(){return null!==e&&e.apply(this,arguments)||this}s=t.spiritDungeon||(t.spiritDungeon={}),o=t.notice.SystemNoticeManager,i=t.teamInvite.TeamInviteModel,n=t.core.BaseCtrl,e=n,__extends(r,e),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16788434,this.getYuanliRelpy),this.subscribe(16788435,this.updateYuanli),this.subscribe(16788436,this.pickYuanShenCopyRewardReply),this.subscribe(16788437,this.useYuanliItemReply),this.subscribe(16788439,this.createYuanshenTeamReply),this.subscribe(16788440,this.searchYuanshenTeamReply),this.subscribe(16788442,this.setYuanshenPersionReply),this.subscribe(16788443,this.setYuanshenTeamReply),this.subscribe(16788444,this.inviteYuanshenMemberReply),this.subscribe(16788438,this.updateYuanshenBossRewardLeft),this.subscribe(16788446,this.joinYuanshenTeamReply),this.subscribe(16788447,this.leaveYuanshenTeamReply),this.subscribe(16788448,this.yuanshenTeamDismiss),this.subscribe(16788441,this.searchYuanshenObjReply),this.subscribe(16788445,this.updateYuanshenTeamMember),this.subscribe(16788450,this.kickedYuanshenMemberReply),this.subscribe(16788451,this.updateYuanshenTeamMemberOper),this.subscribe(16788449,this.updateYuanshenBossHurtRank),this.getYuanli()},r.prototype.getYuanli=function(){console.log("获取元力..............."),this.publish(2107668,null)},r.prototype.getYuanliRelpy=function(t){console.log("获取元力返回................",t),s.SpiritDungeonModel.instance.setSpirit(t[0]),s.SpiritDungeonModel.instance.setAutoUse(t[1])},r.prototype.updateYuanli=function(t){console.log("更新元力.....................",t),s.SpiritDungeonModel.instance.setSpirit(t[0])},r.prototype.setAutoUserYuanli=function(t){console.log("设置自动使用.................",t),this.publish(2107669,[t])},r.prototype.pickYuanShenCopyReward=function(){console.log("领取元神副本奖励.............."),this.publish(2107670,null)},r.prototype.pickYuanShenCopyRewardReply=function(t){console.log("领取元神副本奖励返回............",t),CommonUtil.noticeError(t[0])},r.prototype.useYuanliItem=function(t){console.log("使用元力道具..............",t),this.publish(2107671,[t])},r.prototype.useYuanliItemReply=function(t){console.log("使用元力道具返回...................",t),CommonUtil.noticeError(t[0])},r.prototype.updateYuanshenBossRewardLeft=function(t){console.log("元力不足BOSS奖励............",t),0===t[0]?WindowManager.instance.open(412,35):WindowManager.instance.open(416,35)},r.prototype.createYuanshenTeam=function(){console.log("创建队伍...................."),this.publish(5242980,null)},r.prototype.createYuanshenTeamReply=function(t){console.log("创建队伍返回................",t);var e=t[0];0===e?WindowManager.instance.open(571):CommonUtil.noticeError(e)},r.prototype.searchYuanshenTeam=function(){console.log("搜索队伍............."),this.publish(5242981,null)},r.prototype.searchYuanshenTeamReply=function(t){console.log("搜索队伍返回................",t);var e=t[1];0===e?s.SpiritDungeonModel.instance.setTeams(t[0]):CommonUtil.noticeError(e)},r.prototype.searchYuanshenObj=function(){console.log("搜索玩家................SearchYuanshenObj"),this.publish(5242982,null)},r.prototype.searchYuanshenObjReply=function(t){console.log("搜索玩家返回.................SearchYuanshenObjReply",t);var e=t[0];0===e?s.SpiritDungeonModel.instance.setPlayersToInvite(t[1]):CommonUtil.noticeError(e)},r.prototype.setYuanshenPersion=function(t){console.log("个人设置.............",t),this.publish(5242983,[t])},r.prototype.setYuanshenPersionReply=function(t){console.log("个人设置返回................",t);var e=t[1];0===e?s.SpiritDungeonModel.instance.setAutoAcceptInvite(t[0]):CommonUtil.noticeError(e)},r.prototype.setYuanshenTeam=function(t){console.log("队伍设置..................",t),this.publish(5242984,[t])},r.prototype.setYuanshenTeamReply=function(t){console.log("队伍设置返回............",t);var e=t[0];0===e?s.SpiritDungeonModel.instance.setCanSearch(t[1]):CommonUtil.noticeError(e)},r.prototype.inviteYuanshenMember=function(t){console.log("邀请入队.................",t),this.publish(5242985,[t])},r.prototype.inviteYuanshenMemberReply=function(t){console.log("邀请入队返回...................",t);var e=t[0];CommonUtil.noticeError(e,"邀请发送成功"),46823!==e&&10003!==e&&46813!==e||s.SpiritDungeonModel.instance.delObj(t[1])},r.prototype.updateYuanshenTeamMember=function(t){console.log("更新队伍成员.................",t),s.SpiritDungeonModel.instance.setMembers(t[0])},r.prototype.joinYuanshenTeam=function(t,e){console.log("接受入队、进入队伍..................",t),this.publish(5242986,[t,e])},r.prototype.joinYuanshenTeamReply=function(t){console.log("接受入队、进入队伍返回..................",t),CommonUtil.noticeError(t[0]),i.instance.delInvite(i.instance.curInvite)},r.prototype.leaveYuanshenTeam=function(){console.log("离开队伍..............."),this.publish(5242987,null)},r.prototype.leaveYuanshenTeamReply=function(t){console.log("离开队伍返回................",t),CommonUtil.noticeError(t[0]),0===t[0]&&WindowManager.instance.close(571)},r.prototype.yuanshenTeamDismiss=function(t){console.log("解散队伍.............",t),s.SpiritDungeonModel.instance.cancelTeam(),o.instance.addNotice("队伍已解散",!0)},r.prototype.updateYuanshenBossHurtRank=function(t){console.log("更新元神伤害排行................",t),s.SpiritDungeonModel.instance.updateHurtRank(t)},r.prototype.kickedYuanshenMember=function(t){this.publish(5242988,[t])},r.prototype.kickedYuanshenMemberReply=function(t){CommonUtil.noticeError(t[0])},r.prototype.updateYuanshenTeamMemberOper=function(t){var e,i=t[2],n=t[1];0===i?(e=n+"离开队伍",o.instance.addNotice(e,!0)):1===i?(e=n+"加入队伍",o.instance.addNotice(e,!1)):2===i&&(t[0]===PlayerModel.instance.actorId?(e="你已被踢出队伍",s.SpiritDungeonModel.instance.setMembers([])):e=n+"被踢出队伍",o.instance.addNotice(e,!0))},a=r,s.SpiritDungeonCtrl=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.teamInvite||(t.teamInvite={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16780226,this.updateAddTeamInvite),this.subscribe(16780230,this.updateYuanshenAddTeamInvite)},o.prototype.updateAddTeamInvite=function(t){console.log("更新添加队伍邀请:",t),e.TeamInviteModel.instance.addTeamInvite(t[0])},o.prototype.updateYuanshenAddTeamInvite=function(t){console.log("更新元神幻境 添加队伍邀请:",t),e.TeamInviteModel.instance.addTeamInvite(t[0])},s=o,e.TeamInviteCtrl=s}(modules=modules||{}),function(s){var t,o,a,r,l,h,e;function i(){this.leaderId=-1,this.warbandId=-1,this._limitFight=0}t=s.warband||(s.warband={}),o=s.notice.SystemNoticeManager,a=s.config.WarbandLevelCfg,r=s.redPoint.RedPointCtrl,l=s.config.WarbandItemCfg,h=s.bag.BagModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.setInfo=function(t){if(this.inited||(this.inited=!0),this.info=t,this.info){if(-1===this.leaderId)this.leaderId=t[3],this.warbandId=t[0];else if(this.leaderId!==t[3]){if(this.leaderId===PlayerModel.instance.actorId)o.instance.addNotice("队长让成功"),this.setApplyList(null);else if(t[3]===PlayerModel.instance.actorId)o.instance.addNotice("您被任命为新的队长");else for(var e=t[4],i=0,n=e.length;i<n;++i)if(t[3]===e[i][0]){o.instance.addNotice("【"+e[i][1]+"】被任命为新的队长");break}this.leaderId=t[3],this.warbandId=t[0]}}else s.chat.ChatModel.instance.setNoseeMessage(6,!1),this.leaderId=-1,GlobalData.dispatcher.event("WARBAND_MESSAGE_UPDATE"),r.instance.setRPProperty("warbandDonateRP",!1),r.instance.setRPProperty("warbandLvAwardRP",!1),r.instance.setRPProperty("warbandApplyRP",!1);t&&this.setAutoAccept(t[12]),GlobalData.dispatcher.event("WARBAND_INFO_UPDATE"),t&&(this._limitFight=t[14]),this.checkLvAwardRP(),this.checkDonateRP()},i.prototype.setDonateInfo=function(t){this.donateInfo=t,GlobalData.dispatcher.event("WARBAND_DONATE_INFO_UPDATE"),this.checkLvAwardRP()},i.prototype.getWarbandRankReply=function(t){this.ranksInfo=t,GlobalData.dispatcher.event("WARBAND_RANKS_UPDATE")},i.prototype.setApplyList=function(t){this.applyList=t,GlobalData.dispatcher.event("WARBAND_APPLY_LIST_UPDATE"),r.instance.setRPProperty("warbandApplyRP",this.applyList&&this.hasOverLimitFight(this.applyList))},i.prototype.setAutoAccept=function(t){this.autoAccept!==t&&(this.autoAccept=t,GlobalData.dispatcher.event("WARBAND_AUTO_ACCEPT"))},i.prototype.kickBroadcast=function(t){if(this.info){if(t===PlayerModel.instance.actorId)return this.setInfo(null),void WindowManager.instance.open(764);for(var e=!1,i=this.info[4],n=0,s=i.length;n<s;++n)if(i[n][0]===t){i.splice(n,1),e=!0;break}e&&GlobalData.dispatcher.event("WARBAND_INFO_UPDATE")}},i.prototype.donateBroadcast=function(t){if(this.info){this.info[7]=t[0],this.info[6]=t[1];for(var e=this.info[4],i=0,n=e.length;i<n;++i)if(e[i][0]===t[2]){e[i][7]=t[3];break}GlobalData.dispatcher.event("WARBAND_DONATE_BROADCAST",[t]),this.checkLvAwardRP()}},i.prototype.impeachBroadcast=function(t){this.info&&(this.info[10]=t[0],this.info[11]=t[1],GlobalData.dispatcher.event("WARBAND_INFO_UPDATE"))},i.prototype.loginBroadcast=function(t){if(this.info&&t===this.info[3]&&this.info[10]){this.info[11]=this.info[10]=0;for(var e=this.info[4],i=0,n=e.length;i<n;++i)if(e[i][0]===t){e[i][12]=!0;break}GlobalData.dispatcher.event("WARBAND_INFO_UPDATE")}},i.prototype.checkLvAwardRP=function(){if(this.info&&this.donateInfo){for(var t=a.instance.cfgs,e=!1,i=0,n=t.length;i<n;++i){var s=t[i][0];if(s<=this.info[6]&&-1===this.donateInfo[2].indexOf(s)){e=!0;break}}r.instance.setRPProperty("warbandLvAwardRP",e)}},i.prototype.checkDonateRP=function(){if(this.info){for(var t=!1,e=l.instance.cfgs,i=0,n=e.length;i<n;++i){var s=e[i];if(0===s[3]&&h.instance.getItemCountById(s[0])>=s[1]){t=!0;break}}r.instance.setRPProperty("warbandDonateRP",t)}},i.prototype.setCacheBuff=function(t){this.cacheBuff=t,GlobalData.dispatcher.event("WARBAND_CACHE_BUFF_UPDATE")},i.prototype.isMyWarBandPeople=function(t){if(-1===s.warband.WarbandModel.instance.leaderId)return!1;for(var e=this.info[4],i=0;i<e.length;i++){var n=e[i];if(n&&n[0]===t)return!0}return!1},Object.defineProperty(i.prototype,"limitFight",{get:function(){return this._limitFight},set:function(t){this._limitFight!=t&&(this._limitFight=t,GlobalData.dispatcher.event("WARBAND_APPLY_LIST_UPDATE"),this.applyList&&r.instance.setRPProperty("warbandApplyRP",this.hasOverLimitFight(this.applyList)))},enumerable:!0,configurable:!0}),i.prototype.hasOverLimitFight=function(t){for(var e=0,i=t.length;e<i;e++)if(t[e][4]>=this._limitFight)return!0;return!1},e=i,t.WarbandModel=e}(modules=modules||{}),function(t){var e,i,n,a,r,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.warband||(t.warband={}),n=t.core.BaseCtrl,a=t.warband.WarbandModel,r=t.notice.SystemNoticeManager,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16788926,this.createWarbandReply),this.subscribe(16788927,this.donateWarbandReply),this.subscribe(16788928,this.getWarbandDonateReply),this.subscribe(16788929,this.getWarbandInfoReply),this.subscribe(16788930,this.getWarbandRankReply),this.subscribe(16788931,this.getWarbandApplyListReply),this.subscribe(16788932,this.applyWarbandReply),this.subscribe(16788933,this.approvalWarbandReply),this.subscribe(16788935,this.refreshWarbandBuffReply),this.subscribe(16788936,this.updateWarbanderOper),this.subscribe(16788938,this.drawWarbandLevelReply),this.subscribe(16788934,this.setWarbandLeaderReply),this.subscribe(16788939,this.kickWarbandMemeberReply),this.subscribe(16788940,this.dismissWarbandReply),this.subscribe(16788941,this.setWarbandAcceptReply),this.subscribe(16788937,this.impeachWarbandReply),this.subscribe(16788942,this.updateWarbandCoin),this.subscribe(16788943,this.setWarbandBuffReply),this.subscribe(16788944,this.getWarbandBuffReply),this.subscribe(16788945,this.refuseWarbandBuffReply),this.subscribe(16788946,this.ChangeWarbandNameReply),this.subscribe(16788947,this.SetWarbandFightLimitReply),this.onGlobal("BAG_UPDATE",this.updateBag),this.getWarbandInfo(),this.getWarbandDonate(),this.getWarbandApplyList()},o.prototype.getWarbandInfo=function(){console.log("获取战队信息..................."),this.publish(4195404,null)},o.prototype.getWarbandInfoReply=function(t){console.log("获取战队信息返回..................",t),a.instance.setInfo(t[0])},o.prototype.createWarband=function(t,e){console.log("创建战队...............",e),this.publish(2108062,[t,e])},o.prototype.createWarbandReply=function(t){console.log("创建战队返回.....................",t);var e=t[0];0===e?(WindowManager.instance.close(766),WindowManager.instance.open(769)):CommonUtil.noticeError(e)},o.prototype.getWarbandDonate=function(){console.log("获取个人捐献信息................"),this.publish(2108064,null)},o.prototype.getWarbandDonateReply=function(t){console.log("获取个人捐献信息返回...................",t),a.instance.setDonateInfo(t)},o.prototype.donateWarband=function(t,e){console.log("战队捐献.............",t,e),this.publish(2108063,[t,e])},o.prototype.donateWarbandReply=function(t){console.log("战队捐献返回....................",t),CommonUtil.noticeError(t[0])},o.prototype.getWarbandRank=function(t,e){console.log("获取战队排名....................."),this.publish(4195405,[t,e])},o.prototype.getWarbandRankReply=function(t){console.log("获取战队排名返回.....................",t),a.instance.getWarbandRankReply(t)},o.prototype.getWarbandApplyList=function(){console.log("获取申请列表................"),this.publish(4195406,null)},o.prototype.getWarbandApplyListReply=function(t){console.log("获取申请列表返回...................",t),a.instance.setApplyList(t[0])},o.prototype.applyWarband=function(t){console.log("申请加入战队...............",t),this.publish(4195407,[t])},o.prototype.applyWarbandReply=function(t){console.log("申请加入战队返回..................",t);var e=t[0];CommonUtil.noticeError(e,"申请成功"),this.getWarbandRank(a.instance.page,a.instance.pageType)},o.prototype.approvalWarband=function(t,e){console.log("审批加入战队.................",t,e),this.publish(4195408,[t,e])},o.prototype.approvalWarbandReply=function(t){console.log("审批加入战队返回...................",t),CommonUtil.noticeError(t[0])},o.prototype.refreshWarbandBuff=function(){console.log("刷新光环..................."),this.publish(2108065,null)},o.prototype.refreshWarbandBuffReply=function(t){console.log("刷新光环返回.................",t);var e=t[0];0===e?WindowManager.instance.open(820,t[1]):CommonUtil.noticeError(e)},o.prototype.setWarbandLeader=function(t){console.log("设置战队队长..................",t),this.publish(4195409,[t])},o.prototype.setWarbandLeaderReply=function(t){console.log("设置战队队长返回.................",t),CommonUtil.noticeError(t[0])},o.prototype.setWarbandLimitFight=function(t){this.publish(4195417,[t])},o.prototype.kickWarbandMemeber=function(t){console.log("踢出队员.................",t),this.publish(4195410,[t])},o.prototype.kickWarbandMemeberReply=function(t){console.log("踢出队员返回..................",t),CommonUtil.noticeError(t[0])},o.prototype.updateWarbanderOper=function(t){console.log("更新战队操作返回............",t);var e=a.instance.info,i=t[0],n=t[1],s=t[2];if(0===i)a.instance.loginBroadcast(n[0]);else if(1!==i)if(2===i)r.instance.addNotice(s[0]+"加入战队");else if(3===i){var o=void 0;o=PlayerModel.instance.actorId===e[3]?s[0]+"已被踢出战队":n[0]===PlayerModel.instance.actorId?"您被请离战队":s[0]+"被请离战队",r.instance.addNotice(o,!0),a.instance.kickBroadcast(n[0])}else 4===i?(o=n[0]===PlayerModel.instance.actorId?"退出战队成功":s[0]+"离开了战队",r.instance.addNotice(o,!0),a.instance.kickBroadcast(n[0])):7===i?(r.instance.addNotice("解散成功",!0),a.instance.setInfo(null)):8===i?a.instance.donateBroadcast(n):5===i&&a.instance.impeachBroadcast(n)},o.prototype.drawWarbandLevel=function(t){console.log("领取等级奖励..............",t),this.publish(2108066,[t])},o.prototype.drawWarbandLevelReply=function(t){console.log("领取等级奖励返回...................",t),CommonUtil.noticeError(t[0])},o.prototype.dismissWarband=function(){console.log("解散战队..............."),this.publish(4195412,null)},o.prototype.dismissWarbandReply=function(t){console.log("解散战队返回......................",t),CommonUtil.noticeError(t[0])},o.prototype.setWarbandAccept=function(t){console.log("设置战队自动接受入队申请.....................",t),this.publish(4195413,[t])},o.prototype.setWarbandAcceptReply=function(t){console.log("设置战队自动接受入队申请返回..................",t);var e=t[0];0===e?(a.instance.setAutoAccept(t[1]),r.instance.addNotice("设置成功")):CommonUtil.noticeError(e)},o.prototype.impeachWarband=function(){console.log("弹劾队长..............."),this.publish(4195411,null)},o.prototype.impeachWarbandReply=function(t){console.log("弹劾队长返回..................",t),CommonUtil.noticeError(t[0],"弹劾成功")},o.prototype.updateWarbandCoin=function(t){console.log("更新天曜币..................",t),t&&(PlayerModel.instance.warbandCoint=t[0])},o.prototype.setWarbandBuff=function(){this.publish(2108067,null)},o.prototype.setWarbandBuffReply=function(t){console.log("设置buff返回..................",t),CommonUtil.noticeError(t[0],"替换成功")},o.prototype.updateBag=function(){a.instance.checkDonateRP()},o.prototype.getWarbandBuff=function(){this.publish(2108068,null)},o.prototype.getWarbandBuffReply=function(t){a.instance.setCacheBuff(t[0])},o.prototype.refuseWarbandBuff=function(){this.publish(2108069,null)},o.prototype.refuseWarbandBuffReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.ChangeWarbandName=function(t,e){console.log("ChangeWarbandName",t,e),this.publish(2108070,[t,e])},o.prototype.ChangeWarbandNameReply=function(t){console.log("ChangeWarbandNameReply",t);var e=t[0];CommonUtil.noticeError(e,"战队改名成功"),0===e&&this.getWarbandInfo()},o.prototype.SetWarbandFightLimitReply=function(t){var e=t[0];0===e&&WindowManager.instance.close(1529),CommonUtil.noticeError(e,"设置成功")},s=o,e.WarbandCtrl=s}(modules=modules||{}),function(r){var l,t,e,i;function n(){return t.call(this)||this}l=r.fire_contention||(r.fire_contention={}),e=r.core.BaseCtrl,t=e,__extends(n,t),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setup=function(){this.subscribe(16789326,this.getWarFirPersonRankReply),this.subscribe(16789327,this.getWarFirWarbandRankReply),this.subscribe(16789328,this.getWarfireAchieveReply),this.subscribe(16789329,this.getWarfireTargetReply),this.subscribe(16789330,this.drawWarFireAchieveReply),this.subscribe(16789331,this.drawWarFireTargetReply),this.subscribe(16789332,this.updateWarFireSceneRanker),this.subscribe(16789333,this.updateWarFireRankVal),this.subscribe(16789336,this.warFireFollowReply),this.subscribe(16789337,this.updateWarFireFollow),this.subscribe(16789338,this.warFireLeaveReply),this.subscribe(16789339,this.updateWarFireGod),this.subscribe(16778436,this.refreshBossState),this.subscribe(16778438,this.updateWarfireBoss),this.subscribe(16778437,this.refreshMonsterInfo),this.subscribe(16789342,this.updateFireLogin),this.subscribe(16789340,this.refreshWarFireGod),this.subscribe(16789343,this.warfireGodReward),this.subscribe(16789344,this.drawWarfireRewardReply),this.subscribe(16789345,this.brocastWarfire),this.subscribe(16789346,this.warfireDeadTimes),this.subscribe(16789347,this.warFireBuyBuffReply),this.subscribe(16789348,this.warFireBuffEndTime),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("SCENE_ENTER",l.FireContentionModel.instance.closeAllTipWin,l.FireContentionModel.instance),this.onGlobal("DUNGEON_SCENE_STATE_UPDATE",l.FireContentionModel.instance.setRP,l.FireContentionModel.instance),this.getWarFireAchieveInfo(),this.getWarFireTargetInfo(),this.getWarFirPersonRank(),this.getWarFirWarbandRank()},n.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(569==t[e]&&r.funcOpen.FuncOpenModel.instance.getFuncIsOpen(569))return void l.FireContentionModel.instance.setRP()},n.prototype.warFireBuyBuff=function(){console.log("【玄火争夺战】 玄火鼓舞 请求....................."),this.publish(5243082,null)},n.prototype.getWarFirPersonRank=function(){console.log("【玄火争夺战】 获取玄火主界面个人排名 请求....................."),this.publish(4195414,null)},n.prototype.getWarFirWarbandRank=function(){console.log("【玄火争夺战】 获取玄火主界面战队排名 请求....................."),this.publish(4195415,null)},n.prototype.getWarFireAchieveInfo=function(){console.log("【玄火争夺战】 获取玄火成就信息 请求....................."),this.publish(2108462,null)},n.prototype.getWarFireTargetInfo=function(){console.log("【玄火争夺战】 获取玄火目标信息 请求....................."),this.publish(2108463,null)},n.prototype.drawWarFireAchieve=function(t){console.log("【玄火争夺战】 领取战火成就 请求....................."),this.publish(2108464,[t])},n.prototype.drawWarFireTarget=function(t){console.log("【玄火争夺战】 领取战火目标 请求....................."),this.publish(2108465,[t])},n.prototype.drawWarfireReward=function(){console.log("【玄火争夺战】 结算时 领取玄火奖励 请求....................."),this.publish(4195416,null)},n.prototype.getWarFirPersonRankReply=function(t){console.log("【玄火争夺战】 获取主界面玄火 个人排名 信息返回..............",t),l.FireContentionModel.instance.getWarFirPersonRankReply(t)},n.prototype.getWarFirWarbandRankReply=function(t){console.log("【玄火争夺战】 获取主界面玄火 战队排名 信息返回..............",t),l.FireContentionModel.instance.getWarFirWarbandRankReply(t)},n.prototype.getWarfireAchieveReply=function(t){console.log("【玄火争夺战】 获取战火成就信息 信息返回..............",t),l.FireContentionModel.instance.getWarfireAchieveReply(t)},n.prototype.getWarfireTargetReply=function(t){console.log("【玄火争夺战】 获取战火目标信息 信息返回..............",t),l.FireContentionModel.instance.getWarfireTargetReply(t)},n.prototype.updateWarFireSceneRanker=function(t){l.FireContentionModel.instance.updateWarFireSceneRanker(t)},n.prototype.updateWarFireRankVal=function(t){console.log("【玄火争夺战】 更新个人参数 信息返回..............",t),l.FireContentionModel.instance.updateWarFireRankVal(t)},n.prototype.warFireFollow=function(t){console.log("玄火跟随..................",t),this.publish(5243080,[t])},n.prototype.WarFireLeave=function(t){console.log("玄火放弃跟随.................."),this.publish(5243081,null)},n.prototype.warFireFollowReply=function(t){console.log("【玄火争夺战】 玄火跟随 信息返回..............",t);var e=t[2];0===e?(r.dungeon.DungeonModel.instance.pos=t[1],PlayerModel.instance.selectTarget(5,t[0])):CommonUtil.noticeError(e)},n.prototype.updateWarFireFollow=function(t){console.log("【玄火争夺战】 玄火跟随  [更新] 信息返回..............",t),r.dungeon.DungeonModel.instance.pos=t[1],r.union_war.UnionWarModel.instance.ispreliminary()&&(PlayerModel.instance.selectTarget(5,t[0]),GlobalData.dispatcher.event("PLAYER_POS_CHANGE")),r.team_warfare.TeamWarfareModel.instance.ispreliminaryFactionWar()&&GlobalData.dispatcher.event("PLAYER_POS_CHANGE")},n.prototype.drawWarFireAchieveReply=function(t){console.log("【玄火争夺战】 领取成就奖励返回 信息返回..............",t),CommonUtil.noticeError(t[0])},n.prototype.drawWarFireTargetReply=function(t){console.log("【玄火争夺战】 领取玄火奖励返回 信息返回..............",t),CommonUtil.noticeError(t[0])},n.prototype.warFireLeaveReply=function(t){console.log("【玄火争夺战】 玄火放弃跟随 信息返回..............",t),CommonUtil.noticeError(t[0])},n.prototype.drawWarfireRewardReply=function(t){console.log("【玄火争夺战】 结算 领取玄火奖励 信息返回..............",t),CommonUtil.noticeError(t[0])},n.prototype.warFireBuyBuffReply=function(t){console.log("【玄火争夺战】 玄火鼓舞返回 信息返回..............",t),CommonUtil.noticeError(t[0])},n.prototype.warFireBuffEndTime=function(t){switch(console.log("【玄火争夺战】 玄火鼓舞结束时间更新..............",t),l.FireContentionModel.instance.endTime=t[0],t[1]){case 0:break;case 1:r.notice.SystemNoticeManager.instance.addNotice("已激活全员鼓舞BUFF",!1),GlobalData.dispatcher.event("WAR_FIRE_BUFF_END_TIME")}},n.prototype.updateWarFireGod=function(t){console.log("【玄火争夺战】 推送火神 信息返回..............",t),l.FireContentionModel.instance.updateWarFireGod([t[0],t[2]])},n.prototype.refreshWarFireGod=function(t){console.log("【玄火争夺战】 刷新火神 信息返回..............",t),l.FireContentionModel.instance.updateWarFireGod([t[0],t[2]])},n.prototype.refreshBossState=function(t){console.log("刷新boss列表................",t),l.FireContentionModel.instance.setBossInfos(t[0])},n.prototype.updateWarfireBoss=function(t){console.log("更新BOSS信息.................",t),l.FireContentionModel.instance.updateBossInfos(t[0])},n.prototype.refreshMonsterInfo=function(t){console.log("刷新小怪信息................",t),l.FireContentionModel.instance.refreshTick=t[1],l.FireContentionModel.instance.setMonsterInfos(t[0])},n.prototype.updateFireLogin=function(t){console.log("【玄火争夺战】 增加玄火 ..............",t),l.FireContentionModel.instance.updateFireLogin(t)},n.prototype.warfireGodReward=function(t){console.log("【玄火争夺战】 结算 ..............",t),2601===r.scene.SceneModel.instance.enterScene[0]&&WindowManager.instance.open(913,t)},n.prototype.brocastWarfire=function(t){console.log("副本中间 广播提示~~~~~~~~~~~~~~~~~",t);var e=t[0],i=t[1],n=t[2],s="";switch(e){case 0:console.log("刷新boss 广播提示................",t),s="<span style='color:#FF3E3E'>【"+r.config.MonsterResCfg.instance.getMonsterName(2320001)+"】</span>已经经刷新,上仙们快快前往击败获取海量玄火";break;case 1:console.log("刷新精英 广播提示................",t),s="<span style='color:#FF3E3E'>【精英尊者】</span>已经刷新,上仙们快快击败获取大量玄火";break;case 2:console.log("刷新火神 广播提示................",t),s="<span style='color:#FF3E3E'>【"+i+"】</span>化身火神,降临火境,发起攻击可获取玄火";break;case 3:console.log("【战队逐鹿】 广播获得 炎晶的玩家................",t),s=n?"<span style='color:#FF3E3E'>【"+i+"】</span> 夺取<span style='color:#FF3E3E'>"+r.config.NpcCfg.instance.getCfgById(n)[4]+"</span>,正返回交付":"<span style='color:#FF3E3E'>【"+i+"】</span> 积分即将达到上限，其他战队请全力以赴";break;case 4:case 5:if(console.log("【 九天之巅 】 boss复活................",t),n){var o="<span style='color:#FF3E3E'>【"+r.config.MonsterResCfg.instance.getMonsterName(n)+"】</span>";s=4===e?"击败九天首领"+o+"获取大量积分，请尽快前往":"九天首领"+o+"已经刷新，请尽快前往"}break;case 6:console.log("仙盟争霸预赛进入时有队员未进入................",t),s="<span style='color:#FF3E3E'>【"+i+"】</span>战斗开始时不在准备场景，本次战斗暂不参与"}var a=l.FireContentionModel.instance.tipsPanel.shift();a=a||new l.FireContentionCenterTipsPanel,Laya.stage.addChild(a),a.setTips(s)},n.prototype.warfireDeadTimes=function(t){console.log("【玄火争夺战】 死亡次数................",t),l.FireContentionModel.instance.serialDeathNum=t[0],GlobalData.dispatcher.event("WARFIRE_DEAD_TIMES")},i=n,l.FireContentionCtrl=i}(modules=modules||{}),function(i){var n,t,e,s,o;function a(){return t.call(this)||this}n=i.nothingness_world||(i.nothingness_world={}),e=i.core.BaseCtrl,s=base.assets.RecoverQueue,t=e,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16789626,this.getEmptyPersonRankReply),this.subscribe(16789627,this.getEmptyWarbandRankReply),this.subscribe(16789628,this.getEmptyItemReply),this.subscribe(16789630,this.emptySceneReady),this.subscribe(16789629,this.useEmptyItemReply),this.subscribe(16789631,this.getEmptyInfoReply),this.subscribe(16789632,this.updateEmptyerInfo),this.subscribe(16777474,this.buyEmptyItemReply),this.subscribe(16789633,this.getEmptyBossSkillReply),this.subscribe(16789634,this.emptyFinishLevel),this.subscribe(16777480,this.UpdateSceneJumpLevel),this.subscribe(16789636,this.useEmptyItemTips),this.subscribe(16789637,this.emptyItemUseList),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getEmptyInfo(),a.instance.getEmptyWarbandRank()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(633==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(633))return void n.NothingnessWorldModel.instance.setRP()},a.prototype.getEmptyPersonRank=function(){console.log("【 虚无界 】 获取虚空个人排名 请求....................."),this.publish(4195604,null)},a.prototype.getEmptyWarbandRank=function(){console.log("【 虚无界 】 获取虚空战队排名 请求....................."),this.publish(4195605,null)},a.prototype.getEmptyItem=function(){console.log("【 虚无界 】 虚空道具列表 请求....................."),this.publish(5242894,null)},a.prototype.useEmptyItem=function(t){console.log("【 虚无界 】 使用虚无境道具 请求....................."+t),this.publish(5242895,[t])},a.prototype.buyEmptyItem=function(t){console.log("【 虚无界 】 购买虚无境道具 请求....................."+t),this.publish(5242893,[t])},a.prototype.getEmptyInfo=function(){console.log("【 虚无界 】 获取虚空信息 请求....................."),this.publish(2108762,null)},a.prototype.useEmptyItemReply=function(t){if(-1===t[0])return WindowManager.instance.close(64),null!=GameCenter.instance.world&&GameCenter.instance.world.publish("leaveScene"),WindowManager.instance.gc(),AssetPoolBase.gc(!0),s.default.gc(!0),void ResourcePool.instance.recoverQueue.gc(!0);CommonUtil.noticeError(t[0])},a.prototype.buyEmptyItemReply=function(t){CommonUtil.noticeError(t[0],"购买成功")},a.prototype.getEmptyPersonRankReply=function(t){n.NothingnessWorldModel.instance.getEmptyPersonRankReply(t)},a.prototype.getEmptyWarbandRankReply=function(t){n.NothingnessWorldModel.instance.getEmptyWarbandRankReply(t)},a.prototype.getEmptyItemReply=function(t){console.log("【 虚无界 】 虚空道具列表返回..............",t),n.NothingnessWorldModel.instance.getEmptyItemReply(t)},a.prototype.getEmptyInfoReply=function(t){n.NothingnessWorldModel.instance.getEmptyInfoReply(t)},a.prototype.updateEmptyerInfo=function(t){n.NothingnessWorldModel.instance.updateEmptyerInfo(t)},a.prototype.getEmptyBossSkill=function(){this.publish(5242896,null)},a.prototype.getEmptyBossSkillReply=function(t){n.NothingnessWorldModel.instance.updateEmptyMonsterSkill(t)},a.prototype.emptySceneReady=function(t){n.NothingnessWorldModel.instance.currLv=t[0],GlobalData.dispatcher.event("EMPTY_SCENE_READY"),WindowManager.instance.open(119,3)},a.prototype.emptyFinishLevel=function(t){n.NothingnessWorldModel.instance.doneWave=t[0],n.NothingnessWorldModel.instance.doneWave<n.NothingnessWorldModel.instance.maxLevelNum&&WindowManager.instance.open(987),a.instance.getEmptyItem()},a.prototype.useEmptyItemTips=function(t){console.log("【 虚无界 】使用的虚无道具提示 返回..............",t),n.NothingnessWorldModel.instance.addBroadCast(t)},a.prototype.emptyItemUseList=function(t){console.log("【 虚无界 】使用的虚无道具列表 返回..............",t),n.NothingnessWorldModel.instance.getCharmEndTime(t)},a.prototype.UpdateSceneJumpLevel=function(t){n.NothingnessWorldModel.instance.tick=t[0],n.NothingnessWorldModel.instance.level=t[1],n.NothingnessWorldModel.instance.leftTick=t[2],40!==i.scene.SceneUtil.currScene&&52!==i.scene.SceneUtil.currScene||(DungeonModel.instance.broadcastBeginCombat=[n.NothingnessWorldModel.instance.leftTick],DungeonModel.instance.broadcastBeginCombat&&DungeonModel.instance.broadcastBeginCombat[0]>GlobalData.serverTime&&(WindowManager.instance.isOpened(64)||WindowManager.instance.isOpened(22)||WindowManager.instance.isOpened(23)||(console.log("打开倒计时"),i.dungeon.DungeonCtrl.instance.openEnTimeUI()))),GlobalData.dispatcher.event("UPDATE_SCENE_JUMP_LEVEL")},o=a,n.NothingnessWorldCtrl=o}(modules=modules||{}),function(g){var c,f,p,t;function o(){this.parts=[1,2,3,4,5,6,7,8],this._rps=["equipSuitRP_0","equipSuitRP_1","equipSuitRP_2","equipSuitRP_3","equipSuitRP_4","equipSuitRP_5","equipSuitRP_6","equipSuitRP_7","equipSuitRP_8","equipSuitRP_9","equipSuitRP_10","equipSuitRP_11","equipSuitRP_12","equipSuitRP_13","equipSuitRP_14"],this.lightIndexs=[]}c=g.equipSuit||(g.equipSuit={}),f=g.config.EquipSuitCfg,p=g.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lightParts",{get:function(){return this._lightParts},set:function(t){this._lightParts=t,this.minOpenFuncId()},enumerable:!0,configurable:!0}),o.prototype.minOpenFuncId=function(){this._states={};var t=f.instance.ids;if(this.ids){this._states[t[0]]=!0;for(var e=1,i=t.length;e<i;e++){var n=t[e],s=f.instance.getCfgById(n)[2];this._states[n]=!(-1==this.ids.indexOf(s));var o=n/10>>0,a=f.instance.getIdsBybClass(o).indexOf(n),r=f.instance.bClassIds.indexOf(o),l=c.EquipSuitUtil.panels[r];if(l){var h=g.core.WindowConfig.instance.getWindowConfigById(l)[6];!h||this._states[n]||a?this._states[n]&&!a&&p.instance.setActionOpen(h,1):p.instance.setActionOpen(h,3)}}}},o.prototype.getIsMeet=function(t,e){if(!this._lightParts||!this._lightParts.length)return!1;for(var i=0,n=this._lightParts;i<n.length;i++){var s=n[i];if(s[0]==t)for(var o=0,a=s[1];o<a.length;o++)if(a[o]==e)return!0}},o.prototype.getState=function(t){return this._states[t]},o.prototype.lightPartsById=function(t){for(var e=0,i=this._lightParts;e<i.length;e++){var n=i[e];if(t==n[0])return n[1]}return null},o.prototype.checkRP=function(){var i=[];if(this.lightIndexs.length=0,this.ids){var t=[];if(this.ids.length)for(var e=0,n=this.ids;e<n.length;e++){var s=n[e],o=f.instance.getActiveIdsByYetId(s);t.push.apply(t,o)}else t=[f.instance.ids[0]];for(var a=0,r=t;a<r.length;a++)if(s=r[a],-1==this.ids.indexOf(s))for(var l=0,h=this.parts.length;l<h;l++){var c=this.parts[l],p=PlayerModel.instance.getEquipByPart(c);if(p){var u=this.getIsMeet(s,c);if(this.compareResult(p[0],s)&&!u){var d=this.getIndexsById(s),y=d.first;i[y]=!0,this.lightIndexs.push(d);break}}}this._rps.forEach(function(t,e){i[e]?g.redPoint.RedPointCtrl.instance.setRPProperty(t,!0):g.redPoint.RedPointCtrl.instance.setRPProperty(t,!1)})}},o.prototype.getIndexsById=function(t){if(-1===f.instance.ids.indexOf(t)||null==t)throw new Error("套装id为"+t+",配置不存在!");var e=t/10>>0;return{first:f.instance.bClassIds.indexOf(e),second:f.instance.getIdsBybClass(e).indexOf(t)}},o.prototype.compareResult=function(t,e){var i=f.instance.getCfgById(e)[3],n=i[0];if(CommonUtil.getStageById(t)<n)return!1;var s=i[1];return!(CommonUtil.getItemQualityById(t)<s)&&i[2]-1<=CommonUtil.getStarById(t)},Object.defineProperty(o.prototype,"panelIndex",{get:function(){if(this.ids){if(0<this.lightIndexs.length)return this.lightIndexs[0];var t=f.instance.ids,e=0;t:for(var i=0,n=t.length;i<n;i++){var s=t[i];if(-1==this.ids.indexOf(s)){e=i;break}for(var o=0,a=this._lightParts;o<a.length;o++)if(a[o][0]==s){e=i;break t}}var r=t[e];return this.getIndexsById(r)}},enumerable:!0,configurable:!0}),o.prototype.getLightCountById=function(t){if(-1!=o.instance.ids.indexOf(t))return 8;var e=o.instance.lightParts;if(!e||!e.length)return 0;for(var i=0,n=e;i<n.length;i++){var s=n[i];if(t==s[0])return s[1].length}return 0},t=o,c.EquipSuitModel=t}(modules=modules||{}),function(a){var o,t,r,e,l,h,i;function n(){return t.call(this)||this}o=a.equipSuit||(a.equipSuit={}),r=a.equipSuit.EquipSuitModel,e=a.core.BaseCtrl,l=a.config.EquipSuitCfg,h=a.funcOpen.FuncOpenModel,t=e,__extends(n,t),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setup=function(){this.subscribe(16777369,this.getEquipSuitReply),this.subscribe(16777370,this.lightenUpReply),this.publish(2097181,null),this.onGlobal("FUNC_OPEN_UPDATE",this.updateFuncOpen),this.onGlobal("PLAYER_EQUIPS_INITED",r.instance.checkRP,r.instance),this.onGlobal("PLAYER_WEAR_EQUIP",r.instance.checkRP,r.instance),this.onGlobal("PLAYER_WEAR_EQUIPS",r.instance.checkRP,r.instance)},n.prototype.getEquipSuitReply=function(t){r.instance.ids=t[0],r.instance.lightParts=t[1],r.instance.checkRP(),GlobalData.dispatcher.event("EQUIP_SUIT_UPDATE")},n.prototype.updateFuncOpen=function(t){t&&-1!==t.indexOf(194)&&r.instance.minOpenFuncId()},n.prototype.lightenUp=function(t){this.publish(2097182,t)},n.prototype.lightenUpReply=function(t){var e=t[0];if(e)CommonUtil.noticeError(e);else{var i=r.instance.selectId,n=l.instance.getCfgById(i)[1],s=r.instance.selectPart,o=CommonUtil.getNameByPart(s);a.notice.SystemNoticeManager.instance.addNotice("成功点亮"+n+"【"+o+"】")}},n.prototype.openPanel=function(){if(h.instance.getFuncIsOpen(194)){var t=r.instance.panelIndex,e=t.first,i=t.second,n=o.EquipSuitUtil.panels[e];WindowManager.instance.open(n,i)}else{var s=h.instance.getFuncOpenTipById(194);a.notice.SystemNoticeManager.instance.addNotice(s,!0)}},i=n,o.EquipSuitCtrl=i}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.equipment_zu_hun||(t.equipment_zu_hun={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.common.CommonUtil,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16783826,this.infoReply),this.subscribe(16783827,this.infoReply1),this.subscribe(16783828,this.upGradeReply),this.subscribe(16783829,this.oneKeyUpGradeReply),this.subscribe(16783830,this.shihunOperReply),this.subscribe(16783831,this.shihunOperOneKeyReply),this.onGlobal("EQUIPMENT_ZUHUN_UPDATE",this.setRp),this.onGlobal("PLAYER_EQUIPS_INITED",this.setRp),this.onGlobal("PLAYER_WEAR_EQUIPS",this.setRp),this.onGlobal("BAG_UPDATE",this.setRp),this.onGlobal("BAG_DATA_GOT",this.setRp),this.getZhuhunInfo()},r.prototype.setRp=function(){e.EquipmentZuHunModel.instance.setRp()},r.prototype.getZhuhunInfo=function(){this.publish(2103562,null)},r.prototype.ZhuhunOper=function(t,e){this.publish(2103563,[t,e])},r.prototype.ZhuhunOperOneKey=function(t){this.publish(2103564,[t])},r.prototype.ShihunOper=function(t){this.publish(2103565,[t])},r.prototype.ShihunOperOneKey=function(t){this.publish(2103566,[t])},r.prototype.infoReply=function(t){e.EquipmentZuHunModel.instance.getValue(t)},r.prototype.infoReply1=function(t){e.EquipmentZuHunModel.instance.updateValue(t)},r.prototype.upGradeReply=function(t){0==t[0]?(s.instance.addNotice("铸魂成功"),GlobalData.dispatcher.event("EQUIPMENT_ZUHUN_UP")):o.noticeError(t[0])},r.prototype.oneKeyUpGradeReply=function(t){0==t[0]?(s.instance.addNotice("铸魂成功"),GlobalData.dispatcher.event("EQUIPMENT_ZUHUN_UP",[t[1]])):o.noticeError(t[0])},r.prototype.shihunOperReply=function(t){0==t[0]?s.instance.addNotice("噬魂成功"):o.noticeError(t[0])},r.prototype.shihunOperOneKeyReply=function(t){0==t[0]?s.instance.addNotice("噬魂成功"):o.noticeError(t[0])},a=r,e.EquipmentZuHunCtrl=a}(modules=modules||{}),function(t){var e,i;function n(){this.lastBossId=0,this.layerBoss={},this.stageBoss={};for(var t=GlobalData.getConfig("scene_forbidden_boss"),e=0;e<t.length;++e)this.layerBoss[t[e][1]]=this.layerBoss[t[e][1]]||[],this.layerBoss[t[e][1]].push(t[e]),this.stageBoss[t[e][3]]=this.stageBoss[t[e][3]]||[],this.stageBoss[t[e][3]].push(t[e]),3===t[e][3]&&(this.lastBossId=t[e][4])}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getBlendCfg=function(t){return GlobalData.getConfig("boss_forbidden_blend")[t-1]},n.prototype.getBossByLayer=function(t){return this.layerBoss[t]||[]},n.prototype.getCountToNext=function(t){var e=this.layerBoss[t];return e&&0<e.length&&e[0][5]||0},n.prototype.getHighReward=function(t,e){for(var i=GlobalData.getConfig("boss_forbidden_award"),n=0,s=0;s<i.length;++s){if(i[s][0]===t&&e<i[s][1][1])return[i[s][2],i[s][1][1]-e];i[s][0]===t&&(n=i[s][2])}return[n,0]},i=n,e.ForbiddenBossCfg=i}(modules=modules||{}),function(c){var p,t,e,o,i,n;function s(){return null!==t&&t.apply(this,arguments)||this}p=c.sceneTeam||(c.sceneTeam={}),e=c.core.BaseCtrl,o=c.notice.SystemNoticeManager,i=c.config.ForbiddenBossCfg,t=e,__extends(s,t),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16789926,this.SceneCreateTeamReply),this.subscribe(16789927,this.SceneSearchTeamReply),this.subscribe(16789928,this.SceneSearchObjReply),this.subscribe(16789929,this.SceneSetPersionReply),this.subscribe(16789930,this.SceneSetTeamReply),this.subscribe(16789931,this.SceneInviteMemberReply),this.subscribe(16789932,this.UpdateSceneAddTeamInvite),this.subscribe(16789933,this.UpdateSceneTeamMember),this.subscribe(16789934,this.SceneJoinTeamReply),this.subscribe(16789935,this.SceneLeaveTeamReply),this.subscribe(16789936,this.SceneTeamDismiss),this.subscribe(16789937,this.SceneKickedMemberReply),this.subscribe(16789938,this.UpdateSceneTeamMemberOper),this.subscribe(16790027,this.UpdateBossHurtRank),this.subscribe(16789939,this.SceneSetTeamDataReply),this.subscribe(16789940,this.UpdateTeamData)},s.prototype.SceneCreateTeamReply=function(t){console.log("SceneCreateTeamReply:",t);var e=t[0];CommonUtil.noticeError(e,null)},s.prototype.SceneSearchTeamReply=function(t){console.log("SceneSearchTeamReply:",t);var e=t[1];0===e&&(p.SceneTeamModel.instance.teams=t[0],GlobalData.dispatcher.event("SCENE_TEAMS_UPDATE")),CommonUtil.noticeError(e,null)},s.prototype.SceneSearchObjReply=function(t){console.log("搜索玩家返回.................SceneSearchObjReply",t);var e=t[0];0===e&&(p.SceneTeamModel.instance.playersToInvite=t[1],GlobalData.dispatcher.event("SCENE_TEAM_PLAYERS_TO_INVITE_UPDATE")),CommonUtil.noticeError(e,null)},s.prototype.SceneSetPersionReply=function(t){console.log("SceneSetPersionReply:",t);var e=t[1];0===e&&(p.SceneTeamModel.instance.autoAcceptInvite=t[0],GlobalData.dispatcher.event("SCENE_TEAM_AUTO_ACCEPT_UPDATE")),CommonUtil.noticeError(e,null)},s.prototype.SceneSetTeamReply=function(t){console.log("SceneSetTeamReply:",t);var e=t[0];0===e&&(p.SceneTeamModel.instance.canSearch=t[1],GlobalData.dispatcher.event("SCENE_TEAM_CAN_SEARCH_UPDATE")),CommonUtil.noticeError(e,null)},s.prototype.SceneInviteMemberReply=function(t){console.log("SceneInviteMemberReply:",t);var e=t[0];if(0===e)for(var i=t[1],n=p.SceneTeamModel.instance.playersToInvite||[],s=0;s<n.length;++s)if(n[s][2]===i){n.splice(s,1),GlobalData.dispatcher.event("SCENE_TEAM_PLAYERS_TO_INVITE_UPDATE");break}CommonUtil.noticeError(e,null)},s.prototype.UpdateSceneAddTeamInvite=function(t){console.log("UpdateSceneAddTeamInvite:",t),c.teamInvite.TeamInviteModel.instance.addTeamInvite(t[0])},s.prototype.UpdateSceneTeamMember=function(t){console.log("UpdateSceneTeamMember:",t);for(var e=t[0]||[],i=(!p.SceneTeamModel.instance.members||0===p.SceneTeamModel.instance.members.length)&&0<e.length,n=0,s=e.length;n<s;n++){var o=e[n];if(o[8]){if(0===n)break;var a=e[0];e[0]=o,e[n]=a;break}}p.SceneTeamModel.instance.members=e,p.SceneTeamModel.instance.teamsTable={},p.SceneTeamModel.instance.isCaptain=!1;for(var r=0;r<p.SceneTeamModel.instance.members.length;r++){var l=p.SceneTeamModel.instance.members[r],h=l[0];h===PlayerModel.instance.actorId&&(p.SceneTeamModel.instance.isCaptain=l[8]),p.SceneTeamModel.instance.teamsTable[h]=l}GlobalData.dispatcher.event("SCENE_TEAM_MEMBER_UPDATE"),i&&(c.union_war.UnionWarModel.instance.ispreliminaryFactionMatch()||WindowManager.instance.open(1172),c.common_group.CommonGroupModel.instance.isHomeowners&&this.SceneSetTeamData(PlayerModel.instance.selectTargetId))},s.prototype.SceneJoinTeamReply=function(t){console.log("SceneJoinTeamReply:",t);var e=t[0];c.teamInvite.TeamInviteModel.instance.delInvite(c.teamInvite.TeamInviteModel.instance.curInvite),CommonUtil.noticeError(e,null)},s.prototype.SceneLeaveTeamReply=function(t){console.log("SceneLeaveTeamReply:",t);var e=t[0];CommonUtil.noticeError(e,null)},s.prototype.SceneTeamDismiss=function(t){console.log("SceneTeamDismiss:",t),o.instance.addNotice("队伍解散"),p.SceneTeamModel.instance.members=[],GlobalData.dispatcher.event("SCENE_TEAM_MEMBER_UPDATE")},s.prototype.SceneKickedMemberReply=function(t){console.log("SceneKickedMemberReply:",t);var e=t[0];CommonUtil.noticeError(e,null)},s.prototype.UpdateSceneTeamMemberOper=function(t){console.log("UpdateSceneTeamMemberOper:",t);var e,i=t[1],n=t[0],s=t[2];0===s?(e=i+"离开队伍",p.SceneTeamModel.instance.delMember(n),o.instance.addNotice(e,!0)):1===s?(e=i+"加入队伍",o.instance.addNotice(e,!1)):2===s&&(n===PlayerModel.instance.actorId?(e="你已被踢出队伍",p.SceneTeamModel.instance.members=[],GlobalData.dispatcher.event("SCENE_TEAM_MEMBER_UPDATE")):(e=i+"被踢出队伍",p.SceneTeamModel.instance.delMember(n)),o.instance.addNotice(e,!0))},s.prototype.UpdateBossHurtRank=function(t){console.log("UpdateBossHurtRank:",t),p.SceneTeamModel.instance.hurtRank[t[0]]=t[1],t[0]===i.instance.lastBossId&&(p.SceneTeamModel.instance.perHurt=t[2]),GlobalData.dispatcher.event("BOSS_HURT_RANK_UPDATE")},s.prototype.SceneSetTeamDataReply=function(t){console.log("SceneSetTeamDataReply:",t),CommonUtil.noticeError(t[0])},s.prototype.UpdateTeamData=function(t){console.log("UpdateTeamData队长选择的bossID:",t);var e=t[0];c.common_group.CommonGroupModel.instance.isHomeowners?p.SceneTeamModel.instance.leaderSelectId=0:(p.SceneTeamModel.instance.leaderSelectId=e[0],c.forbiddenBoss.ForbiddenBossModel.instance.setSelect(e[0],1))},s.prototype.SceneCreateTeam=function(){this.publish(5243180,null)},s.prototype.SceneSearchTeam=function(){this.publish(5243181,null)},s.prototype.SceneSearchObj=function(){console.log("搜索玩家................SceneSearchObj"),this.publish(5243182,null)},s.prototype.SceneSetPersion=function(t){this.publish(5243183,[t])},s.prototype.SceneSetTeam=function(t){this.publish(5243184,[t])},s.prototype.SceneInviteMember=function(t){this.publish(5243185,[t])},s.prototype.SceneJoinTeam=function(t,e){this.publish(5243186,[t,e])},s.prototype.SceneLeaveTeam=function(t){this.publish(5243187,[t])},s.prototype.SceneKickedMember=function(t){this.publish(5243188,[t])},s.prototype.SceneSetTeamData=function(t){this.publish(5243189,[[t]])},n=s,p.SceneTeamCtrl=n}(modules=modules||{}),function(s){var o,t,e,i,n;function a(){return t.call(this)||this}o=s.teamBattle||(s.teamBattle={}),e=s.core.BaseCtrl,i=s.teamInvite.TeamInviteModel,t=e,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16777444,this.updateTeamCopyTimes),this.subscribe(16777445,this.updateTeamCopyTimes),this.subscribe(16777446,this.getTeamCopyRankReply),this.subscribe(16780218,this.updateTeamMember),this.subscribe(16780219,this.updateTeamMatchState),this.subscribe(16780216,this.reqOrganizeTeamReply),this.subscribe(16780217,this.cancelOrganizeTeamReply),this.subscribe(16780220,this.createTeamReply),this.subscribe(16780221,this.destoryTeamReply),this.subscribe(16780227,this.updateDestoryTeam),this.subscribe(16780222,this.inviteJoinTeamReply),this.subscribe(16780223,this.joinTeamReply),this.subscribe(16780224,this.leaveTeamReply),this.subscribe(16780225,this.kickedTeamReply),this.subscribe(16780228,this.updateTeamMemberOper),this.subscribe(16777378,this.upDataActorInfo),this.publish(2097167,null),this.publish(7340235,null),this.onGlobal("RENAME_NAME_UPDATE",this.updateName),this.onGlobal("RENAME_OCC_UPDATE",this.updateOcc)},a.prototype.updateTeamCopyTimes=function(t){o.TeamBattleModel.Instance.setTimes(t[0])},a.prototype.getTeamCopyRankReply=function(t){o.TeamBattleModel.Instance.rankList=t[0],o.TeamBattleModel.Instance.setMaxRecordInfo(t[0][0])},a.prototype.updateTeamMember=function(t){console.log("【经验组队副本】 更新队伍成员",t);var e=t[0];o.TeamBattleModel.Instance.playerInfos=e},a.prototype.updateTeamMatchState=function(t){o.TeamBattleModel.Instance.updataMatchState(t[0])},a.prototype.reqBeginMatch=function(t){console.log("reqBeginMatch",t),o.TeamBattleModel.Instance.currSceneId=t,this.publish(2099752,[t])},a.prototype.reqOrganizeTeamReply=function(t){var e=t[0];0!==e?(this.reqCancelMatch(),WindowManager.instance.getDialogById(207)&&WindowManager.instance.close(207)):CommonUtil.noticeError(e)},a.prototype.reqCancelMatch=function(){console.log("reqCancelMatch"),this.publish(2099753,null)},a.prototype.cancelOrganizeTeamReply=function(t){var e=t[0];e||(o.TeamBattleModel.Instance.playerInfos.length=0,CommonUtil.noticeError(e))},a.prototype.createTeam=function(){this.publish(2099754,[2091])},a.prototype.createTeamReply=function(t){var e=t[0];e?CommonUtil.noticeError(e):(WindowManager.instance.open(354),o.TeamBattleModel.Instance.isHaveRoom=!0)},a.prototype.destoryTeam=function(){this.publish(2099755,null)},a.prototype.getActorInfo=function(t){this.publish(4194307,[t])},a.prototype.upDataActorInfo=function(t){o.TeamBattleModel.Instance.updataHalfInfo(t)},a.prototype.destoryTeamReply=function(t){var e=t[0];CommonUtil.noticeError(e,"解散成功")},a.prototype.updateDestoryTeam=function(){if(!o.TeamBattleModel.Instance.mineInfo[8]){var t=o.TeamBattleModel.Instance.bossInfo[1];s.notice.SystemNoticeManager.instance.addNotice("队长"+t+"解散队伍",!0)}o.TeamBattleModel.Instance.isHaveRoom=!1,WindowManager.instance.close(98)},a.prototype.inviteJoinTeam=function(t,e){this.publish(2099756,[t,e,o.TeamBattleModel.Instance.allMemberIds])},a.prototype.inviteJoinTeamReply=function(t){var e=t[0];CommonUtil.noticeError(e,"邀请发送成功")},a.prototype.joinTeam=function(t,e){o.TeamBattleModel.Instance.currSceneId=e,this.publish(2099757,[e,t])},a.prototype.joinTeamReply=function(t){var e=t[0];e?CommonUtil.noticeError(e):(s.notice.SystemNoticeManager.instance.addNotice("加入队伍成功"),o.TeamBattleModel.Instance.isHaveRoom=!0,WindowManager.instance.close(355),WindowManager.instance.open(97),WindowManager.instance.open(354)),i.instance.delInvite(o.TeamBattleModel.Instance.tempSelectTeam)},a.prototype.leaveTeam=function(){this.publish(2099758,null)},a.prototype.leaveTeamReply=function(t){var e=t[0];e||(o.TeamBattleModel.Instance.isHaveRoom=!1),CommonUtil.noticeError(e,"离队成功")},a.prototype.kickedTeam=function(t){this.publish(2099759,[t])},a.prototype.kickedTeamReply=function(t){var e=t[0];CommonUtil.noticeError(e,"操作成功")},a.prototype.startMatch=function(){this.reqBeginMatch(2091),WindowManager.instance.open(98),s.mission.MissionModel.instance.auto=!1},a.prototype.updateTeamMemberOper=function(t){var e=t[0],i=e[0],n=e[1];1==n?s.notice.SystemNoticeManager.instance.addNotice(i+"加入队伍"):2==n?(s.notice.SystemNoticeManager.instance.addNotice("您被踢出队伍",!0),GlobalData.dispatcher.event("TEAM_COPY_MEMBER_KICKED"),o.TeamBattleModel.Instance.isHaveRoom=!1):0==n&&s.notice.SystemNoticeManager.instance.addNotice(i+"退出队伍",!0)},a.prototype.updateName=function(){o.TeamBattleModel.Instance.updateName()},a.prototype.updateOcc=function(){o.TeamBattleModel.Instance.updateOcc()},n=a,o.TeamBattleCtrl=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t._itemId=-1,t}e=t.runeCompose||(t.runeCompose={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16780322,this.composeRuneReply),this.onGlobal("BAG_UPDATE",e.RuneComposeModel.instance.checkRP,e.RuneComposeModel.instance),this.onGlobal("BAG_DATA_GOT",e.RuneComposeModel.instance.checkRP,e.RuneComposeModel.instance),this.onGlobal("RUNE_COPY_UPDATE",e.RuneComposeModel.instance.checkRP,e.RuneComposeModel.instance),this.onGlobal("RUNE_UPDATE",e.RuneComposeModel.instance.checkRP,e.RuneComposeModel.instance)},o.prototype.composeRune=function(t,e){this._itemId=t,this.publish(2099857,[t,e])},o.prototype.composeRuneReply=function(t){var e=t[0];if(0===e&&-1!==this._itemId){var i=[this._itemId,0,0,null];WindowManager.instance.open(212,[[i],"合成成功",null,"恭喜您获得"])}CommonUtil.noticeError(e,"合成成功")},s=o,e.RuneComposeCtrl=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t._model=e.PeakDuelModel.instance,t}e=t.peakDuel||(t.peakDuel={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16786426,this.updateDianfeng),this.subscribe(16786427,this.updateDianfeng),this.subscribe(16786428,this.updateDianfengPlayer),this.subscribe(16786429,this.updateDianfengPerson),this.subscribe(16786430,this.updateDianfengPerson),this.subscribe(16786431,this.guessPlayerReply),this.subscribe(16786432,this.updateDianfengRank),this.subscribe(16786433,this.updateDianfengRank),this.onGlobal("BROADCAST_SCENE_OPEN_DAY_UPDATE",this.init),Laya.timer.once(2e3,this._model,this._model.checkAlert)},o.prototype.init=function(t){2361===t&&this.isOpen&&(this.getDianfeng(),this.getDianfengPerson(),this.getDianfengRank())},Object.defineProperty(o.prototype,"isOpen",{get:function(){return DungeonModel.instance.getSceneOpenDayById(2361)},enumerable:!0,configurable:!0}),o.prototype.getDianfeng=function(){this.publish(4194704,null)},o.prototype.updateDianfeng=function(t){t&&(this._model.dianfeng=t[0])},o.prototype.updateDianfengPlayer=function(t){t&&this._model.setPlayersByStageGroup(t)},o.prototype.getDianfengPerson=function(){this.publish(4194705,null)},o.prototype.updateDianfengPerson=function(t){t&&(this._model.mineInfo=t[0])},o.prototype.guessPlayer=function(t,e){void 0===e&&(e=this._model.groupIndex),this.publish(4194706,[t,e])},o.prototype.guessPlayerReply=function(t){var e=t[0];CommonUtil.noticeError(e,"支持成功")},o.prototype.getDianfengRank=function(){this.publish(4194707,null)},o.prototype.updateDianfengRank=function(t){t&&(this._model.ranks=t[0])},s=o,e.PeakDuelCtrl=s}(modules=modules||{}),function(n){var t,e,i,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}t=n.li_dong_store||(n.li_dong_store={}),i=n.core.BaseCtrl,s=n.notice.SystemNoticeManager,e=i,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16786849,this.FestivalMallBuyReply)},a.prototype.FestivalMallBuy=function(t,e,i){void 0===i&&(i=1),console.log("活动商城购买 类型："+t+" 数量："+i,e),this.publish(2106274,[t,e,i])},a.prototype.FestivalMallBuyReply=function(t){if(0===t[0])s.instance.addNotice("购买成功",!1);else{var e=t[1];if(42712===t[0])s.instance.addNotice("购买需要创角第"+e[0]+"天",!0);else if(42713===t[0]){var i=n.config.LilianRiseCfg.instance.getLilianNameByRiseLevel(e[0]);s.instance.addNotice("购买需要角色历练达到"+i,!0)}else 42714===t[0]?s.instance.addNotice("购买需要角色等级达到"+e[0],!0):CommonUtil.noticeError(t[0])}},o=a,t.LiDongStoreCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.stone||(t.stone={}),n=t.core.BaseCtrl,s=t.notice.SystemNoticeManager,o=t.common.CommonUtil,i=n,__extends(r,i),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16778016,this.infoReply),this.subscribe(16778017,this.infoReply),this.subscribe(16778018,this.inlayGem),this.subscribe(16778020,this.refineGem),this.subscribe(16778021,this.riseGem),this.subscribe(16778022,this.oneKeyRefineGemReply),this.onGlobal("PLAYER_WEAR_EQUIPS",this.updateEquip),this.onGlobal("PLAYER_EQUIPS_INITED",this.updateEquip),this.onGlobal("BAG_UPDATE",this.updateBag),this.onGlobal("BAG_DATA_GOT",this.updateBag),this.publish(2097752,null)},r.prototype.infoReply=function(t){e.StoneModel.instance.updataValue(t)},r.prototype.inlayGem=function(t){t[0]?o.noticeError(t[0]):(GlobalData.dispatcher.event("UP_MASTER"),GlobalData.dispatcher.event("UP_EFFECT"),s.instance.addNotice(0==e.StoneModel.instance.inlay?"镶嵌成功":"替换成功"),e.StoneModel.instance.setDotDis())},r.prototype.refineGem=function(t){t[0]?o.noticeError(t[0]):(s.instance.addNotice("升级成功"),GlobalData.dispatcher.event("UP_MASTER"),GlobalData.dispatcher.event("UP_EFFECT"),e.StoneModel.instance.setDotDis())},r.prototype.oneKeyRefineGemReply=function(t){t[0]?o.noticeError(t[0]):(0==t[1]?s.instance.addNotice("镶嵌成功"):1==t[1]?s.instance.addNotice("替换成功"):2==t[1]&&s.instance.addNotice("升级成功"),e.StoneModel.instance.setDotDis(),e.StoneModel.instance.oneKeyPit=t[2],GlobalData.dispatcher.event("UP_MASTER"),GlobalData.dispatcher.event("ONEKEY_UP_EFFECT"),GlobalData.dispatcher.event("STONE_SELECT_UPDATE",[t[3]||[]]))},r.prototype.riseGem=function(t){t[0]?o.noticeError(t[0]):(s.instance.addNotice("仙石大师升级成功"),e.StoneModel.instance.setDotDis())},r.prototype.updateEquip=function(){e.StoneModel.instance.setDotDis()},r.prototype.updateBag=function(){e.StoneModel.instance.setDotDis()},r.prototype.oneKeyHandler=function(t){this.publish(2097756,t)},a=r,e.StoneCtrl=a}(modules=modules||{}),function(t){var i,_,e,n;function s(){var i=this;this.schedule=-1,this.groupIndex=0,this.stageIndex=0,this.time=0,this._players=[],this.updateIds={},this._golds=[],this._times={},this.betTime=[],this.betconsume=[],e.instance.getCfgById(62002)[1].forEach(function(t,e){e%2==0?i.betTime.push(t):i.betconsume.push(t)})}i=t.peakDuel||(t.peakDuel={}),_=utils.TableUtils,e=t.config.BlendCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dianfeng",{set:function(t){var n=this;this.schedule=t[0],this.time=t[1];var e=t[2];if(!e)throw new Error("数据接收 DianfengFields字段 stages为空");e.forEach(function(t){var e=t[0],i=t[1];n._players[e]||(n._players[e]=[]),n._players[e]=i}),GlobalData.dispatcher.event("PEAK_DUEL_PLAYER_UPDATE")},enumerable:!0,configurable:!0}),s.prototype.calcIncome=function(t){if(!(0<=t&&t<=4))return 0;for(var e=0,i=0;i<=t;i++){var n=this._golds[i];if(n)for(var s=0;s<=2;s++)for(var o=0,a=this.getPlayersByStageGroup(i,s);o<a.length;o++){var r=a[o];if(r){var l=r[0],h=l[0];null!=n[h]&&(e+=this.calcResult(n[h],1===l[8],l[7]));var c=r[1];if(c){var p=c[0];null!=n[p]&&(e+=this.calcResult(n[p],1===c[8],c[7]))}}}}return e<0?0:Math.round(e)},s.prototype.calcResult=function(t,e,i){return e?t*i:t},s.prototype.checkAlert=function(){var e=this;if(-1===this.schedule&&i.PeakDuelCtrl.instance.isOpen&&t.funcOpen.FuncOpenModel.instance.getFuncIsOpen(129)){if(WindowManager.instance.isOpened(12))return void GlobalData.dispatcher.once("PANEL_CLOSED",this,function(t){12===t&&e.checkAlert()});CommonUtil.alert("温馨提示","&nbsp;&nbsp;本次巅峰斗法将于晚上19:30开始，请各位仙友准时参加。<br/>&nbsp;&nbsp;<span style='color:#ff3e3e'>为了不影响您斗法的战力,期间请尽量避免穿戴</span><span style='color:#ff3e3e;font-size:28px'>低战</span><span style='color:#ff3e3e'>装备、符文或者进行洗练哦。</span>",[null,"知道了"])}},Object.defineProperty(s.prototype,"stage",{get:function(){return-1===this.schedule?-1:Math.floor(this.schedule/2)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"state",{get:function(){return-1===this.schedule?-1:this.schedule%2},enumerable:!0,configurable:!0}),s.prototype.getPlayersByStageGroup=function(t,e){var i=this._players[t];if(!i)return[];for(var n=0,s=i;n<s.length;n++){var o=s[n];if(o[0]===e)return o[1]}throw new Error("stage---\x3e"+t+" group---\x3e"+e+" getPlayersByStageGroup 没找到对应信息")},s.prototype.setPlayersByStageGroup=function(t){var i=this;_.clear(this.updateIds);var e=t[0],n=t[1],s=t[2],o=s.map(function(t){var e=t[0];return i.updateIds[e]=t,e});if(this._players[e]){for(var a=0,r=this._players[e];a<r.length;a++){var l=r[a];if(l[0]===n){var h=l[1];if(!h)continue;for(var c=0,p=h.length;c<p;c++){var u=h[c];if(u){var d=u[0][0],y=o.indexOf(d);-1!==y&&(h[c][0]=s[y]);var g=u[1];if(g){var f=g[0];-1!==(y=o.indexOf(f))&&(h[c][1]=s[y])}}}}}GlobalData.dispatcher.event("PEAK_DUEL_PLAYER_UPDATE",[[e,n]])}},Object.defineProperty(s.prototype,"ranks",{get:function(){return this._ranks},set:function(t){this._ranks=t,GlobalData.dispatcher.event("PEAK_DUEL_RANK_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mineInfo",{set:function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e],s=n[0];this._golds[s]||(this._golds[s]={});var o=n[1];this._times[s]=o;for(var a=0,r=n[2];a<r.length;a++)for(var l=0,h=r[a][1];l<h.length;l++){var c=h[l],p=c[0];this._golds[s][p]=c[1],GlobalData.dispatcher.event("PEAK_DUEL_PLAYER_INFO_UPDATE",[p])}}GlobalData.dispatcher.event("PEAK_DUEL_INFO_UPDATE")},enumerable:!0,configurable:!0}),s.prototype.getGoldById=function(t,e){void 0===e&&(e=this.stageIndex);var i=this._golds[e];if(!i)return 0;var n=i[t];return n||0},s.prototype.getTimeByStage=function(t){var e=this._times[t];return e||0},n=s,i.PeakDuelModel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){this._auto=!1,this.maxSeekCount=n.instance.getCfgById(69001)[1][0],this.maxHelpCount=n.instance.getCfgById(69001)[1][1]}e=t.mission||(t.mission={}),i=t.redPoint.RedPointCtrl,n=t.config.BlendCfg,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"curLv",{get:function(){return this._curLv},set:function(t){this._curLv=t,GlobalData.dispatcher.event("MISSION_UPDATE_LV")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"finishLv",{get:function(){return this._curLv-1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"curWare",{get:function(){return this._curWare},set:function(t){this._curWare=t,GlobalData.dispatcher.event("MISSION_UPDATE_WARE")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"awardLvs",{get:function(){return this._awardLvs},set:function(t){this._awardLvs=t,GlobalData.dispatcher.event("MISSION_UPDATE_AWARD_LV"),i.instance.setRPProperty("missionRP",t&&0<t.length)},enumerable:!0,configurable:!0}),o.prototype.getCopyAwardReply=function(){GlobalData.dispatcher.event("MISSION_UPDATE_AWARD_LV")},Object.defineProperty(o.prototype,"auto",{get:function(){return this._auto},set:function(t){this._auto=t,GlobalData.dispatcher.event("MISSION_UPDATE_AUTO")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"updateTianguanSeekhelp",{set:function(t){this._seekInfo=t,GlobalData.dispatcher.event("MISSION_SEEKHELP_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"seekHelpTimes",{get:function(){return this._seekInfo?this._seekInfo[0]:-1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"assistHelpTimes",{get:function(){return this._seekInfo?this._seekInfo[1]:-1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"state",{get:function(){if(!this._seekInfo)return-1;var t=this._seekInfo[2];return 0===t?t:1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endTime",{get:function(){return this._seekInfo?this._seekInfo[3]:-1},enumerable:!0,configurable:!0}),s=o,e.MissionModel=s}(modules=modules||{}),function(e){var i,t,n,s,o,a,r,l,h;function c(){return t.call(this)||this}i=e.ladder||(e.ladder={}),n=e.core.BaseCtrl,s=e.mission.MissionModel,o=e.peakDuel.PeakDuelCtrl,a=e.peakDuel.PeakDuelModel,r=e.notice.SystemNoticeManager,l=e.teamBattle.TeamBattleCtrl,t=n,__extends(c,t),Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.setup=function(){this.subscribe(16781617,this.updateTiantiScore),this.subscribe(16781618,this.updateTiantiJoinAwardStats),this.subscribe(16781619,this.updateTiantiFeatAwardStates),this.subscribe(16781620,this.updateTiantiTimes),this.subscribe(16781616,this.getTiantiReply),this.subscribe(16781621,this.getTiantiRankReply),this.subscribe(16781622,this.getTiantiJoinAwardReply),this.subscribe(16781624,this.updateTiantiHonor),this.subscribe(16781625,this.updateTiantiScoreAward),this.subscribe(16781626,this.updateNotEnterTianti),this.subscribe(16777367,this.updateEnemyEnterScene),this.getTianti(),this.onGlobal("FUNC_OPEN_UPDATE",i.LadderModel.instance.funOpenGetSprintRankInfo,i.LadderModel.instance),this.onGlobal("DUNGEON_SCENE_STATE_UPDATE",i.LadderModel.instance.judgeLadderJoinAwardRP,i.LadderModel.instance)},c.prototype.updateTiantiScore=function(t){i.LadderModel.instance.tiantiScore=t[0]},c.prototype.updateTiantiJoinAwardStats=function(t){i.LadderModel.instance.joinAwardStates=t[0]},c.prototype.updateTiantiFeatAwardStates=function(t){i.LadderModel.instance.featAwardStates=t[0]},c.prototype.updateTiantiTimes=function(t){i.LadderModel.instance.times=t[0]},c.prototype.getTianti=function(){this.publish(2101352,null)},c.prototype.getTiantiReply=function(t){i.LadderModel.instance.ladderInfo=t[0]},c.prototype.getTiantiJoinAward=function(t){this.publish(2101353,[t])},c.prototype.getTiantiJoinAwardReply=function(t){e.common.CommonUtil.noticeError(t[0])},c.prototype.getTiantiRank=function(){this.publish(7340732,null)},c.prototype.getTiantiRankReply=function(t){i.LadderModel.instance.ranks=t[0]},c.prototype.updateTiantiHonor=function(t){PlayerModel.instance.tiantiHonor=t[0]},c.prototype.reqBeginMatch=function(){s.instance.auto&&(s.instance.auto=!1),l.instance.reqBeginMatch(2171)},c.prototype.reqCancelMatch=function(){l.instance.reqCancelMatch()},c.prototype.updateTiantiScoreAward=function(t){i.LadderModel.instance.tiantiScoreAward=t},c.prototype.updateNotEnterTianti=function(){r.instance.addNotice("网络超时，进入场景失败，本次不扣除挑战次数",!0)},c.prototype.updateEnemyEnterScene=function(){WindowManager.instance.close(474)},c.prototype.canOpenPanel=function(t){if(o.instance.isOpen){if(10===a.instance.schedule){if(425!==t)return WindowManager.instance.open(425),!0}else if(421!==t)return WindowManager.instance.open(421),!0}else if(203!==t)return WindowManager.instance.open(203),!0;return!1},h=c,i.LadderCtrl=h}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){this._totalTimes=0,this._remainTimes=0,this._buyTimes=0,this._addTimes=0,this._nameYunMeng="云梦密令:",this.totalCiShu=n.instance.getCfgById(29101)[1][0];var t=i.instance.getItemCfgById(92630001);t&&(this._nameYunMeng=t[1]+":")}e=t.yunmeng||(t.yunmeng={}),i=t.config.ItemMaterialCfg,n=t.config.BlendCfg,s=t.config.MonsterResCfg,o=t.dungeon.DungeonModel,a=t.funcOpen.FuncOpenModel,Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"allBossJudgeAward",{get:function(){return null==this._allBossJudgeAward&&(this._allBossJudgeAward=new Array),this._allBossJudgeAward.shift()},set:function(t){if(null==this._allBossJudgeAward&&(this._allBossJudgeAward=new Array),t){var e=t[2];this._allBossJudgeAward.push(t),3==e?GlobalData.dispatcher.event("YUNMENGMIJING_JUDGE_AWARD_UPDATE"):1==e&&GlobalData.dispatcher.event("YUNMENGMIJING_JUDGE_AWARD_FINALLY")}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"getAllBossJudgeAward",{get:function(){return null==this._allBossJudgeAward&&(this._allBossJudgeAward=new Array),this._allBossJudgeAward},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"totalCiShu",{get:function(){return this._totalCiShu},set:function(t){this._totalCiShu=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"totalTimes",{get:function(){return this._totalTimes},set:function(t){this._totalTimes=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"remainTimes",{get:function(){return this._remainTimes},set:function(t){this._remainTimes=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"buyTimes",{get:function(){return this._buyTimes},set:function(t){this._buyTimes=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"addTimes",{get:function(){return this._addTimes},set:function(t){this._addTimes=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ItemDate",{get:function(){return this._ItemDate},set:function(t){this._ItemDate=t},enumerable:!0,configurable:!0}),l.prototype.getBossSeversInfoById=function(t){return o.instance.getBossInfoById(t)},l.prototype.getCfgByid=function(t){return s.instance.getCfgById(t)},Object.defineProperty(l.prototype,"selectTargetPos",{get:function(){return this._selectTargetPos},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lastBossOcc",{get:function(){return this._lastBossOcc},enumerable:!0,configurable:!0}),l.prototype.setSelectTarget=function(t,e){PlayerModel.instance.selectTarget(1,t),this.bossTag=!1,this._lastBossOcc=t,o.instance.getBossInfoById(t)&&(this._selectTargetPos=o.instance.getBossInfoById(t)[3])},l.prototype.showDrawNum=function(){GlobalData.dispatcher.event("YUNMENGMIJING_UPDATE")},l.prototype.getState=function(){if(!a.instance.getFuncIsOpen(142))return!1;if(o.instance.sceneStates){var t=o.instance.getCopySceneStateByType(21);if(t)return 2==t[2]&&0<l.instance.remainTimes}return!1},r=l,e.YunMengMiJingModel=r}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){var t=i.call(this)||this;return t.destin=new n(180,60),t}e=t.yunmeng||(t.yunmeng={}),n=laya.maths.Point,s=t.core.BaseCtrl,o=t.redPoint.RedPointCtrl,a=t.yunmeng.YunMengMiJingModel,r=t.funcOpen.FuncOpenModel,i=s,__extends(h,i),Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.setup=function(){this.subscribe(16781916,this.GetCloudlandReply),this.subscribe(16781917,this.UpdateCloudland),this.subscribe(16781918,this.UpdateDropRecord),this.onGlobal("DUNGEON_SCENE_STATE_UPDATE",this.updateRP),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenGetSprintRankInfo),this.subscribe(16777361,this.BossJudgeAward),this.GetCloudland()},h.prototype.GetCloudland=function(){this.publish(2101652,null)},h.prototype.GetCloudlandReply=function(t){a.instance.totalTimes=t[0][0],a.instance.remainTimes=t[0][1],a.instance.buyTimes=t[0][2],a.instance.addTimes=t[0][3],this.updateRP()},h.prototype.UpdateCloudland=function(t){a.instance.totalTimes=t[0][0],a.instance.remainTimes=t[0][1],a.instance.buyTimes=t[0][2],a.instance.addTimes=t[0][3],this.updateRP()},h.prototype.UpdateDropRecord=function(t){a.instance.ItemDate=t[0]},h.prototype.funOpenGetSprintRankInfo=function(t){for(var e=0;e<t.length;e++)if(142==t[e]&&r.instance.getFuncIsOpen(142))return void this.updateRP()},h.prototype.updateRP=function(){o.instance.setRPProperty("yunMengBossRP",a.instance.getState()),a.instance.showDrawNum()},h.prototype.BossJudgeAward=function(t){a.instance.allBossJudgeAward=t},l=h,e.YunMengMiJingCtrl=l}(modules=modules||{}),function(l){var h,e,t,i,c,n,p,s;function o(){var t=e.call(this)||this;return t._isRegisterAutoResolve={},t._maxCount=n.instance.getCfgById(10008)[1][0],t}h=l.rune||(l.rune={}),t=l.core.BaseCtrl,i=l.notice.SystemNoticeManager,c=l.bag.BagModel,n=l.config.BlendCfg,p=l.common.CommonUtil,e=t,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16780316,this.getRuneInfoReply),this.subscribe(16780320,this.updateRuneInfo),this.subscribe(16780317,this.inlayRuneReply),this.subscribe(16780321,this.resolveRuneReply),this.subscribe(16780319,this.runeRefineReply),this.subscribe(16780318,this.takeOffRuneReply),this.subscribe(16787826,this.getRuneDictionaryInfoReply),this.subscribe(16787827,this.runeDictionaryAddStarReply),this.subscribe(16787828,this.runeDictionaryRiseAddGradeReply),this.subscribe(16787829,this.runeDictionarySubStarReply),this.onGlobal("BAG_UPDATE",this.autoResolveRune),this.publish(2099852,null),this.publish(2107162,null)},o.prototype.getRuneInfoReply=function(t){h.RuneModel.instance.exp=t[1],h.RuneModel.instance.saveData(t[0]),h.RuneModel.instance.rflags=t[2],this._isRegisterAutoResolve={};for(var e=0,i=t[2].length;e<i;e++)this._isRegisterAutoResolve[t[2][e]]=!0;h.RuneModel.instance.checkRP(),h.RuneModel.instance.checkRuneResolveRP()},o.prototype.updateRuneInfo=function(t){h.RuneModel.instance.exp=t[1],h.RuneModel.instance.saveData(t[0]),h.RuneModel.instance.checkRP(),h.RuneModel.instance.checkRuneResolveRP()},o.prototype.inlayRune=function(t){this.publish(2099853,t)},o.prototype.inlayRuneReply=function(t){t[0]?p.noticeError(t[0]):(i.instance.addNotice("镶嵌成功"),GlobalData.dispatcher.event("RUNE_INALY_SUCCEED",h.RuneModel.instance.currClickPit))},o.prototype.getRuneDictionaryInfoReply=function(t){console.log("获取符文宝典信息返回.................",t),h.RuneModel.instance.getRuneDictionaryInfoReply(t)},o.prototype.runeDictionaryAddStarReply=function(t){t[0]||(h.RuneModel.instance.isSccess=!0,GlobalData.dispatcher.event("RUNE_UPDATE_STAR")),p.noticeError(t[0])},o.prototype.runeDictionaryRiseAddGradeReply=function(t){t[0]?p.noticeError(t[0]):i.instance.addNotice("升阶成功")},o.prototype.runeDictionarySubStarReply=function(t){p.noticeError(t[0])},o.prototype.takeOffRune=function(t){this.publish(2099858,[t])},o.prototype.takeOffRuneReply=function(t){var e=t[0];p.noticeError(e,"成功卸下符文")},o.prototype.runeRefine=function(t){this.publish(2099854,t)},o.prototype.runeRefineReply=function(t){t[0]?p.noticeError(t[0]):i.instance.addNotice("升级成功")},o.prototype.resolveRune=function(t){this.publish(2099855,[t])},o.prototype.resolveRuneReply=function(t){t[0]?p.noticeError(t[0]):GlobalData.dispatcher.event("RUNE_RESOLVE_SUCCEED")},o.prototype.setResolveRuneFlag=function(t){this.publish(2099856,t),this._isRegisterAutoResolve={};for(var e=0,i=t[0].length;e<i;e++)this._isRegisterAutoResolve[t[0][e]]=!0},o.prototype.autoResolveRune=function(){if(h.RuneModel.instance.checkRP(),h.RuneModel.instance.checkRuneResolveRP(),this._isRegisterAutoResolve[0]){var t=[],e=c.instance.getItemsByBagId(5);if(e.length>=this._maxCount){for(var i=0,n=e.length;i<n;i++){var s=p.getItemQualityById(e[i][0]),o=p.getStoneTypeById(e[i][0]);if(this._isRegisterAutoResolve[s-1]||o==l.config.ItemRuneCfg.instance.resolveRuneSubTypeId){var a=e[i][2],r=e[i][1];t.push([a,r])}}this.resolveRune(t)}}},o.prototype.runeDictionaryAddStar=function(t){this.publish(2107163,[t])},o.prototype.runeDictionaryRiseAddGrade=function(){this.publish(2107164,null)},o.prototype.runeDictionarySubStar=function(t){this.publish(2107165,[t])},s=o,h.RuneCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.rune_copy||(t.rune_copy={}),n=t.core.BaseCtrl,s=t.common.CommonUtil,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16777350,this.updateRuneCopy),this.subscribe(16777351,this.updateRuneCopy),this.subscribe(16777352,this.getRuneEveryDayAwardReply),this.subscribe(16777353,this.updateRuneDial),this.subscribe(16777354,this.updateRuneDial),this.subscribe(16777355,this.startRuneDialReply),this.publish(2097168,null),this.publish(2097170,null),this.onGlobal("PLAYER_UPDATE_FIGHT",e.RuneCopyModel.instance.checkRP,e.RuneCopyModel.instance)},a.prototype.updateRuneCopy=function(t){e.RuneCopyModel.instance.saveDate(t)},a.prototype.getRuneEveryDayAward=function(){this.publish(2097169,null)},a.prototype.getRuneEveryDayAwardReply=function(t){s.noticeError(t[0])},a.prototype.startRuneDial=function(){this.publish(2097171,null)},a.prototype.updateRuneDial=function(t){e.RuneCopyModel.instance.updateRuneDial(t)},a.prototype.startRuneDialReply=function(t){t[1]?s.noticeError(t[1]):e.RuneCopyModel.instance.dialResult=t[0]},o=a,e.RuneCopyCtrl=o}(modules=modules||{}),function(t){var o,e,i,a,n;function s(){return e.call(this)||this}o=t.festival||(t.festival={}),i=t.core.BaseCtrl,a=t.customData.CustomDataCtrl,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this.subscribe(16786826,this.getFestInfoReply),this.subscribe(16786827,this.updateFestCostTotal),this.subscribe(16786830,this.drawFestLoginReply),this.subscribe(16786831,this.drawFestConLoginReply),this.subscribe(16786832,this.drawFestDayRechReply),this.subscribe(16786833,this.swapFestWorldReply),this.subscribe(16786828,this.updateFestSwap),this.subscribe(16786829,this.updateFestInfo),this.subscribe(16786850,this.UpdateFestivalMallBuyInfo),this.subscribe(16786851,this.updateFestivalConsume),this.subscribe(16786852,this.getFestivalConsumeRankReply),this.onGlobal("FESTIVAL_HINT_UPDATE",this.updateHint,this,[5]),this.onGlobal("HALLOWEEN_HINT_UPDATE",this.updateHint,this,[6]),this.onGlobal("MORI_HINT_UPDATE",this.updateHint,this,[9]),this.onGlobal("DOG_FESTIVAL_HINT_UPDATE",this.updateHint,this,[7]),this.onGlobal("GANEN_HINT_UPDATE",this.updateHint,this,[8]),this.onGlobal("NEWYEAR_FESTIVAL_HINT_UPDATE",this.updateHint,this,[10]),this.onGlobal("LANTEM_FESTIVAL_HINT_UPDATE",this.updateHint,this,[11]),this.onGlobal("DRAGONBLESSING_HINT_UPDATE",this.updateHint,this,[13]),this.onGlobal("WOMENSDAY_FESTIVAL_HINT_UPDATE",this.updateHint,this,[14]),this.onGlobal("ARBORDAY_FESTIVAL_HINT_UPDATE",this.updateHint,this,[16]),this.onGlobal("PUBLIC_SURVEY_FESTIVAL_HINT_UPDATE",this.updateHint,this,[18]),this.onGlobal("MOTHERS_DAY_FESTIVAL_HINT_UPDATE",this.updateHint,this,[20]),this.onGlobal("BAR_DAY_FESTIVAL_HINT_UPDATE",this.updateHint,this,[23]),this.onGlobal("BAR_DAY_FESTIVAL_HINT_UPDATE",this.updateHint,this,[24]),this.onGlobal("BAR_DAY_FESTIVAL_HINT_UPDATE",this.updateHint,this,[43]),this.onGlobal("ZHIZHEN_FESTIVAL_HINT_UPDATE",this.updateHint,this,[31]),this.onGlobal("PERFECTESTTEN_FESTIVAL_HINT_UPDATE",this.updateHint,this,[46]),this.onGlobal("SPRING_SCENERY_FESTIVAL_HINT_UPDATE",this.updateHint,this,[47]),this.onGlobal("BAG_UPDATE",this.checkRP),this.getFestInfo(),this.getFestivalConsumeRank(),a.instance.getCustomizeData([44])},s.prototype.getFestInfo=function(){console.log("请求节日活动信息................."),this.publish(2106262,null)},s.prototype.getFestInfoReply=function(t){console.log("请求【节日活动】信息返回.................",t),t&&(o.FestivalModel.instance.getFestInfoReply(t),this.getCustomizeData())},s.prototype.getCustomizeData=function(){o.FestivalModel.instance.getDelayTimeStamp(1)>GlobalData.serverTime&&a.instance.getCustomizeData([5]),o.FestivalModel.instance.getDelayTimeStamp(2)>GlobalData.serverTime&&a.instance.getCustomizeData([6]),o.FestivalModel.instance.getDelayTimeStamp(8)>GlobalData.serverTime&&a.instance.getCustomizeData([9]),o.FestivalModel.instance.getDelayTimeStamp(4)>GlobalData.serverTime&&a.instance.getCustomizeData([7]),o.FestivalModel.instance.getDelayTimeStamp(6)>GlobalData.serverTime&&a.instance.getCustomizeData([8]),o.FestivalModel.instance.getDelayTimeStamp(17)>GlobalData.serverTime&&a.instance.getCustomizeData([10]),o.FestivalModel.instance.getDelayTimeStamp(22)>GlobalData.serverTime&&a.instance.getCustomizeData([16]),o.FestivalModel.instance.getDelayTimeStamp(25)>GlobalData.serverTime&&a.instance.getCustomizeData([18]),o.FestivalModel.instance.getDelayTimeStamp(48)>GlobalData.serverTime&&a.instance.getCustomizeData([31]),o.FestivalModel.instance.getDelayTimeStamp(65)>GlobalData.serverTime&&a.instance.getCustomizeData([46]),o.FestivalModel.instance.getDelayTimeStamp(18)>GlobalData.serverTime&&a.instance.getCustomizeData([11]),o.FestivalModel.instance.getDelayTimeStamp(21)>GlobalData.serverTime&&a.instance.getCustomizeData([14]),o.FestivalModel.instance.getDelayTimeStamp(20)>GlobalData.serverTime&&a.instance.getCustomizeData([13]),o.FestivalModel.instance.getDelayTimeStamp(30)>GlobalData.serverTime&&a.instance.getCustomizeData([20]),o.FestivalModel.instance.getDelayTimeStamp(37)>GlobalData.serverTime&&a.instance.getCustomizeData([24]),o.FestivalModel.instance.getDelayTimeStamp(64)>GlobalData.serverTime&&a.instance.getCustomizeData([43]),o.FestivalModel.instance.getDelayTimeStamp(34)>GlobalData.serverTime&&a.instance.getCustomizeData([23]),o.FestivalModel.instance.getDelayTimeStamp(67)>GlobalData.serverTime&&a.instance.getCustomizeData([47])},s.prototype.getFestivalConsumeRank=function(){console.log("获取节日消费排行榜数据................."),this.publish(4194809,null)},s.prototype.getFestivalConsumeRankReply=function(t){console.log("获取节日消费排行榜数据返回*.................",t),o.FestivalModel.instance.getFestivalConsumeRankReply(t)},s.prototype.updateFestivalConsume=function(t){console.log("更新节日排行消费.................",t),o.FestivalModel.instance.updateFestivalConsume(t)},s.prototype.updateFestCostTotal=function(t){console.log("更新节日累计消耗*.................",t),o.FestivalModel.instance.updateFestCostTotal(t)},s.prototype.UpdateFestivalMallBuyInfo=function(t){console.log("更新节日商城信息*.................",t),o.FestivalModel.instance.updateFestivalMallBuyInfo(t)},s.prototype.drawFestivalLogin=function(t,e){this.publish(2106263,[t,e])},s.prototype.drawFestLoginReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.updateFestSwap=function(t){t&&(o.FestivalModel.instance.updateFestSwap(t),this.getCustomizeData())},s.prototype.updateFestInfo=function(t){console.log("更新 【节日活动】 信息.................",t),t&&(o.FestivalModel.instance.updateFestInfo(t),this.getCustomizeData())},s.prototype.drawFestConLogin=function(t){this.publish(2106264,[t])},s.prototype.drawFestConLoginReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.drawFestDailyRecharge=function(t){this.publish(2106265,[t])},s.prototype.drawFestDayRechReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.swapFestWorld=function(t,e,i){this.publish(2106266,[t,e,i])},s.prototype.swapFestWorldReply=function(t){CommonUtil.noticeError(t[0])},s.prototype.saveHint=function(t,e,i){var n=[];if(5===t?n=o.FestivalModel.instance.hintArr:6===t||(7===t?n=o.FestivalModel.instance.hintArr1:10===t?n=o.FestivalModel.instance.hintArr2:16===t?n=o.FestivalModel.instance.hintArr6:18===t?n=o.FestivalModel.instance.hintArr8:12===t?n=o.FestivalModel.instance.hintArr4:17===t?n=o.FestivalModel.instance.hintArr7:19===t?n=o.FestivalModel.instance.hintArr9:11===t?n=o.FestivalModel.instance.hintArr3:14===t?n=o.FestivalModel.instance.hintArr5:20===t?n=o.FestivalModel.instance.hintArr10:23===t?n=o.FestivalModel.instance.hintArr12:47===t?n=o.FestivalModel.instance.hintArr19:24===t?n=o.FestivalModel.instance.hintArr13:43===t?n=o.FestivalModel.instance.hintArr17:21===t?n=o.FestivalModel.instance.hintArr11:25===t?n=o.FestivalModel.instance.hintArr14:31===t?n=o.FestivalModel.instance.hintArr16:46===t&&(n=o.FestivalModel.instance.hintArr18)),!i||n&&-1!==n.indexOf(e)){if(!i&&n){var s=n.indexOf(e);-1!==s&&(n.splice(s,1),a.instance.setCustomData(t,n))}}else(n=n||[]).push(e),a.instance.setCustomData(t,n)},s.prototype.updateHint=function(t){o.FestivalModel.instance.updateHint(t)},s.prototype.checkRP=function(){o.FestivalModel.instance.updateHint(5),o.FestivalModel.instance.updateHint(6),o.FestivalModel.instance.updateHint(7),o.FestivalModel.instance.updateHint(8),o.FestivalModel.instance.updateHint(9),o.FestivalModel.instance.updateHint(10),o.FestivalModel.instance.updateHint(11),o.FestivalModel.instance.updateHint(14),o.FestivalModel.instance.updateHint(13),o.FestivalModel.instance.updateHint(16),o.FestivalModel.instance.updateHint(18),o.FestivalModel.instance.updateHint(20),o.FestivalModel.instance.updateHint(23),o.FestivalModel.instance.updateHint(47),o.FestivalModel.instance.updateHint(24),o.FestivalModel.instance.updateHint(43),o.FestivalModel.instance.updateHint(31),o.FestivalModel.instance.updateHint(46)},n=s,o.FestivalCtrl=n}(modules=modules||{}),function(a){var t,e,r,i,n;function s(){var t=e.call(this)||this;return t._playerId=PlayerModel.instance.actorId,t}t=a.update_alert||(a.update_alert={}),r=a.config.BlendCfg,i=a.core.BaseCtrl,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){this._outTime=GlobalData.serverTime,this._playerLever=PlayerModel.instance.level;var t=1===r.instance.getCfgById(68001)[1][1],e=r.instance.getCfgById(68001)[1][0];if(this._htmlText=r.instance.getCfgById(68001)[2][0],t&&this._playerLever>=e){var i=(GlobalData.serverTime-GlobalData.timeZoneOffset)/864e5,n=localStorage.getItem(this._playerId+"FirstLogin");if(n&&0<n.length){var s=parseInt(n),o=Math.floor((s-GlobalData.timeZoneOffset)/864e5);1<=Math.floor(i)-o&&(a.rehead.ReheadModel.instance.getSetTipsData()[2]?(localStorage.setItem(this._playerId+"FirstLogin",""+this._outTime),WindowManager.instance.open(1302)):console.log("阻止提示。。。版本预告2",a.rehead.ReheadModel.instance.getSetTipsData()))}else a.rehead.ReheadModel.instance.getSetTipsData()[2]?(localStorage.setItem(this._playerId+"FirstLogin",""+this._outTime),WindowManager.instance.open(1302)):console.log("阻止提示。。。版本预告2",a.rehead.ReheadModel.instance.getSetTipsData())}},n=s,t.UpdateAlertCtrl=n}(modules=modules||{}),function(u){var a,t,e,d,y,g,i;function n(){return t.call(this)||this}a=u.national_day_treasure||(u.national_day_treasure={}),e=u.core.BaseCtrl,d=laya.ui.Image,y=laya.maths.Point,g=u.common.CommonUtil,t=e,__extends(n,t),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setup=function(){this.subscribe(16786840,this.UpdateNationalXunbao),this.subscribe(16786841,this.GetNationalXunbaoRankReply),this.subscribe(16786842,this.GetNationalXunbaoScoreAwardReply),this.subscribe(16786843,this.GetNationalXunbaoScoreListReply),this.subscribe(16786844,this.UpdateNationalXunbaoScoreList),this.subscribe(16786846,this.UpdateNationalXunbaoState),this.subscribe(16786847,this.GetNationalXunbaoScoreAndStateReply),this.subscribe(16786848,this.UpdateNationalXunbaoScore),this.onGlobal("ZXIANYU_EFFNATIONALDAY_TREASURE_EFFECTECT",this.itemEffect),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("BAG_UPDATE",this.setRP),a.NationalDayTreasureModel.instance,this.getNationalXunbaoRank(),this.GetNationalXunbaoScoreList(),this.GetNationalXunbaoScoreAndState()},n.prototype.setRP=function(){a.NationalDayTreasureModel.instance.setRP()},n.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)t[e]},n.prototype.GetNationalXunbaoScoreAndState=function(){this.publish(4194808,[1])},n.prototype.GetNationalXunbaoBroadcastRecords=function(){this.publish(4194807,[1])},n.prototype.GetNationalXunbaoScoreList=function(){this.publish(4194806,[1])},n.prototype.getNationalXunbaoRank=function(){this.publish(4194804,[1])},n.prototype.getNationalXunbaoScoreAward=function(){this.publish(4194805,[1])},n.prototype.festivalNationalXunbao=function(t){this.publish(2106273,[1,t])},n.prototype.UpdateNationalXunbao=function(t){for(var e=t[0],i=t[1],n=0;n<i.length;n++){var s=i[n];if(s)if(1===e)o=0<(o=a.NationalDayTreasureModel.instance._myXunbaoNote.length)?o:0,a.NationalDayTreasureModel.instance._myXunbaoNote[o]=s;else if(4===e)o=0<(o=u.single_dog_treasure.SingleDogTreasureModel.instance._myXunbaoNote.length)?o:0,u.single_dog_treasure.SingleDogTreasureModel.instance._myXunbaoNote[o]=s;else if(e===u.festival.FestivalModel.instance.GrainFullType)o=0<(o=u.grain_full_treasure.GrainFullTreasureModel.instance._myXunbaoNote.length)?o:0,u.grain_full_treasure.GrainFullTreasureModel.instance._myXunbaoNote[o]=s;else if(e===u.festival.FestivalModel.instance.SpaceTravelType)o=0<(o=u.space_travel_treasure.SpaceTravelTreasureModel.instance._myXunbaoNote.length)?o:0,u.space_travel_treasure.SpaceTravelTreasureModel.instance._myXunbaoNote[o]=s;else if(e===u.festival.FestivalModel.instance.ChildrensDayType)o=0<(o=u.childrens_day_treasure.ChildrensDayTreasureModel.instance._myXunbaoNote.length)?o:0,u.childrens_day_treasure.ChildrensDayTreasureModel.instance._myXunbaoNote[o]=s;else if(e===u.festival.FestivalModel.instance.AnniversaryDayType){var o;o=0<(o=u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._myXunbaoNote.length)?o:0,u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._myXunbaoNote[o]=s}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MY")},n.prototype.GetNationalXunbaoRankReply=function(t){console.log("获取 活動 寻宝排行返回...............:   ",t);var e=t[0],i=t[1];i&&(1===e?a.NationalDayTreasureModel.instance.getInfoMyNodeList(i):4===e?u.single_dog_treasure.SingleDogTreasureModel.instance.getInfoMyNodeList(i):e===u.festival.FestivalModel.instance.GrainFullType?u.grain_full_treasure.GrainFullTreasureModel.instance.getInfoMyNodeList(i):e===u.festival.FestivalModel.instance.SpaceTravelType?u.space_travel_treasure.SpaceTravelTreasureModel.instance.getInfoMyNodeList(i):e===u.festival.FestivalModel.instance.ChildrensDayType?u.childrens_day_treasure.ChildrensDayTreasureModel.instance.getInfoMyNodeList(i):e===u.festival.FestivalModel.instance.AnniversaryDayType&&u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance.getInfoMyNodeList(i))},n.prototype.GetNationalXunbaoScoreListReply=function(t){console.log("获取 活動 寻宝积分档位列表 返回...............:   ",t);var e=t[0],i=t[1];i&&(1===e?a.NationalDayTreasureModel.instance.setRewardList(i):4===e?u.single_dog_treasure.SingleDogTreasureModel.instance.setRewardList(i):e===u.festival.FestivalModel.instance.GrainFullType?u.grain_full_treasure.GrainFullTreasureModel.instance.setRewardList(i):e===u.festival.FestivalModel.instance.SpaceTravelType?u.space_travel_treasure.SpaceTravelTreasureModel.instance.setRewardList(i):e===u.festival.FestivalModel.instance.ChildrensDayType?u.childrens_day_treasure.ChildrensDayTreasureModel.instance.setRewardList(i):e===u.festival.FestivalModel.instance.AnniversaryDayType&&u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance.setRewardList(i))},n.prototype.UpdateNationalXunbaoScoreList=function(t){console.log("更新 活動 寻宝积分档位列表...............:   ",t);var e=t[0],i=t[1];i&&(1===e?a.NationalDayTreasureModel.instance.setRewardList(i):4===e?u.single_dog_treasure.SingleDogTreasureModel.instance.setRewardList(i):e===u.festival.FestivalModel.instance.GrainFullType?u.grain_full_treasure.GrainFullTreasureModel.instance.setRewardList(i):e===u.festival.FestivalModel.instance.SpaceTravelType?u.space_travel_treasure.SpaceTravelTreasureModel.instance.setRewardList(i):e===u.festival.FestivalModel.instance.ChildrensDayType?u.childrens_day_treasure.ChildrensDayTreasureModel.instance.setRewardList(i):e===u.festival.FestivalModel.instance.AnniversaryDayType&&u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance.setRewardList(i))},n.prototype.GetNationalXunbaoScoreAwardReply=function(t){console.log("活動 寻宝 领取国庆寻宝积分奖励返回...............:   ",t);var e=t[0],i=t[2];if(0==e){var n=new Array;if(i)for(var s=0;s<i.length;s++){var o=i[s];o&&n.push([o[0],o[1],0,null])}WindowManager.instance.open(212,[n,"恭喜获得",!0,"恭喜您获得",!1,!0])}else g.noticeError(t[0])},n.prototype.UpdateNationalXunbaoState=function(t){console.log("更新 活動 寻宝状态...............:   ",t);var e=t[0],i=t[1],n=t[2],s=!1;1===e?(a.NationalDayTreasureModel.instance._state!=i&&(s=!0),a.NationalDayTreasureModel.instance._state=i,a.NationalDayTreasureModel.instance._restTm=n):4===e?(u.single_dog_treasure.SingleDogTreasureModel.instance._state!=i&&(s=!0),u.single_dog_treasure.SingleDogTreasureModel.instance._state=i,u.single_dog_treasure.SingleDogTreasureModel.instance._restTm=n):e===u.festival.FestivalModel.instance.GrainFullType?(u.grain_full_treasure.GrainFullTreasureModel.instance._state!=i&&(s=!0),u.grain_full_treasure.GrainFullTreasureModel.instance._state=i,u.grain_full_treasure.GrainFullTreasureModel.instance._restTm=n):e===u.festival.FestivalModel.instance.SpaceTravelType?(u.space_travel_treasure.SpaceTravelTreasureModel.instance._state!=i&&(s=!0),u.space_travel_treasure.SpaceTravelTreasureModel.instance._state=i,u.space_travel_treasure.SpaceTravelTreasureModel.instance._restTm=n):e===u.festival.FestivalModel.instance.ChildrensDayType?(u.childrens_day_treasure.ChildrensDayTreasureModel.instance._state!=i&&(s=!0),u.childrens_day_treasure.ChildrensDayTreasureModel.instance._state=i,u.childrens_day_treasure.ChildrensDayTreasureModel.instance._restTm=n):e===u.festival.FestivalModel.instance.AnniversaryDayType&&(u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._state!=i&&(s=!0),u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._state=i,u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._restTm=n),s&&GlobalData.dispatcher.event("NATIONALDAY_TREASURE_KUA_TIAN_UPDATE"),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},n.prototype.GetNationalXunbaoScoreAndStateReply=function(t){console.log("获取 活動 寻宝积分和状态...............:   ",t);var e=t[0],i=t[1],n=t[2],s=t[3];1===e?(a.NationalDayTreasureModel.instance._state=i,a.NationalDayTreasureModel.instance._restTm=n,a.NationalDayTreasureModel.instance._score=s):4===e?(u.single_dog_treasure.SingleDogTreasureModel.instance._state=i,u.single_dog_treasure.SingleDogTreasureModel.instance._restTm=n,u.single_dog_treasure.SingleDogTreasureModel.instance._score=s):e===u.festival.FestivalModel.instance.GrainFullType?(u.grain_full_treasure.GrainFullTreasureModel.instance._state=i,u.grain_full_treasure.GrainFullTreasureModel.instance._restTm=n,u.grain_full_treasure.GrainFullTreasureModel.instance._score=s):e===u.festival.FestivalModel.instance.SpaceTravelType?(u.space_travel_treasure.SpaceTravelTreasureModel.instance._state=i,u.space_travel_treasure.SpaceTravelTreasureModel.instance._restTm=n,u.space_travel_treasure.SpaceTravelTreasureModel.instance._score=s):e===u.festival.FestivalModel.instance.ChildrensDayType?(u.childrens_day_treasure.ChildrensDayTreasureModel.instance._state=i,u.childrens_day_treasure.ChildrensDayTreasureModel.instance._restTm=n,u.childrens_day_treasure.ChildrensDayTreasureModel.instance._score=s):e===u.festival.FestivalModel.instance.AnniversaryDayType&&(u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._state=i,u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._restTm=n,u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._score=s),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},n.prototype.UpdateNationalXunbaoScore=function(t){console.log("更新 活動 国庆寻宝积分...............:   ",t);var e=t[0],i=t[1];1===e?a.NationalDayTreasureModel.instance._score=i:4===e?u.single_dog_treasure.SingleDogTreasureModel.instance._score=i:e===u.festival.FestivalModel.instance.GrainFullType?u.grain_full_treasure.GrainFullTreasureModel.instance._score=i:e===u.festival.FestivalModel.instance.SpaceTravelType?u.space_travel_treasure.SpaceTravelTreasureModel.instance._score=i:e===u.festival.FestivalModel.instance.ChildrensDayType?u.childrens_day_treasure.ChildrensDayTreasureModel.instance._score=i:e===u.festival.FestivalModel.instance.AnniversaryDayType&&(u.anniversary_day_treasure.AnniversaryDayTreasureModel.instance._score=i),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},n.prototype.itemEffect=function(p){for(var t=0,e=function(c){setTimeout(function(){var t,e=p[c],i=new d,n=e[0],s=e[1],o=e[2];if(null!=n&&(t=u.action_preview.ActionPreviewModel.instance.getPosSprite(10000001))){i.skin=g.getIconById(n),i.anchorX=i.anchorY=.5;var a=s.x+40+(CommonConfig.viewWidth-663)/2,r=s.y+90+(CommonConfig.viewHeight-o)/2;i.pos(a,r),LayerManager.instance.addToEffectLayer(i),y.TEMP.setTo(t.x,t.y),LayerManager.instance.getLayerById(7).globalToLocal(y.TEMP);var l=y.TEMP.x,h=y.TEMP.y;TweenJS.create(i).to({x:l,y:h,scaleX:.2,scaleY:.2},500).onComplete(function(){i.destroy(!0)}).start()}},t),t+=600},i=0;i<p.length;i++)e(i)},i=n,a.NationalDayTreasureCtrl=i}(modules=modules||{}),function(t){var e,s,i;function n(){this.init()}e=t.config||(t.config={}),s=Laya.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._lvDic=new s;for(var t=GlobalData.getConfig("zero_buy"),e=0,i=t.length;e<i;e++){var n=t[e];this._lvDic.set(n[0],n)}},n.prototype.get_model=function(t){if(null==this._lvDic.get(t))return 0},n.prototype.getlvDicLeng=function(){return this._lvDic.keys.length},n.prototype.get_zero_buy=function(t){return this._lvDic.get(t)},n.prototype.get_money=function(t){return null==this._lvDic.get(t)?0:this._lvDic.get(t)[1]},n.prototype.get_reward=function(t){return this._lvDic.get(t)[2]},n.prototype.get_restDay=function(t){return null==this._lvDic.get(t)?0:this._lvDic.get(t)[3]},n.prototype.get_extraReward=function(t){return this._lvDic.get(t)[4]},i=n,e.ZeroBuyCfg=i}(modules=modules||{}),function(t){var e,o,a,i;function n(){this._totalMoney=0,this._zeroBuyReward=new Array,this._zeroBuyExtraReward=new Array}e=t.zerobuy||(t.zerobuy={}),o=t.redPoint.RedPointCtrl,a=t.config.ZeroBuyCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"zeroBuyState",{get:function(){return this._zeroBuyState},set:function(t){this._zeroBuyState=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalMoney",{get:function(){return this._totalMoney},set:function(t){this._totalMoney=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"zeroBuyReward",{get:function(){return this._zeroBuyReward},set:function(t){this._zeroBuyReward=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"zeroBuyExtraReward",{get:function(){return this._zeroBuyExtraReward},set:function(t){this._zeroBuyExtraReward=t,this.getHaveReward()},enumerable:!0,configurable:!0}),n.prototype.getHaveReward=function(){for(var t=a.instance.getlvDicLeng(),e=!1,i=0;i<t;i++){var n=this.getZeroBuyRewardState(i),s=this.getZeroBuyExtraRewardState(i);if(1==n||1==s){e=!0;break}}return o.instance.setRPProperty("zeroBuyEntranceRP",e),e},n.prototype.changZerobuyRP=function(){},n.prototype.getRewardLeng=function(){return this.zeroBuyReward.length},n.prototype.getZeroBuyRewardState=function(t){if(this.zeroBuyReward)for(var e=0;e<this.zeroBuyReward.length;e++){var i=this.zeroBuyReward[e];if(i&&i[0]==t)return i[1]}return 0},n.prototype.getZeroBuyExtraRewardState=function(t){for(var e=0;e<this.zeroBuyExtraReward.length;e++){var i=this.zeroBuyExtraReward[e];if(i&&i[0]==t)return i[1]}return 0},n.prototype.getZeroBuyExtraRewardRestTm=function(t){for(var e=0;e<this.zeroBuyExtraReward.length;e++){var i=this.zeroBuyExtraReward[e];if(i&&i[0]==t){var n=i[2]-GlobalData.serverTime;return n<=0?0:1+n/864e5>>0}}return 0},i=n,e.ZerobuyModel=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.zerobuy||(t.zerobuy={}),n=t.core.BaseCtrl,s=t.zerobuy.ZerobuyModel,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16780916,this.getZeroBuyInfoReply),this.subscribe(16780917,this.updateZeroBuyInfo),this.subscribe(16780918,this.getZeroBuyRewardReply),this.subscribe(16780919,this.GetZeroBuyBuyReply),this.getZeroBuyInfo()},a.prototype.getZeroBuyInfo=function(){this.publish(2100552,null)},a.prototype.getZeroBuyReward=function(t){this.publish(2100553,[t])},a.prototype.GetZeroBuyBuy=function(t){this.publish(2100554,[t])},a.prototype.getZeroBuyInfoReply=function(t){s.instance.zeroBuyState=t[0],s.instance.zeroBuyReward=t[1],s.instance.zeroBuyExtraReward=t[2],GlobalData.dispatcher.event("ZERO_BUY_UPDATE")},a.prototype.updateZeroBuyInfo=function(t){s.instance.zeroBuyState=t[0],s.instance.zeroBuyReward=t[1],s.instance.zeroBuyExtraReward=t[2],GlobalData.dispatcher.event("ZERO_BUY_UPDATE")},a.prototype.getZeroBuyRewardReply=function(t){var e=t[0];CommonUtil.noticeError(e,"领取成功")},a.prototype.GetZeroBuyBuyReply=function(t){var e=t[0];CommonUtil.noticeError(e,"购买成功"),this.getZeroBuyInfo()},o=a,e.ZerobuyCtrl=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("prevent_fool")},n.prototype.getCfgById=function(t){for(var e,i=0,n=this._cfgs.length;i<n;i++){var s=this._cfgs[i];if(t===s[0]){e=s;break}}return e},Object.defineProperty(n.prototype,"maxLen",{get:function(){return this._cfgs.length},enumerable:!0,configurable:!0}),i=n,e.PreventFoolCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){}e=t.prevent_fool_question||(t.prevent_fool_question={}),i=t.config.PreventFoolCfg,n=t.funcOpen.FuncOpenModel,s=t.redPoint.RedPointCtrl,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.getPreventFoolReply=function(t){this.preventFoolReply=t,this.preventFoolReply[0]>i.instance.maxLen&&n.instance.setActionOpen(247,2),GlobalData.dispatcher.event("PREVENTFOOL_UPDATE"),this.checkRP()},a.prototype.getAnswerReply=function(t){this.answerReply=t,GlobalData.dispatcher.event("PREVENTFOOL_ANSWER_UPDATE")},Object.defineProperty(a.prototype,"id",{get:function(){return this.preventFoolReply?this.preventFoolReply[0]:-1},enumerable:!0,configurable:!0}),a.prototype.checkRP=function(){var t=!0;n.instance.getFuncNeedShow(247)&&(t=!!(this.preventFoolReply[0]<=10&&this.preventFoolReply)),s.instance.setRPProperty("preventFoolRP",t)},a.prototype.completeQuestion=function(){return!this.preventFoolReply||this.preventFoolReply[0]>i.instance.maxLen},o=a,e.PreventFoolModel=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.prevent_fool_question||(t.prevent_fool_question={}),n=t.core.BaseCtrl,s=t.prevent_fool_question.PreventFoolModel,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16786126,this.getPreventFoolReply),this.subscribe(16786127,this.answerPreventFoolReply),this.getPreventFool()},a.prototype.getPreventFoolReply=function(t){s.instance.getPreventFoolReply(t)},a.prototype.answerPreventFoolReply=function(t){s.instance.getAnswerReply(t)},a.prototype.getPreventFool=function(){this.publish(2105662,null)},a.prototype.getAnswerAward=function(t){this.publish(2105663,[t])},o=a,e.PreventFoolCtrl=o}(modules=modules||{}),function(d){var n,t,e,s,i;function o(){return t.call(this)||this}n=d.sprint_rank||(d.sprint_rank={}),e=d.core.BaseCtrl,s=d.funcOpen.FuncOpenModel,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16781319,this.getdateSprintRankInfoReply),this.subscribe(16781321,this.updateSprintRankInfo),this.subscribe(16781320,this.updateSprintRankInfo),this.subscribe(16781323,this.UpdateSprintRankState),this.subscribe(16781322,this.GetSprintRankBeforeReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("FUNC_OPEN_ASSIGN_REPLY",this.funOpenSetSprintTypeRely),this.publish(7340532,null),this.publish(7340533,null),this.GetFeishengRankBefore()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];this.panDuanIsXiangGaun(i),125==i&&d.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()&&n.SprintRankModel.instance.setSprintType(n.SprintRankModel.instance.curType),195==i&&s.instance.getFuncIsOpen(195)&&d.rotary_table_soraing.RotaryTableSoaringModel.instance.setRP(),140==i&&s.instance.getFuncIsOpen(140)&&d.cumulate2_pay.CumulatePay2Model.instance.setRP(),146==i&&s.instance.getFuncIsOpen(146)&&d.day_consume_reward.DayConsumeRewardModel.instance.setRP()}},o.prototype.panDuanIsXiangGaun=function(t){if((125==t||138==t||132==t||133==t||134==t||135==t||136==t||137==t||143==t||140==t||146==t||195==t)&&(o.instance.setActionOpen(),138==t)){var e=s.instance.getFuncStateById(138);if(1===e||3===e)return n.SprintRankTaskCtrl.instance.getSprintRankInfo(),void o.instance.getSprintRankAllInfo()}},o.prototype.setActionOpen=function(){var t=1==n.SprintRankModel.instance.openState?1:2;1!==s.instance.getFuncStateById(138)&&2!==s.instance.getFuncStateById(138)||d.funcOpen.FuncOpenModel.instance.setActionOpen(138,t),1!==s.instance.getFuncStateById(143)&&2!==s.instance.getFuncStateById(143)||d.funcOpen.FuncOpenModel.instance.setActionOpen(143,t),1!==s.instance.getFuncStateById(140)&&2!==s.instance.getFuncStateById(140)||d.funcOpen.FuncOpenModel.instance.setActionOpen(140,t),1!==s.instance.getFuncStateById(146)&&2!==s.instance.getFuncStateById(146)||d.funcOpen.FuncOpenModel.instance.setActionOpen(146,t),1!==s.instance.getFuncStateById(195)&&2!==s.instance.getFuncStateById(195)||d.funcOpen.FuncOpenModel.instance.setActionOpen(195,t),n.SprintRankModel.instance.setSprintType(n.SprintRankModel.instance.curType),d.rotary_table_soraing.RotaryTableSoaringModel.instance.setRP(),d.cumulate2_pay.CumulatePay2Model.instance.setRP(),d.day_consume_reward.DayConsumeRewardModel.instance.setRP()},o.prototype.funOpenSetSprintTypeRely=function(t){for(var e=0;e<t.length;e++){var i=t[e];i&&this.panDuanIsXiangGaun(i)}d.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()&&this.GetFeishengRankBefore()},o.prototype.getdateSprintRankInfoReply=function(t){n.SprintRankModel.instance.getInfo(t)},o.prototype.updateSprintRankInfo=function(t){n.SprintRankModel.instance.updateInfo(t)},o.prototype.getSprintRankAllInfo=function(){this.publish(7340532,null)},o.prototype.getSprintRankBaseInfo=function(){this.publish(7340533,null)},o.prototype.panDuan=function(){var t=localStorage.getItem("SprintRankIsShowAndTime");if(t){var e=parseInt(t),i=new Date(e),n=i.getFullYear(),s=i.getMonth()+1,o=i.getDate(),a=new Date(GlobalData.serverTime),r=a.getFullYear(),l=a.getMonth()+1,h=a.getDate();r==n&&l==s&&o==h||localStorage.setItem("SprintRankIsShowAndTime","")}},o.prototype.GetFeishengRankBefore=function(){var t=!1,e=localStorage.getItem("SprintRankIsShowAndTime");if(e){var i=parseInt(e);if(i){var n=GlobalData.serverTime,s=new Date(n);s.setHours(23),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);var o=s.getTime(),a=o-864e5,r=o+864e5,l=GlobalData.serverTime<=o,h=GlobalData.serverTime>a,c=l&&h,p=GlobalData.serverTime>o&&GlobalData.serverTime<=r,u=i<=o&&a<i;t=!(c&&!u||p&&u)}else t=!0}d.sprint_rank.SprintRankModel.instance.getNowCuyTypeIsOpen()&&!t?(console.log("开服 获取历史排名 请求...............:   "),this.publish(7340534,null)):console.log("开服 未开启 或者已开  不发送 获取历史排名 请求............... isTan:   ",t)},o.prototype.GetSprintRankBeforeReply=function(t){console.log("开服 历史记录返回数据...............:   ",t),n.SprintRankModel.instance.GetSprintRankBeforeReply(t)},o.prototype.UpdateSprintRankState=function(){console.log("开服 活动结束推送...............:   "),localStorage.setItem("SprintRankIsShowAndTime",""),this.GetFeishengRankBefore()},i=o,n.SprintRankCtrl=i}(modules=modules||{}),function(n){var s,t,e,i,u,o;function a(){return t.call(this)||this}s=n.soaring_rank||(n.soaring_rank={}),e=n.core.BaseCtrl,i=n.notice.SystemNoticeManager,u=n.funcOpen.FuncOpenModel,t=e,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16782826,this.getFeishengRankAllInfoReply),this.subscribe(16782827,this.getFeishengRankBaseInfoReply),this.subscribe(16782828,this.updateFeishengRankBaseInfo),this.subscribe(16781324,this.getFeishengRankTaskInfoReply),this.subscribe(16781325,this.updateFeishengRankTaskInfo),this.subscribe(16781326,this.getFeishengRankTaskRewardReply),this.subscribe(16782830,this.UpdateFeishengRankState),this.subscribe(16782829,this.GetFeishengRankBeforeReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("FUNC_OPEN_ASSIGN_REPLY",this.funOpenSetSprintTypeRely),this.onGlobal("BAG_UPDATE",this.setActionOpen),this.onGlobal("SBCHANGE_UPLEVEL",this.setActionOpen),this.onGlobal("XYCHANGE_UPLEVEL",this.setActionOpen),this.onGlobal("REFINE_UPLEVEL",this.setActionOpen),this.onGlobal("FASHION_UPLEVEL",this.setActionOpen),this.onGlobal("TIAN_ZHU_UPLEVEL",this.setActionOpen),this.onGlobal("SPRINT_RANK_UPDATE",this.setActionOpen),this.getFeishengRankAllInfo(),this.getFeishengRankBaseInfo(),this.getFeishengRankTaskInfo(),this.GetFeishengRankBefore()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];i&&(this.panDuanIsXiangGaun(i),164==i&&u.instance.getFuncIsOpen(164)&&s.SoaringRankModel.instance.setSureBtnRP(),168==i&&u.instance.getFuncIsOpen(168)&&n.soaring_cumulatePay.SoaringCumulatePayModel.instance.setRP(),170==i&&u.instance.getFuncIsOpen(170)&&n.soaring_dayConsumeReward.SoaringDayConsumeRewardModel.instance.setRP(),169==i&&u.instance.getFuncIsOpen(169)&&n.soaring_singlePay.SoaringSinglePayModel.instance.setRP(),250==i&&u.instance.getFuncIsOpen(250)&&n.rotary_table_soraing.RotaryTableSoaringModel.instance.setRP(),172==i&&u.instance.getFuncIsOpen(172),171==i&&u.instance.getFuncIsOpen(171))}},a.prototype.panDuanIsXiangGaun=function(t){164!=t&&168!=t&&169!=t&&170!=t&&171!=t&&172!=t&&250!=t||this.setActionOpen()},a.prototype.setActionOpen=function(){var t=2==n.sprint_rank.SprintRankModel.instance.openState?1:2;1!==u.instance.getFuncStateById(164)&&2!==u.instance.getFuncStateById(164)||n.funcOpen.FuncOpenModel.instance.setActionOpen(164,t),1!==u.instance.getFuncStateById(168)&&2!==u.instance.getFuncStateById(168)||n.funcOpen.FuncOpenModel.instance.setActionOpen(168,t),1!==u.instance.getFuncStateById(169)&&2!==u.instance.getFuncStateById(169)||n.funcOpen.FuncOpenModel.instance.setActionOpen(169,t),1!==u.instance.getFuncStateById(170)&&2!==u.instance.getFuncStateById(170)||n.funcOpen.FuncOpenModel.instance.setActionOpen(170,t),1!==u.instance.getFuncStateById(171)&&2!==u.instance.getFuncStateById(171)||n.funcOpen.FuncOpenModel.instance.setActionOpen(171,t),1!==u.instance.getFuncStateById(172)&&2!==u.instance.getFuncStateById(172)||n.funcOpen.FuncOpenModel.instance.setActionOpen(172,t),1!==u.instance.getFuncStateById(250)&&2!==u.instance.getFuncStateById(250)||n.funcOpen.FuncOpenModel.instance.setActionOpen(250,t),s.SoaringRankModel.instance.setSureBtnRP(),n.soaring_cumulatePay.SoaringCumulatePayModel.instance.setRP(),n.soaring_dayConsumeReward.SoaringDayConsumeRewardModel.instance.setRP(),n.soaring_singlePay.SoaringSinglePayModel.instance.setRP(),n.rotary_table_soraing.RotaryTableSoaringModel.instance.setRP()},a.prototype.funOpenSetSprintTypeRely=function(t){for(var e=0;e<t.length;e++){var i=t[e];i&&this.panDuanIsXiangGaun(i)}u.instance.getFuncIsOpen(164)&&this.GetFeishengRankBefore()},a.prototype.panDuan=function(){var t=localStorage.getItem("SoaringRankIsShowAndTime");if(t){var e=parseInt(t),i=new Date(e),n=i.getFullYear(),s=i.getMonth()+1,o=i.getDate(),a=new Date(GlobalData.serverTime),r=a.getFullYear(),l=a.getMonth()+1,h=a.getDate();r==n&&l==s&&o==h||localStorage.setItem("SoaringRankIsShowAndTime","")}},a.prototype.GetFeishengRankBefore=function(){var t=!1,e=localStorage.getItem("SoaringRankIsShowAndTime");if(e){var i=parseInt(e);if(i){var n=new Date(GlobalData.serverTime);n.setHours(23),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0);var s=n.getTime(),o=s-864e5,a=s+864e5,r=GlobalData.serverTime<=s,l=GlobalData.serverTime>o,h=r&&l,c=GlobalData.serverTime>s&&GlobalData.serverTime<=a,p=i<=s&&o<i;t=!(h&&!p||c&&p)}else t=!0}!t&&u.instance.getFuncIsOpen(164)?(console.log("飞升榜 获取历史排名 请求...............:   "),this.publish(4194408,null)):console.log("飞升榜 未开启 或者已开  不发送 获取历史排名 请求............... isTan:   ",t)},a.prototype.getFeishengRankAllInfo=function(){this.publish(4194404,null)},a.prototype.getFeishengRankBaseInfo=function(){this.publish(4194405,null)},a.prototype.getFeishengRankTaskInfo=function(){this.publish(4194406,null)},a.prototype.getFeishengRankTaskReward=function(){this.publish(4194407,null)},a.prototype.getFeishengRankAllInfoReply=function(t){s.SoaringRankModel.instance.getInfo(t)},a.prototype.getFeishengRankBaseInfoReply=function(t){s.SoaringRankModel.instance.getInfo2(t)},a.prototype.updateFeishengRankBaseInfo=function(t){s.SoaringRankModel.instance.updateInfo(t)},a.prototype.getFeishengRankTaskInfoReply=function(t){s.SoaringRankModel.instance.getInfoIntegral(t)},a.prototype.updateFeishengRankTaskInfo=function(t){s.SoaringRankModel.instance.updateInfoIntegral(t)},a.prototype.getFeishengRankTaskRewardReply=function(t){0==t[0]?i.instance.addNotice("领取成功",!1):CommonUtil.noticeError(t[0])},a.prototype.GetFeishengRankBeforeReply=function(t){console.log("飞升榜 历史记录返回数据...............:   ",t),s.SoaringRankModel.instance.GetFeishengRankBeforeReply(t)},a.prototype.UpdateFeishengRankState=function(){console.log("飞升榜 活动结束推送...............:   "),localStorage.setItem("SoaringRankIsShowAndTime",""),this.GetFeishengRankBefore(),n.soaring_cumulatePay.SoaringCumulatePayCtrl.instance.getCumulatepayFSInfo(),n.soaring_dayConsumeReward.SoaringDayConsumeRewardCtrl.instance.GetConsumeRewardFSInfo(),n.soaring_panicBuyingGift.SoaringPanicBuyingGiftCtrl.instance.GetRushBuyFSInfo(),n.soaring_singlePay.SoaringSinglePayCtrl.instance.GetPaySingleFSInfo(),n.soaring_specialGift.SoaringSpecialGiftCtrl.instance.GetDiscountGiftFSInfo(),n.rotary_table_soraing.RotaryTableSoaringCtrl.instance.GetDuobaoInfo()},o=a,s.SoaringRankCtrl=o}(modules=modules||{}),function(i){var n,t,e,s;function o(){return t.call(this)||this}n=i.feed_back||(i.feed_back={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16785028,this.SendFeedbackReply),this.subscribe(16785027,this.UpdateFeedback),this.subscribe(16785026,this.GetFeedbackListReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetFeedbackList()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(224==t[e]&&i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(224))return void n.FeedBackModel.instance.setRP()},o.prototype.GetFeedbackList=function(){this.publish(7341032,null)},o.prototype.SendFeedback=function(t,e){this.publish(7341033,[t,e])},o.prototype.ChangeFeedbackState=function(t){this.publish(7341034,[t])},o.prototype.SendFeedbackReply=function(t){0==t[0]?(i.notice.SystemNoticeManager.instance.addNotice("提交成功",!1),GlobalData.dispatcher.event("FEED_BACK_CLOSE"),this.GetFeedbackList()):CommonUtil.noticeError(t[0])},o.prototype.GetFeedbackListReply=function(t){n.FeedBackModel.instance.getInfo(t)},o.prototype.UpdateFeedback=function(t){n.FeedBackModel.instance.updateInfo(t)},s=o,n.FeedBackCtrl=s}(modules=modules||{}),function(i){var n,t,e,s,a,o;function r(){return t.call(this)||this}n=i.jiu_xiao_ling||(i.jiu_xiao_ling={}),e=i.core.BaseCtrl,s=i.funcOpen.FuncOpenModel,a=i.common.CommonUtil,t=e,__extends(r,t),Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.setup=function(){this.subscribe(16786726,this.GetHeavenInfoReply),this.subscribe(16786728,this.DrawHeavenLevelReply),this.subscribe(16786729,this.DrawExtralHeavenExpReply),this.subscribe(16786730,this.BuyHeavenLevelReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.GetHeavenInfo()},r.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(252==t[e]&&s.instance.getFuncIsOpen(252))return n.JiuXiaoLingModel.instance.setActionOpen(),void n.JiuXiaoLingModel.instance.setRP()},r.prototype.GetHeavenInfo=function(){this.publish(2106162,null)},r.prototype.DrawHeavenTask=function(t){this.publish(2106163,[t])},r.prototype.DrawHeavenLevel=function(){this.publish(2106164,null)},r.prototype.DrawExtralHeavenExp=function(){this.publish(2106165,null)},r.prototype.BuyHeavenTask=function(t){this.publish(2106166,[t])},r.prototype.GetHeavenInfoReply=function(t){n.JiuXiaoLingModel.instance.getDate(t)},r.prototype.DrawHeavenLevelReply=function(t){var e=t[0],i=t[1];if(0==e){for(var n=new Array,s=0;s<i.length;s++){var o=i[s];o&&n.push([o[0],o[1],0,null])}0<n.length&&WindowManager.instance.open(212,[n,"领取成功",!0,"以下是您当前可领取的全部奖励",!1,!0,null,Handler.create(this,this.openTips)])}else a.noticeError(e)},r.prototype.openTips=function(){n.JiuXiaoLingModel.instance._closeOpenBuyTipsWin&&WindowManager.instance.open(441),n.JiuXiaoLingModel.instance._closeOpenBuyTipsWin=!1},r.prototype.DrawExtralHeavenExpReply=function(t){var e=t[0];0==e?n.JiuXiaoLingModel.instance.showTipsEW():a.noticeError(e)},r.prototype.BuyHeavenLevelReply=function(t){var e=t[0];0==e?i.notice.SystemNoticeManager.instance.addNotice("购买等级成功！",!1):a.noticeError(e)},o=r,n.JiuXiaoLingCtrl=o}(modules=modules||{}),function(s){var t,o,a,e;function i(){this._finishLevel=0}t=s.bigTower||(s.bigTower={}),o=s.redPoint.RedPointCtrl,a=s.config.BlendCfg,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getCopyDahuangReply=function(t){this.copyData=t,this._finishLevel=t[0],GlobalData.dispatcher.event("GET_COPY_DAHUANG"),this.checkRP()},i.prototype.checkRP=function(){var t=!1,e=s.config.SceneCopyDahuangCfg.instance.getCfgByLv(this._finishLevel+1);if(e){var i=e[5],n=PlayerModel.instance.fight;a.instance.getCfgById(33002)[1][0]<=n/i&&(t=!0)}t||this.copyData&&(0<this.copyData[1].length||0<this.copyData[2].length)&&(t=!0),o.instance.setRPProperty("bigTowerRP",t)},Object.defineProperty(i.prototype,"finishLevel",{get:function(){return this._finishLevel},enumerable:!0,configurable:!0}),i.prototype.isMaxLv=function(){return this._finishLevel>=s.config.SceneCopyDahuangCfg.instance.cfgs.length},e=i,t.BigTowerModel=e}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.bigTower||(t.bigTower={}),n=t.core.BaseCtrl,s=t.bigTower.BigTowerModel,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16777340,this.getCopyDahuangReply),this.subscribe(16777341,this.upDateDahuangCopy),this.onGlobal("PLAYER_UPDATE_FIGHT",s.instance.checkRP,s.instance),this.getDahuang()},a.prototype.getDahuang=function(){this.publish(2098152,null)},a.prototype.getCopyDahuangReply=function(t){s.instance.getCopyDahuangReply(t[0])},a.prototype.upDateDahuangCopy=function(t){s.instance.getCopyDahuangReply(t[0])},o=a,e.BigTowerCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.grain_full_continuous_pay||(e.grain_full_continuous_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(770==t[e]&&s.instance.getFuncIsOpen(770))return void i.GrainFullContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log("夏日 连续充值 领取奖励 请求...............:   "+t),Channel.instance.publish(2106270,[e.festival.FestivalModel.instance.GrainFullType,t])},o=a,i.GrainFullContinuousPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.grain_full_single_pay||(e.grain_full_single_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(771==t[e]&&s.instance.getFuncIsOpen(771))return void i.GrainFullSinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 夏日 单笔充值 领取奖励 请求...............:   "+t),Channel.instance.publish(2106267,[e.festival.FestivalModel.instance.GrainFullType,t])},o=a,i.GrainFullSinglePayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.grain_full_treasure||(t.grain_full_treasure={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),GlobalData.dispatcher.on("BAG_UPDATE",this,this.setRP),i.GrainFullTreasureModel.instance,this.getNationalXunbaoRank(),this.GetNationalXunbaoScoreList(),this.GetNationalXunbaoScoreAndState()},a.prototype.setRP=function(){i.GrainFullTreasureModel.instance.setRP()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(765==t[e]&&s.instance.getFuncIsOpen(765))return void i.GrainFullTreasureModel.instance.setRP()},a.prototype.GetNationalXunbaoScoreAndState=function(){Channel.instance.publish(4194808,[i.GrainFullTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoBroadcastRecords=function(){Channel.instance.publish(4194807,[i.GrainFullTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoScoreList=function(){Channel.instance.publish(4194806,[i.GrainFullTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoRank=function(){Channel.instance.publish(4194804,[i.GrainFullTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoScoreAward=function(){Channel.instance.publish(4194805,[i.GrainFullTreasureModel.instance.festivalType])},a.prototype.festivalNationalXunbao=function(t){Channel.instance.publish(2106273,[i.GrainFullTreasureModel.instance.festivalType,t])},o=a,i.GrainFullTreasureCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.grain_full_cumulate_pay||(e.grain_full_cumulate_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(772==t[e]&&s.instance.getFuncIsOpen(772))return void i.GrainFullCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log(" 夏日 累计充值 领取奖励 请求...............:   "+t),Channel.instance.publish(2106268,[e.festival.FestivalModel.instance.GrainFullType,t])},o=a,i.GrainFullCumulatePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.grain_full_seven_days_consume||(e.grain_full_seven_days_consume={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(774==t[e]&&s.instance.getFuncIsOpen(774))return void i.GrainFullSevenDaysConsumeModel.instance.setRP()},a.prototype.DrawFestCostTotal=function(t){console.log(" 夏日 七日消费 领取奖励 请求...............:   "+t),Channel.instance.publish(2106272,[e.festival.FestivalModel.instance.GrainFullType,t])},o=a,i.GrainFullSevenDaysConsumeCtrl=o}(modules=modules||{}),function(t){var e,i;function n(){this.speicalId=[1,100,400,5],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("share_awards");this._cfgs=[[],[],[],[]],this.speicalCfg=[];for(var e=0,i=t.length;e<i;e++)if(-1<this.speicalId.indexOf(t[e][0]))this.speicalCfg.push(t[e]);else{var n=t[e][1];1<=n&&n<=4&&this._cfgs[n-1].push(t[e])}},n.prototype.getTypeByCfgs=function(t){return this._cfgs[t-1]},n.prototype.getIdAndTypeByCfg=function(t,e){for(var i=this._cfgs[e-1],n=0,s=i.length;n<s;n++)if(i[n][0]===t)return i[n];return null},n.prototype.getIdBySpeicalParm=function(t){for(var e=0,i=this.speicalCfg.length;e<i;e++)if(this.speicalCfg[e][0]===t)return this.speicalCfg[e];return null},n.prototype.getCond=function(t,e){for(var i=this.getTypeByCfgs(t).sort(function(t,e){return t[0]-e[0]}),n=0,s=i.length;n<s;n++){if(!(e>=i[n][2]))return i[n][2];i[n][2]}return i[i.length-1][2]},i=n,e.ShareAwardsCfg=i}(modules=modules||{}),function(t){var i,e,n,s,o,a,r,l;function h(){return e.call(this)||this}i=t.wx_module||(t.wx_module={}),n=t.config.ShareAwardsCfg,s=t.core.BaseCtrl,o=t.common.PlatParams,a=t.notice.SystemNoticeManager,r=t.funcOpen.FuncOpenModel,e=s,__extends(h,e),Object.defineProperty(h,"instance",{get:function(){return this._instance=h._instance||new h},enumerable:!0,configurable:!0}),h.prototype.setup=function(){Channel.instance.subscribe(16790426,this,this.getShareInfoReply),Channel.instance.subscribe(16790427,this,this.getShareAwardsReply),Channel.instance.subscribe(16790428,this,this.shareExchangeReply),Channel.instance.subscribe(16790429,this,this.updateShareCoin),Channel.instance.subscribe(16790430,this,this.shareExchangeInfoReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),t.redPoint.RedPointCtrl.instance.setRPProperty("wxChangePkgRP",!0),this.getShareInfo(),this.ShareExchangeInfo()},h.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];if((784==i||786==i)&&r.instance.getFuncIsOpen(i))return this.getShareInfo(),void this.ShareExchangeInfo()}},h.prototype.ShareExchangeInfo=function(){Channel.instance.publish(2109465,null)},h.prototype.shareExchangeInfoReply=function(t){i.wxShareModel.instance.shareExchangeInfoReply(t)},h.prototype.shareExchangeReply=function(t){CommonUtil.noticeError(t[0],"兑换成功")},h.prototype.updateShareCoin=function(t){i.wxShareModel.instance.updateShareCoin(t)},h.prototype.getShareInfoReply=function(t){i.wxShareModel.instance.getShareInfoReply(t),this.getCollectAwards()},h.prototype.getShareAwardsReply=function(t){0===t[0]?console.log("....领取分享奖励"):CommonUtil.noticeError(t[0])},h.prototype.getShareInfo=function(){Channel.instance.publish(2109462,null)},h.prototype.getShareAwards=function(t,e){Channel.instance.publish(2109463,[t,e])},h.prototype.shareExchange=function(t,e){void 0===e&&(e=1),Channel.instance.publish(2109464,[t,e])},h.prototype.openCustomerServiceConversation=function(){if(1!==o.control.funcOpen[785])throw new Error("不是微信环境.....");o.player_mini_service()},h.prototype.getCollectAwards=function(t){if(1!==o.control.funcOpen[786])return!1;if(i.wxShareModel.instance.isRecCollect)return!1;if(!t){var e=o.onLaunchOptions();t=e&&e.scene}return console.log("当前场景值.............",t),1001!==t&&1089!==t||this.getShareAwards(5,0),!0},h.prototype.shareAppMessage=function(){1===o.control.funcOpen[784]&&((i.wxShareModel.instance.data&&i.wxShareModel.instance.data[0]||0)<n.instance.getIdBySpeicalParm(1)[3]&&this.getShareAwards(1,0),h.askFlag=!0,o.player_mini_share())},h.prototype.askServiceShare=function(){return!(!h.askFlag||(a.instance.addNotice("分享成功",!1),h.askFlag=!1))},h.prototype.openLostView=function(t){return 1==o.control.funcOpen[785]&&!!t&&!i.wxShareModel.instance.isRecCollect&&0<o.control.miniGameCollectIcon&&(WindowManager.instance.open(1193),!0)},h.prototype.onShow=function(t){this.askServiceShare()||this.getCollectAwards(t),console.log("当前场景值.............",t)},h.prototype.onHide=function(){},h.askFlag=!1,l=h,i.wxShareCtrl=l}(modules=modules||{}),function(t){var n,e,i;function s(){return null!==e&&e.apply(this,arguments)||this}n=t.showEquip||(t.showEquip={}),e=t.core.BaseCtrl,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){var i=this;this.subscribe(16790826,this.ShowEquipInfoReply).subscribe(16790827,this.ShowEquipWearReply).subscribe(16790828,this.ShowEquipChangeReply).subscribe(16790829,this.ShowEquipRiseReply).subscribe(16790834,this.FastComposeShowEquipReply).onGlobal("BAG_UPDATE",function(t){13!==t&&0!==t||n.ShowEquipModel.instance.checkRP()}).onGlobal("BAG_ADD_ITEM",function(t,e){378===e&&WindowManager.instance.openDialog(1289,[t[0],i.convert_count,0,null])});for(var t=[1,2,4,3,7,5],e=0;e<t.length;++e)this.ShowEquipInfo(t[e])},s.prototype.ShowEquipInfo=function(t){console.log("ShowEquipInfo",t),this.publish(2109662,[t])},s.prototype.ShowEquipWear=function(t,e){console.log("ShowEquipWear",t,e),this.publish(2109663,[t,e])},s.prototype.ShowEquipFastWear=function(t,e){console.log("ShowEquipFastWear",t,e),this.publish(2109664,[t,e])},s.prototype.ShowEquipChange=function(t,e,i,n){console.log("ShowEquipChange",t,e,i,n),this.publish(2109665,[t,i,n,e]),this.convert_count=n},s.prototype.ShowEquipRise=function(t){console.log("ShowEquipRise",t),this.publish(2109666,[t])},s.prototype.FastComposeShowEquip=function(t,e,i,n){console.log("FastComposeShowEquip",t,e,i,n),this.publish(2109670,[t,e,i,n])},s.prototype.ShowEquipInfoReply=function(t){console.log("ShowEquipInfoReply",t),t[0]&&(n.ShowEquipModel.instance.masterLvs[t[0]]=t[1],n.ShowEquipModel.instance.equips[t[0]]=t[2],GlobalData.dispatcher.event("SHOWEQUIP_UPDATE",t[0]),n.ShowEquipModel.instance.checkRP())},s.prototype.ShowEquipWearReply=function(t){console.log("ShowEquipWearReply",t),CommonUtil.noticeError(t[0],"装备成功")},s.prototype.ShowEquipChangeReply=function(t){console.log("ShowEquipChangeReply",t),CommonUtil.noticeError(t[0],"转换成功")},s.prototype.ShowEquipRiseReply=function(t){console.log("ShowEquipRiseReply",t),CommonUtil.noticeError(t[0],"升阶成功")},s.prototype.FastComposeShowEquipReply=function(t){console.log("FastComposeShowEquipReply",t),CommonUtil.noticeError(t[0],"打造成功")},i=s,n.ShowEquipCtrl=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.outside_show_dungeon||(t.outside_show_dungeon={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16790830,this.getShowEquipValueRelpy),this.subscribe(16790831,this.updateShowEquipValue),this.subscribe(16790832,this.useShowEquipItemReply),this.subscribe(16790833,this.updateShowEquipBossRewardLeft),this.getShowEquipValue()},o.prototype.getShowEquipValue=function(){this.publish(2109667,null)},o.prototype.setAutoUserShowEquip=function(t){this.publish(2109668,[t])},o.prototype.useShowEquipItem=function(t){this.publish(2109669,[t])},o.prototype.getShowEquipValueRelpy=function(t){e.OutsideShowDungeonModel.instance.exValue=t[0],e.OutsideShowDungeonModel.instance.autoUse=t[1]?1:0,e.OutsideShowDungeonModel.instance.setRP(),GlobalData.dispatcher.event("OUTSIDE_SHOW_UPDATE")},o.prototype.updateShowEquipValue=function(t){e.OutsideShowDungeonModel.instance.exValue=t[0],e.OutsideShowDungeonModel.instance.setRP(),GlobalData.dispatcher.event("OUTSIDE_SHOW_UPDATE")},o.prototype.useShowEquipItemReply=function(t){console.log("使用元力道具返回...................",t),CommonUtil.noticeError(t[0])},o.prototype.updateShowEquipBossRewardLeft=function(t){0===t[0]?WindowManager.instance.open(412,49):WindowManager.instance.open(416,49)},s=o,e.OutsideShowDungeonCtrl=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.extreme_equip||(t.extreme_equip={}),n=t.core.BaseCtrl,s=t.effect.SuccessEffectCtrl,i=n,__extends(a,i),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16791026,this.GetZhiZunEquipInfoReply),this.subscribe(16791030,this.ZhizunEquipAddLevelReply),this.subscribe(16791027,this.GetZhiZunEquipOneInfoReply),this.subscribe(16791031,this.ZhizunEquipSkillAddLevelReply),this.subscribe(16791029,this.updateZhizunEquipSuitSkill),this.onGlobal("BAG_UPDATE",e.ExtremeEquipModel.instance.setRP,e.ExtremeEquipModel.instance),this.getZhizunEquipInfo()},a.prototype.updateZhizunEquipSuitSkill=function(t){e.ExtremeEquipModel.instance.updateZhizunEquipSuitSkill(t)},a.prototype.zhizunEquipSkillAddLevel=function(t,e){this.publish(2109864,[t,e])},a.prototype.ZhizunEquipSkillAddLevelReply=function(t){CommonUtil.noticeError(t[0],"技能升级成功")},a.prototype.getZhizunEquipInfo=function(){this.publish(2109862,null)},a.prototype.zhizunEquipAddLevel=function(t){this.publish(2109863,[t])},a.prototype.ZhizunEquipAddLevelReply=function(t){var e=t[0];0===t[0]?s.instance.play("assets/others/tx_jinjiechengong4.png"):CommonUtil.noticeError(e)},a.prototype.GetZhiZunEquipInfoReply=function(t){e.ExtremeEquipModel.instance.getZhiZunEquipInfoReply(t)},a.prototype.GetZhiZunEquipOneInfoReply=function(t){e.ExtremeEquipModel.instance.getZhiZunEquipOneInfoReply(t)},o=a,e.ExtremeEquipCtrl=o}(modules=modules||{}),function(t){var n,e,i,s;function o(){return null!==e&&e.apply(this,arguments)||this}n=t.immortalContest||(t.immortalContest={}),i=t.core.BaseCtrl,e=i,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16790926,this.GetXianDaoRankReply).subscribe(16790927,this.GetXianDaoPromotionRankReply).subscribe(16790928,this.GetXianDaoInfoReply).subscribe(16790929,this.GetXianDaoPersonalReply).subscribe(16790930,this.XianDaoGuessReply).subscribe(16790931,this.XianDaoWorshipReply).subscribe(16790932,this.XianDaoGetRewardReply).subscribe(16790933,this.GetXianDaoCopyReply).subscribe(16790934,this.XianDaoNextRoundBegin),this.GetXianDaoPromotionRank(),this.GetXianDaoInfo(),this.GetXianDaoPersonal(),this.GetXianDaoCopy()},o.prototype.GetXianDaoRankReply=function(t){console.log("GetXianDaoRankReply",t),n.ImmortalContestModel.instance.preRank=t[0],n.ImmortalContestModel.instance.myPreRank=t[1],n.ImmortalContestModel.instance.myPreValue=t[2],GlobalData.dispatcher.event("IMMORTAL_CONTEST_PRE_RANK_UPDATE")},o.prototype.GetXianDaoPromotionRankReply=function(t){console.log("GetXianDaoPromotionRankReply",t),n.ImmortalContestModel.instance.mainRank=t[0],n.ImmortalContestModel.instance.actorShow=t[1],n.ImmortalContestModel.instance.canDraw=1===t[2],n.ImmortalContestModel.instance.topTimes=t[3],GlobalData.dispatcher.event("IMMORTAL_CONTEST_MAIN_RANK_UPDATE"),n.ImmortalContestModel.instance.mainRank&&n.ImmortalContestModel.instance.mainRank[0]&&n.ImmortalContestModel.instance.mainRank[0].length||WindowManager.instance.close(1296)},o.prototype.GetXianDaoInfoReply=function(t){console.log("GetXianDaoInfoReply",t),n.ImmortalContestModel.instance.curRound!==t[1]&&(n.ImmortalContestModel.instance.selectedRound=t[1],this.GetXianDaoPersonal(),this.roundLoop(t[1])),n.ImmortalContestModel.instance.records=t[0],n.ImmortalContestModel.instance.curRound=t[1],n.ImmortalContestModel.instance.enrollCount=t[2],n.ImmortalContestModel.instance.matchStage=t[3],GlobalData.dispatcher.event("IMMORTAL_CONTEST_INFO_UPDATE"),n.ImmortalContestModel.instance.checkRP()},o.prototype.GetXianDaoPersonalReply=function(t){console.log("GetXianDaoPersonalReply",t),n.ImmortalContestModel.instance.isEnroll=1===t[0],n.ImmortalContestModel.instance.guessTimes=t[1],n.ImmortalContestModel.instance.guessRecord=t[2],GlobalData.dispatcher.event("IMMORTAL_CONTEST_INFO_UPDATE"),n.ImmortalContestModel.instance.checkRP()},o.prototype.GetXianDaoCopyReply=function(t){console.log("GetXianDaoCopyReply",t),n.ImmortalContestModel.instance.worshipTimes=t[0],n.ImmortalContestModel.instance.isDraw=1===t[1],n.ImmortalContestModel.instance.matchTimes=t[2],GlobalData.dispatcher.event("IMMORTAL_CONTEST_INFO_UPDATE"),n.ImmortalContestModel.instance.checkWorshipRP(),this.dailyLoop()},o.prototype.XianDaoGuessReply=function(t){console.log("XianDaoGuessReply",t),CommonUtil.noticeError(t[0],"支持成功"),t[0]||this.GetXianDaoInfo()},o.prototype.XianDaoWorshipReply=function(t){console.log("XianDaoWorshipReply",t),CommonUtil.noticeError(t[0],"膜拜成功")},o.prototype.XianDaoGetRewardReply=function(t){console.log("XianDaoGetRewardReply",t),CommonUtil.noticeError(t[0],"领取成功")},o.prototype.XianDaoNextRoundBegin=function(){console.log("XianDaoNextRoundBegin"),GlobalData.dispatcher.event("IMMORTAL_CONTEST_INFO_UPDATE")},o.prototype.GetXianDaoRank=function(){console.log("GetXianDaoRank"),this.publish(9437484,null)},o.prototype.GetXianDaoInfo=function(){console.log("GetXianDaoInfo"),this.publish(9437485,null)},o.prototype.GetXianDaoPromotionRank=function(){this.publish(4196004,null)},o.prototype.GetXianDaoPersonal=function(){console.log("GetXianDaoPersonal"),this.publish(9437486,null)},o.prototype.XianDaoGuess=function(t,e,i){console.log("XianDaoGuess",t,e,i),this.publish(2109765,[t,e,i,n.ImmortalContestModel.instance.curRound])},o.prototype.XianDaoInterfaceState=function(t){console.log("XianDaoInterfaceState",t),this.publish(9437487,[t])},o.prototype.GetXianDaoCopy=function(){console.log("GetXianDaoCopy"),this.publish(2109764,null)},o.prototype.XianDaoGetReward=function(){console.log("XianDaoGetReward"),this.publish(2109763,null)},o.prototype.XianDaoWorship=function(){console.log("XianDaoWorship"),this.publish(2109762,null)},o.prototype.dailyLoop=function(){var t=GlobalData.serverTime,e=new Date(t);e.getUTCHours()<21?e.setUTCHours(21,0,0,0):e.setUTCHours(45,0,0,0),Laya.timer.once(e.getTime()-t,this,this.GetXianDaoCopy,null,!0)},o.prototype.roundLoop=function(t){if(0<t){var e=n.ImmortalContestModel.instance.getTimeByRound(t);Laya.timer.once(e-GlobalData.serverTime,this,this.GetXianDaoInfo,null,!0)}},s=o,n.ImmortalContestCtrl=s}(modules=modules||{}),function(n){var s,t,e,i;function o(){return t.call(this)||this}s=n.union_war||(n.union_war={}),e=n.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.subscribe(16790626,this.getFactionWarMatchInfoReply).subscribe(16790627,this.getFactionWarRankReply).subscribe(16790628,this.getFactionWarPersonRankReply).subscribe(16790629,this.enterFactionWarMatchReply).subscribe(16790630,this.factionWarMatchFightInfo).subscribe(16790631,this.updateFactionWarMatchPace).subscribe(16790633,this.getFactionWarDispenseReply).subscribe(16790634,this.getFactionWarNeedsReply).subscribe(16790635,this.reqFactionWarNeedReply).subscribe(16790636,this.reqFactionWarDispenseReply).subscribe(16790637,this.reqFactionWarDispenseLogReply).subscribe(16790640,this.getFactionGuccessInfoReply).subscribe(16790641,this.guessingFactionWarReply).subscribe(16790639,this.getFactionWarFinalInfoReply).subscribe(16790642,this.factionWarReadyRemain).subscribe(16790643,this.factionWarBattleInfo).subscribe(16790644,this.updateFactionWarBattlePace).subscribe(16782982,this.factionWarWorshipReply).subscribe(16790645,this.factionWarKingShowReply).subscribe(16790638,this.factionWarPreTurnBye).subscribe(16790646,this.factionWarWorshipTimesReply).subscribe(16790647,this.updateFactionGuccessInfo).subscribe(16779323,this.newWingMagicShowTip).subscribe(16790648,this.updateFactionWarPrestige).subscribe(16790649,this.reqFactionWarDispExchangeReply).subscribe(16789942,this.UpdateTeamPos).subscribe(16789941,this.SceneSetTeamPosReply).subscribe(16777459,this.reqSearchObjReply),GlobalData.dispatcher.on("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),GlobalData.dispatcher.on("GET_FACTION_PERSONAL_INFO_REPLY",this,this.setRP),GlobalData.dispatcher.on("DUNGEON_SCENE_STATE_UPDATE",this,this.setRP),this.getFactionWarDispense(2),this.factionWarKingShow(),this.factionWarWorshipTimes(),this.getFactionWarFinalInfoAll(),this.getFactionWarMatchInfo(),GlobalData.dispatcher.on("UPDATE_FACTION_GUCCESS_INFO",this,this.getall)},o.prototype.getall=function(){o.instance.getFactionWarFinalInfo(1)},o.prototype.getFactionWarFinalInfoAll=function(){o.instance.getFactionWarFinalInfo(1),o.instance.getFactionWarFinalInfo(2),o.instance.getFactionWarFinalInfo(3),o.instance.getFactionWarFinalInfo(4)},o.prototype.setRP=function(){s.UnionWarModel.instance.setRP()},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++){var i=t[e];if((704==i||698==i||699==i||700==i)&&(n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(704)||n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(698)||n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(699)||n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(700)))return void s.UnionWarModel.instance.setRP()}},o.prototype.factionWarWorship=function(t){Channel.instance.publish(2102482,[t])},o.prototype.factionWarWorshipReply=function(t){CommonUtil.noticeError(t[0],"膜拜成功")},o.prototype.reqRobotLockEnemy=function(t){Channel.instance.publish(5242897,[t])},o.prototype.getFactionWarMatchInfo=function(){Channel.instance.publish(9437284,null)},o.prototype.getFactionWarRank=function(t){Channel.instance.publish(9437285,[t])},o.prototype.enterFactionWarMatch=function(t){Channel.instance.publish(2102484,[t])},o.prototype.factionWarWorshipTimes=function(){Channel.instance.publish(2102483,null)},o.prototype.getFactionWarDispense=function(t){Channel.instance.publish(7340859,[t])},o.prototype.getFactionWarNeeds=function(t){Channel.instance.publish(7340860,[t])},o.prototype.reqFactionWarNeed=function(t){Channel.instance.publish(7340861,[t])},o.prototype.reqFactionWarDispense=function(t,e){Channel.instance.publish(7340862,[t,e])},o.prototype.reqFactionWarDispenseLog=function(){Channel.instance.publish(7340863,null)},o.prototype.reqReviveSourRobot=function(){Channel.instance.publish(5242898,null)},o.prototype.getFactionWarFinalInfo=function(t){Channel.instance.publish(4196105,[t])},o.prototype.getFactionGuccessInfo=function(t,e){Channel.instance.publish(4196106,[t,e])},o.prototype.guessingFactionWar=function(t){Channel.instance.publish(9437286,[t])},o.prototype.factionWarKingShow=function(){Channel.instance.publish(4196104,null)},o.prototype.reqFactionWarDispExchange=function(t,e){Channel.instance.publish(7340864,[t,e])},o.prototype.getFactionWarMatchInfoReply=function(t){s.UnionWarModel.instance.getFactionWarMatchInfoReply(t)},o.prototype.getFactionWarRankReply=function(t){s.UnionWarModel.instance.getFactionWarRankReply(t)},o.prototype.getFactionWarPersonRankReply=function(t){s.UnionWarModel.instance.getFactionWarPersonRankReply(t)},o.prototype.enterFactionWarMatchReply=function(t){CommonUtil.noticeError(t[0])},o.prototype.factionWarMatchFightInfo=function(t){s.UnionWarModel.instance.factionWarMatchFightInfo(t)},o.prototype.updateFactionWarMatchPace=function(t){s.UnionWarModel.instance.updateFactionWarMatchPace(t)},o.prototype.reqSearchObj=function(t){console.log("【仙盟争霸】 搜索玩家 .............."),Channel.instance.publish(5242888,[t])},o.prototype.reqSearchObjReply=function(t){if(5===t[2]){var e=t[0];this.reqRobotLockEnemy(e)}},o.prototype.getFactionWarDispenseReply=function(t){s.UnionWarModel.instance.getFactionWarDispenseReply(t)},o.prototype.getFactionWarNeedsReply=function(t){s.UnionWarModel.instance.getFactionWarNeedsReply(t)},o.prototype.reqFactionWarNeedReply=function(t){CommonUtil.noticeError(t[0],"需求成功")},o.prototype.reqFactionWarDispenseReply=function(t){CommonUtil.noticeError(t[0],"分配成功")},o.prototype.reqFactionWarDispenseLogReply=function(t){s.UnionWarModel.instance.reqFactionWarDispenseLogReply(t)},o.prototype.getFactionGuccessInfoReply=function(t){s.UnionWarModel.instance.getFactionGuccessInfoReply(t)},o.prototype.updateFactionGuccessInfo=function(t){s.UnionWarModel.instance.updateFactionGuccessInfo(t)},o.prototype.newWingMagicShowTip=function(t){WindowManager.instance.openDialog(92,[t[0],2])},o.prototype.guessingFactionWarReply=function(t){CommonUtil.noticeError(t[0],"支持成功")},o.prototype.getFactionWarFinalInfoReply=function(t){s.UnionWarModel.instance.getFactionWarFinalInfoReply(t)},o.prototype.factionWarReadyRemain=function(t){s.UnionWarModel.instance.factionWarReadyRemain(t)},o.prototype.factionWarBattleInfo=function(t){s.UnionWarModel.instance.factionWarBattleInfo(t)},o.prototype.updateFactionWarBattlePace=function(t){s.UnionWarModel.instance.updateFactionWarBattlePace(t)},o.prototype.factionWarKingShowReply=function(t){s.UnionWarModel.instance.factionWarKingShowReply(t),this.factionWarWorshipTimes()},o.prototype.factionWarPreTurnBye=function(t){s.UnionWarModel.instance.nextTurnTime=t[0],GlobalData.dispatcher.event("GET_FACTION_WAR_MATCH_INFO_REPLY")},o.prototype.factionWarWorshipTimesReply=function(t){s.UnionWarModel.instance.moBaiNum=t[0],this.setRP(),GlobalData.dispatcher.event("GET_FACTION_WAR_MATCH_INFO_REPLY")},o.prototype.updateFactionWarPrestige=function(t){s.UnionWarModel.instance.prestige=t[0],GlobalData.dispatcher.event("UPDATE_FACTION_WAR_PRESTIGE")},o.prototype.reqFactionWarDispExchangeReply=function(t){CommonUtil.noticeError(t[0],"兑换成功"),GlobalData.dispatcher.event("GET_FACTION_BAG_REPLY")},o.prototype.SceneSetTeamPos=function(t){Channel.instance.publish(5243190,[t])},o.prototype.SceneSetTeamPosReply=function(t){s.UnionWarModel.instance.isTipsDorw&&CommonUtil.noticeError(t[0],"调整出战顺序成功")},o.prototype.UpdateTeamPos=function(t){s.UnionWarModel.instance.objIds=t[0],GlobalData.dispatcher.event("UPDATE_TEAM_POS")},i=o,s.UnionWarCtrl=i}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.anniversary_day_continuous_pay||(e.anniversary_day_continuous_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(864==t[e]&&s.instance.getFuncIsOpen(864))return void i.AnniversaryDayContinuousPayModel.instance.setRP()},a.prototype.DrawFestPayCon=function(t){console.log(" 中秋 连续充值 领取奖励 请求...............:   "+t),this.publish(2106270,[e.festival.FestivalModel.instance.AnniversaryDayType,t])},o=a,i.AnniversaryDayContinuousPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}i=e.anniversary_day_cumulate_pay||(e.anniversary_day_cumulate_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(865==t[e]&&s.instance.getFuncIsOpen(865))return void i.AnniversaryDayCumulatePayModel.instance.setRP()},a.prototype.DrawFestPayAcc=function(t){console.log(" 中秋 累计充值 领取奖励 请求...............:   "+t),this.publish(2106268,[e.festival.FestivalModel.instance.AnniversaryDayType,t])},o=a,i.AnniversaryDayCumulatePayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.anniversary_day_seven_days_consume||(e.anniversary_day_seven_days_consume={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(866==t[e]&&s.instance.getFuncIsOpen(866))return void i.AnniversaryDaySevenDaysConsumeModel.instance.setRP()},a.prototype.DrawFestCostTotal=function(t){console.log("周年 七日消费 领取奖励 请求...............:   "+t),this.publish(2106272,[e.festival.FestivalModel.instance.AnniversaryDayType,t])},o=a,i.AnniversaryDaySevenDaysConsumeCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.anniversary_day_seven_days_pay||(e.anniversary_day_seven_days_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(867==t[e]&&s.instance.getFuncIsOpen(867))return void i.AnniversaryDaySevenDaysPayModel.instance.setRP()},a.prototype.DrawFestPayTotal=function(t){console.log("中秋 七日累充 领取奖励 请求...............:   "+t),this.publish(2106271,[e.festival.FestivalModel.instance.AnniversaryDayType,t])},o=a,i.AnniversaryDaySevenDaysPayCtrl=o}(modules=modules||{}),function(e){var i,t,n,s,o;function a(){return t.call(this)||this}i=e.anniversary_day_single_pay||(e.anniversary_day_single_pay={}),n=e.core.BaseCtrl,s=e.funcOpen.FuncOpenModel,t=n,__extends(a,t),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(868==t[e]&&s.instance.getFuncIsOpen(868))return void i.AnniversaryDaySinglePayModel.instance.setRP()},a.prototype.DrawFestPayDay=function(t){console.log(" 中秋 单笔充值 领取奖励 请求...............:   "+t),this.publish(2106267,[e.festival.FestivalModel.instance.AnniversaryDayType,t])},o=a,i.AnniversaryDaySinglePayCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.anniversary_day_treasure||(t.anniversary_day_treasure={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.onGlobal("BAG_UPDATE",this.setRP),i.AnniversaryDayTreasureModel.instance,this.getNationalXunbaoRank(),this.GetNationalXunbaoScoreList(),this.GetNationalXunbaoScoreAndState()},a.prototype.setRP=function(){i.AnniversaryDayTreasureModel.instance.setRP()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(869==t[e]&&s.instance.getFuncIsOpen(869))return void i.AnniversaryDayTreasureModel.instance.setRP()},a.prototype.GetNationalXunbaoScoreAndState=function(){this.publish(4194808,[i.AnniversaryDayTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoBroadcastRecords=function(){this.publish(4194807,[i.AnniversaryDayTreasureModel.instance.festivalType])},a.prototype.GetNationalXunbaoScoreList=function(){this.publish(4194806,[i.AnniversaryDayTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoRank=function(){this.publish(4194804,[i.AnniversaryDayTreasureModel.instance.festivalType])},a.prototype.getNationalXunbaoScoreAward=function(){this.publish(4194805,[i.AnniversaryDayTreasureModel.instance.festivalType])},a.prototype.festivalNationalXunbao=function(t){this.publish(2106273,[i.AnniversaryDayTreasureModel.instance.festivalType,t])},o=a,i.AnniversaryDayTreasureCtrl=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_pay_rank||(t.anniversary_day_pay_rank={}),n=t.core.BaseCtrl,i=n,__extends(o,i),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){},s=o,e.AnniversaryDayPayRankCtrl=s}(modules=modules||{}),function(a){var r,e,t,i,n,s;function o(){var t=e.call(this)||this;return t.festivalType=a.festival.FestivalModel.instance.AnniversaryDayType,t}r=a.hit_birthday_cake||(a.hit_birthday_cake={}),t=a.core.BaseCtrl,i=a.funcOpen.FuncOpenModel,n=a.notice.SystemNoticeManager,e=t,__extends(o,e),Object.defineProperty(o,"instance",{get:function(){return o._instance=o._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){this.onGlobal("BAG_UPDATE",this.checkRP),this.GetHuntingPlannerInfo(),this.GetHuntingRank(),this.GetHuntingLog(),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType)},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(527==t[e]&&i.instance.getFuncIsOpen(527))return this.GetHuntingRank(),this.GetHuntingPlannerInfo(),this.GetHuntingLog(),void r.HitBirthdayCakeModel.instance.setRP()},o.prototype.checkRP=function(){r.HitBirthdayCakeModel.instance.setRP()},o.prototype.UpdatePlannerKillCount=function(t){r.HitBirthdayCakeModel.instance.UpdatePlannerKillCount(t)},o.prototype.updateHuntingPerInfo=function(t){r.HitBirthdayCakeModel.instance.updateHuntingPerInfo(t)},o.prototype.getHuntingPlannerInfoReply=function(t){r.HitBirthdayCakeModel.instance.updataInfo(t)},o.prototype.huntingPlannerReply=function(t){0==t[0]?1===t[1]&&(console.log(".....................狩猎策划",t[1]),WindowManager.instance.open(819)):CommonUtil.noticeError(t[0])},o.prototype.drawStageRewardReply=function(t){0==t[0]?r.HitBirthdayCakeModel.instance.updataDrawStageReward(t):CommonUtil.noticeError(t[0])},o.prototype.drawHuntingPerRewardReply=function(t){0==t[0]?(n.instance.addNotice("领取成功",!1),r.HitBirthdayCakeModel.instance.updataDrawHuntingPerReward(t)):CommonUtil.noticeError(t[0])},o.prototype.getHuntingRankReply=function(t){r.HitBirthdayCakeModel.instance.updataHuntingRank(t)},o.prototype.updateHuntingPlanner=function(t){r.HitBirthdayCakeModel.instance.updateHuntingPlanner(t)},o.prototype.GetHuntingLogReply=function(t){r.HitBirthdayCakeModel.instance.GetHuntingLogReply(t)},o.prototype.UpdateStageReward=function(t){r.HitBirthdayCakeModel.instance.UpdateStageReward(t)},o.prototype.GetHuntingPlannerInfo=function(){this.publish(4195504,[this.festivalType])},o.prototype.HuntingPlanner=function(i,n,s){var o=this;void 0===n&&(n=0),void 0===s&&(s=0);var t=r.HitBirthdayCakeModel.instance.rankData;if(t){var e=t[2];GlobalData.serverTime>=e&&!r.HitBirthdayCakeModel.instance.isNotice?WindowManager.instance.open(815,function(){if(o.publish(2108162,[o.festivalType,i,n,s]),WindowManager.instance.getPanelById(816))if(1===i){a.config.ItemMaterialCfg.instance.getItemCfgById(n)[9];for(var t=a.config.HuntingConstCfg.instance.getCfgByFestivalType(o.festivalType)[1],e=0;e<3&&n!==t[e];e++);}else 2===i&&a.config.HuntingConstCfg.instance.getCfgByFestivalType(o.festivalType)[2]}):this.publish(2108162,[this.festivalType,i,n,s])}},o.prototype.DrawStageReward=function(){this.publish(4195505,[this.festivalType])},o.prototype.DrawHuntingPerReward=function(t){this.publish(4195506,[this.festivalType,t])},o.prototype.GetHuntingRank=function(){this.publish(4195507,[this.festivalType])},o.prototype.BuyHuntingItem=function(t,e){this.publish(2108163,[this.festivalType,t,e])},o.prototype.GetHuntingLog=function(){this.publish(4195508,[this.festivalType])},o.prototype.BuyHuntingItemReply=function(t){0==t[0]?(n.instance.addNotice("购买成功",!1),r.HitBirthdayCakeModel.instance.BuyHuntingItemReply()):CommonUtil.noticeError(t[0])},s=o,r.HitBirthdayCakeCtrl=s}(modules=modules||{}),function(i){var s,t,e,n;function o(){return null!==t&&t.apply(this,arguments)||this}s=i.destinyPellet||(i.destinyPellet={}),e=i.core.BaseCtrl,t=e,__extends(o,t),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.setup=function(){var n=this;this.subscribe(16791126,function(t){for(var e in console.log("TianMingInfoReply:",t),t[0]){var i=t[0][e];s.DestinyPelletModel.instance.info[i[0]-1]=i}GlobalData.dispatcher.event("DESTINY_PELLET_UPDATE"),n.checkRp()}),this.subscribe(16791127,function(t){console.log("TianMingUpLevelReply:",t),CommonUtil.noticeError(t[0]),t[0]||(s.DestinyPelletModel.instance.info[n._upType-1][1]>n._oldLv?i.effect.SuccessEffectCtrl.instance.play("assets/others/tx_jinjiechengong4.png"):i.effect.SuccessEffectCtrl.instance.play("assets/others/txt_tmd_cgtp.png"))}),this.onGlobal("BAG_UPDATE",function(){n.checkRp()}),this.TianMingInfo()},o.prototype.TianMingInfo=function(){this.publish(2109962,null)},o.prototype.TianMingUpLevel=function(t){this._upType=t,this._oldLv=s.DestinyPelletModel.instance.info[t-1][1],this.publish(2109963,[t])},o.prototype.checkRp=function(){for(var t=!1,e=1;e<=4;++e)if(s.DestinyPelletModel.instance.checkAvailable(e)){t=!0;break}i.redPoint.RedPointCtrl.instance.setRPProperty("destinyPellet",t)},n=o,s.DestinyPelletCtrl=n}(modules=modules||{}),function(t){var e,i;function n(){}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getBigRwdCfgByLayer=function(t,e,i){var n=GlobalData.getConfig("ruins_big_rewards");for(var s in n)if(n[s][0]===t&&n[s][2][0]<=e&&n[s][2][1]>=e&&n[s][3][0]<=i&&n[s][3][1]>=i)return n[s];return null},n.prototype.getBigRwdCfgByBidId=function(t){var e=GlobalData.getConfig("ruins_big_rewards");for(var i in e)if(e[i][1]===t)return e[i];return null},n.prototype.getRankCfgByRank=function(t,e,i){var n=GlobalData.getConfig("ruins_rank");for(var s in n)if(n[s][1]===t&&n[s][2][0]<=e&&n[s][2][1]>=e&&n[s][0][0]<=i&&n[s][0][1]>=i)return n[s];return null},n.prototype.getTaskCfgById=function(t,e){var i=GlobalData.getConfig("ruins_tasks");for(var n in i)if(i[n][0]===t&&i[n][1]===e)return i[n];return null},n.prototype.getLayerCfg=function(t,e,i){var n=GlobalData.getConfig("ruins_layer_rewards");for(var s in n)if(n[s][0]===t&&n[s][2][0]<=e&&n[s][2][1]>=e&&n[s][3][0]<=i&&n[s][3][1]>=i)return n[s];return 0<i?this.getLayerCfg(t,e,i-1):null},i=n,e.RuinsCfg=i}(modules=modules||{}),function(o){var a,e,t,s,i;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.waitClose=!1,t._delayedItems=[],t}a=o.ruins||(o.ruins={}),t=o.core.BaseCtrl,s=o.config.RuinsCfg,e=t,__extends(n,e),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setup=function(){this.subscribe(16786867,this.GetRuinsMysteryReply),this.subscribe(16786868,this.OpenRuinsMysteryCardReply),this.subscribe(16786869,this.SetRuinsMysteryRewardReply),this.subscribe(16786870,this.GetRuinsMysteryTaskReply),this.subscribe(16786873,this.DrawRuinsMysteryTaskReply),this.subscribe(16786875,this.GetRuinsMysteryRankReply),this.subscribe(16786876,this.BuyRuinsMysteryCardReply),this.subscribe(16786874,this.DrawRuinsMysteryAllPeopleRewardReply),this.subscribe(16786871,this.GetRuinsMysteryAllPeopleTasksReply),this.subscribe(16786872,this.GetRuinsMysteryALLPeopleTotalCostCountReply),this.onGlobal("BAG_UPDATE",this.checkCardRP),this.onGlobal("PANEL_OPENED",function(t){95===t&&WindowManager.instance.isOpened(1344)&&GlobalData.dispatcher.event("RUINS_BIG_TEXT")})},n.prototype.GetRuinsMystery=function(t){console.log("GetRuinsMystery",t),this.publish(2106282,[t])},n.prototype.GetRuinsMysteryReply=function(t){console.log("GetRuinsMysteryReply",t),a.RuinsModel.instance.info=t,GlobalData.dispatcher.event("RUINS_INFO_UPDATE"),this.wait=!1,this.checkCardRP()},n.prototype.OpenRuinsMysteryCard=function(t,e,i){console.log("OpenRuinsMysteryCard",t,e,i),this.publish(2106283,[t,e,i]),this.wait=!0},n.prototype.OpenRuinsMysteryCardReply=function(t){if(console.log("OpenRuinsMysteryCardReply",t),CommonUtil.noticeError(t[0]),!t[0]){var e=t[1];if(e[0][1][0]===a.RuinsModel.instance.info[3][0]){var i=e.shift();this.waitList=e,this.waitList1=[];for(var n=0;n<e.length;n++){var s=e[n];this.waitList1.push(s),this._delayedItems.push(s)}a.RuinsModel.instance.info[4].unshift(i),console.log("恭喜 翻到了大奖 "),this.bigRewardId=i[1],GlobalData.dispatcher.event("RUINS_CARD_OPENED",[i])}else{for(var o in console.log("本次不是大奖 "),this.waitList=null,this.waitList1=null,this.bigRewardId=null,e)s=e[o],a.RuinsModel.instance.info[4].push(s),GlobalData.dispatcher.event("RUINS_CARD_OPENED",[s]),a.RuinsModel.instance.auto&&this._delayedItems.push(s);this.wait=!1}}},n.prototype.SetRuinsMysteryReward=function(t,e){console.log("SetRuinsMysteryReward",t,e),this.publish(2106284,[t,e])},n.prototype.SetRuinsMysteryRewardReply=function(t){console.log("SetRuinsMysteryRewardReply",t),CommonUtil.noticeError(t[0],"已选择终极大奖"),t[0]||(WindowManager.instance.close(1347),this.GetRuinsMystery(a.RuinsModel.instance.fType))},n.prototype.GetRuinsMysteryTask=function(t){console.log("GetRuinsMysteryTask",t),this.publish(2106285,[t])},n.prototype.GetRuinsMysteryTaskReply=function(t){console.log("GetRuinsMysteryTaskReply",t),a.RuinsModel.instance.task=t,GlobalData.dispatcher.event("RUINS_TASK_UPDATE"),this.checkTaskRP()},n.prototype.DrawRuinsMysteryTask=function(t,e){console.log("DrawRuinsMysteryTask",t,e),this.publish(2106286,[t,e])},n.prototype.DrawRuinsMysteryTaskReply=function(t){console.log("DrawRuinsMysteryTaskReply",t),CommonUtil.noticeError(t[0],"领取成功"),t[0]||this.GetRuinsMysteryTask(a.RuinsModel.instance.fType)},n.prototype.GetRuinsMysteryRank=function(t){console.log("GetRuinsMysteryRank",t),this.publish(4194813,[t])},n.prototype.GetRuinsMysteryRankReply=function(t){console.log("GetRuinsMysteryRankReply",t),a.RuinsModel.instance.rank=t,GlobalData.dispatcher.event("RUINS_RANK_UPDATE")},n.prototype.BuyRuinsMysteryCard=function(t,e){console.log("BuyRuinsMysteryCard",t,e),this.publish(2106287,[t,e])},n.prototype.BuyRuinsMysteryCardReply=function(t){console.log("BuyRuinsMysteryCardReply",t),CommonUtil.noticeError(t[0],"购买成功"),t[0]||WindowManager.instance.close(1349)},n.prototype.checkTaskRP=function(){var t=a.RuinsModel.instance.task?a.RuinsModel.instance.task[1]:[];for(var e in t)if(2===t[e][1])return void o.redPoint.RedPointCtrl.instance.setRPProperty("ruinsTaskRP",!0);o.redPoint.RedPointCtrl.instance.setRPProperty("ruinsTaskRP",!1)},n.prototype.checkTaskRP1=function(){var t=o.config.RuinsAllPeopleTasksCfg.instance.getdayByGradeArr(a.RuinsModel.instance.fType,o.festival.FestivalModel.instance.getCrossOpenServerDay(a.RuinsModel.instance.fType));if(t)for(var e=0;e<t.length;e++){var i=t[e],n=i[1],s=i[4];if(2===a.RuinsModel.instance.getStateById(n,s))return void o.redPoint.RedPointCtrl.instance.setRPProperty("ruinsTaskRP1",!0)}o.redPoint.RedPointCtrl.instance.setRPProperty("ruinsTaskRP1",!1)},n.prototype.checkCardRP=function(){if(a.RuinsModel.instance.hasBig){for(var t=o.config.BlendCfg.instance.getCfgById(97202)[1],e=0;e<t.length;e+=3)if(t[e]===a.RuinsModel.instance.fType){var i=s.instance.getLayerCfg(a.RuinsModel.instance.fType,o.festival.FestivalModel.instance.getCrossOpenServerDay(a.RuinsModel.instance.fType),a.RuinsModel.instance.info?a.RuinsModel.instance.info[1]:1),n=i?i[4]:t[e+2];if(CommonUtil.getPropCountById(t[e+1])>=n)return void o.redPoint.RedPointCtrl.instance.setRPProperty("ruinsRP",!0)}o.redPoint.RedPointCtrl.instance.setRPProperty("ruinsRP",!1)}else o.redPoint.RedPointCtrl.instance.setRPProperty("ruinsRP",!0)},n.prototype.DrawRuinsMysteryAllPeopleReward=function(t,e){console.log("领取全民任务奖励",t,e),this.publish(4194814,[t,PlayerModel.instance.actorId,e])},n.prototype.GetRuinsMysteryAllPeopleTotalCostCount=function(t){console.log("获取消耗探索罗盘总数",t),this.publish(4194815,[t])},n.prototype.GetRuinsMysteryAllPeopleTasks=function(t){console.log("获取已领取任务列表",t),this.publish(4194816,[t,PlayerModel.instance.actorId])},n.prototype.GetRuinsMysteryALLPeopleTotalCostCountReply=function(t){console.log("获取总消耗探索罗盘的数量 返回",t),a.RuinsModel.instance.countAll=t[0],GlobalData.dispatcher.event("RUINS_TASK_UPDATE"),this.checkTaskRP1()},n.prototype.DrawRuinsMysteryAllPeopleRewardReply=function(t){console.log("领取全民任务奖励返回",t),CommonUtil.noticeError(t[0],"领取成功"),t[0]||this.GetRuinsMysteryAllPeopleTasks(a.RuinsModel.instance.fType)},n.prototype.GetRuinsMysteryAllPeopleTasksReply=function(t){console.log("获取全民奖励任务信息返回",t),a.RuinsModel.instance.task1=t[0],GlobalData.dispatcher.event("RUINS_TASK_UPDATE"),this.checkTaskRP1()},i=n,a.RuinsCtrl=i}(modules=modules||{}),function(t){var o,e,i,n;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastChanel=0,t}o=t.redBag||(t.redBag={}),i=t.core.BaseCtrl,e=i,__extends(s,e),Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setup=function(){},s.prototype.sendData=function(){this.getRedEnvelopeInfo(),this.getRedEnvelopePerInfo(),this.getRedEnvelopeRecord()},s.prototype.getRedEnvelopeInfoReply=function(t){o.RedBagModel.instance.getRedEnvelopeInfoReply(t)},s.prototype.getRedEnvelopeRecordReply=function(t){o.RedBagModel.instance.getRedEnvelopeRecordReply(t)},s.prototype.getRedEnvelopePerInfoReply=function(t){o.RedBagModel.instance.getRedEnvelopePerInfoReply(t)},s.prototype.sysRedEnvelopeIssueReply=function(t){var e=this;setTimeout(function(){CommonUtil.noticeError(t[0],"红包已发送至"+o.RedBagUtils.chanelName[e.lastChanel]+"频道")},25)},s.prototype.activeRedEnvelopeIssueReply=function(t){var e=this;setTimeout(function(){CommonUtil.noticeError(t[0],"红包已发送至"+o.RedBagUtils.chanelName[e.lastChanel]+"频道")},25)},s.prototype.drawRedEnvelopeReply=function(t){0==t[0]||51907==t[0]?((WindowManager.instance.isOpened(1363)||WindowManager.instance.isOpened(1362)||WindowManager.instance.isOpened(1364))&&(o.RedBagModel.instance.isOpenDlog=!0),WindowManager.instance.open(1365),3===t[1]&&GlobalData.dispatcher.event("GER_PASSWAED_RED_BAG")):CommonUtil.noticeError(t[0])},s.prototype.reqRedDrawAgentReply=function(t){o.RedBagModel.instance.reqRedDrawAgentReply(t)},s.prototype.updateRedEnvelopeState=function(t){o.RedBagModel.instance.updateRedEnvelopeState(t)},s.prototype.addRedEnvelope=function(t){o.RedBagModel.instance.addRedEnvelope(t)},s.prototype.delRedEnvelope=function(t){o.RedBagModel.instance.delRedEnvelope(t)},s.prototype.updateRedEnvelopeRecord=function(t){o.RedBagModel.instance.updateRedEnvelopeRecord(t)},s.prototype.activeRedEnvelopeIssue=function(t){this.lastChanel=t[5],this.publish(2110064,t)},s.prototype.getRedEnvelopePerInfo=function(){this.publish(2110062,null)},s.prototype.drawRedEnvelope=function(t,e,i,n,s){void 0===s&&(s=""),o.RedBagModel.instance.showUidAndChannel.channel=e,o.RedBagModel.instance.showUidAndChannel.uid=i,this.publish(2110063,[t,e,i,s,n])},s.prototype.getRedEnvelopeInfo=function(){this.publish(4196204,null)},s.prototype.getRedEnvelopeRecord=function(){this.publish(4196205,null)},s.prototype.sysRedEnvelopeIssue=function(t,e){this.publish(4196206,[e,t]),this.lastChanel=t},s.prototype.reqRedDrawAgent=function(t,e){this.publish(4196207,[t,e])},s.prototype.chatSendPassWard=function(t,e,i,n){var s;return void 0===i&&(i=null),void 0===n&&(n=4),!!(s=i?o.RedBagModel.instance.getPkgByUid(i):o.RedBagModel.instance.getChannelAndContentByLastTmPkg(t,e,n))&&(this.drawRedEnvelope(n,t,s[0],s[6],e),!0)},s.prototype.updateRedEnvelopeExpire=function(t){o.RedBagModel.instance.updateRedEnvelopeExpire(t)},n=s,o.RedBagCtrl=n}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.fight_soul_buy||(t.fight_soul_buy={}),n=t.core.BaseCtrl,s=t.funcOpen.FuncOpenModel,e=n,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16791526,this.getZhanhunDirectlyBuyReply),this.subscribe(16791527,this.drawZhanhunDirectlyBuyAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getZhanhunDirectlyBuy()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(922==t[e]&&s.instance.getFuncIsOpen(922))return void i.FightSoulBuyMoel.instance.setRP()},a.prototype.getZhanhunDirectlyBuy=function(){this.publish(2110262,null)},a.prototype.drawZhanhunDirectlyBuyAward=function(){this.publish(2110263,null)},a.prototype.drawZhanhunDirectlyBuyAwardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},a.prototype.getZhanhunDirectlyBuyReply=function(t){i.FightSoulBuyMoel.instance.getZhanhunDirectlyBuyReply(t)},o=a,i.FightSoulBuyCtrl=o}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return e.call(this)||this}i=t.fight_soul_pay||(t.fight_soul_pay={}),n=t.funcOpen.FuncOpenModel,s=t.core.BaseCtrl,e=s,__extends(a,e),Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setup=function(){this.subscribe(16791528,this.getZhanhunAccPayReply),this.subscribe(16791529,this.drawZhanhunAccPayAwardReply),this.onGlobal("FUNC_OPEN_UPDATE",this.funOpenSetSprintType),this.getZhanhunAccPay()},a.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)if(923==t[e]&&n.instance.getFuncIsOpen(923))return void i.FightSoulPayModel.instance.setRP()},a.prototype.getZhanhunAccPayReply=function(t){i.FightSoulPayModel.instance.getZhanhunAccPayReply(t)},a.prototype.drawZhanhunAccPayAwardReply=function(t){CommonUtil.noticeError(t[0],"领取成功")},a.prototype.getZhanhunAccPay=function(){this.publish(2110264,null)},a.prototype.drawZhanhunAccPayAward=function(t){this.publish(2110265,[t])},o=a,i.FightSoulPayCtrl=o}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c,p,u,d,y,g,f,_,m,v,b,T,I,C,x,B,S,M,w,P,A,R,k,E,D,L,H,U,O,G,F,N,z,W,j,q,Y,V,Z,X,J,Q,K,$,tt,et,it,nt,st,ot,at,rt,lt,ht,ct,pt,ut,dt,yt,gt,ft,_t,mt,vt,bt,Tt,It,Ct,xt,Bt,St,Mt,wt,Pt,At,Rt,kt,Et,Dt,Lt,Ht,Ut,Ot,Gt,Ft,Nt,zt,Wt,jt,qt,Yt,Vt,Zt,Xt,Jt,Qt,Kt,$t,te,ee,ie,ne,se,oe,ae,re,le,he,ce,pe,ue,de,ye,ge,fe,_e,me,ve,be,Te,Ie,Ce,xe,Be,Se,Me,we,Pe,Ae,Re,ke,Ee,De,Le,He,Ue,Oe,Ge,Fe,Ne,ze,We,je,qe,Ye,Ve,Ze,Xe,Je,Qe,Ke,$e,ti,ei,ii,ni,si,oi,ai;function ri(){}e=t.subpack||(t.subpack={}),i=t.festival.FestivalCtrl,n=t.sceneTeam.SceneTeamCtrl,s=t.teamBattle.TeamBattleCtrl,o=t.update_alert.UpdateAlertCtrl,a=t.newOfficialAccount.NewOfficialAccountCtrl,r=t.openChallenge.OpenChallengeCtrl,l=t.national_day_treasure.NationalDayTreasureCtrl,h=t.redPack.RedPackCtrl,c=t.rush_to_purchase.RushToPurchaseCtrl,p=t.dragon.DragonCtrl,u=t.archive.ArchiveCtrl,d=t.marry.MarryCtrl,y=t.baby.BabyCtrl,g=t.li_dong_store.LiDongStoreCtrl,f=t.single_dog_continuous_pay.SingleDogContinuousPayCtrl,_=t.single_dog_cumulate_pay.SingleDogCumulatePayCtrl,m=t.single_dog_seven_days_pay.SingleDogSevenDaysPayCtrl,v=t.single_dog_seven_days_consume.SingleDogSevenDaysConsumeCtrl,b=t.single_dog_single_pay.SingleDogSinglePayCtrl,T=t.single_dog_treasure.SingleDogTreasureCtrl,I=t.single_dog_score_rank.SingleDogScoreRankCtrl,C=t.single_dog_sart.SingleDogSartCtrl,x=t.single_dog_good_man.SingleDogGoodManCtrl,B=t.single_dog_collection.SingleDogCollectionCtrl,S=t.yuanShen.YuanShenCtrl,M=t.spiritDungeon.SpiritDungeonCtrl,w=t.zhiZhenSinglePay.ZhiZhenSinglePayCtrl,P=t.zhiZhenContinuousPay.ZhiZhenContinuousPayCtrl,A=t.zhiZhenCumulatePay.ZhiZhenCumulatePayCtrl,R=t.ZhiZhenPayRank.ZhiZhenPayRankCtrl,k=t.zadan.ZaDanCtrl,E=t.he_qu_continuous_pay.HeQuContinuousPayCtrl,D=t.he_qu_xunbao_happy.HeQuXunBaoHappyCtrl,L=t.he_qu_online_reward.HeQuOnLineRewardCtrl,H=t.he_qu_cumulate_pay.HeQuCumulatePayCtrl,U=t.warband.WarbandCtrl,O=t.welfare_officer.WelfareOfficerCtrl,G=t.yybPrivilege.YybPrivilegeCtrl,F=t.fire_contention.FireContentionCtrl,N=t.qq.QQCtrl,z=t.thunderbolt_equip.ThunderboltEquipCtrl,W=t.nothingness_world.NothingnessWorldCtrl,j=t.treasureLand.TreasureLandCtrl,q=t.thunderbolt_buy.ThunderboltBuyCtrl,Y=t.mysterious_store.MysteriousStoreCtrl,V=t.hit_engineer.HitEngineerCtrl,Z=t.family_party.FamilyPartyCtrl,X=t.fly_up.FlyUpCtrl,J=t.divinatory_card.DivinatoryCardCtrl,Q=t.childrens_day_continuous_pay.ChildrensDayContinuousPayCtrl,K=t.childrens_day_cumulate_pay.ChildrensDayCumulatePayCtrl,$=t.childrens_day_seven_days_consume.ChildrensDaySevenDaysConsumeCtrl,tt=t.childrens_day_seven_days_pay.ChildrensDaySevenDaysPayCtrl,et=t.childrens_day_single_pay.ChildrensDaySinglePayCtrl,it=t.childrens_day_treasure.ChildrensDayTreasureCtrl,nt=t.childrens_day_pay_rank.ChildrensDayPayRankCtrl,st=t.bar_day_continuous_pay.BarDayContinuousPayCtrl,ot=t.bar_day_cumulate_pay.BarDayCumulatePayCtrl,at=t.bar_day_single_pay.BarDaySinglePayCtrl,rt=t.bar_day_seven_days_consume.BarDaySevenDaysConsumeCtrl,lt=t.guide.GuideCtrl,ht=t.sound.SoundCtrl,ct=t.marry_arena.MarryArenaCtrl,pt=t.zerobuy.ZerobuyCtrl,ut=t.announcement.AnnouncementCtrl,dt=t.discountGift.DiscountGiftCtrl,yt=t.cumulate_pay.CumulatePayModelCtrl,gt=t.continue_pay.ContinuePayCtrl,ft=t.cousume_reward.ConsumeRewardCtrl,_t=t.cumulate2_pay.Cumulate2PayCtrl,mt=t.every_day_rebate.EveryDayRebateCtrl,vt=t.cumulatePay_shenHun.CumulatePayShenHunCtrl,bt=t.cumulatePay_tianZhu.CumulatePayTianZhuCtrl,Tt=t.day_pay.DayPayCtrl,It=t.mission.MissionCtrl,Ct=t.sign.SignCtrl,xt=t.onlineGift.OnlineGiftCtrl,Bt=t.monthCard.MonthCardCtrl,St=t.pay_reward.PayRewardCtrl,Mt=t.day_consume_reward.DayConsumeRewardCtrl,wt=t.openAward.OpenAwardCtrl,Pt=t.week_login.WeekLoginCtrl,At=t.singlePay.SinglePayCtrl,Rt=t.repeatPay.RepeatPayCtrl,kt=t.limit_pack.LimitPackCtrl,Et=t.first_pay.FirstPayCtrl,Dt=t.invest_reward.InvestRewardCtrl,Lt=t.kuanghuan.KuangHuanCtrl,Ht=t.invitation.InvitationCtrl,Ut=t.sevenDayGift.SevenDayGiftCtrl,Ot=t.halfMonthGift.HalfMonthGiftCtrl,Gt=t.rotary_table_soraing.RotaryTableSoaringCtrl,Ft=t.login_reward.LoginRewardCtrl,Nt=t.rotary_table_jiuzhou.RotaryTableJiuZhouCtrl,zt=t.first_login_alert.FirstLoginAlertCtrl,Wt=t.onceReward.OnceRewardCtrl,jt=t.officialAccount.OfficialAccountCtrl,qt=t.gloves.GlovesCtrl,Yt=t.one_buy.OneBuyCtrl,Vt=t.fight_talisman.FightTalismanCtrl,Zt=t.money_cat.MoneyCatCtrl,Xt=t.prevent_fool_question.PreventFoolCtrl,Jt=t.the_carnival.TheCarnivalCtrl,Qt=t.familiars_down.FamiliarsDownCtrl,Kt=t.payRank.PayRankCtrl,$t=t.realName.RealNameCtrl,te=t.weekConsume.WeekConsumeCtrl,ee=t.goldBody.GoldBodyCtrl,ie=t.rankingList.PlayerRankingCtrl,ne=t.lineClearOut.LineClearOutCtrl,se=t.zhizun.ZhizunCtrl,oe=t.sprint_rank.SprintRankTaskCtrl,ae=t.sprint_rank.SprintRankCtrl,re=t.gushen.GushenCtrl,le=t.xianDan.XianDanCtrl,he=t.resBack.ResBackCtrl,ce=t.vip_buy.VipBuyCtrl,pe=t.treasure.TreasureCtrl,ue=t.soaring_rank.SoaringRankCtrl,de=t.soaring_cumulatePay.SoaringCumulatePayCtrl,ye=t.soaring_singlePay.SoaringSinglePayCtrl,ge=t.soaring_dayConsumeReward.SoaringDayConsumeRewardCtrl,fe=t.soaring_panicBuyingGift.SoaringPanicBuyingGiftCtrl,_e=t.soaring_specialGift.SoaringSpecialGiftCtrl,me=t.susan_slade.SusanSladeCtrl,ve=t.Offline.OfflineCtrl,be=t.forbiddenBoss.ForbiddenBossCtrl,Te=t.equipSuit.EquipSuitCtrl,Ie=t.equipment_zu_hun.EquipmentZuHunCtrl,Ce=t.sheng_yu.ShenYuBossCtrl,xe=t.teamInvite.TeamInviteCtrl,Be=t.yunmeng.YunMengMiJingCtrl,Se=t.ladder.LadderCtrl,Me=t.runeCompose.RuneComposeCtrl,we=t.peakDuel.PeakDuelCtrl,Pe=t.stone.StoneCtrl,Ae=t.rune.RuneCtrl,Re=t.rune_copy.RuneCopyCtrl,ke=t.feed_back.FeedBackCtrl,Ee=t.jiu_xiao_ling.JiuXiaoLingCtrl,De=t.bigTower.BigTowerCtrl,Le=t.foreign_boss_panel.ForeignBossCtrl,He=t.wx_module.wxShareCtrl,Ue=t.grain_full_continuous_pay.GrainFullContinuousPayCtrl,Oe=t.grain_full_single_pay.GrainFullSinglePayCtrl,Ge=t.grain_full_treasure.GrainFullTreasureCtrl,Fe=t.grain_full_cumulate_pay.GrainFullCumulatePayCtrl,Ne=t.grain_full_seven_days_consume.GrainFullSevenDaysConsumeCtrl,ze=t.showEquip.ShowEquipCtrl,We=t.outside_show_dungeon.OutsideShowDungeonCtrl,je=t.extreme_equip.ExtremeEquipCtrl,qe=t.immortalContest.ImmortalContestCtrl,Ye=t.union_war.UnionWarCtrl,Ve=t.anniversary_day_continuous_pay.AnniversaryDayContinuousPayCtrl,Ze=t.anniversary_day_cumulate_pay.AnniversaryDayCumulatePayCtrl,Xe=t.anniversary_day_seven_days_consume.AnniversaryDaySevenDaysConsumeCtrl,Je=t.anniversary_day_seven_days_pay.AnniversaryDaySevenDaysPayCtrl,Qe=t.anniversary_day_single_pay.AnniversaryDaySinglePayCtrl,Ke=t.anniversary_day_treasure.AnniversaryDayTreasureCtrl,$e=t.anniversary_day_pay_rank.AnniversaryDayPayRankCtrl,ti=t.hit_birthday_cake.HitBirthdayCakeCtrl,ei=t.destinyPellet.DestinyPelletCtrl,ii=t.ruins.RuinsCtrl,ni=t.redBag.RedBagCtrl,si=t.fight_soul_buy.FightSoulBuyCtrl,oi=t.fight_soul_pay.FightSoulPayCtrl,ri.init=function(){d.instance.setup(),y.instance.setup(),Re.instance.setup(),Ae.instance.setup(),Pe.instance.setup(),Be.instance.setup(),Me.instance.setup(),we.instance.setup(),Se.instance.setup(),s.instance.setup(),n.instance.setup(),xe.instance.setup(),be.instance.setup(),Te.instance.setup(),Ie.instance.setup(),Ce.instance.setup(),ee.instance.setup(),ie.instance.setup(),ne.instance.setup(),se.instance.setup(),ve.instance.setup(),oe.instance.setup(),ae.instance.setup(),re.instance.setup(),le.instance.setup(),he.instance.setup(),te.instance.setup(),Ct.instance.setup(),xt.instance.setup(),pe.instance.setup(),ue.instance.setup(),de.instance.setup(),ye.instance.setup(),ge.instance.setup(),fe.instance.setup(),_e.instance.setup(),me.instance.setup(),ce.instance.setup(),Bt.instance.setup(),St.instance.setup(),Mt.instance.setup(),wt.instance.setup(),Pt.instance.setup(),At.instance.setup(),Rt.instance.setup(),kt.instance.setup(),Et.instance.setup(),zt.instance.setup(),Dt.instance.setup(),Lt.instance.setup(),Ut.instance.setup(),Ot.instance.setup(),Gt.instance.setup(),Ft.instance.setup(),Nt.instance.setup(),Ht.instance.setup(),Wt.instance.setup(),$t.instance.setup(),jt.instance.setup(),qt.instance.setup(),Yt.instance.setup(),Vt.instance.setup(),Zt.instance.setup(),Kt.instance.setup(),Xt.instance.setup(),Jt.instance.setup(),Qt.instance.setup(),De.instance.setup(),It.instance.setup(),Tt.instance.setup(),dt.instance.setup(),ut.instance.setup(),Ee.instance.setup(),ke.instance.setup(),yt.instance.setup(),gt.instance.setup(),ft.instance.setup(),_t.instance.setup(),vt.instance.setup(),bt.instance.setup(),mt.instance.setup(),pt.instance.setup(),i.instance.setup(),o.instance.setup(),a.instance.setup(),r.instance.setup(),l.instance.setup(),u.instance.setup(),h.instance.setup(),p.instance.setup(),c.instance.setup(),g.instance.setup(),f.instance.setup(),_.instance.setup(),v.instance.setup(),m.instance.setup(),b.instance.setup(),T.instance.setup(),I.instance.setup(),C.instance.setup(),x.instance.setup(),B.instance.setup(),S.instance.setup(),M.instance.setup(),w.instance.setup(),A.instance.setup(),P.instance.setup(),R.instance.setup(),k.instance.setup(),E.instance.setup(),H.instance.setup(),L.instance.setup(),D.instance.setup(),U.instance.setup(),O.instance.setup(),G.instance.setup(),F.instance.setup(),N.instance.setup(),z.instance.setup(),W.instance.setup(),j.instance.setup(),q.instance.setup(),Y.instance.setup(),Le.instance.setup(),V.instance.setup(),Z.instance.setup(),Ue.instance.setup(),Oe.instance.setup(),Ge.instance.setup(),Fe.instance.setup(),Ne.instance.setup(),X.instance.setup(),J.instance.setup(),ct.instance.setup(),Q.instance.setup(),K.instance.setup(),$.instance.setup(),tt.instance.setup(),et.instance.setup(),it.instance.setup(),nt.instance.setup(),st.instance.setup(),ot.instance.setup(),at.instance.setup(),rt.instance.setup(),He.instance.setup(),Ye.instance.setup(),ze.instance.setup(),We.instance.setup(),je.instance.setup(),qe.instance.setup(),ei.instance.setup(),Ve.instance.setup(),Ze.instance.setup(),Xe.instance.setup(),Je.instance.setup(),Qe.instance.setup(),Ke.instance.setup(),$e.instance.setup(),ti.instance.setup(),ii.instance.setup(),ni.instance.setup(),si.instance.setup(),oi.instance.setup(),lt.instance.setup(),ht.instance.setup()},ai=ri,e.SubModulesUtil=ai}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.festival||(t.festival={}),n=t.common.CommonUtil,s=t.common.SimpleList,i=ui.NationalDayJQViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=s.create(this.getItemClass(),640,168,1,1,0,6),this._list.width=640,this._list.height=665,this.addChildAt(this._list,4),this._list.x=40,this._list.y=300,this._list.visible=!0,n.setHTMLPro(this.tipsHTML,"#ffffff","SimHei",22)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,n.gotoSuggestUp),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.showUI=function(){this._list.datas=this.getDatas().sort(this.sortFunc.bind(this)),this.setActivitiTime(),this.jinDuText.text="今日已充:"+this.getMoneyAcc()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.tipsHTML.innerHTML="活动期间,累计<span style='color:#50ff28'>连续多日</span>每日充值达到指定金额,即可领取豪礼",this.jinDuText.visible=!0,this.showUI(),this.showUI1()},a.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},a.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1];return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},a.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=this.getFuncOpen();this.getRestTime()>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},a.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampDDHHMMToHHMMSS(this.getRestTime()),this.getRestTime()<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.getDatas=function(){return null},a.prototype.getItemClass=function(){return null},a.prototype.getRestTime=function(){return 0},a.prototype.getFuncOpen=function(){return!1},a.prototype.getMoneyAcc=function(){return 0},o=a,e.ContinuousPayBasePanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="dragon_boat_day/image_txwm_12.jpg",t.titleTxt.text="单身连充",t}e=t.childrens_day_continuous_pay||(t.childrens_day_continuous_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.ChildrensDayContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.ChildrensDayContinuousPayItem},o.prototype.getRestTime=function(){return e.ChildrensDayContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(790)},o.prototype.getMoneyAcc=function(){return e.ChildrensDayContinuousPayModel.instance.moneyAcc},s=o,e.ChildrensDayContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("festival_pay_acc"),e=0,i=t.length;e<i;e++){var n=t[e];this._tab[n[0]]=n}},n.prototype.getCfgsById=function(t){return this._tab[t]},i=n,e.FestivalPayAccCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.festival||(t.festival={}),n=t.common.CommonUtil,s=t.common.SimpleList,i=ui.NationalDayJQViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=s.create(this.getItemClass(),640,168,1,1,0,6),this._list.width=640,this._list.height=665,this.addChildAt(this._list,4),this._list.x=40,this._list.y=300,this._list.visible=!0},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,n.gotoSuggestUp),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.showUI=function(){this._list.datas=this.getDatas().sort(this.sortFunc.bind(this)),this.setActivitiTime()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.tipsHTML.innerHTML="<span style='color:#50ff28;font-size:22px;font-family:SimHei;'>\n            </span><span style='color:#ffffff;font-size:22px;font-family:SimHei;'>\n            活动期间,累计充值达到指定金额,即可领取豪礼\n            </span>",this.jinDuText.visible=!1,this.showUI(),this.showUI1()},a.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1];return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},a.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=this.getFuncOpen();n.getZero0clockTimeStamp()>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},a.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampToHHMMSS(n.getZero0clockTimeStamp()),n.getZero0clockTimeStamp()<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},a.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.getDatas=function(){return null},a.prototype.getItemClass=function(){return null},a.prototype.getFuncOpen=function(){return!1},o=a,e.CumulatePayBasePanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="dragon_boat_day/image_txwm_14.jpg",t.titleTxt.text="每日累充",t}e=t.childrens_day_cumulate_pay||(t.childrens_day_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.ChildrensDayCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.ChildrensDayCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(791)},s=o,e.ChildrensDayCumulatePayPanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("consume_reward_fs"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgByType=function(t){for(var e=[],i=0,n=this.getArr.length;i<n;i++)t==this.getArr[i][3]&&e.push(this.getArr[i]);return e},i=n,e.SoaringDayConsumeRewardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.consumeStrArr=["","元宝","仙玉","仙玉","仙玉","仙玉"],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this.consumeStrs={};for(var t=GlobalData.getConfig("festival_cost_total"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e],s=n[0],o=n[4],a=n[5];this._tab[s]=t[e],this.consumeStrs[o]||(this.consumeStrs[o]=this.consumeStrArr[a])}},n.prototype.getCfgsById=function(t){return this._tab[t]},n.prototype.getStrByType=function(t){return this.consumeStrs[t]},i=n,e.festivalCostTotalCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.festival||(t.festival={}),n=t.common.CommonUtil,s=t.common.SimpleList,i=ui.NationalDayJQViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=s.create(this.getItemClass(),640,168,1,1,0,6),this._list.width=640,this._list.height=665,this.addChildAt(this._list,4),this._list.x=40,this._list.y=300,this._list.visible=!0},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_UPDATE_FEST_COST_TOTAL",this,this.showUI),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.showUI=function(){this._list.datas=this.getDatas().sort(this.sortFunc.bind(this)),this.setActivitiTime()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.tipsHTML.innerHTML="<span style='color:#50ff28;font-size:22px;font-family:SimHei;'>\n            </span><span style='color:#ffffff;font-size:22px;font-family:SimHei;'>\n            活动期间，累计消费"+t.config.festivalCostTotalCfg.instance.getStrByType(this.typeNum)+"达到指定数量，即可领取豪礼\n            </span>",this.jinDuText.visible=!1,this.showUI(),this.showUI1()},a.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1];return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},a.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=this.getFuncOpen();this.getRestTime()>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},a.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampDDHHMMToHHMMSS(this.getRestTime()),this.getRestTime()<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},a.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==t.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):(this.okBtn.visible=!1,this.wanChengImg.visible=!0,this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029))},a.prototype.okBtnHandler=function(){0!=t.first_pay.FirstPayModel.instance.giveState?t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==t.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381):WindowManager.instance.open(118)},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.getDatas=function(){return null},a.prototype.getItemClass=function(){return null},a.prototype.getRestTime=function(){return 0},a.prototype.getFuncOpen=function(){return!1},o=a,e.SevenDaysConsumeBasePanel=o}(modules=modules||{}),function(e){var t,i,n,s;function o(){var t=i.call(this)||this;return t.typeNum=e.festival.FestivalModel.instance.ChildrensDayType,t.bgImg.skin="dragon_boat_day/image_txwm_13.jpg",t.titleTxt.text="七日累消",t}t=e.childrens_day_seven_days_consume||(e.childrens_day_seven_days_consume={}),n=e.funcOpen.FuncOpenModel,i=e.festival.SevenDaysConsumeBasePanel,__extends(o,i),o.prototype.getDatas=function(){return t.ChildrensDaySevenDaysConsumeModel.instance.rewardList},o.prototype.getItemClass=function(){return t.ChildrensDaySevenDaysConsumeItem},o.prototype.getRestTime=function(){return t.ChildrensDaySevenDaysConsumeModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(792)},s=o,t.ChildrensDaySevenDaysConsumePanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("festival_pay_total"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e][0];this._tab[n]=t[e]}},n.prototype.getCfgsById=function(t){return this._tab[t]},i=n,e.FestivalPayTotalCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.festival||(t.festival={}),n=t.common.CommonUtil,s=t.common.SimpleList,i=ui.NationalDayJQViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=s.create(this.getItemClass(),640,168,1,1,0,6),this._list.width=640,this._list.height=665,this.addChildAt(this._list,4),this._list.x=40,this._list.y=300,this._list.visible=!0},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,n.gotoSuggestUp),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.showUI=function(){this._list.datas=this.getDatas().sort(this.sortFunc.bind(this)),this.setActivitiTime()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.tipsHTML.innerHTML="<span style='color:#50ff28;font-size:22px;font-family:SimHei;'>\n            </span><span style='color:#ffffff;font-size:22px;font-family:SimHei;'>\n             活动期间,累计充值达到指定金额,即可领取豪礼\n            </span>",this.jinDuText.visible=!1,this.showUI(),this.showUI1()},a.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1];return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},a.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=this.getFuncOpen();this.getRestTime()>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},a.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampDDHHMMToHHMMSS(this.getRestTime()),this.getRestTime()<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},a.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.getDatas=function(){return null},a.prototype.getItemClass=function(){return null},a.prototype.getRestTime=function(){return 0},a.prototype.getFuncOpen=function(){return!1},o=a,e.SevenDaysPayBasePanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.titleTxt.text="七日累充",t.bgImg.skin="dragon_boat_day/image_txwm_19.jpg",t}e=t.childrens_day_seven_days_pay||(t.childrens_day_seven_days_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.SevenDaysPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.ChildrensDaySevenDaysPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.ChildrensDaySevenDaysPayItem},o.prototype.getRestTime=function(){return e.ChildrensDaySevenDaysPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(793)},s=o,e.ChildrensDaySevenDaysPayPanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("festival_pay_day"),e=0,i=t.length;e<i;e++){var n=t[e];this._tab[n[0]]=n}},n.prototype.getCfgsById=function(t){return this._tab[t]},i=n,e.FestivalPayDayCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.festival||(t.festival={}),n=t.common.CommonUtil,s=t.common.SimpleList,i=ui.NationalDayJQViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=s.create(this.getItemClass(),640,168,1,1,0,6),this._list.width=640,this._list.height=665,this.addChildAt(this._list,4),this._list.x=40,this._list.y=300,this._list.visible=!0},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,n.gotoSuggestUp),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.showUI=function(){this._list.datas=this.getDatas().sort(this.sortFunc.bind(this)),this.setActivitiTime()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.tipsHTML.innerHTML="<span style='color:#50ff28;font-size:20px;font-family:SimHei;'>\n            购买元宝充值界面\n            </span><span style='color:#ffffff;font-size:20px;font-family:SimHei;'>\n           单笔充值指定金额可领取奖励,多次充值金额不累加\n            </span>",this.jinDuText.visible=!1,this.showUI(),this.showUI1()},a.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},a.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=this.getFuncOpen();n.getZero0clockTimeStamp()>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},a.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampToHHMMSS(n.getZero0clockTimeStamp()),n.getZero0clockTimeStamp()<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.sortFunc=function(t,e){return 1},a.prototype.getDatas=function(){return null},a.prototype.getItemClass=function(){return null},a.prototype.getFuncOpen=function(){return!1},o=a,e.SinglePayBasePanel=o}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="dragon_boat_day/image_txwm_16.jpg",t}a=t.childrens_day_single_pay||(t.childrens_day_single_pay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.ChildrensDaySinglePayModel.instance.getState(t[1],i),o=a.ChildrensDaySinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.ChildrensDaySinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.ChildrensDaySinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(794)},n=s,a.ChildrensDaySinglePayPanel=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){if(this._tab={},this._Dates=GlobalData.getConfig("national_xunbao_rank_award"),this._Dates)for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t];if(e){var i=e[9];this._tab[i]||(this._tab[i]=new Array),this._tab[i].push(e)}}},n.prototype.getLaet=function(t,e,i){var n,s=this._tab[t];if(s)for(var o=0;o<s.length;o++){var a=s[o];if(a){var r=a[8],l=a[0],h=l[0],c=l[1],p=r[0],u=r[1];if(p<=e&&e<=u&&h<=i&&i<=c){var d=a[1];n?d[1]>n[1][1]&&(n=a):n=a}}}return n},n.prototype.getDate=function(t,e,i,n){var s=this._tab[t];if(s)for(var o=0;o<s.length;o++){var a=s[o];if(a){var r=a[8],l=a[0],h=l[0],c=l[1],p=r[0],u=r[1];if(p<=e&&e<=u&&h<=i&&i<=c){var d=a[1];if(n>=d[0]&&n<=d[1])return a}}}return null},i=n,e.NationalXunbaoRankAwardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){if(this._tab={},this._Dates=GlobalData.getConfig("national_xunbao_score_award"),this._Dates)for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t];if(e){var i=e[5];this._tab[i]||(this._tab[i]=new Array),this._tab[i].push(e)}}},n.prototype.get_condition=function(t,e,i,n){var s=this._tab[t];if(s)for(var o=0,a=0;a<s.length;a++){var r=s[a];if(r){var l=r[4],h=r[0],c=h[0],p=h[1],u=l[0],d=l[1];if(u<=e&&e<=d&&c<=i&&i<=p){var y=r[1];if(n==o)return y;o++}}}},n.prototype.getDate=function(t,e,i){var n=this._tab[t],s=new Array;if(n)for(var o=0;o<n.length;o++){var a=n[o];if(a){var r=a[4],l=a[0],h=l[0],c=l[1],p=r[0],u=r[1];p<=e&&e<=u&&h<=i&&i<=c&&s.push(a)}}return s},n.prototype.getIndexByScore=function(t,e,i,n){var s=this._tab[t];if(s)for(var o=0,a=0;a<s.length;a++){var r=s[a];if(r){var l=r[4],h=r[0],c=h[0],p=h[1],u=l[0],d=l[1];if(u<=e&&e<=d&&c<=i&&i<=p){if(r[1]===n)return o;o++}}}return 0},i=n,e.NationalXunbaoScoreAwardCfg=i}(modules=modules||{}),function(d){var t,e,i,y,r,a,l,g,h,c,p,f,u,_,m,v,n;function s(){return e.call(this)||this}function o(){var t=v.call(this)||this;return t._bolll=!1,t._bolllPos=!1,t._index=0,t._index1=0,t}t=d.festival||(d.festival={}),i=d.config.NationalXunbaoScoreAwardCfg,y=d.config.TreasureCfg,r=d.config.NationalXunbaoRankAwardCfg,a=d.common.BtnGroup,l=d.common.CustomClip,g=laya.maths.Point,h=d.bag.BagUtil,c=d.config.BlendCfg,p=d.notice.SystemNoticeManager,f=d.common.CommonUtil,u=d.common.ProgressBarCtrl,_=d.common.SimpleList,e=d.common.ItemRender,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.text=new laya.html.dom.HTMLDivElement,this.text.width=487,this.height=20,this.addChild(this.text),this.mouseEnabled=!1},s.prototype.setData=function(t){var e=t[0],i=t[1],n=f.getColorById(i),s=f.getNameByItemId(i);this.text.innerHTML="<span style='color:#ffffff;font-size: 20px'>天赐鸿福,</span><span style='color:#ffec7c;font-size: 20px;'>["+e+"]</span><span style='color:#ffffff;font-size: 20px'>获得了</span><span style='color:"+n+";font-size: 20px;'>"+s+"</span>",this.visible=!0},m=s,v=ui.NationalDayTreasureViewUI,__extends(o,v),Object.defineProperty(o.prototype,"getRestTm",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getState",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getScore",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getId",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xianyu",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oneNum",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"twoNum",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"threeNum",{get:function(){return 0},enumerable:!0,configurable:!0}),o.prototype.getgRade=function(){return[0,0]},o.prototype.getSelfBroadcast=function(){return[]},o.prototype.callBakFunction=function(t){},o.prototype.getClassCtrl=function(t){},o.prototype.getConsumeRank=function(){},o.prototype.getShuJu=function(){},o.prototype.getFuncOpen=function(){return!1},o.prototype.getNationalXunbaoScoreAward=function(){},o.prototype.openBtnHandler=function(){},o.prototype.openBtnHandler1=function(){},o.prototype.openBtnHandler2=function(){},o.prototype.openBtnHandler3=function(t){},o.prototype.initialize=function(){v.prototype.initialize.call(this),this._isReward=!1,this.centerX=0,this.centerY=0,this._bolll=!1,this._bolllPos=!1,this._index=0,this._index1=0,this._sevStringArr=new Array,this._jiLubtnGroup=new a,this._jiLubtnGroup.setBtns(this.severList,this.selfList),this._proCtrl=new u(this.blessImg,340,this.blessTxt),this._showItem=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11,this.item12,this.item13,this.item14],this._clipArr=new Array;for(var t=0;t<this._showItem.length;t++){var e=new Array,i=new l;if(0==t||1==t){this._showItem[t].addChild(i),i.pos(-75,-75,!0),i.skin="assets/effect/item_effect3.atlas";for(var n=1;n<16;n++){var s="item_effect3/"+n+".png";e.push(s)}}else{this._showItem[t].addChild(i),i.pos(-14,-22,!0),i.skin="assets/effect/item_effect2.atlas";for(var o=0;o<16;o++)s="item_effect2/"+o+".png",e.push(s)}i.frameUrls=e,i.durationFrame=6,i.visible=!1,i.name="clip",this._clipArr.push(i)}this._personalList=_.create(m,487,20,1,1,0,8),this._personalList.width=500,this._personalList.height=112,this.selfPanel.addChild(this._personalList),this._personalList.x=0,this._personalList.y=0,f.setHTMLPro(this.tipText,"#ffffff","SimHei",20),this.tipText.style.lineHeight=28,this.probabilityTipsTxt.underline=!0,this.getBtn.underline=!0,this.initializeClip(),this.rewardShowItem.setDataFun([1,.4,.35,.45,"assets/icon/ui/sprint_rank/"])},o.prototype.onEvt=function(){v.prototype.onEvt.call(this),this.onAutoEvt(this._jiLubtnGroup,"change",this,this.jiLubtnGroupHandler),this.onAutoClick(this.oneBtn,this,this.xunBaoHandler,[0]),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.fiftyBtn,this,this.xunBaoHandler,[2]),this.onAutoClick(this.probabilityTipsTxt,this,this.probabilityHandler),this.onAutoClick(this.caiQiReceiveBtn,this,this.caiQiReceiveBtnHandler),this.onAutoClick(this.rankBtn,this,this.rankBtnHandler),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.shouChouBiBtn,this,this.rankBtnHandler),this.onAutoClick(this.closeBtn1,this,this.closeBtn1Handler),this.onAutoGlobalEvt("SEVER_BROADCAST_LIST",this,this.updateSeverList),this.onAutoGlobalEvt("NATIONALDAY_TREASURE__SHOWHTML",this,this.showHtml),this.onAutoGlobalEvt("RUN_XUNBAO_REPLY",this,this.xunBaoReply),this.onAutoGlobalEvt("BLESSING_UPDATE",this,this.setItemNum),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setItemNum),this.onAutoGlobalEvt("NATIONALDAY_TREASURE_MY",this,this.updateSelfList),this.onAutoGlobalEvt("NATIONALDAY_TREASURE_UPDATE",this,this.changproUI),this.onAutoGlobalEvt("NATIONALDAY_TREASURE_KUA_TIAN_UPDATE",this,this.upDateModelAndRequest),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.isOver),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){d.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},o.prototype.onOpened=function(){v.prototype.onOpened.call(this),this.tipText.innerHTML='寻宝1次加<span style="color: #0ecf09;">10</span>积分，积分每日<span style="color: #ffec7c;">24点重置</span>，23点后<span style="color: #ffec7c;">停止获取</span>',this._bolll=!1,this._bolllPos=!1,this._index=0,this._index1=0,this._jiLubtnGroup.selectedIndex=0,this._cdFlag=!1,this._tipsModelIsOpen=!1,this.updateUI(),this.setItemNum(),this.getShuJu(),this.updateSeverList(),this.updateSelfList(),this.getConsumeRank();var t=(GlobalData.serverTime-GlobalData.timeZoneOffset)%864e5,e=Math.floor(1e3*Math.random())+500;0!=t&&(e+=864e5-t),console.log("delay: "+e/1e3),Laya.timer.once(e,this,this.getConsumeRank)},o.prototype.isOver=function(){d.festival.FestivalModel.instance.getHuoDongType(this.festivalType)||this.close()},o.prototype.updateUI=function(){this.showReward(),this.changproUI(),this.showShouChouBiDeImg()},o.prototype.caiQiReceiveBtnHandler=function(){this._isReward?this.getNationalXunbaoScoreAward():this.openBtnHandler()},o.prototype.rankBtnHandler=function(){this.openBtnHandler1(),this.closeBtn1Handler()},o.prototype.getBtnHandler=function(){this.openBtnHandler2(),this.close()},o.prototype.probabilityHandler=function(){var t=d.festival.FestivalModel.instance.info[this.festivalType],e=d.festival.FestivalModel.instance.getHuoDongType(this.festivalType);if(t&&e){var i=t[5],n=t[1],s=y.instance.getItemShow(this._type,this.festivalType,i,n)[0][8][0],o="";o+=c.instance.getCfgById(s)[2],WindowManager.instance.open(443,["概率公示",o,695])}},o.prototype.jiLubtnGroupHandler=function(){0===this._jiLubtnGroup.selectedIndex?(this.severPanel.visible=!0,this.selfPanel.visible=!1):1===this._jiLubtnGroup.selectedIndex&&(this.severPanel.visible=!1,this.selfPanel.visible=!0)},o.prototype.xunBaoHandler=function(t){var e=this;if(this._cdFlag)p.instance.addNotice("操作过于频繁",!0);else{var i,n,s;this._cdFlag=!0,Laya.timer.once(500,this,this.setFlag),i=this.oneNum,n=this.twoNum,s=this.threeNum;var o=!1,a=this.xianyu;switch(t){case 0:o=i<=a;break;case 1:o=n<=a;break;case 2:o=s<=a}o?this.callBakFunction(function(){e.getClassCtrl(t)}):h.openLackPropAlert(this.getId,1)}},o.prototype.xunBaoReply=function(){var t=d.treasure.TreasureModel.instance.runXunbaoReply;if(0==t[1]){this.getShuJu();var e=t[0],i=t[2];if(i.length<10){for(var n=[],s=new g(300,350),o=0;o<i.length;o++){var a=[i[o],s,this.height];n.push(a)}GlobalData.dispatcher.event("ZXIANYU_EFFNATIONALDAY_TREASURE_EFFECTECT",[n]),f.delayedPutInBag()}9<i.length&&this.openBtnHandler3(i);var r=d.festival.FestivalModel.instance.info[this.festivalType],l=d.festival.FestivalModel.instance.getHuoDongType(this.festivalType);if(!r||!l)return;var h=r[5],c=r[1],p=y.instance.getBestIdByType(e,0,this.festivalType,h,c),u=new Array;for(o=0;o<i.length;o++)0<=p.indexOf(i[o])&&u.push(i[o]);0<u.length&&WindowManager.instance.open(95,u)}else f.noticeError(t[1])},o.prototype.setFlag=function(){this._cdFlag=!1},o.prototype.setItemNum=function(){var t=f.getNameByItemId(this.getId);this.instructionsNameText.text=""+t,this.tipsImg.skin=this.oneCountImg.skin=this.tenCountImg.skin=this.fifityCountImg.skin=f.getIconById(this.getId);var e,i,n,s=this.instructionsText.textWidth+this.tipsImg.width+this.instructionsNameText.textWidth;this.instructionsText.x=(this.tipsBox.width-s)/2,this.tipsImg.x=this.instructionsText.x+this.instructionsText.textWidth,this.instructionsNameText.x=this.tipsImg.x+this.tipsImg.width,e=this.oneNum,i=this.twoNum,n=this.threeNum;var o=this.xianyu;this.oneCount.text=o+"/"+e,this.tenCount.text=o+"/"+i,this.fiftyCount.text=o+"/"+n,this.oneCount.color=e<=o?"#ffffff":"#FF3e3e",this.tenCount.color=i<=o?"#ffffff":"#FF3e3e",this.fiftyCount.color=n<=o?"#ffffff":"#FF3e3e",f.adaptationImgAndText([[this.oneCountImg,2,0],[this.oneCount,1,0]],this.oneCountBox.width,0,"center"),f.adaptationImgAndText([[this.tenCountImg,2,0],[this.tenCount,1,0]],this.tenCountBox.width,0,"center"),f.adaptationImgAndText([[this.fifityCountImg,2,0],[this.fiftyCount,1,0]],this.fiftyCountBox.width,0,"center")},o.prototype.showReward=function(){for(var t=0;t<this._showItem.length;t++){var e=this._showItem[t];e&&(e.visible=!1)}var i=d.festival.FestivalModel.instance.info[this.festivalType],n=d.festival.FestivalModel.instance.getHuoDongType(this.festivalType);if(i&&n){var s,o=i[5],a=i[1];s=y.instance.getItemShow(this._type,this.festivalType,o,a)[0][3];for(var r=0;r<s.length;r++){var l=s[r],h=this._showItem[r];if(h){h.dataSource=[l,1,0,null],h.visible=!0,h.isbtnClipIsPlayer=!1;var c=h.getChildByName("clip");c.play(),c.visible=!0}}}},o.prototype.desDoryArr=function(){if(this._htmlArr){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&(e.closeTimer(),e.visible=!1,e.removeSelf(),e.destroy())}this._htmlArr.length=0,this._htmlArr=null}},o.prototype.setARR=function(){if(!this._htmlArr){this._htmlArr=new Array;for(var t=0;t<20;t++){var e=new d.national_day_treasure.HtmlReward(487,20,this._htmlArr);this.severPanel.addChild(e),e.name="数据："+t,this._htmlArr.push(e)}}},o.prototype.showHtml=function(){if(this._sevStringArr&&0<this._sevStringArr.length){this.setARR();var t=this._htmlArr[this._index];this._index=this._index+1,this._index=this._index>this._htmlArr.length-1?0:this._index,t&&(t.setText(120,112,this.getSevStringArr()),this._bolllPos||(this._bolllPos=!0,Laya.timer.clear(this,this.updateList),Laya.timer.frameLoop(1,this,this.updateList)))}},o.prototype.getSevStringArr=function(){var t=this._sevStringArr[this._index1];return this._index1=this._index1+1,this._index1=this._index1>this._sevStringArr.length-1?0:this._index1,t},o.prototype.updateList=function(){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&e.updateList()}},o.prototype.updateSeverList=function(){var t=d.treasure.TreasureModel.instance.getSvrBroadcast(this._type);if(null!=t&&0<t.length){0<this._sevStringArr.length&&(this._sevStringArr.length=0),t.reverse();for(var e=0;e<10;e++)if(t[e]){var i=t[e][0],n=t[e][1],s=d.common.CommonUtil.getNameByItemId(n),o="<span style='color:#ffffff;'>天赐鸿福,</span>";o+="<span style='color:#ffec7c;'>["+i+"]</span>",o+="<span style='color:#ffffff;'>获得了</span>",o+="<span style='color:"+d.common.CommonUtil.getColorById(n)+";'>"+s+"*1</span>",this._sevStringArr.push(o)}0<this._sevStringArr.length&&!this._bolll&&(this._bolll=!0,this.showHtml())}},o.prototype.updateSelfList=function(){this._personalList.datas=this.getSelfBroadcast(),this._personalList.scrollTo(28*this._personalList.datas.length)},o.prototype.initializeClip=function(){this._prizeEffect=l.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._prizeEffect,19),this._prizeEffect.pos(this.caiQiReceiveBtn.x-87,this.caiQiReceiveBtn.y-93,!0)},o.prototype.changproUI=function(){this.setActivitiTime();var t=this.getgRade();this._proCtrl.maxValue=i.instance.get_condition(this.festivalType,d.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),d.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType),t[0]);var e=t[1];this._proCtrl.value=this.getScore,1==e?(this._isReward=!0,this._prizeEffect.play(),this._prizeEffect.visible=!0):(this._isReward=!1,this._prizeEffect.stop(),this._prizeEffect.visible=!1)},o.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=this.getFuncOpen();this.getRestTm>=GlobalData.serverTime&&t&&0===this.getState?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="今日活动已结束")},o.prototype.activityHandler=function(){var t=this.getRestTm;this.activityText.text=""+f.timeStampDDHHMMToHHMMSS(t),t<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="今日活动已结束",Laya.timer.clear(this,this.activityHandler),console.log("倒计时结束请求一次 排行榜"),Channel.instance.publish(4194804,[this.festivalType]))},o.prototype.closeBtn1Handler=function(){this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.rewardShowItem.stopTween(),this.shouChouBiDeImg.visible=!1},o.prototype.showShouChouBiDeImg=function(){this._tipsModelIsOpen||this.upDateModel()},o.prototype.upDateModelAndRequest=function(){this.upDateModel(),this.getConsumeRank()},o.prototype.upDateModel=function(){this.rewardShowItem.stopTween(),this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.shouChouBiDeImg.visible=!1,this.shouChouBiDeImg.y=619;var t=r.instance.getDate(this.festivalType,d.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),d.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType),1),e=this.getRestTm,i=this.getFuncOpen();if(t&&e>=GlobalData.serverTime&&i&&0===this.getState){var n=t[4],s=t[6],o=t[5],a=t[7];this.mouldNameText.text=""+a,this.rewardShowItem.showRewardObj(n,s,o),this._shouChouBiDeImgTween=TweenJS.create(this.shouChouBiDeImg).to({y:this.shouChouBiDeImg.y-10},1e3).start().yoyo(!0).repeat(99999999),this._shouChouBiDeImgTween.to({y:this.shouChouBiDeImg.y-10},1e3).start(),this._tipsModelIsOpen=this.shouChouBiDeImg.visible=!0}},o.prototype.close=function(){v.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.updateList),this.desDoryArr(),Laya.timer.clear(this,this.setFlag),this.setFlag(),this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.rewardShowItem.stopTween(),this._prizeEffect.stop(),this._prizeEffect.visible=!1,f.delayedPutInBag()},o.prototype.destroy=function(t){if(void 0===t&&(t=!0),this._jiLubtnGroup&&(this._jiLubtnGroup.destroy(),this._jiLubtnGroup=null),this._clipArr){for(var e=0;e<this._clipArr.length;e++){var i=this._clipArr[e];i&&(i.removeSelf(),i.destroy(),i=null)}this._clipArr.length=0,this._clipArr=null}this._shouChouBiDeImgTween&&(this._shouChouBiDeImgTween.stop(),this._shouChouBiDeImgTween=null),this._prizeEffect=this.destroyElement(this._prizeEffect),this._personalList=this.destroyElement(this._personalList),this.rewardShowItem=this.destroyElement(this.rewardShowItem),v.prototype.destroy.call(this,t),this._proCtrl.destroy(),this._proCtrl=null},n=o,t.TreasureBasePanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.instructionsText.text="每日累充活动可获得大量",t.textBgImg.skin="dragon_boat_day/txt_txwm_05.png",t.titleTxt.color="#b15315",t.titleTxt.text="单身寻宝",t}e=t.childrens_day_treasure||(t.childrens_day_treasure={}),n=t.funcOpen.FuncOpenModel,i=t.festival.TreasureBasePanel,__extends(o,i),Object.defineProperty(o.prototype,"getRestTm",{get:function(){return e.ChildrensDayTreasureModel.instance._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getState",{get:function(){return e.ChildrensDayTreasureModel.instance._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getScore",{get:function(){return e.ChildrensDayTreasureModel.instance._score},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getId",{get:function(){return e.ChildrensDayTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xianyu",{get:function(){return e.ChildrensDayTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oneNum",{get:function(){return e.ChildrensDayTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"twoNum",{get:function(){return e.ChildrensDayTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"threeNum",{get:function(){return e.ChildrensDayTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),o.prototype.getgRade=function(){return e.ChildrensDayTreasureModel.instance.getgRade()},o.prototype.getSelfBroadcast=function(){return e.ChildrensDayTreasureModel.instance.getSelfBroadcast()},o.prototype.callBakFunction=function(t){e.ChildrensDayTreasureModel.instance.callBakFunction(t)},o.prototype.getClassCtrl=function(t){e.ChildrensDayTreasureCtrl.instance.festivalNationalXunbao(t)},o.prototype.getConsumeRank=function(){e.ChildrensDayTreasureCtrl.instance.GetNationalXunbaoScoreList(),e.ChildrensDayTreasureCtrl.instance.GetNationalXunbaoScoreAndState()},o.prototype.getShuJu=function(){e.ChildrensDayTreasureCtrl.instance.GetNationalXunbaoBroadcastRecords()},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(795)},o.prototype.getNationalXunbaoScoreAward=function(){e.ChildrensDayTreasureCtrl.instance.getNationalXunbaoScoreAward()},o.prototype.openBtnHandler=function(){WindowManager.instance.open(1200)},o.prototype.openBtnHandler1=function(){WindowManager.instance.open(1201)},o.prototype.openBtnHandler2=function(){WindowManager.instance.open(1195)},o.prototype.openBtnHandler3=function(t){WindowManager.instance.open(1202,[t,this._type])},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=e.ChildrensDayTreasureModel.instance.xunBaoType,this.festivalType=e.ChildrensDayTreasureModel.instance.festivalType},s=o,e.ChildrensDayTreasurePanel=s}(modules=modules||{}),function(h){var t,i,c,e,n,s;function o(){return i.call(this)||this}t=h.festival||(h.festival={}),c=h.config.NationalXunbaoScoreAwardCfg,e=laya.maths.Point,n=h.common.SimpleList,i=ui.RotaryTableRewardRankAlertUI,__extends(o,i),o.prototype.getItemClass=function(){return null},o.prototype.getRewardStart=function(t){return 0},Object.defineProperty(o.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._pos=new e(60,70),this._list=n.create(this.getItemClass(),593,135,1,1,0,6),this._list.width=593,this._list.height=635,this.addChild(this._list),this._list.x=33,this._list.y=116,this._list.visible=!0},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.titleTxt.text="积分奖励",this.updateList()},o.prototype.close=function(t,e){i.prototype.close.call(this,t,e)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("NATIONALDAY_TREASURE_REWARD",this,this.updateList)},o.prototype.overSort=function(t,e){var i=t[1],n=e[1],s=c.instance.getIndexByScore(this.festivalType,h.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),h.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType),i),o=c.instance.getIndexByScore(this.festivalType,h.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),h.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType),n),a=this.getRewardStart(s),r=this.getRewardStart(o),l=1;return a==r?i-n:(2==a&&2!=r?l=1:2!=a&&2==r&&(l=-1),l)},o.prototype.updateList=function(){var t=[],e=c.instance.getDate(this.festivalType,h.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),h.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType));if(e){for(var i=0;i<e.length;i++){var n=e[i];n&&t.push(n)}t.sort(this.overSort.bind(this)),this._list.datas=t}this.changDrawNum()},o.prototype.changDrawNum=function(){this.TipsText.text="积分每日23时停止获取，请抓紧时间冲分哦",this.TipsText.visible=!0},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},s=o,t.TreasureRankBaseAlert=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_treasure||(t.childrens_day_treasure={}),i=t.festival.TreasureRankBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.ChildrensDayTreasureRankItem},s.prototype.getRewardStart=function(t){return e.ChildrensDayTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.ChildrensDayTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayTreasureRankAlert=n}(modules=modules||{}),function(o){var t,i,e,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=o.festival||(o.festival={}),e=o.common.SimpleList,i=ui.NationalDayRankAwardAlertUI,__extends(s,i),s.prototype.getItemClass=function(){return null},Object.defineProperty(s.prototype,"getStr",{get:function(){return""},enumerable:!0,configurable:!0}),s.prototype.getNationalXunbaoRank=function(){},Object.defineProperty(s.prototype,"myNodeListByObjId",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return 0},enumerable:!0,configurable:!0}),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=e.create(this.getItemClass(),589,100,1,1,0,6),this._list.width=589,this._list.height=481,this.addChild(this._list),this._list.x=36,this._list.y=172,this._list.visible=!0,this._allMingCiArr=new Array;for(var t=1;t<=30;t++)this._allMingCiArr.push(t);CommonUtil.setHTMLPro(this.StatementHTML,"#b15315","SimHei",22,"center")},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.titleTxt.text=this.getStr+"寻宝榜",this.getNationalXunbaoRank(),this.showUI()},s.prototype.close=function(t,e){i.prototype.close.call(this,t,e)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("NATIONALDAY_TREASURE_MYLIST",this,this.showUI),this.onAutoGlobalEvt("NATIONALDAY_TREASURE_UPDATE",this,this.showUI)},s.prototype.showUI=function(){this._allMingCiArr&&(this._list.datas=this._allMingCiArr),this.showMySocre()},s.prototype.showMySocre=function(){var t=o.player.PlayerModel.instance.actorId,e=this.myNodeListByObjId[t];if(e){var i=e[0],n=e[1],s=i[2];this.myRankNumText.text="我的排名:"+s,this.myIntegralText.text="我的积分:"+n}else this.myRankNumText.text="我的排名:未上榜",this.myIntegralText.text="我的积分:"+this.score+"积分";this.StatementHTML.innerHTML=this.getStr+"寻宝排行每天<span style='color:#168a17'>24点</span>重置"},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},n=s,t.TreasureRankAwardBaseAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_treasure||(t.childrens_day_treasure={}),i=t.festival.TreasureRankAwardBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.ChildrensDayTreasureRankAwardItem},Object.defineProperty(s.prototype,"getStr",{get:function(){return"单身"},enumerable:!0,configurable:!0}),s.prototype.getNationalXunbaoRank=function(){e.ChildrensDayTreasureCtrl.instance.getNationalXunbaoRank()},Object.defineProperty(s.prototype,"myNodeListByObjId",{get:function(){return e.ChildrensDayTreasureModel.instance._myNodeListByObjId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.ChildrensDayTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayTreasureRankAwardAlert=n}(modules=modules||{}),function(t){var e,s,a,r,i,n,o,l,h;function c(){var t=s.call(this)||this;return t.tenWidth=550,t.fifWidth=807,t}e=t.festival||(t.festival={}),a=t.notice.SystemNoticeManager,r=laya.maths.Point,i=laya.ui.List,n=t.bag.BagItem,o=t.common.CommonUtil,l=t.bag.BagUtil,s=ui.ZXianYuAlertUI,__extends(c,s),c.prototype.callBakFunction=function(t){},Object.defineProperty(c.prototype,"getId",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"xianyu",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"oneNum",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"twoNum",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"threeNum",{get:function(){return 0},enumerable:!0,configurable:!0}),c.prototype.initialize=function(){s.prototype.initialize.call(this),this._showIds=new Array,this._list=new i,this._list.vScrollBarSkin="",this._list.width=620,this._list.height=530,this._list.repeatX=5,this._list.spaceX=20,this._list.spaceY=20,this._list.itemRender=n,this._list.x=40,this._list.y=90,this.addChild(this._list)},c.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.fiftyBtn,this,this.xunBaoHandler,[2]),this.onAutoGlobalEvt("BLESSING_UPDATE",this,this.setItemNum),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setItemNum)},c.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.tenBtn.label="寻宝10次",this.fiftyBtn.label="寻宝50次",this.disCount1Img.skin="zxian_yu/9.png",this.discount2Img.skin="zxian_yu/9.png",this.tenCountImg.skin=this.fifityCountImg.skin=o.getIconById(this.getId),this.setItemNum(),o.delayedButNoPutInBag()},c.prototype.setOpenParam=function(t){if(s.prototype.setOpenParam.call(this,t),null!=t){var e=t[this._showIds.length=0];this._type=t[1],10==e.length?(this.height=this.bg.height=this.tenWidth,this._list.height=280,this.btn1.y=392):(this.height=this.bg.height=this.fifWidth,this._list.height=530,this.btn1.y=649);for(var i=0;i<e.length;i++){var n=[e[i],0,0,null];this._showIds.push(n)}this._list.array=this._showIds,this._list.scrollTo(0),this.playEffect(e)}},c.prototype.xunBaoHandler=function(t){if(this._cdFlag)a.instance.addNotice("操作过于频繁",!0);else{var e,i,n;this._cdFlag=!0,Laya.timer.once(500,this,this.setFlag),e=this.oneNum,i=this.twoNum,n=this.threeNum;var s=!1,o=this.xianyu;switch(t){case 0:s=e<=o;break;case 1:s=i<=o;break;case 2:s=n<=o}s?this.callBakFunction(t):l.openLackPropAlert(this.getId,1)}},c.prototype.setItemNum=function(){var t,e;this.tenCountImg.skin=this.fifityCountImg.skin=o.getIconById(this.getId),t=this.twoNum,e=this.threeNum;var i=this.xianyu;this.tenCount.text=i+"/"+t,this.fiftyCount.text=i+"/"+e,this.tenCount.color=t<=i?"#4c5e8a":"#FF3e3e",this.fiftyCount.color=e<=i?"#4c5e8a":"#FF3e3e",o.adaptationImgAndText([[this.tenCountImg,2,0],[this.tenCount,1,0]],this.tenCountBox.width,0,"center"),o.adaptationImgAndText([[this.fifityCountImg,2,0],[this.fiftyCount,1,0]],this.fiftyCountBox.width,0,"center")},c.prototype.playEffect=function(t){for(var e=t,i=0;i<this._list.cells.length;i++){var n=this._list.cells[i].x+this._list.cells[i].width/2,s=this._list.cells[i].y+this._list.cells[i].height/2,o=new r(n,s),a=[e[i],o,this.height];GlobalData.dispatcher.event("ZXIANYU_EFFNATIONALDAY_TREASURE_EFFECTECT",[[a]])}},c.prototype.setFlag=function(){this._cdFlag=!1},c.prototype.close=function(){this.setFlag(),Laya.timer.clear(this,this.setFlag),s.prototype.close.call(this),o.delayedButNoPutInBag()},c.prototype.destroy=function(){this._list=this.destroyElement(this._list),s.prototype.destroy.call(this)},h=c,e.TreasureBaseAlert=h}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_treasure||(t.childrens_day_treasure={}),i=t.festival.TreasureBaseAlert,__extends(s,i),s.prototype.callBakFunction=function(t){e.ChildrensDayTreasureModel.instance.callBakFunction(function(){e.ChildrensDayTreasureCtrl.instance.festivalNationalXunbao(t)})},Object.defineProperty(s.prototype,"getId",{get:function(){return e.ChildrensDayTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xianyu",{get:function(){return e.ChildrensDayTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"oneNum",{get:function(){return e.ChildrensDayTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"twoNum",{get:function(){return e.ChildrensDayTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"threeNum",{get:function(){return e.ChildrensDayTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayTreasureAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.festival||(t.festival={}),i=ui.SingleDogSpecialAlertUI,__extends(s,i),s.prototype.dontShowHandler=function(){},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._HandlerFun=t},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.close),this.onAutoClick(this.conformBtn,this,this.conformBtnHandler),this.onAutoClick(this.dontShow,this,this.dontShowHandler)},s.prototype.conformBtnHandler=function(){this._HandlerFun&&(this._HandlerFun(),this.close())},n=s,e.TreasureSpecialBaseAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.text1.text="本轮单身寻宝已结束,寻宝不再获得积分,是否确认继续抽奖？",t}e=t.childrens_day_treasure||(t.childrens_day_treasure={}),i=t.festival.TreasureSpecialBaseAlert,__extends(s,i),s.prototype.dontShowHandler=function(){e.ChildrensDayTreasureModel.instance.dontShowTreasure=this.dontShow.selected=!this.dontShow.selected},n=s,e.ChildrensDayTreasureSpecialAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.week_login||(t.week_login={}),n=ui.WeekLoginUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._restTm=0},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.updateBottomTip),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.updateBottomTip),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.updateBottomTip),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.updateBottomTip)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateBottomTip()},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},o.prototype.updateRestTime=function(t){this._restTm=t,this._restTm>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):Laya.timer.clear(this,this.loopHandler)},o.prototype.loopHandler=function(){this._restTm>=GlobalData.serverTime?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityText.text=""+CommonUtil.timeStampDDHHMMToHHMMSS(this._restTm)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.loopHandler))},o.prototype.updateBottomTip=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==t.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1040)):(t.fight_talisman.FightTalismanModel.instance.state?(-1==t.gloves.GlovesModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_05.png"):this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1044)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1040))},o.prototype.okBtnHandler=function(){0==t.first_pay.FirstPayModel.instance.giveState?WindowManager.instance.open(118):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==t.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381)},s=o,e.LoginAwardBasePanel=s}(modules=modules||{}),function(r){var t,e,n,i,s,o;function a(){return e.call(this)||this}t=r.festival||(r.festival={}),n=r.config.FestivalDailyCfg,i=r.week_login.LoginAwardBasePanel,s=r.common.SimpleList,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=s.create(this.getItemClass(),640,154),this._list.size(640,628),this._list.pos(40,300,!0),this.addChild(this._list),this.tipTxt1.visible=!1,this.activityText.y=this.activityText1.y=260},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){r.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},a.prototype.updateInfo=function(){var t=r.festival.FestivalModel.instance.info[this.festivalType],e=r.festival.FestivalModel.instance.getHuoDongType(this.festivalType);if(t&&e&&t[8]){this.updateRestTime(t[2]);var i=n.instance.getCfgsByTypeDay(this.festivalType,t[5]);i.sort(this.sortFunc.bind(this)),this._list.datas=i}},a.prototype.sortFunc=function(t,e){var i=r.festival.FestivalModel.instance.info[this.festivalType],n=i[8][0],s=i[8][1],o=t[2],a=e[2];return 2===s?o<=n&&n<a?1:n<o&&a<=n?-1:t[2]-e[2]:o<n&&n<=a?1:n<=o&&a<n?-1:t[2]-e[2]},a.prototype.getItemClass=function(){return null},Object.defineProperty(a.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),o=a,t.FestConLoginBasePanel=o}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="dragon_boat_day/image_txwm_17.jpg",t}e=t.childrens_day_festival||(t.childrens_day_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ChildrensDayFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayFestConLoginPanel=n}(modules=modules||{}),function(i){var t,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=i.festival||(i.festival={}),e=ui.FestHilarityViewUI,__extends(s,e),s.prototype.goHandler=function(){},s.prototype.leftHandler=function(){},s.prototype.rightHandler=function(){},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.goBtn,this,this.goHandler),this.onAutoClick(this.leftBtn,this,this.leftHandler),this.onAutoClick(this.rightBtn,this,this.rightHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){i.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},s.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.updateInfo=function(){var t=i.festival.FestivalModel.instance.info[this._festType],e=i.festival.FestivalModel.instance.getHuoDongType(this._festType);t&&e&&(this._time=t[2],this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):Laya.timer.clear(this,this.loopHandler))},s.prototype.loopHandler=function(){this._time>GlobalData.serverTime?this.timeTxt.text=i.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._time):(this.timeTxt.text="00:00:00",Laya.timer.clear(this,this.loopHandler))},n=s,t.FestHilarityBasePanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_festival||(t.childrens_day_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="dragon_boat_day/image_txwm_04.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(278,336,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this.oneTxt.y+=25,this.TwoTxt.y+=25,this.threeTxt.y+=25,this.timeTxt.y+=25,this.text1.y+=25,this.leftBtn.y+=25,this.rightBtn.y+=25,this.goBtn.y+=25,this._festType=t.festival.FestivalModel.instance.ChildrensDayType},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.ChildrensDayFestHilarityPanel=n}(modules=modules||{}),function(i){var t,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=i.festival||(i.festival={}),e=ui.ChristmasDLKHViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(278,336,!0),this.leftBtn.visible=this.rightBtn.visible=this.goBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.foureTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.fiveTxt,"#50ff28","SimHei",26,"center")},s.prototype.goHandler=function(){},s.prototype.leftHandler=function(){},s.prototype.rightHandler=function(){},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.goBtn,this,this.goHandler),this.onAutoClick(this.leftBtn,this,this.leftHandler),this.onAutoClick(this.rightBtn,this,this.rightHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){i.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},s.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.updateInfo=function(){var t=i.festival.FestivalModel.instance.info[this._festType],e=i.festival.FestivalModel.instance.getHuoDongType(this._festType);t&&e&&(this._time=t[2],this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):Laya.timer.clear(this,this.loopHandler))},s.prototype.loopHandler=function(){this._time>GlobalData.serverTime?this.timeTxt.text=i.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._time):(this.timeTxt.text="00:00:00",Laya.timer.clear(this,this.loopHandler))},n=s,t.FestDoubleRewardBasePanel=n}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.childrens_day_festival||(s.childrens_day_festival={}),o=s.festival.FestDoubleRewardBasePanel,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.bgImg.skin="dragon_boat_day/image_txwm_05.jpg",this.foureTxt.innerHTML="活动内容：活动时间内，上述玩法所有奖励全部翻倍！",this.fiveTxt.innerHTML="(金币真气的额外奖励不计入最高记录中)";var t=CommonUtil.getColorById(15040056),e=CommonUtil.getNameByItemId(15040056),i=CommonUtil.getColorById(15040057),n=CommonUtil.getNameByItemId(15040057);this.oneTxt.innerHTML="活动期间内,参与玩法可掉落道具【<span style='color:"+t+"'>"+e+"</span>】【<span style='color:"+i+"'>"+n+"</span>】",this.TwoTxt.innerHTML="<span style='color:"+t+"'>"+e+"</span>,<span style='color:"+i+"'>"+n+"</span>可以用于参与<span style='color:#50ff28'>【告别单身】</span>玩法",this.threeTxt.innerHTML="",this.foureTxt.y+=10,this.fiveTxt.y+=10,this.oneTxt.y+=10,this.TwoTxt.y+=10,this._festType=s.festival.FestivalModel.instance.ChildrensDayType},i.prototype.leftHandler=function(){WindowManager.instance.open(57)},i.prototype.rightHandler=function(){WindowManager.instance.open(194)},e=i,t.ChildrensDayFestDoubleRewardPanel=e}(modules=modules||{}),function(y){var t,e,g,i,n,s;function o(){return e.call(this)||this}t=y.festival||(y.festival={}),g=y.config.FestivalDailyCfg,i=y.common.SimpleList,n=y.week_login.LoginAwardBasePanel,e=n,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(this.getItemClass(),640,154),this._list.size(640,628),this._list.pos(40,300,!0),this.addChild(this._list),this.tipTxt1.visible=!1,this.activityText.y=this.activityText1.y=260},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){y.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},o.prototype.updateInfo=function(){var t=y.festival.FestivalModel.instance.info[this.festivalType],e=y.festival.FestivalModel.instance.getHuoDongType(this.festivalType);if(t&&e&&t[9]){this.updateRestTime(t[2]);for(var i=t[5],n=t[1],s=g.instance.getCfgByTypeDayCount(this.festivalType,i,n),o=s[3],a=[],r=0,l=o.length;r<l;r++){var h=o[r],c=this.getAwardInfoByVip(a,h[2]),p=[h[0],h[1],0,null];c||(c=[h[2],[]],a.push(c)),c[1].push(p)}var u=s[6];for(r=0,l=u.length;r<l;r++){h=u[r];var d=this.getAwardInfoByVip(a,-1);p=[h[0],h[1],0,null],d||(d=[-1,[]],a.push(d)),d[1].push(p)}a.sort(this.sortFunc.bind(this)),this._list.datas=a}},o.prototype.getAwardInfoByVip=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][0]===e)return t[i];return null},o.prototype.sortFunc=function(t,e){var i=y.festival.FestivalModel.instance.info[this.festivalType][9][0];return i.indexOf(t[0])-i.indexOf(e[0])},o.prototype.getItemClass=function(){return null},Object.defineProperty(o.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),s=o,t.FestDailyRewardBasePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="dragon_boat_day/image_txwm_15.jpg",t}e=t.childrens_day_festival||(t.childrens_day_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ChildrensDayFestDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayFestDailyRewardPanel=n}(modules=modules||{}),function(h){var t,e,c,p,i,n,s,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}t=h.festival||(h.festival={}),c=h.config.FestivalDailyCfg,p=h.bag.BaseItem,i=h.common.CustomClip,n=h.funcOpen.FuncOpenModel,s=h.festival.FestivalCtrl,o=h.core.BaseDialogEx,e=o,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._items=[],this._btnClip=i.create("assets/effect/btn_light.atlas","btn_light",16),this.v.addChild(this._btnClip),this._btnClip.visible=!1},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.v.goBtn,this,this.goHandler),this.onAutoClick(this.v.closeBtn,this,this.closeBtnHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._state=-1,this.updateInfo()},r.prototype.close=function(){e.prototype.close.call(this);var t=h.festival.FestivalModel.instance.info[this._festType];(t&&2===t[7][0]||!t)&&n.instance.setActionOpen(this._funcId,2)},r.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},r.prototype.updateInfo=function(){var t=h.festival.FestivalModel.instance.info[this._festType],e=h.festival.FestivalModel.instance.getHuoDongType(this._festType);if(!t||!e||!t[7])return this.v.stateImg.skin="common/txt_commmon_yjies.png",this.v.stateImg.visible=!0,this.v.goBtn.visible=!1,this._btnClip.visible=!1,void this._btnClip.stop();for(var i=c.instance.getCfgByTypeDayCount(this._festType,t[5],t[1])[5],n=h.common.CommonUtil.formatItemData(i),s=n.length,o=100*s+10*(s-1),a=.5*(this.v.rewardBox.width-o),r=0;r<n.length;r++){var l=this._items[r];l||(l=new p,this._items[r]=l),l.pos(2+a+110*r,0,!0),this.v.rewardBox.addChild(l),l.dataSource=n[r]}this._state=t[7][0],0===this._state?(this.v.goBtn.label="充值任意金额",this.v.goBtn.visible=!0,this.v.stateImg.visible=!1,this._btnClip.visible=!1,this._btnClip.stop()):1===this._state?(this.v.goBtn.label="领取",this.v.goBtn.visible=!0,this.v.stateImg.visible=!1,this._btnClip.visible=!0,this._btnClip.play()):(this.v.goBtn.visible=!1,this.v.stateImg.skin="common/txt_commmon_ylq.png",this.v.stateImg.visible=!0,this._btnClip.visible=!1,this._btnClip.stop())},r.prototype.goHandler=function(){0===this._state?(WindowManager.instance.open(111),this.close()):1===this._state&&this.getAward()},r.prototype.closeBtnHandler=function(){this.close()},r.prototype.getAward=function(){s.instance.drawFestDailyRecharge(this._festType)},a=r,t.FestFirstPayBaseAlert=a}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_festival||(t.childrens_day_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.ChildrensDayType,this._funcId=804},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="dragon_boat_day/image_txwm_08.png",this.v.closeBtn.skin="common/btn_tongyong_15.png",this.v.bgImg.y=164,this.v.tipTxt.pos(292,364,!0),this.v.closeBtn.pos(680,203,!0),this.v.stateImg.pos(351,608,!0),this.v.goBtn.pos(308,599,!0),this.v.rewardBox.pos(185,447,!0),this.v.tipTxt.text="单身特惠,限时首充",this.v.tipTxt.color="#ffffff",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.ChildrensDayFestFirstPayAlert=n}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.festival||(e.festival={}),n=ui.LiDongStoreViewUI,s=e.common.SimpleList,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=s.create(this.getItemClass(),328,169,1,2,7,6),this._list.size(662,920),this.addChildAt(this._list,4),this._list.pos(28,123,!0)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateCurrency),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.setActivitiTime),this.onAutoGlobalEvt("FESTIVAL_UPDATE_STORE",this,this.setActivitiTime),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){e.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.TitleImg.skin="li_dong/4.png",this._list.datas=this.getDatas(),this.setActivitiTime(),this.updateCurrency()},a.prototype.updateCurrency=function(){this.currencyTxt.text="元宝:"+CommonUtil.bigNumToString(e.player.PlayerModel.instance.ingot);var t=this.currencyImg.width+this.currencyTxt.width+65;this.currencyImg.x=this.width-t,this.currencyTxt.x=this.currencyImg.x+this.currencyImg.width},a.prototype.sortFunc=function(t,e){return t[0]-e[0]},a.prototype.setActivitiTime=function(){this._time=this.getRestTime(),Laya.timer.clear(this,this.activityHandler),this._time>=GlobalData.serverTime&&this.getFuncOpen()?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},a.prototype.activityHandler=function(){this._time<GlobalData.serverTime?(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler)):this.activityText.text=""+CommonUtil.timeStampDDHHMMToHHMMSS(this._time)},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.getDatas=function(){return null},a.prototype.getItemClass=function(){return null},a.prototype.getRestTime=function(){return 0},a.prototype.getFuncOpen=function(){return!1},o=a,t.FestBaseStorePanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_store||(t.childrens_day_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.ChildrensDayStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.ChildrensDayStoreItem},o.prototype.getRestTime=function(){return e.ChildrensDayStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(805)},s=o,e.ChildrensDayStorePanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};var t=GlobalData.getConfig("good_giver_rank");if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e],s=n[4];this._tab[s]||(this._tab[s]=new Array),this._tab[s].push(n)}},n.prototype.getCfgsByGrade=function(t,e,i){var n=this._tab[t];if(n)for(var s=0;s<n.length;s++){var o=n[s];if(o){var a=o[0],r=o[2],l=r[0],h=r[1],c=a[0],p=a[1];if(l<=e&&e<=h&&c<=i&&i<=p)return o}}return null},i=n,e.GoodGiverRankCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};var t=GlobalData.getConfig("giver_task");if(t)for(var e=0,i=(this._cfgs=t).length;e<i;e++)for(var n=t[e],s=n[3],o=n[0],a=s[0],r=s[1],l=a;l<=r;l++)this._tab[o]=n},n.prototype.getCfgById=function(t){return this._tab[t]},i=n,e.GiverTaskCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};var t=GlobalData.getConfig("good_rank");if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e],s=n[5];this._tab[s]||(this._tab[s]=new Array),this._tab[s].push(n)}},n.prototype.getCfgsByGrade=function(t,e,i){var n=this._tab[t];if(n)for(var s=0;s<n.length;s++){var o=n[s];if(o){var a=o[0],r=o[4],l=r[0],h=r[1],c=a[0],p=a[1];if(l<=e&&e<=h&&c<=i&&i<=p)return o}}return null},n.prototype.getdayByGradeArr=function(t,e){var i=this._tab[t],n=[];if(i)for(var s=i.length,o=0;o<s;o++){var a=i[o];if(a){var r=a[4],l=r[0],h=r[1];l<=e&&e<=h&&n.push(a)}}return n},i=n,e.GoodRankSingleCfg=i}(modules=modules||{}),function(s){var t,e;function i(){this._huoDeJiLu={},this._zengSongJiLu={},this._recommends={},this._popularitys={},this._sameServer={}}t=s.single_dog_good_man||(s.single_dog_good_man={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(t){if(t){var e=t[3];this._recommends[e]=t[0],this._popularitys[e]=t[1],this._sameServer[e]=t[2],this._popularitys[e].sort(this.sortFunc.bind(this)),GlobalData.dispatcher.event("DOG_FESTIVAL_GOODMAN_UPDATE")}},i.prototype.uodateInfo1=function(t){if(t){var e=t[1];this._huoDeJiLu[e]=t[0],GlobalData.dispatcher.event("DOG_FESTIVAL_GOODMAN_JILU_UPDATE")}},i.prototype.uodateInfo2=function(t){if(t){var e=t[1];this._zengSongJiLu[e]=t[0],GlobalData.dispatcher.event("DOG_FESTIVAL_GOODMAN_JILU_UPDATE")}},i.prototype.getHuoDeJiLu=function(t){var e=this._huoDeJiLu[t];return e||[]},i.prototype.getZengSongJiLu=function(t){var e=this._zengSongJiLu[t];return e||[]},i.prototype.openAlert=function(t,e){s.festival.FestivalModel.instance.getHuoDongType(e)?s.single_dog_score_rank.SingleDogScoreRankModel.instance.getEndTime(e)<GlobalData.serverTime?s.notice.SystemNoticeManager.instance.addNotice("本轮活动已结束",!0):0<CommonUtil.getPropCountById(s.single_dog_sart.SingleDogSartModel.instance.getNowItemId(e))?(4===e&&WindowManager.instance.open(553,[t,e]),9!==e&&24!==e&&28!==e&&32!==e&&38!==e&&44!==e&&48!==e||WindowManager.instance.open(670,[t,e]),33===e&&WindowManager.instance.open(1215,[t,e]),36===e&&WindowManager.instance.open(1215,[t,e]),e===s.festival.FestivalModel.instance.ChildrensDayType&&WindowManager.instance.open(1215,[t,e]),e===s.festival.FestivalModel.instance.AnniversaryDayType&&WindowManager.instance.open(1324,[t,e]),12===e&&WindowManager.instance.open(1226,[t,e]),e===s.festival.FestivalModel.instance.BarDayType&&WindowManager.instance.open(1249,[t,e]),e===s.festival.FestivalModel.instance.PerfectestTenType&&WindowManager.instance.open(1440,[t,e]),e===s.festival.FestivalModel.instance.SpringSceneryType&&WindowManager.instance.open(1560,[t,e])):s.bag.BagUtil.openLackPropAlert(s.single_dog_sart.SingleDogSartModel.instance.getNowItemId(e),1):s.notice.SystemNoticeManager.instance.addNotice("功能未开启",!1)},i.prototype.getStrById=function(t,e){var i=null;return this.isXianLv(t)?i="仙缘":this.isZhanYou(t)&&this.isMengYou(t)&&2===e?i="队友":this.isMengYou(t)?i="盟友":this.isZhanYou(t)&&(i="队友"),i},i.prototype.isXianLv=function(t){return s.marry.MarryModel.instance.isMarried&&s.marry.MarryModel.instance.half[0]===t},i.prototype.isMengYou=function(t){if(s.faction.FactionModel.instance.hasFaction&&1<s.faction.FactionModel.instance.memberList.length)for(var e=s.faction.FactionModel.instance.memberList,i=0;i<e.length;i++){var n=e[i];if(n[1]!==PlayerModel.instance.actorId&&n[1]===t)return!0}return!1},i.prototype.isZhanYou=function(t){if(s.warband.WarbandModel.instance.info&&1<s.warband.WarbandModel.instance.info[4].length)for(var e=s.warband.WarbandModel.instance.info[4],i=0;i<e.length;i++){var n=e[i];if(n[0]!=PlayerModel.instance.actorId&&n[0]===t)return!0}return!1},i.prototype.getInxState=function(t){var e=0;return this.isXianLv(t)?e=3:this.isMengYou(t)?e=2:this.isZhanYou(t)&&(e=1),e},i.prototype.sortFunc=function(t,e){var i=this.getInxState(t[0]);return this.getInxState(e[0])-i},e=i,t.SingleDogGoodManModel=e}(modules=modules||{}),function(i){var t,e,n,s,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}t=i.festival||(i.festival={}),n=i.common.CommonUtil,s=i.core.BaseViewEx,o=i.single_dog_good_man.SingleDogGoodManModel,e=s,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.recommendsPlayer=[this.v.item1,this.v.item2],this.popularitysPlayer=[this.v.item3,this.v.item4,this.v.item5],this.sameServerPlayer=[this.v.item6,this.v.item7,this.v.item8]},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.v.btn1,this,this.btn1Handler),this.onAutoClick(this.v.btn2,this,this.btn2Handler),this.onAutoClick(this.v.btn3,this,this.btn3Handler),this.onAutoGlobalEvt("DOG_FESTIVAL_GOODMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setTextUI),this.onAutoGlobalEvt("DOG_FESTIVAL_RENWU_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){i.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},r.prototype.btn1Handler=function(){i.single_dog_good_man.SingleDogGoodManCtrl.instance.GetGoodRecommand(this._festType),i.notice.SystemNoticeManager.instance.addNotice("刷新成功",!1)},r.prototype.btn2Handler=function(){WindowManager.instance.open(556,this._festType)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.v.text1.text="拥有"+i.single_dog_sart.SingleDogSartModel.instance.getName(this._festType)+":",this.v.text2.text="已赠送"+i.single_dog_sart.SingleDogSartModel.instance.getName(this._festType)+":",i.single_dog_good_man.SingleDogGoodManCtrl.instance.GetGoodRecommand(this._festType),this.showUI()},r.prototype.setTextUI=function(){var t=i.single_dog_score_rank.SingleDogScoreRankModel.instance.getScore(this._festType);this.v.myRankText.text=""+t;var e=n.getPropCountById(i.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this._festType));this.v.myNumText.text=""+e},r.prototype.showUI=function(){console.log("刷新界面 ");for(var t=0;t<2;t++){var e=o.instance._recommends[this._festType];this.recommendsPlayer[t].data=[0,e?e[t]:null]}for(t=0;t<3;t++){e=o.instance._popularitys[this._festType];var i=o.instance._sameServer[this._festType];this.popularitysPlayer[t].data=[1,e?e[t]:null,t],this.sameServerPlayer[t].data=[2,i?i[t]:null,t]}this.setTextUI()},r.prototype.btn3Handler=function(){},a=r,t.GoodManBasePanel=a}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_good_man||(t.childrens_day_good_man={}),i=t.festival.GoodManBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.ChildrensDayType},s.prototype.btn3Handler=function(){WindowManager.instance.open(1216)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.titleTxt.text="赠送狗粮"},n=s,e.ChildrensDayGoodManPanel=n}(modules=modules||{}),function(p){var t,s,o,e,a,i,n,r,l,h,c;function u(){return null!==s&&s.apply(this,arguments)||this}t=p.festival||(p.festival={}),o=p.config.GoodRankSingleCfg,e=p.notice.SystemNoticeManager,a=p.common.CommonUtil,i=p.funcOpen.FuncOpenModel,n=laya.events.Event,r=p.common.SimpleList,l=p.common.AvatarClip,h=p.core.BaseViewEx,s=h,__extends(u,s),u.prototype.getItemClass=function(){return null},u.prototype.setUI=function(){this.v.titleTxt.text="童趣时光",this.v.text1.text="我收到的糖果:"},u.prototype.setPos=function(){},u.prototype.setPos1=function(){},u.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.v.titleTxt&&(this.v.titleTxt.color="#626d97",this.v.titleTxt.fontSize=28,this.v.titleTxt.x=284,this.v.titleTxt.y=51,this.v.titleTxt.width=160,this.v.titleTxt.align="center"),this._list=r.create(this.getItemClass(),673,195,1,1,0,5),this._list.width=673,this._list.height=453,this.v.listBox.addChild(this._list),this._list.x=0,this._list.y=0,this._list.visible=!0,this._avatarClip=l.create(1432,1432,1152),this.v.addChildAt(this._avatarClip,6),this._avatarClip.pos(210,490,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180,this._allMingCiArr=new Array;for(var t=2;t<=p.single_dog_sart.SingleDogSartModel.instance._maxRank(this._festType);t++)this._allMingCiArr.push(t);this.shouHuPlayer=[this.v.item2,this.v.item3],this.shouHuPlayerText=[this.v.zanWuText2,this.v.zanWuText3],this.shouHuPlayerHTML=[this.v.StatementHTML1,this.v.StatementHTML2],a.setHTMLPro(this.v.StatementHTML,"#FFFFFF","SimHei",22,"center"),a.setHTMLPro(this.v.StatementHTML1,"#FFFFFF","SimHei",22,"center"),a.setHTMLPro(this.v.StatementHTML2,"#FFFFFF","SimHei",22,"center");var e=o.instance.getCfgsByGrade(this._festType,p.festival.FestivalModel.instance.getCrossOpenServerDay(this._festType),1),i=e[3],n=e[6];this.v.StatementHTML.innerHTML="收到"+p.single_dog_sart.SingleDogSartModel.instance.getName(this._festType)+"达<span style='color:#ffec7c'>"+i+"</span>可上榜",this.v.StatementHTML1.innerHTML="赠送<span style='color:#ffec7c'>"+(n?n[0]:0)+"</span>"+p.single_dog_sart.SingleDogSartModel.instance.getName(this._festType)+"可上榜",this.v.StatementHTML2.innerHTML="赠送<span style='color:#ffec7c'>"+(n?n[1]:0)+"</span>"+p.single_dog_sart.SingleDogSartModel.instance.getName(this._festType)+"可上榜"},u.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoEvt(this._list,n.SELECT,this,this.listHandler),this.onAutoClick(this.v.haoZhaoBtn,this,this.haoZhaoBtnHandler),this.onAutoClick(this.v.chaKan,this,this.chaKanHandler),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI),this.onAutoGlobalEvt("DOG_FESTIVAL_RENWU_UPDATE",this,this.setTextUI),this.onAutoGlobalEvt("DOG_FESTIVAL_RENWU_UPDATE",this,this.GetGoodRank),this.onAutoGlobalEvt("GET_ACTOR_RANK_SHOW_KUAFU_REPLY",this,this.showModle),this.onAutoClick(this.v.instructionsBtn,this,this.instructionsBtnHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){p.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},u.prototype.listHandler=function(){this._list.selectedIndex},u.prototype.GetGoodRank=function(){var t=this;Laya.timer.callLater(this,function(){p.single_dog_sart.SingleDogSartCtrl.instance.GetGoodRank(t._festType)})},u.prototype.onOpened=function(){s.prototype.onOpened.call(this),this._allMingCiArr&&(this._list.datas=this._allMingCiArr),this.showUI(),p.single_dog_sart.SingleDogSartCtrl.instance.GetGoodRank(this._festType),this.setUI()},u.prototype.showUI=function(){if(this.setActivitiTime(),this.v.shouHuText.visible=this.v.item1.visible=this.v.item2.visible=this.v.item3.visible=!1,this.v.zanWuText.visible=this.v.StatementHTML.visible=this.v.zanWuText2.visible=this.v.zanWuText3.visible=!1,this._theGoodRanker=p.single_dog_sart.SingleDogSartModel.instance.getTableByRank(this._festType,1),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.v.item1.data=[1,t],this.v.item1.setTipsText("收到"+p.single_dog_sart.SingleDogSartModel.instance.getName(this._festType)+":");var i=t[7],n=t[0];this.v.shouHuText.text="助攻者:"+i,this.v.item1.visible=!0,this.v.shouHuText.visible=!0,this.v.item1.giveBtn.visible=!0;for(var s=0;s<2;s++){var o=e[s],a=this.shouHuPlayer[s],r=this.shouHuPlayerText[s],l=this.shouHuPlayerHTML[s];o?(a.visible=!0,l.visible=r.visible=!1,a.data=[2,o],a.setTipsText("赠送"+p.single_dog_sart.SingleDogSartModel.instance.getName(this._festType)+":")):(l.visible=r.visible=!0,a.visible=!1)}p.rankingList.PlayerRankingCtrl.instance.getActorCrossRankShow(n)}else this._avatarClip.visible=!1,this.v.item1.visible=this.v.item2.visible=this.v.item3.visible=!1,this.v.StatementHTML1.visible=this.v.StatementHTML2.visible=this.v.zanWuText.visible=this.v.StatementHTML.visible=this.v.zanWuText2.visible=this.v.zanWuText3.visible=!0;var h=p.single_dog_sart.SingleDogSartModel.instance.getTableByRoleId(this._festType,PlayerModel.instance.actorId);if(h){var c=(t=h[0])[6];this.v.myRankText.text="第"+c+"名",this.v.myRankText.color="#168a17"}else this.v.myRankText.text="未上榜",this.v.myRankText.color="#ff3e3e";this.setTextUI()},u.prototype.setTextUI=function(){var t=p.single_dog_sart.SingleDogSartModel.instance.getScore(this._festType);this.v.myNumText.text=""+t},u.prototype.showModle=function(){this._avatarClip.visible=!1;var t=p.rankingList.PlayerRankingModel.instance.rankShowRely1;if(t&&0<t.length){var e=t[0];if(e){var i=e[7],n=e[1],s=e[2],o=e[3],a=e[10];n=0===n?1e3+i:n,s=0===s?5001:s,this._avatarClip.reset(n,s,o,0,0,a),this._avatarClip.visible=!0,this.v.observationItem.data=[[this._avatarClip,0]]}}},u.prototype.haoZhaoBtnHandler=function(){p.single_dog_sart.SingleDogSartModel.instance.getEndTime(this._festType)<GlobalData.serverTime?e.instance.addNotice("本轮活动已结束",!0):WindowManager.instance.open(this._windowEnumID)},u.prototype.chaKanHandler=function(){WindowManager.instance.open(this._windowEnumID1)},u.prototype.instructionsBtnHandler=function(){var t=p.config.GoodBlendCfg.instance.getCfgsByType(this._festType)[9][1];a.alertHelp(t)},u.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=i.instance.getFuncIsOpen(this._funcId);if(p.single_dog_sart.SingleDogSartModel.instance.getEndTime(this._festType)>=GlobalData.serverTime&&t){this.v.activityText1.color="#ffffff",this.v.activityText.visible=!0;var e=p.single_dog_sart.SingleDogSartModel.instance.getIndex(this._festType)+1;this.v.activityText1.text="第"+e+"轮排名截止:",this.setPos(),this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)}else this.v.activityText1.color="#FF3e3e",this.v.activityText.visible=!1,this.v.activityText1.text="本轮活动已结束",this.setPos1()},u.prototype.activityHandler=function(){this.v.activityText.text=""+a.timeStampDDHHMMToHHMMSS(p.single_dog_sart.SingleDogSartModel.instance.getEndTime(this._festType)),p.single_dog_sart.SingleDogSartModel.instance.getEndTime(this._festType)<GlobalData.serverTime&&(this.v.activityText1.color="#FF3e3e",this.v.activityText.visible=!1,this.v.activityText1.text="本轮活动已结束",this.setPos1(),Laya.timer.clear(this,this.activityHandler),p.single_dog_sart.SingleDogSartCtrl.instance.GetGoodRank(this._festType))},u.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._avatarClip=this.destroyElement(this._avatarClip),this.v.observationItem=this.destroyElement(this.v.observationItem),s.prototype.destroy.call(this,t)},c=u,t.StarBasePanel=c}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_star||(t.childrens_day_star={}),i=t.festival.StarBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ChildrensDayStarItem},s.prototype.setUI=function(){this.v.titleTxt.text="单身舞会",this.v.text1.text="我收到的狗粮:"},s.prototype.setPos=function(){this.v.activityText1.pos(63,103,!0),this.v.activityText.pos(221,103,!0)},s.prototype.setPos1=function(){this.v.activityText1.pos(130,103,!0)},s.prototype.initialize=function(){this._festType=t.festival.FestivalModel.instance.ChildrensDayType,this._funcId=796,i.prototype.initialize.call(this),this._windowEnumID=1217,this._windowEnumID1=1213},n=s,e.ChildrensDayStarPanel=n}(modules=modules||{}),function(i){var t,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=i.single_dog_sart||(i.single_dog_sart={}),e=ui.SingleDogSartAlertUI,__extends(s,e),Object.defineProperty(s.prototype,"broadcastId",{get:function(){return 48},enumerable:!0,configurable:!0}),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.Btn1,this,this.Btn1Handler),this.onAutoClick(this.Btn2,this,this.Btn2Handler),this.onAutoClick(this.Btn3,this,this.Btn3Handler),this.onAutoClick(this.Btn4,this,this.Btn4Handler)},s.prototype.Btn1Handler=function(){var t=i.chat.ChatModel.instance.getUnlockLv(2);if(i.mission.MissionModel.instance.finishLv<t)i.notice.SystemNoticeManager.instance.addNotice("通过天关"+t+"关开启",!0);else{var e=[1,5,this.broadcastId,"",i.chat.ChatModel.instance.virtualItem,[PlayerModel.instance.actorId],[],0,0];ChatCtrl.instance.sendChatMessage(e),this.close()}},s.prototype.Btn2Handler=function(){if(i.faction.FactionModel.instance.hasFaction){var t=[4,5,this.broadcastId,"",i.chat.ChatModel.instance.virtualItem,[PlayerModel.instance.actorId],[],0,0];ChatCtrl.instance.sendChatMessage(t),this.close()}else i.notice.SystemNoticeManager.instance.addNotice("请先加入仙盟",!0)},s.prototype.Btn3Handler=function(){var t=i.chat.ChatModel.instance.getUnlockLv(2);if(i.mission.MissionModel.instance.finishLv<t)i.notice.SystemNoticeManager.instance.addNotice("通过天关"+t+"关开启",!0);else{var e=[2,5,this.broadcastId,"",i.chat.ChatModel.instance.virtualItem,[PlayerModel.instance.actorId],[],0,0];ChatCtrl.instance.sendChatMessage(e),this.close()}},s.prototype.Btn4Handler=function(){if(i.marry.MarryModel.instance.isMarried){var t=[5,5,this.broadcastId,"",i.chat.ChatModel.instance.virtualItem,[PlayerModel.instance.actorId],[],0,0];ChatCtrl.instance.sendChatMessage(t),this.close()}else i.notice.SystemNoticeManager.instance.addNotice("结缘后开启仙缘聊天",!0)},n=s,t.SingleDogSartAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_star||(t.childrens_day_star={}),i=t.single_dog_sart.SingleDogSartAlert,__extends(s,i),Object.defineProperty(s.prototype,"broadcastId",{get:function(){return 122},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayStarAlert=n}(modules=modules||{}),function(s){var a,e,r,n,i,o,t,l,h,c,p;function u(){var t=e.call(this)||this;return t._isUpdateBtnClickNum=1e3,t._isUpdateBtnClick=!0,t}a=s.single_dog_score_rank||(s.single_dog_score_rank={}),r=s.config.GiverTaskCfg,n=s.config.GoodGiverRankCfg,i=s.common.CustomClip,o=s.common.CustomList,t=s.notice.SystemNoticeManager,l=s.common.CommonUtil,h=s.funcOpen.FuncOpenModel,c=s.bag.BagUtil,e=ui.SingleDogScoreRankViewUI,__extends(u,e),u.prototype.getItemClass=function(){return a.SingleDogScoreRankItem},Object.defineProperty(u.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),u.prototype.getFuncOpen=function(){return h.instance.getFuncIsOpen(340)},u.prototype.getRestTime=function(){return 0},u.prototype.openWin=function(){WindowManager.instance.open(545)},u.prototype.getRp=function(){return s.redPoint.RedPointCtrl.instance.getRPProperty("singleParty4RP")},u.prototype.setBg=function(){this.bgImg.skin="single_dog/image_dssd_20.jpg"},u.prototype.setUI=function(){this.integralDescriptionText.text="赠送1张"+s.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+"获得1积分"},u.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._taskBase=[this.rushReward1,this.rushReward2,this.rushReward3,this.rushReward4],this._list=new o,this._list.width=630,this._list.height=493,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=this.getItemClass(),this._list.x=45,this._list.y=327,this.addChildAt(this._list,4),this.creatEffect(),l.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",26),this._allMingCiArr=new Array;for(var t=1;t<=a.SingleDogScoreRankModel.instance._maxRank(this.festivalType);t++)this._allMingCiArr.push(t);this.setBg()},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoClick(this.instructionsBtn,this,this.instructionsBtnHandler),this.onAutoClick(this.updateBtn,this,this.updateBtnHandler),this.onAutoGlobalEvt("DOG_FESTIVAL_SCORE_RANK_UPDATE",this,this.showTaskReward),this.onAutoGlobalEvt("DOG_FESTIVAL_RENWU_UPDATE",this,this.showTaskReward),this.onAutoGlobalEvt("DOG_FESTIVAL_RENWU_UPDATE",this,this.showUI),this.onAutoGlobalEvt("DOG_FESTIVAL_SCORE_RANK_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){s.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},u.prototype.getFeishengRankAllInfo=function(){a.SingleDogScoreRankCtrl.instance.GetHelperRank(this.festivalType)},u.prototype.updateBtnHandler=function(){this._isUpdateBtnClick?(this._isUpdateBtnClick=!1,Laya.timer.once(this._isUpdateBtnClickNum,this,this.chuang_isUpdateBtnClick),this.getFeishengRankAllInfo(),t.instance.addNotice("刷新成功",!1)):t.instance.addNotice("操作过于频繁",!0)},u.prototype.chuang_isUpdateBtnClick=function(){this._isUpdateBtnClick=!0},u.prototype.instructionsBtnHandler=function(){var t=s.config.GoodBlendCfg.instance.getCfgsByType(this.festivalType)[9][0];l.alertHelp(t)},u.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._allMingCiArr&&(this._list.datas=this._allMingCiArr),this.titleTxt.text="赠送榜",this.showUI(),this.showTaskReward(),this.getFeishengRankAllInfo(),this.setUI(),a.SingleDogScoreRankCtrl.instance.GetGiveTask(this.festivalType)},u.prototype.showUI=function(){this.setActivitiTime(),this.showMySocre(),this.showUPUiTip()},u.prototype.showUPUiTip=function(){var t=this.serverTimeToHHMMSS();this.updateTimeText.text="上次更新:"+t},u.prototype.serverTimeToHHMMSS=function(){var t=new Date(GlobalData.serverTime),e=t.getMinutes()>>0,i=t.getHours()>>0;return(i<10?"0":"")+i+"时"+(e<10?"0":"")+e+"分"},u.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=this.getFuncOpen();a.SingleDogScoreRankModel.instance.getEndTime(this.festivalType)>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},u.prototype.activityHandler=function(){this.activityText.text=""+l.timeStampDDHHMMToHHMMSS(a.SingleDogScoreRankModel.instance.getEndTime(this.festivalType)),a.SingleDogScoreRankModel.instance.getEndTime(this.festivalType)<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",a.SingleDogScoreRankCtrl.instance.GetGiveTask(this.festivalType),this.getFeishengRankAllInfo(),Laya.timer.clear(this,this.activityHandler))},u.prototype.showTaskReward=function(){for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=0,i=a.SingleDogScoreRankModel.instance.getScore(this.festivalType),n=a.SingleDogScoreRankModel.instance.getLastTasKState(this.festivalType);if(n){if(e=n[0],this._cfg=r.instance.getCfgById(e),this._cfg){var s=this._cfg[2][a.SingleDogScoreRankModel.instance.getTypeIndex(this.festivalType)];for(t=0;t<.5*s.length;t++){var o=this._taskBase[t];o&&(o.dataSource=[s[2*t],s[2*t+1],0,null],o.visible=!0)}this.StatementHTML.innerHTML="积分达到<span style='color:#168a17'>"+this._cfg[1]+"</span>可领取!",this.scheduleText.text="("+i+"/"+this._cfg[1]+")",i>=this._cfg[1]?this.scheduleText.color="#16ba17":this.scheduleText.color="#FF3e3e"}this.setBtnSure(),this.showMySocre()}},u.prototype.sureBtnHandler=function(){var t=0,e=a.SingleDogScoreRankModel.instance.getLastTasKState(this.festivalType);switch(e&&(t=e[3]),t){case 1:this.openWin();break;case 2:var i=[],n=this._cfg[2][a.SingleDogScoreRankModel.instance.getTypeIndex(this.festivalType)];if(n){for(var s=0,o=.5*n.length;s<o;s++)i.push([n[2*s],n[2*s+1],0,null]);c.canAddItemsByBagIdCount(i)&&a.SingleDogScoreRankCtrl.instance.DrawGiveTask(this.festivalType,this._cfg[0])}break;default:this.openWin()}},u.prototype.setBtnSure=function(){var t=1,e=a.SingleDogScoreRankModel.instance.getLastTasKState(this.festivalType);e&&(t=e[3]),this.scheduleText.visible=this.StatementHTML.visible=!0,this.sureBtnRP.visible=!1,this.sureBtn.pos(475,1017),this.sureBtnRP.x=643,this.sureBtnRP.y=1009,a.SingleDogScoreRankModel.instance.getEndTime(this.festivalType)>=GlobalData.serverTime?1==t?(this.sureBtn.skin="common/btn_tongyong_18.png",this.sureBtn.labelColors="#465460,#465460,#465460,#465460",this.sureBtn.label="提升积分",this.sureBtn.visible=!0,i.thisStop(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1,this.sureBtnRP.visible=this.getRp()):2==t?(this.sureBtn.skin="common/btn_tongyong_6.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.sureBtn.label="领取",this.sureBtn.visible=!0,i.thisPlay(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1,this.sureBtnRP.visible=!1):(i.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!1,this.scheduleText.visible=!1,this.StatementHTML.visible=!1,this.rushReward1.visible=!1,this.rushReward2.visible=!1,this.rushReward3.visible=!1,this.rushReward4.visible=!1,this.sureBtn.visible=!0,this.sureBtn.skin="common/btn_tongyong_18.png",this.sureBtn.labelColors="#3d5981,#3d5981,#3d5981,#3d5981",this.sureBtn.label="前往提升",this.sureBtn.pos(265.5,1002),this.sureBtnRP.x=433.5,this.sureBtnRP.y=994,this.sureBtnRP.visible=this.getRp()):(this._btnClip.stop(),this._btnClip.visible=!1,this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!0)},u.prototype.showMySocre=function(){var t=a.SingleDogScoreRankModel.instance.getScore(this.festivalType);this.myIntegralText.text="积分:"+t;var e=s.player.PlayerModel.instance.actorId;this.otherBox.visible=!0,this.otherBox.y=853,this.myRankNumText.y=this.myIntegralText.y=880;var i=a.SingleDogScoreRankModel.instance.getTableById(this.festivalType,e);if(i){var n=i[6];this.myRankNumText.text="我的排名:"+n+" ",1==n?(this.otherBox.visible=!1,this.otherBox.y=853,this.myRankNumText.y=this.myIntegralText.y=865):this.showUpPlayerScore(n-1)}else this.myRankNumText.text="我的排名:未上榜",this.showUpPlayerScore(a.SingleDogScoreRankModel.instance._maxRank(this.festivalType))},u.prototype.showUpPlayerScore=function(t){var e=a.SingleDogScoreRankModel.instance.getTableByRank(this.festivalType,t);if(e)this.otherRankMingCiNumText.text=""+t,this.otherRankNumText.text=""+e[2],this.otherIntegralNameText.text="积分",this.otherIntegralText.text=""+e[5];else{this.otherRankMingCiNumText.text=""+t,this.otherRankNumText.text="虚位以待...";var i=n.instance.getCfgsByGrade(this.festivalType,s.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),t);if(!i)return;this.otherIntegralText.text=""+i[3],this.otherIntegralNameText.text="上榜所需积分"}},u.prototype.creatEffect=function(){this._btnClip=i.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.play(),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(1,1),this._btnClip.visible=!1},u.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},p=u,a.SingleDogScoreRankPanel=p}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_score_rank||(t.childrens_day_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ChildrensDayScoreRankItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),s.prototype.getFuncOpen=function(){return t.funcOpen.FuncOpenModel.instance.getFuncIsOpen(799)},s.prototype.openWin=function(){WindowManager.instance.open(1212)},s.prototype.getRp=function(){return t.redPoint.RedPointCtrl.instance.getRPProperty("childrensDayParty4RP")},s.prototype.setBg=function(){this.bgImg.skin="dragon_boat_day/image_txwm_20.jpg"},s.prototype.setUI=function(){this.integralDescriptionText.text="赠送1袋"+t.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+"获得1积分"},n=s,e.ChildrensDayScoreRankPanel=n}(modules=modules||{}),function(r){var t,e,l,i,h,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=r.single_dog_yu_lan||(r.single_dog_yu_lan={}),l=r.config.GoodRankSingleCfg,i=r.common.CustomList,h=r.common.CommonUtil,e=ui.SingleDogYuRanViewUI,__extends(s,e),s.prototype.getItemClass=function(){return t.SingleDogYuLanItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),s.prototype.setUI=function(){this.rewardShowItem.y=420,this.text1.text="我收到的好人卡:"},s.prototype.setMoXing=function(){this.rewardShowItem.fashionModelPosY=135,this.rewardShowItem.shenBingModelPosY=150,this.rewardShowItem.tianZhuModelPosY=130},s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new i,this._list.width=640,this._list.height=375,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=700,this._list.itemRender=this.getItemClass(),this.addChildAt(this._list,5),this.rewardShowItem.setDataFun([1,1,1,1,"assets/icon/ui/goodrank/"]),this.setUI()},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.instructionsBtn,this,this.instructionsBtnHandler),this.onAutoGlobalEvt("DOG_FESTIVAL_RENWU_UPDATE",this,this.updataView),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.updataView),this.onAutoGlobalEvt("DOG_FESTIVAL_SCORE_RANK_UPDATE",this,this.updataView),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){r.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},s.prototype.instructionsBtnHandler=function(){var t=r.config.GoodBlendCfg.instance.getCfgsByType(this.festivalType)[9][2];h.alertHelp(t)},s.prototype.getRankInfo=function(){for(var t=r.config.GoodBlendCfg.instance.getCfgsByType(this.festivalType)[1][0],e=[],i=1;i<=t;i++){var n=l.instance.getCfgsByGrade(this.festivalType,r.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),i);e.push(n)}return e},s.prototype.updateMoXing=function(){var t=r.config.GoodBlendCfg.instance.getCfgsByType(this.festivalType)[8],e=r.single_dog_sart.SingleDogSartModel.instance.getIndex(this.festivalType);this.rewardShowItem.showRewardObj(t[3*e],t[3*e+1],t[3*e+2]),this.observationItem.data=[[this.rewardShowItem._modelClip,Math.round(t[3*e]/1e3)]],this.setMoXing()},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView(),this.setActivitiTime(),r.single_dog_sart.SingleDogSartCtrl.instance.GetGoodRank(this.festivalType),r.single_dog_score_rank.SingleDogScoreRankCtrl.instance.GetGiveTask(this.festivalType)},s.prototype.GetGoodRank=function(){var t=this;Laya.timer.callLater(this,function(){r.single_dog_sart.SingleDogSartCtrl.instance.GetGoodRank(t.festivalType)})},s.prototype.updataView=function(){for(var t=l.instance.getdayByGradeArr(this.festivalType,r.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType)),e=[],i=0;i<t.length;i++){var n=t[i];e.push([this.festivalType,n])}this._list.datas=e,this.myNumText.text=h.getPropCountById(r.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this.festivalType)).toString();var s=r.single_dog_sart.SingleDogSartModel.instance.getTableByRoleId(this.festivalType,PlayerModel.instance.actorId);if(s){var o=s[0][6];this.myRankText.text="第"+o+"名",this.myRankText.color="#168a17"}else this.myRankText.text="未上榜",this.myRankText.color="#ff3e3e";var a=r.single_dog_sart.SingleDogSartModel.instance.getScore(this.festivalType);this.myNumText.text=""+a,this.updateMoXing()},s.prototype.close=function(){e.prototype.close.call(this),this.rewardShowItem.stopTween(),Laya.timer.clear(this,this.activityHandler)},s.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),r.single_dog_score_rank.SingleDogScoreRankModel.instance.getEndTime(this.festivalType)>=GlobalData.serverTime?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="本轮活动倒计时:",this.activityText1.x=199,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="本轮活动已结束",this.activityText1.x=283)},s.prototype.activityHandler=function(){var t=r.single_dog_score_rank.SingleDogScoreRankModel.instance.getEndTime(this.festivalType);this.activityText.text=h.timeStampDDHHMMToHHMMSS(t),this.activityText1.x=199,r.single_dog_score_rank.SingleDogScoreRankModel.instance.getEndTime(this.festivalType)<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="本轮活动已结束",this.activityText1.x=283,Laya.timer.clear(this,this.activityHandler),r.single_dog_sart.SingleDogSartCtrl.instance.GetGoodRank(this.festivalType),r.single_dog_score_rank.SingleDogScoreRankCtrl.instance.GetGiveTask(this.festivalType))},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},n=s,t.SingleDogYuLanPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_yu_lan||(t.childrens_day_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ChildrensDayYuLanItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),s.prototype.setUI=function(){this.bgImg.skin="dragon_boat_day/image_txwm_02.jpg",this.titleImg.skin="dragon_boat_day/image_txwm_22.png",this.titleImg.visible=!0,this.BG.visible=!1,this.text1.text="我收到的狗粮:",this.titleImg.centerX=1,this.titleImg.y=149},s.prototype.setMoXing=function(){this.rewardShowItem.fashionModelPosY=100,this.rewardShowItem.shenBingModelPosY=150,this.rewardShowItem.tianZhuModelPosY=130,this.rewardShowItem.xainQiModelPosY=140,this.rewardShowItem.lingChongModelPosY=180,this.rewardShowItem.scale(1,1)},n=s,e.ChildrensDayYuLanPanel=n}(modules=modules||{}),function(l){var t,e,i,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}t=l.single_dog_good_man||(l.single_dog_good_man={}),i=Laya.Event,n=l.common.NumInputCtrl,e=ui.SingleDogGoodManAlertUI,__extends(o,e),Object.defineProperty(o.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._input=new n(this.numInput,this.addBtn,this.reduceBtn,this.addTenBtn,this.reduceTenBtn)},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._roleId=t[0],this._festivalType=t[1]},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateUI(),this.showUI(),t.SingleDogGoodManCtrl.instance.GetGooderShow(this._roleId,this._festivalType)},o.prototype.updateUI=function(){this._maxNum=CommonUtil.getPropCountById(l.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this.festivalType)),this._input.min=1,this._input.max=this._maxNum,this._input.value=1,this._input.notice="数量",this._useNum=1,this.item1.dataSource=[l.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this.festivalType),1,0,null],this.showNum()},o.prototype.showUI=function(t){void 0===t&&(t=null),this.titleTxt.text="赠送"+l.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType);var e="获取失败",i=0,n="无",s=0,o="无";this.vipShowItem.vipBox.visible=this.headIcon.visible=!1;var a=0,r=0;t&&(this.vipShowItem.vipBox.visible=this.headIcon.visible=!0,this.headIcon.setInfo(t[3],t[1],t[4]),e=t[2],i=t[5],n=t[9],s=t[6],o=t[7],r=t[10]?t[10]:0,a=t[11]?t[11]:0,this.vipShowItem.setSVIPandVIP(r,a,t[12])),this.text2.text="名字:"+e,this.text3.text="等级:"+i,this.text4.text="仙缘:"+(n||"无"),this.text5.text="战力:"+s,this.text6.text="战队:"+(o||"无"),this.text7.text=""},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.addMaxBtn,this,this.addMaxBtnHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.showNum),this.onAutoGlobalEvt("GET_GOODER_SHOW_REPLY",this,this.showUI),this._input.on(i.CHANGE,this,this.inputHandler),this._input.addListeners()},o.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._input.off(i.CHANGE,this,this.inputHandler),this._input.removeListeners()},o.prototype.inputHandler=function(){this._useNum=this._input.value},o.prototype.addMaxBtnHandler=function(){this._input.value=this._maxNum,this.inputHandler()},o.prototype.btnHandler=function(){t.SingleDogGoodManCtrl.instance.GiveGoodCard(this.festivalType,this._roleId,this._useNum),this.close()},o.prototype.showNum=function(){var t=CommonUtil.getPropCountById(l.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this.festivalType));this.setMoney(t)},o.prototype.setMoney=function(t){this.moneyText.text=t.toString();var e=this.text1.width+this.moneyText.textWidth,i=(this.width-e)/2;this.text1.x=i,this.moneyText.x=this.text1.x+this.text1.textWidth},s=o,t.SingleDogGoodManAlert=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_good_man||(t.childrens_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayGoodManAlert=n}(modules=modules||{}),function(t){var n,i,e,s,o,a,r;function l(){return i.call(this)||this}n=t.single_dog_good_man||(t.single_dog_good_man={}),e=t.common.CustomList,s=laya.maths.Point,o=t.common.BtnGroup,a=Laya.Event,i=ui.SingleDogGoodManJiLuAlertUI,__extends(l,i),Object.defineProperty(l.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),l.prototype.initialize=function(){i.prototype.initialize.call(this),this._pos=new s(60,70),this._list=new e,this._list.width=530,this._list.height=504,this._list.hCount=1,this._list.spaceX=0,this._list.itemRender=n.SingleDogGoodManJiLuItem,this.listBox.addChild(this._list),this._list.x=0,this._list.y=0,this._btnGroup=new o,this._btnGroup.setBtns(this.btn1,this.btn2)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,n.SingleDogGoodManCtrl.instance.GetSendRecord(this.festivalType),n.SingleDogGoodManCtrl.instance.GetReceiveRecord(this.festivalType)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,a.CHANGE,this,this.btnGroupHandler),this.onAutoGlobalEvt("DOG_FESTIVAL_GOODMAN_JILU_UPDATE",this,this.btnGroupHandler)},l.prototype.btnGroupHandler=function(){var t=new Array;if(0===this._btnGroup.selectedIndex){for(var e=0;e<n.SingleDogGoodManModel.instance.getZengSongJiLu(this.festivalType).length;e++)(i=n.SingleDogGoodManModel.instance.getZengSongJiLu(this.festivalType)[e])&&t.push([1,i,this.festivalType]);this.titleTxt.text="赠送记录",this.tipText.visible=0===t.length,this.tipText.text="当前并无赠送记录"}else if(1===this._btnGroup.selectedIndex){for(e=0;e<n.SingleDogGoodManModel.instance.getHuoDeJiLu(this.festivalType).length;e++){var i;(i=n.SingleDogGoodManModel.instance.getHuoDeJiLu(this.festivalType)[e])&&t.push([2,i,this.festivalType])}this.titleTxt.text="获赠记录",this.tipText.visible=0===t.length,this.tipText.text="当前并无获赠记录"}this._list.datas=t},l.prototype.close=function(t,e){i.prototype.close.call(this,t,e)},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),i.prototype.destroy.call(this)},r=l,n.SingleDogGoodManJiLuAlert=r}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_good_man||(t.childrens_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManJiLuAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayGoodManJiLuAlert=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("festival_consume_rank"),e=0,i=t.length;e<i;e++){var n=t[e],s=n[0];this._tab[s]||(this._tab[s]=new Array),this._tab[s].push(n)}},n.prototype.getCfgsById=function(t,e,i,n){var s=this._tab[t];if(!s)return null;for(var o=0;o<s.length;o++){var a=s[o],r=a[4],l=a[5],h=a[1][0],c=a[1][1];if(i>=r[0]&&i<=r[1]&&n>=l[0]&&n<=l[1]&&h<=e&&e<=c)return a}return null},i=n,e.FestivalConsumeRankCfg=i}(modules=modules||{}),function(a){var t,i,r,e,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}t=a.festival||(a.festival={}),r=a.config.FestivalConsumeRankCfg,e=a.common.CustomList,n=a.funcOpen.FuncOpenModel,i=ui.WarmerWintersayRankViewUI,__extends(o,i),o.prototype.getItemClass=function(){return null},o.prototype.setUI=function(){},Object.defineProperty(o.prototype,"consumptionItemId",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"consume",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rankersTableById",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rankersTableByRank",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"restTmConsumption",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actionOpenId",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=new e,this._list.width=630,this._list.height=624,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=this.getItemClass(),this.listBox.addChild(this._list),this._list.x=0,this._list.y=0,this._allMingCiArr=new Array;for(var t=1;t<=50;t++)this._allMingCiArr.push(t);this.setUI()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("ACTIVITY_SPENDING_RANKING",this,this.showUI),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){a.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._allMingCiArr&&(this._list.datas=this._allMingCiArr),this.showUI(),a.festival.FestivalCtrl.instance.getFestivalConsumeRank();var t=(GlobalData.serverTime-GlobalData.timeZoneOffset)%864e5,e=Math.floor(1e3*Math.random())+500;0!=t&&(e+=864e5-t),console.log("delay: "+e/1e3),Laya.timer.once(e,this,this.getConsumeRank)},o.prototype.showUI=function(){this.setActivitiTime(),this.showMySocre()},o.prototype.getConsumeRank=function(){console.log("过12点 请求消费排行榜数据"),a.festival.FestivalCtrl.instance.getFestivalConsumeRank()},o.prototype.showMySocre=function(){var t=CommonUtil.getNameByItemId(this.consumptionItemId),e=this.consume;this.myYB.text="消耗"+t+":"+e,this.targetInfo.visible=!0,this.TargetYB.visible=!0,this.myYB.y=this.myRank.y=1048;var i=this.rankersTableById[PlayerModel.instance.actorId];if(i){var n=i[3];this.myRank.text="我的排名:"+n+" ",1==n?(this.targetInfo.visible=!1,this.TargetYB.visible=!1,this.myYB.y=this.myRank.y=1034):this.showUpPlayerScore(n-1)}else this.myRank.text="我的排名:未上榜",this.showUpPlayerScore(50)},o.prototype.showUpPlayerScore=function(t){var e=CommonUtil.getNameByItemId(this.consumptionItemId),i=this.rankersTableByRank[t];if(i)this.targetInfo.text="第 "+t+" 名:"+i[1],this.TargetYB.text="消耗"+e+":"+i[2];else{this.targetInfo.text="第 "+t+" 名:虚位以待...";var n=a.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),s=a.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType),o=r.instance.getCfgsById(this.festivalType,t,n,s);o&&(this.TargetYB.text="上榜需消耗"+e+":"+o[3])}},o.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=n.instance.getFuncIsOpen(this.actionOpenId);this.restTmConsumption>=GlobalData.serverTime&&t?(this.activityEnd.color="#ffffff",this.activityText.visible=!0,this.activityEnd.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityEnd.color="#FF3e3e",this.activityText.visible=!1,this.activityEnd.text="活动已结束")},o.prototype.activityHandler=function(){this.activityText.text=""+CommonUtil.timeStampDDHHMMToHHMMSS(this.restTmConsumption),this.restTmConsumption<GlobalData.serverTime&&(this.activityEnd.color="#FF3e3e",this.activityText.visible=!1,this.activityEnd.text="活动已结束",Laya.timer.clear(this,this.activityHandler),a.festival.FestivalCtrl.instance.getFestivalConsumeRank())},o.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.getConsumeRank)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},s=o,t.PayRankBasePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_pay_rank||(t.childrens_day_pay_rank={}),i=t.festival.PayRankBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ChildrensDayPayRankItem},s.prototype.setUI=function(){this.bgImg.skin="dragon_boat_day/image_txwm_18.jpg"},Object.defineProperty(s.prototype,"consumptionItemId",{get:function(){return e.ChildrensDayPayRankModel.instance.consumptionItemId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"consume",{get:function(){return e.ChildrensDayPayRankModel.instance.consume},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableById",{get:function(){return e.ChildrensDayPayRankModel.instance._rankersTableById},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableByRank",{get:function(){return e.ChildrensDayPayRankModel.instance._rankersTableByRank},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"restTmConsumption",{get:function(){return e.ChildrensDayPayRankModel.instance.restTmConsumption},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"actionOpenId",{get:function(){return 806},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayPayRankPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="student_day/image_sypd_bg05.jpg",t.titleTxt.text="朋克连充",t}e=t.bar_day_continuous_pay||(t.bar_day_continuous_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.BarDayContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.BarDayContinuousPayItem},o.prototype.getRestTime=function(){return e.BarDayContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(820)},o.prototype.getMoneyAcc=function(){return e.BarDayContinuousPayModel.instance.moneyAcc},s=o,e.BarDayContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="student_day/image_sypd_bg06.jpg",t.titleTxt.text="每日累充",t}e=t.bar_day_cumulate_pay||(t.bar_day_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.BarDayCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.BarDayCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(821)},s=o,e.BarDayCumulatePayPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="student_day/image_sypd_bg08.jpg",t}e=t.bar_day_festival||(t.bar_day_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.BarDayFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayFestConLoginPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_festival||(t.bar_day_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="student_day/image_sypd_bg15.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(278,336,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this._festType=t.festival.FestivalModel.instance.BarDayType},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.BarDayFestHilarityPanel=n}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.bar_day_festival||(s.bar_day_festival={}),o=s.festival.FestDoubleRewardBasePanel,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.bgImg.skin="student_day/image_sypd_bg13.jpg",this.foureTxt.innerHTML="",this.fiveTxt.innerHTML="";var t=CommonUtil.getColorById(15040064),e=CommonUtil.getColorById(13240073),i=CommonUtil.getNameByItemId(15040064),n=CommonUtil.getNameByItemId(13240073);this.oneTxt.innerHTML="活动期间内,参与玩法可掉落<span style='color:"+t+"'>"+i+"</span>或<span style='color:"+e+"'>"+n+"</span>",this.TwoTxt.innerHTML="<span style='color:"+t+"'>"+i+"</span>可在<span style='color:#50ff28'>【朋克兑换】</span>中兑换稀有奖励",this.threeTxt.innerHTML="<span style='color:"+e+"'>"+n+"</span>可在<span style='color:#50ff28'>【藏宝之地】</span>中用于探寻宝藏",this.rightBtn.visible=this.leftBtn.visible=!0,this.text1.y=this.timeTxt.y=871,this.oneTxt.y=921,this.TwoTxt.y=952,this.threeTxt.y=984,this._festType=s.festival.FestivalModel.instance.BarDayType},i.prototype.leftHandler=function(){WindowManager.instance.open(33)},i.prototype.rightHandler=function(){WindowManager.instance.open(194)},e=i,t.BarDayFestDoubleRewardPanel=e}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="student_day/image_sypd_bg03.jpg",t}e=t.bar_day_festival||(t.bar_day_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.BarDayFestDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayFestDailyRewardPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_festival||(t.bar_day_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.BarDayType,this._funcId=828},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="student_day/image_sypd_bg12.png",this.v.closeBtn.skin="common/btn_0yg_close.png",this.v.bgImg.y=199,this.v.tipTxt.pos(303,429,!0),this.v.closeBtn.pos(639,353,!0),this.v.stateImg.pos(355,613,!0),this.v.goBtn.pos(312,604,!0),this.v.rewardBox.pos(190,481,!0),this.v.tipTxt.text="朋克特惠,限时首充",this.v.tipTxt.color="#ffffff",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.BarDayFestFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_store||(t.bar_day_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.BarDayStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.BarDayStoreItem},o.prototype.getRestTime=function(){return e.BarDayStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(829)},s=o,e.BarDayStorePanel=s}(modules=modules||{}),function(n){var s,e,t,i,o,a;function r(){return e.call(this)||this}s=n.festival||(n.festival={}),t=ui.FestConvertViewUI,i=n.common.SimpleList,o=n.config.FestivalSwapCfg,e=t,__extends(r,e),Object.defineProperty(r.prototype,"itemId1",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemId2",{get:function(){return 0},enumerable:!0,configurable:!0}),r.prototype.getItemClass=function(){return null},Object.defineProperty(r.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),r.prototype.goHandler=function(){},r.prototype.setUI=function(){},Object.defineProperty(r.prototype,"festivalTypeEx",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hintArr",{get:function(){return[]},enumerable:!0,configurable:!0}),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(this.getItemClass(),303,169,1,2,10,3),this._list.width=616,this._list.height=727,this._list.x=52,this._list.y=264,this.addChild(this._list),this.oneImg.width=this.oneImg.height=this.twoImg.width=this.twoImg.height=this.threeImg.width=this.threeImg.height=40,this.oneImg.visible=this.countOneTxt.visible=!1,this.twoImg.skin=CommonUtil.getIconById(this.itemId1),this.threeImg.skin=CommonUtil.getIconById(this.itemId2),this.setUI()},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_SWAP_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.onAutoGlobalEvt("ONE_CLICK_TICK_EXCHANGE_HINT",this,this.setBtnUpdate),this.onAutoClick(this.goBtn,this,this.goHandler),this.onAutoClick(this.setBtn,this,this.setBtnHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){n.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},r.prototype.setBtnUpdate=function(){var t=n.customData.CustomDataModel.instance.getCustomDataByKey(44);this.setBtn.selected=1===t[0]},r.prototype.setBtnHandler=function(){if(this._list.datas){var t=[];if(!this.setBtn.selected)for(var e=0;e<this._list.datas.length;e++){var i=this._list.datas[e];t.push(i[0])}n.customData.CustomDataCtrl.instance.setCustomData(this.festivalTypeEx,t)}n.customData.CustomDataCtrl.instance.setCustomData(44,[this.setBtn.selected?0:1]),s.FestivalCtrl.instance.getCustomizeData()},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateBag(),this.updateInfo(),this._list.scrollTo(0),this.setBtnUpdate(),localStorage.getItem(n.player.PlayerModel.instance.actorId+"_"+this.festivalType+"_OneClickTickExchangeHint")||(n.customData.CustomDataCtrl.instance.setCustomData(44,[1]),localStorage.setItem(n.player.PlayerModel.instance.actorId+"_"+this.festivalType+"_OneClickTickExchangeHint","1")),s.FestivalCtrl.instance.getCustomizeData()},r.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},r.prototype.updateInfo=function(){if(this._info=n.festival.FestivalModel.instance.info[this.festivalType],this._info&&this._info[10][1]){this._list.datas&&this._list.datas.length||(this._list.datas=o.instance.getCfgbyTypeDay(this.festivalType,this._info[5])),this._time=n.festival.FestivalModel.instance.getDelayTimeStamp(this.festivalType),this.goBtn.visible=0!==this._info[0],this.tipsText.visible=!1,this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(this.timeTxt.text="活动已结束",Laya.timer.clear(this,this.loopHandler));var t=0;this._info&&(t=this._info[2]),t-GlobalData.serverTime<=0&&(this.goBtn.visible=!1,this.tipsText.visible=!0)}},r.prototype.updateBag=function(){var t=CommonUtil.getPropCountById(this.itemId1),e=CommonUtil.getPropCountById(this.itemId2),i=CommonUtil.getNameByItemId(this.itemId1),n=CommonUtil.getNameByItemId(this.itemId2);this.countTwoTxt.text=i+":"+t,this.countThreeTxt.text=n+":"+e,this.countThreeTxt.x=this.width-(this.countThreeTxt.textWidth+50),this.threeImg.x=this.countThreeTxt.x-(this.threeImg.width+5),this.countTwoTxt.x=this.threeImg.x-(this.countTwoTxt.textWidth+5),this.twoImg.x=this.countTwoTxt.x-(this.twoImg.width+5),this.countOneTxt.x=this.twoImg.x-(this.countOneTxt.textWidth+5),this.oneImg.x=this.countOneTxt.x-(this.oneImg.width+5)},r.prototype.loopHandler=function(){this._time>GlobalData.serverTime?this.timeTxt.text=n.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._time):(this.timeTxt.text="活动已结束",Laya.timer.clear(this,this.loopHandler))},a=r,s.ConvertBasePanel=a}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_festival||(t.bar_day_festival={}),i=t.festival.ConvertBasePanel,__extends(s,i),Object.defineProperty(s.prototype,"itemId1",{get:function(){return 15040064},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemId2",{get:function(){return 15050099},enumerable:!0,configurable:!0}),s.prototype.getItemClass=function(){return e.BarDayFestConvertItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),s.prototype.goHandler=function(){WindowManager.instance.open(1244)},s.prototype.setUI=function(){this.bgImg.skin="student_day/image_sypd_bg10.jpg",this.titileTxt.text="朋克兑换"},Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.BarDayTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"BAR_DAY_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),n=s,e.BarDayFestConvertPanel=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=i.call(this)||this;return t.showTip(),t}e=t.bar_day_festival||(t.bar_day_festival={}),n=ui.FestAlertUI,s=t.config.BlendCfg,i=n,__extends(a,i),a.prototype.showTip=function(){this.height=this.bgImg.height=this.backTxt.y=486,this.bgImg3.visible=this.tipHtml3.visible=this.titleImg3.visible=this.titleTxt3.visible=!1;var t=CommonUtil.getNameByItemId(15040064),e=CommonUtil.getNameByItemId(15050099);this.titleTxt1.text="【"+t+"】来源",this.titleTxt2.text="【"+e+"】来源",CommonUtil.setHTMLPro(this.tipHtml1,"#4c5e8a","SimHei",22),CommonUtil.setHTMLPro(this.tipHtml2,"#4c5e8a","SimHei",22),this.tipHtml1.style.leading=this.tipHtml2.style.leading=2,this.tipHtml1.innerHTML=s.instance.getCfgById(67034)[2][0],this.tipHtml2.innerHTML=s.instance.getCfgById(67035)[2][0]},o=a,e.BarDayFestAlert=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_good_man||(t.bar_day_good_man={}),i=t.festival.GoodManBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.BarDayType},s.prototype.btn3Handler=function(){WindowManager.instance.open(1250)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.titleTxt.text="送暖能源石"},n=s,e.BarDayGoodManPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_star||(t.bar_day_star={}),i=t.festival.StarBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.BarDayStarItem},s.prototype.setUI=function(){this.v.titleTxt.text="蒸汽朋克",this.v.text1.text="我收到的能源石:"},s.prototype.setPos=function(){this.v.activityText1.pos(63,103,!0),this.v.activityText.pos(221,103,!0)},s.prototype.setPos1=function(){this.v.activityText1.pos(130,103,!0)},s.prototype.initialize=function(){this._festType=t.festival.FestivalModel.instance.BarDayType,this._funcId=831,i.prototype.initialize.call(this),this._windowEnumID=1251,this._windowEnumID1=1247,this._avatarClip.scale(1.2,1.2)},n=s,e.BarDayStarPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_star||(t.bar_day_star={}),i=t.single_dog_sart.SingleDogSartAlert,__extends(s,i),Object.defineProperty(s.prototype,"broadcastId",{get:function(){return 136},enumerable:!0,configurable:!0}),n=s,e.BarDayStarAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_score_rank||(t.bar_day_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.BarDayScoreRankItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),s.prototype.getFuncOpen=function(){return t.funcOpen.FuncOpenModel.instance.getFuncIsOpen(834)},s.prototype.openWin=function(){WindowManager.instance.open(1246)},s.prototype.getRp=function(){return t.redPoint.RedPointCtrl.instance.getRPProperty("barDayParty4RP")},s.prototype.setBg=function(){this.bgImg.skin="student_day/image_sypd_bg09.jpg"},s.prototype.setUI=function(){this.integralDescriptionText.text="赠送1个"+t.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+"获得1积分"},n=s,e.BarDayScoreRankPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_yu_lan||(t.bar_day_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.BarDayYuLanItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),s.prototype.setUI=function(){this.bgImg.skin="student_day/image_sypd_bg14.jpg",this.titleImg.skin="student_day/image_sypd_pdxd.png",this.titleImg.visible=!0,this.BG.visible=!1,this.rewardShowItem.y=420,this.text1.text="我收到的能源石:",this.titleImg.y=134,this.titleImg.centerX=5,this.rewardShowItem.scale(1.25,1.25)},s.prototype.setMoXing=function(){this.rewardShowItem.fashionModelPosY=160,this.rewardShowItem.shenBingModelPosY=150,this.rewardShowItem.tianZhuModelPosY=130},n=s,e.BarDayYuLanPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_good_man||(t.bar_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayGoodManAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_good_man||(t.bar_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManJiLuAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayGoodManJiLuAlert=n}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="student_day/image_sypd_bg01.jpg",t}a=t.bar_day_single_pay||(t.bar_day_single_pay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.BarDaySinglePayModel.instance.getState(t[1],i),o=a.BarDaySinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.BarDaySinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.BarDaySinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(822)},n=s,a.BarDaySinglePayPanel=n}(modules=modules||{}),function(e){var t,i,n,s;function o(){var t=i.call(this)||this;return t.typeNum=e.festival.FestivalModel.instance.BarDayType,t.bgImg.skin="student_day/image_sypd_bg04.jpg",t.titleTxt.text="朋克累消",t}t=e.bar_day_seven_days_consume||(e.bar_day_seven_days_consume={}),n=e.funcOpen.FuncOpenModel,i=e.festival.SevenDaysConsumeBasePanel,__extends(o,i),o.prototype.getDatas=function(){return t.BarDaySevenDaysConsumeModel.instance.rewardList},o.prototype.getItemClass=function(){return t.BarDaySevenDaysConsumeItem},o.prototype.getRestTime=function(){return t.BarDaySevenDaysConsumeModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(823)},s=o,t.BarDaySevenDaysConsumePanel=s}(modules=modules||{}),function(o){var a,t;function e(){this._list=GlobalData.getConfig("divinatory_card_action"),this._tab={};for(var t=0;t<this._list.length;t++)this._tab[this._list[t][0]]=this._list[t]}a=o.config||(o.config={}),Object.defineProperty(e,"instance",{get:function(){return this._instance=this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.getCfg=function(t){return this._tab[t]},e.prototype.getList=function(){return this._list},e.prototype.feishengNotice=function(t,e){void 0===e&&(e=!1);var i,n=this._tab[t][1],s=a.FeiShengGradeCfg.instance.getCfgById(n)[1];i=e?0===n?"主角达到四转四重开启":"飞升通过"+s+"开启":"飞升"+s+"开启后可穿戴",o.notice.SystemNoticeManager.instance.addNotice(i,!0)},t=e,a.DivinatoryCardActionCfg=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t,e,i=GlobalData.getConfig("divinatory_card"),n=0,s=i.length;n<s;n++)t=1e3*i[n][0],e=i[n][1],this._tab[t+e]||(this._tab[t+e]={}),this._tab[t+e][i[n][2]]=i[n]},n.prototype.getCfgByType=function(t,e,i){var n;1==e||7==e||4==e||5==e?n=1:2!=e&&8!=e&&3!=e&&6!=e||(n=2);var s=1e3*t+n;return this._tab[s][i]},i=n,e.DivinatoryCardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t,e,i=GlobalData.getConfig("divinatory_card_mystery"),n=0,s=i.length;n<s;n++)t=i[n][1],e=i[n][0],this._tab[t]||(this._tab[t]={}),this._tab[t][e]=i[n]},n.prototype.getCfgByType=function(t,e){return this._tab[t][e]},i=n,e.DivinatoryCardMysteryCfg=i}(modules=modules||{}),function(d){var v,n,s,b,m,g,T,o,a,r,l,y,t;function h(){this.selectPage=0,this.list=[],this.yuanli=0,this.autoUse=!1,this.stageSclassArr=[1,2,3,4,5,6],this.typeTclassArr=[19,20,21,22,23],this.minNum=0,this.openNum=0,this._selectWinID=0,this.minNum=d.config.BlendCfg.instance.getCfgById(94003)[1][0],this.openNum=d.config.BlendCfg.instance.getCfgById(94008)[1][0]}v=d.divinatory_card||(d.divinatory_card={}),n=d.config.BlendCfg,s=d.redPoint.RedPointCtrl,b=d.bag.BagModel,m=d.common.AttrUtil,g=d.config.DivinatoryCardCfg,T=d.config.DivinatoryCardActionCfg,o=d.notice.SystemNoticeManager,a=d.divinatory_card.DivinatoryCardCtrl,r=d.bag.BagUtil,l=d.config.DivinatoryCardMysteryCfg,y=d.config.DaZhaoCfg,Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.getMinimumEquip=function(t){var e,i,n,s=this.getData(t)[4],o=[];if(s&&0!=s.length){for(var a=void 0,r=0,l=s;r<l.length;r++){var h=l[r],c=d.divinatory_card.DivinatoryUtil.getItemStageById(h[1][0]);a?c<a&&(a=c,i=h[0]):(a=c,i=h[0]),o.push(h[0])}e=a-1}else e=0,i=1;if(o.length<8){for(var p=0;p<8;p++)if(-1==o.indexOf(p+1)){i=p+1,e=0;break}var u=y.instance.getComposeCfgBySclass(this.typeTclassArr[t-1],this.stageSclassArr[e])[i-1][5][0][0];n=Number(String(u).substring(0,6)+i+"1")}else this.stageSclassArr[e]&&(n=y.instance.getComposeCfgBySclass(this.typeTclassArr[t-1],this.stageSclassArr[e])[i-1][1]);return n},h.prototype.setYuanli=function(t){this.yuanli=t,s.instance.setRPProperty("divinatoryCardBossRP",0<this.yuanli&&this.yuanli>=this.minNum+this.openNum)},h.prototype.getData=function(t){for(var e=0,i=this.list.length;e<i;e++)if(this.list[e][0]==t)return this.list[e]},h.prototype.checkItemRed=function(){for(var t=!1,e=0,i=this.list.length;e<i;e++)if(this.getBestEquipDic(this.list[e],!0)){t=!0;break}s.instance.setRPProperty("divinatoryCardItemRP",t),this._selectWinID=t?1160:0},h.prototype.getBestEquipDic=function(t,e){var i;if(void 0===e&&(e=!1),!(i="number"==typeof t?this.getData(t):t)||0==i[2])return null;for(var n=i[0],s=PlayerModel.instance.eraLevel,o=PlayerModel.instance.level,a=b.instance.getItemsByBagId(12),r={},l=!1,h=0,c=a.length;h<c;h++){var p=a[h],u=p[0];if(n===v.DivinatoryUtil.getType(u)){var d=CommonUtil.getItemCfgById(u);if(!(s<d[3]||o<d[4])){var y=CommonUtil.getPartById(u),g=r[y];if(!g&&i)for(var f=0,_=i[4];f<_.length;f++){var m=_[f];if(y===m[0]){g=m[1];break}}if((!g||p[3][6]>g[3][6])&&(r[y]=p,e)){l=!0;break}}}}return e?l:r},h.prototype.getEquipByTypePart=function(t,e){var i=this.getData(t);if(!i)return null;for(var n=0,s=i[4];n<s.length;n++){var o=s[n];if(e===o[0])return o[1]}},h.prototype.getEquipList=function(t){var e=this.getData(t),i={};if(e)for(var n=e[4],s=n.length-1;-1<s;s--)i[n[s][0]]=n[s][1];return i},h.prototype.getSuit=function(t){var e=this.getData(t),i=[];return e&&(i=e[5]),i},h.prototype.getState=function(t){var e,i=this.getData(t);return i&&(e=1==i[2]),e},h.prototype.getSuitAttr=function(t,e){void 0===e&&(e=!1);for(var i,n="",s=CommonUtil.formatHtmlStrByColor("#168a17","(已激活)"),o=t[0][0]/1e3>>0,a=t[0][2],r=CommonUtil.getColorByQuality(t[0][6]),l="",h=this.starNum(o,a-1),c=0,p=t.length;c<p;c++){var u=t[c],d=u[1];i=d+"件套:"+m.getAttrStr(u[3],"");var y=d<=h,g=void 0,f="";8==d&&(f=u[5]),y?(g=r,i=CommonUtil.formatHtmlStrByColor(r,i),i+=s):(g="#8b8b8b",i=CommonUtil.formatHtmlStrByColor(g,i+"(未激活)")),""!=f&&(f="<br/>"+CommonUtil.formatHtmlStrByColor(g,f)),n+=i+f+"<br/>"}if(e){var _=void 0;_=8<=h?s:CommonUtil.formatHtmlStrByColor("#ff3e3e","("+h+"/8)"),l=v.DivinatoryUtil.typeStrs(a)+"品"+T.instance.getCfg(o)[4],l=CommonUtil.formatHtmlStrByColor(r,l)+_+"<br/>"}return l+n},h.prototype.starNum=function(t,e){var i=this.getData(t),n=[],s=0;if(i)for(var o=(n=i[4]).length-1;-1<o;o--)e<=CommonUtil.getStarById(n[o][1][0])&&s++;return s},h.prototype.getMysteryRP=function(t){var e;if(!(e="number"==typeof t?this.getData(t):t)||0==e[2])return!1;var i=e[1];if(!l.instance.getCfgByType(e[0],i+1))return!1;for(var n=0,s=l.instance.getCfgByType(e[0],i),o=e[3],a=s[2],r=o.length-1;-1<r;r--)a<=o[r][1]&&n++;return 8<=n},h.prototype.checkStrongRP=function(){for(var t=!1,e=0,i=this.list.length;e<i;e++)if(this.getStrongRP(this.list[e])||this.getMysteryRP(this.list[e])){t=!0;break}s.instance.setRPProperty("divinatoryCardStrongRP",t),0==this._selectWinID&&(this._selectWinID=t?1161:0)},h.prototype.getStrongRP=function(t){var e;if(!(e="number"==typeof t?this.getData(t):t)||0==e[2])return!1;for(var i=e[0],n=e[4],s=e[3],o={},a=1,r=1e8,l=0;l<s.length;l++)o[s[l][0]]=s[l][1];for(var h=0;h<n.length;h++){var c=n[h][1],p=n[h][0];if(c){if(!(0<o[p])){r=0,a=p;break}r>o[p]&&(r=o[p],a=p)}}if(1e8==r)return!1;if(!g.instance.getCfgByType(i,a,r+1))return!1;for(var u=g.instance.getCfgByType(i,a,r)[3],d=!0,y=(h=0,u.length/2>>0);h<y;h++)if(CommonUtil.getPropCountById(u[2*h])<u[2*h+1]){d=!1;break}return d},h.prototype.addSpirit=function(t){void 0===t&&(t=d.divinatory_card.DivinatoryUtil.dailMax);var e=h.diItemId;if(0<b.instance.getItemCountById(e)){var i=t-this.yuanli;0==i?o.instance.addNotice("当前八卦值已满，无需使用八卦丹",!0):i<n.instance.getCfgById(94002)[1][0]?CommonUtil.alert("提示","使用后八卦值溢出，溢出部分不保留，是否确定？",[Handler.create(a.instance,a.instance.useDivinatoryItem,[1])],[]):a.instance.useDivinatoryItem(1)}else r.openLackPropAlert(e,1)},h.prototype.changeAutoUse=function(){this.autoUse?a.instance.setAutoUserDivinatory(!this.autoUse):0<b.instance.getItemCountById(h.diItemId)?a.instance.setAutoUserDivinatory(!this.autoUse):o.instance.addNotice("背包中没有八卦丹",!0)},h.prototype.updateBag=function(t){0===t&&h.instance.autoUse&&0===b.instance.getItemCountById(h.diItemId)&&a.instance.setAutoUserDivinatory(!1)},h.prototype.getEquipLv=function(t,e){var i=this.getData(t);if(i)for(var n=i[3],s=0;s<n.length;s++)if(e==n[s][0])return n[s][1];return 0},h.prototype.getEquipById=function(t){return this.getEquipByTypePart(v.DivinatoryUtil.getType(t),CommonUtil.getPartById(t))},h.prototype.openSelectRedWin=function(){0==this._selectWinID&&(this._selectWinID=1160),WindowManager.instance.open(this._selectWinID)},h.diItemId=13650002,t=h,v.DivinatoryCardModel=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._dataList={},this.qualitySuit={};for(var t,e,i=GlobalData.getConfig("divinatory_card_suit"),n={},s={},o=0,a=(this._list=i).length;o<a;o++){t=i[o][0],e=i[o][2],this.qualitySuit[e]||(this.qualitySuit[e]=i[o][6]);var r=t/1e3>>0;n[r]||(n[r]=!0,this._dataList[r]=[]);var l=this._dataList[r],h=1e3*r+e;null==s[h]&&(l.push([]),s[h]=l.length-1),l[s[h]].push(i[o])}},n.prototype.getCfgList=function(t){return this._dataList[t]},n.prototype.getCfg=function(t,e){for(var i=0,n=this._list.length;i<n;i++)if(t==this._list[i][0]&&e==this._list[i][2])return this._list[i]},n.prototype.gettypeCfg=function(t,e){for(var i=this._dataList[t],n=0,s=i.length;n<s;n++){var o=i[n][0][0]/1e3>>0,a=i[n][0][2];if(t==o&&e==a)return i[n]}},i=n,e.DivinatoryCardSuitCfg=i}(modules=modules||{}),function(t){var e,n,s,i,o,a,r,l,h,c,p;function u(){return null!==n&&n.apply(this,arguments)||this}e=t.divinatory_card||(t.divinatory_card={}),s=utils.TableUtils,i=t.common.CustomClip,o=t.divinatory_card.DivinatoryCardModel,a=t.common.SimpleList,r=t.divinatory_card.DivinatoryCardCtrl,l=t.config.DivinatoryCardSuitCfg,h=Laya.Event,c=t.common.CustomList,n=ui.DivinatoryCardViewUI,__extends(u,n),u.prototype.destroy=function(t){for(var e in void 0===t&&(t=!0),this._itemList)this._itemList[e]=this.destroyElement(this._itemList[e]);this._model=null,this._selectData=null,this._itemList=null,this._list=this.destroyElement(this._list),this._suitList=this.destroyElement(this._suitList),this._card=this.destroyElement(this._card),this._redList=this.destroyElement(this._redList),this._btnClip=this.destroyElement(this._btnClip),n.prototype.destroy.call(this,t)},u.prototype.initialize=function(){for(var t in n.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=a.create(e.DivinatoryCardItem,125,138,2,1,0),this._list.pos(47,87),this._list.size(620,143),this.addChild(this._list),this._itemList={},this._itemList[1]=this.item1,this._itemList[2]=this.item2,this._itemList[3]=this.item3,this._itemList[4]=this.item4,this._itemList[5]=this.item5,this._itemList[6]=this.item6,this._itemList[7]=this.item7,this._itemList[8]=this.item8,this._itemList)this._itemList[t].type=0,this._itemList[t].nameVisible=!1;this._model=o.instance,this.linkTxt.underline=!0,this._card=new e.DivinatoryCardBodyItem,this._card.pos(220,380),this.addChild(this._card),this._suitList=a.create(e.DivinatoryCardSuitItem,110,125,2,1,-7),this._suitList.pos(50,776),this._suitList.size(620,143),this.addChild(this._suitList),this._redList=[null,this.rp1,this.rp2,this.rp3,this.rp4,this.rp5,this.rp6,this.rp7,this.rp8],this._txtlist=c.create("v",54,911,606,135,e.DivinatoryCardHtml),this.addChild(this._txtlist),this._linktype=0},u.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t),this._linktype=t},u.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._model.winId=1160;var t=this._model.list;this._list.datas=t;var e=0;if(0<this._linktype)e=this._linktype;else for(var i=0;i<t.length;i++)if(this._model.getBestEquipDic(t[i],!0)){e=i;break}this._model.selectPage=e,this._list.selectedIndex=e},u.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.wearBtn,this,this.wearFun),this.onAutoClick(this.linkTxt,this,this.openSuitPalen),this.onAutoClick(this.tipBtn,this,this.helpHandler),this.onAutoGlobalEvt("DIVINATORY_CARD_WEAR",this,this.updateWearInfo),this.onAutoEvt(this._list,h.SELECT,this,this.selectHandler),this.onAutoEvt(this._suitList,h.SELECT,this,this.drawSuit)},u.prototype.updateWearInfo=function(){this._list.datas=this._model.list,this._suitList.datas=l.instance.getCfgList(this._type),this.drawItem(),this.drawSuit(),this._card.drawUI(this._type)},u.prototype.selectHandler=function(){var t=this._list.selectedData;0!=t[2]&&(this._model.selectPage=this._list.selectedIndex,this._selectData=t,this._type=this._selectData[0],this._suitList.datas=l.instance.getCfgList(this._type),this._suitList.selectedIndex=0,this.drawItem(),this._card.drawUI(this._type))},u.prototype.drawItem=function(){var t,e=this._model.getEquipList(this._type),i=this._model.getBestEquipDic(this._type);i=i||{};for(var n=1;n<9;n++){var s=this._itemList[n],o=e[n];s.dataSource=o,s.gray=!o;var a=null!=i[n];(this._redList[n].visible=a)&&(t=a)}this.showEffect(t);var r=this._model.getData(this._type)[8]>>0;this.fightClip.value=r+""},u.prototype.drawSuit=function(){var t=this._suitList.selectedData;this._txtlist.datas=[this._model.getSuitAttr(t)]},u.prototype.wearFun=function(){var t=this._model.getBestEquipDic(this._type);t=t||{};var e=s.values(t).map(function(t){return t[2]});if(e&&0!=e.length)r.instance.divinatoryFastWear(this._type,e);else{var i=o.instance.getMinimumEquip(this._type);if(i){var n=CommonUtil.getItemCfgById(i);WindowManager.instance.open(259,[[i,i,"","","","","",n[1]],6,!0])}else r.instance.divinatoryFastWear(this._type,e)}},u.prototype.openSuitPalen=function(){WindowManager.instance.open(1164,this._suitList.datas)},u.prototype.showEffect=function(t){t?(this._btnClip||(this._btnClip=i.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.wearBtn.x-5,this.wearBtn.y-8),this._btnClip.scale(.96,.9)),this._btnClip.visible=!0,this._btnClip.play()):this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1)},u.prototype.helpHandler=function(){CommonUtil.alertHelp(19039)},u.prototype.close=function(){this.showEffect(!1),n.prototype.close.call(this)},p=u,e.DivinatoryCardPanel=p}(modules=modules||{}),function(l){var e,n,i,h,s,o,a,r,c,p,u,t;function d(){var t=null!==n&&n.apply(this,arguments)||this;return t._selectHand=0,t}e=l.divinatory_card||(l.divinatory_card={}),i=l.bag.BagUtil,h=l.config.DivinatoryCardCfg,s=l.common.CustomClip,o=l.common.SimpleList,a=l.divinatory_card.DivinatoryCardModel,r=l.divinatory_card.DivinatoryCardCtrl,c=l.notice.SystemNoticeManager,p=l.config.DivinatoryCardMysteryCfg,u=Laya.Event,n=ui.DivinatoryStrongViewUI,__extends(d,n),d.prototype.showEffect=function(t){t?(this._btnClip||(this._btnClip=s.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.onekeyBtn.x-5,this.onekeyBtn.y-8),this._btnClip.scale(.96,.9)),this._btnClip.visible=!0,this._btnClip.play()):this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1)},d.prototype.createEff=function(t,e){var i=s.create("assets/effect/activate.atlas","activate",4,!1,5);return i.visible=!1,i.pos(t.x-85,t.y-80),i.on(u.COMPLETE,this,this.closeEff,[e]),this.addChild(i),i},d.prototype.close=function(){for(var t in this._strongEff)this._strongEff[t].visible=!1;this.showEffect(!1),this._scheEffect1.stop(),n.prototype.close.call(this)},d.prototype.destroy=function(t){for(var e in void 0===t&&(t=!0),this._strongEff)this._strongEff[e].off(u.COMPLETE,this,this.closeEff),this._strongEff[e]=this.destroyElement(this._strongEff[e]);for(var i in this._itemList)this._itemList[i]=this.destroyElement(this._itemList[i]);this._redList=this.destroyElement(this._redList),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),this._card=this.destroyElement(this._card),this._scheEffect1=this.destroyElement(this._scheEffect1),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._attrTxts=this.destroyElement(this._attrTxts),this._upAttrTxts=this.destroyElement(this._upAttrTxts),this._arrowImgs=this.destroyElement(this._arrowImgs),this._strongEff=null,this._curPariArr=null,this._model=null,this._info=null,this._itemList=null,this._pariData=null,n.prototype.destroy.call(this,t)},d.prototype.initialize=function(){for(var t in n.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=o.create(e.DivinatoryCardItem,125,138,2,1,0),this._list.pos(47,87),this._list.size(620,143),this.addChild(this._list),this._itemList={},this._itemList[1]=this.item1,this._itemList[2]=this.item2,this._itemList[3]=this.item3,this._itemList[4]=this.item4,this._itemList[5]=this.item5,this._itemList[6]=this.item6,this._itemList[7]=this.item7,this._itemList[8]=this.item8,this._itemList)this._itemList[t].needTip=!1,this._itemList[t].type=0,this._itemList[t].nameVisible=!1;this._model=a.instance,this._pariData={},this._card=new e.DivinatoryCardBodyItem,this._card.pos(220,380),this.addChild(this._card),this.currImg.mouseEnabled=!1,this._attrNameTxts=[this.pro_1,this.pro_2,this.pro_3],this._attrTxts=[this.proNumTxt_1,this.proNumTxt_2,this.proNumTxt_3],this._upAttrTxts=[this.upProNumTxt_1,this.upProNumTxt_2,this.upProNumTxt_3],this._arrowImgs=[this.arrImg_1,this.arrImg_2,this.arrImg_3],this._strongEff={},this._scheEffect1=s.create("assets/effect/wave.atlas","wave",8),this.conBox1.addChildAt(this._scheEffect1,0),this._scheEffect1.loop=!0,this._scheEffect1.pos(-10,100,!0),this._redList=[null,this.rp1,this.rp2,this.rp3,this.rp4,this.rp5,this.rp6,this.rp7,this.rp8]},d.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._model.winId=1161;var t=this._model.list;this._list.datas=t;for(var e=0,i=0;i<t.length;i++)if(this._model.getStrongRP(t[i])){e=i;break}this._model.selectPage=e,this._list.selectedIndex=e,this._scheEffect1.play()},d.prototype.onEvt=function(){for(var t in n.prototype.onEvt.call(this),this.onAutoClick(this.strongBtn,this,this.strongHandler),this.onAutoClick(this.onekeyBtn,this,this.strongHandler),this.onAutoClick(this.steryBtn,this,this.openMasterWin),this.onAutoClick(this.tipBtn,this,this.helpHandler),this.onAutoGlobalEvt("DIVINATORY_GRADE",this,this.updateGradeInfo),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updBaginfo),this.onAutoEvt(this._list,u.SELECT,this,this.selectHandler),this._itemList)this.onAutoClick(this._itemList[t],this,this.onselectItem)},d.prototype.updBaginfo=function(t){0==t&&Laya.timer.once(200,this,this.updBag)},d.prototype.updBag=function(){this.drawItem(),this.drawAttr(),this._list.datas=this._model.list},d.prototype.updateGradeInfo=function(){this.drawData(),this._list.datas=this._model.list,r.gapmystery?r.gapmystery=!1:this.showStrongEff()},d.prototype.showStrongEff=function(){if(this._curPariArr)for(var t=this._info[3],e=t.length-1;-1<e;e--)if(t[e][1]>this._curPariArr[e][1]){var i=t[e][0];this._strongEff[i]||(this._strongEff[i]=this.createEff(this._itemList[i],i)),this._strongEff[i].play().visible=!0}},d.prototype.closeEff=function(t){this._strongEff[t].visible=!1},d.prototype.openMasterWin=function(){WindowManager.instance.openDialog(1258,[8,this._info])},d.prototype.selectHandler=function(){var t=this._list.selectedData;(this._selectHand=0)!=t[2]&&(this._model.selectPage=this._list.selectedIndex,this._selectCfg=t,this._type=this._selectCfg[0],this._info=this._model.getData(this._type),this.drawData())},d.prototype.drawData=function(){this.drawItem(),this.drawAttr(),this.master(),this._card.drawUI(this._type),this.sceretRP.visible=a.instance.getMysteryRP(this._info);var t=this._info[7]+this._info[6]>>0;this.fightClip.value=t+""},d.prototype.drawAttr=function(){var t=this._pariData[this._selectPari];t<0&&(t=0);var e=h.instance.getCfgByType(this._type,this._selectPari,t),i=h.instance.getCfgByType(this._type,this._selectPari,t+1);l.common.AttrUtil.setAttrTxts(e,i,this._attrNameTxts,this._attrTxts,this._arrowImgs,this._upAttrTxts,4);var n=!(this._lossItemId=0);if(i){var s=e[3],o=s[1],a=CommonUtil.getPropCountById(s[0]);this.iconImg.skin=CommonUtil.getIconById(s[0]);var r=!0;o<=a?this.lossTxt.color="#168a17":(this._lossItemId=s[0],r=!(this.lossTxt.color="#ff3e3e")),this.showEffect(this._canEquip&&r),this.lossTxt.text=a+"/"+o,this.maxTxt.visible=!1,this.maxLvBox.x=219}else this.maxTxt.visible=!0,this.showEffect(!1),n=!(this.maxLvBox.x=279);this.strongBtn.visible=this.onekeyBtn.visible=this.iconImg.visible=this.lossTxt.visible=n,this.lossTxt.visible=this.iconImg.visible=!this.maxTxt.visible},d.prototype.drawItem=function(){var t=this._model.getEquipList(this._type),e=[];this._info&&(e=this._info[3]),this._pariData={};for(var i=0;i<e.length;i++){var n=e[i][0];this._pariData[n]=e[i][1]}for(var s=1;s<9;s++){var o=this._itemList[s],a=t[s];(o.dataSource=a)?(o.gray=!1,this._pariData[s]?o.setNum(this._pariData[s]+"级"):(o.setNum(""),this._pariData[s]=0),this.showRed(s,this._pariData[s])):(o.gray=!0,o.setNum(""),this._pariData[s]=-100,this._redList[s].visible=!1)}this._selectPari=1;var r=1e9;if(0<this._selectHand)r=1,this._selectPari=this._selectHand;else for(var l in this._pariData){var h=this._pariData[l];h<0||h<r&&(r=h,this._selectPari=Number(l))}this._canEquip=1e9!=r,this._canEquip?(this.currImg.pos(this._itemList[this._selectPari].x-3,this._itemList[this._selectPari].y-3),this.currImg.visible=!0):this.currImg.visible=!1},d.prototype.strongHandler=function(t){if(this._canEquip)if(0==this._lossItemId){var e=0;t.target==this.onekeyBtn&&(e=1),this._curPariArr=this._info[3],r.instance.divinatoryIntensify(this._type,this._selectPari,e)}else i.openLackPropAlert(this._lossItemId,-1);else c.instance.addNotice("没有装备可强化",!0)},d.prototype.showRed=function(t,e){if(h.instance.getCfgByType(this._type,t,e+1)){for(var i=h.instance.getCfgByType(this._type,t,e)[3],n=!0,s=0,o=i.length/2>>0;s<o;s++)if(CommonUtil.getPropCountById(i[2*s])<i[2*s+1]){n=!1;break}this._redList[t].visible=n}else this._redList[t].visible=!1},d.prototype.master=function(){var t=this._info[1],e=p.instance.getCfgByType(this._type,t+1);if(this.conTxt1.text="玄机大师·"+t+"阶",!e)return this._scheEffect1.y=-15,void(this.proTxt_1.text="8/8");for(var i=0,n=p.instance.getCfgByType(this._type,t),s=this._info[3],o=n[2],a=s.length-1;-1<a;a--)o<=s[a][1]&&i++;if(8<=i)this._scheEffect1.y=-15,this.proTxt_1.text="8/8";else{8<i&&(i=8);var r=i/8;this.proTxt_1.text=i+"/8",this._scheEffect1.y=100*(1-r)}},d.prototype.onselectItem=function(t){var e=this._model.getEquipList(this._type),i=Number(t.target.name);e[i]&&(this.currImg.pos(this._itemList[i].x-3,this._itemList[i].y-3),this.currImg.visible=!0,this._selectHand=i,this._selectPari=i,this.drawAttr())},d.prototype.helpHandler=function(){CommonUtil.alertHelp(19040)},t=d,e.DivinatoryStrongPanel=t}(modules=modules||{}),function(t){var e,i,n;function s(){}e=t.divinatory_card||(t.divinatory_card={}),i=t.config.BlendCfg,s.getType=function(t){return(t/1e5>>0)%100-11},s.typeStrs=function(t){return i.instance.getCfgById(94006)[2][t-1]},Object.defineProperty(s,"dailMax",{get:function(){return i.instance.getCfgById(94001)[1][0]},enumerable:!0,configurable:!0}),s.getDivinatoryPartName=function(t){return s._partName[t-1]},s.isDivinatoryEquip=function(t){var e;return 812<=(e=1e5<t?t/1e5>>0:t)&&e<=816},s.getItemStageById=function(t){return(.001*t>>0)%10},s.typeNames=["玄龟境","惊雷境","白泽境","焱凰境","苍龙境"],s._partName=["乾牌","坎牌","艮牌","震牌","巽牌","离牌","坤牌","兑牌"],n=s,e.DivinatoryUtil=n}(modules=modules||{}),function(l){var t,h,e,c,i,p,u,d,n,y,g,s;function o(){return null!==h&&h.apply(this,arguments)||this}t=l.divinatory_card||(l.divinatory_card={}),e=laya.ui.Button,c=l.commonAlert.EquipAlertUtil,i=Laya.Text,p=l.divinatory_card.DivinatoryUtil,u=l.divinatory_card.DivinatoryCardModel,d=l.config.DivinatoryCardActionCfg,n=l.divinatory_card.DivinatoryCardCtrl,y=l.config.DivinatoryCardCfg,g=l.config.ItemEquipCfg,h=l.commonAlert.NotGeneratedAlert,__extends(o,h),o.prototype.destroy=function(){this._wearBtn=this.destroyElement(this._wearBtn),this._txt1=this.destroyElement(this._txt1),this._flyUpTxt=this.destroyElement(this._flyUpTxt),this._card=this.destroyElement(this._card),this._itemCfg=null,h.prototype.destroy.call(this)},o.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this._wearBtn,this,this.wearHandler)},o.prototype.initialize=function(){h.prototype.initialize.call(this),this._wearBtn=new e("common/btn_tongyong_6.png","穿戴"),this._wearBtn.stateNum=1,this._wearBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this._wearBtn.labelPadding="-3,0,0,0",this._wearBtn.labelSize=28,this._wearBtn.labelFont="SimHei",this.elseBox.addChild(this._wearBtn),this._wearBtn.centerX=0,this._wearBtn.y=this.rankTxt.y+50,this.elseBox.height=this._wearBtn.y+this._wearBtn.height+10,this._txt1=new i,this._txt1.color="#ffffff",this._txt1.font="SimHei",this._txt1.fontSize=24,this._txt1.pos(156,150),this.addChild(this._txt1),this._txt1.text="飞升境界:",this._flyUpTxt=new i,this._flyUpTxt.font="SimHei",this._flyUpTxt.fontSize=24,this._flyUpTxt.pos(271,150),this.addChild(this._flyUpTxt),this._card=new t.DivinatoryCardTipsItem,this._card.x=10,this.addChild(this._card)},o.prototype.wearHandler=function(){if(this.itemData){if(8===CommonUtil.getItemTypeById(this.itemData[0])){var t=p.getType(this.itemData[0]);if(u.instance.getState(t)){if(this.myEquip&&this.itemData[3][6]<this.myEquip[3][6])return void l.notice.SystemNoticeManager.instance.addNotice("低装备不能替换高级装备",!0);n.instance.divinatoryWear(t,this.itemData[2])}else d.instance.feishengNotice(t)}this.close()}},o.prototype.setOpenParam=function(t){h.prototype.setOpenParam.call(this,t[0]),this._isBag=1===t[1],this._ismine=0===t[1],this.item=t[0]},Object.defineProperty(o.prototype,"item",{set:function(t){var e=t,i=e[0];this.teamIdTest=i,this._itemCfg=g.instance.getItemCfgById(i);var n=e[3];this._iMsg=n,this._type=p.getType(i),this._part=l.common.CommonUtil.getPartById(i),this.myEquip=u.instance.getEquipByTypePart(this._type,this._part),this.isNeedContrast=!this._ismine;var s,o=d.instance.getCfg(this._type)[1],a="#50ff28";if(u.instance.getState(this._type)||(a="#ff3e3e"),this._flyUpTxt.visible=!!o,this._txt1.visible=!!o,o){var r=l.config.FeiShengGradeCfg.instance.getCfgById(o);this._flyUpTxt.text=r[1],this._flyUpTxt.color=a}this.setBaseInfo(e),this.setStrongAttr(this._itemCfg),n?(s=this.setBestAttr(n),this._hintTxt.text=""):s=this.setBestAttr2(null),0==s?(this.bestAttrBox.visible=!1,this._card.y=this.conBox.y+18):(this.bestAttrBox.visible=!0,this._card.y=this.conBox.y+this.setConHeight(this._bestAttrInitY+30*s+10)),this._card.drawUI(this._itemCfg,this._type),this.elseBox.y=this._card.y+this._card.height,this._isBag?(this._wearBtn.visible=!0,this.elseBox.height=this._wearBtn.y+this._wearBtn.height+10):(this._wearBtn.visible=!1,this.elseBox.height=50),this.setRank(i)},enumerable:!0,configurable:!0}),o.prototype.setBaseInfo=function(t){h.prototype.setBaseInfo.call(this,t);var e=0;this.myEquip&&!this._ismine&&(e=this.myEquip[3][6]);var i=(this._iMsg?this._iMsg[6]:this._itemCfg[14][0])-e;c.judgeDiff(i,this.myScoreTxt,this.scoreImg)},o.prototype.setStrongAttr=function(t){var e=t[8],i=[],n=y.instance.getCfgByType(this._type,this._part,u.instance.getEquipLv(this._type,this._part));if(n&&(i=n[4]),h.prototype.setBaseAttr.call(this,this.itemData,!1,i),this._hintTxt.pos(65,this.conBox.y+37,!0),this.myEquip&&!this._ismine)for(var s=g.instance.getItemCfgById(this.myEquip[0])[8],o=0;o<.5*s.length;o++){var a=s[2*o+1],r=e[2*o+1]-a;this.baseAttrImgs[o].visible=!0,c.judgeDiff(r,this.myBaseAttrTxts[o],this.baseAttrImgs[o])}else for(o=0;o<this.myBaseAttrTxts.length;o++)this.myBaseAttrTxts[o].color="#cbcade",this.myBaseAttrTxts[o].text="无",this.baseAttrImgs[o].visible=!1},o.prototype.setBestAttr=function(t){var e=h.prototype.setBestAttr.call(this,t),i=0;return!this._ismine&&this.myEquip?i=h.prototype.setBestAttr.call(this,this.myEquip[3],"my"):this.myBestAttrTxts.forEach(function(t){t.visible=!1}),i<=e?e:i},s=o,t.DivinatoryCardAlert=s}(modules=modules||{}),function(e){var t,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}t=e.divinatory_card||(e.divinatory_card={}),n=e.common.CustomList,s=e.divinatory_card.DivinatoryCardModel,o=e.common.SimpleList,a=e.common.FuncBtnGroup,i=ui.DivinatoryBossViewUI,__extends(l,i),l.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._list=this.destroyElement(this._list),this._tabList=this.destroyElement(this._tabList),i.prototype.destroy.call(this,t)},l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnGroup=new a,this._btnGroup.setBtns(this.spiritBtn,this.divinatoryBtn,this.yibaoBtn),this._btnGroup.setFuncIds(354,837,852),this._tabList=o.create(t.DivinatoryBossCopyIcon,160,160,2,1,-23),this._tabList.pos(35,75,!0),this._tabList.size(645,160),this.addChildAt(this._tabList,3),this._list=n.create("v",48,240,624,640,t.DivinatoryBossitem),this.addChild(this._list),this._tabList.datas=e.config.SceneDivinatoryBossCfg.instance.typeList,this._spiritMax=t.DivinatoryUtil.dailMax},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=1,this._tabList.selectedIndex=0,this.updateSpirit(),this.setTextTip()},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.addBtn,this,this.addHandler),this.onAutoClick(this.autoBtn,this,this.autoHandler),this.onAutoGlobalEvt("DIVINATORY_BOSS_DILL",this,this.updateSpirit),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.regAutoRP(this.spiritDungeonRP,["spiritDungeonRP"]),this.regAutoRP(this.divinatoryCardBossRP,["divinatoryCardBossRP"]),this.regAutoRP(this.yibaoRP,["outsideShowDungeonRP"]),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoEvt(this._tabList,"select",this,this.selectHandler),this.onAutoGlobalEvt("SHENG_YU_BOSS_OPENONE",this,this.bossItemHandler),this.onAutoClick(this.tipBtn,this,this.helpHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setTextTip)},l.prototype.setTextTip=function(){var t=e.bag.BagModel.instance.getItemCountById(13650002);this.textTip.text="自动使用八卦丹(剩余"+t+"个)"},l.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?WindowManager.instance.open(574):2===this._btnGroup.selectedIndex&&WindowManager.instance.open(1272)},l.prototype.selectHandler=function(){var t=this._tabList.selectedData;s.instance.getState(t)&&(this._list.datas=e.config.SceneDivinatoryBossCfg.instance.getCfgList(t),this._list.selectedIndex=0)},l.prototype.bossItemHandler=function(){this._list.relayout()},l.prototype.updateSpirit=function(){this.drawNum.text=s.instance.yuanli+"/"+e.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax),this.drawNum.color=0===s.instance.yuanli?"#ff3e3e":"#168a17",this.autoBtn.selected=s.instance.autoUse},l.prototype.addHandler=function(){s.instance.addSpirit(e.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax))},l.prototype.autoHandler=function(){s.instance.changeAutoUse()},l.prototype.updateBag=function(t){s.instance.updateBag(t)},l.prototype.helpHandler=function(){CommonUtil.alertHelp(19041)},r=l,t.DivinatoryBossPanel=r}(modules=modules||{}),function(t){var a,r,e,l,i;function n(){return r.call(this)||this}a=t.divinatory_card||(t.divinatory_card={}),e=t.common.CustomList,l=t.divinatory_card.DivinatoryCardModel,r=ui.DivinatorySuitAlertUI,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),this._list=e.create("v",80,110,625,750,a.DivinatoryCardHtml),this.addChild(this._list)},n.prototype.destroy=function(){this._list=this.destroyElement(this._list),r.prototype.destroy.call(this)},n.prototype.setOpenParam=function(t){var e;r.prototype.setOpenParam.call(this,t),a.DivinatoryCardHtml.IS_SUIT=!0;for(var i=t,n=[],s=0;s<i.length;s++){var o=i[s];e=l.instance.getSuitAttr(o,!0),n.push(e)}this._list.datas=n,this._list.relayout()},n.prototype.close=function(){a.DivinatoryCardHtml.IS_SUIT=!1,r.prototype.close.call(this)},i=n,a.DivinatoryCardSuitAlert=i}(modules=modules||{}),function(s){var a,e,t,i,n,o,r,l,h,c,p,u,d,y;function g(){return null!==e&&e.apply(this,arguments)||this}a=s.spiritDungeon||(s.spiritDungeon={}),t=ui.SpiritDungeonRBViewUI,i=s.common.SimpleList,n=s.config.BlendCfg,o=s.bossHome.PlayerListItem,r=s.bossHome.BossListItem,l=s.config.SceneYuanShenBossCfg,h=s.scene.SceneModel,c=s.bossDungeon.BossDungeonModel,p=s.bag.BagModel,u=s.faction.FactionModel,d=s.notice.SystemNoticeManager,e=t,__extends(g,e),g.prototype.initialize=function(){e.prototype.initialize.call(this),this.right=0,this.bottom=280,this.layer=3,this.closeByOthers=!1,this.zOrder=-1,this._leftList=i.create(o,290,42),this._leftList.canSelectSameItem=!0,this._leftList.pos(-11,282,!0),this._leftList.size(290,156),this.addChild(this._leftList),this._rightList=i.create(r,260,42),this._rightList.canSelectSameItem=!0,this._rightList.pos(284,282,!0),this._rightList.size(260,156),this.addChild(this._rightList),this._spiritMax=n.instance.getCfgById(80007)[1][0],this._strs=["烁金界","玄苍界","幻海界","炽天界","昆墟界"],this.initHole()},g.prototype.initHole=function(){this.tipsId=67048,this.holeCheckExchangeHintType=35},g.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.addBtn,this,this.addHandler),this.onAutoClick(this.autoBtn,this,this.autoHandler),this.onAutoClick(this.teamBtn,this,this.teamHandler),this.onAutoClick(this.playersExpandBtn,this,this.expandPlayers),this.onAutoClick(this.bossesExpandBtn,this,this.expandBosses),this.onAutoClick(this.rankExpandBtn,this,this.expandRank),this.onAutoClick(this.tipsBtn,this,this.tipsHanlder),this.onAutoClick(this.chanllgeCBtn,this,this.setOneKeychangeHandler),this.onAutoEvt(this._rightList,"select",this,this.selectBoss),this.onAutoEvt(this._leftList,"select",this,this.selectPlayer),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.onAutoGlobalEvt("SCENE_REMOVE_MONSTERS",this,this.removeMosters),this.onAutoGlobalEvt("HOLO_HELPER_SET_UPDATE",this,this.holoHelperUpdate),this.addListener2(),this.teamRpImg.visible=!1,this.regAutoRP(this.teamRpImg,["teaminvastion"])},g.prototype.addListener2=function(){this.onAutoGlobalEvt("SPIRIT_DUNGEON_AUTO_USE_UPDATE",this,this.updateAutoUse),this.onAutoGlobalEvt("SPIRIT_DUNGEON_SPIRIT_UPDATE",this,this.updateSpirit)},g.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateSpirit(),this.setconfig(),this.updateAutoUse(),this.chanllgeCBtn.selected=s.halo.HaloModel.instance.getCheckTipsValue(this.holeCheckExchangeHintType)},g.prototype.tipsHanlder=function(){CommonUtil.alertHelp(this.tipsId)},g.prototype.holoHelperUpdate=function(){this.chanllgeCBtn.selected=s.halo.HaloModel.instance.getCheckTipsValue(this.holeCheckExchangeHintType)},g.prototype.setOneKeychangeHandler=function(){CommonUtil.setHalaOneKeychange(!this.chanllgeCBtn.selected,this.holeCheckExchangeHintType)},g.prototype.setconfig=function(){var t=h.instance.enterScene[3];this._rightList.datas=l.instance.getBossIdsByLayer(t);var e=l.instance.getCfgByLayer(t);0===e[6]?(this.playersBg.visible=this.playersTitle.visible=this.playersExpandBtn.visible=this._leftList.visible=!1,this.hurtRankBox.visible=!0,this.onAutoGlobalEvt("SPIRIT_HURT_RANK_UPDATE",this,this.updateHurtRank),this.updateHurtRank()):(this.playersBg.visible=this.playersTitle.visible=this.playersExpandBtn.visible=this._leftList.visible=!0,this.hurtRankBox.visible=!1,this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updatePlayers),this.onAutoGlobalEvt("SCENE_REMOVE_HUMANS",this,this.updatePlayers),this.updatePlayers()),this.nameTxt.text=this._strs[e[3]-1]+" "+e[2]},g.prototype.addHandler=function(){a.SpiritDungeonUtil.addSpirit(s.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax))},g.prototype.autoHandler=function(){a.SpiritDungeonUtil.changeAutoUse()},g.prototype.updateBag=function(t){0===t&&a.SpiritDungeonModel.instance.autoUse&&0===p.instance.getItemCountById(13650001)&&a.SpiritDungeonCtrl.instance.setAutoUserYuanli(!1)},g.prototype.teamHandler=function(){s.common_group.CommonGroupUtil.inTeamCopyOpen()},g.prototype.expandPlayers=function(){this.setPlayersExpand(!this._playersExpanded)},g.prototype.setPlayersExpand=function(t){var e=(this._playersExpanded=t)?0:66;this.playersTitle.y=262+e,this.playersExpandBtn.y=263+e,this.playersBg.y=249+e,this.playersBg.height=203-e,this._leftList.y=282+e,this._leftList.height=156-e,this._leftList.datas=this._leftList.datas,this.playersExpandBtn.skin=t?"common/btn_tonyong_28.png":"common/btn_tonyong_29.png"},g.prototype.expandBosses=function(){this.setBossesExpand(!this._bossesExpanded)},g.prototype.setBossesExpand=function(t){var e=(this._bossesExpanded=t)?0:66;this.bossesTitle.y=262+e,this.bossesExpandBtn.y=263+e,this.bossesBg.y=249+e,this.bossesBg.height=203-e,this._rightList.y=282+e,this._rightList.height=156-e,this._rightList.datas=this._rightList.datas,this.bossesExpandBtn.skin=t?"common/btn_tonyong_28.png":"common/btn_tonyong_29.png"},g.prototype.expandRank=function(){this.setRankExpand(!this._rankExpanded)},g.prototype.setRankExpand=function(t){this._rankExpanded=t,this.line1.visible=this.line2.visible=this.name2.visible=this.damage2.visible=this.name3.visible=this.damage3.visible=t;var e=t?0:66;this.rankTitle.y=17+e,this.rankExpandBtn.y=19+e,this.rankBg.y=e,this.rankBg.height=203-e,this.name1.y=this.damage1.y=57+e,this.rankExpandBtn.skin=t?"common/btn_tonyong_28.png":"common/btn_tonyong_29.png"},g.prototype.updateAutoUse=function(){this.autoBtn.selected=a.SpiritDungeonModel.instance.autoUse},g.prototype.updateSpirit=function(){this.spiritNumTxt.text=a.SpiritDungeonModel.instance.spirit+"/"+s.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax),this.spiritNumTxt.color=0===a.SpiritDungeonModel.instance.spirit?"#ff3e3e":"#50ff28"},g.prototype.removeMosters=function(){var t=a.SpiritDungeonModel.instance.hurtRank;if(t){for(var e=t[0],i=h.instance.monsters,n=!1,s=0,o=i.length;s<o;s++)if(i[s][1]===e){n=!0;break}n||a.SpiritDungeonModel.instance.updateHurtRank(null)}},g.prototype.updateHurtRank=function(){var t=a.SpiritDungeonModel.instance.hurtRank;if(!t||t[0]===c.instance.selectLastBoss){var e=t?t[1]:null;if(this.myDamage.text="0",this.setRank(e,0,this.name1,this.damage1),this.setRank(e,1,this.name2,this.damage2),this.setRank(e,2,this.name3,this.damage3),e)for(var i=0,n=e.length;i<n;i++)if(e[i][0][0]===PlayerModel.instance.actorId){this.myDamage.text=CommonUtil.bigNumToString(e[i][1]);break}}},g.prototype.setRank=function(t,e,i,n){t&&t.length>e?(i.text=t[e][0][2]+"、"+t[e][0][1],n.text=CommonUtil.bigNumToString(t[e][1])):(i.text="",n.text="")},g.prototype.updatePlayers=function(){for(var t,e=h.instance.humans,i=[],n=0,s=e.length;n<s;n++)(t=e[n][5])[0]!==PlayerModel.instance.actorId&&i.push([t[0],t[5],0]);this._leftList.selectedIndex=-1,this._leftList.datas=i},g.prototype.selectBoss=function(){var t=this._rightList.selectedData;c.instance.selectLastBoss=t,c.instance.selectTargetPos=DungeonModel.instance.getBossInfoById(t)[3],PlayerModel.instance.selectTarget(1,t)},g.prototype.selectPlayer=function(){var t=this._leftList.selectedData;if(t){if(s.common_group.CommonGroupUtil.thePlayerIsMyTeam(t[0]))return void d.instance.addNotice("不能攻击同一队伍的玩家",!0);for(var e=u.instance.memberList||[],i=0,n=e.length;i<n;i++)if(e[i][1]===t[0])return void d.instance.addNotice("不能攻击同一仙盟的玩家",!0);PlayerModel.instance.selectTarget(2,t[0])}},g.prototype.destroy=function(t){void 0===t&&(t=!0),(this._strs.length=0)&&(this._strs=null),this._leftList=this.destroyElement(this._leftList),this._rightList=this.destroyElement(this._rightList),e.prototype.destroy.call(this,t)},y=g,a.SpiritDungeonRBPanel=y}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}i=t.divinatory_card||(t.divinatory_card={}),n=t.divinatory_card.DivinatoryCardModel,s=t.scene.SceneModel,o=t.config.SceneDivinatoryBossCfg,e=t.spiritDungeon.SpiritDungeonRBPanel,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._spiritMax=i.DivinatoryUtil.dailMax,this.xyTxt.text="今日剩余八卦值",this.autoTxt.text="自动使用八卦丹"},r.prototype.initHole=function(){this.tipsId=67049,this.holeCheckExchangeHintType=47},r.prototype.addListener2=function(){this.onAutoGlobalEvt("SPIRIT_HURT_RANK_UPDATE",this,this.updateHurtRank),this.onAutoGlobalEvt("DIVINATORY_BOSS_DILL",this,this.updateSpirit)},r.prototype.setconfig=function(){var t=s.instance.enterScene[3];this._rightList.datas=o.instance.getOccId(t);var e=o.instance.bosslist[t][0];0===e[6]?(this.playersBg.visible=this.playersTitle.visible=this.playersExpandBtn.visible=this._leftList.visible=!1,this.hurtRankBox.visible=!0,this.updateHurtRank()):(this.playersBg.visible=this.playersTitle.visible=this.playersExpandBtn.visible=this._leftList.visible=!0,this.hurtRankBox.visible=!1,this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updatePlayers),this.onAutoGlobalEvt("SCENE_REMOVE_HUMANS",this,this.updatePlayers),this.updatePlayers()),this.nameTxt.text=i.DivinatoryUtil.typeNames[e[3]-1]+" "+e[2]},r.prototype.updateAutoUse=function(){this.autoBtn.selected=n.instance.autoUse},r.prototype.updateSpirit=function(){this.spiritNumTxt.text=n.instance.yuanli+"/"+t.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax),this.spiritNumTxt.color=0===n.instance.yuanli?"#ff3e3e":"#50ff28",this.updateAutoUse()},r.prototype.updateBag=function(t){n.instance.updateBag(t)},r.prototype.addHandler=function(){n.instance.addSpirit(t.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax))},r.prototype.autoHandler=function(){n.instance.changeAutoUse()},a=r,i.DivinatoryBossRBPanel=a}(modules=modules||{}),function(t){var a,e,i,n,r,s,o,l;function h(){var t=e.call(this)||this;t._itemArr=new Array,t._activityTime=0,t._zhekou=0,t.preIsValue=!1,t.probarWidth=[[75,130],[195,255],[320,375],[440,500],[550,560]],!a.discountGiftModel.instance.type||0<r.instance.getGifts(a.discountGiftModel.instance.type,a.discountGiftModel.instance.ID).length&&(t.preIsValue=!0);return t}a=t.discountGift||(t.discountGift={}),i=t.config.PrivilegeCfg,n=t.vip.VipModel,r=t.config.DiscountGiftCfg,s=t.bag.BagUtil,o=t.notice.SystemNoticeManager,e=ui.DiscountGiftViewUI,__extends(h,e),h.prototype.initialize=function(){e.prototype.initialize.call(this),this._allItem=[this.discountItem1,this.discountItem2,this.discountItem3,this.discountItem4,this.discountItem5,this.discountItem6],this._allZhekouText=new Array,this._allZhekouText=[this.z0,this.z1,this.z2,this.z3,this.z4],this._allZhekouImage=new Array,this._allZhekouImage=[this.zhekouImg0,this.zhekouImg1,this.zhekouImg2,this.zhekouImg3,this.zhekouImg4],this.centerX=0,this.centerY=0,CommonUtil.setHTMLPro(this.buyVipHtml,"#ffec7c","SimHei",24,"left","middle"),CommonUtil.setHTMLPro(this.curbuyHtml,"#ffffff","SimHei",24,"center","middle"),this.buyVipHtml.mouseEnabled=!1,this.curbuyHtml.mouseEnabled=!1,this.initDaoju()},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.BuyItem),this.onAutoGlobalEvt("DISCOUNT_GIFT_UPDATE",this,this.discountGift_Update),this.onAutoGlobalEvt("DISCOUNT_GIFT_UPDATE",this,this.discountGift_Timer),this.onAutoGlobalEvt("DISCOUNT_GIFT_TIMER",this,this.discountGift_Timer),this.onAutoGlobalEvt("SPRINT_RANK_TYPE_CHANGE",this,this.changeType)},h.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.SetPanel(),this.discountGift_Update(),this.discountGift_Timer()},h.prototype.BuyItem=function(){var t=PlayerModel.instance.ingot;a.discountGiftModel.instance.maxCount>a.discountGiftModel.instance.curCount?t>=this.needYuanbaoNum?s.canAddItemsByBagIdCount(this._itemArr)&&a.DiscountGiftCtrl.instance.DiscountGiftBuy():CommonUtil.goldNotEnoughAlert():this.curCount==this.typeMaxCount?(this.sureBtn.visible=!1,o.instance.addNotice("当前购买次数已达上限。",!0)):o.instance.addNotice("当前购买数量已达上限，提升SVIP等级可增加购买数量",!0)},h.prototype.SetPanel=function(){a.DiscountGiftCtrl.instance.GetDiscountGiftInfo()},h.prototype.undisPanels=function(){Laya.timer.clear(this,this.activityHandler)},h.prototype.disPanels=function(){this.buyVipTextImg.visible=!0,this.buyTextImg.visible=!0;for(var t=0,e=this._allItem.length;t<e;t++)this._allItem[t].visible=!1;for(t=0,e=this._allZhekouImage.length;t<e;t++)this._allZhekouImage[t].visible=!0;this.redlineImg.visible=!0,this.activityText.visible=!0,this.activityTextPre.visible=!0,this.progressImage.visible=!0,this.progressImageBg.visible=!0,this.activityTextOver.visible=!1},h.prototype.discountGift_Update=function(){if(1===a.discountGiftModel.instance.discountGiftState||(this.undisPanels(),0==a.discountGiftModel.instance.discountGiftState&&(o.instance.addNotice("当前活动未开启",!0),this.close()),2!=a.discountGiftModel.instance.discountGiftState)){this.disPanels(),this.RewardText.text=r.instance.getName(a.discountGiftModel.instance.type);var t=a.discountGiftModel.instance.curCount,e=a.discountGiftModel.instance.maxCount;this.buyText.color="#0ecf09",this.buyText.text=t+"/"+e+"件",this.buyText.bold=!1,this.getbottom(),this.setDate(),this.initDaoju(),this.getZhekou(),this.getZhekouOnsale(),this.updateCurZhekouImg(),this.buyImgisDisplay(),this.curCount==this.typeMaxCount&&(this.sureBtn.visible=!1),1==a.discountGiftModel.instance.isDayOver&&(this.activityText.visible=!1,this.activityTextPre.visible=!1,this.activityTextOver.visible=!0)}else o.instance.addNotice("当前活动已结束",!0)},h.prototype.discountGift_Timer=function(){this._activityTime=a.discountGiftModel.instance.restTm,this._activityTime||this._activityTime>GlobalData.serverTime?(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.activePanel(!1)},h.prototype.activityHandler=function(){this.activityText.text=""+t.common.CommonUtil.timeStampToHHMMSS(this._activityTime),this.curCount!==this.typeMaxCount&&this.activePanel(!0),this._activityTime<GlobalData.serverTime&&(this.activePanel(!1),Laya.timer.clear(this,this.activityHandler))},h.prototype.activePanel=function(t){this.activityTextOver.visible=!t,this.activityTextPre.visible=t,this.activityText.visible=t,this.sureBtn.visible=t,this.isOverImg.visible=!t},h.prototype.buyImgisDisplay=function(){var t=a.discountGiftModel.instance.isDayOver;this.sureBtn.visible=1!=t,this.isOverImg.visible=1==t},h.prototype.setDate=function(){this._vipLevel=n.instance.vipLevel,this._type=72,this._nextVipLevel=i.instance.getNextLevel(this._vipLevel,this._type);var t=i.instance.getVipInfoByLevel(this._nextVipLevel,this._type);this.buyVipHtml.innerHTML="SVIP"+this._nextVipLevel+'可购买<span style="color:#0ecf09">'+(t?t[1]:0)+"件</span>",this.buyVipHtml.visible=!0,this.buyVipTextImg.visible=!0,this._vipLevel<this._maxLv?this.buyVipHtml.visible=!0:null==this._nextVipLevel&&(this.buyVipHtml.visible=!1,this.buyVipTextImg.visible=!1)},h.prototype.getZhekou=function(){var t=r.instance.getZhekouQujian(a.discountGiftModel.instance.type),e=new Array;if(e.push(""),void 0!==t)for(var i=0;i<t.length;i++)e.push(t[i].toString());for(i=0;i<this._allZhekouText.length;i++)this._allZhekouText[i].text=e[i]+"件开启";this._allZhekouText[0].text=""},h.prototype.getZhekouOnsale=function(){var t=r.instance.getZhekou(a.discountGiftModel.instance.type);if(void 0!==t&&0<t.length){for(var e=0;e<t.length;e++)this._allZhekouImage[e].skin="assets/icon/ui/mall/"+t[e]+".png",this._allZhekouImage[e].getChildAt(0).skin="assets/icon/ui/discount_gift/selected_thlb_xzk.png";this.updateCurZhekouImg()}this.progressImage.skin="assets/icon/ui/discount_gift/9g_tongyong_7.png"},h.prototype.updateCurZhekouImg=function(){for(var t,e=0;e<this._allZhekouImage.length;e++){this._allZhekouImage[e].scaleX=1.2,this._allZhekouImage[e].scaleY=1.2;var i=this._allZhekouImage[e].getChildAt(0);i.visible=!1,this._allZhekouImage[e].skin.charAt(20)==""+this._zhekou&&(this._allZhekouImage[e].scaleX=1.5,this._allZhekouImage[e].scaleY=1.5,i.visible=!0,t=parseInt(this._allZhekouImage[e].name.charAt(this._allZhekouImage[e].name.length-1)),this.displayZhekouText(t),e==this._allZhekouImage.length-1&&(this.curbuyHtml.innerHTML='当前<span style="color:#0ecf09">'+this._zhekou+"折</span>，已是最大折扣",this.maxCount==this.typeMaxCount&&(this.curbuyHtml.innerHTML='当前<span style="color:#0ecf09">'+this._zhekou+"折</span>，已是最大折扣"),this.curCount==this.typeMaxCount&&(this.curbuyHtml.innerHTML='<span style="color:#0ecf09">已达到最大购买数量</span>'),0==this._zhekou&&(this.curbuyHtml.innerHTML="")))}var n=r.instance.getIndexBuyNum(a.discountGiftModel.instance.type,a.discountGiftModel.instance.ID);this.updateProgressBar(n)},h.prototype.displayZhekouText=function(t){for(var e=0;e<this._allZhekouText.length;e++)this._allZhekouText[e].text=e==t?"当前":""},h.prototype.updateProgressBar=function(t){var e=this.probarWidth[t][0],i=this.probarWidth[t][1],n=this.maxCount,s=this.minCount,o=this.curCount;this.progressImage.width=0,s<=o&&o<=n&&(this.progressImage.width=(o-s)/(n-s)*(i-e)+e)},h.prototype.getbottom=function(){this.maxCount=r.instance.getThisMaxBuyNum(a.discountGiftModel.instance.type,a.discountGiftModel.instance.ID),this.minCount=r.instance.getThisMinBuyNum(a.discountGiftModel.instance.type,a.discountGiftModel.instance.ID),this.curCount=a.discountGiftModel.instance.curCount;var t=this.maxCount-this.curCount;this.typeMaxCount=r.instance.getTypeMaxBuyNum(a.discountGiftModel.instance.type);var e=r.instance.getOriAndRealPrice(a.discountGiftModel.instance.type,a.discountGiftModel.instance.ID);if(this.curCount==this.maxCount){var i=r.instance.getNextOriAndRealPrice(a.discountGiftModel.instance.type,a.discountGiftModel.instance.ID);i&&i.length&&(this.originalPriceText.text=i[0].toString(),this.realPriceText.text=i[1].toString(),this.needYuanbaoNum=i[1],this._zhekou=i[2])}if((this.curCount<this.maxCount||this.curCount==this.typeMaxCount)&&3==e.length&&(this.originalPriceText.text=e[0].toString(),this.realPriceText.text=e[1].toString(),this.needYuanbaoNum=e[1],this._zhekou=e[2]),this.curbuyHtml.innerHTML='当前<span style="color:#0ecf09">'+this._zhekou+"折</span>",0<t&&(this.curbuyHtml.innerHTML='当前<span style="color:#0ecf09">'+this._zhekou+'折</span>哦~再购买<span style="color:#0ecf09">'+t+"件</span>开启下一折扣"),0==t){var n=r.instance.getNextMaxCanBuy(a.discountGiftModel.instance.type,a.discountGiftModel.instance.ID);if(-1==n)return void(this.curbuyHtml.innerHTML='当前<span style="color:#0ecf09">'+this._zhekou+"折</span>");var s=n-this.curCount;this.curbuyHtml.innerHTML='当前<span style="color:#0ecf09">'+this._zhekou+'折</span>哦~再购买<span style="color:#0ecf09">'+s+"件</span>开启下一折扣"}this.maxCount==this.typeMaxCount&&(this.curbuyHtml.innerHTML='当前<span style="color:#0ecf09">'+this._zhekou+"折</span>，已是最大折扣"),this.curCount==this.typeMaxCount&&(this.curbuyHtml.innerHTML='<span style="color:#0ecf09">已达到最大购买数量</span>'),0==this._zhekou&&(this.curbuyHtml.innerHTML="")},h.prototype.initDaoju=function(){var t=r.instance.getGifts(a.discountGiftModel.instance.type,a.discountGiftModel.instance.ID);if(t){for(var e=[],i=0,n=t.length;i<n;i++){var s=t[i];e.push([s[0],s[1],0,null])}for(this._itemArr=e,i=0,n=6;i<n;i++)this._allItem[i].visible=!1;for(i=0,n=t.length;i<n;i++){var o=this._allItem[i];o&&(o.dataSource=[t[i][0],t[i][1],0,null],o.visible=!0,this._allItem[i].visible=!0)}switch(t.length){case 1:this._allItem[0].pos(300,450);break;case 2:this._allItem[0].pos(250,450),this._allItem[1].pos(360,450);break;case 3:this._allItem[0].pos(200,450),this._allItem[1].pos(300,450),this._allItem[2].pos(400,450);break;case 4:this._allItem[0].pos(150,450),this._allItem[1].pos(250,450),this._allItem[2].pos(350,450),this._allItem[3].pos(450,450);break;case 5:this._allItem[0].pos(100,450),this._allItem[1].pos(200,450),this._allItem[2].pos(300,450),this._allItem[3].pos(400,450),this._allItem[4].pos(500,450);break;case 6:this._allItem[0].pos(50,450),this._allItem[1].pos(150,450),this._allItem[2].pos(250,450),this._allItem[3].pos(350,450),this._allItem[4].pos(450,450),this._allItem[5].pos(550,450)}}},h.prototype.changeType=function(){this.close(),WindowManager.instance.open(this.panelId)},l=h,a.discountGiftPanel=l}(modules=modules||{}),function(i){var t,n,e,s,o;function a(){return n.call(this)||this}t=i.mission||(i.mission={}),e=i.bag.BaseItem,s=Laya.Image,n=e,__extends(a,n),a.prototype.setDataSource=function(t){n.prototype.setDataSource.call(this,t);var e=this._itemData[0];906==Math.floor(e/1e5)&&9<=e%100?(this._eff||(this._eff=i.common.CommonUtil.creatEff(this,"light",7),this._eff.pos(4,4,!0)),this._img||(this._img=new s("common/txt_dhgt_ms.png"),this.addChild(this._img)),this._eff.play(),this._eff.visible=this._img.visible=!0):(this._img&&(this._img.visible=!1),this._eff&&(this._eff.visible=!1,this._eff.stop()))},a.prototype.close=function(){this._eff&&this._eff.stop(),n.prototype.close.call(this)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._img&&(this._img.destroy(!0),this._img=null),this._eff&&(this._eff.destroy(!0),this._eff=null),n.prototype.destroy.call(this)},o=a,t.CopyAwardItem=o}(modules=modules||{}),function(s){var t,o,e;function i(){this._rankTypeTable1={},this._rankTypeTable2={},this.rankShowTable={},this.rankDataTable={},this._rankTypeTable3={},this.rankShowTable1={},this.zanNum={},this.zanMaxNum={},this.rankMaxNum={},this.rankMaxNum1={};var t=s.config.BlendCfg.instance.getCfgById(99301)[1],e=s.config.BlendCfg.instance.getCfgById(99304)[1],i=s.config.BlendCfg.instance.getCfgById(99306)[1];this.zanMaxNum[1]=t[0],this.zanMaxNum[2]=t[1],this.rankMaxNum[1]=e[0],this.rankMaxNum[2]=e[1],this.rankMaxNum1[1]=i[0],this.rankMaxNum1[2]=i[1]}t=s.rankingList||(s.rankingList={}),o=s.config.BlendCfg,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedRankType",{get:function(){return this._selectedRankType},set:function(t){this._selectedRankType=t},enumerable:!0,configurable:!0}),i.prototype.getRankReply=function(t){this._rankTypeTable||(this._rankTypeTable={});var e=t[0];if(e){for(var i=0,n=e.length;i<n;i++)this._rankTypeTable[e[i][0]]=e[i][1];GlobalData.dispatcher.event("RANK_UPDATE")}},i.prototype.getRanksByType=function(t){return this._rankTypeTable[t]},i.prototype.getRanksByTypeAndMingCi=function(t,e){for(var i=this._rankTypeTable[t],n=0;n<i.length;n++){var s=i[n];if(s&&s[4]==e)return s}return null},i.prototype.getContison=function(t){for(var e=o.instance.getCfgById(403)[1],i=0;i<e.length;i++){var n=e[i];if(Math.pow(2,i)==t)return n}return 0},i.prototype.getActorRankShowRely=function(t){this.rankShowRely=t,GlobalData.dispatcher.event("GET_ACTOR_RANK_SHOW_REPLY")},i.prototype.getActorCrossRankShowReply=function(t){var e=(this.rankShowRely1=t)[0];this.rankShowTable[e[0]]=e,GlobalData.dispatcher.event("GET_ACTOR_RANK_SHOW_KUAFU_REPLY")},i.prototype.GetActorCrossGRankShowReply=function(t){for(var e=t[0],i=0;i<e.length;i++){var n=e[i];this.rankShowTable[n[0]]=n}GlobalData.dispatcher.event("GET_ACTOR_RANK_SHOW_KUAFU_REPLY")},i.prototype.getActorRankDataReply=function(t){this.RankData=t,GlobalData.dispatcher.event("GET_ACTOR_RANK_DATA_REPLY")},i.prototype.actorrank=function(t,e){for(var i=0;i<t.length;i++)if(t[i][0]===e)return[t[i][4],t[i][5]];return[0,0]},i.prototype.GetCrossRankReply=function(t){this._rankTypeTable1||(this._rankTypeTable1={});var e=t[0];if(e){for(var i=0,n=e.length;i<n;i++)this._rankTypeTable1[e[i][0]]=e[i][1];GlobalData.dispatcher.event("RANK_UPDATE1")}},i.prototype.GetCrossGRankReply=function(t){this._rankTypeTable2||(this._rankTypeTable2={});var e=t[0];e&&(this._rankTypeTable2[e[0]]=e[1],GlobalData.dispatcher.event("RANK_UPDATE2"))},i.prototype.getRanksByType1=function(t,e){var i=[];return 1===t?i=this._rankTypeTable1[e]:2===t&&(i=this._rankTypeTable2[e]),i||[]},i.prototype.getRanksByTypeAndMingCi1=function(t,e,i){var n=[];if(1===t?n=this._rankTypeTable1[e]:2===t&&(n=this._rankTypeTable2[e]),n)for(var s=0;s<n.length;s++){var o=n[s];if(o&&o[4]==i)return o}return null},i.prototype.GetCrossFactionRankReply=function(t){var e=t[0],i=t[1];this._rankTypeTable3[1]=e,this.rankShowTable1={};for(var n=0;n<i.length;n++){var s=i[n];this.rankShowTable1[n]=s}GlobalData.dispatcher.event("RANK_UPDATE1")},i.prototype.GetCrossGFactionRankReply=function(t){var e=t[0],i=t[1];this._rankTypeTable3[2]=e,this.rankShowTable1={};for(var n=0;n<i.length;n++){var s=i[n];this.rankShowTable1[n]=s}GlobalData.dispatcher.event("RANK_UPDATE2")},i.prototype.getRanksByTypeAndMingCi2=function(t,e){var i=this._rankTypeTable3[t];if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s&&n==e-1)return s}return null},i.prototype.GetPraiseInfoReply=function(t){var e=t[0],i=t[1];this.zanNum[1]=e,this.zanNum[2]=i,this.setRp(),s.player.PlayerModel.instance.renQiNum=t[2],GlobalData.dispatcher.event("GET_PRAISE_INFO_REPLY")},i.prototype.setRp=function(){var t=s.funcOpen.FuncOpenModel.instance.getFuncIsOpen(982),e=s.funcOpen.FuncOpenModel.instance.getFuncIsOpen(983),i=this.zanNum[1]<this.zanMaxNum[1],n=this.zanNum[2]<this.zanMaxNum[2];s.redPoint.RedPointCtrl.instance.setRPProperty("rankingListRP1",t&&i),s.redPoint.RedPointCtrl.instance.setRPProperty("rankingListRP2",e&&n)},i.prototype.getStr=function(t){var e,i,n,s;if(null===t&&(t=0),1e8<=t)e=(o=(Math.floor(t/1e6)/100).toString().split("."))[0],i=o[1]?"common/txt_commmon_dian.png":"",n=o[1]?o[1]:"",s="common/txt_commmon_yi.png";else if(1e5<=t){var o;e=(o=(Math.floor(t/100)/100).toString().split("."))[0],i=o[1]?"common/txt_commmon_dian.png":"",n=o[1]?o[1]:"",s="common/txt_commmon_wan.png"}else e=t.toString(),s=n=i="";return[e,i,n,s]},e=i,t.PlayerRankingModel=e}(modules=modules||{}),function(u){var t,n,s,e,d,o,a,r,l,i,h,c;function p(){return null!==n&&n.apply(this,arguments)||this}t=u.bigTower||(u.bigTower={}),s=u.mission.CopyAwardItem,e=ui.BigTowerUI,d=u.bigTower.BigTowerModel,o=u.common.CommonUtil,a=u.dungeon.DungeonCtrl,r=u.common.BtnGroup,l=u.bag.BagUtil,i=u.rankingList.PlayerRankingCtrl,h=u.rankingList.PlayerRankingModel,n=e,__extends(p,n),p.prototype.destroy=function(t){void 0===t&&(t=!0),this._awardItems=this.destroyElement(this._awardItems),this._awardNeedLvTxts=this.destroyElement(this._awardNeedLvTxts),this._awardNeedLvImgs=this.destroyElement(this._awardNeedLvImgs),this._awardNameImgs=this.destroyElement(this._awardNameImgs),this._effs=this.destroyElement(this._effs),this._awardBgImgs=this.destroyElement(this._awardBgImgs),this._propItem=this.destroyElement(this._propItem),this._btnGroup=this.destroyElement(this._btnGroup),this._btnClip=this.destroyElement(this._btnClip),n.prototype.destroy.call(this,t)},p.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnClip=o.creatEff(this.challengeBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._propItem=[this.item1,this.item2,this.item3],this._awardNeedLvTxts=[this.needLvTxt_1,this.needLvTxt_0],this._awardNeedLvImgs=[this.needLvImg_1,this.needLvImg_0],this._awardNameImgs=[this.awardNameImg_1,this.awardNameImg_0],this._awardBgImgs=[this.propBg2,this.propBg1],this._awardItems=[],this._effs=[],this.finishLevel.visible=!1,this.challengeBtn.visible=!0;for(var t=0;t<2;t++){var e=o.creatEff(this,"availability",8,1);e.pos(482,145+203*t,!0),this._effs.unshift(e);var i=new s;this.addChild(i),i.pos(561,222+203*t,!0),i.needTip=i.nameVisible=!1,this._awardItems.unshift(i)}for(t=0;t<3;t++)this._propItem[t].nameVisible=!0;this._btnGroup=new r,this._btnGroup.setBtns(this.oldTowerBtn,this.playTrialBtn,this.runeCopyBtn),this.regGuideSpr(45,this.oldTowerBtn),this.regGuideSpr(46,this.challengeBtn),this.regGuideSpr(47,this.playTrialBtn),this.regGuideSpr(52,this.runeCopyBtn)},p.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._effs[0].play(),this._effs[1].play(),this._btnClip.play(),this.updatePanel(),this._btnGroup.selectedIndex=0,i.instance.getRank(2048)},p.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("GET_COPY_DAHUANG",this,this.updatePanel),this.onAutoGlobalEvt("UPDATE_COPY_DAHUANG",this,this.updatePanel),this.onAutoClick(this._propItem[0],this,this.openPropShow,[0]),this.onAutoClick(this._propItem[1],this,this.openPropShow,[1]),this.onAutoClick(this._propItem[2],this,this.openPropShow,[2]),this.onAutoClick(this.challengeBtn,this,this.challenge),this.onAutoEvt(this._btnGroup,"change",this,this.changeBtnHandler),this.regAutoRP(this.bigTowerRP,["bigTowerRP"]),this.regAutoRP(this.dailyDungeonRP,["dailyDungeonRP"]),this.regAutoRP(this.runeCopyRP,["runeCopyRP"]),this.onAutoGlobalEvt("RANK_UPDATE",this,this.updateRank),this.onAutoClick(this.rankBtn,this,this.rankHandler),this.onAutoClick(this._awardItems[0],this,this.openGoldShow2),this.onAutoClick(this._awardItems[1],this,this.openGoldShow1)},p.prototype.updateRank=function(){var t=h.instance.getRanksByType(2048);t&&0!==t.length&&(this.recordLv.text=t[0][5]+"",this.recordName.text=t[0][2])},p.prototype.rankHandler=function(){WindowManager.instance.open(143,2048)},p.prototype.changeBtnHandler=function(){1===this._btnGroup.selectedIndex?WindowManager.instance.open(57):2===this._btnGroup.selectedIndex&&WindowManager.instance.open(139)},p.prototype.updatePanel=function(){if(d.instance.copyData){var t;this.lev=d.instance.finishLevel,this.lev<u.config.SceneCopyDahuangCfg.instance.cfgs.length?(t=u.config.SceneCopyDahuangCfg.instance.getCfgByLv(this.lev+1),this.Lvel.text="第"+(this.lev+1)+"层"):(t=u.config.SceneCopyDahuangCfg.instance.getCfgByLv(this.lev),this.Lvel.text="第"+this.lev+"层");var e=t[5];if(this.recomFightingtxt.text="推荐战力:"+o.bigNumToString(e),this.updatAward(0),this.updatAward(1),this.updateProp(),this.lev>=u.config.SceneCopyDahuangCfg.instance.cfgs.length){this.finishLevel.visible=!0;for(var i=0,n=this._propItem.length;i<n;i++)this._propItem[i].visible=!1}else for(this.finishLevel.visible=!1,i=0,n=this._propItem.length;i<n;i++)this._propItem[i].visible=!0}},p.prototype.setShow=function(t,e){this._awardBgImgs[t].visible=this._awardItems[t].visible=this._effs[t].visible=this._awardNameImgs[t].visible=this._awardNeedLvImgs[t].visible=this._awardNeedLvTxts[t].visible=e},p.prototype.updatAward=function(t){var e=d.instance.copyData[0===t?1:2],i=0===t?3:4;if(this.setShow(t,!1),0<e.length){var n=e[0],s=[c=(h=(l=u.config.SceneCopyDahuangCfg.instance.getCfgByLv(n))[i])[0],p=h[1],0,null];this._awardItems[t].dataSource=s,this._awardNeedLvTxts[t].text="点击领取",this._awardNeedLvTxts[t].color="#168a17",this._awardNameImgs[t].skin="assets/icon/ui/tianguan/"+l[6]+".png",this.setShow(t,!0)}else{this.lev=d.instance.finishLevel;for(var o=u.config.SceneCopyDahuangCfg.instance.cfgs,a=this.lev,r=o.length;a<r;a++){var l,h;if(0<(h=(l=o[a])[i]).length){var c=h[0],p=h[1];this._awardItems[t].dataSource=[c,p,0,null],this._awardNameImgs[t].skin="assets/icon/ui/tianguan/"+l[6]+".png",n=l[1],this._awardNeedLvTxts[t].text=n+(0==t?"层奖励":"层大奖"),this._awardNeedLvTxts[t].color="#9f6725",this.setShow(t,!0),this._effs[t].visible=!1;break}}}},p.prototype.updateProp=function(){var t;this.lev=d.instance.finishLevel,t=this.lev<u.config.SceneCopyDahuangCfg.instance.cfgs.length?u.config.SceneCopyDahuangCfg.instance.getCfgByLv(this.lev+1):u.config.SceneCopyDahuangCfg.instance.getCfgByLv(this.lev);for(var e=u.config.SceneCopyDahuangCfg.instance.getTipAward(t[2]),i=0;i<.5*e.length;i++)this._propItem[i].dataSource=[e[2*i],e[2*i+1],0,null]},p.prototype.openPropShow=function(t){l.openBagItemTip(this._propItem[t].itemData)},p.prototype.openGoldShow1=function(){var t=d.instance.copyData;if(0<t[2].length){var e=t[2][0],i=u.config.SceneCopyDahuangCfg.instance.getCfgByLv(e)[0];a.instance.getCopyAward(i,e,1)}else l.openBagItemTip(this._awardItems[1].itemData)},p.prototype.openGoldShow2=function(){var t=d.instance.copyData;if(0<t[1].length){this._awardItems[0].needTip=!1;var e=t[1][0],i=u.config.SceneCopyDahuangCfg.instance.getCfgByLv(e)[0];a.instance.getCopyAward(i,e,0)}else l.openBagItemTip(this._awardItems[0].itemData)},p.prototype.challenge=function(){var t=d.instance.copyData[0],e=u.config.SceneCopyDahuangCfg.instance.cfgs.length,i=e<=t+1?e-1:t+1,n=u.config.SceneCopyDahuangCfg.instance.getCfgByLv(i)[0];a.instance.reqEnterScene(n,i)},c=p,t.BigTowerPlanel=c}(modules=modules||{}),function(n){var t,s,o,e;function i(){this._finishLv=0,this._alreadList=[],this._dialResult=0}t=n.rune_copy||(n.rune_copy={}),s=n.redPoint.RedPointCtrl,o=n.config.BlendCfg,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.saveDate=function(t){this._finishLv=t[0][0],this._awardLv=t[0][1],this._bigAwardLv=t[0][2],this._isGetDailyAward=t[1],GlobalData.dispatcher.event("RUNE_COPY_UPDATE"),this.checkRP()},i.prototype.updateRuneDial=function(t){this._alreadList=t[0],this._dialCount=t[1],this._round=t[2],GlobalData.dispatcher.event("RUNE_COPY_UPDATE"),this.checkRP()},i.prototype.checkRP=function(){var t=PlayerModel.instance.fight,e=n.config.SceneCopyRuneCfg.instance.getCfgByLv(this.currLv);if(e){var i=e[5];if(o.instance.getCfgById(33003)[1][0]<=t/i)return void s.instance.setRPProperty("runeCopyRP",!0)}this._isGetDailyAward&&0<this._finishLv?s.instance.setRPProperty("runeCopyRP",!0):0<this._dialCount?s.instance.setRPProperty("runeCopyRP",!0):this._bigAwardLv&&0<this._bigAwardLv.length?s.instance.setRPProperty("runeCopyRP",!0):s.instance.setRPProperty("runeCopyRP",!1)},Object.defineProperty(i.prototype,"dialResult",{get:function(){return this._dialResult},set:function(t){this._dialResult=t,GlobalData.dispatcher.event("DIAL_RESULT_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"round",{get:function(){return this._round},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dialCount",{get:function(){return this._dialCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alreadList",{get:function(){return this._alreadList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"finishLv",{get:function(){return this._finishLv},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currLv",{get:function(){return this._finishLv+1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"awardLv",{get:function(){return this._awardLv},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bigAwardLv",{get:function(){return this._bigAwardLv},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isGetDailyAward",{get:function(){return this._isGetDailyAward},enumerable:!0,configurable:!0}),i.prototype.isMaxLv=function(){return i.instance.finishLv>=n.config.SceneCopyRuneCfg.instance.maxLv},e=i,t.RuneCopyModel=e}(modules=modules||{}),function(a){var r,l,h,t;function e(){return l.call(this)||this}r=a.bigTower||(a.bigTower={}),h=a.rune_copy.RuneCopyModel,l=ui.BigTowerLevelViewUI,__extends(e,l),e.prototype.initialize=function(){l.prototype.initialize.call(this),this.centerX=0,this.top=390,this._type=0},e.prototype.onOpened=function(){var t=this;l.prototype.onOpened.call(this);var e=0;if(0==this._type){var i=a.config.SceneCopyDahuangCfg.instance.cfgs.length;e=r.BigTowerModel.instance.finishLevel+1<i?r.BigTowerModel.instance.finishLevel+1:i}else if(1==this._type){var n=a.config.SceneCopyRuneCfg.instance.maxLv;e=h.instance.currLv>=n?n:h.instance.currLv}else 2==this._type?e=a.faerie_demon.FaerieDemonModel.instance.stage:3==this._type?e=a.nothingness_world.NothingnessWorldModel.instance.currLv:4==this._type&&(e=a.nether_world.NetherWorldModel.instance.currLv);switch(this._type){case 0:this.levelImg2.skin="big_tower/msz_guta_2.png";break;case 1:this.levelImg2.skin="big_tower/msz_tianguan_2.png";break;case 2:this.levelImg2.skin="big_tower/txt_common_zhan.png";break;case 3:case 4:this.levelImg2.skin="big_tower/msz_guta_2.png"}this.levelClip.value=e.toString();var s=e.toString().length*(36+this.levelClip.spaceX),o=this.levelImg1.width+5+s+5+this.levelImg2.width;this.levelImg1.x=.5*(this.width-o),this.levelClip.x=this.levelImg1.x+this.levelImg1.width,this.levelImg2.x=this.levelClip.x+s+5,Laya.timer.once(1e3,this,function(){t.close()})},e.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this._type=t},t=e,r.BigTowerLevelPanle=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("cumulate_pay"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getfgs=t},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfg=function(){return this._tab},n.prototype.getcfgs=function(){return this.getfgs},i=n,e.CumulatePayCfg=i}(modules=modules||{}),function(t){var r,e,i,n,s,o;function a(){var t=e.call(this)||this;return t._activityTime=0,t}r=t.cumulate_pay||(t.cumulate_pay={}),i=ui.CumulatePayViewUI,n=t.common.CustomList,s=t.config.CumulatePayCfg,e=i,__extends(a,e),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),e.prototype.destroy.call(this,t)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.itemRender=r.CumulatePayItem,this._list.vCount=6,this._list.hCount=1,this._list.width=640,this._list.height=663,this._list.x=4,this._list.y=14,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("CUMULATE_PAY_UPDATE",this,this.updateView),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView(),this.showUI()},a.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},a.prototype.okBtnHandler=function(){0!=t.first_pay.FirstPayModel.instance.giveState?t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?WindowManager.instance.open(387):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==t.zhizun.ZhizunModel.instance.state&&WindowManager.instance.open(351):WindowManager.instance.open(381):WindowManager.instance.open(379):WindowManager.instance.open(118)},a.prototype.updateView=function(){for(var t=s.instance.getcfgs().concat(),e=[],i=0;i<t.length;i++){var n=t[i];n[3]<=r.CumulatePayModel.instance.totalMoney&&e.push(n)}e.sort(this.sortFunc.bind(this)),this._list.datas=e,this.setActivitiTime()},a.prototype.setActivitiTime=function(){this._activityTime=r.CumulatePayModel.instance.activityTime,this._activityTime>GlobalData.serverTime&&(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler))},a.prototype.activityHandler=function(){this._activityTime>GlobalData.serverTime?this.activityText.text=""+t.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._activityTime):(this.activityText.visible=!1,Laya.timer.clear(this,this.activityHandler))},a.prototype.sortFunc=function(t,e){var i=r.CumulatePayModel.instance.rewarList,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},o=a,r.CumulatePayPanel=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("continue_pay"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e][0];this._tab[n]||(this._tab[n]=[]),this._tab[n].push(t[e])}},n.prototype.getCfgsByGrade=function(t){return this._tab[t]},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),i=n,e.ContinePayCfg=i}(modules=modules||{}),function(t){var r,e,i,n,s,o;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._state=0,t}r=t.continue_pay||(t.continue_pay={}),i=ui.ContinueItemUI,n=t.common.CustomClip,s=t.bag.BagUtil,e=i,__extends(a,e),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._cfg=null,e.prototype.destroy.call(this,t)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-5,this.sureBtn.y-10,.8),CommonUtil.setHTMLPro(this.continueText,"#b15315","SimHei",26)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},a.prototype.close=function(){e.prototype.close.call(this),n.thisStop(this._btnClip)},a.prototype.setData=function(t){this._cfg=t,this._itemDay=this._cfg[1],this._grade=this._cfg[0],this.dayText.text=""+(this._itemDay+1),this.continueText.innerHTML="充值"+this._cfg[2]+"元<span style='color:#1f304d'>&nbsp;,可领取奖励！</span>";var e=r.ContinuePayModel.instance.getRewardByGradeAndDay(this._grade,this._itemDay);this._state=e?e[2]:0;for(var i=[],n=this._cfg[3],s=0;s<.5*n.length;s++)i.push([n[2*s],n[2*s+1],0,null]);var o=i.length,a=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4];for(s=0;s<4;s++)s<o?(a[s].visible=!0,a[s].dataSource=i[s]):a[s].visible=!1;this.updateBtnState(),this.setDayPlan()},a.prototype.sureBtnHandler=function(){if(0==this._state)WindowManager.instance.open(111),WindowManager.instance.close(156);else if(1==this._state){for(var t=this._cfg[3],e=[],i=0,n=.5*t.length;i<n;i++)e.push([t[2*i],t[2*i+1],0,null]);s.canAddItemsByBagIdCount(e)&&r.ContinuePayCtrl.instance.getContinueReward(this._grade,this._itemDay)}},a.prototype.updateBtnState=function(){0!==this._state?(this.sureBtn.label="领取",1==this._state?(n.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.receivedImg.visible=!1):(n.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0),this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119"):(this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460",this.sureBtn.label="前往充值",this.sureBtn.visible=!0,this.receivedImg.visible=!1,n.thisStop(this._btnClip))},a.prototype.setDayPlan=function(){for(var t=this._itemDay+1,e=r.ContinuePayModel.instance.progressList,i=0;i<e.length;i++)if(this._grade==e[i][0]){var n=e[i][1];this.scheduleText.text="("+n+"/"+t+")",this.scheduleText.color=0==this._state?"#FF3e3e":"#168a17"}},o=a,r.ContinuePayItem=o}(modules=modules||{}),function(e){var l,i,t,n,a,s,o;function r(){return i.call(this)||this}l=e.continue_pay||(e.continue_pay={}),t=ui.ContinueViewUI,n=e.common.CustomList,a=e.config.ContinePayCfg,s=e.common.BtnGroup,i=t,__extends(r,i),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._scienceTabGroup&&(this._scienceTabGroup.destroy(),this._scienceTabGroup=null),i.prototype.destroy.call(this,t)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.itemRender=l.ContinuePayItem,this._list.hCount=1,this._list.width=640,this._list.height=703,this._list.x=4,this._list.y=14,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0,this._scienceTabGroup=new s,this._scienceTabGroup.setBtns(this.sureBtn1,this.sureBtn2,this.sureBtn3),this._scienceTabGroup.selectedIndex=0},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("CONTINUE_PAY_UPDATE",this,this.updateView),this.onAutoEvt(this._scienceTabGroup,"change",this,this.changeswitchBtnTabHandler),this.regAutoRP(this.continueRP1,["continuePayGrade1RP"]),this.regAutoRP(this.continueRP2,["continuePayGrade2RP"]),this.regAutoRP(this.continueRP3,["continuePayGrade3RP"])},r.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView(),this.setPanel()},r.prototype.changeswitchBtnTabHandler=function(){this.updatePanel(this._scienceTabGroup.selectedIndex)},r.prototype.updateView=function(){this.setActivitiTime(),this.setDayMoney(),this._scienceTabGroup.selectedIndex=l.ContinuePayModel.instance.getOneTrue(),this.changeswitchBtnTabHandler()},r.prototype.setDayMoney=function(){this.priceText.text="本日已充值"+l.ContinuePayModel.instance.totalMoney+"元"},r.prototype.setActivitiTime=function(){l.ContinuePayModel.instance.endTime>GlobalData.serverTime&&(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler))},r.prototype.activityHandler=function(){var t=l.ContinuePayModel.instance.endTime;t>GlobalData.serverTime?this.activityText.text=""+e.common.CommonUtil.timeStampDDHHMMToHHMMSS(t):(this.activityText.visible=!1,Laya.timer.clear(this,this.activityHandler))},r.prototype.updatePanel=function(t){var e=a.instance.getCfgsByGrade(t);e=e.sort(this.sortFunc.bind(this)),this._list.datas=e;for(var i=a.instance.getCfgsByGrade(t),n=0;n<i.length;n++){var s=i[n];if(5==s[1]){this.payText.value=""+s[2],this.dayText.value=""+(s[1]+1);var o=s[3];return void(this.continueBase.dataSource=[o[0],o[1],0,null])}}},r.prototype.sortFunc=function(t,e){var i=t[1],n=e[1],s=l.ContinuePayModel.instance.getRewardByGradeAndDay(t[0],i),o=l.ContinuePayModel.instance.getRewardByGradeAndDay(e[0],n),a=s?s[2]:0,r=o?o[2]:0;return(a=0===a?1:1===a?0:a)===(r=0===r?1:1===r?0:r)?i-n:a-r},r.prototype.setPanel=function(){for(var t=a.instance.cfgs,e=0;e<t.length;e++){var i=t[e][0];0==i?this.sureBtn1.label=t[e][2]+"元":1==i?this.sureBtn2.label=t[e][2]+"元":this.sureBtn3.label=t[e][2]+"元"}},o=r,l.ContinuePanel=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.consume_reward||(t.consume_reward={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._cfgs=GlobalData.getConfig("consume_reward");for(var t=0,e=this._cfgs.length;t<e;t++)this._tab[this._cfgs[t][0]]=this._cfgs[t]},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfg=function(){return this._tab},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),i=n,e.ConsumeRewardCfg=i}(modules=modules||{}),function(t){var s,e,i,n,o,a,r;function l(){var t=e.call(this)||this;return t.getState=0,t}s=t.cousume_reward||(t.cousume_reward={}),i=ui.ConsumeRewardItemUI,n=t.common.CustomClip,o=t.notice.SystemNoticeManager,a=t.bag.BagUtil,e=i,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._itemId=0,this._itemIdAr=[],CommonUtil.setHTMLPro(this.consumeText,"#b15315","SimHei",26),this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-10,!0),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("CONSUME_REWARD_UPDATE",this,this.updateView)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnClip.play(),this.updateView()},l.prototype.updateView=function(){this.setBtnSure(),this.setMoney()},l.prototype.setData=function(t){this._cfg=t,this._cumuMoney=this._cfg[1],this._itemId=this._cfg[0],this._itemIdAr.push(this._cfg[0]);for(var e=[],i=this._cfg[2],n=0,s=.5*i.length;n<s;n++)e.push(i[2*n]);this.setMoney();var o=e.length,a=[];for(a.push(this.cumulateBase1),a.push(this.cumulateBase2),a.push(this.cumulateBase3),a.push(this.cumulateBase4),n=0;n<4;n++)n<o?(a[n].visible||(a[n].visible=!0),a[n].dataSource=[i[2*n],i[2*n+1],0,null]):a[n].visible=!1;this.setBtnSure()},l.prototype.sureBtnHandler=function(){if(0==this.getState)o.instance.addNotice("消耗元宝数量不足",!0);else if(1==this.getState){for(var t=this._cfg[2],e=[],i=0,n=.5*t.length;i<n;i++)e.push([t[2*i],t[2*i+1],0,null]);a.canAddItemsByBagIdCount(e)&&s.ConsumeRewardCtrl.instance.getConsumeReward([this._itemId])}},l.prototype.setBtnSure=function(){var t=s.ConsumeRewardModel.instance.rewarTable[this._itemId];t?(this.getState=t[1],0!==this.getState&&(this.sureBtn.label="可领取",this._btnClip.visible=1===this.getState,this.sureBtn.visible=1===this.getState,this.receivedImg.visible=1!==this.getState)):(this.sureBtn.label="领取",this.sureBtn.visible=!0,this.receivedImg.visible=!1,this._btnClip.visible=!1)},l.prototype.setMoney=function(){this._stateMoney=s.ConsumeRewardModel.instance.totalMoney,this.consumeText.innerHTML=this._cfg[1]+"元宝<span style='color:#1f304d'>可领取！</span>",this.scheduleText.text="("+this._stateMoney+"/"+this._cumuMoney+")",this._stateMoney>=this._cumuMoney?this.scheduleText.color="#16ba17":this.scheduleText.color="#FF3e3e"},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},r=l,s.ConsumeRewardItem=r}(modules=modules||{}),function(e){var r,i,t,n,s,o;function a(){return i.call(this)||this}r=e.cousume_reward||(e.cousume_reward={}),t=ui.ConsumeRewardViewUI,n=e.common.CustomList,s=e.consume_reward.ConsumeRewardCfg,i=t,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.itemRender=r.ConsumeRewardItem,this._list.vCount=6,this._list.hCount=1,this._list.width=640,this._list.height=663,this._list.x=4,this._list.y=14,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("CONSUME_REWARD_UPDATE",this,this._updateView),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._updateView(),this.showUI()},a.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,e.money_cat.MoneyCatModel.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==e.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):e.fight_talisman.FightTalismanModel.instance.state?-1==e.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):(this.okBtn.visible=!1,this.wanChengImg.visible=!0,this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029))},a.prototype.okBtnHandler=function(){0!=e.first_pay.FirstPayModel.instance.giveState?e.money_cat.MoneyCatModel.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==e.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):e.fight_talisman.FightTalismanModel.instance.state?-1==e.gloves.GlovesModel.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381):WindowManager.instance.open(118)},a.prototype._updateView=function(){this.setActivitiTime();var t=s.instance.cfgs.concat();t.sort(this.sortFunc.bind(this)),this._list.datas=t},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.setActivitiTime=function(){this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)},a.prototype.activityHandler=function(){var t=r.ConsumeRewardModel.instance.activityTime;t>GlobalData.serverTime?this.activityText.text=""+e.common.CommonUtil.timeStampDDHHMMToHHMMSS(t):(this.activityText.visible=!1,Laya.timer.clear(this,this.activityHandler))},a.prototype.sortFunc=function(t,e){var i=r.ConsumeRewardModel.instance.rewarTable,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)-(a=0===a?1:1===a?0:a)==0?n-s:o-a},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this,t)},o=a,r.ConsumeRewardPanel=o}(modules=modules||{}),function(t){var r,e,i,n,s;function o(){var t=e.call(this)||this;return t._serverDay=0,t}r=t.cumulate2_pay||(t.cumulate2_pay={}),i=ui.Cumulate2PayViewUI,n=t.common.CustomList,e=i,__extends(o,e),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.itemRender=r.CumulatePay2Item,this._list.vCount=6,this._list.hCount=1,this._list.width=640,this._list.height=661,this.itemPanel.addChild(this._list),this._list.x=0,this._list.y=16,this.centerX=this.centerY=0},o.prototype.onEvt=function(){this.onAutoGlobalEvt("CUMULATE_PAY_UPDATE",this,this.updateView),e.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("SPRINT_RANK_TYPE_CHANGE",this,this.changeType)},o.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),r.Cumulate2PayCtrl.instance.getCumulatepay2Info(),this.updateView(),this.showUI()},o.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},o.prototype.okBtnHandler=function(){0!=t.first_pay.FirstPayModel.instance.giveState?t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?WindowManager.instance.open(387):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==t.zhizun.ZhizunModel.instance.state&&WindowManager.instance.open(351):WindowManager.instance.open(381):WindowManager.instance.open(379):WindowManager.instance.open(118)},o.prototype.updateView=function(){this._serverDay=r.CumulatePay2Model.instance.serverDay;var t=r.CumulatePay2Cfg.instance.getCfgsByServerDay(this._serverDay);if(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];n[4]<=r.CumulatePay2Model.instance.totalMoney&&e.push(n)}e.sort(this.sortFunc.bind(this)),this._list.datas=e,this.setActivitiTime()}},o.prototype.setActivitiTime=function(){this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)},o.prototype.activityHandler=function(){this.activityText.text=""+t.common.CommonUtil.timeStampToHHMMSS(r.CumulatePay2Model.instance.activityTime),r.CumulatePay2Model.instance.activityTime<GlobalData.serverTime&&Laya.timer.clear(this,this.activityHandler)},o.prototype.sortFunc=function(t,e){var i=r.CumulatePay2Model.instance.rewarList,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},o.prototype.changeType=function(){this.close(),WindowManager.instance.open(this.panelId)},s=o,r.CumulatePay2Panel=s}(modules=modules||{}),function(t){var a,e,i,n,s,o,r;function l(){return e.call(this)||this}a=t.cumulatePay_shenHun||(t.cumulatePay_shenHun={}),i=t.config.SinglePayJadeCfg,n=t.common.CustomList,s=t.common.CommonUtil,o=t.funcOpen.FuncOpenModel,e=ui.CumulatePayShenHunViewUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=n.create("v",40,301,640,670,a.CumulatePayShenHunItem,6),this.addChildAt(this._list,4),this.titleTxt.text="魂玉返利"},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("CUMULATEPAY_SHENHUN_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,s.gotoSuggestUp),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},l.prototype.showUI=function(){var t=i.instance.getArr;t.sort(this.sortFunc.bind(this)),this._list.datas=t,this.setActivitiTime()},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),a.CumulatePayShenHunCtrl.instance.GetSinglePayJade(),this.showUI(),this.showUI1()},l.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},l.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.CumulatePayShenHunModel.instance.getSteat(i),o=a.CumulatePayShenHunModel.instance.getSteat(n);return s===o?i-n:s-o},l.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=o.instance.getFuncIsOpen(196);a.CumulatePayShenHunModel.instance.restTm>=GlobalData.serverTime&&t&&a.CumulatePayShenHunModel.instance.state?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},l.prototype.activityHandler=function(){this.activityText.text=""+s.timeStampToHHMMSS(a.CumulatePayShenHunModel.instance.restTm),a.CumulatePayShenHunModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},r=l,a.CumulatePayShenHunPanel=r}(modules=modules||{}),function(t){var a,e,i,n,s,o,r;function l(){return e.call(this)||this}a=t.cumulatePay_tianZhu||(t.cumulatePay_tianZhu={}),i=t.config.SinglePayPrintCfg,n=t.common.CustomList,s=t.common.CommonUtil,o=t.funcOpen.FuncOpenModel,e=ui.CumulatePayShenHunViewUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.width=640,this._list.height=670,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=301,this._list.itemRender=a.CumulatePayTianZhuItem,this.addChildAt(this._list,4),this.titleTxt.text="圣印返利"},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("CUMULATEPAY_TIANZHU_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,s.gotoSuggestUp),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},l.prototype.showUI=function(){var t=i.instance.getArr;t.sort(this.sortFunc.bind(this)),this._list.datas=t,this.setActivitiTime()},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),a.CumulatePayTianZhuCtrl.instance.GetSinglePayJade(),this.showUI(),this.showUI1()},l.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},l.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.CumulatePayTianZhuModel.instance.getSteat(i),o=a.CumulatePayTianZhuModel.instance.getSteat(n);return s==o?i-n:s-o},l.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=o.instance.getFuncIsOpen(197);a.CumulatePayTianZhuModel.instance.restTm>=GlobalData.serverTime&&t&&a.CumulatePayTianZhuModel.instance.state?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},l.prototype.activityHandler=function(){this.activityText.text=""+s.timeStampToHHMMSS(a.CumulatePayTianZhuModel.instance.restTm),a.CumulatePayTianZhuModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},r=l,a.CumulatePayTianZhuPanel=r}(modules=modules||{}),function(t){var p,i,n,u,s,e;function o(){return i.call(this)||this}p=t.every_day_rebate||(t.every_day_rebate={}),n=t.common.CustomClip,u=t.config.EveryDayRebateCfg,s=t.common.SimpleList,i=ui.EveryDayreBateViewUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._taskBaseOne=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4,this.continueBase5],this._taskBaseTwo=[this.continueBase6,this.continueBase7,this.continueBase8,this.continueBase9,this.continueBase10],this._list=s.create(p.EveryDayRebateItem,640,125,1,1,0,6),this._list.width=640,this._list.height=489,this._list.x=40,this._list.y=637,this.addChildAt(this._list,4),CommonUtil.setHTMLPro(this.StatementHTML,"#ffffff","SimHei",24),CommonUtil.setHTMLPro(this.tipHTML,"#ffffff","SimHei",22),CommonUtil.setHTMLPro(this.tip1HTML,"#ffffff","SimHei",22,"right"),this._clipArr=new Array;for(var t=0;t<this._taskBaseOne.length;t++)(e=n.create("assets/effect/item_effect2.atlas","item_effect2",16,!0,6)).setProperty(this._taskBaseOne[t],-14,-22),e.stop(),e.name="clip",this._taskBaseOne[t].addChild(e),this._clipArr.push(e);for(t=0;t<this._taskBaseTwo.length;t++){var e;(e=n.create("assets/effect/item_effect2.atlas","item_effect2",16,!0,6)).setProperty(this._taskBaseTwo[t],-14,-22),e.stop(),e.name="clip",this._clipArr.push(e)}},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("SOARING_EVERTDATREDATE_UPDATE",this,this.showUI)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),p.EveryDayRebateModel.instance._isOpen=!0,p.EveryDayRebateModel.instance.setRpIsNext(),p.EveryDayRebateCtrl.instance.GetEverydayRebateInfo(),this.showTaskReward()},o.prototype.colse=function(){i.prototype.close.call(this),p.EveryDayRebateModel.instance._isOpen=!1},o.prototype.showUI=function(){for(var t=new Array,e=u.instance.getArrDate(p.EveryDayRebateModel.instance.round),i=0;i<e.length;i++){var n=e[i];n&&t.push(n)}t.sort(this.sortFunc.bind(this)),this._list.datas=t;var s=u.instance.getBigRewardDay(p.EveryDayRebateModel.instance._lastDay,p.EveryDayRebateModel.instance.round);this.tipHTML.innerHTML="当前已充值:<span style='color:#50ff28'>"+p.EveryDayRebateModel.instance._lastDay+"</span>天",this.tip1HTML.innerHTML=0!=s?"再充值<span style='color:#50ff28'>"+s+"天</span>可领取大奖":"领取全部奖励后第二天开启下一轮返利",this.showTaskReward()},o.prototype.sortFunc=function(t,e){var i=p.EveryDayRebateModel.instance.nodeList,n=t[0],s=e[0],o=t[1],a=e[1],r=i[o]?i[o][1]:0,l=i[a]?i[a][1]:0;return(r=0===r?1:1===r?0:r)===(l=0===l?1:1===l?0:l)?n-s:r-l},o.prototype.showTaskReward=function(){for(var t=0;t<this._taskBaseOne.length;t++)this._taskBaseOne[t].visible=!1;for(t=0;t<this._taskBaseTwo.length;t++)this._taskBaseTwo[t].visible=!1;var e=u.instance.getArrDate(p.EveryDayRebateModel.instance.round)[0],i=new Array,n=e[3];for(t=0;t<n.length;t++)(l=this._taskBaseOne[t])&&(l.dataSource=[n[t][0],n[t][1],0,null],l.visible=!0,i.push(l),l.isbtnClipIsPlayer=!1,(h=l.getChildByName("clip")).play(),h.visible=!0);var s=100*i.length+10*(i.length-1),o=(this.width-s)/2;for(t=0;t<i.length;t++)(c=i[t]).x=o,o+=c.width+10;var a=new Array,r=e[4];for(t=0;t<r.length;t++){var l,h;(l=this._taskBaseTwo[t])&&(l.dataSource=[r[t][0],r[t][1],0,null],l.visible=!0,a.push(l),l.isbtnClipIsPlayer=!1,(h=l.getChildByName("clip")).play(),h.visible=!0)}for(s=100*a.length+10*(a.length-1),o=(this.width-s)/2,t=0;t<a.length;t++){var c;(c=a[t]).x=o,o+=c.width+10}this.StatementHTML.innerHTML="活动规则:即日起每日充值<span style='color:#ffec7c'>任意</span>金额，即可领取豪礼，每隔<span style='color:#ffec7c'>6天</span>还可获取海量元宝，最多可达<span style='color:#ffec7c'>10万元宝</span>"},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._clipArr=this.destroyElement(this._clipArr),this._taskBaseOne=this.destroyElement(this._taskBaseOne),this._taskBaseTwo=this.destroyElement(this._taskBaseTwo),i.prototype.destroy.call(this,t)},e=o,p.EveryDayRebatePanel=e}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._ids=[],this._tab={},this._idss=[],this._cfgs=GlobalData.getConfig("illustrated_handbook");for(var t=0,e=0,i=this._cfgs.length;e<i;e++){var n=this._cfgs[e][0],s=this._cfgs[e][1]-1;this._idss.push(n),this._ids[s]||(this._ids[s]=[]),this._ids[s][e]||n===t||this._ids[s].push(n),this._tab[n]||(this._tab[n]=[]),this._tab[n].push(this._cfgs[e]),this._maxLv=this._cfgs[e][3],t=n}},n.prototype.getCfgByIdAndLv=function(t,e){return this._tab[t][e]},n.prototype.getIdsByType=function(t){return this._ids[t]},n.prototype.getAllIds=function(){return this._ids},Object.defineProperty(n.prototype,"maxLv",{get:function(){return this._maxLv},enumerable:!0,configurable:!0}),n.prototype.getIndex=function(t){for(var e=0,i=this._idss.length;e<i;e++)if(t===this._idss[e])return e},n.prototype.nextGodUpCfg=function(t,e){for(var i=0,n=this._cfgs.length;i<n;i++){var s=0<this._cfgs[i][7].length?this._cfgs[i][7][0][1]:0;if(this._cfgs[i][0]===t&&e<s)return this._cfgs[i]}},i=n,e.ArchiveCfg=i}(modules=modules||{}),function(t){var p,e,i,n,s,o,u,a;function r(){return e.call(this)||this}p=t.archive||(t.archive={}),i=t.common.ListWithArrowCtrl,n=Laya.Event,s=t.redPoint.RedPointCtrl,o=t.common.SimpleList,u=t.config.ArchiveCfg,e=ui.ArchiveViewUI,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.htmlGroud=[this.skill1,this.skill2,this.skill3],this.textGroud=[this.isActive1,this.isActive2,this.isActive3],this.skillTextGroud=[this.skillTxt1,this.skillTxt2,this.skillTxt3],this.centerX=0,this.centerY=0,this._list=o.create(p.ArchiveItem,214,274,1,3,1,1),this._list.pos(37,167,!0),this._list.size(646,605),this.addChild(this._list),this._list.datas=[],this._bottomList=o.create(p.ArchiveBottomItem,158,158,2,1,10,10),this._bottomList.pos(113,996,!0),this._bottomList.size(494,151),this.addChild(this._bottomList),this._listCtrl=new i(this._bottomList,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=544,this.bottomListArr=["qxxv","sdxb","sejx"],this._bottomList.datas=this.bottomListArr,this.setHtmlStyle()},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._bottomList,n.SELECT,this,this.selectBossHandler),this.onAutoGlobalEvt("ARCHIVE_UPDARE",this,this.setList),this._listCtrl.addListeners()},r.prototype.offEvt=function(){this._listCtrl.removeListeners(),e.prototype.offEvt.call(this)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),p.ArchiveCtrl.instance.getIllustratedHandbookSystem(),this._bottomList.selectedIndex=0,this.setList()},r.prototype.setHtmlStyle=function(){CommonUtil.setHTMLPro(this.skill1,"#3d5981","SimHei",24),CommonUtil.setHTMLPro(this.skill2,"#3d5981","SimHei",24),CommonUtil.setHTMLPro(this.skill3,"#3d5981","SimHei",24)},r.prototype.selectBossHandler=function(){this.changeDataByselectedIndex(this._bottomList.selectedIndex)},r.prototype.setList=function(){if(!p.ArchiveModel.instance.isOpenPanel)for(var t=["archiveSonRP1","archiveSonRP2","archiveSonRP3"],e=0,i=t.length;e<i;e++)if(s.instance.getRPProperty(t[e])){this._bottomList.selectedIndex=e;break}p.ArchiveModel.instance.isOpenPanel=!0,this.changeDataByselectedIndex(this._bottomList.selectedIndex)},r.prototype.changeDataByselectedIndex=function(t){for(var e=p.ArchiveSkillCfg.instance.getCfgByType(t+1),i=u.instance.getIdsByType(this._bottomList.selectedIndex),n=u.instance.getAllIds(),s=[],o=0,a=0;a<n.length;a++)for(var r in n[a]){var l=n[a][r];(h=p.ArchiveModel.instance.handBook[l])?o+=u.instance.getCfgByIdAndLv(l,h)[4]:h=0}for(var r in i){var h;l=i[r],h=(h=p.ArchiveModel.instance.handBook[l])||0,s.push([l,h])}s=(this.temp=s).sort(this.sortFunc.bind(this));var c=(this._list.datas=s).length;switch(this.powerNum.value=o.toString(),t){case 0:this.itemName.skin="archive/txt_tj_qxxn.png",this.skillIsActive(e,c);break;case 1:this.itemName.skin="archive/txt_tj_sdxb.png",this.skillIsActive(e,c);break;case 2:this.itemName.skin="archive/txt_tj_sejx.png",this.skillIsActive(e,c)}},r.prototype.skillIsActive=function(t,e){var i=p.ArchiveModel.instance.getHandbookListCountByType(this._bottomList.selectedIndex+1);this.progress.text=" ("+i+"/"+e+")";for(var n=0;n<3;n++)this.textGroud[n].visible=!1,this.skillTextGroud[n].visible=!1,this.htmlGroud[n].visible=!1;n=0;for(var s=t.length;n<s;n++)this.textGroud[n].visible=!0,this.htmlGroud[n].visible=!0,this.skillTextGroud[n].visible=!0,this.htmlGroud[n].innerHTML=""+t[n][3],i>=t[n][1]?(this.textGroud[n].text="(已激活)",this.textGroud[n].color="#198600",this.skillTextGroud[n].color="#198600"):(this.textGroud[n].text="(集齐"+t[n][1]+"件)",this.textGroud[n].color="#ff3e3e",this.skillTextGroud[n].color="#ff3e3e")},r.prototype.sortFunc=function(t,e){var i=p.ArchiveModel.instance.getHandbookStateById(t[0]),n=p.ArchiveModel.instance.getHandbookStateById(e[0]),s=u.instance.getIndex(t[0]),o=u.instance.getIndex(e[0]);return i!==n?n-i:s-o},r.prototype.close=function(){p.ArchiveModel.instance.isOpenPanel=!1,e.prototype.close.call(this)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._listCtrl=this.destroyElement(this._listCtrl),e.prototype.destroy.call(this,t)},a=r,p.ArchivePanel=a}(modules=modules||{}),function(s){var o,i,t,e,a,n;function r(){return i.call(this)||this}o=s.archive||(s.archive={}),t=s.common.CustomClip,e=s.notice.SystemNoticeManager,a=s.config.ArchiveCfg,i=ui.ArchiveParticularAlertUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.itemId=0,this.useItems=[0,0],this.firstUseItems=[0,0],this.hasCount=0,this.archiveId=0,this.getWayTxt.underline=!0,this._liftArr=[this.proAttTxt_0,this.proAttTxt_1,this.proAttTxt_2,this.proAttTxt_3],this._valueArr=[this.attValueTxt_0,this.attValueTxt_1,this.attValueTxt_2,this.attValueTxt_3],this._attrNameTxts=[this.attNameTxt_0,this.attNameTxt_1,this.attNameTxt_2,this.attNameTxt_3],this._upImgsArr=[this.arrImg_0,this.arrImg_1,this.arrImg_2,this.arrImg_3],CommonUtil.setHTMLPro(this.nowGod,"#3d5981","SimHei",24),CommonUtil.setHTMLPro(this.nextGod,"#3d5981","SimHei",24),this.creatEffect()},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnClip.play()},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.getWayTxt,this,this.getWayTxtHandler),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("ARCHIVE_UPDARE",this,this.update)},r.prototype.update=function(){if(this.archiveId){var t=o.ArchiveModel.instance.handBook[this.archiveId];this.cfg=a.instance.getCfgByIdAndLv(this.archiveId,t),this.disPlay(this.cfg)}},r.prototype.disPlay=function(t){if(t){this._Lv=0,this.archiveId=t[0],this._Lv=t[3];var e=a.instance.getCfgByIdAndLv(this.archiveId,0),i=a.instance.getCfgByIdAndLv(this.archiveId,this._Lv+1);this._iconSkinNum=e[8],this.firstUseItems=e[5],this.useItems=t[5],this.archiveItem.data=[this.archiveId,this._Lv],this.useItems?(this.itemId=t[5][0],this.hasCount=o.ArchiveModel.instance.handBookRes.get(this.itemId),this.hasCount||(this.hasCount=0),this.getWayTxt.visible=this.consumablesImg.visible=this.consumablesTxt.visible=!0,this.consumablesTxt.text="("+this.hasCount+"/"+this.useItems[1]+")",this.consumablesImg.x=(this.width-this.consumablesImg.width-this.consumablesTxt.width-5)/2,this.consumablesTxt.x=this.consumablesImg.width+this.consumablesImg.x,this.archiveItem.itemRP.visible=!1,this.hasCount>=this.useItems[1]?(this.consumablesTxt.color="#168a17",this._btnClip.visible=!0):(this.consumablesTxt.color="#ff3e3e",this._btnClip.visible=!1),this.consumablesImg.skin="assets/icon/item/"+this.useItems[0]+".png"):this.getWayTxt.visible=this.consumablesImg.visible=this.consumablesTxt.visible=this.archiveItem.isActive.visible=!1,this.powerNum.value=t[4].toString();var n=0;0<t[7].length?(n=t[7][0][1],this.skillLevel.text="神通 Lv."+t[7][0][0]):this.skillLevel.text="神通",this._Lv?this.grade.text=this.archiveItem.itemName.text+" · "+t[3]+"阶":this.grade.text=""+this.archiveItem.itemName.text,n?(this.setGodTxt(n,!this.useItems),this.isActive1.visible=!0,this.nowGod.innerHTML="<span style='color:#3d5981'>"+this.archiveItem.itemName.text+"属性提升</span><span style='color:#198600'>"+100*n+"%</span>"):(this.nowGod.innerHTML="未激活",this.nowGod.color="#ff3e3e",this.isActive1.visible=!1,this.setGodTxt(0,!this.useItems)),this.archiveItem.fightingValue.visible=!1,this.archiveItem.fightNumImg.visible=!1,this.archiveItem.tenThousandImg.visible=!1,s.common.AttrUtil.setAttrTxts(t,i,this._attrNameTxts,this._valueArr,this._upImgsArr,this._liftArr,6),i?(this.maxLvTxt.visible=!1,this.sureBtn.visible=!0,this.sureBtn.label=this._Lv?"升阶":"激活"):(this.maxLvTxt.visible=!0,this.sureBtn.visible=!1)}},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.archiveId=t[0];var e=t[1];this.cfg=a.instance.getCfgByIdAndLv(this.archiveId,e),this.disPlay(this.cfg)},r.prototype.setGodTxt=function(t,e){if(e)this.nextGod.innerHTML="已达最大等级",this.nextGod.color="#00ad35",this.isActive2.visible=!1;else{this.isActive2.visible=!0;var i=a.instance.nextGodUpCfg(this.archiveId,t),n=i[7][0][1];this.nextGod.innerHTML="<span style='color:#3d5981'>"+this.archiveItem.itemName.text+"属性提升</span><span style='color:#198600'>"+100*n+"%</span>",this.isActive2.text="(仙鉴"+i[3]+"阶开启)"}},r.prototype.getWayTxtHandler=function(){WindowManager.instance.open(106,[this.firstUseItems[0],this.firstUseItems[1],!1])},r.prototype.sureBtnHandler=function(){this.hasCount>=this.useItems[1]?(this._Lv?e.instance.addNotice("仙鉴升阶成功"):(e.instance.addNotice("仙鉴激活成功"),WindowManager.instance.open(470,[this.archiveId])),o.ArchiveCtrl.instance.promoteIllustratedHandbookSystem([this.archiveId])):WindowManager.instance.open(106,[this.useItems[0],this.useItems[1],!1])},r.prototype.creatEffect=function(){this._btnClip=t.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.sureBtn.addChild(this._btnClip),this._btnClip.pos(-5,-8),this._btnClip.scale(.8,.8)},r.prototype.close=function(){i.prototype.close.call(this),this._btnClip.stop(),Laya.timer.clearAll(this)},n=r,o.ArchiveParticularAlert=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.archive||(t.archive={}),n=t.common.CustomClip,s=t.config.ArchiveCfg,i=ui.ArchiveActiveAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.setSHowModel(),this._effect=n.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._effect,1),this._effect.scale(2.5,2.5,!0),this._effect.y=100,this._effect.centerX=0,this.tipTxt.visible=!0,this.closeBtn.visible=!1,this.height=714,this.titleImage.skin="assets/others/txt_tj_hdxxj.png",this._tweenJS=TweenJS.create(this._showModel).yoyo(!0).repeat(Number.MAX_VALUE)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._showModel.y=260;var e=t[0];this.setUI(e)},a.prototype.setSHowModel=function(){this._showModel=this.archiveItem},a.prototype.setUI=function(t){this.nameTXt.text=CommonUtil.getNameByItemId(t),this.archiveItem.gradeTxt.text="1阶",this.archiveItem.data=[t,1],this.archiveItem.isActive.visible=this.archiveItem.fightingValue.visible=this.archiveItem.fightNumImg.visible=this.archiveItem.maxImg.visible=this.archiveItem.tenThousandImg.visible=!1,this.archiveItem.itemRP.visible=!1;var e=s.instance.getCfgByIdAndLv(t,1);this.atkValueMsz.value=e[4].toString()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._effect.play(),this._tweenJS.to({y:this._showModel.y-20},1e3).start()},a.prototype.close=function(){i.prototype.close.call(this),this._effect.stop(),this._tweenJS.stop()},a.prototype.destroy=function(){this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null),this._effect=this.destroyElement(this._effect),i.prototype.destroy.call(this)},o=a,e.ArchiveActiveAlert=o}(modules=modules||{}),function(i){var e,n,t,r,s,o,l,a,h,c,p;function u(){return n.call(this)||this}e=i.dragon||(i.dragon={}),t=ui.DragonAlertUI,r=i.config.BlendCfg,s=i.config.RechargeCfg,o=i.common.CustomClip,l=i.bag.BaseItem,a=i.config.ExteriorCfg,h=i.common.AvatarClip,c=i.funcOpen.FuncOpenModel,n=t,__extends(u,n),u.prototype.initialize=function(){n.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.timeHtml,"#ffffff","SimHei",24,"center"),this.initView(),this.createEffect(),this.showReward(),this.showModel()},u.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.buyHandler),this.onAutoGlobalEvt("DRAGON_INFO_UPDATE",this,this.updateInfo)},u.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.updateInfo()},u.prototype.close=function(){n.prototype.close.call(this),this._btnClip&&(this._btnClip.visible=!1,this._btnClip.stop());var t=e.DragonModel.instance._info;t&&2===t[0]&&c.instance.setActionOpen(286,2)},u.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),n.prototype.destroy.call(this)},u.prototype.updateInfo=function(){this.setBtnState(),this.showActivityTime()},u.prototype.initView=function(){var t=s.instance.getRecharCfgByIndex(40)[6][0];this.powerClip.value=r.instance.getCfgById(72001)[1][2].toString(),this.tipTxt.text="现在抢购可立即获得"+t[1]+"   ,仙玉不计入每日获取上限";var e=i.redBag.RedBagUtils.getIdAndCondByMoney(1031,40);this.tipsHtml.visible=i.redBag.RedBagUtils.getActionopen(),this.tipsHtml.innerHTML="<span style='color:#ffffff;font-size:24px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:24px;font-family:SimHei;'>"+e+"元宝</span><span style='color:#ffffff;font-size:24px;font-family:SimHei;'>红包</span>"},u.prototype.showActivityTime=function(){this._time=e.DragonModel.instance._info[1],this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(Laya.timer.clear(this,this.loopHandler),this.timeHtml.innerHTML="<span style='color: #ff3e3e'>活动已结束</span>")},u.prototype.loopHandler=function(){this._time>GlobalData.serverTime?this.timeHtml.innerHTML="仅此一次，活动倒计时：<span style='color: #50ff28'>"+i.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._time)+" </span>":(this.timeHtml.innerHTML="<span style='color: #ff3e3e'>活动已结束</span>",Laya.timer.clear(this,this.loopHandler))},u.prototype.buyHandler=function(){0===e.DragonModel.instance._info[0]?e.DragonCtrl.instance.buy(40):e.DragonCtrl.instance.getDragonAward()},u.prototype.setBtnState=function(){switch(this._btnClip.visible=!1,this._btnClip.stop(),e.DragonModel.instance._info[0]){case 0:this.gotImg.visible=!1,this.buyBtn.visible=!0,this.buyBtn.label=s.instance.getRecharCfgByIndex(40)[2]+"元秒杀";break;case 1:this.gotImg.visible=!1,this.buyBtn.visible=!0,this.buyBtn.label="领取",this._btnClip.visible=!0,this._btnClip.play();break;case 2:this.gotImg.visible=!0,this.buyBtn.visible=!1}},u.prototype.createEffect=function(){this._btnClip=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.buyBtn.x-5,this.buyBtn.y-10)},u.prototype.showReward=function(){for(var t=[],e=r.instance.getCfgById2(201)[1],i=0,n=e.length;i<n;i+=2)t.push([e[i],e[i+1],0,null]);var s=t.length,o=.5*(720-(100*s+20*(s-1)));for(i=0;i<s;i++){var a=new l;this.addChild(a),a.pos(o+120*i,805,!0),a.dataSource=t[i]}},u.prototype.showModel=function(){var t=a.instance.getCfgById(2015);this._modelClip=h.create(1024,1024,1024),this.addChild(this._modelClip),this._modelClip.anchorX=this._modelClip.anchorY=.5,this._modelClip.avatarScale=t[10]?t[10]:1,this._modelClip.avatarRotationX=t[6],this._modelClip.avatarRotationY=t[7],this._modelClip.avatarY=t[9],this._modelClip.avatarX=t[8],this._modelClip.reset(2015),this._modelClip.centerX=0,this._modelClip.y=630,this.observationItem.data=[[this._modelClip,Math.round(2.015)]]},p=u,e.DragonAlert=p}(modules=modules||{}),function(t){var l,e,i,h,n,s,o;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.getState=0,t.gearsID=0,t.rewards=[],t}l=t.day_pay||(t.day_pay={}),i=ui.DayPayAlertUI,h=t.config.DayPayCfg,n=t.common.CustomClip,s=t.bag.BagUtil,e=i,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.DayBase1,this.DayBase2,this.DayBase3,this.DayBase4],this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.BtnSure.x-5,this.BtnSure.y-10),this.rewardShowItem.setDataFun([1,.4,.6,.6,"assets/icon/ui/day_pay/"])},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.BtnSure,this,this.sureBtnHandler),this.onAutoClick(this.BtnRec1,this,this.showItems,[0]),this.onAutoClick(this.BtnRec2,this,this.showItems,[1]),this.onAutoClick(this.BtnRec3,this,this.showItems,[2]),this.onAutoGlobalEvt("DAY_PAY_UPDATE",this,this.updateView)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),Channel.instance.publish(2100152,null)},a.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._cfg=h.instance.getCfgById(l.DayPayModel.instance.id),this.setTipBoxTween(),this.setTips(),this.showItems(0),this._qiangtiao=!1,t?(this._qiangtiao=!0,this.gearsID=t,this.showItems(this.gearsID)):this.updateView()},a.prototype.close=function(){n.thisStop(this._btnClip),this.rewardShowItem.stopTween(),this._tipBox1Tween&&(this._tipBox1Tween.stop(),this._tipBox1Tween=null),this._tipBox2Tween&&(this._tipBox2Tween.stop(),this._tipBox2Tween=null),this._tipBox3Tween&&(this._tipBox3Tween.stop(),this._tipBox3Tween=null),e.prototype.close.call(this)},a.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this)},a.prototype.updateView=function(){this.setState(),this.setBtnSure(this.gearsID),this.setRp()},a.prototype.setTipBoxTween=function(){this._tipBox1Tween=TweenJS.create(this.tipBox1).to({y:this.tipBox1.y-10},600).start().yoyo(!0).repeat(99999999),this._tipBox2Tween=TweenJS.create(this.tipBox2).to({y:this.tipBox2.y-10},600).start().yoyo(!0).repeat(99999999),this._tipBox3Tween=TweenJS.create(this.tipBox3).to({y:this.tipBox3.y-10},600).start().yoyo(!0).repeat(99999999)},a.prototype.setTipBox=function(t,e){switch(t){case 0:this.tipText1.text=e[1],e[3]&&(this.tipText1.color="#"+e[3]),this.tipImg1.width=this.tipText1.textWidth+15,this.booll1=null!=e[1];break;case 1:this.tipText2.text=e[1],e[3]&&(this.tipText2.color="#"+e[3]),this.tipImg2.width=this.tipText2.textWidth+15,this.booll2=null!=e[1];break;case 2:this.tipText3.text=e[1],e[3]&&(this.tipText3.color="#"+e[3]),this.tipImg3.width=this.tipText3.textWidth+15,this.booll3=null!=e[1]}e[2]&&(this.tipsWithText.color="#"+e[2]),e[0]?this.tipsWithText.text=e[0]:this.tipsWithText.text=""},a.prototype.setTips=function(){this._cfg=h.instance.getCfgById(l.DayPayModel.instance.id);var t=this._cfg[8],e=this._cfg[9],i=this._cfg[10];this.setTipBox(0,t),this.setTipBox(1,e),this.setTipBox(2,i)},a.prototype.setModelAndImg=function(t){this._cfg=h.instance.getCfgById(l.DayPayModel.instance.id);var e=this._cfg[11];switch(t){case 0:e=this._cfg[11];break;case 1:e=this._cfg[12];break;case 2:e=this._cfg[13]}var i=e[0],n=e[1],s=e[2];this.rewardShowItem.stopTween(),this.rewardShowItem.showRewardObj(i,n,s),this.observationItem.data=[[this.rewardShowItem._modelClip,Math.round(i/1e3)]]},a.prototype.showItems=function(t){if(!(2<t)){if(this.gearsID=t,this._cfg=h.instance.getCfgById(l.DayPayModel.instance.id),0==t){this.rewards=this._cfg[2],this.BtnRec1.skin="day_pay/tab_rchl_yq_1.png",this.BtnRec2.skin="day_pay/tab_rchl_yq_0.png",this.BtnRec3.skin="day_pay/tab_rchl_yq_0.png",this.BtnRec1.labelColors="#580505",this.BtnRec2.labelColors="#ffec7c",this.BtnRec3.labelColors="#ffec7c";var e=this._cfg[8];this.tipsWithText.text=e[0]?e[0]:"",this.tipBox1.visible=!1,this.tipBox2.visible=this.booll2,this.tipBox3.visible=this.booll3}else 1==t?(this.rewards=this._cfg[4],this.BtnRec1.skin="day_pay/tab_rchl_yq_0.png",this.BtnRec2.skin="day_pay/tab_rchl_yq_1.png",this.BtnRec3.skin="day_pay/tab_rchl_yq_0.png",this.BtnRec1.labelColors="#ffec7c",this.BtnRec2.labelColors="#580505",this.BtnRec3.labelColors="#ffec7c",e=this._cfg[9],this.tipsWithText.text=e[0]?e[0]:"",this.tipBox1.visible=this.booll1,this.tipBox2.visible=!1,this.tipBox3.visible=this.booll3):2==t&&(this.rewards=this._cfg[6],this.BtnRec1.skin="day_pay/tab_rchl_yq_0.png",this.BtnRec2.skin="day_pay/tab_rchl_yq_0.png",this.BtnRec3.skin="day_pay/tab_rchl_yq_1.png",this.BtnRec1.labelColors="#ffec7c",this.BtnRec2.labelColors="#ffec7c",this.BtnRec3.labelColors="#580505",e=this._cfg[10],this.tipsWithText.text=e[0]?e[0]:"",this.tipBox1.visible=this.booll1,this.tipBox2.visible=this.booll2,this.tipBox3.visible=!1);this.setTipsByState(0),this.setTipsByState(1),this.setTipsByState(2),this.BtnRec1.label=this._cfg[1]+"元",this.BtnRec2.label=this._cfg[3]+"元",this.BtnRec3.label=this._cfg[5]+"元";for(var i=0;i<this._taskBase.length;i++)this._taskBase[i].visible=!1;var n=new Array;for(i=0;i<.5*this.rewards.length;i++){var s=this._taskBase[i];s&&(s.dataSource=[this.rewards[2*i],this.rewards[2*i+1],0,null],s.visible=!0,s._nameTxt.visible=!0,n.push(s))}var o=100*n.length+30*(n.length-1),a=(this.width-o)/2;for(i=0;i<n.length;i++){var r=n[i];r.x=a,a+=r.width+30}this.setRp(),this.setModelAndImg(t),this.setBtnSure(t)}},a.prototype.sureBtnHandler=function(){if(1==this.getState){for(var t=[],e=0,i=.5*this.rewards.length;e<i;e++)t.push([this.rewards[2*e],this.rewards[2*e+1],0,null]);s.canAddItemsByBagIdCount(t)&&l.DayPayCtrl.instance.getDaypayReward(this.gearsID)}0==this.getState&&(WindowManager.instance.open(111),WindowManager.instance.close(145))},a.prototype.setTipsByState=function(t){var e=l.DayPayModel.instance.rewarList;if(e[t]&&(this.getState=e[t][1],0!==this.getState&&2==this.getState))switch(this.BtnSure.visible=!1,this.receivedImg.visible=!0,t){case 0:this.tipBox1.visible=!1;break;case 1:this.tipBox2.visible=!1;break;case 2:this.tipBox3.visible=!1}},a.prototype.setBtnSure=function(t){n.thisStop(this._btnClip);var e=l.DayPayModel.instance.rewarList;e[t]?(this.getState=e[t][1],0!==this.getState?(this.BtnSure.label="领取",1==this.getState?(n.thisPlay(this._btnClip),this.BtnSure.visible=!0,this.receivedImg.visible=!1):(this.BtnSure.visible=!1,this.receivedImg.visible=!0)):(this.BtnSure.label="充点小钱",this.BtnSure.visible=!0,this.receivedImg.visible=!1)):(this.BtnSure.label="充点小钱",this.BtnSure.visible=!0,this.receivedImg.visible=!1)},a.prototype.setState=function(){this.moneyTest.text="已充值 "+l.DayPayModel.instance.getMoney+" 元";var t=l.DayPayModel.instance.rewarList;if(!this._qiangtiao)for(var e=0;e<t.length;e++)if(1==t[e][1]){if(e+1>=t.length){this.showItems(e),e=0;break}return void this.showItems(e)}this._qiangtiao=!0},a.prototype.setRp=function(){for(var t=l.DayPayModel.instance.rewarList,e=0;e<t.length;e++){var i=1==t[e][1];0==e?this.dayRP1.visible=i:1==e?this.dayRP2.visible=i:this.dayRP3.visible=i}},o=a,l.DayPayPanel=o}(modules=modules||{}),function(t){var a,e,i,n,s,r,l,h,o;function c(){return e.call(this)||this}a=t.mission||(t.mission={}),i=ui.ThreeWorldsRankUI,n=t.common.CustomList,s=t.rankingList.PlayerRankingCtrl,r=t.rankingList.PlayerRankingModel,l=t.config.SceneCopyTianguanCfg,h=t.bigTower.BigTowerModel,e=i,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.hCount=1,this._list.spaceY=4,this._list.itemRender=a.MissionRankItem,this._list.width=530,this._list.height=550,this._list.pos(68,184,!0),this.addChild(this._list),this.titleTxt.text="",this.bgImg.height=this.height=864,this.okBtn.destroy(),this.awardTxt.text="",this._rankCount=10},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),this.onAutoGlobalEvt("RANK_UPDATE",this,this.updateRank)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.instance.getRank(this._rankType),1024===this._rankType?(this.titleTxt.text="天关排行",this.awardTxt.text="关数"):2048===this._rankType&&(this.titleTxt.text="大荒古塔排行",this.awardTxt.text="层数")},c.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._rankType=t},c.prototype.updateRank=function(){var t=r.instance.getRanksByType(this._rankType);if(t){if(t&&t.length===this._rankCount)this._list.datas=t;else{for(var e=[],i=0;i<this._rankCount;i++)e.push(t?t[i]:null);this._list.datas=e}var n=r.instance.actorrank(t,PlayerModel.instance.actorId)[0],s=0==n?"未上榜":"第"+n.toString()+"名";if(this.myRankTxt.text="我的排名："+s,1024===this._rankType){var o=l.instance.getCfgByLv(a.MissionModel.instance.curLv);o?this.myDamageTxt.text="我的关数："+(o?o[1]-1:0):(o=l.instance.getCfgByLv(a.MissionModel.instance.curLv-1),this.myDamageTxt.text="我的关数："+(o?o[1]:0))}else 2048===this._rankType&&(this.myDamageTxt.text="我的层数："+h.instance.finishLevel)}},o=c,a.MissionRankAlert=o}(modules=modules||{}),function(h){var c,e,p,t,u,i,n,s,o,a,r,l;function d(){var t=null!==e&&e.apply(this,arguments)||this;return t._awardLv=-1,t}c=h.mission||(h.mission={}),p=h.bag.BaseItem,t=h.common.ProgressBarCtrl,u=h.config.SceneCopyTianguanCfg,i=ui.MissionViewUI,n=h.dungeon.DungeonCtrl,s=h.common.CustomClip,o=h.bag.BagUtil,a=h.rankingList.PlayerRankingModel,r=h.funcOpen.FuncOpenModel,e=i,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this._proCtrl=new t(this.barImg,482,this.proTxt),this._baseItem=new c.CopyAwardItem,this._baseItem.pos(539,515,!0),this.centerX=this.centerY=0,this._prizeEffect=s.create("assets/effect/ok_state.atlas","ok_state",8),this._prizeEffect.setProperty(null,410,395,1.4),this._btnClip=s.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,287,1039,.8),this._time=0,this.regGuideSpr(2,this.challengeBtn),this.regGuideSpr(97,this._baseItem),this.seekBtn.visible=this.seekTxt.visible=!1},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.challengeBtn,this,this.challengeHandler),this.onAutoClick(this.rankBtn,this,this.openRank),this.onAutoClick(this._baseItem,this,this.awardClickHandler),this.onAutoClick(this.clearBtn,this,this.clearBtnHandler),this.onAutoClick(this.seekBtn,this,this.seekBtnHandler),this.onAutoGlobalEvt("SWEEPING_INCOME",this,this.updateLv),this.onAutoGlobalEvt("RANK_UPDATE",this,this.updateRank),this.onAutoGlobalEvt("MISSION_UPDATE_LV",this,this.updateLv),this.onAutoGlobalEvt("MISSION_UPDATE_WARE",this,this.updateWare),this.onAutoGlobalEvt("MISSION_UPDATE_AWARD_LV",this,this.updateAwardLv),this.onAutoGlobalEvt("MISSION_SEEKHELP_UPDATE",this,this.updateSeek),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.updateSeek),this.regAutoRP(this.clearRP,["lineClearOut"])},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),c.MissionCtrl.instance.getRank(),this.updateLv(),this.updateWare(),this.updateAwardLv(),this.updateSeek()},d.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler),s.thisStop(this._btnClip),s.thisStop(this._prizeEffect)},d.prototype.updateSeek=function(){this.challengeBtn.parent&&r.instance.getFuncIsOpen(263)?(this._time=c.MissionModel.instance.endTime,Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):this.seekBtn.visible=this.seekTxt.visible=!1},d.prototype.loopHandler=function(){var t=c.MissionModel.instance.state;if(1===t)return this.setSeekState(!0),this.seekTxt.text="协助中",this.seekTxt.color="#168a17",void Laya.timer.clear(this,this.loopHandler);if(0===t){if(GlobalData.serverTime>=this._time)return Laya.timer.clear(this,this.loopHandler),void(0===t?this.setSeekState(!1):(this.setSeekState(!0),this.seekTxt.text="协助中",this.seekTxt.color="#168a17"));this.setSeekState(!0)}this.seekTxt.color="#ff3e3e",this.seekTxt.text="求助冷却:"+CommonUtil.timeStampToMMSS(this._time)},d.prototype.setSeekState=function(t){this.seekBtn.visible=!t,(this.seekTxt.visible=t)&&(this.seekTxt.text="协助中",this.seekTxt.color="#168a17")},d.prototype.seekBtnHandler=function(){WindowManager.instance.open(442)},d.prototype.challengeHandler=function(){this._missionCfg&&c.MissionCtrl.instance.challenge(this._missionCfg[0])},d.prototype.updateLv=function(){if(this._missionCfg=u.instance.getCfgByLv(c.MissionModel.instance.curLv),this._missionCfg||(this._missionCfg=u.instance.getCfgByLv(c.MissionModel.instance.curLv-1)),this._missionCfg){var t=this._missionCfg[1];this.lvTxt.text="第"+t+"关",this.copperTxt.text=h.sweeping_income.SweepingIncomeModel.instance.coinIncome+"/小时",this.expTxt.text=h.sweeping_income.SweepingIncomeModel.instance.exeIncome+"/小时";var e=this._missionCfg[3];if(e&&0!==e.length){this._awardItems=this._awardItems||new Array;for(var i=0,n=this._awardItems.length;i<n;i++)this._awardItems[i].removeSelf();var s=.5*e.length*100+31*(.5*e.length-1),o=8+(this.width-s>>1);for(i=0,n=.5*e.length;i<n;i++){var a=e[2*i],r=e[2*i+1],l=void 0;this._awardItems.length>i?l=this._awardItems[i]:(l=new p,this._awardItems.push(l)),this.addChild(l),l.dataSource=[a,r,0,null],l.pos(o+131*i,840,!0)}}}},d.prototype.updateWare=function(){if(u.instance.getCfgByLv(c.MissionModel.instance.curLv)){var t=this._missionCfg[2],e=c.MissionModel.instance.curWare;t===e?(this.addChild(this.challengeBtn),this.proBg.visible=this.barImg.visible=this.proTxt.visible=this.tipTxt.visible=!1,s.thisPlay(this._btnClip)):(this.challengeBtn.removeSelf(),this.proBg.visible=this.barImg.visible=this.proTxt.visible=this.tipTxt.visible=!0,this._proCtrl.maxValue=t,this._proCtrl.value=e,this.tipTxt.text="还需击败"+(t-e)+"波怪物，才能开启闯关",s.thisStop(this._btnClip)),this.allPassTxt.visible=!1}else this.allPassTxt.visible=!0,this.challengeBtn.removeSelf(),this.proBg.visible=this.barImg.visible=this.proTxt.visible=this.tipTxt.visible=!1,s.thisStop(this._btnClip);this.updateSeek()},d.prototype.updateAwardLv=function(){this.speAwardBg.visible=this.speItemBox.visible=this.awardNameImg.visible=!0,this._awardLv=-1;var t,e,i=c.MissionModel.instance.awardLvs;if(i&&0!==i.length)e=i[0],t=u.instance.getCfgByLv(e);else{if(!(t=u.instance.getSpeCfgByLv(c.MissionModel.instance.curLv)))return this.speAwardBg.visible=this.speItemBox.visible=this.awardNameImg.visible=!1,s.thisStop(this._prizeEffect),void this._baseItem.removeSelf();e=t[1]}if(!t)return this.speAwardBg.visible=this.speItemBox.visible=this.awardNameImg.visible=!1,s.thisStop(this._prizeEffect),void this._baseItem.removeSelf();this.speItemTxt.text=e+"关奖励",this.speItemTxt.color="#9f6725";var n=t[4];n&&0<n.length&&(t[5]&&(this.awardNameImg.skin="assets/icon/ui/tianguan/"+t[5]+".png"),this._baseItem.needTip=!1,this._baseItem.dataSource=[n[0],n[1],0,null],this.addChild(this._baseItem),c.MissionModel.instance.curLv>e?(this._awardLv=e,s.thisPlay(this._prizeEffect),this.addChildAt(this._prizeEffect,this.getChildIndex(this.speAwardBg)+1),this.speItemTxt.text="点击领取",this.speItemTxt.color="#168a17"):(this._awardLv=-1,s.thisStop(this._prizeEffect)))},d.prototype.awardClickHandler=function(t){if(-1===this._awardLv)o.openBagItemTip(t.target.itemData);else{var e=u.instance.getCfgByLv(this._awardLv);n.instance.getCopyAward(e[0],e[1])}},d.prototype.updateRank=function(){this.rankGuanTxt3.visible=this.rankGuanTxt2.visible=this.rankGuanTxt1.visible=this.rankTxt2.visible=this.rankTxt3.visible=this.rankTxt1.visible=!1;var t=a.instance.getRanksByType(1024);t&&t.length&&(1<=t.length&&(this.rankTxt1.text=this.genRankStr(t[0]),this.rankGuanTxt1.text=this.genRankStr1(t[0]),this.rankGuanTxt1.visible=this.rankTxt1.visible=!0),2<=t.length&&(this.rankTxt2.text=this.genRankStr(t[1]),this.rankGuanTxt2.text=this.genRankStr1(t[1]),this.rankGuanTxt2.visible=this.rankTxt2.visible=!0),3<=t.length&&(this.rankTxt3.text=this.genRankStr(t[2]),this.rankGuanTxt3.text=this.genRankStr1(t[2]),this.rankTxt3.visible=this.rankGuanTxt3.visible=!0))},d.prototype.genRankStr=function(t){return t[4]+"."+t[2]},d.prototype.genRankStr1=function(t){return t[5]+"关"},d.prototype.openRank=function(){WindowManager.instance.open(143,1024)},d.prototype.destroy=function(t){void 0===t&&(t=!0),this.challengeBtn=this.destroyElement(this.challengeBtn),this._baseItem=this.destroyElement(this._baseItem),this._btnClip=this.destroyElement(this._btnClip),this._prizeEffect=this.destroyElement(this._prizeEffect),this._awardItems=this.destroyElement(this._awardItems),this._proCtrl=this.destroyElement(this._proCtrl),e.prototype.destroy.call(this,t)},d.prototype.clearBtnHandler=function(){WindowManager.instance.open(133)},l=d,c.MissionPanel=l}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.mission||(t.mission={}),n=ui.MissionMaskViewUI,s=Laya.Sprite,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this.layer=2,this._bg=new s,this.addChild(this._bg),this.maskImg.once(Laya.Event.LOADED,this,this.loadedHandler),this._lvClipTween=TweenJS.create(this.lvClip).yoyo(!0).repeat(1),this._tween=TweenJS.create(this).to({alpha:0},500).delay(1500).onComplete(this.close.bind(this))},a.prototype.loadedHandler=function(){this.resizeHandler()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),GlobalData.dispatcher.on("RESIZE_UI",this,this.resizeHandler),this.onAutoClick(this._bg,this,function(){})},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),GlobalData.dispatcher.off("RESIZE_UI",this,this.resizeHandler)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.alpha=1,this.resizeHandler(),this.lvClip.value=e.MissionModel.instance.curLv.toString(),this.lvClip.scaleX=.8,this.lvClip.scaleY=.8,this._lvClipTween.to({scaleX:1.2,scaleY:1.2},400).start(),this._tween.start()},a.prototype.close=function(){this._tween.stop(),this._lvClipTween.stop(),i.prototype.close.call(this)},a.prototype.resizeHandler=function(){var t=.5*(720-CommonConfig.viewWidth)|0,e=.5*(1280-CommonConfig.viewHeight)|0,i=this.maskImg.source;i&&(this._bg.graphics.clear(),0!=t?(this._bg.graphics.drawRect(t,e,-t,CommonConfig.viewHeight,"#000000"),this._bg.graphics.drawTexture(i),this._bg.graphics.drawRect(720,e,-t,CommonConfig.viewHeight,"#000000")):0!=e&&(this._bg.graphics.drawRect(t,e,CommonConfig.viewWidth,-e,"#000000"),this._bg.graphics.drawTexture(i),this._bg.graphics.drawRect(t,1280,CommonConfig.viewWidth,-e,"#000000")))},o=a,e.MissionMaskPanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.mission||(t.mission={}),n=ui.MissionAskForHelpAlertUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._model=e.MissionModel.instance,this.crossTxt.underline=!0,this.factionTxt.underline=!0,this.xianlvTxt.underline=!0},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.crossTxt,this,this.crossTxtHandler),this.onAutoClick(this.factionTxt,this,this.factionTxtHandler),this.onAutoClick(this.xianlvTxt,this,this.xianlvTxtHandler),this.onAutoGlobalEvt("MISSION_SEEKHELP_UPDATE",this,this.update)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},o.prototype.update=function(){this.seekTxt.text=this._model.maxSeekCount-this._model.seekHelpTimes+"/"+this._model.maxSeekCount,this.seekTxt.color=this._model.seekHelpTimes>=this._model.maxSeekCount?"#ff3e3e":"#168a17",this.helpTxt.text=this._model.maxHelpCount-this._model.assistHelpTimes+"/"+this._model.maxHelpCount,this.helpTxt.color=this._model.assistHelpTimes>=this._model.maxHelpCount?"#ff3e3e":"#168a17"},o.prototype.crossTxtHandler=function(){e.MissionCtrl.instance.tianguanSeekhelp(2)},o.prototype.factionTxtHandler=function(){e.MissionCtrl.instance.tianguanSeekhelp(1)},o.prototype.xianlvTxtHandler=function(){e.MissionCtrl.instance.tianguanSeekhelp(3)},o.prototype.destroy=function(){this._model=null,i.prototype.destroy.call(this)},s=o,e.MissionAskForHelpAlert=s}(modules=modules||{}),function(i){var c,n,t,p,s,o,u,e;function a(){var t=n.call(this)||this;return t._currSelectIndex=0,t}c=i.sevenDayGift||(i.sevenDayGift={}),t=ui.SevenSignUI,p=i.common.CustomClip,s=i.common.AvatarClip,o=i.config.ExteriorCfg,u=i.config.SevenDayCfg,n=t,__extends(a,n),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._selectedItem&&(this._selectedItem=null),this._iconImgTweenJS&&(this._iconImgTweenJS.stop(),this._iconImgTweenJS=null),this._modelClipTweenJS&&(this._modelClipTweenJS.stop(),this._modelClipTweenJS=null),this._items&&(this._items.length=0,this._items=null),this._topItems&&(this._topItems.length=0,this._topItems=null),this.destroyElement(this._btnClip),this.destroyElement(this._prizeEffect),this.destroyElement(this._modelClip),this.destroyElement(this._dayTxts),this.observationItem=this.destroyElement(this.observationItem),n.prototype.destroy.call(this,t)},a.prototype.initialize=function(){n.prototype.initialize.call(this),this._modelClip=s.create(1024,1024,1024),this.addChildAt(this._modelClip,4),this._modelClip.pos(360,430,!0),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.mouseEnabled=!1,this._currSelectIndex=-1,this.centerX=0,this.centerY=0,this.effectInit(),this._topItems=[this.baseItem1,this.baseItem2,this.baseItem3],this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7],this._dayTxts=[this.dayTxt1,this.dayTxt2,this.dayTxt3,this.dayTxt4,this.dayTxt5,this.dayTxt6,this.dayTxt7],this._dayDescArr=["第一天","第二天","第三天","第四天","第五天","第六天","第七天"];for(var t=0,e=this._dayTxts.length;t<e;t++)this._dayTxts[t].text=this._dayDescArr[t];this.titleTxt.text="七日礼"},a.prototype.setAvatar=function(t){var e=o.instance.getCfgById(t);e&&(this._modelClip.avatarRotationY=e[7]?e[7]:180,this._modelClip.avatarScale=e[10]?e[10]:1,this._modelClip.avatarRotationX=e[6]?e[6]:0,this._modelClip.avatarX=e[8]?e[8]:0,this._modelClip.avatarY=e[9]?e[9]:0)},a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureFunc);for(var t=0,e=this._items.length;t<e;t++)this.onAutoClick(this._items[t].frameImg,this,this.itemClickHandler,[t]);this.onAutoGlobalEvt("SEVEN_DAY_INFO_UPDATA",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){i.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.offEvt=function(){n.prototype.offEvt.call(this),null!=this._iconImgTweenJS&&(this._iconImgTweenJS.stop(),this._iconImgTweenJS=null),null!=this._modelClipTweenJS&&(this._modelClipTweenJS.stop(),this._modelClipTweenJS=null)},a.prototype.onOpened=function(){n.prototype.onOpened.call(this);for(var t=0,e=this._items.length;t<e;t++)this._items[t].type=1,this._items[t].cfg=u.instance.cfgs[t];this.updateInfo()},a.prototype.itemClickHandler=function(t){this.selectItem(t)},a.prototype.isMoveIconImg=function(t,e){2==e&&1==t?(this._iconImgTweenJS&&this._iconImgTweenJS.stop(),this.iconImg.y=346,this._iconImgTweenJS=TweenJS.create(this.iconImg).to({y:this.iconImg.y-7},1e3).start().yoyo(!0).repeat(99999999)):this._iconImgTweenJS&&this._iconImgTweenJS.stop()},a.prototype.isMoveModelClip=function(t,e){0==e&&1==t?(this._modelClipTweenJS&&this._modelClipTweenJS.stop(),this._modelClip.y=430,this._modelClipTweenJS=TweenJS.create(this._modelClip).to({y:this._modelClip.y-20},1e3).start().yoyo(!0).repeat(99999999)):this._modelClipTweenJS&&this._modelClipTweenJS.stop()},a.prototype.selectItem=function(t){if(-1!==t){var e=c.SevenDayGiftModel.instance.sevenDayInfo;if(e){this._selectedItem&&(this._selectedItem.selected=!1),this._selectedItem=this._items[t],this._selectedItem.selected=!0;var i=(this._currSelectIndex=t)+1,n=u.instance.getCfgByDay(t+1),s=n[4],o=n[3],a=n[5];this.isMoveIconImg(a,s),this.isMoveModelClip(a,s),1==n[6]?p.thisPlay(this._prizeEffect):p.thisStop(this._prizeEffect),2!=s?this.soaringRankModelClip(o,s):(this._modelClip.visible=!1,this.iconImg.visible=!0,this.iconImg.skin="assets/icon/ui/seven_day/"+o+".png"),this.nameTxt.text=n[2];for(var r=u.instance.getCfgByDay(i)[1],l=0;l<3;l++)this._topItems[l].dataSource=[r[l][0],r[l][1],0,null];var h=c.SevenDayGiftModel.instance.getDataByIndex(t);h&&1===h[1]?(this.sureBtn.visible=!1,this.receiveImg.visible=!0,this._btnClip.visible=!1,this._btnClip.stop()):(this.sureBtn.visible=!0,this.receiveImg.visible=!1,i<=e[0]?(this._btnClip.visible=!0,this._btnClip.play()):(this._btnClip.visible=!1,this._btnClip.stop())),this.dayTxt.text=this._dayDescArr[this._currSelectIndex]}}},a.prototype.soaringRankModelClip=function(t,e){this.iconImg.visible=!1,this._modelClip.visible=!0,this._modelClip.y=430,this.setAvatar(t);var i=Math.round(t/1e3);1==e?9!=i&&10!=i||(this._modelClip.reset(0,0,0,0,t),this._modelClip.y=430):(this._modelClip.reset(t),2==i||3==i||4==i||5==i||90==i||11==i&&this._modelClip&&this._modelClip.setActionType("show")),this.observationItem.data=[[this._modelClip,Math.round(t/1e3)]]},a.prototype.sureFunc=function(){-1!==this._currSelectIndex&&c.SevenDayGiftCtrl.instance.getSevenDayAward(this._currSelectIndex+1)},a.prototype.updateInfo=function(){if(c.SevenDayGiftModel.instance.sevenDayInfo){for(var t=6,e=0,i=this._items.length;e<i;e++){var n=c.SevenDayGiftModel.instance.getDataByIndex(e);this._items[e].data=n,6===t&&0===n[1]&&(t=e)}this.selectItem(t)}},a.prototype.effectInit=function(){this._btnClip=p.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-10),this._prizeEffect=p.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._prizeEffect,2),this._prizeEffect.scale(2,2),this._prizeEffect.pos(104,89)},e=a,c.SevenDayGiftPanel=e}(modules=modules||{}),function(t){var e,s,i;function n(){}e=t.monthCard||(t.monthCard={}),s=t.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getMonthCardInfoReply=function(t){this.MonthCardInfoReply=t,this.flag=t[0],this.isHavegold(t[3]),GlobalData.dispatcher.event("GET_MONTH_CARD_INFO_REPLY")},n.prototype.getMonthCardRewardReply=function(t){this.MonthCardRewardReply=t,GlobalData.dispatcher.event("GET_MONTH_CARD_REWARD_REPLY")},n.prototype.updateMonthCardInfo=function(t){this.MonthCardInfoReply=t,this.flag=t[0],this.isHavegold(t[3]),GlobalData.dispatcher.event("UPDATE_MONTH_CARD_INFO")},n.prototype.isHavegold=function(t){var e=!1;if(t)for(var i=0,n=t.length;i<n;i++)if(1==t[i]){e=!0;break}s.instance.setRPProperty("monthCardRP",e)},i=n,e.MonthCardModel=i}(modules=modules||{}),function(t){var e,o,i;function n(){this.init()}e=t.config||(t.config={}),o=laya.utils.Dictionary,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._levelDic=new o,this._idDic=new o,this._giftCfgs=new Array,this._lvTab={};for(var t=GlobalData.getConfig("online_reward"),e=0;e<t.length;e++){var i=t[e],n=i[0];this._idDic.set(n,i);var s=i[1];null!=this._lvTab[s]?this._lvTab[s].push(i):this._lvTab[s]=[i]}},n.prototype.getCfgsByEralv=function(t){return this._lvTab[t]},n.prototype.getCfgsById=function(t){return this._idDic.get(t)},i=n,e.OnlineGiftCfg=i}(modules=modules||{}),function(e){var s,i,t,n,o,a,r,l;function h(){return i.call(this)||this}s=e.onlineGift||(e.onlineGift={}),t=e.common.CustomList,n=e.config.OnlineGiftCfg,o=e.player.PlayerModel,a=laya.events.Event,r=e.monthCard.MonthCardModel,i=ui.OnLineGiftViewUI,__extends(h,i),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this,t)},h.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._showIds=new Array,this._rewardList=new Array,this._list=new t,this._list.width=610,this._list.height=873,this._list.hCount=1,this._list.spaceX=3,this._list.itemRender=s.OnlineGiftItem,this._list.x=53,this._list.y=98,this.addChild(this._list),this.createList(),this._htmlTxt=this._htmlTxt1="<span style='color:#4c5e8a;font-size: 24px'>在线时间每日凌晨</span><span style='color:#168a17;font-size: 24px'>5</span><span style='color:#4c5e8a;font-size: 24px'>点重置</span><br/>",this._htmlTxt+="<span style='color:#4c5e8a;font-size: 24px'>激活</span>",this._htmlTxt+="<span style='color:#b15315;font-size: 24px;'>月卡</span>",this._htmlTxt+="<span style='color:#4c5e8a;font-size: 24px;'>领取</span>",this._htmlTxt+="<span style='color:#b15315;font-size:36px'>双倍</span>",this._htmlTxt+="<span style='color:#4c5e8a;font-size: 24px'>签到奖励</span>",this._htmlTxt1=this._htmlTxt,this._htmlTxt1+="<span style='color:#168a17;font-size: 24px'>(已激活)</span>"},h.prototype.createList=function(){for(var t=n.instance.getCfgsByEralv(o.instance.eraLevel),e=0;e<t.length;e++)this._rewardList.push(t[e])},h.prototype.updateList=function(){for(var t=s.OnlineGiftModel.instance.UpdateRewardReply,e=s.OnlineGiftModel.instance.getOnlineRewardDic(),i=this._showIds.length=0;i<t.length;i++){var n=e.get(t[i][0]);this._showIds.push(n)}this._showIds.sort(function(t,e){if(t[1]==e[1])return t[0]-e[0];var i=1==t[1]?2:0==t[1]?1:0;return(1==e[1]?2:0==e[1]?1:0)-i}),this._list.datas=this._showIds},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.getVipBtn.on(a.CLICK,this,this.getVipHandler),GlobalData.dispatcher.on("UPDATE_ONLINE_REWARD_REPLY",this,this.updateList),GlobalData.dispatcher.on("AWARD_REPLY",this,this.awardReply),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("UPDATE_MONTH_CARD_INFO",this,this.showUI),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){e.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},h.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.getVipBtn.off(a.CLICK,this,this.getVipHandler),GlobalData.dispatcher.off("UPDATE_ONLINE_REWARD_REPLY",this,this.updateList),GlobalData.dispatcher.off("AWARD_REPLY",this,this.awardReply)},h.prototype.getVipHandler=function(){WindowManager.instance.open(100)},h.prototype.updateHtml=function(){1===r.instance.flag?this.getVipBtn.visible=!1:this.getVipBtn.visible=!0},h.prototype.awardReply=function(){var t=s.OnlineGiftModel.instance.AwardReply;0!=t&&e.common.CommonUtil.noticeError(t)},h.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateHtml(),Channel.instance.publish(2098552,null),this.updateList(),this.showUI()},h.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,0==r.instance.flag||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_04.png",this.tipsText.text="在线奖励翻倍？",this.tipsImg.pos(85,1058)},h.prototype.okBtnHandler=function(){WindowManager.instance.open(100)},l=h,s.OnlineGiftPanel=l}(modules=modules||{}),function(t){var l,e,i,n,s,o,h,a,r,c,p,u,d;function y(){return e.call(this)||this}function g(){return u.call(this)||this}l=t.sign||(t.sign={}),i=Laya.Image,n=t.common.CommonUtil,s=t.common.CustomClip,o=ui.SignViewUI,h=t.config.SignRewardCfg,a=t.monthCard.MonthCardModel,r=t.common.CustomList,c=t.bag.BaseItem,e=t.common.ItemRender,__extends(y,e),y.prototype.initialize=function(){e.prototype.initialize.call(this),this._item=new c,this._item.pos(5,5),this.addChild(this._item),this._signImage=new i,this._signImage.skin="sign/zs_qiandao_2.png",this._signImage.pos(60,6),this.addChild(this._signImage)},y.prototype.setData=function(t){this._item.dataSource=t[0],this.status=t[1]},Object.defineProperty(y.prototype,"status",{set:function(t){if(this._status!=t)switch(this._status=t,this._status){case 0:case 1:this._signImage.visible=!1;break;case 2:this._signImage.visible=!0}},enumerable:!0,configurable:!0}),p=y,u=o,__extends(g,u),g.prototype.initialize=function(){u.prototype.initialize.call(this),this._showIds=new Array,this._addCountArr=h.instance.getCfgByReward(l.SignModel.instance.eraLevel),this.centerX=0,this.centerY=0,this._addItemArray=[this.addItem0,this.addItem1,this.addItem2,this.addItem3,this.addItem4],this._list=new r,this._list.itemRender=p,this._list.hCount=5,this._list.spaceX=8,this._list.spaceY=6,this._list.width=603,this._list.height=624,this._list.x=89,this._list.y=121,this.addChild(this._list),this._htmlTxt=this._htmlTxt1="<span style='color:#4c5e8a;font-size: 24px'>签到状态每日凌晨</span><span style='color:#168a17;font-size: 24px'>5</span><span style='color:#4c5e8a;font-size: 24px'>点重置</span><br/><span style='color:#4c5e8a;font-size: 24px'>激活</span><span style='color:#b15315;font-size: 24px;'>月卡</span><span style='color:#4c5e8a;font-size: 24px;'>领取</span><span style='color:#b15315;font-size:36px'>双倍</span><span style='color:#4c5e8a;font-size: 24px'>签到奖励</span>",this._htmlTxt1+="<span style='color:#168a17;font-size: 24px'>(已激活)</span>",this._SignBtnClip=s.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._SignBtnClip),this._SignBtnClip.pos(this.signBtn.x-5,this.signBtn.y-9,!0),this._SignBtnClip.play(),this._SignBtnClip.visible=!0},g.prototype.updateItem=function(){var t=l.SignModel.instance.eraLevel,e=l.SignModel.instance.signCount,i=l.SignModel.instance.dayNumber;this._showIds.length=0;for(var n=h.instance.getCfgByLevel(t),s=0;s<31;s++)if(s<i){var o=n[s][2],a=[o[0][0],o[0][1],0,null],r=void 0;r=s<e?2:s==e&&e<=i&&(1==l.SignModel.instance.signBool||0==e)?1:0,this._showIds.push([a,r])}this._list.datas=this._showIds,e<=i&&(1==l.SignModel.instance.signBool||0==e?(this.signBtn.visible=!0,this._SignBtnClip.visible=!0):(this.signBtn.visible=!1,this._SignBtnClip.visible=!1))},g.prototype.updateHtml=function(){var t=a.instance.flag;this.getMonthBtn.visible=1!==t},g.prototype.updateAddReward=function(){var t=l.SignModel.instance.signCount,e=l.SignModel.instance.addCount,i=t/this._addCountArr[4][0];i=1<i?1:i,this.proAddSign.width=575*i;for(var n=0;n<this._addItemArray.length;n++){var s=this._addCountArr[n],o=void 0;o=s[0]<=t?-1==e.indexOf(n)?1:2:0,this._addItemArray[n].data=[s,o,n]}},g.prototype.updateSign=function(){this.updateHtml(),this.updateItem(),this.updateAddReward()},g.prototype.onEvt=function(){u.prototype.onEvt.call(this),this.onAutoClick(this.signBtn,this,this.SignBtnHandler),this.onAutoClick(this.tipsBtn,this,this.TipsHandler),this.onAutoClick(this.getMonthBtn,this,this.getMonthCardHandler),this.onAutoGlobalEvt("GET_SIGN",this,this.updateSign),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("UPDATE_MONTH_CARD_INFO",this,this.showUI),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},g.prototype.SignBtnHandler=function(){1==l.SignModel.instance.signBool&&Channel.instance.publish(2097953,null)},g.prototype.TipsHandler=function(){n.alertHelp(20005)},g.prototype.onOpened=function(){u.prototype.onOpened.call(this),this.updateSign(),this._SignBtnClip.play(),this.showUI()},g.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,0==a.instance.flag||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_04.png",this.tipsText.text="签到奖励翻倍？",this.tipsImg.pos(85,1058)},g.prototype.okBtnHandler=function(){WindowManager.instance.open(100)},g.prototype.close=function(){u.prototype.close.call(this),this._SignBtnClip.stop()},g.prototype.getMonthCardHandler=function(){WindowManager.instance.open(100)},d=g,l.SignPanel=d}(modules=modules||{}),function(y){var g,e,t,f,_,m,i,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}g=y.monthCard||(y.monthCard={}),t=ui.MonthCardViewUI,f=y.config.PrivilegeCfg,_=y.config.RechargeCfg,m=y.config.BlendCfg,i=y.common.CustomClip,n=y.common.CommonUtil,s=y.common.SimpleList,e=t,__extends(a,e),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._getWardItemlist=this.destroyElement(this._getWardItemlist),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._getWardItemlist=s.create(g.MonthCardItem,641,121,1,1,0,5),this._getWardItemlist.size(656,670),this._getWardItemlist.pos(40,320,!0),this.addChild(this._getWardItemlist),n.setHTMLPro(this.tipTxt,"#3d5981","SimHei",22,"center"),this.tipTxt.style.leading=2,this.tipTxt.mouseEnabled=!1,this._btnClip=i.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.buyBtn.x-5,this.buyBtn.y-10),g.MonthCardModel.instance.MonthCardInfoReply||(y.loading.LoadingCtrl.instance.showLoading(100),GlobalData.dispatcher.once("GET_MONTH_CARD_INFO_REPLY",this,function(){y.loading.LoadingCtrl.instance.hideLoading(100)}))},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.buyClickHandler),this.onAutoGlobalEvt("GET_MONTH_CARD_INFO_REPLY",this,this.update),this.onAutoGlobalEvt("UPDATE_MONTH_CARD_INFO",this,this.update),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){y.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},a.prototype.close=function(){e.prototype.close.call(this),i.thisStop(this._btnClip)},a.prototype.buyClickHandler=function(){if(g.MonthCardModel.instance.MonthCardInfoReply){var t=_.instance.getRecharCfgByIndex(1);PlatParams.askPay(t[0],t[2])}},a.prototype.update=function(){var t=g.MonthCardModel.instance.MonthCardInfoReply;if(!t)return this.tipTxt.visible=this.img2.visible=!1,void this.removeChild(this._getWardItemlist);this.tipTxt.visible=this.img2.visible=!0,this.addChild(this._getWardItemlist);var e=f.instance.getCfgByType(101),i=_.instance.getRecharCfgByIndex(1)[6][0],n=e[1];if(0===t[0]){this.img1.visible=!0,this.img2.visible=!1,this.img3.visible=!0;for(var s=0,o=n.length;s<o;s++)if(1===n[s][0]){this.tipTxt.y=1006;var a=y.redBag.RedBagUtils.getIdAndCondByMoney(1006,1);y.redBag.RedBagUtils.getActionopen()?this.tipTxt.innerHTML='现在购买立即获得<span style="color:#168b17">'+n[s][2]+"&nbsp;</span><img src='common/icon_tongyong_2.png'/>、<span style=\"color:#168b17\">"+i[1]+"&nbsp;</span><img src='common/shenghuyu.png'/>可发一次<span style=\"color:#168b17\">"+a+'元宝</span>红包 <br/><span style="color:#168b17">(赠送仙玉不计入每日仙玉获取上限)</span>':this.tipTxt.innerHTML='现在购买立即获得<span style="color:#168b17">'+n[s][2]+"&nbsp;</span><img src='common/icon_tongyong_2.png'/>、<span style=\"color:#168b17\">"+i[1]+"&nbsp;</span><img src='common/shenghuyu.png'/><br/><span style=\"color:#168b17\">(赠送仙玉不计入每日仙玉获取上限)</span>";break}var r=_.instance.getRecharCfgByIndex(1);this.buyBtn.label=r[2]+"元抢购",this.buyBtn.visible=this._btnClip.visible=!0,this._btnClip.play()}else{this.img1.visible=!1,this.img2.visible=!0,this.img3.visible=!1;var l=[],h=[];for(s=0,o=t[3].length;s<o;s++)2===t[3][s]?l.push([s,t[3][s]]):h.push([s,t[3][s]]);l=h.concat(l),this._getWardItemlist.datas=l;var c=0;for(s=0,o=n.length;s<o;s++)if(0===n[s][0]){c=n[s][2];break}var p=2===t[3][30-t[2]]?1:0,u=t[1];if(0<u){var d=30*u+t[2];this.tipTxt.innerHTML='剩余1个月零<span style="color:#168A17">'+t[2]+'天</span>，可领<span style="color:#168A17">'+(d-p)*c+"</span>元宝<br/>(当前月卡结束后自动激活下个月卡)",this.tipTxt.y=1064,this.buyBtn.visible=this._btnClip.visible=!1,this._btnClip.stop()}else d=t[2],m.instance.getCfgById(10901)[1][0]<d?(this.tipTxt.innerHTML='剩余<span style="color:#168A17">'+d+'天</span>，可领<span style="color:#168A17">'+(d-p)*c+"</span>元宝",this.tipTxt.y=1064,this.buyBtn.visible=this._btnClip.visible=!1,this._btnClip.stop()):(this.tipTxt.innerHTML='剩余<span style="color:#FF3E3E">'+d+'天</span>，可领<span style="color:#168A17">'+(d-p)*c+'</span>元宝<span style="color:#FF3E3E">(月卡即将到期)</span>',this.tipTxt.y=1032,this.buyBtn.visible=this._btnClip.visible=!0,this._btnClip.play(),this.buyBtn.label="续费")}},o=a,g.MonthCardPanel=o}(modules=modules||{}),function(e){var h,i,t,n,l,c,s,o,a,r,p,u;function d(){return i.call(this)||this}h=e.first_pay||(e.first_pay={}),t=ui.FirstPayUI,n=e.config.FirstPayCfg,l=e.bag.BaseItem,c=e.config.RechargeCfg,s=e.common.CustomClip,o=e.common.AvatarClip,a=e.config.ExteriorCfg,r=e.notice.SystemNoticeManager,p=e.common.BtnGroup,i=t,__extends(d,i),d.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),i.prototype.destroy.call(this)},d.prototype.initialize=function(){i.prototype.initialize.call(this),this._itemTab=[],this._btnTab=new p,this._btnTab.setBtns(this.btn1,this.btn2,this.btn3),this._btnTab.selectedIndex=h.FirstPayModel.instance.showDay-1,this.closeOnSide=!1,this._cfg=n.instance.getCfgById(1),this._imgStrs=["first_pay/txt_sc_01.png","first_pay/txt_sc_02.png","first_pay/txt_sc_04.png"],this._rpTab=[this.rp1,this.rp2,this.rp3];for(var t=0;t<this._rpTab.length;t++)this._rpTab[t].visible=!1;CommonUtil.setHTMLPro(this.timeHtml,"#50ff28","SimHei",22,"center"),this.creatItems(this._cfg,h.FirstPayModel.instance.time-1),this.creatEffect(),this._modelClip=o.create(1024,1024,1024),this.addChildAt(this._modelClip,2),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5},d.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoEvt(this._btnTab,"change",this,this.changeHandler),this.onAutoGlobalEvt("FIRST_PAY_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FIRST_PAY_UPDATE_TIME",this,this.updateView)},d.prototype.changeHandler=function(){this.activityHandler(),this.updateView()},d.prototype.offEvt=function(){i.prototype.offEvt.call(this),null!=this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),Laya.timer.clear(this,this.activityHandler)},d.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnClip.play(),this.changeHandler(),this.tipTxt.visible=!1,this._btnTab.selectedIndex=h.FirstPayModel.instance.showDay-1;var t=e.redBag.RedBagUtils.getIdAndCondByMoney(1001,110);this.tipsHtml.visible=e.redBag.RedBagUtils.getActionopen(),this.tipsHtml.innerHTML="<span style='color:#4c5e8a;font-size:22px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:22px;font-family:SimHei;'>"+t+"元宝</span><span style='color:#4c5e8a;font-size:22px;font-family:SimHei;'>红包</span>",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)},d.prototype.activityHandler=function(){var t=1===h.FirstPayModel.instance.giveState&&h.FirstPayModel.instance.time<3&&h.FirstPayModel.instance.time<this._btnTab.selectedIndex+1&&-1===h.FirstPayModel.instance.days.indexOf(this._btnTab.selectedIndex+1),e=864e5*(this._btnTab.selectedIndex-h.FirstPayModel.instance.time);if(0<h.FirstPayModel.instance.toDayEndTm+e&&t){var i=CommonUtil.timeStampDDHHMMToHHMMSS(h.FirstPayModel.instance.toDayEndTm+e+GlobalData.serverTime);this.timeHtml.innerHTML=i+"<span style='color:#FFEC7C'>后可领取 </span>",this.timeHtml.visible=!0}else this.timeHtml.visible=!1},d.prototype.updateView=function(){if(this._cfg){var t=this._btnTab.selectedIndex;this.creatItems(this._cfg,t),this.creatModel();var e=this._cfg[14],i=this._cfg[12][t];this.tipTxt.text="获得"+i+"元宝",this.tipTxt.visible=!!i;var n=c.instance.getRecharCfgByIndex(110)[2];this.power.value=this._cfg[5][t].toString();var s=this._rpTab.length;if(0===h.FirstPayModel.instance.giveState){PlayerModel.instance.level>=e?this.sureBtn.label="充值任意金额":this.sureBtn.label="充值"+n+"元";for(var o=0;o<s;o++)this._rpTab[o].visible=!1;this.receivedImg.visible=!1,this.sureBtn.visible=this._btnClip.visible=!0,this._btnClip.play()}else if(1===h.FirstPayModel.instance.giveState){this.sureBtn.label="领取";var a=h.FirstPayModel.instance.days,r=this._btnTab.selectedIndex+1;-1===a.indexOf(r)?(h.FirstPayModel.instance.time<r?(this._btnClip.visible=!1,this._btnClip.stop()):(this._btnClip.visible=!0,this._btnClip.play()),this.receivedImg.visible=!1,this.sureBtn.visible=!0):(this._btnClip.visible=!1,this._btnClip.stop(),this.receivedImg.visible=!0,this.sureBtn.visible=!1);var l=this._rpTab.length;for(o=0;o<l;o++)this._rpTab[o].visible=h.FirstPayModel.instance.time>=o+1&&-1===a.indexOf(o+1)}else if(2===h.FirstPayModel.instance.giveState)for(this._btnClip.visible=!1,this._btnClip.stop(),this.receivedImg.visible=!0,this.sureBtn.visible=!1,o=0;o<s;o++)this._rpTab[o].visible=!1;this.mscbg1.skin=0===t?"first_pay/txt_sc_05.png":"first_pay/txt_sc_03.png",this.mscbg2.skin=this._imgStrs[t]}},d.prototype.creatItems=function(t,e){if(0<this._itemTab.length){for(var i=0;i<this._itemTab.length;i++)this._itemTab[i].removeSelf(),this._itemTab[i].destroy(),this._itemTab[i]=null;this._itemTab=[]}var n=h.FirstPayModel.instance.arrChange2arr(t[2])[this._btnTab.selectedIndex];if(n){var s=.5*n.length,o=100*s+10*(s-1),a=(this.width-o)/2;for(i=0;i<.5*n.length;i++){var r=new l;r.nameVisible=!0,r.pos(2+a+110*i,742),this.addChild(r),this._itemTab.push(r),r.dataSource=[n[2*i],n[2*i+1],0,null],r._nameTxt.visible=!1}}},d.prototype.creatEffect=function(){this._btnClip=s.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-10),this._btnClip.visible=!0},d.prototype.creatModel=function(){var t=this._cfg[4][3*this._btnTab.selectedIndex],e=this._cfg[4][3*this._btnTab.selectedIndex+2],i=a.instance.getCfgById(t);this._modelClipTween&&this._modelClipTween.stop(),this._modelClip.reset(t),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.centerX=0,this._modelClip.rotation=0===this._btnTab.selectedIndex?-15:0,this._modelClip.avatarScale=i[10]?i[10]:1,this._modelClip.avatarRotationX=i[6],this._modelClip.avatarRotationY=i[7],this._modelClip.avatarY=i[9],this._modelClip.avatarX=i[8],this._modelClip.y=1===this._btnTab.selectedIndex?580:600,this._modelClip.x=0===this._btnTab.selectedIndex?390:370,this.observationItem.data=[[this._modelClip,Math.round(t/1e3)]],null!=this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),1==e&&(this._modelClipTween?this._modelClipTween.to({y:this._modelClip.y-10},1e3).start().yoyo(!0).repeat(99999999):this._modelClipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-10},1e3).start().yoyo(!0).repeat(99999999))},d.prototype.sureBtnHandler=function(){if(1==h.FirstPayModel.instance.giveState)h.FirstPayModel.instance.time<this._btnTab.selectedIndex+1?r.instance.addNotice("未达到领取时间",!0):h.FirstPayCtrl.instance.getFirstPayReward(this._btnTab.selectedIndex+1);else{var t=c.instance.getRecharCfgByIndex(110);PlatParams.askPay(t[0],t[2])}},u=d,h.FirstPayPanel=u}(modules=modules||{}),function(s){var r,e,t,i,o,n,a,l,h,c;function p(){var t=null!==e&&e.apply(this,arguments)||this;return t.getState=0,t.vipLevel=0,t.grow=0,t.arr=[],t}r=s.invest_reward||(s.invest_reward={}),t=ui.InvestLoginRewardUI,i=s.common.CustomList,o=s.config.PrivilegeCfg,n=s.notice.SystemNoticeManager,a=s.common.CustomClip,l=s.vip.VipModel,h=s.common.CommonUtil,e=t,__extends(p,e),p.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},p.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.scrollDir=1,this._list.itemRender=r.InvestRewardItem,this._list.vCount=7,this._list.hCount=1,this._list.width=640,this._list.height=703,this._list.x=0,this._list.y=0,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0,this.setItem(0),this._btnClip=a.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this.investBtn,-5,-10,.8)},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.investBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("INVEST_REWARD_UPDATE",this,this._updateView)},p.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setItem(0),this._updateView(),this._btnClip.play()},p.prototype.close=function(){e.prototype.close.call(this),this._btnClip.stop()},p.prototype._updateView=function(){this.setBtnSure(),this.arr=s.config.InvestRewardCfg.instance.getCfgBytype(0),this.arr.sort(this.sortFunc.bind(this)),this._list.datas=this.arr},p.prototype.setItem=function(t){if(this.arr=s.config.InvestRewardCfg.instance.getCfgBytype(0),this._cfgItem=this.arr[this.arr.length-1],this.grow=this._cfgItem[3],this.growText.value=""+this._cfgItem[3],this.giveText.value=""+this._cfgItem[5],0==t){var e=o.instance.getMinLvMaxLvByType(10);this.vipLevel=e[0]}else if(1==t){var i=o.instance.getMinLvMaxLvByType(11);this.vipLevel=i[0]}else{var n=o.instance.getMinLvMaxLvByType(12);this.vipLevel=n[0]}this.vipText.text="SVIP"+this.vipLevel+"可投资",this.rewardText.value=""+this._cfgItem[6]},p.prototype.setBtnSure=function(){var t=r.InvestRewardModel.instance.stateList,e=PlayerModel.instance.ingot,i=l.instance.vipLevel,n=t[0];n&&(this.getState=n[1]),0==this.getState?(this.investBtn.visible=!0,this.receivedImg.visible=!1):(this.investBtn.visible=!1,this.receivedImg.visible=!0),e>=this.grow&&i>=this.vipLevel?(this._btnClip.visible=!0,this.vipText.visible=!1):this._btnClip.visible=!1,i>=this.vipLevel&&(this.vipText.visible=!1)},p.prototype.sureBtnHandler=function(){var t=PlayerModel.instance.ingot,e=l.instance.vipLevel;if(t>=this.grow&&e>=this.vipLevel)r.InvestRewardCtrl.instance.getBuyInvestReward([0]),this._btnClip.visible=!0;else if(e<this.vipLevel){this._btnClip.visible=!1;var i=Handler.create(this,h.gotoVIP);h.alert("温馨提示","立即投资需要SVIP"+this.vipLevel+",是否立即前往提升SVIP",[i])}else t<this.grow?(n.instance.addNotice("元宝不足，投资失败！",!0),this._btnClip.visible=!1):(this._btnClip.visible=!1,n.instance.addNotice("投资失败！",!0))},p.prototype.sortFunc=function(t,e){var i=r.InvestRewardModel.instance.rewardList,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},c=p,r.InvestLoginPanel=c}(modules=modules||{}),function(s){var r,e,t,o,i,n,a,l,h,c;function p(){var t=null!==e&&e.apply(this,arguments)||this;return t.getState=0,t.vipLevel=0,t.grow=0,t.arr=[],t}r=s.invest_reward||(s.invest_reward={}),t=ui.InvestRecruitRewardUI,o=s.config.PrivilegeCfg,i=s.common.CustomList,n=s.notice.SystemNoticeManager,a=s.common.CustomClip,l=s.vip.VipModel,h=s.common.CommonUtil,e=t,__extends(p,e),p.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),this._cfgItem=null,this.arr.length=0,this.arr=null,e.prototype.destroy.call(this,t)},p.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.scrollDir=1,this._list.itemRender=r.InvestRewardItem,this._list.vCount=7,this._list.hCount=1,this._list.width=640,this._list.height=703,this._list.x=0,this._list.y=0,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0,this.setItem(1),this._btnClip=a.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.investBtn.x-5,this.investBtn.y-10,.8)},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.investBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("INVEST_REWARD_UPDATE",this,this._updateView)},p.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setItem(1),this._updateView()},p.prototype.close=function(){e.prototype.close.call(this),a.thisStop(this._btnClip)},p.prototype.setItem=function(t){if(this.arr=s.config.InvestRewardCfg.instance.getCfgBytype(t),this._cfgItem=this.arr[this.arr.length-1],this.grow=this._cfgItem[3],this.growText.value=""+this._cfgItem[3],this.giveText.value=""+this._cfgItem[5],0==t){var e=o.instance.getMinLvMaxLvByType(10);this.vipLevel=e[0]}else if(1==t){var i=o.instance.getMinLvMaxLvByType(11);this.vipLevel=i[0]}else{var n=o.instance.getMinLvMaxLvByType(12);this.vipLevel=n[0]}this.vipText.text="SVIP"+this.vipLevel+"可投资",this.rewardText.value=""+this._cfgItem[6]},p.prototype._updateView=function(){this.setBtnSure(),this.arr=s.config.InvestRewardCfg.instance.getCfgBytype(1),this.arr.sort(this.sortFunc.bind(this)),this._list.datas=this.arr},p.prototype.setBtnSure=function(){var t=r.InvestRewardModel.instance.stateList,e=PlayerModel.instance.ingot,i=l.instance.vipLevel,n=t[1];n&&(this.getState=n[1]),a.thisPlay(this._btnClip),0==this.getState?(this.investBtn.visible=!0,this.receivedImg.visible=!1):(this.investBtn.visible=!1,a.thisStop(this._btnClip),this.receivedImg.visible=!0),e>=this.grow&&i>=this.vipLevel?this.vipText.visible=!1:a.thisStop(this._btnClip),i>=this.vipLevel&&(this.vipText.visible=!1)},p.prototype.sureBtnHandler=function(){var t=PlayerModel.instance.ingot,e=l.instance.vipLevel;if(t>=this.grow&&e>=this.vipLevel)r.InvestRewardCtrl.instance.getBuyInvestReward([1]);else if(e<this.vipLevel){a.thisStop(this._btnClip);var i=Handler.create(this,h.gotoVIP);h.alert("温馨提示","立即投资需要SVIP"+this.vipLevel+",是否立即前往提升SVIP",[i])}else t<this.grow?(n.instance.addNotice("元宝不足，投资失败！",!0),a.thisStop(this._btnClip)):n.instance.addNotice("投资失败！",!0)},p.prototype.sortFunc=function(t,e){var i=r.InvestRewardModel.instance.rewardList,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},c=p,r.InvestRecruitPanel=c}(modules=modules||{}),function(t){var r,e,i,n,s,o,a,l,h,c,p;function u(){var t=null!==e&&e.apply(this,arguments)||this;return t.getState=0,t.vipLevel=0,t.grow=0,t.arr=[],t}r=t.invest_reward||(t.invest_reward={}),i=ui.InvestLoginRewardUI,n=t.common.CustomList,s=t.config.PrivilegeCfg,o=t.notice.SystemNoticeManager,a=t.vip.VipModel,l=t.common.CustomClip,h=t.config.InvestRewardCfg,c=t.common.CommonUtil,e=i,__extends(u,e),u.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),this._cfgItem=null,this.arr.length=0,this.arr=null,e.prototype.destroy.call(this,t)},u.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.itemRender=r.InvestRewardItem,this._list.vCount=7,this._list.hCount=1,this._list.width=640,this._list.height=703,this._list.x=0,this._list.y=0,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0,this.setItem(2),this._btnClip=l.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.investBtn.x-5,this.investBtn.y-10,.8)},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.investBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("INVEST_REWARD_UPDATE",this,this._updateView)},u.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setItem(2),this._updateView()},u.prototype._updateView=function(){this.setBtnSure(),this.arr=h.instance.getCfgBytype(2),this.arr.sort(this.sortFunc.bind(this)),this._list.datas=this.arr},u.prototype.setItem=function(t){if(this.arr=h.instance.getCfgBytype(t),this._cfgItem=this.arr[this.arr.length-1],this.grow=this._cfgItem[3],this.growText.value=""+this._cfgItem[3],this.giveText.value=""+this._cfgItem[5],0==t){var e=s.instance.getMinLvMaxLvByType(10);this.vipLevel=e[0]}else if(1==t){var i=s.instance.getMinLvMaxLvByType(11);this.vipLevel=i[0]}else{var n=s.instance.getMinLvMaxLvByType(12);this.vipLevel=n[0]}this.vipText.text="SVIP"+this.vipLevel+"可投资",this.rewardText.value=""+this._cfgItem[6]},u.prototype.setBtnSure=function(){var t=r.InvestRewardModel.instance.stateList,e=PlayerModel.instance.ingot,i=a.instance.vipLevel;l.thisPlay(this._btnClip);var n=t[2];n&&(this.getState=n[1]),0==this.getState?(this.investBtn.visible=!0,this.receivedImg.visible=!1):(this.investBtn.visible=!1,l.thisStop(this._btnClip),this.receivedImg.visible=!0),e>=this.grow&&i>=this.vipLevel&&0==this.getState?(l.thisPlay(this._btnClip),this.vipText.visible=!1):l.thisStop(this._btnClip),i>=this.vipLevel&&(this.vipText.visible=!1)},u.prototype.sureBtnHandler=function(){var t=PlayerModel.instance.ingot,e=a.instance.vipLevel;if(t>=this.grow&&e>=this.vipLevel)r.InvestRewardCtrl.instance.getBuyInvestReward([2]);else if(e<this.vipLevel){var i=Handler.create(this,c.gotoVIP);c.alert("温馨提示","立即投资需要SVIP"+this.vipLevel+",是否立即前往提升SVIP",[i])}else t<this.grow?o.instance.addNotice("元宝不足，投资失败！",!0):o.instance.addNotice("投资失败！",!0)},u.prototype.sortFunc=function(t,e){var i=r.InvestRewardModel.instance.rewardList,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},p=u,r.InvestGrowthPanel=p}(modules=modules||{}),function(r){var i,l,t,s,h,n,a,c,o,p,u,d,e;function y(){var t=l.call(this)||this;return t._isAniIng=!1,t._isTen=!1,t._isUpdateBtnClickNum=500,t._isUpdateBtnClick=!0,t._bolll=!1,t._bolllPos=!1,t._index=0,t._index1=0,t}i=r.pay_reward||(r.pay_reward={}),t=ui.PayRewardViewUI,s=laya.maths.Point,h=r.common.ProgressBarCtrl,n=r.config.PayRewardCfg,a=r.config.payRewardWeightCfg,c=r.pay_reward.PayRewardModel,o=r.pay_reward.PayRewardCtrl,p=r.common.CustomClip,u=r.notice.SystemNoticeManager,d=r.config.BlendCfg,l=t,__extends(y,l),y.prototype.destroy=function(t){void 0===t&&(t=!0),this._oneBtnBtnClip=this.destroyElement(this._oneBtnBtnClip),this._tenBtnBtnClip=this.destroyElement(this._tenBtnBtnClip),this._prizeEffect=this.destroyElement(this._prizeEffect),this._showItem=this.destroyElement(this._showItem),this._clipArr=this.destroyElement(this._clipArr),this._proCtrl.destroy(),this._proCtrl=null,l.prototype.destroy.call(this,t)},y.prototype.initialize=function(){l.prototype.initialize.call(this),this._isReward=!1,this.centerX=0,this.centerY=0,this._showItem=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11,this.item12],this._proCtrl=new h(this.blessImg,380,this.blessTxt),this._oneBtnBtnClip=p.create("assets/effect/btn_light.atlas","btn_light",16),this._oneBtnBtnClip.setProperty(this,this.oneBtn.x-6,this.oneBtn.y-8),this._tenBtnBtnClip=p.create("assets/effect/btn_light.atlas","btn_light",16),this._tenBtnBtnClip.setProperty(this,this.tenBtn.x-6,this.tenBtn.y-8),this._prizeEffect=p.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._prizeEffect,19),this._prizeEffect.pos(488,767,!0),this._sevTextArr=new Array,this._sevStringArr=new Array,this.severListLen=7;for(var t=0;t<this.severListLen;t++){var e=new laya.html.dom.HTMLDivElement;e.width=417,e.style.height=25,e.pos(0,25*t),e.style.fontFamily="SimHei",e.style.fontSize=20,this._sevTextArr.push(e),this.severPanel.addChild(e),this.probabilityTipsTxt.underline=!0}for(this.updateSeverList(),this._clipArr=new Array,t=0;t<this._showItem.length;t++){var i=new Array,n=void 0;if(0==t||6==t){(n=new p).setProperty(this._showItem[t],-75,-75),n.skin="assets/effect/item_effect3.atlas";for(var s=1;s<16;s++){var o="item_effect3/"+s+".png";i.push(o)}n.frameUrls=i,n.durationFrame=6}else(n=p.create("assets/effect/item_effect2.atlas","item_effect2",16,!0,6)).setProperty(this._showItem[t],-14,-22);n.name="clip",this._clipArr.push(n)}CommonUtil.setHTMLPro(this.StatementHTML,"#b15315","SimHei",24,"center");var a=d.instance.getCfgById(15501)[1][0];this.StatementHTML.innerHTML="每充值"+a+"元获得1点财富值,财富值<span style='color:#168a17'>每日0点重置</span>"},y.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.oneBtn,this,this.xunBaoHandler,[0]),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.caiQiReceiveBtn,this,this.caiQiReceiveBtnHandler),this.onAutoClick(this.myRecordBtn,this,this.myRecordBtnHandler),this.onAutoClick(this.probabilityTipsTxt,this,this.probabilityHandler),this.onAutoGlobalEvt("PAYREWARD_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("PAYREWARD_RUNREPLY",this,this.PayRewardRunReply),this.onAutoGlobalEvt("PAYREWARD_OPENRECORD",this,this.openMyRecord),this.onAutoGlobalEvt("PAYREWARD_BROADCAST_LIST",this,this.updateSeverList),this.onAutoGlobalEvt("PAYREWARD_SHOWHTML",this,this.showHtml)},y.prototype.probabilityHandler=function(){var t=d.instance.getCfgById(66006)[2][0];WindowManager.instance.open(443,["概率公示",t,695])},y.prototype.onOpened=function(){l.prototype.onOpened.call(this),this._bolll=!1,this._bolllPos=!1,this._index=0,this._index1=0,this._isAniIng=!1,this._isUpdateBtnClick=!0,o.instance.getPayRewardInfo(),o.instance.GetPayRewardServerBroadcast(),this.showReward(),this.changproCtrl(),this.changDrawNum()},y.prototype.desDoryArr=function(){if(this._htmlArr){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&(e.closeTimer(),e.visible=!1,e.removeSelf(),e.destroy())}this._htmlArr.length=0,this._htmlArr=null}},y.prototype.setARR=function(){if(!this._htmlArr){this._htmlArr=new Array;for(var t=0;t<20;t++){var e=new i.HtmlReward(417,20,this._htmlArr);this.severPanel.addChild(e),e.name="数据："+t,this._htmlArr.push(e)}}},y.prototype.showHtml=function(){if(this._sevStringArr&&0<this._sevStringArr.length){this.setARR();var t=this._htmlArr[this._index];this._index=this._index+1,this._index=this._index>this._htmlArr.length-1?0:this._index,t&&(t.setText(134,126,this.getSevStringArr()),this._bolllPos||(this._bolllPos=!0,Laya.timer.clear(this,this.updateList),Laya.timer.frameLoop(1,this,this.updateList)))}},y.prototype.getSevStringArr=function(){var t=this._sevStringArr[this._index1];return this._index1=this._index1+1,this._index1=this._index1>this._sevStringArr.length-1?0:this._index1,t},y.prototype.updateList=function(){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&e.updateList()}},y.prototype.updateSeverList=function(){var t=c.instance.svrBroadcastList;if(null!=t&&0<t.length){0<this._sevStringArr.length&&(this._sevStringArr.length=0),t.reverse();for(var e=0;e<10;e++)if(t[e]){var i=t[e][0],n=t[e][1],s=r.common.CommonUtil.getNameByItemId(n),o=t[e][2],a="<span style='color:#1F304d;'>天赐鸿福,</span>";a+="<span style='color:rgb(13,121,255);'>"+i+"</span>",a+="<span style='color:#1F304d;'>获得了</span>",a+="<span style='color:"+r.common.CommonUtil.getColorById(n)+";'>"+s+"*"+o+"</span>",this._sevStringArr.push(a)}0<this._sevStringArr.length&&!this._bolll&&(this._bolll=!0,this.showHtml())}},y.prototype.updateUI=function(){this.changproCtrl(),this.changDrawNum()},y.prototype.PayRewardRunReply=function(){var t=c.instance.getNoteList();if(1<t.length)WindowManager.instance.open(196,t);else{var e=new s(300,350),i=[t[0][0],e,this.height];this._arr=i;var n=t[t.length-1][2];this.showInSmoking(n,!1)}},y.prototype.showInSmoking=function(t,e){for(var i=0,n=a.instance.getWeightCfgs(),s=0;s<n.length;s++){var o=n[s][0];if(this._showItem[s]&&t==o){i=o-1;break}}this.startAni(i,e)},y.prototype.startAni=function(t,e){void 0===e&&(e=!1),this._maxSpeed=10,this._startSpeed=130,this._minSpeed=130,this._quanNum=3,this._targetIdnex=t,this._nowTargetIdnex=5,this._startdnex=this._nowTargetIdnex,this._isAniIng=!0,this._isTen=e,Laya.timer.clear(this,this.ani),this.ani()},y.prototype.ani=function(){var t=a.instance.getWeightCfgs().length-1;this._nowTargetIdnex+=1,this._nowTargetIdnex=this._nowTargetIdnex>t?0:this._nowTargetIdnex,this._nowTargetIdnex===this._startdnex&&--this._quanNum;var e=this._showItem[this._nowTargetIdnex];if(e){var i=e.width/2+e.x,n=e.height/2+e.y;this.xuanZhonImg.pos(i,n),this.xuanZhonImg.visible=!0}if(0<this._quanNum)this._startSpeed-=10,this._startSpeed=(this._startSpeed,this._maxSpeed,this._maxSpeed),Laya.timer.clear(this,this.ani),Laya.timer.once(this._startSpeed,this,this.ani);else if(0==this._quanNum)this._startSpeed+=10,this._startSpeed=this._startSpeed>this._minSpeed?this._minSpeed:this._startSpeed,Laya.timer.clear(this,this.ani),Laya.timer.once(this._startSpeed,this,this.ani);else{if(this._nowTargetIdnex===this._targetIdnex){if(Laya.timer.clear(this,this.ani),this._isAniIng=!1,this._isTen){var s=c.instance.getNoteList();WindowManager.instance.open(196,s)}else this._arr&&(GlobalData.dispatcher.event("PAY_REWARD_EFFECT",[this._arr]),CommonUtil.delayedPutInBag());return}Laya.timer.clear(this,this.ani),6<this._targetIdnex&&this._targetIdnex<=t?this._startSpeed+=20:this._startSpeed+=10,Laya.timer.once(this._startSpeed,this,this.ani)}},y.prototype.showReward=function(){for(var t=a.instance.getWeightCfgs(),e=0;e<t.length;e++){var i=t[e][1],n=t[e][2],s=this._showItem[e];if(s){s.dataSource=[i,n,0,null],s.visible=!0,s.isbtnClipIsPlayer=!1;var o=s.getChildByName("clip");o.play(),o.visible=!0}}this.instructionsText.text="每充值"+c.instance.money+"元可免费抽奖一次"},y.prototype.changproCtrl=function(){var t=c.instance.getgRade(),e=n.instance.get_condition(t[0]),i=t[1];this._proCtrl.maxValue=e,this._proCtrl.value=c.instance.caifu,1==i?(this._isReward=!0,p.thisPlay(this._prizeEffect)):(this._isReward=!1,p.thisStop(this._prizeEffect))},y.prototype.changDrawNum=function(){var t=c.instance.rewardCount,e=0==t?"#ff3e3e":"#50ff28";this.drawNum.color=e,this.drawNum.text=""+t;var i=this.Text1.textWidth+this.drawNum.textWidth+this.Text2.textWidth,n=(this.width-i)/2;this.Text1.x=n,this.drawNum.x=this.Text1.x+this.Text1.textWidth,this.Text2.x=this.drawNum.x+this.drawNum.textWidth,0==t?(p.thisStop(this._oneBtnBtnClip),p.thisStop(this._tenBtnBtnClip)):0<t&&t<10?(p.thisPlay(this._oneBtnBtnClip),p.thisStop(this._tenBtnBtnClip)):(p.thisPlay(this._oneBtnBtnClip),p.thisPlay(this._tenBtnBtnClip))},y.prototype.xunBaoHandler=function(t){if(this._isUpdateBtnClick){this._isUpdateBtnClick=!1,Laya.timer.once(this._isUpdateBtnClickNum,this,this.chuang_isUpdateBtnClick);var e=c.instance.rewardCount;if(0==t){if(0==e)return void u.instance.addNotice("抽奖次数不足",!0)}else if(e<10)return void u.instance.addNotice("抽奖次数不足",!0);this._isAniIng||o.instance.payRewardRun(t)}else u.instance.addNotice("操作过于频繁",!0)},y.prototype.chuang_isUpdateBtnClick=function(){this._isUpdateBtnClick=!0},y.prototype.caiQiReceiveBtnHandler=function(){this._isReward?o.instance.getPayRewardReward():WindowManager.instance.open(197,0)},y.prototype.myRecordBtnHandler=function(){o.instance.getPayRewardNotes()},y.prototype.openMyRecord=function(){var t=c.instance.PayRewardNoteList;t&&0<t.length?WindowManager.instance.open(198,t):u.instance.addNotice("暂无记录",!0)},y.prototype.close=function(){l.prototype.close.call(this),Laya.timer.clear(this,this.updateList),Laya.timer.clear(this,this.ani),Laya.timer.clear(this,this.chuang_isUpdateBtnClick),this.desDoryArr(),p.thisStop(this._oneBtnBtnClip),p.thisStop(this._tenBtnBtnClip),p.thisStop(this._prizeEffect),CommonUtil.delayedPutInBag()},e=y,i.PayRewardPanel=e}(modules=modules||{}),function(t){var n,s,r,e,i,o,a,l;function h(){return s.call(this)||this}n=t.pay_reward||(t.pay_reward={}),r=laya.maths.Point,e=laya.ui.List,i=t.bag.BagItem,o=t.common.CustomClip,a=t.notice.SystemNoticeManager,s=ui.PayRewardAlertUI,__extends(h,s),h.prototype.destroy=function(){this._tenBtnBtnClip&&(this._tenBtnBtnClip.removeSelf(),this._tenBtnBtnClip.destroy(),this._tenBtnBtnClip=null),s.prototype.destroy.call(this)},h.prototype.initialize=function(){s.prototype.initialize.call(this),this._showIds=new Array,this._list=new e,this._list.vScrollBarSkin="",this._list.width=565,this._list.height=259,this._list.repeatX=5,this._list.spaceX=16.25,this._list.spaceY=8,this._list.itemRender=i,this._list.x=48,this._list.y=70,this.addChild(this._list)},h.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.changDrawNum(),CommonUtil.delayedButNoPutInBag()},h.prototype.close=function(t,e){s.prototype.close.call(this,t,e),this._tenBtnBtnClip.stop(),this._tenBtnBtnClip.visible=!1,CommonUtil.delayedButNoPutInBag()},h.prototype.playEffect=function(t){for(var e=t,i=0;i<e.length;i++){var n=this._list.cells[i].x+this._list.cells[i].width/2,s=this._list.cells[i].y+this._list.cells[i].height/2,o=new r(n,s),a=[e[i][0],o,this.height];GlobalData.dispatcher.event("PAY_REWARD_EFFECT",[a])}},h.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t);for(var e=this._showIds.length=0;e<t.length;e++){var i=[t[e][0],t[e][1],0,null];this._showIds.push(i)}this._list.array=this._showIds,this._list.scrollTo(0),this.playEffect(t)},h.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoGlobalEvt("PAYREWARD_UPDATE",this,this.changDrawNum),this._tenBtnBtnClip=o.create("assets/effect/btn_light.atlas","btn_light",16),this._tenBtnBtnClip.setProperty(this,230,394)},h.prototype.xunBaoHandler=function(t){var e=n.PayRewardModel.instance.rewardCount;if(0==t){if(0==e)return void a.instance.addNotice("抽奖次数不足",!0);n.PayRewardCtrl.instance.payRewardRun(t),this.close()}else{if(e<10)return void a.instance.addNotice("抽奖次数不足",!0);n.PayRewardCtrl.instance.payRewardRun(t)}},h.prototype.changDrawNum=function(){var t=n.PayRewardModel.instance.rewardCount;this.drawNum.color=0==t?"#ff3e3e":"#168a17",this.drawNum.text=""+t;var e=this.Text1.width+this.drawNum.width,i=(this.width-e)/2;this.Text1.x=i,this.drawNum.x=this.Text1.x+this.Text1.width,0==t?(this._tenBtnBtnClip.visible=!1,this._tenBtnBtnClip.stop()):0<t&&t<10?(this._tenBtnBtnClip.visible=!1,this._tenBtnBtnClip.stop()):(this._tenBtnBtnClip.visible=!0,this._tenBtnBtnClip.play())},l=h,n.PayRewardAlert=l}(modules=modules||{}),function(t){var e,i,r,n,s,o,a;function l(){return i.call(this)||this}e=t.pay_reward||(t.pay_reward={}),r=t.pay_reward.PayRewardModel,n=t.config.BlendCfg,s=t.config.PayRewardCfg,o=t.common.SimpleList,i=ui.PayRewardRankAlertUI,__extends(l,i),l.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},l.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=o.create(e.PayRewardRankItem,560,174),this._list.size(560,713),this._list.pos(48,100,!0),this.addChild(this._list)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.titleTxt.text="财富值奖励",this.updateList()},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("PAYREWARD_UPDATE",this,this.updateList)},l.prototype.overSort=function(t,e){var i=t[0],n=e[0],s=r.instance.getRewardStart(i),o=r.instance.getRewardStart(n),a=1;return s==o?a=i-n:2==s&&2!=o?a=1:2!=s&&2==o&&(a=-1),a},l.prototype.updateList=function(){var t=s.instance._cfgs;t.sort(this.overSort),this._list.datas=t,this.changDrawNum()},l.prototype.changDrawNum=function(){var t=n.instance.getCfgById(15501)[1][0];this.TipsText.text="每充值"+t+"元获得1点财富值, 财富值每日0点重置"},a=l,e.PayRewardRankAlert=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.pay_reward||(t.pay_reward={}),n=t.common.SimpleList,i=ui.PayRewardMyRecordAlertUI,__extends(o,i),o.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(e.PayRewardMyRecordItem,530,45),this._list.pos(67,109,!0),this._list.size(530,340),this.addChild(this._list)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._list.datas=t},s=o,e.PayRewardMyRecordAlert=s}(modules=modules||{}),function(e){var c,i,t,n,s;function o(){var t=i.call(this)||this;return t._activityTime=0,t._type=1,t}c=e.kuanghuan||(e.kuanghuan={}),t=e.common.CustomList,n=ui.KuangHuanLevelViewUI,i=n,__extends(o,i),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this,t)},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new t,this._list.scrollDir=1,this._list.itemRender=c.KuangHuanItem,this._list.hCount=1,this._list.width=640,this._list.height=651,this._list.x=5,this._list.y=12,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("KUANGHUAN",this,this._updateView),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("KUANGHUAN_UPDATE_TAB",this,function(){c.KuangHuanModel.instance.updateTabByPanel()})},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),1==c.KuangHuanModel.instance.openState&&(c.KuangHuanCtrl.instance.GetKuanghuanInfo(),this._updateView()),this.showUI()},o.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==e.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1040)):e.fight_talisman.FightTalismanModel.instance.state?(e.money_cat.MoneyCatModel.instance.state&&(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1040)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1044))},o.prototype.okBtnHandler=function(){if(!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen)WindowManager.instance.open(1493);else if(0==e.zhizun.ZhizunModel.instance.state)WindowManager.instance.open(351);else{if(0==e.first_pay.FirstPayModel.instance.giveState)return void WindowManager.instance.open(118);e.fight_talisman.FightTalismanModel.instance.state?e.money_cat.MoneyCatModel.instance.state||WindowManager.instance.open(381):WindowManager.instance.open(379)}},o.prototype._updateView=function(){this.updateItem()},o.prototype.updateItem=function(){for(var t=c.KuangHuanModel.instance.nodeList,e=0;e<t.length;e++)1==t[e][0]&&(this._type=t[e][0],this._activityTime=t[e][1]+GlobalData.serverTime);this._kuanghuanArr=c.KuangHuanCfg.instance.getCfgBytype(this._type),this._kuanghuanArr.sort(this.sortFunc.bind(this)),this._list.datas=this._kuanghuanArr,this.setActivitiTime()},o.prototype.setActivitiTime=function(){if(Laya.timer.clear(this,this.activityHandler),this._activityTime){var t=e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(139);this._activityTime>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")}},o.prototype.activityHandler=function(){this._activityTime>GlobalData.serverTime?this.activityText.text=""+e.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._activityTime):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},o.prototype.sortFunc=function(t,e){for(var i=c.KuangHuanModel.instance.nodeList,n=[],s={},o=0;o<i.length;o++)this._type==i[o][0]&&(n=i[o][2]);for(o=0;o<n.length;o++)s[n[o][0]]=n[o];var a=t[0],r=e[0],l=s[a]?s[a][1]:0,h=s[r]?s[r][1]:0;return(l=0===l?1:1===l?0:l)===(h=0===h?1:1===h?0:h)?a-r:l-h},s=o,c.KuangHuanLevelPanel=s}(modules=modules||{}),function(e){var c,i,t,n,s;function o(){var t=i.call(this)||this;return t._activityTime=0,t._type=2,t}c=e.kuanghuan||(e.kuanghuan={}),t=ui.KuangHuanViewUI,n=e.common.CustomList,i=t,__extends(o,i),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this,t)},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.itemRender=c.KuangHuanItem,this._list.hCount=1,this._list.width=640,this._list.height=651,this._list.x=5,this._list.y=12,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("KUANGHUAN",this,this._updateView),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("KUANGHUAN_UPDATE_TAB",this,function(){c.KuangHuanModel.instance.updateTabByPanel()})},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),1==c.KuangHuanModel.instance.openState&&(c.KuangHuanCtrl.instance.GetKuanghuanInfo(),this._updateView()),this.showUI()},o.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,e.fight_talisman.FightTalismanModel.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==e.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡"):(e.money_cat.MoneyCatModel.instance.state&&(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？"),this.tipsImg.pos(99,1040)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1044))},o.prototype.okBtnHandler=function(){0!=e.first_pay.FirstPayModel.instance.giveState?e.fight_talisman.FightTalismanModel.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==e.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):e.money_cat.MoneyCatModel.instance.state||WindowManager.instance.open(381):WindowManager.instance.open(379):WindowManager.instance.open(118)},o.prototype._updateView=function(){this.updateItem()},o.prototype.updateItem=function(){var t=c.KuangHuanModel.instance.nodeList;if(t){for(var e=0;e<t.length;e++)1!==t[e][0]&&9!==t[e][0]&&(this._type=t[e][0],this._activityTime=t[e][1]+GlobalData.serverTime);this._kuanghuanArr=c.KuangHuanCfg.instance.getCfgBytype(this._type),this._kuanghuanArr.sort(this.sortFunc.bind(this)),this._list.datas=this._kuanghuanArr,this.setActivitiTime()}},o.prototype.setActivitiTime=function(){if(Laya.timer.clear(this,this.activityHandler),this._activityTime){var t=e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(155);this._activityTime>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")}},o.prototype.activityHandler=function(){this.activityText.text=""+CommonUtil.timeStampToHHMMSS(this._activityTime),this._activityTime<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},o.prototype.sortFunc=function(t,e){for(var i=c.KuangHuanModel.instance.nodeList,n=[],s={},o=0;o<i.length;o++)this._type==i[o][0]&&(n=i[o][2]);for(o=0;o<n.length;o++)s[n[o][0]]=n[o];var a=t[0],r=e[0],l=s[a]?s[a][1]:0,h=s[r]?s[r][1]:0;return(l=0===l?1:1===l?0:l)===(h=0===h?1:1===h?0:h)?a-r:l-h},s=o,c.KuangHuanPanel=s}(modules=modules||{}),function(t){var e,i,n,s,o,r,a,l;function h(){return i.call(this)||this}e=t.day_consume_reward||(t.day_consume_reward={}),n=ui.DayConsumeRewardViewUI,s=t.common.CustomList,o=t.config.DayConsumeRewardCfg,r=t.day_consume_reward.DayConsumeRewardModel,a=t.day_consume_reward.DayConsumeRewardCtrl,i=n,__extends(h,i),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this,t)},h.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new s,this._list.scrollDir=1,this._list.itemRender=e.DayConsumeRewardItem,this._list.vCount=6,this._list.hCount=1,this._list.width=640,this._list.height=650,this._list.x=40,this._list.y=317,this.addChild(this._list),this.centerX=this.centerY=0},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("DAY_CONSUME_REWARD_UPDATE",this,this._updateView),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("SPRINT_RANK_TYPE_CHANGE",this,this.changeType)},h.prototype.onOpened=function(){i.prototype.onOpened.call(this),1==r.instance.giveState&&(a.instance.GetConsumeReward2Info(),this._updateView()),this.showUI()},h.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==t.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):(this.okBtn.visible=!1,this.wanChengImg.visible=!0,this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029))},h.prototype.okBtnHandler=function(){0!=t.first_pay.FirstPayModel.instance.giveState?t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==t.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381):WindowManager.instance.open(118)},h.prototype.sortFunc=function(t,e){var i=r.instance.rewarTable,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)-(a=0===a?1:1===a?0:a)==0?n-s:o-a},h.prototype._updateView=function(){this.setActivitiTime();var t=r.instance.serverDay;t=0==t?1:t;var e=o.instance.getCfgByServerDay(t);e.sort(this.sortFunc),this._list.datas=e},h.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},h.prototype.setActivitiTime=function(){this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)},h.prototype.activityHandler=function(){this.activityText.text=""+t.common.CommonUtil.timeStampToHHMMSS(r.instance.activityTime),r.instance.activityTime<GlobalData.serverTime&&Laya.timer.clear(this,this.activityHandler)},h.prototype.changeType=function(){this.close(),WindowManager.instance.open(this.panelId)},l=h,e.DayConsumeRewardPanel=l}(modules=modules||{}),function(i){var c,n,t,p,s,o,u,e;function a(){var t=null!==n&&n.apply(this,arguments)||this;return t._currSelectIndex=0,t}c=i.halfMonthGift||(i.halfMonthGift={}),t=ui.SevenSignUI,p=i.common.CustomClip,s=i.common.AvatarClip,o=i.config.ExteriorCfg,u=i.config.HalfMonthCfg,n=t,__extends(a,n),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._selectedItem=this.destroyElement(this._selectedItem),this._iconImgTweenJS&&(this._iconImgTweenJS.stop(),this._iconImgTweenJS=null),this._modelClipTweenJS&&(this._modelClipTweenJS.stop(),this._modelClipTweenJS=null),this._items=this.destroyElement(this._items),this._topItems=this.destroyElement(this._topItems),this._btnClip=this.destroyElement(this._btnClip),this._prizeEffect=this.destroyElement(this._prizeEffect),this._modelClip=this.destroyElement(this._modelClip),this._dayTxts=this.destroyElement(this._dayTxts),this.observationItem=this.destroyElement(this.observationItem),n.prototype.destroy.call(this,t)},a.prototype.initialize=function(){n.prototype.initialize.call(this),this._modelClip=s.create(1024,1024,1024),this.addChildAt(this._modelClip,4),this._modelClip.pos(360,430,!0),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.mouseEnabled=!1,this._currSelectIndex=-1,this.centerX=0,this.centerY=0,this.effectInit(),this._topItems=[this.baseItem1,this.baseItem2,this.baseItem3],this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7],this._dayTxts=[this.dayTxt1,this.dayTxt2,this.dayTxt3,this.dayTxt4,this.dayTxt5,this.dayTxt6,this.dayTxt7],this._dayDescArr=["第八天","第九天","第十天","十一天","十二天","十三天","十四天"];for(var t=0,e=this._dayTxts.length;t<e;t++)this._dayTxts[t].text=this._dayDescArr[t];this.titleTxt.text="半月礼"},a.prototype.setAvatar=function(t){var e=o.instance.getCfgById(t);e&&(this._modelClip.avatarRotationY=e[7]?e[7]:180,this._modelClip.avatarScale=e[10]?e[10]:1,this._modelClip.avatarRotationX=e[6]?e[6]:0,this._modelClip.avatarX=e[8]?e[8]:0,this._modelClip.avatarY=e[9]?e[9]:0)},a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureFunc);for(var t=0,e=this._items.length;t<e;t++)this.onAutoClick(this._items[t].frameImg,this,this.itemClickHandler,[t]);this.onAutoGlobalEvt("HALF_MONTH_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){i.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.close=function(){n.prototype.close.call(this),null!=this._iconImgTweenJS&&(this._iconImgTweenJS.stop(),this._iconImgTweenJS=null),null!=this._modelClipTweenJS&&(this._modelClipTweenJS.stop(),this._modelClipTweenJS=null),p.thisStop(this._btnClip)},a.prototype.onOpened=function(){n.prototype.onOpened.call(this);for(var t=0,e=this._items.length;t<e;t++)this._items[t].type=2,this._items[t].cfg=u.instance.cfgs[t];this.updateInfo()},a.prototype.itemClickHandler=function(t){this.selectItem(t)},a.prototype.isMoveIconImg=function(t,e){2==e&&1==t?(this._iconImgTweenJS&&this._iconImgTweenJS.stop(),this.iconImg.y=346,this._iconImgTweenJS=TweenJS.create(this.iconImg).to({y:this.iconImg.y-7},1e3).start().yoyo(!0).repeat(99999999)):this._iconImgTweenJS&&this._iconImgTweenJS.stop()},a.prototype.isMoveModelClip=function(t,e){0==e&&1==t?(this._modelClipTweenJS&&this._modelClipTweenJS.stop(),this._modelClip.y=430,this._modelClipTweenJS=TweenJS.create(this._modelClip).to({y:this._modelClip.y-20},1e3).start().yoyo(!0).repeat(99999999)):this._modelClipTweenJS&&this._modelClipTweenJS.stop()},a.prototype.selectItem=function(t){if(-1!==t){var e=c.HalfMonthGiftModel.instance.halfMonthInfo;if(e){this._selectedItem&&(this._selectedItem.selected=!1),this._selectedItem=this._items[t],this._selectedItem.selected=!0;var i=(this._currSelectIndex=t)+8,n=u.instance.getCfgByDay(t+8),s=n[4],o=n[3],a=n[5];this.isMoveIconImg(a,s),this.isMoveModelClip(a,s),1==n[6]?(this._prizeEffect.visible=!0,this._prizeEffect.play()):(this._prizeEffect.visible=!1,this._prizeEffect.stop()),2!=s?this.soaringRankModelClip(o,s):(this._modelClip.visible=!1,this.iconImg.visible=!0,this.iconImg.skin="assets/icon/ui/seven_day/"+o+".png"),this.nameTxt.text=n[2];for(var r=u.instance.getCfgByDay(i)[1],l=0;l<3;l++)this._topItems[l].dataSource=[r[l][0],r[l][1],0,null];var h=c.HalfMonthGiftModel.instance.getDataByIndex(t);h&&1===h[1]?(this.sureBtn.visible=!1,this.receiveImg.visible=!0,p.thisStop(this._btnClip)):(this.sureBtn.visible=!0,this.receiveImg.visible=!1,i<=e[1]?p.thisPlay(this._btnClip):p.thisStop(this._btnClip)),this.dayTxt.text=this._dayDescArr[this._currSelectIndex]}}},a.prototype.soaringRankModelClip=function(t,e){this.iconImg.visible=!1,this._modelClip.visible=!0,this._modelClip.y=430,this.setAvatar(t);var i=Math.round(t/1e3);1==e?9!=i&&10!=i||(this._modelClip.reset(0,0,0,0,t),this._modelClip.y=430):(this._modelClip.reset(t),2==i||3==i||4==i||5==i||90==i||11==i&&this._modelClip&&this._modelClip.setActionType("show")),this.observationItem.data=[[this._modelClip,Math.round(t/1e3)]]},a.prototype.sureFunc=function(){-1!==this._currSelectIndex&&c.HalfMonthGiftCtrl.instance.getHalfMonthReward(this._currSelectIndex+8)},a.prototype.updateInfo=function(){if(c.HalfMonthGiftModel.instance.halfMonthInfo){for(var t=6,e=0,i=this._items.length;e<i;e++){var n=c.HalfMonthGiftModel.instance.getDataByIndex(e);this._items[e].data=n,6===t&&0===n[1]&&(t=e)}this.selectItem(t)}},a.prototype.effectInit=function(){this._btnClip=p.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-5,this.sureBtn.y-10),this._prizeEffect=p.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._prizeEffect,2),this._prizeEffect.scale(2,2,!0),this._prizeEffect.pos(104,89,!0)},e=a,c.HalfMonthGiftPanel=e}(modules=modules||{}),function(t){var e,i;function n(){this._Items=new Array,this._Items1=new Array,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab1={},this._tab2={},this._Dates=GlobalData.getConfig("duobao_rank");for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t];if(e){var i=void 0,n=void 0;n=0==e[0]?(i=this._tab1,this._Items):(i=this._tab2,this._Items1);var s=e[1],o=e[2];i[s]||(i[s]=new Array);for(var a=(i[s][o]=e)[7][0],r=e[7][1],l=a;l<=r;l++)n[l]=o}}},n.prototype.getLaet=function(t,e){return 0!=t?(i=this._tab2[e])[i.length-1]:(i=this._tab1[e])[i.length-1];var i},n.prototype.getDate=function(t,e,i){return 0!=t?this._tab2[e][i]:this._tab1[e][i]},n.prototype.getGradeByRank=function(t,e){return 0!=t?this._Items1[e]:this._Items[e]},i=n,e.DuobaoRankCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab1={},this._tab2={},this._Dates=new Array,this._Dates=GlobalData.getConfig("duobao_reward");for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t];if(e){var i=e[1],n=i[0],s=i[1];0==n?(this._tab1[s]||(this._tab1[s]=new Array),this._tab1[s].push(e)):1==n&&(this._tab2[s]||(this._tab2[s]=new Array),this._tab2[s].push(e))}}},n.prototype.getDate=function(t,e,i){if(0==t){for(var n=this._tab1[e],s=null,o=0;o<n.length;o++)if((a=n[o])&&a[0]==i){s=a;break}return s}if(1==t){for(n=this._tab2[e],s=null,o=0;o<n.length;o++){var a;if((a=n[o])&&a[0]==i){s=a;break}}return s}},n.prototype.getDateArr=function(t,e){return 0==t?this._tab1[e]:1==t?this._tab2[e]:void 0},i=n,e.DuobaoRewardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab1={},this._tab2={},this._Dates=new Array,this._Dates=GlobalData.getConfig("duobao_weight");for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t];if(e){var i=e[1],n=i[0],s=i[1];0==n?(this._tab1[n]||(this._tab1[n]=new Array),this._tab1[n][s]=e):1==n&&(this._tab2[n]||(this._tab2[n]=new Array),this._tab2[n][s]=e)}}},Object.defineProperty(n.prototype,"oneMoney",{get:function(){return this._Dates[0][2]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tenMoney",{get:function(){return this._Dates[0][3]},enumerable:!0,configurable:!0}),n.prototype.getDate=function(t,e){return 0==t?this._tab1[t][e]:1==t?this._tab2[t][e]:void 0},i=n,e.DuobaoWeightCfg=i}(modules=modules||{}),function(r){var l,o,h,a,c,s,p,u,i,d,y,t;function e(){var t=o.call(this)||this;return t._isAniIng=!1,t._isTen=!1,t._isUpdateBtnClickNum=500,t._isUpdateBtnClick=!0,t._bolll=!1,t._bolllPos=!1,t._index=0,t._index1=0,t}l=r.rotary_table_soraing||(r.rotary_table_soraing={}),h=r.config.DuobaoRankCfg,a=r.config.DuobaoRewardCfg,c=r.config.DuobaoWeightCfg,s=laya.maths.Point,p=r.common.ProgressBarCtrl,u=r.common.CustomClip,i=r.notice.SystemNoticeManager,d=r.funcOpen.FuncOpenModel,y=r.config.BlendCfg,o=ui.RotaryTableSoaringViewUI,__extends(e,o),e.prototype.initialize=function(){o.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.tipText,"#FFFFFF","SimHei",24),this.tipText.style.lineHeight=28,this.xuanZhonImgPos=new Array,this._isReward=!1,this.centerX=0,this.centerY=0,this._showItem=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11,this.item12],this.xuanZhonImgPos=[[359,680,180],[233,647,210],[143,553,240],[111,429,270],[146,306,300],[238,218,330],[360,185,360],[481,220,30],[571,308,60],[606,429,90],[575,553,120],[485,646,150]],this._proCtrl=new p(this.blessImg,340,this.blessTxt),this.initializeClip(),this._sevTextArr=new Array,this._sevStringArr=new Array,this._clipArr=new Array;for(var t=0;t<this._showItem.length;t++){var e=new Array,i=void 0;if(0==t||6==t){(i=new u).setProperty(this._showItem[t],-75,-75),i.skin="assets/effect/item_effect3.atlas";for(var n=1;n<16;n++){var s="item_effect3/"+n+".png";e.push(s)}i.frameUrls=e,i.durationFrame=6}else(i=u.create("assets/effect/item_effect2.atlas","item_effect2",16,!0,6)).setProperty(this._showItem[t],-14,-22);i.visible=!1,i.name="clip",this._clipArr.push(i),this.probabilityTipsTxt.underline=!0}this.rewardShowItem.setDataFun([1,.4,.35,.45,"assets/icon/ui/sprint_rank/"])},e.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.oneBtn,this,this.xunBaoHandler,[0]),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.caiQiReceiveBtn,this,this.caiQiReceiveBtnHandler),this.onAutoClick(this.myRecordBtn,this,this.myRecordBtnHandler),this.onAutoClick(this.rankBtn,this,this.rankBtnHandler),this.onAutoClick(this.probabilityTipsTxt,this,this.probabilityHandler),this.onAutoClick(this.closeBtn1,this,this.closeBtn1Handler),this.onAutoClick(this.shouChouBiBtn,this,this.rankBtnHandler),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_RUNREPLY",this,this.PayRewardRunReply),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_OPENRECORD",this,this.openMyRecord),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_BROADCAST_LIST",this,this.updateSeverList),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_SHOWHTML",this,this.showHtml),this.onAutoGlobalEvt("SPRINT_RANK_TYPE_CHANGE",this,this.changeType)},e.prototype.probabilityHandler=function(){var t="",e=l.RotaryTableSoaringModel.instance.type,i=l.RotaryTableSoaringModel.instance.param;if(1==e){var n=l.RotaryTableSoaringModel.instance._gaiLvBlenFS[i];t+=y.instance.getCfgById(n)[2]}else n=l.RotaryTableSoaringModel.instance._gaiLvBlenCB[i],t+=y.instance.getCfgById(n)[2];WindowManager.instance.open(443,["概率公示",t,695])},e.prototype.rankBtnHandler=function(){WindowManager.instance.open(318),this.closeBtn1Handler()},e.prototype.onOpened=function(){o.prototype.onOpened.call(this),this.titleTxt.y=54,this.titleTxt.color="#ab2b1c",this._bolll=!1,this._bolllPos=!1,this._index=0,this._index1=0,l.RotaryTableSoaringCtrl.instance.GetDuobaoInfo(),l.RotaryTableSoaringCtrl.instance.GetDuobaoServerBroadcast(),this.oneMoneytext.text=""+l.RotaryTableSoaringModel.instance._oneMoney,this.tenMoneytext.text=""+l.RotaryTableSoaringModel.instance._tenMoney,this._isAniIng=!1,this._isUpdateBtnClick=!0,this._tipsModelIsOpen=!1,this.updateUI()},e.prototype.updateUI=function(){this.showReward(),this.changproUI(),this.rankBtn.visible=1==l.RotaryTableSoaringModel.instance.type,1==l.RotaryTableSoaringModel.instance.type?this.titleTxt.text="飞升夺宝":this.titleTxt.text="冲榜夺宝",this.tipText.innerHTML='每次抽奖可获得<span style="color: #50ff28;">10</span>积分';var t=PlayerModel.instance.ingot;t<l.RotaryTableSoaringModel.instance._oneMoney?this.oneMoneytext.color="#FF3e3e":this.oneMoneytext.color="#ffffff",t<l.RotaryTableSoaringModel.instance._tenMoney?this.tenMoneytext.color="#FF3e3e":this.tenMoneytext.color="#ffffff",Laya.timer.clear(this,this.activityHandler),this.setActivitiTime(),this.showShouChouBiDeImg()},e.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=d.instance.getFuncIsOpen(195)||d.instance.getFuncIsOpen(250);l.RotaryTableSoaringModel.instance.restTm>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityText1.x=223,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.activityText1.x=299)},e.prototype.activityHandler=function(){this.activityText.text=""+CommonUtil.timeStampToHHMMSS(l.RotaryTableSoaringModel.instance.restTm),l.RotaryTableSoaringModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.activityText1.x=299,Laya.timer.clear(this,this.activityHandler))},e.prototype.desDoryArr=function(){if(this._htmlArr){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&(e.closeTimer(),e.visible=!1,e.removeSelf(),e.destroy())}this._htmlArr.length=0,this._htmlArr=null}},e.prototype.setARR=function(){if(!this._htmlArr){this._htmlArr=new Array;for(var t=0;t<20;t++){var e=new l.HtmlReward(270,20,this._htmlArr);this.severPanel.addChild(e),e.name="数据："+t,this._htmlArr.push(e)}}},e.prototype.showHtml=function(){if(this._sevStringArr&&0<this._sevStringArr.length){this.setARR();var t=this._htmlArr[this._index];this._index=this._index+1,this._index=this._index>this._htmlArr.length-1?0:this._index,t&&(t.setText(218,210,this.getSevStringArr()),this._bolllPos||(this._bolllPos=!0,Laya.timer.clear(this,this.updateList),Laya.timer.frameLoop(1,this,this.updateList)))}},e.prototype.getSevStringArr=function(){var t=this._sevStringArr[this._index1];return this._index1=this._index1+1,this._index1=this._index1>this._sevStringArr.length-1?0:this._index1,t},e.prototype.updateList=function(){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&e.updateList()}},e.prototype.updateSeverList=function(){var t=l.RotaryTableSoaringModel.instance.svrBroadcastList;if(null!=t&&0<t.length){0<this._sevStringArr.length&&(this._sevStringArr.length=0),t.reverse();for(var e=0;e<10;e++)if(t[e]){var i=t[e][0],n=t[e][1],s=r.common.CommonUtil.getNameByItemId(n),o=t[e][2],a="<span style='color:#ffce7c;'>天赐鸿福,</span>";a+="<span style='color:#ffffff;'>"+i+"</span>",a+="<span style='color:#ffce7c;'>获得了</span>",a+='<a href=""><span style=\'color:'+r.common.CommonUtil.getColorById(n)+";'>"+s+"*"+o+"</span></a>",this._sevStringArr.push(a)}0<this._sevStringArr.length&&!this._bolll&&(this._bolll=!0,this.showHtml())}},e.prototype.PayRewardRunReply=function(){var t=l.RotaryTableSoaringModel.instance.getNoteList();if(1<t.length)WindowManager.instance.open(315,t);else{var e=new s(300,350),i=[t[0][0],e,this.height];this._arr=i;var n=t[t.length-1][2];this.showInSmoking(n,!1)}},e.prototype.showInSmoking=function(t,e){for(var i=0,n=c.instance.getDate(l.RotaryTableSoaringModel.instance.type,l.RotaryTableSoaringModel.instance.param)[5],s=0;s<n.length;s++){var o=n[s][0];if(this._showItem[s]&&t==o){i=o-1;break}}this.startAni(i,e)},e.prototype.startAni=function(t,e){void 0===e&&(e=!1),this._maxSpeed=10,this._startSpeed=130,this._minSpeed=130,this._quanNum=3,this._targetIdnex=t,this._nowTargetIdnex=5,this._startdnex=this._nowTargetIdnex,this._isAniIng=!0,this._isTen=e,Laya.timer.clear(this,this.ani),this.ani()},e.prototype.ani=function(){var t=c.instance.getDate(l.RotaryTableSoaringModel.instance.type,l.RotaryTableSoaringModel.instance.param)[5].length-1;this._nowTargetIdnex+=1,this._nowTargetIdnex=this._nowTargetIdnex>t?0:this._nowTargetIdnex,this._nowTargetIdnex===this._startdnex&&--this._quanNum;var e=this._showItem[this._nowTargetIdnex],i=this.xuanZhonImgPos[this._nowTargetIdnex];if(e){var n=i[0],s=i[1];this.xuanZhonImg.pos(n,s),this.xuanZhonImg.rotation=i[2],this.xuanZhonImg.visible=!0}if(0<this._quanNum)this._startSpeed-=10,this._startSpeed=(this._startSpeed,this._maxSpeed,this._maxSpeed),Laya.timer.clear(this,this.ani),Laya.timer.once(this._startSpeed,this,this.ani);else if(0==this._quanNum)this._startSpeed+=10,this._startSpeed=this._startSpeed>this._minSpeed?this._minSpeed:this._startSpeed,Laya.timer.clear(this,this.ani),Laya.timer.once(this._startSpeed,this,this.ani);else{if(this._nowTargetIdnex===this._targetIdnex){if(Laya.timer.clear(this,this.ani),this._isAniIng=!1,this._isTen){var o=l.RotaryTableSoaringModel.instance.getNoteList();WindowManager.instance.open(315,o)}else if(this._arr){GlobalData.dispatcher.event("ROTARYTABLE_SOARING_EFFECT",[this._arr]),CommonUtil.delayedPutInBag();var a=l.RotaryTableSoaringModel.instance.getNoteListGj();0<a.length&&WindowManager.instance.open(95,a)}return}Laya.timer.clear(this,this.ani),6<this._targetIdnex&&this._targetIdnex<=t?this._startSpeed+=20:this._startSpeed+=10,Laya.timer.once(this._startSpeed,this,this.ani)}},e.prototype.showReward=function(){var t=c.instance.getDate(l.RotaryTableSoaringModel.instance.type,l.RotaryTableSoaringModel.instance.param);if(t)for(var e=t[5],i=0;i<e.length;i++){var n=e[i][1],s=e[i][2],o=this._showItem[i];if(o){o.dataSource=[n,s,0,null],o.visible=!0,o.isbtnClipIsPlayer=!1;var a=o.getChildByName("clip");a.play(),a.visible=!0}}},e.prototype.changproUI=function(){var t=l.RotaryTableSoaringModel.instance.getgRade(),e=l.RotaryTableSoaringModel.instance.type,i=l.RotaryTableSoaringModel.instance.param,n=a.instance.getDate(e,i,t[0]),s=0;n&&(s=n[3]);var o=t[1];this._proCtrl.maxValue=s,this._proCtrl.value=l.RotaryTableSoaringModel.instance.score,1==o?(this._isReward=!0,this._prizeEffect.play(),this._prizeEffect.visible=!0):(this._isReward=!1,this._prizeEffect.stop(),this._prizeEffect.visible=!1)},e.prototype.xunBaoHandler=function(t){if(this._isUpdateBtnClick){this._isUpdateBtnClick=!1,Laya.timer.once(this._isUpdateBtnClickNum,this,this.chuang_isUpdateBtnClick);var e=PlayerModel.instance.ingot;if(0==t){if(e<l.RotaryTableSoaringModel.instance._oneMoney)return void CommonUtil.goldNotEnoughAlert()}else if(e<l.RotaryTableSoaringModel.instance._tenMoney)return void CommonUtil.goldNotEnoughAlert();this._isAniIng||l.RotaryTableSoaringCtrl.instance.DuobaoRun(t)}else i.instance.addNotice("操作过于频繁",!0)},e.prototype.openRecharge=function(){WindowManager.instance.open(111),this.close()},e.prototype.chuang_isUpdateBtnClick=function(){this._isUpdateBtnClick=!0},e.prototype.caiQiReceiveBtnHandler=function(){this._isReward?l.RotaryTableSoaringCtrl.instance.GetDuobaoReward():WindowManager.instance.open(316,0)},e.prototype.myRecordBtnHandler=function(){l.RotaryTableSoaringCtrl.instance.GetDuobaoNotes()},e.prototype.openMyRecord=function(){var t=l.RotaryTableSoaringModel.instance.PayRewardNoteList;t&&0<t.length?WindowManager.instance.open(198,t):i.instance.addNotice("暂无记录",!0)},e.prototype.close=function(){o.prototype.close.call(this),Laya.timer.clear(this,this.ani),Laya.timer.clear(this,this.updateList),Laya.timer.clear(this,this.chuang_isUpdateBtnClick),Laya.timer.clear(this,this.activityHandler),this.desDoryArr(),this._prizeEffect.stop(),this._prizeEffect.visible=!1,CommonUtil.delayedPutInBag(),WindowManager.instance.close(316),WindowManager.instance.close(198),WindowManager.instance.close(315),WindowManager.instance.close(318),this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.rewardShowItem.stopTween()},e.prototype.destroy=function(t){if(void 0===t&&(t=!0),this._prizeEffect&&(this._prizeEffect.removeSelf(),this._prizeEffect.destroy(),this._prizeEffect=null),this._showItem){for(var e=0;e<this._showItem.length;e++)(i=this._showItem[e])&&(i.removeSelf(),i.destroy(),i=null);this._showItem.length=0,this._showItem=null}if(this._clipArr){for(e=0;e<this._clipArr.length;e++){var i;(i=this._clipArr[e])&&(i.removeSelf(),i.destroy(),i=null)}this._clipArr.length=0,this._clipArr=null}this._shouChouBiDeImgTween&&(this._shouChouBiDeImgTween.stop(),this._shouChouBiDeImgTween=null),this.rewardShowItem=this.destroyElement(this.rewardShowItem),o.prototype.destroy.call(this,t),this._proCtrl.destroy(),this._proCtrl=null},e.prototype.initializeClip=function(){this._prizeEffect=u.create("assets/effect/ok_state.atlas","ok_state",8),this._prizeEffect.setProperty(null,this.caiQiReceiveBtn.x-87,this.caiQiReceiveBtn.y-93),this.addChildAt(this._prizeEffect,19)},e.prototype.changeType=function(){this.close(),WindowManager.instance.open(this.panelId)},e.prototype.closeBtn1Handler=function(){this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.rewardShowItem.stopTween(),this.shouChouBiDeImg.visible=!1},e.prototype.showShouChouBiDeImg=function(){if(!this._tipsModelIsOpen){this.rewardShowItem.stopTween(),this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.shouChouBiDeImg.visible=!1,this.shouChouBiDeImg.y=627;var t=h.instance.getGradeByRank(0,1),e=h.instance.getDate(0,l.RotaryTableSoaringModel.instance.param,t),i=d.instance.getFuncIsOpen(195)||d.instance.getFuncIsOpen(250);if(e&&l.RotaryTableSoaringModel.instance.restTm>=GlobalData.serverTime&&i&&1===l.RotaryTableSoaringModel.instance.type){var n=e[8],s=e[10],o=e[9],a=e[11];this.mouldNameText.text=""+a,this.rewardShowItem.showRewardObj(n,s,o),this._shouChouBiDeImgTween=TweenJS.create(this.shouChouBiDeImg).to({y:this.shouChouBiDeImg.y-10},1e3).start().yoyo(!0).repeat(99999999),this._shouChouBiDeImgTween.to({y:this.shouChouBiDeImg.y-10},1e3).start(),this._tipsModelIsOpen=this.shouChouBiDeImg.visible=!0}}},t=e,l.RotaryTableSoaringPanel=t}(modules=modules||{}),function(t){var r,i,e,n,s,o,a;function l(){return i.call(this)||this}r=t.rotary_table_soraing||(t.rotary_table_soraing={}),e=t.config.DuobaoRewardCfg,n=t.common.CustomList,s=laya.maths.Point,o=t.config.BlendCfg,i=ui.RotaryTableRewardRankAlertUI,__extends(l,i),l.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this)},l.prototype.initialize=function(){i.prototype.initialize.call(this),this._pos=new s(60,70),this._list=new n,this._list.width=593,this._list.height=635,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=r.RotaryTableSoaringRankItem,this._list.x=33,this._list.y=116,this.addChild(this._list)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.titleTxt.text="积分奖励",this.updateList()},l.prototype.close=function(t,e){i.prototype.close.call(this,t,e)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_UPDATE",this,this.updateList)},l.prototype.overSort=function(t,e){var i=t[0],n=e[0],s=r.RotaryTableSoaringModel.instance.getRewardStart(i),o=r.RotaryTableSoaringModel.instance.getRewardStart(n),a=1;return s==o?a=i-n:2==s&&2!=o?a=1:2!=s&&2==o&&(a=-1),a},l.prototype.updateList=function(){var t=e.instance.getDateArr(r.RotaryTableSoaringModel.instance.type,r.RotaryTableSoaringModel.instance.param);t.sort(this.overSort),this._list.datas=t,this.changDrawNum()},l.prototype.changDrawNum=function(){o.instance.getCfgById(15501)[1],this.TipsText.text="每次抽奖可获得10点积分,积分每日0点重置"},a=l,r.RotaryTableSoaringRankAlert=a}(modules=modules||{}),function(a){var r,e,l,i,n,t;function s(){return null!==e&&e.apply(this,arguments)||this}r=a.rotary_table_soraing||(a.rotary_table_soraing={}),l=a.config.DuobaoRankCfg,i=a.common.BtnGroup,n=a.common.CustomList,e=ui.RotaryTableSoaringRankAwardAlertUI,__extends(s,e),s.prototype.destroy=function(){this._tenBtnBtnClip=this.destroyElement(this._tenBtnBtnClip),this._oneBtnBtnClip=this.destroyElement(this._oneBtnBtnClip),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s.prototype.initialize=function(){e.prototype.initialize.call(this),this._showIds=new Array,this._list=new n,this._list.width=589,this._list.height=481,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=r.RotaryTableSoaringRankAwardItem,this._list.x=36,this._list.y=172,this.addChild(this._list),this._allMingCiArr=new Array;for(var t=1;t<=30;t++)this._allMingCiArr.push(t);for(this._allMingCiArr2=new Array,t=1;t<=10;t++)this._allMingCiArr2.push(t);this._btnGroup=new i,this._btnGroup.setBtns(this.rankBtn,this.gradeBtn),CommonUtil.setHTMLPro(this.StatementHTML,"#b15315","SimHei",22,"center")},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),r.RotaryTableSoaringModel.instance._nowIndex=0,this._btnGroup.selectedIndex=0,this.titleTxt.text="夺宝排名"},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this._btnGroup.on("change",this,this.changeHandler),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_MYLIST",this,this.showScore),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_QULIST",this,this.showScore),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_BROADCAST_LIST",this,this.showScore)},s.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._btnGroup.off("change",this,this.changeHandler)},s.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(r.RotaryTableSoaringModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI()):1===this._btnGroup.selectedIndex&&(r.RotaryTableSoaringModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI())},s.prototype.showUI=function(){0===this._btnGroup.selectedIndex?(this.TipText.visible=!0,this.StatementHTML.visible=!1,this.TipText.pos(47,759),this.StatementHTML.pos(47,744),this._allMingCiArr&&(this._list.datas=this._allMingCiArr),r.RotaryTableSoaringCtrl.instance.getDuobaoRankCharInfo(0)):1===this._btnGroup.selectedIndex&&(this.TipText.visible=!0,this.StatementHTML.visible=!0,this.TipText.pos(47,774),this.StatementHTML.pos(47,744),this._allMingCiArr2&&(this._list.datas=this._allMingCiArr2),r.RotaryTableSoaringCtrl.instance.getDuobaoRankCharInfo(1),r.RotaryTableSoaringCtrl.instance.GetDuobaoServerBroadcast()),r.RotaryTableSoaringCtrl.instance.GetDuobaoInfo(),this.showScore()},s.prototype.showScore=function(){0===this._btnGroup.selectedIndex?this.showMySocre():1===this._btnGroup.selectedIndex&&this.showQuSocre()},s.prototype.showMySocre=function(){var t=a.player.PlayerModel.instance.actorId,e=r.RotaryTableSoaringModel.instance._myNodeListByObjId[t];if(e){var i=e[0],n=e[2];this.myRankNumText.text="我的排名:"+i,this.myIntegralText.text="我的积分:"+n}else l.instance.getLaet(0,r.RotaryTableSoaringModel.instance.param)[3],this.myRankNumText.text="我的排名:未上榜",this.myIntegralText.text="我的积分:"+r.RotaryTableSoaringModel.instance.score+"积分"},s.prototype.showQuSocre=function(){var t=a.player.PlayerModel.instance.serverPgId,e=l.instance.getLaet(1,r.RotaryTableSoaringModel.instance.param),i=(e[3],e[4]),n=r.RotaryTableSoaringModel.instance._quNodeListByObjId[t];if(n){var s=n[0],o=n[2];this.myRankNumText.text="区服排名:"+s,this.myIntegralText.text="本区积分:"+o}else this.myRankNumText.text="区服排名:未上榜",this.myIntegralText.text="本区积分:"+r.RotaryTableSoaringModel.instance._totalScore+"积分";this.StatementHTML.innerHTML="个人积分达到<span style='color:#b15315'>"+i+"</span>可领取区服排行奖励"},t=s,r.RotaryTableSoaringRankAwardAlert=t}(modules=modules||{}),function(t){var o,a,r,e,i,n,s;function l(){return a.call(this)||this}o=t.rotary_table_soraing||(t.rotary_table_soraing={}),r=laya.maths.Point,e=laya.ui.List,i=t.bag.BagItem,n=laya.events.Event,a=ui.RotaryTableRewardAlertUI,__extends(l,a),l.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),a.prototype.destroy.call(this)},l.prototype.initialize=function(){a.prototype.initialize.call(this),this._showIds=new Array,this._list=new e,this._list.vScrollBarSkin="",this._list.width=565,this._list.height=259,this._list.repeatX=5,this._list.spaceX=16.25,this._list.spaceY=8,this._list.itemRender=i,this._list.x=48,this._list.y=70,this.addChild(this._list)},l.prototype.onOpened=function(){a.prototype.onOpened.call(this),this.oneMoneytext.text=""+o.RotaryTableSoaringModel.instance._oneMoney,this.tenMoneytext.text=""+o.RotaryTableSoaringModel.instance._tenMoney,CommonUtil.delayedButNoPutInBag()},l.prototype.close=function(t,e){a.prototype.close.call(this,t,e),CommonUtil.delayedButNoPutInBag()},l.prototype.playEffect=function(t){for(var e=t,i=0;i<e.length;i++){var n=this._list.cells[i].x+this._list.cells[i].width/2,s=this._list.cells[i].y+this._list.cells[i].height/2,o=new r(n,s),a=[e[i][0],o,this.height];GlobalData.dispatcher.event("ROTARYTABLE_SOARING_EFFECT",[a])}},l.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t);for(var e=this._showIds.length=0;e<t.length;e++){var i=[t[e][0],t[e][1],0,null];this._showIds.push(i)}this._list.array=this._showIds,this._list.scrollTo(0),this.playEffect(t);var n=o.RotaryTableSoaringModel.instance.getNoteListGj();0<n.length&&WindowManager.instance.open(95,n);var s=PlayerModel.instance.ingot;s<o.RotaryTableSoaringModel.instance._oneMoney?this.oneMoneytext.color="#FF3e3e":this.oneMoneytext.color="#4c5e8a",s<o.RotaryTableSoaringModel.instance._tenMoney?this.tenMoneytext.color="#FF3e3e":this.tenMoneytext.color="#4c5e8a"},l.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.oneBtn.on(n.CLICK,this,this.xunBaoHandler,[0]),this.tenBtn.on(n.CLICK,this,this.xunBaoHandler,[1])},l.prototype.offEvt=function(){a.prototype.offEvt.call(this),this.oneBtn.off(n.CLICK,this,this.xunBaoHandler),this.tenBtn.off(n.CLICK,this,this.xunBaoHandler)},l.prototype.xunBaoHandler=function(t){var e=PlayerModel.instance.ingot;if(0==t){if(e<o.RotaryTableSoaringModel.instance._oneMoney)return void CommonUtil.goldNotEnoughAlert();o.RotaryTableSoaringCtrl.instance.DuobaoRun(t),this.close()}else{if(e<o.RotaryTableSoaringModel.instance._tenMoney)return void CommonUtil.goldNotEnoughAlert();o.RotaryTableSoaringCtrl.instance.DuobaoRun(t)}},l.prototype.openRecharge=function(){WindowManager.instance.open(111),this.close()},s=l,o.RotaryTableSoaringRewardAlert=s}(modules=modules||{}),function(e){var t,i;function n(){}t=e.openAward||(e.openAward={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.update=function(t){this._time=t[0],this.states=t[1],this._state=t[2],e.funcOpen.FuncOpenModel.instance.setActionOpen(198,0===this._state?2:1),GlobalData.dispatcher.event("OPEN_AWARD_UPDATE")},Object.defineProperty(n.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isOpen",{get:function(){return 1===this._state},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"states",{set:function(t){this._states={};for(var e=0,i=t;e<i.length;e++){var n=i[e],s=n[0];this._states[s]=n[1]}},enumerable:!0,configurable:!0}),n.prototype.getStateById=function(t){return this._states?this._states[t]:null},i=n,t.OpenAwardModel=i}(modules=modules||{}),function(t){var e,i,d,y,n,s,g,f,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.openAward||(t.openAward={}),d=t.openAward.OpenAwardModel,y=t.common.CommonUtil,n=ui.OpenAwardViewUI,s=t.common.CustomList,g=t.bag.BaseItem,f=t.config.OpenAwardCfg,o=t.common.AvatarClip,a=t.config.ExteriorCfg,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=new s,this._list.scrollDir=2,this._list.x=40,this._list.y=95,this._list.width=640,this._list.height=242,this._list.vCount=1,this._list.itemRender=e.OpenAwardItem,this._list.spaceY=5,this.addChild(this._list),this.addChild(this.closeBtn),this._avatar=o.create(1024,1024,1024),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this._avatar.pos(360,742,!0),this.addChildAt(this._avatar,3),this._items=[],this._time=0},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("OPEN_AWARD_UPDATE",this,this.updateView),this.onAutoEvt(this._list,"select",this,this.updateShow),this.onAutoClick(this.btn,this,this.btnHandler)},l.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),i.prototype.offEvt.call(this)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.OpenAwardCtrl.instance.getOpenReward(),this.updateView()},l.prototype.updateView=function(){this._time=d.instance.time,this.setState(),this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(this.remainTxt.text="活动已结束",Laya.timer.clear(this,this.loopHandler));var t=f.instance.ids.concat().sort(this.sortByState.bind(this));this._list.datas=t,this._list.selectedIndex=0,this.updateShow()},l.prototype.updateShow=function(){var t=this._list.selectedData,e=f.instance.getCfgById(t);this.fightMsz.value=e[9].toString(),this.nameTxt.text=e[2];for(var i=e[1],n=y.formatItemData(i),s=0,o=n.length;s<o;s++){var a=this._items[s];a||((a=new g).nameVisible=!1,a.y=872,a.scale(.8,.8,!0),this._items[s]=a,this.addChild(a)),a.dataSource=n[s]}y.centerChainArr(this.width,this._items,-15);var r=this._list.selectedIndex;this._avatar.y=0==r||1==r?this.showImg.y:742;var l=e[4],h=e[5];if(0==h?(this.showImg.skin="",this._avatar.visible=!0,this._avatar.reset(l)):1==h?(this.showImg.skin="",this._avatar.visible=!0,this._avatar.reset(0,0,0,0,l)):(this._avatar.visible=!1,this.showImg.skin="assets/icon/ui/open_award/"+l+".png"),this.observationItem.setRot(),this.setAvatar(l),this.observationItem.data=[[this._avatar,Math.round(l/1e3)]],1==e[7]?(this._eff||(this._eff=y.creatEff(this,"ok_state",7),this.addChildAt(this._eff,2),this._eff.scale(2,2),this._eff.pos(104,380)),this._eff.play(),this._eff.visible=!0):this._eff&&(this._eff.stop(),this._eff.visible=!1),1==e[6]?(this._tween&&(this._tween.stop(),this._tween=null),0==h||1==h?(this._tween=TweenJS.create(this._avatar),this._tween.to({y:this._avatar.y-20},1e3).yoyo(!0).repeat(Number.POSITIVE_INFINITY)):(this._tween=TweenJS.create(this.showImg),this._tween.to({y:this.showImg.y-20},1e3).yoyo(!0).repeat(Number.POSITIVE_INFINITY)),this._tween.start()):this._tween&&this._tween.stop(),1==d.instance.getStateById(t))this.btn.skin="common/txt_common_ygm.png",this.propBox.visible=this.btn.mouseEnabled=!1,this.btn.label="",this.btn.pos(309,1064,!0);else{this.btn.skin="common/btn_tongyong_6.png",this.propBox.visible=this.btn.mouseEnabled=!0,this.btn.label="购买",this.btn.pos(265,1055,!0);var c=e[3][0],p=e[3][1];this.propImg.skin=y.getIconById(c,!0),this.propTxt.text=""+p;var u=y.getPropCountById(c);this.propTxt.color=p<=u?"#2d1a1a":"#ff3e3e",this._canBug=p<=u}},l.prototype.sortByState=function(t,e){var i=d.instance.getStateById(t),n=d.instance.getStateById(e);return n<i?1:i<n?-1:y.smallToBigSort(t,e)},l.prototype.setAvatar=function(t){var e=a.instance.getCfgById(t);e&&(this._avatar.avatarRotationY=e[7]?e[7]:180,this._avatar.avatarScale=e[10]?e[10]:1,this._avatar.avatarRotationX=e[6]?e[6]:0,this._avatar.avatarX=e[8]?e[8]:0,this._avatar.avatarY=e[9]?e[9]:0)},l.prototype.loopHandler=function(){this.setState(),864e5<=this._time-GlobalData.serverTime?this.remainTxt.text=y.timeStampToDayHourMin(this._time):this._time>GlobalData.serverTime?this.remainTxt.text=y.timeStampToHHMMSS(this._time):Laya.timer.clear(this,this.loopHandler)},l.prototype.setState=function(){this.btn.visible=d.instance.isOpen,this.endImg.visible=!d.instance.isOpen},l.prototype.btnHandler=function(){if(this._canBug){var t=this._list.selectedData;e.OpenAwardCtrl.instance.buyOpenReward(t)}else y.goldNotEnoughAlert()},l.prototype.close=function(){this._tween&&this._tween.stop(),i.prototype.close.call(this)},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._items=this.destroyElement(this._items),this._avatar=this.destroyElement(this._avatar),this._eff=this.destroyElement(this._eff),this.observationItem=this.destroyElement(this.observationItem),this._tween&&(this._tween.stop(),this._tween=null),i.prototype.destroy.call(this)},r=l,e.OpenAwardPanel=r}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab1={},this._tab2={},this._Dates=new Array,this._Dates=GlobalData.getConfig("jzduobao_reward");for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t];if(e){var i=e[0],n=(this._tab1[i]=e)[1];this._tab1[n]=e}}},n.prototype.getDate=function(t){return this._tab1[t]},n.prototype.getDateArr=function(){return this._Dates},i=n,e.JzDuobaoRewardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab1={},this._Dates=new Array,this._Dates=GlobalData.getConfig("jzduobao_weight");for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t];if(e)for(var i=e[0][0],n=e[0][1],s=e[1],o=i;o<=n;o++)this._tab1[o]||(this._tab1[o]=new Array),this._tab1[o]=s}},Object.defineProperty(n.prototype,"oneMoney",{get:function(){return e.BlendCfg.instance.getCfgById(41003)[1][0]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tenMoney",{get:function(){return e.BlendCfg.instance.getCfgById(41003)[1][1]},enumerable:!0,configurable:!0}),n.prototype.getDate=function(t){return this._tab1[t]},i=n,e.JzDuobaoWeightCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab1={},this._Items={},this._Dates=new Array,this._Dates=GlobalData.getConfig("jzduobao_rank");for(var t=0;t<this._Dates.length;t++){var e=this._Dates[t];if(e){var i=e[0],n=e[1];this._tab1[i]||(this._tab1[i]=new Array);for(var s=(this._tab1[i][n]=e)[5][0],o=e[5][1],a=s;a<=o;a++)this._Items[i]||(this._Items[i]=new Array),this._Items[i][a]=n}}},n.prototype.getLaet=function(t){var e=this._tab1[t];return e[e.length-1]},n.prototype.getDate=function(t,e){return this._tab1[t][e]},n.prototype.getGradeByRank=function(t,e){return this._Items[t][e]},i=n,e.JzDuobaoRankCfg=i}(modules=modules||{}),function(r){var l,n,h,s,a,o,c,p,i,u,e,t;function d(){var t=n.call(this)||this;return t._isAniIng=!1,t._isTen=!1,t._isUpdateBtnClickNum=500,t._isUpdateBtnClick=!0,t._bolll=!1,t._bolllPos=!1,t._index=0,t._index1=0,t}l=r.rotary_table_jiuzhou||(r.rotary_table_jiuzhou={}),h=r.config.JzDuobaoRankCfg,s=r.config.JzDuobaoRewardCfg,a=r.config.JzDuobaoWeightCfg,o=laya.maths.Point,c=r.common.ProgressBarCtrl,p=r.common.CustomClip,i=r.notice.SystemNoticeManager,u=r.funcOpen.FuncOpenModel,e=r.config.BlendCfg,n=ui.RotaryTableJiuZhouViewUI,__extends(d,n),d.prototype.initialize=function(){n.prototype.initialize.call(this),this._isReward=!1,this.centerX=0,this.centerY=0,this._showItem=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11,this.item12,this.item13,this.item14],this._proCtrl=new c(this.blessImg,339,this.blessTxt),this.initializeClip(),this._sevStringArr=new Array,this._clipArr=new Array;for(var t=0;t<this._showItem.length;t++){if(new Array,0==t||4==t||7==t||11==t){var e=new Laya.Image;e.skin="pay_plate/frame_jzdb_zsk.png",this._showItem[t].addChild(e),e.visible=!0,e.pos(-4,-3)}var i=p.create("assets/effect/item_effect2.atlas","item_effect2",16,!0,6);i.setProperty(this._showItem[t],-14,-22),i.play(),i.name="clip",this._clipArr.push(i),this.probabilityTipsTxt.underline=!0}CommonUtil.setHTMLPro(this.StatementHTML,"#168a17","SimHei",22,"center"),CommonUtil.setHTMLPro(this.tipText,"#000000","SimHei",24,"center"),this.tipText.style.lineHeight=28,this.rewardShowItem.setDataFun([1,.4,.35,.45,"assets/icon/ui/sprint_rank/"])},d.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.oneBtn,this,this.xunBaoHandler,[0]),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.caiQiReceiveBtn,this,this.caiQiReceiveBtnHandler),this.onAutoClick(this.myRecordBtn,this,this.myRecordBtnHandler),this.onAutoClick(this.rankBtn,this,this.rankBtnHandler),this.onAutoClick(this.closeBtn1,this,this.closeBtn1Handler),this.onAutoClick(this.shouChouBiBtn,this,this.rankBtnHandler),this.onAutoClick(this.probabilityTipsTxt,this,this.probabilityHandler),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_RUNREPLY",this,this.PayRewardRunReply),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_OPENRECORD",this,this.openMyRecord),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_BROADCAST_LIST",this,this.updateSeverList),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_SHOWHTML",this,this.showHtml),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_UPDATE_JACKPOT",this,this.setCionNumText)},d.prototype.probabilityHandler=function(){var t="";t+=e.instance.getCfgById(66009)[2],WindowManager.instance.open(443,["概率公示",t,695])},d.prototype.rankBtnHandler=function(){WindowManager.instance.open(339),this.closeBtn1Handler()},d.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._bolll=!1,this._bolllPos=!1,this._index=0,this._index1=0,l.RotaryTableJiuZhouCtrl.instance.GetDuobaoInfo(),l.RotaryTableJiuZhouCtrl.instance.GetDuobaoServerBroadcast();var t=100*r.config.BlendCfg.instance.getCfgById(41004)[1][0];this.StatementHTML.innerHTML="抽奖一次抽成<span style='color:#b15315'>"+t+"%</span> 元宝注入奖池",this.tipText.innerHTML='每次抽奖可获得<span style="color: #0ecf09;">10</span>积分,积分获取截止到23:00结束',this.oneMoneytext.text=""+l.RotaryTableJiuZhouModel.instance._oneMoney,this.tenMoneytext.text=""+l.RotaryTableJiuZhouModel.instance._tenMoney,this._isAniIng=!1,this._isUpdateBtnClick=!0,this.updateUI(),this._tipsModelIsOpen=!1},d.prototype.updateUI=function(){this.showReward(),this.changproUI();var t=PlayerModel.instance.ingot;t<l.RotaryTableJiuZhouModel.instance._oneMoney?this.oneMoneytext.color="#FF3e3e":this.oneMoneytext.color="#4c5e8a",t<l.RotaryTableJiuZhouModel.instance._tenMoney?this.tenMoneytext.color="#FF3e3e":this.tenMoneytext.color="#4c5e8a",this.rankBtn.visible=!0,Laya.timer.clear(this,this.activityHandler),this.setActivitiTime(),this.showShouChouBiDeImg()},d.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=u.instance.getFuncIsOpen(217);l.RotaryTableJiuZhouModel.instance.restTm>=GlobalData.serverTime&&t&&1==l.RotaryTableJiuZhouModel.instance.openState?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityText1.x=223,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.activityText1.x=299)},d.prototype.activityHandler=function(){this.activityText.text=""+CommonUtil.timeStampToHHMMSS(l.RotaryTableJiuZhouModel.instance.restTm),l.RotaryTableJiuZhouModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.activityText1.x=299,Laya.timer.clear(this,this.activityHandler))},d.prototype.desDoryArr=function(){if(this._htmlArr){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&(e.closeTimer(),e.visible=!1,e.removeSelf(),e.destroy())}this._htmlArr.length=0,this._htmlArr=null}},d.prototype.setARR=function(){if(!this._htmlArr){this._htmlArr=new Array;for(var t=0;t<20;t++){var e=new l.HtmlReward(382,20,this._htmlArr);this.severPanel.addChild(e),e.name="数据："+t,this._htmlArr.push(e)}}},d.prototype.showHtml=function(){if(this._sevStringArr&&0<this._sevStringArr.length){this.setARR();var t=this._htmlArr[this._index];this._index=this._index+1,this._index=this._index>this._htmlArr.length-1?0:this._index,t&&(t.setText(240,232,this.getSevStringArr()),this._bolllPos||(this._bolllPos=!0,Laya.timer.clear(this,this.updateList),Laya.timer.frameLoop(1,this,this.updateList)))}},d.prototype.getSevStringArr=function(){var t=this._sevStringArr[this._index1];return this._index1=this._index1+1,this._index1=this._index1>this._sevStringArr.length-1?0:this._index1,t},d.prototype.updateList=function(){for(var t=0;t<this._htmlArr.length;t++){var e=this._htmlArr[t];e&&e.updateList()}},d.prototype.updateSeverList=function(){var t=l.RotaryTableJiuZhouModel.instance.svrBroadcastList;if(null!=t&&0<t.length){0<this._sevStringArr.length&&(this._sevStringArr.length=0),t.reverse();for(var e=0;e<10;e++)if(t[e]){var i=t[e][0],n=t[e][1],s=r.common.CommonUtil.getNameByItemId(n),o=t[e][2],a="<span style='color:#ffffff;'>天赐鸿福,</span>";a+="<span style='color:rgb(13,121,255);'>"+i+"</span>",a+="<span style='color:#ffffff;'>获得了</span>",a+="<span style='color:"+r.common.CommonUtil.getColorById(n)+";'>"+s+"*"+o+"</span>",this._sevStringArr.push(a)}0<this._sevStringArr.length&&!this._bolll&&(this._bolll=!0,this.showHtml())}},d.prototype.PayRewardRunReply=function(){var t=l.RotaryTableJiuZhouModel.instance.noteList;if(1<t.length)WindowManager.instance.open(336,t);else{var e=new o(300,550),i=[t[0][0],e,this.height];this._arr=i;var n=t[t.length-1][2];this.showInSmoking(n,!1)}},d.prototype.showInSmoking=function(t,e){for(var i=0,n=a.instance.getDate(1),s=0;s<n.length;s++){var o=n[s][4];if(this._showItem[s]&&t==o){i=o-1;break}}this.startAni(i,e)},d.prototype.startAni=function(t,e){void 0===e&&(e=!1),this._maxSpeed=10,this._startSpeed=130,this._minSpeed=130,this._quanNum=3,this._targetIdnex=t,this._nowTargetIdnex=13,this._startdnex=this._nowTargetIdnex,this._isAniIng=!0,this._isTen=e,Laya.timer.clear(this,this.ani),this.ani()},d.prototype.ani=function(){var t=a.instance.getDate(1).length-1;this._nowTargetIdnex+=1,this._nowTargetIdnex=this._nowTargetIdnex>t?0:this._nowTargetIdnex,this._nowTargetIdnex===this._startdnex&&--this._quanNum;var e=this._showItem[this._nowTargetIdnex];if(e){var i=e.width/2+e.x,n=e.height/2+e.y;this.xuanZhonImg.pos(i,n),this.xuanZhonImg.visible=!0}if(0<this._quanNum)this._startSpeed-=10,this._startSpeed=(this._startSpeed,this._maxSpeed,this._maxSpeed),Laya.timer.clear(this,this.ani),Laya.timer.once(this._startSpeed,this,this.ani);else if(0==this._quanNum)this._startSpeed+=10,this._startSpeed=this._startSpeed>this._minSpeed?this._minSpeed:this._startSpeed,Laya.timer.clear(this,this.ani),Laya.timer.once(this._startSpeed,this,this.ani);else{if(this._nowTargetIdnex===this._targetIdnex){if(Laya.timer.clear(this,this.ani),this._isAniIng=!1,this._isTen){var s=l.RotaryTableJiuZhouModel.instance.noteList;WindowManager.instance.open(336,s)}else if(this._arr){GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_EFFECT",[this._arr]),CommonUtil.delayedPutInBag();var o=l.RotaryTableJiuZhouModel.instance.getNoteListGj();0<o.length&&WindowManager.instance.open(95,o)}return}Laya.timer.clear(this,this.ani),0<this._targetIdnex&&this._targetIdnex<=7?this._startSpeed+=20:this._startSpeed+=10,Laya.timer.once(this._startSpeed,this,this.ani)}},d.prototype.showReward=function(){for(var t=a.instance.getDate(1),e=0;e<t.length;e++){var i=t[e][0],n=t[e][1],s=this._showItem[e];if(s){s.dataSource=[i,n,0,null],s.visible=!0,s.isbtnClipIsPlayer=!1;var o=s.getChildByName("clip");o.play(),o.visible=!0}}},d.prototype.changproUI=function(){var t=l.RotaryTableJiuZhouModel.instance.getgRade(),e=s.instance.getDate(t[0])[2],i=t[1];this._proCtrl.maxValue=e,this._proCtrl.value=l.RotaryTableJiuZhouModel.instance.score,1==i?(this._isReward=!0,this._prizeEffect.play(),this._prizeEffect.visible=!0):(this._isReward=!1,this._prizeEffect.stop(),this._prizeEffect.visible=!1),this.setCionNumText()},d.prototype.xunBaoHandler=function(t){if(this._isUpdateBtnClick){this._isUpdateBtnClick=!1,Laya.timer.once(this._isUpdateBtnClickNum,this,this.chuang_isUpdateBtnClick);var e=PlayerModel.instance.ingot;if(0==t){if(e<l.RotaryTableJiuZhouModel.instance._oneMoney)return void CommonUtil.goldNotEnoughAlert()}else if(e<l.RotaryTableJiuZhouModel.instance._tenMoney)return void CommonUtil.goldNotEnoughAlert();this._isAniIng||l.RotaryTableJiuZhouCtrl.instance.DuobaoRun(t)}else i.instance.addNotice("操作过于频繁",!0)},d.prototype.chuang_isUpdateBtnClick=function(){this._isUpdateBtnClick=!0},d.prototype.caiQiReceiveBtnHandler=function(){this._isReward?l.RotaryTableJiuZhouCtrl.instance.GetDuobaoReward():WindowManager.instance.open(337,0)},d.prototype.myRecordBtnHandler=function(){l.RotaryTableJiuZhouCtrl.instance.GetDuobaoNotes()},d.prototype.openMyRecord=function(){var t=l.RotaryTableJiuZhouModel.instance.PayRewardNoteList;t&&0<t.length?WindowManager.instance.open(198,t):i.instance.addNotice("暂无记录",!0)},d.prototype.close=function(){n.prototype.close.call(this),Laya.timer.clear(this,this.ani),Laya.timer.clear(this,this.chuang_isUpdateBtnClick),Laya.timer.clear(this,this.updateList),Laya.timer.clear(this,this.activityHandler),this.desDoryArr(),this._prizeEffect.stop(),this._prizeEffect.visible=!1,CommonUtil.delayedPutInBag(),WindowManager.instance.close(337),WindowManager.instance.close(198),WindowManager.instance.close(336),WindowManager.instance.close(339),this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.rewardShowItem.stopTween()},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._prizeEffect=this.destroyElement(this._prizeEffect),this._showItem=this.destroyElement(this._showItem),this._clipArr=this.destroyElement(this._clipArr),this.rewardShowItem=this.destroyElement(this.rewardShowItem),n.prototype.destroy.call(this,t),this._proCtrl.destroy(),this._proCtrl=null},d.prototype.setCionNumText=function(){this.cionNumText.text=l.RotaryTableJiuZhouModel.instance.jackPot+"/"+l.RotaryTableJiuZhouModel.instance.maxJackPot,this.setPox()},d.prototype.setPox=function(){var t=this.text1.width+this.img1.width+this.cionNumText.width;this.text1.x=.5*(this.width-t),this.img1.x=this.text1.x+this.text1.width,this.cionNumText.x=this.img1.x+this.img1.width},d.prototype.initializeClip=function(){this._prizeEffect=p.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._prizeEffect,19),this._prizeEffect.pos(this.caiQiReceiveBtn.x-87,this.caiQiReceiveBtn.y-93,!0)},d.prototype.closeBtn1Handler=function(){this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.rewardShowItem.stopTween(),this.shouChouBiDeImg.visible=!1},d.prototype.showShouChouBiDeImg=function(){if(!this._tipsModelIsOpen){this.rewardShowItem.stopTween(),this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this.shouChouBiDeImg.visible=!1,this.shouChouBiDeImg.y=643;var t=h.instance.getGradeByRank(0,1),e=h.instance.getDate(0,t),i=u.instance.getFuncIsOpen(217);if(e&&l.RotaryTableJiuZhouModel.instance.restTm>=GlobalData.serverTime&&i&&1==l.RotaryTableJiuZhouModel.instance.openState){var n=e[6],s=e[8],o=e[7],a=e[9];this.mouldNameText.text=""+a,this.rewardShowItem.showRewardObj(n,s,o),this._shouChouBiDeImgTween=TweenJS.create(this.shouChouBiDeImg).to({y:this.shouChouBiDeImg.y-10},1e3).start().yoyo(!0).repeat(99999999),this._shouChouBiDeImgTween.to({y:this.shouChouBiDeImg.y-10},1e3).start(),this._tipsModelIsOpen=this.shouChouBiDeImg.visible=!0}}},t=d,l.RotaryTableJiuZhouPanel=t}(modules=modules||{}),function(t){var r,e,i,n,s;function o(){return e.call(this)||this}r=t.rotary_table_jiuzhou||(t.rotary_table_jiuzhou={}),i=t.config.JzDuobaoRewardCfg,n=t.common.CustomList,e=ui.RotaryTableRewardRankAlertUI,__extends(o,e),o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.width=593,this._list.height=635,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=r.RotaryTableJiuZhouRankItem,this._list.x=33,this._list.y=116,this.addChild(this._list),this.TipsText.text="每次抽奖可获得10点积分,积分每日0点重置",this.titleTxt.text="积分奖励"},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateList()},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_UPDATE",this,this.updateList)},o.prototype.overSort=function(t,e){var i=t[0],n=e[0],s=r.RotaryTableJiuZhouModel.instance.getRewardStart(i),o=r.RotaryTableJiuZhouModel.instance.getRewardStart(n),a=1;return s==o?i-n:(2==s&&2!=o?a=1:2!=s&&2==o&&(a=-1),a)},o.prototype.updateList=function(){var t=i.instance.getDateArr();t.sort(this.overSort),this._list.datas=t},s=o,r.RotaryTableJiuZhouRankAlert=s}(modules=modules||{}),function(n){var s,e,o,i,a,t;function r(){return null!==e&&e.apply(this,arguments)||this}s=n.rotary_table_jiuzhou||(n.rotary_table_jiuzhou={}),o=n.config.JzDuobaoRankCfg,i=n.common.BtnGroup,a=n.common.CustomList,e=ui.RotaryTableSoaringRankAwardAlertUI,__extends(r,e),r.prototype.destroy=function(){this._tenBtnBtnClip=this.destroyElement(this._tenBtnBtnClip),this._oneBtnBtnClip=this.destroyElement(this._oneBtnBtnClip),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this._showIds=new Array,this._list=new a,this._list.width=589,this._list.height=481,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=s.RotaryTableJiuZhouRankAwardItem,this._list.x=36,this._list.y=172,this.addChild(this._list),this._allMingCiArr=new Array;for(var t=1;t<=30;t++)this._allMingCiArr.push(t);for(this._allMingCiArr2=new Array,t=1;t<=10;t++)this._allMingCiArr2.push(t);this._btnGroup=new i,this._btnGroup.setBtns(this.rankBtn,this.gradeBtn),CommonUtil.setHTMLPro(this.StatementHTML,"#b15315","SimHei",22,"center")},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.titleTxt.text="九州夺宝排名",s.RotaryTableJiuZhouModel.instance._nowIndex=0,this._btnGroup.selectedIndex=0},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_MYLIST",this,this.showScore),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_QULIST",this,this.showScore),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_BROADCAST_LIST",this,this.showScore)},r.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(s.RotaryTableJiuZhouModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI()):1===this._btnGroup.selectedIndex&&(s.RotaryTableJiuZhouModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI())},r.prototype.showUI=function(){0===this._btnGroup.selectedIndex?(this.TipText.visible=!0,this.StatementHTML.visible=!1,this.TipText.pos(47,759),this.StatementHTML.pos(47,744),this._list.datas=this._allMingCiArr,s.RotaryTableJiuZhouCtrl.instance.getDuobaoRankCharInfo(0)):1===this._btnGroup.selectedIndex&&(this.TipText.visible=!0,this.StatementHTML.visible=!0,this.TipText.pos(47,774),this.StatementHTML.pos(47,744),this._list.datas=this._allMingCiArr2,s.RotaryTableJiuZhouCtrl.instance.getDuobaoRankCharInfo(1),s.RotaryTableJiuZhouCtrl.instance.GetDuobaoServerBroadcast()),s.RotaryTableJiuZhouCtrl.instance.GetDuobaoInfo(),this.showScore()},r.prototype.showScore=function(){0===this._btnGroup.selectedIndex?this.showMySocre():1===this._btnGroup.selectedIndex&&this.showQuSocre()},r.prototype.showMySocre=function(){var t=n.player.PlayerModel.instance.actorId,e=s.RotaryTableJiuZhouModel.instance._myNodeListByObjId[t];e?(this.myRankNumText.text="我的排名:"+e[0],this.myIntegralText.text="我的积分:"+e[2]):(this.myRankNumText.text="我的排名:未上榜",this.myIntegralText.text="我的积分:"+s.RotaryTableJiuZhouModel.instance.score+"积分")},r.prototype.showQuSocre=function(){var t=n.player.PlayerModel.instance.serverPgId,e=o.instance.getLaet(1)[3],i=s.RotaryTableJiuZhouModel.instance._quNodeListByObjId[t];i?(this.myRankNumText.text="区服排名:"+i[0],this.myIntegralText.text="本区积分:"+i[2]):(this.myRankNumText.text="区服排名:未上榜",this.myIntegralText.text="本区积分:"+s.RotaryTableJiuZhouModel.instance._totalScore+"积分"),this.StatementHTML.innerHTML="个人积分达到<span style='color:#b15315'>"+e+"</span>可领取区服排行奖励"},t=r,s.RotaryTableJiuZhouRankAwardAlert=t}(modules=modules||{}),function(t){var o,a,r,e,i,n,s;function l(){return a.call(this)||this}o=t.rotary_table_jiuzhou||(t.rotary_table_jiuzhou={}),r=laya.maths.Point,e=laya.ui.List,i=t.bag.BagItem,n=laya.events.Event,a=ui.RotaryTableRewardAlertUI,__extends(l,a),l.prototype.destroy=function(){this._list=this.destroyElement(this._list),a.prototype.destroy.call(this)},l.prototype.initialize=function(){a.prototype.initialize.call(this),this._list=new e,this._list.vScrollBarSkin="",this._list.width=565,this._list.height=259,this._list.repeatX=5,this._list.spaceX=16.25,this._list.spaceY=8,this._list.itemRender=i,this._list.x=48,this._list.y=70,this.addChild(this._list)},l.prototype.onOpened=function(){a.prototype.onOpened.call(this),this.oneMoneytext.text=""+o.RotaryTableJiuZhouModel.instance._oneMoney,this.tenMoneytext.text=""+o.RotaryTableJiuZhouModel.instance._tenMoney,CommonUtil.delayedButNoPutInBag()},l.prototype.close=function(t,e){a.prototype.close.call(this,t,e),CommonUtil.delayedButNoPutInBag()},l.prototype.playEffect=function(t){for(var e=t,i=0;i<e.length;i++){var n=this._list.cells[i].x+this._list.cells[i].width/2,s=this._list.cells[i].y+this._list.cells[i].height/2,o=new r(n,s),a=[e[i][0],o,this.height];GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_EFFECT",[a])}},l.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t);for(var e=[],i=0;i<t.length;i++)e.push([t[i][0],t[i][1],0,null]);this._list.array=e,this._list.scrollTo(0),this.playEffect(t);var n=o.RotaryTableJiuZhouModel.instance.getNoteListGj();0<n.length&&WindowManager.instance.open(95,n);var s=PlayerModel.instance.ingot;s<o.RotaryTableJiuZhouModel.instance._oneMoney?this.oneMoneytext.color="#FF3e3e":this.oneMoneytext.color="#4c5e8a",s<o.RotaryTableJiuZhouModel.instance._tenMoney?this.tenMoneytext.color="#FF3e3e":this.tenMoneytext.color="#4c5e8a"},l.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.oneBtn.on(n.CLICK,this,this.xunBaoHandler,[0]),this.tenBtn.on(n.CLICK,this,this.xunBaoHandler,[1])},l.prototype.offEvt=function(){a.prototype.offEvt.call(this),this.oneBtn.off(n.CLICK,this,this.xunBaoHandler),this.tenBtn.off(n.CLICK,this,this.xunBaoHandler)},l.prototype.xunBaoHandler=function(t){var e=PlayerModel.instance.ingot;if(0==t){if(e<o.RotaryTableJiuZhouModel.instance._oneMoney)return void CommonUtil.goldNotEnoughAlert();o.RotaryTableJiuZhouCtrl.instance.DuobaoRun(t),this.close()}else{if(e<o.RotaryTableJiuZhouModel.instance._tenMoney)return void CommonUtil.goldNotEnoughAlert();o.RotaryTableJiuZhouCtrl.instance.DuobaoRun(t)}},l.prototype.openRecharge=function(){WindowManager.instance.open(111),this.close()},s=l,o.RotaryTableJiuZhouRewardAlert=s}(modules=modules||{}),function(t){var h,c,e,i,o,p,a,n;function s(){var t=c.call(this)||this;return t.VipConditionLevel=0,t.vipLevel=0,t}h=t.login_reward||(t.login_reward={}),e=ui.LoginRewardItemUI,i=t.common.CustomClip,o=t.bag.BagUtil,p=t.vip.VipModel,a=t.common.CommonUtil,c=e,__extends(s,c),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._cfg=null,c.prototype.destroy.call(this,t)},s.prototype.initialize=function(){c.prototype.initialize.call(this),this.creatEffect()},s.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},s.prototype.onOpened=function(){c.prototype.onOpened.call(this),this._btnClip.play()},s.prototype.setData=function(t){c.prototype.setData.call(this,t),this.vipLevel=p.instance.vipLevel,this._cfg=t;var e=this._cfg[0],i=h.LoginRewardModel.instance.getNodeInfoById(e),n=0;i&&(n=i[1]),0===this._cfg[2]?(this.tomorrowIsOk.visible=!1,this.idText.text="今日登录可领取",this.idText.color="#395981",0<h.LoginRewardModel.instance.nodeList.length?(1==n?(this._btnClip.visible=!0,this.sureBtn.visible=!0,this.received.visible=!1):(this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0),this.VipConditionLevel=this._cfg[1]):(this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!1,this.theEnd.visible=!0)):1===this._cfg[2]&&(this.idText.text="明日登录可领取",this.received.visible=!1,this.idText.color="#395981",this.sureBtn.visible=!1,this.tomorrowIsOk.visible=!0),0!==this._cfg[1]&&(this.VipConditionLevel=this._cfg[1],this.idText.text="SVIP"+this._cfg[1]+"可额外领取",this.idText.color="#395981",this.tomorrowIsOk.visible=!1,0<h.LoginRewardModel.instance.nodeList.length?1==n?this.vipLevel>=this.VipConditionLevel?(this._btnClip.visible=!0,this.sureBtn.visible=!0,this.received.visible=!1):this._btnClip.visible=!1:0==n?(this._btnClip.visible=!1,this.sureBtn.visible=!0,this.received.visible=!1):(this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0):(this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!1,this.theEnd.visible=!0)),this._itemId=this._cfg[0];for(var s=this._cfg[4],o=[],a=0;a<s.length;a++)o.push(s[a][0]);var r=o.length,l=[];for(l.push(this.loginBase1),l.push(this.loginBase2),l.push(this.loginBase3),a=0;a<3;a++)a<r?(l[a].visible||(l[a].visible=!0),l[a].dataSource=[s[a][0],s[a][1],0,null]):l[a].visible=!1},s.prototype.close=function(){c.prototype.close.call(this),this._btnClip.stop()},s.prototype.creatEffect=function(){this._btnClip=i.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.sureBtn.addChild(this._btnClip),this._btnClip.pos(-5,-8),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},s.prototype.sureBtnHandler=function(){if(this.tomorrowIsOk.visible=!1,0==this.VipConditionLevel){if(this.vipLevel>=this.VipConditionLevel){for(var t=[],e=0,i=(s=this._cfg[4]).length;e<i;e++){var n=s[e];t.push([n[0],n[1],0,null])}o.canAddItemsByBagIdCount(t)&&(h.LoginRewardCtrl.instance.getLoginRewardReward(this._itemId),this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0)}}else if(0!=this.VipConditionLevel)if(this.vipLevel>=this.VipConditionLevel){var s;for(t=[],e=0,i=(s=this._cfg[4]).length;e<i;e++)n=s[e],t.push([n[0],n[1],0,null]);o.canAddItemsByBagIdCount(t)&&(h.LoginRewardCtrl.instance.getLoginRewardReward(this._itemId),this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0)}else a.alert("温馨提示","领取奖励需要SVIP"+this.VipConditionLevel+",是否前往提升SVIP?",[Handler.create(this,a.gotoVIP)])},n=s,h.LoginRewardItem=n}(modules=modules||{}),function(e){var l,i,t,n,s,o;function a(){var t=i.call(this)||this;return t.arr=[],t.lessenTm=0,t.RankedType=0,t.TypeParame=0,t._state=!1,t}l=e.login_reward||(e.login_reward={}),t=ui.LoginRewardUI,n=e.common.CustomList,s=e.config.LoginRewardCfg,i=t,__extends(a,i),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),this._btnClip&&(this._btnClip.removeSelf(),this._btnClip.destroy(),this._btnClip=null),i.prototype.destroy.call(this,t)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this._showIds=new Array,this._list=new n,this._list.scrollDir=1,this._list.itemRender=l.LoginRewardItem,this._list.vCount=7,this._list.hCount=1,this._list.width=640,this._list.height=673,this._list.x=7,this._list.y=36,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0,this.setItem(0,1)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("LOGIN_REWARD_UPADTE",this,this._updateView),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.bgImg.skin="login_reward/image_dlhl_hddt.jpg",l.LoginRewardCtrl.instance.getLoginRewad(),this.setItem(0,1),this._updateView(),this.setTempArr(),this.showUI()},a.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,e.money_cat.MoneyCatModel.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==e.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):e.fight_talisman.FightTalismanModel.instance.state?-1==e.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):(this.okBtn.visible=!1,this.wanChengImg.visible=!0,this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029))},a.prototype.okBtnHandler=function(){0!=e.first_pay.FirstPayModel.instance.giveState?e.money_cat.MoneyCatModel.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==e.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):e.fight_talisman.FightTalismanModel.instance.state?-1==e.gloves.GlovesModel.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381):WindowManager.instance.open(118)},a.prototype.setTempArr=function(){for(var t=0;t<this.arr.length;t++)this.tempArr=this.arr},a.prototype._updateView=function(){this.RestTm=l.LoginRewardModel.instance.restTm,this.lessenTm=this.RestTm,this.RankedType=l.LoginRewardModel.instance.rankedType,this.TypeParame=l.LoginRewardModel.instance.typeParame,this.arr=s.instance.getCfgBytype(this.RankedType,this.TypeParame),this.arr.sort(this.sortFunc.bind(this)),0<l.LoginRewardModel.instance.nodeList.length?this._list.datas=this.arr:this._list.datas=this.tempArr,this.setActivitiTime()},a.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(191);l.LoginRewardModel.instance.restTm>=GlobalData.serverTime&&t&&0<l.LoginRewardModel.instance.nodeList.length?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},a.prototype.activityHandler=function(){l.LoginRewardModel.instance.restTm<GlobalData.serverTime?(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler)):this.activityText.text=""+CommonUtil.timeStampToHHMMSS(l.LoginRewardModel.instance.restTm)},a.prototype.setItem=function(t,e){this.arr=s.instance.getCfgBytype(t,e)},a.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=l.LoginRewardModel.instance.getNodeInfoById(i),o=l.LoginRewardModel.instance.getNodeInfoById(n),a=s?s[1]:0,r=o?o[1]:0;return(a=1===a?0:0===a?1:a)===(r=1===r?0:0===r?1:r)?i-n:a-r},o=a,l.LoginRewardPanel=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.login_reward||(t.login_reward={}),n=t.common.CommonUtil,i=ui.LoginRewardTipAlertUI,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},o.prototype.sureBtnHandler=function(){n.gotoVIP(),this.close()},s=o,e.LoginRewardTipAlert=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=0,e=GlobalData.getConfig("week_login");t<e.length;t++){var i=e[t],n=i[0];this._tab[n]=i}},n.prototype.getArrDare=function(t){return this._tab[t]},i=n,e.WeekLoginCfg=i}(modules=modules||{}),function(t){var l,e,i,n,s;function o(){var t=e.call(this)||this;return t._state=!1,t.arr=new Array,t}l=t.week_login||(t.week_login={}),i=t.config.WeekLoginCfg,n=t.common.SimpleList,e=l.LoginAwardBasePanel,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(l.WeekLoginItem,640,154),this._list.size(640,628),this._list.pos(40,300,!0),this.addChild(this._list),this.topBg.skin="week_login/image_zmkh_zmkh2.jpg",this.activityText.y=this.activityText1.y=240,this.tipTxt1.visible=!0},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),l.WeekLoginCtrl.instance.getWeekLogin(),this.updateView()},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("WEEK_LOGIN_UPDATE",this,this.updateView)},o.prototype.updateView=function(){if(l.WeekLoginModel.instance.info){var t=l.WeekLoginModel.instance.nodeList;if(t&&t.length){for(var e=this.arr.length=0;e<t.length;e++)this.arr.push(i.instance.getArrDare(t[e][0]));this.arr.sort(this.sortFunc.bind(this)),this._list.datas=this.arr,this.updateRestTime(CommonUtil.getZero0clockTimeStamp())}}},o.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=l.WeekLoginModel.instance.getNodeInfoById(i),o=l.WeekLoginModel.instance.getNodeInfoById(n),a=s?s[1]:0,r=o?o[1]:0;return(a=1===a?0:0===a?1:a)==(r=1===r?0:0===r?1:r)?i-n:a-r},s=o,l.WeekLoginPanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._ids=[];for(var t=GlobalData.getConfig("week_single_pay"),e=0,i=t.length;e<i;e++){var n=t[e][0];this.ids.push(n),this._tab[n]=t[e]}},n.prototype.getCfgById=function(t){return this._tab[t]},Object.defineProperty(n.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),i=n,e.WeekSinglePayCfg=i}(modules=modules||{}),function(i){var t,e,n,s,o;function a(){}t=i.singlePay||(i.singlePay={}),e=i.common.GlobalData,n=i.funcOpen.FuncOpenModel,s=i.config.WeekSinglePayCfg,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.getWeekSinglePayReply=function(t){t&&(this.state=t[0],this.time=t[1],this.list=t[2],this.checkRP(),this.setFuncState(),e.dispatcher.event("WEEK_SINGLE_PAY_UPDATE"))},a.prototype.checkRP=function(){for(var t=0,e=this.list;t<e.length;t++)if(0<e[t][1])return void i.redPoint.RedPointCtrl.instance.setRPProperty("weekSinglePayRP",!0);i.redPoint.RedPointCtrl.instance.setRPProperty("weekSinglePayRP",!1)},a.prototype.judgeState=function(t,e,i){return 0<e?2:i==s.instance.getCfgById(t)[5]?0:1},a.prototype.setFuncState=function(){n.instance.setActionOpen(210,this.state?1:2)},o=a,t.SinglePayModel=o}(modules=modules||{}),function(t){var u,e,i,d,y,n,s;function o(){return e.call(this)||this}u=t.singlePay||(t.singlePay={}),i=ui.InvestItemUI,d=t.config.WeekSinglePayCfg,y=t.config.RechargeCfg,n=t.common.CustomClip,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.investText,"#1f304d","SimHei",26),this._items=[this.investBase1,this.investBase2,this.investBase3,this.investBase4],this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(.8,.8,!0)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("WEEK_SINGLE_PAY_UPDATE",this,this.updateBtnState)},o.prototype.setData=function(t){var e=this._id=t[0],i=t[1],n=t[2],s=d.instance.getCfgById(e),o=s[5];this._state=u.SinglePayModel.instance.judgeState(e,i,n);var a=s[1],r=y.instance.getRecharCfgByIndex(a)[2];this.investText.innerHTML="单笔充值<span style='color:#b15315'>&nbsp;"+r+"元</span>,可领取奖励";for(var l=CommonUtil.formatItemData(s[4]),h=0,c=this._items.length;h<c;h++)h>=l.length?this._items[h].visible=!1:(this._items[h].visible=!0,this._items[h].dataSource=l[h]);if(this.updateBtnState(),1==o)this.tipBox.visible=!1;else{var p=n-i;this.tipBox.visible=!0,this.tipTxt.text=o-p+"/"+o,this.tipTxt.color=o-p?"#168a17":"#ff3e3e"}},o.prototype.updateBtnState=function(){u.SinglePayModel.instance.state?2==this._state?(this.scheduleText.text="(1/1)",this.scheduleText.color="#168a17",n.thisPlay(this._btnClip),this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119",this.sureBtn.mouseEnabled=!0,this.sureBtn.label="领取",this.sureBtn.pos(482,64,!0)):1==this._state?(this.scheduleText.text="(0/1)",this.scheduleText.color="#ff3e3e",n.thisStop(this._btnClip),this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460",this.sureBtn.label="前往充值",this.sureBtn.mouseEnabled=!0,this.sureBtn.pos(482,64,!0)):(this.scheduleText.text="(1/1)",this.scheduleText.color="#168a17",n.thisStop(this._btnClip),this.sureBtn.skin="common/txt_commmon_ylq.png",this.sureBtn.mouseEnabled=!1,this.sureBtn.label="",this.sureBtn.pos(505,64,!0)):(n.thisStop(this._btnClip),this.sureBtn.skin="common/txt_commmon_yjies.png",this.sureBtn.mouseEnabled=!1,this.sureBtn.label="",this.sureBtn.pos(505,64,!0))},o.prototype.sureBtnHandler=function(){u.SinglePayModel.instance.state?2==this._state?u.SinglePayCtrl.instance.getWeekSinglePayAward(this._id):1==this._state&&WindowManager.instance.open(111):CommonUtil.noticeError(41101)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},s=o,u.SinglePayItem=s}(modules=modules||{}),function(t){var e,i,n,c,p,s,o,a;function r(){return i.call(this)||this}e=t.singlePay||(t.singlePay={}),n=t.singlePay.SinglePayItem,c=t.common.CommonUtil,p=t.singlePay.SinglePayModel,s=ui.SinglePayViewUI,o=t.common.CustomList,i=s,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=new o,this._list.scrollDir=1,this._list.x=40,this._list.y=302,this._list.width=640,this._list.height=666,this._list.hCount=1,this._list.itemRender=n,this._list.spaceY=5,this.addChild(this._list)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,c.gotoSuggestUp),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("WEEK_SINGLE_PAY_UPDATE",this,this.updateView)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView(),this.showUI()},r.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},r.prototype.updateView=function(){var t=p.instance.list;t&&(this._time=c.getZero0clockTimeStamp(),this._state=p.instance.state,this.loopHandler(),this._state&&(Laya.timer.loop(1e3,this,this.loopHandler),this.items=t))},Object.defineProperty(r.prototype,"items",{set:function(t){t=t.sort(this.sortFunc.bind(this)),this._list.datas=t},enumerable:!0,configurable:!0}),r.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1],a=t[2],r=e[2],l=p.instance.judgeState(i,s,a),h=p.instance.judgeState(n,o,r);return h<l?-1:l<h?1:c.smallToBigSort(i,n)},r.prototype.loopHandler=function(){this._state?(this.timeTxt.visible=!0,this.tipTxt.text="活动倒计时:",this.tipTxt.color="#ffffff",this.timeTxt.text=c.timeStampDDHHMMToHHMMSS(this._time)):(this.timeTxt.visible=!1,this.tipTxt.text="活动已结束",this.tipTxt.color="#ff3e3e",Laya.timer.clear(this,this.loopHandler))},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},a=r,e.SinglePayPanel=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._ids=[];for(var t=GlobalData.getConfig("week_accumulate"),e=0,i=t.length;e<i;e++){var n=t[e][0];this.ids.push(n),this._tab[n]=t[e]}},n.prototype.getCfgById=function(t){return this._tab[t]},Object.defineProperty(n.prototype,"ids",{get:function(){return this._ids},enumerable:!0,configurable:!0}),i=n,e.WeekRepeatPayCfg=i}(modules=modules||{}),function(s){var o,t,a,e,i,n;function r(){return t.call(this)||this}o=s.repeatPay||(s.repeatPay={}),a=s.common.CommonUtil,e=s.common.CustomList,i=ui.RepeatPayViewUI,t=i,__extends(r,t),r.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=new e,this._list.scrollDir=1,this._list.x=40,this._list.y=298,this._list.width=640,this._list.height=675,this._list.hCount=1,this._list.itemRender=o.RepeatPayItem,this._list.spaceY=5,this.addChild(this._list)},r.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("WEEK_REPEAT_PAY_UPDATE",this,this.updateView),this.onAutoClick(this.okBtn,this,a.gotoSuggestUp),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI)},r.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateView(),this.showUI()},r.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,s.fight_talisman.FightTalismanModel.instance.state?-1==s.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):s.money_cat.MoneyCatModel.instance.state?!s.halo.HaloModel.instance.isHalo()&&s.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==s.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},r.prototype.updateView=function(){var t=o.RepeatPayModel.instance.list;t&&(this._time=a.getZero0clockTimeStamp(),this._state=o.RepeatPayModel.instance.state,this.loopHandler(),this._state&&(Laya.timer.loop(1e3,this,this.loopHandler),this.items=t))},Object.defineProperty(r.prototype,"items",{set:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i][0];s.config.WeekRepeatPayCfg.instance.getCfgById(n)[5]<=o.RepeatPayModel.instance.money&&e.push(t[i])}this._list.datas=e.sort(this.sortFunc.bind(this))},enumerable:!0,configurable:!0}),r.prototype.sortFunc=function(t,e){var i=t[1],n=e[1],s=t[0],o=e[0];return n<i?-1:i<n?1:a.smallToBigSort(s,o)},r.prototype.loopHandler=function(){this._state?(this.timeTxt.visible=!0,this.tipTxt.text="活动倒计时:",this.tipTxt.color="#ffffff",this.timeTxt.text=a.timeStampDDHHMMToHHMMSS(this._time)):(this.timeTxt.visible=!1,this.tipTxt.text="活动已结束",this.tipTxt.color="#ff3e3e",Laya.timer.clear(this,this.loopHandler))},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),t.prototype.destroy.call(this)},n=r,o.RepeatPayPanel=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("week_consume"),e=0;e<t.length;++e)this._table[t[e][0]]=t[e]},n.prototype.getCfgByID=function(t){return this._table[t]},i=n,e.WeekConsumeCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.weekConsume||(t.weekConsume={}),n=t.common.CustomList,i=ui.WeekConsumeUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.width=640,this._list.height=671,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=298,this._list.itemRender=e.WeekConsumeItem,this.addChildAt(this._list,4)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.WeekConsumeCtrl.instance.getWeekConsume(),this.showUI()},o.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==t.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):(this.okBtn.visible=!1,this.wanChengImg.visible=!0,this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029))},o.prototype.okBtnHandler=function(){0!=t.first_pay.FirstPayModel.instance.giveState?t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==t.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381):WindowManager.instance.open(118)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("WEEK_CONSUME_UPDATE",this,this.refresh),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},o.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),e.WeekConsumeModel.instance.time>=GlobalData.serverTime&&e.WeekConsumeModel.instance.state?(this.timeLeft.visible=!0,this.activityText.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText.color="#FF3e3e",this.timeLeft.visible=!1,this.activityText.text="活动已结束")},o.prototype.activityHandler=function(){var t=CommonUtil.getZero0clockTimeStamp();t>=GlobalData.serverTime?this.timeLeft.text=""+CommonUtil.timeStampDDHHMMToHHMMSS(t):(this.activityText.color="#FF3e3e",this.timeLeft.visible=!1,this.activityText.text="活动已结束",GlobalData.dispatcher.event("WEEK_CONSUME_ITEM_UPDATE"),Laya.timer.clear(this,this.activityHandler))},o.prototype.refresh=function(){this.setActivitiTime();var t=e.WeekConsumeModel.instance.arr;0<t.length?(t.sort(function(t,e){return t[1]==e[1]?t[0]-e[0]:1==t[1]?-1:2==t[1]?1:1==e[1]?1:-1}),this._list.datas=t):GlobalData.dispatcher.event("WEEK_CONSUME_ITEM_UPDATE")},s=o,e.WeekConsumePanel=s}(modules=modules||{}),function(n){var h,t,c,e;function i(){return t.call(this)||this}h=n.limit_pack||(n.limit_pack={}),c=n.config.LimitPackCfg,t=ui.LimitPackAlertUI,__extends(i,t),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},set:function(t){t<0?this._index=0:t>=this._infoRecord.length?this._index=this._infoRecord.length-1:this._index=t},enumerable:!0,configurable:!0}),i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("LIMIT_PACK_UPDATE",this,this.updateHandler),this.onAutoClick(this.buyBtn,this,this.buyBtnHandler),this.onAutoClick(this.lastBtn,this,this.switchPage,[!1]),this.onAutoClick(this.nextBtn,this,this.switchPage,[!0])},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._infoRecord=h.LimitPackModel.instance.limitPackInfo,this._index=0,this.refresh()},i.prototype.offEvt=function(){t.prototype.offEvt.call(this),Laya.timer.clear(this,this.countdownHandler)},i.prototype.countdownHandler=function(){this.time.text=""+CommonUtil.timeStampToHHMMSS(this._infoRecord[this._index][2]+h.LimitPackModel.instance.updateTime)},i.prototype.refresh=function(){Laya.timer.clear(this,this.countdownHandler),this.lastBtn.visible=!(0==this._index||this._infoRecord.length<=1),this.nextBtn.visible=this._index<this._infoRecord.length-1;var t=this._infoRecord[this._index],e=c.instance.getCfgByLevel(t[0]);if(e){this.level.text="("+t[0]+"级)",1<t[2]?(this.buyBtn.skin="common/btn_tonyong_35.png",this.buyBtn.label="购买",this.descript.text="后永久消失"):1==t[2]?(this.buyBtn.skin="limit_pack/txt_common_ygm.png",this.buyBtn.label="",this.descript.text="已购买"):(this.descript.text="已结束",this.buyBtn.skin="common/txt_commmon_yjies.png",this.buyBtn.label="");var i=1<t[1]?e[3]:e[6],n=1<t[1]?e[4]:e[7];this.originalPrice.text=i.toString(),this.discountPrice.text=n.toString(),n<=PlayerModel.instance.ingot?this.discountPrice.color="#7c1d0c":this.discountPrice.color="#ff3e3e",1<t[1]?this.vip.text="购买后解锁更低折扣":this.vip.text="SVIP"+e[8]+"可购买";var s=1<t[1]?9:10;this.discount.skin="assets/icon/ui/limit_pack/"+e[s]+".png",1<t[2]?(this.time.visible=!0,this.time.text=""+CommonUtil.timeStampToHHMMSS(t[2]+h.LimitPackModel.instance.updateTime),Laya.timer.loop(1e3,this,this.countdownHandler)):this.time.visible=!1;for(var o=[this.baseItem0,this.baseItem1,this.baseItem2,this.baseItem3,this.baseItem4],a=e[1<t[1]?2:5],r=196-49*(a.length-1),l=0;l<o.length;++l)l<a.length?(o[l].visible=!0,o[l].x=136+r+98*l,o[l].dataSource=[a[l][0],a[l][1],0,null],o[l]._qualityBg.skin="limit_pack/image_sc_c.png"):o[l].visible=!1}},i.prototype.buyBtnHandler=function(){var t=this._infoRecord[this._index],e=c.instance.getCfgByLevel(t[0]);if(1<t[2]){var i=1<t[1]?0:1;if(i&&n.vip.VipModel.instance.vipLevel<e[8])return void CommonUtil.alert("温馨提示","SVIP等级不足，是否前往提升SVIP？",[Laya.Handler.create(this,function(){WindowManager.instance.open(111),WindowManager.instance.close(357)})]);h.LimitPackCtrl.instance.buyLimitPack([t[0],i])}},i.prototype.switchPage=function(t){t?++this.index:--this.index,this.refresh()},i.prototype.updateHandler=function(t){for(var e=h.LimitPackModel.instance.limitPackInfo,i=0;i<e.length;++i){for(var n=e[i],s=!1,o=0;o<this._infoRecord.length;++o)if(this._infoRecord[o][0]==n[0]){this._infoRecord[o]=n,s=!0;break}s||this._infoRecord.push(n)}for(i=0;i<this._infoRecord.length;++i){for(s=!1,o=0;o!=e.length;++o)if(this._infoRecord[i][0]==e[o][0]){s=!0;break}s||(1<this._infoRecord[i][1]&&(this._infoRecord[i][1]=0),this._infoRecord[i][2]=0)}var a=this._infoRecord[this.index][0],r=!1;for(i=0;i<e.length;++i)if(e[i][0]==a){r=!0;break}if(!r&&(t?(this._infoRecord[this.index][1]=1,this._infoRecord[this.index][2]=1):this._infoRecord[this.index][2]=0,0<e.length))for(o=0;o<this._infoRecord.length;++o)if(this._infoRecord[o][0]==e[0][0]){this.index=o;break}this.refresh()},e=i,h.LimitPackAlert=e}(modules=modules||{}),function(e){var c,i,t,n;function s(){var t=i.call(this)||this;return t._activityTime=0,t._type=9,t}c=e.kuanghuan||(e.kuanghuan={}),t=e.common.CustomList,i=ui.KuangHuanPowerViewUI,__extends(s,i),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this,t)},s.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new t,this._list.scrollDir=1,this._list.itemRender=c.KuangHuanItem,this._list.hCount=1,this._list.width=640,this._list.height=651,this._list.x=5,this._list.y=12,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("KUANGHUAN",this,this._updateView),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI),this.onAutoGlobalEvt("KUANGHUAN_UPDATE_TAB",this,function(){c.KuangHuanModel.instance.updateTabByPanel()})},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),1==c.KuangHuanModel.instance.openState&&(c.KuangHuanCtrl.instance.GetKuanghuanInfo(),this._updateView()),this.showUI()},s.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,e.fight_talisman.FightTalismanModel.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==e.zhizun.ZhizunModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡"):(e.money_cat.MoneyCatModel.instance.state&&(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？"),this.tipsImg.pos(99,1040)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1044))},s.prototype.okBtnHandler=function(){0!=e.first_pay.FirstPayModel.instance.giveState?e.fight_talisman.FightTalismanModel.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==e.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):e.money_cat.MoneyCatModel.instance.state||WindowManager.instance.open(381):WindowManager.instance.open(379):WindowManager.instance.open(118)},s.prototype._updateView=function(){this.updateItem()},s.prototype.updateItem=function(){var t=c.KuangHuanModel.instance.nodeList;if(t){for(var e=0;e<t.length;e++)9===t[e][0]&&(this._type=t[e][0],this._activityTime=t[e][1]+GlobalData.serverTime);this._kuanghuanArr=c.KuangHuanCfg.instance.getCfgBytype(this._type),this._kuanghuanArr.sort(this.sortFunc.bind(this)),this._list.datas=this._kuanghuanArr,this.setActivitiTime()}},s.prototype.setActivitiTime=function(){if(Laya.timer.clear(this,this.activityHandler),this._activityTime){var t=e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(226);this._activityTime>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")}},s.prototype.activityHandler=function(){this._activityTime>GlobalData.serverTime?this.activityText.text=""+e.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._activityTime):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},s.prototype.sortFunc=function(t,e){for(var i=c.KuangHuanModel.instance.nodeList,n=[],s={},o=0;o<i.length;o++)this._type==i[o][0]&&(n=i[o][2]);for(o=0;o<n.length;o++)s[n[o][0]]=n[o];var a=t[0],r=e[0],l=s[a]?s[a][1]:0,h=s[r]?s[r][1]:0;return(l=0===l?1:1===l?0:l)===(h=0===h?1:1===h?0:h)?a-r:l-h},n=s,c.KuangHuanPowerPanel=n}(modules=modules||{}),function(t){var s,e,i,n,o,a;function r(){var t=e.call(this)||this;return t.table={},t.arr=[],t}s=t.payRank||(t.payRank={}),i=ui.PayRankViewUI,n=t.common.CustomList,o=t.config.ConsumeRankCfg,e=i,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.itemRender=s.PayRankItem,this._list.vCount=5,this._list.hCount=1,this._list.width=642,this._list.height=624,this._list.x=38,this._list.y=360,this._list.spaceY=6,this.addChild(this._list),this._rankCount=o.instance.dataArr[o.instance.dataArr.length-1][0][1],this.centerX=this.centerY=0},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.PayRankCtrl.instance.getConsumeCount(),s.PayRankCtrl.instance.getConsumeRank()},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("PAY_RANK_UPDATE",this,this.updateView)},r.prototype.updateView=function(){this.setActivitiTime(),this.updateRank(),this.updateBottom()},r.prototype.setActivitiTime=function(){this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)},r.prototype.activityHandler=function(){this.activityText.text=""+t.common.CommonUtil.timeStampToHHMMSS(s.PayRankModel.Instance.activityTime),s.PayRankModel.Instance.activityTime<GlobalData.serverTime?(this.activityEnd.text="活动已结束",this.activityEnd.color="#ff0000",this.activityText.visible=!1,Laya.timer.clear(this,this.activityHandler)):(this.activityEnd.text="活动倒计时：",this.activityEnd.color="#ffffff",this.activityText.visible=!0)},r.prototype.updateRank=function(){this._list.datas=[],this.table={},this.arr=[];for(var t=0;t<s.PayRankModel.Instance.rankList.length;++t)this.table[s.PayRankModel.Instance.rankList[t][3]-1]=s.PayRankModel.Instance.rankList[t];for(t=0;t<this._rankCount;++t)this.arr.push(this.table[t]);this._list.datas=this.arr},r.prototype.updateBottom=function(){var t=s.PayRankModel.Instance.rankList;if(t){var e=s.PayRankModel.Instance.actorRank(t,PlayerModel.instance.actorId);if(1!==e){this.targetInfo.visible=!0,this.TargetYB.visible=!0,this.myRankBox.y=1048,this.myYBBox.y=1048;var i=s.PayRankModel.Instance.getShuJuByMingCi(50);-1===e&&null!==i?(this.myRank.text="未上榜",this.myYB.text=""+s.PayRankModel.Instance.totalPay,this.targetInfo.text="第 50 名:"+i[1],this.TargetYB.text="消费元宝:"+i[2],this.TargetYB.x=466):-1===e&&null===i?(this.myRank.text="未上榜",this.myYB.text=""+s.PayRankModel.Instance.totalPay,this.targetInfo.text="第 50 名:虚位以待",this.TargetYB.text="上榜所需消费元宝:"+o.instance.dataArr[o.instance.dataArr.length-1][2],this.TargetYB.x=378):0<e&&e<=this._rankCount&&void 0!==this.table[e-2]?(this.targetInfo.text="第 "+(e-1)+" 名:"+this.table[e-2][1],this.TargetYB.text="消费元宝:"+this.table[e-2][2],this.myRank.text="第 "+e+" 名",this.myYB.text=""+s.PayRankModel.Instance.totalPay,this.TargetYB.x=466):0<e&&e<=this._rankCount&&void 0===this.table[e-2]&&(this.targetInfo.text="第 "+(e-1)+" 名:虚位以待",this.TargetYB.text="上榜所需消费元宝:"+o.instance.getCfgByRank(e-2)[2],this.myRank.text="第 "+e+" 名",this.myYB.text=""+s.PayRankModel.Instance.totalPay,this.TargetYB.x=378)}else{this.targetInfo.visible=!1,this.TargetYB.visible=!1;var n=this.bottomBG.y+(this.bottomBG.height>>1)-12;this.myRankBox.y=n,this.myYBBox.y=n,this.myRank.text="第 "+e+" 名",this.myYB.text=""+s.PayRankModel.Instance.totalPay}}},a=r,s.PayRankPanel=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("rush_buy_fs"),e=0,i=t.length;e<i;e++)this._tab[t[e][4]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgByType=function(t){for(var e=[],i=0,n=this.getArr.length;i<n;i++)t==this.getArr[i][4]&&e.push(this.getArr[i]);return e},i=n,e.SoaringPanicBuyingGiftCfg=i}(modules=modules||{}),function(t){var r,e,i,n,o,s,a;function l(){return null!==e&&e.apply(this,arguments)||this}r=t.invitation||(t.invitation={}),i=t.common.CustomClip,n=t.common.CommonUtil,o=t.bag.BagUtil,s=t.funcOpen.FuncOpenModel,e=ui.InvitationAlertUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3],this._btnClip=i.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.invitationBtn.x-6,this.invitationBtn.y-8,.8)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.invitationBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("INVITATION_UPDATE",this,this.showUI)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler),i.thisStop(this._btnClip)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.timeText.visible=!1,r.InvitationCtrl.instance.GetInviteGift(),this.showReward(),this.showUI()},l.prototype.sureBtnHandler=function(){1==r.InvitationModel.instance.state?this.isCion():PlatParams.playerShare(r.InvitationCtrl.instance.callBask.bind(r.InvitationCtrl.instance))},l.prototype.isCion=function(){var t=[],e=r.InvitationModel.instance._awardAee;if(e){for(var i=0,n=e.length;i<n;i++){var s=e[i];t.push([s[0],s[1],0,null])}o.canAddItemsByBagIdCount(t)&&r.InvitationCtrl.instance.DrawInviteGift()}},l.prototype.showUI=function(){this.setBtn(),this.setCiShu(),this.setActivitiTime()},l.prototype.setBtn=function(){1==r.InvitationModel.instance.state?(this.invitationBtn.label="领取奖励",i.thisPlay(this._btnClip)):(this.invitationBtn.label="立即邀请",i.thisStop(this._btnClip))},l.prototype.setCiShu=function(){var t=r.InvitationModel.instance._maxNum-r.InvitationModel.instance.times;t=t<0?0:t;var e=r.InvitationModel.instance._maxNum;0==t?(this.StatementHTML.color="#ff3e3e",this.StatementHTML.stroke=3):(this.StatementHTML.color="#55ff28",this.StatementHTML.stroke=0),this.StatementHTML.text=t+"/"+e},l.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=s.instance.getFuncIsOpen(227);r.InvitationModel.instance.cold>GlobalData.serverTime&&t?(this.timeText.visible=!0,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.timeText.visible=!1},l.prototype.activityHandler=function(){this.timeText.text="分享倒计时:"+n.timeStampToMMSS(r.InvitationModel.instance.cold),r.InvitationModel.instance.cold<=GlobalData.serverTime&&(this.timeText.visible=!1,Laya.timer.clear(this,this.activityHandler))},l.prototype.showReward=function(){for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=r.InvitationModel.instance._awardAee,i=new Array;for(t=0;t<e.length;t++){var n=this._taskBase[t];n&&(n.dataSource=[e[t][0],e[t][1],0,null],n.visible=!0,i.push(n))}var s=100*i.length+5*(i.length-1),o=(this.rewardBox.width-s)/2;for(t=0;t<i.length;t++){var a=i[t];a.x=o,o+=a.width+5}},l.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),e.prototype.destroy.call(this)},a=l,r.InvitationAlert=a}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=i.call(this)||this;return t.vipLevel=0,t}e=t.first_login_alert_panel||(t.first_login_alert_panel={}),n=t.vip_new.VipNewModel,s=t.onceReward.OnceRewardCtrl,i=ui.FirstLoginAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._count=5,this.bgImg.skin=PlatParams.isCloseWZC?"firt_login_alert/image_tc_bg1.png":"firt_login_alert/image_tc_bg2.png",this.sureBtn.pos(225,317),this.restTimeText.pos(147,405),this.createEffect()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.zOrder=50,this.vipLevel=n.instance.vipLevel,Laya.timer.loop(1e3,this,this.countDown),this.countDown(),this._btnClip.visible=!0,this._btnClip.play()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},a.prototype.sureBtnHandler=function(){this.close()},a.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",15),this._btnClip.pos(-5,-10)},a.prototype.close=function(t,e){i.prototype.close.call(this,t,e),Laya.timer.clearAll(this),s.instance.drawOnceReward(46003)},a.prototype.countDown=function(){this.restTimeText.text=this._count+"秒后自动关闭",this._count<=0&&this.close(),this._count--},o=a,e.FirstLoginAlertPanel=o}(modules=modules||{}),function(t){var e,s,i,o,n,a,r,l;function h(){return null!==s&&s.apply(this,arguments)||this}e=t.realName||(t.realName={}),i=ui.RealNameUI,o=t.config.BlendCfg,n=t.realName.RealNameCtrl,a=t.onceReward.OnceRewardModel,r=t.common.CustomClip,s=i,__extends(h,s),h.prototype.initialize=function(){s.prototype.initialize.call(this),this._items=[this.item1,this.item2,this.item3,this.item4];for(var t=o.instance.getCfgById(46001)[1],e=t.length/2,i=444-.5*(106*e+8*(e-1)),n=0;n<e;n++)this._items[n].visible=!0,this._items[n].x=i+106*n+8*(n-1),this._items[n].dataSource=[t[2*n],t[2*n+1],0,null];this._btnClip=r.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,342,826)},h.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getAwardHandler),this.onAutoGlobalEvt("REAL_NAME_STATUS_CHANGE",this,this.statusChangeHandler)},h.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.statusChangeHandler()},h.prototype.close=function(t,e){s.prototype.close.call(this,t,e),r.thisStop(this._btnClip)},h.prototype.getAwardHandler=function(){if(0!==e.RealNameModel.instance.status)n.instance.realName();else{var t=a.instance.gotAwardIds;t&&-1===t.indexOf(46001)&&n.instance.getAward()}},h.prototype.statusChangeHandler=function(){0===e.RealNameModel.instance.status?(this.getBtn.label="领取奖励",r.thisPlay(this._btnClip)):(this.getBtn.label="我要领取",r.thisStop(this._btnClip))},h.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._items=this.destroyElement(this._items),s.prototype.destroy.call(this)},l=h,e.RealNameAlert=l}(modules=modules||{}),function(t){var e,s,i,o,n,a,r;function l(){return null!==s&&s.apply(this,arguments)||this}e=t.officialAccount||(t.officialAccount={}),i=ui.OfficialAccountUI,o=t.config.BlendCfg,n=t.onceReward.OnceRewardModel,a=t.common.CustomClip,s=i,__extends(l,s),l.prototype.initialize=function(){s.prototype.initialize.call(this),this._items=[this.item1,this.item2,this.item3,this.item4];for(var t=o.instance.getCfgById(46002)[1],e=t.length/2,i=444-.5*(106*e+8*(e-1)),n=0;n<e;n++)this._items[n].visible=!0,this._items[n].x=i+106*n+8*(n-1),this._items[n].dataSource=[t[2*n],t[2*n+1],0,null];this._btnClip=a.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,342,826)},l.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.focusBtn,this,this.focusHandler),this.onAutoGlobalEvt("OFFICAL_ACCOUNT_STATUS_CHANGE",this,this.statusChangeHandler)},l.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.statusChangeHandler()},l.prototype.close=function(t,e){s.prototype.close.call(this,t,e),a.thisStop(this._btnClip)},l.prototype.focusHandler=function(){if(0!==e.OfficialAccountModel.instance.status)e.OfficialAccountCtrl.instance.focusOfficialAccount(2);else{var t=n.instance.gotAwardIds;t&&-1===t.indexOf(46002)&&e.OfficialAccountCtrl.instance.getAward()}},l.prototype.statusChangeHandler=function(){0===e.OfficialAccountModel.instance.status?(this.focusBtn.label="领取奖励",a.thisPlay(this._btnClip)):(this.focusBtn.label="前往关注",a.thisStop(this._btnClip))},l.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._items=this.destroyElement(this._items),s.prototype.destroy.call(this)},r=l,e.OfficialAccountAlert=r}(modules=modules||{}),function(t){var s,i,e,n,o,a,r,l,h,c,p;function u(){return i.call(this)||this}s=t.one_buy||(t.one_buy={}),e=ui.OneBuyUI,n=t.common.BtnGroup,o=t.bag.BagUtil,a=t.config.OneBuyCfg,r=t.common.CustomClip,l=t.config.RechargeCfg,h=t.common.SimpleList,c=t.bag.BagItem,i=e,__extends(u,i),u.prototype.initialize=function(){i.prototype.initialize.call(this),this.creatEffect(),this._btnGroup=new n,this._btnGroup.setBtns(this.secKillTopBtn1,this.secKillTopBtn2,this.secKillTopBtn3),this._btnGroup.selectedIndex=0,this._rwdList=h.create(c,100,120,2,1,20,0),this._rwdList.size(340,120),this._rwdList.pos(190,660),this.addChild(this._rwdList),this.secBaseBtn1.visible=this.secBaseBtn2.visible=this.secBaseBtn3.visible=this.secBaseBtn4.visible=this.secBaseBtn5.visible=!1},u.prototype.onEvt=function(){var e=this;i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ONEBUY_UPDATE",this,this.updateFuc),this.onAutoClick(this.l_secKillBtn,this,this.l_secKillHandler),this.onAutoClick(this.sureBtn1,this,this.surseHandler1),this.onAutoEvt(this._btnGroup,Laya.Event.CHANGE,this,this.selectSecKillHandler),this.onAutoClick(this.lastBtn,this,function(){var t=e._btnGroup.selectedIndex;t=0<t?t-1:2,e._btnGroup.selectedIndex=t}),this.onAutoClick(this.nextBtn,this,function(){var t=e._btnGroup.selectedIndex;t=t<2?t+1:0,e._btnGroup.selectedIndex=t})},u.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.l_secKillBtn.disabled=!1,this.setPitchOn(),this.setTopBtnRP()},u.prototype.setTopBtnRP=function(){var t=s.OneBuyModel.instance.stateArr;this.topBtnRP1.visible=1==t[0],this.topBtnRP2.visible=1==t[1],this.topBtnRP3.visible=1==t[2]},u.prototype.setPitchOn=function(){for(var t=s.OneBuyModel.instance.stateArr,e=-1,i=-1,n=0;n<t.length;++n){if(1==t[n]){e=n;break}if(0==t[n]){i=n;break}}this._btnGroup.selectedIndex=0<=e?e:0<=i?i:0},u.prototype.updateFuc=function(){this.setPitchOn(),this.setTopBtnRP()},u.prototype.updateLSKB=function(){this.endImg.visible=!1,s.OneBuyModel.instance.isShow?(this.l_secKillBtn.disabled=!0,r.thisStop(this._btnClip4)):(this.l_secKillBtn.disabled=!1,r.thisPlay(this._btnClip4))},u.prototype.selectSecKillHandler=function(){this.pitchOn1.x=this._btnGroup.selectedBtn.x+1,this.awardPanel()},u.prototype.awardPanel=function(){switch(this._btnGroup.selectedIndex){case 0:this.priceImg.skin="one_buy/txt_yyms_1ylm.png",this.awardModel.skin="one_buy/icon_yyms_bx1.png";break;case 1:this.priceImg.skin="one_buy/txt_yyms_3ylb.png",this.awardModel.skin="one_buy/icon_yyms_bx2.png";break;case 2:this.priceImg.skin="one_buy/txt_yyms_6ylb.png",this.awardModel.skin="one_buy/icon_yyms_bx3.png"}this.updateLSKB(),this.showItem(),this.setBtn()},u.prototype.setBtn=function(){switch(s.OneBuyModel.instance.stateArr[this._btnGroup.selectedIndex]){case 0:var t=a.instance.getCfgById(s.OneBuyModel.instance.idArr[this._btnGroup.selectedIndex]);this.sureBtn1.label=l.instance.getRecharCfgByIndex(t[1])[2]+"元秒杀",this.sureBtn1.visible=!0,this.received1.visible=!1,r.thisStop(this._btnClip1);break;case 1:this.sureBtn1.label="领取",this.sureBtn1.visible=!0,this.received1.visible=!1,r.thisPlay(this._btnClip1);break;case 2:this.sureBtn1.visible=!1,this.received1.visible=!0,r.thisStop(this._btnClip1)}},u.prototype.showItem=function(){var t=a.instance.getCfgById(s.OneBuyModel.instance.idArr[this._btnGroup.selectedIndex]),e=t[2];this.originalCost.text="原价"+t[4]+"元";for(var i=[],n=0;n<e.length;n+=2)i.push([e[n],e[n+1],0,null]);this._rwdList.datas=i},u.prototype.creatEffect=function(){this._btnClip1=r.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.sureBtn1.addChild(this._btnClip1),this._btnClip1.pos(-5,-10),this._btnClip4=r.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.l_secKillBtn.addChild(this._btnClip4),this._btnClip4.pos(-5,-10)},u.prototype.l_secKillHandler=function(){PlatParams.askPay(14,l.instance.getRecharCfgByIndex(14)[2])},u.prototype.surseHandler1=function(){var t=s.OneBuyModel.instance.stateArr[this._btnGroup.selectedIndex],e=s.OneBuyModel.instance.gradeArr[this._btnGroup.selectedIndex];1==t?o.canAddItemsByBagIdCount(this._rwdList.datas)&&s.OneBuyCtrl.instance.getLoginRewardReward(e):PlatParams.askPay(e,l.instance.getRecharCfgByIndex(e)[2])},u.prototype.close=function(){i.prototype.close.call(this),r.thisStop(this._btnClip1),r.thisStop(this._btnClip4)},p=u,s.OneBuyPanel=p}(modules=modules||{}),function(t){var e,o,i;function a(){this.giveState=-1,this.id=-1,this._isShow=!1,this.days=[],this.time=0,this.openLv=t.config.FirstPayCfg.instance.getCfgById(1)[14]}e=t.first_pay||(t.first_pay={}),o=t.redPoint.RedPointCtrl,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.updateInfo=function(t){this.giveState=t[0],this.id=t[1],this.restTm=t[2]+GlobalData.serverTime,this.time=t[3],this.days=t[4]||[],GlobalData.dispatcher.event("FIRST_PAY_UPDATE");var e=!1;if(1===this.giveState)for(var i=a.instance.days,n=3<this.time?3:this.time,s=1;s<=n;s++)if(-1===i.indexOf(s)){e=!0;break}o.instance.setRPProperty("firstPayRP",e)},a.prototype.arrChange2arr=function(t){for(var e=[],i=0,n=t.length;i<n;)e.push(t.slice(i+1,i+1+2*t[i])),i+=2*t[i]+1;return e},Object.defineProperty(a.prototype,"showDay",{get:function(){var t=1;if(1===this.giveState){for(var e=!1,i=1;i<=this.time;i++)if(-1===this.days.indexOf(i)){t=i,e=!0;break}e||(t=this.time)}return 3<t?3:t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"toDayEndTm",{get:function(){return(1044e5-(GlobalData.serverTime-GlobalData.timeZoneOffset)%864e5)%864e5},enumerable:!0,configurable:!0}),i=a,e.FirstPayModel=i}(modules=modules||{}),function(t){var a,e,r,i,l,n,s,o,h;function c(){return e.call(this)||this}a=t.fight_talisman||(t.fight_talisman={}),r=t.common.CustomClip,i=t.first_pay.FirstPayModel,l=t.config.FightTalismanCfg,n=t.notice.SystemNoticeManager,s=t.config.BlendCfg,o=t.common.SimpleList,e=ui.FightTalismanAlertUI,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this._activeBtnEff=CommonUtil.creatEff(this.activateBtn,"btn_light",15),this._activeBtnEff.pos(-5,-10),this.wayToGet.underline=!0;var t=s.instance.getCfgById2(11)[1];this.baseItem.dataSource=[t[0],t[1],0,null],this._list=o.create(a.FightTalismanItem,548,38),this._list.width=550,this._list.height=410,this._list.x=65,this._list.y=232,this._list.itemRender=a.FightTalismanItem,this.addChildAt(this._list,2)},c.prototype.setOpenParam=function(t){null!=t&&-1!=t&&(this._value=t)},c.prototype.destroy=function(){e.prototype.destroy.call(this),this._activeBtnEff=this.destroyElement(this._activeBtnEff)},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.activateBtn,this,this.activateBtnHandler),this.onAutoClick(this.wayToGet,this,this.wayToGetHandler),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.update)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},c.prototype.update=function(){var t,e;this.wayToGet.visible=-1==a.FightTalismanModel.instance.actived,null==this._value||-1==this._value?(t=a.FightTalismanModel.instance.actived,e=a.FightTalismanModel.instance.canActived,this.activateBtn.visible=!0):(t=e=this._value,this.activateBtn.visible=!1,this._value=null),-1!=t&&t<e?r.thisPlay(this._activeBtnEff):r.thisStop(this._activeBtnEff),this.fighting.text=-1==t?"0":l.instance.getCfgByEra(t)[1].toString();for(var i=[],n=l.instance.arr.length,s=l.instance.arr,o=0;o<n;++o)s[o][0]<=t?i.push([s[o][0],2]):s[o][0]<=e?i.push([s[o][0],1]):i.push([s[o][0],0]);this._list.datas=i},c.prototype.activateBtnHandler=function(){-1==a.FightTalismanModel.instance.actived?this.wayToGetHandler():a.FightTalismanModel.instance.actived<a.FightTalismanModel.instance.canActived?a.FightTalismanCtrl.instance.activeTalisman():a.FightTalismanModel.instance.actived==l.instance.arr[l.instance.arr.length-1][0]?n.instance.addNotice("已激活护符的全部战力",!1):n.instance.addNotice("未达到激活条件",!0)},c.prototype.wayToGetHandler=function(){i.instance.giveState?WindowManager.instance.open(379):WindowManager.instance.open(118)},h=c,a.FightTalismanAlert=h}(modules=modules||{}),function(r){var e,l,h,c,t;function i(){return l.call(this)||this}e=r.fight_talisman||(r.fight_talisman={}),h=r.config.RechargeCfg,c=r.config.BlendCfg,l=ui.FightTalismanBuyAlertUI,__extends(i,l),i.prototype.initialize=function(){l.prototype.initialize.call(this),this._getBtnEff=CommonUtil.creatEff(this.getBtn,"btn_light",15),this._getBtnEff.pos(-5,-10),this._getBtnEff.visible=!0,this._getBtnEff.play();for(var t=c.instance.getCfgById2(11)[1],e=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5],i=0;i<6&&t[2*i];++i)e[i].dataSource=[t[2*i],t[2*i+1],0,null];var n=h.instance.getRecharCfgByIndex(5);this.priceTxt.text=n[2].toString(),this.fightTxt.text=n[3];var s=n[6][0][0],o=CommonUtil.getItemTypeById(s);this.rewardItemImg.skin=9==o?CommonUtil.getIconById(s,!0):CommonUtil.getIconById(s,!1);var a=r.redBag.RedBagUtils.getIdAndCondByMoney(1009,5);this.tipsHtml.visible=r.redBag.RedBagUtils.getActionopen(),this.tipsHtml.innerHTML="<span style='color:#FFFFFF;font-size:26px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:26px;font-family:SimHei;'>"+a+"元宝</span><span style='color:#FFFFFF;font-size:26px;font-family:SimHei;'>红包</span>"},i.prototype.destroy=function(){this._getBtnEff&&(this._getBtnEff.destroy(),this._getBtnEff=null),l.prototype.destroy.call(this)},i.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.update)},i.prototype.onOpened=function(){l.prototype.onOpened.call(this),this._getBtnEff.play(),this.update()},i.prototype.update=function(){this.returnTxt.text="现在投资可立即返还"+h.instance.getRecharCfgByIndex(5)[6][0][1]+"   ，仙玉不计入每日获取上限",e.FightTalismanModel.instance.state?-1==e.FightTalismanModel.instance.actived?(this.getBtn.visible=!0,this.getBtn.label="领取"):(this.getBtn.visible=!1,this._getBtnEff.stop(),this._getBtnEff.visible=!1):(this.getBtn.visible=!0,this._getBtnEff.play(),this.getBtn.label=h.instance.getRecharCfgByIndex(5)[2]+"元投资")},i.prototype.getBtnHandler=function(){if(e.FightTalismanModel.instance.state)e.FightTalismanCtrl.instance.activeTalisman();else{var t=h.instance.getRecharCfgByIndex(5)[2];PlatParams.askPay(5,t)}},t=i,e.FightTalismanBuyAlert=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._arr.length},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._arr=GlobalData.getConfig("money_cat");for(var t=0;t<this._arr.length;++t)this._table[this._arr[t][0]]=this._arr[t]},n.prototype.getCfgByEra=function(t){return this._table[t]},n.prototype.getCfgByIndex=function(t){return this._arr[t]},Object.defineProperty(n.prototype,"arr",{get:function(){return this._arr},enumerable:!0,configurable:!0}),i=n,e.MoneyCatCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.money_cat||(t.money_cat={}),n=t.config.MoneyCatCfg,i=ui.MoneyCatItemUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.goldImg.skin="assets/icon/item/1_s.png"},o.prototype.setData=function(t){var e=n.instance.getCfgByEra(t[0]);switch(this.valueTxt.text="转生达到"+Math.floor(e[0]/100)+"转"+e[0]%100+"重可获得",this.valueText.text="X"+e[1][0][1],t[1]){case 2:this.stateTxt.text="已激活",this.stateTxt.color="#0ecf09",this.valueTxt.color="#0ecf09",this.valueText.color="#0ecf09";break;case 1:this.stateTxt.text="可激活",this.stateTxt.color="#0f81f5",this.valueTxt.color="#0f81f5",this.valueText.color="#0f81f5";break;case 0:this.stateTxt.text="未激活",this.stateTxt.color="#b0b0b0",this.valueTxt.color="#b0b0b0",this.valueText.color="#b0b0b0"}},s=o,e.MoneyCatItem=s}(modules=modules||{}),function(t){var r,e,l,i,h,n,s,o,a;function c(){return e.call(this)||this}r=t.money_cat||(t.money_cat={}),l=t.common.CustomClip,i=t.first_pay.FirstPayModel,h=t.config.MoneyCatCfg,n=t.notice.SystemNoticeManager,s=t.config.BlendCfg,o=t.common.SimpleList,e=ui.MoneyCatAlertUI,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this._getBtnEff=CommonUtil.creatEff(this.getBtn,"btn_light",15),this._getBtnEff.pos(-5,-10),this.wayToGet.underline=!0;var t=s.instance.getCfgById(49001)[1];this.baseItem.dataSource=[t[0],t[1],0,null],this._list=o.create(r.MoneyCatItem,548,38),this._list.width=550,this._list.height=410,this._list.x=65,this._list.y=232,this.addChildAt(this._list,2)},c.prototype.setOpenParam=function(t){null!=t&&-1!=t&&(this._value=t)},c.prototype.destroy=function(){this._getBtnEff=this.destroyElement(this._getBtnEff),e.prototype.destroy.call(this)},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.wayToGet,this,this.wayToGetHandler),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.update)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},c.prototype.update=function(){var t,e;this.wayToGet.visible=-1==r.MoneyCatModel.instance.actived,null!=this._value||null!=this._value?(t=e=this._value,this.getBtn.visible=!1,this._value=null):(t=r.MoneyCatModel.instance.actived,e=r.MoneyCatModel.instance.canActived,this.getBtn.visible=!0),-1!=t&&t<e?l.thisPlay(this._getBtnEff):l.thisStop(this._getBtnEff);for(var i=[],n=h.instance.arr,s=n.length,o=0,a=1;a<s&&n[a][0]<=t;++a)o+=n[a][1][0][1];for(this.money.text=o+"元宝",a=1;a<s;++a)n[a][0]<=t?i.push([n[a][0],2]):n[a][0]<=e?i.push([n[a][0],1]):i.push([n[a][0],0]);this._list.datas=i},c.prototype.getBtnHandler=function(){-1==r.MoneyCatModel.instance.actived?this.wayToGetHandler():r.MoneyCatModel.instance.actived<r.MoneyCatModel.instance.canActived?r.MoneyCatCtrl.instance.activeMoneyCat():r.MoneyCatModel.instance.actived==h.instance.arr[h.instance.arr.length-1][0]?n.instance.addNotice("已领取完全部招财元宝",!1):n.instance.addNotice("未达到领取条件",!0)},c.prototype.wayToGetHandler=function(){i.instance.giveState?WindowManager.instance.open(381):WindowManager.instance.open(118)},a=c,r.MoneyCatAlert=a}(modules=modules||{}),function(a){var e,r,l,h,c,t;function i(){return null!==r&&r.apply(this,arguments)||this}e=a.money_cat||(a.money_cat={}),l=a.common.CustomClip,h=a.config.RechargeCfg,c=a.config.BlendCfg,r=ui.MoneyCatBuyAlertUI,__extends(i,r),i.prototype.initialize=function(){r.prototype.initialize.call(this),this._getBtnEff=l.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.getBtn.addChild(this._getBtnEff),this._getBtnEff.pos(-5,-10),this._getBtnEff.visible=!0,this._getBtnEff.play();for(var t=c.instance.getCfgById(49001)[1],e=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5],i=0;i<6&&t[2*i];++i)e[i].dataSource=[t[2*i],t[2*i+1],0,null];var n=h.instance.getRecharCfgByIndex(4)[6][0][0],s=CommonUtil.getItemTypeById(n);this.rewardItemImg.skin=9==s?CommonUtil.getIconById(n,!0):CommonUtil.getIconById(n,!1),this.tipsHtml.visible=a.redBag.RedBagUtils.getActionopen();var o=a.redBag.RedBagUtils.getIdAndCondByMoney(1008,4);this.tipsHtml.innerHTML="<span style='color:#FFFFFF;font-size:26px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:26px;font-family:SimHei;'>"+o+"元宝</span><span style='color:#FFFFFF;font-size:26px;font-family:SimHei;'>红包</span>"},i.prototype.destroy=function(){this._getBtnEff=this.destroyElement(this._getBtnEff),r.prototype.destroy.call(this)},i.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.update)},i.prototype.onOpened=function(){r.prototype.onOpened.call(this),this.update()},i.prototype.update=function(){this.returnTxt.text="现在投资可立即返还"+h.instance.getRecharCfgByIndex(4)[6][0][1]+"   ，仙玉不计入每日获取上限",e.MoneyCatModel.instance.state?-1==e.MoneyCatModel.instance.actived?(this.getBtn.visible=!0,this.getBtn.label="领取",this._getBtnEff.play()):(this.getBtn.visible=!1,this._getBtnEff.stop(),this._getBtnEff.visible=!1):(this.getBtn.visible=!0,this.getBtn.label=h.instance.getRecharCfgByIndex(4)[2]+"元投资",this._getBtnEff.visible=!0,this._getBtnEff.play())},i.prototype.getBtnHandler=function(){if(e.MoneyCatModel.instance.state)e.MoneyCatCtrl.instance.activeMoneyCat();else{var t=h.instance.getRecharCfgByIndex(4)[2];PlatParams.askPay(4,t)}},t=i,e.MoneyCatBuyAlert=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={};for(var t=GlobalData.getConfig("gauntlet"),e=0,i=t.length;e<i;e++)this._table[t[e][0]]=t[e]},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.GauntletCfg=i}(modules=modules||{}),function(t){var I,i,e,C,x,B,S,M,n,w,s;function o(){return i.call(this)||this}I=t.gloves||(t.gloves={}),e=ui.GlovesViewUI,C=t.config.GauntletCfg,x=t.config.AttrItemCfg,B=t.config.SkillCfg,S=t.bag.BagModel,M=t.config.BlendCfg,n=t.notice.SystemNoticeManager,w=t.config.SkillPureCfg,i=e,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._stoneGrids=[this.stoneGrid1,this.stoneGrid2,this.stoneGrid3,this.stoneGrid4,this.stoneGrid5,this.stoneGrid6],this._stoneIcons=[this.stoneIcon1,this.stoneIcon2,this.stoneIcon3,this.stoneIcon4,this.stoneIcon5,this.stoneIcon6],this._stones=[this.stone1,this.stone2,this.stone3,this.stone4,this.stone5,this.stone6],this._attrNames=[this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5,this.attrName6],this._attrValues=[this.attrValue1,this.attrValue2,this.attrValue3,this.attrValue4,this.attrValue5,this.attrValue6],this._rps=[this.rp1,this.rp2,this.rp3,this.rp4,this.rp5,this.rp6],CommonUtil.setHTMLPro(this.skillDescTxt,"#FFFFFF","SimHei",24),CommonUtil.setHTMLPro(this.stoneSkillDescTxt,"#FFD2BF","SimHei",24),CommonUtil.setHTMLPro(this.stoneRateTxt,"#FFD2BF","SimHei",24),this.skillDescTxt.style.wordWrap=this.stoneSkillDescTxt.style.wordWrap=this.stoneRateTxt.style.wordWrap=!0,this._stoneSkillDescs=['它有着强大的精神力量，可通过心灵攻击摧毁BOSS的神识，持有者BOSS增伤<span color="#50ff28">+X%</span>','无论久远的过去，还是遥远的未来，持有者可操纵时间和因果，战斗中PVP减伤<span color="#50ff28">+X%</span>','能够窃取、侵入、操纵敌人魂魄，持有者更可凝练自身神魂，战斗中PVP增伤<span color="#50ff28">+X%</span>','破碎虚空，穿梭三界，一瞬千里，持有者拥有极快的身法，战斗中暴击减伤<span color="#50ff28">+X%</span>','拥有无可匹敌的法力，持有者力之所及可移山填海，战斗中暴击增伤<span color="#50ff28">+X%</span>','法眼无双，看破一切虚妄迷途，持有者可瞬间找到对方破绽，战斗中真实伤害<span color="#50ff28">+X</span>'],this._stoneSkill_short_Descs=["BOSS增伤","PVP减伤","PVP增伤","暴击减伤","暴击增伤","真实伤害"],this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.inlayBtn.x-5,this.inlayBtn.y-10,!0),this._btnClip.visible=!0,this.stoneSkillNextText.visible=this.stoneRateNextTxt.visible=!1,this.maxLvText.visible=!1},o.prototype.onEvt=function(){i.prototype.onEvt.call(this);for(var t=0,e=this._stoneGrids.length;t<e;t++)this.onAutoClick(this._stoneGrids[t],this,this.stoneClickHandler,[t]);this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.updateInfo),this.onAutoClick(this.inlayBtn,this,this.inlayHandler),this.onAutoClick(this,this,this.clickHandler),this.onAutoClick(this.attrImg,this,this.attrClickHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateInfo)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._matEnough=!1,this._selectedIndex=-2,this.selectedImg.visible=!1,this._matId=this._matCount=0,this._isMaxLv=!1,this.selectStone(-1)},o.prototype.close=function(t,e){i.prototype.close.call(this,t,e),this._btnClip.stop()},o.prototype.stoneClickHandler=function(t,e){e.stopPropagation(),this.selectStone(t)},o.prototype.updateInfo=function(){var t=I.GlovesModel.instance.glovesInfo;if(t){for(var e=t[1],i=new Array,n=0,s=e.length;n<s;n++)i[e[n][0]-1]=e[n][1];var o=1,a=0;for(n=0,s=this._stoneIcons.length;n<s;n++){var r=void 0;i[n]||(i[n]=1e3*(n+1)),i[n]%1e3==0?(this._stoneIcons[n].skin="gloves/btn_wxst_add.png",this._stones[n].visible=!1,r=C.instance.getCfgById(i[n]+1)):(this._stoneIcons[n].skin=CommonUtil.getIconById(C.instance.getCfgById(i[n])[4][0][0]),o+=(r=C.instance.getCfgById(i[n]))[2][3],a+=r[6],this._stones[n].visible=!0);var l=r[4][0][0],h=(b=C.instance.getCfgById(i[n]+1))&&S.instance.getItemCountById(l)>=b[4][0][1];this._rps[n].visible=h}var c=C.instance.getCfgById(0),p=c[2];for(n=0,s=.5*p.length;n<s;n++){var u=x.instance.getCfgById(p[2*n]);this._attrNames[n].text=u[1]+"：",this._attrValues[n].text="+"+Math.round(p[2*n+1]*o)}var d=M.instance.getCfgById(51101)[1][0],y=B.instance.getCfgById(1e4*d+1),g=w.instance.getCfgById(d);if(this.skillIcon.skin="assets/icon/skill/"+g[6]+".png",this.skillNameTxt.text=g[1],this.skillDescTxt.innerHTML=CommonUtil.stringFormat(g[5],y[2]),this.maxLvText.visible=!1,this._matEnough=!1,this._matId=this._matCount=0,this._isMaxLv=!1,this._btnClip.visible=!1,this._btnClip.stop(),0<=this._selectedIndex){var f=i[this._selectedIndex],_=(this._selectedStoneId=f)%1e3;this.stoneLevel.text="Lv."+_,this.stoneLevel.visible=0!=_;var m=C.instance.getCfgById(f+(_?0:1));this.stoneName.text=m[1],this.stoneName.x=0==_?280:(this.width-(this.stoneName.width+this.stoneLevel.width+10))/2,CommonUtil.chainArr([this.stoneName,this.stoneLevel],10),this.stoneSkillDescTxt.innerHTML=this._stoneSkillDescs[this._selectedIndex].replace("X",Math.floor(m[2][1]*(5===this._selectedIndex?10:1e3))/10+""),this.stoneRateTxt.innerHTML='提升手套基础全属性<span color="#50ff28">'+Math.round(100*m[2][3])+"%</span>",this.inlayBtn.label=0==_?"镶嵌":"升级",this._matId=m[4][0][0],this._isMaxLv=!C.instance.getCfgById(f+1);var v=1+(_?0:1),b=C.instance.getCfgById(f+v);if(this.stoneSkillNextText.visible=this.stoneRateNextTxt.visible=!this._isMaxLv,b){this._matCount=b[4][0][1];var T=5===this._selectedIndex?"":"%";this.stoneSkillNextText.text="下级效果:"+this._stoneSkill_short_Descs[this._selectedIndex]+"+"+Math.floor(b[2][1]*(5===this._selectedIndex?10:1e3))/10+T,this.stoneRateNextTxt.text="下级效果：提升全属性"+Math.round(100*b[2][3])+"%",this.stoneSkillNextText.visible=this.stoneRateNextTxt.visible=!this._isMaxLv}this.maxLvText.visible=-1!=this._selectedIndex&&this._isMaxLv,this.stoneSmallIcon.visible=this.inlayBtn.visible=this.stoneNum.visible=!this._isMaxLv,0==_&&(this.stoneSkillNextText.text=this.stoneRateNextTxt.text=""),this.updateMat()}this.fightClip.value=Math.floor(c[6]*o+a)+""}},o.prototype.updateMat=function(){this.stoneSmallIcon.skin=CommonUtil.getIconById(this._matId,!0);var t=S.instance.getItemCountById(this._matId);this.stoneNum.text=t+"/"+this._matCount,this.stoneNum.color=t<this._matCount?"#ff3e3e":"#50ff28",this._matEnough=t>=this._matCount,this._matEnough&&!this._isMaxLv?(this._btnClip.visible=!0,this._btnClip.play()):(this._btnClip.visible=!1,this._btnClip.stop())},o.prototype.clickHandler=function(t){t.target!==this.closeBtn&&this.selectStone(-1)},o.prototype.inlayHandler=function(t){if(t.stopPropagation(),!(this._selectedIndex<0))if(this._isMaxLv)n.instance.addNotice("原石等级已达上限",!0);else if(this._matEnough)I.GlovesCtrl.instance.inlayGauntlet(this._selectedIndex+1);else{var e=I.GlovesModel.instance.glovesInfo;if(!e)return;this._selectedIndex+1===e[3]%10||this._selectedIndex+1===e[4]%10?WindowManager.instance.open(388):n.instance.addNotice("购买原石后可"+(this._selectedStoneId%1e3==0?"镶嵌":"升级"))}},o.prototype.selectStone=function(t){t!==this._selectedIndex&&(this._selectedIndex=t,this.line1.visible=this.line2.visible=this.skillBg.visible=this.skillIcon.visible=this.skillTitle.visible=this.skillNameTxt.visible=this.attrName1.visible=this.attrValue1.visible=this.attrName2.visible=this.attrValue2.visible=this.attrName3.visible=this.attrValue3.visible=this.attrName4.visible=this.attrValue4.visible=this.attrName5.visible=this.attrValue5.visible=this.attrName6.visible=this.attrValue6.visible=this.skillDescTxt.visible=-1===this._selectedIndex,this.dot1.visible=this.dot2.visible=this.inlayBtn.visible=this.stoneSmallIcon.visible=this.stoneName.visible=this.stoneSkillNextText.visible=this.stoneRateNextTxt.visible=this.stoneLevel.visible=this.stoneNum.visible=this.stoneSkillDescTxt.visible=this.stoneRateTxt.visible=-1!==this._selectedIndex,0<=this._selectedIndex?(this.selectedImg.visible=!0,this.selectedImg.pos(this._stoneGrids[this._selectedIndex].x-5,this._stoneGrids[this._selectedIndex].y-6,!0)):this.selectedImg.visible=!1,this.updateInfo())},o.prototype.attrClickHandler=function(){WindowManager.instance.open(389)},o.prototype.destroy=function(){this._stoneGrids=this.destroyElement(this._stoneGrids),this._stoneIcons=this.destroyElement(this._stoneIcons),this._stones=this.destroyElement(this._stones),this._attrNames=this.destroyElement(this._attrNames),this._attrValues=this.destroyElement(this._attrValues),this._rps=this.destroyElement(this._rps),this._stoneSkillDescs.length=0,this._stoneSkillDescs=null,this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},s=o,I.GlovesPanel=s}(modules=modules||{}),function(o){var i,a,t,r,l,e;function n(){return null!==a&&a.apply(this,arguments)||this}i=o.gloves||(o.gloves={}),t=ui.GlovesBuyAlertUI,r=o.config.BlendCfg,l=o.config.RechargeCfg,a=t,__extends(n,a),n.prototype.initialize=function(){a.prototype.initialize.call(this),this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6],this.item1.needTip=!1;for(var t=r.instance.getCfgById2(101)[1],e=0,i=t.length;e<i;e+=2)this._items[.5*e].dataSource=[t[e],t[e+1],0,null];this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.buyBtn.x-5,this.buyBtn.y-10,!0),this._btnClip.visible=!0,this._btnClip.play();var n=l.instance.getRecharCfgByIndex(6);this.priceTxt.text=n[2].toString(),this.xianyuTxt.text="现在抢购即可获得"+n[6][0][1]+"   ，仙玉不计入每日获取上限";var s=o.redBag.RedBagUtils.getIdAndCondByMoney(1033,6);this.tipsHtml.visible=o.redBag.RedBagUtils.getActionopen(),this.tipsHtml.innerHTML="<span style='color:#ffffff;font-size:24px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:24px;font-family:SimHei;'>"+s+"元宝</span><span style='color:#ffffff;font-size:24px;font-family:SimHei;'>红包</span>"},n.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.updateInfo),this.onAutoClick(this.buyBtn,this,this.buyClickHandler),this.onAutoClick(this.item1,this,this.glovesClickHandler)},n.prototype.onOpened=function(){a.prototype.onOpened.call(this),this._btnClip.play(),this.updateInfo()},n.prototype.close=function(t,e){a.prototype.close.call(this,t,e),this._btnClip.stop()},n.prototype.updateInfo=function(){var t=i.GlovesModel.instance.glovesInfo;if(t){var e=t[0];-1===e?(this.buyBtn.label="立即抢购",this._btnClip.visible=!0,this.buyBtn.visible=!0,this.gotImg.visible=!1):0===e?(this.buyBtn.label="领取奖励",this._btnClip.visible=!0,this.buyBtn.visible=!0,this.gotImg.visible=!1):1===e&&(this._btnClip.visible=!1,this.buyBtn.visible=!1,this.gotImg.visible=!0)}},n.prototype.buyClickHandler=function(){var t=i.GlovesModel.instance.glovesInfo;t&&(-1===t[0]?i.GlovesCtrl.instance.buy(6):i.GlovesCtrl.instance.drawGauntlet(-1))},n.prototype.glovesClickHandler=function(){WindowManager.instance.open(389)},n.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),a.prototype.destroy.call(this)},e=n,i.GlovesBuyAlert=e}(modules=modules||{}),function(a){var l,i,t,r,e,n,h,c,p,u,s;function o(){return null!==i&&i.apply(this,arguments)||this}l=a.gloves||(a.gloves={}),t=ui.GlovesStoneBuyAlertUI,r=a.config.BlendCfg,e=a.common.CustomClip,n=a.common.BtnGroup,h=a.config.PrivilegeCfg,c=a.vip.VipModel,p=a.notice.SystemNoticeManager,u=a.config.RechargeCfg,i=t,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._leftMarginAddBtn=this.addBtn.x-this.countTxt.x-this.countTxt.width,this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6],this._rpImgs=[this.rpImg_1,this.rpImg_2,this.rpImg_3,this.rpImg_4,this.rpImg_5,this.rpImg_6],this._btnClip=new e,this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.buyBtn.x-5,this.buyBtn.y-10,!0),this._btnClip.visible=!0,this._btnClip.play(),this._btnGroup=new n,this._btnGroup.setBtns(this.btn_1,this.btn_2,this.btn_3,this.btn_4,this.btn_5,this.btn_6),this._ids=[];for(var t=31;t<=36;t++)this._ids.push(t)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.updateInfo),this.onAutoClick(this.buyBtn,this,this.buyClickHandler),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnClip.play(),this.updateInfo()},o.prototype.close=function(t,e){i.prototype.close.call(this,t,e),this._btnClip.stop()},o.prototype.updateInfo=function(){var t=l.GlovesModel.instance.glovesInfo;if(t){var e,i=t[5];e=1===i?(this.plateImg.skin="gloves/image_wxst_bg2.jpg",t[3]?this.showByType("go"):t[4]&&this.showByType("get"),t[3]||t[4]):(this.plateImg.skin="gloves/image_wxst_bg3.jpg",this.checkRP(),this._btnGroup.selectedIndex=this.searchFirst(),this._ids[this._btnGroup.selectedIndex]),this.resetShow(e),this.resetSize(i)}},o.prototype.checkRP=function(){for(var t=l.GlovesModel.instance.glovesInfo,e=0,i=this._rpImgs.length;e<i;e++){var n=1===t[8][e][1];this._rpImgs[e].visible=n}},o.prototype.buyClickHandler=function(){var t=l.GlovesModel.instance.glovesInfo;if(t)if(1===t[5])t[3]?l.GlovesCtrl.instance.buy(t[3]):t[4]&&l.GlovesCtrl.instance.drawGauntlet(-1);else{for(var e=t[6],i=h.instance.getVipInfoByLevel(c.instance.vipLevel,14)[1]-e,n=this._ids[this._btnGroup.selectedIndex],s=t[8],o=void 0,a=0,r=s.length;a<r;a++)if(s[a][0]===n){o=1===s[a][1];break}o?l.GlovesCtrl.instance.drawGauntlet(n):i<=0?p.instance.addNotice("购买次数已达上限，提升SVIP等级可增加购买次数",!0):l.GlovesCtrl.instance.buy(n)}},o.prototype.btnGroupHandler=function(){var t=this._ids[this._btnGroup.selectedIndex];this.resetShow(t);var e=l.GlovesModel.instance.glovesInfo;if(e)for(var i=e[8],n=e[7],s=0,o=i.length;s<o;s++)if(i[s][0]===t){var a=1===i[s][1];n[s][1],this.receiveState(a,!1);break}},o.prototype.receiveState=function(t,e){e&&!t?this.showByType():this.showByType(t?"get":"go")},o.prototype.showByType=function(t){"go"===t?(this.buyBtn.label="立即抢购",this.buyBtn.visible=!0,this.gotImg.visible=!1,this._btnClip.visible=!0,this._btnClip.play()):"get"===t?(this.buyBtn.label="领取奖励",this.buyBtn.visible=!0,this.gotImg.visible=!1,this._btnClip.visible=!0,this._btnClip.play()):(this.buyBtn.visible=!1,this.gotImg.visible=!0,this._btnClip.visible=!1,this._btnClip.stop())},o.prototype.searchFirst=function(){var t=0,e=l.GlovesModel.instance.glovesInfo;if(!e)return t;var i=e[6],n=h.instance.getVipInfoByLevel(c.instance.vipLevel,14)[1],s=n-i;this.countTxt.text=s+"/"+n,this.countTxt.color=0<s?"#50ff28":"#ff3e3e",this.addBtn.x=this.countTxt.x+this.countTxt.width+this._leftMarginAddBtn;for(var o=e[8],a=0;a<o.length;a++)if(1===o[a][1])return a;return 0<=this._btnGroup.selectedIndex&&(t=this._btnGroup.selectedIndex),t},o.prototype.resetSize=function(t){if(!(1<=t&&t<=2))throw new Error("档次错误"+t);var e=2===t?905:700;this.bgImg.height=this.height=e,this.hintTxt.y=50+e,this.box.visible=2===t},o.prototype.resetShow=function(t){if(t){for(var e=r.instance.getCfgById2(t+100)[1],i=0,n=e.length;i<n;i+=2)this._items[.5*i].dataSource=[e[i],e[i+1],0,null];this.stoneImg.skin=CommonUtil.getIconById(e[0]),this.nameBigImg.skin="gloves/"+t+".png",this.nameSmallImg.skin="gloves/"+t+"_s.png";var s=u.instance.getRecharCfgByIndex(t);this.priceTxt.text=s[2].toString(),this.xianyuTxt.text="现在抢购即可获得"+s[6][0][1]+"   ，仙玉不计入每日获取上限",this.tipsHtml.visible=a.redBag.RedBagUtils.getActionopen();var o=a.redBag.RedBagUtils.getIdAndCondByMoney(1033,t);this.tipsHtml.innerHTML="<span style='color:#ffffff;font-size:24px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:24px;font-family:SimHei;'>"+o+"元宝</span><span style='color:#ffffff;font-size:24px;font-family:SimHei;'>红包</span>"}else this.close()},o.prototype.addBtnHandler=function(){WindowManager.instance.open(59,14)},o.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},s=o,l.GlovesStoneBuyAlert=s}(modules=modules||{}),function(t){var f,e,i,_,m,v,b,T,n;function s(){return e.call(this)||this}f=t.gloves||(t.gloves={}),i=ui.GlovesTipsAlertUI,_=t.config.GauntletCfg,m=t.config.AttrItemCfg,v=t.config.SkillCfg,b=t.config.BlendCfg,T=t.config.SkillPureCfg,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._attrNames=[this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5,this.attrName6],this._attrValues=[this.attrValue1,this.attrValue2,this.attrValue3,this.attrValue4,this.attrValue5,this.attrValue6],this._attrExes=[this.attrEx1,this.attrEx2,this.attrEx3,this.attrEx4,this.attrEx5,this.attrEx6],this._stoneIcons=[this.stoneIcon1,this.stoneIcon2,this.stoneIcon3,this.stoneIcon4,this.stoneIcon5,this.stoneIcon6],this._stoneNames=[this.stoneName1,this.stoneName2,this.stoneName3,this.stoneName4,this.stoneName5,this.stoneName6],this._stoneLvs=[this.stoneLv1,this.stoneLv2,this.stoneLv3,this.stoneLv4,this.stoneLv5,this.stoneLv6],this._stoneDescs=[this.stoneDesc1,this.stoneDesc2,this.stoneDesc3,this.stoneDesc4,this.stoneDesc5,this.stoneDesc6],CommonUtil.setHTMLPro(this.skillDesc,"#FFFFFF","SimHei",24),this.skillDesc.style.wordWrap=!0,this._descs=["对BOSS类怪物伤害增加+X%","与玩家战斗中，PVP减伤+X%","与玩家战斗中，PVP增伤+X%","战斗中暴击减伤+X%","战斗中暴击增伤+X%","攻击时真实伤害+X"],this.item.dataSource=[13250004,1,0,null]},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.updateInfo)},s.prototype.setOpenParam=function(t){t&&(this._marryRingInfo=t)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},s.prototype.updateInfo=function(){var t;if(this._marryRingInfo?(t=this._marryRingInfo,this._marryRingInfo=null):t=f.GlovesModel.instance.glovesInfo,t){for(var e=t[1],i=new Array,n=0,s=e.length;n<s;n++)i[e[n][0]-1]=e[n][1];var o=1,a=0,r=0;for(n=0,s=this._stoneIcons.length;n<s;n++){i[n]||(i[n]=1e3*(n+1));var l=i[n];l%1e3==0?l+=1:a++,this._stoneIcons[n].skin=CommonUtil.getIconById(_.instance.getCfgById(l)[4][0][0],!0);var h=_.instance.getCfgById(l);o+=i[n]%1e3==0?0:h[2][3],this._stoneNames[n].text=h[1],this._stoneLvs[n].text="Lv."+i[n]%1e3,this._stoneDescs[n].text=this._descs[n].replace("X",i[n]%1e3==0?"0":Math.floor(h[2][1]*(5===n?10:1e3))/10+""),r+=i[n]%1e3==0?0:h[6]}this.nameTxt.text=0===a?"无限手套":CommonUtil.numToUpperCase(a)+"原石·无限手套",this.stoneNum.text="x"+a;var c=_.instance.getCfgById(0),p=c[2];for(n=0,s=.5*p.length;n<s;n++){var u=m.instance.getCfgById(p[2*n]);this._attrNames[n].text=u[1]+"：",this._attrValues[n].text="+"+p[2*n+1],this._attrExes[n].text="(原石加成+"+Math.round(p[2*n+1]*(o-1))+")",this._attrExes[n].visible=1<o}var d=b.instance.getCfgById(51101)[1][0],y=v.instance.getCfgById(1e4*d+1),g=T.instance.getCfgById(d);this.skillIcon.skin="assets/icon/skill/"+g[6]+".png",this.skillName.text=g[1],this.skillDesc.innerHTML=CommonUtil.stringFormat(g[5],y[2]),this.fightClip.value=Math.floor(c[6]*o+r)+""}},s.prototype.destroy=function(){this._attrNames=this.destroyElement(this._attrNames),this._attrValues=this.destroyElement(this._attrValues),this._attrExes=this.destroyElement(this._attrExes),this._stoneIcons=this.destroyElement(this._stoneIcons),this._stoneNames=this.destroyElement(this._stoneNames),this._stoneLvs=this.destroyElement(this._stoneLvs),this._stoneDescs=this.destroyElement(this._stoneDescs),this._descs.length=0,this._descs=null,e.prototype.destroy.call(this)},n=s,f.GlovesTipsAlert=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.prevent_fool_question||(t.prevent_fool_question={}),n=ui.PreventFoolViewUI,s=t.config.PreventFoolCfg,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.completeTxt.visible=!1,this.countTxt.text=s.instance.getCfgById(1)[2][0][1].toString()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.handler),this.onAutoGlobalEvt("PREVENTFOOL_UPDATE",this,this.judegeComplete),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.judegeComplete()},a.prototype.handler=function(){WindowManager.instance.open(409)},a.prototype.judegeComplete=function(){e.PreventFoolModel.instance.completeQuestion()&&(this.btn.visible=this.tipTxt.visible=this.countTxt.visible=this.yuanbao.visible=!1,this.completeTxt.visible=!0)},o=a,e.PreventFoolPanel=o}(modules=modules||{}),function(t){var i,e,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}i=t.prevent_fool_question||(t.prevent_fool_question={}),n=t.config.PreventFoolCfg,e=ui.PreventFoolAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.tipTxt.wordWrap=!0,this.closeOnSide=!1,this._bgImgs=[this.answerA,this.answerB],this._imgs=[this.icon1,this.icon2]},o.prototype.onEvt=function(){var i=this;e.prototype.onEvt.call(this),this._bgImgs.forEach(function(t,e){i.onAutoClick(t,i,i.btnHandler,[e])}),this.onAutoGlobalEvt("PREVENTFOOL_UPDATE",this,this.updateRightAnswers)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._id=i.PreventFoolModel.instance.id,this._flag=-1,this.initShow()},o.prototype.updateRightAnswers=function(){if(this._id!==i.PreventFoolModel.instance.id){this._id=i.PreventFoolModel.instance.id,this._imgs[this._index].skin="common/image_common_dg.png",this.tipTxt.color=this.secondTxt.color="#0ecf09";var t=n.instance.getCfgById(this._id-1);t&&(this.tipTxt.text=""+t[0===this._index?6:7]),this._time=3,this._flag=1,this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler)}},o.prototype.btnHandler=function(t){if(-1==this._flag){this._index=t,this._bgImgs[t].skin="prevent_fool/panel_fzp_db2.png";var e=n.instance.getCfgById(this._id);e[1]==t?(i.PreventFoolCtrl.instance.getAnswerAward(t),i.PreventFoolCtrl.instance.getPreventFool()):(this._imgs[t].skin="common/image_common_hc.png",this.tipTxt.color=this.secondTxt.color="#d73633",this.tipTxt.text=""+e[0==t?6:7],this._time=5,this._flag=0,this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler))}},o.prototype.initShow=function(){var t=n.instance.getCfgById(this._id);this.question.text=""+t[3],this.answerA.label=""+t[4],this.answerB.label=""+t[5],this.secondTxt.text=this.tipTxt.text=this.icon1.skin=this.icon2.skin="",this.answerA.skin=this.answerB.skin="prevent_fool/panel_fzp_db1.png"},o.prototype.loopHandler=function(){this._time--,this._time<=0?(this._id>n.instance.maxLen?WindowManager.instance.close(409):this.initShow(),Laya.timer.clear(this,this.loopHandler),this._flag=-1):0===this._flag?this.secondTxt.text=this._time+"秒后重置答案":1===this._flag&&(this._id>n.instance.maxLen?this.secondTxt.text=this._time+"秒后退出答题":this.secondTxt.text=this._time+"秒后跳转到下一题")},o.prototype.close=function(){Laya.timer.clear(this,this.loopHandler),e.prototype.close.call(this)},o.prototype.destroy=function(){this._bgImgs=this.destroyElement(this._bgImgs),this._imgs=this.destroyElement(this._imgs),e.prototype.destroy.call(this)},s=o,i.PreventFoolAlert=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("kuanghai_task");this.taskArr=t},n.prototype.getCfgById=function(t){for(var e,i=0,n=this.taskArr.length;i<n;i++)t==this.taskArr[i][0]&&(e=this.taskArr[i]);if(e)return e;console.log("gar == null")},n.prototype.getCfgByType=function(t){for(var e=[],i=0,n=this.taskArr.length;i<n;i++)t==this.taskArr[i][2]&&e.push(this.taskArr[i]);if(e)return e;console.log("gar == null")},i=n,e.TheCarnivalTaskCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=GlobalData.getConfig("kuanghai_rise");this.getTab=t},n.prototype.getCfgById=function(t){for(var e=[],i=0,n=this.getTab.length;i<n;i++)t==this.getTab[i][0]&&e.push(this.getTab[i]);return e},i=n,e.TheCarnivalCfg=i}(modules=modules||{}),function(e){var l,i,n,s,t,o;function a(){var t=i.call(this)||this;return t.taskArr=[],t.riseArr=[],t}l=e.the_carnival||(e.the_carnival={}),n=e.config.TheCarnivalTaskCfg,s=e.config.TheCarnivalCfg,t=e.common.SimpleList,i=ui.TheCarnivalViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.openState=0,this.taskList=[],this.gradeList=[],this.taskIdArr=[],this.activityId=0,this.haiValue=0,this.taskTipsTxt.underline=!0,this.leftListInit(),this.rightListInit()},a.prototype.leftListInit=function(){this._leftList=t.create(l.TheCarnivalTaskItem,195,149),this._leftList.itemRender=l.TheCarnivalTaskItem,this._leftList.width=200,this._leftList.height=881,this.leftPanel.addChild(this._leftList)},a.prototype.rightListInit=function(){this._rightList=t.create(l.TheCarnivalItem,444,149),this._rightList.width=454,this._rightList.height=829,this.rightPanel.addChild(this._rightList)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),l.TheCarnivalCtrl.instance.getKuanghaiInfo(),this._updateView(),this.setTempArr()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("THE_CARNIVAL_UPDATE",this,this._updateView),this.onAutoClick(this.taskTipsTxt,this,this.openTaskAlert)},a.prototype.openTaskAlert=function(){WindowManager.instance.open(453)},a.prototype._updateView=function(){if(this.openState=l.TheCarnivalModel.instance.openState,this.taskList=l.TheCarnivalModel.instance.taskList,this.gradeList=l.TheCarnivalModel.instance.gradeList,this.activityId=l.TheCarnivalModel.instance.id,this.haiValue=l.TheCarnivalModel.instance.exp,this.happyPointCount.visible=!0,this.happyPointBG.visible=!0,this.taskIdArr=[],0!=this.openState&&this.taskList){this.leftPanel.visible=!0,this.rightPanel.visible=!0,this.itemPanel.visible=!0;for(var t=0;t<this.taskList.length;t++)this.taskIdArr.push(this.taskList[t][0]);for(this.happyPointCount.text="嗨点数量:"+this.haiValue,this.taskArr=[],t=0;t<this.taskIdArr.length;t++){var e=n.instance.getCfgById(this.taskIdArr[t]);e&&this.taskArr.push(e)}this.riseArr=s.instance.getCfgById(this.activityId),this.taskArr.sort(this.sortFuncTask.bind(this)),this.riseArr.sort(this.sortFuncRise.bind(this)),0<l.TheCarnivalModel.instance.taskList.length?(this._leftList.datas=this.taskArr,this._rightList.datas=this.riseArr):(this._leftList.datas=this.tempTaskArr,this._rightList.datas=this.tempRiseArr),this.setActivitiTime()}else this.leftPanel.visible=!1,this.rightPanel.visible=!1,this.itemPanel.visible=!1,this.happyPointCount.visible=!1,this.happyPointBG.visible=!1},a.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(244);0<l.TheCarnivalModel.instance.restTm-GlobalData.serverTime&&t?(this.activityText1.color="#ffec7c",this.activityText.visible=!0,this.activityText1.text="活动时间:",this.endBG.visible=!1,this.endText.visible=!1,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.endBG.visible=!0,this.endText.visible=!0,this.happyPointCount.visible=!1,this.happyPointBG.visible=!1,this.leftPanel.visible=!1,this.rightPanel.visible=!1,this.itemPanel.visible=!1)},a.prototype.activityHandler=function(){l.TheCarnivalModel.instance.restTm-GlobalData.serverTime<=0?(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.endBG.visible=!0,this.endText.visible=!0,this.happyPointCount.visible=!1,this.happyPointBG.visible=!1,this.leftPanel.visible=!1,this.rightPanel.visible=!1,this.itemPanel.visible=!1,Laya.timer.clear(this,this.activityHandler)):864e5<l.TheCarnivalModel.instance.restTm-GlobalData.serverTime?this.activityText.text=""+CommonUtil.timeStampToDayHourMin(l.TheCarnivalModel.instance.restTm):this.activityText.text=""+CommonUtil.timeStampToHHMMSS(l.TheCarnivalModel.instance.restTm)},a.prototype.sortFuncTask=function(t,e){var i=t[0],n=e[0],s=l.TheCarnivalModel.instance.getNodeInfoById(i),o=l.TheCarnivalModel.instance.getNodeInfoById(n),a=s?s[1]:0,r=o?o[1]:0;return(a=1===a?0:0===a?1:a)==(r=1===r?0:0===r?1:r)?i-n:a-r},a.prototype.sortFuncRise=function(t,e){var i=t[1],n=e[1],s=l.TheCarnivalModel.instance.getRisrNodeInfoByGrade(i),o=l.TheCarnivalModel.instance.getRisrNodeInfoByGrade(n),a=s?s[1]:0,r=o?o[1]:0;return(a=1===a?0:0===a?1:a)==(r=1===r?0:0===r?1:r)?i-n:a-r},a.prototype.setTempArr=function(){for(var t=0;t<this.taskArr.length;t++)this.tempTaskArr=this.taskArr;for(t=0;t<this.riseArr.length;t++)this.tempRiseArr=this.riseArr},o=a,l.TheCarnivalPanel=o}(modules=modules||{}),function(i){var h,n,t,s,c,p,e,u,o,a;function r(){return n.call(this)||this}h=i.familiars_down||(i.familiars_down={}),t=ui.FamiliarsDownViewUI,s=i.common.AvatarClip,c=i.config.BlendCfg,p=i.config.RechargeCfg,e=i.common.CustomClip,u=i.config.ExteriorCfg,o=i.bag.BaseItem,n=t,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this._viewType=0,this._modelClip=s.create(1024,1024,1024),this.addChildAt(this._modelClip,7),this._modelClip.anchorX=this._modelClip.anchorY=.5,this._modelClip.pos(360,680,!0),this._rechargeIds=[51,52,53],this._item=new o,this.createEffect(),this.discountTxt.text=p.instance.getRecharCfgByIndex(50)[3],this.discountTxt.text||(this.discountTxt.visible=this.redImg.visible=!1);var t=i.redBag.RedBagUtils.getActionopen()?2:1;if(this.bottomBg.skin="motongjiangshi/image_mtjs_0"+t+".jpg",this.goldTxtBox.visible=2==t,this.goldTxtBox.visible){var e=i.redBag.RedBagUtils.getIdAndCondByMoney(1032,50);this.goldTxt.text=e+"元宝",this.goldTxt.x=this.goldTxt1.x+this.goldTxt1.textWidth,this.goldTxt2.x=this.goldTxt.x+this.goldTxt.textWidth}},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.leftBtn,this,this.changeView,[-1]),this.onAutoClick(this.rightBtn,this,this.changeView,[1]),this.onAutoClick(this.fhTopBtn,this,this.chooseView,[0]),this.onAutoClick(this.sqTopBtn,this,this.chooseView,[1]),this.onAutoClick(this.msTopBtn,this,this.chooseView,[2]),this.onAutoGlobalEvt("MTJS_GET_FASHION_BUY",this,this.updateInfo),this.onAutoGlobalEvt("MTJS_DRAW_FASHION_BUY",this,this.updateView),this.onAutoClick(this.previewBtn,this,this.previewHandler),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyHandler),this.onAutoClick(this.buyBtn,this,this.buyHandler),this.regAutoRP(this.jtfhRP,["motongjiangshiRp1"]),this.regAutoRP(this.scsqRP,["motongjiangshiRp2"]),this.regAutoRP(this.lhmsRP,["motongjiangshiRp3"])},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.initView(),this.updateInfo()},r.prototype.close=function(){n.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),this._modelClip=this.destroyElement(this._modelClip),this.observationItem=this.destroyElement(this.observationItem),this._btnClip=this.destroyElement(this._btnClip),this._oneKeyClip=this.destroyElement(this._oneKeyClip),this._rechargeIds.length=0,this._item=null,n.prototype.destroy.call(this,t)},r.prototype.updateInfo=function(){var t=h.FamiliarsDownModel.instance.info;if(t){this._endTime=t[2],this._endTime>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(this.timerTxt.visible=!1,this.tipHtml.visible=!1,this.overTxt.visible=!0);for(var e=0,i=0;i<this._rechargeIds.length;i++){var n=this._rechargeIds[i];0===h.FamiliarsDownModel.instance.getStateByRechargeId(n)&&(e+=p.instance.getRecharCfgByIndex(n)[2])}var s=p.instance.getRecharCfgByIndex(50)[2];this.oneKeyBtn.label=s+"元",e<s?(this.oneKeyBtn.disabled=!0,this._oneKeyClip.visible=!1,this._oneKeyClip.stop()):(this.oneKeyBtn.disabled=!1,this._oneKeyClip.visible=!0,this._oneKeyClip.play()),this.chooseView(this._viewType)}},r.prototype.loopHandler=function(){this._endTime>GlobalData.serverTime?this.timerTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(this._endTime):(this.timerTxt.text="00:00:00",Laya.timer.clear(this,this.loopHandler))},r.prototype.updateView=function(){this.initView(),this.chooseView(this._viewType)},r.prototype.buyHandler=function(){var t=this._rechargeIds[this._viewType],e=h.FamiliarsDownModel.instance.getStateByRechargeId(t);1===e?h.FamiliarsDownCtrl.instance.drawFashionBuy(t):0===e&&h.FamiliarsDownCtrl.instance.buy(t)},r.prototype.initView=function(){for(var t=!0,e=0,i=this._rechargeIds.length;e<i;e++){var n=h.FamiliarsDownModel.instance.getStateByRechargeId(this._rechargeIds[e]);if(1===n){this._viewType=e;break}t&&0===n&&(t=!1,this._viewType=e)}},r.prototype.changeView=function(t){this._viewType+=t,this._viewType<0?this._viewType=2:2<this._viewType&&(this._viewType=0),this.chooseView(this._viewType)},r.prototype.chooseView=function(t){this._viewType=t;var e=c.instance.getCfgById(63201)[1],i=e[2*this._viewType],n=1===e[2*this._viewType+1],s=u.instance.getCfgById(i);this._modelClip.reset(i),this._modelClip.avatarRotationX=s[6],this._modelClip.avatarRotationY=s[7],this._modelClip.avatarScale=s[10]?s[10]:1,this._modelClip.avatarY=s[9],this._modelClip.avatarX=s[8],this.observationItem.data=[[this._modelClip,Math.round(i/1e3)]],0===this._viewType?(this.titleImg.skin="motongjiangshi/txt_mojs_jtfh_01.png",this.tagImg.skin="motongjiangshi/txt_mojs_fhl.png",this.selectedImg.pos(80,118,!0),this._modelClip.avatarScale=3,this._modelClip.x=360,this.createPreview(63001)):1===this._viewType?(this.titleImg.skin="motongjiangshi/txt_mojs_scsq_01.png",this.tagImg.skin="motongjiangshi/txt_mojs_hjq.png",this.selectedImg.pos(270,118,!0),this._modelClip.avatarScale=2.5,this._modelClip.x=320,this.createPreview(63002)):2===this._viewType&&(this.titleImg.skin="motongjiangshi/txt_mojs_lhms_01.png",this.tagImg.skin="motongjiangshi/txt_mojs_mtnz.png",this.selectedImg.pos(460,118,!0),this._modelClip.avatarScale=1.6,this._modelClip.x=360,this.createPreview(63003)),this.addModelAnimate(n),this.fightClip.value=c.instance.getCfgById(63203)[1][this._viewType].toString();var o=this._rechargeIds[this._viewType],a=p.instance.getRecharCfgByIndex(o);this.tipsTxt.text="现在抢购即可获得"+a[6][0][1];var r=h.FamiliarsDownModel.instance.getStateByRechargeId(o);if(0===r){var l=a[2];this.buyBtn.visible=!0,this.buyBtn.label=l+"元",this._btnClip.visible=!1,this._btnClip.stop(),this.receiveImg.visible=!1}else 1===r?(this.buyBtn.visible=!0,this.buyBtn.label="领取",this._btnClip.visible=!0,this._btnClip.play(),this.receiveImg.visible=!1):2===r&&(this.receiveImg.visible=!0,this.buyBtn.visible=!1,this._btnClip.visible=!1,this._btnClip.stop());this._endTime<=GlobalData.serverTime&&(this.buyBtn.visible=!1,this.discountTxt.visible=!1,this.redImg.visible=!1,this.oneKeyBtn.visible=!1,this._oneKeyClip.visible=!1,this.overImg.visible=!0,this.receiveImg.visible=!0,this.receiveImg.skin="common/txt_commmon_yjies.png")},r.prototype.addModelAnimate=function(t){this._modelClip.y=654,this._modelClipTween&&(this._modelClipTween.stop(),this._modelClipTween=null),t&&(this._modelClipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-20},1e3).start().yoyo(!0).repeat(99999999))},r.prototype.createEffect=function(){this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.buyBtn.x-5,this.buyBtn.y-10),this._oneKeyClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._oneKeyClip),this._oneKeyClip.pos(this.oneKeyBtn.x-5,this.oneKeyBtn.y-10)},r.prototype.oneKeyHandler=function(){h.FamiliarsDownCtrl.instance.buy(50)},r.prototype.createPreview=function(t){var e=c.instance.getCfgById(t)[1][0];this._item.pos(478,356),this.addChild(this._item),this._item.dataSource=[e,1,0,null],this._item._qualityBg.skin="motongjiangshi/image_sc_h.png",this._item.scale(.8,.8)},r.prototype.previewHandler=function(){var t=c.instance.getCfgById(63201)[1];WindowManager.instance.open(435,[t[4],t[2],0,t[0],0,0])},a=r,h.FamiliarsDownPanel=a}(modules=modules||{}),function(i){var t,n,e,s;function o(){return null!==n&&n.apply(this,arguments)||this}t=i.newOfficialAccount||(i.newOfficialAccount={}),e=ui.NewOfficialAccountUI,n=e,__extends(o,n),o.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=this.centerY=0;var t="";if(-1!=["9130iosGF"].indexOf(PlatParams.platform))t="new_official_account/image_gzh_ios.jpg";else if(-1!=["9187","9187ios"].indexOf(PlatParams.platform))t="new_official_account/image_gzh_dt3.jpg";else if("6kwios"===PlatParams.platform||"9130hg"===PlatParams.platform&&31===i.common.PlatParams.groupId)t="new_official_account/image_gzh_dt2.jpg";else if(-1!==["9130","9130ios"].indexOf(PlatParams.platform))t="new_official_account/image_gzh_dt.jpg";else{var e=PlatParams.control.gzhDt;"number"==typeof e&&0<e?t="new_official_account/image_gzh_dt"+e+".jpg":console.log("......没有对应的",e)}this.img.skin=t},o.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){i.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},s=o,t.NewOfficialAccountPanel=s}(modules=modules||{}),function(t){var o,a,e,r,i;function n(){var t=a.call(this)||this;return t.taskArr=[],t}o=t.the_carnival||(t.the_carnival={}),e=t.common.SimpleList,r=t.config.TheCarnivalTaskCfg,a=ui.TheCarnivalTaskAlertUI,__extends(n,a),n.prototype.initialize=function(){a.prototype.initialize.call(this),this._listPanel=e.create(o.TheCarnivalTaskAlertItem,537,53),this._listPanel.itemRender=o.TheCarnivalTaskAlertItem,this._listPanel.width=523,this._listPanel.height=519,this.listPanel.addChild(this._listPanel)},n.prototype.onOpened=function(){a.prototype.onOpened.call(this),this.taskList=o.TheCarnivalModel.instance.taskList,this.taskArr=[];for(var t=0;t<this.taskList.length;t++){var e=r.instance.getCfgById(this.taskList[t][0]),i=e[2],n=r.instance.getCfgByType(i);if(e)for(var s=0;s<n.length;s++)this.taskArr.push(n[s])}this.taskArr.sort(this.sortFuncTask.bind(this)),this._listPanel.datas=this.taskArr},n.prototype.sortFuncTask=function(t,e){return t[0]-e[0]},n.prototype.destroy=function(){this._listPanel&&(this._listPanel.removeSelf(),this._listPanel.destroy(),this._listPanel=null),a.prototype.destroy.call(this)},i=n,o.TheCarnivalTaskAlert=i}(modules=modules||{}),function(t){var l,e,i,n,r,s;function o(){return null!==e&&e.apply(this,arguments)||this}l=t.redPack||(t.redPack={}),i=ui.RedPackViewUI,n=t.common.SimpleList,r=t.notice.SystemNoticeManager,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=n.create(l.RedPackItem,353,40,1,1,0,5),this._list.pos(7,265,!0),this._list.size(353,200),this.openBox.addChild(this._list),this.linkTxt.underline=!0,this.layer=9,this.zOrder=1},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.linkTxt,this,this.linkTxtHandler),this.onAutoGlobalEvt("RED_PACK_UPDATE",this,this.setState,[1]),this.onAutoGlobalEvt("RED_PACK_INFO_UPDATE",this,this.residueCount)},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.setState(0)},o.prototype.setState=function(t){if(0==t)this.maskImg.skin="red_pack/image_hb_bg2.png",this.closeBox.visible=!0,this.openBox.visible=!1,this.countTxt.text=l.RedPackModel.instance.residueCount.toString(),CommonUtil.centerChainArr(this.closeBox.width,[this.desTxt_3,this.countTxt,this.desTxt_4]),this.onAutoClick(this.maskImg,this,this.maskImgHandler);else{var e=l.RedPackModel.instance.openInfo;if(!e)return;this.maskImg.skin="red_pack/image_hb_bg1.png",this.closeBox.visible=!1,this.openBox.visible=!0;var i=e[5];if(0===i)this.failTxt.visible=!1,this.hiddenTxt.visible=this.numTxt.visible=this.iconImg_1.visible=!0,this.numTxt.text=e[4].toString(),CommonUtil.centerChainArr(this.openBox.width,[this.numTxt]),CommonUtil.chainArr([this.numTxt,this.iconImg_1],3);else{var n=ErrorCodeCfg.instance.getErrorCfgById(i);if(n){var s=n[1];this.failTxt.text=s}else this.failTxt.text="",r.instance.addNotice(""+i,!0);this.failTxt.visible=!0,this.hiddenTxt.visible=this.numTxt.visible=this.iconImg_1.visible=!1}var o=e[1];this.desTxt_1.text=o+"个红包共";var a=e[2]?e[2]:[];this.desTxt_2.text=e[0]+",已领取:"+a.length+"/"+o,CommonUtil.centerChainArr(this.openBox.width,[this.desTxt_1,this.iconImg_2,this.desTxt_2]),this.bestPlayer(a,o),this._list.datas=a}},o.prototype.residueCount=function(){this.countTxt.text=l.RedPackModel.instance.residueCount.toString(),CommonUtil.centerChainArr(this.closeBox.width,[this.desTxt_3,this.countTxt,this.desTxt_4])},o.prototype.maskImgHandler=function(){l.RedPackCtrl.instance.openRedPack(),this.setState(1),this.maskImg.off("click",this,this.maskImgHandler),GlobalData.dispatcher.off("RED_PACK_INFO_UPDATE",this,this.residueCount)},o.prototype.linkTxtHandler=function(){var t=l.RedPackModel.instance.goldRecord;if(0===t.length)CommonUtil.alert("本日红包记录","本日尚未开启红包",null);else{for(var e=[],i=0,n=t.length;i<n;i++)e[i]="第"+(i+1)+"次开启,获得"+t[i]+"<img src='"+CommonUtil.getIconById(90140001,!0)+"' width= '40' height= '40'/><br/>";WindowManager.instance.open(443,["本日红包记录",e.join(""),null,!1])}},o.prototype.bestPlayer=function(t,e){var i,n=0;if(t.length===e)for(var s=0,o=t;s<o.length;s++){var a=o[s],r=a[2];n<r&&(n=r,i=a[0])}l.RedPackModel.instance.luckBest=i},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s=o,l.RedPackPanel=s}(modules=modules||{}),function(t){var e,i,n,s,a,o,r,l,h;function c(){return i.call(this)||this}e=t.rush_to_purchase||(t.rush_to_purchase={}),n=ui.RushToPurchaseAlertUI,s=t.common.CustomClip,a=t.config.BlendCfg,o=t.vip.VipModel,r=t.funcOpen.FuncOpenModel,l=t.common.CommonUtil,i=n,__extends(c,i),c.prototype.initialize=function(){i.prototype.initialize.call(this),l.setHTMLPro(this.timeHtml,"#ffffff","SimHei",24,"center"),this._svip=a.instance.getCfgById(73003)[1][0],this.createEffect(),this.showReward()},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.buyHandler),this.onAutoGlobalEvt("DRAGON_INFO_UPDATE",this,this.updateInfo)},c.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateInfo()},c.prototype.close=function(){i.prototype.close.call(this),s.thisStop(this._btnClip);var t=e.RushToPurchaseModel.instance.info;t&&2===t[0]&&r.instance.setActionOpen(287,2)},c.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},c.prototype.updateInfo=function(){this.setBtnState(),this.showActivityTime()},c.prototype.showActivityTime=function(){this._time=e.RushToPurchaseModel.instance.info[1],this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(Laya.timer.clear(this,this.loopHandler),this.timeHtml.innerHTML="<span style='color: #ff3e3e'>活动已结束</span>")},c.prototype.loopHandler=function(){this._time>GlobalData.serverTime?this.timeHtml.innerHTML="活动倒计时：<span style='color: #50ff28'>"+t.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._time)+" </span>":(this.timeHtml.innerHTML="<span style='color: #ff3e3e'>活动已结束</span>",Laya.timer.clear(this,this.loopHandler))},c.prototype.setBtnState=function(){switch(s.thisStop(this._btnClip),e.RushToPurchaseModel.instance.info[0]){case 0:this.gotImg.visible=!1,this.buyBtn.visible=!0,this.buyBtn.label="1元抢购";break;case 1:this.gotImg.visible=!1,this.buyBtn.visible=!0,this.buyBtn.label="领取",s.thisPlay(this._btnClip);break;case 2:this.gotImg.visible=!0,this.buyBtn.visible=!1}},c.prototype.buyHandler=function(){var t=o.instance.vipLevel;0===e.RushToPurchaseModel.instance.info[0]?t>=this._svip?e.RushToPurchaseCtrl.instance.buy(41):l.alert("温馨提示","领取奖励需要SVIP"+this._svip+",是否前往提升SVIP?",[Handler.create(this,this.openRecharge)]):e.RushToPurchaseCtrl.instance.getOneMoneyBuyAward()},c.prototype.openRecharge=function(){this.close(),l.gotoVIP()},c.prototype.createEffect=function(){this._btnClip=s.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.buyBtn.x-5,this.buyBtn.y-10)},c.prototype.showReward=function(){for(var t=[],e=a.instance.getCfgById(73002)[1],i=0,n=e.length;i<n;i+=2)t.push([e[i],e[i+1],0,null]);var s=[this.box1,this.box2,this.box3,this.box4,this.box5,this.box6];for(i=0,n=s.length;i<n;i++){var o=s[i];this.addChild(o),o.dataSource=t[i]}},h=c,e.RushToPurchaseAlert=h}(modules=modules||{}),function(t){var e,i;function n(){}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgByRound=function(t){return GlobalData.getConfig("welfare_officer_dial")[t-1]},n.prototype.getFightItemsByRound=function(t){var e=this.getCfgByRound(t);return e?e[1]:[]},n.prototype.getIsLastRound=function(t){return!(!GlobalData.getConfig("welfare_officer_dial")[t-1]||GlobalData.getConfig("welfare_officer_dial")[t])},i=n,e.WelfareOfficerDialCfg=i}(modules=modules||{}),function(f){!function(l){var i,e=f.common.BtnGroup,n=f.common.SimpleList,h=f.common.CustomClip,t=f.bag.BaseItem,s=f.notice.SystemNoticeManager,r=f.config.WelfareOfficerDialCfg,o=f.bag.BagModel,a=f.redPoint.RedPointCtrl,c=f.common.AvatarClip,p=(i=ui.FuLiGuanViewUI,__extends(u,i),u.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._gBtn=this.destroyElement(this._gBtn),this._btnEffect=this.destroyElement(this._btnEffect),this._avatar=this.destroyElement(this._avatar),this._loginDatas=null,this._showItem=null,this._gotImgs=null,i.prototype.destroy.call(this)},u.prototype.initialize=function(){i.prototype.initialize.call(this),this._round=0,this._fightItems=[],this._loginDatas=GlobalData.getConfig("welfare_officer_login").concat(),this._showItem=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11,this.item12],this._gotImgs=[this.gotImg1,this.gotImg2,this.gotImg3,this.gotImg4,this.gotImg5,this.gotImg6,this.gotImg7,this.gotImg8,this.gotImg9,this.gotImg10,this.gotImg11,this.gotImg12],this._gBtn=new e,this._gBtn.setBtns(this.taskBtn,this.fightBtn),this._list=n.create(y,553,153,1,1,0,0),this._list.size(this.taskBox.width,this.taskBox.height),this.taskBox.addChild(this._list),CommonUtil.setHTMLPro(this.fightTxt,"#ffffff","SimHei",22),this.fightTxt.style.leading=5,CommonUtil.setHTMLPro(this.roundTxt,"#ffffff","SimHei",22,"center"),this.roundTxt.style.leading=5,this._avatar=c.normalCreate(),this.fightBox.addChildAt(this._avatar,1),this._avatar.pos(50,-80),this._avatar.avatarRotationY=180,this._avatar.avatarRotationX=0,this._avatar.avatarScale=1.3,this._avatar.avatarY=0,this._avatar.avatarX=0,this.imgArr=[this.img_1,this.img_2,this.img_3,this.img_4],this.skinStrArr=f.common.VersionResUtlis.getRes(6);for(var t=0;t<4;t++)this.imgArr[t].skin=this.skinStrArr[t];this._avatar.reset(f.config.BlendCfg.instance.getCfgById(88001)[1][0]+PlayerModel.instance.occ)},u.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._gBtn,"change",this,this.gBtnHandler),this.onAutoClick(this.runBtn,this,this.runHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoGlobalEvt("WELFARE_OFFICER_LOGIN_UPDATE",this,this.updateLogin),this.onAutoGlobalEvt("WELFARE_OFFICER_FIGHT_UPDATE",this,this.updateFight),this.onAutoGlobalEvt("WELFARE_OFFICER_PLAY_ANIMATION",this,this.playHandler),this.regAutoRP(this.loginRP,["fuliguanLoginRP"]),this.regAutoRP(this.fightRP,["fuliguanFightRP"])},u.prototype.gBtnHandler=function(){if(this._selectedIndex!=this._gBtn.selectedIndex){switch(this._selectedIndex=this._gBtn.selectedIndex,this._selectedIndex){case 0:this.taskBtn.skin="fuliguan/btn_flg_02.png",this.taskBtn.labelColors="#b15315",this.fightBtn.skin="fuliguan/btn_flg_01.png",this.fightBtn.labelColors="#743105";break;case 1:this.fightBtn.skin="fuliguan/btn_flg_02.png",this.fightBtn.labelColors="#b15315",this.taskBtn.skin="fuliguan/btn_flg_01.png",this.taskBtn.labelColors="#743105"}this.stopAni(),this.taskBox.visible=0==this._selectedIndex,this.fightBox.visible=1==this._selectedIndex,this.taskBox.visible&&this.updateLogin(),this.fightBox.visible&&this.updateFight()}},u.prototype.runHandler=function(){if(!l.WelfareOfficerModel.instance.waitForAnimation&&!this._isAnimation)return l.WelfareOfficerModel.instance.nextRound>l.WelfareOfficerModel.instance.nowRound?(l.WelfareOfficerModel.instance.nowRound=l.WelfareOfficerModel.instance.nextRound,l.WelfareOfficerModel.instance.nowFight=l.WelfareOfficerModel.instance.nextFight,l.WelfareOfficerModel.instance.nextRound=l.WelfareOfficerModel.instance.nextFight=0,l.WelfareOfficerModel.instance.indexCount=0,l.WelfareOfficerModel.instance.indexList={},this.updateFight(),void a.instance.setRPProperty("fuliguanFightRP",0<this._leftIndex&&PlayerModel.instance.fight>=l.WelfareOfficerModel.instance.nowFight)):void(f.bag.BagModel.instance.getBagEnoughById(0)<1?s.instance.addNotice("道具背包已满，请先整理",!0):(l.WelfareOfficerCtrl.instance.WelfareOfficerDialRun(),l.WelfareOfficerModel.instance.waitForAnimation=!0));s.instance.addNotice("操作频繁，请稍后",!0)},u.prototype.helpHandler=function(){CommonUtil.alertHelp(20095)},u.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._selectedIndex=-1,this._lastIndex=this._targetIndex=0,a.instance.getRPProperty("fuliguanLoginRP")?this._gBtn.selectedIndex=0:a.instance.getRPProperty("fuliguanFightRP")?this._gBtn.selectedIndex=1:this._gBtn.selectedIndex=0},u.prototype.close=function(t,e){this.stopAni(),i.prototype.close.call(this,t,e)},u.prototype.stopAni=function(){Laya.timer.clear(this,this.play),l.WelfareOfficerModel.instance.waitForAnimation=this._isAnimation=!1,this._lastIndex=this._targetIndex,o.instance.delayedPutInBag()},u.prototype.updateFight=function(){if(this.fightBox.visible){l.WelfareOfficerModel.instance.nextRound>l.WelfareOfficerModel.instance.nowRound?this.runBtn.label="进入下一轮":this.runBtn.label="开始抽奖";var t=l.WelfareOfficerModel.instance.nowRound;this._round<t&&(this._fightItems=r.instance.getFightItemsByRound(t),this._round=t,r.instance.getIsLastRound(t)&&(this.fightDescTxt.text="本轮奖励为最后一轮，抽取完成可获得全部奖励"));var e=PlayerModel.instance.fight,i=l.WelfareOfficerModel.instance.nowFight,n=e<i?"#ff3e3e":"#50ff28",s=CommonUtil.formatHtmlStrByColor("#50ff28",t.toString()),o=CommonUtil.formatHtmlStrByColor(n,e.toString()),a=CommonUtil.formatHtmlStrByColor("#fee556",i.toString());this.roundTxt.innerHTML="当前轮次：第"+s+"轮",this.fightTxt.innerHTML="当前战力："+o+"<br/>需要战力："+a,this.setItems(this._fightItems),l.WelfareOfficerModel.instance.waitForAnimation=!1,l.WelfareOfficerModel.instance.nextRound>l.WelfareOfficerModel.instance.nowRound||i<=e&&0<this._leftIndex?(this._btnEffect||(this._btnEffect=h.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnEffect.pos(-5,-10),this.runBtn.addChild(this._btnEffect)),h.thisPlay(this._btnEffect)):h.thisStop(this._btnEffect),this.runBtn.visible=0<this._leftIndex||l.WelfareOfficerModel.instance.nextRound>l.WelfareOfficerModel.instance.nowRound,this.overImg.visible=0==this._leftIndex&&l.WelfareOfficerModel.instance.nextRound<=l.WelfareOfficerModel.instance.nowRound}},u.prototype.updateLogin=function(){this.taskBox.visible&&(this._loginDatas.sort(function(t,e){var i=l.WelfareOfficerModel.instance.taskList[t[0]]||0,n=l.WelfareOfficerModel.instance.taskList[e[0]]||0;return 2==i&&2!=n?1:2!=i&&2==n?-1:t[0]-e[0]}),this._list.datas=this._loginDatas)},u.prototype.setItems=function(t){this.selectBox.visible=!1,this._totalIndex=this._leftIndex=0;for(var e=0,i=this._showItem.length;e<i;++e)t.length>3*e?(this._showItem[e].visible=!0,this._showItem[e].dataSource=[t[3*e],t[3*e+1],0,null],this._gotImgs[e].visible=l.WelfareOfficerModel.instance.indexList[e],this.selectBox.visible||this._lastIndex!=e||(this.selectBox.visible=!0,this.selectBox.x=this._showItem[e].x+this._showItem[e].width/2,this.selectBox.y=this._showItem[e].y+this._showItem[e].height/2),this._totalIndex+=1,this._leftIndex+=this._gotImgs[e].visible?0:1):this._gotImgs[e].visible=this._showItem[e].visible=!1},u.prototype.playHandler=function(t){if(1==this._leftIndex)return this._lastIndex=this._targetIndex=0,o.instance.delayedPutInBag(),void this.updateFight();this._targetIndex=t;var e=this._lastIndex,i=0;do{for(;(e=e<this._totalIndex-1?e+1:0)!=t&&l.WelfareOfficerModel.instance.indexList[e];);i+=1}while(e!=t);for(this._leftCount=i;this._leftCount<this._maxCount;)this._leftCount+=this._leftIndex;this._nowIndex=this._lastIndex,this._nowSpeed=this._maxSpeed,this.play(),this._isAnimation=!0},u.prototype.play=function(){for(var t=this._nowIndex;(t=t<this._totalIndex-1?t+1:0)!=this._targetIndex&&l.WelfareOfficerModel.instance.indexList[t];);this.selectBox.pos(this._showItem[t].x+this._showItem[t].width/2,this._showItem[t].y+this._showItem[t].height/2),--this._leftCount,0<this._leftCount?(this._nowIndex=t,this._leftCount>(this._minSpeed-this._maxSpeed)/this._speedStep?this._nowSpeed=this._nowSpeed>this._maxSpeed?this._nowSpeed-this._speedStep:this._maxSpeed:this._nowSpeed=this._nowSpeed<this._minSpeed?this._nowSpeed+this._speedStep:this._minSpeed,Laya.timer.once(this._nowSpeed,this,this.play)):(this._lastIndex=this._targetIndex,this._isAnimation=!1,o.instance.delayedPutInBag(),this.updateFight())},u);function u(){var t=null!==i&&i.apply(this,arguments)||this;return t._maxSpeed=10,t._minSpeed=130,t._speedStep=10,t._maxCount=15,t._isAnimation=!1,t}l.WelfareOfficerPanel=p;var d,y=(d=ui.FuLiGuanItemUI,__extends(g,d),g.prototype.destroy=function(t){void 0===t&&(t=!0),this._itemList=this.destroyElement(this._itemList),this._btnClip=this.destroyElement(this._btnClip),d.prototype.destroy.call(this,t)},g.prototype.initialize=function(){d.prototype.initialize.call(this),this._itemList=n.create(t,100,100,2,1,15,0),this._itemList.pos(15,40),this._itemList.size(448,103),this.addChildAt(this._itemList,2),this.htmlTxt.style.color=this.descTxt.color,this.htmlTxt.style.fontFamily=this.descTxt.font,this.htmlTxt.style.fontSize=this.descTxt.fontSize,this.descTxt.text=""},g.prototype.onEvt=function(){d.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.onBtnHandler)},g.prototype.onBtnHandler=function(){var t=this._cfg[3];f.bag.BagUtil.canAddItemsByBagIdCount(CommonUtil.formatItemData(t))&&l.WelfareOfficerCtrl.instance.GetWelfareOfficerLoginAward(this._cfg[0])},g.prototype.setData=function(t){d.prototype.setData.call(this,t),this._cfg=t;var e=l.WelfareOfficerModel.instance.loginDays,i=this._cfg[2],n=CommonUtil.formatHtmlStrByColor("#50ff28",i.toString());this.htmlTxt.innerHTML="登录"+n+"天，可领取奖励！";var s=e<i;this.scheduleText.text="("+e+"/"+i+")",this.scheduleText.color=s?"#ff3e3e":"#168a17",h.thisStop(this._btnClip),s?(this.incompleteImg.visible=!0,this.receivedImg.visible=!1,this.sureBtn.visible=!1):(this.incompleteImg.visible=!1,2==l.WelfareOfficerModel.instance.taskList[this._cfg[0]]?(this.receivedImg.visible=!0,this.sureBtn.visible=!1):(this.receivedImg.visible=!1,this.sureBtn.visible=!0,this.playBtnEffect()));for(var o=t[3],a=[],r=0;r<o.length;r+=2)a.push([o[r],o[r+1],0,null]);this._itemList.datas=a},g.prototype.playBtnEffect=function(){this._btnClip||(this._btnClip=h.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.scale(.64,.64),this._btnClip.pos(this.sureBtn.x-4,this.sureBtn.y-6),this.addChild(this._btnClip)),h.thisPlay(this._btnClip)},g);function g(){return null!==d&&d.apply(this,arguments)||this}l.WelfareOfficerItem=y}(f.welfare_officer||(f.welfare_officer={}))}(modules=modules||{}),function(e){var i,n,t,s,o,a;function r(){return null!==n&&n.apply(this,arguments)||this}i=e.qq||(e.qq={}),t=e.bag.BaseItem,s=e.common.SimpleList,o=e.common.CustomClip,n=ui.QQLobbyStartViewUI,__extends(r,n),r.prototype.destroy=function(t){void 0===t&&(t=!0),this.list.removeSelf(),this.list=this.destroyElement(this.list),this.eft.removeSelf(),this.eft=this.destroyElement(this.eft),n.prototype.destroy.call(this,t)},r.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=this.centerY=0,this.list=s.create(t,100,100,2,1,15,0),this.list.pos(268,543),this.list.size(450,100),this.list.scale(1.2,1.2),this.addChildAt(this.list,4),this.eft=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),o.thisStop(this.eft),this.getBtn.addChild(this.eft),this.eft.pos(-5,-10)},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getHandler),this.onAutoGlobalEvt("QQ_REWARD_UPDATE",this,this.updateBtn)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this);var t=CommonUtil.formatItemData(e.config.QQPrivilegeRewardCfg.instance.configs[e.config.QQPrivilegeRewardCfg.instance.lobbyStartId][4]);this.list.datas=t,this.list.x=460-(120*t.length+30*(t.length-1)>>1),this.updateBtn()},r.prototype.updateBtn=function(t){if(!t||1==t){var e=i.QQModel.instance.qqLobbyStartReward||0;this.getBtn.visible=0===e,this.gotImg.visible=!this.getBtn.visible,0===e?o.thisPlay(this.eft):o.thisStop(this.eft)}},r.prototype.getHandler=function(){i.QQCtrl.instance.DrawHallReward(e.config.QQPrivilegeRewardCfg.instance.lobbyStartId,1)},a=r,i.QQLobbyStartPanel=a}(modules=modules||{}),function(i){var n,e,t,s,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}n=i.qq||(i.qq={}),t=i.common.SimpleList,s=i.bag.BaseItem,o=i.common.CustomClip,e=ui.QQLobbyDailyViewUI,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this.list.removeSelf(),this.list=this.destroyElement(this.list),this.eft.removeSelf(),this.eft=this.destroyElement(this.eft),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.list=t.create(s,100,100,2,1,15,0),this.list.pos(268,543),this.list.size(450,100),this.list.scale(1.2,1.2),this.addChildAt(this.list,4),this.eft=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),o.thisStop(this.eft),this.getBtn.addChild(this.eft),this.eft.pos(-5,-10)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getHandler),this.onAutoGlobalEvt("QQ_REWARD_UPDATE",this,this.updateBtn)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this);var t=CommonUtil.formatItemData(i.config.QQPrivilegeRewardCfg.instance.configs[i.config.QQPrivilegeRewardCfg.instance.lobbyDailyIds[0]][4]);this.list.datas=t,this.list.x=460-(120*t.length+30*(t.length-1)>>1),this.updateBtn()},r.prototype.updateBtn=function(t){if(!t||1==t){var e=0<=(n.QQModel.instance.qqLobbyDailyReward||[]).indexOf(i.config.QQPrivilegeRewardCfg.instance.lobbyDailyIds[0]);this.getBtn.visible=!e,this.gotImg.visible=!this.getBtn.visible,e?o.thisStop(this.eft):o.thisPlay(this.eft)}},r.prototype.getHandler=function(){n.QQCtrl.instance.DrawHallReward(i.config.QQPrivilegeRewardCfg.instance.lobbyDailyIds[0],2)},a=r,n.QQLobbyDailyPanel=a}(modules=modules||{}),function(t){var s,e,i,n,o;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.qq||(t.qq={}),i=t.common.SimpleList,n=t.config.QQPrivilegeRewardCfg,e=ui.QQLobbyLevelViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.list=i.create(s.QQItem,639,169,1,1,0,3),this.list.size(650,815),this.list.pos(35,301),this.addChild(this.list)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this.list=this.destroyElement(this.list),e.prototype.destroy.call(this,t)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("QQ_REWARD_UPDATE",this,this.updateView)},a.prototype.updateView=function(){this.list.datas=n.instance.lobbyLevelIds.sort(this.sort)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},a.prototype.sort=function(t,e){var i=(s.QQModel.instance.qqLobbyLevelReward||[]).indexOf(t),n=(s.QQModel.instance.qqLobbyLevelReward||[]).indexOf(e);return-1===i&&-1!==n?-1:-1!==i&&-1===n?1:t-e},o=a,s.QQLobbyLevelPanel=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.qq||(t.qq={}),i=ui.QQBlueViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.openBlueBtn,this,this.openBlueVipHandler),this.onAutoClick(this.openBlueYearBtn,this,this.openBlueVipHandler),this.onAutoClick(this.linkTxt,this,this.openBlueHandler)},s.prototype.openBlueHandler=function(){window.open("https://gamevip.qq.com/?ADTAG=VIP.WEB.JZXJZ","_blank")},s.prototype.openBlueVipHandler=function(){e.QQCtrl.instance.openVip()},n=s,e.QQBlueIntroPanel=n}(modules=modules||{}),function(t){var i,e,n,s,o,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}i=t.qq||(t.qq={}),n=t.config.QQPrivilegeRewardCfg,s=t.common.SimpleList,o=t.bag.BaseItem,a=t.common.CustomClip,e=ui.QQBlueStartViewUI,__extends(l,e),l.prototype.destroy=function(t){void 0===t&&(t=!0),this.list.removeSelf(),this.list=this.destroyElement(this.list),this.eft.removeSelf(),this.eft=this.destroyElement(this.eft),e.prototype.destroy.call(this,t)},l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.list=s.create(o,100,100,2,1,15,0),this.list.pos(70,543),this.list.size(450,100),this.list.scale(1.2,1.2),this.addChildAt(this.list,7),this.eft=a.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),a.thisStop(this.eft),this.getBtn.addChild(this.eft),this.eft.pos(-5,-10)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getHandler),this.onAutoClick(this.openBlueBtn,this,this.openBlueVipHandler),this.onAutoClick(this.openBlueYearBtn,this,this.openBlueVipHandler),this.onAutoClick(this.linkTxt,this,this.openBlueHandler),this.onAutoGlobalEvt("QQ_REWARD_UPDATE",this,this.updateBtn)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this);var t=CommonUtil.formatItemData(n.instance.configs[n.instance.blueStartId][4]);this.list.datas=t,this.list.x=260-(120*t.length+30*(t.length-1)>>1),this.updateBtn()},l.prototype.updateBtn=function(t){if(!t||2==t){var e=i.QQModel.instance.qqBlueStartReward||0;this.getBtn.visible=0===e,this.gotImg.visible=!this.getBtn.visible,0===e&&i.QQModel.instance.isBlueVip?a.thisPlay(this.eft):a.thisStop(this.eft)}},l.prototype.getHandler=function(){i.QQCtrl.instance.DrawBlueVipReward(n.instance.blueStartId,1)},l.prototype.openBlueHandler=function(){window.open("https://gamevip.qq.com/?ADTAG=VIP.WEB.JZXJZ","_blank")},l.prototype.openBlueVipHandler=function(){i.QQCtrl.instance.openVip()},r=l,i.QQBlueStartPanel=r}(modules=modules||{}),function(t){var s,e,i,n,o;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.qq||(t.qq={}),i=t.common.SimpleList,n=t.config.QQPrivilegeRewardCfg,e=ui.QQBlueDailyViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.list=i.create(s.QQItem,639,169,1,1,0,3),this.list.size(650,729),this.list.pos(35,301),this.addChild(this.list)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.openBlueBtn,this,this.openBlueVipHandler),this.onAutoClick(this.openBlueYearBtn,this,this.openBlueVipHandler),this.onAutoClick(this.linkTxt,this,this.openBlueHandler),this.onAutoGlobalEvt("QQ_REWARD_UPDATE",this,this.updateView)},a.prototype.updateView=function(){this.list.datas=n.instance.blueDailyIds.sort(this.sort)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this.list=this.destroyElement(this.list),e.prototype.destroy.call(this,t)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},a.prototype.openBlueHandler=function(){window.open("https://gamevip.qq.com/?ADTAG=VIP.WEB.JZXJZ","_blank")},a.prototype.openBlueVipHandler=function(){s.QQCtrl.instance.openVip()},a.prototype.sort=function(t,e){var i=(s.QQModel.instance.qqBlueDailyReward||[]).indexOf(t),n=(s.QQModel.instance.qqBlueDailyReward||[]).indexOf(e);return-1===i&&-1!==n?-1:-1!==i&&-1===n?1:t-e},o=a,s.QQBlueDailyPanel=o}(modules=modules||{}),function(t){var s,e,i,n,o;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.qq||(t.qq={}),i=t.common.SimpleList,n=t.config.QQPrivilegeRewardCfg,e=ui.QQBlueLevelViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.list=i.create(s.QQItem,639,169,1,1,0,3),this.list.size(650,729),this.list.pos(35,301),this.addChild(this.list)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.openBlueBtn,this,this.openBlueVipHandler),this.onAutoClick(this.openBlueYearBtn,this,this.openBlueVipHandler),this.onAutoClick(this.linkTxt,this,this.openBlueHandler),this.onAutoGlobalEvt("QQ_REWARD_UPDATE",this,this.updateView)},a.prototype.updateView=function(){this.list.datas=n.instance.blueLevelIds.sort(this.sort)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this.list=this.destroyElement(this.list),e.prototype.destroy.call(this,t)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},a.prototype.openBlueHandler=function(){window.open("https://gamevip.qq.com/?ADTAG=VIP.WEB.JZXJZ","_blank")},a.prototype.openBlueVipHandler=function(){s.QQCtrl.instance.openVip()},a.prototype.sort=function(t,e){var i=(s.QQModel.instance.qqBlueLevelReward||[]).indexOf(t),n=(s.QQModel.instance.qqBlueLevelReward||[]).indexOf(e);return-1===i&&-1!==n?-1:-1!==i&&-1===n?1:t-e},o=a,s.QQBlueLevelPanel=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.susan_slade||(t.susan_slade={}),n=t.common.CustomList,s=t.common.CommonUtil,i=ui.SusanSladeViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.width=640,this._list.height=810,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=300,this._list.itemRender=e.SusanSladeItem,this.addChildAt(this._list,3)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("SUSANSLADE_UPDATA_VIEW",this,this.updateView)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},a.prototype.initView=function(){this.setActivitiTime(),this.updateView()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.tipsHTML.innerHTML="<span style='color:#50ff28;font-size:22px;font-family:SimHei;'></span><span style='color:#ffffff;font-size:22px;font-family:SimHei;'>活动期间，累计充值达到指定金额，即可领取豪礼。</span>",this.initView()},a.prototype.updateView=function(){var t=e.SusanSladeModel.instance.rewardList;this._list.datas=t},a.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),e.SusanSladeModel.instance.restTm>=GlobalData.serverTime?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},a.prototype.activityHandler=function(){var t=e.SusanSladeModel.instance.restTm;this.activityText.text=s.timeStampDDHHMMToHHMMSS(t),e.SusanSladeModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},o=a,e.SusanSladePanel=o}(modules=modules||{}),function(_){var m,e,t,n,v,a,i;function s(){return e.call(this)||this}m=_.xianDan||(_.xianDan={}),t=ui.XianDanViewUI,n=_.common.BtnGroup,v=_.config.XianDanCfg,a=_.bag.BagUtil,e=t,__extends(s,e),s.prototype.initialize=function(){var i=this;e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnClip=CommonUtil.creatEff(this.btn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnGroup=new n,this._btnGroup.setBtns(this.item_0,this.item_1,this.item_2,this.item_3,this.item_4,this.item_5,this.item_6,this.item_7),this._btnGroup.btns.forEach(function(t,e){t.iconImg.skin="xian_dan/btn_xdxt_"+e+".png",console.log(i._btnGroup.btns[6]),t.id=v.instance.sIds[e]}),this._list=_.common.CustomList.create("v",40,468,640,475,m.XianDanItem,3),this.addChild(this._list)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoClick(this.addBtn,this,this.addHandler),this.onAutoGlobalEvt("XIANDAN_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("XIANDAN_INFO_UPDATE",this,this.changeHandler),this.onAutoGlobalEvt("XIANDAN_ITEMS_UPDATE",this,this.changeHandler),this.onAutoGlobalEvt("MAGIC_POSITION_UPDATE",this,this.changeHandler),this.onAutoGlobalEvt("VIP_UPDATE",this,this.changeHandler)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this);for(var t=0;t<this._btnGroup.btns.length;t++){if(this._btnGroup.btns[t].isSelectedIndex){this._btnGroup.selectedIndex=t;break}this._btnGroup.selectedIndex=0}this.updateView()},s.prototype.updateView=function(){for(var t=0,e=0,i=v.instance.ids;e<i.length;e++){var n=i[e];t+=m.XianDanModel.instance.getUseCountById(n)*v.instance.getCfgById(n)[3]}this.fightMsz.value=t.toString()},s.prototype.changeHandler=function(){var t=this._btnGroup.selectedIndex,e=v.instance.sIds[t],i=v.instance.getIdsBySId(e);this._list.datas=i;var n=this._btnGroup.selectedBtn;n.frameImg.visible=!0;var s=this._btnGroup.oldSelectedBtn;s&&s!=n&&(s.frameImg.visible=!1);for(var o=0,a=0,r=0,l=i;r<l.length;r++){var h=l[r];o+=m.XianDanModel.instance.getLimit(h),a+=y=m.XianDanModel.instance.getUseCountById(h)}this.proTxt.text=_.common.AttrUtil.formatFloatNum(a/o)+"%",this._isEnough=a/o==1;var c=m.XianDanModel.instance.getUseCountBySId(e),p=m.XianDanModel.instance.getLimitByVipLv();if(this.countTxt.text=c+"/"+p,this.countTxt.color=c<p?"#168a17":"#ff3e3e",this.desTxt.text="今日"+m.XianDanUtil.names[t]+"丹服用个数:",p<=c)this.stopEff();else{for(var u=0,d=i;u<d.length;u++){h=d[u];var y=m.XianDanModel.instance.getItemCountById(h),g=m.XianDanModel.instance.getUseCountById(h),f=m.XianDanModel.instance.getLimit(h);if(0<y&&g<f)return void this.playEff()}this.stopEff()}},s.prototype.playEff=function(){this._btnClip.play(),this._btnClip.visible=!0},s.prototype.stopEff=function(){this._btnClip.stop(),this._btnClip.visible=!1},s.prototype.btnHandler=function(){for(var t=this._btnGroup.selectedIndex,e=v.instance.sIds[t],i=v.instance.getIdsBySId(e),n=!1,s=0;s<i.length;s++)0<m.XianDanModel.instance.getItemCountById(i[s])&&(n=!0);if(1==this._isEnough)CommonUtil.noticeError(41902);else if(m.XianDanModel.instance.getUseCountBySId(e)==m.XianDanModel.instance.getLimitByVipLv())CommonUtil.noticeError(41901);else if(n)m.XianDanCtrl.instance.oneKeyUseXianDan(e);else{var o=void 0;switch(t){case 0:o=13740031;break;case 1:o=13740032;break;case 2:o=13740033;break;case 3:o=13740034;break;case 4:o=13740035;break;case 5:o=13740036;break;case 6:o=13740037;break;case 7:o=13740038;break;default:o=13740031}a.openLackPropAlert(o,1)}},s.prototype.addHandler=function(){WindowManager.instance.open(59,13)},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._btnGroup=this.destroyElement(this._btnGroup),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},i=s,m.XianDanPanel=i}(modules=modules||{}),function(t){var p,i,s,e,n,o,a,r,l,u,d,h;function c(){return i.call(this)||this}p=t.goldBody||(t.goldBody={}),s=Laya.Event,e=ui.GoldBodyViewUI,n=t.common.CommonUtil,o=t.common.CustomList,a=t.common.CustomClip,r=t.bag.BagUtil,l=t.player.PlayerModel,u=t.config.AttrItemCfg,d=t.common.AttrUtil,i=e,__extends(c,i),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._tween&&(this._tween.stop(),this._tween=null),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip);for(var e=0;e<10;e++)this._trainSuccessClips[e]&&(this._trainSuccessClips[e].off(s.COMPLETE,this,this.completeHandler),this._trainSuccessClips[e].removeSelf(),this._trainSuccessClips[e].destroy(),this._trainSuccessClips[e]=null);this._unbeatenBtnClip=this.destroyElement(this._unbeatenBtnClip),i.prototype.destroy.call(this,t)},c.prototype.initialize=function(){i.prototype.initialize.call(this),this._lastSecond=-1,this.soulLevel=0,this.centerX=0,this.centerY=0,this.bottom=0,this._showGoldBodys=p.GoldBodyModel.refineIds,this._first=-1,this._second=-1,this._isLevelUp=!1,this._isNextLevel=!1,this._nameTxts=[this.attrName0,this.attrName1,this.attrName2],this._valueTxts=[this.attrValue0,this.attrValue1,this.attrValue2],this._upImgs=[this.attrUpImg0,this.attrUpImg1,this.attrUpImg2],this._upTxts=[this.attrUpTxt0,this.attrUpTxt1,this.attrUpTxt2],this._runes=[this.rune0,this.rune1,this.rune2,this.rune3,this.rune4,this.rune5,this.rune6,this.rune7,this.rune8,this.rune9],this._trainSuccessClips=[],this._list=new o,this._list.scrollDir=1,this._list.width=192,this._list.height=720,this._list.vCount=4,this._list.hCount=1,this._list.itemRender=p.GoldBodyItem,this._list.x=32,this._list.y=171,this.addChild(this._list),this._unbeatenBtnClip=a.createAndPlay("assets/effect/gold_body.atlas","gold_body",8,!1,!0,11),this.unbeatenBtn.addChild(this._unbeatenBtnClip),this._unbeatenBtnClip.pos(-73,-73),this._unbeatenBtnClip.visible=!1,this.createEffect(),this.initTrainSuccess(),this.updateGoldBodyInfo(),this.regGuideSpr(95,this.trainingBtn)},c.prototype.createEffect=function(){this._btnClip=n.creatEff(this.trainingBtn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(1,1,!0),this._btnClip.play(),this._btnClip.visible=!1},c.prototype.initTrainSuccess=function(){for(var t=0;t<10;t++)this._trainSuccessClips[t]=new a,this._trainSuccessClips[t].skin="assets/effect/activate.atlas",this._trainSuccessClips[t].frameUrls=["activate/0.png","activate/1.png","activate/2.png","activate/3.png"],this._trainSuccessClips[t].scale(.7,.7),this._trainSuccessClips[t].loop=!1,this._trainSuccessClips[t].visible=!1},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.unbeatenBtn,this,this.unbeatenHandler),this.onAutoClick(this.tipsBtn,this,this.tipsHandler),this.onAutoClick(this.trainingBtn,this,this.trainingHandler),this._list.on(s.SELECT,this,this.selectHandler),this.onAutoClick(this.pageupBtn,this,this.pageUpHandler),this.onAutoClick(this.pagedownBtn,this,this.pageDownHandler),this.onAutoGlobalEvt("GOLD_BODY_UPDATE",this,this.updateSoulInfo).onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.trainingRedPoint).onAutoGlobalEvt("PLAYER_BASE_ATTR_UPDATE",this,this.trainingRedPoint)},c.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._list.datas=this._showGoldBodys,this._list.selectedIndex=this._selectedId=0,this.updateBtnSeclect(),this.updateOneSoulInfo(!0),this.updateGoldBodyInfo()},c.prototype.updateSoulInfo=function(){this.updateOneSoulInfo(!1),this.updateGoldBodyInfo()},c.prototype.updateBtnSeclect=function(){p.GoldBodyModel.instance.searchIndex()&&(this._list.datas=this._showGoldBodys,this._list.selectedIndex=p.GoldBodyModel.instance.selectIndex,this._list.selectedIndex<=3?this._list.scrollToIndex(0):this._list.scrollToIndex(4),this._selectedId=p.GoldBodyModel.instance.selectIndex)},c.prototype.updateOneSoulInfo=function(t){var e=p.GoldBodyModel.instance._refine[0];this.soulLevel=0;var i,n=1;if(e&&0<e.length)for(var s=0;s<e.length;s++)if(this._selectedId==e[s][0]){this.soulLevel=e[s][1];break}this.soulLevel<=10?i=this.soulLevel:0==(i=this.soulLevel%10)?(n=Math.floor(this.soulLevel/10),i=10):n=Math.floor(this.soulLevel/10)+1,this.bodyText.text=n+"阶"+i+"重",!this._selectedId&&0!==this._selectedId||(this.bodyImg.skin="assets/others/gold_body/"+(this._selectedId+1)+".jpg"),this._first<0||t?(this._first=n,this._second=i):this._first!=n?(this._isNextLevel=!0,this._isLevelUp=!1,this._first=n,this._second=i):this._second!=i&&(this._first=n,this._second=i,this._isLevelUp=!0,this._isNextLevel=!1);var o=p.GoldBodyModel.instance.getAttrByIdAndLevel(this._selectedId,this.soulLevel),a=p.GoldBodyModel.instance.getAttrByIdAndLevel(this._selectedId,this.soulLevel+1);if(this.setAttrs(o,a),this.powerNum.value=o[4].toString(),this.updateRunes(i),this.goldbodyName.skin="assets/icon/ui/gold_body/msz_jinshen_"+(this._selectedId+2)+".png",a)if(this.costNum.visible=!0,this.costItem.visible=!0,this.costNum.text=o[2].toString(),p.GoldBodyModel.instance.checkCanTrainingById(this._selectedId)?this.costNum.color="#905a20":this.costNum.color="#e5070b",this.maxShow.visible=!1,p.GoldBodyModel.instance.checkIsFitCondition(this._selectedId))this.conditionShow.visible=!1,this.trainingBtn.visible=!0,p.GoldBodyModel.instance.checkCanTrainingById(this._selectedId)?(this._btnClip.play(),this._btnClip.visible=!0):(this._btnClip.stop(),this._btnClip.visible=!1);else{var r=p.GoldBodyModel.instance.getNowLvById(this._selectedId),l=p.GoldBodyModel.instance.getAttrByIdAndLevel(this._selectedId,r)[3];if(0!=l){var h=Math.floor(l/100),c=l%100;this.conditionShow.text=h+"转"+c+"重开启",this.conditionShow.visible=!0}else this.conditionShow.visible=!1;this.trainingBtn.visible=!1,this._btnClip.stop(),this._btnClip.visible=!1}else this.trainingBtn.visible=!1,this._btnClip.stop(),this._btnClip.visible=!1,this.costItem.visible=!1,this.costNum.visible=!1,this.maxShow.visible=!0,this.conditionShow.visible=!1},c.prototype.updateRunes=function(t){if(this._isLevelUp&&!this._isNextLevel)this.playUpeffectClip(this._lastSecond+1),this._isLevelUp=!1;else if(this._isNextLevel&&!this._isLevelUp)this.playNextUpeffectClip(this._lastSecond+1),this._isNextLevel=!1;else for(var e=this._runes.length,i=0;i<e;i++)this._runes[i].skin=i<t?"goldbody/icon_jinshen_"+(i+1)+"_1.png":"goldbody/icon_jinshen_"+(i+1)+"_0.png"},c.prototype.playNextUpeffectClip=function(t){var e=this;if(10<t){for(var i=this._runes.length,n=0;n<i;n++)0==n&&(this._runes[n].skin="goldbody/icon_jinshen_"+(n+1)+"_1.png"),this._runes[n].skin="goldbody/icon_jinshen_"+(n+1)+"_0.png";Laya.timer.once(50,this,function(){e._runes[0].skin="goldbody/icon_jinshen_1_1.png",e.bodyText.scaleX=e.bodyText.scaleY=1,TweenJS.create(e.bodyText).yoyo(!0).to({scaleX:1.2,scaleY:1.2},250).start(),e.completeHandler(0),e._runes[0].addChild(e._trainSuccessClips[0]),e.playSuccessClip(0),e._trainSuccessClips[0].on(s.COMPLETE,e,e.completeHandler,[0]),e.updateOneSoulInfo(!0)})}else this.playTrainingClip(t),t<=10&&Laya.timer.once(50,this,this.playNextUpeffectClip,[t+1])},c.prototype.playUpeffectClip=function(t){this.playTrainingClip(t),t<this._second&&Laya.timer.once(50,this,this.playUpeffectClip,[t+1])},c.prototype.playTrainingClip=function(t){this._runes[t-1].skin="goldbody/icon_jinshen_"+t+"_1.png",this.bodyText.scaleX=this.bodyText.scaleY=1,TweenJS.create(this.bodyText).yoyo(!0).to({scaleX:1.2,scaleY:1.2},250).start(),this.completeHandler(t-1),this._runes[t-1].addChild(this._trainSuccessClips[t-1]),this.playSuccessClip(t-1),this._trainSuccessClips[t-1].on(s.COMPLETE,this,this.completeHandler,[t-1])},c.prototype.playSuccessClip=function(t){this._trainSuccessClips[t].play(),this._trainSuccessClips[t].pos(-62,-62,!0),this._trainSuccessClips[t].visible=!0},c.prototype.completeHandler=function(t){this._trainSuccessClips[t].stop(),this._trainSuccessClips[t].visible=!1,this._trainSuccessClips[t].off(s.COMPLETE,this,this.completeHandler)},c.prototype.updateGoldBodyInfo=function(){var t=this._list.scrollPos;this._list.datas=this._showGoldBodys,this._list.scroll(t),p.GoldBodyModel.instance.checkRiseCanTraining()?(this.riseRedImg.visible=!0,this._unbeatenBtnClip.isPlaying||a.thisPlay(this._unbeatenBtnClip),this._unbeatenBtnClip.visible=!0):(this.riseRedImg.visible=!1,this._unbeatenBtnClip.visible=!1,a.thisStop(this._unbeatenBtnClip))},c.prototype.setAttrs=function(t,e){for(var i=0,n=e?e[5]:t[5],s=t[5],o=e?e[5]:null,a=0,r=.5*n.length;a<r;a++){var l=u.instance.getCfgById(n[2*a]);this._nameTxts[i].visible=this._valueTxts[i].visible=this._upImgs[i].visible=this._upTxts[i].visible=!0,this._nameTxts[i].text=l[1]+":";var h=s[2*a+1]||0;if(this._valueTxts[i].text=l[2]?d.formatFloatNum(h)+"%":Math.round(h)+"",o){this._upImgs[i].visible=this._upTxts[i].visible=!0;var c=o[2*a+1]-h;this._upTxts[i].text=l[2]?d.formatFloatNum(c)+"%":Math.round(c)+""}else this._upImgs[i].visible=this._upTxts[i].visible=!1;i++}for(a=i,r=this._nameTxts.length;a<r;a++)this._nameTxts[a].visible=this._valueTxts[a].visible=this._upImgs[a].visible=this._upTxts[a].visible=!1},c.prototype.trainingRedPoint=function(){var t=p.GoldBodyModel.instance.checkCanTrainingById(this._selectedId);if(p.GoldBodyModel.instance.checkIsFitCondition(this._selectedId))this.conditionShow.visible=!1,t?(this._btnClip.play(),this._btnClip.visible=!0):(this._btnClip.stop(),this._btnClip.visible=!1);else{var e=l.instance.playerBaseAttr,i=e[2],n=e[3],s=p.GoldBodyModel.instance.getNowLvById(this._selectedId),o=p.GoldBodyModel.instance.getAttrByIdAndLevel(this._selectedId,s)[3],a=Math.floor(o/100),r=o%100;a<i?this.conditionShow.visible=!1:i==a&&r<=n?this.conditionShow.visible=!1:(this.conditionShow.visible=!0,this.conditionShow.text=a+"转"+r+"重开启"),this._btnClip.stop()}this.costNum.color=t?"#905a20":"#e5070b"},c.prototype.unbeatenHandler=function(){WindowManager.instance.open(36)},c.prototype.tipsHandler=function(){n.alertHelp(20037)},c.prototype.trainingHandler=function(){this._lastSecond=this._second,p.GoldBodyModel.instance.checkCanTrainingById(this._selectedId)?p.GoldBodyCtrl.instance.autoRefineSoul(this._selectedId):r.openLackPropAlert(90330001,1)},c.prototype.selectHandler=function(){if(p.GoldBodyModel.instance.checkOpenById(this._list.selectedIndex,!0)){this._selectedId=this._list.selectedIndex;for(var t=0;t<10;t++)this._trainSuccessClips[t]&&this.completeHandler(t);Laya.timer.clear(this,this.playNextUpeffectClip),Laya.timer.clear(this,this.playUpeffectClip),this.updateOneSoulInfo(!0)}else this._list.selectedIndex=this._selectedId},c.prototype.pageUpHandler=function(){this._list.scroll(-720)},c.prototype.pageDownHandler=function(){this._list.scroll(720)},c.prototype.close=function(){for(var t=0;t<10;t++)this._trainSuccessClips[t]&&this.completeHandler(t);Laya.timer.clear(this,this.playNextUpeffectClip),Laya.timer.clear(this,this.playUpeffectClip),i.prototype.close.call(this)},h=c,p.GoldBodyPanel=h}(modules=modules||{}),function(t){var u,e,i,n,s,o,d,y,a;function r(){return e.call(this)||this}u=t.goldBody||(t.goldBody={}),i=ui.GoldBodyUnbeatenAlertUI,n=Laya.Event,s=t.common.BtnGroup,o=t.common.CustomClip,d=t.config.AttrItemCfg,y=t.common.AttrUtil,e=i,__extends(r,e),r.prototype.destroy=function(){this._tabGroup&&(this._tabGroup.destroy(),this._tabGroup=null),this._btnClip&&(this._btnClip.removeSelf(),this._btnClip.destroy(),this._btnClip=null),e.prototype.destroy.call(this)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this._nowNameTxts=[this.nowfirName,this.nowsecName],this._nowValueTxts=[this.nowfirNum,this.nowsecNum],this._nextNameTxts=[this.nextfirName,this.nextsecName],this._nextValueTxts=[this.nextfirNum,this.nextsecNum],this._totalAttrNameTxts=[this.attrName0,this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5,this.attrName6,this.attrName7,this.attrName8,this.attrName9,this.attrName10,this.attrName11],this._totalAttrValueTxts=[this.attrValue0,this.attrValue1,this.attrValue2,this.attrValue3,this.attrValue4,this.attrValue5,this.attrValue6,this.attrValue7,this.attrValue8,this.attrValue9,this.attrValue10,this.attrValue11],this._tabGroup=new s,this._tabGroup.setBtns(this.unbeatenBtn,this.qualityBtn),this._btnClip=o.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this.unbeatenDetail,143,272)},r.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.unbeatenHandler()},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.trainingBtn.on(n.CLICK,this,this.trainingHandler),this._tabGroup.on(n.CHANGE,this,this.changeTabHandler),this._tabGroup.selectedIndex=0,GlobalData.dispatcher.on("GOLD_BODY_UPDATE",this,this.unbeatenUpdate)},r.prototype.offEvt=function(){e.prototype.offEvt.call(this),this.trainingBtn.off(n.CLICK,this,this.trainingHandler),this._tabGroup.off(n.CHANGE,this,this.changeTabHandler),GlobalData.dispatcher.off("GOLD_BODY_UPDATE",this,this.unbeatenUpdate)},r.prototype.changeTabHandler=function(){switch(this._tabGroup.selectedIndex){case 0:this.unbeatenHandler();break;case 1:this.totalinfoHandler()}},r.prototype.trainingHandler=function(){u.GoldBodyCtrl.instance.riseSoul()},r.prototype.unbeatenHandler=function(){this.unbeatenDetail.visible=!0,this.textbg.height=284,this.textbg.y=169,this.trainingBtn.visible=!0,this.totalInfo.visible=!1,this.unbeatenUpdate()},r.prototype.unbeatenUpdate=function(){u.GoldBodyModel.instance.checkRiseCanTraining()?(this.riseRedImg.visible=!0,this._btnClip.play(),this._btnClip.visible=!0):(this.riseRedImg.visible=!1,this._btnClip.stop(),this._btnClip.visible=!1);var t=u.GoldBodyModel.instance._rise,e=t[0],i=t[1];this.titleText.text="不败金身·"+e+"重";var n=u.GoldBodyModel.instance.getAttrByLevel(e);if(this.powerNum.value=n[3].toString(),this.setAttrs(0,n),0==e)this.nowText.visible=!1,this.nowhasText.visible=!1,this.nowfirName.text="无加成",this.nowfirName.visible=!0;else{var s=u.GoldBodyModel.instance.getAttrByLevel(e-1);this.nowText.text=s[1]+"种金身达到"+Math.ceil(s[2]/10)+"阶",this.nowhasText.visible=!0,this.nowText.visible=!0}if(u.GoldBodyModel.instance.checkIsRiseMax(e))this.maxCSText.visible=!0,this.nextText.visible=this.trainingBtn.visible=this.activeTxt.visible=this.nextInfo.visible=this.nexthasText.visible=!1;else{this.maxCSText.visible=!1;var o=u.GoldBodyModel.instance.getAttrByLevel(e+1),a=n[2],r=n[1];this.nextText.text=r+"种金身达到"+Math.ceil(a/10)+"阶",this.nextText.color="#4c5e8a",this.setAttrs(1,o);var l=this.getNumByLevel(a);this.trainingBtn.visible=this.nextInfo.visible=this.nexthasText.visible=!0,this.nexthasText.text="("+l+"/"+r+")",i?(this.activeTxt.visible=!0,this.nextInfo.y=196,this.nexthasText.color="#00ad35",this.trainingBtn.disabled=!1):(this.activeTxt.visible=!1,this.nextInfo.y=158,this.nexthasText.color="#e5070b",this.trainingBtn.disabled=!0)}},r.prototype.getNumByLevel=function(t){var e=u.GoldBodyModel.instance._refine[0],i=0;if(0<e.length){for(var n=0;n<e.length;n++)e[n][1]>=t&&i++;return i}return 0},r.prototype.setAttrs=function(t,e){var i,n;n=0==t?(i=this._nowNameTxts,this._nowValueTxts):(i=this._nextNameTxts,this._nextValueTxts);for(var s=0,o=e[4],a=0;a<.5*o.length;a++){var r=d.instance.getCfgById(o[2*a]),l=o[2*a+1];i[s].visible=n[s].visible=!0,i[s].text=r[1],n[s].text=r[2]?"+"+y.formatFloatNum(l)+"%":"+"+Math.round(l),n[s].x=i[s].x+i[s].textWidth+8,s++}for(a=s;a<i.length;a++)i[a].visible=n[a].visible=!1},r.prototype.totalinfoHandler=function(){this.riseRedImg.visible=u.GoldBodyModel.instance.checkRiseCanTraining(),this.titleText.text="金身总属性",this.unbeatenDetail.visible=!1,this.textbg.height=253,this.textbg.y=222,this.trainingBtn.visible=!1,this.totalInfo.visible=!0;var t=u.GoldBodyModel.instance._rise,e=u.GoldBodyModel.instance.getAttrByLevel(t[0]),i=u.GoldBodyModel.instance._refine[1]+e[3];i=Math.round(i),this.powerNum.value=i.toString();for(var n=0;n<this._totalAttrNameTxts.length;n++)this._totalAttrNameTxts[n].visible=this._totalAttrValueTxts[n].visible=!1;for(var s=u.GoldBodyModel.instance._attr,o=u.GoldBodyUtil.soulTotalAttrIndices,a=0,r=o.length;a<r;a++){var l=y.getAttrByType(o[a],s),h=d.instance.getCfgById(o[a]),c=l?l[1]:0,p=h[2]?y.formatFloatNum(c)+"%":Math.round(c)+"";this._totalAttrNameTxts[a].text=h[1]+"：",this._totalAttrValueTxts[a].text=" "+p,61===o[a]||62===o[a]?this._totalAttrNameTxts[a].visible=this._totalAttrValueTxts[a].visible=0!==c:this._totalAttrNameTxts[a].visible=this._totalAttrValueTxts[a].visible=!0,this._totalAttrNameTxts[a].width=this._totalAttrNameTxts[a].textWidth}for(n=0;n<this._totalAttrNameTxts.length;n++)this._totalAttrValueTxts[n].x=this._totalAttrNameTxts[n].x+this._totalAttrNameTxts[n].width+7},a=r,u.GoldBodyUnbeatenAlert=a}(modules=modules||{}),function(t){var s,e,i,n,o,a;function r(){var t=e.call(this)||this;return t.blueIcon=new i("qq/clip_blue_vip_icon1.png"),t.blueIcon.clipWidth=60,t.blueIcon.clipX=9,t.blueIcon.pos(0,0),t.addChild(t.blueIcon),t.yearIcon=new o("qq/img_nf_blue_icon.png"),t.yearIcon.pos(0,0),t.addChild(t.yearIcon),t.width=40,t.height=40,t}s=t.qq||(t.qq={}),i=Laya.Clip,n=Laya.Box,o=Laya.Image,e=n,__extends(r,e),r.prototype.update=function(t,e,i,n){this.blueIcon.visible=t,this.yearIcon.visible=e,this.blueIcon.skin=i?"qq/clip_blue_vip_icon2.png":"qq/clip_blue_vip_icon1.png",this.blueIcon.index=n,this.yearIcon.visible?this.blueIcon.x=-44:this.blueIcon.x=0},r.prototype.updateVIP=function(t){var e=0<Math.floor(.01*t),i=2===Math.floor(.01*t)||4===Math.floor(.01*t),n=3===Math.floor(.01*t)||4===Math.floor(.01*t),s=t%100;this.update(e,i,n,s)},r.prototype.updateSelf=function(){var t=s.QQModel.instance.isBlueVip,e=s.QQModel.instance.isYearBlueVip,i=s.QQModel.instance.isSuperBlueVip,n=s.QQModel.instance.blueVipLv;this.update(t,e,i,n)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width*this.scaleX},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height*this.scaleY},set:function(t){this._height=t},enumerable:!0,configurable:!0}),r.prototype.destroy=function(t){this.blueIcon.destroy(),this.blueIcon=null,this.yearIcon.destroy(),this.yearIcon=null,e.prototype.destroy.call(this,!0)},a=r,s.QQBlueIcon=a}(modules=modules||{}),function(t){var h,e,i,u,n,s,a,o,r,l,c,p,d,y,g,f,_,m,v;function b(){return e.call(this)||this}h=t.rankingList||(t.rankingList={}),i=t.faction.FactionCtrl,u=t.faction.FactionModel,n=laya.events.Event,s=t.common.AvatarClip,a=t.config.AmuletRiseCfg,o=t.config.ExteriorCfg,r=t.config.LilianRiseCfg,l=t.config.XianweiRiseCfg,c=t.player.PlayerModel,p=ui.RankingListViewUI,d=t.config.BlendCfg,y=t.config.PetMagicShowCfg,g=t.config.RideMagicShowCfg,f=t.common.CommonUtil,_=t.common.SimpleList,m=t.qq.QQBlueIcon,e=p,__extends(b,e),b.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._rankList=this.destroyElement(this._rankList),this._avatar=this.destroyElement(this._avatar),this._factionList=this.destroyElement(this._factionList),this.observationItem=this.destroyElement(this.observationItem),this._tweenAvatar&&(this._tweenAvatar.stop(),this._tweenAvatar=null),e.prototype.destroy.call(this,t)},b.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=_.create(h.RankingListBtn,151,62),this._list.width=180,this._list.height=530,this._list.selectedIndex=0,this._list.datas=[1,2,65536,4,8,16,32,16384,32768,64,128,256,512],this._list.x=30,this._list.y=618,this.addChild(this._list),this._avatar=s.create(1024,1024,768),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this._tweenAvatar=TweenJS.create(this._avatar),this.addChildAt(this._avatar,2),this._rankList=_.create(h.PlayerRankingItem,490,108),this._rankList.width=490,this._rankList.height=432,this._rankList.pos(191,635),this.addChild(this._rankList)},b.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._list,n.SELECT,this,this.selectTypeHandler),this.onAutoClick(this.rulerBtn,this,this.showRuler),this.onAutoClick(this.lookBtn,this,this.lookHanlder),this.onAutoGlobalEvt("FACTION_RANK_LIST",this,this.updateFactionShow),this.onAutoGlobalEvt("GET_ACTOR_RANK_DATA_REPLY",this,this.updateDataPlane),this.onAutoGlobalEvt("GET_ACTOR_RANK_SHOW_REPLY",this,this.updateshowplane),this.onAutoGlobalEvt("RANK_UPDATE",this,this.updateRank)},b.prototype.close=function(){this.stopAvatar(),e.prototype.close.call(this),Laya.timer.clear(this,this.showAvatar)},b.prototype.onOpened=function(){e.prototype.onOpened.call(this),i.instance.getFactionRankList(),65536==this._skipType?this._list.selectedData=65536:this._list.selectedIndex=0},b.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._skipType=t},b.prototype.lookHanlder=function(){var t=h.PlayerRankingModel.instance.getRanksByType(this._list.selectedData);t[0]&&(ChatCtrl.instance.getChatDetailedInfo([c.instance.actorId,t[0][0],c.instance.serverPgId]),WindowManager.instance.open(154,[t[0][3],t[0][6],t[0][13]]))},b.prototype.updateFactionShow=function(){if(65536==this._list.selectedData){this._avatar.visible=this.showOthers=!1;var t=u.instance.rankFirst;if(this.myranktxt.text="按仙盟战力进行排名",this.lookBtn.visible=!1,t){var e=u.instance.ranklist.concat();this.leaderTxt.text="盟主:"+t[0];var i=f.bigNumToString(e[0][2]);this.factionFightTxt.text=i,this.firstplayernametxt.text=e[0][0]+" Lv."+e[0][1],e.shift(),this.creatFactionList();var n=this.firstplayernametxt.textWidth,s=(this.width-n)/2;this.firstplayernametxt.x=s,this.firstplayernametxt.visible=!0;var o=new Array;for(p=2;p<=5;p++)o.push([65536,p]);this._factionList.datas=o;var a=t[3],r=t[4],l=t[5],h=t[6];this._avatar.pos(368,497),this._avatar.avatarRotationY=180,this._avatar.avatarRotationX=0,this._avatar.avatarScale=1,this._avatar.avatarY=0,this._avatar.avatarX=0,this._avatar.reset(h,a,l,r),this.observationItem.data=[[this._avatar,0]],this.showAvatar()}else{this.creatFactionList(),this.showFaction=!1,this.vipShowItem.vipBox.visible=!1,this._factionList.visible=!0,this.firstplayernametxt.text="虚位以待···";for(var c=new Array,p=2;p<=5;p++)c.push([65536,p]);this._factionList.datas=c}}},b.prototype.creatFactionList=function(){this._factionList||(this._factionList=_.create(t.faction.FactionRankListItem,498,108),this._factionList.width=497,this._factionList.height=432,this._factionList.pos(191,635),this.addChild(this._factionList))},b.prototype.selectTypeHandler=function(){var t=h.PlayerRankingModel.instance.selectedRankType=this._list.selectedData;this.showOthers=!0,this._avatar.visible=!1,Laya.timer.clear(this,this.showAvatar),65536!=t?h.PlayerRankingCtrl.instance.getRank(t):(this.updateFactionShow(),this.lookBtn.visible=!1)},Object.defineProperty(b.prototype,"showFaction",{set:function(t){this.leaderBox.visible=this.factionFightBox.visible=t,this._factionList&&(this._factionList.visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"showOthers",{set:function(t){this.nameimage.visible=this.numBox.visible=this.tupleFontClip.visible=this.amulet.visible=this.levelImg.visible=this.leveltxt.visible=this.vipShowItem.vipBox.visible=this.chongImg.visible=this.nameBox.visible=this.fightBgImg.visible=this._rankList.visible=t,this.showFaction=!t},enumerable:!0,configurable:!0}),b.prototype.showRuler=function(){f.alertHelp(20019)},b.prototype.updateRank=function(){var t=this._list.selectedData,e=h.PlayerRankingModel.instance.getRanksByType(t);if(this.lookBtn.visible=!1,e){this.lookBtn.visible=!!e[0];for(var i=d.instance.getCfgById(401)[1][0],n=new Array,s=2;s<=i;s++)n.push([t,s]);if(this._rankList.datas=n,this.chongImg.visible=this.tupleFontClip.visible=this.nameimage.visible=this.levelImg.visible=this.leveltxt.visible=!1,this.myranktxt.text="我的排名:未上榜",0===e.length)return this.stopAvatar(),this.nameBox.visible=this.amulet.visible=!1,this._avatar.visible=!1,this.numBox.visible=!1,this.vipShowItem.vipBox.visible=!1,this.firstplayernametxt.text="虚位以待...",this.fightBgImg.visible=!1,void(this.lookBtn.visible=!1);this.fightBgImg.visible=!0,this.numBox.visible=!0,this.vipShowItem.vipBox.visible=!0;var o=h.PlayerRankingModel.instance.getRanksByTypeAndMingCi(t,1);if(o){if(h.PlayerRankingCtrl.instance.getActorRankShow(o[0]),128===t||256===t||2===t){var a=o[0];if(128===t)this.getlilianSourceByParam(o[5]),this.firstplayernametxt.text=o[2];else if(256===t)this.getxianweisourceByParam(o[5]),this.firstplayernametxt.text=o[2];else{var r=h.PlayerRankingItem.getDateByType(t,o[5]);h.PlayerRankingCtrl.instance.getActorRankData([[a,1]]),this.firstplayernametxt.text=o[2],this.leveltxt.text=r+"级",this.levelImg.visible=this.leveltxt.visible=!0}0!=(l=h.PlayerRankingModel.instance.actorrank(e,c.instance.actorId)[0])&&(this.myranktxt.text="我的排名:第"+l.toString()+"名"),this.firstplayernametxt.valign="middle",this.vipShowItem.setSVIPandVIP(o[6],o[3],o[13]),this.setUI()}else{var l;this.firstplayernametxt.text=o[2],this.setFirstplayervalue(o[5]),this.vipShowItem.setSVIPandVIP(o[6],o[3],o[13]),this.setUI(),0!=(l=h.PlayerRankingModel.instance.actorrank(e,c.instance.actorId)[0])&&(this.myranktxt.text="我的排名:第"+l.toString()+"名")}this.lookBtn.visible=!!o,this.lookBtn.x=this.firstplayernametxt.x+this.firstplayernametxt.textWidth+20,0<Math.floor(.01*(o[9]||0))?(this._blue||(this._blue=new m,this._blue.pos(this.vipShowItem.x-40,this.vipShowItem.y),this._blue.scale(.8,.8),this.addChild(this._blue)),this._blue.updateVIP(o[9])):(this._blue&&this._blue.removeSelf(),this._blue=this.destroyElement(this._blue))}}},b.prototype.setUI=function(){var t=this.vipShowItem.width+this.firstplayernametxt.textWidth,e=(this.width-t)/2;this.vipShowItem.x=e,this.firstplayernametxt.x=this.vipShowItem.x+this.vipShowItem.width},b.prototype.updateshowplane=function(){Laya.timer.clear(this,this.showAvatar);var t=h.PlayerRankingModel.instance.rankShowRely;this.getShowRank(t)},b.prototype.updateDataPlane=function(){var t=h.PlayerRankingModel.instance.RankData;this.getRankData(t)},b.prototype.getlilianSourceByParam=function(t){var e=Math.floor(t/100);0!=e&&(this.nameimage.visible=!0,this.nameimage.skin="assets/icon/ui/lilian/"+e+".png",this.nameimage.centerX=0);var i=Math.floor(t%100);0!=i&&(this.tupleFontClip.visible=!0,this.chongImg.visible=!0,10==i&&(i=0),this.tupleFontClip.value=i.toString());var n=r.instance.getLilianRiseCfgByRiseLevel(t);this.setFirstplayervalue(n[3])},b.prototype.getxianweisourceByParam=function(t){if(0==t)this.setFirstplayervalue(0);else{this.nameimage.visible=!0;var e=l.instance.getXianweiRiseByLevel(t),i=e[5],n=e[10];this.nameimage.skin="assets/icon/ui/position_name/"+n+".png",this.setFirstplayervalue(i),this.nameimage.centerX=0}},b.prototype.getShowRank=function(t){var e=t[0],i=e[1];this.stopAvatar(),this.nameBox.visible=this.amulet.visible=!1,this._avatar.visible=!1,this._avatar.avatarRotationY=180,this._avatar.avatarRotationX=0,this._avatar.avatarScale=1,this._avatar.avatarY=0;var n=this._avatar.avatarX=0;switch(this._list.selectedData){case 1:this._avatar.pos(368,497),this._avatar.reset(i,e[2],e[3],e[5]),Laya.timer.once(300,this,this.showAvatar);break;case 2:this._avatar.pos(368,512),this._avatar.reset(i,e[2],e[3],e[5]),Laya.timer.once(300,this,this.showAvatar);break;case 512:this._avatar.pos(368,497),this._avatar.reset(i,e[2],e[3],e[5]),Laya.timer.once(300,this,this.showAvatar);break;case 128:this._avatar.pos(368,534),this._avatar.reset(i,e[2],e[3],e[5]),Laya.timer.once(300,this,this.showAvatar);break;case 256:this._avatar.pos(368,558),this._avatar.reset(i,e[2],e[3],e[5]),Laya.timer.once(300,this,this.showAvatar);break;case 4:this._avatar.pos(368,436),n=e[4],this._avatar.reset(n),this.setAvatar(e[4]),Laya.timer.once(300,this,this.showAvatar),this.setModelName(4,e[4]);break;case 8:this._avatar.pos(368,389),this.setAvatar(e[5]),n=e[5],this._avatar.reset(n),Laya.timer.once(300,this,this.showAvatar),this.setModelName(8,e[5]);break;case 16:this._avatar.pos(376,419),this.setAvatar(e[2]),n=e[2],this._avatar.reset(n),Laya.timer.once(300,this,this.showAvatar),this.upAndDown(),this.setModelName(16,e[2]);break;case 32:this._avatar.pos(368,431),this.setAvatar(e[3]),n=e[3],this._avatar.reset(n),Laya.timer.once(300,this,this.showAvatar),this.setModelName(32,e[3]);break;case 16384:this._avatar.pos(368,431),0===(s=i)&&(s=d.instance.getCfgById(11)[1][0]),this._avatar.reset(0),this._avatar.reset(s),n=s,this.setAvatar(s),Laya.timer.once(300,this,this.showAvatar),this.setModelName(16384,s);break;case 32768:var s;this._avatar.pos(368,431),0===(s=e[10])&&(s=d.instance.getCfgById(15)[1][0]),this.setAvatar(s),this._avatar.reset(s),n=s,Laya.timer.once(300,this,this.showAvatar),this.setModelName(32768,s),this._avatar.setActionType("show");break;case 64:var o=a.instance.getCfgBylevel(t[0][6]);0!=o[0]&&(this.amulet.visible=!0,this.amulet.skin="assets/icon/ui/amulet/"+o[5]+".png"),this._avatar.pos(368,497,!1),this._avatar.reset(i,e[2],e[3],e[5]),Laya.timer.once(200,this,this.showAvatar);break;case 65536:this.updateFactionShow()}this.observationItem.data=[[this._avatar,Math.round(n/1e3)]]},b.prototype.setModelName=function(t,e){var i=o.instance.getCfgById(e);if(i){this.nameBox.visible=!0;var n=i[2];if(4===t)y.instance.has(e)?this.nameTxt.text="幻化·"+n:this.nameTxt.text=f.numToUpperCase(e%100)+"阶·"+n;else if(8===t)g.instance.has(e)?this.nameTxt.text="幻化·"+n:this.nameTxt.text=f.numToUpperCase(e%100)+"阶·"+n;else if(16===t||32===t||16384===t||32768===t){var s=i[4];this.nameTxt.text=(3===s?"珍·":4===s?"极·":5===s?"绝·":6===s?"典藏·":"")+n}}},b.prototype.showAvatar=function(){this._avatar.visible=!0},b.prototype.getRankData=function(t){this.setFirstplayervalue(t[0][0][1])},b.prototype.setAvatar=function(t){var e=o.instance.getCfgById(t);e&&(this._avatar.avatarRotationY=e[7]?e[7]:180,this._avatar.avatarScale=e[10]?768*e[10]/1280:1,this._avatar.avatarRotationX=e[6]?e[6]:0,this._avatar.avatarX=e[8]?e[8]:0,this._avatar.avatarY=e[9]?e[9]:0)},b.prototype.upAndDown=function(){this._tweenAvatar.to({y:this._avatar.y-20},1e3).start().yoyo(!0).repeat(Number.POSITIVE_INFINITY)},b.prototype.stopAvatar=function(){this._tweenAvatar.stop()},b.prototype.setFirstplayervalue=function(t){var e=h.PlayerRankingModel.instance.getStr(t);this.img2.y=1e8<=t?1:2,this.firstplayervalue.value=e[0],this.img1.skin=e[1],this.floetValue.value=e[2],this.img2.skin=e[3],f.adaptationImgAndText([[this.firstplayervalue,4,17],[this.img1,2,0],[this.floetValue,4,17],[this.img2,2,0]],this.numBox.width,0,"center",[3,0,0])},v=b,h.RankListPlane=v}(modules=modules||{}),function(m){var v,i,n,b,s,e,r,T,I,C,x,B,S,o,a,t,l,h,c,p;function u(){return null!==i&&i.apply(this,arguments)||this}v=m.treasure||(m.treasure={}),n=m.common.CustomList,b=m.config.TreasureCfg,s=m.common.BtnGroup,e=m.common.CustomClip,r=laya.maths.Point,T=m.bag.BagModel,I=m.config.StoreCfg,C=m.config.ItemMaterialCfg,x=m.notice.SystemNoticeManager,B=m.common.CommonUtil,S=m.store.StoreModel,o=Laya.Rectangle,a=m.common.SimpleList,t=m.core.BaseViewEx,l=m.common.ProgressBarCtrl,h=m.config.XunbaoWeightCfg,c=m.funcOpen.FuncOpenModel,i=t,__extends(u,i),u.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._isShowWuShiChou=!1,this._type=0,this._btnGroup=new s,this._btnGroup.setBtns(this.v.severList,this.v.selfList),this._beginX=this.v.shouChouBiDeImg.y,this._buttonList=new n,this._buttonList.width=670,this._buttonList.height=500,this._buttonList.hCount=5,this._buttonList.spaceX=-23,this._buttonList.spaceY=-8,this._buttonList.itemRender=v.TreasureButtonItem,this.v.addChild(this._buttonList),this._buttonList.pos(44,1040,!0),this._buttonList.datas=v.TreasureModel.instance._xunBaoListIndex,this._personalList=a.create(v.TreasureItemText,488,20,1,1,0,8),this._personalList.width=500,this._personalList.height=112,this.v.selfPanel.addChild(this._personalList),this._personalList.x=0,this._personalList.y=0,this._tenBtnBtnClip=B.creatEff(this,"btn_light",15),this._tenBtnBtnClip.scale(.8,.8,!0),this._tenBtnBtnClip.pos(this.v.oneBtn.x-6,this.v.oneBtn.y-8,!0),this._sevTextArr=new Array,this._sevStringArr=new Array,this.severListLen=4;for(var t=0;t<this.severListLen;t++){var e=new laya.html.dom.HTMLDivElement;e.width=499,e.style.height=20,e.pos(0,28*t),this._sevTextArr.push(e),this.v.severPanel.addChild(e)}this._costNumArr=[this.v.oneCount,this.v.tenCount,this.v.fiftyCount],this._costImgArr=[this.v.oneCountImg,this.v.tenCountImg,this.v.fiftyCountImg],this.v.closeBtn1.hitArea=new o(-20,-20,78,85),this.v.probabilityTipsTxt.underline=!0,this.setBar(),this.v.rebateLink&&(this.rebateLink=this.v.rebateLink)},u.prototype.setBar=function(){this._bar=new l(this.v.blessImg,442,this.v.blessTxt),this._bar.maxValue=h.instance.getWeightByType(this._type),this._bar.value=180},u.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.v.oneBtn,this,this.xunBaoHandler,[0]),this.onAutoClick(this.v.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.v.fiftyBtn,this,this.xunBaoHandler,[2]),this.onAutoClick(this._buttonList,this,this.selectHandler),this.onAutoEvt(this._btnGroup,"change",this,this.changeList),this.onAutoClick(this.v.tipsBtn,this,this.TipsHandler),this.onAutoClick(this.v.closeBtn1,this,this.closeBtn1Handler),this.onAutoGlobalEvt("RUN_XUNBAO_REPLY",this,this.xunBaoReply),this.onAutoGlobalEvt("SEVER_BROADCAST_LIST",this,this.updateSeverList),this.onAutoGlobalEvt("SELF_BROADCAST_LIST",this,this.updateSelfList),this.onAutoGlobalEvt("TIME_LEFT",this,this.shengyuTime),this.onAutoGlobalEvt("BLESSING_UPDATE",this,this.updateBlessing),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateCost),this.onAutoGlobalEvt("PURCHASE_REPLY",this,this.puchaseReply),this.onAutoGlobalEvt("HEQU_XUNBAO_UPDATA",this,this.updateCost),this.onAutoGlobalEvt("UPDATE_XUNBAOUI",this,this.updateCost),this.onAutoClick(this.v.probabilityTipsTxt,this,this.probabilityHandler),this._btnGroup.selectedIndex=0},u.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t)},u.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._isShowWuShiChou=!1;for(var t=0;t<7;t++)Channel.instance.publish(2099052,[t]);this.getSeverList(),this.updateCost(),this.shengyuTime(),this.showShouChouBiDeImg(),this.updateSelfList(),Laya.timer.frameLoop(1,this,this.updateList),Laya.timer.loop(1e4,this,this.getSeverList),this._cdFlag=!1,console.log(".........................",this._type),this.v.titleTxt.text=v.TreasureModel.names[this._type]+"寻宝",this.showTipsEff()},u.prototype.showTipsEff=function(t){t&&v.TreasureModel.instance.tipsDic.set(this._type,!1),this.rebateLink&&this.rebateLink.visible&&v.TreasureModel.instance.tipsDic.get(this._type)?(this._tipsClip||(this._tipsClip=B.creatEff(this,"btn_light",15),this._tipsClip.pos(this.rebateLink.x-15,this.rebateLink.y-11),this._tipsClip.scale(.65,.55)),this._tipsClip.play()):this._tipsClip=this.destroyElement(this._tipsClip)},u.prototype.fun1=function(t){if(!c.instance.getFuncIsOpen(v.TreasureModel.instance.actionOpens[t]))return x.instance.addNotice(c.instance.getFuncOpenTipById(v.TreasureModel.instance.actionOpens[t]),!0),void(this._buttonList.selectedIndex=v.TreasureModel.instance._xunBaoListIndex.indexOf(this._type));switch(t){case 0:WindowManager.instance.open(93,this._buttonList.selectedData);break;case 1:WindowManager.instance.open(115,this._buttonList.selectedData);break;case 2:WindowManager.instance.open(116,this._buttonList.selectedData);break;case 3:WindowManager.instance.open(393,this._buttonList.selectedData);break;case 4:WindowManager.instance.open(113,this._buttonList.selectedData);break;case 6:WindowManager.instance.open(1329,this._buttonList.selectedData);break;case 7:WindowManager.instance.open(1330,this._buttonList.selectedData);break;case 8:WindowManager.instance.open(1342,this._buttonList.selectedData)}},u.prototype.selectHandler=function(){},u.prototype.getSeverList=function(){Channel.instance.publish(7340332,[this._type])},u.prototype.updateList=function(){for(var t=0;t<this._sevTextArr.length;t++)this._sevTextArr[t].y-=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this._sevTextArr[t].y<=-10&&(this._sevTextArr[t].y=102,this.severListLen<this._sevStringArr.length?this.severListLen++:this.severListLen=1,this._sevTextArr[t].innerHTML=this._sevStringArr[this.severListLen-1]||"")},u.prototype.changeList=function(){this.v.severPanel.visible=0===this._btnGroup.selectedIndex,this.v.selfPanel.visible=1===this._btnGroup.selectedIndex},u.prototype.updateSeverList=function(){var t=v.TreasureModel.instance.getSvrBroadcast(this._type);if(t&&0<t.length){0<this._sevStringArr.length&&(this._sevStringArr.length=0);for(var e=0;e<t.length;e++){var i=t[e][0],n=t[e][1],s=B.getNameByItemId(n),o="<span style='color:#4c5e8a;font-size: 20px'>天赐鸿福,</span><span style='color:rgb(13,121,255);font-size: 20px;'>"+i+"</span><span style='color:#4c5e8a;font-size: 20px'>获得了</span><span style='color:"+B.getColorById(n)+";font-size: 20px;'>"+s+"</span>";this._sevStringArr.push(o)}}},u.prototype.updateSelfList=function(){var t=v.TreasureModel.instance.getSelfBroadcast(this._type);null!=t&&0<t.length&&(this._personalList.datas=t,this._personalList.scrollTo(4<t.length?28*(t.length-4):0))},u.prototype.updateBlessing=function(){var t=v.TreasureModel.instance.getBlessing(this._type);this._bar.value=t,this.showShouChouBiDeImg(),v.TreasureModel.instance.fistMianFei(this._type)?(e.thisPlay(this._tenBtnBtnClip),this.v.oneBtn.label="免费"):(this.v.oneBtn.label="寻宝一次",e.thisStop(this._tenBtnBtnClip))},u.prototype.timeStampToMMSS=function(t){var e,i=t-GlobalData.serverTime;if(i<=0)e="00:00:00";else{var n=(.001*i>>0)/60>>0,s=n/60>>0;e=(s/24>>0)+"天"+(s%=24)+"时"+(n%=60)+"分"}return e},u.prototype.shengyuTime=function(){},u.prototype.updateTime=function(){},u.prototype.updateCost=function(){var t=m.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.getTypeByDiscount(this._type),e=1===t?9:Math.round(10*t);this.v.discountHundred.skin="common/dis_count_"+e+".png",this.v.discountNine.skin="common/dis_count_"+e+".png";for(var i=[!1,!1,!1],n=0;n<=2;n++)if(v.TreasureModel.instance.getTreasureCondition(this._type,n))switch(this._type){case 6:i[n]=S.instance.dontShowShenZun2;break;case 7:i[n]=S.instance.dontShowMiZang2;break;case 8:i[n]=S.instance.dontShowMarry2}else switch(this._type){case 0:i[n]=S.instance.dontShowTreasure;break;case 4:i[n]=S.instance.dontShowTalisman;break;case 3:i[n]=S.instance.dontShowFuWen;break;case 2:i[n]=S.instance.dontShowZhiZun;break;case 1:i[n]=S.instance.dontShowDianFeng;break;case 6:i[n]=S.instance.dontShowShenZun1;break;case 7:i[n]=S.instance.dontShowMiZang1;break;case 8:i[n]=S.instance.dontShowMarry1}for(n=0;n<this._costNumArr.length;n++){var s=b.instance.getItemConditionByGrad(this._type,n);this._costImgArr[n].skin=B.getIconById(s[0],!0);var o=m.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.getTypeByDiscount(this._type),a=1;if(1===o||0===n)a=s[1];else{var r=b.instance.getItemCfgByGrad(this._type,n);a=Math.round(r[5]*o)}var l=T.instance.getItemCountById(s[0]);if(this._costNumArr[n].text=l+"/"+a,a<=l)this._costNumArr[n].color="#4c5e8a";else if(i[n]){this._costImgArr[n].skin="common/icon_tongyong_2.png",this._costNumArr[n].color="#4c5e8a";var h=B.getMallByItemId(s[0]);if(h){var c=a-l,p=c*h[8][1];if(this._costNumArr[n].text=""+p,m.player.PlayerModel.instance.ingot>=p)this._costNumArr[n].color="#4c5e8a";else{var u=m.config.ItemExCfg.instance.getAbnormalId(s[0]);if(-1!=u){var d=I.instance.getCfgByitemId(u);this._costImgArr[n].skin=S.instance.getIconStr(d[8][0]);var y=c*d[8][1];this._costNumArr[n].text=""+y;var g=PlayerModel.instance.getCurrencyById(d[8][0]);this._costNumArr[n].color=y<=g?"#4c5e8a":"#E6372E"}else this._costNumArr[n].color="#E6372E"}}}else this._costNumArr[n].color="#E6372E"}v.TreasureModel.instance.panduianRp(),this.showShouChouBiDeImg(),this._buttonList.datas=v.TreasureModel.instance._xunBaoListIndex},u.prototype.xunBaoHandler=function(t){if(t){if(this._cdFlag)return void x.instance.addNotice("操作过于频繁",!0);this._cdFlag=!0,Laya.timer.once(500,this,this.setFlag)}var e=!1;if(v.TreasureModel.instance.getTreasureCondition(this._type,t))switch(this._type){case 6:e=S.instance.dontShowShenZun2;break;case 7:e=S.instance.dontShowMiZang2;break;case 8:e=S.instance.dontShowMarry2}else switch(this._type){case 0:e=S.instance.dontShowTreasure;break;case 4:e=S.instance.dontShowTalisman;break;case 3:e=S.instance.dontShowFuWen;break;case 2:e=S.instance.dontShowZhiZun;break;case 1:e=S.instance.dontShowDianFeng;break;case 6:e=S.instance.dontShowShenZun1;break;case 7:e=S.instance.dontShowMiZang1;break;case 8:e=S.instance.dontShowMarry1}if(e){var i=b.instance.getItemConditionByGrad(this._type,t),n=void 0;if(1===(u=m.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.getTypeByDiscount(this._type))||0===t)n=i[1];else{var s=b.instance.getItemCfgByGrad(this._type,t);n=Math.round(s[5]*u)}var o=T.instance.getItemCountById(i[0]),a=v.TreasureModel.instance.fistMianFei(this._type);if(n<=o||a&&0==t)return void v.TreasureCtrl.instance.runXunbao(this._type,t,!0);var r=B.getMallByItemId(i[0]);if(r){var l=n-o,h=l*r[8][1];if(m.player.PlayerModel.instance.ingot>=h)return void v.TreasureCtrl.instance.runXunbao(this._type,t,!0);var c=m.config.ItemExCfg.instance.getAbnormalId(i[0]);if(-1!=c){var p=I.instance.getCfgByitemId(c);if(l*p[8][1]<=PlayerModel.instance.getCurrencyById(p[8][0]))return void v.TreasureCtrl.instance.runXunbao(this._type,t,!0,!0);WindowManager.instance.open(106,[p[8][0],0,!0])}else B.goldNotEnoughAlert()}}else{i=b.instance.getItemConditionByGrad(this._type,t),o=T.instance.getItemCountById(i[0]);var u,d=void 0;d=1===(u=m.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.getTypeByDiscount(this._type))?i[1]:(s=b.instance.getItemCfgByGrad(this._type,t),Math.round(s[5]*u));var y=i[0];if(d=d||1,a=v.TreasureModel.instance.fistMianFei(this._type),d<=o||a&&0==t)return void v.TreasureCtrl.instance.runXunbao(this._type,t);var g=C.instance.getItemCfgById(y)[12],f=I.instance.getCfgByitemId(g),_=d-o;if(v.TreasureModel.instance.getTreasureCondition(this._type,t))switch(this._type){case 6:S.instance.dontShowShenZun2?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 7:S.instance.dontShowMiZang2?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 8:S.instance.dontShowMarry2?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t])}else switch(this._type){case 0:S.instance.dontShowTreasure?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 4:S.instance.dontShowTalisman?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 3:S.instance.dontShowFuWen?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 2:S.instance.dontShowZhiZun?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 1:S.instance.dontShowDianFeng?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 6:S.instance.dontShowShenZun1?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 7:S.instance.dontShowMiZang1?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 8:S.instance.dontShowMarry1?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t])}}},u.prototype.setFlag=function(){this._cdFlag=!1},u.prototype.showStoreAlert=function(t){var e=C.instance.getItemCfgById(t)[12],i=I.instance.getCfgByitemId(e),n=i[9][1],s=0,o=i[0],a=m.store.StoreModel.instance.getLimitById(o);null!=a&&(s=a[1]);var r=n-s;WindowManager.instance.openDialog(103,[i,r,1])},u.prototype.xunBaoReply=function(){var t=v.TreasureModel.instance.runXunbaoReply;if(0==t[1]){Channel.instance.publish(2099052,[this._type]),this.getSeverList();var e=t[0],i=t[2];if(1==i.length){var n=[i,new r(300,350),this.v.height];GlobalData.dispatcher.event("XUNBAO_EFFECT",[n])}1<i.length&&WindowManager.instance.open(94,[i,this._type]);for(var s=b.instance.getBestIdByType(e),o=new Array,a=0;a<i.length;a++)0<=s.indexOf(i[a])&&o.push(i[a]);0<o.length&&WindowManager.instance.open(95,o)}else B.noticeError(t[1]);this._buttonList.datas=v.TreasureModel.instance._xunBaoListIndex},u.prototype.TipsHandler=function(){var t=20038;switch(this._buttonList.selectedData){case 0:t=20038;break;case 1:t=20039;break;case 2:t=20040;break;case 3:t=20038;break;case 4:t=20038;case 6:t=19051;break;case 7:t=19052;break;case 8:t=19054}B.alertHelp(t)},u.prototype.probabilityHandler=function(){},u.prototype.puchaseReply=function(){var t=m.store.StoreModel.instance.PurchaseReply[0];0!=t?B.noticeError(t):WindowManager.instance.close(103)},u.prototype.showShouChouBiDeImg=function(){this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop();for(var t=[0,1,2],e=[70,280,481],i=0;i<t.length;i++){var n=t[i],s=b.instance.getfirstRewardByGrad(this._type,n);if(0==v.TreasureModel.instance.getfistFlag(this._type)&&!this._isShowWuShiChou&&s&&0<s.length)return this.v.shouChouReward.dataSource=[s[0],s[1]?s[1]:0,0,null],this.v.shouChouBiDeImg.y=this._beginX,n<e.length&&(this.v.shouChouBiDeImg.x=e[n]),this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop(),this._shouChouBiDeImgTween=TweenJS.create(this.v.shouChouBiDeImg).to({y:this.v.shouChouBiDeImg.y-10},1e3).start().yoyo(!0).repeat(99999999),this._shouChouBiDeImgTween.to({y:this.v.shouChouBiDeImg.y-10},1e3).start(),void(this.v.shouChouBiDeImg.visible=!0)}this.v.shouChouBiDeImg.visible=!1},u.prototype.closeBtn1Handler=function(){this._shouChouBiDeImgTween.stop(),this.v.shouChouBiDeImg.visible=!1,this._isShowWuShiChou=!0},u.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateTime),Laya.timer.clear(this,this.updateList),Laya.timer.clear(this,this.getSeverList),Laya.timer.clear(this,this.setFlag),this.setFlag(),this._shouChouBiDeImgTween&&this._shouChouBiDeImgTween.stop()},u.prototype.destroy=function(t){void 0===t&&(t=!0),this.destroyElement(this._personalList),this.destroyElement(this._buttonList),this.destroyElement(this._tenBtnBtnClip),this._tipsClip=this.destroyElement(this._tipsClip),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),i.prototype.destroy.call(this,t)},p=u,v.TreasureBasePanel=p}(modules=modules||{}),function(e){var o,a,r,l,i,t;function n(){return null!==a&&a.apply(this,arguments)||this}o=e.treasure||(e.treasure={}),r=e.config.TreasureCfg,l=e.common.CustomClip,i=e.config.BlendCfg,a=o.TreasureBasePanel,__extends(n,a),n.prototype.initialize=function(){a.prototype.initialize.call(this),this._type=0,this._showItem=[this.v.item1,this.v.item2,this.v.item3,this.v.item4,this.v.item5,this.v.item6,this.v.item7,this.v.item8,this.v.item9,this.v.item10,this.v.item11,this.v.item12,this.v.item13,this.v.item14],this._clipArr=new Array;for(var t=0;t<4;t++){var e=new Array,i=new l;if(t<3&&0<t){this._showItem[t].addChild(i),i.pos(-75,-75,!0),i.skin="assets/effect/item_effect3.atlas";for(var n=1;n<16;n++){var s="item_effect3/"+n+".png";e.push(s)}}else{this._showItem[t].addChild(i),i.pos(-14,-22,!0),i.skin="assets/effect/item_effect2.atlas";for(var o=0;o<16;o++)s="item_effect2/"+o+".png",e.push(s)}i.frameUrls=e,i.durationFrame=6,i.visible=!1,i.name="clip",this._clipArr.push(i)}this.regGuideSpr(86,this.v.oneBtn),this.regGuideSpr(82,this._buttonList.items[0]),this.regGuideSpr(85,this._buttonList.items[1]),this.regGuideSpr(83,this._buttonList.items[2]),this.regGuideSpr(84,this._buttonList.items[3]),this.setBar(),this.v.rebateLink.underline=!0,this.v.rebateLink.mouseEnabled=!0,this.v.rebateLink.visible=!1},n.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t),this._buttonList.selectedData=null!=t?99999===t?e.treasure.TreasureModel.instance.isMianFeiEnter()[1]:t:0,this.selectHandler()},n.prototype.selectHandler=function(){var t=this._buttonList.selectedData;if((o.TreasureModel._grade=t)!=this._type)this.fun1(t);else{for(var e=r.instance.getItemShow(this._type)[0][3],i=0;i<this._showItem.length;i++){var n=[e[i],0,0,null];if(this._showItem[i].dataSource=n,i<4){this._showItem[i].nameVisible=!0,this._showItem[i].isbtnClipIsPlayer=!1;var s=this._showItem[i].getChildByName("clip");s.play(),s.visible=!0}}this.updateCost(),this.updateBlessing()}},n.prototype.shengyuTime=function(){Laya.timer.clear(this,this.updateTime),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime()},n.prototype.updateTime=function(){var t=o.TreasureModel.instance.restTime;this.v.time.text=this.timeStampToMMSS(t),t<GlobalData.serverTime?(this.v.Img1.visible=!1,this.v.time.visible=!1,this.v.artImg.y=141):(this.v.Img1.visible=!0,this.v.time.visible=!0,this.v.artImg.y=160)},n.prototype.probabilityHandler=function(){var t=0===o.TreasureModel._grade?66001:1===o.TreasureModel._grade?66003:66004,e=i.instance.getCfgById(t)[2][0];WindowManager.instance.openDialog(443,["概率公示",e,695])},t=n,o.TreasurePanel=t}(modules=modules||{}),function(I){var C,x,m,r,t,B,S,M,v,w,P,e,i;function n(){var t=null!==x&&x.apply(this,arguments)||this;return t.tenWidth=555,t.fifWidth=812,t}C=I.treasure||(I.treasure={}),m=I.notice.SystemNoticeManager,r=laya.maths.Point,t=I.bag.BagItem,B=I.config.TreasureCfg,S=I.bag.BagModel,M=I.config.StoreCfg,v=I.config.ItemMaterialCfg,w=I.common.CommonUtil,P=I.store.StoreModel,e=I.common.SimpleList,x=ui.TreasureAlertUI,__extends(n,x),n.prototype.initialize=function(){x.prototype.initialize.call(this),this._showIds=new Array,this._list=e.create(t,100,122,1,5,20),this._list.width=620,this._list.height=530,this.addChild(this._list),this._list.spaceX=20,this._list.spaceY=20,this._list.pos(40,95,!0),w.setHTMLPro(this.tips,"#4c5e8a","SimHei",24)},n.prototype.close=function(){this.setFlag(),x.prototype.close.call(this)},n.prototype.playEffect=function(t){for(var e=t,i=0;i<this._list.items.length;i++){var n=this._list.items[i].x+this._list.items[i].width/2,s=this._list.items[i].y+this._list.items[i].height/2,o=new r(n,s),a=[e[i],o,this.height];GlobalData.dispatcher.event("XUNBAO_EFFECT",[a])}},n.prototype.setOpenParam=function(t){if(x.prototype.setOpenParam.call(this,t),null!=t){var e=t[this._showIds.length=0];this._type=t[1];var i=e.length;10==i?(this.height=this.bg.height=this.tenWidth,this._list.height=280,this.btn1.y=397):(this.height=this.bg.height=this.fifWidth,this._list.height=530,this.btn1.y=654);for(var n=0;n<e.length;n++){var s=[e[n],0,0,null];this._showIds.push(s)}var o=I.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.getTypeByDiscount(this._type),a=1===o?9:Math.round(10*o);this.tenDis.skin="common/dis_count_"+a+".png",this.fiftyDisCount.skin="common/dis_count_"+a+".png";var r=B.instance.getItemCfgByGrad(this._type,10===i?1:2),l=r[3][1],h=r[3][0];this.tipsIcon.skin=w.getIconById(h,!0),this.tips.innerHTML=w.getNameByItemId(h)+"："+C.TreasureModel.instance.getCoupon(this._type)+"\n                                     <span style='color:#0ecf09;'>(+"+l+") </span>",this._list.datas=this._showIds,this._list.scrollTo(0),this.playEffect(e),this._costNumArr=[null,this.tenCount,this.fiftyCount];var c=!(this._costImgArr=[null,this.tenCountImg,this.fifityCountImg]);if(this.tenBtn.label="寻宝10次",3===this._type?this.fiftyBtn.label="寻宝30次":this.fiftyBtn.label="寻宝50次",C.TreasureModel.instance.getTreasureCondition(this._type,1))switch(this._type){case 6:c=P.instance.dontShowShenZun2;break;case 7:c=P.instance.dontShowMiZang2;break;case 8:c=P.instance.dontShowMarry2}else switch(this._type){case 0:c=P.instance.dontShowTreasure;break;case 4:c=P.instance.dontShowTalisman;break;case 3:c=P.instance.dontShowFuWen;break;case 2:c=P.instance.dontShowZhiZun;break;case 1:c=P.instance.dontShowDianFeng;break;case 6:c=P.instance.dontShowShenZun1;break;case 7:c=P.instance.dontShowMiZang1;break;case 8:c=P.instance.dontShowMarry1}for(n=0;n<this._costNumArr.length;n++){var p=B.instance.getItemConditionByGrad(this._type,n);if(this._costImgArr[n]){this._costImgArr[n].skin=w.getIconById(p[0]),this._costImgArr[n].scale(.4,.4);var u=1;if(1===o||0===n)u=p[1];else{var d=B.instance.getItemCfgByGrad(this._type,n);u=Math.round(d[5]*o)}var y=S.instance.getItemCountById(p[0]);if(this._costNumArr[n].text=y+"/"+u,u<=y)this._costNumArr[n].color="#4c5e8a";else if(c){this._costImgArr[n].skin="common/icon_tongyong_2.png",this._costNumArr[n].color="#4c5e8a",this._costImgArr[n].scale(1,1);var g=w.getMallByItemId(p[0]);if(g){var f=u-y,_=f*g[8][1];if(this._costNumArr[n].text=""+_,I.player.PlayerModel.instance.ingot>=_)this._costNumArr[n].color="#4c5e8a";else{var m=I.config.ItemExCfg.instance.getAbnormalId(p[0]);if(-1!=m){var v=M.instance.getCfgByitemId(m);this._costImgArr[n].skin=P.instance.getIconStr(v[8][0]);var b=f*v[8][1];this._costNumArr[n].text=""+b;var T=PlayerModel.instance.getCurrencyById(v[8][0]);this._costNumArr[n].color=b<=T?"#4c5e8a":"#E6372E"}else this._costNumArr[n].color="#E6372E"}}}else this._costNumArr[n].color="#E6372E"}}}},n.prototype.xunBaoHandler=function(t){if(t){if(this._cdFlag)return void m.instance.addNotice("操作过于频繁",!0);this._cdFlag=!0,Laya.timer.once(500,this,this.setFlag)}var e=!1;if(C.TreasureModel.instance.getTreasureCondition(this._type,t))switch(this._type){case 6:e=P.instance.dontShowShenZun2;break;case 7:e=P.instance.dontShowMiZang2;break;case 8:e=P.instance.dontShowMarry2}else switch(this._type){case 0:e=P.instance.dontShowTreasure;break;case 4:e=P.instance.dontShowTalisman;break;case 3:e=P.instance.dontShowFuWen;break;case 2:e=P.instance.dontShowZhiZun;break;case 1:e=P.instance.dontShowDianFeng;break;case 6:e=P.instance.dontShowShenZun1;break;case 7:e=P.instance.dontShowMiZang1;break;case 8:e=P.instance.dontShowMarry1}if(e){var i=B.instance.getItemConditionByGrad(this._type,t),n=void 0;if(1===(u=I.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.getTypeByDiscount(this._type))||0===t)n=i[1];else{var s=B.instance.getItemCfgByGrad(this._type,t);n=Math.round(s[5]*u)}var o=S.instance.getItemCountById(i[0]),a=C.TreasureModel.instance.fistMianFei(this._type);if(n<=o||a&&0==t)return void C.TreasureCtrl.instance.runXunbao(this._type,t,!0);var r=w.getMallByItemId(i[0]);if(r){var l=n-o,h=l*r[8][1];if(I.player.PlayerModel.instance.ingot>=h)return void C.TreasureCtrl.instance.runXunbao(this._type,t,!0);var c=I.config.ItemExCfg.instance.getAbnormalId(i[0]);if(-1!=c){var p=M.instance.getCfgByitemId(c);if(l*p[8][1]<=PlayerModel.instance.getCurrencyById(p[8][0]))return void C.TreasureCtrl.instance.runXunbao(this._type,t,!0,!0);WindowManager.instance.open(106,[p[8][0],0,!0])}else w.goldNotEnoughAlert()}}else{i=B.instance.getItemConditionByGrad(this._type,t),o=S.instance.getItemCountById(i[0]);var u,d=void 0;d=1===(u=I.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.getTypeByDiscount(this._type))?i[1]:(s=B.instance.getItemCfgByGrad(this._type,t),Math.round(s[5]*u));var y=i[0];if(d=d||1,a=C.TreasureModel.instance.fistMianFei(this._type),d<=o||a&&0==t)return void C.TreasureCtrl.instance.runXunbao(this._type,t);var g=v.instance.getItemCfgById(y)[12],f=M.instance.getCfgByitemId(g),_=d-o;if(C.TreasureModel.instance.getTreasureCondition(this._type,t))switch(this._type){case 6:P.instance.dontShowShenZun2?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 7:P.instance.dontShowMiZang2?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 8:P.instance.dontShowMarry2?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t])}else switch(this._type){case 0:P.instance.dontShowTreasure?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 4:P.instance.dontShowTalisman?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 3:P.instance.dontShowFuWen?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 2:P.instance.dontShowZhiZun?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 1:P.instance.dontShowDianFeng?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 6:P.instance.dontShowShenZun1?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 7:P.instance.dontShowMiZang1?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t]);break;case 8:P.instance.dontShowMarry1?Channel.instance.publish(2099353,[f[0],_]):WindowManager.instance.openDialog(366,[f,_,t])}}},n.prototype.setFlag=function(){this._cdFlag=!1},n.prototype.showStoreAlert=function(t){var e=v.instance.getItemCfgById(t)[12],i=M.instance.getCfgByitemId(e),n=i[9][1],s=0,o=i[0],a=I.store.StoreModel.instance.getLimitById(o);null!=a&&(s=a[1]);var r=n-s;WindowManager.instance.open(103,[i,r,1])},n.prototype.onEvt=function(){x.prototype.onEvt.call(this),this.onAutoClick(this.tenBtn,this,this.xunBaoHandler,[1]),this.onAutoClick(this.fiftyBtn,this,this.xunBaoHandler,[2]),this.onAutoClick(this.gotoTxt,this,this.gotoHandler),this.onAutoGlobalEvt("PURCHASE_REPLY",this,this.puchaseReply)},n.prototype.puchaseReply=function(){var t=I.store.StoreModel.instance.PurchaseReply[0];0!=t?w.noticeError(t):(WindowManager.instance.close(103),this.close())},n.prototype.offEvt=function(){x.prototype.offEvt.call(this),Laya.timer.clear(this,this.setFlag)},n.prototype.destroy=function(){this.destroyElement(this._list),x.prototype.destroy.call(this)},n.prototype.gotoHandler=function(){WindowManager.instance.open(109,this._type),this.close()},i=n,C.TreasureAlert=i}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){this.openState=0,this.uiState=0,this.score=0,this.jackPot=0,this.restTm=0,this._totalScore=0,this.rewardList=new Array,this._svrBroadcastList=new Array,this._PayRewardNoteList=new Array,this.noteList=new Array,this._myNodeList=new Array,this._myNodeListByObjId=new Array,this._quNodeList=new Array,this._quNodeListByObjId=new Array,this._tenMoney=i.instance.tenMoney,this._oneMoney=i.instance.oneMoney,this.maxJackPot=o.instance.getCfgById(41005)[1][1],this.tempJackPotArr=[]}e=t.rotary_table_jiuzhou||(t.rotary_table_jiuzhou={}),i=t.config.JzDuobaoWeightCfg,n=t.funcOpen.FuncOpenModel,s=t.redPoint.RedPointCtrl,o=t.config.BlendCfg,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.getUpdateBagItemInfo=function(t){this.tempJackPotArr.unshift(t[1])},Object.defineProperty(r.prototype,"svrBroadcastList",{get:function(){return this._svrBroadcastList},set:function(t){this._svrBroadcastList=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"PayRewardNoteList",{get:function(){return this._PayRewardNoteList},set:function(t){this._PayRewardNoteList=t,this._PayRewardNoteList&&this._PayRewardNoteList.reverse()},enumerable:!0,configurable:!0}),r.prototype.updateInfo=function(t){this.openState=t[0],this.score=t[2],this.jackPot=t[3],this.restTm=t[4]+GlobalData.serverTime,t[5]&&(this.rewardList=t[5]),this.uiState=t[1],this.setActionOpen(),GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_UPDATE"),this.setRP()},r.prototype.setActionOpen=function(){t.funcOpen.FuncOpenModel.instance.setActionOpen(217,1==this.uiState?1:2)},r.prototype.getInfoMyNodeList=function(t){var e=t;if(e){this._myNodeList.length=0,this._myNodeListByObjId.length=0,this._myNodeList=new Array,this._myNodeListByObjId=new Array;for(var i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[3];this._myNodeList[s]=n,this._myNodeListByObjId[o]=n}GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_MYLIST")}},r.prototype.getInfoQuNodeList=function(t){var e=t;if(e){this._quNodeList.length=0,this._quNodeListByObjId.length=0,this._quNodeList=new Array,this._quNodeListByObjId=new Array;for(var i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[5];this._quNodeList[s]=n,this._quNodeListByObjId[o]=n}GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_QULIST")}},r.prototype.getgRadeRP=function(){if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&1==e[1])return!0}return!1},r.prototype.getRewardStart=function(t){if(this.rewardList){for(var e=0;e<this.rewardList.length;e++){var i=this.rewardList[e];if(i){var n=i[0],s=i[1];if(t==n)return s}}return 0}},r.prototype.getgRade=function(){for(var t=!1,e=0;e<this.rewardList.length;e++){var i=this.rewardList[e];if(i){if(1==(o=i[1]))return[i[0],o];2==o&&(t=!0)}}var n=this.rewardList[this.rewardList.length-1];if(t)for(e=0;e<this.rewardList.length;e++){var s=this.rewardList[e];if(s){var o,a=s[0];if(0==(o=s[1]))return[a,o]}}else n=this.rewardList[0];return n?[n[0],n[1]]:[1,0]},r.prototype.getNoteListGj=function(){for(var t=new Array,e=0;e<this.noteList.length;e++){var i=this.noteList[e],n=i[0],s=i[2];1!=s&&5!=s&&8!=s&&12!=s||t.push(n)}return t},r.prototype.PayRewardRunReply=function(){GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_RUNREPLY")},r.prototype.openMyRecord=function(){GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_OPENRECORD")},r.prototype.updateSeverList=function(){GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_BROADCAST_LIST")},r.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(217);s.instance.setRPProperty("rotaryTableJiuZhouRP",t&&this.getgRadeRP())},a=r,e.RotaryTableJiuZhouModel=a}(modules=modules||{}),function(s){var t,o,a,r,l,e;function i(){var t=null!==o&&o.apply(this,arguments)||this;return t.num=10,t}t=s.treasure||(s.treasure={}),a=s.common.CustomClip,r=s.config.ItemRuneCfg,l=s.rotary_table_jiuzhou.RotaryTableJiuZhouModel,o=ui.TreasureGetAlertUI,__extends(i,o),i.prototype.destroy=function(){this.text=this.destroyElement(this.text),this.upClip=this.destroyElement(this.upClip),this.allItemId=null,o.prototype.destroy.call(this)},i.prototype.initialize=function(){o.prototype.initialize.call(this),this.upClip=a.create("assets/effect/state.atlas","state",8),this.upClip.setProperty(null,266,335,2),this.upClip.anchorX=this.upClip.anchorY=.5},i.prototype.setOpenParam=function(t){if(o.prototype.setOpenParam.call(this,t),this.num=10,this.btn.label="确定("+this.num+")",this.allItemId=t,this.treasureId=this.allItemId.shift(),this.treasureId){if(this.treasureItem.dataSource=[this.treasureId,0,0,null],7==s.common.CommonUtil.getItemTypeById(this.treasureId)){var e=1e4*(1e-4*this.treasureId>>0),i=r.instance.getCfgById(e);this.treasureName.text=i[1]+" Lv."+this.treasureId%1e4}else if(9==s.common.CommonUtil.getItemTypeById(this.treasureId))if(39==s.common.CommonUtil.getItemSubTypeById(this.treasureId)){var n=l.instance.tempJackPotArr!=[]?l.instance.tempJackPotArr[0]:0;this.treasureName.text="元宝x"+Math.ceil(n),l.instance.tempJackPotArr.shift()}else this.treasureName.text=this.treasureItem._nameTxt.text;else this.treasureName.text=this.treasureItem._nameTxt.text;a.thisPlay(this.upClip),Laya.timer.loop(1e3,this,this.btnClose)}},i.prototype.onEvt=function(){var t=this;o.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.close),this.onAutoGlobalEvt("RUINS_BIG_TEXT",this,function(){t.text||(t.text=new Laya.Text,t.text.color="#50ff28",t.text.align="center",t.text.fontSize=28,t.text.font="SimHei",t.text.width=t.width,t.text.text="（同时获得全部剩余奖励）",t.text.x=0,t.text.y=132),t.addChild(t.text)})},i.prototype.offEvt=function(){o.prototype.offEvt.call(this),this.text&&this.text.parent&&this.removeChild(this.text)},i.prototype.btnClose=function(){this.num--,this.btn.label="确定("+this.num+")",this.num<=0&&(Laya.timer.clear(this,this.btnClose),this.close())},i.prototype.close=function(){o.prototype.close.call(this),GlobalData.dispatcher.event("DIAL_UPDATE"),a.thisStop(this.upClip),Laya.timer.clear(this,this.btnClose),0<this.allItemId.length&&WindowManager.instance.open(95,this.allItemId)},e=i,t.TreasureGetAlert=e}(modules=modules||{}),function(t){var s,e,i,n,o,a,r,l,h,c,p,u;function d(){return null!==e&&e.apply(this,arguments)||this}function y(){return null!==p&&p.apply(this,arguments)||this}s=t.treasure||(t.treasure={}),i=t.common.CustomList,n=laya.ui.Button,o=laya.events.Event,a=t.config.TreasureCfg,r=laya.ui.Image,l=t.common.CommonUtil,h=t.common.SimpleList,e=t.common.ItemRender,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this.btn=new n,this.btn.skin="common/btn_tongyong_1.png",this.btn.stateNum=2,this.btn.labelFont="SimHei",this.btn.labelSize=26,this.btn.labelColors="#4c5e8a,#9d5119",this.addChild(this.btn),this.scale(.8,.8),this.img=new r("common/image_common_xhd.png"),this.img.pos(125,0),this.img.visible=!1,this.addChild(this.img)},d.prototype.setData=function(t){e.prototype.setData.call(this,t),this._type=t,this.btn.label=d.buttonLabels[t]},Object.defineProperty(d.prototype,"RedDot",{set:function(t){this.img.visible=t},enumerable:!0,configurable:!0}),d.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.btn.selected=t},d.buttonLabels=["装备兑换","巅峰兑换","至尊兑换","符文兑换","法宝兑换","","圣尊兑换","秘藏兑换","仙缘兑换"],c=d,p=ui.TreasureChangeViewUI,__extends(y,p),y.prototype.initialize=function(){p.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=h.create(s.TreasureChangeItem,303,169,1,2,14,11),this._list.width=619,this._list.height=850,this._list.x=50,this._list.y=120,this.addChild(this._list),this._buttonList=new i,this._buttonList.width=670,this._buttonList.height=500,this._buttonList.hCount=5,this._buttonList.spaceX=-23,this._buttonList.spaceY=-8,this._buttonList.itemRender=c,this._buttonList.pos(44,1040,!0),this.addChildAt(this._buttonList,5),this._buttonList.datas=s.TreasureModel.instance._xunBaoListIndex,this._buttonList.selectedIndex=0},y.prototype.setRedDot=function(){for(var t=s.TreasureModel.instance.getRedDot(),e=this._buttonList.items,i=0;i<e.length;i++){var n=t[e[i]._type];e[i].RedDot=n||!1}},y.prototype.selectHandler=function(){this._type=this._buttonList.selectedData,null!=this._type&&(Channel.instance.publish(2099052,[this._type]),Channel.instance.publish(2099055,null),this._list.datas=a.instance.getCfgsByType(this._type),this.updateCoupon())},y.prototype.updateCoupon=function(){var t=3===this._type?"符文碎片：":s.TreasureModel.names[this._type]+"寻宝积分:";this.countImg.visible=this.countImg1.visible=this.count1.visible=3===this._type;var e=s.TreasureModel.instance.getCoupon(this._type);this.count.text=t+(e||0).toString(),this.count1.text="符晶："+l.getPropCountById(13250008);var i=this.countImg.width+this.count.textWidth+60,n=this.width-i;this.countImg.x=n,this.count.x=this.countImg.x+this.countImg.width},y.prototype.onEvt=function(){p.prototype.onEvt.call(this),this._buttonList.on(o.CLICK,this,this.selectHandler),GlobalData.dispatcher.on("XUNBAO_EXCHANGE_REPLY",this,this.puchaseReply).on("BLESSING_UPDATE",this,this.updateCoupon).on("XUNBAO_HINTLIST",this,this.setRedDot)},y.prototype.offEvt=function(){p.prototype.offEvt.call(this),this._buttonList.off(o.CLICK,this,this.selectHandler),GlobalData.dispatcher.off("XUNBAO_EXCHANGE_REPLY",this,this.puchaseReply).off("BLESSING_UPDATE",this,this.updateCoupon).off("XUNBAO_HINTLIST",this,this.setRedDot)},y.prototype.lastBtnHandler=function(){this._buttonList.scrollToIndex(0)},y.prototype.nextBtnHandler=function(){this._buttonList.scrollToIndex(this._buttonList.datas.length-1)},y.prototype.puchaseReply=function(){l.noticeError(s.TreasureModel.instance.xunBaoExchangeReply)},y.prototype.setOpenParam=function(t){p.prototype.setOpenParam.call(this,t),t&&(this._buttonList.selectedData=t)},y.prototype.onOpened=function(){p.prototype.onOpened.call(this),this.selectHandler()},u=y,s.TreasureChangePanel=u}(modules=modules||{}),function(e){var r,l,o,h,t,i;function n(){return null!==l&&l.apply(this,arguments)||this}r=e.treasure||(e.treasure={}),o=e.config.TreasureCfg,h=e.common.CustomClip,t=e.config.BlendCfg,l=r.TreasureBasePanel,__extends(n,l),n.prototype.initialize=function(){l.prototype.initialize.call(this),this._type=4,this._showItem=[this.v.item1,this.v.item2,this.v.item3,this.v.item4,this.v.item5,this.v.item6,this.v.item7,this.v.item8,this.v.item9,this.v.item10,this.v.item11,this.v.item12,this.v.item13,this.v.item14],this._moveItemDatas=this.getBlendCfg(),this._moveItemArr=new Array,this._moveDataLen=6;for(var t=0;t<6;t++){var e=new r.TreasureTalismanItem;e.pos(12+124*t,0),e.data=this._moveItemDatas[t],this._moveItemArr.push(e),this.v.itemPanel.addChild(e)}for(this._clipArr=new Array,t=0;t<4;t++){var i=new Array,n=new h;if(t<3&&0<t){this._showItem[t].addChild(n),n.pos(-75,-75,!0),n.skin="assets/effect/item_effect3.atlas";for(var s=1;s<16;s++){var o="item_effect3/"+s+".png";i.push(o)}}else{this._showItem[t].addChild(n),n.pos(-14,-22,!0),n.skin="assets/effect/item_effect2.atlas";for(var a=0;a<16;a++)o="item_effect2/"+a+".png",i.push(o)}n.frameUrls=i,n.durationFrame=6,n.visible=!1,n.name="clip",this._clipArr.push(n)}this.regGuideSpr(89,this.v.oneBtn),this.regGuideSpr(82,this._buttonList.items[0]),this.regGuideSpr(85,this._buttonList.items[1]),this.regGuideSpr(83,this._buttonList.items[2]),this.regGuideSpr(84,this._buttonList.items[3]),this.setBar()},n.prototype.getBlendCfg=function(){return t.instance.getCfgById(15002)[1]},n.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this._buttonList.selectedData=null!=t?99999===t?e.treasure.TreasureModel.instance.isMianFeiEnter()[1]:t:4,this.selectHandler()},n.prototype.onOpened=function(){l.prototype.onOpened.call(this),Laya.timer.frameLoop(1,this,this.updateShowItemList)},n.prototype.shengyuTime=function(){Laya.timer.clear(this,this.updateTime),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime()},n.prototype.selectHandler=function(){var t=this._buttonList.selectedData;if((r.TreasureModel._grade=t)!=this._type)this.fun1(t);else{for(var e=o.instance.getItemShow(this._type)[0][3],i=0;i<this._showItem.length;i++){var n=[e[i],0,0,null];if(this._showItem[i].dataSource=n,i<4){this._showItem[i].nameVisible=!0,this._showItem[i].isbtnClipIsPlayer=!1;var s=this._showItem[i].getChildByName("clip");s.play(),s.visible=!0}}this.updateCost()}},n.prototype.updateShowItemList=function(){for(var t=0;t<this._moveItemArr.length;t++)this._moveItemArr[t].x-=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this._moveItemArr[t].x<=-112&&(this._moveItemArr[t].x=632,this._moveDataLen<this._moveItemDatas.length?this._moveDataLen++:this._moveDataLen=1,this._moveItemArr[t].data=this._moveItemDatas[this._moveDataLen-1])},n.prototype.updateSelfList=function(){var t=r.TreasureModel.instance.getSelfBroadcast(this._type);null!=t&&0<t.length&&(this._personalList.datas=t,this._personalList.scrollTo(4<t.length?28*(t.length-4):0))},n.prototype.updateTime=function(){var t=r.TreasureModel.instance.restTime;this.v.time.text=this.timeStampToMMSS(t),t<GlobalData.serverTime?(this.v.Img1.visible=!1,this.v.time.visible=!1,this.v.artImg.y=140,this.v.Text1.y=144):(this.v.Img1.visible=!0,this.v.time.visible=!0,this.v.artImg.y=168,this.v.Text1.y=172)},n.prototype.probabilityHandler=function(){WindowManager.instance.open(443,["概率公示",t.instance.getCfgById(66005)[2][0],695])},n.prototype.close=function(){l.prototype.close.call(this),Laya.timer.clear(this,this.updateShowItemList)},i=n,r.TreasureTalismanPanel=i}(modules=modules||{}),function(t){var s,e,i,n,o,a,r,l;function h(){return e.call(this)||this}s=t.treasure||(t.treasure={}),i=laya.ui.List,n=t.bag.BagModel,o=t.bag.BagUtil,a=t.notice.SystemNoticeManager,r=t.common.CommonUtil,e=ui.TreasureBagViewUI,__extends(h,e),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._bagList&&(this._bagList.removeSelf(),this._bagList.destroy(),this._bagList=null),e.prototype.destroy.call(this,t)},h.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._bagList=new i,this._bagList.vScrollBarSkin="",this._bagList.itemRender=s.TreasureItem,this._bagList.repeatX=5,this._bagList.spaceX=20,this._bagList.spaceY=20,this._bagList.width=620,this._bagList.height=850,this._bagList.x=27,this.addChild(this._bagList),this._bagList.selectEnable=!0,this._bagList.pos(80,120,!0),this.regGuideSpr(91,this.getAllBtn)},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.getAllBtn,this,this.getAllBtnHandler),this.onAutoGlobalEvt("TASK_XUNBAO_LIST_REPLY",this,this.taskXunbaoList),this.onAutoGlobalEvt("TASK_XUNBAO_ALL_REPLY",this,this.taskXunbaoAll)},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateBag()},h.prototype.updateBag=function(){this._showIds=this.genGrids(),this._bagList.array=this._showIds,s.TreasureModel.instance.selectItem.length=0},h.prototype.genGrids=function(){var t=n.instance.getItemsByBagId(4).concat();return(t=t.sort(this.sortFunc.bind(this))).length<100&&(t=t.concat(new Array(100-t.length))),t},h.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=r.getItemQualityById(i),o=r.getItemQualityById(n);return o<s?-1:s<o?1:n<i?-1:i<n?1:0},h.prototype.getBtnHandler=function(){for(var t=s.TreasureModel.instance.selectItem,e=o.canAddItemsByBagIdCount(t),i=new Array,n=0;n<t.length;n++)i.push(t[n][2]);1==e&&(0<i.length?Channel.instance.publish(2097253,[i]):a.instance.addNotice("当前无选中道具",!0))},h.prototype.getAllBtnHandler=function(){var t=n.instance.getItemsByBagId(4);1==o.canAddItemsByBagIdCount(t)&&(t&&0<t.length?Channel.instance.publish(2097254,null):a.instance.addNotice("当前仓库无可取出的道具",!0))},h.prototype.taskXunbaoList=function(){var t=s.TreasureModel.instance.taskXunbao;0!=t?r.noticeError(t):this.updateBag()},h.prototype.taskXunbaoAll=function(){var t=s.TreasureModel.instance.taskAllXunbao;0!=t?r.noticeError(t):this.updateBag()},l=h,s.TreasureBagPanel=l}(modules=modules||{}),function(e){var t,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=e.treasure||(e.treasure={}),i=t.TreasurePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=2,this.v.artImg.skin="treasure/image_xb_txt3.png",this.regGuideSpr(88,this.v.oneBtn),this.regGuideSpr(82,this._buttonList.items[0]),this.regGuideSpr(85,this._buttonList.items[1]),this.regGuideSpr(83,this._buttonList.items[2]),this.regGuideSpr(84,this._buttonList.items[3])},s.prototype.setOpenParam=function(t){this._buttonList.selectedData=null!=t?99999===t?e.treasure.TreasureModel.instance.isMianFeiEnter()[1]:t:2,this.selectHandler()},n=s,t.TreasureZhiZunPanel=n}(modules=modules||{}),function(e){var t,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=e.treasure||(e.treasure={}),i=t.TreasurePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=1,this.v.artImg.skin="treasure/image_xb_txt4.png",this.regGuideSpr(87,this.v.oneBtn),this.regGuideSpr(82,this._buttonList.items[0]),this.regGuideSpr(85,this._buttonList.items[1]),this.regGuideSpr(83,this._buttonList.items[2]),this.regGuideSpr(84,this._buttonList.items[3])},s.prototype.setOpenParam=function(t){this._buttonList.selectedData=null!=t?99999===t?e.treasure.TreasureModel.instance.isMianFeiEnter()[1]:t:1,this.selectHandler()},n=s,t.TreasureDianFengPanel=n}(modules=modules||{}),function(r){var l,s,h,o,c,a,t,i,n,e;function p(){return s.call(this)||this}l=r.lineClearOut||(r.lineClearOut={}),h=r.config.OnhookDropCfg,o=r.common.CustomClip,c=r.config.BlendCfg,a=r.bag.BaseItem,t=r.bag.BagUtil,i=r.vip.VipModel,n=r.config.PrivilegeCfg,s=ui.LineClearOutUI,__extends(p,s),p.prototype.destroy=function(){this._btnClip&&(this._btnClip.removeSelf(),this._btnClip.destroy(),this._btnClip=null),s.prototype.destroy.call(this)},p.prototype.initialize=function(){s.prototype.initialize.call(this),this._allClearTime=c.instance.getCfgById(24002)[1][0],this._addTimesBtnClip=o.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.addTimesBtn.addChild(this._addTimesBtnClip),this._addTimesBtnClip.pos(-10,-10),this._addTimesBtnClip.visible=!1,this._btnClip=o.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.clearBtn.x-5,this.clearBtn.y-10),this._btnClip.play();var t=c.instance.getCfgById(24001)[1][0];this.timeClip.value=t.toString(),this._numTxtArr=[this.coinNumTxt,this.exNumtTxt,this.genuineNumTxt,this.equipNumtxt,this.dragontNumTxt,this.smeltNumTxt];for(var e=[90330001,90430001,90530001,50142011,10120001,90730001],i=0;i<6;i++){var n=new a;3==i&&(this._equipItem=n),this.addChild(n),n.dataSource=[e[i],0,0,null],n.nameVisible=!1,n.x=96+180*Math.floor(i%3),n.y=282+173*Math.floor(i/3)}this._equipId=c.instance.getCfgById(24005)[1][0]},p.prototype.onOpened=function(){s.prototype.onOpened.call(this),Channel.instance.publish(2099954,null),this._btnClip.play(),this.updateAlert(),this.showVenerateOpen(),this.showZhizunBtn()},p.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.clearBtn,this,this.clearFighting),this.onAutoClick(this.addTimesBtn,this,this.addTimes),this.onAutoClick(this.monthCardBox,this,this.openMonthCard),this.onAutoClick(this.zhizunBox,this,this.zhizunHandler),this.onAutoGlobalEvt("SWEEPING_UPDATE",this,this.updateAlert),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showZhizunBtn),this.onAutoGlobalEvt("UPDATE_PRIVILEGE",this,this.onUpdatePrivilege),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},p.prototype.onUpdatePrivilege=function(){var t=i.instance.getPrivilegeInfoById(68)[1],e=n.instance.getVipInfoByLevel(i.instance.vipLevel,68);0<(e&&e[1]||0)-t&&l.LineClearOutModel.instance.availableTimes<this._allClearTime?(this._addTimesBtnClip.isPlaying||o.thisPlay(this._addTimesBtnClip),this._addTimesBtnClip.visible=!0):(o.thisStop(this._addTimesBtnClip),this._addTimesBtnClip.visible=!1)},p.prototype.openMonthCard=function(){WindowManager.instance.open(100),this.close()},p.prototype.zhizunHandler=function(){WindowManager.instance.open(351),this.close()},p.prototype.showVenerateOpen=function(){var t=r.monthCard.MonthCardModel.instance.MonthCardInfoReply;t?0===t[0]?(this.monthCardBox.gray=!0,this.monthCardTxt.text="点击开通"):(this.monthCardBox.gray=!1,this.monthCardTxt.text="已开通"):(this.monthCardBox.gray=!0,this.monthCardTxt.text="点击开通")},p.prototype.showZhizunBtn=function(){var t=r.zhizun.ZhizunModel.instance.state;null!=t&&(1==t?(this.zhizunBox.gray=!1,this.zhizunTxt.text="已开通"):(this.zhizunBox.gray=!0,this.zhizunTxt.text="点击开通"),this.setVisible())},p.prototype.clearFighting=function(){t.checkNeedSmeltTip()||Channel.instance.publish(2099952,null)},p.prototype.addTimes=function(){WindowManager.instance.open(59,68)},p.prototype.updateAlert=function(){if(l.LineClearOutModel.instance.getSweepingState){for(var t=[l.LineClearOutModel.instance.getSweepingState[1],l.LineClearOutModel.instance.getSweepingState[2],l.LineClearOutModel.instance.getSweepingState[0],l.LineClearOutModel.instance.getSweepingState[3],l.LineClearOutModel.instance.getSweepingState[5],l.LineClearOutModel.instance.getSweepingState[6]],e=0,i=this._numTxtArr.length;e<i;e++)this._numTxtArr[e].text="×"+r.common.CommonUtil.bigNumToString(t[e]);var n=h.instance.getCfgByLv(PlayerModel.instance.bornLev)[1][1];this._equipItem.dataSource=[this._equipId,n,0,null];var s=l.LineClearOutModel.instance.clearTime,o=l.LineClearOutModel.instance.availableTimes;this.fightTimesTxt.text=o+"/"+this._allClearTime,this.addTimesBtn.x=this.fightTimesTxt.x+this.fightTimesTxt.width+10;var a=0;0==s?(this.firstTxt.visible=!0,this.goldImg.visible=!1,this.goldNumTxt.visible=!1):(this.firstTxt.visible=!1,this.goldImg.visible=!0,this.goldNumTxt.visible=!0,9<s&&(s=9),a=c.instance.getCfgById(24003)[1][s],this.goldNumTxt.text=a.toString()),0<o?(this._btnClip.visible=PlayerModel.instance.ingot>=a,this.fightTimesTxt.color="#3d5981"):(this._btnClip.visible=!1,this.fightTimesTxt.color="#ff3e3e"),this.setVisible(),this.onUpdatePrivilege()}},p.prototype.setVisible=function(){PlatParams.isCloseRecharge&&(this.monthCardBox.visible=this.zhizunBox.visible=this.monthCardTxt.visible=this.zhizunTxt.visible=this.addTimesBtn.visible=!1)},p.prototype.updatePlatChangeRecharge=function(){this.monthCardBox.visible=this.zhizunBox.visible=this.monthCardTxt.visible=this.zhizunTxt.visible=this.addTimesBtn.visible=!PlatParams.isCloseRecharge},e=p,l.LineClearOutAlert=e}(modules=modules||{}),function(t){var e,i;function n(){this._Items=new Array,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._typeGardeMingCi={};for(var t=GlobalData.getConfig("sprint_rank"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e];if(n){var s=n[0],o=n[3];this._tab[s]||(this._tab[s]=[]),this._tab[s].push(t[e]);for(var a=n[14][0],r=n[14][1],l=a;l<=r;l++)this._Items[l]=o;this._typeGardeMingCi[s]||(this._typeGardeMingCi[s]=new Array),this._typeGardeMingCi[s][o]=r}}},n.prototype.getCfgsByGrade=function(t,e){return this._tab[t][e]},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getMaxMingCiByGrade=function(t,e){return this._typeGardeMingCi[t][e]},n.prototype.getGradeByRank=function(t){return this._Items[t]},i=n,e.SprintRankCfg=i}(modules=modules||{}),function(t){var a,e,i,x,n,o,r,B,s;function l(){var t=e.call(this)||this;return t._getState=0,t._endFlag=0,t._isChange=!0,t}a=t.sprint_rank||(t.sprint_rank={}),i=ui.SprintXianQiRankViewUI,x=t.common.CustomClip,n=t.common.CustomList,o=t.bag.BagUtil,r=t.notice.SystemNoticeManager,B=t.config.SprintRankCfg,e=i,__extends(l,e),l.prototype.destroy=function(t){void 0===t&&(t=!0),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this._btnClip=this.destroyElement(this._btnClip),this._prizeEffect=this.destroyElement(this._prizeEffect),this._list=this.destroyElement(this._list),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._typeWin&&(this.tipsImage.skin="sprint_rank/image_kfcb_bg0"+this._typeWin+".png"),this._taskBase=[this.rushReward1,this.rushReward2,this.rushReward3],CommonUtil.setHTMLPro(this.MissionStatementText,"#1f304d","SimHei",26),this.creatEffect(),this.initializePrizeEffect(),this.initializeList(),this.rewardShowItem.setDataFun([1,.4,.6,.6,"assets/icon/ui/sprint_rank/"]),this.rewardShowItem.fashionModelPosY=150,this.rewardShowItem.xainQiModelPosY=110,this.rewardShowItem.lingChongModelPosY=110,this.rewardShowItem.shenBingModelPosY=150,this.rewardShowItem.xianYiModelPosY=110,this.rewardShowItem.tianZhuModelPosY=130},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SPRINT_RANK_TASK_UPDATE",this,this.updateRankTaskReward),this.onAutoGlobalEvt("SPRINT_RANK_UPDATE",this,this.updateRankandTime),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoClick(this.rankBtn,this,this.showRankBtn)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler),this.rewardShowItem.stopTween()},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setRankReward(),a.SprintRankTaskCtrl.instance.getSprintRankInfo(),a.SprintRankCtrl.instance.getSprintRankAllInfo(),this.updateRankTaskReward(),this.updateRankandTime()},l.prototype.updateRankTaskReward=function(){this.setRankTaskReward()},l.prototype.updateRankandTime=function(){this.showRank(),this.setActivitiTime(),this.changeView()},l.prototype.setRankTaskReward=function(){this._taskList=a.SprintRankTaskModel.instance.taskList,this._taskList&&(null==this._taskList[this._typeWin]?(this._getState=0,this._endFlag=1):(this._getState=this._taskList[this._typeWin][2],this._endFlag=this._taskList[this._typeWin][4]),this.setBtnSure(),this.showTaskReward())},l.prototype.showTaskReward=function(){for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=0,i=0,n=0;null==this._taskList[this._typeWin]?this._cfg=a.SprintRankTaskCfg.instance.getCfgByType(this._typeWin)[0]:(e=this._taskList[this._typeWin][1],i=this._taskList[this._typeWin][3],n=this._taskList[this._typeWin][5],this._cfg=a.SprintRankTaskCfg.instance.getCfgById(e));var s=this._cfg[7];for(t=0;t<.5*s.length;t++){var o=this._taskBase[t];o&&(o.dataSource=[s[2*t],s[2*t+1],0,null],o.visible=!0)}this.MissionStatementText.innerHTML=this._cfg[5]+"达到<span style='color:#168a17'>&nbsp;"+this._cfg[6]+"</span>级,可领取!",this.scheduleText.text="("+i+"/"+this._cfg[6][0]+")",i>=this._cfg[6][0]?this.scheduleText.color="#16ba17":this.scheduleText.color="#FF3e3e",this.fightingText.text=""+n},l.prototype.setBtnSure=function(){if(x.thisStop(this._btnClip),1==this._endFlag)return this.sureBtn.visible=!1,this.receivedImg.visible=!1,void(this.overImg.visible=!0);this.overImg.visible=!1,0==this._getState?(this.sureBtn.visible=!0,this.sureBtn.label=7==this._typeWin?"领取":"前往",this.sureBtn.skin=7==this._typeWin?"common/btn_tongyong_6.png":"common/btn_tongyong_18.png"):1==this._getState?(this.sureBtn.visible=!0,this.sureBtn.label="领取",this.sureBtn.skin="common/btn_tongyong_6.png",x.thisPlay(this._btnClip)):2==this._getState&&(this.sureBtn.visible=!1,this.receivedImg.visible=!0)},l.prototype.showRank=function(){var t;this._rankList=a.SprintRankModel.instance.rankList;var e=new Array;null!=this._rankList[this._typeWin]&&(e=this._rankList[this._typeWin][3]);for(var i=null,n=0;n<e.length;n++)e[n][3]===PlayerModel.instance.actorId&&(i=e[n]),1==e[n][0]&&(t=e[n][1]);this.rankingText.text=""+(null===i?"未上榜":i[0]),this.oneNameText.text=""+(t||"虚位以待")},l.prototype.setActivitiTime=function(){if(this._rankList=a.SprintRankModel.instance.rankList,this._rankList[this._typeWin]?this._type=this._rankList[this._typeWin][4]:this._type=2,2==this._type){if(!this.activityText.color)return;return this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.fightingText1.visible=!1,void(this.fightingText.visible=!1)}this.activityText.text=""+CommonUtil.timeStampToHHMMSS(a.SprintRankModel.instance.restTm),a.SprintRankModel.instance.restTm>=GlobalData.serverTime?(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.fightingText1.visible=!1,this.fightingText.visible=!1)},l.prototype.activityHandler=function(){this.activityText.text=""+CommonUtil.timeStampToHHMMSS(a.SprintRankModel.instance.restTm),a.SprintRankModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},l.prototype.sureBtnHandler=function(){if(0==this._getState)if(7===this._typeWin)r.instance.addNotice("战力不足",!0);else{var t=this._rankCfg1[9];WindowManager.instance.openByActionId(t)}else if(1==this._getState){for(var e=this._cfg[7],i=[],n=0,s=.5*e.length;n<s;n++)i.push([e[2*n],e[2*n+1],0,null]);o.canAddItemsByBagIdCount(i)&&a.SprintRankTaskCtrl.instance.getSprintRankRewar()}},l.prototype.showRankBtn=function(){WindowManager.instance.open(191,this._typeWin)},l.prototype.setRankReward=function(){this._rankCfg1=B.instance.getCfgsByGrade(this._typeWin,0),this._rankCfg2=B.instance.getCfgsByGrade(this._typeWin,1),this._rankCfg3=B.instance.getCfgsByGrade(this._typeWin,2),this._rankCfg4=B.instance.getCfgsByGrade(this._typeWin,3);for(var t=this._rankCfg1[5],e=this._rankCfg2[5],i=this._rankCfg3[5],n=this._rankCfg4[5],s=[],o=[],a=[],r=[],l=[this.oneReward1,this.oneReward2,this.oneReward3],h=[this.twoReward1,this.twoReward2,this.twoReward3],c=[this.fourReward1,this.fourReward2,this.fourReward3],p=[this.elevenReward1,this.elevenReward2,this.elevenReward3],u=0;u<.5*t.length;u++)s.push([t[2*u],t[2*u+1],0,null]);for(u=0;u<.5*e.length;u++)o.push([e[2*u],e[2*u+1],0,null]);for(u=0;u<.5*i.length;u++)a.push([i[2*u],i[2*u+1],0,null]);for(u=0;u<.5*n.length;u++)r.push([n[2*u],n[2*u+1],0,null]);var d=s.length,y=o.length,g=a.length,f=r.length;for(u=0;u<3;u++)u<d?(l[u].visible=!0,l[u].dataSource=s[u]):l[u].visible=!1,u<y?(h[u].visible=!0,h[u].dataSource=o[u]):h[u].visible=!1,u<g?(c[u].visible=!0,c[u].dataSource=a[u]):c[u].visible=!1,u<f?(p[u].visible=!0,p[u].dataSource=r[u]):p[u].visible=!1;this.onefightingText.text="上榜战力条件："+this._rankCfg1[4],this.twoFightingText.text="上榜战力条件："+this._rankCfg2[4],this.fourFightingText.text="上榜战力条件："+this._rankCfg3[4],this.elevenFightingText.text="上榜战力条件："+this._rankCfg4[4];var _=this._rankCfg1[7],m=this._rankCfg1[6],v=this._rankCfg1[11],b=this._rankCfg1[12];if(x.thisStop(this._prizeEffect),this.rewardShowItem.stopTween(),2==_&&x.thisPlay(this._prizeEffect),this.observationItem.setRot(),this.rewardShowItem.showRewardObj(m,_,v),this.observationItem.data=[[this.rewardShowItem._modelClip,Math.round(m/1e3)]],b){var T=[];for(u=0;u<b.length;u++)T[u]={id:b[u],type:this._typeWin};this._list.datas=T;var I=this._list.datas.length,C=100*(I=3<I?3:I)+(I-1)*this._list.spaceX;this._list.x=(this.getWayBox.width-C)/2}},l.prototype.initializeList=function(){this._list=new n,this._list.width=300,this._list.height=120,this._list.hCount=3,this._list.spaceX=0,this._list.itemRender=a.SprintRankGetWayItem,this._list.x=10,this._list.y=37,this.getWayBox.addChild(this._list)},l.prototype.initializePrizeEffect=function(){this._prizeEffect=x.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._prizeEffect,4),this._prizeEffect.pos(-58,280,!0),this._prizeEffect.scale(2,2,!0),this._prizeEffect.visible=!1},l.prototype.creatEffect=function(){this._btnClip=x.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-9),this._btnClip.scale(1,1),x.thisStop(this._btnClip)},l.prototype.changeView=function(){a.SprintRankModel.instance.curType&&this._isChange&&a.SprintRankModel.instance.curType!=this._typeWin&&(GlobalData.dispatcher.event("ROTARYTABLE_SOARING_SHOWRANK"),this._isChange=!1)},s=l,a.SprintRankBasePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),i=e.SprintRankBasePanel,__extends(s,i),s.prototype.preinitialize=function(){i.prototype.preinitialize.call(this),this._typeWin=4},n=s,e.SprintRankXianYiPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),i=e.SprintRankBasePanel,__extends(s,i),s.prototype.preinitialize=function(){i.prototype.preinitialize.call(this),this._typeWin=1},n=s,e.SprintRankXianQiPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),i=e.SprintRankBasePanel,__extends(s,i),s.prototype.preinitialize=function(){i.prototype.preinitialize.call(this),this._typeWin=2},n=s,e.SprintRankLingChongPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),i=e.SprintRankBasePanel,__extends(s,i),s.prototype.preinitialize=function(){i.prototype.preinitialize.call(this),this._typeWin=5},n=s,e.SprintRankFaBaoPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),i=e.SprintRankBasePanel,__extends(s,i),s.prototype.preinitialize=function(){i.prototype.preinitialize.call(this),this._typeWin=3},n=s,e.SprintRankShenBingPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),i=e.SprintRankBasePanel,__extends(s,i),s.prototype.preinitialize=function(){i.prototype.preinitialize.call(this),this._typeWin=7},n=s,e.SprintRankFightPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),i=e.SprintRankBasePanel,__extends(s,i),s.prototype.preinitialize=function(){i.prototype.preinitialize.call(this),this._typeWin=6},n=s,e.SprintRankEquipmentPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.rankNum=0,t.rankid=0,t}e=t.sprint_rank||(t.sprint_rank={}),n=ui.ThreeWorldsRankItemUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameTxt.y=35,this.nameTxt.x=200,this.damageTxt.x=400,this.damageTxt.y=36},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._updateView()},o.prototype.setData=function(t){t[2]?(t=t,this.rankNum=t[0],this.rankTxt.visible=!1,1===this.rankNum?this.rankImg.skin="common/zs_tongyong_7.png":2===this.rankNum?this.rankImg.skin="common/zs_tongyong_8.png":3===this.rankNum?this.rankImg.skin="common/zs_tongyong_9.png":(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.visible=!0,this.rankTxt.text=this.rankNum.toString()),this.damageTxt.text=""+t[2],this.nameTxt.text=t[1]):(this.nameTxt.text="虚位以待...",this.damageTxt.text="",this.rankTxt.visible=!1,this.rankid=t[0],1==this.rankid?this.rankImg.skin="common/zs_tongyong_7.png":2==this.rankid?this.rankImg.skin="common/zs_tongyong_8.png":3==this.rankid?this.rankImg.skin="common/zs_tongyong_9.png":(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.visible=!0,this.rankTxt.text=this.rankid.toString()))},o.prototype._updateView=function(){},s=o,e.SprintRankItem=s}(modules=modules||{}),function(d){var y,i,u,t;function e(){this._funcIds=[125,132,133,134,135,136,137],this.funcIdsByCuyType=[0,125,132,133,134,135,136,137],this._openState=0,this._type=0,this._restTm=0,this._firstName="",this._cuyType=0,this._rankList=new Array,this._rankListByObjId=new Array,this._LiShiNodeListByObjRank=new Array,this._LiShiNodeListByObjid=new Array,this._LiShiparam=0,this._LiShiparamTime=0,this._biJiaoMC=0,this._IsShouCiLiShiPaiHang=!1,this._biLiNum=d.config.BlendCfg.instance.getCfgById(56007)[1][0]}y=d.sprint_rank||(d.sprint_rank={}),i=d.funcOpen.FuncOpenModel,u=d.config.SprintRankCfg,Object.defineProperty(e,"instance",{get:function(){return this._instance=this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.getInfo=function(t){this._openState=t[0];var e=this._cuyType===t[1];this._cuyType=t[1];var i=t[2],n=!1;if(i&&0!=d.sprint_rank.SprintRankModel.instance._biJiaoMC)for(var s=0;s<i.length;s++)if((p=i[s])&&(u=p[0])==this._cuyType){var o=this.getInfoByRank(this._cuyType,d.sprint_rank.SprintRankModel.instance._biJiaoMC);if(o){var a=this.getInfoByRankDate(this._cuyType,d.sprint_rank.SprintRankModel.instance._biJiaoMC,p[3]);if(a&&o[2]&&a[2]&&o[2]!=a[2])if(this.myOne()&&this.isTwo()){var r=this.getInfoByRank(this._cuyType,2),l=this.getInfoByRank(this._cuyType,1);if(r&&l){var h=r[2],c=l[2];if((c-h)/c<=this._biLiNum){n=!0;break}}}else if(this.MyTwo()){n=!0;break}}else console.log("名次：  "+d.sprint_rank.SprintRankModel.instance._biJiaoMC+"没人  刷新")}if(i)for(s=0;s<i.length;s++){var p,u=(p=i[s])[0];this._rankList[u]=p}n&&GlobalData.dispatcher.event("SOARING_RANK_CHANG",[!1,!1]),GlobalData.dispatcher.event("SPRINT_RANK_UPDATE"),e||GlobalData.dispatcher.event("SPRINT_RANK_TYPE_CHANGE"),y.SprintRankCtrl.instance.setActionOpen(),this.setSprintType(this._cuyType)},e.prototype.updateInfo=function(t){console.log("更新开服冲榜数据..................",t,GlobalData.serverTime),this._openState=t[0];var e=this._cuyType===t[1];this._cuyType=t[1],this._restTm=t[2]+GlobalData.serverTime,this._firstName=t[3],GlobalData.dispatcher.event("SPRINT_RANK_UPDATE"),e||GlobalData.dispatcher.event("SPRINT_RANK_TYPE_CHANGE"),y.SprintRankCtrl.instance.setActionOpen(),this.setSprintType(this._cuyType)},e.prototype.GetSprintRankBeforeReply=function(t){var e=t[3];if(this._LiShiparam=t[1],this._LiShiparamTime=t[2],e&&0<e.length){this._LiShiNodeListByObjRank.length=0,this._LiShiNodeListByObjRank=new Array,this._LiShiNodeListByObjid.length=0,this._LiShiNodeListByObjid=new Array;for(var i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[3];this._LiShiNodeListByObjRank[s]=n,this._LiShiNodeListByObjid[o]=n}WindowManager.instance.open(397,0)}},Object.defineProperty(e.prototype,"openState",{get:function(){return this._openState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstName",{get:function(){return this._firstName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curType",{get:function(){return this._cuyType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rankList",{get:function(){return this._rankList},enumerable:!0,configurable:!0}),e.prototype.getNowCuyTypeIsOpen=function(){var t=this.funcIdsByCuyType[d.sprint_rank.SprintRankTaskModel.instance.curType];return!!t&&d.funcOpen.FuncOpenModel.instance.getFuncIsOpen(t)},e.prototype.setSprintType=function(t){if(i.instance.getFuncNeedShow(138))for(var e=0;e<this._funcIds.length;e++)i.instance.setActionOpen(this._funcIds[e],t==e+1?1:2);else for(e=0;e<this._funcIds.length;e++)i.instance.setActionOpen(this._funcIds[e],2)},e.prototype.myOne=function(){var t=this.getInfoById(this._cuyType,d.player.PlayerModel.instance.actorId);return t&&1==t[0]},e.prototype.MyTwo=function(){var t=this.getInfoById(this._cuyType,d.player.PlayerModel.instance.actorId);return t&&2==t[0]},e.prototype.isTwo=function(){return!!this.getInfoByRank(this._cuyType,2)},e.prototype.getInfoById=function(t,e){var i=this._rankList[t];if(i){var n=i[3];if(n)for(var s=0;s<n.length;s++){var o=n[s];if(o&&e==o[3])return o}}return null},e.prototype.getInfoByRank=function(t,e){var i=this._rankList[t];if(i){var n=i[3];if(n)for(var s=0;s<n.length;s++){var o=n[s];if(o&&e==o[0])return o}}return null},e.prototype.getInfoByRankDate=function(t,e,i){if(i){var n=i;if(n)for(var s=0;s<n.length;s++){var o=n[s];if(o&&e==o[0])return o}}return null},e.prototype.getTipsInfo=function(){var t,e=this.getInfoById(this._cuyType,d.player.PlayerModel.instance.actorId),i="";if(e){var n=0;d.sprint_rank.SprintRankTaskModel.instance.taskList[this._cuyType]&&(n=d.sprint_rank.SprintRankTaskModel.instance.taskList[this._cuyType][5]);var s=e[0],o=u.instance.getGradeByRank(s);if(1==s){var a=0;if(h=2)if(c=this.getInfoByRank(this._cuyType,h))a=(a=n-c[2])<0?0:a+1;else{var r=u.instance.getGradeByRank(h);(l=u.instance.getCfgsByGrade(this._cuyType,r))&&(a=n-l[4])}h=h||0,a=a<0?0:a,this._biJiaoMC=h,t="第二名还差<span style='color:#ff3e3e'>"+a+"</span>战力将超过你"}else{if(r=o-1,a=0,h=u.instance.getMaxMingCiByGrade(this._cuyType,r)){var l=u.instance.getCfgsByGrade(this._cuyType,r);(c=this.getInfoByRank(this._cuyType,h))?a=(a=c[2]-n)<0?0:a+1:l&&(a=l[4]-n),l&&(i=l[15])}h=h||0,t="您还差<span style='color:#168a17'>"+(a=a<0?0:a)+"</span>战力超过第<span style='color:#168a17'>"+(this._biJiaoMC=h)+"</span>名"}}else{var h;if(n=0,d.sprint_rank.SprintRankTaskModel.instance.taskList[this._cuyType]&&(n=d.sprint_rank.SprintRankTaskModel.instance.taskList[this._cuyType][5]),a=0,h=20){r=u.instance.getGradeByRank(h),l=u.instance.getCfgsByGrade(this._cuyType,r);var c=this.getInfoByRank(this._cuyType,h),p=l[4];l&&(a=n<p?p-n:c?(a=c[2]-n)<0?0:a+1:p-n,i=l[15])}h=h||0,t="您还差<span style='color:#168a17'>"+(a=a<0?0:a)+"</span>战力超过第<span style='color:#168a17'>"+(this._biJiaoMC=h)+"</span>名"}return[t,i]},t=e,y.SprintRankModel=t}(modules=modules||{}),function(h){var t,c,e;function i(){this.sprintRankRP=[],this._isFristOpen=!0,this.openState=0,this._curType=0,this._taskList=new Array,this.sprintRankRP.push("sprintRankXianQiRP","sprintRankLingChongRP","sprintRankShenBingRP","sprintRankXianYiRP","sprintRankFaBaoRP","sprintRankEquipmentRP","sprintRankFighitingRP")}t=h.sprint_rank||(h.sprint_rank={}),c=h.redPoint.RedPointCtrl,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getInfo=function(t){this.openState=t[0],this._curType=t[1];var e=t[2],i=!1;if(this._taskList=new Array,e)for(var n=0;n<e.length;n++){var s=e[n],o=s[0];this._taskList[o]=s}this._taskList[this._curType]&&(1==this._taskList[this._curType][2]&&(i=!0),GlobalData.dispatcher.event("SPRINT_RANK_TASK_UPDATE"),c.instance.setRPProperty("sprintRankRP",i),c.instance.setRPProperty("sprintRankXianQiRP",i&&1==this._curType),c.instance.setRPProperty("sprintRankLingChongRP",i&&2==this._curType),c.instance.setRPProperty("sprintRankShenBingRP",i&&3==this._curType),c.instance.setRPProperty("sprintRankXianYiRP",i&&4==this._curType),c.instance.setRPProperty("sprintRankFaBaoRP",i&&5==this._curType),c.instance.setRPProperty("sprintRankEquipmentRP",i&&6==this._curType),c.instance.setRPProperty("sprintRankFighitingRP",i&&7==this._curType))},i.prototype.updateInfo=function(t){this.openState=t[0],this._curType!=t[1]&&GlobalData.dispatcher.event("SPRINT_RANK_HUODONG_CHANG"),this._curType=t[1];var e=t[2],i=!1,n=!1;if(e)for(var s=0;s<e.length;s++)if((l=(r=e[s])[0])==h.sprint_rank.SprintRankModel.instance.curType&&this._taskList[h.sprint_rank.SprintRankModel.instance.curType]){var o=this._taskList[h.sprint_rank.SprintRankModel.instance.curType][5],a=r[5];o&&a&&(h.sprint_rank.SprintRankModel.instance.myOne()||o!=a&&(n=!0))}if(this._taskList=new Array,e)for(s=0;s<e.length;s++){var r,l=(r=e[s])[0];this._taskList[l]=r}n&&GlobalData.dispatcher.event("SOARING_RANK_CHANG",[!0,!1]),this._taskList[this._curType]&&(1==this._taskList[this._curType][2]&&(i=!0),GlobalData.dispatcher.event("SPRINT_RANK_TASK_UPDATE"),c.instance.setRPProperty("sprintRankRP",i),c.instance.setRPProperty("sprintRankXianQiRP",i&&1==this._curType),c.instance.setRPProperty("sprintRankLingChongRP",i&&2==this._curType),c.instance.setRPProperty("sprintRankShenBingRP",i&&3==this._curType),c.instance.setRPProperty("sprintRankXianYiRP",i&&4==this._curType),c.instance.setRPProperty("sprintRankFaBaoRP",i&&5==this._curType),c.instance.setRPProperty("sprintRankEquipmentRP",i&&6==this._curType),c.instance.setRPProperty("sprintRankFighitingRP",i&&7==this._curType))},Object.defineProperty(i.prototype,"curType",{get:function(){return this._curType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"taskList",{get:function(){return this._taskList},enumerable:!0,configurable:!0}),e=i,t.SprintRankTaskModel=e}(modules=modules||{}),function(t){var e,i,n,s,h,o,c,a,r,l;function p(){var t=i.call(this)||this;return t.curType=0,t._type=0,t._rankName=[],t._rankName.push("","仙器排行","灵宠排行","神兵排行","仙翼排行","仙法排行","装备排行","战力排行"),t}e=t.mission||(t.mission={}),n=ui.ThreeWorldsRankUI,s=t.common.CustomList,h=t.sprint_rank.SprintRankModel,o=t.sprint_rank.SprintRankItem,c=t.sprint_rank.SprintRankTaskModel,a=t.sprint_rank.SprintRankCtrl,r=t.sprint_rank.SprintRankTaskCtrl,i=n,__extends(p,i),p.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},p.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new s,this._list.scrollDir=1,this._list.hCount=1,this._list.spaceY=4,this._list.itemRender=o,this._list.width=530,this._list.height=550,this._list.pos(68,184,!0),this.addChild(this._list),this.titleTxt.text="",this.bgImg.height=this.height=864,this.okBtn.destroy(),this.awardTxt.text=""},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close)},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),r.instance.getSprintRankInfo(),a.instance.getSprintRankAllInfo(),this.awardTxt.text="战力"},p.prototype.setOpenParam=function(t){this._type=t,i.prototype.setOpenParam.call(this,t),this.updateRank(this._type)},p.prototype.updateRank=function(t){var e=this._rankName[t];e=e||"排行",this.titleTxt.text=""+e;var i=c.instance.taskList,n=0;i[t]&&(n=i[t][5]);var s,o=h.instance.rankList;this.curType=h.instance.curType,s=o[t]?o[t][3]:[];for(var a=[],r=null,l=0;l<20;l++)a[l]=[l+1,null,null,null];for(l=0;l<s.length;l++)s[l][3]===PlayerModel.instance.actorId&&(r=s[l]),a[s[l][0]-1]=s[l];this._list.datas=a,this.myRankTxt.text="我的排名："+(null===r?"未上榜":r[0]),this.myDamageTxt.text="我的战力："+(null===r?n:r[2])},l=p,e.SprintRankAlert=l}(modules=modules||{}),function(t){var c,e,i,n,s,r,l,o,h,p,u,a;function d(){var t=e.call(this)||this;return t.getState=0,t._curProgress=0,t._maxProgress=0,t.currSelectIndex=1,t}c=t.gushen||(t.gushen={}),i=ui.GushenViewUI,n=t.common.CustomList,s=t.common.CustomClip,r=t.notice.SystemNoticeManager,l=t.config.SkillCfg,o=t.redPoint.RedPointCtrl,h=t.config.SkillPureCfg,p=t.config.GuShenCfg,u=t.config.GuShenTaskCfg,e=i,__extends(d,e),d.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},d.prototype.initialize=function(){e.prototype.initialize.call(this),this.creatEffect(),this._list=new n,this._list.scrollDir=1,this._list.itemRender=c.GushenItem,this._list.vCount=7,this._list.hCount=1,this._list.width=640,this._list.height=687,this._list.x=0,this._list.y=0,this._list.spaceY=10,this.itemPanel.addChild(this._list),this.centerX=this.centerY=0,this.gushenBtns=[this.gushenBtn1,this.gushenBtn2,this.gushenBtn3,this.gushenBtn4,this.gushenBtn5],this.gushenText=[this.titleText1,this.titleText2,this.titleText3,this.titleText4,this.titleText5],this.gushenImage=[this.iconImg1,this.iconImg2,this.iconImg3,this.iconImg4,this.iconImg5],this.gsImage=[this.gushenImage1,this.gushenImage2,this.gushenImage3,this.gushenImage4,this.gushenImage5]},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler);for(var t=0;t<this.gushenBtns.length;t++)this.onAutoClick(this.gushenBtns[t],this,this.setItem,[t+1]);this.onAutoGlobalEvt("GUSHEN",this,this.updateView),this.regAutoRP(this.dotImg1,["gushengrade1RP"]),this.regAutoRP(this.dotImg2,["gushengrade2RP"]),this.regAutoRP(this.dotImg3,["gushengrade3RP"]),this.regAutoRP(this.dotImg4,["gushengrade4RP"]),this.regAutoRP(this.dotImg5,["gushengrade5RP"])},d.prototype.shuaxinUI=function(){for(var t=0;t<this.gushenBtns.length;t++){var e=c.GuShenModel.instance.nodeList;this._gushenArr=p.instance.getCfgBytype(t+1),this.gushenText[t].text=""+this._gushenArr[3],this._secretId=this._gushenArr[4];var i=h.instance.getCfgById(CommonUtil.getSkillPureIdById(this._secretId));this.gushenImage[t].skin="assets/icon/item/"+i[6]+".png",this.gushenImage[t].gray=!0;for(var n=0;n<e.length;n++)if(e[n]&&e[n][0]==t+1){this.gushenImage[t].gray=!1;break}}},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.indexByTask(),o.instance.getRPProperty("gushengrade1RP")?this.currSelectIndex=1:o.instance.getRPProperty("gushengrade2RP")?this.currSelectIndex=2:o.instance.getRPProperty("gushengrade3RP")?this.currSelectIndex=3:o.instance.getRPProperty("gushengrade4RP")?this.currSelectIndex=4:o.instance.getRPProperty("gushengrade5RP")&&(this.currSelectIndex=5),this.updateView()},d.prototype.indexByTask=function(){if(c.GuShenModel.instance.nodeList&&0<c.GuShenModel.instance.nodeList.length){for(var t=c.GuShenModel.instance.nodeList,e=[],i=0;i<t.length;i++)t[i][4]<t[i][5]&&e.push(t[i][0]);e.sort(),this.currSelectIndex=e[0]}},d.prototype.updateView=function(){this.setItem(this.currSelectIndex),this.shuaxinUI()},d.prototype.setItem=function(t){if(t||(this.currSelectIndex,t=1),this._gushenArr=p.instance.getCfgBytype(t),this._gushenArr){for(var e=c.GuShenModel.instance.nodeList,i=!1,n=0;n<e.length;n++)e[n]&&e[n][0]==t&&(i=!0,this.getState=e[n][2],this._maxProgress=e[n][5],this._curProgress=e[n][4]);if(i){for(n=0;n<this.gsImage.length;n++)this.gsImage[n].visible=t-1==n;this.currSelectIndex=t,this._gushenArr=p.instance.getCfgBytype(t),this._secretId=this._gushenArr[4];var s=u.instance.getCfgBytype(t);s.sort(this.sortFunc.bind(this)),this._list.datas=s;var o=l.instance.getCfgById(this._secretId),a=h.instance.getCfgById(CommonUtil.getSkillPureIdById(this._secretId));this.secretText.text=""+CommonUtil.stringFormat(a[5],o[2]),this.secretItemText.text=""+a[1],this.secretImg.skin="assets/icon/item/"+a[6]+".png",this._curProgress>=this._maxProgress?(this._curProgress=this._maxProgress,this.scheduleText.color="#16ba17"):this.scheduleText.color="#FF3e3e",this.scheduleText.text="("+this._curProgress+"/"+this._maxProgress+")",this.updateBtnState()}else r.instance.addNotice(""+this._gushenArr[5],!0)}},d.prototype.updateBtnState=function(){s.thisStop(this._btnClip),0!==this.getState?(this.sureBtn.label="可激活",1==this.getState?(s.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.receivedImg.visible=!1):(this.sureBtn.visible=!1,this.receivedImg.visible=!0)):(this.sureBtn.label="激活",this.sureBtn.visible=!0,this.receivedImg.visible=!1)},d.prototype.sureBtnHandler=function(){0==this.getState&&r.instance.addNotice("未达到条件！",!0),1==this.getState&&c.GushenCtrl.instance.getGushenActiveReward([this.currSelectIndex])},d.prototype.creatEffect=function(){this._btnClip=s.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-10),this._btnClip.scale(.8,.8)},d.prototype.sortFunc=function(t,e){for(var i=c.GuShenModel.instance.nodeList,n=[],s={},o=0;o<i.length;o++)this.currSelectIndex==i[o][0]&&(n=i[o][3]);for(o=0;o<n.length;o++)s[n[o][0]]=n[o];var a=t[0],r=e[0],l=s[a]?s[a][1]:0,h=s[r]?s[r][1]:0;return(l=0===l?1:1===l?0:l)===(h=0===h?1:1===h?0:h)?a-r:l-h},a=d,c.GuShenPanel=a}(modules=modules||{}),function(t){var e,i,n;function s(){}e=t.zhizun||(t.zhizun={}),i=t.customData.CustomDataCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.updateZhizunCardInfo=function(t){this.state<t[0]&&i.instance.setCustomizeData([[2,[1]],[1,[1]],[0,[1]],[36,[1]]]),this.state=t[0],this.count=t[1],this.restDay=t[2],this.startTime=t[3],GlobalData.dispatcher.event("ZHIZUN_UPDATE")},n=s,e.ZhizunModel=n}(modules=modules||{}),function(l){var s,i,h,e,t,c,n,o,a,r;function p(){return i.call(this)||this}s=l.zhizun||(l.zhizun={}),h=l.config.PrivilegeCfg,e=l.common.CommonUtil,t=ui.ZhizunViewUI,c=l.config.RechargeCfg,n=l.config.DesignationCfg,o=l.common.CustomSlide,a=l.common.CustomClip,i=t,__extends(p,i),p.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0;var t=l.config.BlendCfg.instance.getCfgById(43001)[1][0];this.fightMsz.value=t.toString(),e.setHTMLPro(this.txt,"#c9abec","SimHei",26),this.txt.style.lineHeight=50,this.txt.style.wordWrap=!1,this.initTxt(),this._slide=new o(this.con,this.txt),this._slide.initState(),this._btnClip=a.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.btn.addChild(this._btnClip),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this._tempState=!1,void 0===s.ZhizunModel.instance.state&&(l.loading.LoadingCtrl.instance.showLoading(351),GlobalData.dispatcher.once("ZHIZUN_UPDATE",this,function(){l.loading.LoadingCtrl.instance.hideLoading(351)}))},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.updateView),this.onAutoClick(this.btn,this,this.btnHandler)},p.prototype.offEvt=function(){this._slide.removeListeners(),i.prototype.offEvt.call(this)},p.prototype.destroy=function(){this._slide=this.destroyElement(this._slide),this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnClip.play(),s.ZhizunCtrl.instance.getZhizunCardInfo(),this.updateView();var t=n.instance.getCfgById(30101);if(t){var e=t[2];this.titleImg.skin="assets/icon/ui/designation/"+e+".png"}},p.prototype.updateView=function(){if(null!=s.ZhizunModel.instance.restDay)if(s.ZhizunModel.instance.state){var t=s.ZhizunModel.instance.restDay,e=l.config.BlendCfg.instance.getCfgById(10951)[1][0],i=s.ZhizunModel.instance.count;this.dayTxt.text=0<i?"特权剩余1个月零"+t+"天!":"特权剩余"+t+"天!",t<=e&&!i?(this._isCan=!0,this.btn.visible=this._btnClip.visible=!0,this.goneImg.visible=!1,this.btn.label="续费"):(this._isCan=!1,this.btn.visible=this._btnClip.visible=!1,this.goneImg.visible=!0,this.buyTip.visible=!1,this.btn.label="已激活")}else{this._isCan=!0,this.btn.visible=!0,this._btnClip.visible=!0,this.goneImg.visible=!1,this.dayTxt.text="早买早享受~~特权持续30天!";var n=c.instance.getRecharCfgByIndex(2);this.btn.label=n[2]+"元即享"}},p.prototype.initTxt=function(){var t=c.instance.getRecharCfgByIndex(2)[6][0];this.xyTxt.text=t[1].toString();for(var e=h.instance.getCfgByType(201),i=e[1],n=0,s=i.length;n<s;n++)if(1===i[n][0]){this.goldTxt.text=i[n][2].toString();break}var o=e[6],a="";for(n=0,s=o.length;n<s;n++){var r=n==o.length-1?"":"<br/>";a+='<img src="zhizun/image_common_txtbs1.png"/>&nbsp;'+o[n]+r}l.redBag.RedBagUtils.getActionopen()&&(a+='<br/><img src="zhizun/image_common_txtbs1.png"/>&nbsp;可发一次<span style="color:#0ecf09">'+l.redBag.RedBagUtils.getIdAndCondByMoney(1007,2)+"元宝</span>红包"),this.txt.innerHTML=a,this.centerYHtml()},p.prototype.centerYHtml=function(){for(var t=0,e=0,i=this.txt.numChildren;e<i;e++){var n=this.txt.getChildAt(e);n instanceof Laya.HTMLImageElement&&(n.y=15+t*this.txt.style.lineHeight,t++)}},p.prototype.btnHandler=function(){if(void 0!==s.ZhizunModel.instance.state)if(this._isCan){var t=c.instance.getRecharCfgByIndex(2);l.common.PlatParams.askPay(t[0],t[2])}else e.noticeError(25121)},r=p,s.ZhizunPanel=r}(modules=modules||{}),function(e){var r,i,t,l,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}r=e.treasure||(e.treasure={}),t=e.common.CustomList,l=e.config.TreasureCfg,n=e.common.CommonUtil,s=e.config.BlendCfg,i=r.TreasureBasePanel,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=3,this._showItem=[this.v.item1,this.v.item2],this._rewardList=new t,this._rewardList.itemRender=r.TreasureRuneItem,this._rewardList.hCount=4,this._rewardList.spaceY=0,this._rewardList.spaceX=45,this._rewardList.width=535,this._rewardList.height=276,this._rewardList.x=50,this._rewardList.y=0,this.v.itemPanel.addChild(this._rewardList),this.regGuideSpr(89,this.v.oneBtn),this.regGuideSpr(82,this._buttonList.items[0]),this.regGuideSpr(85,this._buttonList.items[1]),this.regGuideSpr(83,this._buttonList.items[2]),this.regGuideSpr(84,this._buttonList.items[3]),this.setBar()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._rewardList.getListH>this._rewardList.height&&Laya.timer.frameLoop(1,this,this.updateShowItemList),this.v.titleTxt.text="符文寻宝"},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._buttonList.selectedData=null!=t?99999===t?e.treasure.TreasureModel.instance.isMianFeiEnter()[1]:t:3,this.selectHandler()},a.prototype.selectHandler=function(){var t=this._buttonList.selectedData;if((r.TreasureModel._grade=t)!=this._type)this.fun1(t);else{for(var e=l.instance.getItemShow(this._type)[0][3],i=0;i<this._showItem.length;i++){var n=[e[i],0,0,null];this._showItem[i].dataSource=n,this._showItem[i]._qualityBg.visible=!1,this._showItem[i].isbtnClipIsPlayer=!1}for(var s=new Array,o=2;o<e.length;o++){var a=e[o];a&&(n=[a,0,0,null],s.push(n))}this._rewardList.datas=s,this.updateCost()}},a.prototype.updateShowItemList=function(){this._rewardList.scrollPos,this._rewardList.scrollPos+=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this._rewardList.scrollPos>=this._rewardList.getListH-this._rewardList.height&&(this._rewardList.scrollPos=0)},a.prototype.probabilityHandler=function(){var t="";t+=s.instance.getCfgById(66002)[2],WindowManager.instance.open(443,["概率公示",t,695])},a.prototype.TipsHandler=function(){n.alertHelp(20067)},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateShowItemList)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._rewardList=this.destroyElement(this._rewardList),i.prototype.destroy.call(this,t)},o=a,r.TreasureRunePanel=o}(modules=modules||{}),function(t){var e,i;function n(){this._Items=new Array,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._typeGardeMingCi={},this._dayCfg=[];var t=GlobalData.getConfig("feisheng_rank");this._dayCfg=t;for(var e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e],s=n[0],o=n[2];this._tab[s]||(this._tab[s]=[]),this._tab[s].push(t[e]);for(var a=n[12][0],r=n[12][1],l=a;l<=r;l++)this._Items[l]=o;this._typeGardeMingCi[s]||(this._typeGardeMingCi[s]=new Array),this._typeGardeMingCi[s][o]=r}},n.prototype.getCfgsByGrade=function(t,e){return this._tab[t][e]},n.prototype.getCfgsByDay=function(t,e,i){for(var n=0;n<this._dayCfg.length;n++){var s=this._dayCfg[n][0],o=this._dayCfg[n][2],a=this._dayCfg[n][17][0],r=this._dayCfg[n][17][1];if(t===s&&e===o&&a<=i&&i<=r)return this._dayCfg[n]}},n.prototype.getMaxMingCiByGrade=function(t,e){return this._typeGardeMingCi[t][e]},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getGradeByRank=function(t){return this._Items[t]},i=n,e.SoaringRankCfg=i}(modules=modules||{}),function(o){var t,e,i,a,n;function s(){return e.call(this)||this}t=o.soaring_rank||(o.soaring_rank={}),i=o.common.CustomList,a=o.config.SoaringRankCfg,e=ui.SoaringRankJieZhiAlertUI,__extends(s,e),s.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",24),this._list=new i,this._list.scrollDir=1,this._list.hCount=1,this._list.spaceY=4,this._list.itemRender=t.SoaringRankJieZhiItem,this._list.width=530,this._list.height=336,this.borderImg.addChild(this._list),this._list.pos(16,15)},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._type=t,0==this._type?(this._param=o.sprint_rank.SprintRankModel.instance._LiShiparam,localStorage.setItem("SprintRankIsShowAndTime",""+GlobalData.serverTime)):(this._param=o.soaring_rank.SoaringRankModel.instance._LiShiparam,localStorage.setItem("SoaringRankIsShowAndTime",""+GlobalData.serverTime)),this.showUI()},s.prototype.showUI=function(){var t,e;if(0==this._type)e=this.getNameByType(this._param),this.myRankNumText.text="未上榜",(i=o.sprint_rank.SprintRankModel.instance._LiShiNodeListByObjid[o.player.PlayerModel.instance.actorId])&&(this.myRankNumText.text="第"+i[0]+"名"),t=this.timeStampToDate(o.sprint_rank.SprintRankModel.instance._LiShiparamTime);else{var i,n=a.instance.getCfgsByGrade(this._param,0)[0];e=this.getNameByTypeFeiShen(n),this.myRankNumText.text="未上榜",(i=o.soaring_rank.SoaringRankModel.instance._LiShiNodeListByObjid[o.player.PlayerModel.instance.actorId])&&(this.myRankNumText.text="第"+i[0]+"名"),t=this.timeStampToDate(o.soaring_rank.SoaringRankModel.instance._LiShiparamTime)}this.StatementHTML.innerHTML=t+"<span style='color:#168a17'>"+e+"</span>排名已截止",this._allMingCiArr=new Array;for(var s=1;s<=10;s++)this._allMingCiArr.push([s,this._type]);this._allMingCiArr&&(this._list.datas=this._allMingCiArr)},s.prototype.getNameByType=function(t){var e="";switch(t){case 1:e="仙器榜";break;case 2:e="灵宠榜";break;case 3:e="神兵榜";break;case 4:e="仙翼榜";break;case 5:e="仙法榜";break;case 6:e="装备榜";break;case 7:e="战力榜"}return e},s.prototype.getNameByTypeFeiShen=function(t){var e="";switch(t){case 1:e="仙器培养飞升榜";break;case 2:e="灵宠培养飞升榜";break;case 3:e="神兵升级飞升榜";break;case 4:e="仙翼升级飞升榜";break;case 5:e="物华天宝飞升榜";break;case 6:e="时装升级飞升榜";break;case 7:e="天珠升级飞升榜"}return e},s.prototype.timeStampToDate=function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,s=e.getDate(),o=""+n;n<10&&(o="0"+n);var a=""+s;return s<10&&(a="0"+s),i+"年"+o+"月"+a+"日"},n=s,t.SoaringRankJieZhiAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.sprint_rank||(t.sprint_rank={}),i=t.soaring_rank.SoaringRankJieZhiAlert,__extends(s,i),n=s,e.SprintRankJieZhiAlert=n}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.resBack||(t.resBack={}),n=ui.ResBackViewUI,s=t.common.BtnGroup,o=t.common.CustomList,a=t.config.RetrieveCfg,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerY=this.centerX=0,this._btnGroup=new s,this._btnGroup.setBtns(this.btnGroup_1,this.btnGroup_2),this._list_1=o.create("v",48,130,625,856,e.ResBackItem1),this.addChild(this._list_1),this._list_2=o.create("v",48,130,625,856,e.ResBackItem2),this.addChild(this._list_2),this.desTxt.text="SVIP"+a.instance.halfVip+"可享受半价找回优惠"},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.selectView),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoGlobalEvt("RETRIEVE_LILIAN_UPDATE",this,this.lilianUpdate),this.onAutoGlobalEvt("RETRIEVE_RES_UPDATE",this,this.resUpdate)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0},l.prototype.selectView=function(){0==this._btnGroup.selectedIndex?(this._list_1.visible=!0,this._list_2.visible=!1,this.resUpdate()):(this._list_1.visible=!1,this._list_2.visible=!0,this.lilianUpdate())},l.prototype.lilianUpdate=function(){if(1===this._btnGroup.selectedIndex){var t=e.ResBackModel.instance.lilianArr;this._list_2.datas=t,this.noImg.visible=this.noTxt.visible=!(0<t.length)}},l.prototype.resUpdate=function(){if(0===this._btnGroup.selectedIndex){var t=e.ResBackModel.instance.resArr;this._list_1.datas=t,this.noImg.visible=this.noTxt.visible=!(0<t.length)}},l.prototype.ruleBtnHandler=function(){CommonUtil.alertHelp(20065)},l.prototype.close=function(){i.prototype.close.call(this),e.ResBackCtrl.instance.closeRP()},l.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),this._list_1=this.destroyElement(this._list_1),this._list_2=this.destroyElement(this._list_2),i.prototype.destroy.call(this)},r=l,e.ResBackPanel=r}(modules=modules||{}),function(t){var e,i,n,o,s,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.resBack||(t.resBack={}),n=ui.ResBackAlertUI,o=t.config.RetrieveCfg,s=t.common.NumInputCtrl,a=t.notice.SystemNoticeManager,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this._inputCtrl=new s(this.inputTxt,this.addBtn,this.lessBtn)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoEvt(this.inputTxt,"change",this,this.contentChangeHandler),this.onAutoEvt(this.inputTxt,"input",this,this.inputTxtHandler),this.onAutoClick(this.minBtn,this,this.minBtnHandler),this.onAutoClick(this.maxBtn,this,this.maxBtnHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoClick(this.lessBtn,this,this.lessBtnHandler),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.contentChangeHandler),this._inputCtrl.addListeners()},l.prototype.offEvt=function(){this._inputCtrl.removeListeners(),i.prototype.offEvt.call(this)},l.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._info=t},l.prototype.onOpened=function(){i.prototype.onOpened.call(this);var t,e=this._info[1];t=1===this._info[0]?o.instance.getResCfgById(e):o.instance.getLilianCfgById(e),this.titleTxt.text=t[1],this.update(),this.contentChangeHandler()},l.prototype.contentChangeHandler=function(){var t=this._inputCtrl.value,e=this._info[0],i=this._info[1],n=this._info[4]+1;this._needCount=o.instance.getTotalPriceByTypeIdCount(e,i,n,t);var s=CommonUtil.getPropCountById(90140001);this.numTxt.text=""+this._needCount,this.numTxt.color=s>=this._needCount?"#2d1a1a":"#ff3e3e"},l.prototype.minBtnHandler=function(){this.lessBtnHandler()&&(this._inputCtrl.value=1)},l.prototype.maxBtnHandler=function(){this.addBtnHandler()&&(this._inputCtrl.value=this._inputCtrl.max)},l.prototype.addBtnHandler=function(){return this._inputCtrl.value!==this._inputCtrl.max||(a.instance.addNotice("已达最大次数",!0),!1)},l.prototype.lessBtnHandler=function(){return this._inputCtrl.value!==this._inputCtrl.min||(a.instance.addNotice("已达最小次数",!0),!1)},l.prototype.inputTxtHandler=function(){parseInt(this.inputTxt.text)>=this._inputCtrl.max&&a.instance.addNotice("已达最大次数",!0)},l.prototype.btnHandler=function(){if(CommonUtil.getPropCountById(90140001)>=this._needCount){var t=this._info.concat();t[2]=this._inputCtrl.value,e.ResBackCtrl.instance.getrieveRes([t]),this.close()}else CommonUtil.goldNotEnoughAlert()},l.prototype.update=function(){var t=this._info[2];this._inputCtrl.max=t,this.desTxt.text="可找回"+t+"次",this._inputCtrl.min=1,this._inputCtrl.value=1},r=l,e.ResBackAlert=r}(modules=modules||{}),function(t){var o,e,i,a,r,n,l,s,h,c,p;function u(){var t=e.call(this)||this;return t.pitchOn=-1,t}o=t.vip_buy||(t.vip_buy={}),i=t.common.BtnGroup,a=t.bag.BagUtil,r=t.config.VipBuyCfg,n=t.common.CustomClip,l=t.common.CommonUtil,s=t.player.PlayerModel,h=t.config.RechargeCfg,c=t.vip.VipModel,e=ui.OneBuyUI,__extends(u,e),u.prototype.initialize=function(){e.prototype.initialize.call(this),this.secKillTopBtnArr=new i,this.secKillTopBtnArr.setBtns(this.secKillTopBtn1,this.secKillTopBtn2,this.secKillTopBtn3),this.DayBase=[this.secBaseBtn1,this.secBaseBtn2,this.secBaseBtn3,this.secBaseBtn4,this.secBaseBtn5],this.secKillTopBtnArr.selectedIndex=0,this.openDay=s.instance.openDay,this.stall=0,this.titleTxt.text="SVIP秒杀",this.playerSvipLevel=c.instance.vipLevel,this.creatEffect(),this.btnSelectsPosXArr=[81,272,460],this.priceImg.y=366,this.panelBG1.skin="vipBuy/image_vipms_02.png",this.panelBG2.skin="vipBuy/image_vipms_02.png",this.Grade1.skin="vipBuy/txt_vipms_svip4lb_02.png",this.Grade2.skin="vipBuy/txt_vipms_svip6lb_02.png",this.Grade3.skin="vipBuy/txt_vipms_svip8lb_02.png"},u.prototype.onEvt=function(){var t=this;e.prototype.onEvt.call(this),this.onAutoGlobalEvt("VIP_BUY_UPDATE",this,this.updateFuc),this.onAutoGlobalEvt("VIP_UPDATE",this,this.updateFuc),this.onAutoClick(this.l_secKillBtn,this,this.l_secKillHandler),this.onAutoClick(this.sureBtn1,this,this.getReward),this.onAutoEvt(this.secKillTopBtnArr,"change",this,this.selectSecKillHandler),this.onAutoClick(this.lastBtn,this,function(){if(0<t.pitchOn)t.pitchOn--,t.secKillTopBtnArr.selectedIndex=t.pitchOn,t.selectSecKillHandler();else{if(0!=t.pitchOn)return;t.pitchOn=2,t.secKillTopBtnArr.selectedIndex=t.pitchOn,t.selectSecKillHandler()}}),this.onAutoClick(this.nextBtn,this,function(){if(t.pitchOn<2)t.pitchOn++,t.secKillTopBtnArr.selectedIndex=t.pitchOn,t.selectSecKillHandler();else{if(2!=t.pitchOn)return;t.pitchOn=0,t.secKillTopBtnArr.selectedIndex=t.pitchOn,t.selectSecKillHandler()}})},u.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.pitchOn=0,this.l_secKillBtn.disabled=!1,this.secKillTopBtnArr.selectedIndex=0,this.openDay=s.instance.openDay,this.playerSvipLevel=c.instance.vipLevel;var t=r.instance.getArrDateByOpenDayAndGrade(63,this.openDay);this.tipsTxt.color="#0ecf09",this.tipsTxt.text="SVIP"+t[1]+"每天可"+h.instance.getRecharCfgByIndex(60)[3]+"打包购买全部礼包,仙玉不计入每日获取上限",this.l_secKillBtn.label=h.instance.getRecharCfgByIndex(60)[2]+"元秒杀",this.updateLSKB(),this.setPitchOn(),this.setTopBtnRP()},u.prototype.setTopBtnRP=function(){var t=o.VipBuyModel.instance.awardArr[0],e=this.bubbleSort(t);if(this.topBtnRP1.visible=!1,this.topBtnRP2.visible=!1,this.topBtnRP3.visible=!1,e)for(var i=0;i<e.length;i++)61==e[i][0]&&1==e[i][1]&&(this.topBtnRP1.visible=!0),62==e[i][0]&&1==e[i][1]&&(this.topBtnRP2.visible=!0),63==e[i][0]&&1==e[i][1]&&(this.topBtnRP3.visible=!0)},u.prototype.setPitchOn=function(){for(var t=o.VipBuyModel.instance.awardArr[0],e=this.bubbleSort(t),i=0;i<e.length;i++)if(61==e[i][0]){if(1==e[i][1])return this.pitchOn=0,void(this.secKillTopBtnArr.selectedIndex=0);if(2==e[i][1])if(e[i+1]){if(2!=e[i+1][1])return this.pitchOn=1,void(this.secKillTopBtnArr.selectedIndex=1);if(!e[i+2])return this.pitchOn=2,void(this.secKillTopBtnArr.selectedIndex=2);if(2!=e[i+2][1])return this.pitchOn=2,void(this.secKillTopBtnArr.selectedIndex=2)}else this.pitchOn=1,this.secKillTopBtnArr.selectedIndex=1}else if(62==e[i][0]){if(1==e[i][1])return this.pitchOn=1,void(this.secKillTopBtnArr.selectedIndex=1);if(2==e[i][1]){if(!e[i+1])return this.pitchOn=2,void(this.secKillTopBtnArr.selectedIndex=2);if(2!=e[i+1][1])return this.pitchOn=2,void(this.secKillTopBtnArr.selectedIndex=2)}}else if(63==e[i][0]){if(1==e[i][1])return this.pitchOn=2,void(this.secKillTopBtnArr.selectedIndex=2);if(2==e[i][1]){if(!e[i-1])return this.pitchOn=1,void(this.secKillTopBtnArr.selectedIndex=1);if(2!=e[i-1][1])return this.pitchOn=1,void(this.secKillTopBtnArr.selectedIndex=1);if(!e[i-2])return this.pitchOn=0,void(this.secKillTopBtnArr.selectedIndex=0);if(2!=e[i-2][1])return this.pitchOn=0,void(this.secKillTopBtnArr.selectedIndex=0)}}},u.prototype.updateFuc=function(){this.openDay=s.instance.openDay,this.playerSvipLevel=c.instance.vipLevel,this.setPitchOn(),this.awardPanel(),this.setTopBtnRP()},u.prototype.bubbleSort=function(t){for(var e=0;e<t.length-1;e++)for(var i=0;i<t.length-1-e;i++)if(t[i][0]>t[i+1][0]){var n=t[i];t[i]=t[i+1],t[i+1]=n}return t},u.prototype.updateLSKB=function(){var t=o.VipBuyModel.instance.awardArr[0],e=this.bubbleSort(t);this.l_secKillBtn.disabled=!1,this._btnClip4.play(),this._btnClip4.visible=!0;for(var i=0;i<t.length;i++)if(e&&!(62!=e[i][0]&&63!=e[i][0]||1!=e[i][1]&&2!=e[i][1]))return this.l_secKillBtn.disabled=!0,void(this._btnClip4.visible=!1)},u.prototype.selectSecKillHandler=function(){this.pitchOn=this.secKillTopBtnArr.selectedIndex,this.pitchOn1.x=this.btnSelectsPosXArr[this.pitchOn],this.awardPanel()},u.prototype.awardPanel=function(){switch(this.updateLSKB(),this.pitchOn){case 0:this.grade=61,this.priceImg.skin="vipBuy/txt_vipms_svip4lb_01.png",this.awardModel.skin="one_buy/icon_yyms_bx1.png",this.showItem(),this.setBtn();break;case 1:this.grade=62,this.priceImg.skin="vipBuy/txt_vipms_svip6lb_01.png",this.awardModel.skin="one_buy/icon_yyms_bx2.png",this.showItem(),this.setBtn();break;case 2:this.grade=63,this.priceImg.skin="vipBuy/txt_vipms_svip8lb_01.png",this.awardModel.skin="one_buy/icon_yyms_bx3.png",this.showItem(),this.setBtn()}},u.prototype.setBtn=function(){var t=o.VipBuyModel.instance.state;!o.VipBuyModel.instance.getAwardStateByGrade(this.grade)&&t?(this.sureBtn1.visible=!0,this._btnClip1.visible=!1,this.received1.visible=!1,this.sureBtn1.label=h.instance.getRecharCfgByIndex(this.grade)[2]+"元秒杀"):1==o.VipBuyModel.instance.getAwardStateByGrade(this.grade)&&t?(this._btnClip1.play(),this.sureBtn1.visible=!0,this._btnClip1.visible=!0,this.received1.visible=!1,this.sureBtn1.label="领取"):2==o.VipBuyModel.instance.getAwardStateByGrade(this.grade)&&t&&(this.sureBtn1.visible=!1,this._btnClip1.visible=!1,this.received1.visible=!0,this.received1.skin="common/txt_commmon_ylq.png"),t?(this.l_secKillBtn.visible=!0,this.endImg.visible=!1):(this.sureBtn1.visible=!1,this._btnClip1.visible=!1,this.received1.visible=!0,this.received1.skin="common/txt_commmon_yjies.png",this.l_secKillBtn.visible=!1,this.endImg.visible=!0)},u.prototype.showItem=function(){var t=[];this.vipBuyCfg=r.instance.getArrDateByOpenDayAndGrade(this.grade,this.openDay);var e=this.vipBuyCfg[3];this.originalCost.text="原价"+this.vipBuyCfg[4]+"元";for(var i=0;i<e.length;i++)t.push(e[i][0]);this.stall=this.vipBuyCfg[0];for(var n=0;n<this.DayBase.length;n++)(a=this.DayBase[n]).visible=!1;var s=t.length,o=(this.width-(100*s+5*(s-1)))/2;for(i=0;i<this.DayBase.length;i++){var a=this.DayBase[i];i<s?(a.visible=!0,a.x=o,a.nameVisible=!0,a.dataSource=[e[i][0],e[i][1],0,null],l.getItemQualityById(e[i][0]),o+=105):a.visible=!1}},u.prototype.creatEffect=function(){this._btnClip1=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.sureBtn1.addChild(this._btnClip1),this._btnClip1.pos(-5,-10),this._btnClip4=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.l_secKillBtn.addChild(this._btnClip4),this._btnClip4.pos(-5,-10)},u.prototype.l_secKillHandler=function(){var t=r.instance.getArrDateByOpenDayAndGrade(63,this.openDay);this.playerSvipLevel>=t[1]?(PlatParams.askPay(60,h.instance.getRecharCfgByIndex(60)[2]),this.awardPanel()):this.vipAlert(t[1])},u.prototype.getReward=function(){if(1==o.VipBuyModel.instance.getAwardStateByGrade(this.grade)){for(var t=this.vipBuyCfg[3],e=[],i=0,n=t.length;i<n;i++){var s=t[i];e.push([s[0],s[1],0,null])}a.canAddItemsByBagIdCount(e)&&o.VipBuyCtrl.instance.getVipSeckillRewadRewad(this.stall)}else this.playerSvipLevel>=this.vipBuyCfg[1]?(PlatParams.askPay(this.vipBuyCfg[0],h.instance.getRecharCfgByIndex(this.vipBuyCfg[0])[2]),this.awardPanel()):this.vipAlert(this.vipBuyCfg[1])},u.prototype.vipAlert=function(t){l.alert("温馨提示","购买礼包需要SVIP"+t+",是否前往提升SVIP?",[Handler.create(this,l.gotoVIP)])},u.prototype.close=function(){e.prototype.close.call(this),this._btnClip1.stop(),Laya.timer.clearAll(this)},p=u,o.VipBuyPanel=p}(modules=modules||{}),function(s){var o,e,t,i,a,r,n,l,h;function c(){return e.call(this)||this}o=s.openChallenge||(s.openChallenge={}),t=ui.openChallengeUI,i=s.common.SimpleList,a=s.common.AvatarClip,r=s.config.ExteriorCfg,n=s.common.CustomClip,l=s.dungeon.DungeonCtrl,e=t,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(o.OpenChallengeItem,638,110,1,1,0,4),this._list.width=638,this._list.height=354,this._list.pos(40,672,!0),this.addChild(this._list),CommonUtil.setHTMLPro(this.timeHtml,"#ffffff","SimHei",26),CommonUtil.setHTMLPro(this.tipHtml,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.powerHtml,"#ffffff","SimHei",26),this._titleName=["十方罗刹","十二祖巫","二十诸天"],this.createEffect()},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.challengeBtn,this,this.challengeHandler),this.onAutoGlobalEvt("PLAYER_UPDATE_FIGHT",this,this.updatePower),this.onAutoGlobalEvt("OPEN_CHALLENGE_CHOOSE",this,this.setBtnState),this.onAutoGlobalEvt("OPEN_CHALLENGE_INFO_UPDATE",this,this.updateInfo1),this.onAutoGlobalEvt("OPEN_CHALLENGE_CHANGE_STATE",this,this.updateInfo2)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._isMove&&this._clipTween.start(),this.updatePower(),this.updateInfo2(),this.updateInfo1(),this.setAwardListPos()},c.prototype.destroy=function(t){void 0===t&&(t=!0),this._modelClip=this.destroyElement(this._modelClip),this._imageClip=this.destroyElement(this._imageClip),this._btnClip=this.destroyElement(this._btnClip),this._list=this.destroyElement(this._list),this.observationItem=this.destroyElement(this.observationItem),this._clipTween&&(this._clipTween.stop(),this._clipTween=null),e.prototype.destroy.call(this,t)},c.prototype.close=function(){e.prototype.close.call(this),n.thisStop(this._btnClip),this._clipTween&&this._clipTween.stop(),Laya.timer.clear(this,this.loopHandler)},c.prototype.updateInfo1=function(){this.setBtnState(),this.setViewShow()},c.prototype.updateInfo2=function(){this.setTitle(),this.setChooseLevel(),this.initializeClip(),this.showActivityTime(),this.setAwardList()},c.prototype.initializeClip=function(){this._modelClip=this.destroyElement(this._modelClip),this._imageClip=this.destroyElement(this._imageClip);var t=s.config.SceneCopyOpenBossCfg.instance.getClipIdByLevel(o.OpenChallengeModel.instance.realLevel),e=t[0];if(this._clipType=t[1],this._isMove=1===t[2],0===this._clipType){var i=Math.round(e/1e3),n=r.instance.getCfgById(e);this._modelClip=a.create(1024,1024,1024),this._modelClip.anchorX=this._modelClip.anchorX=.5,this.addChildAt(this._modelClip,2),this._modelClip.reset(e),11===i?(this._modelClip.pos(370,-30,!0),this._modelClip.setActionType("show"),this._modelClip.avatarY=n[9],this._modelClip.avatarX=n[8],this._modelClip.avatarScale=n[10]?n[10]:1):(this._modelClip.pos(360,56,!0),this._modelClip.avatarScale=2),this._modelClip.avatarRotationX=n[6],this._modelClip.avatarRotationY=n[7]}else 1===this._clipType?(n=r.instance.getCfgById(e),this._modelClip=a.create(1024,1024,1024),this._modelClip.anchorX=this._modelClip.anchorX=.5,this.addChildAt(this._modelClip,2),this._modelClip.pos(354,-40,!0),this._modelClip.reset(0,0,0,0,e),this._modelClip.avatarRotationX=n[6],this._modelClip.avatarRotationY=n[7],this._modelClip.avatarScale=n[10]?n[10]:1):2===this._clipType?(this._imageClip=new Laya.Image("assets/icon/ui/open_challenge/"+e+".png"),this._imageClip.anchorX=this._imageClip.anchorX=.5,this.addChild(this._imageClip),this._imageClip.pos(360,220,!0),this._imageClip.scale(1.2,1.2,!0)):3===this._clipType&&(this._imageClip=new Laya.Image("assets/icon/ui/open_challenge/"+e+".jpg"),this._imageClip.anchorX=this._imageClip.anchorX=.5,this.addChild(this._imageClip),this._imageClip.pos(358,260,!0),this._imageClip.scale(1,1,!0));0===this._clipType||1===this._clipType?this._isMove&&(this._clipTween=TweenJS.create(this._modelClip).to({y:this._modelClip.y-20},1e3).start().yoyo(!0).repeat(99999999)):this._isMove&&(this._clipTween=TweenJS.create(this._imageClip).to({y:this._imageClip.y-20},1e3).start().yoyo(!0).repeat(99999999)),this.observationItem.data=[[this._modelClip,Math.round(e/1e3)]]},c.prototype.setAwardList=function(){this._awardArr=s.config.SceneCopyOpenBossCfg.instance.getAllAward(o.OpenChallengeModel.instance.minLevel,o.OpenChallengeModel.instance.maxLevel);for(var t=[],e=0;e<this._awardArr.length;e++){var i=CommonUtil.formatItemData(this._awardArr[e]);t.push([e,i])}this._list.datas=t},c.prototype.showActivityTime=function(){this._time=o.OpenChallengeModel.instance.endTime,this._time>GlobalData.serverTime?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(Laya.timer.clear(this,this.loopHandler),this.timeHtml.innerHTML="<span style='color: #ff3e3e'>活动已结束</span>")},c.prototype.loopHandler=function(){this._time>GlobalData.serverTime?this.timeHtml.innerHTML="活动时间：<span style='color: #50ff28'>"+s.common.CommonUtil.timeStampDDHHMMToHHMMSS(this._time)+" </span>":(this.timeHtml.innerHTML="<span style='color: #ff3e3e'>活动已结束</span>",Laya.timer.clear(this,this.loopHandler))},c.prototype.challengeHandler=function(){o.OpenChallengeModel.instance.chooseLevel==o.OpenChallengeModel.instance.curLevel?l.instance.reqEnterScene(s.config.SceneCopyOpenBossCfg.instance.mapId,o.OpenChallengeModel.instance.realLevel):o.OpenChallengeModel.instance.chooseLevel>o.OpenChallengeModel.instance.curLevel&&s.notice.SystemNoticeManager.instance.addNotice("请先通关前一关",!1)},c.prototype.setBtnState=function(){this.finishImg.visible=!1,n.thisStop(this._btnClip),o.OpenChallengeModel.instance.chooseLevel>=o.OpenChallengeModel.instance.curLevel?(this.challengeBtn.disabled=!1,o.OpenChallengeModel.instance.chooseLevel==o.OpenChallengeModel.instance.curLevel&&o.OpenChallengeModel.instance.isSetRP&&n.thisPlay(this._btnClip),this.challengeBtn.visible=!0):(this.challengeBtn.disabled=!0,o.OpenChallengeModel.instance.curLevel>o.OpenChallengeModel.instance.levelCount&&(this.challengeBtn.visible=!1,this.finishImg.visible=!0))},c.prototype.createEffect=function(){this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.challengeBtn.x-5,this.challengeBtn.y-10),n.thisStop(this._btnClip)},c.prototype.setAwardListPos=function(){var t=114*(o.OpenChallengeModel.instance.curLevel-1);this._list.scrollTo(t)},c.prototype.setTitle=function(){var t=s.config.SceneCopyOpenBossCfg.instance.getAtivityGrade(o.OpenChallengeModel.instance.minLevel);this.titleName.text=this._titleName[t-1]},c.prototype.setChooseLevel=function(){o.OpenChallengeModel.instance.curLevel>o.OpenChallengeModel.instance.levelCount?o.OpenChallengeModel.instance.chooseLevel=o.OpenChallengeModel.instance.levelCount:o.OpenChallengeModel.instance.chooseLevel=o.OpenChallengeModel.instance.curLevel},c.prototype.setViewShow=function(){this._rewardGrade!=s.config.SceneCopyOpenBossCfg.instance.getRewardGradeByLevel(o.OpenChallengeModel.instance.realLevel)&&this.setViewShowHandler()},c.prototype.setViewShowHandler=function(){var t=o.OpenChallengeModel.instance.realLevel;this._rewardGrade=s.config.SceneCopyOpenBossCfg.instance.getRewardGradeByLevel(t),this.box.dataSource=[s.config.SceneCopyOpenBossCfg.instance.getItemIdByLevel(t),1,0,null],this.tipHtml.innerHTML=s.config.SceneCopyOpenBossCfg.instance.getDescribeByLevel(t),this.initializeClip()},c.prototype.updatePower=function(){this.powerHtml.innerHTML="我的战力：<span style='color: #50ff28'>"+CommonUtil.bigNumToString(PlayerModel.instance.fight)+"</span>"},h=c,o.OpenChallengePanel=h}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.yybPrivilege||(t.yybPrivilege={}),n=ui.YybPrivilegeAlertUI,s=t.config.BlendCfg,o=t.common.CustomClip,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this);var t=s.instance.getCfgById(89001)[1];this.item1.dataSource=[t[0],t[1],0,null],this.item2.dataSource=[t[2],t[3],0,null],this.item3.dataSource=[t[4],t[5],0,null],this.item4.dataSource=[t[6],t[7],0,null],this.item5.dataSource=[t[8],t[9],0,null],this._btnClip=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.getBtn.x-5,this.getBtn.y-8),this._btnClip.visible=!1},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getHandler),this.onAutoGlobalEvt("YYB_PRIVILEGE_STATE_UPDATE",this,this.updateState)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateState()},r.prototype.getHandler=function(){if(0===this._btnState)try{PlatParams.openYYB(),Laya.timer.once(500,this,this.setBtnState,[1])}catch(t){return void GlobalData.recordError("openYYB error",t)}else 2===this._btnState&&e.YybPrivilegeCtrl.instance.getStartPrivilegeAward()},r.prototype.updateState=function(){e.YybPrivilegeModel.instance.state?this.setBtnState(3):this.setBtnState(0)},r.prototype.setBtnState=function(t){0===(this._btnState=t)?(this.getBtn.label="前往启动领取",this.getBtn.disabled=!1,o.thisStop(this._btnClip)):1===t?(this.getBtn.label="立即领取",this.getBtn.disabled=!0,Laya.timer.once(4300,this,this.setBtnState,[2]),o.thisStop(this._btnClip)):2===t?(this.getBtn.label="立即领取",this.getBtn.disabled=!1,o.thisPlay(this._btnClip)):3===t&&(this.getBtn.label="明日再来",this.getBtn.disabled=!1,o.thisStop(this._btnClip))},r.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},a=r,e.YybPrivilegeAlert=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("leiting_cuilian")},n.prototype.getCfgByIDAndLevelAndType=function(t,e,i){for(var n=this._cfg.length,s=0;s<n;s++)if(this._cfg[s][0]===t&&this._cfg[s][3]===e&&this._cfg[s][2]===i)return this._cfg[s];return null},i=n,e.LeitingCuilianCfg=i}(modules=modules||{}),function(l){var I,i,e,C,x,B,h,t;function n(){return i.call(this)||this}I=l.thunderbolt_equip||(l.thunderbolt_equip={}),e=l.common.BtnGroup,C=l.config.LeitingCuilianCfg,x=l.config.AttrItemCfg,B=l.bag.BagModel,h=l.notice.SystemNoticeManager,i=ui.ThunderboltEquipQuenchingViewUI,__extends(n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.baseImgArr=[this.baseImg1,this.baseImg2,this.baseImg3,this.baseImg4,this.baseImg5,this.baseImg6,this.baseImg7,this.baseImg8,this.baseImg9,this.baseImg10],this.iconArr=[this.icon1,this.icon2,this.icon3,this.icon4,this.icon5,this.icon6,this.icon7,this.icon8,this.icon9,this.icon10],this.rpArr=[this.rp1,this.rp2,this.rp3,this.rp4,this.rp5,this.rp6,this.rp7,this.rp8,this.rp9,this.rp10],this.levelMsc=[this.levelMsc1,this.levelMsc2,this.levelMsc3,this.levelMsc4,this.levelMsc5,this.levelMsc6,this.levelMsc7,this.levelMsc8,this.levelMsc9,this.levelMsc10],this.stageIcon=[this.stageIcon1,this.stageIcon2,this.stageIcon3,this.stageIcon4,this.stageIcon5],this.equipNameArr=[this.equipName1,this.equipName2,this.equipName3,this.equipName4,this.equipName5,this.equipName6,this.equipName7,this.equipName8,this.equipName9,this.equipName10],this.frontMsc=[this.frontMsc1,this.frontMsc2,this.frontMsc3,this.frontMsc4,this.frontMsc5,this.frontMsc6],this.arrows=[this.arrows1,this.arrows2,this.arrows3,this.arrows4,this.arrows5,this.arrows6],this.rearMsc=[this.rearMsc1,this.rearMsc2,this.rearMsc3,this.rearMsc4,this.rearMsc5,this.rearMsc6],this.stageRP_Arr=[this.stageRP1,this.stageRP2,this.stageRP3,this.stageRP4,this.stageRP5],this.select_Arr=[this.select1,this.select2,this.select3,this.select4,this.select5],this.stageLvArr=[this.stageLv1,this.stageLv2,this.stageLv3,this.stageLv4,this.stageLv5];for(var t=0;t<10;t++)this.iconArr[t].mouseEnabled=!1,this.iconArr[t].mouseThrough=!0,this.rpArr[t].visible=!1;for(t=0;t<5;t++)this.stageIcon[t].alpha=0,this.stageRP_Arr[t].visible=!1,this.select_Arr[t].visible=!1;for(t=0;t<6;t++)this.frontMsc[t].visible=this.arrows[t].visible=this.rearMsc[t].visible=!1;for(this._tab=new e,this._tab.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1),this._tab.setBtns(this.baseImg1,this.baseImg2,this.baseImg3,this.baseImg4,this.baseImg5,this.baseImg6,this.baseImg7,this.baseImg8,this.baseImg9,this.baseImg10),this._tab.selectedIndex=0,this._stageTab=new e,this._stageTab.setBtns(this.stageIcon1,this.stageIcon2,this.stageIcon3,this.stageIcon4,this.stageIcon5),this._stageTab.canSelectHandler=Handler.create(this,this.stageTabSelectHandler,null,!1),this._stageTab.selectedIndex=0,this._btns=new e,this._btns.setBtns(this.btnGroup_1,this.btnGroup_2),this.selectedImg.x=this.iconArr[this._tab.selectedIndex].x-2,this.selectedImg.y=this.iconArr[this._tab.selectedIndex].y-6,this.suitRP.visible=this.quenchingRP.visible=!1,this._equipClip=[],this.creatEquipEffect(this.modelIcon,!1),t=0;t<10;t++)this.creatEquipEffect(this.iconArr[t],!0);this.creatEffect()},n.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._openParm=t},n.prototype.destroy=function(){this.baseImgArr=this.destroyElement(this.baseImgArr),this.iconArr=this.destroyElement(this.iconArr),this.rpArr=this.destroyElement(this.rpArr),this.levelMsc=this.destroyElement(this.levelMsc),this.stageIcon=this.destroyElement(this.stageIcon),this.equipNameArr=this.destroyElement(this.equipNameArr),this.frontMsc=this.destroyElement(this.frontMsc),this.arrows=this.destroyElement(this.arrows),this.rearMsc=this.destroyElement(this.rearMsc),this.stageRP_Arr=this.destroyElement(this.stageRP_Arr),this.select_Arr=this.destroyElement(this.select_Arr),this._tab=this.destroyElement(this._tab),this._btnClip=this.destroyElement(this._btnClip),this._equipClip=this.destroyElement(this._equipClip),this._btns=this.destroyElement(this._btns),this._stageTab=this.destroyElement(this._stageTab),this.stageLvArr=this.destroyElement(this.stageLvArr),this._modeBoxTween&&(this._modeBoxTween.stop(),this._modeBoxTween=null),i.prototype.destroy.call(this)},n.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("THUNDERBOLT_EQUIP_QUENCHING_UPDATA",this,this.updataView),this.onAutoEvt(this._tab,"change",this,this.tabChangeHandler),this.onAutoEvt(this._stageTab,"change",this,this.stageTabChangeHandler),this.onAutoClick(this.getBtn,this,this.getHandler),this.onAutoClick(this.quenchingBtn,this,this.quenchingHanlder),this.onAutoClick(this.rageBtn,this,this.rageHanlder),this.onAutoEvt(this._btns,"change",this,this.btnsChangeHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.bagUpdataView)},n.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btns.selectedIndex=0,this.updataIndex()||(this._tab.selectedIndex=0,this._stageTab.selectedIndex=0);for(var t=0,e=this._equipClip.length;t<e;t++)this._equipClip[t].play();this.modelBox.y=266,this._modeBoxTween?this._modeBoxTween.to({y:this.modelBox.y-10},1e3).yoyo(!0).repeat(99999999):this._modeBoxTween=TweenJS.create(this.modelBox).to({y:this.modelBox.y-10},1e3).yoyo(!0).repeat(99999999),this._modeBoxTween.start(),this.updataView()},n.prototype.updataIndex=function(){var t=I.ThunderboltEquipModel.instance.data;if(t){for(var e=t[0][0],i=0;i<e.length;i++)for(var n=e[i][2],s=0,o=n.length;s<o;s++){var a=C.instance.getCfgByIDAndLevelAndType(e[i][0],n[s][1],n[s][0]),r=C.instance.getCfgByIDAndLevelAndType(e[i][0],0,n[s][0])[7],l=a[5],h=B.instance.getItemCountById(l[0]);if(I.ThunderboltEquipModel.instance.comparativeLogic(n,r)&&h>=l[1])return this._tab.selectedIndex=i,this._stageTab.selectedIndex=s,!0}return!1}},n.prototype.stageTabSelectHandler=function(t){var e=I.ThunderboltEquipModel.instance.data;if(e){for(var i=e[0][0],n=null,s=0;s<i.length;s++)if(i[s][0]===this._tab.selectedIndex+1){n=i[s];break}var o=n[2],a=I.ThunderboltEquipModel.instance.getType(o,t),r=C.instance.getCfgByIDAndLevelAndType(n[0],0,a[0])[7];return!(1!=a[0]&&!I.ThunderboltEquipModel.instance.comparativeLogic(o,r)&&(h.instance.addNotice(this.getStr(r),!0),1))}},n.prototype.bagUpdataView=function(t){this.updataView()},n.prototype.stageTabChangeHandler=function(){this.updataView()},n.prototype.updataView=function(){for(var t=0;t<6;t++)this.frontMsc[t].visible=this.arrows[t].visible=this.rearMsc[t].visible=!1;var e=I.ThunderboltEquipModel.instance.data;if(e){var i=e[0][0];for(t=0;t<i.length;t++){for(var n=i[t][2],s=i[t][0]-1,o=0,a=0,r=n.length;a<r;a++)o+=n[a][1];this.levelMsc[s].text=o+"级",this.equipNameArr[s].text=I.ThunderboltEquipModel.instance.getNameUtils(s)}var l=null;for(t=0;t<i.length;t++)if(i[t][0]===this._tab.selectedIndex+1){l=i[t];break}this.modelIcon.skin="assets/others/thunderbolt/ltcl_"+(this._tab.selectedIndex+1)+".png";var h=l[2];for(t=0,r=this.stageLvArr.length;t<r;t++)h[t]?this.stageLvArr[t].text=h[t][1]+"":this.stageLvArr[t].text="0";var c=I.ThunderboltEquipModel.instance.getType(h,this._stageTab.selectedIndex),p=C.instance.getCfgByIDAndLevelAndType(l[0],c[1],c[0]),u=C.instance.getCfgByIDAndLevelAndType(l[0],c[1]+1,c[0]),d=!u,y=p[6];if(d)for(r=y.length,t=0;t<r;t+=2){s=t/2;var g=(v=x.instance.getCfgById(y[t]))[2]?100*this.getAttrValue(l,t)+"%":this.getAttrValue(l,t).toString();this.frontMsc[s].text=v[1]+"+"+g,this.frontMsc[s].visible=!0}else{var f=u[6];if(0<(r=y.length))for(t=0;t<r;t+=2){s=t/2,g=(v=x.instance.getCfgById(y[t]))[2]?100*this.getAttrValue(l,t)+"%":this.getAttrValue(l,t).toString(),this.frontMsc[s].text=v[1]+"+"+g;var _=f[t+1]-y[t+1];this.rearMsc[s].text=v[2]?100*_+"%":_.toString(),this.frontMsc[s].visible=this.arrows[s].visible=this.rearMsc[s].visible=!0}else{var m=f.length;for(t=0;t<m;t+=2){s=t/2;var v=x.instance.getCfgById(f[t]);_=f[t+1],g=v[2]?100*this.getAttrValue(l,t)+"%":this.getAttrValue(l,t).toString(),this.frontMsc[s].text=v[1]+"+"+g,this.rearMsc[s].text=v[2]?100*_+"%":_.toString(),this.frontMsc[s].visible=this.arrows[s].visible=this.rearMsc[s].visible=!0}}}var b=p[5],T=B.instance.getItemCountById(b[0]);for(d||(this.currencyIcon.skin=CommonUtil.getIconById(b[0],!0),this.currencyCount.text=T+"/"+b[1],this.currencyCount.color=T>=b[1]?"#50ff28":"#ff3e3e"),this.maxTxt.visible=d,this.quenchingBtn.visible=!d,this.xiaohaoTxt.visible=this.currencyIcon.visible=this.currencyCount.visible=!d,this.quenchingBtn.label=d?"满级":"淬炼",this._btnClip.stop(),this._btnClip.visible=!1,!d&&T>=b[1]&&(this._btnClip.play(),this._btnClip.visible=!0),this.fight.value=I.ThunderboltEquipModel.instance.getHunderboltEquipQuenchingFight().toString(),t=0;t<5;t++)this.select_Arr[t].visible=!1;this.select_Arr[this._stageTab.selectedIndex].visible=!0,this.setRP()}},n.prototype.canSelectHandler=function(t){return this.selectedImg.x=this.iconArr[t].x-2,this.selectedImg.y=this.iconArr[t].y-6,!0},n.prototype.tabChangeHandler=function(){var t=I.ThunderboltEquipModel.instance.data;if(t){for(var e=t[0][0],i=null,n=0;n<e.length;n++)if(e[n][0]===this._tab.selectedIndex+1){i=e[n];break}for(var s=i[2],o=this._stageTab.selectedIndex=0,a=s.length;o<a;o++){var r=C.instance.getCfgByIDAndLevelAndType(i[0],s[o][1],s[o][0]),l=C.instance.getCfgByIDAndLevelAndType(i[0],0,s[o][0])[7],h=r[5],c=B.instance.getItemCountById(h[0]);if(I.ThunderboltEquipModel.instance.comparativeLogic(s,l)&&c>=h[1]){this._stageTab.selectedIndex=o;break}}this.updataView()}},n.prototype.quenchingHanlder=function(){var t=I.ThunderboltEquipModel.instance.data;if(t){for(var e=t[0][0],i=null,n=0;n<e.length;n++)if(e[n][0]===this._tab.selectedIndex+1){i=e[n];break}var s=I.ThunderboltEquipModel.instance.getType(i[2],this._stageTab.selectedIndex),o=C.instance.getCfgByIDAndLevelAndType(i[0],s[1],s[0]);if(C.instance.getCfgByIDAndLevelAndType(i[0],s[1]+1,s[0])){var a=o[5],r=B.instance.getItemCountById(a[0]);r>=a[1]?I.ThunderboltEquipCtrl.instance.leitingAddCuilianLevel(i[0],s[0]):l.bag.BagUtil.openLackPropAlert(a[0],a[1]-r)}else h.instance.addNotice("当前阶段已满级",!0)}},n.prototype.getHandler=function(){h.instance.addNotice("该功能暂未开放",!0)},n.prototype.rageHanlder=function(){WindowManager.instance.open(946,this._tab.selectedIndex)},n.prototype.btnsChangeHandler=function(){1===this._btns.selectedIndex&&WindowManager.instance.open(943)},n.prototype.setRP=function(){this.suitRP.visible=this.quenchingRP.visible=!1,this.suitRP.visible=I.ThunderboltEquipModel.instance.getSuitRP();var t=I.ThunderboltEquipModel.instance.getQuenchingRPArr();this.quenchingRP.visible=0<t.length;for(var e=this.rpArr.length,i=0;i<e;i++)this.rpArr[i].visible=!1;var n=t.length;for(i=0;i<n;i++)this.rpArr[t[i]-1].visible=!0;for(i=0;i<5;i++)this.stageIcon[i].alpha=0,this.stageRP_Arr[i].visible=!1;var s=I.ThunderboltEquipModel.instance.data;if(s){var o=s[0][0],a=null;for(i=0;i<o.length;i++)if(o[i][0]===this._tab.selectedIndex+1){a=o[i];break}var r=a[2];for(i=0;i<r.length;i++){(0<r[i][1]||0===i)&&(this.stageIcon[i].alpha=1);var l=C.instance.getCfgByIDAndLevelAndType(a[0],r[i][1],r[i][0])[5],h=B.instance.getItemCountById(l[0]),c=C.instance.getCfgByIDAndLevelAndType(a[0],0,r[i][0])[7],p=C.instance.getCfgByIDAndLevelAndType(a[0],r[i][1]+1,r[i][0]),u=I.ThunderboltEquipModel.instance.comparativeLogic(r,c);1===r[i][0]?this.stageRP_Arr[i].visible=p&&h>=l[1]:1<r[i][0]&&u&&(this.stageRP_Arr[i].visible=p&&h>=l[1]),this.stageIcon[i].gray=!1,0===r[i][1]&&0!=i&&(this.stageIcon[i].alpha=u?1:0,this.stageIcon[i].gray=u)}for(i=0;i<5;i++)this.stageLvArr[i].visible=1==this.stageIcon[i].alpha}},n.prototype.creatEquipEffect=function(t,e){var i;i=e?[this.effectBottom1,this.effectTop1]:[this.effectBottom2,this.effctTop2];var n=t.width/300,s=t.height/300,o=CommonUtil.creatEff(i[0],"lt_an",15);o.pos(t.x,t.y),o.scale(n,s,!0),o.play(),o.visible=!0;var a=CommonUtil.creatEff(i[1],"lt_ming",15);a.pos(t.x,t.y),a.scale(n,s,!0),a.play(),a.visible=!0,this._equipClip.push(o),this._equipClip.push(a)},n.prototype.creatEffect=function(){this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.quenchingBtn.x-4,this.quenchingBtn.y-8),this._btnClip.scale(1,1,!0)},n.prototype.close=function(){this._modeBoxTween&&(this._modeBoxTween.stop(),this._modeBoxTween=null),i.prototype.close.call(this)},n.prototype.getStr=function(t){for(var e="",i=0,n=t.length;i<n;i+=2){var s=i===n-2?"":",";e+=I.ThunderboltEquipModel.instance.getStageNameUtils(t[i]-1)+"达到"+t[i+1]+"级"+s}return e+"开启"},n.prototype.getAttrValue=function(t,e){for(var i=0,n=0,s=t[2].length;n<s;n++){var o=t[2][n],a=C.instance.getCfgByIDAndLevelAndType(t[0],o[1],o[0]);!a||a[6].length<e+1||(i+=a[6][e+1])}return i},t=n,I.ThunderboltEquipQuenchingPanel=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("leiting_suit_equip")},n.prototype.getCfgByIDAndLevel=function(t,e){for(var i=this._cfg.length,n=0;n<i;n++)if(this._cfg[n][0]===t&&this._cfg[n][2]===e)return this._cfg[n];return null},i=n,e.LeitingSuitEquipCfg=i}(modules=modules||{}),function(r){var f,s,e,_,m,v,l,t;function i(){return s.call(this)||this}f=r.thunderbolt_equip||(r.thunderbolt_equip={}),e=r.common.BtnGroup,_=r.config.LeitingSuitEquipCfg,m=r.config.AttrItemCfg,v=r.bag.BagModel,l=r.notice.SystemNoticeManager,s=ui.ThunderboltEquipSuitViewUI,__extends(i,s),i.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.iconArr=[this.icon1,this.icon2,this.icon3,this.icon4,this.icon5,this.icon6,this.icon7,this.icon8,this.icon9,this.icon10],this.boxArr=[this.box1,this.box2,this.box3,this.box4,this.box5,this.box6,this.box7,this.box8,this.box9,this.box10],this.levelMscArr=[this.levelMsc1,this.levelMsc2,this.levelMsc3,this.levelMsc4,this.levelMsc5,this.levelMsc6,this.levelMsc7,this.levelMsc8,this.levelMsc9,this.levelMsc10],this.rpArr=[this.rp1,this.rp2,this.rp3,this.rp4,this.rp5,this.rp6,this.rp7,this.rp8,this.rp9,this.rp10],this.equipNameArr=[this.equipName1,this.equipName2,this.equipName3,this.equipName4,this.equipName5,this.equipName6,this.equipName7,this.equipName8,this.equipName9,this.equipName10],this.frontMsc=[this.frontMsc1,this.frontMsc2,this.frontMsc3,this.frontMsc4,this.frontMsc5,this.frontMsc6],this.arrows=[this.arrows1,this.arrows2,this.arrows3,this.arrows4,this.arrows5,this.arrows6],this.rearMsc=[this.rearMsc1,this.rearMsc2,this.rearMsc3,this.rearMsc4,this.rearMsc5,this.rearMsc6],this.parm=400;for(var t=0;t<6;t++)this.frontMsc[t].visible=this.arrows[t].visible=this.rearMsc[t].visible=!1;for(this.posArr=[],this.constPosArr=[],t=0;t<10;t++)this.posArr.push([this.boxArr[t].x,this.boxArr[t].y]),this.constPosArr.push([this.boxArr[t].x,this.boxArr[t].y]),this.rpArr[t].visible=!1;this._equipClip=[],this.creatEffect(),this.creatEquipEffect(this.modelIcon),this._btns=new e,this._btns.setBtns(this.btnGroup_1,this.btnGroup_2),this._modelClipTween=[],this.suitRP.visible=this.quenchingRP.visible=!1,this.seleledIndex=0,this.turnCount=0},i.prototype.destroy=function(){this.iconArr=this.destroyElement(this.iconArr),this.rpArr=this.destroyElement(this.rpArr),this.equipNameArr=this.destroyElement(this.equipNameArr),this.frontMsc=this.destroyElement(this.frontMsc),this.arrows=this.destroyElement(this.arrows),this.rearMsc=this.destroyElement(this.rearMsc),this._btnClip=this.destroyElement(this._btnClip),this._btns=this.destroyElement(this._btns),this.boxArr=this.destroyElement(this.boxArr),this.levelMscArr=this.destroyElement(this.levelMscArr),this._equipClip=this.destroyElement(this._equipClip),this._modeBoxTween&&(this._modeBoxTween.stop(),this._modeBoxTween=null),s.prototype.destroy.call(this)},i.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoGlobalEvt("THUNDERBOLT_EQUIP_SUIT_UPDATA",this,this.updataView),this.onAutoClick(this.activateBtn,this,this.activateHanlder),this.onAutoClick(this.angerBtn,this,this.angerHanlder),this.onAutoClick(this.suitBtn,this,this.suitHanlder),this.onAutoEvt(this._btns,"change",this,this.btnsChangeHandler),this.onAutoClick(this.leftBtn,this,this.turnEffectHanlder,[[!0,this.parm,1]]),this.onAutoClick(this.rightBtn,this,this.turnEffectHanlder,[[!1,this.parm,1]]);for(var t=0;t<10;t++)this.onAutoClick(this.boxArr[t],this,this.seleEffectHanlder,[[t,!0]])},i.prototype.seleEffectHanlder=function(t){var e=t[0],i=t[1];if(!this.isTrue&&e!==this.seleledIndex){for(var n=-1,s=0;s<this.constPosArr.length;s++)if(this.boxArr[e].x===this.constPosArr[s][0]&&this.boxArr[e].y===this.constPosArr[s][1]){n=s;break}-1!==n&&(n<Math.floor(this.boxArr.length/2)?t[1]?this.turnEffectHanlder([!0,this.parm,n]):this.turnNoEffectHanlder([!0,null,n]):i?this.turnEffectHanlder([!1,this.parm,10-n]):this.turnNoEffectHanlder([!1,null,10-n]))}},i.prototype.onOpened=function(){s.prototype.onOpened.call(this);for(var t=0;t<10;t++)this.boxArr[t].x=this.posArr[t][0]=this.constPosArr[t][0],this.boxArr[t].y=this.posArr[t][1]=this.constPosArr[t][1];this.seleledIndex=0,this._btns.selectedIndex=1,this.isTrue=!1;var e=f.ThunderboltEquipModel.instance.getSuitRPArr(),i=0<e.length?e[0]-1:0;this.seleEffectHanlder([i,!1]),t=0;for(var n=this._equipClip.length;t<n;t++)this._equipClip[t].play();this.modelBox.y=228,this._modeBoxTween?this._modeBoxTween.to({y:this.modelBox.y-10},1e3).yoyo(!0).repeat(99999999):this._modeBoxTween=TweenJS.create(this.modelBox).to({y:this.modelBox.y-10},1e3).yoyo(!0).repeat(99999999),this._modeBoxTween.start(),this.updataView()},i.prototype.turnNoEffectHanlder=function(t){if(!this.isTrue){this.isTrue=!0;for(var e=0,i=0;i<10;i++){e=t[0]?0<=i-1?i-1:9:i+1<10?i+1:0;var n=this.posArr[e];if(this.boxArr[i].x=n[0],this.boxArr[i].y=n[1],9===i){t[0]?this.seleledIndex=this.seleledIndex+1<10?this.seleledIndex+1:0:this.seleledIndex=0<=this.seleledIndex-1?this.seleledIndex-1:9;for(var s=0;s<10;s++)this.posArr[s]=[this.boxArr[s].x,this.boxArr[s].y];if(this.turnCount++,this.isTrue=!1,this.turnCount>=t[2])return void(this.turnCount=0);this.turnNoEffectHanlder(t)}}}},i.prototype.turnEffectHanlder=function(n){var s=this;if(!this.isTrue){for(var t=0;t<this._modelClipTween.length;t++)this._modelClipTween[t]&&(this._modelClipTween[t].stop(),this._modelClipTween[t]=null);this._modelClipTween.length=0,this.isTrue=!0;var o=0,e=function(e){o=n[0]?0<=e-1?e-1:9:e+1<10?e+1:0;var i=a.posArr[o],t=TweenJS.create(a.boxArr[e]).to({x:i[0],y:i[1]},n[1]).start().onComplete(function(){if(s.boxArr[e].x=i[0],s.boxArr[e].y=i[1],9===e){n[0]?s.seleledIndex=s.seleledIndex+1<10?s.seleledIndex+1:0:s.seleledIndex=0<=s.seleledIndex-1?s.seleledIndex-1:9;for(var t=0;t<10;t++)s.posArr[t]=[s.boxArr[t].x,s.boxArr[t].y];if(s.turnCount++,s.isTrue=!1,s.turnCount>=n[2])return s.updataView(),void(s.turnCount=0);s.turnEffectHanlder(n)}});a._modelClipTween.push(t)},a=this;for(t=0;t<10;t++)e(t)}},i.prototype.updataView=function(){for(var t=f.ThunderboltEquipModel.instance.data,e=0;e<6;e++)this.frontMsc[e].visible=this.arrows[e].visible=this.rearMsc[e].visible=!1;if(t){var i=t[0][1];for(e=0;e<i.length;e++){var n=i[e][0]-1;this.levelMscArr[n].text=i[e][1].toString(),this.equipNameArr[n].text=f.ThunderboltEquipModel.instance.getNameUtils(n),this.equipNameArr[n].color=n===this.seleledIndex?"#5cd6fd":"#0f81f5"}var s=null;for(e=0;e<i.length;e++)if(i[e][0]===this.seleledIndex+1){s=i[e];break}var o=_.instance.getCfgByIDAndLevel(s[0],s[1]),a=_.instance.getCfgByIDAndLevel(s[0],s[1]+1),r=!a,l=o[5].concat(o[7]);if(r){var h=l.length;for(e=0;e<h;e+=2){n=e/2;var c=(d=m.instance.getCfgById(l[e]))[2]?Math.round(1e4*l[e+1])/100+"%":l[e+1].toString();this.frontMsc[n].text=d[1]+"+"+c,this.frontMsc[n].visible=!0}}else if(0===s[1])for(h=(u=a[5].concat(a[7])).length,e=0;e<h;e+=2){n=e/2,c=(d=m.instance.getCfgById(u[e]))[2]?"0%":"0",this.frontMsc[n].text=d[1]+"+"+c;var p=u[e+1];this.rearMsc[n].text=d[2]?Math.round(1e4*p)/100+"%":p.toString(),this.frontMsc[n].visible=this.arrows[n].visible=this.rearMsc[n].visible=!0}else{var u=a[5].concat(a[7]);for(h=l.length,e=0;e<h;e+=2){var d;n=e/2,c=(d=m.instance.getCfgById(l[e]))[2]?Math.round(1e4*l[e+1])/100+"%":l[e+1].toString(),this.frontMsc[n].text=d[1]+"+"+c,p=u[e+1]-l[e+1],this.rearMsc[n].text=d[2]?Math.round(1e4*p)/100+"%":Math.round(p).toString(),this.frontMsc[n].visible=this.arrows[n].visible=this.rearMsc[n].visible=!0}}var y=o[4],g=v.instance.getItemCountById(y[0]);r?this.activateBtn.label="满级":(this.currencyIcon.skin=CommonUtil.getIconById(y[0],!0),this.currencyCount.text=g+"/"+y[1],this.currencyCount.color=g>=y[1]?"#50ff28":"#ff3e3e",s&&s[1]?this.activateBtn.label="升级":this.activateBtn.label="激活"),this.modelIcon.skin="assets/others/thunderbolt/lttz_"+(this.seleledIndex+1)+".png",this.xiaohaoTxt.visible=this.currencyIcon.visible=this.currencyCount.visible=!r,this.maxTxt.visible=r,this.activateBtn.visible=!r,this._btnClip.stop(),this._btnClip.visible=!1,this.isUp=!1,!r&&g>=y[1]&&(this._btnClip.play(),this._btnClip.visible=!0,this.isUp=!0),this.fight.value=f.ThunderboltEquipModel.instance.getThunderboltEquipSuitFight().toString(),this.setRP()}},i.prototype.activateHanlder=function(){if(this.isTrue)l.instance.addNotice("操作过快",!0);else{var t=f.ThunderboltEquipModel.instance.data;if(t){for(var e=t[0][1],i=null,n=0;n<e.length;n++)if(e[n][0]===this.seleledIndex+1){i=e[n];break}var s=_.instance.getCfgByIDAndLevel(i[0],i[1]);if(_.instance.getCfgByIDAndLevel(i[0],i[1]+1)){var o=s[4],a=v.instance.getItemCountById(o[0]);a>=o[1]?f.ThunderboltEquipCtrl.instance.leitingAddSuitLevel(i[0]):r.bag.BagUtil.openLackPropAlert(o[0],o[1]-a)}else l.instance.addNotice("当前阶段已满级",!0)}}},i.prototype.suitHanlder=function(){WindowManager.instance.open(945)},i.prototype.angerHanlder=function(){WindowManager.instance.open(944)},i.prototype.btnsChangeHandler=function(){0===this._btns.selectedIndex&&WindowManager.instance.open(942)},i.prototype.close=function(){for(var t=0;t<this._modelClipTween.length;t++)this._modelClipTween[t].stop(),this._modelClipTween[t]=null;this._modelClipTween.length=0,this.isTrue=!0,this._modeBoxTween&&(this._modeBoxTween.stop(),this._modeBoxTween=null),s.prototype.close.call(this)},i.prototype.setRP=function(){this.suitRP.visible=this.quenchingRP.visible=!1;var t=f.ThunderboltEquipModel.instance.getSuitRPArr();this.suitRP.visible=0<t.length,this.quenchingRP.visible=f.ThunderboltEquipModel.instance.getQuenchingRP();for(var e=this.rpArr.length,i=0;i<e;i++)this.rpArr[i].visible=!1;var n=t.length;for(i=0;i<n;i++)this.rpArr[t[i]-1].visible=!0},i.prototype.creatEffect=function(){this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.activateBtn.x-4,this.activateBtn.y-8),this._btnClip.scale(1,1,!0)},i.prototype.creatEquipEffect=function(t){var e=t.width/300,i=t.height/300,n=CommonUtil.creatEff(this.effctBottom,"lt_an",15);n.pos(t.x,t.y),n.scale(e,i,!0),n.play(),n.visible=!0;var s=CommonUtil.creatEff(this.effctTop,"lt_ming",15);s.pos(t.x,t.y),s.scale(e,i,!0),s.play(),s.visible=!0,this._equipClip.push(n),this._equipClip.push(s)},t=i,f.ThunderboltEquipSuitPanel=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("leiting_suit_skill")},n.prototype.getCfgByIDAndLevel=function(t,e){for(var i=this._cfg.length,n=0;n<i;n++)if(this._cfg[n][1]===e&&this._cfg[n][0]===t)return this._cfg[n];return null},n.prototype.getFristCfg=function(){return this._cfg[0]},i=n,e.LeitingSuitSkillCfg=i}(modules=modules||{}),function(t){var _,e,m,v,b,i;function n(){return e.call(this)||this}_=t.thunderbolt_equip||(t.thunderbolt_equip={}),m=t.config.LeitingSuitSkillCfg,v=t.config.SkillPureCfg,b=t.config.SkillCfg,e=ui.ThunderboltAngerAlertUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.condition1,"#3a5385","SimHei",24),this.condition1.style.wordWrap=!0,this.condition1.style.leading=10,CommonUtil.setHTMLPro(this.skillMsc,"#3a5385","SimHei",24),this.skillMsc.style.wordWrap=!0,this.skillMsc.style.leading=10,CommonUtil.setHTMLPro(this.nextSkillMsc,"#3a5385","SimHei",24),this.nextSkillMsc.style.wordWrap=!0,this.nextSkillMsc.style.leading=10},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView()},n.prototype.updataView=function(){this.resultMsc.visible=this.skillMsc.visible=this.nextMsc.visible=this.nextSkillMsc.visible=!0;var t=_.ThunderboltEquipModel.instance.data;if(t){var e,i=t[0][3][0],n=!!i;if(n?(e=m.instance.getCfgByIDAndLevel(i[0],i[1]),this.title.text="雷霆之怒·战 "+e[1]+"级"):(i=[(e=m.instance.getFristCfg())[0],1],this.title.text="雷霆之怒·战 0级"),n){var s=m.instance.getCfgByIDAndLevel(i[0],i[1]+1);if(this.ActivateTxt.color="#00AD35",this.skillTitle.text="技能效果:",y=1e4*i[0]+i[1],g=b.instance.getCfgById(y),f=v.instance.getCfgById(i[0]),this.condition1.innerHTML=CommonUtil.stringFormat(f[5],g[2]),s){for(this.ActivateTxt.text="已激活",this.resultMsc.text="升级条件:",h=(l=s[2]).length,c="",p=0;p<h;p+=2)d=p==h-2?"":",",c+=_.ThunderboltEquipModel.instance.getNameUtils(l[p]-1)+"达到"+l[p+1]+"级"+d;this.skillMsc.innerHTML=c,this.nextMsc.text="下级效果:";var o=1e4*s[0]+s[1],a=b.instance.getCfgById(o),r=v.instance.getCfgById(s[0]);this.nextSkillMsc.innerHTML=CommonUtil.stringFormat(r[5],a[2])}else this.resultMsc.visible=this.skillMsc.visible=this.nextMsc.visible=this.nextSkillMsc.visible=!1,this.ActivateTxt.text="已满级"}else{this.ActivateTxt.text="未激活",this.ActivateTxt.color="#FF3E3E",this.skillTitle.text="激活条件:";for(var l,h=(l=e[2]).length,c="",p=0;p<h;p+=2){var u=e[2],d=p==h-2?"":",";c+=_.ThunderboltEquipModel.instance.getNameUtils(u[p]-1)+"达到"+u[p+1]+"级"+d}this.condition1.innerHTML=c,this.resultMsc.text="技能效果:";var y=1e4*i[0]+i[1],g=b.instance.getCfgById(y),f=v.instance.getCfgById(i[0]);this.skillMsc.innerHTML=CommonUtil.stringFormat(f[5],g[2]),this.nextMsc.visible=this.nextSkillMsc.visible=!1}this.updataTxtView()}},n.prototype.updataTxtView=function(){this.resultMsc.y=this.skillMsc.y=this.condition1.y+this.condition1.contextHeight+6,this.nextMsc.y=this.nextSkillMsc.y=this.skillMsc.y+this.skillMsc.contextHeight+6},i=n,_.ThunderboltAngerAlert=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("leiting_suit_attr"),this._levelArr=[];for(var t=0,e=this._cfg.length;t<e;t++){for(var i=this._cfg[t][1],n=!0,s=0,o=this._levelArr.length;s<o;s++)if(this._levelArr[s]===i){n=!1;break}n&&this._levelArr.push(i)}},n.prototype.getCfg=function(t){for(var e=[],i=0,n=this._cfg.length;i<n;++i)this._cfg[i][1]===t&&e.push(this._cfg[i]);return e},n.prototype.getCfgById=function(t){for(var e=0,i=this._cfg.length;e<i;++e)if(this._cfg[e][0]===t)return this._cfg[e];return null},Object.defineProperty(n.prototype,"endId",{get:function(){return this._cfg[this._cfg.length-1][0]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"levelArr",{get:function(){return this._levelArr},enumerable:!0,configurable:!0}),n.prototype.getLevelByIndex=function(t){for(var e=0,i=this._levelArr.length;e<i;++e)if(this._levelArr[e]===t)return e;return-1},i=n,e.LeitingSuitAttrCfg=i}(modules=modules||{}),function(t){var D,e,a,r,l,L,H,i,n;function s(){return e.call(this)||this}D=t.thunderbolt_equip||(t.thunderbolt_equip={}),a=laya.display.Text,r=laya.ui.Box,l=laya.ui.Image,L=t.config.AttrItemCfg,H=t.config.LeitingSuitAttrCfg,i=laya.html.dom.HTMLDivElement,e=ui.ThunderbolSuitAlertUI,__extends(s,e),s.prototype.destroy=function(){this.nameArr=this.destroyElement(this.nameArr),this.txtMscArr=this.destroyElement(this.txtMscArr),this.boxMscArr=this.destroyElement(this.boxMscArr),this.imgArr=this.destroyElement(this.imgArr),this.htmlArr=this.destroyElement(this.htmlArr),e.prototype.destroy.call(this)},s.prototype.initialize=function(){e.prototype.initialize.call(this),this.nameArr=[this.name1,this.name2,this.name3,this.name4,this.name5,this.name6],this.txtMscArr=[],this.boxMscArr=[],this.imgArr=[],this.htmlArr=[]},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView()},s.prototype.updataView=function(){for(var t=D.ThunderboltEquipModel.instance.data,e=0;e<this.txtMscArr.length;e++)this.txtMscArr[e].removeSelf();for(e=0;e<this.imgArr.length;e++)this.imgArr[e].removeSelf();for(e=0;e<this.boxMscArr.length;e++)this.boxMscArr[e].removeSelf();for(e=0;e<this.htmlArr.length;e++)this.htmlArr[e].removeSelf();if(this.txtMscArr.length=0,t){var i=t[0],n=i[1],s=["头盔","护腕","鞋子","腰带","项链","手镯"],o=[2,4,5,6,7,8],a="一二三四五六七八九十",r=this.name1.y+this.name1.textHeight+10,l=i[2],h=H.instance.getCfgById(l),c=0,p=h?h[1]:0,u=H.instance.getLevelByIndex(p);l&&H.instance.endId!=l&&l%3==0&&u++;var d=H.instance.getCfg(H.instance.levelArr[u])||[],y=H.instance.getCfg(H.instance.levelArr[u+1]),g=H.instance.getCfg(H.instance.levelArr[u-1]);this.title.text=p?u+1+"阶雷霆套装":"0阶雷霆套装";var f=1;0<d.length&&(f=d[0][1]),e=0;for(var _=o.length;e<_;e++){var m=D.ThunderboltEquipModel.instance.getSingleSuit(n,o[e]);this.nameArr[e].text=s[e],m[1]>=f&&c++}if(0===d.length)for(e=0,_=y.length;e<_;e++){(I=this.createrPartMscTxt("效果"+a[e]+":激活任意"+y[e][2]+'个部位<span color="#FF3E3E">('+c+"/"+y[e][2]+")</span>")).y=r,r=I.y+I.contextHeight+10;for(var v=(B=y[e][3]).length,b=0;b<v;b+=2){var T=(k=L.instance.getCfgById(B[b]))[2]?Math.round(1e4*B[b+1])/100+"%":B[b+1].toString();(E=this.createrPropertyBox(k[1]+"+0"+(k[2]?"%":""),T)).y=r,r=E.y+E.height+10}y[e][4]&&((E=this.createrPropertyBox("雷霆装备基础属性+0%",y[e][4]+"%")).y=r,r=E.y+E.height+10)}else for(e=0,_=d.length;e<_;e++){var I,C=d[e][0],x=c<d[e][2]?c:d[e][2];if(r=(x>=d[e][2]?(I=this.createrPartMscTxt("效果"+a[e]+":任意"+d[e][2]+"个部位达到"+d[e][1]+'级<span color="#00ad35">('+x+"/"+d[e][2]+")</span>")).y=r:(I=this.createrPartMscTxt("效果"+a[e]+":任意"+d[e][2]+"个部位达到"+d[e][1]+'级<span color="#FF3E3E">('+x+"/"+d[e][2]+")</span>")).y=r,I.y+I.contextHeight+10),C<=l){var B=d[e][3],S=0===y.length?null:y[e][3],M=B.length;for(b=0;b<M;b+=2){var w=(k=L.instance.getCfgById(B[b]))[2]?Math.round(1e4*B[b+1])/100+"%":B[b+1].toString(),P=null;S&&(P=k[2]?Math.round(1e4*S[b+1]-1e4*B[b+1])/100+"%":Math.round(S[b+1]-B[b+1]).toString()),(E=this.createrPropertyBox(k[1]+"+"+w,P)).y=r,r=E.y+E.height+10}d[e][4]&&(T=0===y.length?null:Math.round(y[e][4]-d[e][4])+"%",(E=this.createrPropertyBox("雷霆装备基础属性+"+d[e][4]+"%",T)).y=r,r=E.y+E.height+10)}else{var A=(B=d[e][3]).length,R=0===g.length?null:g[e][3];for(b=0;b<A;b+=2){var k=L.instance.getCfgById(B[b]);w=void 0,P="",P=R?(w=k[2]?(1e4*R[b+1]>>0)/100+"%":R[b+1].toString(),k[2]?Math.round(1e4*B[b+1]-1e4*R[b+1])/100+"%":Math.round(B[b+1]-R[b+1]).toString()):(w=k[2]?"0%":"0",k[2]?Math.round(1e4*B[b+1])/100+"%":B[b+1].toString()),(E=this.createrPropertyBox(k[1]+"+"+w,P)).y=r,r=E.y+E.height+10}if(0===g.length&&d[e][4])(E=this.createrPropertyBox("雷霆装备基础属性+0%",d[e][4]+"%")).y=r,r=E.y+E.height+10;else if(0<g.length&&g[e][4]){var E;(E=this.createrPropertyBox("雷霆装备基础属性+"+g[e][4]+"%",Math.round(d[e][4]-g[e][4])+"%")).y=r,r=E.y+E.height+10}}}l<H.instance.endId?this.tipsTxt.text="激活效果三后开启下一阶段雷霆套装":this.tipsTxt.text="雷霆套装属性已满级"}},s.prototype.createrPartMscTxt=function(t){var e=new i;return e.style.font="SimHei",e.style.fontSize=24,e.style.align="left",e.x=50,e.width=535,e.style.color="#3a5385",e.innerHTML=t,this.addChild(e),this.htmlArr.push(e),e},s.prototype.createrPropertyBox=function(t,e){void 0===e&&(e=null);var i=new r;i.x=134,i.width=349,i.height=27;var n=new a;if(n.font="SimHei",n.fontSize=24,n.align="right",n.pos(0,0),n.text=t,n.color="#3a5385",i.addChild(n),this.txtMscArr.push(n),e){var s=new l;s.skin="common/zs_tongyong_3.png",s.pos(n.textWidth,-4),i.addChild(s);var o=new a;o.font="SimHei",o.fontSize=24,o.align="left",o.text=e,o.color="#00ad35",o.pos(s.x+s.width,0),i.addChild(o),this.txtMscArr.push(o)}return this.addChild(i),this.boxMscArr.push(i),i},n=s,D.ThunderbolSuitAlert=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("leiting_power")},n.prototype.getCfgByIDAndLevel=function(t,e){for(var i=this._cfg.length,n=0;n<i;n++)if(this._cfg[n][0]===t&&e===this._cfg[n][1])return this._cfg[n];return null},i=n,e.LeitingPowerCfg=i}(modules=modules||{}),function(t){var h,e,c,l,i;function n(){return e.call(this)||this}h=t.thunderbolt_equip||(t.thunderbolt_equip={}),c=t.config.LeitingPowerCfg,l=t.config.AttrItemCfg,e=ui.ThunderboltPowerAlertUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.condition,"#4c5e8a","SimHei",24),this.condition.style.leading=10,CommonUtil.setHTMLPro(this.property,"#4c5e8a","SimHei",24),this.property.style.leading=10,CommonUtil.setHTMLPro(this.nextProperty,"#4c5e8a","SimHei",24),this.nextProperty.style.leading=10},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView()},n.prototype.updataView=function(){var t=h.ThunderboltEquipModel.instance.data;if(t){for(var e=t[0][0],i=null,n=0;n<e.length;n++)if(e[n][0]===this.index+1){i=e[n];break}var s=i[2],o=i[1],a=0;for(n=0;n<s.length;n++)a+=s[n][1];if(this.propertyTitle.visible=this.property.visible=this.nextPropertyTitle.visible=this.nextProperty.visible=!0,0===o){this.ActivateTxt.text="未激活",this.ActivateTxt.color="#ff3e3e",this.conditionTitle.text="激活条件:";var r=c.instance.getCfgByIDAndLevel(this.index+1,1);this.condition.innerHTML="该雷霆装备淬炼总等级达到"+r[2]+"级<br><span style='color:#ff3e3e'>("+a+"/"+r[2]+")</span>",this.propertyTitle.text="激活属性:",this.property.innerHTML=this.getStr(r[3],r[5]),this.nextPropertyTitle.visible=this.nextProperty.visible=!1,this.title.text="雷霆之力 0级"}else{var l=c.instance.getCfgByIDAndLevel(this.index+1,o+1);r=c.instance.getCfgByIDAndLevel(this.index+1,o),this.ActivateTxt.color="#00AD35",this.conditionTitle.text="当前属性:",this.condition.innerHTML=this.getStr(r[3],r[5]),this.title.text="雷霆之力 "+o+"级",l?(this.ActivateTxt.text="已激活",this.propertyTitle.text="升级条件:",this.property.innerHTML="该雷霆装备淬炼总等级达到"+l[2]+"级<br><span style='color:#ff3e3e'>("+a+"/"+l[2]+")</span>",this.nextPropertyTitle.text="升级属性:",this.nextProperty.innerHTML=this.getStr(l[3],l[5])):(this.ActivateTxt.text="已满级",this.propertyTitle.visible=this.property.visible=this.nextPropertyTitle.visible=this.nextProperty.visible=!1)}this.propertyTitle.y=this.property.y=this.condition.y+this.condition.contextHeight+10,this.nextPropertyTitle.y=this.nextProperty.y=this.property.y+this.property.contextHeight+10}},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.index=t},n.prototype.getStr=function(t,e){var i="人物"+["武器","帽子","衣服","护手","鞋子","腰带","项链","手镯","戒指","玉佩"][this.index]+"部位基础属性";e&&(i+="+"+Math.round(100*e)+"%,");for(var n=t.length,s=0;s<n;s+=2){var o=l.instance.getCfgById(t[s]),a=s===n-2?"":",",r=o[2]?Math.round(100*t[s+1])+"%":t[s+1].toString();i+=o[1]+"+"+r+a}return i},i=n,h.ThunderboltPowerAlert=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab1={},this._tab={},this._arr=GlobalData.getConfig("leiting_direct_buy");for(var t=0;t<this._arr.length;t++){var e=this._arr[t];if(e){var i=e[0],n=e[1];this._tab[n]||(this._tab[n]={}),this._tab1[n]||(this._tab1[n]=new Array),this._tab1[n].push(e),this._tab[n][i]=e}}},n.prototype.getCfgById=function(t,e){return this._tab[e]?this._tab[e][t]:null},n.prototype.getCfgsByRoud=function(t){return this._tab1[t]},n.prototype.getArr=function(){return this._arr},i=n,e.LeitingDirectBuyCfg=i}(modules=modules||{}),function(d){var y,i,t,g,f,e,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}y=d.thunderbolt_buy||(d.thunderbolt_buy={}),t=ui.ThunderboltBuyAlertUI,g=d.common.CustomClip,f=d.config.RechargeCfg,e=d.config.LeitingDirectBuyCfg,n=laya.events.Event,s=d.common.SimpleList,i=t,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6],this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.buyBtn.x-5,this.buyBtn.y-10,!0),this._list=s.create(y.ThunderboltBuyItem,135,53,1,4,5,3),this._list.size(555,53),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.buyClickHandler).onAutoClick(this.addBtn,this,this.addBtnHandler).onAutoEvt(this._list,n.SELECT,this,this.selectHandler).onAutoGlobalEvt("THUNDERBOLT_BUY_INFO_UPDATE",this,this.showUI).onAutoGlobalEvt("THUNDERBOLT_BUY_INFO_UPDATE",this,this.gsUISet).onAutoGlobalEvt("VIP_UPDATE",this,this.gsUISet)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),g.thisStop(this._btnClip),this.showUI(),this.gsUISet(),y.ThunderboltBuyCtrl.instance.getGauntletInfo()},a.prototype.showUI=function(){var t=y.ThunderboltBuyCtrlModel.instance.dates[3];this._list.datas=e.instance.getCfgsByRoud(t),this._list.selectedIndex=y.ThunderboltBuyCtrlModel.instance.getIndex(),this.setUI(this._list.datas.length)},a.prototype.setUI=function(t){var e=1;t<=4?e=1:4<t&&t<=8?e=2:8<t&&(e=3),this._list.height=55*e+(e-1)*this._list.scaleY;var i=e-1,n=i-1;n=n<0?0:n,this.height=this.bgImg1.height=918+53*i+n*this._list.scaleY,this.bgImg2.height=856+53*i+n*this._list.scaleY,this.text1.y=922+53*i+n*this._list.scaleY,this.box.y=this.listBox.y+this._list.height},a.prototype.addBtnHandler=function(){WindowManager.instance.open(59,15)},a.prototype.gsUISet=function(){var t=d.thunderbolt_buy.ThunderboltBuyCtrlModel.instance.maxNUm,e=d.thunderbolt_buy.ThunderboltBuyCtrlModel.instance.nowNum;this.text2.color=e<=0?"#FF3E3E":"#50ff28",this.text2.text=e+"/"+t;var i=new Array;i.push([this.text3,1,0]),i.push([this.text2,1,0]),i.push([this.addBtn,2,0]),CommonUtil.adaptationImgAndText(i,this.box.width,0,"center")},a.prototype.selectHandler=function(){-1!=this._list.selectedIndex&&this.updateInfo()},a.prototype.updateInfo=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].visible=!1;var i;if(y.ThunderboltBuyCtrlModel.instance.dates&&(i=this._list.datas[this._list.selectedIndex])){var n=i[2],s=i[0],o=i[3],a=i[4];for(t=0,e=n.length;t<e;t+=2){var r=this._items[.5*t];r&&(r.dataSource=[n[t],n[t+1],0,null],r.visible=!0)}var l=f.instance.getRecharCfgByIndex(s);this.priceTxt.text=l[2].toString(),this.xianyuTxt.text="现在抢购即可获得"+l[6][0][1],a=a||1,this.img1.skin="assets/others/thunderbolt/txt_ltzn_"+a+".png",this.finghtClip.value=""+o;var h=this.xianyuTxt.textWidth+this.img3.width+this.xianyuTxt1.textWidth,c=(this.width-h)/2;this.xianyuTxt.x=c,this.img3.x=this.xianyuTxt.x+this.xianyuTxt.textWidth,this.xianyuTxt1.x=this.img3.x+this.img3.width,this.showItem.data=[a,"lttz_",!0,10];var p=d.redBag.RedBagUtils.getIdAndCondByMoney(1034,s);this.redBagHtml.visible=d.redBag.RedBagUtils.getActionopen(),this.redBagHtml.innerHTML="<span style='color:#ffffff;font-size:24px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:24px;font-family:SimHei;'>"+p+"元宝</span><span style='color:#ffffff;font-size:24px;font-family:SimHei;'>红包</span>"}if(y.ThunderboltBuyCtrlModel.instance.dates&&(i=this._list.datas[this._list.selectedIndex])){s=i[0];var u=y.ThunderboltBuyCtrlModel.instance.stateTableById[s];if(0!=y.ThunderboltBuyCtrlModel.instance.dates[2]){if(0===u)return this.buyBtn.label="立即抢购",g.thisPlay(this._btnClip),this.buyBtn.visible=!0,void(this.gotImg.visible=!1);if(1===u)return this.buyBtn.label="领取奖励",g.thisPlay(this._btnClip),this.buyBtn.visible=!0,void(this.gotImg.visible=!1)}p=d.redBag.RedBagUtils.getIdAndCondByMoney(1034,s),this.redBagHtml.visible=d.redBag.RedBagUtils.getActionopen(),this.redBagHtml.innerHTML="<span style='color:#ffffff;font-size:24px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:24px;font-family:SimHei;'>"+p+"元宝</span><span style='color:#ffffff;font-size:24px;font-family:SimHei;'>红包</span>"}g.thisStop(this._btnClip),this.buyBtn.visible=!1,this.gotImg.visible=!0},a.prototype.buyClickHandler=function(){if(y.ThunderboltBuyCtrlModel.instance.dates){var t=this._list.datas[this._list.selectedIndex];if(t){var e=t[0],i=y.ThunderboltBuyCtrlModel.instance.stateTableById[e];if(0!=y.ThunderboltBuyCtrlModel.instance.dates[2]){var n=this._list.datas[this._list.selectedIndex][0];if(0===i){if(0===y.ThunderboltBuyCtrlModel.instance.nowNum)return void CommonUtil.noticeError(0,"购买次数已用尽,提升SVIP等级可增加购买次数",!0);y.ThunderboltBuyCtrl.instance.buy(n)}else 1===i&&y.ThunderboltBuyCtrl.instance.drawGauntlet(n)}}}},a.prototype.close=function(t,e){i.prototype.close.call(this,t,e),g.thisStop(this._btnClip),this.showItem&&this.showItem.stopTween()},a.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),this.showItem=this.destroyElement(this.showItem),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,y.ThunderboltBuyAlert=o}(modules=modules||{}),function(m){var v,e,b,i,l,T,I,t,n;function s(){return e.call(this)||this}v=m.fly_up||(m.fly_up={}),b=m.config.FeiShengGradeCfg,i=m.common.BtnGroup,l=m.notice.SystemNoticeManager,T=m.config.AttrItemCfg,I=m.config.BlendCfg,t=m.common.CustomClip,e=ui.FlyUpViewUI,__extends(s,e),s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this.btnGroup=this.destroyElement(this.btnGroup),this.btnGroupArr=this.destroyElement(this.btnGroupArr),this.attrTxt_leftArr=this.destroyElement(this.attrTxt_leftArr),this.arrImgArr=this.destroyElement(this.arrImgArr),this.attrTxt_rightArr=this.destroyElement(this.attrTxt_rightArr),this.seIconArr=this.destroyElement(this.seIconArr),e.prototype.destroy.call(this)},s.prototype.setSeIconVsb=function(t){for(var e=0,i=this.seIconArr.length;e<i;e++)this.seIconArr[e].visible=e<t},s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.btnGroup=new i,this.btnGroup.setBtns(this.btnGroup_1,this.btnGroup_2,this.btnGroup_3,this.btnGroup_4,this.btnGroup_5,this.btnGroup_6),this.btnGroupArr=[this.btnGroup_1,this.btnGroup_2,this.btnGroup_3,this.btnGroup_4,this.btnGroup_5,this.btnGroup_6],this.btnGroup.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1);for(var t=0;t<6;t++)this.btnGroupArr[t].label=v.FlyUpModel.instance.getNameUtils(t);for(this.attrTxt_leftArr=[this.attrTxt_left1,this.attrTxt_left2,this.attrTxt_left3,this.attrTxt_left4,this.attrTxt_left5],this.arrImgArr=[this.arrImg_1,this.arrImg_2,this.arrImg_3,this.arrImg_4,this.arrImg_5],this.attrNameArr=[this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5],this.attrTxt_rightArr=[this.attrTxt_right1,this.attrTxt_right2,this.attrTxt_right3,this.attrTxt_right4,this.attrTxt_right5],this.seIconArr=[this.seIcon1,this.seIcon2,this.seIcon3,this.seIcon4,this.seIcon5,this.seIcon6],t=0;t<5;t++)this.attrNameArr[t].visible=this.attrTxt_leftArr[t].visible=this.arrImgArr[t].visible=this.attrTxt_rightArr[t].visible=!1;this.setSeIconVsb(0)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.flyBtn,this,this.flyHanlder),this.onAutoEvt(this.btnGroup,"change",this,this.updataTips),this.onAutoGlobalEvt("FLY_UP_UPDATA",this,this.updateView)},s.prototype.upDataSelectIndex=function(){var t=v.FlyUpModel.instance.data[0];if(0===t)return 0;if(t%100!=6)return t%100;var e=b.instance.getCfgById(t+1);return(e=e||b.instance.getCfgById(100*Math.floor(t/100)+101))?0:5},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.btnGroup.selectedIndex=this.upDataSelectIndex(),this.rPstate=0,this.updateView()},s.prototype.canSelectHandler=function(t){var e=v.FlyUpModel.instance.data;if(!e)return!0;var i=e[0],n=b.instance.getCfgById(i+1),s=(n=n||b.instance.getCfgById(100*Math.floor(i/100)+101))&&n[0]||0,o=!1;if(!n)return!0;if(!s)return!0;if(!(o=v.FlyUpModel.instance.getIdBySelectType(t+1,i)<=s)){var a=v.FlyUpModel.instance.getIdBySelectType(t+1,i)-1,r=b.instance.getCfgById(a);if(!r)throw new Error("不存在的配置id"+a);l.instance.addNotice("飞升通过"+r[1]+"境界后才能选择此境界",!0)}return o},s.prototype.updateView=function(){var t=v.FlyUpModel.instance.data;if(t){this.btnGroup.selectedIndex=this.upDataSelectIndex();var e=t[0],i=b.instance.getCfgById(e),n=b.instance.getCfgById(e+1),s=!(n=n||b.instance.getCfgById(100*Math.floor(e/100)+101)),o=i[2];this.fight.value=(i[7]||0).toString();for(var a=0;a<5;a++)this.attrNameArr[a].visible=this.attrTxt_leftArr[a].visible=this.arrImgArr[a].visible=this.attrTxt_rightArr[a].visible=!1;if(this.flyMsc.text="飞升压制：高境界玩家对低境界玩家造成伤害增加"+100*I.instance.getCfgById(42001)[1][0]+"%",e<=0){a=0;for(var r=(u=n[2]).length;a<r;a+=2){var l=a/2>>0,h=(d=T.instance.getCfgById(u[a]))[2]?(100*u[a+1]>>0)+"%":u[a+1]+"";this.attrTxt_leftArr[l].text="0",this.attrTxt_rightArr[l].text=h,this.attrNameArr[l].text=d[1],this.attrNameArr[l].visible=this.attrTxt_rightArr[l].visible=this.arrImgArr[l].visible=this.attrTxt_leftArr[l].visible=!0,this.attrNameArr[l].x=197,this.attrTxt_leftArr[l].x=288}}else if(s)for(a=0,r=o.length;a<r;a+=2){l=a/2>>0,y=(d=T.instance.getCfgById(o[a]))[2]?(100*o[a+1]>>0)+"%":o[a+1]+"",this.attrTxt_leftArr[l].text=""+y,this.attrNameArr[l].visible=this.attrTxt_leftArr[l].visible=!0,this.attrNameArr[l].text=d[1],this.attrTxt_rightArr[l].text="",this.attrTxt_rightArr[l].visible=!1;var c=this.attrNameArr[l].textWidth+this.attrTxt_leftArr[l].textWidth+80,p=(this.width-c)/2;this.attrNameArr[l].x=p,this.attrTxt_leftArr[l].x=80+p+this.attrNameArr[l].textWidth}else for(var u,a=0,r=(u=n[2]).length;a<r;a+=2){var d,l=a/2>>0,y=(d=T.instance.getCfgById(u[a]))[2]?(100*o[a+1]>>0)+"%":o[a+1]+"";h=d[2]?(100*(u[a+1]-o[a+1])>>0)+"%":Math.floor(u[a+1]-o[a+1])+"",this.attrTxt_leftArr[l].text=y,this.attrTxt_rightArr[l].text=""+h,this.attrNameArr[l].text=d[1],this.attrNameArr[l].visible=this.attrTxt_rightArr[l].visible=this.arrImgArr[l].visible=this.attrTxt_leftArr[l].visible=!0,this.attrNameArr[l].x=197,this.attrTxt_leftArr[l].x=288}var g=t[1],f=0;for(a=0,r=g.length;a<r;a++)3<=g[a][1]&&f++;if(2<=f){var _=b.instance.getCfgById(t[0]);this.rPstate=m.player.PlayerModel.instance.fight>=_[4]?3:2}else this.rPstate=1;this.updataTips()}},s.prototype.updataTips=function(){var t=v.FlyUpModel.instance.data;if(t){var e,i=t[0],n=b.instance.getCfgById(i+1),s=(n=n||b.instance.getCfgById(100*Math.floor(i/100)+101))&&n[0]||0,o=s?Math.floor(s/100):Math.floor(i/100);if(this.stageName.skin="assets/icon/ui/fly_up/fs_0"+o+".png",e=s?v.FlyUpModel.instance.getIdBySelectType(this.btnGroup.selectedIndex+1,i):100*Math.floor(i/100)+this.btnGroup.selectedIndex+1,s)if(e===s)this.tips.visible=!1,this.flyBtn.visible=!0,3===this.rPstate?this.playEff():this.stopEff();else{if(!(e<s))throw new Error("..........错误选择状态");this.stopEff(),this.tips.text="已飞升",this.tips.visible=!0,this.flyBtn.visible=!1}else this.tips.text="已达到最大飞升等级",this.tips.visible=!0,this.flyBtn.visible=!1,this.stopEff();var a=b.instance.getCfgById(e);if(!(a=a||b.instance.getCfgById(i)))throw new Error("..........错误配置id"+i);var r=a[3];this.item_0.setDate(r[0]),this.item_1.setDate(r[1]),0===i||i%100==6?this.setSeIconVsb(s?0:6):this.setSeIconVsb(i%100)}},s.prototype.flyHanlder=function(){var t=v.FlyUpModel.instance.data;if(t){for(var e=t[1],i=0,n=e.length;i<n;i++){if(1===e[i][1])return void l.instance.addNotice("请先完成飞升任务",!0);if(2===e[i][1])return void l.instance.addNotice("请先领取飞升任务奖励",!0)}WindowManager.instance.open(1159)}},s.prototype.playEff=function(){this._btnClip||(this._btnClip=CommonUtil.creatEff(this.flyBtn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(1,1,!0)),t.thisPlay(this._btnClip)},s.prototype.stopEff=function(){t.thisStop(this._btnClip)},n=s,v.FlyUpPanel=n}(modules=modules||{}),function(s){var l,h,c,p,o,a,r,t;function e(){return h.call(this)||this}l=s.fly_up||(s.fly_up={}),c=s.config.FeiShengGradeCfg,p=s.config.BlendCfg,o=s.common.CommonUtil,a=s.bag.BagModel,r=s.dungeon.DungeonCtrl,h=ui.FlyUpAlertUI,__extends(e,h),e.prototype.destroy=function(){this.itemArr=this.destroyElement(this.itemArr),this.ruleMsc=this.destroyElement(this.ruleMsc),this._btnClip=this.destroyElement(this._btnClip),h.prototype.destroy.call(this)},e.prototype.initialize=function(){h.prototype.initialize.call(this),this.itemArr=[this.item1,this.item2,this.item3,this.item4],this._isFly=!1,o.setHTMLPro(this.ruleMsc,"#344c6f","SimHei",24),this.ruleMsc.style.wordWrap=!0,this.ruleMsc.style.leading=10},e.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this.flyBtn,this,this.flyHandler)},e.prototype.onOpened=function(){h.prototype.onOpened.call(this);for(var t=0,e=this.itemArr.length;t<e;t++)this.itemArr[t].visible=!1;var i=p.instance.getCfgById(19032);this.ruleMsc.innerHTML=i&&i[2][0];var n=l.FlyUpModel.instance.data[0];if(this._cfg=c.instance.getCfgById(n+1),this._cfg||(this._cfg=c.instance.getCfgById(100*Math.floor(n/100)+101)),!this._cfg)throw new Error("不存在的配置id..."+n);var s=0,o=this._cfg[5];for(t=0,e=o.length;t<e;t+=2)this.itemArr[t/2>>0].dataSource=[o[t],o[t+1],0,null],this.itemArr[t/2>>0].visible=!0,s++;if(0<s){var a=this.itemArr[0].width*s+20*(s-1),r=(this.width-a)/2;for(t=0;t<s;t++)this.itemArr[t].x=r+20*t+this.itemArr[0].width*t}this.updateView()},e.prototype.updateView=function(){if(l.FlyUpModel.instance.data){this.recommendFight.text="推荐战力: "+o.bigNumToString(this._cfg[4]);var t=this._cfg[6],e=a.instance.getItemCountById(t[0]);this.currency.skin=o.getIconById(t[0],!0),e>=t[1]?(this.currencyTxt.color="#00AD35",this._isFly=!0):(this.currencyTxt.color="#ff3e3e",this._isFly=!1),this.currencyTxt.text=e+"/"+t[1]}},e.prototype.flyHandler=function(){if(this.checkBtn.selected)if(this._isFly){var t=this;o.alert("温馨提示","<span style='color:#2c476a'>此道具适用于高阶飞升，是否确定使用？</span>",[Handler.create(this,function(){l.FlyUpCtrl.instance.feiShengChallenge(1),t.close()})],[null],null,!0)}else{var e=this._cfg[6],i=a.instance.getItemCountById(e[0]);s.bag.BagUtil.openLackPropAlert(e[0],e[1]-i)}else{var n=this._cfg[0];r.instance.reqEnterScene(3401,n)}},e.prototype.playEff=function(){this._btnClip||(this._btnClip=o.creatEff(this.flyBtn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(1,1,!0)),this._btnClip.play(),this._btnClip.visible=!0},e.prototype.stopEff=function(){this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1)},t=e,l.FlyUpAlert=t}(modules=modules||{}),function(h){var t,c,p,e;function i(){}t=h.fly_up||(h.fly_up={}),c=h.redPoint.RedPointCtrl,p=h.config.FeiShengGradeCfg,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getNameUtils=function(t){return["感应","合道","大成","储海","抱朴","归一"][t]},i.prototype.getFeiShengInfoReply=function(t){t&&(this.data=t,this.setRP(),GlobalData.dispatcher.event("FLY_UP_UPDATA"))},i.prototype.setRP=function(){if(this.data){for(var t=!1,e=0,i=this.data[1],n=0,s=i.length;n<s;n++)2===i[n][1]?t=!0:3<=i[n][1]&&e++;var o=!1;if(2<=e){var a=p.instance.getCfgById(this.data[0]);o=h.player.PlayerModel.instance.fight>=a[4]}var r=this.data[0],l=p.instance.getCfgById(r+1);(l=l||p.instance.getCfgById(100*Math.floor(r/100)+101))?c.instance.setRPProperty("flyUpRP",o||t):c.instance.setRPProperty("flyUpRP",!1)}else c.instance.setRPProperty("flyUpRP",!1)},i.prototype.getIdBySelectType=function(t,e){return 0===e?100+t>>0:e%100==6?100*Math.floor(e/100)+100+t>>0:100*Math.floor(e/100)+t>>0},i.prototype.getFlyStr=function(t){var e=p.instance.getCfgById(t);return e?e[1]:"未飞升"},e=i,t.FlyUpModel=e}(modules=modules||{}),function(t){var o,a,e,r,i,n,l,s,h;function c(){return a.call(this)||this}o=t.fly_up||(t.fly_up={}),e=t.bag.BagItem,r=t.config.BlendCfg,i=t.scene.SceneModel,n=t.common.CustomList,l=t.config.FeiShengGradeCfg,s=t.dungeon.DungeonCtrl,a=ui.FlyUpWinViewUI,__extends(c,a),c.prototype.initialize=function(){a.prototype.initialize.call(this),this._isSpecialCopy=!1,this.closeOnSide=!1,this._list=new n,this._list.width=412,this._list.height=300,this._list.hCount=4,this._list.spaceX=4,this._list.itemRender=e,this._list.x=154,this._list.y=720,this._list.shiftingX=5,this.addChildAt(this._list,1)},c.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},c.prototype.onOpened=function(){a.prototype.onOpened.call(this);for(var t=this.tuple[1],e=new Array,i=0;i<t.length;i++){var n=t[i];n&&94040001!==n[0]&&e.push(n)}t&&(this._list.datas=e),this._duration=r.instance.getCfgById(35003)[1][0],this.okBtn.label="确定("+this._duration/1e3+")",this.flyUp1.visible=this.flyUp2.visible=!0;var s=l.instance.getCfgById(o.FlyUpModel.instance.data[0]);this.flyUp2.text=s[1]},c.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t),this.tuple=t},c.prototype.close=function(){a.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler),46===t.config.SceneCfg.instance.getCfgById(i.instance.enterScene[0])[7]&&s.instance.reqEnterScene(0)},c.prototype.loopHandler=function(){0===this._duration&&this.close(),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},c.prototype.destroy=function(){this._list=this.destroyElement(this._list),a.prototype.destroy.call(this)},h=c,o.FlyUpWinView=h}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("feisheng_rank_task"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgByType=function(t){for(var e=[],i=0,n=this.getArr.length;i<n;i++)t==this.getArr[i][2]&&e.push(this.getArr[i]);return e},i=n,e.SoaringRankTaskCfg=i}(modules=modules||{}),function(s){var r,e,i,n,t,o,a,l,h,c,p,u;function d(){var t=e.call(this)||this;return t._isUpdateBtnClickNum=1e3,t._isUpdateBtnClick=!0,t}r=s.soaring_rank||(s.soaring_rank={}),i=s.common.CustomClip,n=s.common.CustomList,t=s.config.BlendCfg,o=s.notice.SystemNoticeManager,a=s.common.CommonUtil,l=s.config.SoaringRankCfg,h=s.funcOpen.FuncOpenModel,c=s.config.SoaringRankTaskCfg,p=s.bag.BagUtil,e=ui.SoaringRankViewUI,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._taskBase=[this.rushReward1,this.rushReward2,this.rushReward3,this.rushReward4],this._list=new n,this._list.width=630,this._list.height=493,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=r.SoaringRankItem,this._list.x=45,this._list.y=327,this.addChildAt(this._list,4),this.creatEffect(),a.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",26),this._allMingCiArr=new Array;for(var t=1;t<=50;t++)this._allMingCiArr.push(t)},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoClick(this.instructionsBtn,this,this.instructionsBtnHandler),this.onAutoClick(this.updateBtn,this,this.updateBtnHandler),this.onAutoGlobalEvt("SOARING_RANK_LIONQU_UPDATE",this,this.showTaskReward),this.onAutoGlobalEvt("SOARING_RANK_UPDATE",this,this.showUI)},d.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.chuang_isUpdateBtnClick)},d.prototype.showUI=function(){this.showIntegralDescriptionText(),this.showUPUiTip(),this.setActivitiTime(),this._allMingCiArr&&(this._list.datas=this._allMingCiArr),this.showMySocre()},d.prototype.getFeishengRankTaskInfo=function(){r.SoaringRankCtrl.instance.getFeishengRankTaskInfo()},d.prototype.getFeishengRankAllInfo=function(){r.SoaringRankCtrl.instance.getFeishengRankAllInfo()},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._isUpdateBtnClick=!0,this.getFeishengRankAllInfo(),this.showUI(),this.showTaskReward()},d.prototype.sureBtnHandler=function(){var t=r.SoaringRankModel.instance.state;t=2==t?0:t;var e=l.instance.getCfgsByDay(r.SoaringRankModel.instance.curType,0,PlayerModel.instance.cBgDay);switch(t){case 0:var i=e[8];15==i?WindowManager.instance.openByActionId(i,2):WindowManager.instance.openByActionId(i);break;case 1:var n=[];this._cfg=c.instance.getCfgById(r.SoaringRankModel.instance.taskId);var s=this._cfg[5];if(s){for(var o=0,a=.5*s.length;o<a;o++)n.push([s[2*o],s[2*o+1],0,null]);p.canAddItemsByBagIdCount(n)&&r.SoaringRankCtrl.instance.getFeishengRankTaskReward()}}},d.prototype.updateBtnHandler=function(){this._isUpdateBtnClick?(this._isUpdateBtnClick=!1,Laya.timer.once(this._isUpdateBtnClickNum,this,this.chuang_isUpdateBtnClick),this.getFeishengRankAllInfo(),o.instance.addNotice("刷新成功",!1)):o.instance.addNotice("操作过于频繁",!0)},d.prototype.chuang_isUpdateBtnClick=function(){this._isUpdateBtnClick=!0},d.prototype.instructionsBtnHandler=function(){t.instance.getCfgById(20046)?a.alertHelp(20046):o.instance.addNotice("读取说明配置失败",!0)},d.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=h.instance.getFuncIsOpen(164);r.SoaringRankModel.instance.restTm>=GlobalData.serverTime&&t&&0==r.SoaringRankModel.instance.endFlag?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},d.prototype.activityHandler=function(){this.activityText.text=""+a.timeStampToHHMMSS(r.SoaringRankModel.instance.restTm),r.SoaringRankModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},d.prototype.showTaskReward=function(){for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=r.SoaringRankModel.instance.param;this._cfg=c.instance.getCfgById(r.SoaringRankModel.instance.taskId);var i=this._cfg[5];for(t=0;t<.5*i.length;t++){var n=this._taskBase[t];n&&(n.dataSource=[i[2*t],i[2*t+1],0,null],n.visible=!0)}this.StatementHTML.innerHTML="积分达到<span style='color:#168a17'>"+this._cfg[4]+"</span>可领取!",this.scheduleText.text="("+e+"/"+this._cfg[4][0]+")",e>=this._cfg[4][0]?this.scheduleText.color="#16ba17":this.scheduleText.color="#FF3e3e",this.setBtnSure(),this.showMySocre()},d.prototype.setBtnSure=function(){var t=r.SoaringRankModel.instance.state;if(this.scheduleText.visible=this.StatementHTML.visible=!0,this.sureBtnRP.visible=!1,this.sureBtn.pos(475,1017),this.sureBtnRP.x=643,this.sureBtnRP.y=1009,0==r.SoaringRankModel.instance.endFlag)if(0==t){this.sureBtn.skin="common/btn_tongyong_18.png",this.sureBtn.labelColors="#465460,#465460,#465460,#465460",this.sureBtn.label="提升积分",this.sureBtn.visible=!0,i.thisStop(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1;var e=r.SoaringRankModel.instance.sureBtnRP;this.sureBtnRP.visible=!!e}else 1==t?(this.sureBtn.skin="common/btn_tongyong_6.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.sureBtn.label="领取",this.sureBtn.visible=!0,i.thisPlay(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1,this.sureBtnRP.visible=!1):(i.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!1,e=r.SoaringRankModel.instance.sureBtnRP,this.sureBtnRP.visible=!!e,this.scheduleText.visible=!1,this.StatementHTML.visible=!1,this.rushReward1.visible=!1,this.rushReward2.visible=!1,this.rushReward3.visible=!1,this.rushReward4.visible=!1,this.sureBtn.visible=!0,this.sureBtn.skin="common/btn_tongyong_18.png",this.sureBtn.labelColors="#3d5981,#3d5981,#3d5981,#3d5981",this.sureBtn.label="前往提升",this.sureBtn.pos(265.5,1002),this.sureBtnRP.x=433.5,this.sureBtnRP.y=994);else i.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!0,this.sureBtnRP.visible=!1},d.prototype.showMySocre=function(){var t=r.SoaringRankModel.instance.param;this.myIntegralText.text="积分:"+t,this.otherBox.visible=!0,this.otherBox.y=853,this.myRankNumText.y=this.myIntegralText.y=880;var e=s.player.PlayerModel.instance.actorId,i=r.SoaringRankModel.instance.nodeListByObjId[e];if(i){var n=i[0];this.myRankNumText.text="我的排名:"+n+" ",1==n?(this.otherBox.visible=!1,this.otherBox.y=853,this.myRankNumText.y=this.myIntegralText.y=865):this.showUpPlayerScore(n-1)}else this.myRankNumText.text="我的排名:未上榜",this.showUpPlayerScore(50)},d.prototype.showUpPlayerScore=function(t){var e=r.SoaringRankModel.instance.nodeList[t];if(e)this.otherRankMingCiNumText.text=""+t,this.otherRankNumText.text=""+e[1],this.otherIntegralNameText.text="积分",this.otherIntegralText.text=""+e[2];else{this.otherRankMingCiNumText.text=""+t,this.otherRankNumText.text="虚位以待...";var i=l.instance.getGradeByRank(t),n=l.instance.getCfgsByDay(r.SoaringRankModel.instance.curType,i,PlayerModel.instance.cBgDay);if(!n)return;for(var s=PlayerModel.instance.cBgDay,o=0;o<n[3].length;o++){if(s>=n[3][o][0]&&s<=n[3][o][1])return void(this.otherIntegralText.text=""+n[3][o][2]);s>n[3][n[3].length-1][1]&&(this.otherIntegralText.text=""+n[3][n[3].length-1][2])}this.otherIntegralNameText.text="上榜所需积分"}},d.prototype.showIntegralDescriptionText=function(){var t=l.instance.getCfgsByDay(r.SoaringRankModel.instance.curType,0,PlayerModel.instance.cBgDay);if(t){var e=t[13],i=a.getNameByItemId(e);this.integralDescriptionText.text="消耗1个 "+i+" 获得10积分";var n=this.integralDescriptionText.width+this.instructionsBtn.width,s=(this.width-n)/2;this.integralDescriptionText.x=s,this.instructionsBtn.x=this.integralDescriptionText.x+this.integralDescriptionText.width+2}},d.prototype.showUPUiTip=function(){var t=l.instance.getCfgsByDay(r.SoaringRankModel.instance.curType,0,PlayerModel.instance.cBgDay);t&&(this.NowRankTypeImg.skin="soaring_rank/txt_fsb_"+r.SoaringRankModel.instance.curType+".png",this.TomorrowRankTypeText.text=t[14],this.updateTimeText.text="上次更新:"+this.serverTimeToHHMMSS())},d.prototype.serverTimeToHHMMSS=function(){var t=new Date(GlobalData.serverTime),e=t.getMinutes()>>0,i=t.getHours()>>0;return(i<10?"0":"")+i+"时"+(e<10?"0":"")+e+"分"},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},d.prototype.creatEffect=function(){this._btnClip=i.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(1,1)},u=d,r.SoaringRankPanel=u}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("cumulate_pay_fs"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgByType=function(t){for(var e=[],i=0,n=this.getArr.length;i<n;i++)t==this.getArr[i][2]&&e.push(this.getArr[i]);return e},i=n,e.SoaringCumulatePayCfg=i}(modules=modules||{}),function(t){var e,i,n;function s(){this.serverInited=!1}e=t.money_cat||(t.money_cat={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.updateMoneyCatState=function(t){this.serverInited=!0,this.state=t,GlobalData.dispatcher.event("FIGHT_TALISMAN_UPDATE")},s.prototype.getMoneyCatInfoReply=function(t){this.actived=t[0],this.canActived=t[1],i.instance.setRPProperty("moneyCatRP",-1!=this.actived&&this.actived<this.canActived),i.instance.setRPProperty("moneyCatBuyRP",s.instance.state&&-1==this.actived),GlobalData.dispatcher.event("FIGHT_TALISMAN_UPDATE")},n=s,e.MoneyCatModel=n}(modules=modules||{}),function(t){var e,i,n;function s(){this.serverInited=!1}e=t.fight_talisman||(t.fight_talisman={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.updateTalismanState=function(t){this.serverInited=!0,this.state=t,GlobalData.dispatcher.event("FIGHT_TALISMAN_UPDATE")},s.prototype.getTalismanInfoReply=function(t){this.actived=t[0],this.canActived=t[1],i.instance.setRPProperty("fightTalismanRP",-1!=this.actived&&this.actived<this.canActived),i.instance.setRPProperty("fightTalismanBuyRP",s.instance.state&&-1==this.actived),GlobalData.dispatcher.event("FIGHT_TALISMAN_UPDATE")},n=s,e.FightTalismanModel=n}(modules=modules||{}),function(t){var e,g,f,_,i;function n(){}e=t.gloves||(t.gloves={}),g=t.config.GauntletCfg,f=t.bag.BagModel,_=t.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"glovesInfo",{get:function(){return this._glovesInfo},set:function(t){this._glovesInfo=t,this.state=t[0],GlobalData.dispatcher.event("GLOVES_INFO_UPDATE"),this.checkRP()},enumerable:!0,configurable:!0}),n.prototype.checkRP=function(){var t=!1;if(this._glovesInfo){if(_.instance.setRPProperty("glovesBuyRP",0===this._glovesInfo[0]),1===this._glovesInfo[5])_.instance.setRPProperty("glovesStoneBuyRP",0<this._glovesInfo[4]);else{for(var e=this._glovesInfo[8],i=0,n=e.length;i<n;i++)if(e[i][1]){t=!0;break}_.instance.setRPProperty("glovesStoneBuyRP",t)}t=!1;var s=this._glovesInfo[1];for(i=0,n=s.length;i<n;i++){var o=s[i][1];o%1e3==0&&(o+=1);var a=g.instance.getCfgById(o)[4];if(g.instance.getCfgById(o+1)){for(var r=!0,l=g.instance.getCfgById(o+1),h=0,c=a.length;h<c;h++){var p=!1;if(l){var u=l[4],d=u[h][0],y=u[h][1];p=f.instance.getItemCountById(d)>=y}if(!(r=r&&p))break}if(r){t=!0;break}}}}_.instance.setRPProperty("glovesRP",t)},i=n,e.GlovesModel=i}(modules=modules||{}),function(t){var r,e,i,n,s,o,a,l,h,c,p,u;function d(){return e.call(this)||this}r=t.soaring_cumulatePay||(t.soaring_cumulatePay={}),i=t.common.CustomList,n=t.common.CommonUtil,s=t.funcOpen.FuncOpenModel,o=t.config.SoaringCumulatePayCfg,a=t.money_cat.MoneyCatModel,l=t.zhizun.ZhizunModel,h=t.fight_talisman.FightTalismanModel,c=t.gloves.GlovesModel,p=t.first_pay.FirstPayModel,e=ui.SoaringCumulatePayViewUI,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new i,this._list.width=640,this._list.height=665,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=300,this._list.itemRender=r.SoaringCumulatePayItem,this.addChildAt(this._list,4)},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SOARING_CUMULATEPAY_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1)},d.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},d.prototype.showUI=function(){for(var t=o.instance.getCfgByType(r.SoaringCumulatePayModel.instance.cuyType),e=[],i=0;i<t.length;i++){var n=t[i];n[4]<=r.SoaringCumulatePayModel.instance.totalMoney&&e.push(n)}e.sort(this.sortFunc.bind(this)),this._list.datas=e,this.setActivitiTime()},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),r.SoaringCumulatePayCtrl.instance.getCumulatepayFSInfo(),this.showUI1()},d.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,h.instance.state?-1==c.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):a.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==l.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},d.prototype.okBtnHandler=function(){0!=p.instance.giveState?h.instance.state?-1==c.instance.state?WindowManager.instance.open(387):a.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==l.instance.state&&WindowManager.instance.open(351):WindowManager.instance.open(381):WindowManager.instance.open(379):WindowManager.instance.open(118)},d.prototype.sortFunc=function(t,e){var i=r.SoaringCumulatePayModel.instance.rewardList,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},d.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=s.instance.getFuncIsOpen(168);r.SoaringCumulatePayModel.instance.restTm>=GlobalData.serverTime&&t&&0==r.SoaringCumulatePayModel.instance.endFlag?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},d.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampToHHMMSS(r.SoaringCumulatePayModel.instance.restTm),r.SoaringCumulatePayModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},u=d,r.SoaringCumulatePayPanel=u}(modules=modules||{}),function(t){var r,e,i,n,s,o,a,l,h,c,p,u;function d(){return e.call(this)||this}r=t.soaring_dayConsumeReward||(t.soaring_dayConsumeReward={}),i=t.common.CustomList,n=t.common.CommonUtil,s=t.funcOpen.FuncOpenModel,o=t.config.SoaringDayConsumeRewardCfg,a=t.money_cat.MoneyCatModel,l=t.zhizun.ZhizunModel,h=t.fight_talisman.FightTalismanModel,c=t.gloves.GlovesModel,p=t.first_pay.FirstPayModel,e=ui.SoaringDayConsumeRewardViewUI,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new i,this._list.width=640,this._list.height=674,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=300,this._list.itemRender=r.SoaringDayConsumeRewardItem,this.addChildAt(this._list,4)},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SOARING_DATCONSUMEREWARD_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1)},d.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},d.prototype.showUI=function(){var t=o.instance.getCfgByType(r.SoaringDayConsumeRewardModel.instance.cuyType);t.sort(this.sortFunc.bind(this)),this._list.datas=t,this.setActivitiTime()},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),r.SoaringDayConsumeRewardCtrl.instance.GetConsumeRewardFSInfo(),this.showUI1()},d.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,a.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==l.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):h.instance.state?-1==c.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):(this.okBtn.visible=!1,this.wanChengImg.visible=!0,this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029))},d.prototype.okBtnHandler=function(){0!=p.instance.giveState?a.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==l.instance.state?WindowManager.instance.open(351):h.instance.state?-1==c.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381):WindowManager.instance.open(118)},d.prototype.sortFunc=function(t,e){var i=r.SoaringDayConsumeRewardModel.instance.rewardList,n=t[0],s=e[0],o=i[n]?i[n][1]:0,a=i[s]?i[s][1]:0;return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},d.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=s.instance.getFuncIsOpen(170);r.SoaringDayConsumeRewardModel.instance.restTm>=GlobalData.serverTime&&t&&0==r.SoaringDayConsumeRewardModel.instance.endFlag?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},d.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampToHHMMSS(r.SoaringDayConsumeRewardModel.instance.restTm),r.SoaringDayConsumeRewardModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},u=d,r.SoaringDayConsumeRewardPanel=u}(modules=modules||{}),function(e){var l,i,t,n,a,r,h,s,c,p,o,u;function d(){var t=i.call(this)||this;return t.isOver=!1,t.tempParam1=1,t}l=e.soaring_panicBuyingGift||(e.soaring_panicBuyingGift={}),t=Laya.Event,n=e.common.CustomClip,a=e.notice.SystemNoticeManager,r=e.common.CommonUtil,h=e.bag.BagUtil,s=e.funcOpen.FuncOpenModel,c=e.bag.BagModel,p=e.config.SoaringPanicBuyingGiftCfg,o=e.redPoint.RedPointCtrl,i=ui.SoaringPanicBuyingGiftViewUI,__extends(d,i),d.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],this.creatEffect()},d.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.sureBtn.on(t.CLICK,this,this.sureBtnHandler),this.onAutoGlobalEvt("SOARING_PANICBUYINGGIFT_UPDATE",this,this.showUI),this.onAutoGlobalEvt("SOARING_PANICBUYINGGIFT_COUNT_UPDATE",this,this.showNumStr)},d.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.sureBtn.off(t.CLICK,this,this.sureBtnHandler),Laya.timer.clear(this,this.activityHandler)},d.prototype.onOpened=function(){i.prototype.onOpened.call(this),l.SoaringPanicBuyingGiftCtrl.instance.GetRushBuyFSInfo()},d.prototype.sureBtnHandler=function(){this.isCion()},d.prototype.isCion=function(){if(0!=l.SoaringPanicBuyingGiftModel.instance.totalCountRandom){var t=PlayerModel.instance.getCurrencyById(90140001);if(null==t&&(t=c.instance.getItemCountById(90140001)),this._Datas)if(this._Datas[1]<=t){var e=[],i=this._Datas[5];if(i){for(var n=0,s=i.length;n<s;n++){var o=i[n];e.push([o[0],o[1],0,null])}h.canAddItemsByBagIdCount(e)&&l.SoaringPanicBuyingGiftCtrl.instance.BuyRushBuyFS()}}else r.goldNotEnoughAlert()}else a.instance.addNotice("抢购礼包已售罄",!0)},d.prototype.showUI=function(){if(this._Datas=p.instance.getCfgById(l.SoaringPanicBuyingGiftModel.instance.cuyType),this._Datas){this.showNumStr(),this.showAwardAndTitleStr(),this.setActivitiTime(),this.setBtnSure();var t=864e5*Math.ceil((GlobalData.serverTime-GlobalData.timeZoneOffset)/864e5)+GlobalData.timeZoneOffset;localStorage.setItem(e.player.PlayerModel.instance.actorId+"_SoaringPanicBuyRedLook",""+t),l.SoaringPanicBuyingGiftModel.instance.isFirstOpen=!1,o.instance.setRPProperty("soaringPanicBuyingGifRP",!1)}},d.prototype.setBtnSure=function(){this.sureBtn.skin="common/btn_tongyong_6.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.sureBtn.label="购买",n.thisStop(this._btnClip);var t=this._Datas[3];0==l.SoaringPanicBuyingGiftModel.instance.endFlag?t==l.SoaringPanicBuyingGiftModel.instance.count?(this.isOver=!1,this.sureBtn.visible=!1,this.maxCeilingText.visible=!0,this.overImg.visible=!1,this.maxCeilingText.text="已达上限"):(this.isOver=!1,n.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.maxCeilingText.visible=!1,this.overImg.visible=!1):(this.isOver=!0,this.sureBtn.visible=!1,this.maxCeilingText.visible=!1,this.overImg.visible=!0,this.overText.visible=!1,this.sureBtn.visible=!1)},d.prototype.showAwardAndTitleStr=function(){var t=this._Datas[6],e=this._Datas[8],i=this._Datas[1],n=this._Datas[7];this.nameText.text=t,this.zeKouImg.skin="soaringActivity/"+n+".png",this.originalPriceText.text=""+i,this.nowPriceText.text=""+e;var s=this.originalPriceImg.width+this.originalPriceText.width,o=(this.width-s)/2;this.originalPriceImg.x=o,this.originalPriceText.x=this.originalPriceImg.width+o+1,this.originalPriceRedImg.width=s,this.originalPriceRedImg.x=o,this.nowPriceImg.x=o,this.nowPriceText.x=this.nowPriceImg.width+o+1;for(var a=0;a<this._taskBase.length;a++)(u=this._taskBase[a]).visible=!1;var r=this._Datas[5],l=new Array;for(a=0;a<r.length;a++){var h=this._taskBase[a];h&&(h.dataSource=[r[a][0],r[a][1],0,null],h.visible=!0,h.nameVisible=!0,l.push(h))}var c=100*l.length+30*(l.length-1),p=(this.width-c)/2;for(a=0;a<l.length;a++){var u;(u=l[a]).x=p,p+=u.width+30}},d.prototype.showNumStr=function(){if(this._Datas){this._Datas=p.instance.getCfgById(l.SoaringPanicBuyingGiftModel.instance.cuyType);var t=this._Datas[3]-l.SoaringPanicBuyingGiftModel.instance.count,e=t+"/"+this._Datas[3];this.CanBuyText.text=e,0<(t=t<0?0:t)?this.CanBuyText.color="#16ba17":(this.CanBuyText.color="#FF3e3e",0!=l.SoaringPanicBuyingGiftModel.instance.endFlag&&(this.maxCeilingText.visible=!0,this.overText.visible=!1,this.sureBtn.visible=!1));var i=void 0;this.isOver?(this.maxCeilingText.visible=!1,i=this.tempParam1):(i=l.SoaringPanicBuyingGiftModel.instance.totalCountRandom,this.tempParam1=i);var n=i+"/"+this._Datas[2];this.allBuyText.text=n,i=i<0?0:i,0<(this.tempParam1=i)?(this.allBuyText.color="#16ba17",this.overText.visible=!1):(this.allBuyText.color="#FF3e3e",this.allBuyText.text="已售罄",0!=l.SoaringPanicBuyingGiftModel.instance.endFlag&&(this.maxCeilingText.visible=!1,this.overText.visible=!0,this.sureBtn.visible=!1))}else console.log("this._Datas[rush_buy_fsFields.count] == null!");var s=this.Text1.width+this.CanBuyText.width,o=(this.width-s)/2;this.Text1.x=o,this.CanBuyText.x=this.Text1.width+o+1;var a=this.Text2.width+this.allBuyText.width,r=(this.width-a)/2;this.Text2.x=r,this.allBuyText.x=this.Text2.width+r+1},d.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=s.instance.getFuncIsOpen(171);l.SoaringPanicBuyingGiftModel.instance.restTm>=GlobalData.serverTime&&t&&0==l.SoaringPanicBuyingGiftModel.instance.endFlag?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",l.SoaringPanicBuyingGiftCtrl.instance.GetRushBuyFSInfo())},d.prototype.activityHandler=function(){this.activityText.text=""+r.timeStampToHHMMSS(l.SoaringPanicBuyingGiftModel.instance.restTm),l.SoaringPanicBuyingGiftModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.sureBtn.visible=!1,Laya.timer.clear(this,this.activityHandler))},d.prototype.creatEffect=function(){this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(1,1)},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this,t)},u=d,l.SoaringPanicBuyingGiftPanel=u}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("pay_single_fs"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgByType=function(t){for(var e=[],i=0,n=this.getArr.length;i<n;i++)t==this.getArr[i][3]&&e.push(this.getArr[i]);return e},i=n,e.SoaringSinglePayCfg=i}(modules=modules||{}),function(t){var r,e,i,n,s,o,a,l,h,c,p,u;function d(){return e.call(this)||this}r=t.soaring_singlePay||(t.soaring_singlePay={}),i=t.common.CustomList,n=t.common.CommonUtil,s=t.funcOpen.FuncOpenModel,o=t.config.SoaringSinglePayCfg,a=t.money_cat.MoneyCatModel,l=t.zhizun.ZhizunModel,h=t.fight_talisman.FightTalismanModel,c=t.gloves.GlovesModel,p=t.first_pay.FirstPayModel,e=ui.SoaringSinglePayViewUI,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new i,this._list.width=640,this._list.height=665,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=300,this._list.itemRender=r.SoaringSinglePayItem,this.addChildAt(this._list,4)},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SOARING_SINGLEPAY_UPDATE",this,this.showUI),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1)},d.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},d.prototype.showUI=function(){var t=o.instance.getCfgByType(r.SoaringSinglePayModel.instance.cuyType);t.sort(this.sortFunc.bind(this)),this._list.datas=t,this.setActivitiTime()},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.tipsHTML.innerHTML="<span style='color:#50ff28;font-size:22px;font-family:SimHei;'>购买元宝充值界面</span><span style='color:#ffffff;font-size:22px;font-family:SimHei;'>充值指定金额可领奖励，多次充值金额不累加。</span>",this.bgImg.skin="soaringActivity/image_fsbglhd_04.jpg",this.jinDuText.visible=!1,r.SoaringSinglePayCtrl.instance.GetPaySingleFSInfo(),this.showUI1()},d.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,h.instance.state?-1==c.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):a.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==l.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},d.prototype.okBtnHandler=function(){0!=p.instance.giveState?h.instance.state?-1==c.instance.state?WindowManager.instance.open(387):a.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==l.instance.state&&WindowManager.instance.open(351):WindowManager.instance.open(381):WindowManager.instance.open(379):WindowManager.instance.open(118)},d.prototype.sortFunc=function(t,e){var i=r.SoaringSinglePayModel.instance.rewardList,n=t[0],s=e[0],o=i[n]?r.SoaringSinglePayModel.instance.getState(i[n]):0,a=i[s]?r.SoaringSinglePayModel.instance.getState(i[s]):0;return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},d.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=s.instance.getFuncIsOpen(169);r.SoaringSinglePayModel.instance.restTm>=GlobalData.serverTime&&t&&0==r.SoaringSinglePayModel.instance.endFlag?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},d.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampDDHHMMToHHMMSS(r.SoaringSinglePayModel.instance.restTm),r.SoaringSinglePayModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},u=d,r.SoaringSinglePayPanel=u}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("discount_gift_fs"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgByType=function(t){for(var e=[],i=0,n=this.getArr.length;i<n;i++)t==this.getArr[i][3]&&e.push(this.getArr[i]);return e},i=n,e.SoaringSpecialGiftCfg=i}(modules=modules||{}),function(e){var r,i,t,n,s,o,a,l,h,c,p,u,d;function y(){return i.call(this)||this}r=e.soaring_specialGift||(e.soaring_specialGift={}),t=e.common.CustomList,n=e.common.CommonUtil,s=e.funcOpen.FuncOpenModel,o=e.config.SoaringSpecialGiftCfg,a=e.money_cat.MoneyCatModel,l=e.zhizun.ZhizunModel,h=e.fight_talisman.FightTalismanModel,c=e.gloves.GlovesModel,p=e.first_pay.FirstPayModel,u=e.redPoint.RedPointCtrl,i=ui.SoaringSpecialGiftViewUI,__extends(y,i),y.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new t,this._list.width=640,this._list.height=668,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=300,this._list.itemRender=r.SoaringSpecialGiftItem,this.addChildAt(this._list,4)},y.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("SOARING_SPECIALGIFT_GETINFO",this,this.showUI),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1)},y.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},y.prototype.showUI=function(){var t=o.instance.getCfgByType(r.SoaringSpecialGiftModel.instance.cuyType);t.sort(this.sortFunc.bind(this)),this._list.datas=t,this.setActivitiTime()},y.prototype.onOpened=function(){i.prototype.onOpened.call(this),r.SoaringSpecialGiftCtrl.instance.GetDiscountGiftFSInfo(),this.showUI1()},y.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,a.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):0==l.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):h.instance.state?-1==c.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):(this.okBtn.visible=!1,this.wanChengImg.visible=!0,this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)),r.SoaringSpecialGiftModel.instance.isFirstOpen=!1;var t=864e5*Math.ceil((GlobalData.serverTime-GlobalData.timeZoneOffset)/864e5)+GlobalData.timeZoneOffset;localStorage.setItem(e.player.PlayerModel.instance.actorId+"_SoaringSpecialGiftRedLook",""+t),u.instance.setRPProperty("soaringSpecialGiftRP",!1)},y.prototype.okBtnHandler=function(){0!=p.instance.giveState?a.instance.state?!e.halo.HaloModel.instance.isHalo()&&e.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==l.instance.state?WindowManager.instance.open(351):h.instance.state?-1==c.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381):WindowManager.instance.open(118)},y.prototype.sortFunc=function(t,e){var i=r.SoaringSpecialGiftModel.instance.rewardList,n=t[0],s=e[0],o=r.SoaringSpecialGiftModel.instance.getState(i[n]),a=r.SoaringSpecialGiftModel.instance.getState(i[s]);return(o=0===o?1:1===o?0:o)===(a=0===a?1:1===a?0:a)?n-s:o-a},y.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=s.instance.getFuncIsOpen(172);r.SoaringSpecialGiftModel.instance.restTm>=GlobalData.serverTime&&t&&0==r.SoaringSpecialGiftModel.instance.endFlag?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},y.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampToHHMMSS(r.SoaringSpecialGiftModel.instance.restTm),r.SoaringSpecialGiftModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},y.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},d=y,r.SoaringSpecialGiftPanel=d}(modules=modules||{}),function(t){var l,e,i,h,c,s,n;function o(){return null!==e&&e.apply(this,arguments)||this}l=t.marry||(t.marry={}),i=ui.ProposeAlertUI,h=t.config.ItemMaterialCfg,c=t.bag.BagModel,s=t.notice.SystemNoticeManager,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.item_1.needTip=!1},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.item_1,this,this.item_1Handler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("MARRY_RING_REPLACE",this,this.showRing),this.onAutoGlobalEvt("BAG_UPDATE",this,this.showRing),this.icon_1.type=0},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._info=t},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),l.MarryModel.instance.ringId=null,this.showRing(),this.update()},o.prototype.update=function(){var t=this._info[1],e=this._info[0];this.item_2.dataSource=[90140001,t,0,null],this.icon_2.setInfo(e[6],e[3],e[7]),this.nameTxt_1.text=PlayerModel.instance.roleName,this.nameTxt_2.text=e[2]},o.prototype.showRing=function(t){if(null==t||0===t){var e=h.instance.ringItemIds,i=l.MarryModel.instance.ringId,n=!1;if(i&&0<c.instance.getItemCountById(i))n=!0;else for(var s=e.length-1;0<=s;s--)if(i!==e[s]&&c.instance.getItemCountById(e[s])){i=e[s],n=!0;break}i=i||e[0];for(var o=0,a=this.item_1._childs;o<a.length;o++){var r=a[o];r.visible&&r!==this.item_1.addImg&&(r.gray=!n)}this.item_1.addImg.visible=!n,this.item_1.dataSource=[i,0,0,null],this.item_1.isbtnClipIsPlayer=n}},o.prototype.item_1Handler=function(){var t=this.item_1.itemData[0];if(0===c.instance.getItemCountById(t))l.MarryCtrl.instance.openRingBuyAlert();else{for(var e=0,i=h.instance.ringItemIds,n=i.length-1;0<=n;n--)if(t!==i[n]&&c.instance.getItemCountById(i[n])){e++;break}0===e?s.instance.addNotice("无可替换义戒",!0):WindowManager.instance.open(499,t)}},o.prototype.btnHandler=function(){var t=this.item_1.itemData[0];if(l.MarryModel.instance.isRequestMarry(this._info[0][0]))CommonUtil.noticeError(46625);else if(0===c.instance.getItemCountById(t))l.MarryCtrl.instance.openRingBuyAlert();else if(CommonUtil.getPropCountById(90140001)<this._info[1])CommonUtil.goldNotEnoughAlert();else{var e=h.instance.ringItemIds.indexOf(t)+1;l.MarryCtrl.instance.requestMarry(this._info[0][0],e),this.close()}},o.prototype.close=function(){WindowManager.instance.close(499),e.prototype.close.call(this)},n=o,l.ProposeAlert=n}(modules=modules||{}),function(s){var o,n,t,a,e;function i(){return null!==n&&n.apply(this,arguments)||this}o=s.marry||(s.marry={}),t=ui.DivorceAlertUI,a=s.config.BlendCfg,n=t,__extends(i,n),i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler)},i.prototype.onOpened=function(){if(n.prototype.onOpened.call(this),o.MarryModel.instance.isSeekMan){this.noTxt.visible=!1,this.box.visible=!0;var t=a.instance.getCfgById(75008)[1][0],e=o.MarryModel.instance.marryDay,i=a.instance.getCfgById(75009)[1][0];this.conditionTxt_1.text="结缘时长超过"+t+"天",this.valueTxt.text="("+e+"/"+t+")",this.valueTxt.color=e<t?"#ff3e3e":"#168a17",this.conditionTxt_2.text="支付"+i+"元宝"}else this.noTxt.visible=!0,this.box.visible=!1},i.prototype.btnHandler=function(){if(o.MarryModel.instance.isSeekMan){var t=a.instance.getCfgById(75008)[1][0];if(o.MarryModel.instance.marryDay<t){var e=a.instance.getCfgById(75009)[1][0];if(CommonUtil.getPropCountById(90140001)<e)CommonUtil.goldNotEnoughAlert();else{var i=Handler.create(o.MarryCtrl.instance,o.MarryCtrl.instance.requestDivorce),n=(0<s.redBag.RedBagModel.instance.getChanlByRPpkg(4)?"您还有未发放的红包，解散仙缘时红包将由系统回收,":"")+"结缘时长不足"+t+'天,是否支付<img src="'+CommonUtil.getIconById(90140001)+'" width="40" height="40"/>'+e+",与"+o.MarryModel.instance.half[2]+'解除仙缘关系?<span color="#FF3E3E">分离后刻印效果会消失</span>。';CommonUtil.alert("提示",n,[i],[])}}else this.twiceAlert()}else this.twiceAlert()},i.prototype.ruleBtnHandler=function(){CommonUtil.alertHelp(20074)},i.prototype.twiceAlert=function(){var t=Handler.create(o.MarryCtrl.instance,o.MarryCtrl.instance.requestDivorce),e=(0<s.redBag.RedBagModel.instance.getChanlByRPpkg(4)?"您还有未发放的红包，解散仙缘时红包将由系统回收,":"")+'<span color="#FF3E3E">分离后刻印效果会消失</span>，是否确认与'+o.MarryModel.instance.half[2]+"解除仙缘关系?";CommonUtil.alert("提示",e,[t],[])},e=i,o.DivorceAlert=e}(modules=modules||{}),function(t){var s,e,i,n,o,a,r,l,h,c,p;function u(){return null!==e&&e.apply(this,arguments)||this}s=t.marry||(t.marry={}),i=ui.MarryViewUI,n=t.common.AvatarClip,o=t.config.MarryIntimacyCfg,a=t.common.CustomClip,r=t.bag.BagModel,l=t.bag.BagUtil,h=t.config.ExteriorCfg,c=t.rename.RenameModel,e=i,__extends(u,e),u.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._eff=CommonUtil.creatEff(null,"ok_state",7),this._eff.pos(490,780),this.addChildAt(this._eff,3),this._btnEff=CommonUtil.creatEff(this,"btn_light",15),this._btnEff.pos(this.btn.x-5,this.btn.y-10),this._leftAvatar=n.normalCreate(1024,1024,512),this._leftAvatar.y=648,this.addChildAt(this._leftAvatar,2),this._rightAvatar=n.normalCreate(1024,1024,512),this._rightAvatar.y=648,this.addChildAt(this._rightAvatar,2),this._bar=new t.common.ProgressBarCtrl(this.barImg,this.barImg.width,this.barTxt),this._tweenJS=TweenJS.create(this._bar),this.linkTxt.underline=!0,this.hidden_4.skin=CommonUtil.getIconById(o.instance.intimacyId)},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.divorceImg,this,this.divorceHandler),this.onAutoClick(this.taskImg,this,this.taskHandler),this.onAutoClick(this.intimacyBtn,this,this.intimacyHandler),this.onAutoClick(this.linkTxt,this,this.linkHandler),this.onAutoClick(this.squareImg,this,this.squareHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.msgImg,this,this.msgImgHandler),this.onAutoClick(this.lookBtn,this,this.lookHanlder),this.onAutoGlobalEvt("MARRY_INFO_UPDATE",this,this.update),this.onAutoGlobalEvt("MARRY_INTIMACY_UPDATE",this,this.intimacyUpdate),this.onAutoGlobalEvt("BAG_UPDATE",this,this.propUpdate),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc),this.onAutoGlobalEvt("MARRY_MARK_UPDATE",this,this.update),this.regAutoRP(this.msgRP,["marryMessageRP"]),this.regAutoRP(this.taskRP,["marryTaskRP"]),this.regAutoRP(this.intimacyRP,["marryIntimacyAwardsRP"])},u.prototype.lookHanlder=function(){var t=s.MarryModel.instance.half;t&&(ChatCtrl.instance.getChatDetailedInfo([PlayerModel.instance.actorId,t[0],t[11]]),WindowManager.instance.open(154,[t[4],t[4]]))},u.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._bar.maxValue=10*o.instance.getCfgByLv(s.MarryModel.instance.intimacyLv)[1],this._bar.value=10*s.MarryModel.instance.intimacyValue,this.update(),this.msgRPUpdate()},u.prototype.update=function(){var t=s.MarryModel.instance.mark;this.fightMsz.value=(s.MarryModel.instance.ringFight+s.MarryModel.instance.tokenFeedFight+s.MarryModel.instance.tokenRankFight+(t?t[3]:0)).toString();var e=s.MarryModel.instance.half;if(this.showState=e&&!!e[3],e&&e[3]){this.lookBtn.visible=!0,this.dayTxt.text="已结缘"+s.MarryModel.instance.marryDay+"天";var i=void 0,n=void 0;PlayerModel.instance.occ!==e[3]&&2===PlayerModel.instance.occ?(this.setAvatarClip(this.rNameTxt,PlayerModel.instance.roleName,this.rStateTxt,!0),this.setAvatarClip(this.lNameTxt,e[2],this.lStateTxt,e[10]),this._leftAvatar.reset(10*h.instance.marryFashionId+1),this._rightAvatar.reset(10*h.instance.marryFashionId+2),this._leftAvatar.setActionType("show_1000",Number.POSITIVE_INFINITY),this._rightAvatar.setActionType("show_1000",Number.POSITIVE_INFINITY),i=1,n=2,this.lookBtn.x=337):(this.setAvatarClip(this.lNameTxt,PlayerModel.instance.roleName,this.lStateTxt,!0),this.setAvatarClip(this.rNameTxt,e[2],this.rStateTxt,e[10]),this._leftAvatar.reset(10*h.instance.marryFashionId+PlayerModel.instance.occ),this._rightAvatar.reset(10*h.instance.marryFashionId+e[3]),this._leftAvatar.setActionType("show_1000",Number.POSITIVE_INFINITY),this._rightAvatar.setActionType("show_1000",Number.POSITIVE_INFINITY),i=PlayerModel.instance.occ,n=e[3],this.lookBtn.x=627),1===i&&2===n?(this._leftAvatar.x=355,this._rightAvatar.x=371):1===i&&1===n?(this._leftAvatar.x=352,this._rightAvatar.x=532):(this._leftAvatar.x=222,this._rightAvatar.x=371),this.intimacyUpdate()}else a.thisStop(this._eff),a.thisStop(this._btnEff),this.lookBtn.visible=!1},u.prototype.intimacyUpdate=function(){this.intimacyTxt.text="Lv."+s.MarryModel.instance.intimacyLv,s.MarryModel.instance.intimacyLv>s.MarryModel.instance.intimacyDrawLv?a.thisPlay(this._eff):a.thisStop(this._eff),this.tweenUpdate(),this.propUpdate()},u.prototype.tweenUpdate=function(){var t=this;if(!this._tweenJS.isPlaying){var e=10*o.instance.getCfgByLv(s.MarryModel.instance.intimacyLv)[1];e!==this._bar.maxValue||this._bar.value!==10*s.MarryModel.instance.intimacyValue?e>this._bar.maxValue?(this._bar.maxValue=e,this._tweenJS.to({value:e},1e3).start().onComplete(function(){t._bar.value=0,t.tweenUpdate()})):this._tweenJS.to({value:10*s.MarryModel.instance.intimacyValue},1e3).start().onComplete(function(){t.tweenUpdate()}):(this._tweenJS.stop(),o.instance.has(s.MarryModel.instance.intimacyLv+1)||(this._bar.value=this._bar.maxValue))}},u.prototype.propUpdate=function(t){if((null==t||0===t)&&s.MarryModel.instance.isMarried)if(o.instance.has(s.MarryModel.instance.intimacyLv+1)){this.btn.visible=this.hidden_4.visible=this.countTxt.visible=this.linkTxt.visible=!0,this.maxTxt.visible=!1;var e=r.instance.getItemCountById(o.instance.intimacyId);this.countTxt.text=e.toString();var i=o.instance.getCfgByLv(s.MarryModel.instance.intimacyLv)[1];(i-=s.MarryModel.instance.intimacyValue)<=e?(this.countTxt.color="#50ff28",a.thisPlay(this._btnEff)):(this.countTxt.color=0===e?"#ff3e3e":"#ffffff",a.thisStop(this._btnEff))}else a.thisStop(this._btnEff),this.btn.visible=this.hidden_4.visible=this.countTxt.visible=this.linkTxt.visible=!1,this.maxTxt.visible=!0},u.prototype.updateName=function(){if(s.MarryModel.instance.isMarried){var t=c.instance.updateNameReply;t&&t[0]===s.MarryModel.instance.half[0]&&(s.MarryModel.instance.half[2]=t[1]),this.update()}},u.prototype.updateOcc=function(){if(s.MarryModel.instance.isMarried){var t=c.instance.updateOccReply;t&&s.MarryModel.instance.half[0]===t[0]&&(s.MarryModel.instance.half[3]=t[1]),this.update()}},u.prototype.msgRPUpdate=function(){this.msgRP.visible=s.MarryModel.instance.isMarried&&t.chat.ChatModel.instance.getNoseeMessage(5)},u.prototype.divorceHandler=function(){WindowManager.instance.open(501)},u.prototype.taskHandler=function(){WindowManager.instance.open(500)},u.prototype.intimacyHandler=function(){WindowManager.instance.open(489)},u.prototype.btnHandler=function(){s.MarryModel.instance.half[3]?0===r.instance.getItemCountById(o.instance.intimacyId)?l.openLackPropAlert(o.instance.intimacyId,1):s.MarryCtrl.instance.growMarryLevel():this.squareHandler()},u.prototype.msgImgHandler=function(){WindowManager.instance.open(513)},Object.defineProperty(u.prototype,"showState",{set:function(t){this.btn.label=t?"一键培养":"寻找缘分",this.btn.y=t?1037:950,this._leftAvatar&&(this._leftAvatar.visible=t),this._rightAvatar&&(this._rightAvatar.visible=t),this.noneImg.visible=this.noneTxt.visible=!t,this.msgImg.visible=this.linkTxt.visible=this.dayTxt.visible=this.countTxt.visible=this.lNameTxt.visible=this.rNameTxt.visible=this.lStateTxt.visible=this.rStateTxt.visible=this.barImg.visible=this.barTxt.visible=this.intimacyBtn.visible=this.intimacyTxt.visible=this.divorceImg.visible=this.divorceTxt.visible=this.divorceBtn.visible=this.taskImg.visible=this.taskTxt.visible=this.taskBtn.visible=this.hidden_1.visible=this.hidden_2.visible=this.hidden_3.visible=this.hidden_4.visible=this.hidden_5.visible=this.hidden_6.visible=this.hidden_7.visible=t},enumerable:!0,configurable:!0}),u.prototype.linkHandler=function(){l.openLackPropAlert(o.instance.intimacyId,1)},u.prototype.squareHandler=function(){WindowManager.instance.open(491)},u.prototype.setAvatarClip=function(t,e,i,n){t.text=e,i.text=n?"在线":"离线",i.color=n?"#50ff28":"#c6c6c6"},u.prototype.close=function(){this._tweenJS&&this._tweenJS.stop(),e.prototype.close.call(this)},u.prototype.destroy=function(){this._leftAvatar=this.destroyElement(this._leftAvatar),this._rightAvatar=this.destroyElement(this._rightAvatar),this._bar=this.destroyElement(this._bar),this._btnEff=this.destroyElement(this._btnEff),this._eff=this.destroyElement(this._eff),this._tweenJS&&(this._tweenJS=null),e.prototype.destroy.call(this)},p=u,s.MarryPanel=p}(modules=modules||{}),function(i){var n,s,t,o,a,r,e;function l(){return null!==s&&s.apply(this,arguments)||this}n=i.marry||(i.marry={}),t=ui.MarryCopyAlertUI,o=i.bag.BaseItem,a=i.config.SceneCopyMarryCfg,r=i.common.CustomClip,s=t,__extends(l,s),l.prototype.initialize=function(){s.prototype.initialize.call(this),this._items=[];for(var t=a.instance.awards,e=0,i=t.length>>1;e<i;e++)if(!this._items[e]){var n=new o;n.nameVisible=!1,this.addChild(n),n.y=570,this._items[e]=n}CommonUtil.showItems(this._items,CommonUtil.formatItemData(t)),CommonUtil.centerChainArr(this.width,this._items,20),this._btnEff=CommonUtil.creatEff(this,"btn_light",15),this._btnEff.pos(this.btn.x-5,this.btn.y-10,!0)},l.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("MARRY_COPY_UPDATE",this,this.update)},l.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.update()},l.prototype.update=function(){var t=n.MarryModel.instance.copyInfo;if(t){var e=t[0],i=t[1];this.countTxt.text=i+"/"+e,this.countTxt.color=i<=0?"#ff3e3e":"#168a17",0<i?r.thisPlay(this._btnEff):r.thisStop(this._btnEff)}},l.prototype.addBtnHandler=function(){WindowManager.instance.open(59,94)},l.prototype.btnHandler=function(){var t=n.MarryModel.instance.copyInfo;if(t){var e=t[1];n.MarryModel.instance.isMarried?i.dungeon.DungeonCtrl.instance.reqEnterScene(2381):0<e?i.bag.BagUtil.checkNeedSmeltTip()||(CommonUtil.whetherInCopy()?CommonUtil.notChangeTips():i.common_group.CommonGroupUtil.notTeamCopyIsTeaming()||WindowManager.instance.open(1137)):i.notice.SystemNoticeManager.instance.addNotice("副本次数不足",!0)}},l.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnEff=this.destroyElement(this._btnEff),s.prototype.destroy.call(this)},e=l,n.MarryCopyAlert=e}(modules=modules||{}),function(n){var p,e,t,u,d,y,g,f,i,s;function o(){return null!==e&&e.apply(this,arguments)||this}p=n.marry||(n.marry={}),t=ui.SkillAlertUI,u=n.common.CustomClip,d=n.config.SkillCfg,y=n.config.SkillPureCfg,g=n.config.RingSkillCfg,f=n.config.BlendCfg,i=n.bag.BagUtil,e=t,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.titleTxt.text="义戒技能",this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.btn.x-5,this.btn.y-10)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("MARRY_RING_UPDATE",this,this.update),this.onAutoGlobalEvt("MARRY_RING_SKILL_UPDATE",this,this.update)},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._skillId=t,this._type=g.instance.commonSkillIds.indexOf(this._skillId)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},o.prototype.update=function(){var t=p.MarryModel.instance.getSkillLvById(this._skillId),e=y.instance.getCfgById(this._skillId),i=CommonUtil.getSkillIdByPureIdAndLv(this._skillId,0===t?1:t),n=d.instance.getCfgById(i),s=d.instance.getCfgById(i+1);this.iconImg.skin="assets/icon/skill/"+e[6]+".png",this.nameTxt.text=e[1]+"  Lv."+t,this.powerTxt.text="战力:"+(0===t?0:n[3]);var o=!1;if(this.btn.visible=!0,(this._count=0)===t){if(this.curLvDesc.text="无",this.btn.label="激活",-1!==this._type)p.MarryModel.instance.ringLv>=g.instance.commonSkillActiveLv[this._type]&&(o=!0),this.conditionTxt.visible=!0,this.propBox.visible=!1,this.conditionTxt.text="激活条件：义戒等级 Lv."+g.instance.commonSkillActiveLv[this._type],this.conditionTxt.color=o?"#168a17":"#ff3e3e";else{this.conditionTxt.visible=!1,this.propBox.visible=!0;var a=g.instance.typeSkillIds.indexOf(this._skillId),r=f.instance.getCfgById(75010)[1][a];this.propImg.skin=CommonUtil.getIconById(r);var l=CommonUtil.getPropCountById(r);this.propTxt.text=l+"/1",this.propTxt.color=l<1?"#ff3e3e":"#168a17",1<=l&&(o=!0),this._itemId=r,this._count=1-l}this.nextLvDesc.text=CommonUtil.stringFormat(e[5],n[2])}else if(this.curLvDesc.text=CommonUtil.stringFormat(e[5],n[2]),this.btn.label="升级",g.instance.has(this._skillId,t+1)){var h=g.instance.getCfgByIdLv(this._skillId,t);CommonUtil.conditionItemIsEnough(h[2])&&(o=!0),this.conditionTxt.visible=!1,this.propBox.visible=!0,r=h[2][0],this.propImg.skin=CommonUtil.getIconById(r),l=CommonUtil.getPropCountById(r),this.propTxt.text=l+"/"+h[2][1],this.propTxt.color=o?"#168a17":"#ff3e3e",this.nextLvDesc.text=CommonUtil.stringFormat(e[5],s[2]),this._itemId=r,this._count=h[2][1]-l}else this.propBox.visible=this.btn.visible=!1,this.conditionTxt.visible=!0,this.conditionTxt.text="已满级",this.conditionTxt.color="#00AD35",this.nextLvDesc.text="已达最大等级";var c=g.instance.typeSkillIds.indexOf(this._skillId);0===t&&-1!==c&&o&&!p.MarryModel.instance.isMarried?(u.thisStop(this._btnClip),this.btn.gray=!0):(o?u.thisPlay(this._btnClip):u.thisStop(this._btnClip),this.btn.gray=!o)},o.prototype.btnHandler=function(){if(p.MarryModel.instance.isMarried)this.commonHandler();else{var t=g.instance.typeSkillIds.indexOf(this._skillId);if(-1!==t)if(0===p.MarryModel.instance.getSkillLvById(this._skillId)){var e=f.instance.getCfgById(75010)[1][t],i=n.config.ItemMaterialCfg.instance.getItemCfgById(e)[1];n.notice.SystemNoticeManager.instance.addNotice("使用"+i+"结缘或结缘后消耗"+i+"可激活",!0)}else this.commonHandler();else this.commonHandler()}},o.prototype.commonHandler=function(){0<this._count?i.openLackPropAlert(this._itemId,this._count):0===p.MarryModel.instance.getSkillLvById(this._skillId)?p.MarryCtrl.instance.activeRingSkill(this._skillId):p.MarryCtrl.instance.growRingSkill(this._skillId)},o.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},s=o,p.MarrySkillAlert=s}(modules=modules||{}),function(s){var o,e,t,i,a,r,l,n,h,c;function p(){return null!==e&&e.apply(this,arguments)||this}o=s.marry||(s.marry={}),t=ui.MarryRingViewUI,i=s.config.RingSkillCfg,a=s.common.CustomClip,r=s.config.RingLevelCfg,l=s.bag.BagModel,n=s.bag.BagUtil,h=s.config.BlendCfg,e=t,__extends(p,e),p.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnEff=CommonUtil.creatEff(this,"btn_light",15),this._btnEff.pos(261,this.btn.y-10),this._bar=new s.common.ProgressBarCtrl(this.barImg,this.barImg.width,this.barTxt),this._tweenJS=TweenJS.create(this._bar),this.icon_1.id=i.instance.commonSkillIds[0],this.icon_2.id=i.instance.commonSkillIds[1],this.icon_3.id=i.instance.commonSkillIds[2],this.icon_4.id=i.instance.commonSkillIds[3],this.icon_5.id=i.instance.typeSkillIds[0],this.icon_6.id=i.instance.typeSkillIds[1],this.icon_7.id=i.instance.typeSkillIds[2],this.icon_8.id=i.instance.typeSkillIds[3],this.propImg.skin=CommonUtil.getIconById(r.instance.costItemId,!0),this._attrNameTxts=[this.attrNameTxt_1,this.attrNameTxt_2,this.attrNameTxt_3,this.attrNameTxt_4],this._attrTxts=[this.attrTxt_1,this.attrTxt_2,this.attrTxt_3,this.attrTxt_4],this._upTxts=[this.upTxt_1,this.upTxt_2,this.upTxt_3,this.upTxt_4],this._arrImgs=[this.arrImg_1,this.arrImg_2,this.arrImg_3,this.arrImg_4],this._ringTween=TweenJS.create(this.clipImg).yoyo(!0).repeat(Number.POSITIVE_INFINITY)},p.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.copyImg,this,this.copyImgHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.connectImg,this,this.connectImgHandler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoClick(this.markBtn,this,this.markHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.propUpdate),this.onAutoGlobalEvt("MARRY_RING_UPDATE",this,this.propUpdate),this.onAutoGlobalEvt("MARRY_RING_UPDATE",this,this.update),this.onAutoGlobalEvt("MARRY_RING_SKILL_UPDATE",this,this.updateFight),this.onAutoGlobalEvt("MARRY_MARK_UPDATE",this,this.updateMark),this.regAutoRP(this.resonanceRP,["marryRingResonanceRP"]),this.regAutoRP(this.copyRP,["marryCopyRP"]),this.regAutoRP(this.markRP,["marryMarkRP"])},p.prototype.onOpened=function(){e.prototype.onOpened.call(this);var t=r.instance.getCfgByLv(o.MarryModel.instance.ringLv||1);this._bar.maxValue=10*t[1][1],this._bar.value=10*o.MarryModel.instance.ringSchedule,this._recordLv=o.MarryModel.instance.ringLv,this.update(),this.propUpdate(),this.updateMark(),this.clipImg.y=240,this._ringTween.to({y:210},1e3).start(),o.MarryCtrl.instance.getMarryCopyTimes()},p.prototype.updateFight=function(){var t=o.MarryModel.instance.mark;this.fightMsz.value=(o.MarryModel.instance.ringFight+(t?t[3]:0)).toString()},p.prototype.updateMark=function(){this.markedImg.visible=o.MarryModel.instance.mark&&0!==o.MarryModel.instance.mark[1],this.updateFight()},p.prototype.update=function(){this.lvTxt.text="Lv."+o.MarryModel.instance.ringLv;var t=-1===o.MarryModel.instance.ringType?1:o.MarryModel.instance.ringType;this.clipImg.skin="marry/icon_xyxt_jz0"+t+".png";var e,i=r.instance.getCfgByLv(o.MarryModel.instance.ringLv),n=!r.instance.has(o.MarryModel.instance.ringLv+1);(this.show=n)||(e=r.instance.getCfgByLv(o.MarryModel.instance.ringLv+1)),s.common.AttrUtil.setAttrTxts(i,e,this._attrNameTxts,this._attrTxts,this._arrImgs,this._upTxts,2),this.tweenUpdate()},Object.defineProperty(p.prototype,"show",{set:function(t){t&&a.thisStop(this._btnEff),this.lvTxt.visible=this.barImg.visible=this.barBgImg.visible=this.barTxt.visible=this.btn.visible=this.propImg.visible=this.propTxt.visible=!t,this.maxTxt.visible=t},enumerable:!0,configurable:!0}),p.prototype.tweenUpdate=function(){var t=this;if(!this._tweenJS.isPlaying)if(this._recordLv<o.MarryModel.instance.ringLv){var e=r.instance.getCfgByLv(this._recordLv),i=10*e[1][1];this._bar.maxValue=i,this._tweenJS.to({value:i},1e3).start().onComplete(function(){t._recordLv++,e=r.instance.getCfgByLv(t._recordLv),i=10*e[1][1],t._bar.maxValue=i,t._bar.value=0,t.tweenUpdate()})}else this._bar.value<10*o.MarryModel.instance.ringSchedule?this._tweenJS.to({value:10*o.MarryModel.instance.ringSchedule},1e3).start().onComplete(function(){t.tweenUpdate()}):this._tweenJS.stop()},p.prototype.propUpdate=function(t){if(null==t||0===t){var e=l.instance.getItemCountById(r.instance.costItemId);this.propTxt.text=e.toString();var i=r.instance.getCfgByLv(o.MarryModel.instance.ringLv)[1][1];i-=o.MarryModel.instance.ringSchedule;var n=!r.instance.has(o.MarryModel.instance.ringLv+1);i<=e&&!n&&0!=i?(this.propTxt.color="#50ff28",a.thisPlay(this._btnEff)):(this.propTxt.color=0===e?"#ff3e3e":"#ffffff",a.thisStop(this._btnEff))}},p.prototype.copyImgHandler=function(){WindowManager.instance.open(503)},p.prototype.btnHandler=function(){l.instance.getItemCountById(r.instance.costItemId)<=0?-1===o.MarryModel.instance.ringType?s.notice.SystemNoticeManager.instance.addNotice("激活任意义戒后开启",!0):n.openLackPropAlert(r.instance.costItemId,1):-1===o.MarryModel.instance.ringType?s.notice.SystemNoticeManager.instance.addNotice("激活任意义戒后开启",!0):o.MarryCtrl.instance.growRingLevel()},p.prototype.connectImgHandler=function(){o.MarryModel.instance.ringType<h.instance.getCfgById(75014)[1][0]?CommonUtil.noticeError(46613):WindowManager.instance.open(39,5)},p.prototype.ruleBtnHandler=function(){CommonUtil.alertHelp(20075)},p.prototype.markHandler=function(){WindowManager.instance.open(843)},p.prototype.close=function(){this._tweenJS&&this._tweenJS.stop(),this._ringTween&&this._ringTween.stop(),e.prototype.close.call(this)},p.prototype.destroy=function(){this._tweenJS&&this._tweenJS.stop()&&(this._tweenJS=null),this._ringTween&&this._ringTween.stop()&&(this._ringTween=null),this._bar.destroy(),this._bar=null,this._btnEff=this.destroyElement(this._btnEff),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._attrTxts=this.destroyElement(this._attrTxts),this._upTxts=this.destroyElement(this._upTxts),this._arrImgs=this.destroyElement(this._arrImgs),e.prototype.destroy.call(this)},c=p,o.MarryRingPanel=c}(modules=modules||{}),function(t){var a,e,i,n,s,o;function r(){return null!==e&&e.apply(this,arguments)||this}a=t.marry||(t.marry={}),i=ui.MarryTaskViewUI,n=t.common.BtnGroup,s=t.common.SimpleList,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._tab=new n,this._tab.setBtns(this.btn_1,this.btn_2),this._list_1=s.create(a.MarryTaskItem_2,627,130,1,1,0,5),this._list_1.size(627,916),this._list_1.pos(44,107,!0),this.addChild(this._list_1),this._list_2=s.create(a.MarryTaskItem_1,627,130,1,1,0,5),this._list_2.size(627,916),this._list_2.pos(44,107,!0),this.addChild(this._list_2),this.addChild(this.closeBtn)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._tab,"change",this,this.update),this.onAutoGlobalEvt("MARRY_TASK_UPDATE",this,this.update)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._tab.selectedIndex=this.rpIndex},r.prototype.update=function(){var t=a.MarryModel.instance.getTasksByType(1-this._tab.selectedIndex);t.sort(this.sortFunc.bind(this)),1===this._tab.selectedIndex?(this._list_2.visible=!0,this._list_1.visible=!1,this._list_2.datas=t):(this._list_2.visible=!1,this._list_1.visible=!0,this._list_1.datas=t);for(var e=[this.rp_2,this.rp_1],i=0;i<2;i++){for(var n=!1,s=0,o=a.MarryModel.instance.getTasksByType(i);s<o.length;s++)if(2===o[s][1]){n=!0;break}e[i].visible=n}},Object.defineProperty(r.prototype,"rpIndex",{get:function(){for(var t=1;0<=t;t--)for(var e=0,i=a.MarryModel.instance.getTasksByType(t);e<i.length;e++)if(2===i[e][1])return 1-t;return 0},enumerable:!0,configurable:!0}),r.prototype.sortFunc=function(t,e){var i=t[1],n=e[1];return i===n?CommonUtil.smallToBigSort(t[0],e[0]):2===i?-1:2===n?1:1===i?-1:1===n?1:0},r.prototype.destroy=function(){this._tab=this.destroyElement(this._tab),this._list_1=this.destroyElement(this._list_1),this._list_2=this.destroyElement(this._list_2),e.prototype.destroy.call(this)},o=r,a.MarryTaskPanel=o}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.RingReplaceViewUI,s=t.config.ItemMaterialCfg,o=t.bag.BagModel,a=t.common.SimpleList,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=120,this.centerY=100,this.layer=5,this._list=a.create(e.RingReplaceItem,298,117,1,1,5),this.addChild(this._list),this._list.size(300,300),this._list.pos(28,84,!0)},l.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._ringId=t},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},l.prototype.update=function(){for(var t=s.instance.ringItemIds,e=[],i=t.length-1;0<=i;i--)this._ringId!==t[i]&&o.instance.getItemCountById(t[i])&&e.push(t[i]);this._list.datas=e},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},r=l,e.RingReplacePanel=r}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.MarrySquareViewUI,s=t.common.SimpleList,o=t.common.BtnGroup,a=t.config.BlendCfg,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=s.create(e.MarrySquareItem,627,130),this._list.pos(44,108,!0),this._list.size(627,810),this.addChild(this._list),this.addChild(this.closeBtn),this._tab=new o,this._tab.setBtns(this.btn_1,this.btn_2),this._flag=!1,CommonUtil.setHTMLPro(this.txt,"#ffec7c","SimHei",22),this.txt.mouseEnabled=!1,this.txt.style.wordWrap=!1},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._tab,"change",this,this.changeHandler),this.onAutoClick(this.seekBtn,this,this.seekBtnHandler),this.onAutoClick(this.searchBtn,this,this.searchBtnHandler),this.onAutoClick(this.ruleBtn,this,this.ruleHandler),this.onAutoGlobalEvt("MARRY_SEARCH_HALF",this,this.searchResult),this.onAutoGlobalEvt("MARRIAGE_SEEKS_INIT",this,this.update),this.onAutoGlobalEvt("MARRY_SELECT_SQUARE_TAB",this,this.updateSelect),this.onAutoGlobalEvt("PLAYER_UPDATE_CHARM",this,this.updateCharm)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._tab.selectedIndex=0,this.updateCharm()},l.prototype.changeHandler=function(){this._flag?this._flag=!1:0===this._tab.selectedIndex?e.MarryCtrl.instance.getMarriageSeek():e.MarryCtrl.instance.getMarriageSeek(1)},l.prototype.update=function(){0===this._tab.selectedIndex?this._list.datas=e.MarryModel.instance.crossMarriageSeeks:this._list.datas=e.MarryModel.instance.localMarriageSeeks},l.prototype.updateCharm=function(){var t=a.instance.getCfgById(75006)[1],e=t[0],i=t[1];if(PlayerModel.instance.charm<e){this._list.height=775,this.tipBox.visible=!0;var n=CommonUtil.formatHtmlStrByColor("#50ff28",""+i),s=(CommonUtil.formatHtmlStrByColor("#50ff28",""+e),CommonUtil.formatHtmlStrByColor("#50ff28",""+PlayerModel.instance.charm));this.txt.innerHTML="魅力值达到"+n+"点可与其他玩家义结金兰,你当前魅力值:"+s,CommonUtil.centerChainArr(this.tipBox.width,[this.txt])}else this._list.height=810,this.tipBox.visible=!1},l.prototype.updateSelect=function(t){this._tab.selectedIndex=t},l.prototype.seekBtnHandler=function(){WindowManager.instance.open(486)},l.prototype.searchBtnHandler=function(){WindowManager.instance.open(485)},l.prototype.ruleHandler=function(){CommonUtil.alertHelp(20073)},l.prototype.searchResult=function(t){this._flag=!0,this._tab.selectedIndex=0,this._list.datas=[t]},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._tab=this.destroyElement(this._tab),i.prototype.destroy.call(this)},r=l,e.MarrySquarePanel=r}(modules=modules||{}),function(t){var e,i;function n(){this.cfgs=GlobalData.getConfig("wedding_ring_buy")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),i=n,e.WeddingRingBuyCfg=i}(modules=modules||{}),function(r){var l,t,e,i,h,c,s,p,n;function o(){return null!==t&&t.apply(this,arguments)||this}l=r.marry||(r.marry={}),e=ui.RingBuyAlertUI,i=r.common.BtnGroup,h=r.config.WeddingRingBuyCfg,c=r.bag.BaseItem,s=r.common.CustomClip,p=r.bag.BagUtil,t=e,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._tab=new i,this._tab.setBtns(this.group_1,this.group_2,this.group_3),this._txts=[this.groupTxt_1,this.groupTxt_2,this.groupTxt_3],this._items=[],this.icon_3.skin=CommonUtil.getIconById(h.instance.cfgs[1][1][0],!0),this.icon_4.skin=CommonUtil.getIconById(h.instance.cfgs[0][1][0],!0),this._txts[0].text=h.instance.cfgs[0][1][2].toString(),this._txts[1].text=h.instance.cfgs[1][1][2].toString(),this._txts[2].text="累充"+h.instance.cfgs[2][4].toString()+"元",this.rechargeTotalTxt.text=h.instance.cfgs[2][4]+"元",this._giftBoxNames=["缘来缘往礼盒","天涯知己礼盒","情谊永恒礼盒"],this._skins=["marry/btn_xyxt_qbjj.png","marry/btn_xyxt_qbjj02.png","marry/btn_xyxt_zays.png","marry/btn_xyxt_zays02.png","marry/btn_xyxt_yhzl02.png","marry/btn_xyxt_yhzl.png"]},o.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._tab,"change",this,this.changeHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("MARRY_RING_BUY_UPDATE",this,this.update),this.regAutoRP(this.rpImg,["ringBuyRP"])},o.prototype.offEvt=function(){t.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler),this._btnClip&&s.thisStop(this._btnClip)},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._tab.selectedIndex=0,this.update(!0)},o.prototype.update=function(t){void 0===t&&(t=!1);var e=h.instance.cfgs[this._tab.selectedIndex],i=l.MarryModel.instance.getRingBuyState(h.instance.cfgs[2][0]);if(this.gotImg.skin="common/txt_commmon_ylq.png",2===i||l.MarryModel.instance.ringBuyTime<=GlobalData.serverTime?(t&&(this.hiddenTab=!1),l.MarryModel.instance.ringBuyTime<=GlobalData.serverTime&&(this.timeDesTxt.text="活动已结束",this.timeTxt.visible=!1,Laya.timer.clear(this,this.loopHandler))):(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()),2===this._tab.selectedIndex)this.setRechargeState(i),2!==i&&l.MarryModel.instance.ringBuyTime<=GlobalData.serverTime&&(this.btn.visible=!1,s.thisStop(this._btnClip),this.gotImg.visible=!this.btn.visible,this.gotImg.skin="common/txt_commmon_yjies.png");else{s.thisStop(this._btnClip);var n=l.MarryModel.instance.getBuyCount(e[0])>=e[2];this.btn.visible=!n,this.btn.visible?this.clipPlay():s.thisStop(this._btnClip),this.btn.label="立即获取",this.gotImg.visible=n}this.rechargeCurTxt.text=l.MarryModel.instance.ringBuyMoney+"元"},o.prototype.setRechargeState=function(t){2===t?(this.btn.visible=!1,s.thisStop(this._btnClip),this.gotImg.visible=!0,s.thisStop(this._btnClip)):(this.btn.visible=!0,this.clipPlay(),this.gotImg.visible=!1,this.btn.label=0===t?"立即获取":"领取")},o.prototype.changeHandler=function(){var t=this._tab.oldSelectedIndex;0<=t&&(this._tab.oldSelectedBtn.skin=this._skins[2*t]),t=this._tab.selectedIndex,this._tab.selectedBtn.skin=this._skins[2*t+1],this.giftBoxNameTxt.text=this._giftBoxNames[t];for(var e=h.instance.cfgs[t],i=CommonUtil.formatItemData(2===t?e[6]:e[3]),n=.5*(this.width-100*i.length-20*(i.length-1)),s=i.length>this._items.length?i.length:this._items.length,o=0;o<s;o++)if(i.length>o){var a=this._items[o];a||((a=new c).nameVisible=!1,this.addChild(a),a.y=368,this._items[o]=a),a.visible=!0,a.dataSource=i[o],a.x=n+120*o}else this._items[o]&&(this._items[o].visible=!1);var r=e[1];0<r.length&&(this.icon_1.skin=this.icon_2.skin=CommonUtil.getIconById(r[0],!0),this.originalTxt.text=r[1].toString(),this.currentTxt.text=r[2].toString()),2===t?(this.rechargeBox.visible=!0,this.priceBox.visible=!1,this.ringDesImg.skin="marry/txt_xyxt_03.png"):(this.priceBox.visible=!0,this.rechargeBox.visible=!1,this.ringDesImg.skin=0===t?"marry/txt_xyxt_hjjz.png":"marry/txt_xyxt_02.png"),this.update()},o.prototype.loopHandler=function(){l.MarryModel.instance.ringBuyTime<=GlobalData.serverTime?(this.timeDesTxt.text="活动已结束",this.timeTxt.visible=!1,Laya.timer.clear(this,this.loopHandler),2!==this._tab.selectedIndex||2!==l.MarryModel.instance.getRingBuyState(h.instance.cfgs[2][0])&&(this.btn.visible=!1,s.thisStop(this._btnClip),this.gotImg.visible=!this.btn.visible,this.gotImg.skin="common/txt_commmon_yjies.png")):this.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(l.MarryModel.instance.ringBuyTime)},Object.defineProperty(o.prototype,"hiddenTab",{set:function(t){this.group_3.visible=this.groupTxt_3.visible=this.timeDesTxt.visible=this.timeTxt.visible=t,this.group_1.x=130,this.group_2.x=376,this.icon_4.x=this.group_1.x+50,this.groupTxt_1.x=this.group_1.x+86,this.icon_3.x=this.group_2.x+52,this.groupTxt_2.x=this.group_2.x+92},enumerable:!0,configurable:!0}),o.prototype.clipPlay=function(){this._btnClip||(this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.btn.x-5,this.btn.y-10,!0)),s.thisPlay(this._btnClip)},o.prototype.btnHandler=function(){var t=h.instance.cfgs[this._tab.selectedIndex],e=t[0];if(2===this._tab.selectedIndex&&0===l.MarryModel.instance.getRingBuyState(e))return WindowManager.instance.open(111),void this.close();if(2===this._tab.selectedIndex)l.MarryCtrl.instance.drawWeddingRingAccAward(e);else{var i=t[1][0],n=t[1][2]-r.zxian_yu.ZXianYuModel.instance.xianyu;if(0<n)p.openLackPropAlert(i,n);else{var s=t[1],o="是否花费<img src='"+CommonUtil.getIconById(s[0],!0)+"' width= '40' height= '40'/>"+CommonUtil.formatHtmlStrByColor("#b15315",""+s[2])+"兑换"+CommonUtil.formatHtmlStrByColor("#b15315",""+this._giftBoxNames[this._tab.selectedIndex])+"?",a=Handler.create(l.MarryCtrl.instance,l.MarryCtrl.instance.buyWeddingRing,[e]);CommonUtil.alert("温馨提示",o,[a,"使用"],[])}}},o.prototype.destroy=function(){this._tab=this.destroyElement(this._tab),this._txts=this.destroyElement(this._txts),this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),t.prototype.destroy.call(this)},n=o,l.RingBuyAlert=n}(modules=modules||{}),function(s){var o,n,t,a,r,l,e,i;function h(){return null!==n&&n.apply(this,arguments)||this}o=s.marry||(s.marry={}),t=ui.SeekMarryAlertUI,a=s.notice.SystemNoticeManager,r=s.config.BlendCfg,l=s.vip.VipModel,e=s.common.BtnGroup,n=t,__extends(h,n),h.prototype.initialize=function(){n.prototype.initialize.call(this),this._tab=new e,this._tab.setBtns(this.btn_1,this.btn_2,this.btn_3);var t=r.instance.getCfgById(75003)[1][0];this.inputTxt.maxChars=t},h.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.handler),this.onAutoClick(this.cancelBtn,this,this.close),this.onAutoEvt(this.inputTxt,"mousedown",this,this.inputTxtHandler),this.onAutoEvt(this.inputTxt,"input",this,this.inputHandler)},h.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._tab.selectedIndex=0;var t=r.instance.getCfgById(75001)[2];this.inputTxt.text=ArrayUtils.random(t);var e=r.instance.getCfgById(75002)[1][0];this.inputTxt.editable=l.instance.vipLevel>=e;var i=r.instance.getCfgById(75004)[1];this.priceTxt_1.text=i[0].toString(),this.priceTxt_2.text=i[1].toString(),this.priceTxt_3.text=i[2].toString()},h.prototype.inputTxtHandler=function(){this.inputTxt.editable||(a.instance.addNotice("SVIP"+r.instance.getCfgById(75002)[1][0]+"可编辑信息",!0),this.inputTxt.focus=!1)},h.prototype.inputHandler=function(){var t=this.inputTxt.text;if(t){var e=r.instance.getCfgById(75003)[1][0];t.length>e&&a.instance.addNotice("最多输入"+e+"个字符",!0)}},h.prototype.handler=function(){var t=this,e=this.inputTxt.text;if(e)if(s.chat.ChatModel.instance.isValidContent(e)){var i=o.MarryModel.instance.seekCD-GlobalData.serverTime;if(0<i){var n=(i/6e4>>0)%60;a.instance.addNotice("发布冷却中,"+n+"分钟后可再次发布",!0)}else CommonUtil.checkWords(e,function(){o.MarryCtrl.instance.requestMarriageSeek(t._tab.selectedIndex,e),t.close()})}else a.instance.addNotice("包含非法字符",!0);else a.instance.addNotice("输入内容不能为空",!0)},h.prototype.destroy=function(){this._tab=this.destroyElement(this._tab),n.prototype.destroy.call(this)},i=h,o.SeekMarryAlert=i}(modules=modules||{}),function(i){var n,t,e,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}n=i.marry||(i.marry={}),e=ui.SearchHalfAlertUI,s=i.notice.SystemNoticeManager,t=e,__extends(a,t),a.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.handler)},a.prototype.handler=function(){var t=this.inputTxt.text;if(t)if(i.chat.ChatModel.instance.isValidContent(t))if(t.length<4)s.instance.addNotice("请输入正确格式,如: S1234.杜子腾",!0);else if("s"===t[0]&&(t=t.replace("s","S")),0===t.search(/S\d+\./)){var e=n.MarryModel.instance.getMarriageSeekByName(t);e?(GlobalData.dispatcher.event("MARRY_SEARCH_HALF",[e]),this.close()):s.instance.addNotice("搜索对象没有发布结缘帖子",!0)}else s.instance.addNotice("请输入正确格式,如: S1234.杜子腾",!0);else s.instance.addNotice("包含非法字符",!0);else s.instance.addNotice("输入内容不能为空",!0)},a.prototype.close=function(){t.prototype.close.call(this),this.inputTxt.text=""},o=a,n.SearchHalfAlert=o}(modules=modules||{}),function(t){var e,i,s,n,o,a,r,l,h;function c(){return null!==i&&i.apply(this,arguments)||this}e=t.commonAlert||(t.commonAlert={}),s=t.bag.BaseItem,n=ui.MarryIntimacyAwardsAlertUI,o=t.common.CustomClip,a=t.config.MarryIntimacyCfg,r=t.marry.MarryModel,l=t.marry.MarryCtrl,i=n,__extends(c,i),c.prototype.initialize=function(){i.prototype.initialize.call(this),this._items=[]},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.handler),this.onAutoGlobalEvt("MARRY_INTIMACY_UPDATE",this,this.update)},c.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},c.prototype.update=function(){var n=this,t=r.instance.intimacyDrawLv+1;a.instance.has(t)||t--,this.titleTxt.text="亲密度Lv."+t+"奖励";var e=a.instance.getCfgByLv(t),i=CommonUtil.formatItemData(a.instance.getAwardsByCfg(e));i.forEach(function(t,e){if(!n._items[e]){var i=new s;i.nameVisible=!1,n.addChild(i),i.y=135,n._items[e]=i}}),CommonUtil.showItems(this._items,i),CommonUtil.centerChainArr(this.width,this._items,20),r.instance.intimacyLv>r.instance.intimacyDrawLv?(this.sureBtn.visible=!0,this.conditonTxt.visible=!1,this.clipPlay()):(this.sureBtn.visible=!1,this.conditonTxt.visible=!0,a.instance.has(r.instance.intimacyDrawLv+1)?this.conditonTxt.text="亲密度达到"+(r.instance.intimacyDrawLv+1)+"级可领取":this.conditonTxt.text="亲密度已达到最大等级",o.thisStop(this._clip))},c.prototype.handler=function(){l.instance.drawMarryLevel()},c.prototype.clipPlay=function(){this._clip||(this._clip=CommonUtil.creatEff(this,"btn_light",15),this._clip.pos(this.sureBtn.x-5,this.sureBtn.y-10,!0),this._clip.scale(.8,.8,!0)),o.thisPlay(this._clip)},c.prototype.destroy=function(){this._clip=this.destroyElement(this._clip),this._items=this.destroyElement(this._items),i.prototype.destroy.call(this)},h=c,e.MarryIntimacyAwardsAlert=h}(modules=modules||{}),function(t){var o,i,e,a,r,n,s;function l(){return null!==i&&i.apply(this,arguments)||this}o=t.marry||(t.marry={}),e=ui.MarryPackAlertUI,a=t.config.BlendCfg,r=t.bag.BaseItem,n=t.bag.BagUtil,i=e,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this._baseItems=[],this.linkTxt.underline=!0,this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.btn.x-8,this.btn.y-8,!0)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.linkTxt,this,this.linkHandler),this.onAutoGlobalEvt("MARRY_GIFT_PACK_UPDATE",this,this.updateMarryGiftPack)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateMarryGiftPack()},l.prototype.close=function(t,e){i.prototype.close.call(this,t,e),this._btnClip.stop(),this._btnClip.visible=!1,this._info=null},l.prototype.updateMarryGiftPack=function(){var t=o.MarryModel.instance.packList;if(!t||0===t.length||this._info&&t[0][0]!==this._info[0])return this._btnClip.stop(),this._btnClip.visible=!1,this.receivedImg.visible=!0,void(this.btn.visible=!1);this.btn.visible=!0,this._btnClip.visible=!0,this._btnClip.play(),this.receivedImg.visible=!1,this._info=t[0],this.lIcon.setInfo(this._info[9],this._info[8],this._info[10]),this.rIcon.setInfo(this._info[4],this._info[3],this._info[5]),this.lNameTxt.text=this._info[7],this.rNameTxt.text=this._info[2],this._items&&(this._items.length=0),this._items=CommonUtil.formatItemData(a.instance.getCfgById(this._info[11])[1]);for(var e=.5*(526-100*this._items.length-40*(this._items.length-1)),i=0,n=this._items.length;i<n;i++){var s=this._baseItems[i];s||(s=new r,this._baseItems[i]=s),s.dataSource=this._items[i],this.addChild(s),s.pos(e+140*i,424,!0)}for(i=this._items.length,n=this._baseItems.length;i<n;i++)this._baseItems[i].removeSelf()},l.prototype.btnHandler=function(){n.canAddItemsByBagIdCount(this._items)&&o.MarryCtrl.instance.drawMarryGiftPack(this._info[0],this._info[11])},l.prototype.linkHandler=function(){WindowManager.instance.open(490),this.close()},l.prototype.destroy=function(){this._info=null,this._baseItems=this.destroyElement(this._baseItems),this._items&&(this._items.length=0),this._items=null,this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},s=l,o.MarryPackAlert=s}(modules=modules||{}),function(l){var h,t,e,i,n,c,p,u,s,o,a;function r(){return null!==t&&t.apply(this,arguments)||this}h=l.marry||(l.marry={}),e=l.common.SimpleList,i=ui.MarryTokenRankViewUI,n=l.common.ListWithArrowCtrl,c=l.config.MarryTokenCfg,p=l.config.MarryTokenGradeCfg,u=l.common.CustomClip,s=l.bag.BagUtil,o=utils.tween.TweenGroup,t=i,__extends(r,t),r.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=e.create(h.MarryTokenRankItem,100,125,2,1,30),this._list.width=490,this._list.height=140,this._list.pos(115,750,!0),this._list.datas=c.instance.ids,this.addChild(this._list),this._btnEff=CommonUtil.creatEff(this,"btn_light",15),this._btnEff.pos(this.btn.x-5,this.btn.y-10),this._btnEff.scale(.8,.8,!0),this._listCtrl=new n(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=520,this._icons=[this.skillIcon_1,this.skillIcon_2,this.skillIcon_3,this.skillIcon_4],this._attrNameTxts=[this.attrNameTxt_1,this.attrNameTxt_2,this.attrNameTxt_3,this.attrNameTxt_4],this._attrTxts=[this.attrTxt_1,this.attrTxt_2,this.attrTxt_3,this.attrTxt_4],this._upTxts=[this.upTxt_1,this.upTxt_2,this.upTxt_3,this.upTxt_4],this._arrImgs=[this.arrImg_1,this.arrImg_2,this.arrImg_3,this.arrImg_4],this.noTxt.underline=!0,this._tweens=new o},r.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoClick(this.tab,this,this.tabHandler),this.onAutoClick(this.noTxt,this,this.tabHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.heartImg,this,this.heartImgHandler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoGlobalEvt("MARRY_TOKEN_UPDATE",this,this.update),this.onAutoGlobalEvt("MARRY_INFO_UPDATE",this,this.update),this.onAutoGlobalEvt("BAG_UPDATE",this,this.propUpdate),this.regAutoRP(this.rpImg_1,["marryTokenFeedRP"]),this.regAutoRP(this.rpImg_2,["marryTokenRankRP"]),this._listCtrl.addListeners()},r.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.lIcon.y=this.rIcon.y=250,this._tweens.add(TweenJS.create(this.lIcon).yoyo(!0).repeat(Number.POSITIVE_INFINITY).to({y:230},1e3).start()),this._tweens.add(TweenJS.create(this.rIcon).yoyo(!0).repeat(Number.POSITIVE_INFINITY).to({y:230},1e3).start()),this.searchFirstOperate(),this.update()},r.prototype.update=function(){this.fightMsz.value=h.MarryModel.instance.tokenRankFight.toString(),this.selectHandler()},r.prototype.selectHandler=function(){var i=this._list.selectedData;this._info=h.MarryModel.instance.getTokenInofById(i);var t=this._info[2],n=p.instance.getSkillIdsById(i);this._icons.forEach(function(t,e){t.setIds(i,n[e])});var e=c.instance.getCfgById(i);this.heartLvTxt.text="Lv."+this._info[5];var s,o=!p.instance.has(i,t+1);if(this.wayTxt_1.text=this.wayTxt_2.text=this.wayTxt_3.text="",o)this.maxLvTxt.visible=!0,this.noBox.visible=this.btn.visible=this.item.visible=!1,u.thisStop(this._btnEff);else{if(0===t){this.noBox.visible=!0,this.btn.visible=this.item.visible=!1,u.thisStop(this._btnEff);var a=e[1];this.wayTxt_1.text=a[0],this.wayTxt_2.text="获得,激活后战力",this.wayTxt_3.text="+"+a[1],CommonUtil.centerChainArr(this.width,[this.wayTxt_1,this.wayTxt_2,this.wayTxt_3],3)}else this.btn.visible=this.item.visible=!0,this.noBox.visible=!1,this.propUpdate();this.maxLvTxt.visible=!1}o||(s=p.instance.getCfgByIdLv(i,t+1));var r=p.instance.getCfgByIdLv(i,t);l.common.AttrUtil.setAttrTxts(r,s,this._attrNameTxts,this._attrTxts,this._arrImgs,this._upTxts,4),this.marriedUpdate()},r.prototype.marriedUpdate=function(){if(h.MarryModel.instance.isMarried){this.jieMsz.visible=this.rRankMsz.visible=!0;var t=h.MarryModel.instance.half;PlayerModel.instance.occ!==t[3]&&2===PlayerModel.instance.occ?(this.setSexShow(this.lNameTxt,t[2],this.lRankMsz,this._info[3]),this.setSexShow(this.rNameTxt,PlayerModel.instance.roleName,this.rRankMsz,this._info[2])):(this.setSexShow(this.lNameTxt,PlayerModel.instance.roleName,this.lRankMsz,this._info[2]),this.setSexShow(this.rNameTxt,t[2],this.rRankMsz,this._info[3]));var e=2<=h.MarryModel.instance.getHeartFinishCount(this._list.selectedData);this.heartRP.visible=e}else this.heartRP.visible=this.jieMsz.visible=this.rRankMsz.visible=!1,this.rNameTxt.text="无",this.lNameTxt.text=PlayerModel.instance.roleName,this.lRankMsz.value=this._info[2].toString();this.lIcon.skin=this.rIcon.skin="marry/icon_xyxt_xw"+this._list.selectedIndex+".png",this.lObjNameTxt.text=this.rObjNameTxt.text=""+CommonUtil.getNameByItemId(this._list.selectedData)},r.prototype.setSexShow=function(t,e,i,n){t.text=e,i.value=n.toString()},r.prototype.propUpdate=function(t){if(null==t||0===t){var e=this._list.selectedData,i=h.MarryModel.instance.getTokenInofById(e)[2];if(p.instance.has(e,i+1)){var n=p.instance.getCfgByIdLv(e,i);this.item.dataSource=[n[2][0],n[2][1],0,null];var s=CommonUtil.getPropCountById(n[2][0]),o=s>=n[2][1];this.item.setNum(s+"/"+n[2][1],o?"#ffffff":"#ff7462"),o?u.thisPlay(this._btnEff):u.thisStop(this._btnEff)}}},r.prototype.searchFirstOperate=function(){var t=h.MarryModel.instance.tokenRPIndexs.rank,e=-1==h.MarryModel.instance.inx?0:h.MarryModel.instance.inx;-1==h.MarryModel.instance.inx&&t.length&&-1==t.indexOf(e)&&(e=t[0]),h.MarryModel.instance.inx=-1,this._list.selectedIndex=e,this._list.scrollToIndex(e)},r.prototype.tabHandler=function(){h.MarryModel.instance.inx=this._list.selectedIndex,WindowManager.instance.open(524)},r.prototype.btnHandler=function(){var t=p.instance.getCfgByIdLv(this._info[0],this._info[2])[2];CommonUtil.conditionItemIsEnough(t)?h.MarryCtrl.instance.gradeMarryToken(this._list.selectedData):s.openLackPropAlert(t[0],t[1])},r.prototype.heartImgHandler=function(){WindowManager.instance.open(39,[6,this._list.selectedData])},r.prototype.ruleBtnHandler=function(){CommonUtil.alertHelp(20085)},r.prototype.close=function(){this._tweens.removeAll(),t.prototype.close.call(this)},r.prototype.destroy=function(){this._tweens=this.destroyElement(this._tweens),this._list=this.destroyElement(this._list),this._listCtrl=this.destroyElement(this._listCtrl),this._icons=this.destroyElement(this._icons),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._attrTxts=this.destroyElement(this._attrTxts),this._upTxts=this.destroyElement(this._upTxts),this._arrImgs=this.destroyElement(this._arrImgs),this._btnEff=this.destroyElement(this._btnEff),t.prototype.destroy.call(this)},a=r,h.MarryTokenRankPanel=a}(modules=modules||{}),function(o){var a,t,f,e,i,n,s,_,m,v,b,r,l;function h(){return null!==t&&t.apply(this,arguments)||this}a=o.marry||(o.marry={}),f=o.common.CommonUtil,e=ui.MarryTokenFeedViewUI,i=o.common.ListWithArrowCtrl,n=o.common.SimpleList,s=o.config.MarryTokenCfg,_=o.config.MarryTokenLevelCfg,m=o.common.CustomClip,v=o.bag.BaseItem,b=o.config.MarryTokenGradeCfg,r=o.bag.BagUtil,t=e,__extends(h,t),h.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=this.centerY=0,this.linkTxt.underline=!0,this._list=n.create(a.MarryTokenFeedItem,100,125,2,1,30),this._list.width=490,this._list.height=130,this._list.pos(115,660,!0),this._list.datas=s.instance.ids,this.addChild(this._list),this._listCtrl=new i(this._list,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=520,this._attrNameTxts=[this.attrNameTxt_1,this.attrNameTxt_2,this.attrNameTxt_3,this.attrNameTxt_4],this._attrTxts=[this.attrTxt_1,this.attrTxt_2,this.attrTxt_3,this.attrTxt_4],this._upTxts=[this.upTxt_1,this.upTxt_2,this.upTxt_3,this.upTxt_4],this._arrImgs=[this.arrImg_1,this.arrImg_2,this.arrImg_3,this.arrImg_4],this._btnEff=f.creatEff(this,"btn_light",15),this._btnEff.pos(this.btn.x-5,this.btn.y-10),this._btnEff.scale(.8,.8,!0),this._items=[],this._items.push(this.item),this.item.nameVisible=!1,this._tweenJS=TweenJS.create(this.iconImg).yoyo(!0).repeat(Number.POSITIVE_INFINITY)},h.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.tab,this,this.tabHandler),this.onAutoClick(this.linkTxt,this,this.linkHandler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoGlobalEvt("MARRY_TOKEN_UPDATE",this,this.update),this.onAutoGlobalEvt("MARRY_TOKEN_ATTRS_UPDATE",this,this.showAttrs),this.onAutoGlobalEvt("BAG_UPDATE",this,this.propUpdate),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.goldUpdate),this.regAutoRP(this.rpImg_1,["marryTokenFeedRP"]),this.regAutoRP(this.rpImg_2,["marryTokenRankRP"]),this._listCtrl.addListeners()},h.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.iconImg.y=185,this._tweenJS.to({y:165},1e3).start(),this.searchFirstOperate(),this.update()},h.prototype.selectHandler=function(){var t=this._list.selectedData;this.iconImg.skin="marry/icon_xyxt_xw"+this._list.selectedIndex+".png",this.nameTxt.text=f.getNameByItemId(t),this._info=a.MarryModel.instance.getTokenInofById(t);var e,i,n=this._info[1];this.btn.visible=!0,this.maxTxt.visible=!1,0===n?(this.lvImg.visible=this.propImg.visible=this.propTxt.visible=this.lvMsz.visible=!1,this.btn.label="激活",this.propUpdate()):(this.lvImg.visible=this.lvMsz.visible=!0,this.btn.label="升级",n=this._info[1],this.lvMsz.value=n.toString(),e=!_.instance.has(t,n+1),this.setShow(e)),e||(i=_.instance.getCfgByIdLv(t,n+1));var s=_.instance.getCfgByIdLv(t,n);o.common.AttrUtil.setAttrTxts(s,i,this._attrNameTxts,this._attrTxts,this._arrImgs,this._upTxts,3)},h.prototype.setShow=function(t){if(t)this._items.forEach(function(t){t.visible=!1}),this.btn.visible=this.tipTxt.visible=this.propImg.visible=this.propTxt.visible=!1,this.maxTxt.visible=!0,m.thisStop(this._btnEff);else{this.tipTxt.visible=this.propImg.visible=this.propTxt.visible=!0;var e=this.propUpdate();(e=this.goldUpdate()&&e)?m.thisPlay(this._btnEff):m.thisStop(this._btnEff)}},h.prototype.update=function(){this.fightMsz.value=a.MarryModel.instance.tokenFeedFight.toString(),this.selectHandler()},h.prototype.searchFirstOperate=function(){var t=a.MarryModel.instance.tokenRPIndexs.feed,e=-1==a.MarryModel.instance.inx?0:a.MarryModel.instance.inx;-1==a.MarryModel.instance.inx&&t.length&&-1==t.indexOf(e)&&(e=t[0]),a.MarryModel.instance.inx=-1,this._list.selectedIndex=e,this._list.scrollToIndex(e)},h.prototype.propUpdate=function(t){var s=this;if(null==t||0===t){var o=!0;if(0!==this._info[1]){for(var e=0;e<this._items.length;e++)this._items[e]&&0!=e&&(this._items[e].visible=!1);if(!_.instance.has(this._info[0],this._info[1]+1))return!1;for(var i=_.instance.getCfgByIdLv(this._info[0],this._info[1])[2],n=i.slice(0,i.length-2),a=n.length>>1,r=80*a+10*(a-1),l=this.width-r>>1,h=0,c=n.length;h<c;h+=2){if(!this._items[h]){var p=new v;p.nameVisible=!1,p.scale(.8,.8,!0),p.y=842,this.addChild(p),this._items[h]=p}this._items[h].x=l+90*(h>>1),this._items[h].dataSource=[n[h],n[h+1],0,null],this._items[h].visible=!0;var u=f.getPropCountById(n[h]),d=u>=n[h+1];d||(o=!1),this._items[h].setNum(u+"/"+n[h+1],d?"#ffffff":"#ff7462")}}else{var y=this._list.selectedData,g=b.instance.getCfgByIdLv(y,0)[2].concat();g.push(0,null),this._items.forEach(function(t,e){if(0===e){t.visible=!0,t.x=320,t.dataSource=g;var i=f.getPropCountById(g[0]),n=i>=g[1];n?m.thisPlay(s._btnEff):(o=!1,m.thisStop(s._btnEff)),s._items[e].setNum(i+"/"+g[1],n?"#ffffff":"#ff7462")}else t.visible=!1})}return o}},h.prototype.goldUpdate=function(){if(this._info){var t=_.instance.getCfgByIdLv(this._info[0],this._info[1]);if(_.instance.has(this._info[0],this._info[1]+1)){var e=t[2].slice(-2),i=f.getPropCountById(90140001);this.propTxt.text=e[1].toString();var n=i>=e[1];return this.propTxt.color=n?"#ffec7c":"#ff3e3e",n}}},h.prototype.btnHandler=function(){if(this._info[1]){for(var t=0,e=(i=_.instance.getCfgByIdLv(this._info[0],this._info[1])[2]).length;t<e;t+=2)if(!f.conditionItemIsEnough([i[t],i[t+1]]))return void(e-2<=t?f.goldNotEnoughAlert():r.openLackPropAlert(i[t],i[t+1]));a.MarryCtrl.instance.growMarryToken(this._list.selectedData)}else{var i=b.instance.getCfgByIdLv(this._info[0],0)[2];if(!f.conditionItemIsEnough(i))return void r.openLackPropAlert(i[0],i[1]);a.MarryCtrl.instance.activeMarryToken(this._list.selectedData)}},h.prototype.tabHandler=function(){a.MarryModel.instance.inx=this._list.selectedIndex,WindowManager.instance.open(525)},h.prototype.linkHandler=function(){a.MarryCtrl.instance.getMarryTokenAttr(),this.showAttrs()},h.prototype.ruleBtnHandler=function(){f.alertHelp(20084)},h.prototype.showAttrs=function(){var t=a.MarryModel.instance.totalAttrs;t&&WindowManager.instance.open(26,["仙缘信物总属性",a.MarryModel.instance.tokenFeedFight,t[1],s.instance.attrs])},h.prototype.close=function(){this._tweenJS&&this._tweenJS.stop(),t.prototype.close.call(this)},h.prototype.destroy=function(){this._tweenJS&&this._tweenJS.stop()&&(this._tweenJS=null),this._list=this.destroyElement(this._list),this._listCtrl=this.destroyElement(this._listCtrl),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._attrTxts=this.destroyElement(this._attrTxts),this._upTxts=this.destroyElement(this._upTxts),this._arrImgs=this.destroyElement(this._arrImgs),this._btnEff=this.destroyElement(this._btnEff),this._items=this.destroyElement(this._items),this._info=null,t.prototype.destroy.call(this)},l=h,a.MarryTokenFeedPanel=l}(modules=modules||{}),function(t){var u,e,i,d,y,g,f,_,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}u=t.marry||(t.marry={}),i=ui.SkillAlertUI,d=t.config.SkillCfg,y=t.config.SkillPureCfg,g=t.config.MarryTokenGradeCfg,f=t.config.MarryTokenSkillCfg,_=t.common.CustomClip,n=t.bag.BagUtil,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.titleTxt.text="信物进阶技能",this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.btn.x-5,this.btn.y-10)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("MARRY_TOKEN_UPDATE",this,this.update)},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._id=t[0],this._skillId=t[1]},o.prototype.onOpened=function(){e.prototype.onOpened.call(this);var t=y.instance.getCfgById(this._skillId);this.iconImg.skin="assets/icon/skill/"+t[6]+".png",this.update()},o.prototype.update=function(){var t=u.MarryModel.instance.getTokenSkillLv(this._id,this._skillId),e=u.MarryModel.instance.getTokenInofById(this._id)[2],i=CommonUtil.getSkillIdByPureIdAndLv(this._skillId,0===t?1:t),n=y.instance.getCfgById(this._skillId);this.nameTxt.text=n[1]+"  Lv."+t;var s=d.instance.getCfgById(i),o=d.instance.getCfgById(i+1);this.powerTxt.text="战力:"+(0===t?0:s[3]);var a=!1;if(this.btn.visible=!0,0===t){this.curLvDesc.text="无",this.btn.label="激活";var r=g.instance.getSkillActiveLv(this._skillId);r<=e&&(a=!0);var l=CommonUtil.getNameByItemId(this._id);this.conditionTxt.visible=!0,this.propBox.visible=!1,this.conditionTxt.text="激活条件："+l+"达到"+r+"阶",this.conditionTxt.color=a?"#168a17":"#ff3e3e",this.nextLvDesc.text=CommonUtil.stringFormat(n[5],s[2])}else if(this.curLvDesc.text=CommonUtil.stringFormat(n[5],s[2]),this.btn.label="升级",f.instance.has(this._skillId,t+1)){var h=f.instance.getCfgByIdLv(this._skillId,t);CommonUtil.conditionItemIsEnough(h[2])&&(a=!0),this.conditionTxt.visible=!1,this.propBox.visible=!0;var c=h[2][0];this.propImg.skin=CommonUtil.getIconById(c);var p=CommonUtil.getPropCountById(c);this.propTxt.text=p+"/"+h[2][1],this.propTxt.color=a?"#168a17":"#ff3e3e",this.nextLvDesc.text=CommonUtil.stringFormat(n[5],o[2])}else this.propBox.visible=this.btn.visible=!1,this.conditionTxt.visible=!0,this.conditionTxt.text="已满级",this.conditionTxt.color="#00AD35",this.nextLvDesc.text="已达最大等级";a?_.thisPlay(this._btnClip):_.thisStop(this._btnClip),this.btn.gray=!a},o.prototype.btnHandler=function(){var t=u.MarryModel.instance.getTokenSkillLv(this._id,this._skillId);if(0===t)u.MarryCtrl.instance.growMarryTokenSkill(this._id,this._skillId);else{var e=f.instance.getCfgByIdLv(this._skillId,t)[2];CommonUtil.conditionItemIsEnough(e)?u.MarryCtrl.instance.growMarryTokenSkill(this._id,this._skillId):n.openLackPropAlert(e[0],e[1])}},o.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},s=o,u.MarryTokenSkillAlert=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.BeProposeAlertUI,s=t.config.ItemMaterialCfg,i=n,__extends(a,i),a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.agreeBtn,this,this.resultHandler,[1]),this.onAutoClick(this.refuseBtn,this,this.resultHandler,[0]),this.icon_2.type=0},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._info=t},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},a.prototype.update=function(){var t=this._info[2]-1;this.item_1.dataSource=[s.instance.ringItemIds[t],0,0,null],this.item_2.dataSource=[90140001,this._info[6],0,null],this.nameTxt.text=this._info[1],CommonUtil.centerChainArr(this.width,[this.nameTxt,this.tipTxt]),this.nameTxt_2.text=PlayerModel.instance.roleName,this.nameTxt_1.text=this._info[1],this.icon_1.setInfo(this._info[3],this._info[5],this._info[4])},a.prototype.resultHandler=function(t){e.MarryCtrl.instance.marryResult(this._info[0],t),this.close()},o=a,e.BeProposeAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.TeamCopyAskAlertUI,s=t.common.SimpleList,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.titleTxt.text="结缘申请",this.btn.label="一键拒绝",this.noTxt.text="暂无结缘申请",this._list=s.create(e.BeProposeListItem,560,110,1,1,0,5),this._list.pos(51,110,!0),this._list.size(560,525),this.addChild(this._list)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("MARRY_PROPOSE_LIST_UPDATE",this,this.update)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},a.prototype.update=function(){var t=e.MarryModel.instance.proposeList;this._list.datas=t,this.noBox.visible=!t.length},a.prototype.btnHandler=function(){0<e.MarryModel.instance.proposeList.length&&e.MarryCtrl.instance.marryResult(0)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.BeProposeListAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.RingMarkAlertUI,s=t.config.BlendCfg,o=t.notice.SystemNoticeManager,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this);var t=s.instance.getCfgById(75503)[1][0];this.inputTxt.maxChars=t,this.inputTxt.prompt="点击此处输入结缘宣言（不超过"+t+"个字）"},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler),this.onAutoClick(this.cancelBtn,this,this.close)},r.prototype.okHandler=function(){var t=this.inputTxt.text;t?StringUtils.isValidWords(t)?CommonUtil.checkWords(t,function(){e.MarryCtrl.instance.markMarryRing(t)}):o.instance.addNotice("含有非法字符",!0):o.instance.addNotice("请输入结缘宣言",!0)},a=r,e.RingMarkAlert=a}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c;function p(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.RingMarkTipsAlertUI,s=t.config.BlendCfg,o=t.notice.SystemNoticeManager,a=t.bag.BagModel,r=t.bag.BagUtil,l=t.common.CustomClip,h=t.redPoint.RedPointCtrl,i=n,__extends(p,i),p.prototype.initialize=function(){i.prototype.initialize.call(this),this.tipsTxt1.style.color=this.tipsTxt2.style.color="#3d5981",this.tipsTxt1.style.fontSize=this.tipsTxt2.style.fontSize=26;var t=s.instance.getCfgById(75503)[2];this.tipsTxt1.innerHTML=t[0],this.tipsTxt2.innerHTML=t[1],this._itemId=s.instance.getCfgById(75501)[1][0],this.iconImg.skin=CommonUtil.getIconById(this._itemId),this._count=0,this._btnClip=l.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.markBtn.x-5,this.markBtn.y-10),this._btnClip.visible=!1},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.markBtn,this,this.markHandler),this.onAutoGlobalEvt("RED_POINT",this,this.updateRP)},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._count=a.instance.getItemCountById(this._itemId),this.numTxt.text=this._count+"/1",this.numTxt.color=1<=this._count?"#168a17":"#FF3E3E"},p.prototype.markHandler=function(){if(0===this._count)r.openLackPropAlert(this._itemId,1);else if(e.MarryModel.instance.isMarried){var t=e.MarryModel.instance.mark;t&&0!==t[3]?CommonUtil.alert("提示",'义戒已刻印，重复刻印<span color="#FF3E3E">只更改</span>结缘宣言，对已激活的刻印属性<span color="#FF3E3E">不会产生影响</span>，是否继续？',[Handler.create(this,function(){WindowManager.instance.open(842)})],[null,null]):WindowManager.instance.open(842)}else o.instance.addNotice("结缘后可进行义戒刻印",!0)},p.prototype.updateRP=function(t){"marryMarkRP"===t&&(h.instance.getRPProperty(t)?l.thisPlay(this._btnClip):l.thisStop(this._btnClip))},p.prototype.onClosed=function(t){i.prototype.onClosed.call(this,t),l.thisStop(this._btnClip)},p.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},c=p,e.RingMarkTipsAlert=c}(modules=modules||{}),function(e){var t,i,n;function s(){var t=i.call(this)||this;return t._times=5e3,t}t=e.marry||(e.marry={}),i=ui.CommonGroupSingleMatchAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoGlobalEvt("COPY_MARRY_MATCH_REPLY",this,this.showUI)},s.prototype.cancelBtnHandler=function(){this.close(),e.notice.SystemNoticeManager.instance.addNotice("已取消匹配",!0)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.waitShowInfo.text="等待小伙伴加入",this.matchFriend.text="召唤仙友",this.setTextUIPos(),this.tipsText.visible=!0,this.myNameTxt.visible=!1,this.myBattleTxt.visible=!1,this._times=GlobalData.serverTime,Laya.timer.loop(1e3,this,this.updateUI),this.updateUI(),t.MarryCtrl.instance.copyMarryMatch()},s.prototype.showUI=function(t){void 0===t&&(t=null),t?(Laya.timer.clear(this,this.updateUI),this.waitTime.text="",this.tipsText.visible=!1,this.cancelBtn.visible=!1,this.myHeadIcon.setInfo(t[4],t[3],t[5]),this.myNameTxt.visible=!0,this.myBattleTxt.visible=!0,this.myNameTxt.text=""+t[1],this.myBattleTxt.text=""+t[2],this.waitShowInfo.text="进入场景倒计时:",this._times=GlobalData.serverTime+3e3,Laya.timer.loop(1e3,this,this.updateUI1),this.updateUI1()):(this.tipsText.visible=!0,this.myNameTxt.visible=!1,this.myBattleTxt.visible=!1)},s.prototype.updateUI1=function(){var t=Math.round((this._times-GlobalData.serverTime)/1e3);0<t?(this.waitTime.text="("+t+")",this.setTextUIPos()):(this.waitTime.text="(0)",this.setTextUIPos(),Laya.timer.clear(this,this.updateUI1),CommonUtil.whetherInCopy()||e.common_group.CommonGroupUtil.notTeamCopyIsTeaming()?(this.close(),console.log("进入失败 已有其他队伍")):(e.dungeon.DungeonCtrl.instance.reqEnterScene(2381),console.log("请求进入副本")))},s.prototype.updateUI=function(){var t=Math.round((GlobalData.serverTime-this._times)/1e3);this.waitTime.text=0<t?"("+t+")":"(0)",this.setTextUIPos()},s.prototype.setTextUIPos=function(){var t=this.waitShowInfo.textWidth+this.waitTime.textWidth,e=(this.matchingBox.width-t)/2;this.waitShowInfo.x=e,this.waitTime.x=this.waitShowInfo.x+this.waitShowInfo.textWidth},s.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateUI),Laya.timer.clear(this,this.updateUI1)},n=s,t.MarryCopySingleMatchAlert=n}(modules=modules||{}),function(e){var i,n,t;function s(){return n.call(this)||this}i=e.marry||(e.marry={}),n=ui.MarryCopyTipsAlertUI,__extends(s,n),s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},s.prototype.cancelBtnHandler=function(){this.close()},s.prototype.sureBtnHandler=function(){var t=e.config.BlendCfg.instance.getCfgById(75018)[1];CommonUtil.judgeCurrency(t[0],t[1])&&i.MarryCtrl.instance.copyMarryMatch(),this.close()},s.prototype.onOpened=function(){n.prototype.onOpened.call(this);var t=e.config.BlendCfg.instance.getCfgById(75018)[1];this.img.skin=CommonUtil.getIconById(t[0],!0),this.text2.text=""+t[1]},t=s,i.MarryCopytipsAlert=t}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){var t=i.call(this)||this;return t._model=e.MarryArenaModel.instance,t._controller=e.MarryArenaCtrl.instance,t.centerX=t.centerY=0,t._enemyItemList=CommonUtil.getChildrenByNameSection(t,"enemyItem"),t._gradeProgressBarCtrl=new n(t.gradeProgressImg,447,t.gradeProgressTxt),t._gradeProgressBarCtrl.maxValue=100,CommonUtil.setHTMLPro(t.refreshRecoverDiv,"#344c6f","SimHei",24,"center"),CommonUtil.setHTMLPro(t.fightRecoverDiv,"#344c6f","SimHei",24),CommonUtil.setHTMLPro(t.challengeTimeDiv,"#344c6f","SimHei",24,"right"),t.refreshRecoverDiv.mouseEnabled=t.fightRecoverDiv.mouseEnabled=t.challengeTimeDiv.mouseEnabled=!1,t._tabList=a.create(r,158,172,2,1,114),t._tabList.size(430,172),t._tabList.pos((t.width-t._tabList.width)/2,988),t.addChild(t._tabList),t}e=t.marry_arena||(t.marry_arena={}),n=t.common.ProgressBarCtrl,s=t.config.BlendCfg,o=t.marry.MarryModel,a=t.common.SimpleList,r=t.windCloud.PvpBtnItem,i=ui.MarryArenaViewUI,__extends(h,i),h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._model.onAutoEvt("canFightCount",this,this.onFightCountInfo,!0).onAutoEvt("buyFightCount",this,this.onFightCountInfo,!0).onAutoEvt("myRank",this,this.onMyRank,!0).onAutoEvt("totalScore",this,this.onTotalScore,!0).onAutoEvt("coupleFight",this,this.onCoupleFight,!0).onAutoEvt("myScore",this,this.onMyScore,!0).onAutoEvt("myGrade",this,this.onMyGrade,!0).onAutoEvt("fightCountRecoverDate",this,this.onFightCountRecoverDate,!0).onAutoEvt("refreshCountRecoverDate",this,this.onRefreshCountRecoverDate,!0).onAutoEvt("refreshCount",this,this.onRefreshCountRecoverDate,!0).onAutoEvt("enemyList",this,this.onEnemyList,!0).onAutoEvt("headInfos",this,this.onHeadInfos,!0),this.onAutoClick(this.rankBtn,this,this.onBtnClick).onAutoClick(this.addTimeBtn,this,this.onBtnClick).onAutoClick(this.helpBtn,this,this.onBtnClick).onAutoClick(this.totalScoreHelpBtn,this,this.onBtnClick).onAutoClick(this.totalScoreHelpBtn2,this,this.onBtnClick).onAutoClick(this.awardSegBtn,this,this.onBtnClick).onAutoClick(this.findCoupleBtn,this,this.onBtnClick).onAutoClick(this.refreshBtn,this,this.onBtnClick).onAutoClick(this.headIcon1,this,this.onBtnClick).onAutoClick(this.headIcon2,this,this.onBtnClick).onAutoGlobalEvt("MARRY_INFO_UPDATE",this,this.onMarryUpdate),this.onAutoEvt(this._tabList,"select",this,this.onTabChange,[0]),this.onMarryUpdate()},h.prototype.onTabChange=function(t){switch(this._tabList.selectedData){case 779:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1183);break;case 901:this._tabList.selectedIndex!=t&&WindowManager.instance.open(1361)}this._tabList.selectedIndex!=t&&(this._tabList.selectedIndex=t)},h.prototype.onMarryUpdate=function(){var t=o.instance.isMarried;this.openBox.visible===t&&this.previewBox.visible===!t||(this.openBox.visible=t,this.previewBox.visible=!t,this.onMyScore(),this.onTotalScore(),this.onCoupleFight(),this.onMyRank(),this.onHeadInfos())},h.prototype.onRefreshCountRecoverDate=function(){var t=this._model.refreshCount,e=(this._model.refreshCountRecoverDate-GlobalData.serverTime)/1e3>>0;t<=0&&0<e&&(Laya.timer.clear(this,this.tick2UpdateRefreshCountRecoverDate),Laya.timer.loop(1e3/3,this,this.tick2UpdateRefreshCountRecoverDate)),this.tick2UpdateRefreshCountRecoverDate()},h.prototype.tick2UpdateRefreshCountRecoverDate=function(){var t=this._model.refreshCount,e=this._model.refreshCountRecoverDate,i=e-GlobalData.serverTime;0<t||i<=0?(this.refreshRecoverDiv.innerHTML="免费刷新",Laya.timer.clear(this,this.tick2UpdateRefreshCountRecoverDate)):this.refreshRecoverDiv.innerHTML=this.colorHtmlTxt(CommonUtil.timeStampToHHMMSS(e),"green")+"后免费刷新"},h.prototype.onFightCountRecoverDate=function(){this._model.fightCountRecoverDate>GlobalData.serverTime&&(Laya.timer.clear(this,this.tick2UpdateFightCountRecoverDate),Laya.timer.loop(1e3/3,this,this.tick2UpdateFightCountRecoverDate)),this.tick2UpdateFightCountRecoverDate()},h.prototype.tick2UpdateFightCountRecoverDate=function(){var t=this._model.fightCountRecoverDate,e=t-GlobalData.serverTime,i=this._model.canFightCount;this._model.getFreeFightCount()<=i||e<=0?(this.fightRecoverDiv.innerHTML="",Laya.timer.clear(this,this.tick2UpdateFightCountRecoverDate)):this.fightRecoverDiv.innerHTML=this.colorHtmlTxt(CommonUtil.timeStampToHHMMSS(t),"green")+"后恢复1次"},h.prototype.colorHtmlTxt=function(t,e){return'<span color = "'+({green:"#168a17",red:"#ff0000",none:""}[e]||"")+'">'+t+"</span>"},h.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._controller.reqCoupleJJBaseInfo(),this._controller.reqGetCoupleBaseInfo(),this._controller.reqGetCoupleJJEnemys(),this._controller.reqGetCoupleJJRank(),this._tabList.datas=[779,901],this._tabList.selectedIndex=0},h.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.tick2UpdateFightCountRecoverDate),Laya.timer.clear(this,this.tick2UpdateRefreshCountRecoverDate)},h.prototype.onBtnClick=function(t){switch(t.currentTarget){case this.rankBtn:WindowManager.instance.open(1184),this._model.awardShowingTab=0;break;case this.addTimeBtn:WindowManager.instance.open(59,95);break;case this.helpBtn:CommonUtil.alertHelp(19035);break;case this.totalScoreHelpBtn:case this.totalScoreHelpBtn2:this.showTotalScoreHelp();break;case this.awardSegBtn:WindowManager.instance.open(1184),this._model.awardShowingTab=1;break;case this.refreshBtn:this._controller.reqCoupleJJFresh();break;case this.headIcon1:this.showPlayerInfo(0);break;case this.headIcon2:this.showPlayerInfo(1);break;case this.findCoupleBtn:WindowManager.instance.open(490)}},h.prototype.showTotalScoreHelp=function(){var t=s.instance.getCfgById(19036)[2][0];t=(t=t.replace("d%",this._model.coupleScore.toString())).replace("s%",this._model.mateScore.toString()),CommonUtil.alert("总排行积分",t,null)},h.prototype.showPlayerInfo=function(t){var e=this._model.headInfos;e&&this._controller.showPlayerInfo(e[t])},h.prototype.onEnemyList=function(){var n=this;this._enemyItemList.forEach(function(t,e){var i=n._model.enemyList[e];t.visible=!!i,i&&t.setData(i)})},h.prototype.onFightCountInfo=function(){var t=this._model.canFightCount,e=this._model.getFreeFightCount(),i=this.colorHtmlTxt(t+"/"+e,t?"green":"red");this.challengeTimeDiv.innerHTML="挑战次数:"+i},h.prototype.onTotalScore=function(){var t=o.instance.isMarried;this.totalScoreTxt.text="总排行分："+(t?this._model.totalScore:"?????")+" "},h.prototype.onMyRank=function(){this.myRankTxt.text="仙缘排名："+this._model.getMyRankTxt()+" "},h.prototype.onCoupleFight=function(){var t=o.instance.isMarried;this.totalFightTxt.text="综合战力："+(t?CommonUtil.bigNumToString(this._model.coupleFight):"?????")+" "},h.prototype.onMyScore=function(){var t=o.instance.isMarried,e=this._model.myScore;this.myScoreTxt.text="段位积分："+(t?e:"?????")+" ",this._gradeProgressBarCtrl.value=e},h.prototype.onMyGrade=function(){var t=this._model.myGrade,e=GlobalData.getConfig("couple_grade")[t-1];e&&(this._gradeProgressBarCtrl.maxValue=e[2],this.onMyScore(),this.gradeFont.value=e[1])},h.prototype.onHeadInfos=function(){var t=o.instance.isMarried,e=this._model.headInfos;if(e){var n=this;e.forEach(function(t,e){if(e++,t){var i=n["headIcon"+e];i&&i.setInfo(t[5],t[1],t[6]),i&&i.vipShowItem.setSVIPandVIP(t[4],t[3],t[8])}}),t||(this.headIcon2.headImg.skin="marry_arena/image_xljj_htx.jpg",this.headIcon2.frameImg.skin=CommonUtil.headFrameSkin(0))}},h.prototype.destroy=function(t){void 0===t&&(t=!0),this._gradeProgressBarCtrl=this.destroyElement(this._gradeProgressBarCtrl),this._tabList=this.destroyElement(this._tabList),i.prototype.destroy.call(this)},l=h,e.MarryArenaPanel=l}(modules=modules||{}),function(t){var e,i,n,o,s,a;function r(){var t=i.call(this)||this;return t._model=e.MarryArenaModel.instance,t._cotnroller=e.MarryArenaCtrl.instance,t._listRank=t.createList(e.MarryArenaRankItem,519,113,t.listRankParent),t._listGrade=t.createList(e.MarryArenaAwardGradeItem,628,134,t.listGradeParent),t._listDaily=t.createList(e.MarryArenaAwardDailyItem,628,134,t.listDailyParent),t._listGrade.datas=GlobalData.getConfig("couple_grade").slice(1),t._listDaily.datas=GlobalData.getConfig("couple_grade"),t._btnGroup=new n,t._btnGroup.setBtns(t.rankBtn,t.gradeBtn,t.dailyBtn),t}e=t.marry_arena||(t.marry_arena={}),n=t.common.BtnGroup,o=t.common.SimpleList,s=t.config.BlendCfg,i=ui.MarryArenaAwardAlertUI,__extends(r,i),r.prototype.createList=function(t,e,i,n){var s=o.create(t,571,i);return s.width=571,s.height=e,s.selectedIndex=-1,n.addChild(s),s},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._model.onAutoEvt("rankData",this,this.onRankData,!0).onAutoEvt("awardShowingTab",this,this.onAwardShowingTab,!0).onAutoEvt("myRank",this,this.onMyRank,!0).onAutoEvt("totalScore",this,this.onTotalScore,!0),this.onAutoEvt(this._btnGroup,Laya.Event.CHANGE,this,this.onTabClick)},r.prototype.onAwardShowingTab=function(){var t=this._model.awardShowingTab,e=["排行奖励","段位奖励","每日奖励"][t]||"";if(this.titleTxt.text=e,this._btnGroup.selectedIndex!==t&&(this._btnGroup.selectedIndex=t),this.rankViewBox.visible=0===t,this.awardViewBox.visible=1===t||2===t,this._listGrade.visible=1===t,this._listDaily.visible=2===t,0===t){this._cotnroller.reqGetCoupleJJRank(),this._cotnroller.reqGetCoupleBaseInfo();var i=s.instance.getCfgById(95005)[1];this.tipTxt.text="排名前"+i[0]+"名且积分大于"+i[1]+"分可上榜"}else this.tipTxt.text=e+"通过邮件发送"},r.prototype.onTotalScore=function(){this.totalScoreTxt.text=this._model.totalScore.toString()},r.prototype.onMyRank=function(){this.myRankTxt.text=this._model.getMyRankTxt()},r.prototype.onRankData=function(){this._listRank.datas=this._model.rankDataShow},r.prototype.onTabClick=function(){this._model.awardShowingTab=this._btnGroup.selectedIndex},r.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),this._listRank=this.destroyElement(this._listRank),this._listGrade=this.destroyElement(this._listGrade),this._listDaily=this.destroyElement(this._listDaily),i.prototype.destroy.call(this)},a=r,e.MarryArenaAwardAlert=a}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._model=e.MarryArenaModel.instance,t.zOrder=-1,t.mouseEnabled=!1,t.layer=3,t.closeByOthers=!1,t._mineItems=CommonUtil.getChildrenByNameSection(t,"mineItem"),t._enemyItems=CommonUtil.getChildrenByNameSection(t,"enemyItem"),t}e=t.marry_arena||(t.marry_arena={}),i=ui.MarryArenaBattleViewUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(Laya.stage,Laya.Event.RESIZE,this,this.onStageResize),this._model.onAutoEvt("updateCoupleMap",this,this.onUpdateCoupleMap),this.onStageResize(),this.onUpdateCoupleMap()},s.prototype.onUpdateCoupleMap=function(){var i=this._model.updateCoupleMap;i&&(this._mineItems.forEach(function(t,e){t.setData(i[0][e])}),this._enemyItems.forEach(function(t,e){t.setData(i[1][e])}))},s.prototype.onStageResize=function(){var t=this.leftBox.parent.globalToLocal(new Laya.Point(10,Laya.stage.height>>1));this.leftBox.pos(t.x,t.y);var e=this.rightBox.parent.globalToLocal(new Laya.Point(Laya.stage.width-10,Laya.stage.height>>1));this.rightBox.pos(e.x,e.y)},n=s,e.MarryArenaBattlePanel=n}(modules=modules||{}),function(e){var c,i,t,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}c=e.yuanShen||(e.yuanShen={}),t=ui.YuanShenViewUI,n=e.common.BtnGroup,s=e.notice.SystemNoticeManager,o=e.config.BlendCfg,i=t,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._tab=new n,this._tab.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1),this._tab.setBtns(this.tab_1,this.tab_2,this.tab_3,this.tab_4,this.tab_5),this._btns=new n,this._btns.canSelectHandler=Handler.create(this,this.btnsCanSelectHandler,null,!1),this._btns.setBtns(this.refineBtn,this.equipBtn,this.skillBtn,this.weaponBtn),this._tabRPs=[this.rpImg_1,this.rpImg_2,this.rpImg_3,this.rpImg_4,this.rpImg_5],this._funcs=[[c.YuanShenModel.instance.checkRefineRP],[c.YuanShenModel.instance.checkEquipRP,c.YuanShenModel.instance.checkFulingRP],[c.YuanShenModel.instance.checkSkillRP],[c.YuanShenModel.instance.checkWeaponRP]],this._panels=[[549],[550,614],[551],[552]]},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btns,"change",this,this.btnsChangeHandler),this.onAutoEvt(this._tab,"change",this,this.tabChangeHandler),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.updateRP),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.updateBtnsRP),this.onAutoGlobalEvt("YUAN_SHEN_SKILL_UPDATE",this,this.updateBtnsRP),this.onAutoGlobalEvt("BAG_UPDATE",this,this.refineUpdate),this.onAutoGlobalEvt("BAG_UPDATE",this,this.equipUpdate),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBtnsRP)},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),"function"==typeof t?this.callBack=t:this._indexs=t},r.prototype.onOpened=function(){var n=this;i.prototype.onOpened.call(this);var s=-1;c.YuanShenModel.instance.infos.forEach(function(t,e){var i=c.YuanShenModel.instance.checkRPByType(t[0]);n._tabRPs[e].visible=i,-1===s&&i&&(s=e)});var t=-1===s?0:s;this._indexs&&(t=this._indexs[0],s=this._indexs[1][0]),this._tab.selectedIndex=t,this.updateBtnsRP(),this._indexs||(s=this.firstBtnsIndex),this._btns.selectedIndex=s,c.YuanShenModel.instance.viewData||(this.callBack&&this.callBack(),this.callBack=null)},r.prototype.updateRP=function(){for(var t=0,e=this._tabRPs.length;t<e;t++)this._tabRPs[t].visible=c.YuanShenModel.instance.checkRPByTabIndex(this._btns.selectedIndex,t)},r.prototype.btnsChangeHandler=function(){var t,e=this._panels[this._btns.selectedIndex];t=1===this._btns.selectedIndex?(WindowManager.instance.isOpened(550)?t=550:WindowManager.instance.isOpened(614)&&(t=614),c.YuanShenModel.instance.viewData?614:e[0]):e[0];for(var i=0,n=this._panels.length;i<n;i++)for(var s=this._panels[i],o=0,a=s.length;o<a;o++)s[o]!=t&&WindowManager.instance.close(s[o]);if(-1===t)throw new Error("没有打开对应的面板");this.openChildPanl(t),this.bgImg.visible=3!=this._btns.selectedIndex,this.updateRP()},r.prototype.openChildPanl=function(t,e){e&&(551===t?this._btns.selectedIndex=2:552===t&&(this._btns.selectedIndex=3));var i,n=this.getRpIndexs(this._btns.selectedIndex),s=c.YuanShenModel.instance.infos;if(550==t||614==t){var o=0<n.length?n[0]:-1;-1!=o&&(c.YuanShenModel.instance.checkEquipRP(s[o])?t=550:c.YuanShenModel.instance.checkFulingRP(s[o])&&(t=614))}n.length?-1!=n.indexOf(this._tab.selectedIndex)?i=this._tab.selectedIndex:-1!=c.YuanShenModel.instance.inx?(i=c.YuanShenModel.instance.inx,c.YuanShenModel.instance.inx=-1):i=n[0]:i=this._tab.selectedIndex,WindowManager.instance.open(t,i),this._tab.selectedIndex=i},r.prototype.getRpIndexs=function(t){for(var e=this._funcs[t],i=c.YuanShenModel.instance.infos,n=[],s=0,o=i.length;s<o;s++)for(var a=!!i[s][3],r=0,l=e.length;r<l;r++){var h=e[r];a&&h&&h.call(c.YuanShenModel.instance,i[s])&&n.push(s)}return n},r.prototype.tabChangeHandler=function(){-1!==this._btns.selectedIndex&&(this.frameImg.x=43+128*this._tab.selectedIndex,c.YuanShenModel.instance.inx=this._tab.selectedIndex,this.updateBtnsRP(),GlobalData.dispatcher.event("YUAN_SHEN_TYPE_UPDATE",this._tab.selectedIndex))},Object.defineProperty(r.prototype,"firstBtnsIndex",{get:function(){for(var t=[this.btnsRPImg_1,this.btnsRPImg_2,this.btnsRPImg_3,this.btnsRPImg_4],e=0,i=t.length;e<i;e++)if(t[e].visible)return e;return 0},enumerable:!0,configurable:!0}),r.prototype.updateBtnsRP=function(){this.refineUpdate(),this.equipUpdate();for(var t=c.YuanShenModel.instance.infos,e=0,i=t.length;e<i;e++){var n=c.YuanShenModel.instance.infos[e],s=c.YuanShenModel.instance.checkSkillRP(n);if(this.btnsRPImg_3.visible=s)break}for(e=0,i=t.length;e<i&&(n=c.YuanShenModel.instance.infos[e],s=c.YuanShenModel.instance.checkWeaponRP(n)&&!!n[3],!(this.btnsRPImg_4.visible=s));e++);this.updateRP()},r.prototype.refineUpdate=function(t){if(null==t||0===t){for(var e=0,i=c.YuanShenModel.instance.infos.length;e<i;e++){var n=c.YuanShenModel.instance.infos[e],s=c.YuanShenModel.instance.checkRefineRP(n)&&!!n[3];if(this.btnsRPImg_1.visible=s)break}this.updateRP()}},r.prototype.equipUpdate=function(t){if(null==t||9===t||10===t){for(var e=c.YuanShenModel.instance.infos,i=0,n=e.length;i<n;i++){var s=e[i],o=(c.YuanShenModel.instance.checkEquipRP(s)||c.YuanShenModel.instance.checkFulingRP(s))&&!!s[3];if(this.btnsRPImg_2.visible=o)break}this.updateRP()}},r.prototype.canSelectHandler=function(t){var e=!!c.YuanShenModel.instance.infos[t][3];if(!e){var i=o.instance.getCfgById(80001+t)[1];s.instance.addNotice(c.YuanShenUtil.typeStrs(i[0]-1)+"达到"+(i[1]/1e3>>0)+"阶"+i[1]%100+"重开启",!0)}return e},r.prototype.btnsCanSelectHandler=function(t){if(2===t){if(!e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(654))return s.instance.addNotice(e.funcOpen.FuncOpenModel.instance.getFuncOpenTipById(654),!0),!1}else if(3===t&&!e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(835))return s.instance.addNotice(e.funcOpen.FuncOpenModel.instance.getFuncOpenTipById(835),!0),!1;return!0},r.prototype.close=function(){WindowManager.instance.close(549),WindowManager.instance.close(551),WindowManager.instance.close(552),WindowManager.instance.close(550),WindowManager.instance.close(614),i.prototype.close.call(this)},r.prototype.destroy=function(){this._tab=this.destroyElement(this._tab),this._btns=this.destroyElement(this._btns),this._tabRPs=this.destroyElement(this._tabRPs);for(var t=0,e=this._panels.length;t<e;t++)this._panels[t].length=0,this._panels[t]=null;for(this._panels.length=0,this._panels=null,t=0,e=this._funcs.length;t<e;t++)this._funcs[t].length=0,this._funcs[t]=null;this._funcs.length=0,this._funcs=null,i.prototype.destroy.call(this)},a=r,c.YuanShenPanel=a}(modules=modules||{}),function(t){var o,e,i,n,a,r,l,h,s;function c(){return null!==e&&e.apply(this,arguments)||this}o=t.yuanShen||(t.yuanShen={}),i=ui.YuanShenEquipViewUI,n=utils.TableUtils,a=t.bag.BaseItem,r=t.config.ItemEquipCfg,l=Laya.Image,h=t.common.CustomClip,e=i,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._pos={x:55,y:271},this._items=[],this._addImgs=[],this._rps=[this.rpImg_1,this.rpImg_2,this.rpImg_3,this.rpImg_4,this.rpImg_5,this.rpImg_6,this.rpImg_7,this.rpImg_8],this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.btn.x-5,this.btn.y-10)},c.prototype.onEvt=function(){var i=this;e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnClick),this.onAutoClick(this.tab,this,this.tabClick),this._addImgs.forEach(function(t,e){i.onAutoClick(t,i,i.addImgHandler,[e])}),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.update),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateRPs),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateFulingRP),this.onAutoGlobalEvt("YUAN_SHEN_TYPE_UPDATE",this,this.updataType)},c.prototype.updataType=function(t){this._typeIndex!==t&&(this.setOpenParam(t),this.onOpened())},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),WindowManager.instance.close(614),this.update()},c.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._typeIndex=t},c.prototype.update=function(){for(var t=0,e=1;e<9;e++){var i=o.YuanShenModel.instance.getEquipByTypePart(this._typeIndex+1,e);if(i){if(!this._items[e]){var n=new a;this.addChild(n),this.addChild(this._rps[e-1]),n.pos(this._pos.x+510*((e-1)/4>>0),this._pos.y+(e-1)%4*130,!0),this._items[e]=n}this._addImgs[e]&&(this._addImgs[e].visible=!1),this._items[e].visible=!0,this._items[e].dataSource=i,t+=r.instance.getItemCfgById(i[0])[5]}else{if(this._items[e]&&(this._items[e].visible=!1),!this._addImgs[e]){var s=new l("common/zs_tongyong_11.png");this.addChild(s),s.pos(this._pos.x+19+510*((e-1)/4>>0),this._pos.y+19+(e-1)%4*130,!0),this._addImgs[e]=s,this.onAutoClick(s,this,this.addImgHandler,[e])}this._addImgs[e].visible=!0}}t+=o.YuanShenModel.instance.calcFulingFight(this._typeIndex),this.fightMsz.value=t.toString(),this.updateRPs(),this.updateFulingRP()},c.prototype.addImgHandler=function(t){WindowManager.instance.open(259,[[t,this._typeIndex],5])},c.prototype.updateRPs=function(t){if(null==t||9===t){var n=o.YuanShenModel.instance.getBestEquipDic(this._typeIndex+1),s=!1;this._rps.forEach(function(t,e){var i=!!n[e+1];t.visible=i,!s&&i&&(s=i)}),(this.lRPImg.visible=s)?h.thisPlay(this._btnClip):h.thisStop(this._btnClip)}},c.prototype.updateFulingRP=function(t){null!=t&&0!==t||(this.rRPImg.visible=o.YuanShenModel.instance.checkFulingRP(o.YuanShenModel.instance.infos[this._typeIndex]))},c.prototype.btnClick=function(){var t=n.values(o.YuanShenModel.instance.getBestEquipDic(this._typeIndex+1)).map(function(t){return t[2]});if(0===t.length){CommonUtil.noticeError(46806);for(var e=-1,i=1;i<9;i++)if(!o.YuanShenModel.instance.getEquipByTypePart(this._typeIndex+1,i)){e=i;break}-1!==e&&WindowManager.instance.open(259,[[e,this._typeIndex],5])}else o.YuanShenCtrl.instance.fastWearYuanShenEquip(t,this._typeIndex+1)},c.prototype.tabClick=function(){WindowManager.instance.open(614,this._typeIndex)},c.prototype.destroy=function(){this._pos=null,this._items=this.destroyElement(this._items),this._rps=this.destroyElement(this._rps),this._btnClip=this.destroyElement(this._btnClip),this._addImgs=this.destroyElement(this._addImgs),e.prototype.destroy.call(this)},s=c,o.YuanShenEquipPanel=s}(modules=modules||{}),function(t){var r,s,e,o,i,n;function a(){return null!==s&&s.apply(this,arguments)||this}r=t.yuanShen||(t.yuanShen={}),e=ui.YuanShenFulingViewUI,o=t.common.BtnGroup,i=t.config.BlendCfg,s=e,__extends(a,s),a.prototype.initialize=function(){var t;s.prototype.initialize.call(this),this.centerX=this.centerY=0;for(var e=[],i=1;i<9;i++){var n=new r.YuanShenFulingItem;n.part=i,this.addChild(n),n.pos(55+510*((i-1)/4>>0),271+(i-1)%4*130,!0),e.push(n)}this._equips=new o,(t=this._equips).setBtns.apply(t,e),this._slots=new o,this._slots.setBtns(this.slot_1,this.slot_2,this.slot_3,this.slot_4,this.slot_5),this._slots.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1),this._slots.btns.forEach(function(t,e){t.index=e})},a.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.linkTxt,this,this.linkTxtHandler),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyBtnHandler),this.onAutoClick(this.tab,this,this.tabHandler),this.onAutoEvt(this._equips,"change",this,this.equipChangeHandler),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.update),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateRPs),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.conditionUpdate),this.onAutoGlobalEvt("YUAN_SHEN_TYPE_UPDATE",this,this.updataType)},a.prototype.updataType=function(t){this._typeIndex!==t&&(this.setOpenParam(t),this.onOpened())},a.prototype.onOpened=function(){s.prototype.onOpened.call(this),r.YuanShenModel.instance.viewData=null,WindowManager.instance.close(550),this.update(),this.conditionUpdate()},a.prototype.setOpenParam=function(e){s.prototype.setOpenParam.call(this,e),this._equips.selectedIndex=-1,this._typeIndex=e,this._equips.btns.forEach(function(t){t.setData(e),t.onOpened()}),this._slots.btns.forEach(function(t){t.typeIndex=e})},a.prototype.update=function(){var t=this.getSectIndex();-1!=t?this._equips.selectedIndex=t:-1===this._equips.selectedIndex&&(this._equips.selectedIndex=this.firstRPIndex),this.updateRPs(),this.fightMsz.value=r.YuanShenModel.instance.calcFulingFight(this._typeIndex).toString()},a.prototype.conditionUpdate=function(){var t=i.instance.getCfgById(82002)[1][0],e=CommonUtil.getPropCountById(90140001);this.propTxt.text=t.toString(),this.propTxt.color=t<=e?"#2d1a1a":"#ff3e3e"},a.prototype.linkTxtHandler=function(){var t=WindowManager.instance.getPanelById(548);r.YuanShenModel.instance.viewData=[t._tab.selectedIndex,1,1],WindowManager.instance.open(66,[t._tab.selectedIndex+2])},a.prototype.equipChangeHandler=function(){var i=this._equips.selectedIndex+1,n=-1;this._slots.btns.forEach(function(t,e){t.part=i,-1===n&&t.rpImg.visible&&(n=e)}),this._slots.selectedIndex=n<0?0:n},a.prototype.canSelectHandler=function(t){var e=r.YuanShenModel.instance.getFulingByTypePartSlot(this._typeIndex+1,this._equips.selectedIndex+1,t);return!(!e||!e[2])},Object.defineProperty(a.prototype,"firstRPIndex",{get:function(){for(var t=-1,e=1;e<9;e++)if(r.YuanShenModel.instance.getEquipByTypePart(this._typeIndex+1,e)){t=e-1;break}return t},enumerable:!0,configurable:!0}),a.prototype.getSectIndex=function(){for(var t=0,e=this._equips.btns.length;t<e;t++){for(var i=!1,n=t+1,s=0;s<5;s++)if(r.YuanShenModel.instance.checkFulingSlotRP(this._typeIndex+1,n,s)){i=!0;break}if(i)return t}return-1},a.prototype.updateRPs=function(t){var o=this;if(null==t||9===t){var e=r.YuanShenModel.instance.infos[this._typeIndex];this.lRPImg.visible=r.YuanShenModel.instance.checkEquipRP(e);var a=!1;this._equips.btns.forEach(function(t,e){for(var i=!1,n=e+1,s=0;s<5;s++)if(r.YuanShenModel.instance.checkFulingSlotRP(o._typeIndex+1,n,s)){i=!0,a=a||!0;break}t.rpImg.visible=i}),this.rRPImg.visible=a}},a.prototype.btnHandler=function(){-1!==this._equips.selectedIndex?WindowManager.instance.open(615,[this._typeIndex,this._equips.selectedIndex+1,this._slots.selectedIndex]):t.notice.SystemNoticeManager.instance.addNotice("无附灵卷可替换",!0)},a.prototype.oneKeyBtnHandler=function(){i.instance.getCfgById(82002)[1][0]<=CommonUtil.getPropCountById(90140001)?r.YuanShenCtrl.instance.oneKeyInlayYuanshenFuling(this._typeIndex+1,this._equips.selectedIndex+1):CommonUtil.goldNotEnoughAlert()},a.prototype.tabHandler=function(){WindowManager.instance.open(550,this._typeIndex)},a.prototype.destroy=function(){this._equips=this.destroyElement(this._equips),this._slots=this.destroyElement(this._slots),s.prototype.destroy.call(this)},n=a,r.YuanShenFulingPanel=n}(modules=modules||{}),function(t){var e,i;function n(){this._tab=[],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab=GlobalData.getConfig("yuanshen_skill")},n.prototype.getCfgById=function(t){for(var e=this._tab.length,i=0;i<e;i++)if(this._tab[i][0]===t)return this._tab[i];return null},n.prototype.getOneLevelId=function(t,e){void 0===e&&(e=0);for(var i=[],n=this._tab.length,s=0;s<n;s++){var o=this._tab[s];t===o[1]&&o[0]%1e4===e&&i.push(o[0])}return i},i=n,e.YuanshenSkillCfg=i}(modules=modules||{}),function(x){var B,e,t,i,S,M,w,P,n;function s(){return null!==e&&e.apply(this,arguments)||this}B=x.yuanShen||(x.yuanShen={}),t=ui.YuanShenSkillViewUI,i=x.common.BtnGroup,S=x.config.YuanshenSkillCfg,M=x.config.SkillCfg,w=x.config.ItemMaterialCfg,P=x.bag.BagModel,e=t,__extends(s,e),s.prototype.initialize=function(){this.centerX=this.centerY=0,e.prototype.initialize.call(this),this.boxArr=[this.mscBox1,this.mscBox2,this.mscBox3,this.mscBox4,this.mscBox5],this.currentMscArr=[this.currentMsc1,this.currentMsc2,this.currentMsc3,this.currentMsc4,this.currentMsc5],this.nextcurrentArr=[this.nextcurrent1,this.nextcurrent2,this.nextcurrent3,this.nextcurrent4,this.nextcurrent5],this.maxTxt.visible=!1,this._skillTab=[this.skill1,this.skill2,this.skill3,this.skill4,this.skill5],this._tab=new i,this._tab.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1),this._tab.setBtns(this.skill1.skillImg,this.skill2.skillImg,this.skill3.skillImg,this.skill4.skillImg,this.skill5.skillImg),this.creatEffect(),this._tab.selectedIndex=0},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.singleLvBtn,this,this.singleLvHanlder),this.onAutoClick(this.gotoBtn,this,this.allLvHanlder),this.onAutoEvt(this._tab,"change",this,this.tabChangeHandler),this.onAutoGlobalEvt("YUAN_SHEN_SKILL_UPDATE",this,this.updateView),this.onAutoGlobalEvt("YUAN_SHEN_TYPE_UPDATE",this,this.updataType)},s.prototype.updataType=function(t){this._typeIndex!==t+1&&(this.setOpenParam(t),this.onOpened())},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._isInitIndex=!1,this.baseImg.skin="yuan_shen/image_ysxt_bg0"+(4+this._typeIndex)+".jpg",this.updateView()},s.prototype.allLvHanlder=function(){WindowManager.instance.open(653,this._typeIndex)},s.prototype.showIndexView=function(t){for(var e=0,i=0;i<t[1].length;i++)this._skillTab[i].getDataChangeView(t[1][i],this._typeIndex)&&e++;return-1<this._tab.selectedIndex&&(this._skillTab[this._tab.selectedIndex].selectedImg.visible=!0),0<e},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._typeIndex=t+1},s.prototype.updateView=function(t){this._idArr=S.instance.getOneLevelId(this._typeIndex);for(var e=0;e<this._idArr.length;e++)this._skillTab[e].getDataChangeView(this._idArr[e],this._typeIndex,!1);var i=B.YuanShenModel.instance.getSkillData(this._typeIndex);if(i&&this._typeIndex==i[0]){var n=i[1];this.showIndexView(i);var s=n[this._tab.selectedIndex],o=s?s%1e4:0;s=s||this._idArr[n.length]||this._idArr[0];var a=x.config.YuanshenSkillCfg.instance.getCfgById(s),r=!x.config.YuanshenSkillCfg.instance.getCfgById(s+1),l=a[2];if(w.instance.getItemCfgById(l[0]),l&&2<=l.length){this.currencyIcon.skin=CommonUtil.getIconById(l[0],!0);var h=P.instance.getItemCountById(l[0]);this.currencyTxt.text=h+"/"+l[1],this.currencyTxt.color=h>=l[1]?"#50FF28":"#ff3e3e",this.currencyIcon.visible=!r}else this.currencyIcon.visible=!1;this.fight.value=B.YuanShenModel.instance.getFighting(this._typeIndex)+B.YuanShenModel.instance.getSkillMasterFight(this._typeIndex)+"";var c=["庚金","乙木","葵水","离火","厚土"],p=a[3],u=B.YuanShenModel.instance.infos[this._typeIndex-1];if(0<=p){var d=Math.floor(p/1e3),y=p%1e3,g=1e3*u[1]+u[2];this.conditionMsc1.text=c[this._typeIndex-1]+"炼神阶数达到"+d+"阶"+y+"重",p<=g?(this.condition1.text="(1/1)",this.condition1.color="#50FF28"):(this.condition1.text="(0/1)",this.condition1.color="#FF3E3E")}else console.log("满级处理");var f=u[4];if(0<=f){var _=a[4];this.conditionMsc2.text=c[this._typeIndex-1]+"淬神等级达到"+_+"级",this.condition2.text="("+f+"/"+_+")",this.condition2.color=_<=f?"#50FF28":"#FF3E3E"}else console.log("满级处理");var m=n[this._tab.selectedIndex]?n[this._tab.selectedIndex]:this._idArr[this._tab.selectedIndex];for(r||this.addTips(m,!1)?(this._btnClip.visible=!1,this._btnClip.stop()):(this._btnClip.visible=!0,this._btnClip.play()),e=0;e<5;e++){var v=n[e];v=(v=v||this._idArr[e])%1e4?v:v+1;var b=M.instance.getCfgById(v);this.currentMscArr[e].text=0==o?"本级:无":"本级:"+b[2];var T=M.instance.getCfgById(v+1);T?(this.nextcurrentArr[e].text="下级:"+(0==o?b[2]:T[2]),this.nextcurrentArr[e].color="#999999"):(this.nextcurrentArr[e].text="当前等级为最高等级",this.nextcurrentArr[e].color="#50ff28"),this.singleLvBtn.label=0==o?"激活":r?"已满级":"升级",this.currencyTxt.visible=!r,this.conditionMsc1.visible=this.conditionMsc2.visible=this.condition1.visible=this.condition2.visible=this.currencyIcon.visible=this.currencyTxt.visible=this.singleLvBtn.visible=!r,this.maxTxt.visible=r;var I=this.currentMscArr[e].textHeight+this.nextcurrentArr[e].textHeight+10;this.currentMscArr[e].y=(this.boxArr[e].height-I)/2,this.nextcurrentArr[e].y=this.currentMscArr[e].y+this.currentMscArr[e].textHeight+10}if(this.updatRP(),!this._isInitIndex){this._isInitIndex=!0;var C=B.YuanShenModel.instance.getSkillIndex(B.YuanShenModel.instance.infos[this._typeIndex-1]);for(this._tab.selectedIndex=0<C?C:0,e=0;e<5;e++)e===this._tab.selectedIndex?(this.boxArr[this._tab.selectedIndex].visible=!0,this.updataMscBox(this._tab.selectedIndex)):this.boxArr[e].visible=!1}}},s.prototype.updataMscBox=function(t){for(var e=0;e<this._skillTab.length;e++)this._skillTab[e].zOrder=e,this.boxArr[e].zOrder=e+5;this._skillTab[t].zOrder=11},s.prototype.singleLvHanlder=function(){var t=B.YuanShenModel.instance.getSkillData(this._typeIndex);if(t){var e=t[1][this._tab.selectedIndex];e=e||61e6+1e4*(5*this._typeIndex-4+this._tab.selectedIndex),this.addTips(e)||B.YuanShenCtrl.instance.addYuanShenSkill(this._typeIndex,e)}},s.prototype.addTips=function(t,e){void 0===e&&(e=!0);var i=["庚金","乙木","葵水","离火","厚土"],n=x.config.YuanshenSkillCfg.instance.getCfgById(t);if(console.log(n),!n)return!0;var s=B.YuanShenModel.instance.infos[this._typeIndex-1],o=n[3],a=n[4],r=n[2];if(0<=o){if(1e3*s[1]+s[2]<o)return e&&x.notice.SystemNoticeManager.instance.addNotice(i[this._typeIndex-1]+"炼神阶数不足",!0),!0;if(s[4]<a)return e&&x.notice.SystemNoticeManager.instance.addNotice(i[this._typeIndex-1]+"淬神等级不足",!0),!0;if(r&&2<=r.length&&P.instance.getItemCountById(r[0])<r[1])return e&&x.bag.BagUtil.openLackPropAlert(r[0],r[1]-r[0]),!0}return!1},s.prototype.canSelectHandler=function(t){var e=B.YuanShenModel.instance.getSkillData(this._typeIndex);if(e){var i=e[1];if(t>i.length){var n=S.instance.getOneLevelId(this._typeIndex,1);x.notice.SystemNoticeManager.instance.addNotice("激活【"+CommonUtil.getSkillName(n[t-1])+"】开启",!0)}return i.length>=t}return!0},s.prototype.tabChangeHandler=function(){for(var t=this._tab.selectedIndex,e=0;e<5;e++)e===t?(this.boxArr[t].visible=!this.boxArr[t].visible,this.updataMscBox(t)):this.boxArr[e].visible=!1;this.updateView(!0)},s.prototype.updatRP=function(){var t=B.YuanShenModel.instance.getSkillData(this._typeIndex);if(t){var e=t[1],i=e.length,n=!1;if(!(5<=i)){var s=this._idArr[e.length],o=S.instance.getCfgById(s),a=P.instance.getItemCountById(o[2][0]),r=o[2][1],l=o[3],h=o[4];if(0<=l&&0<=h){var c=B.YuanShenModel.instance.infos[this._typeIndex-1],p=1e3*c[1]+c[2],u=c[4];r<=a&&l<=p&&h<=u&&(n=!0)}this._skillTab[i].rpImg.visible=n}}},s.prototype.creatEffect=function(){this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.singleLvBtn.x-4,this.singleLvBtn.y-8),this._btnClip.scale(1,1,!0)},s.prototype.destroy=function(){this._tab=this.destroyElement(this._tab),this.boxArr=this.destroyElement(this.boxArr),this.currentMscArr=this.destroyElement(this.currentMscArr),this.nextcurrentArr=this.destroyElement(this.nextcurrentArr),this._skillTab=this.destroyElement(this._skillTab),e.prototype.destroy.call(this)},n=s,B.YuanShenSkillPanel=n}(modules=modules||{}),function(t){var e,i;function n(){this._cfgs=GlobalData.getConfig("yuanshen_refine")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgId=function(e,t){void 0===t&&(t=0);var i=ArrayUtils.binarySearch(this._cfgs,function(t){return e-t[0]});return i<0?null:this._cfgs[i+t]?Math.floor(this._cfgs[i+t][0]/1e6)!==Math.floor(e/1e6)?null:this._cfgs[i+t]:null},i=n,e.YuanShenRefineCfg=i}(modules=modules||{}),function(r){var t,u,e;function i(){this._typeTable={};for(var t=0,e=GlobalData.getConfig("yuanshen_quenching");t<e.length;t++){var i=e[t],n=i[0];this._typeTable[n]||(this._typeTable[n]=[]),this._typeTable[n].push(i)}}t=r.config||(r.config={}),u=r.common.AttrUtil,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.has=function(t,e){if(!this._typeTable[t])return!1;if(null!=e){if(e<0)return!1;if(this._typeTable[t][this._typeTable[t].length-1][1]<e)return!1}return!0},i.prototype.getDataByIdLvField=function(t,e,i){var n=this._typeTable[t];if(!n)throw new Error("类型不存在!"+t);e<0&&(e=0);var s=n.length,o=n[s-1][1];if(o<e)return null;if(1===i){for(var a=0;a<s;a++)if(e<=(p=n[a][1]))return n[a][3]}else if(0===i){var r=0,l=0;for(a=0;a<s;a++){if(e<=(p=n[a][1]))return r+=n[a][5]*(e-l);r+=n[a][5]*(p-l),l=p}}else if(3===i){var h=u.calcAttrs(n[0][4],0);for(a=l=0;a<s;a++){if(e<=(p=n[a][1])){var c=n[a-1]?e-n[a-1][1]:e;return u.calcAttrs(h,c,n[a][4],h),h}u.calcAttrs(h,p-l,n[a][4],h),l=p}}else{if(4===i)return o;if(7===i)for(a=0;a<s;a++){var p;if(e<(p=n[a][1]))return n[a][2]}}},i.prototype.getMaxLvByLv=function(t,e){for(var i=this._typeTable[t],n=i.length,s=0;s<n;s++){var o=i[s],a=r.yuanShen.YuanShenModel.instance.getInfoById(t);if(1e3*a[1]+a[2]<o[2])return 0==s?o[1]:i[s-1][1];if(e<o[1])return o[1]}return i[n-1][1]},e=i,t.YuanShenQuenchingCfg=e}(modules=modules||{}),function(t){var e,i;function n(){this._cfgs=GlobalData.getConfig("yuanshen_immortal")}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgId=function(e){var t=ArrayUtils.binarySearch(this._cfgs,function(t){return e-t[0]});return t<0?null:this._cfgs[t]},i=n,e.YuanShenImmortalCfg=i}(modules=modules||{}),function(o){var a,i,t,r,l,s,n,h,c,e;function p(){return null!==i&&i.apply(this,arguments)||this}a=o.yuanShen||(o.yuanShen={}),t=ui.YuanShenRefineViewUI,r=o.config.YuanShenRefineCfg,l=o.common.CustomClip,s=o.bag.BagModel,n=o.bag.BagUtil,h=o.config.YuanShenQuenchingCfg,c=o.config.YuanShenImmortalCfg,i=t,__extends(p,i),p.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._attrNameTxts=[this.attrNameTxt_1,this.attrNameTxt_2,this.attrNameTxt_3,this.attrNameTxt_4],this._attrTxts=[this.attrTxt_1,this.attrTxt_2,this.attrTxt_3,this.attrTxt_4],this._upTxts=[this.upTxt_1,this.upTxt_2,this.upTxt_3,this.upTxt_4],this._arrImgs=[this.arrImg_1,this.arrImg_2,this.arrImg_3,this.arrImg_4],this._icons=[this.icon_1,this.icon_2,this.icon_3,this.icon_4,this.icon_5,this.icon_6,this.icon_7,this.icon_8],this._btnEff=CommonUtil.creatEff(this,"btn_light",15),this._btnEff.pos(this.btn.x-5,this.btn.y-10),this._clip=CommonUtil.creatEff(null,"yuan_shen/yuan_shen",7),this._clip.pos(-10,120,!0),this.box.addChildAt(this._clip,0),this._tweenJS=TweenJS.create(this),this._txtTween=TweenJS.create(this.rankTxt)},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.quenchingBtn,this,this.quenchingBtnHandler),this.onAutoClick(this.immortalBtn,this,this.immortalBtnHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.propUpdate),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.update),this.onAutoGlobalEvt("YUAN_SHEN_TYPE_UPDATE",this,this.updataType)},p.prototype.updataType=function(t){this._typeIndex!==t&&(this.setOpenParam(t),this.onOpened())},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._effs=this.destroyElement(this._effs)||[],this._clip.play(),this.rankTxt.scale(1,1,!0);var t=a.YuanShenModel.instance.infos[this._typeIndex];this._recordId=a.YuanShenUtil.formatId(t[0],t[1],t[2]),this._id=a.YuanShenUtil.formatId(t[0],t[1],t[2]),this._clip.y=this.scheduleToY,this.update();var e=r.instance.getCfgId(this._id);this.propImg.skin=CommonUtil.getIconById(e[1][0]),this.quenchingBtn.skin=CommonUtil.getIconById(h.instance.getDataByIdLvField(this._typeIndex+1,t[4],1)[0])},p.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._typeIndex!==t&&(this._tweenJS&&this._tweenJS.stop(),this._txtTween&&this._txtTween.stop(),this._typeIndex=t)},p.prototype.update=function(){var t=a.YuanShenModel.instance.infos[this._typeIndex],e=h.instance.getMaxLvByLv(this._typeIndex+1,t[4]);this.immortalTxt.text=t[4]+"/"+e;var i=t[2];this._id=a.YuanShenUtil.formatId(t[0],t[1],i);var n=r.instance.getCfgId(this._id),s=r.instance.getCfgId(this._id,1);o.common.AttrUtil.setAttrTxts(n,s,this._attrNameTxts,this._attrTxts,this._arrImgs,this._upTxts,2),this.propUpdate(),this.calcFight(),this.tweenUpdate(),this.updateRP(t)},p.prototype.updateRP=function(t){this.immortalRP.visible=a.YuanShenModel.instance.checkImmortalRP(t),this.quenchingRP.visible=a.YuanShenModel.instance.checkQuenchingRP(t)},p.prototype.tweenUpdate=function(){var e=this;if(!this._tweenJS.isPlaying)if(this._recordId<this._id)this._tweenJS.to({schedule:1},500).start().onComplete(function(){var t=r.instance.getCfgId(e._recordId,1);e._recordId=t?t[0]:e._id,e.schedule=0,e.setShow((e._recordId/1e3>>0)%1e3,e._recordId%1e3),e.txtScale(),e.tweenUpdate()});else{var t=a.YuanShenModel.instance.infos[this._typeIndex],i=r.instance.getCfgId(this._id);if(r.instance.getCfgId(this._id,1))this.proTxt.text=10*t[7]+"/"+10*i[1][1],this._clip.y>this.scheduleToY?this._tweenJS.to({schedule:this.pro},(this._clip.y-this.scheduleToY)/120*500).start().onComplete(null):this._tweenJS.stop();else{var n=10*r.instance.getCfgId(this._id,-1)[1][1];this.proTxt.text=n+"/"+n,this._clip.y=0}this.setShow((this._recordId/1e3>>0)%1e3,this._recordId%1e3)}},p.prototype.txtScale=function(){var t=this;this._txtTween.to({scaleX:1.2,scaleY:1.2},250).start().onComplete(function(){t.rankTxt.scale(1,1,!0)})},Object.defineProperty(p.prototype,"schedule",{get:function(){return(120-this._clip.y)/120},set:function(t){this._clip.y=120*(1-t);var e=10*r.instance.getCfgId(this._recordId)[1][1];this.proTxt.text=Math.floor(e*t)+"/"+e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"pro",{get:function(){var t=r.instance.getCfgId(this._id),e=a.YuanShenModel.instance.infos[this._typeIndex],i=t[1];return e[7]/i[1]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"scheduleToY",{get:function(){return 120*(1-this.pro)},enumerable:!0,configurable:!0}),p.prototype.setShow=function(t,n){var s=this;this.rankTxt.text=t+"阶"+n+"重",this._icons.forEach(function(t,e){if(e<n){if(!s._effs[e]){var i=["jin","mu","shui","huo","tu"][s._typeIndex];s._effs[e]=CommonUtil.creatEff(s,"yuan_shen/"+i,5),s._effs[e].pos(t.x,t.y-35)}l.thisPlay(s._effs[e])}else l.thisStop(s._effs[e])})},p.prototype.calcFight=function(){var t=0;t+=r.instance.getCfgId(this._id)[3];var e=a.YuanShenModel.instance.infos[this._typeIndex],i=e[6],n=1e4*(this._typeIndex+1)+i;t+=c.instance.getCfgId(n)[3],t+=h.instance.getDataByIdLvField(this._typeIndex+1,e[4],0),this.fightMsz.value=t.toString()},p.prototype.propUpdate=function(t){if(null==t||0===t)if(r.instance.getCfgId(this._id,1)){this.btn.visible=this.propTxt.visible=this.propImg.visible=!0,this.maxTxt.visible=!1;var e=r.instance.getCfgId(this._id),i=s.instance.getItemCountById(e[1][0]),n=e[1][1];this.propTxt.text=i+"/1",i>=n-a.YuanShenModel.instance.infos[this._typeIndex][7]?l.thisPlay(this._btnEff):l.thisStop(this._btnEff),this.propTxt.color=i<=0?"#ff3e3e":"#2d1a1a"}else l.thisStop(this._btnEff),this.btn.visible=this.propTxt.visible=this.propImg.visible=!1,this.maxTxt.visible=!0},p.prototype.btnHandler=function(){if(!this._tweenJS.isPlaying){var t=r.instance.getCfgId(this._id),e=s.instance.getItemCountById(t[1][0]);if(0<e)a.YuanShenCtrl.instance.yuanShenRefine(this._typeIndex+1);else{var i=t[1][1];n.openLackPropAlert(t[1][0],i-e)}}},p.prototype.quenchingBtnHandler=function(){WindowManager.instance.open(567,this._typeIndex)},p.prototype.immortalBtnHandler=function(){WindowManager.instance.open(39,[7,this._typeIndex])},p.prototype.close=function(){this._tweenJS&&this._tweenJS.stop(),this._txtTween&&this._txtTween.stop(),i.prototype.close.call(this)},p.prototype.destroy=function(){this._tweenJS&&this._tweenJS.stop()&&(this._tweenJS=null),this._txtTween&&this._txtTween.stop()&&(this._txtTween=null),this._attrNameTxts=this.destroyElement(this._attrNameTxts),this._attrTxts=this.destroyElement(this._attrTxts),this._upTxts=this.destroyElement(this._upTxts),this._arrImgs=this.destroyElement(this._arrImgs),this._btnEff=this.destroyElement(this._btnEff),this._icons=this.destroyElement(this._icons),this._clip=this.destroyElement(this._clip),i.prototype.destroy.call(this)},e=p,a.YuanShenRefinePanel=e}(modules=modules||{}),function(t){var e,i;function n(){this.ids=[],this.attrIds=[],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.cfg=GlobalData.getConfig("yuanshen_artifact");for(var t=0,e=this.cfg.length;t<e;t++){this.cfg[t][0]%1e3==1&&this.ids.push(this.cfg[t][0]);for(var i=this.cfg[t][3],n=0,s=i.length;n<s;n+=2)-1===this.attrIds.indexOf(i[n])&&this.attrIds.push(i[n])}},n.prototype.getCfgById=function(t){for(var e=0,i=this.cfg.length;e<i;e++)if(this.cfg[e][0]===t)return this.cfg[e];return null},i=n,e.YuanshenArtifactCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.cfg=GlobalData.getConfig("yuanshen_artifact_skill"),this.ids=[];for(var t=0,e=this.cfg.length;t<e;t++)this.cfg[t][1]%1e4==1&&this.ids.push(this.cfg[t][1])},n.prototype.getCfgByLevelAndType=function(t,e){for(var i=0,n=this.cfg.length;i<n;i++)if(this.cfg[i][1]===t&&e===this.cfg[i][0])return this.cfg[i];return null},i=n,e.YuanshenArtifactSkillCfg=i}(modules=modules||{}),function(t){var _,e,i,m,v,b,n,T,s;function o(){return null!==e&&e.apply(this,arguments)||this}_=t.yuanShen||(t.yuanShen={}),i=ui.YuanShenWeaponViewUI,m=t.config.YuanshenArtifactCfg,v=t.bag.BagModel,b=t.config.AttrItemCfg,n=t.bag.BagUtil,T=t.config.YuanshenArtifactSkillCfg,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.attrNameArr=[this.attrName1,this.attrName2,this.attrName3,this.attrName4,this.attrName5,this.attrName6],this.attrValueArr=[this.attrValue1,this.attrValue2,this.attrValue3,this.attrValue4,this.attrValue5,this.attrValue6],this.attrUpImgArr=[this.attrUpImg1,this.attrUpImg2,this.attrUpImg3,this.attrUpImg4,this.attrUpImg5,this.attrUpImg6],this.attrUpTxtArr=[this.attrUpTxt1,this.attrUpTxt2,this.attrUpTxt3,this.attrUpTxt4,this.attrUpTxt5,this.attrUpTxt6];for(var t=0;t<6;t++)this.attrNameArr[t].visible=this.attrValueArr[t].visible=this.attrUpImgArr[t].visible=this.attrUpTxtArr[t].visible=!1;this.prizeEffect=CommonUtil.creatEff(this,"ok_state",7),this.addChildAt(this.prizeEffect,2),this.prizeEffect.scale(2.5,2.5),this.prizeEffect.pos(42,180,!0),this.prizeEffect.loop=!0},o.prototype.destroy=function(){this.model=this.destroyElement(this.model),this.attrNameArr=this.destroyElement(this.attrNameArr),this.attrUpImgArr=this.destroyElement(this.attrUpImgArr),this.attrUpTxtArr=this.destroyElement(this.attrUpTxtArr),this.prizeEffect=this.destroyElement(this.prizeEffect),this._modelTween&&(this._modelTween.stop(),this._modelTween=null),e.prototype.destroy.call(this)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.skillBtn,this,this.skillHanlder),this.onAutoClick(this.onekeyBtn,this,this.onekeyHanlder),this.onAutoClick(this.allAttrTxt,this,this.allAttrTxtHanlder),this.onAutoClick(this.clsBtn,this,this.closeHanlder),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView),this.onAutoGlobalEvt("YUAN_SHEN_TYPE_UPDATE",this,this.updataType)},o.prototype.getSkillId=function(){var t=_.YuanShenModel.instance.infos[this.type-1][9];return this.getCfgId(t)},o.prototype.closeHanlder=function(){var t=WindowManager.instance.getPanelById(548);t&&t.close()},o.prototype.updataType=function(t){this.type!==t+1&&(this.setOpenParam(t),this.onOpened())},o.prototype.onekeyHanlder=function(){var t=_.YuanShenModel.instance.infos[this.type-1][9],e=m.instance.getCfgById(this.getCfgId(t)+1)[2],i=v.instance.getItemCountById(e[0]);i>=e[1]?_.YuanShenCtrl.instance.yuanShenArtifact(this.type):n.openLackPropAlert(e[0],i-e[0])},o.prototype.skillHanlder=function(){WindowManager.instance.open(1254,this.type)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.model.y=0,this._modelTween&&(this._modelTween.stop(),this._modelTween=null),this._modelTween||(this._modelTween=TweenJS.create(this.model).to({y:this.model.y-10},1e3).yoyo(!0).repeat(99999999),this._modelTween.start()),this.prizeEffect.visible=!0,this.prizeEffect.play(),this.updateView()},o.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.type=t+1},o.prototype.getCfgId=function(t){return 1e3*this.type+t>>0},o.prototype.updateView=function(){for(var t=0;t<6;t++)this.attrNameArr[t].visible=this.attrValueArr[t].visible=this.attrUpImgArr[t].visible=this.attrUpTxtArr[t].visible=!1;var e=_.YuanShenModel.instance.infos[this.type-1],i=e[9],n=m.instance.getCfgById(this.getCfgId(i)),s=m.instance.getCfgById(this.getCfgId(i)+1),o=0;if(this.model.skin=n?"assets/icon/ui/yuan_shen/"+n[1]+".png":"assets/icon/ui/yuan_shen/"+s[1]+".png",this.feedMaxLvTxt.visible=!s,this.item1.visible=this.onekeyBtn.visible=!!s,s){var a=s&&s[2],r=v.instance.getItemCountById(a[0]);this.item1.dataSource=[a[0],1,0,null],this.item1.setNum(r+"/"+a[1],r<a[1]?"#ff7462":"#ffffff"),r<a[1]?this.stopEff():this.playEff()}else this.playEff();if(0===i){this.onekeyBtn.label="激活",t=0;for(var l=(p=s[3]).length;t<l;t+=2){var h=(d=b.instance.getCfgById(p[t]))[2]?Math.round(1e4*p[t+1])/100+"%":p[t+1]+"";this.setAttrUI(t/2,[d[1]+":0",h])}}else if(o+=n[4],s){this.onekeyBtn.label="升阶";var c=n[3],p=s[3];for(t=0,l=c.length;t<l;t+=2){h=(d=b.instance.getCfgById(c[t]))[2]?Math.round(1e4*c[t+1])/100+"%":c[t+1]+"";var u=d[2]?Math.round(1e4*(p[t+1]-c[t+1]))/100+"%":(p[t+1]-c[t+1]>>0)+"";this.setAttrUI(t/2,[d[1]+":"+h,u])}}else for(t=0,l=(c=n[3]).length;t<l;t+=2){var d;h=(d=b.instance.getCfgById(c[t]))[2]?Math.round(1e4*c[t+1])/100+"%":c[t+1]+"",this.setAttrUI(t/2,[d[1]+":"+h])}this.bgImg.skin="yuan_shen/image_yssq_bg0"+this.type+".jpg",this.lvMsc.text=(e[10]%1e3>>0).toString();var y=T.instance.getCfgByLevelAndType(e[10],this.type);y&&(o+=y[5]);var g=T.instance.getCfgByLevelAndType(1,this.type);this.skillName.text=g[7],this.fight.value=o.toString(),this.stage1.value=i.toString(),this.stageBox.visible=0<i,this.noAct.visible=i<=0,this.rpImg.visible=_.YuanShenModel.instance.getWeapSkillRpByType(this.type);var f=m.instance.getCfgById(m.instance.ids[this.type-1]);this.weapName.text=f[5],this.skillIcon.skin="assets/icon/skill/"+g[6]+".png",this.offset()},o.prototype.offset=function(){for(var t=0,e=0;e<6;e++)this.attrNameArr[e].textWidth>t&&(t=this.attrNameArr[e].textWidth);for(e=0;e<6;e++)this.attrUpImgArr[e].x=this.attrNameArr[e].x+t,this.attrUpTxtArr[e].x=this.attrUpImgArr[e].x+this.attrUpImgArr[e].width},o.prototype.close=function(){this._modelTween&&(this._modelTween.stop(),this._modelTween=null),e.prototype.close.call(this)},o.prototype.allAttrTxtHanlder=function(){for(var t=0,e=[],i=0,n=_.YuanShenModel.instance.infos.length;i<n;i++){var s=_.YuanShenModel.instance.infos[i],o=s[9],a=m.instance.getCfgById(1e3*s[0]+o>>0);t+=a&&a[4];var r=T.instance.getCfgByLevelAndType(s[10],this.type);r&&(t+=r[5]);for(var l=a&&a[3]||[],h=0,c=l.length;h<c;h+=2){for(var p=!1,u=0,d=e.length;u<d;u++)if(e[u][0]===l[h]){p=!0;break}p?e[u][1]+=l[h+1]:e.push([l[h],l[h+1]])}}WindowManager.instance.open(26,["圣器总属性",t,e,m.instance.attrIds.sort(function(t,e){return t-e})])},o.prototype.setAttrUI=function(t,e){void 0===e&&(e=null);var i=[this.attrNameArr[t],this.attrUpTxtArr[t]];if(e){var n=e.length;for(s=0,o=i.length;s<o;s++)s<n?(i[s].visible=!0,i[s].text=e[s]):i[s].visible=!1,this.attrUpImgArr[t].visible=2===n}else for(var s=0,o=i.length;s<o;s++)i[s].visible=!1,this.attrUpImgArr[t].visible=!1},o.prototype.playEff=function(){this._btnClip||(this._btnClip=CommonUtil.creatEff(this.onekeyBtn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(1,1,!0)),this._btnClip.play(),this._btnClip.visible=!0},o.prototype.stopEff=function(){this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1)},s=o,_.YuanShenWeaponPanel=s}(modules=modules||{}),function(o){var a,i,t,r,l,n,e;function s(){return null!==i&&i.apply(this,arguments)||this}a=o.yuanShen||(o.yuanShen={}),t=ui.EquipmentSiHunAlertUI,r=o.common.CustomClip,l=o.config.YuanShenQuenchingCfg,n=o.bag.BagUtil,i=t,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.manjiText.text="淬神已达上限",this.titleTxt_1.text="已淬神",this.titleTxt_2.text="淬神属性",this.instenBtn.label="淬神",this.oneInstenBtn.label="一键淬神",this._nameTextArry=[this.attributeNameText1,this.attributeNameText2,this.attributeNameText3,this.attributeNameText4,this.attributeNameText5,this.attributeNameText6],this._valueTextArry=[this.attributeValueText1,this.attributeValueText2,this.attributeValueText3,this.attributeValueText4,this.attributeValueText5,this.attributeValueText6],this._upValueTextArry=[this.attributeUpValueText1,this.attributeUpValueText2,this.attributeUpValueText3,this.attributeUpValueText4,this.attributeUpValueText5,this.attributeUpValueText6],this._upValueImgArry=[this.attributeUpImg1,this.attributeUpImg2,this.attributeUpImg3,this.attributeUpImg4,this.attributeUpImg5,this.attributeUpImg6],this._btnClip1=r.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip1),this._btnClip1.pos(this.instenBtn.x-6,this.instenBtn.y-8,!0),this._btnClip2=r.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip2),this._btnClip2.pos(this.oneInstenBtn.x-6,this.oneInstenBtn.y-8,!0)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.instenBtn,this,this.instenBtnHandler),this.onAutoClick(this.oneInstenBtn,this,this.oneInstenBtnHandler),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.update),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateProp)},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._typeIndex=t},s.prototype.onOpened=function(){i.prototype.onOpened.call(this);var t=a.YuanShenModel.instance.infos[this._typeIndex],e=l.instance.getDataByIdLvField(this._typeIndex+1,t[4],1);this.nameText.text=CommonUtil.getNameByItemId(e[0]),this.nameText.color=CommonUtil.getColorById(e[0]),this.update()},s.prototype.update=function(){var t=a.YuanShenModel.instance.infos[this._typeIndex],e=l.instance.getDataByIdLvField(this._typeIndex+1,t[4],1);this.nowBaseItem.dataSource=[e[0],e[1],0,null];var i=l.instance.getMaxLvByLv(this._typeIndex+1,t[4]);this.devourText.text=t[4]+"/"+i,this.updateProp(),this.setAttribute()},s.prototype.updateProp=function(t){if(null==t||0===t){var e=a.YuanShenModel.instance.infos[this._typeIndex],i=l.instance.getDataByIdLvField(this._typeIndex+1,e[4],1),n=CommonUtil.getPropCountById(i[0]);if(this.haveText.text=""+n,l.instance.has(this._typeIndex+1,e[4]+1)){var s=l.instance.getDataByIdLvField(this._typeIndex+1,e[4],7);s>1e3*e[1]+e[2]?(this.instenBtn.visible=this.oneInstenBtn.visible=!1,this.tipText.visible=!0,this.tipText.text="炼神达到"+(s/1e3>>0)+"阶"+s%100+"重可提高淬神上限",r.thisStop(this._btnClip1),r.thisStop(this._btnClip2)):(this.instenBtn.visible=this.oneInstenBtn.visible=!0,this.tipText.visible=!1,n>=i[1]?(r.thisPlay(this._btnClip1),r.thisPlay(this._btnClip2)):(r.thisStop(this._btnClip1),r.thisStop(this._btnClip2))),this.manjiText.visible=!1}else this.instenBtn.visible=this.oneInstenBtn.visible=!1,this.manjiText.visible=!0,r.thisStop(this._btnClip1),r.thisStop(this._btnClip2)}},s.prototype.setAttribute=function(){var t=a.YuanShenModel.instance.infos[this._typeIndex],e=l.instance.getDataByIdLvField(this._typeIndex+1,t[4],3),i=l.instance.getDataByIdLvField(this._typeIndex+1,t[4]+1,3),n=o.common.AttrUtil.attrTxts(e,i,this._nameTextArry,this._valueTextArry,this._upValueImgArry,this._upValueTextArry),s=this._nameTextArry[n-1].y+this._nameTextArry[n-1].height+25;this.diTuImg.height=s,this.divisionImg.y=this.diTuImg.y+this.diTuImg.height+10,this.instenBtn.y=this.oneInstenBtn.y=this.divisionImg.y+20,this._btnClip1.y=this._btnClip2.y=this.oneInstenBtn.y-10,this.tipText.y=this.manjiText.y=this.instenBtn.y+38,this.height=this.bgImg.height=this.instenBtn.y+this.instenBtn.height+50,this.hintTxt.y=this.height+50},s.prototype.instenBtnHandler=function(){this.judgePropIsEnought&&a.YuanShenCtrl.instance.yuanShenQuenching(this._typeIndex+1)},s.prototype.oneInstenBtnHandler=function(){this.judgePropIsEnought&&a.YuanShenCtrl.instance.yuanShenQuenching(this._typeIndex+1,!0)},Object.defineProperty(s.prototype,"judgePropIsEnought",{get:function(){var t=a.YuanShenModel.instance.infos[this._typeIndex],e=l.instance.getDataByIdLvField(this._typeIndex+1,t[4],1);return!!CommonUtil.conditionItemIsEnough(e)||(n.openLackPropAlert(e[0],e[1]),!1)},enumerable:!0,configurable:!0}),s.prototype.destroy=function(){this._nameTextArry=this.destroyElement(this._nameTextArry),this._valueTextArry=this.destroyElement(this._valueTextArry),this._upValueTextArry=this.destroyElement(this._upValueTextArry),this._upValueImgArry=this.destroyElement(this._upValueImgArry),this._btnClip1=this.destroyElement(this._btnClip1),this._btnClip2=this.destroyElement(this._btnClip2),i.prototype.destroy.call(this)},e=s,a.QuenchingAlert=e}(modules=modules||{}),function(e){var l,i,t,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}l=e.yuanShen||(e.yuanShen={}),t=ui.YuanShenFulingAlertUI,n=e.common.SimpleList,s=e.common.BtnGroup,o=e.config.BlendCfg,i=t,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(l.YuanShenFulingPropItem,262,102,1,1,0,1),this._list.size(262,527),this._list.pos(34,128,!0),this.addChild(this._list),this._slots=new s,this._slots.setBtns(this.slot_1,this.slot_2,this.slot_3,this.slot_4,this.slot_5),this._slots.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1),this._slots.btns.forEach(function(t,e){t.index=e}),this._existSubTypes=[]},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.lArrBtn,this,this.arrowHandler,[-1]),this.onAutoClick(this.rArrBtn,this,this.arrowHandler,[1]),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoEvt(this._list,"select",this,this.listHandler),this.onAutoEvt(this._slots,"change",this,this.slotHandler),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.conditionUpdate),this.onAutoGlobalEvt("BAG_UPDATE",this,this.propUpdate)},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._typeIndex=t[0],this._part=t[1],this._slotIndex=t[2]},r.prototype.onOpened=function(){var e=this;i.prototype.onOpened.call(this),this.noTipsTxt.visible=!1,this.noTipsImg.visible=!1,this._slots.btns.forEach(function(t){t.typeIndex=e._typeIndex}),this.upateShow()},r.prototype.conditionUpdate=function(){var t=o.instance.getCfgById(82002)[1][0],e=CommonUtil.getPropCountById(90140001);this.propTxt.text=t.toString(),this.propTxt.color=t<=e?"#2d1a1a":"#ff3e3e",this.noTipsTxt.visible=0===this._list.datas.length,this.noTipsImg.visible=0===this._list.datas.length},r.prototype.propUpdate=function(t){var e=this;null!=t&&10!==t||(this._list.datas=this.othersFulingByCur(this._typeIndex+1,this._part).map(function(t){return[e._typeIndex,e._part,e._slotIndex,t]}),this.noTipsTxt.visible=0===this._list.datas.length,this.noTipsImg.visible=0===this._list.datas.length,this._list.selectedIndex=0)},r.prototype.update=function(){var t=l.YuanShenModel.instance.getEquipByTypePart(this._typeIndex+1,this._part);this.item.dataSource=t,this.lArrBtn.visible=this.beside(-1),this.rArrBtn.visible=this.beside(1),this.propUpdate()},r.prototype.beside=function(t,e){if(void 0===e&&(e=this._part),(e+=t)<1||9<=e)return!1;var i=!!l.YuanShenModel.instance.getEquipByTypePart(this._typeIndex+1,e);return i||this.beside(t,e)},r.prototype.arrowHandler=function(t){if(this._part+=t,!l.YuanShenModel.instance.getEquipByTypePart(this._typeIndex+1,this._part))return this.arrowHandler(t);for(var e=0,i=0;i<5;i++)if(l.YuanShenModel.instance.checkFulingSlotRP(this._typeIndex+1,this._part,i)){e=i;break}this._slotIndex=e,this.upateShow()},r.prototype.upateShow=function(){var e=this;this._slots.btns.forEach(function(t){t.part=e._part}),this._slots.selectedIndex=this._slotIndex,this.update(),this.conditionUpdate()},r.prototype.btnHandler=function(){if(0!==this._list.datas.length){var t=o.instance.getCfgById(82002)[1][0];CommonUtil.getPropCountById(90140001)<t?CommonUtil.goldNotEnoughAlert():l.YuanShenCtrl.instance.inlayYuanshenFuling(this._typeIndex+1,this._part,this._slotIndex,this._list.selectedData[3][2])}else e.notice.SystemNoticeManager.instance.addNotice("无附灵卷可替换",!0)},r.prototype.listHandler=function(){this._list.selectedData?-1!==this._existSubTypes.indexOf(l.YuanShenUtil.getFulingSubType(this._list.selectedData[3][0]))?(this.btn.visible=this.propImg.visible=this.propTxt.visible=!1,this.yetTxt.visible=!0):(this.btn.visible=this.propImg.visible=this.propTxt.visible=!0,this.yetTxt.visible=!1):(this.propImg.visible=this.propTxt.visible=!0,this.yetTxt.visible=!1)},r.prototype.slotHandler=function(){this._slotIndex=this._slots.selectedIndex,this.update(),this.conditionUpdate()},r.prototype.canSelectHandler=function(t){var e=l.YuanShenModel.instance.getFulingByTypePartSlot(this._typeIndex+1,this._part,t);return!(!e||!e[2])},r.prototype.othersFulingByCur=function(t,e){var s=this;this._existSubTypes.length=0,this._existSubTypes=l.YuanShenModel.instance.getExistSubTypes(t,e,this._slotIndex);var i=l.YuanShenUtil.getItemsByBagIdType(10,t);return i.sort(function(t,e){var i=s._existSubTypes.indexOf(l.YuanShenUtil.getFulingSubType(t[0])),n=s._existSubTypes.indexOf(l.YuanShenUtil.getFulingSubType(e[0]));return-1===i&&-1===n?s.sortFulingItemsQS(t,e):-1!==i&&-1!==n?s.sortFulingItemsQS(t,e):-1===i?-1:-1===n?1:0}),i},r.prototype.sortFulingItemsQS=function(t,e){var i=l.YuanShenUtil.getFulingQualityById(t[0]),n=l.YuanShenUtil.getFulingQualityById(e[0]);if(i!==n)return n<=i?-1:1;var s=l.YuanShenUtil.getLvById(t[0]),o=l.YuanShenUtil.getLvById(e[0]);if(s!==o)return o<=s?-1:1;var a=l.YuanShenUtil.getFulingSubType(t[0]),r=l.YuanShenUtil.getFulingSubType(e[0]);return a===r?t[0]>e[0]?-1:1:r<a?-1:1},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._slots=this.destroyElement(this._slots),this._existSubTypes.length=0,this._existSubTypes=null,i.prototype.destroy.call(this)},a=r,l.YuanShenFulingAlert=a}(modules=modules||{}),function(t){var e,i;function n(){this._tab=[],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab=GlobalData.getConfig("yuanshen_skill_master")},n.prototype.getCfgBygradetypeLevel=function(t,e,i){for(var n=this._tab.length,s=0;s<n;s++)if(this._tab[s][1]===t&&this._tab[s][0]===e&&this._tab[s][2]===i)return this._tab[s];return null},n.prototype.getMaxLvBygradetype=function(t,e){for(var i=this._tab.length,n=0,s=0;s<i;s++)this._tab[s][1]===t&&this._tab[s][0]===e&&n++;return n},n.prototype.getgradeByType=function(t){for(var e=this._tab.length,i=[],n=0;n<e;n++)if(this._tab[n][0]===t){for(var s=!1,o=0;o<i.length;o++)if(i[o]===this._tab[n][1]){s=!0;break}s||i.push(this._tab[n][1])}return i},i=n,e.YuanshenSkillMasterCfg=i}(modules=modules||{}),function(t){var p,e,i,u,d,o,n;function s(){return null!==e&&e.apply(this,arguments)||this}p=t.yuanShen||(t.yuanShen={}),i=ui.YuanShenSkillAlertUI,u=t.config.YuanshenSkillCfg,d=t.config.YuanshenSkillMasterCfg,o=t.config.AttrItemCfg,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.item_arr=[this.item1,this.item2,this.item3,this.item4,this.item5],this.bgImgArr=[this.txtBg1,this.txtBg2,this.txtBg3],this.stageNameArr=[this.stageName1,this.stageName2,this.stageName3],this.currentStageArr=[this.currentStage1,this.currentStage2,this.currentStage3],this.currentStageMscArr=[this.currentStageMsc1,this.currentStageMsc2,this.currentStageMsc3],this.nextStageArr=[this.nextStage1,this.nextStage2,this.nextStage3],this.nextStageMscArr=[this.nextStageMsc1,this.nextStageMsc2,this.nextStageMsc3];for(var t=0;t<3;t++)CommonUtil.setHTMLPro(this.currentStageArr[t],"#1f304d","SimHei",24),CommonUtil.setHTMLPro(this.nextStageArr[t],"#1f304d","SimHei",24)},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.type=t},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView()},s.prototype.updataView=function(){var t=p.YuanShenModel.instance.getSkillData(this.type);if(t){for(var e=u.instance.getOneLevelId(this.type),i=t[1],n=0;n<e.length;n++)i[n]?this.item_arr[n].getDataChangeView(t[1][n],this.type):this.item_arr[n].getDataChangeView(e[n],this.type,!1),this.item_arr[n].hideBase(),this.item_arr[n].nameText.scaleY=1.5,this.item_arr[n].nameText.scaleX=1.5,this.item_arr[n].nameBg.scaleY=1.5,this.item_arr[n].nameBg.scaleX=.8;var s=d.instance.getgradeByType(this.type),o=t[2];for(n=0;n<3;n++){var a=o[n];o[n]||(a=[s[n],0]);var r=a[1]||0,l=a[0]||2,h=d.instance.getCfgBygradetypeLevel(l,this.type,r),c=d.instance.getCfgBygradetypeLevel(l,this.type,r+1);this.nextStageMscArr[n].color="#8b8b8b",0===r?(this.currentStageArr[n].innerHTML="当前阶段",this.currentStageMscArr[n].text="无加成",this.currentStageMscArr[n].color="#1f304d",this.nextStageArr[n].innerHTML='下一阶段：任意<span color="#b15315">'+l+'</span>个神技达到达到<span color="#b15315">'+(r+1)+"</span>级",this.nextStageMscArr[n].text=this.getSkillMsc(c[3])):(this.currentStageArr[n].innerHTML='当前阶段：任意<span color="#b15315">'+l+'</span>个神技达到达到<span color="#b15315">'+r+"</span>级",this.currentStageMscArr[n].text=this.getSkillMsc(h[3]),this.currentStageMscArr[n].color="#0ecf09",c?(this.nextStageArr[n].innerHTML='下一阶段：任意<span color="#b15315">'+l+'</span>个神技达到达到<span color="#b15315">'+(r+1)+"</span>级",this.nextStageMscArr[n].text=this.getSkillMsc(c[3])):(this.nextStageArr[n].innerHTML="下一阶段",this.nextStageMscArr[n].text="已达到最大等级",this.nextStageMscArr[n].color="#0ecf09")),this.stageNameArr[n].text="共鸣"+"一二三四五六七八九十"[n]+" Lv"+r,this.nextStageMscArr[n-1]&&(this.bgImgArr[n].y=this.nextStageMscArr[n-1].y+this.nextStageMscArr[n-1].textHeight+8),this.stageNameArr[n].y=this.bgImgArr[n].y+4,this.currentStageArr[n].y=this.bgImgArr[n].y+this.bgImgArr[n].height+8,this.currentStageMscArr[n].y=this.currentStageArr[n].y+this.currentStageArr[n].contextHeight+8,this.nextStageArr[n].y=this.currentStageMscArr[n].y+this.currentStageMscArr[n].height+8,this.nextStageMscArr[n].y=this.nextStageArr[n].y+this.nextStageArr[n].contextHeight+8}this.fight.value=p.YuanShenModel.instance.getSkillMasterFight(this.type).toString()}},s.prototype.getSkillMsc=function(t){for(var e="",i=0;i<t.length;i+=2){var n=o.instance.getCfgById(t[i]),s=!!n[2];e+=(0==i?"":",")+n[1]+"+"+(s?Math.round(100*t[i+1])+"%":t[i+1])}return e},n=s,p.YuanShenSkillAlert=n}(modules=modules||{}),function(y){var g,e,f,_,m,r,l,h,t;function i(){return null!==e&&e.apply(this,arguments)||this}g=y.yuanShen||(y.yuanShen={}),f=y.config.YuanshenArtifactSkillCfg,_=y.config.YuanshenArtifactCfg,m=y.bag.BagModel,r=y.config.AttrItemCfg,l=y.bag.BagUtil,h=y.notice.SystemNoticeManager,e=ui.YuanShenWeaponSkillAlertUI,__extends(i,e),i.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),e.prototype.destroy.call(this)},i.prototype.initialize=function(){e.prototype.initialize.call(this),this.btnClip=y.common.CommonUtil.creatEff(this,"btn_light",15),this.btnClip.pos(this.btn.x-5,this.btn.y-10),this.btnClip.visible=!1,CommonUtil.setHTMLPro(this.curLvDesc,"#3a5385","SimHei",24),this.curLvDesc.style.leading=10},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.activateOrUpHandler),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView)},i.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.type=t},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},i.prototype.updateView=function(){var t=g.YuanShenModel.instance.infos[this.type-1];if(t){this.titleTxt.text="圣器技能";var e,i,n=t[10],s=f.instance.getCfgByLevelAndType(n,this.type),o=f.instance.getCfgByLevelAndType(n+1,this.type),a=f.instance.getCfgByLevelAndType(1,this.type);if(o){this.btn.visible=!0;var r=a[2],l=o[3],h=m.instance.getItemCountById(l[0]);this.conditionTxt.color="#ED1100";var c=_.instance.getCfgById(_.instance.ids[this.type-1]);t[9]<r?(this.btnClip.visible=!1,this.btnClip.stop(),this.btn.gray=!0,this.btn.mouseEnabled=!1,this.conditionTxt.visible=!0,_.instance.getCfgById(1e3*this.type+t[9]+1+1)[2],this.conditionTxt.text=c[5]+"达到"+r+"阶开启",this.propBox.visible=!1):(this.btn.gray=!1,this.btn.mouseEnabled=!0,this.conditionTxt.visible=!1,this.propImg.skin=y.common.CommonUtil.getIconById(l[0]),this.propTxt.text=h+"/"+l[1],this.propTxt.color=h<l[1]?"#ff3e3e":"#00ad35",this.propBox.visible=!0,h>=l[1]?(this.btnClip.visible=!0,this.btnClip.play()):(this.btnClip.visible=!1,this.btnClip.stop()))}else this.btnClip.visible=!1,this.btnClip.stop(),this.propBox.visible=this.btn.visible=!1,this.conditionTxt.text="已满级",this.conditionTxt.color="#00AD35",this.conditionTxt.visible=!0;this.btn.label=0===n?"激活":"升级";var p=a[7],u=a[6];if(s)this.nameTxt.text=p+" Lv."+(n%1e3>>0),this.iconImg.skin="assets/icon/skill/"+u+".png",this.powerTxt.text="战力："+s[5],e=this.getStr(s[4],"#00AD35"),i=o?this.getStr(o[4],"#8d8d8d"):"<span style='color:#8d8d8d'>当前等级为最高等级</span>";else{this.nameTxt.text=p+" Lv.0",this.iconImg.skin="assets/icon/skill/"+u+".png",this.powerTxt.text="战力：0",e="<span style='color:#00AD35'>无</span><br/>";var d=o[4];i=this.getStr(d,"#8d8d8d")}this.curLvDesc.innerHTML="<span style='color:#2C476A'>当前效果</span><br/>"+e+"\n                                        <span style='color:#2C476A'>下级效果</span><br/>"+i,this.offSet()}},i.prototype.offSet=function(){this.txtBg.height=25+this.curLvDesc.contextHeight;var t=this.txtBg.y+this.txtBg.height-32;this.conditionTxt.y=62+t,this.propBox.y=55+t,this.btn.y=105+t,this.height=this.bgImg.height=this.btn.y+115,this.breakTxt.y=this.height+20,this.btnClip.pos(this.btn.x-5,this.btn.y-10);var e=44+this.propTxt.textWidth,i=(this.propBox.width-e)/2;this.propImg.x=i,this.propTxt.x=44+i},i.prototype.getStr=function(t,e){for(var i="",n=0,s=t.length;n<s;n+=2){var o=r.instance.getCfgById(t[n]),a=o[2]?Math.round(1e4*t[n+1])/100+"%":t[n+1]+"";i+=" <span style='color:"+e+"'>"+o[1]+"+"+a+"</span><br/>"}return i},i.prototype.activateOrUpHandler=function(){var t=g.YuanShenModel.instance.infos[this.type-1];if(t){var e=t[10],i=f.instance.getCfgByLevelAndType(1,this.type),n=f.instance.getCfgByLevelAndType(e+1,this.type);if(n){var s=i[2],o=n[3],a=m.instance.getItemCountById(o[0]);a<o[1]?l.openLackPropAlert(o[0],o[1]-a):t[9]<s?h.instance.addNotice("圣器阶数不足",!0):g.YuanShenCtrl.instance.yuanShenArtifactSkill(this.type)}else h.instance.addNotice("已满级",!0)}},t=i,g.YuanShenWeaponSkillAlert=t}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.yuanShen||(t.yuanShen={}),n=Laya.Image,s=t.archive.ArchiveActiveAlert,o=t.config.YuanshenArtifactCfg,i=s,__extends(r,i),r.prototype.setSHowModel=function(){this.archiveItem.visible=!1;var t=new n;this.addChild(t),this._showModel=t},r.prototype.setUI=function(t){var e=this._showModel;if(e.centerX=0,e.y=154,t){var i=o.instance.getCfgById(t);e.skin="assets/icon/ui/yuan_shen/"+i[1]+".png",this.atkValueMsz.value=i[4].toString(),this.nameTXt.text=i[5],this.titleImage.skin="yuan_shen/txt_yssq_hdxsq.png"}},a=r,e.YuanShenWeaponShowAlert=a}(modules=modules||{}),function(t){var e,i;function n(){this.maxLv=0,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabByLevel={},this._cfgs=GlobalData.getConfig("scene_empty");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];if(i){var n=i[3],s=i[1];this._tab[n]=i,this._tabByLevel[s]=i,this.maxLv=s>this.maxLv?s:this.maxLv}}},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getCfgByOcc=function(t){return this._tab[t]},n.prototype.getCfgByLevel=function(t){return this._tabByLevel[t]},n.prototype.getUpLevle=function(t){var e=0,i=this.getCfgByOcc(t);return i&&(e=i[9]),e},n.prototype.getUpMaxTime=function(t){var e=0,i=this.getCfgByLevel(t);if(i)for(var n=i[8],s=0;s<n.length-1;s++){var o=n[s];e=e<o?o:e}return e},i=n,e.SceneEmptyCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),n=t.common.SimpleList,s=t.common.BtnGroup,i=ui.UnionWarPreliminaryRankAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(e.UnionWarPreliminaryRankItem,570,60),this._list.size(570,581),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list1=n.create(e.UnionWarPreliminaryRankItem1,570,60),this._list1.size(570,581),this.listBox.addChild(this._list1),this._list1.pos(0,0,!0),CommonUtil.setHTMLPro(this.tipsHTML,"#3a5385","SimHei",22,"center"),this._btnGroup=new s,this._btnGroup.setBtns(this.group1,this.group2)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoGlobalEvt("GET_FACTION_WAR_RANK_REPLY",this,this.showUI)},a.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?e.UnionWarCtrl.instance.getFactionWarRank(2):1===this._btnGroup.selectedIndex&&e.UnionWarCtrl.instance.getFactionWarRank(1)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0},a.prototype.showUI=function(){0===this._btnGroup.selectedIndex?(this.nameText.text="玩家名称",this.text1.text="我的排名:0",e.UnionWarModel.instance.myContentDate?(this.text1.text="我的排名:"+e.UnionWarModel.instance.myContentDate[3]+" ",this.text2.text="我的积分:"+e.UnionWarModel.instance.myContentDate[4]):(this.text1.text="我的排名: 未上榜",this.text2.text="我的积分:0"),this._list1.datas=e.UnionWarModel.instance.contentDate,this.isHaveBox2.visible=0===this._list1.datas.length,this.tipsHTML.innerHTML="个人排行只对<span style= 'color:#ff3e3e'>本仙盟成员</span>个人积分进行排行"):1===this._btnGroup.selectedIndex&&(this.nameText.text="仙盟名称",this.text1.text="我的仙盟:"+t.faction.FactionModel.instance.name,this._list.datas=e.UnionWarModel.instance.factionsDate,e.UnionWarModel.instance.myFactionsDate?this.text2.text="仙盟排名:"+e.UnionWarModel.instance.myFactionsDate[5]+" ":this.text2.text="仙盟排名: 未上榜",this.tipsHTML.innerHTML="周六<span style= 'color:#ff3e3e'>中午12点</span>锁定仙盟排行并且<span style= 'color:#ff3e3e'>前32的仙盟</span>分组进入精英赛",this.isHaveBox2.visible=0===this._list.datas.length),this._list1.visible=0===this._btnGroup.selectedIndex,this._list.visible=1===this._btnGroup.selectedIndex},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),i.prototype.destroy.call(this)},o=a,e.UnionWarPreliminaryRankAlert=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),i=ui.UnionWarCenterViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.zOrder=-2,this.bottom=449,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler)},s.prototype.btnHandler=function(){console.log("夺取逻辑未实现")},n=s,e.UnionWarCenterPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.timeNum=0,t}e=t.union_war||(t.union_war={}),i=ui.UnionWarCnterTopViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.zOrder=-2,this.top=148,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_BATTLE_PACE",this,this.showUI),this.onAutoGlobalEvt("FACTION_WAR_BATTLE_INFO",this,this.showUI),this.onAutoGlobalEvt("DUNGEON_BROADCAST_BEGIN_COMBAT",this,this.showTimeUI)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.showTimeUI()},s.prototype.showUI=function(){this.itemLeft.data=e.UnionWarModel.instance.finalsFaction1,this.itemRight.data=e.UnionWarModel.instance.finalsFaction2},s.prototype.showTimeUI=function(){this.timeNum=t.dungeon.DungeonModel.instance.broadcastBeginCombat?GlobalData.serverTime+t.dungeon.DungeonModel.instance.broadcastBeginCombat[0]:0,Laya.timer.clear(this,this.loopHandler),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},s.prototype.loopHandler=function(){this.timeNum>GlobalData.serverTime?this.timeText.text=t.common.CommonUtil.msToMMSS(this.timeNum-GlobalData.serverTime):(this.timeText.text="00:00",Laya.timer.clear(this,this.loopHandler))},s.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},n=s,e.UnionWarCnterTopPanel=n}(modules=modules||{}),function(a){var n,e,t,i,s,o;function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._listState=!0,t}n=a.union_war||(a.union_war={}),t=a.common.CustomList,i=Laya.Event,s=a.common.BtnGroup,e=ui.UnionWarCopyLeftViewUI,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=16,this.bottom=268,this.closeByOthers=!1,this.layer=3,this._list=new t,this._list.width=250,this._list.height=115,this._list.hCount=1,this._list.spaceX=0,this._list.itemRender=n.UnionWarCopyPlayerItem,this._list.x=313,this._list.y=87,this._list.selectedIndex=-1,this._list.canSelectSameItem=!0,this.addChild(this._list),this._btnGroup=new s,this._btnGroup.setBtns(this.btn1,this.btn2,this.btn3,this.btn4,this.btn5)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._list,i.SELECT,this,this.selectHandler),this.onAutoClick(this.expandBtn,this,this.expandBtnHandler),this.onAutoEvt(this._btnGroup,i.CHANGE,this,this.changeHandler),this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updateMyRecord),this.onAutoGlobalEvt("SCENE_REMOVE_HUMANS",this,this.updateMyRecord),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_BATTLE_PACE",this,this.showUI),this.onAutoGlobalEvt("FACTION_WAR_BATTLE_INFO",this,this.showUI)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateMyRecord(),this.showUI(),this._list.selectedIndex=-1,this._btnGroup.selectedIndex=-1},r.prototype.showUI=function(){this.btn1.data=[n.UnionWarModel.instance.finalsTable[1],n.UnionWarModel.instance.tableCollection[1][6]],this.btn2.data=[n.UnionWarModel.instance.finalsTable[2],n.UnionWarModel.instance.tableCollection[2][6]],this.btn3.data=[n.UnionWarModel.instance.finalsTable[3],n.UnionWarModel.instance.tableCollection[3][6]],this.btn4.data=[n.UnionWarModel.instance.finalsTable[4],n.UnionWarModel.instance.tableCollection[4][6]],this.btn5.data=[n.UnionWarModel.instance.finalsTable[5],n.UnionWarModel.instance.tableCollection[5][6]]},r.prototype.changeHandler=function(){if(this.btn1.isChange.visible=!1,this.btn2.isChange.visible=!1,this.btn3.isChange.visible=!1,this.btn4.isChange.visible=!1,this.btn5.isChange.visible=!1,-1!==this._btnGroup.selectedIndex){var t=n.UnionWarModel.instance.finalsTable[this._btnGroup.selectedIndex+1];if(0===t){var e=(i=n.UnionWarModel.instance.tableCollection[this._btnGroup.selectedIndex+1])[2];PlayerModel.instance.selectTarget(3,e)}else if(n.UnionWarModel.instance.isMyWarTrue(t))i=n.UnionWarModel.instance.tableCollection[this._btnGroup.selectedIndex+1],e=n.UnionWarModel.instance.getOocc(i),PlayerModel.instance.selectTarget(3,e);else{var i=n.UnionWarModel.instance.tableCollection[this._btnGroup.selectedIndex+1];(e=n.UnionWarModel.instance.getOocc(i))&&PlayerModel.instance.selectTarget(3,e)}}},r.prototype.selectHandler=function(){if(-1!=this._list.selectedIndex){var t=this._list.selectedData;PlayerModel.instance.selectTarget(2,t[5][0])}},r.prototype.expandBtnHandler=function(){this._listState?this._listState=!1:this._listState=!0,this.changUI()},r.prototype.changUI=function(){this.bgImg.height=this._listState?159:68,this.bgImg.y=this._listState?49:140,this._list.height=this._listState?115:30,this._list.y=this._listState?87:172,this.titleText.y=this._listState?59:149,this.expandBtn.y=this._listState?59:149,this.expandImg.skin=this._listState?"common/btn_tonyong_28.png":"common/btn_tonyong_29.png",this.updateMyRecord()},r.prototype.updateMyRecord=function(){for(var t=a.scene.SceneModel.instance.humans,e=[],i=0,n=t.length;i<n;i++){var s=t[i],o=s[5][0];a.faction.FactionModel.instance.isTongXianMeng(o)||e.push(s)}this._list.selectedIndex=-1,this._scrollPosOld1=this._list.scrollPos,this._list.datas=e,this._list.scrollPos=this._scrollPosOld1},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this,t)},o=r,n.UnionWarCopyLeftPanel=o}(modules=modules||{}),function(t){var r,e,l,i,h,c,n;function s(){return e.call(this)||this}r=t.union_war||(t.union_war={}),l=t.dungeon.DungeonModel,i=t.dungeon.DungeonCtrl,h=t.common.CustomClip,c=t.common.CommonUtil,e=ui.UnionWarCopyLeftRewardViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=16,this.bottom=446,this.closeByOthers=!1,this.layer=3,this._prizeEffect=h.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._prizeEffect,1),this._prizeEffect.durationFrame=5,this._prizeEffect.scale(1.4,1.4,!0),this._prizeEffect.pos(-80,-71,!0),this._prizeEffect.visible=!1},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this._commonAwardItem,this,this.joinAwardClickHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoGlobalEvt("DUNGEON_UPDATE_JOIN_AWARD",this,this.updateJoinAward),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_PRESTIGE",this,this.updateJoinAward)},s.prototype.helpBtnHandler=function(){c.alertHelp(19024)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateJoinAward()},s.prototype.joinAwardClickHandler=function(){this._commonAwardItem.needTip||i.instance.getJoinAward()},s.prototype.updateJoinAward=function(){h.thisStop(this._prizeEffect);var t,e=l.instance.joinAward||[],i=0,n=0;this.joinLvName.text="";for(var s=0,o=e.length;s<o;s++){if(0===(n=e[s][1])){i=e[s][0],this._commonAwardItem.needTip=!0,this.joinLvName.text="";break}if(1===n){i=e[s][0],this._commonAwardItem.needTip=!1,h.thisPlay(this._prizeEffect),this.joinLvName.text="奖励可领取",this.joinLvName.color="#168a17";break}2===n&&(i=e[s][0]+1)}if(i>r.UnionWarModel.instance.rewardArrJoinArray.length-1)this._commonAwardItem.needTip=!0,t=r.UnionWarModel.instance.rewardArrJoinArray[r.UnionWarModel.instance.rewardArrJoinArray.length-1][1],this._commonAwardItem.dataSource=t,this.joinLvName.text="已领完全部奖励",this.joinLvName.color="#4C5E8A",this.damageDescTxt.text=""+r.UnionWarModel.instance.prestige;else{var a=r.UnionWarModel.instance.rewardArrJoinArray[i];a?(t=a[1],this._commonAwardItem.dataSource=t,this.damageDescTxt.text=r.UnionWarModel.instance.prestige+"/"+c.bigNumToString(a[0])):this.damageDescTxt.text=""}},s.prototype.destroy=function(t){void 0===t&&(t=!0),this.destroyElement(this._prizeEffect),e.prototype.destroy.call(this,t)},n=s,r.UnionWarCopyLeftRewardPanel=n}(modules=modules||{}),function(i){var r,e,t,n,s,o,a;function l(){var t=null!==e&&e.apply(this,arguments)||this;return t._ceshi=[[1,2,3,4],[1,2,3,4],[1,2,3,4]],t._titleStrArr=["天字精英组","地字精英组","玄字精英组","黄字精英组"],t._oldindx=0,t}r=i.union_war||(i.union_war={}),t=laya.events.Event,n=i.common.SimpleList,s=i.common.BtnGroup,o=i.common.ListWithArrowCtrl,e=ui.UnionWarDuelAlertUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(r.UnionWarDuelItem,578,210,1,1,0,5),this._list.size(578,529),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._listGroup=n.create(r.UnionWarDuelGroupItem,142,128,2,1,6,0),this._listGroup.size(586,128),this.listBox1.addChild(this._listGroup),this._listGroup.pos(0,0,!0),this._btnGroup=new s,this._btnGroup.setBtns(this.group1,this.group2,this.group3),this._listCtrl=new o(this._listGroup,this.preBtn,this.nextBtn),this._listCtrl.scrollDis=this._listGroup.width+this._listGroup.spaceX,CommonUtil.setHTMLPro(this.timeTxtHTML,"#3a5385","SimHei",24,"center")},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,t.CHANGE,this,this.changeHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoEvt(this._listGroup,t.SELECT,this,this.selectHandler),this._listCtrl.addListeners(),this.onAutoGlobalEvt("GET_FACTION_GUCCESS_INFO_REPLY",this,this.setDate),this.onAutoGlobalEvt("GET_FACTION_WAR_SCHEDULE_REPLY",this,this.updateUI),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("GET_FACTION_GUCCESS_INFO_REPLY",this,this.setTimeUI),this.onAutoGlobalEvt("GET_FACTION_WAR_RANK_REPLY",this,this.setTimeUI),this.onAutoGlobalEvt("GET_FACTION_WAR_SCHEDULE_REPLY",this,this.setTimeUI),this.onAutoGlobalEvt("GET_FACTION_WAR_MATCH_INFO_REPLY",this,this.setTimeUI)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._listCtrl.removeListeners()},l.prototype.setTimeUI=function(){var t=i.union_war.UnionWarModel.instance.getWarCopyState();Laya.timer.clear(this,this.loppHearl);var e=r.UnionWarModel.instance.getRound();this.timeTxtHTML.innerHTML="精英赛已结束",8===t&&r.UnionWarModel.instance.nextTime>GlobalData.serverTime&&1<=e&&e<=3&&(Laya.timer.loop(1e3,this,this.loppHearl),this.loppHearl())},l.prototype.loppHearl=function(){if(r.UnionWarModel.instance.nextTime>GlobalData.serverTime){var t=r.UnionWarModel.instance.getState(!1),e=r.UnionWarModel.instance.getRound(!1),i=CommonUtil.timeStampToMMSS(r.UnionWarModel.instance.nextTime);1!==e||t?1===e&&t?this.timeTxtHTML.innerHTML=i+"后精英组四强赛结束":2!==e||t?2===e&&t?this.timeTxtHTML.innerHTML=i+"后精英组半决赛结束":3!==e||t?3===e&&t&&(this.timeTxtHTML.innerHTML=i+"后精英组决赛结束"):this.timeTxtHTML.innerHTML=i+"后开启精英组决赛":this.timeTxtHTML.innerHTML=i+"后开启精英组半决赛":this.timeTxtHTML.innerHTML=i+"后开启精英组四强赛"}else this.timeTxtHTML.innerHTML="精英赛已结束"},l.prototype.updateUI=function(){-1!=this._btnGroup.selectedIndex&&-1!=this._listGroup.selectedIndex&&r.UnionWarCtrl.instance.getFactionGuccessInfo(this._btnGroup.selectedIndex+1,this._listGroup.selectedIndex+1)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this);var t=r.UnionWarModel.instance.getRound();this._btnGroup.selectedIndex=1<=t&&t<=3?t-1:0,this.setTimeUI()},l.prototype.changeHandler=function(){if(-1!=this._btnGroup.selectedIndex){var t=r.UnionWarModel.instance.getRound();if(this._btnGroup.selectedIndex+1>t&&this._btnGroup.selectedIndex!=this._oldindx)return CommonUtil.noticeError(0,"还未到此轮比赛 请耐心等待"),void(this._btnGroup.selectedIndex=this._oldindx);this._oldindx=this._btnGroup.selectedIndex,this._listGroup.datas=this._ceshi[this._btnGroup.selectedIndex],this._listGroup.selectedIndex=0,this.showUI()}},l.prototype.selectHandler=function(){-1!=this._listGroup.selectedIndex&&(r.UnionWarCtrl.instance.getFactionGuccessInfo(this._btnGroup.selectedIndex+1,this._listGroup.selectedIndex+1),r.UnionWarCtrl.instance.getFactionWarFinalInfo(this._listGroup.selectedIndex+1))},l.prototype.setDate=function(){if(-1!=this._btnGroup.selectedIndex&&-1!=this._listGroup.selectedIndex){this.titleText.text=this._titleStrArr[this._listGroup.selectedIndex];var t=r.UnionWarModel.instance.guessesTable[this._btnGroup.selectedIndex+1];this._list.datas=t?t[this._listGroup.selectedIndex+1]:[];var e=r.UnionWarModel.instance.totalGoldTable[this._btnGroup.selectedIndex+1],i=r.UnionWarModel.instance.totalGoldTableCfg[this._btnGroup.selectedIndex+1][0],n=i-(e&&e[0]?e[0]:0),s=i,o=e&&e[1]?e[1]:0,a=0<n?"#1f304d":"#ff3e3e";this.text2.text=n+"/"+s,this.text2.color=a,this.text4.text=""+o,this.setTextPos()}},l.prototype.setTextPos=function(){CommonUtil.adaptationImgAndText([[this.text1,1,0],[this.text2,1,0],[this.helpBtn,2,0]],this.width,0,"center"),CommonUtil.adaptationImgAndText([[this.text3,1,0],[this.img1,2,0],[this.text4,1,0]],this.width,0,"center")},l.prototype.showUI=function(){this._maxDistance=this._listGroup.datas.length*this._listGroup.itemWidth+(this._listGroup.datas.length-1)*this._listGroup.spaceX-this._listGroup.width,this.setBtnVisible(),Laya.timer.clear(this,this.setBtnVisible),Laya.timer.frameLoop(1,this,this.setBtnVisible)},l.prototype.setBtnVisible=function(){this.preBtn.visible=!1,this.nextBtn.visible=!1,this.preBtn.visible=0<this._listGroup.scrollPos&&3<this._listGroup.datas.length,this.nextBtn.visible=this._listGroup.scrollPos<this._maxDistance&&3<this._listGroup.datas.length},l.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.setBtnVisible),Laya.timer.clear(this,this.loppHearl)},l.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19021)},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._listGroup=this.destroyElement(this._listGroup),this._listCtrl=this.destroyElement(this._listCtrl),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this)},a=l,r.UnionWarDuelAlert=a}(modules=modules||{}),function(t){var e,o,i;function n(){return null!==o&&o.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),o=ui.UnionWarEnrollAlertUI,__extends(n,o),n.prototype.initialize=function(){o.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.tipHTML,"#3a5385","SimHei",24,"center"),CommonUtil.setHTMLPro(this.tipHTML1,"#3a5385","SimHei",24,"center"),this.tipHTML1.style.leading=this.tipHTML.style.leading=6},n.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoClick(this.sateBtn,this,this.sateBtnHandler)},n.prototype.onOpened=function(){o.prototype.onOpened.call(this),this.sateBtn.selected=!1},n.prototype.setOpenParam=function(t){if(o.prototype.setOpenParam.call(this,t),t){this._date=t[1],this._dateItem=t[0];var e=this._dateItem[1],i=this._date[1],n=CommonUtil.getColorById(e),s=CommonUtil.getNameByItemId(e);this.tipHTML.innerHTML="是否将<span style='color:"+n+"'>"+s+"</span>分配给",this.tipHTML1.innerHTML=i+"?"}},n.prototype.cancelBtnHandler=function(){this.close()},n.prototype.okBtnHandler=function(){this.close(),e.UnionWarCtrl.instance.reqFactionWarDispense(this._dateItem[0],this._date[0])},n.prototype.sateBtnHandler=function(){e.UnionWarModel.instance.isTipsBag=!e.UnionWarModel.instance.isTipsBag,this.sateBtn.selected=!e.UnionWarModel.instance.isTipsBag},i=n,e.UnionWarEnrollAlert=i}(modules=modules||{}),function(l){var h,e,t,a,i,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}h=l.union_war||(l.union_war={}),t=Laya.Event,a=l.common.CustomClip,i=l.common.SimpleList,n=l.common.CustomList,e=ui.UnionWarViewUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,CommonUtil.setHTMLPro(this.timeTxtHTML,"#1f304d","SimHei",24,"center"),this._list=i.create(h.UnionWarOptionItem,150,115,1,2,55,0),this._list.width=355,this._list.height=115,this.publicBox.addChild(this._list),this._list.pos(0,0,!0),this._list.visible=!0,this.listDate=[0,1];var t=l.config.BlendCfg.instance.getCfgById(19020);this.text11.text=t[3],this._listHtml=new n,this.groupPhaseBox.addChild(this._listHtml),this._listHtml.hCount=1,this._listHtml.vCount=1,this._listHtml.pos(39,553),this._listHtml.size(642,138),this._listHtml.itemRender=h.UnionWarHtmlItem,this._listHtml.datas=[t[2][0]],this._listHtml.relayout(),this._listGroup=i.create(h.UnionWarDuelGroupItem,142,128,1,4,18,0),this.listGroupBox.addChild(this._listGroup),this._listGroup.size(622,128),this._listGroup.pos(0,0,!0),this._listGroup.visible=!0,this.itemArr=[this.playerItem1,this.playerItem2,this.playerItem5,this.playerItem6,this.playerItem3,this.playerItem4,this.playerItem7,this.playerItem8],this.imgArr=[this.img1,this.img2,this.img5,this.img6,this.img3,this.img4,this.img7,this.img8,this.img9,this.img11,this.img10,this.img12,this.img13,this.img14],this.imgArrVs=[this.vsImg1,this.vsImg3,this.vsImg2,this.vsImg4,this.vsImg6,this.vsImg5],this.creatEffect()},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.teamBtn,this,this.teamBtnHearl),this.onAutoClick(this.createRoomBtn,this,this.createRoomBtnHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoClick(this.guessBox,this,this.guessBoxHandler),this.onAutoClick(this.enrollBtn,this,this.enrollBtnHandler),this.onAutoEvt(this._listGroup,t.SELECT,this,this.changeHandler),this.onAutoEvt(this._list,t.SELECT,this,this.selectHandler),this.onAutoClick(this.moBaiBtn,this,this.moBaiBtnHandler),this.onAutoGlobalEvt("GET_FACTION_WAR_SCHEDULE_REPLY",this,this.showKnockoutBoxUI1),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.funOpenSetSprintType),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this,this.setUI),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_CHANGE_UPDATE",this,this.getAll),this.onAutoGlobalEvt("GET_FACTION_GUCCESS_INFO_REPLY",this,this.showUI),this.onAutoGlobalEvt("GET_FACTION_WAR_RANK_REPLY",this,this.showUI),this.onAutoGlobalEvt("GET_FACTION_WAR_SCHEDULE_REPLY",this,this.showUI),this.onAutoGlobalEvt("GET_FACTION_WAR_MATCH_INFO_REPLY",this,this.showUI),this.regAutoRP(this.rpImg1,["unionWarRP3"])},o.prototype.funOpenSetSprintType=function(t){for(var e=0;e<t.length;e++)704==t[e]&&this.setUI()},o.prototype.setUI=function(){this.showPublicBoxUI(),this._list.datas=this.listDate},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._listGroup.datas=[1,2,3,4],this._listGroup.selectedIndex=-1,this._list.datas=this.listDate;var t=l.union_war.UnionWarModel.instance.getWarCopyState();this._list.selectedIndex=7<=t?1:0,this.getAll()},o.prototype.getAll=function(){h.UnionWarCtrl.instance.factionWarKingShow(),h.UnionWarCtrl.instance.factionWarWorshipTimes(),h.UnionWarCtrl.instance.getFactionWarFinalInfoAll()},o.prototype.changeHandler=function(){-1!=this._listGroup.selectedIndex&&h.UnionWarCtrl.instance.getFactionWarFinalInfo(this._listGroup.selectedIndex+1)},o.prototype.selectHandler=function(){-1!=this._list.selectedIndex&&(0===this._list.selectedIndex?(h.UnionWarCtrl.instance.getFactionWarRank(1),h.UnionWarCtrl.instance.getFactionWarRank(2)):1===this._list.selectedIndex&&(this._listGroup.selectedIndex=0),this.showUI())},o.prototype.createRoomBtnHandler=function(){function t(){if(0===e._list.selectedIndex){if(l.common_group.CommonGroupUtil.OldCopyTeamIsOtherTeam(10))return;h.UnionWarCtrl.instance.enterFactionWarMatch(1)}else if(1===e._list.selectedIndex){var t=l.union_war.UnionWarModel.instance.getWarCopyState();h.UnionWarModel.instance.isJueSai()||8!==t?h.UnionWarModel.instance.isMyGroupOver()?CommonUtil.noticeError(0,"本次仙盟争霸已结束，请耐心等待发放奖励"):h.UnionWarCtrl.instance.enterFactionWarMatch(2):CommonUtil.noticeError(0,"本次无缘精英赛，请下次努力")}}var e=this;if(1!==this._list.selectedIndex||!l.common_group.CommonGroupUtil.notTeamCopyIsTeaming()){var i=l.union_war.UnionWarModel.instance.getWarCopyState();3===i||8===i?t():h.UnionWarModel.instance.isHaveMoBai()?WindowManager.instance.open(1300):t()}},o.prototype.guessBoxHandler=function(){var t=l.union_war.UnionWarModel.instance.getWarCopyState(),e=h.UnionWarModel.instance.getEightStrongDate(1);2===t&&5<=CommonUtil.getHoursNum1()||2<t&&t<8||0===e.length?CommonUtil.noticeError(0,"精英赛开启后才能进行竞猜"):WindowManager.instance.open(1057)},o.prototype.enrollBtnHandler=function(){WindowManager.instance.open(1056)},o.prototype.moBaiBtnHandler=function(){},o.prototype.helpBtnHandler=function(){0===this._list.selectedIndex?CommonUtil.alertHelp(19021):1===this._list.selectedIndex&&CommonUtil.alertHelp(19022)},o.prototype.showUI=function(){Laya.timer.clearAll(this),a.thisStop(this._btnClip),this.timeTxtHTML.visible=this.btnBox.visible=this.isEnrollImg.visible=this.helpBtn.visible=this.guessBox.visible=this.groupPhaseBox.visible=this.knockoutBox.visible=!1,this.showPublicBoxUI(),this.showGroupPhaseBoxUI(),this.showGroupPhaseBoxUI(),this.showKnockoutBoxUI()},o.prototype.showPublicBoxUI=function(){var t=l.union_war.UnionWarModel.instance.getWarCopyState(),e=240;1===t?e=0:1<t&&t<7&&(e=120),this.rpImg.visible=!1,this.joinProImg.width=e,this.isEnrollImg.visible=!1,a.thisStop(this._btnClip),this.isEnrollImg.skin=0===this._list.selectedIndex?"union_war/txt_xmz_30.png":"union_war/txt_xmz_31.png";var i="";if(this.createRoomBtn.label="进入",0===this._list.selectedIndex){if(1===t){var n=l.union_war.UnionWarModel.instance.getWarCopyTimeStr(13);i="周"+l.union_war.UnionWarModel.instance.getStr(n[0])+n[1]+"-"+n[2]+"开启积分赛",this.timeTxtHTML.visible=this.btnBox.visible=!0,this.isEnrollImg.visible=!1}else 2===t||3===t?(i="今日"+(n=l.union_war.UnionWarModel.instance.getWarCopyTimeStr(13))[1]+"-"+n[2]+"开启",this.timeTxtHTML.visible=this.btnBox.visible=!0,this.isEnrollImg.visible=!1,3===t&&a.thisPlay(this._btnClip)):4===t?(i="本次积分赛已结束",this.timeTxtHTML.visible=this.btnBox.visible=!0,this.isEnrollImg.visible=!1):(this.timeTxtHTML.visible=this.btnBox.visible=!1,this.isEnrollImg.visible=!0);this.teamBtn.visible=!0,this.createRoomBtn.x=196,this.rpImg.x=359}else t<7?(n=l.union_war.UnionWarModel.instance.getWarCopyTimeStr(14),i="周"+l.union_war.UnionWarModel.instance.getStr(n[0])+n[1]+"-"+n[2]+"开启精英赛",this.timeTxtHTML.visible=this.btnBox.visible=!0,this.isEnrollImg.visible=!1):7===t||8===t?(i="今日"+(n=l.union_war.UnionWarModel.instance.getWarCopyTimeStr(14))[1]+"-"+n[2]+"开启",this.timeTxtHTML.visible=this.btnBox.visible=!0,this.isEnrollImg.visible=!1,8===t&&h.UnionWarModel.instance.isJueSai()&&a.thisPlay(this._btnClip)):(this.timeTxtHTML.visible=!1,this.btnBox.visible=!0,a.thisStop(this._btnClip)),this.teamBtn.visible=!1,this.createRoomBtn.x=98,this.rpImg.x=261;this._btnClip.pos(this.createRoomBtn.x-6,this.createRoomBtn.y-8,!0),h.UnionWarModel.instance.isHaveMoBai()&&8!=t&&3!=t&&(this.createRoomBtn.label="膜拜",this.rpImg.visible=h.UnionWarModel.instance.isMoBai()),this.timeTxtHTML.innerHTML=i,Laya.timer.clear(this,this.loppHearl);var s=h.UnionWarModel.instance.getRound();if(8===t){if(3===s&&t&&h.UnionWarModel.instance.isMyGroupOver()||4===s){var o=DungeonModel.instance.getCopySceneStateByType(43);o&&(h.UnionWarModel.instance.nextTime=o[3])}h.UnionWarModel.instance.nextTime>GlobalData.serverTime&&1<=s&&s<=4&&(Laya.timer.loop(1e3,this,this.loppHearl),this.loppHearl())}},o.prototype.loppHearl=function(){if(h.UnionWarModel.instance.nextTime>GlobalData.serverTime){var t=h.UnionWarModel.instance.getState(!1),e=h.UnionWarModel.instance.getRound(!1),i=CommonUtil.timeStampToMMSS(h.UnionWarModel.instance.nextTime);1!==e||t?1===e&&t?this.timeTxtHTML.innerHTML=i+"后精英组四强赛结束":2!==e||t?2===e&&t?this.timeTxtHTML.innerHTML=i+"后精英组半决赛结束":3!==e||t?3===e&&t?h.UnionWarModel.instance.isMyGroupOver()?this.timeTxtHTML.innerHTML=i+"后发放奖励":this.timeTxtHTML.innerHTML=i+"后精英组决赛结束":4!==e||t||(this.timeTxtHTML.innerHTML=i+"后发放奖励"):this.timeTxtHTML.innerHTML=i+"后开启精英组决赛":this.timeTxtHTML.innerHTML=i+"后开启精英组半决赛":this.timeTxtHTML.innerHTML=i+"后开启精英组四强赛"}else this.showPublicBoxUI()},o.prototype.showGroupPhaseBoxUI=function(){if(0===this._list.selectedIndex){this.groupPhaseBox.visible=!0;var t=l.faction.FactionModel.instance.flagIndex,e=""+l.faction.FactionModel.instance.name,i=0,n=0,s=0,o=0;this.iconImg.skin=CommonUtil.getFactionIcon(t),this.nameText.text=e,h.UnionWarModel.instance.myFactionsDate&&(i=h.UnionWarModel.instance.myFactionsDate[6],s=h.UnionWarModel.instance.myFactionsDate[5]),h.UnionWarModel.instance.myContentDate&&(n=h.UnionWarModel.instance.myContentDate[4],o=h.UnionWarModel.instance.myContentDate[3]);var a=1<l.union_war.UnionWarModel.instance.getWarCopyState();this.groupPhaseText1.text=a?"仙盟积分:"+i:"仙盟积分:未开启",this.groupPhaseText2.text=a?s?"仙盟排行:"+s:"仙盟排行:未上榜":"仙盟排行:未开启",this.groupPhaseText3.text=a?"我的积分:"+n:"我的积分:未开启",this.groupPhaseText4.text=a?o?"个人排行:"+o:"个人排行:未上榜":"个人排行:未开启"}},o.prototype.showKnockoutBoxUI=function(){1===this._list.selectedIndex&&(this.knockoutBox.visible=!0,this.guessBox.visible=this.helpBtn.visible=!0)},o.prototype.showKnockoutBoxUI1=function(){if(-1!==this._listGroup.selectedIndex){var t=this._listGroup.selectedIndex+1;this.knockoutTopImg.skin="union_war/txt_xmztop_0"+t+".png";var e=h.UnionWarModel.instance.getChampionDate(t);this.playerItem9.setUI(!0),this.playerItem9.data=e;for(var i=h.UnionWarModel.instance.getEightStrongDate(t),n=0;n<this.itemArr.length;n++)(o=this.itemArr[n]).data=i[n];var s=h.UnionWarModel.instance.getAllWin(t);for(n=0;n<this.imgArr.length;n++){var o;(o=this.imgArr[n]).visible=1===s[n]||3===s[n],o.gray=3===s[n]}var a=h.UnionWarModel.instance.battlesTableVS[t];for(a=a||[],n=0;n<this.imgArrVs.length;n++)this.imgArrVs[n].visible=!1;for(n=0;n<this.imgArrVs.length;n++)this.imgArrVs[n].visible=!!a[n]&&a[n];var r=l.union_war.UnionWarModel.instance.getWarCopyState();0===i.length&&8===r?(this.box666.visible=!1,this.box777.visible=!0):(this.box666.visible=!0,this.box777.visible=!1)}},o.prototype.teamBtnHearl=function(){l.common_group.CommonGroupUtil.teamBtnHearl(10)},o.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loppHearl)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._listGroup=this.destroyElement(this._listGroup),this._list=this.destroyElement(this._list),this._listHtml=this.destroyElement(this._listHtml),e.prototype.destroy.call(this,t)},o.prototype.creatEffect=function(){this._btnClip=a.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.btnBox.addChild(this._btnClip),this._btnClip.pos(this.createRoomBtn.x-6,this.createRoomBtn.y-8,!0)},s=o,h.UnionWarPanel=s}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),n=laya.events.Event,s=t.common.SimpleList,o=t.common.BtnGroup,i=ui.UnionWarRewardAlertUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create(e.UnionWarRewardSingleItem,571,427),this._list.size(571,723),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list1=s.create(e.UnionWarRewardRankItem,571,542),this._list1.size(571,723),this.listBox.addChild(this._list1),this._list1.pos(0,0,!0),this._btnGroup=new o,this._btnGroup.setBtns(this.group_1,this.group_2)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,n.CHANGE,this,this.changeHandler)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0},r.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?this.showUI():1===this._btnGroup.selectedIndex&&this.showUI()},r.prototype.showUI=function(){this._list.visible=0===this._btnGroup.selectedIndex,this._list1.visible=1===this._btnGroup.selectedIndex,0===this._btnGroup.selectedIndex?this._list.datas=[]:1===this._btnGroup.selectedIndex&&(this._list1.datas=t.config.FactionWarRankCfg.instance.getArrCfg())},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),i.prototype.destroy.call(this)},a=r,e.UnionWarRewardAlert=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab3={};var t=GlobalData.getConfig("faction_item");if(t)for(var e=0;e<t.length;e++){var i=t[e];this._tab3[i[0]]=i[1]}},n.prototype.getEmptyBlendCfgById=function(t){return this._tab3[t]},i=n,e.FactionItemCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),n=t.config.FactionItemCfg,s=t.common.CommonUtil,i=ui.UnionWarRewardDistributionAlertUI,__extends(a,i),a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},a.prototype.cancelBtnHandler=function(){this.close()},a.prototype.sureBtnHandler=function(){this._dates&&e.UnionWarCtrl.instance.reqFactionWarNeed(this._dates[0]),this.close()},a.prototype.setOpenParam=function(t){if(i.prototype.setOpenParam.call(this,t),this._dates=t,this._dates){var e=n.instance.getEmptyBlendCfgById(this._dates[1]);this.img.skin=s.getIconById(95330001,!0),this.text2.text=""+e,s.adaptationImgAndText([[this.text1,1,0],[this.img,2,0],[this.text2,1,0],[this.text3,1,0]],this.width,0,"center")}},o=a,e.UnionWarRewardDistributionAlert=o}(modules=modules||{}),function(l){var h,e,t,i,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}h=l.union_war||(l.union_war={}),t=Laya.Event,i=l.common.BtnGroup,n=l.common.SimpleList,s=l.common.CustomList,e=ui.UnionWarRewardDistributionViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=n.create(h.UnionWarRewardDistributionItem,210,294,1,3,2,10),this._list.size(634,862),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._listPlayer=n.create(h.UnionWarRewardDistributionPlayerItem,305,120,1,2,20,5),this._listPlayer.size(630,376),this.listBox1.addChild(this._listPlayer),this._listPlayer.pos(0,0,!0),this._listItem=s.create("v",0,0,610,331,h.UnionWarRewardDistributionBaseItem,2,5),this._listItem.size(610,331),this._listItem.spaceX=20,this.listBox2.addChild(this._listItem),this._listItem.shiftingX=15,this._listItem.pos(-15,0,!0),this._btnGroup=new i,this._btnGroup.setBtns(this.group1,this.group2),CommonUtil.setHTMLPro(this.timeHtml,"#3a5385","SimHei",24,"center")},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoEvt(this._btnGroup,t.CHANGE,this,this.changeHandler),this.onAutoEvt(this._listItem,t.SELECT,this,this.selectHandler2),this.onAutoEvt(this._listPlayer,t.SELECT,this,this.selectHandler1),this.onAutoGlobalEvt("PLAYER_UPDATE_FACTION_PRESTIGE",this,this.updateUI),this.onAutoGlobalEvt("GET_FACTION_BAG_REPLY",this,this.updateUI),this.onAutoGlobalEvt("GET_FACTION_WAR_NEEDS",this,this.showAllNeedPlayer),this.regAutoRP(this.rpImg,["unionWarRP2"])},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=l.redPoint.RedPointCtrl.instance.getRPProperty("unionWarRP2")?1:0},a.prototype.selectHandler2=function(){if(-1!=this._listItem.selectedIndex){this._timeNum=0,this.timeHtml.visible=!1,Laya.timer.clear(this,this.loogTimeHeral),this._listPlayer.datas=[],this.timeHtml.visible=!1;var t=h.UnionWarModel.instance.getListDate(2),e=t&&0<t.length;this.isHaveText1.text=e?"此奖励无人需求":"当前无奖励可分配";var i=this._listItem.datas[this._listItem.selectedIndex];if(e)if(i)switch(h.UnionWarModel.instance.getStateReward(i,2)){case 0:this.isHaveText1.text="此奖励无人需求",this.isHaveBox1.visible=!0;break;case 1:h.UnionWarCtrl.instance.getFactionWarNeeds(i[0]),this.isHaveBox1.visible=!1;break;case 2:this.isHaveText1.text="此奖励已分配",this.isHaveBox1.visible=!0}else this.isHaveBox1.visible=!0;else this.isHaveBox1.visible=!0}},a.prototype.selectHandler1=function(){this._listPlayer.selectedIndex},a.prototype.changeHandler=function(){this.boxUI1.visible=0===this._btnGroup.selectedIndex,this.boxUI2.visible=1===this._btnGroup.selectedIndex,h.UnionWarCtrl.instance.getFactionWarDispense(1),h.UnionWarCtrl.instance.getFactionWarDispense(2),0===this._btnGroup.selectedIndex?this.showUI():1===this._btnGroup.selectedIndex&&this.showUI1()},a.prototype.updateUI=function(){this.showUI(),this.showUI1()},a.prototype.showAllNeedPlayer=function(t){if(t&&1===this._btnGroup.selectedIndex){var e=this._listItem.datas[this._listItem.selectedIndex];if(e&&t[0]===e[0]){for(var i=[],n=t[1],s=0;s<n.length;s++){var o=n[s];i.push([e,o])}return this._listPlayer.datas=i,this._timeNum=t[2],this.timeHtml.visible=!1,Laya.timer.clear(this,this.loogTimeHeral),void(this._timeNum>GlobalData.serverTime&&(Laya.timer.loop(1e3,this,this.loogTimeHeral),this.loogTimeHeral()))}}},a.prototype.loogTimeHeral=function(){this._timeNum>GlobalData.serverTime?(this.timeHtml.innerHTML="<span style='color:#ff3e3e'>"+CommonUtil.timeStampToHHMMSS(this._timeNum)+"</span>后系统将根据提交了需求的盟友随机分配此奖励",this.timeHtml.visible=!0):(this.timeHtml.visible=!1,Laya.timer.clear(this,this.loogTimeHeral))},a.prototype.showUI1=function(){if(1===this._btnGroup.selectedIndex){var t=h.UnionWarModel.instance.getListDate(2);t.sort(h.UnionWarModel.instance.sortFuncBag1.bind(h.UnionWarModel.instance)),this._listItem.datas=t,this._listItem.selectedIndex=0,this.isHaveBox2.visible=!(t&&0<t.length)}},a.prototype.showUI=function(){if(0===this._btnGroup.selectedIndex){var t=PlayerModel.instance.getCurrencyById(95330001);null==t&&(t=l.bag.BagModel.instance.getItemCountById(95330001)),this.currencyTxt.text=""+t;var e=CommonUtil.getIconById(95330001);this.currencyImg.skin=e,this.currencyNameTxt.text=CommonUtil.getNameByItemId(95330001)+":",CommonUtil.adaptationImgAndText([[this.currencyImg,2,0],[this.currencyNameTxt,1,0],[this.currencyTxt,1,0]],this.boxUI1.width,65,"right");var i=h.UnionWarModel.instance.getListDate(1);i.sort(h.UnionWarModel.instance.sortFuncBag.bind(h.UnionWarModel.instance));for(var n=[],s=0;s<h.UnionWarModel.instance.duiHuanAll.length;s++){var o=h.UnionWarModel.instance.duiHuanAll[s];n.push([2,o])}for(s=0;s<i.length;s++)o=i[s],n.push([1,o]);this._list.datas=n,this.isHaveBox.visible=!(i&&0<i.length);var a=l.config.FactionWarBlendCfg.instance.getBlendCfgById(29)[1][0];this._bagAletTxt.text="容量:"+i.length+"/"+a;var r=h.UnionWarModel.instance.maxXuQiu-h.UnionWarModel.instance.xuQiuNum;0==r?(this.numText.text=r+"/"+h.UnionWarModel.instance.maxXuQiu,this.numText.color="#ff3e3e"):(this.numText.text=r+"/"+h.UnionWarModel.instance.maxXuQiu,this.numText.color="#495670")}},a.prototype.btnHandler=function(){WindowManager.instance.open(1055)},a.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19023)},a.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loogTimeHeral)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._listPlayer=this.destroyElement(this._listPlayer),this._listItem=this.destroyElement(this._listItem),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this,t)},o=a,h.UnionWarRewardDistributionPanel=o}(modules=modules||{}),function(t){var e,i;function n(){this.maxTypeNum=0,this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabByType={},this._arr=GlobalData.getConfig("warfire_achieve");for(var t=0;t<this._arr.length;t++){var e=this._arr[t],i=(this._tab[e[0]]=e)[1];this.maxTypeNum=i>this.maxTypeNum?i:this.maxTypeNum,this._tabByType[i]||(this._tabByType[i]=new Array),this._tabByType[i].push(e)}},n.prototype.getArr=function(){return this._arr},n.prototype.getDateByid=function(t){return this._tab[t]},n.prototype.getDateByType=function(t){return this._tabByType[t]},i=n,e.WarfireAchieveCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._arr=GlobalData.getConfig("warfire_person_reward")},n.prototype.getArr=function(){return this._arr},i=n,e.WarfirePersonRewardCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),n=t.common.SimpleList,i=ui.UnionWarRewardDistributionRecordAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(e.UnionWarRewardDistributionRecordItem,571,74,1,1,0,5),this._list.size(571,435),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("REQ_FACTION_WAR_DISPENSELOG_REPLY",this,this.showUI)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._list.datas=[],this.isHaveBox2.visible=!0,e.UnionWarCtrl.instance.reqFactionWarDispenseLog()},o.prototype.showUI=function(){this._list.datas=e.UnionWarModel.instance.logs,this.isHaveBox2.visible=e.UnionWarModel.instance.logs.length<=0},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},s=o,e.UnionWarRewardDistributionRecordAlert=s}(modules=modules||{}),function(s){var n,e,t,i,o,a,r,l,h;function c(){return null!==e&&e.apply(this,arguments)||this}n=s.union_war||(s.union_war={}),t=s.common.CustomList,i=Laya.Event,o=s.common.BtnGroup,a=s.bag.BaseItem,r=s.common.SimpleList,l=s.common.AvatarClip,e=ui.UnionWarRewardViewUI,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list2=r.create(a,100,100,1,5,20.5,5),this._list2.size(582,204),this.listBox.addChild(this._list2),this._list2.pos(0,0,!0),this._avatarClip=l.create(1560,1560,850),this.BoxUI.addChildAt(this._avatarClip,4),this._avatarClip.pos(368,640,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180,this._btnGroup=new o,this._btnGroup.setBtns(this.group1,this.group2,this.group3),this._list=new t,this._list.width=600,this._list.height=963,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=0,this._list.itemRender=n.UnionWarRewardSingleItem,this.listBox2.addChild(this._list),this._list.x=0,this._list.y=0,this._list1=new t,this._list1.width=600,this._list1.height=963,this._list1.hCount=1,this._list1.spaceX=0,this._list1.spaceY=0,this._list1.itemRender=n.UnionWarRewardRankItem,this.listBox1.addChild(this._list1),this._list1.x=0,this._list1.y=0,this.rewardShowItem.setDataFun([1,1,1,1,"assets/icon/ui/heaven_season/"]),this.playerTitleImg.skin="assets/icon/ui/designation/1012.png"},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,i.CHANGE,this,this.changeHandler),this.onAutoGlobalEvt("PLAYER_TITLE_OPENUPDATE",this,this.updateOpenList)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0},c.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t)},c.prototype.changeHandler=function(){this.BoxUI.visible=0===this._btnGroup.selectedIndex,this.BoxUI1.visible=1===this._btnGroup.selectedIndex,this.BoxUI2.visible=2===this._btnGroup.selectedIndex,0===this._btnGroup.selectedIndex?this.showUI():1===this._btnGroup.selectedIndex?this.showUI1():2===this._btnGroup.selectedIndex&&this.showUI2()},c.prototype.showUI=function(){this.rewardShowItem.stopTween(),this.rewardShowItem.showRewardObj(3013,0,0);for(var t=s.config.FactionWarBlendCfg.instance.getBlendCfgById(27)[1],e=[],i=0;i<t.length;i++){var n=t[i];e.push([n,1,0,null])}this._list2.datas=e},c.prototype.showUI1=function(){this._list1.datas=s.config.FactionWarRankCfg.instance.getArrCfg(),Laya.timer.clear(this,this.updateOpenList),Laya.timer.once(500,this,this.updateOpenList)},c.prototype.showUI2=function(){for(var t=new Array,e=0;e<n.UnionWarModel.instance.rewardArrTable.length;e++){var i=n.UnionWarModel.instance.rewardArrTable[e];t.push([e,i])}this._list.datas=t,Laya.timer.clear(this,this.updateOpenList1),Laya.timer.once(500,this,this.updateOpenList1)},c.prototype.updateOpenList=function(){1===this._btnGroup.selectedIndex&&this._list1.relayout()},c.prototype.updateOpenList1=function(){2===this._btnGroup.selectedIndex&&this._list.relayout()},c.prototype.close=function(){e.prototype.close.call(this),this.rewardShowItem.stopTween()},c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list2=this.destroyElement(this._list2),this._list1=this.destroyElement(this._list1),this._list=this.destroyElement(this._list),this._avatarClip=this.destroyElement(this._avatarClip),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this,t)},h=c,n.UnionWarRewardPanel=h}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._cfgs=GlobalData.getConfig("scene_copy_dahuang"),this._awardCfg=GlobalData.getConfig("scene_copy_dahuang_tipAward");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t];this._table[i[1]]=i}},n.prototype.getCfgByLv=function(t){return this._table[t]},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfgs},enumerable:!0,configurable:!0}),n.prototype.getTipAward=function(t){for(var e=0,i=this._awardCfg;e<i.length;e++){var n=i[e];if(n[0]==t)return n[1]}},i=n,e.SceneCopyDahuangCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("scene_copy_rune"),this.rewardCfg=GlobalData.getConfig("scene_copy_rune_reward"),this.maxLv=this._cfgs[this._cfgs.length-1][1]},n.prototype.getCfgByLv=function(t){return this._cfgs[t-1]},n.prototype.getAwardCfgByCurrLv=function(t){for(var e=t-1,i=this._cfgs.length;e<i;e++){var n=this._cfgs[e];if(n[2].length||n[3]||n[4])return n}},n.prototype.getTipReward=function(){return this.rewardCfg[0][0]},i=n,e.SceneCopyRuneCfg=i}(modules=modules||{}),function(t){var e,a,n,i;function s(){this._autoMatch=!1}e=t.ladder||(t.ladder={}),a=t.redPoint.RedPointCtrl,n=t.funcOpen.FuncOpenModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tiantiScore",{get:function(){return this._tiantiScore},set:function(t){this._tiantiScore=t,GlobalData.dispatcher.event("LADDER_SCORE_UPDATE"),this.judgeLadderJoinAwardRP()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"joinAwardStates",{get:function(){return this._joinAwardStates},set:function(t){this._joinAwardStates=t,GlobalData.dispatcher.event("LADDER_JOIN_AWARD_UPDATE"),this.judgeLadderJoinAwardRP()},enumerable:!0,configurable:!0}),s.prototype.funOpenGetSprintRankInfo=function(t){if(t)for(var e=0;e<t.length;e++)if(129==t[e]){var i=n.instance.getFuncStateById(129);if(1===i||2===i)return void this.judgeLadderJoinAwardRP()}},s.prototype.isOpenHuoDpng=function(){var t=DungeonModel.instance.getCopySceneStateByType(16),e=4;return t&&(e=t[2]),2===e},s.prototype.judgeLadderJoinAwardRP=function(){var t=!1;if(this._joinAwardStates&&0<this._joinAwardStates.length)for(var e=0,i=this._joinAwardStates.length;e<i;e++)if(1===this._joinAwardStates[e][1])return t=!0,a.instance.setRPProperty("ladderJoinAwardRP",t),void a.instance.setRPProperty("tianTiRP",t);if(DungeonModel.instance.sceneStates){var n=4,s=DungeonModel.instance.getCopySceneStateByType(16);s&&(n=s[2]);var o=0;if(this._tiantiScore&&(o=this._tiantiScore[3]),2==n&&0<o)return t=!0,a.instance.setRPProperty("ladderJoinAwardRP",t),void a.instance.setRPProperty("tianTiRP",t)}a.instance.setRPProperty("ladderJoinAwardRP",t),a.instance.setRPProperty("tianTiRP",t)},Object.defineProperty(s.prototype,"featAwardStates",{get:function(){return this._featAwardStates},set:function(t){this._featAwardStates=t,GlobalData.dispatcher.event("LADDER_FEAT_AWARD_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"times",{get:function(){return this._times},set:function(t){this._times=t,GlobalData.dispatcher.event("LADDER_TIMES_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ladderInfo",{get:function(){return this._ladderInfo},set:function(t){this._ladderInfo=t,this.joinAwardStates=t[1],this.featAwardStates=t[2],this.times=t[3],this.tiantiScore=t[0],GlobalData.dispatcher.event("LADDER_INFO_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ranks",{get:function(){return this._ranks},set:function(t){this._ranks=t,GlobalData.dispatcher.event("LADDER_RANKS_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"autoMatch",{get:function(){return this._autoMatch},set:function(t){this._autoMatch=t,GlobalData.dispatcher.event("LADDER_AUTO_MATCH_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tiantiScoreAward",{get:function(){return this._tiantiScoreAward},set:function(t){this._tiantiScoreAward=t},enumerable:!0,configurable:!0}),s.prototype.ladderUtlis=function(t,e){return e?6:Math.ceil(t/5)||1},i=s,e.LadderModel=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("scene")},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.SceneCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._tab={};var t=GlobalData.getConfig("scene_copy_open_boss");this.mapId=t[0][0];for(var e=0;e<t.length;e++)this._tab[t[e][1]]=t[e]}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getAllAward=function(t,e){for(var i=[],n=t;n<=e;n++)i.push(this._tab[n][3]);return i},n.prototype.getFightByLevel=function(t){return this._tab[t][4]},n.prototype.getAtivityIcon=function(t){return this._tab[t][6]},n.prototype.getBottomTab=function(t){return this._tab[t][7]},n.prototype.getAtivityGrade=function(t){return this._tab[t][8]},n.prototype.getRewardGradeByLevel=function(t){return this._tab[t][9]},n.prototype.getBossNameByLevel=function(t){return this._tab[t][10]},n.prototype.getClipIdByLevel=function(t){return this._tab[t][11]},n.prototype.getItemIdByLevel=function(t){return this._tab[t][12]},n.prototype.getDescribeByLevel=function(t){var e=this._tab[t][9];for(var i in this._tab)if(this._tab[i][13]&&this._tab[i][9]===e)return this._tab[i][13];return""},i=n,e.SceneCopyOpenBossCfg=i}(modules=modules||{}),function(s){var t,o,i,n,a,r,l,h,e;function c(){this.realLevel=1,this.curLevel=1,this.minLevel=0,this.maxLevel=1,this.levelCount=1,this.curLevel=1,this.chooseLevel=1,this.endTime=0,this.isSetRP=!1,GlobalData.dispatcher.on("PLAYER_UPDATE_FIGHT",this,this.setRP)}t=s.openChallenge||(s.openChallenge={}),o=s.funcOpen.FuncOpenModel,i=s.player.PlayerModel,n=s.redPoint.RedPointCtrl,a=s.config.SceneCopyOpenBossCfg,r=s.config.BlendCfg,l=s.dungeon.DungeonCtrl,h=s.scene.SceneUtil,Object.defineProperty(c,"instance",{get:function(){return this._instance=this._instance||new c},enumerable:!0,configurable:!0}),c.prototype.getOpenBossInfo=function(t){if(t){var e=0===t[3]?0:1,i=s.config.SceneCfg.instance.getCfgById(a.instance.mapId)[7];if(0!=e&&this.minLevel==t[0]||h.currScene!==i||l.instance.reqEnterScene(0),o.instance.setActionOpen(266,e),o.instance.setActionOpen(267,e),0!=e){var n=this.minLevel;this.minLevel=t[0],this.maxLevel=t[1],this.levelCount=this.maxLevel-this.minLevel+1,this.realLevel=t[2]+1,this.realLevel>this.maxLevel&&(this.realLevel=this.maxLevel),this.curLevel=t[2]-this.minLevel+2,this.endTime=t[3],this.setRP(),GlobalData.dispatcher.event("OPEN_CHALLENGE_INFO_UPDATE"),n!=this.minLevel&&GlobalData.dispatcher.event("OPEN_CHALLENGE_CHANGE_STATE")}}else o.instance.setActionOpen(266,2)},c.prototype.setRP=function(){if(0!=this.endTime){if(i.instance.fight&&this.curLevel<=this.levelCount){var t=a.instance.getFightByLevel(this.realLevel),e=r.instance.getCfgById(70002)[1][0];this._playerPower=i.instance.fight,this._playerPower>=t*e?this.isSetRP=!0:this.isSetRP=!1}else this.isSetRP=!1;n.instance.setRPProperty("openChallengeRP",this.isSetRP)}},e=c,t.OpenChallengeModel=e}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){var t=i.call(this)||this;return t._type=0,t}e=t.union_war||(t.union_war={}),n=t.bag.BagItem,s=t.config.BlendCfg,o=t.common.CustomList,i=ui.UnionWarWinAndLoseViewUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1,this._list=new o,this._list.width=412,this._list.height=280,this._list.hCount=4,this._list.spaceX=4,this._list.itemRender=n,this._list.x=154,this._list.y=700,this.addChild(this._list),CommonUtil.setHTMLPro(this.StatementHTML,"#ffec7c","SimHei",28),CommonUtil.setHTMLPro(this.StatementHTML1,"#ffec7c","SimHei",28),CommonUtil.setHTMLPro(this.StatementHTML2,"#ffec7c","SimHei",28)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=s.instance.getCfgById(10303)[1][0],this.loopHandler()},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t&&(this._type=t[0],this._date=t[1],console.log("仙盟争霸 结算数据： ",this._date),this._type&&(this.setUI(),this.showUI()))},r.prototype.setUI=function(){switch(this._type){case 1:case 2:this._list.height=300,this._list.y=648,this.StatementHTML2.visible=!1,this.StatementHTML.visible=this.StatementHTML1.visible=!0;break;case 3:case 4:this._list.height=300,this._list.y=648,this.StatementHTML2.visible=!1,this.StatementHTML1.visible=this.StatementHTML.visible=!0}this.bgImg.skin=1===this._type||3===this._type?"win/bj_jiesuan_3.png":"lose/bj_jiesuan_4.png"},r.prototype.showUI=function(){var t=this._date[1],e=this.showRewards(t),i=this._date[3],n=this._date[7];3===this._type||4===this._type?this.StatementHTML.innerHTML="击败数量:"+i:this.StatementHTML.innerHTML="仙盟积分:"+n,this.StatementHTML1.innerHTML="仙盟声望:"+e},r.prototype.showRewards=function(t){for(var e=new Array,i=0,n=0;n<t.length;n++){var s=t[n];95330001===s[0]?i=s[1]:e.push([s[0],s[1],0,null])}return this._list.datas=e,i},r.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler),t.union_war.UnionWarModel.instance.ispreliminary()?(t.dungeon.DungeonCtrl.instance.reqEnterNextLevel(),console.log("结算处于第二层 进入下一层")):console.log("结算处于第一层 直接关闭")},r.prototype.loopHandler=function(){0===this._duration&&this.close(),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},a=r,e.UnionWarWinAndLosePanel=a}(modules=modules||{}),function(t){var e,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.timeNum=0,t}e=t.union_war||(t.union_war={}),i=ui.UnionWarPreliminaryCnterTopViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.zOrder=-2,this.top=175,this.closeByOthers=!1,this.layer=3},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.timeText.text="",this.showTimeUI(),this.showUI()},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_WAR_MATCH_FIGHT_INFO",this,this.showUI),this.onAutoGlobalEvt("DUNGEON_BROADCAST_BEGIN_COMBAT",this,this.showUI),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_MATCH_PACE_CHANGE",this,this.showUI),this.onAutoGlobalEvt("DUNGEON_BROADCAST_BEGIN_COMBAT",this,this.showTimeUI)},s.prototype.showUI=function(){this.item1.data=e.UnionWarModel.instance.getLinePlater(!0),this.item2.data=e.UnionWarModel.instance.getLinePlater(!1)},s.prototype.showTimeUI=function(){this.timeNum=t.dungeon.DungeonModel.instance.broadcastBeginCombat?GlobalData.serverTime+t.dungeon.DungeonModel.instance.broadcastBeginCombat[0]:0,Laya.timer.clear(this,this.loopHandler),0!==this.timeNum?(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):this.timeText.text=""},s.prototype.loopHandler=function(){this.timeNum>GlobalData.serverTime?this.timeText.text=t.common.CommonUtil.msToMMSS(this.timeNum-GlobalData.serverTime):(this.timeText.text="00:00",Laya.timer.clear(this,this.loopHandler))},s.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler),e.UnionWarModel.instance.hpPer&&(e.UnionWarModel.instance.hpPer.length=0)},n=s,e.UnionWarPreliminaryCnterTopPanel=n}(modules=modules||{}),function(t){var i,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}i=t.union_war||(t.union_war={}),e=ui.UnionWarPreliminaryLeftViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.left=0,this.bottom=521,this.closeByOthers=!1,this.layer=3,this._allPlayerInfo=[this.item1,this.item2,this.item3]},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_WAR_MATCH_FIGHT_INFO",this,this.updatePlayers)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updatePlayers()},s.prototype.updatePlayers=function(){if(i.UnionWarModel.instance.teamer1&&0<i.UnionWarModel.instance.teamer1.length){for(var t=0;t<this._allPlayerInfo.length;t++)(e=this._allPlayerInfo[t]).data=null;for(t=0;t<i.UnionWarModel.instance.teamer1.length;t++){var e=i.UnionWarModel.instance.teamer1[t];this._allPlayerInfo[t].data=e}}},n=s,i.UnionWarPreliminaryLeftPanel=n}(modules=modules||{}),function(t){var i,e,n;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t._bolll=!1,t}i=t.union_war||(t.union_war={}),e=ui.UnionWarPreliminaryRightViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=521,this.closeByOthers=!1,this.layer=3,this._allPlayerInfo=[this.item1,this.item2,this.item3]},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FACTION_WAR_MATCH_FIGHT_INFO",this,this.updatePlayers),this.onAutoClick(this,this,this.stopTwenn)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updatePlayers()},s.prototype.updatePlayers=function(){if(i.UnionWarModel.instance.teamer2&&0<i.UnionWarModel.instance.teamer2.length){this._bolll||(this._bolll=!0);for(var t=0;t<this._allPlayerInfo.length;t++)(e=this._allPlayerInfo[t]).data=null;for(t=0;t<i.UnionWarModel.instance.teamer2.length;t++){var e=i.UnionWarModel.instance.teamer2[t];this._allPlayerInfo[t].data=e}}},s.prototype.stopTwenn=function(){this.tipsBox.visible=!1,this._tweenLeft3&&this._tweenLeft3.stop(),this._tweenLeft4&&this._tweenLeft4.stop(),this.tipsBox.x=-66},s.prototype.close=function(){e.prototype.close.call(this),this._bolll=!1,this._tweenLeft3&&this._tweenLeft3.stop(),this._tweenLeft4&&this._tweenLeft4.stop()},s.prototype.destroy=function(){this._tweenLeft3&&(this._tweenLeft3.stop(),this._tweenLeft3=null),this._tweenLeft4&&(this._tweenLeft4.stop(),this._tweenLeft4=null),e.prototype.destroy.call(this)},s.prototype.playerTwenn=function(){var t=this;this._tweenLeft4=TweenJS.create(this.tipsBox).to({x:this.tipsBox.x+40},300).onComplete(function(){t._tweenLeft3.start()}),this._tweenLeft3=TweenJS.create(this.tipsBox).to({x:this.tipsBox.x-40},300).onComplete(function(){t._tweenLeft4.start()}),this._tweenLeft3.start(),this.tipsBox.visible=!0},n=s,i.UnionWarPreliminaryRightPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),i=ui.UnionWarPreliminaryCnterBottonViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.zOrder=-2,this.bottom=522,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.findBtn,this,this.findBtnHandler),this.onAutoGlobalEvt("FUHUO_UNIONWAR",this,this.loopHearl)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.UnionWarModel.instance.isSuoDi=!1,Laya.timer.loop(3e3,this,this.loopHearl),this.loopHearl()},s.prototype.close=function(){i.prototype.close.call(this),e.UnionWarModel.instance.isSuoDi=!1,Laya.timer.clear(this,this.loopHearl)},s.prototype.findBtnHandler=function(){e.UnionWarModel.instance.isSuoDi=!0,this.loopHearl()},s.prototype.loopHearl=function(){e.UnionWarModel.instance.isSuoDi&&e.UnionWarCtrl.instance.reqSearchObj(5)},n=s,e.UnionWarPreliminaryCnterBottonPanel=n}(modules=modules||{}),function(s){var o,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}o=s.union_war||(s.union_war={}),t=ui.UnionWarReadyCopyRightViewUI,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=359,this.closeByOthers=!1,this.layer=3,CommonUtil.setHTMLPro(this.HTML1,"#50ff28","SimHei",24),CommonUtil.setHTMLPro(this.HTML2,"#FFFFFF","SimHei",24),CommonUtil.setHTMLPro(this.HTML3,"#FFFFFF","SimHei",24),CommonUtil.setHTMLPro(this.HTML4,"#FFFFFF","SimHei",24),CommonUtil.setHTMLPro(this.HTML5,"#FFFFFF","SimHei",24)},i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.guessBtn,this,this.guessBtnHandler),this.onAutoClick(this.teamBox,this,this.teamBoxHandler),this.onAutoClick(this.rankBox,this,this.rankBoxHandler),this.onAutoClick(this.drowBtn,this,this.drowBtnHandler),this.onAutoClick(this.playerDateBox,this,this.playerDateBoxHandler),this.onAutoGlobalEvt("GET_FACTION_WAR_MATCH_INFO_REPLY",this,this.showUI),this.onAutoGlobalEvt("SCENE_ENTER",this,this.setUI),this.regAutoRP(this.rpImg,["unionWarRP3"]),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.teamRpImg.visible=!1,this.regAutoRP(this.teamRpImg,["teaminvastion"])},i.prototype.helpBtnHandler=function(){42===s.scene.SceneUtil.currScene?CommonUtil.alertHelp(19019):43===s.scene.SceneUtil.currScene&&CommonUtil.alertHelp(19022)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.getFactionWarMatchInfo(),Laya.timer.loop(5e3,this,this.showUI),this.showUI(),this.setUI()},i.prototype.getFactionWarMatchInfo=function(){42===s.scene.SceneUtil.currScene&&o.UnionWarCtrl.instance.getFactionWarMatchInfo()},i.prototype.showUI=function(){var e=this;function t(t){t?(Laya.timer.loop(1e3,e,e.activityHandler),e.activityHandler()):(Laya.timer.clear(e,e.activityHandler),e.HTML1.innerHTML="此轮轮空直接获取奖励",Laya.timer.loop(1e3,e,e.activityHandler1),e.activityHandler1())}Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.activityHandler1);var i=!0;this.helpBtn.visible=42===s.scene.SceneUtil.currScene,42===s.scene.SceneUtil.currScene?(console.log("预赛 是否轮空"+(o.UnionWarModel.instance.nextTurnTime>GlobalData.serverTime)),i=o.UnionWarModel.instance.nextTurnTime>GlobalData.serverTime):43===s.scene.SceneUtil.currScene&&(i=o.UnionWarModel.instance.nextTurnTime>GlobalData.serverTime,console.log("决赛 是否轮空"+i)),t(!i),this.HTML2.innerHTML="仙盟积分:"+o.UnionWarModel.instance.factionScore,this.HTML3.innerHTML="我的积分:"+o.UnionWarModel.instance.personScore,this.HTML4.innerHTML=o.UnionWarModel.instance.factionRank?"仙盟排行:"+o.UnionWarModel.instance.factionRank:"仙盟排行:未上榜";var n=s.config.FactionWarBlendCfg.instance.getBlendCfgById(11)[1][0];this.HTML5.innerHTML="积分赛:第"+(o.UnionWarModel.instance.turnNum>n?n:o.UnionWarModel.instance.turnNum)+"轮/共"+n+"轮"},i.prototype.setUI=function(){this.HTML5.visible=this.HTML1.visible=this.HTML2.visible=this.HTML3.visible=this.HTML4.visible=this.drowBtn.visible=this.teamBox.visible=this.rankBox.visible=this.guessBtn.visible=this.playerDateBox.visible=!1;var t=s.scene.SceneUtil.currScene;42===t?(this.HTML5.visible=this.HTML1.visible=this.HTML2.visible=this.HTML3.visible=this.HTML4.visible=this.drowBtn.visible=this.teamBox.visible=this.rankBox.visible=!0,this.bgImg.height=151,this.bgImg.y=0,this.HTML1.y=34):43===t&&(this.HTML1.visible=this.guessBtn.visible=this.playerDateBox.visible=!0,this.bgImg.height=40,this.bgImg.y=111,this.HTML1.y=121)},i.prototype.guessBtnHandler=function(){WindowManager.instance.open(1057)},i.prototype.rankBoxHandler=function(){WindowManager.instance.open(1056)},i.prototype.playerDateBoxHandler=function(){WindowManager.instance.open(1043)},i.prototype.teamBoxHandler=function(){s.common_group.CommonGroupUtil.inTeamCopyOpen()},i.prototype.drowBtnHandler=function(){s.common_group.CommonGroupUtil.isMyHaveTeam()?s.common_group.CommonGroupModel.instance.isHomeowners?WindowManager.instance.open(1371):CommonUtil.noticeError(0,"队长才可以调整出战顺序",!0):CommonUtil.noticeError(0,"没有队伍",!0)},i.prototype.activityHandler=function(){if(this.HTML1.innerHTML="准备倒计时:<span style='color:#ff3e3e'>"+CommonUtil.timeStampToHHMMSS(o.UnionWarModel.instance.readyEndTime)+"</span>",o.UnionWarModel.instance.readyEndTime<GlobalData.serverTime){Laya.timer.clear(this,this.activityHandler);var t=s.scene.SceneUtil.currScene;if(42===t){var e=s.config.FactionWarBlendCfg.instance.getBlendCfgById(11)[1][0];this.HTML1.innerHTML=o.UnionWarModel.instance.turnNum<=e?"等待战斗开始":"等待退出场景"}else 43===t&&(this.HTML1.innerHTML="等待战斗开始")}},i.prototype.activityHandler1=function(){o.UnionWarModel.instance.nextTurnTime<GlobalData.serverTime&&Laya.timer.clear(this,this.activityHandler1)},i.prototype.close=function(){t.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.activityHandler1),Laya.timer.clear(this,this.showUI),s.dungeon.DungeonModel.instance.pos=null},e=i,o.UnionWarReadyCopyRightPanel=e}(modules=modules||{}),function(o){var e,i,t,n,s,a,r,l,h,c,p,u;function d(){return null!==i&&i.apply(this,arguments)||this}e=o.baby||(o.baby={}),t=o.core.BaseViewEx,n=o.common.FuncBtnGroup,s=o.common.AvatarClip,a=o.common.CustomClip,r=o.bag.BagUtil,l=o.config.ExteriorCfg,h=o.config.BabyCfg,c=o.config.SkillPureCfg,p=o.common.ListWithArrowCtrl,i=t,__extends(d,i),d.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup=new n,this._btnGroup.setFuncIds(706,707,708,889),this._btnGroup.setBtns(this.v.cultureBtn,this.v.advancedBtn,this.v.practiceBtn,this.v.skillBtn),this.v.attrList.renderHandler=Handler.create(this,this.attrHandler,null,!1),this._modelClip=s.normalCreate(),this._modelClip.avatarRotationY=0,this._modelClip.centerX=0,this._modelClip.y=470,this.v.addChildAt(this._modelClip,2),this._babyList.size(430,100),this._babyList.x=(this.v.listBox.width-280-150)/2,this.v.listBox.addChild(this._babyList),this._btnClip=a.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.v.onekeyBtn.addChild(this._btnClip),this._btnClip.pos(-5,-8),this._btnClip.scale(.8,.8),this._btnClip.visible=!1,this.v.sumAttrBtn.underline=!0,this.v.sumAttrBtn.typeset(),this.v.notActiveLink.underline=!0,this.v.leftRP.visible=this.v.rightRP.visible=!1,this._listCtrl=new p(this._babyList,this.v.preBtn,this.v.nextBtn),this._listCtrl.scrollDis=this._babyList.width+this._babyList.spaceX},d.prototype.showUI=function(){this._maxDistance=this._babyList.datas.length*this._babyList.itemWidth+(this._babyList.datas.length-1)*this._babyList.spaceX-this._babyList.width,this.setBtnVisible(),Laya.timer.clear(this,this.setBtnVisible),Laya.timer.frameLoop(1,this,this.setBtnVisible)},d.prototype.setBtnVisible=function(){this.v.preBtn.visible=!1,this.v.nextBtn.visible=!1,this.v.preBtn.visible=0<this._babyList.scrollPos&&3<this._babyList.datas.length,this.v.nextBtn.visible=this._babyList.scrollPos<this._maxDistance&&3<this._babyList.datas.length},d.prototype.close=function(){i.prototype.close.call(this),this._tweenPage&&this._tweenPage.stop(),Laya.timer.clear(this,this.setBtnVisible)},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._modelClip=this.destroyElement(this._modelClip),this._babyList=this.destroyElement(this._babyList),this._btnClip=this.destroyElement(this._btnClip),this._listCtrl=this.destroyElement(this._listCtrl),this.v.observationItem=this.destroyElement(this.v.observationItem),this._tweenPage&&(this._tweenPage.stop(),this._tweenPage=null),this._condItem&&(this._condItem=null),this.v.attrList.renderHandler&&(this.v.attrList.renderHandler.recover(),this.v.attrList.renderHandler=null),this._checkFunc=null,i.prototype.destroy.call(this,t)},d.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeMenuHandler),this.onAutoClick(this.v.onekeyBtn,this,this.onekeyHandler),this.onAutoClick(this.v.aboutBtn,this,this.tipsHandler),this.onAutoEvt(this._babyList,"select",this,this.updateInfo),this.onAutoEvt(this._babyList,"SCROLL_INDEX_CHANGE",this,this.updatePageRP),this.onAutoClick(this.v.switchBtn,this,this.switchHandler),this.onAutoClick(this.v.sumAttrBtn,this,this.sumAttrHandler),this.onAutoClick(this.v.notActiveLink,this,this.jumpHandler),this.onAutoGlobalEvt("BABY_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateInfo),this.regAutoRP(this.v.cultureRP,["babyGrowthRP","babySkillBaseRP","babySkillHaloRP"]),this.regAutoRP(this.v.advancedRP,["babyGradeRP","babySkillTalentRP"]),this.regAutoRP(this.v.practiceRP,["babyTonicRP"]),this.regAutoRP(this.v.skillRP,["babyActiveSkillRP"]),this._listCtrl.addListeners()},d.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._listCtrl.removeListeners()},d.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._preId=t},d.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._curId=0,this._stopShow=!1,this._babyList.selectedIndex=-1},d.prototype.scrollHandler=function(t){if(!this._tweenPage||!this._tweenPage.isPlaying)if(this._tweenPage&&this._tweenPage.stop(),t<0){var e=this._babyList.scrollPos-4*(this._babyList.itemWidth+this._babyList.spaceX);e<0&&(e=0),this._tweenPage||(this._tweenPage=TweenJS.create(this._babyList)),this._tweenPage.to({scrollPos:e},(this._babyList.scrollPos-e)/2).start()}else if(0<t){var i=this._babyList.scrollPos+4*(this._babyList.itemWidth+this._babyList.spaceX);i>this._babyList.conWidth&&(i=this._babyList.conWidth),this._tweenPage||(this._tweenPage=TweenJS.create(this._babyList)),this._tweenPage.to({scrollPos:i},(i-this._babyList.scrollPos)/2).start()}},d.prototype.jumpHandler=function(){WindowManager.instance.open(this._jumpPanelId,this._babyList.selectedData)},d.prototype.changeMenuHandler=function(){},d.prototype.sumAttrHandler=function(){},d.prototype.onekeyHandler=function(){if(this._condItem&&CommonUtil.getPropCountById(this._condItem[0])<this._condItem[1])r.openLackPropAlert(this._condItem[0],this._condItem[1]);else{var t=this._babyList.selectedData||0;t&&this.onekeyFunc(t)}},d.prototype.onekeyFunc=function(t){},d.prototype.switchHandler=function(){e.BabyCtrl.instance.FairyDollChange(this._babyList.selectedData)},d.prototype.tipsHandler=function(){CommonUtil.alertHelp(this._helpId)},d.prototype.attrHandler=function(t,e){var i=t.dataSource,n=o.config.AttrItemCfg.instance.getCfgById(i[0]),s=n[2];t.getChildByName("nameTxt").text=n[1]+"：",t.getChildByName("valueTxt").text=s?o.common.AttrUtil.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=i[2]>i[1],t.getChildByName("addTxt").text=i[2]>i[1]?s?o.common.AttrUtil.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+"":""},d.prototype.updateInfo=function(){this.updatePageRP(),this._condItem=null;var t=this._babyList.selectedData||0;if(t){if(this._curId!==t){var e=h.instance.getShowId(t),i=l.instance.getCfgById(e);this._modelClip.reset(i[0]),this._modelClip.avatarRotationX=i[6],this._modelClip.avatarRotationY=i[7],this._modelClip.avatarScale=i[10]?i[10]:1,this._modelClip.avatarY=i[9],this._modelClip.avatarX=i[8],this._stopShow||this._modelClip.setActionType("show",0),this._stopShow=!1,this.v.nameTxt.text=i[2],this.v.observationItem.data=[[this._modelClip,0]]}a.thisStop(this._btnClip),this.updateInfoFunc(t)}},d.prototype.updateInfoFunc=function(t){this.v.useImg.visible=e.BabyModel.instance.curBaby===t},d.prototype.enoughMatFunc=function(){this.v.onekeyBtn.visible=!0,this.v.feedItem.visible=!0;var t=CommonUtil.getPropCountById(this._condItem[0]);this.v.feedItem.dataSource=[this._condItem[0],0,0,null],this.v.feedItem.setNum(CommonUtil.bigNumToString(t)+"/"+CommonUtil.bigNumToString(this._condItem[1]),t<this._condItem[1]?"#ff3e3e":"#50ff28"),t>=this._condItem[1]&&a.thisPlay(this._btnClip)},d.prototype.checkSkill=function(t,e,i){if(t){this.v.tipBox1.visible=!0;var n=c.instance.getCfgById(1e-4*t>>0),s=t%1e4;this.v.tipTxt_4.text="【"+n[1]+"】"+s+"级",this.v.tipTxt_3.text=""+e+i,this.v.tipTxt_5.text=1==s?"可激活技能":"可升级技能",this.v.tipTxt_6.text="还差",CommonUtil.chainArr([this.v.tipTxt_6,this.v.tipTxt_3,this.v.tipTxt_5,this.v.tipTxt_4],5),this.v.tipBox1.centerX=0}},d.prototype.showAttr=function(t,e){for(var i=[],n=0;++n;){var s=2*(n-1),o=2*(n-1)+1,a=[];if(t&&t.length>s)a.push(t[s]),a.push(t[o]),e&&e.length>s?a.push(e[o]):a.push(0),i.push(a);else{if(!(e&&e.length>s))break;a.push(e[s]),a.push(0),a.push(e[o]),i.push(a)}}this.v.attrList.dataSource=i},d.prototype.updateView=function(){if(this._babyList.datas=h.instance.babyIds,this._preId){var t=this._babyList.datas.indexOf(this._preId);this._preId=0,this._stopShow=!0,this._babyList.selectedIndex=-1<t?t:0}else if(this._babyList.selectedIndex<0){for(var e=t=0;e<this._babyList.datas.length;++e)if(this._checkFunc(this._babyList.datas[e])){t=e;break}this._babyList.selectedIndex=t}else this._babyList.selectedIndex=this._babyList.selectedIndex;(this._babyList.startShowIndex>this._babyList.selectedIndex||this._babyList.startShowIndex+3<this._babyList.selectedIndex)&&this._babyList.scrollToIndex(this._babyList.selectedIndex),this.showUI()},d.prototype.updatePageRP=function(){for(var t=!1,e=0;e<this._babyList.startShowIndex;++e)if(this._checkFunc(this._babyList.datas[e])){t=!0;break}for(this.v.leftRP.visible=t,t=!1,e=this._babyList.endShoeIndex;e<this._babyList.length;++e)if(this._checkFunc(this._babyList.datas[e])){t=!0;break}this.v.rightRP.visible=t},u=d,e.BabyBasePanel=u}(modules=modules||{}),function(t){var h,r,e,c,s,i;function n(){return null!==r&&r.apply(this,arguments)||this}h=t.baby||(t.baby={}),e=t.common.SimpleList,c=t.config.BabyCfg,s=t.common.CustomClip,r=h.BabyBasePanel,__extends(n,r),n.prototype.destroy=function(t){void 0===t&&(t=!0),this._baseList=this.destroyElement(this._baseList),this._haloList=this.destroyElement(this._haloList),this._expClip=this.destroyElement(this._expClip),this._critClip=this.destroyElement(this._critClip),this._tweenExp&&(this._tweenExp.stop(),this._tweenExp=null),this._tweenLvUp&&(this._tweenLvUp.stop(),this._tweenLvUp=null),this._tweenExp1&&(this._tweenExp1.stop(),this._tweenExp1=null),r.prototype.destroy.call(this,t)},n.prototype.initialize=function(){this._babyList=e.create(h.BabyGrowthItem,70,100,2,1,50,0),r.prototype.initialize.call(this),this._baseList=e.create(h.BabySkillItem,70,70,2,1,15,0),this._baseList.size(this.v.baseSkillList.width,this.v.baseSkillList.height),this.v.baseSkillBox.addChild(this._baseList),this.v.baseSkillList.visible=!1,this._haloList=e.create(h.BabySkillItem,70,70,2,1,20,0),this._haloList.size(this.v.haloSkillList.width,this.v.haloSkillList.height),this.v.haloSkillBox.addChild(this._haloList),this.v.haloSkillList.visible=!1,this.v.notActiveLink.height=30,this._originBar=this.v.expBar.width,this._expClip=s.create("assets/effect/progress.atlas","progress",8,!1,3),this._expClip.pos(165,880,!0),this._expClip.scaleX=.85,this.v.addChild(this._expClip),this._expClip.visible=!1,this._critClip=s.create(null,"assets/effect/success",8,!1,3),this.v.addChild(this._critClip),this._critClip.scale(1.4,1.4,!0),this._critClip.pos(250,770,!0),this._critClip.visible=!1,this._jumpPanelId=1079,this._helpId=19027,this._checkFunc=h.BabyModel.instance.checkGrowthById.bind(h.BabyModel.instance)},n.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoGlobalEvt("BABY_LEVEL_UP",this,this.levelUpHandler)},n.prototype.onOpened=function(){r.prototype.onOpened.call(this),this.v.critImg.visible=!1,this._btnGroup.selectedIndex=0},n.prototype.changeMenuHandler=function(){switch(this._btnGroup.selectedIndex){case 0:this.updateView();break;case 1:WindowManager.instance.open(1079,this._babyList.selectedData);break;case 2:WindowManager.instance.open(1080);break;case 3:WindowManager.instance.open(1337)}},n.prototype.onekeyFunc=function(t){r.prototype.onekeyFunc.call(this,t);var e=h.BabyModel.instance.getBabyById(t);e&&0<e[1]?h.BabyCtrl.instance.FairyDollCulture(t):h.BabyCtrl.instance.FairyDollRefine(t)},n.prototype.sumAttrHandler=function(){h.BabyModel.instance.calcGrowthAttrs()},n.prototype.updateInfoFunc=function(t){r.prototype.updateInfoFunc.call(this,t),this._curId!=t&&(this._curId=t,this._baseList.datas=c.instance.skillIds[t][1],this._baseList.x=(this.v.baseSkillBox.width-85*(this._baseList.datas?this._baseList.datas.length:0)-10)/2,this._haloList.datas=c.instance.skillIds[t][2],this._haloList.x=(this.v.haloSkillBox.width-90*(this._haloList.datas?this._haloList.datas.length:0)-10)/2,this.updateExp(!1,!1)),this.v.powerNum.value=h.BabyModel.instance.getGrowthTotalFight().toString();var e=h.BabyModel.instance.getBabyById(t),i=e?e[1]:0;if(this.v.switchBtn.visible=0<i&&h.BabyModel.instance.curBaby!==t,this.v.tipBox.visible=this.v.tipBox1.visible=!1,0<i){this.v.onekeyBtn.label="培养",this._condItem=c.instance.getGrowthItem(t,i+1),this._condItem?(this.v.maxLvTxt.visible=!1,this.enoughMatFunc(),this.v.expBox.visible=!0):(this.v.maxLvTxt.visible=!0,this.v.onekeyBtn.visible=this.v.feedItem.visible=this.v.expBox.visible=!1),this.v.notAvailableImg.visible=this.v.notActiveTxt.visible=this.v.notActiveLink.visible=!1,this.v.lvImg.visible=this.v.levelClip.visible=!0,this.v.levelClip.value=i.toString();var n=c.instance.getNextSkillByIdAndLv(t,i),s=n[0],o=n[1];this.checkSkill(s,o,"级")}else{this.v.notAvailableImg.visible=this.v.notActiveTxt.visible=this.v.notActiveLink.visible=!0,this.v.maxLvTxt.visible=this.v.lvImg.visible=this.v.levelClip.visible=!1,this.v.onekeyBtn.visible=this.v.feedItem.visible=this.v.expBox.visible=!1,this.v.tipBox.visible=this.v.tipBox1.visible=!1;var a=c.instance.getNextSkillByIdAndLv(t,i);s=a[0],o=a[1],this.checkSkill(s,o,"级")}this.showAttr(c.instance.getGrowthAttr(t,i),c.instance.getGrowthAttr(t,i+1))},n.prototype.levelUpHandler=function(t,e){var i=this;if(this.updateExp(!0,e),t){s.thisStop(this._expClip),s.thisStop(this._critClip),this._tweenLvUp&&this._tweenLvUp.stop();var n=this.v.critImg;this.v.addChild(n),n.y=860,n.scale(1,1,!0),n.alpha=1,n.visible=!0,this._tweenLvUp||(this._tweenLvUp=TweenJS.create(n)),this._tweenLvUp.to({y:810,alpha:.3,scaleX:.7,scaleY:.7},600).onComplete(function(){n.visible=!1}).start(),s.thisPlay(this._expClip),Laya.timer.once(400,this,function(){s.thisStop(i._expClip)}),s.thisPlay(this._critClip),Laya.timer.once(400,this,function(){s.thisStop(i._critClip)})}},n.prototype.updateExp=function(t,e){var i=this,n=this._babyList.selectedData||0,s=h.BabyModel.instance.getBabyById(n),o=s?s[3]:0,a=s?s[1]:0,r=c.instance.getGrowthExp(n,a)||1,l=(o=r<o?r:o<0?0:o)/r*this._originBar;t?(this._tweenExp&&this._tweenExp.stop(),this._tweenExp||(this._tweenExp=TweenJS.create(this)),e?(this._tweenExp1&&this._tweenExp1.stop(),this._tweenExp1||(this._tweenExp1=TweenJS.create(this)),this._tweenExp1.to({expValue:this._expMaxValue},this._originBar-this.v.expBar.width).onComplete(function(){i.v.expTxt.text="Lv."+a,i._expMaxValue=r,(i.expValue=0)<o&&i._tweenExp.to({expValue:o},l-i.v.expBar.width).onComplete(function(){i.v.expTxt.text="Lv."+a}).start()}).start()):(this._expMaxValue=r,this._tweenExp.to({expValue:o},l-this.v.expBar.width).onComplete(function(){i.v.expTxt.text="Lv."+a}).start())):(this.v.expTxt.text="Lv."+a,this._expMaxValue=r,this.expValue=o)},Object.defineProperty(n.prototype,"expValue",{get:function(){return this._expValue},set:function(t){if(t>this._expMaxValue||t<0)return this._tweenExp&&this._tweenExp.stop(),this._tweenExp1&&this._tweenExp1.stop(),void this.updateExp(!1,!1);this._expValue=t,this.v.feedNumTxt.text=(this._expValue>>0).toString()+"/"+this._expMaxValue.toString();var e=this._expValue/this._expMaxValue;e=e?1<e?1:e<0?0:e:0,this.v.expBar.width=e*this._originBar},enumerable:!0,configurable:!0}),n.prototype.close=function(){r.prototype.close.call(this),this._tweenExp&&this._tweenExp.stop(),this._tweenLvUp&&this._tweenLvUp.stop(),this._tweenExp1&&this._tweenExp1.stop()},i=n,h.BabyGrowthPanel=i}(modules=modules||{}),function(t){var h,c,e,p,i;function n(){return null!==c&&c.apply(this,arguments)||this}h=t.baby||(t.baby={}),e=t.common.SimpleList,p=t.config.BabyCfg,c=h.BabyBasePanel,__extends(n,c),n.prototype.destroy=function(t){void 0===t&&(t=!0),this._skillList=this.destroyElement(this._skillList),c.prototype.destroy.call(this,t)},n.prototype.initialize=function(){this._babyList=e.create(h.BabyGradeItem,70,100,2,1,50,0),c.prototype.initialize.call(this),this._skillList=e.create(h.BabySkillItem1,300,100,2,1,30,0),this._skillList.size(this.v.skillList.width,this.v.skillList.height),this.v.skillBox.addChild(this._skillList),this.v.skillList.visible=!1,this._jumpPanelId=1078,this._helpId=19028,this._checkFunc=h.BabyModel.instance.checkGradeById.bind(h.BabyModel.instance)},n.prototype.onOpened=function(){c.prototype.onOpened.call(this),this._btnGroup.selectedIndex=1},n.prototype.changeMenuHandler=function(){switch(this._btnGroup.selectedIndex){case 0:WindowManager.instance.open(1078,this._babyList.selectedData);break;case 1:this.updateView();break;case 2:WindowManager.instance.open(1080);break;case 3:WindowManager.instance.open(1337)}},n.prototype.onekeyFunc=function(t){c.prototype.onekeyFunc.call(this,t),h.BabyCtrl.instance.FairyDollRefine(t)},n.prototype.sumAttrHandler=function(){h.BabyModel.instance.calcGradeAttrs()},n.prototype.updateInfoFunc=function(t){if(c.prototype.updateInfoFunc.call(this,t),this._curId!=t){this._curId=t,this._skillList.datas=p.instance.skillIds[t][3];var e=this._skillList.datas?this._skillList.datas.length:0;this._skillList.x=1===e?170:0,this.v.fengexian.visible=1<e}this.v.powerNum.value=h.BabyModel.instance.getGradeTotalFight().toString();var i=h.BabyModel.instance.getBabyById(t),n=i?i[2]:0;this.v.switchBtn.visible=0<n&&h.BabyModel.instance.curBaby!==t;var s=p.instance.getMaxGrade(t);if(0<n){this.v.onekeyBtn.label="进阶",this._condItem=p.instance.getGradeItem(t,n+1),this._condItem&&n<s?(this.v.maxLvTxt.visible=!1,this.enoughMatFunc()):(this.v.maxLvTxt.visible=!0,this.v.onekeyBtn.visible=this.v.feedItem.visible=!1),this.v.notAvailableImg.visible=this.v.notActiveTxt.visible=this.v.notActiveLink.visible=!1,this.v.gradeImg.visible=this.v.gradeMsz.visible=!0,this.v.gradeMsz.value=n.toString(),this.v.gradeMsz.x=this.v.gradeImg.x-17*this.v.gradeMsz.value.length-5,this.v.tipBox.visible=this.v.tipBox1.visible=!1;var o=p.instance.getNextSkillByIdAndGrade(t,n),a=o[0];e=o[1],this.checkSkill(a,e,"阶")}else{this.v.onekeyBtn.label="激活";var r=p.instance.getGradeItem(t,1),l=p.instance.getGradeMoney(t,1);r&&r.length&&CommonUtil.getPropCountById(r[0])>=r[1]?this._condItem=r:l&&l.length?this._condItem=l:this._condItem=r,this._condItem&&this.enoughMatFunc(),this.v.notAvailableImg.visible=!0,this.v.maxLvTxt.visible=this.v.notActiveTxt.visible=this.v.notActiveLink.visible=!1,this.v.gradeImg.visible=this.v.gradeMsz.visible=!1,this.v.tipBox.visible=!0,this.v.tipTxt_1.text=(p.instance.getWay(t)||"").split("#")[0],this.v.tipTxt_2.text="+"+(p.instance.getGradeFight(t,1)||0),CommonUtil.chainArr([this.v.tipTxt_1,this.v.tipLbl_1,this.v.tipLbl_2,this.v.tipTxt_2],5),this.v.tipBox.centerX=0,this.v.tipBox1.visible=!1}this.showAttr(p.instance.getGradeAttr(t,n),p.instance.getGradeAttr(t,n+1))},i=n,h.BabyGradePanel=i}(modules=modules||{}),function(o){var S,e,t,i,M,w,n,P,s;function a(){return null!==e&&e.apply(this,arguments)||this}S=o.baby||(o.baby={}),t=o.common.FuncBtnGroup,i=o.common.BtnGroup,M=o.config.BabyCfg,w=o.bag.BagModel,n=o.bag.BagUtil,P=o.common.CustomClip,e=ui.BabyTonicViewUI,__extends(a,e),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._btnGroup=this.destroyElement(this._btnGroup),this._tonicGroup=this.destroyElement(this._tonicGroup),this.attrList.renderHandler&&(this.attrList.renderHandler.recover(),this.attrList.renderHandler=null),this._textItems&&(this._textItems.length=0,this._textItems=null),this._rpItems&&(this._rpItems.length=0,this._rpItems=null),e.prototype.destroy.call(this,t)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup=new t,this._btnGroup.setFuncIds(706,707,708,889),this._btnGroup.setBtns(this.cultureBtn,this.advancedBtn,this.practiceBtn,this.skillBtn),this._tonicGroup=new i,this._tonicGroup.setBtns(this.type0Btn,this.type1Btn,this.type2Btn,this.type3Btn),this._textItems=[this.type0Txt,this.type1Txt,this.type2Txt,this.type3Txt],this._rpItems=[this.redDotImg_0,this.redDotImg_1,this.redDotImg_2,this.redDotImg_3],this.redDotImg_0.visible=this.redDotImg_1.visible=this.redDotImg_2.visible=this.redDotImg_3.visible=!1,this.attrList.renderHandler=Handler.create(this,this.attrHandler,null,!1),this.sumAttrBtn.underline=!0,this.notActiveLink.underline=!0,this._btnClip=P.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.onekeyBtn.addChild(this._btnClip),this._btnClip.pos(-5,-8),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeMenuHandler),this.onAutoEvt(this._tonicGroup,"change",this,this.updateView),this.onAutoClick(this.onekeyBtn,this,this.onekeyHandler),this.onAutoClick(this.aboutBtn,this,this.tipsHandler),this.onAutoClick(this.notActiveLink,this,this.jumpHandler),this.onAutoClick(this.sumAttrBtn,this,this.sumAttrHandler),this.onAutoGlobalEvt("BABY_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateView),this.regAutoRP(this.cultureRP,["babyGrowthRP","babySkillBaseRP","babySkillHaloRP"]),this.regAutoRP(this.advancedRP,["babyGradeRP","babySkillTalentRP"]),this.regAutoRP(this.practiceRP,["babyTonicRP"]),this.regAutoRP(this.skillRP,["babyActiveSkillRP"])},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._isOpening=!0,this._autoSelect=!1,this._btnGroup.selectedIndex=2},a.prototype.jumpHandler=function(){WindowManager.instance.open(1079)},a.prototype.changeMenuHandler=function(){switch(this._btnGroup.selectedIndex){case 0:WindowManager.instance.open(1078);break;case 1:WindowManager.instance.open(1079);break;case 2:this.updateView();break;case 3:WindowManager.instance.open(1337)}},a.prototype.onekeyHandler=function(){this._condItem&&w.instance.getItemCountById(this._condItem[0])<this._condItem[1]?n.openLackPropAlert(this._condItem[0],this._condItem[1]):(S.BabyCtrl.instance.FairyDollSupplement(this._tonicGroup.selectedIndex),this._autoSelect=!0)},a.prototype.tipsHandler=function(){CommonUtil.alertHelp(19029)},a.prototype.sumAttrHandler=function(){S.BabyModel.instance.calcTonicAttrs()},a.prototype.attrHandler=function(t,e){var i=t.dataSource,n=o.config.AttrItemCfg.instance.getCfgById(i[0]),s=n[2];t.getChildByName("nameTxt").text=n[1]+"：",t.getChildByName("valueTxt").text=s?o.common.AttrUtil.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=i[2]>i[1],t.getChildByName("addTxt").text=i[2]>i[1]?s?o.common.AttrUtil.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+"":""},a.prototype.updateView=function(){this.powerNum.value=S.BabyModel.instance.getTonicTotalFight().toString();var t=S.BabyModel.instance.getTotalLevel();0===t?(this.notActiveTxt.visible=this.notActiveLink.visible=!0,this.feedItem.visible=this.onekeyBtn.visible=!1):(this.notActiveTxt.visible=this.notActiveLink.visible=!1,this.feedItem.visible=this.onekeyBtn.visible=!0);for(var e=S.BabyModel.instance.tonic,i=-1,n=0;n<e.length;++n){var s=M.instance.maxTonics[e[n][0]],o=M.instance.getTonicCfgByTypeAndLv(e[n][0],e[n][1]);e[n][1]<s&&(s=e[n][1]===o[1]&&t<(o=M.instance.getTonicCfgByTypeAndLv(e[n][0],e[n][1]+1))[3]?e[n][1]:o[1]),this._textItems[e[n][0]].text=e[n][1]+"/"+s;var a=o[2],r=w.instance.getItemCountById(a[0]);this._rpItems[n].visible=0<t&&e[n][1]<s&&r>=a[1],this._rpItems[n].visible&&-1===i&&(i=n)}if(this._isOpening)return this._isOpening=!1,void(this._tonicGroup.selectedIndex=-1<i?i:0);if(this._autoSelect&&-1<i&&i!=this._tonicGroup.selectedIndex&&!S.BabyModel.instance.checkTonicByType(this._tonicGroup.selectedIndex))return this._tonicGroup.selectedIndex=i,void(this._autoSelect=!1);this._condItem=null;var l=this._tonicGroup.selectedBtn;if(l){this.selectedImg.pos(l.x,l.y);var h=this._tonicGroup.selectedIndex,c=S.BabyModel.instance.tonic?S.BabyModel.instance.tonic[h]:null,p=c&&c[1]||0,u=M.instance.getTonicCfgByTypeAndLv(h,p);this._condItem=u[2];var d=w.instance.getItemCountById(this._condItem[0]);if(this.feedItem.dataSource=[this._condItem[0],0,0,null],this.feedItem._numTxt.visible=!0,this.feedItem._numTxt.text=d+"/"+this._condItem[1],this.feedItem._numTxt.color=d<this._condItem[1]?"#ff3e3e":"#50ff28",P.thisStop(this._btnClip),p===M.instance.maxTonics[h])this.maxLvTxt.visible=!0,this.feedItem.visible=this.onekeyBtn.visible=this.limitTxt.visible=!1;else if(p===u[1]){this.maxLvTxt.visible=!1;var y=M.instance.getTonicCfgByTypeAndLv(h,p+1);y&&t<y[3]?(this.onekeyBtn.visible=!1,this.limitTxt.visible=!0,this.limitTxt.text=CommonUtil.getNameByItemId(this._condItem[0])+"进补已达上限，仙龄总等级"+y[3]+"级后可突破上限"):this.limitTxt.visible=!1}else this.maxLvTxt.visible=this.limitTxt.visible=!1,d>=this._condItem[1]&&P.thisPlay(this._btnClip);for(var g=[],f={},_={},m=M.instance.getTonicCfgByType(h),v=0,b=0;b<m.length;++b){var T=m[b];if(!(p>T[1])){for(I=T[5],C=0;C<I.length;C+=2)-1===g.indexOf(I[C])&&g.push(I[C]),f[I[C]]=(f[I[C]]||0)+(p-v)*(I[C+1]||0);break}for(var I=T[5],C=0;C<I.length;C+=2)-1===g.indexOf(I[C])&&g.push(I[C]),f[I[C]]=(f[I[C]]||0)+(T[1]-v)*(I[C+1]||0);v=T[1]}for(b=v=0;b<m.length;++b){var x=m[b];if(!(p+1>x[1])){for(I=x[5],C=0;C<I.length;C+=2)-1===g.indexOf(I[C])&&g.push(I[C]),_[I[C]]=(_[I[C]]||0)+(p+1-v)*(I[C+1]||0);break}for(var I=x[5],C=0;C<I.length;C+=2)-1===g.indexOf(I[C])&&g.push(I[C]),_[I[C]]=(_[I[C]]||0)+(x[1]-v)*(I[C+1]||0);v=x[1]}g.sort(function(t,e){return t-e});var B=[];for(n=0;n<g.length;++n)B.push([g[n],f[g[n]],_[g[n]]]);this.attrList.dataSource=B}},s=a,S.BabyTonicPanel=s}(modules=modules||{}),function(t){var p,e,u,d,y,i;function n(){return null!==e&&e.apply(this,arguments)||this}p=t.baby||(t.baby={}),u=t.config.BabyCfg,d=t.config.SkillPureCfg,y=t.config.SkillCfg,e=ui.BabySkillAlertUI,__extends(n,e),n.prototype.destroy=function(){this.btnClip=this.destroyElement(this.btnClip),e.prototype.destroy.call(this)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this.btnClip=CommonUtil.creatEff(this,"btn_light",15),this.btnClip.pos(this.btn.x-5,this.btn.y-10),this.btnClip.visible=!1},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.activateOrUpHandler),this.onAutoGlobalEvt("BABY_INFO_UPDATE",this,this.updateInfo)},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._skillId=t},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},n.prototype.updateInfo=function(){if(this._skillId){var t=u.instance.getIdBySkill(1e4*this._skillId+1),e=u.instance.getTypeBySkill(1e4*this._skillId+1),i=p.BabyModel.instance.getSkillLvBySkillId(this._skillId),n=p.BabyModel.instance.getBabyById(t),s=d.instance.getCfgById(this._skillId),o=0<i?1e4*this._skillId+i:1e4*this._skillId+1,a=u.instance.getCfgBySkill(o),r=u.instance.getCfgBySkill(o+1),l=y.instance.getCfgById(o);switch(s&&s[6]&&(this.iconImg.skin="assets/icon/skill/"+s[6]+".png"),s&&s[1]&&(this.nameTxt.text=s[1]+"  Lv."+i),e){case 1:this.titleTxt.text="基础技能";break;case 2:this.titleTxt.text="光环技能";break;case 3:this.titleTxt.text="天赋技能";break;default:this.titleTxt.text="仙娃技能"}if(this.powerTxt.text="战力："+(0===i?0:l[3]),this.btn.visible=this.conditionTxt.visible=!0,0===i)s&&s[5]?this.nextLvDesc.text=CommonUtil.stringFormat(s[5],l[2]):this.nextLvDesc.text=l[2],this.curLvDesc.text="无",this.btn.label="激活",this.conditionTxt.text="激活条件："+(1<a[2]?"仙龄等级 Lv."+a[2]:"进阶等级 Lv."+a[3]),this.conditionTxt.color="#ED1100";else{var h=y.instance.getCfgById(o+1);h&&(s&&s[5]?this.nextLvDesc.text=CommonUtil.stringFormat(s[5],h[2]):this.nextLvDesc.text=h[2]),s&&s[5]?this.curLvDesc.text=CommonUtil.stringFormat(s[5],l[2]):this.curLvDesc.text=l[2],this.btn.label="升级",r?(this.conditionTxt.text="升级条件："+(1<r[2]?"仙龄等级 Lv."+r[2]:"进阶等级 Lv."+r[3]),this.conditionTxt.color="#ED1100"):(this.btn.visible=!1,this.conditionTxt.text="已满级",this.conditionTxt.color="#00AD35",this.nextLvDesc.text="已达最大等级")}var c=!1;0===i&&a?c=n&&a[2]<=n[1]&&a[3]<=n[2]:r&&(c=n&&r[2]<=n[1]&&r[3]<=n[2]),c?(this.btnClip.visible=!0,this.btnClip.play(),this.btn.gray=!1,this.btn.mouseEnabled=!0,this.conditionTxt.visible=!1):(this.btnClip.visible=!1,this.btnClip.stop(),this.btn.gray=!0,this.btn.mouseEnabled=!1,this.conditionTxt.visible=!0),this.btnClip.y=this.btn.y-10}},n.prototype.activateOrUpHandler=function(){if(this._skillId){var t=u.instance.getIdBySkill(1e4*this._skillId+1),e=u.instance.getTypeBySkill(1e4*this._skillId+1);p.BabyCtrl.instance.FairyDollSkillUp(t,this._skillId,e)}},i=n,p.BabySkillAlert=i}(modules=modules||{}),function(t){var U,n,O,G,s,o,F,N,z,r,l,h,e;function i(){var t=null!==n&&n.apply(this,arguments)||this;return t._curActiveTabSkillIndex=void 0,t._curRuneTabSkillIndex=void 0,t._curRuneIndex=void 0,t._param=void 0,t._smallStarPos1=[[21.5,80],[51.5,19],[81,80]],t._smallStarPos2=[[24.5,73],[51.5,22],[80,73]],t._bigStarPos1=[[18.5,122.5],[71.5,14],[123.5,122.5]],t._bigStarPos2=[[26.5,112.5],[74,21],[124.5,112.5]],t._effectPos1=[[-38,66],[15,-38],[67,66]],t._effectPos2=[[-30,54],[16,-38],[67,54]],t}U=t.baby||(t.baby={}),O=t.config.BabyCfg,G=t.common.CustomClip,s=t.common.FuncBtnGroup,o=t.common.BtnGroup,F=t.bag.BagModel,N=t.config.SkillCfg,z=t.config.SkillPureCfg,r=t.config.AttrSkillCfg,l=t.common.AttrUtil,h=t.config.AttrItemCfg,n=ui.BabyActiveSkillViewUI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=this.centerY=0,this._btnGroup=new s,this._btnGroup.setFuncIds(706,707,708,889),this._btnGroup.setBtns(this.cultureBtn,this.advancedBtn,this.practiceBtn,this.skillBtn),this._tabGroup=new o,this._tabGroup.setBtns(this.activeSkillTab,this.runeSkillTab),this._tabBoxArr=[this.activeLvlUpTab,this.runeLvlTab],this._activeTabSkillGroup=new o,this._activeTabSkillGroup.setBtns(this.activeTab_skill_0,this.activeTab_skill_1,this.activeTab_skill_2,this.activeTab_skill_3),this._activeTabSkillIconArr=[this.activeTab_skill_0,this.activeTab_skill_1,this.activeTab_skill_2,this.activeTab_skill_3],this._activeUpBtnClip=G.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.activeUpBtn.addChild(this._activeUpBtnClip),this._activeUpBtnClip.pos(-5,-8),this._activeUpBtnClip.scale(.8,.8),this._activeUpBtnClip.visible=!1,this._runeTabSkillGroup=new o,this._runeTabSkillGroup.setBtns(this.runeTab_skill_0,this.runeTab_skill_1,this.runeTab_skill_2,this.runeTab_skill_3),this._runeTabSkillIconArr=[this.runeTab_skill_0,this.runeTab_skill_1,this.runeTab_skill_2,this.runeTab_skill_3],this._runTabSkillIconRedArr=[this.runeTab_skill_red_0,this.runeTab_skill_red_1,this.runeTab_skill_red_2,this.runeTab_skill_red_3],this._runeGroup=new o,this._runeGroup.setBtns(this.rune_skill_0,this.rune_skill_1,this.rune_skill_2,this.rune_skill_3),this._runeIconArr=[this.rune_skill_0,this.rune_skill_1,this.rune_skill_2,this.rune_skill_3],this._runeUpBtnClip=G.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.runeUpBtn.addChild(this._runeUpBtnClip),this._runeUpBtnClip.pos(-5,-8),this._runeUpBtnClip.scale(.8,.8),this._runeUpBtnClip.visible=!1,this._runeSkillClip=G.createAndPlay("assets/effect/baby_light.atlas","baby_light",9,!1,!0,7),this.curRuneIconMc.addChild(this._runeSkillClip),this._runeSkillClip.scale(.6,.6),this._runeSkillClip.pos(18,26),this._runeSkillClip.visible=!1,this._runeSkillClipArr=[];for(var t=0;t<this._runeTabSkillIconArr.length;t++){var e=this._runeIconArr[t],i=G.createAndPlay("assets/effect/baby_light.atlas","baby_light",9,!1,!0,7);e.addChild(i),i.scale(.34,.34),i.pos(10,15),i.visible=!1,this._runeSkillClipArr[t]=i}for(this._runeSkillUpClipArr=[],t=0;t<3;t++)i=G.createAndPlay("assets/effect/baby_bomb.atlas","baby_bomb",6,!1,!1),this.curRuneIconMc.addChild(i),i.visible=!1,this._runeSkillUpClipArr[t]=i;this.attrList.renderHandler=Handler.create(this,this.attrHandler,null,!1),this.attrList1.renderHandler=Handler.create(this,this.attrHandler1,null,!1),this.sumAttrBtn.underline=!0,this.sumAttrBtn.typeset()},i.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._tabGroup=this.destroyElement(this._tabGroup),this._activeTabSkillGroup=this.destroyElement(this._activeTabSkillGroup),this._runeTabSkillGroup=this.destroyElement(this._runeTabSkillGroup),this._runeGroup=this.destroyElement(this._runeGroup),this._activeUpBtnClip=this.destroyElement(this._activeUpBtnClip),this._runeUpBtnClip=this.destroyElement(this._runeUpBtnClip),this.attrList.renderHandler&&(this.attrList.renderHandler.recover(),this.attrList.renderHandler=null),this.attrList1.renderHandler&&(this.attrList1.renderHandler.recover(),this.attrList1.renderHandler=null),n.prototype.destroy.call(this,t)},i.prototype.sumAttrHandler=function(){U.BabyModel.instance.calcActiveSkillAttrs()},i.prototype.attrHandler=function(t,e){this.attrListHandler(t,e)},i.prototype.attrHandler1=function(t,e){this.attrListHandler(t,e)},i.prototype.attrListHandler=function(t,e){var i=t.dataSource,n=i[3];if(1==n){var s=h.instance.getCfgById(i[0]);t.getChildByName("nameTxt").text=s[1]+"：";var o=i[1]?i[1]:0,a=i[2]?i[2]:0;t.getChildByName("valueTxt").text=s[2]?l.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=o<a,t.getChildByName("addTxt").visible=o<a,t.getChildByName("addTxt").text=s[2]?l.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+""}else 2==n&&(s=r.instance.getCfgById(i[0]),t.getChildByName("nameTxt").text=s[1]+"：",o=i[1]?i[1]:0,a=i[2]?i[2]:0,t.getChildByName("valueTxt").text=s[2]?l.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=o<a,t.getChildByName("addTxt").visible=o<a,t.getChildByName("addTxt").text=s[2]?l.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+"")},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeMenuHandler),this.onAutoEvt(this._tabGroup,"change",this,this.changeTabHandler),this.onAutoEvt(this._activeTabSkillGroup,"change",this,this.changeActiveUpHandler),this.onAutoClick(this.settingBtn,this,this.settingHandler),this.onAutoClick(this.activeUpBtn,this,this.activeUpHandler),this.onAutoEvt(this._runeTabSkillGroup,"change",this,this.changeRuneUpTabHandler),this.onAutoEvt(this._runeGroup,"change",this,this.changeRuneSkillUpHandler),this.onAutoClick(this.runeUpBtn,this,this.runeUpHandler),this.onAutoGlobalEvt("BABY_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView),this.onAutoGlobalEvt("BABY_UPDATE_RUNE_EFFECT",this,this.updateRuneEffect),this.onAutoClick(this.sumAttrBtn,this,this.sumAttrHandler),this.regAutoRP(this.cultureRP,["babyGrowthRP","babySkillBaseRP","babySkillHaloRP"]),this.regAutoRP(this.advancedRP,["babyGradeRP","babySkillTalentRP"]),this.regAutoRP(this.practiceRP,["babyTonicRP"]),this.regAutoRP(this.skillRP,["babyActiveSkillRP"])},i.prototype.setOpenParam=function(t){n.prototype.onOpened.call(this),this._param=t},i.prototype.onOpened=function(){if(n.prototype.onOpened.call(this),this._btnGroup.selectedIndex=3,1==this._param)this._tabGroup.selectedIndex=0;else if(2==this._param)this._tabGroup.selectedIndex=1;else{var t=U.BabyModel.instance.checkActiveRuneRed(void 0),e=U.BabyModel.instance.allActiveSkillRed();e||t?e?this._tabGroup.selectedIndex=0:t&&(this._tabGroup.selectedIndex=1):this._tabGroup.selectedIndex=0}},i.prototype.changeMenuHandler=function(){switch(this._btnGroup.selectedIndex){case 0:WindowManager.instance.open(1078);break;case 1:WindowManager.instance.open(1079);break;case 2:WindowManager.instance.open(1080);break;case 3:this.updateView()}},i.prototype.updateView=function(){this.updateActivieUpHandler(),this.updateRuneSkillUp(),0==this._tabIndex?this.power.value=U.BabyModel.instance.getTotalActiveSkillFight().toString():1==this._tabIndex&&(this.power.value=U.BabyModel.instance.getTotalRuneSkillFight().toString()),this.activeSkillTab_reb.visible=U.BabyModel.instance.allActiveSkillRed(),this.runeSkillTab_red.visible=U.BabyModel.instance.checkActiveRuneRed(void 0)},i.prototype.changeTabHandler=function(){0<=this._tabIndex&&(this._tabBoxArr[this._tabIndex].visible=!1),this._tabIndex=this._tabGroup.selectedIndex,this._tabBoxArr[this._tabIndex].visible=!0,0==this._tabIndex?(this._activeTabSkillGroup.selectedIndex=U.BabyModel.instance.getAllActiveSkillRedIndex(),this.power.value=U.BabyModel.instance.getTotalActiveSkillFight().toString(),this.bg1.visible=!0,this.bg2.visible=!1):1==this._tabIndex&&(this._runeTabSkillGroup.selectedIndex=U.BabyModel.instance.getActiveRedIndex(),this.power.value=U.BabyModel.instance.getTotalRuneSkillFight().toString(),this.bg1.visible=!1,this.bg2.visible=!0)},i.prototype.changeActiveUpHandler=function(){0<=this._curActiveTabSkillIndex&&(this._activeTabSkillIconArr[this._curActiveTabSkillIndex].getChildByName("select").visible=!1),this._curActiveTabSkillIndex=this._activeTabSkillGroup.selectedIndex,this._activeTabSkillIconArr[this._curActiveTabSkillIndex].getChildByName("select").visible=!0,this.updateActivieUpHandler()},i.prototype.updateActivieUpHandler=function(){if(0<=this._curActiveTabSkillIndex){for(var t=U.BabyModel.instance.getActiveSkillList(),e=0;e<t.length;e++){var i=t[e],n=i[0],s=i[1],o=z.instance.getCfgById(n),a=this._activeTabSkillIconArr[e],r=a.getChildByName("icon"),l=a.getChildByName("level"),h=a.getChildByName("level_img"),c=a.getChildByName("name"),p=a.getChildByName("red");p.visible=!1,r.skin="assets/icon/skill/"+o[6]+".png",l.text=i&&0<s?s.toString():"",h.visible=i&&0<s,c.text=o[1];var u=U.BabyModel.instance.getActivationFlagByActiveSkillId(n);r.gray=!u,U.BabyModel.instance.checkActiveSkillRed(n)&&(p.visible=!0)}var d=U.BabyModel.instance.getActiveSkillList()[this._curActiveTabSkillIndex][0],y=U.BabyModel.instance.getActiveSkillList()[this._curActiveTabSkillIndex][1],g=N.instance.getCfgById(1e4*d+(0==y?1:y)),f=O.instance.getCfgByActiveSkillById(1e4*d+(0==y?1:y+1)),_=z.instance.getCfgById(d);this.activeTitleTxt.text=_[1]+(0==y?"":" Lv."+y);var m=CommonUtil.stringFormat(_[5],g[2]);if(CommonUtil.setHTMLPro(this.activeHtml,"#ffffff","SimHei",24),this.activeHtml.style.leading=10,this.activeNeedMc.visible=!1,this._activeUpBtnClip.visible=!1,this.activeMaxTxt.visible=!1,this.activeUpBtn.visible=!0,this._activeSkillUpNeed=void 0,f){this.activeNeedMc.visible=!0;var v=f[3][0],b=f[3][1];this.activeNeedMc.getChildByName("icon").skin=CommonUtil.getIconById(v,!0);var T=F.instance.getItemCountById(v);this.activeNeedMc.getChildByName("txt").text=T+"/"+b,this.activeNeedMc.getChildByName("txt").color=b<=T?"#0ECF09":"#FF3E3E";var I=U.BabyModel.instance.getTotalLevel(),C=f[2];C<=I&&b<=T?(this._activeUpBtnClip.visible=!0,G.thisPlay(this._activeUpBtnClip)):G.thisStop(this._activeUpBtnClip),C<=I&&T<b&&(this._activeSkillUpNeed=v),I<C&&(0==y?(this.activeUpBtn.label="激活",m+="<span style='color:#ffec7c;font-size: 24px'>(仙龄总等级还差</span>",m+="<span style='color:#FF3E3E;font-size: 24px'>"+(C-I).toString()+"级</span>",m+="<span style='color:#ffec7c;font-size: 24px'>可解锁)</span>"):(this.activeUpBtn.label="升级",m+="<span style='color:#ffec7c;font-size: 24px'>(仙龄总等级还差</span>",m+="<span style='color:#FF3E3E;font-size: 24px'>"+(C-I).toString()+"级</span>",m+="<span style='color:#ffec7c;font-size: 24px'>可升级)</span>"))}else this.activeMaxTxt.visible=!0,this.activeUpBtn.visible=!1;this.activeUpBtn.label=0==y?"激活":"升级",this.activeHtml.innerHTML=m}},i.prototype.settingHandler=function(){WindowManager.instance.openDialog(1339)},i.prototype.activeUpHandler=function(){null==this._activeSkillUpNeed?U.BabyCtrl.instance.FairyDollActivaSkillUp(U.BabyModel.instance.getActiveSkillList()[this._curActiveTabSkillIndex][0]):WindowManager.instance.open(106,[this._activeSkillUpNeed,0,!0])},i.prototype.changeRuneUpTabHandler=function(){if(this._curRuneTabSkillIndex!=this._runeTabSkillGroup.selectedIndex){this._curRuneTabSkillIndex=this._runeTabSkillGroup.selectedIndex;var t=U.BabyModel.instance.getActiveSkillList()[this._curRuneTabSkillIndex][0];this._runeGroup.selectedIndex=U.BabyModel.instance.getActiveRuneRedIndex(t)}},i.prototype.changeRuneSkillUpHandler=function(){0<=this._curRuneIndex&&(this._runeIconArr[this._curRuneIndex].getChildByName("select").visible=!1),this._curRuneIndex=this._runeGroup.selectedIndex,this._runeIconArr[this._curRuneIndex].getChildByName("select").visible=!0,this.updateRuneSkillUp()},i.prototype.updateRuneSkillUp=function(){if(0<=this._curRuneIndex){for(var t=U.BabyModel.instance.getActiveSkillList(),e=0;e<t.length;e++){var i=t[e],n=i[0],s=z.instance.getCfgById(n);this._runeTabSkillIconArr[e].label=s[1],this._runTabSkillIconRedArr[e].visible=U.BabyModel.instance.checkActiveRuneRed(n);var o=i[2];if(this._curRuneTabSkillIndex==e)for(var a=0;a<o.length;a++){var r=o[a],l=r[0],h=r[1],c=N.instance.getCfgById(1e4*l+(0==h?1:h)),p=O.instance.getCfgByActiveSkillById(1e4*l+(0==h?1:h)),u=O.instance.getCfgByActiveSkillById(1e4*l+(h+1)),d=this._runeIconArr[a],y=d.getChildByName("name"),g=d.getChildByName("red"),f=d.getChildByName("icon"),_=z.instance.getCfgById(l);this._runeTabSkillIconArr[e].label=s[1],c&&(y.text=_[1],f.skin="assets/icon/fairchild_runes/big"+p[8]+".png"),u?(this._runeSkillClipArr[a].visible=!1,G.thisStop(this._runeSkillClipArr[a])):(this._runeSkillClipArr[a].visible=!0,G.thisPlay(this._runeSkillClipArr[a]));var m=String(p[9]).split("_"),v=Number(m[1]),b=d.getChildByName("select");1==v?(b.pos(-9,-10),b.skin="baby/selected_xwxt_xz1.png"):(b.pos(-13,-9),b.skin="baby/selected_xwxt_xz2.png");for(var T=0;T<3;T++)(k=d.getChildByName("star_"+(T+1))).visible=T<h,k.skin="assets/icon/fairchild_runes/"+p[9]+".png",1==v?k.pos(this._smallStarPos1[T][0],this._smallStarPos1[T][1]):k.pos(this._smallStarPos2[T][0],this._smallStarPos2[T][1]);g.visible=U.BabyModel.instance.checkRuneSkillRed(n,l)}}var I=U.BabyModel.instance.getActiveSkillList()[this._curRuneTabSkillIndex],C=I[2][this._curRuneIndex],x=C[0],B=C[1],S=N.instance.getCfgById(1e4*x+(0==B?1:B)),M=O.instance.getCfgByActiveSkillById(1e4*x+(0==B?1:B)),w=O.instance.getCfgByActiveSkillById(1e4*x+(0==B?1:B+1)),P=z.instance.getCfgById(x);this.curRuneNameTxt.skin="assets/icon/fairchild_runes/"+M[8]+".png",this.curRuneIcon.skin="assets/icon/fairchild_runes/big"+M[8]+".png";var A=String(M[9]).split("_"),R=Number(A[1]);for(T=0;T<3;T++){var k;(k=this.curRuneIconMc.getChildByName("star_"+(T+1))).visible=T<B,k.skin="assets/icon/fairchild_runes/"+M[9]+".png",1==R?k.pos(this._bigStarPos1[T][0],this._bigStarPos1[T][1]):k.pos(this._bigStarPos2[T][0],this._bigStarPos2[T][1])}if(this.runNeedMc.visible=!1,this._runeUpBtnClip.visible=!1,this.runeMaxTxt.visible=!1,this.runeUpBtn.visible=!0,this._runeSkillUpNeed=void 0,this._runeSkillClip.visible=!1,G.thisStop(this._runeSkillClip),w){this.runNeedMc.visible=!0;var E=w[3][0],D=w[3][1];this.runNeedMc.getChildByName("icon").skin=CommonUtil.getIconById(E,!0);var L=F.instance.getItemCountById(E);this.runNeedMc.getChildByName("txt").text=L+"/"+D,this.runNeedMc.getChildByName("txt").color=D<=L?"#0ECF09":"#FF3E3E",D<=L&&I[1]>=w[2]?(this._runeUpBtnClip.visible=!0,G.thisPlay(this._runeUpBtnClip)):(this._runeUpBtnClip.visible=!1,G.thisStop(this._runeUpBtnClip)),I[1]>=w[2]&&L<D&&(this._runeSkillUpNeed=E)}else this.runeMaxTxt.visible=!0,this.runeUpBtn.visible=!1,this._runeSkillClip.visible=!0,G.thisPlay(this._runeSkillClip);if(this.runeUpBtn.label=0==B?"激活":"升级",this.updateAttr(1==R),1==M[6]){this.specialImg.visible=!0,this.specialTxt.visible=!0,this.attrList.x=12,this.attrList.y=6,this.attrList1.centerY=-15;var H=CommonUtil.stringFormat(P[5],S[2]);CommonUtil.setHTMLPro(this.specialTxt,"#ffec7c","SimHei",24,"center"),this.specialTxt.style.leading=10,this.specialTxt.innerHTML=H}else this.specialImg.visible=!1,this.specialTxt.visible=!1,this.attrList.x=12,this.attrList.y=20,this.attrList1.centerY=0}},i.prototype.updateAttr=function(t){void 0===t&&(t=!0);var e=U.BabyModel.instance.getActiveSkillList()[this._curRuneTabSkillIndex],i=e[0],n=e[2][this._curRuneIndex][0],s=U.BabyModel.instance.getRuneSkillItemAttr(i,n),o=[];t&&(o=U.BabyModel.instance.getRuneSkillSkillAttr(i,n));var a=s.concat(o),r=[];a.forEach(function(t){127!=t[0]&&128!=t[0]&&129!=t[0]&&130!=t[0]&&131!=t[0]&&r.push(t)}),4<r.length?(this.attrList1.visible=!1,this.attrList.visible=!0,this.attrList.dataSource=r):(this.attrList1.visible=!0,this.attrList.visible=!1,this.attrList1.dataSource=r)},i.prototype.runeUpHandler=function(){if(null==this._runeSkillUpNeed){var t=U.BabyModel.instance.getActiveSkillList()[this._curRuneTabSkillIndex],e=t[2][this._curRuneIndex];U.BabyCtrl.instance.FairyDollRuneSkillUp(t[0],e[0])}else WindowManager.instance.open(106,[this._runeSkillUpNeed,0,!0])},i.prototype.updateRuneEffect=function(t){var e=U.BabyModel.instance.getActiveSkillList()[this._curRuneTabSkillIndex][2][this._curRuneIndex][0],i=O.instance.getCfgByActiveSkillById(1e4*e+(0==t?1:t)),n=String(i[9]).split("_"),s=Number(n[1]),o=this._runeSkillUpClipArr[t-1];1==s?o.pos(this._effectPos1[t-1][0],this._effectPos1[t-1][1]):o.pos(this._effectPos2[t-1][0],this._effectPos2[t-1][1]),o.visible=!0,G.thisPlay(o)},e=i,U.BabyActiveSkillPanel=e}(modules=modules||{}),function(c){var p,i,r,l,t;function e(){return null!==i&&i.apply(this,arguments)||this}p=c.baby||(c.baby={}),r=game.map.MapUtils,l=c.notice.SystemNoticeManager,i=ui.BabyActiveSkillSetAlertUI,__extends(e,i),e.prototype.initialize=function(){i.prototype.initialize.call(this),this._skillIconArr=[this.skill_0,this.skill_1,this.skill_2,this.skill_3]},e.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BABY_ACTIVE_SKILL_SET_UPDATE",this,this.updateView),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)},e.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},e.prototype.setIcon=function(t,e){var i=p.BabyModel.instance.getDataByActiveSkillId(e),n=i[1],s=this._skillIconArr[t],o=s.getChildByName("level_img"),a=s.getChildByName("level"),r=s.getChildByName("name"),l=s.getChildByName(t.toString()),h=c.config.SkillPureCfg.instance.getCfgById(e);l.skin="assets/icon/skill/"+h[6]+".png",a.text=i&&0<n?n.toString():"",o.visible=i&&0<n,r.text=h[1],l.gray=0==n},e.prototype.updateView=function(){for(var t=0;t<this._skillIconArr.length;t++)(n=(i=this._skillIconArr[t]).getChildByName(t.toString())).centerX=n.centerY=0;for(t=0;t<this._skillIconArr.length;t++)(i=this._skillIconArr[t])&&((n=i.getChildByName(t.toString())).off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),n.stopDrag());var e=p.BabyModel.instance.activeSkillSetList;for(this._newList=[],t=0;t<e.length;t++){var i,n,s=e[t];this.setIcon(t,s),this._newList.push(s),(n=(i=this._skillIconArr[t]).getChildByName(t.toString())).centerX=n.centerY=0,n.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}var o=p.BabyModel.instance.getActiveSkillList(),a=e.length;for(t=0;t<o.length;t++)s=o[t][0],-1==e.indexOf(s)&&(this.setIcon(a,s),this._newList.push(s),a++)},e.prototype.onMouseDown=function(t){if(""!=t.target.name){for(var e=Number(t.target.name),i=0;i<this._skillIconArr.length;i++){var n=this._skillIconArr[i];n.zOrder=i==e?10:1}t.target.startDrag()}},e.prototype.onMouseUp=function(t){if(""!=t.target.name){t.target.stopDrag();for(var e=Number(t.target.name),i=0;i<this._skillIconArr.length;i++){var n=this._skillIconArr[i];if(i!=e){var s=p.BabyModel.instance.getActivationFlagByActiveSkillId(this._newList[i]);if(r.testDistance(this.mouseX,this.mouseY,n.x,n.y,n.width/2)){s?(this.swapArray(this._newList,e,i),this.skillSet()):l.instance.addNotice("技能尚未激活",!0);break}}}}for(i=0;i<this._skillIconArr.length;i++){var o=this._skillIconArr[i],a=o.getChildByName(i.toString());o&&a&&(a.centerX=a.centerY=0)}},e.prototype.skillSet=function(){for(var t=[],e=0;e<this._newList.length;e++){var i=this._newList[e];p.BabyModel.instance.getActivationFlagByActiveSkillId(i)&&t.push(i)}p.BabyCtrl.instance.FairyDollActivaSkillSet(t)},e.prototype.swapArray=function(t,e,i){return t[e]=t.splice(i,1,t[e])[0],t},e.prototype.close=function(t,e){i.prototype.close.call(this,t,e),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onMouseUp)},e.prototype.destroy=function(){i.prototype.destroy.call(this),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onMouseUp)},t=e,p.BabyActiveSkillSetAlert=t}(modules=modules||{}),function(l){var h,c,p,u,e,i,o,n,d,t;function s(){return null!==c&&c.apply(this,arguments)||this}h=l.foreign_boss_panel||(l.foreign_boss_panel={}),p=l.bag.BaseItem,u=l.config.ForeignBossCfg,e=l.foreign_boss_panel.ForeignBossCtrl,i=l.bag.BagUtil,o=l.common.CustomClip,n=l.redPoint.RedPointCtrl,d=l.common.SimpleList,c=ui.ForeignBossViewUI,__extends(s,c),s.prototype.initialize=function(){c.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnList=d.create(l.forbiddenBoss.BossBtnItem,158,172,2,1,-10,0),this._btnList.pos(25,982),this._btnList.size(666,172),this.addChild(this._btnList),this._btnList.datas=[41,246,42,723,777],this._model=h.ForeignBossModel.instance,this._itemList=[];var t=u.instance.getCfgById(5)[1];if(t)for(var e=0,i=t.length/2;e<i;e++){var n=new p;n.pos(212+115*e,665),this.addChild(n),this._itemList.push(n);var s=t[2*e],o=t[2*e+1];n.dataSource=[s,o,0,null]}this._helpNum=h.ForeignBossModel.instance.maxHelpNum,this._lessItem={},this._lessItem[3]=this._model.getLossItem(3),this._lessItem[4]=this._model.getLossItem(4);var a=this._lessItem[3][0],r=this._lessItem[4][0];this.iconImg.skin=CommonUtil.getIconById(a),this.iconImg2.skin=CommonUtil.getIconById(r)},s.prototype.onOpened=function(){c.prototype.onOpened.call(this),this._btnList.selectedIndex=3,this._btnList.scrollToIndex(3),this.fameBtn.selected=this._model.selectFame,this.showDrawNum(),this.setLossItem(),this.showenterEff(),this.setAutoCallBtn()},s.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoGlobalEvt("FOREIGN_BOSS_INFO",this,this.showDrawNum),this.onAutoGlobalEvt("FOREIGN_BOSS_BOSSLIST",this,this.showenterEff),this.onAutoGlobalEvt("FOREIGN_BOSS_AUTOCALL",this,this.setAutoCallBtn),this.onAutoEvt(this._btnList,"select",this,this.selectHandler),this.onAutoClick(this.fameBtn,this,this.fameBtnHandler),this.onAutoClick(this.helpBtn1,this,this.onClick),this.onAutoClick(this.helpBtn2,this,this.onClick),this.onAutoClick(this.awardBtn,this,this.onClick),this.onAutoClick(this.rankBtn,this,this.onClick),this.onAutoClick(this.callBtn,this,this.callBossHandler),this.onAutoClick(this.tipBtn,this,this.helpHandler),this.onAutoClick(this.autoCallBtn,this,this.onAutoCall),this.regAutoRP(this.foreignTaskRP,["foreignTaskRP"]),this.regAutoRP(this.foreignBossComRP,["foreignBossComRP"]),this.regAutoRP(this.foreignBossFameRP,["foreignBossFameRP"]),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setLossItem)},s.prototype.setAutoCallBtn=function(){this.autoCallBtn.selected=this._model.autoCall},s.prototype.onAutoCall=function(){if(CommonUtil.whetherInCopy())l.notice.SystemNoticeManager.instance.addNotice("请先退出当前场景后再进行自动召唤",!0);else{var t=!this._model.autoCall;t?(this._model.autoCall=!0,e.instance.getForeignBossList(3)):this._model.setAutoCall(t,!0)}},s.prototype.onClick=function(t){var e,i,n=t.target;n==this.rankBtn?e=1132:n==this.awardBtn?e=1130:n==this.helpBtn1?(e=1129,i=h.ForeignBossModel.CALL_BOSS):n==this.helpBtn2&&(e=1129,i=h.ForeignBossModel.CALL_FAME_TYPE),WindowManager.instance.open(e,i)},s.prototype.selectHandler=function(){switch(this._btnList.selectedIndex){case 0:WindowManager.instance.open(75);break;case 1:WindowManager.instance.open(400);break;case 2:WindowManager.instance.open(80);break;case 3:break;case 4:WindowManager.instance.open(1175)}3!=this._btnList.selectedIndex&&(this._btnList.selectedIndex=3)},s.prototype.callBossHandler=function(){if(this._canCall){var t=void 0;t=this._model.selectFame?h.ForeignBossModel.CALL_FAME_TYPE:h.ForeignBossModel.CALL_TYPE,e.instance.foreignBossCall(t)}else i.openLackPropAlert(this._lessItemId,-this._lessNum)},s.prototype.fameBtnHandler=function(){var t=!this._model.selectFame;this.fameBtn.selected=t,this._model.selectFame=t,GlobalData.dispatcher.event("FOREIGN_BOSS_UPDATE"),this.setLossItem()},s.prototype.setLossItem=function(){var t,e,i=this._lessItem[3][0],n=this._lessItem[3][1],s=l.bag.BagModel.instance.getItemCountById(i);this.lossTxt.text=s+"/"+n,t=n<=s,this.lossTxt.color=t?"#148b14":"#fb221b";var o=this._lessItem[4][0],a=this._lessItem[4][1],r=l.bag.BagModel.instance.getItemCountById(o);this.lossTxt2.text=r+"/"+a,e=a<=r,this.lossTxt2.color=e?"#148b14":"#fb221b",this._model.selectFame?(this._canCall=e,this._lessItemId=o,this._lessNum=a-r,this.iconImg.visible=!1,this.lossTxt.visible=!1):(this._canCall=t,this._lessItemId=i,this._lessNum=n-s,this.iconImg.visible=!0,this.lossTxt.visible=!0),this.showEffect(this._canCall)},s.prototype.showDrawNum=function(){this.helpTxt.text=this._helpNum-this._model.helpCount+"/"+this._helpNum,this._helpNum<=this._model.helpCount?this.helpTxt.color="#fb221b":this.helpTxt.color="#148b14"},s.prototype.showEffect=function(t){t?(this._btnClip||(this._btnClip=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.callBtn.x-5,this.callBtn.y-8),this._btnClip.scale(.96,.9)),this._btnClip.visible=!0,this._btnClip.play()):this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1)},s.prototype.showenterEff=function(){var t=n.instance.getRPProperty("foreignBossComRP");this._enterClip=this.enterEffect(this._enterClip,t,"effect_foreignBoss",this.helpBtn1.x,this.helpBtn1.y);var e=n.instance.getRPProperty("foreignBossFameRP");this._enterFameClip=this.enterEffect(this._enterFameClip,e,"effect_foreignBoss_fame",this.helpBtn2.x,this.helpBtn2.y)},s.prototype.enterEffect=function(t,e,i,n,s){return void 0===i&&(i=null),void 0===n&&(n=0),void 0===s&&(s=0),e?(t||(t=o.createAndPlay("assets/effect/"+i+".atlas",i,6,!1),this.addChild(t),t.pos(n,s)),t.visible=!0,t.play()):t&&(t.stop(),t.visible=!1),t},s.prototype.helpHandler=function(){CommonUtil.alertHelp(19031)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._model=null,this._btnClip=this.destroyElement(this._btnClip),this._btnList=this.destroyElement(this._btnList),this._itemList=this.destroyElement(this._itemList),this._enterClip=this.destroyElement(this._enterClip),this._enterFameClip=this.destroyElement(this._enterFameClip),c.prototype.destroy.call(this,t)},s.prototype.close=function(){c.prototype.close.call(this),this.showEffect(!1),this.enterEffect(this._enterFameClip,!1),this.enterEffect(this._enterClip,!1)},t=s,h.ForeignBossPanel=t}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.foreign_boss_panel||(t.foreign_boss_panel={}),n=t.common.CustomList,s=t.notice.SystemNoticeManager,i=ui.ForeignBossHelpAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create("v",67,113,580,671,e.ForeignBossHelpItem),this.addChild(this._list)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FOREIGN_BOSS_BOSSLIST",this,this.showUI),this.onAutoClick(this.updBtn,this,this.onClick)},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type=t,this.requestBoss()},a.prototype.onClick=function(){this._time>Browser.now()?s.instance.addNotice("操作过于频繁",!0):(this._upd=!0,this.requestBoss())},a.prototype.requestBoss=function(){e.ForeignBossCtrl.instance.getForeignBossList()},a.prototype.showUI=function(){var t=e.ForeignBossModel.instance.helpList[this._type];t&&(t.sort(this.setsort.bind(this)),this._list.datas=t,this.showBg(0==t.length)),this._upd&&(this._upd=!1,s.instance.addNotice("刷新成功"),this._time=Browser.now()+800)},a.prototype.setsort=function(t,e){var i=t[4],n=t[3],s=100*t[6]>>0;i==n&&(s+=1e3);var o=e[4],a=e[3],r=100*e[6]>>0;return o==a&&(r+=1e3),1e3<r&&s<1e3||r<1e3&&1e3<s?s-r:r<s?-1:1},a.prototype.showBg=function(t){this.tipBg.visible=t,this.tipTxt.visible=t},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.ForeignBossHelpAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){return i.call(this)||this}e=t.foreign_boss_panel||(t.foreign_boss_panel={}),n=laya.events.Event,s=t.common.BtnGroup,o=t.common.CustomList,a=t.config.ForeignBossTaskCfg,r=t.foreign_boss_panel.ForeignBossModel,i=ui.ForeignBossAwardAlertUI,__extends(h,i),h.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new o,this._list.width=590,this._list.height=656,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=e.ForeignBossAwardItem,this._list.x=67,this._list.y=117,this.addChild(this._list),this._btnGroup=new s,this._btnGroup.setBtns(this.callBtn,this.killBtn)},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,n.CHANGE,this,this.changeHandler),this.onAutoGlobalEvt("FOREIGN_BOSS_TASK",this,this.showUI)},h.prototype.changeHandler=function(){this._btnGroup.selectedIndex+1==r.CALL_BOSS?this.titleTxt.text="召唤奖励":this.titleTxt.text="击败奖励",this.showUI()},h.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this.showUI()},h.prototype.showUI=function(){var t=this._btnGroup.selectedIndex+1,e=a.instance.getCfgList(t);e.sort(this.sortFunc.bind(this)),this._list.datas=e,this.foreigcallRP.visible=r.instance.taskRP[r.CALL_BOSS],this.foreigkillRP.visible=r.instance.taskRP[r.KILL_BOSS]},h.prototype.sortFunc=function(t,e){var i,n=t[0],s=e[0],o=r.instance;return i=t[1]==r.CALL_BOSS?o.callNum:o.killNum,o.drawList[n]?n+=1e3:t[2]<=i&&(n-=1e3),o.drawList[s]?s+=1e3:e[2]<=i&&(s-=1e3),n-s},h.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),i.prototype.destroy.call(this)},l=h,e.ForeignBossAwardAlert=l}(modules=modules||{}),function(t){var e,i;function n(){this._dic={},this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table=GlobalData.getConfig("foreign_boss_rank")},n.prototype.getCfgById=function(t){return this._table[t]},n.prototype.getCfgList=function(t){var e;if(!this._dic[t]){e=[];for(var i=void 0,n=0,s=this._table.length;n<s;n++)if((i=this._table[n])[1]==t)for(var o=i[2][0],a=i[2][1];o<=a;o++)e[o-1]=i;this._dic[t]=e}return e=this._dic[t]},i=n,e.ForeignBossRankCfg=i}(modules=modules||{}),function(h){var c,t,e,i,n,p,s,o;function a(){return null!==t&&t.apply(this,arguments)||this}c=h.foreign_boss_panel||(h.foreign_boss_panel={}),e=laya.events.Event,i=h.common.BtnGroup,n=h.common.CustomList,p=h.config.ForeignBossRankCfg,s=h.config.ForeignBossCfg,t=ui.RotaryTableSoaringRankAwardAlertUI,__extends(a,t),a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),t.prototype.destroy.call(this)},a.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=new n,this._list.width=589,this._list.height=481,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.itemRender=c.ForeignBossRankItem,this._list.x=36,this._list.y=172,this.addChild(this._list),this._btnGroup=new i,this._btnGroup.setBtns(this.rankBtn,this.gradeBtn),CommonUtil.setHTMLPro(this.StatementHTML,"#00ad35","SimHei",22,"center"),this.rankBtn.label="个人排行",this.gradeBtn.label="战队排行",this.TipText.text="排名奖励在周日晚上22:00通过邮件发送",this._score1=s.instance.getCfgById(9)[1][0],this._score2=s.instance.getCfgById(10)[1][0],this._score3=s.instance.getCfgById(8)[1][0],this._gotoImg=new Laya.Image,this._gotoImg.skin="common/btn_tonyong_26.png",this._gotoImg.pos(555,683),this.addChild(this._gotoImg),this._gotoImg.visible=!1},a.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this.onChange()},a.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,e.CHANGE,this,this.onChange),this.onAutoGlobalEvt("FOREIGN_BOSS_RANK",this,this.showUI),this.onAutoClick(this._gotoImg,this,this.openWarband)},a.prototype.onChange=function(){var t=this._btnGroup.selectedIndex+1;c.ForeignBossCtrl.instance.getForeignBossRank(t),t==c.ForeignBossModel.KILL_BOSS?(this._gotoImg.visible=!0,this.titleTxt.text="战队排行"):(this._gotoImg.visible=!1,this.titleTxt.text="异域排行")},a.prototype.openWarband=function(){WindowManager.instance.open(1133)},a.prototype.showUI=function(){var t=this._btnGroup.selectedIndex+1,e=p.instance.getCfgList(t);this._list.datas=e;var i,n,s,o=t==c.ForeignBossModel.CALL_BOSS,a=0,r=0,l=c.ForeignBossModel.instance.selfRank[t];l&&(a=l[1],r=l[0][2]),s=o?(i="个人排名:",n="召唤积分:","召唤普通BOSS获得"+this._score1+"积分，召唤传说BOSS获得"+this._score2+"积分"):(i="战队排名:",n="战队击败:","个人击败数量达到"+this._score3+"可领取战队排行奖励"),this.StatementHTML.innerHTML=s,o||-1!==h.warband.WarbandModel.instance.leaderId?(this.myIntegralText.text=n+a,this.myRankNumText.text=0==r?i+"未上榜":i+r):(this.myIntegralText.text=n+"无",this.myRankNumText.text=i+"无")},o=a,c.ForeignBossRankAlert=o}(modules=modules||{}),function(i){var n,t,e,s;function o(){return t.call(this)||this}n=i.foreign_boss_panel||(i.foreign_boss_panel={}),e=i.common.CustomList,t=ui.ForeignBossWarbandRankAlertUI,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=new e,this._list.width=580,this._list.height=524,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=1,this._list.itemRender=n.ForeignBossWarbandRankItem,this._list.x=64,this._list.y=182,this.addChild(this._list)},o.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("FOREIGN_BOSS_RANK",this,this.showUI)},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.tipBg.visible=!1,this.tipTxt.visible=!1,n.ForeignBossCtrl.instance.getForeignBossRank(3)},o.prototype.showUI=function(){var t=n.ForeignBossModel.instance.selfRank[3][1];if(this.countTxt.text="我的击败:"+t,-1===i.warband.WarbandModel.instance.leaderId)return this.tipBg.visible=!0,void(this.tipTxt.visible=!0);var e=n.ForeignBossModel.instance.rankList[3];this._list.datas=e},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),t.prototype.destroy.call(this)},s=o,n.ForeignBossWarbandRankAlert=s}(modules=modules||{}),function(t){var a,e,i;function n(){var t=e.call(this)||this;return t.layer=9,t.mouseThrough=!0,t}a=t.foreign_boss_panel||(t.foreign_boss_panel={}),e=ui.ForeignBossBroadcastViewUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.descHtml,"#ffffff","SimHei",24,"center"),this.anchorX=.5,this.y=290,this.txt.underline=!0},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.txt,this,this.openWin)},n.prototype.openWin=function(){WindowManager.instance.open(1135),WindowManager.instance.open(1129,this._playType)},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._isPlay?t==a.ForeignBossModel.CALL_FAME_TYPE?this.showUI():t==a.ForeignBossModel.CALL_TYPE&&this._playType==a.ForeignBossModel.CALL_TYPE&&this.showUI():this.showUI()},n.prototype.showUI=function(){var t=a.ForeignBossModel.instance.broadcastList.shift();if(t){this.tween();var e=t[0];this._playType=e;var i=t[1],n="传说";e==a.ForeignBossModel.CALL_TYPE&&(n="普通");var s,o=i+"成功召唤"+n+"异域BOSS";this.descHtml.innerHTML=o,s=e==a.ForeignBossModel.CALL_FAME_TYPE?(this._bg.pos(0,-9),"foreignBoss/image_yyboss_cs.png"):(this._bg.pos(32,66),"foreignBoss/image_yyboss_pt.png"),this._bg.skin=s}else this.callBack()},n.prototype.tween=function(){this.x=0,this._tween&&this._tween.stop();var t=CommonConfig.viewWidth/2>>0;this._tween=TweenJS.create(this).to({x:t},1e3).start(),Laya.timer.once(3e3,this,this.tween2,null,!0),this._isPlay=!0},n.prototype.tween2=function(){this._tween=TweenJS.create(this).to({x:CommonConfig.viewWidth+this.width},1e3).start().onComplete(this.callBack.bind(this))},n.prototype.callBack=function(){0<a.ForeignBossModel.instance.broadcastList.length?this.showUI():(this._isPlay=!1,this._playType=-1,this.close())},n.prototype.destroy=function(){this._tween&&(this._tween.stop(),this._tween=null),e.prototype.destroy.call(this)},i=n,a.ForeignBossBroadcastView=i}(modules=modules||{}),function(t){var e,i,s,o,a,n,r,l,h,c;function p(){return null!==i&&i.apply(this,arguments)||this}e=t.foreign_boss_panel||(t.foreign_boss_panel={}),s=t.player.PlayerModel,o=t.scene.SceneModel,a=t.config.SceneCfg,n=t.bag.BaseItem,r=t.common.CommonUtil,l=t.config.SceneForeignBossCfg,h=t.foreign_boss_panel.ForeignBossModel,i=ui.ForeigBossRBViewUI,__extends(p,i),p.prototype.destroy=function(){this._bagItem=this.destroyElement(this._bagItem),this._nameTxts=this.destroyElement(this._nameTxts),this._damageTxts=this.destroyElement(this._damageTxts),i.prototype.destroy.call(this)},p.prototype.initialize=function(){i.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=260,this._nameTxts=[this.nameTxt1,this.nameTxt2,this.nameTxt3,this.nameTxt4,this.nameTxt5],this._damageTxts=[this.damageTxt1,this.damageTxt2,this.damageTxt3,this.damageTxt4,this.damageTxt5],this.layer=3,this.closeByOthers=!1},p.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.expandBtn,this,this.expandHandler),this.onAutoGlobalEvt("DUNGEON_BOSS_RANKS_UPDATE",this,this.updateRank),this.onAutoGlobalEvt("FOREIGN_BOSS_CALL_NAME",this,this.showcallName)},p.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.isExpand=!0,this.updateRank(),this.updateAward()},p.prototype.updateAward=function(){var t=o.instance.enterScene[0],e=a.instance.getCfgById(t);if(this._sceneType=e[7],41==this._sceneType){this.addItem();var i=l.instance.getCfgById(t),n=void 0;n=h.instance.currentType==h.CALL_BOSS?i[3]:i[5],this._bagItem.dataSource=[n[0],n[1],0,null],this.showcallName()}},p.prototype.showcallName=function(){var t=h.instance.callBossName,e=s.instance.roleName,i=(this.ownerNameTxt.text=t)!=e;this.nameTxt6.visible=i,this.damageTxt6.visible=i},p.prototype.addItem=function(){this._bagItem||(this._bagItem=new n,this.addChild(this._bagItem),this._bagItem.pos(370,180,!0))},p.prototype.expandHandler=function(){this.isExpand=!this._isExpand},Object.defineProperty(p.prototype,"isExpand",{set:function(t){this._isExpand=t,this._isExpand?(this.line3.visible=this.line4.visible=this.line5.visible=this.line6.visible=!0,this.nameTxt2.visible=this.nameTxt3.visible=this.nameTxt4.visible=this.nameTxt5.visible=!0,this.damageTxt2.visible=this.damageTxt3.visible=this.damageTxt4.visible=this.damageTxt5.visible=!0,this.bgImg.y=54,this.bgImg.height=268,this.expandBtn.skin="common/btn_tonyong_28.png"):(this.line3.visible=this.line4.visible=this.line5.visible=this.line6.visible=!1,this.nameTxt2.visible=this.nameTxt3.visible=this.nameTxt4.visible=this.nameTxt5.visible=!1,this.damageTxt2.visible=this.damageTxt3.visible=this.damageTxt4.visible=this.damageTxt5.visible=!1,this.bgImg.y=186,this.bgImg.height=136,this.expandBtn.skin="common/btn_tonyong_29.png"),this.damageTxt.y=this.bgImg.y+16,this.expandBtn.y=this.bgImg.y+18,this.line1.y=this.bgImg.y+45,this.line2.y=this.bgImg.y+80,this.nameTxt1.y=this.damageTxt1.y=this.bgImg.y+55},enumerable:!0,configurable:!0}),p.prototype.updateRank=function(){var t=DungeonModel.instance.ranks;if(!t){for(var e=0,i=this._nameTxts.length;e<i;e++)this._damageTxts[e].text="",this._nameTxts[e].text=this._damageTxts[e].text="";return this.damageTxt6.text="",void(this.ownerNameTxt.text="")}for(e=0,i=this._nameTxts.length;e<i;e++)t.length>e&&t[e]&&t[e][0]?(this._nameTxts[e].text=t[e][0][2]+"."+t[e][0][1],this._damageTxts[e].text=r.bigNumToString(t[e][1])):this._nameTxts[e].text=this._damageTxts[e].text="";var n=!1;for(e=0,i=t.length;e<i;e++)if(t[e]&&t[e][0]&&t[e][0][0]===s.instance.actorId){this.damageTxt6.text=r.bigNumToString(t[e][1]),n=!0;break}n||(this.damageTxt6.text="0")},c=p,e.ForeignBossRBView=c}(modules=modules||{}),function(y){var r,l,t,g,e;function i(){return null!==l&&l.apply(this,arguments)||this}r=y.commonAlert||(y.commonAlert={}),t=y.beast_equipment.BeastEquipBaseAlert,g=y.chat.ChatModel,l=t,__extends(i,l),i.prototype.initialize=function(){l.prototype.initialize.call(this),this.isNeedContrast=!0,this.yuanshenBox.visible=!0},i.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this.item=t},Object.defineProperty(i.prototype,"item",{set:function(t){var e=t,i=e[0];this.teamIdTest=i;var n=y.common.CommonUtil.getPartById(i);this.myEquip=y.yuanShen.YuanShenModel.instance.getEquipByTypePart(y.yuanShen.YuanShenUtil.getTypeById(i),n),this.setBaseInfo(e),this.setBaseAttr(e);var s=e[3],o=this.setBestAttr(s),a=0;if(this.bestAttrBox.height=30*o+40,0==o?this.bestAttrBox.visible=!1:(this.bestAttrBox.visible=!0,a=this.setConHeight(this.bestAttrBox.y+this.bestAttrBox.height)),y.yuanShen.YuanShenUtil.isYuanshenEquip(i)){this.yuanshenBox.visible=!0;var r=y.yuanShen.YuanShenUtil.getTypeById(i),l=g.instance.otherPlayerInfo[35][r-1][2],h=y.yuanShen.YuanShenModel.instance.getInfoById(r)[8],c=this.setYuanshenSuit(null,l),p=this.setYuanshenSuit("my",h);this.yuanshenBox.height=this.suitTxt.y+(c<p?p:c),this.yuanshenBox.y=a+5,a=this.setConHeight(this.yuanshenBox.y+this.yuanshenBox.height),this.fulingBox.y=a+5;var u=this.setXiLian(t[3][3]?t[3][3]:[]),d=this.setXiLian(this.myEquip?this.myEquip[3][3]:[],!0);(1<u||1<d)&&(this.fulingBox.visible=!0),this.fulingBox.height=d<u?u:d,a=this.setConHeight(this.fulingBox.y+this.fulingBox.height)}else this.yuanshenBox.visible=this.fulingBox.visible=!1;this.elseBox.y=this.conBox.y+a+8,this.setRank(i)},enumerable:!0,configurable:!0}),i.prototype.setBaseInfo=function(t){l.prototype.setBaseInfo.call(this,t);var e=0,i=0;this.myEquip&&(e=this.myEquip[3][6],i=this.myEquip[3][7]);var n=t[3][6],s=t[3][7],o=n-e;r.EquipAlertUtil.judgeDiff(o,this.myScoreTxt,this.scoreImg);var a=s-i;r.EquipAlertUtil.judgeDiff(a,this.mySumScoreTxt,this.sumScoreImg)},i.prototype.setBaseAttr=function(t){l.prototype.setBaseAttr.call(this,t);var e=t[0],i=y.config.ItemEquipCfg.instance.getItemCfgById(e)[8];if(this.myEquip)for(var n=y.config.ItemEquipCfg.instance.getItemCfgById(this.myEquip[0])[8],s=0;s<.5*n.length;s++)this.baseAttrImgs[s].visible=!0,r.EquipAlertUtil.judgeDiff(i[2*s+1]-n[2*s+1],this.myBaseAttrTxts[s],this.baseAttrImgs[s]);else for(s=0;s<this.myBaseAttrTxts.length;s++)this.myBaseAttrTxts[s].color="#cbcade",this.myBaseAttrTxts[s].text="无",this.baseAttrImgs[s].visible=!1},i.prototype.setBestAttr=function(t){var e,i=l.prototype.setBestAttr.call(this,t);if(this.myEquip){var n=this.myEquip[3];e=l.prototype.setBestAttr.call(this,n,"my")}else e=l.prototype.setBestAttr.call(this,null,"my");return e<=i?i:e},e=i,r.OtherYuanShenEquipAlert=e}(modules=modules||{}),function(t){var s,e,i,n,o,a,r,l,h;function c(){return null!==e&&e.apply(this,arguments)||this}s=t.teamBattle||(t.teamBattle={}),i=ui.TeamBattleViewUI,n=t.config.SceneCopyTeamCfg,o=t.common.CustomClip,a=t.common.CommonUtil,r=t.rename.RenameModel,l=t.common.BtnGroup,e=i,__extends(c,e),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._showAward=this.destroyElement(this._showAward),this._btnClip=this.destroyElement(this._btnClip),this._addTimesBtnClip=this.destroyElement(this._addTimesBtnClip),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this,t)},c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._showAward=[this.item1,this.item2,this.item3],this.initAward(),this._btnClip=a.creatEff(this.matchBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this.regGuideSpr(56,this.matchBtn),this._btnGroup=new l,this._btnGroup.setBtns(this.teamBtn,this.netherBtn,this.arenaBtn),this._addTimesBtnClip=o.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.addChild(this._addTimesBtnClip),this._addTimesBtnClip.pos(this.addTimesBtn.x-10,this.addTimesBtn.y-10),this._addTimesBtnClip.visible=!1},c.prototype.initAward=function(){for(var t=n.instance.awards,e=0,i=.5*t.length;e<i;e++)this._showAward[e].nameVisible=!0,this._showAward[e].dataSource=[t[2*e],t[2*e+1],0,null]},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.rankBtn,this,this.rankBtnHandler),this.onAutoClick(this.matchBtn,this,this.matchBtnBtnHandler),this.onAutoClick(this.tipsBtn,this,this.tipsBtnHandler),this.onAutoClick(this.addTimesBtn,this,this.addTimesBtnHandler),this.onAutoClick(this.createRoomBtn,this,this.createRoomBtnHandler),this.onAutoClick(this.tipsbtn,this,this.tipsHanlder),this.onAutoClick(this.chanllgeCBtn,this,this.setOneKeychangeHandler),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoGlobalEvt("TEAM_BATTLE_TIMES_UPDATE",this,this.updateTimes),this.onAutoGlobalEvt("TEAM_BATTLE_MAX_RECORD",this,this.updateMaxRecord),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("SINGLE_QUXIAO",this,this.createRoomBtnHandler),this.onAutoGlobalEvt("UPDATE_PRIVILEGE",this,this.onUpdatePrivilege),this.onAutoGlobalEvt("BAG_UPDATE",this,this.onUpdatePrivilege),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.onAutoGlobalEvt("HOLO_HELPER_SET_UPDATE",this,this.holoHelperUpdate),this.regAutoRP(this.dotImg,["teamBattleRP"]),this.regAutoRP(this.jingjiRP,["nothingnessWorldRP"]),this.regAutoRP(this.netherRP,["netherWorldRP"])},c.prototype.tipsHanlder=function(){a.alertHelp(67045)},c.prototype.holoHelperUpdate=function(){this.chanllgeCBtn.selected=t.halo.HaloModel.instance.getCheckTipsValue(9)},c.prototype.setOneKeychangeHandler=function(){a.setHalaOneKeychange(!this.chanllgeCBtn.selected,9)},c.prototype.changeHandler=function(){1===this._btnGroup.selectedIndex?(WindowManager.instance.open(1379),this._btnGroup.selectedIndex=0):2===this._btnGroup.selectedIndex&&(this._btnGroup.selectedIndex=0,WindowManager.instance.open(962))},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this.teamBtn.selected=!0,this.updateShow(),PlatParams.isCloseRecharge&&(this.addTimesBtn.visible=!1,this._addTimesBtnClip.visible=!1),t.common_group.CommonGroupCtrl.instance.fetchTeamEx(),this.chanllgeCBtn.selected=t.halo.HaloModel.instance.getCheckTipsValue(9)},c.prototype.updatePlatChangeRecharge=function(){this.addTimesBtn.visible=!PlatParams.isCloseRecharge,this._addTimesBtnClip.visible=!PlatParams.isCloseRecharge},c.prototype.updateShow=function(){this.updateTimes(),this.updateMaxRecord()},c.prototype.updateMaxRecord=function(){var t=s.TeamBattleModel.Instance.maxRecordLevel;if(t){this.playerName.visible=!0,this.topRecord.text=t+"关";var e=s.TeamBattleModel.Instance.maxRecordName,i=e.indexOf(".");this.playerSever.text=e.substr(0,i),this.playerName.text=e.substr(i+1,e.length)}else this.topRecord.text="无",this.playerSever.text="无",this.playerName.visible=!1},c.prototype.updateTimes=function(){var t=s.TeamBattleModel.Instance.myRecordLevel;this.myRecord.text=t?t+"关":"无",0<s.TeamBattleModel.Instance.remainTimes?this.challengeCountTxt.color="#00ad35":this.challengeCountTxt.color="#e6372e",this.challengeCountTxt.text=s.TeamBattleModel.Instance.remainTimes+"/"+s.TeamBattleModel.Instance.totalTimes,this.onUpdatePrivilege()},c.prototype.addTimesBtnHandler=function(){t.teamBattle.TeamBattleModel.Instance.addTimesBtnHandler()},c.prototype.onUpdatePrivilege=function(){s.TeamBattleModel.Instance.getIsPlayer()?this._addTimesBtnClip.isPlaying||o.thisPlay(this._addTimesBtnClip):o.thisStop(this._addTimesBtnClip)},c.prototype.tipsBtnHandler=function(){a.alertHelp(20024)},c.prototype.rankBtnHandler=function(){WindowManager.instance.open(117)},c.prototype.matchBtnBtnHandler=function(){t.common_group.CommonGroupUtil.matchBtnHandler(3,!0)},c.prototype.createRoomBtnHandler=function(){t.common_group.CommonGroupUtil.createRoom(3,!1,!0)},c.prototype.updateName=function(){var t=s.TeamBattleModel.Instance.maxRecord;if(t){var e=r.instance.updateNameReply;if(e&&e[0]===t[0]){var i=e[1],n=i.indexOf(".");this.playerSever.text=i.substr(0,n),this.playerName.text=i.substr(n+1,i.length)}}},h=c,s.TeamBattlePanel=h}(modules=modules||{}),function(t){var l,i,e,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}l=t.teamBattle||(t.teamBattle={}),e=ui.TeamBattleMatchAlertUI,n=Laya.Event,s=t.player.PlayerModel,i=e,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._waitTime=1,this._enterTime=3,this._nameArr=new Array,this._nameArr=[this.playerName_1,this.playerName_2],this._valueArr=new Array,this._valueArr=[this.playerBattle_1,this.playerBattle_2],this._headArr=new Array,this._headArr=[this.headIcon_2,this.headIcon_3],this._waitTxtArr=new Array,this._waitTxtArr=[this.waitTxt_1,this.waitTxt_2],this.closeOnSide=!1,this.myHeadIcon.type=0},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.initShowInfo(),this.isWaitInfoShow(!0),this.matchStateUpdate(),this.matchManUpdate()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.cancelBtn.on(n.CLICK,this,this.cancelBtnHandler),GlobalData.dispatcher.on("TEAM_BATTLE_MATCH_UPDATE",this,this.matchManUpdate),GlobalData.dispatcher.on("TEAM_BATTLE_MATCH_STATE_UPDATE",this,this.matchStateUpdate)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.cancelBtn.off(n.CLICK,this,this.cancelBtnHandler),GlobalData.dispatcher.off("TEAM_BATTLE_MATCH_UPDATE",this,this.matchManUpdate),GlobalData.dispatcher.off("TEAM_BATTLE_MATCH_STATE_UPDATE",this,this.matchStateUpdate)},a.prototype.initShowInfo=function(){var t=s.instance.playerBaseAttr;this.myNameTxt.text=t[0],this.myBattleTxt.text=CommonUtil.bigNumToString(s.instance.fight),this.cancelBtn.visible=!0;for(var e=0,i=this._waitTxtArr.length;e<i;e++)this._nameArr[e].visible=this._valueArr[e].visible=!1,this._waitTxtArr[e].visible=!0,this._headArr[e].setInfo(-1,0,-1)},a.prototype.isWaitInfoShow=function(t){t?(this._waitTime=1,this.waitTime.text="("+this._waitTime+")",Laya.timer.loop(1e3,this,this.waitLoop),Laya.timer.clear(this,this.enterLoop)):(this._enterTime=3,this.enterTime.text="("+this._enterTime+")",Laya.timer.loop(1e3,this,this.enterLoop),Laya.timer.clear(this,this.waitLoop))},a.prototype.matchManUpdate=function(){var t=l.TeamBattleModel.Instance.playerInfos;if(t){var e=t.length;this.cancelBtn.visible=!(2==e);for(var i=0,n=this._nameArr.length;i<n;i++)if(i<e){var s=t[i];this._nameArr[i].visible=this._valueArr[i].visible=!0,this._waitTxtArr[i].visible=!1;var o=s[2],a=s[9][21],r=s[9][22];this._headArr[i].setInfo(a,o,r),this._nameArr[i].text=s[1],this._valueArr[i].text=CommonUtil.bigNumToString(s[5])}else this._nameArr[i].visible=this._valueArr[i].visible=!1,this._waitTxtArr[i].visible=!0,this._headArr[i].setInfo(-1,0,-1);this.isWaitInfoShow(!0)}},a.prototype.matchStateUpdate=function(){var t=l.TeamBattleModel.Instance.matchState;1==t?this.isWaitInfoShow(!1):0==t&&this.isWaitInfoShow(!0),this.completeBox.visible=!!t,this.matchingBox.visible=!t},a.prototype.enterLoop=function(){this._enterTime--,this.enterTime.text="("+this._enterTime+")",0==this._enterTime&&Laya.timer.clear(this,this.enterLoop)},a.prototype.waitLoop=function(){this._waitTime++,this.waitTime.text="("+this._waitTime+")"},a.prototype.onClosed=function(){i.prototype.onClosed.call(this),Laya.timer.clear(this,this.waitLoop),Laya.timer.clear(this,this.enterLoop)},a.prototype.cancelBtnHandler=function(){this.close()},a.prototype.close=function(t,e){i.prototype.close.call(this,t,e),l.TeamBattleCtrl.instance.reqCancelMatch()},o=a,l.TeamBattleMatchAlert=o}(modules=modules||{}),function(t){var o,e,i,n,s,a,r,l,h;function c(){return e.call(this)||this}o=t.teamBattle||(t.teamBattle={}),i=ui.TeamBattleAwardViewUI,n=Laya.Event,s=t.bag.BagItem,a=t.config.SceneCopyTeamCfg,r=t.scene.SceneUtil,l=t.config.SceneCopyMarryCfg,e=i,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.right=0,this.bottom=470,this.layer=3,this.closeByOthers=!1,this._showNum=4,this._starX=-90,this._showY=7,this._interX=103,this._showAward=new Array,this._awardCount=0,this.initAward()},c.prototype.initAward=function(){for(var t=0;t<this._showNum;t++){this._showAward[t]=new s,this.addChild(this._showAward[t]);var e=this._starX-t*this._interX;this._showAward[t].pos(e,this._showY),this._showAward[t].visible=!1,this._showAward[t].needTip=!0}},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.bgImg.visible=this._isShow=!1,this.awardUpdate(),this.levelName.text="第1波",this.updataShowAward()},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.awardBoxBtn.on(n.CLICK,this,this.isShowAward),GlobalData.dispatcher.on("TEAM_BATTLE_LEVEL_UPDATE",this,this.awardUpdate)},c.prototype.offEvt=function(){e.prototype.offEvt.call(this),this.awardBoxBtn.off(n.CLICK,this,this.isShowAward),GlobalData.dispatcher.off("TEAM_BATTLE_LEVEL_UPDATE",this,this.awardUpdate)},c.prototype.awardUpdate=function(){var t,e;if(9===r.currScene?(e=a.instance.getCfgByWare(o.TeamBattleModel.Instance.currWave),t=3):34===r.currScene&&(e=l.instance.getCfgByWare(o.TeamBattleModel.Instance.currWave),t=3),e){var i=e[t];this._awardCount=.5*i.length;for(var n=0,s=this._showAward.length;n<s;n++)this._awardCount>n&&(this._showAward[n].dataSource=[i[2*n],i[2*n+1],0,null]);this.levelName.text="第"+o.TeamBattleModel.Instance.currWave+"波",this.updataShowAward()}},c.prototype.isShowAward=function(){this._isShow=!this._isShow,this.bgImg.visible=this._isShow,this.updataShowAward()},c.prototype.updataShowAward=function(){for(var t=0;t<this._showNum;t++)this._awardCount>t?this._showAward[t].visible=this._isShow:this._showAward[t].visible=!1},h=c,o.TeamBattleAwardPanel=h}(modules=modules||{}),function(t){var s,e,i,n,o,a;function r(){return e.call(this)||this}s=t.teamBattle||(t.teamBattle={}),i=ui.TeamBattleTopViewUI,n=t.config.SceneCfg,o=t.config.BlendCfg,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.top=256,this.closeByOthers=!1,this.layer=3},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._totalTime=n.instance.getCfgById(2091)[3]+GlobalData.serverTime,this._skipTime=o.instance.getCfgById(10707)[1][0],this._noticeTime=this._skipTime+GlobalData.serverTime,this.totalTimeLoop()},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),GlobalData.dispatcher.on("TEAM_BATTLE_LEVEL_UPDATE",this,this.updataWaveShow),Laya.timer.loop(1e3,this,this.totalTimeLoop)},r.prototype.offEvt=function(){GlobalData.dispatcher.off("TEAM_BATTLE_LEVEL_UPDATE",this,this.updataWaveShow),Laya.timer.clear(this,this.totalTimeLoop),Laya.timer.clear(this,this.noticeUpdate),e.prototype.offEvt.call(this)},r.prototype.updataWaveShow=function(){this.levelShowNum.value=s.TeamBattleModel.Instance.currWave.toString();var t=this.levelShowNum.value.length,e=36*t+this.levelShowNum.spaceX*t,i=this.levelShow1.width+5+e+5+this.levelShow2.width,n=(this.width-i)/2;this.levelShow1.x=n,this.levelShowNum.x=this.levelShow1.x+this.levelShow1.width+5,this.levelShow2.x=this.levelShowNum.x+e+5,this.waveBox.visible=!0,Laya.timer.once(2e3,this,this.hiddenWave),s.TeamBattleModel.Instance.timeState?(this.tipBox.visible=!0,this._noticeTime=this._skipTime+GlobalData.serverTime,Laya.timer.loop(1e3,this,this.noticeUpdate),this.noticeUpdate()):this.tipBox.visible=!1},r.prototype.hiddenWave=function(){this.waveBox.visible=!1},r.prototype.noticeUpdate=function(){if(this._noticeTime<=GlobalData.serverTime)return this.tipBox.visible=!1,void Laya.timer.clear(this,this.noticeUpdate);if(s.TeamBattleModel.Instance.isMaxWave)this.tipBox.visible=!1,this.maxTipTxt.visible=!0;else{this.maxTipTxt.visible=!1,this.noticeTimeShow.text=Math.floor(.001*(this._noticeTime-GlobalData.serverTime)).toString(),this.noticeLevelShow.text=(s.TeamBattleModel.Instance.skipWave+s.TeamBattleModel.Instance.currWave).toString();var t=this.noticeTimeShow.width+5+this.noticeShow.width+5+this.noticeLevelShow.width+5+this.guanTxt.width,e=(this.width-t)/2;this.noticeTimeShow.x=e,this.noticeShow.x=this.noticeTimeShow.x+this.noticeTimeShow.width+5,this.noticeLevelShow.x=this.noticeShow.x+this.noticeShow.width+5,this.guanTxt.x=this.noticeLevelShow.x+this.noticeLevelShow.width+5}},r.prototype.totalTimeLoop=function(){if(this._totalTime<=GlobalData.serverTime)return Laya.timer.clear(this,this.totalTimeLoop),void this.close();this.countDown.text=t.common.CommonUtil.timeStampToMMSS(this._totalTime)},a=r,s.TeamBattleTopPanel=a}(modules=modules||{}),function(t){var o,i,e,n,s,a,r;function l(){return i.call(this)||this}o=t.teamBattle||(t.teamBattle={}),e=ui.ThreeWorldsRankUI,n=t.common.CustomList,s=Laya.Event,a=t.player.PlayerModel,i=e,__extends(l,i),l.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this)},l.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new n,this._list.scrollDir=1,this._list.hCount=1,this._list.spaceY=4,this._list.itemRender=o.TeamBattleRankItem,this._list.width=530,this._list.height=550,this._list.pos(68,184,!0);for(var t=[],e=0;e<10;e++)t[e]=null;this._list.datas=t,this.addChild(this._list),this.titleTxt.text="幽冥鬼境排行",this.bgImg.height=this.height=864,this.okBtn.destroy(),this.awardTxt.text="刷怪波数"},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.okBtn.on(s.CLICK,this,this.close),GlobalData.dispatcher.on("TEAM_BATTLE_MAX_RECORD",this,this.updateRank)},l.prototype.offEvt=function(){this.okBtn.off(s.CLICK,this,this.close),GlobalData.dispatcher.off("TEAM_BATTLE_MAX_RECORD",this,this.updateRank),i.prototype.offEvt.call(this)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),Channel.instance.publish(7340235,null),this.updateRank()},l.prototype.updateRank=function(){var t=o.TeamBattleModel.Instance.rankList;if(t){if(t&&10===t.length)this._list.datas=t;else{for(var e=[],i=0;i<10;i++)e.push(t?t[i]:null);this._list.datas=e}for(var n=-1,s=(i=0,t.length);i<s;i++)if(t[i][0]===a.instance.actorId){n=i;break}this.myRankTxt.text="我的排名："+(-1===n?"未上榜":n+1),this.myDamageTxt.text="我的波数："+o.TeamBattleModel.Instance.myRecordLevel}},r=l,o.TeamBattleRankAlert=r}(modules=modules||{}),function(c){var d,s,t,e,p,o,a,r,l,i,n,h,u,y,g,f,_;function m(){return null!==s&&s.apply(this,arguments)||this}d=c.equipment_zu_hun||(c.equipment_zu_hun={}),t=ui.EquipmentZuHunViewUI,e=Laya.Dictionary,p=c.player.PlayerModel,o=Laya.Image,a=c.bag.BaseItem,r=Laya.Event,l=c.common.CustomClip,i=c.bag.BagUtil,n=c.funcOpen.FuncOpenModel,h=c.common.ProgressBarCtrl,u=c.common.BtnGroup,y=c.config.EquipmentZhuHunCfg,g=c.effect.SuccessEffectCtrl,f=c.config.BlendCfg,s=t,__extends(m,s),m.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._typeBtnAll=[this.typeBtn1,this.typeBtn2,this.typeBtn3,this.typeBtn4,this.typeBtn5,this.typeBtn6],this._typeBtnDate=[1,2,3,4,5,6],this._recordLev={},this._effKeyArr=[],this._upGradeEffect={},this._equipPos=new Array,this._equipPos.push([49,245],[49,365],[49,485],[49,605],[49,725],[569,245],[569,365],[569,485],[569,605],[569,725]),this._partDic=new e,this.cenItem.valueDisplay=!1,this.cenItem.setNum("","#ffffff"),this.cenItem.visible=!1,this.cenItemText.visible=!1,this._attrNameTxts=[this.pro_1,this.pro_2,this.pro_3],this._attrTxts=[this.proNumTxt_1,this.proNumTxt_2,this.proNumTxt_3],this._upAttrTxts=[this.upProNumTxt_1,this.upProNumTxt_2,this.upProNumTxt_3],this._arrowImgs=[this.arrImg_1,this.arrImg_2,this.arrImg_3],this._btnClip=l.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.instenBtn.x-6,this.instenBtn.y-8),this._btnClip1=l.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip1.setProperty(this,this.oneInstenBtn.x-6,this.oneInstenBtn.y-8),this.regGuideSpr(32,this.oneInstenBtn),this._proCtrl=new h(this.blessImg,380,this.blessTxt),this._scienceTabGroup=new u,this._scienceTabGroup.setBtns(this.ToggleBtn1,this.ToggleBtn2,this.ToggleBtn3),this._showLevel=f.instance.getCfgById(53001)[1][0]},m.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.showTypeBtnAll();var t=p.instance.equipsDic;t&&0!=t.keys.length&&(this.isDianJi=!1,this.equipInitedHandler(),this.searchOne(),this.update(),this.showAddTipsBtn())},m.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.equipInitedHandler),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.equipInitedHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.equipInitedHandler),this.onAutoGlobalEvt("EQUIPMENT_ZUHUN_UP",this,this.playUpEff),this.onAutoGlobalEvt("EQUIPMENT_ZUHUN_UPDATE",this,this.update),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateToBagUpdate),this.onAutoGlobalEvt("PLAYER_TOTAL_ATTR_UPDATE",this,this.showAddTipsBtn),this.onAutoClick(this.addTipsBtn2,this,this.addTipsBtnHandler,[1]),this.onAutoClick(this.addTipsBtn3,this,this.addTipsBtnHandler,[2]),this.onAutoEvt(this._scienceTabGroup,"change",this,this.changeswitchBtnTabHandler),this.onAutoClick(this.oneInstenBtn,this,this.oneKeyUpGrade),this.onAutoClick(this.instenBtn,this,this.upGrade);for(var t=0,e=this._partDic.keys.length;t<e;t++){var i=this._partDic.keys[t];this.onAutoClick(this._partDic.get(i),this,this.itemClickHandler,[i])}for(t=0,e=this._effKeyArr.length;t<e;t++)i=this._effKeyArr[t],this.onAutoEvt(this._upGradeEffect[i],"complete",this,this.closeEff,[i])},m.prototype.addTipsBtnHandler=function(t){if(n.instance.getFuncIsOpen(92))WindowManager.instance.open(93);else{var e="戒指";switch(t){case 0:e="手镯";break;case 1:e="戒指";break;case 2:e="玉佩"}c.notice.SystemNoticeManager.instance.addNotice(e+"可通过寻宝获得",!0)}},m.prototype.changeswitchBtnTabHandler=function(){d.EquipmentZuHunModel.instance.materialItemID=d.EquipmentZuHunModel.instance._consumptionMaterialItem[2*this._scienceTabGroup.selectedIndex],d.EquipmentZuHunModel.instance.materialItemCount=d.EquipmentZuHunModel.instance._consumptionMaterialItem[2*this._scienceTabGroup.selectedIndex+1],this.showClip()},m.prototype.showTypeBtnAll=function(){for(var t=0;t<this._typeBtnAll.length;t++){var e=this._typeBtnAll[t];e&&(e.data=this._typeBtnDate[t])}},m.prototype.itemClickHandler=function(t){this.isDianJi=!0,this.setUI(t)},m.prototype.setUI=function(t,e){if(void 0===e&&(e=!1),this._currPart=t,d.EquipmentZuHunModel.instance._currPart=this._currPart,this._partDic.get(this._currPart)){this._partDic.get(this._currPart).addChildAt(this._currFrame,1);var i=d.EquipmentZuHunModel.instance.getConsumptionNum(0),n=d.EquipmentZuHunModel.instance.getConsumptionNum(1),s=d.EquipmentZuHunModel.instance.getConsumptionNum(2);this._scienceTabGroup.selectedIndex=0<i?0:0<n?1:0<s?2:0,e||this.setResource()}},m.prototype.updateToBagUpdate=function(){this.update(!0)},m.prototype.update=function(t){void 0===t&&(t=!1),this.atkValueMsz.value=d.EquipmentZuHunModel.instance.atkNum.toString(),this._partDic.values.forEach(function(t){t&&(t.getChildByName("redImg").visible=!1)});for(var e=d.EquipmentZuHunModel.instance.getConsumptionExp(0),i=d.EquipmentZuHunModel.instance.getConsumptionExp(1),n=d.EquipmentZuHunModel.instance.getConsumptionExp(2),s=1;s<=10;s++){var o=d.EquipmentZuHunModel.instance.zhuhunList[s];if(!o)return;var a=o[1],r=o[0],l=o[2],h=y.instance.getMaxLevelByPart(r),c=this._partDic.get(r);if(c)if(0==(a=h<a?h:a)?c.setNum("","#ffffff"):c.setNum(a+"阶","#ffffff"),c.visible=!0,a<h){var p=y.instance.getDateByPartAndLevel(r,a)[2]-l,u=e+i+n;c.getChildByName("redImg").visible=p<=u}else c.getChildByName("redImg").visible=!1}this.showClip(),this.setcaiLiaoText(),this.showTypeBtnAll(),this._currPart&&this.setUI(this._currPart,t)},m.prototype.setJieClipPos=function(){var t=this.jieClip.width+this.jieImg.width,e=(this.width-t)/2;this.jieClip.x=e,this.jieImg.x=this.jieClip.x+this.jieClip.width},m.prototype.setcaiLiaoText=function(){var t=d.EquipmentZuHunModel.instance.getConsumptionNum(0),e=d.EquipmentZuHunModel.instance.getConsumptionNum(1),i=d.EquipmentZuHunModel.instance.getConsumptionNum(2);this.caiLiaoText1.text=""+t,this.caiLiaoText2.text=""+e,this.caiLiaoText3.text=""+i,this.caiLiaoText1.color=0==t?"#ff3e3e":"#4c5e8a",this.caiLiaoText2.color=0==e?"#ff3e3e":"#4c5e8a",this.caiLiaoText3.color=0==i?"#ff3e3e":"#4c5e8a"},m.prototype.setResource=function(){var t=this,e=this._partDic.get(this._currPart);if(e){this.cenItem.dataSource=e.itemData,this.cenItem.visible=!0,this.cenItemText.visible=!0,this.cenItemText.text=CommonUtil.getNameByPart(this._currPart),this._currPart||(this._currPart=this._partDic.keys[0]);var i=d.EquipmentZuHunModel.instance.zhuhunList[this._currPart],n=i[1],s=i[0],o=i[2],a=y.instance.getMaxLevelByPart(s);0==(n=a<n?a:n)?this.cenItem.setNum("","#ffffff"):this.cenItem.setNum(n+"阶","#ffffff"),this.jieClip.value=""+n,this.jieClip.visible=this.jieImg.visible=!0;var r=y.instance.getDateByPartAndLevel(s,n),l=y.instance.getDateByPartAndLevel(s,n+1),h=r[2];this._proCtrl.maxValue=h,this._proCtrlTween&&(this._proCtrlTween.stop(),this._proCtrlTween=null),this.isDianJi?this._proCtrl.value=o:d.EquipmentZuHunModel.instance._isjinjie?(this._proCtrl.value=0,this._proCtrlTween=TweenJS.create(this._proCtrl).to({value:this._proCtrl.maxValue},400).onComplete(function(){t._proCtrl.maxValue=h,t._proCtrl.value=o}).start()):(this._proCtrlTween=TweenJS.create(this._proCtrl).to({value:o},400).onComplete(function(){t._proCtrl.value=o}),this._proCtrlTween.start()),d.EquipmentZuHunModel.instance._isjinjie=!1,c.common.AttrUtil.setAttrTxts(r,l,this._attrNameTxts,this._attrTxts,this._arrowImgs,this._upAttrTxts,3),this.ToggleBtn1.visible=this.ToggleBtn2.visible=this.ToggleBtn3.visible=n<a,this.ToggleImg1.visible=this.ToggleImg2.visible=this.ToggleImg3.visible=n<a,this.caiLiaoText1.visible=this.caiLiaoText2.visible=this.caiLiaoText3.visible=n<a,this.blessTxt.visible=this.blessBgImg.visible=this.blessImg.visible=n<a,this.manjiText.visible=a===n,this.instenBtn.visible=this.oneInstenBtn.visible=n<a,this.isDianJi=!1}},m.prototype.searchOne=function(){if(0!=this._partDic.keys.length&&0!=d.EquipmentZuHunModel.instance.zhuhunList.length){for(var t=d.EquipmentZuHunModel.instance.getConsumptionExp(0),e=d.EquipmentZuHunModel.instance.getConsumptionExp(1),i=d.EquipmentZuHunModel.instance.getConsumptionExp(2),n=1;n<=2;n++)for(var s=1;s<=10;s++)if(h=d.EquipmentZuHunModel.instance.zhuhunList[s]){var o=h[1],a=h[0],r=h[2],l=y.instance.getMaxLevelByPart(a);if((c=this._partDic.get(a))&&(c.visible=!0,(o=l<o?l:o)<l))if(1==n){if(y.instance.getDateByPartAndLevel(a,o)[2]-r<=t+e+i)return void this.itemClickHandler(a)}else if(1==n)return void this.itemClickHandler(a)}if(0!=this._partDic.keys.length)for(s=1;s<=10;s++){var h,c;if(h=d.EquipmentZuHunModel.instance.zhuhunList[s])if(a=h[0],c=this._partDic.get(a))return void this.itemClickHandler(this._currPart=a)}}},m.prototype.showClip=function(){var t=!1,e=d.EquipmentZuHunModel.instance.getmaterialItemExp();if(d.EquipmentZuHunModel.instance.getmaterialItemNum()<=0)return l.thisStop(this._btnClip),l.thisStop(this._btnClip1),t;var i=d.EquipmentZuHunModel.instance.zhuhunList[this._currPart],n=i[1],s=i[0],o=i[2],a=y.instance.getMaxLevelByPart(s);if(n=a<n?a:n,y.instance.getDateByPartAndLevel(s,n)[2]-o<=e&&n<a)return t=!0,l.thisPlay(this._btnClip),l.thisPlay(this._btnClip1),t;l.thisStop(this._btnClip),l.thisStop(this._btnClip1)},m.prototype.upGrade=function(){0<d.EquipmentZuHunModel.instance.getmaterialItemNum()?d.EquipmentZuHunCtrl.instance.ZhuhunOper(this._currPart,d.EquipmentZuHunModel.instance.materialItemID):i.openLackPropAlert(d.EquipmentZuHunModel.instance.materialItemID,1)},m.prototype.oneKeyUpGrade=function(){0<d.EquipmentZuHunModel.instance.getmaterialItemNum()?d.EquipmentZuHunCtrl.instance.ZhuhunOperOneKey(d.EquipmentZuHunModel.instance.materialItemID):i.openLackPropAlert(d.EquipmentZuHunModel.instance.materialItemID,1)},m.prototype.isUpMin=function(){var t=p.instance.equipsDic;if(t&&0!=t.keys.length){for(var e=0,i=0,n=0;n<t.keys.length;n++){var s=t.keys[n],o=d.EquipmentZuHunModel.instance.zhuhunList[s];if(o){var a=o[2],r=o[1],l=y.instance.getMaxLevelByPart(s);r=l<r?l:r;var h=y.instance.getDateByPartAndLevel(s,r)[2]-a;0==i&&(i=r),0==e&&(e=h),h<e&&(e=h)}}return e}},m.prototype.playUpEff=function(t){if(void 0===t&&(t=0),0==t)this._upGradeEffect[this._currPart].visible=!0,this._upGradeEffect[this._currPart].play(),g.instance.play("assets/others/tx_jinjiechengong.png");else for(var e=0,i=t.length;e<i;e++)this._upGradeEffect[t[e]].visible=!0,this._upGradeEffect[t[e]].play()},m.prototype.closeEff=function(t){this._upGradeEffect[t].visible=!1},m.prototype.equipInitedHandler=function(){var t=p.instance.equipsDic;if(t&&0!=t.keys.length){for(var e=0;e<t.keys.length;e++){var i=t.keys[e],n=t.get(i);n&&this.setEquip(i,n)}for(e=0;e<this._effKeyArr.length;e++){var s=this._effKeyArr[e];this._upGradeEffect[s].visible=!1}}},m.prototype.setEquip=function(t,e){this._currFrame||(this._currFrame=new o("common/dt_tongyong_29.png"),this._currFrame.pos(-4,-4));var i=this._partDic.get(t);if(e){if(!i){(i=new a).needTip=!1,i.valueDisplay=!1,this._partDic.set(t,i),i.pos(this._equipPos[t-1][0],this._equipPos[t-1][1],!0),i.on(r.CLICK,this,this.itemClickHandler,[t]);var n=new o("common/image_common_xhd.png");n.visible=!1,n.name="redImg",n.pos(80,-8),i.addChildAt(n,5),i.visible=!0;var s=l.create("assets/effect/activate.atlas","activate",4,!1);s.on(r.COMPLETE,this,this.closeEff,[t]),this._upGradeEffect[t]=s,this._effKeyArr.push(t),s.setProperty(null,-75,-75,1,!1),i.addChildAt(s,6)}this.addChild(i),i.dataSource=e}else i&&i.removeSelf()},m.prototype.close=function(){s.prototype.close.call(this),this._proCtrlTween&&this._proCtrlTween.stop(),l.thisStop(this._btnClip),l.thisStop(this._btnClip1)},m.prototype.destroy=function(){if(this._currFrame=this.destroyElement(this._currFrame),this._partDic){for(var t=0,e=this._partDic.values;t<e.length;t++)(n=e[t]).destroy(!0);this._partDic=null}if(this._upGradeEffect){for(var i in this._upGradeEffect){var n;(n=this._upGradeEffect[i])&&n.destroy(!0)}this._upGradeEffect=null}this._btnClip=this.destroyElement(this._btnClip),this._btnClip1=this.destroyElement(this._btnClip1),this._proCtrlTween&&(this._proCtrlTween.stop(),this._proCtrlTween=null),this._proCtrl=this.destroyElement(this._proCtrl),s.prototype.destroy.call(this),this._equipPos.length=0,this._effKeyArr.length=0},m.prototype.showAddTipsBtn=function(){this.addTipsBtn2.visible=this.addTipsBtn3.visible=p.instance.level>=this._showLevel},_=m,d.EquipmentZuHunPanel=_}(modules=modules||{}),function(v){var b,i,t,T,a,I,C,x,n,e;function s(){return null!==i&&i.apply(this,arguments)||this}b=v.equipment_zu_hun||(v.equipment_zu_hun={}),t=ui.EquipmentSiHunAlertUI,T=v.bag.BagModel,a=v.config.ItemRuneCfg,I=v.common.CommonUtil,C=v.common.CustomClip,x=v.config.EquipmentShiHunCfg,n=v.bag.BagUtil,i=t,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._nameTextArry=[this.attributeNameText1,this.attributeNameText2,this.attributeNameText3,this.attributeNameText4,this.attributeNameText5,this.attributeNameText6],this._valueTextArry=[this.attributeValueText1,this.attributeValueText2,this.attributeValueText3,this.attributeValueText4,this.attributeValueText5,this.attributeValueText6],this._upValueTextArry=[this.attributeUpValueText1,this.attributeUpValueText2,this.attributeUpValueText3,this.attributeUpValueText4,this.attributeUpValueText5,this.attributeUpValueText6],this._upValueImgArry=[this.attributeUpImg1,this.attributeUpImg2,this.attributeUpImg3,this.attributeUpImg4,this.attributeUpImg5,this.attributeUpImg6],this._btnClip=C.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.instenBtn.x-6,this.instenBtn.y-8),this._btnClip1=C.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip1.setProperty(this,this.oneInstenBtn.x-6,this.oneInstenBtn.y-8)},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._dates=t,this._dates&&this.showUI()},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.instenBtn,this,this.upGrade),this.onAutoClick(this.oneInstenBtn,this,this.oneKeyUpGrade),this.onAutoGlobalEvt("EQUIPMENT_ZUHUN_UPDATE",this,this.updateUI),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.updateUI),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.updateUI)},s.prototype.close=function(t,e){i.prototype.close.call(this,t,e),C.thisStop(this._btnClip),C.thisStop(this._btnClip1)},s.prototype.updateUI=function(){var t=this._dates[0],e=b.EquipmentZuHunModel.instance.shihunList[t];e&&(this._dates=e),this.showUI()},s.prototype.showUI=function(){var t=this._dates[0],e=this._dates[1],i=b.EquipmentZuHunModel.instance.shihunList[t];i&&(this._dates=i);var n=x.instance.getMaxLevelByPart(t);e=n<e?n:e;var s,o=x.instance.getDateByPartAndLevel(t,e),a=o[3],r=o[4],l=o[5],h=b.EquipmentZuHunModel.instance.getWhetherToMeet(l,r);s=h?e:(s=e-1)<0?0:s;var c=x.instance.getMaxLevelByPartAndLevel(t,s);this.setItem=[a[0],1,0,null];var p=T.instance.getItemCountById(a[0]);this.haveText.text=""+p;for(var u=0,d=0;d<e;d++)u+=x.instance.getDateByPartAndLevel(t,d)[3][1];var y=u;for(d=e;d<c;d++)y+=x.instance.getDateByPartAndLevel(t,d)[3][1];this.devourText.text=u+"/"+y;var g=v.config.ItemMaterialCfg.instance.getItemCfgById(a[0]);if(this.icon.skin="assets/icon/item/"+g[7]+".png",this.iconNum.text=o[3][1].toString(),I.centerChainArr(this.needMc.width,[this.icon,this.iconNum],2),p>=a[1]?(C.thisPlay(this._btnClip),C.thisPlay(this._btnClip1)):(C.thisStop(this._btnClip),C.thisStop(this._btnClip1)),e<n){if(this.icon.visible=this.iconNum.visible=this.instenBtn.visible=this.oneInstenBtn.visible=!0,this.manjiText.visible=!1,this.tipText.visible=!1,!h){this.tipText.visible=!0,this.icon.visible=this.iconNum.visible=this.instenBtn.visible=this.oneInstenBtn.visible=!1;for(var f="",_=0;_<r.length;_++){var m=r[_];_==r.length-1?f+=I.getNameByPart(m):f=f+I.getNameByPart(m)+"、"}this.tipText.text=""+f+l+"阶提高吞噬上限",C.thisStop(this._btnClip),C.thisStop(this._btnClip1)}}else this.icon.visible=this.iconNum.visible=this.instenBtn.visible=this.oneInstenBtn.visible=!1,this.manjiText.visible=!0,this.tipText.visible=!1,C.thisStop(this._btnClip),C.thisStop(this._btnClip1);this.setAttribute()},Object.defineProperty(s.prototype,"setItem",{set:function(t){var e=t[0];this.nowBaseItem.dataSource=t,this.nowBaseItem._numTxt.visible=!1,this.nameText.color=I.getColorById(e);var i=I.getItemCfgById(e),n=I.getItemTypeById(e);if(7==n){var s=1e4*(1e-4*e>>0),o=a.instance.getCfgById(s);this.nameText.text=o[1]}else this.nameText.text=i[1].toString()},enumerable:!0,configurable:!0}),s.prototype.setAttribute=function(){for(var t=0;t<this._nameTextArry.length;t++){var e=this._nameTextArry[t],i=this._valueTextArry[t],n=this._upValueTextArry[t],s=this._upValueImgArry[t];e.visible=i.visible=n.visible=s.visible=!1}var o=this._dates[0],a=this._dates[1],r=x.instance.getDateByPartAndLevel(o,a),l=x.instance.getDateByPartAndLevel(o,a+1),h=v.common.AttrUtil.setAttrTxts(r,l,this._nameTextArry,this._valueTextArry,this._upValueImgArry,this._upValueTextArry,6),c=(this.diTuImg.height-(24*h+21*(h-1)))/2;for(t=0;t<this._nameTextArry.length;t++)e=this._nameTextArry[t],i=this._valueTextArry[t],n=this._upValueTextArry[t],s=this._upValueImgArry[t],e.y=i.y=n.y=s.y=c+45*t},s.prototype.upGrade=function(){var t=this._dates[0],e=this._dates[1],i=x.instance.getDateByPartAndLevel(t,e)[3];T.instance.getItemCountById(i[0])>=i[1]?b.EquipmentZuHunCtrl.instance.ShihunOper(t):n.openLackPropAlert(i[0],1)},s.prototype.oneKeyUpGrade=function(){var t=this._dates[0],e=this._dates[1],i=x.instance.getDateByPartAndLevel(t,e)[3];T.instance.getItemCountById(i[0])>=i[1]?b.EquipmentZuHunCtrl.instance.ShihunOperOneKey(t):n.openLackPropAlert(i[0],1)},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._btnClip1=this.destroyElement(this._btnClip1),i.prototype.destroy.call(this)},e=s,b.EquipmentSiHunAlert=e}(modules=modules||{}),function(t){var n,i,f,u,d,s,_,e,y,m,o,g,a;function r(){return null!==i&&i.apply(this,arguments)||this}n=t.equipSuit||(t.equipSuit={}),f=t.equipSuit.EquipSuitModel,u=t.player.PlayerModel,d=t.common.CommonUtil,s=t.common.CustomList,_=t.config.EquipSuitCfg,e=ui.EquipSuitViewUI,y=t.config.SkillCfg,m=t.common.AttrUtil,o=t.config.AttrItemCfg,g=t.config.SkillPureCfg,i=e,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerY=this.centerX=0,this._itmePoss=[];for(var t=0;t<8;t++){var e={x:55+510*Math.floor(t/4),y:165+t%4*115};this._itmePoss.push(e)}this._items=[],this._parts=f.instance.parts,this._list=new s,this._list.scrollDir=2,this._list.x=60,this._list.y=1e3,this._list.height=140,this._list.vCount=1,this._list.itemRender=n.EquipSuitTclassItem,this._list.spaceX=20,this.addChild(this._list),this._flagImgs=[this.flagImg_0,this.flagImg_1,this.flagImg_2,this.flagImg_3,this.flagImg_4,this.flagImg_5,this.flagImg_6,this.flagImg_7],d.setHTMLPro(this.requestTxt,"#4C5E8A","SimHei",24),this.requestTxt.style.wordWrap=!1,this._attrNames=[this.attNameTxt_0,this.attNameTxt_1],this._attValues=[this.attValueTxt_0,this.attValueTxt_1],this._arrImgs=[this.arrImg_0,this.arrImg_1],this._attProValues=[this.attProValueTxt_0,this.attProValueTxt_1]},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._list,"select",this,this.selectView),this.onAutoGlobalEvt("EQUIP_SUIT_UPDATE",this,this.updateView),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler)},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._sIndex=null==t?0:t},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.checkType()},r.prototype.selectView=function(){var t=this._list.selectedData;f.instance.selectId=t,this.updateView()},r.prototype.updateView=function(){this.setAttr(),this.judgeItemState(),this.calcFight();var t=this._list.selectedData,e=_.instance.getCfgById(t)[3],i=e[0],n=e[1],s=e[2]-1,o=d.getColorByQuality(n),a="点亮条件:穿戴装备阶数≥"+d.formatHtmlStrByColor(o,i+"阶")+",品质≥"+d.formatHtmlStrByColor(o,d.getColorNameByQuality(n)+"品")+",星数≥"+d.formatHtmlStrByColor(o,s+"星");this.requestTxt.innerHTML=a,d.centerChainArr(this.width,[this.requestTxt])},r.prototype.setAttr=function(){for(var t,e,i,n,s=this._list.selectedData,o=_.instance.getCfgById(s),a=f.instance.getLightCountById(s),r=o[4],l=0,h=r.length;l<h;l++)a===r[l][0]&&(t=l);var c=0;if(null==t)for(this.currNumTxt.text="0",this.lightNumTxt.text="1",this.nextLightBox.visible=!0,l=1,h=(y=r[0]).length;l<h;l+=2){var p=y[l];e=this.getAttrById(p)[0],i="0",n=(d=this.getAttrById(p)[1])?m.formatFloatNum(y[l+1])+"%":""+y[l+1],this.setAttrElement(c,e,i,n),c++}else{this.currNumTxt.text=""+r[t][0],t>=r.length-1?this.nextLightBox.visible=!1:(this.nextLightBox.visible=!0,this.lightNumTxt.text=""+(r[t][0]+1)),this.lightNumTxt.text=""+(r[t][0]+1);var u=r[t];for(l=1,h=u.length;l<h;l+=2){var d;if(p=u[l],e=this.getAttrById(p)[0],i=(d=this.getAttrById(p)[1])?m.formatFloatNum(u[l+1])+"%":""+u[l+1],t<r.length-1){var y,g=(y=r[t+1])[l+1];n=d?m.formatFloatNum(g-u[l+1])+"%":""+(g-u[l+1])}this.setAttrElement(c,e,i,n),c++}}for(l=c;l<this._attrNames.length;l++)this._attrNames[c].visible=this._attValues[c].visible=this._arrImgs[c].visible=this._attProValues[c].visible=!1},r.prototype.setAttrElement=function(t,e,i,n){this._attrNames[t].text=e,this._attValues[t].text=i,this._attrNames[t].visible=this._attValues[t].visible=!0,n&&(this._arrImgs[t].visible=this._attProValues[t].visible=!0,this._attProValues[t].text=n)},r.prototype.getAttrById=function(t){var e=o.instance.getCfgById(t);return[e[1],1==e[2]]},r.prototype.calcFight=function(){var t=this._list.selectedData,e=0;if(-1==f.instance.ids.indexOf(t)){var i=f.instance.lightPartsById(t);if(i)for(var n=_.instance.getCfgById(t)[6],s=0,o=i;s<o.length;s++)for(var a=o[s],r=0,l=n.length;r<l;r++)if(a==n[r][0]){e+=n[r][1];break}}else for(var h=0,c=n=_.instance.getCfgById(t)[6];h<c.length;h++)e+=(a=c[h])[1];this.fightMsz.value=e.toString()},r.prototype.judgeItemState=function(){var t=this._list.selectedData,e=_.instance.getCfgById(t)[5],i=y.instance.getCfgById(e),n=g.instance.getCfgById(d.getSkillPureIdById(e)),s=d.stringFormat(n[5],i[2]);if(-1==f.instance.ids.indexOf(t)){for(var o=0,a=this._parts.length;o<a;o++){var r=this._parts[o],l=u.instance.getEquipByPart(r),h=this._items[o];if(l){(h=h||this.creatBaseItem(o)).dataSource=l;var c=f.instance.lightPartsById(t);if(c&&-1!==c.indexOf(r)){var p=this.showConditionEquip(r);h.dataSource=p,h.state=2,this._flagImgs[o].skin="equip_suit/txt_zbtz_ydl.png";continue}f.instance.compareResult(l[0],t)?(h.state=0,this._flagImgs[o].skin="equip_suit/txt_zbtz_kdl.png"):(h.state=1,this._flagImgs[o].skin="equip_suit/txt_zbtz_wdc.png")}}this.lightImg.visible=!1,this.desTxt.visible=this.getBtn.visible=!0,this.lightBox.x=190,this.attrBox.x=152,this.tipTxt.y=914}else{for(o=0,a=this._parts.length;o<a;o++)r=this._parts[o],h=(h=this._items[o])||this.creatBaseItem(o),p=this.showConditionEquip(r),h.dataSource=p,h.state=2,this._flagImgs[o].skin="equip_suit/txt_zbtz_ydl.png";this.tipTxt.y=930,this.lightImg.visible=!0,this.desTxt.visible=this.getBtn.visible=!1,d.centerChainArr(this.width,[this.lightBox]),d.centerChainArr(this.width,[this.attrBox])}this.tipTxt.text=n[1]+": "+s},r.prototype.creatBaseItem=function(t){var e=new n.EquipLightItem;this.addChild(e),this._items[t]=e;var i=this._itmePoss[t];return e.pos(i.x,i.y),e},r.prototype.showConditionEquip=function(t){var e=this._list.selectedData,i=_.instance.getCfgById(e)[3],n=i[0],s=i[1],o=i[2];return[d.getEquipIdByCondition(n,s,o,t),1,0,null]},r.prototype.checkType=function(){var t=n.EquipSuitUtil.panels.indexOf(this.panelId);if(-1==t)throw new Error("装备套装大类数量配置错误---");this._bClass=_.instance.bClassIds[t];var e=_.instance.getIdsBybClass(this._bClass);this.setListWidth(e.length),this._list.datas=e,this._list.selectedIndex=this._sIndex},r.prototype.setListWidth=function(t){var e=114*t+(t-1)*this._list.spaceX;this._list.width=600<e?600:e,d.centerChainArr(this.width,[this._list])},r.prototype.getBtnHandler=function(){var t=this._list.selectedData,e=_.instance.getCfgById(t);WindowManager.instance.open(344,e)},r.prototype.aboutBtnHandler=function(){d.alertHelp(20056)},r.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._itmePoss=null,this._parts=null,this._list=this.destroyElement(this._list),this._flagImgs=this.destroyElement(this._flagImgs),this._attrNames=this.destroyElement(this._attrNames),this._attProValues=this.destroyElement(this._attProValues),this._arrImgs=this.destroyElement(this._arrImgs),this._attProValues=this.destroyElement(this._attProValues),i.prototype.destroy.call(this)},a=r,n.EquipSuitPanel=a}(modules=modules||{}),function(s){var t,i,e,o,a,n;function r(){var t=i.call(this)||this;return t._soureceBtnH=0,t}t=s.equipSuit||(s.equipSuit={}),e=s.commonAlert.PropAlertUtil,o=s.config.BlendCfg,a=s.config.GetWayCfg,i=ui.LackPropAlertUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._itemBg=new Laya.Image,this.addChild(this._itemBg),this._itemBg.pos(280,129,!0),this._itemIcon=new Laya.Image("assets/icon/item/50063.png"),this.addChild(this._itemIcon),this._itemIcon.pos(280,129,!0),this._itemTxt=new Laya.Text,this.addChild(this._itemTxt),this._itemTxt.pos(0,240),this._itemTxt.width=660,this._itemTxt.fontSize=22,this._itemTxt.font="SimHei",this._itemTxt.align="center",this._sourceBtns=[],this._imgs=[],this._desTxts=[];for(var t=0;t<5;t++)this._sourceBtns[t]=new Laya.Image,this._imgs[t]=new Laya.Image,this._desTxts[t]=new laya.display.Text,e.setDesTxt(this._desTxts[t]),this._sourceBtns[t].mouseEnabled=!0;this.shortCutBuyBox.visible=!1},r.prototype.onEvt=function(){i.prototype.onEvt.call(this);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t])},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.item=t},Object.defineProperty(r.prototype,"item",{set:function(t){this.removeChildSource();var e=t[3][1];this._itemBg.skin="assets/icon/quality_bg/iconbg_"+e+".png",this._itemTxt.color=""+CommonUtil.getColorByQuality(e),this._itemTxt.text=t[1]+"装备",this.lineimage.y=this.shortCutBuyBox.y,this._sourceBtnY=this.lineimage.y+this.lineimage.height+16;for(var i=o.instance.getCfgById(34002)[1],n=0,s=i.length;n<s;n++)this.getWayBtn(this._sourceBtns[n],i[n],i.length,n,this._imgs[n]);this._soureceBtnH=100,this.bgImg.height=this._sourceBtnY+this._soureceBtnH+36,this.height=this.bgImg.height,this.backTxt.y=this.height+24},enumerable:!0,configurable:!0}),r.prototype.getWayBtn=function(t,e,i,n,s){var o;this.addChild(s),this.addChild(t),o=a.instance.getCfgById(e),t.pos(30+.5*(660-158*i+42*(i-1))+116*n,this._sourceBtnY),t.skin="assets/icon/ui/get_way/"+o[1]+".png",s.skin="assets/icon/ui/get_way/btn_ydrk_bg.png",s.pos(t.x,t.y),t.addChild(this._desTxts[n]),this._desTxts[n].pos(6,70),this._desTxts[n].text=o[2]},r.prototype.getOpenPlaneId=function(t){var e=o.instance.getCfgById(34002)[1],i=a.instance.getCfgById(e[t]);if(942!==i[0]&&943!==i[0]||s.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!0)){500!=i[0]?(this.close(),WindowManager.instance.closeAllDialog()):s.notice.SystemNoticeManager.instance.addNotice("请多关注游戏内活动哦",!1);var n=i[3][0];s.commonAlert.PropAlertUtil.skipScene(n)}},r.prototype.removeChildSource=function(){if(this._sourceBtns)for(var t=0;t<this._sourceBtns.length;t++)this.removeChild(this._sourceBtns[t]);if(this._imgs)for(t=0;t<this._imgs.length;t++)this.removeChild(this._imgs[t]),this.removeChild(this._desTxts[t]);this.bgImg.height=this.height=700,this.backTxt.y=750,this.lineimage.y=463},r.prototype.destroy=function(){this._sourceBtns=this.destroyElement(this._sourceBtns),this._imgs=this.destroyElement(this._imgs),this._desTxts=this.destroyElement(this._desTxts),this._itemBg=this.destroyElement(this._itemBg),this._itemIcon=this.destroyElement(this._itemIcon),this._itemTxt=this.destroyElement(this._itemTxt),i.prototype.destroy.call(this)},n=r,t.EquipSuitGetAlert=n}(modules=modules||{}),function(P){var A,i,t,R,e,n,s,k,o;function a(){return null!==i&&i.apply(this,arguments)||this}A=P.teamBattle||(P.teamBattle={}),t=ui.TeamCopyInviteAlertUI,R=P.faction.FactionModel,e=P.common.CustomList,n=P.common.BtnGroup,s=P.faction.FactionCtrl,k=P.marry.MarryModel,i=t,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new e,this._list.scrollDir=1,this._list.x=51,this._list.y=110,this._list.width=560,this._list.height=522,this._list.hCount=1,this._list.itemRender=A.TeamCopyInviteItem,this._list.spaceY=5,this.addChild(this._list),this._btnGroup=new n,this._btnGroup.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1),this._btnGroup.setBtns(this.btnGroup_1,this.btnGroup_0,this.btnGroup_2)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.updateView),this._btnGroup.selectedIndex=0,this.onAutoGlobalEvt("FACTION_INFO",this,this.updateView),this.onAutoGlobalEvt("TEAM_COPY_CAN_INVITE_MEMBER_UPDATE",this,this.updateView),this.onAutoGlobalEvt("WARBAND_INFO_UPDATE",this,this.updateView)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=P.faction.FactionModel.instance.hasFaction?0:1,s.instance.makeFactionPanel(!0),P.warband.WarbandCtrl.instance.getWarbandInfo(),this.updateView()},a.prototype.updateView=function(){var t=this._btnGroup.selectedIndex;if(0==t){this._halfItem&&(this._halfItem.visible=!1);var e=[],i=R.instance.memberList,n=A.TeamBattleModel.Instance.playerInfos,s=PlayerModel.instance.actorId;this.title.text="邀请盟友";for(var o=0,a=i;o<a.length;o++)if((T=(x=a[o])[1])!=s){for(var r=!1,l=0,h=n;l<h.length;l++)if(h[l][0]==T){r=!0;break}if(!r&&x[8]){var c=x[3],p=x[0],u=x[4],d=x[1],y=x[11],g=x[12];e.push([t,d,c,p,u,y,g])}}e=e.sort(this.sortByFight.bind(this));var f=this._list.scrollPos;this._list.datas=e,this._btnGroup.selectedIndex==this._btnGroup.oldSelectedIndex?this._list.scrollPos=f:this._list.scrollPos=0,0==e.length?(this.noTxt.text="你的盟友不在线",this.noBox.visible=!0):this.noBox.visible=!1,P.faction.FactionModel.instance.hasFaction||(this.noTxt.text="你没有加入仙盟")}else if(1==t){this._list.datas=[],this.title.text="邀请仙缘";var _=k.instance.isMarried,m=A.TeamBattleModel.Instance.halfInfo,v=k.instance.half;if(_&&m&&0<m[0].length&&v[10]){this.noBox.visible=!1,c=v[3];var b=v[2],T=(u=m[0][0][2],v[0]);y=v[6],g=v[7],this.halfItem=[t,T,c,b,u,y,g]}else this.noTxt.text="你尚未结缘",this.noBox.visible=!0,this._halfItem&&(this._halfItem.visible=!1);_&&!v[10]&&(this.noTxt.text="你的仙缘不在线")}else{if(this._halfItem&&(this._halfItem.visible=!1),e=[],s=PlayerModel.instance.actorId,this.title.text="邀请战队",P.warband.WarbandModel.instance.info){i=P.warband.WarbandModel.instance.info[4],n=A.TeamBattleModel.Instance.playerInfos;for(var I=0,C=i;I<C.length;I++){var x;if((T=(x=C[I])[0])!=s){r=!1;for(var B=0,S=n;B<S.length;B++)if(S[B][0]==T){r=!0;break}if(!r&&x[12]){c=x[2];var M=x[1],w=(u=x[4],x[0]);y=x[6],g=x[5],e.push([t,w,c,M,u,y,g])}}}}e=e.sort(this.sortByFight.bind(this)),f=this._list.scrollPos,this._list.datas=e,this._btnGroup.selectedIndex==this._btnGroup.oldSelectedIndex?this._list.scrollPos=f:this._list.scrollPos=0,0==e.length?(this.noTxt.text="其他战队成员不在线",this.noBox.visible=!0):this.noBox.visible=!1,-1===P.warband.WarbandModel.instance.leaderId&&(this.noTxt.text="你没有加入战队")}},Object.defineProperty(a.prototype,"halfItem",{set:function(t){this._halfItem||(this._halfItem=new A.TeamCopyInviteHalfItem,this.addChild(this._halfItem),this._halfItem.pos(51,110)),this._halfItem.setData(t),this._halfItem.visible=!0},enumerable:!0,configurable:!0}),a.prototype.canSelectHandler=function(t){if(1==t){var e=k.instance.half;e&&A.TeamBattleCtrl.instance.getActorInfo([e[0]])}return!0},a.prototype.sortByFight=function(t,e){return e[4]-t[4]},a.prototype.btnHandler=function(){if(2===this._btnGroup.selectedIndex)for(var t=0;t<this._list.datas.length;t++){var e=this._list.datas[t],i=(e[0],e[1]);A.TeamBattleCtrl.instance.inviteJoinTeam(this._btnGroup.selectedIndex,i)}else A.TeamBattleCtrl.instance.inviteJoinTeam(this._btnGroup.selectedIndex,0)},a.prototype.close=function(t,e){s.instance.makeFactionPanel(!1),i.prototype.close.call(this,t,e)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup=this.destroyElement(this._btnGroup),i.prototype.destroy.call(this)},o=a,A.TeamCopyInviteAlert=o}(modules=modules||{}),function(t){var v,n,e,i,a,s,b,o;function r(){return null!==n&&n.apply(this,arguments)||this}v=t.teamBattle||(t.teamBattle={}),e=ui.TeamCopyRoomAlertUI,i=t.common.AvatarClip,a=t.rename.RenameModel,s=t.marry.MarryModel,b=t.warband.WarbandModel,n=e,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this._leftAvatar=i.normalCreate(),this._leftAvatar.pos(162,459),this.addChildAt(this._leftAvatar,2),this._rightAvatar=i.normalCreate(),this._rightAvatar.pos(497,459),this.addChildAt(this._rightAvatar,2),this._centerAvatar=i.normalCreate(),this._centerAvatar.pos(330,342),this.addChildAt(this._centerAvatar,2),this._time=0,this._avatars=[this._centerAvatar,this._leftAvatar,this._rightAvatar],this._nameTxts=[this.centerNameTxt,this.leftNameTxt,this.rightNameTxt],this._fightTxts=[this.centerFightTxt,this.leftFightTxt,this.rightFightTxt],this._addBoxs=[null,this.leftAddBox,this.rightAddBox],this._infoBoxs=[null,this.leftInfoBox,this.rightInfoBox],this._tipBoxs=[null,this.leftTipBox,this.rightTipBox],this._btns=[this.centerBtn,this.leftBtn,this.rightBtn],this.hintBox.visible=this.hintTxt.visible=!1},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.leftAddBox,this,this.addBtnHandler),this.onAutoClick(this.rightAddBox,this,this.addBtnHandler),this.onAutoClick(this.centerBtn,this,this.centerBtnHandler),this.onAutoClick(this.leftBtn,this,this.kickedTeamHandler,[1]),this.onAutoClick(this.rightBtn,this,this.kickedTeamHandler,[2]),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.warbandIcon,this,this.warbandClick),this.onAutoGlobalEvt("TEAM_BATTLE_MATCH_UPDATE",this,this.updateView),this.onAutoGlobalEvt("TEAM_COPY_ROOM_UPDATE",this,this.roomUpdateHandler),this.onAutoGlobalEvt("TEAM_BATTLE_MATCH_STATE_UPDATE",this,this.showTime),this.onAutoGlobalEvt("TEAM_COPY_MEMBER_KICKED",this,n.prototype.close),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc)},r.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),n.prototype.offEvt.call(this)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.timeTxt.visible=!1,this.btn.visible=!0,this.updateView()},r.prototype.setHiddenBox=function(t){this.hiddenBox.visible=t,this.height=this.bgImg.height=t?730:635,this.tipTxt.y=t?780:685},r.prototype.updateView=function(){var t=v.TeamBattleModel.Instance.matchState,e=v.TeamBattleModel.Instance.playerInfos,i=[],n=v.TeamBattleModel.Instance.mineInfo,s=v.TeamBattleModel.Instance.bossInfo;if(s==n)i.push.apply(i,[n].concat(e)),this.setHiddenBox(!0);else{for(var o=e.concat(),a=0,r=o.length;a<r;a++)if(o[a][8]){var l=o.splice(a,1)[0];i.push(l);break}i.push.apply(i,[n].concat(o)),this.setHiddenBox(1==t)}for(this._infos=i,this._isFull=3<=i.length,this._isFull?this.btn.label="进入副本":(this.btn.label="快速匹配",Laya.timer.clear(this,this.loopHandler),this.btn.visible=!0,this.timeTxt.visible=!1),a=0;a<this._avatars.length;a++){var h=i[a];if(h){this._fightTxts[a].visible=this._avatars[a].visible=!0,this._infoBoxs[a]&&(this._infoBoxs[a].visible=!0),this._btns[a].visible=s==n,this._tipBoxs[a]&&(this._tipBoxs[a].visible=!1),this._addBoxs[a]&&(this._addBoxs[a].visible=!1);var c=h[1];this._nameTxts[a].text=c;var p=h[5];this._fightTxts[a].text="战力:"+CommonUtil.bigNumToString(p)+" ";var u=h[9],d=u[6],y=u[7];this._avatars[a].reset(y,d)}else this._infoBoxs[a].visible=this._btns[a].visible=this._fightTxts[a].visible=this._avatars[a].visible=!1,this._tipBoxs[a].visible=this._addBoxs[a].visible=!0}this.showTime();var g=b.instance.info;if(g){this.warbandBg.visible=this.warbandIcon.visible=this.warbandBuffTxt.visible=this.warbandNumTxt.visible=!0,this.warbandIcon.skin="assets/icon/warband/"+g[2]+".png",this._warbandNum=1;var f=g[4];for(a=0,r=f.length;a<r;++a)for(var _=0,m=e.length;_<m;++_)if(f[a][0]===e[_][0]){++this._warbandNum;break}this.warbandNumTxt.text=this._warbandNum+"/3"}else this.warbandBg.visible=this.warbandIcon.visible=this.warbandBuffTxt.visible=this.warbandNumTxt.visible=!1},r.prototype.warbandClick=function(){this._warbandNum&&WindowManager.instance.open(770,this._warbandNum)},r.prototype.addBtnHandler=function(){t.faction.FactionModel.instance.hasFaction||-1!=t.warband.WarbandModel.instance.leaderId||s.instance.isMarried?WindowManager.instance.open(353):t.notice.SystemNoticeManager.instance.addNotice("尚未加入仙盟或战队或结缘，请加入仙盟或战队或结缘后再邀请！",!0)},r.prototype.centerBtnHandler=function(){var t=this,e=Handler.create(this,function(){v.TeamBattleCtrl.instance.destoryTeam(),n.prototype.close.call(t)});CommonUtil.alert("提示","是否确定解散队伍?",[e],[])},r.prototype.close=function(){var t,e=this;t=v.TeamBattleModel.Instance.mineInfo[8]?Handler.create(this,function(){v.TeamBattleCtrl.instance.destoryTeam(),n.prototype.close.call(e)}):Handler.create(this,function(){v.TeamBattleCtrl.instance.leaveTeam(),WindowManager.instance.close(97),v.TeamBattleModel.Instance.isHaveRoom=!1,n.prototype.close.call(e)});var i=Handler.create(this,function(){v.TeamBattleModel.Instance.isHaveRoom=!0,n.prototype.close.call(e)});CommonUtil.alert("提示","您是否退出队伍?",[i,"缩小界面"],[t,"离开队伍"])},r.prototype.btnHandler=function(){this._isFull?v.TeamBattleCtrl.instance.reqBeginMatch(2091):v.TeamBattleCtrl.instance.startMatch()},r.prototype.showTime=function(){1==v.TeamBattleModel.Instance.matchState&&(this._time=t.config.BlendCfg.instance.getCfgById(10705)[1][0],this.setHiddenBox(!0),this.btn.visible=!1,this.timeTxt.visible=!0,Laya.timer.clear(this,this.loopHandler),this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler))},r.prototype.loopHandler=function(){for(var t=0;t<this._btns.length;t++){var e=this._btns[t];e&&(e.visible=!1)}this._time<=0?(Laya.timer.clear(this,this.loopHandler),v.TeamBattleModel.Instance.matchState=2,n.prototype.close.call(this)):(this.timeTxt.text=Math.floor(this._time/1e3)+"s后进入副本",this._time-=1e3)},r.prototype.roomUpdateHandler=function(){v.TeamBattleModel.Instance.isHaveRoom||n.prototype.close.call(this)},r.prototype.kickedTeamHandler=function(t){var e=this._infos[t],i=e[0],n=e[1],s="是否将队员"+CommonUtil.formatHtmlStrByColor("#ffec7c","【"+n+"】")+"踢出房间?",o=Handler.create(v.TeamBattleCtrl.instance,v.TeamBattleCtrl.instance.kickedTeam,[i]);CommonUtil.alert("提示",s,[o],[])},r.prototype.updateName=function(){if(this._infos){var t=a.instance.updateNameReply;if(t)for(var e=0,i=this._infos.length;e<i;e++)if(this._avatars[e]&&t&&t[0]===this._infos[e][0]){this._nameTxts[e].text=t[1];break}}},r.prototype.updateOcc=function(){if(this._infos){var t=a.instance.updateOccReply;if(t)for(var e=0,i=this._infos.length;e<i;e++)if(this._avatars[e]&&t&&t[0]===this._infos[e][0]){var n=this._infos[e][9],s=n[6],o=n[7];o=o-o%10+t[1],this._avatars[e].reset(o,s);break}}},r.prototype.destroy=function(){this._nameTxts=this.destroyElement(this._nameTxts),this._fightTxts=this.destroyElement(this._fightTxts),this._addBoxs=this.destroyElement(this._addBoxs),this._infoBoxs=this.destroyElement(this._infoBoxs),this._tipBoxs=this.destroyElement(this._tipBoxs),this._btns=this.destroyElement(this._btns),this._centerAvatar=this.destroyElement(this._centerAvatar),this._leftAvatar=this.destroyElement(this._leftAvatar),this._rightAvatar=this.destroyElement(this._rightAvatar),this._avatars.length=0,this._avatars=null,this._infos&&(this._infos.length=0,this._infos=null),n.prototype.destroy.call(this)},o=r,v.TeamCopyRoomAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.teamBattle||(t.teamBattle={}),n=ui.TeamCopyAskAlertUI,s=t.common.CustomList,o=t.teamInvite.TeamInviteModel,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=new s,this._list.scrollDir=1,this._list.x=51,this._list.y=110,this._list.width=560,this._list.height=525,this._list.hCount=1,this._list.itemRender=e.TeamCopyAskItem,this._list.spaceY=5,this.addChild(this._list)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("TEAM_INVITES_UPDATE",this,this.updateList),this.onAutoClick(this.btn,this,this.btnHandler)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateList()},r.prototype.updateList=function(){var t=o.instance.teamInvites;this._list.datas=t,this.noBox.visible=!(0<t.length)},r.prototype.btnHandler=function(){o.instance.delAllInvites()},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},a=r,e.TeamCopyAskAlert=a}(modules=modules||{}),function(n){var s,e,t,i,o,a,r,l,h;function c(){return null!==e&&e.apply(this,arguments)||this}s=n.sheng_yu||(n.sheng_yu={}),t=n.common.CustomList,i=Laya.Event,o=n.config.ClasSsceneTempleBossCfg,a=n.common.SimpleList,r=n.common.CustomClip,l=n.bag.BagModel,e=ui.ShengYuBossViewUI,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnList=a.create(n.forbiddenBoss.BossBtnItem,158,172,2,1,-10,0),this._btnList.pos(25,982),this._btnList.size(666,172),this.addChild(this._btnList),this._btnList.datas=[41,246,42,723,777],this._list=new t,this._list.width=624,this._list.height=762,this._list.hCount=1,this._list.spaceY=10,this._list.itemRender=s.ShengYuBossItem,this._list.x=8,this._list.y=14,this.listImg.addChild(this._list),this._addTimesBtnClip=r.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.addBtn.addChild(this._addTimesBtnClip),this._addTimesBtnClip.pos(-10,-10),this._addTimesBtnClip.visible=!1},c.prototype.selectHandler=function(){switch(this._btnList.selectedIndex){case 0:WindowManager.instance.open(75);break;case 1:break;case 2:WindowManager.instance.open(80);break;case 3:WindowManager.instance.open(1135);break;case 4:WindowManager.instance.open(1175)}1!=this._btnList.selectedIndex&&(this._btnList.selectedIndex=1)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnList.selectedIndex=1,s.ShenYuBossCtrl.instance.GetStrength(),this.showDrawNum();var t=o.instance.getCengDictionaryKeys();t.sort(this.sortFunc.bind(this)),s.ShengYuBossModel.instance.moRengCeng=t[0],this._list.datas=t,this._list.selectedIndex=0},c.prototype.sortFunc=function(t,e){var i=this.getState(t),n=this.getState(e);return 1==i&&1==n?t<e?1:-1:0==i&&0==n?t<e?-1:1:i<n?1:-1},c.prototype.getState=function(t){var e=n.born.BornModel.instance.lv;return o.instance.getCfgsByGrade(t,0)[4]<=e?1:0},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnList,"select",this,this.selectHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoClick(this.ziDongBtn,this,this.ziDongBtnHandler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoGlobalEvt("SHENG_YU_BOSS_OPENONE",this,this.updateOpenList),this.onAutoGlobalEvt("SHENG_YU_BOSS_UPDATE",this,this.showDrawNum),this.onAutoGlobalEvt("SHENG_YU_BOSS_ZIDONG_UPDATE",this,this.showZiDongBtn),this.onAutoEvt(this._list,i.SELECT,this,this.listHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.onUpdatePrivilege)},c.prototype.onUpdatePrivilege=function(){var t=n.bag.BagModel.instance.getItemCountById(s.ShengYuBossModel.instance.itemId);this.textTip.text="自动使用体力丹(剩余"+t+"个)";var e=s.ShengYuBossModel.instance.stength,i=l.instance.getItemCountById(s.ShengYuBossModel.instance.itemId);e<=50&&0<i?(this._addTimesBtnClip.isPlaying||r.thisPlay(this._addTimesBtnClip),this._addTimesBtnClip.visible=!0):(r.thisStop(this._addTimesBtnClip),this._addTimesBtnClip.visible=!1)},c.prototype.listHandler=function(){this._list.selectedIndex},c.prototype.addBtnHandler=function(){s.ShengYuBossModel.instance.addHandler()},c.prototype.ziDongBtnHandler=function(){s.ShengYuBossModel.instance._bollZiDong?s.ShenYuBossCtrl.instance.SetStrength(0):0<n.bag.BagModel.instance.getItemCountById(s.ShengYuBossModel.instance.itemId)?s.ShenYuBossCtrl.instance.SetStrength(1):n.notice.SystemNoticeManager.instance.addNotice("背包中没有体力丹",!0)},c.prototype.showZiDongBtn=function(){s.ShengYuBossModel.instance._bollZiDong?this.ziDongBtn.selected=!0:this.ziDongBtn.selected=!1},c.prototype.showDrawNum=function(){var t=s.ShengYuBossModel.instance.maxTili,e=s.ShengYuBossModel.instance.stength;this.drawNum.text=e+"/"+t;var i="#ff3e3e";i=0==e?"#ff3e3e":"#168a17",this.drawNum.color=i,this.showZiDongBtn(),this.onUpdatePrivilege()},c.prototype.updateOpenList=function(){this._list.datas&&this._list.relayout()},c.prototype.ruleBtnHandler=function(){CommonUtil.alertHelp(20066)},c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._btnList=this.destroyElement(this._btnList),e.prototype.destroy.call(this,t)},h=c,s.ShengYuBossPanel=h}(modules=modules||{}),function(t){var a,e,i,n,r,s,c,o;function l(){var t=e.call(this)||this;return t._listState=!0,t._listPlayerState=!0,t}a=t.sheng_yu||(t.sheng_yu={}),i=t.common.CustomList,n=Laya.Event,r=t.config.ClasSsceneTempleBossCfg,s=t.player.PlayerModel,c=t.bossDungeon.BossDungeonModel,e=ui.ShengYuBossAndPlayerListViewUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=6,this.bottom=285,this.closeByOthers=!1,this.layer=3,this._list=new i,this._list.width=260,this._list.height=157,this._list.hCount=1,this._list.itemRender=a.ShengYuBossListItemItem,this._list.x=295,this._list.y=36,this._list.selectedIndex=-1,this._list.canSelectSameItem=!0,this.addChild(this._list),this._listPlayer=new i,this._listPlayer.width=290,this._listPlayer.height=157,this._listPlayer.hCount=1,this._listPlayer.itemRender=a.ShengYuBossPlayerListItemItem,this._listPlayer.x=0,this._listPlayer.y=36,this._listPlayer.selectedIndex=-1,this._listPlayer.canSelectSameItem=!0,this.addChild(this._listPlayer),this._meId=0},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.expandBtn,this,this.expandBtnHandler),this.onAutoEvt(this._list,n.SELECT,this,this.selectHandler),this.onAutoClick(this.expandPlayerBtn,this,this.expandPlayerBtnHandler),this.onAutoEvt(this._listPlayer,n.SELECT,this,this.listPlayerHandler),this.onAutoGlobalEvt("SHENG_YU_BOSS_SCENE_UPDATE",this,this.updateBossInfo),this.onAutoGlobalEvt("BOSS_OWN_UPDATE",this,this.updatePlayerInfo),this.onAutoGlobalEvt("BOSS_ATTACK_UPDATE",this,this.updatePlayerInfo),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayerInfo)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),a.ShenYuBossCtrl.instance.nowCengShu(),this._list.selectedIndex=-1,this._listPlayer.selectedIndex=-1,this._meId=s.instance.actorId,this.updateBossInfo(!0),this.updatePlayerInfo(),this._listState=!0,this._listPlayerState=!0,this.changUI(),this.changPlayerUI()},l.prototype.selectHandler=function(){-1!=this._list.selectedIndex&&(this._listPlayer.selectedIndex=-1)},l.prototype.expandBtnHandler=function(){this._listState?this._listState=!1:this._listState=!0,this.changUI()},l.prototype.listPlayerHandler=function(){-1!=this._listPlayer.selectedIndex&&(this._list.selectedIndex=-1)},l.prototype.expandPlayerBtnHandler=function(){this._listPlayerState?this._listPlayerState=!1:this._listPlayerState=!0,this.changPlayerUI()},l.prototype.changUI=function(){this._listState?(this.bgImg.height=197,this.bgImg.y=0,this._list.height=157,this._list.y=36,this.titleText.y=12,this.expandBtn.y=13,this.expandBtn.skin="common/btn_tonyong_28.png"):(this.bgImg.height=76,this.bgImg.y=78,this._list.height=43,this._list.y=108,this.titleText.y=88,this.expandBtn.y=87,this.expandBtn.skin="common/btn_tonyong_29.png"),this.updateBossInfo()},l.prototype.changPlayerUI=function(){this._listPlayerState?(this.bgPlayerImg.height=197,this.bgPlayerImg.y=0,this._listPlayer.height=157,this._listPlayer.y=36,this.titleText1.y=12,this.expandPlayerBtn.y=13,this.expandPlayerBtn.skin="common/btn_tonyong_28.png"):(this.bgPlayerImg.height=76,this.bgPlayerImg.y=78,this._listPlayer.height=43,this._listPlayer.y=108,this.titleText1.y=88,this.expandPlayerBtn.y=87,this.expandPlayerBtn.skin="common/btn_tonyong_29.png"),this.updatePlayerInfo()},l.prototype.playerBoss=function(){var t=DungeonModel.instance.getLiveBoss();a.ShengYuBossModel.instance.setSelectTarget(t,!0)},l.prototype.noneWhileOneHandler=function(){c.instance.searchBossIds&&this.playerBoss()},l.prototype.updateBossInfo=function(t){void 0===t&&(t=!1);var e=r.instance.getBossInfoByGrade(a.ShengYuBossModel.instance.nowCeng);if(e.sort(this.sortOverd.bind(this)),this._list.datas=e,t&&e){for(var i=new Array,n=0;n<e.length;n++){var s=e[n];if(s){var o=s[3];i.push(o)}}c.instance.searchBossIds=i,c.instance.searchBossType=2351,this.playerBoss()}},l.prototype.sortOverd=function(t,e){var i=t[2];return e[2]<i?1:-1},l.prototype.updatePlayerInfo=function(){for(var t=[],e=[],i=[],n=[],s=0,o=c.instance.getPlayerInfo();s<o.length;s++){var a=o[s],r=a[0];if(c.instance.isSelectBossOwner(r)){var l=c.instance.playerIsMeAttack(r)||c.instance.playerIsAttackMe(r);t.push([a[0],a[1],l?3:1])}else r!=this._meId&&(c.instance.playerIsMeAttack(r)?e.push([a[0],a[1],2]):c.instance.playerIsAttackMe(r)?i.push([a[0],a[1],2]):n.push([a[0],a[1],0]))}var h=t.concat(e,i,n);this._listPlayer.datas=h,this._data=h},l.prototype.close=function(){c.instance.resetShuJu(),e.prototype.close.call(this)},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._listPlayer=this.destroyElement(this._listPlayer),e.prototype.destroy.call(this,t)},o=l,a.ShengYuBossAndPlayerListPanel=o}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return e.call(this)||this}n=t.sheng_yu||(t.sheng_yu={}),i=t.common.CustomClip,s=t.bag.BagModel,e=ui.ShengYuBossInformationViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=573,this.closeByOthers=!1,this.layer=3,this._addTimesBtnClip=i.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.addBtn.addChild(this._addTimesBtnClip),this._addTimesBtnClip.pos(-10,-10),this._addTimesBtnClip.visible=!1},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoClick(this.ziDongBtn,this,this.ziDongBtnHandler),this.onAutoGlobalEvt("SHENG_YU_BOSS_ZIDONG_UPDATE",this,this.showZiDongBtn),this.onAutoGlobalEvt("SHENG_YU_BOSS_SCENE_UPDATE",this,this.showDrawNum),this.onAutoGlobalEvt("SHENG_YU_BOSS_UPDATE",this,this.showDrawNum),this.onAutoGlobalEvt("BAG_UPDATE",this,this.onUpdatePrivilege),this.onAutoGlobalEvt("WEEK_CARD_UPDATE_INFO",this,this.showDrawNum)},a.prototype.onUpdatePrivilege=function(){var t=n.ShengYuBossModel.instance.stength,e=s.instance.getItemCountById(n.ShengYuBossModel.instance.itemId);t<=50&&0<e?(this._addTimesBtnClip.isPlaying||i.thisPlay(this._addTimesBtnClip),this._addTimesBtnClip.visible=!0):(i.thisStop(this._addTimesBtnClip),this._addTimesBtnClip.visible=!1)},a.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.showDrawNum()},a.prototype.showDrawNum=function(){var t=n.ShengYuBossModel.instance.maxTili,e=n.ShengYuBossModel.instance.stength;e=Math.min(t,e),this.drawNum.text=e+"/"+t;var i="#ff3e3e";i=0==e?"#ff3e3e":"#55ff28",this.drawNum.color=i,this.timeText.text="圣殿BOSS "+n.ShengYuBossModel.instance.nowCeng+"层",this.showZiDongBtn(),this.onUpdatePrivilege()},a.prototype.addBtnHandler=function(){n.ShengYuBossModel.instance.addHandler()},a.prototype.ziDongBtnHandler=function(){n.ShengYuBossModel.instance._bollZiDong?n.ShenYuBossCtrl.instance.SetStrength(0):0<t.bag.BagModel.instance.getItemCountById(n.ShengYuBossModel.instance.itemId)?n.ShenYuBossCtrl.instance.SetStrength(1):t.notice.SystemNoticeManager.instance.addNotice("背包中没有体力丹",!0)},a.prototype.showZiDongBtn=function(){n.ShengYuBossModel.instance._bollZiDong?this.ziDongBtn.selected=!0:this.ziDongBtn.selected=!1},o=a,n.ShengYuBossInformationPanel=o}(modules=modules||{}),function(e){var i,n,t;function s(){return null!==n&&n.apply(this,arguments)||this}i=e.sheng_yu||(e.sheng_yu={}),n=ui.ShengYuBossLeftViewUI,__extends(s,n),s.prototype.initialize=function(){n.prototype.initialize.call(this),this.left=17,this.bottom=480,this.closeByOthers=!1,this.layer=3,this._type=0},s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.handBookBtn,this,this.handBookBtnHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.regAutoRP(this.handbookRPImg,["shenYuBossRP"])},s.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.updateBag()},s.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t),this._type=t},s.prototype.handBookBtnHandler=function(){0===this._type?WindowManager.instance.open(406):1===this._type?WindowManager.instance.open(408):2===this._type?WindowManager.instance.open(576):3===this._type?WindowManager.instance.open(1185):4===this._type?WindowManager.instance.open(1274):5===this._type&&WindowManager.instance.open(1484)},s.prototype.updateBag=function(t){void 0===t&&(t=7),this.BagManTipBox.visible=!1,7==t&&(e.bag.BagModel.instance.getBagEnoughById(7)<=i.ShengYuBossModel.instance.tipsNum?this.newTitleBtnEffectLoop():this._tipBox1Tween&&this._tipBox1Tween.stop())},s.prototype.newTitleBtnEffectLoop=function(){this._tipBox1Tween&&(this._tipBox1Tween.stop(),this.BagManTipBox.visible=!1),this.BagManTipBox.y=-61,this.BagManTipBox.visible=!0,this._tipBox1Tween=TweenJS.create(this.BagManTipBox).to({y:this.BagManTipBox.y-15},600).start().yoyo(!0).repeat(99999999)},s.prototype.close=function(){this._tipBox1Tween&&(this._tipBox1Tween.stop(),this.BagManTipBox.visible=!1),n.prototype.close.call(this)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._tipBox1Tween&&(this._tipBox1Tween.stop(),this._tipBox1Tween=null),n.prototype.destroy.call(this,t)},t=s,i.ShengYuBossLeftPanel=t}(modules=modules||{}),function(t){var n,e,i,s,o,a,r,l;function h(){return e.call(this)||this}n=t.sheng_yu||(t.sheng_yu={}),i=t.common.CustomList,s=t.config.ClasSsceneTempleBossCfg,o=t.bag.BagModel,a=t.common.CommonUtil,r=t.common.CustomClip,e=ui.ShengYuBossShouYiAlertUI,__extends(h,e),h.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.width=532,this._list.height=283,this._list.hCount=5,this._list.spaceX=8,this._list.itemRender=n.ShenYuRewradItem1,this._list.x=0,this._list.y=0,this.jinRShouYiBox.addChild(this._list),this._listBoss=new i,this._listBoss.width=532,this._listBoss.height=283,this._listBoss.scrollDir=2,this._listBoss.vCount=1,this._listBoss.spaceX=8,this._listBoss.itemRender=n.ShenYuRewradItem,this._listBoss.x=0,this._listBoss.y=0,this.BossListBox.addChild(this._listBoss),this._listXiaoGuai=new i,this._listXiaoGuai.width=532,this._listXiaoGuai.height=283,this._listXiaoGuai.scrollDir=2,this._listXiaoGuai.vCount=1,this._listXiaoGuai.spaceX=8,this._listXiaoGuai.itemRender=n.ShenYuRewradItem,this._listXiaoGuai.x=0,this._listXiaoGuai.y=0,this.xiaoGuaiListBox.addChild(this._listXiaoGuai),this.initializeClip()},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showReward(),this.updateBag()},h.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._list.datas=t,this.noGoodsTxt.visible=!(t&&0<t.length)},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("SHENG_YU_BOSS_SCENE_UPDATE",this,this.showReward),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag)},h.prototype.btnHandler=function(){n.ShenYuBossCtrl.instance.getState()?n.ShenYuBossCtrl.instance.PickTempReward():t.notice.SystemNoticeManager.instance.addNotice("暂无奖励可领",!0)},h.prototype.showReward=function(){var t=s.instance.getCfgsByGrade(n.ShengYuBossModel.instance.nowCeng,0),e=t[6],i=t[11];this._listBoss.datas=e,this._listXiaoGuai.datas=i,this.BossText.text="BOSS奖励预览:("+n.ShengYuBossModel.instance.nowCeng+"层)",this.xiaoGuaiText.text="小怪奖励预览:("+n.ShengYuBossModel.instance.nowCeng+"层)"},h.prototype.updateBag=function(t){void 0===t&&(t=7),7==t&&(this._showIds=this.genGrids(),this._showIds?(this._list.datas=this._showIds,0<this._showIds.length?(this._tenBtnBtnClip&&(this._tenBtnBtnClip.visible=!0,this._tenBtnBtnClip.play()),this.btn.gray=!1,this.btn.mouseEnabled=!0):(this._tenBtnBtnClip&&(this._tenBtnBtnClip.visible=!1,this._tenBtnBtnClip.stop()),this.btn.gray=!0,this.btn.mouseEnabled=!1)):(this._tenBtnBtnClip&&(this._tenBtnBtnClip.visible=!1,this._tenBtnBtnClip.stop()),this.btn.gray=!0,this.btn.mouseEnabled=!1),this.noGoodsTxt.visible=!1,(!this._showIds||this._showIds.length<=0)&&(this.noGoodsTxt.visible=!0))},h.prototype.genGrids=function(){var t=o.instance.getItemsByBagId(7);return t?t=t.sort(this.sortFunc.bind(this)):[]},h.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.getItemQualityById(i),o=a.getItemQualityById(n);return s!==o?o-s:n-i},h.prototype.initializeClip=function(){this._tenBtnBtnClip=new r,this.addChild(this._tenBtnBtnClip),this._tenBtnBtnClip.skin="assets/effect/btn_light.atlas";for(var t=[],e=0;e<16;e++)t[e]="btn_light/"+e+".png";this._tenBtnBtnClip.frameUrls=t,this._tenBtnBtnClip.scale(1,1,!0),this._tenBtnBtnClip.pos(this.btn.x-6,this.btn.y-8,!0)},h.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),this._listBoss&&(this._listBoss.removeSelf(),this._listBoss.destroy(),this._listBoss=null),this._listXiaoGuai&&(this._listXiaoGuai.removeSelf(),this._listXiaoGuai.destroy(),this._listXiaoGuai=null),this._tenBtnBtnClip&&(this._tenBtnBtnClip.removeSelf(),this._tenBtnBtnClip.destroy(),this._tenBtnBtnClip=null),e.prototype.destroy.call(this)},l=h,n.ShengYuBossShouYiAlert=l}(modules=modules||{}),function(t){var e,n,i,s,o,a;function r(){return null!==n&&n.apply(this,arguments)||this}e=t.sheng_yu||(t.sheng_yu={}),i=ui.ShengYuTipAlertUI,s=t.spiritDungeon.SpiritDungeonCtrl,o=t.divinatory_card.DivinatoryCardCtrl,n=i,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this._time=0},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoClick(this.cancelBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},r.prototype.offEvt=function(){n.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.setOpenParam=function(t){n.prototype.setOpenParam.call(this,t),this._sceneType=t;var e="",i="";31===this._sceneType?i=e="体力":35===this._sceneType?i=e="元力":47===this._sceneType?(e="八卦值",i="八卦"):49===this._sceneType&&(e="异宝值",i="异宝"),this.noticeTxt.text=e+"不足，是否使用"+i+"丹，获取BOSS收益？"},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._time=10},r.prototype.okBtnHandler=function(){31===this._sceneType?e.ShenYuBossCtrl.instance.UseStrengthItem(1):35===this._sceneType?s.instance.useYuanliItem(1):47===this._sceneType?o.instance.useDivinatoryItem(1):49===this._sceneType&&t.outside_show_dungeon.OutsideShowDungeonCtrl.instance.useShowEquipItem(1),n.prototype.close.call(this)},r.prototype.loopHandler=function(){this._time<=0?this.close():(this._time--,this.timeTxt.text=""+this._time)},r.prototype.close=function(){SceneCtrl.instance.exitDungeon(),n.prototype.close.call(this)},a=r,e.ShengYuBossTipAlert=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.sheng_yu||(t.sheng_yu={}),n=ui.ShengYuTipAlertUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._time=0,this.cancelBtn.visible=!1,this.okBtn.x=237,this.okBtn.label="确认"},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._sceneType=t;var e="";31===this._sceneType?e="体力":35===this._sceneType?e="元力":47===this._sceneType?e="八卦值":49===this._sceneType&&(e="异宝值"),this.noticeTxt.text=e+"不足,无法领取BOSS奖励,是否离开副本?"},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._time=10},o.prototype.loopHandler=function(){this._time<=0?this.close():(this._time--,this.timeTxt.text=""+this._time)},o.prototype.close=function(){SceneCtrl.instance.exitDungeon(),i.prototype.close.call(this)},s=o,e.ShengYuBossLeaveAlert=s}(modules=modules||{}),function(e){var i,n,t,s,o,a,r,l,h,c;function p(){return null!==n&&n.apply(this,arguments)||this}i=e.spiritDungeon||(e.spiritDungeon={}),t=e.common.SimpleList,s=ui.SpiritDungeonViewUI,o=e.config.BlendCfg,a=e.config.SceneYuanShenBossCfg,r=e.bag.BagModel,l=e.config.MonsterResCfg,h=e.common.FuncBtnGroup,n=s,__extends(p,n),p.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=this.centerY=0,this._layerList=t.create(i.SpiritLayerItem,214,190),this._layerList.pos(39,260,!0),this._layerList.size(214,635),this.addChild(this._layerList),this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8],this._typeImgs=[this.typeImg1,this.typeImg2,this.typeImg3,this.typeImg4,this.typeImg5],this._bossHeads=[this.bossHead1,this.bossHead2,this.bossHead3,this.bossHead4],this._bossTimes=[this.bossTime1,this.bossTime2,this.bossTime3,this.bossTime4],this._spiritMax=o.instance.getCfgById(80007)[1][0],this._btnGroup=new h,this._btnGroup.setBtns(this.spiritBtn,this.divinatoryBtn,this.yibaoBtn),this._btnGroup.setFuncIds(354,837,852)},p.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.addBtn,this,this.addHandler),this.onAutoClick(this.autoBtn,this,this.autoHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.enterBtn,this,this.enterHandler),this.onAutoEvt(this._layerList,"select",this,this.selectLayer),this.onAutoClick(this.typeImg1,this,this.selectType,[1]),this.onAutoClick(this.typeImg2,this,this.selectType,[2]),this.onAutoClick(this.typeImg3,this,this.selectType,[3]),this.onAutoClick(this.typeImg4,this,this.selectType,[4]),this.onAutoClick(this.typeImg5,this,this.selectType,[5]),this.onAutoGlobalEvt("SPIRIT_DUNGEON_SPIRIT_UPDATE",this,this.updateSpirit),this.onAutoGlobalEvt("SPIRIT_DUNGEON_AUTO_USE_UPDATE",this,this.updateAutoUse),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateBoss),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.regAutoRP(this.spiritDungeonRP,["spiritDungeonRP"]),this.regAutoRP(this.divinatoryCardBossRP,["divinatoryCardBossRP"]),this.regAutoRP(this.yibaoRP,["outsideShowDungeonRP"]),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setTextTip)},p.prototype.setTextTip=function(){var t=e.bag.BagModel.instance.getItemCountById(13650001);this.textTip.text="自动使用元力丹(剩余"+t+"个)"},p.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.updateSpirit(),this.updateAutoUse(),this.selectType(1),this._btnGroup.selectedIndex=0,this.setTextTip()},p.prototype.close=function(){n.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},p.prototype.addHandler=function(){i.SpiritDungeonUtil.addSpirit(e.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax))},p.prototype.autoHandler=function(){i.SpiritDungeonUtil.changeAutoUse()},p.prototype.helpHandler=function(){CommonUtil.alertHelp(20080)},p.prototype.updateBag=function(t){0===t&&i.SpiritDungeonModel.instance.autoUse&&0===r.instance.getItemCountById(13650001)&&i.SpiritDungeonCtrl.instance.setAutoUserYuanli(!1)},p.prototype.enterHandler=function(){var t=this._layerList.selectedData;e.common_group.CommonGroupUtil.OldCopyTeamIsOtherTeam1(5,t[1])},p.prototype.selectType=function(t){i.SpiritDungeonModel.instance.selectType(t)||(this.selectedImg.pos(this._typeImgs[t-1].x-6,this._typeImgs[t-1].y-6,!0),this._layerList.datas=a.instance.getFirstBossesByType(t),this._layerList.selectedIndex=0)},p.prototype.selectLayer=function(){for(var t=this._layerList.selectedData,e=t[5],i=0,n=e.length;i<n;i++)this._items[i].dataSource=[e[i],0,0,null],this._items[i].visible=!0;for(i=e.length,n=this._items.length;i<n;i++)this._items[i].visible=!1;this.modeTxt.text=0===t[6]?"和平：其他玩家无法对你造成伤害":"混乱：你可能会受到其他玩家的攻击",this.modeTxt.color=0===t[6]?"#168a17":"#ff3e3e";var s=a.instance.getBossIdsByLayer(t[1]);for(i=0,n=(this._bossIds=s).length;i<n;i++)if(this._bossHeads[i]){var o=l.instance.getCfgById(s[i]);this._bossHeads[i].skin="assets/icon/monster/"+(o[3]||310001)+".png"}this.updateBoss()},p.prototype.updateBoss=function(){if(this._bossIds){var t=!1;Laya.timer.clear(this,this.loopHandler);for(var e=0,i=this._bossIds.length;e<i;e++)if(this._bossTimes[e]){var n=DungeonModel.instance.getBossInfoById(this._bossIds[e]);n&&n[2][0]?(t=!0,this._bossTimes[e].color="#ff3e3e"):(this._bossTimes[e].color="#168a17",this._bossTimes[e].text="已刷新")}t&&(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler())}},p.prototype.loopHandler=function(){for(var t=0,e=this._bossIds.length;t<e;t++)if(this._bossTimes[t]&&this._bossTimes[t].visible){var i=DungeonModel.instance.getBossInfoById(this._bossIds[t]);i&&i[2][0]&&(this._bossTimes[t].text=CommonUtil.timeStampToHHMMSS(i[2][2]))}},p.prototype.updateSpirit=function(){this.spiritNumTxt.text=i.SpiritDungeonModel.instance.spirit+"/"+e.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax),this.spiritNumTxt.color=0===i.SpiritDungeonModel.instance.spirit?"#ff3e3e":"#168a17"},p.prototype.updateAutoUse=function(){this.autoBtn.selected=i.SpiritDungeonModel.instance.autoUse},p.prototype.destroy=function(t){void 0===t&&(t=!0),this._typeImgs=this.destroyElement(this._typeImgs),this._bossHeads=this.destroyElement(this._bossHeads),this._bossTimes=this.destroyElement(this._bossTimes),this._btnGroup=this.destroyElement(this._btnGroup),this._bossIds&&(this._bossIds.length=0),this._bossIds=null;for(var e=0,i=this._items.length;e<i;e++)this._items[e].removeSelf(),this._items[e].destroy();this._items.length=0,this._items=null,this._layerList=this.destroyElement(this._layerList),n.prototype.destroy.call(this,t)},p.prototype.changeHandler=function(){1===this._btnGroup.selectedIndex?WindowManager.instance.open(1163):2===this._btnGroup.selectedIndex&&WindowManager.instance.open(1272)},c=p,i.SpiritDungeonPanel=c}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.spiritDungeon||(t.spiritDungeon={}),n=t.common.SimpleList,s=ui.SpiritTeamAlertUI,i=s,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(e.SpiritTeamItem,560,114),this._list.pos(50,124,!0),this._list.size(560,564),this.addChild(this._list)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.autoAcceptBtn,this,this.autoAcceptHandler),this.onAutoClick(this.autoPassBtn,this,this.autoPassHandler),this.onAutoClick(this.createBtn,this,this.createHandler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoGlobalEvt("SPIRIT_DUNGEON_TEAMS_UPDATE",this,this.updateTeams),this.onAutoGlobalEvt("SPIRIT_TEAM_CAN_SEARCH_UPDATE",this,this.updateSearch),this.onAutoGlobalEvt("SPIRIT_TEAM_AUTO_ACCEPT_UPDATE",this,this.updateAutoAccept),this.onAutoGlobalEvt("SPIRIT_TEAM_MEMBERS_UPDATE",this,this.updateMembers)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.SpiritDungeonCtrl.instance.searchYuanshenTeam(),this.updateAutoAccept(),this.updateSearch(),this.updateMembers()},a.prototype.close=function(t,e){i.prototype.close.call(this,t,e),this._list.datas=null},a.prototype.autoAcceptHandler=function(){e.SpiritDungeonCtrl.instance.setYuanshenPersion(!e.SpiritDungeonModel.instance.autoAcceptInvite)},a.prototype.autoPassHandler=function(){e.SpiritDungeonCtrl.instance.setYuanshenTeam(!e.SpiritDungeonModel.instance.canSearch)},a.prototype.createHandler=function(){var t=e.SpiritDungeonModel.instance.members;t&&0<t.length?WindowManager.instance.open(571):e.SpiritDungeonCtrl.instance.createYuanshenTeam()},a.prototype.ruleBtnHandler=function(){4201===t.scene.SceneModel.instance.enterScene[0]?CommonUtil.alertHelp(19076):CommonUtil.alertHelp(20081)},a.prototype.updateTeams=function(){var t=e.SpiritDungeonModel.instance.teams;this._list.datas=t,this.noImg.visible=this.noTxt.visible=0===t.length},a.prototype.updateSearch=function(){this.autoPassBtn.selected=e.SpiritDungeonModel.instance.canSearch},a.prototype.updateAutoAccept=function(){this.autoAcceptBtn.selected=e.SpiritDungeonModel.instance.autoAcceptInvite},a.prototype.updateMembers=function(){var t=e.SpiritDungeonModel.instance.members;this.createBtn.label=t&&0<t.length?"我的队伍":"创建队伍"},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.SpiritTeamAlert=o}(modules=modules||{}),function(y){var g,i,t,e,f,_,n;function s(){return null!==i&&i.apply(this,arguments)||this}g=y.spiritDungeon||(y.spiritDungeon={}),t=ui.TeamCopyRoomAlertUI,e=y.common.AvatarClip,f=y.config.BlendCfg,_=y.warband.WarbandModel,i=t,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._leftAvatar=e.normalCreate(),this._leftAvatar.pos(162,459),this.addChildAt(this._leftAvatar,2),this._rightAvatar=e.normalCreate(),this._rightAvatar.pos(497,459),this.addChildAt(this._rightAvatar,2),this._centerAvatar=e.normalCreate(),this._centerAvatar.pos(330,342),this.addChildAt(this._centerAvatar,2),this._time=0,this._avatars=[this._centerAvatar,this._leftAvatar,this._rightAvatar],this._nameTxts=[this.centerNameTxt,this.leftNameTxt,this.rightNameTxt],this._fightTxts=[this.centerFightTxt,this.leftFightTxt,this.rightFightTxt],this._addBoxs=[null,this.leftAddBox,this.rightAddBox],this._infoBoxs=[null,this.leftInfoBox,this.rightInfoBox],this._tipBoxs=[null,this.leftTipBox,this.rightTipBox],this._btns=[this.centerBtn,this.leftBtn,this.rightBtn],this.btn.visible=this.timeTxt.visible=!1,this.hintBox.visible=this.hintTxt.visible=!0,CommonUtil.setHTMLPro(this.hintTxt,"#3d5981","SimHei",24),this.hintTxt.style.wordWrap=!1},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.leftAddBox,this,this.addBtnHandler),this.onAutoClick(this.rightAddBox,this,this.addBtnHandler),this.onAutoClick(this.centerBtn,this,this.centerBtnHandler),this.onAutoClick(this.leftBtn,this,this.kickedTeamHandler,[1]),this.onAutoClick(this.rightBtn,this,this.kickedTeamHandler,[2]),this.onAutoClick(this.warbandIcon,this,this.warbandClick),this.onAutoGlobalEvt("SPIRIT_TEAM_MEMBERS_UPDATE",this,this.updateMembers)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._warbandNum=0,this.updateMembers()},s.prototype.addBtnHandler=function(){WindowManager.instance.open(572)},s.prototype.centerBtnHandler=function(){var t=this,e=Handler.create(this,function(){g.SpiritDungeonCtrl.instance.leaveYuanshenTeam(),i.prototype.close.call(t)});CommonUtil.alert("提示","是否确定解散队伍?",[e],[])},s.prototype.kickedTeamHandler=function(t){var e=g.SpiritDungeonModel.instance.members[t];if(e){var i=e[0];if(i===PlayerModel.instance.actorId){var n="是否退出队伍";CommonUtil.alert("提示",n,[Handler.create(g.SpiritDungeonCtrl.instance,g.SpiritDungeonCtrl.instance.leaveYuanshenTeam)],[])}else{var s=e[1],o=(n="是否将队员"+CommonUtil.formatHtmlStrByColor("#ffec7c","【"+s+"】")+"踢出队伍?",Handler.create(g.SpiritDungeonCtrl.instance,g.SpiritDungeonCtrl.instance.kickedYuanshenMember,[i]));CommonUtil.alert("提示",n,[o],[])}}},s.prototype.updateMembers=function(){var t=g.SpiritDungeonModel.instance.members;if(0!==t.length){for(var e=t[0][0]===PlayerModel.instance.actorId,i=0,n=t.length;i<n;i++){var s=t[i];this._nameTxts[i].text=s[1],this._fightTxts[i].text="战力："+CommonUtil.bigNumToString(s[5]),this.setActorShow(this._avatars[i],s[9]),this._avatars[i].visible=!0,this._infoBoxs[i]&&(this._infoBoxs[i].visible=!0),this._addBoxs[i]&&(this._addBoxs[i].visible=this._tipBoxs[i].visible=!1),s[0]===PlayerModel.instance.actorId?(this._btns[i].visible=!0,this._btns[i].label=e?"解散":"退出"):(this._btns[i].visible=e,this._btns[i].label="踢出")}for(i=t.length,n=this._avatars.length;i<n;i++)this._avatars[i].visible=this._btns[i].visible=!1,this._infoBoxs[i]&&(this._infoBoxs[i].visible=!1),this._addBoxs[i]&&(this._addBoxs[i].visible=this._tipBoxs[i].visible=!0);var o=t.length-1,a=CommonUtil.formatHtmlStrByColor("#168a17","+"+o*f.instance.getCfgById(80010)[1][0]*100+"%"),r=CommonUtil.formatHtmlStrByColor("#168a17","+"+o*f.instance.getCfgById(80011)[1][0]*100+"%");this.hintTxt.innerHTML="组队增益:BOSS增伤"+a+",稀有掉率"+r,this.hintTxt.x=this.width-this.hintTxt.width>>1;var l=_.instance.info,h=y.config.SceneCfg.instance.getCfgById(MapUtils.currentID),c=(h[8],h[7]);if(this.hintBox.visible=this.hintTxt.visible=54!=c,l){this.warbandNumTxt.visible=this.warbandBuffTxt.visible=this.warbandIcon.visible=this.warbandBg.visible=!0,this.warbandIcon.skin="assets/icon/warband/"+l[2]+".png",this._warbandNum=0;var p=l[4];for(i=0,n=p.length;i<n;++i)for(var u=0,d=t.length;u<d;++u)if(p[i][0]===t[u][0]){++this._warbandNum;break}this.warbandNumTxt.text=this._warbandNum+"/3"}else this.warbandNumTxt.visible=this.warbandBuffTxt.visible=this.warbandIcon.visible=this.warbandBg.visible=!1}else this.close()},s.prototype.warbandClick=function(){this._warbandNum&&WindowManager.instance.open(770,this._warbandNum)},s.prototype.setActorShow=function(t,e){t.reset(e[7],e[6])},s.prototype.destroy=function(){this._nameTxts=this.destroyElement(this._nameTxts),this._fightTxts=this.destroyElement(this._fightTxts),this._addBoxs=this.destroyElement(this._addBoxs),this._infoBoxs=this.destroyElement(this._infoBoxs),this._tipBoxs=this.destroyElement(this._tipBoxs),this._btns=this.destroyElement(this._btns),this._centerAvatar=this.destroyElement(this._centerAvatar),this._leftAvatar=this.destroyElement(this._leftAvatar),this._rightAvatar=this.destroyElement(this._rightAvatar),this._avatars.length=0,this._avatars=null,this._infos&&(this._infos.length=0,this._infos=null),i.prototype.destroy.call(this)},n=s,g.SpiritTeamCreateAlert=n}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.spiritDungeon||(t.spiritDungeon={}),n=ui.SpiritTeamInviteAlertUI,s=t.common.SimpleList,o=t.notice.SystemNoticeManager,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create(e.SpiritTeamInviteItem,560,112),this._list.pos(50,136,!0),this._list.size(560,610),this.addChild(this._list)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyHandler),this.onAutoGlobalEvt("SPIRIT_PLAYERS_TO_INVITE_UPDATE",this,this.updatePlayers)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.SpiritDungeonCtrl.instance.searchYuanshenObj()},r.prototype.oneKeyHandler=function(){this._list.datas&&0!==this._list.datas.length?e.SpiritDungeonCtrl.instance.inviteYuanshenMember(0):o.instance.addNotice("无可邀请玩家",!0)},r.prototype.updatePlayers=function(){var t=e.SpiritDungeonModel.instance.playersToInvite;this._list.datas=t,this.noImg.visible=this.noTxt.visible=0===t.length},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},a=r,e.SpiritTeamInviteAlert=a}(modules=modules||{}),function(t){var e,i,n,a,r,s;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._strs=["烁金界","玄苍界","幻海界","炽天界","昆墟界"],t}e=t.spiritDungeon||(t.spiritDungeon={}),n=t.sheng_yu.ShengYuBossShouYiAlert,a=t.config.SceneYuanShenBossCfg,r=t.scene.SceneModel,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),GlobalData.dispatcher.off("SHENG_YU_BOSS_SCENE_UPDATE",this,this.showReward)},o.prototype.showReward=function(){for(var t=r.instance.enterScene,e=a.instance.getCfgByLayer(t[3]),i=[],n=0,s=e[5].length;n<s;n++)i.push([e[5][n],1]);this._listBoss.datas=i;var o=[];for(n=0,s=e[7].length;n<s;n++)o.push([e[7][n],1]);this._listXiaoGuai.datas=o,this.BossText.text="BOSS奖励预览:("+this._strs[e[3]-1]+e[2]+")",this.xiaoGuaiText.text="小怪奖励预览:("+this._strs[e[3]-1]+e[2]+")",0===e[6]?this.tipsTxt1.text="伤害排名前三可得排名奖励，排名越高，爆率越高":this.tipsTxt1.text="归属者得归属奖励，爆率翻倍",this.tipsTxt2.text="参与得参与奖励，最后一击玩家得最后一击奖励，普通爆率"},o.prototype.btnHandler=function(){e.SpiritDungeonCtrl.instance.pickYuanShenCopyReward()},s=o,e.SpiritDungeonIncomeAlert=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.warband||(t.warband={}),n=ui.WarbandApplicantItemUI,s=t.warband.WarbandCtrl,i=n,__extends(a,i),a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.acceptBtn,this,this.acceptHandler),this.onAutoClick(this.refuseBtn,this,this.refuseHandler)},a.prototype.acceptHandler=function(){if(this._data)return t.warband.WarbandModel.instance.limitFight>this._data[4]?(t.notice.SystemNoticeManager.instance.addNotice("未达到加入条件",!0),void this.refuseHandler()):void s.instance.approvalWarband(1,[this._data[0]])},a.prototype.refuseHandler=function(){this._data&&s.instance.approvalWarband(0,[this._data[0]])},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this.head.setInfo(t[6],t[2],t[5]),this.nameTxt.text=t[1],this.fightTxt.text="战力："+CommonUtil.bigNumToString(t[4]),this.vipShowItem.setSVIPandVIP(t[8],t[7],t[9])},o=a,e.WarbandApplicantItem=o}(modules=modules||{}),function(t){var s,e,i,n,o,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}s=t.warband||(t.warband={}),i=ui.WarbandApplicantsAlertUI,n=t.common.SimpleList,o=t.warband.WarbandCtrl,a=t.warband.WarbandApplicantItem,e=i,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(a,576,124),this._list.pos(42,110,!0),this._list.size(576,374),this.addChild(this._list)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.allAcceptBtn,this,this.allAccept),this.onAutoClick(this.allRefuseBtn,this,this.allRefuse),this.onAutoClick(this.autoBtn,this,this.autoHandler),this.onAutoClick(this.settingBtn,this,this.setLimit),this.onAutoGlobalEvt("WARBAND_APPLY_LIST_UPDATE",this,this.updateApplicants),this.onAutoGlobalEvt("WARBAND_AUTO_ACCEPT",this,this.updateAuto)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.noTxt.visible=!0,o.instance.getWarbandApplyList(),this.updateAuto()},l.prototype.setLimit=function(){WindowManager.instance.open(1529)},l.prototype.allAccept=function(){var t=s.WarbandModel.instance.applyList;if(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i][0]);o.instance.approvalWarband(1,e)}},l.prototype.allRefuse=function(){var t=s.WarbandModel.instance.applyList;if(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i][0]);o.instance.approvalWarband(0,e)}},l.prototype.autoHandler=function(){o.instance.setWarbandAccept(!this.autoBtn.selected)},l.prototype.updateApplicants=function(){this._list.datas=s.WarbandModel.instance.applyList,this.noTxt.visible=!s.WarbandModel.instance.applyList||0===s.WarbandModel.instance.applyList.length;var t=s.WarbandModel.instance.limitFight;this.lbl_nolimit.text=t?"战力达到"+CommonUtil.bigNumToString(t):"无限制",this.lbl_nolimit.x=this.lbl_cond.textWidth-2,this.settingBtn.x=this.lbl_nolimit.x+this.lbl_nolimit.textWidth+16,this.limit_box.width=this.settingBtn.x+this.settingBtn.width},l.prototype.updateAuto=function(){this.autoBtn.selected=s.WarbandModel.instance.autoAccept},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},r=l,s.WarbandApplicantsAlert=r}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.warband||(t.warband={}),n=ui.WarbandCreateAlertUI,s=t.warband.WarbandCtrl,o=t.notice.SystemNoticeManager,a=t.config.BlendCfg,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this._gold=a.instance.getCfgById(86001)[1][1],this.goldTxt.text=this._gold+"",this.icon1.skin="assets/icon/warband/1.png",this.icon2.skin="assets/icon/warband/2.png",this.icon3.skin="assets/icon/warband/3.png",this.icon4.skin="assets/icon/warband/4.png"},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.icon1,this,this.selectIcon,[1]),this.onAutoClick(this.icon2,this,this.selectIcon,[2]),this.onAutoClick(this.icon3,this,this.selectIcon,[3]),this.onAutoClick(this.icon4,this,this.selectIcon,[4]),this.onAutoClick(this.createBtn,this,this.createWarband)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.selectIcon(1)},l.prototype.createWarband=function(){var t=this;if(this._selectedIcon){var e=this.nameInput.text;e?StringUtils.containSpace(e)?o.instance.addNotice("名字不能包含空格",!0):StringUtils.isValidWords(e)?CommonUtil.checkWords(e,function(){PlayerModel.instance.getCurrencyById(90140001)>=t._gold?s.instance.createWarband(e,t._selectedIcon):PlatParams.isCloseRecharge||CommonUtil.alert("提示","元宝不足，是否前往充值？",[Handler.create(t,function(){t.close(),WindowManager.instance.open(111)})],[null,null])}):o.instance.addNotice("含有非法字符",!0):o.instance.addNotice("名字不能为空",!0)}else o.instance.addNotice("请选择一个图腾",!0)},l.prototype.close=function(){i.prototype.close.call(this)},l.prototype.selectIcon=function(t){this._selectedIcon=t,this.selectedImg.x=72+130*(t-1)},r=l,e.WarbandCreateAlert=r}(modules=modules||{}),function(t){var a,e,i,n,s,o,r,l;function h(){var t=null!==e&&e.apply(this,arguments)||this;return t._donateEnable=!1,t._count=0,t}a=t.warband||(t.warband={}),i=ui.WarbandDonateItemUI,n=t.warband.WarbandCtrl,s=t.bag.BagModel,o=t.bag.BagUtil,r=t.common.CustomClip,e=i,__extends(h,e),h.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.descTxt,"#4c5e8a","SimHei",20)},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.donateBtn,this,this.donate)},h.prototype.close=function(){e.prototype.close.call(this),r.thisStop(this._btnClip)},h.prototype.setData=function(t){e.prototype.setData.call(this,t),r.thisStop(this._btnClip),this.item.dataSource=[t[0],t[1],0,null],this.nameTxt.text=CommonUtil.getNameByItemId(t[0]),this.nameTxt.color=CommonUtil.getColorById(t[0]),this.descTxt.innerHTML=t[5],0===t[3]?(GlobalData.dispatcher.off("WARBAND_DONATE_INFO_UPDATE",this,this.updateDonate),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.updateBag()):(GlobalData.dispatcher.off("BAG_UPDATE",this,this.updateBag),this.onAutoGlobalEvt("WARBAND_DONATE_INFO_UPDATE",this,this.updateDonate),this.updateDonate())},h.prototype.donate=function(){var t=this._data[0];0===this._data[3]?this._donateEnable?n.instance.donateWarband(t,1):o.openLackPropAlert(t,this._data[1]-this._count):PlayerModel.instance.getCurrencyById(t)>=this._data[1]?n.instance.donateWarband(t,1):CommonUtil.alert("提示",CommonUtil.getNameByItemId(t)+"不足，是否前往充值？",[Handler.create(this,function(){WindowManager.instance.open(111)})],[null,null])},h.prototype.updateDonate=function(){var t=a.WarbandModel.instance.donateInfo,e=this._data[3],i=0;if(t){var n=t[4];if(n)for(var s=0,o=n.length;s<o;s++)if(n[s][0]===this._data[0]){i=n[s][1];break}}this.timesTxt.text=e-i+"/"+e,this._donateEnable=0<e-i,this.timesTxt.color=this._donateEnable?"#168a17":"#ff3e3e"},h.prototype.updateBag=function(){this._count=s.instance.getItemCountById(this._data[0]),this.timesTxt.text="拥有:"+this._count,this._donateEnable=this._count>=this._data[1],this.timesTxt.color=this._donateEnable?"#168a17":"#ff3e3e",this._donateEnable?(this._btnClip||(this._btnClip=r.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.scale(.6,.6),this._btnClip.pos(this.donateBtn.x-2,this.donateBtn.y-5)),this.addChild(this._btnClip),r.thisPlay(this._btnClip)):r.thisStop(this._btnClip)},h.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},l=h,a.WarbandDonateItem=l}(modules=modules||{}),function(t){var i,e,n,s,o,a,r,l,h;function c(){return null!==e&&e.apply(this,arguments)||this}i=t.warband||(t.warband={}),n=ui.WarbandDonateAlertUI,s=t.common.SimpleList,o=t.warband.WarbandDonateItem,a=t.config.WarbandItemCfg,r=t.config.WarbandDonateCfg,l=t.common.ProgressBarCtrl,e=n,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=s.create(o,573,116),this._list.pos(42,164,!0),this._list.size(574,600),this.addChild(this._list),this._proCtrl=new l(this.progressBar,213,this.progressTxt)},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("WARBAND_DONATE_INFO_UPDATE",this,this.updateDonate)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._list.datas=a.instance.cfgs,this.updateDonate()},c.prototype.updateDonate=function(){var t=i.WarbandModel.instance.donateInfo;if(t){this.donateTxt.text="我的捐献：Lv."+t[0];var e=r.instance.getCfgByLv(t[0]);e&&(this._proCtrl.maxValue=e[1],this._proCtrl.value=t[1])}},c.prototype.destroy=function(){this._proCtrl.destroy(),this._proCtrl=null,this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},h=c,i.WarbandDonateAlert=h}(modules=modules||{}),function(t){var i,s,e,n,o,a;function r(){return null!==s&&s.apply(this,arguments)||this}i=t.warband||(t.warband={}),e=ui.WarbandLevelItemUI,n=t.warband.WarbandCtrl,o=t.common.CustomClip,s=e,__extends(r,s),r.prototype.initialize=function(){s.prototype.initialize.call(this),this._items=[this.item1,this.item2,this.item3]},r.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.get),this.onAutoGlobalEvt("WARBAND_DONATE_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("WARBAND_INFO_UPDATE",this,this.updateInfo)},r.prototype.close=function(){s.prototype.close.call(this),this.removeClip()},r.prototype.get=function(){n.instance.drawWarbandLevel(this._data[0])},r.prototype.updateInfo=function(){var t=i.WarbandModel.instance.info;if(t){var e=i.WarbandModel.instance.donateInfo;e&&(this.receivedImg.visible=-1!==e[2].indexOf(this._data[0]),this.getBtn.visible=!this.receivedImg.visible,this._data[0]<=t[6]?-1===e[2].indexOf(this._data[0])?(this._btnClip||(this._btnClip=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.scale(.6,.6),this._btnClip.pos(this.getBtn.x-2,this.getBtn.y-5)),this.addChild(this._btnClip),this._btnClip.play(),this.getBtn.visible=!0,this.receivedImg.visible=!1):(this.removeClip(),this.getBtn.visible=!1,this.receivedImg.visible=!0,this.receivedImg.skin="common/txt_commmon_ylq.png"):(this.removeClip(),this.getBtn.visible=!1,this.receivedImg.visible=!0,this.receivedImg.skin="common/txt_commmon_wdc.png"))}},r.prototype.removeClip=function(){this._btnClip&&(this._btnClip.stop(),this._btnClip.removeSelf())},r.prototype.setData=function(t){s.prototype.setData.call(this,t),this.removeClip(),this.levelTxt.text="Lv."+t[0];for(var e=t[4],i=0,n=.5*e.length;i<n;++i)this._items[i].dataSource=[e[2*i],e[2*i+1],0,null],this.addChild(this._items[i]);for(i=.5*e.length,n=this._items.length;i<n;++i)this._items[i].removeSelf();this.updateInfo()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),s.prototype.destroy.call(this,t)},a=r,i.WarbandLevelItem=a}(modules=modules||{}),function(t){var o,e,i,n,s,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}o=t.warband||(t.warband={}),i=ui.WarbandLevelAwardsAlertUI,n=t.common.SimpleList,s=t.warband.WarbandLevelItem,a=t.config.WarbandLevelCfg,e=i,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(s,574,117),this._list.pos(42,114,!0),this._list.size(574,564),this.addChild(this._list)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("WARBAND_DONATE_INFO_UPDATE",this,this.updateInfo)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateInfo()},l.prototype.updateInfo=function(){o.WarbandModel.instance.donateInfo&&(this._list.datas=a.instance.cfgs.concat().sort(this.sortFunc))},l.prototype.sortFunc=function(t,e){var i=o.WarbandModel.instance.donateInfo[2],n=i.indexOf(t[0]),s=i.indexOf(e[0]);return-1!==n&&-1!==s?t[0]-e[0]:-1===n&&-1===s?t[0]-e[0]:-1===n?-1:-1===s?1:void 0},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},r=l,o.WarbandLevelAwardsAlert=r}(modules=modules||{}),function(i){var o,e,t,n,s,a,r,l,h,c,p,u;function d(){return null!==e&&e.apply(this,arguments)||this}o=i.warband||(i.warband={}),t=ui.WarbandViewUI,n=i.common.SimpleList,s=i.warband.WarbandCtrl,a=i.config.SkillCfg,r=i.config.SkillPureCfg,l=i.config.BlendCfg,h=i.config.WarbandLevelCfg,c=i.common.ProgressBarCtrl,p=i.notice.SystemNoticeManager,e=t,__extends(d,e),d.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=.5,this._list=n.create(o.WarbandMemberItem,634,124),this._list.pos(42,630,!0),this._list.size(634,380),this.addChild(this._list),this._costArr=l.instance.getCfgById(86003)[1],this.menuBox.removeSelf(),this._proCtrl=new c(this.progressBar,213,this.progressTxt),this._costIndex=0},d.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.refreshBtn,this,this.refreshBuff),this.onAutoClick(this.awardBtn,this,this.openAward),this.onAutoClick(this.privilegeBtn,this,this.openPrivilege),this.onAutoClick(this.donateBtn,this,this.openDonate),this.onAutoClick(this.listBtn,this,this.openList),this.onAutoClick(this.shopBtn,this,this.openShop),this.onAutoClick(this.applicantsBtn,this,this.openApplicants),this.onAutoClick(this.kickBtn,this,this.kickHandler),this.onAutoClick(this.renameBtn,this,this.renameHandler),this.onAutoClick(this.overLeaderBtn,this,this.overLeader),this.onAutoClick(this.exitBtn,this,this.exitHandler),this.onAutoClick(this.dismissBtn,this,this.dismissHandler),this.onAutoClick(this.impeachBtn,this,this.impeachHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.menuCloseBtn,this,this.closeMenu),this.onAutoGlobalEvt("WARBAND_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("WARBAND_DONATE_INFO_UPDATE",this,this.updateDonate),this.onAutoGlobalEvt("WARBAND_MEMBER_OPER_CLICK",this,this.operClickHandler),this.onAutoGlobalEvt("WARBAND_DONATE_BROADCAST",this,this.onDonateBroadcast),this.onAutoGlobalEvt("WARBAND_CACHE_BUFF_UPDATE",this,this.updateCacheBuff),this.regAutoRP(this.donateRP,["warbandDonateRP"]),this.regAutoRP(this.awardsRP,["warbandLvAwardRP"]),this.regAutoRP(this.applyRP,["warbandApplyRP"])},d.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.closeMenu(),this.updateInfo(),this.updateDonate(),s.instance.getWarbandInfo(),s.instance.getWarbandBuff()},d.prototype.updateInfo=function(){var t=o.WarbandModel.instance.info;if(t){this._leaderId=t[3];var e=h.instance.getCfgByLv(t[6]);this.lvTxt.text="等级："+e[0],this._proCtrl.maxValue=e[1],this._proCtrl.value=t[7],this.nameTxt.text=t[1],this.numTxt.text="人数："+t[4].length+"/"+e[3],this._list.datas=t[4].sort(this.sortFunc.bind(this));var i=t[8],n=a.instance.getCfgById(i),s=r.instance.getCfgById(CommonUtil.getSkillPureIdById(i));this.buffDesc.text=CommonUtil.stringFormat(s[5],n[2]),this.icon.skin="assets/icon/warband/"+t[2]+".png",this.updateDonate()}else this.close()},d.prototype.sortFunc=function(t,e){return t[0]===this._leaderId?-1:e[0]===this._leaderId?1:e[4]-t[4]},d.prototype.updateDonate=function(){var t=o.WarbandModel.instance.donateInfo;if(t){this._costIndex=.5*this._costArr.length-1,this._costIndex>t[3]&&(this._costIndex=t[3]);var e=this._costArr[2*this._costIndex+1];this.currencyTxt.text=0===e?"免费":e+"",this.currencyIcon.skin=90140001===this._costArr[2*this._costIndex]?"common/icon_tongyong_2.png":"common/shenghuyu.png"}},d.prototype.refreshBuff=function(){var t=this._costArr[2*this._costIndex+1],e=this._costArr[2*this._costIndex],i=90140001===e?"<img src='common/icon_tongyong_2.png'/>":"<img src='common/shenghuyu.png'/>";0===t?s.instance.refreshWarbandBuff():PlayerModel.instance.getCurrencyById(e)<t&&!PlatParams.isCloseRecharge?CommonUtil.alert("提示",i+"不足，是否前往充值？",[Handler.create(this,function(){WindowManager.instance.open(111)})],[null,null]):CommonUtil.alert("提示","是否花费 "+i+t+" 进行刷新？",[Handler.create(this,function(){s.instance.refreshWarbandBuff()})],[null,null])},d.prototype.openAward=function(){WindowManager.instance.open(768)},d.prototype.openPrivilege=function(){WindowManager.instance.open(762)},d.prototype.openDonate=function(){WindowManager.instance.open(767)},d.prototype.openList=function(){WindowManager.instance.open(763)},d.prototype.openShop=function(){WindowManager.instance.open(760)},d.prototype.openApplicants=function(){this._leaderId===PlayerModel.instance.actorId?WindowManager.instance.open(765):p.instance.addNotice("只有队长才可以进行此操作",!0)},d.prototype.kickHandler=function(){var t=this;if(this.closeMenu(),this._selectedMember){var e=o.WarbandModel.instance.info;e&&this._selectedMember[0]!==e[3]&&CommonUtil.alert("提示","是否将【"+this._selectedMember[1]+"】踢出战队",[Handler.create(this,function(){s.instance.kickWarbandMemeber(t._selectedMember[0])})],[null,null])}},d.prototype.renameHandler=function(){WindowManager.instance.open(1083)},d.prototype.overLeader=function(){var t=this;this.closeMenu(),this._selectedMember&&CommonUtil.alert("提示","是否将队长转让给【"+this._selectedMember[1]+"】",[Handler.create(this,function(){s.instance.setWarbandLeader(t._selectedMember[0])})],[null,null])},d.prototype.exitHandler=function(){var t=this;if(this.closeMenu(),this._selectedMember&&this._selectedMember[0]===PlayerModel.instance.actorId){var e=0<i.redBag.RedBagModel.instance.getChanlByRPpkg(3)?"您还有未发放的红包，退出战队时将自动发放,":"";CommonUtil.alert("提示",e+'退出战队会<span color="#FF3E3E">保留我的捐献等级</span>，但是会<span color="#FF3E3E">清除本战队捐献</span>，是否<span color="#FF3E3E">确定退出战队</span>？',[Handler.create(this,function(){s.instance.kickWarbandMemeber(t._selectedMember[0])})],[null,null])}},d.prototype.dismissHandler=function(){if(this.closeMenu(),this._selectedMember){var t=0<i.redBag.RedBagModel.instance.getChanlByRPpkg(3)?"您还有未发放的红包，解散战队时红包将由系统回收,":"";CommonUtil.alert("提示",t+"解散战队后该战队数据将<span color='#FF3E3E'>全部清除且无法恢复</span>，是否<span color='#FF3E3E'>确认解散战队</span>？",[Handler.create(this,function(){s.instance.dismissWarband()})],[null,null])}},d.prototype.impeachHandler=function(){this.closeMenu(),this._selectedMember&&CommonUtil.alert("提示","是否弹劾队长",[Handler.create(this,function(){s.instance.impeachWarband()})],[null,null])},d.prototype.helpHandler=function(){CommonUtil.alertHelp(20096)},d.prototype.operClickHandler=function(t){this._selectedMember=t;var e=o.WarbandModel.instance.info[3],i=this._selectedMember[0],n=PlayerModel.instance.actorId;if(i===n||i===e||n===e){if(this.addChild(this.menuBox),this.menuBox.pos(this.mouseX-220,this.mouseY,!0),this.dismissBtn.removeSelf(),this.exitBtn.removeSelf(),this.impeachBtn.removeSelf(),this.overLeaderBtn.removeSelf(),this.kickBtn.removeSelf(),this.renameBtn.removeSelf(),i===n){var s=n===e?this.dismissBtn:this.exitBtn;this.menuBox.addChild(s),s.pos(25,18,!0),this.menuBg.height=96,n===e&&(this.menuBox.addChild(this.renameBtn),this.menuBg.height=158,this.renameBtn.pos(25,18,!0),s.pos(25,80,!0))}else this._selectedMember[0]===e?(this.menuBox.addChild(this.impeachBtn),this.impeachBtn.pos(25,18,!0),this.menuBg.height=96):(this.menuBox.addChild(this.overLeaderBtn),this.menuBox.addChild(this.kickBtn),this.overLeaderBtn.pos(25,18,!0),this.kickBtn.pos(25,80,!0),this.menuBg.height=158);this.onAutoClick(Laya.stage,this,this.closeMenu)}else p.instance.addNotice("不能操作其他战队成员",!0)},d.prototype.onDonateBroadcast=function(){var t=o.WarbandModel.instance.info;if(t){var e=h.instance.getCfgByLv(t[6]);this.lvTxt.text="Lv."+e[0],this._proCtrl.maxValue=e[1],this._proCtrl.value=t[7],this.numTxt.text="人数："+t[4].length+"/"+e[3]}},d.prototype.closeMenu=function(){this.menuBox.removeSelf(),Laya.stage.off("click",this,this.closeMenu)},d.prototype.updateCacheBuff=function(){var t=o.WarbandModel.instance.cacheBuff;t&&WindowManager.instance.open(820,t)},d.prototype.destroy=function(t){void 0===t&&(t=!0),this._costArr=null,this._selectedMember=null,this._proCtrl.destroy(),this._proCtrl=null,this._list=this.destroyElement(this._list),this.menuBox=this.destroyElement(this.menuBox),e.prototype.destroy.call(this,t)},u=d,o.WarbandPanel=u}(modules=modules||{}),function(t){var a,r,e,l,h,c,p,i;function n(){return null!==r&&r.apply(this,arguments)||this}a=t.warband||(t.warband={}),e=ui.WarbandPrivilegeAlertUI,l=t.common.SimpleList,h=t.config.WarbandLevelCfg,c=t.common.AttrUtil,p=t.config.AttrItemCfg,r=e,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),this._list=l.create(a.WarbandBuffItem,572,116),this._list.pos(44,384,!0),this._list.size(572,420),this.addChild(this._list),this._buffArr=[];for(var t=h.instance.cfgs,e=0,i=t.length;e<i;++e)for(var n=t[e][5],s=0,o=n.length;s<o;++s)this._buffArr.push([t[e],n[s]]);this._list.datas=this._buffArr,this._attrTxts=[this.attrTxt1,this.attrTxt2,this.attrTxt3],this._nextAttrTexts=[this.nextAttrTxt1,this.nextAttrTxt2,this.nextAttrTxt3]},n.prototype.onOpened=function(){r.prototype.onOpened.call(this);var t=a.WarbandModel.instance.info;if(t){var e=t[6],i=h.instance.getCfgByLv(e);this.showAttr(this._attrTxts,i[2]),this.numTxt.text="战队人数："+i[3],(i=h.instance.getCfgByLv(e+1))?(this.lvTxt.text="Lv."+e,this.lvTxt.align=this.attrTxt1.align=this.attrTxt2.align=this.attrTxt3.align=this.numTxt.align="left",this.arrowImg.visible=!0,this.attrTxt1.x=this.attrTxt2.x=this.attrTxt3.x=this.numTxt.x=80,this.lvTxt.x=130,this.nextLvTxt.visible=this.attrTxt1.visible=this.attrTxt2.visible=this.attrTxt3.visible=this.nextNumTxt.visible=!0,this.nextLvTxt.text="Lv."+i[0],this.showAttr(this._nextAttrTexts,i[2]),this.nextNumTxt.text="战队人数："+i[3]):(this.lvTxt.text="Lv."+e+"(max)",this.lvTxt.align=this.attrTxt1.align=this.attrTxt2.align=this.attrTxt3.align=this.numTxt.align="center",this.arrowImg.visible=!1,this.attrTxt1.x=this.attrTxt2.x=this.attrTxt3.x=this.numTxt.x=230,this.lvTxt.x=280,this.nextLvTxt.visible=this.nextAttrTxt1.visible=this.nextAttrTxt2.visible=this.nextAttrTxt3.visible=this.nextNumTxt.visible=!1);for(var n=this._buffArr.length,s=0,o=this._buffArr.length;s<o;++s)if(e+1===this._buffArr[s][0][0]){n=s;break}this._list.scrollToIndex(n)}},n.prototype.showAttr=function(t,e){for(var i=0,n=.5*e.length;i<n;++i){var s=p.instance.getCfgById(e[2*i]),o=s[2]?c.formatFloatNum(e[2*i+1])+"%":Math.round(e[2*i+1])+"";t[i].text=s[1]+"："+o}},n.prototype.destroy=function(){this._list=this.destroyElement(this._list),r.prototype.destroy.call(this)},i=n,a.WarbandPrivilegeAlert=i}(modules=modules||{}),function(t){var e,s,i,o,n;function a(){return null!==s&&s.apply(this,arguments)||this}e=t.warband||(t.warband={}),i=ui.WarbandRankItemUI,o=t.config.WarbandLevelCfg,s=i,__extends(a,s),a.prototype.setData=function(t){s.prototype.setData.call(this,t);var e=t[8];if(e<=3)this.rankClip.visible=!1,this.rankImg.skin="common/icon_common_"+(1===e?"first":2===e?"second":"third")+".png";else{this.rankClip.visible=!0,this.rankImg.skin="common/dt_tongyong_15.png";var i=e+"";this.rankClip.value=i,this.rankClip.x=83-16*i.length}this.nameTxt.text=t[1],this.leaderNameTxt.text="队长："+t[3][1];var n=o.instance.getCfgByLv(t[5]);this.numTxt.text="人数："+t[9]+"/"+n[3],this.lvTxt.text="Lv."+t[5]},n=a,e.WarbandRankItem=n}(modules=modules||{}),function(t){var s,i,e,n,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}s=t.warband||(t.warband={}),e=ui.WarbandRanksAlertUI,n=t.common.SimpleList,o=t.warband.WarbandCtrl,a=t.warband.WarbandRankItem,i=e,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(a,574,114),this.addChild(this._list),this._list.pos(46,100,!0),this._list.size(574,800),this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7]},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.preBtn,this,this.pre),this.onAutoClick(this.nextBtn,this,this.next),this.onAutoGlobalEvt("WARBAND_RANKS_UPDATE",this,this.updateRank)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this);for(var t=0,e=this._items.length;t<e;++t)this._items[t].removeSelf();this._totalPage=1,this._curPage=-1,this.setCurPage(1)},l.prototype.updateRank=function(){var t=s.WarbandModel.instance.ranksInfo;if(t&&(this._totalPage=t[2],this.pageTxt.text=this._curPage+"/"+this._totalPage,t[1]===this._curPage)){for(var e=t[0],i=0,n=e.length;i<n;++i)this._items[i]&&(this._items[i].data=e[i],this.addChild(this._items[i]));for(i=e.length,n=this._items.length;i<n;++i)this._items[i].removeSelf()}},l.prototype.setCurPage=function(t){t<=1?t=1:t>=this._totalPage&&(t=this._totalPage),this._curPage!==t&&(this._curPage=t,this.pageTxt.text=this._curPage+"/"+this._totalPage,s.WarbandModel.instance.page=this._curPage,o.instance.getWarbandRank(this._curPage,0))},l.prototype.pre=function(){this.setCurPage(this._curPage-1)},l.prototype.next=function(){this.setCurPage(this._curPage+1)},l.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._items=this.destroyElement(this._items),i.prototype.destroy.call(this)},r=l,s.WarbandRanksAlert=r}(modules=modules||{}),function(h){var c,i,t,p,e;function n(){return null!==i&&i.apply(this,arguments)||this}c=h.warband||(h.warband={}),t=ui.WarbandsToApplyViewUI,p=h.warband.WarbandCtrl,i=t,__extends(n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=.5,this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7]},n.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.showValidBtn,this,this.showValid),this.onAutoClick(this.allApplyBtn,this,this.allApply),this.onAutoClick(this.createBtn,this,this.createWarband),this.onAutoClick(this.preBtn,this,this.pre),this.onAutoClick(this.nextBtn,this,this.next),this.onAutoGlobalEvt("WARBAND_RANKS_UPDATE",this,this.updateRank),this.onAutoGlobalEvt("WARBAND_INFO_UPDATE",this,this.updateInfo)},n.prototype.onOpened=function(){i.prototype.onOpened.call(this);for(var t=0,e=this._items.length;t<e;++t)this._items[t].removeSelf();this.showValidBtn.selected=!1,this._totalPage=1,this._curPage=-1,this.setCurPage(1)},n.prototype.close=function(){i.prototype.close.call(this)},n.prototype.setCurPage=function(t){if(t<=1?t=1:t>=this._totalPage&&(t=this._totalPage),this._curPage!==t){this._curPage=t,this.pageTxt.text=this._curPage+"/"+this._totalPage,c.WarbandModel.instance.page=this._curPage;var e=this.showValidBtn.selected?1:0;c.WarbandModel.instance.pageType=e,p.instance.getWarbandRank(this._curPage,e)}},n.prototype.showValid=function(){this.showValidBtn.selected=!this.showValidBtn.selected,this._curPage=-1,this.setCurPage(1)},n.prototype.allApply=function(){var t=c.WarbandModel.instance.ranksInfo;if(t){for(var e=[],i=t[3],n=t[0],s=PlayerModel.instance.fight,o=0,a=n.length;o<a;o++){var r=n[o],l=r[0];-1==i.indexOf(l)&&s>=r[10]&&e.push(l)}e.length?p.instance.applyWarband(e):h.notice.SystemNoticeManager.instance.addNotice("当前无战队可申请，请创建战队",!0)}},n.prototype.createWarband=function(){WindowManager.instance.open(766)},n.prototype.pre=function(){this.setCurPage(this._curPage-1)},n.prototype.next=function(){this.setCurPage(this._curPage+1)},n.prototype.updateRank=function(){var t=c.WarbandModel.instance.ranksInfo;if(t&&(this._totalPage=t[2],this.pageTxt.text=this._curPage+"/"+this._totalPage,t[1]===this._curPage)){for(var e=t[0],i=0,n=e.length;i<n;++i)this._items[i]&&(this._items[i].data=e[i],this.addChild(this._items[i]));for(this.addChild(this.closeBtn),i=e.length,n=this._items.length;i<n;++i)this._items[i].removeSelf()}},n.prototype.updateInfo=function(){c.WarbandModel.instance.info&&(this.close(),WindowManager.instance.open(769))},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._items=this.destroyElement(this._items),i.prototype.destroy.call(this,t)},e=n,c.WarbandsToApplyPanel=e}(modules=modules||{}),function(t){var a,r,e,l,h,i;function n(){var t=null!==r&&r.apply(this,arguments)||this;return t._num=1,t}a=t.warband||(t.warband={}),e=ui.WarbandBuffAlertUI,l=t.config.SkillCfg,h=t.config.SkillPureCfg,r=e,__extends(n,r),n.prototype.setOpenParam=function(t){r.prototype.setOpenParam.call(this,t),this._num=t},n.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close)},n.prototype.onOpened=function(){r.prototype.onOpened.call(this),this.img1.skin=1<=this._num?"warband/icon_zdxt_lr.png":"warband/icon_zdxt_hr.png",this.img2.skin=2<=this._num?"warband/icon_zdxt_lr.png":"warband/icon_zdxt_hr.png",this.img3.skin=3<=this._num?"warband/icon_zdxt_lr.png":"warband/icon_zdxt_hr.png",this.numTxt.text="群仙祝福("+this._num+"/3)",this.buffTxt1.color=2<=this._num?"#168a17":"#8b8b8b",this.buffTxt2.color=3<=this._num?"#168a17":"#8b8b8b";var t=a.WarbandModel.instance.info[8],e=l.instance.getCfgById(t),i=h.instance.getCfgById(CommonUtil.getSkillPureIdById(t));this.buffTxt1.text=CommonUtil.stringFormat(i[5],e[2]);for(var n=e[2].split("|"),s=0,o=n.length;s<o;s++)n[s]=2*parseFloat(n[s])+"";this.buffTxt2.text=CommonUtil.stringFormat(i[5],n.join("|"))},i=n,a.WarbandBuffAlert=i}(modules=modules||{}),function(t){var e,s,i,o,a,n;function r(){return null!==s&&s.apply(this,arguments)||this}e=t.warband||(t.warband={}),i=ui.WarbandBuffReplaceAlertUI,o=t.config.SkillCfg,a=t.config.SkillPureCfg,s=i,__extends(r,s),r.prototype.initialize=function(){s.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24,"center","middle"),this.contentTxt.style.lineHeight=28,this.contentTxt.mouseEnabled=!1,this.closeOnSide=!1},r.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelHandler),this.onAutoClick(this.closeBtn1,this,this.cancelHandler),this.onAutoClick(this.okBtn,this,this.okHandler)},r.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t);var e=o.instance.getCfgById(t),i=a.instance.getCfgById(CommonUtil.getSkillPureIdById(t)),n=CommonUtil.stringFormat(i[5],e[2]);n=CommonUtil.formatHtmlStrByColor("#ff3e3e",n),n="恭喜您刷出新的光环<br/>【"+i[1]+"】<br/>"+n+"<br/>是否替换？",this.contentTxt.innerHTML=n},r.prototype.cancelHandler=function(){e.WarbandCtrl.instance.refuseWarbandBuff(),this.close()},r.prototype.okHandler=function(){e.WarbandCtrl.instance.setWarbandBuff(),this.close()},n=r,e.WarbandBuffReplaceAlert=n}(modules=modules||{}),function(t){var n,s,e,i,o,a,r;function l(){return null!==s&&s.apply(this,arguments)||this}n=t.warband||(t.warband={}),e=ui.WarbandCreateAlertUI,i=t.config.BlendCfg,o=t.notice.SystemNoticeManager,a=t.bag.BagUtil,s=e,__extends(l,s),l.prototype.initialize=function(){s.prototype.initialize.call(this),this._item=i.instance.getCfgById(86024)[1],this.icon1.skin="assets/icon/warband/1.png",this.icon2.skin="assets/icon/warband/2.png",this.icon3.skin="assets/icon/warband/3.png",this.icon4.skin="assets/icon/warband/4.png",this.goldImg.skin=CommonUtil.getIconById(this._item[0],!0),this.goldImg.size(40,40),this.goldTxt.text=this._item[1].toString(),this.titleTxt.text="战队改名",this.createBtn.label="确认改名"},l.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.icon1,this,this.selectIcon,[1]),this.onAutoClick(this.icon2,this,this.selectIcon,[2]),this.onAutoClick(this.icon3,this,this.selectIcon,[3]),this.onAutoClick(this.icon4,this,this.selectIcon,[4]),this.onAutoClick(this.createBtn,this,this.createWarband)},l.prototype.onOpened=function(){s.prototype.onOpened.call(this);var t=CommonUtil.getPropCountById(this._item[0]);this.goldTxt.text=t+"/"+this._item[1],this.goldTxt.color=t<this._item[1]?"#ff3e3e":"#50ff28";var e=n.WarbandModel.instance.info?n.WarbandModel.instance.info[2]:1;this.selectIcon(e);var i=n.WarbandModel.instance.info?n.WarbandModel.instance.info[13]:0;this.checkCD(i)},l.prototype.selectIcon=function(t){this._selectedIcon=t,this.selectedImg.x=72+130*(t-1)},l.prototype.createWarband=function(){var t=this;if(this._selectedIcon){var e=this.nameInput.text;e?StringUtils.containSpace(e)?o.instance.addNotice("名字不能包含空格",!0):StringUtils.isValidWords(e)?CommonUtil.checkWords(e,function(){CommonUtil.getPropCountById(t._item[0])<t._item[1]?a.openLackPropAlert(t._item[0],t._item[1]):(n.WarbandCtrl.instance.ChangeWarbandName(e,t._selectedIcon),t.close())}):o.instance.addNotice("含有非法字符",!0):o.instance.addNotice("名字不能为空",!0)}else o.instance.addNotice("请选择一个图腾",!0)},l.prototype.checkCD=function(t){t>GlobalData.serverTime?(this.createBtn.visible=this.goldImg.visible=this.goldTxt.visible=!1,this._timeTxt=this._timeTxt||new Laya.Text,this._timeTxt.font="SimHei",this._timeTxt.fontSize=24,this._timeTxt.width=this.width,this._timeTxt.y=440,this._timeTxt.align="center",this._timeTxt.color="#ff3e3e",this._timeTxt.parent||this.addChild(this._timeTxt),this._timeTxt.text="冷却倒计时："+CommonUtil.timeStampDDHHMMToHHMMSS(t),Laya.timer.once(1e3,this,this.checkCD,[t])):(this.createBtn.visible=this.goldImg.visible=this.goldTxt.visible=!0,this._timeTxt&&this._timeTxt.parent&&this._timeTxt.removeSelf())},l.prototype.close=function(t,e){s.prototype.close.call(this,t,e),Laya.timer.clearAll(this)},r=l,n.WarbandRenameAlert=r}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._arr=GlobalData.getConfig("warfire_warband_reward")},n.prototype.getArr=function(){return this._arr},i=n,e.WarfireWarbandRewardCfg=i}(modules=modules||{}),function(t){var l,e,h,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}l=t.fire_contention||(t.fire_contention={}),h=t.config.WarfireAchieveCfg,i=t.common.SimpleList,e=ui.FireContentionAchievementAlertUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(l.FireContentionAchievementItem,571,156,1,1,0,5),this._list.size(571,639),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GET_WARFIRE_ACHIEVE_REPLY",this,this.showUI)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.titleText.text="成就奖励",l.FireContentionCtrl.instance.getWarFireAchieveInfo(),this.showUI()},s.prototype.showUI=function(){for(var t=new Array,e=1;e<=h.instance.maxTypeNum;e++){var i=h.instance.getDateByType(e);if(i){for(var n=null,s=0;s<i.length;s++){var o=i[s];if(o){var a=o[0],r=l.FireContentionModel.instance.getAchievementStateById(a);if(1==r){t.push(o),n=null;break}if(0==r){t.push(o),n=null;break}2==r&&(n=o)}}n&&t.push(n)}}t.sort(this.sortFunc.bind(this)),this._list.datas=t},s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=l.FireContentionModel.instance.getAchievementStateById(i),o=l.FireContentionModel.instance.getAchievementStateById(n),a=[1,0,2];return(s=a[s])===(o=a[o])?i-n:s-o},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n=s,l.FireContentionAchievementAlert=n}(modules=modules||{}),function(s){var o,e,t,a,r,i,n;function l(){var t=e.call(this)||this;return t._listState=!0,t._listPlayerState=!0,t}o=s.fire_contention||(s.fire_contention={}),t=s.common.CustomList,a=s.config.SceneWarfireCfg,r=s.player.PlayerModel,i=s.common.BtnGroup,e=ui.FireContentionAndPlayerListViewUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=15,this.bottom=278,this.closeByOthers=!1,this.layer=3,this._list=new t,this._list.width=256,this._list.height=113,this._list.hCount=1,this._list.itemRender=o.FireContentionBossListItem,this._list.x=308,this._list.y=41,this._list.selectedIndex=-1,this._list.canSelectSameItem=!0,this.addChild(this._list),this._listPlayer=new t,this._listPlayer.width=293,this._listPlayer.height=113,this._listPlayer.hCount=1,this._listPlayer.itemRender=o.FireContentionPlayerListItem,this._listPlayer.x=4,this._listPlayer.y=41,this._listPlayer.selectedIndex=-1,this._listPlayer.canSelectSameItem=!0,this.addChild(this._listPlayer),this._btnGroup=new i,this._btnGroup.setBtns(this.titleText1,this.titleText2)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.expandBtn,this,this.expandBtnHandler),this.onAutoEvt(this._list,"select",this,this.selectHandler),this.onAutoClick(this.expandPlayerBtn,this,this.expandPlayerBtnHandler),this.onAutoEvt(this._listPlayer,"select",this,this.listPlayerHandler),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updatePlayret),this.onAutoGlobalEvt("SCENE_REMOVE_HUMANS",this,this.updatePlayret),this.onAutoGlobalEvt("FIRE_CONTENTION_BOSS_INFOS_UPDATE_BOSS_INFO",this,this.updateBossInfos),this.onAutoGlobalEvt("FIRE_CONTENTION_MONSTER_INFOS_UPDATE",this,this.updateMonsterInfos),this.onAutoGlobalEvt("FIRE_CONTENTION_UPDATE_RANK",this,this.updatePlayret)},l.prototype.changeHandler=function(){this._scrollPosOld1=this._listPlayer.scrollPos=0,this.updatePlayret()},l.prototype.updatePlayret=function(){if(0===this._btnGroup.selectedIndex){this.titleText1.color="#ffec7c",this.titleText2.color="#FFFFFF";for(var t=[],e=0,i=(n=s.scene.SceneModel.instance.humans).length;e<i;e++)n[e][5][0]!==r.instance.actorId&&(t.push([1,n[e]]),o.FireContentionModel.instance.powerById[n[e][5][0]]=n[e][9]);this._listPlayer.selectedIndex=-1,this._scrollPosOld1=this._listPlayer.scrollPos,this._listPlayer.datas=t,this._listPlayer.scrollPos=this._scrollPosOld1}else if(1===this._btnGroup.selectedIndex){var n;for(this.stopTwenn(),this.titleText1.color="#FFFFFF",this.titleText2.color="#ffec7c",t=[],e=0,i=(n=o.FireContentionModel.instance.personFireListRankCopy).length;e<i;e++)n[e][0]!==r.instance.actorId&&t.push([2,n[e]]);this._listPlayer.selectedIndex=-1,this._scrollPosOld1=this._listPlayer.scrollPos,this._listPlayer.datas=t,this._listPlayer.scrollPos=this._scrollPosOld1}this.box1.visible=0===this._btnGroup.selectedIndex,this.box2.visible=1===this._btnGroup.selectedIndex},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.tipsBox.y=-12,this._list.selectedIndex=-1,this._listPlayer.selectedIndex=-1,this._btnGroup.selectedIndex=0,this._listState=!0,this._listPlayerState=!0,this._scrollPosOld=0,this.changUI(),this.changPlayerUI(),this.stopTwenn()},l.prototype.selectHandler=function(){if(-1!=this._list.selectedIndex){this._listPlayer.selectedIndex=-1;var t=this._list.selectedData;0===t[0]?r.instance.selectTarget(1,t[1][0]):1===t[0]&&r.instance.selectTarget(4,t[1][2])}},l.prototype.expandBtnHandler=function(){this._listState=!this._listState,this.changUI()},l.prototype.listPlayerHandler=function(){if(-1!=this._listPlayer.selectedIndex){this._list.selectedIndex=-1;var t=this._listPlayer.selectedData;t&&1===t[0]?r.instance.selectTarget(2,t[1][5][0]):t&&2===t[0]&&o.FireContentionCtrl.instance.warFireFollow(t[1][0])}},l.prototype.expandPlayerBtnHandler=function(){this._listPlayerState=!this._listPlayerState,this.changPlayerUI()},l.prototype.changUI=function(){this._listState?(this.bgImg.height=160,this.bgImg.y=0,this._list.height=113,this._list.y=41,this.titleText.y=12,this.expandBtn.y=13,this.expandBtn.skin="common/btn_tonyong_28.png",this.img1.y=38):(this.bgImg.height=87,this.bgImg.y=73,this._list.height=36,this._list.y=118,this.titleText.y=87,this.expandBtn.y=88,this.expandBtn.skin="common/btn_tonyong_29.png",this.img1.y=113),this.updateBossInfos()},l.prototype.changPlayerUI=function(){this._listPlayerState?(this.bgPlayerImg.height=160,this.bgPlayerImg.y=0,this._listPlayer.height=113,this._listPlayer.y=41,this.titleText2.y=this.titleText1.y=12,this.expandPlayerBtn.y=13,this.expandPlayerBtn.skin="common/btn_tonyong_28.png",this.box1.y=this.box2.y=this.img2.y=38):(this.bgPlayerImg.height=87,this.bgPlayerImg.y=73,this._listPlayer.height=36,this._listPlayer.y=118,this.titleText2.y=this.titleText1.y=87,this.expandPlayerBtn.y=88,this.expandPlayerBtn.skin="common/btn_tonyong_29.png",this.box1.y=this.box2.y=this.img2.y=113),this.changeHandler()},l.prototype.updateBossInfos=function(t){void 0===t&&(t=!1),this.updateList()},l.prototype.updateMonsterInfos=function(){this.updateList()},l.prototype.updateList=function(){this._list.selectedIndex=-1;var t=[],e=o.FireContentionModel.instance.bossInfos;if(e)for(var i=0,n=e.length;i<n;i++)t.push([0,e[i]]);var s=a.instance.allCfgs;if(s)for(i=0,n=s.length;i<n;i++)t.push([1,s[i]]);t.sort(this.sortFunc.bind(this)),this._scrollPosOld=this._list.scrollPos,this._list.datas=t,this._list.scrollPos=this._scrollPosOld},l.prototype.sortFunc=function(t,e){var i=0===t[0]?t[1][0]:t[1][3],n=0===e[0]?e[1][0]:e[1][3],s=a.instance.getCfgByOcc(i)[5],o=a.instance.getCfgByOcc(n)[5];return s===o?i-n:o-s},l.prototype.close=function(){e.prototype.close.call(this),s.notice.ScoreNoticeManager.instance.sotpAllTween(),this._tweenLeft3&&this._tweenLeft3.stop(),this._tweenLeft4&&this._tweenLeft4.stop()},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._listPlayer=this.destroyElement(this._listPlayer),this._tweenLeft3&&(this._tweenLeft3.stop(),this._tweenLeft3=null),this._tweenLeft4&&(this._tweenLeft4.stop(),this._tweenLeft4=null),e.prototype.destroy.call(this,t)},l.prototype.stopTwenn=function(){this.tipsBox.visible=!1,this._tweenLeft3&&this._tweenLeft3.stop(),this._tweenLeft4&&this._tweenLeft4.stop(),this.tipsBox.y=-12},l.prototype.playerTwenn=function(){var t=this;this._tweenLeft4=TweenJS.create(this.tipsBox).to({y:this.tipsBox.y+35},300).onComplete(function(){t._tweenLeft3.start()}),this._tweenLeft3=TweenJS.create(this.tipsBox).to({y:this.tipsBox.y-35},300).onComplete(function(){t._tweenLeft4.start()}),this._tweenLeft3.start(),this.tipsBox.visible=!0},n=l,o.FireContentionAndPlayerListPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._isboll=!1,t._isboll1=!1,t._isboll2=!1,t}e=t.fire_contention||(t.fire_contention={}),n=t.common.CustomClip,i=ui.FireContentionCenterViewUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.zOrder=-2,this.bottom=451,this.closeByOthers=!1,this.layer=3,this.playEff()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.findBtn,this,this.findBtnHandler),this.onAutoClick(this.killBtn,this,this.killBtnHandler),this.onAutoGlobalEvt("FIRE_CONTENTION_UPDATE_HUOSHEN",this,this.showUI)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.showUI(),Laya.timer.loop(1e3,this,this.upDateTipsUI),this.upDateTipsUI(),this.playerTwenn()},o.prototype.showUI=function(){this.box.visible=0!=e.FireContentionModel.instance.agentIdWarFireGod,this.findBtn.visible=0===e.FireContentionModel.instance.agentIdWarFireGod,0!=e.FireContentionModel.instance.agentIdWarFireGod&&e.FireContentionModel.instance.agentIdWarFireGod!=PlayerModel.instance.actorId&&e.FireContentionModel.instance.nameWarFireWarbandId!=t.warband.WarbandModel.instance.info[0]?(this.text1.text="围攻火神",n.thisPlay(this._eff)):(this.text1.text="自动索敌",n.thisStop(this._eff)),0===e.FireContentionModel.instance.agentIdWarFireGod&&n.thisStop(this._eff),e.FireContentionModel.instance.agentIdWarFireGod===t.player.PlayerModel.instance.actorId&&5===t.player.PlayerModel.instance.selectTargetType&&(console.log("玩家在寻找 玩家目标 的过程中 变成火神  自动索敌"),PlayerModel.instance.selectTarget(2,-1))},o.prototype.findBtnHandler=function(){console.log("搜索玩家"),PlayerModel.instance.selectTarget(2,-1),this._isboll&&this.stopTwenn()},o.prototype.killBtnHandler=function(){console.log("搜索怪物"),PlayerModel.instance.selectTarget(1,-1),this._isboll||this.stopTwenn()},o.prototype.btnHandler=function(){0!=e.FireContentionModel.instance.agentIdWarFireGod&&e.FireContentionModel.instance.agentIdWarFireGod!=PlayerModel.instance.actorId&&e.FireContentionModel.instance.nameWarFireWarbandId!=t.warband.WarbandModel.instance.info[0]?e.FireContentionCtrl.instance.warFireFollow(e.FireContentionModel.instance.agentIdWarFireGod):PlayerModel.instance.selectTarget(2,-1),this._isboll&&this.stopTwenn()},o.prototype.playEff=function(){this._eff||(this._eff=CommonUtil.creatEff(this.box,"activityEnter",15),this._eff.pos(2,2)),n.thisStop(this._eff)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._eff=this.destroyElement(this._eff),this._tweenLeft3&&(this._tweenLeft3.stop(),this._tweenLeft3=null),this._tweenLeft4&&(this._tweenLeft4.stop(),this._tweenLeft4=null),i.prototype.destroy.call(this,t)},o.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.upDateTipsUI),this._tweenLeft3&&(this._tweenLeft3.stop(),this._tweenLeft3=null),this._tweenLeft4&&(this._tweenLeft4.stop(),this._tweenLeft4=null)},o.prototype.upDateTipsUI=function(){var t=new Date(GlobalData.serverTime),e=t.getMinutes(),i=t.getSeconds();this._isboll=48<e||48===e&&45<=i,this.setTipUI(),this._isboll1||this._isboll||(this._isboll1=!0,this._tweenLeft3||this._tweenLeft4||this.playerTwenn()),!this._isboll2&&this._isboll&&(this._isboll2=!0,this._tweenLeft3||this._tweenLeft4||this.playerTwenn())},o.prototype.setTipUI=function(){this.tipsText1.text=this._isboll?"对玩家":"对怪物",this.tipsText2.text=this._isboll?"获取更多玄火":"获取玄火",this.tipsBox.x=this._isboll?25:132},o.prototype.stopTwenn=function(){this.tipsBox.visible=!1,this._tweenLeft3&&(this._tweenLeft3.stop(),this._tweenLeft3=null),this._tweenLeft4&&(this._tweenLeft4.stop(),this._tweenLeft4=null),this.tipsBox.y=14},o.prototype.playerTwenn=function(){var t=this;this._tweenLeft4=TweenJS.create(this.tipsBox).to({y:this.tipsBox.y+35},300).onComplete(function(){t._tweenLeft3.start()}),this._tweenLeft3=TweenJS.create(this.tipsBox).to({y:this.tipsBox.y-35},300).onComplete(function(){t._tweenLeft4.start()}),this._tweenLeft3.start(),this.tipsBox.visible=!0},s=o,e.FireContentionCenterPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.fire_contention||(t.fire_contention={}),i=ui.FireContentionLeftViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.left=12,this.bottom=568,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.rankBtn,this,this.rankBtnHandler),this.onAutoClick(this.rewardBtn,this,this.rewardBtnHandler),this.regAutoRP(this.rewardRpImg,["fireContentionWarfireTargetRP"])},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.FireContentionModel.instance.setTargetRP()},s.prototype.rankBtnHandler=function(){WindowManager.instance.open(866)},s.prototype.rewardBtnHandler=function(){WindowManager.instance.open(868)},n=s,e.FireContentionLeftPanel=n}(modules=modules||{}),function(t){var s,o,e,a,i,n;function r(){return null!==o&&o.apply(this,arguments)||this}s=t.fire_contention||(t.fire_contention={}),e=t.common.CustomClip,a=t.config.BlendCfg,i=t.common.BtnGroup,o=ui.FireContentionViewUI,__extends(r,o),r.prototype.initialize=function(){o.prototype.initialize.call(this),this.centerX=0,this.centerY=0,CommonUtil.setHTMLPro(this.timeTxtHTML,"#1f304d","SimHei",24,"center"),this.timeTxtHTML.innerHTML=t.config.BlendCfg.instance.getCfgById(90001)[2][0],this.creatEffect(),this._btnGroup=new i,this._btnGroup.setBtns(this.arenaBtn,this.teamWarfareBtn)},r.prototype.onOpened=function(){o.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0;for(var t=a.instance.getCfgById(90002)[1],e=[this.item1,this.item2,this.item3,this.item4],i=0,n=0;n<t.length;n+=2)e[i].dataSource=[t[n],t[n+1],0,null],i++;s.FireContentionCtrl.instance.getWarFireAchieveInfo(),s.FireContentionCtrl.instance.getWarFireTargetInfo(),s.FireContentionCtrl.instance.getWarFirPersonRank(),s.FireContentionCtrl.instance.getWarFirWarbandRank(),this.showUI(),s.FireContentionModel.instance.setRP(),WindowManager.instance.close(866),WindowManager.instance.close(868)},r.prototype.close=function(){o.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.showUI=function(){Laya.timer.clear(this,this.loopHandler),s.FireContentionModel.instance.readyTick<=GlobalData.serverTime||!s.FireContentionModel.instance.isStart?(this.setBtn(),this.createRoomBtn.visible=!0,this.enterTimeTxt.visible=!1):(e.thisStop(this._btnClip),Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler())},r.prototype.setBtn=function(){s.FireContentionModel.instance.isStart?e.thisPlay(this._btnClip):e.thisStop(this._btnClip)},r.prototype.loopHandler=function(){s.FireContentionModel.instance.readyTick<GlobalData.serverTime?(Laya.timer.clear(this,this.loopHandler),this.createRoomBtn.visible=!0,this.enterTimeTxt.visible=!1,this.setBtn()):(this.createRoomBtn.visible=!1,this.enterTimeTxt.visible=!0,e.thisStop(this._btnClip),this.enterTimeTxt.text="还需等待"+Math.ceil(.001*(s.FireContentionModel.instance.readyTick-GlobalData.serverTime))+"秒才可进入")},r.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.achievementBtn,this,this.achievementBtnHandler),this.onAutoClick(this.rankRewardBtn,this,this.rankRewardBtnHandler),this.onAutoClick(this.createRoomBtn,this,this.createRoomBtnHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.showUI),this.onAutoGlobalEvt("GET_WARFIRE_ACHIEVE_REPLY",this,this.showUI),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.regAutoRP(this.jingjiRP,["fireContentionRP","fireContentionAchievementRP"]),this.regAutoRP(this.teamWarfareRP,["teamWarfareRP7","teamWarfareRP","teamWarfareRP1","teamWarfareRP2","teamWarfareRP3","teamWarfareRP4","teamWarfareRP5"]),this.regAutoRP(this.achievementRPImg,["fireContentionAchievementRP"])},r.prototype.changeHandler=function(){1===this._btnGroup.selectedIndex&&(WindowManager.instance.open(1413),this._btnGroup.selectedIndex=0)},r.prototype.achievementBtnHandler=function(){WindowManager.instance.open(861)},r.prototype.rankRewardBtnHandler=function(){WindowManager.instance.open(867)},r.prototype.createRoomBtnHandler=function(){if(s.FireContentionModel.instance.isStart)return-1===t.warband.WarbandModel.instance.leaderId?(t.notice.SystemNoticeManager.instance.addNotice("需加入战队后才能参加此活动",!0),void WindowManager.instance.open(764)):void t.dungeon.DungeonCtrl.instance.reqEnterScene(2601);t.notice.SystemNoticeManager.instance.addNotice("玄火争夺未到开启时间",!0)},r.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19004)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),o.prototype.destroy.call(this,t)},r.prototype.creatEffect=function(){this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.createRoomBtn.x-6,this.createRoomBtn.y-8,!0)},n=r,s.FireContentionPanel=n}(modules=modules||{}),function(i){var n,e,t,s,o,a;function r(){return null!==e&&e.apply(this,arguments)||this}n=i.fire_contention||(i.fire_contention={}),t=laya.events.Event,s=i.common.SimpleList,o=i.common.BtnGroup,e=ui.FireContentionRankAlertUI,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=s.create(n.FireContentionRankItem,571,89),this._list.size(571,437),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._btnGroup=new o,this._btnGroup.setBtns(this.group_1,this.group_2),CommonUtil.setHTMLPro(this.tipTxt,"#1f304d","SimHei",22,"center"),this._rankNumList=new Array;for(var t=1;t<=20;t++)this._rankNumList.push(t)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,t.CHANGE,this,this.changeHandler),this.onAutoGlobalEvt("FIRE_CONTENTION_REPLY_RANK",this,this.showUI)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),n.FireContentionModel.instance._nowIndex=0,this._btnGroup.selectedIndex=0,n.FireContentionCtrl.instance.getWarFirPersonRank(),n.FireContentionCtrl.instance.getWarFirWarbandRank()},r.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(n.FireContentionModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI()):1===this._btnGroup.selectedIndex&&(n.FireContentionModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI())},r.prototype.showUI=function(){if(0===this._btnGroup.selectedIndex){this.text2.text="玩家名称",this.tipTxt.innerHTML="根据玩家拥有玄火数量进行排位",this.participationNum.visible=!1;var t=n.FireContentionModel.instance.personFireListRankTable[i.player.PlayerModel.instance.actorId];this.myRankNumText.text=t&&0!=t[6]?"我的排名:"+t[6]:"我的排名:未上榜",this.myIntegralText.text=":"+n.FireContentionModel.instance.myFireNum,this.myRankNumText.x=96,this.text1.x=407,this.img1.x=497,this.myIntegralText.x=518,this._list.datas=this._rankNumList}else if(1===this._btnGroup.selectedIndex){this.text2.text="战队名称",this.tipTxt.innerHTML="根据<span style='color:#b15315'>战队所有成员</span>拥有玄火数量进行排位",this.participationNum.visible=!0,t=n.FireContentionModel.instance.warbandFireListRankTable[i.warband.WarbandModel.instance.info[0]],this.myRankNumText.text=t&&0!=t[4]?"战队排名:"+t[4]:"战队排名:未上榜",this.myIntegralText.text=":"+n.FireContentionModel.instance.warbandFireNum;var e=i.warband.WarbandModel.instance.info[4];this.participationNum.text="参与人数:"+n.FireContentionModel.instance.warbandFirePeopleNum+"/"+e.length,this.myRankNumText.x=60,this.text1.x=252,this.img1.x=343,this.myIntegralText.x=366,this.participationNum.x=460,this._list.datas=this._rankNumList}},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},a=r,n.FireContentionRankAlert=a}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){return null!==i&&i.apply(this,arguments)||this}e=t.fire_contention||(t.fire_contention={}),n=t.config.WarfireWarbandRewardCfg,s=t.config.WarfirePersonRewardCfg,o=laya.events.Event,a=t.common.SimpleList,r=t.common.BtnGroup,i=ui.FireContentionRankRewardAlertUI,__extends(h,i),h.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=a.create(e.FireContentionRankRewardItem,571,115),this._list.size(571,436),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._btnGroup=new r,this._btnGroup.setBtns(this.group_1,this.group_2),CommonUtil.setHTMLPro(this.tipTxt,"#b15315","SimHei",22,"center","middle")},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,o.CHANGE,this,this.changeHandler)},h.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.FireContentionModel.instance._nowIndex2=this._btnGroup.selectedIndex=0},h.prototype.changeHandler=function(){e.FireContentionModel.instance._nowIndex2=this._btnGroup.selectedIndex,0===this._btnGroup.selectedIndex?this.showUI():1===this._btnGroup.selectedIndex&&this.showUI()},h.prototype.showUI=function(){0===this._btnGroup.selectedIndex?(this.text3.text="个人排行奖励",this.tipTxt.innerHTML="活动结算时发放排名奖励",this.tipTxt.y=626,this._list.datas=s.instance.getArr()):1===this._btnGroup.selectedIndex&&(this.text3.text="战队排行奖励",this.tipTxt.innerHTML="活动结算时发放排名奖励",this.tipTxt.y=626,this._list.datas=n.instance.getArr())},h.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},l=h,e.FireContentionRankRewardAlert=l}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._arr=GlobalData.getConfig("warfire_target");for(var t=0;t<this._arr.length;++t)this._tab[this._arr[t][0]]=this._arr[t]},n.prototype.getArr=function(){return this._arr},n.prototype.getDateByid=function(t){return this._tab[t]},i=n,e.WarfireTargetCfg=i}(modules=modules||{}),function(t){var r,e,i,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}r=t.fire_contention||(t.fire_contention={}),i=t.config.WarfireTargetCfg,n=t.common.SimpleList,e=ui.FireContentionAchievementAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(r.FireContentionRewardItem,571,156,1,1,0,5),this._list.size(571,639),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GET_WARFIRE_TARGET_REPLY",this,this.showUI),this.onAutoGlobalEvt("FIRE_UPDATEFIRELOGIN",this,this.showUI)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.titleText.text="玄火奖励",r.FireContentionCtrl.instance.getWarFireTargetInfo(),this.showUI()},o.prototype.showUI=function(){var t=i.instance.getArr();t.sort(this.sortFunc.bind(this)),this._list.datas=t},o.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=r.FireContentionModel.instance.getWarfireTargetStateById(i),o=r.FireContentionModel.instance.getWarfireTargetStateById(n),a=[1,0,2];return(s=a[s])===(o=a[o])?i-n:s-o},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s=o,r.FireContentionRewardAlert=s}(modules=modules||{}),function(a){var r,t,e;function i(){return t.call(this)||this}r=a.fire_contention||(a.fire_contention={}),t=ui.FireContentionRightViewUI,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),this.zOrder=-2,this.right=0,this.bottom=470,this.closeByOthers=!1,this.layer=3},i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoGlobalEvt("FIRE_CONTENTION_UPDATE_RANK",this,this.showUI),this.onAutoGlobalEvt("FIRE_UPDATEFIRELOGIN",this,this.showUI)},i.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19030)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.showUI(),Laya.timer.loop(1e3,this,this.showUI)},i.prototype.showUI=function(){var t=GlobalData.serverTime-r.FireContentionModel.instance.loginTime+r.FireContentionModel.instance.keepTime,e=r.FireContentionModel.instance.baoDiNum,i=r.FireContentionModel.instance.addTimeNum,n=r.FireContentionModel.instance.addNum,s=e+Math.floor(t/i)*n,o=r.FireContentionModel.instance.powerById[a.player.PlayerModel.instance.actorId];s<=(o=o||0)?(this.text2.text=s+"/"+s,this.text1.text=""+(o-s)):(this.text2.text=o+"/"+s,this.text1.text="0")},i.prototype.close=function(){t.prototype.close.call(this),Laya.timer.clearAll(this)},e=i,r.FireContentionRightPanel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.fire_contention||(t.fire_contention={}),i=ui.FireContentionCenterTipsViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.closeByOthers=!1,this.layer=7,CommonUtil.setHTMLPro(this.timeTxtHTML,"#FFFFFF","SimHei",24,"center")},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.clear(this,this.closeThis),Laya.timer.loop(5e3,this,this.closeThis)},s.prototype.onEvt=function(){var t=this;i.prototype.onEvt.call(this),this.onAutoGlobalEvt("SCENE_ENTER",this,function(){t.close(),t.destroy()})},s.prototype.setTips=function(t){this.timeTxtHTML.visible=!0,console.log("FireContentionModel.instance.tipsPanel.length: "+e.FireContentionModel.instance.tipsPanel.length),console.log("FireContentionModel.instance.tipsPanelNum: "+e.FireContentionModel.instance.tipsPanelNum),this.y=450-32*e.FireContentionModel.instance.tipsPanelNum,e.FireContentionModel.instance.tipsPanelNum++,this.timeTxtHTML.innerHTML=t},s.prototype.closeThis=function(){this.close(),e.FireContentionModel.instance.tipsPanelNum--,e.FireContentionModel.instance.tipsPanel.push(this)},s.prototype.close=function(){Laya.timer.clear(this,this.closeThis),i.prototype.close.call(this),this.removeSelf()},s.prototype.destroy=function(){Laya.timer.clear(this,this.closeThis),i.prototype.destroy.call(this,!0)},n=s,e.FireContentionCenterTipsPanel=n}(modules=modules||{}),function(t){var a,e,r,i;function n(){var t=e.call(this)||this;return t.layer=9,t.mouseThrough=!0,t}a=t.nothingness_world||(t.nothingness_world={}),r=t.config.EmptyMallCfg,e=ui.ForeignBossBroadcastViewUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.descHtml,"#ffffff","SimHei",24,"center"),this.anchorX=.5,this.alpha=0,this.y=380,this.txt.visible=!1,this._bg.pos(0,-9),this._bg.skin="foreignBoss/image_yyboss_pt.png"},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI()},n.prototype.onEvt=function(){e.prototype.onEvt.call(this)},n.prototype.showUI=function(){var t=a.NothingnessWorldModel.instance.broadcastList[0];if(t){var e=t[0],i=t[2],n=r.instance.getCfgById(i),s=PlayerModel.instance.actorId,o=(e=t[1]!==s?"队友"+e:"您")+"使用了<span style='color:#16e318'>["+n[4]+"]</span>";this.descHtml.innerHTML=o,this.descHtml.y=60,this.tween()}else this.callBack()},n.prototype.tween=function(){this.x=0,this._tween&&this._tween.stop();var t=CommonConfig.viewWidth/2>>0;this._tween=TweenJS.create(this).to({x:t,alpha:1},1e3).start(),Laya.timer.once(2e3,this,this.tween2,null,!0)},n.prototype.tween2=function(){this._tween=TweenJS.create(this).to({x:CommonConfig.viewWidth+this.width,alpha:0},1e3).start().onComplete(this.callBack.bind(this))},n.prototype.callBack=function(){a.NothingnessWorldModel.instance.broadcastList.shift(),0<a.NothingnessWorldModel.instance.broadcastList.length?this.showUI():this.close()},n.prototype.destroy=function(){this._tween&&(this._tween.stop(),this._tween=null),e.prototype.destroy.call(this)},i=n,a.NothingnessWorldBroadcastPanel=i}(modules=modules||{}),function(t){var s,e,o,i,n;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.nothingness_world||(t.nothingness_world={}),o=t.config.EmptyMallCfg,i=t.common.SimpleList,e=ui.NothingnessWorldCenterViewUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.zOrder=-1,this.bottom=276,this.closeByOthers=!1,this.layer=3,this._list=i.create(s.NothingnessWorldCopyRuneItem,80,122*.8,2,1,5,5),this._list.size(420,100),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("GET_EMPTY_ITEM_REPLY",this,this.showUI),this.onAutoGlobalEvt("EMPTY_SCENE_READY",s.NothingnessWorldCtrl.instance,s.NothingnessWorldCtrl.instance.getEmptyBossSkill)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.NothingnessWorldCtrl.instance.getEmptyItem(),this.showUI(),GlobalData.dispatcher.event("CLOSE_ROOM_ALST")},a.prototype.showUI=function(){for(var t=[],e=0;e<s.NothingnessWorldModel.instance.runeList.length;e++){var i=s.NothingnessWorldModel.instance.runeList[e],n=o.instance.getCfgById(i);n&&t.push(n)}if(t.sort(this.sortFunc.bind(this)),t.length<5)for(e=t.length;e<5;e++)t.push(null);this._scrollPosOld=this._list.scrollPos,this._list.datas=t,this._list.scrollPos=this._scrollPosOld},a.prototype.sortFunc=function(t,e){return t[0]-e[0]},a.prototype.close=function(){e.prototype.close.call(this),s.NothingnessWorldModel.instance.runeList&&(s.NothingnessWorldModel.instance.runeList.length=0)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n=a,s.NothingnessWorldCenterPanel=n}(modules=modules||{}),function(s){var o,t,a,e;function i(){return null!==t&&t.apply(this,arguments)||this}o=s.nothingness_world||(s.nothingness_world={}),a=s.common.CommonUtil,t=ui.NothingnessWorldStrategyAlertUI,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),a.setHTMLPro(this.timeTxtHTML,"#3a5385","SimHei",22,"left","top"),this.timeTxtHTML.style.leading=5},i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_EMPTY_MONSTER_SKILL",this,this.showUI)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),o.NothingnessWorldCtrl.instance.getEmptyBossSkill(),this.showUI()},i.prototype.showUI=function(){for(var t="",e=0;e<o.NothingnessWorldModel.instance.skillList.length;e++){var i=o.NothingnessWorldModel.instance.skillList[e],n=s.config.SkillCfg.instance.getCfgById(i);n&&(t+="<span style='color:#b15315'>"+a.getSkillName(i)+"</span>:"+n[2]+"<br/>")}this.timeTxtHTML.innerHTML=t},e=i,o.NothingnessWorldStrategyAlert=e}(modules=modules||{}),function(t){var a,e,i,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}a=t.nothingness_world||(t.nothingness_world={}),i=t.config.EmptyMallCfg,n=t.common.SimpleList,e=ui.NothingnessWorldCharmMallAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(a.NothingnessWorldCharmMallItem,571,125),this._list.size(571,733),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_EMPTY_MONSTER_SKILL",this,this.showUI),this.onAutoGlobalEvt("EMPTY_SCENE_READY",this,this.showUI)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI()},o.prototype.showUI=function(){var t=i.instance.getArr();t.sort(this.sortFunc.bind(this)),this._list.datas=t},o.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.NothingnessWorldModel.instance.isRecommendById(i),o=a.NothingnessWorldModel.instance.isRecommendById(n);return s&&o||!s&&!o?i-n:s?-1:o?1:void 0},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s=o,a.NothingnessWorldCharmMallAlert=s}(modules=modules||{}),function(t){var n,e,i;function s(){return e.call(this)||this}n=t.nothingness_world||(t.nothingness_world={}),e=ui.NothingnessWorldCopyRightViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=0,this.bottom=459,this.closeByOthers=!1,this.layer=3,this._allPlayerInfo=[this.item1,this.item2,this.item3]},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_EMPTYER_INFO",this,this.showUI)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI()},s.prototype.showUI=function(){for(var t=0;t<this._allPlayerInfo.length;t++)(e=this._allPlayerInfo[t])&&(e.visible=!1);for(t=0;t<n.NothingnessWorldModel.instance.emptyer.length;t++){var e=n.NothingnessWorldModel.instance.emptyer[t],i=this._allPlayerInfo[t];e&&i?(i&&(i.visible=!0),i.data=e):i&&(i.visible=!1)}},s.prototype.close=function(){e.prototype.close.call(this),n.NothingnessWorldModel.instance.currLv=0},i=s,n.NothingnessWorldCopyRightPanel=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.nothingness_world||(t.nothingness_world={}),i=ui.NothingnessWorldLeftViewUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.left=0,this.bottom=458,this.closeByOthers=!1,this.layer=3},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.rankBtn,this,this.rankBtnHandler),this.onAutoClick(this.rewardBtn,this,this.rewardBtnHandler),this.onAutoClick(this.storeBtn,this,this.storeBtnHandler),this.onAutoGlobalEvt("EMPTY_SCENE_READY",this,this.showUI)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.NothingnessWorldCtrl.instance.getEmptyBossSkill(),this.rewardRpImg.visible=!1},s.prototype.showUI=function(){WindowManager.instance.isOpened(957)||(this.rewardRpImg.visible=!0)},s.prototype.storeBtnHandler=function(){WindowManager.instance.open(958)},s.prototype.rankBtnHandler=function(){WindowManager.instance.open(957),this.rewardRpImg.visible=!1},s.prototype.rewardBtnHandler=function(){WindowManager.instance.open(960)},n=s,e.NothingnessWorldLeftPanel=n}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.nothingness_world||(t.nothingness_world={}),n=Laya.Event,s=t.common.BtnGroup,o=t.common.CustomClip,a=t.common.SimpleList,i=ui.NothingnessWorldViewUI,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._taskBase=[this.reward1,this.reward2,this.reward3,this.reward4],CommonUtil.setHTMLPro(this.timeTxtHTML,"#1f304d","SimHei",24,"left"),CommonUtil.setHTMLPro(this.timeTxtHTML1,"#ffffff","SimHei",24,"right"),CommonUtil.setHTMLPro(this.timeTxtHTML2,"#ffffff","SimHei",24,"right"),CommonUtil.setHTMLPro(this.timeTxtHTML3,"#ffffff","SimHei",24,"right"),this.timeTxtHTML.innerHTML=t.config.BlendCfg.instance.getCfgById(90001)[2][0],this.creatEffect(),this._list=a.create(e.NothingnessWorldRankItem,290,30,1,1,0,0),this._list.size(290,248),this.listBox1.addChild(this._list),this._list1=a.create(e.NothingnessWorldRankItem1,290,30,1,1,0,0),this._list1.size(290,150),this.listBox2.addChild(this._list1),this._rankDate=[1,2,3,4,5,6,7,8],this._rankDate1=[1,2,3,4,5],this._btnGroup=new s,this._btnGroup.setBtns(this.teamBtn,this.netherBtn,this.arenaBtn)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.matchBtn,this,this.matchBtnBtnHandler),this.onAutoClick(this.sportAwardBtn,this,this.sportAwardBtnBtnHandler),this.onAutoClick(this.createRoomBtn,this,this.createRoomBtnHandler),this.onAutoClick(this.helpBtn,this,this.helpBtnHandler),this.onAutoClick(this.tipsBtn,this,this.tipsHanlder),this.onAutoClick(this.chanllgeCBtn,this,this.setOneKeychangeHandler),this.onAutoEvt(this._btnGroup,n.CHANGE,this,this.changeHandler),this.onAutoGlobalEvt("SINGLE_QUXIAO",this,this.createRoomBtnHandler),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.showUI),this.onAutoGlobalEvt("NOTHINGNESS_CONTENTION_REPLY_RANK",this,this.showUI),this.onAutoGlobalEvt("GET_EMPTY_INFO_REPLY",this,this.sheBtn),this.onAutoGlobalEvt("HOLO_HELPER_SET_UPDATE",this,this.holoHelperUpdate),this.regAutoRP(this.dotImg,["teamBattleRP"]),this.regAutoRP(this.jingjiRP,["nothingnessWorldRP"]),this.regAutoRP(this.netherRP,["netherWorldRP"])},l.prototype.tipsHanlder=function(){CommonUtil.alertHelp(67047)},l.prototype.holoHelperUpdate=function(){this.chanllgeCBtn.selected=t.halo.HaloModel.instance.getCheckTipsValue(40)},l.prototype.setOneKeychangeHandler=function(){CommonUtil.setHalaOneKeychange(!this.chanllgeCBtn.selected,40)},l.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(WindowManager.instance.open(97),this._btnGroup.selectedIndex=2):1===this._btnGroup.selectedIndex&&(WindowManager.instance.open(1379),this._btnGroup.selectedIndex=2)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.NothingnessWorldModel.instance.doneWave=0,this._btnGroup.selectedIndex=2,this.showRewards(t.config.BlendCfg.instance.getCfgById(90003)[1]),this.showUI(),this.sheBtn(),t.common_group.CommonGroupCtrl.instance.fetchTeamEx(),e.NothingnessWorldCtrl.instance.getEmptyInfo(),e.NothingnessWorldCtrl.instance.getEmptyPersonRank(),e.NothingnessWorldCtrl.instance.getEmptyWarbandRank(),this.chanllgeCBtn.selected=t.halo.HaloModel.instance.getCheckTipsValue(40)},l.prototype.matchBtnBtnHandler=function(){t.common_group.CommonGroupUtil.matchBtnHandler(2,!0)},l.prototype.createRoomBtnHandler=function(){t.common_group.CommonGroupUtil.createRoom(2,!1,!0)},l.prototype.sportAwardBtnBtnHandler=function(){WindowManager.instance.open(963)},l.prototype.helpBtnHandler=function(){CommonUtil.alertHelp(19008)},l.prototype.showUI=function(){this.timeTxtHTML1.innerHTML="本周通关层数:<span style='color:#50ff28'>"+e.NothingnessWorldModel.instance.personalRecordNum+"</span>层",this.timeTxtHTML2.innerHTML="战队最佳记录:<span style='color:#50ff28'>"+e.NothingnessWorldModel.instance.teamRecordNum+"</span>层",this.timeTxtHTML3.innerHTML="战队模式记录:<span style='color:#50ff28'>"+e.NothingnessWorldModel.instance.teamPatternRecordNum+"</span>层",this._list.datas=this._rankDate,this._list1.datas=this._rankDate1},l.prototype.sheBtn=function(){o.thisStop(this._btnClip),0<e.NothingnessWorldModel.instance.nowChallengeNum?this.timeTxtHTML.innerHTML="<span style='color:#4c5e8a'>挑战次数:</span><span style='color:#00ad35'>"+e.NothingnessWorldModel.instance.nowChallengeNum+"/"+e.NothingnessWorldModel.instance.maxChallengeNum+"</span>":this.timeTxtHTML.innerHTML="<span style='color:#4c5e8a'>挑战次数:</span><span style='color:#e6372e'>"+e.NothingnessWorldModel.instance.nowChallengeNum+"/"+e.NothingnessWorldModel.instance.maxChallengeNum+"</span>"},l.prototype.showRewards=function(t){t.length;for(var e=(this.width,0),i=0;i<t.length;i+=2){var n=this._taskBase[e];n&&(n.nameVisible=!0,n.dataSource=[t[i],t[i+1],0,null],n.visible=!0,e++)}},l.prototype.creatEffect=function(){this._btnClip=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.matchBtn.x-6,this.matchBtn.y-8,!0)},l.prototype.close=function(){i.prototype.close.call(this),WindowManager.instance.close(958),WindowManager.instance.close(957),WindowManager.instance.close(960)},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),i.prototype.destroy.call(this,t)},r=l,e.NothingnessWorldPanel=r}(modules=modules||{}),function(t){var a,e,r,l,i,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}a=t.nothingness_world||(t.nothingness_world={}),r=t.config.EmptyWarbandRewardCfg,l=t.config.EmptyPersonRewardCfg,i=t.common.SimpleList,n=t.common.BtnGroup,e=ui.FireContentionRankRewardAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(a.NothingnessWorldRankRewardItem,571,115),this._list.size(571,436),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._btnGroup=new n,this._btnGroup.setBtns(this.group_1,this.group_2),this.group_1.label="巅峰八强",this.group_2.label="最佳战队",CommonUtil.setHTMLPro(this.tipTxt,"#b15315","SimHei",22,"center","middle")},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),a.NothingnessWorldModel.instance._nowIndex2=this._btnGroup.selectedIndex=0},o.prototype.changeHandler=function(){a.NothingnessWorldModel.instance._nowIndex2=this._btnGroup.selectedIndex,0===this._btnGroup.selectedIndex?this.showUI():1===this._btnGroup.selectedIndex&&this.showUI()},o.prototype.showUI=function(){if(0===this._btnGroup.selectedIndex)this.text3.text="巅峰八强奖励",this.tipTxt.innerHTML="周日晚上22:00发放排名奖励",this.tipTxt.y=625,this._list.datas=l.instance.getArr();else if(1===this._btnGroup.selectedIndex){this.text3.text="最佳战队奖励",this.tipTxt.y=614,this._list.datas=r.instance.getArr();for(var t=999999,e=0;e<this._list.datas.length;e++){var i=this._list.datas[e],n=i[3],s=i[0][0],o=i[0][1];0!=a.NothingnessWorldModel.instance.myWraBandRank?a.NothingnessWorldModel.instance.myWraBandRank>=s&&a.NothingnessWorldModel.instance.myWraBandRank<=o&&(t=n):t=n<t?n:t}this.tipTxt.innerHTML="周日晚上22:00发放排名奖励<br/>战队成员需在战队模式下通过第"+t+"层才能领取奖励"}},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this)},s=o,a.NothingnessWorldRankRewardAlert=s}(modules=modules||{}),function(t){var o,e,a,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}o=t.nothingness_world||(t.nothingness_world={}),a=t.config.SceneEmptyCfg,i=t.common.SimpleList,e=ui.NothingnessWorldRewordPreviewAlertUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(t.bag.BaseItem,100,100,1,5,5.5,20),this._list.size(522,229),this.listBox.addChild(this._list),this._list.pos(0,0,!0)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("EMPTY_SCENE_READY",this,this.showUI)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI()},s.prototype.showUI=function(){var t=[],e=o.NothingnessWorldModel.instance.currLv,i=a.instance.cfgs.length;e=0===(e=i<e?i:e)?1:e;var n=a.instance.getCfgByLevel(e);n&&(t=n[6]);var s=CommonUtil.formatItemData(t);this._list.datas=s},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n=s,o.NothingnessWorldRewordPreviewAlert=n}(modules=modules||{}),function(o){var a,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}a=o.fire_contention||(o.fire_contention={}),t=ui.FireContentionRightBuffViewUI,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),this.zOrder=-1,this.right=11,this.bottom=559,this.closeByOthers=!1,this.layer=3},i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.buffBtn,this,this.buffHandler),this.onAutoGlobalEvt("WARFIRE_DEAD_TIMES",this,this.showUI1),this.onAutoGlobalEvt("WAR_FIRE_BUFF_END_TIME",this,this.showUI)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.showUI(!1),this.showUI1()},i.prototype.showUI1=function(){this.text1.text="当前:"+a.FireContentionModel.instance.serialDeathNum+"层"},i.prototype.showUI=function(t){if(void 0===t&&(t=!0),a.FireContentionModel.instance.endTime>=GlobalData.serverTime){t&&Laya.timer.loop(1e3,this,this.showUI);var e=o.config.EffectCfg.instance.getCfgById(a.FireContentionModel.instance.buffSkillId);if(e){var i=e[2][0],n=e[2][1],s=0;1===i?(s=n,this.text2.text="攻击+"+s):2===i&&(s=100*n,this.text2.text="攻击+"+s+"%"),this.text2.color="#00ad35"}}else this.text2.text="未激活",this.text2.color="#ff3e3e",t&&(Laya.timer.clear(this,this.showUI),o.notice.SystemNoticeManager.instance.addNotice("战队全员鼓舞已失效",!0))},i.prototype.btnHandler=function(){WindowManager.instance.open(980)},i.prototype.buffHandler=function(){WindowManager.instance.open(1082)},i.prototype.close=function(){t.prototype.close.call(this),Laya.timer.clear(this,this.showUI)},e=i,a.FireContentionRightBuffPanel=e}(modules=modules||{}),function(l){var h,t,e;function i(){return null!==t&&t.apply(this,arguments)||this}h=l.fire_contention||(l.fire_contention={}),t=ui.FireContentionBuffAlertUI,__extends(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.timeTxtHTML,"#3a5385","SimHei",24,"center"),CommonUtil.setHTMLPro(this.timeTxtHTML1,"#3a5385","SimHei",24,"center"),CommonUtil.setHTMLPro(this.timeTxtHTML2,"#3a5385","SimHei",24,"center"),CommonUtil.setHTMLPro(this.timeTxtHTML3,"#3a5385","SimHei",24,"center")},i.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.close),this.onAutoGlobalEvt("WARFIRE_DEAD_TIMES",this,this.showUI)},i.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.showUI()},i.prototype.showUI=function(){this.timeTxtHTML.innerHTML="玄火之力:<span style='color:#3a5385'>"+h.FireContentionModel.instance.serialDeathNum+"</span>层";for(var t=h.FireContentionModel.instance.getAllBuff(),e=[this.timeTxtHTML1,this.timeTxtHTML2,this.timeTxtHTML3],i=["全属性","全属性","全属性"],n=0;n<e.length;n++){var s=e[n],o=t[n],a=i[n];s&&null!=o&&a?(s&&(s.visible=!0),s.innerHTML=a+":<span style='color:#3a5385'>+"+o+"%</span>"):s&&(s.visible=!1)}var r=l.config.BlendCfg.instance.getCfgById(86021)[1][0];this.text1.text="可叠加"+r+"层,击败其他玩家后消失"},e=i,h.FireContentionBuffAlert=e}(modules=modules||{}),function(a){var r,l,t;function e(){return null!==l&&l.apply(this,arguments)||this}r=a.fire_contention||(a.fire_contention={}),l=ui.FireContentionBuffAlert1UI,__extends(e,l),e.prototype.initialize=function(){l.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.tipHTML1,"#3a5385","SimHei",24,"center")},e.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("WAR_FIRE_BUFF_END_TIME",this,this.showUI)},e.prototype.onOpened=function(){l.prototype.onOpened.call(this),this.img1.skin=CommonUtil.getIconById(r.FireContentionModel.instance.buffId,!0),this.text2.text=""+r.FireContentionModel.instance.buffNum;var t=this.text1.textWidth+this.img1.width+this.text2.textWidth,e=(this.width-t)/2;this.text1.x=e,this.img1.x=this.text1.x+this.text1.textWidth,this.text2.x=this.img1.x+this.img1.width,this.text3.text="";var i=a.config.EffectCfg.instance.getCfgById(r.FireContentionModel.instance.buffSkillId);if(i){var n=i[2][0],s=i[2][1],o=0;1===n?(o=s,this.text3.text="攻击+"+o):2===n&&(o=100*s,this.text3.text="攻击+"+o+"%")}this.text4.text="鼓舞持续"+r.FireContentionModel.instance.buffSkillTime/6e4+"分钟",this.showUI()},e.prototype.showUI=function(){this.text5.visible=this.tipHTML1.visible=!1,this.okBtn.visible=!0,Laya.timer.clear(this,this.activityHandler),r.FireContentionModel.instance.endTime>=GlobalData.serverTime&&(this.text5.visible=this.tipHTML1.visible=!0,this.okBtn.visible=!1,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler))},e.prototype.okBtnHandler=function(){var t=PlayerModel.instance.getCurrencyById(r.FireContentionModel.instance.buffId);null==t&&(t=a.bag.BagModel.instance.getItemCountById(r.FireContentionModel.instance.buffId)),t>=r.FireContentionModel.instance.buffNum?r.FireContentionCtrl.instance.warFireBuyBuff():90140001==r.FireContentionModel.instance.buffId?CommonUtil.goldNotEnoughAlert():a.bag.BagUtil.openLackPropAlert(r.FireContentionModel.instance.buffId,1)},e.prototype.activityHandler=function(){this.tipHTML1.innerHTML="剩余时间:<span style='color:#ff3e3e'>"+CommonUtil.timeStampToMMSS(r.FireContentionModel.instance.endTime)+"</span>",r.FireContentionModel.instance.endTime<GlobalData.serverTime&&(this.text5.visible=this.tipHTML1.visible=!1,this.okBtn.visible=!0,Laya.timer.clear(this,this.activityHandler))},e.prototype.close=function(){l.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},t=e,r.FireContentionBuffAlert1=t}(modules=modules||{}),function(l){var h,e,t;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.times=0,t}h=l.nothingness_world||(l.nothingness_world={}),e=ui.NothingnessWorldClearanceAlertUI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#3d5981","SimHei",22,"center"),this.StatementHTML.style.leading=10},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.times=GlobalData.serverTime+3e3,Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},i.prototype.loopHandler=function(){var t=this;if(this.times<GlobalData.serverTime)Laya.timer.clear(this,this.loopHandler),this.close();else{var e=function(){40===i?t.StatementHTML.innerHTML="恭喜您的队伍通关<span style='color:#b15315'>第"+h.NothingnessWorldModel.instance.doneWave+"层</span>,<span style='color:#168a17'>"+Math.ceil(.001*(t.times-GlobalData.serverTime))+"秒</span>后进入下一层":52===i&&(t.StatementHTML.innerHTML="恭喜您的队伍通关<span style='color:#b15315'>第"+l.nether_world.NetherWorldModel.instance.doneWave+"层</span>,<span style='color:#168a17'>"+Math.ceil(.001*(t.times-GlobalData.serverTime))+"秒</span>后进入下一层")},i=l.scene.SceneUtil.currScene;if(0<h.NothingnessWorldModel.instance.tick){var n=0,s=0,o=0;40===i?(n=h.NothingnessWorldModel.instance.doneWave,o=h.NothingnessWorldModel.instance.maxLevelNum,s=l.config.SceneEmptyCfg.instance.getUpMaxTime(l.nothingness_world.NothingnessWorldModel.instance.currLv)):52===i&&(n=l.nether_world.NetherWorldModel.instance.doneWave,o=l.nether_world.NetherWorldModel.instance.maxLevelNum,s=l.config.SceneZhanHunCfg.instance.getUpMaxTime(l.nether_world.NetherWorldModel.instance.currLv));var a=s-h.NothingnessWorldModel.instance.tick;a<1e3?a=1e3:0<a%1e3&&(a+=1e3-a%1e3),a=0===a?1:a,h.NothingnessWorldModel.instance.level<=0?n===o?e():0!=s?this.StatementHTML.innerHTML="恭喜您的队伍<span style='color:#b15315'>"+CommonUtil.msToSS(a,!1)+"秒</span>通关<span style='color:#168a17'>第"+n+"层</span><br/>\n                            <span style='color:#b15315'>"+Math.ceil(.001*(this.times-GlobalData.serverTime))+"秒</span>后进入<span style='color:#168a17'>第"+(n+1)+"层</span>":e():h.NothingnessWorldModel.instance.level>n+1?this.StatementHTML.innerHTML="恭喜您的队伍<span style='color:#b15315'>"+CommonUtil.msToSS(a,!1)+"秒</span>通关<span style='color:#168a17'>第"+n+"层</span><br/>\n                            <span style='color:#b15315'>"+Math.ceil(.001*(this.times-GlobalData.serverTime))+"秒</span>后可直接跳至<span style='color:#168a17'>第"+h.NothingnessWorldModel.instance.level+"层</span>":0!=s?this.StatementHTML.innerHTML="恭喜您的队伍<span style='color:#b15315'>"+CommonUtil.msToSS(a,!1)+"秒</span>通关<span style='color:#168a17'>第"+n+"层</span><br/>\n                                <span style='color:#b15315'>"+Math.ceil(.001*(this.times-GlobalData.serverTime))+"秒</span>后进入<span style='color:#168a17'>第"+h.NothingnessWorldModel.instance.level+"层</span>":e()}else e();var r=(this.box.height-this.StatementHTML.contextHeight)/2;this.StatementHTML.y=r}},i.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clearAll(this)},t=i,h.NothingnessWorldClearanceAlert=t}(modules=modules||{}),function(e){var t,n,i,s,o,a,r,l,h,c;function p(){return null!==n&&n.apply(this,arguments)||this}t=e.fire_contention||(e.fire_contention={}),i=e.bag.BagItem,s=e.config.BlendCfg,o=e.common.CustomList,a=laya.events.Event,r=e.common.SimpleList,l=e.common.BtnGroup,h=e.dungeon.DungeonCtrl,n=ui.FireContentionWinViewUI,__extends(p,n),p.prototype.initialize=function(){n.prototype.initialize.call(this),this.closeOnSide=!1,this._listReward=new o,this._listReward.width=461,this._listReward.height=115,this._listReward.hCount=4,this._listReward.spaceX=8,this._listReward.itemRender=i,this.listBox1.addChild(this._listReward),this._listReward.x=0,this._listReward.y=0,CommonUtil.setHTMLPro(this.rankHTML,"#3a5385","SimHei",24),CommonUtil.setHTMLPro(this.rankHTML1,"#3a5385","SimHei",24),this._list=r.create(e.fire_contention.FireContentionRankItem1,571,65),this._list.size(571,248),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._btnGroup=new l,this._btnGroup.setBtns(this.group_1,this.group_2),this._rankNumList=new Array;for(var t=1;t<=20;t++)this._rankNumList.push(t)},p.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),this.onAutoEvt(this._btnGroup,a.CHANGE,this,this.changeHandler),this.onAutoGlobalEvt("FIRE_CONTENTION_REPLY_RANK",this,this.showUI),Laya.timer.loop(1e3,this,this.loopHandler)},p.prototype.offEvt=function(){n.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},p.prototype.onOpened=function(){n.prototype.onOpened.call(this),e.notice.ScoreNoticeManager.instance.sotpAllTween(),this._duration=s.instance.getCfgById(10303)[1][0],this.loopHandler(),e.fire_contention.FireContentionModel.instance._nowIndex=0,this._btnGroup.selectedIndex=0,e.fire_contention.FireContentionCtrl.instance.getWarFirPersonRank(),e.fire_contention.FireContentionCtrl.instance.getWarFirWarbandRank()},p.prototype.close=function(){n.prototype.close.call(this),h.instance.reqEnterScene(0)},p.prototype.setOpenParam=function(t){if(n.prototype.setOpenParam.call(this,t),t){var e=t[0];this.showRewards(t[1]),t[2],t[3];var i=t[4];this.rankHTML.innerHTML="拥有玄火:<span style='color:#3a5385'>"+e+"</span>",this.rankHTML1.innerHTML="转换战队币:<span style='color:#3a5385'>"+i+"</span>"}},p.prototype.showRewards=function(t){for(var e=new Array,i=0;i<t.length;i++)95030001===t[i][0]&&t[i][1],e.push([t[i][0],t[i][1],0,null]);this._listReward.datas=e},p.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},p.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(e.fire_contention.FireContentionModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI()):1===this._btnGroup.selectedIndex&&(e.fire_contention.FireContentionModel.instance._nowIndex=this._btnGroup.selectedIndex,this.showUI())},p.prototype.showUI=function(){if(0===this._btnGroup.selectedIndex){this.text2.text="玩家名称";var t=e.fire_contention.FireContentionModel.instance.personFireListRankTable[e.player.PlayerModel.instance.actorId];this.myRankNumText.text=t&&0!=t[6]?"我的排名:"+t[6]:"我的排名:未上榜",this.myIntegralText.text=":"+e.fire_contention.FireContentionModel.instance.myFireNum,this._list.datas=this._rankNumList}else 1===this._btnGroup.selectedIndex&&(this.text2.text="战队名称",t=e.fire_contention.FireContentionModel.instance.warbandFireListRankTable[e.warband.WarbandModel.instance.info[0]],this.myRankNumText.text=t&&0!=t[4]?"战队排名:"+t[4]:"战队排名:未上榜",this.myIntegralText.text=":"+e.fire_contention.FireContentionModel.instance.warbandFireNum,this._list.datas=this._rankNumList)},p.prototype.destroy=function(){this._listReward=this.destroyElement(this._listReward),this._list=this.destroyElement(this._list),n.prototype.destroy.call(this)},c=p,t.FireContentionWinPanel=c}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._upStone=new n,this._idCfg=new n;for(var t=GlobalData.getConfig("gem_refine"),e=0;e<t.length;e++)this._idCfg.set(t[e][0],t[e]),t[e][1]||(this._stoneMaxLv=t[e][5]);var i=GlobalData.getConfig("gem_rise");for(this._maxLv=0,this._maxLv=i[i.length-1][0],e=0;e<i.length;e++)this._upStone.set(i[e][0],i[e])},s.prototype.getCfgById=function(t){return this._idCfg.get(t)},Object.defineProperty(s.prototype,"stoneMaxLv",{get:function(){return this._stoneMaxLv},enumerable:!0,configurable:!0}),s.prototype.getUpStoneByLev=function(t){return this._upStone.get(t)},Object.defineProperty(s.prototype,"maxLv",{get:function(){return this._maxLv},enumerable:!0,configurable:!0}),s.prototype.getLastId=function(t){for(var e=this._idCfg.values,i=0,n=e.length;i<n;i++)if(e[i][1]===t)return e[i][0];return-1},i=s,e.StoneCfg=i}(modules=modules||{}),function(i){var l,n,s,t,o,a,r,h,c,p,u,d,y,e,g,f,_,m;function v(){return null!==n&&n.apply(this,arguments)||this}l=i.stone||(i.stone={}),s=i.core.WindowManager,t=ui.StoneUI,o=Laya.Dictionary,a=i.player.PlayerModel,r=i.bag.BaseItem,h=Laya.Event,c=i.config.StoneCfg,p=i.common.CommonUtil,u=i.common.CustomClip,d=i.bag.BagModel,y=Laya.Image,e=i.notice.SystemNoticeManager,g=i.funcOpen.FuncOpenModel,f=utils.TableUtils,_=i.config.BlendCfg,n=t,__extends(v,n),v.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._currEqiup=1,this._equipPos=new Array,this._equipPos.push([49,245],[49,365],[49,486],[49,605],[49,725],[569,245],[569,365],[569,486],[569,605],[569,725]),this.effectInit(),this._recordLev={},this._cenItem=new r,this._cenItem.valueDisplay=!1,this._cenItem.pos(313,376),this._cenItem.setNum("","#ffffff"),this.addChild(this._cenItem),this._keysArr=[],this._stoneDia=new l.StoneDialog,this._partDic=new o,this.pit_0.type=0,this.pit_1.type=1,this.pit_2.type=2,this.pit_3.type=3,this.pit_4.type=4,this._strIndex={},this._lastRpType=-1;var e=i.config.PrivilegeCfg.instance.getOpenFuncByType(9);this.vipTxt.text="SVIP"+e+"专属",this._tween=TweenJS.create(this.nowLevImg).yoyo(!0).onComplete(function(){t.nowLevImg.scale(1,1,!0)}),this.regGuideSpr(34,this.oneKeyBtn)},v.prototype.destroy=function(){if(this._tween&&(this._tween.stop(),this._tween=null),this._scheEffect=this.destroyElement(this._scheEffect),this._stoneDia=this.destroyElement(this._stoneDia),this._cenItem=this.destroyElement(this._cenItem),this._currFrame=this.destroyElement(this._currFrame),this._btnClip=this.destroyElement(this._btnClip),this._upGradeStone=this.destroyElement(this._upGradeStone),this._upGradePart=this.destroyElement(this._upGradePart),this._partDic){for(var t=0,e=this._partDic.values;t<e.length;t++)e[t].destroy(!0);this._partDic=null}this._keysArr.length=0,this._equipPos.length=0,f.clear(this._recordLev),this._recordLev=null,f.clear(this._strIndex),this._strIndex=null,n.prototype.destroy.call(this)},v.prototype.close=function(){this._tween&&this._tween.stop(),n.prototype.close.call(this),this._stoneDia&&this._stoneDia.close()},v.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.addTipsBtn2,this,this.addTipsBtnHandler,[1]),this.onAutoClick(this.addTipsBtn3,this,this.addTipsBtnHandler,[2]);for(var t=0,e=this._upGradeStone.length;t<e;t++)this.onAutoEvt(this._upGradeStone[t],"complete",this,this.closeEff,[t]);for(t=0,e=10;t<e;t++)this.onAutoEvt(this._upGradePart[t],"complete",this,this.closePartEff,[t]);for(this.onAutoClick(this.about,this,this.openAbout),this.onAutoClick(this.masterImg,this,this.openMaster),this.onAutoClick(this.compoundTxt,this,this.openComposePanel),this.onAutoClick(this.getTxt,this,this.getWay),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyBtnHandler),this.onAutoClick(this.maskImg,this,this.maskImgHandler),t=0,e=this._partDic.keys.length;t<e;t++)this.onAutoClick(this._partDic.get(this._partDic.keys[t]),this,this.itemClickHandler,[this._partDic.keys[t]]);GlobalData.dispatcher.once("GET_EQUIP",this,this.searchOne),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updataStonePit),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.equipInitedHandler),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.equipInitedHandler),this.onAutoGlobalEvt("UP_EFFECT",this,this.playUpEff),this.onAutoGlobalEvt("ONEKEY_UP_EFFECT",this,this.playOneKeyUpEff),this.onAutoGlobalEvt("UP_MASTER",this,this.upMaster),this.onAutoGlobalEvt("VIP_UPDATE",this,this.vipPitHandler),this.onAutoGlobalEvt("STONE_UPDATA",this,this.master),this.onAutoGlobalEvt("SELECT_PIT",this,this.openUpGradeView),this.onAutoGlobalEvt("PLAYER_TOTAL_ATTR_UPDATE",this,this.showAddTipsBtn),this.onAutoGlobalEvt("STONE_SELECT_UPDATE",this,this.searchOne)},v.prototype.offEvt=function(){GlobalData.dispatcher.off("GET_EQUIP",this,this.searchOne),n.prototype.offEvt.call(this)},v.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._lastRpType=-1,this.equipInitedHandler(),this.searchOne(),this.vipPitHandler(),this.showAddTipsBtn(),this._scheEffect.play(),this._btnClip.play();for(var t=0,e=this._upGradeStone.length;t<e;t++)this._upGradeStone[t].visible=!1;for(t=0,e=this._upGradePart.length;t<e;t++)this._upGradePart[t].visible=!1;this.setVisible()},v.prototype.getInlayIndex=function(){var t=-1,e=-1,i=-1;for(var n in this._strIndex)switch(this._strIndex[n]){case 1:-1===t&&(t=parseInt(n));break;case 2:-1===e&&(e=parseInt(n));break;case 3:-1===i&&(i=parseInt(n))}return-1!=t?t:-1!=e?e:-1!=i?i:-1},v.prototype.addTipsBtnHandler=function(t){if(g.instance.getFuncIsOpen(92))s.instance.open(93);else{var e="戒指";switch(t){case 0:e="手镯";break;case 1:e="戒指";break;case 2:e="玉佩"}i.notice.SystemNoticeManager.instance.addNotice(e+"可通过寻宝获得",!0)}},v.prototype.vipPitHandler=function(){var t=l.StoneModel.instance.getValueByPart().get(10*this._currEqiup);l.StoneModel.instance.vipIsOpen?(this.maskImg.visible=this.lockImg.visible=!1,this.pit_0.addImg.visible=!t):(this.maskImg.visible=this.lockImg.visible=!0,this.pit_0.redImg.visible=this.pit_0.addImg.visible=!1),this.setVisible()},v.prototype.openComposePanel=function(){s.instance.open(66,[0])},v.prototype.getWay=function(){s.instance.open(129,"stoneSkin")},v.prototype.oneKeyBtnHandler=function(){var t=this.getInlayIndex();-1===t?e.instance.addNotice("当前不可提升",!0):l.StoneCtrl.instance.oneKeyHandler([this._currEqiup,this._strIndex[t]-1])},v.prototype.itemClickHandler=function(t){this._currEqiup=t,l.StoneModel.instance.currEqiup=this._currEqiup,this.partName.text=p.getNameByPart(this._currEqiup);var e=this._partDic.get(this._currEqiup);e&&(e.addChildAt(this._currFrame,1),this.select())},v.prototype.effectInit=function(){this._scheEffect=p.creatEff(this.con,"wave",7),this._scheEffect.play(),this._scheEffect.pos(-10,100,!0),this._btnClip=p.creatEff(this.oneKeyBtn,"btn_light",15),this._btnClip.play(),this._btnClip.pos(-5,-10),this._btnClip.visible=!1,this._upGradeStone=new Array;for(var t=0;t<5;t++){var e=new u;this._upGradeStone[t]=e,this.addChild(e),e.skin="assets/effect/activate.atlas",e.frameUrls=["activate/0.png","activate/1.png","activate/2.png","activate/3.png"],e.durationFrame=5,e.loop=!1}for(t=0;t<5;t++)0==t?this._upGradeStone[0].pos(232,454):1==t?this._upGradeStone[1].pos(150,600):2==t?this._upGradeStone[2].pos(317,600):3==t?this._upGradeStone[3].pos(150,750):4==t&&this._upGradeStone[4].pos(317,750);for(this._upGradePart=[],t=0;t<10;t++)e=new u,this._upGradePart[t]=e,this.addChild(e),e.skin="assets/effect/activate.atlas",e.frameUrls=["activate/0.png","activate/1.png","activate/2.png","activate/3.png"],e.durationFrame=5,e.loop=!1,e.pos(this._equipPos[t][0]-80,this._equipPos[t][1]-80,!0)},v.prototype.openMaster=function(){s.instance.open(39,0)},v.prototype.openUpGradeView=function(){this._stoneDia||(this._stoneDia=new l.StoneDialog),this.addChild(this._stoneDia),this._stoneDia.setOpenParam(l.StoneModel.instance.currStonePic)},v.prototype.updataStonePit=function(){this.powerNum.value=l.StoneModel.instance.otherValue[2].toString(),this.master(),this.select()},v.prototype.select=function(){for(var t=1;t<=10;t++){for(var e=0,i=0;i<5;i++)null!=(s=l.StoneModel.instance.getValueByPart().get(10*t+i))&&(e+=c.instance.getCfgById(s)[5]);this._partDic.get(t)&&(0==e?this._recordLev[t]="":(this._partDic.get(t).setNum(e+"级","#ffffff"),this._recordLev[t]=e+"级"))}this._currEqiup&&0!=this._partDic.keys.length&&(this._cenItem.dataSource=this._partDic.get(this._currEqiup).itemData,this._cenItem.setNum(this._recordLev[this._currEqiup],"#ffffff")),t=0;for(var n=this._keysArr.length;t<n;t++)for(this._partDic.get(this._keysArr[t]).getChildByName("redImg").visible=!1,this._partDic.get(this._keysArr[t]).hintTxt.text="",i=this._strIndex[this._keysArr[t]]=0;i<5;i++){var s;if(null==(s=l.StoneModel.instance.getValueByPart().get(10*this._keysArr[t]+i))){if(0==i&&l.StoneModel.instance.vipIsOpen){if(0<d.instance.getItemsByBagId(2).length){this._partDic.get(this._keysArr[t]).getChildByName("redImg").visible=!0,this._strIndex[this._keysArr[t]]=1,this._partDic.get(this._keysArr[t]).hintTxt.text="可镶嵌";break}}else if(0<l.StoneModel.instance.getStonesByType(i).length){this._partDic.get(this._keysArr[t]).getChildByName("redImg").visible=!0,this._strIndex[this._keysArr[t]]=1,this._partDic.get(this._keysArr[t]).hintTxt.text="可镶嵌";break}}else{var o=null;o=(o=0==i&&l.StoneModel.instance.vipIsOpen?d.instance.getItemsByBagId(2).concat():l.StoneModel.instance.getStonesByType(c.instance.getCfgById(s)[3]).concat()).sort(l.StoneModel.instance.sortStones);for(var a=0;a<o.length;a++)if(c.instance.getCfgById(o[a][0])[5]>c.instance.getCfgById(s)[5]){this._partDic.get(this._keysArr[t]).getChildByName("redImg").visible=!0,this._strIndex[this._keysArr[t]]=2,this._partDic.get(this._keysArr[t]).hintTxt.text="可替换";break}l.StoneModel.instance.isNowParHasUp(s)&&(this._partDic.get(this._keysArr[t]).getChildByName("redImg").visible=!0,2==this._strIndex[this._keysArr[t]]||(this._strIndex[this._keysArr[t]]=3,this._partDic.get(this._keysArr[t]).hintTxt.text="可升级"))}}this._btnClip.visible=!0;var r=this.getInlayIndex();1===this._strIndex[r]?this.oneKeyBtn.label="一键提升":2===this._strIndex[r]?this.oneKeyBtn.label="一键提升":3===this._strIndex[r]?this.oneKeyBtn.label="一键提升":(this.oneKeyBtn.label="一键提升",this._btnClip.visible=!1),this.vipPitHandler()},v.prototype.searchOne=function(t){if(t&&this.palyPartEff(t),0!=this._keysArr.length){var e=this.getInlayIndex(),i=this._strIndex[e];if(-1==this._lastRpType||this._strIndex[this._currEqiup]){if(-1!=e){if(this._currEqiup=e,-1!=i&&-1!=this._lastRpType)return;return this._lastRpType=i,void this.itemClickHandler(this._currEqiup)}for(var n=0,s=this._keysArr.length;n<s;n++)if(this._partDic.get(this._keysArr[n]).getChildByName("redImg").visible)return void this.itemClickHandler(this._keysArr[n]);this._currEqiup=this._keysArr[0],this.itemClickHandler(this._currEqiup)}}},v.prototype.master=function(){if(this.levTxt.text="仙石大师"+l.StoneModel.instance.otherValue[0]+"阶",l.StoneModel.instance.otherValue[0]!=c.instance.maxLv){var t=c.instance.getUpStoneByLev(l.StoneModel.instance.otherValue[0])[1];if(l.StoneModel.instance.otherValue[1])this.redImg.visible=!0,this._scheEffect.y=-15;else{this.redImg.visible=!1;var e=l.StoneModel.instance.otherValue[3]/t;this._scheEffect.y=100*(1-e)}this.nowLevImg.text=l.StoneModel.instance.otherValue[3].toString(),this.nextLevImg.text="/"+t.toString()}else{this.nowLevImg.text=l.StoneModel.instance.otherValue[3].toString();var i=c.instance.getUpStoneByLev(c.instance.maxLv-1)[1];this.nextLevImg.text="/"+i.toString(),this.redImg.visible=!1,this._scheEffect.y=-15}},v.prototype.upMaster=function(){this.nowLevImg.pivot(this.nowLevImg.textField.width/2,this.nowLevImg.textField.height/2),this.nowLevImg.scaleX=this.nowLevImg.scaleY=1,this._tween.isPlaying||this._tween.to({scaleX:1.2,scaleY:1.2},200).start()},v.prototype.openAbout=function(){p.alertHelp(20006)},v.prototype.maskImgHandler=function(){var t=i.config.PrivilegeCfg.instance.getOpenFuncByType(9),e=Handler.create(this,p.gotoVIP);p.alert("温馨提示","专属仙石栏需要SVIP"+t+"开启,是否前往提升SVIP?",[e])},v.prototype.playUpEff=function(){var t=l.StoneModel.instance.currStonePic;this._upGradeStone[t].visible=!0,this._upGradeStone[t].play()},v.prototype.palyPartEff=function(t){if(t&&0!==t.length)for(var e=0;e<10;e++)-1<t.indexOf(e+1)&&(this._upGradePart[e].play(),this._upGradePart[e].visible=!0)},v.prototype.playOneKeyUpEff=function(){for(var t=0,e=l.StoneModel.instance.oneKeyPit.length;t<e;t++)this._upGradeStone[l.StoneModel.instance.oneKeyPit[t]].visible=!0,this._upGradeStone[l.StoneModel.instance.oneKeyPit[t]].play()},v.prototype.equipInitedHandler=function(){var t=a.instance.equipsDic;if(t&&0!=t.keys.length){for(var e=0,i=t.keys.length;e<i;e++)this.setEquip(t.keys[e],t.values[e]);GlobalData.dispatcher.event("GET_EQUIP"),this.updataStonePit()}},v.prototype.setEquip=function(t,e){this._currFrame||(this._currFrame=new y("common/dt_tongyong_29.png"),this._currFrame.pos(-4,-4));var i=this._partDic.get(t);if(e){if(!i){(i=new r).needTip=!1,i.valueDisplay=!1,this._partDic.set(t,i),this._keysArr.push(t),this._strIndex[t]=0,i.pos(this._equipPos[t-1][0],this._equipPos[t-1][1],!0),i.on(h.CLICK,this,this.itemClickHandler,[t]);var n=new y("common/image_common_xhd.png");n.visible=!1,n.name="redImg",n.pos(80,-8),i.addChildAt(n,6)}this.addChildAt(i,2),i.dataSource=e}else i&&(i.dataSource=null,i.removeSelf());this._keysArr=this._keysArr.sort(this.sortDic)},v.prototype.sortDic=function(t,e){return e<t?1:t<e?-1:0},v.prototype.closeEff=function(t){this._upGradeStone[t].visible=!1},v.prototype.closePartEff=function(t){this._upGradePart[t].visible=!1},v.prototype.showAddTipsBtn=function(){a.instance.level>=_.instance.getCfgById(53001)[1][0]?(this.addTipsBtn2.visible=!0,this.addTipsBtn3.visible=!0):(this.addTipsBtn2.visible=!1,this.addTipsBtn3.visible=!1)},v.prototype.setVisible=function(){PlatParams.isCloseRecharge&&(this.maskImg.visible=this.lockImg.visible=this.pit_0.visible=this.vipTxt.visible=!1)},m=v,l.StonePanel=m}(modules=modules||{}),function(I){var t,r,C,e,x,B,d,o,i;function S(){this._rflags=[],this._exp=0,this._slots={},this._commonPitTypeRecode={},this._specialPitTypeRecode={},this._currClickPit=-1,this._currPitType=0,this._pitchRune=-1,this.tips=e.instance.getCfgById(23001)[2],this._firstSelect=-1,this._isSearchFirst=!0,this._runeFight=0,this._canUpgrade=!1,this.curCount=0,this.maxCount=0,this.isSccess=!1}t=I.rune||(I.rune={}),r=I.bag.BagModel,C=I.redPoint.RedPointCtrl,e=I.config.BlendCfg,x=I.rune_copy.RuneCopyModel,B=I.config.RuneRefineCfg,d=I.config.ItemRuneCfg,o=utils.TableUtils,Object.defineProperty(S,"instance",{get:function(){return this._instance=this._instance||new S},enumerable:!0,configurable:!0}),S.prototype.saveData=function(t){this._commonPitTypeRecode={},this._specialPitTypeRecode={},o.clear(this._slots);for(var e=0,i=t.length;e<i;e++){var n=t[e][1];if(0!=n){var s=t[e][0];this._slots[s]=n,s<=8?this._commonPitTypeRecode[CommonUtil.getStoneTypeById(n)]=n:this._specialPitTypeRecode[CommonUtil.getStoneTypeById(n)]=n}}this.checkRP(),GlobalData.dispatcher.event("RUNE_UPDATE")},S.prototype.checkRP=function(){var t=[];for(var e in this.slots)t.push(parseInt(e));0==t.length?(this._firstSelect=-1,this._isSearchFirst=!1):(this._isSearchFirst=!0,this._firstSelect=t[0]);for(var i=1;i<=10;i++){var n=this.tips[i-1].split("#"),s=parseInt(n[n.length-1]),o=8<i?1:0,a=x.instance.finishLv;if(s<=a){var r=this.canInlayRunes(o);if(!r)return;var l=this._slots[i],h=CommonUtil.getStoneTypeById(l),c=0==o?this._commonPitTypeRecode:this._specialPitTypeRecode;if(l){var p=CommonUtil.getItemQualityById(l);for(g=0,f=r.length;g<f;g++)if(v=r[g][0],b=CommonUtil.getDimIdByItemId(v),_=I.config.ItemRuneCfg.instance.getCfgById(b),T=CommonUtil.getStoneTypeById(v),!this.getIsHaveSameType(v,i,o)||T==h){m=_[5];var u=CommonUtil.getItemQualityById(v);if(!(a<m||u<p)&&T==h&&(u==p&&l%1e4<v%1e4||p<u))return void this.setRPIndex(i)}var d=B.instance.getCfgById(l);if(!d)throw new Error("符文id为"+l+",配置表不存在");if(B.instance.getCfgById(l+1)){var y=S.instance.exp;if(d[1][1]<=y)return void this.setRPIndex(i)}}else for(var g=0,f=r.length;g<f;g++){var _,m,v=r[g][0],b=CommonUtil.getDimIdByItemId(v);if(!(a<(m=(_=I.config.ItemRuneCfg.instance.getCfgById(b))[5]))){var T=CommonUtil.getStoneTypeById(v);if(!S.instance.getIsHaveSameType(v,i,o)&&!c[T])return void this.setRPIndex(i)}}}}C.instance.setRPProperty("runeRP",!1)},S.prototype.checkRuneResolveRP=function(){var t=r.instance.getItemsByBagId(5),e=S.instance.rflags,i=!1;if(t&&0<t.length)for(var n=0;n<t.length;n++){var s=t[n][0],o=CommonUtil.getItemQualityById(s);if(CommonUtil.getStoneTypeById(s)===I.config.ItemRuneCfg.instance.resolveRuneSubTypeId){i=!0;break}if(e&&0<e.length)for(var a=0;a<e.length;a++)if(e[a]==o-1){i=!0;break}}C.instance.setRPProperty("runeResolvRP",i)},S.prototype.setRPIndex=function(t){C.instance.setRPProperty("runeRP",!0),this._slots[t]&&(this._firstSelect=t)},Object.defineProperty(S.prototype,"rflags",{get:function(){return this._rflags},set:function(t){this._rflags=t,this.checkRuneResolveRP()},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp=t},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"slots",{get:function(){return this._slots},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"commonPitTypeRecode",{get:function(){return this._commonPitTypeRecode},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"specialPitTypeRecode",{get:function(){return this._specialPitTypeRecode},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"currClickPit",{get:function(){return this._currClickPit},set:function(t){this._currClickPit=t},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"currPitType",{get:function(){return this._currPitType<=8?0:1},set:function(t){this._currPitType=t},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"pitchRune",{get:function(){return this._pitchRune},set:function(t){this._pitchRune=t},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"firstSelect",{get:function(){return this._firstSelect},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"isSearchFirst",{get:function(){return this._isSearchFirst},enumerable:!0,configurable:!0}),S.prototype.canInlayRunes=function(t){var e=[],i=r.instance.getItemsByBagId(5);if(i){for(var n=0,s=i.length;n<s;n++){var o=i[n][0];CommonUtil.getStoneTypeById(o)!==I.config.ItemRuneCfg.instance.resolveRuneSubTypeId&&(0==t&&CommonUtil.getStoneTypeById(o)<90?e.push(i[n]):1==t&&90<=CommonUtil.getStoneTypeById(o)&&e.push(i[n]))}return e}},Object.defineProperty(S.prototype,"getOtherSpecial",{get:function(){var t=CommonUtil.getStoneTypeById(B.instance.yang),e=this._specialPitTypeRecode[t],i=CommonUtil.getStoneTypeById(B.instance.yin),n=this._specialPitTypeRecode[i];return e||n?e?B.instance.yin:B.instance.yang:null},enumerable:!0,configurable:!0}),S.prototype.getIsHaveSameType=function(t,e,i){void 0===e&&(e=this._currClickPit),void 0===i&&(i=this.currPitType);var n=S.instance.slots[e],s=CommonUtil.getStoneTypeById(t),o=1e4*(1e-4*t>>0),a=d.instance.getCfgById(o)[11].concat(),r=0==i?S.instance.commonPitTypeRecode:S.instance.specialPitTypeRecode,l=!1,h=CommonUtil.getStoneTypeById(n);a.push(s);for(var c=0,p=a;c<p.length;c++){var u=p[c];if(r[u]&&u!==h){l=!0;break}}return l},S.prototype.isDoubleComparisonSingle=function(t,e){var i=CommonUtil.getDimIdByItemId(e),n=d.instance.getCfgById(i)[11];if(2===n.length)return!1;var s=CommonUtil.getDimIdByItemId(t);if(1===d.instance.getCfgById(s)[11].length)return!1;var o=CommonUtil.getStoneTypeById(t);if(-1===n.indexOf(o))return!1;var a=CommonUtil.getItemQualityById(e);return!(CommonUtil.getItemQualityById(t)<a)},S.prototype.getRuneDictionaryInfoReply=function(t){if(t){this.info=t;for(var e=this._runeFight=0,i=t[0].length;e<i;e++)this._runeFight+=I.config.RuneDictionaryCfg.instance.getRuneFight(t[0][e]);var n=I.config.RuneRiseCfg.instance.getInfoByGrade(t[1]),s=I.config.RuneRiseCfg.instance.getInfoByGrade(t[1]+1);if(s||(n=I.config.RuneRiseCfg.instance.getInfoByGrade(t[1]-1)),this.maxCount=n[1],n){var o=0;for(i=t[0].length,e=0;e<i;e++)t[0][e][1]>=n[2]&&(o+=1);this.curCount=o,n[1]>i?this._canUpgrade=!1:n[1]<=o&&s?this._canUpgrade=!0:this._canUpgrade=!1}else this._canUpgrade=!1;this.setPR(),GlobalData.dispatcher.on("BAG_UPDATE",this,this.setPR),GlobalData.dispatcher.event("RUNE_INFO_UPDATE")}},Object.defineProperty(S.prototype,"runeFight",{get:function(){return this._runeFight},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"canUpgrade",{get:function(){return this._canUpgrade},enumerable:!0,configurable:!0}),S.prototype.setPR=function(){if(this.canUpgrade)C.instance.setRPProperty("runeBookRP",!0);else{for(var t=this.canUpgrade,e=this.processData(),i=0,n=e.length;i<n;i++){for(var s=!1,o=!1,a=0,r=I.config.RuneDictionaryCfg.instance.getInfo(e[i])[3],l=I.bag.BagModel.instance.getRunesByDimId(e[i][0]),h=0,c=l.length;h<c;h++)a+=l[h][1];h=0;for(var p=this.info[0].length;h<p;h++)if(e[i][0]===this.info[0][h][0]){o=!0,s=I.config.RuneDictionaryCfg.instance.isMaxLevel(this.info[0][h]);break}var u=x.instance.finishLv,d=I.config.ItemRuneCfg.instance.getCfgById(e[i][0])[5];if(o){if(!s&&r<=a&&d<=u){t=!0;break}}else if(r<=a&&d<=u){t=!0;break}}C.instance.setRPProperty("runeBookRP",t)}},S.prototype.processData=function(){for(var t=this.info[0],e=I.config.RuneDictionaryCfg.instance.getAllBaseInfo(),i=0,n=t.length;i<n;i++)for(var s=0,o=e.length;s<o;s++)if(t[i][0]===e[s][0]){e[s]=t[i];break}return e},i=S,t.RuneModel=i}(modules=modules||{}),function(m){var v,e,t,b,T,I,C,x,i,p,u,B,n,S,M,w,s,P,o,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}v=m.stone||(m.stone={}),t=ui.StoneMasterUI,b=m.config.StoneCfg,T=m.common.CustomClip,I=m.intensive.IntensiveModel,C=m.config.IntensiveCfg,x=m.config.XiLianRiseCfg,i=m.xiLian.XiLianCtrl,p=m.common.AttrUtil,u=m.config.AttrItemCfg,B=m.rune.RuneModel,n=m.marry.MarryCtrl,S=m.marry.MarryModel,M=m.config.RingResonanceCfg,w=m.config.HeartContactCfg,s=m.yuanShen.YuanShenCtrl,P=m.config.DivinatoryCardMysteryCfg,o=m.divinatory_card.DivinatoryCardCtrl,a=m.rune.RuneCtrl,e=t,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnClip=CommonUtil.creatEff(this.upGradeBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._initPosYArr=[this.lastOnceTxt.y,this.attrTxt_3.y,this.attrTxt_4.y]},l.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),0===this._type?this.onAutoGlobalEvt("STONE_UPDATA",this,this.showView):1===this._type||2===this._type?this.onAutoGlobalEvt("INTENSIVE_UPDATE",this,this.showView):3===this._type?this.onAutoGlobalEvt("XI_LIAN_INFO_UPDATE",this,this.showView):4===this._type?this.onAutoGlobalEvt("RUNE_INFO_UPDATE",this,this.showView):5===this._type?this.onAutoGlobalEvt("MARRY_RING_UPDATE",this,this.showView):6===this._type?this.onAutoGlobalEvt("MARRY_TOKEN_UPDATE",this,this.showView):7===this._type?this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.showView):8===this._type?this.onAutoGlobalEvt("DIVINATORY_GRADE",this,this.showView):9!==this._type&&10!==this._type||this.onAutoGlobalEvt("UPDATE_FANTIAN_RISE",this,this.showView),this.onAutoClick(this.upGradeBtn,this,this.upGrade)},l.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),"number"==typeof t?this._type=t:(this._type=t[0],this._param=t[1]),this.showView()},l.prototype.setAttr=function(t,e,i){var n;this.attrTxt_1.visible=this.attrTxt_2.visible=this.attrTxt_3.visible=this.attrTxt_4.visible=!1,this.onceTxt.visible=this.lastOnceTxt.visible=!1,this.if0_act.visible=this.hintTxt.visible=!1,0==t?(this.onceTxt.visible=!0,this.introTxt_1.text="当前阶段  "):i||(this.lastOnceTxt.visible=!0,this.introTxt_2.text="下一阶段  "),0===this._type?(n=[45,46,47,48,49,50,51,52],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[3],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[3],n)):1===this._type||2===this._type?(n=[37,38,39,40,41,42,43,44],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[4],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[4],n)):3===this._type?(n=[143,144,145,146,147,148,149,150,151],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[4],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[4],n)):4===this._type?(0!==t&&(this.attrTxt_1.visible=!0,this.attrTxt_1.text="宝典符文属性 +"+p.formatFloatNum(e[3])+"%"),i&&(this.attrTxt_3.visible=!0,this.attrTxt_3.text="宝典符文属性 +"+p.formatFloatNum(i[3])+"%")):5===this._type?(n=[184],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[2],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[2],n)):6===this._type?(n=[201],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[3],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[3],n)):7===this._type?(n=[230],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[2],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[2],n)):8===this._type?(n=[37,38],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[3],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[3],n)):9===this._type?(n=[304,305,306,307],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[5],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[5],n)):10===this._type&&(n=[304,305,306,307],e&&this.setPerAttr(this.attrTxt_1,this.attrTxt_2,e[5],n),i&&this.setPerAttr(this.attrTxt_3,this.attrTxt_4,i[5],n)),this.if0_act.x=this.introTxt_1.x+this.introTxt_1.width+5,this.ratioTxt.x=this.introTxt_2.x+this.introTxt_2.width+5,1!=this.lastOnceTxt.visible?(this.attrTxt_3.y=this._initPosYArr[0],this.attrTxt_4.y=this._initPosYArr[1]):(this.attrTxt_3.y=this._initPosYArr[1],this.attrTxt_4.y=this._initPosYArr[2])},l.prototype.setPerAttr=function(t,e,i,n){if(i)for(var s=0,o=0,a=n.length;o<a;o++){var r=p.getAttrIndexByType(n[o],i),l=u.instance.getCfgById(n[o]);if(0<=r){var h=1==++s?t:2===s?e:null;if(h){var c=i[2*r+1];h.text=""+this.nameStr+l[1]+" +"+(l[2]?p.formatFloatNum(c)+"%":Math.round(c)),h.visible=!0}if(2===s)break}}},Object.defineProperty(l.prototype,"nameStr",{get:function(){return 6===this._type?CommonUtil.getNameByItemId(this._param):7===this._type?m.yuanShen.YuanShenUtil.typeStrs(this._param):""},enumerable:!0,configurable:!0}),l.prototype.showView=function(){var t,e,i,n,s,o,a;if(0===this._type)t=v.StoneModel.instance.otherValue[1],e=v.StoneModel.instance.otherValue[0],i=b.instance.getUpStoneByLev(e-1),n=b.instance.getUpStoneByLev(e),s=b.instance.getUpStoneByLev(e+1),i&&(this.introTxt_1.text="当前阶段  仙石总等级达到"+i[1]+"级"),n&&(this.introTxt_2.text="下一阶段  仙石总等级达到"+n[1]+"级"),o=v.StoneModel.instance.otherValue[3],a=n[1],this.titleTxt.text="仙石大师·"+e+"阶",this.attValueTxt.value=Math.round(n[2]).toString();else if(1===this._type)t=(_=I.instance.info)[2],e=_[1],i=C.instance.getCfgBy_DASHI_Lev(e-1),n=C.instance.getCfgBy_DASHI_Lev(e),s=C.instance.getCfgBy_DASHI_Lev(e+1),i&&(this.introTxt_1.text="当前阶段  8件装备强化+"+i[2]),n&&(this.introTxt_2.text="下一阶段  8件装备强化+"+n[2]),o=I.instance.getComProCount(n[2]),a=8,this.titleTxt.text="强化大师·"+e+"阶",this.attValueTxt.value=Math.round(n[3]).toString();else if(2===this._type)t=(_=I.instance.info)[4],e=_[3],i=C.instance.getCfgBy_SHENJIANG_Lev(e-1),n=C.instance.getCfgBy_SHENJIANG_Lev(e),s=C.instance.getCfgBy_SHENJIANG_Lev(e+1),i&&(this.introTxt_1.text="当前阶段  10件装备强化+"+i[2]),n&&(this.introTxt_2.text="下一阶段  10件装备强化+"+n[2]),o=I.instance.getComProCount(n[2]),a=10,this.titleTxt.text="强化神匠·"+e+"阶",this.attValueTxt.value=Math.round(n[3]).toString();else if(3===this._type){if(!(_=m.xiLian.XiLianModel.instance.xiLianInfo))return;t=_[3],e=_[2],i=x.instance.getCfgByLv(e-1),n=x.instance.getCfgByLv(e),s=x.instance.getCfgByLv(e+1);var r=["白","绿","蓝","紫","橙","红"];i&&(this.introTxt_1.text="当前阶段  拥有"+i[2]+"条"+r[i[1]-1]+"品洗炼属性"),n&&(this.introTxt_2.text="下一阶段  拥有"+n[2]+"条"+r[n[1]-1]+"品洗炼属性"),o=m.xiLian.XiLianModel.instance.getAttrCountByQuality(n[1]),a=n[2],this.titleTxt.text="洗炼大师·"+e+"阶",this.attValueTxt.value=Math.round(n[3]).toString()}else if(4===this._type){var l=m.config.RuneRiseCfg;t=B.instance.canUpgrade,e=B.instance.info[1],i=l.instance.getInfoByGrade(e-1),n=l.instance.getInfoByGrade(e),s=l.instance.getInfoByGrade(e+1),i&&(this.introTxt_1.text="当前阶段  "+i[1]+"个符文阶数达到"+i[2]+"阶"),n&&(this.introTxt_2.text="下一阶段  "+n[1]+"个符文阶数达到"+n[2]+"阶"),o=B.instance.curCount,a=B.instance.maxCount,this.titleTxt.text="宝典大师·"+e+"阶",this.attValueTxt.value=Math.round(l.instance.getInfoByGrade(B.instance.info[1])[4]).toString()}else if(5===this._type)t=S.instance.resonanceIsCanUp,e=S.instance.resonanceLevel,n=M.instance.getCfgByLv(e),s=M.instance.getCfgByLv(e+1),this.introTxt_1.text="当前阶段  双方义戒等级达到"+n[1]+"级",s&&(this.introTxt_2.text="下一阶段  双方义戒等级达到"+s[1]+"级"),o=S.instance.resonanceFinishCount,a=2,this.titleTxt.text="义戒共鸣·"+e+"阶",this.attValueTxt.value=Math.round(n[3]).toString();else if(6===this._type){t=S.instance.isMarried&&2<=S.instance.getHeartFinishCount(this._param),e=S.instance.getTokenInofById(this._param)[5],n=w.instance.getCfgByIdLv(this._param,e),s=w.instance.getCfgByIdLv(this._param,e+1),i=w.instance.getCfgByIdLv(this._param,e-1);var h=CommonUtil.getNameByItemId(this._param);this.introTxt_1.text="当前阶段  双方【"+h+"】都达到"+(i?i[2]:0)+"阶",s&&(this.introTxt_2.text="下一阶段  双方【"+h+"】都达到"+n[2]+"阶"),o=S.instance.getHeartFinishCount(this._param),a=2,this.titleTxt.text="心有灵犀·"+e+"阶",this.attValueTxt.value=Math.round(n[4]).toString()}else if(7===this._type){e=(_=m.yuanShen.YuanShenModel.instance.infos[this._param])[6];var c=1e4*(this._param+1)+e;n=m.config.YuanShenImmortalCfg.instance.getCfgId(c),s=m.config.YuanShenImmortalCfg.instance.getCfgId(c+1),(i=m.config.YuanShenImmortalCfg.instance.getCfgId(c-1))&&(this.introTxt_1.text="当前阶段  "+m.yuanShen.YuanShenUtil.typeStrs(this._param)+"达到"+(i[1]/1e3>>0)+"阶"+i[1]%100+"重"),s&&(this.introTxt_2.text="下一阶段  "+m.yuanShen.YuanShenUtil.typeStrs(this._param)+"达到"+(n[1]/1e3>>0)+"阶"+n[1]%100+"重"),o=1e3*_[1]+_[2]>=n[1]?1:0,a=1,t=s&&a<=o,this.titleTxt.text="不灭元神·"+e+"重",this.attValueTxt.value=Math.round(n[3]).toString()}else if(8==this._type){this.titleTxt.text="八卦玄机",e=(_=this._param)[1],n=P.instance.getCfgByType(_[0],e),s=P.instance.getCfgByType(_[0],e+1);var p=_[3],u=n[2],d=1e9;o=0,a=8;for(var y=p.length-1;-1<y;y--){var g=p[y][1];u<=g&&o++,g<d&&(d=g)}this.introTxt_1.text="当前阶段  8件卦牌强化+"+d,s&&(this.introTxt_2.text="下一阶段  8件卦牌强化+"+u),t=s&&a<=o,this.attValueTxt.value=""+_[6]}else if(9===this._type||10===this._type){var f=9===this._type?1:2,_=m.brahma_equip.BrahmaEquipModel.instance.fantianEquipRise;if(e=1==f?_[0]:_[1],n=m.config.FantianStrongRiseCfg.instance.getCfgByTypeAndLevel(f,e),s=m.config.FantianStrongRiseCfg.instance.getCfgByTypeAndLevel(f,e+1),o=0,n?(this.attValueTxt.value=Math.round(n[4]).toString(),this.introTxt_1.text="当前阶段"+n[1]+"件装备强化+"+n[3]):this.attValueTxt.value=Math.round(0).toString(),s&&(a=s[1],this.introTxt_2.text="下一阶段"+s[1]+"件装备强化+"+s[3]),s){for(y=1;y<=12;y++)m.brahma_equip.BrahmaEquipModel.instance.getPartByStrongLv(y)>=s[3]&&o++;t=s&&a<=o}this.titleTxt.text=1==f?"梵天大师"+e+"阶":"梵天神匠"+e+"阶"}this.blankImg.y=this.backImg.height=this.height=562,this.maskImg.height=274,this.upGradeBtn.visible=!0,t?(5!==this._type||S.instance.isMarried?(this.upGradeBtn.gray=!1,T.thisPlay(this._btnClip)):(this.upGradeBtn.gray=!0,T.thisStop(this._btnClip)),this.ratioTxt.color="#00ad35",this.ratioTxt.text="("+o+"/"+a+")"):(this.upGradeBtn.gray=!0,T.thisStop(this._btnClip),this.ratioTxt.color="#ff0000",s?this.ratioTxt.text="("+o+"/"+a+")":(this.upGradeBtn.visible=!1,4!==this._type&&(this.blankImg.y=this.backImg.height=this.height=450,this.maskImg.height=230),this.ratioTxt.text="")),this.setAttr(e,n,s)},l.prototype.upGrade=function(){this.upGradeBtn.gray||(0===this._type?Channel.instance.publish(2097755,null):1===this._type||2===this._type?Channel.instance.publish(2098355,[this._type-1]):3===this._type?i.instance.xilianRiseAddLevel():4===this._type?a.instance.runeDictionaryRiseAddGrade():5===this._type?n.instance.growResonance():6===this._type?n.instance.growMarryHeartContact(this._param):7===this._type?s.instance.immortalYuanShenStage(this._param+1):8===this._type?o.instance.divinatoryMystery(this._param[0]):9===this._type?m.brahma_equip.BrahmaEquipCtrl.instance.fantianEquipStrongRise(1):10===this._type&&m.brahma_equip.BrahmaEquipCtrl.instance.fantianEquipStrongRise(2))},r=l,v.StoneMaster=r}(modules=modules||{}),function(y){var t,e,g,h,c,f,_,i,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=y.stone||(y.stone={}),g=y.common.CustomClip,h=y.common.AttrUtil,c=y.config.AttrItemCfg,f=y.marry.MarryModel,_=y.config.DivinatoryCardMysteryCfg,i=y.divinatory_card.DivinatoryCardCtrl,e=ui.StoneMaster2ViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnClip=CommonUtil.creatEff(this.upGradeBtn,"btn_light",15),this._btnClip.pos(-5,-10)},s.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),8===this._type&&this.onAutoGlobalEvt("DIVINATORY_GRADE",this,this.showView),this.onAutoClick(this.upGradeBtn,this,this.upGrade)},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),"number"==typeof t?this._type=t:(this._type=t[0],this._param=t[1]),this.showView()},s.prototype.setAttr=function(t,e,i){this.attrTxt_1.visible=this.attrTxt_2.visible=!1,this.onceTxt.visible=this.lastOnceTxt.visible=!1,this.if0_act.visible=!1,0==t?(this.onceTxt.visible=!0,this.introTxt_1.text="当前阶段  "):i||(this.lastOnceTxt.visible=!0,this.introTxt_2.text="下一阶段  "),8===this._type&&(e&&this.setPerAttr(this.attrTxt_1,e[3]),i&&this.setPerAttr(this.attrTxt_2,i[3])),this.if0_act.x=this.introTxt_1.x+this.introTxt_1.width+5,this.ratioTxt.x=this.introTxt_2.x+this.introTxt_2.width+5},s.prototype.setPerAttr=function(t,e){if(e){for(var i="",n=0,s=e.length/2>>0;n<s;n++){var o=e[2*n],a=h.getAttrIndexByType(o,e),r=c.instance.getCfgById(o);if(0<=a){var l=e[2*a+1];i+=""+this.nameStr+r[1]+" +"+(r[2]?h.formatFloatNum(l)+"%":Math.round(l)),i+="\n"}}t.text=i,t.visible=!0}},Object.defineProperty(s.prototype,"nameStr",{get:function(){return 6===this._type?CommonUtil.getNameByItemId(this._param):7===this._type?y.yuanShen.YuanShenUtil.typeStrs(this._param):""},enumerable:!0,configurable:!0}),s.prototype.showView=function(){var t,e,i,n,s,o;if(8==this._type){var a=this._param;e=a[1];var r=a[0],l=y.config.DivinatoryCardActionCfg.instance.getCfg(r)[4];i=_.instance.getCfgByType(r,e),n=_.instance.getCfgByType(r,e+1);var h=i[2],c=a[3];s=0,o=8;for(var p=c.length-1;-1<p;p--)h<=c[p][1]&&s++;this.titleTxt.text=l+"玄机·"+i[0]+"阶";var u=_.instance.getCfgByType(a[0],e-1),d=0;u&&(d=u[2]),this.introTxt_1.text="当前阶段  8件"+l+"卦牌强化+"+d,n&&(this.introTxt_2.text="下一阶段  8件"+l+"卦牌强化+"+h),t=n&&o<=s,this.attValueTxt.value=""+a[6]}this.blankImg.y=this.backImg.height=this.height=670,this.maskImg.height=340,this.upGradeBtn.visible=!0,t?(5!==this._type||f.instance.isMarried?(this.upGradeBtn.gray=!1,g.thisPlay(this._btnClip)):(this.upGradeBtn.gray=!0,g.thisStop(this._btnClip)),this.ratioTxt.color="#00ad35",this.ratioTxt.text="("+s+"/"+o+")"):(this.upGradeBtn.gray=!0,g.thisStop(this._btnClip),this.ratioTxt.color="#ff0000",n?this.ratioTxt.text="("+s+"/"+o+")":(this.upGradeBtn.visible=!1,4!==this._type&&(this.blankImg.y=this.backImg.height=this.height=450,this.maskImg.height=239),this.ratioTxt.text="")),this.setAttr(e,i,n)},s.prototype.upGrade=function(){this.upGradeBtn.gray||8===this._type&&i.instance.divinatoryMystery(this._param[0])},n=s,t.StoneMaster2=n}(modules=modules||{}),function(h){var t,e,r,l,i;function n(){return null!==e&&e.apply(this,arguments)||this}t=h.stone||(h.stone={}),r=h.common.AttrUtil,l=h.config.AttrItemCfg,e=ui.StoneMasterExUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._btnClip=CommonUtil.creatEff(this.upGradeBtn,"btn_light",15),this._btnClip.pos(-5,-10),this._initPosYArr=[this.lastOnceTxt.y,this.attrTxt_3.y,this.attrTxt_4.y,this.attrTxt_7.y,this.attrTxt_8.y]},n.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),9!==this._type&&10!==this._type||this.onAutoGlobalEvt("UPDATE_FANTIAN_RISE",this,this.showView),this.onAutoClick(this.upGradeBtn,this,this.upGrade)},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),"number"==typeof t?this._type=t:(this._type=t[0],this._param=t[1]),this.showView()},n.prototype.setAttr=function(t,e,i){this.attrTxt_1.visible=this.attrTxt_2.visible=this.attrTxt_3.visible=this.attrTxt_4.visible=!1,this.attrTxt_5.visible=this.attrTxt_6.visible=this.attrTxt_7.visible=this.attrTxt_8.visible=!1,this.onceTxt.visible=this.lastOnceTxt.visible=!1,this.if0_act.visible=this.hintTxt.visible=!1,0==t?(this.onceTxt.visible=!0,this.introTxt_1.text="当前阶段  "):i||(this.lastOnceTxt.visible=!0,this.introTxt_2.text="下一阶段  "),9===this._type?(e&&this.setPerAttr([this.attrTxt_1,this.attrTxt_2,this.attrTxt_5,this.attrTxt_6],e[5]),i&&this.setPerAttr([this.attrTxt_3,this.attrTxt_4,this.attrTxt_7,this.attrTxt_8],i[5])):10===this._type&&(e&&this.setPerAttr([this.attrTxt_1,this.attrTxt_2,this.attrTxt_5,this.attrTxt_6],e[5]),i&&this.setPerAttr([this.attrTxt_3,this.attrTxt_4,this.attrTxt_7,this.attrTxt_8],i[5])),this.if0_act.x=this.introTxt_1.x+this.introTxt_1.width+5,this.ratioTxt.x=this.introTxt_2.x+this.introTxt_2.width+5,1!=this.lastOnceTxt.visible?(this.attrTxt_3.y=this._initPosYArr[0],this.attrTxt_4.y=this._initPosYArr[1],this.attrTxt_7.y=this._initPosYArr[2],this.attrTxt_8.y=this._initPosYArr[3]):(this.attrTxt_3.y=this._initPosYArr[1],this.attrTxt_4.y=this._initPosYArr[2],this.attrTxt_7.y=this._initPosYArr[3],this.attrTxt_8.y=this._initPosYArr[4])},n.prototype.setPerAttr=function(t,e){for(var i=0,n=e.length;i<n;i+=2){var s=l.instance.getCfgById(e[i]),o=t[i/2>>0];if(o){var a=e[i+1];o.text=s[1]+" +"+(s[2]?r.formatFloatNum(a)+"%":Math.round(a)),o.visible=!0}}},n.prototype.showView=function(){var t,e,i,n,s,o;if(9===this._type||10===this._type){var a=9===this._type?1:2,r=h.brahma_equip.BrahmaEquipModel.instance.fantianEquipRise;if(e=1==a?r[0]:r[1],i=h.config.FantianStrongRiseCfg.instance.getCfgByTypeAndLevel(a,e),n=h.config.FantianStrongRiseCfg.instance.getCfgByTypeAndLevel(a,e+1),s=0,i?(this.attValueTxt.value=Math.round(i[4]).toString(),this.introTxt_1.text="当前阶段"+i[1]+"件装备强化+"+i[3]):this.attValueTxt.value=Math.round(0).toString(),n&&(o=n[1],this.introTxt_2.text="下一阶段"+n[1]+"件装备强化+"+n[3]),n){for(var l=1;l<=12;l++)h.brahma_equip.BrahmaEquipModel.instance.getPartByStrongLv(l)>=n[3]&&s++;t=n&&o<=s}this.titleTxt.text=1==a?"梵天大师"+e+"阶":"梵天神匠"+e+"阶"}this.upGradeBtn.visible=!0,t?(this.upGradeBtn.gray=!1,this._btnClip.visible=!0,this._btnClip.play(),this.ratioTxt.color="#00ad35",this.ratioTxt.text="("+s+"/"+o+")"):(this.upGradeBtn.gray=!0,this._btnClip.visible=!1,this._btnClip.stop(),this.ratioTxt.color="#ff0000",n?this.ratioTxt.text="("+s+"/"+o+")":(this.upGradeBtn.visible=!1,this._type,this.ratioTxt.text="")),this.setAttr(e,i,n)},n.prototype.upGrade=function(){this.upGradeBtn.gray||(9===this._type?h.brahma_equip.BrahmaEquipCtrl.instance.fantianEquipStrongRise(1):10===this._type&&h.brahma_equip.BrahmaEquipCtrl.instance.fantianEquipStrongRise(2))},i=n,t.StoneMasterEx=i}(modules=modules||{}),function(A){var R,s,t,k,o,a,e,E,r,D,l,L,i;function n(){return null!==s&&s.apply(this,arguments)||this}R=A.rune||(A.rune={}),t=ui.RuneInlayViewUI,k=A.rune_copy.RuneCopyModel,o=A.common.BtnGroup,a=Laya.Handler,e=Laya.Event,E=A.config.RuneRefineCfg,r=A.common.CustomClip,D=A.common.CommonUtil,l=A.config.ItemMaterialCfg,L=A.config.ItemRuneCfg,s=t,__extends(n,s),n.prototype.initialize=function(){s.prototype.initialize.call(this),this.centerX=this.centerY=0,this.conIconImg.skin=D.getIconById(l.instance.runeEssenceId,!0),this.runeCopyTxt.underline=this.allTxt.underline=this.resolveTxt.underline=this.exchangeTxt.underline=!0;var t=R.RuneModel.instance.tips;this._unlockPitByLayer={};for(var e=0,i=t.length;e<i;e++){var n=t[e].split("#");this._unlockPitByLayer[parseInt(n[0].substr(1))]=parseInt(n[1].substr(0,n[1].length-1))}for(this._runePitArr=new Array,this._runePitArr=[this.runeItem_1,this.runeItem_2,this.runeItem_3,this.runeItem_4,this.runeItem_5,this.runeItem_6,this.runeItem_7,this.runeItem_8,this.runeItem_9,this.runeItem_10],e=0,i=this._runePitArr.length;e<i;e++)this._runePitArr[e].type=e+1;this._pitGroup=new o,this._pitGroup.canSelectHandler=a.create(this,this.canSelectHandler,null,!1),this._pitGroup.setBtns(this.runeItem_1,this.runeItem_2,this.runeItem_3,this.runeItem_4,this.runeItem_5,this.runeItem_6,this.runeItem_7,this.runeItem_8,this.runeItem_9,this.runeItem_10),this._attNameTxts=[this.attNameTxt_0,this.attNameTxt_1,this.attNameTxt_2],this._attTxtArr=[this.attValueTxt_0,this.attValueTxt_1,this.attValueTxt_2],this._attUpTxtArr=[this.proUpTxt_0,this.proUpTxt_1,this.proUpTxt_2],this._attUpImgArr=[this.proUpImg_0,this.proUpImg_1,this.proUpImg_2],this._runeClip=new r,this.addChildAt(this._runeClip,4),this._runeClip.skin="assets/effect/YinYangYu.atlas",this._runeClip.frameUrls=["YinYangYu/0.png","YinYangYu/1.png","YinYangYu/2.png","YinYangYu/3.png","YinYangYu/4.png","YinYangYu/5.png","YinYangYu/6.png","YinYangYu/7.png"],this._runeClip.durationFrame=5,this._runeClip.loop=!0,this._runeClip.scale(1.33,1.33),this._runeClip.pos(185,300),this._upBtnClip=this.creatBtnEff(this.upGradeBtn),this._replaceBtnClip=this.creatBtnEff(this.replaceBtn)},n.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoEvt(this._pitGroup,e.CHANGE,this,this.selectPitchPit),this.onAutoClick(this.allTxt,this,this.runeAllViewBtnHandler),this.onAutoClick(this.resolveTxt,this,this.resolveTxtHandler),this.onAutoClick(this.replaceBtn,this,this.replaceBtnHandler),this.onAutoClick(this.upGradeBtn,this,this.upGradeBtnHandler),this.onAutoClick(this.runeCopyBtn,this,this.runeCopyBtnHandler),this.onAutoClick(this.runeCopyTxt,this,this.runeCopyBtnHandler),this.onAutoClick(this.runeTreasureBtn,this,this.runeTreasureBtnHandler),this.onAutoClick(this.exchangeTxt,this,this.exchangeTxtHandler),this.onAutoGlobalEvt("RUNE_UPDATE",this,this.updataView),this.onAutoGlobalEvt("RUNE_INALY_SUCCEED",this,this.selectPit),this.regAutoRP(this.resolveRp,["runeResolvRP"])},n.prototype.onOpened=function(){s.prototype.onOpened.call(this),this._upBtnClip.play(),this._replaceBtnClip.play(),this._runeClip.play(),this.searchFrist()},n.prototype.updataView=function(){var t=k.instance.finishLv,e=!1;for(var i in this._unlockPitByLayer){var n=this._unlockPitByLayer[i];if(t<n){e=!0,this.conTxt.text="通关远古符阵"+n+"层开启下个镶嵌槽";break}}if(!e)for(var s=0,o=L.instance.unlockLayerArr;s<o.length;s++){var a=o[s];if(t<a){var r=L.instance.getCfgByUnlock(a)[0][1];e=!0,this.conTxt.text="通关远古符阵"+a+"层解锁新符文—"+r;break}}this.conBox.visible=e;var l=0;for(var i in R.RuneModel.instance.slots){var h=R.RuneModel.instance.slots[i];l+=(y=E.instance.getCfgById(h))[3]}this.fightMsz.value=l.toString(),this.noRuneBox.visible=-1==this._pitGroup.selectedIndex,this.haveRuneBox.visible=!this.noRuneBox.visible;var c=this._pitGroup.selectedIndex;if(-1!=c){this.bgImg.height=846;var p=R.RuneModel.instance.slots[c+1];if(!p)return void this.searchFrist();var u=1e4*(1e-4*p>>0),d=A.config.ItemRuneCfg.instance.getCfgById(u),y=E.instance.getCfgById(p),g=E.instance.getCfgById(p+1),f=p%1e4,_=D.getItemQualityById(p);this.currNameTxt.text=""+d[1],this.currLvTxt.text="Lv."+f,this.curRuneIcon.skin=D.getIconById(u),this.currLvTxt.color=this.currNameTxt.color=D.getColorById(p);var m=0;7<c&&(m=1);var v=R.RuneModel.instance.canInlayRunes(m),b=D.getStoneTypeById(p);this._replaceBtnClip.visible=!1;for(var T=0,I=v.length;T<I;T++){var C=v[T][0],x=D.getStoneTypeById(C);if(!R.RuneModel.instance.getIsHaveSameType(C,R.RuneModel.instance.currClickPit,m)||x==b){u=D.getDimIdByItemId(C);var B=(d=A.config.ItemRuneCfg.instance.getCfgById(u))[5],S=D.getItemQualityById(C);if(!(t<B||S<_)&&x==b&&(S==_&&p%1e4<C%1e4||_<S)){this._replaceBtnClip.visible=!0;break}}}if(A.common.AttrUtil.setAttrTxts(y,g,this._attNameTxts,this._attTxtArr,this._attUpImgArr,this._attUpTxtArr,4),g){this.maxLvTxt.visible=!1,this.maxLvBox.visible=!0,this.replaceBtn.x=160;var M=R.RuneModel.instance.exp,w=y[1][1];this.currExpTxt.text=M.toString(),this.needExpTxt.text="/"+w;var P=(this.width-this.currExpTxt.width-this.needExpTxt.width)/2;this.currExpTxt.x=P,this.needExpTxt.x=this.currExpTxt.x+this.currExpTxt.width+1,this.conIconImg.x=P-this.conIconImg.width,this.currExpTxt.color=M<w?"#ff3e3e":"#2d1a1a",this._upBtnClip.visible=w<=M}else this.replaceBtn.x=265,this.maxLvTxt.visible=!0,this.maxLvBox.visible=!1}else this.bgImg.height=965},n.prototype.searchFrist=function(){var t=R.RuneModel.instance.firstSelect;-1===t||R.RuneModel.instance.isSearchFirst?-1===t?(this._pitGroup.canSelectHandler=null,this._pitGroup.selectedIndex=t,this._pitGroup.canSelectHandler=a.create(this,this.canSelectHandler,null,!1)):this.selectPit(t):this.updataView()},n.prototype.canSelectHandler=function(t){++t;var e=k.instance.finishLv,i=R.RuneModel.instance.slots[t];return e>=this._unlockPitByLayer[t]&&(R.RuneModel.instance.currClickPit=t),!(e<this._unlockPitByLayer[t]||!i)||(GlobalData.dispatcher.event("RUNE_INALY_SELECT",--t),!1)},n.prototype.selectPit=function(t){this._pitGroup.selectedIndex=t-1,this.selectPitchPit()},n.prototype.selectPitchPit=function(){var t=this._pitGroup.oldSelectedIndex,e=this._pitGroup.selectedIndex;this._runePitArr[t]&&(this._runePitArr[t].frameImg.visible=!1),GlobalData.dispatcher.event("RUNE_INALY_SELECT",e),this.updataView()},n.prototype.creatBtnEff=function(t){var e=D.creatEff(t,"btn_light",15);return e.pos(-5,-10),e.visible=!1,e},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._runePitArr=this.destroyElement(this._runePitArr),this._pitGroup=this.destroyElement(this._pitGroup),this._attNameTxts=this.destroyElement(this._attNameTxts),this._attTxtArr=this.destroyElement(this._attTxtArr),this._attUpTxtArr=this.destroyElement(this._attUpTxtArr),this._attUpImgArr=this.destroyElement(this._attUpImgArr),this._upBtnClip=this.destroyElement(this._upBtnClip),this._replaceBtnClip=this.destroyElement(this._replaceBtnClip),this._runeClip=this.destroyElement(this._runeClip),s.prototype.destroy.call(this,t)},n.prototype.runeAllViewBtnHandler=function(){WindowManager.instance.open(136)},n.prototype.resolveTxtHandler=function(){WindowManager.instance.open(141)},n.prototype.replaceBtnHandler=function(){R.RuneModel.instance.currClickPit=R.RuneModel.instance.pitchRune,WindowManager.instance.open(137,R.RuneModel.instance.pitchRune)},n.prototype.upGradeBtnHandler=function(){this._upBtnClip.visible?R.RuneCtrl.instance.runeRefine([this._pitGroup.selectedIndex+1]):A.bag.BagUtil.openLackPropAlert(l.instance.runeEssenceId,1)},n.prototype.runeCopyBtnHandler=function(){WindowManager.instance.open(139)},n.prototype.runeTreasureBtnHandler=function(){WindowManager.instance.open(393)},n.prototype.exchangeTxtHandler=function(){WindowManager.instance.open(109,3)},i=n,R.RuneInlayPanel=i}(modules=modules||{}),function(e){var i,n,t,s,o;function a(){return null!==n&&n.apply(this,arguments)||this}i=e.rune||(e.rune={}),t=ui.RuneAllAlertUI,s=e.common.CustomList,n=t,__extends(a,n),a.prototype.destroy=function(){this._list=this.destroyElement(this._list),n.prototype.destroy.call(this)},a.prototype.initialize=function(){n.prototype.initialize.call(this),this._list=new s,this._list.width=553,this._list.height=605,this._list.hCount=1,this._list.itemRender=i.RuneAllListPanel,this._list.x=53,this._list.y=116,this.addChild(this._list);var t=e.config.ItemRuneCfg.instance.unlockLayerArr;this._list.datas=t},o=a,i.RuneAllAlert=o}(modules=modules||{}),function(S){var M,e,t,i,c,w,p,P,n;function s(){return null!==e&&e.apply(this,arguments)||this}M=S.rune||(S.rune={}),t=ui.RuneBagAlertUI,i=S.common.CustomList,c=S.config.BlendCfg,w=S.rune_copy.RuneCopyModel,p=S.bag.BagModel,P=S.common.CommonUtil,e=t,__extends(s,e),s.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.width=555,this._list.height=562,this._list.hCount=1,this._list.spaceY=5,this._list.itemRender=M.RuneBagItem,this._list.x=53,this._list.y=114,this.addChild(this._list),this._recordTab={}},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getWayBtn,this,this.getWayHandler)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.upDateView()},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._index=t},s.prototype.upDateView=function(){var t=[],e={},i={};M.RuneModel.instance.currPitType=this._index;var n=M.RuneModel.instance.canInlayRunes(M.RuneModel.instance.currPitType),s=p.instance.getItemsByBagId(5);for(var o in this.capacityTxt.text="容量: "+(s?s.length:0)+"/"+c.instance.getCfgById(10008)[1][0],this._recordTab=0==M.RuneModel.instance.currPitType?M.RuneModel.instance.commonPitTypeRecode:M.RuneModel.instance.specialPitTypeRecode,this._recordTab)i[this._recordTab[o]]=!0;for(var a=0,r=n.length;a<r;a++){var l=n[a][0];null!=i[l]||e[l]||(e[l]=!0,t.push(n[a]))}n=t.sort(this.runeTypeSort.bind(this));var h=M.RuneModel.instance.slots[this._index];h&&n.unshift([h,0,0,null]),this._list.datas=n},s.prototype.runeTypeSort=function(t,e){var i=w.instance.finishLv,n=t[0],s=e[0],o=P.getDimIdByItemId(n),a=S.config.ItemRuneCfg.instance.getCfgById(o)[5],r=P.getDimIdByItemId(s),l=a<=i,h=S.config.ItemRuneCfg.instance.getCfgById(r)[5]<=i,c=P.getStoneTypeById(n),p=P.getStoneTypeById(s),u=t[0]%1e4,d=e[0]%1e4,y=M.RuneModel.instance.slots[M.RuneModel.instance.currClickPit],g=P.getStoneTypeById(M.RuneModel.instance.slots[this._index]),f=M.RuneModel.instance.getIsHaveSameType(n),_=M.RuneModel.instance.getIsHaveSameType(s),m=c!==g,v=p!==g,b=P.getItemQualityById(n),T=P.getItemQualityById(s),I=S.config.RuneRefineCfg.instance.getCfgById(n)[4],C=S.config.RuneRefineCfg.instance.getCfgById(s)[4],x=r<o?0:1,B=x?0:1;return f||(x+=1e5),_||(B+=1e5),l&&(x+=1e4),h&&(B+=1e4),y&&!m&&(x+=1e4),y&&!v&&(B+=1e4),T<b&&(x+=1e3),b<T&&(B+=1e3),I.length>C.length&&(x+=100),I.length<C.length&&(B+=100),d<u&&(x+=10),u<d&&(B+=10),x<B?1:-1},s.prototype.getWayHandler=function(){WindowManager.instance.open(139)},n=s,M.RuneBagAlert=n}(modules=modules||{}),function(u){var d,i,t,y,h,e,g,f,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}d=u.rune||(u.rune={}),t=ui.RuneResolveAlertUI,y=u.bag.BagModel,h=u.config.RuneRefineCfg,e=u.config.BlendCfg,g=u.notice.SystemNoticeManager,f=u.common.CommonUtil,n=u.config.RuneComposeCfg,s=u.common.SimpleList,i=t,__extends(a,i),a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._resolveBtnArr=this.destroyElement(this._resolveBtnArr),i.prototype.destroy.call(this)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create(d.RuneResolveItem,276,130,1,2,4,5),this._list.multiSelectable=!0,this._list.width=558,this._list.height=574,this._list.x=50,this._list.y=116,this.addChild(this._list),this._resolveRecordArr=d.RuneModel.instance.rflags,this._resolveBtnArr=[this.pitchBtn_0,this.pitchBtn_1,this.pitchBtn_2,this.pitchBtn_3,this.pitchBtn_4];for(var t=0,e=this._resolveRecordArr.length;t<e;t++)this._resolveBtnArr[this._resolveRecordArr[t]].selected=!0;this._resolveCDTime=0,this.propImg.skin=f.getIconById(91740001,!0),this.propImg2.skin=f.getIconById(n.instance.propItemId)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),Laya.timer.loop(1e3,this,this.loopHandler);for(var t=0,e=this._resolveBtnArr.length;t<e;t++)this.onAutoClick(this._resolveBtnArr[t],this,this.resolveTypeCheck,[t]);this.onAutoClick(this.oneKeyBtn,this,this.oneKeyBtnHandler),this.onAutoGlobalEvt("RUNE_RESOLVE_SUCCEED",this,this.startKeepCDTime),this.onAutoEvt(this._list,"select",this,this.updateResolveItems)},a.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),this._resolveCDTime=null,i.prototype.offEvt.call(this)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.initView()},a.prototype.startKeepCDTime=function(){this._resolveCDTime=e.instance.getCfgById(23003)[1][0]+1,this.initView()},a.prototype.loopHandler=function(){this._resolveCDTime<=1||(this._resolveCDTime-=1e3)},a.prototype.resolveTypeCheck=function(t){this._resolveBtnArr[t].selected=!this._resolveBtnArr[t].selected;var e=this._resolveBtnArr[t].selected;if(e)-1===this._resolveRecordArr.indexOf(t)&&this._resolveRecordArr.push(t);else{var i=this._resolveRecordArr.indexOf(t);-1!==i&&this._resolveRecordArr.splice(i,1)}d.RuneModel.instance.rflags=this._resolveRecordArr,d.RuneCtrl.instance.setResolveRuneFlag([this._resolveRecordArr]),0==t&&this._resolveBtnArr[t].selected&&d.RuneCtrl.instance.autoResolveRune(),this.selecteIndex(t,e)},a.prototype.selecteIndex=function(t,e){if(0!==t){var i=this._list.multiSelectedIndices,n=this._list.datas,s=!1;if(e)for(var o=0,a=n.length;o<a;o++){var r=n[o][0];f.getStoneTypeById(r)!==u.config.ItemRuneCfg.instance.resolveRuneSubTypeId&&t==f.getItemQualityById(r)-1&&-1===i.indexOf(o)&&(i.push(o),s=!0)}else for(o=0,a=n.length;o<a;o++)if(r=n[o][0],f.getStoneTypeById(r)!==u.config.ItemRuneCfg.instance.resolveRuneSubTypeId&&t==f.getItemQualityById(r)-1){var l=i.indexOf(o);-1!==l&&(i.splice(l,1),s=!0)}var h=this._list.multiSelectedIndices;s&&(this._list.multiSelectedIndices=h),this.updateResolveItems()}},a.prototype.initView=function(){for(var t in this._tab={},d.RuneModel.instance.commonPitTypeRecode)this._tab[t]=!!d.RuneModel.instance.commonPitTypeRecode[t];for(var t in d.RuneModel.instance.specialPitTypeRecode)this._tab[t]=!!d.RuneModel.instance.specialPitTypeRecode[t];for(var e=[],i=0,n=y.instance.getItemsByBagId(5);i<n.length;i++){var s=n[i],o=s[0],a=s[1],r=s[2],l=s[3];if(f.getStoneTypeById(o)===u.config.ItemRuneCfg.instance.resolveRuneSubTypeId)e.push(s);else for(var h=0;h<a;h++)e.push([o,1,r,l])}e=e.sort(this.sortFunc.bind(this)),this._list.datas=e,this._list.clearMultiSelectedIndices(),this.propTxt.text="0",this.propTxt2.text="0";for(var c=this._list.multiSelectedIndices,p=(h=0,e.length);h<p;h++)f.getStoneTypeById(e[h][0])===u.config.ItemRuneCfg.instance.resolveRuneSubTypeId&&c.push(h);for(0<c.length&&(this._list.multiSelectedIndices=this._list.multiSelectedIndices),this._resolveRecordArr=d.RuneModel.instance.rflags,h=0,p=this._resolveRecordArr.length;h<p;h++)this.selecteIndex(this._resolveRecordArr[h],!0);this.updateResolveItems()},a.prototype.updateResolveItems=function(){for(var t=0,e=0,i=this._list.multiSelectedIndices,n=this._list.datas,s=0,o=i.length;s<o;s++){var a=n[i[s]];if(a){var r=a[1],l=h.instance.getCfgById(a[0]);l[2][0]&&(t+=l[2][0][1]*r),l[2][1]&&(e+=l[2][1][1]*r)}}this.propTxt.text=t.toString(),this.propTxt2.text=e.toString()},a.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=f.getItemQualityById(i),o=f.getItemQualityById(n),a=f.getStoneTypeById(i),r=f.getStoneTypeById(n);if(a===u.config.ItemRuneCfg.instance.resolveRuneSubTypeId&&r===u.config.ItemRuneCfg.instance.resolveRuneSubTypeId)return o<s?-1:s<o?1:n<i?-1:i<n?1:0;if(a===u.config.ItemRuneCfg.instance.resolveRuneSubTypeId||r===u.config.ItemRuneCfg.instance.resolveRuneSubTypeId)return a===u.config.ItemRuneCfg.instance.resolveRuneSubTypeId?1:r===u.config.ItemRuneCfg.instance.resolveRuneSubTypeId?-1:void 0;var l=this._tab[a],h=this._tab[r];return!l&&h?-1:l&&!h?1:o<s?-1:s<o?1:n<i?-1:i<n?1:0},a.prototype.oneKeyBtnHandler=function(){if(1<this._resolveCDTime)g.instance.addNotice("冷却中，请"+Math.floor(this._resolveCDTime/1e3)+"s后再试",!0);else{for(var t,e=[],i=[],n=this._list.multiSelectedIndices,s=this._list.datas,o={},a=0,r=n.length;a<r;a++){var l=s[n[a]];if(l){var h=l[2],c=l[1];o[h]||(o[h]=0),o[h]+=c;var p=l[0];90<=f.getStoneTypeById(p)&&(i.push(p),t=!0)}}for(var u in o)o[u]&&e.push([parseInt(u),o[u]]);t?WindowManager.instance.open(148,[e,i]):0===e.length?g.instance.addNotice("未选择符文",!0):d.RuneCtrl.instance.resolveRune(e)}},o=a,d.RuneResolveAlert=o}(modules=modules||{}),function(y){var t,g,e,i;function n(){return null!==g&&g.apply(this,arguments)||this}t=y.rune||(y.rune={}),e=ui.CommonTxtAlertUI,g=e,__extends(n,g),n.prototype.initialize=function(){g.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.contentTxt,"#4C5E8A","SimHei",24,"left","middle"),this.contentTxt.style.lineHeight=28,this.contentTxt.mouseEnabled=!1,this.titleTxt.text="温馨提示"},n.prototype.onEvt=function(){g.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoClick(this.cancelBtn,this,this.close)},n.prototype.okBtnHandler=function(){t.RuneCtrl.instance.resolveRune(this._value),this.close()},n.prototype.setOpenParam=function(t){g.prototype.setOpenParam.call(this,t),this._value=t[0];for(var e=t[1],i=[],n={},s=0,o=e.length;s<o;s++)null==n[r=e[s]]?n[r]=1:++n[r];for(var a in n){var r=parseInt(a),l=n[a],h=r%1e4,c=1e4*(1e-4*r>>0),p=y.config.ItemRuneCfg.instance.getCfgById(c)[1],u="";0<l&&(u="x"+l),i.push("["+p+"Lv."+h+"]"+u+",")}var d="";for(s=0,o=i.length;s<o;s++)d+=i[s];this.contentTxt.innerHTML="分解的符文中包含<span style='color:#FF0000'>核心符文"+d+"</span>是否确认进行一键分解。"},i=n,t.RuneHintResolveAlert=i}(modules=modules||{}),function(t){var y,i,e,n,s,o,a,g,r,l,f,h;function c(){return null!==i&&i.apply(this,arguments)||this}y=t.rune_copy||(t.rune_copy={}),e=ui.RuneCopyViewUI,n=t.common.CustomClip,s=t.bag.BaseItem,o=t.common.BtnGroup,a=Laya.Event,g=t.config.SceneCopyRuneCfg,r=t.config.ItemRuneCfg,l=t.dungeon.DungeonCtrl,f=t.common.CommonUtil,i=e,__extends(c,i),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this.prizeEffect_0=this.destroyElement(this.prizeEffect_0),this.prizeEffect_1=this.destroyElement(this.prizeEffect_1),this._rewardArr=this.destroyElement(this._rewardArr),this._btnGroup=this.destroyElement(this._btnGroup),this._bigAwardArr=this.destroyElement(this._bigAwardArr),this._nameBoxArr=this.destroyElement(this._nameBoxArr),this._nameTxtArr=this.destroyElement(this._nameTxtArr),this._awardItemTipBoxArr=this.destroyElement(this._awardItemTipBoxArr),i.prototype.destroy.call(this,t)},c.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._rewardArr=[this.item1,this.item2,this.item3],this._rewardArr.forEach(function(t){t.nameVisible=!0}),this._bigAwardArr=new Array;for(var t=0;t<2;t++){var e=new s;e.pos(26,24),e.nameVisible=!1,e.hintTxt.fontSize=18,e.hintTxt.stroke=0,e.hintTxt.text="",e.hintTxt.color="#00ad38",e.hintTxt.y+=5,e._numTxt.stroke=0,this._bigAwardArr.push(e)}this.awardBox_0.addChildAt(this._bigAwardArr[0],1),this.awardBox_1.addChildAt(this._bigAwardArr[1],1),this._nameBoxArr=[this.runeNameBox_0,this.runeNameBox_1],this._nameTxtArr=[this.runeNameTxt_0,this.runeNameTxt_0],this._awardItemTipBoxArr=[this.awardItemTipBox_0,this.awardItemTipBox_1],this._btnGroup=new o,this._btnGroup.setBtns(this.btnGroup_0,this.btnGroup_1,this.btnGroup_2),this.prizeEffect_0=this.creatAwardEffect(this.awardBox_0),this.prizeEffect_1=this.creatAwardEffect(this.awardBox_1),this._isCanGetAward=!1,this._btnClip=f.creatEff(this.goBtn,"btn_light",15),this._btnClip.pos(-5,-10),this.regGuideSpr(45,this.btnGroup_0),this.regGuideSpr(47,this.btnGroup_1),this.regGuideSpr(52,this.btnGroup_2),this.regGuideSpr(53,this.goBtn)},c.prototype.onOpened=function(){i.prototype.onOpened.call(this),WindowManager.instance.close(136),WindowManager.instance.close(137),this._btnGroup.selectedIndex=2,this._btnClip.play(),this.prizeEffect_0.play(),this.prizeEffect_1.play(),this.updateView()},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,a.CHANGE,this,this.changeBtnHandler),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoClick(this.dialBtn,this,this.dialBtnHandler),this.onAutoClick(this.dailyAwardBtn,this,this.dailyAwardBtnHandler),this.onAutoClick(this._bigAwardArr[0],this,this.getBigAwardBtnHandler),this.onAutoClick(this._bigAwardArr[1],this,this.getBigAwardBtnHandler),this.onAutoClick(this.aboutBtn,this,this.aboutBtnHandler),this.onAutoClick(this.runeEnterBtn,this,this.runeEnterBtnHandler),this.onAutoGlobalEvt("RUNE_COPY_UPDATE",this,this.updateView),this.regAutoRP(this.dotImg_0,["bigTowerRP"]),this.regAutoRP(this.dotImg_1,["dailyDungeonRP"]),this.regAutoRP(this.dotImg_2,["runeCopyRP"]),this.regAutoRP(this.dotImg_3,["runeRP","runeResolvRP"])},c.prototype.updateView=function(){this._isCanGetAward=!1;var t=y.RuneCopyModel.instance.bigAwardLv;if(t){for(var e,i=y.RuneCopyModel.instance.currLv,n=this._currCfg=g.instance.getCfgByLv(i),s=0,o=this._rewardArr.length;s<o;s++)this._rewardArr[s].visible=!0;this.maxLvHintTxt.visible=!1,n||(this.maxLvHintTxt.visible=!0,n=this._currCfg=g.instance.getCfgByLv(--i)),this._isCanGetAward=!!t.length,t.length?(e=g.instance.getAwardCfgByCurrLv(t[0]),this.prizeEffect_0.visible=this.prizeEffect_1.visible=!0,this._bigAwardArr[0].needTip=this._bigAwardArr[1].needTip=!1):(e=g.instance.getAwardCfgByCurrLv(i),this._bigAwardArr[0].needTip=this._bigAwardArr[1].needTip=!0,this.prizeEffect_0.visible=this.prizeEffect_1.visible=!1),this.lvTxt.text="第"+i+"关",this.fightTxt.text="推荐战力:"+f.bigNumToString(n[5]),this.awardHintTxt.text=e[1]+"层大奖",this.awardItemTipBox_0.visible=this.awardItemTipBox_1.visible=this.runePitBox.visible=this._bigAwardArr[0].visible=this._bigAwardArr[1].visible=this.runeNameBox_0.visible=this.runeNameBox_1.visible=this.runeNameBox_2.visible=!1;var a=!1,r=e[3];r&&(this.runePitBox.visible=this.awardItemTipBox_0.visible=this.runeNameBox_2.visible=!0,this.prizeEffect_0.visible=!1,this.awardItemTipTxt_0.text="开启",this.runePitIndexTxt.text=r.toString(),a=!0);var l=e[4];l&&(a?(this.awardItemTipBox_1.visible=!0,this.prizeEffect_1.visible=!1,this.awardItemTipTxt_1.text="解锁",this.awardItemShow([l,0],1)):(this.awardItemTipBox_0.visible=!0,this.prizeEffect_0.visible=!1,this.awardItemTipTxt_0.text="解锁",this.awardItemShow([l,0],0)));var h=e[2];h&&(2==h.length?this.awardItemShow([h[0],h[1]],1):4==h.length&&(this.awardItemShow([h[0],h[1]],0),this.awardItemShow([h[2],h[3]],1)));var c=g.instance.getTipReward(),p=.5*c.length;for(s=0,o=this._rewardArr.length;s<o;s++)this._rewardArr[s].visible=!1,s<p&&(this._rewardArr[s].dataSource=[c[2*s],c[2*s+1],0,null],this._rewardArr[s].visible=!0);var u=y.RuneCopyModel.instance.finishLv>=g.instance.maxLv;this.awardBox_0.visible=this.awardBox_1.visible=!(u&&!t.length),this.dotImg_4.visible=0<y.RuneCopyModel.instance.dialCount;var d=y.RuneCopyModel.instance.isGetDailyAward&&0<y.RuneCopyModel.instance.finishLv;for(this.dotImg_5.visible=d,this.dailyAwardBtn.gray=!d,s=0,o=this._rewardArr.length;s<o;s++)this._rewardArr[s].visible=!u&&this._rewardArr[s].visible}},c.prototype.awardItemShow=function(t,e){var i=t[0],n=t[1];if(7==f.getItemTypeById(i)&&i%1e4==0){this._bigAwardArr[e].mouseEnabled=!1,i=1e4*(1e-4*i>>0);var s=r.instance.getCfgById(i)[1];i++,this._nameTxtArr[e].text="【"+s+"】",this._bigAwardArr[e].hintTxt.text="",this._nameBoxArr[e].visible=!0}else this._bigAwardArr[e].mouseEnabled=!0,this._isCanGetAward?(this._bigAwardArr[e].hintTxt.text="可领取",this._awardItemTipBoxArr[e].visible=!1):this._bigAwardArr[e].hintTxt.text="";this._bigAwardArr[e].dataSource=[i,n,0,null],this._bigAwardArr[e].visible=!0},c.prototype.changeBtnHandler=function(){0===this._btnGroup.selectedIndex?WindowManager.instance.open(38):1===this._btnGroup.selectedIndex&&WindowManager.instance.open(57)},c.prototype.dialBtnHandler=function(){WindowManager.instance.open(140)},c.prototype.goBtnHandler=function(){var t=this._currCfg[1];l.instance.reqEnterScene(2201,t)},c.prototype.getBigAwardBtnHandler=function(t){var e=y.RuneCopyModel.instance.bigAwardLv;e.length&&t.target.itemData[0]%1e4!=0&&l.instance.getCopyAward(2201,e[0],1)},c.prototype.dailyAwardBtnHandler=function(){y.RuneCopyCtrl.instance.getRuneEveryDayAward()},c.prototype.runeEnterBtnHandler=function(){WindowManager.instance.open(135)},c.prototype.aboutBtnHandler=function(){f.alertHelp(20025)},c.prototype.creatAwardEffect=function(t){var e=new n;return t.addChildAt(e,1),e.pos(-80,-80),e.scale(1.2,1.2),e.skin="assets/effect/availability.atlas",e.frameUrls=["availability/1.png","availability/2.png","availability/3.png","availability/4.png","availability/5.png","availability/6.png","availability/7.png","availability/8.png"],e.durationFrame=5,e.play(),e.loop=!0,e},h=c,y.RuneCopyPanel=h}(modules=modules||{}),function(t){var h,i,e,n,c,s;function o(){return null!==i&&i.apply(this,arguments)||this}h=t.rune_copy||(t.rune_copy={}),e=ui.DialAlertUI,n=t.bag.BaseItem,c=t.config.RuneDialCfg,i=e,__extends(o,i),o.prototype.destroy=function(){this._luckAward=this.destroyElement(this._luckAward),this._awardArr=this.destroyElement(this._awardArr),this._receivedImgArr=this.destroyElement(this._receivedImgArr),i.prototype.destroy.call(this)},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._angleArr=[0,45,90,135,180,225,270,315,360],this._stopIndex=0,this._isCanClick=!0,this._luckAward=new n,this._luckAward.pos(129,777),this.addChild(this._luckAward),this._awardPosArr=[[312,140],[452,188],[518,325],[452,482],[312,526],[179,460],[115,325],[179,188]],this._receivedImgArr=[this.receivedImg_0,this.receivedImg_1,this.receivedImg_2,this.receivedImg_3,this.receivedImg_4,this.receivedImg_5,this.receivedImg_6,this.receivedImg_7],this._awardArr=new Array;for(var t=0;t<8;t++){var e=new n;this.addChildAt(e,5),e.pos(this._awardPosArr[t][0],this._awardPosArr[t][1]),this._awardArr.push(e)}this.addChild(this.arrowImg)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.arrowImg.rotation=this._angleArr[this._stopIndex],this.updateView()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.startBtn,this,this.startBtnHandler),this.onAutoGlobalEvt("DIAL_UPDATE",this,this.updateView),this.onAutoGlobalEvt("DIAL_RESULT_UPDATE",this,this.startTurn)},o.prototype.updateView=function(){var t=h.RuneCopyModel.instance.round,e=h.RuneCopyModel.instance.dialCount,i=c.instance.getCfgByRound(t),n=this._luckId=i[1][0][0],s=i[1][0][1];this._luckAward.dataSource=[n,s,0,null];for(var o=0,a=this._awardArr.length;o<a;o++){var r=i[1][o][0],l=i[1][o][1];this._awardArr[o].dataSource=[r,l,0,null]}this.frameImg.visible=!1,this.frameImg.rotation=180,this.luckTimeTxt.text="幸运次数:"+e,this.roundTxt.text="当前轮数:第"+h.RuneCopyModel.instance.round+"轮",this.showReceivedFlag()},o.prototype.startBtnHandler=function(){this._isCanClick&&(h.RuneCopyCtrl.instance.startRuneDial(),this.frameImg.visible=this._isCanClick=!1)},o.prototype.startTurn=function(){var t=this;this._stopIndex=h.RuneCopyModel.instance.dialResult,this.arrowImg.rotation=this.arrowImg.rotation%360,this._tweenJS&&this._tweenJS.stop(),this._tweenJS=TweenJS.create(this.arrowImg).to({rotation:2160+this._angleArr[this._stopIndex]},3e3).start().easing(utils.tween.easing.quadratic.InOut).onComplete(function(){t.playComplete(),t._tweenJS.stop(),t._tweenJS=null})},o.prototype.showReceivedFlag=function(){for(var t=h.RuneCopyModel.instance.alreadList,e={},i=0,n=t.length;i<n;i++)e[t[i]]=!0;for(i=0,n=this._receivedImgArr.length;i<n;i++)this._receivedImgArr[i].visible=e[i]},o.prototype.playComplete=function(){CommonUtil.delayedPutInBag(),0==this._stopIndex?WindowManager.instance.open(95,[this._luckId]):this.updateView(),this.frameImg.visible=this._isCanClick=!0,this.frameImg.rotation=this.arrowImg.rotation},o.prototype.close=function(){this._tweenJS&&(this._tweenJS.stop(),this._tweenJS=null,this.playComplete()),i.prototype.close.call(this)},s=o,h.DialAlert=s}(modules=modules||{}),function(c){var p,t,e,i,o,n,s,r,l,u,a,h,d,y;function g(){return t.call(this)||this}p=c.rune||(c.rune={}),e=ui.RuneBookViewUI,i=c.common.CustomClip,o=c.config.ItemRuneCfg,n=c.bag.BagUtil,s=c.common.CustomList,r=c.config.RuneDictionaryCfg,l=c.config.AttrItemCfg,u=c.rune_copy.RuneCopyModel,a=c.notice.SystemNoticeManager,h=c.config.RuneRiseCfg,d=c.effect.SuccessEffectCtrl,t=e,__extends(g,t),g.prototype.initialize=function(){t.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.attrHtml,"#4c5e8a","SimHei",24),CommonUtil.setHTMLPro(this.numHtml,"#168a17","SimHei",24),this.attrHtml.style.leading=this.imgHtml.style.leading=this.numHtml.style.leading=10,this.dismantlingTxt.underline=!0,this._waveClip=CommonUtil.creatEff(this.conBox,"wave",7),this._waveClip.pos(0,110,!0),this._list=new s,this._list.width=620,this._list.height=596,this._list.hCount=4,this._list.spaceX=30,this._list.spaceY=10,this._list.itemRender=p.RuneStarItem,this._list.pos(70,176,!0),this._isScroll=!1,this.addChild(this._list),this._tween1=TweenJS.create(this.starImg1).yoyo(!0),this._tween2=TweenJS.create(this.starImg2).yoyo(!0),this._tween3=TweenJS.create(this.starImg3).yoyo(!0),this._tweens=[this._tween1,this._tween2,this._tween3],this.createEffect()},g.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.conBox,this,this.conHandler),this.onAutoClick(this.tipBtn,this,this.tipHandler),this.onAutoClick(this.upgradeBtn,this,this.upgradeHandler),this.onAutoClick(this.dismantlingTxt,this,this.dismantlingHandler),this.onAutoGlobalEvt("RUNE_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("RUNE_INFO_UPDATE",this,this.selectedHandler),this.onAutoGlobalEvt("RUNE_CHANGE_STATE",this,this.selectedHandler),this.onAutoGlobalEvt("RUNE_UPDATE_STAR",this,this.showEff)},g.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._waveClip.visible=!0,this._waveClip.play(),this._isScroll=!0,this.setSclect(),this.updateInfo(),this.selectedHandler()},g.prototype.close=function(){t.prototype.close.call(this),this._btnClip&&(this._btnClip.visible=!1,this._btnClip.stop()),this._waveClip&&(this._waveClip.visible=!1,this._waveClip.stop()),this._tween1&&this._tween1.stop(),this._tween2&&this._tween2.stop(),this._tween3&&this._tween3.stop()},g.prototype.destroy=function(){this._waveClip=this.destroyElement(this._waveClip),this._btnClip=this.destroyElement(this._btnClip),this._list=this.destroyElement(this._list),this._tween1&&(this._tween1.stop(),this._tween1=null),this._tween2&&(this._tween2.stop(),this._tween2=null),this._tween3&&(this._tween3.stop(),this._tween3=null),t.prototype.destroy.call(this)},g.prototype.updateInfo=function(){this.setList(),this.updateWaveClip();var t=h.instance.getInfoByGrade(p.RuneModel.instance.info[1])[4];this.powerClip.value=(p.RuneModel.instance.runeFight+t).toString()},g.prototype.conHandler=function(){WindowManager.instance.open(39,4)},g.prototype.tipHandler=function(){CommonUtil.alertHelp(20072)},g.prototype.upgradeHandler=function(){if(this._hasCount>=this._maxCount){var t=u.instance.finishLv,e=c.config.ItemRuneCfg.instance.getCfgById(p.RuneModel.instance.currRuneAttr[0])[5];t<e?a.instance.addNotice("通过远古符阵"+e+"层开启",!0):p.RuneCtrl.instance.runeDictionaryAddStar(p.RuneModel.instance.currRuneAttr[0])}else n.openBagItemTip([p.RuneModel.instance.currRuneAttr[0]+1,1,0,null])},g.prototype.dismantlingHandler=function(){for(var t=!1,e=0,i=p.RuneModel.instance.info[0].length;e<i;e++)if(p.RuneModel.instance.currRuneAttr[0]===p.RuneModel.instance.info[0][e][0]){t=!0;break}t?WindowManager.instance.open(482):a.instance.addNotice("当前无可拆解符文",!0)},g.prototype.updateWaveClip=function(){if(this.gradeTxt.text=p.RuneModel.instance.info[1]+"阶",p.RuneModel.instance.canUpgrade)this._waveClip.y=0,this.conRP.visible=!0;else{var t=p.RuneModel.instance.curCount,e=p.RuneModel.instance.maxCount;e<t&&(t=e),this._waveClip.y=100-t/e*100,this.conRP.visible=!1}this.conTxt.text=p.RuneModel.instance.curCount+"/"+p.RuneModel.instance.maxCount},g.prototype.setList=function(){var t=p.RuneModel.instance.processData(),e=this._list.scrollPos;t&&(this._list.datas=t),this._isScroll&&(this._isScroll=!1,e=p.RuneModel.instance.curItem.y),this._list.scrollTo(e)},g.prototype.selectedHandler=function(){this.runeImg.skin=CommonUtil.getIconById(p.RuneModel.instance.currRuneAttr[0]);var t=o.instance.getCfgById(p.RuneModel.instance.currRuneAttr[0])[1],e=" "+p.RuneModel.instance.currRuneAttr[1]+"阶";this.runeTxt.text=t+e,this.showEff(),this.box.dataSource=[p.RuneModel.instance.currRuneAttr[0]+1,1,0,null],this._hasCount=0,this._maxCount=c.config.RuneDictionaryCfg.instance.getInfo(p.RuneModel.instance.currRuneAttr)[3];for(var i=c.bag.BagModel.instance.getRunesByDimId(p.RuneModel.instance.currRuneAttr[0]),n=0,s=i.length;n<s;n++)this._hasCount+=i[n][1];this._hasCount>=this._maxCount?this.countTxt.color="#ffffff":this.countTxt.color="#FF0000",this.countTxt.text=this._hasCount+"/"+this._maxCount,this.setBtnState(),this.setAttr()},g.prototype.createEffect=function(){this._btnClip=i.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.upgradeBtn.x-5,this.upgradeBtn.y-10)},g.prototype.setBtnState=function(){this.upgradeBtn.visible=!0,this.finishTxt.visible=!1,u.instance.finishLv<c.config.ItemRuneCfg.instance.getCfgById(p.RuneModel.instance.currRuneAttr[0])[5]?(this._btnClip.visible=!1,this._btnClip.stop()):this._hasCount>=this._maxCount&&!c.config.RuneDictionaryCfg.instance.isMaxLevel(p.RuneModel.instance.currRuneAttr)?(this._btnClip.visible=!0,this._btnClip.play()):(this._btnClip.visible=!1,this._btnClip.stop(),c.config.RuneDictionaryCfg.instance.isMaxLevel(p.RuneModel.instance.currRuneAttr)&&(this.upgradeBtn.visible=!1,this.finishTxt.visible=!0)),3===p.RuneModel.instance.currRuneAttr[2]?this.upgradeBtn.label="升阶":this.upgradeBtn.label="升星"},g.prototype.setSclect=function(){for(var t=!0,e=p.RuneModel.instance.processData(),i=0,n=e.length;i<n;i++){for(var s=0,o=c.config.RuneDictionaryCfg.instance.getInfo(e[i])[3],a=c.bag.BagModel.instance.getRunesByDimId(e[i][0]),r=0,l=a.length;r<l;r++)s+=a[r][1];var h=u.instance.finishLv;if(c.config.ItemRuneCfg.instance.getCfgById(e[i][0])[5]<=h&&o<=s&&!c.config.RuneDictionaryCfg.instance.isMaxLevel(e[i])){t=!1,p.RuneModel.instance.currRuneAttr=e[i];break}}t&&(p.RuneModel.instance.currRuneAttr=e[0])},g.prototype.setAttr=function(){var t=r.instance.getAttr(p.RuneModel.instance.currRuneAttr),e="",i="",n="";for(var s in t){var o=l.instance.getCfgById(Number(s)),a=1===o[2];e+=o[1]+":"+(a?(100*t[s]).toFixed(2)+"%":t[s])+"<br/>",i+="<img src='common/zs_tongyong_3.png'/><br/>",n+=(a?(100*r.instance.getSingleAttr(p.RuneModel.instance.currRuneAttr,Number(s))).toFixed(2)+"%":r.instance.getSingleAttr(p.RuneModel.instance.currRuneAttr,Number(s)))+"<br/>"}this.attrHtml.innerHTML=e,this.imgHtml.innerHTML=i,this.numHtml.innerHTML=n,c.config.RuneDictionaryCfg.instance.isMaxLevel(p.RuneModel.instance.currRuneAttr)?(this.nextTxt.visible=!1,this.imgHtml.visible=!1,this.numHtml.visible=!1):(this.nextTxt.visible=!0,this.imgHtml.visible=!0,this.numHtml.visible=!0)},g.prototype.showEff=function(){this.starImg1.skin=this.starImg2.skin=this.starImg3.skin="common/icon_tongyong_7.png";for(var t=[this.starImg1,this.starImg2,this.starImg3],e=1;e<=p.RuneModel.instance.currRuneAttr[2];e++)t[e-1].skin="common/icon_tongyong_8.png",e===p.RuneModel.instance.currRuneAttr[2]&&p.RuneModel.instance.isSccess&&(p.RuneModel.instance.isSccess=!1,t[e-1].scaleX=t[e-1].scaleY=1,this._tweens[e-1].to({scaleX:.6,scaleY:.6},300).start(),d.instance.play("assets/others/tx_jinjiechengong3.png"));0===p.RuneModel.instance.currRuneAttr[2]&&p.RuneModel.instance.isSccess&&(p.RuneModel.instance.isSccess=!1,d.instance.play("assets/others/tx_jinjiechengong7.png"))},y=g,p.RuneBookPanel=y}(modules=modules||{}),function(t){var h,c,e,p,u,d,i;function n(){var t=c.call(this)||this;return CommonUtil.setHTMLPro(t.tipHtml,"#4C5E8A","SimHei",24),t.tipHtml.style.leading=2,t}h=t.rune||(t.rune={}),e=ui.RuneDismantlingAlertUI,p=t.config.ItemRuneCfg,u=t.config.RuneDictionaryCfg,d=t.config.RuneRiseCfg,c=e,__extends(n,c),n.prototype.onOpened=function(){c.prototype.onOpened.call(this);var t=!0,e=p.instance.getCfgById(h.RuneModel.instance.currRuneAttr[0])[1],i=[h.RuneModel.instance.currRuneAttr[0],h.RuneModel.instance.currRuneAttr[1],h.RuneModel.instance.currRuneAttr[2]];0===i[2]?(--i[1],i[2]=3):--i[2];var n=0,s=u.instance.getInfo(i)[3];if(this.countTxt.text=e+"×"+s,this.countTxt.color=CommonUtil.getColorByQuality(CommonUtil.getItemQualityById(h.RuneModel.instance.currRuneAttr[0]+1)),this.box.dataSource=[h.RuneModel.instance.currRuneAttr[0]+1,1,0,null],0!==h.RuneModel.instance.info[1]){for(var o=d.instance.getInfoByGrade(h.RuneModel.instance.info[1]-1)[1],a=d.instance.getInfoByGrade(h.RuneModel.instance.info[1]-1)[2],r=0,l=h.RuneModel.instance.info[0].length;r<l;r++)h.RuneModel.instance.info[0][r][1]>=a&&(n+=1);o===n&&i[1]<a&&(t=!1),this.tipHtml.innerHTML=t?"拆解后星级下降1级，可获得以下奖励，是否继续拆解？":"拆解后符文星数下降1级，宝典大师阶数下降1级，可获得以下奖励，是否继续拆解？"}else this.tipHtml.innerHTML="拆解后星级下降1级，可获得以下奖励，是否继续拆解？"},n.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelHandler),this.onAutoClick(this.dismantlingBtn,this,this.dismantlingHandler)},n.prototype.cancelHandler=function(){this.close()},n.prototype.dismantlingHandler=function(){h.RuneCtrl.instance.runeDictionarySubStar(h.RuneModel.instance.currRuneAttr[0]),this.close()},i=n,h.RuneDismantlingAlert=i}(modules=modules||{}),function(t){var a,e,i,n,r,l,h,c,s,p,o,u,d,y,g;function f(){return null!==e&&e.apply(this,arguments)||this}a=t.runeCompose||(t.runeCompose={}),i=ui.RuneComposeViewUI,n=t.common.CustomList,r=t.config.RuneComposeCfg,l=t.config.ItemRuneCfg,h=t.config.RuneRefineCfg,c=t.common.AttrUtil,s=t.common.BtnGroup,p=t.notice.SystemNoticeManager,o=t.common.CustomClip,u=t.bag.BagModel,d=t.bag.BagUtil,y=t.config.ItemMaterialCfg,e=i,__extends(f,e),f.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=n.create("v",41,115,183,880,a.RuneComposeItem,-5),this.addChild(this._list),this.propImg.skin=CommonUtil.getIconById(r.instance.propItemId),this._nameTxts=[this.attNameTxt_5,this.attNameTxt_6,this.attNameTxt_7,this.attNameTxt_8],this._attrTxts=[this.attTxt_5,this.attTxt_6,this.attTxt_7,this.attTxt_8],this._tab=new s,this._tab.setBtns(this.btnGroup_1,this.btnGroup_2),this.lItem.index=0,this.rItem.index=1,this._clip=CommonUtil.creatEff(this.btn,"btn_light",15),this._clip.pos(-5,-10,!0)},f.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoEvt(this._tab,"change",this,this.tabHandler),this.onAutoGlobalEvt("RUNE_COMPOSE_LIST_UPDATE",this,this.updateList),this.onAutoGlobalEvt("RUNE_COMPOSE_UPDATE",this,this.update),this.onAutoGlobalEvt("RUNE_COMPOSE_INLAY_UPDATE",this,this.update),this.onAutoGlobalEvt("RUNE_UPDATE",this,this.update),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView),this.regAutoRP(this.rpImg_1,["runeComposeRP"])},f.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._tab.selectedIndex=0,a.RuneComposeModel.instance.checkRP(),a.RuneComposeModel.instance.selectIds.tId=1,this.updateList()},f.prototype.tabHandler=function(){0===this._tab.selectedIndex||(p.instance.addNotice("功能尚未开放,敬请期待~",!0),this._tab.selectedIndex=0)},f.prototype.updateView=function(t){if(5===t){var e=a.RuneComposeModel.instance.curId;a.RuneComposeModel.instance.isHaveRP?a.RuneComposeModel.instance.getRPStateById(e)?this.update():this.updateList():this.update()}},f.prototype.updateList=function(){this._list.datas=r.instance.getSIdsByTId(a.RuneComposeModel.instance.selectIds.tId),this._list.relayout(),this._list.selectedData=a.RuneComposeModel.instance.selectIds.sId},f.prototype.update=function(){var t=a.RuneComposeModel.instance.curId;this.lItem.update(t),this.rItem.update(t),this.lFlagTxt.visible=this.lFlagImg.visible=1===this.lItem.flag,this.rFlagTxt.visible=this.rFlagImg.visible=1===this.rItem.flag,this.item.dataSource=[t,1,0,null],this.setAttr(this.calcComposeItemId(t),[this.itemTxt,this.nameTxt],this._nameTxts,this._attrTxts),this.setAttr(this.lItem.itemId,[this.lItemTxt,this.lNameTxt],[this.attNameTxt_1,this.attNameTxt_2],[this.attTxt_1,this.attTxt_2]),this.setAttr(this.rItem.itemId,[this.rItemTxt,this.rNameTxt],[this.attNameTxt_3,this.attNameTxt_4],[this.attTxt_3,this.attTxt_4]);var e=r.instance.getCfgById(t)[4],i=e[0],n=e[1],s=CommonUtil.getPropCountById(i);this._flag=s-n,this.propTxt.text=s+"/"+n,this.propTxt.color=0<=this._flag?"#2d1a1a":"#ff3e3e",0<=this._flag&&this.lItem.flag&&this.rItem.flag?o.thisPlay(this._clip):o.thisStop(this._clip)},f.prototype.calcComposeItemId=function(t){var e=this.runeEssenceNum(this.lItem.itemId);return e+=this.runeEssenceNum(this.rItem.itemId),this.upGrade(t,e)},f.prototype.upGrade=function(t,e){var i=h.instance.getCfgById(t);if(!i)return t-1;var n=this.runeEssenceNum(CommonUtil.getDimIdByItemId(t)+1);if(!i[1])return t;var s=i[1][1]-n;return e<s?t:this.upGrade(t+1,e-s)},f.prototype.runeEssenceNum=function(t){var e=h.instance.getCfgById(t)[2];if(t%1e4==1)return 0;for(var i=0,n=e;i<n.length;i++){var s=n[i];if(s[0]===y.instance.runeEssenceId)return s[1]}return 0},f.prototype.setAttr=function(t,e,n,i){var s=1e4*(1e-4*t>>0),o=l.instance.getCfgById(s)[1],a=CommonUtil.getColorById(t);e[0].text=e[1].text=o+" Lv."+t%1e4,e[0].color=e[1].color=a;var r=h.instance.getCfgById(t)[4];i.forEach(function(t,e){if(e>=.5*r.length)t.visible=n[e].visible=!1;else{t.visible=n[e].visible=!0;var i=c.getResultByAttrIndex(r,e);n[e].text=i.name,t.text=i.value}})},f.prototype.btnHandler=function(){var t,e,i=[];if(2===this.lItem.flag){if(0===(t=u.instance.getItemsById(this.lItem.itemId)).length)return void p.instance.addNotice("合成所需的符文不足",!0);var n=t[0][2];i.push(n)}if(2===this.rItem.flag){if(0===(e=u.instance.getItemsById(this.rItem.itemId)).length)return void p.instance.addNotice("合成所需的符文不足",!0);var s=e[0][2];i.push(s)}if(this._flag<0)d.openLackPropAlert(r.instance.propItemId,-this._flag);else{var o=a.RuneComposeModel.instance.curId;a.RuneComposeCtrl.instance.composeRune(o,i)}},f.prototype.ruleBtnHandler=function(){CommonUtil.alertHelp(20068)},f.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._nameTxts=this.destroyElement(this._nameTxts),this._attrTxts=this.destroyElement(this._attrTxts),this._tab=this.destroyElement(this._tab),e.prototype.destroy.call(this)},g=f,a.RuneComposePanel=g}(modules=modules||{}),function(t){var r,e,i,n,l,h,s;function o(){return null!==e&&e.apply(this,arguments)||this}r=t.runeCompose||(t.runeCompose={}),i=ui.RuneBagAlertUI,n=t.common.CustomList,l=t.bag.BagModel,h=t.config.RuneComposeCfg,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create("v",53,114,555,562,r.RuneComposeReplaceItem),this.addChild(this._list),this.getWayBtn.visible=this.capacityTxt.visible=!1,this.height=this.bgImg.height=740,this.tipTxt.y=this.height+50},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},o.prototype.update=function(){for(var t=l.instance.getItemsByBagId(5),e=h.instance.getCfgById(r.RuneComposeModel.instance.curId)[3][r.RuneComposeModel.instance.curPutIndex][0],i=CommonUtil.getDimIdByItemId(e),n=[],s=0,o=t;s<o.length;s++){var a=o[s][0];CommonUtil.getDimIdByItemId(a)===i&&0!==a&&n.push(a)}(n=n.sort(CommonUtil.smallToBigSort.bind(this))).unshift(0),this._list.datas=n},o.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},s=o,r.RuneComposeReplaceAlert=s}(modules=modules||{}),function(s){var t,e,i,o,n;function a(){this._myRecordLevel=0,this._skipWave=0,this._timeState=!1,this._doneWave=0,this._isMaxWave=!1,this._playerInfos=[]}t=s.teamBattle||(s.teamBattle={}),e=s.redPoint.RedPointCtrl,i=s.mission.MissionModel,o=s.rename.RenameModel,Object.defineProperty(a,"Instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.setTimes=function(t){this._totalTimes=t[0],this._remainTimes=t[1],s.dungeon.DungeonModel.instance.timesTable||s.dungeon.DungeonModel.instance.initTimesTable(),s.dungeon.DungeonModel.instance.timesTable[2091]=[2091,0,this._remainTimes,0,0,0,0,0,0,!1,0],this._myRecordLevel=t[3],GlobalData.dispatcher.event("TEAM_BATTLE_TIMES_UPDATE"),this.checkRedDot()},a.prototype.setMaxRecordInfo=function(t){this._maxRecord=t,GlobalData.dispatcher.event("TEAM_BATTLE_MAX_RECORD")},Object.defineProperty(a.prototype,"playerInfos",{get:function(){return this._playerInfos},set:function(t){t.length-1>this._playerInfos.length&&3==t.length&&this.isHaveRoom&&WindowManager.instance.open(354),this._playerInfos.length=0,this._mineInfo=null;for(var e=PlayerModel.instance.actorId,i=0,n=t.length;i<n;i++)if(t[i][8]&&(this._bossInfo=t[i]),e===t[i][0]){this._mineInfo=t.splice(i,1)[0];break}this._playerInfos=t,GlobalData.dispatcher.event("TEAM_BATTLE_MATCH_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mineInfo",{get:function(){return this._mineInfo},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bossInfo",{get:function(){return this._bossInfo},enumerable:!0,configurable:!0}),a.prototype.updataMatchState=function(t){console.log("更新匹配状态:  "+t),2==(this.matchState=t)?WindowManager.instance.close(98):0==t?2091==this.currSceneId?WindowManager.instance.open(98):3601!==this.currSceneId&&3801!==this.currSceneId||WindowManager.instance.open(207):1==t&&(2091==this.currSceneId?(this._playerInfos.length=0,console.log(" 更新匹配状态 这里为何清掉组队信息"),this.isHaveRoom&&!this._mineInfo[8]&&WindowManager.instance.open(354)):3601!==this.currSceneId&&3801!==this.currSceneId||WindowManager.instance.close(207)),GlobalData.dispatcher.event("TEAM_BATTLE_MATCH_STATE_UPDATE")},a.prototype.updataWave=function(t){this._currWave=t[0],this._doneWave=t[3],this._timeState=t[1],this._skipWave=t[2],this._isMaxWave=this._currWave>=t[4],GlobalData.dispatcher.event("TEAM_BATTLE_LEVEL_UPDATE")},a.prototype.checkRedDot=function(){0<this._remainTimes?e.instance.setRPProperty("teamBattleRP",!0):e.instance.setRPProperty("teamBattleRP",!1)},Object.defineProperty(a.prototype,"allMemberIds",{get:function(){for(var t=[],e=0,i=this._playerInfos;e<i.length;e++){var n=i[e][0];t.push(n)}return t.push(this._mineInfo[0]),t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHaveRoom",{get:function(){return this._isHaveRoom},set:function(t){this._isHaveRoom=t,this._isHaveRoom?i.instance.auto=!1:this._playerInfos.length=0,GlobalData.dispatcher.event("TEAM_COPY_ROOM_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"remainTimes",{get:function(){return this._remainTimes},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"totalTimes",{get:function(){return this._totalTimes},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"myRecordLevel",{get:function(){return this._myRecordLevel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxRecord",{get:function(){return this._maxRecord},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxRecordLevel",{get:function(){return this._maxRecord?this._maxRecord[4]:0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxRecordName",{get:function(){return this._maxRecord?this._maxRecord[2]:""},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currWave",{get:function(){return this._currWave},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"doneWave",{get:function(){return this._doneWave},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timeState",{get:function(){return this._timeState},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"skipWave",{get:function(){return this._skipWave},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isMaxWave",{get:function(){return this._isMaxWave},enumerable:!0,configurable:!0}),a.prototype.updateName=function(){var t=o.instance.updateNameReply;if(this._maxRecord&&t&&t[0]===this._maxRecord[0]&&(this._maxRecord[2]=t[1]),this._mineInfo&&t&&t[0]===this._mineInfo[0]&&(this._mineInfo[1]=this._mineInfo[9][5]=t[1]),t&&this._playerInfos)for(var e=0,i=this._playerInfos.length;e<i;e++)if(this._playerInfos[e]&&t[0]===this._playerInfos[e][0]){this._playerInfos[e][1]=this._playerInfos[e][9][5]=t[1];break}},a.prototype.updataHalfInfo=function(t){this._halfInfo=t,GlobalData.dispatcher.event("TEAM_COPY_CAN_INVITE_MEMBER_UPDATE")},Object.defineProperty(a.prototype,"halfInfo",{get:function(){return this._halfInfo},enumerable:!0,configurable:!0}),a.prototype.updateOcc=function(){var t=o.instance.updateOccReply;if(this._maxRecord&&t&&t[0]===this._maxRecord[0]&&(this._maxRecord[1]=t[1]),this._mineInfo&&t&&t[0]===this._mineInfo[0]&&(this._mineInfo[2]=this._mineInfo[9][1]=t[1]),t&&this._playerInfos)for(var e=0,i=this._playerInfos.length;e<i;e++)if(this._playerInfos[e]&&t[0]===this._playerInfos[e][0]){var n=this._playerInfos[e][9];this._playerInfos[e][2]=n[1]=t[1],n[7]=n[7]-n[7]%10+t[1];break}},a.prototype.addTimesBtnHandler=function(){var t=s.bag.BagModel.instance.getItemsById(20730009);0<t.length?s.bag.BagUtil.openBagItemTip(t[0]):WindowManager.instance.open(59,65)},a.prototype.getIsPlayer=function(){var t=s.bag.BagModel.instance.getItemCountById(20730009),e=s.vip.VipModel.instance.getPrivilegeInfoById(65)[1],i=s.config.PrivilegeCfg.instance.getVipInfoByLevel(s.vip.VipModel.instance.vipLevel,65),n=i&&i[1]||0;return(0<t||0<n-e)&&a.Instance.remainTimes<a.Instance.totalTimes&&!PlatParams.isCloseRecharge},n=a,t.TeamBattleModel=n}(modules=modules||{}),function(a){var u,i,t,d,e,o,r,y,n,s,l,h,c,p;function g(){return i.call(this)||this}u=a.ladder||(a.ladder={}),t=ui.LadderViewUI,d=a.config.TiantiCfg,e=a.common.ProgressBarCtrl,o=a.common.CustomClip,r=a.config.TiantiAwardsCfg,y=a.config.BlendCfg,n=a.dungeon.DungeonModel,s=a.notice.SystemNoticeManager,l=a.teamBattle.TeamBattleModel,h=a.common.CommonUtil,c=a.scene.SceneUtil,i=t,__extends(g,i),g.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._baseItems=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6],this._scoreProCtrl=new e(this.progressBar,233,this.progressTxt),this._joinProCtrl=new e(this.joinProImg,584,this.joinProTxt),this._gotImgs=[this.gotImg1,this.gotImg2,this.gotImg3,this.gotImg4],this.currencyIcon.skin=h.getIconById(92340001,!0),this._clips=[],this.timeTxt.text=y.instance.getCfgById(20111)[2][0],this.initializeClip()},g.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.sportAwardBtn,this,this.sportAwardHandler),this.onAutoClick(this.shopBtn,this,this.shopHandler),this.onAutoClick(this.rankBtn,this,this.rankHandler),this.onAutoClick(this.dailyAwardBtn,this,this.dailyAwardHandler),this.onAutoClick(this.addBtn,this,this.addHandler),this.onAutoClick(this.autoBtn,this,this.autoHandler),this.onAutoClick(this.matchBtn,this,this.matchHandler),this.onAutoClick(this.awardImg1,this,this.awardHandler,[0]),this.onAutoClick(this.awardImg2,this,this.awardHandler,[1]),this.onAutoClick(this.awardImg3,this,this.awardHandler,[2]),this.onAutoClick(this.awardImg4,this,this.awardHandler,[3]),this.onAutoClick(this.arenaBtn,this,this.arenaHandler),this.onAutoGlobalEvt("LADDER_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("LADDER_TIMES_UPDATE",this,this.updateTimes),this.onAutoGlobalEvt("LADDER_RANKS_UPDATE",this,this.updateRank),this.onAutoGlobalEvt("LADDER_SCORE_UPDATE",this,this.updateScore),this.onAutoGlobalEvt("LADDER_AUTO_MATCH_UPDATE",this,this.updateAutoMatch),this.onAutoGlobalEvt("LADDER_JOIN_AWARD_UPDATE",this,this.updateJoinAward),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.updateSceneState),this.onAutoGlobalEvt("TEAM_BATTLE_MATCH_STATE_UPDATE",this,this.updateMatchState),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge),this.onAutoClick(this.xdBtn,this,function(){WindowManager.instance.open(1292)}),this.regAutoRP(this.jingjiRP,["arenaRP"]),this.regAutoRP(this.tianTiRP,["tianTiRP"]),this.regAutoRP(this.xdRp,["immortalContest"])},g.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),u.LadderCtrl.instance.canOpenPanel(203)},g.prototype.onOpened=function(){i.prototype.onOpened.call(this),u.LadderCtrl.instance.getTiantiRank(),this.updateSceneState(),this.updateInfo(),this.updateTimes(),this.updateRank(),this.updateScore(),this.updateJoinAward();var t=u.LadderModel.instance.tiantiScore;t&&0!==t[3]||(u.LadderModel.instance.autoMatch=!1),PlatParams.isCloseRecharge&&(this.addBtn.visible=!1),this.updateAutoMatch()},g.prototype.updatePlatChangeRecharge=function(){this.addBtn.visible=!PlatParams.isCloseRecharge},g.prototype.close=function(){i.prototype.close.call(this);for(var t=0,e=this._clips.length;t<e;t++)this._clips[t].stop(),this._clips[t].removeSelf()},g.prototype.helpHandler=function(){h.alertHelp(20033)},g.prototype.sportAwardHandler=function(){WindowManager.instance.open(205)},g.prototype.shopHandler=function(){WindowManager.instance.open(235)},g.prototype.rankHandler=function(){WindowManager.instance.open(206)},g.prototype.dailyAwardHandler=function(){WindowManager.instance.open(204)},g.prototype.addHandler=function(){WindowManager.instance.open(59,69)},g.prototype.autoHandler=function(){this.checkCanMatch()&&(u.LadderModel.instance.autoMatch=!u.LadderModel.instance.autoMatch)},g.prototype.getCheckCanMatch=function(){if(!this._sceneState||2!==this._sceneState[2])return!1;var t=u.LadderModel.instance.tiantiScore;return t&&0<t[3]},g.prototype.checkCanMatch=function(){if(!this._sceneState||2!==this._sceneState[2])return s.instance.addNotice("未到活动时间",!0),!1;if(!c.isCommonScene||a.scene.SceneModel.instance.isInMission)return s.instance.addNotice("需先退出当前副本场景，才能前往其他场景",!0),!1;if(a.common_group.CommonGroupUtil.isMyHaveTeam())return s.instance.addNotice("当前处于组队状态,无法匹配",!0),!1;var t=u.LadderModel.instance.tiantiScore;return!(!t||0===t[3])||(s.instance.addNotice("挑战次数不足",!0),!1)},g.prototype.matchHandler=function(){this.checkCanMatch()&&u.LadderCtrl.instance.reqBeginMatch()},g.prototype.updateInfo=function(){u.LadderModel.instance.ladderInfo},g.prototype.updateTimes=function(){var t=u.LadderModel.instance.times;if(t){this.successRateTxt.text="参赛胜率："+(0===t[1]?0:Math.round(t[1]/t[0]*100)+"%"),this.timesTxt.text="参赛次数："+t[0];var e=t[2];this._joinProCtrl.maxValue=10,this._joinProCtrl.value=e}},g.prototype.updateRank=function(){var t=u.LadderModel.instance.ranks;if(t){for(var e=-1,i=0,n=t.length;i<n;i++)t[i][0][0]===PlayerModel.instance.actorId&&(e=t[i][0][2]);this.rankTxt.text=-1===e?"未上榜":e.toString()}},g.prototype.updateScore=function(){this.updateBtnState();var t=u.LadderModel.instance.tiantiScore;if(t){var e=y.instance.getCfgById(20103)[1][0];this.restTimesTxt.text=t[3]+"/"+e,this.restTimesTxt.color=0<t[3]?"#00ad35":"#e6372e";for(var i=t[0],n=d.instance.getCfgById(i),s=d.instance.getCfgById(i+1),o=s?s[4]:[],a=0,r=o.length;a<r;a++)this._baseItems[a].visible=!0,this._baseItems[a].dataSource=[o[a][0],o[a][1],0,null];for(a=o.length,r=this._baseItems.length;a<r;a++)this._baseItems[a].visible=!1;i>=d.instance.getCfgMaxId()?(i=d.instance.getCfgMaxId(),n=d.instance.getCfgById(i),this.img1.visible=this.img2.visible=!1,this.jinshengText.visible=!1,this.maxTipText1.visible=!0):(this.img1.visible=this.img2.visible=!0,this.jinshengText.visible=!0,this.maxTipText1.visible=!1);var l=t[1],h=0;if(n){h=n[2],this._scoreProCtrl.maxValue=h,this._scoreProCtrl.value=l,d.instance.getCfgMaxSocre()<=l?(this.progressTxt.visible=!1,this.progressBar.visible=!1,this.maxTipText.visible=!0):(this.progressTxt.visible=!0,this.progressBar.visible=!0,this.maxTipText.visible=!1),this.gradeFont.value=n[1];var c=n?n[0]:1;this.gradeFont1.value=((5-c%5)%5+1).toString(),this.currencyTxt.text=""+n[3][0][1]}else this.progressTxt.visible=!1,this.progressBar.visible=!1,this.img1.visible=this.img2.visible=!1,this.jinshengText.visible=!1,this.maxTipText1.visible=!0,this.maxTipText.visible=!0,this.gradeFont.value="王者一阶",this.gradeFont1.value="1",this.currencyTxt.text="";var p=n?n[0]:1;this.gradeIcon.skin="assets/others/stage/image_ttdf_"+u.LadderModel.instance.ladderUtlis(p,!n)+".png"}},g.prototype.updateAutoMatch=function(){var t=u.LadderModel.instance.autoMatch;(this.autoBtn.selected=t)?h.whetherInCopy()||u.LadderCtrl.instance.reqBeginMatch():u.LadderCtrl.instance.reqCancelMatch()},g.prototype.awardHandler=function(t){for(var e=u.LadderModel.instance.joinAwardStates,i=r.instance.cfgs[t][5],n=[],s=0,o=i.length;s<o;s++)n[s]=[i[s][0],i[s][1],0,null];e&&e[t]&&1===e[t][1]?a.bag.BagUtil.canAddItemsByBagIdCount(n)&&u.LadderCtrl.instance.getTiantiJoinAward(t):e&&e[t]&&0!==e[t][1]||WindowManager.instance.open(212,[n,"奖励预览"])},g.prototype.arenaHandler=function(){WindowManager.instance.open(289)},g.prototype.updateJoinAward=function(){for(var t=0,e=this._clips.length;t<e;t++)this._clips[t].stop(),this._clips[t].removeSelf();var i=u.LadderModel.instance.joinAwardStates;if(i&&0!==i.length)for(t=0;t<4;t++){var n=i[t];if(this._gotImgs[t].visible=2===n[1],1===n[1]){var s=this._clips[t];s||(s=o.create("assets/effect/ok_state.atlas","ok_state",8),this._clips.push(s)),s.pos(this._gotImgs[t].x-82,this._gotImgs[t].y-96,!0),s.play(),this.addChildAt(s,13)}}},g.prototype.updateSceneState=function(){this._sceneState=n.instance.getCopySceneStateByType(16),this._sceneState&&2===this._sceneState[2]||(u.LadderModel.instance.autoMatch=!1),this.updateBtnState()},g.prototype.updateBtnState=function(){this.getCheckCanMatch()?(this._matchBtnCustomClip.visible=!0,this._matchBtnCustomClip.play(),this.matchBtn.gray=!1):(this._matchBtnCustomClip.visible=!1,this._matchBtnCustomClip.stop(),this.matchBtn.gray=!0)},g.prototype.updateMatchState=function(){0===l.Instance.matchState&&WindowManager.instance.open(207)},g.prototype.destroy=function(t){void 0===t&&(t=!0),this._baseItems=this.destroyElement(this._baseItems),this._scoreProCtrl=this.destroyElement(this._scoreProCtrl),this._joinProCtrl=this.destroyElement(this._joinProCtrl),this._matchBtnCustomClip=this.destroyElement(this._matchBtnCustomClip),this._gotImgs=this.destroyElement(this._gotImgs),this._clips=this.destroyElement(this._clips),i.prototype.destroy.call(this,t)},g.prototype.initializeClip=function(){this._matchBtnCustomClip=o.create("assets/effect/btn_light.atlas","btn_light",16),this._matchBtnCustomClip.setProperty(this,264,854)},p=g,u.LadderPanel=p}(modules=modules||{}),function(t){var s,o,e,a,i,n;function r(){return o.call(this)||this}s=t.ladder||(t.ladder={}),e=ui.HonorAwardAlertUI,a=t.config.TiantiCfg,i=t.common.SimpleList,o=e,__extends(r,o),r.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),o.prototype.destroy.call(this)},r.prototype.initialize=function(){o.prototype.initialize.call(this),this._list=i.create(s.HonorAwardItem,578,73),this.addChild(this._list),this._list.pos(41,162,!0),this._list.size(578,570);var t=a.instance.cfgs;this._list.datas=t},r.prototype.onOpened=function(){o.prototype.onOpened.call(this);for(var t=a.instance.cfgs,e=0,i=0,n=t.length;i<n;i++)if(t[i][0]===s.LadderModel.instance.tiantiScore[0]){e=i;break}this._list.scrollTo(73*e)},n=r,s.HonorAwardAlert=n}(modules=modules||{}),function(t){var s,o,e,i,n,a,r,l;function h(){return o.call(this)||this}s=t.ladder||(t.ladder={}),e=ui.LadderGradeAwardAlertUI,i=t.common.CustomList,n=t.common.BtnGroup,a=t.config.TiantiCfg,r=t.config.TiantiAwardsCfg,o=e,__extends(h,o),h.prototype.initialize=function(){o.prototype.initialize.call(this),this._gradeList=new i,this._gradeList.itemRender=s.LadderGradeAwardItem,this._gradeList.pos(48,116,!0),this._gradeList.size(565,526),this._gradeList.datas=a.instance.cfgs.slice(0,a.instance.cfgs.length-1),this._rankList=new i,this._rankList.itemRender=s.LadderRankAwardItem,this._rankList.pos(48,162,!0),this._rankList.size(565,400),this._rankList.datas=r.instance.cfgs,this._btnGroup=new n,this._btnGroup.setBtns(this.rankBtn,this.gradeBtn)},h.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,Laya.Event.CHANGE,this,this.selectHandler)},h.prototype.onOpened=function(){o.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0;for(var t=a.instance.cfgs,e=0,i=0,n=t.length;i<n;i++)if(t[i][0]===s.LadderModel.instance.tiantiScore[0]){e=i;break}this._gradeList.scrollTo(134*e)},h.prototype.selectHandler=function(){0===this._btnGroup.selectedIndex?(this.addChild(this._rankList),this._gradeList.removeSelf(),this.rankTitleBg.visible=this.rankTxt.visible=this.awardTxt.visible=!0,this.titleTxt.text="排行奖励",this.TipText.text="排行奖励通过邮件发送"):1===this._btnGroup.selectedIndex&&(this.addChild(this._gradeList),this._rankList.removeSelf(),this.rankTitleBg.visible=this.rankTxt.visible=this.awardTxt.visible=!1,this.titleTxt.text="段位奖励",this.TipText.text="段位晋级奖励通过邮件发送")},h.prototype.destroy=function(){this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),this._gradeList&&(this._gradeList.destroy(),this._gradeList=null),this._rankList&&(this._rankList.destroy(),this._rankList=null),o.prototype.destroy.call(this)},l=h,s.LadderGradeAwardAlert=l}(modules=modules||{}),function(t){var o,a,e,r,l,h,c,i;function n(){return null!==a&&a.apply(this,arguments)||this}o=t.ladder||(t.ladder={}),e=ui.LadderRankAlertUI,r=t.config.BlendCfg,l=t.config.TiantiCfg,h=t.common.SimpleList,c=t.common.BtnGroup,a=e,__extends(n,a),n.prototype.initialize=function(){a.prototype.initialize.call(this),this._list=h.create(o.LadderRankItem,571,89),this._list.pos(44,153,!0),this._list.size(571,510),this.addChild(this._list),CommonUtil.setHTMLPro(this.tipTxt,"#3d5981","SimHei",24,"center"),this._rankCount=r.instance.getCfgById(20104)[1][0];for(var t=r.instance.getCfgById(20105)[1][0],e="",i=l.instance.cfgs,n=0,s=i.length;n<s;n++)if(t<i[n][2]){e=i[n][1];break}this.tipTxt.innerHTML='积分排名<span style="color:#168a17">前'+this._rankCount+'</span>且段位达到<span style="color:#168a17">'+e+"</span>可上榜。",this._group=new c,this._group.setBtns(this.group_1,this.group_2)},n.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoGlobalEvt("LADDER_RANKS_UPDATE",this,this.updateRank),this.onAutoEvt(this._group,"change",this,this.groupHandler)},n.prototype.onOpened=function(){a.prototype.onOpened.call(this),WindowManager.instance.close(481),this._group.selectedIndex=0,o.LadderCtrl.instance.getTiantiRank()},n.prototype.groupHandler=function(){1===this._group.selectedIndex&&WindowManager.instance.open(481)},n.prototype.updateRank=function(){var t=o.LadderModel.instance.ranks;if(t&&t.length===this._rankCount)this._list.datas=t;else{for(var e=[],i=0;i<this._rankCount;i++)e.push(t?t[i]:null);this._list.datas=e}this.showRankAndShow()},n.prototype.showRankAndShow=function(){var t=o.LadderModel.instance.ranks;if(t){for(var e=-1,i=o.LadderModel.instance.tiantiScore?o.LadderModel.instance.tiantiScore[1]:-1,n=0,s=t.length;n<s;n++)t[n][0][0]===PlayerModel.instance.actorId&&(e=t[n][0][2]);this.myRankNumText.text="我的排名:"+(-1===e?"未上榜":e.toString()),this.myIntegralText.text="积分:"+(-1===i?"0":i.toString())}},n.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._group=this.destroyElement(this._group),a.prototype.destroy.call(this)},i=n,o.LadderRankAlert=i}(modules=modules||{}),function(i){var n,s,t,o,a,r,e,l;function h(){return null!==s&&s.apply(this,arguments)||this}n=i.ladder||(i.ladder={}),t=ui.LadderMatchAlertUI,o=utils.tween.TweenGroup,a=i.config.TiantiCfg,r=i.teamBattle.TeamBattleModel,e=i.config.BlendCfg,s=t,__extends(h,s),h.prototype.initialize=function(){s.prototype.initialize.call(this),this.closeOnSide=!1,this.myHeadIcon.type=0,this.headIcon1.skin=CommonUtil.headSkin(0,1),this.headIcon2.skin=CommonUtil.headSkin(0,2)},h.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelHandler),this.onAutoGlobalEvt("TEAM_BATTLE_MATCH_STATE_UPDATE",this,this.matchedHandler),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.isCloseOver)},h.prototype.offEvt=function(){s.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler),this._tweenGroup=this.destroyElement(this._tweenGroup)},h.prototype.isCloseOver=function(){n.LadderModel.instance.isOpenHuoDpng()||(this.cancelHandler(),i.notice.SystemNoticeManager.instance.addNotice("天梯斗法活动时间已结束",!0))},h.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.nameTxt.text=PlayerModel.instance.playerBaseAttr[0];var t=n.LadderModel.instance.tiantiScore;if(t){var e=a.instance.getCfgById(t[0]);e&&(this.gradeTxt.text=e[1])}3601!==i.teamBattle.TeamBattleModel.Instance.currSceneId&&3801!==i.teamBattle.TeamBattleModel.Instance.currSceneId||(this.gradeTxt.text=""),this._matched=!1,this.cancelBtn.visible=!0,this.otherNameTxt.visible=this.otherGradeTxt.visible=!1,this.headIcon1.skin=CommonUtil.headSkin(0,1),Laya.timer.loop(1e3,this,this.loopHandler),this._seconds=0,this.loopHandler(),this._tweenGroup=new o,this._tweenCount=0,this.startTween()},h.prototype.startTween=function(){if(this.headBg1.y=-9,this.headIcon1.y=6,this.otherBox.y=0,this._matched&&this._tweenCount++,1!==this._tweenCount)TweenJS.create(this.otherBox,this._tweenGroup).to({y:-93},300+200*this._tweenCount).onComplete(this.completeHandler.bind(this)).start();else{var t=r.Instance.playerInfos;if(t&&0<t.length){var e=t[0];this.otherNameTxt.visible=this.otherGradeTxt.visible=!0,this.otherNameTxt.text=e[1],a.instance.getCfgById(e[7])&&(this.otherGradeTxt.text=a.instance.getCfgById(e[7])[1]);var i=e[9][21],n=e[2];this.headIcon1.skin=CommonUtil.headSkin(i,n)}}},h.prototype.completeHandler=function(){this.headBg1.y=174,this.headIcon1.y=189,TweenJS.create(this.otherBox,this._tweenGroup).to({y:-186},300+200*this._tweenCount).onComplete(this.completeHandler2.bind(this)).start()},h.prototype.completeHandler2=function(){this.startTween()},h.prototype.matchedHandler=function(){1===r.Instance.matchState&&(this._matched=!0,this.cancelBtn.visible=!1,this._enterTime=.001*e.instance.getCfgById(10705)[1][0],this.loopHandler())},h.prototype.cancelHandler=function(){n.LadderCtrl.instance.reqCancelMatch(),n.LadderModel.instance.autoMatch=!1,this.close()},h.prototype.loopHandler=function(){this._matched?(this.matchTxt.text="匹配成功",this._enterTime--,this._enterTime<0&&Laya.timer.clear(this,this.loopHandler)):(this.matchTxt.text="匹配中....("+this._seconds+")",this.matchTxt.y=296,this._seconds++)},l=h,n.LadderMatchAlert=l}(modules=modules||{}),function(a){var t,i,e,n,s,o,r,l,h,c,p,u,d,y,g,f;function _(){return i.call(this)||this}t=a.ladder||(a.ladder={}),e=a.commonAlert.PropAlertUtil,n=ui.LadderLoseAlertUI,s=a.config.BlendCfg,o=a.dungeon.DungeonCtrl,r=a.config.GetWayCfg,l=a.config.FailureStrongerCfg,h=a.funcOpen.FuncOpenModel,c=a.notice.SystemNoticeManager,p=a.common.CustomList,u=a.bag.BaseItem,d=a.config.TipCfg,y=a.bottomTab.BottomTabCtrl,g=a.marry_arena.MarryArenaModel,i=n,__extends(_,i),_.prototype.initialize=function(){i.prototype.initialize.call(this),this._sourceBtn=new Array,this._level=PlayerModel.instance.level,this._sourceBtnBg=new Array,this._desTxts=new Array,this.addChild(this.gotoBtn);for(var t=0;t<4;t++)this._sourceBtn[t]=new Laya.Image,this._sourceBtn[t].mouseEnabled=!0,this._sourceBtnBg[t]=new Laya.Image,this._desTxts[t]=new laya.display.Text,e.setDesTxt(this._desTxts[t]);this._list=new p,this._list.spaceX=20,this._list.vCount=1,this._list.itemRender=u,this._list.scrollDir=2,this.addChild(this._list),CommonUtil.setHTMLPro(this.StatementHTML,"#ffec7c","SimHei",28,"center")},_.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),this.onAutoClick(this._sourceBtn[0],this,this.openSourcePlane1),this.onAutoClick(this._sourceBtn[1],this,this.openSourcePlane2),this.onAutoClick(this._sourceBtn[2],this,this.openSourcePlane3),this.onAutoClick(this._sourceBtn[3],this,this.openSourcePlane4),this.onAutoClick(this.gotoBtn,this,this.gotoPlane),Laya.timer.loop(1e3,this,this.loopHandler),this.onAutoGlobalEvt("TIPBIANQIANG_UPDATE",this,this.updateTipUI),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},_.prototype.updateTipUI=function(){if(0==a.dungeon.DungeonModel.instance.tipType)return this.gotoBtn.visible=!1,void(this.TipsImg.visible=!1);var t=d.instance.getCfgByType(a.dungeon.DungeonModel.instance.tipType);t?(this.gotoBtn.visible=!0,this.TipsImg.visible=!0,this.TipsImg.skin="assets/icon/ui/failure_stronger/"+t[3]+".jpg"):this.TipsImg.skin="",PlatParams.isCloseRecharge&&(this.gotoBtn.visible=!1,this.TipsImg.visible=!1)},_.prototype.updatePlatChangeRecharge=function(){this.gotoBtn.visible=!PlatParams.isCloseRecharge,this.TipsImg.visible=!PlatParams.isCloseRecharge},_.prototype.setOpenParam=function(t){if(t){var e=492,i=a.scene.SceneModel.instance.enterScene[0];if(this.StatementHTML.innerHTML="",2501===i)e=510,a.faerie_demon.FaerieDemonModel.instance.scoreAdd?this.StatementHTML.innerHTML="仙魔积分+<span style='color:#50ff28'>"+a.faerie_demon.FaerieDemonModel.instance.scoreAdd+"</span>":this.StatementHTML.innerHTML="助战不增加积分";else if(3301===i)e=515,this.StatementHTML.innerHTML=g.instance.cookBattleWinResultScoreTxt();else if(3601===i&&a.windCloud.WindCloudModel.instance.scoreResult&&a.windCloud.WindCloudModel.instance.eventTime[0]+a.config.WindCloudCfg.instance.preTotalTime>=GlobalData.serverTime)e=515,this.StatementHTML.innerHTML="积分&nbsp;"+CommonUtil.formatHtmlStrByColor("#50ff28","+"+a.windCloud.WindCloudModel.instance.scoreResult);else if(3801===i)e=515,this.StatementHTML.innerHTML="积分&nbsp;"+CommonUtil.formatHtmlStrByColor("#50ff28","+"+a.immortalContest.ImmortalContestModel.instance.scoreResult);else if(3901===i){e=515;var n=a.strongest_marry.StrongestMarryModel.instance.winTimesOver,s=a.strongest_marry.StrongestMarryModel.instance.loseTimesOver;this.StatementHTML.innerHTML=3<=s?"<span style='color:#50ff28'>当前战绩:</span><span style='color:#ff3e3e'>"+n+"胜"+s+"败</span>":"<span style='color:#50ff28'>当前战绩:</span><span style='color:#50ff28'>"+n+"胜"+s+"败</span>"}var o=t;this._list.size(o.length<=4?120*o.length-20:460,100),this._list.pos(39+.5*(460-this._list.width),e,!0),this._list.datas=o}},_.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=s.instance.getCfgById(10303)[1][0],this.loopHandler(),this.setDate(),o.instance.getTipsPriorInfo(),PlatParams.isCloseRecharge&&(this.gotoBtn.visible=!1,this.TipsImg.visible=!1)},_.prototype.close=function(t,e){i.prototype.close.call(this,t,e),Laya.timer.clear(this,this.loopHandler),51===a.scene.SceneUtil.currScene?a.strongest_marry.StrongestMarryModel.instance.ispreliminaryCoupleBestr()?(a.dungeon.DungeonCtrl.instance.reqEnterNextLevel(),console.log("最强仙缘 结算处于第二层 进入下一层")):console.log("最强仙缘 结算处于第一层 直接关闭"):o.instance.reqEnterScene(0)},_.prototype.gotoPlane=function(){if(0!=a.dungeon.DungeonModel.instance.tipType){var t=d.instance.getCfgByType(a.dungeon.DungeonModel.instance.tipType);if(t){var e=t[4];y.instance.addPanelByFunc(e),this.close()}}},_.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},_.prototype.setDate=function(){this.removeChildSource(),this._level=PlayerModel.instance.level;var t,e=l.instance.getCfgByLevel(this._level)[1];this.bigToSmall(e);for(var i=0,n=e.length;i<n;i++)this.addChild(this._sourceBtnBg[i]),this.addChild(this._sourceBtn[i]),t=r.instance.getCfgById(e[i]),this._sourceBtn[i].pos(46+.5*(512-158*n+42*(n-1))+116*i,690),this._sourceBtn[i].skin="assets/icon/ui/get_way/"+t[1]+".png",this._sourceBtnBg[i].skin="assets/icon/ui/get_way/btn_ydrk_bg.png",this._sourceBtnBg[i].pos(this._sourceBtn[i].x,this._sourceBtn[i].y),this._sourceBtn[i].addChild(this._desTxts[i]),this._desTxts[i].pos(6,70),this._desTxts[i].text=t[2]},_.prototype.openSourcePlane1=function(){this._type=1,this.getOpenPlaneId()},_.prototype.openSourcePlane2=function(){this._type=2,this.getOpenPlaneId()},_.prototype.openSourcePlane3=function(){this._type=3,this.getOpenPlaneId()},_.prototype.openSourcePlane4=function(){this._type=4,this.getOpenPlaneId()},_.prototype.getOpenPlaneId=function(){var t=l.instance.getCfgByLevel(this._level)[1];this.bigToSmall(t);var e=r.instance.getCfgById(t[this._type-1])[3][0];this.openPlane(e)},_.prototype.openPlane=function(t){0===t?this.close():h.instance.getFuncIsOpen(t)?(y.instance.addPanelByFunc(t),this.close()):c.instance.addNotice(h.instance.getFuncOpenTipById(t),!0)},_.prototype.bigToSmall=function(t){for(var e=0,i=t.length;e<i-1;e++)for(var n=0;n<t.length-e-1;n++)if(t[n]<t[n+1]){var s=t[n];t[n]=t[n+1],t[n+1]=s}return t},_.prototype.removeChildSource=function(){if(null!=this._sourceBtn)for(var t=0;t<this._sourceBtn.length;t++)this.removeChild(this._sourceBtn[t]),this.removeChild(this._sourceBtnBg[t]),this.removeChild(this._desTxts[t])},_.prototype.destroy=function(){if(null!=this._sourceBtn){for(var t=0;t<this._sourceBtn.length;t++)this._sourceBtn[t].destroy(!0),this._sourceBtnBg[t].destroy(!0),this._desTxts[t].destroy(!0);this._sourceBtn=this._sourceBtnBg=this._desTxts=null}i.prototype.destroy.call(this)},f=_,t.LadderLoseAlert=f}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.ladder||(t.ladder={}),n=ui.LadderNotFoundViewUI,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.top=320},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._time=1e4,Laya.timer.loop(1e3,this,this.loopHandler)},o.prototype.offEvt=function(){Laya.timer.clear(this,this.loopHandler),i.prototype.offEvt.call(this)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.loopHandler()},o.prototype.loopHandler=function(){this._time<=0?this.close():(this.txt.text="等待对手进入，请勿退出，"+CommonUtil.msToSS(this._time,!1)+"秒后开始战斗",this._time-=1e3)},s=o,e.LadderNotFoundPanel=s}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._bossIdTable={},this._occAll=new Array,this._arr=GlobalData.getConfig("scene_copy_cloudland");for(var t=0,e=this._arr.length;t<e;t++){var i=this._arr[t];this._bossIdTable[i[2]]=i,this._occAll.push(i[2])}},Object.defineProperty(n.prototype,"occAll",{get:function(){return this._occAll},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"getAwade",{get:function(){return this._arr[0][5]},enumerable:!0,configurable:!0}),i=n,e.SceneCopyCloudlandCfg=i}(modules=modules||{}),function(t){var i,e,n,s,o,a,r;function l(){var t=null!==e&&e.apply(this,arguments)||this;return t._listState=!0,t}i=t.yunmeng||(t.yunmeng={}),n=t.common.SimpleList,s=Laya.Event,o=t.config.SceneCopyCloudlandCfg,a=t.dungeon.DungeonModel,e=ui.YunMengMiJingBossViewUI,__extends(l,e),l.prototype.destroy=function(t){void 0===t&&(t=!0),this.destroyElement(this._list),e.prototype.destroy.call(this,t)},l.prototype.initialize=function(){e.prototype.initialize.call(this),this.zOrder=-1,this.right=6,this.bottom=262,this.closeByOthers=!1,this.layer=3,this._list=n.create(i.YunMengMiJingBossItem,350,40,1,1,0),this._list.width=356,this._list.height=174,this.addChild(this._list),this._list.pos(12,45,!0),this._list.selectedIndex=-1,this._list.canSelectSameItem=!0},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.expandBtn,this,this.expandBtnHandler),this.onAutoEvt(this._list,s.SELECT,this,this.selectHandler),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.lastBoss),this.onAutoGlobalEvt("YUNMENGMIJING_JUDGE_AWARD_UPDATE",this,this.showBossJudgeAward),this.onAutoGlobalEvt("YUNMENGMIJING_JUDGE_AWARD_FINALLY",this,this.showBossJudgeAwardFinally),this.onAutoGlobalEvt("YUNMENGMIJING_CLICK",this,this.disTipsImg)},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._xianLingTipsImgTween&&(this._xianLingTipsImgTween.stop(),this._xianLingTipsImgTween=null)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._firstOpen=!0,this.updateMyRecord(),this._list.selectedIndex=-1,this.tipImg.visible=!0,this._xianLingTipsImgTween&&this._xianLingTipsImgTween.stop(),this._xianLingTipsImgTween=TweenJS.create(this.tipImg).to({y:this.tipImg.y-20},1e3).start().yoyo(!0).repeat(99999999),this.lastBoss()},l.prototype.lastBoss=function(){var t=this._list.datas[this._list.datas.length-1];this._firstOpen&&a.instance.getBossInfoById(t)&&(this._firstOpen=!1,this._list.selectedIndex=this._list.datas.length-1)},l.prototype.disTipsImg=function(){this.tipImg.visible=!1,this._xianLingTipsImgTween&&this._xianLingTipsImgTween.stop()},l.prototype.showBossJudgeAwardFinally=function(t){WindowManager.instance.isOpened(253)||WindowManager.instance.isOpened(254)||(t=t||i.YunMengMiJingModel.instance.allBossJudgeAward)&&WindowManager.instance.open(254,t)},l.prototype.showBossJudgeAward=function(t){WindowManager.instance.isOpened(254)||WindowManager.instance.isOpened(253)||(t=t||i.YunMengMiJingModel.instance.allBossJudgeAward)&&WindowManager.instance.open(253,t)},l.prototype.selectHandler=function(){if(-1!=this._list.selectedIndex){var t=this._list.datas[this._list.selectedIndex];if(t){var e=t;e&&i.YunMengMiJingModel.instance.setSelectTarget(e,!0),console.log("云梦 寻找boss：bossId "+e)}}},l.prototype.expandBtnHandler=function(){this._listState?this._listState=!1:this._listState=!0,this.changUI()},l.prototype.changUI=function(){this._listState?(this.bgImg.height=230,this.bgImg.y=0,this._list.height=174,this._list.y=45,this.titleText.y=12,this.expandBtn.y=19,this.expandBtn.skin="common/btn_tonyong_28.png"):(this.bgImg.height=95,this.bgImg.y=135,this._list.height=41,this._list.y=178,this.titleText.y=145,this.expandBtn.y=152,this.expandBtn.skin="common/btn_tonyong_29.png"),this.updateMyRecord()},l.prototype.updateMyRecord=function(){this._list.datas=o.instance.occAll},l.prototype.close=function(){e.prototype.close.call(this),i.YunMengMiJingModel.instance.getAllBossJudgeAward.length=0},r=l,i.YunMengMiJingBossPanel=r}(modules=modules||{}),function(i){var t,e,s,n,o,a,r,l,h;function c(){return null!==e&&e.apply(this,arguments)||this}t=i.yunmeng||(i.yunmeng={}),s=i.yunmeng.YunMengMiJingModel,n=i.dungeon.DungeonModel,o=ui.YunMengMiJingInformationViewUI,a=i.common.CustomClip,r=i.vip.VipModel,l=i.config.PrivilegeCfg,e=o,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.right=7,this.bottom=500,this.closeByOthers=!1,this.zOrder=-1,this.layer=3,this._addTimesBtnClip=a.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.addBtn.addChild(this._addTimesBtnClip),this._addTimesBtnClip.pos(-10,-10),this._addTimesBtnClip.visible=!1},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoGlobalEvt("YUNMENGMIJING_UPDATE",this,this.setValueTxt1),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.loopHandler),this.onAutoGlobalEvt("UPDATE_PRIVILEGE",this,this.onUpdatePrivilege)},c.prototype.onOpened=function(){t.YunMengMiJingCtrl.instance.GetCloudland(),e.prototype.onOpened.call(this),this.setValueTxt1(),this.updateTime(),this.loopHandler(),this.Text1.text=s.instance._nameYunMeng},c.prototype.onUpdatePrivilege=function(){var t=r.instance.getPrivilegeInfoById(70)[1],e=l.instance.getVipInfoByLevel(r.instance.vipLevel,70);0<(e&&e[1]||0)-t&&s.instance.remainTimes<s.instance.totalCiShu?(this._addTimesBtnClip.isPlaying||a.thisPlay(this._addTimesBtnClip),this._addTimesBtnClip.visible=!0):(a.thisStop(this._addTimesBtnClip),this._addTimesBtnClip.visible=!1)},c.prototype.getBtnHandler=function(){WindowManager.instance.open(226,s.instance.ItemDate)},c.prototype.addBtnHandler=function(){WindowManager.instance.open(59,70)},c.prototype.loopHandler=function(){var t=n.instance.getCopySceneStateByType(21);if(t){var e=t[3];this.timeText.text=""+i.common.CommonUtil.timeStampToHHMMSS(e)}},c.prototype.updateTime=function(){Laya.timer.loop(1e3,this,this.loopHandler)},c.prototype.setValueTxt1=function(){var t=s.instance.totalCiShu,e=s.instance.remainTimes;this.drawNum.text=e+"/"+t;var i=0==e?"#ff3e3e":"#55ff28";this.drawNum.color=i;var n=this.addBtn.width+this.drawNum.width+this.img1.width;this.img1.x=.5*(this.width-n),this.drawNum.x=this.img1.x+this.img1.width,this.addBtn.x=this.drawNum.x+this.drawNum.width+2,this.onUpdatePrivilege()},c.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},h=c,t.YunMengMiJingInformationPanel=h}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c,p,u,d,y;function g(){return null!==i&&i.apply(this,arguments)||this}e=t.yunmeng||(t.yunmeng={}),n=t.common.SimpleList,s=Laya.Event,o=t.common.BtnGroup,a=t.dungeon.DungeonCtrl,r=t.redPoint.RedPointCtrl,l=t.common.CustomClip,h=t.config.BlendCfg,c=t.config.SceneCopyCloudlandCfg,p=t.yunmeng.YunMengMiJingModel,u=t.vip.VipModel,d=t.config.PrivilegeCfg,i=ui.YunMengMiJingViewUI,__extends(g,i),g.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._btnGroup=new o,this._btnGroup.setBtns(this.singleBoss,this.multiBoss,this.yunMengBoss),this._list=n.create(e.YunMengItem1,100,122,1,5,20),this._list.width=620,this._list.height=125,this.addChild(this._list),this._list.pos(49,655,!0),this.initializeClip(),this.regGuideSpr(59,this.singleBoss),this.regGuideSpr(61,this.multiBoss),this._addTimesBtnClip=l.createAndPlay("assets/effect/plus.atlas","plus",8,!1),this.addChild(this._addTimesBtnClip),this._addTimesBtnClip.pos(this.addBtn.x-10,this.addBtn.y-10),this._addTimesBtnClip.visible=!1},g.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnGroup.selectedIndex=2,this.showHdTime(),this.showRewardList(),this.showDrawNum(),r.instance.setRPProperty("yunMengBossRP",p.instance.getState()),PlatParams.isCloseRecharge&&(this.addBtn.visible=!1,this._addTimesBtnClip.visible=!1)},g.prototype.destroy=function(t){void 0===t&&(t=!0),this.destroyElement(this._list),this.destroyElement(this._tenBtnBtnClip),this._addTimesBtnClip=this.destroyElement(this._addTimesBtnClip),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),i.prototype.destroy.call(this,t)},g.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,s.CHANGE,this,this.changeHandler),this.onAutoClick(this.addBtn,this,this.addBtnHandler),this.onAutoClick(this.joinBtn,this,this.joinBtnHandler),t.redPoint.RedPointCtrl.instance.registeRedPoint(this.singleBossDot,["singleBossRP"]),t.redPoint.RedPointCtrl.instance.registeRedPoint(this.multiBossDot,["multiBossRP"]),t.redPoint.RedPointCtrl.instance.registeRedPoint(this.yunMengBossDot,["yunMengBossRP"]),this.onAutoGlobalEvt("YUNMENGMIJING_UPDATE",this,this.showDrawNum),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoGlobalEvt("UPDATE_PRIVILEGE",this,this.onUpdatePrivilege),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},g.prototype.updatePlatChangeRecharge=function(){this.addBtn.visible=!PlatParams.isCloseRecharge,this._addTimesBtnClip.visible=!PlatParams.isCloseRecharge},g.prototype.onUpdatePrivilege=function(){var t=u.instance.getPrivilegeInfoById(70)[1],e=d.instance.getVipInfoByLevel(u.instance.vipLevel,70);0<(e&&e[1]||0)-t&&p.instance.remainTimes<p.instance.totalCiShu&&!PlatParams.isCloseRecharge?(this._addTimesBtnClip.isPlaying||l.thisPlay(this._addTimesBtnClip),this._addTimesBtnClip.visible=!0):(l.thisStop(this._addTimesBtnClip),this._addTimesBtnClip.visible=!1)},g.prototype.helpHandler=function(){CommonUtil.alertHelp(20041)},g.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?(WindowManager.instance.open(33),this._btnGroup.selectedIndex=2):1===this._btnGroup.selectedIndex&&(WindowManager.instance.open(40),this._btnGroup.selectedIndex=2)},g.prototype.joinBtnHandler=function(){a.instance.reqEnterScene(2151)},g.prototype.addBtnHandler=function(){WindowManager.instance.open(59,70)},g.prototype.showDrawNum=function(){var t=p.instance.totalCiShu,e=p.instance.remainTimes;this.drawNum.text=e+"/"+t;var i=0==e?"#ff3e3e":"#168a17";this.drawNum.color=i;var n=new Array;n.push([this.Text1,1,0]),n.push([this.Img1,2,0]),n.push([this.drawNum,1,0]),n.push([this.addBtn,2,0]),CommonUtil.adaptationImgAndText(n,this.width,0,"center"),p.instance.getState()?(this._tenBtnBtnClip.visible=!0,this._tenBtnBtnClip.play()):(this._tenBtnBtnClip.visible=!1,this._tenBtnBtnClip.stop()),this.onUpdatePrivilege()},g.prototype.showHdTime=function(){this.hdNameText.text=h.instance.getCfgById(29103)[2][0];var t=new Array;t.push([this.hdNameText,1,0]),t.push([this.hdTimeText,1,0]),CommonUtil.adaptationImgAndText(t,this.width,0,"center")},g.prototype.showRewardList=function(){this._list.datas=c.instance.getAwade;var t=this._list.datas.length,e=100*(t=5<t?5:t)+(t-1)*this._list.spaceX;this._list.x=(this.width-e)/2},g.prototype.initializeClip=function(){this._tenBtnBtnClip=CommonUtil.creatEff(this,"btn_light",15),this._tenBtnBtnClip.scale(1,1,!0),this._tenBtnBtnClip.pos(260,883,!0)},y=g,e.YunMengMiJingPanel=y}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){var t=null!==i&&i.apply(this,arguments)||this;return t._timer=0,t}e=t.yunmeng||(t.yunmeng={}),n=t.common.SimpleList,s=t.config.BlendCfg,o=t.dungeon.DungeonCtrl,i=ui.YunMengMiJingResultAlertUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(e.YunMengItem,100,122,1,4,30),this._list.width=520,this._list.height=289,this.addChild(this._list),this._list.pos(70,117,!0)},r.prototype.close=function(t,e){i.prototype.close.call(this,t,e),o.instance.reqEnterScene(0),Laya.timer.clear(this,this.loopHandler)},r.prototype.destroy=function(){this.destroyElement(this._list),i.prototype.destroy.call(this)},r.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t&&(this._list.datas=t),this._timer=.001*s.instance.getCfgById(10303)[1][0],Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close)},r.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.loopHandler=function(){this.okBtn.label="确定("+this._timer+")",this._timer<0&&this.close(),this._timer--},a=r,e.YunMengMiJingResultAlert=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.yunmeng||(t.yunmeng={}),n=t.common.SimpleList,i=ui.YunMengMiJingRewordAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(e.YunMengItem,100,122,1,4,30),this._list.width=520,this._list.height=230,this.addChild(this._list),this._list.pos(80,129,!0)},o.prototype.destroy=function(){this.destroyElement(this._list),i.prototype.destroy.call(this)},o.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t&&(this._list.datas=t),this.noTips.visible=!(t&&0<t.length)},s=o,e.YunMengMiJingRewordAlert=s}(modules=modules||{}),function(h){var c,i,t,p,e,u,n;function s(){return null!==i&&i.apply(this,arguments)||this}c=h.yunmeng||(h.yunmeng={}),t=ui.FirstWinViewUI,p=h.config.BlendCfg,e=h.common.SimpleList,u=h.config.MonsterResCfg,i=t,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=e.create(c.YunMengItem,100,122,1,4,26.5),this._list.width=420,this._list.height=200,this.addChild(this._list),this._list.pos(150,775,!0),this.recordHtml.visible=!0,this.tipTxt.text="最后一击: ",this.desTxt.text="给予BOSS最后一击可获得最后一击宝箱",CommonUtil.setHTMLPro(this.recordHtml,"#ffffff","SimHei",24,"center")},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=p.instance.getCfgById(10303)[1][0]},s.prototype.close=function(t,e){i.prototype.close.call(this,t,e),this.overCloseHandler()},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},s.prototype.overCloseHandler=function(){if(Laya.timer.clear(this,this.loopHandler),this.isShowNextReward()&&!WindowManager.instance.isOpened(253)&&!WindowManager.instance.isOpened(254)){var t=c.YunMengMiJingModel.instance.allBossJudgeAward;if(t&&1<t.length){var e=t[2];1==e?GlobalData.dispatcher.event("YUNMENGMIJING_JUDGE_AWARD_FINALLY",[t]):3==e&&GlobalData.dispatcher.event("YUNMENGMIJING_JUDGE_AWARD_UPDATE",[t])}}},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t&&1<t.length&&this.ShowRewardParam(t)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.isShowNextRewardHandler),Laya.timer.loop(1e3,this,this.loopHandler)},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.isShowNextRewardHandler=function(){this.close()},s.prototype.isShowNextReward=function(){return 0<c.YunMengMiJingModel.instance.getAllBossJudgeAward.length},s.prototype.ShowRewardParam=function(t){Laya.timer.clear(this,this.loopHandler);var e=t[0],i=t[1],n=t[3],s=t[5],o=t[6],a=t[4];this.headIcon.setInfo(s,n,o),this.nameTxt.text=a,this.nameTxt.color=a==h.player.PlayerModel.instance.roleName?"#50ff28":"#ffffff",h.common.CommonUtil.centerChainArr(this.width,[this.tipTxt,this.nameTxt]),c.YunMengMiJingModel.instance.getCfgByid(i);var r=u.instance.getMonsterName(i),l="秘境BOSS";l+="<span style='color:#b15315;'>【Lv."+u.instance.getMonsterLevel(i)+r+"】</span>",l+="参与击败奖励",this.recordHtml.innerHTML=l,this._list.datas=e,this._duration=p.instance.getCfgById(10303)[1][0],this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler)},s.prototype.loopHandler=function(){0===this._duration&&this.close(),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},n=s,c.YunMengMiJingWinAlert=n}(modules=modules||{}),function(t){var r,i,e,l,h,n;function s(){return null!==i&&i.apply(this,arguments)||this}r=t.yunmeng||(t.yunmeng={}),e=t.common.SimpleList,l=t.config.MonsterResCfg,h=t.config.BlendCfg,i=ui.YunMengMiJingAwardAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=e.create(r.YunMengItem,100,122,1,4,30),this._list.width=580,this._list.height=128,this.addChild(this._list),this._list.pos(46,252,!0),this.zOrder=1,CommonUtil.setHTMLPro(this.recordHtml,"#1F304d","SimHei",26)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._duration=h.instance.getCfgById(10303)[1][0]},s.prototype.close=function(t,e){i.prototype.close.call(this,t,e),this.overCloseHandler(),Laya.timer.clear(this,this.loopHandler)},s.prototype.destroy=function(){this.destroyElement(this._list),i.prototype.destroy.call(this)},s.prototype.overCloseHandler=function(){if(Laya.timer.clear(this,this.loopHandler),this.isShowNextReward()&&!WindowManager.instance.isOpened(253)&&!WindowManager.instance.isOpened(254)){var t=r.YunMengMiJingModel.instance.allBossJudgeAward;if(t&&1<t.length){var e=t[2];1==e?GlobalData.dispatcher.event("YUNMENGMIJING_JUDGE_AWARD_FINALLY",[t]):3==e&&GlobalData.dispatcher.event("YUNMENGMIJING_JUDGE_AWARD_UPDATE",[t])}}},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),t&&1<t.length&&this.ShowRewardParam(t)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.isShowNextRewardHandler),this.onAutoClick(this.closeBtn,this,this.isShowNextRewardHandler),Laya.timer.loop(1e3,this,this.loopHandler)},s.prototype.isShowNextRewardHandler=function(){this.close()},s.prototype.isShowNextReward=function(){return 0<r.YunMengMiJingModel.instance.getAllBossJudgeAward.length},s.prototype.ShowRewardParam=function(t){Laya.timer.clear(this,this.loopHandler);var e=t[0],i=t[1];if(i){r.YunMengMiJingModel.instance.getCfgByid(i);var n=l.instance.getMonsterName(i),s="您给予秘境BOSS";s+="<span style='color:#b15315;font-size: 26px'>【Lv."+l.instance.getMonsterLevel(i)+" "+n+" 】</span>",s+="最后一击,获得以下奖励",this.recordHtml.innerHTML=s}this._list.datas=e;var o=this._list.datas.length,a=100*(o=4<o?4:o)+(o-1)*this._list.spaceX;this._list.x=(this.width-a)/2,this._duration=h.instance.getCfgById(10303)[1][0],this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler)},s.prototype.loopHandler=function(){0===this._duration&&this.close(),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},n=s,r.YunMengMiJingAwardAlert=n}(modules=modules||{}),function(t){var p,e,i,n,s,o,u,a;function r(){return null!==e&&e.apply(this,arguments)||this}p=t.peakDuel||(t.peakDuel={}),i=ui.PeakDuelRankAlertUI,n=t.common.SimpleList,s=t.common.BtnGroup,o=t.common.AvatarClip,u=t.config.TiantiCfg,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=n.create(p.PeakDuelRankItem2,571,89),this._list.pos(44,554,!0),this._list.size(571,204),this.addChild(this._list),this._group=new s,this._group.setBtns(this.group_1,this.group_2),this._leftAvatar=this.createRole(),this._leftAvatar.pos(162,459),this._rightAvatar=this.createRole(),this._rightAvatar.pos(497,459),this._centerAvatar=this.createRole(),this._centerAvatar.pos(330,342)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._group,"change",this,this.groupHandler),this.onAutoGlobalEvt("PEAK_DUEL_RANK_UPDATE",this,this.update)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),WindowManager.instance.close(206),this._group.selectedIndex=1,p.PeakDuelCtrl.instance.getDianfengRank(),this.update()},r.prototype.update=function(){if(p.PeakDuelModel.instance.ranks){var t=p.PeakDuelModel.instance.ranks[0]?p.PeakDuelModel.instance.ranks[0][2]:[];(t=3<t.length?t.slice(3):[]).length=29,this._list.datas=t,this.setRoleInfo(0,this._centerAvatar,this.cNameTxt,this.cFightTxt,this.cNoneTxt,this.cNoneImg),this.setRoleInfo(1,this._leftAvatar,this.lNameTxt,this.lFightTxt,this.lNoneTxt,this.lNoneImg),this.setRoleInfo(2,this._rightAvatar,this.rNameTxt,this.rFightTxt,this.rNoneTxt,this.rNoneImg),this.observationItem1.data=[[this._centerAvatar,0]],this.observationItem2.data=[[this._leftAvatar,0]],this.observationItem3.data=[[this._rightAvatar,0]]}},r.prototype.setRoleInfo=function(t,e,i,n,s,o){var a=p.PeakDuelModel.instance.ranks[0]?p.PeakDuelModel.instance.ranks[0][0][t]:null;if(a){var r=a[1]||1e3+a[7],l=a[2],h=a[3];i.text=p.PeakDuelModel.instance.ranks[0][2][t][2];var c=u.instance.getCfgById(p.PeakDuelModel.instance.ranks[0][2][t][10])[1];n.text="段位:"+c,e.reset(r||1e3+PlayerModel.instance.occ,l,h)}i.visible=n.visible=e.visible=!!a,o.visible=s.visible=!a},r.prototype.groupHandler=function(){0===this._group.selectedIndex&&WindowManager.instance.open(206)},r.prototype.createRole=function(){var t=o.create(1024,1024,1024);return this.addChildAt(t,2),t.anchorX=.5,t.anchorY=.5,t.mouseEnabled=!1,t.avatarRotationY=180,t},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._group=this.destroyElement(this._group),this._centerAvatar=this.destroyElement(this._centerAvatar),this._leftAvatar=this.destroyElement(this._leftAvatar),this._rightAvatar=this.destroyElement(this._rightAvatar),this.observationItem1=this.destroyElement(this.observationItem1),this.observationItem2=this.destroyElement(this.observationItem2),this.observationItem3=this.destroyElement(this.observationItem3),e.prototype.destroy.call(this)},a=r,p.PeakDuelRankAlert=a}(modules=modules||{}),function(t){var e,i,n;function s(){this.init()}e=t.config||(t.config={}),i=t.peakDuel.PeakDuelModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._arr=GlobalData.getConfig("dianfeng_awards")},Object.defineProperty(s.prototype,"cfgs",{get:function(){return this._arr},enumerable:!0,configurable:!0}),s.prototype.getFieldsIndexByGroup=function(t){void 0===t&&(t=i.instance.groupIndex);var e=1;return 1===t?e=2:2===t&&(e=3),e},s.prototype.getCfgByRank=function(t){for(var e=0,i=this._arr;e<i.length;e++){var n=i[e],s=n[0];if(t>=s[0]&&t<=s[1])return n}throw new Error("rank---\x3e"+t+" 排名超出配置范围 DianfengAwardsCfg")},n=s,e.DianfengAwardsCfg=n}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.peakDuel||(t.peakDuel={}),n=ui.PeakDuelAwardAlertUI,s=t.common.CustomList,o=t.config.DianfengAwardsCfg,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=s.create("v",46,170,570,517,e.PeakDuelAwardItem),this.addChild(this._list);var t=[];t.length=o.instance.cfgs.length,this._list.datas=t},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},a=r,e.PeakDuelAwardAlert=a}(modules=modules||{}),function(t){var a,e,i,n,s,o,r,l;function h(){return null!==e&&e.apply(this,arguments)||this}a=t.peakDuel||(t.peakDuel={}),i=ui.PeakDuelViewUI,n=t.common.BtnGroup,s=t.common.CustomList,o=t.notice.SystemNoticeManager,r=t.config.BlendCfg,e=i,__extends(h,e),h.prototype.initialize=function(){var i=this;e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._model=a.PeakDuelModel.instance,this._widths=[38,175,309,439,599],this._list=s.create("v",38,110,644,538,a.PeakDuelItem,3),this.addChild(this._list),this._tab=new n,this._tab.setBtns(this.tab_1,this.tab_2,this.tab_3),this._tickTab=new n,this._tickTab.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1),this._tickTab.setBtns(this.tickImg_1,this.tickImg_2,this.tickImg_3,this.tickImg_4,this.tickImg_5),this._endImgs=[this.endImg_1,this.endImg_2,this.endImg_3,this.endImg_4,this.endImg_5],this._timeTxts=[this.timeTxt_1,this.timeTxt_2,this.timeTxt_3,this.timeTxt_4,this.timeTxt_5],this._stageTxts=[this.stageTxt_1,this.stageTxt_2,this.stageTxt_3,this.stageTxt_4,this.stageTxt_5],this._stageTimes=r.instance.getCfgById(62007)[2],this._timeTxts.forEach(function(t,e){t.text=""+i._stageTimes[e]}),CommonUtil.setHTMLPro(this.tipTxt,"#3a5385","SimHei",26),this.tipTxt.mouseEnabled=!1,this.tipTxt.style.wordWrap=!1,this._time=0,this.addChild(this.closeBtn)},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.awardBtn,WindowManager.instance,WindowManager.instance.open,[420]),this.onAutoEvt(this._tab,"change",this,this.changeShow),this.onAutoEvt(this._tickTab,"change",this,this.changeShow),this.onAutoClick(this.btnGroup_1,this,this.btnGroup_1Handler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoClick(this.rankImg,this,this.rankImgHandler),this.onAutoGlobalEvt("PEAK_DUEL_PLAYER_UPDATE",this,this.setStage),this.onAutoGlobalEvt("PEAK_DUEL_INFO_UPDATE",this,this.setCount),this.onAutoGlobalEvt("DUNGEON_SCENE_STATE_UPDATE",this,this.setState),this.onAutoClick(this.xdBtn,this,function(){WindowManager.instance.open(1292)}),this.regAutoRP(this.rpImg,["arenaRP"]),this.regAutoRP(this.xdRp,["immortalContest"])},h.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._copyState=-1,this._tab.selectedIndex=0,this.setStage(),this.setState()},h.prototype.setStage=function(t){if(null==t){var e=this._model.stage,i=-1===e?0:e;this._tickTab.selectedIndex=i;var n=this._model.state;if(console.log("巅峰竞技面板---\x3e阶段"+e+"状态"+n),10!==this._model.schedule){this.goingTxt.visible=!1;for(var s=0;s<this._stageTxts.length;s++)this._timeTxts[s].visible=this._endImgs[s].visible=!1,this._stageTxts[s].color="#3a5385",s<e?this._endImgs[s].visible=!0:s===e?1===n?this._endImgs[s].visible=!0:(this.goingTxt.visible=!0,this.goingTxt.x=this._timeTxts[s].x,this._stageTxts[s].color="#b15315"):(this._timeTxts[s].visible=!0,this._endImgs[s].visible=!1);this.barImg.width=this._widths[i];var o=a.PeakDuelUtil.stageNames[i];-1===n?this.tipTxt.innerHTML=o+"将于"+CommonUtil.formatHtmlStrByColor("#168a17",this._stageTimes[i])+"开始":0===n?(this._time=this._model.time,Laya.timer.loop(1e3,this,this.loopHandler,[o]),this.loopHandler()):1===n?a.PeakDuelUtil.stageNames[e+1]?(this._time=this._model.time,this._recordTime=this._time-GlobalData.serverTime,Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler()):(Laya.timer.clear(this,this.loopHandler),this.tipTxt.innerHTML=o+"已结束"):this.tipTxt.innerHTML="状态异常 state ->"+n,this.setGold(),this.update()}else WindowManager.instance.open(425)}},h.prototype.setState=function(){var t=DungeonModel.instance.getCopySceneStateByType(32)[2];this._copyState=t,2===this._copyState&&-1===this._model.schedule&&(this._recordTime=this._model.time-GlobalData.serverTime,Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler())},h.prototype.setGold=function(){1===this._model.state?this.prizeTxt.text=this._model.calcIncome(this._model.stage).toString():this.prizeTxt.text=this._model.calcIncome(this._model.stage-1).toString(),CommonUtil.chainArr([this.prizeTxt,this.goldImg],5)},h.prototype.loopHandler=function(){if(-1!==this._model.schedule)if(0===this._model.state){if(this._time<=GlobalData.serverTime)return void Laya.timer.clear(this,this.loopHandler)}else if(1===this._model.state&&this._recordTime<=0)return void Laya.timer.clear(this,this.loopHandler);var t;2===this._copyState&&-1===this._model.schedule||1===this._model.state&&4!==this._model.stage?(t="正在准备赛程，"+Math.floor(this._recordTime/1e3)+"秒后开启支持",this._recordTime-=1e3):t="本轮支持时间:"+CommonUtil.formatHtmlStrByColor("#168a17",""+CommonUtil.timeStampToMMSS(this._time)),this.tipTxt.innerHTML=t},h.prototype.setCount=function(){var t=this._model.getTimeByStage(this._model.stage),e=this._model.betTime[this._tickTab.selectedIndex];this.countTxt.text=e-t+"/"+e,this.countTxt.color=e<=t?"#ff3e3e":"#168a17"},h.prototype.changeShow=function(){if(-1!==this._tab.selectedIndex&&-1!==this._tickTab.selectedIndex){this._model.stageIndex=this._tickTab.selectedIndex,this._model.groupIndex=this._tab.selectedIndex;var t=this._tickTab.oldSelectedBtn,e=this._tickTab.selectedBtn;t&&(t.skin="peak_duel/btn_xbdh_gx0.png"),e&&(e.skin="peak_duel/btn_xbdh_gx1.png"),this.update(),this.setCount()}},h.prototype.canSelectHandler=function(t){return-1===this._model.stage&&0===t||!(t>this._model.stage)||(o.instance.addNotice("未到比赛时间",!0),!1)},h.prototype.update=function(){var e=this._tickTab.selectedIndex;if(0<=e&&e<=4){var t=a.PeakDuelModel.instance.getPlayersByStageGroup(e,this._tab.selectedIndex);if(t){try{t.length=a.PeakDuelUtil.stageNums[e]}catch(t){console.log("stage--\x3e"+e+" PeakDuelUtil.stageNums[stage] ---\x3e"+a.PeakDuelUtil.stageNums[e])}this._list.datas=t}}},h.prototype.btnGroup_1Handler=function(){WindowManager.instance.open(289)},h.prototype.ruleBtnHandler=function(){CommonUtil.alertHelp(20069)},h.prototype.rankImgHandler=function(){WindowManager.instance.open(481)},h.prototype.destroy=function(){this._tab=this.destroyElement(this._tab),this._list=this.destroyElement(this._list),this._tickTab=this.destroyElement(this._tickTab),this._endImgs=this.destroyElement(this._endImgs),this._stageTxts=this.destroyElement(this._stageTxts),this._timeTxts=this.destroyElement(this._timeTxts),this._model=null,this._widths.length=0,this._widths=null,this._stageTimes=null,e.prototype.destroy.call(this)},l=h,a.PeakDuelPanel=l}(modules=modules||{}),function(t){var m,e,i,n,s,o,v,b,a;function r(){return null!==e&&e.apply(this,arguments)||this}m=t.peakDuel||(t.peakDuel={}),i=ui.PeakDuelRankViewUI,n=t.common.CustomList,s=t.common.BtnGroup,o=t.common.AvatarClip,v=t.config.DianfengAwardsCfg,b=t.config.TiantiCfg,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._tab=new s,this._tab.setBtns(this.tab_1,this.tab_2,this.tab_3),this._list=n.create("v",42,504,635,378,m.PeakDuelRankItem),this.addChild(this._list),this._items=[this.item_1,this.item_2,this.item_3],this._avatarClip=o.create(1280,1280,1280),this.addChildAt(this._avatarClip,5),this._avatarClip.pos(210,420,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._tab,"change",this,this.update),this.onAutoClick(this.btnGroup_1,this,this.btnGroup_1Handler),this.onAutoClick(this.xdBtn,this,function(){WindowManager.instance.open(1292)}),this.onAutoGlobalEvt("PEAK_DUEL_RANK_UPDATE",this,this.update),this.regAutoRP(this.rpImg,["arenaRP"]),this.regAutoRP(this.xdRp,["immortalContest"])},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._tab.selectedIndex=0},r.prototype.update=function(){var t=this._tab.selectedIndex;if(-1!==t){m.PeakDuelModel.instance.groupIndex=t;var e=m.PeakDuelModel.instance.ranks[t];if(e){var i=0===t?"天":1===t?"地":"人";this.txt.text=i+"组第一奖励";var n=e[2];if(n&&n.length){var s=n.concat().slice(1);s.length=31,this._list.datas=s,this.showState=!0}else this.showState=!1;var o=e[0][0],a=n[0];if(o&&a){var r=o[1],l=o[2],h=o[3],c=o[5],p=o[10];this._avatarClip.reset(r||1e3+PlayerModel.instance.occ,l,h,c,0,p);var u=a[2];this.nameTxt.text=u;var d=b.instance.getCfgById(a[10])[1];this.rankTxt.text="段位:"+d;var y=e[1];this.countTxt.text=""+y;var g=v.instance.cfgs[0],f=v.instance.getFieldsIndexByGroup(),_=CommonUtil.formatItemData(g[f]);CommonUtil.showItems(this._items,_),this.observationItem.setRot(),this.observationItem.data=[[this._avatarClip,0]]}}else this.showState=!1}},Object.defineProperty(r.prototype,"showState",{set:function(t){this.noBox.visible=!t,this._list.visible=this.nameTxt.visible=this.rankTxt.visible=this.countTxt.visible=this.txt.visible=this.item_1.visible=this.item_2.visible=this.item_3.visible=this.hidden_1.visible=this.hidden_2.visible=this.hidden_3.visible=this.hidden_4.visible=this.hidden_5.visible=this.hidden_6.visible=this._avatarClip.visible=t},enumerable:!0,configurable:!0}),r.prototype.btnGroup_1Handler=function(){WindowManager.instance.open(289)},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._items=this.destroyElement(this._items),this._tab=this.destroyElement(this._tab),this._avatarClip=this.destroyElement(this._avatarClip),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this)},a=r,m.PeakDuelRankPanel=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("festival_pay_con"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e][0];this._tab[n]=t[e]}},n.prototype.getCfgsById=function(t){return this._tab[t]},i=n,e.FestivalPayConCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.single_dog_continuous_pay||(t.single_dog_continuous_pay={}),n=t.common.CommonUtil,s=t.funcOpen.FuncOpenModel,o=t.common.SimpleList,i=ui.NationalDayJQViewUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=o.create(e.SingleDogContinuousPayItem,640,168,1,1,0,6),this._list.width=640,this._list.height=665,this.addChildAt(this._list,4),this._list.x=40,this._list.y=300,this._list.visible=!0},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FIGHT_TALISMAN_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("GLOVES_INFO_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},r.prototype.showUI=function(){e.SingleDogContinuousPayModel.instance.rewardList.sort(this.sortFunc.bind(this)),this._list.datas=e.SingleDogContinuousPayModel.instance.rewardList,this.setActivitiTime(),this.jinDuText.text="今日已充:"+e.SingleDogContinuousPayModel.instance.moneyAcc},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.bgImg.skin="single_dog/image_dssd_06.jpg",this.titleTxt.text="连续充值",this.tipsHTML.innerHTML="\n            <span style='color:#ffffff;font-size:22px;font-family:SimHei;'>\n            活动期间,\n            </span>\n            <span style='color:#50ff28;font-size:22px;font-family:SimHei;'>\n            连续多日\n            </span>\n            <span style='color:#ffffff;font-size:22px;font-family:SimHei;'>\n            每日充值达到指定金额,即可领取豪礼\n            </span>\n            ",this.jinDuText.visible=!0,this.showUI(),this.showUI1()},r.prototype.showUI1=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==t.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},r.prototype.okBtnHandler=function(){0!=t.first_pay.FirstPayModel.instance.giveState?t.fight_talisman.FightTalismanModel.instance.state?-1==t.gloves.GlovesModel.instance.state?WindowManager.instance.open(387):t.money_cat.MoneyCatModel.instance.state?!t.halo.HaloModel.instance.isHalo()&&t.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==t.zhizun.ZhizunModel.instance.state&&WindowManager.instance.open(351):WindowManager.instance.open(381):WindowManager.instance.open(379):WindowManager.instance.open(118)},r.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=t[1],o=e[1];return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},r.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=s.instance.getFuncIsOpen(323);e.SingleDogContinuousPayModel.instance.restTm>=GlobalData.serverTime&&t?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},r.prototype.activityHandler=function(){this.activityText.text=""+n.timeStampDDHHMMToHHMMSS(e.SingleDogContinuousPayModel.instance.restTm),e.SingleDogContinuousPayModel.instance.restTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},r.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a=r,e.SingleDogContinuousPayPanel=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="public_survey/image_gcsd_07.jpg",t.titleTxt.text="每日累充",t}e=t.single_dog_cumulate_pay||(t.single_dog_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SingleDogCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.SingleDogCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(324)},s=o,e.SingleDogCumulatePayPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.typeNum=4,t.bgImg.skin="single_dog/image_dssd_11.jpg",t.titleTxt.text="七日累消",t}e=t.single_dog_seven_days_consume||(t.single_dog_seven_days_consume={}),n=t.funcOpen.FuncOpenModel,i=t.festival.SevenDaysConsumeBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SingleDogSevenDaysConsumeModel.instance.rewardList},o.prototype.getItemClass=function(){return e.SingleDogSevenDaysConsumeItem},o.prototype.getRestTime=function(){return e.SingleDogSevenDaysConsumeModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(325)},s=o,e.SingleDogSevenDaysConsumePanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.titleTxt.text="七日累充",t.bgImg.skin="single_dog/image_dssd_14.jpg",t}e=t.single_dog_seven_days_pay||(t.single_dog_seven_days_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.SevenDaysPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SingleDogSevenDaysPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.SingleDogSevenDaysPayItem},o.prototype.getRestTime=function(){return e.SingleDogSevenDaysPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(326)},s=o,e.SingleDogSevenDaysPayPanel=s}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="single_dog/image_dssd_13.jpg",t}a=t.single_dog_single_pay||(t.single_dog_single_pay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.SingleDogSinglePayModel.instance.getState(t[1],i),o=a.SingleDogSinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.SingleDogSinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.SingleDogSinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(327)},n=s,a.SingleDogSinglePayPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.instructionsText.text="每日累充、每日单笔活动可获得大量",t.textBgImg.skin="single_dog/txt_dssd_02.png",t.titleTxt.color="#b15315",t.titleTxt.text="单身寻宝",t}e=t.single_dog_treasure||(t.single_dog_treasure={}),n=t.funcOpen.FuncOpenModel,i=t.festival.TreasureBasePanel,__extends(o,i),Object.defineProperty(o.prototype,"getRestTm",{get:function(){return e.SingleDogTreasureModel.instance._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getState",{get:function(){return e.SingleDogTreasureModel.instance._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getScore",{get:function(){return e.SingleDogTreasureModel.instance._score},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getId",{get:function(){return e.SingleDogTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xianyu",{get:function(){return e.SingleDogTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oneNum",{get:function(){return e.SingleDogTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"twoNum",{get:function(){return e.SingleDogTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"threeNum",{get:function(){return e.SingleDogTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),o.prototype.getgRade=function(){return e.SingleDogTreasureModel.instance.getgRade()},o.prototype.getSelfBroadcast=function(){return e.SingleDogTreasureModel.instance.getSelfBroadcast()},o.prototype.callBakFunction=function(t){e.SingleDogTreasureModel.instance.callBakFunction(t)},o.prototype.getClassCtrl=function(t){e.SingleDogTreasureCtrl.instance.festivalNationalXunbao(t)},o.prototype.getConsumeRank=function(){e.SingleDogTreasureCtrl.instance.GetNationalXunbaoScoreList(),e.SingleDogTreasureCtrl.instance.GetNationalXunbaoScoreAndState()},o.prototype.getShuJu=function(){e.SingleDogTreasureCtrl.instance.GetNationalXunbaoBroadcastRecords()},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(328)},o.prototype.getNationalXunbaoScoreAward=function(){e.SingleDogTreasureCtrl.instance.getNationalXunbaoScoreAward()},o.prototype.openBtnHandler=function(){WindowManager.instance.open(533)},o.prototype.openBtnHandler1=function(){WindowManager.instance.open(534)},o.prototype.openBtnHandler2=function(){WindowManager.instance.open(530)},o.prototype.openBtnHandler3=function(t){WindowManager.instance.open(535,[t,this._type])},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=e.SingleDogTreasureModel.instance.xunBaoType,this.festivalType=e.SingleDogTreasureModel.instance.festivalType},s=o,e.SingleDogTreasurePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_treasure||(t.single_dog_treasure={}),i=t.festival.TreasureRankBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.SingleDogTreasureRankItem},s.prototype.getRewardStart=function(t){return e.SingleDogTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.SingleDogTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),n=s,e.SingleDogTreasureRankAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_treasure||(t.single_dog_treasure={}),i=t.festival.TreasureRankAwardBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.SingleDogTreasureRankAwardItem},Object.defineProperty(s.prototype,"getStr",{get:function(){return"庆典"},enumerable:!0,configurable:!0}),s.prototype.getNationalXunbaoRank=function(){e.SingleDogTreasureCtrl.instance.getNationalXunbaoRank()},Object.defineProperty(s.prototype,"myNodeListByObjId",{get:function(){return e.SingleDogTreasureModel.instance._myNodeListByObjId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.SingleDogTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.SingleDogTreasureRankAwardAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_treasure||(t.single_dog_treasure={}),i=t.festival.TreasureBaseAlert,__extends(s,i),s.prototype.callBakFunction=function(t){e.SingleDogTreasureModel.instance.callBakFunction(function(){e.SingleDogTreasureCtrl.instance.festivalNationalXunbao(t)})},Object.defineProperty(s.prototype,"getId",{get:function(){return e.SingleDogTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xianyu",{get:function(){return e.SingleDogTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"oneNum",{get:function(){return e.SingleDogTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"twoNum",{get:function(){return e.SingleDogTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"threeNum",{get:function(){return e.SingleDogTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),n=s,e.SingleDogTreasureAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="single_dog/image_dssd_18.jpg",t}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SingleDogFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),n=s,e.SingleDogFestConLoginPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.ConvertBasePanel,__extends(s,i),Object.defineProperty(s.prototype,"itemId1",{get:function(){return 15040005},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemId2",{get:function(){return 15050005},enumerable:!0,configurable:!0}),s.prototype.getItemClass=function(){return e.SingleDogFestConvertItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),s.prototype.goHandler=function(){WindowManager.instance.open(542)},s.prototype.setUI=function(){this.bgImg.skin="single_dog/image_dsqd_hdbg.jpg",this.titileTxt.text="单身兑换"},Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return 7},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"DOG_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),n=s,e.SingleDogFestConvertPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="single_dog/image_dssd_01.jpg",this.topImg.skin="single_dog/image_dssd_04.jpg",this.tipImg.skin="single_dog/image_dssd_02.jpg",this.tipImg.pos(278,336,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this._festType=4},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.SingleDogFestHilarityPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="single_dog/image_dssd_01.jpg",this.topImg.skin="single_dog/image_dssd_05.jpg",this.tipImg.skin="single_dog/image_dssd_03.jpg",this.tipImg.pos(278,336,!0),this.goBtn.visible=!1,this.titleTxt.text="双倍奖励",this.TwoTxt.visible=!1,this.oneTxt.y=910,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，上述玩法所有奖励全部翻倍！",this.threeTxt.innerHTML="(金币真气的额外奖励不计入最高记录中)",this._festType=4},s.prototype.leftHandler=function(){WindowManager.instance.open(57)},s.prototype.rightHandler=function(){WindowManager.instance.open(194)},n=s,e.SingleDogFestDoubleRewardPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="single_dog/image_dssd_19.jpg",t}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SingleDogFestDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),n=s,e.SingleDogFestDailyRewardPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=4,this._funcId=335},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="",this.v.closeBtn.skin="common/btn_0yg_close.png",this.v.bgImg.y=177,this.v.tipTxt.pos(255,426,!0),this.v.closeBtn.pos(595,348,!0),this.v.stateImg.pos(321,620,!0),this.v.goBtn.pos(278,611,!0),this.v.rewardBox.pos(155,486,!0),this.v.tipTxt.text="单身特惠，限时首充",this.v.tipTxt.color="#ffffff",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.SingleDogFestFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.showTip(),t}e=t.single_dog_festival||(t.single_dog_festival={}),n=t.config.BlendCfg,i=ui.FestAlert1UI,__extends(o,i),o.prototype.showTip=function(){CommonUtil.setHTMLPro(this.tipHtml1,"#4c5e8a","SimHei",22),this.tipHtml1.style.leading=2,this.tipHtml1.innerHTML=n.instance.getCfgById(67014)[2][0],CommonUtil.setHTMLPro(this.tipHtml2,"#4c5e8a","SimHei",22),this.tipHtml2.style.leading=2,this.tipHtml2.innerHTML=n.instance.getCfgById(67015)[2][0];var t=CommonUtil.getNameByItemId(15040005),e=CommonUtil.getNameByItemId(15050005);this.titleTxt1.text="【"+t+"】来源",this.titleTxt2.text="【"+e+"】来源"},s=o,e.SingleDogFestAlert=s}(modules=modules||{}),function(o){var l,i,r,e,a,n,t,s;function h(){return i.call(this)||this}l=o.single_dog_collection||(o.single_dog_collection={}),r=o.common.CustomClip,e=o.common.CommonUtil,a=o.config.ItemMaterialCfg,n=o.common.ProgressBarCtrl,t=o.notice.SystemNoticeManager,i=ui.SingleDogCollectionViewUI,__extends(h,i),h.prototype.setData=function(){this.festivalType=4,this.str="单身"},h.prototype.initialize=function(){i.prototype.initialize.call(this),this.setData(),this.centerX=0,this.centerY=0,this.item_arr=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6],this.showItem_arr=[this.showItem1,this.showItem2,this.showItem3,this.showItem4,this.showItem5,this.showItem6],this.reach_arr=[this.reach1,this.reach2,this.reach3,this.reach4,this.reach5,this.reach6],this.showItemName_arr=[this.showItemName1,this.showItemName2,this.showItemName3,this.showItemName4,this.showItemName5,this.showItemName6],this.cover_arr=[this.cover1,this.cover2,this.cover3,this.cover4,this.cover5,this.cover6],this.receiveImg_arr=[this.receive1,this.receive2,this.receive3,this.receive4,this.receive5,this.receive6],this._proCtrl=new n(this.blessImg,634),this._proCtrl.maxValue=100,this._proCtrl.value=0,this.creatEffect(),this.initView();for(var t=this.receiveImg_arr.length,e=0;e<t;e++)this.receiveImg_arr[e].visible=!1,this.cover_arr[e].skin="single_dog/image_dssd_lk.png",this.reach_arr[e].skin="single_dog/icon_dssd_03.png"},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.receiveBtn,this,this.receiveHandler),this.onAutoGlobalEvt("SUSANSLADE_UPDATA_VIEW",this,this.updataView),this.onAutoGlobalEvt("DOG_FESTIVAL_RENWU_UPDATE",this,this.updataView),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){o.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},h.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.titleTxt.text=this.str+"藏品",this.updateMoXing(),this.updataView()},h.prototype.receiveHandler=function(){1==l.SingleDogCollectionModel.instance.getState()?l.SingleDogCollectionCtrl.instance.DrawCollection(this.festivalType):t.instance.addNotice("收集的"+this.str+"藏品数量不足",!0)},h.prototype.close=function(){Laya.timer.clear(this,this.activityHandler),this.rewardShowItem.stopTween(),i.prototype.close.call(this)},h.prototype.initView=function(){for(var t=o.config.CollectionCfg.instance.getDayByTable(this.festivalType),e=o.config.GoodBlendCfg.instance.getCfgsByType(this.festivalType)[4],i=0;i<t.length;i++){var n=t[i][2];this.item_arr[i].dataSource=[n[0],n[1],0,null],this.showItem_arr[i].dataSource=[e[i],1,0,null],this.showItem_arr[i].gray=!0;var s=a.instance.getItemCfgById(e[i])[1];this.showItemName_arr[i].text=s,r.thisStop(this.showItem_arr[i].clip)}this.updateMoXing()},h.prototype.updateMoXing=function(){var t=o.config.GoodBlendCfg.instance.getCfgsByType(this.festivalType)[7];this.rewardShowItem.showRewardObj(t[0],0,t[1]),this.observationItem.data=[[this.rewardShowItem._modelClip,Math.round(t[0]/1e3)]]},h.prototype.updataView=function(){var t=l.SingleDogCollectionModel.instance.collectionTask;if(t){for(var e=l.SingleDogCollectionModel.instance.collectId,i=t[2]||[],n=0;n<i.length;n++)for(var s=0;s<this.showItem_arr.length;s++)if(this.showItem_arr[s].itemData[0]==i[n]){this.showItem_arr[s].gray=!1,r.thisPlay(this.showItem_arr[s].clip);break}var o=l.SingleDogCollectionModel.instance.getState(),a=l.SingleDogCollectionModel.instance.getProgress();this._proCtrl.value=100*a/e.length,this.showReceiveBoxView(o),this.updataRewardView(),this.setActivitiTime()}},h.prototype.showReceiveBoxView=function(t){switch(this._btnClip.visible=this.receiveBtn.visible=this.rewardsImg.visible=this.noRewardsImg.visible=!1,t){case 0:this._btnClip.stop(),this.receiveBtn.visible=!0;break;case 1:this._btnClip.visible=this.receiveBtn.visible=!0,this._btnClip.play();break;case 2:this._btnClip.stop(),this.rewardsImg.visible=!0}},h.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),l.SingleDogCollectionModel.instance.endTime(this.festivalType)>=GlobalData.serverTime?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityText1.x=221,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.activityText1.x=299,this._btnClip.visible=this.receiveBtn.visible=this.rewardsImg.visible=!1,this.noRewardsImg.visible=!0)},h.prototype.activityHandler=function(){var t=l.SingleDogCollectionModel.instance.endTime(this.festivalType);this.activityText.text=e.timeStampDDHHMMToHHMMSS(t),this.activityText1.x=221,l.SingleDogCollectionModel.instance.endTime(this.festivalType)<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.activityText1.x=299,this._btnClip.visible=this.receiveBtn.visible=this.rewardsImg.visible=!1,this.noRewardsImg.visible=!0,Laya.timer.clear(this,this.activityHandler))},h.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip.stop(),this._btnClip=this.destroyElement(this._btnClip),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.observationItem=this.destroyElement(this.observationItem),i.prototype.destroy.call(this,t)},h.prototype.updataRewardView=function(){for(var t=l.SingleDogCollectionModel.instance.collectId,e=t.length,i=0,n=0,s=0;s<e;s++){var o=t[s][3];2==o?i++:3==o&&n++}var a=0;for(s=0;s<n;s++)this.cover_arr[a].skin="single_dog/image_dssd_hk.png",this.receiveImg_arr[a].visible=!0,this.item_arr[a].rpImg.visible=!1,a++;for(s=0;s<i;s++)this.item_arr[a].rpImg.visible=!0,a++;var r=i+n;for(s=0;s<r;s++)this.reach_arr[s].skin="single_dog/icon_dssd_04.png"},h.prototype.creatEffect=function(){this._btnClip=r.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.play(),this._btnClip.loop=!0,this._btnClip.pos(this.receiveBtn.x-5,this.receiveBtn.y-9,!0),this._btnClip.scale(1,1),this._btnClip.visible=!1},s=h,l.SingleDogCollectionPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_good_man||(t.single_dog_good_man={}),i=t.festival.GoodManBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=4},s.prototype.btn3Handler=function(){WindowManager.instance.open(554)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.titleTxt.text="送好人卡"},n=s,e.SingleDogGoodManPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_sart||(t.single_dog_sart={}),i=t.festival.StarBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.SingleDogSartItem},s.prototype.setUI=function(){this.v.titleTxt.text="派对之星",this.v.text1.text="我收到的好人卡:"},s.prototype.setPos=function(){this.v.activityText1.pos(63,103,!0),this.v.activityText.pos(221,103,!0)},s.prototype.setPos1=function(){this.v.activityText1.pos(130,103,!0)},s.prototype.initialize=function(){this._festType=4,this._funcId=337,i.prototype.initialize.call(this),this._windowEnumID=555,this._windowEnumID1=543},n=s,e.SingleDogSartPanel=n}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._first=0,t}i=t.single_dog_good_man||(t.single_dog_good_man={}),n=t.notice.SystemNoticeManager,s=t.common.SimpleList,e=ui.SingleDogHalfAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=s.create(i.SingleDogGoodManHalfItem,550,40,1,1,0,5),this._list.width=550,this._list.height=314,this.listBox.addChild(this._list),this._list.pos(0,0,!0)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.handler),this.onAutoGlobalEvt("FIND_GOODER_REPLY",this,this.showUI)},a.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this._type=t,this.inputTxt1.restrict="0-9",this.inputTxt1.type=null,this.text1.visible=this.text2.visible=!1,this.text3.visible=!0,this.showUI()},a.prototype.handler=function(){var t=this.inputTxt.text,e=this.inputTxt1.text;t?e?i.SingleDogGoodManCtrl.instance.FindGooder(Number(e),t,this._type):n.instance.addNotice("区服不能为空",!0):n.instance.addNotice("名字不能为空",!0)},a.prototype.showUI=function(t){if(void 0===t&&(t=null),t){t.sort(this.sortFunc.bind(this));for(var e=new Array,i=0;i<t.length;i++){var n=t[i];e.push([this._type,n])}this._list.datas=e}else this._list.datas=[];this.isHaveBox.visible=!(t&&0<t.length),1<=this._first&&(this.text1.visible=this.text2.visible=!0,this.text3.visible=!1),this._first++},a.prototype.sortFunc=function(t,e){return t[2].length-e[2].length},a.prototype.close=function(){e.prototype.close.call(this),this.inputTxt.text="",this.inputTxt1.text="",this._first=0},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},o=a,i.SingleDogGoodManHalfAlert=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_good_man||(t.single_dog_good_man={}),i=ui.SingleDogGoodManSuoAlertUI,__extends(s,i),n=s,e.SingleDogGoodManSuoAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_store||(t.single_dog_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.SingleDogStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.SingleDogStoreItem},o.prototype.getRestTime=function(){return e.SingleDogStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(344)},s=o,e.SingleDogStorePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.text1.text="本轮单身寻宝已结束,寻宝不再获得积分,是否确认继续抽奖？",t}e=t.single_dog_treasure||(t.single_dog_treasure={}),i=t.festival.TreasureSpecialBaseAlert,__extends(s,i),s.prototype.dontShowHandler=function(){e.SingleDogTreasureModel.instance.dontShowTreasure=this.dontShow.selected=!this.dontShow.selected},n=s,e.SingleDogTreasureSpecialAlert=n}(modules=modules||{}),function(l){var t,e,i,n,h,c,s,o,a,p,u,d,r;function y(){return null!==e&&e.apply(this,arguments)||this}t=l.zerobuy||(l.zerobuy={}),i=ui.ZerobuyViewUI,n=Laya.Event,h=l.zerobuy.ZerobuyModel,c=l.config.ZeroBuyCfg,s=l.common.CustomClip,o=l.common.BtnGroup,a=l.redPoint.RedPointCtrl,p=l.zerobuy.ZerobuyCtrl,u=l.bag.BagUtil,d=l.notice.SystemNoticeManager,e=i,__extends(y,e),y.prototype.initialize=function(){e.prototype.initialize.call(this),this._ISGroup=!0,this._gradeNum=new Array,this._scienceTabGroup=new o,this._scienceTabGroup.setBtns(this.switchBtn1,this.switchBtn2,this.switchBtn3,this.switchBtn4),this._scienceImgs=[this.switchImg1,this.switchImg2,this.switchImg3,this.switchImg4],this._AllSwitchBtn=[this.switchBtn1,this.switchBtn2,this.switchBtn3,this.switchBtn4],this._AllDotImg=[this.dotImg_1,this.dotImg_2,this.dotImg_3,this.dotImg_4],this._awardItemLefts=[this.cumulateBase1,this.cumulateBase2,this.cumulateBase3,this.cumulateBase4,this.cumulateBase5,this.cumulateBase6],this._awardItemRight=[this.cumulateBase7],this._switchBtnSkin=new Array,this._switchBtnSkin.push("zerobuy/btn_0yg_yq_1.png"),this._switchBtnSkin.push("zerobuy/btn_0yg_yq_0.png"),this.initializeClip()},y.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._scienceTabGroup,n.CHANGE,this,this.changeswitchBtnTabHandler),this.onAutoClick(this.some_moneyBtn,this,this.receiveBtnHandler,[0]),this.onAutoClick(this.receiveBtn,this,this.receiveBtnHandler,[1]),this.onAutoClick(this.lastBtn,this,this.lastBtnHandler),this.onAutoClick(this.nextBtn,this,this.nextBtnHandler),this.onAutoGlobalEvt("ZERO_BUY_UPDATE",this,this.showReceive),l.redPoint.RedPointCtrl.instance.registeRedPoint(this.dotImg_1,["zeroBuyOneRP"]),l.redPoint.RedPointCtrl.instance.registeRedPoint(this.dotImg_2,["zeroBuyTwoRP"]),l.redPoint.RedPointCtrl.instance.registeRedPoint(this.dotImg_3,["zeroBuyThreeRP"]),l.redPoint.RedPointCtrl.instance.registeRedPoint(this.dotImg_4,["zeroBuyFourRP"])},y.prototype.onOpened=function(){e.prototype.onOpened.call(this),p.instance.getZeroBuyInfo(),this.setCanReceive(),this.set_gradeNum(),this.showSwitchBtnText(),this.showWitchBtn(),this.changeReward(),this.showReceive()},y.prototype.setCanReceive=function(){var t=c.instance.getlvDicLeng();this.switchBtn1.visible=1<=t,this.switchBtn2.visible=2<=t,this.switchBtn3.visible=3<=t,this.switchBtn4.visible=4<=t,this._nowIdex=0,this._maxIdex=0<t-4?t-4:0,this.nextBtn.visible=!1,this.lastBtn.visible=!1;for(var e=t<=4?t:4,i=160*e+0*(e-1),n=0+(this.width-i>>1),s=0,o=e;s<o;s++)this._AllSwitchBtn[s].x=n+160*s,this._AllDotImg[s].x=n+160*s+126;for(var a=0;a<t;a++){var r=h.instance.getZeroBuyRewardState(a),l=h.instance.getZeroBuyExtraRewardState(a);if(1==r||1==l)return this._selectedIdex=a,this._nowIdex=a,void(this._nowIdex>=this._maxIdex&&(this._nowIdex=this._maxIdex))}this._selectedIdex=0},y.prototype.set_gradeNum=function(){this._ISGroup=!1,4<c.instance.getlvDicLeng()&&(this._nowIdex<=0?(this._nowIdex=0,this.lastBtn.visible=!1,this.nextBtn.visible=!0):this._nowIdex>=this._maxIdex?(this._nowIdex=this._maxIdex,this.lastBtn.visible=!0,this.nextBtn.visible=!1):(this.lastBtn.visible=!0,this.nextBtn.visible=!0));for(var t=0;t<4;t++)this._gradeNum[t]=this._nowIdex+t;this.getHasSelectedIdex()},y.prototype.lastBtnHandler=function(){this._nowIdex--,this.set_gradeNum(),this.updateUI()},y.prototype.nextBtnHandler=function(){this._nowIdex++,this.set_gradeNum(),this.updateUI()},y.prototype.updateUI=function(){this.showSwitchBtnText(),this.updateAllRP()},y.prototype.updateAllRP=function(){for(var t=0;t<this._gradeNum.length;t++){var e=this._gradeNum[t],i=h.instance.getZeroBuyExtraRewardState(e);0==t?a.instance.setRPProperty("zeroBuyOneRP",1==i):1==t?a.instance.setRPProperty("zeroBuyTwoRP",1==i):2==t?a.instance.setRPProperty("zeroBuyThreeRP",1==i):3==t&&a.instance.setRPProperty("zeroBuyFourRP",1==i)}},y.prototype.getScienceSelectIndex=function(){return this._gradeNum[this._scienceSelectIndex]},y.prototype.getHasSelectedIdex=function(){for(var t=0;t<this._gradeNum.length;t++)if(this._gradeNum[t]==this._selectedIdex)return this._scienceTabGroup.selectedIndex=t,!0;return!(this._scienceTabGroup.selectedIndex=-1)},y.prototype.changeswitchBtnTabHandler=function(){if(!this._ISGroup)return this.changXuanZhon(),void(this._ISGroup=!0);switch(this._scienceTabGroup.selectedIndex){case 0:this._scienceSelectIndex=0;break;case 1:this._scienceSelectIndex=1;break;case 2:this._scienceSelectIndex=2;break;case 3:this._scienceSelectIndex=3}this._selectedIdex=this.getScienceSelectIndex(),this.showWitchBtn(),this.changeReward(),this.showReceive()},y.prototype.showSwitchBtnText=function(){this.switchImg1.skin="zerobuy/txt_0yg_xllb.png",this.switchImg2.skin="zerobuy/txt_0yg_fhlb.png",this.switchImg3.skin="zerobuy/txt_0yg_jbsz.png",this.switchImg4.skin="zerobuy/txt_0yg_wmxl.png"},y.prototype.changXuanZhon=function(){0==this._scienceTabGroup.selectedIndex?this.switchBtn1.skin=this._switchBtnSkin[0]:this.switchBtn1.skin=this._switchBtnSkin[1],1==this._scienceTabGroup.selectedIndex?this.switchBtn2.skin=this._switchBtnSkin[0]:this.switchBtn2.skin=this._switchBtnSkin[1],2==this._scienceTabGroup.selectedIndex?this.switchBtn3.skin=this._switchBtnSkin[0]:this.switchBtn3.skin=this._switchBtnSkin[1],3==this._scienceTabGroup.selectedIndex?this.switchBtn4.skin=this._switchBtnSkin[0]:this.switchBtn4.skin=this._switchBtnSkin[1]},y.prototype.showWitchBtn=function(){var t;switch(this.changXuanZhon(),this._selectedIdex){case 0:t="zerobuy/txt_0yg_1.png";break;case 1:t="zerobuy/txt_0yg_2.png";break;default:t="zerobuy/txt_0yg_3.png"}this.instructionsImg.skin=t},y.prototype.changeReward=function(){var t=c.instance.get_restDay(this._selectedIdex);this.remainingdaytext.text="第"+t+"天登录可以领取",this._zeroBuyCfg=c.instance.get_zero_buy(this._selectedIdex);for(var e=this._zeroBuyCfg[2],i=this._zeroBuyCfg[4],n=0;n<this._awardItemLefts.length;n++)this._awardItemLefts[n].visible=!1;for(n=0;n<this._awardItemRight.length;n++)this._awardItemRight[n].visible=!1;if(e&&0!==e.length){for(var s=0,o=.5*e.length;s<o;s++){var a=e[2*s],r=e[2*s+1];(l=this._awardItemLefts[s])&&(l.dataSource=[a,r,0,null],l.visible=!0)}if(i&&0!==i.length)for(s=0,o=2*i.length;s<o;s++){var l;a=i[2*s],r=i[2*s+1],(l=this._awardItemRight[s])&&(l.dataSource=[a,r,0,null],l.visible=!0)}}},y.prototype.showReceive=function(){var t=h.instance.getZeroBuyRewardState(this._selectedIdex),e=h.instance.getZeroBuyExtraRewardState(this._selectedIdex),i=c.instance.get_money(this._selectedIdex),n=c.instance.get_restDay(this._selectedIdex);if(this.xianYuClip.value=i.toString(),this.dayClip.value=n.toString(),this.some_moneyBtn.visible=0==t&&0==e,this.receiveBtn.visible=1==t||2==t&&2!=e,1==t||1==e?(this._btnClip.play(),this._btnClip.visible=!0):(this._btnClip.stop(),this._btnClip.visible=!1),this.HasBroughtImg_1.visible=2==t,this.HasBroughtImg_2.visible=2==e,this.remainingdaytext.visible=0==e,0!=t){var s=h.instance.getZeroBuyExtraRewardRestTm(this._selectedIdex);this.remainingdaytext.text="剩余"+s+"天可以领取",0==s&&(this.remainingdaytext.visible=!1)}this.updateAllRP()},y.prototype.receiveBtnHandler=function(t){var e=h.instance.getZeroBuyExtraRewardState(this._selectedIdex),i=this._zeroBuyCfg[2],n=this._zeroBuyCfg[4];if(0==t){var s=c.instance.get_money(this._selectedIdex);if(l.zxian_yu.ZXianYuModel.instance.xianyu>=s){for(var o=[],a=0,r=.5*i.length;a<r;a++)o.push([i[2*a],i[2*a+1],0,null]);u.canAddItemsByBagIdCount(o)&&p.instance.GetZeroBuyBuy(this._selectedIdex)}else u.openLackPropAlert(l.zxian_yu.ZXianYuModel.instance.id,1)}else if(1==t)if(0==e)d.instance.addNotice("未到可领取时间",!0);else{for(o=[],a=0,r=.5*n.length;a<r;a++)o.push([n[2*a],n[2*a+1],0,null]);u.canAddItemsByBagIdCount(o)&&p.instance.getZeroBuyReward(this._selectedIdex)}},y.prototype.initializeClip=function(){this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.scale(1.15,1.1,!0),this._btnClip.pos(245,721,!0)},y.prototype.close=function(){e.prototype.close.call(this),s.thisStop(this._btnClip)},y.prototype.destroy=function(){this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},r=y,t.ZerobuyPanel=r}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="zhi_zhen/image_zzqy_bg12.jpg",t}e=t.zhiZhenFestival||(t.zhiZhenFestival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ZhiZhenFestivalDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenFestivalDailyRewardPanel=n}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="zhi_zhen/image_zzqy_bg08.jpg",t}a=t.zhiZhenSinglePay||(t.zhiZhenSinglePay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.ZhiZhenSinglePayModel.instance.getState(t[1],i),o=a.ZhiZhenSinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.ZhiZhenSinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.ZhiZhenSinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(390)},n=s,a.ZhiZhenSinglePayPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="zhi_zhen/image_zzqy_bg09.jpg",t.titleTxt.text="每日累充",t}e=t.zhiZhenCumulatePay||(t.zhiZhenCumulatePay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.ZhiZhenCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.ZhiZhenCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(391)},s=o,e.ZhiZhenCumulatePayPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="zhi_zhen/image_zzqy_bg10.jpg",t.titleTxt.text="至臻连充",t}e=t.zhiZhenContinuousPay||(t.zhiZhenContinuousPay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.ZhiZhenContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.ZhiZhenContinuousPayItem},o.prototype.getRestTime=function(){return e.ZhiZhenContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(392)},o.prototype.getMoneyAcc=function(){return e.ZhiZhenContinuousPayModel.instance.moneyAcc},s=o,e.ZhiZhenContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenFestival||(t.zhiZhenFestival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="zhi_zhen/image_zzqy_bg03.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(277,368,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this._festType=t.festival.FestivalModel.instance.zhiZhenType},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.ZhiZhenFestivalHilarityPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.ZhiZhenPayRank||(t.ZhiZhenPayRank={}),i=t.festival.PayRankBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ZhiZhenPayRankItem},s.prototype.setUI=function(){this.bgImg.skin="zhi_zhen/image_zzqy_bg13.jpg"},Object.defineProperty(s.prototype,"consumptionItemId",{get:function(){return e.ZhiZhenPayRankModel.instance.consumptionItemId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"consume",{get:function(){return e.ZhiZhenPayRankModel.instance.consume},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableById",{get:function(){return e.ZhiZhenPayRankModel.instance._rankersTableById},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableByRank",{get:function(){return e.ZhiZhenPayRankModel.instance._rankersTableByRank},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"restTmConsumption",{get:function(){return e.ZhiZhenPayRankModel.instance.restTmConsumption},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"actionOpenId",{get:function(){return 395},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenPayRankPanel=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={},this._tabHuoBi={};for(var t=GlobalData.getConfig("festival_mall"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e],s=n[2],o=n[0],a=n[5][0];this._tab[s]=t[e],this._tabHuoBi[o]||(this._tabHuoBi[o]=[]),-1===this._tabHuoBi[o].indexOf(a)&&this._tabHuoBi[o].push(a)}},n.prototype.getHuoBiArrById=function(t){var e=this._tabHuoBi[t];return e||[]},n.prototype.getCfgsById=function(t){return this._tab[t]},i=n,e.FestivalMallCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenStore||(t.zhiZhenStore={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.ZhiZhenStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.ZhiZhenStoreItem},o.prototype.getRestTime=function(){return e.ZhiZhenStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(393)},s=o,e.ZhiZhenStorePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenStar||(t.zhiZhenStar={}),i=t.festival.StarBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ZhiZhenStarItem},s.prototype.setUI=function(){this.v.titleTxt.text="恋之守护",this.v.text1.text="我收到的玫瑰:"},s.prototype.setPos=function(){this.v.activityText1.pos(63,103,!0),this.v.activityText.pos(221,103,!0)},s.prototype.setPos1=function(){this.v.activityText1.pos(130,103,!0)},s.prototype.initialize=function(){this._festType=t.festival.FestivalModel.instance.zhiZhenType,this._funcId=396,i.prototype.initialize.call(this),this._windowEnumID=672,this._windowEnumID1=650},n=s,e.ZhiZhenStarPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenGoodMan||(t.zhiZhenGoodMan={}),i=t.festival.GoodManBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.zhiZhenType},s.prototype.btn3Handler=function(){WindowManager.instance.open(671)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.titleTxt.text="赠送玫瑰"},n=s,e.ZhiZhenGoodManPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenYuLan||(t.zhiZhenYuLan={}),i=t.single_dog_yu_lan.SingleDogYuLanPanel,__extends(s,i),s.prototype.getItemClass=function(){return t.zhiZhenYuLan.ZhiZhenYuLanItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),s.prototype.setUI=function(){this.bgImg.skin="zhi_zhen/image_zzqy_bg02.jpg",this.titleImg.skin="zhi_zhen/image_qxjs_bg15.png",this.BG.visible=!1,this.rewardShowItem.setDataFun([1,1,1,1,"assets/icon/ui/goodrank/"]),this.rewardShowItem.y=420,this.rewardShowItem.scale(1,1,!0),this.text1.text="我收到的玫瑰:",this.titleImg.y=150},s.prototype.setMoXing=function(){this.rewardShowItem.fashionModelPosY=140,this.rewardShowItem.shenBingModelPosY=120,this.rewardShowItem.tianZhuModelPosY=130},n=s,e.ZhiZhenYuLanPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenScoreRank||(t.zhiZhenScoreRank={}),i=t.single_dog_score_rank.SingleDogScoreRankPanel,__extends(s,i),s.prototype.getItemClass=function(){return t.zhiZhenScoreRank.ZhiZhenScoreRankItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),s.prototype.getFuncOpen=function(){return t.funcOpen.FuncOpenModel.instance.getFuncIsOpen(399)},s.prototype.openWin=function(){WindowManager.instance.open(649)},s.prototype.getRp=function(){return t.redPoint.RedPointCtrl.instance.getRPProperty("zhiZhenParty4RP")},s.prototype.setBg=function(){this.bgImg.skin="zhi_zhen/image_zzqy_bg11.jpg"},s.prototype.setUI=function(){this.integralDescriptionText.text="赠送1朵"+t.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+"获得1积分"},n=s,e.ZhiZhenScoreRankPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenFestival||(t.zhiZhenFestival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.zhiZhenType,this._funcId=389},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="zhi_zhen/image_zzqy_bg04.png",this.v.closeBtn.skin="common/btn_0yg_close.png",this.v.bgImg.y=246,this.v.tipTxt.pos(313,399,!0),this.v.closeBtn.pos(636,330,!0),this.v.stateImg.pos(361,576,!0),this.v.goBtn.pos(315,570,!0),this.v.rewardBox.pos(228,448,!0),this.v.tipTxt.text="情缘特惠，限时首充",this.v.tipTxt.color="#FFFFFF",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.ZhiZhenFestivalFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenStar||(t.zhiZhenStar={}),i=t.single_dog_sart.SingleDogSartAlert,__extends(s,i),Object.defineProperty(s.prototype,"broadcastId",{get:function(){return 54},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenStarAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenGoodMan||(t.zhiZhenGoodMan={}),i=t.single_dog_good_man.SingleDogGoodManAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenGoodManAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenGoodMan||(t.zhiZhenGoodMan={}),i=t.single_dog_good_man.SingleDogGoodManJiLuAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenGoodManJiLuAlert=n}(modules=modules||{}),function(t){var e,l,i;function n(){}e=t.config||(t.config={}),l=t.festival.FestivalModel,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getOper=function(t){for(var e=[],i=GlobalData.getConfig("smash_egg_oper"),n=0;n<i.length;++n)i[n][0]%1e3==t&&e.push(i[n]);return e},n.prototype.getOperByType=function(t,e){for(var i=[],n=GlobalData.getConfig("smash_egg_oper"),s=0;s<n.length;++s){var o=n[s][0];o%1e3==e&&Math.floor(o/1e3)==t&&i.push(n[s])}return i},n.prototype.getShowItemsByType=function(t,e){for(var i=[[],[]],n=GlobalData.getConfig("smash_egg_weight"),s=l.instance.getCrossOpenServerDay(e),o=l.instance.getDayByFestivalType(e),a=0;a<n.length;++a){var r=n[a][0];if(r%1e3==e&&Math.floor(r/1e3)==t&&n[a][4][0]<=s&&n[a][4][1]>=s&&n[a][5][0]<=o&&n[a][5][1]>=o){i=n[a][2];break}}return i},n.prototype.getPreviewItemsByType=function(t,e){for(var i=[[],[]],n=GlobalData.getConfig("smash_egg_weight"),s=l.instance.getCrossOpenServerDay(e),o=l.instance.getDayByFestivalType(e),a=0;a<n.length;++a){var r=n[a][0];if(r%1e3==e&&Math.floor(r/1e3)==t&&n[a][4][0]<=s&&n[a][4][1]>=s&&n[a][5][0]<=o&&n[a][5][1]>=o){i=n[a][3];break}}return i},n.prototype.getLuckyValueMaxByType=function(t,e){for(var i=GlobalData.getConfig("smash_egg_weight"),n=l.instance.getCrossOpenServerDay(e),s=l.instance.getDayByFestivalType(e),o=0,a=0;a<i.length;++a){var r=i[a][0];r%1e3==e&&Math.floor(r/1e3)==t&&i[a][1][1]>o&&i[a][4][0]<=n&&i[a][4][1]>=n&&i[a][5][0]<=s&&i[a][5][1]>=s&&(o=i[a][1][1])}return o},n.prototype.getBlendIdByType=function(t,e){for(var i=GlobalData.getConfig("smash_egg_weight"),n=l.instance.getCrossOpenServerDay(e),s=l.instance.getDayByFestivalType(e),o=0;o<i.length;++o){var a=i[o][0];if(a%1e3==e&&Math.floor(a/1e3)==t&&i[o][4][0]<=n&&i[o][4][1]>=n&&i[o][5][0]<=s&&i[o][5][1]>=s)return i[o][6]}return 0},n.prototype.getExchange=function(t){for(var e=[],i=GlobalData.getConfig("smash_egg_exchange"),n=l.instance.getCrossOpenServerDay(t),s=0;s<i.length;++s)i[s][0]%1e3==t&&i[s][1][0]<=n&&i[s][1][1]>=n&&e.push(i[s]);return e},n.prototype.getExchangeCfgByType=function(t,e){for(var i=[],n=GlobalData.getConfig("smash_egg_exchange"),s=l.instance.getCrossOpenServerDay(e),o=0;o<n.length;++o){var a=n[o][0];a%1e3==e&&Math.floor(a/1e3)==t&&n[o][1][0]<=s&&n[o][1][1]>=s&&i.push(n[o])}return i},n.prototype.getRankRewardByRank=function(t,e,i){for(var n=GlobalData.getConfig("smash_egg_rank"),s=0;s<n.length;++s)if(n[s][1]==e&&n[s][2][0]<=i&&n[s][2][1]>=i&&n[s][0][0]<=t&&n[s][0][1]>=t)return n[s][4];return null},n.prototype.getValueNeedByRank=function(t,e,i){for(var n=GlobalData.getConfig("smash_egg_rank"),s=0;s<n.length;++s)if(n[s][1]==e&&n[s][2][0]<=i&&n[s][2][1]>=i&&n[s][0][0]<=t&&n[s][0][1]>=t)return n[s][3];return 0},n.prototype.getTaskList=function(t){for(var e=[],i=GlobalData.getConfig("smash_egg_task"),n=l.instance.getCrossOpenServerDay(t),s=0;s<i.length;++s)i[s][1]==t&&i[s][2][0]<=n&&i[s][2][1]>=n&&e.push(i[s]);return e},n.prototype.getShopList=function(t){for(var e=[],i=GlobalData.getConfig("smash_egg_mall"),n=l.instance.getCrossOpenServerDay(t),s=0;s<i.length;++s)i[s][0]==t&&i[s][1][0]<=n&&i[s][1][1]>=n&&e.push(i[s]);return e},i=n,e.ZaDanCfg=i}(modules=modules||{}),function(g){var t,e,i,f,_,m,n,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.barWidth=385,t}t=g.zadan||(g.zadan={}),i=g.common.BtnGroup,f=g.config.ZaDanCfg,_=g.bag.BaseItem,m=g.common.CustomClip,n=g.notice.SystemNoticeManager,e=ui.ZaDanViewUI,__extends(o,e),Object.defineProperty(o.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ctrl",{get:function(){return t.ZaDanCtrl.instance},enumerable:!0,configurable:!0}),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnGroup=this.destroyElement(this._btnGroup),this._oneEffect=this.destroyElement(this._oneEffect),this._tenEffect=this.destroyElement(this._tenEffect),e.prototype.destroy.call(this,t)},o.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.bg_btn_0.visible=this.bg_btn_1.visible=this.bg_btn_2.visible=!1,this._btnGroup=new i,this._btnGroup.setBtns(this.g_btn_0,this.g_btn_1,this.g_btn_2),this._btnGroup.selectedIndex=0,this.bg_btn_0.visible=!0,this._leftContainer=new Laya.Sprite,this._leftContainer.size(this.panel0.width,this.panel0.height),this.panel0.addChild(this._leftContainer),this._leftContainer.scrollRect=new Laya.Rectangle(0,0,this._leftContainer.width,this._leftContainer.height),this._rightContainer=new Laya.Sprite,this._rightContainer.size(this.panel1.width,this.panel1.height),this.panel1.addChild(this._rightContainer),this._rightContainer.scrollRect=new Laya.Rectangle(0,0,this._rightContainer.width,this._rightContainer.height),this.gailvTxt.underline=!0,this.initRewardShow()},o.prototype.initRewardShow=function(){this.djShowItem.scale(.35,.35),this.djShowItem.pos(85,130);var t=null,e=g.config.BlendCfg.instance.getCfgById(85006)[1];if(e&&0!==e.length){for(var i=0;i<e.length;i+=4)if(e[i]===this.model.fType){t=[e[i+1],e[i+2],e[i+3]];break}t=t||[e[e.length-3],e[e.length-2],e[e.length-1]],this.djShowItem.scale(t[2],t[2]),this.djShowItem.pos(t[0],t[1])}},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.bGroupHandler),this.onAutoClick(this.btn_one,this,this.smashOneHandler),this.onAutoClick(this.btn_ten,this,this.smashTenHandler),this.onAutoClick(this.btn_info,this,this.infoHandler),this.onAutoClick(this.btn_change,this,this.exchangeHandler),this.onAutoClick(this.btn_prev,this,this.previewHandler),this.onAutoGlobalEvt("ZADAN_UPDATE",this,this.updateView),this.onAutoGlobalEvt("ZADAN_INFO_UPDATE",this,this.updateView),this.onAutoClick(this.gailvTxt,this,this.gailvHandler),this.onAutoClick(this.djClose,this,this.onDjClose),this.onAutoClick(this.djBtn,this,this.previewHandler),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.onFuncUpdate),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){g.bottomTab.BottomTabCtrl.instance.updateTabByPanel()}),this.addRedListener()},o.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clearAll(this),this._wait=!1},o.prototype.addRedListener=function(){this.regAutoRP(this.eggRP_0,["zadanRP1"]),this.regAutoRP(this.eggRP_1,["zadanRP2"]),this.regAutoRP(this.eggRP_2,["zadanRP3"]),this.regAutoRP(this.exchangeRP,["zadanChangeRP"])},o.prototype.onFuncUpdate=function(t){(0<=t.indexOf(453)||0<=t.indexOf(464))&&(g.funcOpen.FuncOpenModel.instance.getFuncIsOpen(464)||this.close())},o.prototype.onDjClose=function(){this.djPreview.visible=!1,this._djShow=!1},o.prototype.gailvHandler=function(){var t=f.instance.getBlendIdByType(this._btnGroup.selectedIndex+1,this.model.fType),e="";e+=g.config.BlendCfg.instance.getCfgById(t)[2],WindowManager.instance.open(443,["概率公示",e,695])},o.prototype.infoHandler=function(){var t=this._btnGroup.selectedIndex;CommonUtil.alertHelp([20090,20092,20093][t])},o.prototype.previewHandler=function(){WindowManager.instance.open(723,this._btnGroup.selectedIndex+1)},o.prototype.exchangeHandler=function(){WindowManager.instance.open(722,this._btnGroup.selectedIndex+1)},o.prototype.bGroupHandler=function(){var t=this._btnGroup.selectedIndex;this.bg_btn_0.visible=0==t,this.bg_btn_1.visible=1==t,this.bg_btn_2.visible=2==t,this.updateView()},o.prototype.smashOneHandler=function(){var t=this;if(!this._wait)if(g.bag.BagModel.instance.getBagEnoughById(0)<1)n.instance.addNotice("道具背包已满，请先整理",!0);else{var e=this._btnGroup.selectedIndex+1,i=f.instance.getOperByType(e,this.model.fType)[0][2];g.bag.BagModel.instance.getItemCountById(i[0])<i[1]?g.bag.BagUtil.openLackPropAlert(i[0],1):this.model.getRankEndTime()<GlobalData.serverTime?CommonUtil.alert("提示","本轮砸蛋榜排名已结束，在砸蛋榜更新前砸蛋不会获得砸蛋值，是否继续砸蛋？",[Handler.create(this,function(){t.ctrl.LuckSmashEgg(e,0,t.model.fType),t.breakEggEffect()})],[],null,!0,null,7):(this.ctrl.LuckSmashEgg(e,0,this.model.fType),this.breakEggEffect())}},o.prototype.smashTenHandler=function(){var t=this;if(!this._wait)if(g.bag.BagModel.instance.getBagEnoughById(0)<10)n.instance.addNotice("道具背包已满，请先整理",!0);else{var e=this._btnGroup.selectedIndex+1,i=f.instance.getOperByType(e,this.model.fType)[1][2];g.bag.BagModel.instance.getItemCountById(i[0])<i[1]?g.bag.BagUtil.openLackPropAlert(i[0],1):this.model.getRankEndTime()<GlobalData.serverTime?CommonUtil.alert("提示","本轮砸蛋榜排名已结束，在砸蛋榜更新前砸蛋不会获得砸蛋值，是否继续砸蛋？",[Handler.create(this,function(){t.ctrl.LuckSmashEgg(e,1,t.model.fType),t.breakEggEffect()})],[],null,!0,null,7):(this.ctrl.LuckSmashEgg(e,1,this.model.fType),this.breakEggEffect())}},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._wait=!1,this._djShow=!0,this._lastType=0,this._btnGroup.selectedIndex=2,Laya.timer.loop(5e3,this,this.loopEggEffect),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime(),this.updateView()},o.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.updateFrame),Laya.timer.clear(this,this.loopEggEffect),Laya.timer.clear(this,this.updateTime),this._tween&&this._tween.stop(),m.thisStop(this._oneEffect),m.thisStop(this._tenEffect)},o.prototype.updateView=function(){var t=this._btnGroup.selectedIndex;this.box_0.visible=0==t,this.box_1.visible=1==t,this.box_2.visible=2==t,this.tipTxt.text=["必定获得极品或绝品外显","必定获得绝品外显","必定获得绝品或典藏外显"][t];var e=this.model.getInfoByType(t+1);if(e){var i=e[1],n=f.instance.getLuckyValueMaxByType(t+1,this.model.fType);this.txt_lucky.text=i+"/"+n;var s=i/n;s=1<s?1:s,this.bar_lucky.width=this.barWidth*s;var o=f.instance.getOperByType(t+1,this.model.fType),a=o[0][2],r=o[1][2],l=Math.round(r[1]/a[1]);10<=l||l<=0?this.offImg.visible=!1:(this.offImg.visible=!0,this.offImg.skin="common/dis_count_"+l+".png"),this.img_one.skin=CommonUtil.getIconById(a[0]),this.img_ten.skin=CommonUtil.getIconById(r[0]);var h=g.bag.BagModel.instance.getItemCountById(a[0]),c=g.bag.BagModel.instance.getItemCountById(r[0]);if(this.count_one.text=h+"/"+a[1],this.count_ten.text=c+"/"+r[1],this.count_one.color=a[1]>h?"#ff3e3e":"#50ff28",this.count_ten.color=r[1]>c?"#ff3e3e":"#50ff28",a[1]>h?m.thisStop(this._oneEffect):(this._oneEffect||(this._oneEffect=m.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._oneEffect.pos(-5,-10),this.btn_one.addChild(this._oneEffect)),m.thisPlay(this._oneEffect)),r[1]>c?m.thisStop(this._tenEffect):(this._tenEffect||(this._tenEffect=m.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._tenEffect.pos(-5,-10),this.btn_ten.addChild(this._tenEffect)),m.thisPlay(this._tenEffect)),2==t&&this._djShow){this.djPreview.visible=!0;var p=this.model.getShowData();p?(this.djShowItem.showRewardObj(p[0],p[1],p[2]),2031===p[0]&&(this.djShowItem.x=78),this.djName.text=p[3]):this.djPreview.visible=!1}else this.djPreview.visible=!1;if(this._lastType!=t+1){var u=f.instance.getShowItemsByType(t+1,this.model.fType);this._leftItems=this._leftItems?this._leftItems:[],this._leftContainer.removeChildren(),this._rightItems=this._rightItems?this._rightItems:[],this._rightContainer.removeChildren();for(var d=0;d<u[0].length;++d){if(this._leftItems.length==d){var y=new _;this._leftItems.push(y)}this._leftItems[d].dataSource=[u[0][d],1,0,null],this._leftItems[d].pos(0,110*d),this._leftContainer.addChild(this._leftItems[d])}for(;this._leftItems.length>u[0].length;)this._leftItems.pop().destroy();for(d=0;d<u[1].length;++d)this._rightItems.length==d&&(y=new _,this._rightItems.push(y)),this._rightItems[d].dataSource=[u[1][d],1,0,null],this._rightItems[d].pos(0,this._rightContainer.height-100-110*d),this._rightContainer.addChild(this._rightItems[d]);for(;this._rightItems.length>u[1].length;)this._rightItems.pop().destroy();Laya.timer.frameLoop(1,this,this.updateFrame),this._lastType=t+1}}},o.prototype.updateFrame=function(){for(var t=0;t<this._leftItems.length;++t)--this._leftItems[t].y;var e;for(this._leftItems.length&&this._leftItems[0].y<-110&&((e=this._leftItems.shift()).y=this._leftItems[this._leftItems.length-1].y+110,this._leftItems.push(e)),t=0;t<this._rightItems.length;++t)this._rightItems[t].y+=1;this._rightItems.length&&this._rightItems[0].y>this._rightContainer.height&&((e=this._rightItems.shift()).y=this._rightItems[this._rightItems.length-1].y-110,this._rightItems.push(e))},o.prototype.loopEggEffect=function(){var t,e=this;switch(this._tween&&this._tween.stop(),this._btnGroup.selectedIndex){case 0:t=this.dan_0;break;case 1:t=this.dan_1;break;case 2:t=this.dan_2}t.rotation=0,this._tween=TweenJS.create(t).to({rotation:-10},33).onComplete(function(){e._tween.to({rotation:10},66).onComplete(function(){e._tween.to({rotation:0},33).onComplete(function(){e._tween.stop()}).start()}).start()}).start()},o.prototype.updateTime=function(){var t=this.model.isCloseWithExchange?this.model.exchangeEndTime:this.model.endTime;t<GlobalData.serverTime?(this.timeTxt.text="已结束",this.timeTxt.color="#ff3e3e"):(this.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(t),this.timeTxt.color="#50ff28")},o.prototype.breakEggEffect=function(){var t=this;this._wait=!0,Laya.timer.once(500,this,function(){t._wait=!1})},s=o,t.ZaDanPanel=s}(modules=modules||{}),function(t){var e,i,c,n,s,o;function a(){return i.call(this)||this}e=t.zadan||(t.zadan={}),c=t.config.ZaDanCfg,n=t.common.SimpleList,s=t.bag.BaseItem,i=ui.ZaDanRankItemUI,__extends(a,i),Object.defineProperty(a.prototype,"model",{get:function(){return e.ZaDanModel.instance},enumerable:!0,configurable:!0}),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=n.create(s,100,100,2,1,0,0),this._list.size(400,100),this._list.scale(.8,.8),this.listCon.addChild(this._list),CommonUtil.setHTMLPro(this.noTxt,"#4c5e8a","SimHei",24)},a.prototype.setData=function(t){for(var e=t[0],i=(c.instance.getRankRewardByRank(e,this.model.fType,this.model.getOpenDay())||[])[this.model.rankRound]||[],n=[],s=0;s<i.length;s+=2)n.push([i[s],i[s+1],0,null]);var o=4<(this._list.datas=n).length?4:n.length;this._list.x=-40*o,e<=3?(this.rankImg.visible=this.rankClip.visible=!0,this.rankClip.value=e.toString(),this.rankTxt.text=""):(this.rankImg.visible=this.rankClip.visible=!1,this.rankTxt.text="第"+e+"名");var a=t[1];if(!a)return this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!1,this.noTxt.visible=!0,void(this.noTxt.innerHTML="虚位以待...<br>砸蛋值达到<span color='#168a17'>"+c.instance.getValueNeedByRank(e,this.model.fType,this.model.getOpenDay())+"</span>可上榜");this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!0,this.noTxt.visible=!1,this.valueTxt.text="砸蛋值:"+a[5],this.playerName.text=a[2];var r=a[3],l=a[1],h=a[4];this.headIcon.setInfo(r,l,h)},o=a,e.ZaDanRankItem=o}(modules=modules||{}),function(e){var t,i,y,n,s,o,g,a;function r(){return null!==i&&i.apply(this,arguments)||this}t=e.zadan||(e.zadan={}),y=e.config.ZaDanCfg,n=e.common.AvatarClip,s=e.common.SimpleList,o=e.bag.BaseItem,g=e.player.PlayerModel,i=ui.ZaDanRankViewUI,__extends(r,i),Object.defineProperty(r.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ctrl",{get:function(){return t.ZaDanCtrl.instance},enumerable:!0,configurable:!0}),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._rankList=this.destroyElement(this._rankList),this._avatar=this.destroyElement(this._avatar),this.observationItem=this.destroyElement(this.observationItem),i.prototype.destroy.call(this,t)},r.prototype.initRankList=function(){this._rankList=s.create(t.ZaDanRankItem,646,164,1,1,0,2),this._rankList.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._rankList)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.initRankList(),this._avatar=n.create(1024,1024,768),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this.addChildAt(this._avatar,1),this._topRwdList=s.create(o,100,100,2,1,0,0),this._topRwdList.size(400,100),this._topRwdList.scale(.8,.8),this.rwdCon.addChild(this._topRwdList),this.noTxt1.color=this.noTxt.color,this.noTxt1.style.fontFamily=this.noTxt.font,this.noTxt1.style.fontSize=this.noTxt.fontSize,this.noTxt1.style.align=this.noTxt.align,this.noTxt1.style.strokeColor=this.noTxt.strokeColor,this.noTxt1.style.stroke=this.noTxt.stroke},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.jumpBtn,this,this.onJumpHandler),this.onAutoClick(this.helpBtn,this,this.onHelpHandler),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.onFuncUpdate),this.onAutoGlobalEvt("ZADAN_RANK_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){e.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},r.prototype.onFuncUpdate=function(t){(0<=t.indexOf(453)||0<=t.indexOf(463))&&(e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(463)||this.close())},r.prototype.onHelpHandler=function(){CommonUtil.alertHelp(20091)},r.prototype.onJumpHandler=function(){WindowManager.instance.open(718)},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.ctrl.GetSmashEggRank(this.model.fType),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime()},r.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},r.prototype.updateTime=function(){this.model.getRankEndTime()<GlobalData.serverTime?(this.timeTxt.text="已结束",this.timeTxt.color="#ff3e3e"):(this.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(this.model.getRankEndTime()),this.timeTxt.color="#50ff28")},r.prototype.updateAvatar=function(){var t=this.model.getRankShow();if(t){var e=t[2],i=t[3],n=t[1];this._avatar.pos(368,497),this._avatar.avatarRotationY=180,this._avatar.avatarRotationX=0,this._avatar.avatarScale=1,this._avatar.avatarY=0,this._avatar.avatarX=0,this._avatar.reset(n,e,i),this.observationItem.data=[[this._avatar,0]]}},r.prototype.updateView=function(){for(var t=0,e=this.model.getRankList()||[],i=[],n=1,s=0;n<=50;)s<e.length?(e[s][0]===g.instance.actorId&&(t=e[s][6]),e[s][6]==n?(1<n&&i.push([e[s][6],e[s]]),++s):1<n&&i.push([n,null])):1<n&&i.push([n,null]),++n;this._rankList.datas=i;var o=y.instance.getRankRewardByRank(1,this.model.fType,this.model.getOpenDay())||[];this.timeTitleTxt.text=1<o.length?"第"+(this.model.rankRound+1).toString()+"轮活动倒计时：":"活动倒计时：";for(var a=o[this.model.rankRound]||[],r=[],l=0;l<a.length;l+=2)r.push([a[l],a[l+1],0,null]);var h=4<(this._topRwdList.datas=r).length?4:r.length;this._topRwdList.x=-40*h,this.valueTxt.text=this.model.getRankMyValue().toString(),this.myRankTxt.text=0<t?"第"+t+"名":"未上榜",this.updateAvatar();var c=0<e.length?e[0]:null;if(!c||1!=c[6])return this.topName.text="",this.valueClip.value="0",this.noTxt.visible=this.noTxt1.visible=!0,void(this.noTxt1.innerHTML="砸蛋值达到<span color='#50ff28'>"+y.instance.getValueNeedByRank(1,this.model.fType,this.model.getOpenDay())+"</span>可上榜");this.noTxt.visible=this.noTxt1.visible=!1,this.valueClip.value=c[5].toString(),this.topName.text=c[2];var p=c[3],u=c[1],d=c[4];this.headIcon.setInfo(p,u,d)},a=r,t.ZaDanRank=a}(modules=modules||{}),function(p){var t,u,e,i,n;function s(){return null!==u&&u.apply(this,arguments)||this}t=p.zadan||(p.zadan={}),e=p.common.SimpleList,i=p.bag.BaseItem,u=ui.ZaDanShopItemUI,__extends(s,u),Object.defineProperty(s.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ctrl",{get:function(){return t.ZaDanCtrl.instance},enumerable:!0,configurable:!0}),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._itemList&&(this._itemList.removeSelf(),this._itemList.destroy(),this._itemList=null),u.prototype.destroy.call(this,t)},s.prototype.initialize=function(){u.prototype.initialize.call(this),this._itemList=e.create(i,100,100,2,1,15,0),this._itemList.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._itemList)},s.prototype.onEvt=function(){u.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.onBtnHandler)},s.prototype.onBtnHandler=function(){var t=this._cfg[3];if(p.bag.BagUtil.canAddItemsByBagIdCount(CommonUtil.formatItemData(t))){var e=this._cfg[5],i=PlayerModel.instance.getCurrencyById(e[0]);if(null==i&&(i=p.bag.BagModel.instance.getItemCountById(e[0])),i<e[1])90140001==e[0]?CommonUtil.goldNotEnoughAlert():p.bag.BagUtil.openLackPropAlert(e[0],1);else if(0!=this._cfg[12]){var n=this._cfg[2];this.ctrl.SmashEggMall(n,1,this.model.fType)}else this.openDialog()}},s.prototype.openDialog=function(){WindowManager.instance.open(725,[this._cfg,this._canBuyCount])},s.prototype.setData=function(t){u.prototype.setData.call(this,t),this.buyBtn.visible=this.vipImg.visible=this.maxTxt.visible=!1,this._cfg=t;var e=this._cfg[10];this.vipTxt.text="SVIP"+e+"专享",p.vip.VipModel.instance.vipLevel<e&&(this.vipImg.visible=!0);var i=this._cfg[5];this.iconImg.skin=CommonUtil.getIconById(i[0],!0),this.priceTxt.text=i[1].toString();var n=this._cfg[4];this.oldIconImg.skin=CommonUtil.getIconById(n[0],!0),this.oldPriceTxt.text=n[1].toString(),this.line.width=this.oldIconImg.width+this.oldPriceTxt.textWidth;for(var s=[],o=this._cfg[3],a=0;a<o.length;a+=2)s.push([o[a],o[a+1],0,null]);this._itemList.datas=s;var r=this._cfg[8],l=this._cfg[9],h=this.model.getMallBuyCountById(this._cfg[2]),c=Math.round(this._cfg[6]);switch(this.offTxt.text=c+"折",this.nameTxt.text=this._cfg[15],this.boxImg.skin="assets/icon/ui/egg/"+this._cfg[16]+".png","3"==this._cfg[16]?this.boxImg.pos(28,20):this.boxImg.pos(35,30),this._canBuyCount=l-h,r){case 0:this.limitTxt.text="不限次数",this._canBuyCount=0;break;case 1:this.limitTxt.text="每日限购("+h+"/"+l+")";break;case 2:this.limitTxt.text="每周限购("+h+"/"+l+")";break;case 3:this.limitTxt.text="活动限购("+h+"/"+l+")"}0<r&&this._canBuyCount<=0?this.vipImg.visible||(this.maxTxt.visible=!0):this.vipImg.visible||(this.buyBtn.visible=!0)},n=s,t.ZaDanShopItem=n}(modules=modules||{}),function(e){var t,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}t=e.zadan||(e.zadan={}),n=e.common.SimpleList,i=ui.ZaDanShopViewUI,__extends(o,i),Object.defineProperty(o.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this,t)},o.prototype.initList=function(){this._list=n.create(t.ZaDanShopItem,640,169,1,1,0,3),this._list.x=40,this._list.y=300,this._list.width=640,this._list.height=820,this.addChild(this._list)},o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.initList()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ZADAN_UPDATE",this,this.updateView),this.onAutoGlobalEvt("ZADAN_MALL_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.onFuncUpdate),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){e.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},o.prototype.onFuncUpdate=function(t){(0<=t.indexOf(453)||0<=t.indexOf(465))&&(e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(465)||this.close())},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.model.shopIsFirst&&(this.model.shopIsFirst=!1,this.model.setShopRP(!1)),this.updateView(),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime()},o.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},o.prototype.updateView=function(){var t=e.config.ZaDanCfg.instance.getShopList(this.model.fType);t.sort(function(t,e){return t[7]-e[7]}),this._list.datas=t},o.prototype.updateTime=function(){this.model.endTime<GlobalData.serverTime?this.timeTxt.text="已结束":this.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(this.model.endTime)},s=o,t.ZaDanShop=s}(modules=modules||{}),function(e){var t,r,i,n,l,s;function o(){return null!==r&&r.apply(this,arguments)||this}t=e.zadan||(e.zadan={}),i=e.common.SimpleList,n=e.bag.BaseItem,l=e.common.CustomClip,r=ui.ZaDanTaskItemUI,__extends(o,r),Object.defineProperty(o.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ctrl",{get:function(){return t.ZaDanCtrl.instance},enumerable:!0,configurable:!0}),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._itemList&&(this._itemList.removeSelf(),this._itemList.destroy(),this._itemList=null),this._btnClip=this.destroyElement(this._btnClip),r.prototype.destroy.call(this,t)},o.prototype.initialize=function(){r.prototype.initialize.call(this),this._itemList=i.create(n,100,100,2,1,15,0),this._itemList.pos(9,52),this._itemList.size(448,103),this.addChild(this._itemList)},o.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.onBtnHandler),this.onAutoClick(this.jumpBtn,this,this.onJumpHandler)},o.prototype.onJumpHandler=function(){WindowManager.instance.open(718)},o.prototype.onBtnHandler=function(){var t=this._cfg[5];e.bag.BagUtil.canAddItemsByBagIdCount(CommonUtil.formatItemData(t))&&this.ctrl.SmashEggTaskDraw(this._cfg[0],this.model.fType)},o.prototype.setData=function(t){r.prototype.setData.call(this,t),this._cfg=t,this.descTxt.text=t[3];var e=this.model.getEggValue(1)+this.model.getEggValue(2),i=t[4];this.scheduleText.text="("+e+"/"+i+")",this.scheduleText.color=e<i?"#ff3e3e":"#168a17";var n=this.model.getTaskStateById(t[0]);switch(l.thisStop(this._btnClip),n){case 0:this.receivedImg.visible=!1,this.sureBtn.visible=!1,this.jumpBtn.visible=!0;break;case 1:this.receivedImg.visible=!1,this.sureBtn.visible=!0,this.jumpBtn.visible=!1,this.playBtnEffect();break;case 2:this.receivedImg.visible=!0,this.sureBtn.visible=!1,this.jumpBtn.visible=!1}for(var s=t[5],o=[],a=0;a<s.length;a+=2)o.push([s[a],s[a+1],0,null]);this._itemList.datas=o},o.prototype.playBtnEffect=function(){this._btnClip||(this._btnClip=l.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.scale(.8,.8),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-8),this.addChild(this._btnClip)),l.thisPlay(this._btnClip)},s=o,t.ZaDanTaskItem=s}(modules=modules||{}),function(e){var t,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}t=e.zadan||(e.zadan={}),n=e.common.SimpleList,i=ui.ZaDanTaskViewUI,__extends(o,i),Object.defineProperty(o.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},o.prototype.initList=function(){this._list=n.create(t.ZaDanTaskItem,639,169,1,1,0,3),this._list.pos(41,301),this._list.size(640,800),this.addChild(this._list),CommonUtil.setHTMLPro(this.vhtmlTxt,"#2C476A","SimHei",24)},o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.initList()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ZADAN_UPDATE",this,this.updateView),this.onAutoGlobalEvt("ZADAN_TASK_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.onFuncUpdate),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){e.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},o.prototype.onFuncUpdate=function(t){(0<=t.indexOf(453)||0<=t.indexOf(466))&&(e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(466)||this.close())},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView(),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime()},o.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},o.prototype.updateView=function(){var s=this,t=e.config.ZaDanCfg.instance.getTaskList(this.model.fType);t.sort(function(t,e){var i=s.model.getTaskStateById(t[0]),n=s.model.getTaskStateById(e[0]);return 1==i&&1!=n?-1:1==n&&1!=i?1:2==i&&2!=n?1:2==n&&2!=i?-1:t[0]-e[0]}),this._list.datas=t,0<this.model.rankRound?this.vhtmlTxt.innerHTML="总砸蛋值："+CommonUtil.formatHtmlStrByColor("#168a17",(this.model.getEggValue(1)+this.model.getEggValue(2)).toString())+"（第一轮："+CommonUtil.formatHtmlStrByColor("#168a17",this.model.getEggValue(1).toString())+"，第二轮："+CommonUtil.formatHtmlStrByColor("#168a17",this.model.getEggValue(2).toString())+"）":this.vhtmlTxt.innerHTML="总砸蛋值："+CommonUtil.formatHtmlStrByColor("#168a17",this.model.getEggValue(1).toString())},o.prototype.updateTime=function(){this.model.endTime<GlobalData.serverTime?this.timeTxt.text="已结束":this.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(this.model.endTime)},s=o,t.ZaDanTask=s}(modules=modules||{}),function(l){var t,n,o,e;function i(){return null!==n&&n.apply(this,arguments)||this}t=l.zadan||(l.zadan={}),o=l.common.CustomClip,n=ui.ZaDanChangeItemUI,__extends(i,n),Object.defineProperty(i.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ctrl",{get:function(){return t.ZaDanCtrl.instance},enumerable:!0,configurable:!0}),i.prototype.destroy=function(t){void 0===t&&(t=!0),this._icon&&(this._icon.removeSelf(),this._icon.destroy(),this._icon=null),this._btnClip=this.destroyElement(this._btnClip),n.prototype.destroy.call(this,t)},i.prototype.initialize=function(){n.prototype.initialize.call(this),this.triggerT.visible=!1,this._icon=new Laya.Image,this._icon.x=this.priceTxt.x-40,this._icon.y=this.priceTxt.y-10,this._icon.width=this._icon.height=40,this.addChild(this._icon)},i.prototype.setData=function(t){n.prototype.setData.call(this,t),this._cfg=t;var e=this._cfg[3],i=this._cfg[4];this._id=this._cfg[2],this._type=Math.floor(this._cfg[0]/1e3),this.item.dataSource=[e[0],e[1],0,null],this.itemName.text=this.item._nameTxt.text,this.priceTxt.text=i[1].toString(),this._icon.skin=CommonUtil.getIconById(i[0]),this.updateHint()},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.puchaseBtn,this,this.puchaseHandler),this.onAutoClick(this.trigger,this,this.triggerHandler),this.onAutoGlobalEvt("ZADAN_HINT_UPDATE",this,this.updateHint),this.onAutoGlobalEvt("ZADAN_EXCHANGE_UPDATE",this,this.updateHint)},i.prototype.puchaseHandler=function(){var e=this;if(this._cfg){var t=this._cfg[3];if(l.bag.BagUtil.canAddItemsByBagIdCount(CommonUtil.formatItemData(t))){var i=this._cfg[4],n=l.bag.BagModel.instance.getItemCountById(i[0]);if(n<i[1])l.bag.BagUtil.openLackPropAlert(i[0],1);else{var s=this._cfg[5],o=this._canBuyCount*i[1];0<s&&o<n&&(n=o);var a=[t[0],t[1],0,null],r=[[i[0]],[n],[i[1]],a,Handler.create(this,function(t){e.ctrl.SmashEggExchange(e._type,e._id,t,e.model.fType)})];WindowManager.instance.open(469,r)}}}},i.prototype.triggerHandler=function(){if(this.puchaseBtn.visible){var t=this.model.getHintList(this._type);-1!=t.indexOf(this._id)?t.splice(t.indexOf(this._id),1):t.push(this._id),this.ctrl.SmashEggExchangeHint(this._type,t,this.model.fType),this.updateHint()}},i.prototype.updateHint=function(){var t=this._cfg[5],e=this._cfg[6],i=this.model.getExchangeCountById(this._cfg[2]);switch(this._canBuyCount=e-i,this.canTxt.text=this._canBuyCount.toString(),t){case 0:this.limitTxt.text="",this._canBuyCount=0,this.canImg.visible=!1;break;case 1:this.canImg.visible=!0,this.limitTxt.text="每日兑换:"+e;break;case 2:this.canImg.visible=!0,this.limitTxt.text="每周兑换:"+e;break;case 3:this.canImg.visible=!0,this.limitTxt.text="活动兑换:"+e}0<t&&this._canBuyCount<=0?(this.maxTxt.visible=!0,this.puchaseBtn.visible=!1):(this.maxTxt.visible=!1,this.puchaseBtn.visible=!0);var n=this.model.getHintList(this._type);if(this.puchaseBtn.visible&&-1!=n.indexOf(this._id)){this.triggerF.visible=!1,this.triggerT.visible=!0;var s=this._cfg[4];l.bag.BagModel.instance.getItemCountById(s[0])>=s[1]?this.playBtnEffect():o.thisStop(this._btnClip)}else this.triggerT.visible=!1,this.triggerF.visible=!0,o.thisStop(this._btnClip)},i.prototype.playBtnEffect=function(){this._btnClip||(this._btnClip=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.scale(.6,.6),this._btnClip.pos(this.puchaseBtn.x-2,this.puchaseBtn.y-5),this.addChild(this._btnClip)),o.thisPlay(this._btnClip)},e=i,t.ZaDanExchangeItem=e}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.zadan||(e.zadan={}),n=e.common.SimpleList,s=e.config.ZaDanCfg,i=ui.ZaDanChangeViewUI,__extends(a,i),Object.defineProperty(a.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),a.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),i.prototype.destroy.call(this)},a.prototype.InitList=function(){this._list=n.create(t.ZaDanExchangeItem,290,160,1,2,20,20),this._list.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._list)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.InitList()},a.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._type=t},a.prototype.checkClosePanel=function(){e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(464)||this.close()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("ZADAN_UPDATE",this,this.updateView),this.onAutoGlobalEvt("ZADAN_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("ZADAN_EXCHANGE_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.onFuncUpdate),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,this.checkClosePanel)},a.prototype.onFuncUpdate=function(t){(0<=t.indexOf(453)||0<=t.indexOf(464))&&this.checkClosePanel()},a.prototype.onOpened=function(){i.prototype.onOpened.call(this);var t=s.instance.getExchange(this.model.fType);this._condId=t[0][4][0],t.sort(this.sortFun.bind(this)),this._list.datas=t,Laya.timer.loop(1e3,this,this.updateTime),this.updateTime(),this.updateView()},a.prototype.sortFun=function(t,e){return t[7]-e[7]},a.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},a.prototype.updateView=function(){var t=e.bag.BagModel.instance.getItemCountById(this._condId);this.condImg.skin=CommonUtil.getIconById(this._condId),this.countTxt.text=CommonUtil.getNameByItemId(this._condId)+":"+t},a.prototype.updateTime=function(){this.model.exchangeEndTime<GlobalData.serverTime?this.timeTxt.text="已结束":this.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(this.model.exchangeEndTime)},o=a,t.ZaDanExchange=o}(modules=modules||{}),function(t){var e,s,i,n,o,a;function r(){return s.call(this)||this}e=t.zadan||(t.zadan={}),i=t.common.SimpleList,n=t.bag.BagItem,o=t.config.ZaDanCfg,s=ui.ZaDanPreviewUI,__extends(r,s),Object.defineProperty(r.prototype,"model",{get:function(){return e.ZaDanModel.instance},enumerable:!0,configurable:!0}),r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),s.prototype.destroy.call(this)},r.prototype.initialize=function(){s.prototype.initialize.call(this),this._list=i.create(n,100,120,1,5,10,10),this._list.size(540,274),this._list.pos(60,100),this.addChild(this._list),this._list1=i.create(n,100,120,1,5,10,10),this._list1.size(540,274),this._list1.pos(60,463),this.addChild(this._list1)},r.prototype.setOpenParam=function(t){s.prototype.setOpenParam.call(this,t),this._type=t},r.prototype.onOpened=function(){s.prototype.onOpened.call(this);for(var t=o.instance.getPreviewItemsByType(this._type,this.model.fType),e=[],i=0;i<t[0].length;++i)e.push([t[0][i],1,0,null]);this._list.datas=e;var n=[];for(i=0;i<t[1].length;++i)n.push([t[1][i],1,0,null]);this._list1.datas=n},a=r,e.ZaDanPreview=a}(modules=modules||{}),function(l){var t,h,e,i,c,n,s;function o(){return null!==h&&h.apply(this,arguments)||this}t=l.zadan||(l.zadan={}),e=l.common.SimpleList,i=l.bag.BagItem,c=l.config.ZaDanCfg,n=l.notice.SystemNoticeManager,h=ui.ZaDanRewardUI,__extends(o,h),Object.defineProperty(o.prototype,"model",{get:function(){return t.ZaDanModel.instance},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ctrl",{get:function(){return t.ZaDanCtrl.instance},enumerable:!0,configurable:!0}),o.prototype.destroy=function(){this._list&&(this._list.removeSelf(),this._list.destroy(),this._list=null),h.prototype.destroy.call(this)},o.prototype.setOpenParam=function(t){h.prototype.setOpenParam.call(this,t),this._items=t[0],this._extra=t[1]},o.prototype.initialize=function(){h.prototype.initialize.call(this),this._list=e.create(i,100,130,1,5,10,10),this._list.size(540,320),this._list.pos(60,100),this.addChild(this._list)},o.prototype.onOpened=function(){h.prototype.onOpened.call(this);for(var t=[],e=0;e<this._items.length;++e)t.push([this._items[e],1,0,null]);t.push([this._extra[0],this._extra[1],0,null]),this._list.datas=t;var i=c.instance.getOperByType(this.ctrl.lastZaDanType,this.model.fType),n=i[0][2],s=i[1][2],o=Math.round(s[1]/n[1]);10<=o||o<=0?this.offImg.visible=!1:(this.offImg.visible=!0,this.offImg.skin="common/dis_count_"+o+".png"),this.tenCountImg.skin=CommonUtil.getIconById(n[0]),this.fifityCountImg.skin=CommonUtil.getIconById(s[0]);var a=l.bag.BagModel.instance.getItemCountById(n[0]),r=l.bag.BagModel.instance.getItemCountById(s[0]);this.tenCount.text=a+"/"+n[1],this.fiftyCount.text=r+"/"+s[1],this.tenCount.color=n[1]>a?"#ff3e3e":"#168a17",this.fiftyCount.color=s[1]>r?"#ff3e3e":"#168a17"},o.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this.tenBtn,this,this.onOneHandler),this.onAutoClick(this.fiftyBtn,this,this.onTenHandler)},o.prototype.onOneHandler=function(){if(l.bag.BagModel.instance.getBagEnoughById(0)<1)n.instance.addNotice("道具背包已满，请先整理",!0);else{var t=c.instance.getOperByType(this.ctrl.lastZaDanType,this.model.fType)[0][2];if(l.bag.BagModel.instance.getItemCountById(t[0])<t[1])return l.bag.BagUtil.openLackPropAlert(t[0],1),void this.close();this.ctrl.LuckSmashEgg(this.ctrl.lastZaDanType,0,this.model.fType),this.close()}},o.prototype.onTenHandler=function(){if(l.bag.BagModel.instance.getBagEnoughById(0)<10)n.instance.addNotice("道具背包已满，请先整理",!0);else{var t=c.instance.getOperByType(this.ctrl.lastZaDanType,this.model.fType)[1][2];if(l.bag.BagModel.instance.getItemCountById(t[0])<t[1])return l.bag.BagUtil.openLackPropAlert(t[0],1),void this.close();this.ctrl.LuckSmashEgg(this.ctrl.lastZaDanType,1,this.model.fType),this.close()}},s=o,t.ZaDanRewards=s}(modules=modules||{}),function(t){var e,l,i,n,s,h,o,c,p,a;function r(){return null!==l&&l.apply(this,arguments)||this}e=t.zadan||(t.zadan={}),i=t.common.SimpleList,n=t.bag.BaseItem,s=laya.events.Event,h=t.player.PlayerModel,o=t.common.NumInputCtrl,c=t.bag.BagModel,p=t.common.CommonUtil,l=ui.ZaDanShopAlertUI,__extends(r,l),Object.defineProperty(r.prototype,"model",{get:function(){return e.ZaDanModel.instance},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ctrl",{get:function(){return e.ZaDanCtrl.instance},enumerable:!0,configurable:!0}),r.prototype.destroy=function(){this._itemList=this.destroyElement(this._itemList),l.prototype.destroy.call(this)},r.prototype.initialize=function(){l.prototype.initialize.call(this),this.baseItem.visible=!1,this._itemList=i.create(n,100,100,2,1,10,0),this._itemList.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._itemList),this._originX=this.listCon.x,this._price=new Array,this._input=new o(this.numInput,this.addBtn,this.reduceBtn,this.addTenBtn,this.reduceTenBtn)},r.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this._itemCfg=t[0];for(var e=t[1],i=this._itemCfg[3],n=[],s=0;s<i.length;s+=2)n.push([i[s],i[s+1],0,null]);this._itemList.datas=n,this.itemName.text=this._itemCfg[15],this.listCon.x=n.length<2?this._originX:2<n.length?this._originX-110:this._originX-55,this._price=this._itemCfg[5];var o=p.getItemTypeById(this._price[0]);this.totalPriceImg.skin=this.priceImg.skin=9==o?p.getIconById(this._price[0],!0):p.getIconById(this._price[0],!1),this.priceTxt.text=this._price[1].toString();var a=this._price[0],r=h.instance.getCurrencyById(a);null==r&&(r=c.instance.getItemCountById(a)),this._maxNum=Math.floor(r/this._price[1]),this._maxNum>e&&0!=e?this._input.max=e:this._input.max=this._maxNum,this._input.min=1,this._input.notice="购买数量",this._input.value=1,this.totalPriceTxt.text=(this._input.value*this._price[1]).toString()},r.prototype.puchaseHandler=function(){var t=this._itemCfg[2],e=this._input.value;0==e?p.goldNotEnoughAlert():this.ctrl.SmashEggMall(t,e,this.model.fType),this.close()},r.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.purchaseBtn,this,this.puchaseHandler),this.onAutoEvt(this._input,s.CHANGE,this,this.inputHandler),this._input.addListeners()},r.prototype.offEvt=function(){l.prototype.offEvt.call(this),this._input.removeListeners()},r.prototype.inputHandler=function(){var t=this._input.value;t>this._maxNum?this.totalPriceTxt.text=(this._maxNum*this._price[1]).toString():this.totalPriceTxt.text=(t*this._price[1]).toString()},a=r,e.ZaDanShopAlert=a}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="zhi_zhen/image_qypd_bg01.jpg",t}e=t.zhi_zhen_festival||(t.zhi_zhen_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.ZhiZhenFestFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenFestFestConLoginPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="he_qu/image_hq_03.jpg",t.titleTxt.text="连续充值",t}e=t.he_qu_continuous_pay||(t.he_qu_continuous_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.HeQuContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.HeQuContinuousPayItem},o.prototype.getRestTime=function(){return e.HeQuContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(441)},o.prototype.getMoneyAcc=function(){return e.HeQuContinuousPayModel.instance.moneyAcc},s=o,e.HeQuContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="he_qu/image_hq_6.jpg",t.titleTxt.text="每日累充",t}e=t.he_qu_cumulate_pay||(t.he_qu_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.HeQuCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.HeQuCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(442)},s=o,e.HeQuCumulatePayPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_festival||(t.he_qu_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=12,this._funcId=444},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="he_qu/image_hq_10.png",this.v.closeBtn.skin="common/btn_sc_close.png",this.v.bgImg.y=204,this.v.tipTxt.pos(323,364,!0),this.v.closeBtn.pos(625,235,!0),this.v.stateImg.pos(363,538,!0),this.v.goBtn.pos(320,529,!0),this.v.rewardBox.pos(198,407,!0),this.v.tipTxt.text="合区特惠,限时首充",this.v.tipTxt.color="#ffec7c",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.HeQuFestFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="he_qu/image_hq_4.jpg",t}e=t.he_qu_festival||(t.he_qu_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.HeQuFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuFestConLoginPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="he_qu/image_hq_05.jpg",t}e=t.he_qu_festival||(t.he_qu_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.HeQuFestDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuFestDailyRewardPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_festival||(t.he_qu_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="he_qu/image_hq_8.jpg",this.topImg.skin="he_qu/txt_hf_2.jpg",this.tipImg.skin="he_qu/image_hq_9.jpg",this.tipImg.pos(277,367,!0),this.timeTxt.y=910,this.text1.y=910,this.threeTxt.pos(28,957),this.leftBtn.visible=this.rightBtn.visible=!1,this.oneTxt.visible=this.TwoTxt.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#ffffff","SimHei",26,"center"),this.TwoTxt.innerHTML="",this.threeTxt.style.align="center",this.threeTxt.innerHTML="活动时间内,充值获得的仙玉无上限!",this._festType=12},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.HeQuFestHilarityPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_festival||(t.he_qu_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="he_qu/image_hq_8.jpg",this.topImg.skin="he_qu/txt_hf_1.jpg",this.tipImg.skin="he_qu/image_hq_7.jpg",this.tipImg.pos(277,367,!0),this.goBtn.visible=!1,this.titleTxt.text="双倍奖励",this.TwoTxt.visible=!1,this.oneTxt.y=910,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，上述玩法所有奖励全部翻倍！",this.threeTxt.innerHTML="(金币真气的额外奖励不计入最高记录中)",this._festType=12},s.prototype.leftHandler=function(){WindowManager.instance.open(57)},s.prototype.rightHandler=function(){WindowManager.instance.open(194)},n=s,e.HeQuFestDoubleRewardPanel=n}(modules=modules||{}),function(e){var i,n,t,s,o,a;function r(){return n.call(this)||this}i=e.he_qu_online_reward||(e.he_qu_online_reward={}),t=e.common.CustomList,s=e.config.OnlineGiftCfg,o=e.player.PlayerModel,n=ui.HeQuOnlineRewardViewUI,__extends(r,n),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),n.prototype.destroy.call(this,t)},r.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._showIds=new Array,this._rewardList=new Array,this._list=new t,this._list.width=610,this._list.height=780,this._list.hCount=1,this._list.spaceX=3,this._list.itemRender=i.HeQuOnlineRewardItem,this._list.x=53,this._list.y=305,this.addChild(this._list),this.createList(),this._htmlTxt=this._htmlTxt1="<span style='color:#4c5e8a;font-size: 24px'>在线时间每日凌晨</span><span style='color:#168a17;font-size: 24px'>5</span><span style='color:#4c5e8a;font-size: 24px'>点重置</span><br/>",this._htmlTxt+="<span style='color:#4c5e8a;font-size: 24px'>激活</span>",this._htmlTxt+="<span style='color:#b15315;font-size: 24px;'>月卡</span>",this._htmlTxt+="<span style='color:#4c5e8a;font-size: 24px;'>领取</span>",this._htmlTxt+="<span style='color:#b15315;font-size:36px'>双倍</span>",this._htmlTxt+="<span style='color:#4c5e8a;font-size: 24px'>签到奖励</span>",this._htmlTxt1=this._htmlTxt,this._htmlTxt1+="<span style='color:#168a17;font-size: 24px'>(已激活)</span>"},r.prototype.createList=function(){for(var t=s.instance.getCfgsByEralv(o.instance.eraLevel),e=0;e<t.length;e++)this._rewardList.push(t[e])},r.prototype.updateList=function(){var t=i.HeQuOnlineRewardModel.instance.UpdateRewardReply;this._list.datas=i.HeQuOnlineRewardModel.instance.listSort(t)},r.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("HEQU_ONLINE_REWARD_UPDATA",this,this.updateList),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){e.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},r.prototype.awardReply=function(){var t=i.HeQuOnlineRewardModel.instance.AwardReply;0!=t&&e.common.CommonUtil.noticeError(t)},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),i.HeQuOnLineRewardCtrl.instance.getFestivalOnlineState(),this.updateList()},r.prototype.okBtnHandler=function(){WindowManager.instance.open(100)},a=r,i.HeQuOnLineRewardPanel=a}(modules=modules||{}),function(o){var a,e,t,i,n,s,r;function l(){return e.call(this)||this}a=o.he_qu_xunbao_happy||(o.he_qu_xunbao_happy={}),t=o.common.CustomList,i=o.common.CommonUtil,n=o.funcOpen.FuncOpenModel,s=ui.HeQuXunBaoHappyViewUI,e=s,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=t.create("v",39,330,640,626,a.HeQuXunbaoHappyItem,6),this.addChildAt(this._list,3),this.bgImg.skin="he_qu/image_hq_02.jpg",i.setHTMLPro(this.htmlTips,"#ffffff","SimHei",28,"right")},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("HEQU_XUNBAO_UPDATA",this,this.updateView),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateView),this.onAutoClick(this.okBtn,this,i.gotoSuggestUp),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){o.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},l.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},l.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setActivitiTime(),this.updateView()},l.prototype.updateView=function(){var t=a.HeQuXunBaoHappyModel.instance.data[1];if(t&&!(t.length<=0)){this._list.datas=a.HeQuXunBaoHappyModel.instance.statelistSort(t),this.showUI();var e=["装备","巅峰","至尊","符文","法宝"],i=o.config.XunBaoHappyCfg.instance.getDayByXunBaoCfg(a.HeQuXunBaoHappyModel.instance.day,12)[2];this.discountMsc.text="("+e[i[0]]+"寻宝"+Math.round(10*i[1])+"折)";var n=o.config.XunBaoHappyCfg.instance.getDayByXunBaoCfg(a.HeQuXunBaoHappyModel.instance.day+1,12);if(n){var s=n[2];this.htmlTips.innerHTML="明日狂欢为<span style='color:#50ff28'>【"+e[s[0]]+"寻宝】</span>"}else this.htmlTips.visible=!1;this.setActivitiTime()}},l.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler);var t=n.instance.getFuncIsOpen(449),e=a.HeQuXunBaoHappyModel.instance.isAcrionOpen();i.getZero0clockTimeStamp()>=GlobalData.serverTime&&t&&e?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.close())},l.prototype.activityHandler=function(){this.activityText.text=""+i.timeStampToHHMMSS(i.getZero0clockTimeStamp()),i.getZero0clockTimeStamp()<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},l.prototype.showUI=function(){this.okBtn.visible=!0,this.wanChengImg.visible=!1,o.fight_talisman.FightTalismanModel.instance.state?-1==o.gloves.GlovesModel.instance.state?(this.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(85,1047)):o.money_cat.MoneyCatModel.instance.state?!o.halo.HaloModel.instance.isHalo()&&o.halo.HaloModel.instance.haloOpen?(this.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.tipsText.text="仙玉不够花？",this.tipsImg.pos(99,1053)):(0==o.zhizun.ZhizunModel.instance.state||(this.okBtn.visible=!1,this.wanChengImg.visible=!0),this.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.tipsText.text="火速升级,首选特权卡",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.tipsText.text="元宝不够花？",this.tipsImg.pos(99,1029)):(this.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.tipsText.text="战力成长慢",this.tipsImg.pos(76,1033))},r=l,a.HeQuXunbaoHappyPanel=r}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("hunting_planner")},n.prototype.getCfgById=function(t,e){for(var i=this._cfg.length,n=0;n<i;n++)if(this._cfg[n][2]===e&&t===this._cfg[n][0])return this._cfg[n];return null},i=n,e.HuntingPlannerCfg=i}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.config||(t.config={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._cfg=new n;for(var t=GlobalData.getConfig("hunting_const"),e=t.length,i=0;i<e;i++)t[i]&&this._cfg.set(t[i][0],t[i])},s.prototype.getCfgByFestivalType=function(t){return this._cfg.get(t)},i=s,e.HuntingConstCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("hunting_reward")},n.prototype.getCfgArrByfestivalType=function(i,n,t){var e=this._cfg,s=e[1],o=ArrayUtils.binarySearchRange(e[0],function(t,e){return i==t?n-s[e]:i-t});if(o){for(var a=[],r=o[0];r<=o[1];++r){var l=GlobalData.getTupleAt3(e,r),h=l[2];h[0]<=t&&h[1]>=t&&a.push(l)}return a}return null},n.prototype.getPlannerIdByCfg=function(t,e,i){for(var n=this.getCfgArrByfestivalType(e,1,i),s=0,o=n.length;s<o;s++)if(-1<n[s][5].indexOf(t))return n[s];return null},i=n,e.HuntingRewardCfg=i}(modules=modules||{}),function(r){var u,e,h,d,t,p,y,g,f,i,n;function s(){var t=e.call(this)||this;return t.count=0,t.max=1,t.isEff=!1,t}u=r.hit_engineer||(r.hit_engineer={}),h=r.common.CustomClip,d=r.common.CommonUtil,t=r.common.ProgressBarCtrl,p=r.config.HuntingPlannerCfg,y=r.config.ItemMaterialCfg,g=r.bag.BagModel,f=r.config.HuntingConstCfg,i=r.notice.SystemNoticeManager,e=ui.HitEngineerViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.countNum=0,this._hpBarAllCtrl=new t(this.hpBarAll,495),this._hpBarAllCtrl.maxValue=100,this._hpBarAllCtrl.value=0,this._singleHurtBar=new t(this.singleHurtBar,356),this._singleHurtBar.maxValue=100,this._singleHurtBar.value=100,this.btnImgs=[this.btn1,this.btn2,this.btn3],this.count_arr=[this.name1Count,this.name2Count,this.name3Count],this.fake_hp=0,d.setHTMLPro(this.skillHtml,"#4c5e8a","SimHei",24),this.skillHtml.innerHTML="<span style='color:#50ff28'>1次</span>",this._isRecive=!1,this._isSkill=!1,this.rp_arr=[this.rpImg1,this.rpImg2,this.rpImg3],this.gold_tab=[this.goldImg1,this.goldImg2,this.goldImg3],this.tips_arr=[this.tips1,this.tips2,this.tips3],this.timeTxt.visible=this.timeTxt1.visible=!1,this.bossId=0,this.showEffevt(),this.timeTxt.visible=this.timeTxt1.visible=0<u.HitEngineerModel.instance.nextAppearTm,this.model.visible=this.hpBarAll.visible=this.hpBarAllBase.visible=this.hpTxt.visible=u.HitEngineerModel.instance.nextAppearTm<=0},s.prototype.clearTimer=function(){Laya.timer.clear(this,this.btnHandler),this.cancelAutoBtn.visible=!1},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.caiQiReceiveBtn,this,this.caiQiReceiveBtnHandler),this.onAutoClick(this.btn1,this,this.autobtnHandler,[0]),this.onAutoClick(this.btn2,this,this.autobtnHandler,[1]),this.onAutoClick(this.btn3,this,this.autobtnHandler,[2]),this.onAutoClick(this.logBtn,this,this.logBtnHandler),this.onAutoClick(this.helpBtn,this,this.onHelpHandler),this.onAutoGlobalEvt("UPDATA_PLANNER_TIMER_VIEW",this,this.addTimer),this.onAutoGlobalEvt("UPDATA_PLANNER_ONLY_HP",this,this.hpAndplannerUpdata),this.onAutoGlobalEvt("UPDATA_PLANNER_ONLY_ANNIHILATOR",this,this.hpAndplannerUpdata),this.onAutoGlobalEvt("UPDATA_AUTO_SELECT",this,this.updateView),this.onAutoClick(this.DSFrameImg,this,this.shillHandler),this.onAutoClick(this.setTxt,this,this.setTxtHandler),this.onAutoClick(this.cancelAutoBtn,this,this.clearTimer),this.onAutoGlobalEvt("UPDATA_PLANNER_VIEW",this,this.updateView),u.HitEngineerEffUtlis.instance.on()},s.prototype.onHelpHandler=function(){d.alertHelp(19006)},s.prototype.setTxtHandler=function(){WindowManager.instance.open(1351),this.clearTimer()},s.prototype.logBtnHandler=function(){WindowManager.instance.open(758)},s.prototype.addTimer=function(){var t=this;Laya.timer.clear(this,this.updateTime);var e=u.HitEngineerModel.instance.nextAppearTm<=GlobalData.serverTime?300:0;setTimeout(function(){t.model.visible=t.hpBarAll.visible=t.hpBarAllBase.visible=t.hpTxt.visible=u.HitEngineerModel.instance.nextAppearTm<=GlobalData.serverTime,t.timeTxt.visible=t.timeTxt1.visible=u.HitEngineerModel.instance.nextAppearTm>GlobalData.serverTime},e),u.HitEngineerModel.instance.nextAppearTm>GlobalData.serverTime&&(this.timeTxt.text=Math.floor((u.HitEngineerModel.instance.nextAppearTm-GlobalData.serverTime)/1e3)+"秒",Laya.timer.loop(1e3,this,this.updateTime))},s.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),this.time>=GlobalData.serverTime?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="活动倒计时:",this.activityText1.x=234,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.activityText1.x=234,this.activityText1.x=299)},s.prototype.activityHandler=function(){this.activityText.text=d.timeStampDDHHMMToHHMMSS(this.time),this.activityText1.x=234,GlobalData.serverTime>this.time&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",this.activityText1.x=299,Laya.timer.clear(this,this.activityHandler))},s.prototype.updateTime=function(){u.HitEngineerModel.instance.nextAppearTm<=GlobalData.serverTime?Laya.timer.clear(this,this.updateTime):this.timeTxt.text=Math.floor((u.HitEngineerModel.instance.nextAppearTm-GlobalData.serverTime)/1e3)+"秒"},s.prototype.caiQiReceiveBtnHandler=function(){u.HitEngineerModel.instance.data&&(this._isRecive?u.HitEngineerCtrl.instance.DrawStageReward():WindowManager.instance.open(757))},s.prototype.autobtnHandler=function(t){var e=this;this.clearTimer(),this.count=0;var i=f.instance.getCfgByFestivalType(u.HitEngineerModel.instance.festivalType),n=i[1],s=i[5],o=u.HitEngineerModel.instance.getUseCnt(n[t]);if(0===u.HitEngineerModel.instance.autoDate?this.max=o+1:this.max=o,0===o)if(s[2*t]){var a=PlayerModel.instance.getCurrencyById(s[2*t]);null==a&&(a=g.instance.getItemCountById(s[2*t])),a<s[2*t+1]?this.glodBtnHandler(s[2*t]):WindowManager.instance.open(759,t)}else WindowManager.instance.open(106,[n[t],0,!0]);else 1===o?(this.btnHandler(t),0===u.HitEngineerModel.instance.autoDate&&Laya.timer.once(200,this,function(){e.btnHandler(t)})):Laya.timer.loop(200,this,this.btnHandler,[t])},s.prototype.btnHandler=function(t){if(this.count>=this.max)this.clearTimer();else{var e=f.instance.getCfgByFestivalType(u.HitEngineerModel.instance.festivalType),i=e[1];if(0===this.count&&1<this.max&&(this.cancelAutoBtn.visible=!0,this.cancelAutoBtn.x=[62,193,326][t]||193),0===u.HitEngineerModel.instance.autoDate&&1===u.HitEngineerModel.instance.getUseCnt(i[t])&&(this.cancelAutoBtn.visible=!1),this.count++,GlobalData.serverTime>this.time)return r.notice.SystemNoticeManager.instance.addNotice("活动已结束",!0),void this.clearTimer();var n=u.HitEngineerModel.instance.data;if(n){if(0===u.HitEngineerModel.instance.true_nextAppearTm&&0===n[4][1])return r.notice.SystemNoticeManager.instance.addNotice("所有圣诞树已装饰完成",!0),void this.clearTimer();var s=e[5];if(0<g.instance.getItemCountById(i[t])){u.HitEngineerCtrl.instance.HuntingPlanner(1,i[t]);var o=y.instance.getItemCfgById(i[t])[9];this.faKeLHpUpdata(o[0],t),0<=u.HitEngineerModel.instance.nextAppearTm-GlobalData.serverTime&&this.clearTimer()}else{if(s[2*t]){var a=PlayerModel.instance.getCurrencyById(s[2*t]);null==a&&(a=g.instance.getItemCountById(s[2*t])),a<s[2*t+1]?this.glodBtnHandler(s[2*t]):WindowManager.instance.open(759,t)}else WindowManager.instance.open(106,[i[t],0,!0]);this.clearTimer()}}else this.clearTimer()}},s.prototype.shillHandler=function(){this.clearTimer();var t=u.HitEngineerModel.instance.data;if(t)if(GlobalData.serverTime>this.time)r.notice.SystemNoticeManager.instance.addNotice("活动已结束",!0);else if(0!==u.HitEngineerModel.instance.true_nextAppearTm||0!==t[4][1])if(this._isSkill){u.HitEngineerCtrl.instance.HuntingPlanner(2);var e=f.instance.getCfgByFestivalType(u.HitEngineerModel.instance.festivalType)[2];this.faKeLHpUpdata(e,3,!0)}else i.instance.addNotice("能量不足,点击使用左边的道具可以增加能量",!0);else r.notice.SystemNoticeManager.instance.addNotice("所有圣诞树已装饰完成",!0)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),u.HitEngineerCtrl.instance.GetHuntingPlannerInfo(),u.HitEngineerModel.instance.rankData||u.HitEngineerCtrl.instance.GetHuntingRank(),this.cancelAutoBtn.visible=!1,this._scheEffect.play(),this.updateView(),this.hpUpdata(),this.endTime=0;var t=r.config.FestivalOpenCfg.instance.getCfgByType(u.HitEngineerModel.instance.festivalType);t&&(this.time=t[2][1],this.endTime=t[2][1]-GlobalData.serverTime+50,Laya.timer.once(this.endTime,this,this.endHanlder),this.setActivitiTime()),this.addTimer(),this.isEff=!1},s.prototype.endHanlder=function(){this.updateView(),u.HitEngineerModel.instance.setRP()},s.prototype.hpAndplannerUpdata=function(){this.hpUpdata(),this.plannerUpdata()},s.prototype.hpUpdata=function(){var t=u.HitEngineerModel.instance.data;if(t){var e=t[4],i=e[0],n=p.instance.getCfgById(i,u.HitEngineerModel.instance.festivalType);this.hpTxt.text=Math.round(n[4]-e[1])+"/"+n[4];var s=e[1]/n[4];s=1<s?1:s,this._hpBarAllCtrl.value=100*(1-s),this.fake_hp=e[1]}},s.prototype.faKeLHpUpdata=function(t,e,i,n){var s=u.HitEngineerModel.instance.data;if(s){var o=u.HitEngineerModel.instance.rankData;if(o){var a=o[2];if(n||!(GlobalData.serverTime>=a)||u.HitEngineerModel.instance.isNotice){var r=s[4][0],l=p.instance.getCfgById(r,u.HitEngineerModel.instance.festivalType);i&&(t=l[4]*t),t=t>this.fake_hp?this.fake_hp:t,this.fake_hp-=t,this.hpTxt.text=Math.round(l[4]-this.fake_hp)+"/"+l[4];var h=this.fake_hp/l[4];if(h=1<h?1:h,this._hpBarAllCtrl.value=100*(1-h),0<t){var c=[[0,[t]],[1,[e,i?1:0,t]],[3,[e]]];GlobalData.dispatcher.event("HIT_ENGINEE_SHOW_EFF",[c])}}}}},s.prototype.plannerUpdata=function(){var t=u.HitEngineerModel.instance.data;if(t){var e=t[4][2];e&&0<e.length?(this.nameTips.text=""+e[1],e[0]===PlayerModel.instance.actorId?this.hurtCount.text=d.bigNumToString(t[0]):this.hurtCount.text=d.bigNumToString(e[3]),this.headIcon.setInfo(e[4],e[2],e[5]),this.hurtCount.visible=!0,this.headIcon.visible=this.nameTips.visible=this.hurt.visible=this.hurtCount.visible=!0,this.noBody.visible=!1):(this.headIcon.visible=this.nameTips.visible=this.hurt.visible=this.hurtCount.visible=!1,this.noBody.visible=!0)}},s.prototype.updateView=function(t){var e=u.HitEngineerModel.instance.data;if(e){var i=e[4],n=i[0],s=p.instance.getCfgById(n,u.HitEngineerModel.instance.festivalType);if(this.txtName.text=s[1],t){this.hpTxt.text=Math.round(s[4]-i[1])+"/"+s[4];var o=i[1]/s[4];o=1<o?1:o,this._hpBarAllCtrl.value=100*(1-o),this.fake_hp=i[1]}var a=s[6];this.rewardBase.itemData?this.rewardBase.itemData[0]!=a[0]&&this.rewardBase.itemData[1]!=a[1]&&(this.rewardBase.dataSource=[a[0],a[1],0,null]):this.rewardBase.dataSource=[a[0],a[1],0,null];var r=e[5].length,l=u.HitEngineerModel.instance.getHurtCond();this.reciveImg.visible=!1,l&&r<l.length?(this.singleHurtTxt.text=e[0]+"/"+l[r],this._singleHurtBar.value=100*(e[0]/l[r]<1?e[0]/l[r]:1),this.rewardBase.visible=!0):(this.singleHurtTxt.text=this.singleHurtTxt.text=e[0]+"/"+l[l.length-1],this.reciveImg.visible=!0),l&&r<l.length&&e[0]>=l[r]&&GlobalData.serverTime<=this.time?(h.thisPlay(this._prizeEffect),this._isRecive=!0):(h.thisStop(this._prizeEffect),this._isRecive=!1),this.plannerUpdata(),this.updatapProp(),this.updataModel(s[5])}},s.prototype.updatapProp=function(){var t=u.HitEngineerModel.instance.data,e=f.instance.getCfgByFestivalType(u.HitEngineerModel.instance.festivalType),i=e[2];this.skillHtml.innerHTML="圣诞树装饰进度直接增加<span style='color:#168a17'>"+Math.round(100*i)+"%</span>",this.skillShoot.visible=!1;var n=t[1]/e[3];n=n<1?n:1,this._scheEffect.y=120-120*n,t[1]>=e[3]?(this.skillShoot.visible=!0,this._isSkill=!0,this.conrp.visible=GlobalData.serverTime<=this.time,this.skillProgress.y=85,this.skillProgress.fontSize=20,this.skillProgress.text="次数:"+Math.floor(t[1]/e[3])+"/1"):(this.skillShoot.visible=!1,this._isSkill=!1,this.conrp.visible=!1,this.skillProgress.y=56,this.skillProgress.fontSize=24,this.skillProgress.text=t[1]+"/"+e[3]);for(var s=e[1],o=e[5],a=s.length,r=0;r<a;r++){this.rp_arr[r].visible=!1;var l=y.instance.getItemCfgById(s[r])[9];this.tips_arr[r].text="进度:"+l[0]*u.HitEngineerModel.instance.getUseCnt(s[r],!0)}for(r=0;r<a;r++){var h=g.instance.getItemCountById(s[r]),c=u.HitEngineerModel.instance.getUseCnt(s[r],!0);if(0<h)this.count_arr[r].text=g.instance.getItemCountById(s[r])+"/"+c,this.count_arr[r].color="#2d1a1a",this.rp_arr[r].visible=GlobalData.serverTime<=this.time,this.gold_tab[r].skin=d.getIconById(s[r],!0);else if(h<=0)if(o[2*r]){this.gold_tab[r].skin=this.getStr(o[2*r]),this.count_arr[r].text=o[2*r+1]*c+"";var p=PlayerModel.instance.getCurrencyById(o[2*r]);null==p&&(p=g.instance.getItemCountById(o[2*r])),this.count_arr[r].color=p>=o[2*r+1]*c?"#2d1a1a":"#ff3e3e"}else this.count_arr[r].text=g.instance.getItemCountById(s[r])+"/"+u.HitEngineerModel.instance.getUseCnt(s[r],!0),this.count_arr[r].color="#ff3e3e",this.gold_tab[r].skin=d.getIconById(s[r],!0)}},s.prototype.getStr=function(t){return 94150001===t?"common/shenghuyu.png":90140001===t?"common/icon_tongyong_2.png":0===t?"":d.getIconById(t,!0)},s.prototype.close=function(){e.prototype.close.call(this),this.bossId=0,h.thisStop(this._prizeEffect),this.temp_effect&&(this.temp_effect.removeSelf(),this.temp_effect=null),this._tween&&(this._tween.stop(),this._tween=null),Laya.timer.clear(this,this.updateView),Laya.timer.clear(this,this.updateTime),this.clearTimer(),u.HitEngineerEffUtlis.instance.off()},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._prizeEffect&&(this._prizeEffect.removeSelf(),this._prizeEffect.destroy(),this._prizeEffect=null),this.temp_effect&&(this.temp_effect.removeSelf(),this.temp_effect.destroy(),this.temp_effect=null),this._tween&&(this._tween.stop(),this._tween=null),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},s.prototype.updataModel=function(t){this.bossId!==t&&(this.model.skin="assets/others/tree/"+t+".png")},s.prototype.glodBtnHandler=function(t){if(!PlatParams.isCloseRecharge){var e="元宝";if(94150001===t?e="仙玉":90140001===t&&(e="元宝"),0==r.first_pay.FirstPayModel.instance.giveState)if(94150001===t)WindowManager.instance.open(106,[94150001,0,!0]);else{var i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);d.alert("温馨提示",e+"不足，是否前往首充？",[i])}else r.money_cat.MoneyCatModel.instance.state?(i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),d.alert("温馨提示",e+"不足，是否前往充值界面充值？",[i])):94150001===t?WindowManager.instance.open(106,[94150001,0,!0]):WindowManager.instance.open(394)}},s.prototype.showEffevt=function(){this._scheEffect=h.create("assets/effect/wave.atlas","wave",8),this.conBox1.addChildAt(this._scheEffect,0),this._scheEffect.pos(8,158,!0),this._prizeEffect=h.create("assets/effect/ok_state.atlas","ok_state",8),this.addChildAt(this._prizeEffect,19),this._prizeEffect.scale(1,1,!0),this._prizeEffect.pos(this.caiQiReceiveBtn.x-87,this.caiQiReceiveBtn.y-93,!0)},Object.defineProperty(s.prototype,"modelClip",{get:function(){return null},enumerable:!0,configurable:!0}),s.prototype.getScale=function(t){return t<20?.6:t<40?.7:t<60?.8:t<80?.9:80<=t?1:.6},n=s,u.HitEngineerPanel=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("hunting_rank")},n.prototype.getCfgByRank=function(t,e,i){for(var n=this._cfg.length,s=0;s<n;s++){var o=this._cfg[s][0],a=this._cfg[s][2];if(o[0]<=t&&o[1]>=t&&a[0]<=e&&a[1]>=e&&i===this._cfg[s][1])return this._cfg[s]}return null},i=n,e.HuntingRankCfg=i}(modules=modules||{}),function(v){var e,i,b,n,s,T,t;function o(){return i.call(this)||this}e=v.hit_engineer||(v.hit_engineer={}),b=v.common.CommonUtil,n=v.common.AvatarClip,s=v.common.SimpleList,T=v.config.HuntingRankCfg,i=ui.HitEngineerKillerViewUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._rankList=s.create(e.HitEngineerKillerItem,646,164,1,1,0,2),this._rankList.size(646,364),this._rankList.x=36,this._rankList.y=697,this.addChild(this._rankList),this._avatar=n.create(1024,1024,768),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this.addChildAt(this._avatar,5),this.firstAwardArr=[this.firstAward1,this.firstAward2,this.firstAward3];for(var t=0;t<this.firstAwardArr.length;t++)this.firstAward1.visible=!1;this.titles.text="装饰达人",this.noticeMsc="装饰进度",this.hurtTxt.text="我的进度:",this.festivalType=e.HitEngineerModel.instance.festivalType,this.tipsDlog=19007,this.model=e.HitEngineerModel.instance,this.ctrl=e.HitEngineerCtrl.instance,this.noTxt1.color=this.noTxt.color,this.noTxt1.style.fontFamily=this.noTxt.font,this.noTxt1.style.fontSize=this.noTxt.fontSize,this.noTxt1.style.align=this.noTxt.align,this.noTxt1.style.strokeColor=this.noTxt.strokeColor,this.noTxt1.style.stroke=this.noTxt.stroke,this.round=1,this.model=e.HitEngineerModel.instance,this.ctrl=e.HitEngineerCtrl.instance},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.onHelpHandler),this.onAutoGlobalEvt("UPDATA_PLANNER_RANK_VIEW",this,this.updateView),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){v.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},o.prototype.onHelpHandler=function(){b.alertHelp(this.tipsDlog)},o.prototype.onJumpHandler=function(){WindowManager.instance.open(718)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.ctrl.GetHuntingRank(),this.updateView()},o.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},o.prototype.updateTime=function(){this.time<GlobalData.serverTime?(this.timeTxt1.text="本轮活动已结束",this.timeTxt1.color="#ff3e3e",this.timeTxt.text="",this.timeTxt1.x=290):(this.timeTxt1.color="#FFFFFF",this.timeTxt1.text="第"+this.round+"轮活动倒计时:",this.timeTxt1.x=217,this.timeTxt.text=b.timeStampDDHHMMToHHMMSS(this.time))},o.prototype.updateAvatar=function(t){var e=t&&0<t.length;if(this._avatar.visible=e,t){var i=t[2],n=(t[5],t[3]),s=(t[7],t[1]);this._avatar.pos(368,497),this._avatar.avatarRotationY=180,this._avatar.avatarRotationX=0,this._avatar.avatarScale=1,this._avatar.avatarY=0,this._avatar.avatarX=0,this._avatar.reset(s,i,n),this.observationItem.data=[[this._avatar,0]]}},o.prototype.addTime=function(){Laya.timer.clear(this,this.updateTime);var t=this.model.rankData;t&&(this.time=t[2],this.updateTime(),Laya.timer.loop(1e3,this,this.updateTime))},o.prototype.updateView=function(){var t=this.model.rankData,e=this.model.data,i=e[3];if(t&&e){var n=t[4]-1;this.round=t[4];for(var s=T.instance.getCfgByRank(1,i,this.festivalType),o=s[4][n],a=0;a<o.length;a+=2)this.firstAwardArr[Math.floor(a/2)].dataSource=[o[a],o[a+1],0,null],this.firstAwardArr[Math.floor(a/2)].visible=!0;this.valueTxt.text=b.bigNumToString(t[3]);var r=-1,l=t[0];for(a=0;a<l.length;a++)if(v.player.PlayerModel.instance.actorId===l[a][0]){r=l[a][6];break}this.myRankTxt.text=0<r?"第"+r+"名":"未上榜";var h=t[1],c=this.model.getRankByData(1);if(c){this.noTxt.visible=this.noTxt1.visible=!1,this.valueClip.value=c[5].toString(),this.topName.text=c[2];var p=c[3],u=c[1],d=c[4];this.headIcon.setInfo(p,u,d),this.headIcon.visible=!0}else this.topName.text="",this.valueClip.value="0",this.noTxt.visible=this.noTxt1.visible=!0,this.noTxt1.innerHTML=this.noticeMsc+"达到<span color='#50ff28'>"+b.bigNumToString(s[3])+"</span>可上榜",this.headIcon.visible=!1;var y=[];for(a=2;a<=50;a++){var g=[a,T.instance.getCfgByRank(a,i,this.festivalType)];y.push(g)}this._rankList.datas=y,this.updateAvatar(h),this.addTime();for(var f=JSON.parse(this.valueClip.value),_=0;0<f;)f=Math.floor(f/10),_++;0===_&&(_=1);var m=25.2*_+73;this.hurtImg.x=Math.floor((this.width-m)/2),this.valueClip.x=this.hurtImg.x+73}},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._rankList=this.destroyElement(this._rankList),this._avatar=this.destroyElement(this._avatar),this.observationItem=this.destroyElement(this.observationItem),i.prototype.destroy.call(this,t)},t=o,e.HitEngineerKillerPanel=t}(modules=modules||{}),function(e){var t,i,n,s,o,a,r;function l(){return i.call(this)||this}t=e.hit_engineer||(e.hit_engineer={}),n=e.common.CustomList,s=e.common.BtnGroup,o=ui.HitEngineerAwardViewUI,a=e.config.HuntingRewardCfg,i=o,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new n,this._list.width=660,this._list.height=914,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=127,this._list.itemRender=t.HitEngineerAwardItem,this.addChildAt(this._list,3),this._btns=new s,this._btns.setBtns(this.btnGroup_1,this.btnGroup_2),this.endTm=0,this.titleTxt.text="奖励品",this.festivalType=t.HitEngineerModel.instance.festivalType,this.model=t.HitEngineerModel.instance,this.ctrl=t.HitEngineerCtrl.instance},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btns,"change",this,this.btnsChangeHandler),this.onAutoGlobalEvt("UPDATA_PLANNER_VIEW",this,this.updateView)},l.prototype.btnsChangeHandler=function(){this.updateView()},l.prototype.endHanlder=function(){this.updateView(),this.model.setRP()},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),Laya.timer.clear(this,this.updateView),this._btns.selectedIndex=0,this.endTime=0,this.endTm=0;var t=e.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType);t&&(this.endTime=t[2][1]-GlobalData.serverTime+50,this.endTm=t[2][1],Laya.timer.once(this.endTime,this,this.endHanlder)),this.model.getAwardRP(2)&&this.endTm>GlobalData.serverTime?this._btns.selectedIndex=0:this.model.getAwardRP(3)&&this.endTm>GlobalData.serverTime?this._btns.selectedIndex=1:this._btns.selectedIndex=0,this.updateView()},l.prototype.updateView=function(){this.rpImg1.visible=this.model.getAwardRP(2)&&this.endTm>GlobalData.serverTime,this.rpImg2.visible=this.model.getAwardRP(3)&&this.endTm>GlobalData.serverTime;var t=this.model.data;if(t){var e=t[3],i=a.instance.getCfgArrByfestivalType(this.festivalType,this._btns.selectedIndex+2,e);this._list.datas=this.model.statelistSort(i,this._btns.selectedIndex+2)}},l.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.updateView)},l.prototype.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t),this._list=this.destroyElement(this._list)},r=l,t.HitEngineerAwardPanel=r}(modules=modules||{}),function(t){var o,e,i,n,a,s;function r(){return e.call(this)||this}o=t.hit_engineer||(t.hit_engineer={}),i=ui.HitEngineerLogAlertUI,n=laya.html.dom.HTMLDivElement,a=t.config.HuntingConstCfg,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.panel.vScrollBar.visible=!1,this.title.text="装饰日志",this.model=o.HitEngineerModel.instance,this.ctrl=o.HitEngineerCtrl.instance},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATA_PLANNER_LOG_VIEW",this,this.updateView)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.ctrl.GetHuntingLog(),this.updateView()},r.prototype.updateView=function(){if(this.htmlArr&&0<this.htmlArr.length)for(var t=0;t<this.htmlArr.length;t++)this.htmlArr[t].removeSelf();this.htmlArr=[];var e=o.HitEngineerModel.instance.huntingLog;if(e&&!(e.length<=0)){for(t=e.length-1;0<=t;t--){var i=e[t],n=this.createrHtml();if(this.htmlArr.push(n),this.panel.addChild(n),1===i[4]){var s=a.instance.getCfgByFestivalType(o.HitEngineerModel.instance.festivalType)[2];n.innerHTML="<span style='color:#0f81f5'>"+i[0]+"</span>对<span style='color:#b15315'>【"+i[1]+"】</span>使用了<span style='color:#168a15'>金色星星</span>，<span style='color:#b15315'>【"+i[1]+"】</span>装饰进度直接增加了<span style='color:#168a15'>"+100*s+"%。</span>"}else 2===i[4]?i[2]?n.innerHTML="<span style='color:#b15315'>【"+i[1]+"】</span>已装饰完成，本次的装饰小能手为<span style='color:#0f81f5'>"+i[0]+"</span>，获得了<span style='color:#b15315'>【小能手大奖】</span>。":n.innerHTML="<span style='color:#b15315'>【"+i[1]+"】</span>已装饰完成，本次的装饰小能手为<span style='color:#0f81f5'>"+i[0]+"</span>。":3===i[4]&&(n.innerHTML="<span style='color:#0f81f5'>"+i[0]+"</span>对<span style='color:#b15315'>【"+i[1]+"】</span> 进行最后装饰,获得最后装饰奖励。")}this.updataPanlView(this.htmlArr)}},r.prototype.destroy=function(t){void 0===t&&(t=!0),this.htmlArr=this.destroyElement(this.htmlArr)},r.prototype.createrHtml=function(){var t=new n;return CommonUtil.setHTMLPro(t,"#344c6f","SimHei",26),t.width=561,t.style.leading=8,t.style.wordWrap=!0,t},r.prototype.updataPanlView=function(t){if(0!==t.length){var e=this.htmlArr.length;if(t[0].x=0,t[0].y=0,!(e<=1))for(var i=1;i<e;i++)t[i]&&(t[i].x=0,t[i].y=t[i-1].contextHeight+t[i-1].y+4)}},s=r,o.HitEngineerLogAlert=s}(modules=modules||{}),function(a){var r,l,i,e,n,s,h,t;function o(){return null!==l&&l.apply(this,arguments)||this}r=a.hit_engineer||(a.hit_engineer={}),i=laya.events.Event,e=a.common.NumInputCtrl,n=a.config.HuntingConstCfg,s=a.commonAlert.PropAlertUtil,h=a.config.GetWayCfg,l=ui.HitEngineeShopAlertUI,__extends(o,l),o.prototype.initialize=function(){l.prototype.initialize.call(this),this._numInputCtrl=new e(this.numInput,this.addBtn,this.minusBtn,this.addTenBtn,this.minusTenBtn),this._numInputCtrl.min=0,this._sourceBtns=new Array,this._image=new Array,this._desTxt=new Array;for(var t=0;t<4;t++)this._sourceBtns[t]=new Laya.Image,this._image[t]=new Laya.Image,this._desTxt[t]=new laya.display.Text,s.setDesTxt(this._desTxt[t]),this._sourceBtns[t].mouseEnabled=!0;this.festivalType=r.HitEngineerModel.instance.festivalType,this.model=r.HitEngineerModel.instance,this.ctrl=r.HitEngineerCtrl.instance},o.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.sureBtnHandler);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t]);this._numInputCtrl.addListeners(),this._numInputCtrl.on(i.CHANGE,this,this.sortcutBuy)},o.prototype.offEvt=function(){l.prototype.offEvt.call(this),this._numInputCtrl.off(i.CHANGE,this,this.sortcutBuy),this._numInputCtrl.removeListeners()},o.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this._type=t,this._cfg=n.instance.getCfgByFestivalType(this.festivalType)},o.prototype.onOpened=function(){l.prototype.onOpened.call(this);var t=this._cfg[1][this._type],e=this._cfg[5][2*this._type];this.taskItem.dataSource=[t,1,0,null];var i=a.config.ItemMaterialCfg.instance.getItemCfgById(t);this.itemName.text=i[1];var n=PlayerModel.instance.getCurrencyById(e);null==n&&(n=a.bag.BagModel.instance.getItemCountById(e));var s=Math.floor(n/this._cfg[5][2*this._type+1]);this._numInputCtrl.max=s;var o=r.HitEngineerModel.instance.getUseCnt(t);o=o<s?o:s,this._numInputCtrl.value=o||1,this._numInputCtrl.min=1,this._numInputCtrl.notice="购买数量",94150001===e?(this.goldImg.skin="common/shenghuyu.png",this.lgoldImg.skin="common/shenghuyu.png"):90140001===e?(this.goldImg.skin="common/icon_tongyong_2.png",this.lgoldImg.skin="common/icon_tongyong_2.png"):(this.lgoldImg.skin=CommonUtil.getIconById(e,!0),this.goldImg.skin=CommonUtil.getIconById(e,!0)),this.moneyTxt.text=this._cfg[5][2*this._type+1].toString(),this.updataView()},o.prototype.updataView=function(){for(var t=this._cfg[1][this._type],e=CommonUtil.getItemCfgById(t)[4===CommonUtil.getItemTypeById(t)?6:10],i=0,n=e.length;i<n;i++)this.getWayBtn(this._sourceBtns[i],e[i],e.length,i,this._image[i]);this.sortcutBuy()},o.prototype.sortcutBuy=function(){var t=this._cfg[5][2*this._type+1];this.allMoneyTxt.color=0<=PlayerModel.instance.ingot?"#1f304d":"#ff3e3e",this.allMoneyTxt.text=""+this._numInputCtrl.value*t},o.prototype.sureBtnHandler=function(){if(this._cfg){var t=this._cfg[5],e=t[2*this._type],i=t[2*this._type+1];if(e){var n=PlayerModel.instance.getCurrencyById(e);if(null==n&&(n=a.bag.BagModel.instance.getItemCountById(e)),n<i*this._numInputCtrl.value)return void this.glodBtnHandler(e);if(0===this._numInputCtrl.value)return void this.glodBtnHandler(e)}this.ctrl.BuyHuntingItem(this._type,this._numInputCtrl.value),this.close()}},o.prototype.getOpenPlaneId=function(t){var e=CommonUtil.getItemCfgById(this._cfg[1][this._type])[10],i=h.instance.getCfgById(e[t]),n=i[0];if(942!==n&&943!==n||a.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!0)){500!=n?(this.close(),WindowManager.instance.closeAllDialog()):a.notice.SystemNoticeManager.instance.addNotice("请多关注游戏内活动哦",!1);var s=i[3][0];a.commonAlert.PropAlertUtil.skipScene(s)}},o.prototype.getWayBtn=function(t,e,i,n,s){var o;this.addChild(s),this.addChild(t),o=h.instance.getCfgById(e),t.pos(30+.5*(660-158*i+42*(i-1))+116*n,530),t.skin="assets/icon/ui/get_way/"+o[1]+".png",s.skin="assets/icon/ui/get_way/btn_ydrk_bg.png",s.pos(t.x,t.y),t.addChild(this._desTxt[n]),this._desTxt[n].pos(6,70),this._desTxt[n].text=o[2]},o.prototype.destroy=function(){this._sourceBtns=this.destroyElement(this._sourceBtns),this._image=this.destroyElement(this._image),this._desTxt=this.destroyElement(this._desTxt),l.prototype.destroy.call(this)},o.prototype.glodBtnHandler=function(t){var e="元宝";if(94150001===t?e="仙玉":90140001===t&&(e="元宝"),0==a.first_pay.FirstPayModel.instance.giveState)if(94150001===t)WindowManager.instance.open(106,[94150001,0,!0]);else{var i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);CommonUtil.alert("温馨提示",e+"不足，是否前往首充？",[i])}else a.money_cat.MoneyCatModel.instance.state?(i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),CommonUtil.alert("温馨提示",e+"不足，是否前往充值界面充值？",[i])):94150001===t?WindowManager.instance.open(106,[94150001,0,!0]):WindowManager.instance.open(394)},t=o,r.HitEngineerShopAlert=t}(modules=modules||{}),function(t){var a,r,e,i;function n(){return null!==r&&r.apply(this,arguments)||this}a=t.hit_engineer||(t.hit_engineer={}),e=t.common.CustomList,r=ui.HitEngineerStageAwardAlertUI,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),this._list=new e,this._list.width=610,this._list.height=710,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=30,this._list.y=125,this.addChild(this._list),this._list.itemRender=a.HitEngineerStageAwardItem,this.titleTxt.text="增加进度奖励",this.festivalType=a.HitEngineerModel.instance.festivalType,this.model=a.HitEngineerModel.instance,this.ctrl=a.HitEngineerCtrl.instance},n.prototype.onOpened=function(){r.prototype.onOpened.call(this);var t=this.model.data;if(t){t[4][0];for(var e=t[5].length,i=a.HitEngineerModel.instance.getHurtCond(),n=[],s=[],o=0;o<i.length;o++)o<e?n.push(o):s.push(o);this._list.datas=s.concat(n)}},i=n,a.HitEngineerStageAwardAlert=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_engineer||(t.hit_engineer={}),i=ui.HitEngineerTxtAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.msc.text="本轮装饰达人排名活动已结束，使用道具可在装饰圣诞中增加装饰进度，但装饰进度不会计入到排名中，是否继续？",this.model=e.HitEngineerModel.instance,this.ctrl=e.HitEngineerCtrl.instance},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.okHandler),this.onAutoClick(this.noticeBtn,this,this.sbtnHandler),this.onAutoClick(this.cancelBtn,this,this.close)},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.callBack=t},s.prototype.okHandler=function(){this.callBack(),this.close()},s.prototype.sbtnHandler=function(){this.model.isNotice!==this.noticeBtn.selected&&(this.model.isNotice=this.noticeBtn.selected)},n=s,e.HitEngineerTxtAlert=n}(modules=modules||{}),function(a){var t,r,e,i;function n(){return r.call(this)||this}t=a.hit_engineer||(a.hit_engineer={}),e=a.bag.BaseItem,r=ui.HitEngineerLastAwardAlertUI,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),this._bagItem=new e,this.addChild(this._bagItem),this._bagItem.pos(282,262,!0),this._bagItem.nameVisible=!1,this.txtMsc="进行了最后装饰",this.model=t.HitEngineerModel.instance,this.ctrl=t.HitEngineerCtrl.instance,this.festivalType=t.HitEngineerModel.instance.festivalType},n.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close),Laya.timer.loop(1e3,this,this.loopHandler)},n.prototype.offEvt=function(){r.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},n.prototype.setOpenParam=function(t){r.prototype.setOpenParam.call(this,t);var e=this.model.data;if(e){var i=e[4][0],n=a.config.HuntingPlannerCfg.instance.getCfgById(i,this.festivalType),s=n[1];if(this.tips.text="您对【"+s+"】"+this.txtMsc+"，获得奖励如下：",n){var o=n[7];this._bagItem.dataSource=[o[0],o[1],0,null]}else this.close()}},n.prototype.onOpened=function(){r.prototype.onOpened.call(this),this._duration=3e3,this.loopHandler()},n.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration/1e3+")",this._duration-=1e3},i=n,t.HitEngineerLastAwardalert=i}(modules=modules||{}),function(n){var t,l,e,h,i,c,p,s;function o(){return l.call(this)||this}t=n.festival||(n.festival={}),e=laya.events.Event,h=n.player.PlayerModel,i=n.common.NumInputCtrl,c=n.bag.BagModel,p=n.common.CommonUtil,l=ui.StoreAlertUI,__extends(o,l),o.prototype.initialize=function(){l.prototype.initialize.call(this),this._price=new Array,this._input=new i(this.numInput,this.addBtn,this.reduceBtn,this.addTenBtn,this.reduceTenBtn)},o.prototype.setOpenParam=function(t){l.prototype.setOpenParam.call(this,t),this._itemCfg=t[0];var e=t[1];this.types=t[2];var i=this._itemCfg[3],n=i[0],s=i[1];this._price=this._itemCfg[5],this.baseItem.dataSource=[n,s,0,null],this.itemName.text=this.baseItem._nameTxt.text;var o=p.getItemTypeById(this._price[0]);this.totalPriceImg.skin=this.priceImg.skin=9==o?p.getIconById(this._price[0],!0):p.getIconById(this._price[0],!1),this.priceTxt.text=this._price[1].toString();var a=this._price[0],r=h.instance.getCurrencyById(a);null==r&&(r=c.instance.getItemCountById(a)),this._maxNum=Math.floor(r/this._price[1]),this._maxNum>e&&0!=e?this._input.max=e:this._input.max=this._maxNum,this._input.min=1,this._input.notice="购买数量",this._input.value=1,this.totalPriceTxt.text=(this._input.value*this._price[1]).toString()},o.prototype.puchaseHandler=function(){var t=this._itemCfg[2],e=this._input.value;if(0==e)90140001==t?p.goldNotEnoughAlert():n.bag.BagUtil.openLackPropAlert(t,1);else{var i=new Array;i.push([t,e,0,null]),n.bag.BagUtil.canAddItemsByBagIdCount(i)&&this.types&&n.li_dong_store.LiDongStoreCtrl.instance.FestivalMallBuy(this.types,t,e)}this.close()},o.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.purchaseBtn.on(e.CLICK,this,this.puchaseHandler),this._input.on(e.CHANGE,this,this.inputHandler),this._input.addListeners()},o.prototype.offEvt=function(){l.prototype.offEvt.call(this),this.purchaseBtn.off(e.CLICK,this,this.puchaseHandler),this._input.off(e.CHANGE,this,this.inputHandler),this._input.removeListeners()},o.prototype.inputHandler=function(){var t=this._input.value;t>this._maxNum?this.totalPriceTxt.text=(this._maxNum*this._price[1]).toString():this.totalPriceTxt.text=(t*this._price[1]).toString()},s=o,t.FestBaseStoreAlert=s}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.zhi_zhen_festival||(s.zhi_zhen_festival={}),o=s.festival.FestDoubleRewardBasePanel,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.bgImg.skin="zhi_zhen/image_zzqy_bg16.jpg",this.titleTxt.text="掉落狂欢",this.foureTxt.innerHTML="活动内容：活动时间内，上述玩法所有奖励全部翻倍！",this.fiveTxt.innerHTML="(金币真气的额外奖励不计入最高记录中)";var t=CommonUtil.getColorById(15040032),e=CommonUtil.getNameByItemId(15040032),i=CommonUtil.getColorById(13240073),n=CommonUtil.getNameByItemId(13240073);this._festType=s.festival.FestivalModel.instance.zhiZhenType,this.oneTxt.innerHTML="活动期间内,参与玩法可掉落【<span style='color:"+t+"'>"+e+"</span>】或【<span style='color:"+i+"'>"+n+"</span>】",this.TwoTxt.innerHTML="<span style='color:"+t+"'>"+e+"</span>可在<span style='color:#50ff28'>【至臻兑换】</span>中兑换稀有奖励",this.threeTxt.innerHTML="<span style='color:"+i+"'>"+n+"</span>可以用于参与<span style='color:#50ff28'>【藏宝之地】</span>玩法"},i.prototype.leftHandler=function(){WindowManager.instance.open(57)},i.prototype.rightHandler=function(){WindowManager.instance.open(194)},e=i,t.ZhiZhenFestDoubleRewardPanel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhi_zhen_festival||(t.zhi_zhen_festival={}),i=t.festival.ConvertBasePanel,__extends(s,i),Object.defineProperty(s.prototype,"itemId1",{get:function(){return 15040024},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemId2",{get:function(){return 15050024},enumerable:!0,configurable:!0}),s.prototype.getItemClass=function(){return e.ZhiZhenFestConvertItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),s.prototype.goHandler=function(){WindowManager.instance.open(840)},s.prototype.setUI=function(){this.oneImg.skin=CommonUtil.getIconById(15040023),this.bgImg.skin="zhi_zhen/image_zzqy_bg15.jpg",this.titileTxt.text="至臻集字",this.oneImg.visible=this.countOneTxt.visible=!0},Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.zhiZhenTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"ZHIZHEN_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenFestConvertPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhi_zhen_festival||(t.zhi_zhen_festival={}),i=t.festival.ConvertBasePanel,__extends(s,i),Object.defineProperty(s.prototype,"itemId1",{get:function(){return 15040032},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemId2",{get:function(){return 15050032},enumerable:!0,configurable:!0}),s.prototype.getItemClass=function(){return e.ZhiZhenFestConvertItem1},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),s.prototype.goHandler=function(){WindowManager.instance.open(986)},s.prototype.setUI=function(){this.bgImg.skin="zhi_zhen/image_zzqy_bg15.jpg",this.titileTxt.text="至臻兑换"},Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.zhiZhenTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"ZHIZHEN_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenFestConvertPanel1=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=i.call(this)||this;return t.showTip(),t}e=t.zhi_zhen_festival||(t.zhi_zhen_festival={}),n=ui.FestAlertUI,s=t.config.BlendCfg,i=n,__extends(a,i),a.prototype.showTip=function(){this.titleTxt1.text="【"+CommonUtil.getNameByItemId(15040023)+"】来源",this.titleTxt2.text="【"+CommonUtil.getNameByItemId(15040024)+"】来源",this.titleTxt3.text="【"+CommonUtil.getNameByItemId(15050024)+"】来源",CommonUtil.setHTMLPro(this.tipHtml1,"#4c5e8a","SimHei",22),CommonUtil.setHTMLPro(this.tipHtml2,"#4c5e8a","SimHei",22),CommonUtil.setHTMLPro(this.tipHtml3,"#4c5e8a","SimHei",22),this.tipHtml1.style.leading=this.tipHtml2.style.leading=this.tipHtml3.style.leading=2,this.tipHtml1.innerHTML=s.instance.getCfgById(67029)[2][0],this.tipHtml2.innerHTML=s.instance.getCfgById(67030)[2][0],this.tipHtml3.innerHTML=s.instance.getCfgById(67031)[2][0]},o=a,e.ZhiZhenFestAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){var t=i.call(this)||this;return t.showTip(),t}e=t.zhi_zhen_festival||(t.zhi_zhen_festival={}),n=ui.FestAlertUI,s=t.config.BlendCfg,i=n,__extends(a,i),a.prototype.showTip=function(){this.height=this.bgImg.height=this.backTxt.y=486,this.bgImg3.visible=this.tipHtml3.visible=this.titleImg3.visible=this.titleTxt3.visible=!1;var t=CommonUtil.getNameByItemId(15040032),e=CommonUtil.getNameByItemId(15050032);this.titleTxt1.text="【"+t+"】来源",this.titleTxt2.text="【"+e+"】来源",CommonUtil.setHTMLPro(this.tipHtml1,"#4c5e8a","SimHei",22),CommonUtil.setHTMLPro(this.tipHtml2,"#4c5e8a","SimHei",22),this.tipHtml1.style.leading=this.tipHtml2.style.leading=2,this.tipHtml1.innerHTML=s.instance.getCfgById(67038)[2][0],this.tipHtml2.innerHTML=s.instance.getCfgById(67039)[2][0]},o=a,e.ZhiZhenFestAlert1=o}(modules=modules||{}),function(t){var i,e,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}i=t.mysterious_store||(t.mysterious_store={}),n=t.notice.SystemNoticeManager,e=ui.MysteriousStoreAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.mscImg.centerX=0,this.count=0,this.isTrue=!1,this.creatEffect()},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.turnbtn,this,this.turnHanlder),this.onAutoGlobalEvt("MYSTERIOUS_STORE_LOTTERY",this,this.trueEffect)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.isTrue=!1,this.card.scaleX=1,i.MysteriousStoreModel.instance.toDayEndTm&&Laya.timer.once(i.MysteriousStoreModel.instance.toDayEndTm,this,this.close),this.updataView()},o.prototype.close=function(){this.isTrue&&GlobalData.dispatcher.event("MYSTERIOUS_STORE_UPDATA"),this.tweenModel&&(this.tweenModel.stop(),this.tweenModel=null),Laya.timer.clear(this,this.close),e.prototype.close.call(this)},o.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},o.prototype.updataView=function(){var t=i.MysteriousStoreModel.instance.isDrawDisCount,e=i.MysteriousStoreModel.instance.disCount;this._btnClip.play(),this._btnClip.visible=!0,t?(this.card.skin="mysterious_store/image_msd_04.png",this.disCountMsc.skin="mysterious_store/txt_smsd_0"+(100*e>>0)+".png",this.turnbtn.label="进入商城",this.disCountMsc.visible=!0,this.mscImg.skin="mysterious_store/txt_smsd_11.png"):(this.card.skin="mysterious_store/image_msd_05.png",this.disCountMsc.skin="",this.disCountMsc.visible=!1,this.turnbtn.label="点击翻转",this.mscImg.skin="mysterious_store/txt_smsd_10.png")},o.prototype.turnHanlder=function(){i.MysteriousStoreModel.instance.isDrawDisCount?(WindowManager.instance.open(990),this.close()):this.isTrue?n.instance.addNotice("操作过快",!0):i.MysteriousStoreCtrl.instance.mysteriousMallDrawDis()},o.prototype.creatEffect=function(){this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.turnbtn.x-4,this.turnbtn.y-8),this._btnClip.scale(1,1,!0)},o.prototype.trueEffect=function(){var t=this;this.isTrue=!0,this.tweenModel=TweenJS.create(this.card).to({scaleX:-1},200).start().onComplete(function(){t.tweenModel=TweenJS.create(t.card).to({scaleX:1},200).start().onComplete(function(){if(t.count++,4<=t.count)return t.updataView(),t.isTrue=!1,t.count=0,void GlobalData.dispatcher.event("MYSTERIOUS_STORE_UPDATA");t.trueEffect()})})},s=o,i.MysteriousStoreAlert=s}(modules=modules||{}),function(t){var i,e,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}i=t.mysterious_store||(t.mysterious_store={}),n=t.common.SimpleList,e=ui.MysteriousStoreViewUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerY=this.centerX=0,this._list=n.create(i.MysteriousStoreItem,328,169,1,2,6,7),this._list.width=664,this._list.height=855,this._list.x=28,this._list.y=263,this.addChildAt(this._list,3),this.creatEffect()},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setActivitiTime(),i.MysteriousStoreModel.instance.endTm&&Laya.timer.once(i.MysteriousStoreModel.instance.endTm-GlobalData.serverTime,this,this.close),this.updataView()},o.prototype.close=function(){Laya.timer.clear(this,this.close),e.prototype.close.call(this)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("MYSTERIOUS_STORE_UPDATA",this,this.updataView),this.onAutoClick(this.luckBtn,this,this.luckHandler)},o.prototype.luckHandler=function(){WindowManager.instance.open(989)},o.prototype.updataView=function(){var t=i.MysteriousStoreModel.instance.data;if(t){this._list.datas=i.MysteriousStoreModel.instance.getSortIdSort(i.MysteriousStoreModel.instance.data[0]);var e=t[1];i.MysteriousStoreModel.instance.isDrawDisCount?(this.disCountImg.visible=!0,this.bgImg.skin="mysterious_store/image_msd_02.jpg",this.disCountImg.skin="mysterious_store/txt_smsd_0"+(100*e>>0)+".png",this.luckBtn.visible=!1,this._btnClip.stop(),this._btnClip.visible=!1):(this.disCountImg.visible=!1,this.bgImg.skin="mysterious_store/image_msd_01.jpg",this.luckBtn.visible=!0,this._btnClip.play(),this._btnClip.visible=!0)}},o.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),i.MysteriousStoreModel.instance.endTm>=GlobalData.serverTime?(this.activityText1.color="#ffffff",this.activityText.visible=!0,this.activityText1.text="本次折扣优惠倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束")},o.prototype.offEvt=function(){e.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler)},o.prototype.activityHandler=function(){this.activityText.text=CommonUtil.msToHHMMSS(i.MysteriousStoreModel.instance.toDayEndTm),i.MysteriousStoreModel.instance.endTm<GlobalData.serverTime&&(this.activityText1.color="#FF3e3e",this.activityText.visible=!1,this.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},o.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},o.prototype.creatEffect=function(){this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.luckBtn.x-4,this.luckBtn.y-5),this._btnClip.scale(.63,.63,!0)},s=o,i.MysteriousStorePanel=s}(modules=modules||{}),function(o){var s,a,e,i,r,n,t;function l(){return null!==a&&a.apply(this,arguments)||this}s=o.mysterious_store||(o.mysterious_store={}),e=o.common.NumInputCtrl,i=o.commonAlert.PropAlertUtil,r=o.config.GetWayCfg,n=o.config.MysteriousMallCfg,a=ui.MysteriousStoreBuyAlertUI,__extends(l,a),l.prototype.initialize=function(){a.prototype.initialize.call(this),this.currencyNum=0,this._numInputCtrl=new e(this.numInput,this.addBtn,this.minusBtn,this.addTenBtn,this.minusTenBtn),this._numInputCtrl.min=1,this._sourceBtns=new Array,this._image=new Array,this._desTxt=new Array;for(var t=0;t<4;t++)this._sourceBtns[t]=new Laya.Image,this._image[t]=new Laya.Image,this._desTxt[t]=new laya.display.Text,i.setDesTxt(this._desTxt[t]),this._sourceBtns[t].mouseEnabled=!0},l.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.sureBtnHandler);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t]);this._numInputCtrl.addListeners(),this.onAutoEvt(this._numInputCtrl,"change",this,this.sortcutBuy)},l.prototype.offEvt=function(){a.prototype.offEvt.call(this),this._numInputCtrl.removeListeners()},l.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t),this._value=t,this._cfg=n.instance.getCfgByFestivalTypeAndId(s.MysteriousStoreModel.instance.festivalType,this._value[0])},l.prototype.onOpened=function(){a.prototype.onOpened.call(this),s.MysteriousStoreModel.instance.toDayEndTm&&Laya.timer.once(s.MysteriousStoreModel.instance.toDayEndTm,this,this.close);var t=this._cfg[4],e=this._cfg[5][0];this.taskItem.dataSource=[t[0],t[1],0,null];var i=o.config.ItemMaterialCfg.instance.getItemCfgById(t[0]);this.itemName.text=i[1];var n=this._cfg[8]-this._value[1];this._numInputCtrl.max=n,this._numInputCtrl.value=n?1:0,this.currencyNum=n?1:0,this._numInputCtrl.notice="购买数量",94150001===e?(this.goldImg.skin="common/shenghuyu.png",this.lgoldImg.skin="common/shenghuyu.png"):90140001===e?(this.goldImg.skin="common/icon_tongyong_2.png",this.lgoldImg.skin="common/icon_tongyong_2.png"):(this.lgoldImg.skin=CommonUtil.getIconById(e,!0),this.goldImg.skin=CommonUtil.getIconById(e,!0)),this.moneyTxt.text=Math.floor(this._cfg[5][1]*s.MysteriousStoreModel.instance.disCount).toString(),this.updataView()},l.prototype.updataView=function(){this.sortcutBuy()},l.prototype.close=function(){Laya.timer.clear(this,this.close),a.prototype.close.call(this)},l.prototype.sortcutBuy=function(){var t=this._cfg[5][1];this.currencyNum=parseInt(this.numInput.text),this.numInput.text=this.currencyNum.toString(),this.allMoneyTxt.color=0<=PlayerModel.instance.ingot?"#1f304d":"#ff3e3e";var e=s.MysteriousStoreModel.instance.isDrawDisCount?s.MysteriousStoreModel.instance.disCount:1;this.allMoneyTxt.text=""+Math.floor(this.currencyNum*t*e)},l.prototype.sureBtnHandler=function(){if(this._cfg){var t=this._cfg[5],e=t[0],i=t[1];if(e){var n=PlayerModel.instance.getCurrencyById(e);if(null==n&&(n=o.bag.BagModel.instance.getItemCountById(e)),n<i*this.currencyNum*(s.MysteriousStoreModel.instance.isDrawDisCount?s.MysteriousStoreModel.instance.disCount:1))return void this.glodBtnHandler(e);if(0===this.currencyNum)return void o.notice.SystemNoticeManager.instance.addNotice("没有选择数量",!0)}s.MysteriousStoreCtrl.instance.mysteriousMallBuy(this._value[0],this.currencyNum),this.close()}},l.prototype.getOpenPlaneId=function(t){var e=CommonUtil.getItemCfgById(this._cfg[4][0])[10],i=r.instance.getCfgById(e[t]),n=i[0];if(942!==n&&943!==n||o.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!0)){500!=n?(this.close(),WindowManager.instance.closeAllDialog()):o.notice.SystemNoticeManager.instance.addNotice("请多关注游戏内活动哦",!1);var s=i[3][0];o.commonAlert.PropAlertUtil.skipScene(s)}},l.prototype.destroy=function(){this._sourceBtns=this.destroyElement(this._sourceBtns),this._image=this.destroyElement(this._image),this._desTxt=this.destroyElement(this._desTxt),a.prototype.destroy.call(this)},l.prototype.glodBtnHandler=function(t){var e="元宝";if(94150001===t?e="仙玉":90140001===t&&(e="元宝"),0==o.first_pay.FirstPayModel.instance.giveState)if(94150001===t)WindowManager.instance.open(106,[94150001,0,!0]);else{var i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);CommonUtil.alert("温馨提示",e+"不足，是否前往首充？",[i])}else o.money_cat.MoneyCatModel.instance.state?(i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),CommonUtil.alert("温馨提示",e+"不足，是否前往充值界面充值？",[i])):94150001===t?WindowManager.instance.open(106,[94150001,0,!0]):WindowManager.instance.open(394)},t=l,s.MysteriousStoreBuyAlert=t}(modules=modules||{}),function(n){var g,i,t,e,f,_,m,v,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}g=n.treasureLand||(n.treasureLand={}),t=ui.TreasureLandViewUI,e=n.common.AvatarClip,f=n.config.TreasureLandCfg,_=n.festival.FestivalModel,m=n.config.BlendCfg,v=n.bag.BagModel,s=n.notice.SystemNoticeManager,o=n.common.CustomClip,i=t,__extends(r,i),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._diceEft=this.destroyElement(this._diceEft),this._modelClip=this.destroyElement(this._modelClip),this._tweenGroup&&(this._tweenGroup.destroy(),this._tweenGroup=null),this._tween=null,this._items&&(this._items.length=0,this._items=null),this._itembg&&(this._itembg.length=0,this._itembg=null),this._signItems&&(this._signItems.length=0,this._signItems=null),i.prototype.destroy.call(this,t)},r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._items=[this.item0,this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8,this.item9,this.item10,this.item11,this.item12,this.item13,this.item14,this.item15,this.item16,this.item17,this.item18,this.item19,this.item20,this.item21],this._itembg=[this.itembg0,this.itembg1,this.itembg2,this.itembg3,this.itembg4,this.itembg5,this.itembg6,this.itembg7,this.itembg8,this.itembg9,this.itembg10,this.itembg11,this.itembg12,this.itembg13,this.itembg14,this.itembg15,this.itembg16,this.itembg17,this.itembg18,this.itembg19,this.itembg20,this.itembg21],this._modelClip=e.normalCreate(),this._modelClip.scale(.5,.5),this.addChild(this._modelClip),this.diceImg.skin=CommonUtil.getIconById(g.TreasureLandModel.instance.diceIds[0],!0),this.spDiceImg.skin=CommonUtil.getIconById(g.TreasureLandModel.instance.diceIds[1],!0),this._diceEft=o.create("assets/effect/dice.atlas","dice",25,!1,3),this._diceEft.pos(258,877),this.addChildAt(this._diceEft,3),this._diceEft.visible=!1},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.bagBtn,this,this.bagHandler),this.onAutoClick(this.diceBtn,this,this.diceHandler),this.onAutoClick(this.spDiceBtn,this,this.spDiceHandler),this.onAutoClick(this.autoDiceBtn,this,this.autoDiceHandler),this.onAutoClick(this.checkBtn,this,this.checkHandler),this.onAutoGlobalEvt("TREASURE_LAND_LAYER_UPDATE",this,this.updateView),this.onAutoGlobalEvt("TREASURE_LAND_DICE_RESULT",this,this.diceResuldHandler),this.regAutoRP(this.bagRP,["treasureLandBagRP"]),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){n.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},r.prototype.checkHandler=function(){g.TreasureLandModel.instance.skipCheck=this.checkBtn.selected=!this.checkBtn.selected},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.checkBtn.selected=g.TreasureLandModel.instance.skipCheck,g.TreasureLandModel.instance.isWait=this._isAnimation=this._isAuto=!1,this.autoDiceBtn.label="自动投掷",this._nowSigns=[];var t=GameCenter.instance.getRole(PlayerModel.instance.actorId);if(t){var e=t.property.get("exterior");this._modelClip.reset(e[0]),this._modelClip.setActionType("stand"),this._modelClip.avatarRotationY=180}g.TreasureLandCtrl.instance.GetHideTreasure(g.TreasureLandModel.instance.fType),this.updateView(),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime()},r.prototype.close=function(){g.TreasureLandModel.instance.isWait=this._isAnimation=this._isAuto=!1,this.autoDiceBtn.label="自动投掷",this._tween&&this._tween.stop(),this._tweenGroup&&this._tweenGroup.removeAll(),i.prototype.close.call(this),Laya.timer.clearAll(this),this._diceEft.stop(),this._diceEft.visible=!1,this.diceBtn.visible=!0},r.prototype.updateTime=function(){var t=_.instance.info[g.TreasureLandModel.instance.fType]?_.instance.info[g.TreasureLandModel.instance.fType][2]:0;t<GlobalData.serverTime?(this.timeTxt.text="已结束",this.timeTxt.color="#ff3e3e"):(this.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(t),this.timeTxt.color="#50ff28")},r.prototype.updateView=function(){if(g.TreasureLandModel.instance.isWait)this._waitNum&&this.diceResuldHandler(this._waitNum);else{var t=this._nowLayer=g.TreasureLandModel.instance.layerInfo?g.TreasureLandModel.instance.layerInfo[0]:1,e=this._nowPoint=g.TreasureLandModel.instance.layerInfo?g.TreasureLandModel.instance.layerInfo[1]:0;e%=22;var i=this._nowSigns=g.TreasureLandModel.instance.layerInfo?g.TreasureLandModel.instance.layerInfo[2]:[],n=f.instance.getLayerCfg(g.TreasureLandModel.instance.fType,t,_.instance.getCrossOpenServerDay(g.TreasureLandModel.instance.fType),_.instance.getDayByFestivalType(g.TreasureLandModel.instance.fType));if(n){var s=n[4];this.startImg.visible=0==e;for(var o=0;o<s.length;o+=2){this._items[o/2].dataSource=s[o]?[s[o],s[o+1],0,null]:null,this._items[o/2]._qualityBg.visible=!1,this._items[o/2].isbtnClipIsPlayer=!1,this._itembg[o/2].skin="treasure_land/icon_cbzd_ld.png";var a=n[5].indexOf(o/2);if(0<a){var r=n[5][a-1];-1===i.indexOf(r)&&(this._items[o/2].dataSource=[r,1,0,null],this._items[o/2]._qualityBg.visible=!1,this._items[o/2].isbtnClipIsPlayer=!1,this._itembg[o/2].skin="treasure_land/icon_cbzd_hd.png")}this._items[o/2].visible=e!=o/2,this._items[o/2].visible||this._modelClip.pos(this._items[o/2].x+40,this._items[o/2].y+60)}var l=m.instance.getCfgById(92001)[1],h=v.instance.getItemCountById(l[0]),c=v.instance.getItemCountById(l[1]);this.curLayerTxt.text="当前层数："+t+"层",this.diceCountTxt.text=h+"/1",this.diceCountTxt.color=0===h?"#ff3e3e":"#3a5385",this.spDiceCountTxt.text=c+"/1",this.spDiceCountTxt.color=0===c?"#ff3e3e":"#3a5385";var p=n[6];this.mainItem.dataSource=[p[0],p[1],0,null],this.mainItem._qualityBg.visible=!1,this.mainItem.isbtnClipIsPlayer=!1;var u=n[5].length/2,d=!0;for(o=0;o<u;++o)this._signItems||(this._signItems=[]),(y=this._signItems[o]=this._signItems[o]||new ui.TreasureLandSignItemUI).item.dataSource=[n[5][2*o],1,0,null],y.item._qualityBg.visible=!1,y.item.isbtnClipIsPlayer=!1,y.x=114*o-57*u+377,y.y=531,this.addChild(y),y.gray=-1===i.indexOf(n[5][2*o]),y.gray&&(d=!1);for(this.gotMainImg.visible=d;this._signItems.length>u;){var y=this._signItems.pop();y=this.destroyElement(y)}}}},r.prototype.helpHandler=function(){CommonUtil.alertHelp(19025)},r.prototype.bagHandler=function(){this._isAuto=!1,this.autoDiceBtn.label="自动投掷",WindowManager.instance.open(1024)},r.prototype.diceHandler=function(){var t=this;if(!this._isAnimation&&!g.TreasureLandModel.instance.isWait){var e=(v.instance.getItemsByBagId(11)||[]).length;if(m.instance.getCfgById(10015)[1][0]<=e)return CommonUtil.alert("温馨提示","临时背包已满，请先领取奖励",[Handler.create(this,function(){t.bagHandler()}),"前往"]),void(this._isAuto&&(this._isAuto=!1,this.autoDiceBtn.label="自动投掷"));var i=m.instance.getCfgById(92001)[1];if(!v.instance.getItemCountById(i[0]))return n.bag.BagUtil.openLackPropAlert(i[0],1),void(this._isAuto&&(this._isAuto=!1,this.autoDiceBtn.label="自动投掷"));g.TreasureLandModel.instance.isWait=!0,g.TreasureLandCtrl.instance.HideTreasureDice(g.TreasureLandModel.instance.fType,1,0)}},r.prototype.spDiceHandler=function(){var t=this;if(!this._isAnimation&&!g.TreasureLandModel.instance.isWait){var e=(v.instance.getItemsByBagId(11)||[]).length;if(m.instance.getCfgById(10015)[1][0]<=e)CommonUtil.alert("温馨提示","临时背包已满，请先领取奖励",[Handler.create(this,function(){t.bagHandler()}),"前往"]);else{var i=m.instance.getCfgById(92001)[1];v.instance.getItemCountById(i[1])?(this._isAuto=!1,this.autoDiceBtn.label="自动投掷",WindowManager.instance.open(1025)):n.bag.BagUtil.openLackPropAlert(i[1],1)}}},r.prototype.autoDiceHandler=function(){this._isAuto=!this._isAuto,this.autoDiceBtn.label=this._isAuto?"停止自动":"自动投掷",this._isAuto&&this.diceHandler()},r.prototype.diceResuldHandler=function(t){var e=this;if(g.TreasureLandModel.instance.isWait=!1,this._waitNum=0,!t)return this._isAuto=!1,this.autoDiceBtn.label="自动投掷",void this.updateView();var i=g.TreasureLandModel.instance.layerInfo?g.TreasureLandModel.instance.layerInfo[0]:1,n=g.TreasureLandModel.instance.layerInfo?g.TreasureLandModel.instance.layerInfo[1]:0;return(n%=22)===this._nowPoint&&i===this._nowLayer?(g.TreasureLandModel.instance.isWait=!0,void(this._waitNum=t)):this.checkBtn.selected?(s.instance.addNotice("你掷出了"+t+"点"),2===g.TreasureLandCtrl.instance.lastDiceType?this.spDiceBtn.skin="treasure_land/icon_cbzd_hj"+t+".png":this.diceBtn.skin="treasure_land/icon_cbzd_pt"+t+".png",this._isAnimation=!1,this._nowPoint=(this._nowPoint+t)%22,this.flyItem(),this.updateView(),void(this._isAuto&&Laya.timer.once(300,this,this.diceHandler))):2===g.TreasureLandCtrl.instance.lastDiceType?(s.instance.addNotice("你掷出了"+t+"点"),this.spDiceBtn.skin="treasure_land/icon_cbzd_hj"+t+".png",this._moveCount=t,void this.moveAnimation()):(this._isAnimation=!0,this._diceEft.visible=!0,this.diceBtn.visible=!1,this._diceEft.play(),this._diceEft.on(Laya.Event.COMPLETE,this,function(t){e._diceEft.offAll(Laya.Event.COMPLETE),e._diceEft.visible=!1,e._diceEft.stop()}),void Laya.timer.once(900,this,function(){s.instance.addNotice("你掷出了"+t+"点"),e.diceBtn.visible=!0,e.diceBtn.skin="treasure_land/icon_cbzd_pt"+t+".png",e._moveCount=t,e.moveAnimation()}))},r.prototype.moveAnimation=function(){var t=this;if(g.TreasureLandModel.instance.isWait=!1,this._isAnimation=!0,this.startImg.visible=!1,0===this._moveCount)return this._isAnimation=!1,this._modelClip.avatarRotationY=180,this._modelClip.setActionType("stand"),this.flyItem(),this.updateView(),void(this._isAuto&&this.diceHandler());var e=(this._nowPoint+1)%22,i=this._items[e].x-this._items[this._nowPoint].x,n=this._items[e].y-this._items[this._nowPoint].y;100<i?this._modelClip.avatarRotationY=-90:i<-100?this._modelClip.avatarRotationY=90:100<n?this._modelClip.avatarRotationY=180:n<-100&&(this._modelClip.avatarRotationY=0),this._modelClip.setActionType("run"),this._items[this._nowPoint].visible=!0,this._tween=TweenJS.create(this._modelClip,this._tweenGroup).to({x:this._items[e].x+40,y:this._items[e].y+60},500).onComplete(function(){t._nowPoint=e,--t._moveCount,t.moveAnimation()}).start()},r.prototype.flyItem=function(){if(this._items[this._nowPoint].itemData){var t=this._items[this._nowPoint].itemData[0],e=f.instance.getLayerCfg(g.TreasureLandModel.instance.fType,this._nowLayer,_.instance.getCrossOpenServerDay(g.TreasureLandModel.instance.fType),_.instance.getDayByFestivalType(g.TreasureLandModel.instance.fType));if(!e)return;var i=void 0,n=void 0;if(-1===e[5].indexOf(t))i=this.bagBtn.x+this.bagBtn.width/2,n=this.bagBtn.y+this.bagBtn.height/2;else{for(var s=!0,o=0;o<this._signItems.length;++o)this._signItems[o].item.itemData[0]===t?(i=this._signItems[o].x+40,n=this._signItems[o].y+40):-1===this._nowSigns.indexOf(this._signItems[o].item.itemData[0])&&(s=!1);if(s){Laya.Point.TEMP.setTo(this.bagBtn.x+this.bagBtn.width/2,this.bagBtn.y+this.bagBtn.height/2);var a=this.localToGlobal(Laya.Point.TEMP,!0);Laya.Point.TEMP.setTo(this.mainItem.x+60,this.mainItem.y+60);var r=this.localToGlobal(Laya.Point.TEMP,!0);CommonUtil.flyItem(this.mainItem.itemData[0],r,a),WindowManager.instance.open(1061,this.mainItem.itemData[0])}}Laya.Point.TEMP.setTo(this._items[this._nowPoint].x+40,this._items[this._nowPoint].y+40);var l=this.localToGlobal(Laya.Point.TEMP,!0);Laya.Point.TEMP.setTo(i,n);var h=this.localToGlobal(Laya.Point.TEMP,!0);CommonUtil.flyItem(t,l,h)}},a=r,g.TreasureLandPanel=a}(modules=modules||{}),function(g){!function(e){var t,n=g.bag.BagModel,i=g.common.SimpleList,s=g.bag.BaseItem,o=g.bag.BagUtil,a=g.notice.SystemNoticeManager,r=g.config.BlendCfg,l=g.config.TreasureLandCfg,h=g.festival.FestivalModel,c=(t=ui.TreasureLandBagAlertUI,__extends(p,t),p.prototype.destroy=function(){this._bagList=this.destroyElement(this._bagList),this._prevList=this.destroyElement(this._prevList),t.prototype.destroy.call(this)},p.prototype.initialize=function(){t.prototype.initialize.call(this),this._bagList=i.create(s,100,100,1,5,10,10),this._bagList.size(540,484),this._bagList.pos(63,104),this.addChild(this._bagList),this._prevList=i.create(d,260,180,1,2,20,20),this._prevList.size(540,571),this._prevList.pos(63,104),this.addChild(this._prevList),this._prevList.datas=l.instance.getLayerList(e.TreasureLandModel.instance.fType,h.instance.getCrossOpenServerDay(e.TreasureLandModel.instance.fType),h.instance.getDayByFestivalType(e.TreasureLandModel.instance.fType))},p.prototype.updateView=function(){if(0===this._tabIndex){var t=n.instance.getItemsByBagId(11)||[],e=t.length,i=r.instance.getCfgById(10015)[1][0]-e;0<i&&(t=t.concat(new Array(i))),this._bagList.datas=t}else this._prevList.datas=this._prevList.datas},p.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._tabIndex=-1,this.tabHandler(0)},p.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.getWayBtn,this,this.btnHandler),this.onAutoClick(this.bagBtn,this,this.tabHandler,[0]),this.onAutoClick(this.prevBtn,this,this.tabHandler,[1]),this.onAutoGlobalEvt("BAG_UPDATE",this,this.onBagUpdate)},p.prototype.tabHandler=function(t){if(this._tabIndex!==t){var e=0===(this._tabIndex=t);this.bg.height=e?510:595,this.titleTxt.text=e?"藏宝背包":"大奖预览",this.getWayBtn.visible=e,this._bagList.visible=e,this._prevList.visible=!e,this.bagBtn.selected=e,this.prevBtn.selected=!e,this.updateView()}},p.prototype.onBagUpdate=function(t){11===t&&this.updateView()},p.prototype.btnHandler=function(){var t=n.instance.getItemsByBagId(11);t&&0!==t.length?1==o.canAddItemsByBagIdCount(t)?e.TreasureLandCtrl.instance.TaskHideTreasureBagAllItem():a.instance.addNotice("背包空间不足",!0):a.instance.addNotice("当前仓库无可取出的道具",!0)},p);function p(){return null!==t&&t.apply(this,arguments)||this}e.TreasureLandBagAlert=c;var u,d=(u=ui.TreasureLandPrevItemUI,__extends(y,u),y.prototype.initialize=function(){u.prototype.initialize.call(this),this.item.nameVisible=!0},y.prototype.setData=function(t){u.prototype.setData.call(this,t),this.txt.text="第"+t[0]+"层",this.item.dataSource=[t[6][0],t[6][1],0,null]},y);function y(){return null!==u&&u.apply(this,arguments)||this}e.TreasureLandPrevItem=d}(g.treasureLand||(g.treasureLand={}))}(modules=modules||{}),function(p){!function(g){var e,t=ui.TreasureLandRankViewUI,i=ui.TreasureLandRankItemUI,n=p.common.SimpleList,s=p.common.AvatarClip,o=p.bag.BaseItem,f=p.config.TreasureLandCfg,_=p.festival.FestivalModel,a=(e=t,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._rankList=this.destroyElement(this._rankList),this._avatar=this.destroyElement(this._avatar),this._topRwdList=this.destroyElement(this._topRwdList),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._rankList=n.create(h,646,164,1,1,0,2),this._rankList.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._rankList),this._avatar=s.create(1024,1024,768),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this.addChildAt(this._avatar,1),this._topRwdList=n.create(o,100,100,2,1,0,0),this._topRwdList.size(400,100),this._topRwdList.scale(.8,.8),this.rwdCon.addChild(this._topRwdList),this.noTxt1.color=this.noTxt.color,this.noTxt1.style.fontFamily=this.noTxt.font,this.noTxt1.style.fontSize=this.noTxt.fontSize,this.noTxt1.style.align=this.noTxt.align,this.noTxt1.style.strokeColor=this.noTxt.strokeColor,this.noTxt1.style.stroke=this.noTxt.stroke},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.helpBtn,this,this.onHelpHandler),this.onAutoGlobalEvt("TREASURE_LAND_RANK_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){p.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},r.prototype.onHelpHandler=function(){g.TreasureLandModel.instance.fType===p.festival.FestivalModel.instance.PerfectestTenType?CommonUtil.alertHelp(19068):g.TreasureLandModel.instance.fType===p.festival.FestivalModel.instance.SpringSceneryType?CommonUtil.alertHelp(19068):CommonUtil.alertHelp(19026)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),g.TreasureLandCtrl.instance.GetHideTreasureRank(g.TreasureLandModel.instance.fType),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime()},r.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},r.prototype.updateTime=function(){var t=g.TreasureLandModel.instance.rankInfo?g.TreasureLandModel.instance.rankInfo[2]:0;t<GlobalData.serverTime?(this.timeTxt.text="已结束",this.timeTxt.color="#ff3e3e"):(this.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(t),this.timeTxt.color="#50ff28")},r.prototype.updateAvatar=function(){var t=g.TreasureLandModel.instance.rankInfo?g.TreasureLandModel.instance.rankInfo[1]:null;if(t){var e=t[2],i=t[3],n=t[1];this._avatar.pos(368,497),this._avatar.avatarRotationY=180,this._avatar.avatarRotationX=0,this._avatar.avatarScale=1,this._avatar.avatarY=0,this._avatar.avatarX=0,this._avatar.reset(n,e,i),this.observationItem.data=[[this._avatar,0]]}},r.prototype.updateView=function(){for(var t=0,e=g.TreasureLandModel.instance.rankInfo?g.TreasureLandModel.instance.rankInfo[0]:[],i=[],n=1,s=0;n<=50;)e.length>s?(e[s][0]===PlayerModel.instance.actorId&&(t=e[s][6]),e[s][6]==n?(1<n&&i.push([e[s][6],e[s]]),++s):1<n&&i.push([n,null])):1<n&&i.push([n,null]),++n;this._rankList.datas=i;for(var o=f.instance.getRankCfg(g.TreasureLandModel.instance.fType,_.instance.getCrossOpenServerDay(g.TreasureLandModel.instance.fType),1),a=g.TreasureLandModel.instance.rankInfo&&g.TreasureLandModel.instance.rankInfo[4]?g.TreasureLandModel.instance.rankInfo[4]-1:0,r=o?o[4][a]:[],l=[],h=0;h<r.length;h+=2)l.push([r[h],r[h+1],0,null]);var c=4<(this._topRwdList.datas=l).length?4:l.length;this._topRwdList.x=-40*c,this.valueTxt.text=g.TreasureLandModel.instance.layerInfo?g.TreasureLandModel.instance.layerInfo[0].toString():"",this.myRankTxt.text=0<t?"第"+t+"名":"未上榜",this.updateAvatar();var p=0<e.length?e[0]:null;if(!p||1!=p[6])return this.topName.text="",this.valueClip.value="0",this.noTxt.visible=this.noTxt1.visible=!0,void(this.noTxt1.innerHTML="层数达到<span color='#50ff28'>"+(o?o[3]:"")+"</span>可上榜");this.noTxt.visible=this.noTxt1.visible=!1,this.valueClip.value=p[5].toString(),this.topName.text=p[2];var u=p[3],d=p[1],y=p[4];this.headIcon.setInfo(u,d,y)},r);function r(){return null!==e&&e.apply(this,arguments)||this}g.TreasureLandRankPanel=a;var l,h=(l=i,__extends(c,l),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),l.prototype.destroy.call(this,t)},c.prototype.initialize=function(){l.prototype.initialize.call(this),this._list=n.create(o,100,100,2,1,0,0),this._list.size(400,100),this._list.scale(.8,.8),this.listCon.addChild(this._list),CommonUtil.setHTMLPro(this.noTxt,"#4c5e8a","SimHei",24)},c.prototype.setData=function(t){for(var e=t[0],i=f.instance.getRankCfg(g.TreasureLandModel.instance.fType,_.instance.getCrossOpenServerDay(g.TreasureLandModel.instance.fType),e),n=g.TreasureLandModel.instance.rankInfo&&g.TreasureLandModel.instance.rankInfo[4]?g.TreasureLandModel.instance.rankInfo[4]-1:0,s=i?i[4][n]:[],o=[],a=0;a<s.length;a+=2)o.push([s[a],s[a+1],0,null]);var r=4<(this._list.datas=o).length?4:o.length;this._list.x=-40*r,e<=3?(this.rankImg.visible=this.rankClip.visible=!0,this.rankClip.value=e.toString(),this.rankTxt.text=""):(this.rankImg.visible=this.rankClip.visible=!1,this.rankTxt.text="第"+e+"名");var l=t[1];if(!l)return this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!1,this.noTxt.visible=!0,void(this.noTxt.innerHTML="虚位以待...<br>层数达到<span color='#168a17'>"+(i?i[3]:"")+"</span>可上榜");this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!0,this.noTxt.visible=!1,this.valueTxt.text="层数:"+l[5],this.playerName.text=l[2],this.headIcon.setInfo(l[3],l[1],l[4])},c);function c(){return null!==l&&l.apply(this,arguments)||this}g.TreasureLandRankItem=h}(p.treasureLand||(p.treasureLand={}))}(modules=modules||{}),function(y){!function(r){var e,t=ui.TreasureLandTaskViewUI,i=ui.TreasureLandTaskItemUI,n=y.common.SimpleList,s=y.festival.FestivalModel,o=y.config.TreasureLandCfg,l=y.common.CustomClip,a=y.bag.BaseItem,h=(e=t,__extends(c,e),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=n.create(u,640,170,1,1,0,5),this._list.size(this.listCon.width,this.listCon.height),this.listCon.addChild(this._list)},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("TREASURE_LAND_REWARD_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){y.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),r.TreasureLandCtrl.instance.GetHTRewardInfo(r.TreasureLandModel.instance.fType),this.updateView()},c.prototype.updateView=function(){var t=o.instance.getTaskList(r.TreasureLandModel.instance.fType,s.instance.getCrossOpenServerDay(r.TreasureLandModel.instance.fType),s.instance.getDayByFestivalType(r.TreasureLandModel.instance.fType));t.sort(function(t,e){var i=r.TreasureLandModel.instance.rewardInfo?r.TreasureLandModel.instance.rewardInfo[0]:[],n=i.indexOf(t[0]),s=i.indexOf(e[0]);return-1===n&&-1!==s?-1:-1===s&&-1!==n?1:t[0]-e[0]}),this._list.datas=t},c);function c(){return null!==e&&e.apply(this,arguments)||this}r.TreasureLandTaskPanel=h;var p,u=(p=i,__extends(d,p),d.prototype.destroy=function(t){void 0===t&&(t=!0),this._itemList=this.destroyElement(this._itemList),this._btnClip=this.destroyElement(this._btnClip),p.prototype.destroy.call(this,t)},d.prototype.initialize=function(){p.prototype.initialize.call(this),this._itemList=n.create(a,100,100,2,1,15,0),this._itemList.pos(9,52),this._itemList.size(448,103),this.addChild(this._itemList),CommonUtil.setHTMLPro(this.descTxt,"#3a5385","SimHei",26)},d.prototype.onEvt=function(){p.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.onBtnHandler),this.onAutoClick(this.jumpBtn,this,this.onJumpHandler)},d.prototype.onJumpHandler=function(){WindowManager.instance.open(1021)},d.prototype.onBtnHandler=function(){var t=this._cfg[5];y.bag.BagUtil.canAddItemsByBagIdCount(CommonUtil.formatItemData(t))&&r.TreasureLandCtrl.instance.DrawHideTreasureReward(r.TreasureLandModel.instance.fType,this._cfg[0])},d.prototype.setData=function(t){p.prototype.setData.call(this,t),this._cfg=t,this.descTxt.innerHTML="全民总积分达到<span style='color:#b15315;'>"+t[4]+"</span>可领取";var e=r.TreasureLandModel.instance.rewardInfo?r.TreasureLandModel.instance.rewardInfo[1]:0,i=t[4];this.scheduleText.text="("+e+"/"+i+")",this.scheduleText.color=e<i?"#ff3e3e":"#168a17";var n=(r.TreasureLandModel.instance.rewardInfo?r.TreasureLandModel.instance.rewardInfo[0]:[]).indexOf(t[0]);l.thisStop(this._btnClip),-1===n?(this.receivedImg.visible=!1,this.sureBtn.visible=!0,this.jumpBtn.visible=!1,i<=e?this.playBtnEffect():(this.jumpBtn.visible=!0,this.sureBtn.visible=!1)):(this.receivedImg.visible=!0,this.sureBtn.visible=!1,this.jumpBtn.visible=!1);for(var s=t[5],o=[],a=0;a<s.length;a+=2)o.push([s[a],s[a+1],0,null]);this._itemList.datas=o},d.prototype.playBtnEffect=function(){this._btnClip||(this._btnClip=l.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.scale(.8,.8),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-8),this.addChild(this._btnClip)),l.thisPlay(this._btnClip)},d);function d(){return null!==p&&p.apply(this,arguments)||this}r.TreasureLandTaskItem=u}(y.treasureLand||(y.treasureLand={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.treasureLand||(t.treasureLand={}),i=ui.TreasureLandDiceAlertUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn1,this,this.diceHandler,[1]),this.onAutoClick(this.btn2,this,this.diceHandler,[2]),this.onAutoClick(this.btn3,this,this.diceHandler,[3]),this.onAutoClick(this.btn4,this,this.diceHandler,[4]),this.onAutoClick(this.btn5,this,this.diceHandler,[5]),this.onAutoClick(this.btn6,this,this.diceHandler,[6]),this.onAutoClick(this.sureBtn,this,this.sureHandler)},s.prototype.diceHandler=function(t){this.selected=t,this.updateSelect()},s.prototype.sureHandler=function(){this.selected<1||6<this.selected||(e.TreasureLandModel.instance.isWait=!0,e.TreasureLandCtrl.instance.HideTreasureDice(e.TreasureLandModel.instance.fType,2,this.selected),this.close())},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.selected=0,this.updateSelect()},s.prototype.updateSelect=function(){if(this.selected<1||6<this.selected)this.light.visible=!1;else{var t=this.getChildByName("btn"+this.selected);this.light.pos(t.x-29,t.y-29),this.light.visible=!0}},n=s,e.TreasureLandDiceAlert=n}(modules=modules||{}),function(s){var t,o,e,a,r,i;function n(){var t=null!==o&&o.apply(this,arguments)||this;return t.num=10,t}t=s.treasureLand||(s.treasureLand={}),e=s.common.CustomClip,a=s.config.ItemRuneCfg,r=s.rotary_table_jiuzhou.RotaryTableJiuZhouModel,o=ui.TreasureLandGetAlertUI,__extends(n,o),n.prototype.destroy=function(){this.upClip=this.destroyElement(this.upClip),o.prototype.destroy.call(this)},n.prototype.initialize=function(){o.prototype.initialize.call(this),this.upClip=new e,this.addChildAt(this.upClip,0),this.upClip.pos(266,335,!0),this.upClip.anchorX=.5,this.upClip.anchorY=.5,this.upClip.scale(2,2),this.upClip.skin="assets/effect/state.atlas",this.upClip.frameUrls=["state/0.png","state/1.png","state/2.png","state/3.png","state/4.png","state/5.png","state/6.png","state/7.png"],this.upClip.durationFrame=5,this.upClip.play(),this.upClip.visible=!0},n.prototype.setOpenParam=function(t){if(o.prototype.setOpenParam.call(this,t),this.num=10,this.btn.label="确定("+this.num+")",t){if(this.treasureItem.dataSource=[t,0,0,null],7==s.common.CommonUtil.getItemTypeById(t)){var e=1e4*(1e-4*t>>0),i=a.instance.getCfgById(e);this.treasureName.text=i[1]+" Lv."+t%1e4}else if(9==s.common.CommonUtil.getItemTypeById(t))if(39==s.common.CommonUtil.getItemSubTypeById(t)){var n=r.instance.tempJackPotArr!=[]?r.instance.tempJackPotArr[0]:0;this.treasureName.text="元宝x"+Math.ceil(n),r.instance.tempJackPotArr.shift()}else this.treasureName.text=this.treasureItem._nameTxt.text;else this.treasureName.text=this.treasureItem._nameTxt.text;this.upClip.play(),Laya.timer.loop(1e3,this,this.btnClose)}},n.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.close)},n.prototype.btnClose=function(){this.num--,this.btn.label="确定("+this.num+")",this.num<=0&&(Laya.timer.clear(this,this.btnClose),this.close())},n.prototype.close=function(){o.prototype.close.call(this),GlobalData.dispatcher.event("DIAL_UPDATE"),this.upClip.stop(),Laya.timer.clear(this,this.btnClose)},i=n,t.TreasureLandGetAlert=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("family_party_task"),this._typeArr=[];for(var t=0,e=this._cfg.length;t<e;t++){for(var i=!0,n=this._cfg[t][6],s=0,o=this._typeArr.length;s<o;s++)if(this._typeArr[s]===n){i=!1;break}i&&this._typeArr.push(n)}},n.prototype.getCfgById=function(t){for(var e=0,i=this._cfg.length;e<i;e++)if(this._cfg[e][0]==t)return this._cfg[e];return null},Object.defineProperty(n.prototype,"typeArr",{get:function(){return this._typeArr},enumerable:!0,configurable:!0}),n.prototype.getTaskEndCfg=function(t){var e=n.instance.getCfgById(t);if(!e)return null;for(var i=e[7];i&&(e=n.instance.getCfgById(i));)i=e[7];return e},i=n,e.FamilyPartyTaskCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("family_party")},n.prototype.getCfgByFestivalType=function(t){for(var e=0,i=this._cfg.length;e<i;e++)if(this._cfg[e][0]==t)return this._cfg[e];return null},i=n,e.FamilyPartyCfg=i}(modules=modules||{}),function(y){var g,s,e,i,f,o,_,t,n;function a(){return null!==s&&s.apply(this,arguments)||this}g=y.family_party||(y.family_party={}),e=y.common.CustomList,i=y.common.ProgressBarCtrl,f=y.config.FamilyPartyCfg,o=y.config.FamilyPartyTaskCfg,_=y.config.RechargeCfg,t=y.core.BaseDialogEx,s=t,__extends(a,s),a.prototype.initialize=function(){s.prototype.initialize.call(this),this._list=new e,this._list.itemRender=g.FamilyPartyItem,this._list.width=404,this._list.height=395,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=3,this._list.x=58,this._list.y=747,this.v.addChildAt(this._list,3),this._btnList=new e,this._btnList.width=210,this._btnList.height=424,this._btnList.hCount=1,this._btnList.spaceX=0,this._btnList.spaceY=2,this._btnList.x=477,this._btnList.y=737,this._btnList.itemRender=g.FamilyPartyBtnItem,this.v.addChildAt(this._btnList,4),this._progressCtrl=new i(this.v.progressBar,495),this._progressCtrl.maxValue=100,this._progressCtrl.value=0,this._rpImgArr=[this.v.rp1,this.v.rp2,this.v.rp3,this.v.rp4],this._reciveImgArr=[this.v.reciveImg1,this.v.reciveImg2,this.v.reciveImg3,this.v.reciveImg4],this._btnArr=[this.v.boxBtn1,this.v.boxBtn2,this.v.boxBtn3,this.v.boxBtn4,this.v.bigPrizeBtn],this._progressMscArr=[this.v.progressMsc1,this.v.progressMsc2,this.v.progressMsc3,this.v.progressMsc4],this.v.buyMscHtml.style.wordWrap=!0,this.v.buyMscHtml.style.leading=12,CommonUtil.setHTMLPro(this.v.buyMscHtml,"#FFFFFF","SimHei",24);for(var t=0;t<4;t++)this._rpImgArr[t].visible=!1,this._reciveImgArr[t].visible=!1;this.v.bigPrizeRp.visible=!1,this.createEffect(),this.festivalType=y.festival.FestivalModel.instance.PerfectestTenType,this.openDlog=1141,this.partName="尾牙派对",this._list.y=747,this._btnList.y=737},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnList=this.destroyElement(this._btnList),this._rpImgArr=this.destroyElement(this._rpImgArr),this._reciveImgArr=this.destroyElement(this._reciveImgArr),this._btnArr=this.destroyElement(this._btnArr),this._progressMscArr=this.destroyElement(this._progressMscArr),this.v.buyMscHtml=this.destroyElement(this.v.buyMscHtml),this._tween&&(this._tween.stop(),this._tween=null),s.prototype.destroy.call(this)},a.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.v.buyBtn,this,this.buyHandler),this.onAutoClick(this.v.closeBtn,this,this.close),this.onAutoGlobalEvt("FAMILY_PARTY_UPDATA",this,this.updateView),this.onAutoGlobalEvt("FAMILY_PARTY_BTN_CLICK",this,this.updateView);for(var t=0;t<5;t++)this.onAutoClick(this._btnArr[t],this,this.boxHandler,[t])},a.prototype.onOpened=function(){s.prototype.onOpened.call(this),Laya.timer.clear(this,this.tweenEffect);for(var t=o.instance.typeArr,e=[],i=0;i<t.length;i++)e.push([t[i],this.festivalType]);this._btnList.datas=e,g.FamilyPartyBtnItem.setSelectType(g.FamilyPartyModel.instance.findRPType(this.festivalType)),this.addTime(),g.FamilyPartyCtrl.instance.getFamilyPartyInfo(this.festivalType),this.v.bigPrizeBtn.rotation=0,Laya.timer.once(5e3,this,this.tweenEffect),this.updateView();var n=g.FamilyPartyModel.instance.getTypeByData(this.festivalType);!n||g.FamilyPartyModel.instance.getTypeByIsShowDlog(this.festivalType)||n[0]||(WindowManager.instance.open(this.openDlog),g.FamilyPartyModel.instance.setTypeByIsShowDlog(!0,this.festivalType))},a.prototype.close=function(){Laya.timer.clear(this,this.tweenEffect),Laya.timer.clear(this,this.close),this._tween&&(this._tween.stop(),this._tween=null),s.prototype.close.call(this)},a.prototype.tweenEffect=function(){var t=this;this._tween=TweenJS.create(this.v.bigPrizeBtn).to({rotation:-10},33).onComplete(function(){t._tween.to({rotation:10},66).onComplete(function(){t._tween.to({rotation:0},33).onComplete(function(){Laya.timer.once(5e3,t,t.tweenEffect)}).start()}).start()}).start()},a.prototype.addTime=function(){Laya.timer.clear(this,this.updateTime),this.time=g.FamilyPartyModel.instance.getTypeByEndTm(this.festivalType),this.updateTime(),Laya.timer.loop(1e3,this,this.updateTime),Laya.timer.once(g.FamilyPartyModel.instance.getTypeByEndTm(this.festivalType)-GlobalData.serverTime,this,this.close)},a.prototype.updateTime=function(){this.time<GlobalData.serverTime?(this.v.activityText.text="活动已结束",this.v.activityText.color="#ff3e3e",this.v.activityText1.text=""):(this.v.activityText.color="#FFFFFF",this.v.activityText.text="活动剩余时间:",this.v.activityText1.text=CommonUtil.timeStampDDHHMMToHHMMSS(this.time))},a.prototype.updateView=function(){var t=g.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(t){if(t[0])this.v.buyMsc.text="领取大奖",this.v.buyMscHtml.style.fontSize=24,this.v.buyMscHtml.innerHTML="<span style='color:#50ff28'>"+this.partName+"已激活，</span><br><span style='color:#ffec73'>活动结束后将无法完成任务，请抓紧时间完成哦~</span>";else{this.v.buyMsc.text="立即激活";var e=g.FamilyPartyModel.instance.getTypeByRechargeId(this.festivalType),i=_.instance.getRecharCfgByIndex(e)[2],n=y.redBag.RedBagUtils.getIdAndCondByMoney(1035,e);y.redBag.RedBagUtils.getActionopen()?(this.v.buyMscHtml.style.fontSize=22,this.v.buyMscHtml.innerHTML="<span style='color:#ffec7c'>"+i+"元</span>激活"+this.partName+",激活后完成任务即可领大奖!<br>(该直购计入累充及SVIP)<br>可发一次<span style='color:#ffec7c'>"+n+"元宝</span>红包"):(this.v.buyMscHtml.style.fontSize=24,this.v.buyMscHtml.innerHTML="<span style='color:#ffec7c'>"+i+"元</span>激活"+this.partName+",激活后完成任务即可领大奖!(该直购计入累充及SVIP)"),this.v.buyMscHtml.color="#FFFFFF"}var s=f.instance.getCfgByFestivalType(this.festivalType),o=s[2],a=o[o.length-1][0],r=g.FamilyPartyModel.instance.getFinishTaskCnt(this.festivalType);this._progressCtrl.value=r/a*100;for(var l=t[3],h=t[4],c=0;c<4;c++){var p=o[c],u=-1<l.indexOf(c+1);this._progressMscArr[c].text="("+r+"/"+p[0]+")",u?(this._reciveImgArr[c].visible=!0,this._rpImgArr[c].visible=!1,this._progressMscArr[c].color="#00ad35"):(this._reciveImgArr[c].visible=!1,r>=p[0]?(this._rpImgArr[c].visible=!0,this._progressMscArr[c].color="#00ad35"):(this._progressMscArr[c].color="#ff3e3e",this._rpImgArr[c].visible=!1))}if(h)this.v.bigReciveImg.visible=!0,this.v.bigPrizeRp.visible=!1,this._btnClip.visible=!1,this._btnClip.stop();else{this.v.bigReciveImg.visible=!1;var d=r>=s[4].length;(this.v.bigPrizeRp.visible=d)?(this._btnClip.visible=!0,this._btnClip.play()):(this._btnClip.visible=!1,this._btnClip.stop())}this.updateViewEX(),this.updataListView()}},a.prototype.updateViewEX=function(){var t=g.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(t){var e=t[6];this.v.mypoint.text=""+e;var i=y.config.FamilyPartyCfg.instance.getCfgByFestivalType(this.festivalType)[5];this.v.pointMsc.text="激活本派对后，每充值"+i[0]+"元获得"+i[1]+"派对点，可用于直接完成派对任务，活动结束后清零。",this.v.lwBase.skin="assets/icon/ui/party_gift/"+this.festivalType+".png"}},a.prototype.updataListView=function(){var t=g.FamilyPartyBtnItem.getSelectType(),e=g.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(e)if(e[0]){var i=e[1],n=[];for(r=0,l=i.length;r<l;r++)n.push(parseInt(i[r][0]));for(a=[],r=0,l=(s=g.FamilyPartyModel.instance.getListByType(t,n,this.festivalType)).length;r<l;r++)a.push([s[r],this.festivalType,this.openDlog]);this._list.datas=a}else{for(var s,o=f.instance.getCfgByFestivalType(this.festivalType),a=[],r=0,l=(s=g.FamilyPartyModel.instance.getListByType(t,o[4],this.festivalType)).length;r<l;r++)a.push([s[r],this.festivalType,this.openDlog]);this._list.datas=a}},a.prototype.buyHandler=function(){WindowManager.instance.open(this.openDlog)},a.prototype.boxHandler=function(t){t<4?WindowManager.instance.open(1140,[t,this.festivalType]):WindowManager.instance.open(this.openDlog)},a.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.buyBtn,"btn_light",15),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},n=a,g.FamilyPartyAlert=n}(modules=modules||{}),function(t){var o,a,e,s,i,n;function r(){return null!==a&&a.apply(this,arguments)||this}o=t.family_party||(t.family_party={}),e=t.config.FamilyPartyCfg,s=t.common.CustomClip,i=t.notice.SystemNoticeManager,a=ui.FamilyPartyAwardAlertUI,__extends(r,a),r.prototype.initialize=function(){a.prototype.initialize.call(this),this.createEffect(),this.state=0,this.condition=0,CommonUtil.setHTMLPro(this.htmlMsc,"#3a5385","SimHei",24,"center"),this._taskBase=[this.item1,this.item2,this.item3,this.item4]},r.prototype.destroy=function(){this._taskBase=this.destroyElement(this._taskBase),this.htmlMsc=this.destroyElement(this.htmlMsc),this._btnClip=this.destroyElement(this._btnClip),a.prototype.destroy.call(this)},r.prototype.close=function(){Laya.timer.clear(this,this.close),a.prototype.close.call(this)},r.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHandler),this.onAutoGlobalEvt("FAMILY_PARTY_UPDATA",this,this.updateView)},r.prototype.onOpened=function(){a.prototype.onOpened.call(this);var t=this._cfg[2][this.index];this.condition=t[0];for(var e=0;e<4;e++)this._taskBase[e].visible=!1;for(var i=0,n=(e=1,t.length);e<n;e+=2){var s=(e-1)/2>>0;this._taskBase[s].dataSource=[t[e],t[e+1],0,null],this._taskBase[s].visible=!0,i++}this.offSet(i),Laya.timer.once(o.FamilyPartyModel.instance.getTypeByEndTm(this.festivalType)-GlobalData.serverTime,this,this.close),this.updateView()},r.prototype.offSet=function(t){if(0<t)for(var e=this._taskBase[0].width*t+20*(t-1),i=(this.width-e)/2,n=0;n<t;n++)this._taskBase[n].x=i+20*n+this._taskBase[0].width*n},r.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t),this.index=t[0],this.festivalType=t[1],this._cfg=e.instance.getCfgByFestivalType(this.festivalType)},r.prototype.updateView=function(){var t=o.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(t){var e=!!t[0];if(this.htmlMsc.innerHTML="完成"+this.condition+"个任务可领取以下奖励",e){var i=o.FamilyPartyModel.instance.getFinishTaskCnt(this.festivalType),n=t[3];i>=this._cfg[2][this.index][0]?-1<n.indexOf(this.index+1)?this.state=3:this.state=2:this.state=1}else this.state=1;1===this.state?(this.sureBtn.visible=!0,s.thisStop(this._btnClip),this.received.visible=!1):2===this.state?(this.sureBtn.visible=!0,s.thisPlay(this._btnClip),this.received.visible=!1):(this.sureBtn.visible=!1,s.thisStop(this._btnClip),this.received.visible=!0)}},r.prototype.sureHandler=function(){2===this.state?o.FamilyPartyCtrl.instance.getFamilyPartyCntReward(this.index+1,this.festivalType):i.instance.addNotice("未满足领取条件",!0)},r.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",15),this._btnClip.scale(.8,.85,!0),this._btnClip.pos(-5,-10,!0),s.thisStop(this._btnClip)},n=r,o.FamilyPartyAwardAlert=n}(modules=modules||{}),function(t){var o,a,r,s,i,e,n;function l(){return null!==a&&a.apply(this,arguments)||this}o=t.family_party||(t.family_party={}),r=t.config.FamilyPartyCfg,s=t.config.RechargeCfg,i=t.notice.SystemNoticeManager,e=t.core.BaseDialogEx,a=e,__extends(l,a),l.prototype.initialize=function(){a.prototype.initialize.call(this),this.createEffect(),this.state=0,this._taskBase=[this.v.item1,this.v.item2,this.v.item3,this.v.item4],this.festivalType=t.festival.FestivalModel.instance.PerfectestTenType,this.posArr=[[254,238],[361,238],[254,344],[361,344]],this.partName="尾牙派对"},l.prototype.destroy=function(){this._taskBase=this.destroyElement(this._taskBase),this._btnClip=this.destroyElement(this._btnClip),a.prototype.destroy.call(this)},l.prototype.close=function(){Laya.timer.clear(this,this.close),a.prototype.close.call(this)},l.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.v.sureBtn,this,this.sureHandler),this.onAutoClick(this.v.closeBtn,this,this.close),this.onAutoGlobalEvt("FAMILY_PARTY_UPDATA",this,this.updateView)},l.prototype.onOpened=function(){a.prototype.onOpened.call(this),this._cfg=r.instance.getCfgByFestivalType(this.festivalType);for(var t=this._cfg[3],e=0;e<4;e++)this._taskBase[e].visible=!1;for(var i=0,n=(e=0,t.length);e<n;e+=2){var s=e/2>>0;this._taskBase[s].dataSource=[t[e],t[e+1],0,null],this._taskBase[s].visible=!0,i++}this.offSet(i),Laya.timer.once(o.FamilyPartyModel.instance.getTypeByEndTm(this.festivalType)-GlobalData.serverTime,this,this.close),this.updateView()},l.prototype.offSet=function(t){if(0<=t&&t<=4)for(var e=(430-(this._taskBase[0].width*t*1+10*(t-1)))/2+164,i=0;i<t;i++)this._taskBase[i].x=e+10*i+this._taskBase[0].width*i*1},l.prototype.updateView=function(){var t=o.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(t){if(t[0]){this.v.msc.text="完成"+this.partName+"全部任务即可领取派对大奖",this.v.sureBtn.label="领取";var e=o.FamilyPartyModel.instance.getFinishTaskCnt(this.festivalType),i=!!t[4];this._cfg[4].length<=e?i?(this.state=3,this.v.received.visible=!0,this.v.sureBtn.visible=!1):(this.state=2,this.v.received.visible=!1,this.v.sureBtn.visible=!0):(this.state=1,this.v.received.visible=!1,this.v.sureBtn.visible=!0)}else{this.v.received.visible=!1,this.v.sureBtn.visible=!0,this.v.sureBtn.label="立即激活",this.state=1;var n=s.instance.getRecharCfgByIndex(o.FamilyPartyModel.instance.getTypeByRechargeId(this.festivalType))[2];this.v.msc.text=n+"元开启"+this.partName+",完成全部任务可领取派对大奖"}2===this.state?(this._btnClip.play(),this._btnClip.visible=!0):(this._btnClip.stop(),this._btnClip.visible=!1)}},l.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.sureBtn,"btn_light",15),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},l.prototype.sureHandler=function(){if(2===this.state)o.FamilyPartyCtrl.instance.getFamilyPartyFinalReward(this.festivalType);else if(1===this.state){var t=o.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(t&&t[0])i.instance.addNotice("未满足领取条件",!0);else{var e=s.instance.getRecharCfgByIndex(o.FamilyPartyModel.instance.getTypeByRechargeId(this.festivalType));PlatParams.askPay(e[0],e[2])}}else console.log("不存在的状态....",this.state)},n=l,o.FamilyPartyBigAwardAlert=n}(modules=modules||{}),function(U){!function(t){var e,i=(e=t.FamilyPartyAlert,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.festivalType=U.festival.FestivalModel.instance.zhiZhenType,this.openDlog=1230,this.partName="情缘派对",this._list.y=665,this._btnList.y=655},n);function n(){return null!==e&&e.apply(this,arguments)||this}t.ChildrenPartyAlert=i;var s,o=(s=t.FamilyPartyAlert,__extends(a,s),a.prototype.initialize=function(){s.prototype.initialize.call(this),this.festivalType=12,this.openDlog=1232,this.partName="合区派对",this._list.y=660,this._btnList.y=640},a);function a(){return null!==s&&s.apply(this,arguments)||this}t.HeQuPartyAlert=o;var r,l=(r=t.FamilyPartyAlert,__extends(h,r),h.prototype.initialize=function(){r.prototype.initialize.call(this),this.festivalType=U.festival.FestivalModel.instance.SpaceTravelType,this.openDlog=1256,this.partName="仙境派对",this._list.y=730,this._btnList.y=720},h);function h(){return null!==r&&r.apply(this,arguments)||this}t.BarPartyAlert=l;var c,p=(c=t.FamilyPartyAlert,__extends(u,c),u.prototype.initialize=function(){c.prototype.initialize.call(this),this.festivalType=67,this.openDlog=1391,this.partName="戏曲派对",this._list.y=645,this._btnList.y=635},u);function u(){return null!==c&&c.apply(this,arguments)||this}t.MidAutumnPartyAlert=p;var d,y=(d=t.FamilyPartyAlert,__extends(g,d),g.prototype.initialize=function(){d.prototype.initialize.call(this),this.festivalType=U.festival.FestivalModel.instance.BarDayType,this.openDlog=1427,this.partName="蒸汽派对",this._list.y=752,this._btnList.y=742},g);function g(){return null!==d&&d.apply(this,arguments)||this}t.DoubleNinePartyAlert=y;var f,_=(f=t.FamilyPartyAlert,__extends(m,f),m.prototype.initialize=function(){f.prototype.initialize.call(this),this.festivalType=U.festival.FestivalModel.instance.openFestivalType,this.openDlog=1524,this.partName="年终派对",this._list.y=740,this._btnList.y=730},m);function m(){return null!==f&&f.apply(this,arguments)||this}t.EndNianPartyAlert=_;var v,b=(v=t.FamilyPartyBigAwardAlert,__extends(T,v),T.prototype.initialize=function(){v.prototype.initialize.call(this),this.festivalType=U.festival.FestivalModel.instance.zhiZhenType,this.partName="情缘派对"},T.prototype.offSet=function(t){if(4===t)for(var e=0;e<4;e++)this._taskBase[e].x=this.posArr[e][0],this._taskBase[e].y=this.posArr[e][1];else if(0<=t&&t<=3){var i=this._taskBase[0].width*t+15*(t-1),n=(this.width-i)/2;for(e=0;e<t;e++)this._taskBase[e].x=n+15*e+this._taskBase[0].width*e,this._taskBase[e].y=256}},T.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.sureBtn,"btn_light",15),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},T);function T(){return null!==v&&v.apply(this,arguments)||this}t.ChildrenPartyBigAwardAlert=b;var I,C=(I=t.FamilyPartyBigAwardAlert,__extends(x,I),x.prototype.initialize=function(){I.prototype.initialize.call(this),this.festivalType=12,this.partName="合区派对"},x.prototype.offSet=function(t){if(0<=t&&t<=4)for(var e=(419-(this._taskBase[0].width*t+5*(t-1)))/2+209,i=0;i<t;i++)this._taskBase[i].x=e+5*i+this._taskBase[0].width*i},x.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.sureBtn,"btn_light",15),this._btnClip.pos(-4,-8),this._btnClip.scale(1,1,!0),this._btnClip.play(),this._btnClip.visible=!1},x);function x(){return null!==I&&I.apply(this,arguments)||this}t.HeQuPartyBigAwardAlert=C;var B,S=(B=t.FamilyPartyBigAwardAlert,__extends(M,B),M.prototype.initialize=function(){B.prototype.initialize.call(this),this.festivalType=U.festival.FestivalModel.instance.SpaceTravelType,this.partName="仙境派对"},M.prototype.offSet=function(t){if(0<=t&&t<=4)for(var e=(422-(.95*this._taskBase[0].width*t+10*(t-1)))/2+127,i=0;i<t;i++)this._taskBase[i].x=e+10*i+.95*this._taskBase[0].width*i},M.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.sureBtn,"btn_light",15),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},M);function M(){return null!==B&&B.apply(this,arguments)||this}t.BarPartyBigAwardAlert=S;var w,P=(w=t.FamilyPartyBigAwardAlert,__extends(A,w),A.prototype.initialize=function(){w.prototype.initialize.call(this),this.festivalType=67,this.partName="戏曲派对"},A.prototype.offSet=function(t){if(0<=t&&t<=4)for(var e=(411-(.95*this._taskBase[0].width*t+10*(t-1)))/2+188,i=0;i<t;i++)this._taskBase[i].x=e+10*i+.95*this._taskBase[0].width*i},A.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.sureBtn,"btn_light",15),this._btnClip.pos(-4,-8),this._btnClip.scale(1,1,!0),this._btnClip.play(),this._btnClip.visible=!1},A);function A(){return null!==w&&w.apply(this,arguments)||this}t.MidAutumnBigAwardAlert=P;var R,k=(R=t.FamilyPartyBigAwardAlert,__extends(E,R),E.prototype.initialize=function(){R.prototype.initialize.call(this),this.festivalType=U.festival.FestivalModel.instance.BarDayType,this.partName="蒸汽派对"},E.prototype.offSet=function(t){if(0<=t&&t<=4)for(var e=(430-(1*this._taskBase[0].width*t+15*(t-1)))/2+177,i=0;i<t;i++)this._taskBase[i].x=e+15*i+1*this._taskBase[0].width*i},E.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.sureBtn,"btn_light",15),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},E);function E(){return null!==R&&R.apply(this,arguments)||this}t.DoubleNineBigAwardAlert=k;var D,L=(D=t.FamilyPartyBigAwardAlert,__extends(H,D),H.prototype.initialize=function(){D.prototype.initialize.call(this),this.festivalType=U.festival.FestivalModel.instance.openFestivalType,this.partName="年终派对"},H.prototype.offSet=function(t){if(0<=t&&t<=4)for(var e=(442-(1*this._taskBase[0].width*t+15*(t-1)))/2+182,i=0;i<t;i++)this._taskBase[i].x=e+15*i+1*this._taskBase[0].width*i},H.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.v.sureBtn,"btn_light",15),this._btnClip.scale(1.1,.9),this._btnClip.pos(0,-2),this._btnClip.play(),this._btnClip.visible=!1},H);function H(){return null!==D&&D.apply(this,arguments)||this}t.EndNianBigAwardAlert=L}(U.family_party||(U.family_party={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_good_man||(t.he_qu_good_man={}),i=t.festival.GoodManBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=12},s.prototype.btn3Handler=function(){WindowManager.instance.open(1227)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.titleTxt.text="赠送令牌"},n=s,e.HeQuGoodManPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_star||(t.he_qu_star={}),i=t.festival.StarBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.HeQuStarItem},s.prototype.setUI=function(){this.v.titleTxt.text="谁与争锋",this.v.text1.text="我收到的令牌:"},s.prototype.setPos=function(){this.v.activityText1.pos(63,103,!0),this.v.activityText.pos(221,103,!0)},s.prototype.setPos1=function(){this.v.activityText1.pos(130,103,!0)},s.prototype.initialize=function(){this._festType=12,this._funcId=809,i.prototype.initialize.call(this),this._windowEnumID=1228,this._windowEnumID1=1224},n=s,e.HeQuStarPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_score_rank||(t.he_qu_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.HeQuScoreRankItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),s.prototype.getFuncOpen=function(){return t.funcOpen.FuncOpenModel.instance.getFuncIsOpen(812)},s.prototype.openWin=function(){WindowManager.instance.open(1223)},s.prototype.getRp=function(){return t.redPoint.RedPointCtrl.instance.getRPProperty("heQuParty4RP")},s.prototype.setBg=function(){this.bgImg.skin="he_qu/image_hq_71.jpg"},s.prototype.setUI=function(){this.integralDescriptionText.text="赠送1枚"+t.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+"获得1积分"},n=s,e.HeQuScoreRankPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_yu_lan||(t.he_qu_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.HeQuYuLanItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),s.prototype.setUI=function(){this.bgImg.skin="he_qu/image_hq_66.jpg",this.titleImg.skin="he_qu/image_hq_69.png",this.titleImg.visible=!0,this.BG.visible=!1,this.rewardShowItem.y=420,this.text1.text="我收到的令牌:"},s.prototype.setMoXing=function(){this.rewardShowItem.fashionModelPosY=145,this.rewardShowItem.shenBingModelPosY=150,this.rewardShowItem.tianZhuModelPosY=130},n=s,e.HeQuYuLanPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_good_man||(t.he_qu_good_man={}),i=t.single_dog_good_man.SingleDogGoodManAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuGoodManAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_good_man||(t.he_qu_good_man={}),i=t.single_dog_good_man.SingleDogGoodManJiLuAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuGoodManJiLuAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_star||(t.he_qu_star={}),i=t.single_dog_sart.SingleDogSartAlert,__extends(s,i),Object.defineProperty(s.prototype,"broadcastId",{get:function(){return 77},enumerable:!0,configurable:!0}),n=s,e.HeQuStarAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_store||(t.he_qu_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.HeQuStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.HeQuStoreItem},o.prototype.getRestTime=function(){return e.HeQuStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(813)},s=o,e.HeQuStorePanel=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.announcement||(t.announcement={}),n=t.notice.SystemNoticeManager,s=t.common.CustomList,i=ui.AnnouncementViewUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=new s,this.gongGaoImg.addChildAt(this._list,0),this._list.hCount=1,this._list.vCount=1,this._list.pos(12,11),this._list.size(625,694),this._list.itemRender=e.AnnouncementHtml},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.AnnouncementCtrl.instance.GetNotice(),this.inPutText.maxChars=e.AnnouncementModel.instance.maxInputChar,this.inPutText.multiline=!0,this.inPutText.text="",this.inPutText.restrict="0-9a-zA-Z",this.cangPrompt(),this.showUI()},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.inputEnterHandler),this.onAutoEvt(this.inPutText,"blur",this,this.cangPrompt),this.onAutoEvt(this.inPutText,"focus",this,this.cangPrompt),this.onAutoEvt(this.inPutText,"input",this,this.charNumCheck),this.onAutoEvt(this.inPutText,"mousedown",this,this.inputDownHandler),this.onAutoGlobalEvt("ANNOUNCEMENT_UPDATE",this,this.showUI),this.onAutoGlobalEvt("ANNOUNCEMENT_BACK",this,function(){e.AnnouncementModel.instance.cdkeyReply&&0<e.AnnouncementModel.instance.cdkeyReply.length?WindowManager.instance.open(401):console.log("奖励返回为空")}),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){t.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._tween&&(this._tween.stop(),this._tween=null)},a.prototype.showUI=function(){this._list.datas=[e.AnnouncementModel.instance.noticeStr],this._list.relayout(),this.noGgText.visible=!e.AnnouncementModel.instance.noticeStr},a.prototype.charNumCheck=function(){var t=this.inPutText.text;t.length>e.AnnouncementModel.instance.maxInputChar?n.instance.addNotice("最大输入字数"+e.AnnouncementModel.instance.maxInputChar+"个",!0):this.inPutText.text=t.toLowerCase(),this.cangPrompt()},a.prototype.inputDownHandler=function(t){t.stopPropagation()},a.prototype.cangPrompt=function(){this.tipText.visible=!this.inPutText.text&&!this.inPutText.focus},a.prototype.inputEnterHandler=function(){this.inPutText.text?e.AnnouncementCtrl.instance.ExchangeCdkey(this.inPutText.text):n.instance.addNotice("请输入激活码",!0)},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},o=a,e.AnnouncementPanel=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.announcement||(t.announcement={}),i=t.commonAlert.CommonItemsAlert,__extends(s,i),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.timeRemaining=5,this.successfulActivation()},s.prototype.successfulActivation=function(){this.setSureBtn(!0,"确定("+this.timeRemaining+")"),this.itemArr=e.AnnouncementModel.instance.cdkeyReply,i.prototype.setOpenParam.call(this,[this.itemArr,"激活码奖励",!0,"成功兑换激活码,获得以下奖励",!0,!0,null,null]),Laya.timer.loop(1e3,this,this.closeTime)},s.prototype.closeTime=function(){this.timeRemaining--,this.setSureBtn(!0,"确定("+this.timeRemaining+")"),0==this.timeRemaining&&(Laya.timer.clear(this,this.closeTime),i.prototype.close.call(this))},s.prototype.setSureBtn=function(t,e){t?(this.sureBtn.visible=!0,this.sureBtn.label=e):this.sureBtn.visible=!1},n=s,e.AnnouncementAlert=n}(modules=modules||{}),function(e){var a,t,i,r,l,n,s;function o(){return null!==t&&t.apply(this,arguments)||this}a=e.divinatory_card||(e.divinatory_card={}),i=e.sheng_yu.ShengYuBossShouYiAlert,r=e.scene.SceneModel,l=e.config.SceneDivinatoryBossCfg,n=e.sheng_yu.ShenYuBossCtrl,t=i,__extends(o,t),o.prototype.onEvt=function(){t.prototype.onEvt.call(this),GlobalData.dispatcher.off("SHENG_YU_BOSS_SCENE_UPDATE",this,this.showReward)},o.prototype.showReward=function(){for(var t=r.instance.enterScene,e=l.instance.bosslist[t[3]][0],i=[],n=0,s=e[5].length;n<s;n++)i.push([e[5][n],1]);this._listBoss.datas=i;var o=[];for(n=0,s=e[7].length;n<s;n++)o.push([e[7][n],1]);this._listXiaoGuai.datas=o,this.BossText.text="BOSS奖励预览:("+a.DivinatoryUtil.typeNames[e[3]-1]+e[2]+")",this.xiaoGuaiText.text="小怪奖励预览:("+a.DivinatoryUtil.typeNames[e[3]-1]+e[2]+")",0===e[6]?this.tipsTxt1.text="伤害排名前三可得排名奖励，排名越高，爆率越高":this.tipsTxt1.text="归属者得归属奖励，爆率翻倍",this.tipsTxt2.text="参与得参与奖励，最后一击玩家得最后一击奖励，普通爆率"},o.prototype.btnHandler=function(){var t=e.bag.BagModel.instance.getItemsByBagId(7);t&&0<t.length?n.instance.PickTempReward():e.notice.SystemNoticeManager.instance.addNotice("暂无奖励可领",!0)},s=o,a.DivinatoryBossIncomeAlert=s}(modules=modules||{}),function(t){var e,i;function n(){}e=t.Offline||(t.Offline={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getOutlineInfoReply=function(t){this.getOutline=t,GlobalData.dispatcher.event("GET_OUTLINE_INFO_REPLY")},i=n,e.OfflineModel=i}(modules=modules||{}),function(e){var t,n,s,i,o,a,r,l;function h(){return n.call(this)||this}t=e.Offline||(e.Offline={}),s=Laya.Sprite,i=ui.OfflineProfitAlertUI,o=e.Offline.OfflineModel,a=e.config.BlendCfg,r=e.bag.BaseItem,n=i,__extends(h,n),h.prototype.initialize=function(){n.prototype.initialize.call(this),this.zOrder=2,this.sixBox.visible=!1,this._con=new s,this.addChild(this._con),this._con.pos(120,546,!0);var t=a.instance.getCfgById(24005)[1],e=o.instance.getOutline,i=[[90330001,e[3],0,null],[90430001,e[4],0,null],[90530001,e[5],0,null],[t[0],e[6],0,null],[t[1],e[7],0,null]];this.equipNameTxt.text=CommonUtil.getNameByItemId(t[0]),this.dragontNameTxt.text=CommonUtil.getNameByItemId(t[1]),this.showOfflineTime(e[2]),this.lvUpdata(e[0],e[1]),this.setItems(i)},h.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.monthCardBox,this,this.monthCardHandler),this.onAutoClick(this.zhizunBox,this,this.zhizunHandler),this.onAutoGlobalEvt("ZHIZUN_UPDATE",this,this.showZhizunBtn),this.onAutoGlobalEvt("PLAT_CHANGE_RECHARGE",this,this.updatePlatChangeRecharge)},h.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showMonthCardBtn(),this.showZhizunBtn()},h.prototype.setItems=function(t){for(var e=(this._items=t).length,i=0;i<e;i++){var n=new r;n.dataSource=t[i],n.nameVisible=!1,this._con.addChild(n),n._numTxt.visible=!1,0==Math.floor(i/3)?this._bagItemPosX=-7:this._bagItemPosX=78,n.x=this._bagItemPosX+169*Math.floor(i%3),n.y=183*Math.floor(i/3)-200,this.setNumTxt(this._items[i][1],i)}this._con.size(110*e+10*(e-1),120),this._con.scrollRect=null},h.prototype.monthCardHandler=function(){WindowManager.instance.open(100),this.close()},h.prototype.zhizunHandler=function(){WindowManager.instance.open(351),this.close()},h.prototype.showMonthCardBtn=function(){var t=e.monthCard.MonthCardModel.instance.MonthCardInfoReply;t?0===t[0]?(this.monthCardBox.gray=!0,this.monthCardTxt.text="点击开通"):(this.monthCardBox.gray=!1,this.monthCardTxt.text="已开通"):(this.monthCardBox.gray=!0,this.monthCardTxt.text="点击开通")},h.prototype.showZhizunBtn=function(){var t=e.zhizun.ZhizunModel.instance.state;null!=t&&(1==t?(this.zhizunBox.gray=!1,this.zhizunTxt.text="已开通"):(this.zhizunBox.gray=!0,this.zhizunTxt.text="点击开通"),this.setVisible())},h.prototype.showOfflineTime=function(t){this.hourClip.value=Math.floor(t/3600).toString(),this.minuteClip.value=Math.floor(Math.floor(t%3600)/60).toString(),this.sceondClip.value=Math.floor(Math.floor(Math.floor(t%3600)%60)%60).toString()},h.prototype.lvUpdata=function(t,e){this.oldLvText.text="角色等级 Lv:"+t,this.oldLvText.color="#1f304d",this.curLvText.text="角色等级 Lv:"+e,this.curLvText.color="#327C03"},h.prototype.setNumTxt=function(t,e){switch(e){case 0:this.setNameAndNumTxt(this.coinNameTxt,this.coinNumTxt,t);break;case 1:this.setNameAndNumTxt(this.exNametTxt,this.exNumtTxt,t);break;case 2:this.setNameAndNumTxt(this.genuineNameTxt,this.genuineNumTxt,t);break;case 3:this.setNameAndNumTxt(this.equipNameTxt,this.equipNumtxt,t);break;case 4:this.setNameAndNumTxt(this.dragontNameTxt,this.dragontNumTxt,t)}},h.prototype.setNameAndNumTxt=function(t,e,i){e.text="×"+i.toString(),t.x+=65-Math.floor((t.width+e.width+5)/2),e.x=t.x+t.width},h.prototype.setVisible=function(){PlatParams.isCloseRecharge&&(this.monthCardBox.visible=this.zhizunBox.visible=this.monthCardTxt.visible=this.zhizunTxt.visible=!1)},h.prototype.updatePlatChangeRecharge=function(){this.monthCardBox.visible=this.zhizunBox.visible=this.monthCardTxt.visible=this.zhizunTxt.visible=!PlatParams.isCloseRecharge},l=h,t.OfflineProfitAlert=l}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.rewardShowItem.x=80,t.instructionsText.text="每日累充、每日单笔活动可获得大量",t.textBgImg.skin="summer_day/txt_gysd_01.png",t.titleTxt.color="#b15315",t.titleTxt.text="航海寻宝",t}e=t.grain_full_treasure||(t.grain_full_treasure={}),n=t.funcOpen.FuncOpenModel,i=t.festival.TreasureBasePanel,__extends(o,i),Object.defineProperty(o.prototype,"getRestTm",{get:function(){return e.GrainFullTreasureModel.instance._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getState",{get:function(){return e.GrainFullTreasureModel.instance._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getScore",{get:function(){return e.GrainFullTreasureModel.instance._score},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getId",{get:function(){return e.GrainFullTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xianyu",{get:function(){return e.GrainFullTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oneNum",{get:function(){return e.GrainFullTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"twoNum",{get:function(){return e.GrainFullTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"threeNum",{get:function(){return e.GrainFullTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),o.prototype.getgRade=function(){return e.GrainFullTreasureModel.instance.getgRade()},o.prototype.getSelfBroadcast=function(){return e.GrainFullTreasureModel.instance.getSelfBroadcast()},o.prototype.callBakFunction=function(t){e.GrainFullTreasureModel.instance.callBakFunction(t)},o.prototype.getClassCtrl=function(t){e.GrainFullTreasureCtrl.instance.festivalNationalXunbao(t)},o.prototype.getConsumeRank=function(){e.GrainFullTreasureCtrl.instance.GetNationalXunbaoScoreList(),e.GrainFullTreasureCtrl.instance.GetNationalXunbaoScoreAndState()},o.prototype.getShuJu=function(){e.GrainFullTreasureCtrl.instance.GetNationalXunbaoBroadcastRecords()},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(765)},o.prototype.getNationalXunbaoScoreAward=function(){e.GrainFullTreasureCtrl.instance.getNationalXunbaoScoreAward()},o.prototype.openBtnHandler=function(){WindowManager.instance.open(1143)},o.prototype.openBtnHandler1=function(){WindowManager.instance.open(1144)},o.prototype.openBtnHandler2=function(){WindowManager.instance.open(1153)},o.prototype.openBtnHandler3=function(t){WindowManager.instance.open(1145,[t,this._type])},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=e.GrainFullTreasureModel.instance.xunBaoType,this.festivalType=e.GrainFullTreasureModel.instance.festivalType},s=o,e.GrainFullTreasurePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_treasure||(t.grain_full_treasure={}),i=t.festival.TreasureRankBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.GrainFullTreasureRankItem},s.prototype.getRewardStart=function(t){return e.GrainFullTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.GrainFullTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),n=s,e.GrainFullTreasureRankAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_treasure||(t.grain_full_treasure={}),i=t.festival.TreasureRankAwardBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.GrainFullTreasureRankAwardItem},Object.defineProperty(s.prototype,"getStr",{get:function(){return"航海"},enumerable:!0,configurable:!0}),s.prototype.getNationalXunbaoRank=function(){e.GrainFullTreasureCtrl.instance.getNationalXunbaoRank()},Object.defineProperty(s.prototype,"myNodeListByObjId",{get:function(){return e.GrainFullTreasureModel.instance._myNodeListByObjId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.GrainFullTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.GrainFullTreasureRankAwardAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_treasure||(t.grain_full_treasure={}),i=t.festival.TreasureBaseAlert,__extends(s,i),s.prototype.callBakFunction=function(t){e.GrainFullTreasureModel.instance.callBakFunction(function(){e.GrainFullTreasureCtrl.instance.festivalNationalXunbao(t)})},Object.defineProperty(s.prototype,"getId",{get:function(){return e.GrainFullTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xianyu",{get:function(){return e.GrainFullTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"oneNum",{get:function(){return e.GrainFullTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"twoNum",{get:function(){return e.GrainFullTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"threeNum",{get:function(){return e.GrainFullTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),n=s,e.GrainFullTreasureAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.text1.text="本轮航海寻宝已结束,寻宝不再获得积分,是否确认继续抽奖？",t}e=t.grain_full_treasure||(t.grain_full_treasure={}),i=t.festival.TreasureSpecialBaseAlert,__extends(s,i),s.prototype.dontShowHandler=function(){e.GrainFullTreasureModel.instance.dontShowTreasure=this.dontShow.selected=!this.dontShow.selected},n=s,e.GrainFullTreasureSpecialAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_store||(t.grain_full_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.GrainFullStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.GrainFullStoreItem},o.prototype.getRestTime=function(){return e.GrainFullStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(766)},s=o,e.GrainFullStorePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_festival||(t.grain_full_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.GrainFullType,this._funcId=769},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="summer_day/image_zltq_01.png",this.v.closeBtn.skin="common/btn_0yg_close.png",this.v.bgImg.y=210,this.v.tipTxt.fontSize=24,this.v.tipTxt.pos(307,426,!0),this.v.closeBtn.pos(637,319,!0),this.v.stateImg.pos(361,614,!0),this.v.goBtn.pos(318,605,!0),this.v.rewardBox.pos(197,477,!0),this.v.tipTxt.text="航海特惠,限时首充",this.v.tipTxt.color="#ffffff",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.GrainFullFestFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="summer_day/image_zltq_bg01.jpg",t}e=t.grain_full_festival||(t.grain_full_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.GrainFullFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.GrainFullType},enumerable:!0,configurable:!0}),n=s,e.GrainFullFestConLoginPanel=n}(modules=modules||{});!function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_festival||(t.grain_full_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="summer_day/image_zltq_bg08.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(277,368,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this._festType=t.festival.FestivalModel.instance.GrainFullType},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.GrainFullFestHilarityPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="summer_day/image_zltq_bg06.jpg",t.titleTxt.text="每日累充",t}e=t.grain_full_cumulate_pay||(t.grain_full_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.GrainFullCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.GrainFullCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(772)},s=o,e.GrainFullCumulatePayPanel=s}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="summer_day/image_zltq_bg04.jpg",t}a=t.grain_full_single_pay||(t.grain_full_single_pay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.GrainFullSinglePayModel.instance.getState(t[1],i),o=a.GrainFullSinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.GrainFullSinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.GrainFullSinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(771)},n=s,a.GrainFullSinglePayPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="summer_day/image_zltq_bg03.jpg",t.titleTxt.text="航海连充",t}e=t.grain_full_continuous_pay||(t.grain_full_continuous_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.GrainFullContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.GrainFullContinuousPayItem},o.prototype.getRestTime=function(){return e.GrainFullContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(770)},o.prototype.getMoneyAcc=function(){return e.GrainFullContinuousPayModel.instance.moneyAcc},s=o,e.GrainFullContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="summer_day/image_zltq_bg05.jpg",t}e=t.grain_full_festival||(t.grain_full_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.GrainFullFestDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.GrainFullType},enumerable:!0,configurable:!0}),n=s,e.GrainFullFestDailyRewardPanel=n}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.grain_full_festival||(s.grain_full_festival={}),o=s.festival.FestHilarityBasePanel,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.bgImg.skin="summer_day/image_zltq_bg07.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(277,368,!0),this.titleTxt.text="特殊掉落",CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#ffffff","SimHei",26,"center");var t=CommonUtil.getColorById(13240054),e=CommonUtil.getColorById(13250054),i=CommonUtil.getNameByItemId(13240054),n=CommonUtil.getNameByItemId(13250054);this.oneTxt.innerHTML="活动期间内，参与玩法可掉落<span style='color:"+t+"'>"+i+"</span>\n\t\t\t和<span style='color:"+e+"'>"+n+"</span>：",this.TwoTxt.innerHTML="收集30个<span style='color:"+t+"'>"+i+"</span>可以合成一个<span style='color:"+CommonUtil.getColorById(13240051)+"'>黄金锤</span>！",this.threeTxt.innerHTML="收集50个<span style='color:"+e+"'>"+n+"</span>可以合成一个<span style='color:"+CommonUtil.getColorById(13250051)+"'>铂金锤</span>！",this.goBtn.visible=this.rightBtn.visible=!1,this.leftBtn.visible=!0,this.leftBtn.x=251,this.leftBtn.label="前往挑战",this._festType=s.festival.FestivalModel.instance.GrainFullType},i.prototype.leftHandler=function(){WindowManager.instance.open(33)},e=i,t.GrainFullTeShuPanel=e}(modules=modules||{}),function(e){var t,i,n,s;function o(){var t=i.call(this)||this;return t.typeNum=e.festival.FestivalModel.instance.GrainFullType,t.bgImg.skin="summer_day/image_zltq_bg02.jpg",t.titleTxt.text="航海累消",t}t=e.grain_full_seven_days_consume||(e.grain_full_seven_days_consume={}),n=e.funcOpen.FuncOpenModel,i=e.festival.SevenDaysConsumeBasePanel,__extends(o,i),o.prototype.getDatas=function(){return t.GrainFullSevenDaysConsumeModel.instance.rewardList},o.prototype.getItemClass=function(){return t.GrainFullSevenDaysConsumeItem},o.prototype.getRestTime=function(){return t.GrainFullSevenDaysConsumeModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(774)},s=o,t.GrainFullSevenDaysConsumePanel=s}(modules=modules||{}),function(t){var c,e,i,p,n;function s(){return e.call(this)||this}c=t.wx_module||(t.wx_module={}),i=t.common.CustomList,p=t.config.ShareAwardsCfg,e=ui.wxHelpAlertUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.scrollDir=2,this._list.width=590,this._list.height=357,this._list.hCount=1,this._list.spaceX=6,this._list.spaceY=6,this._list.x=65,this._list.y=441,this._list.itemRender=c.wxHelpItem,this.addChildAt(this._list,2),CommonUtil.setHTMLPro(this.conditionHtml,"#ffffff","SimHei",24,"right"),this.conditionHtml.style.wordWrap=!0,this.ZH_language="一二三四五六七八九十",this.type=2},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHanlder),this.onAutoClick(this.shopBtn,this,this.shopHanlder),this.onAutoClick(this.lookTxt,this,this.lookHandler),this.onAutoGlobalEvt("SHARE_INFO_UPDATA",this,this.updtaView)},s.prototype.lookHandler=function(){WindowManager.instance.open(1192)},s.prototype.shopHanlder=function(){WindowManager.instance.open(1190)},s.prototype.sureHanlder=function(){c.wxShareCtrl.instance.shareAppMessage()},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.btnCtrl.setData(this.type-1),c.wxShareCtrl.instance.getShareInfo(),this.updtaView()},s.prototype.updtaView=function(){var t=c.wxShareModel.instance.data;if(t){var e=p.instance.getIdBySpeicalParm(1)[3],i=p.instance.getTypeByCfgs(this.type)[0][2];this.barTxt.text="(新玩家指未玩过本游戏的玩家)",2===this.type?this.barTitleTxt.text="邀请新玩家达到"+i+"级可领取奖励":3===this.type&&(this.barTitleTxt.text="邀请新玩家达到"+i+"级可领取奖励");var n=t[0],s=e<=n?"#ff3e3e":"#50ff28";this.conditionHtml.innerHTML="今天可获得分享奖励<span style='color:"+s+"'>("+n+"/"+e+")</span>";for(var o=c.wxShareModel.instance.shareInviteStateSort(this.type),a=[],r=0,l=0,h=o.length;l<h;l++)o[l]&&r++;for(l=0,h=o.length;l<h;l++)o[l]?a.push([this.type,o[l],-1]):a.push([this.type,o[l],r++]);this._list.datas=a}},n=s,c.wxHelpAlert=n}(modules=modules||{}),function(t){var p,e,i,n,u,s;function o(){return e.call(this)||this}p=t.wx_module||(t.wx_module={}),i=t.common.CustomList,n=t.common.ProgressBarCtrl,u=t.config.ShareAwardsCfg,e=ui.wxShareAlertUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.width=610,this._list.height=357,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=55,this._list.y=441,this._list.itemRender=p.wxShareItem,this.addChildAt(this._list,2),this._bar=new n(this.shareBar,356),this._bar.maxValue=100,this._bar.value=0,CommonUtil.setHTMLPro(this.conditionHtml,"#ffffff","SimHei",24,"right"),this.conditionHtml.style.wordWrap=!0,this.barTitleTxt.text="累计分享可领取丰厚奖励",this.ZH_language="一二三四五六七八九十",this.type=1},o.prototype.destroy=function(){e.prototype.destroy.call(this),this._list=this.destroyElement(this._list),this._btnClip=this.destroyElement(this._btnClip)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHanlder),this.onAutoClick(this.shopBtn,this,this.shopHanlder),this.onAutoClick(this.lookTxt,this,this.lookHandler),this.onAutoGlobalEvt("SHARE_INFO_UPDATA",this,this.updtaView)},o.prototype.lookHandler=function(){WindowManager.instance.open(1192)},o.prototype.shopHanlder=function(){WindowManager.instance.open(1190)},o.prototype.sureHanlder=function(){p.wxShareCtrl.instance.shareAppMessage()},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),p.wxShareCtrl.instance.getShareInfo(),this.btnCtrl.setData(this.type-1),this.updtaView()},o.prototype.updtaView=function(){var t=p.wxShareModel.instance.data;if(t){var e=u.instance.getIdBySpeicalParm(1)[3],i=u.instance.getIdBySpeicalParm(100)[3],n=u.instance.getIdBySpeicalParm(400);this.barTxt.text="(每天前"+this.ZH_language[i-1]+"次分享才计算次数)",this.barTxt1.text="(新玩家指未玩过本游戏的玩家，每天前"+n[3]+"个计算进度)";var s=0;1===this.type?(this.barTxt.visible=!0,this.barTxt1.visible=!1,this.barTitleTxt.text="累计分享可领取丰厚奖励",s=t[1],this.barTitleTxt.x=138):4===this.type&&(this.barTitleTxt.text="您邀请新玩家达到"+n[2]+"级即计算进度",this.barTxt.visible=!1,this.barTxt1.visible=!0,s=t[3],this.barTitleTxt.x=108);var o=u.instance.getCond(this.type,s);this._bar.value=100*s/o>>0,this.barMsc.text=s+"/"+o;var a=t[0]>=e?"#ff3e3e":"#50ff28";this.conditionHtml.innerHTML="今天可获得分享奖励<span style='color:"+a+"'>("+t[0]+"/"+e+")</span>";for(var r=p.wxShareModel.instance.listSort(u.instance.getTypeByCfgs(this.type),this.type),l=[],h=0,c=r.length;h<c;h++)l.push([this.type,r[h]]);this._list.datas=l}},s=o,p.wxShareAlert=s}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.wx_module||(t.wx_module={}),i=e.wxShareAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.type=4},n=s,e.wxPlayAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.wx_module||(t.wx_module={}),i=e.wxHelpAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.type=3},n=s,e.wxUpgradeAlert=n}(modules=modules||{}),function(t){var e,s,i,n,o,a;function r(){return s.call(this)||this}e=t.wx_module||(t.wx_module={}),i=t.common.CustomList,n=t.bag.BaseItem,o=t.config.BlendCfg,s=ui.CommonHuoDeRewardAlertUI,__extends(r,s),r.prototype.initialize=function(){s.prototype.initialize.call(this),this.titleTxt.text="奖励预览",this._list=i.create("v",64,149,532,283,n,5,5),this.addChild(this._list)},r.prototype.onOpened=function(){s.prototype.onOpened.call(this);for(var t=[],e=o.instance.getCfgById(96e3)[1],i=0,n=e.length;i<n;i+=2)t.push([e[i],e[i+1],0,null]);this._list.datas=t},a=r,e.wxShareAwardAlert=a}(modules=modules||{}),function(t){var e,s,o,i;function n(){return s.call(this)||this}e=t.wx_module||(t.wx_module={}),o=t.config.BlendCfg,s=ui.wxLostAlertUI,__extends(n,s),n.prototype.initialize=function(){s.prototype.initialize.call(this);var t=PlatParams.control.miniGameCollectIcon;this.lostIcon.skin="assets/icon/ui/wx_lost/image_dxts_"+t+".jpg";var e="",i=o.instance.getCfgById(99904),n=i[1].indexOf(t);-1<n&&(e=i[2][n]),this.lostMsc.text="下拉微信菜单并点击《"+e+"》即可快速回到游戏咯~",this.lostTxt.text="点击小程序《"+e+"》"},i=n,e.wxLostAlert=i}(modules=modules||{}),function(t){var e,o,a,i;function n(){return o.call(this)||this}e=t.wx_module||(t.wx_module={}),a=t.config.ShareAwardsCfg,o=ui.wxCollectAlertUI,__extends(n,o),n.prototype.initialize=function(){o.prototype.initialize.call(this);for(var t=a.instance.getIdBySpeicalParm(5),e=[this.item_1,this.item_2,this.item_3,this.item_4],i=0,n=e.length;i<n;i++)e[i].visible=!1;var s=t[4];for(i=0,n=t[4].length;i<n;i+=2)e[i/2].dataSource=[s[i],s[i+1],0,null],e[i/2].visible=!0;this.collectIcon.skin="assets/icon/ui/wx_lost/image_xcx_xx_"+PlatParams.control.miniGameCollectIcon+".png"},n.prototype.destroy=function(){this.item_1=this.destroyElement(this.item_1),this.item_2=this.destroyElement(this.item_2),o.prototype.destroy.call(this)},i=n,e.wxCollectAlert=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.cfgs=GlobalData.getConfig("share_exchange")||[]},n.prototype.getCfgById=function(t){for(var e=0,i=this.cfgs.length;e<i;e++)if(t===this.cfgs[e][0])return this.cfgs[e]},i=n,e.ShareExchangeCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.wx_module||(t.wx_module={}),n=t.config.ShareExchangeCfg,i=ui.NothingnessWorldCharmMallAlertUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=t.common.CustomList.create("v",0,0,571,733,e.wxShopItem,5),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this.titleText.text="兑换商店"},o.prototype.destroy=function(){i.prototype.destroy.call(this)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),e.wxShareCtrl.instance.ShareExchangeInfo(),this._list.datas=n.instance.cfgs.sort(function(t,e){return t[3]-e[3]})},s=o,e.wxShopAlert=s}(modules=modules||{}),function(n){var t,i,e;function s(){return i.call(this)||this}t=n.wx_module||(n.wx_module={}),i=ui.wxAddServiceAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.wxNumberDic=new Laya.Dictionary,this.wxNumberDic.set(1,["y1y_1106","wu15995755046"])},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.cpBtn1,this,this.cpHanlder,[0]),this.onAutoClick(this.cpBtn2,this,this.cpHanlder,[1]),this.onAutoClick(this.btn1,this,this.btnHandler,[1]),this.onAutoClick(this.btn2,this,this.btnHandler,[2])},s.prototype.setOpenParam=function(t){if(i.prototype.setOpenParam.call(this,t),this.type=t){var e=PlatParams.control.funcOpen[965];this.box1.visible=!1,this.pageImg.skin="wx_add_service/"+e+"_"+t+".png"}else this.box1.visible=!0,this.pageImg.skin="";this.cpBtn1.visible=this.cpBtn2.visible=n.common.MiniGameUtil.isMiniGame()},s.prototype.close=function(){this.type?WindowManager.instance.open(1451):i.prototype.close.call(this)},s.prototype.cpHanlder=function(t){var e=PlatParams.control.funcOpen[965],i=this.wxNumberDic.get(e);i&&n.common.MiniGameUtil.copyClipboard(i[t])},s.prototype.btnHandler=function(t){WindowManager.instance.open(1451,t)},e=s,t.wxAddServiceAlert=e}(modules=modules||{}),function(s){var l,e,a,t,i,n,o,r,h;function c(){return e.call(this)||this}l=s.jiu_xiao_ling||(s.jiu_xiao_ling={}),a=s.config.HeavenSeasonCfg,t=Laya.Event,i=s.common.BtnGroup,n=s.common.SimpleList,o=s.common.ProgressBarCtrl,r=s.common.CommonUtil,e=ui.JiuXiaoLingViewUI,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._arr=new Array,this._arr1=new Array,this._list=n.create(l.JiuXiaoLingItem,118,348,2,1,0,0),this._list.size(401,348),this.rewardList.addChild(this._list),this._list.visible=!0,this._btnGroup=new i,this._btnGroup.setBtns(this.rewardBtn,this.taskBtn),this._proCtrl=new o(this.blessImg,386,this.blessTxt),r.setHTMLPro(this.bigRewardHTML,"#ffffff","SimHei",24),this.rewardShowItem.setDataFun([1,.8,.8,1,"assets/icon/ui/heaven_season/"]),this.rewardShowItem.fashionModelPosY=120,this.rewardShowItem.tuJianModelCenterY=-30,this.rewardShowItem.imgCenterY=-30,this.tipsHtml.visible=s.redBag.RedBagUtils.getActionopen();var t=s.redBag.RedBagUtils.getIdAndCondByMoney(1025,71);this.tipsHtml.innerHTML="<span style='color:#4c5e8a;font-size:26px;font-family:SimHei;'>可发一次</span><span style='color:#168a17;font-size:26px;font-family:SimHei;'>"+t+"元宝</span><span style='color:#4c5e8a;font-size:26px;font-family:SimHei;'>红包</span>"},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._list,t.SELECT,this,this.listHandler),this.onAutoEvt(this._btnGroup,t.CHANGE,this,this.btnGroupHandler),this.onAutoClick(this.yuLanBtn,this,this.yuLanBtnHandler),this.onAutoClick(this.buyLvBtn,this,this.buyLvBtnHandler),this.onAutoClick(this.getExpBtn,this,this.getExpBtnHandler),this.onAutoClick(this.jiHuoBtn,this,this.jiHuoBtnHandler),this.onAutoClick(this.tipsBtn,this,this.tipsBtnHandler),this.onAutoClick(this.leftBtn,this,this.leftAndRightBtnHandler,[0]),this.onAutoClick(this.rightBtn,this,this.leftAndRightBtnHandler,[1]),this.onAutoGlobalEvt("JIU_XIAO_LING_UPDATE",this,this.upDateUI),this.onAutoEvt(this._list,"SCROLL_INDEX_CHANGE",this,this.setNextRewardUpdate),this.regAutoRP(this.rewardBtnRp,["jiuXiaoLingRP"]),this.regAutoRP(this.taskBtnRp,["jiuXiaoLingTaskRP"])},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),l.JiuXiaoLingModel.instance._closeOpenBuyTipsWin=!1,l.JiuXiaoLingCtrl.instance.GetHeavenInfo(),this._showIndex=0,this._btnGroup.selectedIndex=0,this.upDateUI()},c.prototype.upDateUI=function(t){if(void 0===t&&(t=!1),0!=l.JiuXiaoLingModel.instance.openState){if(this._dates=a.instance.getCfgBySeason(l.JiuXiaoLingModel.instance.season),this._dates){var e=this._dates[7];this._arr.length=0;for(var i=this._arr1.length=0;i<e.length;i++){var n=i+1;i>=l.JiuXiaoLingModel.instance._fengGeLv?this._arr1.push([n,this._dates]):this._arr.push([n,this._dates])}var s=l.JiuXiaoLingModel.instance.getRp(),o=s[0]?s[1]:l.JiuXiaoLingModel.instance.level-1;o+1>l.JiuXiaoLingModel.instance._fengGeLv?(this._list.datas=this._arr1,o-=l.JiuXiaoLingModel.instance._fengGeLv,this._zhanShiIdx=1):(this._list.datas=this._arr,this._zhanShiIdx=0),this._list.scrollToIndex(o),this.setTimeAndSaiJi(),this.updateMoXing(),this.setNextReward(o),this.setLvAndExp(t),this.showJianTou()}}else this.close()},c.prototype.leftAndRightBtnHandler=function(t){var e=l.JiuXiaoLingModel.instance.getRp(),i=e[0]?e[1]:l.JiuXiaoLingModel.instance.level-1;0==t?(this._list.datas=this._arr,this._zhanShiIdx=0,i+1>l.JiuXiaoLingModel.instance._fengGeLv&&(i=l.JiuXiaoLingModel.instance._fengGeLv-1)):(this._list.datas=this._arr1,i+(this._zhanShiIdx=1)>l.JiuXiaoLingModel.instance._fengGeLv?i-=l.JiuXiaoLingModel.instance._fengGeLv:i=0),this._list.scrollToIndex(i),this.setTimeAndSaiJi(),this.updateMoXing(),this.setNextReward(i),this.setLvAndExp(!1),this.showJianTou()},c.prototype.showJianTou=function(){var t=this._list.startShowIndex+3,e=this._list.datas.length-1,i=this._dates[7];this.rightBtn.visible=0===this._zhanShiIdx&&e<=t&&l.JiuXiaoLingModel.instance._fengGeLv<i.length,this.leftBtn.visible=1===this._zhanShiIdx&&3===t},c.prototype.btnGroupHandler=function(){0===this._btnGroup.selectedIndex||1===this._btnGroup.selectedIndex&&(WindowManager.instance.open(437),this._btnGroup.selectedIndex=0)},c.prototype.listHandler=function(){this._list.selectedIndex},c.prototype.yuLanBtnHandler=function(){WindowManager.instance.open(438)},c.prototype.buyLvBtnHandler=function(){var t=this._dates[7].length;l.JiuXiaoLingModel.instance.level!==t?WindowManager.instance.open(440):s.notice.SystemNoticeManager.instance.addNotice("当前等级已满",!0)},c.prototype.getExpBtnHandler=function(){WindowManager.instance.open(437)},c.prototype.jiHuoBtnHandler=function(){WindowManager.instance.open(439)},c.prototype.tipsBtnHandler=function(){l.JiuXiaoLingModel.instance.tipsBtnHandler()},c.prototype.setTimeAndSaiJi=function(){this.saiJiNameText.text="第"+l.JiuXiaoLingModel.instance.season+"赛季";var t=this._dates[11],e=this._dates[12];this.bigRewardNameText.text=""+t,this.bigRewardHTML.innerHTML=e,this.tipsHtml.visible=this.noJiHuoBox.visible=this.jiHuoBtn.visible=0===l.JiuXiaoLingModel.instance.goldHeavenState,this.tipsHtml.visible&&(this.tipsHtml.visible=s.redBag.RedBagUtils.getActionopen()),this.yiJiHuoImg.visible=0!==l.JiuXiaoLingModel.instance.goldHeavenState;var i=r.timeConversionYMD(l.JiuXiaoLingModel.instance.seasonBeginTick,"."),n=r.timeConversionYMD(l.JiuXiaoLingModel.instance.seasonEndTick,".");this.activityText.text=i+" - "+n+" "},c.prototype.setNextRewardUpdate=function(){var t=this._list.startShowIndex+3;this.setNextReward(t),this.showJianTou()},c.prototype.setNextReward=function(t){void 0===t&&(t=this._list.selectedIndex),-1===t&&(t=0);var e=this._list.datas.length,i=t+1;1==this._zhanShiIdx&&(i=t+1+l.JiuXiaoLingModel.instance._fengGeLv,e+=l.JiuXiaoLingModel.instance._fengGeLv);var n=5*(1+(i/5>>0));if(n=e<=n?e:n,this.nextReward.lvText.text=n+"级可领",this._showIndex!=n){this._showIndex=n;var s=this._dates[6],o=this._dates[7],a=s[this._showIndex-1],r=o[this._showIndex-1];a&&a[0]?(this.nextReward.item.dataSource=[a[0],a[1],0,null],this.nextReward.item.visible=!0,this.nextReward.noRewardText.visible=!1):(this.nextReward.item.visible=!1,this.nextReward.noRewardText.visible=!0),r&&r[0]?(this.nextReward.item1.dataSource=[r[0],r[1],0,null],this.nextReward.item1.visible=!0):this.nextReward.item1.visible=!1}this._showIndex=n,this.nextReward.lvText.color="#ffffff",this.nextReward.noImg.visible=this.nextReward.noImg1.visible=this.nextReward.lvTextBgImg.visible=this.nextReward.img1.visible=!1},c.prototype.setLvAndExp=function(t){void 0===t&&(t=!1);var e=this._dates[9],i=l.JiuXiaoLingModel.instance.exp;this._proCtrl.maxValue=e,this._proCtrl.value=i,this.lvClip.value=""+l.JiuXiaoLingModel.instance.level;var n=a.instance.getLvBySeason(l.JiuXiaoLingModel.instance.season);this.buyLvBtn.visible=l.JiuXiaoLingModel.instance.level<n},c.prototype.updateMoXing=function(){this.rewardShowItem.stopTween();var t=this._dates[13],e=this._dates[15],i=this._dates[14];this.rewardShowItem.showRewardObj(t,e,i),this.observationItem.data=[[this.rewardShowItem._modelClip,Math.round(t/1e3)]]},c.prototype.close=function(){e.prototype.close.call(this),this.rewardShowItem.stopTween(),l.JiuXiaoLingModel.instance._closeOpenBuyTipsWin=!1,this._proCtrlTween&&this._proCtrlTween.stop()},c.prototype.destroy=function(){this._btnGroup=this.destroyElement(this._btnGroup),this._list=this.destroyElement(this._list),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.observationItem=this.destroyElement(this.observationItem),this._proCtrlTween&&(this._proCtrlTween.stop(),this._proCtrlTween=null),e.prototype.destroy.call(this),this._proCtrl.destroy(),this._proCtrl=null},h=c,l.JiuXiaoLingPanel=h}(modules=modules||{}),function(t){var s,e,i,n,o,a,r,l,h;function c(){return e.call(this)||this}s=t.jiu_xiao_ling||(t.jiu_xiao_ling={}),i=t.config.HeavenSeasonCfg,n=Laya.Event,o=t.common.CustomClip,a=t.common.BtnGroup,r=t.common.CustomList,l=t.common.ProgressBarCtrl,e=ui.JiuXiaoLingTaskViewUI,__extends(c,e),c.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this._list=new r,this._list.vCount=1,this._list.itemRender=s.JiuXiaoLingTaskItem,this._list.width=640,this._list.height=660,this._list.spaceY=0,this._list.spaceX=0,this.taskListBox.addChild(this._list),this._list.x=0,this._list.y=0,this._btnGroup=new a,this._btnGroup.setBtns(this.rewardBtn,this.taskBtn),this._proCtrl=new l(this.blessImg,386,this.blessTxt),this.initializeClip()},c.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,n.CHANGE,this,this.btnGroupHandler),this.onAutoClick(this.tipsBtn,this,this.tipsBtnHandler),this.onAutoClick(this.qieHuanTaskBtn,this,this.qieHuanTaskBtnHandler),this.onAutoClick(this.receiveBox,this,this.receiveBoxHandler),this.onAutoGlobalEvt("JIU_XIAO_LING_UPDATE",this,this.updateUI),t.redPoint.RedPointCtrl.instance.registeRedPoint(this.rewardBtnRp,["jiuXiaoLingRP"]),t.redPoint.RedPointCtrl.instance.registeRedPoint(this.taskBtnRp,["jiuXiaoLingTaskRP"])},c.prototype.offEvt=function(){e.prototype.offEvt.call(this),t.redPoint.RedPointCtrl.instance.retireRedPoint(this.rewardBtnRp),t.redPoint.RedPointCtrl.instance.retireRedPoint(this.taskBtnRp)},c.prototype.onOpened=function(){e.prototype.onOpened.call(this),s.JiuXiaoLingCtrl.instance.GetHeavenInfo(),this.openFun()},c.prototype.tipHandler=function(){t.notice.SystemNoticeManager.instance.addNotice("等级提升",!1)},c.prototype.btnGroupHandler=function(){0===this._btnGroup.selectedIndex?(WindowManager.instance.open(436),this._btnGroup.selectedIndex=1):this._btnGroup.selectedIndex},c.prototype.qieHuanTaskBtnHandler=function(){1==this._taskType?this._taskType=2:2==this._taskType&&(this._taskType=1),this.switchTaskUI()},c.prototype.receiveBoxHandler=function(){0!=s.JiuXiaoLingModel.instance.goldHeavenState?0<s.JiuXiaoLingModel.instance.extraReward.length&&s.JiuXiaoLingCtrl.instance.DrawExtralHeavenExp():s.JiuXiaoLingModel.instance.showBuyTipsCommon()},c.prototype.tipsBtnHandler=function(){s.JiuXiaoLingModel.instance.tipsBtnHandler()},c.prototype.openFun=function(){if(this._dates=i.instance.getCfgBySeason(s.JiuXiaoLingModel.instance.season),this._dates){var t=s.JiuXiaoLingModel.instance.getRpTaskSaiJi(),e=s.JiuXiaoLingModel.instance.getRpTaskJieDuan();this._taskType=e&&!t?1:!e&&t?2:1,this._btnGroup.selectedIndex=1,this.updateUI(),this._isOpenFirst=!0}},c.prototype.updateUI=function(t){void 0===t&&(t=!1),0!=s.JiuXiaoLingModel.instance.openState?(t&&this.tipHandler(),this.switchTaskUI(),this.setLvAndExp(t),this.setExpProgressAndOther()):this.close()},c.prototype.setLvAndExp=function(t){var e=this;void 0===t&&(t=!1);var i=this._dates[9],n=s.JiuXiaoLingModel.instance.exp;this._proCtrl.maxValue=i,this._proCtrlTween&&(this._proCtrlTween.stop(),this._proCtrlTween=null),this._isOpenFirst?this._proCtrlTween=t?TweenJS.create(this._proCtrl).to({value:i},200).onComplete(function(){e._proCtrl.value=0,e._proCtrlTween=TweenJS.create(e._proCtrl).to({value:n},200).onComplete(function(){e._proCtrl.value=n}).start()}).start():TweenJS.create(this._proCtrl).to({value:n},400).onComplete(function(){e._proCtrl.value=n}).start():this._proCtrl.value=n,this.lvClip.value=""+s.JiuXiaoLingModel.instance.level},c.prototype.switchTaskUI=function(){if(1==this._taskType){this.qieHuanTaskBtn.skin="jiu_xiao_ling/image_jxl_sj.png",this.qieHuanTaskNameTerxt.text="赛季挑战",this.expJDNameText.text="阶段经验:",this.titleTxt.text="阶段任务";var t=CommonUtil.timeConversionYMD(s.JiuXiaoLingModel.instance.stageEndTick,"/");this.activityText1.text="本阶段任务结束时间:"+t;var e=s.JiuXiaoLingModel.instance.getJDTaskAllExp(),i=e[0],n=e[1];this.expJinDunText.text=i+"/"+n,this.expJinDunText.color="#168a17",s.JiuXiaoLingModel.instance.tasksJieDuan.sort(this.sortFunc.bind(this)),this._list.datas=s.JiuXiaoLingModel.instance.tasksJieDuan}else 2==this._taskType&&(this.qieHuanTaskBtn.skin="jiu_xiao_ling/image_jxl_jd.png",this.qieHuanTaskNameTerxt.text="阶段挑战",this.expJDNameText.text="赛季任务:",this.titleTxt.text="赛季任务",t=CommonUtil.timeConversionYMD(s.JiuXiaoLingModel.instance.seasonEndTick,"/"),this.activityText1.text="本赛季任务结束时间:"+t,i=s.JiuXiaoLingModel.instance.getSJTaskCompleteNum(),n=s.JiuXiaoLingModel.instance.tasksSaiJi.length,this.expJinDunText.text=i+"/"+n,this.expJinDunText.color="#168a17",s.JiuXiaoLingModel.instance.tasksSaiJi.sort(this.sortFunc.bind(this)),this._list.datas=s.JiuXiaoLingModel.instance.tasksSaiJi);this.setExpProgressAndOther()},c.prototype.setExpProgressAndOther=function(){var t=CommonUtil.timeConversionYMD(s.JiuXiaoLingModel.instance.stageEndTick+864e5,"/");if(this.activityText2.text=t+"零点刷新",1===this._taskType){this.activityText2.visible=!0;var e=this._dates[3];s.JiuXiaoLingModel.instance.stage===e.length-1&&(this.activityText2.visible=!1),0!=s.JiuXiaoLingModel.instance.goldHeavenState?0<s.JiuXiaoLingModel.instance.extraReward.length?this.receiveBox.gray=this.receivedImg.visible=!1:this.receiveBox.gray=this.receivedImg.visible=!0:this.receiveBox.gray=this.receivedImg.visible=!1}else this.receivedImg.visible=this.activityText2.visible=!1;this.activityText.visible=this.receiveBox.visible=1===this._taskType,1==this._taskType?this.qieHuanTaskRpImg.visible=s.JiuXiaoLingModel.instance.getRpTaskSaiJi():this.qieHuanTaskRpImg.visible=s.JiuXiaoLingModel.instance.getRpTaskJieDuan(),0<s.JiuXiaoLingModel.instance.extraReward.length&&0!=s.JiuXiaoLingModel.instance.goldHeavenState?o.thisPlay(this._prizeEffect):o.thisStop(this._prizeEffect)},c.prototype.sortFunc=function(t,e){var i=t[1],n=e[1];i=this.swichState(i),n=this.swichState(n);var s=parseInt(t[0]),o=parseInt(e[0]);return i===n?s<o?-1:1:n<i?1:-1},c.prototype.swichState=function(t){return[0,2,1,3,4][t]},c.prototype.initializeClip=function(){this._prizeEffect=o.create("assets/effect/ok_state.atlas","ok_state",8),this.receiveBox.addChildAt(this._prizeEffect,0),this._prizeEffect.pos(-87,-93,!0),this._prizeEffect.visible=!1},c.prototype.close=function(){e.prototype.close.call(this),this._prizeEffect&&(this._prizeEffect.stop(),this._prizeEffect.visible=!1),this._proCtrlTween&&this._proCtrlTween.stop()},c.prototype.destroy=function(){this._prizeEffect=this.destroyElement(this._prizeEffect),this._btnGroup=this.destroyElement(this._btnGroup),this._list=this.destroyElement(this._list),this._proCtrlTween&&(this._proCtrlTween.stop(),this._proCtrlTween=null),e.prototype.destroy.call(this),this._proCtrl.destroy(),this._proCtrl=null},h=c,s.JiuXiaoLingTaskPanel=h}(modules=modules||{}),function(l){var h,t,e,i;function n(){return t.call(this)||this}h=l.jiu_xiao_ling||(l.jiu_xiao_ling={}),e=l.common.CustomList,t=ui.JiuXiaoLingAwardAlertUI,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=new e,this._list.width=532,this._list.height=157,this._list.hCount=5,this._list.spaceX=8,this._list.spaceY=-18,this._list.itemRender=h.JiuXiaoLingBaseItemItem,this._list.x=0,this._list.y=0,this.daJiangListBox.addChild(this._list),this._listPuTong=new e,this._listPuTong.width=532,this._listPuTong.height=157,this._listPuTong.hCount=5,this._listPuTong.spaceX=8,this._listPuTong.spaceY=-18,this._listPuTong.itemRender=h.JiuXiaoLingBaseItemItem,this._listPuTong.x=0,this._listPuTong.y=0,this.puTongListBox.addChild(this._listPuTong)},n.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateUI()},n.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler)},n.prototype.btnHandler=function(){this.close(),WindowManager.instance.open(439)},n.prototype.updateUI=function(){var t=l.config.HeavenSeasonCfg.instance.getCfgBySeason(h.JiuXiaoLingModel.instance.season);if(t){for(var e=Array(),i=Array(),n=t[6],s=t[7],o=l.config.HeavenSeasonCfg.instance.getLvBySeason(h.JiuXiaoLingModel.instance.season),a=0;a<o;a++)0!=a&&(a+1)%10==0&&(r=n[a])&&r[0]&&e.push([r[0],r[1],0,null]);for(a=0;a<o;a++){var r;0!=a&&(a+1)%5==0&&(r=s[a])&&r[0]&&i.push([r[0],r[1],0,null])}i.sort(h.JiuXiaoLingModel.instance.sortFunc1.bind(h.JiuXiaoLingModel.instance)),e.sort(h.JiuXiaoLingModel.instance.sortFunc1.bind(h.JiuXiaoLingModel.instance)),this._list.datas=i,this._listPuTong.datas=e,this.btn.visible=0===h.JiuXiaoLingModel.instance.goldHeavenState,this.yiJiHuoImg.visible=0!==h.JiuXiaoLingModel.instance.goldHeavenState}},n.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._listPuTong=this.destroyElement(this._listPuTong),t.prototype.destroy.call(this)},i=n,h.JiuXiaoLingAwardAlert=i}(modules=modules||{}),function(t){var r,s,l,e,o,i;function n(){return s.call(this)||this}r=t.jiu_xiao_ling||(t.jiu_xiao_ling={}),l=t.config.HeavenSeasonCfg,e=t.common.CustomList,o=t.config.RechargeCfg,s=ui.JiuXiaoLingBuyAlertUI,__extends(n,s),n.prototype.initialize=function(){s.prototype.initialize.call(this),this._list=new e,this._list.width=532,this._list.height=251,this._list.hCount=5,this._list.spaceX=8,this._list.spaceY=-18,this._list.itemRender=r.JiuXiaoLingBaseItemItem,this._list.x=0,this._list.y=0,this.daJiangListBox.addChild(this._list),CommonUtil.setHTMLPro(this.bigRewardHTML,"#ffffff","SimHei",24),this.rewardShowItem.setDataFun([1,.8,.8,1,"assets/icon/ui/heaven_season/"]),this.rewardShowItem.fashionModelPosY=110,this.rewardShowItem.tuJianModelCenterY=-20,this.rewardShowItem.imgCenterY=-25},n.prototype.onOpened=function(){if(s.prototype.onOpened.call(this),this._dates=l.instance.getCfgBySeason(r.JiuXiaoLingModel.instance.season),this._dates){var t=this._dates[11],e=this._dates[12],i=this._dates[16];if(this.tipsText1.text=this.bigRewardNameText.text=""+t,this.bigRewardHTML.innerHTML=e,this.tipsText.text=i+"级即可领取",this._cfg=o.instance.getRecharCfgByIndex(71),this._cfg){var n=this._cfg[2];this.btn.label=n+"元激活"}else this.btn.label="激活";this.showReward(),this.updateMoXing(),this.setEWaiReward()}},n.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("JIU_XIAO_LING_UPDATE",this,this.setEWaiReward)},n.prototype.btnHandler=function(){this._cfg&&PlatParams.askPay(this._cfg[0],this._cfg[2])},n.prototype.setEWaiReward=function(){var t=this._cfg[6][0];this.text1.text="现在激活即可获得"+(t?t[1]:0);var e=this.text1.textWidth+this.img1.width+this.text2.textWidth,i=(this.width-e)/2;this.text1.x=i,this.img1.x=this.text1.x+this.text1.textWidth,this.text2.x=this.img1.x+this.img1.width,this.yiJiHuoImg.visible=0!==r.JiuXiaoLingModel.instance.goldHeavenState,this.btn.visible=0===r.JiuXiaoLingModel.instance.goldHeavenState},n.prototype.showReward=function(){for(var t=this._dates[6],e=this._dates[7],i=Array(),n=Array(),s=l.instance.getLvBySeason(r.JiuXiaoLingModel.instance.season),o=0;o<s;o++)0!=o&&(o+1)%10==0&&(a=t[o])&&a[0]&&i.push([a[0],a[1],0,null]);for(o=0;o<s;o++)0!=o&&(o+1)%5==0&&(a=e[o])&&a[0]&&n.push([a[0],a[1],0,null]);for(o=0;o<n.length;o++){var a;(a=n[o])&&i.push(a)}i.sort(r.JiuXiaoLingModel.instance.sortFunc1.bind(r.JiuXiaoLingModel.instance)),this._list.datas=i},n.prototype.updateMoXing=function(){this.rewardShowItem.stopTween();var t=this._dates[13],e=this._dates[15],i=this._dates[14];this.rewardShowItem.showRewardObj(t,e,i),this.observationItem.data=[[this.rewardShowItem._modelClip,Math.round(t/1e3)]]},n.prototype.close=function(){s.prototype.close.call(this),this.rewardShowItem.stopTween()},n.prototype.destroy=function(){this._list=this.destroyElement(this._list),this.rewardShowItem=this.destroyElement(this.rewardShowItem),this.observationItem=this.destroyElement(this.observationItem),this._dates=null,this._cfg=null,s.prototype.destroy.call(this)},i=n,r.JiuXiaoLingBuyAlert=i}(modules=modules||{}),function(t){var u,e,d,i,n,s,o;function a(){return e.call(this)||this}u=t.jiu_xiao_ling||(t.jiu_xiao_ling={}),d=t.config.HeavenSeasonCfg,i=t.common.CustomList,n=Laya.Event,s=t.common.NumInputCtrl,e=ui.JiuXiaoLingBuyLvAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create("v",0,0,532,160,u.JiuXiaoLingBaseItemItem,-18,5),this._list.spaceX=8,this.daJiangListBox.addChild(this._list),this._listPuTong=i.create("v",0,0,532,160,u.JiuXiaoLingBaseItemItem,-18,5),this._listPuTong.spaceX=8,this.puTongListBox.addChild(this._listPuTong),this._input=new s(this.numInput,this.addBtn,this.reduceBtn,this.addTenBtn,this.reduceTenBtn),CommonUtil.setHTMLPro(this.buyTipsHTML,"#3a5385","SimHei",22,"center")},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateUI()},a.prototype.updateUIIsLvUp=function(t){void 0===t&&(t=!1),t&&this.updateUI()},a.prototype.updateUI=function(){if(this._dates=d.instance.getCfgBySeason(u.JiuXiaoLingModel.instance.season),this._dates){var t=0,e=d.instance.getLvBySeason(u.JiuXiaoLingModel.instance.season),i=u.JiuXiaoLingModel.instance.level;i!==e?(t=e<=(t=10*(1+(i/10>>0)))?e:t,this._maxNum=e-u.JiuXiaoLingModel.instance.level,this._input.min=1,this._input.max=this._maxNum,this._input.value=t-i,this._input.notice="购买等级",this._useNum=t,this.showReward()):this.close()}},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("JIU_XIAO_LING_UPDATE",this,this.updateUIIsLvUp),this._input.on(n.CHANGE,this,this.inputHandler),this._input.addListeners()},a.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._input.off(n.CHANGE,this,this.inputHandler),this._input.removeListeners()},a.prototype.inputHandler=function(){this._useNum=this._input.value,this.showReward()},a.prototype.btnHandler=function(){d.instance.getNeedNum(u.JiuXiaoLingModel.instance.season,u.JiuXiaoLingModel.instance.level,u.JiuXiaoLingModel.instance.level+this._input.value)>t.zxian_yu.ZXianYuModel.instance.xianyu?t.bag.BagUtil.openLackPropAlert(t.zxian_yu.ZXianYuModel.instance.id,1):u.JiuXiaoLingCtrl.instance.BuyHeavenTask(this._input.value)},a.prototype.showReward=function(){for(var t=this._dates[6],e=this._dates[7],i=Array(),n=Array(),s=0;s<e.length;s++){var o=s>u.JiuXiaoLingModel.instance.level-1,a=s>u.JiuXiaoLingModel.instance.level-1,r=s<=u.JiuXiaoLingModel.instance.level+(this._input.value-1);if(o&&r){var l=t[s];l&&l[0]&&i.push([l[0],l[1],0,null])}if(a&&r){var h=e[s];h&&h[0]&&n.push([h[0],h[1],0,null])}}n.sort(u.JiuXiaoLingModel.instance.sortFunc.bind(u.JiuXiaoLingModel.instance)),i.sort(u.JiuXiaoLingModel.instance.sortFunc.bind(u.JiuXiaoLingModel.instance)),this._list.datas=n,this._listPuTong.datas=i;var c=u.JiuXiaoLingModel.instance.level+this._input.value;this.tipsLvText.text="升至"+c+"级可立刻获得以下奖励",this.buyTipsHTML.innerHTML="购买<span style='color:#b15315'>"+this._input.value+"</span>级升到"+c+"级";var p=d.instance.getNeedNum(u.JiuXiaoLingModel.instance.season,u.JiuXiaoLingModel.instance.level,u.JiuXiaoLingModel.instance.level+this._input.value);this.setMoney(p)},a.prototype.setMoney=function(t){this.moneyText.text=t.toString();var e=this.moneyImg.width+this.moneyText.textWidth,i=(this.width-e)/2;this.moneyImg.x=i,this.moneyText.x=this.moneyImg.x+this.moneyImg.width},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._listPuTong=this.destroyElement(this._listPuTong),e.prototype.destroy.call(this)},o=a,u.JiuXiaoLingBuyLvAlert=o}(modules=modules||{}),function(t){var o,e,a,i,n;function s(){return e.call(this)||this}o=t.jiu_xiao_ling||(t.jiu_xiao_ling={}),a=t.config.HeavenSeasonCfg,i=t.common.CustomList,e=ui.JiuXiaoLingBuyTipsAlertUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new i,this._list.width=532,this._list.height=318,this._list.hCount=5,this._list.spaceX=8,this._list.spaceY=-18,this._list.itemRender=o.JiuXiaoLingBaseItemItem,this._list.x=0,this._list.y=0,this.daJiangListBox.addChild(this._list)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showReward()},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.cancelBtn,this,this.cancelBtnHandler),this.onAutoClick(this.okBtn,this,this.okBtnHandler)},s.prototype.cancelBtnHandler=function(){this.close()},s.prototype.okBtnHandler=function(){this.close(),WindowManager.instance.open(439)},s.prototype.showReward=function(){if(this._dates=a.instance.getCfgBySeason(o.JiuXiaoLingModel.instance.season),this._dates){for(var t=this._dates[7],e=Array(),i=a.instance.getLvBySeason(o.JiuXiaoLingModel.instance.season),n=0;n<i;n++)if(n<=o.JiuXiaoLingModel.instance.level-1){var s=t[n];s&&s[0]&&e.push([s[0],s[1],0,null])}e.sort(o.JiuXiaoLingModel.instance.sortFunc.bind(o.JiuXiaoLingModel.instance)),this._list.datas=e}},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._dates=null,e.prototype.destroy.call(this)},n=s,o.JiuXiaoLingBuyTipsAlert=n}(modules=modules||{}),function(e){var i,n,s,t,o,a;function r(){return n.call(this)||this}i=e.feed_back||(e.feed_back={}),s=e.notice.SystemNoticeManager,t=e.common.BtnGroup,o=e.common.CustomList,n=ui.FeedBackAlertUI,__extends(r,n),r.prototype.initialize=function(){n.prototype.initialize.call(this),this._list=new o,this._list.width=528,this._list.height=376,this._list.spaceX=0,this._list.spaceY=5,this._list.itemRender=i.FeedBackkItem,this._list.x=23,this._list.y=13,this.daFuBox.addChild(this._list),this._btnGroup=new t,this._btnGroup.setBtns(this.yiJianBtn,this.faFuBtn),this._toggleGroup=new t,this._toggleGroup.setBtns(this.toggleBtn1,this.toggleBtn2,this.toggleBtn3),CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",22,"center","middle"),this.toggleBtn2.visible=this.czTxt.visible=!PlatParams.isCloseRecharge},r.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._btnGroup.selectedIndex=0,this._toggleGroup.selectedIndex=0,this.inPutText.maxChars=i.FeedBackModel.instance.maxInputChar,this.inPutText.multiline=!0,this.StatementHTML.innerHTML=i.FeedBackModel.instance.desStr,this.rpImg.visible=i.FeedBackModel.instance.getgRadeRP(),this.inPutText.text="",this.tipAniText.visible=!1,this.cangPrompt()},r.prototype.onEvt=function(){var t=this;n.prototype.onEvt.call(this),this.onAutoEvt(this._btnGroup,"change",this,this.btnGroupHandler),this.onAutoEvt(this._toggleGroup,"change",this,this.toggleGroupHandler),this.onAutoClick(this.okBtn,this,this.inputEnterHandler),this.onAutoEvt(this.inPutText,"blur",this,this.cangPrompt),this.onAutoEvt(this.inPutText,"focus",this,this.cangPrompt),this.onAutoEvt(this.inPutText,"input",this,this.charNumCheck),this.onAutoEvt(this.inPutText,"mousedown",this,this.inputDownHandler),this.onAutoGlobalEvt("FEED_BACK_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FEED_BACK_CLOSE",this,function(){n.prototype.close.call(t)})},r.prototype.offEvt=function(){n.prototype.offEvt.call(this),this._tween&&(this._tween.stop(),this._tween=null)},r.prototype.charNumCheck=function(){this.inPutText.text.length>i.FeedBackModel.instance.maxInputChar&&this.tipAni("最大输入字数"+i.FeedBackModel.instance.maxInputChar+"个"),this.cangPrompt()},r.prototype.inputDownHandler=function(t){t.stopPropagation()},r.prototype.cangPrompt=function(){this.tipText.visible=!this.inPutText.text&&!this.inPutText.focus},r.prototype.inputEnterHandler=function(){var t=this.inPutText.text;t?e.chat.ChatModel.instance.isValidContent(t)?i.FeedBackCtrl.instance.SendFeedback(i.FeedBackModel.instance._type,this.inPutText.text):s.instance.addNotice("包含非法字符",!0):this.tipAni("请输入您宝贵的意见")},r.prototype.tipAni=function(t,e){var i=this;void 0===e&&(e=!1),this.tipAniText.text=t,this.tipAniText.color=e?"#168a17":"#ff3e3e",this._tween&&(this._tween.stop(),this.tipAniText.y=170),this.tipAniText.visible=!0,this._tween=TweenJS.create(this.tipAniText).to({y:150},80).chain(TweenJS.create(this.tipAniText).to({y:80},80).delay(1e3).onComplete(function(){i.tipAniText.visible=!1})).combine(!0).start()},r.prototype.btnGroupHandler=function(){0===this._btnGroup.selectedIndex?(this.yiJianBox.visible=!0,this.daFuBox.visible=!1):1===this._btnGroup.selectedIndex&&(i.FeedBackCtrl.instance.GetFeedbackList(),this.yiJianBox.visible=!1,this.daFuBox.visible=!0,this.showUI(),i.FeedBackModel.instance.ChangeFeedbackState())},r.prototype.toggleGroupHandler=function(){0===this._toggleGroup.selectedIndex?i.FeedBackModel.instance._type=1:1===this._toggleGroup.selectedIndex?i.FeedBackModel.instance._type=2:2===this._toggleGroup.selectedIndex&&(i.FeedBackModel.instance._type=3)},r.prototype.sortArr=function(t,e){return t[3]<e[3]?1:-1},r.prototype.showUI=function(){var t=i.FeedBackModel.instance.listDate;t.sort(this.sortArr),this._list.datas=t,this._list.relayout(),this.zanWuText.visible=!(t&&0<t.length),this.rpImg.visible=i.FeedBackModel.instance.getgRadeRP()},r.prototype.close=function(){this.inPutText.text?CommonUtil.alert("提示","输入区有待提交的意见,退出将清除意见内容,是否确认？",[Handler.create(this,this.openRecharge)]):n.prototype.close.call(this)},r.prototype.openRecharge=function(){n.prototype.close.call(this)},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),this._toggleGroup&&(this._toggleGroup.destroy(),this._toggleGroup=null),n.prototype.destroy.call(this)},a=r,i.FeedBackAlert=a}(modules=modules||{}),function(t){var u,e;function i(){this.actId2Type={},this.actId2Type[846]=5,this.actId2Type[847]=7,this.actId2Type[848]=1,this.actId2Type[849]=2,this.actId2Type[850]=3,this.actId2Type[851]=4,this.type2ActId={},this.type2ActId[5]=846,this.type2ActId[7]=847,this.type2ActId[1]=848,this.type2ActId[2]=849,this.type2ActId[3]=850,this.type2ActId[4]=851,this.type2WinId={},this.type2WinId[5]=[1277,1278],this.type2WinId[7]=[1275,1276],this.type2WinId[1]=[1279,1280],this.type2WinId[2]=[1281,1282],this.type2WinId[3]=[1283,1284],this.type2WinId[4]=[1285,1286],this.attrIds={};var t=GlobalData.getConfig("show_equip_change");for(var e in t){var i=t[e][0];if(!this.attrIds[i]){this.attrIds[i]=[];var n=t[e][2];for(var s in n)for(var o=n[s],a=u.ItemEquipCfg.instance.getItemCfgById(o)[8],r=0;r<a.length;r+=2)-1===this.attrIds[i].indexOf(a[r])&&this.attrIds[i].push(a[r]);this.attrIds[i].sort(function(t,e){return t-e})}}this.itemIds={},this.stars={};var l=GlobalData.getConfig("show_equip_list");for(var e in l){i=l[e][0];this.itemIds[i]||(this.itemIds[i]=new Array(7));var h=l[e][1];this.itemIds[i][h]=l[e][2],this.stars[i]=this.stars[i]||{};n=l[e][2];for(var c=0;c<n.length;c++)this.stars[i][n[c]]=h}this.offsets={};var p=u.BlendCfg.instance.getCfgById(97004)[1];for(e=0;e<p.length;e+=5)this.offsets[p[e]]=[p[e+1],p[e+2],p[e+3],p[e+4]]}u=t.config||(t.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.getCfgByType=function(t){var e=GlobalData.getConfig("show_equip");for(var i in e)if(e[i][0]===t)return e[i];return null},i.prototype.getTypeByItemId=function(t){var e=1e-5*t>>0,i=GlobalData.getConfig("show_equip");for(var n in i)if(i[n][3]===e)return i[n][0];return 0},i.prototype.getConditionByType=function(t){var e=this.getCfgByType(t);return e?e[2]:[]},i.prototype.getEquipTypeByType=function(t){var e=this.getCfgByType(t);return e?e[3]:0},i.prototype.getNameByTypeAndPart=function(t,e){var i=this.getCfgByType(t);return i?i[4][e]:""},i.prototype.getMasterCfgByTypeAndLv=function(t,e){var i=GlobalData.getConfig("show_equip_rise");for(var n in i)if(i[n][0]===t&&i[n][1]===e)return i[n];return null},i.prototype.getConvertCfgByItemId=function(t){var e=GlobalData.getConfig("show_equip_change");for(var i in e)if(-1<e[i][2].indexOf(t))return e[i];return null},i.prototype.getItemIdByTypeStarPart=function(t,e,i){return((this.itemIds[t]||[])[e]||[])[i]||0},i.prototype.getStarByItemId=function(t,e){return this.stars[t][e]},i.prototype.getSkillCfgBySkillId=function(t){var e=GlobalData.getConfig("show_equip_skill");for(var i in e)if(e[i][3]===t)return e[i]},Object.defineProperty(i.prototype,"cfgs",{get:function(){return GlobalData.getConfig("show_equip")},enumerable:!0,configurable:!0}),e=i,u.ShowEquipCfg=e}(modules=modules||{}),function(e){var i,t,n,s,o,a,r,l;function h(){return null!==t&&t.apply(this,arguments)||this}i=e.outside_show_dungeon||(e.outside_show_dungeon={}),n=e.common.SimpleList,s=e.common.CustomList,o=e.config.SceneShowEquipBossCfg,a=e.common.FuncBtnGroup,r=e.config.ShowEquipCfg,t=ui.OutsideShowDungeonViewUI,__extends(h,t),h.prototype.initialize=function(){t.prototype.initialize.call(this),this.centerX=this.centerY=0,this._typeList=s.create("h",156,130,this.dungeonBox.width,this.dungeonBox.height,i.OutsideShowDungeonBtnItem),this._typeList.pos(0,0,!0),this.dungeonBox.addChild(this._typeList),this._typeList.datas=r.instance.cfgs,this._layerList=n.create(i.OutsideShowDungeonItem,260,700,2,1,5),this._layerList.pos(0,0,!0),this._layerList.size(this.topBox.width,this.topBox.height),this.topBox.addChild(this._layerList),this._btnGroup=new a,this._btnGroup.setBtns(this.spiritBtn,this.divinatoryBtn,this.yibaoBtn),this._btnGroup.setFuncIds(354,837,852)},h.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.regAutoRP(this.spiritDungeonRP,["spiritDungeonRP"]),this.regAutoRP(this.divinatoryCardBossRP,["divinatoryCardBossRP"]),this.regAutoRP(this.yibaoRP,["outsideShowDungeonRP"]),this.onAutoClick(this.tipBtn,this,this.helpHandler),this.onAutoClick(this.addBtn,this,this.addHandler),this.onAutoEvt(this._btnGroup,"change",this,this.changeHandler),this.onAutoGlobalEvt("OUTSIDE_SHOW_BTN_CLICL",this,this.updataLayer),this.onAutoGlobalEvt("OUTSIDE_SHOW_UPDATE",this,this.updateView),this.onAutoClick(this.autoBtn,this,this.autoHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setTextTip)},h.prototype.setTextTip=function(){var t=e.bag.BagModel.instance.getItemCountById(13650003);this.textTip.text="自动使用异宝丹(剩余"+t+"个)"},h.prototype.autoHandler=function(){i.OutsideShowDungeonUtil.changeAutoUse()},h.prototype.addHandler=function(){i.OutsideShowDungeonUtil.addSpirit()},h.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._btnGroup.selectedIndex=2,i.OutsideShowDungeonBtnItem.setSelectType(r.instance.cfgs[0][0]),this.updateView(),this.updataLayer(),this.setTextTip()},h.prototype.updataLayer=function(){var t=i.OutsideShowDungeonBtnItem.getSelectType();this._layerList.datas=o.instance.getTypeByLayers(t)},h.prototype.changeHandler=function(){0===this._btnGroup.selectedIndex?WindowManager.instance.open(574):1===this._btnGroup.selectedIndex&&WindowManager.instance.open(1163)},h.prototype.updateView=function(){this.drawNum.text=i.OutsideShowDungeonModel.instance.exValue+"/"+e.halo.HaloModel.instance.getDreamlandStrength(i.OutsideShowDungeonUtil.dailMax),this.drawNum.color=0===i.OutsideShowDungeonModel.instance.exValue?"#ff3e3e":"#168a17",this.autoBtn.selected=!!i.OutsideShowDungeonModel.instance.autoUse},h.prototype.close=function(){t.prototype.close.call(this)},h.prototype.helpHandler=function(){CommonUtil.alertHelp(19046)},h.prototype.destroy=function(){t.prototype.destroy.call(this)},l=h,i.OutsideShowDungeonPanel=l}(modules=modules||{}),function(i){var n,t,s,e;function o(){return null!==t&&t.apply(this,arguments)||this}n=i.outside_show_dungeon||(i.outside_show_dungeon={}),s=i.scene.SceneModel,t=i.spiritDungeon.SpiritDungeonRBPanel,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._spiritMax=n.OutsideShowDungeonUtil.dailMax,this.xyTxt.text="今日剩余异宝值",this.autoTxt.text="自动使用异宝丹"},o.prototype.initHole=function(){this.tipsId=67050,this.holeCheckExchangeHintType=49},o.prototype.addListener2=function(){this.onAutoGlobalEvt("SPIRIT_HURT_RANK_UPDATE",this,this.updateHurtRank),this.onAutoGlobalEvt("OUTSIDE_SHOW_UPDATE",this,this.updateSpirit)},o.prototype.setconfig=function(){var t=s.instance.enterScene[3];this._rightList.datas=i.config.SceneShowEquipBossCfg.instance.getOccId(t);var e=i.config.SceneShowEquipBossCfg.instance.bosslist[t-1][0];0===e[6]?(this.playersBg.visible=this.playersTitle.visible=this.playersExpandBtn.visible=this._leftList.visible=!1,this.hurtRankBox.visible=!0,this.updateHurtRank()):(this.playersBg.visible=this.playersTitle.visible=this.playersExpandBtn.visible=this._leftList.visible=!0,this.hurtRankBox.visible=!1,this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updatePlayers),this.onAutoGlobalEvt("SCENE_REMOVE_HUMANS",this,this.updatePlayers),this.updatePlayers()),this.nameTxt.text=n.OutsideShowDungeonUtil.getTypeName(e[3])+" "+e[2]},o.prototype.updateAutoUse=function(){this.autoBtn.selected=!!n.OutsideShowDungeonModel.instance.autoUse},o.prototype.updateSpirit=function(){this.spiritNumTxt.text=n.OutsideShowDungeonModel.instance.exValue+"/"+i.halo.HaloModel.instance.getDreamlandStrength(this._spiritMax),this.spiritNumTxt.color=0===n.OutsideShowDungeonModel.instance.exValue?"#ff3e3e":"#50ff28",this.updateAutoUse()},o.prototype.updateBag=function(t){n.OutsideShowDungeonModel.instance.updateBag(t)},o.prototype.addHandler=function(){n.OutsideShowDungeonUtil.addSpirit()},o.prototype.autoHandler=function(){n.OutsideShowDungeonUtil.changeAutoUse()},e=o,n.OutsideShowDungeonRbPanel=e}(modules=modules||{}),function(a){var r,t,e,l,i,n;function s(){return null!==t&&t.apply(this,arguments)||this}r=a.outside_show_dungeon||(a.outside_show_dungeon={}),e=a.sheng_yu.ShengYuBossShouYiAlert,l=a.scene.SceneModel,i=a.sheng_yu.ShenYuBossCtrl,t=e,__extends(s,t),s.prototype.onEvt=function(){t.prototype.onEvt.call(this),GlobalData.dispatcher.off("SHENG_YU_BOSS_SCENE_UPDATE",this,this.showReward)},s.prototype.showReward=function(){for(var t=l.instance.enterScene,e=a.config.SceneShowEquipBossCfg.instance.bosslist[t[3]-1][0],i=[],n=0,s=e[5].length;n<s;n++)i.push([e[5][n],1]);this._listBoss.datas=i;var o=[];for(n=0,s=e[7].length;n<s;n++)o.push([e[7][n],1]);this._listXiaoGuai.datas=o,this.BossText.text="BOSS奖励预览:("+r.OutsideShowDungeonUtil.getTypeName(e[3])+e[2]+")",this.xiaoGuaiText.text="小怪奖励预览:("+r.OutsideShowDungeonUtil.getTypeName(e[3])+e[2]+")",0===e[6]?this.tipsTxt1.text="伤害排名前三可得排名奖励，排名越高，爆率越高":this.tipsTxt1.text="归属者得归属奖励，爆率翻倍",this.tipsTxt2.text="参与得参与奖励，最后一击玩家得最后一击奖励，普通爆率"},s.prototype.btnHandler=function(){var t=a.bag.BagModel.instance.getItemsByBagId(7);t&&0<t.length?i.instance.PickTempReward():a.notice.SystemNoticeManager.instance.addNotice("暂无奖励可领",!0)},n=s,r.OutsideShowDungeonIncomeAlert=n}(modules=modules||{}),function(t){var p,e,u,s,d,i;function n(){return null!==e&&e.apply(this,arguments)||this}p=t.extreme_equip||(t.extreme_equip={}),u=t.config.SkillCfg,s=t.config.SkillPureCfg,d=t.config.ZhiZunEquipCfg,e=ui.ExtremeEquipSkillAlertUI,__extends(n,e),n.prototype.destroy=function(){this.titleTxt=this.destroyElement(this.titleTxt),this.curLvDesc=this.destroyElement(this.curLvDesc),this.powerTxt=this.destroyElement(this.powerTxt),this.curLvDesc=this.destroyElement(this.curLvDesc),e.prototype.destroy.call(this)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this.titleTxt.text="天赋技能",this.creatEffect()},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHanlder),this.onAutoGlobalEvt("EXTREME_EQUIP_UPDATE",this,this.updateView)},n.prototype.btnHanlder=function(){for(var t=p.ExtremeEquipModel.instance.data[p.ExtremeEquipItem.getSelectType()],e=t[2],i=0,n=0,s=e.length;n<s;n++)CommonUtil.getSkillPureIdById(e[n])===this.flag&&(i=e[n]);var o=i||1e4*this.flag;p.ExtremeEquipCtrl.instance.zhizunEquipSkillAddLevel(t[0],o)},n.prototype.updateView=function(){for(var t=p.ExtremeEquipModel.instance.data[p.ExtremeEquipItem.getSelectType()],e=t[2],i=0,n=0,s=e.length;n<s;n++)CommonUtil.getSkillPureIdById(e[n])===this.flag&&(i=e[n]);var o=i||1e4*this.flag;if(this.isMax.visible=!1,0===Math.floor(o%1e3)){this.btn.label="激活",d.instance.getCfgByIdAndLevel(t[0],1)[5];var a=u.instance.getCfgById(o+1);this.iconImg.skin="assets/icon/skill/"+CommonUtil.getSkillIcon(o)+".png",this.nameTxt.text=CommonUtil.getSkillName(o)+"  Lv0",this.powerTxt.text="战力：0",this.curLvDesc.text="无",this.nextLvDesc.text=this.getSkillDes(a[0],a[2]),0<t[1]?(this.btn.visible=!0,this.btn.gray=!1,this.btn.mouseEnabled=!0,this._btnClip.play(),this._btnClip.visible=!0,this.lvUpMsc.text=""):(this.btn.visible=!0,this.btn.gray=!0,this.btn.mouseEnabled=!1,this._btnClip.stop(),this._btnClip.visible=!1,this.lvUpMsc.text="激活条件："+p.ExtremeEquipModel.instance.getNameOrIcon(p.ExtremeEquipItem.getSelectType(),1)+"Lv1")}else{this.btn.label="升级",a=u.instance.getCfgById(o);var r=u.instance.getCfgById(o+1);this.powerTxt.text="战力："+a[3],this.nameTxt.text=CommonUtil.getSkillName(o)+"  Lv"+Math.floor(o%1e4),this.curLvDesc.text=this.getSkillDes(a[0],a[2]),this.iconImg.skin="assets/icon/skill/"+CommonUtil.getSkillIcon(o)+".png",this.nextLvDesc.text=r?this.getSkillDes(r[0],r[2]):"当前等级为最高等级";var l=p.ExtremeEquipModel.instance.getCfgSkillId(p.ExtremeEquipItem.getSelectType()),h=0;for(n=0,s=l.length;n<s;n++)if(CommonUtil.getSkillPureIdById(l[n])===this.flag){h=l[n];break}if(0===h&&console.log("这种情况有bug"),o<h)this.btn.visible=!0,this._btnClip.play(),this._btnClip.visible=!0,this.lvUpMsc.text="",this.btn.gray=!1,this.btn.mouseEnabled=!0;else if(this.btn.visible=!1,this._btnClip.stop(),this._btnClip.visible=!1,this.btn.gray=!0,this.btn.mouseEnabled=!1,r){this.btn.visible=!0;var c=d.instance.findSkillCondtion(t[0],r[0]);this.lvUpMsc.text="升级条件："+p.ExtremeEquipModel.instance.getNameOrIcon(p.ExtremeEquipItem.getSelectType(),1)+"Lv"+c}else this.btn.visible=!1,this.lvUpMsc.text="",this.isMax.visible=!0}},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.flag=t,this.updateView()},n.prototype.getSkillDes=function(t,e){var i=CommonUtil.getSkillPureIdById(t),n=s.instance.getCfgById(i);return CommonUtil.stringFormat(n[5],e)},n.prototype.creatEffect=function(){this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.btn.x-4,this.btn.y-8),this._btnClip.scale(1,1,!0)},i=n,p.ExtremeEquipSkillAlert=i}(modules=modules||{}),function(t){var _,i,e,m,v,b,s,n;function o(){return null!==i&&i.apply(this,arguments)||this}_=t.extreme_equip||(t.extreme_equip={}),e=t.common.CustomList,m=t.config.ZhiZunEquipCfg,v=t.bag.BagModel,b=t.config.AttrItemCfg,s=t.bag.BagUtil,i=ui.ExtremeEquipViewUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.frontMscArr=[this.frontMsc1,this.frontMsc2,this.frontMsc3,this.frontMsc4],this.arrowsArr=[this.arrows1,this.arrows2,this.arrows3,this.arrows4],this.rearMscArr=[this.rearMsc1,this.rearMsc2,this.rearMsc3,this.rearMsc4],this.skillArr=[this.skillItem1,this.skillItem2],this._btnList=e.create("h",0,0,this.btnBox.width,this.btnBox.height,_.ExtremeEquipItem),this._btnList.scrollEvt=!0,this.btnBox.addChild(this._btnList),this.creatEffect()},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._modeBoxTween&&(this._modeBoxTween.stop(),this._modeBoxTween=null),this.frontMscArr=this.destroyElement(this.frontMscArr),this.arrowsArr=this.destroyElement(this.arrowsArr),this.rearMscArr=this.destroyElement(this.rearMscArr),this.skillArr=this.destroyElement(this.skillArr),this._btnList=this.destroyElement(this._btnList),this.btnBox=this.destroyElement(this.btnBox),this.showEff=this.destroyElement(this.showEff),i.prototype.destroy.call(this,t)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnList.datas=[0,1,2,3,4,5,6,7,8,9],this.modelBox.y=100,this._modeBoxTween?this._modeBoxTween.to({y:this.modelBox.y-10},1e3).yoyo(!0).repeat(99999999):this._modeBoxTween=TweenJS.create(this.modelBox).to({y:this.modelBox.y-10},1e3).yoyo(!0).repeat(99999999),this._modeBoxTween.start(),this.showID="";var t=_.ExtremeEquipModel.instance.getRpIndex(),e=-1===t?0:t;_.ExtremeEquipItem.setSelectType(e),this._btnList.scrollTo(126*e),this.updateView()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.btn,"click",this,this.btnHanlder),this.onAutoGlobalEvt("EXTREME_EQUIP_UPDATE",this,this.updateView),this.onAutoGlobalEvt("EXTREME_EQUIP_CLICK",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateView),this.onAutoGlobalEvt("LIST_SCROLLET_MOVE",this,this.updatePos),this.onAutoEvt(this.suitBtn,"click",this,this.suitHanlder),this.onAutoEvt(this.leftIcon,"click",this,this.moveHanlder,[!1]),this.onAutoEvt(this.rightIcon,"click",this,this.moveHanlder,[!0])},o.prototype.suitHanlder=function(){WindowManager.instance.open(1299)},o.prototype.moveHanlder=function(t){var e=Math.ceil(this._btnList.scrollPos/126)-1;e=-1===e?0:e;var i=t?e+4:e-4;i<0&&(i=0),i>=this._btnList.datas.length&&(i=this._btnList.datas.length-1),this._btnList.scrollTo(126*i+2)},o.prototype.updatePos=function(){var t=Math.ceil(this._btnList.scrollPos/126)-1,e=(t=-1===t?0:t)+4;this.leftIcon.visible=1<=t,this.rightIcon.visible=e<9,this.leftIcon.visible?this.leftRP.visible=this.getWidthRP(0,t):this.leftRP.visible=!1,this.rightIcon.visible?this.rightRP.visible=this.getWidthRP(e+1,10):this.rightRP.visible=!1},o.prototype.getWidthRP=function(t,e){for(;t<e;t++)if(_.ExtremeEquipModel.instance.getIndexRp(t))return!0;return!1},o.prototype.btnHanlder=function(){if(_.ExtremeEquipModel.instance.data){var t=_.ExtremeEquipModel.instance.data[_.ExtremeEquipItem.getSelectType()];if(t){var e=m.instance.getCfgByIdAndLevel(t[0],t[1]+1);if(e){var i=e[2],n=v.instance.getItemCountById(i[0]);n>=i[1]?_.ExtremeEquipCtrl.instance.zhizunEquipAddLevel(t[0]):s.openLackPropAlert(i[0],n-i[1])}}}},o.prototype.updateView=function(){if(_.ExtremeEquipModel.instance.data){var t=_.ExtremeEquipModel.instance.data[_.ExtremeEquipItem.getSelectType()],e=_.ExtremeEquipModel.instance.getNameOrIcon(_.ExtremeEquipItem.getSelectType(),2);if(this.showEffec(e),this.skillName.skin="assets/others/extreme/txt_extreme_"+e+".png",t){var i=t[0],n=t[1],s=m.instance.getCfgByIdAndLevel(i,n),o=m.instance.getCfgByIdAndLevel(i,n+1),a=!o;if(0===n){this.btn.label="激活";for(var r=0,l=(p=o[3]).length;r<l;r+=2){var h=(d=b.instance.getCfgById(p[r]))[2]?Math.round(1e4*p[r+1])/100+"%":p[r+1]+"";this.setAttrUI(r/2,[d[1]+":0",h])}}else if(o){this.btn.label="升级";var c=s[3],p=o[3];for(r=0,l=c.length;r<l;r+=2){h=(d=b.instance.getCfgById(c[r]))[2]?Math.round(1e4*c[r+1])/100+"%":c[r+1]+"";var u=d[2]?Math.round(1e4*(p[r+1]-c[r+1]))/100+"%":(p[r+1]-c[r+1]>>0)+"";this.setAttrUI(r/2,[d[1]+":"+h,u])}}else for(r=0,l=(c=s[3]).length;r<l;r+=2){var d;h=(d=b.instance.getCfgById(c[r]))[2]?Math.round(1e4*c[r+1])/100+"%":c[r+1]+"",this.setAttrUI(r/2,[d[1]+":"+h])}if(this._btnClip.stop(),this._btnClip.visible=!1,!a){var y=o[2],g=v.instance.getItemCountById(y[0]);this.currencyIcon.skin=CommonUtil.getIconById(y[0],!0),this.currencyCount.text=g+"/"+y[1],this.currencyCount.color=g>=y[1]?"#50ff28":"#ff0c0c",g>=y[1]&&(this._btnClip.play(),this._btnClip.visible=!0)}this.maxTxt.visible=a,this.btn.visible=!a,this.xiaohaoTxt.visible=this.currencyIcon.visible=this.currencyCount.visible=!a;var f=s?s[5]:o[5];t[2],1===f.length?(this.skillItem1.centerX=0,this.skillItem1.setData(CommonUtil.getSkillPureIdById(f[0])),this.skillItem1.visible=!0,this.skillItem2.visible=!1,this.spilit.visible=!1):1<f.length?(this.skillItem1.x=0,this.skillItem1.setData(CommonUtil.getSkillPureIdById(f[0])),this.skillItem2.setData(CommonUtil.getSkillPureIdById(f[1])),this.skillItem1.visible=this.skillItem2.visible=!0,this.spilit.visible=!0):this.skillItem1.visible=this.skillItem2.visible=!1,this.fight.value=_.ExtremeEquipModel.instance.getFight().toString(),0===n?(this.noRec.visible=!0,this.recBox.visible=!1):(this.noRec.visible=!1,this.recBox.visible=!0,this.stageFont.value=n.toString()),this.updatePos()}}},o.prototype.creatEffect=function(){this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.btn.x-4,this.btn.y-8),this._btnClip.scale(1,1,!0)},o.prototype.setAttrUI=function(t,e){void 0===e&&(e=null);var i=[this.frontMscArr[t],this.rearMscArr[t]];if(e){var n=e.length;for(s=0,o=i.length;s<o;s++)s<n?(i[s].visible=!0,i[s].text=e[s]):i[s].visible=!1,this.arrowsArr[t].visible=2===n}else for(var s=0,o=i.length;s<o;s++)i[s].visible=!1,this.arrowsArr[t].visible=!1},o.prototype.close=function(){this._modeBoxTween&&(this._modeBoxTween.stop(),this._modeBoxTween=null),i.prototype.close.call(this)},o.prototype.showEffec=function(t){this.showID!==t&&(this.showID=t,this.showEff&&(this.showEff.removeSelf(),this.showEff=this.destroyElement(this.showEff)),this.showEff=CommonUtil.creatEff(this.modelBox,"extreme_"+t,7,0,!0,10),this.showEff.pos(0,0),this.showEff.scale(1,1,!0),this.showEff.visible=!0,this.showEff.play())},n=o,_.ExtremeEquipPanel=n}(modules=modules||{}),function(t){var s,e,i,n,o;function a(){return null!==e&&e.apply(this,arguments)||this}s=t.union_war||(t.union_war={}),i=laya.events.Event,n=t.common.AvatarClip,e=ui.UnionWarMoBaiAlertUI,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this._avatarClip=n.create(1560,1560,850),this.addChild(this._avatarClip),this._avatarClip.pos(340,705,!0),this._avatarClip.anchorX=.5,this._avatarClip.anchorY=.5,this._avatarClip.mouseEnabled=!1,this._avatarClip.avatarRotationY=180,this.playerTitleImg.skin="assets/icon/ui/designation/1012.png"},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoEvt(this.cancelBtn,i.CLICK,this,this.cancelBtnHandler),this.onAutoGlobalEvt("FACTION_WAR_KING_SHOW_REPLY",this,this.showUI),this.onAutoGlobalEvt("GET_FACTION_WAR_MATCH_INFO_REPLY",this,this.setBtn)},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setBtn(),s.UnionWarCtrl.instance.factionWarKingShow(),s.UnionWarCtrl.instance.getFactionWarMatchInfo()},a.prototype.setBtn=function(){this.cancelBtn.gray=s.UnionWarModel.instance.moBaiNum>=s.UnionWarModel.instance.moBaiMaxNum},a.prototype.showUI=function(){if(s.UnionWarModel.instance.leaderShow){var t=s.UnionWarModel.instance.leaderShow[6],e=s.UnionWarModel.instance.leaderShow[3],i=s.UnionWarModel.instance.leaderShow[5],n=s.UnionWarModel.instance.leaderShow[7];this._avatarClip.reset(t,e,i,0,0,n),this.observationItem.data=[[this._avatarClip,0]],this.text2.text=s.UnionWarModel.instance.leaderShow[0],this.text1.text=s.UnionWarModel.instance.leaderNameFaction}},a.prototype.cancelBtnHandler=function(){s.UnionWarModel.instance.leaderShow&&0<s.UnionWarModel.instance.leaderFactionID.length&&s.UnionWarCtrl.instance.factionWarWorship(s.UnionWarModel.instance.leaderFactionID)},a.prototype.destroy=function(){this._avatarClip=this.destroyElement(this._avatarClip),this.observationItem=this.destroyElement(this.observationItem),e.prototype.destroy.call(this)},o=a,s.UnionWarMoBaiAlert=o}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("zhizun_equip_suit_skill")},n.prototype.getCfgAndIndex=function(t){for(var e=this._cfg.length,i=0;i<e;i++)if(this._cfg[i][0]===t)return[i,this._cfg[i]];return null},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfg},enumerable:!0,configurable:!0}),n.prototype.getFristCfg=function(){return this._cfg[0]},i=n,e.ZhizunEquipSuitSkillCfg=i}(modules=modules||{}),function(t){var o,e,a,r,i;function n(){return e.call(this)||this}o=t.extreme_equip||(t.extreme_equip={}),a=t.config.ZhizunEquipSuitSkillCfg,r=t.config.SkillPureCfg,e=ui.ThunderboltAngerAlertUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.condition1,"#3a5385","SimHei",24),this.condition1.style.wordWrap=!0,this.condition1.style.leading=10,CommonUtil.setHTMLPro(this.skillMsc,"#3a5385","SimHei",24),this.skillMsc.style.wordWrap=!0,this.skillMsc.style.leading=10,CommonUtil.setHTMLPro(this.nextSkillMsc,"#3a5385","SimHei",24),this.nextSkillMsc.style.wordWrap=!0,this.nextSkillMsc.style.leading=10},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataView()},n.prototype.updataView=function(){this.resultMsc.visible=this.skillMsc.visible=this.nextMsc.visible=this.nextSkillMsc.visible=!0;var t=o.ExtremeEquipModel.instance.order;if(t<=0){var e=a.instance.getFristCfg();this.ActivateTxt.text="未激活",this.ActivateTxt.color="#FF3E3E",this.skillTitle.text="激活条件:",this.condition1.innerHTML="至尊装备全部部位达到"+e[0]+"阶",this.resultMsc.text="技能效果:",this.skillMsc.innerHTML=e[2],this.nextMsc.visible=this.nextSkillMsc.visible=!1,this.title.text=e[3]+"0阶"}else{var i=a.instance.getCfgAndIndex(t),n=(e=i[1],i[0]),s=a.instance.cfgs[n+1];this.ActivateTxt.color="#00AD35",this.skillTitle.text="技能效果:",this.condition1.innerHTML=e[2],this.title.text=""+e[3]+(n+1)+"阶",s?(this.ActivateTxt.text="已激活",this.resultMsc.text="升级条件:",this.skillMsc.innerHTML="至尊装备全部部位达到"+s[0]+"阶",this.nextMsc.text="下级效果:",r.instance.getCfgById(s[0]),this.nextSkillMsc.innerHTML=s[2]):(this.resultMsc.visible=this.skillMsc.visible=this.nextMsc.visible=this.nextSkillMsc.visible=!1,this.ActivateTxt.text="已满级")}this.updataTxtView()},n.prototype.updataTxtView=function(){this.resultMsc.y=this.skillMsc.y=this.condition1.y+this.condition1.contextHeight+6,this.nextMsc.y=this.nextSkillMsc.y=this.skillMsc.y+this.skillMsc.contextHeight+6},i=n,o.ExtremeEquipSuitSkillAlert=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="anniversary_day/image_txwm_12.jpg",t.titleTxt.text="圣诞连充",t}e=t.anniversary_day_continuous_pay||(t.anniversary_day_continuous_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.ContinuousPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.AnniversaryDayContinuousPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.AnniversaryDayContinuousPayItem},o.prototype.getRestTime=function(){return e.AnniversaryDayContinuousPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(864)},o.prototype.getMoneyAcc=function(){return e.AnniversaryDayContinuousPayModel.instance.moneyAcc},s=o,e.AnniversaryDayContinuousPayPanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.bgImg.skin="anniversary_day/image_txwm_14.jpg",t.titleTxt.text="每日累充",t}e=t.anniversary_day_cumulate_pay||(t.anniversary_day_cumulate_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.CumulatePayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.AnniversaryDayCumulatePayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.AnniversaryDayCumulatePayItem},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(865)},s=o,e.AnniversaryDayCumulatePayPanel=s}(modules=modules||{}),function(e){var t,i,n,s;function o(){var t=i.call(this)||this;return t.typeNum=e.festival.FestivalModel.instance.AnniversaryDayType,t.bgImg.skin="anniversary_day/image_txwm_13.jpg",t.titleTxt.text="圣诞累消",t}t=e.anniversary_day_seven_days_consume||(e.anniversary_day_seven_days_consume={}),n=e.funcOpen.FuncOpenModel,i=e.festival.SevenDaysConsumeBasePanel,__extends(o,i),o.prototype.getDatas=function(){return t.AnniversaryDaySevenDaysConsumeModel.instance.rewardList},o.prototype.getItemClass=function(){return t.AnniversaryDaySevenDaysConsumeItem},o.prototype.getRestTime=function(){return t.AnniversaryDaySevenDaysConsumeModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(866)},s=o,t.AnniversaryDaySevenDaysConsumePanel=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.titleTxt.text="圣诞累充",t.bgImg.skin="anniversary_day/image_txwm_19.jpg",t}e=t.anniversary_day_seven_days_pay||(t.anniversary_day_seven_days_pay={}),n=t.funcOpen.FuncOpenModel,i=t.festival.SevenDaysPayBasePanel,__extends(o,i),o.prototype.getDatas=function(){return e.AnniversaryDaySevenDaysPayModel.instance.rewardList},o.prototype.getItemClass=function(){return e.AnniversaryDaySevenDaysPayItem},o.prototype.getRestTime=function(){return e.AnniversaryDaySevenDaysPayModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(867)},s=o,e.AnniversaryDaySevenDaysPayPanel=s}(modules=modules||{}),function(t){var a,e,i,n;function s(){var t=e.call(this)||this;return t.titleTxt.text="单笔充值",t.bgImg.skin="anniversary_day/image_txwm_16.jpg",t}a=t.anniversary_day_single_pay||(t.anniversary_day_single_pay={}),i=t.funcOpen.FuncOpenModel,e=t.festival.SinglePayBasePanel,__extends(s,e),s.prototype.sortFunc=function(t,e){var i=t[0],n=e[0],s=a.AnniversaryDaySinglePayModel.instance.getState(t[1],i),o=a.AnniversaryDaySinglePayModel.instance.getState(e[1],n);return(s=0===s?1:1===s?0:s)===(o=0===o?1:1===o?0:o)?i-n:s-o},s.prototype.getDatas=function(){return a.AnniversaryDaySinglePayModel.instance.rewardList},s.prototype.getItemClass=function(){return a.AnniversaryDaySinglePayItem},s.prototype.getFuncOpen=function(){return i.instance.getFuncIsOpen(868)},n=s,a.AnniversaryDaySinglePayPanel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.instructionsText.text="每日累充活动可获得大量",t.textBgImg.skin="anniversary_day/txt_txwm_05.png",t.titleTxt.color="#b15315",t.titleTxt.text="圣诞寻宝",t}e=t.anniversary_day_treasure||(t.anniversary_day_treasure={}),n=t.funcOpen.FuncOpenModel,i=t.festival.TreasureBasePanel,__extends(o,i),Object.defineProperty(o.prototype,"getRestTm",{get:function(){return e.AnniversaryDayTreasureModel.instance._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getState",{get:function(){return e.AnniversaryDayTreasureModel.instance._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getScore",{get:function(){return e.AnniversaryDayTreasureModel.instance._score},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getId",{get:function(){return e.AnniversaryDayTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"xianyu",{get:function(){return e.AnniversaryDayTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oneNum",{get:function(){return e.AnniversaryDayTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"twoNum",{get:function(){return e.AnniversaryDayTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"threeNum",{get:function(){return e.AnniversaryDayTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),o.prototype.getgRade=function(){return e.AnniversaryDayTreasureModel.instance.getgRade()},o.prototype.getSelfBroadcast=function(){return e.AnniversaryDayTreasureModel.instance.getSelfBroadcast()},o.prototype.callBakFunction=function(t){e.AnniversaryDayTreasureModel.instance.callBakFunction(t)},o.prototype.getClassCtrl=function(t){e.AnniversaryDayTreasureCtrl.instance.festivalNationalXunbao(t)},o.prototype.getConsumeRank=function(){e.AnniversaryDayTreasureCtrl.instance.GetNationalXunbaoScoreList(),e.AnniversaryDayTreasureCtrl.instance.GetNationalXunbaoScoreAndState()},o.prototype.getShuJu=function(){e.AnniversaryDayTreasureCtrl.instance.GetNationalXunbaoBroadcastRecords()},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(869)},o.prototype.getNationalXunbaoScoreAward=function(){e.AnniversaryDayTreasureCtrl.instance.getNationalXunbaoScoreAward()},o.prototype.openBtnHandler=function(){WindowManager.instance.open(1309)},o.prototype.openBtnHandler1=function(){WindowManager.instance.open(1310)},o.prototype.openBtnHandler2=function(){WindowManager.instance.open(1304)},o.prototype.openBtnHandler3=function(t){WindowManager.instance.open(1311,[t,this._type])},o.prototype.initialize=function(){i.prototype.initialize.call(this),this._type=e.AnniversaryDayTreasureModel.instance.xunBaoType,this.festivalType=e.AnniversaryDayTreasureModel.instance.festivalType},s=o,e.AnniversaryDayTreasurePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_treasure||(t.anniversary_day_treasure={}),i=t.festival.TreasureRankBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.AnniversaryDayTreasureRankItem},s.prototype.getRewardStart=function(t){return e.AnniversaryDayTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.AnniversaryDayTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayTreasureRankAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_treasure||(t.anniversary_day_treasure={}),i=t.festival.TreasureRankAwardBaseAlert,__extends(s,i),s.prototype.getItemClass=function(){return e.AnniversaryDayTreasureRankAwardItem},Object.defineProperty(s.prototype,"getStr",{get:function(){return"圣诞"},enumerable:!0,configurable:!0}),s.prototype.getNationalXunbaoRank=function(){e.AnniversaryDayTreasureCtrl.instance.getNationalXunbaoRank()},Object.defineProperty(s.prototype,"myNodeListByObjId",{get:function(){return e.AnniversaryDayTreasureModel.instance._myNodeListByObjId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.AnniversaryDayTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayTreasureRankAwardAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_treasure||(t.anniversary_day_treasure={}),i=t.festival.TreasureBaseAlert,__extends(s,i),s.prototype.callBakFunction=function(t){e.AnniversaryDayTreasureModel.instance.callBakFunction(function(){e.AnniversaryDayTreasureCtrl.instance.festivalNationalXunbao(t)})},Object.defineProperty(s.prototype,"getId",{get:function(){return e.AnniversaryDayTreasureModel.instance.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"xianyu",{get:function(){return e.AnniversaryDayTreasureModel.instance.xianyu},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"oneNum",{get:function(){return e.AnniversaryDayTreasureModel.instance.oneNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"twoNum",{get:function(){return e.AnniversaryDayTreasureModel.instance.twoNum},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"threeNum",{get:function(){return e.AnniversaryDayTreasureModel.instance.threeNum},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayTreasureAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.text1.text="本轮圣诞寻宝已结束,寻宝不再获得积分,是否确认继续抽奖？",t}e=t.anniversary_day_treasure||(t.anniversary_day_treasure={}),i=t.festival.TreasureSpecialBaseAlert,__extends(s,i),s.prototype.dontShowHandler=function(){e.AnniversaryDayTreasureModel.instance.dontShowTreasure=this.dontShow.selected=!this.dontShow.selected},n=s,e.AnniversaryDayTreasureSpecialAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.titleText.text="连续登录",t.topBg.skin="anniversary_day/image_txwm_17.jpg",t}e=t.anniversary_day_festival||(t.anniversary_day_festival={}),i=t.festival.FestConLoginBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.AnniversaryDayFestConLoginItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayFestConLoginPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_festival||(t.anniversary_day_festival={}),i=t.festival.FestHilarityBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.bgImg.skin="anniversary_day/image_txwm_04.jpg",this.topImg.skin="",this.tipImg.skin="",this.tipImg.pos(278,336,!0),this.leftBtn.visible=this.rightBtn.visible=!1,CommonUtil.setHTMLPro(this.oneTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.TwoTxt,"#ffffff","SimHei",26,"center"),CommonUtil.setHTMLPro(this.threeTxt,"#50ff28","SimHei",26,"center"),this.oneTxt.innerHTML="活动内容：活动时间内，充值可获得",this.TwoTxt.innerHTML="1.2倍仙玉收益！仙玉获取无上限限制!",this.threeTxt.innerHTML="（1.2倍收益仅限于元宝充值界面进行的充值哦）",this.oneTxt.y+=25,this.TwoTxt.y+=25,this.threeTxt.y+=25,this.timeTxt.y+=25,this.text1.y+=25,this.leftBtn.y+=25,this.rightBtn.y+=25,this.goBtn.y+=25,this._festType=t.festival.FestivalModel.instance.AnniversaryDayType},s.prototype.goHandler=function(){WindowManager.instance.open(111)},n=s,e.AnniversaryDayFestHilarityPanel=n}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.anniversary_day_festival||(s.anniversary_day_festival={}),o=s.festival.FestDoubleRewardBasePanel,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.bgImg.skin="anniversary_day/image_txwm_05.jpg",this.foureTxt.innerHTML="活动内容：活动时间内，上述玩法所有奖励全部翻倍！",this.fiveTxt.innerHTML="(金币真气的额外奖励不计入最高记录中)";var t=CommonUtil.getColorById(15040062),e=CommonUtil.getNameByItemId(15040062),i=CommonUtil.getColorById(15040063),n=CommonUtil.getNameByItemId(15040063);this.oneTxt.innerHTML="活动期间内，参与玩法可掉落【<span style='color:"+t+"'>"+e+"</span>】【<span style='color:"+i+"'>"+n+"</span>】",this.TwoTxt.innerHTML="<span style='color:"+t+"'>"+e+"</span>、<span style='color:"+i+"'>"+n+"</span>可以用于参与<span style='color:#50ff28'>【装饰圣诞】</span>玩法",this.threeTxt.innerHTML="",this.foureTxt.y=387,this.fiveTxt.y=419,this.oneTxt.y=1033,this.TwoTxt.y=1065,this._festType=s.festival.FestivalModel.instance.AnniversaryDayType},i.prototype.leftHandler=function(){WindowManager.instance.open(57)},i.prototype.rightHandler=function(){WindowManager.instance.open(194)},e=i,t.AnniversaryDayFestDoubleRewardPanel=e}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t.topBg.skin="anniversary_day/image_txwm_15.jpg",t}e=t.anniversary_day_festival||(t.anniversary_day_festival={}),i=t.festival.FestDailyRewardBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.AnniversaryDayFestDailyRewardItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayFestDailyRewardPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_festival||(t.anniversary_day_festival={}),i=t.festival.FestFirstPayBaseAlert,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.AnniversaryDayType,this._funcId=878},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.bgImg.skin="anniversary_day/image_txwm_08.png",this.v.closeBtn.skin="common/btn_0yg_close.png",this.v.bgImg.y=221,this.v.tipTxt.pos(309,354,!0),this.v.closeBtn.pos(613,265,!0),this.v.stateImg.pos(355,578,!0),this.v.goBtn.pos(312,569,!0),this.v.rewardBox.pos(198,413,!0),this.v.tipTxt.text="圣诞首充,限时特惠",this.v.tipTxt.color="#ffffff",this._btnClip.pos(this.v.goBtn.x-6,this.v.goBtn.y-10,!0)},n=s,e.AnniversaryDayFestFirstPayAlert=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_store||(t.anniversary_day_store={}),n=t.funcOpen.FuncOpenModel,i=t.festival.FestBaseStorePanel,__extends(o,i),o.prototype.getDatas=function(){return e.AnniversaryDayStoreModel.instance.rewardList.sort(this.sortFunc.bind(this))},o.prototype.getItemClass=function(){return e.AnniversaryDayStoreItem},o.prototype.getRestTime=function(){return e.AnniversaryDayStoreModel.instance.restTm},o.prototype.getFuncOpen=function(){return n.instance.getFuncIsOpen(879)},s=o,e.AnniversaryDayStorePanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_good_man||(t.anniversary_day_good_man={}),i=t.festival.GoodManBasePanel,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._festType=t.festival.FestivalModel.instance.AnniversaryDayType},s.prototype.btn3Handler=function(){WindowManager.instance.open(1325)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.titleTxt.text="赠送袜子",this.v.bgImg.y=86},n=s,e.AnniversaryDayGoodManPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_star||(t.anniversary_day_star={}),i=t.festival.StarBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.AnniversaryDayStarItem},s.prototype.setUI=function(){this.v.titleTxt.text="圣诞之星",this.v.text1.text="我收到的袜子:"},s.prototype.setPos=function(){this.v.activityText1.pos(63,103,!0),this.v.activityText.pos(221,103,!0)},s.prototype.setPos1=function(){this.v.activityText1.pos(130,103,!0)},s.prototype.initialize=function(){this._festType=t.festival.FestivalModel.instance.AnniversaryDayType,this._funcId=870,i.prototype.initialize.call(this),this._windowEnumID=1326,this._windowEnumID1=1322,this._avatarClip.y=470,this._avatarClip.scale(1.2,1.2)},n=s,e.AnniversaryDayStarPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_star||(t.anniversary_day_star={}),i=t.single_dog_sart.SingleDogSartAlert,__extends(s,i),Object.defineProperty(s.prototype,"broadcastId",{get:function(){return 135},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayStarAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_score_rank||(t.anniversary_day_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.AnniversaryDayScoreRankItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),s.prototype.getFuncOpen=function(){return t.funcOpen.FuncOpenModel.instance.getFuncIsOpen(873)},s.prototype.openWin=function(){WindowManager.instance.open(1321)},s.prototype.getRp=function(){return t.redPoint.RedPointCtrl.instance.getRPProperty("anniversaryDayParty4RP")},s.prototype.setBg=function(){this.bgImg.skin="anniversary_day/image_txwm_20.jpg"},s.prototype.setUI=function(){this.integralDescriptionText.text="赠送1双"+t.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+"获得1积分"},n=s,e.AnniversaryDayScoreRankPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_yu_lan||(t.anniversary_day_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanPanel,__extends(s,i),s.prototype.getItemClass=function(){return e.AnniversaryDayYuLanItem},Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),s.prototype.setUI=function(){this.bgImg.skin="anniversary_day/image_txwm_02.jpg",this.titleImg.skin="anniversary_day/image_txwm_22.png",this.bgImg1.skin="anniversary_day/txtbg_dssd_bg02.png",this.titleImg.visible=!0,this.BG.visible=!1,this.text1.text="我收到的袜子:",this.titleImg.centerX=1,this.titleImg.y=147},s.prototype.setMoXing=function(){this.rewardShowItem.fashionModelPosY=70,this.rewardShowItem.shenBingModelPosY=150,this.rewardShowItem.tianZhuModelPosY=130,this.rewardShowItem.xainQiModelPosY=140,this.rewardShowItem.lingChongModelPosY=180,this.rewardShowItem.scale(1,1)},n=s,e.AnniversaryDayYuLanPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_good_man||(t.anniversary_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayGoodManAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_good_man||(t.anniversary_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManJiLuAlert,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayGoodManJiLuAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_pay_rank||(t.anniversary_day_pay_rank={}),i=t.festival.PayRankBasePanel,__extends(s,i),s.prototype.getItemClass=function(){return e.AnniversaryDayPayRankItem},s.prototype.setUI=function(){this.bgImg.skin="anniversary_day/image_txwm_18.jpg"},Object.defineProperty(s.prototype,"consumptionItemId",{get:function(){return e.AnniversaryDayPayRankModel.instance.consumptionItemId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"consume",{get:function(){return e.AnniversaryDayPayRankModel.instance.consume},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableById",{get:function(){return e.AnniversaryDayPayRankModel.instance._rankersTableById},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableByRank",{get:function(){return e.AnniversaryDayPayRankModel.instance._rankersTableByRank},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"restTmConsumption",{get:function(){return e.AnniversaryDayPayRankModel.instance.restTmConsumption},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"actionOpenId",{get:function(){return 880},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayPayRankPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_collection||(t.anniversary_day_collection={}),i=t.single_dog_collection.SingleDogCollectionPanel,__extends(s,i),s.prototype.setData=function(){this.festivalType=t.festival.FestivalModel.instance.AnniversaryDayType,this.str="圣诞",this.BG.skin="anniversary_day/image_txwm_02.jpg",this.BG1.skin="anniversary_day/txtbg_dssd_bg02.png",this.BG5.skin="anniversary_day/txt_sdkh_02.png",this.BG2.skin=this.BG3.skin="anniversary_day/txtbg_dssd_bg03.png",this.BG4.skin="anniversary_day/image_dssd_dsfz.png",this.BG10.skin="anniversary_day/txtbg_sdkh_01.png",this.text1.visible=!0},n=s,e.AnniversaryDayCollectionPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitBirthdayCakeViewUI,__extends(s,i),n=s,e.HitBirthdayCakePanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitBirthdayCakeKillerViewUI,__extends(s,i),n=s,e.HitBirthdayCakeKillerPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineerAwardViewUI,__extends(s,i),n=s,e.HitBirthdayCakeAwardPanel=n}(modules=modules||{}),function(t){var o,e,i,n,a,s;function r(){return e.call(this)||this}o=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineerLogAlertUI,n=laya.html.dom.HTMLDivElement,a=t.config.HuntingConstCfg,e=i,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.panel.vScrollBar.visible=!1,this.title.text="制作日志",this.model=o.HitBirthdayCakeModel.instance,this.ctrl=o.HitBirthdayCakeCtrl.instance},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATA_PLANNER_LOG_VIEW",this,this.updateView)},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.ctrl.GetHuntingLog(),this.updateView()},r.prototype.updateView=function(){if(this.htmlArr&&0<this.htmlArr.length)for(var t=0;t<this.htmlArr.length;t++)this.htmlArr[t].removeSelf();this.htmlArr=[];var e=o.HitBirthdayCakeModel.instance.huntingLog;if(e&&!(e.length<=0)){for(t=e.length-1;0<=t;t--){var i=e[t],n=this.createrHtml();if(this.htmlArr.push(n),this.panel.addChild(n),1===i[4]){var s=a.instance.getCfgByFestivalType(40)[2];n.innerHTML="<span style='color:#0f81f5'>"+i[0]+"</span>对<span style='color:#b15315'>【"+i[1]+"】</span>使用了<span style='color:#168a15'>打蛋器</span>，<span style='color:#b15315'>【"+i[1]+"】</span>直接增加了<span style='color:#168a15'>"+100*s+"%制作进度。</span>"}else 2===i[4]?i[2]?n.innerHTML="<span style='color:#b15315'>【"+i[1]+"】</span>制作已完成，本次的蛋糕小能手为<span style='color:#0f81f5'>"+i[0]+"</span>，获得了<span style='color:#b15315'>【小能手大奖】</span>。":n.innerHTML="<span style='color:#b15315'>【"+i[1]+"】</span>制作已完成，本次的蛋糕小能手为<span style='color:#0f81f5'>"+i[0]+"</span>。":3===i[4]&&(n.innerHTML="<span style='color:#0f81f5'>"+i[0]+"</span>对<span style='color:#b15315'>【"+i[1]+"】</span> 进行最后制作,获得了最后制作奖励。")}this.updataPanlView(this.htmlArr)}},r.prototype.destroy=function(t){void 0===t&&(t=!0),this.htmlArr=this.destroyElement(this.htmlArr)},r.prototype.createrHtml=function(){var t=new n;return CommonUtil.setHTMLPro(t,"#344c6f","SimHei",26),t.width=561,t.style.leading=8,t.style.wordWrap=!0,t},r.prototype.updataPanlView=function(t){if(0!==t.length){var e=this.htmlArr.length;if(t[0].x=0,t[0].y=0,!(e<=1))for(var i=1;i<e;i++)t[i]&&(t[i].x=0,t[i].y=t[i-1].contextHeight+t[i-1].y+4)}},s=r,o.HitBirthdayCakeLogAlert=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineeShopAlertUI,__extends(s,i),n=s,e.HitBirthdayCakeShopAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineerStageAwardAlertUI,__extends(s,i),n=s,e.HitBirthdayCakeStageAwardAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineerTxtAlertUI,__extends(s,i),n=s,e.HitBirthdayCakeTxtAlert=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineerLastAwardAlertUI,__extends(s,i),n=s,e.HitBirthdayCakeLastAwardalert=n}(modules=modules||{}),function(e){var n,t,i,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=e.treasure||(e.treasure={}),i=e.config.BlendCfg,t=n.TreasurePanel,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._type=6,this.v.artImg.skin="treasure/txt_xb_02.png",this.regGuideSpr(88,this.v.oneBtn),this.regGuideSpr(82,this._buttonList.items[0]),this.regGuideSpr(85,this._buttonList.items[1]),this.regGuideSpr(83,this._buttonList.items[2]),this.regGuideSpr(84,this._buttonList.items[3]),this.v.rebateLink.text="圣尊返利"},o.prototype.setOpenParam=function(t){this._buttonList.selectedData=null!=t?99999===t?e.treasure.TreasureModel.instance.isMianFeiEnter()[1]:t:6,this.selectHandler()},o.prototype.probabilityHandler=function(){var t=i.instance.getCfgById(66036)[2][0];WindowManager.instance.openDialog(443,["概率公示",t,695])},o.prototype.onEvt=function(){var i=this;t.prototype.onEvt.call(this),this.onAutoClick(this.v.rebateLink,this,function(){WindowManager.instance.open(1335),i.showTipsEff(!0)}),this.onAutoGlobalEvt("TREASURE_REBATE_UPDATE",this,function(){var t=n.TreasureModel.instance.rebateList[6]||[[],0,0];i.v.rebateLink.visible=t[2]>GlobalData.serverTime,i.showTipsEff()}),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,function(t){if(-1<t.indexOf(884)){var e=n.TreasureModel.instance.rebateList[6]||[[],0,0];i.v.rebateLink.visible=e[2]>GlobalData.serverTime,i.showTipsEff()}})},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),n.TreasureCtrl.instance.GetXunbaoRebateInfo(6)},s=o,n.TreasureShenZunPanel=s}(modules=modules||{}),function(e){var n,t,i,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=e.treasure||(e.treasure={}),i=e.config.BlendCfg,t=n.TreasurePanel,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._type=7,this.v.artImg.skin="treasure/txt_xb_01.png",this.regGuideSpr(87,this.v.oneBtn),this.regGuideSpr(82,this._buttonList.items[0]),this.regGuideSpr(85,this._buttonList.items[1]),this.regGuideSpr(83,this._buttonList.items[2]),this.regGuideSpr(84,this._buttonList.items[3]),this.v.rebateLink.text="秘藏返利"},o.prototype.setOpenParam=function(t){this._buttonList.selectedData=null!=t?99999===t?e.treasure.TreasureModel.instance.isMianFeiEnter()[1]:t:7,this.selectHandler()},o.prototype.getBlendCfg=function(){return i.instance.getCfgById(15003)[1]},o.prototype.probabilityHandler=function(){WindowManager.instance.open(443,["概率公示",i.instance.getCfgById(66037)[2][0],695])},o.prototype.onEvt=function(){var i=this;t.prototype.onEvt.call(this),this.onAutoClick(this.v.rebateLink,this,function(){WindowManager.instance.open(1336),i.showTipsEff(!0)}),this.onAutoGlobalEvt("TREASURE_REBATE_UPDATE",this,function(){var t=n.TreasureModel.instance.rebateList[7]||[[],0,0];i.v.rebateLink.visible=t[2]>GlobalData.serverTime,i.showTipsEff()}),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,function(t){if(-1<t.indexOf(885)){var e=n.TreasureModel.instance.rebateList[7]||[[],0,0];i.v.rebateLink.visible=e[2]>GlobalData.serverTime,i.showTipsEff()}})},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),n.TreasureCtrl.instance.GetXunbaoRebateInfo(7)},s=o,n.TreasureSecretPanel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.wx_module||(t.wx_module={}),i=ui.wxChangePkgAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),PlatParams.control.changePackageName&&PlatParams.control.changePackageCDKEY&&PlatParams.control.changePackageIcon?(this.gameTxt.text=PlatParams.control.changePackageName,this.activeCode.text=PlatParams.control.changePackageCDKEY,this.headIcon.skin="assets/icon/wx_chage_pkg/"+PlatParams.control.changePackageIcon+".png",this.gameTxt.visible=this.activeCode.visible=this.headIcon.visible=!0):this.gameTxt.visible=this.activeCode.visible=this.headIcon.visible=!1},n=s,e.wxChangePkgAlert=n}(modules=modules||{}),function(e){var n,t,i,s;function o(){return null!==t&&t.apply(this,arguments)||this}n=e.treasure||(e.treasure={}),i=e.config.BlendCfg,t=n.TreasurePanel,__extends(o,t),o.prototype.initialize=function(){t.prototype.initialize.call(this),this._type=8,this.v.artImg.skin="treasure/txt_xb_03.png",this.regGuideSpr(88,this.v.oneBtn),this.regGuideSpr(82,this._buttonList.items[0]),this.regGuideSpr(85,this._buttonList.items[1]),this.regGuideSpr(83,this._buttonList.items[2]),this.regGuideSpr(84,this._buttonList.items[3]),this.v.rebateLink.text="仙缘返利"},o.prototype.setOpenParam=function(t){this._buttonList.selectedData=null!=t?99999===t?e.treasure.TreasureModel.instance.isMianFeiEnter()[1]:t:8,this.selectHandler()},o.prototype.probabilityHandler=function(){var t=i.instance.getCfgById(66038)[2][0];WindowManager.instance.openDialog(443,["概率公示",t,695])},o.prototype.onEvt=function(){var i=this;t.prototype.onEvt.call(this),this.onAutoClick(this.v.rebateLink,this,function(){WindowManager.instance.open(1343),i.showTipsEff(!0)}),this.onAutoGlobalEvt("TREASURE_REBATE_UPDATE",this,function(){var t=n.TreasureModel.instance.rebateList[8]||[[],0,0];i.v.rebateLink.visible=t[2]>GlobalData.serverTime,i.showTipsEff()}),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,function(t){if(-1<t.indexOf(893)){var e=n.TreasureModel.instance.rebateList[8]||[[],0,0];i.v.rebateLink.visible=e[2]>GlobalData.serverTime,i.showTipsEff()}})},o.prototype.onOpened=function(){t.prototype.onOpened.call(this),n.TreasureCtrl.instance.GetXunbaoRebateInfo(8)},s=o,n.TreasureMarryPanel=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_engineer||(t.hit_engineer={}),n=t.config.BlendCfg,s=t.common.BtnGroup,i=ui.HitEngineerAutoAlertUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.tipshtml,"#4C5E8A","SimHei",24,"left","middle"),this.tipshtml.style.lineHeight=28,this.tipshtml.mouseEnabled=!1,this.tipshtml.innerHTML=n.instance.getCfgById(67043)[2][0],this._btns=new s,this._btns.canSelectHandler=Handler.create(this,this.btnsCanSelectHandler,null,!1),this._btns.setBtns(this.btn0,this.btn1,this.btn2,this.btn3,this.btn4)},a.prototype.btnsCanSelectHandler=function(){return!0},a.prototype.btnsChangeHandler=function(){-1!==this._btns.selectedIndex&&this._btns.selectedIndex!==e.HitEngineerModel.instance.autoDate&&e.HitEngineerCtrl.instance.huntingUseSet(this._btns.selectedIndex)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this._btns,"change",this,this.btnsChangeHandler),this.onAutoGlobalEvt("UPDATA_AUTO_SELECT",this,this.updateView)},a.prototype.updateView=function(){this._btns.selectedIndex=e.HitEngineerModel.instance.autoDate||0},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},a.prototype.destroy=function(){this._btns=this.destroyElement(this._btns),i.prototype.destroy.call(this)},o=a,e.HitEngineerAutoAlert=o}(modules=modules||{}),function(t){var e,i;function n(){this.isCaptain=!1,this.teamsTable={},this.hurtRank={},this.teams=[],this.members=[],this.playersToInvite=[]}e=t.sceneTeam||(t.sceneTeam={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.delMember=function(t){for(var e=0;e<this.members.length;++e)if(this.members[e][0]===t)return this.members.splice(e,1),void GlobalData.dispatcher.event("SCENE_TEAM_MEMBER_UPDATE")},n.prototype.getHurtRank=function(t){if(!this.hurtRank||!this.hurtRank[t])return null;for(var e=0;e<this.hurtRank[t].length;++e)if(this.hurtRank[t][e][0][0]===PlayerModel.instance.teamId||this.hurtRank[t][e][0][0]===PlayerModel.instance.actorId)return this.hurtRank[t][e];return null},Object.defineProperty(n.prototype,"isLeader",{get:function(){return this.members&&this.members.length&&this.members[0][0]===PlayerModel.instance.actorId},enumerable:!0,configurable:!0}),i=n,e.SceneTeamModel=i}(modules=modules||{}),function(o){var r,e,t;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._orderArr=[],t}r=o.union_war||(o.union_war={}),e=ui.UnionDrowAlertUI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this._allItemNum=[this.item1,this.item2,this.item3],this._allItemPlayer=[this.playerItem1,this.playerItem2,this.playerItem3]},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("CHANGE_ODLER",this,this.changeOdler),this.onAutoGlobalEvt("FETCH_TEAMEX_REPLY_UPDATE",this,this.showUI1),this.onAutoGlobalEvt("UPDATE_TEAM_POS",this,this.showUI1),this.onAutoClick(this.btn,this,this.btnHandler)},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI1()},i.prototype.showUI1=function(){for(var t=0;t<o.common_group.CommonGroupModel.instance.members.length;t++){var e=o.common_group.CommonGroupModel.instance.members[t];if(e){var i=e[0][0];-1===r.UnionWarModel.instance.objIds.indexOf(i)&&3!=e[4]&&r.UnionWarModel.instance.objIds.push(i)}}for(t=this._orderArr.length=0;t<r.UnionWarModel.instance.objIds.length;t++)this._orderArr.push(r.UnionWarModel.instance.objIds[t]);this.showUI(r.UnionWarModel.instance.objIds,!0),console.log("初始的this._orderArr：",this._orderArr)},i.prototype.showUI=function(t,e){void 0===e&&(e=!0);for(var i=0;i<this._allItemNum.length;i++)this._allItemNum[i].data=null;if(e)for(i=0;i<this._allItemPlayer.length;i++)this._allItemPlayer[i].data=null;for(i=0;i<t.length;i++){var n=t[i];if(!(s=o.common_group.CommonGroupModel.instance.teamsTable[n]))return void this.close}if(o.common_group.CommonGroupModel.instance.members)if(o.common_group.CommonGroupModel.instance.members&&0===o.common_group.CommonGroupModel.instance.members.length)this.close;else for(i=0;i<t.length;i++){n=t[i];var s=o.common_group.CommonGroupModel.instance.teamsTable[n];this._allItemNum[i].data=[r.UnionWarModel.instance.objIds.indexOf(n)+1,s],e&&(this._allItemPlayer[i].data=s)}else this.close},i.prototype.changeOdler=function(t,e){if(t){console.log("拖动数据的出战位rankNum: "+t[0]);var i,n,s=!1,o=t[0],a=t[1][0][0];if(!((i=this._orderArr.indexOf(a))<0)){for(var r=0;r<this._allItemNum.length;r++){var l=this._allItemNum[r],h=this._allItemPlayer[r];if(l&&l.visible&&h&&h.visible){var c=l._order,p=l._date[0][0];Laya.Point.TEMP.setTo(l.box.x,l.box.y);var u=l.box.localToGlobal(Laya.Point.TEMP,!0),d=u.x-l.width/2,y=u.x+l.width/2;e.x>=d&&e.x<=y&&o!=c&&(n=this._orderArr.indexOf(p),l.isChange&&(s=!0))}}for(r=this._orderArr.length=0;r<this._allItemNum.length;r++)(l=this._allItemNum[r])&&l.visible&&l._date&&(p=l._date[0][0])&&this._orderArr.push(p);if(s){var g=this._orderArr[i];this._orderArr[i]=this._orderArr[n],this._orderArr[n]=g,this.showUI(this._orderArr,!1)}}}},i.prototype.btnHandler=function(){if(this._orderArr&&0<this._orderArr.length){for(var t=[],e=0;e<this._allItemNum.length;e++){var i=this._allItemNum[e],n=this._allItemPlayer[e];if(i&&i.visible&&n&&n.visible&&3===i._date[4]){var s=i._order,o=n._date[0][0];t[s-1]=o}}var a=[];for(e=0;e<t.length;e++)null!=(i=t[e])&&a.push(i);console.log("arr：",a),r.UnionWarCtrl.instance.SceneSetTeamPos(a)}},t=i,r.UnionDorwAlert=t}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg={};for(var t=GlobalData.getConfig("sys_red_envelope"),e=0,i=t.length;e<i;e++)this._cfg[t[e][0]]=t[e]},n.prototype.getIdByCfg=function(t){return this._cfg[t]},i=n,e.SysRedEnvelopeCfg=i}(modules=modules||{}),function(t){var o,a,e,i;function r(){return null!==a&&a.apply(this,arguments)||this}o=t.redBag||(t.redBag={}),e=t.common.CustomList,a=ui.RedBagThankAlertUI,__extends(r,a),r.prototype.destroy=function(){this._list=this.destroyElement(this._list),this.nameTxt=this.destroyElement(this.nameTxt),this.headIcon=this.destroyElement(this.headIcon),this.listBox=this.destroyElement(this.listBox),a.prototype.destroy.call(this)},r.prototype.initialize=function(){a.prototype.initialize.call(this),this._list=new e,this._list.width=this.listBox.width,this._list.height=this.listBox.height,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=8,this._list.pos(0,0,!0),this._list.itemRender=o.RedBagThankItem,this.listBox.addChild(this._list)},r.prototype.setOpenParam=function(t){a.prototype.setOpenParam.call(this,t);var e=t.uid,i=t.channel;r.channel=i,r.uid=e;var n=o.RedBagModel.instance.getPkgByUid(e),s=n[3];this.xyImg.visible=94150001===n[6],this.headIcon.setInfo(s[3],s[1],s[4]),this.nameTxt.text=s[2],this.tips.text=n[8],this.tips.text=o.RedBagUtils.redBagMsc(n),this._list.datas=o.RedBagModel.instance.thankMsc[i]},r.channel=0,r.uid=0,i=r,o.RedBagThankAlert=i}(modules=modules||{}),function(I){var C,e,t,i,x,B,S,M,w,n,s;function P(){return null!==e&&e.apply(this,arguments)||this}C=I.redBag||(I.redBag={}),t=I.common.BtnGroup,i=I.common.NumInputCtrl,x=I.notice.SystemNoticeManager,B=I.chat.ChatModel,S=I.bag.BagUtil,M=I.faction.FactionModel,w=I.marry.MarryModel,n=I.common.CustomList,e=ui.RedBagSendAlertUI,__extends(P,e),P.prototype.destroy=function(){this._btns=this.destroyElement(this._btns),this.nameTxt=this.destroyElement(this.nameTxt),this._cbtns=this.destroyElement(this._cbtns),this.add1=this.destroyElement(this.add1),this.sub1=this.destroyElement(this.sub1),this.inputTxt=this.destroyElement(this.inputTxt),e.prototype.destroy.call(this)},P.prototype.initialize=function(){e.prototype.initialize.call(this),this._cbtnArr=[this.csBtn1,this.csBtn2,this.csBtn3,this.csBtn4,this.csBtn5],this._btns=new t,this._btns.setBtns(this.sbtn1,this.sbtn2),this._btns.selectedIndex=0,this._numCtrl1=new i(this.txt1,this.add1,this.sub1),this._numCtrl1.isAuto=!0,this._numCtrl1.min=0,this._numCtrl1.notice="值",this._cbtns=new t,this._cbtns.setBtns(this.csBox1,this.csBox2,this.csBox3,this.csBox4,this.csBox5),this._cbtns.selectedIndex=0,this._cbtns.canSelectHandler=Handler.create(this,this.canSelectHandler,null,!1),this.isOpenFolder=!1,this.inputTxt.maxChars=C.RedBagModel.instance.bagMscMax,this._list=new n,this._list.width=300,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.pos(9,6,!0),this._list.itemRender=C.RedBagSendGradeItem,this.gradeBox.addChild(this._list)},P.prototype.onEvt=function(){e.prototype.onEvt.call(this),this._numCtrl1.addListeners(),this._numCtrl1.on(Laya.Event.CHANGE,this,this.sortcutBuy1),this.on(Laya.Event.CLICK,this,this.setFolderFalse),this.onAutoClick(this.pullDownBtn,this,this.faceBtnHandler),this.onAutoClick(this.sendBtn,this,this.sendHandler),this.onAutoClick(this.bottomTxt2,this,this.bottomTxtHanlder),this.onAutoClick(this.pullDownBtn2,this,this.pullDownHanlder),this.onAutoClick(this.txt3,this,this.faceBtnHandler),this.onAutoClick(this.txt2,this,this.pullDownHanlder),this.onAutoEvt(this._btns,"change",this,this.btnsChangeHandler),this.onAutoEvt(this._cbtns,"change",this,this.cbtnsChangeHandler),this.onAutoGlobalEvt("RED_BAG_SEND_BTN_CLICK",this,this.updateTxt)},P.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._numCtrl1.removeListeners(),this._numCtrl1.off(Laya.Event.CHANGE,this,this.sortcutBuy1),this.off(Laya.Event.CLICK,this,this.setFolderFalse)},P.prototype.sendHandler=function(){for(var t=C.RedBagModel.instance.singleBagInfo,e=t[2],i=I.config.ActiveRedEnvelopeCfg.instance.getChannelByCfg(this._cbtns.selectedIndex),n=0,s=0,o=e.length;s<o;s++)n+=e[s][1]-e[s][2];if(1===P.bagType){var a=t[0]||0;if(C.RedBagModel.instance.sendBagMax<=a)return void x.instance.addNotice("发放元宝红包次数已用尽",!0)}else if(2===P.bagType&&0===n){var r=C.RedBagModel.instance.singleBagInfo[4],l=C.RedBagModel.instance.getMaxMoney(),h="发放次数不足,再充值<span style='color:#168a17'>"+(l<r?C.RedBagModel.instance.getNextMoney()-r%l:C.RedBagModel.instance.getNextMoney()-r)+"</span>元可多发放1次<span style='color:#168a17'>仙玉红包</span>,是否前往充值？",c=0===I.first_pay.FirstPayModel.instance.giveState?118:111,p=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[c]);return void CommonUtil.alert("温馨提示",h,[p],[])}if(C.RedBagUtils.redBagSendandRec(913,!0)){var u,d=this._cbtns.selectedIndex;if(2===d){if(!M.instance.hasFaction)return void x.instance.addNotice("请加入仙盟后再发放",!0)}else if(3===d){if(-1===I.warband.WarbandModel.instance.leaderId)return void x.instance.addNotice("请加入战队后再发放",!0)}else if(4===d){var y=w.instance.half;if(!y||!y[3])return void x.instance.addNotice("请结缘后再发放",!0)}var g=0;if(1===P.bagType)u=C.RedBagUtils.arr1ToArr2(i[2]);else if(2===P.bagType){var f=C.RedBagModel.instance.getNowGrade();u=f?(g=f[0],C.RedBagUtils.arr1ToArr2(C.RedBagUtils.getGradeToArr(g,i[1]))):C.RedBagUtils.arr1ToArr2(C.RedBagUtils.getGradeToArr(0,i[1]))}if(u){var _=I.zxian_yu.ZXianYuModel.instance.xianyu;if(-1===C.RedBagSendGradeItem.getSelectType()||C.RedBagSendGradeItem.getSelectType()>=u.length)x.instance.addNotice("没有选择金额",!0);else{var m=u[C.RedBagSendGradeItem.getSelectType()];if(m[0]>_)S.openLackPropAlert(94150001,m[0]-_);else{var v=this.inputTxt.text;if(v)if(v.length>C.RedBagModel.instance.bagMscMax)x.instance.addNotice("发送内容小于"+C.RedBagModel.instance.bagMscMax,!0);else{if(!B.instance.isValidContent(v)){var b=this._btns.selectedIndex;return h=void 0,0===b?h="寄语":1===b&&(h="口令"),void x.instance.addNotice(h+"存在非法字符请重新输入",!0)}var T=[0===this._btns.selectedIndex?3:4,1===P.bagType?90140001:94150001,m[0],this._numCtrl1.value,v,this._cbtns.selectedIndex,g];C.RedBagCtrl.instance.activeRedEnvelopeIssue(T),this.close()}else x.instance.addNotice("发送内容不能为空",!0)}}}else console.log("数组不存在.")}},P.prototype.updateTxt=function(){var t,e=C.RedBagModel.instance.getNowGrade(),i=I.config.ActiveRedEnvelopeCfg.instance.getChannelByCfg(this._cbtns.selectedIndex);if(i){if(1===P.bagType)t=C.RedBagUtils.arr1ToArr2(i[2]);else if(2===P.bagType)if(e){var n=e[0];t=C.RedBagUtils.arr1ToArr2(C.RedBagUtils.getGradeToArr(n,i[1]))}else t=C.RedBagUtils.arr1ToArr2(C.RedBagUtils.getGradeToArr(0,i[1]));var s=C.RedBagSendGradeItem.getSelectType();if(-1===s||C.RedBagSendGradeItem.getSelectType()>=t.length)this.goldTxt2.text="0",this.txt2.text="请选择金额";else{var o=t[s];this.goldTxt2.text=o[1].toString(),this.txt2.text=o[0].toString()}var a=this.goldTxt1.textWidth+this.icon.width+this.goldTxt2.textWidth;this.goldTxt1.x=(this.width-a)/2,this.icon.x=this.goldTxt1.x+this.goldTxt1.textWidth,this.goldTxt2.x=this.icon.x+this.icon.width}else this._cbtns.selectedIndex=0},P.prototype.sortcutBuy1=function(){},P.prototype.canSelectHandler=function(t){return!(this.isOpenFolder=!1)},P.prototype.btnsChangeHandler=function(){this.inputTxt.text="",this.updateView()},P.prototype.cbtnsChangeHandler=function(){for(var t=0,e=this._cbtnArr.length;t<e;t++)this._cbtnArr[t].selected=!1;this._cbtnArr[this._cbtns.selectedIndex]&&(this._cbtnArr[this._cbtns.selectedIndex].selected=!0),this.updateView()},P.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),P.bagType=t||1},P.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.inputTxt.text="",this._cbtns.selectedIndex=0,C.RedBagSendGradeItem.setSelectType(-1),this.updateView()},P.prototype.updateView=function(){this.nameTxt.text=C.RedBagUtils.chanelName[this._cbtns.selectedIndex]+"红包";var t=I.config.ActiveRedEnvelopeCfg.instance.getChannelByCfg(this._cbtns.selectedIndex),e=this._btns.selectedIndex;0===e?(this.tips.text="拼手气红包",this.bagTxt.text="红包寄语：",this.tipsTxt.text="金额随机试试手气"):1===e&&(this.tips.text="口令红包",this.bagTxt.text="输入口令：",this.tipsTxt.text="回复正确口令抢红包"),this.inputTxt.text||(this.inputTxt.text=t[6][e]),this.bottomTxt1.text="当前为"+(1===P.bagType?"元宝":"仙玉")+"红包,切换成",this.bottomTxt2.text=(2===P.bagType?"元宝":"仙玉")+"红包",this.icon.skin=C.RedBagUtils.getStr(1===P.bagType?90140001:94150001),this.xyImg.visible=1!==P.bagType;var i=1===P.bagType?1:0;this._numCtrl1.min=t[4][i],this._numCtrl1.max=t[5][i],this._numCtrl1.value=t[3][i],this.txt3.text=C.RedBagUtils.chanelName[this._cbtns.selectedIndex];var n,s=C.RedBagModel.instance.getNowGrade();if(1===P.bagType)n=C.RedBagUtils.arr1ToArr2(t[2]);else if(2===P.bagType)if(s){var o=s[0];n=C.RedBagUtils.arr1ToArr2(C.RedBagUtils.getGradeToArr(o,t[1]))}else n=C.RedBagUtils.arr1ToArr2(C.RedBagUtils.getGradeToArr(0,t[1]));var a=this._cbtns.selectedIndex;2!==a&&3!==a||n.push([-1,a]);var r=n.length,l=43*r;this.listBg.height=this._list.height=240<l?240:l+this._list.spaceY*(r+1),C.RedBagSendGradeItem.max=r,this._list.datas=n,this.isOpenFolderGrade=!1,this.updateTxt()},P.prototype.bottomTxtHanlder=function(){var t=C.RedBagModel.instance.singleBagInfo;if(t){for(var e=0,i=t[2],n=0,s=i.length;n<s;n++)e+=i[n][1]-i[n][2];if(2===P.bagType){var o=t[0]||0;if(C.RedBagModel.instance.sendBagMax<=o)return void x.instance.addNotice("发放元宝红包次数已用尽",!0)}else if(1===P.bagType&&0===e){var a=C.RedBagModel.instance.singleBagInfo[4],r=C.RedBagModel.instance.getMaxMoney(),l="发放次数不足,再充值<span style='color:#168a17'>"+(r<a?C.RedBagModel.instance.getNextMoney()-a%r:C.RedBagModel.instance.getNextMoney()-a)+"</span>元可多发放1次<span style='color:#168a17'>仙玉红包</span>,是否前往充值？",h=0===I.first_pay.FirstPayModel.instance.giveState?118:111,c=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[h]);return void CommonUtil.alert("温馨提示",l,[c],[])}this.setOpenParam(1===P.bagType?2:1),this.updateView()}},P.prototype.faceBtnHandler=function(){this.isOpenFolder=!this.isOpenFolder,this.isOpenFolderGrade=!1},P.prototype.pullDownHanlder=function(){this.isOpenFolderGrade=!this.isOpenFolderGrade,this.isOpenFolder=!1},Object.defineProperty(P.prototype,"isOpenFolder",{get:function(){return this._isOpenFolder},set:function(t){this.sBg.height=t?273:44,this.cBox.visible=t,this._isOpenFolder=t,this._isOpenFolder||this._isOpenFolderGrade?this.inputTxt.mouseEnabled=!1:this.inputTxt.mouseEnabled=!0},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"isOpenFolderGrade",{get:function(){return this._isOpenFolderGrade},set:function(t){this.gradeBox.visible=t,this._isOpenFolderGrade=t,this._isOpenFolder||this._isOpenFolderGrade?this.inputTxt.mouseEnabled=!1:this.inputTxt.mouseEnabled=!0},enumerable:!0,configurable:!0}),P.prototype.setFolderFalse=function(){this.isPosInTarger(this.pullDownBtn2)||this.isPosInTarger(this.pullDownBtn,!0)||(this.isOpenFolder&&(this.isOpenFolder=this.isPosInTarger(this.sBg,!0)),this.isOpenFolderGrade&&(this.isOpenFolderGrade=this.isPosInTarger(this.listBg,!0)))},P.prototype.isPosInTarger=function(t,e){var i,n;return n=e?(i=t.parent.x+t.x,t.parent.y+t.y):(i=t.x,t.x),this.mouseX>i&&this.mouseX<i+t.width&&this.mouseY>n&&this.mouseY<n+t.height},P.prototype.close=function(){C.RedBagItem.showId=-1,this.isOpenFolder=!1,this.isOpenFolderGrade=!1,e.prototype.close.call(this)},s=P,C.RedBagSendAlert=s}(modules=modules||{}),function(t){var h,e,i;function n(){return null!==e&&e.apply(this,arguments)||this}h=t.redBag||(t.redBag={}),e=ui.RedBagOpenAlertUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.bagMscTxt,"#FFFFFF","SimHei",22,"center"),this._imgAndTxt=[],this.txtPanl.vScrollBar.visible=!1},n.prototype.destroy=function(){this._imgAndTxt=this.destroyElement(this._imgAndTxt),this.txtPanl=this.destroyElement(this.txtPanl),this.bagMscTxt=this.destroyElement(this.bagMscTxt),this._imgAndTxt=this.destroyElement(this._imgAndTxt),this.headIcon=this.destroyElement(this.headIcon),this.gotoThank=this.destroyElement(this.gotoThank),this.nameTxt=this.destroyElement(this.nameTxt),e.prototype.destroy.call(this)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.gotoThank,this,this.gotoThankHanlder),this.onAutoGlobalEvt("RED_BAG_DRAW_GET_REPLY",this,this.updateView)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this);var t=h.RedBagModel.instance.showUidAndChannel;this.info=t,h.RedBagCtrl.instance.reqRedDrawAgent(h.RedBagModel.instance.showUidAndChannel.channel,h.RedBagModel.instance.showUidAndChannel.uid)},n.prototype.close=function(){Laya.timer.clear(this,this.updateView),h.RedBagModel.instance.isOpenDlog=!1,GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"),e.prototype.close.call(this)},n.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t)},n.prototype.updateView=function(){var t=h.RedBagModel.instance.showUidAndChannel;if(t){var e=h.RedBagModel.instance.getPkgByUid(t.uid),i=e[3],n=h.RedBagModel.instance.reqRedDrawInfo[1]||[];this.headIcon.setInfo(i[3],i[1],i[4]),this.nameTxt.text=i[2],this.tips.text=h.RedBagUtils.redBagMsc(e);var s=e[5],o=n.length;this.xyImg.visible=94150001===e[6],this.bagMscTxt.innerHTML="已领取:<span style='color:#50ff28'>"+o+"/"+s+"</span>,共"+e[7]+(90140001===e[6]?"元宝":"仙玉"),this.noBoby.visible=0===o,this.icon.skin=h.RedBagUtils.getStr(e[6]);for(var a=-1,r=0;r<o;r++)PlayerModel.instance.actorId===n[r][0]&&(a=n[r][5]);-1===a?(this.gotoThank.visible=this.icon.visible=this.iconTxt.visible=!1,e[9]>GlobalData.serverTime?(s<=o?this.bagStateTxt.text="红包抢光了!":console.log("？？？？"),Laya.timer.once(e[9]-GlobalData.serverTime+50,this,this.updateView)):this.bagStateTxt.text="红包已过期！"):(this.gotoThank.visible=this.icon.visible=this.iconTxt.visible=!0,this.iconTxt.text=a.toString(),this.bagStateTxt.text=""),this.gotoThank.visible&&(this.gotoThank.visible=e[3][0]!=PlayerModel.instance.actorId&&!h.RedBagModel.instance.hasKeepData(e[0])),this.breakTxt.y=this.gotoThank.visible?666:606;var l=this.iconTxt.textWidth+this.icon.width;this.icon.x=(this.width-l)/2,this.iconTxt.x=this.icon.x+this.icon.width,this.updataPanlView(e)}},n.prototype.gotoThankHanlder=function(){WindowManager.instance.open(1367,this.info),this.close()},n.prototype.updataPanlView=function(t){if(this._imgAndTxt&&0<this._imgAndTxt.length)for(var e=0;e<this._imgAndTxt.length;e++)this._imgAndTxt[e].removeSelf(),this._imgAndTxt[e]=null;this._imgAndTxt=[];for(var i=h.RedBagModel.instance.reqRedDrawInfo[1]||[],n=0,s=(e=0,i.length);e<s;e++)i[e][5]>i[n][5]&&(n=e);for(this.luckImg.visible=i.length>=t[5],e=0,s=i.length;e<s;e++)this.createItem(e,t[6],i[e],n===e)},n.prototype.createItem=function(t,e,i,n){var s=new laya.display.Text;s.font="SimHei",s.fontSize=24,s.color="#FFFFFF",s.align="left",s.text=i[2];var o=new Laya.Image;o.skin=h.RedBagUtils.getStr(e),o.width=o.width=40;var a=new laya.display.Text;a.font="SimHei",a.fontSize=24,a.color="#FFFFFF",a.align="left",a.text=i[5].toString(),s.x=49,o.x=259,a.x=302,s.y=a.y=44*t+12,o.y=s.y-6,this.txtPanl.addChild(s),this.txtPanl.addChild(a),this.txtPanl.addChild(o),this._imgAndTxt.push(s),this._imgAndTxt.push(a),this._imgAndTxt.push(o),n&&(this.luckImg.y=s.y-10)},i=n,h.RedBagOpenAlert=i}(modules=modules||{}),function(g){var f,e,t,i,_,n;function s(){return null!==e&&e.apply(this,arguments)||this}f=g.redBag||(g.redBag={}),t=g.common.SimpleList,i=laya.html.dom.HTMLDivElement,_=g.notice.SystemNoticeManager,e=ui.RedBagViewUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=t.create(f.RedBagItem,160,230,1,4,5,5),this._list.pos(0,0),this._list.size(this.redBagList.width,this.redBagList.height),this._list.isDelay=!0,this.redBagList.addChild(this._list),this.mscPal.vScrollBarSkin="",this._helpId=67044,CommonUtil.setHTMLPro(this.htmlMsc,"#3a5385","SimHei",24,"center"),CommonUtil.setHTMLPro(this.htmlMsc2,"#3a5385","SimHei",30,"center")},s.prototype.destroy=function(){this._list=this.destroyElement(this._list),this.htmlArr=this.destroyElement(this.htmlArr),this.redBagList=this.destroyElement(this.redBagList),this.closeBtn=this.destroyElement(this.closeBtn),this.sendBtn=this.destroyElement(this.sendBtn),this.titleTxt=this.destroyElement(this.titleTxt),this.sendTxt=this.destroyElement(this.sendTxt),this.htmlMsc=this.destroyElement(this.htmlMsc),e.prototype.destroy.call(this)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sendBtn,this,this.sendHandler),this.onAutoGlobalEvt("RED_BAG_INFO_UPDTE",this,this.updataList),this.onAutoGlobalEvt("RED_BAG_INFO_UPDTE",this,this.updatePanl),this.onAutoGlobalEvt("RED_BAG_INFO_UPDTE",this,this.updatesingleBagInfo),this.onAutoGlobalEvt("GER_PASSWAED_RED_BAG",this,this.closeHander)},s.prototype.closeHander=function(t){t&&this.close()},s.prototype.updataList=function(){if(f.RedBagModel.instance.redBagDic&&!f.RedBagModel.instance.isOpenDlog){for(var t=f.RedBagModel.instance.redBagDic.values,e=[],i=0,n=t.length;i<n;i++){var s=t[i];if(s&&0!==s.length)for(var o=0,a=s[this.type].length;o<a;o++)e.push(s[this.type][o])}this._list.datas=e.sort(f.RedBagModel.instance.sort.bind(f.RedBagModel.instance)),f.RedBagItem.openType=this.type,this.noImg.visible=this.noBagTxt.visible=0===this._list.datas.length;var r=-1;for(i=0,n=this._list.datas.length;i<n;i++)if(this._list.datas[i][0]===this.openUid){r=i;break}-1!=r&&(this._list.scrollToIndex(r),f.RedBagItem.showId=this.openUid,this.openUid=-1,Laya.timer.frameOnce(1,this,function(){GlobalData.dispatcher.event("REDBAG_PLAY_EFFECT")},null,!1))}},s.prototype.updatesingleBagInfo=function(){if(f.RedBagModel.instance.singleBagInfo){for(var t=f.RedBagModel.instance.goldRecMax,e=f.RedBagModel.instance.sendBagMax,i=f.RedBagModel.instance.singleBagInfo,n=i[0]||0,s=0,o=i[2],a=0,r=o.length;a<r;a++)s+=o[a][1]-o[a][2];this.htmlMsc.innerHTML="元宝红包发放次数:<span style='color:"+(n<e?"#168a17":"#ff3e3e")+"'>"+(e-n)+"</span>,仙玉红包发放次数:<span style='color:"+(0<s?"#168a17":"#ff3e3e")+"'>"+s+"</span>";var l=i[1];this.htmlMsc2.innerHTML="今日可领取激励红包元宝：<span style='color:"+(l<t?"#168a17":"#ff3e3e")+"'>"+l+"/"+(t<l?l:t)+"</span>",this.htmlMsc.visible=!1,this.htmlMsc2.visible=!1,this.tips1.visible=!1,this.sendBtn.visible=this.sendTxt.visible=2===this.type,0===this.type?(this.tips1.visible=!0,this.tips1.text="发放幸运红包不消耗自身元宝",this.tips1.y=1065):1===this.type?(this.htmlMsc2.visible=!0,this.tips1.text="发放激励红包不消耗自身元宝",this.tips1.visible=!0,this.tips1.y=1092):2===this.type&&(this.htmlMsc.visible=f.RedBagModel.instance.needVip<=g.vip.VipModel.instance.vipLevel),f.RedBagModel.instance.needVip>g.vip.VipModel.instance.vipLevel?this.sendTxt.text="SVIP"+f.RedBagModel.instance.needVip+"发红包":this.sendTxt.text="发红包"}},s.prototype.updatePanl=function(){if(this.htmlArr&&0<this.htmlArr.length)for(var t=0;t<this.htmlArr.length;t++)this.htmlArr[t].removeSelf(),this.htmlArr[t]=null;this.htmlArr=[];var e=f.RedBagModel.instance.redEnvelopeRecord;if(f.RedBagModel.instance.redEnvelopeRecord){for(var i=e[this.type].sort(function(t,e){return e[7]-t[7]}),n=(t=0,i.length);t<n;t++){var s=this.createrHtml();this.htmlArr.push(s),this.mscPal.addChild(s),f.RedBagUtils.isSysBag(i[t][0])?s.innerHTML=f.RedBagUtils.getSysRedMsc(i[t]):s.innerHTML=f.RedBagUtils.getHumanRedMsc(i[t])}this.noTxt.visible=0===i.length,this.updataPanlView(this.htmlArr)}},s.prototype.updataPanlView=function(t){if(0!==t.length){var e=this.htmlArr.length;if(t[0].x=0,t[0].y=0,!(e<=1))for(var i=1;i<e;i++)t[i]&&(t[i].x=0,t[i].y=t[i-1].contextHeight+t[i-1].y+4)}},s.prototype.createrHtml=function(){var t=new i;return CommonUtil.setHTMLPro(t,"#344c6f","SimHei",26),t.width=616,t.style.leading=8,t.style.wordWrap=!0,t},s.prototype.sendHandler=function(){if(f.RedBagModel.instance.needVip>g.vip.VipModel.instance.vipLevel){var t="达到<span style='color:#168a17'>SVIP"+f.RedBagModel.instance.needVip+"</span>可每天发放1次元宝红包,是否前往充值？",e=0===g.first_pay.FirstPayModel.instance.giveState?118:111,i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[e]);CommonUtil.alert("温馨提示",t,[i],[])}else if(f.RedBagModel.instance.needTianGuan>g.mission.MissionModel.instance.curLv)_.instance.addNotice("通过天关"+f.RedBagModel.instance.needTianGuan+"开启",!0);else if(f.RedBagModel.instance.singleBagInfo){for(var n=f.RedBagModel.instance.sendBagMax,s=f.RedBagModel.instance.singleBagInfo,o=s[0]||0,a=0,r=s[2],l=0,h=r.length;l<h;l++)a+=r[l][1]-r[l][2];if(o<n)WindowManager.instance.open(1366,1);else if(0<a)WindowManager.instance.open(1366,2);else{var c=s[4],p=f.RedBagModel.instance.getMaxMoney(),u="发放次数不足,再充值<span style='color:#168a17'>"+(p<c?f.RedBagModel.instance.getNextMoney()-c%p:f.RedBagModel.instance.getNextMoney()-c)+"</span>元可多发放1次<span style='color:#168a17'>仙玉红包</span>,是否前往充值？",d=0===g.first_pay.FirstPayModel.instance.giveState?118:111,y=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[d]);CommonUtil.alert("温馨提示",u,[y],[])}}},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updataList(),this.updatePanl(),this.updatesingleBagInfo()},s.prototype.setOpenParam=function(t){e.prototype.setOpenParam.call(this,t),this.openUid=t},s.prototype.close=function(){e.prototype.close.call(this),this.openUid=null},n=s,f.RedBagBasePanel=n}(modules=modules||{}),function(t){!function(t){var e,i=(e=t.RedBagBasePanel,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.type=0,this.titleTxt.text="幸运红包"},n);function n(){return e.call(this)||this}t.RedBagLuckPanel=i;var s,o=(s=t.RedBagBasePanel,__extends(a,s),a.prototype.initialize=function(){s.prototype.initialize.call(this),this.type=1,this.titleTxt.text="激励红包"},a);function a(){return s.call(this)||this}t.RedBagAwardPanel=o;var r,l=(r=t.RedBagBasePanel,__extends(h,r),h.prototype.initialize=function(){r.prototype.initialize.call(this),this.type=2,this.titleTxt.text="玩家红包"},h);function h(){return r.call(this)||this}t.RedBagPlayerPanel=l}(t.redBag||(t.redBag={}))}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.common_alert_ex||(t.common_alert_ex={}),n=t.common.CustomList,s=t.common.CommonUtil,o=t.core.BaseViewEx,i=o,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=new n,this._list.width=640,this._list.height=810,this._list.hCount=1,this._list.spaceX=0,this._list.spaceY=6,this._list.x=40,this._list.y=300,this._list.itemRender=this.itemDatas,this.v.addChildAt(this._list,3)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FIGHT_BUY_INFO_ALERT",this,this.updateView)},r.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.close)},r.prototype.initView=function(){this.setActivitiTime(),this.updateView()},r.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.v.tipsHTML.innerHTML="<span style='color:#50ff28;font-size:22px;font-family:SimHei;'></span><span style='color:#ffffff;font-size:22px;font-family:SimHei;'>活动期间，累计充值达到指定金额，即可领取豪礼。</span>",this.initView(),Laya.timer.once(this.restTm-GlobalData.serverTime,this,this.close)},r.prototype.updateView=function(){this._list.datas=this.sortcfgs},r.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),this.restTm>=GlobalData.serverTime?(this.v.activityText1.color="#ffffff",this.v.activityText.visible=!0,this.v.activityText1.text="活动倒计时:",this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):(this.v.activityText1.color="#FF3e3e",this.v.activityText.visible=!1,this.v.activityText1.text="活动已结束")},r.prototype.activityHandler=function(){this.v.activityText.text=s.timeStampDDHHMMToHHMMSS(this.restTm),this.restTm<GlobalData.serverTime&&(this.v.activityText1.color="#FF3e3e",this.v.activityText.visible=!1,this.v.activityText1.text="活动已结束",Laya.timer.clear(this,this.activityHandler))},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},a=r,e.AccPayBasePanel=a}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("zhanhun_acc_pay")},Object.defineProperty(n.prototype,"cfgs",{get:function(){return this._cfg},enumerable:!0,configurable:!0}),i=n,e.ZhanHunAccPayCfg=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.fight_soul_pay||(t.fight_soul_pay={}),n=t.config.ZhanHunAccPayCfg,s=t.common_alert_ex.AccPayBasePanel,i=s,__extends(a,i),Object.defineProperty(a.prototype,"itemDatas",{get:function(){return e.FightSoulPayItem},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"restTm",{get:function(){return e.FightSoulPayModel.instance.restTm},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sortcfgs",{get:function(){return n.instance.cfgs.sort(e.FightSoulPayModel.instance.sort.bind(e.FightSoulPayModel.instance))},enumerable:!0,configurable:!0}),o=a,e.FightSoulPayPanel=o}(modules=modules||{}),function(o){var t,i,a,e,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=o.common_alert_ex||(o.common_alert_ex={}),a=o.config.RechargeCfg,e=o.core.BaseDialogEx,i=e,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._items=[this.v.item0,this.v.item1,this.v.item2,this.v.item3,this.v.item4,this.v.item5];for(var t=0,e=this._items.length;t<e;t++)this._items[t].visible=!1;this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.pos(this.v.getBtn.x-5,this.v.getBtn.y-10,!0),CommonUtil.setHTMLPro(this.v.htmlTm,"#4c5e8a","SimHei",24,"center"),this.v.htmlTm.style.wordWrap=!0},s.prototype.initCfg=function(){},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.v.getBtn,this,this.getHandler),this.onAutoGlobalEvt("FIGHT_BUY_INFO_ALERT",this,this.updateView),this.onAutoGlobalEvt("DIRECT_EX_UPDATE",this,this.updateView)},s.prototype.close=function(){Laya.timer.clear(this,this.activityHandler),Laya.timer.clear(this,this.updateView),this._iconTween&&(this._iconTween.stop(),this._iconTween=null),i.prototype.close.call(this)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.initCfg(),this.updateModelView(),this.setActivitiTime(),this.updateView(),Laya.timer.once(200+this.endTm-GlobalData.serverTime,this,this.updateView)},s.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),this.endTm>=GlobalData.serverTime?(this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.v.htmlTm.innerHTML="<span style='color:#ff3e3e;font-size:18px;font-family:SimHei;'>活动已结束</span>"},s.prototype.activityHandler=function(){this.endTm>=GlobalData.serverTime?this.v.htmlTm.innerHTML="<span style='color:#50ff28;font-size:18px;font-family:SimHei;'>仅此一次，活动倒计时："+CommonUtil.timeStampDDHHMMToHHMMSS(this.endTm)+"</span>":this.v.htmlTm.innerHTML="<span style='color:#ff3e3e;font-size:18px;font-family:SimHei;'>活动已结束</span>"},s.prototype.updateView=function(){this._btnClip.stop(),this._btnClip.visible=!1;for(var t=this.awards,e=0,i=t.length;e<i;e+=2)this._items[e/2>>0].dataSource=[t[e],t[e+1],0,null],this._items[e/2>>0].visible=!0;var n=a.instance.getRecharCfgByIndex(this.payGrade);this.endTm>GlobalData.serverTime?0===this.buyState?(this.v.getBtn.label=n[2]+"秒杀",this.v.getBtn.visible=!0,this._btnClip.play(),this._btnClip.visible=!0):1===this.buyState?(this.v.getBtn.visible=!0,this._btnClip.play(),this._btnClip.visible=!0,this.v.getBtn.label="领取"):2===this.buyState&&(this.v.getBtn.visible=!1,this.v.isOverImg.visible=!1,this.v.isRecImg.visible=!0):(this.v.getBtn.visible=!1,this.v.isOverImg.visible=!0,this.v.isRecImg.visible=!1),this.v.returnTxt.text="现在抢购立即返还"+n[6][0][1]+"   ，仙玉不计入每日获取上限",this.v.priceTxt.text=n[2].toString();var s=o.redBag.RedBagUtils.getIdAndCondByMoney(1043,this.payGrade);this.v.rbHtml.visible=o.redBag.RedBagUtils.getActionopen(),this.v.rbHtml.innerHTML="<span style='color:#ffffff;font-size:24px;font-family:SimHei;'>可发一次</span><span style='color:#ffec7c;font-size:24px;font-family:SimHei;'>"+s+"元宝</span><span style='color:#ffffff;font-size:24px;font-family:SimHei;'>红包</span>",this.updataViewEx()},s.prototype.updataViewEx=function(){},s.prototype.getHandler=function(){var t=a.instance.getRecharCfgByIndex(this.payGrade);0===this.buyState?PlatParams.askPay(t[0],t[2]):1===this.buyState&&this.draBuyAward()},s.prototype.destroy=function(){this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},n=s,t.DirectBuyBaseAlert=n}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.fight_soul_buy||(t.fight_soul_buy={}),n=t.config.BlendCfg,s=t.common_alert_ex.DirectBuyBaseAlert,i=s,__extends(a,i),Object.defineProperty(a.prototype,"awards",{get:function(){return t.config.BlendCfg.instance.getCfgById(97512)[1]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endTm",{get:function(){return e.FightSoulBuyMoel.instance.endTm},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"payGrade",{get:function(){return e.FightSoulBuyMoel.instance.payGrade},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"redBagId",{get:function(){return 1041},enumerable:!0,configurable:!0}),a.prototype.updateModelView=function(){var t=n.instance.getCfgById(97513)[1],e=this.v;e.rewardShowItem&&(e.rewardShowItem.showRewardObj(t[0],t[1],t[2]),this.v.observationItem.data=[[e.rewardShowItem._modelClip,Math.round(t[0]/1e3)]])},a.prototype.destroy=function(){this.v.observationItem=this.destroyElement(this.v.observationItem),i.prototype.destroy.call(this)},Object.defineProperty(a.prototype,"buyState",{get:function(){return e.FightSoulBuyMoel.instance.buyState},enumerable:!0,configurable:!0}),a.prototype.draBuyAward=function(){e.FightSoulBuyCtrl.instance.drawZhanhunDirectlyBuyAward()},o=a,e.FightSoulBuyAlert=o}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h,c,p,u,d,y,g,f,_,m,v,b,T,I,C,x,B,S,M,w,P,A,R,k,E,D,L,H,U,O,G,F,N,z,W,j,q,Y,V,Z,X,J,Q,K,$,tt,et,it,nt,st,ot,at,rt,lt,ht,ct,pt,ut,dt,yt,gt,ft,_t,mt,vt,bt,Tt,It,Ct,xt,Bt,St,Mt,wt,Pt,At,Rt,kt,Et,Dt,Lt,Ht,Ut,Ot,Gt,Ft,Nt,zt,Wt,jt,qt,Yt,Vt,Zt,Xt,Jt,Qt,Kt,$t,te,ee,ie,ne,se,oe,ae,re,le,he,ce,pe,ue,de,ye,ge,fe,_e,me,ve,be,Te,Ie,Ce,xe,Be,Se,Me,we,Pe,Ae,Re,ke,Ee,De,Le,He,Ue,Oe,Ge,Fe,Ne,ze,We,je,qe,Ye,Ve,Ze,Xe,Je,Qe,Ke,$e,ti,ei,ii,ni,si,oi,ai,ri,li,hi,ci,pi,di,yi,gi,fi,_i,mi,vi,bi,Ti,Ii,Ci,xi,Bi,Si,Mi,wi,Pi,Ai,Ri,ki,Ei,Di,Li,Hi,Ui,Oi,Gi,Fi,Ni,zi,Wi,ji,qi,Yi,Vi,Zi,Xi,Ji,Qi,Ki,$i,tn,en,nn,sn,on,an,rn,ln,hn,cn,pn,un,dn,yn,gn,fn,_n,mn,vn,bn,Tn,In,Cn,xn,Bn,Sn,Mn,wn,Pn,An,Rn,kn,En,Dn,Ln,Hn,Un,On,Gn,Fn,Nn,zn,Wn,jn,qn,Yn,Vn,Zn,Xn,Jn,Qn,Kn,$n,ts,es,is,ns,ss,os,as,rs,ls,hs,cs,ps,us,ds,ys,gs,fs,_s,ms,vs,bs,Ts,Is,Cs,xs,Bs,Ss,Ms,ws,Ps,As,Rs,ks,Es,Ds,Ls,Hs,Us,Os,Gs,Fs,Ns,zs,Ws,js,qs,Ys,Vs,Zs,Xs,Js,Qs,Ks,$s,to,eo,io,no,so,oo,ao,ro,lo,ho,co,po,uo,yo,go,fo,_o,mo,vo,bo,To,Io,Co,xo,Bo,So,Mo,wo,Po,Ao,Ro,ko,Eo,Do,Lo,Ho,Uo,Oo,Go,Fo,No,zo,Wo,jo,qo,Yo,Vo,Zo,Xo,Jo,Qo,Ko,$o,ta,ea,ia,na,sa,oa,aa,ra,la,ha,ca,pa,ua,da,ya,ga,fa,_a,ma,va,ba,Ta,Ia,Ca,xa,Ba,Sa,Ma,wa,Pa,Aa,Ra,ka,Ea,Da,La,Ha,Ua,Oa,Ga,Fa,Na,za,Wa,ja,qa,Ya,Va,Za,Xa,Ja,Qa,Ka,$a,tr,er,ir,nr,sr,or,ar,rr,lr,hr,cr,pr,ur,dr,yr,gr,fr,_r,mr,vr,br,Tr,Ir,Cr,xr,Br,Sr,Mr,wr,Pr,Ar,Rr,kr,Er,Dr,Lr,Hr,Ur,Or,Gr,Fr,Nr,zr,Wr,jr,qr,Yr,Vr,Zr,Xr,Jr,Qr,Kr,$r,tl,el,il,nl,sl,ol,al,rl,ll,hl,cl,pl,ul,dl,yl,gl,fl,_l,ml,vl,bl,Tl,Il,Cl,xl,Bl,Sl,Ml,wl,Pl,Al,Rl,kl,El,Dl,Ll,Hl,Ul,Ol,Gl,Fl,Nl,zl,Wl;function jl(){this.windowInfos=[[436,1,Cr,null,["res/atlas/jiu_xiao_ling.atlas","jiu_xiao_ling/image_jxl_bg01.jpg"],1,252,6e4],[437,1,xr,null,["res/atlas/jiu_xiao_ling.atlas","jiu_xiao_ling/image_jxl_bg01.jpg"],1,253,6e4],[533,2,l,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[534,2,h,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[535,2,c,null,["res/atlas/single_dog.atlas","res/atlas/zxian_yu.atlas","treasure/title0_xunbao.png","zxian_yu/image_xy_bg.jpg","zxian_yu/image_xy_bg02.jpg","treasure/imge_xb_bgbottom.png","zxian_yu/image_xy_bg04.jpg","zxian_yu/image_xy_xsbg.jpg"],1,0,6e4],[541,2,f,ui.ChildrensDayFirstPayAlertUI,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/fest_first_pay.atlas","single_dog/image_dssd_21.png"],0,335,6e4],[542,2,_,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[553,2,C,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[554,2,x,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[555,2,B,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[556,2,S,null,["res/atlas/common.atlas","res/atlas/marry.atlas"],0,0,6e4],[557,2,M,null,["res/atlas/common.atlas"],0,0,6e4],[560,2,P,null,["res/atlas/store.atlas","res/atlas/li_dong.atlas","res/atlas/common.atlas"],0,0,6e4],[527,1,i,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","national_day/image_gqhd_bg02.jpg","single_dog/image_dssd_06.jpg"],1,323,6e4],[528,1,n,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","national_day/image_gqhd_bg03.jpg","single_dog/image_dssd_14.jpg"],1,324,6e4],[529,1,s,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","national_day/image_gqhd_bg05.jpg","single_dog/image_dssd_11.jpg"],1,325,6e4],[530,1,o,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","national_day/image_gqhd_bg01.jpg","single_dog/image_dssd_14.jpg"],1,326,6e4],[531,1,a,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","national_day/image_gqhd_bg04.jpg","single_dog/image_dssd_13.jpg"],1,327,6e4],[532,1,r,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","res/atlas/zxian_yu.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/national_day.atlas","national_day/image_gqhd_bg.jpg","res/atlas/pay_plate.atlas","pay_plate/image_czzp_btg.png","pay_plate/image_czzp_gxbg.png","treasure/imge_xb_bgbottom.png"],1,328,6e4],[536,1,p,null,["res/atlas/single_dog.atlas","res/atlas/kuanghuan.atlas","single_dog/image_dssd_18.jpg"],1,330,6e4],[537,1,u,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/fest_convert.atlas","res/atlas/halloween.atlas","single_dog/image_dsqd_hdbg.jpg"],1,331,6e4],[538,1,d,null,["res/atlas/single_dog.atlas","res/atlas/fest_hilarty.atlas","fest_hilarty/image_hd_bg2.jpg","single_dog/image_dssd_01.jpg","single_dog/image_dssd_04.jpg"],1,332,6e4],[539,1,y,null,["res/atlas/single_dog.atlas","res/atlas/fest_hilarty.atlas","fest_hilarty/image_hd_bg3.jpg","single_dog/image_dssd_01.jpg","single_dog/image_dssd_05.jpg"],1,333,6e4],[540,1,g,null,["res/atlas/single_dog.atlas","res/atlas/kuanghuan.atlas","single_dog/image_dssd_19.jpg"],1,334,6e4],[543,1,I,null,["res/atlas/single_dog.atlas","res/atlas/kuanghuan.atlas"],1,339,6e4],[544,1,m,null,["res/atlas/single_dog.atlas","res/atlas/kuanghuan.atlas"],1,341,6e4],[545,1,v,ui.SingleDogGoodManViewUI,["res/atlas/single_dog.atlas","res/atlas/kuanghuan.atlas","single_dog/image_dssd_07.jpg","single_dog/image_dssd_17.jpg"],1,338,6e4],[546,1,b,ui.SingleDogSartViewUI,["res/atlas/single_dog.atlas","res/atlas/kuanghuan.atlas","player/bg_5.jpg","single_dog/image_dssd_07.jpg"],1,337,6e4],[547,1,T,null,["res/atlas/single_dog.atlas","res/atlas/soaring_rank.atlas","soaring_rank/image_fsb_bg.jpg"],1,340,6e4],[558,1,w,null,["res/atlas/common.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas"],1,344,6e4],[641,1,R,null,["res/atlas/kuanghuan.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg12.jpg"],1,388,6e4],[642,1,k,null,["res/atlas/kuanghuan.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg08.jpg"],1,390,6e4],[643,1,E,null,["res/atlas/kuanghuan.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg09.jpg"],1,391,6e4],[644,1,D,null,["res/atlas/kuanghuan.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg10.jpg"],1,392,6e4],[645,1,U,null,["res/atlas/kuanghuan.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg10.jpg"],1,393,6e4],[646,1,L,null,["res/atlas/single_dog.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg03.jpg"],1,394,6e4],[647,1,H,null,["res/atlas/single_dog.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg13.jpg"],1,395,6e4],[648,1,O,ui.ZhiZhenSartViewUI,["res/atlas/single_dog.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg01.jpg"],1,396,6e4],[649,1,G,ui.ZhiZhenGoodManViewUI,["res/atlas/single_dog.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg07.jpg"],1,397,6e4],[650,1,F,null,["res/atlas/single_dog.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg02.jpg"],1,398,6e4],[651,1,N,null,["res/atlas/single_dog.atlas","res/atlas/soaring_rank.atlas","res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg11.jpg"],1,399,6e4],[718,1,Y,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas"],1,464,6e4],[721,1,V,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas"],1,463,6e4],[719,1,Z,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas"],1,465,6e4],[720,1,X,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas"],1,466,6e4],[722,1,J,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas","res/atlas/store.atlas"],1,579,6e4],[706,1,ot,null,["res/atlas/he_qu.atlas","he_qu/image_hq_8.jpg","he_qu/txt_hf_2.jpg"],1,446,6e4],[707,1,at,null,["res/atlas/he_qu.atlas","he_qu/image_hq_8.jpg","he_qu/txt_hf_2.jpg"],1,447,6e4],[703,1,tt,null,["res/atlas/kuanghuan.atlas","res/atlas/he_qu.atlas","he_qu/image_hq_03.jpg"],1,441,6e4],[704,1,et,null,["res/atlas/kuanghuan.atlas","res/atlas/he_qu.atlas","he_qu/image_hq_6.jpg"],1,442,6e4],[705,1,nt,null,["res/atlas/he_qu.atlas","res/atlas/kuanghuan.atlas","he_qu/image_hq_4.jpg"],1,443,6e4],[708,1,st,null,["res/atlas/he_qu.atlas","res/atlas/kuanghuan.atlas","he_qu/image_hq_05.jpg"],1,445,6e4],[726,1,rt,null,["res/atlas/he_qu.atlas","res/atlas/kuanghuan.atlas","he_qu/image_hq_02.jpg"],1,448,6e4],[727,1,lt,null,["res/atlas/he_qu.atlas","res/atlas/kuanghuan.atlas","he_qu/image_hq_02.jpg"],1,449,6e4],[736,1,ht,null,["res/atlas/dragon_boat_day.atlas","res/atlas/hit_engineer.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],1,469,6e4],[738,1,ct,null,["res/atlas/dragon_boat_day.atlas","res/atlas/hit_engineer.atlas","res/atlas/zadan.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],1,471,6e4],[737,1,pt,null,["res/atlas/common.atlas"],1,470,6e4],[839,1,vt,null,["res/atlas/zhi_zhen.atlas","res/atlas/common.atlas","res/atlas/fest_convert.atlas","res/atlas/halloween.atlas","zhi_zhen/image_zzqy_bg15.jpg"],1,544,6e4],[841,1,mt,null,["res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg16.jpg"],1,545,6e4],[985,1,bt,null,["res/atlas/zhi_zhen.atlas","res/atlas/common.atlas","res/atlas/fest_convert.atlas","res/atlas/halloween.atlas","zhi_zhen/image_zzqy_bg15.jpg"],1,652,6e4],[990,1,xt,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/store.atlas","res/atlas/mysterious_store.atlas"],1,701,6e4],[1021,1,Bt,null,["res/atlas/common.atlas","res/atlas/treasure_land.atlas"],1,678,6e4],[1022,1,Mt,null,["res/atlas/common.atlas","res/atlas/treasure_land.atlas"],1,679,6e4],[1023,1,wt,null,["res/atlas/common.atlas"],1,680,6e4],[1188,1,Lt,null,["res/atlas/zhi_zhen.atlas","res/atlas/kuanghuan.atlas","zhi_zhen/image_qypd_bg01.jpg"],1,782,6e4],[1218,1,Ht,null,["res/atlas/single_dog.atlas","res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_18.jpg"],1,806,6e4],[1194,1,Ut,null,["res/atlas/kuanghuan.atlas","res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_12.jpg"],1,790,6e4],[1195,1,Ot,null,["res/atlas/kuanghuan.atlas","res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_14.jpg"],1,791,6e4],[1196,1,Gt,null,["res/atlas/dragon_boat_day.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","dragon_boat_day/image_txwm_13.jpg","kuanghuan/image_qmkh_bg.jpg"],1,792,6e4],[1197,1,Ft,null,["res/atlas/dragon_boat_day.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","dragon_boat_day/image_txwm_19.jpg"],1,793,6e4],[1198,1,Nt,null,["res/atlas/dragon_boat_day.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","dragon_boat_day/image_txwm_16.jpg"],1,794,6e4],[1199,1,zt,null,["res/atlas/dragon_boat_day.atlas","dragon_boat_day/txt_txwm_05.png","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","res/atlas/zxian_yu.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/national_day.atlas","national_day/image_gqhd_bg.jpg","res/atlas/pay_plate.atlas","pay_plate/image_czzp_btg.png","pay_plate/image_czzp_gxbg.png","treasure/imge_xb_bgbottom.png"],1,795,6e4],[1204,1,Yt,null,["res/atlas/dragon_boat_day.atlas","res/atlas/kuanghuan.atlas","dragon_boat_day/image_txwm_17.jpg"],1,800,6e4],[1205,1,Vt,null,["res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_04.jpg"],1,801,6e4],[1206,1,Zt,null,["res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_05.jpg"],1,802,6e4],[1207,1,Xt,null,["res/atlas/dragon_boat_day.atlas","res/atlas/kuanghuan.atlas","dragon_boat_day/image_txwm_15.jpg"],1,803,6e4],[1209,1,se,null,["res/atlas/common.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas"],1,805,6e4],[1211,1,Kt,ui.ChildrensDaySartViewUI,["res/atlas/single_dog.atlas","res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_06.jpg"],1,796,6e4],[1212,1,Qt,ui.ChildrensDayGoodManViewUI,["res/atlas/single_dog.atlas","res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_21.jpg"],1,985,6e4],[1213,1,te,null,["res/atlas/single_dog.atlas","res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_02.jpg"],1,798,6e4],[1214,1,$t,null,["res/atlas/single_dog.atlas","res/atlas/soaring_rank.atlas","res/atlas/dragon_boat_day.atlas","dragon_boat_day/image_txwm_20.jpg"],1,799,6e4],[1220,1,ge,null,["res/atlas/common.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas"],1,813,6e4],[1222,1,he,ui.HeQuSartViewUI,["res/atlas/single_dog.atlas","res/atlas/he_qu.atlas","he_qu/image_hq_67.jpg"],1,809,6e4],[1223,1,le,ui.HeQuGoodManViewUI,["res/atlas/single_dog.atlas","res/atlas/he_qu.atlas","he_qu/image_hq_70.jpg"],1,810,6e4],[1224,1,pe,null,["res/atlas/single_dog.atlas","res/atlas/he_qu.atlas","he_qu/image_hq_66.jpg"],1,811,6e4],[1225,1,ce,null,["res/atlas/single_dog.atlas","res/atlas/soaring_rank.atlas","res/atlas/he_qu.atlas","he_qu/image_hq_71.jpg"],1,812,6e4],[1245,1,Pe,ui.BarDaySartViewUI,["res/atlas/single_dog.atlas","res/atlas/student_day.atlas","student_day/image_sypd_bg07.jpg"],1,831,6e4],[1246,1,we,ui.BarDayGoodManViewUI,["res/atlas/single_dog.atlas","res/atlas/student_day.atlas","student_day/image_sypd_bg16.jpg"],1,1028,6e4],[1247,1,Re,null,["res/atlas/single_dog.atlas","res/atlas/student_day.atlas","student_day/image_sypd_bg14.jpg"],1,833,6e4],[1248,1,Ae,null,["res/atlas/single_dog.atlas","res/atlas/soaring_rank.atlas","res/atlas/student_day.atlas","student_day/image_sypd_bg09.jpg"],1,834,6e4],[1234,1,ve,null,["res/atlas/kuanghuan.atlas","res/atlas/student_day.atlas","student_day/image_sypd_bg05.jpg"],1,820,6e4],[1235,1,be,null,["res/atlas/kuanghuan.atlas","res/atlas/student_day.atlas","student_day/image_sypd_bg06.jpg"],1,821,6e4],[1236,1,Te,null,["res/atlas/student_day.atlas","res/atlas/kuanghuan.atlas","student_day/image_sypd_bg08.jpg"],1,824,6e4],[1237,1,Ie,null,["res/atlas/student_day.atlas","student_day/image_sypd_bg15.jpg"],1,825,6e4],[1238,1,Ce,null,["res/atlas/student_day.atlas","student_day/image_sypd_bg13.jpg"],1,826,6e4],[1239,1,xe,null,["res/atlas/student_day.atlas","res/atlas/kuanghuan.atlas","student_day/image_sypd_bg03.jpg"],1,827,6e4],[1241,1,Se,null,["res/atlas/common.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas"],1,829,6e4],[1243,1,me,null,["res/atlas/student_day.atlas","res/atlas/common.atlas","res/atlas/fest_convert.atlas","res/atlas/halloween.atlas","student_day/image_sypd_bg10.jpg"],1,830,6e4],[1252,1,Le,null,["res/atlas/student_day.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","student_day/image_sypd_bg01.jpg"],1,822,6e4],[1253,1,He,null,["res/atlas/student_day.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","student_day/image_sypd_bg04.jpg","kuanghuan/image_qmkh_bg.jpg"],1,823,6e4],[242,1,Ze,null,["res/atlas/common.atlas","res/atlas/discountGift.atlas","discountGift/image_thlb_bg1.jpg","discountGift/image_thlb_bg2.jpg","res/atlas/store.atlas"],1,143,6e4],[356,1,Ge,null,["res/atlas/announcement.atlas","res/atlas/common.atlas"],1,225,6e4],[1163,1,je,null,["res/atlas/common.atlas","res/atlas/divinatory_boss.atlas"],1,837,6e4],[1160,1,Ne,null,["res/atlas/common.atlas","res/atlas/divinatory_card.atlas"],1,780,6e4],[1161,1,ze,null,["res/atlas/common.atlas","res/atlas/divinatory_card.atlas"],1,838,6e4],[1186,1,Ve,null,["res/atlas/common.atlas","res/atlas/spirit_dungeon.atlas"],0,0,6e4],[38,1,Xe,null,["res/atlas/big_tower.atlas","big_tower/8.jpg"],1,21,0],[119,1,Je,null,["res/atlas/big_tower.atlas","big_tower/8.jpg"],0,0,6e4],[144,1,Qe,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,112,6e4],[156,1,Ke,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,115,6e4],[155,1,$e,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,118,6e4],[232,1,ti,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,140,6e4],[294,1,ei,null,["res/atlas/common.atlas","res/atlas/every_day_rebate.atlas","every_day_rebate/image_ttfl_dt.jpg"],1,173,6e4],[329,1,ii,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/soaringActivity.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","soaringActivity/image_fsbglhd_01.jpg","soaringActivity/image_fsbglhd_02.jpg","soaringActivity/image_fsbglhd_04.jpg","soaringActivity/image_fsbglhd_03.jpg","soaringActivity/image_qglb_bg.jpg","soaringActivity/image_qglb_bg1.jpg"],1,196,6e4],[330,1,ni,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/soaringActivity.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","soaringActivity/image_fsbglhd_01.jpg","soaringActivity/image_fsbglhd_02.jpg","soaringActivity/image_fsbglhd_04.jpg","soaringActivity/image_fsbglhd_03.jpg","soaringActivity/image_qglb_bg.jpg","soaringActivity/image_qglb_bg1.jpg"],1,197,6e4],[456,1,si,null,["res/atlas/common.atlas","res/atlas/archive.atlas"],1,280,6e4],[142,1,pi,null,["res/atlas/mission.atlas","mission/bj_tianguan_1.jpg","mission/image_common_zz2.png"],0,0,0],[19,1,ci,null,["res/atlas/mission.atlas","mission/bj_tianguan_1.jpg","mission/image_common_zz2.png"],1,46,6e4],[30,1,mi,null,["res/atlas/sign.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,7,6e4],[31,1,fi,null,["res/atlas/sign.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,8,6e4],[34,1,_i,null,["res/atlas/seven_sign.atlas","seven_sign/bj_7tianqiandao_1.jpg","seven_sign/image_qtqd_bg2.jpg"],1,5,6e4],[100,1,vi,null,"res/atlas/common.atlas",1,40,6e4],[174,1,Ti,null,["res/atlas/invest_reward.atlas","invest_reward/image_tzfl_bg.jpg"],1,153,6e4],[175,1,Ii,null,["res/atlas/invest_reward.atlas","invest_reward/image_tzfl_bg.jpg"],1,154,6e4],[176,1,Ci,null,["res/atlas/invest_reward.atlas","invest_reward/image_tzfl_bg.jpg"],1,121,6e4],[195,1,xi,null,["res/atlas/common.atlas","res/atlas/pay_plate.atlas","pay_plate/image_czzp_btg.png","pay_plate/image_czzp_gxbg.png"],1,127,6e4],[230,1,Pi,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,155,6e4],[231,1,wi,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,139,6e4],[358,1,Ai,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,226,6e4],[241,1,Ri,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,146,6e4],[325,1,ki,null,["res/atlas/seven_sign.atlas","seven_sign/bj_7tianqiandao_1.jpg","seven_sign/image_qtqd_bg2.jpg"],1,180,6e4],[341,1,Ui,null,["res/atlas/common.atlas","res/atlas/login_reward.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","single_pay/image_zmkh_zmkh3.jpg"],1,191,1e3],[347,1,Oi,null,["res/atlas/common.atlas","res/atlas/login_reward.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,211,1e3],[348,1,yi,null,["res/atlas/single_pay.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","single_pay/image_zmkh_zmkh3.jpg"],1,210,6e4],[349,1,qi,null,["repeat_pay/bgImg.jpg","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg"],1,212,6e4],[314,1,Ei,null,["res/atlas/common.atlas","sprint_rank/txt_kfcb_bg.png","res/atlas/pay_plate.atlas","pay_plate/image_cbdb_bg.png","pay_plate/image_czzp_gxbg.png"],1,195,6e4],[332,1,gi,null,["res/atlas/open_reward.atlas"],1,198,6e4],[335,1,Gi,null,["res/atlas/common.atlas","res/atlas/pay_plate.atlas","pay_plate/image_jzdb_bg1.jpg","pay_plate/image_jzdb_bg2.jpg","pay_plate/txt_jzdb_cycjyhlyb.png"],1,217,6e4],[340,1,ji,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/soaringActivity.atlas","soaringActivity/image_fsbglhd_01.jpg","soaringActivity/image_fsbglhd_02.jpg","soaringActivity/image_fsbglhd_04.jpg","soaringActivity/image_fsbglhd_03.jpg","soaringActivity/image_qglb_bg.jpg","soaringActivity/image_qglb_bg1.jpg"],1,209,6e4],[359,1,Vi,null,["res/atlas/common.atlas","res/atlas/payRank.atlas"],1,213,6e4],[372,1,Qi,null,["res/atlas/common.atlas","res/atlas/one_buy.atlas"],1,231,6e4],[402,1,hn,null,["res/atlas/common.atlas","res/atlas/kuang_hai.atlas"],1,245,6e4],[410,1,rn,null,["res/atlas/prevent_fool.atlas"],1,247,6e4],[422,1,Ei,null,["res/atlas/common.atlas","sprint_rank/txt_kfcb_bg.png","res/atlas/pay_plate.atlas","pay_plate/image_cbdb_bg.png","pay_plate/image_czzp_gxbg.png"],1,250,6e4],[424,1,cn,null,["res/atlas/common.atlas","res/atlas/motongjiangshi.atlas"],1,0,6e4],[452,1,pn,null,["res/atlas/common.atlas"],1,229,6e4],[468,1,dn,null,["res/atlas/red_pack.atlas","red_pack/image_hb_bg1.png","red_pack/image_hb_bg2.png"],1,0,6e4],[949,1,fn,null,["res/atlas/qq.atlas","qq/image_qqdtlz_bg03.jpg","qq/image_qqdtlz_bg05.jpg","qq/image_qqdtlz_bg01.png"],1,624,6e4],[950,1,_n,null,["res/atlas/qq.atlas","qq/image_qqdtlz_bg03.jpg","qq/image_qqdtlz_bg05.jpg","qq/image_qqdtlz_bg07.png"],1,625,6e4],[951,1,mn,null,["res/atlas/qq.atlas","qq/image_qqdtlz_bg03.jpg"],1,626,6e4],[952,1,vn,null,["res/atlas/qq.atlas","qq/img_ktlz.png","qq/img_ktnflz.png","qq/image_qqdtlz_bg02.jpg","qq/txt_qqdtlz_01.png","qq/txt_qqdtlz_02.png","qq/txt_qqdtlz_03.png","qq/txt_qqdtlz_04.png","qq/txt_qqdtlz_05.png","qq/image_qqdtlz_bg04.jpg"],1,628,6e4],[953,1,bn,null,["res/atlas/qq.atlas","qq/img_ktlz.png","qq/img_ktnflz.png","qq/image_qqdtlz_bg04.jpg","qq/image_qqdtlz_bg05.jpg","qq/image_qqdtlz_bg01.png"],1,629,6e4],[954,1,Tn,null,["res/atlas/qq.atlas","qq/img_ktlz.png","qq/img_ktnflz.png","qq/image_qqdtlz_bg04.jpg"],1,630,6e4],[955,1,In,null,["res/atlas/qq.atlas","qq/img_ktlz.png","qq/img_ktnflz.png","qq/image_qqdtlz_bg04.jpg"],1,631,6e4],[35,1,Bn,null,["res/atlas/goldbody.atlas"],1,16,6e4],[87,1,Mn,null,["res/atlas/ranking_list.atlas","res/atlas/exercise.atlas","ranking_list/bj_paihangbang_2.jpg","exercise/bj_lilian_1.jpg","exercise/msz_tongyong_3.png","qq/img_nf_blue_icon.png","qq/clip_blue_vip_icon1.png","qq/clip_blue_vip_icon2.png","qq/clip_blue_vip_icon3.png"],1,39,6e4],[93,1,wn,ui.TreasureViewUI,["res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","res/atlas/common.atlas","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,92,6e4],[109,1,Rn,null,["res/atlas/store.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,81,6e4],[113,1,kn,ui.TreasureTalismanViewUI,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,91,6e4],[114,1,En,null,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,900,6e4],[115,1,Dn,ui.TreasureViewUI,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,93,6e4],[393,1,Yn,ui.TreasureRuneViewUI,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,95,6e4],[116,1,Ln,ui.TreasureViewUI,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,94,6e4],[180,1,Kn,null,["res/atlas/sprint_rank.atlas","sprint_rank/frame_kfcb_bsds.png","sprint_rank/txt_kfcb_bg.png","sprint_rank/image_kfcb_bg02.png","sprint_rank/image_kfcb_bg03.png","sprint_rank/image_kfcb_bg04.png","sprint_rank/image_kfcb_bg05.png","sprint_rank/image_kfcb_bg06.png","sprint_rank/image_kfcb_bg07.png","sprint_rank/image_kfcb_bg01.png"],1,125,6e4],[181,1,$n,null,["res/atlas/sprint_rank.atlas","sprint_rank/frame_kfcb_bsds.png","sprint_rank/txt_kfcb_bg.png","sprint_rank/image_kfcb_bg02.png","sprint_rank/image_kfcb_bg03.png","sprint_rank/image_kfcb_bg04.png","sprint_rank/image_kfcb_bg05.png","sprint_rank/image_kfcb_bg06.png","sprint_rank/image_kfcb_bg07.png","sprint_rank/image_kfcb_bg01.png"],1,132,6e4],[182,1,ts,null,["res/atlas/sprint_rank.atlas","sprint_rank/frame_kfcb_bsds.png","sprint_rank/txt_kfcb_bg.png","sprint_rank/image_kfcb_bg02.png","sprint_rank/image_kfcb_bg03.png","sprint_rank/image_kfcb_bg04.png","sprint_rank/image_kfcb_bg05.png","sprint_rank/image_kfcb_bg06.png","sprint_rank/image_kfcb_bg07.png","sprint_rank/image_kfcb_bg01.png"],1,133,6e4],[183,1,es,null,["res/atlas/sprint_rank.atlas","sprint_rank/frame_kfcb_bsds.png","sprint_rank/txt_kfcb_bg.png","sprint_rank/image_kfcb_bg02.png","sprint_rank/image_kfcb_bg03.png","sprint_rank/image_kfcb_bg04.png","sprint_rank/image_kfcb_bg05.png","sprint_rank/image_kfcb_bg06.png","sprint_rank/image_kfcb_bg07.png","sprint_rank/image_kfcb_bg01.png"],1,134,6e4],[184,1,is,null,["res/atlas/sprint_rank.atlas","sprint_rank/frame_kfcb_bsds.png","sprint_rank/txt_kfcb_bg.png","sprint_rank/image_kfcb_bg02.png","sprint_rank/image_kfcb_bg03.png","sprint_rank/image_kfcb_bg04.png","sprint_rank/image_kfcb_bg05.png","sprint_rank/image_kfcb_bg06.png","sprint_rank/image_kfcb_bg07.png","sprint_rank/image_kfcb_bg01.png"],1,135,6e4],[185,1,ns,null,["res/atlas/sprint_rank.atlas","sprint_rank/frame_kfcb_bsds.png","sprint_rank/txt_kfcb_bg.png","sprint_rank/image_kfcb_bg02.png","sprint_rank/image_kfcb_bg03.png","sprint_rank/image_kfcb_bg04.png","sprint_rank/image_kfcb_bg05.png","sprint_rank/image_kfcb_bg06.png","sprint_rank/image_kfcb_bg07.png","sprint_rank/image_kfcb_bg01.png"],1,136,6e4],[186,1,ss,null,["res/atlas/sprint_rank.atlas","sprint_rank/frame_kfcb_bsds.png","sprint_rank/txt_kfcb_bg.png","sprint_rank/image_kfcb_bg02.png","sprint_rank/image_kfcb_bg03.png","sprint_rank/image_kfcb_bg04.png","sprint_rank/image_kfcb_bg05.png","sprint_rank/image_kfcb_bg06.png","sprint_rank/image_kfcb_bg07.png","sprint_rank/image_kfcb_bg01.png"],1,137,6e4],[210,1,On,null,["res/atlas/gushen.atlas","gushen/image_gswd_bg.jpg"],1,130,6e4],[282,1,Gn,null,["res/atlas/common.atlas","res/atlas/soaring_rank.atlas","soaring_rank/image_fsb_bg.jpg"],1,164,6e4],[283,1,Fn,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/soaringActivity.atlas","soaringActivity/image_fsbglhd_01.jpg","soaringActivity/image_fsbglhd_02.jpg","soaringActivity/image_fsbglhd_04.jpg","soaringActivity/image_fsbglhd_03.jpg","soaringActivity/image_qglb_bg.jpg","soaringActivity/image_qglb_bg1.jpg"],1,168,6e4],[284,1,Nn,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/soaringActivity.atlas","soaringActivity/image_fsbglhd_01.jpg","soaringActivity/image_fsbglhd_02.jpg","soaringActivity/image_fsbglhd_04.jpg","soaringActivity/image_fsbglhd_03.jpg","soaringActivity/image_qglb_bg.jpg","soaringActivity/image_qglb_bg1.jpg"],1,170,6e4],[285,1,zn,null,["res/atlas/common.atlas","res/atlas/soaringActivity.atlas","soaringActivity/image_fsbglhd_01.jpg","soaringActivity/image_fsbglhd_02.jpg","soaringActivity/image_fsbglhd_04.jpg","soaringActivity/image_fsbglhd_03.jpg","soaringActivity/image_qglb_bg.jpg","soaringActivity/image_qglb_bg1.jpg"],1,171,6e4],[286,1,Wn,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/soaringActivity.atlas","soaringActivity/image_fsbglhd_01.jpg","soaringActivity/image_fsbglhd_02.jpg","soaringActivity/image_fsbglhd_04.jpg","soaringActivity/image_fsbglhd_03.jpg","soaringActivity/image_qglb_bg.jpg","soaringActivity/image_qglb_bg1.jpg"],1,169,6e4],[287,1,jn,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/soaringActivity.atlas","soaringActivity/image_fsbglhd_01.jpg","soaringActivity/image_fsbglhd_02.jpg","soaringActivity/image_fsbglhd_04.jpg","soaringActivity/image_fsbglhd_03.jpg","soaringActivity/image_qglb_bg.jpg","soaringActivity/image_qglb_bg1.jpg"],1,172,6e4],[351,1,xn,null,["res/atlas/zhizun.atlas"],1,218,6e4],[383,1,qn,null,["res/atlas/xian_dan.atlas"],1,238,6e4],[398,1,Xn,null,["res/atlas/common.atlas"],1,243,6e4],[423,1,Qn,null,["res/atlas/common.atlas","res/atlas/one_buy.atlas","res/atlas/vipBuy.atlas"],1,232,6e4],[457,1,os,null,["res/atlas/open_challenge.atlas"],1,267,6e4],[511,1,as,null,"susan_slade/image_ydss_bg.jpg",1,295,6e4],[1158,1,ys,null,["res/atlas/common.atlas","res/atlas/fly_up.atlas"],1,776,6e4],[942,1,ls,null,["res/atlas/common.atlas","res/atlas/thunderbolt_equip.atlas","res/atlas/xi_lian.atlas","thunderbolt_equip/image_ltzb_bg01.jpg"],1,622,6e4],[943,1,hs,null,["res/atlas/common.atlas","res/atlas/thunderbolt_equip.atlas","thunderbolt_equip/image_ltzb_bg02.jpg"],1,807,6e4],[1175,1,t.forbiddenBoss.ForbiddenBossPanel,null,["res/atlas/foreignBoss.atlas","res/atlas/forbidden_boss.atlas"],1,777,6e4],[1176,1,t.forbiddenBoss.ForbiddenBossSceneLeftPanel,null,["res/atlas/boss_home.atlas"],0,0,6e4],[1177,1,t.forbiddenBoss.ForbiddenBossSceneRightPanel,null,["res/atlas/forbidden_boss.atlas","res/atlas/dungeon.atlas","res/atlas/spirit_dungeon.atlas"],0,0,6e4],[1233,1,t.forbiddenBoss.ForbiddenBossHurtPanel,null,["res/atlas/common.atlas"],0,0,6e4],[1135,1,to,null,["res/atlas/foreignBoss.atlas","res/atlas/forbidden_boss.atlas"],1,723,6e4],[1134,1,oo,null,["res/atlas/common.atlas"],0,0,6e4],[1136,1,ao,null,["res/atlas/common.atlas"],0,0,6e4],[490,1,Ms,null,["res/atlas/marry.atlas","marry/panel_common_bg12.png","marry/image_xyxt_bg04.jpg"],1,297,6e4],[491,1,Bs,null,["res/atlas/marry.atlas","marry/panel_common_bg12.png"],1,0,6e4],[499,1,xs,null,"res/atlas/common.atlas",0,0,6e4],[500,1,Cs,null,["res/atlas/marry.atlas","marry/panel_common_bg12.png"],1,0,6e4],[502,1,Ts,null,["res/atlas/marry.atlas","marry/panel_common_bg12.png","marry/image_xyxt_bg04.jpg"],1,312,6e4],[524,1,ms,null,["res/atlas/marry.atlas","marry/image_xyxt_bg07.jpg","marry/panel_common_bg12.png"],1,321,6e4],[525,1,Es,null,["res/atlas/marry.atlas","marry/image_xyxt_bg07.jpg","marry/panel_common_bg12.png"],1,0,6e4],[548,1,Ls,null,["res/atlas/yuan_shen.atlas","yuan_shen/image_ysjt_gb02.jpg"],1,343,6e4],[549,1,Fs,null,["res/atlas/yuan_shen.atlas"],0,0,6e4],[551,1,Gs,null,["res/atlas/yuan_shen.atlas","res/atlas/magic_art.atlas"],0,654,6e4],[552,1,Os,null,["res/atlas/yuan_shen.atlas"],0,835,6e4],[550,1,Hs,null,["res/atlas/yuan_shen.atlas","res/atlas/equip_part.atlas"],0,0,6e4],[614,1,Us,null,["res/atlas/yuan_shen.atlas","res/atlas/equip_part.atlas"],0,0,6e4],[1078,1,Zs,ui.BabyGrowthViewUI,["res/atlas/common.atlas","res/atlas/baby.atlas"],1,706,6e4],[1079,1,Xs,ui.BabyGradeViewUI,["res/atlas/common.atlas","res/atlas/baby.atlas"],1,707,6e4],[1080,1,Js,null,["res/atlas/common.atlas","res/atlas/baby.atlas"],1,708,6e4],[1339,2,$s,null,["res/atlas/common.atlas","res/atlas/baby.atlas"],1,889,6e4],[1337,1,Ks,null,["res/atlas/common.atlas","res/atlas/baby.atlas"],1,889,6e4],[99,1,vo,null,["res/atlas/team_battle.atlas","res/atlas/common.atlas","team_battle/bj_zhuduifuben_1.jpg"],0,0,6e4],[97,1,bo,null,["res/atlas/team_battle.atlas","team_battle/image_zdfb_bg.jpg"],1,43,6e4],[107,1,mo,null,["res/atlas/common.atlas","res/atlas/team_battle.atlas"],0,0,6e4],[302,1,Co,null,["res/atlas/common.atlas","res/atlas/intensive.atlas","res/atlas/equipment_zu_hun.atlas","player/bg_5.jpg"],1,192,0],[304,1,Bo,null,["res/atlas/equip_suit.atlas"],1,199,6e4],[305,1,Bo,null,["res/atlas/equip_suit.atlas"],1,200,6e4],[306,1,Bo,null,["res/atlas/equip_suit.atlas"],1,201,6e4],[307,1,Bo,null,["res/atlas/equip_suit.atlas"],1,202,6e4],[308,1,Bo,null,["res/atlas/equip_suit.atlas"],1,203,6e4],[309,1,Bo,null,["res/atlas/equip_suit.atlas"],1,204,6e4],[310,1,Bo,null,["res/atlas/equip_suit.atlas"],1,205,6e4],[311,1,Bo,null,["res/atlas/equip_suit.atlas"],1,206,6e4],[312,1,Bo,null,["res/atlas/equip_suit.atlas"],1,207,6e4],[313,1,Bo,null,["res/atlas/equip_suit.atlas"],1,208,6e4],[487,1,Bo,null,["res/atlas/equip_suit.atlas"],1,293,6e4],[488,1,Bo,null,["res/atlas/equip_suit.atlas"],1,294,6e4],[1368,1,Bo,null,["res/atlas/equip_suit.atlas"],1,914,6e4],[1369,1,Bo,null,["res/atlas/equip_suit.atlas"],1,915,6e4],[1370,1,Bo,null,["res/atlas/equip_suit.atlas"],1,916,6e4],[400,1,So,null,["res/atlas/common.atlas","res/atlas/forbidden_boss.atlas","res/atlas/boss_home.atlas","boss_home/msz_bosszhijia_2.png"],1,246,0],[403,1,Mo,null,["res/atlas/common.atlas","res/atlas/boss_home.atlas","boss_home/msz_bosszhijia_2.png"],0,0,0],[404,1,wo,null,["res/atlas/common.atlas","res/atlas/boss_home.atlas","boss_home/msz_bosszhijia_2.png"],0,0,0],[405,1,Po,null,["res/atlas/common.atlas","res/atlas/boss_home.atlas","boss_home/msz_bosszhijia_2.png"],0,0,0],[574,1,Eo,null,["res/atlas/spirit_dungeon.atlas"],1,354,6e4],[569,1,Uo,null,["res/atlas/spirit_dungeon.atlas"],0,0,6e4],[769,1,qo,null,["res/atlas/common.atlas","res/atlas/warband.atlas"],1,467,6e4],[764,1,Yo,null,["res/atlas/common.atlas"],1,492,6e4],[981,1,fa,null,["res/atlas/common.atlas","res/atlas/fire_contention.atlas"],0,0,6e4],[864,1,Ko,null,["res/atlas/common.atlas","res/atlas/fire_contention.atlas"],0,0,6e4],[863,1,Qo,null,["res/atlas/common.atlas","res/atlas/fire_contention.atlas","res/atlas/nine.atlas","res/atlas/guide.atlas"],0,0,6e4],[862,1,Jo,null,["res/atlas/common.atlas","res/atlas/guide.atlas","res/atlas/fire_contention.atlas"],0,0,6e4],[869,1,na,null,["res/atlas/common.atlas","res/atlas/fire_contention.atlas"],0,0,6e4],[865,1,$o,null,["res/atlas/common.atlas","res/atlas/singleboss.atlas","res/atlas/fire_contention.atlas","res/atlas/pvp_tab.atlas","fire_contention/image_xhzd_01.jpg"],1,569,6e4],[956,1,aa,null,["res/atlas/common.atlas"],0,0,6e4],[959,1,la,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[961,1,ha,null,["res/atlas/common.atlas","res/atlas/boss_home.atlas","res/atlas/nothingness_world.atlas"],0,0,6e4],[962,1,ca,null,["res/atlas/common.atlas","res/atlas/team_battle.atlas","res/atlas/nothingness_world.atlas","nothingness_world/image_xwj_bg1.jpg"],1,633,6e4],[1174,1,t.sceneTeam.TeamBelongPanel,null,["res/atlas/health_point.atlas"],0,0,6e4],[37,1,Ca,null,["res/atlas/stone.atlas","stone/image_xs_dt.png"],1,18,6e4],[135,1,xa,null,["res/atlas/rune.atlas","rune/image_xf_bg.png"],1,76,6e4],[139,1,Ma,null,["res/atlas/rune_copy.atlas","rune_copy/image_ygfz_bg.jpg"],1,109,6e4],[203,1,Ra,null,["res/atlas/ladder.atlas","ladder/image_ttdf_bg.jpg","ladder/imge_ttdf_vsbg.jpg","ladder/txt_ttdf_txt.png"],1,129,0],[222,1,Ua,null,["res/atlas/common.atlas","res/atlas/yunmeng.atlas","yunmeng/image_ymmj_bg.jpg"],0,0,6e4],[223,1,Oa,null,["res/atlas/common.atlas","res/atlas/yunmeng.atlas","yunmeng/image_ymmj_bg.jpg"],0,0,6e4],[224,1,Ga,null,["res/atlas/common.atlas","res/atlas/singleboss.atlas","res/atlas/yunmeng.atlas","yunmeng/image_ymmj_bg.jpg"],1,142,6e4],[417,1,ja,null,["res/atlas/rune_compose.atlas"],1,248,6e4],[421,1,va,null,["res/atlas/peak_duel.atlas","peak_duel/image_dfdf_bg01.jpg"],1,0,6e4],[425,1,Va,null,["res/atlas/peak_duel.atlas","peak_duel/image_dfdf_bg02.jpg"],1,0,6e4],[474,1,Za,null,"res/atlas/common.atlas",0,0,6e4],[480,1,Ja,null,"res/atlas/rune.atlas",1,292,6e4],[1142,1,Ka,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","res/atlas/zxian_yu.atlas","res/atlas/national_day.atlas","national_day/image_gqhd_bg.jpg","res/atlas/pay_plate.atlas","pay_plate/image_czzp_btg.png","pay_plate/image_czzp_gxbg.png","treasure/imge_xb_bgbottom.png"],1,765,6e4],[1146,1,nr,null,["res/atlas/common.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas","res/atlas/kuanghuan.atlas"],1,766,6e4],[1149,1,or,null,["summer_day/image_zltq_bg08.jpg","res/atlas/kuanghuan.atlas"],1,767,6e4],[1152,1,rr,null,["res/atlas/common.atlas","summer_day/image_zltq_bg03.jpg","res/atlas/kuanghuan.atlas"],1,770,6e4],[1154,1,hr,null,["res/atlas/common.atlas","summer_day/image_zltq_bg04.jpg","res/atlas/kuanghuan.atlas"],1,771,6e4],[1153,1,lr,null,["res/atlas/common.atlas","summer_day/image_zltq_bg06.jpg","res/atlas/kuanghuan.atlas"],1,772,6e4],[1150,1,cr,null,["summer_day/image_zltq_bg05.jpg","res/atlas/kuanghuan.atlas"],1,768,6e4],[1155,1,pr,null,["summer_day/image_zltq_bg07.jpg"],1,773,6e4],[1157,1,ar,null,["res/atlas/kuanghuan.atlas","summer_day/image_zltq_bg01.jpg"],1,775,6e4],[1156,1,ur,null,["res/atlas/common.atlas","res/atlas/kuanghuan.atlas","summer_day/image_zltq_bg02.jpg","kuanghuan/image_qmkh_bg.jpg"],1,774,6e4],[1276,1,t.showEquip.ShowEquipPetConvertPanel,ui.ShowEquipConvertBaseUI,["res/atlas/show_equip.atlas"],1,847,6e4],[1275,1,t.showEquip.ShowEquipPetPanel,ui.ShowEquipBaseUI,["res/atlas/show_equip.atlas","show_equip/image_wxyb_bg7.jpg"],1,847,6e4],[1278,1,t.showEquip.ShowEquipRideConvertPanel,ui.ShowEquipConvertBaseUI,["res/atlas/show_equip.atlas"],1,846,6e4],[1277,1,t.showEquip.ShowEquipRidePanel,ui.ShowEquipBaseUI,["res/atlas/show_equip.atlas","show_equip/image_wxyb_bg5.jpg"],1,846,6e4],[1280,1,t.showEquip.ShowEquipImmortalConvertPanel,ui.ShowEquipConvertBaseUI,["res/atlas/show_equip.atlas"],1,848,6e4],[1279,1,t.showEquip.ShowEquipImmortalPanel,ui.ShowEquipBaseUI,["res/atlas/show_equip.atlas","show_equip/image_wxyb_bg1.jpg"],1,848,6e4],[1282,1,t.showEquip.ShowEquipWingConvertPanel,ui.ShowEquipConvertBaseUI,["res/atlas/show_equip.atlas"],1,849,6e4],[1281,1,t.showEquip.ShowEquipWingPanel,ui.ShowEquipBaseUI,["res/atlas/show_equip.atlas","show_equip/image_wxyb_bg2.jpg"],1,849,6e4],[1284,1,t.showEquip.ShowEquipFashionConvertPanel,ui.ShowEquipConvertBaseUI,["res/atlas/show_equip.atlas"],1,850,6e4],[1283,1,t.showEquip.ShowEquipFashionPanel,ui.ShowEquipBaseUI,["res/atlas/show_equip.atlas","show_equip/image_wxyb_bg3.jpg"],1,850,6e4],[1286,1,t.showEquip.ShowEquipPearlConvertPanel,ui.ShowEquipConvertBaseUI,["res/atlas/show_equip.atlas"],1,851,6e4],[1285,1,t.showEquip.ShowEquipPearlPanel,ui.ShowEquipBaseUI,["res/atlas/show_equip.atlas","show_equip/image_wxyb_bg4.jpg"],1,851,6e4],[1043,1,Or,null,["res/atlas/union_war.atlas","res/atlas/peak_duel.atlas","union_war/image_xmz_bg13.jpg","union_war/image_xmz_bg03.jpg"],1,698,6e4],[1044,1,Hr,null,["res/atlas/union_war.atlas","union_war/image_xmz_bg09.jpg","union_war/image_xmz_bg01.png","union_war/image_xmz_bg04.png","union_war/image_xmz_bg02.png"],1,699,6e4],[1045,1,Ur,null,["res/atlas/union_war.atlas","res/atlas/store.atlas"],1,700,6e4],[1046,1,kr,null,["res/atlas/common.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1047,1,Er,null,["res/atlas/common.atlas","res/atlas/peak_duel.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1048,1,Dr,null,["res/atlas/common.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1340,1,Lr,null,["res/atlas/common.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1049,1,Yr,null,["res/atlas/common.atlas","res/atlas/peak_duel.atlas","res/atlas/faerie_demon.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1050,1,Vr,null,["res/atlas/common.atlas","res/atlas/peak_duel.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1051,1,Zr,null,["res/atlas/common.atlas","res/atlas/guide.atlas","res/atlas/peak_duel.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1052,1,Xr,null,["res/atlas/common.atlas","res/atlas/peak_duel.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1297,1,Jr,null,["res/atlas/common.atlas","res/atlas/nine.atlas","res/atlas/peak_duel.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1272,1,Pr,null,["res/atlas/show_equip.atlas","res/atlas/common.atlas"],1,852,6e4],[1273,1,Ar,null,["res/atlas/show_equip.atlas","res/atlas/common.atlas","res/atlas/divinatory_boss.atlas","res/atlas/spirit_dungeon.atlas"],0,0,6e4],[1290,1,$r,null,["res/atlas/extreme_equip.atlas","res/atlas/common.atlas","extreme_equip/image_qlyx_bg0.jpg"],1,856,6e4],[1292,1,t.immortalContest.ImmortalContestPanel,ui.ImmortalContestViewUI,["res/atlas/immortal_contest.atlas"],1,853,6e4],[1329,1,Ml,ui.TreasureViewUI,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,882,6e4],[1330,1,wl,ui.TreasureViewUI,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,883,6e4],[1342,1,Al,ui.TreasureViewUI,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],1,892,6e4],[1525,1,il,null,["res/atlas/single_dog.atlas","res/atlas/anniversary_day.atlas","res/atlas/kuanghuan.atlas","anniversary_day/txt_sdkh_02.png","anniversary_day/image_txwm_02.jpg"],1,1021,6e4],[1327,1,nl,null,["res/atlas/single_dog.atlas","res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_18.jpg"],1,880,6e4],[1303,1,sl,null,["res/atlas/kuanghuan.atlas","res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_12.jpg"],1,864,6e4],[1304,1,ol,null,["res/atlas/kuanghuan.atlas","res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_14.jpg"],1,865,6e4],[1305,1,al,null,["res/atlas/anniversary_day.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","anniversary_day/image_txwm_13.jpg","kuanghuan/image_qmkh_bg.jpg"],1,866,6e4],[1306,1,rl,null,["res/atlas/anniversary_day.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","anniversary_day/image_txwm_19.jpg"],1,867,6e4],[1307,1,ll,null,["res/atlas/anniversary_day.atlas","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","kuanghuan/image_qmkh_bg.jpg","anniversary_day/image_txwm_16.jpg"],1,868,6e4],[1308,1,hl,null,["res/atlas/anniversary_day.atlas","anniversary_day/txt_txwm_05.png","res/atlas/common.atlas","res/atlas/kuanghuan.atlas","res/atlas/zxian_yu.atlas","kuanghuan/image_qmkh_bg.jpg","res/atlas/national_day.atlas","national_day/image_gqhd_bg.jpg","res/atlas/pay_plate.atlas","pay_plate/image_czzp_btg.png","pay_plate/image_czzp_gxbg.png","treasure/imge_xb_bgbottom.png"],1,869,6e4],[1313,1,dl,null,["res/atlas/anniversary_day.atlas","res/atlas/kuanghuan.atlas","anniversary_day/image_txwm_17.jpg"],1,874,6e4],[1314,1,yl,null,["res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_04.jpg"],1,875,6e4],[1315,1,gl,null,["res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_05.jpg"],1,876,6e4],[1316,1,fl,null,["res/atlas/anniversary_day.atlas","res/atlas/kuanghuan.atlas","anniversary_day/image_txwm_15.jpg"],1,877,6e4],[1318,1,Bl,null,["res/atlas/common.atlas","res/atlas/li_dong.atlas","res/atlas/store.atlas"],1,879,6e4],[1320,1,vl,ui.AnniversaryDaySartViewUI,["res/atlas/single_dog.atlas","res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_06.jpg"],1,870,6e4],[1321,1,ml,ui.AnniversaryDayGoodManViewUI,["res/atlas/single_dog.atlas","res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_21.jpg"],1,871,6e4],[1322,1,Tl,null,["res/atlas/single_dog.atlas","res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_02.jpg"],1,872,6e4],[1323,1,bl,null,["res/atlas/single_dog.atlas","res/atlas/soaring_rank.atlas","res/atlas/anniversary_day.atlas","anniversary_day/image_txwm_20.jpg"],1,873,6e4],[1328,1,t.destinyPellet.DestinyPelletPanel,ui.DestinyPelletViewUI,["res/atlas/destiny_pellet.atlas"],1,860,6e4],[1335,1,t.treasure.TreasureRebateShengZunPanel,ui.XunBaoKuangHuanViewUI,["res/atlas/kuanghuan.atlas"],1,884,6e4],[1336,1,t.treasure.TreasureRebateMiZangPanel,ui.XunBaoKuangHuanViewUI,["res/atlas/kuanghuan.atlas"],1,885,6e4],[1343,1,t.treasure.TreasureRebateMarryPanel,ui.XunBaoKuangHuanViewUI,["res/atlas/kuanghuan.atlas"],1,893,6e4],[1344,1,t.ruins.RuinsPanel,ui.RuinsViewUI,["res/atlas/ruins.atlas"],1,896,6e4],[1345,1,t.ruins.RuinsRankPanel,ui.RuinsRankViewUI,["res/atlas/ruins.atlas"],1,897,6e4],[1346,1,t.ruins.RuinsTaskPanel,ui.RuinsTaskViewUI,["res/atlas/ruins.atlas"],1,898,6e4],[1364,1,Dl,null,["res/atlas/red_bag.atlas"],1,907,6e4],[1362,1,kl,null,["res/atlas/red_bag.atlas"],1,908,6e4],[1363,1,El,null,["res/atlas/red_bag.atlas"],1,909,6e4],[1389,1,Gl,ui.FightSoulPayViewUI,["res/atlas/common.atlas","susan_slade/image_zhft_dt.jpg"],1,923,6e4],[816,1,t.hit_birthday_cake.HitBirthdayCakePanel,null,["res/atlas/dragon_boat_day.atlas","res/atlas/hit_engineer.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],1,527,6e4],[818,1,t.hit_birthday_cake.HitBirthdayCakeKillerPanel,null,["res/atlas/dragon_boat_day.atlas","res/atlas/hit_engineer.atlas","res/atlas/zadan.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],1,528,6e4],[812,1,t.hit_birthday_cake.HitBirthdayCakeAwardPanel,null,["res/atlas/common.atlas"],1,529,6e4],[817,2,t.hit_birthday_cake.HitBirthdayCakeStageAwardAlert,null,["res/atlas/common.atlas"],0,0,6e4],[813,2,t.hit_birthday_cake.HitBirthdayCakeLogAlert,null,["res/atlas/common.atlas"],0,0,6e4],[814,2,t.hit_birthday_cake.HitBirthdayCakeShopAlert,null,["res/atlas/common.atlas"],0,0,6e4],[815,2,t.hit_birthday_cake.HitBirthdayCakeTxtAlert,null,["res/atlas/common.atlas"],0,0,6e4],[819,2,t.hit_birthday_cake.HitBirthdayCakeLastAwardalert,null,["res/atlas/dungeon.atlas","res/atlas/common.atlas"],0,0,6e4],[157,2,A,null,["res/atlas/zerobuy.atlas","res/atlas/common.atlas","zerobuy/image_0yg_bg.png"],0,117,6e4],[670,2,j,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[671,2,q,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[672,2,W,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[652,2,z,ui.ChildrensDayFirstPayAlertUI,["res/atlas/zhi_zhen.atlas","zhi_zhen/image_zzqy_bg04.png"],0,389,6e4],[723,2,Q,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas"],0,0,6e4],[724,2,K,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas","zadan/title0_xunbao.png"],0,0,6e4],[725,2,$,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas"],0,0,6e4],[709,2,it,ui.ChildrensDayFirstPayAlertUI,["res/atlas/he_qu.atlas","res/atlas/common.atlas","he_qu/image_hq_10.png"],0,444,6e4],[757,2,yt,null,["res/atlas/common.atlas"],0,0,6e4],[758,2,ut,null,["res/atlas/common.atlas"],0,0,6e4],[759,2,dt,null,["res/atlas/common.atlas"],0,0,6e4],[771,2,gt,null,["res/atlas/common.atlas"],0,0,6e4],[772,2,ft,null,["res/atlas/dungeon.atlas","res/atlas/common.atlas"],0,0,6e4],[837,2,_t,null,["res/atlas/store.atlas","res/atlas/li_dong.atlas","res/atlas/common.atlas"],0,0,6e4],[1351,2,Rl,null,["res/atlas/common.atlas"],0,0,6e4],[840,2,Tt,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[986,2,It,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[989,2,Ct,null,["mysterious_store/image_msd_03.png","res/atlas/mysterious_store.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1024,2,St,null,["res/atlas/common.atlas"],0,0,6e4],[1025,2,Pt,null,["res/atlas/common.atlas","res/atlas/treasure_land.atlas"],0,0,6e4],[1061,2,Rt,null,["res/atlas/common.atlas","res/atlas/treasure_land.atlas"],0,0,6e4],[1059,2,At,null,["res/atlas/common.atlas"],0,0,6e4],[1139,2,kt,ui.SaintsPartyUI,["family_party/image_qypd_0.png","res/atlas/family_party.atlas","res/atlas/common.atlas"],0,762,6e4],[1140,2,Et,null,["res/atlas/common.atlas"],0,0,6e4],[1141,2,Dt,ui.SaintsPartyBigAwardAlertUI,["res/atlas/family_party.atlas","res/atlas/common.atlas"],0,0,6e4],[1217,2,ne,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1200,2,Wt,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[1201,2,jt,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[1202,2,qt,null,["res/atlas/single_dog.atlas","res/atlas/zxian_yu.atlas","treasure/title0_xunbao.png","zxian_yu/image_xy_bg.jpg","zxian_yu/image_xy_bg02.jpg","treasure/imge_xb_bgbottom.png","zxian_yu/image_xy_bg04.jpg","zxian_yu/image_xy_xsbg.jpg"],1,0,6e4],[1203,2,oe,null,["res/atlas/store.atlas","res/atlas/li_dong.atlas","res/atlas/common.atlas"],0,0,6e4],[1208,2,Jt,ui.ChildrensDayFirstPayAlertUI,["res/atlas/dragon_boat_day.atlas","res/atlas/common.atlas","dragon_boat_day/image_txwm_08.png"],0,804,6e4],[1215,2,ee,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1216,2,ie,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1228,2,ye,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1226,2,ue,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1227,2,de,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1229,2,ae,ui.ChildrenPartyAlertUI,["res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],0,815,6e4],[1231,2,fe,ui.HequPartyAlertUI,["res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/he_qu.atlas"],0,816,6e4],[1230,2,re,ui.ChildrenPartyBigAwardAlertUI,["res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],0,0,6e4],[1232,2,_e,ui.HequPartyBigAwardAlertUI,["res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/he_qu.atlas"],0,0,6e4],[1244,2,Me,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1240,2,Be,ui.ChildrensDayFirstPayAlertUI,["res/atlas/student_day.atlas","res/atlas/common.atlas","student_day/image_sypd_bg12.png"],0,828,6e4],[1251,2,De,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1249,2,ke,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1250,2,Ee,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1255,2,Ue,ui.BarPartyAlertUI,["bar_day/image_sypd_02.png","res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],0,836,6e4],[1256,2,Oe,ui.BarPartyBigAwardAlertUI,["bar_day/image_sypd_01.png","res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],0,0,6e4],[1390,2,t.family_party.MidAutumnPartyAlert,ui.MidAutumnPartyAlertUI,["bar_day/image_sypd_02.png","res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],0,925,6e4],[1391,2,t.family_party.MidAutumnBigAwardAlert,ui.MidAutumnBigAwardAlertUI,["bar_day/image_sypd_01.png","res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],0,0,6e4],[1426,2,t.family_party.DoubleNinePartyAlert,ui.DoubleNinePartyAlertUI,["bar_day/image_sypd_02.png","res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],0,946,6e4],[1427,2,t.family_party.DoubleNineBigAwardAlert,ui.DoubleNineBigAwardAlertUI,["bar_day/image_sypd_01.png","res/atlas/family_party.atlas","res/atlas/common.atlas","res/atlas/childrens_day.atlas"],0,0,6e4],[401,2,Fe,null,["res/atlas/common.atlas"],0,0,6e4],[1162,2,We,null,["res/atlas/common.atlas","res/atlas/divinatory_card.atlas"],0,0,6e4],[1164,2,qe,null,["res/atlas/common.atlas"],0,0,6e4],[1185,2,Ye,null,["res/atlas/common.atlas"],0,0,6e4],[145,2,li,null,["res/atlas/common.atlas","res/atlas/day_pay.atlas","day_pay/image_rchl_bg.png"],0,111,6e4],[458,2,oi,null,["res/atlas/common.atlas","res/atlas/archive.atlas"],0,0,6e4],[470,2,ai,null,["res/atlas/archive.atlas","res/atlas/archive.atlas"],0,0,6e4],[471,2,ri,null,["res/atlas/dragon.atlas"],0,286,6e4],[143,2,hi,null,["res/atlas/common.atlas","res/atlas/mission.atlas","mission/bj_tianguan_1.jpg","mission/image_common_zz2.png"],0,0,6e4],[442,2,di,null,["res/atlas/common.atlas"],0,0,6e4],[739,2,gn,null,["res/atlas/common.atlas","res/atlas/fuliguan.atlas"],0,472,6e4],[118,2,bi,null,["res/atlas/first_pay.atlas","first_pay/image_sc_dt.png"],0,51,6e4],[196,2,Bi,null,["treasure/title0_xunbao.png","res/atlas/common.atlas"],0,0,6e4],[197,2,Si,null,["res/atlas/common.atlas"],0,0,6e4],[198,2,Mi,null,["res/atlas/common.atlas"],0,0,6e4],[315,2,Hi,null,["treasure/title0_xunbao.png","res/atlas/common.atlas"],0,0,6e4],[316,2,Di,null,["res/atlas/common.atlas"],0,0,6e4],[318,2,Li,null,"res/atlas/common.atlas",0,0,6e4],[336,2,zi,null,["treasure/title0_xunbao.png","res/atlas/common.atlas"],0,0,6e4],[337,2,Fi,null,["res/atlas/common.atlas"],0,0,6e4],[339,2,Ni,null,"res/atlas/common.atlas",0,0,6e4],[342,2,Wi,null,["res/atlas/common.atlas"],0,0,1e4],[357,2,Yi,null,["res/atlas/limit_pack.atlas"],0,214,6e4],[360,2,Zi,null,["res/atlas/common.atlas","invitation/image_yqhy_bg.png"],0,227,6e4],[363,2,Xi,null,["res/atlas/common.atlas","firt_login_alert/image_tc_bg1.png","res/atlas/firt_login_alert.atlas"],0,0,6e4],[364,2,Ji,null,"real_name/image_smrz_bg.png",0,228,6e4],[365,2,Cn,null,"official_account/image_gzhl_bg.png",0,653,6e4],[378,2,Ki,null,"res/atlas/fight_talisman_and_money_cat.atlas",0,0,6e4],[379,2,$i,null,"res/atlas/fight_talisman_and_money_cat.atlas",0,240,6e4],[380,2,tn,null,"res/atlas/fight_talisman_and_money_cat.atlas",0,0,6e4],[381,2,en,null,"res/atlas/fight_talisman_and_money_cat.atlas",0,0,6e4],[386,2,nn,null,["res/atlas/gloves.atlas","gloves/image_wxst_bg.jpg"],0,0,6e4],[387,2,sn,null,["res/atlas/gloves.atlas","gloves/image_wxst_bg1.jpg"],0,241,6e4],[388,2,on,null,["res/atlas/gloves.atlas","gloves/image_wxst_bg2.jpg","gloves/image_wxst_bg3.jpg"],0,0,6e4],[389,2,an,null,"res/atlas/gloves.atlas",0,0,6e4],[409,2,ln,null,["res/atlas/prevent_fool.atlas"],0,247,6e4],[453,2,un,null,["res/atlas/common.atlas"],0,0,6e4],[472,2,yn,null,["res/atlas/purchase.atlas"],0,287,6e4],[396,2,Vn,null,["res/atlas/common.atlas"],0,0,6e4],[397,2,Zn,null,["res/atlas/common.atlas"],0,0,6e4],[399,2,Jn,null,["res/atlas/common.atlas"],0,0,6e4],[36,2,Sn,null,"res/atlas/common.atlas",0,0,6e4],[94,2,Pn,null,"res/atlas/common.atlas",0,0,6e4],[95,2,An,null,["res/atlas/common.atlas","res/atlas/treasure.atlas","treasure/image_xb_bg2.jpg","treasure/imge_xb_bgbottom.png","treasure/imge_xb_bgmiddle1.png","treasure/imge_xb_bgmiddle2.png","treasure/imge_xb_bgtop.png","treasure/title0_xunbao.png","treasure/title1_xunbao.png"],0,0,6e4],[133,2,Hn,null,["res/atlas/common.atlas","res/atlas/offline_exp.atlas","res/atlas/line_clear_out.atlas","offline_exp/dt_lxjy_3.png"],0,107,6e4],[191,2,Un,null,"res/atlas/common.atlas",0,0,6e4],[838,2,rs,null,["res/atlas/common.atlas"],0,543,6e4],[945,2,cs,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/zadan.atlas"],0,0,6e4],[946,2,ps,null,["res/atlas/common.atlas"],0,0,6e4],[944,2,us,null,["res/atlas/common.atlas"],0,0,6e4],[1020,2,ds,null,["thunderbolt_buy/image_ltzn_bg01.jpg"],0,677,6e4],[1159,2,gs,null,["res/atlas/common.atlas","res/atlas/fly_up.atlas"],0,0,6e4],[1219,2,fs,null,"res/atlas/win.atlas",0,0,0],[96,2,_s,null,["res/atlas/offline_exp.atlas","res/atlas/common.atlas","offline_exp/dt_lxjy_3.png"],0,0,6e4],[1178,2,t.forbiddenBoss.ForbiddenBossBagAlert,null,["res/atlas/common.atlas"],0,0,6e4],[1179,2,t.forbiddenBoss.ForbiddenBossRankAlert,null,["res/atlas/common.atlas"],0,0,6e4],[1180,2,t.forbiddenBoss.ForbiddenBossInspireAlert,null,["res/atlas/common.atlas"],0,0,6e4],[1181,2,t.forbiddenBoss.ForbiddenBossResultAlert,null,["res/atlas/common.atlas"],0,0,6e4],[1182,2,t.forbiddenBoss.ForbiddenBossFinalAlert,null,["res/atlas/common.atlas"],0,0,6e4],[489,2,Ss,null,"res/atlas/common.atlas",0,0,6e4],[483,2,ws,null,["res/atlas/marry.atlas","marry/image_xyxt_bg.png"],0,0,6e4],[635,2,js,null,["res/atlas/marry.atlas","marry/image_xyxt_bg.png"],0,0,6e4],[636,2,qs,null,["res/atlas/common.atlas"],0,0,6e4],[484,2,Ps,null,["res/atlas/marry.atlas","marry/txt_xyxt_02.png","marry/txt_xyxt_03.png","marry/txt_xyxt_hjjz.png"],0,0,6e4],[485,2,As,null,"res/atlas/common.atlas",0,0,6e4],[486,2,Rs,null,"res/atlas/common.atlas",0,0,6e4],[501,2,Is,null,["res/atlas/marry.atlas","marry/image_xyxt_bg.png","marry/image_xyxt_bg05.jpg"],0,0,6e4],[510,2,ks,null,["res/atlas/marry.atlas","marry/image_xyxt_bg06.png"],0,0,6e4],[503,2,bs,null,["res/atlas/marry.atlas","marry/image_xyxt_bg02.jpg"],0,313,6e4],[504,2,vs,null,"res/atlas/marry.atlas",0,0,6e4],[526,2,Ds,null,["res/atlas/common.atlas"],0,0,6e4],[567,2,Ws,null,["res/atlas/common.atlas"],0,0,6e4],[615,2,Ns,null,["res/atlas/yuan_shen.atlas","yuan_shen/image_ysxt_bg04.jpg"],0,0,6e4],[653,2,zs,null,["res/atlas/yuan_shen.atlas","res/atlas/equip_part.atlas"],0,0,6e4],[842,2,Ys,null,["res/atlas/common.atlas"],0,0,6e4],[843,2,Vs,null,["res/atlas/common.atlas"],0,0,6e4],[1081,2,Qs,null,["res/atlas/common.atlas"],0,0,6e4],[1129,2,eo,null,["res/atlas/common.atlas"],0,0,6e4],[1130,2,io,null,["res/atlas/common.atlas"],0,0,6e4],[1132,2,no,null,["res/atlas/common.atlas"],0,0,6e4],[1133,2,so,null,["res/atlas/common.atlas"],0,0,6e4],[1138,2,lo,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/faerie_demon.atlas"],0,0,6e4],[1137,2,ro,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1183,1,ho,null,["res/atlas/marry_arena.atlas","res/atlas/pvp_tab.atlas"],1,779,6e4],[1187,1,po,null,["res/atlas/marry_arena.atlas"],1,0,6e4],[1184,2,co,null,["res/atlas/marry_arena.atlas"],1,0,6e4],[586,2,uo,null,"res/atlas/common.atlas",0,0,6e4],[98,2,To,null,["res/atlas/team_battle.atlas","team_battle/bj_zhuduifuben_1.jpg"],0,0,6e4],[117,2,Io,null,"res/atlas/common.atlas",0,0,6e4],[303,2,xo,null,["res/atlas/common.atlas"],0,0,6e4],[344,2,_o,null,"res/atlas/common.atlas",0,0,6e4],[353,2,yo,null,["res/atlas/team_battle.atlas"],0,0,6e4],[354,2,go,null,["res/atlas/team_battle.atlas","team_battle/image_zdfb_bg1.jpg"],0,0,6e4],[355,2,fo,null,["res/atlas/team_battle.atlas"],0,0,6e4],[406,2,Ao,null,["res/atlas/common.atlas"],0,0,6e4],[412,2,ko,null,["res/atlas/common.atlas"],0,0,6e4],[416,2,Ro,null,["res/atlas/common.atlas"],0,0,6e4],[570,2,Do,null,["res/atlas/common.atlas"],0,0,6e4],[571,2,Lo,null,["res/atlas/team_battle.atlas"],0,0,6e4],[572,2,Ho,null,["res/atlas/common.atlas"],0,0,6e4],[576,2,Oo,null,["res/atlas/common.atlas"],0,0,6e4],[765,2,Go,null,["res/atlas/common.atlas"],0,0,6e4],[766,2,Fo,null,["res/atlas/warband.atlas"],0,0,6e4],[767,2,No,null,["res/atlas/common.atlas"],0,0,6e4],[768,2,zo,null,["res/atlas/common.atlas"],0,0,6e4],[762,2,Wo,null,["res/atlas/common.atlas"],0,0,6e4],[763,2,jo,null,["res/atlas/common.atlas"],0,0,6e4],[770,2,Vo,null,["res/atlas/warband.atlas"],0,0,6e4],[820,2,Zo,null,["res/atlas/common.atlas"],0,0,6e4],[1083,2,ma,null,["res/atlas/warband.atlas"],0,0,6e4],[861,2,Xo,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/fire_contention.atlas"],0,0,6e4],[866,2,ta,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/fire_contention.atlas"],0,0,6e4],[867,2,ea,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/fire_contention.atlas"],0,0,6e4],[868,2,ia,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/fire_contention.atlas"],0,0,6e4],[980,2,ya,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1082,2,ga,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[964,1,oa,null,["res/atlas/common.atlas"],0,0,6e4],[958,2,ra,null,["res/atlas/common.atlas"],0,0,6e4],[963,2,pa,null,["res/atlas/common.atlas"],0,0,6e4],[960,2,ua,null,["res/atlas/common.atlas"],0,0,6e4],[957,2,da,null,["res/atlas/common.atlas"],0,0,6e4],[987,2,_a,null,["res/atlas/common.atlas"],0,0,6e4],[1171,2,t.sceneTeam.SceneTeamAlert,null,["res/atlas/common.atlas"],0,0,6e4],[1172,2,t.sceneTeam.SceneTeamCreateAlert,null,["res/atlas/team_battle.atlas"],0,0,6e4],[1173,2,t.sceneTeam.SceneTeamInviteAlert,null,["res/atlas/common.atlas"],0,0,6e4],[913,2,sa,null,"res/atlas/win.atlas",0,0,0],[148,2,Aa,null,["res/atlas/common.atlas"],0,0,6e4],[39,2,ba,null,"res/atlas/common.atlas",0,0,6e4],[1495,2,Ia,null,["res/atlas/common.atlas"],0,0,6e4],[136,2,Ba,null,["res/atlas/common.atlas"],0,0,6e4],[137,2,Sa,null,["res/atlas/common.atlas"],0,0,6e4],[140,2,wa,null,["res/atlas/rune_copy.atlas","rune_copy/image_ygfz_bg.jpg"],0,0,6e4],[141,2,Pa,null,["res/atlas/common.atlas","res/atlas/rune.atlas","rune/image_xf_bg.png"],0,0,6e4],[204,2,ka,null,"res/atlas/common.atlas",0,0,6e4],[205,2,Ea,null,"res/atlas/common.atlas",0,0,6e4],[206,2,Da,null,"res/atlas/common.atlas",0,0,6e4],[207,2,La,null,["res/atlas/left_top.atlas","res/atlas/common.atlas","res/atlas/ladder.atlas","ladder/image_ttdf_bg.jpg","ladder/imge_ttdf_vsbg.jpg","ladder/txt_ttdf_txt.png"],0,0,6e4],[213,2,Ha,null,"res/atlas/lose.atlas",0,0,6e4],[225,2,Fa,null,["res/atlas/common.atlas"],0,0,6e4],[226,2,Na,null,["res/atlas/common.atlas"],0,0,6e4],[253,2,za,null,"res/atlas/win.atlas",0,0,0],[254,2,Wa,null,["res/atlas/common.atlas","res/atlas/dungeon.atlas","dungeon/msz_biaoti_3.png","dungeon/msz_biaoti_5.png"],0,0,6e4],[419,2,qa,null,["res/atlas/common.atlas"],0,0,6e4],[420,2,Ya,null,["res/atlas/common.atlas"],0,0,6e4],[481,2,Xa,null,["res/atlas/peak_duel.atlas","peak_duel/image_dfdf_bg3.jpg"],0,0,6e4],[482,2,Qa,null,["res/atlas/common.atlas"],0,0,6e4],[1258,2,Ta,null,"res/atlas/common.atlas",0,0,6e4],[1143,2,$a,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[1144,2,tr,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[1145,2,er,null,["res/atlas/single_dog.atlas","res/atlas/zxian_yu.atlas","treasure/title0_xunbao.png","zxian_yu/image_xy_bg.jpg","zxian_yu/image_xy_bg02.jpg","treasure/imge_xb_bgbottom.png","zxian_yu/image_xy_bg04.jpg","zxian_yu/image_xy_xsbg.jpg"],0,0,6e4],[1148,2,ir,null,["res/atlas/store.atlas","res/atlas/li_dong.atlas","res/atlas/common.atlas"],0,0,6e4],[1151,2,sr,ui.ChildrensDayFirstPayAlertUI,["res/atlas/common.atlas","summer_day/image_zltq_01.png"],0,769,6e4],[1166,2,dr,null,["res/atlas/vx_module.atlas"],0,784,6e4],[1165,2,yr,null,["res/atlas/vx_module.atlas"],0,784,6e4],[1167,2,gr,null,["res/atlas/vx_module.atlas"],0,784,6e4],[1168,2,fr,null,["res/atlas/vx_module.atlas"],0,784,6e4],[1341,2,Pl,null,["res/atlas/vx_module.atlas"],0,891,6e4],[1190,2,mr,null,["res/atlas/vx_module.atlas"],0,0,6e4],[1191,2,_r,null,["res/atlas/vx_module.atlas"],0,786,6e4],[1192,2,vr,null,["res/atlas/vx_module.atlas"],0,0,6e4],[1193,2,br,null,["res/atlas/wx_lost.atlas"],0,0,6e4],[1254,2,Tr,null,["res/atlas/common.atlas"],0,0,6e4],[1257,2,Ir,null,["res/atlas/yuan_shen.atlas"],0,0,6e4],[438,2,Br,null,["res/atlas/jiu_xiao_ling.atlas","jiu_xiao_ling/image_jxl_bg01.jpg"],0,0,6e4],[439,2,Sr,null,["res/atlas/jiu_xiao_ling.atlas","jiu_xiao_ling/image_jxl_bg01.jpg"],0,0,6e4],[440,2,Mr,null,["res/atlas/jiu_xiao_ling.atlas","jiu_xiao_ling/image_jxl_bg01.jpg"],0,0,6e4],[441,2,wr,null,["res/atlas/jiu_xiao_ling.atlas","jiu_xiao_ling/image_jxl_bg01.jpg"],0,0,6e4],[1056,2,Fr,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1057,2,Nr,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/peak_duel.atlas","res/atlas/union_war.atlas","union_war/image_xmz_bg23.jpg"],0,0,6e4],[1058,2,zr,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1053,2,Wr,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1054,2,jr,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1055,2,qr,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1298,2,Qr,null,["res/atlas/win.atlas","res/atlas/lose.atlas"],0,0,0],[350,2,Gr,null,["res/atlas/common.atlas"],0,224,6e4],[1266,2,t.foreign_boss_panel.ForeignBossAutoAlert,null,["res/atlas/common.atlas"],0,0,6e4],[1274,2,Rr,null,["res/atlas/common.atlas"],0,0,6e4],[1287,2,t.showEquip.ShowEquipMasterAlert,ui.ShowEquipMasterAlertUI,["res/atlas/show_equip.atlas"],0,0,6e4],[1288,2,t.showEquip.ShowEquipSkillAlert,ui.ShowEquipSkillAlertUI,["res/atlas/show_equip.atlas"],0,0,6e4],[1289,2,t.showEquip.ShowEquipConvertAlert,null,["res/atlas/common.atlas"],0,0,6e4],[1291,2,Kr,null,["res/atlas/extreme_equip.atlas","res/atlas/common.atlas"],0,0,6e4],[1299,2,el,null,["res/atlas/extreme_equip.atlas","res/atlas/common.atlas"],0,0,6e4],[1296,2,t.immortalContest.ImmortalContestWorship,ui.ImmortalContestWorshipUI,["res/atlas/immortal_contest.atlas"],0,855,6e4],[1295,2,t.immortalContest.ImmortalContestRank,ui.ImmortalContestWorshipUI,["res/atlas/immortal_contest.atlas"],0,0,6e4],[1294,2,t.immortalContest.ImmortalContestPreRank,ui.ImmortalContestPreRankAlertUI,["res/atlas/immortal_contest.atlas"],0,0,6e4],[1293,2,t.immortalContest.ImmortalContestReward,ui.ImmortalContestRewardAlertUI,["res/atlas/immortal_contest.atlas"],0,0,6e4],[1300,2,tl,null,["res/atlas/union_war.atlas","union_war/image_xmz_bg26.jpg"],0,0,0],[1302,2,t.update_alert.UpdateAlert,null,["res/atlas/common.atlas"],0,0,6e4],[1326,2,xl,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1309,2,cl,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[1310,2,pl,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas"],0,0,6e4],[1311,2,ul,null,["res/atlas/single_dog.atlas","res/atlas/zxian_yu.atlas","treasure/title0_xunbao.png","zxian_yu/image_xy_bg.jpg","zxian_yu/image_xy_bg02.jpg","treasure/imge_xb_bgbottom.png","zxian_yu/image_xy_bg04.jpg","zxian_yu/image_xy_xsbg.jpg"],1,0,6e4],[1312,2,Sl,null,["res/atlas/store.atlas","res/atlas/li_dong.atlas","res/atlas/common.atlas"],0,0,6e4],[1317,2,_l,ui.ChildrensDayFirstPayAlertUI,["res/atlas/anniversary_day.atlas","res/atlas/common.atlas","anniversary_day/image_txwm_08.png"],0,878,6e4],[1324,2,Il,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1325,2,Cl,null,["res/atlas/single_dog.atlas","res/atlas/common.atlas","res/atlas/common_sg.atlas"],0,0,6e4],[1347,2,t.ruins.RuinsBigSelectAlert,ui.RuinsBigSelectAlertUI,["res/atlas/ruins.atlas"],0,0,6e4],[1348,2,t.ruins.RuinsBigPreviewAlert,ui.RuinsBigPreviewAlertUI,["res/atlas/ruins.atlas"],0,0,6e4],[1349,2,t.ruins.RuinsShopAlert,null,["res/atlas/ruins.atlas"],0,0,6e4],[1366,2,Ul,null,["res/atlas/red_bag.atlas"],0,0,6e4],[1365,2,Hl,null,["res/atlas/red_bag.atlas"],0,0,6e4],[1367,2,Ll,null,["res/atlas/red_bag.atlas"],0,0,6e4],[1371,2,Ol,null,["res/atlas/common.atlas","res/atlas/common_sg.atlas","res/atlas/union_war.atlas"],0,0,6e4],[1388,2,Fl,ui.FightSoulBuyAlertUI,["res/atlas/common.atlas","res/atlas/fight_soul_buy.atlas","fight_soul_buy/image_zhzg_01.png"],0,0,6e4],[1451,2,Nl,null,["res/atlas/common.atlas","res/atlas/wx_add_service.atlas","fight_soul_buy/image_zhzg_01.png"],0,0,6e4],[1523,2,zl,ui.EndNianPartyAlertUI,["res/atlas/family_party.atlas"],0,1017,6e4],[1524,2,Wl,ui.EndNianBigAwardAlertUI,["res/atlas/family_party.atlas"],0,0,6e4]]}e=t.subpack||(t.subpack={}),i=t.single_dog_continuous_pay.SingleDogContinuousPayPanel,n=t.single_dog_cumulate_pay.SingleDogCumulatePayPanel,s=t.single_dog_seven_days_consume.SingleDogSevenDaysConsumePanel,o=t.single_dog_seven_days_pay.SingleDogSevenDaysPayPanel,a=t.single_dog_single_pay.SingleDogSinglePayPanel,r=t.single_dog_treasure.SingleDogTreasurePanel,l=t.single_dog_treasure.SingleDogTreasureRankAlert,h=t.single_dog_treasure.SingleDogTreasureRankAwardAlert,c=t.single_dog_treasure.SingleDogTreasureAlert,p=t.single_dog_festival.SingleDogFestConLoginPanel,u=t.single_dog_festival.SingleDogFestConvertPanel,d=t.single_dog_festival.SingleDogFestHilarityPanel,y=t.single_dog_festival.SingleDogFestDoubleRewardPanel,g=t.single_dog_festival.SingleDogFestDailyRewardPanel,f=t.single_dog_festival.SingleDogFestFirstPayAlert,_=t.single_dog_festival.SingleDogFestAlert,m=t.single_dog_collection.SingleDogCollectionPanel,v=t.single_dog_good_man.SingleDogGoodManPanel,b=t.single_dog_sart.SingleDogSartPanel,T=t.single_dog_score_rank.SingleDogScoreRankPanel,I=t.single_dog_yu_lan.SingleDogYuLanPanel,C=t.single_dog_good_man.SingleDogGoodManAlert,x=t.single_dog_good_man.SingleDogGoodManJiLuAlert,B=t.single_dog_sart.SingleDogSartAlert,S=t.single_dog_good_man.SingleDogGoodManHalfAlert,M=t.single_dog_good_man.SingleDogGoodManSuoAlert,w=t.single_dog_store.SingleDogStorePanel,P=t.single_dog_treasure.SingleDogTreasureSpecialAlert,A=t.zerobuy.ZerobuyPanel,R=t.zhiZhenFestival.ZhiZhenFestivalDailyRewardPanel,k=t.zhiZhenSinglePay.ZhiZhenSinglePayPanel,E=t.zhiZhenCumulatePay.ZhiZhenCumulatePayPanel,D=t.zhiZhenContinuousPay.ZhiZhenContinuousPayPanel,L=t.zhiZhenFestival.ZhiZhenFestivalHilarityPanel,H=t.ZhiZhenPayRank.ZhiZhenPayRankPanel,U=t.zhiZhenStore.ZhiZhenStorePanel,O=t.zhiZhenStar.ZhiZhenStarPanel,G=t.zhiZhenGoodMan.ZhiZhenGoodManPanel,F=t.zhiZhenYuLan.ZhiZhenYuLanPanel,N=t.zhiZhenScoreRank.ZhiZhenScoreRankPanel,z=t.zhiZhenFestival.ZhiZhenFestivalFirstPayAlert,W=t.zhiZhenStar.ZhiZhenStarAlert,j=t.zhiZhenGoodMan.ZhiZhenGoodManAlert,q=t.zhiZhenGoodMan.ZhiZhenGoodManJiLuAlert,Y=t.zadan.ZaDanPanel,V=t.zadan.ZaDanRank,Z=t.zadan.ZaDanShop,X=t.zadan.ZaDanTask,J=t.zadan.ZaDanExchange,Q=t.zadan.ZaDanPreview,K=t.zadan.ZaDanRewards,$=t.zadan.ZaDanShopAlert,tt=t.he_qu_continuous_pay.HeQuContinuousPayPanel,et=t.he_qu_cumulate_pay.HeQuCumulatePayPanel,it=t.he_qu_festival.HeQuFestFirstPayAlert,nt=t.he_qu_festival.HeQuFestConLoginPanel,st=t.he_qu_festival.HeQuFestDailyRewardPanel,ot=t.he_qu_festival.HeQuFestHilarityPanel,at=t.he_qu_festival.HeQuFestDoubleRewardPanel,rt=t.he_qu_online_reward.HeQuOnLineRewardPanel,lt=t.he_qu_xunbao_happy.HeQuXunbaoHappyPanel,ht=t.hit_engineer.HitEngineerPanel,ct=t.hit_engineer.HitEngineerKillerPanel,pt=t.hit_engineer.HitEngineerAwardPanel,ut=t.hit_engineer.HitEngineerLogAlert,dt=t.hit_engineer.HitEngineerShopAlert,yt=t.hit_engineer.HitEngineerStageAwardAlert,gt=t.hit_engineer.HitEngineerTxtAlert,ft=t.hit_engineer.HitEngineerLastAwardalert,_t=t.festival.FestBaseStoreAlert,mt=t.zhi_zhen_festival.ZhiZhenFestDoubleRewardPanel,vt=t.zhi_zhen_festival.ZhiZhenFestConvertPanel,bt=t.zhi_zhen_festival.ZhiZhenFestConvertPanel1,Tt=t.zhi_zhen_festival.ZhiZhenFestAlert,It=t.zhi_zhen_festival.ZhiZhenFestAlert1,Ct=t.mysterious_store.MysteriousStoreAlert,xt=t.mysterious_store.MysteriousStorePanel,Bt=t.treasureLand.TreasureLandPanel,St=t.treasureLand.TreasureLandBagAlert,Mt=t.treasureLand.TreasureLandRankPanel,wt=t.treasureLand.TreasureLandTaskPanel,Pt=t.treasureLand.TreasureLandDiceAlert,At=t.mysterious_store.MysteriousStoreBuyAlert,Rt=t.treasureLand.TreasureLandGetAlert,kt=t.family_party.FamilyPartyAlert,Et=t.family_party.FamilyPartyAwardAlert,Dt=t.family_party.FamilyPartyBigAwardAlert,Lt=t.zhi_zhen_festival.ZhiZhenFestFestConLoginPanel,Ht=t.childrens_day_pay_rank.ChildrensDayPayRankPanel,Ut=t.childrens_day_continuous_pay.ChildrensDayContinuousPayPanel,Ot=t.childrens_day_cumulate_pay.ChildrensDayCumulatePayPanel,Gt=t.childrens_day_seven_days_consume.ChildrensDaySevenDaysConsumePanel,Ft=t.childrens_day_seven_days_pay.ChildrensDaySevenDaysPayPanel,Nt=t.childrens_day_single_pay.ChildrensDaySinglePayPanel,zt=t.childrens_day_treasure.ChildrensDayTreasurePanel,Wt=t.childrens_day_treasure.ChildrensDayTreasureRankAlert,jt=t.childrens_day_treasure.ChildrensDayTreasureRankAwardAlert,qt=t.childrens_day_treasure.ChildrensDayTreasureAlert,Yt=t.childrens_day_festival.ChildrensDayFestConLoginPanel,Vt=t.childrens_day_festival.ChildrensDayFestHilarityPanel,Zt=t.childrens_day_festival.ChildrensDayFestDoubleRewardPanel,Xt=t.childrens_day_festival.ChildrensDayFestDailyRewardPanel,Jt=t.childrens_day_festival.ChildrensDayFestFirstPayAlert,Qt=t.childrens_day_good_man.ChildrensDayGoodManPanel,Kt=t.childrens_day_star.ChildrensDayStarPanel,$t=t.childrens_day_score_rank.ChildrensDayScoreRankPanel,te=t.childrens_day_yu_lan.ChildrensDayYuLanPanel,ee=t.childrens_day_good_man.ChildrensDayGoodManAlert,ie=t.childrens_day_good_man.ChildrensDayGoodManJiLuAlert,ne=t.childrens_day_star.ChildrensDayStarAlert,se=t.childrens_day_store.ChildrensDayStorePanel,oe=t.childrens_day_treasure.ChildrensDayTreasureSpecialAlert,ae=t.family_party.ChildrenPartyAlert,re=t.family_party.ChildrenPartyBigAwardAlert,le=t.he_qu_good_man.HeQuGoodManPanel,he=t.he_qu_star.HeQuStarPanel,ce=t.he_qu_score_rank.HeQuScoreRankPanel,pe=t.he_qu_yu_lan.HeQuYuLanPanel,ue=t.he_qu_good_man.HeQuGoodManAlert,de=t.he_qu_good_man.HeQuGoodManJiLuAlert,ye=t.he_qu_star.HeQuStarAlert,ge=t.he_qu_store.HeQuStorePanel,fe=t.family_party.HeQuPartyAlert,_e=t.family_party.HeQuPartyBigAwardAlert,me=t.bar_day_festival.BarDayFestConvertPanel,ve=t.bar_day_continuous_pay.BarDayContinuousPayPanel,be=t.bar_day_cumulate_pay.BarDayCumulatePayPanel,Te=t.bar_day_festival.BarDayFestConLoginPanel,Ie=t.bar_day_festival.BarDayFestHilarityPanel,Ce=t.bar_day_festival.BarDayFestDoubleRewardPanel,xe=t.bar_day_festival.BarDayFestDailyRewardPanel,Be=t.bar_day_festival.BarDayFestFirstPayAlert,Se=t.bar_day_store.BarDayStorePanel,Me=t.bar_day_festival.BarDayFestAlert,we=t.bar_day_good_man.BarDayGoodManPanel,Pe=t.bar_day_star.BarDayStarPanel,Ae=t.bar_day_score_rank.BarDayScoreRankPanel,Re=t.bar_day_yu_lan.BarDayYuLanPanel,ke=t.bar_day_good_man.BarDayGoodManAlert,Ee=t.bar_day_good_man.BarDayGoodManJiLuAlert,De=t.bar_day_star.BarDayStarAlert,Le=t.bar_day_single_pay.BarDaySinglePayPanel,He=t.bar_day_seven_days_consume.BarDaySevenDaysConsumePanel,Ue=t.family_party.BarPartyAlert,Oe=t.family_party.BarPartyBigAwardAlert,Ge=t.announcement.AnnouncementPanel,Fe=t.announcement.AnnouncementAlert,Ne=t.divinatory_card.DivinatoryCardPanel,ze=t.divinatory_card.DivinatoryStrongPanel,We=t.divinatory_card.DivinatoryCardAlert,je=t.divinatory_card.DivinatoryBossPanel,qe=t.divinatory_card.DivinatoryCardSuitAlert,Ye=t.divinatory_card.DivinatoryBossIncomeAlert,Ve=t.divinatory_card.DivinatoryBossRBPanel,Ze=t.discountGift.discountGiftPanel,Xe=t.bigTower.BigTowerPlanel,Je=t.bigTower.BigTowerLevelPanle,Qe=t.cumulate_pay.CumulatePayPanel,Ke=t.continue_pay.ContinuePanel,$e=t.cousume_reward.ConsumeRewardPanel,ti=t.cumulate2_pay.CumulatePay2Panel,ei=t.every_day_rebate.EveryDayRebatePanel,ii=t.cumulatePay_shenHun.CumulatePayShenHunPanel,ni=t.cumulatePay_tianZhu.CumulatePayTianZhuPanel,si=t.archive.ArchivePanel,oi=t.archive.ArchiveParticularAlert,ai=t.archive.ArchiveActiveAlert,ri=t.dragon.DragonAlert,li=t.day_pay.DayPayPanel,hi=t.mission.MissionRankAlert,ci=t.mission.MissionPanel,pi=t.mission.MissionMaskPanel,di=t.mission.MissionAskForHelpAlert,yi=t.singlePay.SinglePayPanel,gi=t.openAward.OpenAwardPanel,fi=t.onlineGift.OnlineGiftPanel,_i=t.sevenDayGift.SevenDayGiftPanel,mi=t.sign.SignPanel,vi=t.monthCard.MonthCardPanel,bi=t.first_pay.FirstPayPanel,Ti=t.invest_reward.InvestLoginPanel,Ii=t.invest_reward.InvestRecruitPanel,Ci=t.invest_reward.InvestGrowthPanel,xi=t.pay_reward.PayRewardPanel,Bi=t.pay_reward.PayRewardAlert,Si=t.pay_reward.PayRewardRankAlert,Mi=t.pay_reward.PayRewardMyRecordAlert,wi=t.kuanghuan.KuangHuanLevelPanel,Pi=t.kuanghuan.KuangHuanPanel,Ai=t.kuanghuan.KuangHuanPowerPanel,Ri=t.day_consume_reward.DayConsumeRewardPanel,ki=t.halfMonthGift.HalfMonthGiftPanel,Ei=t.rotary_table_soraing.RotaryTableSoaringPanel,Di=t.rotary_table_soraing.RotaryTableSoaringRankAlert,Li=t.rotary_table_soraing.RotaryTableSoaringRankAwardAlert,Hi=t.rotary_table_soraing.RotaryTableSoaringRewardAlert,Ui=t.login_reward.LoginRewardPanel,Oi=t.week_login.WeekLoginPanel,Gi=t.rotary_table_jiuzhou.RotaryTableJiuZhouPanel,Fi=t.rotary_table_jiuzhou.RotaryTableJiuZhouRankAlert,Ni=t.rotary_table_jiuzhou.RotaryTableJiuZhouRankAwardAlert,zi=t.rotary_table_jiuzhou.RotaryTableJiuZhouRewardAlert,Wi=t.login_reward.LoginRewardTipAlert,ji=t.weekConsume.WeekConsumePanel,qi=t.repeatPay.RepeatPayPanel,Yi=t.limit_pack.LimitPackAlert,Vi=t.payRank.PayRankPanel,Zi=t.invitation.InvitationAlert,Xi=t.first_login_alert_panel.FirstLoginAlertPanel,Ji=t.realName.RealNameAlert,Qi=t.one_buy.OneBuyPanel,Ki=t.fight_talisman.FightTalismanAlert,$i=t.fight_talisman.FightTalismanBuyAlert,tn=t.money_cat.MoneyCatAlert,en=t.money_cat.MoneyCatBuyAlert,nn=t.gloves.GlovesPanel,sn=t.gloves.GlovesBuyAlert,on=t.gloves.GlovesStoneBuyAlert,an=t.gloves.GlovesTipsAlert,rn=t.prevent_fool_question.PreventFoolPanel,ln=t.prevent_fool_question.PreventFoolAlert,hn=t.the_carnival.TheCarnivalPanel,cn=t.familiars_down.FamiliarsDownPanel,pn=t.newOfficialAccount.NewOfficialAccountPanel,un=t.the_carnival.TheCarnivalTaskAlert,dn=t.redPack.RedPackPanel,yn=t.rush_to_purchase.RushToPurchaseAlert,gn=t.welfare_officer.WelfareOfficerPanel,fn=t.qq.QQLobbyStartPanel,_n=t.qq.QQLobbyDailyPanel,mn=t.qq.QQLobbyLevelPanel,vn=t.qq.QQBlueIntroPanel,bn=t.qq.QQBlueStartPanel,Tn=t.qq.QQBlueDailyPanel,In=t.qq.QQBlueLevelPanel,Cn=t.officialAccount.OfficialAccountAlert,xn=t.zhizun.ZhizunPanel,Bn=t.goldBody.GoldBodyPanel,Sn=t.goldBody.GoldBodyUnbeatenAlert,Mn=t.rankingList.RankListPlane,wn=t.treasure.TreasurePanel,Pn=t.treasure.TreasureAlert,An=t.treasure.TreasureGetAlert,Rn=t.treasure.TreasureChangePanel,kn=t.treasure.TreasureTalismanPanel,En=t.treasure.TreasureBagPanel,Dn=t.treasure.TreasureDianFengPanel,Ln=t.treasure.TreasureZhiZunPanel,Hn=t.lineClearOut.LineClearOutAlert,Un=t.mission.SprintRankAlert,On=t.gushen.GuShenPanel,Gn=t.soaring_rank.SoaringRankPanel,Fn=t.soaring_cumulatePay.SoaringCumulatePayPanel,Nn=t.soaring_dayConsumeReward.SoaringDayConsumeRewardPanel,zn=t.soaring_panicBuyingGift.SoaringPanicBuyingGiftPanel,Wn=t.soaring_singlePay.SoaringSinglePayPanel,jn=t.soaring_specialGift.SoaringSpecialGiftPanel,qn=t.xianDan.XianDanPanel,Yn=t.treasure.TreasureRunePanel,Vn=t.soaring_rank.SoaringRankJieZhiAlert,Zn=t.sprint_rank.SprintRankJieZhiAlert,Xn=t.resBack.ResBackPanel,Jn=t.resBack.ResBackAlert,Qn=t.vip_buy.VipBuyPanel,Kn=t.sprint_rank.SprintRankXianQiPanel,$n=t.sprint_rank.SprintRankLingChongPanel,ts=t.sprint_rank.SprintRankShenBingPanel,es=t.sprint_rank.SprintRankXianYiPanel,is=t.sprint_rank.SprintRankFaBaoPanel,ns=t.sprint_rank.SprintRankEquipmentPanel,ss=t.sprint_rank.SprintRankFightPanel,os=t.openChallenge.OpenChallengePanel,as=t.susan_slade.SusanSladePanel,rs=t.yybPrivilege.YybPrivilegeAlert,ls=t.thunderbolt_equip.ThunderboltEquipQuenchingPanel,hs=t.thunderbolt_equip.ThunderboltEquipSuitPanel,cs=t.thunderbolt_equip.ThunderbolSuitAlert,ps=t.thunderbolt_equip.ThunderboltPowerAlert,us=t.thunderbolt_equip.ThunderboltAngerAlert,ds=t.thunderbolt_buy.ThunderboltBuyAlert,ys=t.fly_up.FlyUpPanel,gs=t.fly_up.FlyUpAlert,fs=t.fly_up.FlyUpWinView,_s=t.Offline.OfflineProfitAlert,ms=t.marry.MarryTokenFeedPanel,vs=t.marry.MarrySkillAlert,bs=t.marry.MarryCopyAlert,Ts=t.marry.MarryRingPanel,Is=t.marry.DivorceAlert,Cs=t.marry.MarryTaskPanel,xs=t.marry.RingReplacePanel,Bs=t.marry.MarrySquarePanel,Ss=t.commonAlert.MarryIntimacyAwardsAlert,Ms=t.marry.MarryPanel,ws=t.marry.ProposeAlert,Ps=t.marry.RingBuyAlert,As=t.marry.SearchHalfAlert,Rs=t.marry.SeekMarryAlert,ks=t.marry.MarryPackAlert,Es=t.marry.MarryTokenRankPanel,Ds=t.marry.MarryTokenSkillAlert,Ls=t.yuanShen.YuanShenPanel,Hs=t.yuanShen.YuanShenEquipPanel,Us=t.yuanShen.YuanShenFulingPanel,Os=t.yuanShen.YuanShenWeaponPanel,Gs=t.yuanShen.YuanShenSkillPanel,Fs=t.yuanShen.YuanShenRefinePanel,Ns=t.yuanShen.YuanShenFulingAlert,zs=t.yuanShen.YuanShenSkillAlert,Ws=t.yuanShen.QuenchingAlert,js=t.marry.BeProposeAlert,qs=t.marry.BeProposeListAlert,Ys=t.marry.RingMarkAlert,Vs=t.marry.RingMarkTipsAlert,Zs=t.baby.BabyGrowthPanel,Xs=t.baby.BabyGradePanel,Js=t.baby.BabyTonicPanel,Qs=t.baby.BabySkillAlert,Ks=t.baby.BabyActiveSkillPanel,$s=t.baby.BabyActiveSkillSetAlert,to=t.foreign_boss_panel.ForeignBossPanel,eo=t.foreign_boss_panel.ForeignBossHelpAlert,io=t.foreign_boss_panel.ForeignBossAwardAlert,no=t.foreign_boss_panel.ForeignBossRankAlert,so=t.foreign_boss_panel.ForeignBossWarbandRankAlert,oo=t.foreign_boss_panel.ForeignBossBroadcastView,ao=t.foreign_boss_panel.ForeignBossRBView,ro=t.marry.MarryCopytipsAlert,lo=t.marry.MarryCopySingleMatchAlert,ho=t.marry_arena.MarryArenaPanel,co=t.marry_arena.MarryArenaAwardAlert,po=t.marry_arena.MarryArenaBattlePanel,uo=t.commonAlert.OtherYuanShenEquipAlert,yo=t.teamBattle.TeamCopyInviteAlert,go=t.teamBattle.TeamCopyRoomAlert,fo=t.teamBattle.TeamCopyAskAlert,_o=t.equipSuit.EquipSuitGetAlert,mo=t.teamBattle.TeamBattleTopPanel,vo=t.teamBattle.TeamBattleAwardPanel,bo=t.teamBattle.TeamBattlePanel,To=t.teamBattle.TeamBattleMatchAlert,Io=t.teamBattle.TeamBattleRankAlert,Co=t.equipment_zu_hun.EquipmentZuHunPanel,xo=t.equipment_zu_hun.EquipmentSiHunAlert,Bo=t.equipSuit.EquipSuitPanel,So=t.sheng_yu.ShengYuBossPanel,Mo=t.sheng_yu.ShengYuBossAndPlayerListPanel,wo=t.sheng_yu.ShengYuBossInformationPanel,Po=t.sheng_yu.ShengYuBossLeftPanel,Ao=t.sheng_yu.ShengYuBossShouYiAlert,Ro=t.sheng_yu.ShengYuBossLeaveAlert,ko=t.sheng_yu.ShengYuBossTipAlert,Eo=t.spiritDungeon.SpiritDungeonPanel,Do=t.spiritDungeon.SpiritTeamAlert,Lo=t.spiritDungeon.SpiritTeamCreateAlert,Ho=t.spiritDungeon.SpiritTeamInviteAlert,Uo=t.spiritDungeon.SpiritDungeonRBPanel,Oo=t.spiritDungeon.SpiritDungeonIncomeAlert,Go=t.warband.WarbandApplicantsAlert,Fo=t.warband.WarbandCreateAlert,No=t.warband.WarbandDonateAlert,zo=t.warband.WarbandLevelAwardsAlert,Wo=t.warband.WarbandPrivilegeAlert,jo=t.warband.WarbandRanksAlert,qo=t.warband.WarbandPanel,Yo=t.warband.WarbandsToApplyPanel,Vo=t.warband.WarbandBuffAlert,Zo=t.warband.WarbandBuffReplaceAlert,Xo=t.fire_contention.FireContentionAchievementAlert,Jo=t.fire_contention.FireContentionAndPlayerListPanel,Qo=t.fire_contention.FireContentionCenterPanel,Ko=t.fire_contention.FireContentionLeftPanel,$o=t.fire_contention.FireContentionPanel,ta=t.fire_contention.FireContentionRankAlert,ea=t.fire_contention.FireContentionRankRewardAlert,ia=t.fire_contention.FireContentionRewardAlert,na=t.fire_contention.FireContentionRightPanel,sa=t.fire_contention.FireContentionWinPanel,oa=t.nothingness_world.NothingnessWorldBroadcastPanel,aa=t.nothingness_world.NothingnessWorldCenterPanel,ra=t.nothingness_world.NothingnessWorldCharmMallAlert,la=t.nothingness_world.NothingnessWorldCopyRightPanel,ha=t.nothingness_world.NothingnessWorldLeftPanel,ca=t.nothingness_world.NothingnessWorldPanel,pa=t.nothingness_world.NothingnessWorldRankRewardAlert,ua=t.nothingness_world.NothingnessWorldRewordPreviewAlert,da=t.nothingness_world.NothingnessWorldStrategyAlert,ya=t.fire_contention.FireContentionBuffAlert,ga=t.fire_contention.FireContentionBuffAlert1,fa=t.fire_contention.FireContentionRightBuffPanel,_a=t.nothingness_world.NothingnessWorldClearanceAlert,ma=t.warband.WarbandRenameAlert,va=t.peakDuel.PeakDuelPanel,ba=t.stone.StoneMaster,Ta=t.stone.StoneMaster2,Ia=t.stone.StoneMasterEx,Ca=t.stone.StonePanel,xa=t.rune.RuneInlayPanel,Ba=t.rune.RuneAllAlert,Sa=t.rune.RuneBagAlert,Ma=t.rune_copy.RuneCopyPanel,wa=t.rune_copy.DialAlert,Pa=t.rune.RuneResolveAlert,Aa=t.rune.RuneHintResolveAlert,Ra=t.ladder.LadderPanel,ka=t.ladder.HonorAwardAlert,Ea=t.ladder.LadderGradeAwardAlert,Da=t.ladder.LadderRankAlert,La=t.ladder.LadderMatchAlert,Ha=t.ladder.LadderLoseAlert,Ua=t.yunmeng.YunMengMiJingBossPanel,Oa=t.yunmeng.YunMengMiJingInformationPanel,Ga=t.yunmeng.YunMengMiJingPanel,Fa=t.yunmeng.YunMengMiJingResultAlert,Na=t.yunmeng.YunMengMiJingRewordAlert,za=t.yunmeng.YunMengMiJingWinAlert,Wa=t.yunmeng.YunMengMiJingAwardAlert,ja=t.runeCompose.RuneComposePanel,qa=t.runeCompose.RuneComposeReplaceAlert,Ya=t.peakDuel.PeakDuelAwardAlert,Va=t.peakDuel.PeakDuelRankPanel,Za=t.ladder.LadderNotFoundPanel,Xa=t.peakDuel.PeakDuelRankAlert,Ja=t.rune.RuneBookPanel,Qa=t.rune.RuneDismantlingAlert,Ka=t.grain_full_treasure.GrainFullTreasurePanel,$a=t.grain_full_treasure.GrainFullTreasureRankAlert,tr=t.grain_full_treasure.GrainFullTreasureRankAwardAlert,er=t.grain_full_treasure.GrainFullTreasureAlert,ir=t.grain_full_treasure.GrainFullTreasureSpecialAlert,nr=t.grain_full_store.GrainFullStorePanel,sr=t.grain_full_festival.GrainFullFestFirstPayAlert,or=t.grain_full_festival.GrainFullFestHilarityPanel,ar=t.grain_full_festival.GrainFullFestConLoginPanel,rr=t.grain_full_continuous_pay.GrainFullContinuousPayPanel,lr=t.grain_full_cumulate_pay.GrainFullCumulatePayPanel,hr=t.grain_full_single_pay.GrainFullSinglePayPanel,cr=t.grain_full_festival.GrainFullFestDailyRewardPanel,pr=t.grain_full_festival.GrainFullTeShuPanel,ur=t.grain_full_seven_days_consume.GrainFullSevenDaysConsumePanel,dr=t.wx_module.wxHelpAlert,yr=t.wx_module.wxShareAlert,gr=t.wx_module.wxUpgradeAlert,fr=t.wx_module.wxPlayAlert,_r=t.wx_module.wxCollectAlert,mr=t.wx_module.wxShopAlert,vr=t.wx_module.wxShareAwardAlert,br=t.wx_module.wxLostAlert,Tr=t.yuanShen.YuanShenWeaponSkillAlert,Ir=t.yuanShen.YuanShenWeaponShowAlert,Cr=t.jiu_xiao_ling.JiuXiaoLingPanel,xr=t.jiu_xiao_ling.JiuXiaoLingTaskPanel,Br=t.jiu_xiao_ling.JiuXiaoLingAwardAlert,Sr=t.jiu_xiao_ling.JiuXiaoLingBuyAlert,Mr=t.jiu_xiao_ling.JiuXiaoLingBuyLvAlert,wr=t.jiu_xiao_ling.JiuXiaoLingBuyTipsAlert,Pr=t.outside_show_dungeon.OutsideShowDungeonPanel,Ar=t.outside_show_dungeon.OutsideShowDungeonRbPanel,Rr=t.outside_show_dungeon.OutsideShowDungeonIncomeAlert,kr=t.union_war.UnionWarCenterPanel,Er=t.union_war.UnionWarCnterTopPanel,Dr=t.union_war.UnionWarCopyLeftPanel,Lr=t.union_war.UnionWarCopyLeftRewardPanel,Hr=t.union_war.UnionWarRewardPanel,Ur=t.union_war.UnionWarRewardDistributionPanel,Or=t.union_war.UnionWarPanel,Gr=t.feed_back.FeedBackAlert,Fr=t.union_war.UnionWarPreliminaryRankAlert,Nr=t.union_war.UnionWarDuelAlert,zr=t.union_war.UnionWarEnrollAlert,Wr=t.union_war.UnionWarRewardAlert,jr=t.union_war.UnionWarRewardDistributionAlert,qr=t.union_war.UnionWarRewardDistributionRecordAlert,Yr=t.union_war.UnionWarPreliminaryCnterTopPanel,Vr=t.union_war.UnionWarPreliminaryLeftPanel,Zr=t.union_war.UnionWarPreliminaryRightPanel,Xr=t.union_war.UnionWarReadyCopyRightPanel,Jr=t.union_war.UnionWarPreliminaryCnterBottonPanel,Qr=t.union_war.UnionWarWinAndLosePanel,Kr=t.extreme_equip.ExtremeEquipSkillAlert,$r=t.extreme_equip.ExtremeEquipPanel,tl=t.union_war.UnionWarMoBaiAlert,el=t.extreme_equip.ExtremeEquipSuitSkillAlert,il=t.anniversary_day_collection.AnniversaryDayCollectionPanel,nl=t.anniversary_day_pay_rank.AnniversaryDayPayRankPanel,sl=t.anniversary_day_continuous_pay.AnniversaryDayContinuousPayPanel,ol=t.anniversary_day_cumulate_pay.AnniversaryDayCumulatePayPanel,al=t.anniversary_day_seven_days_consume.AnniversaryDaySevenDaysConsumePanel,rl=t.anniversary_day_seven_days_pay.AnniversaryDaySevenDaysPayPanel,ll=t.anniversary_day_single_pay.AnniversaryDaySinglePayPanel,hl=t.anniversary_day_treasure.AnniversaryDayTreasurePanel,cl=t.anniversary_day_treasure.AnniversaryDayTreasureRankAlert,pl=t.anniversary_day_treasure.AnniversaryDayTreasureRankAwardAlert,ul=t.anniversary_day_treasure.AnniversaryDayTreasureAlert,dl=t.anniversary_day_festival.AnniversaryDayFestConLoginPanel,yl=t.anniversary_day_festival.AnniversaryDayFestHilarityPanel,gl=t.anniversary_day_festival.AnniversaryDayFestDoubleRewardPanel,fl=t.anniversary_day_festival.AnniversaryDayFestDailyRewardPanel,_l=t.anniversary_day_festival.AnniversaryDayFestFirstPayAlert,ml=t.anniversary_day_good_man.AnniversaryDayGoodManPanel,vl=t.anniversary_day_star.AnniversaryDayStarPanel,bl=t.anniversary_day_score_rank.AnniversaryDayScoreRankPanel,Tl=t.anniversary_day_yu_lan.AnniversaryDayYuLanPanel,Il=t.anniversary_day_good_man.AnniversaryDayGoodManAlert,Cl=t.anniversary_day_good_man.AnniversaryDayGoodManJiLuAlert,xl=t.anniversary_day_star.AnniversaryDayStarAlert,Bl=t.anniversary_day_store.AnniversaryDayStorePanel,Sl=t.anniversary_day_treasure.AnniversaryDayTreasureSpecialAlert,Ml=t.treasure.TreasureShenZunPanel,wl=t.treasure.TreasureSecretPanel,Pl=t.wx_module.wxChangePkgAlert,Al=t.treasure.TreasureMarryPanel,Rl=t.hit_engineer.HitEngineerAutoAlert,kl=t.redBag.RedBagLuckPanel,El=t.redBag.RedBagAwardPanel,Dl=t.redBag.RedBagPlayerPanel,Ll=t.redBag.RedBagThankAlert,Hl=t.redBag.RedBagOpenAlert,Ul=t.redBag.RedBagSendAlert,Ol=t.union_war.UnionDorwAlert,Gl=t.fight_soul_pay.FightSoulPayPanel,Fl=t.fight_soul_buy.FightSoulBuyAlert,Nl=t.wx_module.wxAddServiceAlert,zl=t.family_party.EndNianPartyAlert,Wl=t.family_party.EndNianBigAwardAlert,e.SubWindowConfig=jl}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("festival_pay_con_day"),e=0,i=(this._cfgs=t).length;e<i;e++){var n=t[e][0];this._tab[n]=t[e]}},n.prototype.getCfgsById=function(t){return this._tab[t]},i=n,e.FestivalPayConDayCfg=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.soaring_singlePay||(t.soaring_singlePay={}),n=t.common.CustomClip,i=ui.SoaringItemUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26),CommonUtil.setHTMLPro(this.CanBuyHTML,"#1f304d","SimHei",26,"center"),this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.8,.8,!0),n.thisStop(this._btnClip)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},o.prototype.sureBtnHandler=function(){},o.prototype.showRewards=function(t){for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;for(e=0;e<t.length;e++){var i=this._taskBase[e];i&&(i.dataSource=[t[e][0],t[e][1],0,null],i.visible=!0)}},o.prototype.showRewards1=function(t){for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;for(e=0;e<t.length;e++){var i=this._taskBase[e];i&&(i.dataSource=[t[e][0],t[e][1],0,null],i.visible=!0)}},o.prototype.showCanReceive=function(){this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.sureBtn.label="领取",this.sureBtn.visible=!0,n.thisPlay(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1},o.prototype.showGotoRecharge=function(){this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460,#465460,#465460,#465460",this.sureBtn.label="前往充值",this.sureBtn.visible=!0,n.thisStop(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1},o.prototype.showReceived=function(){n.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0,this.overImg.visible=!1},o.prototype.showOver=function(){n.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!0},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),i.prototype.destroy.call(this,t)},s=o,e.PayAndAwardsItem=s}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.anniversary_day_continuous_pay||(e.anniversary_day_continuous_pay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.AnniversaryDayContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.AnniversaryDayType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.AnniversaryDayContinuousPayItem=a}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.anniversary_day_continuous_pay||(r.anniversary_day_continuous_pay={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.AnniversaryDayType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.AnniversaryDayType);if(l.instance.setRPProperty("anniversaryDay1RP",!1),e&&t){var i=t[19];if(i){this._restTm=t[2],this._moneyAcc=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(864),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.AnniversaryDayType);l.instance.setRPProperty("anniversaryDay1RP",t&&e&&i)},e=i,t.AnniversaryDayContinuousPayModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return null!==n&&n.apply(this,arguments)||this}i=e.anniversary_day_cumulate_pay||(e.anniversary_day_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.AnniversaryDayCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.AnniversaryDayCumulatePayModel.instance.accumulate,e=this._datas[1];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.AnniversaryDayType)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.AnniversaryDayCumulatePayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.anniversary_day_cumulate_pay||(a.anniversary_day_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("anniversaryDay2RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.AnniversaryDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.AnniversaryDayType)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(865),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.AnniversaryDayType);r.instance.setRPProperty("anniversaryDay2RP",t&&e&&i)},e=i,t.AnniversaryDayCumulatePayModel=e}(modules=modules||{}),function(l){var t,h,c,e,i,n;function s(){return h.call(this)||this}t=l.festival||(l.festival={}),c=l.common.CustomClip,e=ui.WeekLoginItemUI,i=l.festival.FestivalCtrl,h=e,__extends(s,h),s.prototype.initialize=function(){h.prototype.initialize.call(this),this.creatEffect()},s.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHandler)},s.prototype.setData=function(t){h.prototype.setData.call(this,t);var e=l.festival.FestivalModel.instance.info[this.festivalType];if(e){l.festival.FestivalModel.instance.getHuoDongType(this.festivalType)||(this.received.skin="common/txt_commmon_yjies.png",this.received.visible=!0,this.sureBtn.visible=!1),this._loginDay=e[8][0];var i=e[8][1],n=t;this._day=n[2],this.idText.visible=!1,CommonUtil.setHTMLPro(this.idHtml,"#344C6F","SimHei",26),this.idHtml.innerHTML="连续登录<span style='color:#B15315'>"+this._day+"</span>天可领取";for(var s=n[4],o=s.length,a=[this.weekBase1,this.weekBase2,this.weekBase3,this.weekBase4],r=0;r<a.length;r++)r<o?(a[r].visible=!0,a[r].dataSource=[s[r][0],s[r][1],0,null]):a[r].visible=!1;c.thisStop(this._btnClip),this.received.skin="common/txt_commmon_ylq.png",this.received.visible=!1,this.sureBtn.visible=!1,this._day==this._loginDay?1===i?(this.sureBtn.visible=!0,c.thisPlay(this._btnClip)):2===i&&(this.received.visible=!0):this._day<this._loginDay?this.received.visible=!0:this._day>this._loginDay&&(this.received.visible=!0,this.received.skin="common/txt_commmon_wdc.png")}},s.prototype.close=function(){h.prototype.close.call(this),c.thisStop(this._btnClip)},s.prototype.creatEffect=function(){this._btnClip=c.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-8,!0),this._btnClip.scale(.8,.8,!0),this._btnClip.visible=!1},s.prototype.sureHandler=function(){this._day==this._loginDay&&i.instance.drawFestConLogin(this.festivalType)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),h.prototype.destroy.call(this,t)},n=s,t.FestConLoginBaseItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_festival||(t.anniversary_day_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayFestConLoginItem=n}(modules=modules||{}),function(a){var t,r,e,l,i,n,s,o;function h(){var t=r.call(this)||this;return t.svip=0,t.actorSvip=0,t}t=a.festival||(a.festival={}),e=a.common.CustomClip,l=a.vip.VipModel,i=ui.WeekLoginItemUI,n=a.festival.FestivalCtrl,s=a.common.CommonUtil,r=i,__extends(h,r),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),r.prototype.destroy.call(this,t)},h.prototype.initialize=function(){r.prototype.initialize.call(this),this.creatEffect(),this.idText.color="#344C6F"},h.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHandler),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo)},h.prototype.updateInfo=function(){a.festival.FestivalModel.instance.getHuoDongType(this.festivalType)||(this.tomorrowIsOk.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0,this.received.skin="common/txt_commmon_yjies.png",this._btnClip.visible=!1,this._btnClip.stop())},h.prototype.setData=function(t){r.prototype.setData.call(this,t),this.actorSvip=l.instance.vipLevel;var e=a.festival.FestivalModel.instance.info[this.festivalType];if(e){var i=e[9][0];this.svip=t[0];for(var n=t[1].length,s=[this.weekBase1,this.weekBase2,this.weekBase3,this.weekBase4],o=0;o<s.length;o++)o<n?(s[o].visible=!0,s[o].dataSource=t[1][o]):s[o].visible=!1;0===this.svip?this.idText.text="今日登录可领取":0<this.svip?this.idText.text="SVIP"+this.svip+"可额外领取":this.idText.text="明日可领取",-1===this.svip?(this.tomorrowIsOk.visible=!0,this.sureBtn.visible=!1,this.received.visible=!1,this._btnClip.visible=!1,this._btnClip.stop()):-1!==i.indexOf(this.svip)?(this.tomorrowIsOk.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0,this.received.skin="common/txt_commmon_ylq.png",this._btnClip.visible=!1,this._btnClip.stop()):(this.tomorrowIsOk.visible=!1,this.sureBtn.visible=!0,this.received.visible=!1,this.actorSvip>=this.svip?(this._btnClip.visible=!0,this._btnClip.play()):(this._btnClip.visible=!1,this._btnClip.stop()))}},h.prototype.close=function(){r.prototype.close.call(this),this._btnClip.stop(),this._btnClip.visible=!1},h.prototype.creatEffect=function(){this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-8),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},h.prototype.sureHandler=function(){this.actorSvip>=this.svip?n.instance.drawFestivalLogin(this.festivalType,this.svip):s.alert("温馨提示","领取奖励需要SVIP"+this.svip+",是否前往提升SVIP?",[Handler.create(this,s.gotoVIP)])},Object.defineProperty(h.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),o=h,t.FestDailyRewardBaseItem=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_festival||(t.anniversary_day_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayFestDailyRewardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.single_dog_good_man||(t.single_dog_good_man={}),i=ui.SingleDogGoodManItemUI,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),s.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.zeKouHTml,"#ffffff","SimHei",25,"center","middle"),this.zeKouHTml.style.strokeColor="#610101",this.zeKouHTml.style.stroke=3,this._nameStrs=new Array,this._nameStrs=["推荐","人气","同服"],this._nameStrs1=["common/image_common_hongbq.png","common/image_common_hbq.png","common/icon_dssd_02.png"]},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.songBtn,this,this.songBtnHandler)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="single_dog/icon_dssd_01.png"},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this._type=t[0],this._theGoodRanker=t[1],this.showUI()},s.prototype.showUI=function(){var t=this._nameStrs[this._type],e=this._nameStrs1[this._type];if(this.zeKouImg.skin=e,this.zeKouHTml.innerHTML=""+t,!this._theGoodRanker)return this.headIcon.visible=this.songBtn.visible=this.nameText.visible=!1,void(this.xuWeiText.visible=!0);if(this.headIcon.visible=this.songBtn.visible=this.nameText.visible=!0,this.xuWeiText.visible=!1,this._theGoodRanker){var i=this._theGoodRanker,n=i[2],s=i[3],o=i[1],a=i[4];this.headIcon.setInfo(s,o,a),this.nameText.text=""+n}},s.prototype.songBtnHandler=function(){var t=this._theGoodRanker[0];e.SingleDogGoodManModel.instance.openAlert(t,this.festivalType)},n=s,e.SingleDogGoodManItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_good_man||(t.anniversary_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="anniversary_day/icon_ldsd_zsgzk.png"},n=s,e.AnniversaryDayGoodManItem=n}(modules=modules||{}),function(t){var l,e,i;function n(){return e.call(this)||this}l=t.single_dog_good_man||(t.single_dog_good_man={}),e=ui.SingleDogGoodManItem1UI,__extends(n,e),Object.defineProperty(n.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),n.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.zeKouHTml,"#ffffff","SimHei",25,"center","middle"),this.zeKouHTml.style.strokeColor="#610101",this.zeKouHTml.style.stroke=3,this._nameStrs=new Array,this._nameStrs=["推荐","人气","同服"],this._nameStrs1=["common/image_common_hongbq.png","common/image_common_hbq.png","common/icon_dssd_02.png"]},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.songBtn,this,this.songBtnHandler)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.songBtn.skin="single_dog/icon_dssd_01.png"},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._type=t[0],this._theGoodRanker=t[1],this._inx=t[2],this.showUI()},n.prototype.showUI=function(){var t=this._nameStrs[this._type];if(1===this._type&&this._theGoodRanker){var e=this._theGoodRanker[0];t=(t=l.SingleDogGoodManModel.instance.getStrById(e,this._inx))||this._nameStrs[this._type]}var i=this._nameStrs1[this._type];if(this.zeKouImg.skin=i,this.zeKouHTml.innerHTML=""+t,!this._theGoodRanker)return this.headIcon.visible=this.songBtn.visible=this.nameText.visible=!1,void(this.xuWeiText.visible=!0);if(this.headIcon.visible=this.songBtn.visible=this.nameText.visible=!0,this.xuWeiText.visible=!1,this._theGoodRanker){var n=this._theGoodRanker,s=n[2],o=n[3],a=n[4],r=n[1];this.headIcon.setInfo(o,r,a),this.nameText.text=""+s}},n.prototype.songBtnHandler=function(){var t=this._theGoodRanker[0];l.SingleDogGoodManModel.instance.openAlert(t,this.festivalType)},i=n,l.SingleDogGoodManItem1=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_good_man||(t.anniversary_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="anniversary_day/icon_ldsd_zsgzk.png"},n=s,e.AnniversaryDayGoodManItem1=n}(modules=modules||{}),function(c){var t,e,p,i;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._paiMing=1,t}t=c.festival||(c.festival={}),p=c.config.FestivalConsumeRankCfg,e=ui.SoaringRankItemUI,__extends(n,e),Object.defineProperty(n.prototype,"consumptionItemId",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rankersTableByRank",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.reward1,this.reward2,this.reward3],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("ACTIVITY_SPENDING_RANKING",this,this.showUI)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._paiMing=t,this.showUI()},n.prototype.showUI=function(){var t=CommonUtil.getNameByItemId(this.consumptionItemId);this.oneImage.visible=1==this._paiMing,this.twoImage.visible=2==this._paiMing,this.threeImg.visible=3==this._paiMing,this.otherBox.visible=3<this._paiMing,this.afterthired.value=""+this._paiMing;for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;var i=this.rankersTableByRank[this._paiMing],n=c.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),s=c.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType),o=p.instance.getCfgsById(this.festivalType,this._paiMing,n,s);if(o){var a=o?o[2]:[];for(e=0;e<.5*a.length;e++){var r=this._taskBase[e];if(r){var l=a[2*e],h=a[2*e+1];r.dataSource=[l,h,0,null],r.visible=!0}}i?(this.playername.visible=!0,this.playername.text=i[1],this.notplaylisttxt.visible=!1,this.StatementHTML.innerHTML="消耗"+t+":<span style='color:#168a17'>"+i[2]+"</span>"):(this.playername.visible=!1,this.notplaylisttxt.visible=!0,this.StatementHTML.innerHTML="上榜需消耗"+t+"<span style='color:#168a17'>"+o[3]+"</span>")}},i=n,t.PayRankBaseItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_pay_rank||(t.anniversary_day_pay_rank={}),i=t.festival.PayRankBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"consumptionItemId",{get:function(){return e.AnniversaryDayPayRankModel.instance.consumptionItemId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableByRank",{get:function(){return e.AnniversaryDayPayRankModel.instance._rankersTableByRank},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayPayRankItem=n}(modules=modules||{}),function(r){var t,e;function i(){this._consumptionItemId=r.config.BlendCfg.instance.getCfgById(67016)[1][0],this._consume=0,this._restTmConsumption=0,this._rankersTableByRank={},this._rankersTableById={}}t=r.anniversary_day_pay_rank||(r.anniversary_day_pay_rank={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTmConsumption",{get:function(){return this._restTmConsumption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consume",{get:function(){return this._consume},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consumptionItemId",{get:function(){return this._consumptionItemId},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.AnniversaryDayType];r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.AnniversaryDayType)&&t&&(this._consume=t[18],this._consume=this._consume?this._consume:0)},i.prototype.uodateInfoConsume=function(t){var e=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.AnniversaryDayType];r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.AnniversaryDayType)&&e&&(this._consume=t[0],this._consume=this._consume?this._consume:0,GlobalData.dispatcher.event("ACTIVITY_SPENDING_RANKING"))},i.prototype.uodateInfoDate=function(t){this._rankersTableByRank={},this._rankersTableById={};var e=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.AnniversaryDayType];if(r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.AnniversaryDayType)&&e){this._restTmConsumption=t[0];for(var i=t[1],n=0;n<i.length;n++){var s=i[n];if(s){var o=s[3],a=s[0];this._rankersTableByRank[o]=s,this._rankersTableById[a]=s}}GlobalData.dispatcher.event("ACTIVITY_SPENDING_RANKING")}},e=i,t.AnniversaryDayPayRankModel=e}(modules=modules||{}),function(r){var l,e,h,t;function i(){var t=e.call(this)||this;return t._paiMing=1,t}l=r.single_dog_score_rank||(r.single_dog_score_rank={}),h=r.config.GoodGiverRankCfg,e=ui.SoaringRankItemUI,__extends(i,e),Object.defineProperty(i.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),i.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.reward1,this.reward2,this.reward3],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22)},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SCORE_RANK_UPDATE",this,this.showUI)},i.prototype.setData=function(t){e.prototype.setData.call(this,t),this._paiMing=t},i.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showUI()},i.prototype.showUI=function(){this.oneImage.visible=1==this._paiMing,this.twoImage.visible=2==this._paiMing,this.threeImg.visible=3==this._paiMing,this.otherBox.visible=3<this._paiMing,this.afterthired.value=""+this._paiMing;for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=l.SingleDogScoreRankModel.instance.getTableByRank(this.festivalType,this._paiMing),i=h.instance.getCfgsByGrade(this.festivalType,r.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),this._paiMing);if(i){var n=i?i[1][l.SingleDogScoreRankModel.instance.getTypeIndex(this.festivalType)]:[];for(t=0;t<.5*n.length;t++){var s=this._taskBase[t];if(s){var o=n[2*t],a=n[2*t+1];s.dataSource=[o,a,0,null],s.visible=!0}}e?(this.playername.visible=!0,this.playername.text=e[2],this.notplaylisttxt.visible=!1,this.StatementHTML.innerHTML="积分:<span style='color:#168a17'>"+e[5]+"</span>"):(this.playername.visible=!1,this.notplaylisttxt.visible=!0,this.StatementHTML.innerHTML="上榜条件:<span style='color:#168a17'>"+i[3]+"</span>积分")}},t=i,l.SingleDogScoreRankItem=t}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_score_rank||(t.anniversary_day_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayScoreRankItem=n}(modules=modules||{}),function(i){var n,s,o,a,t,e;function r(){var t=null!==s&&s.apply(this,arguments)||this;return t._type=i.festival.FestivalModel.instance.AnniversaryDayType,t}n=i.anniversary_day_seven_days_consume||(i.anniversary_day_seven_days_consume={}),o=i.config.festivalCostTotalCfg,a=i.bag.BagUtil,t=i.soaring_singlePay.PayAndAwardsItem,s=t,__extends(r,s),r.prototype.setData=function(t){if(s.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText1.visible=!0,this.scheduleText.visible=!1,this.scheduleText1.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:i.notice.SystemNoticeManager.instance.addNotice("消耗"+o.instance.getStrByType(this._type)+"数量不足",!0);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),a.canAddItemsByBagIdCount(t)&&n.AnniversaryDaySevenDaysConsumeCtrl.instance.DrawFestCostTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this._datas[3],this.StatementHTML.innerHTML="累计消费<span style='color:#b15315'>"+t+o.instance.getStrByType(this._type)+"</span>可领取",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.setBtnSure=function(){var t;i.festival.FestivalModel.instance.getHuoDongType(this._type)?0==(t=this._value[1])?(this.showCanReceive(),this.sureBtn.label="领取",this._btnClip.stop(),this._btnClip.visible=!1):1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.showScheduleText=function(){var t=n.AnniversaryDaySevenDaysConsumeModel.instance.gold,e=this._datas[2];this.scheduleText1.text="("+t+"/"+e+")",this.scheduleText1.color=e<=t?"#16ba17":"#FF3e3e"},e=r,n.AnniversaryDaySevenDaysConsumeItem=e}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._gold=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.anniversary_day_seven_days_consume||(r.anniversary_day_seven_days_consume={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gold",{get:function(){return this._gold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.AnniversaryDayType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.AnniversaryDayType);if(l.instance.setRPProperty("anniversaryDay4RP",!1),e&&t){var i=t[15];if(i){this._restTm=t[2],this._gold=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(866),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.AnniversaryDayType);l.instance.setRPProperty("anniversaryDay4RP",t&&e&&i)},e=i,t.AnniversaryDaySevenDaysConsumeModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.anniversary_day_seven_days_pay||(e.anniversary_day_seven_days_pay={}),s=e.config.FestivalPayTotalCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.AnniversaryDaySevenDaysPayCtrl.instance.DrawFestPayTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.AnniversaryDaySevenDaysPayModel.instance.money,e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.AnniversaryDayType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.AnniversaryDaySevenDaysPayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.anniversary_day_seven_days_pay||(a.anniversary_day_seven_days_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("anniversaryDay5RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.AnniversaryDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.AnniversaryDayType)&&t){var e=t[14];if(e){this._restTm=t[2],this._money=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayTotalCfg.instance.getCfgsById(o)[5]<=this._money&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(867),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.AnniversaryDayType);r.instance.setRPProperty("anniversaryDay5RP",t&&e&&i)},e=i,t.AnniversaryDaySevenDaysPayModel=e}(modules=modules||{}),function(n){var s,i,o,a,r,t,e;function l(){return i.call(this)||this}s=n.anniversary_day_single_pay||(n.anniversary_day_single_pay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,t=n.soaring_singlePay.PayAndAwardsItem,i=t,__extends(l,i),l.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},l.prototype.sureBtnHandler=function(){var t=this._value[1];if(Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111),this.close();else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.AnniversaryDaySinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},l.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},l.prototype.showScheduleText=function(){var t=this._value[1],e=Math.round(t%1e3),i=this._datas[0];0==s.AnniversaryDaySinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},l.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(n.festival.FestivalModel.instance.AnniversaryDayType)){var t=this._value[1],e=this._datas[0],i=s.AnniversaryDaySinglePayModel.instance.getState(t,e);0===i?this.showGotoRecharge():1===i?this.showCanReceive():this.showReceived()}else this.showOver()},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,i.prototype.destroy.call(this,t)},e=l,s.AnniversaryDaySinglePayItem=e}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.anniversary_day_single_pay||(a.anniversary_day_single_pay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("anniversaryDay6RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.AnniversaryDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.AnniversaryDayType)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(868),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.AnniversaryDayType);l.instance.setRPProperty("anniversaryDay6RP",t&&e&&i)},e=i,t.AnniversaryDaySinglePayModel=e}(modules=modules||{}),function(r){var t,n,s,e;function i(){return null!==n&&n.apply(this,arguments)||this}t=r.anniversary_day_star||(r.anniversary_day_star={}),s=r.config.GoodRankSingleCfg,n=ui.AnniversaryDaySartItem1UI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this.shouHuPlayer=[this.item2,this.item3],this.shouHuPlayerText=[this.zanWuText1,this.zanWuText2],this.shouHuPlayerHTML=[this.StatementHTML1,this.StatementHTML2],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),CommonUtil.setHTMLPro(this.StatementHTML1,"#1f304d","SimHei",22,"center"),CommonUtil.setHTMLPro(this.StatementHTML2,"#1f304d","SimHei",22,"center")},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI)},i.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showUI()},i.prototype.setData=function(t){n.prototype.setData.call(this,t),this.mingCiImg.visible=this.mingCIclip.visible=1<=t&&t<=3,this.rankText.visible=4<=t,this.rankText.text="第 "+t+" 名",this.mingCIclip.value=""+t,this._mingCi=t,this._dates=s.instance.getCfgsByGrade(r.festival.FestivalModel.instance.AnniversaryDayType,r.festival.FestivalModel.instance.getCrossOpenServerDay(r.festival.FestivalModel.instance.AnniversaryDayType),this._mingCi);var e=this._dates[3],i=this._dates[6];this.StatementHTML.innerHTML="收到"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.AnniversaryDayType)+"达<span style='color:#168a17'>"+e+"</span>可上榜",this.StatementHTML1.innerHTML="赠送<span style='color:#168a17'>"+(i?i[0]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.AnniversaryDayType)+"可上榜",this.StatementHTML2.innerHTML="赠送<span style='color:#168a17'>"+(i?i[1]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.AnniversaryDayType)+"可上榜"},i.prototype.showUI=function(){if(this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!1,this._theGoodRanker=r.single_dog_sart.SingleDogSartModel.instance.getTableByRank(r.festival.FestivalModel.instance.AnniversaryDayType,this._mingCi),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.item1.data=t,this.item1.visible=!0,this.item1.giveBtn.visible=!0;for(var i=0;i<2;i++){var n=e[i],s=this.shouHuPlayer[i],o=this.shouHuPlayerText[i],a=this.shouHuPlayerHTML[i];n?(s.visible=!0,a.visible=o.visible=!1,s.data=n):(a.visible=o.visible=!0,s.visible=!1)}}else this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML2.visible=this.StatementHTML1.visible=this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!0},e=i,t.AnniversaryDayStarItem=e}(modules=modules||{}),function(l){var t,h,e;function i(){return null!==h&&h.apply(this,arguments)||this}t=l.single_dog_sart||(l.single_dog_sart={}),h=ui.SingleDogSartItem1UI,__extends(i,h),i.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this.giveBtn,this,this.giveBtnHandler)},i.prototype.giveBtnHandler=function(){l.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(this._id,this.festivalType)},Object.defineProperty(i.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),i.prototype.setTipsText=function(t){this.tipsText.text=t},i.prototype.setData=function(t){if(h.prototype.setData.call(this,t),t){var e=t[1],i=t[0],n=e[2],s=e[3],o=e[4],a=e[5],r=e[1];this._id=e[0],this.headIcon.setInfo(s,r,o),this.nameText.text=""+n,1===i?(this.tipsText.text="收到"+l.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+":",this.numText.text=""+a):2===i&&(this.tipsText.text="赠送的"+l.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType),this.numText.text=""+a),this.giveBtn.text="赠送"+l.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)}},e=i,t.SingleDogSartItem1=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_star||(t.anniversary_day_star={}),i=t.single_dog_sart.SingleDogSartItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayStarItem1=n}(modules=modules||{}),function(r){var t,l,e;function i(){return null!==l&&l.apply(this,arguments)||this}t=r.single_dog_sart||(r.single_dog_sart={}),l=ui.SingleDogSartItem2UI,__extends(i,l),i.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.giveBtn,this,this.giveBtnHandler)},i.prototype.giveBtnHandler=function(){r.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(this._id,this.festivalType)},Object.defineProperty(i.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),i.prototype.setData=function(t){if(l.prototype.setData.call(this,t),t){var e=t[2],i=t[3],n=t[4],s=t[5],o=t[7],a=t[1];this._id=t[0],this.headIcon.setInfo(i,a,n),this.nameText.text=""+e,this.tipsText.text="收到"+r.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)+":"+s,this.numText.text="助攻者:"+o+"人",this.giveBtn.text="赠送"+r.single_dog_sart.SingleDogSartModel.instance.getName(this.festivalType)}},e=i,t.SingleDogSartItem2=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_star||(t.anniversary_day_star={}),i=t.single_dog_sart.SingleDogSartItem2,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.AnniversaryDayType},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayStarItem2=n}(modules=modules||{}),function(d){var t,e,i,y,l,g,f,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=d.festival||(d.festival={}),i=d.config.FestivalMallCfg,y=d.config.ItemMaterialCfg,l=d.bag.BagUtil,g=d.common.CommonUtil,f=d.common.CustomClip,e=ui.StoreItemUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._pos=[[60],[35,70],[13,41,69]],this._boxArr=[this.limit,this.price,this.nowPrice],g.setHTMLPro(this.zeKouHTml,"#ffffff","SimHei",25,"center","middle"),this.zeKouHTml.style.strokeColor="#610101",this.zeKouHTml.style.stroke=3},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.showUI),this.onAutoGlobalEvt("FESTIVAL_UPDATE_STORE",this,this.showUI),this.onAutoClick(this.puchaseBtn,this,this.puchaseHandler),this.onAutoGlobalEvt("VIP_UPDATE",this,this.updateVip)},s.prototype.updateVip=function(){var t=d.vip.VipModel.instance.vipLevel,e=this._itemCfg[10];t<e?(this.vipLv.text="SVIP"+e+"专享",this.vipBox.visible=!0,this.puchaseBtn.visible=!1):(this.vipBox.visible=!1,this.puchaseBtn.visible=!0)},s.prototype.puchaseHandler=function(){var t=this._itemCfg[12],e=this._itemCfg[5],i=e[0],n=e[1];if(n<=g.getPropCountById(i))if(0==t){var s=this._limitCount-this._nowCount;s=0<s?s:0,WindowManager.instance.open(837,[this._itemCfg,s,this.types])}else{for(var o=new Array,a=0,r=n;a<r;a++)o.push([i,1,0,null]);l.canAddItemsByBagIdCount(o)&&d.li_dong_store.LiDongStoreCtrl.instance.FestivalMallBuy(this.types,this._id)}else 90140001==i?g.goldNotEnoughAlert():l.openLackPropAlert(i,1)},s.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._id=t[0],this._pytNum=t[1],this._itemCfg=i.instance.getCfgsById(this._id),this._itemCfg&&this.showUI())},s.prototype.showUI=function(){if(this._itemCfg){this.zeKouHTml.visible=this.zeKouImg.visible=!1,this._posCount=0,this.vipBox.visible=!1;var t=this._itemCfg[3];if(t[0]&&t[1]){var e=t[0],i=t[1];this.item.dataSource=[e,i,0,null],this.itemName.color=g.getColorById(e),this.itemName.text=this.item._nameTxt.text;var n=y.instance.getItemCfgById(e);if(n){var s=1===n[13];this.item.pieceImg.x=s?66:4}}var o=this._itemCfg[4],a=this._itemCfg[5],r=this._itemCfg[8];this._limitCount=this._itemCfg[9];var l=this._itemCfg[10],h=this._itemCfg[11];f.thisStop(this._btnClip),this.puchaseBtn.visible=!0;var c=g.getItemTypeById(a[0]);if(this.nowPriceImg.skin=this.priceImg.skin=9==c?g.getIconById(a[0],!0):g.getIconById(a[0],!1),0<o.length){this.price.visible=!0,this.zeKouHTml.visible=this.zeKouImg.visible=!0,this._posCount++,this.priceTxt.text=g.bigNumToString(o[1]),this.zeKouImg.skin=1==h?"common/image_common_hongbq.png":2==h?"common/image_common_hbq.png":"common/image_common_hongbq.png";var p=Math.round(this._itemCfg[6]);this.zeKouHTml.innerHTML=p+"<span style='color:#ffffff;font-size: 22px'>折</span>",this.underLine.width=this.priceImg.width+this.priceTxt.width}else this.price.visible=!1,this.zeKouHTml.visible=this.zeKouImg.visible=!1;this.nowPriceTxt.text=g.bigNumToString(a[1]),0==a[1]?(this.zeKouHTml.visible=this.zeKouImg.visible=!0,this.zeKouImg.skin="common/image_common_hbq.png",this.zeKouHTml.innerHTML="免费",this.puchaseBtn.label="免费",this.puchaseBtn.labelColors="#1f304d",this.puchaseBtn.skin="common/btn_tonyong_36.png",this.effectInit(),f.thisPlay(this._btnClip)):(this.puchaseBtn.label="购买",this.puchaseBtn.labelColors="#fffde1",this.puchaseBtn.skin="store/btn0_common.png",f.thisStop(this._btnClip));var u=this._dates[this._id];this._nowCount=null!=u?u[1]:0,0<r?(2==r?this.limitTxt.text="本周限购:":1==r?this.limitTxt.text="每日限购:":3==r&&(this.limitTxt.text="活动限购:"),this.limit.visible=!0,this._posCount++,null!=u?(this.limitCount.text=this._nowCount+"/"+this._limitCount,this._nowCount>=this._limitCount?(this.limitCount.color="#E6372E",this.puchaseBtn.visible=!1,this.maxCountTxt.visible=!0,f.thisStop(this._btnClip)):(this.limitCount.color="#00AD35",this.maxCountTxt.visible=!1)):(this.limitCount.text="0/"+this._nowCount,this.limitCount.color="#00AD35",this.maxCountTxt.visible=!1)):this.maxCountTxt.visible=this.limit.visible=!1,d.vip.VipModel.instance.vipLevel<l?(this.vipLv.text="SVIP"+l+"专享",this.vipBox.visible=!0,this.puchaseBtn.visible=!1):this.vipBox.visible=!1,this.setPos()}},s.prototype.setPos=function(){for(var t=0,e=0;e<this._boxArr.length;e++)1==this._boxArr[e].visible&&(this._boxArr[e].x=122,this._boxArr[e].y=this._pos[this._posCount][t],t<=this._posCount&&t++)},s.prototype.close=function(){e.prototype.close.call(this),f.thisStop(this._btnClip)},s.prototype.effectInit=function(){this._btnClip||(this._btnClip=f.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.puchaseBtn.x,this.puchaseBtn.y-5,.6,!0))},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._boxArr=this.destroyElement(this._boxArr),e.prototype.destroy.call(this,t)},n=s,t.FestBaseStoreItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_store||(t.anniversary_day_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.AnniversaryDayStoreModel.instance.rewardListById,this.types=t.festival.FestivalModel.instance.AnniversaryDayType,i.prototype.showUI.call(this)},n=s,e.AnniversaryDayStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.anniversary_day_store||(a.anniversary_day_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.AnniversaryDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.AnniversaryDayType)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("新年 商城 数据：",this.rewardList)}}},e=i,t.AnniversaryDayStoreModel=e}(modules=modules||{}),function(a){var t,i,e,n,s;function r(){this.oneNum=0,this.twoNum=0,this.threeNum=0,this.id=0,this._xunBaoType=0,this._restTm=0,this._score=0,this._state=1,this.dontShowTreasure=!1,this.festivalType=a.festival.FestivalModel.instance.AnniversaryDayType,this._myXunbaoNote=new Array,this._myNodeList=new Array,this._myNodeListByObjId=new Array,this._rewardList=new Array,this._xunBaoType=100+this.festivalType,this.getBlendCfgShuJu()}t=a.anniversary_day_treasure||(a.anniversary_day_treasure={}),i=a.redPoint.RedPointCtrl,e=a.config.TreasureCfg,n=a.funcOpen.FuncOpenModel,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xunBaoType",{get:function(){return this._xunBaoType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xianyu",{get:function(){return a.bag.BagModel.instance.getItemCountById(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),r.prototype.callBakFunction=function(t){r.instance._restTm<GlobalData.serverTime?r.instance.dontShowTreasure?t():WindowManager.instance.open(1312,t):t()},r.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[r.instance.festivalType];if(a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType)&&t){var e=t[16];if(e){var i=e[0];if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=r.instance._myXunbaoNote.length;o=0<o?o:0,r.instance._myXunbaoNote[o]=s}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MY")}}},r.prototype.getSelfBroadcast=function(){var t=this._myXunbaoNote;return t&&100<t.length&&t.splice(0,t.length-100),t=t||[]},r.prototype.setRewardList=function(t){t&&(this._rewardList=t),this.setRP(),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},r.prototype.getInfoMyNodeList=function(t){if(t){this._myNodeList.length=0,this._myNodeListByObjId.length=0,this._myNodeList=new Array,this._myNodeListByObjId=new Array;for(var e=0;e<t.length;e++){var i=t[e],n=i[0];if(n){var s=n[0],o=n[2];this._myNodeList[o]=i,this._myNodeListByObjId[s]=i}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MYLIST")}},r.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(869),e=a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType);i.instance.setRPProperty("anniversaryDay7RP",e&&t&&this.getgRadeRP())},r.prototype.getgRadeRP=function(){if(0<this.xianyu)return!0;if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&1==e[1])return!0}return!1},r.prototype.getRewardStart=function(t){if(this.rewardList){var e=this._rewardList[t];return e?e[1]:0}},r.prototype.getgRade=function(){for(var t=null,e=null,i=0;i<this.rewardList.length;i++){var n=this.rewardList[i];if(n){var s=n[1];if(1==s)return[i,s];2==s?t=[i,s]:e=e||[i,s]}}return e||t||[0,0]},r.prototype.getBlendCfgShuJu=function(){this.oneNum=e.instance.getItemConditionByGrad(this.xunBaoType,0)[1],this.twoNum=e.instance.getItemConditionByGrad(this.xunBaoType,1)[1],this.threeNum=e.instance.getItemConditionByGrad(this.xunBaoType,2)[1];var t=e.instance.getItemConditionByGrad(this.xunBaoType,0);this.id=t[0]},s=r,t.AnniversaryDayTreasureModel=s}(modules=modules||{}),function(l){var t,e,h,i;function n(){var t=e.call(this)||this;return t._paiMing=1,t}t=l.festival||(l.festival={}),h=l.config.NationalXunbaoRankAwardCfg,e=ui.RotaryTableItemUI,__extends(n,e),Object.defineProperty(n.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"myNodeList",{get:function(){return[]},enumerable:!0,configurable:!0}),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.reward1,this.reward2,this.reward3],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",22)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._paiMing=t,this.showUI()},n.prototype.showUI=function(){this.oneImage.visible=1==this._paiMing,this.twoImage.visible=2==this._paiMing,this.threeImg.visible=3==this._paiMing,this.otherBox.visible=3<this._paiMing,this.showMylist()},n.prototype.showMylist=function(){this.afterthired.value=""+this._paiMing;for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=this.myNodeList[this._paiMing],i=h.instance.getDate(this.festivalType,l.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),l.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType),this._paiMing);if(i){var n=i[2],s=0;for(t=0;t<n.length;t+=2){var o=this._taskBase[s];o&&(o.dataSource=[n[t],n[t+1],0,null],o.visible=!0,s++)}}if(e){var a=e[0];this.playername.visible=!0,this.playername.text=a[1],this.notplaylisttxt.visible=!1,this.StatementHTML.innerHTML="积分:<span style='color:#168a17'>"+e[1]+"</span>"}else if(this.playername.visible=!1,this.notplaylisttxt.visible=!0,i){var r=i[3];this.StatementHTML.innerHTML="上榜条件:<span style='color:#168a17'>"+r+"</span>积分"}},i=n,t.TreasureRankAwardBaseItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_treasure||(t.anniversary_day_treasure={}),i=t.festival.TreasureRankAwardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.AnniversaryDayTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"myNodeList",{get:function(){return e.AnniversaryDayTreasureModel.instance._myNodeList},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayTreasureRankAwardItem=n}(modules=modules||{}),function(s){var t,e,o,i,n;function a(){return e.call(this)||this}t=s.festival||(s.festival={}),o=s.config.NationalXunbaoScoreAwardCfg,i=Laya.Point,e=ui.RotaryTableJiFenItemUI,__extends(a,e),a.prototype.getRewardStart=function(t){return 0},Object.defineProperty(a.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"score",{get:function(){return 0},enumerable:!0,configurable:!0}),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._challengeClip=this.destroyElement(this._challengeClip),e.prototype.destroy.call(this,t)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this._startPos=new i(151,69),this._items=new Array,this._items=[this.rewardBase1,this.rewardBase2,this.rewardBase3,this.rewardBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",26)},a.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._date=t,this.updateUI())},a.prototype.updateUI=function(){this.showReward(),this.showText()},a.prototype.showReward=function(){for(var t=0;t<this._items.length;t++)this._items[t].visible=!1;var e=this._date[2];if(e){var i=0;for(t=0;t<e.length;t+=2){var n=e[t],s=e[t+1],o=this._items[i];o&&(o.dataSource=[n,s,0,null],o.visible=!0),i++}}},a.prototype.showText=function(){var t=this._data[1],e=o.instance.getIndexByScore(this.festivalType,s.festival.FestivalModel.instance.getCrossOpenServerDay(this.festivalType),s.festival.FestivalModel.instance.getDayByFestivalType(this.festivalType),t),i=this.score;this.StatementHTML.innerHTML=t<=i?"积分达到<span style='color:#168a17'>"+t+"</span>可领取(<span style='color:#168a17'>"+i+"/"+t+"</span>)":"积分达到<span style='color:#168a17'>"+t+"</span>可领取(<span style='color:#ff3e3e'>"+i+"/"+t+"</span>)";var n=this.getRewardStart(e);this.HasBroughtImg.visible=2==n},n=a,t.TreasureRankBaseItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_treasure||(t.anniversary_day_treasure={}),i=t.festival.TreasureRankBaseItem,__extends(s,i),s.prototype.getRewardStart=function(t){return e.AnniversaryDayTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.AnniversaryDayTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.AnniversaryDayTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.AnniversaryDayTreasureRankItem=n}(modules=modules||{}),function(h){var t,e,i;function n(){return null!==e&&e.apply(this,arguments)||this}t=h.single_dog_yu_lan||(h.single_dog_yu_lan={}),e=ui.SingleDogYuRanItemUI,__extends(n,e),n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.wardText.text="守护奖励"},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._value=t[1],this._type=t[0],this.updataView()},n.prototype.updataView=function(){var t=h.single_dog_sart.SingleDogSartModel.instance.getIndex(this._type);if(this._value[0][1]<=3)this.rankClip.value=this._value[0][0].toString(),this.rankImg.visible=this.rankClip.visible=!0,this.rankText.text="";else{this.rankImg.visible=this.rankClip.visible=!1;var e=this._value[0][0]!=this._value[0][1]?this._value[0][0]+"-"+this._value[0][1]:this._value[0][1].toString();this.rankText.text="第"+e+"名奖励"}for(var i=[this.rankItem1,this.rankItem2,this.rankItem3,this.rankItem4],n=[this.wardItem1,this.wardItem2,this.wardItem3],s=this._value[1][t],o=0,a=0;a<s.length&&i[o];a+=2)i[o].dataSource=[s[a],s[a+1],0,null],i[o].visible=!0,o++;for(var r=0;r<n.length;r++)n[r].visible=!1;var l=this._value[2][t];for(a=o=0;a<l.length&&n[o];a+=2)n[o].dataSource=[l[a],l[a+1],0,null],n[o].visible=!0,o++},i=n,t.SingleDogYuLanItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.anniversary_day_yu_lan||(t.anniversary_day_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanItem,__extends(s,i),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.wardText.text="助攻奖励"},n=s,e.AnniversaryDayYuLanItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.announcement||(t.announcement={}),i=ui.AnnouncementItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",26),this.StatementHTML.style.lineHeight=35,this.StatementHTML.width=625},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.StatementHTML,"link",this,this.linkHandler)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),console.log("公告内容:  "+t);try{this.StatementHTML.innerHTML=t||""}catch(t){console.log("html格式错误!!!")}this.height=this.StatementHTML.contextHeight},s.prototype.linkHandler=function(t){window.open(t)},n=s,e.AnnouncementHtml=n}(modules=modules||{}),function(i){var t,n,e;function s(){this._maxInputChar=15,this._minInputChar=12}t=i.announcement||(i.announcement={}),n=i.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxInputChar",{get:function(){return this._maxInputChar?this._maxInputChar:50},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"minInputChar",{get:function(){return this._minInputChar?this._minInputChar:5},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"noticeStr",{get:function(){return this._noticeStr?this._noticeStr:""},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cdkeyReply",{get:function(){return this._cdkeyReply?this._cdkeyReply:[]},enumerable:!0,configurable:!0}),s.prototype.getInfo=function(t){this._noticeStr=t[0],GlobalData.dispatcher.event("ANNOUNCEMENT_UPDATE")},s.prototype.getCdkeyReply=function(t){this._cdkeyReply=t[0],GlobalData.dispatcher.event("ANNOUNCEMENT_BACK")},s.prototype.getgRadeRP=function(){return!1},s.prototype.setRP=function(){var t=i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(225),e=this.getgRadeRP();n.instance.setRPProperty("announcementRP",e&&t)},e=s,t.AnnouncementModel=e}(modules=modules||{}),function(t){var y,g,f,e;function i(){return g.call(this)||this}y=t.archive||(t.archive={}),f=t.config.ArchiveCfg,g=ui.ArchiveItemUI,__extends(i,g),i.prototype.initialize=function(){g.prototype.initialize.call(this)},i.prototype.setData=function(t){g.prototype.setData.call(this,t);var e,i=(this.tempData=t)[0],n=t[1],s=f.instance.getCfgByIdAndLv(i,n),o=f.instance.getCfgByIdAndLv(i,n+1),a=f.instance.getCfgByIdAndLv(i,0),r=a[5],l=s[5];if(this.itemName.text=CommonUtil.getNameByItemId(r[0]),l){var h=y.ArchiveModel.instance.handBookRes.get(i);h=h||0,this.itemRP.visible=h>=l[1]}else this.itemRP.visible=!1;this.setUI(),this.cardImg.skin="assets/icon/ui/illustrated_handbook/"+a[8]+".jpg",this.setUI1(s[2]),this.isActive.visible=!n,e=n?(this.gradeTxt.text=s[3]+"阶",s[4]):(this.gradeTxt.text="",o[4]);var c=f.instance.maxLv;this.maxImg.visible=n===c,this.setUI2(e);var p=20.65*this.fightingValue.value.length,u=this.fightNumImg.width,d=this.tenThousandImg.width;this.fightNumImg.x=(214-u-p-d-5)/2,this.fightingValue.x=this.fightNumImg.x+u,this.tenThousandImg.x=this.fightingValue.x+p},i.prototype.setUI2=function(t){t<99999?(this.fightingValue.value=t.toString(),this.tenThousandImg.visible=!1):(9999<(t=Math.floor(t/1e4))?(t=Math.floor(t/1e4),this.tenThousandImg.skin="archive/txt_tj_y.png"):this.tenThousandImg.skin="archive/txt_tj_w.png",this.fightingValue.value=t.toString(),this.tenThousandImg.visible=!0)},i.prototype.setUI1=function(t){switch(t){case 3:this.qualityWindow.skin="assets/icon/ui/illustrated_handbook/frame_tj_zk.png";break;case 4:this.qualityWindow.skin="assets/icon/ui/illustrated_handbook/frame_tj_ck.png";break;case 5:this.qualityWindow.skin="assets/icon/ui/illustrated_handbook/frame_tj_hk.png";break;case 6:this.qualityWindow.skin="assets/icon/ui/illustrated_handbook/frame_tj_fk.png"}},i.prototype.setUI=function(){},i.prototype.setVisible=function(){this.itemRP.visible=this.itemName.visible=this.tenThousandImg.visible=this.fightingValue.visible=this.fightNumImg.visible=this.maxImg.visible=this.gradeTxt.visible=this.isActive.visible=!1},e=i,y.ArchiveBaseItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.archive||(t.archive={}),i=ui.ArchiveBottomItemUI,__extends(s,i),s.prototype.onEvt=function(){switch(i.prototype.onEvt.call(this),this.index){case 0:this.regAutoRP(this.itemRP,["archiveSonRP1"]);break;case 1:this.regAutoRP(this.itemRP,["archiveSonRP2"]);break;case 2:this.regAutoRP(this.itemRP,["archiveSonRP3"])}},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectedImg.visible=t},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this.iconImg.skin="archive/btn_tj_"+t+".png"},n=s,e.ArchiveBottomItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.archive||(t.archive={}),i=t.archive.ArchiveBaseItem,__extends(s,i),s.prototype.setUI2=function(t){t<99999?(this.fightingValue.value=t.toString(),this.tenThousandImg.visible=!1):(9999<(t=Math.floor(t/1e4))?(t=Math.floor(t/1e4),this.tenThousandImg.skin="archive/txt_tj_y.png"):this.tenThousandImg.skin="archive/txt_tj_w.png",this.fightingValue.value=t.toString(),this.tenThousandImg.visible=!0)},s.prototype.setUI1=function(t){switch(t){case 3:this.qualityWindow.skin="assets/icon/ui/illustrated_handbook/frame_tj_zk.png",this.qualityBall.skin="common/xiyou1.png",this.maxImg.skin="archive/txtbg_tj_zs.png";break;case 4:this.qualityWindow.skin="assets/icon/ui/illustrated_handbook/frame_tj_ck.png",this.qualityBall.skin="common/xiyou2.png",this.maxImg.skin="archive/txtbg_tj_cs.png";break;case 5:this.qualityWindow.skin="assets/icon/ui/illustrated_handbook/frame_tj_hk.png",this.qualityBall.skin="common/xiyou3.png",this.maxImg.skin="archive/txtbg_tj_hs.png";break;case 6:this.qualityWindow.skin="assets/icon/ui/illustrated_handbook/frame_tj_fk.png",this.qualityBall.skin="common/xiyou4.png",this.maxImg.skin="archive/txtbg_tj_fs.png"}},s.prototype.setUI=function(){this.tenThousandImg.skin="archive/txt_tj_w.png",this.fightNumImg.skin="archive/txt_tj_zl.png",this.img.skin="archive/iconbg_tj_zz.png",this.img1.skin="archive/icon_tj_wjh.png"},s.prototype.clickHandler=function(){i.prototype.clickHandler.call(this),WindowManager.instance.open(458,this.tempData)},n=s,e.ArchiveItem=n}(modules=modules||{}),function(t){var e,i,c,p,n;function r(){this.isOpenPanel=!1,this.init()}e=t.archive||(t.archive={}),i=Laya.Dictionary,c=t.redPoint.RedPointCtrl,p=t.config.ArchiveCfg,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.init=function(){this._handBookList={},this._handBookRes=new i,this._activeIds=[]},r.prototype.getIllustratedHandbookReply=function(t){var e=t[0],i=t[1];this._activeIds=[];for(var n=0,s=e.length;n<s;n++)this._handBookList[e[n][0]]=e[n][1],this._activeIds.push(e[n][0]);for(n=0,s=i.length;n<s;n++)this._handBookRes.set(i[n][0],i[n][1]);this.checkHandBookRP(),GlobalData.dispatcher.event("ARCHIVE_UPDARE")},Object.defineProperty(r.prototype,"handBookRes",{get:function(){return this._handBookRes},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"handBook",{get:function(){return this._handBookList},enumerable:!0,configurable:!0}),r.prototype.getHandbookListCountByType=function(t){for(var e=0,i=0;i<this._activeIds.length;i++)p.instance.getCfgByIdAndLv(this._activeIds[i],0)[1]===t&&e++;return e},r.prototype.getHandbookStateById=function(t){var e=r.instance.handBook[t];e=e||0;var i,n=p.instance.getCfgByIdAndLv(t,e);if(n[5]){var s=n[5][0],o=n[5][1],a=r.instance.handBookRes.get(s);i=e?e>=p.instance.maxLv?0:a&&o<=a?3:2:a&&o<=a?4:1}else i=0;return i},r.prototype.checkHandBookRP=function(){c.instance.setRPProperty("archiveRP",!1),c.instance.setRPProperty("archiveSonRP1",!1),c.instance.setRPProperty("archiveSonRP2",!1),c.instance.setRPProperty("archiveSonRP3",!1);for(var t=0;t<4;t++){var e=p.instance.getIdsByType(t);for(var i in e){var n=e[i],s=this._handBookList[n];s=s||0;var o=p.instance.getCfgByIdAndLv(n,s),a=p.instance.getCfgByIdAndLv(n,s+1);if(o[5]){var r=o[5][0],l=o[5][1],h=this._handBookRes.get(r);l<=(h=h||0)&&a&&c.instance.setRPProperty("archiveRP",!0),1===o[1]&&l<=h&&a&&c.instance.setRPProperty("archiveSonRP1",!0),2===o[1]&&l<=h&&a&&c.instance.setRPProperty("archiveSonRP2",!0),3===o[1]&&l<=h&&a&&c.instance.setRPProperty("archiveSonRP3",!0)}}}},n=r,e.ArchiveModel=n}(modules=modules||{}),function(m){!function(l){var r,h=m.config.BabyCfg,c=m.config.ExteriorCfg,p=m.common.CustomClip,u=m.config.SkillPureCfg,d=m.config.SkillCfg,t=(r=ui.SbItemUI,__extends(e,r),e.prototype.initialize=function(){r.prototype.initialize.call(this),this.scale(.7,.7),this.maskImg.visible=!1},e.prototype.setData=function(t){r.prototype.setData.call(this,t),this.usingTxt.visible=l.BabyModel.instance.curBaby==t;var e=h.instance.getShowId(t),i=c.instance.getCfgById(e),n=l.BabyModel.instance.getBabyById(t);if(n&&0<n[1]){this.maskImg.visible=!1,this.qualityImg.gray=this.icon.gray=!1,this.wayTxt.color="#F4F1BB",this.wayTxt.fontSize=20,this.wayTxt.text=n[1]+"级";var s=h.instance.getGrowthItem(t,n[1]+1);this.dotImg.visible=s&&CommonUtil.getPropCountById(s[0])>=s[1];var o=l.BabyModel.instance.checkSkillTypeById(1,t)||l.BabyModel.instance.checkSkillTypeById(2,t);this.dotImg.visible=this.dotImg.visible||o}else this.maskImg.visible=!0,this.wayTxt.color="#00ad35",this.wayTxt.fontSize=18,this.wayTxt.text=(h.instance.getWay(t)||"").split("#")[0],this.qualityImg.gray=this.icon.gray=!0,this.dotImg.visible=!1;this.nameTxt.text=i[2],this.nameTxt.color=CommonUtil.getColorByQuality(i[4]),this.icon.skin="assets/icon/skin/"+i[3]+".png",this.qualityImg.skin="assets/icon/quality_bg/iconbg_"+i[4]+".png";var a=i[11]||0;0<a?(this.gradeImg.skin="common/xiyou"+a+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1},e.prototype.setSelected=function(t){r.prototype.setSelected.call(this,t),this.frameImg.visible=t},e.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoGlobalEvt("BABY_INFO_UPDATE",this,this.setData,[this.data]),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setData,[this.data]),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.setData,[this.data])},e);function e(){return null!==r&&r.apply(this,arguments)||this}l.BabyGrowthItem=t;var y,i=(y=ui.SbItemUI,__extends(n,y),n.prototype.initialize=function(){y.prototype.initialize.call(this),this.scale(.7,.7),this.maskImg.visible=!1},n.prototype.setData=function(t){y.prototype.setData.call(this,t),this.usingTxt.visible=l.BabyModel.instance.curBaby==t;var e=h.instance.getShowId(t),i=c.instance.getCfgById(e),n=l.BabyModel.instance.getBabyById(t);if(n&&0<n[2]){this.maskImg.visible=!1,this.qualityImg.gray=this.icon.gray=!1,this.wayTxt.color="#F4F1BB",this.wayTxt.fontSize=20,this.wayTxt.text=n[2]+"阶";var s=h.instance.getGradeItem(t,n[2]+1);this.dotImg.visible=n[2]<h.instance.getMaxGrade(t)&&s&&CommonUtil.getPropCountById(s[0])>=s[1];var o=l.BabyModel.instance.checkSkillTypeById(3,t);this.dotImg.visible=this.dotImg.visible||o}else{this.wayTxt.fontSize=18,this.maskImg.visible=!0,s=h.instance.getGradeItem(t,1);var a=h.instance.getGradeMoney(t,1);s&&s.length&&CommonUtil.getPropCountById(s[0])>=s[1]?(this.wayTxt.color="#00ad35",this.wayTxt.text="可激活",this.qualityImg.gray=this.icon.gray=!1,this.dotImg.visible=!0):a&&a.length&&CommonUtil.getPropCountById(a[0])>=a[1]?(this.wayTxt.color="#00ad35",this.wayTxt.text="可激活",this.qualityImg.gray=this.icon.gray=!1,this.dotImg.visible=!0):(this.wayTxt.color="#00ad35",this.wayTxt.text=(h.instance.getWay(t)||"").split("#")[0],this.qualityImg.gray=this.icon.gray=!0,this.dotImg.visible=!1)}this.nameTxt.text=i[2],this.nameTxt.color=CommonUtil.getColorByQuality(i[4]),this.icon.skin="assets/icon/skin/"+i[3]+".png",this.qualityImg.skin="assets/icon/quality_bg/iconbg_"+i[4]+".png";var r=i[11]||0;0<r?(this.gradeImg.skin="common/xiyou"+r+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1},n.prototype.setSelected=function(t){y.prototype.setSelected.call(this,t),this.frameImg.visible=t},n.prototype.onEvt=function(){y.prototype.onEvt.call(this),this.onAutoGlobalEvt("BABY_INFO_UPDATE",this,this.setData,[this.data]),this.onAutoGlobalEvt("BAG_UPDATE",this,this.setData,[this.data]),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.setData,[this.data])},n);function n(){return null!==y&&y.apply(this,arguments)||this}l.BabyGradeItem=i;var a,s=(a=ui.SkillIconUI,__extends(o,a),o.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),a.prototype.destroy.call(this,!0)},o.prototype.initialize=function(){a.prototype.initialize.call(this),this.pivotX=-20,this.pivotY=-20,this.scale(.8,.8),this._eff=CommonUtil.creatEff(this,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0),this._eff.stop(),this._eff.visible=!1,this.levBox.visible=!1,this.visible=!1},o.prototype.close=function(){this._eff&&this._eff.stop(),a.prototype.close.call(this)},o.prototype.clickHandler=function(){WindowManager.instance.open(1081,this.data)},o.prototype.setData=function(t){a.prototype.setData.call(this,t);var e=u.instance.getCfgById(t),i=l.BabyModel.instance.getSkillLvBySkillId(t);e&&e[6]&&(this.iconImg.skin="assets/icon/skill/"+e[6]+".png"),this.iconImg.gray=0===i,this.levTxt.text=i.toString(),this.levBox.visible=!this.iconImg.gray,this.stateImg.skin=0===i?"common/txt_xq_kjh.png":"common/txt_xq_ksj.png";var n=h.instance.getIdBySkill(1e4*t+1),s=l.BabyModel.instance.getBabyById(n),o=h.instance.getCfgBySkill(1e4*t+i+1);s&&o&&o[2]<=s[1]&&o[3]<=s[2]?(this._eff.isPlaying||p.thisPlay(this._eff),this.stateImg.visible=this.dotImg.visible=!0):(p.thisStop(this._eff),this.stateImg.visible=this.dotImg.visible=!1),this.visible=!0},o.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoGlobalEvt("BABY_INFO_UPDATE",this,this.setData,[this.data])},o);function o(){return null!==a&&a.apply(this,arguments)||this}l.BabySkillItem=s;var g,f=(g=ui.SkillIcon1UI,__extends(_,g),_.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),g.prototype.destroy.call(this,!0)},_.prototype.initialize=function(){g.prototype.initialize.call(this),this._eff=CommonUtil.creatEff(this.skill,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0),this._eff.stop(),this._eff.visible=!1},_.prototype.close=function(){this._eff&&this._eff.stop(),g.prototype.close.call(this)},_.prototype.onEvt=function(){g.prototype.onEvt.call(this),this.onAutoClick(this.skill,this,this.clickIconHandler),this.onAutoGlobalEvt("BABY_INFO_UPDATE",this,this.setData,[this.data])},_.prototype.clickIconHandler=function(){WindowManager.instance.open(1081,this.data)},_.prototype.setData=function(t){g.prototype.setData.call(this,t);var e=u.instance.getCfgById(t),i=l.BabyModel.instance.getSkillLvBySkillId(t),n=0<i?1e4*t+i:1e4*t+1,s=d.instance.getCfgById(n);this.skill.iconImg.skin="assets/icon/skill/"+e[6]+".png",this.skill.iconImg.gray=0===i,this.skill.levTxt.text=i.toString(),this.skill.levBox.visible=!this.skill.iconImg.gray,this.skill.stateImg.skin=0===i?"common/txt_xq_kjh.png":"common/txt_xq_ksj.png";var o=h.instance.getIdBySkill(1e4*t+1),a=l.BabyModel.instance.getBabyById(o),r=h.instance.getCfgBySkill(1e4*t+i+1);a&&r&&r[2]<=a[1]&&r[3]<=a[2]?(this._eff.isPlaying||p.thisPlay(this._eff),this.skill.stateImg.visible=this.skill.dotImg.visible=!0):(p.thisStop(this._eff),this.skill.stateImg.visible=this.skill.dotImg.visible=!1),this.nameTxt.text="天赋·"+e[1],e&&e[9]?this.lvTxt.text=e[9]:s&&s[2]?this.lvTxt.text=s[2]:this.lvTxt.text=""},_);function _(){return null!==g&&g.apply(this,arguments)||this}l.BabySkillItem1=f}(m.baby||(m.baby={}))}(modules=modules||{}),function(t){var e,x,f,u,c,i;function h(){this.babyTab={},this.babySkillTab={},this.isfirstTips=!0}e=t.baby||(t.baby={}),x=t.config.BabyCfg,f=t.config.SkillCfg,u=t.redPoint.RedPointCtrl,c=t.bag.BagModel,Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.getRuneSkillItemAttr=function(t,e){var i=this.getLevelByActiveSkillIdAndRuneSkillId(t,e),n=[],s={},o={},a=[],r=x.instance.getCfgByActiveSkillById(1e4*e+i),l=x.instance.getCfgByActiveSkillById(1e4*e+(i+1)),h=0==i?[]:r[5],c=l?l[5]:[];if(0<h.length)for(var p=0;p<h.length;p+=2)-1===n.indexOf(h[p])&&n.push(h[p]),s[h[p]]=h[p+1];if(0<c.length)for(p=0;p<c.length;p+=2)-1===n.indexOf(c[p])&&n.push(c[p]),o[c[p]]=c[p+1];for(var u=0;u<n.length;++u){var d=n[u],y=s[d]?s[d]:0,g=o[d]?o[d]:0;a.push([d,y,g,1])}return a},h.prototype.getRuneSkillSkillAttr=function(t,e){var i=this.getLevelByActiveSkillIdAndRuneSkillId(t,e),n=[],s=[],o={},a={},r=f.instance.getCfgById(1e4*e+i),l=f.instance.getCfgById(1e4*e+(i+1)),h=0==i?[]:r[1],c=l?l[1]:[];if(0<h.length)for(var p=0;p<h.length;p+=2)-1===s.indexOf(h[p])&&s.push(h[p]),o[h[p]]=h[p+1];if(0<c.length)for(p=0;p<c.length;p+=2)-1===s.indexOf(c[p])&&s.push(c[p]),a[c[p]]=c[p+1];for(var u=0;u<s.length;++u){var d=s[u],y=o[d]?o[d]:0,g=a[d]?a[d]:0;n.push([d,y,g,2])}return n},h.prototype.calcActiveSkillAttrs=function(){for(var t=[],e=[],i=0;i<this.activaSkillList.length;i++)for(var n=this.activaSkillList[i],s=n[0],o=n[2],a=0;a<o.length;a++){var r=(f=o[a])[0],l=this.getRuneSkillItemAttr(s,r),h=f[1],c=x.instance.getCfgByActiveSkillById(1e4*r+(0==h?1:h)),p=String(c[9]).split("_"),u=[];1==Number(p[1])&&(u=this.getRuneSkillSkillAttr(s,r)),t.push(l),0<u.length&&e.push(u)}for(var d=[],y={},g=0;g<t.length;g++){var f=t[g];for(a=0;a<f.length;a++){var _=f[a];-1===d.indexOf(_[0])?(d.push(_[0]),y[_[0]]=_[1]):y[_[0]]=y[_[0]]+_[1]}}for(var m=[],v=0;v<d.length;++v){var b=y[C=d[v]]?y[C]:0;m.push([C,b,1])}var T=[],I={};for(g=0;g<e.length;g++)for(f=e[g],a=0;a<f.length;a++)_=f[a],-1===T.indexOf(_[0])?(T.push(_[0]),I[_[0]]=_[1]):I[_[0]]=I[_[0]]+_[1];for(v=0;v<T.length;++v){var C;b=I[C=T[v]]?I[C]:0,m.push([C,b,2])}WindowManager.instance.open(26,["符印总属性",this.getTotalRuneSkillFight(),void 0,void 0,!0,m])},h.prototype.checkAllActiveSkillRp=function(){var t;t=!!this.checkActiveRuneRed(void 0)||this.allActiveSkillRed(),u.instance.setRPProperty("babyActiveSkillRP",t)},h.prototype.getActiveRedIndex=function(){for(var t=h.instance.getActiveSkillList(),e=0;e<t.length;e++)for(var i=t[e],n=i[0],s=i[2],o=0;o<s.length;o++){var a=s[o][0];if(this.checkRuneSkillRed(n,a))return e}return 0},h.prototype.getActiveRuneRedIndex=function(t){for(var e=h.instance.getActiveSkillList(),i=0;i<e.length;i++)for(var n=e[i],s=n[0],o=n[2],a=0;a<o.length;a++){var r=o[a][0];if(s==t&&this.checkRuneSkillRed(s,r))return a}return 0},h.prototype.checkActiveRuneRed=function(t){var e=!1;if(t){if(l=this.getDataByActiveSkillId(t))for(var i=l[0],n=l[2],s=0;s<n.length;s++){var o=n[s][0];if(this.checkRuneSkillRed(i,o)){e=!0;break}}}else{var a=h.instance.getActiveSkillList();if(a&&0<a.length)for(var r=0;r<a.length;r++){var l;for(i=(l=a[r])[0],n=l[2],s=0;s<n.length;s++)if(o=n[s][0],this.checkRuneSkillRed(i,o)){e=!0;break}}}return e},h.prototype.checkRuneSkillRed=function(t,e){for(var i=this.getDataByActiveSkillId(t)[1],n=this.getRuneSkillByActiveSkillId(t),s=!1,o=0;o<n.length;o++){var a=n[o],r=a[1];if(a[0]==e){var l=x.instance.getCfgByActiveSkillById(1e4*e+(0==r?1:r+1));if(l){var h=l[3][0];if(l[3][1]<=c.instance.getItemCountById(h)&&i>=l[2]){s=!0;break}}}}return s},h.prototype.allActiveSkillRed=function(){var t=this.getActiveSkillList(),e=!1;if(t&&0<t.length)for(var i=0;i<t.length;i++){var n=t[i][0];if(this.checkActiveSkillRed(n)){e=!0;break}}return e},h.prototype.getAllActiveSkillRedIndex=function(){for(var t=this.getActiveSkillList(),e=0,i=0;i<t.length;i++){var n=t[i][0];if(this.checkActiveSkillRed(n)){e=i;break}}return e},h.prototype.checkActiveSkillRed=function(t){var e=this.getDataByActiveSkillId(t),i=!1;if(e){var n=e[1],s=x.instance.getCfgByActiveSkillById(1e4*t+(0==n?1:n+1));if(s){var o=s[3][0];s[3][1]<=c.instance.getItemCountById(o)&&h.instance.getTotalLevel()>=s[2]&&(i=!0)}}return i},h.prototype.getTotalActiveSkillFight=function(){for(var t=0,e=0;e<this.activaSkillList.length;e++){var i=this.activaSkillList[e],n=i[0],s=i[1],o=f.instance.getCfgById(1e4*n+s),a=x.instance.getCfgByActiveSkillById(1e4*n+s);o&&a&&(t+=o[3]?o[3]:0,t+=a[7]?a[7]:0)}return t},h.prototype.getTotalRuneSkillFight=function(){for(var t=0,e=0;e<this.activaSkillList.length;e++){var i=this.activaSkillList[e][2];if(i&&0<i.length)for(var n=0;n<i.length;n++){var s=i[n],o=s[0],a=s[1],r=f.instance.getCfgById(1e4*o+a),l=x.instance.getCfgByActiveSkillById(1e4*o+a);r&&l&&(t+=r[3]?r[3]:0,t+=l[7]?l[7]:0)}}return t},h.prototype.getRuneSkillByActiveSkillId=function(t){var e=this.activaSkillDic[t][2];return e&&0<e.length&&e.sort(function(t,e){return t[0]-e[0]}),e},h.prototype.getActivationFlagByActiveSkillIdAndRuneSkillId=function(t,e){var i=!1,n=this.activaSkillDic[t];if(n){var s=n[2];if(s&&0<s.length)for(var o=0;o<s.length;o++){var a=s[o];if(a[0]==e){i=0<a[1];break}}}return i},h.prototype.getLevelByActiveSkillIdAndRuneSkillId=function(t,e){var i=0,n=this.activaSkillDic[t];if(n){var s=n[2];if(s&&0<s.length)for(var o=0;o<s.length;o++){var a=s[o];if(a[0]==e){i=a[1];break}}}return i},h.prototype.getActiveSkillList=function(){return this.activaSkillList},Object.defineProperty(h.prototype,"activaSkill",{set:function(t){var e=this;(this.activaSkillList=t)&&0<t.length&&(this.activaSkillList.sort(function(t,e){return t[0]-e[0]}),this.swapArray(this.activaSkillList,0,1),this.activaSkillDic={},this.activaSkillList.forEach(function(t){e.activaSkillDic[t[0]]=t}))},enumerable:!0,configurable:!0}),h.prototype.swapArray=function(t,e,i){return t[e]=t.splice(i,1,t[e])[0],t},h.prototype.getActivationFlagByActiveSkillId=function(t){var e=this.activaSkillDic[t];return!!e&&0<e[1]},h.prototype.getDataByActiveSkillId=function(t){return this.activaSkillDic[t]},h.prototype.getTotalLevel=function(){var t=0;for(var e in this.babyTab)t+=this.babyTab[e][1];return t},h.prototype.getBabyById=function(t){return this.babyTab[t]},h.prototype.getSkillLvBySkillId=function(t){return this.babySkillTab[t]?this.babySkillTab[t][1]:0},h.prototype.getGrowthTotalFight=function(){var t=0;for(var e in this.babyTab){t+=x.instance.getGrowthFight(this.babyTab[e][0],this.babyTab[e][1]);for(var i=x.instance.skillIds[e][1],n=0;n<i.length;++n){var s=this.getSkillLvBySkillId(i[n]);t+=(o=f.instance.getCfgById(1e4*i[n]+s))?o[3]:0}for(i=x.instance.skillIds[e][2],n=0;n<i.length;++n){var o;s=this.getSkillLvBySkillId(i[n]),t+=(o=f.instance.getCfgById(1e4*i[n]+s))?o[3]:0}}return t},h.prototype.getGradeTotalFight=function(){var t=0;for(var e in this.babyTab){t+=x.instance.getGradeFight(this.babyTab[e][0],this.babyTab[e][2]);for(var i=x.instance.skillIds[e][3],n=0;n<i.length;++n){var s=this.getSkillLvBySkillId(i[n]),o=f.instance.getCfgById(1e4*i[n]+s);t+=o?o[3]:0}}return t},h.prototype.getTonicTotalFight=function(){for(var t=0,e=this.tonic||[],i=0;i<e.length;++i)if(e[i][1])for(var n=x.instance.getTonicCfgByType(e[i][0]),s=0,o=0;o<n.length;++o){var a=n[o];if(!(e[i][1]>a[1])){t+=(e[i][1]-s)*a[6];break}t+=(a[1]-s)*a[6],s=a[1]}return t},h.prototype.calcGrowthAttrs=function(){var t=0,e=[],i=[],n={};for(var s in this.babyTab)if(this.babyTab[s][1]){t+=x.instance.getGrowthFight(this.babyTab[s][0],this.babyTab[s][1]);for(var o=x.instance.getGrowthAttr(this.babyTab[s][0],this.babyTab[s][1]),a=0;a<o.length;a+=2)-1===i.indexOf(o[a])&&(i.push(o[a]),n[o[a]]=0),n[o[a]]+=o[a+1]||0}i.sort(function(t,e){return t-e});for(var r=0;r<i.length;++r)e.push([i[r],n[i[r]]]);WindowManager.instance.open(26,["仙龄总属性",t,e,x.instance.growthAttrIds])},h.prototype.calcGradeAttrs=function(){var t=0,e=[],i=[],n={};for(var s in this.babyTab)if(this.babyTab[s][2]){t+=x.instance.getGradeFight(this.babyTab[s][0],this.babyTab[s][2]);for(var o=x.instance.getGradeAttr(this.babyTab[s][0],this.babyTab[s][2]),a=0;a<o.length;a+=2)-1===i.indexOf(o[a])&&(i.push(o[a]),n[o[a]]=0),n[o[a]]+=o[a+1]||0,console.log("属性",o[a],"值",n[o[a]])}i.sort(function(t,e){return t-e});for(var r=0;r<i.length;++r)e.push([i[r],n[i[r]]]);WindowManager.instance.open(26,["进阶总属性",t,e,x.instance.gradeAttrIds])},h.prototype.calcTonicAttrs=function(){for(var t=0,e=[],i=[],n={},s=this.tonic||[],o=0;o<s.length;++o)if(s[o][1])for(var a=x.instance.getTonicCfgByType(s[o][0]),r=0,l=0;l<a.length;++l){var h=a[l];if(!(s[o][1]>h[1])){for(t+=(s[o][1]-r)*h[6],c=h[5],p=0;p<c.length;p+=2)-1===i.indexOf(c[p])&&(i.push(c[p]),n[c[p]]=0),n[c[p]]+=(s[o][1]-r)*(c[p+1]||0);break}t+=(h[1]-r)*h[6];for(var c=h[5],p=0;p<c.length;p+=2)-1===i.indexOf(c[p])&&(i.push(c[p]),n[c[p]]=0),n[c[p]]+=(h[1]-r)*(c[p+1]||0);r=h[1]}for(i.sort(function(t,e){return t-e}),o=0;o<i.length;++o)e.push([i[o],n[i[o]]]);WindowManager.instance.open(26,["进补总属性",t,e,x.instance.tonicAttrIds])},h.prototype.checkGrowthRP=function(){for(var t=!1,e=x.instance.babyIds,i=0;i<e.length;++i){var n=this.getBabyById(e[i]),s=n?n[1]:0;if(0<s){var o=x.instance.getGrowthItem(e[i],s+1);if(o&&CommonUtil.getPropCountById(o[0])>=o[1]){t=!0;break}}}u.instance.setRPProperty("babyGrowthRP",t)},h.prototype.checkGradeRP=function(){for(var t=!1,e=x.instance.babyIds,i=0;i<e.length;++i){var n=this.getBabyById(e[i]),s=n?n[2]:0,o=x.instance.getGradeItem(e[i],s+1),a=x.instance.getGradeMoney(e[i],s+1);if(o&&o.length&&CommonUtil.getPropCountById(o[0])>=o[1]){t=!0;break}if(a&&a.length&&CommonUtil.getPropCountById(a[0])>=a[1]){t=!0;break}}u.instance.setRPProperty("babyGradeRP",t)},h.prototype.checkTonicRP=function(){for(var t=!1,e=this.tonic||[],i=this.getTotalLevel(),n=0;n<e.length;++n){var s=x.instance.getTonicCfgByTypeAndLv(e[n][0],e[n][1]+1);if(s&&s[3]<=i){var o=s[2];if(!o)continue;if(CommonUtil.getPropCountById(o[0])>=o[1]){t=!0;break}}}u.instance.setRPProperty("babyTonicRP",t)},h.prototype.checkSkillRP=function(){for(var t=!1,e=!1,i=!1,n=x.instance.babyIds,s=0;s<n.length;++s){var o=this.getBabyById(n[s]),a=o?o[1]:0,r=o?o[2]:0,l=x.instance.skillIds[n[s]][1];if(!t)for(var h=0;h<l.length;++h){var c=this.getSkillLvBySkillId(l[h]);if((p=x.instance.getCfgBySkill(1e4*l[h]+c+1))&&a>=p[2]&&r>=p[3]){t=!0;break}}if(l=x.instance.skillIds[n[s]][2],!e)for(h=0;h<l.length;++h)if(c=this.getSkillLvBySkillId(l[h]),(p=x.instance.getCfgBySkill(1e4*l[h]+c+1))&&a>=p[2]&&r>=p[3]){e=!0;break}if(l=x.instance.skillIds[n[s]][3],!i)for(h=0;h<l.length;++h){var p;if(c=this.getSkillLvBySkillId(l[h]),(p=x.instance.getCfgBySkill(1e4*l[h]+c+1))&&a>=p[2]&&r>=p[3]){i=!0;break}}if(t&&e&&i)break}u.instance.setRPProperty("babySkillBaseRP",t),u.instance.setRPProperty("babySkillHaloRP",e),u.instance.setRPProperty("babySkillTalentRP",i)},h.prototype.checkSkillTypeById=function(t,e){for(var i=x.instance.skillIds[e][t],n=this.getBabyById(e),s=n?n[1]:0,o=n?n[2]:0,a=0;a<i.length;++a){var r=this.getSkillLvBySkillId(i[a]),l=x.instance.getCfgBySkill(1e4*i[a]+r+1);if(l&&s>=l[2]&&o>=l[3])return!0}return!1},h.prototype.checkGrowthById=function(t){var e=this.getBabyById(t),i=e?e[1]:0;if(0<i){var n=x.instance.getGrowthItem(t,i+1);return!!(n&&CommonUtil.getPropCountById(n[0])>=n[1])||(this.checkSkillTypeById(1,t)||this.checkSkillTypeById(2,t))}return!1},h.prototype.checkGradeById=function(t){var e=this.getBabyById(t),i=e?e[2]:0,n=x.instance.getGradeItem(t,i+1),s=x.instance.getGradeMoney(t,i+1);return!!(n&&n.length&&CommonUtil.getPropCountById(n[0])>=n[1])||!!(s&&s.length&&CommonUtil.getPropCountById(s[0])>=s[1])||0<i&&this.checkSkillTypeById(3,t)},h.prototype.checkTonicByType=function(t){for(var e=this.tonic||[],i=this.getTotalLevel(),n=0;n<e.length;++n)if(t==e[n][0]){var s=x.instance.getTonicCfgByTypeAndLv(e[n][0],e[n][1]+1);if(s&&s[3]<=i){var o=s[2];if(!o)return!1;if(CommonUtil.getPropCountById(o[0])>=o[1])return!0}}return!1},i=h,e.BabyModel=i}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.bar_day_continuous_pay||(e.bar_day_continuous_pay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.BarDayContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.BarDayType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.BarDayContinuousPayItem=a}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.bar_day_continuous_pay||(r.bar_day_continuous_pay={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.BarDayType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.BarDayType);if(l.instance.setRPProperty("barDay1RP",!1),e&&t){var i=t[19];if(i){this._restTm=t[2],this._moneyAcc=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(820),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.BarDayType);l.instance.setRPProperty("barDay1RP",t&&e&&i)},e=i,t.BarDayContinuousPayModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return null!==n&&n.apply(this,arguments)||this}i=e.bar_day_cumulate_pay||(e.bar_day_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.BarDayCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.BarDayCumulatePayModel.instance.accumulate,e=this._datas[1];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.BarDayType)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.BarDayCumulatePayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.bar_day_cumulate_pay||(a.bar_day_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("barDay2RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.BarDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.BarDayType)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(821),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.BarDayType);r.instance.setRPProperty("barDay2RP",t&&e&&i)},e=i,t.BarDayCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_festival||(t.bar_day_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayFestConLoginItem=n}(modules=modules||{}),function(t){var e,s,i,n,r,l,o,h,a;function c(){return s.call(this)||this}e=t.festival||(t.festival={}),i=ui.HalloweenItemUI,n=t.common.CustomClip,r=t.bag.BagModel,l=t.bag.BagUtil,o=t.festival.FestivalModel,h=t.festival.FestivalCtrl,s=i,__extends(c,s),Object.defineProperty(c.prototype,"commonEventType",{get:function(){return"ZHIZHEN_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"festivalTypeEx",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"hintArr",{get:function(){return[]},enumerable:!0,configurable:!0}),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip&&(this._btnClip.removeSelf(),this._btnClip.destroy()),s.prototype.destroy.call(this,t)},c.prototype.initialize=function(){s.prototype.initialize.call(this),this.creatEffect(),this.setHint(!1)},c.prototype.onEvt=function(){s.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHandler),this.onAutoClick(this.changeImg,this,this.changeHint),this.onAutoGlobalEvt(this.commonEventType,this,this.updateHint),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateClip),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_SWAP_UPDATE",this,this.updateInfo)},c.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.updateHint(),this.updateClip(),this.updateInfo()},c.prototype.setData=function(t){s.prototype.setData.call(this,t);var e=(this._cfg=t)[3][0],i=[t[4][0][0],t[4][0][1],0,null],n=this._cfg[5];this._count=n-o.instance.getSwapTimesById(this.festivalType,this._cfg[0]),this.setBtnHide(this._count<=0),this.box.dataSource=i,this.box._nameTxt.visible=!0,this.countimg.skin=CommonUtil.getIconById(e[0]),this.countTxt.text=e[1].toString(),this.tipTxt.text=this._count.toString(),this.tipTxt.color=this._count<=0?"#FF0000":"#168a17",this.updateHint()},c.prototype.updateInfo=function(){var t=this._cfg[5];this._count=t-o.instance.getSwapTimesById(this.festivalType,this._cfg[0]),this.setBtnHide(this._count<=0),this.tipTxt.text=this._count.toString(),this.tipTxt.color=this._count<=0?"#FF0000":"#168a17"},c.prototype.close=function(){s.prototype.close.call(this),this._btnClip.stop(),this._btnClip.visible=!1},c.prototype.creatEffect=function(){this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-2,this.sureBtn.y-5),this._btnClip.scale(.6,.6,!0),this._btnClip.visible=!1},c.prototype.sureHandler=function(){var e=this;if(this._cfg){var t=this._cfg[3][0][0],i=this._cfg[3][0][1],n=r.instance.getItemCountById(t),s=n-i;if(s<0)l.openLackPropAlert(t,s);else{CommonUtil.getNameByItemId(this._cfg[4][0][0]);var o=Handler.create(this,function(t){h.instance.swapFestWorld(e.festivalType,e._cfg[0],t)}),a=[this._cfg[4][0][0],this._cfg[4][0][1],0,null];WindowManager.instance.open(469,[[t],[n],[i],a,o,this._count])}}},c.prototype.updateHint=function(){var t=this.hintArr,e=!1;t&&this._cfg&&-1!==t.indexOf(this._cfg[0])&&(e=!0),this.setHint(e)},c.prototype.changeHint=function(){this.setHint(!this._hint,!0)},c.prototype.setHint=function(t,e){void 0===e&&(e=!1),this._hint!=t&&(this._hint=t,this.tipImg.visible=t,e&&this._cfg&&h.instance.saveHint(this.festivalTypeEx,this._cfg[0],t)),this.updateClip()},c.prototype.updateClip=function(){if(this._cfg&&this._hint){var t=this._cfg[3][0][0],e=this._cfg[3][0][1];r.instance.getItemCountById(t)-e<0||this._count<=0?(this._btnClip.stop(),this._btnClip.visible=!1):(this._btnClip.play(),this._btnClip.visible=!0)}else this._btnClip.stop(),this._btnClip.visible=!1},c.prototype.setBtnHide=function(t){t?(this._btnClip.stop(),this._btnClip.visible=!1,this.sureBtn.visible=!1,this.limitTxt.visible=!0):(this.sureBtn.visible=!0,this.limitTxt.visible=!1)},a=c,e.ConvertItem1=a}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_festival||(t.bar_day_festival={}),i=t.festival.ConvertItem1,__extends(s,i),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"BAR_DAY_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.BarDayTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintArr",{get:function(){return t.festival.FestivalModel.instance.BarDayHintArr},enumerable:!0,configurable:!0}),n=s,e.BarDayFestConvertItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_festival||(t.bar_day_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayFestDailyRewardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_good_man||(t.bar_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="student_day/icon_sypd_zsbz.png"},n=s,e.BarDayGoodManItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_good_man||(t.bar_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="student_day/icon_sypd_zsbz.png"},n=s,e.BarDayGoodManItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_score_rank||(t.bar_day_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayScoreRankItem=n}(modules=modules||{}),function(i){var n,s,o,a,t,e;function r(){var t=null!==s&&s.apply(this,arguments)||this;return t._type=i.festival.FestivalModel.instance.BarDayType,t}n=i.bar_day_seven_days_consume||(i.bar_day_seven_days_consume={}),o=i.config.festivalCostTotalCfg,a=i.bag.BagUtil,t=i.soaring_singlePay.PayAndAwardsItem,s=t,__extends(r,s),r.prototype.setData=function(t){if(s.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText1.visible=!0,this.scheduleText.visible=!1,this.scheduleText1.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:i.notice.SystemNoticeManager.instance.addNotice("消耗"+o.instance.getStrByType(this._type)+"数量不足",!0);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),a.canAddItemsByBagIdCount(t)&&n.BarDaySevenDaysConsumeCtrl.instance.DrawFestCostTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计消费<span style='color:#b15315'>"+t+o.instance.getStrByType(this._type)+"</span>可领取",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.setBtnSure=function(){var t;i.festival.FestivalModel.instance.getHuoDongType(this._type)?0==(t=this._value[1])?(this.showCanReceive(),this.sureBtn.label="领取",this._btnClip.stop(),this._btnClip.visible=!1):1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.showScheduleText=function(){var t=n.BarDaySevenDaysConsumeModel.instance.gold,e=this._datas[2];this.scheduleText1.text="("+t+"/"+e+")",this.scheduleText1.color=e<=t?"#16ba17":"#FF3e3e"},e=r,n.BarDaySevenDaysConsumeItem=e}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._gold=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.bar_day_seven_days_consume||(r.bar_day_seven_days_consume={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gold",{get:function(){return this._gold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.BarDayType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.BarDayType);if(l.instance.setRPProperty("barDay4RP",!1),e&&t){var i=t[15];if(i){this._restTm=t[2],this._gold=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(823),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.BarDayType);l.instance.setRPProperty("barDay4RP",t&&e&&i)},e=i,t.BarDaySevenDaysConsumeModel=e}(modules=modules||{}),function(n){var s,i,o,a,r,t,e;function l(){return i.call(this)||this}s=n.bar_day_single_pay||(n.bar_day_single_pay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,t=n.soaring_singlePay.PayAndAwardsItem,i=t,__extends(l,i),l.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},l.prototype.sureBtnHandler=function(){var t=this._value[1];if(Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111),this.close();else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.BarDaySinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},l.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},l.prototype.showScheduleText=function(){var t=this._value[1],e=Math.round(t%1e3),i=this._datas[0];0==s.BarDaySinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},l.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(n.festival.FestivalModel.instance.BarDayType)){var t=this._value[1],e=this._datas[0],i=s.BarDaySinglePayModel.instance.getState(t,e);0===i?this.showGotoRecharge():1===i?this.showCanReceive():this.showReceived()}else this.showOver()},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,i.prototype.destroy.call(this,t)},e=l,s.BarDaySinglePayItem=e}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.bar_day_single_pay||(a.bar_day_single_pay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("barDay6RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.BarDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.BarDayType)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(822),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.BarDayType);l.instance.setRPProperty("barDay6RP",t&&e&&i)},e=i,t.BarDaySinglePayModel=e}(modules=modules||{}),function(r){var t,n,s,e;function i(){return n.call(this)||this}t=r.bar_day_star||(r.bar_day_star={}),s=r.config.GoodRankSingleCfg,n=ui.BarDaySartItem1UI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this.shouHuPlayer=[this.item2,this.item3],this.shouHuPlayerText=[this.zanWuText1,this.zanWuText2],this.shouHuPlayerHTML=[this.StatementHTML1,this.StatementHTML2],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),CommonUtil.setHTMLPro(this.StatementHTML1,"#1f304d","SimHei",22,"center"),CommonUtil.setHTMLPro(this.StatementHTML2,"#1f304d","SimHei",22,"center")},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI)},i.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showUI()},i.prototype.setData=function(t){n.prototype.setData.call(this,t),this.mingCiImg.visible=this.mingCIclip.visible=1<=t&&t<=3,this.rankText.visible=4<=t,this.rankText.text="第 "+t+" 名",this.mingCIclip.value=""+t,this._mingCi=t,this._dates=s.instance.getCfgsByGrade(r.festival.FestivalModel.instance.BarDayType,r.festival.FestivalModel.instance.getCrossOpenServerDay(r.festival.FestivalModel.instance.BarDayType),this._mingCi);var e=this._dates[3],i=this._dates[6];this.StatementHTML.innerHTML="收到"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.BarDayType)+"达<span style='color:#168a17'>"+e+"</span>可上榜",this.StatementHTML1.innerHTML="赠送<span style='color:#168a17'>"+(i?i[0]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.BarDayType)+"可上榜",this.StatementHTML2.innerHTML="赠送<span style='color:#168a17'>"+(i?i[1]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.BarDayType)+"可上榜"},i.prototype.showUI=function(){if(this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!1,this._theGoodRanker=r.single_dog_sart.SingleDogSartModel.instance.getTableByRank(r.festival.FestivalModel.instance.BarDayType,this._mingCi),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.item1.data=t,this.item1.visible=!0,this.item1.giveBtn.visible=!0;for(var i=0;i<2;i++){var n=e[i],s=this.shouHuPlayer[i],o=this.shouHuPlayerText[i],a=this.shouHuPlayerHTML[i];n?(s.visible=!0,a.visible=o.visible=!1,s.data=n):(a.visible=o.visible=!0,s.visible=!1)}}else this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML2.visible=this.StatementHTML1.visible=this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!0},e=i,t.BarDayStarItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_star||(t.bar_day_star={}),i=t.single_dog_sart.SingleDogSartItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayStarItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_star||(t.bar_day_star={}),i=t.single_dog_sart.SingleDogSartItem2,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.BarDayType},enumerable:!0,configurable:!0}),n=s,e.BarDayStarItem2=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_store||(t.bar_day_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.BarDayStoreModel.instance.rewardListById,this.types=t.festival.FestivalModel.instance.BarDayType,i.prototype.showUI.call(this)},n=s,e.BarDayStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.bar_day_store||(a.bar_day_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.BarDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.BarDayType)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("元宵 商城 数据：",this.rewardList)}}},e=i,t.BarDayStoreModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.bar_day_yu_lan||(t.bar_day_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanItem,__extends(s,i),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.wardText.text="助攻奖励"},n=s,e.BarDayYuLanItem=n}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.childrens_day_continuous_pay||(e.childrens_day_continuous_pay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.ChildrensDayContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.ChildrensDayType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.ChildrensDayContinuousPayItem=a}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.childrens_day_continuous_pay||(r.childrens_day_continuous_pay={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.ChildrensDayType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.ChildrensDayType);if(l.instance.setRPProperty("childrensDay1RP",!1),e&&t){var i=t[19];if(i){this._restTm=t[2],this._moneyAcc=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(790),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.ChildrensDayType);l.instance.setRPProperty("childrensDay1RP",t&&e&&i)},e=i,t.ChildrensDayContinuousPayModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return null!==n&&n.apply(this,arguments)||this}i=e.childrens_day_cumulate_pay||(e.childrens_day_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.ChildrensDayCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.ChildrensDayCumulatePayModel.instance.accumulate,e=this._datas[1];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.ChildrensDayType)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.ChildrensDayCumulatePayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.childrens_day_cumulate_pay||(a.childrens_day_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("childrensDay2RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.ChildrensDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.ChildrensDayType)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(791),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.ChildrensDayType);r.instance.setRPProperty("childrensDay2RP",t&&e&&i)},e=i,t.ChildrensDayCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_festival||(t.childrens_day_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayFestConLoginItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_festival||(t.childrens_day_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayFestDailyRewardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_good_man||(t.childrens_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="dragon_boat_day/icon_ldsd_zsgzk.png"},n=s,e.ChildrensDayGoodManItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_good_man||(t.childrens_day_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="dragon_boat_day/icon_ldsd_zsgzk.png"},n=s,e.ChildrensDayGoodManItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_pay_rank||(t.childrens_day_pay_rank={}),i=t.festival.PayRankBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"consumptionItemId",{get:function(){return e.ChildrensDayPayRankModel.instance.consumptionItemId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableByRank",{get:function(){return e.ChildrensDayPayRankModel.instance._rankersTableByRank},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayPayRankItem=n}(modules=modules||{}),function(r){var t,e;function i(){this._consumptionItemId=r.config.BlendCfg.instance.getCfgById(67016)[1][0],this._consume=0,this._restTmConsumption=0,this._rankersTableByRank={},this._rankersTableById={}}t=r.childrens_day_pay_rank||(r.childrens_day_pay_rank={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTmConsumption",{get:function(){return this._restTmConsumption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consume",{get:function(){return this._consume},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consumptionItemId",{get:function(){return this._consumptionItemId},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.ChildrensDayType];r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.ChildrensDayType)&&t&&(this._consume=t[18],this._consume=this._consume?this._consume:0)},i.prototype.uodateInfoConsume=function(t){var e=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.ChildrensDayType];r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.ChildrensDayType)&&e&&(this._consume=t[0],this._consume=this._consume?this._consume:0,GlobalData.dispatcher.event("ACTIVITY_SPENDING_RANKING"))},i.prototype.uodateInfoDate=function(t){this._rankersTableByRank={},this._rankersTableById={};var e=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.ChildrensDayType];if(r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.ChildrensDayType)&&e){this._restTmConsumption=t[0];for(var i=t[1],n=0;n<i.length;n++){var s=i[n];if(s){var o=s[3],a=s[0];this._rankersTableByRank[o]=s,this._rankersTableById[a]=s}}GlobalData.dispatcher.event("ACTIVITY_SPENDING_RANKING")}},e=i,t.ChildrensDayPayRankModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_score_rank||(t.childrens_day_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayScoreRankItem=n}(modules=modules||{}),function(i){var n,s,o,a,t,e;function r(){var t=null!==s&&s.apply(this,arguments)||this;return t._type=i.festival.FestivalModel.instance.ChildrensDayType,t}n=i.childrens_day_seven_days_consume||(i.childrens_day_seven_days_consume={}),o=i.config.festivalCostTotalCfg,a=i.bag.BagUtil,t=i.soaring_singlePay.PayAndAwardsItem,s=t,__extends(r,s),r.prototype.setData=function(t){if(s.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText1.visible=!0,this.scheduleText.visible=!1,this.scheduleText1.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:i.notice.SystemNoticeManager.instance.addNotice("消耗"+o.instance.getStrByType(this._type)+"数量不足",!0);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),a.canAddItemsByBagIdCount(t)&&n.ChildrensDaySevenDaysConsumeCtrl.instance.DrawFestCostTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计消费<span style='color:#b15315'>"+t+o.instance.getStrByType(this._type)+"</span>可领取",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.setBtnSure=function(){var t;i.festival.FestivalModel.instance.getHuoDongType(this._type)?0==(t=this._value[1])?(this.showCanReceive(),this.sureBtn.label="领取",this._btnClip.stop(),this._btnClip.visible=!1):1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.showScheduleText=function(){var t=n.ChildrensDaySevenDaysConsumeModel.instance.gold,e=this._datas[2];this.scheduleText1.text="("+t+"/"+e+")",this.scheduleText1.color=e<=t?"#16ba17":"#FF3e3e"},e=r,n.ChildrensDaySevenDaysConsumeItem=e}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._gold=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.childrens_day_seven_days_consume||(r.childrens_day_seven_days_consume={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gold",{get:function(){return this._gold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.ChildrensDayType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.ChildrensDayType);if(l.instance.setRPProperty("childrensDay4RP",!1),e&&t){var i=t[15];if(i){this._restTm=t[2],this._gold=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(792),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.ChildrensDayType);l.instance.setRPProperty("childrensDay4RP",t&&e&&i)},e=i,t.ChildrensDaySevenDaysConsumeModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.childrens_day_seven_days_pay||(e.childrens_day_seven_days_pay={}),s=e.config.FestivalPayTotalCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.ChildrensDaySevenDaysPayCtrl.instance.DrawFestPayTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.ChildrensDaySevenDaysPayModel.instance.money,e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.ChildrensDayType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.ChildrensDaySevenDaysPayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.childrens_day_seven_days_pay||(a.childrens_day_seven_days_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("childrensDay5RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.ChildrensDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.ChildrensDayType)&&t){var e=t[14];if(e){this._restTm=t[2],this._money=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayTotalCfg.instance.getCfgsById(o)[5]<=this._money&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(793),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.ChildrensDayType);r.instance.setRPProperty("childrensDay5RP",t&&e&&i)},e=i,t.ChildrensDaySevenDaysPayModel=e}(modules=modules||{}),function(n){var s,i,o,a,r,t,e;function l(){return i.call(this)||this}s=n.childrens_day_single_pay||(n.childrens_day_single_pay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,t=n.soaring_singlePay.PayAndAwardsItem,i=t,__extends(l,i),l.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},l.prototype.sureBtnHandler=function(){var t=this._value[1];if(Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111),this.close();else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.ChildrensDaySinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},l.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},l.prototype.showScheduleText=function(){var t=this._value[1],e=Math.round(t%1e3),i=this._datas[0];0==s.ChildrensDaySinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},l.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(n.festival.FestivalModel.instance.ChildrensDayType)){var t=this._value[1],e=this._datas[0],i=s.ChildrensDaySinglePayModel.instance.getState(t,e);0===i?this.showGotoRecharge():1===i?this.showCanReceive():this.showReceived()}else this.showOver()},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,i.prototype.destroy.call(this,t)},e=l,s.ChildrensDaySinglePayItem=e}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.childrens_day_single_pay||(a.childrens_day_single_pay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("childrensDay6RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.ChildrensDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.ChildrensDayType)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(794),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.ChildrensDayType);l.instance.setRPProperty("childrensDay6RP",t&&e&&i)},e=i,t.ChildrensDaySinglePayModel=e}(modules=modules||{}),function(r){var t,n,s,e;function i(){return null!==n&&n.apply(this,arguments)||this}t=r.childrens_day_star||(r.childrens_day_star={}),s=r.config.GoodRankSingleCfg,n=ui.ChildrensDaySartItem1UI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this.shouHuPlayer=[this.item2,this.item3],this.shouHuPlayerText=[this.zanWuText1,this.zanWuText2],this.shouHuPlayerHTML=[this.StatementHTML1,this.StatementHTML2],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),CommonUtil.setHTMLPro(this.StatementHTML1,"#1f304d","SimHei",22,"center"),CommonUtil.setHTMLPro(this.StatementHTML2,"#1f304d","SimHei",22,"center")},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI)},i.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showUI()},i.prototype.setData=function(t){n.prototype.setData.call(this,t),this.mingCiImg.visible=this.mingCIclip.visible=1<=t&&t<=3,this.rankText.visible=4<=t,this.rankText.text="第 "+t+" 名",this.mingCIclip.value=""+t,this._mingCi=t,this._dates=s.instance.getCfgsByGrade(r.festival.FestivalModel.instance.ChildrensDayType,r.festival.FestivalModel.instance.getCrossOpenServerDay(r.festival.FestivalModel.instance.ChildrensDayType),this._mingCi);var e=this._dates[3],i=this._dates[6];this.StatementHTML.innerHTML="收到"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.ChildrensDayType)+"达<span style='color:#168a17'>"+e+"</span>可上榜",this.StatementHTML1.innerHTML="赠送<span style='color:#168a17'>"+(i?i[0]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.ChildrensDayType)+"可上榜",this.StatementHTML2.innerHTML="赠送<span style='color:#168a17'>"+(i?i[1]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.ChildrensDayType)+"可上榜"},i.prototype.showUI=function(){if(this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!1,this._theGoodRanker=r.single_dog_sart.SingleDogSartModel.instance.getTableByRank(r.festival.FestivalModel.instance.ChildrensDayType,this._mingCi),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.item1.data=t,this.item1.visible=!0,this.item1.giveBtn.visible=!0;for(var i=0;i<2;i++){var n=e[i],s=this.shouHuPlayer[i],o=this.shouHuPlayerText[i],a=this.shouHuPlayerHTML[i];n?(s.visible=!0,a.visible=o.visible=!1,s.data=n):(a.visible=o.visible=!0,s.visible=!1)}}else this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML2.visible=this.StatementHTML1.visible=this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!0},e=i,t.ChildrensDayStarItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_star||(t.childrens_day_star={}),i=t.single_dog_sart.SingleDogSartItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayStarItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_star||(t.childrens_day_star={}),i=t.single_dog_sart.SingleDogSartItem2,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.ChildrensDayType},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayStarItem2=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_store||(t.childrens_day_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.ChildrensDayStoreModel.instance.rewardListById,this.types=t.festival.FestivalModel.instance.ChildrensDayType,i.prototype.showUI.call(this)},n=s,e.ChildrensDayStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.childrens_day_store||(a.childrens_day_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.ChildrensDayType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.ChildrensDayType)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("新年 商城 数据：",this.rewardList)}}},e=i,t.ChildrensDayStoreModel=e}(modules=modules||{}),function(a){var t,i,e,n,s;function r(){this.oneNum=0,this.twoNum=0,this.threeNum=0,this.id=0,this._xunBaoType=0,this._restTm=0,this._score=0,this._state=1,this.dontShowTreasure=!1,this.festivalType=a.festival.FestivalModel.instance.ChildrensDayType,this._myXunbaoNote=new Array,this._myNodeList=new Array,this._myNodeListByObjId=new Array,this._rewardList=new Array,this._xunBaoType=100+this.festivalType,this.getBlendCfgShuJu()}t=a.childrens_day_treasure||(a.childrens_day_treasure={}),i=a.redPoint.RedPointCtrl,e=a.config.TreasureCfg,n=a.funcOpen.FuncOpenModel,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xunBaoType",{get:function(){return this._xunBaoType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xianyu",{get:function(){return a.bag.BagModel.instance.getItemCountById(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),r.prototype.callBakFunction=function(t){r.instance._restTm<GlobalData.serverTime?r.instance.dontShowTreasure?t():WindowManager.instance.open(1203,t):t()},r.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[r.instance.festivalType];if(a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType)&&t){var e=t[16];if(e){var i=e[0];if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=r.instance._myXunbaoNote.length;o=0<o?o:0,r.instance._myXunbaoNote[o]=s}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MY")}}},r.prototype.getSelfBroadcast=function(){var t=this._myXunbaoNote;return t&&100<t.length&&t.splice(0,t.length-100),t=t||[]},r.prototype.setRewardList=function(t){t&&(this._rewardList=t),this.setRP(),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},r.prototype.getInfoMyNodeList=function(t){if(t){this._myNodeList.length=0,this._myNodeListByObjId.length=0,this._myNodeList=new Array,this._myNodeListByObjId=new Array;for(var e=0;e<t.length;e++){var i=t[e],n=i[0];if(n){var s=n[0],o=n[2];this._myNodeList[o]=i,this._myNodeListByObjId[s]=i}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MYLIST")}},r.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(795),e=a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType);i.instance.setRPProperty("childrensDay7RP",e&&t&&this.getgRadeRP())},r.prototype.getgRadeRP=function(){if(0<this.xianyu)return!0;if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&1==e[1])return!0}return!1},r.prototype.getRewardStart=function(t){if(this.rewardList){var e=this._rewardList[t];return e?e[1]:0}},r.prototype.getgRade=function(){for(var t=null,e=null,i=0;i<this.rewardList.length;i++){var n=this.rewardList[i];if(n){var s=n[1];if(1==s)return[i,s];2==s?t=[i,s]:e=e||[i,s]}}return e||t||[0,0]},r.prototype.getBlendCfgShuJu=function(){this.oneNum=e.instance.getItemConditionByGrad(this.xunBaoType,0)[1],this.twoNum=e.instance.getItemConditionByGrad(this.xunBaoType,1)[1],this.threeNum=e.instance.getItemConditionByGrad(this.xunBaoType,2)[1];var t=e.instance.getItemConditionByGrad(this.xunBaoType,0);this.id=t[0]},s=r,t.ChildrensDayTreasureModel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_treasure||(t.childrens_day_treasure={}),i=t.festival.TreasureRankAwardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.ChildrensDayTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"myNodeList",{get:function(){return e.ChildrensDayTreasureModel.instance._myNodeList},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayTreasureRankAwardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_treasure||(t.childrens_day_treasure={}),i=t.festival.TreasureRankBaseItem,__extends(s,i),s.prototype.getRewardStart=function(t){return e.ChildrensDayTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.ChildrensDayTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.ChildrensDayTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.ChildrensDayTreasureRankItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.childrens_day_yu_lan||(t.childrens_day_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanItem,__extends(s,i),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.wardText.text="助攻奖励"},n=s,e.ChildrensDayYuLanItem=n}(modules=modules||{}),function(t){var e,i,s,n;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.common_alert_ex||(t.common_alert_ex={}),s=t.bag.BagUtil,i=t.soaring_singlePay.PayAndAwardsItem,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("SUSANSLADE_UPDATA_VIEW",this,this.updataView)},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this.updataView()},o.prototype.sureBtnHandler=function(){if(2===this.getState())WindowManager.instance.open(111),this.close();else{var t=[],e=this.rewards;if(e){for(var i=0,n=e.length;i<n;i+=2)t.push([e[i],e[i+1],0,null]);s.canAddItemsByBagIdCount(t)&&this.drawAccPayAward()}}},o.prototype.updataView=function(){var t=this.data&&this.accPay||0;this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励";var e=this.accPayMoney,i=this.getState();this.overImg.visible=this.sureBtn.visible=this.receivedImg.visible=!1,this._btnClip.visible=!1,this.scheduleText.text="("+e+"/"+t+")";var n=t<=e?"#168a17":"#FF3E3E";if(this.scheduleText.color=n,this.restTm>GlobalData.serverTime)switch(i){case 2:this.showGotoRecharge();break;case 1:this.showCanReceive();break;case 3:this.showReceived()}else this.showOver();for(var s=this.rewards,o=[],a=0,r=s.length;a<r;a+=2)o.push([s[a],s[a+1]]);this.showRewards(o),this.CanBuyHTML.visible=!1},n=o,e.AccPayBaseItem=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg={};for(var t=GlobalData.getConfig("active_red_envelope"),e=0,i=t.length;e<i;e++)this._cfg[t[e][0]]=t[e]},n.prototype.getChannelByCfg=function(t){return this._cfg[t]},i=n,e.ActiveRedEnvelopeCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.archive||(t.archive={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfgs=GlobalData.getConfig("illustrated_handbook_skill")},n.prototype.getCfgByType=function(t){for(var e=[],i=0;i<this._cfgs.length;i++)if(this._cfgs[i][0]===t)e.push(this._cfgs[i]);else if(this._cfgs[i][0]>t)break;return e},i=n,e.ArchiveSkillCfg=i}(modules=modules||{}),function(a){var t,e;function i(){this.init()}t=a.config||(a.config={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.init=function(){this._TableArrCfg={};for(var t=GlobalData.getConfig("collection"),e=t.length,i=0;i<e;i++){var n=t[i];if(n){var s=n[4];this._TableArrCfg[s]||(this._TableArrCfg[s]=new Array),this._TableArrCfg[s].push(n)}}},i.prototype.getDayByTable=function(t){var e=this._TableArrCfg[t],i=[];if(e)for(var n=a.festival.FestivalModel.instance.getCrossOpenServerDay(t),s=e.length,o=0;o<s;o++)n>=e[o][3][0]&&n<=e[o][3][1]&&i.push(e[o]);return i},e=i,t.CollectionCfg=e}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.cumulate2_pay||(t.cumulate2_pay={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("cumulate_pay2"),e=0,i=t.length;e<i;e++){var n=t[e][2];this._tab[n]||(this._tab[n]=[]),this._tab[n].push(t[e])}this.getfgs=t},n.prototype.getCfgsByServerDay=function(t){return this._tab[t]},n.prototype.getcfgs=function(){return this.getfgs},i=n,e.CumulatePay2Cfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.cfgs={},this.itemIds=[],this.attrIds=[];var t=GlobalData.getConfig("tianming");for(var e in t){var i=t[e][0];this.cfgs[i]||(this.cfgs[i]=[]),this.cfgs[i].push(t[e]),this.itemIds[i-1]||(this.itemIds[i-1]=t[e][2][0]);for(var n=t[e][3],s=0;s<n.length;s+=2)-1===this.attrIds.indexOf(n[s])&&this.attrIds.push(n[s]);n=t[e][6];for(s=0;s<n.length;s+=2)-1===this.attrIds.indexOf(n[s])&&this.attrIds.push(n[s])}this.attrIds.sort(function(t,e){return t-e})}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),i=n,e.DestinyPelletCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._cfg=GlobalData.getConfig("festival_online_reward")},n.prototype.getCfgByIdAndDay=function(t,e,i){for(var n in this._cfg)if(t===this._cfg[n][1]&&12===i)return this._cfg[n]},i=n,e.FestivalOnlineRewardCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){if(this._tab={},this._arr=GlobalData.getConfig("good_blend"),this._arr)for(var t=0,e=this._arr.length;t<e;t++){var i=this._arr[t],n=i[0];this._tab[n]=i}},n.prototype.getCfgsByType=function(t){return this._tab[t]},i=n,e.GoodBlendCfg=i}(modules=modules||{}),function(t){var i,e;function n(){for(var t=GlobalData.getConfig("scene_limittime"),e=0;e<t.length;++e)if(3801===t[e][1]){this.openDay=t[e][4],this.openTime=t[e][6],this.closeTime=t[e][7];break}this.preBattleTime=i.BlendCfg.instance.getCfgById(97111)[1][0],this.mainBattleTime=i.BlendCfg.instance.getCfgById(97111)[1][1]}i=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getCfgByRound=function(t){return GlobalData.getConfig("xiandao_conference")[t-1]},n.prototype.getRewardsByRankType=function(t){var e=[],i=GlobalData.getConfig("xiandao_conference_rank");for(var n in i)i[n][1]===t&&e.push(i[n]);return e},n.prototype.getRewardByTypeAndRank=function(t,e){var i=GlobalData.getConfig("xiandao_conference_rank");for(var n in i)if(i[n][1]===t&&i[n][0][0]<=e&&i[n][0][1]>=e)return i[n];return null},e=n,i.ImmortalContestCfg=e}(modules=modules||{}),function(t){var e,n,i;function s(){this.init()}e=t.kuanghuan||(t.kuanghuan={}),n=Laya.Dictionary,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.init=function(){this._dic=new n;for(var t=GlobalData.getConfig("kuanghuan"),e=0,i=t.length;e<i;e++)this._dic.set(t[e][0],t[e]);this.getcfg=t},s.prototype.getCfgBytype=function(t){for(var e=[],i=0,n=this.getcfg.length;i<n;i++)t==this.getcfg[i][1]&&e.push(this.getcfg[i]);return e},s.prototype.getCfgById=function(t){return this._dic.get(t)},i=s,e.KuangHuanCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};var t=GlobalData.getConfig("ruins_all_people_tasks");if(t)for(var e in t){var i=t[e],n=i[0];this._tab[n]||(this._tab[n]=new Array),this._tab[n].push(i)}},n.prototype.getdayByGradeArr=function(t,e){var i=this._tab[t],n=[];if(i)for(var s=i.length,o=0;o<s;o++){var a=i[o];if(a){var r=a[2],l=r[0],h=r[1];l<=e&&e<=h&&n.push(a)}}return n},i=n,e.RuinsAllPeopleTasksCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.sprint_rank||(t.sprint_rank={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._tab={};for(var t=GlobalData.getConfig("sprint_rank_task"),e=0,i=t.length;e<i;e++)this._tab[t[e][0]]=t[e];this.getArr=t},n.prototype.getCfgById=function(t){return this._tab[t]},n.prototype.getCfgByType=function(t){for(var e=[],i=0,n=this.getArr.length;i<n;i++)t==this.getArr[i][2]&&e.push(this.getArr[i]);return e},i=n,e.SprintRankTaskCfg=i}(modules=modules||{}),function(t){var e,i;function n(){this._tab={},this.flags=[],this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){for(var t=GlobalData.getConfig("yuanshen_suit"),e=0,i=t.length;e<i;e++){var n=t[e][0],s=t[e][2],o=t[e][1];this._tab[n]||(this._tab[n]=[]),this._tab[n][s]=t[e],-1===this.flags.indexOf(o)&&this.flags.push(o)}},n.prototype.getCfgByIdColor=function(t,e){return this._tab[t][e]},i=n,e.YuanshenSuitCfg=i}(modules=modules||{}),function(t){var s,e,i,n,o,a;function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.getState=0,t}s=t.cumulate2_pay||(t.cumulate2_pay={}),i=ui.CumulateItemUI,n=t.common.CustomClip,o=t.bag.BagUtil,e=i,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._cfg=null,this._itemIdAr=null,e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this._itemId=0,this._itemIdAr=[],CommonUtil.setHTMLPro(this.cumulateText,"#b15315","SimHei",26),this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-5,this.sureBtn.y-10,.8)},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("CUMULATE_PAY_UPDATE",this,this.updateView)},r.prototype.onOpened=function(){this.updateView()},r.prototype.close=function(){e.prototype.close.call(this),n.thisStop(this._btnClip)},r.prototype.updateView=function(){this.setBtnSure(),this.setMoney()},r.prototype.setData=function(t){this._cfg=t,this._cumuMoney=this._cfg[1],this._itemId=this._cfg[0],this._itemIdAr.push(this._cfg[0]);for(var e=[],i=this._cfg[3],n=0;n<.5*i.length;n++)e.push(i[2*n]);this.setMoney();var s=e.length,o=[];for(o.push(this.cumulateBase1),o.push(this.cumulateBase2),o.push(this.cumulateBase3),o.push(this.cumulateBase4),n=0;n<4;n++)n<s?(o[n].visible=!0,o[n].dataSource=[i[2*n],i[2*n+1],0,null]):o[n].visible=!1;this.setBtnSure()},r.prototype.sureBtnHandler=function(){if(0==this.getState&&(WindowManager.instance.open(111),WindowManager.instance.close(232)),1==this.getState){for(var t=this._cfg[3],e=[],i=0,n=.5*t.length;i<n;i++)e.push([t[2*i],t[2*i+1],0,null]);o.canAddItemsByBagIdCount(e)&&s.Cumulate2PayCtrl.instance.getCumulatepay2Reward([this._itemId])}},r.prototype.setBtnSure=function(){this.getState=0;var t=s.CumulatePay2Model.instance.rewarList[this._itemId];t?(this.getState=t[1],0!==this.getState&&(this.sureBtn.label="领取",this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119",1==this.getState?(n.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.receivedImg.visible=!1):(n.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0))):(this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460",this.sureBtn.label="前往充值",this.sureBtn.visible=!0,this.receivedImg.visible=!1,n.thisStop(this._btnClip))},r.prototype.setMoney=function(){this._stateMoney=s.CumulatePay2Model.instance.totalMoney,this.cumulateText.innerHTML=this._cfg[1]+"元<span style='color:#1f304d'>可领取！</span>",this.scheduleText.text=this._stateMoney+"/"+this._cumuMoney,this.scheduleText.color=this._stateMoney>=this._cumuMoney?"#16ba17":"#FF3e3e"},a=r,s.CumulatePay2Item=a}(modules=modules||{}),function(n){var t,s,e;function i(){this._giveState=-1,this._totalMoney=-1,this._rewarTab=new Array}t=n.cumulate2_pay||(n.cumulate2_pay={}),s=n.redPoint.RedPointCtrl,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.updateInfo=function(t){this._giveState=t[0],this._totalMoney=t[1];var e=t[2];this._rewarTab=new Array;for(var i=0,n=e.length;i<n;i++)this._rewarTab[e[i][0]]=e[i];this._activityTime=t[3]+GlobalData.serverTime,this._serverDay=t[4],this.setRP(),GlobalData.dispatcher.event("CUMULATE_PAY_UPDATE")},Object.defineProperty(i.prototype,"giveState",{get:function(){return this._giveState},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"totalMoney",{get:function(){return this._totalMoney},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewarList",{get:function(){return this._rewarTab},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"activityTime",{get:function(){return this._activityTime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"serverDay",{get:function(){return this._serverDay},enumerable:!0,configurable:!0}),i.prototype.setRP=function(){var t=n.funcOpen.FuncOpenModel.instance.getFuncIsOpen(140),e=!1;if(this._rewarTab)for(var i in this._rewarTab)if(1===this._rewarTab[i][1]){e=!0;break}s.instance.setRPProperty("cumulate2RP",t&&e)},i.prototype.cumulatePayPRState=function(){var t=!1;for(var e in this._rewarTab)if(1===this._rewarTab[e][1]){t=!0;break}s.instance.setRPProperty("cumulate2RP",t)},e=i,t.CumulatePay2Model=e}(modules=modules||{}),function(t){var r,e,l,i;function n(){return e.call(this)||this}r=t.cumulatePay_shenHun||(t.cumulatePay_shenHun={}),l=t.bag.BagUtil,e=t.soaring_singlePay.PayAndAwardsItem,__extends(n,e),n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._Datas=t,this.showUI()},n.prototype.sureBtnHandler=function(){var t=this._Datas[0],e=r.CumulatePayShenHunModel.instance.rewardList[t];if(e)if(0<e[1]){var i=[],n=this._Datas[3];if(n){for(var s=0,o=n.length;s<o;s++){var a=n[s];i.push([a[0],a[1],0,null])}l.canAddItemsByBagIdCount(i)&&r.CumulatePayShenHunCtrl.instance.GetSinglePayJadeAward(this._Datas[0])}}else WindowManager.instance.open(111);else WindowManager.instance.open(111),this.close()},n.prototype.showUI=function(){var t=this._Datas,e=t[1],i=t[3];this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards(i),this.setBtnSure(),this.showScheduleText(),this.showCanBuyHTML()},n.prototype.showScheduleText=function(){var t=this._Datas[0],e=r.CumulatePayShenHunModel.instance.rewardList[t],i=0;if(e){i=e[1];var n=this._Datas[4],s=e[1],o=e[2];0==i&&0==n-(o-s)&&(i=1);var a="("+(1<i?1:i)+"/1)";this.scheduleText.text=a,this.scheduleText.color=1<=i?"#16ba17":"#FF3e3e"}else a="(0/1)",this.scheduleText.text=a,this.scheduleText.color="#FF3e3e"},n.prototype.showCanBuyHTML=function(){var t=this._Datas[0],e=this._Datas[4],i=r.CumulatePayShenHunModel.instance.rewardList[t];if(i){var n=i[1],s=(o=e-(i[2]-n))+"/"+e;this.CanBuyHTML.visible=1<e,this.CanBuyHTML.innerHTML=0<o?"活动次数:<span style='color:#16ba17'>"+s+"</span>":"活动次数:<span style='color:#FF3e3e'>"+s+"</span>"}else{var o;s=(o=e-(n=0))+"/"+e,this.CanBuyHTML.visible=1<e,this.CanBuyHTML.innerHTML=0<o?"活动次数:<span style='color:#16ba17'>"+s+"</span>":"活动次数:<span style='color:#FF3e3e'>"+s+"</span>"}},n.prototype.setBtnSure=function(){var t=this._Datas[0],e=r.CumulatePayShenHunModel.instance.rewardList[t];if(r.CumulatePayShenHunModel.instance.state)if(e){var i=e[0],n=r.CumulatePayShenHunModel.instance.getSteat(i);0==n?this.showCanReceive():1==n?this.showGotoRecharge():this.showReceived()}else this.showGotoRecharge();else this.showOver()},i=n,r.CumulatePayShenHunItem=i}(modules=modules||{}),function(e){var t,r,i,n,s;function o(){this._state=!1,this._rewardList=new Array,this._rewardList111=new Array,this._restTm=0}t=e.cumulatePay_shenHun||(e.cumulatePay_shenHun={}),r=e.config.SinglePayJadeCfg,i=e.redPoint.RedPointCtrl,n=e.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),o.prototype.getInfo=function(t){this._state=t[0],this._restTm=t[1],this._rewardList111.length=0,this._rewardList.length=0,this._rewardList=new Array,this._rewardList111=new Array;var e=t[2];if(this._rewardList111=t[2],e)for(var i=0;i<e.length;i++){var n=e[i],s=n[0];this._rewardList[s]=n}this.setActionOpen(),GlobalData.dispatcher.event("CUMULATEPAY_SHENHUN_UPDATE"),this.setRP()},o.prototype.setActionOpen=function(){var t=this._state?1:2;e.funcOpen.FuncOpenModel.instance.setActionOpen(196,t)},o.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList111.length;e++){var i=this._rewardList111[e];if(i&&0<i[1]){t=!0;break}}return t},o.prototype.getSteat=function(t){for(var e=0;e<this._rewardList111.length;e++){var i=this._rewardList111[e];if(i){var n=i[0],s=i[1],o=i[2],a=r.instance.getCfgById(n)[4];if(n==t)return 0<s?0:o-s==a?2:1}}return 1},o.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(196),e=this.getIsLingQu();i.instance.setRPProperty("cumulatePayShenHunRP",t&&e&&this._state)},s=o,t.CumulatePayShenHunModel=s}(modules=modules||{}),function(t){var r,e,l,i;function n(){return e.call(this)||this}r=t.cumulatePay_tianZhu||(t.cumulatePay_tianZhu={}),l=t.bag.BagUtil,e=t.soaring_singlePay.PayAndAwardsItem,__extends(n,e),n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._Datas=t,this.showUI()},n.prototype.sureBtnHandler=function(){var t=this._Datas[0],e=r.CumulatePayTianZhuModel.instance.rewardList[t];if(e)if(0<e[1]){var i=[],n=this._Datas[3];if(n){for(var s=0,o=n.length;s<o;s++){var a=n[s];i.push([a[0],a[1],0,null])}l.canAddItemsByBagIdCount(i)&&r.CumulatePayTianZhuCtrl.instance.GetSinglePayJadeAward(this._Datas[0])}}else WindowManager.instance.open(111);else WindowManager.instance.open(111),this.close()},n.prototype.showUI=function(){var t=this._Datas,e=t[1],i=t[3];this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards(i),this.setBtnSure(),this.showScheduleText(),this.showCanBuyHTML()},n.prototype.showScheduleText=function(){var t=this._Datas[0],e=r.CumulatePayTianZhuModel.instance.rewardList[t],i=0;if(e){i=e[1];var n=this._Datas[4],s=e[1],o=e[2];0==i&&0==n-(o-s)&&(i=1);var a="("+(1<i?1:i)+"/1)";this.scheduleText.text=a,this.scheduleText.color=1<=i?"#16ba17":"#FF3e3e"}else a="(0/1)",this.scheduleText.text=a,this.scheduleText.color="#FF3e3e"},n.prototype.showCanBuyHTML=function(){var t=this._Datas[0],e=this._Datas[4],i=r.CumulatePayTianZhuModel.instance.rewardList[t];if(i){var n=i[1],s=(o=e-(i[2]-n))+"/"+e;this.CanBuyHTML.visible=1<e,this.CanBuyHTML.innerHTML=0<o?"活动次数:<span style='color:#16ba17'>"+s+"</span>":"活动次数:<span style='color:#FF3e3e'>"+s+"</span>"}else{var o;s=(o=e-(n=0))+"/"+e,this.CanBuyHTML.visible=1<e,this.CanBuyHTML.innerHTML=0<o?"活动次数:<span style='color:#16ba17'>"+s+"</span>":"活动次数:<span style='color:#FF3e3e'>"+s+"</span>"}},n.prototype.setBtnSure=function(){var t=this._Datas[0],e=r.CumulatePayTianZhuModel.instance.rewardList[t];if(r.CumulatePayTianZhuModel.instance.state)if(e){var i=e[0],n=r.CumulatePayTianZhuModel.instance.getSteat(i);0==n?this.showCanReceive():1==n?this.showGotoRecharge():this.showReceived()}else this.showGotoRecharge();else this.showOver()},i=n,r.CumulatePayTianZhuItem=i}(modules=modules||{}),function(e){var t,r,i,n,s;function o(){this._state=!1,this._rewardList=new Array,this._rewardList111=new Array,this._restTm=0}t=e.cumulatePay_tianZhu||(e.cumulatePay_tianZhu={}),r=e.config.SinglePayPrintCfg,i=e.redPoint.RedPointCtrl,n=e.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),o.prototype.getInfo=function(t){this._state=t[0],this._restTm=t[1],this._rewardList111.length=0,this._rewardList.length=0,this._rewardList=new Array,this._rewardList111=new Array,this._rewardList111=t[2];var e=t[2];if(e)for(var i=0;i<e.length;i++){var n=e[i],s=n[0];this._rewardList[s]=n}this.setActionOpen(),GlobalData.dispatcher.event("CUMULATEPAY_TIANZHU_UPDATE"),this.setRP()},o.prototype.setActionOpen=function(){var t=this._state?1:2;e.funcOpen.FuncOpenModel.instance.setActionOpen(197,t)},o.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList111.length;e++){var i=this._rewardList111[e];if(i&&0<i[1]){t=!0;break}}return t},o.prototype.getSteat=function(t){for(var e=0;e<this._rewardList111.length;e++){var i=this._rewardList111[e];if(i){var n=i[0],s=i[1],o=i[2],a=r.instance.getCfgById(n)[4];if(n==t)return 0<s?0:o-s==a?2:1}}return 1},o.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(197),e=this.getIsLingQu();i.instance.setRPProperty("cumulatePayTianZhuRP",t&&e&&this._state)},s=o,t.CumulatePayTianZhuModel=s}(modules=modules||{}),function(t){var s,e,i,n,o,a;function r(){var t=e.call(this)||this;return t.getState=0,t}s=t.cumulate_pay||(t.cumulate_pay={}),i=ui.CumulateItemUI,n=t.common.CustomClip,o=t.bag.BagUtil,e=i,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this._itemId=0,this._itemIdAr=[],CommonUtil.setHTMLPro(this.cumulateText,"#b15315","SimHei",26),this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.sureBtn.addChild(this._btnClip),this._btnClip.pos(-5,-10),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("CUMULATE_PAY_UPDATE",this,this.updateView)},r.prototype.onOpened=function(){this._btnClip.play(),this.updateView()},r.prototype.updateView=function(){this.setBtnSure(),this.setMoney()},r.prototype.setData=function(t){this._cfg=t,this._cumuMoney=this._cfg[1],this._itemId=this._cfg[0],this._itemIdAr.push(this._cfg[0]);for(var e=[],i=this._cfg[2],n=0;n<.5*i.length;n++)e.push(i[2*n]);this.setMoney();var s=e.length,o=[];for(o.push(this.cumulateBase1),o.push(this.cumulateBase2),o.push(this.cumulateBase3),o.push(this.cumulateBase4),n=0;n<4;n++)n<s?(o[n].visible=!0,o[n].dataSource=[i[2*n],i[2*n+1],0,null]):o[n].visible=!1;this.setBtnSure()},r.prototype.sureBtnHandler=function(){if(0==this.getState&&(WindowManager.instance.open(111),WindowManager.instance.close(144)),1==this.getState){for(var t=this._cfg[2],e=[],i=0,n=.5*t.length;i<n;i++)e.push([t[2*i],t[2*i+1],0,null]);o.canAddItemsByBagIdCount(e)&&s.CumulatePayModelCtrl.instance.getCumulatepayReward([this._itemId])}},r.prototype.setBtnSure=function(){this.getState=0;var t=s.CumulatePayModel.instance.rewarList[this._itemId];t?(this.getState=t[1],0!==this.getState&&(this.sureBtn.label="领取",this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119",1==this.getState?(this._btnClip.play(),this._btnClip.visible=!0,this.sureBtn.visible=!0,this.receivedImg.visible=!1):(this._btnClip.visible=!1,this.sureBtn.visible=!1,this.receivedImg.visible=!0))):(this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460",this.sureBtn.label="前往充值",this.sureBtn.visible=!0,this.receivedImg.visible=!1,this._btnClip.visible=!1,this._btnClip.stop())},r.prototype.setMoney=function(){this._stateMoney=s.CumulatePayModel.instance.totalMoney,this.cumulateText.innerHTML=this._cfg[1]+"元<span style='color:#1f304d'>&nbsp;,可领取奖励！</span>",this.scheduleText.text="("+this._stateMoney+"/"+this._cumuMoney+")",this._stateMoney>=this._cumuMoney?this.scheduleText.color="#16ba17":this.scheduleText.color="#FF3e3e"},a=r,s.CumulatePayItem=a}(modules=modules||{}),function(t){var e,i,n;function s(){this._giveState=-1,this._totalMoney=-1,this._rewarList={}}e=t.cumulate_pay||(t.cumulate_pay={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.updateInfo=function(t){this._giveState=t[0],this._totalMoney=t[1];for(var e=t[2],i=0,n=e.length;i<n;i++)this._rewarList[e[i][0]]=e[i];this._activityTime=t[3],GlobalData.dispatcher.event("CUMULATE_PAY_UPDATE"),this.cumulatePayPRState()},Object.defineProperty(s.prototype,"giveState",{get:function(){return this._giveState},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"totalMoney",{get:function(){return this._totalMoney},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rewarList",{get:function(){return this._rewarList},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"activityTime",{get:function(){return this._activityTime},enumerable:!0,configurable:!0}),s.prototype.cumulatePayPRState=function(){var t=!1;for(var e in this._rewarList)1===this._rewarList[e][1]&&(t=!0);i.instance.setRPProperty("cumulateRP",t)},n=s,e.CumulatePayModel=n}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l,h;function c(){var t=i.call(this)||this;return t.getState=0,t}e=t.day_consume_reward||(t.day_consume_reward={}),n=ui.DayConsumeRewardItemUI,s=t.common.CustomClip,o=t.notice.SystemNoticeManager,a=t.bag.BagUtil,r=t.day_consume_reward.DayConsumeRewardModel,l=t.day_consume_reward.DayConsumeRewardCtrl,i=n,__extends(c,i),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._items=this.destroyElement(this._items),i.prototype.destroy.call(this,t)},c.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.consumeText,"#b15315","SimHei",26),this._items=new Array,this._items=[this.cumulateBase1,this.cumulateBase2,this.cumulateBase3,this.cumulateBase4],this._btnClip=s.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-10,!0),this._btnClip.scale(.8,.8,!0),this._btnClip.visible=!1},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},c.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.showReward(),this.setMoney(),this.setBtnSure()},c.prototype.setData=function(t){i.prototype.setData.call(this,t),this._cfg=t,this._cumuMoney=this._cfg[1],this._itemId=this._cfg[0]},c.prototype.sureBtnHandler=function(){if(0==this.getState&&o.instance.addNotice("消耗元宝数量不足",!0),1==this.getState){for(var t=this._cfg[3],e=[],i=0,n=.5*t.length;i<n;i++)e.push([t[2*i],t[2*i+1],0,null]);a.canAddItemsByBagIdCount(e)&&l.instance.GetConsumeReward2Reward([this._itemId])}},c.prototype.setBtnSure=function(){this.getState=0;var t=r.instance.rewarTable[this._itemId];t?(this.getState=t[1],0!==this.getState&&(1==this.getState?(this.sureBtn.visible=!0,this.receivedImg.visible=!1,s.thisPlay(this._btnClip)):(this.sureBtn.visible=!1,this.receivedImg.visible=!0,s.thisStop(this._btnClip)))):(this.sureBtn.visible=!0,this.receivedImg.visible=!1,s.thisStop(this._btnClip))},c.prototype.showReward=function(){for(var t=0;t<this._items.length;t++)this._items[t].visible=!1;var e=this._cfg[3];if(e)for(var i=0,n=.5*e.length;i<n;i++){var s=e[2*i],o=e[2*i+1],a=this._items[i];a&&(a.dataSource=[s,o,0,null],a.visible=!0)}},c.prototype.setMoney=function(){this._stateMoney=r.instance.totalGold,this.consumeText.innerHTML=this._cfg[1]+"元宝<span style='color:#1f304d'>可领取！</span>",this.scheduleText.text="("+this._stateMoney+"/"+this._cumuMoney+")",this._stateMoney>=this._cumuMoney?this.scheduleText.color="#16ba17":this.scheduleText.color="#FF3e3e"},c.prototype.close=function(){i.prototype.close.call(this),s.thisStop(this._btnClip)},h=c,e.DayConsumeRewardItem=h}(modules=modules||{}),function(t){var e,i,n,s;function o(){this._giveState=-1,this._id=0,this._totalMoney=-1,this._rewarList=[]}e=t.day_pay||(t.day_pay={}),i=t.redPoint.RedPointCtrl,n=t.config.DayPayCfg,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.updateInfo=function(t){this._giveState=t[0],this._id=t[1],this._totalMoney=t[2],this._rewarList=t[3],GlobalData.dispatcher.event("DAY_PAY_UPDATE"),this.daypayPRState()},Object.defineProperty(o.prototype,"giveState",{get:function(){return this._giveState},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"getMoney",{get:function(){return this._totalMoney},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rewarList",{get:function(){return this._rewarList},enumerable:!0,configurable:!0}),o.prototype.getStateBydangCi=function(t){var e=this._rewarList[t];return e&&0==e[1]},o.prototype.ISover=function(){var t=!1;if(this._rewarList){if(3!=this._rewarList.length)return!0;for(var e=0;e<this._rewarList.length;e++){if(2!=this._rewarList[e][1])return!0;t=!1}}return t},o.prototype.getEnterTips=function(){var t=n.instance.getCfgById(o.instance.id);return t&&0<t.length?t[7]:["大量材料","ffea9f"]},o.prototype.daypayPRState=function(){for(var t=!1,e=0;e<this._rewarList.length;e++)1===this._rewarList[e][1]&&(t=!0);i.instance.setRPProperty("daypayRP",t)},s=o,e.DayPayModel=s}(modules=modules||{}),function(t){var e,r,i;function n(){this.info=[[1,0,1],[2,0,1],[3,0,1],[4,0,1]]}e=t.destinyPellet||(t.destinyPellet={}),r=t.config.DestinyPelletCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fight",{get:function(){for(var t=0,e=this.info||[],i=0;i<e.length;++i)if(e[i][1])for(var n=r.instance.cfgs[e[i][0]],s=0,o=0;o<n.length&&n[o]&&0<n[o].length;++o){var a=n[o];if(!(e[i][1]>a[1])){t+=(e[i][1]-s)*a[4]+(e[i][2]?a[8]:0);break}t+=(a[1]-s)*a[4]+a[8],s=a[1]}return t},enumerable:!0,configurable:!0}),n.prototype.getCfgByTypeAndLv=function(t,e){var i=r.instance.cfgs[t]||[];for(var n in i)if((e!==i[n][1]||!this.info[t-1][2])&&e<=i[n][1])return i[n];return null},n.prototype.checkAvailable=function(t){var e=this.info[t-1][1],i=this.info[t-1][2],n=this.getCfgByTypeAndLv(t,e);if(n){var s=e!==n[1]||i?n[2]:n[5];if(s&&0<s.length)return CommonUtil.getPropCountById(s[0])>=s[1]}return!1},i=n,e.DestinyPelletModel=i}(modules=modules||{}),function(m){var v,e,t,i,h,b,n;function s(){return null!==e&&e.apply(this,arguments)||this}v=m.destinyPellet||(m.destinyPellet={}),t=m.core.BaseViewEx,i=m.common.BtnGroup,h=m.common.CustomClip,b=m.config.DestinyPelletCfg,e=t,__extends(s,e),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._tabGroup=this.destroyElement(this._tabGroup),this.v.attrList.renderHandler&&(this.v.attrList.renderHandler.recover(),this.v.attrList.renderHandler=null),this.v.attrList1.renderHandler&&(this.v.attrList1.renderHandler.recover(),this.v.attrList1.renderHandler=null),this._textItems&&(this._textItems.length=0,this._textItems=null),this._rpItems&&(this._rpItems.length=0,this._rpItems=null),e.prototype.destroy.call(this,t)},s.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=this.centerY=0,this._tabGroup=new i,this._tabGroup.setBtns(this.v.type0Btn,this.v.type1Btn,this.v.type2Btn,this.v.type3Btn),this._textItems=[this.v.type0Txt,this.v.type1Txt,this.v.type2Txt,this.v.type3Txt],this._rpItems=[this.v.redDotImg_0,this.v.redDotImg_1,this.v.redDotImg_2,this.v.redDotImg_3],this.v.redDotImg_0.visible=this.v.redDotImg_1.visible=this.v.redDotImg_2.visible=this.v.redDotImg_3.visible=!1,this.v.linkTxt.underline=!0,this._btnClip=h.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.pos(this.v.onekeyBtn.x-5,this.v.onekeyBtn.y-8),this.v.addChild(this._btnClip),h.thisStop(this._btnClip),this.v.attrList.renderHandler=Handler.create(this,this.attrHandler,null,!1),this.v.attrList1.renderHandler=Handler.create(this,this.attrHandler,null,!1),this.v.img0.skin=CommonUtil.getIconById(b.instance.itemIds[0]),this.v.img1.skin=CommonUtil.getIconById(b.instance.itemIds[1]),this.v.img2.skin=CommonUtil.getIconById(b.instance.itemIds[2]),this.v.img3.skin=CommonUtil.getIconById(b.instance.itemIds[3]),this._defaultY=this.v.pelletImg.y,this._tween=TweenJS.create(this.v.pelletImg).yoyo(!0).repeat(Number.POSITIVE_INFINITY)},s.prototype.offEvt=function(){e.prototype.offEvt.call(this),h.thisStop(this._btnClip),this._tween.stop(),this._tween.end()},s.prototype.onEvt=function(){var t=this;e.prototype.onEvt.call(this),this.onAutoClick(this.v.aboutBtn,this,function(){CommonUtil.alertHelp(19053)}),this.onAutoClick(this.v.onekeyBtn,this,function(){if(!t._autoSelect){if(t._condItem&&m.bag.BagModel.instance.getItemCountById(t._condItem[0])<t._condItem[1])return void m.bag.BagUtil.openLackPropAlert(t._condItem[0],t._condItem[1]);v.DestinyPelletCtrl.instance.TianMingUpLevel(t._tabGroup.selectedIndex+1),t._autoSelect=!0}}),this.onAutoClick(this.v.linkTxt,this,function(){for(var t=0,e=[],i=[],n={},s=v.DestinyPelletModel.instance.info||[],o=0;o<s.length;++o)if(s[o][1])for(var a=b.instance.cfgs[s[o][0]],r=0,l=0;l<a.length;++l){var h=a[l];if(!(s[o][1]>h[1])){for(t+=(s[o][1]-r)*h[4]+(s[o][2]?h[8]:0),c=h[3],p=0;p<c.length;p+=2)-1===i.indexOf(c[p])&&(i.push(c[p]),n[c[p]]=0),n[c[p]]+=(s[o][1]-r)*(c[p+1]||0);if(s[o][2]&&s[o][1]===h[1])for(c=h[7],p=0;p<c.length;p+=2)-1===i.indexOf(c[p])&&i.push(c[p]),n[c[p]]+=c[p+1]||0;for(c=h[6],p=0;p<c.length;p+=2)-1===i.indexOf(c[p])&&(i.push(c[p]),n[c[p]]=0),n[c[p]]+=(s[o][1]-r)*(c[p+1]||0);break}t+=(h[1]-r)*h[4]+h[8];for(var c=h[3],p=0;p<c.length;p+=2)-1===i.indexOf(c[p])&&(i.push(c[p]),n[c[p]]=0),n[c[p]]+=(h[1]-r)*(c[p+1]||0);c=h[7];for(var p=0;p<c.length;p+=2)-1===i.indexOf(c[p])&&(i.push(c[p]),n[c[p]]=0),n[c[p]]+=c[p+1]||0;c=h[6];for(var p=0;p<c.length;p+=2)-1===i.indexOf(c[p])&&(i.push(c[p]),n[c[p]]=0),n[c[p]]+=(h[1]-r)*(c[p+1]||0);r=h[1]}for(i.sort(function(t,e){return t-e}),o=0;o<i.length;++o)e.push([i[o],n[i[o]]]);WindowManager.instance.open(26,["天命丹总属性",t,e,b.instance.attrIds])}),this.onAutoEvt(this._tabGroup,"change",this,this.updateView),this.onAutoGlobalEvt("BAG_UPDATE",this,function(){t._autoSelect||t.updateView()}),this.onAutoGlobalEvt("DESTINY_PELLET_UPDATE",this,this.updateView)},s.prototype.attrHandler=function(t,e){var i=t.dataSource,n=m.config.AttrItemCfg.instance.getCfgById(i[0]),s=n[2];t.getChildByName("nameTxt").text=n[1]+(s?"+":"："),t.getChildByName("valueTxt").text=s?m.common.AttrUtil.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=i[2]>i[1],t.getChildByName("addTxt").text=i[2]>i[1]?s?+m.common.AttrUtil.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+"":""},s.prototype.updateAttrs=function(t,e){for(var i=b.instance.cfgs[t]||[],n=[],s=[],o={},a={},r={},l={},h=0,c=0;c<i.length;++c){if(!(e>(d=i[c])[1])){for(p=d[3],u=0;u<p.length;u+=2)-1===n.indexOf(p[u])&&n.push(p[u]),o[p[u]]=(o[p[u]]||0)+(e-h)*(p[u+1]||0);if(v.DestinyPelletModel.instance.info[t-1][2]&&e===d[1])for(p=d[7],u=0;u<p.length;u+=2)-1===n.indexOf(p[u])&&n.push(p[u]),o[p[u]]=(o[p[u]]||0)+(p[u+1]||0);for(p=d[6],u=0;u<p.length;u+=2)-1===s.indexOf(p[u])&&s.push(p[u]),r[p[u]]=(r[p[u]]||0)+(e-h)*(p[u+1]||0);break}for(var p=d[3],u=0;u<p.length;u+=2)-1===n.indexOf(p[u])&&n.push(p[u]),o[p[u]]=(o[p[u]]||0)+(d[1]-h)*(p[u+1]||0);p=d[7];for(var u=0;u<p.length;u+=2)-1===n.indexOf(p[u])&&n.push(p[u]),o[p[u]]=(o[p[u]]||0)+(p[u+1]||0);p=d[6];for(var u=0;u<p.length;u+=2)-1===s.indexOf(p[u])&&s.push(p[u]),r[p[u]]=(r[p[u]]||0)+(d[1]-h)*(p[u+1]||0);h=d[1]}if(v.DestinyPelletModel.instance.info[t-1][2])for(c=h=0;c<i.length;++c){if(!(e+1>(d=i[c])[1])){for(p=d[3],u=0;u<p.length;u+=2)-1===n.indexOf(p[u])&&n.push(p[u]),a[p[u]]=(a[p[u]]||0)+(e+1-h)*(p[u+1]||0);for(p=d[6],u=0;u<p.length;u+=2)-1===s.indexOf(p[u])&&s.push(p[u]),l[p[u]]=(l[p[u]]||0)+(e+1-h)*(p[u+1]||0);break}var p=d[3];for(u=0;u<p.length;u+=2)-1===n.indexOf(p[u])&&n.push(p[u]),a[p[u]]=(a[p[u]]||0)+(d[1]-h)*(p[u+1]||0);for(p=d[7],u=0;u<p.length;u+=2)-1===n.indexOf(p[u])&&n.push(p[u]),a[p[u]]=(a[p[u]]||0)+(p[u+1]||0);for(p=d[6],u=0;u<p.length;u+=2)-1===s.indexOf(p[u])&&s.push(p[u]),l[p[u]]=(l[p[u]]||0)+(d[1]-h)*(p[u+1]||0);h=d[1]}else for(c=0;c<i.length;++c){var d;if(e===(d=i[c])[1])for(p=d[7],u=0;u<p.length;u+=2)-1===n.indexOf(p[u])&&n.push(p[u]),a[p[u]]=(o[p[u]]||0)+(p[u+1]||0)}n.sort(function(t,e){return t-e});for(var y=[],g=0;g<n.length;++g)y.push([n[g],o[n[g]],a[n[g]]]);this.v.attrList.dataSource=y,s.sort(function(t,e){return t-e});var f=[],_="";for(g=0;g<s.length;++g)f.push([s[g],r[s[g]],l[s[g]]]),_+=(0<g?"、":"")+"总"+m.config.AttrItemCfg.instance.getCfgById(s[g])[1];this.v.attrList1.dataSource=f,this.v.attrDesc.text="(对主角"+_+"生效)"},s.prototype.updateView=function(){var t=this._tabGroup.selectedBtn;if(t){var e=this._tabGroup.selectedIndex;if(!this._autoSelect||(this._autoSelect=!1,v.DestinyPelletModel.instance.checkAvailable(e+1))){this.v.powerNum.value=v.DestinyPelletModel.instance.fight.toString();for(var i=0;i<this._textItems.length;++i){var n=v.DestinyPelletModel.instance.info[i],s=v.DestinyPelletModel.instance.getCfgByTypeAndLv(n[0],n[1]);s?(this._textItems[i].text=n[1]+"/"+s[1],this._textItems[i].color=n[1]===s[1]?"#ff3e3e":"#0ecf09"):this._textItems[i].text=""+n[1]}for(i=0;i<this._rpItems.length;++i)this._rpItems[i].visible=v.DestinyPelletModel.instance.checkAvailable(i+1);this.v.selectedImg.pos(t.x,t.y),this._condItem=null,this.v.pelletImg.skin="destiny_pellet/iconbg_tmd_0"+(e+1)+".png",this.v.numLv.value=""+v.DestinyPelletModel.instance.info[e][1],this.v.pelletName.text=CommonUtil.getNameByItemId(b.instance.itemIds[e]);var o=v.DestinyPelletModel.instance.info?v.DestinyPelletModel.instance.info[e]:null,a=o&&o[1]||0,r=v.DestinyPelletModel.instance.getCfgByTypeAndLv(e+1,a);if(this._condItem=r?a!==r[1]||o[2]?r[2]:r[5]:null,this.v.onekeyBtn.label=r?a!==r[1]||o[2]?"服用":"突破":"",h.thisStop(this._btnClip),this._condItem&&this._condItem.length){var l=m.bag.BagModel.instance.getItemCountById(this._condItem[0]);this.v.feedItem.dataSource=[this._condItem[0],0,0,null],this.v.feedItem._numTxt.visible=!0,this.v.feedItem._numTxt.text=l+"/"+this._condItem[1],this.v.feedItem._numTxt.color=l<this._condItem[1]?"#ff3e3e":"#ffffff",l>=this._condItem[1]&&h.thisPlay(this._btnClip),this.v.maxLvTxt.visible=!1,this.v.feedItem.visible=this.v.onekeyBtn.visible=!0}else this.v.maxLvTxt.visible=!0,this.v.feedItem.visible=this.v.onekeyBtn.visible=!1;this.updateAttrs(e+1,a)}else this.autoSelectType(!1)}},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._autoSelect=!1,this.autoSelectType(!0),this.v.pelletImg.y=this._defaultY,this._tween.to({y:this._defaultY+10},1e3).start()},s.prototype.autoSelectType=function(t){for(var e=1;e<=4;++e)if(v.DestinyPelletModel.instance.checkAvailable(e))return void(this._tabGroup.selectedIndex=e-1);this._tabGroup.selectedIndex=t?0:this._tabGroup.selectedIndex},n=s,v.DestinyPelletPanel=n}(modules=modules||{}),function(t){var e,i;function n(){}e=t.discountGift||(t.discountGift={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateData=function(t){this._discountGiftState=t[0],this._type=t[1],this._id=t[2],this._restTm=t[3]+GlobalData.serverTime,this._curCount=t[4],this._maxCount=t[5],this._isDayOver=t[6],GlobalData.dispatcher.event("DISCOUNT_GIFT_UPDATE")},Object.defineProperty(n.prototype,"discountGiftState",{get:function(){return this._discountGiftState},set:function(t){this._discountGiftState=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ID",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"restTm",{get:function(){return this._restTm},set:function(t){this._restTm=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"curCount",{get:function(){return this._curCount},set:function(t){this._curCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxCount",{get:function(){return this._maxCount},set:function(t){this._maxCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ReceiveResult",{get:function(){return this._result},set:function(t){this._result=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"curVip",{get:function(){return this._curVip},set:function(t){this._curVip=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxVip",{get:function(){return this._maxVip},set:function(t){this._maxVip=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDayOver",{get:function(){return this._isDayOver},set:function(t){this._isDayOver=t},enumerable:!0,configurable:!0}),i=n,e.discountGiftModel=i}(modules=modules||{}),function(t){var i,n,e;function s(){return null!==n&&n.apply(this,arguments)||this}i=t.divinatory_card||(t.divinatory_card={}),n=ui.DivinatoryBossCopyItemUI,__extends(s,n),s.prototype.setData=function(t){n.prototype.setData.call(this,t),this.drawUI(t);var e=i.DivinatoryCardModel.instance.getData(this._data);this._selectEnable=1==e[2]},s.prototype.setSelected=function(t){n.prototype.setSelected.call(this,t),this.selectBg.visible=t},s.prototype.clickHandler=function(){this._selectEnable||t.config.DivinatoryCardActionCfg.instance.feishengNotice(this._data,!0)},s.prototype.drawUI=function(t){this.icon.skin="divinatory_boss/icon_"+t+".png"},e=s,i.DivinatoryBossCopyIcon=e}(modules=modules||{}),function(n){var s,e,i,o,t,a,r;function l(){return null!==e&&e.apply(this,arguments)||this}s=n.sheng_yu||(n.sheng_yu={}),i=n.notice.SystemNoticeManager,o=n.dungeon.DungeonCtrl,t=n.common.CustomList,a=n.config.ClasSsceneTempleBossCfg,e=ui.ShengYuBossItemUI,__extends(l,e),l.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=new t,this._list.width=440,this._list.height=120,this._list.hCount=5,this._list.spaceX=0,this._list.scrollDir=2,this._list.itemRender=s.ShengYuBossInfoItem,this._list.x=0,this._list.y=0,this.bossInfoBox.addChild(this._list),this._isOpenRewad=!1,this.BGBtn.mouseEnabled=!1,this._taskBase=[this.reward1,this.reward2,this.reward3,this.reward4,this.reward5,this.reward6],this.setH=0,this._H=132,this.BG.skin="common_sg/panel_common_bg3.png",this.BG.y=0,this.BG.height=this._H},l.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&this.drawData(t)},l.prototype.drawData=function(t){this._datas=a.instance.getCfgsByGrade(t,0),this.showReward(),this.showInfo(),this.showBossInfo()},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.challengeBtn,this,this.challengeHandler),this.onAutoClick(this.BGBtn,this,this.BGHandler)},l.prototype.BGHandler=function(){this._isOpenRewad=!this._isOpenRewad,this._isOpenRewad?(this.BG.height=this.BGBtn.height=this.height=this._H+85+this.setH,this.rewardBox.visible=this.rewardImg.visible=this.rewardTipsText.visible=!0):(this.BG.height=this.BGBtn.height=this.height=this._H+this.setH,this.rewardBox.visible=this.rewardImg.visible=this.rewardTipsText.visible=!1),GlobalData.dispatcher.event("SHENG_YU_BOSS_OPENONE")},l.prototype.isOpenRewad=function(){this.selected?(this.rewardBox.visible=this.rewardImg.visible=this.rewardTipsText.visible=!0,this.BGBtn.mouseEnabled=!0,this._isOpenRewad=!this._isOpenRewad,this._isOpenRewad?this.BG.height=this.BGBtn.height=this.height=this._H+85+this.setH:this.BG.height=this.BGBtn.height=this.height=this._H+this.setH,GlobalData.dispatcher.event("SHENG_YU_BOSS_OPENONE")):(this.BG.height=this.BGBtn.height=this.height=this._H+this.setH,this._isOpenRewad=!1,this.BGBtn.mouseEnabled=!1,this.rewardBox.visible=this.rewardImg.visible=this.rewardTipsText.visible=!1)},l.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.isOpenRewad()},l.prototype.challengeHandler=function(){if(this._datas[4]<=n.born.BornModel.instance.lv){var t=this._datas[0],e=this._datas[1];t&&o.instance.reqEnterScene(t,e)}else i.instance.addNotice("转生等级不足",!0)},l.prototype.showInfo=function(){var t=this._datas[1],e=this._datas[5],i=this._datas[4];this.nameText.text=s.ShengYuBossModel.instance.getName(t),this.openConditionText.text=e+"开启",i<=n.born.BornModel.instance.lv?(this.challengeBtn.visible=!0,this.openConditionText.visible=!1):(this.challengeBtn.visible=!1,this.openConditionText.visible=!0)},l.prototype.showReward=function(){for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=this._datas[1],i=a.instance.getCfgsByGrade(e,0)[6],n=new Array;for(t=0;t<i.length;t++){var s=this._taskBase[t];s&&(s.dataSource=[i[t][0],i[t][1],0,null],s.visible=!0,s.nameVisible=!1,n.push(s))}},l.prototype.showBossInfo=function(){for(var t=this._datas[1],e=a.instance.getBossInfoByGrade(t),i=[],n=0;n<e.length;n++)i.push(e[n][3]);this._list.datas=i},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),e.prototype.destroy.call(this,t)},r=l,s.ShengYuBossItem=r}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}t=e.divinatory_card||(e.divinatory_card={}),n=Laya.Image,s=Laya.Text,i=e.sheng_yu.ShengYuBossItem,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._bottomImg=new n,this.addChild(this._bottomImg),this._bottomImg.skin="common_sg/panel_common_bg8.png",this._bottomImg.size(420,30),this._bottomImg.y=3,this._modeImg=new n,this.addChild(this._modeImg),this._modeImg.rotation=-90,this._modeImg.pos(3,110),this._txt=new s,this.addChild(this._txt),this._txt.font="SimHei",this._txt.fontSize=20,this._txt.width=20,this._txt.wordWrap=!0,this._txt.color="#ffffff",this._txt.pos(11,30),this._list.x=15,this._recommendTxt=new s,this._recommendTxt.font="SimHei",this._recommendTxt.fontSize=20,this._recommendTxt.color="#ffffff",this._recommendTxt.pos(40,8),this.addChild(this._recommendTxt),this.setH=30,this.conBox.y=this.setH,this.BG.height=this.height=this._H+this.setH},a.prototype.drawData=function(t){this._bossList=t,this.showReward(),this.showBossInfo()},a.prototype.challengeHandler=function(){var t=this._bossList[0][1];e.common_group.CommonGroupUtil.OldCopyTeamIsOtherTeam1(6,t)},a.prototype.showReward=function(){var t=this._bossList[0],e=t[2];this._recommendTxt.text=e+" 推荐战力:"+CommonUtil.bigNumToString(t[8]),0==t[6]?(this._modeImg.skin="common/txtbg_common_txtbg4.png",this._txt.text="和平"):(this._modeImg.skin="common/txtbg_common_txtbg2.png",this._txt.text="混乱");for(var i=t[5],n=0,s=this._taskBase.length;n<s;n++){var o=this._taskBase[n],a=i[n];a?(o.dataSource=[a,1,0,null],o.visible=!0):o.visible=!1}},a.prototype.showBossInfo=function(){for(var t=[],e=0,i=this._bossList.length;e<i;e++)t.push(this._bossList[e][4]);this._list.datas=t},o=a,t.DivinatoryBossitem=o}(modules=modules||{}),function(f){var _,e,m,v,b,t;function i(){return null!==e&&e.apply(this,arguments)||this}_=f.divinatory_card||(f.divinatory_card={}),m=f.divinatory_card.DivinatoryCardModel,v=f.config.DivinatoryCardSuitCfg,b=f.config.DivinatoryCardActionCfg,e=ui.DivinatoryCardTipsItemUI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this._htmlList=[null,this.html1,this.html2,this.html3,this.html4,this.html5,this.html6,this.html7,this.html8];for(var t=1;t<this._htmlList.length;t++)this._htmlList[t]&&(this._htmlList[t].style.fontSize=22,this._htmlList[t].style.font="SimHei")},i.prototype.drawUI=function(t,e){var i=t[0],n=CommonUtil.getItemQualityById(i),s=CommonUtil.getColorByQuality(n),o=CommonUtil.getStarById(i)+1;this.cardItem.drawQuality(o,e),this.nameTxt.color=s;var a=b.instance.getCfg(e);this.nameTxt.text=_.DivinatoryUtil.typeStrs(o)+"·"+a[4];for(var r=m.instance.getEquipList(e),l=100*(i/100>>0),h=1;h<9;h++){var c=r[h],p="(未激活)",u="#ff3e3e",d=10*h+l+1;c&&o<=CommonUtil.getStarById(c[0])+1&&(p="(已激活)",u="#168a17"),this._htmlList[h].color=s;var y=f.config.ItemEquipCfg.instance.getItemCfgById(d);y&&(this._htmlList[h].innerHTML=y[1]+CommonUtil.formatHtmlStrByColor(u,p))}var g=v.instance.gettypeCfg(e,o);g?(this.suitHtml.innerHTML=m.instance.getSuitAttr(g),this.suitHtml.size(515,this.suitHtml.contextHeight),this.height=this.suitHtml.y+this.suitHtml.height+10):(this.suitHtml.innerHTML="",this.height=273)},i.prototype.destroy=function(t){void 0===t&&(t=!0),this._htmlList=this.destroyElement(this._htmlList),e.prototype.destroy.call(this,t)},t=i,_.DivinatoryCardTipsItem=t}(modules=modules||{}),function(t){var e,i,r,l,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.divinatory_card||(t.divinatory_card={}),r=t.divinatory_card.DivinatoryCardModel,l=t.config.DivinatoryCardSuitCfg,i=ui.DivinatoryCardBodyItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.mouseEnabled=!1,this.mouseThrough=!1,this._imgList=[null,this.img1,this.img2,this.img3,this.img4,this.img5,this.img6,this.img7,this.img8],this._qualityList=[null,this.qualityImg1,this.qualityImg2,this.qualityImg3,this.qualityImg4,this.qualityImg5,this.qualityImg6,this.qualityImg7,this.qualityImg8]},s.prototype.drawUI=function(t){for(var e=r.instance.getEquipList(t),i=1;i<9;i++){this._imgList[i].skin="divinatory_card/type_"+t+"_"+i+".png";var n=2,s=e[i],o=!1;s?(n=CommonUtil.getItemQualityById(s[0]),this._qualityList[i].skin="divinatory_card/quality_"+n+".png"):(o=!0,this._qualityList[i].skin=""),this._imgList[i].gray=o}},s.prototype.drawQuality=function(t,e){var i=r.instance.getEquipList(e),n=l.instance.qualitySuit[t];n=n||2,this._actNum=0;for(var s=1;s<9;s++){this._imgList[s].skin="divinatory_card/type_"+e+"_"+s+".png";var o=i[s],a=void 0;o&&(a=t<=CommonUtil.getStarById(o[0])+1,this._qualityList[s].skin="divinatory_card/quality_"+n+".png"),a?this._actNum++:this._qualityList[s].skin="",this._imgList[s].gray=!a,this._qualityList[s].gray=!a}},Object.defineProperty(s.prototype,"actNum",{get:function(){return this._actNum},enumerable:!0,configurable:!0}),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._qualityList=this.destroyElement(this._qualityList),this._imgList=this.destroyElement(this._imgList),i.prototype.destroy.call(this,t)},n=s,e.DivinatoryCardBodyItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.divinatory_card||(t.divinatory_card={}),i=t.announcement.AnnouncementHtml,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.StatementHTML.width=570,s.IS_SUIT||(this.StatementHTML.style.fontSize=22,this.StatementHTML.style.lineHeight=28)},s.prototype.setData=function(t){this.StatementHTML.innerHTML=t,this.height=this.StatementHTML.contextHeight,s.IS_SUIT&&(this._lin||(this._lin=new Laya.Image,this.addChild(this._lin),this._lin.skin="common/split_common_fgx01.png",this._lin.width=570),this._lin.y=this.height-5)},s.IS_SUIT=!1,n=s,e.DivinatoryCardHtml=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.divinatory_card||(t.divinatory_card={}),n=t.divinatory_card.DivinatoryCardModel,i=ui.DivinatoryCardItemUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._card=new e.DivinatoryCardBodyItem,this._card.pos(19,18),this.addChildAt(this._card,0),this._card.scaleX=this._card.scaleY=.31,this.bg.visible=!1},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.bg.visible=t},o.prototype.clickHandler=function(){this._selectEnable||t.config.DivinatoryCardActionCfg.instance.feishengNotice(this._data[0],!0)},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this.drawUI(t)},o.prototype.drawUI=function(t){var e=t[0];this._card.drawUI(e),this.nameImg.skin="divinatory_card/name_"+e+".png",this._selectEnable=1==t[2],this._card.gray=!this._selectEnable,this.lockImg.visible=!this._selectEnable,1160==n.instance.winId?this.red.visible=n.instance.getBestEquipDic(e,!0):this.red.visible=n.instance.getStrongRP(e)||n.instance.getMysteryRP(e)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._card=this.destroyElement(this._card),i.prototype.destroy.call(this,t)},s=o,e.DivinatoryCardItem=s}(modules=modules||{}),function(t){var r,e,i;function n(){return null!==e&&e.apply(this,arguments)||this}r=t.divinatory_card||(t.divinatory_card={}),e=ui.DivinatoryCardSuitItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._card=new r.DivinatoryCardBodyItem,this._card.pos(16,15),this.addChildAt(this._card,0),this._card.scaleX=this._card.scaleY=.29,this.qaHtm.style.fontSize=20,this.qaHtm.style.font="SimHei"},n.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.bg.visible=t},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this.drawUI(t)},n.prototype.drawUI=function(t){var e,i=t[0],n=i[0]/1e3>>0,s=i[2],o=i[6],a=CommonUtil.formatHtmlStrByColor(CommonUtil.getColorByQuality(o),r.DivinatoryUtil.typeStrs(s)+"品");this._card.drawQuality(s,n),e=8<=this._card.actNum?CommonUtil.formatHtmlStrByColor("#168a17","激活"):CommonUtil.formatHtmlStrByColor("#ff3e3e","("+this._card.actNum+"/8)"),this.qaHtm.innerHTML=a+e},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._card=this.destroyElement(this._card),e.prototype.destroy.call(this,t)},i=n,r.DivinatoryCardSuitItem=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){}e=t.dragon||(t.dragon={}),i=t.funcOpen.FuncOpenModel,n=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.getDragonInfoReply=function(t){if(t){var e=0===(this._info=t)[1]?2:1;i.instance.setActionOpen(286,e),this.setRP(),GlobalData.dispatcher.event("DRAGON_INFO_UPDATE")}},o.prototype.setRP=function(){var t=1===this._info[0];n.instance.setRPProperty("dragonRP",t)},s=o,e.DragonModel=s}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}i=t.equipSuit||(t.equipSuit={}),n=t.equipSuit.EquipSuitCtrl,s=t.bag.BagItem,e=s,__extends(a,e),a.prototype.initialize=function(){e.prototype.initialize.call(this),this.needTip=!1,this.addImg.scale(.8,.8,!0)},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.handler)},Object.defineProperty(a.prototype,"state",{set:function(t){0==t?(this.isbtnClipIsPlayer=this.lockBtn.visible=!1,this.addImg.visible=!0,this._tween||(this._tween=TweenJS.create(this.addImg).yoyo(!0).repeat(Number.POSITIVE_INFINITY)),this._tween.isPlaying||this._tween.to({scaleX:1,scaleY:1},300).start()):1==t?(this.lockBtn.visible=!0,this.isbtnClipIsPlayer=!1,this.disableImgScale()):(this.lockBtn.visible=!1,this.disableImgScale(),this.isbtnClipIsPlayer=this.setCustomClip(2),this.isbtnClipIsPlayer=!0);var e=CommonUtil.getPartById(this.itemData[0]),i=CommonUtil.getNameByPart(e);this._nameTxt.text=i,this._nameTxt.color="#1f304d"},enumerable:!0,configurable:!0}),a.prototype.disableImgScale=function(){this.addImg.visible=!1,this.addImg.scale(.8,.8,!0),this._tween&&this._tween.stop()},a.prototype.handler=function(){var t=this.itemData[0],e=i.EquipSuitModel.instance.selectPart=CommonUtil.getPartById(t);n.instance.lightenUp([i.EquipSuitModel.instance.selectId,e])},a.prototype.close=function(){this.disableImgScale(),e.prototype.close.call(this)},a.prototype.destroy=function(){this._tween&&(this._tween.stop(),this._tween=null),e.prototype.destroy.call(this)},o=a,i.EquipLightItem=o}(modules=modules||{}),function(t){var h,e,i,c,n;function s(){return null!==e&&e.apply(this,arguments)||this}h=t.equipSuit||(t.equipSuit={}),i=ui.EquipSuitTclassItemUI,c=t.config.EquipSuitCfg,e=i,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("EQUIP_SUIT_UPDATE",this,this.updateView)},s.prototype.setData=function(t){this._id=t,this.updateView()},s.prototype.clickHandler=function(){this.selectEnable||t.notice.SystemNoticeManager.instance.addNotice("请先激活上一阶套装",!0)},s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},s.prototype.updateView=function(){var t=h.EquipSuitModel.instance.lightIndexs;this.rpImg.visible=!1;for(var e=h.EquipSuitModel.instance.getIndexsById(this._id),i=0,n=t;i<n.length;i++){var s=n[i];if(e.first===s.first&&e.second===s.second){this.rpImg.visible=!0;break}}var o=Math.floor(this._id/10),a=c.instance.bClassIds.indexOf(o),r=h.EquipSuitUtil.names[a],l=c.instance.getCfgById(this._id)[3][2]-1;this.nameTxt.text=r+"·"+l+"星",this.setCount(),this.selectEnable=h.EquipSuitModel.instance.getState(this._id)},s.prototype.setCount=function(){var t=h.EquipSuitModel.instance.getLightCountById(this._id);this.countTxt.text="("+t+"/8)",this.countTxt.color=8<=t?"#168a17":"#ff3e3e"},n=s,h.EquipSuitTclassItem=n}(modules=modules||{}),function(t){var e,i;function n(){}e=t.equipSuit||(t.equipSuit={}),n.panels=[304,305,306,307,308,309,310,311,312,313,487,488,1368,1369,1370],n.names=["龙渊","赤霄","太虚","诛仙","昆吾","轩辕","盘古","乾坤","混沌","灭世","荒天","万法","极道","神陨","圣始"],i=n,e.EquipSuitUtil=i}(modules=modules||{}),function(t){var l,e,h,c,i;function n(){var t=e.call(this)||this;return t.typeNum=1,t.isOpen=!1,t}l=t.equipment_zu_hun||(t.equipment_zu_hun={}),h=t.notice.SystemNoticeManager,c=t.config.EquipmentShiHunCfg,e=ui.EquipmentSiHunItemUI,__extends(n,e),n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.openEquipmentSiHunAlert)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this.typeNum=t,this.typeImg.skin="equipment_zu_hun/icon_"+this.typeNum+".png",this.setUI(),this.typeRp.visible=l.EquipmentZuHunModel.instance.getCanUpShiHun(this.typeNum)},n.prototype.openEquipmentSiHunAlert=function(){if(this.isOpen){var t=l.EquipmentZuHunModel.instance.shihunList[this.typeNum];t?WindowManager.instance.open(303,t):WindowManager.instance.open(303,[this.typeNum,0])}else this.showTips()},n.prototype.showTips=function(){var t,e=l.EquipmentZuHunModel.instance.shihunList[this.typeNum];if(e){var i=e[1];t=c.instance.getDateByPartAndLevel(this.typeNum,i)}else t=c.instance.getDateByPartAndLevel(this.typeNum,0);if(t){for(var n=t[4],s=c.instance.getOpenLvByPartAndLevel(this.typeNum),o="",a=0;a<n.length;a++){var r=n[a];a==n.length-1?o+=CommonUtil.getNameByPart(r):o=o+CommonUtil.getNameByPart(r)+"、"}h.instance.addNotice(""+o+s+"阶开启",!0)}else h.instance.addNotice("未开启",!0)},n.prototype.setUI=function(){var t,e=l.EquipmentZuHunModel.instance.shihunList[this.typeNum];if(e){var i=e[1];t=c.instance.getDateByPartAndLevel(this.typeNum,i)}else t=c.instance.getDateByPartAndLevel(this.typeNum,0);if(t){var n=c.instance.getOpenLvByPartAndLevel(this.typeNum),s=t[4];if(this.isOpen=l.EquipmentZuHunModel.instance.getWhetherToMeet(n,s),this.isOpen){this.levelBgImg.visible=this.levelText.visible=!0,this.suoImg.visible=!1;var o=l.EquipmentZuHunModel.instance.shihunList[this.typeNum];if(o){this.levelBgImg.visible=this.levelText.visible=0<o[1];for(var a=0,r=(i=o[1],0);r<i;r++)a+=c.instance.getDateByPartAndLevel(this.typeNum,r)[3][1];this.levelText.text=""+a}else this.levelBgImg.visible=this.levelText.visible=!1}else this.suoImg.visible=!0,this.levelBgImg.visible=this.levelText.visible=!1}else this.suoImg.visible=!0,this.levelBgImg.visible=this.levelText.visible=!1},i=n,l.SEquipmentSiHunItem=i}(modules=modules||{}),function(t){var e,u,d,s,y,g,i;function f(){this._atkNum=0,this._isjinjie=!1,this._zhuhunList=new Array,this._shihunList=new Array,this._consumptionMaterialItem=y.instance.getItems(),this.materialItemID=this._consumptionMaterialItem[0],this.materialItemCount=this._consumptionMaterialItem[1]}e=t.equipment_zu_hun||(t.equipment_zu_hun={}),u=t.bag.BagModel,d=t.player.PlayerModel,s=t.redPoint.RedPointCtrl,y=t.config.EquipmentZhuHunCfg,g=t.config.EquipmentShiHunCfg,Object.defineProperty(f,"instance",{get:function(){return this._instance=this._instance||new f},enumerable:!0,configurable:!0}),f.prototype.getValue=function(t){this._atkNum=t[2];for(var e=t[0],i=t[1],n=0;n<e.length;n++){var s=(o=e[n])[0];this._zhuhunList[s]=o}for(n=0;n<i.length;n++){var o;s=(o=i[n])[0],this._shihunList[s]=o}this.setRp(),GlobalData.dispatcher.event("EQUIPMENT_ZUHUN_UPDATE")},f.prototype.updateValue=function(t){this._atkNum=t[2];var e=t[0],i=t[1],n=0,s=0;this._zhuhunList[f.instance._currPart]&&(n=this._zhuhunList[f.instance._currPart][1]);for(var o=0;o<e.length;o++){var a=(r=e[o])[0];this._zhuhunList[a]=r}for(o=0;o<i.length;o++){var r;a=(r=i[o])[0],this._shihunList[a]=r}this._zhuhunList[f.instance._currPart]&&(s=this._zhuhunList[f.instance._currPart][1]),n!=s&&(this._isjinjie=!0),this.setRp(),GlobalData.dispatcher.event("EQUIPMENT_ZUHUN_UPDATE")},Object.defineProperty(f.prototype,"atkNum",{get:function(){return this._atkNum},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"zhuhunList",{get:function(){return this._zhuhunList},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"shihunList",{get:function(){return this._shihunList},enumerable:!0,configurable:!0}),f.prototype.getConsumptionExp=function(t){return u.instance.getItemCountById(this._consumptionMaterialItem[2*t])*this._consumptionMaterialItem[2*t+1]},f.prototype.getConsumptionNum=function(t){return u.instance.getItemCountById(this._consumptionMaterialItem[2*t])},f.prototype.getmaterialItemNum=function(){return u.instance.getItemCountById(this.materialItemID)},f.prototype.getmaterialItemExp=function(){return u.instance.getItemCountById(this.materialItemID)*this.materialItemCount},f.prototype.getWhetherToMeet=function(t,e){for(var i=e,n=0;n<i.length;n++){var s=i[n],o=this._zhuhunList[s];if(!o)return!1;if(o[1]<t)return!1}return!0},f.prototype.getCanUpZhuHun=function(t){var e=!1,i=f.instance.getConsumptionExp(0),n=f.instance.getConsumptionExp(1),s=f.instance.getConsumptionExp(2);if(f.instance.getConsumptionNum(0)+f.instance.getConsumptionNum(1)+f.instance.getConsumptionNum(2)<=0)return e;var o=i+n+s,a=f.instance.zhuhunList[t],r=d.instance.getEquipByPart(t);if(a&&r){var l=a[1],h=a[0],c=a[2],p=y.instance.getMaxLevelByPart(h);l=p<l?p:l,y.instance.getDateByPartAndLevel(h,l)[2]-c<=o&&l<p&&(e=!0)}return e},f.prototype.getCanUpShiHun=function(t){var e=!1,i=f.instance.shihunList[t],n=(i=i||[t,0])[0],s=i[1],o=g.instance.getMaxLevelByPart(n),a=g.instance.getMaxLevelByPart(n);s=a<s?a:s;var r=g.instance.getDateByPartAndLevel(n,s),l=r[3],h=r[4],c=r[5],p=f.instance.getWhetherToMeet(c,h);return p&&s<o&&u.instance.getItemCountById(l[0])>=l[1]&&(e=p),e},f.prototype.setRp=function(){var t=d.instance.equipsDic;if(t&&0!=t.keys.length){for(var e=0,i=t.keys.length;e<i;e++)if(this.getCanUpZhuHun(t.keys[e]))return void s.instance.setRPProperty("equipmentZuHunRP",!0);if(0!=this.zhuhunList.length){for(var n=1;n<=6;n++)if(this.getCanUpShiHun(n))return void s.instance.setRPProperty("equipmentZuHunRP",!0);s.instance.setRPProperty("equipmentZuHunRP",!1)}else s.instance.setRPProperty("equipmentZuHunRP",!1)}else s.instance.setRPProperty("equipmentZuHunRP",!1)},i=f,e.EquipmentZuHunModel=i}(modules=modules||{}),function(t){var h,e,n,c,s,i;function o(){return e.call(this)||this}h=t.every_day_rebate||(t.every_day_rebate={}),n=t.common.CustomClip,c=t.bag.BagUtil,s=t.funcOpen.FuncOpenModel,e=ui.EveryDayreBateItemUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",26),this.creatEffect()},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},o.prototype.setData=function(t){e.prototype.setData.call(this,t),this._Datas=t,this.showUI()},o.prototype.sureBtnHandler=function(){var t=this._Datas,e=0,i=h.EveryDayRebateModel.instance.nodeList[t[1]];if(i&&(e=i[1]),1==e){var n=[],s=this._Datas[2];if(s)for(var o=0,a=s.length;o<a;o++){var r=s[o];n.push([r[0],r[1],0,null])}if(c.canAddItemsByBagIdCount(n)){var l=this._Datas[1];h.EveryDayRebateCtrl.instance.GetEverydayRebateReward(l)}}else WindowManager.instance.open(111),this.close()},o.prototype.showUI=function(){var t=this._Datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"</span>天";for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;var i=this._Datas[2];for(e=0;e<i.length;e++){var n=i[e],s=this._taskBase[e];s&&(s.dataSource=[n[0],n[1],0,null],s.visible=!0)}this.setBtnSure()},o.prototype.setBtnSure=function(){var t=this._Datas,e=0,i=h.EveryDayRebateModel.instance.nodeList[t[1]];i&&(e=i[1]),s.instance.getFuncIsOpen(173)?0==e?(this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460,#465460,#465460,#465460",this.sureBtn.label="前往充值",this.sureBtn.visible=!0,n.thisStop(this._btnClip),this.receivedImg.visible=!1):1==e?(this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.sureBtn.label="领取",this.sureBtn.visible=!0,n.thisPlay(this._btnClip),this.receivedImg.visible=!1):(n.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0):(n.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),e.prototype.destroy.call(this,t)},o.prototype.creatEffect=function(){this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},i=o,h.EveryDayRebateItem=i}(modules=modules||{}),function(t){var e,n,s,i;function o(){this._lastDay=0,this._openState=0,this._isNextLun=!1,this._isfanHui=!1,this._isOpen=!1,this._nodeList=new Array}e=t.every_day_rebate||(t.every_day_rebate={}),n=t.redPoint.RedPointCtrl,s=t.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"round",{get:function(){return this._round?this._round:1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nodeList",{get:function(){return this._nodeList},enumerable:!0,configurable:!0}),o.prototype.getInfo=function(t){this._isfanHui=!0,this._round=t[2],this._nodeList.length=0,this._lastDay=0;var e=t[1];if(e)for(var i=0;i<e.length;i++){var n=e[i],s=n[0];this._nodeList[s]=n,this._lastDay=s}GlobalData.dispatcher.event("SOARING_EVERTDATREDATE_UPDATE"),this.setRP()},o.prototype.updateInfo=function(t){this._isfanHui=!0,this._round=t[2],this._nodeList.length=0,this._lastDay=0;var e=t[1];if(e)for(var i=0;i<e.length;i++){var n=e[i],s=n[0];this._nodeList[s]=n,this._lastDay=s}this.setRP(),GlobalData.dispatcher.event("SOARING_EVERTDATREDATE_UPDATE")},o.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._nodeList.length;e++){var i=this._nodeList[e];if(i&&1==i[1]){t=!0;break}}return t},o.prototype.setRP=function(){var t=s.instance.getFuncIsOpen(173),e=this.getIsLingQu();this._isNextLun=!1;var i=localStorage.getItem("_lastDay");i?this._isfanHui&&(localStorage.setItem("_lastDay",""+this.round),this._isNextLun=parseInt(i)!=this.round&&!this._isOpen):this._isfanHui&&(localStorage.setItem("_lastDay",""+this.round),this._isNextLun=!this._isOpen),n.instance.setRPProperty("everyDayRebateRP",t&&(this._isNextLun||e))},o.prototype.setRpIsNext=function(){this._isNextLun&&(this._isNextLun=!1,n.instance.setRPProperty("everyDayRebateRP",!1))},i=o,e.EveryDayRebateModel=i}(modules=modules||{}),function(t){var i,n,e;function s(){return null!==n&&n.apply(this,arguments)||this}i=t.extreme_equip||(t.extreme_equip={}),n=ui.ExtremeEquipItemUI,__extends(s,n),s.getSelectType=function(){return s._selectType},s.setSelectType=function(t){t!==s._selectType&&(this._selectType=t,GlobalData.dispatcher.event("EXTREME_EQUIP_CLICK"))},s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this,this,this.btnHanlder),this.onAutoGlobalEvt("EXTREME_EQUIP_CLICK",this,this.updataFrame),this.onAutoGlobalEvt("EXTREME_EQUIP_UPDATE",this,this.updateRP),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateRP)},s.prototype.btnHanlder=function(){this.index!==s.getSelectType()&&s.setSelectType(this.index)},s.prototype.updateRP=function(){this.rPImg.visible=i.ExtremeEquipModel.instance.getIndexRp(this.index)},s.prototype.setData=function(t){n.prototype.setData.call(this,t);var e=i.ExtremeEquipModel.instance.getNameOrIcon(this.index,2);this.icon.skin="extreme_equip/"+e+".png",this.itemName.text=i.ExtremeEquipModel.instance.getNameOrIcon(this.index,1),this.updataFrame(),this.updateRP()},s.prototype.updataFrame=function(){this.baseImg.skin=s._selectType===this.index?"extreme_equip/icon_zzzb_1.png":"extreme_equip/icon_zzzb_0.png"},s.prototype.destroy=function(){this.icon=this.destroyElement(this.icon),this.itemName=this.destroyElement(this.itemName),n.prototype.destroy.call(this)},s._selectType=-1,e=s,i.ExtremeEquipItem=e}(modules=modules||{}),function(t){var e,i,u,d,n,h,c,s;function o(){this.strs=i.instance.getCfgById(98001)[2],this.order=0}e=t.extreme_equip||(t.extreme_equip={}),i=t.config.BlendCfg,u=t.bag.BagModel,d=t.config.ZhiZunEquipCfg,n=t.redPoint.RedPointCtrl,h=t.config.SkillCfg,c=t.config.ZhizunEquipSuitSkillCfg,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.updateZhizunEquipSuitSkill=function(t){t&&(this.suitSkills=t[1],this.order=t[0],this.setRP(),GlobalData.dispatcher.event("EXTREME_EQUIP_UPDATE"))},o.prototype.getZhiZunEquipInfoReply=function(t){t&&(this.data=t[0],this.suitSkills=t[1],this.order=t[2],this.setRP(),GlobalData.dispatcher.event("EXTREME_EQUIP_UPDATE"))},o.prototype.getZhiZunEquipOneInfoReply=function(t){if(this.data&&t){for(var e=0,i=this.data.length;e<i;e++)if(this.data[e][0]===t[0]){this.data[e]=t;break}this.setRP(),GlobalData.dispatcher.event("EXTREME_EQUIP_UPDATE")}},o.prototype.setRP=function(){this.data&&n.instance.setRPProperty("extremeEquioPanelRP",-1!=this.getRpIndex())},o.prototype.getRpIndex=function(){if(!this.data)return-1;for(var t=0,e=this.data.length;t<e;t++){var i=d.instance.getCfgByIdAndLevel(this.data[t][0],this.data[t][1]+1);if(i&&i[2][1]<=u.instance.getItemCountById(i[2][0]))return t;for(var n=[],s=0,o=d.instance.getCfgByIdAndLevel(this.data[t][0],1)[5].length;s<o;s++)this.data[t][2][s]?n.push(this.data[t][2][s]):n.push(0);for(var a=0,r=n.length;a<r;a++){var l=n[a];if(0===Math.floor(l%1e3)){if(0<this.data[t][1])return t}else{var h=this.getCfgSkillId(t),c=0;for(s=0,o=h.length;s<o;s++)if(CommonUtil.getSkillPureIdById(h[s])===CommonUtil.getSkillPureIdById(l)){c=h[s];break}if(0===c&&console.log("这种情况有bug"),l<c)return t}}}return-1},o.prototype.getIndexRp=function(t){if(!this.data)return!1;var e=d.instance.getCfgByIdAndLevel(this.data[t][0],this.data[t][1]+1);if(e&&e[2][1]<=u.instance.getItemCountById(e[2][0]))return!0;for(var i=[],n=0,s=d.instance.getCfgByIdAndLevel(this.data[t][0],1)[5].length;n<s;n++)this.data[t][2][n]?i.push(this.data[t][2][n]):i.push(0);for(var o=0,a=i.length;o<a;o++){var r=i[o];if(0===Math.floor(r%1e3)){if(0<this.data[t][1])return!0}else{for(var l=this.getCfgSkillId(t),h=0,c=0,p=l.length;c<p;c++)if(CommonUtil.getSkillPureIdById(l[c])===CommonUtil.getSkillPureIdById(r)){h=l[c];break}if(0===h&&console.log("这种情况有bug"),r<h)return!0}}return!1},o.prototype.getFight=function(){if(!this.data)return 0;for(var t=0,e=0,i=this.data.length;e<i;e++)if(r=d.instance.getCfgByIdAndLevel(this.data[e][0],this.data[e][1])){t+=r[4];var n=this.data[e][2];if(n)for(var s=0,o=n.length;s<o;s++){var a=h.instance.getCfgById(n[s]);a&&(t+=a[3])}}var r,l=c.instance.getCfgAndIndex(this.order);return l&&(t+=(r=l[1])[4]),t},o.prototype.getNameOrIcon=function(t,e){return this.strs[2*t+(1===e?1:0)]},o.prototype.getCfgSkillId=function(t){if(-1!==t){var e=this.data[t][0],i=this.data[t][1],n=d.instance.getCfgByIdAndLevel(e,i);return n&&n[5]||[0,0]}},s=o,e.ExtremeEquipModel=s}(modules=modules||{}),function(t){var u,e,d,s,y,g,i;function n(){return null!==e&&e.apply(this,arguments)||this}u=t.extreme_equip||(t.extreme_equip={}),d=t.config.SkillCfg,s=t.config.SkillPureCfg,y=t.common.CustomClip,g=t.config.ZhiZunEquipCfg,e=ui.ExtremeEquipSkillItemUI,__extends(n,e),n.prototype.destroy=function(){this.skillName=this.destroyElement(this.skillName),this.skillItem=this.destroyElement(this.skillItem),e.prototype.destroy.call(this)},n.prototype.setData=function(t){this.flag=t;var e=u.ExtremeEquipModel.instance.data[u.ExtremeEquipItem.getSelectType()];this.skillItem.dotImg.visible=!1;for(var i=e[2]||[],n=0,s=0,o=i.length;s<o;s++)CommonUtil.getSkillPureIdById(i[s])===this.flag&&(n=i[s]);var a=n||1e4*this.flag;if(0===Math.floor(a%1e3)){this.skillItem.iconImg.gray=!0,this.skillItem.levTxt.visible=this.skillItem.lvBaseImg.visible=!1,y.thisStop(this._eff);var r=g.instance.getCfgByIdAndLevel(e[0],1),l=d.instance.getCfgById(a+1);this.skillName.text=CommonUtil.getSkillName(a),this.skillMsc.text=this.getSkillDes(l[0],l[2]),this.skillItem.iconImg.skin="assets/icon/skill/"+CommonUtil.getSkillIcon(a)+".png",this.skillItem.iconImg.gray=!0,this.skillItem.stateImg.skin="common/txt_xq_kjh.png",0<e[1]?(this.playEffet(),this.skillItem.stateImg.visible=!0,this.skillItem.dotImg.visible=!0):(y.thisStop(this._eff),this.skillItem.stateImg.visible=!1)}else{this.skillItem.iconImg.gray=!1;var h=u.ExtremeEquipModel.instance.getCfgSkillId(u.ExtremeEquipItem.getSelectType()),c=0;for(s=0,o=h.length;s<o;s++)if(CommonUtil.getSkillPureIdById(h[s])===this.flag){c=h[s];break}0===c&&console.log("这种情况有bug"),this.skillItem.stateImg.skin="common/txt_xq_ksj.png",a<c?(this.skillItem.stateImg.visible=!0,this.skillItem.dotImg.visible=!0,this.playEffet()):(y.thisStop(this._eff),this.skillItem.stateImg.visible=!1),r=d.instance.getCfgById(a),this.skillItem.iconImg.skin="assets/icon/skill/"+CommonUtil.getSkillIcon(a)+".png";var p=a%1e3>>0;this.skillItem.levTxt.text=p.toString(),this.skillItem.levTxt.visible=this.skillItem.lvBaseImg.visible=!0,this.skillName.text=CommonUtil.getSkillName(a),this.skillMsc.text=this.getSkillDes(r[0],r[2])}},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.skillItem,this,this.skillIconHanlder)},n.prototype.skillIconHanlder=function(){WindowManager.instance.open(1291,this.flag)},n.prototype.getSkillDes=function(t,e){var i=CommonUtil.getSkillPureIdById(t),n=s.instance.getCfgById(i);return n[9]||CommonUtil.stringFormat(n[5],e)},n.prototype.playEffet=function(){this._eff||(this._eff=CommonUtil.creatEff(this.skillItem,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0)),y.thisPlay(this._eff)},i=n,u.ExtremeEquipSkillItem=i}(modules=modules||{}),function(t){var e,s,i,n;function o(){this.init()}e=t.familiars_down||(t.familiars_down={}),s=t.funcOpen.FuncOpenModel,i=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.init=function(){this._stateTable={}},Object.defineProperty(o.prototype,"info",{get:function(){return this._info},enumerable:!0,configurable:!0}),o.prototype.updateGetFashionBuy=function(t){if(this._info=t){for(var e=t[0],i=0,n=e.length;i<n;i++)this._stateTable[e[i][0]]=e[i][1];s.instance.setActionOpen(251,t[1])}else s.instance.setActionOpen(251,2);GlobalData.dispatcher.event("MTJS_GET_FASHION_BUY"),this.checkRP()},o.prototype.getStateByRechargeId=function(t){return this._stateTable[t]||0},o.prototype.checkRP=function(){this._info?(i.instance.setRPProperty("motongjiangshiRp1",1===this.getStateByRechargeId(51)),i.instance.setRPProperty("motongjiangshiRp2",1===this.getStateByRechargeId(52)),i.instance.setRPProperty("motongjiangshiRp3",1===this.getStateByRechargeId(53))):(i.instance.setRPProperty("motongjiangshiRp1",!1),i.instance.setRPProperty("motongjiangshiRp2",!1),i.instance.setRPProperty("motongjiangshiRp3",!1))},n=o,e.FamiliarsDownModel=n}(modules=modules||{}),function(t){var a,e,r,l,i;function n(){return e.call(this)||this}a=t.family_party||(t.family_party={}),r=t.config.FamilyPartyTaskCfg,l=t.config.BlendCfg,e=ui.FamilyPartyBtnItemUI,__extends(n,e),n.getSelectType=function(){return n._selectType},n.setSelectType=function(t){t!==n._selectType&&(n._selectType=t,GlobalData.dispatcher.event("FAMILY_PARTY_BTN_CLICK"))},n.prototype.initialize=function(){e.prototype.initialize.call(this),this.ImgRp.visible=!1},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.clickBtn,this,this.clickBtnHandler),this.onAutoGlobalEvt("FAMILY_PARTY_BTN_CLICK",this,this.updataView),this.onAutoGlobalEvt("FAMILY_PARTY_UPDATA",this,this.updataRP)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this.type=t[0],this.festivalType=t[1],this.btnLabel.text=this.getName(this.type),this.updataView()},n.prototype.updataView=function(){this.clickBtn.skin=n.getSelectType()===this.type?"family_party/btn_khpd_02.png":"family_party/btn_khpd_01.png",this.btnLabel.color=n.getSelectType()===this.type?"#ffffff":"#a46547",this.updataRP()},n.prototype.updataRP=function(){var t=a.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(t){var e=!!t[0];if(this.ImgRp.visible=!1,e)for(var i=t[1],n=0,s=i.length;n<s;n++){var o=r.instance.getCfgById(parseInt(i[n][0]));if(2===i[n][1]&&o[6]===this.type){this.ImgRp.visible=!0;break}}else this.ImgRp.visible=!1}},n.prototype.clickBtnHandler=function(){this.type!==n.getSelectType()&&n.setSelectType(this.type)},n.prototype.getName=function(t){var e=l.instance.getCfgById(93001);if(!e)return null;for(var i=-1,n=e[1],s=0,o=n.length;s<o;s++)if(t===n[s]){i=s;break}return 0<=i?e[2][i]:null},n._selectType=-1,i=n,a.FamilyPartyBtnItem=i}(modules=modules||{}),function(a){var h,o,e,c,n,t;function i(){return o.call(this)||this}h=a.family_party||(a.family_party={}),e=a.common.CommonUtil,c=a.config.FamilyPartyTaskCfg,n=a.commonAlert.PropAlertUtil,o=ui.FamilyPartyItemUI,__extends(i,o),i.prototype.initialize=function(){o.prototype.initialize.call(this),this.createEffect(),e.setHTMLPro(this.condition,"#FFFFFF","SimHei",24),this._taskBase=[this.carnivalBase1,this.carnivalBase2,this.carnivalBase3];for(var t=0;t<3;t++)this._taskBase[t].visible=!1;this.state=0},i.prototype.destroy=function(){this._taskBase=this.destroyElement(this._taskBase),this._btnClip=this.destroyElement(this._btnClip),o.prototype.destroy.call(this)},i.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHandler),this.onAutoClick(this.gotoBtn,this,this.gotoHandler),this.onAutoGlobalEvt("FAMILY_PARTY_UPDATA",this,this.updataView)},i.prototype.gotoHandler=function(){var t=this,e=h.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(e){var i=h.FamilyPartyModel.instance.getCloseDlogsId(this.festivalType)||[];if(e[0]){var n=e[6],s=this._cfg[11],o=["直接完成","直接完成该任务需要<span style='color:#b15315'>"+s+"点派对点</span>,是否直接完成？","派对点:<span style='color:"+(s<=n?"#168a17":"#ff3e3e")+"'>"+n+"/"+s+"</span>",function(){n<s?a.notice.SystemNoticeManager.instance.addNotice("派对点不足",!0):h.FamilyPartyCtrl.instance.fastCompletePartyTask(t.festivalType,t._cfg[0])}];WindowManager.instance.open(1269,o)}else WindowManager.instance.open(i[1])}},i.prototype.setData=function(t){o.prototype.setData.call(this,t),this.taskID=t[0],this.festivalType=t[1],this.openDlog=t[2],this._cfg=c.instance.getCfgById(this.taskID);for(var e=this._cfg[2],i=0;i<3;i++)this._taskBase[i].visible=!1;i=0;for(var n=e.length;i<n;i+=2){var s=i/2>>0;this._taskBase[s].dataSource=[e[i],e[i+1],0,null],this._taskBase[s].visible=!0}this.updataView()},i.prototype.updataView=function(){if(this._cfg){var t=this.getSingleTask(),e=t?t[1]:1;this.state=e,this._btnClip.stop(),this._btnClip.visible=!1;var i="#ff3e3e";GlobalData.serverTime>=h.FamilyPartyModel.instance.getTypeByEndTm(this.festivalType)?(this.sureBtn.visible=this.received.visible=!1,this.theEnd.visible=!0):(this.theEnd.visible=!1,1===e?(this.sureBtn.label="前往",this.received.visible=!1,this.sureBtn.visible=!0):2===e?(this._btnClip.play(),this.received.visible=!1,this._btnClip.visible=!0,i="#00ad35",this.sureBtn.label="领取",this.sureBtn.visible=!0):(this.received.visible=!0,i="#00ad35",this.sureBtn.visible=!1));var n,s=this._cfg[10];if(t){var o=0,a=c.instance.getTaskEndCfg(this.taskID);a&&(o=a[10]);var r=t[2][0][1],l=o<r?o:r;1!==this.state&&(l=s),n="("+l+"/"+s+")"}else n="(0/"+s+")";this.gotoBtn.visible=1===this.state,this.condition.innerHTML=this._cfg[5]+"<span style='color:"+i+"'>"+n+"</span>"}},i.prototype.sureHandler=function(){var t=h.FamilyPartyModel.instance.getTypeByData(this.festivalType),e=h.FamilyPartyModel.instance.getCloseDlogsId(this.festivalType)||[];if(t[0])if(1===this.state){n.skipScene(this._cfg[4]);var i=WindowManager.instance.getDialogById(e[0]);i&&this._cfg[4]&&i.close()}else 2===this.state?h.FamilyPartyCtrl.instance.drawFamilyPartyTaskReward(this.taskID,this.festivalType):console.log("....不存在的状态",this.state);else WindowManager.instance.open(e[1])},i.prototype.getSingleTask=function(){var t=h.FamilyPartyModel.instance.getTypeByData(this.festivalType);if(!t)return null;var e=t[1];if(!e)return null;for(var i=0,n=e.length;i<n;i++)if(e[i][0]===this.taskID.toString())return e[i];return null},i.prototype.createEffect=function(){this._btnClip=e.creatEff(this.sureBtn,"btn_light",15),this._btnClip.scale(.8,.85),this._btnClip.pos(-5,-10),this._btnClip.play(),this._btnClip.visible=!1},t=i,h.FamilyPartyItem=t}(modules=modules||{}),function(g){var t,d,f,_,e;function m(){this.festivalType=[],this._endTm=[],this.actionOpenId=[762,815,816,836,925,946,1017],this.needCloseId=[[1139,1141],[1229,1230],[1231,1232],[1255,1256],[1390,1391],[1426,1427],[1523,1524]],this.rechargeId=[301,301,302,301,301,301,303],this.isShowDlog=[!1,!1,!1,!1,!1,!1,!1],this.actionRP=["familyPartyRP","childrenPartyRP","hequPartyRP","barPartyRP","midAutumuPartyRP","douybleNinePartyRP","endNianPartyRP"],this.data=[]}t=g.family_party||(g.family_party={}),d=g.config.FamilyPartyTaskCfg,f=g.redPoint.RedPointCtrl,_=g.config.FamilyPartyCfg,Object.defineProperty(m,"instance",{get:function(){return this._instance=this._instance||new m},enumerable:!0,configurable:!0}),m.prototype.init=function(){this.festivalType=[g.festival.FestivalModel.instance.PerfectestTenType,g.festival.FestivalModel.instance.zhiZhenType,12,g.festival.FestivalModel.instance.SpaceTravelType,67,g.festival.FestivalModel.instance.BarDayType,g.festival.FestivalModel.instance.openFestivalType],this._endTm=[];for(var t=0,e=this.festivalType.length;t<e;t++){var i=g.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType[t]);i?this._endTm.push(i[2][1]):this._endTm.push(0)}},m.prototype.getCloseDlogsId=function(t){var e=this.festivalType.indexOf(t);return 0<=e?this.needCloseId[e]:null},m.prototype.getTypeByActionRP=function(t){var e=this.festivalType.indexOf(t);return 0<=e?this.actionRP[e]:null},m.prototype.getTypeByActionOpenId=function(t){var e=this.festivalType.indexOf(t);return 0<=e?this.actionOpenId[e]:null},m.prototype.getTypeByRechargeId=function(t){var e=this.festivalType.indexOf(t);return 0<=e?this.rechargeId[e]:301},m.prototype.setTypeByIsShowDlog=function(t,e){var i=this.festivalType.indexOf(e);0<=i&&(this.isShowDlog[i]=t)},m.prototype.getTypeByIsShowDlog=function(t){var e=this.festivalType.indexOf(t);return 0<=e&&this.isShowDlog[e]},m.prototype.getTypeByEndTm=function(t){if(12===t){var e=g.festival.FestivalModel.instance.info[t];return e?e[2]:0}var i=this.festivalType.indexOf(t);return 0<=i?this._endTm[i]:0},m.prototype.getTypeByData=function(t){for(var e=0,i=this.data.length;e<i;e++)if(this.data[e][5]===t)return this.data[e];return null},m.prototype.getFamilyPartyInfoReply=function(t){if(t){for(var e=t[5],i=-1,n=0,s=this.data.length;n<s;n++)if(this.data[n][5]===e){i=n;break}0<=i?this.data[i]=t:this.data.push(t),GlobalData.dispatcher.event("FAMILY_PARTY_UPDATA"),this.setRP(e)}},m.prototype.syncFamilyPartyTaskFinish=function(t){if(t){var e=t[1],i=this.getTypeByData(e);if(i){for(var n=t[0],s=i[1],o=0,a=s.length;o<a;o++)if(s[o][0]===n[0]){s[o]=n;break}GlobalData.dispatcher.event("FAMILY_PARTY_UPDATA"),this.setRP(e)}}},m.prototype.getListByType=function(t,e,i,n){void 0===n&&(n=!0);for(var s=[],o=0,a=e.length;o<a;o++){var r=d.instance.getCfgById(e[o]);r&&r[6]===t&&r[8]&&s.push(this.findNextCfgId(e[o],i))}return n?this.listSort(s,i):s},m.prototype.findNextCfgId=function(t,e){for(;;){var i=d.instance.getCfgById(t);if(!i){console.log("不存在的配置.....",t);break}var n=this.getState(t,e),s=i[7];if(!(3<=n&&s))break;t=s}return t},m.prototype.listSort=function(t,e){for(var i=t.length,n=i,s=[4,3,1,2],o=0;o<i;o++){for(var a=0,r=0;r<n;r++){var l=s.indexOf(this.getState(t[r],e)),h=s.indexOf(this.getState(t[a],e));if(l<h)a=r;else if(l===h){var c=d.instance.getCfgById(t[r]),p=d.instance.getCfgById(t[a]);c[9]>p[9]&&(a=r)}}var u=t[a];t[a]=t[n-1],t[n-1]=u,n--}return t},m.prototype.getState=function(t,e){var i=this.getTypeByData(e);if(!i)return 1;var n=i[1];if(!n)return 1;for(var s=0,o=n.length;s<o;s++)if(parseInt(n[s][0])==t)return n[s][1];return 1},m.prototype.getFinishTaskCnt=function(t){var e=0,i=this.getTypeByData(t);if(!i)return 0;for(var n=i[1],s=0,o=n.length;s<o;s++)1<n[s][1]&&e++;return e},m.prototype.setRP=function(t){var e=g.funcOpen.FuncOpenModel.instance.getFuncIsOpen(this.getTypeByActionOpenId(t)),i=g.festival.FestivalModel.instance.getHuoDongType(t),n=GlobalData.serverTime<=this.getTypeByEndTm(t),s=!1,o=this.getTypeByData(t);if(o&&o[0]){for(var a=!1,r=!1,l=o[1],h=0,c=l.length;h<c;h++)if(2===l[h][1]){a=!0;break}var p=_.instance.getCfgByFestivalType(t),u=m.instance.getFinishTaskCnt(t),d=o[3];for(h=0,c=p[2].length;h<c;h++)if(u>=p[2][h][0]&&d.indexOf(h+1)<=-1){r=!0;break}if(!r){var y=o[4];p[4].length<=u&&!y&&(r=!0)}s=a||r}f.instance.setRPProperty(this.getTypeByActionRP(t),e&&i&&n&&s)},m.prototype.findRPType=function(t){var e=this.getTypeByData(t);if(e){if(e[0])for(var i=e[1],n=0,s=i.length;n<s;n++)if(2===i[n][1])return d.instance.getCfgById(parseInt(i[n][0]))[6];return d.instance.typeArr[0]}},e=m,t.FamilyPartyModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.feed_back||(t.feed_back={}),i=ui.FeedBackItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.yiJianHtml,"#1f304d","SimHei",22),this.yiJianHtml.width=528,this.yiJianHtml.style.leading=5,CommonUtil.setHTMLPro(this.daFuHtml,"#1f304d","SimHei",22),this.daFuHtml.width=528,this.daFuHtml.style.leading=5,CommonUtil.setHTMLPro(this.timeHtml,"#3a5385","SimHei",22,"right"),this.timeHtml.style.leading=5},s.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._Date=t,this.updateUI())},s.prototype.updateUI=function(){this.showText()},s.prototype.showText=function(){var t=this._Date[1],e=this._Date[2],i=CommonUtil.timeConversionHMS(this._Date[3],":"),n=CommonUtil.timeConversionYMD(this._Date[3],"-")+" "+i;this.yiJianHtml.innerHTML="意见:<span style='color:#3a5385'>"+t+"</span>",this.daFuHtml.innerHTML="答复:<span style='color:#3a5385'>"+e+"</span>",this.timeHtml.innerHTML="<span style='color:#168a17'>"+n+"</span>",this.setPosHight()},s.prototype.setPosHight=function(){this.daFuHtml.y=this.yiJianHtml.y+this.yiJianHtml.contextHeight+5,this.timeHtml.y=this.daFuHtml.y+this.daFuHtml.contextHeight+5,this.height=this.yiJianHtml.y+this.yiJianHtml.contextHeight+this.daFuHtml.contextHeight+this.timeHtml.contextHeight+15},n=s,e.FeedBackkItem=n}(modules=modules||{}),function(i){var s,n,t;function e(){this._maxInputChar=i.config.BlendCfg.instance.getCfgById(44001)[1][1],this._minInputChar=i.config.BlendCfg.instance.getCfgById(44001)[1][0],this._Maxcishu=i.config.BlendCfg.instance.getCfgById(44002)[1][0],i.config.BlendCfg.instance.getCfgById(44003)?this._desStr=i.config.BlendCfg.instance.getCfgById(44003)[2][0]:this._desStr="",this._cishu=10,this._type=1,this._listDate=new Array}s=i.feed_back||(i.feed_back={}),n=i.redPoint.RedPointCtrl,Object.defineProperty(e,"instance",{get:function(){return this._instance=this._instance||new e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"desStr",{get:function(){return this._desStr?this._desStr:"我们会尽快答复您提交的问题,感谢您的反馈与支持!<br/>客服工作时间:周一至周日8:00-23:00"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxInputChar",{get:function(){return this._maxInputChar?this._maxInputChar:50},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minInputChar",{get:function(){return this._minInputChar?this._minInputChar:5},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cishu",{get:function(){return this._cishu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listDate",{get:function(){return this._listDate},enumerable:!0,configurable:!0}),e.prototype.getInfo=function(t){this._listDate=t[0],GlobalData.dispatcher.event("FEED_BACK_UPDATE"),this.setRP()},e.prototype.updateInfo=function(t){var e=t[0];this._listDate.push(e),GlobalData.dispatcher.event("FEED_BACK_UPDATE"),this.setRP()},e.prototype.ChangeFeedbackState=function(){var t=new Array;if(0<this._listDate.length){for(var e=0;e<this._listDate.length;e++){var i=this._listDate[e];if(i){var n=i[0];0==i[4]&&t.push(n)}}s.FeedBackCtrl.instance.ChangeFeedbackState(t)}},e.prototype.getgRadeRP=function(){if(this._listDate)for(var t=0;t<this._listDate.length;t++){var e=this._listDate[t];if(e&&0==e[4])return!0}return!1},e.prototype.setRP=function(){var t=i.funcOpen.FuncOpenModel.instance.getFuncIsOpen(224),e=this.getgRadeRP();n.instance.setRPProperty("feedBackRP",e&&t)},t=e,s.FeedBackModel=t}(modules=modules||{}),function(c){var t,l,e,i,p,u,n;function s(){return l.call(this)||this}t=c.festival||(c.festival={}),e=ui.FestConvertItemUI,i=c.common.CustomClip,p=c.bag.BagModel,u=c.bag.BagUtil,l=e,__extends(s,l),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"ZHIZHEN_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintArr",{get:function(){return[]},enumerable:!0,configurable:!0}),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip&&(this._btnClip.removeSelf(),this._btnClip.destroy()),l.prototype.destroy.call(this,t)},s.prototype.initialize=function(){l.prototype.initialize.call(this),this.creatEffect(),this.setHint(!1)},s.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHandler),this.onAutoClick(this.changeImg,this,this.changeHint),this.onAutoGlobalEvt(this.commonEventType,this,this.updateHint),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateClip),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updateInfo),this.onAutoGlobalEvt("FESTIVAL_SWAP_UPDATE",this,this.updateInfo)},s.prototype.onOpened=function(){l.prototype.onOpened.call(this),this.updateHint(),this.updateClip(),this.updateInfo()},s.prototype.setData=function(t){l.prototype.setData.call(this,t),this._cfg=t;var e=c.common.CommonUtil.formatItemData(this._cfg[3]),i=this._cfg[4][0],n=this._cfg[5];this.box4.dataSource=[i[0],i[1],0,null];var s=e.length;this.box1.visible=!1,this.box2.visible=!1,this.box3.visible=!1,this.addOneImg.visible=!1,this.addTwoImg.visible=!1;for(var o=[this.box1,this.box2,this.box3],a=0,r=o.length-s;a<s;a++,r++)o[r].visible=!0,o[r].dataSource=e[a],2===s?this.addTwoImg.visible=!0:3===s&&(this.addOneImg.visible=!0,this.addTwoImg.visible=!0);for(this._itemId=[],this._maxPrice=[],a=0;a<s;a++)this._itemId.push(e[a][0]),this._maxPrice.push(e[a][1]);this._count=n-c.festival.FestivalModel.instance.getSwapTimesById(this.festivalType,this._cfg[0]),this.setBtnHide(this._count<=0),this.tipTxt.text=this._count.toString(),this.tipTxt.color=this._count<=0?"#FF0000":"#168a17",this.updateHint()},s.prototype.updateInfo=function(){var t=this._cfg[5];this._count=t-c.festival.FestivalModel.instance.getSwapTimesById(this.festivalType,this._cfg[0]),this.setBtnHide(this._count<=0),this.tipTxt.text=this._count.toString(),this.tipTxt.color=this._count<=0?"#FF0000":"#168a17"},s.prototype.close=function(){l.prototype.close.call(this),this._btnClip.stop(),this._btnClip.visible=!1},s.prototype.creatEffect=function(){this._btnClip=i.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-2,this.sureBtn.y-5),this._btnClip.scale(.6,.6,!0),this._btnClip.visible=!1},s.prototype.sureHandler=function(){var e=this;if(this._cfg){for(var t=void 0,i=void 0,n=0,s=this._itemId.length;n<s&&(t=this._itemId[n],!((i=p.instance.getItemCountById(t)-this._maxPrice[n])<0));n++);if(i<0)u.openLackPropAlert(t,i);else{var o=[],a=[];for(CommonUtil.getNameByItemId(this._cfg[4][0][0]),n=0,s=this._itemId.length;n<s;n++){var r=p.instance.getItemCountById(this._itemId[n]);o.push(r),a.push(this._maxPrice[n])}var l=Handler.create(this,function(t){c.festival.FestivalCtrl.instance.swapFestWorld(e.festivalType,e._cfg[0],t)}),h=[this._cfg[4][0][0],this._cfg[4][0][1],0,null];WindowManager.instance.open(469,[this._itemId,o,a,h,l,this._count])}}},s.prototype.updateHint=function(){var t=this.hintArr,e=!1;t&&this._cfg&&-1!==t.indexOf(this._cfg[0])&&(e=!0),this.setHint(e)},s.prototype.changeHint=function(){this.setHint(!this._hint,!0)},s.prototype.setHint=function(t,e){void 0===e&&(e=!1),this.updateClip(),this._hint!==t&&(this._hint=t,this.tipImg.visible=t,e&&this._cfg&&c.festival.FestivalCtrl.instance.saveHint(this.festivalTypeEx,this._cfg[0],t))},s.prototype.updateClip=function(){if(this._cfg&&this._hint){for(var t=void 0,e=void 0,i=0,n=this._itemId.length;i<n&&(t=this._itemId[i],!((e=p.instance.getItemCountById(t)-this._maxPrice[i])<0));i++);e<0||this._count<=0?(this._btnClip.stop(),this._btnClip.visible=!1):(this._btnClip.play(),this._btnClip.visible=!0)}else this._btnClip.stop(),this._btnClip.visible=!1},s.prototype.setBtnHide=function(t){t?(this._btnClip.stop(),this._btnClip.visible=!1,this.sureBtn.visible=!1,this.limitTxt.visible=!0):(this.sureBtn.visible=!0,this.limitTxt.visible=!1)},n=s,t.ConvertItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){this.payGrade=81,this.endTm=0}e=t.fight_soul_buy||(t.fight_soul_buy={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getZhanhunDirectlyBuyReply=function(t){t&&(this.endTm=t[1],this.openState=t[2],this.buyState=t[0],GlobalData.dispatcher.event("FIGHT_BUY_INFO_ALERT"),this.setRP())},s.prototype.setRP=function(){this.openState?i.instance.setRPProperty("fightSoulBuyRP",1===this.openState&&1===this.buyState):i.instance.setRPProperty("fightSoulBuyRP",!1)},n=s,e.FightSoulBuyMoel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.fight_soul_pay||(t.fight_soul_pay={}),n=t.common_alert_ex.AccPayBaseItem,i=n,__extends(o,i),Object.defineProperty(o.prototype,"accPayMoney",{get:function(){return e.FightSoulPayModel.instance.data[2]},enumerable:!0,configurable:!0}),o.prototype.getState=function(){return e.FightSoulPayModel.instance.getState(this.data)},Object.defineProperty(o.prototype,"restTm",{get:function(){return e.FightSoulPayModel.instance.restTm},enumerable:!0,configurable:!0}),o.prototype.drawAccPayAward=function(){e.FightSoulPayCtrl.instance.drawZhanhunAccPayAward(this.data[0])},Object.defineProperty(o.prototype,"cfgId",{get:function(){return this.data[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rewards",{get:function(){return this.data[2]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"accPay",{get:function(){return this.data[1]},enumerable:!0,configurable:!0}),s=o,e.FightSoulPayItem=s}(modules=modules||{}),function(t){var e,s,o,i;function a(){}e=t.fight_soul_pay||(t.fight_soul_pay={}),s=t.redPoint.RedPointCtrl,o=t.config.ZhanHunAccPayCfg,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"restTm",{get:function(){return this.data?this.data[1]:0},enumerable:!0,configurable:!0}),a.prototype.getZhanhunAccPayReply=function(t){t&&(this.data=t,this.setRP(),GlobalData.dispatcher.event("FIGHT_BUY_INFO_ALERT"))},a.prototype.getState=function(t){return this.data?0===this.data[3]?2:this.data[2]<t[1]?2:-1===this.data[0].indexOf(t[0])?1:3:2},a.prototype.sort=function(t,e){var i=a.instance.getState(t),n=a.instance.getState(e);return i===n?t[1]-e[1]:i-n},a.prototype.setRP=function(){if(this.data){for(var t=o.instance.cfgs,e=0,i=0,n=t.length;i<n;i++)1===this.getState(t[i])&&e++;s.instance.setRPProperty("fightSoulPayRP",1===this.data[3]&&0<e)}else s.instance.setRPProperty("fightSoulBuyRP",!1)},i=a,e.FightSoulPayModel=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.fight_talisman||(t.fight_talisman={}),n=t.config.FightTalismanCfg,i=ui.FightTalismanItemUI,__extends(o,i),o.prototype.setData=function(t){var e=n.instance.getCfgByEra(t[0]);switch(0==e[0]?this.valueTxt.text="装配战力护符即可提升战力至:"+e[1]:this.valueTxt.text="转生达到"+Math.floor(e[0]/100)+"转"+e[0]%100+"重可提升战力至:"+e[1],t[1]){case 2:this.stateTxt.text="已激活",this.stateTxt.color="#0ecf09",this.valueTxt.color="#0ecf09";break;case 1:this.stateTxt.text="可激活",this.stateTxt.color="#0f81f5",this.valueTxt.color="#0f81f5";break;case 0:this.stateTxt.text="未激活",this.stateTxt.color="#b0b0b0",this.valueTxt.color="#b0b0b0"}},s=o,e.FightTalismanItem=s}(modules=modules||{}),function(t){var p,u,e,i;function n(){return u.call(this)||this}p=t.fire_contention||(t.fire_contention={}),e=t.common.CustomClip,u=ui.FireContentionAchievementItemUI,__extends(n,u),n.prototype.initialize=function(){u.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26),this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.65,.65),this._btnClip.visible=!1},n.prototype.onEvt=function(){u.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},n.prototype.sureBtnHandler=function(){p.FireContentionCtrl.instance.drawWarFireAchieve(this._id)},n.prototype.setData=function(t){if(u.prototype.setData.call(this,t),t){var e=t[3],i=t[2];this._id=t[0];var n=t[1],s=p.FireContentionModel.instance.achievementList[this._id];this._state=s?s[2]:0;var o=p.FireContentionModel.instance.getAchievementNumById(n),a=i<=o?"#168a17":"#ff3e3e";switch(n){case 1:this.StatementHTML.innerHTML="累计获取"+i+"玄火<span style='color:"+a+"'>("+o+"/"+i+")</span>";break;case 2:this.StatementHTML.innerHTML="累计击败"+i+"只小怪<span style='color:"+a+"'>("+o+"/"+i+")</span>";break;case 3:this.StatementHTML.innerHTML="累计击败"+i+"只精英尊者<span style='color:"+a+"'>("+o+"/"+i+")</span>";break;case 4:this.StatementHTML.innerHTML="累计击败"+i+"只火神异兽<span style='color:"+a+"'>("+o+"/"+i+")</span>";break;case 5:this.StatementHTML.innerHTML="活动场景中累计击败"+i+"名玩家<span style='color:"+a+"'>("+o+"/"+i+")</span>"}0==this._state?this.showOver():1==this._state?this.showCanReceive():2==this._state&&this.showReceived();for(var r=new Array,l=0;l<e.length;l+=2){var h=e[l],c=e[l+1];r.push([h,c])}this.showRewards(r)}},n.prototype.showRewards=function(t){for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;for(e=0;e<t.length;e++){var i=this._taskBase[e];i&&(i.dataSource=[t[e][0],t[e][1],0,null],i.visible=!0)}},n.prototype.showCanReceive=function(){this.sureBtn.visible=!0,e.thisPlay(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1},n.prototype.showReceived=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0,this.overImg.visible=!1},n.prototype.showOver=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!0},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),u.prototype.destroy.call(this,t)},i=n,p.FireContentionAchievementItem=i}(modules=modules||{}),function(e){var o,i,t,n;function s(){return i.call(this)||this}o=e.fire_contention||(e.fire_contention={}),t=e.common.ProgressBarCtrl,i=ui.FireContentionBossListItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new t(this.proCtrlImg,150),this.isSelect.visible=!1},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("FIRE_CONTENTION_BOSS_INFOS_UPDATE",this,this.updateState)},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._type=t[0],this._dates=t[1],this._bossId=0===this._type?this._dates[0]:this._dates[3],this.bossNameText.text=e.config.MonsterResCfg.instance.getMonsterName(this._bossId),this.playerAllText.visible=!1,this.updateState())},s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.isSelect.visible=t},s.prototype.updateState=function(t){var e;if(void 0===t&&(t=!1),Laya.timer.clear(this,this.loopHandler),0===this._type)if(this.surplusText.visible=!1,this.remainTime.visible=!1,t&&(this._dates=o.FireContentionModel.instance.bossInfosTable[this._bossId]?o.FireContentionModel.instance.bossInfosTable[this._bossId]:this._dates),e=this._dates){var i=e[2];if(i[0]){Laya.timer.clear(this,this.loopHandler),this._reviveTime=i[2];var n=this._reviveTime-GlobalData.serverTime;if(n<=0)return;this.setTime(n),this._isDead=!0,this.remainTime.visible=!0,this.valueText.visible=!1,this.hpBox.visible=!1,Laya.timer.loop(1e3,this,this.loopHandler)}else if(!i[0]){Laya.timer.clear(this,this.loopHandler),this._isDead=!1,this.hpBox.visible=!0,this.valueText.visible=!0,this.remainTime.visible=!1;var s=i[1];this._proCtrl.maxValue=1e4,this._proCtrl.value=1e4*s,this.valueText.text=(100*s>>0)+"%"}}else console.log("boss信息  没有 ");else this.hpBox.visible=!1,this.valueText.visible=!1,(e=this._dates)&&(this.surplusText.visible=!0,this.remainTime.visible=!1,this.surplusText.text="已刷新")},s.prototype.loopHandler=function(){var t=this._reviveTime-GlobalData.serverTime;if(t<=0)return this.remainTime.visible=!1,void Laya.timer.clear(this,this.loopHandler);this.setTime(t)},s.prototype.setTime=function(t){this.remainTime.visible=!0,this.valueText.visible=!1,this.hpBox.visible=!1,this.remainTime.text=CommonUtil.msToHHMMSS(t)},s.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t),this._proCtrl.destroy(),this._proCtrl=null},n=s,o.FireContentionBossListItem=n}(modules=modules||{}),function(h){var t,o,e;function l(){this.endTime=0,this.tipsPanel=[],this.tipsPanelNum=0,this.serialDeathNum=0,this.targetNum=this.readyTick=this.loginTime=this.keepTime=0,this._nowIndex=0,this._nowIndex2=0,this.myFireNum=0,this.warbandFireNum=0,this.warbandFirePeopleNum=0,this.personFireListRank=new Array,this.warbandFireListRank=new Array,this.personFireListRankCopy=new Array,this.achievementList={},this.achievementNumList={},this.warfireTargetList={},this.personFireListRankTable={},this.warbandFireListRankTable={},this.personFireListRankTableByRank={},this.warbandFireListRankTableByRank={},this.bossInfosTable={},this.powerById={},this.agentIdWarFireGod=0;var t=h.config.BlendCfg.instance.getCfgById(86014)[1];this.baoDiNum=t[0],this.addTimeNum=t[1],this.addNum=t[2];var e=h.config.BlendCfg.instance.getCfgById(86022)[1];this.buffId=e[0],this.buffNum=e[1];var i=h.config.BlendCfg.instance.getCfgById(86023)[1];this.buffSkillId=i[0],this.buffSkillTime=i[1]}t=h.fire_contention||(h.fire_contention={}),o=h.player.PlayerModel,Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),l.prototype.closeAllTipWin=function(){console.log("玄火争夺 清除 tips");for(var t=0;t<this.tipsPanel.length;t++){var e=this.tipsPanel[t];e&&(e.removeSelf(),e.destroy())}this.tipsPanel.length=0,this.tipsPanelNum=0},l.prototype.setPersonFireListRank=function(t){this.personFireListRank=t,this.personFireListRankTable={},this.personFireListRankTableByRank={};for(var e=0;e<t.length;e++){var i=t[e];this.personFireListRankTable[i[0]]=i,this.personFireListRankTableByRank[i[6]]=i}},l.prototype.setWarbandFireListRank=function(t){this.warbandFireListRank=t,this.warbandFireListRankTable={},this.warbandFireListRankTableByRank={};for(var e=0;e<t.length;e++){var i=t[e];this.warbandFireListRankTable[i[0]]=i,this.warbandFireListRankTableByRank[i[4]]=i}},l.prototype.getWarFirPersonRankReply=function(t){this.myFireNum=t[1],this.setPersonFireListRank(t[0]),GlobalData.dispatcher.event("FIRE_CONTENTION_REPLY_RANK")},l.prototype.getWarFirWarbandRankReply=function(t){this.warbandFireNum=t[1],this.warbandFirePeopleNum=t[2],this.setWarbandFireListRank(t[0]),GlobalData.dispatcher.event("FIRE_CONTENTION_REPLY_RANK")},l.prototype.getWarfireAchieveReply=function(t){this.readyTick=t[2]+GlobalData.serverTime;for(var e=t[0],i=t[1],n=0;n<e.length;n++){var s=e[n],o=s[0];this.achievementList[o]=s}for(n=0;n<i.length;n++){var a=i[n][0],r=i[n][1];this.achievementNumList[a]=r}l.instance.setRP(),GlobalData.dispatcher.event("GET_WARFIRE_ACHIEVE_REPLY")},l.prototype.getWarfireTargetReply=function(t){var e=t[0];this.targetNum=t[1],0===e.length&&(this.warfireTargetList={});for(var i=0;i<e.length;i++){var n=e[i],s=n[0];this.warfireTargetList[s]=n}l.instance.setTargetRP(),GlobalData.dispatcher.event("GET_WARFIRE_TARGET_REPLY")},l.prototype.updateWarFireSceneRanker=function(t){this.personFireListRankCopy=t[0],GlobalData.dispatcher.event("FIRE_CONTENTION_UPDATE_RANK")},l.prototype.updateWarFireRankVal=function(t){var e=t[0],i=t[1];if(39===h.scene.SceneUtil.currScene&&e===o.instance.actorId){var n=l.instance.powerById[h.player.PlayerModel.instance.actorId];if((n=n||0)<i){var s=i-n;h.notice.ScoreNoticeManager.instance.addNotice(2,s)}}this.updateHumans(e,i),this.powerById[e]=i,GlobalData.dispatcher.event("FIRE_CONTENTION_UPDATE_RANK")},l.prototype.updateHumans=function(t,e){var i=h.scene.SceneModel.instance.humans;if(i)for(var n=0,s=i.length;n<s;n++)if(i[n][5][0]===t){i[n][9]=e;break}},l.prototype.updateWarFire=function(t,e){this.updateHumans(t,e),this.powerById[t]=e,GlobalData.dispatcher.event("FIRE_CONTENTION_UPDATE_RANK")},l.prototype.updateWarFireGod=function(t){this.agentIdWarFireGod=t[0],this.nameWarFireWarbandId=t[1],this.agentIdWarFireGod&&GlobalData.dispatcher.event("FIRE_CONTENTION_UPDATE_HUOSHEN")},l.prototype.updateFireLogin=function(t){this.loginTime=t[0],this.keepTime=t[1],GlobalData.dispatcher.event("FIRE_UPDATEFIRELOGIN")},l.prototype.setRP=function(){var t=h.funcOpen.FuncOpenModel.instance.getFuncIsOpen(569);h.redPoint.RedPointCtrl.instance.setRPProperty("fireContentionRP",this.isStart&&t);var e=!1;for(var i in this.achievementList)if(this.achievementList.hasOwnProperty(i)){var n=this.achievementList[i];if(n&&1===n[2]){e=!0;break}}h.redPoint.RedPointCtrl.instance.setRPProperty("fireContentionAchievementRP",e)},l.prototype.setTargetRP=function(){var t=h.funcOpen.FuncOpenModel.instance.getFuncIsOpen(569),e=!1;for(var i in this.warfireTargetList)if(this.warfireTargetList.hasOwnProperty(i)){var n=this.warfireTargetList[i];if(n&&1===n[1]){e=!0;break}}h.redPoint.RedPointCtrl.instance.setRPProperty("fireContentionWarfireTargetRP",e&&t)},l.prototype.isMyFire=function(){return this.agentIdWarFireGod===h.player.PlayerModel.instance.actorId},l.prototype.getWarfireTargetStateById=function(t){var e=this.warfireTargetList[t];return e?e[1]:0},l.prototype.getAchievementStateById=function(t){var e=this.achievementList[t];return e?e[2]:0},l.prototype.getAchievementNumById=function(t){return this.achievementNumList[t]?this.achievementNumList[t]:0},Object.defineProperty(l.prototype,"isStart",{get:function(){if(!h.funcOpen.FuncOpenModel.instance.getFuncIsOpen(569))return!1;if(DungeonModel.instance.sceneStates){var t=DungeonModel.instance.getCopySceneStateByType(39);if(t)return 2==t[2]}return!1},enumerable:!0,configurable:!0}),l.prototype.setBossInfos=function(t){this.bossInfosTable={};for(var e=0,i=(this.bossInfos=t).length;e<i;e++)this.bossInfosTable[t[e][0]]=t[e];GlobalData.dispatcher.event("FIRE_CONTENTION_BOSS_INFOS_UPDATE_BOSS_INFO")},l.prototype.updateBossInfos=function(t){if(this.bossInfos){for(var e=0,i=t.length;e<i;e++)for(var n=0,s=this.bossInfos.length;n<s;n++)if(this.bossInfos[n][0]===t[e][0]){this.bossInfos[n]=t[e],this.bossInfosTable[this.bossInfos[n][0]]=t[e];break}GlobalData.dispatcher.event("FIRE_CONTENTION_BOSS_INFOS_UPDATE",!0)}},l.prototype.setMonsterInfos=function(t){this.monsterInfos=t,GlobalData.dispatcher.event("FIRE_CONTENTION_MONSTER_INFOS_UPDATE")},l.prototype.getBossInfoById=function(t){if(!this.bossInfos)return null;for(var e=0,i=this.bossInfos.length;e<i;e++)if(this.bossInfos[e][0]===t)return this.bossInfos[e];return null},l.prototype.getAllBuff=function(){for(var t=h.config.BlendCfg.instance.getCfgById(86013)[1],e=[],i=0;i<t.length;i++){var n=t[i],s=h.config.EffectCfg.instance.getCfgById(n);if(s){var o=s[2][0],a=s[2][1],r=0;if(1===o)r=a*h.fire_contention.FireContentionModel.instance.serialDeathNum;else if(2===o)if(4903001===n){var l=h.fire_contention.FireContentionModel.instance.serialDeathNum-1;r=-1===l?0:(l=0<l?l:0,100*a*Math.pow(2,l))}else r=100*a*h.fire_contention.FireContentionModel.instance.serialDeathNum;e.push(r)}}return e},e=l,t.FireContentionModel=e}(modules=modules||{}),function(t){var i,e,n;function s(){return e.call(this)||this}i=t.fire_contention||(t.fire_contention={}),e=ui.FireContentionPlayerListItemUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.layer=1,this.isSelect.visible=!1},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("FIRE_CONTENTION_UPDATE_RANK",this,this.showUI)},Object.defineProperty(s.prototype,"selectEnable",{get:function(){return this._selectEnable=!0,2==this._type&&this._objId===t.player.PlayerModel.instance.actorId&&(t.notice.SystemNoticeManager.instance.addNotice("无法攻击自己",!0),this._selectEnable=!1),t.warband.WarbandModel.instance.isMyWarBandPeople(this._objId)&&(t.notice.SystemNoticeManager.instance.addNotice("无法攻击同一战队玩家",!0),this._selectEnable=!1),this._selectEnable},enumerable:!0,configurable:!0}),s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.isSelect.visible=t},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this.isSelect.visible=!1,t?(this._type=t[0],this._dates=t[1],this.showUI()):this.visible=!1},s.prototype.showUI=function(){var t=0;if(1==this._type){this.playerAllText.visible=!1;var e=this._dates;this.playerName.text=e[5][5],this._objId=e[5][0],t=i.FireContentionModel.instance.powerById[this._objId]?i.FireContentionModel.instance.powerById[this._objId]:0}else 2==this._type&&(this.playerAllText.visible=!1,e=this._dates,this.playerName.text=e[2],t=e[5],this._objId=e[0]);this.numText.text=""+t},n=s,i.FireContentionPlayerListItem=n}(modules=modules||{}),function(t){var s,o,e;function i(){return o.call(this)||this}s=t.fire_contention||(t.fire_contention={}),o=ui.FireContentionRankItemUI,__extends(i,o),i.prototype.setData=function(t){o.prototype.setData.call(this,t);var e="",i=0,n=null;0===s.FireContentionModel.instance._nowIndex?(n=s.FireContentionModel.instance.personFireListRankTableByRank[t])&&(e=n[2],i=n[5]):1===s.FireContentionModel.instance._nowIndex&&(n=s.FireContentionModel.instance.warbandFireListRankTableByRank[t])&&(e=n[2],i=n[3]),n?(this.notplaylisttxt.visible=!1,this.box1.visible=!0,this.nameTxt.text=e,this.scoreTxt.text=""+i):(this.notplaylisttxt.visible=!0,this.box1.visible=!1),1===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+t)},e=i,s.FireContentionRankItem=e}(modules=modules||{}),function(t){var s,o,e;function i(){return o.call(this)||this}s=t.fire_contention||(t.fire_contention={}),o=ui.FireContentionRankItem1UI,__extends(i,o),i.prototype.setData=function(t){o.prototype.setData.call(this,t);var e="",i=0,n=null;0===s.FireContentionModel.instance._nowIndex?(n=s.FireContentionModel.instance.personFireListRankTableByRank[t])&&(e=n[2],i=n[5]):1===s.FireContentionModel.instance._nowIndex&&(n=s.FireContentionModel.instance.warbandFireListRankTableByRank[t])&&(e=n[2],i=n[3]),n?(this.notplaylisttxt.visible=!1,this.box1.visible=!0,this.nameTxt.text=e,this.scoreTxt.text=""+i):(this.notplaylisttxt.visible=!0,this.box1.visible=!1),1===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+t)},e=i,s.FireContentionRankItem1=e}(modules=modules||{}),function(t){var l,h,e;function i(){return h.call(this)||this}l=t.fire_contention||(t.fire_contention={}),h=ui.FireContentionRankRewardItemUI,__extends(i,h),i.prototype.setData=function(t){var e;h.prototype.setData.call(this,t);var i=new Array;if(0===l.FireContentionModel.instance._nowIndex2?(e=t[0],i=t[1]):1===l.FireContentionModel.instance._nowIndex2&&(e=t[0],i=t[1]),e){1===e[0]&&1===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===e[0]&&2===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===e[0]&&3===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.rankText.visible=!0,e[0]===e[1]?this.rankText.text="第"+e[0]+"名":this.rankText.text="第"+e[0]+"-"+e[1]+"名");for(var n=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],s=0;s<n.length;s++)(a=n[s]).visible=!1;var o=[];for(s=0;s<i.length;s+=2){var a=i[s],r=i[s+1];o.push([a,r,0,null])}for(s=0;s<o.length;s++)a=o[s],(r=n[s])&&a&&(r.dataSource=a,r.visible=!0)}},e=i,l.FireContentionRankRewardItem=e}(modules=modules||{}),function(t){var c,p,e,i;function n(){return p.call(this)||this}c=t.fire_contention||(t.fire_contention={}),e=t.common.CustomClip,p=ui.FireContentionAchievementItemUI,__extends(n,p),n.prototype.initialize=function(){p.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26),this._btnClip=e.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.65,.65),e.thisStop(this._btnClip)},n.prototype.onEvt=function(){p.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},n.prototype.sureBtnHandler=function(){c.FireContentionCtrl.instance.drawWarFireTarget(this._id)},n.prototype.setData=function(t){if(p.prototype.setData.call(this,t),t){var e=t[2],i=t[1];this._id=t[0];var n=c.FireContentionModel.instance.warfireTargetList[this._id];this._state=n?n[1]:0;var s=c.FireContentionModel.instance.targetNum,o=i<=s?"#168a17":"#ff3e3e";this.StatementHTML.innerHTML="本场战斗累计获取玄火"+i+"<span style='color:"+o+"'>("+s+"/"+i+")</span>",0==this._state?this.showOver():1==this._state?this.showCanReceive():2==this._state&&this.showReceived();for(var a=new Array,r=0;r<e.length;r+=2){var l=e[r],h=e[r+1];a.push([l,h])}this.showRewards(a)}},n.prototype.showRewards=function(t){for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;for(e=0;e<t.length;e++){var i=this._taskBase[e];i&&(i.dataSource=[t[e][0],t[e][1],0,null],i.visible=!0)}},n.prototype.showCanReceive=function(){this.sureBtn.visible=!0,e.thisPlay(this._btnClip),this.receivedImg.visible=!1,this.overImg.visible=!1},n.prototype.showReceived=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0,this.overImg.visible=!1},n.prototype.showOver=function(){e.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!1,this.overImg.visible=!0},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),p.prototype.destroy.call(this,t)},i=n,c.FireContentionRewardItem=i}(modules=modules||{}),function(t){var p,e,i,u,n,s;function o(){return e.call(this)||this}p=t.fly_up||(t.fly_up={}),i=t.common.CustomClip,u=t.config.FeiShengTaskCfg,n=t.commonAlert.PropAlertUtil,e=ui.FlyUpItemUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.htmlMsc,"#3d5981","SimHei",20),this.htmlMsc.style.wordWrap=!1},o.prototype.destroy=function(){this.htmlMsc=this.destroyElement(this.htmlMsc),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHanlder)},o.prototype.setDate=function(t){this._taskId=t,this.updataView()},o.prototype.updataView=function(){var t=p.FlyUpModel.instance.data;if(t){for(var e=t[1],i=null,n=0,s=e.length;n<s;n++)if(this._taskId.toString()===e[n][0]){i=e[n];break}var o,a,r=u.instance.getCfgById(this._taskId);if(i){this._state=i[1];var l=i[2][0];o="("+l[1]+"/"+l[2]+")"}else{this._state=3;var h=r[2][0][1][0];o="("+h+"/"+h+")"}var c=r[1];this.item.dataSource=[c[0],c[1],0,null],1==this._state?(this.btn.visible=!0,this.img.visible=!1,this.btn.label="前往",this.btn.skin="common/btn_tonyong_36.png",this.btn.labelColors="#465460",a="#ff3e3e",this.stopEff()):2==this._state?(this.btn.visible=!0,this.img.visible=!1,this.btn.label="领取",this.btn.skin="common/btn_tonyong_35.png",this.btn.labelColors="#9d5119",a="#168a17",this.playEff()):(this.btn.visible=!1,this.img.visible=!0,this.img.skin="common/txt_commmon_ylq.png",this.btn.skin="common/btn_tonyong_35.png",a="#168a17",this.stopEff()),this.htmlMsc.innerHTML=""+r[4],this.conditon.text=o,this.conditon.color=a}},o.prototype.btnHanlder=function(){var t=u.instance.getCfgById(this._taskId),e=t[2][0],i=t[3];1==this._state?-1===i?WindowManager.instance.open(106,[90430001,0,!0]):780===i?WindowManager.instance.openByActionId(i,e[1][2]-1):n.skipScene(i):2==this._state&&p.FlyUpCtrl.instance.getFeiShengTaskReward(this._taskId)},o.prototype.playEff=function(){this._btnClip||(this._btnClip=CommonUtil.creatEff(this.btn,"btn_light",15),this._btnClip.pos(-4,-5,!0),this._btnClip.scale(.65,.6,!0)),i.thisPlay(this._btnClip)},o.prototype.stopEff=function(){i.thisStop(this._btnClip)},s=o,p.FlyUpTaskItem=s}(modules=modules||{}),function(o){var a,i,t,s,r,l,n,e,h;function c(){return null!==i&&i.apply(this,arguments)||this}a=o.forbiddenBoss||(o.forbiddenBoss={}),t=o.common.CustomList,s=o.bag.BagModel,r=o.common.CommonUtil,l=o.common.CustomClip,n=o.scene.SceneModel,e=o.sheng_yu.ShenYuBossCtrl,i=ui.BossHomeAwardAlertUI,__extends(c,i),c.prototype.initialize=function(){i.prototype.initialize.call(this),this._showList=t.create("h",64,139,532,100,o.bag.BaseItem,8),this.addChild(this._showList),this._itemList=t.create("v",64,315,532,270,o.bag.BaseItem,8,5),this.addChild(this._itemList),this._eff=r.creatEff(this.btn,"btn_light",15),this._eff.pos(-5,-10),this.descTxt.color="#b15315"},c.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BAG_UPDATE",this,this.update),this.onAutoClick(this.btn,this,this.btnHandler)},c.prototype.onOpened=function(){i.prototype.onOpened.call(this);var t=n.instance.enterScene[3];this.txt.text="("+t+"层)",this.descTxt.text="队伍成员共享竞速BOSS的归属奖励";var e=a.ForbiddenBossModel.instance.info;e&&2===e[3]?(this.txt.text="(特殊BOSS层)",this.descTxt.text="特殊BOSS奖励只与个人相关"):e&&3===e[3]&&(this.txt.text="(终极BOSS层)",this.descTxt.text="队伍成员均可获得排名奖励"),this.showAwards(t),this.update()},c.prototype.showAwards=function(t){var e=o.config.SceneForbiddenBossCfg.instance.getCfgByLayer(t),i=a.ForbiddenBossModel.instance.info;if(i&&3===i[3]&&(e=o.config.SceneForbiddenBossCfg.instance.getCfgByStage(3)),!e)throw new Error("boss之家取不到配置getCfgByFirstLayer layer---\x3e"+t);var n=e[6];if(n){var s=r.formatItemData(n);this._showList.datas=s}},c.prototype.update=function(){var t=s.instance.getItemsByBagId(7);if(t){for(var e=new Array,i=0;i<t.length;i++){var n=t[i];n&&e.push([n[0],n[1],0,null])}this._itemList.datas=e,0===t.length?(this.btn.disabled=!0,l.thisStop(this._eff)):(this.btn.disabled=!1,l.thisPlay(this._eff))}},c.prototype.btnHandler=function(){e.instance.PickTempReward(),this.close()},c.prototype.destroy=function(){this._itemList=this.destroyElement(this._itemList),this._showList=this.destroyElement(this._showList),this._eff=this.destroyElement(this._eff),i.prototype.destroy.call(this)},h=c,a.ForbiddenBossBagAlert=h}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.forbiddenBoss||(t.forbiddenBoss={}),i=ui.ForbiddenBossFinalAlertUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.closeOnSide=!1},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._countDownTime=5,Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler(),DungeonModel.instance.clearForbiddenBoss()},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.loopHandler=function(){this._countDownTime<=0?(Laya.timer.clear(this,this.loopHandler),this.close()):(this.numClip.visible=!0,this.numClip.value=this._countDownTime.toString()),this._countDownTime--},n=s,e.ForbiddenBossFinalAlert=n}(modules=modules||{}),function(s){var t,e,i;function n(){return null!==e&&e.apply(this,arguments)||this}t=s.forbiddenBoss||(s.forbiddenBoss={}),e=ui.ForbiddenBossHurtViewUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.layer=1,this.closeByOthers=!1,this.top=230,this.centerX=60,this.zOrder=-1},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("BOSS_HURT_RANK_UPDATE",this,this.updateView)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},n.prototype.updateView=function(){for(var t=s.sceneTeam.SceneTeamModel.instance.hurtRank[s.config.ForbiddenBossCfg.instance.lastBossId]||[],e=0,i=0;i<t.length;++i)if(t[i][0][0]===PlayerModel.instance.actorId||t[i][0][0]===PlayerModel.instance.teamId){e=t[i][1]||0;break}if(PlayerModel.instance.teamId){this.firstTxt.y=30,this.secendTxt.visible=!0,this.firstTxt.text="己方队伍总伤害:"+CommonUtil.bigNumToString(e);var n=s.sceneTeam.SceneTeamModel.instance.perHurt||0;this.secendTxt.text="自己总伤害:"+CommonUtil.bigNumToString(n),s.common_group.CommonGroupModel.instance.isHomeowners?this.playerHead.type=0:this.playerHead.setInfo(0,s.common_group.CommonGroupModel.instance.leaderOcc,0)}else this.firstTxt.y=50,this.secendTxt.visible=!1,this.firstTxt.text="自己总伤害:"+CommonUtil.bigNumToString(s.sceneTeam.SceneTeamModel.instance.perHurt||0),this.playerHead.type=0},i=n,t.ForbiddenBossHurtPanel=i}(modules=modules||{}),function(s){var t,e,i;function n(){return e.call(this)||this}t=s.forbiddenBoss||(s.forbiddenBoss={}),e=ui.SingleInspireAlertUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this.coinImg.skin="common/shenghuyu.png",this.coinTxt.text=s.config.ForbiddenBossCfg.instance.getBlendCfg(2)[1][1]+"/次";var t=.5*(120-this.coinTxt.textWidth);this.coinTxt.x=280+t,this.coinImg.x=236+t,this.titleTxt.text="队伍鼓舞",this.descTxt.text="每次鼓舞增加队伍成员10%攻击（上限100%）"},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.inspireBtn,this,this.inspireHandler),this.onAutoGlobalEvt("DUNGEON_INSPIRE_UPDATE",this,this.inspireUpdate)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.inspireUpdate()},n.prototype.inspireHandler=function(){s.zxian_yu.ZXianYuModel.instance.xianyu<s.config.ForbiddenBossCfg.instance.getBlendCfg(2)[1][1]?s.bag.BagUtil.openLackPropAlert(s.config.ForbiddenBossCfg.instance.getBlendCfg(2)[1][0],s.config.ForbiddenBossCfg.instance.getBlendCfg(2)[1][1]):s.dungeon.DungeonCtrl.instance.reqInspire(0)},n.prototype.inspireUpdate=function(){var t=DungeonModel.instance.inspires;if(t){for(var e=0,i=0,n=t.length;i<n;i++)e+=t[i][1]*s.config.ForbiddenBossCfg.instance.getBlendCfg(3)[1][0];this.curInspireTxt.text="当前鼓舞：攻击+"+(100*e).toFixed(0)+"%"}else this.curInspireTxt.text="当前鼓舞：攻击+0%"},i=n,t.ForbiddenBossInspireAlert=i}(modules=modules||{}),function(i){var t,n,s,o,a,r,l,e;function h(){}t=i.forbiddenBoss||(i.forbiddenBoss={}),n=i.sceneTeam.SceneTeamModel,s=i.sceneTeam.SceneTeamCtrl,o=i.dungeon.DungeonCtrl,a=i.config.ForbiddenBossCfg,r=i.notice.SystemNoticeManager,l=i.funcOpen.FuncOpenModel,Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.setSelect=function(t,e){if(this.dummy||DungeonModel.instance.bossIsDead(t)||!t)console.log("禁地boss  待机等待~~~~~~~~~~~~~~~~~~  "+t);else if(t!==PlayerModel.instance.selectTargetId){if(0===e)return this.selectBossId=t,PlayerModel.instance.selectTarget(1,t),void(i.common_group.CommonGroupModel.instance.isHomeowners&&s.instance.SceneSetTeamData(t));if(DungeonModel.instance.bossIsDead(PlayerModel.instance.selectTargetId))if(DungeonModel.instance.bossIsDead(n.instance.leaderSelectId)){if(1!==e||i.common_group.CommonGroupModel.instance.isHomeowners)return 2===e?(PlayerModel.instance.selectTarget(1,t),void(i.common_group.CommonGroupModel.instance.isHomeowners&&s.instance.SceneSetTeamData(t))):void console.log("禁地boss啥状态也没进  待机："+t);PlayerModel.instance.selectTarget(1,t)}else PlayerModel.instance.selectTarget(1,n.instance.leaderSelectId)}},h.prototype.getSelectedId=function(){return DungeonModel.instance.bossIsDead(PlayerModel.instance.selectTargetId)?DungeonModel.instance.bossIsDead(n.instance.leaderSelectId)?0:n.instance.leaderSelectId:PlayerModel.instance.selectTargetId},h.prototype.goHandler=function(){if(l.instance.getFuncIsOpen(777)){var t=DungeonModel.instance.getCopySceneStateByType(44);if(t&&2==t[2])if(h.instance.finalBossDead)r.instance.addNotice("终极BOSS已被击败",!0);else{t[3];var e=a.instance.getBlendCfg(1)[1],i=(e[1],e[2],(h.instance.finishLevel||0)+1);o.instance.reqEnterScene(3201,i)}else r.instance.addNotice("活动未开启",!0)}else r.instance.addNotice(l.instance.getFuncOpenTipById(777),!0)},e=h,t.ForbiddenBossModel=e}(modules=modules||{}),function(o){!function(t){var h,c=o.config.MonsterResCfg,p=o.config.ForbiddenBossCfg,u=o.common.AvatarClip,d=o.config.ExteriorCfg,y=o.common.SimpleList,g=o.bag.BaseItem,f=o.config.ActivityAllCfg,e=(h=ui.ForbiddenBossViewUI,__extends(i,h),i.prototype.destroy=function(t){void 0===t&&(t=!0),this._modelClip=this.destroyElement(this._modelClip),this._btnList=this.destroyElement(this._btnList),this._lastRwdList=this.destroyElement(this._btnList),this._spRwdList=this.destroyElement(this._btnList),this.observationItem=this.destroyElement(this.observationItem),h.prototype.destroy.call(this,t)},i.prototype.initialize=function(){h.prototype.initialize.call(this),this.centerX=this.centerY=0,this.viewRankRwds.underline=!0,this._modelClip=u.create(1024,1024,1024),this.addChildAt(this._modelClip,3),this._modelClip.anchorX=.5,this._modelClip.anchorY=.5,this._modelClip.x=240,this._modelClip.y=500;var t=c.instance.getMonsterRes(p.instance.lastBossId),e=d.instance.getCfgById(t);this._modelClip.reset(t),this._modelClip.avatarScale=e[10]?e[10]:1,this._modelClip.avatarRotationX=e[6],this._modelClip.avatarRotationY=e[7],this._modelClip.avatarY=e[9],this._modelClip.avatarX=e[8],this._btnList=y.create(_,158,172,2,1,-10,0),this._btnList.pos(25,982),this._btnList.size(666,172),this.addChild(this._btnList),this._btnList.datas=[41,246,42,723,777],this._lastRwdList=y.create(g,100,100,1,2,20,12),this._lastRwdList.pos(455,255),this._lastRwdList.size(220,340),this.addChild(this._lastRwdList);for(var i=p.instance.getBlendCfg(12)[2],n=[],s=0;s<i.length;s+=1){var o=i[s].slice(1,-1).split("#");n.push([parseInt(o[0]),parseInt(o[1]),0,null])}this._lastRwdList.datas=n,this._spRwdList=y.create(g,100,100,2,1,20,0),this._spRwdList.pos(360,720),this._spRwdList.size(100,100),this.addChild(this._spRwdList);var a=p.instance.getBlendCfg(11)[2],r=[];for(s=0;s<a.length;s+=1)o=a[s].slice(1,-1).split("#"),r.push([parseInt(o[0]),parseInt(o[1]),0,null]);this._spRwdList.x=370-60*r.length,this._spRwdList.width=120*r.length-20,this._spRwdList.datas=r;var l=f.instance.getCfgBySceneType(44);l&&(this.helpTxt.text=l[2].split("#")[1])},i.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoClick(this.teamBtn,this,this.teamBtnHearl),this.onAutoClick(this.callBtn,this,this.goHandler),this.onAutoClick(this.tipBtn,this,this.tipHandler),this.onAutoClick(this.auctionBtn,this,this.auctionHandler),this.onAutoEvt(this._btnList,"select",this,this.selectHandler),this.onAutoClick(this.viewRankRwds,this,this.rankHandler)},i.prototype.goHandler=function(){o.common_group.CommonGroupUtil.OldCopyTeamIsOtherTeam(8)||o.forbiddenBoss.ForbiddenBossModel.instance.goHandler()},i.prototype.teamBtnHearl=function(){o.common_group.CommonGroupUtil.teamBtnHearl(8)},i.prototype.tipHandler=function(){CommonUtil.alertHelp(19033)},i.prototype.auctionHandler=function(){WindowManager.instance.open(1169)},i.prototype.rankHandler=function(){WindowManager.instance.open(1179)},i.prototype.onOpened=function(){h.prototype.onOpened.call(this),t.ForbiddenBossCtrl.instance.GetForbiddenBossCopyInfo(),this._btnList.selectedIndex=4,this._btnList.scrollToIndex(4),this.observationItem.data=[[this._modelClip,0]]},i.prototype.selectHandler=function(){switch(this._btnList.selectedIndex){case 0:WindowManager.instance.open(75);break;case 1:WindowManager.instance.open(400);break;case 2:WindowManager.instance.open(80);break;case 3:WindowManager.instance.open(1135)}4!=this._btnList.selectedIndex&&(this._btnList.selectedIndex=4)},i);function i(){return null!==h&&h.apply(this,arguments)||this}t.ForbiddenBossPanel=e;var n,_=(n=o.common.ItemRender,__extends(s,n),s.prototype.initialize=function(){n.prototype.initialize.call(this),this._btn=new Laya.Button,this.addChild(this._btn),this._rp=new Laya.Image("common/image_common_xhd.png"),this._rp.pos(114,46),this._rp.visible=!1,this.addChild(this._rp)},s.prototype.onEvt=function(){switch(n.prototype.onEvt.call(this),this.data){case 41:this.regAutoRP(this._rp,["threeWorldsRP"]),this.regGuideSpr(64,this);break;case 42:this.regAutoRP(this._rp,["bossHomeRP"]),this.regGuideSpr(66,this);break;case 246:this.regAutoRP(this._rp,["shenYuBossRP1"]);break;case 723:this.regAutoRP(this._rp,["foreignRP","foreignTaskRP","foreignBossComRP","foreignBossFameRP"]);break;case 777:this.regAutoRP(this._rp,["forbiddenBossRP"])}},s.prototype.offEvt=function(){switch(n.prototype.offEvt.call(this),this.data){case 41:this.removeGuideSpr(64,this);break;case 246:this.removeGuideSpr(66,this)}},s.prototype.setSelected=function(t){n.prototype.setSelected.call(this,t),this._btn.selected=t},s.prototype.setData=function(t){switch(n.prototype.setData.call(this,t),t){case 41:this._btn.skin="forbidden_boss/btn_tab_2.png",this._btn.stateNum=2,this._btn.label="";break;case 246:this._btn.skin="forbidden_boss/btn_tab_3.png",this._btn.stateNum=2,this._btn.label="";break;case 42:this._btn.skin="forbidden_boss/btn_tab_1.png",this._btn.stateNum=2,this._btn.label="";break;case 723:this._btn.skin="forbidden_boss/btn_tab_4.png",this._btn.stateNum=2,this._btn.label="";break;case 777:this._btn.skin="forbidden_boss/btn_tab_5.png",this._btn.stateNum=2,this._btn.label=""}},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btn=this.destroyElement(this._btn),n.prototype.destroy.call(this,t)},s);function s(){return null!==n&&n.apply(this,arguments)||this}t.BossBtnItem=_}(o.forbiddenBoss||(o.forbiddenBoss={}))}(modules=modules||{}),function(c){!function(t){var e,i=c.common.SimpleList,n=c.bag.BaseItem,s=c.config.ForbiddenBossCfg,o=(e=ui.ForbiddenBossRankUI,__extends(a,e),a.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this._list=i.create(l,548,96,1,1,0,3),this._list.pos(61,183),this._list.size(548,562),this.addChild(this._list),this._list.datas=s.instance.getBlendCfg(5)[2]},a);function a(){return null!==e&&e.apply(this,arguments)||this}t.ForbiddenBossRankAlert=o;var r,l=(r=ui.ForbiddenBossRankItemUI,__extends(h,r),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),r.prototype.destroy.call(this,t)},h.prototype.initialize=function(){r.prototype.initialize.call(this),this._list=i.create(n,100,100,2,1,20,0),this._list.size(100,100),this._list.pos(300,7),this._list.scale(.8,.8),this.addChild(this._list)},h.prototype.setData=function(t){r.prototype.setData.call(this,t);var e=t.slice(1,-1).split("#"),i=parseInt(e[0]),n=parseInt(e[1]);1===i&&1===n?(this.rankImg.skin="common/zs_tongyong_7.png",this.rankTxt.text=""):2===i&&2===n?(this.rankImg.skin="common/zs_tongyong_8.png",this.rankTxt.text=""):3===i&&3===n?(this.rankImg.skin="common/zs_tongyong_9.png",this.rankTxt.text=""):(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.text=i<n?i+"-"+n:""+i);for(var s=[],o=2;o<e.length;o+=2)s.push([parseInt(e[o]),parseInt(e[o+1]),0,null]);this._list.width=120*s.length-20,this._list.x=542-96*s.length,this._list.datas=s},h);function h(){return null!==r&&r.apply(this,arguments)||this}t.ForbiddenBossRankItem=l}(c.forbiddenBoss||(c.forbiddenBoss={}))}(modules=modules||{}),function(l){!function(t){var e,i=(e=ui.ForbiddenBossRewardUI,__extends(n,e),n.prototype.destroy=function(){this._list=this.destroyElement(this._list),e.prototype.destroy.call(this)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this.bgImg.height=this.height=941,this.okBtn.visible=!0,this.titleTxt.text="本次伤害排名",this.closeOnSide=!1,this._list=l.common.SimpleList.create(s,548,96,1,1,0,10),this._list.size(530,530),this._list.pos(68,184,!0),this.addChild(this._list)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.okBtn,this,this.close)},n.prototype.close=function(){l.dungeon.DungeonCtrl.instance.reqEnterScene(0),e.prototype.close.call(this)},n.prototype.loopHandler=function(){0===this._duration&&(this.close(),Laya.timer.clear(this,this.loopHandler)),this.okBtn.label="确定("+this._duration+")",--this._duration},n.prototype.updateBossHurtRank=function(){var t=l.sceneTeam.SceneTeamModel.instance.hurtRank[l.config.ForbiddenBossCfg.instance.lastBossId];if(t){var e=l.config.ForbiddenBossCfg.instance.getBlendCfg(5)[2],i=parseInt(e[e.length-1].slice(1,-1).split("#")[1]);this._list.datas=t.length>i?t.slice(0,i):t;for(var n=0,s=0,o=0,a=t.length;o<a;o++){var r=t[o][0];if(r[0]===PlayerModel.instance.actorId||r[0]===PlayerModel.instance.teamId){n=r[2],s=t[o][1];break}}this.myRankTxt.text="我的队伍："+(0===n?"未上榜":n),this.myDamageTxt.text="队伍伤害："+l.common.CommonUtil.bigNumToString(s)}},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateBossHurtRank(),Laya.timer.loop(1e3,this,this.loopHandler),this._duration=.001*l.config.BlendCfg.instance.getCfgById(10303)[1][0],this.loopHandler()},n);function n(){return null!==e&&e.apply(this,arguments)||this}t.ForbiddenBossResultAlert=i;var a,s=(a=ui.ForbiddenBossRewardItemUI,__extends(o,a),o.prototype.initialize=function(){a.prototype.initialize.call(this),this._bagItem=new l.bag.BaseItem,this.addChild(this._bagItem),this._bagItem.scale(.8,.8,!0),this._bagItem.pos(400,8,!0)},o.prototype.setData=function(t){a.prototype.setData.call(this,t),this.rankTxt.visible=!1;var e=t;this.nameTxt.text=e[0][1]+"的队伍",this.damageTxt.text="伤害："+CommonUtil.bigNumToString(e[1]);var i=e[0][2];1===i?this.rankImg.skin="common/zs_tongyong_7.png":2===i?this.rankImg.skin="common/zs_tongyong_8.png":3===i?this.rankImg.skin="common/zs_tongyong_9.png":(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.visible=!0,this.rankTxt.text=i.toString()),this._bagItem.dataSource=null;for(var n=l.config.ForbiddenBossCfg.instance.getBlendCfg(5)[2],s=0;s<n.length;++s){var o=n[s].slice(1,-1).split("#");parseInt(o[0])<=i&&parseInt(o[1])>=i&&(this._bagItem.dataSource=[parseInt(o[2]),parseInt(o[3]),0,null])}},o);function o(){return null!==a&&a.apply(this,arguments)||this}t.ForbiddenBossResultItem=s}(l.forbiddenBoss||(l.forbiddenBoss={}))}(modules=modules||{}),function(e){var t,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=e.forbiddenBoss||(e.forbiddenBoss={}),i=ui.ForbiddenBossSceneLeftUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.left=0,this.bottom=480,this.closeByOthers=!1,this.layer=3,this.BagManTipBox.visible=this.handbookRPImg.visible=!1},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.handBookBtn,this,this.handBookBtnHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.regAutoRP(this.handbookRPImg,["shenYuBossRP"])},s.prototype.handBookBtnHandler=function(){WindowManager.instance.open(1178)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateBag()},s.prototype.updateBag=function(t){void 0===t&&(t=7),this.BagManTipBox.visible=!1,7==t&&(e.bag.BagModel.instance.getBagEnoughById(7)<=e.sheng_yu.ShengYuBossModel.instance.tipsNum?this.newTitleBtnEffectLoop():this._tipBox1Tween&&this._tipBox1Tween.stop())},s.prototype.newTitleBtnEffectLoop=function(){this._tipBox1Tween&&(this._tipBox1Tween.stop(),this.BagManTipBox.visible=!1),this.BagManTipBox.y=-61,this.BagManTipBox.visible=!0,this._tipBox1Tween=TweenJS.create(this.BagManTipBox).to({y:this.BagManTipBox.y-15},600).start().yoyo(!0).repeat(99999999)},s.prototype.close=function(){this._tipBox1Tween&&(this._tipBox1Tween.stop(),this.BagManTipBox.visible=!1),i.prototype.close.call(this)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._tipBox1Tween&&(this._tipBox1Tween.stop(),this._tipBox1Tween=null),i.prototype.destroy.call(this,t)},n=s,t.ForbiddenBossSceneLeftPanel=n}(modules=modules||{}),function(d){!function(f){var t,_=d.config.ForbiddenBossCfg,e=d.common.SimpleList,i=d.sceneTeam.SceneTeamModel,n=d.dungeon.DungeonCtrl,s=d.common.CustomClip,o=(t=ui.ForbiddenBossSceneRightUI,__extends(a,t),a.prototype.initialize=function(){t.prototype.initialize.call(this),this.right=0,this.bottom=280,this.layer=3,this.closeByOthers=!1,this.zOrder=-1,this.teamBox.visible=this.inspireBox.visible=!0,this._bossList=e.create(l,265,30,1,1,0,0),this._bossList.width=265,this._bossList.height=132,this._bossList.y=36,this._bossList.x=(this.bossBox.width-this._bossList.width)/2,this.bossBox.addChild(this._bossList),this._damageList=e.create(p,400,30,1,1,0,0),this._damageList.width=400,this._damageList.height=95,this._damageList.y=78,this._damageList.x=(this.damageBox.width-this._damageList.width)/2,this.damageBox.addChild(this._damageList),this._prizeEffect=s.create("assets/effect/ok_state.atlas","ok_state",8),this._prizeEffect.pos(-68,-76,!0),this._prizeEffect.scale(1.4,1.4,!0)},a.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._bossList,"select",this,this.selectBossHandler),this.onAutoClick(this.teamBtn,this,this.teamHandler),this.onAutoClick(this.inspireBtn,this,this.inspireHandler),this.onAutoClick(this.helpBtn,this,this.helpHandler),this.onAutoClick(this.itemAward,this,this.joinAwardClickHandler),this.onAutoGlobalEvt("FORBIDDEN_BOSS_STAGE_UPDATE",this,this.updateStageInfo),this.onAutoGlobalEvt("BOSS_HURT_RANK_UPDATE",this,this.updateDamageBox),this.onAutoGlobalEvt("DUNGEON_INSPIRE_UPDATE",this,this.updateInspire),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateBossBox),this.onAutoGlobalEvt("DUNGEON_UPDATE_JOIN_AWARD",this,this.updateRewardBox),this.onAutoClick(this.damageListBtn,this,this.damageListHandler),this.onAutoClick(this.bossListBtn,this,this.bossListHandler),this.teamRpImg.visible=!1,this.regAutoRP(this.teamRpImg,["teaminvastion"])},a.prototype.offEvt=function(){t.prototype.offEvt.call(this),this._prizeEffect.stop(),this._prizeEffect.removeSelf()},a.prototype.damageListHandler=function(){this.damageListBtn.scaleY=-this.damageListBtn.scaleY,this.updateDamageBox()},a.prototype.bossListHandler=function(){this.bossListBtn.scaleY=-this.bossListBtn.scaleY,this.updateBossBox()},a.prototype.teamHandler=function(){d.common_group.CommonGroupUtil.inTeamCopyOpen()},a.prototype.inspireHandler=function(){WindowManager.instance.open(1180)},a.prototype.helpHandler=function(){CommonUtil.alertHelp(19034)},a.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._curStage=0,this.updateStageInfo(),this.updateInspire(),Laya.timer.loop(1e3,this,this.updateTime)},a.prototype.updateTime=function(){var t=f.ForbiddenBossModel.instance.info;if(t){var e=DungeonModel.instance.getCopySceneStateByType(44)[3],i=_.instance.getBlendCfg(1)[1],n=e-i[0]-i[1]-i[2];switch(t[3]){case 1:this.timeTxt1.text=CommonUtil.msToMMSS(e-GlobalData.serverTime),this.timeTxt2.text=CommonUtil.msToMMSS(n+i[0]-GlobalData.serverTime);break;case 2:this.timeTxt1.text=CommonUtil.msToMMSS(e-GlobalData.serverTime),this.timeTxt2.text=CommonUtil.msToMMSS(n+i[0]+i[1]-GlobalData.serverTime);break;case 3:this.timeTxt.text=CommonUtil.msToMMSS(e-GlobalData.serverTime)}DungeonModel.instance.bossIsDead(PlayerModel.instance.selectTargetId)&&this.updateBossBox()}},a.prototype.updateStageInfo=function(){var t=f.ForbiddenBossModel.instance.info;if(t){var e=t[3]||0;switch(this._curStage!=e&&(this._curStage=e),e){case 1:case 2:this.bossBox.visible=this.dungeonBox.visible=!0,this.damageBox.visible=this.rewardBox.visible=!1,this.updateBossBox(),this.updateDungeonBox();break;case 3:this.bossBox.visible=this.dungeonBox.visible=!1,this.damageBox.visible=this.rewardBox.visible=!0,this.updateDamageBox(),this.updateRewardBox(),this.updateBossBox()}}},a.prototype.updateInspire=function(){var t=DungeonModel.instance.inspires;if(t){for(var e=0,i=0,n=t.length;i<n;i++)e+=t[i][1]*_.instance.getBlendCfg(3)[1][0];this.inspireTxt.text="攻击+"+(100*e).toFixed(0)+"%"}else this.inspireTxt.text="攻击+0%"},a.prototype.updateDungeonBox=function(){if(this.dungeonBox.visible){var t=f.ForbiddenBossModel.instance.info;if(t)if(this.updateTime(),1===t[3]){this.normalBox.visible=!0,this.spBox.visible=!1,this.nowLayerTxt.text=t[1].toString(),CommonUtil.centerChainArr(300,[this.nowLayerTxtL,this.nowLayerTxt,this.nowLayerTxtR]);var e=_.instance.getHighReward(t[1],t[5]),i=e[0],n=e[1];this.upperTxt.text=i.toString(),this.lastTxt.text=n.toString(),0<n?(this.middleTxtL.text="倍BOSS归属奖励剩余",this.upperTxt.visible=this.lastTxt.visible=this.middleTxtR.visible=!0,CommonUtil.centerChainArr(300,[this.upperTxt,this.middleTxtL,this.lastTxt,this.middleTxtR])):(this.middleTxtL.text="本层多倍归属奖励已全被获得",this.upperTxt.visible=this.lastTxt.visible=this.middleTxtR.visible=!1,CommonUtil.centerChainArr(300,[this.middleTxtL]));var s=_.instance.getCountToNext(t[1]),o=s-t[6];this.countTxt.text=(o<0?0:o).toString(),0===s?(this.NextTxtR.text="竞速BOSS阶段最顶层",this.nextTxtL.visible=this.countTxt.visible=!1,CommonUtil.centerChainArr(300,[this.NextTxtR])):(this.NextTxtR.text="个BOSS后进入下一层",this.nextTxtL.visible=this.countTxt.visible=!0,CommonUtil.centerChainArr(300,[this.nextTxtL,this.countTxt,this.NextTxtR])),this.helpBtn.visible=!0}else this.normalBox.visible=!1,this.spBox.visible=!0,this.helpBtn.visible=!1}},a.prototype.updateBossBox=function(){var t=f.ForbiddenBossModel.instance.info;if(t){if(3===t[3]){var e=_.instance.lastBossId;DungeonModel.instance.bossIsDead(e)||f.ForbiddenBossModel.instance.setSelect(e,2)}if(this.bossBox.visible){-1===this.bossListBtn.scaleY?(this.bossBgImg.height=72,this._bossList.height=32):(this.bossBgImg.height=179,this._bossList.height=132),this.bossBox.bottom=0;for(var i=t[1],n=_.instance.getBossByLayer(i),s=[],o=GameCenter.instance.getRole(PlayerModel.instance.actorId),a=o?o.property.get("transform"):null,r=a?MapUtils.getPosition(a.localPosition.x,-a.localPosition.y):null,l=Number.POSITIVE_INFINITY,h=0,c=0;c<n.length;++c)if(e=n[c][4],!DungeonModel.instance.bossIsDead(e)&&(s.push(e),r)){var p=DungeonModel.instance.getBossInfoById(e)[3],u=p[0]-r.x,d=p[1]-r.y,y=Math.sqrt(u*u+d*d);y<l&&(l=y,h=s.length-1)}this._bossList.datas=s;var g=f.ForbiddenBossModel.instance.getSelectedId();if(g)this._bossList.selectedData=g;else{if(!r)return void console.log("队长目标没有 选择 return  myPos"+r);console.log("队长目标没有 选择 index:"+h+" lastSelected："+g),this._bossList.selectedIndex=h}this._bossList.scrollToIndex(this._bossList.selectedIndex)}}},a.prototype.selectBossHandler=function(){-1!==this._bossList.selectedIndex&&f.ForbiddenBossModel.instance.setSelect(this._bossList.selectedData,2)},a.prototype.updateDamageBox=function(){if(this.damageBox.visible){-1===this.damageListBtn.scaleY?(this.bgImg.height=120,this._damageList.height=32,this.myRankBox.y=116):(this.bgImg.height=186,this._damageList.height=95,this.myRankBox.y=176),this.damageBox.bottom=0;var t=i.instance.hurtRank[_.instance.lastBossId]||[];this._damageList.datas=t;var e=i.instance.getHurtRank(_.instance.lastBossId);e?(this.myRankTxt.text=e[0][2].toString(),this.myDamageTxt.text=CommonUtil.bigNumToString(e[1])):(this.myRankTxt.text="未上榜",this.myDamageTxt.text="")}},a.prototype.updateRewardBox=function(){if(this.rewardBox.visible){var t=_.instance.getBlendCfg(6)[2];this._prizeEffect.stop(),this._prizeEffect.removeSelf();for(var e=DungeonModel.instance.joinAward||[],i=0;i<t.length;++i){var n=t[i].slice(1,-1).split("#");if(e[i]&&1===e[i][1]){this.itemAward.needTip=!1,this.joinLvName.text="参与奖励·"+"一二三四五六七八九十"[i],this.itemAward.dataSource=[parseInt(n[1]),parseInt(n[2]),0,null],this.damageDescTxt.text="点击领取",this.damageDescTxt.color=CommonUtil.getColorByQuality(1),this.rewardBox.addChildAt(this._prizeEffect,1),this._prizeEffect.play();break}if(e[i]&&0===e[i][1]||!e[i]){this.itemAward.needTip=!0,this.joinLvName.text="参与奖励·"+"一二三四五六七八九十"[i],this.itemAward.dataSource=[parseInt(n[1]),parseInt(n[2]),0,null],this.damageDescTxt.text=CommonUtil.bigNumToString(parseInt(n[0]))+"伤害可领",this.damageDescTxt.color="#4C5E8A";break}i===t.length-1&&(this.itemAward.needTip=!0,this.joinLvName.text="参与奖",this.itemAward.dataSource=[parseInt(n[1]),parseInt(n[2]),0,null],this.damageDescTxt.text="已领完全部奖励",this.damageDescTxt.color="#4C5E8A")}}},a.prototype.joinAwardClickHandler=function(){this.itemAward.needTip||n.instance.getJoinAward()},a);function a(){return null!==t&&t.apply(this,arguments)||this}f.ForbiddenBossSceneRightPanel=o;var r,l=(r=ui.ForbiddenBossRBItemBossUI,__extends(h,r),h.prototype.initialize=function(){r.prototype.initialize.call(this),this.selectImg.visible=!1},Object.defineProperty(h.prototype,"target",{set:function(t){null!=this._target&&this._target.off("hp",this,this.updateHp),this._target=t,null!=this._target&&this._target.on("hp",this,this.updateHp)},enumerable:!0,configurable:!0}),h.prototype.updateHp=function(){var t;if(this._target){var e=this._target.get("hp");t=e[0]/e[1]}else{var i=DungeonModel.instance.getBossInfoById(this.data);t=i?i[2][1]:0}this.perTxt.text=(100*t).toFixed(0)+"%",this.bar.width=90*t},h.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this,this,this.clickHandler),this.onAutoGlobalEvt("SCENE_ADD_MONSTERS",this,this.setData,[this.data])},h.prototype.offEvt=function(){r.prototype.offEvt.call(this),this.target=null},h.prototype.setSelected=function(t){r.prototype.setSelected.call(this,t),this.selectImg.visible=t},h.prototype.clickHandler=function(){f.ForbiddenBossModel.instance.setSelect(this.data,0)},h.prototype.setData=function(t){r.prototype.setData.call(this,t),d.config.MonsterResCfg.instance.getCfgById(t);var e=d.config.MonsterResCfg.instance.getMonsterName(t),i=d.config.MonsterResCfg.instance.getMonsterLevel(t);this.nameTxt.text=e+" Lv."+(0<f.ForbiddenBossModel.instance.layerBossLevel?f.ForbiddenBossModel.instance.layerBossLevel:i);var n,s=d.scene.SceneModel.instance.monsters;for(var o in s)if(s[o][1]===t){n=GameCenter.instance.getRole(s[o][0]);break}this.target=n?n.property:null,this.updateHp()},h);function h(){return null!==r&&r.apply(this,arguments)||this}f.ForbiddenBossItemBoss=l;var c,p=(c=ui.ForbiddenBossRBItemDamageUI,__extends(u,c),u.prototype.setData=function(t){c.prototype.setData.call(this,t),this.nameTxt.text=t[0][2]+"、"+t[0][1]+"的队伍",this.perTxt.text=CommonUtil.bigNumToString(t[1])},u);function u(){return null!==c&&c.apply(this,arguments)||this}f.ForbiddenBossItemDamage=p}(d.forbiddenBoss||(d.forbiddenBoss={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.foreign_boss_panel||(t.foreign_boss_panel={}),i=t.commonAlert.CommonTxtAlert,__extends(s,i),s.prototype.close=function(t,e){null==t?i.prototype.close.call(this):this.cancelHandler()},s.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this.okBtn.visible=!1,this.cancelBtn.x=236},n=s,e.ForeignBossAutoAlert=n}(modules=modules||{}),function(t){var e,i,n,y,s,o;function a(){return i.call(this)||this}e=t.foreign_boss_panel||(t.foreign_boss_panel={}),n=t.common.CustomClip,y=t.foreign_boss_panel.ForeignBossModel,s=t.foreign_boss_panel.ForeignBossCtrl,i=ui.ForeignBossAwardItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.idHtml,"#3a5385","SimHei",24),this.idHtml.width=320,this._itemArr=[this.weekBase1,this.weekBase2,this.weekBase3]},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHandler)},a.prototype.sureHandler=function(){s.instance.foreignBossTaskDraw(this.data[0])},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this.showUI(t)},a.prototype.showUI=function(t){var e,i,n=y.instance,s=t[2],o=s<=(i=t[1]==y.CALL_BOSS?(e="召唤",n.callNum):(e="击败",n.killNum)),a="#ca6406";this.idHtml.innerHTML=e+CommonUtil.formatHtmlStrByColor(a,s+"")+"个异域BOSS可领取",a=o?"#148b14":"#ed5050",this.coutnTxt.text="("+i+"/"+s+")",this.coutnTxt.color=a;for(var r=t[3],l=0,h=this._itemArr.length;l<h;l++){var c=this._itemArr[l];if(r[2*l]){var p=r[2*l],u=r[2*l+1];c.dataSource=[p,u,0,null],c.visible=!0}else c.visible=!1}var d=t[0];n.drawList[d]?(this.received.visible=!0,this.sureBtn.visible=!1,this.showEffect(!1)):(this.received.visible=!1,this.sureBtn.visible=!0,this.showEffect(o))},a.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this)},a.prototype.showEffect=function(t){t?(this._btnClip||(this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-8),this._btnClip.scale(.78,.8)),n.thisPlay(this._btnClip)):n.thisStop(this._btnClip)},o=a,e.ForeignBossAwardItem=o}(modules=modules||{}),function(t){var e,i,o,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.foreign_boss_panel||(t.foreign_boss_panel={}),o=t.config.MonsterResCfg,i=ui.ForeignBossHelpItemUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.helpbtn,this,this.sureHandler),Laya.timer.loop(1e3,this,this.updTime)},s.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.updTime)},s.prototype.sureHandler=function(){e.ForeignBossCtrl.instance.foreignBossHelp(this.getdata[1])},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this.showUI(t)},s.prototype.showUI=function(t){var e=o.instance.getCfgById(t[2]);this.playername.text=t[0],this.bossHead.skin="assets/icon/monster/"+e[3]+".png";var i=t[6];this.probar.scaleX=i,this.proTxt.text=(100*i).toFixed(2)+"%",this._time=t[5],this.timeTxt.text=CommonUtil.msToMMSS(this._time);var n=t[3],s=t[4];this.htlptxt.text=n+"/"+s,this.htlptxt.color=n==s?"#ff3e3e":"#168a17"},s.prototype.updTime=function(){0<this._time&&(this.timeTxt.text=CommonUtil.msToMMSS(this._time),this._time-=1e3)},Object.defineProperty(s.prototype,"getdata",{get:function(){return this._data},enumerable:!0,configurable:!0}),n=s,e.ForeignBossHelpItem=n}(modules=modules||{}),function(t){var y,e,i;function n(){return e.call(this)||this}y=t.foreign_boss_panel||(t.foreign_boss_panel={}),e=ui.RotaryTableItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._itemArr=[this.reward1,this.reward2,this.reward3],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",22),this.oneImage.visible=!1,this.threeImg.visible=!1},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this.showUI(t)},n.prototype.showUI=function(t){var e="#168a17",i=t[1],n=t[3],s=this.index+1,o=y.ForeignBossModel.instance.rankList[i][s];if(o){this.playername.visible=!0,this.notplaylisttxt.visible=!1;var a=o[0][1];this.playername.text=a,n=o[1]}else this.playername.visible=!1,this.notplaylisttxt.visible=!0;e=CommonUtil.formatHtmlStrByColor(e,n+""),s<4?(this.otherBox.visible=!1,s=6+s,this.twoImage.skin="common/zs_tongyong_"+s+".png",this.twoImage.visible=!0):(this.twoImage.visible=!1,this.otherBox.visible=!0,this.afterthired.value=s+"");for(var r,l=t[4],h=0,c=this._itemArr.length;h<c;h++){var p=this._itemArr[h];if(l[2*h]){var u=l[2*h],d=l[2*h+1];p.dataSource=[u,d,0,null],p.visible=!0}else p.visible=!1}r=i==y.ForeignBossModel.CALL_BOSS?o?"召唤积分:"+e:"上榜条件:"+e+"积分":o?"击败数量:"+e:"击败"+e+"只BOSS可上榜",this.StatementHTML.innerHTML=r},i=n,y.ForeignBossRankItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.foreign_boss_panel||(t.foreign_boss_panel={}),i=ui.ForeignBossWarbandRankItemUI,__extends(s,i),s.prototype.setData=function(t){i.prototype.setData.call(this,t),this.showUI(t)},s.prototype.showUI=function(t){var e=t[1],i=t[0][1];this.playername.text=i,this.killtxt.text=e+""},n=s,e.ForeignBossWarbandRankItem=n}(modules=modules||{}),function(t){var s,o,e,i;function n(){return o.call(this)||this}s=t.goldBody||(t.goldBody={}),e=ui.GoldBodyItemUI,o=e,__extends(n,o),n.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.redPointHandler),this.onAutoGlobalEvt("PLAYER_BASE_ATTR_UPDATE",this,this.redPointHandler),this.onAutoGlobalEvt("GOLD_BODY_UPDATE",this,this.redPointHandler)},n.prototype.setSelected=function(t){s.GoldBodyModel.instance.checkOpenById(this._showId,!1)&&(o.prototype.setSelected.call(this,t),this.setData(this._showId))},n.prototype.setData=function(t){o.prototype.setData.call(this,t);var e=t;this._showId=e,this.bodynameTxt.text=s.GoldBodyModel.instance.getNameById(e);var i=s.GoldBodyModel.instance.getInfoById(e),n=s.GoldBodyModel.instance.checkOpenById(e,!1);this.bodyShow.skin="assets/icon/ui/gold_body_icon/ts_jinshen_0"+(this._showId+1)+".png",this.lockImg.visible=!n,this.levelTxt.text=(n?i||1:i)+"阶",this.selected?(this.bg.skin="goldbody/dt_jinshen_01.png",this.levelTxt.strokeColor="#753b23"):(this.bg.skin="goldbody/dt_jinshen_02.png",this.levelTxt.strokeColor="#808788"),this.refineRedImg.visible=n&&s.GoldBodyModel.instance.isMinLevel(this._showId,!0)&&s.GoldBodyModel.instance.checkIsFitCondition(this._showId)&&s.GoldBodyModel.instance.checkCanTrainingById(this._showId)},n.prototype.redPointHandler=function(){this.refineRedImg.visible=s.GoldBodyModel.instance.checkIsFitCondition(this._showId)&&s.GoldBodyModel.instance.isMinLevel(this._showId,!0)&&s.GoldBodyModel.instance.checkCanTrainingById(this._showId)},i=n,s.GoldBodyItem=i}(modules=modules||{}),function(t){var e,n,i,l,p,s,o,a;function r(){this.selectIndex=0,this._refineTypeNames=["无垢体","琼玉体","琉璃体","菩提体","金刚体","归元体","通玄体","不灭体"]}e=t.goldBody||(t.goldBody={}),n=t.config.GoldBodyRefineCfg,i=t.config.GoldBodyUnbeatenCfg,l=t.notice.SystemNoticeManager,p=t.player.PlayerModel,s=t.funcOpen.FuncOpenModel,o=t.redPoint.RedPointCtrl,Object.defineProperty(r,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),r.prototype.dataInit=function(t,e,i){this._refine=t,this._rise=e,this._attr=i,this._costNum=new Array,this.updateCostNum(),GlobalData.dispatcher.event("GOLD_BODY_INITED")},r.prototype.updateSoulInfo=function(t){this._refine=t[0],this._rise=t[1],this._attr=t[2],this.updateCostNum(),this.checkRefineCanTraining(),GlobalData.dispatcher.event("GOLD_BODY_UPDATE")},r.prototype.updateCostNum=function(){for(var t=0;t<this._refineTypeNames.length;t++){var e=this.getNowLvById(t),i=this.getAttrByIdAndLevel(t,e);this._costNum[t]=i[2]}},r.prototype.getAttrByIdAndLevel=function(t,e){var i=n.instance.getCfgByTypeAndLv(t,e);return i||null},r.prototype.getAttrByLevel=function(t){var e=i.instance.getCfgByLv(t);return e||null},r.prototype.checkIsRiseMax=function(t){return t>=i.instance.getMaxLvByLv()},r.prototype.checkIsRefineMax=function(t,e){return!n.instance.getCfgByTypeAndLv(t,e)},r.prototype.getNameById=function(t){return this._refineTypeNames[t]},r.prototype.getInfoById=function(t){var e=this._refine[0],i=1,n=0;if(0<e.length)for(var s=0;s<e.length;s++)if(t==e[s][0]){n=0==(i=e[s][1])?1:0==i%10?Math.floor(i/10):Math.floor(i/10)+1;break}return n},r.prototype.getLevelById=function(t){var e=this._refine[0];if(0<e.length)for(var i=0;i<e.length;i++)if(t==e[i][0])return e[i][1];return 0},r.prototype.checkOpenById=function(t,e){var i=p.instance.playerBaseAttr,n=i[2],s=i[3],o=this.getAttrByIdAndLevel(t,0)[3],a=Math.floor(o/100),r=o%100;return a<n||n==a&&r<=s||(e&&l.instance.addNotice("主角"+a+"转"+r+"重开启"),!1)},r.prototype.getNowLvById=function(t){var e=[];this._refine&&(e=this._refine[0]);var i=0;if(e&&0<e.length)for(var n=0,s=e.length;n<s;n++)t==e[n][0]&&(i=e[n][1]);return i},r.prototype.checkIsFitCondition=function(t){var e=p.instance.playerBaseAttr,i=e[2],n=e[3],s=[];this._refine&&(s=this._refine[0]);var o=0,a=!1;if(s&&0<s.length)for(var r=0,l=s.length;r<l;r++)if(t==s[r][0]&&!this.checkIsRefineMax(t,s[r][1])){var h=this.getAttrByIdAndLevel(t,s[r][1]+1);if(!h)return!1;o=(h=this.getAttrByIdAndLevel(t,s[r][1]))[3],a=!0;break}a||(o=this.getAttrByIdAndLevel(t,1)[3]);var c=Math.floor(o/100);return c<i||i==c&&o%100<=n},r.prototype.isMinLevel=function(t,e){if(void 0===e&&(e=!1),!this._refine)return!1;for(var i=r.refineIds,n=e?this.getInfoById(t):this.getLevelById(t),s=0,o=i.length;s<o;s++){var a=i[s];if(this.checkIsFitCondition(a)&&(e?this.getInfoById(a):this.getLevelById(a))<n)return!1}return!0},r.prototype.checkCanTrainingById=function(t){return this._costNum&&this._costNum[t]<=p.instance.copper},r.prototype.checkMoneyById=function(t){return this._costNum&&this._costNum[t]&&this._costNum[t]<=p.instance.copper?this._costNum[t]:1},r.prototype.checkRiseCanTraining=function(){return!!this._rise&&this._rise[1]},r.prototype.reSort=function(t){for(var i=this,e=[],n=0;n<t.length;n++)e.push(n);return e.sort(function(t,e){return i.getFirstByLv(t)-i.getFirstByLv(e)}),e},r.prototype.getFirstByLv=function(t){var e=this.getNowLvById(t);return 0<e&&e<=10?1:0==e%10?Math.floor(e/10):Math.floor(e/10)+1},r.prototype.searchIndex=function(){this.selectIndex=0;var t=this.reSort(this._refineTypeNames);if(s.instance.getFuncIsOpen(16))for(var e=0;e<t.length;e++){var i=t[e];if(this.checkOpenById(i,!1)&&this.checkIsFitCondition(i)&&this.checkCanTrainingById(i)&&this.isMinLevel(i,!0))return this.selectIndex=i,!0}return!1},r.prototype.checkRefineCanTraining=function(){if(s.instance.getFuncIsOpen(16))for(var t=0,e=r.refineIds.length;t<e;t++){var i=r.refineIds[t];if(this.checkOpenById(i,!1)&&this.checkIsFitCondition(i)&&this.checkCanTrainingById(i)&&this.isMinLevel(i,!0))return o.instance.setRPProperty("goldBodyRP",!0),!0}return this.checkRiseCanTraining()?(o.instance.setRPProperty("goldBodyRP",!0),this.selectIndex,!0):(o.instance.setRPProperty("goldBodyRP",!1),!1)},r._instance=new r,r.refineIds=[0,1,2,3,4,5,6,7],a=r,e.GoldBodyModel=a}(modules=modules||{}),function(t){var e,i;function n(){}e=t.goldBody||(t.goldBody={}),n.soulTotalAttrIndices=[1,2,3,4,5,6,7,8,61,62],i=n,e.GoldBodyUtil=i}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.grain_full_continuous_pay||(e.grain_full_continuous_pay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.GrainFullContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.GrainFullType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.GrainFullContinuousPayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.grain_full_continuous_pay||(a.grain_full_continuous_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("grainFullContinuousPayRP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.GrainFullType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.GrainFullType)&&t){var e=t[19];if(e){this._restTm=t[2],this._moneyAcc=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(770),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.GrainFullType);r.instance.setRPProperty("grainFullContinuousPayRP",t&&e&&i)},e=i,t.GrainFullContinuousPayModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.grain_full_cumulate_pay||(e.grain_full_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.GrainFullCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.GrainFullCumulatePayModel.instance.accumulate,e=this._datas[1];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.GrainFullType)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=null,this._value=null,n.prototype.destroy.call(this,t)},a=r,i.GrainFullCumulatePayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.grain_full_cumulate_pay||(a.grain_full_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("grainFullDayContinuousPayRP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.GrainFullType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.GrainFullType)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(772),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.GrainFullType);r.instance.setRPProperty("grainFullDayContinuousPayRP",t&&e&&i)},e=i,t.GrainFullCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_festival||(t.grain_full_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.GrainFullType},enumerable:!0,configurable:!0}),n=s,e.GrainFullFestConLoginItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_festival||(t.grain_full_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.GrainFullType},enumerable:!0,configurable:!0}),n=s,e.GrainFullFestDailyRewardItem=n}(modules=modules||{}),function(i){var n,s,o,a,t,e;function r(){var t=null!==s&&s.apply(this,arguments)||this;return t._type=i.festival.FestivalModel.instance.GrainFullType,t}n=i.grain_full_seven_days_consume||(i.grain_full_seven_days_consume={}),o=i.config.festivalCostTotalCfg,a=i.bag.BagUtil,t=i.soaring_singlePay.PayAndAwardsItem,s=t,__extends(r,s),r.prototype.setData=function(t){if(s.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText1.visible=!0,this.scheduleText.visible=!1,this.scheduleText1.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:i.notice.SystemNoticeManager.instance.addNotice("消耗"+o.instance.getStrByType(this._type)+"数量不足",!0);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),a.canAddItemsByBagIdCount(t)&&n.GrainFullSevenDaysConsumeCtrl.instance.DrawFestCostTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计消费<span style='color:#b15315'>"+t+o.instance.getStrByType(this._type)+"</span>可领取",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.setBtnSure=function(){var t;i.festival.FestivalModel.instance.getHuoDongType(this._type)?0==(t=this._value[1])?(this.showCanReceive(),this.sureBtn.label="领取",this._btnClip.stop(),this._btnClip.visible=!1):1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.showScheduleText=function(){var t=n.GrainFullSevenDaysConsumeModel.instance.gold,e=this._datas[2];this.scheduleText1.text="("+t+"/"+e+")",this.scheduleText1.color=e<=t?"#16ba17":"#FF3e3e"},e=r,n.GrainFullSevenDaysConsumeItem=e}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._gold=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.grain_full_seven_days_consume||(r.grain_full_seven_days_consume={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gold",{get:function(){return this._gold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.GrainFullType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.GrainFullType);if(l.instance.setRPProperty("grainFull4RP",!1),e&&t){var i=t[15];if(i){this._restTm=t[2],this._gold=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(774),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.GrainFullType);l.instance.setRPProperty("grainFull4RP",t&&e&&i)},e=i,t.GrainFullSevenDaysConsumeModel=e}(modules=modules||{}),function(n){var s,i,o,a,r,t,e;function l(){return i.call(this)||this}s=n.grain_full_single_pay||(n.grain_full_single_pay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,t=n.soaring_singlePay.PayAndAwardsItem,i=t,__extends(l,i),l.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},l.prototype.sureBtnHandler=function(){var t;if(t=this._value[1],Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111);else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.GrainFullSinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},l.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},l.prototype.showScheduleText=function(){var t=this._value[1],e=Math.round(t%1e3),i=this._datas[0];0==s.GrainFullSinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},l.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(n.festival.FestivalModel.instance.GrainFullType)){var t=this._value[1],e=this._datas[0],i=s.GrainFullSinglePayModel.instance.getState(t,e);0===i?this.showGotoRecharge():1===i?this.showCanReceive():this.showReceived()}else this.showOver()},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=null,this._value=null,i.prototype.destroy.call(this,t)},e=l,s.GrainFullSinglePayItem=e}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.grain_full_single_pay||(a.grain_full_single_pay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("grainFullsinglePayRP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.GrainFullType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.GrainFullType)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(771),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.GrainFullType);l.instance.setRPProperty("grainFullsinglePayRP",t&&e&&i)},e=i,t.GrainFullSinglePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_store||(t.grain_full_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.GrainFullStoreModel.instance.rewardListById,this.types=t.festival.FestivalModel.instance.GrainFullType,i.prototype.showUI.call(this)},n=s,e.GrainFullStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.grain_full_store||(a.grain_full_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.GrainFullType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.GrainFullType)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("冬至 商城 数据：",this.rewardList)}}},e=i,t.GrainFullStoreModel=e}(modules=modules||{}),function(a){var t,i,e,n,s;function r(){this.oneNum=0,this.twoNum=0,this.threeNum=0,this.id=0,this._xunBaoType=0,this._restTm=0,this._score=0,this._state=1,this.dontShowTreasure=!1,this.festivalType=a.festival.FestivalModel.instance.GrainFullType,this._myXunbaoNote=new Array,this._myNodeList=new Array,this._myNodeListByObjId=new Array,this._rewardList=new Array,this._xunBaoType=100+this.festivalType,this.getBlendCfgShuJu()}t=a.grain_full_treasure||(a.grain_full_treasure={}),i=a.redPoint.RedPointCtrl,e=a.config.TreasureCfg,n=a.funcOpen.FuncOpenModel,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xunBaoType",{get:function(){return this._xunBaoType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xianyu",{get:function(){return a.bag.BagModel.instance.getItemCountById(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),r.prototype.callBakFunction=function(t){r.instance._restTm<GlobalData.serverTime?r.instance.dontShowTreasure?t():WindowManager.instance.open(1148,t):t()},r.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[r.instance.festivalType];if(a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType)&&t){var e=t[16];if(e){var i=e[0];if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=r.instance._myXunbaoNote.length;o=0<o?o:0,r.instance._myXunbaoNote[o]=s}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MY")}}},r.prototype.getSelfBroadcast=function(){var t=this._myXunbaoNote;return t&&100<t.length&&t.splice(0,t.length-100),t=t||[]},r.prototype.setRewardList=function(t){t&&(this._rewardList=t),this.setRP(),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},r.prototype.getInfoMyNodeList=function(t){if(t){this._myNodeList.length=0,this._myNodeListByObjId.length=0,this._myNodeList=new Array,this._myNodeListByObjId=new Array;for(var e=0;e<t.length;e++){var i=t[e],n=i[0];if(n){var s=n[0],o=n[2];this._myNodeList[o]=i,this._myNodeListByObjId[s]=i}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MYLIST")}},r.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(765),e=a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType);i.instance.setRPProperty("grainFullXunBaoRP",e&&t&&this.getgRadeRP())},r.prototype.getgRadeRP=function(){if(0<this.xianyu)return!0;if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&1==e[1])return!0}return!1},r.prototype.getRewardStart=function(t){if(this.rewardList){var e=this._rewardList[t];return e?e[1]:0}},r.prototype.getgRade=function(){for(var t=null,e=null,i=0;i<this.rewardList.length;i++){var n=this.rewardList[i];if(n){var s=n[1];if(1==s)return[i,s];2==s?t=[i,s]:e=e||[i,s]}}return e||t||[0,0]},r.prototype.getBlendCfgShuJu=function(){this.oneNum=e.instance.getItemConditionByGrad(this.xunBaoType,0)[1],this.twoNum=e.instance.getItemConditionByGrad(this.xunBaoType,1)[1],this.threeNum=e.instance.getItemConditionByGrad(this.xunBaoType,2)[1];var t=e.instance.getItemConditionByGrad(this.xunBaoType,0);this.id=t[0]},s=r,t.GrainFullTreasureModel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_treasure||(t.grain_full_treasure={}),i=t.festival.TreasureRankAwardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.GrainFullTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"myNodeList",{get:function(){return e.GrainFullTreasureModel.instance._myNodeList},enumerable:!0,configurable:!0}),n=s,e.GrainFullTreasureRankAwardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.grain_full_treasure||(t.grain_full_treasure={}),i=t.festival.TreasureRankBaseItem,__extends(s,i),s.prototype.getRewardStart=function(t){return e.GrainFullTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.GrainFullTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.GrainFullTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.GrainFullTreasureRankItem=n}(modules=modules||{}),function(t){var a,e,i,n,o,r,s;function l(){var t=e.call(this)||this;return t.getState=0,t}a=t.gushen||(t.gushen={}),i=ui.GushenItemUI,n=t.common.CustomClip,o=t.bag.BagUtil,r=t.notice.SystemNoticeManager,e=i,__extends(l,e),l.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},l.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.describeText,"#1f304d","SimHei",26,"left","middle"),this.describeText.style.wordWrap=!0,this.creatEffect()},l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},l.prototype.setData=function(t){this._cfg=t;var e=this._cfg[5];this._describe=this._cfg[7],this._condition=this._cfg[4],this._taskId=this._cfg[0],this._skipActionId=this._cfg[6],this._type=this._cfg[1],this._taskCondition=this._cfg[8],this.gushenItem.dataSource=[e[0][0],e[0][1],0,null];for(var i=a.GuShenModel.instance.nodeList,n=0;n<i.length;n++)this._type==i[n][0]&&(this._taskList=i[n][3]);for(n=0;n<this._taskList.length;n++)this._taskId==this._taskList[n][0]&&(this.getState=this._taskList[n][1],this._param=this._taskList[n][2]);this._param>=this._condition?(this._param=this._condition,this.scheduleText.color="#16ba17",1==this._taskCondition?this.scheduleText.text="(1/1)":this.scheduleText.text="("+this._param+"/"+this._condition+")"):(this.scheduleText.color="#FF3e3e",1==this._taskCondition?this.scheduleText.text="(0/1)":this.scheduleText.text="("+this._param+"/"+this._condition+")"),this.describeText.innerHTML=""+this._describe,this.describeText.style.height=this.describeText.contextHeight;var s=this.describeText.height,o=(this.height-s)/2;this.describeText.y=o,this.updateBtnState()},l.prototype.updateBtnState=function(){0!==this.getState?(this.sureBtn.label="领取",1==this.getState?(this._btnClip.visible=!0,this._btnClip.play(),this.sureBtn.visible=!0,this.receivedImg.visible=!1):(this._btnClip.visible=!1,this._btnClip.stop(),this.sureBtn.visible=!1,this.receivedImg.visible=!0)):(0==this._skipActionId?this.sureBtn.label="领取":this.sureBtn.label="前往",this.sureBtn.visible=!0,this.receivedImg.visible=!1,this._btnClip.visible=!1,this._btnClip.stop())},l.prototype.sureBtnHandler=function(){if(0==this.getState&&(0==this._skipActionId?r.instance.addNotice("条件未达成,不可领取！",!0):(WindowManager.instance.openByActionId(this._skipActionId),WindowManager.instance.close(210))),1==this.getState){for(var t=this._cfg[5],e=[],i=0,n=t.length;i<n;i++){var s=t[i];e.push([s[0],s[1],0,null])}o.canAddItemsByBagIdCount(e)&&a.GushenCtrl.instance.getGuShenTaskReward([this._taskId])}},l.prototype.creatEffect=function(){this._btnClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.sureBtn.addChild(this._btnClip),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(.8,.8,!0),this._btnClip.visible=!1},s=l,a.GushenItem=s}(modules=modules||{}),function(t){var e,f,i;function n(){}e=t.gushen||(t.gushen={}),f=t.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateInfo=function(t){this._openState=t[0],this._nodeList=t[1];for(var e=!1,i=!1,n=!1,s=!1,o=!1,a=!1,r=0;r<this._nodeList.length;r++){var l=this._nodeList[r];1==l[2]&&(e=!0);var h=l[0],c=l[3];if(1==h)for(var p=0;p<c.length;p++)1!=c[p][1]&&1!=l[2]||(i=!0);else if(2==h)for(var u=0;u<c.length;u++)1!=c[u][1]&&1!=l[2]||(n=!0);else if(3==h)for(var d=0;d<c.length;d++)1!=c[d][1]&&1!=l[2]||(s=!0);else if(4==h)for(var y=0;y<c.length;y++)1!=c[y][1]&&1!=l[2]||(o=!0);else if(5==h)for(var g=0;g<c.length;g++)1!=c[g][1]&&1!=l[2]||(a=!0)}f.instance.setRPProperty("guShenRP",i||n||s||o||a||e),f.instance.setRPProperty("gushengrade1RP",i),f.instance.setRPProperty("gushengrade2RP",n),f.instance.setRPProperty("gushengrade3RP",s),f.instance.setRPProperty("gushengrade4RP",o),f.instance.setRPProperty("gushengrade5RP",a),GlobalData.dispatcher.event("GUSHEN")},Object.defineProperty(n.prototype,"nodeList",{get:function(){return this._nodeList},enumerable:!0,configurable:!0}),i=n,e.GuShenModel=i}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return i.call(this)||this}e=t.halfMonthGift||(t.halfMonthGift={}),n=ui.SevenGiftItemUI,s=Laya.Image,o=t.common.CommonUtil,a=Laya.Text,i=n,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this.dotImg.visible=!0,this.receiveImg.visible=!1,this._qualityBg=new s,this.addChildAt(this._qualityBg,0),this._icon=new s,this.addChildAt(this._icon,1),this._numTxt=new a,this.addChild(this._numTxt),this._numTxt.width=95,this._numTxt.align="right",this._numTxt.fontSize=24,this._numTxt.color="#ffffff",this._numTxt.stroke=3,this._numTxt.strokeColor="#424242",this._numTxt.pos(18,140,!0),this.addChild(this.receiveImg)},l.prototype.setDataSource=function(t,e){if(null==t)this._icon.skin="",this._numTxt.text="",this._name="",this._qualityBg.skin="common/dt_tongyong_0.png";else{var i=t[1][e][0];this._itemCfg=o.getItemCfgById(i);var n=o.getItemQualityById(i);if(this._icon.skin=o.getIconById(i),this._qualityBg.skin="common/dt_tongyong_"+n+".png",this._name=this._itemCfg[1],1!=t[1][e][1]){var s=o.bigNumToString(t[1][e][1]);this._numTxt.text=s}else this._numTxt.text=""}this._icon.pos(21,70),this._qualityBg.pos(21,70)},l.prototype.setSevenItem=function(){this.frameImg.width=307,this.frameImg.height=196,this._numTxt.pos(93,140,!0);for(var t=0;t<this._childs.length;t++){var e=this.getChildAt(t);e!=this.dotImg?e.centerX=0:e.x=181}},l.prototype.setTopItem=function(){this.frameImg&&(this.frameImg.destroy(),this.dotImg.destroy(),this.receiveImg.destroy()),this._qualityBg.pos(0,0),this._icon.centerX=0,this._icon.centerY=0,this._qualityBg.addChild(this._icon),this._qualityBg.addChild(this._numTxt),this._qualityBg.scale(.8,.8),this._numTxt.pos(-24,65),this._numTxt.scale(1.25,1.25),this.width=100,this.height=100,this.anchorX=.5,this.anchorY=.5},Object.defineProperty(l.prototype,"selected",{set:function(t){this.frameImg.visible=t},enumerable:!0,configurable:!0}),r=l,e.HalfMonthGiftItem=r}(modules=modules||{}),function(t){var e,a,i,n;function s(){}e=t.halfMonthGift||(t.halfMonthGift={}),a=t.redPoint.RedPointCtrl,i=t.funcOpen.FuncOpenModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"halfMonthInfo",{get:function(){return this._halfMonthInfo},set:function(t){this._halfMonthInfo=t,GlobalData.dispatcher.event("HALF_MONTH_INFO_UPDATE"),i.instance.setActionOpen(180,t[0]),this.checkRP()},enumerable:!0,configurable:!0}),s.prototype.checkRP=function(){for(var t=!1,e=this._halfMonthInfo[1],i=this._halfMonthInfo[2],n=0,s=i.length;n<s;n++){var o=i[n];if(e>=o[0]&&0===o[1]){t=!0;break}}a.instance.setRPProperty("halfMonthGiftRP",t)},s.prototype.getDataByIndex=function(t){var e;return this._halfMonthInfo&&(e=this._halfMonthInfo[2][t]),e},n=s,e.HalfMonthGiftModel=n}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return n.call(this)||this}i=e.he_qu_continuous_pay||(e.he_qu_continuous_pay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.HeQuContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){if(e.festival.FestivalModel.instance.getHuoDongType(12)){var t=this._value[1];0==t?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived()}else this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.HeQuContinuousPayItem=a}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.he_qu_continuous_pay||(r.he_qu_continuous_pay={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[12],e=r.festival.FestivalModel.instance.getHuoDongType(12);if(l.instance.setRPProperty("heQu1RP",!1),e&&t){var i=t[19];if(i){this._restTm=t[2],this._moneyAcc=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(441),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(12);l.instance.setRPProperty("heQu1RP",t&&e&&i)},e=i,t.HeQuContinuousPayModel=e}(modules=modules||{}),function(e){var i,n,s,o,t,a;function r(){return null!==n&&n.apply(this,arguments)||this}i=e.he_qu_cumulate_pay||(e.he_qu_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,t=e.soaring_singlePay.PayAndAwardsItem,n=t,__extends(r,n),r.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.HeQuCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},r.prototype.showScheduleText=function(){var t=i.HeQuCumulatePayModel.instance.accumulate,e=this._datas[1];this.scheduleText.text="("+t+"/"+e+")",this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},r.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(12)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.destroy=function(t){void 0===t&&(t=!0),this._datas=this._value=null,n.prototype.destroy.call(this,t)},a=r,i.HeQuCumulatePayItem=a}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.he_qu_cumulate_pay||(a.he_qu_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("heQu2RP",!1);var t=a.festival.FestivalModel.instance.info[12];if(a.festival.FestivalModel.instance.getHuoDongType(12)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(442),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(12);r.instance.setRPProperty("heQu2RP",t&&e&&i)},e=i,t.HeQuCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_festival||(t.he_qu_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuFestConLoginItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_festival||(t.he_qu_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuFestDailyRewardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_good_man||(t.he_qu_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="he_qu/icon_hq_zslp.png"},n=s,e.HeQuGoodManItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_good_man||(t.he_qu_good_man={}),i=t.single_dog_good_man.SingleDogGoodManItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="he_qu/icon_hq_zslp.png"},n=s,e.HeQuGoodManItem1=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.sign||(t.sign={}),n=t.bag.BaseItem,i=n,__extends(o,i),s=o,e.SignItem=s}(modules=modules||{}),function(t){var r,l,e,h,i,n,s,o,a,c;function p(){var t=l.call(this)||this;return t._pos=new n(30,52),t._wid=95,t}r=t.he_qu_online_reward||(t.he_qu_online_reward={}),e=t.notice.SystemNoticeManager,h=t.config.FestivalOnlineRewardCfg,i=t.sign.SignItem,n=laya.maths.Point,s=laya.events.Event,o=t.common.CustomClip,a=t.config.ErrorCodeCfg,l=ui.HeQuOnlineRewardItemUI,__extends(p,l),p.prototype.destroy=function(t){void 0===t&&(t=!0),this._obtainClip&&(this._obtainClip.removeSelf(),this._obtainClip.destroy(),this._obtainClip=null),l.prototype.destroy.call(this,t)},p.prototype.initialize=function(){l.prototype.initialize.call(this),this._itemArray=new Array,this._obtainClip=o.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._obtainClip),this._obtainClip.pos(this.getBtn.x-5,this.getBtn.y-9,!0),this.createItem()},p.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.getBtn.on(s.CLICK,this,this.gainHandler),GlobalData.dispatcher.on("AWARD_REPLY",this,this.awardReply)},p.prototype.offEvt=function(){l.prototype.offEvt.call(this),this.getBtn.off(s.CLICK,this,this.gainHandler),GlobalData.dispatcher.off("AWARD_REPLY",this,this.awardReply),Laya.timer.clear(this,this.updatetime)},p.prototype.awardReply=function(){0==r.HeQuOnlineRewardModel.instance.AwardReply&&e.instance.addNotice(a.instance.getErrorCfgById(20005)[1],!1)},p.prototype.updatetime=function(){var t=CommonUtil.timeStampToHHMMSS(this._obtaintime);this.time.visible=this._obtaintime>=GlobalData.serverTime,this.time.text="倒计时 "+t},p.prototype.createItem=function(){for(var t=0;t<3;t++){var e=new i;e.scale(.8,.8),e.visible=!1,e.nameVisible=!1,this.addChild(e),this._itemArray.push(e)}},p.prototype.setData=function(t){l.prototype.setData.call(this,t),this.sourse=t;var e=this.sourse[1];this.getBtn.visible=this.receiveImg.visible=!0,this._obtainClip.stop(),this._obtainClip.visible=!1,0==e?(this.receiveImg.skin="common/txt_commmon_wdc.png",this._obtainClip.stop(),this._obtainClip.visible=!1,this.getBtn.visible=!1):1==e?(this._obtainClip.play(),this._obtainClip.visible=!0,this.receiveImg.visible=!1):(this.receiveImg.skin="common/txt_commmon_ylq.png",this._obtainClip.stop(),this._obtainClip.visible=!1,this.getBtn.visible=!1),this._obtaintime=this.sourse[2]+GlobalData.serverTime,this._obtaintime>GlobalData.serverTime?(this.updatetime(),this.time.visible=!0,Laya.timer.loop(1e3,this,this.updatetime)):(this.time.visible=!1,Laya.timer.clear(this,this.updatetime)),this._itemId=this.sourse[0];var i=h.instance.getCfgByIdAndDay(this._itemId,r.HeQuOnlineRewardModel.instance.day,12);this.tips.text=i[3]/6e4+"分钟",this.followTip.pos(this.tips.x+this.tips.width,this.tips.y);for(var n=i[4],s=.5*n.length,o=0;o<3;o++){var a=this._itemArray[o];o<s?(a.dataSource=[n[2*o],n[2*o+1],0,null],a.pos(this._pos.x+this._wid*o,this._pos.y),a.visible=!0):a.visible=!1}},p.prototype.gainHandler=function(){switch(this.sourse[1]){case 1:r.HeQuOnLineRewardCtrl.instance.getOnlineReward(this.sourse[0]);break;case 0:CommonUtil.noticeError(20004)}},p.prototype.close=function(){l.prototype.close.call(this),this._obtainClip.stop()},c=p,r.HeQuOnlineRewardItem=c}(modules=modules||{}),function(e){var t,i,l,n;function s(){}t=e.he_qu_online_reward||(e.he_qu_online_reward={}),i=e.redPoint.RedPointCtrl,l=e.config.FestivalOnlineRewardCfg,Object.defineProperty(s,"instance",{get:function(){return s._instance=s._instance||new s},enumerable:!0,configurable:!0}),s.prototype.uodateInfo=function(){i.instance.setRPProperty("heQuOnlineRewardRP",!1);var t=e.festival.FestivalModel.instance.info[12];e.festival.FestivalModel.instance.getHuoDongType(12)&&t&&(this._endTick=t[2],this.updateRewardReply=t[20][0],this._festivalType=t[0],this._day=t[1],this.setRP(),GlobalData.dispatcher.event("HEQU_ONLINE_REWARD_UPDATA"))},Object.defineProperty(s.prototype,"AwardReply",{get:function(){return this.awardReply},set:function(t){this.awardReply=t,GlobalData.dispatcher.event("HEQU_ONLINE_REWARD_UPDATA")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"UpdateRewardReply",{get:function(){return this.updateRewardReply},enumerable:!0,configurable:!0}),s.prototype.updataReward=function(t){this.updateRewardReply=t[0],this._festivalType=t[1],this.setRP(),GlobalData.dispatcher.event("HEQU_ONLINE_REWARD_UPDATA")},Object.defineProperty(s.prototype,"day",{get:function(){return this._day},enumerable:!0,configurable:!0}),s.prototype.listSort=function(t){for(var e=[],i=[],n=[],s=t.length,o=0;o<s;o++)switch(t[o][1]){case 0:i.push(t[o]);break;case 1:e.push(t[o]);break;case 2:n.push(t[o])}function a(t,e){var i=l.instance.getCfgByIdAndDay(t[0],r.day,12),n=l.instance.getCfgByIdAndDay(e[0],r.day,12);return i[3]-n[3]}var r=this;return e.sort(a),i.sort(a),n.sort(a),e.concat(i).concat(n)},s.prototype.setRP=function(){for(var t=!1,e=0;e<this.updateRewardReply.length;e++)if(1===this.updateRewardReply[e][1]){t=!0;break}i.instance.setRPProperty("heQuOnlineRewardRP",t)},n=s,t.HeQuOnlineRewardModel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_score_rank||(t.he_qu_score_rank={}),i=t.single_dog_score_rank.SingleDogScoreRankItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuScoreRankItem=n}(modules=modules||{}),function(r){var t,n,s,e,i;function o(){return null!==n&&n.apply(this,arguments)||this}t=r.he_qu_star||(r.he_qu_star={}),s=r.config.GoodRankSingleCfg,e=r.common.CommonUtil,n=ui.HeQuSartItem1UI,__extends(o,n),o.prototype.initialize=function(){n.prototype.initialize.call(this),this.shouHuPlayer=[this.item2,this.item3],this.shouHuPlayerText=[this.zanWuText1,this.zanWuText2],this.shouHuPlayerHTML=[this.StatementHTML1,this.StatementHTML2],e.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),e.setHTMLPro(this.StatementHTML1,"#1f304d","SimHei",22,"center"),e.setHTMLPro(this.StatementHTML2,"#1f304d","SimHei",22,"center")},o.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI)},o.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showUI()},o.prototype.setData=function(t){n.prototype.setData.call(this,t),this.mingCiImg.visible=this.mingCIclip.visible=1<=t&&t<=3,this.rankText.visible=4<=t,this.rankText.text="第 "+t+" 名",this.mingCIclip.value=""+t,this._mingCi=t,this._dates=s.instance.getCfgsByGrade(12,r.festival.FestivalModel.instance.getCrossOpenServerDay(12),this._mingCi);var e=this._dates[3],i=this._dates[6];this.StatementHTML.innerHTML="收到"+r.single_dog_sart.SingleDogSartModel.instance.getName(12)+"达<span style='color:#168a17'>"+e+"</span>可上榜",this.StatementHTML1.innerHTML="赠送<span style='color:#168a17'>"+(i?i[0]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(12)+"可上榜",this.StatementHTML2.innerHTML="赠送<span style='color:#168a17'>"+(i?i[1]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(12)+"可上榜"},o.prototype.showUI=function(){if(this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!1,this._theGoodRanker=r.single_dog_sart.SingleDogSartModel.instance.getTableByRank(12,this._mingCi),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.item1.data=t,this.item1.visible=!0,this.item1.giveBtn.visible=!0;for(var i=0;i<2;i++){var n=e[i],s=this.shouHuPlayer[i],o=this.shouHuPlayerText[i],a=this.shouHuPlayerHTML[i];n?(s.visible=!0,a.visible=o.visible=!1,s.data=n):(a.visible=o.visible=!0,s.visible=!1)}}else this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML2.visible=this.StatementHTML1.visible=this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!0},i=o,t.HeQuStarItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_star||(t.he_qu_star={}),i=t.single_dog_sart.SingleDogSartItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuStarItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_star||(t.he_qu_star={}),i=t.single_dog_sart.SingleDogSartItem2,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 12},enumerable:!0,configurable:!0}),n=s,e.HeQuStarItem2=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_store||(t.he_qu_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.HeQuStoreModel.instance.rewardListById,this.types=12,i.prototype.showUI.call(this)},n=s,e.HeQuStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.he_qu_store||(a.he_qu_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[12];if(a.festival.FestivalModel.instance.getHuoDongType(12)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("新年 商城 数据：",this.rewardList)}}},e=i,t.HeQuStoreModel=e}(modules=modules||{}),function(t){var l,e,i,n,r,h,s;function o(){return e.call(this)||this}l=t.he_qu_xunbao_happy||(t.he_qu_xunbao_happy={}),i=ui.HeQuXunBaoHappyItemUI,n=t.common.CustomClip,r=t.bag.BagUtil,h=t.config.XunBaoHappyCfg,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26),this.title=["装备","巅峰","至尊","符文","法宝"],this.creatEffect()},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("SUSANSLADE_UPDATA_VIEW",this,this.updataView),this.onAutoGlobalEvt("FESTIVAL_INFO_UPDATE",this,this.updataView)},o.prototype.setData=function(t){e.prototype.setData.call(this,t),this.source=t,this.updataView()},o.prototype.sureBtnHandler=function(){if(this.source){var t=this.source[1],e=h.instance.getRewardCfgByIdandDay(this.source[0],12);if(Math.round(t/1e3)===Math.round(t%1e3)){var i=e[3];this.gotoXunbao(i),this.close()}else{var n=[],s=e[5];if(s){for(var o=0,a=s.length;o<a;o+=2)n.push([s[o],s[o+1],0,null]);r.canAddItemsByBagIdCount(n)&&l.HeQuXunBaoHappyCtrl.instance.GetSinglePaySanshengAward(this.source[0])}}}},o.prototype.updataView=function(){if(this.source){var t=1,e=h.instance.getRewardCfgByIdandDay(this.source[0],12);if(e){t=e[4],this.StatementHTML.innerHTML="累计"+this.title[e[3]]+"寻宝<span style='color:#b15315'>"+t+"次</span>,可领取奖励";var i=this.source[1];this.overImg.visible=this.sureBtn.visible=this.receivedImg.visible=!1,this._btnClip.visible=!1;var n=l.HeQuXunBaoHappyModel.instance.getTypeByDiscountTime(e[3]);if(this.scheduleText.text="("+n[1]+"/"+e[4]+")",l.HeQuXunBaoHappyModel.instance.isAcrionOpen())switch(i){case 0:this.sureBtn.label="前往寻宝",this.sureBtn.visible=!0,this.scheduleText.color="#FF3e3e",this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460,#465460,#465460,#465460",this._btnClip.stop(),this._btnClip.visible=!1;break;case 1:this.sureBtn.label="领取",this.sureBtn.visible=!0,this.scheduleText.color="#16ba17",this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this._btnClip.play(),this._btnClip.visible=!0;break;case 2:this.receivedImg.visible=!0,this.scheduleText.color="#16ba17",this._btnClip.stop(),this._btnClip.visible=!1}else this._btnClip.stop(),this._btnClip.visible=!1,this.overImg.visible=!0;for(var s=e[5],o=0;o<this._taskBase.length;o++)this._taskBase[o].visible=!1;for(var a=0;a<s.length;a+=2){var r=this._taskBase[Math.floor(a/2)];r&&(r.dataSource=[s[a],s[a+1],0,null],r.visible=!0)}}else console.log("配置错误？？")}},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},o.prototype.creatEffect=function(){this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this.addChild(this._btnClip),this._btnClip.play(),this._btnClip.loop=!0,this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},o.prototype.gotoXunbao=function(t){switch(t){case 0:WindowManager.instance.open(93,0);break;case 1:WindowManager.instance.open(115,1);break;case 2:WindowManager.instance.open(116,2);break;case 3:WindowManager.instance.open(393,3);break;case 4:WindowManager.instance.open(113,4)}},s=o,l.HeQuXunbaoHappyItem=s}(modules=modules||{}),function(a){var t,r,l,h,e;function i(){}t=a.he_qu_xunbao_happy||(a.he_qu_xunbao_happy={}),r=a.config.XunBaoHappyCfg,l=a.funcOpen.FuncOpenModel,h=a.redPoint.RedPointCtrl,Object.defineProperty(i,"instance",{get:function(){return i._instance=i._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){h.instance.setRPProperty("heQuOnlineXunBaoHappyRP",!1);var t=a.festival.FestivalModel.instance.info[12];a.festival.FestivalModel.instance.getHuoDongType(12)&&t&&(this.endTick=t[2],this.day=t[1],this._data=t[21],this.setRP(),this.endTm=CommonUtil.getZero0clockTimeStamp(),GlobalData.dispatcher.event("HEQU_XUNBAO_UPDATA"))},i.prototype.updataXunBaoscountState=function(t){this._data&&t&&(this._data[1]=t[0],this.setRP(),GlobalData.dispatcher.event("HEQU_XUNBAO_UPDATA"))},i.prototype.updataXunBaocountTimes=function(t){if(this._data&&t){for(var e=t[0],i=this._data[0],n=0;n<i.length;n++)if(i[n][0]===e[0]){i[n]=e;break}this.setRP(),GlobalData.dispatcher.event("HEQU_XUNBAO_UPDATA")}},Object.defineProperty(i.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),i.prototype.statelistSort=function(t){for(var e=[],i=[],n=[],s=t.length,o=0;o<s;o++)switch(t[o][1]){case 0:i.push(t[o]);break;case 1:e.push(t[o]);break;case 2:n.push(t[o])}function a(t,e){var i=r.instance.getRewardCfgByIdandDay(t[0],12),n=r.instance.getRewardCfgByIdandDay(e[0],12);return i[4]-n[4]}return e.sort(a),i.sort(a),n.sort(a),e.concat(i).concat(n)},i.prototype.isAcrionOpen=function(){return a.festival.FestivalModel.instance.getHuoDongType(12)},i.prototype.getTypeByDiscountTime=function(t){for(var e=this.data[0],i=0;i<e.length;i++)if(t==e[i][0])return e[i]},i.prototype.setRP=function(){var t=!1;if(this._data){for(var e=this._data[1],i=e.length,n=0;n<i;n++)if(1===e[n][1]){t=!0;break}var s=l.instance.getFuncIsOpen(449),o=a.festival.FestivalModel.instance.getHuoDongType(12);h.instance.setRPProperty("heQuOnlineXunBaoHappyRP",t&&s&&o)}},i.prototype.getTypeByDiscount=function(t){var e=l.instance.getFuncIsOpen(449),i=a.festival.FestivalModel.instance.getHuoDongType(12);if(e&&i)for(var n=this.data[0],s=0;s<n.length;s++)if(n[s][0]==t)return n[s][2];return 1},e=i,t.HeQuXunBaoHappyModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.he_qu_yu_lan||(t.he_qu_yu_lan={}),i=t.single_dog_yu_lan.SingleDogYuLanItem,__extends(s,i),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.wardText.text="助攻奖励"},n=s,e.HeQuYuLanItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineerAwardItemUI,__extends(s,i),n=s,e.HitBirthdayCakeAwardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineerKillerItemUI,__extends(s,i),n=s,e.HitBirthdayCakeKillerItem=n}(modules=modules||{}),function(y){var t,g,f,e,_,m,i;function s(){this.festivalType=y.festival.FestivalModel.instance.AnniversaryDayType,this.keepStr=PlayerModel.instance.actorId+"swithdatanzhishu",this.nextAppearTm=0,this.true_nextAppearTm=0,this.isNotice=!1,this.swithData=[0,0,0],this.endTm=0;var t=y.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType);t&&(this.endTm=t[2][1])}t=y.hit_birthday_cake||(y.hit_birthday_cake={}),g=y.funcOpen.FuncOpenModel,f=y.redPoint.RedPointCtrl,e=laya.net.LocalStorage,_=y.config.HuntingRewardCfg,m=y.config.HuntingConstCfg,Object.defineProperty(s,"instance",{get:function(){return s._instance=s._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getHurtCond=function(){return y.config.BlendCfg.instance.getCfgById(87002)[1]},s.prototype.setHitEngineerAwardRP=function(){var t=g.instance.getFuncIsOpen(527),e=y.festival.FestivalModel.instance.getHuoDongType(this.festivalType),i=this.getAwardRP(2)||this.getAwardRP(3),n=GlobalData.serverTime<=this.endTm;f.instance.setRPProperty("hitMonsterNianAwardRP",t&&e&&i&&n)},s.prototype.setHitEngineerRP=function(){for(var t=g.instance.getFuncIsOpen(527),e=y.festival.FestivalModel.instance.getHuoDongType(this.festivalType),i=m.instance.getCfgByFestivalType(this.festivalType),n=i[1],s=n.length,o=!1,a=0;a<s;a++)if(0<y.bag.BagModel.instance.getItemCountById(n[a])){o=!0;break}var r=this.data[1]>=i[3],l=this.data[4][0],h=this.data[3],c=_.instance.getPlannerIdByCfg(l,this.festivalType,h),p=(this.data[5].length,c[3],this.getHasReward()),u=o||r||p,d=GlobalData.serverTime<=this.endTm;f.instance.setRPProperty("hitMonsterNianRP",t&&e&&u&&d)},s.prototype.getHasReward=function(){if(!this.data)return!1;var t=this.data[5].length,e=s.instance.getHurtCond(),i=0,n=y.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType);return n&&(i=n[2][1]),e&&t<e.length&&this.data[0]>=e[t]&&GlobalData.serverTime<=i},s.prototype.setRP=function(){return this.rankData&&this.data?(this.setHitEngineerAwardRP(),void this.setHitEngineerRP()):(f.instance.setRPProperty("hitMonsterNianRP",!1),void f.instance.setRPProperty("hitMonsterNianAwardRP",!1))},s.prototype.updataInfo=function(t){t&&(this.data=t,this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW",!0))},s.prototype.UpdateStageReward=function(t){t&&this.data&&(this.data[5]=t[0],this.data[0]=t[1],this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW"))},s.prototype.updateHuntingPerInfo=function(t){if(t&&this.data){var e=t[0]-this.data[0];0<e&&GlobalData.dispatcher.event("UPDATA_PLANNER_HP_VIEW",e),this.data[0]=t[0],this.data[1]=t[1],this.data[2]=t[2],this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW")}},s.prototype.UpdatePlannerKillCount=function(t){t&&this.data&&(this.data[7]=t[0],this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW"))},s.prototype.updataDrawStageReward=function(t){if(t&&this.data){var e=t[1];if(e){for(var i=[],n=0;n<e.length;n++)i.push([e[n][0],e[n][1],0,null]);WindowManager.instance.open(415,i)}this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW")}},s.prototype.updataDrawHuntingPerReward=function(t){t&&this.data&&(this.data[6]=t[1],this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW"))},s.prototype.updateHuntingPlanner=function(t){t&&this.data&&(this.boolPartUpdata(t)||(this.data[4]=t[0],this.true_nextAppearTm=t[1],0===t[1]?this.nextAppearTm=GlobalData.serverTime:this.nextAppearTm=t[1],GlobalData.dispatcher.event("UPDATA_PLANNER_TIMER_VIEW"),this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW",!0)))},s.prototype.GetHuntingLogReply=function(t){t&&(this.huntingLog=t[0],GlobalData.dispatcher.event("UPDATA_PLANNER_LOG_VIEW"))},s.prototype.updataHuntingRank=function(t){t&&(this.rankData=t,this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_RANK_VIEW"))},s.prototype.getSwithData=function(){return this.swithData||(this.swithData=[0,0,0]),this.swithData},s.prototype.keepData=function(t,e){this.swithData[t]=e},s.prototype.clearData=function(){e.setJSON(this.keepStr,null)},s.prototype.getState=function(t,e){for(var i=this.data[6],n=t[0],s=i.length,o=0;o<s;o++)if(n===i[o])return 2;var a=0;return 2===e?a=this.data[2]:3===e&&(a=this.data[7]),a>=t[3][0]?1:0},s.prototype.getRankByData=function(t){for(var e=this.rankData[0],i=0;i<e.length;i++)if(e[i][6]===t)return e[i];return null},s.prototype.getAwardRP=function(t){if(this.data){for(var e=this.data[3],i=_.instance.getCfgArrByfestivalType(this.festivalType,t,e),n=0;n<i.length;n++)if(1===this.getState(i[n],t))return!0;return!1}},s.prototype.statelistSort=function(t,e){for(var i=[],n=[],s=[],o=t.length,a=0;a<o;a++)switch(this.getState(t[a],e)){case 0:n.push(t[a]);break;case 1:i.push(t[a]);break;case 2:s.push(t[a])}function r(t,e){return t[3][0]-e[3][0]}return i.sort(r),n.sort(r),s.sort(r),i.concat(n).concat(s)},s.prototype.BuyHuntingItemReply=function(){this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW")},s.prototype.openAlert=function(t,e){y.festival.FestivalModel.instance.getHuoDongType(e)?y.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType)[2][1]<GlobalData.serverTime?y.notice.SystemNoticeManager.instance.addNotice("本轮活动已结束",!0):0<t&&e===this.festivalType&&WindowManager.instance.open(816):y.notice.SystemNoticeManager.instance.addNotice("功能未开启",!1)},s.prototype.boolPartUpdata=function(t){var e=!1,i=!1;if(0!==t[1])return!1;var n=this.data[4],s=t[0];return n[0]===s[0]&&(e=!0),n[2]&&n[2][0]!==s[0]||(i=!0),this.data[4]=t[0],e&&GlobalData.dispatcher.event("UPDATA_PLANNER_ONLY_HP"),i&&GlobalData.dispatcher.event("UPDATA_PLANNER_ONLY_ANNIHILATOR"),e||i},i=s,t.HitBirthdayCakeModel=i}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.hit_birthday_cake||(t.hit_birthday_cake={}),i=ui.HitEngineerStageAwardItemUI,__extends(s,i),n=s,e.HitBirthdayCakeStageAwardItem=n}(modules=modules||{}),function(i){var e,n,t,o,r,s;function a(){return n.call(this)||this}e=i.hit_engineer||(i.hit_engineer={}),t=ui.HitEngineerAwardItemUI,o=i.bag.BagUtil,r=i.common.CommonUtil,n=t,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),r.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26),this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],this.creatEffect(),this.gotoPanl=736,this.festivalType=e.HitEngineerModel.instance.festivalType,this.MscArr=["装饰进度","装饰","颗圣诞树","前往装饰"],this.model=e.HitEngineerModel.instance,this.ctrl=e.HitEngineerCtrl.instance},a.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("UPDATA_PLANNER_VIEW",this,this.updataView)},a.prototype.setData=function(t){n.prototype.setData.call(this,t),this.source=t,Laya.timer.clear(this,this.updataView),this.type=Math.floor(t[0]/1e4),this.endTime=0,this.endTm=0;var e=i.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType);e&&(this.endTime=e[2][1]-GlobalData.serverTime+50,this.endTm=e[2][1],Laya.timer.once(this.endTime,this,this.updataView)),this.updataView()},a.prototype.drawHuntingPerReward=function(t){e.HitEngineerCtrl.instance.DrawHuntingPerReward(t)},a.prototype.sureBtnHandler=function(){if(this.source){var t=this.model.getState(this.source,this.type);if(Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(this.gotoPanl),this.close();else{var e=[],i=this.source[4];if(i){for(var n=0,s=i.length;n<s;n+=2)e.push([i[n],i[n+1],0,null]);o.canAddItemsByBagIdCount(e)&&this.drawHuntingPerReward(this.source[0])}}}},a.prototype.updataView=function(){if(this.source){var t=this.model.data,e=this.source[3][0];2==this.type?this.StatementHTML.innerHTML=this.MscArr[0]+"达到<span style='color:#b15315'>"+r.bigNumToString(e)+"</span>可领取":3==this.type&&(this.StatementHTML.innerHTML="全民"+this.MscArr[1]+"<span style='color:#b15315'>"+r.bigNumToString(e)+"</span>"+this.MscArr[2]+"可领取");var i=this.model.getState(this.source,this.type);if(this.overImg.visible=this.sureBtn.visible=this.receivedImg.visible=!1,this._btnClip.visible=!1,2===this.type?this.scheduleText.text="("+r.bigNumToString(t[2])+"/"+r.bigNumToString(e)+")":3===this.type&&(this.scheduleText.text="("+r.bigNumToString(t[7])+"/"+r.bigNumToString(e)+")"),this.endTm>GlobalData.serverTime)switch(i){case 0:this.sureBtn.label=this.MscArr[3],this.sureBtn.visible=!0,this.scheduleText.color="#FF3e3e",this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460,#465460,#465460,#465460",this._btnClip.stop(),this._btnClip.visible=!1;break;case 1:this.sureBtn.label="领取",this.sureBtn.visible=!0,this.scheduleText.color="#16ba17",this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this._btnClip.play(),this._btnClip.visible=!0;break;case 2:this.receivedImg.visible=!0,this.scheduleText.color="#16ba17",this._btnClip.stop(),this._btnClip.visible=!1}else this.sureBtn.visible=this.receivedImg.visible=!1,this.overImg.visible=!0,this._btnClip.stop(),this._btnClip.visible=!1;for(var n=this.source[4],s=0;s<this._taskBase.length;s++)this._taskBase[s].visible=!1;for(var o=0;o<n.length;o+=2){var a=this._taskBase[Math.floor(o/2)];a&&(a.dataSource=[n[o],n[o+1],0,null],a.visible=!0)}}},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),n.prototype.destroy.call(this,t)},a.prototype.creatEffect=function(){this._btnClip=r.creatEff(this,"btn_light",15),this._btnClip.pos(this.sureBtn.x-6,this.sureBtn.y-8,!0),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},a.prototype.close=function(){Laya.timer.clear(this,this.updataView),n.prototype.close.call(this)},s=a,e.HitEngineerAwardItem=s}(modules=modules||{}),function(t){var r,l,h,c,e;function i(){}r=t.hit_engineer||(t.hit_engineer={}),l=t.config.ItemMaterialCfg,h=t.config.HuntingConstCfg,c=t.notice.SystemNoticeManager,Object.defineProperty(i,"instance",{get:function(){return i._instance=i._instance||new i},enumerable:!0,configurable:!0}),i.prototype.on=function(){GlobalData.dispatcher.on("HIT_ENGINEE_SHOW_EFF",this,this.playEff)},i.prototype.off=function(){GlobalData.dispatcher.off("HIT_ENGINEE_SHOW_EFF",this,this.playEff),this.clearEff()},Object.defineProperty(i.prototype,"targetPanel",{get:function(){return WindowManager.instance.getPanelById(736)},enumerable:!0,configurable:!0}),i.prototype.playEff=function(t){if(t)for(var e=0,i=t.length;e<i;e++){var n=t[e][0],s=t[e][1];switch(n){case 0:this.flayHp(s[0]);break;case 1:this.flaotNotice(s[0],!!s[1],s[2]);break;case 2:this.modelShow();break;case 3:this.imgQuiver(s[0])}}},i.prototype.imgQuiver=function(t){Laya.timer.clear(this,this.clearEff),this.showEff&&(this.showEff.stop(),this.showEff=null),this.effImg&&(this.effImg.removeSelf(),this.effImg=null);var e=this.targetPanel;e&&(this.effImg=new Laya.Image,this.effImg.skin="assets/others/tree/icon_mglx_bg0"+Math.floor(t+1)+".png",this.effImg.pos(362,421,!0),this.effImg.anchorX=this.effImg.anchorY=.5,e.addChild(this.effImg),this.tweenEffect())},i.prototype.clearEff=function(){this.showEff&&(this.showEff.stop(),this.showEff=null),this.effImg&&(this.effImg.removeSelf(),this.effImg=null)},i.prototype.tweenEffect=function(){var t=this;this.showEff=TweenJS.create(this.effImg).to({rotation:-10},33).onComplete(function(){t.showEff.to({rotation:10},66).onComplete(function(){t.showEff.to({rotation:0},33).onComplete(function(){Laya.timer.once(1500,t,t.clearEff)}).start()}).start()}).start()},i.prototype.modelShow=function(){var t=this.targetPanel;t&&"show"!=t.modelClip.actionType&&t.modelClip.setActionType("show",0)},i.prototype.flaotNotice=function(t,e,i){var n=h.instance.getCfgByFestivalType(r.HitEngineerModel.instance.festivalType)[1],s=l.instance.getItemCfgById(n[t]),o=s[9][0];if(e){var a="您使用了金色星星,装饰进度增加了"+i;c.instance.addNotice(a,!1)}else a="您使用了"+s[1]+",装饰进度增加了"+o,c.instance.addNotice(a,!1)},i.prototype.flayHp=function(t){var e=this.targetPanel,i=new laya.ui.Box;e.addChild(i),i.pos(460,220,!0);var n=new laya.ui.Image;n.skin="hit_engineer/zs_zhandouzi_4.png",n.pos(9,15,!0),i.addChild(n);var s=new laya.ui.FontClip;s.pos(31,12,!0),i.addChild(s),s.skin="hit_engineer/5.png",s.sheet="1234567890",s.value=t.toString(),i.scale(1.5,1.5,!0),this.trigger(i,100)},i.prototype.trigger=function(t,e){var i=t.scale;return TweenJS.create(t).combine(!0).chain(TweenJS.create(i).to({x:4,y:4,z:4},100).repeat(1).yoyo(!0),TweenJS.create(t).to({y:t.y-75},200).combine(!0).chain(TweenJS.create(t).to({alpha:0},200).delay(700),TweenJS.create(t).to({y:t.y-140},600).delay(300))).delay(e).onStart(this.begin).onComplete(function(){t&&(t.removeSelf(),t.destroy(),t=null)}).start()},i.prototype.begin=function(){},e=i,r.HitEngineerEffUtlis=e}(modules=modules||{}),function(t){var e,i,p,n;function s(){return i.call(this)||this}e=t.hit_engineer||(t.hit_engineer={}),p=t.common.CommonUtil,i=ui.HitEngineerKillerItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),p.setHTMLPro(this.noTxt,"#4c5e8a","SimHei",24),this.unuitMsc="装饰进度",this.model=e.HitEngineerModel.instance,this.ctrl=e.HitEngineerCtrl.instance,this._taskBase=[this.continueBase1,this.continueBase2,this.continueBase3];for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1},s.prototype.setData=function(t){if(t){for(var e=t[0],i=this.model.rankData[4]-1,n=t[1],s=n[4][i],o=0;o<s.length;o+=2)this._taskBase[Math.floor(o/2)].dataSource=[s[o],s[o+1],0,null],this._taskBase[Math.floor(o/2)].visible=!0;e<=3?(this.rankImg.visible=this.rankClip.visible=!0,this.rankClip.value=e.toString(),this.rankTxt.text=""):(this.rankImg.visible=this.rankClip.visible=!1,this.rankTxt.text="第"+e+"名");var a=this.model.getRankByData(e);if(a){this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!0,this.noTxt.visible=!1,this.valueTxt.text=this.unuitMsc+":"+a[5],this.playerName.text=a[2];var r=a[3],l=a[1],h=a[4];this.headIcon.setInfo(r,l,h)}else{this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!1,this.noTxt.visible=!0;var c=n[3];this.noTxt.innerHTML="虚位以待...<br>"+this.unuitMsc+"达到<span color='#168a17'>"+p.bigNumToString(c)+"</span>可上榜"}}},n=s,e.HitEngineerKillerItem=n}(modules=modules||{}),function(y){var t,g,f,_,m,e;function s(){this.festivalType=y.festival.FestivalModel.instance.AnniversaryDayType,this.nextAppearTm=0,this.true_nextAppearTm=0,this.isNotice=!1,this.endTm=0;var t=y.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType);t&&(this.endTm=t[2][1]),this.autoDate=1}t=y.hit_engineer||(y.hit_engineer={}),g=y.funcOpen.FuncOpenModel,f=y.redPoint.RedPointCtrl,_=y.config.HuntingRewardCfg,m=y.config.HuntingConstCfg,Object.defineProperty(s,"instance",{get:function(){return s._instance=s._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getHuntingUseSetReply=function(t){this.autoDate=t[0],GlobalData.dispatcher.event("UPDATA_AUTO_SELECT")},s.prototype.getHurtCond=function(){return y.config.BlendCfg.instance.getCfgById(87002)[1]},s.prototype.setHitEngineerAwardRP=function(){var t=g.instance.getFuncIsOpen(469),e=y.festival.FestivalModel.instance.getHuoDongType(this.festivalType),i=this.getAwardRP(2)||this.getAwardRP(3),n=GlobalData.serverTime<=this.endTm;f.instance.setRPProperty("hitEngineerAwardRP",t&&e&&i&&n)},s.prototype.setHitEngineerRP=function(){for(var t=g.instance.getFuncIsOpen(469),e=y.festival.FestivalModel.instance.getHuoDongType(this.festivalType),i=m.instance.getCfgByFestivalType(this.festivalType),n=i[1],s=n.length,o=!1,a=0;a<s;a++)if(0<y.bag.BagModel.instance.getItemCountById(n[a])){o=!0;break}var r=this.data[1]>=i[3],l=this.data[4][0],h=this.data[3],c=_.instance.getPlannerIdByCfg(l,this.festivalType,h),p=(this.data[5].length,c&&c[3],this.getHasReward()),u=o||r||p,d=GlobalData.serverTime<=this.endTm;f.instance.setRPProperty("hitEngineerRP",t&&e&&u&&d)},s.prototype.getHasReward=function(){if(!this.data)return!1;var t=this.data[5].length,e=s.instance.getHurtCond(),i=0,n=y.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType);return n&&(i=n[2][1]),e&&t<e.length&&this.data[0]>=e[t]&&GlobalData.serverTime<=i},s.prototype.setRP=function(){return this.rankData&&this.data?(this.setHitEngineerAwardRP(),void this.setHitEngineerRP()):(f.instance.setRPProperty("hitEngineerRP",!1),void f.instance.setRPProperty("hitEngineerAwardRP",!1))},s.prototype.updataInfo=function(t){t&&(this.data=t,this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW",!0))},s.prototype.UpdateStageReward=function(t){t&&this.data&&(this.data[5]=t[0],this.data[0]=t[1],this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW"))},s.prototype.updateHuntingPerInfo=function(t){if(t&&this.data){var e=t[0]-this.data[0];0<e&&GlobalData.dispatcher.event("UPDATA_PLANNER_HP_VIEW",e),this.data[0]=t[0],this.data[1]=t[1],this.data[2]=t[2],this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW")}},s.prototype.UpdatePlannerKillCount=function(t){t&&this.data&&(this.data[7]=t[0],this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW"))},s.prototype.updataDrawStageReward=function(t){if(t&&this.data){var e=t[1];if(e){for(var i=[],n=0;n<e.length;n++)i.push([e[n][0],e[n][1],0,null]);WindowManager.instance.open(415,i)}this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW")}},s.prototype.updataDrawHuntingPerReward=function(t){t&&this.data&&(this.data[6]=t[1],this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW"))},s.prototype.updateHuntingPlanner=function(t){t&&this.data&&(this.boolPartUpdata(t)||(this.data[4]=t[0],this.true_nextAppearTm=t[1],0===t[1]?this.nextAppearTm=GlobalData.serverTime:this.nextAppearTm=t[1],GlobalData.dispatcher.event("UPDATA_PLANNER_TIMER_VIEW"),this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW",!0)))},s.prototype.GetHuntingLogReply=function(t){t&&(this.huntingLog=t[0],GlobalData.dispatcher.event("UPDATA_PLANNER_LOG_VIEW"))},s.prototype.updataHuntingRank=function(t){t&&(this.rankData=t,this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_RANK_VIEW"))},s.prototype.getState=function(t,e){for(var i=this.data[6],n=t[0],s=i.length,o=0;o<s;o++)if(n===i[o])return 2;var a=0;return 2===e?a=this.data[2]:3===e&&(a=this.data[7]),a>=t[3][0]?1:0},s.prototype.getRankByData=function(t){for(var e=this.rankData[0],i=0;i<e.length;i++)if(e[i][6]===t)return e[i];return null},s.prototype.getAwardRP=function(t){if(this.data){for(var e=this.data[3],i=_.instance.getCfgArrByfestivalType(this.festivalType,t,e),n=0;n<i.length;n++)if(1===this.getState(i[n],t))return!0;return!1}},s.prototype.statelistSort=function(t,e){for(var i=[],n=[],s=[],o=t.length,a=0;a<o;a++)switch(this.getState(t[a],e)){case 0:n.push(t[a]);break;case 1:i.push(t[a]);break;case 2:s.push(t[a])}function r(t,e){return t[3][0]-e[3][0]}return i.sort(r),n.sort(r),s.sort(r),i.concat(n).concat(s)},s.prototype.BuyHuntingItemReply=function(){this.setRP(),GlobalData.dispatcher.event("UPDATA_PLANNER_VIEW")},s.prototype.openAlert=function(t,e){y.festival.FestivalModel.instance.getHuoDongType(e)?y.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType)[2][1]<GlobalData.serverTime?y.notice.SystemNoticeManager.instance.addNotice("本轮活动已结束",!0):0<t&&e===this.festivalType&&WindowManager.instance.open(736):y.notice.SystemNoticeManager.instance.addNotice("功能未开启",!1)},s.prototype.boolPartUpdata=function(t){var e=!1,i=!1;if(0!==t[1])return!1;var n=this.data[4],s=t[0];return n[0]===s[0]&&(e=!0),n[2]&&n[2][0]!==s[0]||(i=!0),this.data[4]=t[0],e&&GlobalData.dispatcher.event("UPDATA_PLANNER_ONLY_HP"),i&&GlobalData.dispatcher.event("UPDATA_PLANNER_ONLY_ANNIHILATOR"),e||i},s.prototype.getUseCnt=function(t,e){var i=this.autoDate;if(e&&0===i)return 1;var n=1;return 1===i?n=1:2===i?n=10:3===i?n=50:4===i?n=100:0===i&&(n=y.bag.BagModel.instance.getItemCountById(t)),n},e=s,t.HitEngineerModel=e}(modules=modules||{}),function(y){var g,f,t,_,e;function i(){return f.call(this)||this}g=y.hit_engineer||(y.hit_engineer={}),t=ui.HitEngineerStageAwardItemUI,_=y.config.HuntingRewardCfg,f=t,__extends(i,f),i.prototype.initialize=function(){f.prototype.initialize.call(this),this._taskBase=[this.rewardBase1,this.rewardBase2,this.rewardBase3,this.rewardBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",26);for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;this.mscArr="装饰进度",this.festivalType=g.HitEngineerModel.instance.festivalType,this.model=g.HitEngineerModel.instance,this.ctrl=g.HitEngineerCtrl.instance},i.prototype.setData=function(t){f.prototype.setData.call(this,t);var e=this.model.data;if(e){var i=e[4][0],n=e[3],s=_.instance.getPlannerIdByCfg(i,this.festivalType,n),o=e[5].length,a=g.HitEngineerModel.instance.getHurtCond(),r=s[4],l=a[t],h=[r[2*t],r[2*t+1]],c=0,p=y.config.FestivalOpenCfg.instance.getCfgByType(this.festivalType);p&&(c=p[2][1]);var u=e[0];this.HasBroughtImg.visible=t<o&&c>GlobalData.serverTime,this.overImg.visible=c<=GlobalData.serverTime;for(var d=0;d<h.length;d+=2)this._taskBase[Math.floor(d/2)].dataSource=[h[d],h[d+1],0,null],this._taskBase[d].visible=!0;this.StatementHTML.innerHTML=t<o?this.mscArr+"达到<span style='color:#168a17'>"+l+"</span>可领取(<span style='color:#168a17'>"+u+"/"+l+"</span>)":this.mscArr+"达到<span style='color:#168a17'>"+l+"</span>可领取(<span style='color:#ff3e3e'>"+u+"/"+l+"</span>)"}},e=i,g.HitEngineerStageAwardItem=e}(modules=modules||{}),function(k){!function(n){var t,e=k.core.BaseDialogEx,i=k.common.AvatarClip,s=k.common.SimpleList,o=k.common.BtnGroup,a=ui.ImmortalContestRankItemUI,r=k.config.BlendCfg,l=k.config.ImmortalContestCfg,h=ui.ImmortalContestRankItem1UI,c=k.common.CustomClip,p=k.config.ExteriorCfg,u=(t=e,__extends(d,t),d.prototype.destroy=function(){this._player1=this.destroyElement(this._player1),this._player2=this.destroyElement(this._player2),this._player3=this.destroyElement(this._player3),this._list=this.destroyElement(this._list),this._tab=this.destroyElement(this._tab),this._btnClip=this.destroyElement(this._btnClip),this.v.observationItem1=this.destroyElement(this.v.observationItem1),this.v.observationItem2=this.destroyElement(this.v.observationItem2),this.v.observationItem3=this.destroyElement(this.v.observationItem3),t.prototype.destroy.call(this)},d.prototype.initialize=function(){t.prototype.initialize.call(this),this._player1=i.normalCreate(),this._player2=i.normalCreate(),this._player3=i.normalCreate(),this.v.sp_1.addChild(this._player1),this.v.sp_2.addChild(this._player2),this.v.sp_3.addChild(this._player3),this._player1.anchorX=.5,this._player1.anchorY=.5,this._player1.avatarRotationY=180,this._player1.scale(1.3,1.3),this._player2.anchorX=.5,this._player2.anchorY=.5,this._player2.avatarRotationY=180,this._player2.scale(1.15,1.15),this._player3.anchorX=.5,this._player3.anchorY=.5,this._player3.avatarRotationY=180,this._player3.scale(1,1),this._list=s.create(g,571,100),this._list.size(this.v.listBox.width,this.v.listBox.height),this.v.listBox.addChild(this._list),this._tab=new o,this._tab.setBtns(this.v.tab_0,this.v.tab_1),this._btnClip=c.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this.v.rwdBtn,-5,-8,.8),this.v.worshipTxt.visible=this.v.worshipCount.visible=this.v.worship_rp.visible=!1},d.prototype.updateList=function(){if(!n.ImmortalContestModel.instance.mainRank)return this._player1.visible=this._player2.visible=this._player3.visible=!1,void(this._list.datas=new Array(29));var t,e=n.ImmortalContestModel.instance.mainRank[this._tab.selectedIndex]||[],i=n.ImmortalContestModel.instance.actorShow[this._tab.selectedIndex]||[];for(i&&i[0]?(this.v.nullBox1.visible=this.v.player_null1.visible=!1,this.v.nameBox1.visible=this._player1.visible=!0,this._player1.reset(i[0][1],i[0][2]),(t=p.instance.getCfgById(i[0][1]))&&(this._player1.avatarScale=t[10]/1.6),this.v.nameTxt1.text=e[0][1],this.v.fightTxt1.text="战力:"+CommonUtil.bigNumToString(e[0][4]||0)):(this.v.nullBox1.visible=this.v.player_null1.visible=!0,this.v.nameBox1.visible=this._player1.visible=!1),i&&i[1]?(this.v.nullBox2.visible=this.v.player_null2.visible=!1,this.v.nameBox2.visible=this._player2.visible=!0,this._player2.reset(i[1][1],i[1][2]),(t=p.instance.getCfgById(i[1][1]))&&(this._player2.avatarScale=t[10]/1.6),this.v.nameTxt2.text=e[1][1],this.v.fightTxt2.text="战力:"+CommonUtil.bigNumToString(e[1][4]||0)):(this.v.nullBox2.visible=this.v.player_null2.visible=!0,this.v.nameBox2.visible=this._player2.visible=!1),i&&i[2]?(this.v.nullBox3.visible=this.v.player_null3.visible=!1,this.v.nameBox3.visible=this._player3.visible=!0,this._player3.reset(i[2][1],i[2][2]),(t=p.instance.getCfgById(i[2][1]))&&(this._player3.avatarScale=t[10]/1.6),this.v.nameTxt3.text=e[2][1],this.v.fightTxt3.text="战力:"+CommonUtil.bigNumToString(e[2][4]||0)):(this.v.nullBox3.visible=this.v.player_null3.visible=!0,this.v.nameBox3.visible=this._player3.visible=!1),this.v.observationItem1.data=[[this._player1,0]],this.v.observationItem2.data=[[this._player2,0]],this.v.observationItem3.data=[[this._player3,0]],e=3<e.length?e.slice(3):[];e.length<29;)e.push(null);this._list.datas=e,this.updateWorship(),this.updateReward()},d.prototype.updateWorship=function(){var t=r.instance.getCfgById(97108)[1][0],e=n.ImmortalContestModel.instance.worshipTimes||0;this.v.worshipCount.text=t-e+"/"+t,this.v.worshipCount.color=e<t?"#50ff28":"#ff3e3e",this.v.worshipBtn.gray=t<=e,this.v.worship_rp.visible=e<t},d.prototype.updateReward=function(){for(var t=r.instance.getCfgById(97115)[1],e=[],i=0;i<t.length;i+=2)e.push([t[i],t[i+1],0,null]);this.v.rwdList.dataSource=e,n.ImmortalContestModel.instance.isDraw?(this.v.rwdBtn.visible=!1,this.v.rwd_got.visible=!0,c.thisStop(this._btnClip),this.v.rwd_rp.visible=!1):(this.v.rwdBtn.visible=!0,this.v.rwd_got.visible=!1,n.ImmortalContestModel.instance.canDraw?(c.thisPlay(this._btnClip),this.v.rwd_rp.visible=!0):(c.thisStop(this._btnClip),this.v.rwd_rp.visible=!1)),this.v.rwdBtn.gray=!n.ImmortalContestModel.instance.canDraw},d.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoEvt(this._tab,"change",this,this.updateList).onAutoGlobalEvt("IMMORTAL_CONTEST_INFO_UPDATE",this,this.updateInfo).onAutoClick(this.v.rwdBtn,this,function(){n.ImmortalContestModel.instance.canDraw?n.ImmortalContestCtrl.instance.XianDaoGetReward():CommonUtil.noticeError(51208)}).onAutoClick(this.v.worshipBtn,this,function(){var t=r.instance.getCfgById(97108)[1][0];(n.ImmortalContestModel.instance.worshipTimes||0)<t?n.ImmortalContestCtrl.instance.XianDaoWorship():CommonUtil.noticeError(51206)})},d.prototype.offEvt=function(){t.prototype.offEvt.call(this),c.thisStop(this._btnClip)},d.prototype.onOpened=function(){t.prototype.onOpened.call(this),this._tab.selectedIndex=0,this.updateList(),this.reqInfo()},d.prototype.reqInfo=function(){n.ImmortalContestCtrl.instance.GetXianDaoCopy()},d.prototype.updateInfo=function(){this.updateWorship(),this.updateReward()},d);function d(){return null!==t&&t.apply(this,arguments)||this}n.ImmortalContestWorship=u;var y,g=(y=h,__extends(f,y),f.prototype.initialize=function(){y.prototype.initialize.call(this),this.head.visible=this.vip.visible=!1,this.valueTxt.text=""},f.prototype.setData=function(t){y.prototype.setData.call(this,t);var e=t,i=this.index+4;1===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_7.png"):2===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_8.png"):3===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankClip.visible=!0,this.rankImg.skin="common/dt_tongyong_15.png",this.rankClip.value=""+i),e?(this.nameTxt.text=e[1],this.valueTxt.text="战力:"+CommonUtil.bigNumToString(e[4]||0),this.nullTxt.visible=!1,this.head.visible=this.vip.visible=!0,this.head.setInfo(e[6],e[5],e[7]),this.vip.setSVIPandVIP(1,e[8],e[9])):(this.head.visible=this.vip.visible=!1,this.nameTxt.text="",this.valueTxt.text="",this.nullTxt.visible=!0)},f);function f(){return null!==y&&y.apply(this,arguments)||this}n.ImmortalRankItem=g;var _,m=(_=u,__extends(v,_),v.prototype.initialize=function(){_.prototype.initialize.call(this),this.v.worshipBtn.visible=this.v.worshipTxt.visible=this.v.worshipCount.visible=!1,this.v.rwdBox.visible=!1,this.height=this.v.height=this.v.bg.height=1019,this.v.tip_txt.y=1013},v.prototype.updateReward=function(){},v.prototype.updateWorship=function(){},v.prototype.reqInfo=function(){},v.prototype.updateInfo=function(){},v);function v(){return null!==_&&_.apply(this,arguments)||this}n.ImmortalContestRank=m;var b,T=(b=e,__extends(I,b),I.prototype.initialize=function(){b.prototype.initialize.call(this),this._list=s.create(x,571,100),this._list.size(this.v.listBox.width,this.v.listBox.height),this.v.listBox.addChild(this._list),CommonUtil.setHTMLPro(this.v.tipTxt,"#1f304d","SimHei",24,"center"),this.v.tipTxt.innerHTML="前32名玩家晋级天榜，后32名玩家晋级地榜"},I.prototype.onOpened=function(){b.prototype.onOpened.call(this),this.updateView(),n.ImmortalContestCtrl.instance.GetXianDaoRank()},I.prototype.onEvt=function(){b.prototype.onEvt.call(this),this.onAutoGlobalEvt("IMMORTAL_CONTEST_PRE_RANK_UPDATE",this,this.updateView)},I.prototype.updateView=function(){for(var t=n.ImmortalContestModel.instance.preRank||[];t.length<64;)t.push(null);this._list.datas=t,this.v.myRankNumText.text="我的排名:"+(n.ImmortalContestModel.instance.myPreRank?n.ImmortalContestModel.instance.myPreRank.toString():"未上榜"),this.v.myIntegralText.text="我的积分:"+(n.ImmortalContestModel.instance.myPreValue||0).toString()},I);function I(){return null!==b&&b.apply(this,arguments)||this}n.ImmortalContestPreRank=T;var C,x=(C=a,__extends(B,C),B.prototype.initialize=function(){C.prototype.initialize.call(this),this.head.visible=this.vip.visible=!1},B.prototype.setData=function(t){C.prototype.setData.call(this,t);var e=t,i=this.index+1;1===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_7.png"):2===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_8.png"):3===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankClip.visible=!0,this.rankImg.skin="common/dt_tongyong_15.png",this.rankClip.value=""+i),e?(this.nameTxt.text=e[1],this.valueTxt.text=e[2].toString()):(this.nameTxt.text="虚位以待...",this.valueTxt.text="")},B);function B(){return null!==C&&C.apply(this,arguments)||this}n.ImmortalPreRankItem=x;var S,M=(S=e,__extends(w,S),w.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._tab=this.destroyElement(this._tab),S.prototype.destroy.call(this)},w.prototype.initialize=function(){S.prototype.initialize.call(this),this._list=s.create(A,571,100),this._list.size(this.v.listBox.width,this.v.listBox.height),this.v.listBox.addChild(this._list),this._tab=new o,this._tab.setBtns(this.v.tab_0,this.v.tab_1)},w.prototype.onEvt=function(){S.prototype.onEvt.call(this),this.onAutoEvt(this._tab,"change",this,this.updateList)},w.prototype.onOpened=function(){S.prototype.onOpened.call(this),this._tab.selectedIndex=0,this.updateList()},w.prototype.updateList=function(){this._list.datas=l.instance.getRewardsByRankType(this._tab.selectedIndex+1)},w);function w(){return null!==S&&S.apply(this,arguments)||this}n.ImmortalContestReward=M;var P,A=(P=ui.ImmortalContestRewardItemUI,__extends(R,P),R.prototype.setData=function(t){P.prototype.setData.call(this,t);var e=t[0];e[0]===e[1]&&1===e[0]?(this.rankClip.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png",this.rankTxt.text=""):e[0]===e[1]&&2===e[0]?(this.rankClip.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png",this.rankTxt.text=""):e[0]===e[1]&&3===e[0]?(this.rankClip.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png",this.rankTxt.text=""):e[0]===e[1]?(this.rankClip.visible=this.rankImg.visible=!0,this.rankImg.skin="common/dt_tongyong_15.png",this.rankClip.value=""+e[0],this.rankTxt.text=""):(this.rankClip.visible=this.rankImg.visible=!1,this.rankTxt.text=e[0]+"~"+e[1]);for(var i=t[2],n=[],s=0;s<i.length;s+=2)n.push([i[s],i[s+1],0,null]);this.list.dataSource=n},R);function R(){return null!==P&&P.apply(this,arguments)||this}n.ImmortalContestRewardItem=A}(k.immortalContest||(k.immortalContest={}))}(modules=modules||{}),function(h){!function(I){var e,C=h.common.AttrUtil,l=h.notice.SystemNoticeManager,x=h.config.ImmortalContestCfg,t=h.common.SimpleList,i=h.bag.BaseItem,n=(e=ui.ImmortalContestItemUI,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.lBtn,this,this.btnHandler,[0]),this.onAutoClick(this.rBtn,this,this.btnHandler,[1])},s.prototype.setData=function(t){t=t&&I.ImmortalContestModel.instance.getRecord(I.ImmortalContestModel.instance.selectedTab,t[0],t[4]),e.prototype.setData.call(this,t),t?(this.lNullTxt.visible=this.rNullTxt.visible=!1,this.updateAll()):(this.lNullTxt.visible=this.rNullTxt.visible=!0,this.lFlagImg.visible=this.rFlagImg.visible=this.lMaskImg.visible=this.rMaskImg.visible=this.lBox.visible=this.rBox.visible=!1)},s.prototype.updateAll=function(){var t=this.data?this.data[1]:null,e=this.data?this.data[2]:null;t&&!e&&(t[7]=!0),e&&!t&&(e[7]=!0),this.show(this.lBox,this.lHintTxt,this.lHeadIcon,this.lNameTxt,this.lNumTxt,this.lPerTxt,this.lCountTxt,this.lMaskImg,this.lFlagImg,this.lBtn,this.vipShowItem,this.lNullTxt,t,this.data?this.data[3]:0),this.show(this.rBox,this.rHintTxt,this.rHeadIcon,this.rNameTxt,this.rNumTxt,this.rPerTxt,this.rCountTxt,this.rMaskImg,this.rFlagImg,this.rBtn,this.vipShowItem1,this.rNullTxt,e,this.data?3-this.data[3]:0)},s.prototype.show=function(t,e,i,n,s,o,a,r,l,h,c,p,u,d){if(!u)return r.visible=l.visible=t.visible=!1,void(p.visible=!0);t.visible=!0,p.visible=!1;var y=u[1],g=u[3],f=u[4];i.setInfo(g,y,f);var _=u[5];c.setSVIPandVIP(1,_);var m=u[2];if(n.text=m,o.text="赔率:"+C.formatFloatNum(u[8],!0),a.text="支持数:"+u[9],u[7])e.visible=o.visible=a.visible=l.visible=r.visible=h.visible=!1,1===d?(l.visible=!0,l.skin="immortal_contest/txt_dfdf_sl.png"):e.visible=!0,s.text="0";else{e.visible=!1,o.visible=a.visible=!0;var v=I.ImmortalContestModel.instance.getGuessRecord(I.ImmortalContestModel.instance.selectedTab+1,this.data[0],this.data[4]),b=x.instance.getCfgByRound(this.data[0]),T=b?b[4]:0;s.text=((v&&v[s===this.lNumTxt?2:3]||0)*T).toString(),1===d?(r.visible=h.visible=!1,l.visible=!0,l.skin="immortal_contest/txt_dfdf_sl.png"):2===d?(h.visible=!1,r.visible=l.visible=!0,l.skin="immortal_contest/txt_dfdf_fu.png"):(h.visible=!0,r.visible=l.visible=!1)}},s.prototype.btnHandler=function(t){if(this.data&&this.data[2]&&!(0===t?this.lBtn:this.rBtn).gray){var e=I.ImmortalContestModel.instance.guessTimes,i=x.instance.getCfgByRound(this.data[0]);if(i[3]<=e)l.instance.addNotice("支持次数已达上限",!0);else{var n=I.ImmortalContestModel.instance.getTimeByRound(this.data[0]-1),s=I.ImmortalContestModel.instance.getTimeByRound(this.data[0]),o=GlobalData.serverTime;if(o<n||s<o)l.instance.addNotice("不在本轮竞猜时间内",!0);else{var a=i[4];if(CommonUtil.getPropCountById(90140001)<a)CommonUtil.goldNotEnoughAlert();else{var r=this.data[0===t?1:2][0];I.ImmortalContestCtrl.instance.XianDaoGuess(r,this.data[4],I.ImmortalContestModel.instance.selectedTab+1)}}}}},s);function s(){return null!==e&&e.apply(this,arguments)||this}I.ImmortalContestItem=n;var o,a=(o=ui.PeakDuelRankItemUI,__extends(r,o),r.prototype.initialize=function(){o.prototype.initialize.call(this),this.item_1.visible=this.item_2.visible=this.item_3.visible=!1,this._list=t.create(i,100,100,2),this._list.pos(this.item_1.x,this.item_1.y,!0),this._list.size(300,100),this.addChild(this._list)},r.prototype.setData=function(t){var e=this.index+2;2===e?(this.rankImg.skin="common/zs_tongyong_8.png",this.rankMsz.visible=!1):3===e?(this.rankImg.skin="common/zs_tongyong_9.png",this.rankMsz.visible=!1):(this.rankImg.skin="common/dt_tongyong_15.png",this.rankMsz.visible=!0,this.rankMsz.value=""+e);var i=x.instance.getRewardByTypeAndRank(I.ImmortalContestModel.instance.selectedTab+1,e),n=CommonUtil.formatItemData(i[2]);this._list.datas=n,t?(this.showState=!0,this.nameTxt.text=t[1],this.rankTxt.text="战力:"+CommonUtil.bigNumToString(t[4])):(this.showState=!1,this.noTxt.text="虚位以待....")},Object.defineProperty(r.prototype,"showState",{set:function(t){this.noTxt.visible=!t,this.nameTxt.visible=this.rankTxt.visible=t},enumerable:!0,configurable:!0}),r.prototype.destroy=function(){this._list=this.destroyElement(this._list),o.prototype.destroy.call(this)},r);function r(){return null!==o&&o.apply(this,arguments)||this}I.ImmortalContestLastItem=a}(h.immortalContest||(h.immortalContest={}))}(modules=modules||{}),function(i){var t,d,e,n,s;function o(){this.isFirstOpen=!0}t=i.immortalContest||(i.immortalContest={}),d=i.config.ImmortalContestCfg,e=i.config.BlendCfg,n=i.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.getCountByRound=function(t){return[16,8,4,2,1][t-1]},o.prototype.getRecordsByRound=function(t,e){for(var i=this.records&&this.records[t]||[],n=this.getCountByRound(e),s=new Array(n),o=0;o<i.length;++o)i[o][0]===e&&(s[i[o][4]-1]=i[o]);return s},o.prototype.getRecord=function(t,e,i){for(var n=this.records&&this.records[t]||[],s=0;s<n.length;++s)if(n[s][0]===e&&n[s][4]===i)return n[s];return null},Object.defineProperty(o.prototype,"eventTime",{get:function(){for(var t,e=GlobalData.serverTime,i=new Date(e),n=i.getUTCDay()||7,s=d.instance.openDay,o=Number.POSITIVE_INFINITY,a=0;a<s.length;++a){var r=s[a],l=d.instance.openTime[0]-8;l<0&&(l+=24,--r),24<=l&&(l-=24,r+=1),r<=0&&(r+=7),7<r&&(r-=7);var h=new Date;h.setTime(i.getTime()+24*(r-n)*60*60*1e3),h.setUTCHours(l,d.instance.openTime[1],0,0);var c=s[a],p=d.instance.closeTime[0]-8;p<0&&(p+=24,--c),24<=p&&(p-=24,c+=1),c<=0&&(c+=7),7<c&&(c-=7),c<r&&(c+=7);var u=new Date;if(u.setTime(i.getTime()+24*(c-n)*60*60*1e3),u.setUTCHours(p,d.instance.closeTime[1],0,0),h.getTime()<=e&&u.getTime()>=e)return[h.getTime(),u.getTime()];e<h.getTime()&&o>h.getTime()-e?(o=h.getTime()-e,t=[h.getTime(),u.getTime()]):e<h.getTime()+6048e5&&o>h.getTime()+6048e5-e&&(o=h.getTime()+6048e5-e,t=[h.getTime()+6048e5,u.getTime()+6048e5])}return o<Number.POSITIVE_INFINITY?t:[0,0]},enumerable:!0,configurable:!0}),o.prototype.getTimeByRound=function(t){return this.eventTime[0]+d.instance.preBattleTime+d.instance.mainBattleTime/5*t},o.prototype.getWorshipIsOpen=function(){return!(GlobalData.serverTime>=this.preTime)&&!!this.mainRank&&this.mainRank[0]&&0<this.mainRank[0].length},Object.defineProperty(o.prototype,"preTime",{get:function(){var t=this.eventTime[0],e=new Date(t);return e.setUTCHours(-3,0,0,0),e.getTime()},enumerable:!0,configurable:!0}),o.prototype.getGuessRecord=function(t,e,i){var n=this.guessRecord[t-1]||[];for(var s in n)if(n[s][0]===e&&n[s][1]===i)return n[s];return null},o.prototype.checkRP=function(){if(1===this.matchStage&&this.isEnroll){var t=i.config.BlendCfg.instance.getCfgById(97100)[1][0];if(this.matchTimes<t)return void n.instance.setRPProperty("immortalContest",!0)}if(2===this.matchStage){var e=d.instance.getCfgByRound(this.curRound);if(t=e?e[3]:0,this.guessTimes<t&&this.hasAvailableBattle)return void n.instance.setRPProperty("immortalContest",!0)}n.instance.setRPProperty("immortalContest",!1)},o.prototype.checkWorshipRP=function(){var t=e.instance.getCfgById(97108)[1][0];n.instance.setRPProperty("immortalContestWorship",this.worshipTimes<t||!this.isDraw&&this.canDraw)},o.prototype.getPlayerById=function(t){for(var e in this.records)for(var i in this.records[e]){if(this.records[e][i][1]&&this.records[e][i][1][0]===t)return this.records[e][i][1];if(this.records[e][i][2]&&this.records[e][i][2][0]===t)return this.records[e][i][2]}return null},Object.defineProperty(o.prototype,"hasAvailableBattle",{get:function(){for(var t in this.records)for(var e in this.records[t])if(this.records[t][e][0]===this.curRound&&this.records[t][e][1]&&this.records[t][e][2])return!0;return!1},enumerable:!0,configurable:!0}),o.prototype.getImmortalContestIsOpen=function(){return PlayerModel.instance.cDay>=e.instance.getCfgById(97117)[1][0]},s=o,t.ImmortalContestModel=s}(modules=modules||{}),function(r){var E,l,t,h,c,p,D,e,i,u,d,y,n;function s(){return null!==l&&l.apply(this,arguments)||this}E=r.immortalContest||(r.immortalContest={}),t=r.core.BaseViewEx,h=r.common.BtnGroup,c=r.config.BlendCfg,p=r.common.SimpleList,D=r.config.ImmortalContestCfg,e=r.notice.SystemNoticeManager,i=r.mission.MissionModel,u=r.common.AvatarClip,d=r.bag.BaseItem,y=r.common.CustomClip,l=t,__extends(s,l),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._resultClip=this.destroyElement(this._resultClip),this._resultAvatar=this.destroyElement(this._resultAvatar),this._resultFirst=this.destroyElement(this._resultFirst),this._resultList=this.destroyElement(this._resultList),this._recordList=this.destroyElement(this._recordList),this._roundItenList=this.destroyElement(this._roundItenList),this._showRwdList=this.destroyElement(this._showRwdList),this._mainTab=this.destroyElement(this._mainTab),this._mainTab=this.destroyElement(this._guessTab),this._resultTab=this.destroyElement(this._resultTab),this.v_guess=this.destroyElement(this.v_guess),this.v_main=this.destroyElement(this.v_main),this.v_result.observationItem=this.destroyElement(this.v_result.observationItem),this.v_result=this.destroyElement(this.v_result),l.prototype.destroy.call(this,t)},s.prototype.initialize=function(){l.prototype.initialize.call(this),this.centerX=this.centerY=0,this.v_guess=new ui.ImmortalContestView1UI,this.v_main=new ui.ImmortalContestView2UI,this.v_result=new ui.ImmortalContestView3UI,this.v&&this.v.parent&&this.v.removeSelf(),this._mainTab=new h,this._mainTab.setBtns(this.v_main.tab_0,this.v_main.tab_1),this._mainTab.selectedIndex=0,this._guessTab=new h,this._guessTab.setBtns(this.v_guess.tab_0,this.v_guess.tab_1),this._guessTab.selectedIndex=0,this._resultTab=new h,this._resultTab.setBtns(this.v_result.tab_1,this.v_result.tab_2),this._resultTab.selectedIndex=0;for(var t=c.instance.getCfgById(97116)[1],e=[this.v.item1,this.v.item2,this.v.item3,this.v.item4],i=0,n=0;n<t.length;n+=2)e[i].dataSource=[t[n],t[n+1],0,null],i++;CommonUtil.setHTMLPro(this.v.timeHtml,"#3d5981","SimHei",24,"center"),this._roundItenList=[this.v_guess.round1,this.v_guess.round2,this.v_guess.round3,this.v_guess.round4,this.v_guess.round5],this.v_guess.round1.txt.text="十六强赛",this.v_guess.round2.txt.text="八强赛",this.v_guess.round3.txt.text="四强赛",this.v_guess.round4.txt.text="半决赛",this.v_guess.round5.txt.text="总决赛",this._recordList=p.create(E.ImmortalContestItem,644,210,1,1,0,2),this._recordList.size(this.v_guess.listBox.width,this.v_guess.listBox.height),this.v_guess.listBox.addChild(this._recordList),this._resultFirst=p.create(d,100,100,2),this._resultFirst.size(300,100),this._resultFirst.pos(this.v_result.item_1.x,this.v_result.item_1.y,!0),this.v_result.addChild(this._resultFirst),this._resultList=p.create(E.ImmortalContestLastItem,635,141,1,1,.5),this._resultList.size(this.v_result.listBox.width,this.v_result.listBox.height),this.v_result.listBox.addChild(this._resultList),this._resultAvatar=u.normalCreate(),this.v_result.sp.addChild(this._resultAvatar),this._resultAvatar.anchorX=.5,this._resultAvatar.anchorY=.5,this._resultAvatar.mouseEnabled=!1,this._resultAvatar.avatarRotationY=180,this.v_result.item_1.visible=this.v_result.item_2.visible=this.v_result.item_3.visible=this.v_result.noBox.visible=!1;var s=new Array,o=new y;for(o.pos(this.v_result.item_0.x-75,this.v_result.item_0.y-75,!0),o.skin="assets/effect/item_effect3.atlas",n=0;n<16;n++){var a="item_effect3/"+n+".png";s.push(a)}o.frameUrls=s,o.durationFrame=6,o.name="clip",y.thisStop(o),this.v_result.addChild(o),this._resultClip=o},s.prototype.updatePeak=function(t){2361!==t&&2281!==t&&null!=t||(r.peakDuel.PeakDuelCtrl.instance.isOpen?(this.v.btn_tt.skin="immortal_contest/btn_dfdf_01.png",r.redPoint.RedPointCtrl.instance.retireRedPoint(this.v.rp_tt),this.v.rp_tt.visible=!1,this.v_guess.btn_tt.skin="immortal_contest/btn_dfdf_01.png",r.redPoint.RedPointCtrl.instance.retireRedPoint(this.v_guess.rp_tt),this.v_guess.rp_tt.visible=!1,this.v_result.btnGroup_2.skin="immortal_contest/btn_dfdf_01.png",r.redPoint.RedPointCtrl.instance.retireRedPoint(this.v_result.rp1),this.v_result.rp1.visible=!1):(this.v.btn_tt.skin="immortal_contest/btn_ttdf_ttdfbtn.png",this.regAutoRP(this.v.rp_tt,["tianTiRP"]),this.v_guess.btn_tt.skin="immortal_contest/btn_ttdf_ttdfbtn.png",this.regAutoRP(this.v_guess.rp_tt,["tianTiRP"]),this.v_result.btnGroup_2.skin="immortal_contest/btn_ttdf_ttdfbtn.png",this.regAutoRP(this.v_result.rp1,["tianTiRP"])))},s.prototype.ladderHandler=function(){r.ladder.LadderCtrl.instance.canOpenPanel()},s.prototype.arenaHandler=function(){WindowManager.instance.open(289)},s.prototype.helpHandler=function(){CommonUtil.alertHelp(19048)},s.prototype.onEvt=function(){var t=this;this._mainTab.selectedIndex=this._guessTab.selectedIndex=this._resultTab.selectedIndex=E.ImmortalContestModel.instance.selectedTab=0,l.prototype.onEvt.call(this),this.onAutoClick(this.v_guess.closeBtn,this,this.close).onAutoClick(this.v_main.closeBtn,this,this.close).onAutoClick(this.v_result.closeBtn,this,this.close).onAutoClick(this.v.btn_tt,this,this.ladderHandler).onAutoClick(this.v_guess.btn_tt,this,this.ladderHandler).onAutoClick(this.v_result.btnGroup_2,this,this.ladderHandler).onAutoClick(this.v.btn_jj,this,this.arenaHandler).onAutoClick(this.v_guess.btn_jj,this,this.arenaHandler).onAutoClick(this.v_result.btnGroup_1,this,this.arenaHandler).regAutoRP(this.v.rp_jj,["arenaRP"]).regAutoRP(this.v_guess.rp_jj,["arenaRP"]).regAutoRP(this.v_result.rpImg,["arenaRP"]).regAutoRP(this.v.rp_xd,["immortalContest"]).regAutoRP(this.v_guess.rp_xd,["immortalContest"]).regAutoRP(this.v_result.xdRp,["immortalContest"]).onAutoGlobalEvt("BROADCAST_SCENE_OPEN_DAY_UPDATE",this,this.updatePeak).onAutoGlobalEvt("IMMORTAL_CONTEST_INFO_UPDATE",this,this.updateView).onAutoGlobalEvt("IMMORTAL_CONTEST_MAIN_RANK_UPDATE",this,this.updateView).onAutoEvt(this._mainTab,"change",this,function(){t.v_main.parent&&(E.ImmortalContestModel.instance.selectedTab=t._guessTab.selectedIndex=t._resultTab.selectedIndex=t._mainTab.selectedIndex,t.updateMainPanel())}).onAutoEvt(this._guessTab,"change",this,function(){t.v_guess.parent&&(E.ImmortalContestModel.instance.selectedTab=t._mainTab.selectedIndex=t._resultTab.selectedIndex=t._guessTab.selectedIndex,t.updateGuessPanel())}).onAutoEvt(this._resultTab,"change",this,function(){t.v_result.parent&&(E.ImmortalContestModel.instance.selectedTab=t._mainTab.selectedIndex=t._guessTab.selectedIndex=t._resultTab.selectedIndex,t.updateResultPanel())}).onAutoClick(this.v_main.goBtn,this,function(){E.ImmortalContestModel.instance.selectedRound=E.ImmortalContestModel.instance.curRound||1,t.tempTab=t.tempRound=-1,t.showGuessPanel(),t.updateGuessPanel()}).onAutoClick(this.v_guess.goBtn,this,function(){t.showMainPanel(),t.updateMainPanel()}).onAutoClick(this.v.helpBtn,this,this.helpHandler).onAutoClick(this.v_guess.helpBtn,this,this.helpHandler).onAutoClick(this.v_result.helpBtn,this,this.helpHandler).onAutoClick(this.v.goBtn,this,function(){if(1===E.ImmortalContestModel.instance.matchStage){var t=r.config.BlendCfg.instance.getCfgById(97100)[1][0];E.ImmortalContestModel.instance.matchTimes<t?E.ImmortalContestModel.instance.isEnroll?r.common_group.CommonGroupUtil.notTeamCopyIsTeaming()||(i.instance.auto&&(i.instance.auto=!1),r.teamBattle.TeamBattleCtrl.instance.reqBeginMatch(3801)):e.instance.addNotice("您没有资格赛的参赛资格",!0):e.instance.addNotice("资格赛最多可匹配"+t+"轮！",!0)}else 0===E.ImmortalContestModel.instance.matchStage?e.instance.addNotice("资格赛尚未开启",!0):5===E.ImmortalContestModel.instance.matchStage?e.instance.addNotice("本跨区满足参与条件的区少于2个，仙道会直接结束",!0):3===E.ImmortalContestModel.instance.matchStage?E.ImmortalContestModel.instance.isEnroll?e.instance.addNotice("有参赛资格的人数≤32名，您已直接进入天榜晋级赛",!0):e.instance.addNotice("您没有资格赛的参赛资格",!0):e.instance.addNotice("资格赛已经结束",!0)}).onAutoClick(this.v_guess.round1,this,this.selectRound,[1]).onAutoClick(this.v_guess.round2,this,this.selectRound,[2]).onAutoClick(this.v_guess.round3,this,this.selectRound,[3]).onAutoClick(this.v_guess.round4,this,this.selectRound,[4]).onAutoClick(this.v_guess.round5,this,this.selectRound,[5]).onAutoClick(this.v_guess.rankBtn,WindowManager.instance,WindowManager.instance.open,[1294]).onAutoClick(this.v.rankBtn,WindowManager.instance,WindowManager.instance.open,[1294]).onAutoClick(this.v_guess.rwdBtn,WindowManager.instance,WindowManager.instance.open,[1293])},s.prototype.selectRound=function(t){2===E.ImmortalContestModel.instance.matchStage&&t>E.ImmortalContestModel.instance.curRound?e.instance.addNotice("本轮晋级赛尚未开启",!0):(E.ImmortalContestModel.instance.selectedRound=t,this.updateGuessPanel())},s.prototype.onOpened=function(){l.prototype.onOpened.call(this),E.ImmortalContestModel.instance.isFirstOpen?(this._isMain=!0,E.ImmortalContestModel.instance.isFirstOpen=!1):this._isMain=!1,E.ImmortalContestCtrl.instance.XianDaoInterfaceState(1),E.ImmortalContestCtrl.instance.GetXianDaoInfo(),E.ImmortalContestCtrl.instance.GetXianDaoPersonal(),E.ImmortalContestCtrl.instance.GetXianDaoCopy(),this.updatePeak(),this.updateView()},s.prototype.close=function(){l.prototype.close.call(this),E.ImmortalContestCtrl.instance.XianDaoInterfaceState(0),Laya.timer.clear(this,this.loopHandler),y.thisStop(this._resultClip)},s.prototype.updateView=function(){Laya.timer.clear(this,this.loopHandler);var t=GlobalData.serverTime,e=E.ImmortalContestModel.instance.getTimeByRound(0),i=E.ImmortalContestModel.instance.getTimeByRound(5);E.ImmortalContestModel.instance.records&&E.ImmortalContestModel.instance.records.length&&(i<=t||t<E.ImmortalContestModel.instance.preTime)&&(0===E.ImmortalContestModel.instance.matchStage||E.ImmortalContestModel.instance.mainRank&&E.ImmortalContestModel.instance.mainRank[0]&&0<E.ImmortalContestModel.instance.mainRank[0].length)?this.showResultPanel():1===E.ImmortalContestModel.instance.matchStage||3===E.ImmortalContestModel.instance.matchStage||0===E.ImmortalContestModel.instance.matchStage&&(!E.ImmortalContestModel.instance.records||0===E.ImmortalContestModel.instance.records.length||t>E.ImmortalContestModel.instance.preTime)||5===E.ImmortalContestModel.instance.matchStage&&t<e?(this.showPrePanel(),t<e&&Laya.timer.once(e-t,this,function(){E.ImmortalContestCtrl.instance.GetXianDaoInfo()},null,!0)):this._isMain?this.showMainPanel():this.showGuessPanel(),this.v&&this.v.parent?this.updatePrePanel():this.v_main&&this.v_main.parent?this.updateMainPanel():this.v_guess&&this.v_guess.parent?this.updateGuessPanel():this.v_result&&this.v_result.parent&&this.updateResultPanel()},s.prototype.showPrePanel=function(){this.v_guess&&this.v_guess.parent&&this.v_guess.removeSelf(),this.v_main&&this.v_main.parent&&this.v_main.removeSelf(),this.v_result&&this.v_result.parent&&this.v_result.removeSelf(),this.v&&!this.v.parent&&this.addChildAt(this.v,0),y.thisStop(this._resultClip)},s.prototype.showMainPanel=function(){this.v&&this.v.parent&&this.v.removeSelf(),this.v_guess&&this.v_guess.parent&&this.v_guess.removeSelf(),this.v_result&&this.v_result.parent&&this.v_result.removeSelf(),this.v_main&&!this.v_main.parent&&this.addChildAt(this.v_main,0),this._isMain=!0,y.thisStop(this._resultClip)},s.prototype.showGuessPanel=function(){this.v&&this.v.parent&&this.v.removeSelf(),this.v_main&&this.v_main.parent&&this.v_main.removeSelf(),this.v_result&&this.v_result.parent&&this.v_result.removeSelf(),this.v_guess&&!this.v_guess.parent&&this.addChildAt(this.v_guess,0),this._isMain=!1,y.thisStop(this._resultClip)},s.prototype.showResultPanel=function(){this.v&&this.v.parent&&this.v.removeSelf(),this.v_main&&this.v_main.parent&&this.v_main.removeSelf(),this.v_guess&&this.v_guess.parent&&this.v_guess.removeSelf(),this.v_result&&!this.v_result.parent&&this.addChildAt(this.v_result,0)},s.prototype.updateMainPanel=function(){var t=E.ImmortalContestModel.instance.curRound||1,e=D.instance.getCfgByRound(t)[3],i=E.ImmortalContestModel.instance.guessTimes||0;this.v_main.guessCount.text=e-i+"/"+e,this.v_main.guessCount.color=i<e?"#50ff28":"#ff3e3e";for(var n={},s=1;s<=5;++s)for(var o=E.ImmortalContestModel.instance.getRecordsByRound(E.ImmortalContestModel.instance.selectedTab,s),a=0;a<o.length;++a){if(1===s){var r=this.v_main.getChildByName("name_"+2*a),l=this.v_main.getChildByName("name_"+(2*a+1)),h=o[a]?o[a][1]:null,c=o[a]?o[a][2]:null;r.text=h?h[2]:"轮空",l.text=c?c[2]:"轮空",r.color="#ffffff",l.color="#ffffff"}var p=E.ImmortalContestModel.instance.getCountByRound(s),u=this.v_main.mark.getChildByName("m_"+p+"_"+(a+1));u&&(u.visible=!1);var d=this.v_main.white.getChildByName("w_"+p+"_"+(a+1)+"_a_0"),y=1<p?this.v_main.white.getChildByName("w_"+p+"_"+(a+1)+"_a_1"):d,g=this.v_main.yellow.getChildByName("y_"+p+"_"+(a+1)+"_a_0"),f=1<p?this.v_main.yellow.getChildByName("y_"+p+"_"+(a+1)+"_a_1"):g,_=this.v_main.white.getChildByName("w_"+p+"_"+(a+1)+"_b_0"),m=1<p?this.v_main.white.getChildByName("w_"+p+"_"+(a+1)+"_b_1"):_,v=this.v_main.yellow.getChildByName("y_"+p+"_"+(a+1)+"_b_0"),b=1<p?this.v_main.yellow.getChildByName("y_"+p+"_"+(a+1)+"_b_1"):v,T=o[a]?o[a][3]:-1;if(1===(n[p+"_"+(a+1)]=T))if(d.visible=y.visible=g.visible=f.visible=_.visible=m.visible=v.visible=b.visible=!1,5===s)this.v_main.winnerHead.visible=this.v_main.winnerVip.visible=!0,this.v_main.winnerName.text=o[a][1][2],this.v_main.winnerHead.setInfo(o[a][1][3],o[a][1][1],o[a][1][4]),this.v_main.winnerVip.setSVIPandVIP(1,o[a][1][5]),g.visible=f.visible=!0;else{var I=(M=E.ImmortalContestModel.instance.getRecord(E.ImmortalContestModel.instance.selectedTab,s+1,1+(a/2>>0)))?M[3]:0;if(I===a%2+1||0===I)g.visible=f.visible=!0;else{d.visible=y.visible=!0;for(var C=s,x=p,B=a+1,S=1;1<C&&(--C,x*=2,B=2*B-S,S=-1,(P=this.v_main.yellow.getChildByName("y_"+x+"_"+B+"_a_0")).visible&&(P.visible=!1,(P=this.v_main.yellow.getChildByName("y_"+x+"_"+B+"_a_1")).visible=!1,(P=this.v_main.white.getChildByName("w_"+x+"_"+B+"_a_0")).visible=!0,(P=this.v_main.white.getChildByName("w_"+x+"_"+B+"_a_1")).visible=!0,S=1),(P=this.v_main.yellow.getChildByName("y_"+x+"_"+B+"_b_0")).visible&&(P.visible=!1,(P=this.v_main.yellow.getChildByName("y_"+x+"_"+B+"_b_1")).visible=!1,(P=this.v_main.white.getChildByName("w_"+x+"_"+B+"_b_0")).visible=!0,(P=this.v_main.white.getChildByName("w_"+x+"_"+B+"_b_1")).visible=!0,S=0),!(S<0)););}}else if(2===T)if(d.visible=y.visible=g.visible=f.visible=_.visible=m.visible=v.visible=b.visible=!1,5===s)this.v_main.winnerHead.visible=this.v_main.winnerVip.visible=!0,this.v_main.winnerName.text=o[a][2][2],this.v_main.winnerHead.setInfo(o[a][2][3],o[a][2][1],o[a][2][4]),this.v_main.winnerVip.setSVIPandVIP(1,o[a][2][5]),v.visible=b.visible=!0;else{var M,w=(M=E.ImmortalContestModel.instance.getRecord(E.ImmortalContestModel.instance.selectedTab,s+1,1+(a/2>>0)))?M[3]:0;if(w===a%2+1||0===w)v.visible=b.visible=!0;else for(_.visible=m.visible=!0,C=s,x=p,B=a+1,S=0;1<C;){var P;if(--C,x*=2,B=2*B-S,S=-1,(P=this.v_main.yellow.getChildByName("y_"+x+"_"+B+"_a_0")).visible&&(P.visible=!1,(P=this.v_main.yellow.getChildByName("y_"+x+"_"+B+"_a_1")).visible=!1,(P=this.v_main.white.getChildByName("w_"+x+"_"+B+"_a_0")).visible=!0,(P=this.v_main.white.getChildByName("w_"+x+"_"+B+"_a_1")).visible=!0,S=1),(P=this.v_main.yellow.getChildByName("y_"+x+"_"+B+"_b_0")).visible&&(P.visible=!1,(P=this.v_main.yellow.getChildByName("y_"+x+"_"+B+"_b_1")).visible=!1,(P=this.v_main.white.getChildByName("w_"+x+"_"+B+"_b_0")).visible=!0,(P=this.v_main.white.getChildByName("w_"+x+"_"+B+"_b_1")).visible=!0,S=0),S<0)break}}else if(d.visible=y.visible=g.visible=f.visible=_.visible=m.visible=v.visible=b.visible=!1,5===s&&(this.v_main.winnerName.text="虚位以待",this.v_main.winnerHead.visible=!1,this.v_main.winnerVip.visible=!1),0===T&&(o[a][1]&&(g.visible=f.visible=!0),o[a][2]&&(v.visible=b.visible=!0),u&&s===t)){var A=E.ImmortalContestModel.instance.getGuessRecord(E.ImmortalContestModel.instance.selectedTab+1,t,a+1);if(A&&(A[2]||A[3])){if(s<5&&(u.visible=!0),S=B=x=C=void 0,A[2]){for(C=s,x=p,B=a+(S=1);1<C;)--C,S=2-n[(x*=2)+"_"+(B=2*B-S)];var R=this.v_main.getChildByName("name_"+(2*B-S-1));R&&(R.color="#ffec7c")}if(A[3]){for(S=0,C=s,x=p,B=a+1;1<C;)--C,S=2-n[(x*=2)+"_"+(B=2*B-S)];var k=this.v_main.getChildByName("name_"+(2*B-S-1));k&&(k.color="#ffec7c")}}}}},s.prototype.updateGuessPanel=function(){4===E.ImmortalContestModel.instance.matchStage||5===E.ImmortalContestModel.instance.matchStage||0===E.ImmortalContestModel.instance.matchStage?this.v_guess.bar.width=599:0<E.ImmortalContestModel.instance.curRound?this.v_guess.bar.width=this._roundItenList[E.ImmortalContestModel.instance.curRound-1].x:this.v_guess.bar.width=0;for(var t=E.ImmortalContestModel.instance.curRound||1,e=0;e<this._roundItenList.length;++e){var i=this._roundItenList[e];i.img.visible=E.ImmortalContestModel.instance.selectedRound===e+1;var n=E.ImmortalContestModel.instance.getTimeByRound(e+1),s=new Date(n);i.time.text=("0"+s.getHours()).substr(-2)+":"+("0"+s.getMinutes()).substr(-2),i.time.color=i.txt.color="#3a5385",2!==E.ImmortalContestModel.instance.matchStage&&3!==E.ImmortalContestModel.instance.matchStage||t!==e+1||0<E.ImmortalContestModel.instance.curRound&&(i.time.text="进行中",i.time.color=i.txt.color="#b15315"),GlobalData.serverTime>n||4===E.ImmortalContestModel.instance.matchStage||5===E.ImmortalContestModel.instance.matchStage||0===E.ImmortalContestModel.instance.matchStage?(i.time.visible=!1,i.over.visible=!0):(i.time.visible=!0,i.over.visible=!1)}var o=D.instance.getCfgByRound(t),a=o[3],r=E.ImmortalContestModel.instance.guessTimes||0;if(this.v_guess.countTxt.text=a-r+"/"+a,this.v_guess.countTxt.color=r<a?"#148b14":"#ff3e3e",o=D.instance.getCfgByRound(E.ImmortalContestModel.instance.selectedRound),this.v_guess.costTxt.text=o?o[4].toString():"",5===E.ImmortalContestModel.instance.matchStage)return this.v_guess.noTipImg.visible=this.v_guess.noTipTxt.visible=!0,this._recordList.datas=[],void this.loopHandler();if(this.v_guess.noTipImg.visible=this.v_guess.noTipTxt.visible=!1,this.tempTab===E.ImmortalContestModel.instance.selectedTab&&this.tempRound===E.ImmortalContestModel.instance.selectedRound)this._recordList.updateShowItem();else{this.tempTab=E.ImmortalContestModel.instance.selectedTab,this.tempRound=E.ImmortalContestModel.instance.selectedRound;var l=E.ImmortalContestModel.instance.records&&E.ImmortalContestModel.instance.records[this.tempTab]||[],h=[];for(var e in l)l[e][0]===this.tempRound&&h.push(l[e]);h.sort(function(t,e){return t[1]&&t[2]?e[1]&&e[2]?t[4]-e[4]:-1:e[1]&&e[2]?t[1]&&t[2]?t[4]-e[4]:1:t[4]-e[4]});for(var c=E.ImmortalContestModel.instance.getCountByRound(this.tempRound);h.length<c;)h.push(null);this._recordList.datas=h}this.loopHandler(),Laya.timer.loop(1e3,this,this.loopHandler,null,!0,!0)},s.prototype.updatePrePanel=function(){if(1===E.ImmortalContestModel.instance.matchStage&&E.ImmortalContestModel.instance.isEnroll){var t=E.ImmortalContestModel.instance.eventTime,e=new Date(t[0]),i=new Date(t[0]+D.instance.preBattleTime),n=CommonUtil.formatHtmlStrByColor("#148b14",("0"+e.getHours()).substr(-2)+":"+("0"+e.getMinutes()).substr(-2)+"-"+("0"+i.getHours()).substr(-2)+":"+("0"+i.getMinutes()).substr(-2)),s=r.config.BlendCfg.instance.getCfgById(97100)[1][0],o=CommonUtil.formatHtmlStrByColor(E.ImmortalContestModel.instance.matchTimes<s?"#148b14":"#ff3e3e",""+(s-E.ImmortalContestModel.instance.matchTimes));this.v.timeHtml.innerHTML="资格赛阶段:"+n+",剩余&nbsp;"+o+"&nbsp;次匹配次数"}else{t=E.ImmortalContestModel.instance.eventTime,e=new Date(t[0]),i=new Date(t[0]+D.instance.preBattleTime);var a="日一二三四五六日"[e.getDay()];a="周"+a,n=CommonUtil.formatHtmlStrByColor("#148b14",a+"&nbsp;"+("0"+e.getHours()).substr(-2)+":"+("0"+e.getMinutes()).substr(-2)+"-"+("0"+i.getHours()).substr(-2)+":"+("0"+i.getMinutes()).substr(-2)),this.v.timeHtml.innerHTML="资格赛时间:"+n}this.v.goBtn.visible=5!=E.ImmortalContestModel.instance.matchStage,this.v.tipsText.visible=5===E.ImmortalContestModel.instance.matchStage},s.prototype.loopHandler=function(){if(4===E.ImmortalContestModel.instance.matchStage||5===E.ImmortalContestModel.instance.matchStage||0===E.ImmortalContestModel.instance.matchStage)return this.v_guess.timeTxtL.text="晋级赛已结束",this.v_guess.timeTxt.text="",void(this.v_guess.timeTxtR.text="");var t=E.ImmortalContestModel.instance.curRound,e=E.ImmortalContestModel.instance.getTimeByRound(t);if(0===t){var i=new Date(e);this.v_guess.timeTxtL.text="十六强赛将于",this.v_guess.timeTxt.text=("0"+i.getHours()).substr(-2)+":"+("0"+i.getMinutes()).substr(-2),this.v_guess.timeTxtR.text="开始",CommonUtil.chainArr([this.v_guess.timeTxtL,this.v_guess.timeTxt,this.v_guess.timeTxtR])}else this.v_guess.timeTxtL.text="本轮竞猜时间:",this.v_guess.timeTxt.text=CommonUtil.timeStampToMMSS(e),this.v_guess.timeTxtR.text="",CommonUtil.chainArr([this.v_guess.timeTxtL,this.v_guess.timeTxt])},s.prototype.updateResultPanel=function(){var t=this._resultTab.selectedIndex,e=0===t?"天":"地";this.v_result.txt.text=e+"组第一奖励";var i,n=E.ImmortalContestModel.instance.mainRank&&E.ImmortalContestModel.instance.mainRank[t]||[];(i=n&&n.length?n.concat().slice(1):[]).length=31,this._resultList.datas=i;var s=E.ImmortalContestModel.instance.actorShow&&E.ImmortalContestModel.instance.actorShow[t]?E.ImmortalContestModel.instance.actorShow[t][0]:null,o=n[0];if(s&&o){this.v_result.nullImg.visible=this.v_result.nullTxt.visible=!1,this._resultAvatar.visible=!0;var a=s[1],r=s[2],l=s[3],h=s[5],c=s[10];this._resultAvatar.reset(a||1e3+PlayerModel.instance.occ,r,l,h,0,c),this.v_result.nameTxt.text=o[1],this.v_result.rankTxt.text="战力:"+CommonUtil.bigNumToString(o[4]),this.v_result.observationItem.data=[[this._resultAvatar,0]],0===t?(this.v_result.hidden_3.text="登顶次数:",this.v_result.countTxt.text=""+E.ImmortalContestModel.instance.topTimes,this.v_result.nameTxt.y=400,this.v_result.rankTxt.y=428):(this.v_result.hidden_3.text=this.v_result.countTxt.text="",this.v_result.nameTxt.y=414,this.v_result.rankTxt.y=442)}else this.v_result.nullImg.visible=this.v_result.nullTxt.visible=!0,this._resultAvatar.visible=!1,this.v_result.nameTxt.text="",this.v_result.rankTxt.text="",this.v_result.hidden_3.text=this.v_result.countTxt.text="";var p=D.instance.getRewardByTypeAndRank(this._resultTab.selectedIndex+1,1),u=p?CommonUtil.formatItemData(p[2]):[];0===t?(this.v_result.item_0.visible=!0,this.v_result.item_0.dataSource=u[0],this._resultFirst.datas=u.slice(1),this.v_result.hidden_2.y=97,this.v_result.txt.y=215,this.v_result.hidden_4.y=this.v_result.hidden_5.y=223,y.thisPlay(this._resultClip)):(this.v_result.item_0.visible=!1,this._resultFirst.datas=u,this.v_result.hidden_2.y=157,this.v_result.txt.y=315,this.v_result.hidden_4.y=this.v_result.hidden_5.y=323,y.thisStop(this._resultClip))},n=s,E.ImmortalContestPanel=n}(modules=modules||{}),function(t){var r,e,i,n,l,a,h,c,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.getState=0,t._type=0,t}r=t.invest_reward||(t.invest_reward={}),i=ui.InvestItemUI,n=t.common.CustomClip,l=t.notice.SystemNoticeManager,a=t.redPoint.RedPointCtrl,h=t.bag.BagUtil,c=t.config.InvestRewardCfg,e=i,__extends(o,e),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._cfg=null,e.prototype.destroy.call(this,t)},o.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.investText,"#1f304d","SimHei",26),this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-5,this.sureBtn.y-10,.8)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("INVEST_REWARD_UPDATE",this,this.updateView)},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},o.prototype.updateView=function(){this.setBtnState(),this.setType()},o.prototype.setData=function(t){this._cfg=t,this._itemTaskId=this._cfg[0];var e=[],i=this._cfg[1];0==i?(this._type=r.InvestRewardModel.instance.loginCount,this.investText.innerHTML="累计登录<span style='color:#b15315'>"+this._cfg[2]+"</span>天,可领取奖励！"):1==i?(this._type=r.InvestRewardModel.instance.tianguanLevel,this.investText.innerHTML="通过天关<span style='color:#b15315'>"+this._cfg[2]+"</span>关,可领取奖励！"):(this._type=r.InvestRewardModel.instance.actorLevel,this.investText.innerHTML="累计达到<span style='color:#b15315'>"+this._cfg[2]+"</span>级,可领取奖励！"),this.setType();for(var n=this._cfg[4],s=0;s<.5*n.length;s++)e.push(n[2*s]);var o=e.length,a=[];for(a.push(this.investBase1),a.push(this.investBase2),a.push(this.investBase3),a.push(this.investBase4),s=0;s<4;s++)s<o?(a[s].visible||(a[s].visible=!0),a[s].dataSource=[n[2*s],n[2*s+1],0,null]):a[s].visible=!1;this.setBtnState()},o.prototype.close=function(){e.prototype.close.call(this),n.thisStop(this._btnClip)},o.prototype.setBtnState=function(){var t=r.InvestRewardModel.instance.rewardList[this._itemTaskId];t?(this.getState=t[1],0!==this.getState&&(1==this.getState?(n.thisPlay(this._btnClip),this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.mouseEnabled=!0,this.sureBtn.label="可领取",this.sureBtn.pos(482,64,!0)):(n.thisStop(this._btnClip),this.sureBtn.skin="common/txt_commmon_ylq.png",this.sureBtn.mouseEnabled=!1,this.sureBtn.label="",this.sureBtn.pos(505,64,!0)))):(this.sureBtn.label="",n.thisStop(this._btnClip),this._type<this._cfg[2]?(this.sureBtn.skin="common/txt_commmon_wdc.png",this.sureBtn.mouseEnabled=!1,this.sureBtn.pos(505,64,!0)):(this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.label="领取",this.sureBtn.mouseEnabled=!0,this.sureBtn.pos(482,64,!0)))},o.prototype.sureBtnHandler=function(){var t=r.InvestRewardModel.instance.rewardList[this._itemTaskId],e=c.instance.getCfgById(this._itemTaskId);t||(this.getState=0);var i=e[1];if(r.InvestRewardModel.instance.stateList[i]){if(0==this.getState&&(0==i?l.instance.addNotice("未到达登录天数！",!0):1==i?l.instance.addNotice("当前通过的天关数不足！",!0):l.instance.addNotice("当前等级不足！",!0)),1==this.getState){for(var n=this._cfg[4],s=[],o=0,a=.5*n.length;o<a;o++)s.push([n[2*o],n[2*o+1],0,null]);h.canAddItemsByBagIdCount(s)&&r.InvestRewardCtrl.instance.getInvestReward([this._itemTaskId])}}else l.instance.addNotice("尚未投资，投资后可领取！",!0)},o.prototype.investRewardPRState=function(){var t=r.InvestRewardModel.instance.rewardList,e=!1,i=!1,n=!1;for(var s in t)if(1==t[s][1]){var o=c.instance.getCfgById(t[s][0])[1];0==o?e=!0:1==o?i=!0:2==o&&(n=!0)}a.instance.setRPProperty("investLoginRP",e),a.instance.setRPProperty("investRecruitRP",i),a.instance.setRPProperty("investGrowthRP",n)},o.prototype.setType=function(){var t=this._cfg[1];this._type=0==t?r.InvestRewardModel.instance.loginCount:1==t?r.InvestRewardModel.instance.tianguanLevel:r.InvestRewardModel.instance.actorLevel,this.scheduleText.text="("+this._type+"/"+this._cfg[2]+")",this.scheduleText.color&&(this.scheduleText.color=this._type>=this._cfg[2]?"#16ba17":"#FF3e3e")},s=o,r.InvestRewardItem=s}(modules=modules||{}),function(h){var t,c,p,u,e;function d(){this._giveState=0,this._loginCount=0,this._tianguanLevel=0,this._actorLevel=0,this._stateList={},this._rewardList={}}t=h.invest_reward||(h.invest_reward={}),c=h.redPoint.RedPointCtrl,p=h.config.PrivilegeCfg,u=h.config.InvestRewardCfg,Object.defineProperty(d,"instance",{get:function(){return this._instance=this._instance||new d},enumerable:!0,configurable:!0}),d.prototype.updateInfo=function(t){this._giveState=t[0],this._loginCount=t[1],this._tianguanLevel=t[2],this._actorLevel=t[3];for(var e=t[4],i=0;i<e.length;i++)this._stateList[e[i][0]]=e[i];var n=t[5];for(i=0;i<n.length;i++)this._rewardList[n[i][0]]=n[i];GlobalData.dispatcher.event("INVEST_REWARD_UPDATE"),this.investRewardPRState()},Object.defineProperty(d.prototype,"giveState",{get:function(){return this._giveState},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"loginCount",{get:function(){return this._loginCount},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"tianguanLevel",{get:function(){return this._tianguanLevel},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"actorLevel",{get:function(){return this._actorLevel},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"stateList",{get:function(){return this._stateList},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),d.prototype.investRewardPRState=function(){var t=!1,e=!1,i=!1;for(var n in this._rewardList)if(this._rewardList[n]){var s=this._rewardList[n][0],o=u.instance.getCfgById(s)[1];1==this._rewardList[n][1]&&(0==o?t=!0:1==o?e=!0:2==o&&(i=!0))}var a=this.getIsTouZhi(0),r=this.getIsTouZhi(1),l=this.getIsTouZhi(2);c.instance.setRPProperty("investLoginRP",t||!t&&a),c.instance.setRPProperty("investRecruitRP",e||!e&&r),c.instance.setRPProperty("investGrowthRP",i||!i&&l)},d.prototype.getIsTouZhi=function(t){var e,i=u.instance.getCfgBytype(t),n=i[i.length-1][3],s=d.instance.stateList;e=0==t?p.instance.getMinLvMaxLvByType(10)[0]:1==t?p.instance.getMinLvMaxLvByType(11)[0]:p.instance.getMinLvMaxLvByType(12)[0];var o=s[t],a=0;o&&(a=o[1]);var r=PlayerModel.instance.ingot,l=h.vip.VipModel.instance.vipLevel;return 0==a&&(n<=r&&e<=l||void 0)},e=d,t.InvestRewardModel=e}(modules=modules||{}),function(o){var t,i,n,e;function s(){this._state=0,this._cold=0,this._times=0,this._maxNum=o.config.BlendCfg.instance.getCfgById(45001)[1][0],this._awardAee=new Array;for(var t=o.config.BlendCfg.instance.getCfgById(45003)[1],e=0,i=0,n=0;n<t.length;n++){var s=t[n];this._awardAee[i]||(this._awardAee[i]=new Array),this._awardAee[i][e]=s,2==++e&&(e=0,i++)}}t=o.invitation||(o.invitation={}),i=o.funcOpen.FuncOpenModel,n=o.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cold",{get:function(){return this._cold},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"times",{get:function(){return this._times},enumerable:!0,configurable:!0}),s.prototype.getInfo=function(t){this._state=t[2],this._times=t[0],this._cold=t[1]+GlobalData.serverTime,GlobalData.dispatcher.event("INVITATION_UPDATE"),this.setRP()},s.prototype.getIsLingQu=function(){var t=!1;return 1==this._state&&(t=!0),t},s.prototype.setRP=function(){var t=i.instance.getFuncIsOpen(227),e=this.getIsLingQu();n.instance.setRPProperty("invitationRP",t&&e)},e=s,t.InvitationModel=e}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.jiu_xiao_ling||(t.jiu_xiao_ling={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!1,this.needTip=!0},o.prototype.setDataSource=function(t){t&&(t=[t[0],t[1],0,null],i.prototype.setDataSource.call(this,t))},s=o,e.JiuXiaoLingBaseItemItem=s}(modules=modules||{}),function(t){var a,e,i;function n(){return e.call(this)||this}a=t.jiu_xiao_ling||(t.jiu_xiao_ling={}),e=ui.JiuXiaoLingItemUI,__extends(n,e),n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SCROLL_INDEX_CHANGE",this,this.upDateUI)},n.prototype.clickHandler=function(){this.lingQuBtnHandler()},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this.lingQuBtn.mouseEnabled=!1,this.lingQuBtn.mouseThrough=!0,this._isRp=!1,t&&(this._lv=t[0],this._dates=t[1],this.upDateUI())},n.prototype.upDateUI=function(){if(this._dates){this.lvText.text=this._lv+"级";var t=this._dates[6],e=this._dates[7],i=t[this._lv-1],n=e[this._lv-1],s=!1,o=!1;i&&i[0]?(this.item.dataSource=[i[0],i[1],0,null],this.item.visible=!0,s=!(this.noRewardText.visible=!1)):(this.item.visible=!1,this.noRewardText.visible=!0),n&&n[0]?(this.item1.dataSource=[n[0],n[1],0,null],o=this.item1.visible=!0):this.item1.visible=!1,this.rpImg.visible=!1,this._isRp=!1,this.noImg.visible=!1,this.noImg1.visible=!0,this.itemTrueImg.visible=!1,this.item1TrueImg.visible=!1,0==a.JiuXiaoLingModel.instance.goldHeavenState?this.item.visible&&(this.noImg.visible=this._lv>a.JiuXiaoLingModel.instance.level,this.itemTrueImg.visible=this._lv<=a.JiuXiaoLingModel.instance.normalLv&&s,this._isRp=this.item.rpImg.visible=this._lv<=a.JiuXiaoLingModel.instance.level&&this._lv>a.JiuXiaoLingModel.instance.normalLv):(this.item.visible&&(this.noImg.visible=this._lv>a.JiuXiaoLingModel.instance.level,this.itemTrueImg.visible=this._lv<=a.JiuXiaoLingModel.instance.normalLv&&s,this._isRp=this.item.rpImg.visible=this._lv<=a.JiuXiaoLingModel.instance.level&&this._lv>a.JiuXiaoLingModel.instance.normalLv),this.item1.visible&&(this.noImg1.visible=this._lv>a.JiuXiaoLingModel.instance.level,this.item1TrueImg.visible=this._lv<=a.JiuXiaoLingModel.instance.goldLv&&o,this._isRp||(this._isRp=this._lv<=a.JiuXiaoLingModel.instance.level&&this._lv>a.JiuXiaoLingModel.instance.goldLv),this.item1.rpImg.visible=this._lv<=a.JiuXiaoLingModel.instance.level&&this._lv>a.JiuXiaoLingModel.instance.goldLv)),this.setTheSelected()}},n.prototype.setTheSelected=function(){this.item.needTip=!this._isRp,this.item1.needTip=!this._isRp,this.item.mouseEnabled=!this._isRp,this.item1.mouseEnabled=!this._isRp,this.item.mouseThrough=this._isRp,this.item1.mouseThrough=this._isRp,this._tipsNum=0,this.lingQuBtnHandler()},n.prototype.lingQuBtnHandler=function(){1<=this._tipsNum&&this._isRp&&(0===a.JiuXiaoLingModel.instance.goldHeavenState&&a.JiuXiaoLingModel.instance.isTips()&&(a.JiuXiaoLingModel.instance._closeOpenBuyTipsWin=!0),a.JiuXiaoLingCtrl.instance.DrawHeavenLevel()),this._tipsNum++},n.prototype.destroy=function(){e.prototype.destroy.call(this,!0)},i=n,a.JiuXiaoLingItem=i}(modules=modules||{}),function(i){var t,c,l,n,s,e,o;function p(){this.openState=0,this.goldHeavenState=0,this.seasonBeginTick=0,this.seasonEndTick=0,this.stageEndTick=0,this._tasksJieDuan=new Array,this._tasksSaiJi=new Array,this._tasksById=new e,this.level=0,this.exp=0,this.stage=0,this.season=1,this.normalLv=0,this.goldLv=0,this.extraReward=new Array,this._closeOpenBuyTipsWin=!1,this._fengGeLv=40}t=i.jiu_xiao_ling||(i.jiu_xiao_ling={}),c=i.config.HeavenSeasonCfg,l=i.config.HeavenTaskCfg,n=i.redPoint.RedPointCtrl,s=i.funcOpen.FuncOpenModel,e=Laya.Dictionary,Object.defineProperty(p,"instance",{get:function(){return this._instance=this._instance||new p},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"tasksJieDuan",{get:function(){return this._tasksJieDuan},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"tasksSaiJi",{get:function(){return this._tasksSaiJi},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"tasksById",{get:function(){return this._tasksById},enumerable:!0,configurable:!0}),p.prototype.getDate=function(t){this.openState=t[0],this.goldHeavenState=t[1],this.seasonBeginTick=t[2],this.seasonEndTick=t[3],this.stageEndTick=t[4];var e=t[5];this.setHeavenTask(e);var i=!1;this.level!=t[6]&&(i=!0),this.level=t[6],this.exp=t[10],this.stage=t[11],this.season=t[12],this.normalLv=t[7],this.goldLv=t[8],this.extraReward=t[9],this.setActionOpen(),p.instance.setRP();var n=c.instance.getCfgBySeason(p.instance.season);n&&(this._fengGeLv=n[16]),GlobalData.dispatcher.event("JIU_XIAO_LING_UPDATE",[i])},p.prototype.setHeavenTask=function(t){this._tasksJieDuan.length=0;for(var e=this._tasksSaiJi.length=0;e<t.length;e++){var i=t[e];if(i){var n=i[0];this._tasksById.set(n,i);var s=l.instance.getCfgById(parseInt(n));if(s){var o=s[2];1===o?this._tasksJieDuan.push(i):2===o&&this._tasksSaiJi.push(i)}}}},p.prototype.getRp=function(){var t=c.instance.getCfgBySeason(p.instance.season);if(!t)return[!1,0];for(var e=t[7],i=t[6],n=!1,s=0,o=0;o<e.length;o++){var a=i[o],r=e[o],l=!1,h=!1;if(a&&a[0]&&(l=!0),r&&r[0]&&(h=!0),0==p.instance.goldHeavenState?l&&(n=o+1<=p.instance.level&&o+1>p.instance.normalLv)&&(s=o):(l&&(n=o+1<=p.instance.level&&o+1>p.instance.normalLv)&&(s=o),h&&(n||(n=o+1<=p.instance.level&&o+1>p.instance.goldLv)&&(s=o))),n)break}return[n,s]},p.prototype.getRpTask=function(){return this.getRpTaskSaiJi()||this.getRpTaskJieDuan()},p.prototype.getRpTaskSaiJi=function(){for(var t=!1,e=0;e<this.tasksSaiJi.length;e++){var i=this.tasksSaiJi[e];if(i&&2===i[1]){t=!0;break}}return t},p.prototype.getRpTaskJieDuan=function(){for(var t=!1,e=0;e<this._tasksJieDuan.length;e++){var i=this._tasksJieDuan[e];if(i&&2===i[1]){t=!0;break}}return t=t||0<this.extraReward.length&&0!=p.instance.goldHeavenState},p.prototype.setRP=function(){var t=s.instance.getFuncIsOpen(252),e=this.getRp(),i=this.getRpTask();n.instance.setRPProperty("jiuXiaoLingRP",e[0]&&t),n.instance.setRPProperty("jiuXiaoLingTaskRP",i&&t)},p.prototype.setActionOpen=function(){var t=1==this.openState?1:2;i.funcOpen.FuncOpenModel.instance.setActionOpen(252,t),i.funcOpen.FuncOpenModel.instance.setActionOpen(253,t)},p.prototype.getSJTaskCompleteNum=function(){for(var t=0,e=0;e<this._tasksSaiJi.length;e++){var i=this._tasksSaiJi[e];if(i){var n=i[1];1!=n&&2!=n&&t++}}return t},p.prototype.getJDTaskAllExp=function(){for(var t=0,e=0,i=0;i<this._tasksJieDuan.length;i++){var n=this._tasksJieDuan[i];if(n){var s=n[0],o=n[2],a=l.instance.getCfgById(parseInt(s));if(a){var r=a[3];t+=r*o,e+=r*a[7]}}}return[t,e]},p.prototype.isTips=function(){for(var t=p.instance.normalLv+1;t<=p.instance.level;t++)if(5<=t&&t%5==0)return!0;return!1},p.prototype.showTipsEW=function(){var t=c.instance.getCfgBySeason(p.instance.season);if(t){var e=t[10];i.notice.SystemNoticeManager.instance.addNotice("成功领取"+e+"点九霄令经验",!1)}else i.notice.SystemNoticeManager.instance.addNotice("领取成功",!1)},p.prototype.sortFunc=function(t,e){var i=t[0],n=e[0];return CommonUtil.getItemQualityById(i)<CommonUtil.getItemQualityById(n)?-1:1},p.prototype.sortFunc1=function(t,e){var i=t[0],n=e[0];return CommonUtil.getItemQualityById(i)<CommonUtil.getItemQualityById(n)?1:-1},p.prototype.showBuyTipsCommon=function(){var t=c.instance.getCfgBySeason(p.instance.season);if(t){var e="<span style='color:#2c476a'>激活</span>\n                            <span style='color:#b15315'>【九霄金令】</span>\n                            <span style='color:#2c476a'>每阶段还可以免费领取</span>\n                             <span style='color:#b15315'> "+t[10]+"</span>\n                             <span style='color:#2c476a'>点</span>\n                            <span style='color:#b15315'>额外升级经验</span>\n                           <span style='color:#2c476a'> 哦~是否前往激活？</span>";CommonUtil.alert("温馨提示",e,[Handler.create(this,this.openBuy)],[],null,!0)}},p.prototype.openBuy=function(){WindowManager.instance.open(439)},p.prototype.tipsBtnHandler=function(){CommonUtil.alertHelp(20070)},o=p,t.JiuXiaoLingModel=o}(modules=modules||{}),function(t){var h,e,i,n,s;function o(){var t=e.call(this)||this;return t._state=0,t}h=t.jiu_xiao_ling||(t.jiu_xiao_ling={}),i=t.config.HeavenTaskCfg,n=t.common.CustomClip,e=ui.JiuXiaoLingTaskItemUI,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.jinDuHTML,"#3a5385","SimHei",22,"right"),CommonUtil.setHTMLPro(this.titleHTML,"#1f304d","SimHei",24),CommonUtil.setHTMLPro(this.instructionsHTML,"#3a5385","SimHei",22),this.initializeClip()},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},o.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._taskId=t[0],this._dates=i.instance.getCfgById(parseInt(this._taskId)),this._dates&&(this._taskType=this._dates[2],this.upDateUI()))},o.prototype.sureBtnHandler=function(){1==this._state?this.openByActionId():2==this._state&&h.JiuXiaoLingCtrl.instance.DrawHeavenTask(parseInt(this._taskId))},o.prototype.openByActionId=function(){var t=this._dates[5];WindowManager.instance.openByActionId(t)},o.prototype.upDateUI=function(){this.setBtnSure()},o.prototype.setBtnSure=function(){this.jinDuHTML.visible=1===this._taskType;var t,e=this._dates[1],i=this._dates[3],n=this._dates[6],s=this._dates[7];this._state=1;var o=0,a=h.JiuXiaoLingModel.instance.tasksById.get(this._taskId);if(a)if(this._state=a[1],t=a[3],o=a[2],this.titleHTML.visible=!0,t&&t[0]){var r=t[0][1],l=t[0][2];r=l<r?l:r,this.titleHTML.innerHTML=r<l?e+"<span style='color:#ff3e3e'>("+r+"/"+l+")</span>":e+"<span style='color:#168a17'>("+r+"/"+l+")</span>"}else this.titleHTML.innerHTML=""+e;this.expText.text=""+i,this.instructionsHTML.innerHTML=n,this.jinDuHTML.innerHTML="完成次数:<span style='color:#168a17'>("+o+"/"+s+")</span>",this.receivedImg.skin="common/txt_commmon_ylq.png",this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.sureBtn.label="领取",this._btnClip.stop(),this._btnClip.visible=!1,this.receivedImg.visible=!1,this.sureBtn.visible=!0,1==this._state?(this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460,#465460,#465460,#465460",this.sureBtn.label="前往"):2==this._state?(this._btnClip.play(),this._btnClip.visible=!0):3==this._state?(this.sureBtn.visible=!1,this.receivedImg.visible=!0):4==this._state&&(this.sureBtn.visible=!1,this.receivedImg.visible=!0,this.receivedImg.skin="common/txt_commmon_ywc.png")},o.prototype.initializeClip=function(){this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-6,this.sureBtn.y-8,.8)},o.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this._dates=null,e.prototype.destroy.call(this,!0)},s=o,h.JiuXiaoLingTaskItem=s}(modules=modules||{}),function(a){var r,e,t,i,o,l,n;function s(){return null!==e&&e.apply(this,arguments)||this}r=a.kuanghuan||(a.kuanghuan={}),t=ui.KuangHuanItemUI,i=a.common.CustomClip,o=a.bag.BagUtil,l=a.notice.SystemNoticeManager,e=t,__extends(s,e),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),e.prototype.destroy.call(this,t)},s.prototype.initialize=function(){e.prototype.initialize.call(this),this.WholeText.style.fontFamily="SimHei",this.WholeText.style.fontSize=26,this._btnClip=i.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-5,this.sureBtn.y-10,.8)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("PLAYER_UPDATE_FIGHT",this,this._updateView)},s.prototype.close=function(){e.prototype.close.call(this),i.thisStop(this._btnClip)},s.prototype._updateView=function(){9==this._type&&this.showUI()},s.prototype.setData=function(t){this._cfg=t,this.showUI()},s.prototype.showUI=function(){this._taskId=this._cfg[0],this._type=this._cfg[1],this._name=this._cfg[2],this._condition=this._cfg[3],this._skipActionId=this._cfg[5],this._describe=this._cfg[6];var t=[];this.WholeText.innerHTML=this._describe+"可领取";for(var e=this._cfg[4],i=0;i<e.length;i++)t.push(e[i][0]);var n=t.length,s=[];for(s.push(this.WholeItem1),s.push(this.WholeItem2),s.push(this.WholeItem3),s.push(this.WholeItem4),i=0;i<4;i++)i<n?(s[i].visible=!0,s[i].dataSource=[e[i][0],e[i][1],0,null]):s[i].visible=!1;var o=r.KuangHuanModel.instance.nodeList;for(i=0;i<o.length;i++)this._type==o[i][0]&&(this._taskList=o[i][2]);if(this._taskList)for(i=0;i<this._taskList.length;i++)this._taskId==this._taskList[i][0]&&(this.getState=this._taskList[i][1],this._param=this._taskList[i][2]);9===this._type&&(this._param=a.player.PlayerModel.instance.fight),this.scheduleText.text="("+CommonUtil.bigNumToString(this._param)+"/"+CommonUtil.bigNumToString(this._condition)+")",this._param>=this._condition?(this._param=this._condition,this.scheduleText.color="#16ba17"):this.scheduleText.color="#FF3e3e",this.updateBtnState()},s.prototype.updateBtnState=function(){0!==this.getState?(this.sureBtn.label="领取",this.sureBtn.skin="common/btn_tongyong_23.png",1==this.getState?(i.thisPlay(this._btnClip),this.sureBtn.visible=!0,this.receivedImg.visible=!1):(i.thisStop(this._btnClip),this.sureBtn.visible=!1,this.receivedImg.visible=!0)):(0==this._skipActionId?(this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.label="领取"):(this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460",this.sureBtn.label="前往"),this.sureBtn.visible=!0,this.receivedImg.visible=!1,i.thisStop(this._btnClip))},s.prototype.sureBtnHandler=function(){if(0==this.getState&&(0==this._skipActionId?l.instance.addNotice("条件不足，领取失败",!0):(WindowManager.instance.openByActionId(this._skipActionId),WindowManager.instance.close(230))),1==this.getState){for(var t=this._cfg[4],e=[],i=0,n=t.length;i<n;i++){var s=t[i];e.push([s[0],s[1],0,null])}o.canAddItemsByBagIdCount(e)&&r.KuangHuanCtrl.instance.getKuangHuanReward([this._taskId])}},n=s,r.KuangHuanItem=n}(modules=modules||{}),function(t){var s,o,e,a,i;function n(){return o.call(this)||this}s=t.ladder||(t.ladder={}),e=ui.HonorAwardItemUI,a=t.config.TiantiCfg,o=e,__extends(n,o),n.prototype.setData=function(t){o.prototype.setData.call(this,t);var e=t,i=e?e[0]:1;this.icon.skin="assets/others/stage/image_ttdf_"+s.LadderModel.instance.ladderUtlis(i,!e)+".png",this.gradeTxt.text=e[1];var n=a.instance.cfgs.indexOf(e);this.scoreTxt.text=0===n?"0":a.instance.cfgs[n-1][2]+"",this.honorTxt.text=e[3][0][1]+""},i=n,s.HonorAwardItem=i}(modules=modules||{}),function(t){var e,a,i,r,n;function s(){return a.call(this)||this}e=t.ladder||(t.ladder={}),i=ui.LadderGradeAwardItemUI,r=t.config.TiantiCfg,a=i,__extends(s,a),s.prototype.initialize=function(){a.prototype.initialize.call(this),this._baseItems=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6]},s.prototype.setData=function(t){a.prototype.setData.call(this,t);var e=t;this.gradeTxt.text=e[1]+"晋升奖励";for(var i=r.instance.getCfgById(e[0]+1),n=i?i[4]:[],s=0,o=n.length;s<o;s++)this._baseItems[s].visible=!0,this._baseItems[s].dataSource=[n[s][0],n[s][1],0,null];for(s=n.length,o=this._baseItems.length;s<o;s++)this._baseItems[s].visible=!1},n=s,e.LadderGradeAwardItem=n}(modules=modules||{}),function(t){var e,r,i,n;function s(){return r.call(this)||this}e=t.ladder||(t.ladder={}),i=ui.NineTopAwardItemUI,r=i,__extends(s,r),s.prototype.setData=function(t){r.prototype.setData.call(this,t);var e=t,i=e[3];if(0!==i.length){this.visible=!0;var n=e[2];if(n){1===n[0]&&1===n[1]?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===n[0]&&2===n[1]?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===n[0]&&3===n[1]?(this.rankTxt.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.rankTxt.visible=!0,this.rankTxt.text=n[0]+"-"+n[1]);for(var s=[this.item3,this.item2,this.item1,this.item0],o=0;o<4;o++){var a=i.length-o-1;i[a]?(s[o].visible=!0,s[o].dataSource=[i[a][0],i[a][1],0,null]):s[o].visible=!1}}}else this.visible=!1},n=s,e.LadderRankAwardItem=n}(modules=modules||{}),function(t){var e,n,i,s;function o(){return n.call(this)||this}e=t.ladder||(t.ladder={}),i=ui.LadderRankItemUI,n=i,__extends(o,n),o.prototype.setData=function(t){n.prototype.setData.call(this,t);var e=t,i=this.index+1;1===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_7.png"):2===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_8.png"):3===i?(this.rankClip.visible=!1,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankClip.visible=!0,this.rankImg.skin="common/dt_tongyong_15.png",this.rankClip.value=""+i),e?(this.nameTxt.text=e[0][1],this.scoreTxt.text=""+e[1]):(this.nameTxt.text="虚位以待...",this.scoreTxt.text="")},s=o,e.LadderRankItem=s}(modules=modules||{}),function(t){var e,i;function n(){}e=t.limit_pack||(t.limit_pack={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"limitPackInfo",{get:function(){return this._limitPackInfo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"updateTime",{get:function(){return this._updateTime},enumerable:!0,configurable:!0}),n.prototype.getLimitPackInfoReply=function(t){this._limitPackInfo=t[0],this._updateTime=GlobalData.serverTime,GlobalData.dispatcher.event("LIMIT_PACK_UPDATE",this.isBuyReply),this.isBuyReply=!1},i=n,e.LimitPackModel=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){}e=t.lineClearOut||(t.lineClearOut={}),i=t.redPoint.RedPointCtrl,n=t.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.getSweepingStateReply=function(t){this.getSweepingState=t,GlobalData.dispatcher.event("SWEEPING_UPDATE")},o.prototype.updateSweepingBaseInfo=function(t){this.availableTimes=t[0],this.clearTime=t[1],GlobalData.dispatcher.event("SWEEPING_UPDATE"),n.instance.getFuncIsOpen(107)&&i.instance.setRPProperty("lineClearOut",0==this.clearTime)},s=o,e.LineClearOutModel=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.TeamCopyAskItemUI,s=t.common.CommonUtil,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.canBtn.label="查看",this.cantBtn.label="拒绝",s.setHTMLPro(this.txt,"#4C5E8A","SimHei",24)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.canBtn,this,this.canBtnHandler),this.onAutoClick(this.cantBtn,this,this.cantBtnHandler)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},a.prototype.setData=function(t){this._info=t},a.prototype.update=function(){this.headIcon.setInfo(this._info[3],this._info[5],this._info[4]),this.txt.innerHTML=s.formatHtmlStrByColor("#b15315",""+this._info[1])+"向你结缘,是否接受?"},a.prototype.canBtnHandler=function(){WindowManager.instance.open(635,this._info)},a.prototype.cantBtnHandler=function(){e.MarryCtrl.instance.marryResult(this._info[0],0)},o=a,e.BeProposeListItem=o}(modules=modules||{}),function(t){var i,e,n,s,o,a,r,l;function h(){return null!==e&&e.apply(this,arguments)||this}i=t.marry||(t.marry={}),n=ui.SkillIconUI,s=t.config.RingSkillCfg,o=t.config.BlendCfg,a=t.common.CustomClip,r=t.config.SkillPureCfg,e=n,__extends(h,e),h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("MARRY_RING_UPDATE",this,this.setInfo),this.onAutoGlobalEvt("MARRY_RING_SKILL_UPDATE",this,this.setInfo),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.onAutoClick(this,this,this.clickHandler)},Object.defineProperty(h.prototype,"id",{set:function(t){this._id=t;var e=r.instance.getCfgById(t);this.iconImg.skin="assets/icon/skill/"+e[6]+".png",this._type=s.instance.commonSkillIds.indexOf(this._id)},enumerable:!0,configurable:!0}),h.prototype.updateBag=function(t){0===t&&this.setInfo()},h.prototype.setInfo=function(){var t=i.MarryModel.instance.getSkillLvById(this._id);if(0===t){if(this.levBox.visible=!1,this.iconImg.gray=!0,this.getIsTeShuSkill()&&!this.checkIsMarried())return;this.checkActive()?(this.iconImg.gray=!1,this.stateImg.visible=this.dotImg.visible=!0,this.stateImg.skin="common/txt_xq_kjh.png",this.playEff()):(this.stateImg.visible=this.dotImg.visible=!1,a.thisStop(this._eff))}else{this.levTxt.text=t.toString(),this.levBox.visible=!0,this.iconImg.gray=!1;var e=s.instance.getCfgByIdLv(this._id,t);s.instance.has(this._id,t+1)&&CommonUtil.conditionItemIsEnough(e[2])?(this.stateImg.skin="common/txt_xq_ksj.png",this.stateImg.visible=this.dotImg.visible=!0,this.playEff()):(this.stateImg.visible=this.dotImg.visible=!1,a.thisStop(this._eff))}},h.prototype.checkIsMarried=function(){return!!i.MarryModel.instance.isMarried||(this.stateImg.visible=this.dotImg.visible=!1,a.thisStop(this._eff),!1)},h.prototype.getIsTeShuSkill=function(){return-1!==s.instance.typeSkillIds.indexOf(this._id)},h.prototype.checkActive=function(){if(-1!==this._type){if(i.MarryModel.instance.ringLv>=s.instance.commonSkillActiveLv[this._type])return!0}else{var t=s.instance.typeSkillIds.indexOf(this._id),e=o.instance.getCfgById(75010)[1][t];if(0<CommonUtil.getPropCountById(e))return!0}return!1},h.prototype.clickHandler=function(){this._id&&WindowManager.instance.open(504,this._id)},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.setInfo()},h.prototype.playEff=function(){this._eff||(this._eff=CommonUtil.creatEff(this,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0)),this._eff.play(),this._eff.visible=!0},h.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this)},l=h,i.MarrySkillItem=l}(modules=modules||{}),function(t){var i,n,e,s,o,a,r,l;function h(){return null!==n&&n.apply(this,arguments)||this}i=t.marry||(t.marry={}),e=ui.MarrySquareItemUI,s=t.config.BlendCfg,o=t.notice.SystemNoticeManager,a=t.bag.BagUtil,r=t.common.PlatParams,n=e,__extends(h,n),h.prototype.initialize=function(){n.prototype.initialize.call(this),this.addQQBtn.visible=1===r.control.miniQQAddFriend},h.prototype.onEvt=function(){var e=this;n.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoClick(this.addQQBtn,this,function(){if(e._info){var t=e._info[0];window.miniQQGetOpenId(t[0],t[2])}})},h.prototype.setData=function(t){var e=(this._info=t)[0];this.icon.setInfo(e[6],e[3],e[7]),this.nameTxt.text=e[2],this.contentTxt.text=this._info[2],this.priceTxt.text=this._info[1].toString(),this.vipShowItem.setSVIPandVIP(e[5],e[4])},h.prototype.btnHandler=function(){if(PlayerModel.instance.actorId!==this._info[0][0])if(i.MarryModel.instance.isMarried)o.instance.addNotice("您已结缘，不可结缘",!0);else{var t=s.instance.getCfgById(75006)[1],e=0;if(PlayerModel.instance.occ!==this._info[0][3]&&(e=1),PlayerModel.instance.charm<t[e])return o.instance.addNotice("魅力值不足"+t[e]+"，不能结缘，天关协助可增加魅力值",!0),void a.openLackPropAlert(94440001,1);WindowManager.instance.open(483,this._info)}else o.instance.addNotice("不能和自己结缘",!0)},l=h,i.MarrySquareItem=l}(modules=modules||{}),function(t){var e,i,n,h,s,c,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.MarryTaskItem_1UI,h=t.config.MarryTaskCfg,s=t.common.ProgressBarCtrl,c=t.common.CustomClip,o=t.commonAlert.PropAlertUtil,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._bar1=new s(this.barImg_1,this.barImg_1.width,this.txt_1),this._bar2=new s(this.barImg_2,this.barImg_2.width,this.txt_2),this._eff=c.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._eff),this._eff.pos(this.getBtn.x-5,this.getBtn.y-10),this._eff.scale(.8,.8),this._eff.visible=!1},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.icon,this,this.iconHandler)},r.prototype.setData=function(t){var e=this._taskId=t[0],i=h.instance.getCfgById(e),n=i[3];this.nameTxt.text=n;var s=t[2][0],o=s[3],a=s[1],r=s[2];i[7]&&(o=i[7],a=s[1]>=s[3]?o:0,r=s[2]>=s[3]?o:0),this._bar1.maxValue=this._bar2.maxValue=o,this._bar1.value=a,this._bar2.value=r;var l=t[1];if(1===l)this.goBtn.visible=!0,this.getBtn.visible=this.gotImg.visible=!1,c.thisStop(this._eff);else if(2===l)this.getBtn.visible=!0,this.goBtn.visible=this.gotImg.visible=!1,c.thisPlay(this._eff);else{if(3!==l)throw new Error("状态错误! ---\x3e"+l);this.gotImg.visible=!0,this.goBtn.visible=this.getBtn.visible=!1,c.thisStop(this._eff)}},r.prototype.goBtnHandler=function(){var t=h.instance.getCfgById(this._taskId)[6];o.clickHandler(t)},r.prototype.getBtnHandler=function(){e.MarryCtrl.instance.drawMarryTask(this._taskId)},r.prototype.iconHandler=function(){var t=h.instance.getCfgById(this._taskId),e=CommonUtil.formatItemData(t[5]);WindowManager.instance.open(212,[e,"奖励预览"])},r.prototype.destroy=function(){this._bar1=this.destroyElement(this._bar1),this._bar2=this.destroyElement(this._bar2),this._eff=this.destroyElement(this._eff),i.prototype.destroy.call(this)},a=r,e.MarryTaskItem_1=a}(modules=modules||{}),function(t){var e,i,n,s,o,a,r,l;function h(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.MarryTaskItem_2UI,s=t.common.ProgressBarCtrl,o=t.common.CustomClip,a=t.config.MarryTaskCfg,r=t.commonAlert.PropAlertUtil,i=n,__extends(h,i),h.prototype.initialize=function(){i.prototype.initialize.call(this),this._bar=new s(this.barImg,this.barImg.width,this.barTxt),this._eff=o.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._eff),this._eff.pos(this.getBtn.x-5,this.getBtn.y-10),this._eff.scale(.8,.8),this._eff.visible=!1},h.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.goBtn,this,this.goBtnHandler),this.onAutoClick(this.getBtn,this,this.getBtnHandler),this.onAutoClick(this.icon,this,this.iconHandler)},h.prototype.setData=function(t){var e=this._taskId=t[0],i=a.instance.getCfgById(e)[3];this.tip_1.text=i;var n=t[2][0];this._bar.maxValue=n[3],this._bar.value=n[1]+n[2],this.mineTxt.text="我:"+n[1],this.threadTxt.text="对方:"+n[2];var s=t[1];if(1===s)this.goBtn.visible=!0,this.getBtn.visible=this.gotImg.visible=!1,o.thisStop(this._eff);else if(2===s)this.getBtn.visible=!0,this.goBtn.visible=this.gotImg.visible=!1,o.thisPlay(this._eff);else{if(3!==s)throw new Error("状态错误! ---\x3e"+s);this.gotImg.visible=!0,this.goBtn.visible=this.getBtn.visible=!1,o.thisStop(this._eff)}},h.prototype.goBtnHandler=function(){var t=a.instance.getCfgById(this._taskId)[6];r.clickHandler(t)},h.prototype.getBtnHandler=function(){e.MarryCtrl.instance.drawMarryTask(this._taskId)},h.prototype.iconHandler=function(){var t=a.instance.getCfgById(this._taskId),e=CommonUtil.formatItemData(t[5]);WindowManager.instance.open(212,[e,"奖励预览"])},h.prototype.destroy=function(){this._bar=this.destroyElement(this._bar),this._eff=this.destroyElement(this._eff),i.prototype.destroy.call(this)},l=h,e.MarryTaskItem_2=l}(modules=modules||{}),function(t){var a,e,i,r,l,h,c,n;function s(){return null!==e&&e.apply(this,arguments)||this}a=t.marry||(t.marry={}),i=ui.SbItemUI,r=t.config.MarryTokenCfg,l=t.config.MarryTokenLevelCfg,h=t.config.ItemMaterialCfg,c=t.config.MarryTokenGradeCfg,e=i,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("MARRY_TOKEN_UPDATE",this,this.update)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},s.prototype.setData=function(t){this._id=t},s.prototype.update=function(){var t=a.MarryModel.instance.getTokenInofById(this._id),e=t[1];if(this.wayTxt.fontSize=18,0===e){this.wayTxt.text="未激活",this.maskImg.visible=!0;var i=c.instance.getCfgByIdLv(this._id,0);if(CommonUtil.conditionItemIsEnough(i[2]))this.wayTxt.text="可激活",this.wayTxt.color="#00ad35",this.qualityImg.gray=this.icon.gray=!1,this.dotImg.visible=!0;else{this.qualityImg.gray=this.icon.gray=!0;var n=r.instance.getCfgById(this._id);this.wayTxt.text=n[1][0],this.dotImg.visible=!1}}else if(this.maskImg.visible=!1,this.qualityImg.gray=this.icon.gray=!1,this.wayTxt.text=t[1]+"级",this.wayTxt.fontSize=20,l.instance.has(this._id,t[1]+1)){var s=l.instance.getCfgByIdLv(this._id,t[1])[2];this.dotImg.visible=CommonUtil.conditionItemIsEnough(s)}else this.dotImg.visible=!1;this.nameTxt.text=CommonUtil.getNameByItemId(this._id),this.nameTxt.color=CommonUtil.getColorByQuality(CommonUtil.getItemQualityById(this._id)),this.icon.skin=CommonUtil.getIconById(this._id),this.qualityImg.skin="assets/icon/quality_bg/iconbg_"+CommonUtil.getItemQualityById(this._id)+".png";var o=h.instance.getItemCfgById(this._id)[20];0!=o&&o?(this.gradeImg.skin="common/xiyou"+o+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1},s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},n=s,a.MarryTokenFeedItem=n}(modules=modules||{}),function(t){var l,e,i,h,c,p,a,n;function s(){return null!==e&&e.apply(this,arguments)||this}l=t.marry||(t.marry={}),i=ui.SbItemUI,h=t.config.MarryTokenCfg,c=t.config.ItemMaterialCfg,p=t.config.MarryTokenGradeCfg,a=t.config.MarryTokenSkillCfg,e=i,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("MARRY_TOKEN_UPDATE",this,this.update),this.onAutoGlobalEvt("BAG_UPDATE",this,this.update)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},s.prototype.setData=function(t){this._id=t},s.prototype.update=function(t){if(null==t||0===t){var e=l.MarryModel.instance.getTokenInofById(this._id),i=e[1],n=h.instance.getCfgById(this._id),s=!(this.wayTxt.fontSize=18);if(0===i){this.maskImg.visible=!0,this.dotImg.visible=!1;var o=p.instance.getCfgByIdLv(this._id,0);CommonUtil.conditionItemIsEnough(o[2])?(this.wayTxt.text="可激活",this.wayTxt.color="#00ad35",this.qualityImg.gray=this.icon.gray=!1):(this.qualityImg.gray=this.icon.gray=!0,this.wayTxt.text=n[1][0])}else if(this.maskImg.visible=!1,this.qualityImg.gray=this.icon.gray=!1,this.wayTxt.text=e[2]+"阶",this.wayTxt.fontSize=20,p.instance.has(this._id,e[2]+1)){var a=p.instance.getCfgByIdLv(this._id,e[2])[2];s=CommonUtil.conditionItemIsEnough(a)}else s=!1;this.dotImg.visible=s||this.skillRP,this.nameTxt.text=CommonUtil.getNameByItemId(this._id),this.nameTxt.color=CommonUtil.getColorByQuality(CommonUtil.getItemQualityById(this._id)),this.icon.skin=CommonUtil.getIconById(this._id),this.qualityImg.skin="assets/icon/quality_bg/iconbg_"+CommonUtil.getItemQualityById(this._id)+".png";var r=c.instance.getItemCfgById(this._id)[20];0!=r&&r?(this.gradeImg.skin="common/xiyou"+r+".png",this.gradeImg.visible=!0):this.gradeImg.visible=!1,this.dotImg.visible=this.dotImg.visible||this.heartRP}},Object.defineProperty(s.prototype,"heartRP",{get:function(){return 2<=l.MarryModel.instance.getHeartFinishCount(this._id)&&l.MarryModel.instance.isMarried},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"skillRP",{get:function(){for(var t=p.instance.getSkillIdsById(this._id),e=0,i=t.length;e<i;e++){var n=t[e],s=l.MarryModel.instance.getTokenSkillLv(this._id,n);if(0===s){if(l.MarryModel.instance.getTokenInofById(this._id)[2]>=p.instance.getSkillActiveLv(n))return!0}else if(a.instance.has(n,s+1)){var o=a.instance.getCfgByIdLv(n,s);if(CommonUtil.conditionItemIsEnough(o[2]))return!0}}return!1},enumerable:!0,configurable:!0}),s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},n=s,l.MarryTokenRankItem=n}(modules=modules||{}),function(t){var i,e,n,s,o,a,r,l;function h(){return null!==e&&e.apply(this,arguments)||this}i=t.marry||(t.marry={}),n=ui.SkillIconUI,s=t.config.SkillPureCfg,o=t.config.MarryTokenSkillCfg,a=t.common.CustomClip,r=t.config.MarryTokenGradeCfg,e=n,__extends(h,e),h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.clickHandler)},h.prototype.setIds=function(t,e){this._skillId=e,this._id=t;var i=s.instance.getCfgById(e);this.iconImg.skin="assets/icon/skill/"+i[6]+".png",this.update()},h.prototype.update=function(){var t=i.MarryModel.instance.getTokenSkillLv(this._id,this._skillId);if(0===t)this.levBox.visible=!1,this.iconImg.gray=!0,i.MarryModel.instance.getTokenInofById(this._id)[2]>=r.instance.getSkillActiveLv(this._skillId)?(this.iconImg.gray=!1,this.stateImg.visible=this.dotImg.visible=!0,this.stateImg.skin="common/txt_xq_kjh.png",this.playEff()):this.stopState();else if(this.levTxt.text=t.toString(),this.levBox.visible=!0,this.iconImg.gray=!1,o.instance.has(this._skillId,t+1)){var e=o.instance.getCfgByIdLv(this._skillId,t);CommonUtil.conditionItemIsEnough(e[2])?(this.iconImg.gray=!1,this.stateImg.visible=this.dotImg.visible=!0,this.stateImg.skin="common/txt_xq_ksj.png",this.playEff()):this.stopState()}else this.stopState()},h.prototype.stopState=function(){this.stateImg.visible=this.dotImg.visible=!1,a.thisStop(this._eff)},h.prototype.playEff=function(){this._eff||(this._eff=CommonUtil.creatEff(this,"activityEnter",15),this._eff.scale(1.2,1.2,!0),this._eff.pos(-9,-9,!0)),this._eff.play(),this._eff.visible=!0},h.prototype.clickHandler=function(){WindowManager.instance.open(526,[this._id,this._skillId])},h.prototype.destroy=function(){this._eff=this.destroyElement(this._eff),e.prototype.destroy.call(this)},l=h,i.MarryTokenSkillIcon=l}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.marry||(t.marry={}),n=ui.ComposeAddItemUI,s=t.bag.BaseItem,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._item=new s,this.addChild(this._item),this._item.pos(10,8),this._item.needTip=!1,this.scale(.7,.7,!0)},a.prototype.setData=function(t){this._itemId=t,this._item.dataSource=[t,0,0,null],this.nameText.text=CommonUtil.getNameByItemId(t)},a.prototype.clickHandler=function(){i.prototype.clickHandler.call(this),e.MarryModel.instance.ringId=this._itemId,GlobalData.dispatcher.event("MARRY_RING_REPLACE"),WindowManager.instance.close(499)},a.prototype.destroy=function(){this._item=this.destroyElement(this._item),i.prototype.destroy.call(this)},o=a,e.RingReplaceItem=o}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._items=[],t._items=CommonUtil.getChildrenByNameSection(t,"item"),t}e=t.marry_arena||(t.marry_arena={}),i=ui.MarryArenaAwardItemUI,__extends(s,i),s.prototype.setData=function(t){if(i.prototype.setData.call(this,t),t){this.gradeTxt.text=t[1]+"每日奖励";var n=t[3]||[];this._items.forEach(function(t,e){var i=n[e];t.visible=!!i,i&&(t.dataSource=[i[0],i[1],0,null])})}},n=s,e.MarryArenaAwardDailyItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._items=[],t._items=CommonUtil.getChildrenByNameSection(t,"item"),t}e=t.marry_arena||(t.marry_arena={}),i=ui.MarryArenaAwardItemUI,__extends(s,i),s.prototype.setData=function(t){if(i.prototype.setData.call(this,t),t){var e=GlobalData.getConfig("couple_grade")[t[0]-2];this.gradeTxt.text=e[1]+"晋升奖励";var n=t[4]||[];this._items.forEach(function(t,e){var i=n[e];t.visible=!!i,i&&(t.dataSource=[i[0],i[1],0,null])})}},n=s,e.MarryArenaAwardGradeItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=i.call(this)||this;return t._model=e.MarryArenaModel.instance,t._items=[],t._items=CommonUtil.getChildrenByNameSection(t,"item"),t._model.on("awardShowingTab",t,t.onAwardShowingTab,!0),t}e=t.marry_arena||(t.marry_arena={}),i=ui.MarryArenaAwardItemUI,__extends(s,i),s.prototype.setData=function(t){i.prototype.setData.call(this,t),this.onAwardShowingTab()},s.prototype.onAwardShowingTab=function(){if(this._data){var n,t=this._model.awardShowingTab;if(1===t)n=this._data[4];else{if(2!==t)return;n=this._data[3]}n=n||[],this.gradeTxt.text=this._data[1]+"晋升奖励",this._items.forEach(function(t,e){var i=n[e];t.visible=!!i,i&&(t.dataSource=[i[0],i[1],0,null])})}},s.prototype.destroy=function(){this._model&&(this._model.off("awardShowingTab",this,this.onAwardShowingTab),this._model=null),i.prototype.destroy.call(this)},n=s,e.MarryArenaAwardItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t._bloodProgressCtrl=new n(t.proCtrlImg,93),t}e=t.marry_arena||(t.marry_arena={}),n=t.common.ProgressBarCtrl,i=ui.MarryArenaBattlePlayerInfoItemUI,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.initRole)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._role&&this._role.property.off("hp",this,this.onHpUpdate)},o.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this.headIcon.setInfo(t[4],t[2],t[3]),this.tipsText.text="战"+CommonUtil.bigNumToString(t[8],!0),this.initRole(),this._bloodProgressCtrl.value=this._bloodProgressCtrl.maxValue=1,this.onHpUpdate())},o.prototype.initRole=function(){if(!this._role){var t=this._data;if(!t)return;if(this._role=GameCenter.instance.getRole(t[0]),!this._role)return;this._role.property.on("hp",this,this.onHpUpdate),this.onHpUpdate()}},o.prototype.onHpUpdate=function(){if(this._role){var t=this._role.property.get("hp");this._bloodProgressCtrl.maxValue=t[1],this._bloodProgressCtrl.value=t[0],this.proCtrlImg.visible=0!=this._bloodProgressCtrl.value}},o.prototype.onOpened=function(){i.prototype.onOpened.call(this)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._bloodProgressCtrl=this.destroyElement(this._bloodProgressCtrl),i.prototype.destroy.call(this,t)},s=o,e.MarryArenaBattlePlayerItem=s}(modules=modules||{}),function(t){var e,s,i;function n(){var t=s.call(this)||this;return t._model=e.MarryArenaModel.instance,t._controller=e.MarryArenaCtrl.instance,t._headIcons=CommonUtil.getChildrenByNameSection(t,"headIcon"),t}e=t.marry_arena||(t.marry_arena={}),s=ui.MarryArenaEnemyItemUI,__extends(n,s),n.prototype.onEvt=function(){s.prototype.onEvt.call(this),this._model.onAutoEvt("canFightCount",this,this.onFightCount).onAutoEvt("buyFightCount",this,this.onFightCount),this.onAutoClick(this.fightBtn,this,this.onBtnClick).onAutoClick(this.headIcon1,this,this.onBtnClick).onAutoClick(this.headIcon2,this,this.onBtnClick)},n.prototype.onBtnClick=function(t){switch(t.currentTarget){case this.fightBtn:this.data&&this._controller.reqFight(this._data[0]);break;case this.headIcon1:this.showEnemyInfo(0);break;case this.headIcon2:this.showEnemyInfo(1)}},n.prototype.showEnemyInfo=function(t){if(this._data){var e=this._data[8];this._controller.showPlayerInfo(e[t])}},n.prototype.setData=function(t){s.prototype.setData.call(this,t);var e=this._data,n=e[8];this.totalFightTxt.text="综合战力:"+CommonUtil.bigNumToString(e[3]),this.winScoreTxt.text="胜:段位分+"+e[4]+",排行分+"+e[6],this.loseScoreTxt.text="败:段位分+"+e[5]+",排行分+"+e[7],this.onFightCount(),this._headIcons.forEach(function(t,e){var i=n[e];t.visible=!!i,i&&(t.setInfo(i[5],i[1],i[6]),t&&t.vipShowItem.setSVIPandVIP(i[4],i[3],i[8]))});var i=["marry_arena/icon_xljj_pt.png","marry_arena/icon_xljj_kn.png","marry_arena/icon_xljj_em.png","marry_arena/icon_xljj_ly.png"][e[1]-1];this.gradeImg.visible=!!i,i&&(this.gradeImg.skin=i)},n.prototype.onFightCount=function(){if(this._data){var t=this._data,e=(this._model.canFightCount,!!t[2]);this.fightBtn.visible=!e,this.winImg.visible=e}},i=n,e.MarryArenaEnemyItem=i}(modules=modules||{}),function(t){var e,n,i;function s(){var t=n.call(this)||this;return t._model=e.MarryArenaModel.instance,t.item.needTip=!1,t}e=t.marry_arena||(t.marry_arena={}),n=ui.MarryArenaRankItemUI,__extends(s,n),s.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.item,this,this.onAwardItemclick)},s.prototype.onAwardItemclick=function(t){if(this._data){var e=this._model.getRankAwardBy(this.getRank())[1].map(function(t){return[t[0],t[1],0,null]});WindowManager.instance.open(212,[e,"奖励预览",!0])}},s.prototype.getRank=function(){return this._data?"number"==typeof this._data?this._data:this._data[1]:0},s.prototype.setData=function(t){if(n.prototype.setData.call(this,t),t){"number"==typeof t?(this.playerInfoBox.visible=!1,this.empyTxt.visible=!0):(this.playerInfoBox.visible=!0,this.empyTxt.visible=!1,this.nameTxt1.text=t[2],this.nameTxt2.text=t[3],this.scoreTxt.text=t[4].toString());var e=this.getRank(),i=this._model.getRankAwardBy(e);this.item.dataSource=[i[2],1,0,null],CommonUtil.setRank(e,this.rankImg,this.commonRank,this.rankClip)}},i=s,e.MarryArenaRankItem=i}(modules=modules||{}),function(t){var e,n,i,s;function o(){return n.call(this)||this}e=t.teamBattle||(t.teamBattle={}),i=ui.ThreeWorldsRankItemUI,n=i,__extends(o,n),o.prototype.initialize=function(){n.prototype.initialize.call(this),this.nameTxt.y=35,this.nameTxt.x=200,this.damageTxt.x=450,this.damageTxt.y=36},o.prototype.setData=function(t){n.prototype.setData.call(this,t);var e=t,i=this.index+1;if(this.rankTxt.text="",1===i?this.rankImg.skin="common/zs_tongyong_7.png":2===i?this.rankImg.skin="common/zs_tongyong_8.png":3===i?this.rankImg.skin="common/zs_tongyong_9.png":(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.text=i.toString()),null==e)return this.notplaylisttxt.visible=!0,void(this.havePlayerBox.visible=!1);this.notplaylisttxt.visible=!1,this.havePlayerBox.visible=!0,this.nameTxt.text=e[2],this.damageTxt.text=e[4].toString()},s=o,e.TeamBattleRankItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.mission||(t.mission={}),n=t.teamBattle.TeamBattleRankItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.damageTxt.x=390,this.damageTxt.width=100,this.damageTxt.align="center"},o.prototype.setData=function(t){var e=t,i=this.index+1;if(this.rankTxt.text="",1===i?this.rankImg.skin="common/zs_tongyong_7.png":2===i?this.rankImg.skin="common/zs_tongyong_8.png":3===i?this.rankImg.skin="common/zs_tongyong_9.png":(this.rankImg.skin="common/dt_tongyong_15.png",this.rankTxt.text=i.toString()),null==e)return this.notplaylisttxt.visible=!0,void(this.havePlayerBox.visible=!1);this.notplaylisttxt.visible=!1,this.havePlayerBox.visible=!0,this.nameTxt.text=e[2],this.damageTxt.text=e[5].toString()},s=o,e.MissionRankItem=s}(modules=modules||{}),function(t){var e,i,n,s,o,a,r;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.monthCard||(t.monthCard={}),n=t.common.CustomClip,s=t.bag.BaseItem,o=t.config.PrivilegeCfg,a=t.notice.SystemNoticeManager,i=ui.MonthCardItemUI,__extends(l,i),l.prototype.initialize=function(){i.prototype.initialize.call(this),this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.getRewardBtn.x-5,this.getRewardBtn.y-5,.8);var t=o.instance.getCfgByType(101)[1][0][2],e=new s;e.dataSource=[90140001,t,null,null],this.goldImage.addChild(e),this.reddotImage.visible=!1},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.getRewardBtn,this,this.getReward)},l.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=t;this.descTxt.text="第"+(e[0]+1)+"天可领取",this.getRewardBtn.gray=!1,0===e[1]&&(this.getRewardBtn.visible=!0,this.recevedImage.visible=!1,this.getRewardBtn.gray=!0,n.thisStop(this._btnClip)),1==e[1]&&(this.getRewardBtn.visible=!0,this.recevedImage.visible=!1,n.thisPlay(this._btnClip)),2==e[1]&&(this.getRewardBtn.visible=!1,this.recevedImage.visible=!0,n.thisStop(this._btnClip))},l.prototype.getReward=function(){0===this._data[1]&&a.instance.addNotice("未达到领取天数",!0),1===this._data[1]&&(this.getRewardBtn.visible=!1,this.recevedImage.visible=!0,this.reddotImage.visible=!1,e.MonthCardCtrl.instance.getMonthCardReward(this._data[0]))},l.prototype.close=function(){i.prototype.close.call(this),n.thisStop(this._btnClip)},l.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this,t)},r=l,e.MonthCardItem=r}(modules=modules||{}),function(t){var d,e,s,o,y,a,g,f,i;function n(){return null!==e&&e.apply(this,arguments)||this}d=t.mysterious_store||(t.mysterious_store={}),s=t.player.PlayerModel,o=t.bag.BagModel,y=t.vip.VipModel,a=t.bag.BagUtil,g=t.common.CommonUtil,f=t.config.MysteriousMallCfg,e=ui.StoreItemUI,__extends(n,e),n.prototype.destroy=function(){this._boxArr=this.destroyElement(this._boxArr),e.prototype.destroy.call(this)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this._pos=[[60],[35,70],[13,41,69]],this._boxArr=[this.limit,this.price,this.nowPrice],g.setHTMLPro(this.zeKouHTml,"#ffffff","SimHei",25,"center","middle"),this.zeKouHTml.style.strokeColor="#610101",this.zeKouHTml.style.stroke=3,this.discountImg.visible=!1},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._value=t,this.updataView()},n.prototype.updataView=function(){var t=d.MysteriousStoreModel.instance.data;if(t){for(var e=t[0],i=0,n=e.length;i<n;i++)if(this._value[0]===e[i][0]){this._value[1]=e[i][1];break}var s=t[1],o=f.instance.getCfgByFestivalTypeAndId(d.MysteriousStoreModel.instance.festivalType,this._value[0]);if(o){if(this._cfg=o,d.MysteriousStoreModel.instance.isDrawDisCount)this.zeKouHTml.visible=this.zeKouImg.visible=!0,this.zeKouHTml.innerHTML=Math.floor(100*s)/10+"<span style='color:#ffffff;font-size: 22px'>折</span>",a=o[5],this.nowPriceImg.skin=this.priceImg.skin=g.getIconById(a[0],!0),this.priceTxt.text=a[1].toString(),this.nowPriceTxt.text=Math.floor(a[1]*s).toString();else{this.zeKouHTml.visible=this.zeKouImg.visible=!1;var a=o[5];this.nowPriceImg.skin=this.priceImg.skin=g.getIconById(a[0],!0),this.priceTxt.text=a[1].toString(),this.nowPriceTxt.text="?"}this.puchaseBtn.visible=!0;var r=o[4];this.item.dataSource=[r[0],r[1],0,null],this.itemName.text=this.item._nameTxt.text,this.itemName.color=g.getColorById(r[0]);var l=y.instance.vipLevel,h=o[9];l<h?(this.vipLv.text="SVIP"+h+"专享",this.vipBox.visible=!0,this.puchaseBtn.visible=!1):this.vipBox.visible=!1;var c=this._value[1],p=o[7],u=o[8];this.limit.visible=!0,0===p?this.limit.visible=this.maxCountTxt.visible=!1:(this.limitCount.text=c+"/"+u,u<=c?(this.limitCount.color="#E6372E",this.maxCountTxt.visible=!0,this.puchaseBtn.visible=l<h):(this.limitCount.color="#00AD35",this.maxCountTxt.visible=!1),1===p?this.limitTxt.text="本日限购:":2===p?this.limitTxt.text="本周限购:":3===p&&(this.limitTxt.text="活动时间内限购:")),this.underLine.width=this.priceImg.width+this.priceTxt.width}}},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.puchaseBtn,this,this.puchaseHandler),this.onAutoGlobalEvt("MYSTERIOUS_STORE_UPDATA",this,this.updataView),this.onAutoGlobalEvt("VIP_UPDATE",this,this.updataView)},n.prototype.puchaseHandler=function(){if(d.MysteriousStoreModel.instance.data)if(d.MysteriousStoreModel.instance.isDrawDisCount){var t=this._cfg[10],e=this._cfg[5][1]*d.MysteriousStoreModel.instance.data[1],i=this._cfg[5][0],n=s.instance.getCurrencyById(i);null==n&&(n=o.instance.getItemCountById(i)),e<=n?0==t?WindowManager.instance.open(1059,this._value):d.MysteriousStoreCtrl.instance.mysteriousMallBuy(this._value[0],1):90140001==i?g.goldNotEnoughAlert():a.openLackPropAlert(i,1)}else WindowManager.instance.open(989)},i=n,d.MysteriousStoreItem=i}(modules=modules||{}),function(n){var t,s,o,i,a,e;function r(){this._festivalType=n.festival.FestivalModel.instance.BarDayType}t=n.mysterious_store||(n.mysterious_store={}),s=n.config.FestivalOpenCfg,o=n.config.MysteriousMallCfg,i=n.redPoint.RedPointCtrl,a=n.funcOpen.FuncOpenModel,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"festivalType",{get:function(){return this._festivalType},enumerable:!0,configurable:!0}),r.prototype.getActionOpen=function(){var t=n.festival.FestivalModel.instance.info;for(var e in t)if(t[e]&&t[e][22])return!0;return!1},r.prototype.updateInfo=function(){var t=n.festival.FestivalModel.instance.info;for(var e in t)if(t[e]&&t[e][22]){this._festivalType=t[e][0];break}var i=n.festival.FestivalModel.instance.info[this.festivalType];n.festival.FestivalModel.instance.getHuoDongType(this.festivalType)&&i&&(this.data=i[22],this.endTm=s.instance.getCfgByType(this.festivalType)[2][1],this.setRP(),GlobalData.dispatcher.event("MYSTERIOUS_STORE_UPDATA"))},Object.defineProperty(r.prototype,"toDayEndTm",{get:function(){return 864e5-(GlobalData.serverTime-GlobalData.timeZoneOffset)%864e5},enumerable:!0,configurable:!0}),r.prototype.updateMysteriousMallBuyInfo=function(t){var e=t[1][2]&&!this.data[2];this.data=t[1],e?this.setRP():GlobalData.dispatcher.event("MYSTERIOUS_STORE_UPDATA")},r.prototype.getSortIdSort=function(t){var s=this;return t.sort(function(t,e){var i=o.instance.getCfgByFestivalTypeAndId(s.festivalType,t[0]),n=o.instance.getCfgByFestivalTypeAndId(s.festivalType,e[0]);return i[6]-n[6]})},Object.defineProperty(r.prototype,"disCount",{get:function(){return this.data?this.data[1]:(console.log("没有数据获取失败"),null)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isDrawDisCount",{get:function(){return this.data?this.data[2]:(console.log("没有数据获取失败"),!1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"day",{get:function(){return n.festival.FestivalModel.instance.info[this.festivalType][1]},enumerable:!0,configurable:!0}),r.prototype.setRP=function(){var t=a.instance.getFuncIsOpen(701),e=n.festival.FestivalModel.instance.getHuoDongType(this.festivalType);i.instance.setRPProperty("mysteriousStoreRP",!this.isDrawDisCount&&t&&e)},e=r,t.MysteriousStoreModel=e}(modules=modules||{}),function(t){var e,s,i;function n(t,e,i){var n=s.call(this)||this;return n.startY=0,n._hight=0,n._oneBoll=!0,n._twoBoll=!0,n._threeBoll=!0,n._htmlArr=i,n.innerHTML="",n.width=t,n.style.fontFamily="SimHei",n.style.align="left",n.style.fontSize=e,n}e=t.national_day_treasure||(t.national_day_treasure={}),s=laya.html.dom.HTMLDivElement,__extends(n,s),n.prototype.setText=function(t,e,i){i&&(this.innerHTML=i),this.startY=t,this._hight=e,this._oneBoll=!1,this._twoBoll=!1,this._threeBoll=!1,this.pos(0,this.startY),this.visible=!0},n.prototype.closeTimer=function(){this._oneBoll=!0,this._twoBoll=!0,this._threeBoll=!0},n.prototype.updateList=function(){this._threeBoll||(this.y-=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this.y<=this._hight-this.contextHeight&&!this._oneBoll&&(this._oneBoll=!0,GlobalData.dispatcher.event("NATIONALDAY_TREASURE__SHOWHTML")),this.y<=-this.contextHeight&&!this._twoBoll&&(this._twoBoll=!0,this._threeBoll=!0,this.visible=!1))},n.prototype.destroy=function(t){void 0===t&&(t=!0),Laya.timer.clear(this,this.updateList),s.prototype.destroy.call(this,t)},i=n,e.HtmlReward=i}(modules=modules||{}),function(a){var t,e,i;function r(){this.oneNum=0,this.twoNum=0,this.threeNum=0,this.id=0,this._xunBaoType=0,this._restTm=0,this._score=0,this._state=1,this.festivalType=1,this.dontShowTreasure=!1,this._myXunbaoNote=new Array,this._myNodeList=new Array,this._myNodeListByObjId=new Array,this._rewardList=new Array,this._xunBaoType=100+this.festivalType,this.getBlendCfgShuJu()}t=a.national_day_treasure||(a.national_day_treasure={}),e=a.config.TreasureCfg,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xunBaoType",{get:function(){return this._xunBaoType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xianyu",{get:function(){return a.bag.BagModel.instance.getItemCountById(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),r.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[1];if(a.festival.FestivalModel.instance.getHuoDongType(1)&&t){var e=t[16];if(e){var i=e[0];if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=r.instance._myXunbaoNote.length;o=0<o?o:0,r.instance._myXunbaoNote[o]=s}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MY")}}},r.prototype.callBakFunction=function(t){r.instance._restTm<GlobalData.serverTime?r.instance.dontShowTreasure&&t():t()},r.prototype.getSelfBroadcast=function(){var t=this._myXunbaoNote;return t&&100<t.length&&t.splice(0,t.length-100),t=t||[]},r.prototype.setRewardList=function(t){t&&(this._rewardList=t),this.setRP(),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},r.prototype.getInfoMyNodeList=function(t){if(t){this._myNodeList.length=0,this._myNodeListByObjId.length=0,this._myNodeList=new Array,this._myNodeListByObjId=new Array;for(var e=0;e<t.length;e++){var i=t[e],n=i[0];if(n){var s=n[0],o=n[2];this._myNodeList[o]=i,this._myNodeListByObjId[s]=i}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MYLIST")}},r.prototype.setRP=function(){},r.prototype.getgRadeRP=function(){if(0<this.xianyu)return!0;if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&1==e[1])return!0}return!1},r.prototype.getRewardStart=function(t){if(this.rewardList){var e=this._rewardList[t];return e?e[1]:0}},r.prototype.getgRade=function(){for(var t=null,e=null,i=0;i<this.rewardList.length;i++){var n=this.rewardList[i];if(n){var s=n[1];if(1==s)return[i,s];2==s?t=[i,s]:e=e||[i,s]}}return e||t||[0,0]},r.prototype.getBlendCfgShuJu=function(){this.oneNum=e.instance.getItemConditionByGrad(this.xunBaoType,0)[1],this.twoNum=e.instance.getItemConditionByGrad(this.xunBaoType,1)[1],this.threeNum=e.instance.getItemConditionByGrad(this.xunBaoType,2)[1];var t=e.instance.getItemConditionByGrad(this.xunBaoType,0);this.id=t[0]},i=r,t.NationalDayTreasureModel=i}(modules=modules||{}),function(t){var e,i;function n(){}e=t.newOfficialAccount||(t.newOfficialAccount={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getPublicNumReply=function(t){this.info=t,GlobalData.dispatcher.event("OFFICAL_ACCOUNT_STATUS_CHANGE")},i=n,e.NewOfficialAccountModel=i}(modules=modules||{}),function(i){var n,e,t;function s(){return e.call(this)||this}n=i.nothingness_world||(i.nothingness_world={}),e=ui.NothingnessWorldCharmMallItemUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#b15315","SimHei",22),this.continueBase1.scale(1,1,!0)},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.showUI),this.onAutoGlobalEvt("UPDATE_EMPTY_MONSTER_SKILL",this,this.showUI)},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this._dates=t,this.showUI()},s.prototype.showUI=function(){if(this._dates){var t=this._dates[4];this._cionNum=this._dates[2][1],this._itemId=this._dates[0],this._cionId=this._dates[2][0],this.img1.skin=CommonUtil.getIconById(this._dates[2][0],!0),this.nameText.color=CommonUtil.getColorByQuality(this._dates[6]),this.nameText.text=t,this.numText.text=""+this._cionNum,this.continueBase1.dataSourceDate=this._dates,this.continueBase1._nameTxt.visible=!1,this.continueBase1.needTip=!1;var e=PlayerModel.instance.getCurrencyById(this._cionId);null==e&&(e=i.bag.BagModel.instance.getItemCountById(this._cionId)),this.numText.color=e>=this._cionNum?"#3a5385":"#ff3e3e",this.StatementHTML.innerHTML=this._dates[3],this.img2.visible=n.NothingnessWorldModel.instance.isRecommendById(this._itemId)}},s.prototype.sureBtnHandler=function(){var t=PlayerModel.instance.getCurrencyById(this._cionId);null==t&&(t=i.bag.BagModel.instance.getItemCountById(this._cionId)),t>=this._cionNum?(console.log("购买协议"),n.NothingnessWorldCtrl.instance.buyEmptyItem(this._itemId)):90140001==this._cionId?CommonUtil.goldNotEnoughAlert():i.bag.BagUtil.openLackPropAlert(this._cionId,1)},t=s,n.NothingnessWorldCharmMallItem=t}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return i.call(this)||this}e=t.nothingness_world||(t.nothingness_world={}),n=t.common.ProgressBarCtrl,s=game.GameCenter,i=ui.NothingnessWorldCopyPlayerInfoItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,93)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this._npc&&this._npc.property.on("hp",this,this.updateHP),this.onAutoGlobalEvt("SCENE_ADD_HUMANS",this,this.updatePlayers)},a.prototype.offEvt=function(){i.prototype.offEvt.call(this),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1},a.prototype.updatePlayers=function(){this._dates?(this._roleId=this._dates[0],this.headIcon.setInfo(this._dates[3],this._dates[1],this._dates[4]),this.nameText.text=this._dates[2],this._dates[7]?(this._proCtrl.maxValue=1,this._proCtrl.value=0,this.overImg.visible=!0):this.updateHP(),this.img1.visible=this.text1.visible=!1,this.headIcon.gray=!1):console.log("虚无界 副本内 右边玩家信息为null")},a.prototype.updateHP=function(){if(this._roleId&&(this._npc=s.instance.getRole(this._roleId),this._npc&&(this._isAdd||(this._isAdd=!0,console.log("监听飘血事件~~~~~~:"+this._roleId),this._npc.property.on("hp",this,this.updateHP)),this.overImg.visible=!1,this._npc.property&&this._isAdd))){var t=this._npc.property.get("hp");this._proCtrl.maxValue=t[1],this._proCtrl.value=t[0],this.overImg.visible=t[0]<=0,t[0]}},a.prototype.setData=function(t){i.prototype.setData.call(this,t),this._npc&&this._npc.property.off("hp",this,this.updateHP),this._isAdd=!1,this._dates=t,Laya.timer.clearAll(this),this.updatePlayers()},a.prototype.destroy=function(){this._proCtrl&&(this._proCtrl.destroy(),this._proCtrl=null),i.prototype.destroy.call(this)},o=a,e.NothingnessWorldCopyPlayerInfoItem=o}(modules=modules||{}),function(t){var e,i,h,s,c,n;function o(){var t=i.call(this)||this;return t.height=122,t.width=100,t}e=t.nothingness_world||(t.nothingness_world={}),h=Laya.BlendMode,s=t.common.CommonUtil,c=t.common.CustomClip,i=ui.NothingnessWorldCopyRuneItemUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._nameTxt.visible=!1,this.rpImg.visible=!1,this.scale(.8,.8,!0),this.needTip=!0},Object.defineProperty(o.prototype,"isbtnClipIsPlayer",{set:function(t){this._btnClip&&(t?(this._btnClip.visible=!0,this._btnClip.play()):(this._btnClip.visible=!1,this._btnClip.stop()))},enumerable:!0,configurable:!0}),o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._btnClip&&this._btnClip.visible&&this._btnClip.play()},Object.defineProperty(o.prototype,"clip",{get:function(){return this._btnClip},enumerable:!0,configurable:!0}),o.prototype.setCustomClip=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=!1;if(t&&0!=t){this._btnClip&&(this._btnClip.removeSelf(),this._btnClip.destroy(),this._btnClip=null);var n="item_effect"+t,s=new Array,o=this.getCustomClipLeng(t);if(0!=o){if(3==t)for(var a=0;a<o;a++){var r=n+"/"+a+".jpg";s.push(r)}else for(a=0;a<o;a++)r=n+"/"+a+".png",s.push(r);if(this._btnClip?(this._btnClip.stop(),this._btnClip.visible=!1,this._btnClip.skin="assets/effect/"+n+".atlas",this._btnClip.frameUrls=s):(this._btnClip=new c,3===t||(this._btnClip.blendMode=h.NORMAL),this._btnClip.scale(1,1),this.addChildAt(this._btnClip,3),this._btnClip.skin="assets/effect/"+n+".atlas",this._btnClip.frameUrls=s,this._btnClip.durationFrame=6,this._btnClip.loop=!0,this._btnClip.pos(-14,-22),this._btnClip.visible=!1),1==e){var l=this.getChildIndex(this.frameImg)+1;this.addChildAt(this._btnClip,l)}else l=this.getChildIndex(this._icon)-1,this.addChildAt(this._btnClip,l);this.setPosByCustomClipId(t),i=!0}}return i},o.prototype.setPosByCustomClipId=function(t){if(this._btnClip)switch(t){case 1:this._btnClip.pos(-10,-10);break;case 2:this._btnClip.pos(-14,-22);break;case 3:this._btnClip.pos(-75,-75);break;case 4:case 5:case 6:this._btnClip.pos(2,2);break;case 7:this._btnClip.pos(-20,-20);break;case 8:this._btnClip.pos(-10,-10)}},o.prototype.getCustomClipLeng=function(t){var e=0;switch(t){case 1:case 2:case 3:e=16;break;case 4:case 5:case 6:e=6;break;case 7:case 8:e=16}return e},o.prototype.clickHandler=function(){if(this.needTip&&(console.log("使用符咒"),this.itemData)){var t=this.itemData[0];e.NothingnessWorldCtrl.instance.useEmptyItem(t)}},Object.defineProperty(o.prototype,"dataSourceDate",{set:function(t){this.setDataSource(t)},enumerable:!0,configurable:!0}),o.prototype.setData=function(t){i.prototype.setData.call(this,t),this.setDataSource(t)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this.removeSelf(),i.prototype.destroy.call(this,t)},o.prototype.setDataSource=function(t){if(this.rpImg.visible=!1,null==t)this._qualityBg.skin="",this._icon.skin="",this._numTxt.text="",this._nameTxt.text="",this._qualityBg.skin="assets/icon/quality_bg/iconbg_0.png",this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1),this.needTip=!1;else{var e=(this._itemData=t)[6];this._qualityBg.skin="assets/icon/quality_bg/iconbg_"+e+".png",this._icon.skin="assets/icon/ui/empty_mall/"+t[5]+".png",this._numTxt.text="",this._nameTxt.color=s.getColorByQuality(e),this._nameTxt.text=t[4];var i=t[7],n=t[8];this.isbtnClipIsPlayer=this.setCustomClip(i,n),this._icon.size(90,90),this._icon.pos(4,4,!0),this.needTip=!0,this._nameTxt.visible=!0}},Object.defineProperty(o.prototype,"itemData",{get:function(){return this._itemData},enumerable:!0,configurable:!0}),o.prototype.setNum=function(t,e){void 0===t&&(t=""),void 0===e&&(e="#ffffff"),this._numTxt.visible=!0,this._numTxt.text=t,this._numTxt.color=e},o.prototype.numPos=function(t,e,i,n,s){void 0===n&&(n=null),void 0===s&&(s=null),this._numTxt.x=t,this._numTxt.y=e,this._numTxt.fontSize=i,n&&(this._numTxt.align=n),null!=s&&(this._numTxt.stroke=s)},Object.defineProperty(o.prototype,"nameVisible",{set:function(t){this._nameTxt.visible=t},enumerable:!0,configurable:!0}),o.prototype.namePos=function(t,e,i){this._nameTxt.x=t,this._nameTxt.y=e,this._nameTxt.fontSize=i},n=o,e.NothingnessWorldCopyRuneItem=n}(modules=modules||{}),function(r){var t,e;function o(){this.charmEndTime=0,this.myWraBandRank=0,this.currLv=0,this.doneWave=0,this.doneWave1=1,this.maxLevelNum=0,this.maxNumWarband=0,this.cDayCopy=0,this.tick=0,this.level=0,this.leftTick=0,this.emptyer=[],this.skillList=[],this.teamPatternRecordNum=this.teamRecordNum=this.personalRecordNum=0,this._nowChallengeNum=0,this.maxChallengeNum=r.config.EmptyBlendCfg.instance.getEmptyBlendCfgById(1)[1][0],this.maxNumWarband=r.config.EmptyBlendCfg.instance.getEmptyBlendCfgById(4)[1][0],this.maxLevelNum=r.config.SceneEmptyCfg.instance.cfgs.length,this._nowIndex=0,this._nowIndex2=0,this.personFireListRank=new Array,this.warbandFireListRank=new Array,this.personFireListRankTable={},this.warbandFireListRankTable={},this.personFireListRankTableByRank={},this.warbandFireListRankTableByRank={},this.broadcastList=[],this.runeList=new Array,this.skillIdToTable={};for(var t=r.config.EmptyBlendCfg.instance.getEmptyBlendCfgById(9)[2],e=0,i=t.length;e<i;e++){var n=t[e].substr(1,t[e].length-2).split("#"),s=parseInt(n[0]);this.skillIdToTable[s]||(this.skillIdToTable[s]=new Array);for(var o=0;o<n.length;o++){var a=parseInt(n[o]);-1===this.skillIdToTable[s].indexOf(a)&&this.skillIdToTable[s].push(a)}}}t=r.nothingness_world||(r.nothingness_world={}),Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.clearDate=function(){this.tick=0,this.level=0,this.leftTick=0},o.prototype.isRecommendById=function(t){for(var e=0;e<o.instance.skillList.length;e++){var i=o.instance.skillList[e],n=this.skillIdToTable[i];if(n)for(var s=0;s<n.length;s++)if(t===n[s])return!0}return!1},Object.defineProperty(o.prototype,"isMaxWave",{get:function(){return this.doneWave>=this.maxLevelNum},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nowChallengeNum",{get:function(){return this._nowChallengeNum},set:function(t){this._nowChallengeNum=t,this.setRP()},enumerable:!0,configurable:!0}),o.prototype.setPersonFireListRank=function(t){this.personFireListRank=t,this.personFireListRankTable={},this.personFireListRankTableByRank={};for(var e=0;e<t.length;e++){var i=t[e];this.personFireListRankTable[i[0]]=i,this.personFireListRankTableByRank[i[6]]=i}},o.prototype.setWarbandFireListRank=function(t){this.warbandFireListRank=t,this.warbandFireListRankTable={},this.warbandFireListRankTableByRank={};for(var e=this.myWraBandRank=0;e<t.length;e++){var i=t[e],n=i[0],s=i[4];this.warbandFireListRankTable[n]=i,this.warbandFireListRankTableByRank[s]=i,n===r.warband.WarbandModel.instance.warbandId&&(this.myWraBandRank=s)}},o.prototype.getEmptyPersonRankReply=function(t){this.setPersonFireListRank(t[0]),this.personalRecordNum=t[1],this.teamRecordNum=t[2],this.teamPatternRecordNum=t[3],GlobalData.dispatcher.event("NOTHINGNESS_CONTENTION_REPLY_RANK")},o.prototype.getEmptyWarbandRankReply=function(t){this.setWarbandFireListRank(t[0]),this.cDayCopy=t[1],GlobalData.dispatcher.event("NOTHINGNESS_CONTENTION_REPLY_RANK")},o.prototype.getEmptyItemReply=function(t){this.runeList=t[0],GlobalData.dispatcher.event("GET_EMPTY_ITEM_REPLY")},o.prototype.getEmptyInfoReply=function(t){if(t){var e=t[0];e&&(this.nowChallengeNum=e[1])}GlobalData.dispatcher.event("GET_EMPTY_INFO_REPLY")},o.prototype.updateEmptyerInfo=function(t){this.emptyer=t[0],GlobalData.dispatcher.event("UPDATE_EMPTYER_INFO")},o.prototype.updateEmptyMonsterSkill=function(t){this.skillList=t[0],GlobalData.dispatcher.event("UPDATE_EMPTY_MONSTER_SKILL")},o.prototype.setRP=function(){var t=r.funcOpen.FuncOpenModel.instance.getFuncIsOpen(633);r.redPoint.RedPointCtrl.instance.setRPProperty("nothingnessWorldRP",0<this.nowChallengeNum&&t)},o.prototype.addBroadCast=function(t){WindowManager.instance.isOpened(964)?this.broadcastList.push(t):(this.broadcastList.push(t),WindowManager.instance.open(964))},o.prototype.getCharmEndTime=function(t){0<t[0].length&&(this.charmEndTime=t[0][0][1]),GlobalData.dispatcher.event("CHARM_TIPS")},e=o,t.NothingnessWorldModel=e}(modules=modules||{}),function(t){var a,r,l,e;function i(){return null!==r&&r.apply(this,arguments)||this}a=t.nothingness_world||(t.nothingness_world={}),l=t.config.EmptyPersonRewardCfg,r=ui.NothingnessWorldRankItemUI,__extends(i,r),i.prototype.setData=function(t){r.prototype.setData.call(this,t);var e="",i=0,n=0,s=a.NothingnessWorldModel.instance.personFireListRankTableByRank[t],o=l.instance.getCfgByRank(t);o&&(n=o[2]),s?(e=s[2],i=s[5],this.notplaylisttxt.visible=!1,this.scoreTxt.visible=this.nameTxt.visible=!0):(this.notplaylisttxt.visible=!0,this.scoreTxt.visible=this.nameTxt.visible=!1),this.scoreTxt.text=i+"层",this.nameTxt.text=e,this.notplaylisttxt.text="本周累计通过"+n+"层可上榜",1===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_first.png"):2===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_second.png"):3===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_third.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+t)},e=i,a.NothingnessWorldRankItem=e}(modules=modules||{}),function(t){var a,r,l,e;function i(){return null!==r&&r.apply(this,arguments)||this}a=t.nothingness_world||(t.nothingness_world={}),l=t.config.EmptyWarbandRewardCfg,r=ui.NothingnessWorldRankItemUI,__extends(i,r),i.prototype.setData=function(t){r.prototype.setData.call(this,t);var e="",i=0,n=0,s=a.NothingnessWorldModel.instance.warbandFireListRankTableByRank[t],o=l.instance.getCfgByRank(t);o&&(n=o[2]),s?(e=s[2],i=s[3],this.notplaylisttxt.visible=!1,this.scoreTxt.visible=this.nameTxt.visible=!0):(this.notplaylisttxt.visible=!0,this.scoreTxt.visible=this.nameTxt.visible=!1),this.scoreTxt.text=i+"层",this.nameTxt.text=e,this.notplaylisttxt.text="通过"+n+"层可上榜",1===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_first.png"):2===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_second.png"):3===t?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_third.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+t)},e=i,a.NothingnessWorldRankItem1=e}(modules=modules||{}),function(t){var l,h,e;function i(){return h.call(this)||this}l=t.nothingness_world||(t.nothingness_world={}),h=ui.FireContentionRankRewardItemUI,__extends(i,h),i.prototype.setData=function(t){var e;h.prototype.setData.call(this,t);var i=new Array;if(0===l.NothingnessWorldModel.instance._nowIndex2?(e=t[0],i=t[1]):1===l.NothingnessWorldModel.instance._nowIndex2&&(e=t[0],i=t[1]),e){1===e[0]&&1===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_7.png"):2===e[0]&&2===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_8.png"):3===e[0]&&3===e[1]?(this.rankText.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/zs_tongyong_9.png"):(this.rankImg.visible=!1,this.rankText.visible=!0,e[0]===e[1]?this.rankText.text="第"+e[0]+"名":this.rankText.text="第"+e[0]+"-"+e[1]+"名");for(var n=[this.continueBase1,this.continueBase2,this.continueBase3,this.continueBase4],s=0;s<n.length;s++)(a=n[s]).visible=!1;var o=[];for(s=0;s<i.length;s+=2){var a=i[s],r=i[s+1];o.push([a,r,0,null])}for(s=0;s<o.length;s++)a=o[s],(r=n[s])&&a&&(r.dataSource=a,r.visible=!0)}},e=i,l.NothingnessWorldRankRewardItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){this._status=-1}e=t.officialAccount||(t.officialAccount={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},set:function(t){this._status=t,i.instance.setRPProperty("lyOfficialAccountRP",0===t),GlobalData.dispatcher.event("OFFICAL_ACCOUNT_STATUS_CHANGE")},enumerable:!0,configurable:!0}),n=s,e.OfficialAccountModel=n}(modules=modules||{}),function(o){var t,e,i;function n(){this.isShow=!1,this.allNum=0,this.allNum1=0,this.gradeArr=[];for(var t=11;t<14;++t)this.gradeArr.push(t);this.idArr=new Array(this.gradeArr.length),this.stateArr=new Array(this.gradeArr.length);var e=o.config.RechargeCfg.instance.getRecharCfgByIndex(11)[2],i=o.config.RechargeCfg.instance.getRecharCfgByIndex(12)[2],n=o.config.RechargeCfg.instance.getRecharCfgByIndex(13)[2];this.allNum=e+i+n,this.allNum1=o.config.RechargeCfg.instance.getRecharCfgByIndex(14)[2]}t=o.one_buy||(o.one_buy={}),e=o.funcOpen.FuncOpenModel,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateInfo=function(t){var e=0;this.isShow=!1;for(var i=0;i<t.length;++i){var n=t[i][1],s=this.gradeArr.indexOf(n);this.idArr[s]=t[i][0],this.stateArr[s]=t[i][2],0!=t[i][2]&&null!=o.config.RechargeCfg.instance.getRecharCfgByIndex(n)&&(e+=o.config.RechargeCfg.instance.getRecharCfgByIndex(n)[2])}this.setPayRewardRP(),this.isShow=this.allNum-e<this.allNum1,GlobalData.dispatcher.event("ONEBUY_UPDATE")},n.prototype.setPayRewardRP=function(){var t=this.getgRadeRP();o.redPoint.RedPointCtrl.instance.setRPProperty("oneBuyRP",t)},n.prototype.getgRadeRP=function(){if(!e.instance.getFuncNeedShow(231))return!1;for(var t=0;t<this.stateArr.length;t++)if(1==this.stateArr[t])return!0;return!1},i=n,t.OneBuyModel=i}(modules=modules||{}),function(t){var e,r,i,l,h,n,s,o;function a(){var t=null!==r&&r.apply(this,arguments)||this;return t._wid=95,t}e=t.onlineGift||(t.onlineGift={}),i=t.sign.SignItem,l=t.config.OnlineGiftCfg,h=t.common.CustomClip,n=t.notice.SystemNoticeManager,s=t.config.ErrorCodeCfg,r=ui.OnLineGiftItemUI,__extends(a,r),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._obtainClip=this.destroyElement(this._obtainClip),this._itemArray=this.destroyElement(this._itemArray),this._itemCfg=null,r.prototype.destroy.call(this,t)},a.prototype.initialize=function(){r.prototype.initialize.call(this),this._itemArray=new Array,this._obtainClip=h.create("assets/effect/btn_light.atlas","btn_light",16),this._obtainClip.setProperty(this,this.getBtn.x-5,this.getBtn.y-9),this.createItem()},a.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.gainHandler),this.onAutoGlobalEvt("AWARD_REPLY",this,this.awardReply)},a.prototype.awardReply=function(){0==e.OnlineGiftModel.instance.AwardReply&&n.instance.addNotice(s.instance.getErrorCfgById(20005)[1],!1)},a.prototype.updatetime=function(){var t=CommonUtil.timeStampToHHMMSS(this._obtaintime);this.time.visible=this._obtaintime>=GlobalData.serverTime,this.time.text="倒计时 "+t},a.prototype.createItem=function(){for(var t=0;t<3;t++){var e=new i;e.scale(.8,.8,!0),e.visible=!1,e.nameVisible=!1,this.addChild(e),this._itemArray.push(e)}},a.prototype.setData=function(t){r.prototype.setData.call(this,t),this._itemCfg=t;var e=this._itemCfg[1];this.getBtn.visible=this.receiveImg.visible=!0,0==e?(this.receiveImg.skin="common/txt_commmon_wdc.png",h.thisStop(this._obtainClip),this.getBtn.visible=!1):1==e?(h.thisPlay(this._obtainClip),this.receiveImg.visible=!1):(this.receiveImg.skin="common/txt_commmon_ylq.png",h.thisStop(this._obtainClip),this.getBtn.visible=!1),this._obtaintime=this._itemCfg[2],this._obtaintime>GlobalData.serverTime?(this.updatetime(),this.time.visible=!0,Laya.timer.loop(1e3,this,this.updatetime)):(this.time.visible=!1,Laya.timer.clear(this,this.updatetime)),this._itemId=this._itemCfg[0];var i=l.instance.getCfgsById(this._itemId);this.tips.text=i[3]/6e4+"分钟",this.followTip.pos(this.tips.x+this.tips.width,this.tips.y);for(var n=i[4],s=.5*n.length,o=0;o<3;o++){var a=this._itemArray[o];o<s?(a.dataSource=[n[2*o],n[2*o+1],0,null],a.pos(30+this._wid*o,52),a.visible=!0):a.visible=!1}},a.prototype.gainHandler=function(){switch(this._itemCfg[1]){case 1:Channel.instance.publish(2098553,[this._itemId]);break;case 0:CommonUtil.noticeError(20004)}},a.prototype.close=function(){r.prototype.close.call(this),h.thisStop(this._obtainClip),Laya.timer.clear(this,this.updatetime)},o=a,e.OnlineGiftItem=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){this._onlineDic=new i}e=t.onlineGift||(t.onlineGift={}),i=laya.utils.Dictionary,n=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"AwardReply",{get:function(){return this.awardReply},set:function(t){this.awardReply=t,GlobalData.dispatcher.event("AWARD_REPLY")},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"UpdateRewardReply",{get:function(){return this.updateRewardReply},set:function(t){this.updateRewardReply=t,this.updateRewardReply1=t;for(var e=0;e<this.updateRewardReply.length;e++){var i=this.updateRewardReply[e];i[2]+=GlobalData.serverTime,this._onlineDic.set(i[0],i)}this.setDotDic(),GlobalData.dispatcher.event("UPDATE_ONLINE_REWARD_REPLY")},enumerable:!0,configurable:!0}),o.prototype.getOnlineRewardDic=function(){if(null!=this._onlineDic)return this._onlineDic},o.prototype.setDotDic=function(){for(var t=0;t<this.updateRewardReply.length;t++){if(1==this.updateRewardReply[t][1]){this._redDot=!0;break}this._redDot=!1}n.instance.setRPProperty("onlineGiftRP",this._redDot)},o.prototype.isOver=function(){if(this.updateRewardReply1){for(var t=0;t<this.updateRewardReply1.length;t++){var e=this.updateRewardReply1[t];if(e){var i=e[1];if(0==i||1==i)return!1}}return!0}return!0},o.prototype.getTruerReward=function(){if(this.updateRewardReply1){for(var t=0;t<2;t++){var e=1;0==t?e=1:1==t&&(e=0);for(var i=0;i<this.updateRewardReply1.length;i++){var n=this.updateRewardReply1[i];if(n&&n[1]==e)return n}}return null}},s=o,e.OnlineGiftModel=s}(modules=modules||{}),function(t){var n,e,i,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}n=t.openAward||(t.openAward={}),i=ui.OpenAwardItemUI,s=t.config.OpenAwardCfg,e=i,__extends(a,e),a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("OPEN_AWARD_UPDATE",this,this.updateView)},a.prototype.setData=function(t){this._id=t,this.updateView()},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.updateView()},a.prototype.updateView=function(){var t=s.instance.getCfgById(this._id),e=n.OpenAwardModel.instance.getStateById(this._id);this.stateImg.visible=!!e;var i=t[8];this.iconImg.skin="assets/icon/ui/open_award/"+i+".jpg"},a.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},o=a,n.OpenAwardItem=o}(modules=modules||{}),function(t){var o,a,e,r,i;function n(){var t=a.call(this)||this;return CommonUtil.setHTMLPro(t.tipHtml,"#344c6f","SimHei",24),t}o=t.openChallenge||(t.openChallenge={}),e=ui.openChallengeItemUI,r=t.config.SceneCopyOpenBossCfg,a=e,__extends(n,a),n.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoGlobalEvt("OPEN_CHALLENGE_CHOOSE",this,this.updateChooseCase),this.onAutoGlobalEvt("OPEN_CHALLENGE_INFO_UPDATE",this,this.updateInfo)},n.prototype.onOpened=function(){a.prototype.onOpened.call(this),this.updateChooseCase(),this.updateLevelShow(),this.levelTxt.text="第"+this._localLevel+"关",this.tipHtml.innerHTML="推荐战力：<span style='color: #168a17'>"+CommonUtil.bigNumToString(r.instance.getFightByLevel(this._localLevel+o.OpenChallengeModel.instance.minLevel-1))+"</span>"},n.prototype.setData=function(t){if(a.prototype.setData.call(this,t),t){this._localLevel=t[0]+1;var e=t[1].length;this.box1.visible=!1,this.box2.visible=!1,this.box3.visible=!1,this.box4.visible=!1;for(var i=[this.box1,this.box2,this.box3,this.box4],n=0,s=i.length-e;n<e;n++,s++)i[s].visible=!0,i[s].dataSource=t[1][n];this.bossName.text=r.instance.getBossNameByLevel(this._localLevel+o.OpenChallengeModel.instance.minLevel-1)}},n.prototype.clickHandler=function(){o.OpenChallengeModel.instance.chooseLevel=this._localLevel,GlobalData.dispatcher.event("OPEN_CHALLENGE_CHOOSE")},n.prototype.updateInfo=function(){this.updateLevelShow()},n.prototype.updateChooseCase=function(){this._localLevel==o.OpenChallengeModel.instance.chooseLevel?this.unchooseImg.visible=!1:this.unchooseImg.visible||(this.unchooseImg.visible=!0)},n.prototype.updateLevelShow=function(){this.killImg.visible=!1,this.unlockImg.visible=!1,this.curlevelImg.visible=!1,this._localLevel==o.OpenChallengeModel.instance.curLevel?this.curlevelImg.visible=!0:this._localLevel<o.OpenChallengeModel.instance.curLevel?this.killImg.visible=!0:this._localLevel>o.OpenChallengeModel.instance.curLevel&&(this.unlockImg.visible=!0)},i=n,o.OpenChallengeItem=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.outside_show_dungeon||(t.outside_show_dungeon={}),n=t.config.MonsterResCfg,i=ui.OutsideShowDungeonBossItemUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateBoss)},o.prototype.updateBoss=function(){if(this.cfg){Laya.timer.clear(this,this.loopHandler);var t=!1,e=DungeonModel.instance.getBossInfoById(this.cfg[4]);e&&e[2][0]?(this.times.color="#ff3e3e",t=!0):(this.times.color="#168a17",this.times.text="已刷新"),t&&(Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler())}},o.prototype.loopHandler=function(){var t=DungeonModel.instance.getBossInfoById(this.cfg[4]);t&&t[2][0]&&(this.times.text=CommonUtil.timeStampToHHMMSS(t[2][2]))},o.prototype.setData=function(t){this.cfg=t;var e=this.cfg[4],i=n.instance.getCfgById(e);this.bossHead.skin="assets/icon/monster/"+(i[3]||310001)+".png",this.updateBoss()},o.prototype.close=function(){Laya.timer.clear(this,this.loopHandler),i.prototype.close.call(this)},s=o,e.OutsideShowDungeonBossItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){this.minNum=0,this.openNum=0,this.exValue=0,this.minNum=t.config.BlendCfg.instance.getCfgById(97003)[1][0],this.openNum=t.config.BlendCfg.instance.getCfgById(97005)[1][0]}e=t.outside_show_dungeon||(t.outside_show_dungeon={}),i=t.bag.BagModel,n=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.updateBag=function(t){0===t&&this.autoUse&&0===i.instance.getItemCountById(e.OutsideShowDungeonUtil.diItemId)&&e.OutsideShowDungeonCtrl.instance.setAutoUserShowEquip(!1)},o.prototype.setRP=function(){n.instance.setRPProperty("outsideShowDungeonRP",0<this.exValue&&this.exValue>=this.minNum+this.openNum)},s=o,e.OutsideShowDungeonModel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.outside_show_dungeon||(t.outside_show_dungeon={}),i=ui.OutsideShowDungeonBtnItemUI,__extends(s,i),s.getSelectType=function(){return s._selectType},s.setSelectType=function(t){t!==s._selectType&&(this._selectType=t,GlobalData.dispatcher.event("OUTSIDE_SHOW_BTN_CLICL"))},s.prototype.initialize=function(){i.prototype.initialize.call(this),this.strRes=["xqj","lcj","srj","xyj","zpj","zwj"]},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.bg,this,this.btnHanlder),this.onAutoGlobalEvt("OUTSIDE_SHOW_BTN_CLICL",this,this.updataView)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this.cfg=t,this.type=t[0],this.bgFrame.skin="show_equip/selected_wxyb_"+this.strRes[this.index]+".png",this.bg.skin="show_equip/icon_wxyb_"+this.strRes[this.index]+".png",this.updataView()},s.prototype.updataView=function(){this.bgFrame.visible=this.type===s.getSelectType()},s.prototype.btnHanlder=function(){this.type!==s.getSelectType()&&(t.showEquip.ShowEquipModel.instance.IsShowNoticeTipsByType(this.type)||s.setSelectType(this.type))},s._selectType=-1,n=s,e.OutsideShowDungeonBtnItem=n}(modules=modules||{}),function(s){var o,a,t;function e(){return a.call(this)||this}o=s.outside_show_dungeon||(s.outside_show_dungeon={}),a=ui.OutsideShowDungeonItemUI,__extends(e,a),e.prototype.initialize=function(){a.prototype.initialize.call(this),this.bossItems=[this.boss1,this.boss2,this.boss3,this.boss4],this.awards=[this.award1,this.award2,this.award3,this.award4]},e.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHanlder)},e.prototype.setData=function(t){a.prototype.setData.call(this,t),this.layers=t,o.OutsideShowDungeonBtnItem.getSelectType(),this.cfgs=s.config.SceneShowEquipBossCfg.instance.getLayerCfs(this.layers);for(var e=this.cfgs[0][5],i=this.cfgs[0][6],n=0;n<4;n++)this.awards[n].dataSource=[e[n],1,0,null],this.bossItems[n].setData(this.cfgs[n]);i?(this.pkImg.skin="common/txtbg_common_txtbg2.png",this.pkMsc.text="混乱"):(this.pkImg.skin="common/txtbg_common_txtbg4.png",this.pkMsc.text="和平"),this.lvTxt.text=this.cfgs[0][2],this.fightMsc.text="推荐战力："+CommonUtil.bigNumToString(this.cfgs[0][8])},e.prototype.btnHanlder=function(){var t=this.cfgs[0][1];s.common_group.CommonGroupUtil.OldCopyTeamIsOtherTeam1(7,t)},t=e,o.OutsideShowDungeonItem=t}(modules=modules||{}),function(n){var s,o,a,r,l,h,t;function c(){}s=n.outside_show_dungeon||(n.outside_show_dungeon={}),o=n.config.BlendCfg,a=n.bag.BagModel,r=n.bag.BagUtil,l=n.notice.SystemNoticeManager,h=n.config.ShowEquipCfg,c.getType=function(t){return(t/1e5>>0)%100-11},c.typeStrs=function(t){return o.instance.getCfgById(94006)[2][t-1]},Object.defineProperty(c,"dailMax",{get:function(){return o.instance.getCfgById(97001)[1][0]},enumerable:!0,configurable:!0}),c.getTypeName=function(t){for(var e=h.instance.cfgs,i=0,n=0,s=e.length;n<s;n++)if(e[n][0]===t){i=n;break}return c.typeNames[i]},c.addSpirit=function(){var t=n.halo.HaloModel.instance.getDreamlandStrength(c.dailMax),e=c.diItemId;if(0<a.instance.getItemCountById(e)){var i=t-s.OutsideShowDungeonModel.instance.exValue;0==i?l.instance.addNotice("当前异宝值已满，无需使用异宝丹",!0):i<o.instance.getCfgById(97002)[1][0]?CommonUtil.alert("提示","使用后异宝溢出，溢出部分不保留，是否确定？",[Handler.create(s.OutsideShowDungeonCtrl.instance,s.OutsideShowDungeonCtrl.instance.useShowEquipItem,[1])],[]):s.OutsideShowDungeonCtrl.instance.useShowEquipItem(1)}else r.openLackPropAlert(e,1)},c.changeAutoUse=function(){s.OutsideShowDungeonModel.instance.autoUse?s.OutsideShowDungeonCtrl.instance.setAutoUserShowEquip(!s.OutsideShowDungeonModel.instance.autoUse):0<a.instance.getItemCountById(c.diItemId)?s.OutsideShowDungeonCtrl.instance.setAutoUserShowEquip(!s.OutsideShowDungeonModel.instance.autoUse):l.instance.addNotice("背包中没有异宝丹",!0)},c.diItemId=13650003,c.zh_num="一二三四五六七八九十",c.typeNames=["仙器境","灵宠境","神刃境","仙羽境","装袍境","珠纹境"],t=c,s.OutsideShowDungeonUtil=t}(modules=modules||{}),function(t){var e,h,i,c,n;function s(){return null!==h&&h.apply(this,arguments)||this}e=t.payRank||(t.payRank={}),i=ui.PayRankItemUI,c=t.config.ConsumeRankCfg,h=i,__extends(s,h),s.prototype.setData=function(t){h.prototype.setData.call(this,t);var e=t,i=this.index+1;1===i?(this.commonRank.visible=!1,this.rank.skin="common/zs_tongyong_7.png"):2===i?(this.commonRank.visible=!1,this.rank.skin="common/zs_tongyong_8.png"):3===i?(this.commonRank.visible=!1,this.rank.skin="common/zs_tongyong_9.png"):(this.rank.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+i),e?(this.waitingBox.visible=!1,this.roleName.visible=!0,this.payYB.visible=!0,this.roleName.text=e[1],this.payYB.text="消费元宝:"+e[2]):(this.waitingBox.visible=!0,this.roleName.visible=!1,this.payYB.visible=!1);var n=c.instance.getCfgByRank(this.index),s=CommonUtil.formatItemData(n[1]),o=[this.item1,this.item2,this.item3],a=n[2];this.requestYB.text=CommonUtil.bigNumToString(a),this.other.x=this.requestYB.x+this.requestYB.width;for(var r=0,l=o.length;r<l;r++)r>=s.length?o[r].visible=!1:(o[r].visible=!0,o[r].dataSource=s[r])},n=s,e.PayRankItem=n}(modules=modules||{}),function(i){var t,n,e;function s(){this._activityTime=0,this._rankList=[]}t=i.payRank||(i.payRank={}),n=i.funcOpen.FuncOpenModel,Object.defineProperty(s,"Instance",{get:function(){return s._instance=s._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"totalPay",{get:function(){return this._totalPay},set:function(t){this._totalPay=t,GlobalData.dispatcher.event("PAY_RANK_UPDATE")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"activityTime",{get:function(){return this._activityTime},set:function(t){this._activityTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankList",{get:function(){return this._rankList},set:function(t){this._rankList=t,GlobalData.dispatcher.event("PAY_RANK_UPDATE")},enumerable:!0,configurable:!0}),s.prototype.getShuJuByMingCi=function(t){for(var e=0;e<this._rankList.length;e++)if(this._rankList[e]&&this._rankList[e][3]==t)return this._rankList[e];return null},s.prototype.actorRank=function(t,e){for(var i=0;i<t.length;i++)if(t[i][0]===e)return t[i][3];return-1},s.prototype.setActionOpen=function(){if(0!=n.instance.getFuncStateById(213)){var t=GlobalData.timeZoneOffset,e=Math.floor((this._activityTime-t)/864e5)===Math.floor((GlobalData.serverTime-t)/864e5)?1:2;i.funcOpen.FuncOpenModel.instance.setActionOpen(213,e)}},e=s,t.PayRankModel=e}(modules=modules||{}),function(t){var e,s,i;function n(t,e,i){var n=s.call(this)||this;return n.startY=0,n._hight=0,n._oneBoll=!0,n._twoBoll=!0,n._threeBoll=!0,n._htmlArr=i,n.innerHTML="",n.width=t,n.style.fontFamily="SimHei",n.style.align="left",n.style.fontSize=e,n}e=t.pay_reward||(t.pay_reward={}),s=laya.html.dom.HTMLDivElement,__extends(n,s),n.prototype.setText=function(t,e,i){i&&(this.innerHTML=i),this.startY=t,this._hight=e,this._oneBoll=!1,this._twoBoll=!1,this._threeBoll=!1,this.pos(0,this.startY),this.visible=!0},n.prototype.closeTimer=function(){this._oneBoll=!0,this._twoBoll=!0,this._threeBoll=!0},n.prototype.updateList=function(){this._threeBoll||(this.y-=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this.y<=this._hight-this.contextHeight&&!this._oneBoll&&(this._oneBoll=!0,GlobalData.dispatcher.event("PAYREWARD_SHOWHTML")),this.y<=-this.contextHeight&&!this._twoBoll&&(this._twoBoll=!0,this._threeBoll=!0,this.visible=!1))},n.prototype.destroy=function(t){void 0===t&&(t=!0),Laya.timer.clear(this,this.updateList),s.prototype.destroy.call(this,t)},i=n,e.HtmlReward=i}(modules=modules||{}),function(s){var t,e,o,i;function n(){return e.call(this)||this}t=s.pay_reward||(s.pay_reward={}),o=s.common.CommonUtil,e=ui.PayRewardMyRecordItemUI,__extends(n,e),n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.showText()},n.prototype.showText=function(){var t=this._data[1],e=this._data[0],i=s.common.CommonUtil.getNameByItemId(e),n="天赐鸿福,";n+="抽奖获得了",n+="<span style='color:"+o.getColorById(e)+";'>"+i+"*"+t+"</span>",o.setHTMLPro(this.recordHtml,"#1F304d","SimHei",26),this.recordHtml.innerHTML=n},i=n,t.PayRewardMyRecordItem=i}(modules=modules||{}),function(t){var s,e,i,n;function o(){return e.call(this)||this}s=t.pay_reward||(t.pay_reward={}),i=Laya.Point,e=ui.PayRewardRankItemUI,__extends(o,e),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._challengeClip=this.destroyElement(this._challengeClip),this._items=this.destroyElement(this._items),e.prototype.destroy.call(this,t)},o.prototype.initialize=function(){e.prototype.initialize.call(this),this._startPos=new i(151,69),this._items=new Array,this._items=[this.rewardBase1,this.rewardBase2,this.rewardBase3,this.rewardBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#3a5385","SimHei",26)},o.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._date=t,this.updateUI())},o.prototype.updateUI=function(){this.showReward(),this.showText()},o.prototype.showReward=function(){for(var t=0;t<this._items.length;t++)this._items[t].visible=!1;var e=this._date[2];if(e)for(t=0;t<.5*e.length;t++){var i=this._items[t];i&&(i.dataSource=[e[2*t],e[2*t+1],0,null],i.visible=!0)}},o.prototype.showText=function(){var t=this._data[1],e=this._data[0],i=s.PayRewardModel.instance.caifu;this.StatementHTML.innerHTML=t<=i?"财富值达到<span style='color:#b15315'>"+t+"</span>可领取(<span style='color:#168a17'>"+i+"/"+t+"</span>)":"财富值达到<span style='color:#b15315'>"+t+"</span>可领取(<span style='color:#ff3e3e'>"+i+"/"+t+"</span>)";var n=s.PayRewardModel.instance.getRewardStart(e);this.HasBroughtImg.visible=2==n},n=o,s.PayRewardRankItem=n}(modules=modules||{}),function(t){var e,n,i,s,o;function a(){return null!==n&&n.apply(this,arguments)||this}e=t.peakDuel||(t.peakDuel={}),i=ui.PeakDuelAwardItemUI,s=t.config.DianfengAwardsCfg,n=i,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),this._items=[this.item_1,this.item_2,this.item_3,this.item_4]},a.prototype.setData=function(){if(0===this.index)this.rankImg.skin="common/zs_tongyong_7.png",this.rankTxt.text="";else if(1===this.index)this.rankImg.skin="common/zs_tongyong_8.png",this.rankTxt.text="";else if(2===this.index)this.rankImg.skin="common/zs_tongyong_9.png",this.rankTxt.text="";else{this.rankImg.skin="";var t=s.instance.cfgs[this.index][0],e=t[0],i=t[1];this.rankTxt.text=e+"~"+i}},a.prototype.onOpened=function(){n.prototype.onOpened.call(this);var t=s.instance.cfgs[this.index],e=s.instance.getFieldsIndexByGroup(),i=CommonUtil.formatItemData(t[e]);CommonUtil.showItems(this._items,i)},a.prototype.destroy=function(){this._items=this.destroyElement(this._items),n.prototype.destroy.call(this)},o=a,e.PeakDuelAwardItem=o}(modules=modules||{}),function(t){var x,e,i,s,B,S,n;function o(){return null!==e&&e.apply(this,arguments)||this}x=t.peakDuel||(t.peakDuel={}),i=ui.PeakDuelItemUI,s=t.notice.SystemNoticeManager,B=t.common.AttrUtil,S=t.config.TiantiCfg,e=i,__extends(o,e),o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.lBtn,this,this.btnHandler,[0]),this.onAutoClick(this.rBtn,this,this.btnHandler,[1]),this.onAutoGlobalEvt("PEAK_DUEL_PLAYER_UPDATE",this,this.update),this.onAutoGlobalEvt("PEAK_DUEL_PLAYER_INFO_UPDATE",this,this.updateGold)},o.prototype.setData=function(t){(this._info=t)?(this.addChildAt(this.bgImg,0),this.lNullTxt.visible=this.rNullTxt.visible=!1,this.updateAll()):(this.addChild(this.bgImg),this.addChild(this.lNullTxt),this.addChild(this.rNullTxt),this.addChild(this.hidden_4),this.lNullTxt.visible=this.rNullTxt.visible=!0)},o.prototype.updateAll=function(){var t=this._info?this._info[0]:null;this.show(this.lHeadIcon,this.lrankImg,this.lRankMsz,this.lNameTxt,this.lNumTxt,this.lPerTxt,this.lCountTxt,this.lMaskImg,this.lFlagImg,this.lBtn,this.lNullTxt,t);var e=this._info?this._info[1]:null;this.show(this.rHeadIcon,this.rrankImg,this.rRankMsz,this.rNameTxt,this.rNumTxt,this.rPerTxt,this.rCountTxt,this.rMaskImg,this.rFlagImg,this.rBtn,this.rNullTxt,e),t&&this.updateGold(this._info[0][0]),e&&this.updateGold(this._info[1][0])},o.prototype.show=function(t,e,i,n,s,o,a,r,l,h,c,p){if(!p)return this.hidden=!1,void(c.visible=!0);this.hidden=!0,c.visible=!1;var u=p[1],d=p[12],y=p[13];t.setInfo(d,u,y);var g=p[4],f=p[11];t.vipShowItem.setSVIPandVIP(f,g);var _=p[2];if(!S.instance.getCfgById(_))throw new Error("段位---\x3e"+_+"不存在!");if(0===_)i.value="0",_=1;else{var m=6-_%5;i.value=""+(6==m?1:m)}e.skin="peak_duel/icon_dfdf_"+Math.floor((_-1)/5)+".png";var v=p[3];n.text=v,o.text="赔率:"+B.formatFloatNum(p[7],!0),a.text="支持数:"+p[6];var b=x.PeakDuelModel.instance.stage,T=x.PeakDuelModel.instance.stageIndex<b||1===x.PeakDuelModel.instance.state;if(p[10])this.hintTxt.visible=o.visible=a.visible=l.visible=r.visible=h.visible=!1,T?(l.visible=!0,l.skin="peak_duel/txt_dfdf_sl.png"):this.hintTxt.visible=!0;else{this.hintTxt.visible=!1,o.visible=a.visible=!0;var I=p[8];if(1===I&&T)r.visible=h.visible=!1,l.visible=!0,l.skin="peak_duel/txt_dfdf_sl.png";else if(2===I&&T)h.visible=!1,r.visible=l.visible=!0,l.skin="peak_duel/txt_dfdf_fu.png";else{h.visible=!0,r.visible=l.visible=!1,s.text="0";var C=x.PeakDuelModel.instance.state;h.gray=0!==C}}},o.prototype.update=function(t){if(t&&this._info){var e=t[0],i=t[1];if(e===x.PeakDuelModel.instance.stageIndex&&i===x.PeakDuelModel.instance.groupIndex){var n,s=this._info[0][0],o=x.PeakDuelModel.instance.updateIds[s],a=this._info[1];if(a){var r=a[0];n=x.PeakDuelModel.instance.updateIds[r]}(o||n)&&(o&&(this._info[0]=o),n&&(this._info[1]=n),this.updateAll())}}},o.prototype.updateGold=function(t){this._info&&(this.showGold(this.lNumTxt,this._info[0],t)||this._info[1]&&this.showGold(this.rNumTxt,this._info[1],t))},o.prototype.showGold=function(t,e,i){if(e[0]!==i)return!1;var n=e[8],s=x.PeakDuelModel.instance.getGoldById(i);return t.text=0===n?"0":""+s,!0},o.prototype.btnHandler=function(t){if(this._info&&this._info[1]&&!(0===t?this.lBtn:this.rBtn).gray){var e=x.PeakDuelModel.instance.getTimeByStage(x.PeakDuelModel.instance.stageIndex);if(x.PeakDuelModel.instance.betTime[x.PeakDuelModel.instance.stageIndex]<=e)s.instance.addNotice("支持次数已达上限",!0);else{var i=x.PeakDuelModel.instance.betconsume[x.PeakDuelModel.instance.stageIndex];if(CommonUtil.getPropCountById(90140001)<i)CommonUtil.goldNotEnoughAlert();else{var n=this._info[0===t?0:1][0];x.PeakDuelCtrl.instance.guessPlayer(n)}}}},Object.defineProperty(o.prototype,"hidden",{set:function(t){this.hidden_2.visible=this.hidden_3.visible=this.rHeadIcon.visible=this.rrankImg.visible=this.rRankMsz.visible=this.rNameTxt.visible=this.rNumTxt.visible=this.rPerTxt.visible=this.rBtn.visible=this.rCountTxt.visible=this.rFlagImg.visible=this.rMaskImg.visible=t},enumerable:!0,configurable:!0}),n=o,x.PeakDuelItem=n}(modules=modules||{}),function(t){var e,i,n,r,l,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.peakDuel||(t.peakDuel={}),n=ui.PeakDuelRankItemUI,r=t.config.DianfengAwardsCfg,l=t.config.TiantiCfg,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._items=[this.item_1,this.item_2,this.item_3]},o.prototype.setData=function(t){var e=this.index+2;2===e?(this.rankImg.skin="common/zs_tongyong_8.png",this.rankMsz.value=""):3===e?(this.rankImg.skin="common/zs_tongyong_9.png",this.rankMsz.value=""):(this.rankImg.skin="common/dt_tongyong_15.png",this.rankMsz.value=""+e);var i=r.instance.getCfgByRank(e),n=r.instance.getFieldsIndexByGroup(),s=CommonUtil.formatItemData(i[n]);if(CommonUtil.showItems(this._items,s),t){this.showState=!0;var o=t[2],a=l.instance.getCfgById(t[10])[1];this.nameTxt.text=o,this.rankTxt.text="段位:"+a}else this.showState=!1},Object.defineProperty(o.prototype,"showState",{set:function(t){this.noTxt.visible=!t,this.nameTxt.visible=this.rankTxt.visible=t},enumerable:!0,configurable:!0}),o.prototype.destroy=function(){this._items=this.destroyElement(this._items),i.prototype.destroy.call(this)},s=o,e.PeakDuelRankItem=s}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.peakDuel||(t.peakDuel={}),n=ui.LadderRankItemUI,s=t.config.TiantiCfg,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.scoreTxt.align=this.nameTxt.align="left",this.scoreTxt.x=340,this.nameTxt.x=140},a.prototype.setData=function(t){var e=this.index+4;if(this.rankImg.skin="common/dt_tongyong_15.png",this.rankClip.value=""+e,t){this.nameTxt.text=t[2];var i=s.instance.getCfgById(t[10])[1];this.scoreTxt.text="段位:"+i}else this.nameTxt.text="虚位以待...",this.scoreTxt.text=""},o=a,e.PeakDuelRankItem2=o}(modules=modules||{}),function(t){var e,i;function n(){}e=t.peakDuel||(t.peakDuel={}),n.stageNames=["十六强赛","八强赛","四强赛","半决赛","总决赛"],n.stageNums=[16,8,4,2,1],i=n,e.PeakDuelUtil=i}(modules=modules||{}),function(t){var r,l,e,i,h,s,c,n;function o(){return null!==l&&l.apply(this,arguments)||this}r=t.qq||(t.qq={}),e=t.common.SimpleList,i=t.bag.BaseItem,h=t.config.QQPrivilegeRewardCfg,s=t.notice.SystemNoticeManager,c=t.common.CustomClip,l=ui.QQListItemUI,__extends(o,l),o.prototype.initialize=function(){l.prototype.initialize.call(this),this.list=e.create(i,100,100,2,1,20,0),this.list.pos(15,55),this.list.size(450,100),this.addChild(this.list),this.eft=c.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this.getBtn.addChild(this.eft),this.eft.scale(.8,.8),this.eft.pos(-4,-8),CommonUtil.setHTMLPro(this.descTxt,"#3a5385","SimHei",26)},o.prototype.destroy=function(t){void 0===t&&(t=!0),this.list.removeSelf(),this.list=this.destroyElement(this.list),this.eft.removeSelf(),this.eft=this.destroyElement(this.eft),l.prototype.destroy.call(this,t)},o.prototype.setData=function(t){l.prototype.setData.call(this,t);var e,i=t,n=h.instance.configs[i],s=Math.floor(.001*i),o=n[1],a=CommonUtil.formatItemData(n[4]);this.list.datas=a,3===s?(e=(1===o?r.QQModel.instance.qqLobbyLevelReward:r.QQModel.instance.qqBlueLevelReward)||[],this.descTxt.innerHTML="等级达到<span style='color:#b15315;'>"+n[3]+"</span>级可领取"):2===s&&(e=r.QQModel.instance.qqBlueDailyReward||[],this.descTxt.innerHTML=["","蓝钻用户","年费蓝钻","豪华蓝钻"][n[2]]+" 可领取"),e.indexOf(i)<0?(this.getBtn.visible=!0,this.gotImg.visible=!1):(this.getBtn.visible=!1,this.gotImg.visible=!0),r.QQModel.instance.checkCanGet(i)?c.thisPlay(this.eft):c.thisStop(this.eft)},o.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.getBtn,this,this.getHandler)},o.prototype.getHandler=function(){var t=this.data,e=h.instance.configs[t];if(e[3]>PlayerModel.instance.level)s.instance.addNotice("领取等级不足",!0);else{var i=e[1],n=Math.floor(.001*t);1===i?r.QQCtrl.instance.DrawHallReward(t,n):2===i&&r.QQCtrl.instance.DrawBlueVipReward(t,n)}},n=o,r.QQItem=n}(modules=modules||{}),function(t){var e,s,n,i;function o(){}e=t.qq||(t.qq={}),s=t.config.QQPrivilegeRewardCfg,n=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.checkCanGet=function(t){var e=s.instance.configs[t],i=e[1],n=Math.floor(.001*t);return!(1===n&&1===i&&1===this.qqLobbyStartReward||1===n&&2===i&&1===this.qqBlueStartReward||2===n&&1===i&&this.qqLobbyDailyReward&&0<=this.qqLobbyDailyReward.indexOf(t)||2===n&&2===i&&this.qqBlueDailyReward&&0<=this.qqBlueDailyReward.indexOf(t)||3===n&&1===i&&this.qqLobbyLevelReward&&0<=this.qqLobbyLevelReward.indexOf(t)||3===n&&2===i&&this.qqBlueLevelReward&&0<=this.qqBlueLevelReward.indexOf(t)||e[3]>PlayerModel.instance.level||2===i&&1===e[2]&&!this.isBlueVip||2===i&&2===e[2]&&!this.isYearBlueVip||2===i&&3===e[2]&&!this.isSuperBlueVip)},o.prototype.checkRP=function(){var t=this.checkCanGet(s.instance.lobbyStartId);n.instance.setRPProperty("qqLobbyStartRP",t),t=this.checkCanGet(s.instance.blueStartId),n.instance.setRPProperty("qqBlueStartRP",t);var e=s.instance.lobbyDailyIds;t=!1;for(var i=0;i<e.length;++i)if(this.checkCanGet(e[i])){t=!0;break}for(n.instance.setRPProperty("qqLobbyDailyRP",t),e=s.instance.blueDailyIds,t=!1,i=0;i<e.length;++i)if(this.checkCanGet(e[i])){t=!0;break}for(n.instance.setRPProperty("qqBlueDailyRP",t),e=s.instance.lobbyLevelIds,t=!1,i=0;i<e.length;++i)if(this.checkCanGet(e[i])){t=!0;break}for(n.instance.setRPProperty("qqLobbyLevelRP",t),e=s.instance.blueLevelIds,t=!1,i=0;i<e.length;++i)if(this.checkCanGet(e[i])){t=!0;break}n.instance.setRPProperty("qqBlueLevelRP",t)},o.prototype.setBlueVip=function(t){var e=0<Math.floor(.01*t),i=2===Math.floor(.01*t)||4===Math.floor(.01*t),n=3===Math.floor(.01*t)||4===Math.floor(.01*t),s=t%100;this.qqLobbyInfo=[e,i,n,s],GlobalData.dispatcher.event("QQ_UPDATE"),o.instance.checkRP()},Object.defineProperty(o.prototype,"isBlueVip",{get:function(){return this.qqLobbyInfo?this.qqLobbyInfo[0]||this.qqLobbyInfo[2]:!!this.qqBlueInfo&&(1===this.qqBlueInfo[0]||1===this.qqBlueInfo[2])},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isYearBlueVip",{get:function(){return this.qqLobbyInfo?this.qqLobbyInfo[1]:!!this.qqBlueInfo&&1===this.qqBlueInfo[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isSuperBlueVip",{get:function(){return this.qqLobbyInfo?this.qqLobbyInfo[2]:!!this.qqBlueInfo&&1===this.qqBlueInfo[2]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"blueVipLv",{get:function(){return this.qqLobbyInfo?this.qqLobbyInfo[3]:this.qqBlueInfo?this.qqBlueInfo[4]:0},enumerable:!0,configurable:!0}),i=o,e.QQModel=i}(modules=modules||{}),function(t){var c,e,i,s,o,p,n;function u(){return e.call(this)||this}c=t.rankingList||(t.rankingList={}),i=ui.PlayerRankingItemUI,s=t.config.LilianRiseCfg,o=t.config.XianweiRiseCfg,p=t.qq.QQBlueIcon,e=i,__extends(u,e),u.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22)},u.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.lookBtn,this,this.lookHanlder),this.onAutoClick(this.headIcon,this,this.lookHanlder)},u.prototype.lookHanlder=function(){var t=c.PlayerRankingModel.instance.getRanksByTypeAndMingCi(this._tpye,this._mingci);if(t){ChatCtrl.instance.getChatDetailedInfo([PlayerModel.instance.actorId,t[0],PlayerModel.instance.serverPgId]);var e=c.PlayerRankingModel.instance.getRanksByTypeAndMingCi(this._tpye,this._mingci);WindowManager.instance.open(154,[e[3],e[6],e[13]])}},u.prototype.setData=function(t){this._tpye=t[0],this._mingci=t[1],this._tpyeNum=t[2];var e=this._mingci;2==e?(this.rankImg.skin="common/zs_tongyong_8.png",this.rankMsz.value=null):3==e?(this.rankImg.skin="common/zs_tongyong_9.png",this.rankMsz.value=null):(this.rankImg.skin="common/dt_tongyong_15.png",this.rankMsz.value=""+e);var i=this.getDateRank();if(this.lookBtn.visible=!!i,!i)return this.vipShowItem.vipBox.visible=this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!1,this.noTxt.visible=!0,void(this._blue=this.destroyElement(this._blue));this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!0,this.StatementHTML.visible=this.noTxt.visible=!1;var n=c.PlayerRankingModel.instance.selectedRankType;if(256==n||128==n)this.valueTxt.text=u.getDateByType(n,i[5]);else{var s=this.getStr(n),o=i[5];this.valueTxt.text=s+":"+CommonUtil.bigNumToString(o)}this.playerName.text=""+i[2];var a=i[7],r=i[1],l=i[8];this.headIcon.setInfo(a,r,l);var h=i[3];this.vipShowItem.setSVIPandVIP(i[6],h,i[13]),0<Math.floor(.01*(i[9]||0))?(this._blue||(this._blue=new p,this._blue.pos(203,7),this._blue.scale(.6,.6),this.addChild(this._blue)),this._blue.updateVIP(i[9])):this._blue=this.destroyElement(this._blue)},u.prototype.getDateRank=function(){return c.PlayerRankingModel.instance.getRanksByTypeAndMingCi(this._tpye,this._mingci)},u.prototype.getStr=function(t){var e="";switch(t){case 1:e="战力";break;case 2:e="等级";break;case 4:e="灵宠战力";break;case 8:e="仙器战力";break;case 16:e="神兵战力";break;case 32:e="仙翼战力";break;case 64:e="法宝战力";break;case 128:case 256:e="";break;case 512:e="装备战力";break;case 32768:e="天珠战力";break;case 16384:e="时装战力"}return e},u.getDateByType=function(t,e){var i="";if(128==t){var n=s.instance.getLilianRiseCfgByRiseLevel(e);n&&"0"!=n[6]?i+=n[6]:i+="无"}return 256==t&&(i+=0==e?"无":o.instance.getXianweiRiseByLevel(e)[1]),2==t&&(i+=e.toString()),i},n=u,c.PlayerRankingItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.rankingList||(t.rankingList={}),n=Laya.Button,i=t.common.ItemRender,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._btn=new n("common/btn_tongyong_1.png"),this._btn.stateNum=2,this._btn.labelAlign="center",this._btn.labelFont="SimHei",this._btn.labelSize=27,this._btn.labelColors="#495670,#9D5119,#9D5119,#495670",this.addChild(this._btn),this._names=["战力榜","等级榜","仙盟榜","灵宠榜","仙器榜","神兵榜","仙翼榜","时装榜","天珠榜","法宝榜","道行榜","仙位榜","装备榜"]},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._btn.label=this._names[this.index]},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this._btn.selected=t},s=o,e.RankingListBtn=s}(modules=modules||{}),function(t){var e,i,n;function s(){this._status=-1}e=t.realName||(t.realName={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},set:function(t){this._status=t,i.instance.setRPProperty("realNameRP",0===t),GlobalData.dispatcher.event("REAL_NAME_STATUS_CHANGE")},enumerable:!0,configurable:!0}),n=s,e.RealNameModel=n}(modules=modules||{}),function(l){var h,i,c,p,u,t;function d(){return null!==i&&i.apply(this,arguments)||this}h=l.redBag||(l.redBag={}),c=l.notice.SystemNoticeManager,p=l.faction.FactionModel,u=l.marry.MarryModel,i=ui.RedBagItemUI,__extends(d,i),d.prototype.setData=function(t){i.prototype.setData.call(this,t),this.updataView()},d.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.des,"#ffec7c","SimHei",22,"center"),this.des.style.leading=10,this.effctBox.rotation=0},d.prototype.destroy=function(){this.bgImg=this.destroyElement(this.bgImg),this.openBtn=this.destroyElement(this.openBtn),this.stageBg=this.destroyElement(this.stageBg),this.sendBtn=this.destroyElement(this.sendBtn),this.nameTxt=this.destroyElement(this.nameTxt),this.des=this.destroyElement(this.des),i.prototype.destroy.call(this)},d.prototype.updateByID=function(t){var e=this._data;e&&e[0]===t&&(console.log("  public updateByID(uid:number):void{"),this._data=h.RedBagModel.instance.getPkgByUid(t),this.updataView())},d.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("REDBAG_PLAY_EFFECT",this,this.openEffect),this.onAutoGlobalEvt("REDBAG_SINGLE_UPDATA",this,this.updateByID);var t=this._data;if(t){var e=t[9];e>GlobalData.serverTime&&Laya.timer.once(20+e-GlobalData.serverTime,this,this.updataView)}},d.prototype.offEvt=function(){Laya.timer.clear(this,this.updataView),i.prototype.offEvt.call(this)},d.prototype.clickHandler=function(){var t=h.RedBagModel.instance.getState(this._data);this.stopEffect(),2!==t&&0!==t||this.openHandler(),1!==t?(3===t&&c.instance.addNotice("红包未发放,不可领取",!0),h.RedBagUtils.isSysBag(this._data[1])&&h.RedBagUtils.getIdByNotice(this._data[2]),5!==t&&4!==t&&6!==t||(h.RedBagModel.instance.showUidAndChannel.channel=this._data[10],h.RedBagModel.instance.showUidAndChannel.uid=this._data[0],h.RedBagModel.instance.isOpenDlog=!0,WindowManager.instance.open(1365,this._data[0]))):this.sendHandler()},d.prototype.openHandler=function(){var t,e=this._data;if(e&&(t=1==(2===d.openType?1:0)?910:912,h.RedBagUtils.redBagSendandRec(t,!0))){var i,n,s,o=this._data[10];if(2===o){if(!p.instance.hasFaction)return void c.instance.addNotice("请加入仙盟",!0)}else if(3===o){if(-1===l.warband.WarbandModel.instance.leaderId)return void c.instance.addNotice("请加入战队",!0)}else if(4===o){var a=u.instance.half;if(!a||!a[3])return void c.instance.addNotice("请加入仙缘",!0)}var r=h.RedBagModel.instance.singleBagInfo;90140001===e[6]?(i=r[1],n=h.RedBagModel.instance.goldRecMax,s="元宝"):e[6],1===d.openType&&n<=i&&e[3][0]!=PlayerModel.instance.actorId?c.instance.addNotice("今日"+s+"领取数量达到上限",!0):4===e[1]?GlobalData.dispatcher.event("GER_PASSWAED_RED_BAG",[e]):h.RedBagCtrl.instance.drawRedEnvelope(e[1],e[10],e[0],e[6])}},d.prototype.sendHandler=function(){var t=this._data;if(t){var e=h.RedBagUtils.isSysBag(this._data[1])?h.RedBagUtils.getIdByNotice(this._data[2]):"",i=this._data[10];if(2===i){if(!p.instance.hasFaction)return void c.instance.addNotice(e||"请加入仙盟",!0)}else if(3===i){if(-1===l.warband.WarbandModel.instance.leaderId)return void c.instance.addNotice(e||"请加入战队",!0)}else if(4===i){var n=u.instance.half;if(!n||!n[3])return void c.instance.addNotice(e||"请加入仙缘",!0)}h.RedBagUtils.redBagSendandRec(911,!0)&&h.RedBagCtrl.instance.sysRedEnvelopeIssue(t[10],t[0])}},d.prototype.updataView=function(){var t=this._data;if(t){var e=t[3],i=t[3][0];this.effctBox.rotation=0,i===PlayerModel.instance.actorId?(this.nameTxt.text="我的红包",this.nameTxt.color="#50ff28"):(this.nameTxt.text=e[2],this.nameTxt.color="#ffffff"),this.des.innerHTML=h.RedBagUtils.redBagMsc(t,!0);var n=t[1],s=this.des.contextHeight;this.des.y=35<s?84:100,this.flagImg.visible=!0,3===n?this.flagImg.skin="red_bag/icon_hbxt_pin.png":4===n?this.flagImg.skin="red_bag/icon_hbxt_lin.png":this.flagImg.visible=!1;var o=t[6];switch(h.RedBagModel.instance.getState(t)){case 0:case 2:this.openBtn.visible=!0,this.sendBtn.visible=this.stageBg.visible=this.stateImg.visible=this.lookImg.visible=!1,this.bgImg.skin="red_bag/image_hbxt_0"+(94150001===o?8:5)+".png";break;case 1:this.sendBtn.visible=!0,this.openBtn.visible=this.stageBg.visible=this.stateImg.visible=this.lookImg.visible=!1,this.bgImg.skin="red_bag/image_hbxt_0"+(94150001===o?8:5)+".png";break;case 3:this.sendBtn.visible=this.openBtn.visible=this.lookImg.visible=!1,this.stageBg.visible=this.stateImg.visible=!0,this.stateImg.skin="red_bag/txt_hbxt_wff.png",this.bgImg.skin="red_bag/image_hbxt_0"+(94150001===o?8:5)+".png";break;case 4:this.sendBtn.visible=this.openBtn.visible=!1,this.lookImg.visible=this.stageBg.visible=this.stateImg.visible=!0,this.stateImg.skin="red_bag/txt_hbxt_ylq.png",this.bgImg.skin="red_bag/image_hbxt_0"+(94150001===o?9:4)+".png";break;case 5:this.sendBtn.visible=this.openBtn.visible=!1,this.lookImg.visible=this.stageBg.visible=this.stateImg.visible=!0,this.stateImg.skin="red_bag/txt_hbxt_yqg.png",this.bgImg.skin="red_bag/image_hbxt_0"+(94150001===o?9:4)+".png";break;case 6:this.sendBtn.visible=this.openBtn.visible=!1,this.lookImg.visible=this.stageBg.visible=this.stateImg.visible=!0,this.stateImg.skin="red_bag/txt_hbxt_ygq.png",this.bgImg.skin="red_bag/image_hbxt_0"+(94150001===o?9:4)+".png"}}},d.prototype.openEffect=function(){var t=this._data;t&&d.showId===t[0]&&this.playEffct()},d.prototype.playEffct=function(){var t=this;this._tween=TweenJS.create(this.effctBox).to({rotation:-15},50).onComplete(function(){t._tween.to({rotation:10},100).onComplete(function(){t._tween.to({rotation:0},25).onComplete(function(){Laya.timer.once(2e3,t,t.playEffct)}).start()}).start()}).start()},d.prototype.stopEffect=function(){this._tween&&(Laya.timer.clear(this,this.playEffct),this._tween.stop(),this._tween=null,this.effctBox.rotation=0)},d.prototype.close=function(){this.stopEffect(),i.prototype.close.call(this)},d.openType=0,d.showId=0,t=d,h.RedBagItem=t}(modules=modules||{}),function(y){var c,o,s,e,a,r,g,f,t;function p(){this.isOpenDlog=!1,this.showUidAndChannel={uid:null,channel:null},this.sendBagMax=o.instance.getCfgById(97401)[1][0],this.bagMscMax=o.instance.getCfgById(97402)[1][0],this.xianYuRecMax=0,this.thankMsc=[];for(var t=o.instance.getCfgById(97404)[2],e=0,i=t.length;e<i;e++){var n=t[e];this.thankMsc[e]=n.replace("[","").replace("]","").split("|")}this.rps=["redBagLuckRP","redBagAwardRP","redBagPlayerRP"],this.openPanl=[1362,1363,1364];var s=o.instance.getCfgById(97407);this.needTianGuan=s[1][0],this.needVip=s[1][1],this.keepKey=PlayerModel.instance.actorId+"redbag",this.redBagDic=new a}c=y.redBag||(y.redBag={}),o=y.config.BlendCfg,s=y.redPoint.RedPointCtrl,e=y.config.SysRedEnvelopeCfg,a=Laya.Dictionary,r=y.chat.ChatModel,g=y.faction.FactionModel,f=y.marry.MarryModel,Object.defineProperty(p,"instance",{get:function(){return this._instance=this._instance||new p},enumerable:!0,configurable:!0}),p.prototype.getRedEnvelopeInfoReply=function(t){t&&0!==t[0].length?this.redBagDic.set(t[1],t[0]):this.redBagDic.set(1,[[],[],[]]),GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"),this.setRP()},p.prototype.getRedEnvelopeRecordReply=function(t){this.redEnvelopeRecord=t[0],GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"),this.setRP()},p.prototype.getRedEnvelopePerInfoReply=function(t){this.singleBagInfo=t,GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"),this.setRP()},p.prototype.reqRedDrawAgentReply=function(t){if(t){for(var e=t[0],i=this.getPkgByUid(e),n=t[1]||[],s=!1,o=0,a=n.length;o<a;o++)if(n[o][0]===PlayerModel.instance.actorId){var r=i[11];i[11]=!0,r||(s=!0);break}i[11]||n.length>=i[5]&&(i[4]=2,s=!0),this.reqRedDrawInfo=t,s?GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"):GlobalData.dispatcher.event("REDBAG_SINGLE_UPDATA",[e]),GlobalData.dispatcher.event("RED_BAG_DRAW_GET_REPLY"),this.setRP()}},p.prototype.addRedEnvelope=function(t){if(t){var e,i=this.redBagDic.keys||[];if(0<i.length&&(e=this.redBagDic.get(i[0])),e){for(var n=t[0],s=0,o=n.length;s<o;s++){var a=n[s][1],r=-1;if(1===a?r=0:2===a?r=1:3!==a&&4!==a||(r=2),e[r]){var l=this.getPkgByUid(n[s][0]);l?l=n[s]:(e[r].push(n[s]),this.sendRedBagChat(n[s]))}}GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"),this.setRP()}}},p.prototype.sendRedBagChat=function(t){if(PlayerModel.instance.actorId===t[3][0]&&1===t[4]){for(var e=c.RedBagUtils.channelToChatChannel(t[10]),i=r.instance.getChanneByChatRecord(e),n=!1,s=0,o=i.length;s<o;s++)if(i[s][1][2]===t[0]){n=!0;break}if(n)return void console.log("一个红包只能发送一次");var a=[c.RedBagUtils.channelToChatChannel(t[10]),7,t[0],this.getRedBagMsc(t),y.chat.ChatModel.instance.virtualItem,[],[],0,0];ChatCtrl.instance.sendChatMessage(a)}},p.prototype.getRedBagMsc=function(t){return c.RedBagUtils.isSysBag(t[1])?e.instance.getIdByCfg(t[2])[7].replace("{0}",t[8]):t[8]},p.prototype.updateRedEnvelopeRecord=function(t){if(t&&this.redEnvelopeRecord){for(var e=t[1],i=0,n=e.length;i<n;i++){var s=e[i][0],o=-1;if(1===s?o=0:2===s?o=1:3!==s&&4!==s||(o=2),this.redEnvelopeRecord[o]){for(var a=!1,r=0,l=this.redEnvelopeRecord[o].length;r<l;r++){var h=this.redEnvelopeRecord[o][r];if(c.RedBagUtils.compare2Obj(h,e[i])){a=!0;break}}a||this.redEnvelopeRecord[o].push(e[i])}}GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"),this.setRP()}},p.prototype.delRedEnvelope=function(t){if(t){var e=this.redBagDic.keys||[],i=e.length;if(0!==i){for(var n=0;n<i;n++){var s=this.redBagDic.get(e[n]);if(s)for(var o=t[0],a=0,r=o.length;a<r;a++){var l=o[a][0],h=-1;if(1===l?h=0:2===l?h=1:3!==l&&4!==l||(h=2),s[h]){for(var c=o[a][1],p=-1,u=0,d=s[h].length;u<d;u++)if(c===s[h][u][0]){p=u;break}-1!=p&&(console.log(" this.redEnvelopeObj[index].splice(flag, 1)面的..........",s[h][p]),s[h].splice(p,1))}}}GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"),this.setRP()}}},p.prototype.updateRedEnvelopeState=function(t){if(t){for(var e=t[0],i=this.redBagDic.values,n=0,s=i.length;n<s;n++){var o=i[n];if(o)for(var a=0,r=o.length;a<r;a++)for(var l=o[a],h=0,c=l.length;h<c;h++)if(e===l[h][0]){var p=l[h][4];l[h][4]=t[1],l[h][9]=t[2],l[h][10]=t[3],1===t[1]&&0===p&&(this.sendRedBagChat(l[h]),GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"));break}}GlobalData.dispatcher.event("REDBAG_SINGLE_UPDATA",[e]),this.setRP()}},p.prototype.setRP=function(){if(this.singleBagInfo&&0!==this.redBagDic.values.length)for(var t=0,e=this.rps.length;t<e;t++){var i=0<this.getRecCnt(t,0,!0),n=void 0;n=2===t?this.sendBagMax>this.singleBagInfo[0]&&0<this.getRecCnt(t,1,!0):0<this.getRecCnt(t,1,!0),s.instance.setRPProperty(this.rps[t],i||n)}},p.prototype.getPkgByUid=function(t){for(var e=this.redBagDic.values,i=0,n=e.length;i<n;i++){var s=e[i];if(!s)return;for(var o=0,a=s.length;o<a;o++)for(var r=s[o],l=0,h=r.length;l<h;l++)if(t===r[l][0])return r[l]}return null},p.prototype.sort=function(t,e){var i=p.instance,n=i.getState(t),s=i.getState(e);if(n!==s)return n-s;var o=t[6],a=e[6];if(o!==a)return a-o;var r=t[3][0],l=e[3][0],h=r===PlayerModel.instance.actorId?1:2,c=l===PlayerModel.instance.actorId?1:2;return h==c?e[9]-t[9]:h-c},p.prototype.getState=function(t){return 0!==t[4]?2===t[4]?t[11]?4:5:t[11]?4:t[9]<GlobalData.serverTime?6:2===t[1]&&p.instance.goldRecMax<=p.instance.singleBagInfo[1]&&PlayerModel.instance.actorId!=t[3][0]?2:0:t[3][0]===PlayerModel.instance.actorId?1:3},Object.defineProperty(p.prototype,"showRecCnt",{get:function(){var t=0;if(!this.singleBagInfo)return 0;if(0===this.redBagDic.values.length)return 0;if(!c.RedBagUtils.getActionopen())return 0;for(var e=0,i=this.rps.length;e<i;e++)t+=this.getRecCnt(e),t+=this.getRecCnt(e,1);return t},enumerable:!0,configurable:!0}),p.prototype.getRecCnt=function(t,e,i){void 0===t&&(t=-1),void 0===e&&(e=0),void 0===i&&(i=!1);for(var n=0,s=0,o=this.redBagDic.values.length;s<o;s++){var a=this.redBagDic.values[s];if(0!==a.length&&a)if(-1===t){for(var r=0,l=a.length;r<l;r++)for(var h=0,c=a[r].length;h<c;h++)if(this.getState(a[r][h])===e){var p=!1;2===(u=a[r][h][10])?g.instance.hasFaction||(p=!0):3===u?-1===y.warband.WarbandModel.instance.leaderId&&(p=!0):4===u&&((d=f.instance.half)&&d[3]||(p=!0)),p||n++}}else for(h=0,c=a[t].length;h<c;h++)if(this.getState(a[t][h])===e){var u;if(p=!1,2===(u=a[t][h][10]))g.instance.hasFaction||(p=!0);else if(3===u)-1===y.warband.WarbandModel.instance.leaderId&&(p=!0);else if(4===u){var d;(d=f.instance.half)&&d[3]||(p=!0)}if(!p&&(n++,i))break}}return n},p.prototype.getChannelAndContentByLastTmPkg=function(t,e,i){var n;void 0===i&&(i=4);for(var s=0,o=this.redBagDic.values.length;s<o;s++){var a=this.redBagDic.values[s];if(a&&0!==a.length)for(var r=0,l=a.length;r<l;r++)for(var h=a[r],c=0,p=h.length;c<p;c++)h[c][10]===t&&h[c][8]===e&&h[c][1]===i&&0===this.getState(h[c])&&(n?n[9]<h[c][9]&&(n=h[c]):n=h[c])}return n},Object.defineProperty(p.prototype,"createTime",{get:function(){var t=PlayerModel.instance.playerBaseAttr[14],e=864e5-(t-GlobalData.timeZoneOffset)%864e5,i=GlobalData.serverTime-GlobalData.timeZoneOffset-t-e;return i=0<i?i:0,Math.round(i/864e5)+1},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"goldRecMax",{get:function(){for(var t=o.instance.getCfgById(97403)[1],e=this.createTime,i=0,n=t.length;i<n;i+=2)if(e<t[i])return t[i];return t[t.length-2]},enumerable:!0,configurable:!0}),p.prototype.getUidOpenPanl=function(t){for(var e=-1,i=0,n=this.redBagDic.values.length;i<n;i++){var s=this.redBagDic.values[i];if(s&&0!==s.length)for(var o=0,a=s.length;o<a;o++)for(var r=s[o],l=0,h=r.length;l<h;l++)t===r[l][0]&&(e=o)}-1!=e?WindowManager.instance.open(this.openPanl[e],t):y.notice.SystemNoticeManager.instance.addNotice("该红包已失效",!0)},p.prototype.getNowGrade=function(){for(var t=p.instance.singleBagInfo[2],e=-1,i=0,n=t.length;i<n;i++)t[i][1]-t[i][2]<=0||(-1===e?e=i:t[e][0]>t[i][0]&&(e=i));return t[e]},p.prototype.getNextMoney=function(){for(var t=p.instance.singleBagInfo[2]||[],e=0===t.length?-1:0,i=0,n=t.length;i<n;i++)t[e][0]<t[i][0]&&(e=i);var s=y.config.ActiveRedEnvelopeCfg.instance.getChannelByCfg(0)[1];return-1===e?s[0][0]:s[e>=s.length-1?e:e+1][0]},p.prototype.getMaxMoney=function(){var t=y.config.ActiveRedEnvelopeCfg.instance.getChannelByCfg(0)[1];return t[t.length-1][0]},p.prototype.setKeepData=function(t,e){var i=Laya.LocalStorage.getJSON(this.keepKey);(i=i||{})[t]=e,Laya.LocalStorage.setJSON(this.keepKey,i)},p.prototype.hasKeepData=function(t){var e=Laya.LocalStorage.getJSON(this.keepKey);return!!e&&!!e[t]},p.prototype.updateRedEnvelopeExpire=function(t){for(var e=t[0]||[],i=0,n=e.length;i<n;i++)if(2===e[i][1]){var s=this.getPkgByUid(e[i][0]);s&&(s[4]=2)}GlobalData.dispatcher.event("RED_BAG_INFO_UPDTE"),this.setRP()},p.prototype.getChanlByRPpkg=function(t,e){void 0===e&&(e=!0);for(var i=0,n=0,s=this.redBagDic.values.length;n<s;n++){var o=this.redBagDic.values[n];if(o&&0!==o.length)for(var a=0,r=o.length;a<r;a++)for(var l=o[a],h=0,c=l.length;h<c;h++){var p=l[h];if(p[10]===t&&1===this.getState(p)&&(i++,e))break}}return i},p.prototype.getPkgByNotice=function(t){switch(p.instance.getState(t)){case 0:case 2:return"可领取";case 1:return"可发放";case 3:return"未发放";case 4:return"已领取";case 5:return"已抢光";case 6:return"已过期"}},t=p,c.RedBagModel=t}(modules=modules||{}),function(t){var l,h,e;function i(){return null!==h&&h.apply(this,arguments)||this}l=t.redBag||(t.redBag={}),h=ui.RedBagOpenItemUI,__extends(i,h),i.prototype.destroy=function(){this.luckImg=this.destroyElement(this.luckImg),this.head=this.destroyElement(this.head),this.iconImg=this.destroyElement(this.iconImg),this.numTxt=this.destroyElement(this.numTxt),this.nameTxt=this.destroyElement(this.nameTxt),h.prototype.destroy.call(this)},i.prototype.setData=function(t){h.prototype.setData.call(this,t);var e=l.RedBagModel.instance.showUidAndChannel.uid,i=l.RedBagModel.instance.getPkgByUid(e),n=l.RedBagModel.instance.reqRedDrawInfo;if(n){for(var s=n[1],o=0,a=0,r=s.length;a<r;a++)s[a][5]>s[o][5]&&(o=a);0<i[5]-s.length?this.luckImg.visible=!1:this.luckImg.visible=s[o][0]===t[0],this.head.setInfo(t[3],t[1],t[4]),this.nameTxt.text=t[2],this.numTxt.text=t[5].toString(),this.iconImg.skin=l.RedBagUtils.getStr(i[6])}},e=i,l.RedBagOpenItem=e}(modules=modules||{}),function(s){var o,e,t;function a(){return null!==e&&e.apply(this,arguments)||this}o=s.redBag||(s.redBag={}),e=ui.RedBagSendGradeItemUI,__extends(a,e),a.getSelectType=function(){return a._selectType},a.setSelectType=function(t){t!==a._selectType&&(a._selectType=t,GlobalData.dispatcher.event("RED_BAG_SEND_BTN_CLICK"))},a.prototype.destroy=function(){this.msc2=this.destroyElement(this.msc2),this.msc3=this.destroyElement(this.msc3),this.msc1=this.destroyElement(this.msc1),this.icon2=this.destroyElement(this.icon2),this.icon1=this.destroyElement(this.icon1),e.prototype.destroy.call(this)},a.prototype.setData=function(t){e.prototype.setData.call(this,t),this.updateView()},a.prototype.updateView=function(){var t=this.data;if(-1!==t[0])this.box1.visible=!0,this.tipsTxt.visible=!1,this.icon1.skin=o.RedBagUtils.getStr(94150001),1===o.RedBagSendAlert.bagType?this.icon2.skin=o.RedBagUtils.getStr(90140001):2===o.RedBagSendAlert.bagType&&(this.icon2.skin=o.RedBagUtils.getStr(94150001)),this.msc2.text=t[0]+"发放",this.msc3.text=t[1].toString(),this.msc2.x=this.icon1.x+this.icon1.width,this.icon2.x=this.msc2.x+this.msc2.textWidth,this.msc3.x=this.icon2.x+this.icon2.width,this.btn.selected=this.index===a.getSelectType(),this.split.visible=this.index!=a.max-1;else{var e=t[1];if(this.box1.visible=!1,this.tipsTxt.visible=!0,2===e){var i=0;(n=s.faction.FactionModel.instance.baseInfo)&&(i=n[2].length),this.tipsTxt.text=0===i?"当前没有加入仙盟":"本仙盟人数："+i+"人"}else if(3===e){var n;i=0,(n=s.warband.WarbandModel.instance.info)&&(i=n[4].length),this.tipsTxt.text=0===i?"当前没有加入战队":"本战队人数："+i+"人"}}},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("RED_BAG_SEND_BTN_CLICK",this,this.updateView)},a.prototype.clickHandler=function(){if(-1!==this.data[0]){var t=WindowManager.instance.getDialogById(1366);t&&t.pullDownHanlder(),a.setSelectType(this.index)}},a._selectType=-1,a.max=0,t=a,o.RedBagSendGradeItem=t}(modules=modules||{}),function(i){var n,e,t;function s(){return null!==e&&e.apply(this,arguments)||this}n=i.redBag||(i.redBag={}),e=ui.RedBagThankItemUI,__extends(s,e),s.prototype.destroy=function(){this.txt=this.destroyElement(this.txt),e.prototype.destroy.call(this)},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this.txt.text=t},s.prototype.clickHandler=function(){var t=[n.RedBagUtils.channelToChatChannel(n.RedBagThankAlert.channel),8,n.RedBagThankAlert.uid,this.txt.text,i.chat.ChatModel.instance.virtualItem,[PlayerModel.instance.actorId],[],0,0];ChatCtrl.instance.sendChatMessage(t),n.RedBagModel.instance.setKeepData(n.RedBagThankAlert.uid,1);var e=WindowManager.instance.getDialogById(1367);e&&e.close()},t=s,n.RedBagThankItem=t}(modules=modules||{}),function(u){var t,r,d,i,y,n,g,f,_,m,e;function v(){}t=u.redBag||(u.redBag={}),r=u.config.ActiveRedEnvelopeCfg,d=u.config.SysRedEnvelopeCfg,i=u.funcOpen.FuncOpenModel,y=u.common.CommonUtil,n=u.notice.SystemNoticeManager,g=u.config.RechargeCfg,f=u.config.BornCfg,_=u.config.FeiShengGradeCfg,m=u.config.XianweiRiseCfg,v.getStr=function(t){return 94150001===t?"common/shenghuyu.png":90140001===t?"common/icon_tongyong_2.png":0===t?"":y.getIconById(t,!0)},v.getMinAndMaxByChane=function(t,e){var i=r.instance.getChannelByCfg(t);return[i[4][e],i[5][e]]},v.getRandDes=function(t){var e=t.length,i=Math.floor(Math.random()*e);return t[6][i]},v.getHumanRedMsc=function(t){for(var e=r.instance.getChannelByCfg(t[4]),i=v.timeFormat(t[7]),n=3===t[0]?e[7][0]:e[7][1],s=["<span style='color:#b15315'>【"+t[5]+"】</span>","<span style='color:#ff3e3e'>"+t[3]+y.getNameByItemId(t[2])+"</span>"],o=0,a=s.length;o<a;o++)n=n.replace("{"+o+"}",s[o]);return i+n},v.getSysRedMsc=function(t){var e=v.timeFormat(t[7]),i=d.instance.getIdByCfg(t[1])[8],n="<span style='color:#b15315'>【"+t[5]+"】</span>";i=i.replace("{name}",n);var s="<span style='color:#ff3e3e'>"+t[3]+y.getNameByItemId(t[2])+"</span>";i=i.replace("{money}",s);var o="<span style='color:#b15315'>【"+(u.warband.WarbandModel.instance.info?u.warband.WarbandModel.instance.info[1]:"战队")+"】</span>";i=i.replace("{tname}",o);var a="<span style='color:#b15315'>【"+(u.faction.FactionModel.instance.baseInfo?u.faction.FactionModel.instance.baseInfo[0]:"仙盟")+"】</span>";i=i.replace("{fname}",a);var r=t[1],l=t[6],h=l.toString();if(2011===r)h=0===l?"未转生":f.instance.getCfgByLv(l)[1];else if(1033===r||1044===r||1034===r)h=g.instance.getRecharCfgByIndex(l)[1];else if(2012===r)h=_.instance.getCfgById(l)[1];else if(2013===r)h=m.instance.getXianweiRiseByLevel(l)[1]+v.getSkinByLv(l);else if(2010===r){var c=Math.floor(l/10),p=u.config.EquipSuitCfg.instance.bClassIds.indexOf(c);h=u.equipSuit.EquipSuitUtil.names[p]}else 2022===r&&(h=(l%100).toString());return e+(i=i.replace("{parm}","<span style='color:#ff3e3e'>"+h+"</span>"))},v.redBagMsc=function(t,e){if(void 0===e&&(e=!1),v.isSysBag(t[1])){var i=d.instance.getIdByCfg(t[2]),n=t[2],s=t[8];if(2011===n)s=0===(o=parseInt(t[8]))?"未转生":f.instance.getCfgByLv(o)[1];else if(1033===n||1044===n||1034===n){var o=parseInt(t[8]);s=g.instance.getRecharCfgByIndex(o)[1]}else if(2012===n)o=parseInt(t[8]),s=_.instance.getCfgById(o)[1];else if(2013===n)o=parseInt(t[8]),s=m.instance.getXianweiRiseByLevel(o)[1].replace("·","")+v.getSkinByLv(o);else if(2010===n){o=parseInt(t[8]);var a=Math.floor(o/10),r=u.config.EquipSuitCfg.instance.bClassIds.indexOf(a);s=u.equipSuit.EquipSuitUtil.names[r]}else 2022===n&&(s=((o=parseInt(t[8]))%100).toString());var l=i[7];return(l=e?l.replace("{br}","<br/>"):l.replace("{br}",",")).replace("{0}",s)}return t[8]},v.isSysBag=function(t){return 4!=t&&3!=t},v.timeFormat=function(t){var e=new Date(t),i=e.getMonth()+1,n=e.getDate(),s=e.getHours(),o=e.getMinutes(),a=e.getSeconds();return"【"+i+"-"+n+"   "+s+":"+(o<10?"0":"")+o+":"+(a<10?"0":"")+a+"】"},v.channelToChatChannel=function(t){switch(t){case 0:return 1;case 1:return 2;case 2:return 4;case 3:return 6;case 4:return 5;default:throw new Error("错误...channel"+t)}},v.ChatChannelTochannel=function(t){return[1,2,4,6,5].indexOf(t)},v.redBagSendandRec=function(t,e){return!!i.instance.getFuncIsOpen(t)||(e&&n.instance.addNotice(i.instance.getFuncOpenTipById(t),!0),!1)},v.arr1ToArr2=function(t){for(var e=[],i=0,n=t.length;i<n;i+=2)e.push([t[i],t[i+1]]);return e},v.getGradeToArr=function(t,e){var i=0;if(-1!=t)for(var n=0,s=e.length;n<s;n++)if(t===e[n][0]){i=n;break}var o=[];for(n=1,s=e[i].length;n<s;n++)o.push(e[i][n]);return o},v.compare2Obj=function(t,e){if(t.length!=e.length)return!1;for(var i=0,n=0,s=t.length;n<s;n++)t[n]===e[n]&&i++;return i===t.length},v.getIdAndCondByMoney=function(t,e){var i=d.instance.getIdByCfg(t),n=i[5].indexOf(e);return-1===n&&(console.log("该档位没有对应金额"),n=0),i[4][n]},v.getActionopen=function(){return!1},v.getSkinByLv=function(t){var e=t%10;return 1==e?"初期":2==e?"中期":3==e?"巅峰":"大圆满"},v.getIdByNotice=function(t){return d.instance.getIdByCfg(t)[9]},v.chanelName=["九州","本服","仙盟","战队","仙缘"],e=v,t.RedBagUtils=e}(modules=modules||{}),function(t){var i,e,n,s;function o(){return null!==e&&e.apply(this,arguments)||this}i=t.redPack||(t.redPack={}),n=ui.RedPackItemUI,e=n,__extends(o,e),o.prototype.setData=function(t){var e=t[0];this.flagImg.visible=e===i.RedPackModel.instance.luckBest,this.nameTxt.text=t[1],this.nameTxt.color=e===PlayerModel.instance.actorId?"#50ff28":"#ffffff",this.valueTxt.text=""+t[2]},s=o,i.RedPackItem=s}(modules=modules||{}),function(t){var n,e;function i(){this.creatTime=1e4,this._lastY=960,this._animoffset=1,this._offset=3,this._imgs=[],this.idleImgs=[],this._dirs=[],this._animoRange=15}n=t.redPack||(t.redPack={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"imgs",{get:function(){return this._imgs},enumerable:!0,configurable:!0}),i.prototype.add=function(t){for(var e=0,i=this._imgs.length;e<=i;e++)if(!this._imgs[e])return void(this._imgs[e]=t)},i.prototype.start=function(){Laya.timer.frameLoop(1,this,this.loopHandler,null,!0)},i.prototype.loopHandler=function(){for(var t=this._imgs.length,e=!0,i=0;i<t;i++){var n=this._imgs[i];n&&(e=e&&!1,this._dirs[i]||(this._dirs[i]=1),n.y+=this._offset,n.rotation<=-this._animoRange?this._dirs[i]=1:n.rotation>=this._animoRange&&(this._dirs[i]=-1),1===this._dirs[i]?n.rotation+=this._animoffset:n.rotation-=this._animoffset,n.y>=this._lastY&&(this._imgs[i].removeSelf(),this.idleImgs.push(this._imgs[i]),this._imgs[i]=null,this._dirs[i]=null))}e&&this.stop()},i.prototype.stop=function(){Laya.timer.clear(this,this.loopHandler);for(var t=0,e=this.idleImgs.length;t<e;t++){var i=this.idleImgs[t];i.off("click",n.RedPackCtrl.instance,n.RedPackCtrl.instance.openPanel),i.removeSelf(),i.destroy(),this.idleImgs[t]=null}this._imgs.length=0,this.idleImgs.length=0,this._dirs.length=0},e=i,n.RedPackManager=e}(modules=modules||{}),function(t){var h,e,i;function n(){this._waveCount=e.instance.getCfgById(71004)[1][0],this.times=[],this._info=[0,0,[]]}h=t.redPack||(t.redPack={}),e=t.config.BlendCfg,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getRepackListReply=function(t){this.countLimit=t[4];var e=this.endTime=t[3];if(e){h.RedPackCtrl.instance.getRedpackInfo();var i=t[2]+1e3,n=t[0],s=t[1]-n+1;s<this._waveCount&&(this._waveCount=s);for(var o=(e-i)/this._waveCount,a=this._waveCount-1,r=0;0<=a;a--,r++){var l=i+o*r;l>GlobalData.serverTime&&(this.times[a]=l)}this.countOfWave=Math.ceil(s/this._waveCount),h.RedPackCtrl.instance.beginRain()}else this.times.length=0},n.prototype.getRedpackInfoReply=function(t){this._info=t,GlobalData.dispatcher.event("RED_PACK_INFO_UPDATE")},n.prototype.openRedPackReply=function(t){this._openInfo=t,GlobalData.dispatcher.event("RED_PACK_UPDATE")},Object.defineProperty(n.prototype,"openInfo",{get:function(){return this._openInfo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"yetCount",{get:function(){return this._info[0]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"goldTotal",{get:function(){return this._info[1]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"goldRecord",{get:function(){return this._info[2]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"residueCount",{get:function(){var t=this.countLimit-this.yetCount;return t<0?0:t},enumerable:!0,configurable:!0}),i=n,h.RedPackModel=i}(modules=modules||{}),function(i){var t,e,n,s;function o(){}t=i.repeatPay||(i.repeatPay={}),e=i.common.GlobalData,n=i.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.getWeekAccumulateReply=function(t){t&&(this.state=t[0],this.time=t[1],this.list=t[2],this.money=t[3],this.checkRP(),this.setFuncState(),e.dispatcher.event("WEEK_REPEAT_PAY_UPDATE"))},o.prototype.setFuncState=function(){n.instance.setActionOpen(212,this.state?1:2)},o.prototype.checkRP=function(){for(var t=0,e=this.list;t<e.length;t++)if(2==e[t][1])return void i.redPoint.RedPointCtrl.instance.setRPProperty("weekRepeatPayRP",!0);i.redPoint.RedPointCtrl.instance.setRPProperty("weekRepeatPayRP",!1)},s=o,t.RepeatPayModel=s}(modules=modules||{}),function(t){var e,i,l,n,s,h,o;function a(){return i.call(this)||this}e=t.repeatPay||(t.repeatPay={}),l=t.repeatPay.RepeatPayModel,n=ui.InvestItemUI,s=t.common.CustomClip,h=t.config.WeekRepeatPayCfg,i=n,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.investText,"#1f304d","SimHei",26),this._items=[this.investBase1,this.investBase2,this.investBase3,this.investBase4],this._btnClip=CommonUtil.creatEff(this,"btn_light",15),this._btnClip.scale(.8,.8,!0),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-10,!0)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("WEEK_REPEAT_PAY_UPDATE",this,this.updateBtnState)},a.prototype.setData=function(t){var e=this._id=t[0];this._state=t[1];var i=h.instance.getCfgById(e),n=i[1];this.investText.innerHTML="累计充值<span style='color:#b15315'>&nbsp;"+n+"元</span>,可领取奖励";for(var s=CommonUtil.formatItemData(i[4]),o=0,a=this._items.length;o<a;o++)o>=s.length?this._items[o].visible=!1:(this._items[o].visible=!0,this._items[o].dataSource=s[o]);this.updateBtnState();var r=l.instance.money;this.scheduleText.text="("+r+"/"+n+")",this.scheduleText.color=n<=r?"#168a17":"#ff3e3e"},a.prototype.updateBtnState=function(){l.instance.state?2==this._state?(s.thisPlay(this._btnClip),this.sureBtn.skin="common/btn_tongyong_23.png",this.sureBtn.labelColors="#9d5119",this.sureBtn.mouseEnabled=!0,this.sureBtn.label="领取",this.sureBtn.pos(482,64,!0)):1==this._state?(s.thisStop(this._btnClip),this.sureBtn.skin="common/btn_tongyong_24.png",this.sureBtn.labelColors="#465460",this.sureBtn.label="前往充值",this.sureBtn.mouseEnabled=!0,this.sureBtn.pos(482,64,!0)):(s.thisStop(this._btnClip),this.sureBtn.skin="common/txt_commmon_ylq.png",this.sureBtn.mouseEnabled=!1,this.sureBtn.label="",this.sureBtn.pos(505,64,!0)):(s.thisStop(this._btnClip),this.sureBtn.skin="common/txt_commmon_yjies.png",this.sureBtn.mouseEnabled=!1,this.sureBtn.label="",this.sureBtn.pos(505,64,!0))},a.prototype.sureBtnHandler=function(){l.instance.state?2==this._state?e.RepeatPayCtrl.instance.getWeekAccumulateAward(this._id):1==this._state&&WindowManager.instance.open(111):CommonUtil.noticeError(41108)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._items=this.destroyElement(this._items),this._btnClip=this.destroyElement(this._btnClip),i.prototype.destroy.call(this,t)},o=a,e.RepeatPayItem=o}(modules=modules||{}),function(t){var i,e,n,l,h,s;function o(){return null!==e&&e.apply(this,arguments)||this}i=t.resBack||(t.resBack={}),n=ui.ResBackItem_1UI,l=t.bag.BaseItem,h=t.config.RetrieveCfg,e=n,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._items=[]},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,i.ResBackModel.instance,i.ResBackModel.instance.backHandler,[this._info]),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateProp)},o.prototype.setData=function(t){var e=(this._info=t)[1],i=h.instance.getResCfgById(e);if(!i)throw new Error("资源找回id为"+e+",配置为空!");var n=CommonUtil.formatItemData(this._info[3]);if(!n)throw new Error("资源找回没有奖励");for(var s=this._items.length>n.length?this._items.length:n.length,o=0;o<s;o++)if(o>=n.length)this._items[o].visible=!1;else{if(!this._items[o]){var a=new l;a.pos(12+110*o,37,!0),this.addChild(a),this._items[o]=a}this._items[o].dataSource=n[o],this._items[o]._numTxt.text=CommonUtil.bigNumToString(n[o][1],!1)}this.nameTxt.text=i[1];var r=t[2];this.countTxt.text="可找回"+r+"次",this.updateProp()},o.prototype.updateProp=function(){var t=i.ResBackModel.instance.unitPriceByInfo(this._info),e=CommonUtil.getPropCountById(90140001);this.numTxt.text=""+t,this.numTxt.color=t<=e?"#2d1a1a":"#ff3e3e"},o.prototype.destroy=function(){this._items=this.destroyElement(this._items),e.prototype.destroy.call(this)},s=o,i.ResBackItem1=s}(modules=modules||{}),function(t){var i,e,n,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}i=t.resBack||(t.resBack={}),n=ui.ResBackItem_2UI,s=t.config.RetrieveCfg,e=n,__extends(a,e),a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn,i.ResBackModel.instance,i.ResBackModel.instance.backHandler,[this._info]),this.onAutoGlobalEvt("PLAYER_UPDATE_MONEY",this,this.updateProp)},a.prototype.setData=function(t){var e=(this._info=t)[1],i=s.instance.getLilianCfgById(e);if(!i)throw new Error("历练找回id为"+e+",配置为空!");this.nameTxt.text=i[1];var n=t[2];this.countTxt.text="(可找回"+n+"次)",this.valueTxt.text=i[4]+"点",this.updateProp()},a.prototype.updateProp=function(){var t=i.ResBackModel.instance.unitPriceByInfo(this._info),e=CommonUtil.getPropCountById(90140001);this.numTxt.text=""+t,this.numTxt.color=t<=e?"#2d1a1a":"#ff3e3e"},o=a,i.ResBackItem2=o}(modules=modules||{}),function(i){var n,s,o,t;function e(){this._res={},this._lilian={}}n=i.resBack||(i.resBack={}),s=utils.TableUtils,o=i.config.RetrieveCfg,Object.defineProperty(e,"instance",{get:function(){return this._instance=this._instance||new e},enumerable:!0,configurable:!0}),e.prototype.update=function(t){this.lilianArr=t[1],s.clear(this._lilian),this.setInfo(this._lilian,this.lilianArr),GlobalData.dispatcher.event("RETRIEVE_LILIAN_UPDATE"),this.resArr=t[0],s.clear(this._res),this.setInfo(this._res,this.resArr),GlobalData.dispatcher.event("RETRIEVE_RES_UPDATE");var e=t[2];i.redPoint.RedPointCtrl.instance.setRPProperty("lilianBackRP",!!e&&0<this.resArr.length),i.redPoint.RedPointCtrl.instance.setRPProperty("resBackRP",!!e&&0<this.lilianArr.length)},e.prototype.setInfo=function(t,e){for(var i=0,n=e;i<n.length;i++){var s=n[i];t[s[1]]=s}},e.prototype.singleUpdate=function(t){var e=t[1][0];1===e?this.res=t:2===e&&(this.lilian=t)},Object.defineProperty(e.prototype,"res",{set:function(t){this.optOf(t,this._res),GlobalData.dispatcher.event("RETRIEVE_RES_UPDATE")},enumerable:!0,configurable:!0}),e.prototype.getRes=function(){return this._res},Object.defineProperty(e.prototype,"lilian",{set:function(t){this.optOf(t,this._lilian),GlobalData.dispatcher.event("RETRIEVE_LILIAN_UPDATE")},enumerable:!0,configurable:!0}),e.prototype.getLilian=function(){return this._lilian},e.prototype.optOf=function(t,e){var i=t[0],n=t[1],s=n[1];if(1===i){if(0===n[2])throw new Error("资源找回次数是0 ,为何是更新不是删除???");e[s]=n}else 2===i&&delete e[s]},e.prototype.totalPriceByInfo=function(t){var e=t[0],i=t[1],n=t[2],s=t[4]+1;return o.instance.getTotalPriceByTypeIdCount(e,i,s,n)},e.prototype.unitPriceByInfo=function(t){var e=t[0],i=t[1],n=t[4]+1;return o.instance.getUnitPriceByTypeIdCount(e,i,n)},e.prototype.backHandler=function(t){var e=t[2],i=this.unitPriceByInfo(t);if(CommonUtil.getPropCountById(90140001)<i)CommonUtil.goldNotEnoughAlert();else if(1===e)n.ResBackCtrl.instance.getrieveRes([t]);else if(1<e)WindowManager.instance.open(399,t);else if(e<=0)throw new Error("资源找回次数是"+e+",为何没被删掉还有界面???")},t=e,n.ResBackModel=t}(modules=modules||{}),function(t){var e,s,i;function n(t,e,i){var n=s.call(this)||this;return n.startY=0,n._hight=0,n._oneBoll=!0,n._twoBoll=!0,n._threeBoll=!0,n._htmlArr=i,n.innerHTML="",n.width=t,n.style.fontFamily="SimHei",n.style.align="left",n.style.fontSize=e,n}e=t.rotary_table_jiuzhou||(t.rotary_table_jiuzhou={}),s=laya.html.dom.HTMLDivElement,__extends(n,s),n.prototype.setText=function(t,e,i){i&&(this.innerHTML=i),this.startY=t,this._hight=e,this._oneBoll=!1,this._twoBoll=!1,this._threeBoll=!1,this.pos(0,this.startY),this.visible=!0},n.prototype.closeTimer=function(){this._oneBoll=!0,this._twoBoll=!0,this._threeBoll=!0},n.prototype.updateList=function(){this._threeBoll||(this.y-=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this.y<=this._hight-this.contextHeight&&!this._oneBoll&&(this._oneBoll=!0,GlobalData.dispatcher.event("ROTARYTABLE_JIUZHOU_SHOWHTML")),this.y<=-this.contextHeight&&!this._twoBoll&&(this._twoBoll=!0,this._threeBoll=!0,this.visible=!1))},n.prototype.destroy=function(t){void 0===t&&(t=!0),Laya.timer.clear(this,this.updateList),s.prototype.destroy.call(this,t)},i=n,e.HtmlReward=i}(modules=modules||{}),function(t){var r,e,l,i;function n(){var t=e.call(this)||this;return t._rank=1,t}r=t.rotary_table_jiuzhou||(t.rotary_table_jiuzhou={}),l=t.config.JzDuobaoRankCfg,e=ui.RotaryTableItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.reward1,this.reward2,this.reward3],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",22,"left")},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_MYLIST",this,this.showUI),this.onAutoGlobalEvt("ROTARYTABLE_JIUZHOU_QULIST",this,this.showUI)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._rank=t,this.showUI()},n.prototype.showUI=function(){this.oneImage.visible=1==this._rank,this.twoImage.visible=2==this._rank,this.threeImg.visible=3==this._rank,this.otherBox.visible=3<this._rank,this.showRank(r.RotaryTableJiuZhouModel.instance._nowIndex)},n.prototype.showRank=function(t){this.afterthired.value=""+this._rank;for(var e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;var i=0===t?r.RotaryTableJiuZhouModel.instance._myNodeList[this._rank]:r.RotaryTableJiuZhouModel.instance._quNodeList[this._rank],n=l.instance.getGradeByRank(t,this._rank),s=l.instance.getDate(t,n);if(s){var o=s[4];for(e=0;e<o.length;e++){var a=this._taskBase[e];a&&(a.dataSource=[o[e][0],o[e][1],0,null],a.visible=!0)}}this.playername.visible=!!i,this.notplaylisttxt.visible=!i,i?(this.playername.text=0===t?i[1]:i[1]+"服",this.StatementHTML.innerHTML="积分:<span style='color:#168a17'>"+i[2]+"</span>"):this.StatementHTML.innerHTML="上榜条件:<span style='color:#168a17'>"+s[2]+"</span>积分"},i=n,r.RotaryTableJiuZhouRankAwardItem=i}(modules=modules||{}),function(t){var s,e,i,n;function o(){return e.call(this)||this}s=t.rotary_table_jiuzhou||(t.rotary_table_jiuzhou={}),i=Laya.Point,e=ui.RotaryTableJiFenItemUI,__extends(o,e),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._challengeClip=this.destroyElement(this._challengeClip),e.prototype.destroy.call(this,t)},o.prototype.initialize=function(){e.prototype.initialize.call(this),this._startPos=new i(151,69),this._items=new Array,this._items=[this.rewardBase1,this.rewardBase2,this.rewardBase3,this.rewardBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",26)},o.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._date=t,this.updateUI())},o.prototype.updateUI=function(){this.showReward(),this.showText()},o.prototype.showReward=function(){for(var t=0;t<this._items.length;t++)(i=this._items[t]).visible=!1;var e=this._date[3];if(e)for(t=0;t<e.length;t++){var i;if(i=e[t]){var n=i[0],s=i[1],o=this._items[t];o&&(o.dataSource=[n,s,0,null],o.visible=!0)}}},o.prototype.showText=function(){var t=this._data[2],e=this._data[0],i=s.RotaryTableJiuZhouModel.instance.score;this.StatementHTML.innerHTML=t<=i?"积分达到<span style='color:#168a17'>"+t+"</span>可领取(<span style='color:#168a17'>"+i+"/"+t+"</span>)":"积分达到<span style='color:#168a17'>"+t+"</span>可领取(<span style='color:#ff3e3e'>"+i+"/"+t+"</span>)";var n=s.RotaryTableJiuZhouModel.instance.getRewardStart(e);this.HasBroughtImg.visible=2==n},n=o,s.RotaryTableJiuZhouRankItem=n}(modules=modules||{}),function(t){var e,s,i;function n(t,e,i){var n=s.call(this)||this;return n.startY=0,n._hight=0,n._oneBoll=!0,n._twoBoll=!0,n._threeBoll=!0,n._htmlArr=i,n.innerHTML="",n.width=t,n.style.fontFamily="SimHei",n.style.align="left",n.style.fontSize=e,n}e=t.rotary_table_soraing||(t.rotary_table_soraing={}),s=laya.html.dom.HTMLDivElement,__extends(n,s),n.prototype.setText=function(t,e,i){i&&(this.innerHTML=i),this.startY=t,this._hight=e,this._oneBoll=!1,this._twoBoll=!1,this._threeBoll=!1,this.pos(0,this.startY),this.visible=!0},n.prototype.closeTimer=function(){this._oneBoll=!0,this._twoBoll=!0,this._threeBoll=!0},n.prototype.updateList=function(){this._threeBoll||(this.y-=1*(Laya.stage.frameRate===Laya.Stage.FRAME_SLOW?2:1),this.y<=this._hight-this.contextHeight&&!this._oneBoll&&(this._oneBoll=!0,GlobalData.dispatcher.event("ROTARYTABLE_SOARING_SHOWHTML")),this.y<=-this.contextHeight&&!this._twoBoll&&(this._twoBoll=!0,this._threeBoll=!0,this.visible=!1))},n.prototype.destroy=function(t){void 0===t&&(t=!0),Laya.timer.clear(this,this.updateList),s.prototype.destroy.call(this,t)},i=n,e.HtmlReward=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){this._openState=0,this._type=0,this._param=1,this._score=0,this._restTm=0,this._totalScore=0,this._rewardList=new Array,this._svrBroadcastList=new Array,this._PayRewardNoteList=new Array,this._noteList=new Array,this._myNodeList=new Array,this._myNodeListByObjId=new Array,this._quNodeList=new Array,this._quNodeListByObjId=new Array,this._tenMoney=i.instance.tenMoney,this._oneMoney=i.instance.oneMoney,this._gaiLvBlenCB=new Array,this._gaiLvBlenCB[1]=66016,this._gaiLvBlenCB[2]=66017,this._gaiLvBlenCB[3]=66018,this._gaiLvBlenCB[4]=66019,this._gaiLvBlenCB[5]=66020,this._gaiLvBlenCB[6]=66021,this._gaiLvBlenCB[7]=66022,this._gaiLvBlenFS=new Array,this._gaiLvBlenFS[1]=66007,this._gaiLvBlenFS[2]=66010,this._gaiLvBlenFS[3]=66011,this._gaiLvBlenFS[4]=66012,this._gaiLvBlenFS[5]=66013,this._gaiLvBlenFS[6]=66014,this._gaiLvBlenFS[7]=66015}e=t.rotary_table_soraing||(t.rotary_table_soraing={}),i=t.config.DuobaoWeightCfg,n=t.redPoint.RedPointCtrl,s=t.funcOpen.FuncOpenModel,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"result",{get:function(){return this._result},set:function(t){this._result=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"openState",{get:function(){return this._openState},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"param",{get:function(){return this._param},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"noteList",{get:function(){return this._noteList},set:function(t){this._noteList=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"svrBroadcastList",{get:function(){return this._svrBroadcastList},set:function(t){this._svrBroadcastList=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"PayRewardNoteList",{get:function(){return this._PayRewardNoteList},set:function(t){this._PayRewardNoteList=t,this._PayRewardNoteList&&this._PayRewardNoteList.reverse()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),a.prototype.getInfo=function(t){this._openState=t[0],this._type=t[1],this._param=t[2],this._score=t[3],this._restTm=t[4]+GlobalData.serverTime,this._rewardList=t[5],GlobalData.dispatcher.event("ROTARYTABLE_SOARING_UPDATE"),this.changeRotaryPanel(),this.setRP()},a.prototype.updateInfo=function(t){this._openState=t[0],this._type=t[1],this._param=t[2],this._score=t[3],this._restTm=t[4]+GlobalData.serverTime,this._rewardList=t[5],GlobalData.dispatcher.event("ROTARYTABLE_SOARING_UPDATE"),this.changeRotaryPanel(),this.setRP()},a.prototype.getInfoMyNodeList=function(t){var e=t;if(e){this._myNodeList.length=0,this._myNodeListByObjId.length=0,this._myNodeList=new Array,this._myNodeListByObjId=new Array;for(var i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[3];this._myNodeList[s]=n,this._myNodeListByObjId[o]=n}GlobalData.dispatcher.event("ROTARYTABLE_SOARING_MYLIST")}},a.prototype.getInfoQuNodeList=function(t){var e=t;if(e){this._quNodeList.length=0,this._quNodeListByObjId.length=0,this._quNodeList=new Array,this._quNodeListByObjId=new Array;for(var i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[5];this._quNodeList[s]=n,this._quNodeListByObjId[o]=n}GlobalData.dispatcher.event("ROTARYTABLE_SOARING_QULIST")}},a.prototype.getgRadeRP=function(){if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&(e[0],1==e[1]))return!0}return!1},a.prototype.getRewardStart=function(t){if(this.rewardList){for(var e=0;e<this.rewardList.length;e++){var i=this.rewardList[e];if(i){var n=i[0],s=i[1];if(t==n)return s}}return 0}},a.prototype.getgRade=function(){for(var t=!1,e=0;e<this.rewardList.length;e++){var i=this.rewardList[e];if(i){var n=i[0];if(1==(a=i[1]))return[n,a];2==a&&(t=!0)}}var s=this.rewardList[this.rewardList.length-1];if(t)for(e=0;e<this.rewardList.length;e++){var o=this.rewardList[e];if(o){var a,n=o[0];if(0==(a=o[1]))return[n,a]}}else s=this.rewardList[0];return s?[n=s[0],a=s[1]]:[1,0]},a.prototype.getNoteList=function(){for(var t=new Array,e=0;e<this.noteList.length;e++){var i=this.noteList[e],n=i[0],s=i[1],o=i[2];t.push([n,s,o])}return t},a.prototype.getNoteListGj=function(){for(var t=new Array,e=0;e<this.noteList.length;e++){var i=this.noteList[e],n=i[0],s=(i[1],i[2]);1!=s&&7!=s||t.push(n)}return t},a.prototype.PayRewardRunReply=function(){GlobalData.dispatcher.event("ROTARYTABLE_SOARING_RUNREPLY")},a.prototype.openMyRecord=function(){GlobalData.dispatcher.event("ROTARYTABLE_SOARING_OPENRECORD")},a.prototype.updateSeverList=function(){GlobalData.dispatcher.event("ROTARYTABLE_SOARING_BROADCAST_LIST")},a.prototype.setRP=function(){var t=s.instance.getFuncNeedShow(195),e=s.instance.getFuncNeedShow(250),i=this.getgRadeRP();n.instance.setRPProperty("rotaryTablechongbangRP",i&&t),n.instance.setRPProperty("rotaryTableSoaringRP",i&&e)},a.prototype.changeRotaryPanel=function(){1==this._type?(t.funcOpen.FuncOpenModel.instance.setActionOpen(250,1),t.funcOpen.FuncOpenModel.instance.setActionOpen(195,2)):(t.funcOpen.FuncOpenModel.instance.setActionOpen(250,2),t.funcOpen.FuncOpenModel.instance.setActionOpen(195,1))},o=a,e.RotaryTableSoaringModel=o}(modules=modules||{}),function(t){var a,e,r,i;function n(){var t=e.call(this)||this;return t._paiMing=1,t}a=t.rotary_table_soraing||(t.rotary_table_soraing={}),r=t.config.DuobaoRankCfg,e=ui.RotaryTableItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.reward1,this.reward2,this.reward3],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",22)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_MYLIST",this,this.showUI),this.onAutoGlobalEvt("ROTARYTABLE_SOARING_QULIST",this,this.showUI)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._paiMing=t,this.showUI()},n.prototype.showUI=function(){this.oneImage.visible=1==this._paiMing,this.twoImage.visible=2==this._paiMing,this.threeImg.visible=3==this._paiMing,this.otherBox.visible=3<this._paiMing,0==a.RotaryTableSoaringModel.instance._nowIndex?this.showMylist():1==a.RotaryTableSoaringModel.instance._nowIndex&&this.showQulist()},n.prototype.showMylist=function(){this.afterthired.value=""+this._paiMing;for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=a.RotaryTableSoaringModel.instance._myNodeList[this._paiMing],i=r.instance.getGradeByRank(0,this._paiMing),n=r.instance.getDate(0,a.RotaryTableSoaringModel.instance.param,i);if(n){var s=n[6];for(t=0;t<s.length;t++){var o=this._taskBase[t];o&&(o.dataSource=[s[t][0],s[t][1],0,null],o.visible=!0)}}e?(this.playername.visible=!0,this.playername.text=e[1],this.notplaylisttxt.visible=!1,this.StatementHTML.innerHTML="积分:<span style='color:#168a17'>"+e[2]+"</span>"):(this.playername.visible=!1,this.notplaylisttxt.visible=!0,this.StatementHTML.innerHTML="上榜条件:<span style='color:#168a17'>"+n[3]+"</span>积分")},n.prototype.showQulist=function(){this.afterthired.value=""+this._paiMing;for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e=a.RotaryTableSoaringModel.instance._quNodeList[this._paiMing],i=r.instance.getGradeByRank(1,this._paiMing),n=r.instance.getDate(1,a.RotaryTableSoaringModel.instance.param,i);if(n){var s=n[6];for(t=0;t<s.length;t++){var o=this._taskBase[t];o&&(o.dataSource=[s[t][0],s[t][1],0,null],o.visible=!0)}}e?(this.playername.visible=!0,this.playername.text=e[1]+"服",this.notplaylisttxt.visible=!1,this.StatementHTML.innerHTML="积分:<span style='color:#168a17'>"+e[2]+"</span>"):(this.playername.visible=!1,this.notplaylisttxt.visible=!0,this.StatementHTML.innerHTML="上榜条件:<span style='color:#168a17'>"+n[3]+"</span>积分")},i=n,a.RotaryTableSoaringRankAwardItem=i}(modules=modules||{}),function(t){var s,e,i,n;function o(){return e.call(this)||this}s=t.rotary_table_soraing||(t.rotary_table_soraing={}),i=Laya.Point,e=ui.RotaryTableJiFenItemUI,__extends(o,e),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._challengeClip=this.destroyElement(this._challengeClip),e.prototype.destroy.call(this,t)},o.prototype.initialize=function(){e.prototype.initialize.call(this),this._startPos=new i(151,69),this._items=new Array,this._items=[this.rewardBase1,this.rewardBase2,this.rewardBase3,this.rewardBase4],CommonUtil.setHTMLPro(this.StatementHTML,"#4c5e8a","SimHei",26)},o.prototype.setData=function(t){e.prototype.setData.call(this,t),t&&(this._date=t,this.updateUI())},o.prototype.updateUI=function(){this.showReward(),this.showText()},o.prototype.showReward=function(){for(var t=0;t<this._items.length;t++)(i=this._items[t]).visible=!1;var e=this._date[4];if(e)for(t=0;t<e.length;t++){var i;if(i=e[t]){var n=i[0],s=i[1],o=this._items[t];o&&(o.dataSource=[n,s,0,null],o.visible=!0)}}},o.prototype.showText=function(){var t=this._data[3],e=this._data[0],i=s.RotaryTableSoaringModel.instance.score;this.StatementHTML.innerHTML=t<=i?"积分达到<span style='color:#168a17'>"+t+"</span>可领取(<span style='color:#168a17'>"+i+"/"+t+"</span>)":"积分达到<span style='color:#168a17'>"+t+"</span>可领取(<span style='color:#ff3e3e'>"+i+"/"+t+"</span>)";var n=s.RotaryTableSoaringModel.instance.getRewardStart(e);this.HasBroughtImg.visible=2==n},n=o,s.RotaryTableSoaringRankItem=n}(modules=modules||{}),function(f){!function(h){var t,e=f.core.BaseDialogEx,i=f.bag.BaseItem,c=f.config.RuinsCfg,n=f.common.SimpleList,a=f.notice.SystemNoticeManager,s=f.bag.BagItem,o=(t=e,__extends(r,t),r.prototype.destroy=function(){this._list=this.destroyElement(this._list),t.prototype.destroy.call(this)},r.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=n.create(p,100,145,1,5,5),this._list.size(this.v.listBox.width,this.v.listBox.height),this.v.listBox.addChild(this._list)},r.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.showUI()},r.prototype.showUI=function(){this.v.btn.selected=h.RuinsModel.instance.isScreen,this._list.selectedIndex=this._selected=-1;for(var t=c.instance.getBigRwdCfgByBidId(h.RuinsModel.instance.info[2]),e=t?t[4]:[],i=[],n=0;n<e.length;n+=3){var s=[e[n],e[n+1],0,null];if(h.RuinsModel.instance.isScreen){var o=f.config.ItemMaterialCfg.instance.getItemCfgById(s[0]),a=o[9][1];o&&f.quickUse.QuickUseHuanHuaModel.instance.screeningHuanHua(a?[a,1,0,null]:s,!1)[0]&&i.push(s)}else i.push(s)}if(this._list.datas=i,this.v.tipsText.visible=0===this._list.datas.length,h.RuinsModel.instance.info[3][0])for(n=0;n<i.length;++n)if(i[n][0]===h.RuinsModel.instance.info[3][0]){this._list.selectedIndex=n;break}},r.prototype.btnHandler=function(){h.RuinsModel.instance.isScreen=!h.RuinsModel.instance.isScreen,this.v.btn.selected=h.RuinsModel.instance.isScreen,this.showUI()},r.prototype.onEvt=function(){var o=this;t.prototype.onEvt.call(this),this.onAutoClick(this.v.btn,this,this.btnHandler),this.onAutoGlobalEvt("LIST_ITEM_CLICK",this,function(t){t===o._selected?o._list.selectedIndex=o._selected=-1:o._list.selectedIndex=t}),this.onAutoEvt(this._list,"select",this,function(){if(o._list.selectedData&&o._list.selectedIndex!=o._selected){var t=o._list.selectedData[0],e=c.instance.getBigRwdCfgByBidId(h.RuinsModel.instance.info[2]),i=e?e[4]:[],n=i.indexOf(t),s=-1<n?i[n+2]:1;h.RuinsModel.instance.getBigRewardCount(t)<s?o._selected=o._list.selectedIndex:(a.instance.addNotice("当前大奖已全部获得",!0),o._list.selectedIndex=o._selected)}}),this.onAutoClick(this.v.sureBtn,this,function(){if(o._list.selectedData){if(o._list.selectedData[0]===h.RuinsModel.instance.info[3][0])return void o.close();h.RuinsCtrl.instance.SetRuinsMysteryReward(h.RuinsModel.instance.fType,o._list.selectedData[0])}else a.instance.addNotice("请选择心仪的终极大奖",!0)})},r);function r(){return null!==t&&t.apply(this,arguments)||this}h.RuinsBigSelectAlert=o;var l,p=(l=i,__extends(u,l),u.prototype.destroy=function(t){void 0===t&&(t=!0),this.selectImg=this.destroyElement(this.selectImg),l.prototype.destroy.call(this,t)},u.prototype.initialize=function(){l.prototype.initialize.call(this),this.needTip=!1,this.selectImg=new Laya.Image("common/image_common_dg.png"),this.addChild(this.selectImg),this.selectImg.visible=!1,this.selectImg.pos(13,15,!0),this.nameVisible=!0,this.hintTxt.y=120,this.hintTxt.stroke=0,this._nameTxt.fontSize=20,this.hintTxt.fontSize=20,this._selectEnable=!1},u.prototype.setSelected=function(t){l.prototype.setSelected.call(this,t),this.selectImg.visible=t},u.prototype.setData=function(t){l.prototype.setData.call(this,t);var e=c.instance.getBigRwdCfgByBidId(h.RuinsModel.instance.info[2]),i=e?e[4]:[],n=i.indexOf(t[0]),s=-1<n?i[n+2]:1,o=h.RuinsModel.instance.getBigRewardCount(t[0]);this.hintTxt.text="("+(s-o)+"/"+s+")",this.hintTxt.color=o<s?"#3a5385":"#ff3e3e",this.hintTxt.visible=!0},u.prototype.clickHandler=function(){l.prototype.clickHandler.call(this),GlobalData.dispatcher.event("LIST_ITEM_CLICK",this.index)},u);function u(){return null!==l&&l.apply(this,arguments)||this}h.RuinsBigSelectItem=p;var d,y=(d=e,__extends(g,d),g.prototype.destroy=function(){this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),d.prototype.destroy.call(this)},g.prototype.initialize=function(){d.prototype.initialize.call(this),this._list=n.create(s,100,120,1,5,5),this._list.size(this.v.listBox.width,this.v.listBox.height),this.v.listBox.addChild(this._list),this._list1=n.create(s,100,120,1,5,5),this._list1.size(this.v.listBox1.width,this.v.listBox1.height),this.v.listBox1.addChild(this._list1)},g.prototype.setOpenParam=function(t){d.prototype.setOpenParam.call(this,t),h.RuinsModel.instance.info&&h.RuinsModel.instance.info[1];var e=c.instance.getBigRwdCfgByBidId(h.RuinsModel.instance.info[2]);if(e){for(var i=e[4]||[],n=[],s=0;s<i.length;s+=3)n.push([i[s],i[s+1],0,null]);var o=e[3][1]+1,a=c.instance.getBigRwdCfgByLayer(e[0],e[2][0],o);if(a){this.v.box1.visible=!0,this.v.listBg.height=306,this.v.listBox.height=280,this._list.height=280,this.v.bg.height=840,this.v.hint.y=850,this.height=840;var r=a[4]||[],l=[];for(s=0;s<r.length;s+=3)l.push([r[s],1,0,null]);this._list1.datas=l,this.v.title1.text=a[3][0]+"层大奖预览"}else this.v.box1.visible=!1,this.v.listBg.height=492,this.v.listBox.height=466,this._list.height=466,this.v.bg.height=660,this.v.hint.y=670,this.height=660;this._list.datas=n}},g);function g(){return null!==d&&d.apply(this,arguments)||this}h.RuinsBigPreviewAlert=y}(f.ruins||(f.ruins={}))}(modules=modules||{}),function(t){var u,e,i,n;function s(){this.task1=[],this.countAll=0,this.autoBuy=!1,this.isScreen=!1}u=t.ruins||(t.ruins={}),e=t.funcOpen.FuncOpenModel,i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.getStateById=function(t,e){return-1!=this.task1.indexOf(t)?3:this.countAll>=e?2:1},s.prototype.updateFestivalInfo=function(){this.fType?(e.instance.setActionOpen(896,1),e.instance.setActionOpen(897,1),e.instance.setActionOpen(898,1),e.instance.setActionOpen(895,1),u.RuinsCtrl.instance.GetRuinsMystery(this.fType),u.RuinsCtrl.instance.GetRuinsMysteryTask(this.fType),u.RuinsCtrl.instance.GetRuinsMysteryAllPeopleTasks(this.fType),u.RuinsCtrl.instance.GetRuinsMysteryAllPeopleTotalCostCount(this.fType),u.RuinsCtrl.instance.GetRuinsMysteryRank(this.fType)):(e.instance.setActionOpen(896,2),e.instance.setActionOpen(897,2),e.instance.setActionOpen(898,2),e.instance.setActionOpen(895,2),i.instance.setRPProperty("ruinsRP",!1),i.instance.setRPProperty("ruinsTaskRP",!1),i.instance.setRPProperty("ruinsTaskRP1",!1))},s.prototype.delayedButNoPutInBag=function(t){void 0===t&&(t=!1),t&&s.instance.isShowReward(),CommonUtil.delayedButNoPutInBag()},s.prototype.isShowReward=function(t){void 0===t&&(t=null);var e=[],i={};console.log("延迟数据 自动",u.RuinsCtrl.instance._delayedItems);for(var n=0,s=u.RuinsCtrl.instance._delayedItems.length;n<s;n++){var o=u.RuinsCtrl.instance._delayedItems[n],a=o[1][0],r=o[1][1],l=o[2];i[a]?i[a]+=r*l:i[a]=r*l}for(var h in i)if(Object.prototype.hasOwnProperty.call(i,h)){var c=i[h];e.push([Number(h),c,0,null])}t&&e.unshift([t[0],t[1],0,null]),console.log("合并后 allReward 自动",e),0<e.length&&WindowManager.instance.open(212,[e,"恭喜获得"]),this.claall()},s.prototype.isShowReward1=function(t){void 0===t&&(t=null);var e=[],i=[t[0],t[1],0,null],n={};if(console.log("延迟数据 非自动",u.RuinsCtrl.instance.waitList1),u.RuinsCtrl.instance.waitList1)for(var s=0,o=u.RuinsCtrl.instance.waitList1.length;s<o;s++){var a=u.RuinsCtrl.instance.waitList1[s],r=a[1][0],l=a[1][1],h=a[2];n[r]?n[r]+=l*h:n[r]=l*h}for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)){var p=n[c];e.push([Number(c),p,0,null])}e.unshift(i),console.log("合并后 allReward 非自动",e),0<e.length&&WindowManager.instance.open(212,[e,"恭喜获得"]),this.claall()},s.prototype.claall=function(){u.RuinsCtrl.instance._delayedItems&&(u.RuinsCtrl.instance._delayedItems.length=0),u.RuinsCtrl.instance.waitList1&&(u.RuinsCtrl.instance.waitList1.length=0),u.RuinsCtrl.instance.bigRewardId&&(u.RuinsCtrl.instance.bigRewardId=null),CommonUtil.delayedButNoPutInBag()},s.prototype.getBigRewardCount=function(t){if(this.info){var e=this.info[5];for(var i in e)if(e[i][0]===t)return e[i][1]}return 0},s.prototype.getItemByPos=function(t){if(this.info){var e=this.info[4];for(var i in e)if(e[i][0]===t)return e[i]}return null},s.prototype.getRandId=function(){for(var t=[],e=1;e<50;++e)t.push(e);var i=this.info?this.info[4]:[];for(var e in i){var n;-1<(n=t.indexOf(i[e][0]))&&t.splice(n,1)}return 0<t.length?t[n=Math.floor(Math.random()*t.length)]:0},Object.defineProperty(s.prototype,"hasBig",{get:function(){return this.info&&this.info[3]&&this.info[3][0]&&this.info[3][0]!=this.info[3][1]},enumerable:!0,configurable:!0}),n=s,u.RuinsModel=n}(modules=modules||{}),function(y){!function(o){var n,t=y.core.BaseViewEx,s=y.common.SimpleList,a=y.config.RuinsCfg,r=y.config.BlendCfg,e=y.notice.SystemNoticeManager,l=y.common.CustomClip,i=y.bag.BagModel,h=(n=t,__extends(c,n),c.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._effect=this.destroyElement(this._effect),n.prototype.destroy.call(this,t)},c.prototype.initialize=function(){n.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=s.create(u,90,92,1,7),this._list.size(this.v.box.width,this.v.box.height),this.v.box.addChild(this._list);for(var t=[],e=1;e<50;++e)t.push(e);this._list.datas=t;var i=r.instance.getCfgById(97202)[1];for(e=0;e<i.length;e+=3)i[e]===o.RuinsModel.instance.fType&&(this._cost=[i[e+1],i[e+2]]);for(this._cost&&(this.v.icon.skin=CommonUtil.getIconById(this._cost[0],!0)),this._effect=l.create("assets/effect/task.atlas","task",8,!0,7),this._effect.setProperty(this,300,160),this._effect.scale(.34,1.6),i=r.instance.getCfgById(97203)[1],e=0;e<i.length;e+=3)i[e]===o.RuinsModel.instance.fType&&(this._buyCost=[i[e+1],i[e+2]]);this.v.descHtml.style.leading=10,CommonUtil.setHTMLPro(this.v.descHtml,"#50ff28","SimHei",20),this.v.descHtml.innerHTML="特别说明：<span style='color:#ffffff'>所选终极大奖在本层</span>必定可被探索",this._tween=TweenJS.create(this.v.big_select).yoyo(!0).repeat(Number.POSITIVE_INFINITY)},c.prototype.autoHandler=function(){if(!y.bag.BagUtil.canAddItemsByBagIdCount([],!0))return this.cancelAuto(),console.log("背包满了 自动翻牌的时候检测到满了"),void this.showAllReward();var t=o.RuinsModel.instance.getRandId();this.openHandler(t)},c.prototype.openHandler=function(t){if(o.RuinsCtrl.instance.wait||t<1||49<t)this.cancelAuto();else{if(!o.RuinsModel.instance.hasBig)return WindowManager.instance.open(1347),void this.cancelAuto();var e=a.instance.getLayerCfg(o.RuinsModel.instance.fType,y.festival.FestivalModel.instance.getCrossOpenServerDay(o.RuinsModel.instance.fType),o.RuinsModel.instance.info?o.RuinsModel.instance.info[1]:1),i=e?e[4]:0;if(CommonUtil.getPropCountById(this._cost[0])<i){if(!o.RuinsModel.instance.autoBuy)return WindowManager.instance.open(1349,t),void this.cancelAuto();if(CommonUtil.getPropCountById(this._buyCost[0])<this._buyCost[1])return y.bag.BagUtil.openLackPropAlert(this._buyCost[0],this._buyCost[1]),void this.cancelAuto();if(!o.RuinsModel.instance.getItemByPos(t))return void o.RuinsCtrl.instance.OpenRuinsMysteryCard(o.RuinsModel.instance.fType,t,!0)}o.RuinsModel.instance.getItemByPos(t)||o.RuinsCtrl.instance.OpenRuinsMysteryCard(o.RuinsModel.instance.fType,t,!1)}},c.prototype.cancelAuto=function(){this.v.checkBtn.selected=o.RuinsModel.instance.auto=!1,Laya.timer.clear(this,this.autoHandler)},c.prototype.onEvt=function(){var i=this;n.prototype.onEvt.call(this),this.onAutoGlobalEvt("RUINS_AUTO_BUY_UPDATE",this,this.updateBag),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateBag),this.onAutoGlobalEvt("RUINS_INFO_UPDATE",this,this.updateView),this.onAutoGlobalEvt("RUINS_CARD_OPENED",this,function(t){o.RuinsModel.instance.info[3][0]===t[1][0]&&(WindowManager.instance.open(95,[t[1][0]]),i.cancelAuto()),o.RuinsModel.instance.auto&&Laya.timer.once(333,i,i.autoHandler,null,!0)}),this.onAutoGlobalEvt("PANEL_CLOSED",this,function(t){if(95===t){if(o.RuinsCtrl.instance.waitList)for(;o.RuinsCtrl.instance.waitList.length;){var e=o.RuinsCtrl.instance.waitList.shift();o.RuinsModel.instance.info[4].push(e),GlobalData.dispatcher.event("RUINS_CARD_OPENED",[e])}o.RuinsCtrl.instance.waitList1&&0<o.RuinsCtrl.instance.waitList1.length?(console.log("剩余的奖励长度大于0 延迟"),Laya.timer.once(500,i,function(){i.showAllReward()})):(console.log("剩余的奖励 没有了 直接展示"),i.showAllReward()),Laya.timer.once(500,i,function(){o.RuinsCtrl.instance.waitClose=!0,o.RuinsCtrl.instance.GetRuinsMystery(o.RuinsModel.instance.fType)})}}),this.onAutoGlobalEvt("RUINS_OPEN_CARD",this,function(t){o.RuinsModel.instance.auto&&(o.RuinsModel.instance.delayedButNoPutInBag(i.v.checkBtn.selected),i.cancelAuto(),e.instance.addNotice("取消自动翻牌",!0)),o.RuinsModel.instance.rank&&o.RuinsModel.instance.rank[2]<GlobalData.serverTime?CommonUtil.alert("温馨提示","本次夺宝奇兵排行已结束，探秘增加层数不计算在排行中，是否继续翻牌？",[Handler.create(i,i.openHandler,[t])],[],null,!0,null,7):i.openHandler(t)}),this.onAutoClick(this.v.big_bg,this,function(){WindowManager.instance.open(1347)}),this.onAutoClick(this.v.big_change,this,function(){i.cancelAuto(),CommonUtil.alert("温馨提示","重新选择大奖会重置翻牌,是否重新选择?",[Handler.create(WindowManager.instance,WindowManager.instance.open,[1347])],[])}),this.onAutoClick(this.v.preview,this,function(){WindowManager.instance.open(1348)}),this.onAutoClick(this.v.helpBtn,this,function(){CommonUtil.alertHelp(19055)}),this.onAutoClick(this.v.checkBtn,this,function(){if(o.RuinsModel.instance.delayedButNoPutInBag(i.v.checkBtn.selected),!o.RuinsCtrl.instance.wait)if(i.v.checkBtn.selected=o.RuinsModel.instance.auto=!i.v.checkBtn.selected,i.v.checkBtn.selected)if(o.RuinsModel.instance.hasBig){if(!y.bag.BagUtil.canAddItemsByBagIdCount([],!0))return i.cancelAuto(),void console.log("背包满了 点击自动翻牌");if(o.RuinsModel.instance.rank&&o.RuinsModel.instance.rank[2]<GlobalData.serverTime)return void CommonUtil.alert("温馨提示","本次夺宝奇兵排行已结束，探秘增加层数不计算在排行中，是否继续翻牌？",[Handler.create(i,i.autoHandler)],[Handler.create(i,i.cancelAuto)],Handler.create(i,i.cancelAuto),!0,null,7);i.autoHandler()}else e.instance.addNotice("请先选择心仪的终极大奖",!0),i.cancelAuto();else Laya.timer.clear(i,i.autoHandler)}),this.onAutoClick(this.v.cancel,this,function(){o.RuinsModel.instance.autoBuy=!1,i.updateBag()})},c.prototype.showAllReward=function(){0===i.instance._delayedItems.length?(o.RuinsModel.instance.delayedButNoPutInBag(),console.log(" 非自动状态 大奖界面关闭后 展示所有活得的奖励 bigReward：",o.RuinsCtrl.instance.bigRewardId),o.RuinsCtrl.instance.bigRewardId&&o.RuinsModel.instance.isShowReward1(o.RuinsCtrl.instance.bigRewardId)):(console.log(" 自动状态 大奖界面关闭后 展示所有活得的奖励 bigReward：",o.RuinsCtrl.instance.bigRewardId),o.RuinsModel.instance.isShowReward(o.RuinsCtrl.instance.bigRewardId))},c.prototype.offEvt=function(){n.prototype.offEvt.call(this),Laya.timer.clearAll(this),this._tween.stop(),o.RuinsCtrl.instance.waitClose=!1},c.prototype.updateView=function(){this._list.updateShowItem();var t=o.RuinsModel.instance.info,e=t?t[1]:1;this.v.layer.text="遗迹"+e+"层",o.RuinsModel.instance.hasBig?(this.v.big_item.dataSource=[t[3][0],t[3][1],0,null],this.v.big_item.visible=this.v.big_change.visible=!0,this.v.big_select.visible=this.v.big_bg.visible=!1,l.thisStop(this._effect),this._tween.stop()):(this.v.big_item.visible=this.v.big_change.visible=!1,this.v.big_select.visible=this.v.big_bg.visible=!0,l.thisPlay(this._effect),this.v.big_select.scale(1,1),this._tween.to({scaleX:1.2,scaleY:1.2},200).start());var i=a.instance.getBigRwdCfgByBidId(t?t[2]:0),n=i?i[3][1]+1:0;i&&a.instance.getBigRwdCfgByLayer(i[0],i[2][0],n)?this.v.desc.text="到达遗迹"+n+"层可解锁更多终极大奖及暴击倍率":this.v.desc.text="已解锁全部终极大奖和暴击倍率",this.updateBag()},c.prototype.updateTime=function(){Laya.timer.clear(this,this.updateTime);var t=y.festival.FestivalModel.instance.info[o.RuinsModel.instance.fType],e=t?t[2]:0;e<GlobalData.serverTime?(this.v.time.text="已结束",this.v.time.color="#ff3e3e"):(this.v.time.text=CommonUtil.timeStampDDHHMMToHHMMSS(e),this.v.time.color="#50ff28",Laya.timer.once(1e3,this,this.updateTime))},c.prototype.updateBag=function(){var t=a.instance.getLayerCfg(o.RuinsModel.instance.fType,y.festival.FestivalModel.instance.getCrossOpenServerDay(o.RuinsModel.instance.fType),o.RuinsModel.instance.info?o.RuinsModel.instance.info[1]:1),e=t?t[4]:0;if(o.RuinsModel.instance.autoBuy){var i=CommonUtil.getPropCountById(this._cost[0]);this._cost&&e<=i?(this.v.count.text=i+"/"+e,this.v.count.color="#3a5385",this.v.icon.skin=CommonUtil.getIconById(this._cost[0],!0),this.v.cancel.visible=!1):this._buyCost&&(this.v.count.text=""+this._buyCost[1]*e,this.v.count.color="#3a5385",this.v.icon.skin=CommonUtil.getIconById(this._buyCost[0],!0),this.v.cancel.visible=!0)}else this._cost&&(i=CommonUtil.getPropCountById(this._cost[0]),this.v.count.text=i+"/"+e,this.v.count.color=i<e?"#ff3e3e":"#3a5385",this.v.icon.skin=CommonUtil.getIconById(this._cost[0],!0),this.v.cancel.visible=!1)},c.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.v.checkBtn.selected=o.RuinsModel.instance.auto=!1,o.RuinsCtrl.instance.box=this.v.box,this.updateView(),this.updateTime(),this.updateBag(),o.RuinsCtrl.instance.GetRuinsMystery(o.RuinsModel.instance.fType)},c.prototype.close=function(){this.showAllReward(),n.prototype.close.call(this)},c);function c(){return null!==n&&n.apply(this,arguments)||this}o.RuinsPanel=h;var p,u=(p=ui.RuinsItemUI,__extends(d,p),d.prototype.initialize=function(){p.prototype.initialize.call(this),this.txt.visible=this.item.visible=!1,this.bg.visible=!0},d.prototype.setData=function(t){p.prototype.setData.call(this,t);var e=o.RuinsModel.instance.getItemByPos(t);if(e){if(!o.RuinsModel.instance.hasBig){if(!o.RuinsCtrl.instance.waitClose)return this.bg.visible=!0,this.bg.scaleX=1,void(this.txt.visible=this.item.visible=!1);Laya.timer.once(1e3,this,this.closeCard,null,!0)}this.item.dataSource=[e[1][0],e[1][1],0,null],this.item.visible=!0,this.item.scaleX=.8,this.bg.visible=!1,1<e[2]?(this.txt.visible=!0,this.txt.text="暴击x"+e[2]):this.txt.visible=!1}else this.bg.visible=!0,this.bg.scaleX=1,this.txt.visible=this.item.visible=!1},d.prototype.closeCard=function(){var t=this;this.item.visible=!0,this.bg.visible=!1,this.item.scaleX=.8,this.txt.visible=!1,this.tween1=TweenJS.create(this.item).to({scaleX:0},50).onComplete(function(){t.bg.visible=!0,t.item.visible=!1,t.bg.scaleX=0,t.tween2=TweenJS.create(t.bg).to({scaleX:1},50).onComplete(function(){o.RuinsCtrl.instance.waitClose=!1}).start()}).start()},d.prototype.onEvt=function(){var s=this;p.prototype.onEvt.call(this),this.onAutoGlobalEvt("PANEL_CLOSE",this,function(t){1344===t&&s.tween&&s.tween.end()}),this.onAutoGlobalEvt("RUINS_CARD_OPENED",this,function(t){if(t[0]===s.data){s.setData(s.data),s.item.visible=!1,s.bg.visible=!0,s.bg.scaleX=1,s.tween1=TweenJS.create(s.bg).to({scaleX:0},50).onComplete(function(){s.bg.visible=!1,s.item.visible=!0,s.item.scaleX=0,s.tween2=TweenJS.create(s.item).to({scaleX:.8},50).onComplete(function(){s.txt.scaleX=s.txt.scaleY=2;var t=s.txt.x,e=s.txt.y;o.RuinsCtrl.instance.box.addChild(s.txt),s.txt.x=s.x+t,s.txt.y=s.y+e,s.tween=TweenJS.create(s.txt).to({scaleX:1,scaleY:1},200).onComplete(function(){s.addChild(s.txt),s.txt.x=t,s.txt.y=e}).start()}).start()}).start();var e=y.action_preview.ActionPreviewModel.instance.getPosSprite(48),i=new Laya.Point(e.x,e.y);Laya.Point.TEMP.setTo(s.bg.x,s.bg.y);var n=s.bg.localToGlobal(Laya.Point.TEMP,!0);CommonUtil.flyItem(t[1][0],n,i)}}),this.onAutoClick(this.bg,this,function(){y.bag.BagUtil.canAddItemsByBagIdCount([],!0)?GlobalData.dispatcher.event("RUINS_OPEN_CARD",s.data):console.log("背包满了 点击牌")})},d.prototype.offEvt=function(){p.prototype.offEvt.call(this),this.tween1&&this.tween1.stop(),this.tween2&&this.tween2.stop(),this.tween&&this.tween.end(),Laya.timer.clearAll(this)},d);function d(){return null!==p&&p.apply(this,arguments)||this}o.RuinsItem=u}(y.ruins||(y.ruins={}))}(modules=modules||{}),function(_){!function(g){var e,t=_.core.BaseViewEx,i=_.common.SimpleList,n=_.common.AvatarClip,s=_.bag.BaseItem,f=_.config.RuinsCfg,o=(e=t,__extends(a,e),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._rankList=this.destroyElement(this._rankList),this._avatar=this.destroyElement(this._avatar),this.v.observationItem=this.destroyElement(this.v.observationItem),e.prototype.destroy.call(this,t)},a.prototype.initRankList=function(){this._rankList=i.create(l,646,164,1,1,0,2),this._rankList.size(this.v.listCon.width,this.v.listCon.height),this.v.listCon.addChild(this._rankList)},a.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.initRankList(),this._avatar=n.create(1024,1024,768),this._avatar.anchorX=.5,this._avatar.anchorY=.5,this.addChildAt(this._avatar,1),this._topRwdList=i.create(s,100,100,2,1,0,0),this._topRwdList.size(400,100),this._topRwdList.scale(.8,.8),this.v.rwdCon.addChild(this._topRwdList),this.v.noTxt1.color=this.v.noTxt.color,this.v.noTxt1.style.fontFamily=this.v.noTxt.font,this.v.noTxt1.style.fontSize=this.v.noTxt.fontSize,this.v.noTxt1.style.align=this.v.noTxt.align,this.v.noTxt1.style.strokeColor=this.v.noTxt.strokeColor,this.v.noTxt1.style.stroke=this.v.noTxt.stroke},a.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.v.helpBtn,this,this.onHelpHandler),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.onFuncUpdate),this.onAutoGlobalEvt("RUINS_RANK_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){_.bottomTab.BottomTabCtrl.instance.updateTabByPanel()})},a.prototype.onFuncUpdate=function(t){(0<=t.indexOf(895)||0<=t.indexOf(897))&&(_.funcOpen.FuncOpenModel.instance.getFuncIsOpen(897)||this.close())},a.prototype.onHelpHandler=function(){g.RuinsModel.instance.fType===_.festival.FestivalModel.instance.BarDayType?CommonUtil.alertHelp(19064):g.RuinsModel.instance.fType===_.festival.FestivalModel.instance.SpringSceneryType?CommonUtil.alertHelp(19064):CommonUtil.alertHelp(19056)},a.prototype.onJumpHandler=function(){},a.prototype.onOpened=function(){e.prototype.onOpened.call(this),g.RuinsCtrl.instance.GetRuinsMysteryRank(g.RuinsModel.instance.fType),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime()},a.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},a.prototype.updateTime=function(){var t=g.RuinsModel.instance.rank,e=t?t[2]:0;e<GlobalData.serverTime?(this.v.timeTxt.text="已结束",this.v.timeTxt.color="#ff3e3e"):(this.v.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(e),this.v.timeTxt.color="#50ff28")},a.prototype.updateAvatar=function(){var t=g.RuinsModel.instance.rank;if(t){var e=t[1];if(e){var i=e[2],n=e[3],s=e[1];this._avatar.pos(368,497),this._avatar.avatarRotationY=180,this._avatar.avatarRotationX=0,this._avatar.avatarScale=1,this._avatar.avatarY=0,this._avatar.avatarX=0,this._avatar.reset(s,i,n),this.v.observationItem.data=[[this._avatar,0]]}}},a.prototype.updateView=function(){for(var t=g.RuinsModel.instance.rank,e=0,i=t?t[0]:[],n=[],s=1,o=0;s<=50;)i.length>o?(i[o][0]===PlayerModel.instance.actorId&&(e=i[o][6]),i[o][6]==s?(1<s&&n.push([i[o][6],i[o]]),++o):1<s&&n.push([s,null])):1<s&&n.push([s,null]),++s;this._rankList.datas=n;for(var a=f.instance.getRankCfgByRank(g.RuinsModel.instance.fType,_.festival.FestivalModel.instance.getCrossOpenServerDay(g.RuinsModel.instance.fType),1),r=a?a[4]:[],l=[],h=0;h<r.length;h+=2)l.push([r[h],r[h+1],0,null]);var c=4<(this._topRwdList.datas=l).length?4:l.length;this._topRwdList.x=-40*c,this.v.valueTxt.text=t?""+t[3]:"未上榜",this.v.myRankTxt.text=0<e?"第"+e+"名":"未上榜",this.updateAvatar();var p=0<i.length?i[0]:null;if(!p||1!=p[6])return this.v.topName.text="",this.v.valueClip.value="0",this.v.noTxt.visible=this.v.noTxt1.visible=!0,void(this.v.noTxt1.innerHTML="层数达到<span color='#50ff28'>"+(a?a[3]:0)+"</span>可上榜");this.v.noTxt.visible=this.v.noTxt1.visible=!1,this.v.valueClip.value=p[5].toString(),this.v.topName.text=p[2];var u=p[3],d=p[1],y=p[4];this.v.headIcon.setInfo(u,d,y)},a);function a(){return null!==e&&e.apply(this,arguments)||this}g.RuinsRankPanel=o;var r,l=(r=ui.RuinsRankItemUI,__extends(h,r),h.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),r.prototype.destroy.call(this,t)},h.prototype.initialize=function(){r.prototype.initialize.call(this),this._list=i.create(s,100,100,2,1,0,0),this._list.size(400,100),this._list.scale(.8,.8),this.listCon.addChild(this._list),CommonUtil.setHTMLPro(this.noTxt,"#4c5e8a","SimHei",24)},h.prototype.setData=function(t){for(var e=t[0],i=f.instance.getRankCfgByRank(g.RuinsModel.instance.fType,_.festival.FestivalModel.instance.getCrossOpenServerDay(g.RuinsModel.instance.fType),e),n=i?i[4]:[],s=[],o=0;o<n.length;o+=2)s.push([n[o],n[o+1],0,null]);var a=4<(this._list.datas=s).length?4:s.length;this._list.x=-40*a,e<=3?(this.rankImg.visible=this.rankClip.visible=!0,this.rankClip.value=e.toString(),this.rankTxt.text=""):(this.rankImg.visible=this.rankClip.visible=!1,this.rankTxt.text="第"+e+"名");var r=t[1];if(!r)return this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!1,this.noTxt.visible=!0,void(this.noTxt.innerHTML="虚位以待...<br>层数达到<span color='#168a17'>"+(i?i[3]:0)+"</span>可上榜");this.headIcon.visible=this.playerName.visible=this.valueTxt.visible=!0,this.noTxt.visible=!1,this.valueTxt.text="层数:"+r[5],this.playerName.text=r[2];var l=r[3],h=r[1],c=r[4];this.headIcon.setInfo(l,h,c)},h);function h(){return null!==r&&r.apply(this,arguments)||this}g.RuinsRankItem=l}(_.ruins||(_.ruins={}))}(modules=modules||{}),function(o){var a,r,i,n,s,l,t;function e(){return null!==r&&r.apply(this,arguments)||this}a=o.ruins||(o.ruins={}),i=laya.events.Event,n=o.common.NumInputCtrl,s=o.commonAlert.PropAlertUtil,l=o.config.GetWayCfg,r=ui.RuinsShopAlertUI,__extends(e,r),e.prototype.initialize=function(){r.prototype.initialize.call(this),this.currencyNum=0,this._numInputCtrl=new n(this.numInput,this.addBtn,this.minusBtn,this.addTenBtn,this.minusTenBtn),this._numInputCtrl.min=0,this._sourceBtns=new Array,this._image=new Array,this._desTxt=new Array;for(var t=0;t<4;t++)this._sourceBtns[t]=new Laya.Image,this._image[t]=new Laya.Image,this._desTxt[t]=new laya.display.Text,s.setDesTxt(this._desTxt[t]),this._sourceBtns[t].mouseEnabled=!0;var e=o.config.BlendCfg.instance.getCfgById(97202)[1];for(t=0;t<e.length;t+=3)e[t]===a.RuinsModel.instance.fType&&(this._item=[e[t+1],e[t+2]]);for(e=o.config.BlendCfg.instance.getCfgById(97203)[1],t=0;t<e.length;t+=3)e[t]===a.RuinsModel.instance.fType&&(this._cost=[e[t+1],e[t+2]])},e.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.buyBtn,this,this.sureBtnHandler),this.onAutoClick(this.sbtn,this,this.sbtnHandler);for(var t=0,e=this._sourceBtns.length;t<e;t++)this.onAutoClick(this._sourceBtns[t],this,this.getOpenPlaneId,[t]);this._numInputCtrl.addListeners(),this._numInputCtrl.on(i.CHANGE,this,this.sortcutBuy)},e.prototype.offEvt=function(){r.prototype.offEvt.call(this),this._numInputCtrl.off(i.CHANGE,this,this.sortcutBuy),this._numInputCtrl.removeListeners()},e.prototype.setOpenParam=function(t){r.prototype.setOpenParam.call(this,t),this._pos=t},e.prototype.onOpened=function(){r.prototype.onOpened.call(this),this.sbtn.selected=a.RuinsModel.instance.autoBuy;var t=this._item[0],e=this._cost[0];this.taskItem.dataSource=[t,1,0,null];var i=o.config.ItemMaterialCfg.instance.getItemCfgById(t);this.itemName.text=i[1];var n=PlayerModel.instance.getCurrencyById(e);null==n&&(n=o.bag.BagModel.instance.getItemCountById(e));var s=Math.floor(n/this._cost[1]);this._numInputCtrl.max=s,this._numInputCtrl.value=s?1:0,this.currencyNum=s?1:0,this._numInputCtrl.notice="购买数量",94150001===e?(this.goldImg.skin="common/shenghuyu.png",this.lgoldImg.skin="common/shenghuyu.png"):90140001===e?(this.goldImg.skin="common/icon_tongyong_2.png",this.lgoldImg.skin="common/icon_tongyong_2.png"):(this.lgoldImg.skin=CommonUtil.getIconById(e,!0),this.goldImg.skin=CommonUtil.getIconById(e,!0)),this.moneyTxt.text=this._cost[1].toString(),this.updataView()},e.prototype.updataView=function(){for(var t=this._item[0],e=CommonUtil.getItemCfgById(t)[4===CommonUtil.getItemTypeById(t)?6:10],i=0,n=e.length;i<n;i++)this.getWayBtn(this._sourceBtns[i],e[i],e.length,i,this._image[i]);this.sortcutBuy()},e.prototype.sbtnHandler=function(){a.RuinsModel.instance.autoBuy=this.sbtn.selected,GlobalData.dispatcher.event("RUINS_AUTO_BUY_UPDATE")},e.prototype.sortcutBuy=function(){var t=this._cost[1];this.currencyNum=parseInt(this.numInput.text),this.numInput.text=this.currencyNum.toString(),this.allMoneyTxt.color=0<=PlayerModel.instance.ingot?"#1f304d":"#ff3e3e",this.allMoneyTxt.text=""+this.currencyNum*t},e.prototype.sureBtnHandler=function(){var t=this._cost[0],e=this._cost[1];if(o.bag.BagUtil.canAddItemsByBagIdCount([])){if(t){var i=PlayerModel.instance.getCurrencyById(t);if(null==i&&(i=o.bag.BagModel.instance.getItemCountById(t)),i<e*this.currencyNum)return void this.glodBtnHandler(t);if(0===this.currencyNum)return void this.glodBtnHandler(t)}a.RuinsCtrl.instance.BuyRuinsMysteryCard(a.RuinsModel.instance.fType,this.currencyNum)}else console.log("背包满了 购买")},e.prototype.getOpenPlaneId=function(t){var e=CommonUtil.getItemCfgById(this._item[0])[10],i=l.instance.getCfgById(e[t]),n=i[0];if(942!==n&&943!==n||o.welfare_place.WelfarePlaceModel.instance.getWelfarePlaceEnterIsOpen(!0)){500!=n?(this.close(),WindowManager.instance.closeAllDialog()):o.notice.SystemNoticeManager.instance.addNotice("请多关注游戏内活动哦",!1);var s=i[3][0];o.commonAlert.PropAlertUtil.skipScene(s)}},e.prototype.getWayBtn=function(t,e,i,n,s){var o;this.addChild(s),this.addChild(t),o=l.instance.getCfgById(e),t.pos(30+.5*(660-158*i+42*(i-1))+116*n,530),t.skin="assets/icon/ui/get_way/"+o[1]+".png",s.skin="assets/icon/ui/get_way/btn_ydrk_bg.png",s.pos(t.x,t.y),t.addChild(this._desTxt[n]),this._desTxt[n].pos(6,70),this._desTxt[n].text=o[2]},e.prototype.destroy=function(){this._sourceBtns=this.destroyElement(this._sourceBtns),this._image=this.destroyElement(this._image),this._desTxt=this.destroyElement(this._desTxt),r.prototype.destroy.call(this)},e.prototype.glodBtnHandler=function(t){var e="元宝";if(94150001===t?e="仙玉":90140001===t&&(e="元宝"),0==o.first_pay.FirstPayModel.instance.giveState)if(94150001===t)WindowManager.instance.open(106,[94150001,0,!0]);else{var i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[118]);CommonUtil.alert("温馨提示",e+"不足，是否前往首充？",[i])}else o.money_cat.MoneyCatModel.instance.state?(i=Handler.create(WindowManager.instance,WindowManager.instance.skipOpen,[111]),CommonUtil.alert("温馨提示",e+"不足，是否前往充值界面充值？",[i])):94150001===t?WindowManager.instance.open(106,[94150001,0,!0]):WindowManager.instance.open(394)},t=e,a.RuinsShopAlert=t}(modules=modules||{}),function(e){var h,c,t,p,i,n;function s(){return null!==c&&c.apply(this,arguments)||this}h=e.ruins||(e.ruins={}),t=e.common.SimpleList,p=e.common.CustomClip,i=e.bag.BaseItem,c=ui.RuinsTaskItemUI,__extends(s,c),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._itemList=this.destroyElement(this._itemList),this._btnClip=this.destroyElement(this._btnClip),c.prototype.destroy.call(this,t)},s.prototype.initialize=function(){c.prototype.initialize.call(this),this._itemList=t.create(i,100,100,2,1,15,0),this._itemList.pos(9,52),this._itemList.size(448,103),this.addChild(this._itemList),CommonUtil.setHTMLPro(this.consumeText,"#1f304d","SimHei",26),this.descTxt.text=""},s.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.onBtnHandler),this.onAutoClick(this.jumpBtn,this,this.onJumpHandler)},s.prototype.onJumpHandler=function(){WindowManager.instance.open(1344)},s.prototype.onBtnHandler=function(){var t=this._cfg[3];e.bag.BagUtil.canAddItemsByBagIdCount(CommonUtil.formatItemData(t))&&h.RuinsCtrl.instance.DrawRuinsMysteryAllPeopleReward(h.RuinsModel.instance.fType,this._cfg[1])},s.prototype.setData=function(t){if(c.prototype.setData.call(this,t),this._cfg=t,this._cfg){var e=CommonUtil.formatHtmlStrByColor("#b15315",""+this._cfg[4]);this.consumeText.innerHTML="全民消耗探索罗盘达"+e+"可领";var i=h.RuinsModel.instance.countAll,n=this._cfg[4],s=this._cfg[1];this.scheduleText.text="("+i+"/"+n+")",this.scheduleText.color=i<n?"#ff3e3e":"#168a17";var o=h.RuinsModel.instance.getStateById(s,n);switch(p.thisStop(this._btnClip),o){case 1:this.receivedImg.visible=!1,this.sureBtn.visible=!1,this.jumpBtn.visible=!0;break;case 2:this.receivedImg.visible=!1,this.sureBtn.visible=!0,this.jumpBtn.visible=!1,this.playBtnEffect();break;case 3:this.receivedImg.visible=!0,this.sureBtn.visible=!1,this.jumpBtn.visible=!1}for(var a=this._cfg[3],r=[],l=0;l<a.length;l+=2)r.push([a[l],a[l+1],0,null]);this._itemList.datas=r}},s.prototype.playBtnEffect=function(){this._btnClip||(this._btnClip=p.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.scale(.8,.8),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-8),this.addChild(this._btnClip)),p.thisPlay(this._btnClip)},n=s,h.RuinsTaskItem1=n}(modules=modules||{}),function(y){!function(l){var e,t=y.core.BaseViewEx,i=y.common.SimpleList,h=y.common.CustomClip,n=y.bag.BaseItem,c=y.config.RuinsCfg,s=y.common.BtnGroup,o=Laya.Event,a=(e=t,__extends(r,e),r.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),this._btnGroup&&(this._btnGroup.destroy(),this._btnGroup=null),e.prototype.destroy.call(this,t)},r.prototype.initList=function(){this._list=i.create(u,639,169,1,1,0,3),this.v.listCon.addChildren(this._list),this._list.pos(0,0),this._list.size(640,943),this._list1=i.create(l.RuinsTaskItem1,639,169,1,1,0,3),this.v.listCon1.addChildren(this._list1),this._list1.pos(0,0),this._list1.size(640,943),this._btnGroup=new s,this._btnGroup.setBtns(this.v.group1,this.v.group2),CommonUtil.setHTMLPro(this.v.vhtmlTxt,"#2C476A","SimHei",24)},r.prototype.initialize=function(){e.prototype.initialize.call(this),this.centerX=0,this.centerY=0,this.initList()},r.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("RUINS_TASK_UPDATE",this,this.changeHandler),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,this.onFuncUpdate),this.onAutoGlobalEvt("FESTIVAL_INFO_CHANG_UPDATE",this,function(){y.bottomTab.BottomTabCtrl.instance.updateTabByPanel()}),this.onAutoEvt(this._btnGroup,o.CHANGE,this,this.changeHandler),this.regAutoRP(this.v.rpImg,["ruinsTaskRP"]),this.regAutoRP(this.v.rpImg1,["ruinsTaskRP1"])},r.prototype.changeHandler=function(){this._list.visible=this.v.listCon.visible=0===this._btnGroup.selectedIndex,this._list1.visible=this.v.listCon1.visible=1===this._btnGroup.selectedIndex,0===this._btnGroup.selectedIndex?this.updateView():1===this._btnGroup.selectedIndex&&this.updateView1()},r.prototype.onFuncUpdate=function(t){(0<=t.indexOf(453)||0<=t.indexOf(466))&&(y.funcOpen.FuncOpenModel.instance.getFuncIsOpen(466)||this.close())},r.prototype.onOpened=function(){e.prototype.onOpened.call(this),Laya.timer.loop(1e3,this,this.updateTime),this.updateTime(),l.RuinsCtrl.instance.GetRuinsMysteryTask(l.RuinsModel.instance.fType),l.RuinsCtrl.instance.GetRuinsMysteryAllPeopleTasks(l.RuinsModel.instance.fType),l.RuinsCtrl.instance.GetRuinsMysteryAllPeopleTotalCostCount(l.RuinsModel.instance.fType),y.redPoint.RedPointCtrl.instance.getRPProperty("ruinsTaskRP")?this._btnGroup.selectedIndex=0:y.redPoint.RedPointCtrl.instance.getRPProperty("ruinsTaskRP1")?this._btnGroup.selectedIndex=1:this._btnGroup.selectedIndex=0},r.prototype.close=function(){e.prototype.close.call(this),Laya.timer.clear(this,this.updateTime)},r.prototype.updateView=function(){var t=l.RuinsModel.instance.task[1];t.sort(function(t,e){return 2==t[1]&&2!=e[1]?-1:2==e[1]&&2!=t[1]?1:3==t[1]&&3!=e[1]?1:3==e[1]&&3!=t[1]?-1:t[0]-e[0]}),this._list.datas=t},r.prototype.updateView1=function(){var t=y.config.RuinsAllPeopleTasksCfg.instance.getdayByGradeArr(l.RuinsModel.instance.fType,y.festival.FestivalModel.instance.getCrossOpenServerDay(l.RuinsModel.instance.fType));t.sort(function(t,e){var i=t[1],n=e[1],s=t[4],o=e[4],a=l.RuinsModel.instance.getStateById(i,s),r=l.RuinsModel.instance.getStateById(n,o);return 2==a&&2!=r?-1:2==r&&2!=a?1:3==a&&3!=r?1:3==r&&3!=a?-1:i-n}),this._list1.datas=t},r.prototype.updateTime=function(){var t=y.festival.FestivalModel.instance.info[l.RuinsModel.instance.fType],e=t?t[2]:0;e<GlobalData.serverTime?this.v.timeTxt.text="已结束":this.v.timeTxt.text=CommonUtil.timeStampDDHHMMToHHMMSS(e)},r);function r(){return null!==e&&e.apply(this,arguments)||this}l.RuinsTaskPanel=a;var p,u=(p=ui.RuinsTaskItemUI,__extends(d,p),d.prototype.destroy=function(t){void 0===t&&(t=!0),this._itemList=this.destroyElement(this._itemList),this._btnClip=this.destroyElement(this._btnClip),p.prototype.destroy.call(this,t)},d.prototype.initialize=function(){p.prototype.initialize.call(this),this._itemList=i.create(n,100,100,2,1,15,0),this._itemList.pos(9,52),this._itemList.size(448,103),this.addChild(this._itemList),CommonUtil.setHTMLPro(this.consumeText,"#1f304d","SimHei",26),this.descTxt.text=""},d.prototype.onEvt=function(){p.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.onBtnHandler),this.onAutoClick(this.jumpBtn,this,this.onJumpHandler)},d.prototype.onJumpHandler=function(){WindowManager.instance.open(1344)},d.prototype.onBtnHandler=function(){var t=this._cfg[3];y.bag.BagUtil.canAddItemsByBagIdCount(CommonUtil.formatItemData(t))&&l.RuinsCtrl.instance.DrawRuinsMysteryTask(l.RuinsModel.instance.fType,this._cfg[1])},d.prototype.setData=function(t){p.prototype.setData.call(this,t),this._cfg=c.instance.getTaskCfgById(l.RuinsModel.instance.fType,t[0]);var e=CommonUtil.formatHtmlStrByColor("#b15315",""+this._cfg[4]);this.consumeText.innerHTML="翻牌数量达到"+e+"可领取";var i=l.RuinsModel.instance.task[0],n=this._cfg[4];this.scheduleText.text="("+i+"/"+n+")",this.scheduleText.color=i<n?"#ff3e3e":"#168a17";var s=t[1];switch(h.thisStop(this._btnClip),s){case 1:this.receivedImg.visible=!1,this.sureBtn.visible=!1,this.jumpBtn.visible=!0;break;case 2:this.receivedImg.visible=!1,this.sureBtn.visible=!0,this.jumpBtn.visible=!1,this.playBtnEffect();break;case 3:this.receivedImg.visible=!0,this.sureBtn.visible=!1,this.jumpBtn.visible=!1}for(var o=this._cfg[3],a=[],r=0;r<o.length;r+=2)a.push([o[r],o[r+1],0,null]);this._itemList.datas=a},d.prototype.playBtnEffect=function(){this._btnClip||(this._btnClip=h.createAndPlay("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.scale(.8,.8),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-8),this.addChild(this._btnClip)),h.thisPlay(this._btnClip)},d);function d(){return null!==p&&p.apply(this,arguments)||this}l.RuinsTaskItem=u}(y.ruins||(y.ruins={}))}(modules=modules||{}),function(h){var c,t,e,i;function n(){return null!==t&&t.apply(this,arguments)||this}c=h.rune||(h.rune={}),e=ui.RuneAllListViewUI,t=e,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),this._spaceX=140,this._spaceY=184,this._recordY=0},n.prototype.setData=function(t){var e=t,i=new c.RuneTipItem(e);this.addChild(i);for(var n=h.config.ItemRuneCfg.instance.getCfgByUnlock(e),s=0,o=n.length;s<o;s++){var a=n[s][0],r=new c.RuneItem;this.addChild(r),r.setData(a);var l=CommonUtil.getColorById(a);r.nameTxt.color=l,r.pos(16+(-1==e?s+1:s)%4*this._spaceX,50+Math.floor(s/4)*this._spaceY),-1==e&&(r.x-=s%2?-50:50),this._recordY=r.y}this.height=this._recordY+150},i=n,c.RuneAllListPanel=i}(modules=modules||{}),function(B){var S,e,t,M,w,P,A,R,i;function n(){return null!==e&&e.apply(this,arguments)||this}S=B.rune||(B.rune={}),t=ui.RuneBagItemUI,M=B.config.RuneRefineCfg,w=B.common.CustomClip,P=B.rune_copy.RuneCopyModel,A=B.config.AttrItemCfg,R=B.common.AttrUtil,e=t,__extends(n,e),n.prototype.destroy=function(t){void 0===t&&(t=!0),this._attNameArr=this.destroyElement(this._attNameArr),this._btnClip=this.destroyElement(this._btnClip),this._attFitArr=this.destroyElement(this._attFitArr),e.prototype.destroy.call(this,t)},n.prototype.initialize=function(){e.prototype.initialize.call(this),this._attNameArr=[this.attNameTxt_0,this.attNameTxt_1],this._attFitArr=[this.attTxt,this.attNameTxt_0,this.attNameTxt_1],this._btnClip=CommonUtil.creatEff(this.inalyBtn,"btn_light",15),this._btnClip.scale(.65,.65),this._btnClip.pos(-5,-5),this._btnClip.visible=!1,this._runeInfo=[0,0]},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.inalyBtn,this,this.inalyBtnHandler),this.onAutoClick(this.demountBtn,this,this.demountBtnHandler)},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._btnClip.play()},n.prototype.setData=function(t){this._runeInfo=[S.RuneModel.instance.currClickPit,t[2]];var e=t[0],i=CommonUtil.getStoneTypeById(e),n=1e4*(1e-4*e>>0),s=e%1e4,o=P.instance.finishLv,a=B.config.ItemRuneCfg.instance.getCfgById(n);if(a){var r=a[5];this.iconImg.skin="assets/icon/item/"+a[4]+".png",this.attTxt.text=a[1]+" Lv."+s,this.attTxt.color=CommonUtil.getColorById(e);var l=M.instance.getCfgById(e);if(l){for(var h=l[4],c=0,p=.5*h.length;c<p;c++){var u=A.instance.getCfgById(h[2*c]),d=h[2*c+1],y=u[2]?R.formatFloatNum(d)+"%":Math.round(d)+"";this._attNameArr[c].text=u[1]+" "+y,this._attNameArr[c].visible=!0}var g=.5*h.length,f=g;for(p=this._attNameArr.length;g<p;g++)this._attNameArr[g].visible=!1;var _=0;for(c=0;c<=f;c++)_+=this._attFitArr[c].height+5;var m=(this.height-_)/2;for(c=0;c<=f;c++)this._attFitArr[c].y=0==c?m:this._attFitArr[c-1].y+this._attFitArr[c-1].height+5;var v=S.RuneModel.instance.slots[S.RuneModel.instance.currClickPit],b=CommonUtil.getStoneTypeById(v),T=CommonUtil.getItemQualityById(v),I=v%1e4;this.demountBtn.visible=this.hintTxt.visible=this._btnClip.visible=this.inalyBtn.visible=this.lockTxt.visible=!1;var C=S.RuneModel.instance.getIsHaveSameType(e);if(C&&i!==b)this.hintTxt.visible=!0,this.hintTxt.text="已有属性";else if(v){if(e==v)this.demountBtn.visible=!0;else if(o<r)this.lockTxt.text="远古符阵"+r+"层解锁",this.lockTxt.visible=!0;else if(r<=o){var x=CommonUtil.getItemQualityById(e);i==b&&(x==T&&I<s||T<x)&&w.thisPlay(this._btnClip),this.inalyBtn.visible=!0}}else C?(this.hintTxt.visible=!0,this.hintTxt.text="已有属性"):o<r?(this.lockTxt.text="远古符阵"+r+"层解锁",this.lockTxt.visible=!0):r<=o&&(this.inalyBtn.visible=!0,w.thisPlay(this._btnClip))}else alert("不存在符文id为"+e+"的符文")}else alert("不存在符文id为"+e+"的符文")},n.prototype.inalyBtnHandler=function(){S.RuneCtrl.instance.inlayRune(this._runeInfo),WindowManager.instance.close(137)},n.prototype.demountBtnHandler=function(){S.RuneCtrl.instance.takeOffRune(S.RuneModel.instance.currClickPit),WindowManager.instance.close(137)},i=n,S.RuneBagItem=i}(modules=modules||{}),function(n){var t,e,i,s,o;function a(){return null!==e&&e.apply(this,arguments)||this}t=n.rune||(n.rune={}),i=ui.RuneItemUI,s=n.bag.BagUtil,e=i,__extends(a,e),a.prototype.clickHandler=function(){e.prototype.clickHandler.call(this),s.openBagItemTip([this._itemId+1,0,0,null])},a.prototype.setData=function(t,e){if(void 0===e&&(e=1),t){this._itemId=t;var i=n.config.ItemRuneCfg.instance.getCfgById(t)[1];this.iconImg.skin=CommonUtil.getIconById(t),this.nameTxt.text=i+" Lv."+e}},o=a,t.RuneItem=o}(modules=modules||{}),function(I){var C,t,e,x,n,B,i;function s(){return null!==t&&t.apply(this,arguments)||this}C=I.rune||(I.rune={}),e=ui.RuneInlayItemUI,x=I.rune_copy.RuneCopyModel,n=I.notice.SystemNoticeManager,B=I.config.RuneRefineCfg,t=e,__extends(s,t),s.prototype.initialize=function(){t.prototype.initialize.call(this),this._needUnlockLayer=-1,this._isCanInlay=this._isUnlock=!1},s.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.initView()},s.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("RUNE_INALY_SELECT",this,this.clickHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.initView),this.onAutoGlobalEvt("RUNE_UPDATE",this,this.initView)},s.prototype.initView=function(){var t=0;8<this._type&&(t=1);var e=C.RuneModel.instance.tips[this._type-1].split("#");this._needUnlockLayer=parseInt(e[e.length-1]);var i=x.instance.finishLv;if(i>=this._needUnlockLayer){this.addBtn.visible=this._isUnlock=!0,this.iconImg.gray=this.dotImg.visible=this.lockImg.visible=!1;var n=C.RuneModel.instance.canInlayRunes(t),s=C.RuneModel.instance.slots[this._type],o=0==t?C.RuneModel.instance.commonPitTypeRecode:C.RuneModel.instance.specialPitTypeRecode,a=x.instance.finishLv;if(s){var r=B.instance.getCfgById(s),l=B.instance.getCfgById(s+1),h=CommonUtil.getStoneTypeById(s),c=CommonUtil.getItemQualityById(s);for(this.lvBox.visible=!0,this.dotImg.visible=this.addBtn.visible=!1,this.lvTxt.text="Lv."+s%1e4,y=CommonUtil.getDimIdByItemId(s),g=I.config.ItemRuneCfg.instance.getCfgById(y),this.iconImg.skin="assets/icon/item/"+g[4]+".png",f=0,_=n.length;f<_;f++)if(m=n[f][0],b=CommonUtil.getStoneTypeById(m),!(T=C.RuneModel.instance.getIsHaveSameType(m,this._type,t))||b==h){y=CommonUtil.getDimIdByItemId(m),v=(g=I.config.ItemRuneCfg.instance.getCfgById(y))[5];var p=CommonUtil.getItemQualityById(m);if(!(i<v||p<c)&&b==h&&(p==c&&s%1e4<m%1e4||c<p))return void(this.dotImg.visible=!0)}if(!this.dotImg.visible&&l){var u=C.RuneModel.instance.exp,d=r[1][1];this.dotImg.visible=d<=u}}else{if(this._type<9)this.iconImg.skin="";else{var y=1e4*(1e-4*(m=this.specialId)>>0),g=I.config.ItemRuneCfg.instance.getCfgById(y);this.iconImg.skin="assets/icon/item/"+g[4]+".png",this.iconImg.gray=!0}this._isCanInlay=!1;for(var f=0,_=n.length;f<_;f++){var m,v,y=1e4*(1e-4*(m=n[f][0])>>0);if(a<(v=(g=I.config.ItemRuneCfg.instance.getCfgById(y))[5]))this._isCanInlay=!0;else{var b=CommonUtil.getStoneTypeById(m),T=C.RuneModel.instance.getIsHaveSameType(m,this._type,t);if(!o[b]&&!T){this._isCanInlay=this.dotImg.visible=!0;break}}}this.lvBox.visible=!1}}else this.lvBox.visible=this.dotImg.visible=this.addBtn.visible=this._isUnlock=!1,this.lockImg.visible=!0},s.prototype.clickHandler=function(t){if(t===this._type-1){var e=C.RuneModel.instance.slots[this._type];if(this._isUnlock&&e)this.frameImg.visible=!0,C.RuneModel.instance.currClickPit=C.RuneModel.instance.pitchRune=this._type;else if(this._isUnlock&&!e)if(this._isCanInlay)WindowManager.instance.open(137,C.RuneModel.instance.currClickPit);else if(this._type<9)n.instance.addNotice("无符文可替换",!0);else{var i=this.specialId;WindowManager.instance.open(16,[i,1,0,null])}else n.instance.addNotice("通关远古符阵"+this._needUnlockLayer+"关开启",!0)}},Object.defineProperty(s.prototype,"specialId",{get:function(){var t=C.RuneModel.instance.getOtherSpecial;return t||(9==this._type?B.instance.yang:B.instance.yin)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"type",{set:function(t){this._type=t},enumerable:!0,configurable:!0}),i=s,C.RunePit=i}(modules=modules||{}),function(v){var t,e,i,b,T,I,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=v.rune||(v.rune={}),i=ui.RuneResolveItemUI,b=v.config.RuneRefineCfg,T=v.config.AttrItemCfg,I=v.common.AttrUtil,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this._attTxtArr=[this.attTxt_1,this.attTxt_2,this.attTxt_3],this._attFitArr=[this.attTxt_0,this.attTxt_1,this.attTxt_2,this.attTxt_3]},s.prototype.destroy=function(){this._attTxtArr=this.destroyElement(this._attTxtArr),this._attFitArr=this.destroyElement(this._attFitArr),e.prototype.destroy.call(this)},s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},s.prototype.setData=function(t){var e=(t=this._info=t)[0],i=1e4*(1e-4*e>>0),n=e%1e4,s=v.config.ItemRuneCfg.instance.getCfgById(i);if(s){this.iconImg.skin="assets/icon/item/"+s[4]+".png";var o=t[1];this.attTxt_0.text=s[1]+" Lv."+n+(1<o?"×"+o:""),this.attTxt_0.color=CommonUtil.getColorById(e);var a=b.instance.getCfgById(e);if(a){for(var r=a[4],l=0,h=.5*r.length;l<h;l++){var c=T.instance.getCfgById(r[2*l]),p=r[2*l+1],u=c[2]?I.formatFloatNum(p)+"%":Math.round(p)+"";this._attTxtArr[l].text=c[1]+" "+u,this._attTxtArr[l].visible=!0}var d=.5*r.length,y=d;for(h=this._attTxtArr.length;d<h;d++)this._attTxtArr[d].visible=!1;if(CommonUtil.getStoneTypeById(e)===v.config.ItemRuneCfg.instance.resolveRuneSubTypeId){this.attTxt_0.text=s[1]+(1<o?"×"+o:"");var g=a[2],f=0;for(l=0,h=g.length;l<h;l++)f+=g[l][1];this._attTxtArr[y].text="分解+ "+f,this._attTxtArr[y].visible=!0,y++}var _=0;for(l=0;l<=y;l++)_+=this._attFitArr[l].height+3;var m=(this.height-_)/2;for(l=0;l<=y;l++)this._attFitArr[l].y=0==l?m:this._attFitArr[l-1].y+this._attFitArr[l-1].height+3}else alert("不存在符文id为"+e+"的符文")}else alert("不存在符文id为"+e+"的符文")},n=s,t.RuneResolveItem=n}(modules=modules||{}),function(r){var o,t,e,a,l,i;function n(){return null!==t&&t.apply(this,arguments)||this}o=r.rune||(r.rune={}),e=ui.RuneStarItemUI,a=r.config.ItemRuneCfg,l=r.rune_copy.RuneCopyModel,t=e,__extends(n,t),n.prototype.clickHandler=function(){t.prototype.clickHandler.call(this),o.RuneModel.instance.currRuneAttr=this.currRuneAttr,GlobalData.dispatcher.event("RUNE_CHANGE_STATE")},n.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.changeState()},n.prototype.setData=function(t){this.currRuneAttr=t,this.currRuneAttr[0]===o.RuneModel.instance.currRuneAttr[0]&&(o.RuneModel.instance.currRuneAttr=this.currRuneAttr,o.RuneModel.instance.curItem=this);var e=a.instance.getCfgById(t[0])[1],i=" "+t[1]+"阶";this.runeTxt.text=e+i,this.runeImg.skin=CommonUtil.getIconById(t[0]),this.starImg1.skin=this.starImg2.skin=this.starImg3.skin="common/icon_tongyong_7.png";for(var n=[this.starImg1,this.starImg2,this.starImg3],s=1;s<=t[2];s++)n[s-1].skin="common/icon_tongyong_8.png";this.setRP()},n.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoGlobalEvt("RUNE_CHANGE_STATE",this,this.changeState)},n.prototype.changeState=function(){this.currRuneAttr[0]===o.RuneModel.instance.currRuneAttr[0]?this.selectImg.visible=!0:this.selectImg.visible=!1},n.prototype.setRP=function(){for(var t=0,e=r.config.RuneDictionaryCfg.instance.getInfo(this.currRuneAttr)[3],i=l.instance.finishLv,n=r.config.ItemRuneCfg.instance.getCfgById(this.currRuneAttr[0])[5],s=r.bag.BagModel.instance.getRunesByDimId(this.currRuneAttr[0]),o=0,a=s.length;o<a;o++)t+=s[o][1];e<=t&&!r.config.RuneDictionaryCfg.instance.isMaxLevel(this.currRuneAttr)&&n<=i?this.starRP.visible=!0:this.starRP.visible=!1},i=n,o.RuneStarItem=i}(modules=modules||{}),function(t){var e,i,n,s;function o(t){var e=i.call(this)||this;return t?-1==t?(e.tipTxt.text="核心符文",e.lineLeft.x=28,e.lineRight.x=525):(e.tipTxt.text="远古符阵"+t+"层解锁",e.lineLeft.x=0,e.lineRight.x=553):(e.tipTxt.text="默认解锁",e.lineLeft.x=28,e.lineRight.x=525),e}e=t.rune||(t.rune={}),n=ui.RuneTipItemUI,i=n,__extends(o,i),s=o,e.RuneTipItem=s}(modules=modules||{}),function(t){var r,n,e,i,s,l,o,a,h,c,p,u,d;function y(){return null!==n&&n.apply(this,arguments)||this}function g(){return null!==u&&u.apply(this,arguments)||this}r=t.runeCompose||(t.runeCompose={}),e=ui.RuneComposeItemUI,i=Laya.Button,s=t.common.CustomList,l=t.config.RuneComposeCfg,o=t.config.ItemRuneCfg,a=Laya.Image,h=t.rune_copy.RuneCopyModel,c=t.notice.SystemNoticeManager,n=t.common.ItemRender,__extends(y,n),y.prototype.initialize=function(){n.prototype.initialize.call(this),this._btn=new i("common/btn_common_yq3.png"),this.addChild(this._btn),this._btn.stateNum=2,this._btn.size(150,50),this._btn.labelFont="SimHei",this._btn.labelSize=26,this._btn.labelColors="#4c5e8a,#9d5119,#495670,#495670",this.width=this._btn.width,this.height=this._btn.height,this._img=new a("common/image_common_xhd.png"),this._img.scale(.8,.8,!0),this.addChild(this._img),this._img.pos(128,0,!0)},y.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("RUNE_COMPOSE_RP_UPDATE",this,this.updateRP),this.onAutoGlobalEvt("RUNE_COPY_UPDATE",this,this.updateLock)},y.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.updateRP(),this.updateLock()},y.prototype.setData=function(t){n.prototype.setData.call(this,t);var e=1e4*(1e-4*(this._id=t)>>0),i=o.instance.getCfgById(e)[1];this._btn.label=i},y.prototype.setSelected=function(t){n.prototype.setSelected.call(this,t),(this._btn.selected=t)&&(r.RuneComposeModel.instance.curId=this._id,GlobalData.dispatcher.event("RUNE_COMPOSE_UPDATE"))},y.prototype.close=function(){n.prototype.close.call(this),Laya.timer.clear(this,this.updateRP)},y.prototype.updateRP=function(){this.setRp(),Laya.timer.once(300,this,this.setRp)},y.prototype.setRp=function(){this._img.visible=r.RuneComposeModel.instance.getRPStateById(this._id)},y.prototype.updateLock=function(){var t=CommonUtil.getDimIdByItemId(this._id),e=o.instance.getCfgById(t)[5],i=h.instance.finishLv;this._selectEnable=e<=i,this._btn.disabled=!this._selectEnable},y.prototype.clickHandler=function(){if(!this._selectEnable){var t=CommonUtil.getDimIdByItemId(this._id),e=o.instance.getCfgById(t)[5];c.instance.addNotice("通关远古符阵"+e+"关开启",!0)}},y.prototype.destroy=function(t){void 0===t&&(t=!0),this._btn=this.destroyElement(this._btn),this._img=this.destroyElement(this._img),n.prototype.destroy.call(this,t)},p=y,u=e,__extends(g,u),g.prototype.initialize=function(){u.prototype.initialize.call(this),this._list=s.create("v",13,74,150,0,p,3),this.addChild(this._list)},g.prototype.onEvt=function(){u.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updateRP),this.onAutoGlobalEvt("RUNE_COPY_UPDATE",this,this.updateRP),this.onAutoGlobalEvt("RUNE_UPDATE",this,this.updateRP)},g.prototype.setData=function(t){this._sId=t;var e=r.RuneComposeModel.instance.selectIds.tId,i=l.instance.getCfgsByTIdSId(e,t),n=i[0][0],s=CommonUtil.getItemQualityById(n),o=CommonUtil._qualityNames[s]+"色仙符";this._ids=i.map(function(t){return t[0]}),this.btn.label=o;var a=this.updateRP();t===r.RuneComposeModel.instance.selectIds.sId?(this._list.height=50*i.length+(i.length-1)*this._list.spaceY,this._list.datas=this._ids,this._list.selectedData=a||n):(this._list.datas=[],this._list.height=0),this.height=this._list.y+this._list.height},g.prototype.btnHandler=function(){r.RuneComposeModel.instance.selectIds.sId=this._sId,GlobalData.dispatcher.event("RUNE_COMPOSE_LIST_UPDATE")},g.prototype.updateRP=function(t){if(!t||5===t){for(var e,i=!1,n=0,s=this._ids;n<s.length;n++){var o=s[n],a=r.RuneComposeModel.instance.canComposeById(o);r.RuneComposeModel.instance.setRPId(o,a),a&&(i||(i=!0,e=o))}return this.rpImg.visible=i,this._sId===r.RuneComposeModel.instance.selectIds.sId&&GlobalData.dispatcher.event("RUNE_COMPOSE_RP_UPDATE"),e}},g.prototype.setSelected=function(t){u.prototype.setSelected.call(this,t),this.btn.selected=t},g.prototype.destroy=function(){this._list=this.destroyElement(this._list),u.prototype.destroy.call(this)},d=g,r.RuneComposeItem=d}(modules=modules||{}),function(p){var t,m,v,u,b,T,I,e;function i(){this._rpIds={},this._initTId=m.instance.tIds[0],this._initSId=m.instance.getSIdsByTId(this._initTId)[0],this._initId=m.instance.getCfgsByTIdSId(this._initTId,this._initSId)[0][0],this.selectIds={tId:this._initTId,sId:this._initSId,id:this._initId},this.curPutIndex=-1}t=p.runeCompose||(p.runeCompose={}),m=p.config.RuneComposeCfg,v=p.bag.BagModel,u=p.redPoint.RedPointCtrl,b=p.config.ItemRuneCfg,T=p.rune_copy.RuneCopyModel,I=p.rune.RuneModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"curId",{get:function(){return this._curId},set:function(t){this._curId=t,this.curPutIndex=-1},enumerable:!0,configurable:!0}),i.prototype.setRPId=function(t,e){e?this._rpIds[t]=!0:delete this._rpIds[t]},i.prototype.getRPStateById=function(t){return this._rpIds[t]},i.prototype.checkRP=function(t){if((!t||5===t)&&p.funcOpen.FuncOpenModel.instance.getFuncIsOpen(248)){var e=!1;t:for(var i=0,n=m.instance.tIds;i<n.length;i++)for(var s=n[i],o=0,a=m.instance.getSIdsByTId(s);o<a.length;o++)for(var r=a[o],l=0,h=m.instance.getCfgsByTIdSId(s,r);l<h.length;l++){var c=h[l][0];if(this.canComposeById(c)){this.selectIds={tId:s,sId:r,id:c},e=!0;break t}}e||(this.selectIds={tId:this._initTId,sId:this._initSId,id:this._initId}),u.instance.setRPProperty("runeComposeRP",e)}},Object.defineProperty(i.prototype,"isHaveRP",{get:function(){return this.selectIds.tId!==this._initTId||this.selectIds.sId!==this._initSId||this.selectIds.id!==this._initId},enumerable:!0,configurable:!0}),i.prototype.canComposeById=function(t){var e=m.instance.getCfgById(t),i=e[3].map(function(t){return t[0]}),n={first:!1,second:!1};if(I.instance.slots)for(var s in I.instance.slots){if(n.first&&n.second)break;var o=I.instance.slots[s],a=CommonUtil.getDimIdByItemId(o);n.first||a===i[0]&&(n.first=!0),n.second||a===i[1]&&(n.second=!0)}if(!n.first||!n.second){var r=v.instance.getItemsByBagId(5);if(r)for(var l=0,h=r;l<h.length;l++){var c=h[l];if(n.first&&n.second)break;var p=c[0],u=CommonUtil.getDimIdByItemId(p);n.first||u===i[0]&&(n.first=!0),n.second||u===i[1]&&(n.second=!0)}}if(n.first&&n.second){var d=e[4],y=d[0],g=d[1],f=CommonUtil.getPropCountById(y),_=b.instance.getCfgById(CommonUtil.getDimIdByItemId(t))[5];if(g<=f&&T.instance.finishLv>=_)return!0}return!1},e=i,t.RuneComposeModel=e}(modules=modules||{}),function(t){var e,i,n,l,h,c,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.runeCompose||(t.runeCompose={}),n=t.bag.BaseItem,l=t.config.RuneComposeCfg,h=t.bag.BagModel,c=t.rune.RuneModel,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._numTxt.visible=!1},o.prototype.update=function(t){var n=this;this.itemId=-1,this.flag=0;var s=l.instance.getCfgById(t)[3][this.index][0],e=c.instance.slots;for(var i in e){var o=e[i],a=CommonUtil.getDimIdByItemId(o);if(s===a){this.itemId=o,this.flag=1;break}}-1===this.itemId&&h.instance.getItemsByBagId(5).forEach(function(t,e){var i=t[0];CommonUtil.getDimIdByItemId(i)===s&&(-1===n.itemId||i>n.itemId)&&(n.itemId=i,n.flag=2)});var r=-1===this.itemId;this.addImg.visible=r,this._childs.forEach(function(t){t.visible&&t!==n.addImg&&(t.gray=r)}),-1===this.itemId&&(this.itemId=s+1),this.dataSource=[this.itemId,0,0,null]},o.prototype.clickHandler=function(){i.prototype.clickHandler.call(this),this.gray||(e.RuneComposeModel.instance.curPutIndex=this.index)},s=o,e.RuneComposeNeedItem=s}(modules=modules||{}),function(f){var t,e,i,_,m,v,n;function s(){return null!==e&&e.apply(this,arguments)||this}t=f.runeCompose||(f.runeCompose={}),i=ui.RuneBagItemUI,_=f.config.RuneRefineCfg,m=f.config.AttrItemCfg,v=f.common.AttrUtil,e=i,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.demountBtn.visible=this.lockTxt.visible=!1,this._attNameArr=[this.attNameTxt_0,this.attNameTxt_1],this._attFitArr=[this.attTxt,this.attNameTxt_0,this.attNameTxt_1],this.hintTxt.text="当前放入",this.inalyBtn.label="放入"},s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.inalyBtn,this,this.inalyBtnHandler)},s.prototype.setData=function(t){this._itemId=t;var e=0===this.index;this.hintTxt.visible=e,this.inalyBtn.visible=!e;var i=CommonUtil.getDimIdByItemId(t),n=t%1e4,s=f.config.ItemRuneCfg.instance.getCfgById(i),o=_.instance.getCfgById(t);if(!o)throw new Error("不存在符文id为"+t+"的符文");this.iconImg.skin="assets/icon/item/"+s[4]+".png",this.attTxt.text=s[1]+" Lv."+n,this.attTxt.color=CommonUtil.getColorById(t);for(var a=o[4],r=0,l=.5*a.length;r<l;r++){var h=m.instance.getCfgById(a[2*r]),c=a[2*r+1],p=h[2]?v.formatFloatNum(c)+"%":Math.round(c)+"";this._attNameArr[r].text=h[1]+" "+p,this._attNameArr[r].visible=!0}var u=a.length,d=u;for(l=this._attNameArr.length;u<l;u++)this._attNameArr[u].visible=!1;var y=0;for(r=0;r<=d;r++)y+=this._attFitArr[r].height+5;var g=(this.height-y)/2;for(r=0;r<=d;r++)this._attFitArr[r].y=0==r?g:this._attFitArr[r-1].y+this._attFitArr[r-1].height+5},s.prototype.inalyBtnHandler=function(){GlobalData.dispatcher.event("RUNE_COMPOSE_INLAY_UPDATE"),WindowManager.instance.close(419)},s.prototype.destroy=function(){this._attFitArr=this.destroyElement(this._attFitArr),this._attNameArr=this.destroyElement(this._attNameArr),e.prototype.destroy.call(this)},n=s,t.RuneComposeReplaceItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){}e=t.rush_to_purchase||(t.rush_to_purchase={}),i=t.funcOpen.FuncOpenModel,n=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.GetOneMoneyBuyInfoReply=function(t){if(t){var e=0===(this.info=t)[1]?2:1;i.instance.setActionOpen(287,e),this.setRP(),GlobalData.dispatcher.event("DRAGON_INFO_UPDATE")}},o.prototype.setRP=function(){var t=1===this.info[0];n.instance.setRPProperty("purchaseRP",t)},s=o,e.RushToPurchaseModel=s}(modules=modules||{}),function(s){var o,i,t,e,n;function a(){return null!==i&&i.apply(this,arguments)||this}o=s.sceneTeam||(s.sceneTeam={}),t=s.common.SimpleList,e=ui.SpiritTeamAlertUI,i=e,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this._list=t.create(o.SceneTeamItem,560,114),this._list.pos(50,124,!0),this._list.size(560,564),this.addChild(this._list)},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.autoAcceptBtn,this,this.autoAcceptHandler),this.onAutoClick(this.autoPassBtn,this,this.autoPassHandler),this.onAutoClick(this.createBtn,this,this.createHandler),this.onAutoClick(this.ruleBtn,this,this.ruleBtnHandler),this.onAutoGlobalEvt("SCENE_TEAMS_UPDATE",this,this.updateTeams),this.onAutoGlobalEvt("SCENE_TEAM_CAN_SEARCH_UPDATE",this,this.updateSearch),this.onAutoGlobalEvt("SCENE_TEAM_AUTO_ACCEPT_UPDATE",this,this.updateAutoAccept),this.onAutoGlobalEvt("SCENE_TEAM_MEMBER_UPDATE",this,this.updateMembers)},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),o.SceneTeamCtrl.instance.SceneSearchTeam(),this.updateAutoAccept(),this.updateSearch(),this.updateMembers(),this.updateTeams();var t=s.scene.SceneModel.instance.enterScene[0];this.text1.visible=2801===t},a.prototype.close=function(t,e){i.prototype.close.call(this,t,e),this._list.datas=null},a.prototype.autoAcceptHandler=function(){o.SceneTeamCtrl.instance.SceneSetPersion(!o.SceneTeamModel.instance.autoAcceptInvite)},a.prototype.autoPassHandler=function(){o.SceneTeamCtrl.instance.SceneSetTeam(!o.SceneTeamModel.instance.canSearch)},a.prototype.createHandler=function(){var t=o.SceneTeamModel.instance.members;t&&0<t.length?WindowManager.instance.open(1172):o.SceneTeamCtrl.instance.SceneCreateTeam()},a.prototype.ruleBtnHandler=function(){var t=s.scene.SceneModel.instance.enterScene[0];3201===t?CommonUtil.alertHelp(19037):2801===t&&CommonUtil.alertHelp(19050)},a.prototype.updateTeams=function(){var t=[],e=s.scene.SceneModel.instance.enterScene[0];if(2801===e){t?t.length=0:t=[];for(var i=0;i<o.SceneTeamModel.instance.teams.length;i++){var n=o.SceneTeamModel.instance.teams[i];n&&s.faction.FactionModel.instance.isTongXianMeng(n[1])&&t.push(n)}}else 3201===e&&(t=o.SceneTeamModel.instance.teams);this._list.datas=t,this.noImg.visible=this.noTxt.visible=0===t.length},a.prototype.updateSearch=function(){this.autoPassBtn.selected=o.SceneTeamModel.instance.canSearch},a.prototype.updateAutoAccept=function(){this.autoAcceptBtn.selected=o.SceneTeamModel.instance.autoAcceptInvite},a.prototype.updateMembers=function(){var t=o.SceneTeamModel.instance.members;this.createBtn.label=t&&0<t.length?"我的队伍":"创建队伍"},a.prototype.destroy=function(){this._list=this.destroyElement(this._list),i.prototype.destroy.call(this)},n=a,o.SceneTeamAlert=n}(modules=modules||{}),function(a){var h,n,t,c,e;function i(){return null!==n&&n.apply(this,arguments)||this}h=a.sceneTeam||(a.sceneTeam={}),t=a.common.AvatarClip,c=a.warband.WarbandModel,n=ui.SceneTeamCreateAlertUI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this._leftAvatar=t.normalCreate(),this._leftAvatar.pos(162,459),this.addChildAt(this._leftAvatar,2),this._rightAvatar=t.normalCreate(),this._rightAvatar.pos(497,459),this.addChildAt(this._rightAvatar,2),this._centerAvatar=t.normalCreate(),this._centerAvatar.pos(330,342),this.addChildAt(this._centerAvatar,2),this._time=0,this._avatars=[this._centerAvatar,this._leftAvatar,this._rightAvatar],this._nameTxts=[this.centerNameTxt,this.leftNameTxt,this.rightNameTxt],this._fightTxts=[this.centerFightTxt,this.leftFightTxt,this.rightFightTxt],this._addBoxs=[null,this.leftAddBox,this.rightAddBox],this._infoBoxs=[null,this.leftInfoBox,this.rightInfoBox],this._tipBoxs=[null,this.leftTipBox,this.rightTipBox],this._btns=[this.centerBtn,this.leftBtn,this.rightBtn]},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.leftAddBox,this,this.addBtnHandler),this.onAutoClick(this.rightAddBox,this,this.addBtnHandler),this.onAutoClick(this.centerBtn,this,this.centerBtnHandler),this.onAutoClick(this.leftBtn,this,this.kickedTeamHandler,[1]),this.onAutoClick(this.rightBtn,this,this.kickedTeamHandler,[2]),this.onAutoClick(this.warbandIcon,this,this.warbandClick),this.onAutoGlobalEvt("SCENE_TEAM_MEMBER_UPDATE",this,this.updateMembers)},i.prototype.onOpened=function(){n.prototype.onOpened.call(this),this._warbandNum=0,this.updateMembers(),WindowManager.instance.close(1171),this.setUI()},i.prototype.addBtnHandler=function(){WindowManager.instance.open(1173)},i.prototype.centerBtnHandler=function(){var t=this,e="是否确定解散队伍?";e=44===a.scene.SceneUtil.currScene?"解散队伍后，将会影响竞速BOSS的归属及最终BOSS的排名，是否确认解散？":"是否确定解散队伍";var i=Handler.create(this,function(){h.SceneTeamCtrl.instance.SceneLeaveTeam(1),n.prototype.close.call(t)});CommonUtil.alert("提示",e,[i],[])},i.prototype.kickedTeamHandler=function(t){var e=h.SceneTeamModel.instance.members[t];if(e){var i=e[0];if(i===PlayerModel.instance.actorId){var n="";n=44===a.scene.SceneUtil.currScene?"退出队伍后，将会影响竞速BOSS的归属及最终BOSS的排名，是否确认退出？":"是否退出队伍",CommonUtil.alert("提示",n,[Handler.create(h.SceneTeamCtrl.instance,h.SceneTeamCtrl.instance.SceneLeaveTeam,[0])],[])}else{var s=e[1],o=(n="是否将队员"+CommonUtil.formatHtmlStrByColor("#ffec7c","【"+s+"】")+"踢出队伍?",Handler.create(h.SceneTeamCtrl.instance,h.SceneTeamCtrl.instance.SceneKickedMember,[i]));CommonUtil.alert("提示",n,[o],[])}}},i.prototype.updateMembers=function(){var t=h.SceneTeamModel.instance.members;if(0!==t.length){for(var e=t[0][0]===PlayerModel.instance.actorId,i=0,n=t.length;i<n;i++){var s=t[i];this._nameTxts[i].text=s[1],this._fightTxts[i].text="战力："+CommonUtil.bigNumToString(s[5]),this.setActorShow(this._avatars[i],s[9]),this._avatars[i].visible=!0,this._infoBoxs[i]&&(this._infoBoxs[i].visible=!0),this._addBoxs[i]&&(this._addBoxs[i].visible=this._tipBoxs[i].visible=!1),s[0]===PlayerModel.instance.actorId?(this._btns[i].visible=!0,this._btns[i].label=e?"解散":"退出"):(this._btns[i].visible=e,this._btns[i].label="踢出"),this._avatars[i].gray=s[10],this._infoBoxs[i]&&(this._infoBoxs[i].gray=s[10])}for(i=t.length,n=this._avatars.length;i<n;i++)this._avatars[i].visible=this._btns[i].visible=!1,this._infoBoxs[i]&&(this._infoBoxs[i].visible=!1),this._addBoxs[i]&&(this._addBoxs[i].visible=this._tipBoxs[i].visible=!0);var o=c.instance.info;if(o){this.warbandNumTxt.visible=this.warbandBuffTxt.visible=this.warbandIcon.visible=this.warbandBg.visible=!0,this.warbandIcon.skin="assets/icon/warband/"+o[2]+".png",this._warbandNum=0;var a=o[4];for(i=0,n=a.length;i<n;++i)for(var r=0,l=t.length;r<l;++r)if(a[i][0]===t[r][0]){++this._warbandNum;break}this.warbandNumTxt.text=this._warbandNum+"/3"}else this.warbandNumTxt.visible=this.warbandBuffTxt.visible=this.warbandIcon.visible=this.warbandBg.visible=!1}else this.close()},i.prototype.warbandClick=function(){this._warbandNum&&WindowManager.instance.open(770,this._warbandNum)},i.prototype.setActorShow=function(t,e){t.reset(e[7],e[6])},i.prototype.destroy=function(){this._nameTxts=this.destroyElement(this._nameTxts),this._fightTxts=this.destroyElement(this._fightTxts),this._addBoxs=this.destroyElement(this._addBoxs),this._infoBoxs=this.destroyElement(this._infoBoxs),this._tipBoxs=this.destroyElement(this._tipBoxs),this._btns=this.destroyElement(this._btns),this._centerAvatar=this.destroyElement(this._centerAvatar),this._leftAvatar=this.destroyElement(this._leftAvatar),this._rightAvatar=this.destroyElement(this._rightAvatar),this._avatars.length=0,this._avatars=null,this._infos&&(this._infos.length=0,this._infos=null),n.prototype.destroy.call(this)},i.prototype.setUI=function(){var t=a.scene.SceneModel.instance.enterScene[0];3201===t?(this.height=this.bgImg.height=630,this.tipTxt.y=650,this.text3.visible=this.text1.visible=this.text2.visible=!1,Laya.timer.clear(this,this.timeUpdate)):2801===t&&(this.height=this.bgImg.height=696,this.tipTxt.y=692,this.text3.visible=this.text1.visible=this.text2.visible=!0,Laya.timer.clear(this,this.timeUpdate),a.union_war.UnionWarModel.instance.readyEndTime>=GlobalData.serverTime?(this.timeUpdate(),Laya.timer.loop(1e3,this,this.timeUpdate)):this.text2.text="战斗进行中,本场战斗轮空")},i.prototype.close=function(){n.prototype.close.call(this),Laya.timer.clear(this,this.timeUpdate)},i.prototype.timeUpdate=function(){this.text2.text=CommonUtil.timeStampToMMSS(a.union_war.UnionWarModel.instance.readyEndTime)+"后开始战斗",a.union_war.UnionWarModel.instance.readyEndTime<GlobalData.serverTime&&(Laya.timer.clear(this,this.timeUpdate),this.text2.text="战斗进行中,本场战斗轮空")},e=i,h.SceneTeamCreateAlert=e}(modules=modules||{}),function(s){var o,t,e,i,n,a;function r(){return null!==t&&t.apply(this,arguments)||this}o=s.sceneTeam||(s.sceneTeam={}),e=ui.SpiritTeamInviteAlertUI,i=s.common.SimpleList,n=s.notice.SystemNoticeManager,t=e,__extends(r,t),r.prototype.initialize=function(){t.prototype.initialize.call(this),this._list=i.create(o.SceneTeamInviteItem,560,112),this._list.pos(50,136,!0),this._list.size(560,610),this.addChild(this._list)},r.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.oneKeyBtn,this,this.oneKeyHandler),this.onAutoGlobalEvt("SCENE_TEAM_PLAYERS_TO_INVITE_UPDATE",this,this.updatePlayers)},r.prototype.onOpened=function(){t.prototype.onOpened.call(this),o.SceneTeamCtrl.instance.SceneSearchObj()},r.prototype.oneKeyHandler=function(){this._list.datas&&0!==this._list.datas.length?o.SceneTeamCtrl.instance.SceneInviteMember(0):n.instance.addNotice("无可邀请玩家",!0)},r.prototype.updatePlayers=function(){var t=[],e=s.scene.SceneModel.instance.enterScene[0];if(2801===e){t?t.length=0:t=[];for(var i=0;i<o.SceneTeamModel.instance.playersToInvite.length;i++){var n=o.SceneTeamModel.instance.playersToInvite[i];n&&s.faction.FactionModel.instance.isTongXianMeng(n[2])&&t.push(n)}}else 3201===e&&(t=o.SceneTeamModel.instance.playersToInvite);this._list.datas=t,this.noImg.visible=this.noTxt.visible=0===t.length},r.prototype.destroy=function(){this._list=this.destroyElement(this._list),t.prototype.destroy.call(this)},a=r,o.SceneTeamInviteAlert=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.sceneTeam||(t.sceneTeam={}),n=ui.TeamCopyInviteItemUI,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.inviteHandler)},o.prototype.inviteHandler=function(){this._data&&e.SceneTeamCtrl.instance.SceneInviteMember(this._data[2])},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this.headIcon.setInfo(t[6],t[5],t[7]),this.nameTxt.text=t[3],this.fightTxt.text="战力："+CommonUtil.bigNumToString(t[8])},s=o,e.SceneTeamInviteItem=s}(modules=modules||{}),function(i){var n,e,t,s;function o(){return null!==e&&e.apply(this,arguments)||this}n=i.sceneTeam||(i.sceneTeam={}),t=ui.SpiritTeamItemUI,e=t,__extends(o,e),o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.reqBtn,this,this.reqHandler)},o.prototype.setData=function(t){e.prototype.setData.call(this,t),this.headIcon.setInfo(t[3],t[7],t[8]),this.leaderTxt.text="队长："+t[2],this.numTxt.text="队伍人数："+t[5]+"/"+t[6],this.fightTxt.text="队伍战力："+CommonUtil.bigNumToString(t[4])},o.prototype.reqHandler=function(){var t=this,e=i.forbiddenBoss.ForbiddenBossModel.instance.info;e&&1===e[3]?CommonUtil.alert("温馨提示","进入队伍后个人击杀数量将被清空，是否进入队伍？",[Handler.create(this,function(){n.SceneTeamCtrl.instance.SceneJoinTeam(t._data[0],1),n.SceneTeamCtrl.instance.SceneSearchTeam()})],[]):(n.SceneTeamCtrl.instance.SceneJoinTeam(this._data[0],1),n.SceneTeamCtrl.instance.SceneSearchTeam())},s=o,n.SceneTeamItem=s}(modules=modules||{}),function(u){var t,i,e;function n(){return null!==i&&i.apply(this,arguments)||this}t=u.sceneTeam||(u.sceneTeam={}),i=ui.TeamBelongViewUI,__extends(n,i),n.prototype.initialize=function(){i.prototype.initialize.call(this),this.layer=1,this.closeByOthers=!1,this.top=230,this.centerX=60,this.zOrder=-1},n.prototype.setOpenParam=function(t){i.prototype.setOpenParam.call(this,t),this._id=t},n.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BOSS_OWN_UPDATE",this,this.updateBelong),this.onAutoGlobalEvt("BOSS_HURT_RANK_UPDATE",this,this.updateBelong)},n.prototype.offEvt=function(){i.prototype.offEvt.call(this),this.setTarget(null)},n.prototype.onOpened=function(){i.prototype.onOpened.call(this);var t=GameCenter.instance.getRole(this._id);if(null==t||t.property.get("hp")[0]<=0||1024===t.property.get("status"))this.close();else{this.setTarget(t.property);var e=this._target.get("occ");e&&(u.sceneTeam.SceneTeamModel.instance.hurtRank[e]=[],this.updateBelong())}},n.prototype.setTarget=function(t){null!=this._target&&this._target.off("destroyed",this,this.close),this._target=t,null!=this._target&&this._target.on("destroyed",this,this.close)},n.prototype.updateBelong=function(){var t=this._target.get("occ");if(t){var e,i=u.bossDungeon.BossDungeonModel.instance.getOwnByBossId(t);if(i&&(e=i[1]),e){this.visible=!0,this.firstTxt.text=this.secendTxt.text="";for(var n=u.sceneTeam.SceneTeamModel.instance.hurtRank[t]||[],s=0,o=0,a=i[2],r=0;r<n.length;++r)n[r][1],n[r][0][0]===e?(s=n[r][1]||0,a=n[r][0][1]):n[r][0][0]!==PlayerModel.instance.actorId&&n[r][0][0]!==PlayerModel.instance.teamId||(o=n[r][1]||0);if(e!=PlayerModel.instance.actorId&&e!=PlayerModel.instance.teamId?(this.firstTxt.text="归属队伍总伤害:"+CommonUtil.bigNumToString(s),this.firstTxt.color="#ffffff",this.secendTxt.text="己方队伍总伤害:"+CommonUtil.bigNumToString(o)):(this.firstTxt.text="归属队伍(己方)总伤害:"+CommonUtil.bigNumToString(s),this.firstTxt.color="#50ff28",this.secendTxt.text=""),a){this.nameTxt.text=a+"的队伍";var l=1,h=0,c=0,p=u.scene.SceneModel.instance.humans;for(r=0;r<p.length;++r)if(p[r][5][5]==i[2]){l=p[r][5][1],h=p[r][5][21],c=p[r][5][22];break}this.playerHead.setInfo(h,l,c)}else this.visible=!1}else this.visible=!1}else this.visible=!1},e=n,t.TeamBelongPanel=e}(modules=modules||{}),function(t){var i,e,n,s,o,a;function r(){return e.call(this)||this}i=t.sevenDayGift||(t.sevenDayGift={}),n=ui.SevenGiftItemUI,s=Laya.Rectangle,o=t.halfMonthGift.HalfMonthGiftModel,e=n,__extends(r,e),r.prototype.initialize=function(){e.prototype.initialize.call(this),this.receiveImg.visible=!1,this.selected=!1,this.dotImg.visible=!1},r.prototype.setSevenItem=function(){this.frameImg.width=307,this.frameImg.x=-84,this.hitArea=new s(-84,0,307,196)},Object.defineProperty(r.prototype,"selected",{set:function(t){this.frameImg.alpha=t?1:0,this.frameImg.mouseEnabled=!t,this.item.mouseEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"type",{set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cfg",{set:function(t){var e;1===this._type?(e=t[1],this.item.dataSource=[e[0][0],e[0][1],0,null],7===t[0]&&this.setSevenItem()):2===this._type&&(e=t[1],this.item.dataSource=[e[0][0],e[0][1],0,null],14===t[0]&&this.setSevenItem())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"data",{set:function(t){var e;this.receiveImg.visible=1===t[1],1===this._type?(e=i.SevenDayGiftModel.instance.sevenDayInfo[0],this.dotImg.visible=e>=t[0]&&0===t[1]):2===this._type&&(e=o.instance.halfMonthInfo[1],this.dotImg.visible=e>=t[0]&&0===t[1])},enumerable:!0,configurable:!0}),a=r,i.SevenDayGiftItem=a}(modules=modules||{}),function(t){var e,a,r,i;function n(){}e=t.sevenDayGift||(t.sevenDayGift={}),a=t.redPoint.RedPointCtrl,r=t.funcOpen.FuncOpenModel,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sevenDayInfo",{get:function(){return this._sevenDayInfo},set:function(t){this._sevenDayInfo=t,GlobalData.dispatcher.event("SEVEN_DAY_INFO_UPDATA"),this.checkRP()},enumerable:!0,configurable:!0}),n.prototype.checkRP=function(){var t=!1;if(r.instance.getFuncNeedShow(5))for(var e=this._sevenDayInfo[0],i=this._sevenDayInfo[1],n=0,s=i.length;n<s;n++){var o=i[n];if(e>=o[0]&&0===o[1]){t=!0;break}}a.instance.setRPProperty("sevenDayGiftRP",t)},n.prototype.getDataByIndex=function(t){var e;return this._sevenDayInfo&&(e=this._sevenDayInfo[1][t]),e},i=n,e.SevenDayGiftModel=i}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return i.call(this)||this}e=t.sheng_yu||(t.sheng_yu={}),n=t.common.CommonUtil,s=t.config.MonsterResCfg,o=t.dungeon.DungeonModel,i=ui.ShengYuBossInfoItemUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._restTm=0},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateState)},r.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._isDead=!1,this.showUI(),this.updateState())},r.prototype.showUI=function(){var t=s.instance.getCfgById(this._data);this.bossHead.skin="assets/icon/monster/"+t[3]+".png"},r.prototype.updateState=function(){this.fuHuoTimeBgImg.visible=this.fuHuoTimeText.visible=!1;var t=this._data,e=o.instance.getBossInfoById(t);if(e){var i=e[2];this._isDead=i[0];var n=i[2];this._restTm=n,this.setActivitiTime()}else console.log("无法获取Boss:"+t)},r.prototype.setActivitiTime=function(){Laya.timer.clear(this,this.activityHandler),this._restTm>=GlobalData.serverTime&&this._isDead?(this.fuHuoTimeBgImg.visible=this.fuHuoTimeText.visible=!0,this.activityHandler(),Laya.timer.loop(1e3,this,this.activityHandler)):this.fuHuoTimeBgImg.visible=this.fuHuoTimeText.visible=!1},r.prototype.activityHandler=function(){this.fuHuoTimeText.text=""+n.timeStampToMMSS(this._restTm),this._restTm<GlobalData.serverTime&&!this._isDead&&(this.fuHuoTimeBgImg.visible=this.fuHuoTimeText.visible=!1,Laya.timer.clear(this,this.activityHandler))},r.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.activityHandler)},a=r,e.ShengYuBossInfoItem=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.sheng_yu||(t.sheng_yu={}),n=t.config.MonsterResCfg,i=ui.BossListItemUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.updateState()},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateInfo)},o.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},o.prototype.setData=function(t){if(i.prototype.setData.call(this,t),t){var e=t[3];this._bossId=e,this._reviveTime=0,this.selected?this.isSelect.visible=!0:this.isSelect.visible=!1,n.instance.getCfgById(this._bossId),this.bossName.text=n.instance.getMonsterName(e),this.bossLevel.text="Lv."+n.instance.getMonsterLevel(e),this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1,this._isDead=!0,this.updateState()}},o.prototype.setSelected=function(t){if(DungeonModel.instance.bossIsDead(this._bossId))return this.isSelect.visible=!1,void(this.selectEnable=!1);this.selectEnable=!0,i.prototype.setSelected.call(this,t),this.selectShow()},o.prototype.selectShow=function(){this.selected?(this.isSelect.visible=!0,this._bossId&&e.ShengYuBossModel.instance.setSelectTarget(this._bossId,!0)):this.isSelect.visible=!1},o.prototype.updateInfo=function(){this.updateState()},o.prototype.updateState=function(){var t=DungeonModel.instance.getBossInfoById(this._bossId);if(t){var e=t[2];if(this._isDead=e[0],this._isDead){Laya.timer.clear(this,this.loopHandler),this._reviveTime=e[2];var i=this._reviveTime-GlobalData.serverTime;this.setTime(i),this.hasRefreshTxt.visible=!1,this.remainTime.visible=!0,Laya.timer.loop(1e3,this,this.loopHandler)}else e[0]||(Laya.timer.clear(this,this.loopHandler),this.hasRefreshTxt.visible=!0,this.remainTime.visible=!1,this.selectEnable=!0)}},o.prototype.loopHandler=function(){var t=this._reviveTime-GlobalData.serverTime;if(t<=0&&!this._isDead)return this.remainTime.visible=!1,this.hasRefreshTxt.visible=!0,void Laya.timer.clear(this,this.loopHandler);this.setTime(t)},o.prototype.setTime=function(t){this.remainTime.text=CommonUtil.msToHHMMSS(t)},s=o,e.ShengYuBossListItemItem=s}(modules=modules||{}),function(r){var i,t,e,n,s,o,a,l,h,c,p;function u(){this.stength=0,this._zengJiaNum=0,this.tipsNum=0,this._isDummy=!1,this.minNum=0,this.openNum=0,this.minNum=t.instance.getCfgById(58002)[1][0],this.openNum=t.instance.getCfgById(58007)[1][0],this.itemId=t.instance.getCfgById(58001)[1][0],this._item=[this.itemId,1,0,null],this._maxTiLi=t.instance.getCfgById(58003)[1][0],this._zengJiaNum=t.instance.getCfgById(58004)[1][0],this.tipsNum=t.instance.getCfgById(58005)[1][0],this._bollTips=!1,this._bollZiDong=!1,this.nowCeng=1,this.stength=0,this._zengJiaNum=50,this.moRengCeng=1,this._nameZhuanHuan=["圣殿0层","圣殿一层","圣殿二层","圣殿三层","圣殿四层","圣殿五层","圣殿六层","圣殿七层","圣殿八层","圣殿九层","圣殿十层","圣殿十一层","圣殿十二层","圣殿十三层","圣殿十四层","圣殿十五层","圣殿十六层","圣殿十七层","圣殿十八层","圣殿十九层","圣殿二十层"]}i=r.sheng_yu||(r.sheng_yu={}),t=r.config.BlendCfg,e=r.config.MonsterResCfg,n=r.common.CommonUtil,s=r.bag.BagModel,o=r.player.PlayerModel,a=r.bag.BagUtil,l=r.bossDungeon.BossDungeonModel,h=r.config.PrivilegeCfg,c=r.funcOpen.FuncOpenModel,Object.defineProperty(u,"instance",{get:function(){return this._instance=this._instance||new u},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"maxTili",{get:function(){var t=this._maxTiLi,e=c.instance.getFuncIsOpen(981),i=r.weekCard.WeekCardModel.instance.isVip;if(e&&i){for(var n=0,s=h.instance.getCfgByType(401)[1],o=0,a=s.length;o<a;o++)if(100===s[o][0]){n=s[o][1];break}t+=n}return t},enumerable:!0,configurable:!0}),u.prototype.getBossSeversInfoById=function(t){return DungeonModel.instance.getBossInfoById(t)},u.prototype.getCfgByid=function(t){return e.instance.getCfgById(t)},u.prototype.setSelectTarget=function(t,e){var i=o.instance;-1==t?(i.selectTarget(1,-1),GlobalData.dispatcher.event("BOSS_OWN_UPDATE")):(this._isDummy=!1,e?(DungeonModel.instance.getBossInfoById(t)&&(l.instance.selectTargetPos=DungeonModel.instance.getBossInfoById(t)[3],l.instance.selectLastBoss=t,i.selectTarget(1,t)),GlobalData.dispatcher.event("BOSS_OWN_UPDATE")):i.selectTarget(2,t))},u.prototype.getName=function(t){return this._nameZhuanHuan[t]},u.prototype.addHandler=function(){if(this._item)if(0<s.instance.getItemCountById(u.instance.itemId)){var t=this.stength,e=this.maxTili;t!=e?1*this._zengJiaNum+t>e?n.alert("温馨提示","使用后体力溢出,溢出部分不保留,是否确定？",[Handler.create(this,this.useHandler)],[],null,!0):i.ShenYuBossCtrl.instance.UseStrengthItem(1):r.notice.SystemNoticeManager.instance.addNotice("当前体力值已满，无需使用体力丹",!0)}else a.openLackPropAlert(u.instance.itemId,1)},u.prototype.useHandler=function(){i.ShenYuBossCtrl.instance.UseStrengthItem(1)},u.prototype.getIsOver=function(){return 0<this.stength&&this.stength>=this.minNum+this.openNum},p=u,i.ShengYuBossModel=p}(modules=modules||{}),function(e){var t,i,n,s,o;function a(){return i.call(this)||this}t=e.sheng_yu||(e.sheng_yu={}),n=e.player.PlayerModel,s=e.rename.RenameModel,i=ui.PlayerListItemUI,__extends(a,i),a.prototype.initialize=function(){i.prototype.initialize.call(this),this.layer=1},a.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName)},a.prototype.setSelected=function(t){this._playerId!=n.instance.actorId&&(e.faction.FactionModel.instance.isTongXianMeng(this._playerId)?e.notice.SystemNoticeManager.instance.addNotice("不可攻击同一仙盟玩家",!0):(i.prototype.setSelected.call(this,t),this.selectShow()))},a.prototype.selectShow=function(){this.selected?(this.isSelect.visible=!0,this._playerId&&t.ShengYuBossModel.instance.setSelectTarget(this._playerId,!1)):this.isSelect.visible=!1},a.prototype.setData=function(t){i.prototype.setData.call(this,t),t?(this.isOwnTxt.visible=!1,this.visible=!0,this._infos=t,this._playerId=this._infos[0],this.selected?this.isSelect.visible=!0:this.isSelect.visible=!1,this.updateName()):this.visible=!1},a.prototype.updateName=function(){if(this._infos){0==this._infos[2]?(this.playerName.color="#ffffff",this.isOwnTxt.visible=!1):1==this._infos[2]?(this.playerName.color="#ffffff",this.isOwnTxt.visible=!0):2==this._infos[2]?(this.playerName.color="#e6372e",this.isOwnTxt.visible=!1):(this.playerName.color="#e6372e",this.isOwnTxt.visible=!0),this.playerName.text=this._infos[1];var t=s.instance.updateNameReply;t&&t[0]===this._infos[0]&&(this.playerName.text=t[1])}},o=a,t.ShengYuBossPlayerListItemItem=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.sheng_yu||(t.sheng_yu={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!1,this.needTip=!0},o.prototype.setDataSource=function(t){t&&(t=[t[0],1,0,null],i.prototype.setDataSource.call(this,t))},o.prototype.destroy=function(){i.prototype.destroy.call(this,!0)},s=o,e.ShenYuRewradItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.sheng_yu||(t.sheng_yu={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},o.prototype.setDataSource=function(t){t&&(t=[t[0],t[1],0,null],i.prototype.setDataSource.call(this,t))},o.prototype.destroy=function(){i.prototype.destroy.call(this,!0)},s=o,e.ShenYuRewradItem1=s}(modules=modules||{}),function(u){!function(d){var t,e=u.core.BaseDialogEx,y=u.config.SkillPureCfg,g=u.config.SkillCfg,f=u.config.BlendCfg,_=u.config.ShowEquipCfg,p=u.common.CustomClip,i=(t=e,__extends(n,t),n.prototype.initialize=function(){t.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.v.curHtml,"#2C476A","SimHei",24),CommonUtil.setHTMLPro(this.v.nextHtml,"#2C476A","SimHei",24)},n.prototype.setOpenParam=function(t){this._type=t},n.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.updateView()},n.prototype.updateView=function(){var t=_.instance.getCfgByType(this._type)[1];this.v.titleTxt.text=t+"套装技能";var e=d.ShowEquipModel.instance.getSkillInfo(this._type),i=0<e[0],n=i?e[0]:e[1],s=1e-4*n>>0,o=y.instance.getCfgById(s),a=g.instance.getCfgById(n);o&&o[6]&&(this.v.iconImg.skin="assets/icon/skill/"+o[6]+".png"),this.v.iconImg.gray=!i;var r=n%1e4;if(o&&o[1]?this.v.nameTxt.text=o[1]+" Lv."+(i?r:"0"):this.v.nameTxt.text="",this.v.powerTxt.text="战力："+(i?a[3]:0),i){var l=f.instance.getCfgById(94006)[2];this.v.curHtml.innerHTML="穿戴"+e[3]+"件"+l[e[4]-1]+"品及以上"+t+"套装";var h=_.instance.getSkillCfgBySkillId(n);if(this.v.curLvDesc.text=h?h[4]:"",e[1]){var c=CommonUtil.formatHtmlStrByColor(e[2]<e[3]?"#ff3e3e":"#0ecf09","("+e[2]+"/"+e[3]+")");this.v.nextHtml.innerHTML="穿戴"+e[3]+"件"+l[e[5]-1]+"品及以上"+t+"套装"+c;var p=1e-4*e[1]>>0,u=(y.instance.getCfgById(p),g.instance.getCfgById(e[1]),_.instance.getSkillCfgBySkillId(e[1]));this.v.nextLvDesc.text=u?u[4]:"",this.v.nextLvDesc.color="#8d8d8d"}else this.v.nextLvDesc.text="已达最大等级",this.v.nextLvDesc.color="#00ad35",this.v.nextHtml.innerHTML=""}else this.v.curLvDesc.text="无",this.v.curHtml.innerHTML="",l=f.instance.getCfgById(94006)[2],c=CommonUtil.formatHtmlStrByColor(e[2]<e[3]?"#ff3e3e":"#0ecf09","("+e[2]+"/"+e[3]+")"),this.v.nextHtml.innerHTML="穿戴"+e[3]+"件"+l[e[5]-1]+"品及以上"+t+"套装"+c,h=_.instance.getSkillCfgBySkillId(e[1]),this.v.nextLvDesc.text=h?h[4]:"",this.v.nextLvDesc.color="#8d8d8d"},n);function n(){return null!==t&&t.apply(this,arguments)||this}d.ShowEquipSkillAlert=i;var s,o=(s=e,__extends(a,s),a.prototype.destroy=function(){this._btnEft=this.destroyElement(this._btnEft),s.prototype.destroy.call(this)},a.prototype.initialize=function(){s.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.v.html_1,"#2C476A","SimHei",24),CommonUtil.setHTMLPro(this.v.html_2,"#2C476A","SimHei",24),this._btnEft=p.create("assets/effect/btn_light.atlas","btn_light",16),this._btnEft.pos(this.v.upGradeBtn.x-5,this.v.upGradeBtn.y-10,!0),this.v.addChild(this._btnEft),p.thisStop(this._btnEft)},a.prototype.setOpenParam=function(t){this._type=t},a.prototype.onOpened=function(){s.prototype.onOpened.call(this),this.updateView()},a.prototype.updateView=function(){var t=d.ShowEquipModel.instance.masterLvs[this._type]||0,e=_.instance.getCfgByType(this._type),i=e[5];this.v.titleTxt.text=i+"大师·"+t+"阶";var n=f.instance.getCfgById(94006)[2];if(0<t){var s=_.instance.getMasterCfgByTypeAndLv(this._type,t);this.v.attValueTxt.value=""+(s?s[3]:"无配置"),this.v.html_1.innerHTML=s?"穿戴4件"+n[s[2]-1]+"品及以上"+e[1]+"套装":"";var o=s?s[4]:[],a=(l=u.config.AttrItemCfg.instance.getCfgById(o[0]))[2];this.v.attrTxt_1.text=l[1]+"+"+(a?u.common.AttrUtil.formatFloatNum(o[1])+"%":Math.round(o[1])+""),this.v.attrTxt_2.text=""}else this.v.attValueTxt.value="0",this.v.html_1.innerHTML="",this.v.attrTxt_1.text="无",this.v.attrTxt_2.text="";var r=_.instance.getMasterCfgByTypeAndLv(this._type,t+1);if(r){var l,h=d.ShowEquipModel.instance.getMasterCondition(this._type),c=CommonUtil.formatHtmlStrByColor(h[0]<h[1]?"#ff3e3e":"#0ecf09","("+h[0]+"/"+h[1]+")");this.v.html_2.innerHTML="穿戴4件"+n[r[2]-1]+"品及以上"+e[1]+"套装"+c,o=r[4],a=(l=u.config.AttrItemCfg.instance.getCfgById(o[0]))[2],this.v.attrTxt_3.text=l[1]+"+"+(a?u.common.AttrUtil.formatFloatNum(o[1])+"%":Math.round(o[1])+""),this.v.attrTxt_3.color="#8d8d8d",this.v.attrTxt_4.text="",this.v.upGradeBtn.visible=!0,this.v.upGradeBtn.disabled=h[0]<h[1],h[0]<h[1]?p.thisStop(this._btnEft):p.thisPlay(this._btnEft)}else this.v.html_2.innerHTML="",this.v.attrTxt_3.text="已达最大阶数",this.v.attrTxt_3.color="#00ad35",this.v.attrTxt_4.text="",this.v.upGradeBtn.visible=!1,p.thisStop(this._btnEft)},a.prototype.onEvt=function(){var e=this;s.prototype.onEvt.call(this),this.onAutoClick(this.v.upGradeBtn,this,function(){var t=d.ShowEquipModel.instance.getMasterCondition(e._type);0<t[1]&&t[0]===t[1]&&d.ShowEquipCtrl.instance.ShowEquipRise(e._type)}).onAutoGlobalEvt("SHOWEQUIP_UPDATE",this,function(){e.updateView()})},a);function a(){return null!==s&&s.apply(this,arguments)||this}d.ShowEquipMasterAlert=o;var r,l=(r=ui.ShowEquipConvertAlertUI,__extends(h,r),h.prototype.setOpenParam=function(t){r.prototype.setOpenParam.call(this,t),this.itemData=t},h.prototype.onOpened=function(){r.prototype.onOpened.call(this),this.item.dataSource=this.itemData,this.item._numTxt.visible=!0},h);function h(){return null!==r&&r.apply(this,arguments)||this}d.ShowEquipConvertAlert=l}(u.showEquip||(u.showEquip={}))}(modules=modules||{}),function(f){var _,e,t,m,v,r,l,p,i;function n(){return null!==e&&e.apply(this,arguments)||this}_=f.showEquip||(f.showEquip={}),t=f.core.BaseViewEx,m=f.common.CustomClip,v=f.config.ShowEquipCfg,r=f.config.SkillPureCfg,l=f.config.SkillCfg,p=f.config.ItemEquipCfg,e=t,__extends(n,e),n.prototype.destroy=function(t){void 0===t&&(t=!0),this._scheEffect=this.destroyElement(this._scheEffect),this._btnEft1=this.destroyElement(this._btnEft1),this._btnEft2=this.destroyElement(this._btnEft2),this.v.itemList&&this.v.itemList.renderHandler&&(this.v.itemList.renderHandler.recover(),this.v.itemList.renderHandler=null),this.v.itemList&&this.v.itemList.selectHandler&&(this.v.itemList.selectHandler.recover(),this.v.itemList.selectHandler=null),this.v.attrList&&this.v.attrList.renderHandler&&(this.v.attrList.renderHandler.recover(),this.v.attrList.renderHandler=null),e.prototype.destroy.call(this,t)},n.prototype.initialize=function(){var i=this;e.prototype.initialize.call(this),this.centerX=this.centerY=0,this.v.attrList.renderHandler=Handler.create(this,function(t,e){var i=t.dataSource,n=f.config.AttrItemCfg.instance.getCfgById(i[0]),s=n[2];t.getChildByName("nameTxt").text=n[1]+"：",t.getChildByName("valueTxt").text=s?f.common.AttrUtil.formatFloatNum(i[1])+"%":Math.round(i[1])+"",t.getChildByName("upImg").visible=i[2]>i[1],t.getChildByName("addTxt").text=i[2]>i[1]?s?f.common.AttrUtil.formatFloatNum(i[2]-i[1])+"%":Math.round(i[2]-i[1])+"":""},null,!1),this.v.itemList.renderHandler=Handler.create(this,function(t,e){t.updateView(i._type,e)},null,!1),this.v.itemList.selectHandler=Handler.create(this,this.updateDetail,null,!1),this.v.itemList.selectEnable=!0,this._scheEffect=m.create("assets/effect/wave.atlas","wave",8),this.v.masterCon.addChildAt(this._scheEffect,0),this._scheEffect.pos(-10,100,!0),this.v.tab_0.selected=!0,this.v.tab_0.mouseEnabled=!1;var t=v.instance.getCfgByType(this._type);this.v.titleTxt.text=t[1],CommonUtil.setHTMLPro(this.v.costTxt,"#4c5e8a","SimHei",24,"center"),this.v.totalAttr.underline=!0,this.v.totalAttr.mouseEnabled=!0,this.v.powerNum.value="",this._btnEft1=m.create("assets/effect/btn_light.atlas","btn_light",16),this._btnEft1.pos(this.v.equipBtn.x-5,this.v.equipBtn.y-10,!0),this.v.addChild(this._btnEft1),m.thisStop(this._btnEft1),this._btnEft2=m.create("assets/effect/btn_light.atlas","btn_light",16),this._btnEft2.pos(this.v.composeBtn.x-5,this.v.composeBtn.y-10,!0),this.v.addChild(this._btnEft2),m.thisStop(this._btnEft2),this.v.bg.skin="show_equip/image_wxyb_bg"+this._type+".jpg"},n.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.v.itemList.selectedIndex=-1;for(var t=1;t<=4;++t)if(_.ShowEquipModel.instance.checkCanComposeByTypePart(this._type,t)){this.v.itemList.selectedIndex=t-1;break}this.updateEquips()},n.prototype.onEvt=function(){var c=this;e.prototype.onEvt.call(this),this._scheEffect.play(),this.onAutoClick(this.v.equipBtn,this,this.onEquipClick),this.onAutoClick(this.v.composeBtn,this,function(){if(!c.v.itemList.selectedItem){var t=v.instance.getItemIdByTypeStarPart(c._type,0,c.v.itemList.selectedIndex);return(s=[])[1]=t,s[7]=_.ShowEquipModel.instance.getTipNameByItemId(t),void WindowManager.instance.open(259,[s,7])}if(c._composeCfg){var e=0,i=c._composeCfg[5];for(var n in i)if(i[n][0]===c.v.itemList.selectedItem[0]){e=i[n][1];break}var s,o=_.ShowEquipModel.instance.getUidsByItemId(c.v.itemList.selectedItem[0],e-1);if(o.length<e-1)return t=c.v.itemList.selectedItem[0],(s=[])[1]=t,s[7]=_.ShowEquipModel.instance.getTipNameByItemId(t),void WindowManager.instance.open(259,[s,7]);if((i=c._composeCfg[6])&&i.length)for(var n in i){var a=CommonUtil.getPropCountById(i[n][0]);if(a<i[n][1])return void f.bag.BagUtil.openLackPropAlert(i[n][0],i[n][1]-a)}_.ShowEquipCtrl.instance.FastComposeShowEquip(c._type,c.v.itemList.selectedIndex+1,c._composeCfg[0],o)}}).onAutoClick(this.v.masterBg,this,function(){WindowManager.instance.openDialog(1287,c._type)}).onAutoClick(this.v.skill,this,function(){WindowManager.instance.openDialog(1288,c._type)}).onAutoClick(this.v.tab_1,this,function(){WindowManager.instance.open(v.instance.type2WinId[c._type][1])}).onAutoGlobalEvt("SHOWEQUIP_UPDATE",this,function(t){t===c._type&&c.updateEquips()}).onAutoClick(this.v.totalAttr,this,function(){var t=_.ShowEquipModel.instance.equips[c._type]||[],e=0,i=[],n={};for(var s in t){var o=p.instance.getItemCfgById(t[s][1][0]);e+=o[5];for(var a=o[8],r=0;r<a.length;r+=2)-1===i.indexOf(a[r])&&(i.push(a[r]),n[a[r]]=0),n[a[r]]+=a[r+1]||0}i.sort(function(t,e){return t-e});var l=[];for(s=0;s<i.length;++s)l.push([i[s],n[i[s]]]);var h=v.instance.getCfgByType(c._type);WindowManager.instance.open(26,[h[1]+"总属性",e,l,v.instance.attrIds[c._type]])}).onAutoGlobalEvt("BAG_UPDATE",this,function(t){13===t&&c.updateEquips()}).onAutoClick(this.v.heloBtn,this,function(){CommonUtil.alertHelp(19047)})},n.prototype.onEquipClick=function(){var t=_.ShowEquipModel.instance.getAutoEquipUids(this._type);if(0<t.length)_.ShowEquipCtrl.instance.ShowEquipFastWear(this._type,t);else{for(var e=void 0,i=this.v.itemList.dataSource,n=0;n<i.length;n++)if(!(a=i[n])){e=f.config.ShowEquipCfg.instance.getItemIdByTypeStarPart(this._type,0,n);break}if(null==e){var s=f.config.ShowEquipCfg.instance.getStarByItemId(this._type,i[0][0]),o=0;for(n=0;n<i.length;n++){var a;if(a=i[n]){var r=f.config.ShowEquipCfg.instance.getStarByItemId(this._type,a[0]);r<s&&(s=r,o=n)}}e=f.config.ShowEquipCfg.instance.getItemIdByTypeStarPart(this._type,s+1,o)}if(e){var l=[];l[1]=e,l[7]=_.ShowEquipModel.instance.getTipNameByItemId(e),WindowManager.instance.open(259,[l,7])}else CommonUtil.noticeError(51102)}},n.prototype.offEvt=function(){e.prototype.offEvt.call(this),this._scheEffect.stop()},n.prototype.updateDetail=function(t){if(!(t<0||t>=this.v.itemList.length)){var e=this.v.itemList.selectedItem,i=[],n=[];if(e){var s=e[0];i=CommonUtil.getItemCfgById(s)[8];var o=(.001*s>>0)%10;if((c=CommonUtil.getItemCfgById(v.instance.getItemIdByTypeStarPart(this._type,o,this.v.itemList.selectedIndex)))&&(n=c[8]),this._composeCfg=_.ShowEquipModel.instance.getComposeCfgByCostItemId(s),this._composeCfg){var a=this._composeCfg[5];for(var r in a){var l=f.bag.BagModel.instance.getItemCountById(a[r][0]);a[r][0]===s&&l++,this.v.costImg1.skin=CommonUtil.getIconById(a[r][0]),l<a[r][1]?this.v.costTxt1.color="#ff3e3e":this.v.costTxt1.color="#168a17",this.v.costTxt1.text=l+"/"+a[r][1]+"  "}for(var h in a=this._composeCfg[6])l=f.bag.BagModel.instance.getItemCountById(a[h][0]),this.v.costImg2.skin=CommonUtil.getIconById(a[h][0]),l<a[h][1]?this.v.costTxt2.color="#ff3e3e":this.v.costTxt2.color="#168a17",this.v.costTxt2.text=l+"/"+a[h][1];a&&0<a.length?(this.v.costImg2.visible=this.v.costTxt2.visible=!0,CommonUtil.centerChainArr(this.v.costBox.width,[this.v.costImg1,this.v.costTxt1,this.v.costImg2,this.v.costTxt2])):(this.v.costImg2.visible=this.v.costTxt2.visible=!1,CommonUtil.centerChainArr(this.v.costBox.width,[this.v.costImg1,this.v.costTxt1])),this.v.composeBtn.visible=!0,this.v.equipBtn.centerX=-150,this.v.costBox.visible=!0}else this.v.composeBtn.visible=!1,this.v.equipBtn.centerX=0,this.v.costBox.visible=!1;this.v.composeBtn.label="快捷打造"}else{var c;n=(c=CommonUtil.getItemCfgById(v.instance.getItemIdByTypeStarPart(this._type,0,this.v.itemList.selectedIndex)))[8],this._composeCfg=null,this.v.composeBtn.label="获取途径",this.v.composeBtn.visible=!0,this.v.equipBtn.centerX=-150,this.v.costBox.visible=!1}this._btnEft1.pos(this.v.equipBtn.x-5,this.v.equipBtn.y-10,!0);for(var p=[],u=0;++u;){var d=2*(u-1),y=2*(u-1)+1,g=[];if(i&&i.length>d)g.push(i[d]),g.push(i[y]),n&&n.length>d?g.push(n[y]):g.push(0),p.push(g);else{if(!(n&&n.length>d))break;g.push(n[d]),g.push(0),g.push(n[y]),p.push(g)}}this.v.attrList.dataSource=p,this.v.attrBg.height=2<p.length?118:70,_.ShowEquipModel.instance.checkCanComposeByTypePart(this._type,this.v.itemList.selectedIndex+1)?m.thisPlay(this._btnEft2):m.thisStop(this._btnEft2)}},n.prototype.updateEquips=function(){var t=[null,null,null,null],e=_.ShowEquipModel.instance.equips[this._type]||[];for(var i in this._equipFight=0,e){t[e[i][0]-1]=e[i][1];var n=p.instance.getItemCfgById(e[i][1][0]);this._equipFight+=n[5]}var s=this.v.itemList.selectedIndex;this.v.itemList.selectedIndex=-1,this.v.itemList.dataSource=t,this.v.itemList.selectedIndex=s<0?0:s<t.length?s:0,this.updateMaster(),this.updateSkill(),this.v.powerNum.value=(this._equipFight+this._masterFight+this._skillFight).toString(),_.ShowEquipModel.instance.checkCanEquipByType(this._type)?m.thisPlay(this._btnEft1):m.thisStop(this._btnEft1)},n.prototype.updateMaster=function(){var t=_.ShowEquipModel.instance.masterLvs[this._type]||0,e=v.instance.getCfgByType(this._type)[5];this.v.masterName.text=e+"大师·"+t+"阶";var i=_.ShowEquipModel.instance.getMasterCondition(this._type);if(i[0]===i[1]?(this._scheEffect.y=-15,this.v.masterPer.text=0<i[1]?i[0]+"/"+i[1]:"4/4",this.v.masterRp.visible=0<i[0]):(this.v.masterPer.text=i[0]+"/"+i[1],this._scheEffect.y=100*(1-i[0]/i[1]),this.v.masterRp.visible=!1),0<t){var n=v.instance.getMasterCfgByTypeAndLv(this._type,t);this._masterFight=n?n[3]:0}else this._masterFight=0},n.prototype.updateSkill=function(){var t=_.ShowEquipModel.instance.getSkillInfo(this._type),e=0<t[0],i=e?t[0]:t[1],n=1e-4*i>>0,s=r.instance.getCfgById(n),o=l.instance.getCfgById(i);s&&s[6]&&(this.v.skill.iconImg.skin="assets/icon/skill/"+s[6]+".png"),this.v.skill.iconImg.gray=!e;var a=i%1e4;this.v.skill.levTxt.text=a.toString(),this.v.skill.levBox.visible=e,this._skillFight=e?o[3]:0,this.v.skill.dotImg.visible=!1,s&&s[1]?this.v.skillName.text=s[1]:this.v.skillName.text=""},i=n,_.ShowEquipBasePanel=i}(modules=modules||{}),function(p){!function(o){var i,t=p.core.BaseViewEx,n=p.common.SimpleList,l=p.config.ShowEquipCfg,e=p.bag.BagItem,s=(i=t,__extends(a,i),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._bagList=this.destroyElement(this._bagList),this._convertList=this.destroyElement(this._convertList),i.prototype.destroy.call(this,t)},a.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._bagList=n.create(h,100,135,1,5,20,0,10),this._bagList.size(600,this.v.box1.height),this._bagList.pos(this.v.box1.width-600>>1,0,!0),this.v.box1.addChild(this._bagList),this._convertList=n.create(h,100,135,2,1,50,0,10),this._convertList.size(420,this.v.box2.height),this._convertList.pos(this.v.box2.width-420>>1,0,!0),this.v.box2.addChild(this._convertList),this.v.tab_1.selected=!0,this.v.tab_1.mouseEnabled=!1;var t=l.instance.getCfgByType(this._type);this.v.titleTxt.text=t[1],this.v.selectedItem.nameVisible=!0,this.v.titleTxt1.text="点击选择想要转换的"+t[1];var e=t[5];this.v.titleTxt2.text="选择获取的"+e,CommonUtil.setHTMLPro(this.v.costTxt,"#4c5e8a","SimHei",24,"center")},a.prototype.updateList=function(){var t=this._bagList.selectedData?this._bagList.selectedData[0]:0,e=o.ShowEquipModel.instance.getBagEquipByType(this._type);if(e.sort(function(t,e){var i=t[0],n=e[0],s=(.001*i>>0)%10,o=(.001*n>>0)%10;return s!=o?o-s:i-n}),this._bagList.datas=e,this._bagList.datas&&this._bagList.datas.length){var i=0;for(var n in this._bagList.datas)if(this._bagList.datas[n][0]===t){i=parseInt(n);break}this._min=this._num=1,this._max=p.bag.BagModel.instance.getItemCountById(this._bagList.datas[i][0]),this._bagList.selectedIndex=i,this.v.noImg.visible=this.v.noTxt.visible=!1,this.v.convertBtn.visible=!0}else{this.v.selectedItem.dataSource=null,this._max=this._min=this._num=0,this.updateNum(),this.v.noImg.visible=this.v.noTxt.visible=!0;var s=l.instance.getCfgByType(this._type);this.v.noTxt.text="没有多余的"+s[1],this.v.convertBtn.visible=!1}},a.prototype.updateConvertList=function(){if(this._bagList.selectedItem){var t=this._bagList.selectedData[0],e=l.instance.getConvertCfgByItemId(t);if(e){this.v.cost_txt.visible=this.v.cost_img.visible=this.v.convertBtn.visible=!0;var i=e[3];this.v.cost_img.skin=CommonUtil.getIconById(i[0],!0),this.v.cost_txt.text=(i[1]*this._num).toString();var n=e[2],s=[];for(var o in n)n[o]!==t&&s.push([n[o],this._num,0,null]);var a=this._convertList.selectedIndex,r=this._convertList.selectedData?this._convertList.selectedData[0]:0;(this._convertList.datas=s)[a]&&s[a][0]===r?this._convertList.selectedIndex=a:this._convertList.selectedIndex=0}else this._convertList.datas=[],this.v.cost_txt.visible=this.v.cost_img.visible=this.v.convertBtn.visible=!1}else this._convertList.datas=[],this.v.cost_txt.visible=this.v.cost_img.visible=this.v.convertBtn.visible=!1},a.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._bagList.selectedIndex=-1,this._convertList.selectedIndex=-1,this.updateList()},a.prototype.close=function(){i.prototype.close.call(this),this._bagList.datas=[],this._convertList.datas=[]},a.prototype.onEvt=function(){var s=this;i.prototype.onEvt.call(this),this.onAutoClick(this.v.btn_up,this,this.updateNum,[1]).onAutoClick(this.v.btn_up_10,this,this.updateNum,[10]).onAutoClick(this.v.btn_down,this,this.updateNum,[-1]).onAutoClick(this.v.btn_down_10,this,this.updateNum,[-10]).onAutoClick(this.v.tab_0,this,function(){WindowManager.instance.open(l.instance.type2WinId[s._type][0])}).onAutoClick(this.v.convertBtn,this,function(){if(s._convertList.selectedItem&&s._bagList.selectedItem){var t=s._bagList.selectedData[0],e=l.instance.getConvertCfgByItemId(t);if(e){var i=e[3];if(CommonUtil.getPropCountById(i[0])<i[1])return void CommonUtil.goldNotEnoughAlert()}var n=o.ShowEquipModel.instance.getUidsByItemId(s._bagList.selectedData[0],s._num);o.ShowEquipCtrl.instance.ShowEquipChange(s._type,n,s._convertList.selectedData[0],s._num)}}).onAutoEvt(this._bagList,"select",this,function(){s._bagList.selectedItem?(s._min=s._num=1,s._max=p.bag.BagModel.instance.getItemCountById(s._bagList.selectedData[0]),s.v.selectedItem.dataSource=[s._bagList.selectedData[0],1,0,null],s.updateNum()):s.v.selectedItem.dataSource=null}).onAutoEvt(this.v.numInput,"input",this,function(){var t=parseInt(s.v.numInput.text)||0;s._num=t>s._max?s._max:t<s._min?s._min:t,s.v.numInput.text=s._num.toString(),s.updateConvertList()}).onAutoGlobalEvt("BAG_UPDATE",this,function(t){13===t&&s.updateList()}).onAutoClick(this.v.helpBtn,this,function(){CommonUtil.alertHelp(19049)})},a.prototype.updateNum=function(t){void 0===t&&(t=0),this._num+=t,this._num>this._max&&(this._num=this._max),this._num<this._min&&(this._num=this._min),this.v.numInput.text=this._num.toString(),this.updateConvertList()},a);function a(){return null!==i&&i.apply(this,arguments)||this}o.ShowEquipConvertBasePanel=s;var r,h=(r=e,__extends(c,r),c.prototype.initialize=function(){r.prototype.initialize.call(this),this.needTip=!1,this.selectEnable=!0},c.prototype.setDataSource=function(t){r.prototype.setDataSource.call(this,t),this._numTxt.visible=!0},c.prototype.setSelected=function(t){r.prototype.setSelected.call(this,t),this.frameImg.visible=t},c);function c(){return null!==r&&r.apply(this,arguments)||this}o.ShowEquipConvertItem=h}(p.showEquip||(p.showEquip={}))}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipConvertBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=3,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipFashion"])},n=s,e.ShowEquipFashionConvertPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=3,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipFashion"])},n=s,e.ShowEquipFashionPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipConvertBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=1,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipImmortal"])},n=s,e.ShowEquipImmortalConvertPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=1,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipImmortal"])},n=s,e.ShowEquipImmortalPanel=n}(modules=modules||{}),function(t){var a,e,o,r,l,h,i;function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._starArray=[],t}a=t.showEquip||(t.showEquip={}),o=Laya.Image,r=t.config.ShowEquipCfg,l=t.common.CustomClip,h=t.config.ItemEquipCfg,e=ui.ShowEquipItemUI,__extends(n,e),n.prototype.destroy=function(t){for(var e=0;e<this._starArray.length;++e)this._starArray[e]&&this._starArray[e].destroy(!0);this._starArray.length=0,this._starArray=null,this._clip&&(this._clip.destroy(!0),this._clip=null),this._tween&&(this._tween.stop(),this._tween=null)},n.prototype.setLevel=function(t,e){for(var i=(.001*t>>0)%10,n=this._starArray.length>i-1?this._starArray.length:i-1,s=0;s<n;s++)s<i-1?(e&&(this._starArray[s]||(this._starArray[s]=new o("common/zs_beibao_2.png"),this._starArray[s].x=36,this.addChild(this._starArray[s])),this._starArray[s].size(20,20),this._starArray[s].y=18*s),this._starArray[s]&&(this._starArray[s].visible=e)):this._starArray[s]&&(this._starArray[s].visible=!1)},n.prototype.updateView=function(t,e){var i=this.dataSource;if(i){var n=i[0],s=h.instance.getItemCfgById(n)[7];if(!this._clip){this._clip=l.create("assets/effect/show_equip/"+s+".atlas",""+s,8,!0);var o=r.instance.offsets[t]?r.instance.offsets[t][e]:0;this._clip.pos(this.icon.x-50,this.icon.y-50+o),this.addChild(this._clip),this._tween=TweenJS.create(this._clip).yoyo(!0).repeat(Number.POSITIVE_INFINITY).to({y:this.icon.y-40+o},1e3).start()}this._clip.play(),this._clip.gray=!1,this.nameTxt.text=CommonUtil.getNameByItemId(n),this.nameTxt.color=CommonUtil.getColorById(n),this.qualityImg.visible=!0,this.qualityImg.skin="show_equip/icon_quality_"+CommonUtil.getItemQualityById(n)+".png",this.setLevel(n,!0)}else n=r.instance.getItemIdByTypeStarPart(t,0,e),s=h.instance.getItemCfgById(n)[7],this._clip||(this._clip=l.create("assets/effect/show_equip/"+s+".atlas",""+s,8,!0),o=r.instance.offsets[t]?r.instance.offsets[t][e]:0,this._clip.pos(this.icon.x-50,this.icon.y-50+o),this.addChild(this._clip),this._tween=TweenJS.create(this._clip).yoyo(!0).repeat(Number.POSITIVE_INFINITY).to({y:this.icon.y-40+o},1e3).start()),this._clip.play(),this._clip.gray=!0,this.nameTxt.text=r.instance.getNameByTypeAndPart(t,e),this.nameTxt.color="#ffffff",this.qualityImg.visible=!1,this.setLevel(n,!1);this.rp.visible=a.ShowEquipModel.instance.checkCanComposeByTypePart(t,e+1)},i=n,a.ShowEquipItem=i}(modules=modules||{}),function(c){var t,l,o,h,n,e;function p(){this.masterLvs={},this.equips={}}t=c.showEquip||(c.showEquip={}),l=c.config.ShowEquipCfg,o=c.config.BlendCfg,h=c.bag.BagModel,n=c.funcOpen.FuncOpenModel,Object.defineProperty(p,"instance",{get:function(){return this._instance=this._instance||new p},enumerable:!0,configurable:!0}),p.prototype.IsShowNoticeTipsByType=function(t){var e=l.instance.getConditionByType(t);if(0===e.length||this.getTotalStarByType(e[0])>=e[1])return!1;var i=l.instance.getCfgByType(e[0])[1];return c.notice.SystemNoticeManager.instance.addNotice(i+"异宝总星级达到"+e[1]+"星开启",!0),!0},p.prototype.isShowEquipOpenByItemId=function(t){var e=l.instance.getTypeByItemId(t),i=l.instance.type2ActId[e];return n.instance.getFuncIsOpen(i)},p.prototype.isShowEquipOpen=function(t){var e=c.config.ShowEquipCfg.instance.actId2Type[t],i=c.config.ShowEquipCfg.instance.getConditionByType(e);return 0===i.length||!(this.getTotalStarByType(i[0])<i[1])},p.prototype.getShowEquipOpenTips=function(t){var e=l.instance.getConditionByType(l.instance.actId2Type[t]);return e&&e.length?l.instance.getCfgByType(e[0])[1]+"异宝总星级达到"+e[1]+"星开启":null},p.prototype.getTotalStarByType=function(t){var e=this.equips[t]||[],i=0;for(var n in e)e[n][1]&&e[n][1].length&&e[n][1][0]&&(i+=(.001*e[n][1][0]>>0)%10-1);return i},p.prototype.getEquipById=function(t){var e=c.config.ShowEquipCfg.instance.getTypeByItemId(t),i=(.1*t>>0)%10,n=this.equips[e]||[];for(var s in n)if(n[s]&&n[s][0]===i)return n[s][1];return null},p.prototype.getAutoEquipUids=function(t){var e={},i=this.equips[t]||[];for(var n in i)e[i[n][0]]=i[n][1];var s=c.config.ShowEquipCfg.instance.getEquipTypeByType(t),o=c.bag.BagModel.instance.getItemsByBagId(13);for(var n in o)if(1e-5*o[n][0]>>0===s){var a=(.1*o[n][0]>>0)%10,r=(.001*o[n][0]>>0)%10;e[a]?(.001*e[a][0]>>0)%10<r&&(e[a]=o[n]):e[a]=o[n]}for(var n in i)e[i[n][0]]&&e[i[n][0]][0]===i[n][1][0]&&delete e[i[n][0]];var l=[];for(var h in e)l.push(e[h][2]);return l},p.prototype.getMasterCondition=function(t){var e=this.masterLvs[t]||0,i=l.instance.getMasterCfgByTypeAndLv(t,e+1);if(i){var n=i[2],s=this.equips[t]||[],o=0;for(var a in s)n<=(.001*s[a][1][0]>>0)%10&&o++;return[o,4]}return[0,0]},p.prototype.getBagEquipByType=function(t){var e=l.instance.getEquipTypeByType(t),i=c.bag.BagModel.instance.getItemsByBagId(13)||[],n=[],s=[];for(var o in i)if(l.instance.getConvertCfgByItemId(i[o][0])&&1e-5*i[o][0]>>0===e){var a=n.indexOf(i[o][0]);-1===a?(n.push(i[o][0]),s.push(1)):s[a]++}var r=[];for(var o in n)r.push([n[o],s[o],0,null]);return r},p.prototype.getUidsByItemId=function(t,e){void 0===e&&(e=0);var i=c.bag.BagModel.instance.getItemsByBagId(13)||[],n=[];for(var s in i)if(i[s][0]===t&&(n.push(i[s][2]),n.length===e))break;return n},p.prototype.getSkillInfo=function(t){var e=GlobalData.getConfig("show_equip_skill"),i=0,n=0,s=0,o=0,a=0,r=0;for(var l in e)if(e[l][0]===t){var h=e[l][2],c=this.equips[t]||[],p=0;for(var u in c)h<=(.001*c[u][1][0]>>0)%10&&p++;if(p!==e[l][1]){n=e[l][3],r=h,s=p,o=e[l][1];break}i=e[l][3],a=h,s=o=p}return[i,n,s,o,a,r]},p.prototype.getComposeCfgByCostItemId=function(t){var e=GlobalData.getConfig("item_compose");for(var i in e){var n=e[i][5];for(var s in n)if(n[s][0]===t)return e[i]}return null},p.prototype.getPartNameByComposeClass=function(t,e){var i=[5,7,1,2,3,4][t-24];return l.instance.getCfgByType(i)[4][e-1]},p.prototype.getTipNameByItemId=function(t){var e=o.instance.getCfgById(94006)[2],i=(.001*t>>0)%10,n=(.1*t>>0)%10,s=l.instance.getCfgByType(l.instance.getTypeByItemId(t))[4];return e[i-1]+"品"+s[n-1]},p.prototype.getEquipByTypePart=function(t,e){var i=this.equips[t]||[];for(var n in i)if(i[n]&&i[n][0]===e)return i[n][1];return null},p.prototype.checkCanEquipByType=function(t){var e=c.bag.BagModel.instance.getItemsByBagId(13)||[];for(var i in e){var n=1e-5*e[i][0]>>0,s=(.1*e[i][0]>>0)%10;if(n===l.instance.getEquipTypeByType(t)){var o=this.getEquipByTypePart(t,s);if((o?(.001*o[0]>>0)%10:0)<(.001*e[i][0]>>0)%10)return!0}}return!1},p.prototype.checkCanEquipByTypePart=function(t,e){var i=this.getEquipByTypePart(t,e),n=i?(.001*i[0]>>0)%10:0,s=c.bag.BagModel.instance.getItemsByBagId(13)||[];for(var o in s){var a=1e-5*s[o][0]>>0,r=(.1*s[o][0]>>0)%10;if(a===l.instance.getEquipTypeByType(t)&&r===e&&n<(.001*s[o][0]>>0)%10)return!0}return!1},p.prototype.checkCanComposeByType=function(t){var e=this.equips[t]||[];for(var i in e){var n=e[i][1][0],s=p.instance.getComposeCfgByCostItemId(n);if(s){var o=!0,a=s[5];for(var r in a)h.instance.getItemCountById(a[r][0])<a[r][1]-1&&(o=!1);for(var r in a=s[6])h.instance.getItemCountById(a[r][0])<a[r][1]&&(o=!1);if(o)return!0}}return!1},p.prototype.checkCanComposeByTypePart=function(t,e){var i=this.equips[t]||[];for(var n in i)if(i[n]&&i[n][0]===e){var s=i[n][1][0],o=p.instance.getComposeCfgByCostItemId(s);if(o){var a=o[5];for(var r in a)if(h.instance.getItemCountById(a[r][0])<a[r][1]-1)return!1;for(var r in a=o[6])if(h.instance.getItemCountById(a[r][0])<a[r][1])return!1;return!0}}return!1},p.prototype.checkCanMasterUpByType=function(t){var e=this.getMasterCondition(t);return e[0]==e[1]&&0<e[0]},p.prototype.checkRP=function(){var t;t=this.checkCanEquipByType(7)||this.checkCanComposeByType(7)||this.checkCanMasterUpByType(7),c.redPoint.RedPointCtrl.instance.setRPProperty("showEquipPet",t),t=this.checkCanEquipByType(5)||this.checkCanComposeByType(5)||this.checkCanMasterUpByType(5),c.redPoint.RedPointCtrl.instance.setRPProperty("showEquipRide",t),t=this.checkCanEquipByType(1)||this.checkCanComposeByType(1)||this.checkCanMasterUpByType(1),c.redPoint.RedPointCtrl.instance.setRPProperty("showEquipImmortal",t),t=this.checkCanEquipByType(2)||this.checkCanComposeByType(2)||this.checkCanMasterUpByType(2),c.redPoint.RedPointCtrl.instance.setRPProperty("showEquipWing",t),t=this.checkCanEquipByType(3)||this.checkCanComposeByType(3)||this.checkCanMasterUpByType(3),c.redPoint.RedPointCtrl.instance.setRPProperty("showEquipFashion",t),t=this.checkCanEquipByType(4)||this.checkCanComposeByType(4)||this.checkCanMasterUpByType(4),c.redPoint.RedPointCtrl.instance.setRPProperty("showEquipPearl",t)},p.prototype.isShowEquip=function(t){var e=1e-5*t>>0;return 817<=e&&e<=822},e=p,t.ShowEquipModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipConvertBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=4,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipPearl"])},n=s,e.ShowEquipPearlConvertPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=4,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipPearl"])},n=s,e.ShowEquipPearlPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipConvertBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=7,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipPet"])},n=s,e.ShowEquipPetConvertPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=7,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipPet"])},n=s,e.ShowEquipPetPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipConvertBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=5,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipRide"])},n=s,e.ShowEquipRideConvertPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=5,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipRide"])},n=s,e.ShowEquipRidePanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipConvertBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=2,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipWing"])},n=s,e.ShowEquipWingConvertPanel=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.showEquip||(t.showEquip={}),i=e.ShowEquipBasePanel,__extends(s,i),s.prototype.initialize=function(){this._type=2,i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.v.rp_equip,["showEquipWing"])},n=s,e.ShowEquipWingPanel=n}(modules=modules||{}),function(t){var e,o,i,n,s;function a(){return o.call(this)||this}e=t.sign||(t.sign={}),i=t.common.CustomClip,n=t.bag.BagUtil,o=ui.SignAwardItemUI,__extends(a,o),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._addSignClip=this.destroyElement(this._addSignClip),o.prototype.destroy.call(this,t)},a.prototype.initialize=function(){o.prototype.initialize.call(this),this._addSignClip=new i,this.addChildAt(this._addSignClip,this.getChildIndex(this.icon)),this._addSignClip.pos(-75,-75,!0),this._addSignClip.skin="assets/effect/state.atlas",this._addSignClip.frameUrls=["state/0.png","state/1.png","state/2.png","state/3.png","state/4.png","state/5.png","state/6.png","state/7.png"],this._addSignClip.durationFrame=5,this._addSignClip.play(),this._addSignClip.visible=!1},a.prototype.setData=function(t){o.prototype.setData.call(this,t);var e=t[0],i=e[3][0],n=i[0],s=i[1];switch(this.state=t[1],this._index=t[2],this.count.text=s.toString(),this.icon.skin=CommonUtil.getIconById(n),this.dayNum.text=e[0]+"天",this._itemData=[n,0,0,null],this.state){case 0:this.signImg.visible=!1,this.fullImg.visible=!1,this._addSignClip.visible=!1;break;case 1:this.signImg.visible=!1,this.fullImg.visible=!0,this._addSignClip.visible=!0;break;case 2:this._addSignClip.visible=!1,this.signImg.visible=!0,this.fullImg.visible=!0}},a.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this,this,this.addSignHandler)},a.prototype.addSignHandler=function(){1!=this.state?n.openBagItemTip(this._itemData):Channel.instance.publish(2097954,[this._index])},a.prototype.onOpened=function(){o.prototype.onOpened.call(this),this._addSignClip.play()},a.prototype.close=function(){o.prototype.close.call(this),this._addSignClip.stop()},s=a,e.SignAwardItem=s}(modules=modules||{}),function(t){var e,o,a,i;function r(){}e=t.sign||(t.sign={}),o=t.redPoint.RedPointCtrl,a=t.config.SignRewardCfg,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),r.prototype.getSign=function(t){this.dayNumber=t[3],this.signCount=t[0],this.signBool=t[2],this.addCount=t[1],this.eraLevel=t[4],this.setDotDic()},r.prototype.setDotDic=function(){var t,e;t=a.instance.getCfgByReward(this.eraLevel);for(var i=0;i<5;i++){var n=t[i][0];this.signCount>=n&&(i+1>this.addCount.length||0==this.addCount.length)&&(e=1)}var s=r.instance.signCount;this._redDot=1==r.instance.signBool||0==s||1==e,o.instance.setRPProperty("signRP",this._redDot)},i=r,e.SignModel=i}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){this._collectId=[],this._drawIndex=0}e=t.single_dog_collection||(t.single_dog_collection={}),i=t.redPoint.RedPointCtrl,n=t.funcOpen.FuncOpenModel,s=t.config.FestivalOpenCfg,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.endTime=function(t){if(this._endTime=0,t){var e=s.instance.getCfgByType(t);this._endTime=e[2][1]}return this._endTime},a.prototype.pushData=function(t){t&&(this._collectionTask=t,this._drawIndex=t[0],this._collectId=t[1],this.setRP(),GlobalData.dispatcher.event("SUSANSLADE_UPDATA_VIEW"))},Object.defineProperty(a.prototype,"drawIndex",{get:function(){return this._drawIndex},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"collectId",{get:function(){return this._collectId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"collectionTask",{get:function(){return this._collectionTask},enumerable:!0,configurable:!0}),a.prototype.getState=function(){for(var t=this._collectId.length,e=0,i=0,n=0;n<t;n++){var s=this._collectId[n][3];2==s?e++:3==s&&i++}return 0<e?1:i==t&&0<i?2:0},a.prototype.getProgress=function(){for(var t=this._collectId.length,e=0,i=0;i<t;i++){var n=this._collectId[i][3];2==n?e++:3==n&&e++}return e},a.prototype.getReicveCount=function(){for(var t=this._collectId.length,e=0,i=0;i<t;i++)3==this._collectId[i][3]&&e++;return e},a.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(1021);i.instance.setRPProperty("christmas2020Party5RP",1==this.getState()&&t)},o=a,e.SingleDogCollectionModel=o}(modules=modules||{}),function(e){var i,n,s,o,t;function a(){return n.call(this)||this}i=e.single_dog_continuous_pay||(e.single_dog_continuous_pay={}),s=e.config.FestivalPayConCfg,o=e.bag.BagUtil,n=e.soaring_singlePay.PayAndAwardsItem,__extends(a,n),a.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},a.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.SingleDogContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},a.prototype.showUI=function(){var t=this._datas[2],e=(this._datas[3],this._datas[4]);this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},a.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2],i="("+t+"/"+e+")";this.scheduleText.text=i,this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},a.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(4)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},t=a,i.SingleDogContinuousPayItem=t}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.single_dog_continuous_pay||(a.single_dog_continuous_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("singleDog1RP",!1);var t=a.festival.FestivalModel.instance.info[4];if(a.festival.FestivalModel.instance.getHuoDongType(4)&&t){var e=t[13];if(e){this._restTm=t[2],this._moneyAcc=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(323),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(4);r.instance.setRPProperty("singleDog1RP",t&&e&&i)},e=i,t.SingleDogContinuousPayModel=e}(modules=modules||{}),function(e){var n,i,s,o,t;function a(){return i.call(this)||this}n=e.single_dog_cumulate_pay||(e.single_dog_cumulate_pay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,i=e.soaring_singlePay.PayAndAwardsItem,__extends(a,i),a.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},a.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&n.SingleDogCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},a.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},a.prototype.showScheduleText=function(){var t=n.SingleDogCumulatePayModel.instance.accumulate,e=this._datas[1],i="("+t+"/"+e+")";this.scheduleText.text=i,this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},a.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(4)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},t=a,n.SingleDogCumulatePayItem=t}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.single_dog_cumulate_pay||(a.single_dog_cumulate_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("singleDog2RP",!1);var t=a.festival.FestivalModel.instance.info[4];if(a.festival.FestivalModel.instance.getHuoDongType(4)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(324),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(4);r.instance.setRPProperty("singleDog2RP",t&&e&&i)},e=i,t.SingleDogCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),n=s,e.SingleDogFestConLoginItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.ConvertItem1,__extends(s,i),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"DOG_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return 7},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintArr",{get:function(){return t.festival.FestivalModel.instance.hintArr1},enumerable:!0,configurable:!0}),n=s,e.SingleDogFestConvertItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_festival||(t.single_dog_festival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return 4},enumerable:!0,configurable:!0}),n=s,e.SingleDogFestDailyRewardItem=n}(modules=modules||{}),function(e){var t,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}t=e.single_dog_good_man||(e.single_dog_good_man={}),i=ui.SingleDogHalfItemUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.giveBtn,this,this.giveBtnHandler)},s.prototype.giveBtnHandler=function(){e.single_dog_good_man.SingleDogGoodManModel.instance.openAlert(this._id,this._festivalType)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._festivalType=t[0],this._id=t[1][0],this.nameText.text=""+t[1][2],this.giveBtn.text="赠送"+e.single_dog_sart.SingleDogSartModel.instance.getName(this._festivalType))},n=s,t.SingleDogGoodManHalfItem=n}(modules=modules||{}),function(s){var t,e,o,i;function n(){var t=e.call(this)||this;return t._type=1,t}t=s.single_dog_good_man||(s.single_dog_good_man={}),o=s.common.CommonUtil,e=ui.PayRewardMyRecordItemUI,__extends(n,e),n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._date=t[1],this._type=t[0],this._festivalType=t[2],this.showUI()},n.prototype.showUI=function(){if(this._date){var t="";if(1==this._type){var e=this._date[1],i=this._date[0],n=s.common.CommonUtil.getNameByItemId(s.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this._festivalType));t="您赠送给",t+="<span style='color:#0D79FF;'>"+i+"</span>",t+="<span style='color:"+o.getColorById(s.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this._festivalType))+";'>"+n+"*"+e+"</span>"}else 2==this._type&&(e=this._date[1],i=this._date[0],n=s.common.CommonUtil.getNameByItemId(s.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this._festivalType)),t="您收到",t+="<span style='color:#0D79FF;'>"+i+"</span>",t+="赠送的",t+="<span style='color:"+o.getColorById(s.single_dog_sart.SingleDogSartModel.instance.getNowItemId(this._festivalType))+";'>"+n+"*"+e+"</span>");o.setHTMLPro(this.recordHtml,"#4c5e8a","SimHei",26),this.recordHtml.innerHTML=t}},i=n,t.SingleDogGoodManJiLuItem=i}(modules=modules||{}),function(i){var a,n,s,t;function e(){return n.call(this)||this}a=i.single_dog_sart||(i.single_dog_sart={}),s=i.config.GoodRankSingleCfg,n=ui.SingleDogSartItemUI,__extends(e,n),e.prototype.initialize=function(){n.prototype.initialize.call(this),this.shouHuPlayer=[this.item2,this.item3],this.shouHuPlayerText=[this.zanWuText1,this.zanWuText2],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22)},e.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI)},e.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showUI()},e.prototype.setData=function(t){n.prototype.setData.call(this,t),this.mingCiImg.visible=this.mingCIclip.visible=1<=t&&t<=3,this.rankText.visible=4<=t,this.rankText.text="第 "+t+" 名",this.mingCIclip.value=""+t,this._mingCi=t,this._dates=s.instance.getCfgsByGrade(4,i.festival.FestivalModel.instance.getCrossOpenServerDay(4),this._mingCi);var e=this._dates[3];this.StatementHTML.innerHTML="收到"+i.single_dog_sart.SingleDogSartModel.instance.getName(4)+"达<span style='color:#168a17'>"+e+"</span>可上榜"},e.prototype.showUI=function(){if(this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!1,this._theGoodRanker=a.SingleDogSartModel.instance.getTableByRank(4,this._mingCi),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.item1.data=t,this.item1.visible=!0,this.item1.giveBtn.visible=!0;for(var i=0;i<2;i++){var n=e[i],s=this.shouHuPlayer[i],o=this.shouHuPlayerText[i];n?(s.visible=!0,o.visible=!1,s.data=n):(o.visible=!0,s.visible=!1)}}else this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!0},t=e,a.SingleDogSartItem=t}(modules=modules||{}),function(t){var e,a,i;function n(){return null!==a&&a.apply(this,arguments)||this}e=t.single_dog_sart||(t.single_dog_sart={}),a=ui.SingleDogSartItem3UI,__extends(n,a),n.prototype.setData=function(t){if(a.prototype.setData.call(this,t),t){var e=t[2],i=t[3],n=t[4],s=t[5],o=t[1];this.headIcon.setInfo(i,o,n),this.nameText.text=""+e,this.numText.text="赠送:"+s}},i=n,e.SingleDogSartItem3=i}(modules=modules||{}),function(i){var t,e;function n(){this._rankersTableByRank={},this._rankersTableByRoleId={},this._getGoodRankReplyTable={},this._idTable={},this._idTable[4]=13250046,this._idTable[9]=15050010,this._idTable[24]=15050010,this._idTable[28]=15050010,this._idTable[32]=15050010,this._idTable[38]=15050010,this._idTable[44]=15050067,this._idTable[48]=15050010,this._idTable[52]=15050081,this._idTable[11]=15050013,this._idTable[14]=15050014,this._idTable[17]=15050020,this._idTable[21]=15050027,this._idTable[22]=15050031,this._idTable[25]=15050035,this._idTable[26]=15050036,this._idTable[29]=15050038,this._idTable[30]=15050040,this._idTable[33]=15050043,this._idTable[12]=15050046,this._idTable[34]=15050047,this._idTable[36]=15050050,this._idTable[37]=15050053,this._idTable[40]=15050056,this._idTable[41]=15050059,this._idTable[42]=15050063,this._idTable[45]=15050068,this._idTable[46]=15050072,this._idTable[49]=15050074,this._idTable[51]=15050079,this._idTable[54]=15050083,this._idTable[55]=15050087,this._idTable[56]=15050089,this._idTable[58]=15050092,this._idTable[59]=15050094,this._idTable[61]=15050095,this._idTable[64]=15050100,this._idTable[65]=15050102,this._idTable[67]=15050105}t=i.single_dog_sart||(i.single_dog_sart={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype._maxRank=function(t){var e=i.config.GoodBlendCfg.instance.getCfgsByType(t);return this.maxRank=e?e[1][0]:0,this.maxRank=this.maxRank?this.maxRank:50,this.maxRank},n.prototype.getNowItemId=function(t){return this._idTable[t]},n.prototype.getName=function(t){return CommonUtil.getNameByItemId(this.getNowItemId(t))},n.prototype.uodateInfo=function(t){if(t){var e=t[0],i=t[5];this._rankersTableByRank[i]||(this._rankersTableByRank[i]={}),this._rankersTableByRoleId[i]||(this._rankersTableByRank[i]={}),this._rankersTableByRank[i]={},this._rankersTableByRoleId[i]={},this._getGoodRankReplyTable[i]=t;for(var n=0;n<e.length;n++){var s=e[n];if(s){var o=s[0];if(o){var a=o[6],r=o[0];this._rankersTableByRoleId[i][r]=s,this._rankersTableByRank[i][a]=s}}}GlobalData.dispatcher.event("DOG_FESTIVAL_SART_UPDATE")}},n.prototype.getEndTime=function(t){var e=this._getGoodRankReplyTable[t];return e?e[2]:0},n.prototype.getIndex=function(t){var e=this._getGoodRankReplyTable[t];return e?e[3]:0},n.prototype.getScore=function(t){var e=this._getGoodRankReplyTable[t];return e?e[4]:0},n.prototype.getTableByRank=function(t,e){var i=this._rankersTableByRank[t];return i?i[e]:null},n.prototype.getTableByRoleId=function(t,e){var i=this._rankersTableByRoleId[t];return i?i[e]:null},e=n,t.SingleDogSartModel=e}(modules=modules||{}),function(a){var t,r,l,e;function h(){this._rankersTableByRank={},this._tasksTableById={},this._rankersTableById={},this._beginTime={},this._score={},this._endTime={},this._typeIndex={}}t=a.single_dog_score_rank||(a.single_dog_score_rank={}),r=a.redPoint.RedPointCtrl,l=a.funcOpen.FuncOpenModel,Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),h.prototype.getTableByRank=function(t,e){var i=this._rankersTableByRank[t];return i?i[e]:null},h.prototype.getTableById=function(t,e){var i=this._rankersTableById[t];return i?i[e]:null},h.prototype.getTasksTableById=function(t,e){var i=this._tasksTableById[t];return i?i[e]:null},h.prototype.getBeginTime=function(t){var e=this._beginTime[t];return e||0},h.prototype.getEndTime=function(t){var e=this._endTime[t];return e||0},h.prototype.getTypeIndex=function(t){var e=this._typeIndex[t];return e||0},h.prototype.getScore=function(t){var e=this._score[t];return e||0},h.prototype._maxRank=function(t){var e=a.config.GoodBlendCfg.instance.getCfgsByType(t);return this.maxRank=e?e[1][0]:0,this.maxRank=this.maxRank?this.maxRank:50,this.maxRank},h.prototype.uodateInfo=function(t){if(t){var e=t[5];this._rankersTableByRank[e]={},this._rankersTableById[e]={};for(var i=t[0],n=0;n<i.length;n++){var s=i[n];if(s){var o=s[6],a=s[0];this._rankersTableByRank[e][o]=s,this._rankersTableById[e][a]=s}}this._beginTime[e]=t[1],this._endTime[e]=t[2],this._typeIndex[e]=t[3],h.instance.setAllRP(),GlobalData.dispatcher.event("DOG_FESTIVAL_SCORE_RANK_UPDATE")}},h.prototype.uodateInfo1=function(t){var e=t[5];if(t){this._tasksTableById[e]={};for(var i=t[3],n=0;n<i.length;n++){var s=i[n];if(s){var o=s[0];this._tasksTableById[e][o]=s}}this._score[e]=t[2],this._beginTime[e]=t[0],this._endTime[e]=t[1],this._typeIndex[e]=t[4],h.instance.setAllRP(),GlobalData.dispatcher.event("DOG_FESTIVAL_RENWU_UPDATE")}},h.prototype.getLastTasKState=function(t){var e=null,i=null,n=this._tasksTableById[t];if(n)for(var s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o){var a=o[3];if(1===a)e=e||o;else{if(2===a)return o;3===a&&(i=o)}}}return e||i||null},h.prototype.setAllRP=function(){h.instance.setRP(),h.instance.setRP1(),h.instance.setRP11(),h.instance.setRP12(),h.instance.setRP13(),h.instance.setRP14(),h.instance.setRP15(),h.instance.setRP16()},h.prototype.setRP=function(){var t=l.instance.getFuncIsOpen(340),e=a.festival.FestivalModel.instance.getHuoDongType(4),i=!1,n=0<CommonUtil.getPropCountById(a.single_dog_sart.SingleDogSartModel.instance.getNowItemId(4)),s=h.instance.getEndTime(4)>=GlobalData.serverTime,o=h.instance.getLastTasKState(4);o&&(i=2===o[3]),r.instance.setRPProperty("singleParty4RP",t&&(i||n)&&s&&e)},h.prototype.setRP1=function(){var t=l.instance.getFuncIsOpen(399),e=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.zhiZhenType),i=!1,n=0<CommonUtil.getPropCountById(a.single_dog_sart.SingleDogSartModel.instance.getNowItemId(a.festival.FestivalModel.instance.zhiZhenType)),s=this._endTime[a.festival.FestivalModel.instance.zhiZhenType]>=GlobalData.serverTime,o=this.getLastTasKState(a.festival.FestivalModel.instance.zhiZhenType);o&&(i=2===o[3]),r.instance.setRPProperty("zhiZhenParty4RP",t&&(i||n)&&s&&e)},h.prototype.setRP11=function(){var t=l.instance.getFuncIsOpen(799),e=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.ChildrensDayType),i=!1,n=0<CommonUtil.getPropCountById(a.single_dog_sart.SingleDogSartModel.instance.getNowItemId(a.festival.FestivalModel.instance.ChildrensDayType)),s=this._endTime[a.festival.FestivalModel.instance.ChildrensDayType]>=GlobalData.serverTime,o=this.getLastTasKState(a.festival.FestivalModel.instance.ChildrensDayType);o&&(i=2===o[3]),r.instance.setRPProperty("childrensDayParty4RP",t&&(i||n)&&s&&e)},h.prototype.setRP12=function(){var t=l.instance.getFuncIsOpen(812),e=a.festival.FestivalModel.instance.getHuoDongType(12),i=!1,n=0<CommonUtil.getPropCountById(a.single_dog_sart.SingleDogSartModel.instance.getNowItemId(12)),s=this._endTime[12]>=GlobalData.serverTime,o=this.getLastTasKState(12);o&&(i=2===o[3]),r.instance.setRPProperty("heQuParty4RP",t&&(i||n)&&s&&e)},h.prototype.setRP13=function(){var t=l.instance.getFuncIsOpen(834),e=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.BarDayType),i=!1,n=0<CommonUtil.getPropCountById(a.single_dog_sart.SingleDogSartModel.instance.getNowItemId(a.festival.FestivalModel.instance.BarDayType)),s=this._endTime[a.festival.FestivalModel.instance.BarDayType]>=GlobalData.serverTime,o=this.getLastTasKState(a.festival.FestivalModel.instance.BarDayType);o&&(i=2===o[3]),r.instance.setRPProperty("barDayParty4RP",t&&(i||n)&&s&&e)},h.prototype.setRP14=function(){var t=l.instance.getFuncIsOpen(873),e=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.AnniversaryDayType),i=!1,n=0<CommonUtil.getPropCountById(a.single_dog_sart.SingleDogSartModel.instance.getNowItemId(a.festival.FestivalModel.instance.AnniversaryDayType)),s=this._endTime[a.festival.FestivalModel.instance.AnniversaryDayType]>=GlobalData.serverTime,o=this.getLastTasKState(a.festival.FestivalModel.instance.AnniversaryDayType);o&&(i=2===o[3]),r.instance.setRPProperty("anniversaryDayParty4RP",t&&(i||n)&&s&&e)},h.prototype.setRP15=function(){var t=l.instance.getFuncIsOpen(961),e=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.PerfectestTenType),i=!1,n=0<CommonUtil.getPropCountById(a.single_dog_sart.SingleDogSartModel.instance.getNowItemId(a.festival.FestivalModel.instance.PerfectestTenType)),s=this._endTime[a.festival.FestivalModel.instance.PerfectestTenType]>=GlobalData.serverTime,o=this.getLastTasKState(a.festival.FestivalModel.instance.PerfectestTenType);o&&(i=2===o[3]),r.instance.setRPProperty("perfectestTenParty4RP",t&&(i||n)&&s&&e)},h.prototype.setRP16=function(){var t=l.instance.getFuncIsOpen(1049),e=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.SpringSceneryType),i=!1,n=0<CommonUtil.getPropCountById(a.single_dog_sart.SingleDogSartModel.instance.getNowItemId(a.festival.FestivalModel.instance.SpringSceneryType)),s=this._endTime[a.festival.FestivalModel.instance.SpringSceneryType]>=GlobalData.serverTime,o=this.getLastTasKState(a.festival.FestivalModel.instance.SpringSceneryType);o&&(i=2===o[3]),r.instance.setRPProperty("springSceneryParty4RP",t&&(i||n)&&s&&e)},e=h,t.SingleDogScoreRankModel=e}(modules=modules||{}),function(i){var n,s,o,a,t,e;function r(){var t=null!==s&&s.apply(this,arguments)||this;return t._type=4,t}n=i.single_dog_seven_days_consume||(i.single_dog_seven_days_consume={}),o=i.config.festivalCostTotalCfg,a=i.bag.BagUtil,t=i.soaring_singlePay.PayAndAwardsItem,s=t,__extends(r,s),r.prototype.setData=function(t){if(s.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText1.visible=!0,this.scheduleText.visible=!1,this.scheduleText1.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},r.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:i.notice.SystemNoticeManager.instance.addNotice("消耗"+o.instance.getStrByType(this._type)+"数量不足",!0);break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),a.canAddItemsByBagIdCount(t)&&n.SingleDogSevenDaysConsumeCtrl.instance.DrawFestCostTotal(this._datas[0]))}},r.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计消费<span style='color:#b15315'>"+t+o.instance.getStrByType(this._type)+"</span>可领取",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},r.prototype.setBtnSure=function(){var t;i.festival.FestivalModel.instance.getHuoDongType(this._type)?0==(t=this._value[1])?(this.showCanReceive(),this.sureBtn.label="领取",this._btnClip.stop(),this._btnClip.visible=!1):1==t?this.showCanReceive():this.showReceived():this.showOver()},r.prototype.showScheduleText=function(){var t=n.SingleDogSevenDaysConsumeModel.instance.gold,e=this._datas[2];this.scheduleText1.text="("+t+"/"+e+")",this.scheduleText1.color=e<=t?"#16ba17":"#FF3e3e"},e=r,n.SingleDogSevenDaysConsumeItem=e}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._gold=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.single_dog_seven_days_consume||(r.single_dog_seven_days_consume={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gold",{get:function(){return this._gold},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[4],e=r.festival.FestivalModel.instance.getHuoDongType(4);if(l.instance.setRPProperty("singleDog4RP",!1),e&&t){var i=t[15];if(i){this._restTm=t[2],this._gold=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(325),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(4);l.instance.setRPProperty("singleDog4RP",t&&e&&i)},e=i,t.SingleDogSevenDaysConsumeModel=e}(modules=modules||{}),function(e){var n,i,s,o,t;function a(){return i.call(this)||this}n=e.single_dog_seven_days_pay||(e.single_dog_seven_days_pay={}),s=e.config.FestivalPayTotalCfg,o=e.bag.BagUtil,i=e.soaring_singlePay.PayAndAwardsItem,__extends(a,i),a.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},a.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&n.SingleDogSevenDaysPayCtrl.instance.DrawFestPayTotal(this._datas[0]))}},a.prototype.showUI=function(){var t=this._datas[2];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},a.prototype.showScheduleText=function(){var t=n.SingleDogSevenDaysPayModel.instance.money,e=this._datas[2],i="("+t+"/"+e+")";this.scheduleText.text=i,this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},a.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(4)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},t=a,n.SingleDogSevenDaysPayItem=t}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.single_dog_seven_days_pay||(a.single_dog_seven_days_pay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("singleDog5RP",!1);var t=a.festival.FestivalModel.instance.info[4];if(a.festival.FestivalModel.instance.getHuoDongType(4)&&t){var e=t[14];if(e){this._restTm=t[2],this._money=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayTotalCfg.instance.getCfgsById(o)[5]<=this._money&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(326),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(4);r.instance.setRPProperty("singleDog5RP",t&&e&&i)},e=i,t.SingleDogSevenDaysPayModel=e}(modules=modules||{}),function(n){var s,i,o,a,r,t;function e(){return i.call(this)||this}s=n.single_dog_single_pay||(n.single_dog_single_pay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,i=n.soaring_singlePay.PayAndAwardsItem,__extends(e,i),e.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},e.prototype.sureBtnHandler=function(){var t;if(t=this._value[1],Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111),this.close();else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.SingleDogSinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},e.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},e.prototype.showScheduleText=function(){var t;t=this._value[1];var e=Math.round(t%1e3),i=this._datas[0];0==s.SingleDogSinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},e.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(4)){var t;t=this._value[1];var e=this._datas[0],i=s.SingleDogSinglePayModel.instance.getState(t,e);0==i?this.showGotoRecharge():1==i?this.showCanReceive():this.showReceived()}else this.showOver()},t=e,s.SingleDogSinglePayItem=t}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.single_dog_single_pay||(a.single_dog_single_pay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("singleDog6RP",!1);var t=a.festival.FestivalModel.instance.info[4];if(a.festival.FestivalModel.instance.getHuoDongType(4)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(327),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(4);l.instance.setRPProperty("singleDog6RP",t&&e&&i)},e=i,t.SingleDogSinglePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_store||(t.single_dog_store={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.SingleDogStoreModel.instance.rewardListById,this.types=4,i.prototype.showUI.call(this)},n=s,e.SingleDogStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.single_dog_store||(a.single_dog_store={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[4];if(a.festival.FestivalModel.instance.getHuoDongType(4)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("双十一 商城 数据：",this.rewardList)}}},e=i,t.SingleDogStoreModel=e}(modules=modules||{}),function(a){var t,i,e,n,s;function r(){this.oneNum=0,this.twoNum=0,this.threeNum=0,this.id=0,this._xunBaoType=0,this._restTm=0,this._score=0,this._state=1,this.dontShowTreasure=!1,this.festivalType=4,this._myXunbaoNote=new Array,this._myNodeList=new Array,this._myNodeListByObjId=new Array,this._rewardList=new Array,this._xunBaoType=100+this.festivalType,this.getBlendCfgShuJu()}t=a.single_dog_treasure||(a.single_dog_treasure={}),i=a.redPoint.RedPointCtrl,e=a.config.TreasureCfg,n=a.funcOpen.FuncOpenModel,Object.defineProperty(r,"instance",{get:function(){return this._instance=this._instance||new r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xunBaoType",{get:function(){return this._xunBaoType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"xianyu",{get:function(){return a.bag.BagModel.instance.getItemCountById(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),r.prototype.callBakFunction=function(t){a.single_dog_treasure.SingleDogTreasureModel.instance._restTm<GlobalData.serverTime?r.instance.dontShowTreasure?t():WindowManager.instance.open(560,t):t()},r.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[r.instance.festivalType];if(a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType)&&t){var e=t[16];if(e){var i=e[0];if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s){var o=r.instance._myXunbaoNote.length;o=0<o?o:0,r.instance._myXunbaoNote[o]=s}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MY")}}},r.prototype.getSelfBroadcast=function(){var t=this._myXunbaoNote;return t&&100<t.length&&t.splice(0,t.length-100),t=t||[]},r.prototype.setRewardList=function(t){t&&(this._rewardList=t),this.setRP(),GlobalData.dispatcher.event("NATIONALDAY_TREASURE_UPDATE")},r.prototype.getInfoMyNodeList=function(t){if(t){this._myNodeList.length=0,this._myNodeListByObjId.length=0,this._myNodeList=new Array,this._myNodeListByObjId=new Array;for(var e=0;e<t.length;e++){var i=t[e],n=i[0];if(n){var s=n[0],o=n[2];this._myNodeList[o]=i,this._myNodeListByObjId[s]=i}}GlobalData.dispatcher.event("NATIONALDAY_TREASURE_MYLIST")}},r.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(328),e=a.festival.FestivalModel.instance.getHuoDongType(r.instance.festivalType);i.instance.setRPProperty("singleDog7RP",e&&t&&this.getgRadeRP())},r.prototype.getgRadeRP=function(){if(0<this.xianyu)return!0;if(this.rewardList)for(var t=0;t<this.rewardList.length;t++){var e=this.rewardList[t];if(e&&1==e[1])return!0}return!1},r.prototype.getRewardStart=function(t){if(this.rewardList){var e=this._rewardList[t];return e?e[1]:0}},r.prototype.getgRade=function(){for(var t=null,e=null,i=0;i<this.rewardList.length;i++){var n=this.rewardList[i];if(n){var s=n[1];if(1==s)return[i,s];2==s?t=[i,s]:e=e||[i,s]}}return e||t||[0,0]},r.prototype.getBlendCfgShuJu=function(){this.oneNum=e.instance.getItemConditionByGrad(this.xunBaoType,0)[1],this.twoNum=e.instance.getItemConditionByGrad(this.xunBaoType,1)[1],this.threeNum=e.instance.getItemConditionByGrad(this.xunBaoType,2)[1];var t=e.instance.getItemConditionByGrad(this.xunBaoType,0);this.id=t[0]},s=r,t.SingleDogTreasureModel=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_treasure||(t.single_dog_treasure={}),i=t.festival.TreasureRankAwardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.SingleDogTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"myNodeList",{get:function(){return e.SingleDogTreasureModel.instance._myNodeList},enumerable:!0,configurable:!0}),n=s,e.SingleDogTreasureRankAwardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.single_dog_treasure||(t.single_dog_treasure={}),i=t.festival.TreasureRankBaseItem,__extends(s,i),s.prototype.getRewardStart=function(t){return e.SingleDogTreasureModel.instance.getRewardStart(t)},Object.defineProperty(s.prototype,"festivalType",{get:function(){return e.SingleDogTreasureModel.instance.festivalType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"score",{get:function(){return e.SingleDogTreasureModel.instance._score},enumerable:!0,configurable:!0}),n=s,e.SingleDogTreasureRankItem=n}(modules=modules||{}),function(t){var l,e,h,i,n;function s(){return e.call(this)||this}l=t.soaring_cumulatePay||(t.soaring_cumulatePay={}),h=t.bag.BagUtil,i=t.soaring_singlePay.PayAndAwardsItem,e=i,__extends(s,e),s.prototype.setData=function(t){e.prototype.setData.call(this,t),this._Datas=t,this.showUI()},s.prototype.sureBtnHandler=function(){var t=this._Datas,e=0,i=l.SoaringCumulatePayModel.instance.rewardList[t[0]];switch(i&&(e=i[1]),e){case 0:WindowManager.instance.open(111),this.close();break;case 1:var n=[],s=t[3];if(s){for(var o=0,a=s.length;o<a;o++){var r=s[o];n.push([r[0],r[1],0,null])}h.canAddItemsByBagIdCount(n)&&l.SoaringCumulatePayCtrl.instance.getCumulatepayFSReward(this._Datas[0])}}},s.prototype.showUI=function(){var t=this._Datas,e=t[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards(t[3]),this.setBtnSure(),this.showScheduleText()},s.prototype.showScheduleText=function(){var t=this._Datas,e=l.SoaringCumulatePayModel.instance.totalMoney,i=t[1],n="("+e+"/"+i+")";this.scheduleText.text=n,this.scheduleText.color=i<=e?"#16ba17":"#FF3e3e"},s.prototype.showCanBuyHTML=function(){this.CanBuyHTML.innerHTML="可领取<span style='color:#16ba17'>(10/10)</span>"},s.prototype.setBtnSure=function(){var t=this._Datas,e=0,i=l.SoaringCumulatePayModel.instance.rewardList[t[0]];i&&(e=i[1]),0==l.SoaringCumulatePayModel.instance.endFlag?0==e?this.showGotoRecharge():1==e?this.showCanReceive():this.showReceived():this.showOver()},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._Datas=null,e.prototype.destroy.call(this,t)},n=s,l.SoaringCumulatePayItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){this._state=0,this._cuyType=1,this._totalMoney=0,this._rewardList=new Array,this._restTm=0,this._endFlag=1}e=t.soaring_cumulatePay||(t.soaring_cumulatePay={}),i=t.redPoint.RedPointCtrl,n=t.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cuyType",{get:function(){return this._cuyType},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"totalMoney",{get:function(){return this._totalMoney},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endFlag",{get:function(){return this._endFlag},enumerable:!0,configurable:!0}),o.prototype.getInfo=function(t){this._totalMoney=t[1];var e=t[3];this._endFlag=e[2],this._cuyType=e[0],this._restTm=e[1]+GlobalData.serverTime;var i=t[2];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList[o]=s}GlobalData.dispatcher.event("SOARING_CUMULATEPAY_UPDATE"),this.setRP()},o.prototype.updateInfo=function(t){this._totalMoney=t[1];var e=t[3];this._endFlag=e[2],this._cuyType=e[0],this._restTm=e[1]+GlobalData.serverTime;var i=t[2];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList[o]=s}this.setRP(),GlobalData.dispatcher.event("SOARING_CUMULATEPAY_UPDATE")},o.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},o.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(168),e=this.getIsLingQu();i.instance.setRPProperty("soaringCumulatePayRP",t&&e&&0==this.endFlag)},s=o,e.SoaringCumulatePayModel=s}(modules=modules||{}),function(t){var c,e,p,u,i,n;function s(){return e.call(this)||this}c=t.soaring_dayConsumeReward||(t.soaring_dayConsumeReward={}),p=t.bag.BagUtil,u=t.config.SoaringRankCfg,i=t.soaring_singlePay.PayAndAwardsItem,e=i,__extends(s,e),s.prototype.setData=function(t){e.prototype.setData.call(this,t),this._Datas=t,this.showUI()},s.prototype.sureBtnHandler=function(){var t=this._Datas,e=0,i=c.SoaringDayConsumeRewardModel.instance.rewardList[t[0]];switch(i&&(e=i[1]),e){case 0:var n=t[3],s=u.instance.getCfgsByGrade(n,0)[8];15==s?WindowManager.instance.openByActionId(s,2):WindowManager.instance.openByActionId(s),this.close();break;case 1:var o=[],a=t[4];if(a){for(var r=0,l=a.length;r<l;r++){var h=a[r];o.push([h[0],h[1],0,null])}p.canAddItemsByBagIdCount(o)&&c.SoaringDayConsumeRewardCtrl.instance.GetConsumeRewardFSReward(this._Datas[0])}}},s.prototype.showUI=function(){var t=this._Datas,e=t[3],i=t[2],n=u.instance.getCfgsByGrade(e,0)[13],s=CommonUtil.getNameByItemId(n);this.StatementHTML.innerHTML="累计消耗<span style='color:#b15315'>"+i+"个</span>"+s,this.showRewards(t[4]),this.setBtnSure(),this.showScheduleText()},s.prototype.showScheduleText=function(){var t=this._Datas,e=c.SoaringDayConsumeRewardModel.instance.totalCount,i=t[2],n="("+e+"/"+i+")";this.scheduleText.text=n,this.scheduleText.color=i<=e?"#16ba17":"#FF3e3e"},s.prototype.showCanBuyHTML=function(){this.CanBuyHTML.innerHTML="可领取<span style='color:#16ba17'>(10/10)</span>"},s.prototype.setBtnSure=function(){var t=this._Datas,e=0,i=c.SoaringDayConsumeRewardModel.instance.rewardList[t[0]];i&&(e=i[1]),0==c.SoaringDayConsumeRewardModel.instance.endFlag?0==e?(this.showGotoRecharge(),this.sureBtn.label="前往"):1==e?this.showCanReceive():this.showReceived():this.showOver()},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._Datas=null,e.prototype.destroy.call(this,t)},n=s,c.SoaringDayConsumeRewardItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){this._state=0,this._cuyType=1,this._totalCount=0,this._rewardList=new Array,this._restTm=0,this._endFlag=1}e=t.soaring_dayConsumeReward||(t.soaring_dayConsumeReward={}),i=t.redPoint.RedPointCtrl,n=t.funcOpen.FuncOpenModel,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cuyType",{get:function(){return this._cuyType},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"totalCount",{get:function(){return this._totalCount},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endFlag",{get:function(){return this._endFlag},enumerable:!0,configurable:!0}),o.prototype.getInfo=function(t){this._totalCount=t[1];var e=t[3];this._endFlag=e[2],this._cuyType=e[0],this._restTm=e[1]+GlobalData.serverTime;var i=t[2];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList[o]=s}GlobalData.dispatcher.event("SOARING_DATCONSUMEREWARD_UPDATE"),this.setRP()},o.prototype.updateInfo=function(t){this._totalCount=t[1];var e=t[3];this._endFlag=e[2],this._cuyType=e[0],this._restTm=e[1]+GlobalData.serverTime;var i=t[2];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList[o]=s}this.setRP(),GlobalData.dispatcher.event("SOARING_DATCONSUMEREWARD_UPDATE")},o.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},o.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(170),e=this.getIsLingQu();i.instance.setRPProperty("soaringDayConsumeRewardRP",t&&e&&0==this.endFlag)},s=o,e.SoaringDayConsumeRewardModel=s}(modules=modules||{}),function(e){var t,s,o,i,n;function a(){this.outTime=0,this.inTime=0,this.timerIsRun=!1,this.buyTimeIsRum=!1,this.cuyType=1,this.count=0,this.totalCount=0,this.restTm=0,this.endFlag=1;var t=parseInt(localStorage.getItem(e.player.PlayerModel.instance.actorId+"_SoaringPanicBuyRedLook"));t&&t>GlobalData.serverTime?this.isFirstOpen=!1:this.isFirstOpen=!0,Laya.timer.loop(1e3,this,this.timeOut)}t=e.soaring_panicBuyingGift||(e.soaring_panicBuyingGift={}),s=e.config.SoaringPanicBuyingGiftCfg,o=e.config.BlendCfg,i=e.redPoint.RedPointCtrl,Object.defineProperty(a,"instance",{get:function(){return this._instance=this._instance||new a},enumerable:!0,configurable:!0}),a.prototype.getInfo=function(t){this.count=t[2],this.totalCount=t[1];var e=t[3];this.endFlag=e[2],this.cuyType=e[0],this.restTm=e[1]+GlobalData.serverTime,this.inTime=GlobalData.serverTime,this._playerId=PlayerModel.instance.actorId,this.dateUpdate(),this.isFirstOpen&&this.setRP()},a.prototype.openPanel=function(){this.outTime=GlobalData.serverTime;var t=(GlobalData.serverTime-GlobalData.timeZoneOffset)/864e5;if(localStorage.getItem(this._playerId+"_outTime")&&0<localStorage.getItem(this._playerId+"_outTime").length){var e=parseInt(localStorage.getItem(this._playerId+"_outTime")),i=Math.floor((e-GlobalData.timeZoneOffset)/864e5);1<=Math.floor(t)-i&&(localStorage.setItem(this._playerId+"_outTime",""+this.outTime),this.removeItem(),this.dateUpdate())}else this.removeItem(),this.dateUpdate()},a.prototype.dateUpdate=function(){var t=o.instance.getCfgById(57002)[1][0];if(localStorage.getItem(this._playerId+"_totalCountRandom")){if(localStorage.getItem(this._playerId+"SoaringPanicBuyingGiftModelNotBuy")){if(this.stopCountRandom=parseInt(localStorage.getItem(this._playerId+"SoaringPanicBuyingGiftModelNotBuy")),this.totalCountRandom=parseInt(localStorage.getItem(this._playerId+"_totalCountRandom")),this.totalCountRandom<=this.stopCountRandom)this.totalCountRandom=parseInt(localStorage.getItem(this._playerId+"_totalCountRandom"));else if(!this.timerIsRun)if(this._Datas=s.instance.getCfgById(a.instance.cuyType),0==(this._Datas?this._Datas[3]-a.instance.count:1)){var e=o.instance.getCfgById(57002)[1][0];this.buyTimeIsRum||(this.timerIsRun=!1,Laya.timer.clear(this,this.minusCount),Laya.timer.loop(e,this,this.isBuyThenMinus))}else this.buyTimeIsRum=!1,Laya.timer.clear(this,this.isBuyThenMinus),Laya.timer.loop(t,this,this.minusCount)}else if(this.creatNotBuy(),this.totalCountRandom=parseInt(localStorage.getItem(this._playerId+"_totalCountRandom")),this.totalCountRandom<=this.stopCountRandom)this.totalCountRandom=parseInt(localStorage.getItem(this._playerId+"_totalCountRandom"));else if(!this.timerIsRun)if(this._Datas=s.instance.getCfgById(a.instance.cuyType),0==(this._Datas?this._Datas[3]-a.instance.count:1)){var i=o.instance.getCfgById(57002)[1][0];this.buyTimeIsRum||(this.timerIsRun=!1,Laya.timer.clear(this,this.minusCount),Laya.timer.loop(i,this,this.isBuyThenMinus))}else this.buyTimeIsRum=!1,Laya.timer.clear(this,this.isBuyThenMinus),Laya.timer.loop(t,this,this.minusCount)}else this.dealCount();GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_UPDATE")},a.prototype.creatNotBuy=function(){var t=o.instance.getCfgById(57004)[1][0],e=o.instance.getCfgById(57004)[1][1];this.stopCountRandom=Math.floor(Math.random()*(e-t)+t),localStorage.setItem(this._playerId+"SoaringPanicBuyingGiftModelNotBuy",""+this.stopCountRandom)},a.prototype.isBuy=function(){if(--this.totalCountRandom,localStorage.setItem(this._playerId+"_totalCountRandom",""+this.totalCountRandom),GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_COUNT_UPDATE"),this._Datas=s.instance.getCfgById(a.instance.cuyType),0==(this._Datas?this._Datas[3]-a.instance.count:1)){var t=o.instance.getCfgById(57002)[1][0];this.buyTimeIsRum||(this.timerIsRun=!1,Laya.timer.clear(this,this.minusCount),Laya.timer.loop(t,this,this.isBuyThenMinus))}},a.prototype.isBuyThenMinus=function(){var t=o.instance.getCfgById(57003)[1][0],e=o.instance.getCfgById(57003)[1][1];this.buyTimeIsRum=!0,0<this.totalCountRandom?(this.totalCountRandom-=Math.floor(Math.random()*(e-t)+t),this.totalCountRandom=this.totalCountRandom<0?0:this.totalCountRandom,localStorage.setItem(this._playerId+"_totalCountRandom",""+this.totalCountRandom),GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_COUNT_UPDATE")):(localStorage.setItem(this._playerId+"_totalCountRandom",""+this.totalCountRandom),this.buyTimeIsRum=!1,Laya.timer.clear(this,this.isBuyThenMinus))},a.prototype.dealCount=function(){var t=o.instance.getCfgById(57001)[1][0],e=o.instance.getCfgById(57001)[1][1],i=o.instance.getCfgById(57002)[1][0];if(this.creatNotBuy(),this.totalCountRandom=Math.floor(Math.random()*(e-t)+t),localStorage.setItem(this._playerId+"_totalCountRandom",""+this.totalCountRandom),!this.timerIsRun)if(this._Datas=s.instance.getCfgById(a.instance.cuyType),0==(this._Datas?this._Datas[3]-a.instance.count:1)){var n=o.instance.getCfgById(57002)[1][0];this.buyTimeIsRum||(this.timerIsRun=!1,Laya.timer.clear(this,this.minusCount),Laya.timer.loop(n,this,this.isBuyThenMinus))}else this.buyTimeIsRum=!1,Laya.timer.clear(this,this.isBuyThenMinus),Laya.timer.loop(i,this,this.minusCount)},a.prototype.minusCount=function(){var t=o.instance.getCfgById(57003)[1][0],e=o.instance.getCfgById(57003)[1][1];this.timerIsRun=!0,this.totalCountRandom>this.stopCountRandom&&this.totalCountRandom-Math.floor(Math.random()*(e-t)+t)>=this.stopCountRandom?(this.totalCountRandom-=Math.floor(Math.random()*(e-t)+t),this.totalCountRandom=this.totalCountRandom<0?0:this.totalCountRandom,localStorage.setItem(this._playerId+"_totalCountRandom",""+this.totalCountRandom),GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_COUNT_UPDATE")):(localStorage.setItem(this._playerId+"_totalCountRandom",""+this.totalCountRandom),this.timerIsRun=!1,Laya.timer.clear(this,this.minusCount))},a.prototype.timeOut=function(){var t=(GlobalData.serverTime-GlobalData.timeZoneOffset)/864e5;864e5*Math.ceil(t)+GlobalData.timeZoneOffset-GlobalData.serverTime<=2e3&&this.removeItem()},a.prototype.removeItem=function(){localStorage.setItem(this._playerId+"_outTime",""+this.outTime),localStorage.removeItem(this._playerId+"_totalCountRandom"),localStorage.removeItem(this._playerId+"SoaringPanicBuyingGiftModelNotBuy"),Laya.timer.clear(this,this.minusCount),Laya.timer.clear(this,this.isBuyThenMinus),this.timerIsRun=!1,this.buyTimeIsRum=!1,GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_UPDATE"),GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_COUNT_UPDATE"),GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_NEXT_DAY_UPDATE")},a.prototype.updateInfo=function(t){if(t){this.count=t[2],this.totalCount=t[1];var e=t[3];this.endFlag=e[2],this.cuyType=e[0],this.restTm=e[1]+GlobalData.serverTime,GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_UPDATE"),GlobalData.dispatcher.event("SOARING_PANICBUYINGGIFT_NEXT_DAY_UPDATE")}},a.prototype.getIsLingQu=function(){var t=!0,e=s.instance.getCfgById(this.cuyType);if(e){var i=e[3];0==this.totalCount?t=!1:i==this.count&&(t=!1)}else t=!1;return t},a.prototype.setRP=function(){0==this.endFlag?this.setRP1():i.instance.setRPProperty("soaringPanicBuyingGifRP",!1)},a.prototype.setRP1=function(){var t=s.instance.getCfgById(this.cuyType);t?t[3]!=this.count&&this.isFirstOpen&&i.instance.setRPProperty("soaringPanicBuyingGifRP",!0):i.instance.setRPProperty("soaringPanicBuyingGifRP",!1)},n=a,t.SoaringPanicBuyingGiftModel=n}(modules=modules||{}),function(t){var l,e,h,i;function n(){var t=e.call(this)||this;return t._paiMing=1,t}l=t.soaring_rank||(t.soaring_rank={}),h=t.config.SoaringRankCfg,e=ui.SoaringRankItemUI,__extends(n,e),n.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.reward1,this.reward2,this.reward3],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22)},n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("SOARING_RANK_ITEM_UPDATE",this,this.showUI)},n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._paiMing=t,this.showUI()},n.prototype.showUI=function(){this.oneImage.visible=1==this._paiMing,this.twoImage.visible=2==this._paiMing,this.threeImg.visible=3==this._paiMing,this.otherBox.visible=3<this._paiMing,this.afterthired.value=""+this._paiMing;for(var t=0;t<this._taskBase.length;t++)this._taskBase[t].visible=!1;var e,i=l.SoaringRankModel.instance.nodeList[this._paiMing];e=i&&(e=i[4])||h.instance.getGradeByRank(this._paiMing);var n=h.instance.getCfgsByDay(l.SoaringRankModel.instance.curType,e,PlayerModel.instance.cBgDay),s=n[4];for(t=0;t<.5*s.length;t++){var o=this._taskBase[t];o&&(o.dataSource=[s[2*t],s[2*t+1],0,null],o.visible=!0)}if(i)this.playername.visible=!0,this.playername.text=i[1],this.notplaylisttxt.visible=!1,this.StatementHTML.innerHTML="积分:<span style='color:#168a17'>"+i[2]+"</span>";else{this.playername.visible=!1,this.notplaylisttxt.visible=!0;for(var a=PlayerModel.instance.cBgDay,r=0;r<n[3].length;r++){if(a>=n[3][r][0]&&a<=n[3][r][1])return void(this.StatementHTML.innerHTML="上榜条件:<span style='color:#168a17'>"+n[3][r][2]+"</span>积分");a>n[3][n[3].length-1][1]&&(this.StatementHTML.innerHTML="上榜条件:<span style='color:#168a17'>"+n[3][n[3].length-1][2]+"</span>积分")}}},i=n,l.SoaringRankItem=i}(modules=modules||{}),function(o){var t,a,e;function i(){return a.call(this)||this}t=o.soaring_rank||(o.soaring_rank={}),a=ui.SoaringRankJieZhiItemUI,__extends(i,a),i.prototype.setData=function(t){if(a.prototype.setData.call(this,t),t){this._mingCi=t[0],this._type=t[1];var e,i="没有玩家上榜";0==this._type?(e=o.sprint_rank.SprintRankModel.instance._LiShiNodeListByObjRank[this._mingCi])&&(i=e[1]):(e=o.soaring_rank.SoaringRankModel.instance._LiShiNodeListByObjRank[this._mingCi])&&(i=e[1]);var n=this._mingCi<=3?"#ff3e3e":"#ea8706",s="第  "+this._mingCi+"  名:"+i;CommonUtil.setHTMLPro(this.recordHtml,n,"SimHei",24),this.recordHtml.innerHTML=s}},e=i,t.SoaringRankJieZhiItem=e}(modules=modules||{}),function(d){var t,e,i,m,v,b,T,I,C,x,B,S,M,w,P,A,R,n;function k(){this.curType=1,this.restTm=0,this.firstName="",this.nodeList=new Array,this.nodeListByObjId=new Array,this._LiShiNodeListByObjRank=new Array,this._LiShiNodeListByObjid=new Array,this.taskId=1001,this.state=2,this.param=0,this._LiShiparam=0,this._LiShiparamTime=0,this._IsShouCi=!1,this._IsShouCiLiShiPaiHang=!1,this._biJiaoMC=0,this._biLiNum=d.config.BlendCfg.instance.getCfgById(56007)[1][1],this._sureBtnRP=!1,this._isShow=!1}t=d.soaring_rank||(d.soaring_rank={}),e=d.redPoint.RedPointCtrl,i=d.funcOpen.FuncOpenModel,m=d.config.SoaringRankCfg,v=d.bag.BagModel,b=d.immortals.ImmortalsModel,T=d.wing.WingModel,I=d.fashion.FashionModel,C=d.tianZhu.TianZhuModel,x=d.talisman.TalismanModel,B=d.config.ImmortalsCfg,S=d.config.WingCfg,M=d.ride.RideModel,w=d.config.RideFeedCfg,P=d.pet.PetModel,A=d.config.FashionFeedCfg,R=d.config.TianZhuFeedCfg,Object.defineProperty(k,"instance",{get:function(){return this._instance=this._instance||new k},enumerable:!0,configurable:!0}),k.prototype.getInfo=function(t){this.curType=t[1],this.restTm=t[2]+GlobalData.serverTime,this.firstName=t[3],this.endFlag=t[5];var e=t[4];if(e){for(var i=0;i<e.length;i++){var n=(h=e[i])[0],s=h[3],o=h[2];if(this._IsShouCi){var a=!1;if(s==d.player.PlayerModel.instance.actorId&&this.nodeListByObjId[d.player.PlayerModel.instance.actorId]&&this.nodeListByObjId[d.player.PlayerModel.instance.actorId][2]!=o&&(this.myOne()||(a=!0)),0!=this._biJiaoMC&&n==this._biJiaoMC)if(this.nodeList[this._biJiaoMC]){var r=this.nodeList[this._biJiaoMC][2];if(r&&r!=o)if(this.myOne()){var l=this.nodeList[1];if((l[2]-r)/l[2]<=this._biLiNum){a=!0;break}}else this.MyTwo()&&(a=!0)}else n==this._biJiaoMC&&(this.myOne()?a=!0:this.MyTwo()&&(a=!0));a&&GlobalData.dispatcher.event("SOARING_RANK_CHANG",[!1,!1])}}for(this.nodeList.length=0,i=this.nodeListByObjId.length=0;i<e.length;i++){var h;n=(h=e[i])[0],s=h[3],this.nodeList[n]=h,this.nodeListByObjId[s]=h}}GlobalData.dispatcher.event("SOARING_RANK_UPDATE"),this.setSureBtnRP(),this._IsShouCi=!0},k.prototype.updateInfo=function(t){this.curType!=t[1]&&GlobalData.dispatcher.event("SOARING_RANK_HUODONG_CHANG"),this.curType=t[1],this.restTm=t[2]+GlobalData.serverTime,this.firstName=t[3],GlobalData.dispatcher.event("SOARING_RANK_ITEM_UPDATE"),this.setSureBtnRP()},k.prototype.getInfo2=function(t){this.curType=t[1],this.restTm=t[2]+GlobalData.serverTime,this.firstName=t[3],GlobalData.dispatcher.event("SOARING_RANK_ITEM_UPDATE"),this.setSureBtnRP()},k.prototype.getInfoIntegral=function(t){this.curType=t[0],this.taskId=t[1],this.state=t[2],this.param=t[3],this.endFlag=t[4],GlobalData.dispatcher.event("SOARING_RANK_LIONQU_UPDATE"),this.setSureBtnRP()},k.prototype.updateInfoIntegral=function(t){this.curType!=t[1]&&GlobalData.dispatcher.event("SOARING_RANK_HUODONG_CHANG"),this.curType=t[0],this.taskId=t[1],this.state=t[2];var e=!1;this.myOne()||this.param!=t[3]&&(e=!0),this.param=t[3],this.endFlag=t[4],GlobalData.dispatcher.event("SOARING_RANK_LIONQU_UPDATE"),e&&(this.getTipsInfo(),GlobalData.dispatcher.event("SOARING_RANK_CHANG",[!0,!1])),this.setSureBtnRP()},k.prototype.setRP=function(){var t=i.instance.getFuncIsOpen(164);e.instance.setRPProperty("soaringRankRP",(1==this.state||this._sureBtnRP)&&t&&0==k.instance.endFlag)},Object.defineProperty(k.prototype,"sureBtnRP",{get:function(){return this._sureBtnRP},enumerable:!0,configurable:!0}),k.prototype.setSureBtnRP=function(){var t=m.instance.getCfgsByGrade(k.instance.curType,0)[13],e=v.instance.getItemCountById(t);switch(k.instance.curType){case 1:var i=M.instance.feed,n=i?i[0]:0,s=w.instance.getPetFeedCfgByLv(n+1);this._sureBtnRP=0<e&&!!s;break;case 2:var o=P.instance.feed,a=o?o[0]:0,r=w.instance.getPetFeedCfgByLv(a+1);this._sureBtnRP=0<e&&!!r;break;case 3:var l=b.instance.info?b.instance.info[0]:0,h=B.instance.getShengjiCfgByLv(l+1);this._sureBtnRP=!!h&&b.instance._upLevaeRp;break;case 4:var c=T.instance.info?T.instance.info[0]:0,p=S.instance.getShengjiCfgByLv(c+1);this._sureBtnRP=!!p&&T.instance._upLevaeRp;break;case 5:this._sureBtnRP=0<e&&x.instance._upLevaeRp;break;case 6:var u=I.instance.fashionInfo,d=u?u[0]:0,y=A.instance.getCfgByLevel(d+1);this._sureBtnRP=!!y&&I.instance._upLevaeRp;break;case 7:var g=C.instance.tianZhuInfo,f=g?g[0]:0,_=R.instance.getCfgByLevel(f+1);this._sureBtnRP=!!_&&C.instance._upLevaeRp}this.setRP()},k.prototype.GetFeishengRankBeforeReply=function(t){var e=t[3];if(this._LiShiparam=t[1],this._LiShiparamTime=t[2],e&&0<e.length){this._LiShiNodeListByObjRank.length=0,this._LiShiNodeListByObjRank=new Array,this._LiShiNodeListByObjid.length=0,this._LiShiNodeListByObjid=new Array;for(var i=0;i<e.length;i++){var n=e[i],s=n[0],o=n[3];this._LiShiNodeListByObjRank[s]=n,this._LiShiNodeListByObjid[o]=n}WindowManager.instance.open(396,1)}},k.prototype.myOne=function(){var t=this.nodeListByObjId[d.player.PlayerModel.instance.actorId];return t&&1==t[0]},k.prototype.MyTwo=function(){var t=this.nodeListByObjId[d.player.PlayerModel.instance.actorId];return t&&2==t[0]},k.prototype.isTwo=function(){return!!this.nodeList[2]},k.prototype.getTipsInfo=function(){var t,e=this.nodeListByObjId[d.player.PlayerModel.instance.actorId],i="",n=PlayerModel.instance.cBgDay;if(e){var s=e[4];if(1==e[0]){var o=0;if(c=2)if(p=this.nodeList[c]){var a=p[2];o=(o=this.param-a)<0?0:o+1}else{var r=m.instance.getGradeByRank(c);if(h=m.instance.getCfgsByGrade(this.curType,r)){for(var l=a=0;l<h[3].length;l++)n>=h[3][l][0]&&n<=h[3][l][1]?a=h[3][l][2]:n>h[3][h[3].length-1][2]&&(a=h[3][l][2]);o=this.param-a}}c=c||0,this._biJiaoMC=c,t="第二名还差<span style='color:#ff3e3e'>"+(o=o<0?0:o)+"</span>积分将超过你"}else{if(r=s-1,o=0,c=m.instance.getMaxMingCiByGrade(this.curType,r)){var h=m.instance.getCfgsByGrade(this.curType,r);if(p=this.nodeList[c])o=(o=(a=p[2])-this.param)<0?0:o+1;else if(h){for(l=a=0;l<h[3].length;l++)n>=h[3][l][0]&&n<=h[3][l][1]?a=h[3][l][2]:n>h[3][h[3].length-1][2]&&(a=h[3][l][2]);o=a-this.param}h&&(i=h[16])}c=c||0,t="您还差<span style='color:#168a17'>"+(o=o<0?0:o)+"</span>积分超过第<span style='color:#168a17'>"+(this._biJiaoMC=c)+"</span>名"}}else{var c;if(o=0,c=50){r=m.instance.getGradeByRank(c),h=m.instance.getCfgsByGrade(this.curType,r);var p=this.nodeList[c];if(h){var u=0;for(l=0;l<h[3].length;l++)n>=h[3][l][0]&&n<=h[3][l][1]?u=h[3][l][2]:n>h[3][h[3].length-1][2]&&(u=h[3][l][2]);this.param<u?h&&(o=u-this.param):p?o=(o=(a=p[2])-this.param)<0?0:o+1:h&&(o=u-this.param),i=h[16]}}c=c||0,t="您还差<span style='color:#168a17'>"+(o=o<0?0:o)+"</span>积分超过第<span style='color:#168a17'>"+(this._biJiaoMC=c)+"</span>名"}return[t,i]},n=k,t.SoaringRankModel=n}(modules=modules||{}),function(t){var l,e,h,i;function n(){return e.call(this)||this}l=t.soaring_singlePay||(t.soaring_singlePay={}),h=t.bag.BagUtil,e=l.PayAndAwardsItem,__extends(n,e),n.prototype.setData=function(t){e.prototype.setData.call(this,t),this._cfg=t,this.showUI()},n.prototype.sureBtnHandler=function(){var t=this._cfg,e=0,i=l.SoaringSinglePayModel.instance.rewardList[t[0]];switch(i&&(e=l.SoaringSinglePayModel.instance.getState(i)),e){case 0:WindowManager.instance.open(111),this.close();break;case 1:var n=[],s=t[5];if(s){for(var o=0,a=s.length;o<a;o++){var r=s[o];n.push([r[0],r[1],0,null])}h.canAddItemsByBagIdCount(n)&&l.SoaringSinglePayCtrl.instance.GetPaySingleFSReward(this._cfg[0])}}},n.prototype.showUI=function(){var t=this._cfg,e=t[1];this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards(t[5]),this.setBtnSure(),this.showScheduleText(),this.showCanBuyHTML()},n.prototype.showScheduleText=function(){var t=0,e=l.SoaringSinglePayModel.instance.rewardList[this._cfg[0]];e&&(t=l.SoaringSinglePayModel.instance.getState(e));var i=0!=t?1:0,n="("+i+"/1)";this.scheduleText.text=n;var s=l.SoaringSinglePayModel.instance.endFlag;this.scheduleText.color=0==s?1<=i?"#16ba17":"#FF3e3e":"#16ba17"},n.prototype.showCanBuyHTML=function(){var t=this._cfg,e=0,i=l.SoaringSinglePayModel.instance.rewardList[t[0]];i&&(e=i[1]);var n=t[4],s=n-e,o=s+"/"+n;this.CanBuyHTML.visible=1<n,this.CanBuyHTML.innerHTML=0<s?"活动次数:<span style='color:#16ba17'>"+o+"</span>":"活动次数:<span style='color:#FF3e3e'>"+o+"</span>"},n.prototype.setBtnSure=function(){var t=this._cfg,e=0,i=l.SoaringSinglePayModel.instance.rewardList[t[0]];i&&(e=l.SoaringSinglePayModel.instance.getState(i)),0==l.SoaringSinglePayModel.instance.endFlag?0==e?this.showGotoRecharge():1==e?this.showCanReceive():this.showReceived():this.showOver()},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._cfg=null,e.prototype.destroy.call(this,t)},i=n,l.SoaringSinglePayItem=i}(modules=modules||{}),function(t){var e,i,n,r,s;function o(){this._state=0,this._cuyType=1,this._totalMoney=0,this._rewardList=new Array,this._restTm=0,this._endFlag=1}e=t.soaring_singlePay||(t.soaring_singlePay={}),i=t.redPoint.RedPointCtrl,n=t.funcOpen.FuncOpenModel,r=t.config.SoaringSinglePayCfg,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cuyType",{get:function(){return this._cuyType},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endFlag",{get:function(){return this._endFlag},enumerable:!0,configurable:!0}),o.prototype.getInfo=function(t){var e=t[2];this._endFlag=e[2],this._cuyType=e[0],this._restTm=e[1]+GlobalData.serverTime;var i=t[1];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList[o]=s}GlobalData.dispatcher.event("SOARING_SINGLEPAY_UPDATE"),this.setRP()},o.prototype.updateInfo=function(t){var e=t[2];this._endFlag=e[2],this._cuyType=e[0],this._restTm=e[1]+GlobalData.serverTime;var i=t[1];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList[o]=s}this.setRP(),GlobalData.dispatcher.event("SOARING_SINGLEPAY_UPDATE")},o.prototype.getState=function(t){var e=0,i=t[0],n=t[1],s=t[2],o=r.instance.getCfgById(i);if(o){var a=o[4];0<a&&(0<s?e=1:n==a&&(e=2))}return e},o.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==this.getState(i)){t=!0;break}}return t},o.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(169),e=this.getIsLingQu();i.instance.setRPProperty("soaringSinglePayRP",t&&e&&0==this.endFlag)},s=o,e.SoaringSinglePayModel=s}(modules=modules||{}),function(h){var r,e,n,l,c,p,t;function i(){return null!==e&&e.apply(this,arguments)||this}r=h.soaring_specialGift||(h.soaring_specialGift={}),n=h.common.CustomClip,l=h.bag.BagUtil,c=h.bag.BagModel,p=h.common.CommonUtil,e=ui.SoaringSpecialGiftItemUI,__extends(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this._taskBase=[this.continueBase1,this.continueBase2],p.setHTMLPro(this.CanBuyHTML,"#1f304d","SimHei",26,"center"),p.setHTMLPro(this.zeKouHTml,"#ffffff","SimHei",25,"center","middle"),this.zeKouHTml.style.strokeColor="#610101",this.zeKouHTml.style.stroke=3,this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-6,this.sureBtn.y-8)},i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("SOARING_SPECIALGIFT_UPDATE",this,this.showUI)},i.prototype.setData=function(t){e.prototype.setData.call(this,t),this._Datas=t,this.showUI()},i.prototype.sureBtnHandler=function(){var t=this._Datas[4];if(1<t.length){var e=this.getListTheVips(t),i=h.vip.VipModel.instance.vipLevel,n=e[h.player.PlayerModel.instance.openDay];(n=n||e[e.length-1])<=i?this.isCion():p.alert("温馨提示","SVIP等级不足，是否前往提升SVIP？",[Handler.create(this,p.gotoVIP)])}else this.isCion()},i.prototype.isCion=function(){var t=PlayerModel.instance.getCurrencyById(90140001);if(null==t&&(t=c.instance.getItemCountById(90140001)),this._Datas[1]<=t){var e=[],i=this._Datas[5];if(i){for(var n=0,s=i.length;n<s;n++){var o=i[n];e.push([o[0],o[1],0,null])}if(l.canAddItemsByBagIdCount(e)){var a=this._Datas[0];r.SoaringSpecialGiftCtrl.instance.BuyDiscountGiftFS(a)}}}else p.goldNotEnoughAlert()},i.prototype.showUI=function(){for(var t=this._Datas[5],e=0;e<this._taskBase.length;e++)this._taskBase[e].visible=!1;for(e=0;e<t.length;e++){var i=this._taskBase[e];i&&(i.dataSource=[t[e][0],t[e][1],0,null],i.visible=!0)}this.showCanBuyHTML(),this.showZeKou(),this.setBtnSure()},i.prototype.showCanBuyHTML=function(){var t=this._Datas,e=0,i=r.SoaringSpecialGiftModel.instance.rewardList[t[0]];i&&(e=i[1]);var n=t[2],s=n-e,o=s+"/"+n;this.CanBuyHTML.visible=1<n,this.CanBuyHTML.innerHTML=0<s?"可购买:<span style='color:#16ba17'>"+o+"</span>":"可购买:<span style='color:#FF3e3e'>"+o+"</span>"},i.prototype.showZeKou=function(){var t=this._Datas[1],e=this._Datas[4],i=this._Datas[6],n=this._Datas[7],s=this._Datas[8],o=this._Datas[9];this.zeKouImg.skin=1==o?"common/image_common_hongbq.png":2==o?"common/image_common_hbq.png":"common/image_common_hongbq.png";var a=Math.round(i);if(this.zeKouHTml.innerHTML=a+"<span style='color:#ffffff;font-size: 22px'>折</span>",1<e.length){this.limitImg.visible=!1,this.VipLimitBox.visible=!0;var r=this.getListTheVips(e),l=r[h.player.PlayerModel.instance.openDay];l=l||r[r.length-1],this.VipLimitClip.value=""+l}else 0!=s?(this.limitImg.visible=!0,this.VipLimitBox.visible=!1,this.limitImg.skin="soaringActivity/limitImg"+s+".png"):(this.limitImg.visible=!1,this.VipLimitBox.visible=!1);this.originalPriceText.text=""+n,this.originalPriceRedImg.width=this.originalPriceText.width+40,this.nowPriceText.text=""+t},i.prototype.getListTheVips=function(t){for(var e=new Array,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1],o=t[i+2];if(n&&s){o=o||n+1;for(var a=n;a<o;a++)e[a]=s}}return e},i.prototype.setBtnSure=function(){n.thisStop(this._btnClip);var t=this._Datas,e=r.SoaringSpecialGiftModel.instance.rewardList[t[0]],i=r.SoaringSpecialGiftModel.instance.getState(e);0==r.SoaringSpecialGiftModel.instance.endFlag?(this.sureBtn.skin="common/btn_tongyong_6.png",this.sureBtn.labelColors="#9d5119,#9d5119,#9d5119,#9d5119",this.sureBtn.label="购买",this.sureBtn.visible=!0,this.maxCeilingText.visible=!1,this.overImg.visible=!1,0==i||1==i?1<this._Datas[4].length&&n.thisPlay(this._btnClip):(this.sureBtn.visible=!1,this.maxCeilingText.visible=!0,this.overImg.visible=!1,this.maxCeilingText.text="已达上限")):(this.sureBtn.visible=!1,this.maxCeilingText.visible=!1,this.overImg.visible=!0)},i.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._taskBase=this.destroyElement(this._taskBase),this._Datas=null,e.prototype.destroy.call(this,t)},t=i,r.SoaringSpecialGiftItem=t}(modules=modules||{}),function(e){var t,a,o,i;function n(){this._state=0,this._cuyType=1,this._rewardList=new Array,this._restTm=0,this._endFlag=1;var t=parseInt(localStorage.getItem(e.player.PlayerModel.instance.actorId+"_SoaringSpecialGiftRedLook"));t&&t>GlobalData.serverTime?this.isFirstOpen=!1:this.isFirstOpen=!0}t=e.soaring_specialGift||(e.soaring_specialGift={}),a=e.config.SoaringSpecialGiftCfg,o=e.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cuyType",{get:function(){return this._cuyType},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endFlag",{get:function(){return this._endFlag},enumerable:!0,configurable:!0}),n.prototype.getInfo=function(t){var e=t[2];this._endFlag=e[2],this._cuyType=e[0],this._restTm=e[1]+GlobalData.serverTime;var i=t[1];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList[o]=s}GlobalData.dispatcher.event("SOARING_SPECIALGIFT_GETINFO"),this.isFirstOpen&&this.setRP()},n.prototype.updateInfo=function(t){var e=t[2];this._endFlag=e[2],this._cuyType=e[0],this._restTm=e[1]+GlobalData.serverTime;var i=t[1];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList[o]=s}GlobalData.dispatcher.event("SOARING_SPECIALGIFT_UPDATE")},n.prototype.getState=function(t){var e=0;if(t){var i=t[0],n=t[1],s=a.instance.getCfgById(i);if(s){var o=s[2];0<o&&(n<o?e=1:n==o&&(e=2))}}else e=1;return e},n.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==this.getState(i)){t=!0;break}}return t},n.prototype.setRP=function(){0==this.endFlag?this.setRP1():o.instance.setRPProperty("soaringSpecialGiftRP",!1)},n.prototype.setRP1=function(){for(var t=0,e=0,i=a.instance.getCfgByType(this.cuyType),n=0;n<i.length;n++){var s=this.rewardList[i[n][0]];s&&(e+=s[1]),t+=i[n][2]}0<t-e&&this.isFirstOpen?o.instance.setRPProperty("soaringSpecialGiftRP",!0):o.instance.setRPProperty("soaringSpecialGiftRP",!1)},i=n,t.SoaringSpecialGiftModel=i}(modules=modules||{}),function(o){var t,a,r,l,i,e;function n(){this.spirit=0,this.autoUse=!1,this.minNum=0,this.openNum=0,this.minNum=o.config.BlendCfg.instance.getCfgById(80009)[1][0],this.openNum=o.config.BlendCfg.instance.getCfgById(80012)[1][0]}t=o.spiritDungeon||(o.spiritDungeon={}),a=o.scene.SceneModel,r=o.config.SceneYuanShenBossCfg,l=o.bossDungeon.BossDungeonModel,i=o.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.setSpirit=function(t){this.spirit=t,this.setRp()},n.prototype.setRp=function(){GlobalData.dispatcher.event("SPIRIT_DUNGEON_SPIRIT_UPDATE");var t=o.yuanShen.YuanShenModel.instance.getNum(),e=Math.round(this.openNum-this.openNum*t);i.instance.setRPProperty("spiritDungeonRP",0<this.spirit&&this.spirit>=this.minNum+e)},n.prototype.setAutoUse=function(t){this.autoUse=t,GlobalData.dispatcher.event("SPIRIT_DUNGEON_AUTO_USE_UPDATE")},n.prototype.setTeams=function(t){this.teams=t,this.teams.sort(function(t,e){return e[4]-t[4]}),GlobalData.dispatcher.event("SPIRIT_DUNGEON_TEAMS_UPDATE")},n.prototype.setPlayersToInvite=function(t){this.playersToInvite=t,GlobalData.dispatcher.event("SPIRIT_PLAYERS_TO_INVITE_UPDATE")},n.prototype.delObj=function(t){if(this.playersToInvite)for(var e=0,i=this.playersToInvite.length;e<i;e++)if(this.playersToInvite[e][2]===t){this.playersToInvite.splice(e,1),GlobalData.dispatcher.event("SPIRIT_PLAYERS_TO_INVITE_UPDATE");break}},n.prototype.setAutoAcceptInvite=function(t){this.autoAcceptInvite=t,GlobalData.dispatcher.event("SPIRIT_TEAM_AUTO_ACCEPT_UPDATE")},n.prototype.setCanSearch=function(t){this.canSearch=t,GlobalData.dispatcher.event("SPIRIT_TEAM_CAN_SEARCH_UPDATE")},n.prototype.setMembers=function(t){(!this.members||0===this.members.length)&&0<t.length&&WindowManager.instance.open(571);for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n[8]){if(0===e)break;var s=t[0];t[0]=n,t[e]=s;break}}this.members=t,GlobalData.dispatcher.event("SPIRIT_TEAM_MEMBERS_UPDATE")},n.prototype.cancelTeam=function(){this.setMembers([])},n.prototype.updateHurtRank=function(t){this.hurtRank=t,GlobalData.dispatcher.event("SPIRIT_HURT_RANK_UPDATE")},n.prototype.isSameTeam=function(t){if(this.members)for(var e=0,i=this.members.length;e<i;e++)if(this.members[e][0]===t)return!0;return!1},n.prototype.findPath=function(t,e){void 0===e&&(e=!1),e&&(this.bossIds=r.instance.getBossIdsByLayer(a.instance.enterScene[3]));for(var i=0,n=this.bossIds.length;i<n;i++)if(t!==this.bossIds[i]){var s=DungeonModel.instance.getBossInfoById(this.bossIds[i]);if(s&&!s[2][0]){PlayerModel.instance.selectTarget(1,this.bossIds[i]),l.instance.selectLastBoss=this.bossIds[i],l.instance.selectTargetPos=DungeonModel.instance.getBossInfoById(this.bossIds[i])[3];break}}},n.prototype.selectType=function(t){var e=o.yuanShen.YuanShenModel.instance.infos;if(e){var i=o.config.BlendCfg.instance.getCfgById(8e4+t)[1];if(0!==i[0])for(var n=0,s=e.length;n<s;n++)if(e[n][0]===i[0]){if(1e3*e[n][1]+e[n][2]<i[1])return CommonUtil.noticeError(0,o.yuanShen.YuanShenUtil.typeStrs(i[0]-1)+"达到"+(.001*i[1]>>0)+"阶"+i[1]%1e3+"重开启",!0),!0;break}return!1}},e=n,t.SpiritDungeonModel=e}(modules=modules||{}),function(t){var i,n,s,o,a,e;function r(){}i=t.spiritDungeon||(t.spiritDungeon={}),n=t.bag.BagUtil,s=t.bag.BagModel,o=t.notice.SystemNoticeManager,a=t.config.BlendCfg,r.addSpirit=function(t){if(0<s.instance.getItemCountById(13650001)){var e=t-i.SpiritDungeonModel.instance.spirit;0==e?o.instance.addNotice("当前元力值已满，无需使用元力丹",!0):e<a.instance.getCfgById(80008)[1][0]?CommonUtil.alert("提示","使用后元力溢出，溢出部分不保留，是否确定？",[Handler.create(i.SpiritDungeonCtrl.instance,i.SpiritDungeonCtrl.instance.useYuanliItem,[1])],[]):i.SpiritDungeonCtrl.instance.useYuanliItem(1)}else n.openLackPropAlert(13650001,1)},r.changeAutoUse=function(){i.SpiritDungeonModel.instance.autoUse?i.SpiritDungeonCtrl.instance.setAutoUserYuanli(!i.SpiritDungeonModel.instance.autoUse):0<s.instance.getItemCountById(13650001)?i.SpiritDungeonCtrl.instance.setAutoUserYuanli(!i.SpiritDungeonModel.instance.autoUse):o.instance.addNotice("背包中没有元力丹",!0)},e=r,i.SpiritDungeonUtil=e}(modules=modules||{}),function(t){var e,i,n,s,o;function a(){return null!==i&&i.apply(this,arguments)||this}e=t.spiritDungeon||(t.spiritDungeon={}),n=ui.SpiritLayerItemUI,s=t.config.MonsterResCfg,i=n,__extends(a,i),a.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.bgImg.skin=t?"spirit_dungeon/btn_bosszhijia_1.png":"spirit_dungeon/btn_bosszhijia_2.png",this.bgImg.y=t?0:8},a.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=s.instance.getCfgById(t[4]);this.headImg.skin="assets/icon/monster/"+(e[3]||310001)+".png",this.layerTxt.text=t[2],this.modeTxt.text=0===t[6]?"和平":"混乱",this.modeImg.skin=0===t[6]?"common/txtbg_common_txtbg4.png":"common/txtbg_common_txtbg2.png"},o=a,e.SpiritLayerItem=o}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.spiritDungeon||(t.spiritDungeon={}),n=ui.TeamCopyInviteItemUI,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.inviteHandler)},o.prototype.inviteHandler=function(){this._data&&e.SpiritDungeonCtrl.instance.inviteYuanshenMember(this._data[2])},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this.headIcon.setInfo(t[6],t[5],t[7]),this.nameTxt.text=t[3],this.fightTxt.text="战力："+CommonUtil.bigNumToString(t[8])},s=o,e.SpiritTeamInviteItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.spiritDungeon||(t.spiritDungeon={}),n=ui.SpiritTeamItemUI,i=n,__extends(o,i),o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.reqBtn,this,this.reqHandler)},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this.headIcon.setInfo(t[3],t[7],t[8]),this.leaderTxt.text="队长："+t[2],this.numTxt.text="队伍人数："+t[5]+"/"+t[6],this.fightTxt.text="队伍战力："+CommonUtil.bigNumToString(t[4])},o.prototype.reqHandler=function(){e.SpiritDungeonCtrl.instance.joinYuanshenTeam(this._data[0],1),e.SpiritDungeonCtrl.instance.searchYuanshenTeam()},s=o,e.SpiritTeamItem=s}(modules=modules||{}),function(t){var s,o,a,e,r,l,i;function n(){return o.call(this)||this}s=t.sprint_rank||(t.sprint_rank={}),a=t.config.GetWayCfg,e=t.common.CustomClip,r=t.discountGift.discountGiftModel,l=t.config.SprintRankCfg,o=ui.SprintItemUI,__extends(n,o),n.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this._sourceBtn,this,this.getOpenPlaneId)},n.prototype.initialize=function(){o.prototype.initialize.call(this),this.createEffect()},n.prototype.setData=function(t){if(o.prototype.setData.call(this,t),t){var e;this._getWayId=t.id,(e=a.instance.getCfgById(this._getWayId))&&(this._sourceBtn.skin="assets/icon/ui/get_way/"+e[1]+".png",this._sourceBtnBg.skin="assets/icon/ui/get_way/btn_ydrk_bg.png",this._desTxt.text=e[2]),this._rankCfg=l.instance.getCfgsByGrade(t.type,0);var i=this._rankCfg[12];if(this._getWayId==i[1]){var n=r.instance.curCount;0<r.instance.maxCount-n?(this._taskList=s.SprintRankTaskModel.instance.taskList,this._taskList&&this._taskList[t.type]&&0==this._taskList[t.type][4]&&(this._eff.play(),this._eff.visible=!0,s.SprintRankTaskModel.instance._isFristOpen&&!this._rp&&this.setRP())):this._eff.visible=!1}}},n.prototype.getOpenPlaneId=function(){var t=a.instance.getCfgById(this._getWayId)[3][0],e=this._rankCfg[12];this._getWayId==e[1]&&this._rp&&(s.SprintRankTaskModel.instance._isFristOpen=!1,this._rp.destroy()),WindowManager.instance.openByActionId(t)},n.prototype.setRP=function(){this._rp=new Laya.Image,this.addChild(this._rp),this._rp.skin="common/image_common_xhd.png",this._rp.x=this._sourceBtn.x+73},n.prototype.createEffect=function(){this._eff=new e,this._sourceBtn.addChild(this._eff),this._eff.frameUrls=["left_top/eff_0.png","left_top/eff_2.png","left_top/eff_4.png","left_top/eff_6.png","left_top/eff_8.png","left_top/eff_10.png","left_top/eff_12.png","left_top/eff_14.png"],this._eff.durationFrame=7,this._eff.play(),this._eff.pos(1,1,!0),this._eff.scale(1.2,1.2),this._eff.loop=!0,this._eff.visible=!1},i=n,s.SprintRankGetWayItem=i}(modules=modules||{}),function(t){var l,h,e,i,c,s,n,p,u,o;function a(){return null!==h&&h.apply(this,arguments)||this}l=t.stone||(t.stone={}),e=ui.StoneDialogUI,i=t.common.CustomList,c=t.config.StoneCfg,s=t.bag.BagModel,n=t.bag.BaseItem,p=t.config.AttrItemCfg,u=t.common.AttrUtil,h=e,__extends(a,h),a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._nameArr=this.destroyElement(this._nameArr),this._valueArr=this.destroyElement(this._valueArr),h.prototype.destroy.call(this,t)},a.prototype.initialize=function(){h.prototype.initialize.call(this),this.scale(.8,.8),this._list=new i,this._list.scrollDir=1,this._list.width=337,this._list.height=300,this._list.hCount=1,this._list.itemRender=l.StoneItem,this._list.x=38,this._list.y=122,this.addChild(this._list),this._nameArr=new Array,this._valueArr=new Array,this._nameArr[0]=this.nameTxt_1,this._nameArr[1]=this.nameTxt_2,this._valueArr[0]=this.valueTxt_1,this._valueArr[1]=this.valueTxt_2,this._isUpGrade=!1},a.prototype.onEvt=function(){h.prototype.onEvt.call(this),this.onAutoEvt(Laya.stage,"mousedown",this,this.stageClickHandler),this.onAutoGlobalEvt("BAG_UPDATE",this,this.updataBagValue),this.onAutoGlobalEvt("STONE_UPDATA",this,this.isUpGrade),this.onAutoGlobalEvt("DESTORY_DIA",this,this.close)},a.prototype.stageClickHandler=function(t){t.target instanceof n||t.target instanceof l.StoneItem||t.target===this._list||t.target===this||this.close()},a.prototype.setOpenParam=function(t){h.prototype.setOpenParam.call(this,t),0==t||1==t||3==t?this.pos(395,700):this.pos(26,700);var e=l.StoneModel.instance.getValueByPart().get(10*l.StoneModel.instance.currEqiup+l.StoneModel.instance.currStonePic),i=c.instance.getCfgById(e);if(i)for(var n=i[8],s=0,o=.5*n.length;s<o;s++){var a=p.instance.getCfgById(n[2*s]),r=n[2*s+1];if(this._nameArr[s].text=a[1],this._valueArr[s].text=a[2]?u.formatFloatNum(r)+"%":Math.round(r)+"",2===s)break}else this._valueArr[0].text="0",this._valueArr[1].text="0";this.isUpGrade()},a.prototype.updataBagValue=function(){var t=new Array;if(0==l.StoneModel.instance.currStonePic)t=s.instance.getItemsByBagId(2).concat();else for(var e=0;e<l.StoneModel.instance.getStonesByType(l.StoneModel.instance.currStonePic).length;e++)t.push(l.StoneModel.instance.getStonesByType(l.StoneModel.instance.currStonePic)[e]);if(t=t.sort(l.StoneModel.instance.sortStones),this._isUpGrade){var i=l.StoneModel.instance.getValueByPart().get(10*l.StoneModel.instance.currEqiup+l.StoneModel.instance.currStonePic),n=c.instance.getCfgById(i)[1];t.unshift([n,0,0,null])}this._list.datas=t},a.prototype.isUpGrade=function(){this._isUpGrade=!1;var t=l.StoneModel.instance.getValueByPart().get(10*l.StoneModel.instance.currEqiup+l.StoneModel.instance.currStonePic);if(t){if(this.attsBox.visible=!0,this.tipTxt.visible=!1,l.StoneModel.instance.isNowParHasUp(t)&&(this._isUpGrade=!0),this._isUpGrade){var e=void 0;e=(e=0==l.StoneModel.instance.currStonePic&&l.StoneModel.instance.vipIsOpen?s.instance.getItemsByBagId(2).concat():l.StoneModel.instance.getStonesByType(c.instance.getCfgById(t)[3]).concat()).sort(l.StoneModel.instance.sortStones);for(var i=0;i<e.length;i++)if(c.instance.getCfgById(e[i][0])[5]>c.instance.getCfgById(t)[5]){this._isUpGrade=!1;break}}l.StoneModel.instance.virtualStone=this._isUpGrade}else this.attsBox.visible=!1,this.tipTxt.visible=!0;this.hintTxt.visible=this._isUpGrade,this.updataBagValue()},o=a,l.StoneDialog=o}(modules=modules||{}),function(t){var c,e,i,n,p,u,d,y,s;function o(){return null!==e&&e.apply(this,arguments)||this}c=t.stone||(t.stone={}),i=ui.StoneItemUI,n=t.bag.BaseItem,p=t.common.CommonUtil,u=t.config.StoneCfg,d=t.config.AttrItemCfg,y=t.common.AttrUtil,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),this._nameArr=new Array,this._valueArr=new Array,this._nameArr[0]=this.typeTxt_1,this._nameArr[1]=this.typeTxt_2,this._valueArr[0]=this.valueTxt_1,this._valueArr[1]=this.valueTxt_2,this._ico=new n,this._ico.needTip=!1,this._ico.nameVisible=!1,this._ico.pos(10,10),this.addChild(this._ico)},o.prototype.destroy=function(){this._nameArr=this.destroyElement(this._nameArr),this._valueArr=this.destroyElement(this._valueArr),this._ico=this.destroyElement(this._ico),e.prototype.destroy.call(this)},o.prototype.inlay=function(){var t=c.StoneModel.instance.getValueByPart().get(10*c.StoneModel.instance.currEqiup+c.StoneModel.instance.currStonePic);c.StoneModel.instance.inlay=t?1:0,Channel.instance.publish(2097753,[c.StoneModel.instance.currEqiup,c.StoneModel.instance.currStonePic,this._value[2]]),GlobalData.dispatcher.event("DESTORY_DIA")},o.prototype.upGrade=function(){Channel.instance.publish(2097754,[c.StoneModel.instance.currEqiup,c.StoneModel.instance.currStonePic]),GlobalData.dispatcher.event("DESTORY_DIA")},o.prototype.setData=function(t){this._value=t;var e=u.instance.getCfgById(t[0]);this.arrImg.visible=!1,this.dotImg.visible=!1,this._ico.dataSource=t,this.nameTxt.color=p.getColorById(t[0]);var i=c.StoneModel.instance.getValueByPart().get(10*c.StoneModel.instance.currEqiup+c.StoneModel.instance.currStonePic),n=null;if(i&&(n=u.instance.getCfgById(i)[1]),t[0]===n&&c.StoneModel.instance.virtualStone)this.onAutoClick(this,this,this.upGrade),this.nameTxt.text="升为"+e[5]+"级仙石",this.addChild(this.arrImg),this.arrImg.visible=!0,this.dotImg.visible=!1;else{this.onAutoClick(this,this,this.inlay),this.nameTxt.text=e[2].toString();var s=u.instance.getCfgById(i);this.dotImg.visible=!s||e[5]>s[5]}for(var o=e[8],a=0,r=.5*o.length;a<r;a++){var l=d.instance.getCfgById(o[2*a]),h=o[2*a+1];if(this._nameArr[a].text=l[1],this._valueArr[a].text=l[2]?y.formatFloatNum(h)+"%":Math.round(h)+"",2===a)break}},s=o,c.StoneItem=s}(modules=modules||{}),function(t){var e,i,a,r,l,n,h,s,o,c;function p(){this._partArr=[],this._currEqiup=1,this._currStonePic=1,this._esleValue=[0,!1,0,0],this._dic=new i,this._virtualStone=!1,this._oneKeyPit=[],this._inlay=0}e=t.stone||(t.stone={}),i=Laya.Dictionary,a=t.common.CommonUtil,r=t.bag.BagModel,l=t.config.StoneCfg,n=t.player.PlayerModel,h=t.redPoint.RedPointCtrl,s=t.vip.VipModel,o=t.config.PrivilegeCfg,Object.defineProperty(p,"instance",{get:function(){return this._instance=this._instance||new p},enumerable:!0,configurable:!0}),p.prototype.updataValue=function(t){this._esleValue=[t[1],t[2],t[3],t[4]],this._dic.clear();for(var e=t[0],i=0;i<e.length;i++)for(var n=e[i][1],s=0;s<n.length;s++){var o=10*e[i][0]+n[s][1];this._dic.set(o,n[s][0])}GlobalData.dispatcher.event("STONE_UPDATA"),this.setDotDis()},p.prototype.getStonesByType=function(t){var e=r.instance.getItemsByBagId(2);if(e){for(var i=new Array,n=0,s=e.length;n<s;n++){var o=e[n];a.getStoneTypeById(o[0])===t&&i.push(o)}return i}},p.prototype.sortStones=function(t,e){var i=l.instance.getCfgById(t[0]),n=l.instance.getCfgById(e[0]);return i[5]===n[5]?i[3]-n[3]:n[5]-i[5]},p.prototype.getValueByPart=function(){return this._dic},Object.defineProperty(p.prototype,"otherValue",{get:function(){return this._esleValue},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"currEqiup",{get:function(){return this._currEqiup},set:function(t){this._currEqiup=t,GlobalData.dispatcher.event("STONE_UPDATA")},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"currStonePic",{get:function(){return this._currStonePic},set:function(t){this._currStonePic=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"vipIsOpen",{get:function(){var t=s.instance.vipLevel;return!!o.instance.getVipInfoByLevel(t,9)},enumerable:!0,configurable:!0}),p.prototype.setDotDis=function(){this.updateEquip(),this.judge()},Object.defineProperty(p.prototype,"virtualStone",{get:function(){return this._virtualStone},set:function(t){this._virtualStone=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"oneKeyPit",{get:function(){return this._oneKeyPit},set:function(t){this._oneKeyPit=[],this._oneKeyPit=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"inlay",{get:function(){return this._inlay},set:function(t){this._inlay=t},enumerable:!0,configurable:!0}),p.prototype.updateEquip=function(){var t=n.instance.equipsDic;if(t)for(var e=0,i=t.keys.length;e<i;e++)this._partArr[e]=t.keys[e]},p.prototype.isNowParHasUp=function(t){var e=t%1e4>>0;if(20<=e)return!1;var i=0;do{var n=l.instance.getLastId(t);i+=r.instance.getItemCountById(t)*(1<<(t%1e4>>0)),t=n}while(-1!=t);return 1<<e<=i},p.prototype.judge=function(){if(0!=this._partArr.length)if(this._esleValue[1])h.instance.setRPProperty("stoneRP",!0);else{for(var t=0,e=this._partArr.length;t<e;t++)for(var i=0;i<5;i++){var n=this._dic.get(10*this._partArr[t]+i);if(null==n){if(0==i&&this.vipIsOpen){for(var s=1;s<5;s++)if(0<this.getStonesByType(s).length)return void h.instance.setRPProperty("stoneRP",!0)}else if(0<this.getStonesByType(i).length)return void h.instance.setRPProperty("stoneRP",!0)}else{if(this.isNowParHasUp(n))return void h.instance.setRPProperty("stoneRP",!0);var o=this.getStonesByType(l.instance.getCfgById(n)[3]).concat();o=o.sort(this.sortStones.bind(this));for(var a=0;a<o.length;a++)if(l.instance.getCfgById(o[a][0])[5]>l.instance.getCfgById(n)[5])return void h.instance.setRPProperty("stoneRP",!0)}}h.instance.setRPProperty("stoneRP",!1)}else h.instance.setRPProperty("stoneRP",!1)},c=p,e.StoneModel=c}(modules=modules||{}),function(t){var s,e,i,o,a,n,r,l;function h(){return null!==e&&e.apply(this,arguments)||this}s=t.stone||(t.stone={}),i=ui.StonePitUI,o=t.config.StoneCfg,a=t.bag.BagModel,n=t.notice.SystemNoticeManager,r=t.player.PlayerModel,e=i,__extends(h,e),h.prototype.initialize=function(){e.prototype.initialize.call(this),this._equipsCount=0},h.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this,this,this.openStoneListAlert),this.onAutoGlobalEvt("STONE_UPDATA",this,this.updateView),this.onAutoGlobalEvt("PLAYER_EQUIPS_INITED",this,this.equipInitedHandler),this.onAutoGlobalEvt("PLAYER_WEAR_EQUIPS",this,this.equipInitedHandler)},h.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.equipInitedHandler()},h.prototype.updateView=function(){var t=s.StoneModel.instance.currEqiup,e=s.StoneModel.instance.getValueByPart().get(10*t+this._type);if(this.arrImg.visible=this.redImg.visible=!1,this.hintTxt.text="",e){this.iconImg.skin=CommonUtil.getIconById(e),this.addImg.visible=!1,this.nameTxt.text=o.instance.getCfgById(e)[2].toString(),this.nameTxt.color=CommonUtil.getColorById(e),this.txtBgImg.visible=!0;var i=void 0;i=(i=!this._type&&s.StoneModel.instance.vipIsOpen?a.instance.getItemsByBagId(2).concat():s.StoneModel.instance.getStonesByType(o.instance.getCfgById(e)[3]))&&i.sort(s.StoneModel.instance.sortStones);for(var n=0;n<i.length;n++)if(o.instance.getCfgById(i[n][0])[5]>o.instance.getCfgById(e)[5])return this.redImg.visible=!0,void(this.hintTxt.text="可替换");s.StoneModel.instance.isNowParHasUp(e)&&(this.arrImg.visible=!0,this.hintTxt.text="可升级")}else this.addImg.visible=!0,this.txtBgImg.visible=!1,this.iconImg.skin=null,!this._type&&s.StoneModel.instance.vipIsOpen?0<a.instance.getItemsByBagId(2).length&&(this.redImg.visible=!0,this.hintTxt.text="可镶嵌"):this._type||s.StoneModel.instance.vipIsOpen?0<s.StoneModel.instance.getStonesByType(this._type).length&&(this.redImg.visible=!0,this.hintTxt.text="可镶嵌"):this.addImg.visible=!1,this.nameTxt.text=""},h.prototype.openStoneListAlert=function(){if(this._equipsCount){if(s.StoneModel.instance.currStonePic=this._type,this._type){if(s.StoneModel.instance.getStonesByType(this._type).length<=0)return void n.instance.addNotice("当前无可操作的仙石",!0)}else{for(var t=0,e=1;e<5;e++)0<s.StoneModel.instance.getStonesByType(e).length&&t++;if(t<=0)return void n.instance.addNotice("当前无可操作的仙石",!0)}GlobalData.dispatcher.event("SELECT_PIT")}},h.prototype.equipInitedHandler=function(){this._equipsCount=r.instance.equipsDic.keys.length},Object.defineProperty(h.prototype,"type",{set:function(t){this._type=t,1==this._type||3==this._type?(this.nameTxt.anchorX=0,this.nameTxt.x=-6,this.nameTxt.align="left"):2==this._type||4==this._type?(this.nameTxt.anchorX=1,this.nameTxt.x=this.width+4,this.nameTxt.align="right"):(this.bgImg.visible=!1,this.txtBgImg.skin="stone/txtbg_xs_bg1.png")},enumerable:!0,configurable:!0}),l=h,s.StonePit=l}(modules=modules||{}),function(t){var r,e,l,i,n;function s(){return e.call(this)||this}r=t.susan_slade||(t.susan_slade={}),l=t.bag.BagUtil,i=t.soaring_singlePay.PayAndAwardsItem,e=i,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("SUSANSLADE_UPDATA_VIEW",this,this.updataView)},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this.Data=t,this.updataView()},s.prototype.sureBtnHandler=function(){var t=r.SusanSladeModel.instance.getState(this.Data);if(Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111),this.close();else{var e=[],i=this.Data[0],n=r.SusanSladeModel.instance.getCfgById(i)[3];if(n){for(var s=0,o=n.length;s<o;s++){var a=n[s];e.push([a[0],a[1],0,null])}l.canAddItemsByBagIdCount(e)&&r.SusanSladeCtrl.instance.GetSinglePaySanshengAward(this.Data[0])}}},s.prototype.updataView=function(){var t=1,e=this.Data[0],i=r.SusanSladeModel.instance.getCfgById(e);i&&(t=i[1]),this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励";var n=r.SusanSladeModel.instance.getState(this.Data);this.overImg.visible=this.sureBtn.visible=this.receivedImg.visible=!1,this._btnClip.visible=!1,this.scheduleText.text="("+r.SusanSladeModel.instance.money+"/"+t+")";var s=r.SusanSladeModel.instance.money>=t?"#168a17":"#FF3E3E";if(this.scheduleText.color=s,r.SusanSladeModel.instance.boolIsOpen())switch(n){case 0:this.showGotoRecharge();break;case 1:this.showCanReceive();break;case 2:this.showReceived()}else this.showOver();var o=i[3];this.showRewards(o),this.showCanBuyHTML(i,n)},s.prototype.showCanBuyHTML=function(t,e){var i=this.Data,n=i[2]-i[1],s=t[4],o=s-n,a=o+"/"+s;this.CanBuyHTML.innerHTML=0<o?"活动次数:<span style='color:#16ba17'>"+a+"</span>":"活动次数:<span style='color:#FF3e3e'>"+a+"</span>",this.CanBuyHTML.visible=!(2==e||s<=1)},n=s,r.SusanSladeItem=n}(modules=modules||{}),function(e){var t,s,o,i;function n(){this._state=!1,this._cuyType=1,this._totalMoney=0,this._rewardList=new Array,this._restTm=0,this._endFlag=1}t=e.susan_slade||(e.susan_slade={}),s=e.redPoint.RedPointCtrl,o=e.funcOpen.FuncOpenModel,Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cuyType",{get:function(){return this._cuyType},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endFlag",{get:function(){return this._endFlag},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),n.prototype.pushData=function(t){t&&(this._state=t[0],this._restTm=t[1],this._rewardList=t[2],this._money=t[3],this.modelSort(),this.setRP(),GlobalData.dispatcher.event("SUSANSLADE_UPDATA_VIEW"))},n.prototype.getState=function(t){var e=0,i=t[0],n=t[2]-t[1],s=t[1],o=this.getCfgById(i);if(o){var a=o[4];0<a&&(0<s?e=1:a<=n&&(e=2))}return e},n.prototype.getCfgById=function(t){for(var e=GlobalData.getConfig("single_pay_sansheng"),i=0;i<e.length;i++)if(e[i][0]==t)return e[i]},n.prototype.boolRewards=function(t){for(var e=this._rewardList.length,i=0;i<e;i++)if(t==this._rewardList[i][0])return!0;return!1},n.prototype.modelSort=function(){for(var i=this,t=[],e=[],n=[],s=this._rewardList.length,o=0;o<s;o++){var a=this._rewardList[o];switch(this.getState(a)){case 0:t.push(a);break;case 1:e.push(a);break;case 2:n.push(a)}}function r(t,e){return i.getMoney(t)-i.getMoney(e)}t.sort(r),e.sort(r),n.sort(r),this._rewardList=e.concat(t).concat(n)},n.prototype.getMoney=function(t){var e=t[0];return this.getCfgById(e)[1]},n.prototype.setRP=function(){for(var t=o.instance.getFuncIsOpen(295),e=this._rewardList.length,i=!1,n=0;n<e;n++)if(0<this._rewardList[n][1]){i=!0;break}s.instance.setRPProperty("susanSladeRP",t&&i)},n.prototype.boolIsOpen=function(){return GlobalData.serverTime<this._restTm&&this._state},n.prototype.setActionOpen=function(){var t=this._state?1:2;e.funcOpen.FuncOpenModel.instance.setActionOpen(295,t)},i=n,t.SusanSladeModel=i}(modules=modules||{}),function(h){var t,e,i,n,s;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameStrs=["","盟友","仙缘","战队成员"],t._level=0,t}t=h.teamBattle||(h.teamBattle={}),i=ui.TeamCopyAskItemUI,n=h.teamInvite.TeamInviteModel,e=i,__extends(o,e),o.prototype.initialize=function(){e.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.txt,"#4C5E8A","SimHei",24)},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.canBtn,this,this.canBtnHandler),this.onAutoClick(this.cantBtn,this,this.cantBtnHandler)},o.prototype.setData=function(t){this._info=t,this._teamId=t[1];var e=t[5],i=t[6],n=t[7];this._level=t[9],this.headIcon.setInfo(i,e,n);var s=t[3];this._sceneId=this._info[4];var o,a=CommonUtil.formatHtmlStrByColor("#b15315",""+s),r=this.nameStrs[t[0]];o=h.common_group.CommonGroupUtil.getTextByType([h.common_group.CommonGroupUtil.getTeamTypeBySceneId(this._sceneId),this._level]);var l=CommonUtil.formatHtmlStrByColor("#b15315",o);this.txt.innerHTML=""+r+a+"邀您挑战"+l+",是否接受?"},o.prototype.canBtnHandlerFun=function(){var t=h.common_group.CommonGroupUtil.getActionOpenIdBySceneId(this._sceneId);h.common_group.CommonGroupUtil.chatHyperlinksClick(!1,!1,t,this._teamId,this._info[2],this._level)||this.answerInviteEx(),this.cantBtnHandler()},o.prototype.canBtnHandler=function(){var t=this;if(this._info)if(3201===this._sceneId){var e=h.forbiddenBoss.ForbiddenBossModel.instance.info;e&&1===e[3]?CommonUtil.alert("温馨提示","进入队伍后个人击杀数量将被清空，是否进入队伍？",[Handler.create(this,function(){t.canBtnHandlerFun()})],[]):this.canBtnHandlerFun()}else this.canBtnHandlerFun()},o.prototype.answerInviteEx=function(){var t=h.common_group.CommonGroupUtil.getTeamTypeBySceneId(this._sceneId);h.common_group.CommonGroupCtrl.instance.answerInviteEx(this._teamId,1,0,t,this._level),n.instance.curInvite=this._info},o.prototype.cantBtnHandler=function(){n.instance.delInvite(this._info)},s=o,t.TeamCopyAskItem=s}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.teamBattle||(t.teamBattle={}),n=ui.TeamCopyInviteItemUI,s=t.notice.SystemNoticeManager,o=t.rename.RenameModel,i=n,__extends(r,i),r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc)},r.prototype.setData=function(t){this._info=t,this._type=t[0],this._id=t[1];var e=t[2],i=t[5],n=t[6];this.headIcon.setInfo(i,e,n);var s=t[3],o=t[4];this.nameTxt.text=s,this.fightTxt.text="战力:"+CommonUtil.bigNumToString(o)},r.prototype.btnHandler=function(){if(t.common_group.CommonGroupUtil.thePlayerIsMyTeam(this._id))return s.instance.addNotice("你的仙缘已加入队伍",!0),void GlobalData.dispatcher.event("TEAM_COPY_CAN_INVITE_MEMBER_UPDATE");e.TeamBattleCtrl.instance.inviteJoinTeam(this._type,this._id)},r.prototype.updateName=function(){if(this._info){var t=o.instance.updateNameReply;t&&t[0]===this._info[1]&&(this.nameTxt.text=t[1])}},r.prototype.updateOcc=function(){if(this._info){var t=o.instance.updateOccReply;if(t&&t[0]===this._info[1]){var e=t[1],i=this._info[5],n=this._info[6];this.headIcon.setInfo(i,e,n)}}},a=r,e.TeamCopyInviteHalfItem=a}(modules=modules||{}),function(e){var i,t,n,s,o,a;function r(){return null!==t&&t.apply(this,arguments)||this}i=e.teamBattle||(e.teamBattle={}),n=ui.TeamCopyInviteItemUI,s=e.notice.SystemNoticeManager,o=e.rename.RenameModel,t=n,__extends(r,t),r.prototype.onEvt=function(){t.prototype.onEvt.call(this),this.onAutoClick(this.btn,this,this.btnHandler),this.onAutoGlobalEvt("RENAME_NAME_UPDATE",this,this.updateName),this.onAutoGlobalEvt("RENAME_OCC_UPDATE",this,this.updateOcc)},r.prototype.setData=function(t){this._info=t,this._type=t[0],this._id=t[1];var e=t[2],i=t[5],n=t[6];this.headIcon.setInfo(i,e,n);var s=t[3],o=t[4];this.nameTxt.text=s,this.fightTxt.text="战力:"+CommonUtil.bigNumToString(o)},r.prototype.btnHandler=function(){if(e.common_group.CommonGroupUtil.thePlayerIsMyTeam(this._id)){var t=2==this._type?"该队员已加入队伍":"该盟友已加入队伍";return s.instance.addNotice(t,!0),void GlobalData.dispatcher.event("TEAM_COPY_CAN_INVITE_MEMBER_UPDATE")}i.TeamBattleCtrl.instance.inviteJoinTeam(this._type,this._id)},r.prototype.updateName=function(){if(this._info){var t=o.instance.updateNameReply;t&&t[0]===this._info[1]&&(this.nameTxt.text=t[1])}},r.prototype.updateOcc=function(){if(this._info){var t=o.instance.updateOccReply;if(t&&t[0]===this._info[1]){var e=t[1],i=this._info[5],n=this._info[6];this.headIcon.setInfo(i,e,n)}}},a=r,i.TeamCopyInviteItem=a}(modules=modules||{}),function(t){var o,a,e;function i(){return a.call(this)||this}o=t.the_carnival||(t.the_carnival={}),a=ui.TheCanivalTaskAlertItemUI,__extends(i,a),i.prototype.setData=function(t){a.prototype.setData.call(this,t);var e=t,i=e[5],n=o.TheCarnivalModel.instance.taskList;this.taskName.text=e[10],this.rewardName.text="嗨点"+i+"点";for(var s=0;s<n.length;s++)if(this.dealDate(e[0])===this.dealDate(n[s][0]))if(e[0]===n[s][0]){if(2===n[s][1]){this.yjhBtn.visible=!0,this.taskName.color="#3a5385",this.rewardName.color="#3a5385";break}}else{if(e[0]<n[s][0]){this.yjhBtn.visible=!0,this.taskName.color="#3a5385",this.rewardName.color="#3a5385";break}this.taskName.color="#ff3e3e",this.rewardName.color="#ff3e3e",this.yjhBtn.visible=!1}else this.taskName.color="#ff3e3e",this.rewardName.color="#ff3e3e",this.yjhBtn.visible=!1},i.prototype.dealDate=function(t){return Math.floor(t/1e3)},e=i,o.TheCarnivalTaskAlertItem=e}(modules=modules||{}),function(t){var r,l,e;function i(){return l.call(this)||this}r=t.the_carnival||(t.the_carnival={}),l=ui.TheCarnivalItemUI,__extends(i,l),i.prototype.initialize=function(){l.prototype.initialize.call(this),this.createEffect()},i.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler)},i.prototype.onOpened=function(){l.prototype.onOpened.call(this),this._btnClip.play()},i.prototype.setData=function(t){l.prototype.setData.call(this,t),this._cfg=t,this._activityId=r.TheCarnivalModel.instance.id,this._riseGrade=this._cfg[1];var e=r.TheCarnivalModel.instance.getRisrNodeInfoByGrade(this._riseGrade);switch(this._riseList=e||[0,0],this.needHappyPoint.text=""+this._cfg[2],this._riseList[1]?this._riseList[1]:0){case 0:this.sureBtn.visible=!0,this.sureBtn.label="嗨点不足",this.sureBtn.disabled=!0,this.received.visible=!1,this.received.visible=!1,this._btnClip.visible=!1,this._btnClip.stop();break;case 1:this.sureBtn.visible=!0,this.sureBtn.label="领取",this.sureBtn.disabled=!1,this.received.visible=!1,this._btnClip.visible=!0,this._btnClip.play();break;case 2:this.sureBtn.visible=!1,this.received.visible=!0,this._btnClip.visible=!0,this._btnClip.stop();break;default:this.sureBtn.visible=!1,this.received.visible=!1,this._btnClip.visible=!1,this._btnClip.stop()}for(var i=[],n=this._cfg[3],s=0;s<.5*n.length;s++)i.push(n[2*s]);var o=i.length,a=[];for(a.push(this.carnivalBase1),a.push(this.carnivalBase2),a.push(this.carnivalBase3),s=0;s<3;s++)s<o?(a[s].visible||(a[s].visible=!0),a[s].dataSource=[n[2*s],n[2*s+1],0,null]):a[s].visible=!1},i.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",15),this._btnClip.scale(.8,.85),this._btnClip.pos(-5,-10),this._btnClip.play(),this._btnClip.visible=!1},i.prototype.sureBtnHandler=function(){r.TheCarnivalCtrl.instance.getKuanghaiAward(this._riseGrade)},i.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),l.prototype.destroy.call(this,t)},e=i,r.TheCarnivalItem=e}(modules=modules||{}),function(e){var t,i;function n(){this._openState=0,this._taskList=[],this._gradeList=[],this._id=0,this._exp=0,this._restTm=0}t=e.the_carnival||(e.the_carnival={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.getdateInfo=function(t){t?(this._openState=t[0],this._taskList=t[1],this._gradeList=t[2],this._id=t[3],this._exp=t[4],this._restTm=t[5]+GlobalData.serverTime):console.log("kuangHai Null Null Null Null Null Null Null "),this.setFuncState(),GlobalData.dispatcher.event("THE_CARNIVAL_UPDATE")},Object.defineProperty(n.prototype,"openState",{get:function(){return this._openState},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"taskList",{get:function(){return this._taskList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gradeList",{get:function(){return this._gradeList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"exp",{get:function(){return this._exp},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),n.prototype.singleTaskUpdate=function(t){for(var e=0;e<this._taskList.length;e++)this._taskList[e][0]==t[0][0]&&(this._taskList[e]=t[0]);0==this._taskList.length&&(this._taskList[0]=t[0]),this.setPayRewardRP(),GlobalData.dispatcher.event("THE_CARNIVAL_UPDATE")},n.prototype.getNodeInfoById=function(t){var e=null;if(this._taskList)for(var i=0,n=this._taskList.length;i<n;i++){var s=this._taskList[i];if(t===s[0]){e=s;break}}return e},n.prototype.getRisrNodeInfoByGrade=function(t){var e=null;if(this._gradeList)for(var i=0,n=this._gradeList.length;i<n;i++){var s=this._gradeList[i];if(t===s[0]){e=s;break}}return e},n.prototype.setPayRewardRP=function(){var t=this.getgRadeRP();e.redPoint.RedPointCtrl.instance.setRPProperty("theCarnivalRP",t)},n.prototype.getgRadeRP=function(){if(e.funcOpen.FuncOpenModel.instance.getFuncNeedShow(245)){if(null!=this.taskList)for(var t=0;t<this.taskList.length;t++)if(1==this.taskList[t][1])return!0;if(null!=this.gradeList)for(t=0;t<this.gradeList.length;t++)if(1==this.gradeList[t][1])return!0}return!1},n.prototype.setFuncState=function(){var t=1==this._openState?1:2;e.funcOpen.FuncOpenModel.instance.setActionOpen(244,t)},i=n,t.TheCarnivalModel=i}(modules=modules||{}),function(t){var a,r,e,l,i;function n(){return r.call(this)||this}a=t.the_carnival||(t.the_carnival={}),e=t.commonAlert.PropAlertUtil,l=t.config.TheCarnivalTaskCfg,r=ui.TheCarnivalTaskItemUI,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),this.createEffect()},n.prototype.onEvt=function(){r.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoClick(this.gotoBtn,this,this.gotoBtnHandler)},n.prototype.onOpened=function(){r.prototype.onOpened.call(this),this._btnClip.play()},n.prototype.setData=function(t){r.prototype.setData.call(this,t),this._cfg=t,this._taskId=this._cfg[0],this._nextId=this._cfg[1],this.themeDrawText.text=this._cfg[3],this.happyPointText.text="奖励嗨点:"+this._cfg[5],this._taskList=a.TheCarnivalModel.instance.getNodeInfoById(this._taskId)?a.TheCarnivalModel.instance.getNodeInfoById(this._taskId):[0,0,2333];var e=this._cfg[4],i=this._taskList[2];this.percentText.color=i<e?"#ff3e3e":"#168a17";for(var n=this._taskId,s=l.instance.getCfgById(n),o=s[4];s[1];)n++,o=(s=l.instance.getCfgById(n))[4];switch(this.percentText.text=o<i?"("+o+"/"+e+")":"("+i+"/"+e+")",this._taskList[1]){case 0:this.sureBtn.visible=!1,this.gotoBtn.visible=!0,this.received.visible=!1,this._btnClip.visible=!1,this._btnClip.stop();break;case 1:this.sureBtn.visible=!0,this.gotoBtn.visible=!1,this.received.visible=!1,this._btnClip.visible=!0,this._btnClip.play();break;case 2:this.sureBtn.visible=!1,this.gotoBtn.visible=!1,this.received.visible=!0,this._btnClip.visible=!1,this._btnClip.stop();break;default:this.sureBtn.visible=!1,this.gotoBtn.visible=!1,this._btnClip.visible=!1,this._btnClip.stop()}},n.prototype.sureBtnHandler=function(){a.TheCarnivalCtrl.instance.getKuanghaiTaskAward(this._taskId)},n.prototype.gotoBtnHandler=function(){var t=this._cfg[8][0];e.skipScene(t)},n.prototype.createEffect=function(){this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",15),this._btnClip.scale(.65,.64),this._btnClip.pos(-5,-8),this._btnClip.play(),this._btnClip.visible=!1},n.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),r.prototype.destroy.call(this,t)},i=n,a.TheCarnivalTaskItem=i}(modules=modules||{}),function(n){var s,e,t;function i(){return e.call(this)||this}s=n.thunderbolt_buy||(n.thunderbolt_buy={}),e=ui.ThunderboltBuyItemUI,__extends(i,e),i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("THUNDERBOLT_BUY_INFO_UPDATE",this,this.showUI)},Object.defineProperty(i.prototype,"selectEnable",{get:function(){return this._selectEnable=!0,this._selectEnable},enumerable:!0,configurable:!0}),i.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.btnGroup_1.selected=t},i.prototype.setData=function(t){e.prototype.setData.call(this,t),this._dates=t,this.showUI()},i.prototype.showUI=function(){if(this._dates){var t=this._dates[0],e=this._dates[4];this.imgRpImg1.visible=1===s.ThunderboltBuyCtrlModel.instance.stateTableById[t];var i=n.thunderbolt_equip.ThunderboltEquipModel.instance.getNameUtils(e-1);this.btnGroup_1.label=i}},t=i,s.ThunderboltBuyItem=t}(modules=modules||{}),function(l){var t,o,a,e;function h(){this.nowNum=0,this.stateTableById={},this.drawState=new Array}t=l.thunderbolt_buy||(l.thunderbolt_buy={}),o=l.redPoint.RedPointCtrl,a=l.funcOpen.FuncOpenModel,Object.defineProperty(h,"instance",{get:function(){return this._instance=this._instance||new h},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"maxNUm",{get:function(){var t=l.config.PrivilegeCfg.instance.getVipInfoByLevel(l.vip.VipModel.instance.vipLevel,15);return t?t[1]:0},enumerable:!0,configurable:!0}),h.prototype.getLTDirectBuyReply=function(t){if(this.dates=t,this.dates){this.drawState=h.instance.dates[4];var e=h.instance.dates[5];if(e=e||0,this.nowNum=this.maxNUm-e,this.drawState)for(var i=0;i<this.drawState.length;i++){var n=this.drawState[i];if(n){var s=n[0],o=n[1];this.stateTableById[s]=o}}}this.setActionOpen(),this.setRP(),GlobalData.dispatcher.event("THUNDERBOLT_BUY_INFO_UPDATE")},h.prototype.setActionOpen=function(){var t=!1;this.dates&&(t=0!=this.dates[2]);var e=t?1:2;l.funcOpen.FuncOpenModel.instance.setActionOpen(677,e)},h.prototype.setRP=function(){var t=a.instance.getFuncIsOpen(677),e=!1,i=!1;this.dates&&(i=0!=this.dates[2]);for(var n=0;n<this.drawState.length;n++){var s=this.drawState[n];if(s&&1===s[1]){e=!0;break}}o.instance.setRPProperty("thunderboltBuyRP",t&&e&&i)},h.prototype.getIndex=function(){var t=-1;if(h.instance.dates)for(var e=0;e<this.drawState.length;e++){var i=this.drawState[e];if(i){var n=i[0],s=h.instance.dates[3],o=l.config.LeitingDirectBuyCfg.instance.getCfgsByRoud(s);if(o)if(1===i[1]){for(var a=0;a<o.length;a++)if((r=o[a])&&r[0]===n)return a}else if(0===i[1])for(a=0;a<o.length;a++){var r=o[a];-1===t&&r&&r[0]===n&&(t=a)}}}return-1===t?0:t},e=h,t.ThunderboltBuyCtrlModel=e}(modules=modules||{}),function(t){var e,i,y,l,h,g,c,p,n;function s(){}e=t.thunderbolt_equip||(t.thunderbolt_equip={}),i=t.redPoint.RedPointCtrl,y=t.config.LeitingCuilianCfg,l=t.config.LeitingSuitEquipCfg,h=t.config.LeitingPowerCfg,g=t.bag.BagModel,c=t.config.LeitingSuitSkillCfg,p=t.config.LeitingSuitAttrCfg,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.leitingGetInfoReply=function(t){t&&(this.data=t,this.setRP(),GlobalData.dispatcher.event("THUNDERBOLT_EQUIP_SUIT_UPDATA"),GlobalData.dispatcher.event("THUNDERBOLT_EQUIP_QUENCHING_UPDATA"))},s.prototype.leitingUpdateCuilian=function(t){if(t){for(var e=t[0][0],i=this.data[0][0],n=0;n<i.length;n++)e===i[n][0]&&(i[n]=t[0]);this.setRP(),GlobalData.dispatcher.event("THUNDERBOLT_EQUIP_QUENCHING_UPDATA")}},s.prototype.leitingUpdateSuit=function(t){if(t){var e=this.data[0];e[3]=t[2],e[2]=t[1];for(var i=t[0][0],n=e[1],s=0;s<n.length;s++)if(i===n[s][0]){n[s]=t[0];break}this.setRP(),GlobalData.dispatcher.event("THUNDERBOLT_EQUIP_SUIT_UPDATA")}},s.prototype.setRP=function(){i.instance.setRPProperty("thunderboltEquipRP1",this.getQuenchingRP()),i.instance.setRPProperty("thunderboltEquipRP2",this.getSuitRP())},s.prototype.getHunderboltEquipQuenchingFight=function(){if(!this.data)return 0;for(var t=this.data[0][0],e=0,i=0;i<t.length;i++){for(var n=t[i],s=n[2],o=0;o<s.length;o++){var a=s[o],r=y.instance.getCfgByIDAndLevelAndType(n[0],a[1],a[0]);r&&(e+=r[4])}var l=h.instance.getCfgByIDAndLevel(n[0],n[1]);l&&(e+=l[4])}return Math.round(e)},s.prototype.getThunderboltEquipSuitFight=function(){if(!this.data)return 0;for(var t=this.data[0],e=t[1],i=0,n=0;n<e.length;n++)(s=l.instance.getCfgByIDAndLevel(e[n][0],e[n][1]))&&(i+=s[3]);var s,o=t[3][0];o&&(s=c.instance.getCfgByIDAndLevel(o[0],o[1]))&&(i+=s[3]);var a=t[2]-2;for(n=0;n<3;n++){var r=p.instance.getCfgById(a+n);r&&(i+=r[5])}return Math.round(i)},s.prototype.getType=function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n][0]===e+1)return t[n];return null},s.prototype.getSuitRPArr=function(){var t=[],e=this.data;if(!e)return t;for(var i=e[0][1],n=i.length,s=0;s<n;s++){var o=l.instance.getCfgByIDAndLevel(i[s][0],i[s][1]);if(l.instance.getCfgByIDAndLevel(i[s][0],i[s][1]+1)){var a=o[4];g.instance.getItemCountById(a[0])>=a[1]&&t.push(i[s][0])}}return t},s.prototype.getSuitRP=function(){return 0<this.getSuitRPArr().length},s.prototype.getQuenchingRPArr=function(){var t=[],e=this.data;if(!e)return t;for(var i=e[0][0],n=i.length,s=0;s<n;s++){for(var o=i[s][2],a=!1,r=0;r<o.length;r++){var l=o[r],h=y.instance.getCfgByIDAndLevelAndType(i[s][0],l[1],l[0]),c=y.instance.getCfgByIDAndLevelAndType(i[s][0],l[1]+1,l[0]),p=y.instance.getCfgByIDAndLevelAndType(i[s][0],0,o[r][0])[7],u=this.comparativeLogic(o,p);if(c&&u){var d=h[5];if(a=g.instance.getItemCountById(d[0])>=d[1])break}}a&&t.push(i[s][0])}return t},s.prototype.getQuenchingRP=function(){return 0<this.getQuenchingRPArr().length},s.prototype.comparativeLogic=function(t,e){if(!e&&e.length<=0)return!0;for(var i=0,n=e.length;i<n;i+=2)if(this.getType(t,e[i]-1)[1]<e[i+1])return!1;return!0},s.prototype.getNameUtils=function(t){return["雷霆之刃","雷霆之盔","雷霆之甲","雷霆之腕","雷霆之靴","雷霆之带","雷霆之链","雷霆之镯","雷霆之戒","雷霆之佩"][t]},s.prototype.getStageNameUtils=function(t){return["雷魂","雷魄","雷精","雷元","雷髓"][t]},s.prototype.getSingleSuit=function(t,e){for(var i=0,n=t.length;i<n;i++)if(e===t[i][0])return t[i]},n=s,e.ThunderboltEquipModel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.thunderbolt_equip||(t.thunderbolt_equip={}),n=t.common.CustomClip,i=ui.ThunderboltShowItemUI,__extends(o,i),o.prototype.setData=function(t){switch(void 0===t&&(t=[1,"lttz_",!1,10]),i.prototype.setData.call(this,t),this._partNum=t[0],this._typeStr=t[1],this._isMove=t[2],this._tweenNum=t[3],this.img2.skin="assets/others/thunderbolt/"+this._typeStr+this._partNum+".png",this._modeBaseImgTween&&this._modeBaseImgTween.stop(),this._modeBaseImgTween&&(this._modeBaseImgTween.stop(),this._modeBaseImgTween=null),this._anClip=this.destroyElement(this._anClip),this._liangClip=this.destroyElement(this._liangClip),this._partNum){case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 9:case 10:this._anClip=CommonUtil.creatEff(this,"lt_an",15),this.tweenBox.addChildAt(this._anClip,0),this._anClip.pos(0,0,!0),this._liangClip=CommonUtil.creatEff(this,"lt_ming",15),this.tweenBox.addChild(this._liangClip),this._liangClip.pos(0,0,!0)}n.thisPlay(this._anClip),n.thisPlay(this._liangClip),this.tweenBox.y=0,this._isMove?(this._modeBaseImgTween?this._modeBaseImgTween.to({y:this.tweenBox.y-this._tweenNum},1e3).yoyo(!0).repeat(99999999):this._modeBaseImgTween=TweenJS.create(this.tweenBox).to({y:this.tweenBox.y-this._tweenNum},1e3).yoyo(!0).repeat(99999999),this._modeBaseImgTween.start()):this._modeBaseImgTween&&this._modeBaseImgTween.stop()},o.prototype.close=function(){i.prototype.close.call(this),this.stopTween()},o.prototype.stopTween=function(){n.thisStop(this._anClip),n.thisStop(this._liangClip),this._modeBaseImgTween&&this._modeBaseImgTween.stop()},o.prototype.destroy=function(){this._anClip=this.destroyElement(this._anClip),this._liangClip=this.destroyElement(this._liangClip),this._modeBaseImgTween&&(this._modeBaseImgTween.stop(),this._modeBaseImgTween=null),i.prototype.destroy.call(this)},s=o,e.ThunderboltShowItem=s}(modules=modules||{}),function(t){var _,m,v,e,b,i,n;function s(){return null!==m&&m.apply(this,arguments)||this}_=t.treasure||(t.treasure={}),v=t.config.TreasureCfg,e=laya.ui.Image,b=t.bag.BagModel,i=laya.ui.Button,m=t.common.ItemRender,__extends(s,m),s.prototype.initialize=function(){m.prototype.initialize.call(this),this.btn=new i,this.btn.skin="common/btn_tongyong_1.png",this.btn.stateNum=2,this.btn.labelFont="SimHei",this.btn.labelSize=26,this.btn.labelColors="#4c5e8a,#9d5119",this.addChild(this.btn),this.scale(.8,.8),this.redRP=new e("common/image_common_xhd.png"),this.redRP.pos(128,-2),this.redRP.visible=!0,this.btn.addChild(this.redRP)},s.prototype.setData=function(t){switch(m.prototype.setData.call(this,t),t){case 0:this.btn.label="装备寻宝";var e=v.instance.getItemConditionByGrad(0,0),i=b.instance.getItemCountById(e[0]);this.redRP.visible=(0<i||_.TreasureModel.instance.fistMianFei(0))&&_.TreasureModel.instance.getKaiQi(0);break;case 1:this.btn.label="巅峰寻宝";var n=v.instance.getItemConditionByGrad(1,0),s=b.instance.getItemCountById(n[0]);this.redRP.visible=(0<s||_.TreasureModel.instance.fistMianFei(1))&&_.TreasureModel.instance.getKaiQi(1);break;case 2:this.btn.label="至尊寻宝";var o=v.instance.getItemConditionByGrad(2,0),a=b.instance.getItemCountById(o[0]);this.redRP.visible=(0<a||_.TreasureModel.instance.fistMianFei(2))&&_.TreasureModel.instance.getKaiQi(2);break;case 3:this.btn.label="符文寻宝";var r=v.instance.getItemConditionByGrad(3,0),l=b.instance.getItemCountById(r[0]);this.redRP.visible=(0<l||_.TreasureModel.instance.fistMianFei(3))&&_.TreasureModel.instance.getKaiQi(3);break;case 4:this.btn.label="法宝寻宝";var h=v.instance.getItemConditionByGrad(4,0),c=b.instance.getItemCountById(h[0]);this.redRP.visible=(0<c||_.TreasureModel.instance.fistMianFei(4))&&_.TreasureModel.instance.getKaiQi(4);break;case 6:this.btn.label="圣尊寻宝";var p=v.instance.getItemConditionByGrad(6,0),u=b.instance.getItemCountById(p[0]);this.redRP.visible=(0<u||_.TreasureModel.instance.fistMianFei(6))&&_.TreasureModel.instance.getKaiQi(6);break;case 7:this.btn.label="秘藏寻宝";var d=v.instance.getItemConditionByGrad(7,0),y=b.instance.getItemCountById(d[0]);this.redRP.visible=(0<y||_.TreasureModel.instance.fistMianFei(7))&&_.TreasureModel.instance.getKaiQi(7);break;case 8:this.btn.label="仙缘寻宝";var g=v.instance.getItemConditionByGrad(8,0),f=b.instance.getItemCountById(g[0]);this.redRP.visible=(0<f||_.TreasureModel.instance.fistMianFei(8))&&_.TreasureModel.instance.getKaiQi(8)}},s.prototype.setSelected=function(t){m.prototype.setSelected.call(this,t),this.btn.selected=t},n=s,_.TreasureButtonItem=n}(modules=modules||{}),function(t){var r,e,i,n,l,s;function o(){return null!==e&&e.apply(this,arguments)||this}r=t.treasure||(t.treasure={}),i=laya.events.Event,n=t.common.CustomClip,l=t.notice.SystemNoticeManager,e=ui.TreasureChangeItemUI,__extends(o,e),o.prototype.destroy=function(t){void 0===t&&(t=!0),this._upClip=this.destroyElement(this._upClip),e.prototype.destroy.call(this,t)},o.prototype.initialize=function(){e.prototype.initialize.call(this),this.triggerT.visible=!1,this._upClip=n.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._upClip),this._upClip.pos(158,92,!0),this._upClip.scale(.6,.6),this._upClip.visible=!1},o.prototype.setData=function(t){e.prototype.setData.call(this,t),this._cfg=t,this.setUI()},o.prototype.setUI=function(){if(this._cfg){var t=this._cfg[2],e=this._cfg[3];this._id=this._cfg[0],this._type=this._cfg[1],this.item.dataSource=[t[0],t[1],0,null],this.itemName.text=this.item._nameTxt.text,3===this._type?(this.currencyIcon.visible=!0,this.currencyIcon.skin=CommonUtil.getIconById(e[0]),this.currencyIcon.width=this.currencyIcon.height=40):this.currencyIcon.visible=!1,this.updateCoupon(),3==this._type?(this.priceTxt.text=""+e[1],this.priceTxt.x=197):(this.priceTxt.text=e[1]+"积分",this.priceTxt.x=160),this.updateHint()}},o.prototype.updateCoupon=function(){var t=this._cfg[3],e=r.TreasureModel.instance.getCoupon(this._type);3===this._type&&13250008===t[0]&&(e=CommonUtil.getPropCountById(13250008)),e<t[1]?(this.priceTxt.color=CommonUtil.getColorByQuality(5),this._upClip.visible=!1,this._upClip.stop()):(this.priceTxt.color="#4C5E8A",1==this._visible?(this._upClip.visible=!0,this._upClip.play()):(this._upClip.visible=!1,this._upClip.stop()))},o.prototype.onOpened=function(){e.prototype.onOpened.call(this),this._upClip.visible&&this._upClip.play(),this.setUI()},o.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.puchaseBtn.on(i.CLICK,this,this.puchaseHandler),this.trigger.on(i.CLICK,this,this.triggerHandler),GlobalData.dispatcher.on("BLESSING_UPDATE",this,this.updateCoupon),GlobalData.dispatcher.on("XUNBAO_HINTLIST",this,this.updateHint)},o.prototype.offEvt=function(){e.prototype.offEvt.call(this),this.puchaseBtn.off(i.CLICK,this,this.puchaseHandler),this.trigger.off(i.CLICK,this,this.triggerHandler),GlobalData.dispatcher.off("BLESSING_UPDATE",this,this.updateCoupon),GlobalData.dispatcher.off("XUNBAO_HINTLIST",this,this.updateHint)},o.prototype.puchaseHandler=function(){var e=this;if(this._cfg){var t=this._cfg[3],i=t[1],n=r.TreasureModel.instance.getCoupon(this._type);if(3===this._type&&13250008===t[0]&&(n=CommonUtil.getPropCountById(13250008)),i<=n){var s=Handler.create(this,function(t){r.TreasureCtrl.instance.exchange(e._type,e._id,t)}),o=[this._cfg[2][0],this._cfg[2][1],0,null],a=[3===this._type?[t[0]]:r.TreasureModel.names[this._type]+"寻宝积分",[n],[i],o,s];0===this.data[5]?WindowManager.instance.open(469,a):r.TreasureCtrl.instance.exchange(this._type,this._id,1)}else 3===this._type?13250008===t[0]?l.instance.addNotice("符晶不足",!0):l.instance.addNotice("符文碎片不足",!0):r.TreasureCtrl.instance.exchange(this._type,this._id,1)}},o.prototype.triggerHandler=function(){var t=r.TreasureModel.instance.getHintList(this._type);-1!=t.indexOf(this._id)?t.splice(t.indexOf(this._id),1):t.push(this._id),Channel.instance.publish(2099056,[this._type,t]),this.updateHint()},o.prototype.updateHint=function(){-1!=r.TreasureModel.instance.getHintList(this._type).indexOf(this._id)?this._visible=!0:this._visible=!1,0==this._visible?(this.triggerT.visible=!1,this.triggerF.visible=!0):(this.triggerF.visible=!1,this.triggerT.visible=!0),this.updateCoupon()},s=o,r.TreasureChangeItem=s}(modules=modules||{}),function(t){var i,n,e,s,o;function a(){return null!==n&&n.apply(this,arguments)||this}i=t.treasure||(t.treasure={}),e=t.bag.BaseItem,s=laya.ui.Image,n=e,__extends(a,n),a.prototype.initialize=function(){n.prototype.initialize.call(this),this.needTip=!1,this._select=!1,this._selectImg=new s,this._selectImg.skin="common/image_common_dg.png",this._selectImg.pos(13,15),this._selectImg.visible=!0,this.addChild(this._selectImg),this.nameVisible=!0},a.prototype.setDataSource=function(t){n.prototype.setDataSource.call(this,t),this._cfg=t;var e=i.TreasureModel.instance.selectItem;this._select=this._selectImg.visible=t&&0<=e.indexOf(this._cfg)},a.prototype.clickHandler=function(){if(n.prototype.clickHandler.call(this),null!=this._cfg){var t=i.TreasureModel.instance.selectItem;if(0==this._select)this._select=!0,this._selectImg.visible=!0,t.push(this._cfg),i.TreasureModel.instance.selectItem=t;else{this._select=!1,this._selectImg.visible=!1;var e=t.indexOf(this._cfg);t.splice(e,1),i.TreasureModel.instance.selectItem=t}}},a.prototype.destroy=function(){this._selectImg=this.destroyElement(this._selectImg),this._cfg=null,n.prototype.destroy.call(this,!0)},o=a,i.TreasureItem=o}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.treasure||(t.treasure={}),i=t.common.ItemRender,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.text=new laya.html.dom.HTMLDivElement,this.text.width=487,this.height=20,this.addChild(this.text)},Object.defineProperty(s.prototype,"dataSource",{set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),s.prototype.setData=function(t){if(t){var e=t[0],i=t[1],n=CommonUtil.getColorById(i),s=CommonUtil.getNameByItemId(i);this.text.innerHTML="<span style='color:#4c5e8a;font-size: 20px'>天赐鸿福,</span><span style='color:rgb(13,121,255);font-size: 20px;'>"+e+"</span><span style='color:#4c5e8a;font-size: 20px'>获得了</span><span style='color:"+n+";font-size: 20px;'>"+s+"</span>"}},n=s,e.TreasureItemText=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.treasure||(t.treasure={}),i=t.common.ItemRender,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),this.text=new laya.html.dom.HTMLDivElement,this.text.width=487,this.height=20,this.addChild(this.text)},Object.defineProperty(s.prototype,"dataSource",{set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),s.prototype.setData=function(t){if(t){var e=t[0],i=t[1],n="<span style='color:#4c5e8a;font-size: 20px'>天赐鸿福,</span><span style='color:rgb(13,121,255);font-size: 20px;'>"+e+"</span><span style='color:#4c5e8a;font-size: 20px'>获得了</span><span style='color:"+CommonUtil.getColorById(i)+";font-size: 20px;'>"+CommonUtil.getNameByItemId(i)+" Lv."+CommonUtil.getRuneLvByItemId(i)+"</span>";this.text.innerHTML=n}},n=s,e.TreasureItemText1=n}(modules=modules||{}),function(c){var t,r,p,u,i,d,e,n;function l(){this.rebateList={},l._grade=0,l.names=["装备","巅峰","至尊","","法宝","","圣尊","秘藏","仙缘"],this.abnormalType=[6,7,8],this._xunBaoListIndex=[0,4,3,1,2,6,7,8],this.actionOpens=[92,93,94,95,91,0,882,883,892],this._selectItem=new Array,this._blessing=new Array,this._coupon=new Array,this._fistFlag=new Array,this._fistMianFei=new Array,this._selfBroadcast=new Array,this._svrBroadcast=new Array,this._hintList=new Array,this._redArr={},this.tipsDic=new e,this.tipsDic.set(6,!0),this.tipsDic.set(7,!0),this.tipsDic.set(8,!0)}t=c.treasure||(c.treasure={}),r=c.redPoint.RedPointCtrl,p=c.bag.BagModel,u=c.config.TreasureCfg,i=c.funcOpen.FuncOpenModel,d=c.config.ItemExCfg,e=Laya.Dictionary,Object.defineProperty(l,"instance",{get:function(){return this._instance=this._instance||new l},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"selectItem",{get:function(){return this._selectItem},set:function(t){this._selectItem=t},enumerable:!0,configurable:!0}),l.prototype.getBlessing=function(t){return this._blessing[t]},l.prototype.fistMianFei=function(t){return this._fistMianFei[t]},l.prototype.setXunbaoInfo=function(t,e,i,n,s){this._blessing[t]=e,this._coupon[t]=i,this._fistFlag[t]=n,this._fistMianFei[t]=s,this.setExchangeDotDic(),GlobalData.dispatcher.event("BLESSING_UPDATE"),this.panduianRp()},l.prototype.isMianFeiEnter=function(t){void 0===t&&(t=!1);for(var e=!1,i=this._xunBaoListIndex[0],n=0;n<this._xunBaoListIndex.length;n++){var s=this._xunBaoListIndex[n];if(e=l.instance.fistMianFei(s)&&l.instance.getKaiQi(s)){i=s;break}}if(!e&&!t)for(n=0;n<this._xunBaoListIndex.length;n++)if(s=this._xunBaoListIndex[n],this.getKaiQi(s)){var o=u.instance.getItemConditionByGrad(s,0);if(o&&0<p.instance.getItemCountById(o[0])){e=!0,i=s;break}}return[e,i]},l.prototype.getKaiQi=function(t){var e=92;switch(t){case 0:e=92;break;case 4:e=91;break;case 2:e=94;break;case 3:e=95;break;case 1:e=93;break;case 6:e=882;break;case 7:e=883;break;case 8:e=892}return!!i.instance.getFuncIsOpen(e)},l.prototype.panduianRp=function(){for(var t=0;t<this._xunBaoListIndex.length;t++){var e=this._xunBaoListIndex[t];if(this.getKaiQi(e)){var i=u.instance.getItemConditionByGrad(e,0);if(i){var n=p.instance.getItemCountById(i[0]),s=l.instance.fistMianFei(e);if(0<n||s)return void r.instance.setRPProperty("treasureRP",!0)}}}r.instance.setRPProperty("treasureRP",!1)},l.prototype.getCoupon=function(t){return this._coupon[t]?this._coupon[t]:0},l.prototype.getfistFlag=function(t){return this._fistFlag[t]?this._fistFlag[t]:0},Object.defineProperty(l.prototype,"restTime",{get:function(){return this._restTime},set:function(t){this._restTime=t+GlobalData.serverTime,GlobalData.dispatcher.event("TIME_LEFT")},enumerable:!0,configurable:!0}),l.prototype.getSvrBroadcast=function(t){return this._svrBroadcast[t]},l.prototype.setSvrBroadcast=function(t,e){this._svrBroadcast[t],this._svrBroadcast[t]=e,GlobalData.dispatcher.event("SEVER_BROADCAST_LIST")},l.prototype.getSelfBroadcast=function(t){var e=this._selfBroadcast[t];return e&&100<e.length&&e.splice(0,e.length-100),e=e||[]},l.prototype.setSelfBroadcast=function(t,e){this._selfBroadcast[t],this._selfBroadcast[t]=e,GlobalData.dispatcher.event("SELF_BROADCAST_LIST")},Object.defineProperty(l.prototype,"runXunbaoReply",{get:function(){return this._runXunBaoReply},set:function(t){this._runXunBaoReply=t,console.log("寻宝返回：   ",t),GlobalData.dispatcher.event("RUN_XUNBAO_REPLY")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"taskXunbao",{get:function(){return this._taskXunbaoList},set:function(t){this._taskXunbaoList=t,GlobalData.dispatcher.event("TASK_XUNBAO_LIST_REPLY")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"taskAllXunbao",{get:function(){return this._taskXunbaoAll},set:function(t){this._taskXunbaoAll=t,GlobalData.dispatcher.event("TASK_XUNBAO_ALL_REPLY")},enumerable:!0,configurable:!0}),l.prototype.getHintList=function(t){this._hintList||(this._hintList=[]);for(var e=0;e<this._hintList.length;e++)if(t==this._hintList[e][0])return this._hintList[e][1];return[]},l.prototype.setHintList=function(t){this._hintList=t,this.setExchangeDotDic(),GlobalData.dispatcher.event("XUNBAO_HINTLIST")},l.prototype.setExchangeDotDic=function(){for(var t=!1,e=0;e<this._hintList.length;e++){var i=this._hintList[e][0],n=this._hintList[e][1];this._redArr[i]=!1;for(var s=0;s<n.length;s++){var o=n[s],a=u.instance.getCfgByitemId(o);if(a){if(a[3][1]<=l.instance.getCoupon(a[1])){t=this._redArr[i]=!0;break}this._redArr[i]=!1}}}r.instance.setRPProperty("treasureExchangeRP",t)},l.prototype.getRedDot=function(){return this._redArr},Object.defineProperty(l.prototype,"xunBaoExchangeReply",{get:function(){return this._exchangeReply},set:function(t){this._exchangeReply=t,GlobalData.dispatcher.event("XUNBAO_EXCHANGE_REPLY"),GlobalData.dispatcher.event("XUNBAO_HINTLIST")},enumerable:!0,configurable:!0}),l.prototype.getTreasureCondition=function(t,e){if(void 0===e&&(e=0),-1===this.abnormalType.indexOf(t))return!1;var i=u.instance.getItemCfgByGrad(t,e);if(!i)return!1;var n,s=i[2],o=c.he_qu_xunbao_happy.HeQuXunBaoHappyModel.instance.getTypeByDiscount(t);n=1===o?s[1]:Math.round(i[5]*o);var a=p.instance.getItemCountById(s[0]);if(n<=a)return!1;var r=n-a,l=s[0],h=d.instance.getCfgById(l)[1];return c.config.StoreCfg.instance.getCfgByitemId(h)[8][1]*r>PlayerModel.instance.ingot},l.prototype.getIdByTreasureCondition=function(t,e){var i;switch(void 0===e&&(e=0),t){case 13550003:i=6;break;case 13550004:i=7;break;case 13550005:i=8;break;default:i=-1}return-1!==i&&this.getTreasureCondition(i,e)},n=l,t.TreasureModel=n}(modules=modules||{}),function(T){!function(a){var i,t=T.core.BaseViewEx,e=T.common.SimpleList,n=T.config.TreasureCfg,s=T.notice.SystemNoticeManager,r=T.common.CustomClip,o=(i=t,__extends(l,i),l.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),i.prototype.destroy.call(this,t)},l.prototype.initialize=function(){i.prototype.initialize.call(this),this.centerX=this.centerY=0,this._list=e.create(c,640,168),this._list.size(640,648),this._list.pos(40,322,!0),this.v.addChild(this._list),this._data=n.instance.getRebateTaskList(this._type)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView(),a.TreasureCtrl.instance.GetXunbaoRebateInfo(this._type)},l.prototype.onEvt=function(){var e=this;i.prototype.onEvt.call(this),this.onAutoClick(this.v.okBtn,this,this.okBtnHandler),this.onAutoGlobalEvt("TREASURE_REBATE_UPDATE",this,this.updateView),this.onAutoGlobalEvt("FUNC_OPEN_UPDATE",this,function(t){6===e._type&&-1<t.indexOf(884)&&e.updateView(),7===e._type&&-1<t.indexOf(885)&&e.updateView(),8===e._type&&-1<t.indexOf(893)&&e.updateView()})},l.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.updateTime)},l.prototype.updateView=function(){var o=this;this._data.sort(function(t,e){var i=a.TreasureModel.instance.rebateList[o._type]||[[],0,0],n=i[0],s=i[1];if(-1===n.indexOf(t[1])&&-1===n.indexOf(e[1])){if(t[2]<=s&&e[2]>s)return-1;if(t[2]>s&&e[2]<=s)return 1}else{if(-1===n.indexOf(t[1]))return-1;if(-1===n.indexOf(e[1]))return 1}return t[1]-e[1]}),this._list.datas=this._data,this.updateTime(),this.showUI()},l.prototype.updateTime=function(){Laya.timer.clear(this,this.updateTime);var t=a.TreasureModel.instance.rebateList[this._type]||[[],0,0];t[2]>GlobalData.serverTime?(this.v.activityText.text=CommonUtil.timeStampDDHHMMToHHMMSS(t[2]),this.v.activityText.color="#50ff28",Laya.timer.once(1e3,this,this.updateTime)):(this.v.activityText.text="活动已结束",this.v.activityText.color="#ff3e3e")},l.prototype.showUI=function(){this.v.okBtn.visible=!0,this.v.wanChengImg.visible=!1,T.money_cat.MoneyCatModel.instance.state?!T.halo.HaloModel.instance.isHalo()&&T.halo.HaloModel.instance.haloOpen?(this.v.tipsImg.skin="kuanghuan/txt_qmkh_06.png",this.v.tipsText.text="仙玉不够花？",this.v.tipsImg.pos(99,1053)):0==T.zhizun.ZhizunModel.instance.state?(this.v.tipsImg.skin="kuanghuan/txt_qmkh_01.png",this.v.tipsText.text="火速升级,首选特权卡",this.v.tipsImg.pos(99,1029)):T.fight_talisman.FightTalismanModel.instance.state?-1==T.gloves.GlovesModel.instance.state?(this.v.tipsImg.skin="kuanghuan/txt_qmkh_05.png",this.v.tipsText.text="战力成长慢",this.v.tipsImg.pos(85,1047)):(this.v.okBtn.visible=!1,this.v.wanChengImg.visible=!0,this.v.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.v.tipsText.text="战力成长慢",this.v.tipsImg.pos(76,1033)):(this.v.tipsImg.skin="kuanghuan/txt_qmkh_03.png",this.v.tipsText.text="战力成长慢",this.v.tipsImg.pos(76,1033)):(this.v.tipsImg.skin="kuanghuan/txt_qmkh_02.png",this.v.tipsText.text="元宝不够花？",this.v.tipsImg.pos(99,1029))},l.prototype.okBtnHandler=function(){0!=T.first_pay.FirstPayModel.instance.giveState?T.money_cat.MoneyCatModel.instance.state?!T.halo.HaloModel.instance.isHalo()&&T.halo.HaloModel.instance.haloOpen?WindowManager.instance.open(1493):0==T.zhizun.ZhizunModel.instance.state?WindowManager.instance.open(351):T.fight_talisman.FightTalismanModel.instance.state?-1==T.gloves.GlovesModel.instance.state&&WindowManager.instance.open(387):WindowManager.instance.open(379):WindowManager.instance.open(381):WindowManager.instance.open(118)},l);function l(){return null!==i&&i.apply(this,arguments)||this}a.TreasureRebateBasePanel=o;var h,c=(h=ui.XunBaoKuangHuanItemUI,__extends(p,h),p.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),h.prototype.destroy.call(this,t)},p.prototype.initialize=function(){h.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",26),this._btnClip=r.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-5,this.sureBtn.y-8,.8)},p.prototype.setData=function(t){h.prototype.setData.call(this,t);var e=CommonUtil.formatHtmlStrByColor("#168a17",t[2]+"次"),i="累计"+a.TreasureModel.names[t[0]]+"寻宝"+e+"可领取";this.StatementHTML.innerHTML=i;var n=a.TreasureModel.instance.rebateList[t[0]]||[[],0,0],s=n[1];this.scheduleText.text="("+s+"/"+t[2]+")",this.scheduleText.color=s<t[2]?"#ff3e3e":"#0ecf09";var o=CommonUtil.formatItemData(t[3]);this.list.dataSource=o,r.thisStop(this._btnClip),-1<n[0].indexOf(t[1])?(this.receivedImg.visible=!0,this.overImg.visible=this.goBtn.visible=this.sureBtn.visible=!1):n[2]<GlobalData.serverTime?(this.overImg.visible=!0,this.receivedImg.visible=this.goBtn.visible=this.sureBtn.visible=!1):s<t[2]?(this.goBtn.visible=!0,this.overImg.visible=this.receivedImg.visible=this.sureBtn.visible=!1):(this.sureBtn.visible=!0,this.overImg.visible=this.receivedImg.visible=this.goBtn.visible=!1,r.thisPlay(this._btnClip))},p.prototype.onEvt=function(){var t=this;h.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,function(){(a.TreasureModel.instance.rebateList[t.data[0]]||[[],0,0])[2]<GlobalData.serverTime?s.instance.addNotice("活动已结束"):a.TreasureCtrl.instance.GetXunbaoRebateReward(t.data[0],t.data[1])}),this.onAutoClick(this.goBtn,this,function(){WindowManager.instance.open(93,t.data[0])})},p.prototype.offEvt=function(){h.prototype.offEvt.call(this),r.thisStop(this._btnClip)},p);function p(){return null!==h&&h.apply(this,arguments)||this}a.TreasureRebateItem=c;var u,d=(u=o,__extends(y,u),y.prototype.initialize=function(){this._type=6,u.prototype.initialize.call(this),this.v.bgImg.skin="kuanghuan/image_xb_bg5.jpg"},y);function y(){return null!==u&&u.apply(this,arguments)||this}a.TreasureRebateShengZunPanel=d;var g,f=(g=o,__extends(_,g),_.prototype.initialize=function(){this._type=7,g.prototype.initialize.call(this),this.v.bgImg.skin="kuanghuan/image_xb_bg6.jpg"},_);function _(){return null!==g&&g.apply(this,arguments)||this}a.TreasureRebateMiZangPanel=f;var m,v=(m=o,__extends(b,m),b.prototype.initialize=function(){this._type=8,m.prototype.initialize.call(this),this.v.bgImg.skin="kuanghuan/image_xb_bg7.jpg"},b);function b(){return null!==m&&m.apply(this,arguments)||this}a.TreasureRebateMarryPanel=v}(T.treasure||(T.treasure={}))}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.treasure||(t.treasure={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0;var t=new Laya.Image;t.skin="treasure/iconbg_xb_hd.png",this.addChildAt(t,0),t.scale(.95,.95),t.pos(7,0),this.textObj=new Laya.Text,this.textObj.font="SimHei",this.textObj.fontSize=22,this.textObj.color="#3a5385",this.textObj.align="center",this.textObj.width=184,this.textObj.height=24,this.addChild(this.textObj),this.textObj.pos(-42,98,!0)},o.prototype.setDataSource=function(t){t=[t[0],0,0,null],i.prototype.setDataSource.call(this,t),this._nameTxt.visible=!1,this._qualityBg.visible=!1,this.isbtnClipIsPlayer=!1;var e=t[0];this.textObj.text=CommonUtil.getNameByItemId(e)+" Lv."+CommonUtil.getRuneLvByItemId(e),this.textObj.color=this._nameTxt.color},s=o,e.TreasureRuneItem=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.treasure||(t.treasure={}),i=ui.TreasureTalismanItemUI,__extends(s,i),s.prototype.setData=function(t){i.prototype.setData.call(this,t);var e=t;this.icon.skin=CommonUtil.getIconById(e,!1),this.nameTxt.color=CommonUtil.getColorById(e),this.nameTxt.text=CommonUtil.getItemCfgById(e)[1].toString()},s.prototype.onEvt=function(){},n=s,e.TreasureTalismanItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.isChange=!0,t}e=t.union_war||(t.union_war={}),i=ui.UnionDrowItemUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.parent.parent,"mousedown",this,this.itemDownHandler),this.onAutoEvt(this.parent.parent,"mouseup",this,this.itemUpHandler),this.onAutoEvt(this.parent.parent,"mousemove",this,this.itemMoveHandler)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._posX=this.box.x,this._isMove=!1},s.prototype.setData=function(t){if(i.prototype.setData.call(this,t),null===t)return this.visible=!1,void(this._date=null);this.visible=!0,this._isMove=!1,this.box.x=this._posX,this._order=t[0],this._date=t[1],this.isChange=3===this._date[4],this.box.visible=this.isChange,this.box1.visible=!this.isChange,this.updateUI()},s.prototype.updateUI=function(){this.rankText.skin="union_war/txt_xmzb_"+this._order+".png",this.visible=!0,this._isMove=!1,this.itemUpHandler()},s.prototype.itemDownHandler=function(){this._time=Browser.now(),this._isMove=!1,this.visible&&this.isChange&&this.mouseX>=this.box.x&&this.mouseX<=this.box.x+this.width&&this.mouseY>=this.box.y&&this.mouseY<=this.box.y+this.height&&(this._isMove=!0,this._downPosX=this.mouseX,GlobalData.dispatcher.event("MATE_TEAM_ENEMY_EXREPLY_Eff"))},s.prototype.itemUpHandler=function(){if(this._time=Browser.now(),this.isChange&&this._isMove&&this.visible){Laya.Point.TEMP.setTo(this.box.x,this._posX);var t=this.localToGlobal(Laya.Point.TEMP,!0);this.box.x=this._posX,this._isMove=!1,GlobalData.dispatcher.event("CHANGE_ODLER",[[this._order,this._date],t])}else this.box.x=this._posX,this._isMove=!1},s.prototype.itemMoveHandler=function(){if(this.visible)if(this.isChange&&this._isMove&&100<Browser.now()-this._time){var t=this.mouseX-this._downPosX;this.box.x=this._posX+t}else this.box.x=this._posX},s.prototype.close=function(){i.prototype.close.call(this),this._isMove=!1},s.prototype.destroy=function(){i.prototype.destroy.call(this)},n=s,e.UnionDorwItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),i=ui.UnionDrowItem1UI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this)},s.prototype.setData=function(t){if(i.prototype.setData.call(this,t),!t)return this.visible=!1,void(this._date=null);this.visible=!0,this._date=t,this.updateUI()},s.prototype.updateUI=function(){if(this._date){var t=this._date[0];this.tipsText.text="战力:"+CommonUtil.bigNumToString(t[5],!0),this.headIcon.setInfo(t[7],t[2],t[6]),this.headIcon.vipShowItem.setSVIPandVIP(t[11],t[10]),this.isJingXiangImg.visible=!1,this.visible=!0}else this.visible=!1},s.prototype.destroy=function(){this._date=null,i.prototype.destroy.call(this)},n=s,e.UnionDorwItem1=n}(modules=modules||{}),function(r){var l,n,t;function e(){return n.call(this)||this}l=r.union_war||(r.union_war={}),n=ui.UnionWarCentrTopItem1UI,__extends(e,n),e.prototype.initialize=function(){n.prototype.initialize.call(this),this._imgArr=[this.img1,this.img2,this.img3,this.img4,this.img5]},e.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_BATTLE_PACE",this,this.showUI)},e.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this._date=t,this._date){this.bgImg.x=0,this.bgImg.scaleX=1,this.bgImg.skin="union_war/image_xmz_bg10.png";for(var e=0;e<this._imgArr.length;e++){var i=this._imgArr[e];i&&(i.skin="union_war/icon_xmz_hgq.png")}this.showUI()}},e.prototype.showUI=function(){if(this._date){var t=this._date[1],e=r.config.FactionWarBlendCfg.instance.getBlendCfgById(14),i=e?e[1][0]:99999,n=l.UnionWarModel.instance.finalsScore1,s=l.UnionWarModel.instance.finalsFlags1;this.nameText.text=t,this.tipsText.text="积分:"+n+"/"+i;for(var o=0;o<this._imgArr.length;o++){var a=this._imgArr[o];a&&(a.visible=o+1<=s)}}},t=e,l.UnionWarCentrTopItem1=t}(modules=modules||{}),function(r){var l,n,t;function e(){return n.call(this)||this}l=r.union_war||(r.union_war={}),n=ui.UnionWarCentrTopItem2UI,__extends(e,n),e.prototype.initialize=function(){n.prototype.initialize.call(this),this._imgArr=[this.img1,this.img2,this.img3,this.img4,this.img5]},e.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_BATTLE_PACE",this,this.showUI)},e.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this._date=t,this._date){this.bgImg.x=0,this.bgImg.scaleX=1,this.bgImg.skin="union_war/image_xmz_bg11.png";for(var e=0;e<this._imgArr.length;e++){var i=this._imgArr[e];i&&(i.skin="union_war/icon_xmz_lgq.png")}this.showUI()}},e.prototype.showUI=function(){if(this._date){var t=this._date[1],e=r.config.FactionWarBlendCfg.instance.getBlendCfgById(14),i=e?e[1][0]:99999,n=l.UnionWarModel.instance.finalsScore2,s=l.UnionWarModel.instance.finalsFlags2;this.nameText.text=t,this.tipsText.text="积分:"+n+"/"+i;for(var o=0;o<this._imgArr.length;o++){var a=this._imgArr[o];a&&(a.visible=o+1<=s)}}},t=e,l.UnionWarCentrTopItem2=t}(modules=modules||{}),function(t){var e,i,n;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t._state=0,t._num=0,t}e=t.union_war||(t.union_war={}),i=ui.UnionWarCopyLeftItemUI,__extends(s,i),Object.defineProperty(s.prototype,"selectEnable",{get:function(){return this._selectEnable=!0,this._selectEnable},enumerable:!0,configurable:!0}),s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.isChange.visible=t},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this._state=t[0]?t[0]:0,this._num=t[1],this.tipsText.text=this._num+"分/秒",this.showUI()},s.prototype.showUI=function(){0===this._state?this.img.skin="union_war/icon_xmz_bq.png":this.img.skin=1===this._state?"union_war/icon_xmz_hq.png":"union_war/icon_xmz_lq.png"},n=s,e.UnionWarReadyCopyRightItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),n=t.player.PlayerModel,i=ui.UnionWarCopyPlayerItemUI,__extends(o,i),o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.xuanZeImg.visible=t},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._dates=t,this.xuanZeImg.visible=!1,t?this.showUI():this.visible=!1},o.prototype.showUI=function(){var t=this._dates;this.nameText.text=t[5][5];var e=t[5][13]/n.instance.fight;this.nameText.color=3<=e?CommonUtil.getColorByQuality(4):1.5<=e?CommonUtil.getColorByQuality(3):.8<=e?CommonUtil.getColorByQuality(2):CommonUtil.getColorByQuality(1)},s=o,e.UnionWarCopyPlayerItem=s}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),i=ui.UnionWarDuelGroupItemUI,__extends(s,i),Object.defineProperty(s.prototype,"selectEnable",{get:function(){return this._selectEnable=!0,this._selectEnable},enumerable:!0,configurable:!0}),s.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.isSelectionImg.visible=t},s.prototype.setData=function(t){if(i.prototype.setData.call(this,t),t)switch("number"==typeof t?t:t[0]){case 1:this.btn.skin="union_war/iconbg_xmz_tzz.png";break;case 2:this.btn.skin="union_war/iconbg_xmz_dzz.png";break;case 3:this.btn.skin="union_war/iconbg_xmz_xzz.png";break;case 4:this.btn.skin="union_war/iconbg_xmz_hzz.png"}},n=s,e.UnionWarDuelGroupItem=n}(modules=modules||{}),function(t){var v,e,b,i;function n(){return null!==e&&e.apply(this,arguments)||this}v=t.union_war||(t.union_war={}),b=t.common.AttrUtil,e=ui.UnionWarDuelItemUI,__extends(n,e),n.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.lBtn,this,this.btnHandler,[0]),this.onAutoClick(this.rBtn,this,this.btnHandler,[1])},n.prototype.setData=function(t){this._info=t,this.updateAll()},n.prototype.updateAll=function(){var t=this._info?this._info[0]:null,e=this._info?this._info[1]:null;this.stateNum=!t||0===t[1].length&&0===t[0].length||!e||0===e[1].length&&0===e[0].length||!e||0===t[1].length&&0<t[0].length||!e||0===e[1].length&&0<e[0].length,this.show(this.iconImg1,this.lNameTxt,this.lNumTxt,this.lPerTxt,this.lCountTxt,this.lMaskImg,this.lFlagImg,this.lBtn,this.lNullTxt,this.hidden_1,this.coinImg1,this.playerIngText1,this.hintTxt1,t),this.show(this.iconImg2,this.rNameTxt,this.rNumTxt,this.rPerTxt,this.rCountTxt,this.rMaskImg,this.rFlagImg,this.rBtn,this.rNullTxt,this.hidden_2,this.coinImg2,this.playerIngText2,this.hintTxt2,e)},n.prototype.show=function(t,e,i,n,s,o,a,r,l,h,c,p,u,d){var y=0;d?0===d[1].length&&0===d[0].length?(y=1,l.text="轮空"):0===d[1].length&&0!=d[0].length&&(y=2,l.text="仙盟已解散"):y=1,t.visible=e.visible=i.visible=n.visible=s.visible=r.visible=h.visible=c.visible=1!=y,l.visible=0!=y,u.visible=!1,u.text=2===y?"此场次不做竞猜":"轮空场次不做竞猜";var g=this.stateNum&&d&&0!=d[1].length&&0!=d[0].length;if(u.visible=g,p.visible=o.visible=a.visible=!1,1!==y){var f=d[0];e.text=f,n.text="赔率:"+b.formatFloatNum(d[5],!0),s.text="支持数:"+d[3],t.skin=CommonUtil.getFactionIcon(d[2]),n.visible=s.visible=!0;var _=d[6];2===y||1===y?r.visible=!1:1===_?(r.visible=!1,o.visible=!1,a.visible=!0,a.skin="peak_duel/txt_dfdf_sl.png"):-1===_?(r.visible=!1,o.visible=a.visible=!0,a.skin="peak_duel/txt_dfdf_fu.png"):(r.visible=!this.stateNum,o.visible=a.visible=!1);var m=v.UnionWarModel.instance.getState(!1);!0===r.visible&&m&&(r.visible=!1,p.visible=!0),i.text=""+d[4]}},n.prototype.btnHandler=function(t){if(this._info){0===t?this.lBtn:this.rBtn;var e=0===t?this._info[0][1]:this._info[1][1];v.UnionWarCtrl.instance.guessingFactionWar(e)}},i=n,v.UnionWarDuelItem=i}(modules=modules||{}),function(t){var e,i,n;function s(){return i.call(this)||this}e=t.union_war||(t.union_war={}),i=ui.UnionWarHtmlItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.StatementHTML,"#FFFFFF","SimHei",24),this.StatementHTML.style.lineHeight=30,this.StatementHTML.width=642},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoEvt(this.StatementHTML,"link",this,this.linkHandler)},s.prototype.setData=function(t){i.prototype.setData.call(this,t);try{this.StatementHTML.innerHTML=t||""}catch(t){console.log("html格式错误!!!")}this.height=this.StatementHTML.contextHeight},s.prototype.linkHandler=function(t){window.open(t)},n=s,e.UnionWarHtmlItem=n}(modules=modules||{}),function(t){var e,i;function n(){this.init()}e=t.config||(t.config={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._table={},this._cfgs=GlobalData.getConfig("scene_limittime");for(var t=0,e=this._cfgs.length;t<e;t++){var i=this._cfgs[t][0];this._table[i]=this._cfgs[t]}},n.prototype.getCfgById=function(t){return this._table[t]},i=n,e.SceneLimittimeCfg=i}(modules=modules||{}),function(O){var G,t,y,e;function F(){this.isTipsDorw=!0,this.teamer1=[],this.teamer2=[],this.score1=0,this.score2=0,this.hpPerTable={},this.hpPer=[],this.personScore=0,this.factionRank=0,this.factionScore=0,this.readyEndTime=0,this.turnNum=0,this.nextTurnTime=0,this.isSuoDi=!1,this.isMyTeamInFo=0,this.finalsScore1=0,this.finalsScore2=0,this.finalsFlags1=0,this.finalsFlags2=0,this.oldSelectTargetId=0,this.schedule=0,this.nextTime=0,this.leaderNameFaction="",this.leaderFactionID="",this.prestige=0,this.isMyFactinGroup=-1,this.xuQiuNum=0,this.maxXuQiu=3,this.objIds=[],this.isTipsBag=!0,this.tableCollection={},this.tableCollectionPosByOcc={},this.guessesTable={},this.totalGoldTableCfg={},this.totalGoldTable={},this.finalsTable={},this.battlesTableRank={},this.battlesTableVS={},this.battlesTable={},this.battlesTableFactionId=[],this.factionsDate=[],this.contentDate=[],this.tableBagItemDate={},this.logs=[],this.rankStr={},this.rankStr[1]={},this.rankStr[1][1]="union_war/txt_xmz_18.png",this.rankStr[1][2]="union_war/txt_xmz_20.png",this.rankStr[1][4]="union_war/txt_xmz_06.png",this.rankStr[1][8]="union_war/txt_xmz_05.png",this.rankStr[2]={},this.rankStr[2][1]="union_war/txt_xmz_5.png",this.rankStr[2][2]="union_war/txt_xmz_7.png",this.rankStr[2][4]="union_war/txt_xmz_6.png",this.rankStr[2][8]="union_war/txt_xmz_4.png",this.rankStr[3]={},this.rankStr[3][1]="union_war/txt_xmz_22.png",this.rankStr[3][2]="union_war/txt_xmz_24.png",this.rankStr[3][4]="union_war/txt_xmz_23.png",this.rankStr[3][8]="union_war/txt_xmz_21.png",this.rankStr[4]={},this.rankStr[4][1]="union_war/txt_xmz_9.png",this.rankStr[4][2]="union_war/txt_xmz_11.png",this.rankStr[4][4]="union_war/txt_xmz_10.png",this.rankStr[4][8]="union_war/txt_xmz_8.png",this.rankStr[0]={},this.rankStr[0][33]="union_war/txt_xmz_13.png",this.rankStr[0][41]="union_war/txt_xmz_13.png",this.rankStr[0][49]="union_war/txt_xmz_13.png",this.rankStr[0][65]="union_war/txt_xmz_13.png";for(var t=O.config.FactionWarBlendCfg.instance.getBlendCfgById(17)[1],e=O.config.FactionWarBlendCfg.instance.getBlendCfgById(18)[1],i=0;i<e.length;i+=9){var n=e[i],s=e[i+1],o=e[i+2],a=e[i+3],r=e[i+4],l=e[i+5],h=e[i+6],c=e[i+7];this.tableCollection[n]=[s,o,a,r,l,h,c],this.tableCollectionPosByOcc[a]=[s,o,h,c,n],this.tableCollectionPosByOcc[r]=[s,o,h,c,n],this.tableCollectionPosByOcc[l]=[s,o,h,c,n]}this.rewardArrTable=[];var p=0,u=[1,2,3,5,6,7,9,10,11,13,14,15],d=O.config.FactionWarRankCfg.instance.getArrCfg();for(i=0;i<=15;i++)if(-1!=u.indexOf(i)){var y=d[i];if(y){var g=y[1][5],f=y[1][6],_=this.getItems(g),m=this.getItems(f);_.unshift([95330001,t[3],0,null]),m.unshift([95330001,t[4],0,null]),this.rewardArrTable[p]=[],this.rewardArrTable[p].push(_),this.rewardArrTable[p].push(m),p++}}var v=O.config.FactionWarBlendCfg.instance.getBlendCfgById(9)[1],b=O.config.FactionWarBlendCfg.instance.getBlendCfgById(10)[1],T=new Array;for(i=0;i<v.length;i+=2){a=v[i];var I=v[i+1];T.push([a,I,0,null])}var C=new Array;for(i=0;i<b.length;i+=2){a=b[i],I=b[i+1];C.push([a,I,0,null])}this.rewardArrTable[p]=[],this.rewardArrTable[p].push(T),this.rewardArrTable[p].push(C);var x=O.config.FactionWarBlendCfg.instance.getBlendCfgById(13)[1];for(i=0;i<x.length;i+=4){a=x[i];var B=x[i+1],S=x[i+2];I=x[i+3];this.totalGoldTableCfg[a]=[B,S,I]}this.moBaiMaxNum=O.config.FactionWarBlendCfg.instance.getBlendCfgById(4)[1][0],this.rewardArrJoinArray=[];var M=O.config.FactionWarBlendCfg.instance.getBlendCfgById(30)[1];for(i=0;i<M.length;i+=3){B=M[i],a=M[i+1];var w=M[i+2];this.rewardArrJoinArray.push([B,[a,w,0,null]])}this.duiHuanAll=[];var P=O.config.FactionWarBlendCfg.instance.getBlendCfgById(31)[1];for(i=0;i<P.length;i+=3){B=P[i],a=P[i+1],w=P[i+2];this.duiHuanAll.push([B,i+1,[a,w,0,null]])}this.maxXuQiu=O.config.FactionWarBlendCfg.instance.getBlendCfgById(32)[1][0],this.killCountMax=O.config.FactionWarBlendCfg.instance.getBlendCfgById(5)[1][0]}G=O.union_war||(O.union_war={}),t=O.scene.SceneUtil,y=O.config.SceneLimittimeCfg,Object.defineProperty(F,"instance",{get:function(){return this._instance=this._instance||new F},enumerable:!0,configurable:!0}),F.prototype.getRound=function(t){void 0===t&&(t=!0);var e=Math.floor(this.schedule/2);return t&&console.log("当前决赛 处于第"+e+"轮 "),e},F.prototype.getState=function(t){void 0===t&&(t=!0);var e=Math.floor(this.schedule/2),i=this.schedule%2,n=!(3<e)&&0!=i;return t&&console.log("当前决赛 处于  "+(n?"战斗":"准备")+" "),n},F.prototype.getStateByOcc=function(t){var e=this.tableCollectionPosByOcc[t];if(e){var i=e[4],n=F.instance.finalsTable[i];return F.instance.isMyWarTrue(n)}return!1},F.prototype.getFactionWarMatchInfoReply=function(t){this.personScore=t[0],this.factionRank=t[1],this.factionScore=t[2],this.readyEndTime=t[3],this.turnNum=t[4],GlobalData.dispatcher.event("GET_FACTION_WAR_MATCH_INFO_REPLY")},F.prototype.getFactionWarRankReply=function(t){this.factionsDate=t[0],this.myFactionsDate=null;for(var e=0;e<this.factionsDate.length;e++){var i=this.factionsDate[e];if(i[0]===O.faction.FactionModel.instance.factionId){this.myFactionsDate=i;break}}GlobalData.dispatcher.event("GET_FACTION_WAR_RANK_REPLY")},F.prototype.getFactionWarPersonRankReply=function(t){this.contentDate=t[0],this.myContentDate=null;for(var e=0;e<this.contentDate.length;e++){var i=this.contentDate[e];if(i[0]===PlayerModel.instance.actorId){this.myContentDate=i;break}}GlobalData.dispatcher.event("GET_FACTION_WAR_RANK_REPLY")},F.prototype.factionWarMatchFightInfo=function(t){this.teamer1&&(this.teamer1.length=0),this.teamer2&&(this.teamer2.length=0);for(var e=t[0],i=t[1],n=t[2],s=t[3],o=this.isMyTeamInFo=0;o<e.length;o++)if((a=e[o])&&a[1]===PlayerModel.instance.actorId){this.isMyTeamInFo=1;break}if(0===this.isMyTeamInFo)for(o=0;o<i.length;o++){var a;if((a=i[o])&&a[1]===PlayerModel.instance.actorId){this.isMyTeamInFo=2;break}}1===this.isMyTeamInFo?(this.teamer1=e,this.teamer2=i,this.faction1=n,this.faction2=s):2===this.isMyTeamInFo&&(this.teamer1=i,this.teamer2=e,this.faction1=s,this.faction2=n),GlobalData.dispatcher.event("FACTION_WAR_MATCH_FIGHT_INFO")},F.prototype.getMySour0bjId=function(){for(var t=0,e=0;e<this.teamer1.length;e++){var i=this.teamer1[e];if(i&&i[1]===PlayerModel.instance.actorId)return t=i[0]}for(e=0;e<this.teamer2.length;e++){var n=this.teamer2[e];if(n&&n[1]===PlayerModel.instance.actorId)return t=n[0]}return t},F.prototype.updateFactionWarMatchPace=function(t){this.hpPerTable={};var e=t[0];if(e){for(var i=0;i<e.length;i++){var n=e[i];n&&(this.hpPerTable[n[0]]=n[1])}var s=this.hpPer.length!=e.length;this.hpPer=e,s&&(GlobalData.dispatcher.event("UPDATE_FACTION_WAR_MATCH_PACE_CHANGE"),console.log("死亡人数变化 更换顽疾"))}GlobalData.dispatcher.event("UPDATE_FACTION_WAR_MATCH_PACE")},F.prototype.getLinePlater=function(t){for(var e=null,i=t?F.instance.teamer1:F.instance.teamer2,n=0;n<i.length;n++){var s=i[n],o=s[0];if(this.hpPerTable[o]&&0<this.hpPerTable[o]){e=s;break}}return e=e||(i?i[i.length-1]:null)},F.prototype.getFactionWarDispenseReply=function(t){var e=t[0];1===e&&(this.xuQiuNum=t[3],this.xuQiuNum=this.xuQiuNum?this.xuQiuNum:0),this.tableBagItemDate[e]=t,this.setRP(),GlobalData.dispatcher.event("GET_FACTION_BAG_REPLY")},F.prototype.getFactionWarNeedsReply=function(t){GlobalData.dispatcher.event("GET_FACTION_WAR_NEEDS",[t])},F.prototype.factionWarKingShowReply=function(t){this.leaderShow=t[0],this.leaderNameFaction=t[1],this.leaderFactionID=t[2],0===this.leaderFactionID.length&&WindowManager.instance.close(1300),this.setRP(),GlobalData.dispatcher.event("FACTION_WAR_KING_SHOW_REPLY")},F.prototype.getStateReward=function(t,e){if(t){if(t[2])return 2;var i=this.tableBagItemDate[e];if(i){var n=i[2];if(n&&-1!=n.indexOf(t[0]))return 1}}return 0},F.prototype.getListDate=function(t){var e=this.tableBagItemDate[t];if(e){var i=e[1];return i||[]}return[]},F.prototype.reqFactionWarDispenseLogReply=function(t){this.logs=t[0].reverse(),GlobalData.dispatcher.event("REQ_FACTION_WAR_DISPENSELOG_REPLY")},F.prototype.sortFuncBag=function(t,e){var i=[2,1,3],n=O.config.FactionItemCfg.instance.getEmptyBlendCfgById(t[1]),s=O.config.FactionItemCfg.instance.getEmptyBlendCfgById(e[1]),o=this.getStateReward(t,1),a=this.getStateReward(e,1);return i[o]===i[a]?s-n:i[o]-i[a]},F.prototype.sortFuncBag1=function(t,e){var i=[2,1,3],n=O.config.FactionItemCfg.instance.getEmptyBlendCfgById(t[1]),s=O.config.FactionItemCfg.instance.getEmptyBlendCfgById(e[1]),o=this.getStateReward(t,2),a=this.getStateReward(e,2);return i[o]===i[a]?s-n:i[o]-i[a]},F.prototype.getItems=function(t){for(var e=new Array,i=0;i<t.length;i+=2){var n=t[i],s=t[i+1];e.push([n,s,0,null])}return e},F.prototype.setRP=function(){var t=O.funcOpen.FuncOpenModel.instance.getFuncIsOpen(704),e=this.getWarCopyState();O.redPoint.RedPointCtrl.instance.setRPProperty("unionWarRP",t&&(3===e||8===e&&this.isJueSai()||this.isMoBai())&&O.faction.FactionModel.instance.hasFaction),O.redPoint.RedPointCtrl.instance.setRPProperty("unionWarRP3",t&&8===e&&!this.getState()&&4!=this.getRound()&&this.isJingCai());var i=1==O.faction.FactionModel.instance.post;O.redPoint.RedPointCtrl.instance.setRPProperty("unionWarRP2",t&&i&&this.isHavePlayerItem())},F.prototype.isJingCai=function(){var t=this.getRound();if(1<=t&&t<=3){var e=F.instance.totalGoldTable[t];return 0<F.instance.totalGoldTableCfg[t][0]-(e&&e[0]?e[0]:0)}return!1},F.prototype.isMoBai=function(){return this.isHaveMoBai()&&this.moBaiNum<this.moBaiMaxNum},F.prototype.isHaveMoBai=function(){return this.leaderFactionID&&0<this.leaderFactionID.length&&null!=this.leaderShow},F.prototype.isJueSai=function(){return-1!=this.battlesTableFactionId.indexOf(O.faction.FactionModel.instance.factionId)},F.prototype.isHavePlayerItem=function(){var t=this.getListDate(2),e=!1;if(t)for(var i=0;i<t.length;i++){var n=t[i];if(1===this.getStateReward(n,2)){e=!0;break}}return e},F.prototype.isFactionMatch=function(){return 42===t.currScene},F.prototype.ispreliminaryFactionMatch=function(){return 42===t.currScene&&1<t.curSceneLv},F.prototype.ispreliminaryFactionWar=function(){return 43===t.currScene&&1<t.curSceneLv},F.prototype.ispreliminary=function(){return O.union_war.UnionWarModel.instance.ispreliminaryFactionMatch()||O.union_war.UnionWarModel.instance.ispreliminaryFactionWar()},F.prototype.isMyWarTrue=function(t){return this.finalsFaction1&&this.finalsFaction1[0]===O.faction.FactionModel.instance.factionId?1===t:!(!this.finalsFaction2||this.finalsFaction2[0]!==O.faction.FactionModel.instance.factionId)&&2===t},F.prototype.getOocc=function(t){return this.finalsFaction1[0]===O.faction.FactionModel.instance.factionId?t[4]:this.finalsFaction2[0]===O.faction.FactionModel.instance.factionId?t[3]:void 0},F.prototype.getMaxNum=function(t){var e=this.battlesTable[t];if(e){for(var i=8,n=0;n<e.length;n++){var s=e[n];s&&s[5]%100<i&&(i=s[5]%100)}return i}return 8},F.prototype.getFactionWarFinalInfoReply=function(t){t||(this.battlesTable={});var e=t[0],s=t[3];this.schedule=t[1],this.nextTime=t[2];for(var i=0;i<s.length;i++)if(c=s[i]){var n=c[0];n===O.faction.FactionModel.instance.factionId&&(this.isMyFactinGroup=e),-1===this.battlesTableFactionId.indexOf(n)&&this.battlesTableFactionId.push(n)}this.battlesTable[e]=s,this.battlesTable[e]||(this.battlesTable[e]=[]),this.battlesTableRank[e]={},this.battlesTableVS[e]=new Array;var o=this.getRound(),a=this.getState();if(3===o&&a&&F.instance.isMyGroupOver()||4===o){var r=DungeonModel.instance.getCopySceneStateByType(43);r&&(F.instance.nextTime=r[3])}var l={1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[]},h=new Array;if(2<=o)for(i=0;i<s.length;i+=2){var c=s[i],p=s[i+1];this.getWin(c,p)?h.push(i):this.getWin(p,c)&&h.push(i+1)}var u=new Array;if(3<=o)for(i=0;i<h.length;i+=2)c=s[h[i]],p=s[h[i+1]],this.getWin(c,p)?u.push(h[i]):this.getWin(p,c)&&u.push(h[i+1]);function d(t,e){var i=null;if(-1!=h.indexOf(t)&&(0===h.indexOf(t)?i=s[h[1]]:1===h.indexOf(t)?i=s[h[0]]:2===h.indexOf(t)?i=s[h[3]]:3===h.indexOf(t)&&(i=s[h[2]])),i&&e){var n=e[5]%100;return i[5]%100<n}return!1}var y=[],g=s[0],f=s[1],_=s[2],m=s[3],v=s[4],b=s[5],T=s[6],I=s[7],C=1===o&&a,x=2===o&&a,B=this.getStateNumImg(g,f,1,e,[d(0,g),d(1,f)]);y[0]=C&&B[0]===B[1]&&!this.getIsLunKong(g)&&!this.getIsLunKong(f),l[4][0]=B[0],l[4][1]=B[1];var S=this.getStateNumImg(_,m,1,e,[d(2,_),d(3,m)]);y[1]=C&&S[0]===S[1]&&!this.getIsLunKong(_)&&!this.getIsLunKong(m),l[5][0]=S[0],l[5][1]=S[1];var M=this.getStateNumImg(v,b,1,e,[d(4,v),d(5,b)]);y[2]=C&&M[0]===M[1]&&!this.getIsLunKong(v)&&!this.getIsLunKong(b),l[6][0]=M[0],l[6][1]=M[1];var w=this.getStateNumImg(T,I,1,e,[d(6,T),d(7,I)]);y[3]=C&&w[0]===w[1]&&!this.getIsLunKong(T)&&!this.getIsLunKong(I),l[7][0]=w[0],l[7][1]=w[1];var P=null!=h[0]?s[h[0]]:null,A=null!=h[1]?s[h[1]]:null,R=this.getStateNumImg(P,A,2,e);l[2][0]=R[0],l[2][1]=R[1],y[4]=x&&R[0]===R[1]&&!this.getIsLunKong(P)&&!this.getIsLunKong(A);var k=null!=h[2]?s[h[2]]:null,E=null!=h[3]?s[h[3]]:null,D=this.getStateNumImg(k,E,2,e);l[3][0]=D[0],l[3][1]=D[1],y[5]=x&&D[0]===D[1]&&!this.getIsLunKong(k)&&!this.getIsLunKong(E);var L=null!=u[0]?s[u[0]]:null,H=null!=u[1]?s[u[1]]:null,U=this.getStateNumImg(L,H,3,e);l[1][0]=U[0],l[1][1]=U[1],this.battlesTableRank[e]=l,this.battlesTableVS[e]=y,1<=o&&o<=3&&G.UnionWarCtrl.instance.getFactionGuccessInfo(o,1),this.setRP(),GlobalData.dispatcher.event("GET_FACTION_WAR_SCHEDULE_REPLY")},F.prototype.closeDuel=function(){},F.prototype.getIsLunKong=function(t){return!t||0===t[0].length&&0===t[1].length||0===t[0].length&&0<t[1].length},F.prototype.getStateNumImg=function(t,e,i,n,s){if(void 0===s&&(s=[!1,!1]),!t&&!e)return[2,2];var o=this.getRound(!1),a=this.getState(!1),r=this.getMaxNum(n),l=1===r,h=t?t[5]%100:999,c=e?e[5]%100:999,p=h<c,u=c<h,d=h===r,y=c===r,g=!!t&&0<t[0].length&&0<t[1].length,f=!!e&&0<e[0].length&&0<e[1].length,_=2,m=2;if(l)_=d?1:p?3:2,m=y?1:u?3:2;else if(i!=o)if(0===o)m=_=1;else{var v=8;2===o&&(v=4),3===o&&(v=2),_=d?1:p?h===v?s[0]?3:1:3:2,m=y?1:u?c===v?s[1]?3:1:3:2}else i===o&&(a?p?(_=1,m=2):u?(m=1,_=2):m=_=1:m=_=1);return[_=g?_:2,m=f?m:2]},F.prototype.getWin=function(t,e){return(t?t[5]%100:999)<(e?e[5]%100:999)},F.prototype.factionWarReadyRemain=function(t){this.readyEndTime=t[0],this.turnNum=t[1],GlobalData.dispatcher.event("GET_FACTION_WAR_MATCH_INFO_REPLY")},F.prototype.factionWarBattleInfo=function(t){this.finalsFaction1=t[0],this.finalsFaction2=t[1],GlobalData.dispatcher.event("FACTION_WAR_BATTLE_INFO")},F.prototype.updateFactionWarBattlePace=function(t){this.finalsFlags1=this.finalsFlags2=0,this.finalsScore1=t[0],this.finalsScore2=t[1];var e=t[2];if(e)for(var i=0;i<e.length;i++){var n=e[i];if(n){var s=n[0],o=n[1];1===(this.finalsTable[s]=o)?this.finalsFlags1++:2===o&&this.finalsFlags2++}}GlobalData.dispatcher.event("UPDATE_FACTION_WAR_BATTLE_PACE")},F.prototype.getFactionGuccessInfoReply=function(t){var e=t[0],i=t[1],n=t[2],s=t[3],o=t[4];this.totalGoldTable[e]=[s,o],this.guessesTable[e]={},this.guessesTable[e][i]=n||[],this.setRP(),GlobalData.dispatcher.event("GET_FACTION_GUCCESS_INFO_REPLY")},F.prototype.updateFactionGuccessInfo=function(t){GlobalData.dispatcher.event("UPDATE_FACTION_GUCCESS_INFO")},F.prototype.getEightStrongDate=function(t){return this.battlesTable[t]?this.battlesTable[t]:[]},F.prototype.getChampionDate=function(t){var e=null,i=this.battlesTable[t];if(i)for(var n=0;n<i.length;n++){var s=i[n];s&&0<s[0].length&&s[5]%100<2&&(e=s)}return e},F.prototype.isMyGroupOver=function(){return!(!F.instance.isJueSai()||-1==this.isMyFactinGroup||!F.instance.getChampionDate(this.isMyFactinGroup))},F.prototype.getAllWin=function(t){var e=[],i=this.battlesTableRank[t];if(i)for(var n=[4,5,6,7,2,3,1],s=0;s<n.length;s++){var o=i[n[s]];o?(e.push(o[0]),e.push(o[1])):(e.push(2),e.push(2))}return e},F.prototype.getWarCopyState=function(){var t=DungeonModel.instance.getCopySceneStateByType(42),e=DungeonModel.instance.getCopySceneStateByType(43),i=t?t[2]:4,n=e?e[2]:4,s=y.instance.getCfgById(13),o=y.instance.getCfgById(14),a=s[4],r=o[4],l=CommonUtil.getWeekNum();if(l<a[0])return 1;if(-1!=a.indexOf(l)){var h=l===a[a.length-1];if(4===i||1===i)return 2;if(2===i)return 3;if(3===i)return h?5:4}else{if(-1===a.indexOf(l)&&l<r[0])return 6;if(-1==r.indexOf(l))return 10;if(4===n||1===n)return 7;if(2===n)return 8;if(3===n)return 9}},F.prototype.getWarCopyTimeStr=function(t,e){void 0===e&&(e=!1);var i=y.instance.getCfgById(t),n=i[4],s=i[6],o=i[7],a=CommonUtil.getWeekNum(),r=n[0];if(e)for(var l=0;l<n.length;l++){var h=n[l];if(a<h){r=h;break}}var c=s[0].toString(),p=s[1].toString(),u=o[0].toString(),d=o[1].toString();return[r,c+":"+(p="0"===p?"00":p),u+":"+(d="0"===d?"00":d)]},F.prototype.getStr=function(t){return["一","二","三","四","五","六","日"][t-1]},e=F,G.UnionWarModel=e}(modules=modules||{}),function(o){var t,a,e;function i(){return null!==a&&a.apply(this,arguments)||this}t=o.union_war||(o.union_war={}),a=ui.UnionWarOptionItemUI,__extends(i,a),Object.defineProperty(i.prototype,"selectEnable",{get:function(){return this._selectEnable=!0,this._selectEnable},enumerable:!0,configurable:!0}),i.prototype.setSelected=function(t){a.prototype.setSelected.call(this,t),this.img1.visible=t},i.prototype.setData=function(t){var e;a.prototype.setData.call(this,t),this.img.skin=t?"union_war/iconbg_xmz_jys.png":"union_war/iconbg_xmz_jfs.png";var i="#ffffff",n=o.union_war.UnionWarModel.instance.getWarCopyState();if(t)if(n<7){var s=o.union_war.UnionWarModel.instance.getWarCopyTimeStr(14);e="周"+o.union_war.UnionWarModel.instance.getStr(s[0])+s[1]+"开启"}else 7===n?e="今日"+(s=o.union_war.UnionWarModel.instance.getWarCopyTimeStr(14))[1]+"开启":i=8===n?(e="正在进行","#50ff28"):(e="已结束","#ff3e3e");else 1===n?(s=o.union_war.UnionWarModel.instance.getWarCopyTimeStr(13),e="周"+o.union_war.UnionWarModel.instance.getStr(s[0])+s[1]+"开启"):2===n?e="今日"+(s=o.union_war.UnionWarModel.instance.getWarCopyTimeStr(13))[1]+"开启":3===n?(e="正在进行",i="#50ff28"):4===n?(s=o.union_war.UnionWarModel.instance.getWarCopyTimeStr(13,!0),e="周"+o.union_war.UnionWarModel.instance.getStr(s[0])+s[1]+"开启"):(e="已结束",i="#ff3e3e");this.text1.text=e,this.text1.color=i},e=i,t.UnionWarOptionItem=e}(modules=modules||{}),function(o){var t,a,e;function i(){return null!==a&&a.apply(this,arguments)||this}t=o.union_war||(o.union_war={}),a=ui.UnionWarPlayerItemUI,__extends(i,a),i.prototype.setData=function(t){if(a.prototype.setData.call(this,t),this.isMyFaction.visible=this.iconImg.visible=!1,this.bgImg2.visible=this.nameText.visible=this.notImg.visible=!0,this.nameText.text="虚位以待",this.bgImg1.visible=this._isOne,t){this.notImg.visible=!1,this.iconImg.visible=this.nameText.visible=!0;var e=t[1];e=o.chat.ChatModel.instance.wordReplace(e);var i=t[3],n=t[0];if(i=null!=i?i:1,this.iconImg.skin=CommonUtil.getFactionIcon(i),n.length<=0&&e.length<=0)this.nameText.text="轮空",this.iconImg.visible=!1;else if(n.length<=0&&0<e.length){var s=o.union_war.UnionWarModel.instance.getWarCopyState();7===s||8===s?(this.nameText.text="仙盟已解散",this.iconImg.visible=!1):(this.nameText.text=""+e,this.iconImg.visible=!0)}else this.nameText.text=""+e,this.iconImg.visible=!0;this.isMyFaction.visible=!this._isOne&&0<n.length&&n===o.faction.FactionModel.instance.factionId}},i.prototype.setUI=function(t){void 0===t&&(t=!1),this._isOne=t,this._isOne?(this.nameBgImg.y=126,this.nameText.y=131,this.bgImg1.visible=!0):(this.nameBgImg.y=120,this.nameText.y=125,this.bgImg1.visible=!1)},e=i,t.UnionWarPlayerItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),i=ui.UnionWarPreliminaryPlayerInfoItemUI,__extends(s,i),s.prototype.initialize=function(){i.prototype.initialize.call(this)},s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayers),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_MATCH_PACE",this,this.showUI)},s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.proImg.visible=this.proCtrlImg.visible=!1,this.updatePlayers(),this.showUI()},s.prototype.updatePlayers=function(){this._dates?(this.visible=!0,this._objId=this._dates[0],this.headIcon.setInfo(this._dates[5],this._dates[3],this._dates[4]),this.tipsText.text="战"+CommonUtil.bigNumToString(this._dates[8],!0),this.isJingXiangImg.visible=!1):this.visible=!1},s.prototype.showUI=function(){if(this._dates){var t=e.UnionWarModel.instance.hpPerTable[this._objId];this.overImg.visible=!t}else this.visible=!1},s.prototype.setData=function(t){i.prototype.setData.call(this,t),this._dates=t,Laya.timer.callLater(this,this.updatePlayers)},s.prototype.destroy=function(){i.prototype.destroy.call(this)},n=s,e.UnionWarPreliminaryPlayerInfoItem=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),n=t.common.ProgressBarCtrl,i=ui.UnionWarPreliminaryPlayerInfoItem1UI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,203)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayers),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_MATCH_PACE",this,this.showUI)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._proCtrl.value=this._proCtrl.maxValue=1,this.updatePlayers(),this.showUI()},o.prototype.updatePlayers=function(){this._dates?(this.visible=!0,this.nameText.text=this._dates[2],this._objId=this._dates[0],this.headIcon.setInfo(this._dates[5],this._dates[3],this._dates[4]),this.tipsText.text="战"+CommonUtil.bigNumToString(this._dates[8],!0),this.isJingXiangImg.visible=!1):this.visible=!1},o.prototype.showUI=function(){if(this._dates){var t=e.UnionWarModel.instance.hpPerTable[this._objId];t&&0<t?(this._proCtrl.maxValue=1e4,this._proCtrl.value=t*this._proCtrl.maxValue):(this._proCtrl.value=0,this._proCtrl.maxValue=1)}else this.visible=!1},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._dates=t,Laya.timer.callLater(this,this.updatePlayers)},o.prototype.destroy=function(){this._proCtrl&&(this._proCtrl.destroy(),this._proCtrl=null),i.prototype.destroy.call(this)},s=o,e.UnionWarPreliminaryPlayerInfoItem1=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),n=t.common.ProgressBarCtrl,i=ui.UnionWarPreliminaryPlayerInfoItem2UI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,203)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("BOSS_SHOW_PLAYER_INFO",this,this.updatePlayers),this.onAutoGlobalEvt("UPDATE_FACTION_WAR_MATCH_PACE",this,this.showUI)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this._proCtrl.value=this._proCtrl.maxValue=1,this.updatePlayers(),this.showUI()},o.prototype.updatePlayers=function(){this._dates?(this.visible=!0,this._objId=this._dates[0],this.nameText.text=this._dates[2],this.headIcon.setInfo(this._dates[5],this._dates[3],this._dates[4]),this.tipsText.text="战"+CommonUtil.bigNumToString(this._dates[8],!0),this.isJingXiangImg.visible=!1):this.visible=!1},o.prototype.showUI=function(){if(this._dates){var t=e.UnionWarModel.instance.hpPerTable[this._objId];t&&0<t?(this._proCtrl.maxValue=1e4,this._proCtrl.value=t*this._proCtrl.maxValue):(this._proCtrl.value=0,this._proCtrl.maxValue=1)}else this.visible=!1},o.prototype.setData=function(t){i.prototype.setData.call(this,t),this._dates=t,Laya.timer.callLater(this,this.updatePlayers)},o.prototype.destroy=function(){this._proCtrl&&(this._proCtrl.destroy(),this._proCtrl=null),i.prototype.destroy.call(this)},s=o,e.UnionWarPreliminaryPlayerInfoItem2=s}(modules=modules||{}),function(o){var t,a,e;function i(){return null!==a&&a.apply(this,arguments)||this}t=o.union_war||(o.union_war={}),a=ui.UnionWarPreliminaryRankItemUI,__extends(i,a),i.prototype.setData=function(t){if(a.prototype.setData.call(this,t),t){var e=t[3],i=t[1];i=o.chat.ChatModel.instance.wordReplace(i);var n=t[5],s=t[6];this.iconImg.skin=CommonUtil.getFactionIcon(e),this.nameText1.text=i,this.nameText2.text=""+s,1===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_first.png"):2===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_second.png"):3===n?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_third.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+n)}},e=i,t.UnionWarPreliminaryRankItem=e}(modules=modules||{}),function(s){var t,o,e;function i(){return null!==o&&o.apply(this,arguments)||this}t=s.union_war||(s.union_war={}),o=ui.UnionWarPreliminaryRankItemUI,__extends(i,o),i.prototype.setData=function(t){if(o.prototype.setData.call(this,t),t){var e=t[1];e=s.chat.ChatModel.instance.wordReplace(e);var i=t[3],n=t[4];this.iconImg.visible=!1,this.nameText1.text=e,this.nameText2.text=""+n,1===i?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_first.png"):2===i?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_second.png"):3===i?(this.commonRank.visible=!1,this.rankImg.visible=!0,this.rankImg.skin="common/icon_common_third.png"):(this.rankImg.visible=!1,this.commonRank.visible=!0,this.rankClip.value=""+i)}},e=i,t.UnionWarPreliminaryRankItem1=e}(modules=modules||{}),function(t){var i,e,n;function s(){return null!==e&&e.apply(this,arguments)||this}i=t.union_war||(t.union_war={}),e=ui.UnionWarRewardDistributionBaseItemUI,__extends(s,e),s.prototype.initialize=function(){e.prototype.initialize.call(this),this.item.needTip=!1},Object.defineProperty(s.prototype,"selectEnable",{get:function(){return this._selectEnable=!0,this._selectEnable},enumerable:!0,configurable:!0}),s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.isChangeImg.visible=t,this.item.needTip=t},s.prototype.setData=function(t){e.prototype.setData.call(this,t),this._dates=t,this._dates&&this.showUI()},s.prototype.showUI=function(){var t=this._dates[1],e=i.UnionWarModel.instance.getStateReward(this._dates,2);switch(this.stateImg.visible=!1,e){case 0:break;case 1:this.stateImg.skin="union_war/txt_xmz_2.png",this.stateImg.visible=!0;break;case 2:this.stateImg.skin="union_war/txt_xmz_3.png",this.stateImg.visible=!0}this.item.dataSource=[t,1,0,null],this.item.nameVisible=!0},n=s,i.UnionWarRewardDistributionBaseItem=n}(modules=modules||{}),function(a){var r,e,l,h,t;function i(){return null!==e&&e.apply(this,arguments)||this}r=a.union_war||(a.union_war={}),l=a.config.FactionItemCfg,h=a.player.PlayerModel,e=ui.UnionWarRewardDistributionItemUI,__extends(i,e),i.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoClick(this.btn2,this,this.btn2Handler)},i.prototype.setData=function(t){e.prototype.setData.call(this,t),this.nowPriceTxt.visible=this.nowPriceImg.visible=this.btn2.visible=this.box1.visible=this.box2.visible=!1,this._dates=t,this.showUI()},i.prototype.showUI=function(){if(this._dates){if(this.nowPriceImg.skin=CommonUtil.getIconById(95330001,!0),this.bgImg.visible=1===this._dates[0],this.bgImg1.visible=2===this._dates[0],1===this._dates[0]){var t=(i=this._dates[1])[1],e=l.instance.getEmptyBlendCfgById(t);switch(r.UnionWarModel.instance.getStateReward(i,1)){case 0:this.nowPriceTxt.visible=this.nowPriceImg.visible=this.btn2.visible=!0;break;case 1:this.box1.visible=!0;break;case 2:this.box2.visible=!0,this.nameText.text=""+i[2]}this.nowPriceTxt.text=""+e,this.item.dataSource=[t,1,0,null],this.itemName.text=""+CommonUtil.getNameByItemId(t),this.itemName.visible=!0,this.itemName.color=CommonUtil.getColorById(t),this.nowPriceTxt.color=h.instance.getCurrencyById(95330001)>=e?"#000000":"#ff3e3e",this.btn2.label="需求"}else if(2===this._dates[0]){this.box1.visible=this.box2.visible=!1,e=(i=this._dates[1])[0];var i,n=i[2];this.nowPriceTxt.text=""+e,this.nowPriceTxt.color=h.instance.getCurrencyById(95330001)>=e?"#000000":"#ff3e3e",this.item.dataSource=n,this.itemName.text=""+CommonUtil.getNameByItemId(n[0]),this.itemName.visible=!0,this.itemName.color=CommonUtil.getColorById(n[0]),this.nowPriceTxt.visible=this.nowPriceImg.visible=this.btn2.visible=!0,this.btn2.label="兑换"}CommonUtil.adaptationImgAndText([[this.nowPriceImg,2,0],[this.nowPriceTxt,1,0]],this.width,0,"center")}},i.prototype.btn2Handler=function(){if(this._dates)if(1===this._dates[0]){var t=this._dates[1],e=l.instance.getEmptyBlendCfgById(t[1]);h.instance.getCurrencyById(95330001)>=e?WindowManager.instance.open(1054,t):a.bag.BagUtil.openLackPropAlert(95330001,1)}else if(2===this._dates[0]){e=(t=this._dates[1])[0];var i=t[1],n=t[2],s=Handler.create(this,function(t){r.UnionWarCtrl.instance.reqFactionWarDispExchange(i,t)}),o=[[95330001],[h.instance.getCurrencyById(95330001)],[e],n,s,0,"精英赛结算后可兑换大量珍稀道具，建议先积累声望"];h.instance.getCurrencyById(95330001)>=e?WindowManager.instance.open(469,o):a.bag.BagUtil.openLackPropAlert(95330001,1)}},t=i,r.UnionWarRewardDistributionItem=t}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),i=ui.UnionWarRewardDistributionPlayerItemUI,__extends(s,i),s.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.btn2,this,this.btn2Handler),this.onAutoGlobalEvt("GET_FACTION_PERSONAL_INFO_REPLY",this,this.showUI)},s.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._date=t[1],this._dateItem=t[0],this.showUI())},s.prototype.showUI=function(){this._date&&this._dateItem&&(this.btn2.visible=1===t.faction.FactionModel.instance.post,this.nameText.text=""+this._date[1],this.tipsText.text="战力:"+CommonUtil.bigNumToString(this._date[4],!0),this.headIcon.setInfo(this._date[7],this._date[2],this._date[8]),this.vipShowItem.setSVIPandVIP(this._date[6],this._date[5],this._date[9]))},s.prototype.btn2Handler=function(){e.UnionWarModel.instance.isTipsBag?WindowManager.instance.open(1058,[this._dateItem,this._date]):e.UnionWarCtrl.instance.reqFactionWarDispense(this._dateItem[0],this._date[0])},n=s,e.UnionWarRewardDistributionPlayerItem=n}(modules=modules||{}),function(t){var e,r,i;function n(){return null!==r&&r.apply(this,arguments)||this}e=t.union_war||(t.union_war={}),r=ui.UnionWarRewardDistributionRecordItemUI,__extends(n,r),n.prototype.initialize=function(){r.prototype.initialize.call(this),CommonUtil.setHTMLPro(this.recordHtml,"#1f304d","SimHei",24)},n.prototype.setData=function(t){if(r.prototype.setData.call(this,t),t){var e=t[0];this.text1.text=CommonUtil.timeConversionYMD(e,"/"),this.text2.text=CommonUtil.timeConversionHMS(e,":");var i=t[2],n=t[3],s=t[1],o=CommonUtil.getNameByItemId(s),a=CommonUtil.getColorById(s);0===i.length?this.recordHtml.innerHTML="<span style='color:"+a+"'>【"+o+"】</span>盟主分配超时,已由系统随机分配给了【"+n+"】":this.recordHtml.innerHTML="盟主【"+i+"】将<span style='color:"+a+"'>【"+o+"】</span>分配给了【"+n+"】"}},i=n,e.UnionWarRewardDistributionRecordItem=i}(modules=modules||{}),function(t){var l,r,e,i,n;function s(){return r.call(this)||this}l=t.union_war||(t.union_war={}),e=t.common.SimpleList,i=t.bag.BaseItem,r=ui.UnionWarRewardRankItemUI,__extends(s,r),s.prototype.initialize=function(){r.prototype.initialize.call(this),this._list=e.create(i,100,100,1,4,20,5),this._list.size(460,210),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list.mouseThrough=!1,this._list.spaceX=20,this._list.spaceY=5,this._list1=e.create(i,100,100,1,4,20,5),this._list1.size(460,100),this.listBox1.addChild(this._list1),this._list1.pos(0,0,!0),this._list1.mouseThrough=!1,this._list1.spaceX=20,this._list1.spaceY=5},s.prototype.onEvt=function(){r.prototype.onEvt.call(this)},s.prototype.setData=function(t){if(r.prototype.setData.call(this,t),t){var e=t[1][4],i=0!=e?t[0]%100:t[0],n=t[1][3],s=t[1][1],o=l.UnionWarModel.instance.getItems(n),a=l.UnionWarModel.instance.getItems(s);this.setUI(e,i,o.length,a.length),this._list.datas=o,this._list1.datas=a}},s.prototype.setUI=function(t,e,i,n){var s=this;function o(){s.listBox.height=s._list.height=100*a+(0<a-1?a-1:0)*s._list.spaceY,s.listBox1.height=s._list1.height=100*r+(0<r-1?r-1:0)*s._list1.spaceY,s._list.vCount=a,s._list1.vCount=r,s.img2.height=s._list.height+26,s.img3.height=s._list1.height+26,s.listBox.y=s.img2.y+13,s.textBox2.y=s.img2.y+s.img2.height,s.img3.y=s.textBox2.y+s.textBox2.height,s.listBox1.y=s.img3.y+13,s.height=s.img1.height=s.img3.y+s.img3.height+41,s.img4.height=s.img3.y+s.img3.height+41-52,s._list.pos(0,0),s._list1.pos(0,0)}this.img1.visible=this.img4.visible=!1;var a=Math.floor(i/4)+(0<i%4?1:0),r=Math.floor(n/4)+(0<n%4?1:0);1===t&&1===e||1===t&&2===e?(this.img1.visible=!0,this.img1.skin=1===e?"union_war/image_xmz_bg01.png":"union_war/image_xmz_bg02.png"):this.img4.visible=!0,o(),this.img5.skin=l.UnionWarModel.instance.rankStr[t][e]},s.prototype.close=function(){r.prototype.close.call(this)},s.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),r.prototype.destroy.call(this,t)},n=s,l.UnionWarRewardRankItem=n}(modules=modules||{}),function(t){var e,s,i,n,o;function a(){return s.call(this)||this}e=t.union_war||(t.union_war={}),i=t.common.SimpleList,n=t.bag.BaseItem,s=ui.UnionWarRewardSingleItemUI,__extends(a,s),a.prototype.initialize=function(){s.prototype.initialize.call(this),this._list=i.create(n,100,100,1,4,20,5),this._list.size(460,100),this.listBox.addChild(this._list),this._list.pos(0,0,!0),this._list.mouseThrough=!1,this._list1=i.create(n,100,100,1,4,20,5),this._list1.size(460,100),this.listBox1.addChild(this._list1),this._list1.pos(0,0,!0),this._list1.mouseThrough=!1,this._skinArR=["天字组决赛对战奖励","天字组半决赛对战奖励","天字组四强赛对战奖励","地字组决赛对战奖励 ","地字组半决赛对战奖励","地字组四强赛对战奖励","玄字组决赛对战奖励","玄字组半决赛对战奖励","玄字组四强赛对战奖励","黄字组决赛对战奖励","黄字组半决赛对战奖励","黄字组四强赛对战奖励","积分赛对战奖励"]},a.prototype.onEvt=function(){s.prototype.onEvt.call(this)},a.prototype.setData=function(t){if(s.prototype.setData.call(this,t),t){var e=t[0],i=t[1][0],n=t[1][1];this.setUI(e,i.length,n.length),this._list.datas=i,this._list1.datas=n}},a.prototype.setUI=function(t,e,i){var n=this,s=Math.floor(e/4)+(0<e%4?1:0),o=Math.floor(i/4)+(0<i%4?1:0);this.img4.visible=!1,this.text1.text=this._skinArR[t],n.listBox.height=n._list.height=100*s+(0<s-1?s-1:0)*n._list.spaceY,n.listBox1.height=n._list1.height=100*o+(0<o-1?o-1:0)*n._list1.spaceY,n._list.vCount=s,n._list1.vCount=o,n.img2.height=n._list.height+26,n.img3.height=n._list1.height+26,n.listBox.y=n.img2.y+13,n.textBox2.y=n.img2.y+n.img2.height,n.img3.y=n.textBox2.y+n.textBox2.height,n.listBox1.y=n.img3.y+13,n.height=n.img3.y+n.img3.height+58,n.img1.height=n.img3.y+n.img3.height+58-35,n._list.pos(0,0),n._list1.pos(0,0)},a.prototype.close=function(){s.prototype.close.call(this)},a.prototype.destroy=function(t){void 0===t&&(t=!0),this._list=this.destroyElement(this._list),this._list1=this.destroyElement(this._list1),s.prototype.destroy.call(this,t)},o=a,e.UnionWarRewardSingleItem=o}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.update_alert||(t.update_alert={}),n=t.commonAlert.CommonSlideTxtAlert,s=t.config.BlendCfg,o=Laya.Button,i=n,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._btn=new o("common/btn_tongyong_6.png","知道了"),this._btn.stateNum=1,this._btn.labelFont="SimHei",this._btn.labelColors="#9b5119",this._btn.labelSize=30,this._btn.labelPadding="-1,4",this._link=new Laya.Text,this._link.underline=!0,this._link.text="提示设置",this._link.font="SimHei",this._link.fontSize=26,this._link.color="#168a17",this._link.mouseEnabled=!0},r.prototype.setOpenParam=function(){var t=s.instance.getCfgById(68001)[2][0];i.prototype.setOpenParam.call(this,["版本预告",t,695])},r.prototype.fit=function(t){void 0===t&&(t=this._defaultThisH),i.prototype.fit.call(this,t);var e=t+80;this.bgImg.height=this.height=e,this.hintTxt.y=e+20,this._link.pos(500,e-80,!0),this.addChild(this._link),this._btn.centerX=0,this._btn.y=e-115,this.addChild(this._btn)},r.prototype.onEvt=function(){var t=this;i.prototype.onEvt.call(this),this.onAutoClick(this._link,this,function(){WindowManager.instance.open(728),t.close()}),this.onAutoClick(this._btn,this,this.close)},a=r,e.UpdateAlert=a}(modules=modules||{}),function(e){var t,i,n;function s(){this._awardArr=[],this._state=0,this._playerLevel=0}t=e.vip_buy||(e.vip_buy={}),i=e.funcOpen.FuncOpenModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.updateInfo=function(t){this._awardArr=t,this._state=t[1],this._playerLevel=t[2],this.setPayRewardRP(),GlobalData.dispatcher.event("VIP_BUY_UPDATE")},Object.defineProperty(s.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"awardArr",{get:function(){return this._awardArr},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"playerLevel",{get:function(){return this._playerLevel},enumerable:!0,configurable:!0}),s.prototype.getAwardStateByGrade=function(t){for(var e=0,i=0;i<this._awardArr[0].length;i++)t==this._awardArr[0][i][0]&&(e=this._awardArr[0][i][1]);return e},s.prototype.setPayRewardRP=function(){var t=this.getgRadeRP();e.redPoint.RedPointCtrl.instance.setRPProperty("vipBuyRP",t)},s.prototype.getgRadeRP=function(){if(i.instance.getFuncNeedShow(232)&&this.awardArr)for(var t=0;t<this.awardArr[0].length;t++){var e=this.awardArr[0][t];if(e&&1==e[1])return!0}return!1},n=s,t.VipBuyModel=n}(modules=modules||{}),function(t){var o,a,r,e,l,i;function n(){return null!==a&&a.apply(this,arguments)||this}o=t.warband||(t.warband={}),r=t.config.SkillCfg,e=ui.WarbandBuffItemUI,l=t.config.SkillPureCfg,a=e,__extends(n,a),n.prototype.setData=function(t){a.prototype.setData.call(this,t);var e=r.instance.getCfgById(t[1]);this.buffName.text=CommonUtil.getSkillName(t[1])+" Lv."+t[1]%1e3;var i=l.instance.getCfgById(CommonUtil.getSkillPureIdById(t[1]));this.buffDesc.text=CommonUtil.stringFormat(i[5],e[2]),this.icon.skin="assets/icon/skill/"+CommonUtil.getSkillIcon(t[1])+".png";var n=o.WarbandModel.instance.info,s=n&&n[6]>=t[0][0];this.stateTxt.visible=!s,this.activedImg.visible=s,this.stateTxt.text=s?"已激活":t[0][0]+"级激活"},i=n,o.WarbandBuffItem=i}(modules=modules||{}),function(t){var r,l,e,i,h,n;function s(){return null!==l&&l.apply(this,arguments)||this}r=t.warband||(t.warband={}),e=ui.WarbandItemUI,i=t.warband.WarbandCtrl,h=t.config.WarbandLevelCfg,l=e,__extends(s,l),s.prototype.initialize=function(){l.prototype.initialize.call(this),this.appliedImg.visible=!1,this.limit.visible=!1},s.prototype.onEvt=function(){l.prototype.onEvt.call(this),this.onAutoClick(this.applyBtn,this,this.applyWarband),this.onAutoGlobalEvt("WARBAND_ONE_KEY_APPLY",this,this.appliedHandler)},s.prototype.applyWarband=function(){this._data&&i.instance.applyWarband([this._data[0]])},s.prototype.setData=function(t){l.prototype.setData.call(this,t);var e=t[8];if(e<=3)this.rankClip.visible=!1,this.rankImg.skin="common/icon_common_"+(1===e?"first":2===e?"second":"third")+".png";else{this.rankClip.visible=!0,this.rankImg.skin="common/dt_tongyong_15.png";var i=e+"";this.rankClip.value=i,this.rankClip.x=78-16*i.length}this.nameTxt.text=t[1],this.leaderNameTxt.text="队长："+t[3][1];var n=h.instance.getCfgByLv(t[5]);this.numTxt.text="人数："+t[9]+"/"+n[3];var s=-1!==(r.WarbandModel.instance.ranksInfo[3]||[]).indexOf(this._data[0]);this.appliedImg.visible=s&&t[9]<n[3],this.applyBtn.visible=!s&&t[9]<n[3],this.lvTxt.text="Lv."+t[5],this.limit.visible=!1;var o=PlayerModel.instance.fight,a=t[10];!isNaN(a)&&this.applyBtn.visible&&o<a&&(this.applyBtn.visible=!1,this.limit.visible=!0,this.txt_limit.text=CommonUtil.bigNumToString(a))},s.prototype.appliedHandler=function(){this.applyBtn.visible&&(this.applyBtn.visible=!1,this.appliedImg.visible=!0)},n=s,r.WarbandItem=n}(modules=modules||{}),function(t){var o,a,e,n,i;function s(){return null!==a&&a.apply(this,arguments)||this}o=t.warband||(t.warband={}),e=ui.WarbandMemberItemUI,n=t.notice.SystemNoticeManager,a=e,__extends(s,a),s.prototype.onEvt=function(){a.prototype.onEvt.call(this),this.onAutoClick(this.operBtn,this,this.oper),this.onAutoGlobalEvt("WARBAND_DONATE_BROADCAST",this,this.donateBroadcast)},s.prototype.setData=function(t){a.prototype.setData.call(this,t),this.timeTxt.visible=!1,this.stateTxt.visible=!0,this.nameTxt.text=t[1],this.fightTxt.text="战力："+CommonUtil.bigNumToString(t[4]),this.donateTxt.text=t[7]+"",this.head.setInfo(t[6],t[2],t[5]);var e=o.WarbandModel.instance.info;if(t[12])this.stateTxt.text="在线",this.stateTxt.color="#0ecf09";else{var i=t[9];if(0==i)this.stateTxt.text="离线";else{var n=GlobalData.serverTime-i;n=n<0?0:n;var s=CommonUtil.getTimeTypeAndTime(n);this.stateTxt.text=s+"前在线"}this.stateTxt.color="#344c6f"}t[0]===e[3]&&e[11]>GlobalData.serverTime?(this.timeTxt.visible=!0,this.stateTxt.visible=!1,Laya.timer.loop(1e3,this,this.loopHandler),this.loopHandler(),this.operBtn.label="弹劾中"):t[0]!=PlayerModel.instance.actorId&&t[0]===e[3]&&!t[12]&&t[9]+2592e5<GlobalData.serverTime?this.operBtn.label="弹劾":this.operBtn.label="操作",this.vipShowItem.setSVIPandVIP(t[11],t[10],t[13]),this.leaderIcon.visible=t[0]===e[3]},s.prototype.loopHandler=function(){var t=o.WarbandModel.instance.info;t[11]>GlobalData.serverTime?this.timeTxt.text=CommonUtil.timeStampToHHMMSS(t[11]):(Laya.timer.clear(this,this.loopHandler),this.timeTxt.visible=!1,this.operBtn.label="操作")},s.prototype.close=function(){a.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},s.prototype.oper=function(t){t.stopPropagation();var e=this.data,i=o.WarbandModel.instance.info;this.timeTxt.visible?n.instance.addNotice("队长正在被弹劾",!0):e[0]!=PlayerModel.instance.actorId&&e[0]===i[3]&&!e[12]&&e[9]+2592e5<GlobalData.serverTime?CommonUtil.alert("提示","是否弹劾队长",[Handler.create(this,function(){o.WarbandCtrl.instance.impeachWarband()})],[null,null]):GlobalData.dispatcher.event("WARBAND_MEMBER_OPER_CLICK",[this._data])},s.prototype.donateBroadcast=function(t){this._data&&this._data[0]===t[2]&&(this.donateTxt.text=t[3]+"")},i=s,o.WarbandMemberItem=i}(modules=modules||{}),function(t){var e,i,r,n,s,o,a;function l(){return null!==i&&i.apply(this,arguments)||this}e=t.weekConsume||(t.weekConsume={}),r=t.config.WeekConsumeCfg,n=t.common.CustomClip,s=t.notice.SystemNoticeManager,o=t.common.CommonUtil,i=ui.WeekConsumeItemUI,__extends(l,i),l.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),this._dat=null,i.prototype.destroy.call(this,t)},l.prototype.initialize=function(){i.prototype.initialize.call(this),o.setHTMLPro(this.conditionTxt,"#1f304d","SimHei",26),this._btnClip=n.create("assets/effect/btn_light.atlas","btn_light",16),this._btnClip.setProperty(this,this.sureBtn.x-5,this.sureBtn.y-10,.8)},l.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("WEEK_CONSUME_ITEM_UPDATE",this,this.updateView)},l.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.updateView()},l.prototype.close=function(){i.prototype.close.call(this),n.thisStop(this._btnClip)},l.prototype.updateView=function(){0==e.WeekConsumeModel.instance.state&&(this.sureBtn.label="",this.sureBtn.skin="common/txt_commmon_yjies.png",n.thisStop(this._btnClip))},l.prototype.setData=function(t){this._dat=t;var e=r.instance.getCfgByID(this._dat[0]),i=this._dat[2],n=e[1];this.conditionTxt.innerHTML="累计消费<span style='color:#b15315'>"+n+"</span>元宝可领取！",this.consumeTxt.color=n<=i?"#16ba17":"#FF3e3e",this.consumeTxt.text="("+i+"/"+n+")";for(var s=e[4],o=[this.reward0,this.reward1,this.reward2,this.reward3],a=0;a<4;a++)a<s.length?(o[a].visible=!0,o[a].dataSource=[s[a][0],s[a][1],0,null]):o[a].visible=!1;this.setBtnState()},l.prototype.setBtnState=function(){this.sureBtn.label="领取",this.sureBtn.skin="common/btn_tongyong_23.png",0==this._dat[1]?n.thisStop(this._btnClip):1==this._dat[1]?n.thisPlay(this._btnClip):(this.sureBtn.label="",this.sureBtn.skin="common/txt_commmon_ylq.png",n.thisStop(this._btnClip))},l.prototype.sureBtnHandler=function(){0!=e.WeekConsumeModel.instance.state&&(0==this._dat[1]?s.instance.addNotice("消费元宝数不足",!0):1==this._dat[1]&&e.WeekConsumeCtrl.instance.getWeekConsumeAward(this._dat[0]))},a=l,e.WeekConsumeItem=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){}e=t.weekConsume||(t.weekConsume={}),i=t.funcOpen.FuncOpenModel,n=t.redPoint.RedPointCtrl,Object.defineProperty(o,"instance",{get:function(){return this._instance=this._instance||new o},enumerable:!0,configurable:!0}),o.prototype.getWeekConsumeReply=function(t){this._state=t[0],this._time=t[1],this._arr=t[2],this.setFuncState(),n.instance.setRPProperty("weekConsumeRP",!1);for(var e=0;e<this._arr.length;++e)1==this._arr[e][1]&&n.instance.setRPProperty("weekConsumeRP",!0);GlobalData.dispatcher.event("WEEK_CONSUME_UPDATE")},Object.defineProperty(o.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"arr",{get:function(){return this._arr},enumerable:!0,configurable:!0}),o.prototype.setFuncState=function(){i.instance.setActionOpen(209,this._state?1:2)},s=o,e.WeekConsumeModel=s}(modules=modules||{}),function(t){var h,c,e,o,i,p,a,n;function s(){var t=c.call(this)||this;return t.VipConditionLevel=0,t.vipLevel=0,t}h=t.week_login||(t.week_login={}),e=ui.WeekLoginItemUI,o=t.bag.BagUtil,i=t.common.CustomClip,p=t.vip.VipModel,a=t.common.CommonUtil,c=e,__extends(s,c),s.prototype.destroy=function(t){void 0===t&&(t=!0),this._btnClip=this.destroyElement(this._btnClip),c.prototype.destroy.call(this,t)},s.prototype.initialize=function(){c.prototype.initialize.call(this),this.creatEffect()},s.prototype.onEvt=function(){c.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureBtnHandler),this.onAutoGlobalEvt("VIP_UPDATE",this,this._updateView),this.onAutoGlobalEvt("WEEK_LOGIN_UPDATE",this,this._updateView)},s.prototype.onOpened=function(){c.prototype.onOpened.call(this),this._btnClip.play()},s.prototype.close=function(){c.prototype.close.call(this),this._btnClip.stop()},s.prototype.creatEffect=function(){this._btnClip=i.createAndPlay("assets/effect/btn_light.atlas","btn_light",16,!1),this.addChild(this._btnClip),this._btnClip.pos(this.sureBtn.x-5,this.sureBtn.y-8),this._btnClip.scale(.8,.8),this._btnClip.visible=!1},s.prototype._updateView=function(){h.WeekLoginModel.instance.state||(this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!1,this.theEnd.visible=!0)},s.prototype.setData=function(t){c.prototype.setData.call(this,t),this.vipLevel=p.instance.vipLevel,this._cfg=t;var e=this._cfg[0],i=h.WeekLoginModel.instance.getNodeInfoById(e),n=0;if(i&&(n=i[1]),0===this._cfg[2])if(this.tomorrowIsOk.visible=!1,this.idText.text="今日登录可领取",this.idText.color="#395981",h.WeekLoginModel.instance.state){switch(n){case 0:this._btnClip.visible=!1,this.sureBtn.visible=!0,this.received.visible=!1;break;case 1:this._btnClip.visible=!0,this._btnClip.play(),this.sureBtn.visible=!0,this.received.visible=!1;break;case 2:this._btnClip.visible=!1;break;case 3:this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0;break;default:this._btnClip.visible=!1}this.VipConditionLevel=this._cfg[1]}else this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!1,this.theEnd.visible=!0;else 1===this._cfg[2]&&(this.idText.text="明日登录可领取",this.received.visible=!1,this.idText.color="#395981",this.sureBtn.visible=!1,this._btnClip.visible=!1,this.tomorrowIsOk.visible=!0);if(0!=this._cfg[1])if(this.VipConditionLevel=this._cfg[1],this.idText.text="SVIP"+this._cfg[1]+"可额外领取",this.idText.color="#395981",this.tomorrowIsOk.visible=!1,h.WeekLoginModel.instance.state)switch(n){case 0:this._btnClip.visible=!1,this.sureBtn.visible=!0,this.received.visible=!1;break;case 1:this.vipLevel>=this.VipConditionLevel?(this._btnClip.visible=!0,this._btnClip.play(),this.sureBtn.visible=!0,this.received.visible=!1):this._btnClip.visible=!1;break;case 2:this._btnClip.visible=!1;break;case 3:this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0;break;default:this._btnClip.visible=!1}else this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!1,this.theEnd.visible=!0;this._itemId=this._cfg[0];for(var s=[],o=this._cfg[3],a=0;a<o.length;a++)s.push(o[a][0]);var r=s.length,l=[];for(l.push(this.weekBase1),l.push(this.weekBase2),l.push(this.weekBase3),l.push(this.weekBase4),a=0;a<4;a++)a<r?(l[a].visible||(l[a].visible=!0),l[a].dataSource=[o[a][0],o[a][1],0,null]):l[a].visible=!1},s.prototype.sureBtnHandler=function(){if(this.tomorrowIsOk.visible=!1,0==this.VipConditionLevel){if(this.vipLevel>=this.VipConditionLevel){for(var t=[],e=0,i=(s=this._cfg[3]).length;e<i;e++){var n=s[e];t.push([n[0],n[1],0,null])}o.canAddItemsByBagIdCount(t)&&(h.WeekLoginCtrl.instance.getWeekLoginReward(this._itemId),this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0)}}else if(0!=this.VipConditionLevel)if(this.vipLevel>=this.VipConditionLevel){var s;for(t=[],e=0,i=(s=this._cfg[3]).length;e<i;e++)n=s[e],t.push([n[0],n[1],0,null]);o.canAddItemsByBagIdCount(t)&&(h.WeekLoginCtrl.instance.getWeekLoginReward(this._itemId),this._btnClip.visible=!1,this.sureBtn.visible=!1,this.received.visible=!0)}else a.alert("温馨提示","领取奖励需要SVIP"+this.VipConditionLevel+",是否前往提升SVIP?",[Handler.create(this,a.gotoVIP)])},n=s,h.WeekLoginItem=n}(modules=modules||{}),function(e){var t,i;function n(){this._state=!1,this._time=0,this._nodeList=[]}t=e.week_login||(e.week_login={}),Object.defineProperty(n,"instance",{get:function(){return this._instance=this._instance||new n},enumerable:!0,configurable:!0}),n.prototype.updateInfo=function(t){this.info=t,this._state=t[0],this._time=t[1],this._nodeList=t[2],this.setFuncState(),GlobalData.dispatcher.event("WEEK_LOGIN_UPDATE")},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nodeList",{get:function(){return this._nodeList},enumerable:!0,configurable:!0}),n.prototype.getNodeInfoById=function(t){var e=null;if(this._nodeList)for(var i=0,n=this._nodeList.length;i<n;i++){var s=this._nodeList[i];if(t===s[0]){e=s;break}}return e},n.prototype.setPayRewardRP=function(){var t=this.getgRadeRP();e.redPoint.RedPointCtrl.instance.setRPProperty("weekLoginRP",t)},n.prototype.getgRadeRP=function(){if(this.nodeList)for(var t=0;t<this.nodeList.length;t++){var e=this.nodeList[t];if(e&&1==e[1])return!0}return!1},n.prototype.setFuncState=function(){var t=this._state?1:2;e.funcOpen.FuncOpenModel.instance.setActionOpen(211,t)},i=n,t.WeekLoginModel=i}(modules=modules||{}),function(t){var e,a,i,n;function s(){this.loginDays=0,this.nowRound=0,this.nowFight=0,this.indexCount=0,this.taskList={},this.indexList={},this._isLoginCompleted=!1,this._isFightCompleted=!1,this._loginCount=this._roundCount=0,this.nextFight=this.nextRound=0}e=t.welfare_officer||(t.welfare_officer={}),a=t.redPoint.RedPointCtrl,i=t.funcOpen.FuncOpenModel,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setLoginInfo=function(t){this.loginDays=t[0];for(var e=t[1],i=!1,n=0,s=0,o=e.length;s<o;++s)this.taskList[e[s][0]]=e[s][1],1==e[s][1]&&(i=!0),n+=e[s][1];GlobalData.dispatcher.event("WELFARE_OFFICER_LOGIN_UPDATE"),a.instance.setRPProperty("fuliguanLoginRP",i),this._isLoginCompleted=n/2>=this.loginCount,this.checkClose()},s.prototype.setFightInfo=function(t){if(this.nextFight=t[2],this.nextRound=t[0],0<this.nowRound&&this.nextRound>this.nowRound){this.indexCount=12;for(var e=0;e<12;++e)this.indexList[e]=!0}else{this.nowFight=this.nextFight,this.nowRound=this.nextRound,this.nextFight=this.nextRound=0;var i=t[1];this.indexCount=i.length,this.indexList={},e=0;for(var n=i.length;e<n;++e)this.indexList[i[e]]=!0}this.waitForAnimation||GlobalData.dispatcher.event("WELFARE_OFFICER_FIGHT_UPDATE"),a.instance.setRPProperty("fuliguanFightRP",this.nextRound>this.nowRound||this.indexCount<12&&PlayerModel.instance.fight>=this.nowFight),this._isFightCompleted=this.nowRound>=this.roundCount&&12<=this.indexCount,this.checkClose()},s.prototype.checkClose=function(){this._isLoginCompleted&&this._isFightCompleted&&i.instance.setActionOpen(472,2)},Object.defineProperty(s.prototype,"loginCount",{get:function(){return this._loginCount||(this._loginCount=GlobalData.getConfig("welfare_officer_login").length),this._loginCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"roundCount",{get:function(){return this._roundCount||(this._roundCount=GlobalData.getConfig("welfare_officer_dial").length),this._roundCount},enumerable:!0,configurable:!0}),n=s,e.WelfareOfficerModel=n}(modules=modules||{}),function(t){var e,i,n,s;function o(){return i.call(this)||this}e=t.wx_module||(t.wx_module={}),n=t.common.BtnGroup,i=ui.wxBtnCtrclViewUI,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this._btns=new n,this._btns.setBtns(this.btnGroup_1,this.btnGroup_2,this.btnGroup_3,this.btnGroup_4),this.windowEnumInfo=[1165,1166,1167,1168]},o.prototype.destroy=function(){this._btns=this.destroyElement(this._btns),i.prototype.destroy.call(this)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.regAutoRP(this.rpImg1,["vxShpreAlert"]),this.regAutoRP(this.rpImg2,["vxHelpAlert"]),this.regAutoRP(this.rpImg3,["vxUpgradeAlert"]),this.regAutoRP(this.rpImg4,["vxPlayAlert"]),this.onAutoEvt(this._btns,"change",this,this.btnsChangeHandler)},o.prototype.setData=function(t){this._selectIndex=t,this._btns.selectedIndex=t,this.closeOthers()},o.prototype.closeOthers=function(){for(var t=0,e=this.windowEnumInfo.length;t<e;t++)t!==this._selectIndex&&WindowManager.instance.close(this.windowEnumInfo[t])},o.prototype.btnsChangeHandler=function(){this._btns.selectedIndex!==this._selectIndex&&WindowManager.instance.open(this.windowEnumInfo[this._btns.selectedIndex])},s=o,e.wxBtnCtrlPanel=s}(modules=modules||{}),function(o){var a,i,r,n,t;function e(){return i.call(this)||this}a=o.wx_module||(o.wx_module={}),r=o.bag.BagUtil,n=o.config.ShareAwardsCfg,i=ui.wxHelpItemUI,__extends(e,i),e.prototype.initialize=function(){i.prototype.initialize.call(this),this.recState=1},e.prototype.destroy=function(){i.prototype.destroy.call(this)},e.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this.reciveBtn,this,this.reciveHanlder),this.onAutoGlobalEvt("SHARE_INFO_UPDATA",this,this.updataView)},e.prototype.setData=function(t){i.prototype.setData.call(this,t),this.type=t[0],this.share=t[1];var e=n.instance.getTypeByCfgs(this.type);this.cfg=e[0],this.rankIndex=t[2],this.updataView()},e.prototype.updataView=function(){if(a.wxShareModel.instance.data){var t=this.share,e=0;this.recState=a.wxShareModel.instance.getShareInviteState(t,this.type),t?(this.rankTxt.text=t[2],this.headIcon.setInfo(t[3],t[1],t[4]),e=t[5],this.noBodyTxt.visible=!1):(this.noBodyTxt.visible=!0,this.rankTxt.text="第"+(this.rankIndex+1)+"位好友",this.headIcon.setInfo(-1,0,0)),this.lvTxt.color=e>=this.cfg[2]?"#50ff28":"#ff3e3e",this.lvTxt.stroke=e>=this.cfg[2]?0:2,this.lvTxt.text=e+"/"+this.cfg[2];var i=this.cfg[4];this.rewardTxt.text="奖励:"+i[1],this.rewardIcon.x=this.rewardTxt.textWidth+this.rewardTxt.x,this.rewardIcon.skin=CommonUtil.getIconById(i[0]),2===this.recState?this.playEff():this.stopEff(),this.receivedImg.visible=3===this.recState,this.reciveBtn.visible=3!=this.recState}},e.prototype.onOpened=function(){i.prototype.onOpened.call(this)},e.prototype.reciveHanlder=function(){if(a.wxShareModel.instance.data){var t=this.share;if(2===this.recState){var e=[],i=this.cfg[4];if(i){for(var n=0,s=i.length;n<s;n+=2)e.push([i[n],i[n+1],0,null]);r.canAddItemsByBagIdCount(e)&&a.wxShareCtrl.instance.getShareAwards(this.cfg[0],t[0])}}else 1===this.recState?o.notice.SystemNoticeManager.instance.addNotice("领取条件不足",!0):o.notice.SystemNoticeManager.instance.addNotice("已领取",!0)}},e.prototype.close=function(){i.prototype.close.call(this)},e.prototype.playEff=function(){this._btnClip||(this._btnClip=CommonUtil.creatEff(this.reciveBtn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(.8,.8,!0)),this._btnClip.play(),this._btnClip.visible=!0},e.prototype.stopEff=function(){this._btnClip&&(this._btnClip.stop(),this._btnClip.visible=!1)},t=e,a.wxHelpItem=t}(modules=modules||{}),function(t){var s,o,e,a,i;function n(){return o.call(this)||this}s=t.wx_module||(t.wx_module={}),e=t.common.CustomClip,a=t.bag.BagUtil,o=ui.wxShareItemUI,__extends(n,o),n.prototype.initialize=function(){o.prototype.initialize.call(this),this.continueBaseArr=[this.continueBase1,this.continueBase2,this.continueBase3],CommonUtil.setHTMLPro(this.StatementHTML,"#ffffff","SimHei",24),this.StatementHTML.style.wordWrap=!0},n.prototype.destroy=function(){this._btnClip=this.destroyElement(this._btnClip),this.continueBaseArr=this.destroyElement(this.continueBaseArr),this.cfg=null,o.prototype.destroy.call(this)},n.prototype.onEvt=function(){o.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHanlder)},n.prototype.setData=function(t){o.prototype.setData.call(this,t),this.type=t[0],this.cfg=t[1];for(var e=0;e<3;e++)this.continueBaseArr[e].visible=!1;for(var i=this.cfg[4],n=(e=0,i.length);e<n;e+=2)this.continueBaseArr[e/2].dataSource=[i[e],i[e+1],0,null],this.continueBaseArr[e/2].visible=!0;this.updataView()},n.prototype.updataView=function(){var t=s.wxShareModel.instance.data;if(t){var e=s.wxShareModel.instance.getState(this.cfg[0],this.type);1===e?(this.receivedImg.visible=!0,this.receivedImg.skin="common/txt_commmon_wdc.png",this.sureBtn.visible=!1,this.stopEff()):2===e?(this.receivedImg.visible=!1,this.sureBtn.visible=!0,this.playEff()):(this.receivedImg.visible=!0,this.receivedImg.skin="common/txt_commmon_ylq.png",this.sureBtn.visible=!1,this.stopEff());var i=1===e?"#ff3e3e":"#00AD35",n=0;1===this.type?(n=t[1],this.StatementHTML.innerHTML="累计分享"+this.cfg[2]+"次<span style='color:"+i+"'>("+n+"/"+this.cfg[2]+")</span>"):4===this.type&&(n=t[3],this.StatementHTML.innerHTML="已累计邀请新用户<span style='color:"+i+"'>("+n+"/"+this.cfg[2]+")</span>")}},n.prototype.close=function(){o.prototype.close.call(this),this.stopEff()},n.prototype.sureHanlder=function(){if(2===s.wxShareModel.instance.getState(this.cfg[0],this.type)){var t=[],e=this.cfg[4];if(e){for(var i=0,n=e.length;i<n;i+=2)t.push([e[i],e[i+1],0,null]);a.canAddItemsByBagIdCount(t)&&s.wxShareCtrl.instance.getShareAwards(this.cfg[0],0)}}},n.prototype.playEff=function(){this._btnClip||(this._btnClip=CommonUtil.creatEff(this.sureBtn,"btn_light",15),this._btnClip.pos(-5,-10,!0),this._btnClip.scale(1,1,!0)),e.thisPlay(this._btnClip)},n.prototype.stopEff=function(){e.thisStop(this._btnClip)},i=n,s.wxShareItem=i}(modules=modules||{}),function(t){var e,g,r,i;function n(){this.shareGold=0}e=t.wx_module||(t.wx_module={}),g=t.config.ShareAwardsCfg,r=t.redPoint.RedPointCtrl,Object.defineProperty(n,"instance",{get:function(){return this._instance=n._instance||new n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRecCollect",{get:function(){return!this.data||-1<(this.getDrawArrByType(5)||[]).indexOf(5)},enumerable:!0,configurable:!0}),n.prototype.updateShareCoin=function(t){t&&(this.shareGold=t[0],this.setRP(),console.log("打印分享币:  ",t),GlobalData.dispatcher.event("UPDATA_SHARE_COIN"))},n.prototype.shareExchangeInfoReply=function(t){t&&(this.ShareExchangeData=t,this.setRP(),console.log("打印兑换数据:  ",t),GlobalData.dispatcher.event("SHARE_EXCHANGE_UPDATE"))},n.prototype.getShareInfoReply=function(t){t&&(this.data=t,console.log("打印分享数据_..:  ",t),this.setRP(),GlobalData.dispatcher.event("SHARE_INFO_UPDATA"))},n.prototype.getMallNodeById=function(t){for(var e=this.ShareExchangeData[0],i=0,n=e.length;i<n;i++)if(e[i][0]===t)return e[i];return null},n.prototype.setRP=function(){if(this.data){for(var t=["vxShpreAlert","vxHelpAlert","vxUpgradeAlert","vxPlayAlert"],e=[!1,!1,!1,!1],i=1;i<=4;i++){var n=g.instance.getTypeByCfgs(i);if(n)if(2===i||3===i)for(var s=this.shareInviteStateSort(i),o=0,a=s.length;o<a;o++){2===this.getShareInviteState(s[o],i)&&(e[i-1]=!0);break}else for(o=0;o<n.length;o++)if(2===this.getState(n[o][0],i)){r.instance.setRPProperty(t[i-1],!0),e[i-1]=!0;break}}for(o=0;o<4;o++)r.instance.setRPProperty(t[o],e[o])}},n.prototype.shareInviteStateSort=function(t){for(var e=g.instance.getTypeByCfgs(t),i=e[e.length-1][3],n=this.data[5],s=[],o=[],a=[],r=n.length,l=0;l<r;l++){var h=this.getShareInviteState(n[l],t);1===h?s.push(n[l]):2===h?o.push(n[l]):3===h&&a.push(n[l])}function c(t,e){return e[5]-t[5]}if(s.sort(c),o.sort(c),a.sort(c),r<=i){for(l=r;l<i;l++)s.push(null);return o.concat(s).concat(a)}if(a.length>=i){var p=[];for(l=0;l<i;l++)p.push(a[l]);return p}var u=o.concat(s),d=u.length,y=i-a.length;if(d<y){for(l=0;l<y-d;l++)u.push(null);return u.concat(a)}for(p=[],l=0;l<y;l++)p.push(u[l]);return p.concat(a)},n.prototype.getShareInviteState=function(t,e){if(this.data)return t&&t[5]>=g.instance.getTypeByCfgs(e)[0][2]?-1<this.getDrawArrByType(e).indexOf(t[0])?3:2:1},n.prototype.listSort=function(t,e){for(var i=t.length,n=i,s=[3,1,2],o=0;o<i;o++){for(var a=0,r=0;r<n;r++){var l=s.indexOf(this.getState(t[r][0],e)),h=s.indexOf(this.getState(t[a][0],e));l<h?a=r:l===h&&t[r]>t[a]&&(a=r)}var c=t[a];t[a]=t[n-1],t[n-1]=c,n--}return t},n.prototype.getDrawArrByType=function(t){if(!this.data)return[];for(var e=this.data[4],i=0,n=e.length;i<n;i++)if(t===e[i][0])return e[i][1];return[]},n.prototype.getState=function(t,e){return this.data?(1===e?this.data[1]:this.data[3])<g.instance.getIdAndTypeByCfg(t,e)[2]?1:-1<this.getDrawArrByType(e).indexOf(t)?3:2:1},n.prototype.openTabAlert=function(){for(var t=["vxShpreAlert","vxHelpAlert","vxUpgradeAlert","vxPlayAlert"],e=[1165,1166,1167,1168],i=0,n=0,s=e.length;n<s;n++)if(r.instance.getRPProperty(t[n])){i=n;break}WindowManager.instance.open(e[i])},i=n,e.wxShareModel=i}(modules=modules||{}),function(a){var t,e,i;function r(){}t=a.yuanShen||(a.yuanShen={}),e=a.config.BlendCfg,r.formatId=function(t,e,i){return 1e6*t+1e3*e+i},r.getTypeById=function(t){return(t/1e5>>0)%100-1},r.formatQuenchingId=function(t,e){return 1e4*t+e},r.typeStrs=function(t){return e.instance.getCfgById(80001+t)[2][0]},r.qualityByIndex=function(t){return"凡灵珍极绝神圣"[t]},r.typeNameByIndex=function(t){return"金木水火土"[t]},r.isYuanshenEquip=function(t){var e=t/1e5>>0;return 801<e&&e<807},r.isFulingItem=function(t){var e=t/1e5>>0;return 8===CommonUtil.getItemTypeById(t)&&807<=e&&e<=811},r.getFulingQualityById=function(t){return(t/100>>0)%10},r.getLvById=function(t){return t%100},r.getFulingColorById=function(t){var e=(t/100>>0)%10;return CommonUtil.getColorByQuality(e)},r.getFulingType=function(t){return(t/1e5>>0)%100-6},r.getFulingSubType=function(t){return(t/1e3>>0)%100},r.getItemsByBagIdType=function(t,e){for(var i=a.bag.BagModel.instance.getItemsByBagId(t),n=[],s=0,o=i.length;s<o;s++)r.getFulingType(i[s][0])===e&&n.push(i[s]);return n},i=r,t.YuanShenUtil=i}(modules=modules||{}),function(t){var c,n,p,s,o,e;function i(){return n.call(this)||this}c=t.wx_module||(t.wx_module={}),p=t.notice.SystemNoticeManager,s=t.yuanShen.YuanShenUtil,o=t.config.ItemRuneCfg,n=ui.wxShopItemUI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this)},i.prototype.destroy=function(){n.prototype.destroy.call(this)},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoClick(this.sureBtn,this,this.sureHanlder),this.onAutoGlobalEvt("SHARE_EXCHANGE_UPDATE",this,this.updataView),this.onAutoGlobalEvt("UPDATA_SHARE_COIN",this,this.updataView)},i.prototype.setData=function(t){n.prototype.setData.call(this,t),this.cfg=t;var e=this.cfg[1];this.item.dataSource=[e[0],e[1],0,null],this.itemName.text=this.getNameUtlis(e[0]);var i=this.cfg[2];this.currencyIcon.skin=CommonUtil.getIconById(i[0]),this.updataView()},i.prototype.updataView=function(){var t=c.wxShareModel.instance.getMallNodeById(this.cfg[0])||[0,0],e=this.cfg[2][1],i=c.wxShareModel.instance.shareGold;this.currencyPrice.color=e<=i?"#2d1a1a":"#ff3e3e",this.currencyPrice.text=i+"/"+e;var n=t[1],s=this.cfg[5];this.buyCount.text="("+n+"/"+s+")",this.buyCount.color=n<s?"#00ad35":"#ff3e3e",this.offset()},i.prototype.offset=function(){var t=this.sureBtn.x+this.sureBtn.width*this.sureBtn.scaleX;this.buyCount.x=t-this.buyCount.textWidth,this.buyMsc.x=this.buyCount.x-this.buyMsc.textWidth},i.prototype.close=function(){n.prototype.close.call(this)},i.prototype.sureHanlder=function(){var e=this,t=c.wxShareModel.instance.getMallNodeById(this.cfg[0])||[0,0],i=this.cfg[2][1],n=c.wxShareModel.instance.shareGold;if(n<i)p.instance.addNotice("分享币不足",!0);else{var s=t[1],o=this.cfg[5];if(o<=s)p.instance.addNotice("兑换次数已达上限",!0);else{var a=Handler.create(this,function(t){c.wxShareCtrl.instance.shareExchange(e.cfg[0],t)}),r=this.cfg[2][1],l=[this.cfg[1][0],this.cfg[1][1],0,null],h=[[this.cfg[2][0]],[n],[r],l,a,o-s];WindowManager.instance.open(469,h)}}},i.prototype.getNameUtlis=function(t){if(CommonUtil.getItemTypeById(t),s.isFulingItem(t),7===CommonUtil.getItemTypeById(t)){var e=1e4*(1e-4*t>>0),i=o.instance.getCfgById(e);return i&&i[1]}var n=CommonUtil.getItemCfgById(t);return n&&n[1]+""},e=i,c.wxShopItem=e}(modules=modules||{}),function(t){var l,e,i,h,n;function s(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSelectedIndex=!1,t}l=t.xianDan||(t.xianDan={}),i=ui.XianDanIconUI,h=t.config.XianDanCfg,e=i,__extends(s,e),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("XIANDAN_INFO_UPDATE",this,this.update),this.onAutoGlobalEvt("XIANDAN_ITEMS_UPDATE",this,this.update),this.onAutoGlobalEvt("MAGIC_POSITION_UPDATE",this,this.update),this.onAutoGlobalEvt("VIP_UPDATE",this,this.update)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},s.prototype.update=function(){var t=h.instance.getIdsBySId(this.id),e=l.XianDanModel.instance.getUseCountBySId(this.id);if(l.XianDanModel.instance.getLimitByVipLv()<=e)this.rpImg.visible=!1,this.isSelectedIndex=!1;else{for(var i=0,n=t;i<n.length;i++){var s=n[i],o=l.XianDanModel.instance.getItemCountById(s),a=l.XianDanModel.instance.getUseCountById(s),r=l.XianDanModel.instance.getLimit(s);if(0<o&&a<r)return this.rpImg.visible=!0,void(this.isSelectedIndex=!0)}this.rpImg.visible=!1,this.isSelectedIndex=!1}},n=s,l.XianDanIcon=n}(modules=modules||{}),function(t){var l,e,i,h,c,p,n;function s(){return null!==e&&e.apply(this,arguments)||this}l=t.xianDan||(t.xianDan={}),i=ui.XianDanItemUI,h=t.config.XianDanCfg,c=t.config.ItemMaterialCfg,p=t.common.AttrUtil,e=i,__extends(s,e),s.prototype.setData=function(t){this.item.dataSource=[t,0,0,null],this.item.isbtnClipIsPlayer=!1;var e=c.instance.getItemCfgById(t)[1];this.nameTxt.text=e;var i=l.XianDanModel.instance.getItemCountById(t);this.countTxt.text="拥有:"+i;var n=h.instance.getCfgById(t)[1],s=l.XianDanModel.instance.getUseCountById(t),o=n[1]*s,a=p.getResultByAttr([n[0],o]);this.attrTxt.text=a.name;var r=l.XianDanModel.instance.getLimit(t);this.valueTxt.text="+"+a.value,this.proTxt.text="("+s+"/"+r+")",this.proTxt.color=r<=s?"#ff3e3e":"#344c6f"},n=s,l.XianDanItem=n}(modules=modules||{}),function(c){var t,a,p,s,e;function u(){this._idsInfo=[],this._useCount={},this._items={}}t=c.xianDan||(c.xianDan={}),a=c.magicPosition.MagicPositionModel,p=c.config.XianDanCfg,s=c.config.BlendCfg,Object.defineProperty(u,"instance",{get:function(){return this._instance=this._instance||new u},enumerable:!0,configurable:!0}),u.prototype.updateInfo=function(t){var e=t[0];this._useCount[e]=t[2];for(var i=0,n=t[1];i<n.length;i++){var s=n[i],o=s[0],a=s[1];this._idsInfo[o]=a}GlobalData.dispatcher.event("XIANDAN_INFO_UPDATE"),this.checkRP()},Object.defineProperty(u.prototype,"items",{set:function(t){this._items={};for(var e=0,i=t;e<i.length;e++){var n=i[e],s=n[0],o=n[1];this._items[s]=o}GlobalData.dispatcher.event("XIANDAN_ITEMS_UPDATE"),this.checkRP()},enumerable:!0,configurable:!0}),u.prototype.checkRP=function(){for(var t=0,e=p.instance.sIds;t<e.length;t++){var i=e[t],n=this.getUseCountBySId(i);if(!(this.getLimitByVipLv()<=n))for(var s=0,o=p.instance.getIdsBySId(i);s<o.length;s++){var a=o[s],r=u.instance.getItemCountById(a),l=u.instance.getUseCountById(a),h=u.instance.getLimit(a);if(0<r&&l<h)return void c.redPoint.RedPointCtrl.instance.setRPProperty("xianDanRP",!0)}}c.redPoint.RedPointCtrl.instance.setRPProperty("xianDanRP",!1)},u.prototype.getLimit=function(t){for(var e=p.instance.getCfgById(t),i=a.Instance.position,n=0,s=e[2];n<s.length;n++){var o=s[n];if(o[0]===i)return o[1]}},u.prototype.getLimitByVipLv=function(){for(var t=c.vip.VipModel.instance.vipLevel,e=s.instance.getCfgById(50001)[1],i=0,n=e.length;i<n;i+=2)if(t<e[i])return e[i-1];return e[e.length-1]},u.prototype.getUseCountById=function(t){return this._idsInfo[t]?this._idsInfo[t]:0},u.prototype.getUseCountBySId=function(t){return this._useCount[t]?this._useCount[t]:0},u.prototype.getItemCountById=function(t){return this._items[t]?this._items[t]:0},e=u,t.XianDanModel=e}(modules=modules||{}),function(t){var e,i;function n(){}e=t.xianDan||(t.xianDan={}),n.names=["攻击","生命","防御","破防","命中","闪避","暴击","韧性"],i=n,e.XianDanUtil=i}(modules=modules||{}),function(t){var e,i,n,s;function o(){return null!==i&&i.apply(this,arguments)||this}e=t.yuanShen||(t.yuanShen={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.needTip=!1,this.frameImg.skin="yuan_shen/selected_common_iconxzk4.png",this.frameImg.pos(-5,-5,!0)},o.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.update)},o.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.update()},Object.defineProperty(o.prototype,"part",{set:function(t){this._part=t},enumerable:!0,configurable:!0}),o.prototype.setData=function(t){this._typeIndex=t},o.prototype.update=function(){var t=e.YuanShenModel.instance.getEquipByTypePart(this._typeIndex+1,this._part);t?(this.dataSource=t,this.visible=!0):this.visible=!1},o.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.frameImg.visible=t},s=o,e.YuanShenFulingItem=s}(modules=modules||{}),function(t){var o,e,i,s,a,r,n;function l(){return null!==e&&e.apply(this,arguments)||this}o=t.yuanShen||(t.yuanShen={}),i=ui.YuanShenFulingPropItemUI,s=t.config.ItemFulingCfg,a=t.common.AttrUtil,r=t.config.BlendCfg,e=i,__extends(l,e),l.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.updateRP)},l.prototype.setData=function(t){this._typeIndex=t[0],this._part=t[1],this._slot=t[2],this.item.dataSource=t[3],this._itemId=t[3][0],-1===o.YuanShenModel.instance.getExistSubTypes(this._typeIndex+1,this._part,this._slot).indexOf(o.YuanShenUtil.getFulingSubType(this._itemId))?this.maskImg.visible=!1:this.maskImg.visible=!0;var e=o.YuanShenUtil.getFulingColorById(this._itemId);this.nameTxt.color=e;var i=s.instance.getCfgById(this._itemId);this.nameTxt.text=i[1];var n=a.getResultByAttrIndex(i[5],0);this.attrTxt.text=n.name+"+"+n.value,this.updateRP()},l.prototype.updateRP=function(){if(this.maskImg.visible)this.rpImg.visible=!1;else{this.rpImg.visible=!1;var t=r.instance.getCfgById(82002)[1][0];if(CommonUtil.getPropCountById(90140001)<t)this.rpImg.visible=!1;else{var e=o.YuanShenModel.instance.getFulingByTypePartSlot(this._typeIndex+1,this._part,this._slot),i=0;if(e&&(i=e[3]),0!==i){var n=CommonUtil.getItemCfgById(this._itemId),s=CommonUtil.getItemCfgById(i);n[7]>s[7]?this.rpImg.visible=!0:this.rpImg.visible=!1}else this.rpImg.visible=!0}}},l.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},n=l,o.YuanShenFulingPropItem=n}(modules=modules||{}),function(t){var a,e,i,r,o,l,h,c,n;function s(){return null!==e&&e.apply(this,arguments)||this}a=t.yuanShen||(t.yuanShen={}),i=ui.YuanShenFulingSlotItemUI,r=t.config.BlendCfg,o=t.bag.BagUtil,l=t.config.ItemFulingCfg,h=t.common.AttrUtil,c=t.notice.SystemNoticeManager,e=i,__extends(s,e),Object.defineProperty(s.prototype,"typeIndex",{set:function(t){this._typeIndex=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"part",{set:function(t){this._part=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{set:function(t){this._index=t,this.update()},enumerable:!0,configurable:!0}),s.prototype.onEvt=function(){e.prototype.onEvt.call(this),this.onAutoGlobalEvt("YUAN_SHEN_INFO_UPDATE",this,this.update),this.onAutoGlobalEvt("BAG_UPDATE",this,this.checkRP)},s.prototype.onOpened=function(){e.prototype.onOpened.call(this),this.update()},s.prototype.update=function(){if(this.initView(),null!=this._typeIndex&&null!=this._part&&null!=this._index&&(this._info=a.YuanShenModel.instance.getFulingByTypePartSlot(this._typeIndex+1,this._part,this._index),this._info)){if(0!==this._part&&this._info[2]){this.txt.color="#50ff28";var t=this._info[3],e=l.instance.getCfgById(t);if(e){var i=h.getResultByAttrIndex(e[5],0);this.txt.text=e[1].substring(0,e[1].length-3)+":"+i.name+"+"+i.value;var n=a.YuanShenUtil.getFulingColorById(t);this.txt.color=n}else this.txt.text="未附灵",this.txt.color="#ffffff";this.closeBgImg.visible=this.lockImg.visible=!1,this.openBgImg.visible=!0}else{if(this.txt.color="#ff3e3e",0===this._part)this.txt.text="灵装未穿戴";else{var s=r.instance.getCfgById(82003)[1][this._index],o=r.instance.getCfgById(82001)[1][this._index];this.txt.text=0!=s&&0===o?"灵装"+s+"星开启":"开孔锤开启"}this.openBgImg.visible=!1,this.lockImg.visible=this.closeBgImg.visible=!0}this.checkRP()}},s.prototype.checkRP=function(t){null!=t&&0!==t||(this.rpImg.visible=a.YuanShenModel.instance.checkFulingSlotRP(this._typeIndex+1,this._part,this._index))},s.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.frameImg.visible=t},s.prototype.clickHandler=function(){var t=this;if(this._info){if(!this._info[2]){var e=r.instance.getCfgById(82003)[1][this._index],i=r.instance.getCfgById(82001)[1][this._index];if(0!=e&&0===i)c.instance.addNotice("灵装"+e+"星开启",!0);else if(CommonUtil.conditionItemIsEnough([a.YuanShenModel.kaiKongChuiId,i])){var n="是否消耗<img src='"+CommonUtil.getIconById(a.YuanShenModel.kaiKongChuiId)+'\' width="40" height="40"/>'+CommonUtil.getNameByItemId(a.YuanShenModel.kaiKongChuiId)+"×"+i+"解锁附灵槽?",s=Handler.create(this,function(){a.YuanShenCtrl.instance.openYuanshenFulingSlot(t._typeIndex+1,t._part,t._index)});CommonUtil.alert("温馨提示",n,[s])}else o.openLackPropAlert(a.YuanShenModel.kaiKongChuiId,i)}}else c.instance.addNotice("穿戴灵装后可附灵",!0)},s.prototype.initView=function(){this.txt.text="穿戴灵装后开启",this.txt.color="#ff3e3e",this.lockImg.visible=this.closeBgImg.visible=!0,this.frameImg.visible=this.rpImg.visible=!1},s.prototype.destroy=function(){this._info=null,e.prototype.destroy.call(this)},n=s,a.YuanShenFulingSlotItem=n}(modules=modules||{}),function(e){var f,n,s,o,a,_,r,m,l,h,v,c,p,u,t;function b(){this.inx=-1,this._infos=[],this._fulingList=[],this.viewData=null}f=e.yuanShen||(e.yuanShen={}),n=e.config.YuanShenRefineCfg,s=e.config.YuanShenImmortalCfg,o=e.config.YuanShenQuenchingCfg,a=e.redPoint.RedPointCtrl,_=e.bag.BagModel,r=e.funcOpen.FuncOpenModel,m=e.config.BlendCfg,l=e.config.ItemFulingCfg,h=e.config.SkillCfg,v=e.config.YuanshenSkillCfg,c=e.config.YuanshenSkillMasterCfg,p=e.config.YuanshenArtifactCfg,u=e.config.YuanshenArtifactSkillCfg,Object.defineProperty(b,"instance",{get:function(){return this._instance=this._instance||new b},enumerable:!0,configurable:!0}),b.prototype.updateYuanShenArtifact=function(t){var e=this._infos[t[0]-1];e[9]=t[1],e[10]=t[2];for(var i=!1,n=0,s=this._infos.length;n<s;n++)if(this.checkRPByType(this._infos[n][0])){i=!0;break}GlobalData.dispatcher.event("YUAN_SHEN_INFO_UPDATE"),a.instance.setRPProperty("yuanShenRP",i)},Object.defineProperty(b.prototype,"infos",{get:function(){return this._infos},set:function(t){this._infos=t,GlobalData.dispatcher.event("YUAN_SHEN_INFO_UPDATE");for(var e=!1,i=0,n=t.length;i<n;i++)if(this.checkRPByType(t[i][0])){e=!0;break}a.instance.setRPProperty("yuanShenRP",e)},enumerable:!0,configurable:!0}),b.prototype.getInfoById=function(t){for(var e=0,i=this._infos;e<i.length;e++){var n=i[e];if(t===n[0])return n}return[0,0,0,0,0,[],0,0,[],0,0]},b.prototype.getIsOpenById=function(t){var e=this._infos[t-1];return!!e&&1===e[3]},b.prototype.getEquipByTypePart=function(t,e){var i=this.getInfoById(t);if(!i)return null;for(var n=0,s=i[5];n<s.length;n++){var o=s[n];if(e===o[0])return o[1]}return null},Object.defineProperty(b.prototype,"grade",{set:function(t){var e=this.getInfoById(t[0]);e[1]=t[1],e[2]=t[2],e[4]=t[3],e[6]=t[4],e[7]=t[5],GlobalData.dispatcher.event("YUAN_SHEN_INFO_UPDATE"),this.checkRP()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"state",{set:function(t){this.getInfoById(t[0])[3]=t[1],GlobalData.dispatcher.event("YUAN_SHEN_INFO_UPDATE"),this.checkRP()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"equip",{set:function(t){var e=t[0],i=this.getInfoById(e);if(i){i[8]=t[2];var n=i[5];t:for(var s=0,o=t[1];s<o.length;s++){for(var a=o[s],r=0,l=n.length;r<l;r++)if(n[r][0]===a[0]){n[r]=a;continue t}i[5].push(a)}i[5].sort(function(t,e){return t[0]<e[0]?-1:1}),GlobalData.dispatcher.event("YUAN_SHEN_INFO_UPDATE"),this.checkRP()}},enumerable:!0,configurable:!0}),b.prototype.checkRP=function(t){if(r.instance.getFuncIsOpen(343)&&(null==t||0===t||9===t||10===t)){for(var e=!1,i=0,n=this._infos.length;i<n;i++)if(this.checkRPByType(this._infos[i][0])){e=!0;break}a.instance.setRPProperty("yuanShenRP",e)}},b.prototype.checkRPByType=function(t){if(!r.instance.getFuncIsOpen(343))return!1;var e=this._infos[t-1];return 0!==e[3]&&(this.checkRefineRP(e)||this.checkEquipRP(e)||this.checkFulingRP(e)||this.checkSkillRP(e)||this.checkWeaponRP(e)||!1)},b.prototype.checkRPByTabIndex=function(t,e){if(!r.instance.getFuncIsOpen(343))return!1;var i=this._infos[e];return 0!==i[3]&&(0===t?this.checkRefineRP(i)&&!!i[3]:1===t?(this.checkEquipRP(i)||this.checkFulingRP(i))&&!!i[3]:2===t?this.checkSkillRP(i)&&!!i[3]:3===t&&this.checkWeaponRP(i)&&!!i[3])},b.prototype.checkRefineRP=function(t){var e=f.YuanShenUtil.formatId(t[0],t[1],t[2]);if(n.instance.getCfgId(e,1)){var i=n.instance.getCfgId(e)[1];if(_.instance.getItemCountById(i[0])>=i[1]-t[7])return!0}return!!this.checkImmortalRP(t)||!!this.checkQuenchingRP(t)||void 0},b.prototype.checkImmortalRP=function(t){var e=1e4*t[0]+t[6];if(!s.instance.getCfgId(e+1))return!1;var i=s.instance.getCfgId(e);return 1e3*t[1]+t[2]>=i[1]},b.prototype.checkQuenchingRP=function(t){var e=t[0];if(!o.instance.has(e,t[4]+1))return!1;var i=o.instance.getDataByIdLvField(e,t[4],7);if(1e3*t[1]+t[2]>=i){var n=o.instance.getDataByIdLvField(e,t[4],1);if(CommonUtil.conditionItemIsEnough(n))return!0}return!1},b.prototype.checkEquipRP=function(t){for(var e=this.getBestEquipDic(t[0]),i=1;i<9;i++)if(e[i])return!0;return!1},b.prototype.checkFulingRP=function(t){for(var e=t[0],i=1;i<9;i++)for(var n=0;n<5;n++)if(this.checkFulingSlotRP(e,i,n))return!0;return!1},b.prototype.getSkillIndex=function(t){if(!t)return-1;var e=t[0],i=this.getSkillData(e);if(!i)return-1;var n=i[1],s=n.length;if(s<5&&0<=s){var o=61e6+1e4*(5*e-5+((n?n.length:0)+1)),a=(d=v.instance.getCfgById(o))[3],r=d[4];if(0<=a&&0<=r){var l=this.infos[e-1],h=1e3*l[1]+l[2],c=l[4],p=_.instance.getItemCountById(d[2][0]);if((y=d[2][1])<=p&&a<=h&&r<=c)return n.length}}if(0<s)for(var u=0;u<s;u++){var d=v.instance.getCfgById(n[u]),y=(p=_.instance.getItemCountById(d[2][0]),d[2][1]);if(a=d[3],r=d[4],0<=a&&0<=r){var g=this.infos[e-1];if(h=1e3*g[1]+g[2],c=g[4],y<=p&&a<=h&&r<=c)return u}}return-1},b.prototype.checkSkillRP=function(t){return-1<this.getSkillIndex(t)&&e.funcOpen.FuncOpenModel.instance.getFuncIsOpen(654)},b.prototype.checkWeaponRP=function(t){var e=t[9],i=1e3*t[0]+e+1>>0,n=p.instance.getCfgById(i),s=!1;if(n){var o=n[2];s=_.instance.getItemCountById(o[0])>=o[1]}var a=s||this.getWeapSkillRpByType(t[0]);return r.instance.getFuncIsOpen(835)&&a},b.prototype.getBestEquipDic=function(t){for(var e=_.instance.getItemsByBagId(9),i={},n=0,s=e.length;n<s;n++){var o=e[n],a=o[0];if(t===f.YuanShenUtil.getTypeById(a)){var r=PlayerModel.instance.eraLevel,l=PlayerModel.instance.level,h=CommonUtil.getItemCfgById(a);if(!(r<h[3]||l<h[4])){var c=CommonUtil.getPartById(a),p=i[c];(!(p=p||b.instance.getEquipByTypePart(t,c))||o[3][6]>p[3][6])&&(i[c]=o)}}}return i},Object.defineProperty(b.prototype,"fulingList",{set:function(t){this._fulingList=t,this.checkRP(),GlobalData.dispatcher.event("YUAN_SHEN_INFO_UPDATE")},enumerable:!0,configurable:!0}),b.prototype.getFulingByTypePartSlot=function(t,e,i){for(var n=0,s=this._fulingList;n<s.length;n++){var o=s[n];if(o[0]===t)for(var a=0,r=o[1];a<r.length;a++){var l=r[a];if(l[0]===e&&l[1]===i)return l}}},b.prototype.setFulingByTypePartSlot=function(t,e,i,n){for(var s=-1,o=0,a=this._fulingList.length;o<a;o++)if(this._fulingList[o][0]===t){s=o;break}if(-1!==s){var r=this._fulingList[s][1];for(o=0,a=r.length;o<a;o++)if(r[o][0]===e&&r[o][1]===i){s=o;break}-1!==s?r[s]=n:r.push(n)}else this._fulingList.push([t,[n]])},b.prototype.updateFuling=function(t){var e=t[0],i=t[1],n=i[0],s=i[1];this.setFulingByTypePartSlot(e,n,s,i),GlobalData.dispatcher.event("YUAN_SHEN_INFO_UPDATE")},b.prototype.getExistSubTypes=function(t,e,i){for(var n=[],s=0;s<5;s++)if(s!==i){var o=b.instance.getFulingByTypePartSlot(t,e,s);o&&o[3]&&n.push(f.YuanShenUtil.getFulingSubType(o[3]))}return n},b.prototype.checkFulingSlotRP=function(t,e,i){if(!this.getEquipByTypePart(t,e))return!1;var n=m.instance.getCfgById(82002)[1][0];if(CommonUtil.getPropCountById(90140001)<n)return!1;var s=this.getFulingByTypePartSlot(t,e,i);if(!s)return!1;if(!s[2]){var o=m.instance.getCfgById(82001)[1][i];return o&&CommonUtil.getPropCountById(b.kaiKongChuiId)>=o}if(m.instance.getCfgById(82002)[1][0]<=CommonUtil.getPropCountById(90140001)){var a=s[3],r=b.instance.getExistSubTypes(t,e,i),l=f.YuanShenUtil.getItemsByBagIdType(10,t);if(a){for(var h=0,c=l;h<c.length;h++)if(g=c[h],-1===r.indexOf(f.YuanShenUtil.getFulingSubType(g[0]))||f.YuanShenUtil.getFulingSubType(g[0])===f.YuanShenUtil.getFulingSubType(a)){var p=CommonUtil.getItemCfgById(a),u=CommonUtil.getItemCfgById(g[0]);if(u&&u[7]>p[7])return!0}}else for(var d=0,y=l;d<y.length;d++){var g=y[d];if(-1===r.indexOf(f.YuanShenUtil.getFulingSubType(g[0])))return!0}}return!1},b.prototype.calcFulingFight=function(o){var t=b.instance.infos[o],a=0;return t[5].forEach(function(t){for(var e=t[0],i=0;i<5;i++){var n=b.instance.getFulingByTypePartSlot(o+1,e,i);if(n&&n[3]){var s=l.instance.getCfgById(n[3]);s&&(a+=s[7])}}}),a},b.prototype.pushSkillData=function(t){t&&(this._skillData=t,this.checkRP(),GlobalData.dispatcher.event("YUAN_SHEN_SKILL_UPDATE"))},b.prototype.updateYuanShenSkill=function(t){if(t){for(var e=t[0],i=this._skillData[0],n=0,s=i.length;n<s;n++)if(i[n][0]===e[0]){i[n]=e;break}this.checkRP(),GlobalData.dispatcher.event("YUAN_SHEN_SKILL_UPDATE")}},b.prototype.getSkillData=function(t){if(!this._skillData)return null;for(var e=this._skillData[0],i=0,n=e.length;i<n;i++)if(e[i][0]===t)return e[i];return null},b.prototype.getFighting=function(t){var e=this.getSkillData(t);if(!e)return 0;for(var i=e[1],n=i.length,s=0,o=0;o<n;o++)s+=h.instance.getCfgById(i[o])[3];return s},b.prototype.getSkillMasterFight=function(t){var e=0,i=this.getSkillData(t);if(!i)return 0;for(var n=i[2],s=0,o=n.length;s<o;s++){var a=c.instance.getCfgBygradetypeLevel(n[s][0],t,n[s][1]);a&&(e+=a[4])}return e},b.prototype.getWeapSkillRpByType=function(t){var e=b.instance.infos[t-1];if(!e)return!1;var i=e[10],n=u.instance.getCfgByLevelAndType(i+1,t),s=u.instance.getCfgByLevelAndType(1,t);if(!n)return!1;var o=s[2],a=n[3];return _.instance.getItemCountById(a[0])>=a[1]&&e[9]>=o},b.prototype.getNum=function(){for(var t=0,e=1;e<=5;e++)for(var i=1;i<9;i++){var n=b.instance.getEquipByTypePart(e,i);if(n){var s=n[3][1];if(s&&0<s.length)for(var o=0;o<s.length;o++){var a=s[o];227===a[1]&&(t+=a[2])}}}return t},b.kaiKongChuiId=13250049,t=b,f.YuanShenModel=t}(modules=modules||{}),function(t){var d,e,i,y,u,g,n;function s(){return null!==e&&e.apply(this,arguments)||this}d=t.yuanShen||(t.yuanShen={}),i=ui.YuanShenSkillItemUI,y=t.config.YuanshenSkillCfg,u=t.bag.BagModel,g=t.config.SkillCfg,e=i,__extends(s,e),s.prototype.initialize=function(){this.rpImg.visible=!1,this.selectedImg.visible=!1},s.prototype.getDataChangeView=function(t,e,i){void 0===i&&(i=!0),this.isActivation=!1;var n=t%1e4;this.lvText.text=""+n,this.level=n;var s=y.instance.getCfgById(t);if(!s)return!1;var o=s[2],a=s[3],r=t%1e4?t:t+1;if(!g.instance.getCfgById(r))return!1;this.skillImg.skin="assets/icon/skill/"+CommonUtil.getSkillIcon(r)+".png",this.nameText.text=""+CommonUtil.getSkillName(r),this.selectedImg.visible=!1,this.grapBox.gray=!i;var l=y.instance.getCfgById(t+1),h=d.YuanShenModel.instance.getSkillData(e);if(!h)return!1;this.rpImg.visible=!1;var c=h[1],p=(c?c.length:0)+1;if(i)return!!l&&this.setRP(o,a,e,s);if(this.lvText.text="0",t!==23e6+1e4*p)return!1;var u=y.instance.getCfgById(t);return this.isActivation=!0,this.setRP(o,a,e,u)},s.prototype.hideBase=function(){this.rpImg.visible=this.selectedImg.visible=this.lvBase.visible=this.lvText.visible=!1,this.nameText.text="Lv."+this.level},s.prototype.setRP=function(t,e,i,n){var s=!0;if(2<=t.length){var o=u.instance.getItemCountById(t[0]);s=t[1]<=o}var a=d.YuanShenModel.instance.infos[i-1],r=a[1],l=a[2],h=s&&e<=1e3*r+l,c=a[4],p=!1;return 0<=c&&(p=n[4]<=c),this.rpImg.visible=h&&p,h},n=s,d.YuanShenSkillItem=n}(modules=modules||{}),function(t){var e,i,n,s,o,a;function r(){return null!==i&&i.apply(this,arguments)||this}e=t.yunmeng||(t.yunmeng={}),n=t.common.ProgressBarCtrl,s=t.yunmeng.YunMengMiJingModel,o=t.config.MonsterResCfg,i=ui.YunMengMiJingBossItemUI,__extends(r,i),r.prototype.initialize=function(){i.prototype.initialize.call(this),this._proCtrl=new n(this.proCtrlImg,145)},r.prototype.onEvt=function(){i.prototype.onEvt.call(this),this.onAutoClick(this,this,function(){GlobalData.dispatcher.event("YUNMENGMIJING_CLICK")}),this.onAutoGlobalEvt("DUNGEON_BOSS_UPDATE",this,this.updateState)},r.prototype.offEvt=function(){i.prototype.offEvt.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.setData=function(t){i.prototype.setData.call(this,t),t&&(this._bossId=t,this._reviveTime=0,this.selectShow(),s.instance.getCfgByid(this._bossId),this.nameText.text=o.instance.getMonsterName(this._bossId),this.bossLevel.text="Lv."+o.instance.getMonsterLevel(this._bossId),this.proImg.visible=!0,this.valueText.visible=!0,this.remainTime.visible=!1,this._proCtrl.maxValue=1e4,this._proCtrl.value=1e4,this.valueText.text="100%",this.updateState())},r.prototype.setSelected=function(t){i.prototype.setSelected.call(this,t),this.selectShow()},r.prototype.selectShow=function(){this.selected?(this.xuanZeImg.visible=!0,this._bossId):this.xuanZeImg.visible=!1},r.prototype.updateState=function(){var t=s.instance.getBossSeversInfoById(this._bossId);if(t){var e=t[2];if(e[0]){Laya.timer.clear(this,this.loopHandler),this._reviveTime=e[2];var i=this._reviveTime-GlobalData.serverTime;if(i<=0)return;this.setTime(i),this.proImg.visible=!1,this.valueText.visible=!1,this.remainTime.visible=!0,this._proCtrl.maxValue=1e4,this._proCtrl.value=100,this.valueText.text="100%",Laya.timer.loop(1e3,this,this.loopHandler)}else if(!e[0]){Laya.timer.clear(this,this.loopHandler),this.proImg.visible=!0,this.valueText.visible=!0,this.remainTime.visible=!1;var n=e[1];this._proCtrl.maxValue=1e4,this._proCtrl.value=1e4*n,this.valueText.text=(100*n>>0)+"%"}this.selectShow()}},r.prototype.loopHandler=function(){var t=this._reviveTime-GlobalData.serverTime;if(t<=0)return this._proCtrl.maxValue=1e4,this._proCtrl.value=1e4,this.valueText.text="100%",this.remainTime.visible=!1,this.proImg.visible=!0,this.valueText.visible=!0,void Laya.timer.clear(this,this.loopHandler);this.setTime(t)},r.prototype.setTime=function(t){this.remainTime.text=CommonUtil.msToHHMMSS(t)},r.prototype.close=function(){i.prototype.close.call(this),Laya.timer.clear(this,this.loopHandler)},r.prototype.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t),this._proCtrl.destroy(),this._proCtrl=null},a=r,e.YunMengMiJingBossItem=a}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.yunmeng||(t.yunmeng={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},s=o,e.YunMengItem=s}(modules=modules||{}),function(t){var e,i,n,s;function o(){var t=i.call(this)||this;return t.height=122,t}e=t.yunmeng||(t.yunmeng={}),n=t.bag.BaseItem,i=n,__extends(o,i),o.prototype.initialize=function(){i.prototype.initialize.call(this),this.nameVisible=!0,this.needTip=!0},o.prototype.setDataSource=function(t){t=[t[0],0,0,null],i.prototype.setDataSource.call(this,t),this._nameTxt.visible=!1},s=o,e.YunMengItem1=s}(modules=modules||{}),function(t){var e,i,n;function s(){}e=t.yybPrivilege||(t.yybPrivilege={}),i=t.redPoint.RedPointCtrl,Object.defineProperty(s,"instance",{get:function(){return this._instance=this._instance||new s},enumerable:!0,configurable:!0}),s.prototype.setState=function(t){this.state=t,GlobalData.dispatcher.event("YYB_PRIVILEGE_STATE_UPDATE"),i.instance.setRPProperty("yybPrivilege",0===this.state)},n=s,e.YybPrivilegeModel=n}(modules=modules||{}),function(e){var i,n,s,o,t;function a(){return n.call(this)||this}i=e.zhiZhenContinuousPay||(e.zhiZhenContinuousPay={}),s=e.config.FestivalPayConDayCfg,o=e.bag.BagUtil,n=e.soaring_singlePay.PayAndAwardsItem,__extends(a,n),a.prototype.setData=function(t){if(n.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},a.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[3];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&i.ZhiZhenContinuousPayCtrl.instance.DrawFestPayCon(this._datas[0]))}},a.prototype.showUI=function(){var t=this._datas[2],e=this._datas[4];this.StatementHTML.innerHTML="连续<span style='color:#b15315'>"+t+"天</span>每天充值<span style='color:#b15315'>"+e+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[3])),this.setBtnSure(),this.showScheduleText()},a.prototype.showScheduleText=function(){var t=this._value[2],e=this._datas[2],i="("+t+"/"+e+")";this.scheduleText.text=i,this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},a.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.zhiZhenType)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},t=a,i.ZhiZhenContinuousPayItem=t}(modules=modules||{}),function(r){var t,l,n,e;function i(){this._moneyAcc=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=r.zhiZhenContinuousPay||(r.zhiZhenContinuousPay={}),l=r.redPoint.RedPointCtrl,n=r.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moneyAcc",{get:function(){return this._moneyAcc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.zhiZhenType],e=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.zhiZhenType);if(l.instance.setRPProperty("zhiZhen1RP",!1),e&&t){var i=t[19];if(i){this._restTm=t[2],this._moneyAcc=i[1],this._rewardList.length=0;var n=i[this._rewardListById.length=0];if(n)for(var s=0;s<n.length;s++){var o=n[s],a=o[0];this._rewardList.push(o),this._rewardListById[a]=o}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(392),e=this.getIsLingQu(),i=r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.zhiZhenType);l.instance.setRPProperty("zhiZhen1RP",t&&e&&i)},e=i,t.ZhiZhenContinuousPayModel=e}(modules=modules||{}),function(e){var n,i,s,o,t;function a(){return null!==i&&i.apply(this,arguments)||this}n=e.zhiZhenCumulatePay||(e.zhiZhenCumulatePay={}),s=e.config.FestivalPayAccCfg,o=e.bag.BagUtil,i=e.soaring_singlePay.PayAndAwardsItem,__extends(a,i),a.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=s.instance.getCfgsById(e),!this._datas)return;this.showUI()}},a.prototype.sureBtnHandler=function(){switch(this._value[1]){case 0:WindowManager.instance.open(111),this.close();break;case 1:var t=[],e=this._datas[2];e&&(t=CommonUtil.formatItemData(e),o.canAddItemsByBagIdCount(t)&&n.ZhiZhenCumulatePayCtrl.instance.DrawFestPayAcc(this._datas[0]))}},a.prototype.showUI=function(){var t=this._datas[1];this.StatementHTML.innerHTML="累计充值<span style='color:#b15315'>"+t+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[2])),this.setBtnSure(),this.showScheduleText()},a.prototype.showScheduleText=function(){var t=n.ZhiZhenCumulatePayModel.instance.accumulate,e=this._datas[1],i="("+t+"/"+e+")";this.scheduleText.text=i,this.scheduleText.color=e<=t?"#16ba17":"#FF3e3e"},a.prototype.setBtnSure=function(){var t;e.festival.FestivalModel.instance.getHuoDongType(e.festival.FestivalModel.instance.zhiZhenType)?0==(t=this._value[1])?this.showGotoRecharge():1==t?this.showCanReceive():this.showReceived():this.showOver()},t=a,n.ZhiZhenCumulatePayItem=t}(modules=modules||{}),function(a){var t,r,n,e;function i(){this._accumulate=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.zhiZhenCumulatePay||(a.zhiZhenCumulatePay={}),r=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"accumulate",{get:function(){return this._accumulate},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){r.instance.setRPProperty("zhiZhen2RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.zhiZhenType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.zhiZhenType)&&t){var e=t[12];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._accumulate=e[1],this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];a.config.FestivalPayAccCfg.instance.getCfgsById(o)[4]<=this._accumulate&&(this._rewardList.push(s),this._rewardListById[o]=s)}this.setRP()}}},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i&&1==i[1]){t=!0;break}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(391),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.zhiZhenType);r.instance.setRPProperty("zhiZhen2RP",t&&e&&i)},e=i,t.ZhiZhenCumulatePayModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhi_zhen_festival||(t.zhi_zhen_festival={}),i=t.festival.FestConLoginBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenFestFestConLoginItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhi_zhen_festival||(t.zhi_zhen_festival={}),i=t.festival.ConvertItem,__extends(s,i),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"ZHIZHEN_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.zhiZhenTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintArr",{get:function(){return t.festival.FestivalModel.instance.zhiZhenHintArr},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenFestConvertItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhi_zhen_festival||(t.zhi_zhen_festival={}),i=t.festival.ConvertItem1,__extends(s,i),Object.defineProperty(s.prototype,"commonEventType",{get:function(){return"ZHIZHEN_FESTIVAL_HINT_UPDATE"},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalTypeEx",{get:function(){return t.festival.FestivalModel.instance.zhiZhenTypeEx},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hintArr",{get:function(){return t.festival.FestivalModel.instance.zhiZhenHintArr},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenFestConvertItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenFestival||(t.zhiZhenFestival={}),i=t.festival.FestDailyRewardBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenFestivalDailyRewardItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenGoodMan||(t.zhiZhenGoodMan={}),i=t.single_dog_good_man.SingleDogGoodManItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="zhi_zhen/icon_zzqy_01.png"},n=s,e.ZhiZhenGoodManItem=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenGoodMan||(t.zhiZhenGoodMan={}),i=t.single_dog_good_man.SingleDogGoodManItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.songBtn.skin="zhi_zhen/icon_zzqy_01.png"},n=s,e.ZhiZhenGoodManItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.ZhiZhenPayRank||(t.ZhiZhenPayRank={}),i=t.festival.PayRankBaseItem,__extends(s,i),Object.defineProperty(s.prototype,"consumptionItemId",{get:function(){return e.ZhiZhenPayRankModel.instance.consumptionItemId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rankersTableByRank",{get:function(){return e.ZhiZhenPayRankModel.instance._rankersTableByRank},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenPayRankItem=n}(modules=modules||{}),function(r){var t,e;function i(){this._consumptionItemId=r.config.BlendCfg.instance.getCfgById(67016)[1][0],this._consume=0,this._restTmConsumption=0,this._rankersTableByRank={},this._rankersTableById={}}t=r.ZhiZhenPayRank||(r.ZhiZhenPayRank={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTmConsumption",{get:function(){return this._restTmConsumption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consume",{get:function(){return this._consume},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consumptionItemId",{get:function(){return this._consumptionItemId},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.zhiZhenType];r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.zhiZhenType)&&t&&(this._consume=t[18],this._consume=this._consume?this._consume:0)},i.prototype.uodateInfoConsume=function(t){var e=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.zhiZhenType];r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.zhiZhenType)&&e&&(this._consume=t[0],this._consume=this._consume?this._consume:0,GlobalData.dispatcher.event("ACTIVITY_SPENDING_RANKING"))},i.prototype.uodateInfoDate=function(t){this._rankersTableByRank={},this._rankersTableById={};var e=r.festival.FestivalModel.instance.info[r.festival.FestivalModel.instance.zhiZhenType];if(r.festival.FestivalModel.instance.getHuoDongType(r.festival.FestivalModel.instance.zhiZhenType)&&e){this._restTmConsumption=t[0];for(var i=t[1],n=0;n<i.length;n++){var s=i[n];if(s){var o=s[3],a=s[0];this._rankersTableByRank[o]=s,this._rankersTableById[a]=s}}GlobalData.dispatcher.event("ACTIVITY_SPENDING_RANKING")}},e=i,t.ZhiZhenPayRankModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenScoreRank||(t.zhiZhenScoreRank={}),i=t.single_dog_score_rank.SingleDogScoreRankItem,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenScoreRankItem=n}(modules=modules||{}),function(n){var s,i,o,a,r,t;function e(){return null!==i&&i.apply(this,arguments)||this}s=n.zhiZhenSinglePay||(n.zhiZhenSinglePay={}),o=n.config.FestivalPayDayCfg,a=n.config.RechargeCfg,r=n.bag.BagUtil,i=n.soaring_singlePay.PayAndAwardsItem,__extends(e,i),e.prototype.setData=function(t){if(i.prototype.setData.call(this,t),this.CanBuyHTML.innerHTML="",this.StatementHTML.innerHTML="",this.scheduleText.text="",t){this._value=t;var e=this._value[0];if(this._datas=o.instance.getCfgsById(e),!this._datas)return;this.showUI()}},e.prototype.sureBtnHandler=function(){var t;if(t=this._value[1],Math.round(t/1e3)===Math.round(t%1e3))WindowManager.instance.open(111),this.close();else{var e=[],i=this._datas[4];i&&(e=CommonUtil.formatItemData(i),r.canAddItemsByBagIdCount(e)&&s.ZhiZhenSinglePayCtrl.instance.DrawFestPayDay(this._datas[0]))}},e.prototype.showUI=function(){var t=this._datas[1];this._maxNum=this._datas[6];var e=a.instance.getRecharCfgByIndex(t),i=99999999;e&&(i=e[2]),this.StatementHTML.innerHTML="单笔充值<span style='color:#b15315'>"+i+"元</span>,可领取奖励",this.showRewards1(CommonUtil.formatItemData(this._datas[4])),this.setBtnSure(),this.showScheduleText()},e.prototype.showScheduleText=function(){var t=this._value[1],e=Math.round(t%1e3),i=this._datas[0];0==s.ZhiZhenSinglePayModel.instance.getState(t,i)?(this.scheduleText.text="(0/1)",this.scheduleText.color="#FF3e3e"):(this.scheduleText.text="(1/1)",this.scheduleText.color="#16ba17");var n=this._maxNum-e;this.CanBuyHTML.innerHTML=0==n?"活动次数:<span style='color:#FF3e3e'>"+n+"/"+this._maxNum+"</span>":"活动次数:<span style='color:#16ba17'>"+n+"/"+this._maxNum+"</span>"},e.prototype.setBtnSure=function(){if(n.festival.FestivalModel.instance.getHuoDongType(n.festival.FestivalModel.instance.zhiZhenType)){var t;t=this._value[1];var e=this._datas[0],i=s.ZhiZhenSinglePayModel.instance.getState(t,e);0==i?this.showGotoRecharge():1==i?this.showCanReceive():this.showReceived()}else this.showOver()},t=e,s.ZhiZhenSinglePayItem=t}(modules=modules||{}),function(a){var t,r,l,n,e;function i(){this._money=0,this._rewardList=new Array,this._rewardListById=new Array,this._restTm=0}t=a.zhiZhenSinglePay||(a.zhiZhenSinglePay={}),r=a.config.FestivalPayDayCfg,l=a.redPoint.RedPointCtrl,n=a.funcOpen.FuncOpenModel,Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardList",{get:function(){return this._rewardList},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rewardListById",{get:function(){return this._rewardListById},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restTm",{get:function(){return this._restTm},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){l.instance.setRPProperty("zhiZhen3RP",!1);var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.zhiZhenType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.zhiZhenType)&&t){var e=t[11];if(e){this._restTm=CommonUtil.getZero0clockTimeStamp(),this._rewardList.length=0;var i=e[this._rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this._rewardList.push(s),this._rewardListById[o]=s}this.setRP()}}},i.prototype.getState=function(t,e){var i=Math.round(t/1e3),n=Math.round(t%1e3),s=r.instance.getCfgsById(e),o=s?s[6]:5;return i===n?n===o?2:0:1},i.prototype.getIsLingQu=function(){for(var t=!1,e=0;e<this._rewardList.length;e++){var i=this._rewardList[e];if(i){var n=i[1],s=i[0];if(1==this.getState(n,s)){t=!0;break}}}return t},i.prototype.setRP=function(){var t=n.instance.getFuncIsOpen(390),e=this.getIsLingQu(),i=a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.zhiZhenType);l.instance.setRPProperty("zhiZhen3RP",t&&e&&i)},e=i,t.ZhiZhenSinglePayModel=e}(modules=modules||{}),function(r){var t,n,s,e;function i(){return n.call(this)||this}t=r.zhiZhenStar||(r.zhiZhenStar={}),s=r.config.GoodRankSingleCfg,n=ui.ZhiZhenSartItem1UI,__extends(i,n),i.prototype.initialize=function(){n.prototype.initialize.call(this),this.shouHuPlayer=[this.item2,this.item3],this.shouHuPlayerText=[this.zanWuText1,this.zanWuText2],this.shouHuPlayerHTML=[this.StatementHTML1,this.StatementHTML2],CommonUtil.setHTMLPro(this.StatementHTML,"#1f304d","SimHei",22),CommonUtil.setHTMLPro(this.StatementHTML1,"#1f304d","SimHei",22,"center"),CommonUtil.setHTMLPro(this.StatementHTML2,"#1f304d","SimHei",22,"center"),this.bottomImg.skin="zhi_zhen/icon_zzqy_02.png"},i.prototype.onEvt=function(){n.prototype.onEvt.call(this),this.onAutoGlobalEvt("DOG_FESTIVAL_SART_UPDATE",this,this.showUI)},i.prototype.onOpened=function(){n.prototype.onOpened.call(this),this.showUI()},i.prototype.setData=function(t){n.prototype.setData.call(this,t),this.mingCiImg.visible=this.mingCIclip.visible=1<=t&&t<=3,this.rankText.visible=4<=t,this.rankText.text="第 "+t+" 名",this.mingCIclip.value=""+t,this._mingCi=t,this._dates=s.instance.getCfgsByGrade(r.festival.FestivalModel.instance.zhiZhenType,r.festival.FestivalModel.instance.getCrossOpenServerDay(r.festival.FestivalModel.instance.zhiZhenType),this._mingCi);var e=this._dates[3],i=this._dates[6];this.StatementHTML.innerHTML="收到"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.zhiZhenType)+"达<span style='color:#168a17'>"+e+"</span>可上榜",this.StatementHTML1.innerHTML="赠送<span style='color:#168a17'>"+(i?i[0]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.zhiZhenType)+"可上榜",this.StatementHTML2.innerHTML="赠送<span style='color:#168a17'>"+(i?i[1]:0)+"</span><br/>"+r.single_dog_sart.SingleDogSartModel.instance.getName(r.festival.FestivalModel.instance.zhiZhenType)+"可上榜"},i.prototype.showUI=function(){if(this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!1,this._theGoodRanker=r.single_dog_sart.SingleDogSartModel.instance.getTableByRank(r.festival.FestivalModel.instance.zhiZhenType,this._mingCi),this._theGoodRanker){var t=this._theGoodRanker[0],e=this._theGoodRanker[1];this.item1.data=t,this.item1.visible=!0,this.item1.giveBtn.visible=!0;for(var i=0;i<2;i++){var n=e[i],s=this.shouHuPlayer[i],o=this.shouHuPlayerText[i],a=this.shouHuPlayerHTML[i];n?(s.visible=!0,a.visible=o.visible=!1,s.data=n):(a.visible=o.visible=!0,s.visible=!1)}}else this.item1.visible=this.item2.visible=this.item3.visible=!1,this.StatementHTML2.visible=this.StatementHTML1.visible=this.StatementHTML.visible=this.zanWuText.visible=this.zanWuText1.visible=this.zanWuText2.visible=!0},e=i,t.ZhiZhenStarItem=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenStar||(t.zhiZhenStar={}),i=t.single_dog_sart.SingleDogSartItem1,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenStarItem1=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenStar||(t.zhiZhenStar={}),i=t.single_dog_sart.SingleDogSartItem2,__extends(s,i),Object.defineProperty(s.prototype,"festivalType",{get:function(){return t.festival.FestivalModel.instance.zhiZhenType},enumerable:!0,configurable:!0}),n=s,e.ZhiZhenStarItem2=n}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenStore||(t.zhiZhenStore={}),i=t.festival.FestBaseStoreItem,__extends(s,i),s.prototype.showUI=function(){this._dates=e.ZhiZhenStoreModel.instance.rewardListById,this.types=t.festival.FestivalModel.instance.zhiZhenType,i.prototype.showUI.call(this)},n=s,e.ZhiZhenStoreItem=n}(modules=modules||{}),function(a){var t,e;function i(){this.rewardList=new Array,this.rewardListById=new Array,this.tableConditions={};for(var t=a.config.BlendCfg.instance.getCfgById(67009)[2],e=0;e<t.length;e+=2){var i=parseInt(t[e]),n=t[e+1];i&&n&&(this.tableConditions[i]=n)}}t=a.zhiZhenStore||(a.zhiZhenStore={}),Object.defineProperty(i,"instance",{get:function(){return this._instance=this._instance||new i},enumerable:!0,configurable:!0}),i.prototype.uodateInfo=function(){var t=a.festival.FestivalModel.instance.info[a.festival.FestivalModel.instance.zhiZhenType];if(a.festival.FestivalModel.instance.getHuoDongType(a.festival.FestivalModel.instance.zhiZhenType)&&t){var e=t[17];if(e){this.restTm=t[2],this.rewardList.length=0;var i=e[this.rewardListById.length=0];if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s[0];this.rewardList.push(s),this.rewardListById[o]=s}console.log("至臻 商城 数据：",this.rewardList)}}},e=i,t.ZhiZhenStoreModel=e}(modules=modules||{}),function(t){var e,i,n;function s(){return null!==i&&i.apply(this,arguments)||this}e=t.zhiZhenYuLan||(t.zhiZhenYuLan={}),i=t.single_dog_yu_lan.SingleDogYuLanItem,__extends(s,i),s.prototype.onOpened=function(){i.prototype.onOpened.call(this),this.wardText.text="守护奖励"},n=s,e.ZhiZhenYuLanItem=n}(modules=modules||{});